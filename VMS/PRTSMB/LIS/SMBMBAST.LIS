SMBPRE          - PRINT SYMBIONT PREFIX FILE                     21-AUG-1978 21:35:01   VAX-11 MACRO X0.3-11               Page   0
TABLE OF CONTENTS   

   (1)    3800  DECLARATIONS
   (1)    3900  DECLARATIONS
   (1)    6300  MAILBOX AST CODE
   (1)   14100  MESSAGE HANDLER - RESUME
   (1)   23200  MESSAGE HANDLER - INITIATE PRINT
   (1)   33000  MESSAGE HANDLER - ABORT AND EXIT
SMBMBAST        - SYMBIONT MAILBOX AST ROUTINE                   21-AUG-1978 21:35:01   VAX-11 MACRO X0.3-11               Page   1
01              DECLARATIONS                                                                                                     (1)

                                     0000   100 	.TITLE	SMBMBAST - SYMBIONT MAILBOX AST ROUTINE
                                     0000   200 	.IDENT	/01/
                                     0000   300 
                                     0000   400 ;
                                     0000   500 ; COPYRIGHT (C) 1978
                                     0000   600 ; DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASSACHUSETTS 01754
                                     0000   700 ;
                                     0000   800 ; THIS SOFTWARE IS FURNISHED  UNDER A LICENSE FOR USE ONLY ON A SINGLE
                                     0000   900 ; COMPUTER  SYSTEM AND  MAY BE  COPIED ONLY WITH  THE INCLUSION OF THE
                                     0000  1000 ; ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE, OR ANY OTHER COPIES THEREOF,
                                     0000  1100 ; MAY NOT BE PROVIDED OR  OTHERWISE MADE AVAILABLE TO ANY OTHER PERSON
                                     0000  1200 ; EXCEPT FOR USE ON SUCH SYSTEM AND TO ONE WHO AGREES TO THESE LICENSE
                                     0000  1300 ; TERMS.  TITLE TO AND  OWNERSHIP OF THE  SOFTWARE  SHALL AT ALL TIMES
                                     0000  1400 ; REMAIN IN DEC.
                                     0000  1500 ;
                                     0000  1600 ; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE WITHOUT NOTICE
                                     0000  1700 ; AND SHOULD  NOT BE CONSTRUED  AS A COMMITMENT  BY DIGITAL  EQUIPMENT
                                     0000  1800 ; CORPORATION.
                                     0000  1900 ;
                                     0000  2000 ; DEC ASSUMES  NO  RESPONSIBILITY  FOR  THE USE OR  RELIABILITY OF ITS
                                     0000  2100 ; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
                                     0000  2200 
                                     0000  2300 ;++
                                     0000  2400 ; FACILITY: VAX/VMS PRINT SYMBIONT
                                     0000  2500 ;
                                     0000  2600 ; ABSTRACT: MAILBOX AST ROUTINES
                                     0000  2700 ;
                                     0000  2800 ; ENVIRONMENT: NATIVE/USER PRIVILEGED CODE.
                                     0000  2900 
                                     0000  3000 ;
                                     0000  3100 ; AUTHOR:	H.B. BOSWELL + LEN KAWELL, CREATION DATE: 21-APR-77
                                     0000  3200 ;
                                     0000  3300 ; MODIFIED BY:
                                     0000  3400 ;
                                     0000  3500 ;	, : VERSION
                                     0000  3600 ; 01	- 
                                     0000  3700 ;--
SMBMBAST        - SYMBIONT MAILBOX AST ROUTINE                   21-AUG-1978 21:35:01   VAX-11 MACRO X0.3-11               Page   2
01              DECLARATIONS                                                                                                     (1)

                                     0000  3900 	.SBTTL	DECLARATIONS
                                     0000  4000 
                                     0000  4100 
                                     0000  4200 ;
                                     0000  4300 ; INCLUDE FILES:
                                     0000  4400 ;
                                     0000  4500 ;	[PRTSMB.SRC]SMBPRE.MAR
                                     0000  4600 
                                     0000  4700 
                                     0000  4800 ;
                                     0000  4900 ; MACROS:
                                     0000  5000 ;
                                     0000  5100 
                                     0000  5200 
                                     0000  5300 ;
                                     0000  5400 ; EQUATED SYMBOLS:
                                     0000  5500 ;
                                     0000  5600 	$PCBDEF				; PROCESS CONTROL BLOCK OFFSETS
                                     0000  5700 	$JBCMSGDEF			; JOB CONTROLLER MESSAGES
                                     0000  5750 	$SHRDEF				; SHARED MESSAGES
                                     0000  5800 ;
                                     0000  5900 ; OWN STORAGE:
                                     0000  6000 ;
                                     0000  6100 
SMBMBAST        - SYMBIONT MAILBOX AST ROUTINE                   21-AUG-1978 21:35:01   VAX-11 MACRO X0.3-11               Page   3
01              MAILBOX AST CODE                                                                                                 (1)

                                     0000  6300 	.SBTTL	MAILBOX AST CODE
                                     0000  6400 ;++
                                     0000  6500 ; FUNCTIONAL DESCRIPTION:
                                     0000  6600 ;
                                     0000  6700 ;
                                     0000  6800 ; CALLING SEQUENCE:
                                     0000  6900 ;
                                     0000  7000 ;	CALLED AT AST LEVEL WHEN SOMETHING IS PUT IN THE MAILBOX
                                     0000  7100 ;
                                     0000  7200 ; INPUT PARAMETERS:
                                     0000  7300 ;
                                     0000  7400 ;	NONE
                                     0000  7500 ;
                                     0000  7600 ; IMPLICIT INPUTS:
                                     0000  7700 ;
                                     0000  7800 ;	MESSAGE IN THE MAILBOX
                                     0000  7900 
                                     0000  8000 ;
                                     0000  8100 ; OUTPUT PARAMETERS:
                                     0000  8200 ;
                                     0000  8300 ;	NONE
                                     0000  8400 ;
                                     0000  8500 ; IMPLICIT OUTPUTS:
                                     0000  8600 ;
                                     0000  8700 ;	SEE EACH MSG HANDLER
                                     0000  8800 ;
                                     0000  8900 ; COMPLETION CODES:
                                     0000  9000 ;
                                     0000  9100 ;	NONE
                                     0000  9200 ;
                                     0000  9300 ; SIDE EFFECTS:
                                     0000  9400 ;
                                     0000  9500 ;	NONE
                                     0000  9600 ;
                                     0000  9700 ;--
                                     0000  9800 
                                     0000  9900 	PURE_SECTION
                                     0000 10000 
                                     0000 10100 
                                     0000 10200 SMB$MBAST::
                               0E3C  0000 10300 	.WORD	^M<R2,R3,R4,R5,R9,R10,R11> ;ENTRY MASK
            5B       0000'CF     DE  0002 10400 	MOVAL	W^SMB$G_DATA,R11	;SET IMPURE DATA BLOCK
            5A         04 AB     9A  0007 10500 	MOVZBL	SD_B_STATE(R11),R10	;GET CURRENT STATE
                                     000B 10600 READ_MB_AGAIN:
            5A            01     91  000B 10700 	CMPB	#STATE$_ASNDEV,R10	;TRYING TO ASSIGN THE PRINTER
                          03     12  000E 10800 	BNEQ	10$			;BR IF NO
                          0101   30  0010 10900 	BSBW	ASNDEV			;TRY IT AGAIN
                          00C3   30  0013 11000 10$:	BSBW	READ_MB_NOW		;READ THE MAILBOX
            08            50     E8  0016 11100 	BLBS	R0,CHK_MBREAD		;BR IF OK
                                     0019 11200 ;
                                     0019 11300 ; RE-ENABLE AST
                                     0019 11400 ;
                                     0019 11500 
                          FFE4'  30  0019 11600 	BSBW	SMB$SETMBAST		;REENABLE THE AST
         04 AB            5A     90  001C 11700 	MOVB	R10,SD_B_STATE(R11)	;SET CURRENT STATE
                                 04  0020 11800 	RET				;EXIT THE AST
                                     0021 11900 
SMBMBAST        - SYMBIONT MAILBOX AST ROUTINE                   21-AUG-1978 21:35:01   VAX-11 MACRO X0.3-11               Page   4
01              MAILBOX AST CODE                                                                                                 (1)

                                     0021 12000 ;
                                     0021 12100 ; CASE TO CORRECT MESSAGE HANDLER
                                     0021 12200 ;
                                     0021 12300 
                                     0021 12400 CHK_MBREAD:
                       E7 AF     9F  0021 12500 	PUSHAB	READ_MB_AGAIN		; SET NORMAL RETURN ADDRESS
                                     0024 12600 	CASE	SD_T_MSGDATA+SIM$W_MSGTYP(R11),<- ;DISPATCH TO MESSAGE HANDLER
                                     0024 12700 		<INIT>,-		;INITIATE PRINT
                                     0024 12800 		<ABORT>,-		;ABORT PRINT
                                     0024 12900 		<SUSPEND>,-		;SUSPEND PRINTING
                                     0024 13000 		<RESUME>,-		;RESUME PRINTING
                                     0024 13100 		<EXIT>,-		;SYMBIONT EXIT
                                     0024 13200 		>,LIMIT=#MSG$_INIOPR	;START AT FIRST MESSAGE
                                     0033 13300 	SIGNAL	JBC$_INVMSG		;SIGNAL THE ERROR
                          CB     11  003E 13400 	BRB	READ_MB_AGAIN		;READ MAILBOX AGAIN
                                     0040 13500 
                                     0040 13600 UNEXPECT:				;UNEXPECTED SYMBIONT MANAGER MSG
                                     0040 13700 	SIGNAL	JBC$_UNESYMMSG		;SIGNAL THE ERROR
                          BE     11  004B 13800 	BRB	READ_MB_AGAIN		;READ MAILBOX AGAIN
                                     004D 13900 
SMBMBAST        - SYMBIONT MAILBOX AST ROUTINE                   21-AUG-1978 21:35:01   VAX-11 MACRO X0.3-11               Page   5
01              MESSAGE HANDLER - RESUME                                                                                         (1)

                                     004D 14100 	.SBTTL	MESSAGE HANDLER - RESUME
                                     004D 14200 
                                     004D 14300 ;
                                     004D 14400 ; RESUME PRINTING
                                     004D 14500 ;
                                     004D 14600 
                                     004D 14700 	.ENABL	LSB
                                     004D 14800 
                                     004D 14900 RESUME:
            5A            05     91  004D 15000 	CMPB	#STATE$_EOF_CLOS,R10	;ARE WE DONE
                          66     13  0050 15100 	BEQL	30$			;BR IF YES - IGNORE IT
            5A            06     91  0052 15200 	CMPB	#STATE$_SUSPEND,R10	;ARE WE SUSPENDED
                          E9     12  0055 15300 	BNEQ	UNEXPECT		;BR IF NO
            5A            59     9A  0057 15400 	MOVZBL	R9,R10			;RESTORE PREVIOUS STATE
            50         55 AB     B0  005A 15500 	MOVW	SD_T_MSGDATA+SIM$W_REST(R11),R0 ;GET INDICATOR
                          58     13  005E 15600 	BEQL	30$			;BR IF NO INDICATOR - JUST RESUME
                                     0060 15700 
                                     0060 15800 ;
                                     0060 15900 ; BACKWARD SPACE FILE
                                     0060 16000 ;
                                     0060 16100 
            5A            03     91  0060 16200 	CMPB	#STATE$_FLAGPAGE,R10	;PRINTING FLAG PAGE
                          53     13  0063 16300 	BEQL	30$			;BR IF YES - GET OUT
            50       8000 8F     B1  0065 16400 	CMPW	#^X8000,R0		;IS IT TOP OF FILE
                          10     12  006A 16500 	BNEQ	10$			;BR IF NO
                                     006C 16600 7$:
                                     006C 16700 	$REWIND	SD_G_RAB(R11)		;REWIND THE FILE
            39            50     E8  0077 16800 	BLBS	R0,20$			;BR IF OK
                          1F     11  007A 16900 	BRB	12$			
                                     007C 17000 10$:
                       4B AB     D5  007C 17100 	TSTL	SD_Q_TOP_FORMS(R11)	;DO WE HAVE A TOP OF FORMS YET
                          EB     13  007F 17200 	BEQL	7$			;BR IF NO - REWIND
                          06     28  0081 17300 	MOVC3	#6,SD_Q_TOP_FORMS(R11),-
       0158 CB         4B AB         0083 17400 			SD_G_RAB+RAB$W_RFA(R11) ;SET RFA OF LAST FORM FEED
       0166 CB            02     90  0088 17500 	MOVB	#RAB$C_RFA,SD_G_RAB+RAB$B_RAC(R11) ;SET RFA MODE
                                     008D 17600 	$FIND	RAB=SD_G_RAB(R11)	;FIND THE FORM FEED RECORD
            14            50     E8  0098 17700 	BLBS	R0,15$			;BR IF $FIND OK
                                     009B 17800 12$:	SETBIT	SD_V_GETERR,SD_B_ERR_FLAGS(R11) ;SET GET ERROR
                                     009F 17900 	SIGNAL	SHR$_RMSERROR!<4@16>,#0,R0 ;SIGNAL THE ERROR
                                 05  00AE 18000 	RSB				;
                                     00AF 18100 
                                     00AF 18200 	ASSUME	RAB$C_SEQ EQ 0
                                     00AF 18300 
                                     00AF 18400 15$:
                     0166 CB     94  00AF 18500 	CLRB	SD_G_RAB+RAB$B_RAC(R11)	;SET ACCESS BACK TO SEQUENTIAL
                                     00B3 18600 20$:
         43 AB         44 AB     90  00B3 18700 	MOVB	SD_B_MAXLTP(R11),SD_B_LTPCNT(R11) ;FORCE FORM FEED IF NECESSARY
                                 05  00B8 18800 30$:	RSB				;
                                     00B9 18900  
                                     00B9 19000 	.DSABL	LSB			;
                                     00B9 19100 
                                     00B9 19200 	.DSABL	LSB
SMBMBAST        - SYMBIONT MAILBOX AST ROUTINE                   21-AUG-1978 21:35:01   VAX-11 MACRO X0.3-11               Page   6
01              MESSAGE HANDLER - RESUME                                                                                         (1)

                                     00B9 19400 	.ENABL	LSB
                                     00B9 19500 
                                     00B9 19600 SUSPEND:
            5A            05     91  00B9 19700 	CMPB	#STATE$_EOF_CLOS,R10	;ARE WE DONE
                          1A     13  00BC 19800 	BEQL	20$			;BR IF YES - IGNORE IT
            5A            00     91  00BE 19900 	CMPB	#STATE$_IDLE,R10	;ARE WE IDLE
                          03     1F  00C1 20000 	BLSSU	10$			;BR IF NO
                          FF7A   31  00C3 20100 	BRW	UNEXPECT		;UNEXPECTED MESSAGE
                                     00C6 20200 10$:
            59            5A     9A  00C6 20300 	MOVZBL	R10,R9			;SAVE CURRENT STATE FOR RESUME
            5A            06     9A  00C9 20400 	MOVZBL	#STATE$_SUSPEND,R10	;SET SUSPEND STATE
            50       0000'8F     3C  00CC 20500 	MOVZWL	#IO$_READVBLK,R0	;SET FUNCTION CODE
                          0B     10  00D1 20600 	BSBB	READ_MB			;READ THE MAILBOX
            6E       FF4A CF     9E  00D3 20700 CHKMB1:	MOVAB	CHK_MBREAD,(SP)		; SET NEW RETURN ADDRESS
                                 05  00D8 20800 20$:	RSB				;
                                     00D9 20900 
                                     00D9 21000 	.DSABL	LSB
                                     00D9 21100 
                                     00D9 21200 ;
                                     00D9 21300 ; LOCAL SUBROUTINE TO READ THE MAILBOX
                                     00D9 21400 ;
                                     00D9 21500 ; INPUT - AT READ_MB WITH  R0 = FUNCTION CODE
                                     00D9 21600 ;
                                     00D9 21700 	.ENABL	LSB
                                     00D9 21800 READ_MB_NOW:				; ENTER FOR READ-NOW
            50       0000'8F     3C  00D9 21900 	MOVZWL	#IO$_READVBLK!IO$M_NOW,R0 ; SET FUNCTION OF READ WITH NO WAIT
                                     00DE 22000 READ_MB:
            51            7E     7E  00DE 22100 	MOVAQ	-(SP),R1		;CREATE SPACE FOR IOSB
                                     00E1 22200 	$QIOW_S		-		;READ THE MAILBOX
                                     00E1 22300 	EFN=#SMB$K_MBEFN,-		;EVENT FLAG
                                     00E1 22400 	CHAN=SD_W_MBCHAN(R11),-		;MAILBOX CHANNEL
                                     00E1 22500 	FUNC=R0,-			;FUNCTION
                                     00E1 22600 	IOSB=(R1),-			;I/O STATUS BLOCK
                                     00E1 22700 	P1=SD_T_MSGDATA(R11),-		;DATA BUFFER ADDRESS
                                     00E1 22800 	P2=SD_W_MBREADLEN(R11)		;READ SIZE
            50            8E     7D  00FE 22900 	MOVQ	(SP)+,R0		;GET I/O STATUS
                                 05  0101 23000 10$:	RSB
SMBMBAST        - SYMBIONT MAILBOX AST ROUTINE                   21-AUG-1978 21:35:01   VAX-11 MACRO X0.3-11               Page   7
01              MESSAGE HANDLER - INITIATE PRINT                                                                                 (1)

                                     0102 23200 	.SBTTL	MESSAGE HANDLER - INITIATE PRINT
                                     0102 23300 
                                     0102 23400 ;
                                     0102 23500 ; INITIATE PRINT
                                     0102 23600 ;
                                     0102 23700 
                                     0102 23800 	.ENABL	LSB
                  FFFFFFFF FD050F80  0102 23900 5$:	.LONG	<-1*50000000>,-1	; WAIT FIVE SECONDS
                                     010A 24000 
                                     010A 24100 INIT:
                                     010A 24200 
                                     010A 24300 	ASSUME	STATE$_IDLE EQ 0
                                     010A 24400 
                          5A     95  010A 24500 	TSTB	R10			;ARE WE IDLE
                          03     13  010C 24600 	BEQL	10$			;BR IF YES
                          FF2F   31  010E 24700 	BRW	UNEXPECT		;UNEXPECTED MESSAGE
                                     0111 24800 10$:
            5A            01     9A  0111 24900 	MOVZBL	#STATE$_ASNDEV,R10	;SET ASSIGNING DEVICE STATE
         0D AB            04     B0  0114 25000 ASNDEV:	MOVW	#4,SD_W_MBREADLEN(R11)	;SET READ LENGTH TO MIMINUM
            50       008F CB     9E  0118 25100 12$:	MOVAB	SD_T_MSGDATA+SIM$T_PRTNAM(R11),R0 ;POINT AT DEVICE NAME
            51       00CC CB     3E  011D 25200 	MOVAW	SD_G_QIOBLK+QIO$_CHAN(R11),R1 ;ADDRESS OF WORD TO STORE CHANNEL
                          FEDB'  30  0122 25300 	BSBW	SMB$ASSIGNDEV		;ASSIGN THE PRINTER
            20            50     E8  0125 25400 	BLBS	R0,17$			;BR IF ALL IS WELL
                          AF     10  0128 25500 	BSBB	READ_MB_NOW		;SEE IF THERE IS ANY MAIL
            A6            50     E8  012A 25600 	BLBS	R0,CHKMB1		;BR IF YES-CHECK OUT THE MESSAGE
                                     012D 25700 	$SETIMR_S #SMB$K_TIMEFN,5$	;WAIT FOR A LITTLE WHILE
                                     013D 25800 	$WAITFR_S #SMB$K_TIMEFN
                          D0     11  0146 25900 	BRB	12$			;TRY TO ASSIGN THE PRINTER
                          5A     D6  0148 26000 17$:	INCL	R10			; CHANGE STATE TO OPEN
            50       00CC CB     DE  014A 26100 	MOVAL	SD_G_QIOBLK+QIO$_CHAN(R11),R0 ;GET ADDR OF CHANNEL
                          FEAE'  30  014F 26200 	BSBW	SMB$GETCHAN		;GET LP CHANNEL INFO
         4A AB       01D0 CB     33  0152 26300 	CVTWB	SD_T_TBUF+6(R11),SD_B_PAGEWIDTH(R11) ;SET PAGE WIDTH
         49 AB       01D5 CB     90  0158 26400 	MOVB	SD_T_TBUF+11(R11),SD_B_PAGELEN(R11) ;SET PAGE LENGTH
                          04     83  015E 26500 	SUBB3	#4,SD_T_TBUF+11(R11),-
         44 AB       01D5 CB         0160 26600 			SD_B_MAXLTP(R11) ;SET MAX LINES THIS PAGE
                       3B AB     D4  0165 26700 	CLRL	SD_L_GETCNT(R11)	;INIT GET COUNT
                       3F AB     D4  0168 26800 	CLRL	SD_L_QIOCNT(R11)	;INIT QIO COUNT
                       45 AB     D4  016B 26900 	CLRL	SD_L_LINECNT(R11)	;INIT LINE COUNT
                                     016E 27000 
                                     016E 27100 	ASSUME	NAM$W_FID EQ NAM$T_DVI+16
                                     016E 27200 	ASSUME	NAM$W_DID EQ NAM$W_FID+6
                                     016E 27300 
                          1C     28  016E 27400 	MOVC3	#16+6+6,SD_T_MSGDATA+SIM$T_VOLNAM(R11),- ;SET DEVICE, -
       01A0 CB         6F AB         0170 27500 			SD_G_NAM+NAM$T_DVI(R11) ;FILE AND DIRECTORY ID'S
                                     0175 27600 	$GETTIM_S	SD_Q_PTIME(R11)	;GET TIME FILE WAS PRINTED
                                 9A  017F 27650 	MOVZBL	SD_T_MSGDATA+SIM$T_FILNAM(R11),- ;CREATE FILENAME DESC
       0302 CB       009F CB         0180 27660 		SD_Q_FILENAME(R11)
                                 9E  0186 27670 	MOVAB	SD_T_MSGDATA+SIM$T_FILNAM+1(R11),-
       0306 CB       00A0 CB         0187 27680 		SD_Q_FILENAME+4(R11)
                          006F   30  018D 27700 	BSBW	SMB$SETUIC		; SET UIC TO REQUESTORS
       00FC CB   01000000 8F     D0  0190 27800 	MOVL	#FAB$M_NAM,SD_G_FAB+FAB$L_FOP(R11) ;OPEN BY FILE ID
                                     0199 27850 						  ;(ALSO CLEAR OTHER OPTIONS)
                                     0199 27900 	$OPEN	SD_G_FAB(R11)		;OPEN THE FILE
            09            50     E8  01A4 28000 	BLBS	R0,20$			;BR IF OK
                                     01A7 28100 	SETBIT	SD_V_OPENERR,SD_B_ERR_FLAGS(R11) ;SET OPEN ERROR
            5A            05     9A  01AB 28200 	MOVZBL	#STATE$_EOF_CLOS,R10	;SET EOF_CLOSE STATE
                          1D     11  01AE 28300 	BRB	30$			;GET OUT
SMBMBAST        - SYMBIONT MAILBOX AST ROUTINE                   21-AUG-1978 21:35:01   VAX-11 MACRO X0.3-11               Page   8
01              MESSAGE HANDLER - INITIATE PRINT                                                                                 (1)

                                     01B0 28400 20$:					;
                                     01B0 28500 	$CONNECT	RAB=SD_G_RAB(R11);CONNECT THE RAB
       0174 CB       01C4 CB     9E  01BB 28700 	MOVAB	SD_T_SQBUF(R11),SD_G_RAB+RAB$L_RHB(R11) ;SET HEADER BUF ADDR
       0137 CB            02     91  01C2 28800 	CMPB	#2,SD_G_FAB+FAB$B_FSZ(R11) ;IS THE FSZ OK
                          04     1E  01C7 28900 	BGEQU	30$			;BR IF YES
                     0174 CB     D4  01C9 29000 	CLRL	SD_G_RAB+RAB$L_RHB(R11)	;DON'T GET THE RECORD HEADER
                          36     10  01CD 29100 30$:	BSBB	SMB$RSTUIC		; RESTORE UIC TO DEFAULT
                       4B AB     D4  01CF 29200 	CLRL	SD_Q_TOP_FORMS(R11)	;SHOW NO TOP OF FORM YET FOR RESUME
                                     01D2 29300 	SETBIT	RAB$V_LOC,SD_G_RAB+RAB$L_ROP(R11) ;USUALLY USE LOCATE MODE
       0117 CB            03     91  01D8 29400 	CMPB	#FAB$C_VFC,SD_G_FAB+FAB$B_RFM(R11) ;SEQUENCE NO. OR PRINT FORMAT?
                          0C     12  01DD 29500 	BNEQ	WAKUP			;BR IF NOT
       0116 CB            02     E0  01DF 29600 	BBS	#FAB$V_PRN,SD_G_FAB+FAB$B_RAT(R11),WAKUP ;BR IF PRINT FILE FORMAT
                          06         01E4       
                                     01E5 29700 	CLRBIT	RAB$V_LOC,SD_G_RAB+RAB$L_ROP(R11) ;USE MOVE MODE
                                     01EB 29800 WAKUP:	SETBIT	SD_V_GOOD_WAKE,SD_B_GEN_FLAGS(R11) ;SET GOOD WAKE FOR MAIN CODE
                                     01EF 29900 	$WAKE_S				;WAKE THE SYMBIONT
                                 05  01FA 30000 	RSB				;
                                     01FB 30100  
                                     01FB 30200 	.DSABL	LSB			;
                                     01FB 30300  
                                     01FB 30400 ;+
                                     01FB 30500 ; SETUIC - SET UIC TO THAT OF THE REQUESTOR
                                     01FB 30600 ; RSTUIC - RESET UIC TO NORMAL
                                     01FB 30700 ;-
                                     01FB 30800 	.ENABL	LSB
                           00010004  01FB 30900 DEFUIC:	.LONG	<^O1@16+^O4>		; DEFAULT UIC = [1,4]
                                     01FF 31000  
                                     01FF 31100 SMB$SETUIC::				; SET UIC TO THAT OF REQUESTOR
            50         57 AB     DE  01FF 31200 	MOVAL	SD_T_MSGDATA+SIM$L_UIC(R11),R0 ; UIC IS HERE
                          04     11  0203 31300 	BRB	10$
                                     0205 31400 SMB$RSTUIC::				; RESTORE UIC
            50         F3 AF     9E  0205 31500 	MOVAB	DEFUIC,R0		; DEFAULT UIC
                                     0209 31600 10$:	$CMKRNL_S  B^100$,(R0)		; EXECUTE KERANL MODE ROUTINE
                                 05  0215 31700 	RSB				;
                                     0216 31800 
                                     0216 31900 ;
                                     0216 32000 ; KERNAL ACCESS MODE ROUTINE TO SET SYMBIONT UIC
                                     0216 32100 ;
                               0000  0216 32200 100$:	.WORD	0			; ENTRY
            50   00000000'9F     D0  0218 32300 	MOVL	@#SCH$GL_CURPCB,R0	; GET CURRENT PROCESS CONTROL BLOCK
         20 A0            6C     D0  021F 32400 	MOVL	(AP),PCB$L_UIC(R0)	; SET THE UIC
                          50     D6  0223 32500 	INCL	R0			; MAKE AN ODD VALUE
                                 04  0225 32600 	RET				;
                                     0226 32700  
                                     0226 32800 	.DSABL	LSB
SMBMBAST        - SYMBIONT MAILBOX AST ROUTINE                   21-AUG-1978 21:35:01   VAX-11 MACRO X0.3-11               Page   9
01              MESSAGE HANDLER - ABORT AND EXIT                                                                                 (1)

                                     0226 33000 	.SBTTL	MESSAGE HANDLER - ABORT AND EXIT
                                     0226 33100 ;
                                     0226 33200 ; ABORT PRINT
                                     0226 33300 ;
                                     0226 33400 
                                     0226 33500 	.ENABL	LSB
                                     0226 33600 
                                     0226 33700 ABORT:
            5A            05     91  0226 33800 	CMPB	#STATE$_EOF_CLOS,R10	;ARE WE DONE
                          27     13  0229 33900 	BEQL	30$			;BR IF YES - IGNORE IT
            5A            00     91  022B 34000 	CMPB	#STATE$_IDLE,R10	;ARE WE IDLE
                          03     1F  022E 34100 	BLSSU	10$			;BR IF NO - OK
                          FE0D   31  0230 34200 	BRW	UNEXPECT		;UNEXPECTED MESSAGE
                                     0233 34300 10$:
                                     0233 34400 	SETBIT	SD_V_ABORT,SD_B_ERR_FLAGS(R11) ;SET ABORT PRINT BIT
                                     0237 34500 	$CANCEL_S SD_G_QIOBLK+QIO$_CHAN(R11) ;CANCEL PRINTER I/O
            5A            06     91  0243 34600 	CMPB	#STATE$_SUSPEND,R10	;WERE WE SUSPENDED
                          03     12  0246 34700 	BNEQ	20$			;BR IF NO
            5A            59     9A  0248 34800 	MOVZBL	R9,R10			;RESTORE PREVIOUS STATE
            5A            01     91  024B 34900 20$:	CMPB	#STATE$_ASNDEV,R10	; TRYING TO ASSIGN THE PRINTER?
                          02     12  024E 35000 	BNEQ	30$			; BR IF NO
                          5A     D4  0250 35100 	CLRL	R10			; SET IDLE
                                 05  0252 35200 30$:	RSB				;
                                     0253 35300 
                                     0253 35400 	.DSABL	LSB
                                     0253 35500 
                                     0253 35600 ;
                                     0253 35700 ; SYMBIONT EXIT
                                     0253 35800 ;
                                     0253 35900 
                                     0253 36000 	.ENABL	LSB
                                     0253 36100 
                                     0253 36200 EXIT:
            5A            00     91  0253 36300 	CMPB	#STATE$_IDLE,R10	;ARE WE IDLE
                          03     13  0256 36400 	BEQL	10$			;BR IF YES
                          FDE5   31  0258 36500 	BRW	UNEXPECT		;UNEXPECTED MESSAGE
                                     025B 36600 10$:
                                     025B 36700 	$DASSGN_S	SD_W_JBCCHAN(R11) ;DEASSIGN THE MGR'S MB
            0D            50     E9  0266 36800 	BLBC	R0,20$			;BR IF ERROR
                                     0269 36900 	$DASSGN_S	SD_W_MBCHAN(R11) ;DEASSIGN MY MB
            0F            50     E8  0273 37000 	BLBS	R0,30$			;BR IF OK
                                     0276 37100 20$:	SIGNAL	JBC$_MBDEAS,#0,R0	;SIGNAL THE ERROR
                                     0285 37200 30$:	$DELMBX_S	SD_W_MBUNIT(R11) ;DELETE MY MB (JUST IN CASE)
                                     0290 37300 	$EXIT_S				;DONE - GET OUT
                                     0299 37400 
                                     0299 37500 	.DSABL	LSB
                                     0299 37600  
                                     0299 37700 	.END
SMBMBAST        - SYMBIONT MAILBOX AST ROUTINE                   21-AUG-1978 21:35:01   VAX-11 MACRO X0.3-11               Page  10
SYMBOL TABLE                                                                                                                     (1)

$$.TMP1        = 00000001            FAB$M_DEL      = 00000004            FAB$V_ESC      = 0000001B            
$$.TMP2        = 000000CB            FAB$M_DFW      = 00000020            FAB$V_EXE      = 00000007            
$$ARGS         = 0000000C            FAB$M_DLT      = 00008000            FAB$V_FTN      = 00000000            
$$ARGS$$       = 00000003            FAB$M_DMO      = 00001000            FAB$V_GET      = 00000001            
$$T1           = 00000001            FAB$M_ESC      = 08000000            FAB$V_INP      = 00000013            
ABORT            00000226 R     03   FAB$M_EXE      = 00000080            FAB$V_JNL      = 00000016            
ASNDEV           00000114 R     03   FAB$M_FTN      = 00000001            FAB$V_KFO      = 0000001E            
BIT...         = 00001258            FAB$M_GET      = 00000002            FAB$V_MSE      = 00000004            
CHKMB1           000000D3 R     03   FAB$M_INP      = 00080000            FAB$V_MXV      = 00000001            
CHK_MBREAD       00000021 R     03   FAB$M_JNL      = 00400000            FAB$V_NAM      = 00000018            
DEFUIC           000001FB R     03   FAB$M_KFO      = 40000000            FAB$V_NEF      = 0000000A            
EXIT             00000253 R     03   FAB$M_MSE      = 00000010            FAB$V_NFS      = 00000010            
FAB$B_BID        00000000            FAB$M_MXV      = 00000002            FAB$V_NIL      = 00000005            
FAB$B_BKS        0000003E            FAB$M_NAM      = 01000000            FAB$V_OFP      = 0000001D            
FAB$B_BLN        00000001            FAB$M_NEF      = 00000400            FAB$V_ORG      = 00000004            
FAB$B_DNS        00000035            FAB$M_NFS      = 00010000            FAB$V_POS      = 00000008            
FAB$B_FAC        00000016            FAB$M_NIL      = 00000020            FAB$V_PPF      = 00000012            
FAB$B_FNS        00000034            FAB$M_OFP      = 20000000            FAB$V_PPF_IND  = 0000000E            
FAB$B_FSZ        0000003F            FAB$M_POS      = 00000100            FAB$V_PPF_RAT  = 00000006            
FAB$B_ORG        0000001D            FAB$M_PPF      = 00040000            FAB$V_PRN      = 00000002            
FAB$B_RAT        0000001E            FAB$M_PPF_IND  = 00004000            FAB$V_PUT      = 00000000            
FAB$B_RFM        0000001F            FAB$M_PPF_RAT  = 00003FC0            FAB$V_RCK      = 00000017            
FAB$B_RTV        0000001C            FAB$M_PRN      = 00000004            FAB$V_RWC      = 0000000B            
FAB$B_SHR        00000017            FAB$M_PUT      = 00000001            FAB$V_RWO      = 00000007            
FAB$C_BID      = 00000003            FAB$M_RCK      = 00800000            FAB$V_SCF      = 0000000E            
FAB$C_BLN        00000050            FAB$M_RWC      = 00000800            FAB$V_SHRDEL   = 00000002            
FAB$C_FIX      = 00000001            FAB$M_RWO      = 00000080            FAB$V_SHRGET   = 00000001            
FAB$C_HSH      = 00000030            FAB$M_SCF      = 00004000            FAB$V_SHRPUT   = 00000000            
FAB$C_IDX      = 00000020            FAB$M_SHRDEL   = 00000004            FAB$V_SHRUPD   = 00000003            
FAB$C_MAXRFM   = 00000003            FAB$M_SHRGET   = 00000002            FAB$V_SPL      = 0000000D            
FAB$C_REL      = 00000010            FAB$M_SHRPUT   = 00000001            FAB$V_SQO      = 00000006            
FAB$C_RFM_DFLT = 00000002            FAB$M_SHRUPD   = 00000008            FAB$V_SUP      = 00000002            
FAB$C_SEQ      = 00000000            FAB$M_SPL      = 00002000            FAB$V_TEF      = 0000001C            
FAB$C_UDF      = 00000000            FAB$M_SQO      = 00000040            FAB$V_TMD      = 00000004            
FAB$C_VAR      = 00000002            FAB$M_SUP      = 00000004            FAB$V_TMP      = 00000003            
FAB$C_VFC      = 00000003            FAB$M_TEF      = 10000000            FAB$V_TRN      = 00000004            
FAB$K_BLN        00000050            FAB$M_TMD      = 00000010            FAB$V_UFM      = 0000001A            
FAB$L_ALQ        00000010            FAB$M_TMP      = 00000008            FAB$V_UFO      = 00000011            
FAB$L_CTX        00000018            FAB$M_TRN      = 00000010            FAB$V_UPD      = 00000003            
FAB$L_DEV        00000040            FAB$M_UFM      = 04000000            FAB$V_UPI      = 00000006            
FAB$L_DNA        00000030            FAB$M_UFO      = 00020000            FAB$V_WCK      = 00000009            
FAB$L_FNA        0000002C            FAB$M_UPD      = 00000008            FAB$W_BLS        0000003C            
FAB$L_FOP        00000004            FAB$M_UPI      = 00000040            FAB$W_DEQ        00000014            
FAB$L_JNL        00000020            FAB$M_WCK      = 00000200            FAB$W_IFI        00000002            
FAB$L_MRN        00000038            FAB$S_ORG      = 00000004            FAB$W_MRS        00000036            
FAB$L_NAM        00000028            FAB$S_PPF_RAT  = 00000008            GBL...         = 00000000            
FAB$L_SDC        00000044            FAB$V_BIO      = 00000005            INIT             0000010A R     03   
FAB$L_STS        00000008            FAB$V_BLK      = 00000003            IO$M_NOW         ********   X   03   
FAB$L_STV        0000000C            FAB$V_BRO      = 00000006            IO$_READVBLK     ********   X   03   
FAB$L_XAB        00000024            FAB$V_CBT      = 00000015            JBC$_ACMINVOP  = 00048088            
FAB$M_BIO      = 00000020            FAB$V_CIF      = 00000019            JBC$_ACNTOPN   = 00048478            
FAB$M_BLK      = 00000008            FAB$V_CR       = 00000001            JBC$_ACNTWRT   = 00048480            
FAB$M_BRO      = 00000040            FAB$V_CTG      = 00000014            JBC$_ENTQUE    = 000484A8            
FAB$M_CBT      = 00200000            FAB$V_DEL      = 00000002            JBC$_ILLDEVNAM = 00048000            
FAB$M_CIF      = 02000000            FAB$V_DFW      = 00000005            JBC$_ILLDEVTYP = 00048008            
FAB$M_CR       = 00000002            FAB$V_DLT      = 0000000F            JBC$_ILLFILNAM = 00048010            
FAB$M_CTG      = 00100000            FAB$V_DMO      = 0000000C            JBC$_ILLQUENAM = 00048018            
SMBMBAST        - SYMBIONT MAILBOX AST ROUTINE                   21-AUG-1978 21:35:01   VAX-11 MACRO X0.3-11               Page  11
SYMBOL TABLE                                                                                                                     (1)

JBC$_INPASGN   = 00048488            MSG$_EXIT      = 00000034            NAM$M_LOWVER   = 00004000            
JBC$_INPREAD   = 00048490            MSG$_INIOPR    = 00000010            NAM$M_NODE     = 00020000            
JBC$_INVMSG    = 00048418            MSG$_INTMSG    = 00000035            NAM$M_PPF      = 00010000            
JBC$_INVSCT    = 00048468            MSG$_OPREPLY   = 00000009            NAM$M_QUOTED   = 00040000            
JBC$_JOBABORT  = 00048080            MSG$_OPRQST    = 00000008            NAM$M_WILDCARD = 00000100            
JBC$_JOBCRD    = 000484B0            MSG$_PATHLOST  = 00000036            NAM$M_WILD_DIR = 00100000            
JBC$_LOSTREC   = 00048438            MSG$_PROTOCOL  = 00000037            NAM$M_WILD_GRP = 01000000            
JBC$_MBASGN    = 00048400            MSG$_REJECT    = 00000038            NAM$M_WILD_MBR = 02000000            
JBC$_MBDEAS    = 00048460            MSG$_RESOPR    = 00000013            NAM$M_WILD_NAME= 00000020            
JBC$_MBREAD    = 00048408            MSG$_SCANBAD   = 00000028            NAM$M_WILD_SFD1= 02000000            
JBC$_MBSETAST  = 000484C8            MSG$_SCANRSP   = 00000029            NAM$M_WILD_SFD2= 04000000            
JBC$_MBWRITE   = 000484D0            MSG$_SMBDON    = 00000009            NAM$M_WILD_SFD3= 08000000            
JBC$_MULTREC   = 00048430            MSG$_SMBINI    = 00000008            NAM$M_WILD_SFD4= 10000000            
JBC$_NOOPENJOB = 00048048            MSG$_SMBRSP    = 00000020            NAM$M_WILD_SFD5= 20000000            
JBC$_NOPRIV    = 00048020            MSG$_SNDACC    = 0000000A            NAM$M_WILD_SFD6= 40000000            
JBC$_NOQUEHDR  = 00048028            MSG$_SNDSMB    = 00000004            NAM$M_WILD_SFD7= 80000000            
JBC$_NOQUESPACE= 00048030            MSG$_SUSOPR    = 00000012            NAM$M_WILD_TYPE= 00000010            
JBC$_NORMAL    = 00040001            MSG$_THIRDPARTY= 00000039            NAM$M_WILD_UFD = 01000000            
JBC$_NOSUCHJOB = 00048040            MSG$_TIMEOUT   = 0000003A            NAM$M_WILD_VER = 00000008            
JBC$_NOSUCHQUE = 00048038            MSG$_TRMHANGUP = 00000006            NAM$S_DIR_LVLS = 00000003            
JBC$_PASSCRD   = 000484B8            MSG$_TRMUNSOLIC= 00000001            NAM$T_DVI        00000014            
JBC$_PRCREAT   = 00048410            MSG$_XM_ATTN   = 0000000D            NAM$V_DIR_LVLS = 00000015            
JBC$_PRINTOUT  = 000484E0            MSG$_XM_DATAVL = 0000000B            NAM$V_EXP_DEV  = 00000007            
JBC$_QUECNT    = 00048428            MSG$_XM_SHUTDN = 0000000C            NAM$V_EXP_DIR  = 00000006            
JBC$_QUEERR    = 00048458            NAM$B_BID        00000000            NAM$V_EXP_NAME = 00000002            
JBC$_QUENOSTOP = 00048050            NAM$B_BLN        00000001            NAM$V_EXP_TYPE = 00000001            
JBC$_QUEUPD    = 000484E8            NAM$B_CURLVL     00000038            NAM$V_EXP_VER  = 00000000            
JBC$_SCTERR    = 00048450            NAM$B_ESL        0000000B            NAM$V_GRP_MBR  = 00000013            
JBC$_SMINVOPR  = 00048058            NAM$B_ESS        0000000A            NAM$V_HIGHVER  = 0000000F            
JBC$_SMINVOPT  = 00048060            NAM$B_RSL        00000003            NAM$V_LOWVER   = 0000000E            
JBC$_SMINVREQ  = 00048068            NAM$B_RSS        00000002            NAM$V_NODE     = 00000011            
JBC$_SMZEROJOB = 00048070            NAM$C_BID      = 00000002            NAM$V_PPF      = 00000010            
JBC$_SNDRESP   = 00048420            NAM$C_BLN        00000038            NAM$V_QUOTED   = 00000012            
JBC$_SYMBASN   = 00048440            NAM$C_BLN_DIRWC  00000050            NAM$V_WILDCARD = 00000008            
JBC$_SYMBCRE   = 000484D8            NAM$C_DVI      = 00000010            NAM$V_WILD_DIR = 00000014            
JBC$_SYMBDSAB  = 00048078            NAM$C_MAXRSS   = 00000080            NAM$V_WILD_GRP = 00000018            
JBC$_SYMBWRT   = 00048448            NAM$C_MAXRSSLCL= 00000060            NAM$V_WILD_MBR = 00000019            
JBC$_SYMDEL    = 00048470            NAM$K_BLN        00000038            NAM$V_WILD_NAME= 00000005            
JBC$_UAFOPN    = 000484A0            NAM$K_BLN_DIRWC  00000050            NAM$V_WILD_SFD1= 00000019            
JBC$_UNESYMMSG = 000484C0            NAM$L_DIRWCC1    00000040            NAM$V_WILD_SFD2= 0000001A            
JBC$_USERVAL   = 00048498            NAM$L_DIRWCC2    00000044            NAM$V_WILD_SFD3= 0000001B            
LIB$SIGNAL       ********   X   03   NAM$L_DIRWCC3    00000048            NAM$V_WILD_SFD4= 0000001C            
MOD$_ABORT     = 00000004            NAM$L_DIRWCC4    0000004C            NAM$V_WILD_SFD5= 0000001D            
MOD$_INPERR    = 0000000C            NAM$L_DWC        00000038            NAM$V_WILD_SFD6= 0000001E            
MOD$_PRTERR    = 00000014            NAM$L_ESA        0000000C            NAM$V_WILD_SFD7= 0000001F            
MOD$_SUCCESS   = 00000001            NAM$L_FNB        00000034            NAM$V_WILD_TYPE= 00000004            
MSG$_ABOOPR    = 00000011            NAM$L_RLF        00000010            NAM$V_WILD_UFD = 00000018            
MSG$_ABORT     = 00000030            NAM$L_RSA        00000004            NAM$V_WILD_VER = 00000003            
MSG$_ACCRSP    = 00000021            NAM$L_WCC        00000030            NAM$W_DID        0000002A            
MSG$_CONFIRM   = 00000031            NAM$M_DIR_LVLS = 00E00000            NAM$W_DID_NUM    0000002A            
MSG$_CONNECT   = 00000032            NAM$M_EXP_DEV  = 00000080            NAM$W_DID_RVN    0000002E            
MSG$_CRUNSOLIC = 00000002            NAM$M_EXP_DIR  = 00000040            NAM$W_DID_SEQ    0000002C            
MSG$_DELPROC   = 00000003            NAM$M_EXP_NAME = 00000004            NAM$W_FID        00000024            
MSG$_DELSMB    = 00000014            NAM$M_EXP_TYPE = 00000002            NAM$W_FID_NUM    00000024            
MSG$_DEVOFFLIN = 00000005            NAM$M_EXP_VER  = 00000001            NAM$W_FID_RVN    00000028            
MSG$_DEVONLIN  = 00000007            NAM$M_GRP_MBR  = 00080000            NAM$W_FID_SEQ    00000026            
MSG$_DISCON    = 00000033            NAM$M_HIGHVER  = 00008000            NAM$W_PRV_DID    0000003A            
SMBMBAST        - SYMBIONT MAILBOX AST ROUTINE                   21-AUG-1978 21:35:01   VAX-11 MACRO X0.3-11               Page  12
SYMBOL TABLE                                                                                                                     (1)

PCB$B_ASTACT     0000000C            PCB$W_DIOCNT     00000044            RAB$L_CTX        00000018            
PCB$B_ASTEN      0000000D            PCB$W_DIOLM      00000046            RAB$L_DCT        00000038            
PCB$B_PRI        0000000B            PCB$W_FILCNT     00000048            RAB$L_FAB        0000003C            
PCB$B_PRIB       00000033            PCB$W_GPGCNT     00000038            RAB$L_KBF        00000030            
PCB$B_TYPE       0000000A            PCB$W_GRP        00000022            RAB$L_PBF        00000030            
PCB$B_WEFC       00000032            PCB$W_MEM        00000020            RAB$L_RBF        00000028            
PCB$C_LENGTH     0000007C            PCB$W_MTXCNT     0000000E            RAB$L_RFA0       00000010            
PCB$K_LENGTH     0000007C            PCB$W_PPGCNT     0000003A            RAB$L_RHB        0000002C            
PCB$L_ASTQBL     00000014            PCB$W_PRCCNT     0000006A            RAB$L_ROP        00000004            
PCB$L_ASTQFL     00000010            PCB$W_SIZE       00000008            RAB$L_STS        00000008            
PCB$L_EFC2P      00000058            PCB$W_STATE      00000030            RAB$L_STV        0000000C            
PCB$L_EFC3P      0000005C            PCB$W_TMBU       00000036            RAB$L_UBF        00000024            
PCB$L_EFCS       00000050            PCB$W_TQCNT      0000004A            RAB$M_ASY      = 00000001            
PCB$L_EFCU       00000054            PQR$M_BRSTPAG  = 00000004            RAB$M_BIO      = 00000800            
PCB$L_EFWM       0000004C            PQR$M_DELETE   = 00000001            RAB$M_CCO      = 80000000            
PCB$L_OWNER      0000001C            PQR$M_DOUBLE   = 00000008            RAB$M_CVT      = 04000000            
PCB$L_PHD        00000064            PQR$M_FLAGPAG  = 00000002            RAB$M_EOF      = 00000100            
PCB$L_PHYPCB     00000018            PQR$M_NOFEED   = 00000010            RAB$M_FDL      = 00000040            
PCB$L_PID        00000060            PQR$M_PAGHDR   = 00000020            RAB$M_HSH      = 00000080            
PCB$L_PQB        0000004C            PQR$V_BRSTPAG  = 00000002            RAB$M_KGE      = 00200000            
PCB$L_SQBL       00000004            PQR$V_DELETE   = 00000000            RAB$M_KGT      = 00400000            
PCB$L_SQFL       00000000            PQR$V_DOUBLE   = 00000003            RAB$M_LIM      = 00004000            
PCB$L_STS        00000028            PQR$V_FLAGPAG  = 00000001            RAB$M_LOA      = 00002000            
PCB$L_UIC        00000020            PQR$V_NOFEED   = 00000004            RAB$M_LOC      = 00010000            
PCB$L_WSSWP      00000024            PQR$V_PAGHDR   = 00000005            RAB$M_MAS      = 00000020            
PCB$L_WTIME      0000002C            QIO$_ASTADR    = 00000014            RAB$M_NLK      = 00100000            
PCB$T_LNAME      0000006C            QIO$_ASTPRM    = 00000018            RAB$M_NXR      = 00800000            
PCB$V_ASTPEN   = 00000011            QIO$_CHAN      = 00000008            RAB$M_PMT      = 40000000            
PCB$V_BATCH    = 0000000E            QIO$_EFN       = 00000004            RAB$M_PPF_IND  = 00004000            
PCB$V_DELPEN   = 00000001            QIO$_FUNC      = 0000000C            RAB$M_PPF_RAT  = 00003FC0            
PCB$V_FORCPEN  = 00000002            QIO$_IOSB      = 00000010            RAB$M_PTA      = 20000000            
PCB$V_HIBER    = 00000013            QIO$_NARGS     = 0000000C            RAB$M_RAH      = 00000200            
PCB$V_INQUAN   = 00000003            QIO$_P1        = 0000001C            RAB$M_RLK      = 00080000            
PCB$V_LOGIN    = 00000014            QIO$_P2        = 00000020            RAB$M_RNE      = 01000000            
PCB$V_NETWRK   = 00000015            QIO$_P3        = 00000024            RAB$M_RNF      = 08000000            
PCB$V_NOACNT   = 0000000F            QIO$_P4        = 00000028            RAB$M_TMO      = 02000000            
PCB$V_NODELET  = 00000017            QIO$_P5        = 0000002C            RAB$M_TPT      = 00000002            
PCB$V_PHDRES   = 00000012            QIO$_P6        = 00000030            RAB$M_UIF      = 00000010            
PCB$V_PSWAPM   = 00000004            RAB$B_BID        00000000            RAB$M_ULK      = 00040000            
PCB$V_PWRAST   = 00000016            RAB$B_BLN        00000001            RAB$M_WAT      = 00020000            
PCB$V_RES      = 00000000            RAB$B_KRF        00000035            RAB$M_WBH      = 00000400            
PCB$V_RESPEN   = 00000005            RAB$B_KSZ        00000034            RAB$S_PPF_RAT  = 00000008            
PCB$V_SSFEXC   = 00000006            RAB$B_MBC        00000037            RAB$V_ASY      = 00000000            
PCB$V_SSFEXCE  = 00000007            RAB$B_MBF        00000036            RAB$V_BIO      = 0000000B            
PCB$V_SSFEXCS  = 00000008            RAB$B_PSZ        00000034            RAB$V_CCO      = 0000001F            
PCB$V_SSFEXCU  = 00000009            RAB$B_RAC        0000001E            RAB$V_CVT      = 0000001A            
PCB$V_SSRWAIT  = 0000000A            RAB$B_ROP1       00000005            RAB$V_EOF      = 00000008            
PCB$V_SUSPEN   = 0000000B            RAB$B_ROP2       00000006            RAB$V_FDL      = 00000006            
PCB$V_SWPVBN   = 00000010            RAB$B_ROP3       00000007            RAB$V_HSH      = 00000007            
PCB$V_WAKEPEN  = 0000000C            RAB$B_TMO        0000001F            RAB$V_KGE      = 00000015            
PCB$V_WALL     = 0000000D            RAB$C_BID      = 00000001            RAB$V_KGT      = 00000016            
PCB$W_APTCNT     00000034            RAB$C_BLN        00000044            RAB$V_LIM      = 0000000E            
PCB$W_ASTCNT     0000003C            RAB$C_KEY      = 00000001            RAB$V_LOA      = 0000000D            
PCB$W_BIOCNT     0000003E            RAB$C_RFA      = 00000002            RAB$V_LOC      = 00000010            
PCB$W_BIOLM      00000040            RAB$C_SEQ      = 00000000            RAB$V_MAS      = 00000005            
PCB$W_BYTCNT     00000042            RAB$K_BLN        00000044            RAB$V_NLK      = 00000014            
PCB$W_BYTLM      00000068            RAB$L_BKT        00000038            RAB$V_NXR      = 00000017            
SMBMBAST        - SYMBIONT MAILBOX AST ROUTINE                   21-AUG-1978 21:35:01   VAX-11 MACRO X0.3-11               Page  13
SYMBOL TABLE                                                                                                                     (1)

RAB$V_PMT      = 0000001E            SD_T_TBUF        000001CA            SHR$_FILNOTDEL = 000011F0            
RAB$V_PPF_IND  = 0000000E            SD_V_ABORT     = 00000000            SHR$_FILNOTPUR = 00001230            
RAB$V_PPF_RAT  = 00000006            SD_V_FFREQ     = 00000003            SHR$_FILPURGED = 00001250            
RAB$V_PTA      = 0000001D            SD_V_FLGPAGDONE= 00000000            SHR$_HASHCONCAT= 000011D8            
RAB$V_RAH      = 00000009            SD_V_GETERR    = 00000001            SHR$_HIGHVER   = 00001148            
RAB$V_RLK      = 00000013            SD_V_GOOD_WAKE = 00000001            SHR$_IDXCONCAT = 00001138            
RAB$V_RNE      = 00000018            SD_V_INTRNLCC  = 00000002            SHR$_INCOMPAT  = 000011E0            
RAB$V_RNF      = 0000001B            SD_V_OPENERR   = 00000002            SHR$_NEWFILES  = 00001090            
RAB$V_TMO      = 00000019            SD_V_PRINTERR  = 00000003            SHR$_NOFILPURG = 00001228            
RAB$V_TPT      = 00000001            SD_W_HEAD_L      000002FE            SHR$_NOJOBID   = 000011A0            
RAB$V_UIF      = 00000004            SD_W_JBCCHAN     00000037            SHR$_NOJOBNAME = 000011A8            
RAB$V_ULK      = 00000012            SD_W_MBCHAN      00000000            SHR$_NOQUEUE   = 00001198            
RAB$V_WAT      = 00000011            SD_W_MBREADLEN   0000000D            SHR$_NOTCMPLT  = 000011C0            
RAB$V_WBH      = 0000000A            SD_W_MBUNIT      00000039            SHR$_NOTCOPIED = 000011B8            
RAB$W_ISI        00000002            SD_W_PAGE        00000300            SHR$_NOVALUE   = 00001100            
RAB$W_RFA        00000010            SD_W_TBUFCNT     00000027            SHR$_NOWILD    = 00001128            
RAB$W_RFA4       00000014            SD_W_TBUFSIZ     00000029            SHR$_OPENIN    = 00001098            
RAB$W_RSZ        00000022            SHR$_ABEND     = 000010D8            SHR$_OPENOUT   = 000010A0            
RAB$W_USZ        00000020            SHR$_ABENDD    = 000010E0            SHR$_OVERLAY   = 000010A8            
READ_MB          000000DE R     03   SHR$_ABENDT    = 000010E8            SHR$_PARSEFAIL = 00001248            
READ_MB_AGAIN    0000000B R     03   SHR$_APPENDEDB = 00001000            SHR$_PURGEVER  = 00001210            
READ_MB_NOW      000000D9 R     03   SHR$_APPENDEDR = 00001008            SHR$_READERR   = 000010B0            
RESUME           0000004D R     03   SHR$_ATPC      = 00001158            SHR$_RELCONCAT = 00001140            
SCH$GL_CURPCB    ********   X   03   SHR$_BADBYTE   = 00001010            SHR$_REPLACED  = 000010B8            
SD_A_TBUFADR     0000002B            SHR$_BADCOPIES = 00001160            SHR$_RMSERROR  = 000011C8            
SD_B_ERR_FLAGS   00000002            SHR$_BADDELIM  = 00001118            SHR$_SEARCHFAIL= 00001238            
SD_B_GEN_FLAGS   00000003            SHR$_BADFIELD  = 00001018            SHR$_SYNTAX    = 000010F8            
SD_B_LTPCNT      00000043            SHR$_BADFORM   = 00001168            SHR$_SYSERROR  = 000011B0            
SD_B_MAXLTP      00000044            SHR$_BADJOBID  = 00001170            SHR$_SYSERRORPC= 000010F0            
SD_B_PAGELEN     00000049            SHR$_BADJOBNAME= 00001178            SHR$_TEXT      = 00001130            
SD_B_PAGEWIDTH   0000004A            SHR$_BADKEY    = 00001108            SHR$_UNXPCTSTS = 000011D0            
SD_B_STATE       00000004            SHR$_BADLOGIC  = 00001120            SHR$_VALERR    = 000011E8            
SD_G_FAB         000000F8            SHR$_BADLOGICPC= 00001150            SHR$_WILDCONCAT= 000010C0            
SD_G_MSGTOMGR    000001CA            SHR$_BADLONG   = 00001020            SHR$_WILDOUTVER= 000010C8            
SD_G_NAM         0000018C            SHR$_BADPRTY   = 00001180            SHR$_WRITEERR  = 000010D0            
SD_G_QIOBLK      000000C4            SHR$_BADQNAME  = 00001188            SIM$B_FILCOPY    00000039            
SD_G_RAB         00000148            SHR$_BADTIME   = 00001190            SIM$B_FLAGS      00000038            
SD_K_SIZE        0000030A            SHR$_BADVALUE  = 00001110            SIM$G_DIRID      00000032            
SD_L_GETCNT      0000003B            SHR$_BADWORD   = 00001028            SIM$G_FILEID     0000002C            
SD_L_LINECNT     00000045            SHR$_BEGIN     = 00001030            SIM$K_SIZE       00000070            
SD_L_QIOCNT      0000003F            SHR$_BEGIND    = 00001038            SIM$L_UIC        00000004            
SD_M_ABORT     = 00000001            SHR$_BEGINT    = 00001040            SIM$Q_QTIME      00000014            
SD_M_GETERR    = 00000002            SHR$_CLICB     = 00001048            SIM$T_ACNTNAM    00000060            
SD_M_OPENERR   = 00000004            SHR$_CLOSEDEL  = 00001218            SIM$T_FILNAM     0000004C            
SD_M_PRINTERR  = 00000008            SHR$_CLOSEIN   = 00001050            SIM$T_PRTNAM     0000003C            
SD_Q_FILENAME    00000302            SHR$_CLOSEOUT  = 00001058            SIM$T_USERNAM    00000008            
SD_Q_IOSB0       00000017            SHR$_CONFDEL   = 000011F8            SIM$T_VOLNAM     0000001C            
SD_Q_IOSB1       0000001F            SHR$_COPIEDB   = 00001060            SIM$W_MSGTYP     00000000            
SD_Q_MIOSB       00000005            SHR$_COPIEDR   = 00001068            SIM$W_PAGCNT     0000003A            
SD_Q_PTIME       0000002F            SHR$_CREATED   = 00001070            SIM$W_REST       00000002            
SD_Q_TBUFDES     00000027            SHR$_DELETED   = 00001200            SMB$ASSIGNDEV    ********   X   03   
SD_Q_TOFIOSB     0000000F            SHR$_DELINTERR = 00001240            SMB$GETCHAN      ********   X   03   
SD_Q_TOP_FORMS   0000004B            SHR$_DELVER    = 00001208            SMB$G_DATA       ********   X   03   
SD_T_HDBUF       000002CA            SHR$_DIRTOOBUS = 00001220            SMB$K_ACNTNAMSZ= 00000008            
SD_T_LBUF        000001CA            SHR$_ENDED     = 00001078            SMB$K_GENEFN   = 00000000            
SD_T_MSGDATA     00000053            SHR$_ENDEDD    = 00001080            SMB$K_HEADERSZ = 00000034            
SD_T_SQBUF       000001C4            SHR$_ENDEDT    = 00001088            SMB$K_LBUFSIZ  = 00000100            
SMBMBAST        - SYMBIONT MAILBOX AST ROUTINE                   21-AUG-1978 21:35:01   VAX-11 MACRO X0.3-11               Page  14
SYMBOL TABLE                                                                                                                     (1)

SMB$K_LPEFN0   = 00000001            
SMB$K_LPEFN1   = 00000002            
SMB$K_MBEFN    = 00000003            
SMB$K_TBUFSIZ  = 00000100            
SMB$K_TIMEFN   = 00000005            
SMB$K_TOFEFN   = 00000004            
SMB$K_USERNAMSZ= 0000000C            
SMB$MBAST        00000000 RG    03   
SMB$RSTUIC       00000205 RG    03   
SMB$SETMBAST     ********   X   03   
SMB$SETUIC       000001FF RG    03   
STATE$_ASNDEV  = 00000001            
STATE$_EOF_CLOS= 00000005            
STATE$_FLAGPAGE= 00000003            
STATE$_GET_PRIN= 00000004            
STATE$_IDLE    = 00000000            
STATE$_OPEN    = 00000002            
STATE$_SUSPEND = 00000006            
SUSPEND          000000B9 R     03   
SYS$CANCEL       ********   X   03   
SYS$CMKRNL       ********   X   03   
SYS$CONNECT      ********  GX   03   
SYS$DASSGN       ********   X   03   
SYS$DELMBX       ********   X   03   
SYS$EXIT         ********   X   03   
SYS$FIND         ********  GX   03   
SYS$GETTIM       ********   X   03   
SYS$OPEN         ********  GX   03   
SYS$QIOW         ********   X   03   
SYS$REWIND       ********  GX   03   
SYS$SETIMR       ********   X   03   
SYS$WAITFR       ********   X   03   
SYS$WAKE         ********   X   03   
UNEXPECT         00000040 R     03   
WAKUP            000001EB R     03   
_$$_           = 000000EF            


PROGRAM SECTION SYNOPSIS

.  ABS  .        00000000      00     NOPIC   USR   CON   ABS   LCL NOSHR NOEXE NORD  NOWRT BYTE  
. BLANK .        00000000      01     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
$ABS$            0000030A      02     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  
SMB_PURE         00000299      03     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD  NOWRT LONG  


THERE WERE NO ERRORS OR WARNINGS.
4940. BYTES LEFT IN FREE MEMORY POOL.
476. BYTES OF RECLAIMED MEMORY.
OBJ$:SMBMBAST,LIS$:SMBMBAST/-SP=SRC$:SMBPRE,SMBMBAST
31 MLB DIR RDS - 974 GETS TO DEFINE 39 MACROS. 86 INTER. FILE WRITES. 
