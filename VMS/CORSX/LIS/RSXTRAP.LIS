RSXTRAP         - RSX11M TRAP ASSOCIATED DIRECTIVES              22-AUG-1978 00:27:17   VAX-11 MACRO X0.3-11               Page   0
TABLE OF CONTENTS   

   (2)     134  RSX$DSAR - RSX11M DSAR$ DIRECTIVE
   (3)     176  RSX$ENAR - RSX11M ENAR$ DIRECTIVE
   (4)     218  RSX$SPRA - RSX11M SPRA$ DIRECTIVE
   (5)     284  RSX$POWEREN - ENABLE POWER FAIL AST
   (6)     312  RSX$SRDA - RSX11M SRDA$ DIRECTIVE
   (7)     382  RSX$RCVASTEN - ENABLE RECEIVE DATA AST
   (8)     409  RSX$SVDB - RSX11M SVDB$ DIRECTIVE
   (9)     446  RSX$SVTK - RSX11M SVTK$ DIRECTIVE
RSXTRAP         - RSX11M TRAP ASSOCIATED DIRECTIVES              22-AUG-1978 00:27:17   VAX-11 MACRO X0.3-11               Page   1
V04.0                                                                                                                            (1)

                                     0000     1 
                                     0000     2 	.TITLE	RSXTRAP - RSX11M TRAP ASSOCIATED DIRECTIVES
                                     0000     3 	.IDENT	/V04.0/		;
                                     0000     4 ;
                                     0000     5 ; COPYRIGHT (C) 1977
                                     0000     6 ; DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASSACHUSETTS 01754
                                     0000     7 ;
                                     0000     8 ; THIS SOFTWARE IS FURNISHED  UNDER A LICENSE FOR USE ONLY ON A SINGLE
                                     0000     9 ; COMPUTER  SYSTEM AND  MAY BE  COPIED ONLY WITH  THE INCLUSION OF THE
                                     0000    10 ; ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE, OR ANY OTHER COPIES THEREOF,
                                     0000    11 ; MAY NOT BE PROVIDED OR  OTHERWISE MADE AVAILABLE TO ANY OTHER PERSON
                                     0000    12 ; EXCEPT FOR USE ON SUCH SYSTEM AND TO ONE WHO AGREES TO THESE LICENSE
                                     0000    13 ; TERMS.  TITLE TO AND  OWNERSHIP OF THE  SOFTWARE  SHALL AT ALL TIMES
                                     0000    14 ; REMAIN IN DEC.
                                     0000    15 ;
                                     0000    16 ; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE WITHOUT NOTICE
                                     0000    17 ; AND SHOULD  NOT BE CONSTRUED  AS A COMMITMENT  BY DIGITAL  EQUIPMENT
                                     0000    18 ; CORPORATION.
                                     0000    19 ;
                                     0000    20 ; DEC ASSUMES  NO  RESPONSIBILITY  FOR  THE USE OR  RELIABILITY OF ITS
                                     0000    21 ; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
                                     0000    22 
                                     0000    23 ;++
                                     0000    24 ; FACILITY:
                                     0000    25 ;
                                     0000    26 ;	STARLET RSX AME.
                                     0000    27 ;
                                     0000    28 ; ABSTRACT:
                                     0000    29 ;
                                     0000    30 ;	RSX11M TRAP ASSOCIATED DIRECTIVES.
                                     0000    31 ;
                                     0000    32 ; AUTHOR:
                                     0000    33 ;
                                     0000    34 ;	R.HEINEN 4-NOV-76
                                     0000    35 ;--
                                     0000    36 ;
                                     0000    37 ; EXTERNAL SYMBOLS
                                     0000    38 ;
                                     0000    39 	DRERR$			; DEFINE DIRECTIVE ERROR CODES
                                     0000    40 	$RSXDEF			; DEFINE RSX SYMBOLS
                                     0000    41 	IOERR$			; DEFINE I/O ERROR CODES
                                     0000    42  
                                 00000000    43 	.PSECT	RSXCODE,NOWRT
RSXTRAP         - RSX11M TRAP ASSOCIATED DIRECTIVES              22-AUG-1978 00:27:17   VAX-11 MACRO X0.3-11               Page   2
V04.0           RSX$DSAR - RSX11M DSAR$ DIRECTIVE                                                                                (2)

                                     0000    45 	.SBTTL	RSX$DSAR - RSX11M DSAR$ DIRECTIVE
                                     0000    46 ;++
                                     0000    47 ; RSX$DSAR - RSX11M DISABLE AST RECOGNITION DIRECTIVE
                                     0000    48 ;
                                     0000    49 ; FUNCTIONAL DESCRIPTION:
                                     0000    50 ;
                                     0000    51 ; THIS IS A RSX DIRECTIVE HANDLER WHICH IMPLEMENTS AN RSX11M
                                     0000    52 ; "DSAR$" DIRECTIVE.
                                     0000    53 ;
                                     0000    54 ; INPUT PARAMETERS:
                                     0000    55 ;
                                     0000    56 ;	R5 = ADDRESS OF DPB+2
                                     0000    57 ;	R6 = CM IMAGE STACK ADDRESS
                                     0000    58 ;	R10 = ADDRESS OF CM IMAGE DATA BASE
                                     0000    59 ;	R11 = ADDRESS OF IMAGE HEADER
                                     0000    60 ;
                                     0000    61 ; OUTPUT PARAMETERS:
                                     0000    62 ;
                                     0000    63 ;	R10,R11 ARE PRESERVED
                                     0000    64 ;
                                     0000    65 ; IMPLICIT OUTPUTS:
                                     0000    66 ;
                                     0000    67 ;	THE PROPER DIRECTIVE STATUS IS PLACED IN THE IMAGE DSW
                                     0000    68 ;	ALONG WITH THE PROPER SETTING OF THE C-BIT.
                                     0000    69 ;
                                     0000    70 ; DSW RETURN CODES:
                                     0000    71 ;
                                     0000    72 ;	IS.SUC	SUCCESSFUL
                                     0000    73 ;	IE.ITS	AST'S ALREADY DISABLED
                                     0000    74 ;--
                                     0000    75 RSX$DSAR::				; DISABLE AST RECOGNITION DIRECTIVE
       014C CA            04     E1  0000    76 	BBC	#SV_NOAST,I_STATE(R10),10$; BR IF AST'S NOT ALREADY DISABLED
                          0B         0005       
                                     0006    77 ;
                                     0006    78 ; AST'S ALREADY DISABLED
                                     0006    79 ;
                                     0006    80 	$DSW	#IE.ITS			; SET DSW AND RETURN
                                     0011    81 ;
                                     0011    82 ; DISABLE AST'S
                                     0011    83 ;
       014C CA            04     E6  0011    84 10$:	BBSSI	#SV_NOAST,I_STATE(R10),15$; SET AST'S DISABLED
                          00         0016       
                                 05  0017    85 15$:	RSB				; AND RETURN
RSXTRAP         - RSX11M TRAP ASSOCIATED DIRECTIVES              22-AUG-1978 00:27:17   VAX-11 MACRO X0.3-11               Page   3
V04.0           RSX$ENAR - RSX11M ENAR$ DIRECTIVE                                                                                (3)

                                     0018    87 	.SBTTL	RSX$ENAR - RSX11M ENAR$ DIRECTIVE
                                     0018    88 ;++
                                     0018    89 ; RSX$ENAR - RSX11M ENABLE AST RECOGNITION DIRECTIVE
                                     0018    90 ;
                                     0018    91 ; FUNCTIONAL DESCRIPTION:
                                     0018    92 ;
                                     0018    93 ; THIS IS A RSX DIRECTIVE HANDLER WHICH IMPLEMENTS AN RSX11M
                                     0018    94 ; "ENAR$" DIRECTIVE.
                                     0018    95 ;
                                     0018    96 ; INPUT PARAMETERS:
                                     0018    97 ;
                                     0018    98 ;	R5 = ADDRESS OF DPB+2
                                     0018    99 ;	R6 = CM IMAGE STACK ADDRESS
                                     0018   100 ;	R10 = ADDRESS OF CM IMAGE DATA BASE
                                     0018   101 ;	R11 = ADDRESS OF IMAGE HEADER
                                     0018   102 ;
                                     0018   103 ; OUTPUT PARAMETERS:
                                     0018   104 ;
                                     0018   105 ;	R10,R11 ARE PRESERVED
                                     0018   106 ;
                                     0018   107 ; IMPLICIT OUTPUTS:
                                     0018   108 ;
                                     0018   109 ;	THE PROPER DIRECTIVE STATUS IS PLACED IN THE IMAGE DSW
                                     0018   110 ;	ALONG WITH THE PROPER SETTING OF THE C-BIT.
                                     0018   111 ;
                                     0018   112 ; DSW RETURN CODES:
                                     0018   113 ;
                                     0018   114 ;	IS.SUC	SUCCESSFUL
                                     0018   115 ;	IE.ITS	AST'S ALREADY ENABLED
                                     0018   116 ;--
                                     0018   117 RSX$ENAR::				; ENABLE AST RECOGNITION DIRECTIVE
       014C CA            04     E0  0018   118 	BBS	#SV_NOAST,I_STATE(R10),10$; IF ALREADY ENABLED THEN ERROR
                          0B         001D       
                                     001E   119 ;
                                     001E   120 ; AST'S ALREADY ENABLED
                                     001E   121 ;
                                     001E   122 5$:	$DSW	#IE.ITS			; SET DSW AND RETURN
                                     0029   123 ;
                                     0029   124 ; ENABLE AST'S
                                     0029   125 ;
       014C CA            04     E7  0029   126 10$:	BBCCI	#SV_NOAST,I_STATE(R10),15$; SET AST'S ENABLED
                          00         002E       
                                 05  002F   127 15$:	RSB
RSXTRAP         - RSX11M TRAP ASSOCIATED DIRECTIVES              22-AUG-1978 00:27:17   VAX-11 MACRO X0.3-11               Page   4
V04.0           RSX$SPRA - RSX11M SPRA$ DIRECTIVE                                                                                (4)

                                     0030   129 	.SBTTL	RSX$SPRA - RSX11M SPRA$ DIRECTIVE
                                     0030   130 ;++
                                     0030   131 ; RSX$SPRA - RSX11M SPECIFY POWER RECOVERY AST DIRECTIVE
                                     0030   132 ;
                                     0030   133 ; FUNCTIONAL DESCRIPTION:
                                     0030   134 ;
                                     0030   135 ; THIS IS A RSX DIRECTIVE HANDLER WHICH IMPLEMENTS AN RSX11M
                                     0030   136 ; "SPRA$" DIRECTIVE.
                                     0030   137 ;
                                     0030   138 ; INPUT PARAMETERS:
                                     0030   139 ;
                                     0030   140 ;	R5 = ADDRESS OF DPB+2
                                     0030   141 ;	R6 = CM IMAGE STACK ADDRESS
                                     0030   142 ;	R10 = ADDRESS OF CM IMAGE DATA BASE
                                     0030   143 ;	R11 = ADDRESS OF IMAGE HEADER
                                     0030   144 ;
                                     0030   145 ; OUTPUT PARAMETERS:
                                     0030   146 ;
                                     0030   147 ;	R10,R11 ARE PRESERVED
                                     0030   148 ;
                                     0030   149 ; IMPLICIT OUTPUTS:
                                     0030   150 ;
                                     0030   151 ;	THE PROPER DIRECTIVE STATUS IS PLACED IN THE IMAGE DSW
                                     0030   152 ;	ALONG WITH THE PROPER SETTING OF THE C-BIT.
                                     0030   153 ;
                                     0030   154 ; DSW RETURN CODES:
                                     0030   155 ;
                                     0030   156 ;	IS.SUC	SUCCESSFUL
                                     0030   157 ;	IE.ITS	AST ALREADY UNSPECIFIED
                                     0030   158 ;
                                     0030   159 ;--
                                     0030   160 RSX$SPRA::				; SPECIFY POWER RECOVERY AST DIRECTIVE
            54            65     3C  0030   161 	MOVZWL	(R5),R4			; GET USER AST ADDRESS
                          12     12  0033   162 	BNEQ	15$			; IF NEQ THEN ENABLING
                                     0035   163 ;
                                     0035   164 ; DISABLE FUNCTION
                                     0035   165 ;
       014C CA            09     E7  0035   166 	BBCCI	#SV_PWRAST,I_STATE(R10),10$; BR IF DISABLED AND DISABLE
                          01         003A       
                                     003B   167 ;	$SETPRA_S	0		; DISABLE FUNCTION
                                 05  003B   168 	RSB				; RETURN
                                     003C   169 10$:	$DSW	#IE.ITS			; ALREADY DISABLED
                                     0047   170 ;
                                     0047   171 ; ENABLE THE AST
                                     0047   172 ;
       014C CA            09     E6  0047   173 15$:	BBSSI	#SV_PWRAST,I_STATE(R10),10$; BR IF ENABLED AND ENABLE
                          EF         004C       
            52       019C CA     D0  004D   174 	MOVL	I_PWRAST(R10),R2	; GET PRESENT BLOCK
                          06     13  0052   175 	BEQL	20$			; IF EQL THEN GET A NEW ONE
                                     0054   176 ;
                                     0054   177 ; IF THE BLOCK HAS ALREADY BEEN ALLOCATED, IT IS POSSIBLE THAT THE AST
                                     0054   178 ; HAS NOT BEEN DELIVERED. IF THIS IS THE CASE THEN THE ENABLE WILL
                                     0054   179 ; BE DONE ON AST EXIT.
                                     0054   180 ;
         0C A2            01     E1  0054   181 	BBC	#ACBV_INPROG,ACB_FLAGS(R2),25$; BR IF NOT IN PROGRESS
                          04         0058       
                                 05  0059   182 	RSB				; ELSE RETURN SUCCESS
RSXTRAP         - RSX11M TRAP ASSOCIATED DIRECTIVES              22-AUG-1978 00:27:17   VAX-11 MACRO X0.3-11               Page   5
V04.0           RSX$SPRA - RSX11M SPRA$ DIRECTIVE                                                                                (4)

                                     005A   183 ;
                                     005A   184 ; ALLOCATE A CONTEXT BLOCK
                                     005A   185 ;
                          FFA3'  30  005A   186 20$:	BSBW	RSX$SETUPAST		; SET UP THE AST CONTEXT
                                     005D   187 ;
                                     005D   188 ; SET UP AST CONTEXT BLOCK
                                     005D   189 ;
       019C CA            52     D0  005D   190 25$:	MOVL	R2,I_PWRAST(R10)	; SAVE ADDRESS OF BLOCK
         08 A2            01     AE  0062   191 	MNEGW	#1,ACB_UPRM(R2)		; SET NO OPTIONAL DATA
         0A A2            54     B0  0066   192 	MOVW	R4,ACB_UPC(R2)		; SAVE AST ADDRESS
         0C A2            01     B0  006A   193 	MOVW	#<1@ACBV_PERM>+<ACBC_PWRAST@ACBV_TYPE>,ACB_FLAGS(R2); SET UP FLAGS WORD
RSXTRAP         - RSX11M TRAP ASSOCIATED DIRECTIVES              22-AUG-1978 00:27:17   VAX-11 MACRO X0.3-11               Page   6
V04.0           RSX$POWEREN - ENABLE POWER FAIL AST                                                                              (5)

                                     006E   195 	.SBTTL	RSX$POWEREN - ENABLE POWER FAIL AST
                                     006E   196 ;++
                                     006E   197 ; RSX$POWEREN - ENABLE POWERFAIL AST
                                     006E   198 ;
                                     006E   199 ; FUNCTIONAL DESCRIPTION:
                                     006E   200 ;
                                     006E   201 ; THIS ROUTINE ENABLES POWERFAIL AST'S FOR THE IMAGE.
                                     006E   202 ;
                                     006E   203 ; ENTERED IN POST AST PROCESSING.
                                     006E   204 ;
                                     006E   205 ; INPUTS:
                                     006E   206 ;
                                     006E   207 ;	R10 = ADDRESS OF THE IMAGE IMPURE DATA BASE
                                     006E   208 ;	R11 = ADDRESS OF THE IMAGE
                                     006E   209 ;
                                     006E   210 ; OUTPUTS:
                                     006E   211 ;
                                     006E   212 ;	R10,R11 ARE PRESERVED.
                                     006E   213 ;--
                                     006E   214 RSX$POWEREN::				; ENABLE POWERFAIL AST'S
            52       019C CA     D0  006E   215 	MOVL	I_PWRAST(R10),R2	; ADDRESS CONTEXT BLOCK
       014C CA            09     E1  0073   216 	BBC	#SV_PWRAST,I_STATE(R10),30$; BR IF NO LONGER ENABLED
                          14         0078       
                                     0079   217 ;	$SETPRA_S	W^RSX$POWERAST	; CAUSE POWER AST TO BLOCK
            11            50     E8  0079   218 	BLBS	R0,30$			; IF LOW SET THEN SUCCESS
       014C CA            09     E5  007C   219 	BBCC	#SV_PWRAST,I_STATE(R10),5$; SET NOT ENABLED
                          00         0081       
                                     0082   220 5$:	$DSW	#IE.PRI			; CALL IT PRIVILEGE VIOLATION
                                 05  008D   221 30$:	RSB				; RETURN
RSXTRAP         - RSX11M TRAP ASSOCIATED DIRECTIVES              22-AUG-1978 00:27:17   VAX-11 MACRO X0.3-11               Page   7
V04.0           RSX$SRDA - RSX11M SRDA$ DIRECTIVE                                                                                (6)

                                     008E   223 	.SBTTL	RSX$SRDA - RSX11M SRDA$ DIRECTIVE
                                     008E   224 ;++
                                     008E   225 ; RSX$SRDA - RSX11M SPECIFY RECEIVE AST DIRECTIVE
                                     008E   226 ;
                                     008E   227 ; FUNCTIONAL DESCRIPTION:
                                     008E   228 ;
                                     008E   229 ; THIS IS A RSX DIRECTIVE HANDLER WHICH IMPLEMENTS AN RSX11M
                                     008E   230 ; "SRDA$" DIRECTIVE.
                                     008E   231 ;
                                     008E   232 ; INPUT PARAMETERS:
                                     008E   233 ;
                                     008E   234 ;	R5 = ADDRESS OF DPB+2
                                     008E   235 ;	R6 = CM IMAGE STACK ADDRESS
                                     008E   236 ;	R10 = ADDRESS OF CM IMAGE DATA BASE
                                     008E   237 ;	R11 = ADDRESS OF IMAGE HEADER
                                     008E   238 ;
                                     008E   239 ; OUTPUT PARAMETERS:
                                     008E   240 ;
                                     008E   241 ;	R10,R11 ARE PRESERVED
                                     008E   242 ;
                                     008E   243 ; IMPLICIT OUTPUTS:
                                     008E   244 ;
                                     008E   245 ;	THE PROPER DIRECTIVE STATUS IS PLACED IN THE IMAGE DSW
                                     008E   246 ;	ALONG WITH THE PROPER SETTING OF THE C-BIT.
                                     008E   247 ;
                                     008E   248 ; DSW RETURN CODES:
                                     008E   249 ;
                                     008E   250 ;	IS.SUC	SUCCESSFUL
                                     008E   251 ;	IE.ITS	AST'S ARE ALREADY DISABLED
                                     008E   252 ;--
                                     008E   253 RSX$SRDA::				; SPECIFY RECEIVE AST DIRECTIVE
            54            65     3C  008E   254 	MOVZWL	(R5),R4			; GET USER AST ADDRESS
                          31     12  0091   255 	BNEQ	15$			; IF NEQ THEN ENABLE
       014C CA            08     E7  0093   256 	BBCCI	#SV_RCVAST,I_STATE(R10),10$; BR IN DISABLED AND DISABLE
                          20         0098       
                                     0099   257 	$QIOW_S	#5,I_RCVMAIL(R10),#IO$_SETMODE,,,,0
                                 05  00B8   258 	RSB
                                     00B9   259 10$:	$DSW	#IE.ITS			; ALREADY DISABLED
                                     00C4   260 ;
                                     00C4   261 ; ENABLE FUNCTION
                                     00C4   262 ;
                     013C CA     D5  00C4   263 15$:	TSTL	I_RCVMAIL(R10)		; MAILBOX PRESENT?
                          0B     12  00C8   264 	BNEQ	20$			; IF NEQ THEN YES
                                     00CA   265 	$DSW	#IE.SDP			; SET STATUS AND RETURN
                                     00D5   266 ;
                                     00D5   267 ; ALREADY ENABLED?
                                     00D5   268 ;
       014C CA            08     E6  00D5   269 20$:	BBSSI	#SV_RCVAST,I_STATE(R10),10$; BR IF ENABLED AND ENABLE
                          DE         00DA       
                                     00DB   270 ;
                                     00DB   271 ; ENABLE FUNCTION
                                     00DB   272 ;
            52       0198 CA     D0  00DB   273 	MOVL	I_RCVAST(R10),R2	; GET CURRENT BLOCK IF ANY
                          06     13  00E0   274 	BEQL	25$			; IF EQL THEN ALLOCATE NEW BLOCK
                                     00E2   275 ;
                                     00E2   276 ; IF THE CONTEXT BLOCK EXISTS THEN IT IS POSSIBLE THAT THE AST IS STILL
                                     00E2   277 ; IN PROGRESS AND THE ENABLE WILL BE DONE ON AST EXIT.
RSXTRAP         - RSX11M TRAP ASSOCIATED DIRECTIVES              22-AUG-1978 00:27:17   VAX-11 MACRO X0.3-11               Page   8
V04.0           RSX$SRDA - RSX11M SRDA$ DIRECTIVE                                                                                (6)

                                     00E2   278 ;
         0C A2            01     E1  00E2   279 	BBC	#ACBV_INPROG,ACB_FLAGS(R2),30$; BR IF NOT IN PROGRESS
                          04         00E6       
                                 05  00E7   280 	RSB				; ELSE RETURN
                                     00E8   281 ;
                                     00E8   282 ; ALLOCATE A CONTEXT BLOCK FOR RECEIVE DATA AST'S
                                     00E8   283 ;
                          FF15'  30  00E8   284 25$:	BSBW	RSX$SETUPAST		; SET UP THE AST BLOCK
                                     00EB   285 ;
                                     00EB   286 ; SET UP THE CONTEXT BLOCK
                                     00EB   287 ;
       0198 CA            52     D0  00EB   288 30$:	MOVL	R2,I_RCVAST(R10)	; SAVE CONTEXT BLOCK ADDRESS
         0A A2            54     B0  00F0   289 	MOVW	R4,ACB_UPC(R2)		; SAVE THE ADDRESS OF THE AST SERIVCE
         08 A2            01     AE  00F4   290 	MNEGW	#1,ACB_UPRM(R2)		; SET NO DATA ON AST STACK
         0C A2       0101 8F     B0  00F8   291 	MOVW	#<1@ACBV_PERM>+<ACBC_RCVAST@ACBV_TYPE>,ACB_FLAGS(R2); SAVE TYPE FOR POST AST 
RSXTRAP         - RSX11M TRAP ASSOCIATED DIRECTIVES              22-AUG-1978 00:27:17   VAX-11 MACRO X0.3-11               Page   9
V04.0           RSX$RCVASTEN - ENABLE RECEIVE DATA AST                                                                           (7)

                                     00FE   293 	.SBTTL	RSX$RCVASTEN - ENABLE RECEIVE DATA AST
                                     00FE   294 ;++
                                     00FE   295 ; RSX$RCVASTEN - ENABLE IMAGE FOR MAILBOX UNSOLICITED AST'S
                                     00FE   296 ;
                                     00FE   297 ; FUNCTIONAL DESCRIPTION:
                                     00FE   298 ;
                                     00FE   299 ; THIS ROUTINE IS ENTERED FOR RECEIVE DATA AST ENABLE OR
                                     00FE   300 ; AS A RESULT OF AN AST EXIT AFTER A RECEIVE AST DELIVERY.
                                     00FE   301 ;
                                     00FE   302 ; INPUTS:
                                     00FE   303 ;
                                     00FE   304 ;	R10 = ADDRESS OF THE IMAGE DATA BASE
                                     00FE   305 ;	R11 = ADDRESS OF THE IMAGE HEADER
                                     00FE   306 ;
                                     00FE   307 ; OUTPUTS:
                                     00FE   308 ;
                                     00FE   309 ;	R10,R11 ARE PRESERVED
                                     00FE   310 ;--
                                     00FE   311 RSX$RCVASTEN::				; ENABLE FOR RECEIVE DATA AST'S
       014C CA            08     E1  00FE   312 	BBC	#SV_RCVAST,I_STATE(R10),20$; BR IF NO LONGER ENABLED
                          39         0103       
                                     0104   313 	$QIOW_S	#6,I_RCVMAIL(R10),#IO$_SETMODE,,,,W^RSX$RCVAST,I_RCVAST(R10)
                          FED6'  30  0127   314 	BSBW	RSX$RSXQIOERR		; MAP ERROR STATUS
            06            50     E8  012A   315 	BLBS	R0,10$			; IF LOW SET THEN SUCCESS
       014C CA            08     E5  012D   316 	BBCC	#SV_RCVAST,I_STATE(R10),10$; MARK NOT ENABLED
                          00         0132       
                                     0133   317 10$:	$DSW	R1			; RETURN IT
                                 05  013D   318 20$:	RSB				; 
RSXTRAP         - RSX11M TRAP ASSOCIATED DIRECTIVES              22-AUG-1978 00:27:17   VAX-11 MACRO X0.3-11               Page  10
V04.0           RSX$SVDB - RSX11M SVDB$ DIRECTIVE                                                                                (8)

                                     013E   320 	.SBTTL	RSX$SVDB - RSX11M SVDB$ DIRECTIVE
                                     013E   321 ;++
                                     013E   322 ; RSX$SVDB - RSX11M SPECIFY DEBUG VECTOR DIRECTIVE
                                     013E   323 ;
                                     013E   324 ; FUNCTIONAL DESCRIPTION:
                                     013E   325 ;
                                     013E   326 ; THIS IS A RSX DIRECTIVE HANDLER WHICH IMPLEMENTS AN RSX11M
                                     013E   327 ; "SVDB$" DIRECTIVE.
                                     013E   328 ;
                                     013E   329 ; INPUT PARAMETERS:
                                     013E   330 ;
                                     013E   331 ;	R5 = ADDRESS OF DPB+2
                                     013E   332 ;	R6 = CM IMAGE STACK ADDRESS
                                     013E   333 ;	R10 = ADDRESS OF CM IMAGE DATA BASE
                                     013E   334 ;	R11 = ADDRESS OF IMAGE HEADER
                                     013E   335 ;
                                     013E   336 ; OUTPUT PARAMETERS:
                                     013E   337 ;
                                     013E   338 ;	R10,R11 ARE PRESERVED
                                     013E   339 ;
                                     013E   340 ; IMPLICIT OUTPUTS:
                                     013E   341 ;
                                     013E   342 ;	THE PROPER DIRECTIVE STATUS IS PLACED IN THE IMAGE DSW
                                     013E   343 ;	ALONG WITH THE PROPER SETTING OF THE C-BIT.
                                     013E   344 ;
                                     013E   345 ; DSW RETURN CODES:
                                     013E   346 ;
                                     013E   347 ;	IS.SUC	SUCCESSFUL
                                     013E   348 ;--
                                     013E   349 RSX$SVDB::				; SPECIFY DEBUG VECTOR DIRECTIVE
            54            85     3C  013E   350 	MOVZWL	(R5)+,R4		; ADDRESS TABLE
            53            65     3C  0141   351 	MOVZWL	(R5),R3			; GET SIZE OF TABLE
            53            02     C4  0144   352 	MULL	#2,R3			; CONVERT TO BYTES
            53            02     A7  0147   353 	DIVW3	#2,R3,H.ODVL(R11)	; CONVERT TO WORDS
                       14 AB         014A       
         12 AB            54     B0  014C   354 	MOVW	R4,H.ODVA(R11)		; SAVE ADDRESS
                                 05  0150   355 	RSB				;
RSXTRAP         - RSX11M TRAP ASSOCIATED DIRECTIVES              22-AUG-1978 00:27:17   VAX-11 MACRO X0.3-11               Page  11
V04.0           RSX$SVTK - RSX11M SVTK$ DIRECTIVE                                                                                (9)

                                     0151   357 	.SBTTL	RSX$SVTK - RSX11M SVTK$ DIRECTIVE
                                     0151   358 ;++
                                     0151   359 ; RSX$SVTK - RSX11M SPECIFY TASK VECTOR DIRECTIVE
                                     0151   360 ;
                                     0151   361 ; FUNCTIONAL DESCRIPTION:
                                     0151   362 ;
                                     0151   363 ; THIS IS A RSX DIRECTIVE HANDLER WHICH IMPLEMENTS AN RSX11M
                                     0151   364 ; "SVTK$" DIRECTIVE.
                                     0151   365 ;
                                     0151   366 ; INPUT PARAMETERS:
                                     0151   367 ;
                                     0151   368 ;	R5 = ADDRESS OF DPB+2
                                     0151   369 ;	R6 = CM IMAGE STACK ADDRESS
                                     0151   370 ;	R10 = ADDRESS OF CM IMAGE DATA BASE
                                     0151   371 ;	R11 = ADDRESS OF IMAGE HEADER
                                     0151   372 ;
                                     0151   373 ; OUTPUT PARAMETERS:
                                     0151   374 ;
                                     0151   375 ;	R10,R11 ARE PRESERVED
                                     0151   376 ;
                                     0151   377 ; IMPLICIT OUTPUTS:
                                     0151   378 ;
                                     0151   379 ;	THE PROPER DIRECTIVE STATUS IS PLACED IN THE IMAGE DSW
                                     0151   380 ;	ALONG WITH THE PROPER SETTING OF THE C-BIT.
                                     0151   381 ;
                                     0151   382 ; DSW RETURN CODES:
                                     0151   383 ;
                                     0151   384 ;	IS.SUC	SUCCESSFUL
                                     0151   385 ;--
                                     0151   386 RSX$SVTK::				; SPECIFY TASK VECTOR DIRECTIVE
            54            85     3C  0151   387 	MOVZWL	(R5)+,R4		; ADDRESS VECTOR
            53            65     3C  0154   388 	MOVZWL	(R5),R3			; GET SIZE
            53            02     C4  0157   389 	MULL	#2,R3			; CONVERT TO BYTES
            53            02     A7  015A   390 	DIVW3	#2,R3,H.TKVL(R11)	; CONVERT TO WORDS
                       18 AB         015D       
         16 AB            54     B0  015F   391 	MOVW	R4,H.TKVA(R11)		; SAVE VECTOR ADDRESS
                                 05  0163   392 	RSB				;
                                     0164   393 ;
                                     0164   394 	.END
RSXTRAP         - RSX11M TRAP ASSOCIATED DIRECTIVES              22-AUG-1978 00:27:17   VAX-11 MACRO X0.3-11               Page  12
SYMBOL TABLE                                                                                                                     (9)

$$MSG          = 00000000            H.ISP            00000010            IE.FOP         = FFFFFFCB            
$$T1           = 00000001            H.LUN            0000003E            IE.HFU         = FFFFFFE4            
...GBL         = 00000000            H.NLUN           0000003C            IE.HWR         = FFFFFFFA            
ACBC_CTLRCAST  = 00000002            H.NML            00000031            IE.IBS         = FFFFFFA7            
ACBC_FLOATAST  = 00000003            H.ODVA           00000012            IE.IDU         = FFFFFFA4            
ACBC_PWRAST    = 00000000            H.ODVL           00000014            IE.IEF         = FFFFFF9F            
ACBC_RCVAST    = 00000001            H.OVLY           0000002C            IE.IES         = FFFFFFAE            
ACBV_INPROG    = 00000001            H.PFVA           0000001A            IE.IFC         = FFFFFFFE            
ACBV_PERM      = 00000000            H.RCVA           0000001E            IE.IFU         = FFFFFFE7            
ACBV_TYPE      = 00000008            H.RRVA           00000032            IE.ILL         = FFFFFFD6            
ACB_FLAGS        0000000C            H.SPRI           00000030            IE.ILU         = FFFFFFA0            
ACB_LINK         00000000            H.TKVA           00000016            IE.ILV         = FFFFFFED            
ACB_UPC          0000000A            H.TKVL           00000018            IE.INS         = FFFFFFFE            
ACB_UPRM         00000008            H.VEXT           0000002E            IE.IOP         = FFFFFFAD            
ADR_HIGHLIM      00000004            H.WND            00000024            IE.IPR         = FFFFFFA1            
ADR_LOWLIM       00000000            IE.2DV         = FFFFFFD0            IE.ISQ         = FFFFFFC3            
ADR_SIZE         00000008            IE.ABO         = FFFFFFF1            IE.ITI         = FFFFFFA3            
AP_NAME          00000004            IE.ACT         = FFFFFFF9            IE.ITP         = FFFFFFA8            
AST_PARAM        00000004            IE.ADP         = FFFFFF9E            IE.ITS         = FFFFFFF8            
AST_PC           00000010            IE.ALC         = FFFFFFAC            IE.IUI         = FFFFFFA5            
AST_PSL          00000014            IE.ALG         = FFFFFFAC            IE.LCK         = FFFFFFE5            
AST_R0           00000008            IE.ALN         = FFFFFFDE            IE.LNL         = FFFFFFA6            
AST_R1           0000000C            IE.AST         = FFFFFFB0            IE.MAP         = FFFFFFAF            
BIT...         = 00068084            IE.BAD         = FFFFFFFF            IE.MOD         = FFFFFFEB            
C$$ORE         = 00000000            IE.BBE         = FFFFFFC8            IE.NBF         = FFFFFFD9            
C_CANONPS      = 83C00000            IE.BCC         = FFFFFFBE            IE.NBK         = FFFFFFD7            
C_RCVDSTR      = 44564352            IE.BDI         = FFFFFFCC            IE.NDR         = FFFFFFB8            
FCB_ATTRIBS      0000007C            IE.BDR         = FFFFFFCE            IE.NFI         = FFFFFFC4            
FCB_FIB          0000004C            IE.BDV         = FFFFFFC9            IE.NFW         = FFFFFFBB            
FCB_FID          00000000            IE.BHD         = FFFFFFC0            IE.NLK         = FFFFFFB1            
FCB_FNAME        00000014            IE.BLB         = FFFFFFBA            IE.NLN         = FFFFFFDB            
FCB_FNAMEDESC    0000000C            IE.BLK         = FFFFFFEC            IE.NNC         = FFFFFFB3            
FCB_FNB          00000002            IE.BNM         = FFFFFFCA            IE.NNL         = FFFFFFB2            
FCB_PC           00000078            IE.BTF         = FFFFFFB4            IE.NNN         = FFFFFFBC            
FCB_RESULT       00000030            IE.BTP         = FFFFFFD5            IE.NOD         = FFFFFFE9            
FCB_RESULTDESC   00000004            IE.BVR         = FFFFFFC1            IE.NSF         = FFFFFFE6            
FCB_SIZE         000000B4            IE.BYT         = FFFFFFED            IE.NST         = FFFFFFB0            
FP_AP            00000008            IE.CKP         = FFFFFFF6            IE.NSW         = FFFFFFEE            
FP_FP            0000000C            IE.CKS         = FFFFFFE2            IE.NVR         = FFFFFFAA            
FP_PC            00000010            IE.CLO         = FFFFFFDA            IE.NVW         = FFFFFFA9            
FP_PSL           00000004            IE.CNR         = FFFFFFB7            IE.OFL         = FFFFFFBF            
FP_REGISTERS     00000014            IE.CON         = FFFFFFEA            IE.ONP         = FFFFFFFB            
GBL...         = 00000000            IE.DAA         = FFFFFFF8            IE.OVR         = FFFFFFEE            
H.CSP            00000000            IE.DAO         = FFFFFFF3            IE.PES         = FFFFFFAD            
H.CUIC           00000008            IE.DFU         = FFFFFFE8            IE.PNS         = FFFFFFA2            
H.DSW            00000026            IE.DNA         = FFFFFFF9            IE.PRI         = FFFFFFF0            
H.DUIC           0000000A            IE.DNR         = FFFFFFFD            IE.PTS         = FFFFFFFD            
H.EFLM           00000004            IE.DUN         = FFFFFFF7            IE.RAC         = FFFFFFD4            
H.EFSV           00000020            IE.DUP         = FFFFFFC7            IE.RAT         = FFFFFFD3            
H.FCS            00000028            IE.EOF         = FFFFFFF6            IE.RBG         = FFFFFFD8            
H.FORT           0000002A            IE.EOT         = FFFFFFC2            IE.RBS         = FFFFFFF1            
H.FPSA           00000022            IE.EOV         = FFFFFFF5            IE.RCN         = FFFFFFD2            
H.FPVA           0000001C            IE.EXP         = FFFFFFB5            IE.RER         = FFFFFFE0            
H.GARD           0000003A            IE.FEX         = FFFFFFCF            IE.RNM         = FFFFFFCD            
H.HDLN           00000002            IE.FHE         = FFFFFFC5            IE.RSU         = FFFFFFEF            
H.IPC            0000000E            IE.FIX         = FFFFFFF7            IE.SDP         = FFFFFF9D            
H.IPS            0000000C            IE.FLN         = FFFFFFAF            IE.SNC         = FFFFFFDD            
RSXTRAP         - RSX11M TRAP ASSOCIATED DIRECTIVES              22-AUG-1978 00:27:17   VAX-11 MACRO X0.3-11               Page  13
SYMBOL TABLE                                                                                                                     (9)

IE.SPC         = FFFFFFFA            I_HIGHSIZE       000000D0            QIOV_FILES     = 00000000            
IE.SQC         = FFFFFFDC            I_IMAGEVBN       000000D4            QIO_FLAGS        0000001C            
IE.SRE         = FFFFFFF2            I_INISIZE        000000CC            QIO_FUNCTION     0000001A            
IE.STK         = FFFFFFC6            I_LENGTH         000001EC            QIO_IOSB         0000000E            
IE.TCH         = FFFFFFF5            I_LOGNAME        000000B8            QIO_LUT          00000016            
IE.TMM         = FFFFFFB9            I_LUT            00000144            QIO_SECONDBLK    0000001E            
IE.TMO         = FFFFFFB6            I_NLUN           00000140            QIO_SIZE         00000022            
IE.ULK         = FFFFFFAB            I_PC             00000184            RSX$C_SUBSYSTEM= 00000006            
IE.ULN         = FFFFFFFB            I_PROCNAME       00000128            RSX$DSAR         00000000 RG    05   
IE.UNS         = FFFFFFFC            I_PS             00000188            RSX$ENAR         00000018 RG    05   
IE.UPN         = FFFFFFFF            I_PWRAST         0000019C            RSX$POWEREN      0000006E RG    05   
IE.VER         = FFFFFFFC            I_R0             00000164            RSX$RCVAST       ********   X   05   
IE.WAC         = FFFFFFE3            I_R1             00000168            RSX$RCVASTEN     000000FE RG    05   
IE.WAT         = FFFFFFE1            I_R2             0000016C            RSX$RSXQIOERR    ********   X   05   
IE.WCK         = FFFFFFAA            I_R3             00000170            RSX$SETUPAST     ********   X   05   
IE.WER         = FFFFFFDF            I_R4             00000174            RSX$SPRA         00000030 RG    05   
IE.WLK         = FFFFFFF4            I_R5             00000178            RSX$SRDA         0000008E RG    05   
IE.WOV         = FFFFFFAB            I_R6             0000017C            RSX$SVDB         0000013E RG    05   
IO$_SETMODE      ********   X   05   I_RAD50NAME      00000124            RSX$SVTK         00000151 RG    05   
IS.BV          = 00000005            I_RCVAST         00000198            RSX$_ACCVIO    = 00068044            
IS.CC          = 00000301            I_RCVMAIL        0000013C            RSX$_BADLIBREF = 0006806C            
IS.CLR         = 00000000            I_RUNFLAGS       00000190            RSX$_BADSTACK  = 0006804C            
IS.CR          = 00000D01            I_SCRATCH        00000000            RSX$_BREAK     = 0006800C            
IS.EOT         = 00000401            I_STATE          0000014C            RSX$_EXITSTATUS= 00068180            
IS.ESC         = 00001B01            I_TYPE           00000180            RSX$_EXTERNABRT= 0006805C            
IS.ESQ         = 00009B01            I_UIC            00000118            RSX$_ILLINST   = 0006802C            
IS.PES         = 00008001            I_WAIT           00000154            RSX$_INSFDYNMEM= 00068054            
IS.PND         = 00000000            I_WAITSAVE       0000015C            RSX$_IOT       = 00068014            
IS.RDD         = 00000002            LUTC_CR        = 00000005            RSX$_LIBNOTFND = 00068074            
IS.SET         = 00000002            LUTC_DISK      = 00000002            RSX$_LOADERROR = 0006807C            
IS.SPD         = 00000002            LUTC_LP        = 00000004            RSX$_NONRSXEMT = 0006801C            
IS.SUC         = 00000001            LUTC_RMS       = 00000000            RSX$_NOSUCHDEV = 000680C2            
IS.TAB         = 00000901            LUTC_TAPE      = 00000003            RSX$_NOTSKIMG  = 00068064            
IS.TMO         = 00000002            LUTC_TRM       = 00000001            RSX$_ODDADDR   = 00068034            
I_ADR0           000000D8            LUTV_CTRLC     = 00000002            RSX$_PMD       = 000680CA            
I_ASCIINAME      0000011C            LUTV_CTRLO     = 00000000            RSX$_RCVMBXSIZ = 0000012C            
I_ASTPOOL        000000A8            LUTV_PRM       = 00000003            RSX$_RESERVED  = 00068004            
I_ASTQUEUE       000000A0            LUTV_TI        = 00000001            RSX$_TBIT      = 0006803C            
I_BAILOUTFP      0000018C            LUT_CHAN         0000000C            RSX$_TRAP      = 00068024            
I_CMDAD          000000C4            LUT_CHAR         00000014            SV_ASTLVL        00000005            
I_CMDSZ          000000C0            LUT_CTRLC        00000034            SV_DCL           00000002            
I_CURAST         00000194            LUT_FLAGS        0000000A            SV_FLOATAST      0000000A            
I_FCBPOOL        000000B0            LUT_INFONAME     00000030            SV_FRESTORE      00000003            
I_FCC            000001B0            LUT_INFOUNIT     00000032            SV_NOAST         00000004            
I_FLOATA0        000001BC            LUT_LINK         00000000            SV_PENDWAIT      00000006            
I_FLOATA1        000001C4            LUT_REALNAME     00000020            SV_PWRAST        00000009            
I_FLOATA2        000001CC            LUT_REF          00000008            SV_RCVAST        00000008            
I_FLOATA3        000001D4            LUT_RSXNAME      00000010            SV_RESTORE       00000000            
I_FLOATA4        000001DC            LUT_RSXUNIT      00000012            SV_TRANSLATE     00000001            
I_FLOATA5        000001E4            LUT_SIZE         00000038            SV_WAIT          00000007            
I_FLOATADR       000001AC            LUT_TYPE         00000018            SYS$QIOW         ********   X   05   
I_FLOATAST       000001A0            LUT_UNIT         00000020            S_PC             00000020            
I_FLOATCSR       000001A4            PSL_CC         = 00000000            S_PS             00000024            
I_FLOATERR       000001A8            PSL_CM         = 0000001F            S_R0             00000000            
I_FLOATTMP       000001B4            PSL_FPD        = 0000001B            S_R1             00000004            
I_GARD           000000C8            PSL_FU         = 00000006            S_R2             00000008            
I_HIGHEFN        00000148            PSL_TBIT       = 00000004            S_R3             0000000C            
RSXTRAP         - RSX11M TRAP ASSOCIATED DIRECTIVES              22-AUG-1978 00:27:17   VAX-11 MACRO X0.3-11               Page  14
SYMBOL TABLE                                                                                                                     (9)

S_R4             00000010            
S_R5             00000014            
S_R6             00000018            
S_TYPE           0000001C            
W.BATT           00000006            
W.BFPD           0000000C            
W.BHVR           00000004            
W.BLGH           00000010            
W.BLPD           0000000E            
W.BLVR           00000002            
W.BNPD           0000000D            
W.BOFF           0000000A            
W.BPCB           00000000            
W.BSIZ           00000008            


PROGRAM SECTION SYNOPSIS

.  ABS  .        00000000      00     NOPIC   USR   CON   ABS   LCL NOSHR NOEXE NORD  NOWRT BYTE  
. BLANK .        00000000      01     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
..ABS.           00000042      02     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  
$ABS$            00000000      03     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  
RSXDEF           000001F0      04     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  
RSXCODE          00000164      05     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD  NOWRT BYTE  


THERE WERE NO ERRORS OR WARNINGS.
16290. BYTES LEFT IN FREE MEMORY POOL.
28. BYTES OF RECLAIMED MEMORY.
OBJ$:RSXTRAP,LIS$:RSXTRAP/-SP=SRC$:C,RSXTRAP
22 MLB DIR RDS - 519 GETS TO DEFINE 20 MACROS. 15 INTER. FILE WRITES. 
