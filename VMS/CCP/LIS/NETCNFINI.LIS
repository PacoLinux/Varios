NETCNFINI       - INITIALIZE NETACP CONFIGURATION TABLES         22-AUG-1978 00:48:27   VAX-11 MACRO X0.3-11               Page   0
TABLE OF CONTENTS   

   (1)    4200  DECLARATIONS
   (1)    7100  INITIALIZATION
NETCNFINI       - INITIALIZE NETACP CONFIGURATION TABLES         22-AUG-1978 00:48:27   VAX-11 MACRO X0.3-11               Page   1
X01                                                                                                                              (1)

                                     0000   100 	.TITLE	NETCNFINI - INITIALIZE NETACP CONFIGURATION TABLES 
                                     0000   200 	.IDENT	/X01 /
                                     0000   300 
                                     0000   400 ;
                                     0000   500 ;			  COPYRIGHT (c) 1978 BY
                                     0000   600 ;	      DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
                                     0000   700 ;
                                     0000   800 ; THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND  COPIED
                                     0000   900 ; ONLY  IN  ACCORDANCE  WITH  THE  TERMS  OF  SUCH  LICENSE AND WITH THE
                                     0000  1000 ; INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE OR  ANY  OTHER
                                     0000  1100 ; COPIES  THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY
                                     0000  1200 ; OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE  IS  HEREBY
                                     0000  1300 ; TRANSFERRED.
                                     0000  1400 ;
                                     0000  1500 ; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITHOUT  NOTICE
                                     0000  1600 ; AND  SHOULD  NOT  BE  CONSTRUED  AS  A COMMITMENT BY DIGITAL EQUIPMENT
                                     0000  1700 ; CORPORATION.
                                     0000  1800 ;
                                     0000  1900 ; DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE OR  RELIABILITY  OF  ITS
                                     0000  2000 ; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.
                                     0000  2100 ;
                                     0000  2200 
                                     0000  2300 ;++
                                     0000  2400 ; FACILITY:
                                     0000  2500 ;	NETWORK ACP
                                     0000  2600 ;
                                     0000  2700 ; ABSTRACT:
                                     0000  2800 ;	THIS ROUTINE INITIALIZES THE NETACPS CONFIGURATION
                                     0000  2900 ;	TABLES FROM THE CONFIGURATION DATABASE.
                                     0000  3000 ;
                                     0000  3100 ;
                                     0000  3200 ; ENVIRONMENT:
                                     0000  3300 ;	MODE IS KERNEL
                                     0000  3400 ;
                                     0000  3500 ; AUTHOR:TOM DOPIRAK	, CREATION DATE:2-17-78
                                     0000  3600 ;
                                     0000  3700 ; MODIFIED BY:
                                     0000  3800 ;
                                     0000  3900 ;	, : VERSION
                                     0000  4000 ; 01	- 
                                     0000  4100 ;--
                                     0000  4200 	.SBTTL	DECLARATIONS
                                     0000  4300 ;
                                     0000  4400 ; INCLUDE FILES:
                                     0000  4500 ;
                                     0000  4600 	$LNDDEF
                                     0000  4700 	$RNDDEF
                                     0000  4800 	$NDBDEF
                                     0000  4900 ;
                                     0000  5000 ; MACROS:
                                     0000  5100 ;
                                     0000  5200 
                                     0000  5300 ;
                                     0000  5400 ; EQUATED SYMBOLS:
                                     0000  5500 
                                     0000  5600 ;
                                     0000  5700 ;PICK LARGEST OF LOCALNODE RECORD OR REMOTE RECORD
NETCNFINI       - INITIALIZE NETACP CONFIGURATION TABLES         22-AUG-1978 00:48:27   VAX-11 MACRO X0.3-11               Page   2
X01             DECLARATIONS                                                                                                     (1)

                                     0000  5800 ;FOR LATER ALLOCATION OF COMMON STORAGE
                                     0000  5900 
                           000000C3  0000  6000 	MAXREC=RND$C_SIZE
                           000000B6  0000  6100 	.IF LT RND$C_SIZE-LND$C_SIZE
                                     0000  6200 	    MAXREC=LND$C_SIZE
                                     0000  6300 	.ENDC
                                     0000  6400 ;
                                     0000  6500 
                                     0000  6600 ;
                                     0000  6700 ; OWN STORAGE:
                                     0000  6800 ;
                                     0000  6900 
                                 00000000  7000 	.PSECT	NET_DISCONNECT	EXE,RD,NOWRT
                                     0000  7100 	.SBTTL	INITIALIZATION
                                     0000  7200 ;++
                                     0000  7300 ; FUNCTIONAL DESCRIPTION:
                                     0000  7400 ;
                                     0000  7500 ;
                                     0000  7600 ; CALLING SEQUENCE:
                                     0000  7700 ;
                                     0000  7800 ;	NONE
                                     0000  7900 ;
                                     0000  8000 ; INPUT PARAMETERS:
                                     0000  8100 ;
                                     0000  8200 ;	NONE
                                     0000  8300 ;
                                     0000  8400 ; IMPLICIT INPUTS:
                                     0000  8500 ;
                                     0000  8600 ;	NONE
                                     0000  8700 ;
                                     0000  8800 ; OUTPUT PARAMETERS:
                                     0000  8900 ;
                                     0000  9000 ;	NONE
                                     0000  9100 ;
                                     0000  9200 ; IMPLICIT OUTPUTS:
                                     0000  9300 ;
                                     0000  9400 ;	NONE
                                     0000  9500 ;
                                     0000  9600 ; COMPLETION CODES:
                                     0000  9700 ;
                                     0000  9800 ;	NONE
                                     0000  9900 ;
                                     0000 10000 ; SIDE EFFECTS:
                                     0000 10100 ;
                                     0000 10200 ;	NONE
                                     0000 10300 ;
                                     0000 10400 ;--
                                     0000 10500 
                                     0000 10600 
                                     0000 10700 
                                     0000 10800 NET$INI_CONFIG::
                                     0000 10900 ;
                                     0000 11000 ;TRY AND OPEN LOCAL NODE DATABASE
                                     0000 11100 
                               083C  0000 11200 	.WORD 	^M<R2,R3,R4,R5,R11>
                          00     DD  0002 11300 	PUSHL	#LND$C_FILE		;INDEX TO FILE
       0000'CF            01     FB  0004 11400 	CALLS	#1,W^OPEN_FILE		;TRY AND OPEN IT
NETCNFINI       - INITIALIZE NETACP CONFIGURATION TABLES         22-AUG-1978 00:48:27   VAX-11 MACRO X0.3-11               Page   3
X01             INITIALIZATION                                                                                                   (1)

            39            50     E9  0009 11500 	BLBC	R0,80$			;ON FAILURE EXIT
                                     000C 11600 ;
                                     000C 11700 ;CREATE STACK AREA FOR RECORD BUFFER
                                     000C 11800 
            5E   000000C3 8F     C2  000C 11900 	SUBL2	#MAXREC,SP
                                     0013 12000 ;
                                     0013 12100 ;BUILD DESCRIPTOR
                                     0013 12200 
            5B            5E     D0  0013 12300 	MOVL	SP,R11			;SAVE BUFFER ADDRESS
                          5B     DD  0016 12400 	PUSHL	R11			;BUFFER ADDRESS FOR DESCRIPTOR
                          0D     DD  0018 12500 	PUSHL	#LND$C_SIZE		;SIZE OF LOCAL NODE BUFFER
                                     001A 12600 
                                     001A 12700 ;
                                     001A 12800 ;CALL MATCHKEY TO BRING LOCAL NODE RECORD
                                     001A 12900 
                          00     DD  001A 13000 	PUSHL	#0			;KEYSIZE,IE NO KEY
                       04 AE     DF  001C 13100 	PUSHAL	4(SP)			;ADDRESS OF DESCRIPTOR
       0000'CF            02     FB  001F 13200 	CALLS	#2,W^MATCHKEY		;BRING IN RECORD
            1E            50     E9  0024 13300 	BLBC	R0,80$			;ON FAILURE CLOSE FILE
                                     0027 13400 20$:
                                     0027 13500 ;
                                     0027 13600 ;MOVE COUNTED NODE NAME FROM RECORD
                                     0027 13700 
            51         01 AB     DE  0027 13800 	MOVAL LND$B_NAME(R11),R1	;ADDRESS OF LOCALNODE NAME
            53       0000'CF     DE  002B 13900 	MOVAL	W^NET$GT_MYNAME,R3	;ADDRESS OF PLACE TO STORE IT
                          FFCD'  30  0030 14000 	BSBW	W^NET$MOVE_STRING		;MOVE THE LOCAL NAME
                                     0033 14100 
                                     0033 14200 ;
                                     0033 14300 ;MOVE NODE NUMBER
                                     0033 14400 
       0000'CF         08 AB     B0  0033 14500 	MOVW	LND$W_NUMBER(R11),W^NET$GW_MYADDR
                                     0039 14600 
                                     0039 14700 30$:
                                     0039 14800 ;
                                     0039 14900 ;CLOSE DATABASE
                                     0039 15000 
       0000'CF            00     FB  0039 15100 	CALLS	#0,W^CLOSE_FILE		;CLOSE ACCESS TO DATABASE
                                     003E 15200 
                                     003E 15300 ;
                                     003E 15400 ;OPEN THE REMOTE NODE DATA BASE
                                     003E 15500 
                          01     DD  003E 15600 	PUSHL	#RND$C_FILE
       0000'CF            01     FB  0040 15700 	CALLS	#1,W^OPEN_FILE
                                     0045 15800 80$:
            50            50     E9  0045 15900 	BLBC	R0,50$		;EXIT ON ERROR
                                     0048 16000 ;
                                     0048 16100 ;SETUP DESCRIPTOR FOR RND RECORD
                                     0048 16200 100$:
            6E       00C3 8F     3C  0048 16300 	MOVZWL	#RND$C_SIZE,(SP)	;SIZE OF RECORD TO DESCRIPTOR
                                     004D 16400 
                                     004D 16500 ;
                                     004D 16600 ;SETUP PARAMETERS FOR MATCHKEY
                       02 AB     DF  004D 16700 	PUSHAL	RND$T_NAME(R11)		;ADDRESS OF NODE NAME IN BUFFER
                     0001'CF     DF  0050 16800 	PUSHAL	W^NET$GT_MYNAME+1		;NAME OF LOCAL NODE
            7E       0000'CF     9A  0054 16900 	MOVZBL	W^NET$GT_MYNAME,-(SP)	;SIZE OF LOCAL NODE NAME
                       0C AE     DF  0059 17000 	PUSHAL	12(SP)			;DESCRIPTOR ADDRESS
                                     005C 17100 
NETCNFINI       - INITIALIZE NETACP CONFIGURATION TABLES         22-AUG-1978 00:48:27   VAX-11 MACRO X0.3-11               Page   4
X01             INITIALIZATION                                                                                                   (1)

                                     005C 17200 ;
                                     005C 17300 ;CALL MATCHKEY AND GET REMOTE NODE RECORD FOR LOCALNODE
                                     005C 17400 
       0000'CF            04     FB  005C 17500 	CALLS	#4,W^MATCHKEY
                                     0061 17600 120$:
            2F            50     E9  0061 17700 	BLBC	R0,130$			;ON FAILURE CLOSE FILE AND LEAVE
                                     0064 17800 
                                     0064 17900 ;
                                     0064 18000 ;GET TOTAL SIZE OF PRIVILEGED ACCOUNTING STRINGS
                                     0064 18100 ;FROM THE INDIVIDUAL COUNTED FIELDS IN THE DATABASE RECORD
                                     0064 18200 ;AND STORE TOTAL COUNT(PLUS COUNTS) IN LOCALNODE NDB
                                     0064 18300 
            53       007C'CF     DE  0064 18400 	MOVAL	W^NET$AB_LOCALNDB+NDB$B_PRVACC,R3	;PLACE TO PUT SIZE
       009E CB       0084 CB     81  0069 18500 	ADDB3	RND$B_PRVID(R11),RND$B_PRVACC(R11),R0
                          50         0070       
            03       0095 CB     81  0071 18600 	ADDB3	RND$B_PRVPSW(R11),#3,R1
                          51         0076       
            50            51     81  0077 18700 	ADDB3	R1,R0,(R3)+
                          83         007A       
                                     007B 18800 
                                     007B 18900 ;FILL IN THE REMAINER OF THE NDB PRVACC FIELD
                                     007B 19000 ;START WITH THE PRIVILEGED ID STRING
                                     007B 19100 
            51       0084 CB     DE  007B 19200 	MOVAL	RND$B_PRVID(R11),R1	;ADDRESS OF COUNTED USER ID
                          FF7D'  30  0080 19300 	BSBW	W^NET$MOVE_STRING	;MOVE TO NDB
                                     0083 19400 
                                     0083 19500 ;
                                     0083 19600 ;NOW STORE PRIVILEGED PASSWORD STRING
                                     0083 19700 
            51       0095 CB     DE  0083 19800 	MOVAL	RND$B_PRVPSW(R11),R1	;ADDRESS OF DEFAULT PASSWORD
                          FF75'  30  0088 19900 	BSBW	W^NET$MOVE_STRING	;MOVE TO NDB
                                     008B 20000 ;
                                     008B 20100 ;STORE PRIVILEGED ACCOUNT NAME
            51       009E CB     DE  008B 20200 	MOVAL	RND$B_PRVACC(R11),R1	;ADDRESS DEFAULT ACCOUNT NAME
                          FF6D'  30  0090 20300 	BSBW	W^NET$MOVE_STRING	;MOVE TO NDB
                                     0093 20400 ;
                                     0093 20500 ;CLOSE RND DATABASE
                                     0093 20600 130$:
                                     0093 20700 
       0000'CF            00     FB  0093 20800 	CALLS	#0,W^CLOSE_FILE
                                     0098 20900 50$:	
                                 04  0098 21000 	RET
                                     0099 21100 
                                     0099 21200 
                                     0099 21300 	.END
NETCNFINI       - INITIALIZE NETACP CONFIGURATION TABLES         22-AUG-1978 00:48:27   VAX-11 MACRO X0.3-11               Page   5
SYMBOL TABLE                                                                                                                     (1)

BIT...         = 0000000A            NDB$W_BUFSIZE    000000A8            RND$W_NUMBER     00000008            
CLOSE_FILE       ********   X   03   NDB$W_CHANNEL    00000014            
GBL...         = 00000000            NDB$W_CHAR       000000AA            
LND$B_IDENT      0000000C            NDB$W_HISBLKSIZ  000000B8            
LND$B_MAXLINKS   0000000A            NDB$W_HISNSPSIZ  000000BA            
LND$B_MAXNODES   0000000B            NDB$W_MAXLNK     00000026            
LND$B_NAME       00000001            NDB$W_NODEADDR   00000018            
LND$B_USE        00000000            NDB$W_NSPSIZE    00000024            
LND$C_FILE     = 00000000            NDB$W_RCVBLKS    000000B4            
LND$C_SIZE       0000000D            NDB$W_SIZE       00000008            
LND$K_SIZE       0000000D            NDB$W_XMTBLKS    000000B6            
LND$T_NAME       00000002            NET$AB_LOCALNDB  ********   X   03   
LND$W_NUMBER     00000008            NET$GT_MYNAME    ********   X   03   
MATCHKEY         ********   X   03   NET$GW_MYADDR    ********   X   03   
MAXREC         = 000000C3            NET$INI_CONFIG   00000000 RG    03   
NDB$B_COMMVER    0000002B            NET$MOVE_STRING  ********   X   03   
NDB$B_CONNTMO    0000004F            OPEN_FILE        ********   X   03   
NDB$B_FUNC       00000021            RND$B_BOOTPW     00000042            
NDB$B_NONPRVACC  00000050            RND$B_CONNECT    000000AF            
NDB$B_NUMBUF     0000000B            RND$B_DLLFILE    00000026            
NDB$B_PRVACC     0000007C            RND$B_HOST       000000BB            
NDB$B_RTEVER     00000028            RND$B_IDENT      000000C2            
NDB$B_STATE      00000016            RND$B_NAME       00000001            
NDB$B_STATUS     00000017            RND$B_NONPRVACC  00000073            
NDB$B_TYPE       0000000A            RND$B_NONPRVID   00000059            
NDB$C_CTL_LOOP = 00000005            RND$B_NONPRVPSW  0000006A            
NDB$C_LENGTH     000000BC            RND$B_PRVACC     0000009E            
NDB$C_LOOP     = 00000003            RND$B_PRVID      00000084            
NDB$C_MAINT    = 00000004            RND$B_PRVPSW     00000095            
NDB$C_MSG_DCHK = 00000009            RND$B_RCVPW      00000050            
NDB$C_MSG_DOWN = 00000003            RND$B_SECLDR     0000000A            
NDB$C_MSG_DSRCH= 00000007            RND$B_SERVER     000000B0            
NDB$C_MSG_LOOPB= 00000008            RND$B_TERLDR     00000018            
NDB$C_MSG_MAINT= 00000002            RND$B_ULDFILE    00000034            
NDB$C_MSG_NGINI= 00000004            RND$B_USE        00000000            
NDB$C_MSG_OKINI= 00000005            RND$B_XMTPW      00000047            
NDB$C_MSG_SHUT = 00000006            RND$C_BOOTPW   = 00000004            
NDB$C_MSG_START= 00000001            RND$C_FILE     = 00000001            
NDB$C_OFF      = 00000001            RND$C_SIZE       000000C3            
NDB$C_ON       = 00000000            RND$K_SIZE       000000C3            
NDB$C_SHUT     = 00000002            RND$L_LINE       000000B7            
NDB$K_LENGTH     000000BC            RND$T_BOOTPW     00000043            
NDB$L_LINE_NAME  00000004            RND$T_DLLFILE    00000027            
NDB$L_NEXT       00000000            RND$T_HOST       000000BC            
NDB$M_CTL_LOOP = 00000008            RND$T_NAME       00000002            
NDB$M_LOOPBACK = 00000001            RND$T_NONPRVACC  00000074            
NDB$M_OFF      = 00000002            RND$T_NONPRVID   0000005A            
NDB$M_SHUT     = 00000004            RND$T_NONPRVPSW  0000006B            
NDB$Q_AST        0000000C            RND$T_PRVACC     0000009F            
NDB$Q_ZEROTIME   000000AC            RND$T_PRVID      00000085            
NDB$T_NAME       0000001A            RND$T_PRVPSW     00000096            
NDB$T_SYSVER     0000002E            RND$T_RCVPW      00000051            
NDB$V_CTL_LOOP = 00000003            RND$T_SECLDR     0000000B            
NDB$V_LOOPBACK = 00000000            RND$T_SERVER     000000B1            
NDB$V_OFF      = 00000001            RND$T_TERLDR     00000019            
NDB$V_SHUT     = 00000002            RND$T_ULDFILE    00000035            
NDB$W_BLKSIZE    00000022            RND$T_XMTPW      00000048            
NETCNFINI       - INITIALIZE NETACP CONFIGURATION TABLES         22-AUG-1978 00:48:27   VAX-11 MACRO X0.3-11               Page   6
PROGRAM SECTION SYNOPSIS                                                                                                         (1)



PROGRAM SECTION SYNOPSIS

.  ABS  .        00000000      00     NOPIC   USR   CON   ABS   LCL NOSHR NOEXE NORD  NOWRT BYTE  
. BLANK .        00000000      01     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
$ABS$            000000C3      02     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  
NET_DISCONNECT   00000099      03     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD  NOWRT BYTE  


THERE WERE NO ERRORS OR WARNINGS.
22702. BYTES LEFT IN FREE MEMORY POOL.
1374. BYTES OF RECLAIMED MEMORY.
OBJ$:NETCNFINI,LIS$:NETCNFINI/-SP=EXECML$/ML,M1/ML,M2/ML,SRC$:NETCNFINI
37 MLB DIR RDS - 277 GETS TO DEFINE 12 MACROS. 11 INTER. FILE WRITES. 
