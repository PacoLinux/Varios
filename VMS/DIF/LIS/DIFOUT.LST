FORTRAN IV-PLUS V02-51D		02:38:14    22-AUG-78		PAGE 1   
DIFOUT.FTN   	/TR:BLOCKS/WR

        C
        C
        C
        C
        C	DIFOUT -- OUTPUT A LINE OF COMPARE DATA
        C
        C
        C
        C	COPYRIGHT (C) 1976
        C	DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
        C
        C	THIS SOFTWARE IS FURNISHED UNDER  A LICENSE FOR USE ONLY  ON  A
        C	SINGLE COMPUTER SYSTEM AND MAY BE  COPIED ONLY WITH  THE INCLU-
        C	SION OF  THE  ABOVE  COPYRIGHT NOTICE.  THIS SOFTWARE,  OR  ANY
        C	OTHER COPIES THEREOF, MAY NOT BE  PROVIDED  OR  OTHERWISE  MADE
        C	AVAILABLE TO ANY OTHER PERSON EXCEPT  FOR  USE  ON  SUCH SYSTEM
        C	AND TO  ONE WHO AGREES  TO  THESE LICENSE  TERMS.  TITLE TO AND
        C	OWNERSHIP OF THE SOFTWARE SHALL AT ALL TIMES REMAIN IN DEC.
        C
        C	THE INFORMATION IN THIS SOFTWARE  IS  SUBJECT TO CHANGE WITHOUT
        C	NOTICE AND SHOULD NOT BE CONSTRUED  AS  A COMMITMENT BY DIGITAL
        C	EQUIPMENT CORPORATION.
        C
        C	DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF ITS
        C	SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
        C
        C
        C	K.D. MORSE	23-NOV-76
        C
        C
        C
        C	THIS ROUTINE WRITES ONE LINE OF OUTPUT TO THE DIF OUTPUT FILE.
        C	IT IS CALLED TO OUTPUT SEQUENTIAL LISTS OF UNMATCHED RECORDS AND
        C	MERGED LISTS.
        C
        C
        C
FORTRAN IV-PLUS V02-51D		02:38:14    22-AUG-78		PAGE 2   
DIFOUT.FTN   	/TR:BLOCKS/WR

         
        C
        C
        C  VARIABLES:
        C
        C
        C	IERR1--ERROR INDICATOR FROM FORTRAN ROUTINES
        C	ILUN--CHANNEL ON WHICH FILE IS OPEN
        C	INMLNG--LENGTH OF INPUT FILE NAME
        C	INPNAM--NAME OF INPUT FILE
        C	IRECNM--SEQUENTIAL LINE NUMBER OF RECORD TO BE OUTPUT
        C	ISTAT--INDICATOR FOR TYPE OF CLOSE TO PERFORM ON INPUT FILE
        C	ISUB--INDICATOR FOR INPUT- OR COMPARE-FILE, I.E., 1=INPUT AND
        C		2=COMPARE, USED TO SUBSCRIPT INTO TABLES AND POINTERS
        C	ITYPE--INDICATOR FOR TYPE OF OPEN TO PERFORM ON INPUT FILE
        C	LENINP--LENGTH OF RECORD
        C	LINSIZ--NUMBER OF CHARACTERS IN AN OUTPUT LINE
        C	LINWID--ARRAY DESCRIBING OUTPUT LINE TO HEXADECIMAL ROUTINE
        C	OLUN--CHANNEL FOR OUTPUT FILE
        C	OUTMOD--MODE OF OUTPUT TO PRODUCE, E.G., OCTAL, ASCII, OR
        C		HEXADECIMAL
        C	RECORD--BUFFER TO HOLD ONE RECORD
        C
        C
FORTRAN IV-PLUS V02-51D		02:38:14    22-AUG-78		PAGE 3   
DIFOUT.FTN   	/TR:BLOCKS/WR

         
0001    	SUBROUTINE DIFOUT(ILUN,RECORD,LENINP,ISTAT,INPNAM,INMLNG,
        	1ITYPE,IRECNM,OUTMOD)
0002    	COMMON MAP(100,2),NUMLIN,MAPTOP(2),LSTMAP(2),MLUN,
        	1IHOLD(30,2),NINCOR,IFREE(2),IFIRST(2),LAST(2),MAXBUF,
        	2BUFR,ISWTCH,COMCHR,NSWVAL(10),LSTMAT(2),IRECSZ,
        	3MRKPNT(2,4),INOUT,MAPEND(2),LINSIZ,MAPNAM,MNMLNG,MTYPE,MSTAT
        	4,IERR1,IERR2,IKIND,OLUN,MAPMRK(3,2),MPRINT,BARCHR
         
0003    	BYTE BUFR(7680,2),COMCHR(16),OUTMOD,BARCHR
0004    	BYTE OUTCHR,BLANK,TAB,INPNAM(1),RECORD(1),MAPNAM(12)
0005    	INTEGER LINWID(2),OLUN
0006    	DATA BLANK/32/,TAB/9/
         
0007    311	FORMAT(' ',I5,A1,<N>(<LINSIZ-8>A1/' ',T10))
0008    321	FORMAT(' ',I5,A1,<N>(<(LINSIZ-10)/5>O5/' ',T10))
0009    331	FORMAT(' ',I5,A1,$)
         
        C
        C	DECIDE WHICH FILE IS REQUESTED.
        C
0010    	ISUB=1
0011    	IF (ILUN .EQ. 3) ISUB=2
        C
        C	GET THE OUTPUT LINE.
        C
0012    	CALL GETLIN(ILUN,RECORD,LENINP,ISTAT,INPNAM,INMLNG,
        	1ITYPE,IRECNM)
0013    	IF (IRECNM .EQ. 0) GOTO 1000
0014    	IF (IERR1 .LT. 0) GOTO 1000
        C
        C	BRANCH ON OUTPUT MODE.
        C
0015    300	GOTO (310,320,330),OUTMOD
        C
        C	ASCII RECORD.
        C
0016    310	N=512 / (LINSIZ-8) +1
0017    	IF (LENINP .GT. 0) WRITE(OLUN,311,ERR=991)IRECNM,TAB,
        	1(RECORD(I),I=1,LENINP)
0018    	IF (LENINP .EQ. 0) WRITE(OLUN,311,ERR=991)IRECNM
0019    	GOTO 1000
        C
        C	OCTAL RECORD.
        C
0020    320	N=512 / ((LINSIZ-8)/4) + 1
0021    	IF (LENINP .GT. 0) WRITE(OLUN,321,ERR=991)IRECNM,TAB,
        	1(RECORD(I),I=1,LENINP)
0022    	IF (LENINP .EQ. 0) WRITE(OLUN,321,ERR=991)IRECNM
0023    	GOTO 1000
        C
        C	HEXADECIMAL RECORD.
        C
0024    330	LINWID(1)=(LINSIZ-8)/4
0025    	LINWID(2)=8
0026    	IF (LENINP .GT. 0) WRITE(OLUN,331,ERR=991)IRECNM,TAB
FORTRAN IV-PLUS V02-51D		02:38:14    22-AUG-78		PAGE 4   
DIFOUT.FTN   	/TR:BLOCKS/WR

0027    	IF (LENINP .GT. 0) CALL HEXDMP(RECORD,1,LENINP,LINWID(1),OLUN)
0028    	IF (LENINP .EQ. 0) WRITE(OLUN,331,ERR=991)IRECNM
0029    	GOTO 1000
        C
        C
        C	ERROR CODES
        C
        C
        C
        C	OLUN WRITE ERROR.
        C
0030    991	IERR1=-18
0031    	GOTO 1000
0032    1000	RETURN
0033    	END
FORTRAN IV-PLUS V02-51D		02:38:14    22-AUG-78		PAGE 5   
DIFOUT.FTN   	/TR:BLOCKS/WR

PROGRAM SECTIONS

NUMBER	 NAME	    SIZE		ATTRIBUTES

  1	$CODE1	001236   335		RW,I,CON,LCL
  2	$PDATA	000014     6		RW,D,CON,LCL
  3	$IDATA	000152    53		RW,D,CON,LCL
  4	$VARS	000016     7		RW,D,CON,LCL
  5	$TEMPS	000002     1		RW,D,CON,LCL
  6	.$$$$.	037222  8009		RW,D,OVR,GBL


ENTRY POINTS

 NAME   TYPE  ADDRESS    NAME   TYPE  ADDRESS    NAME   TYPE  ADDRESS    NAME   TYPE  ADDRESS    NAME   TYPE  ADDRESS   

 DIFOUT	      1-000000


VARIABLES

 NAME   TYPE  ADDRESS    NAME   TYPE  ADDRESS    NAME   TYPE  ADDRESS    NAME   TYPE  ADDRESS    NAME   TYPE  ADDRESS   

 BARCHR	L*1   6-037220	 BLANK	L*1   4-000001	 I	I*2   4-000014	 IERR1	I*2   6-037172	 IERR2	I*2   6-037174
 IKIND	I*2   6-037176	 ILUN	I*2   F-000002*	 INMLNG	I*2   F-000014*	 INOUT	I*2   6-037140	 IRECNM	I*2   F-000020*
 IRECSZ	I*2   6-037116	 ISTAT	I*2   F-000010*	 ISUB	I*2   4-000012	 ISWTCH	I*2   6-037044	 ITYPE	I*2   F-000016*
 LENINP	I*2   F-000006*	 LINSIZ	I*2   6-037146	 MAXBUF	I*2   6-001042	 MLUN	I*2   6-000632	 MNMLNG	I*2   6-037164
 MPRINT	I*2   6-037216	 MSTAT	I*2   6-037170	 MTYPE	I*2   6-037166	 N	I*2   4-000010	 NINCOR	I*2   6-001024
 NUMLIN	I*2   6-000620	 OLUN	I*2   6-037200	 OUTCHR	L*1   4-000000	 OUTMOD	L*1   F-000022*	 TAB	L*1   4-000002


ARRAYS

 NAME   TYPE  ADDRESS	    SIZE 	DIMENSIONS

 BUFR	L*1   6-001044	036000  7680	(7680,2)
 COMCHR	L*1   6-037046	000020     8	(16)
 IFIRST	I*2   6-001032	000004     2	(2)
 IFREE	I*2   6-001026	000004     2	(2)
 IHOLD	I*2   6-000634	000170    60	(30,2)
 INPNAM	L*1   F-000012*	000001     0	(1)
 LAST	I*2   6-001036	000004     2	(2)
 LINWID	I*2   4-000004	000004     2	(2)
 LSTMAP	I*2   6-000626	000004     2	(2)
 LSTMAT	I*2   6-037112	000004     2	(2)
 MAP	I*2   6-000000	000620   200	(100,2)
 MAPEND	I*2   6-037142	000004     2	(2)
 MAPMRK	I*2   6-037202	000014     6	(3,2)
 MAPNAM	L*1   6-037150	000014     6	(12)
 MAPTOP	I*2   6-000622	000004     2	(2)
 MRKPNT	I*2   6-037120	000020     8	(2,4)
 NSWVAL	I*2   6-037066	000024    10	(10)
 RECORD	L*1   F-000004*	000001     0	(1)


LABELS
FORTRAN IV-PLUS V02-51D		02:38:14    22-AUG-78		PAGE 6   
DIFOUT.FTN   	/TR:BLOCKS/WR


 LABEL   ADDRESS 	 LABEL   ADDRESS 	 LABEL   ADDRESS 	 LABEL   ADDRESS 	 LABEL   ADDRESS 	

 300	    **   	 310	 1-000240	 311'	 3-000000	 320	 1-000474	 321'	 3-000030
 330	 1-000734	 331'	 3-000060	 991	 1-001152	 1000	 1-001166


FUNCTIONS AND SUBROUTINES REFERENCED

 GETLIN	 HEXDMP


TOTAL SPACE ALLOCATED = 040666  8411

NO FPP INSTRUCTIONS GENERATED

OBJ$:DIFOUT,LIS$:DIFOUT/-SP=SRC$:DIFOUT
