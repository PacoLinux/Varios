BOOTIO          - BOOTSTRAP FILEREAD IO MODULE                   21-AUG-1978 22:26:54   VAX-11 MACRO X0.3-11               Page   0
TABLE OF CONTENTS   

   (1)    4300  RDWRTLBN - READ/WRITE LOGICAL BLOCK NUMBER
BOOTIO          - BOOTSTRAP FILEREAD IO MODULE                   21-AUG-1978 22:26:54   VAX-11 MACRO X0.3-11               Page   1
X0100                                                                                                                            (1)

                                     0000   200 	.TITLE	BOOTIO - BOOTSTRAP FILEREAD IO MODULE
                                     0000   300 	.IDENT	/X0100/
                                     0000   400 ;
                                     0000   500 ; COPYRIGHT (C) 1978
                                     0000   600 ; DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASSACHUSETTS 01754
                                     0000   700 ;
                                     0000   800 ; THIS SOFTWARE IS FURNISHED  UNDER A LICENSE FOR USE ONLY ON A SINGLE
                                     0000   900 ; COMPUTER  SYSTEM AND  MAY BE  COPIED ONLY WITH  THE INCLUSION OF THE
                                     0000  1000 ; ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE, OR ANY OTHER COPIES THEREOF,
                                     0000  1100 ; MAY NOT BE PROVIDED OR  OTHERWISE MADE AVAILABLE TO ANY OTHER PERSON
                                     0000  1200 ; EXCEPT FOR USE ON SUCH SYSTEM AND TO ONE WHO AGREES TO THESE LICENSE
                                     0000  1300 ; TERMS.  TITLE TO AND  OWNERSHIP OF THE  SOFTWARE  SHALL AT ALL TIMES
                                     0000  1400 ; REMAIN IN DEC.
                                     0000  1500 ;
                                     0000  1600 ; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE WITHOUT NOTICE
                                     0000  1700 ; AND SHOULD  NOT BE CONSTRUED  AS A COMMITMENT  BY DIGITAL  EQUIPMENT
                                     0000  1800 ; CORPORATION.
                                     0000  1900 ;
                                     0000  2000 ; DEC ASSUMES  NO  RESPONSIBILITY  FOR  THE USE OR  RELIABILITY OF ITS
                                     0000  2100 ; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
                                     0000  2200 
                                     0000  2300 ;++
                                     0000  2400 ; FACILITY:	SYSTEM BOOTSTRAPPING
                                     0000  2500 ;
                                     0000  2600 ; ABSTRACT:
                                     0000  2700 ;
                                     0000  2800 ;	THIS MODULE PERFORMS LOGICAL BLOCK I/O FOR FILEREAD
                                     0000  2900 ;
                                     0000  3000 ; ENVIRONMENT:	KERNEL MODE, UNMAPPED, IPL=31
                                     0000  3100 ;
                                     0000  3200 ; AUTHOR: RICHARD I. HUSTVEDT	, CREATION DATE: 14-APR-78
                                     0000  3300 ;
                                     0000  3400 ; MODIFIED BY:
                                     0000  3500 ;
                                     0000  3600 ;  , VERSION  ,
                                     0000  3700 ; 01	- 
                                     0000  3800 ;--
                                     0000  3850 
                                     0000  3855 ;
                                     0000  3860 ; INCLUDE FILES:
                                     0000  3865 ;
                                     0000  3870 	$RPBDEF				; DEFINE RESTART PARAMETER BLOCK
BOOTIO          - BOOTSTRAP FILEREAD IO MODULE                   21-AUG-1978 22:26:54   VAX-11 MACRO X0.3-11               Page   2
X0100                                                                                                                            (1)

                                 00000000  4100 	.PSECT	BOOTIO
                                     0000  4200 
                                     0000  4300 	.SBTTL	RDWRTLBN - READ/WRITE LOGICAL BLOCK NUMBER
                                     0000  4400 ;++
                                     0000  4500 ; FUNCTIONAL DESCRIPTION:
                                     0000  4600 ;
                                     0000  4700 ;	THIS ROUTINE READS/WRITES A DATA BLOCK FROM/TO THE SPECIFIED 
                                     0000  4800 ; LOGICAL BLOCK NUMBER OF THE VOLUME ASSIGNED TO THE SPECIFIED CHANNEL
                                     0000  4900 ;
                                     0000  5000 ; CALLING SEQUENCE:
                                     0000  5100 ;
                                     0000  5200 ;	CALLG	ARGLIST,FIL$RDWRITLBN
                                     0000  5300 ;
                                     0000  5400 ; INPUT PARAMETERS:
                                     0000  5500 ;
                                     0000  5600 ;	CHAN(AP)	=		;CHANNEL ASSIGNED TO THE VOLUME TO READ
                                     0000  5700 ;	LBN(AP)		=		;LOGICAL BLOCK NUMBER TO READ
                                     0000  5800 ;	BUFADR(AP)	=		;ADDRESS OF BUFFER TO READ INTO
                                     0000  5900 ;	IOFUNC(AP)	=		;I/O FUNCTION CODE
                                     0000  6000 ;
                                     0000  6100 ; IMPLICIT INPUTS:
                                     0000  6200 ;
                                     0000  6300 ;	NONE
                                     0000  6400 ;
                                     0000  6500 ; OUTPUT PARAMETERS:
                                     0000  6600 ;
                                     0000  6700 ;	R0 = SYSTEM STATUS CODE
                                     0000  6800 ;
                                     0000  6900 ; IMPLICIT OUTPUTS:
                                     0000  7000 ;
                                     0000  7100 ;	NONE
                                     0000  7200 ;
                                     0000  7300 ; COMPLETION CODES:
                                     0000  7400 ;
                                     0000  7500 ;	NONE
                                     0000  7600 ;
                                     0000  7700 ; SIDE EFFECTS:
                                     0000  7800 ;
                                     0000  7900 ;	NONE
                                     0000  8000 ;
                                     0000  8100 ; EQUATED SYMBOLS:
                                     0000  8200 ;
                                     0000  8300 ;    OFFSETS FROM AP
                                     0000  8400 ;
                           00000004  0000  8500 	CHAN		=	4	;CHANNEL TO WHICH VOLUME IS ASSIGNED
                           00000008  0000  8600 	LBN		=	8	;LOGICAL BLOCK NUMBER
                           0000000C  0000  8700 	BUFADR		=	12	;BUFFER ADDRESS TO READ INTO
                           00000010  0000  8800 	IOFUNC		=	16	;FUNCTION CODE FOR THE QIO
                                     0000  8900 ;
                                     0000  9000 ;--
                                     0000  9100 
                                     0000  9200 FIL$RDWRTLBN::
                               0000  0000  9300 	.WORD	0
                       04 AC     DD  0002  9350 	PUSHL	CHAN(AP)		; ADDRESS OF RPB
            50            6E     D0  0005  9375 	MOVL	(SP),R0			; GET ADDRESS OF RPB
            50         34 A0     D0  0008  9387 	MOVL	RPB$L_IOVEC(R0),R0	; GET POINTER TO I/O ROUTINE VECTOR
                          00     DD  000C  9400 	PUSHL	#0			; SET MODE TO PHYSICAL ADDRESS
BOOTIO          - BOOTSTRAP FILEREAD IO MODULE                   21-AUG-1978 22:26:54   VAX-11 MACRO X0.3-11               Page   3
X0100           RDWRTLBN - READ/WRITE LOGICAL BLOCK NUMBER                                                                       (1)

                       10 AC     DD  000E  9500 	PUSHL	IOFUNC(AP)		; SET FUNCTION
                       08 AC     DD  0011  9600 	PUSHL	LBN(AP)			; LOGICAL BLOCK NUMBER
            01            09     9C  0014  9700 	ROTL	#9,#1,-(SP)		; SET SIZE TO 512 BYTES
                          7E         0017       
                       0C BC     DF  0018  9800 	PUSHAL	@BUFADR(AP)		; SET BUFFER ADDRESS
         00 B040          06     FB  001B  9900 	CALLS	#6,@(R0)[R0]		; CALL BOOTSTRAP DRIVER
                                 04  0020 10500 	RET
                                     0021 10600  
                                     0021 10700 	.END
BOOTIO          - BOOTSTRAP FILEREAD IO MODULE                   21-AUG-1978 22:26:54   VAX-11 MACRO X0.3-11               Page   4
SYMBOL TABLE                                                                                                                     (1)

BIT...         = 0000000B            
BUFADR         = 0000000C            
CHAN           = 00000004            
FIL$RDWRTLBN     00000000 RG    03   
GBL...         = 00000000            
IOFUNC         = 00000010            
LBN            = 00000008            
RPB$B_CONFREG    00000090            
RPB$B_DEVTYP     00000066            
RPB$B_HDRPGCNT   000000A0            
RPB$B_SLAVE      00000067            
RPB$C_LENGTH     000000BC            
RPB$K_LENGTH     000000BC            
RPB$L_ADPPHY     0000005C            
RPB$L_ADPVIR     00000060            
RPB$L_BASE       00000000            
RPB$L_BOOTR0     0000001C            
RPB$L_BOOTR1     00000020            
RPB$L_BOOTR2     00000024            
RPB$L_BOOTR3     00000028            
RPB$L_BOOTR4     0000002C            
RPB$L_BOOTR5     00000030            
RPB$L_CHKSUM     00000008            
RPB$L_CSRPHY     00000054            
RPB$L_CSRVIR     00000058            
RPB$L_FILLBN     0000003C            
RPB$L_FILSIZ     00000040            
RPB$L_HALTCODE   00000018            
RPB$L_HALTPC     00000010            
RPB$L_HALTPSL    00000014            
RPB$L_IOVEC      00000034            
RPB$L_IOVECSZ    00000038            
RPB$L_ISP        000000A4            
RPB$L_PCBB       000000A8            
RPB$L_PFNCNT     0000004C            
RPB$L_RESTART    00000004            
RPB$L_RSTRTFLG   0000000C            
RPB$L_SBR        000000AC            
RPB$L_SCBB       000000B0            
RPB$L_SISR       000000B4            
RPB$L_SLR        000000B8            
RPB$L_SVASPT     00000050            
RPB$Q_PFNMAP     00000044            
RPB$T_FILE       00000068            
RPB$V_BBLOCK   = 00000003            
RPB$V_BOOBPT   = 00000005            
RPB$V_CONV     = 00000000            
RPB$V_DEBUG    = 00000001            
RPB$V_DIAG     = 00000004            
RPB$V_HALT     = 00000009            
RPB$V_HEADER   = 00000006            
RPB$V_INIBPT   = 00000002            
RPB$V_NOPFND   = 0000000A            
RPB$V_NOTEST   = 00000007            
RPB$V_SOLICT   = 00000008            
RPB$W_UNIT       00000064            

BOOTIO          - BOOTSTRAP FILEREAD IO MODULE                   21-AUG-1978 22:26:54   VAX-11 MACRO X0.3-11               Page   5
PROGRAM SECTION SYNOPSIS                                                                                                         (1)


PROGRAM SECTION SYNOPSIS

.  ABS  .        00000000      00     NOPIC   USR   CON   ABS   LCL NOSHR NOEXE NORD  NOWRT BYTE  
. BLANK .        00000000      01     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
$ABS$            000000BC      02     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  
BOOTIO           00000021      03     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  


THERE WERE NO ERRORS OR WARNINGS.
24620. BYTES LEFT IN FREE MEMORY POOL.
1440. BYTES OF RECLAIMED MEMORY.
OBJ$:BOOTIO,LIS$:BOOTIO/-SP=EXECML$/ML,SRC$:BOOTIO
2 MLB DIR RDS - 165 GETS TO DEFINE 8 MACROS. 7 INTER. FILE WRITES. 
