CRFPREFIX                                                        22-AUG-1978 04:41:06   VAX-11 MACRO X0.3-11               Page   0
TABLE OF CONTENTS   

   (2)      41  DECLARATIONS
   (2)     182  DECLARATIONS
   (3)     203  SRCH_NODE 
SRCHNODE                                                         22-AUG-1978 04:41:06   VAX-11 MACRO X0.3-11               Page   1
X01.00          DECLARATIONS                                                                                                     (1)

                                     0000     1 	.TITLE	SRCHNODE
                                     0000     2 	.IDENT	/X01.00/
                                     0000     3 
                                     0000     4 ;
                                     0000     5 ; COPYRIGHT (C) 1977
                                     0000     6 ; DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASSACHUSETTS 01754
                                     0000     7 ;
                                     0000     8 ; THIS SOFTWARE IS FURNISHED  UNDER A LICENSE FOR USE ONLY ON A SINGLE
                                     0000     9 ; COMPUTER  SYSTEM AND  MAY BE  COPIED ONLY WITH  THE INCLUSION OF THE
                                     0000    10 ; ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE, OR ANY OTHER COPIES THEREOF,
                                     0000    11 ; MAY NOT BE PROVIDED OR  OTHERWISE MADE AVAILABLE TO ANY OTHER PERSON
                                     0000    12 ; EXCEPT FOR USE ON SUCH SYSTEM AND TO ONE WHO AGREES TO THESE LICENSE
                                     0000    13 ; TERMS.  TITLE TO AND  OWNERSHIP OF THE  SOFTWARE  SHALL AT ALL TIMES
                                     0000    14 ; REMAIN IN DEC.
                                     0000    15 ;
                                     0000    16 ; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE WITHOUT NOTICE
                                     0000    17 ; AND SHOULD  NOT BE CONSTRUED  AS A COMMITMENT  BY DIGITAL  EQUIPMENT
                                     0000    18 ; CORPORATION.
                                     0000    19 ;
                                     0000    20 ; DEC ASSUMES  NO  RESPONSIBILITY  FOR  THE USE OR  RELIABILITY OF ITS
                                     0000    21 ; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
                                     0000    22 ;
                                     0000    23 
                                     0000    24 ;++
                                     0000    25 ; FACILITY:  CROSS REFERENCE PROGRAM
                                     0000    26 ;
                                     0000    27 ; ABSTRACT:  THIS ROUTINE SEARCHES A NODE FOR A KEY AND RETURNS EITHER
                                     0000    28 ;		THE ENTRY ADDRESS, IF THE KEY IS FOUND, OR THE INSERTION
                                     0000    29 ;		ADDRESS IN THE NODE TO PLACE THE KEY.
                                     0000    30 ;
                                     0000    31 ;
                                     0000    32 ; ENVIRONMENT:  IT IS PART OF A LINKABLE IMAGE.
                                     0000    33 ;
                                     0000    34 ; AUTHOR:  K.D. MORSE, CREATION DATE:  28-APR-77
                                     0000    35 ;
                                     0000    36 ; MODIFIED BY:
                                     0000    37 ;
                                     0000    38 ;	, : VERSION
                                     0000    39 ; 01	- 
                                     0000    40 ;--
SRCHNODE                                                         22-AUG-1978 04:41:06   VAX-11 MACRO X0.3-11               Page   2
X01.00          DECLARATIONS                                                                                                     (2)

                                     0000    42 	.SBTTL	DECLARATIONS
                                     0000    43 ;
                                     0000    44 ; INCLUDE FILES:
                                     0000    45 ;
                                     0000    46 
                                     0000    47 ;
                                     0000    48 ; MACROS:
                                     0000    49 ;
                                     0000    50 
                                     0000    51 	$CRFDEF					; DEFINE CRF GLOBALS
                                     0000    52 
                                     0000    53 ;
                                     0000    54 ; EQUATED SYMBOLS:
                                     0000    55 ;
                                     0000    56 
                           00000020  0000    57 SPACE = 32.					; ASCII SPACE
                                     0000    58 ;
                                     0000    59 ; OWN STORAGE:
                                     0000    60 ;
                                     0000    61 
SRCHNODE                                                         22-AUG-1978 04:41:06   VAX-11 MACRO X0.3-11               Page   3
X01.00          SRCH_NODE                                                                                                        (3)

                                     0000    63 	.SBTTL	SRCH_NODE 
                                     0000    64 ;++
                                     0000    65 ; FUNCTIONAL DESCRIPTION:
                                     0000    66 ;
                                     0000    67 ;	THIS ROUTINE SEARCHES A NODE TO FIND THE INSERTION POINT FOR A
                                     0000    68 ;	GIVEN KEY.  IF THE KEY IS IN THE NODE, THE APPROPRIATE STATUS
                                     0000    69 ;	CODE IS SET AND THE ADDRESS OF THE ENTRY IS RETURNED.  IF THE
                                     0000    70 ;	KEY IS NOT IN THE NODE, THE ADDRESS OF ITS INSERTION POINT (I.E.,
                                     0000    71 ;	THE ADDRESS OF THE ENTRY IT WOULD REPLACE IF INSERTED) IS RETURNED
                                     0000    72 ;	ALONG WITH THE APPROPRIATE STATUS CODE.  IN EITHER CASE, THE 
                                     0000    73 ;	LINK-UP OF THE PREVIOUS ENTRY IS ALSO RETURNED.  IF THE KEY IS
                                     0000    74 ;	GREATER THAN ALL THE ENTRIES IN THE NODE, THE INSERTION POINT
                                     0000    75 ;	ADDRESS IS THAT OF THE DUMMY NODE ENTRY.
                                     0000    76 ;
                                     0000    77 ; CALLING SEQUENCE:
                                     0000    78 ;
                                     0000    79 ;	BSBW	SRCH_NODE
                                     0000    80 ;
                                     0000    81 ; INPUT PARAMETERS:
                                     0000    82 ;
                                     0000    83 ;	NONE
                                     0000    84 ;
                                     0000    85 ; IMPLICIT INPUTS:
                                     0000    86 ;
                                     0000    87 ;	R5 - CONTAINS THE ADDRESS OF THE KEY TO SEARCH FOR
                                     0000    88 ;	R6 - CONTAINS THE ADDRESS OF THE CRF CONTROL TABLE (TREE LISTHEAD)
                                     0000    89 ;	R7 - CONTAINS THE ADDRESS OF THE NODE TO SEARCH
                                     0000    90 ;
                                     0000    91 ; OUTPUT PARAMETERS:
                                     0000    92 ;
                                     0000    93 ;	NONE
                                     0000    94 ;
                                     0000    95 ; IMPLICIT OUTPUTS:
                                     0000    96 ;
                                     0000    97 ;	SUCCESS:
                                     0000    98 ;		R0 - CONTAINS A ONE, INDICATING KEY FOUND IN NODE
                                     0000    99 ;		R1 - CONTAINS THE ADDRESS OF THE ENTRY
                                     0000   100 ;		R2 - CONTAINS THE LINK-UP OF THE PREVIOUS ENTRY
                                     0000   101 ;	FAILURE:
                                     0000   102 ;		R0 - CONTAINS A ZERO, INDICATION KEY NOT IN NODE
                                     0000   103 ;		R1 - CONTAINS THE INSERTION POINT ADDRESS
                                     0000   104 ;		R2 - CONTAINS THE LINK-UP OF THE PREVIOUS ENTRY
                                     0000   105 ;
                                     0000   106 ; COMPLETION CODES:
                                     0000   107 ;
                                     0000   108 ;	CRF$_SUCCESS - SUCCESS, KEY FOUND IN NODE
                                     0000   109 ;	0 - INDICATES KEY NOT IN NODE
                                     0000   110 ;
                                     0000   111 ; SIDE EFFECTS:
                                     0000   112 ;
                                     0000   113 ;	NONE
                                     0000   114 ;
                                     0000   115 ;--
                                     0000   116 
                                     0000   117 
                                     0000   118 
                                 00000000   119 	.PSECT	CRF$CODE,RD,NOWRT,EXE,SHR,PIC
SRCHNODE                                                         22-AUG-1978 04:41:06   VAX-11 MACRO X0.3-11               Page   4
X01.00          SRCH_NODE                                                                                                        (3)

                                     0000   120 
                                     0000   121 SRCH_NODE::
                     0318 8F     BB  0000   122 	PUSHR	#^M<R3,R4,R8,R9>		; SAVE REGISTERS
            58            57     D0  0004   123 	MOVL	R7,R8				; GET FIRST ENTRY ADDR
                          7E     D4  0007   124 	CLRL	-(SP)				; ROOM FOR PREV LINK-UP
            59            55     D0  0009   125 	MOVL	R5,R9				; GET INSERT SYMBOL ADDR
            54            89     9A  000C   126 	MOVZBL	(R9)+,R4			; GET INSERT SYMBOL LENGTH
            6E         04 A8     D0  000F   127 10$:	MOVL	KEY$L_LINKUP(R8),(SP)		; GET NEW PREV LINK-UP
            58            68     3C  0013   128 	MOVZWL	KEY$W_NEXT(R8),R8		; GET OFFSET TO NEXT ENTRY
            58            57     C0  0016   129 	ADDL2	R7,R8				; GET NEXT ENTRY ADDR
            51         08 A8     D0  0019   130 	MOVL	KEY$L_KEYADDR(R8),R1		; GET KEY ADDRESS
         08 A6         00'8F     91  001D   131 	CMPB	#CRF$K_ASCIC,CRF$B_KEYTYPE(R6)	; ASCII OR BINARY KEYS?
                          05     13  0022   132 	BEQL	15$				; BRANCH ON ASCII
            61            65     D1  0024   133 	CMPL	(R5),(R1)			; COMPARE BINARY KEYS
                          09     11  0027   134 	BRB	18$				; SKIP PAST ASCII COMPARE
            50            81     9A  0029   135 15$:	MOVZBL	(R1)+,R0			; GET KEY LENGTH
            69            54     2D  002C   136 	CMPC5	R4,(R9),#SPACE,R0,(R1)		; COMPARE SYMBOL TO KEY
            50            20         002F       
                          61         0031       
                          DB     1A  0032   137 18$:	BGTRU	10$				; BRANCH ON SYMBOL GREATER
                          0E     1F  0034   138 	BLSSU	20$				; BRANCH ON KEY GREATER
                                     0036   139 ;
                                     0036   140 ; FOUND SYMBOL IN NODE.
            57            58     D1  0036   141 	CMPL	R8,R7				; CHECK FOR KEY = DMY KEY
                          0B     13  0039   142 	BEQL	30$				; IF =, RETURN KEY NOT IN NODE
                                     003B   143 ;
            50   00658001 8F     D0  003B   144 	MOVL	#CRF$_SUCCESS,R0		; SET FOUND SYMBOL STATUS
                          02     11  0042   145 	BRB	30$				; SKIP OTHER STATUS CODES
                                     0044   146 ;
                                     0044   147 ; SYMBOL NOT IN NODE.  FOUND INSERTION POINT.
                                     0044   148 ;
                          50     D4  0044   149 20$:	CLRL	R0				; SET SYMBOL NOT IN NODE STATUS
            52            8E     D0  0046   150 30$:	MOVL	(SP)+,R2			; GET PREV LINK-UP
            51            58     D0  0049   151 	MOVL	R8,R1				; STORE ADDR OF ENTRY/INSRT PNT
                                     004C   152 _EXIT:
                     0318 8F     BA  004C   153 	POPR	#^M<R3,R4,R8,R9>		; RESTORE REGISTERS
                                 05  0050   154 	RSB					; RETURN
                                     0051   155 	.END
SRCHNODE                                                         22-AUG-1978 04:41:06   VAX-11 MACRO X0.3-11               Page   5
SYMBOL TABLE                                                                                                                     (3)

BIT...         = 006580AA            FLD$K_LENGTH   = 0000000C            
CRF$B_FLAGS      00000009            FLD$L_FAODSC   = 00000004            
CRF$B_IR_DEFIND  00000014            FLD$W_MASK     = 00000000            
CRF$B_KEYTYPE    00000008            GBL...         = 00000000            
CRF$B_OU_PAG1    0000000C            HIS$K_ENTRYSIZE= 00000010            
CRF$B_OU_PRTIND  00000014            HIS$K_LISTSIZE = 00000070            
CRF$B_OU_SAVIND  00000018            HIS$L_FATHER   = FFFFFFF0            
CRF$B_OU_SUCPAG  00000010            HIS$L_FATHROFF = FFFFFFF4            
CRF$K_ASCIC      ********   X   03   HIS$L_LEFTBRO  = FFFFFFF8            
CRF$K_FACILCOD = 00000065            HIS$L_LEFTSON  = 00000008            
CRF$L_ERROR      0000000C            HIS$L_LINKUP   = 00000008            
CRF$L_IK_CTLTBL  00000004            HIS$L_LINKUPOFF= 0000000C            
CRF$L_IK_KEYADR  00000008            HIS$L_NODE     = 00000000            
CRF$L_IK_VALADR  0000000C            HIS$L_NTH      = 0000000C            
CRF$L_IR_CTLTBL  00000004            HIS$L_OFFSET   = 00000004            
CRF$L_IR_KEYADR  00000008            HIS$L_RIGHTBRO = FFFFFFFC            
CRF$L_IR_REFADR  0000000C            HIS$L_RIGHTSON = 0000000C            
CRF$L_K1FMTBL    00000014            HIS$L_TOP      = 00000004            
CRF$L_K2FMTBL    00000018            KEY$B_DEFLNG   = 00000018            
CRF$L_OUTPUT     00000010            KEY$K_DATASIZE = 0000001C            
CRF$L_OU_CTLTBL  00000004            KEY$K_SIZE     = 00000028            
CRF$L_OU_LINWID  00000008            KEY$L_DATA     = 0000000C            
CRF$L_R1FMTBL    00000024            KEY$L_KEYADDR  = 00000008            
CRF$L_R2FMTBL    00000028            KEY$L_LINKUP   = 00000004            
CRF$L_ROOT       00000000            KEY$L_REFLIST  = 00000010            
CRF$L_V1FMTBL    0000001C            KEY$L_VALADDR  = 0000000C            
CRF$L_V2FMTBL    00000020            KEY$T_DEFNAME  = 00000019            
CRF$W_ENTSIZE    00000004            KEY$W_DEFFLAG  = 00000016            
CRF$W_ERRSTS     0000000A            KEY$W_NEXT     = 00000000            
CRF$W_IK_VALFLG  00000010            KEY$W_PREV     = 00000002            
CRF$W_IR_REFLAG  00000010            KEY$W_VALFLAG  = 00000014            
CRF$W_NODSIZE    00000006            NOD$K_1STFREE  = 00000010            
CRF$_BLDNODFAIL= 00658052            NOD$K_NUMFREE  = 0000000C            
CRF$_BLKWTHINBL= 00658072            NOD$K_SIZE     = 000001F0            
CRF$_EXPREGFAIL= 0065806A            REF$B_REFLNG   = 00000006            
CRF$_FAILINSRT = 0065807A            REF$K_SIZE     = 00000016            
CRF$_FAOFAIL   = 0065809A            REF$L_FLINK    = 00000000            
CRF$_FOUNDKEY  = 00658021            REF$T_REFNAME  = 00000007            
CRF$_HISTOVRFLO= 00658062            REF$W_REFFLAG  = 00000004            
CRF$_ILLBLKSIZE= 00658082            SPACE          = 00000020            
CRF$_KEY1STENTR= 00658011            SRCH_NODE        00000000 RG    03   
CRF$_KEYPRVENTR= 00658009            _EXIT            0000004C R     03   
CRF$_KEYTYPE   = 006580A2            
CRF$_LINELNG   = 00658092            
CRF$_NO_OUTRTN = 0065808A            
CRF$_REFLNG    = 0065805A            
CRF$_REFPRVENTR= 00658019            
CRF$_SUCCESS   = 00658001            
DMY$K_SIZE     = 00000010            
DMY$L_KEYADDR  = 00000008            
DMY$L_LINKUP   = 00000004            
DMY$W_1STFREE  = 0000000E            
DMY$W_FIRST    = 00000000            
DMY$W_LAST     = 00000002            
DMY$W_NUMFREE  = 0000000C            
FLD$B_MAXLNG   = 00000003            
FLD$B_SET_CLR  = 00000002            
SRCHNODE                                                         22-AUG-1978 04:41:06   VAX-11 MACRO X0.3-11               Page   6
PROGRAM SECTION SYNOPSIS                                                                                                         (3)



PROGRAM SECTION SYNOPSIS

.  ABS  .        00000000      00     NOPIC   USR   CON   ABS   LCL NOSHR NOEXE NORD  NOWRT BYTE  
. BLANK .        00000000      01     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
$ABS$            0000002C      02     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  
CRF$CODE         00000051      03       PIC   USR   CON   REL   LCL   SHR   EXE   RD  NOWRT BYTE  


THERE WERE NO ERRORS OR WARNINGS.
23568. BYTES LEFT IN FREE MEMORY POOL.
1498. BYTES OF RECLAIMED MEMORY.
OBJ$:SRCHNODE,LIS$:SRCHNODE/-SP=LIB$:CRF/ML,SRC$:CRFPREFIX,SRCHNODE
16 MLB DIR RDS - 149 GETS TO DEFINE 8 MACROS. 7 INTER. FILE WRITES. 
