RSRCH	MACRO M1110  22-AUG-78 01:58  PAGE 2


      1						.TITLE	RSRCH
      2						.IDENT	/01/                                                            ;**NEW**
      3					                                                                                ;**-1
      4					;
      5					; COPYRIGHT   1974,  DIGITAL  EQUIPMENT  CORP.,  MAYNARD,   MASS.
      6					;
      7					; THIS SOFTWARE IS FURNISHED TO PURCHASER UNDER A LICENSE FOR USE
      8					; ON A  SINGLE COMPUTER SYSTEM AND CAN BE  COPIED (WITH INCLUSION
      9					; OF DEC'S COPYRIGHT  NOTICE) ONLY FOR USE IN SUCH SYSTEM, EXCEPT
     10					; AS MAY OTHERWISE BE PROVIDED IN WRITING BY DEC.
     11					;
     12					; THE  INFORMATION  IN THIS DOCUMENT IS SUBJECT TO CHANGE WITHOUT
     13					; NOTICE  AND  SHOULD NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL
     14					; EQUIPMENT CORPORATION.
     15					;
     16					; DEC  ASSUMES NO  RESPONSIBILITY  FOR  THE  USE  OR  RELIABILITY
     17					; OF  ITS  SOFTWARE ON  EQUIPMENT WHICH  IS  NOT SUPPLIED BY DEC.
     18					;
     19					; VERSION 00                                                                    ;**NEW**
     20					;                                                                               ;**-1
     21					; C. MONIA 19-APR-74                                                            ;**NEW**
     22					;                                                                               ;**NEW**
     23					; MODIFICATIONS:                                                                ;**NEW**
     24					;                                                                               ;**NEW**
     25					; NO.		DATE		PROGRAMMER                                      ;**NEW**
     26					; ---		----		----------                                      ;**NEW**
     27					;                                                                               ;**NEW**
     28					; 036		20-JAN-75	C. MONIA                                        ;**NEW**
     29					;                                                                               ;**NEW**
     30					;                                                                               ;**-1
     31					; REAL-MEMORY SEARCH AND INSERT PACKAGE
     32					;
     33					; EQUATED SYMBOLS                                                               ;**NEW**
     34					;                                                                               ;**NEW**
     35					; OFFSET TO KEY                                                                 ;**NEW**
     36					;                                                                               ;**NEW**
     37					                                                                                ;**NEW**
     38		000002 			SYM=000002			;                                               ;**NEW**
     39					                                                                                ;**NEW**
     40					;+
     41					; DATA STRUCTURES:
     42					;
     43					; EACH ITEM IN THE LIST IS ASSUMED TO HAVE THE FOLLOWING FORMAT:
     44					;
     45					;	ITEM:	.WORD	NEXT	; LINK TO NEXT (0=LAST)
     46					;		.WORD	VAL	; FIRST HALF OF KEY VALUE
     47					;		.WORD	VAL	; SECOND HALF OF KEY VALUE
     48					;		.WORD	DATA	; ANY DATA
     49					;		  .		;
     50					;		  .		;
     51					;		  .		;
     52					;		  .		;
     53					;		.WORD	DATA	; END OF ITEM
     54					;-
     55					;+
     56					; **-$ISYMR-INSERT ITEM IN LEXICALLY ORDERED LIST
     57					;
RSRCH	MACRO M1110  22-AUG-78 01:58  PAGE 2-1


     58					; INPUTS:
     59					;
     60					;	R0=LISTHEAD ADDRESS
     61					;	R1=ADDRESS OF ITEM TO BE INSERTED
     62					;
     63					; OUTPUTS:
     64					;
     65					;	NONE
     66					;
     67					; THIS ROUTINE IS CALLED TO INSERT AN ITEM IN A LIST WHOSE KEY VALUES ARE
     68					; IN LEXICAL ORDER.
     69					;-
     70
     71	000000				$ISYMR::			;
     72	000000	010002 				MOV	R0,R2		; SAVE ADDRESS OF CURRENT
     73	000002	011000 				MOV	(R0),R0		; GET NEXT ITEM
     74	000004	001411 				BEQ	10$		; IF EQ DONE
     75	000006	026061 	000002 	000002 		CMP	SYM(R0),SYM(R1) ; CHECK FIRST HALF OF KEY                       ;**NEW**
     76	000014	103771 				BLO	$ISYMR		; IF LO, GO AGAIN                               ;**-1
     77	000016	101004 				BHI	10$		; IF HI, FOUND PLACE TO INSERT
     78	000020	026061 	000004 	000004 		CMP	SYM+2(R0),SYM+2(R1) ; CHECK SECOND HALF OF KEY                  ;**NEW**
     79	000026	103764 				BLO	$ISYMR		; IF LO GO AGAIN                                ;**-1
     80	000030				10$:				;
     81	000030	010112 				MOV	R1,(R2)		; LINK NEW ITEM TO PREVIOUS
     82	000032	010011 				MOV	R0,(R1)		; LINK CURRENT TO NEW
     83	000034					RETURN			;
     84					;+
     85					; **-$SRCHR-SEARCH LIST IN REAL MEMORY FOR KEY VALUE
     86					;
     87					; INPUTS:
     88					;
     89					;	R0=LISTHEAD ADDRESS
     90					;	R1=ADDRESS OF CONTAINING KEY VALUE
     91					;
     92					; OUTPUTS:
     93					;
     94					;	C-CLEAR=KEY VALUE IN LIST
     95					;	R0=ADDRESS OF ITEM CONTAINING VALUE
     96					;
     97					;	C-SET=KEY VALUE NOT IN LIST
     98					;
     99					; THIS ROUTINE IS CALLED TO SEARCH A LIST AS DESCRIBED UNDER 'DATA STRUCTURES
    100					; FOR AN ITEM CONTAINING THE SPECIFIED KEY CONTAINED IN S$YM(R1), AND S$YM+2(R1)
    101					;-
    102
    103	000036				$SRCHR::			;
    104	000036	000261 				SEC			; ASSUME KEY NOT IN LIST
    105	000040	011000 				MOV	(R0),R0		; GET NEXT ITEM
    106	000042	001410 				BEQ	10$		; IF EQ NOT IN LIST
    107	000044	026061 	000002 	000002 		CMP	SYM(R0),SYM(R1)	; CHECK FIRST HALF OF KEY                       ;**NEW**
    108	000052	001371 				BNE	$SRCHR		; IF NE GO AGAIN                                ;**-1
    109	000054	026061 	000004 	000004 		CMP	SYM+2(R0),SYM+2(R1) ; CHECK SECOND HALF OF KEY                  ;**NEW**
    110	000062	001365 				BNE	$SRCHR		; IF NE GO AGAIN                                ;**-1
    111	000064				10$:				;
    112	000064					RETURN			;
    113
    114		000001 				.END
RSRCH	MACRO M1110  22-AUG-78 01:58  PAGE 2-2
SYMBOL TABLE

CR    = 000015   	HT    = 000011   	R$$11M= 000000   	SYM   = 000002   	$ISYMR  000000RG
FF    = 000014   	LF    = 000012   	SPA   = 000040   	VT    = 000013   	$SRCHR  000036RG

. ABS.	000000	   000
      	000066	   001
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  550 WORDS  ( 3 PAGES)
DYNAMIC MEMORY:  2772 WORDS  ( 10 PAGES)
ELAPSED TIME:  00:00:05
OBJ$:RSRCH,LIS$:RSRCH/-SP=SRC$:MACFLM,RSRCH
