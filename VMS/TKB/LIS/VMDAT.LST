MACFLM	MACRO M1110  22-AUG-78 02:01  PAGE 2


      1
      2
      3						.IF NDF	W$$KST
      4
      5						.TITLE	VMDAT
      6
      7						.IFF
      8
      9						.TITLE	VMDAS
     10
     11						.ENDC
     12
     13						.IDENT	/03/
     14
     15					;
     16					; COPYRIGHT   1974,  DIGITAL  EQUIPMENT  CORP.,  MAYNARD,   MASS.
     17					; COPYRIGHT   1975,  DIGITAL  EQUIPMENT  CORP.,  MAYNARD,   MASS.
     18					;
     19					; THIS SOFTWARE IS FURNISHED TO PURCHASER UNDER A LICENSE FOR USE
     20					; ON A  SINGLE COMPUTER SYSTEM AND CAN BE COPIED (WITH INCLUSION
     21					; OF DEC'S COPYRIGHT NOTICE) ONLY FOR USE IN SUCH SYSTEM, EXCEPT
     22					; AS MAY OTHERWISE BE PROVIDED IN WRITING BY DEC.
     23					;
     24					; THE  INFORMATION IN THIS DOCUMENT IS SUBJECT TO CHANGE WITHOUT
     25					; NOTICE AND  SHOULD NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL
     26					; EQUIPMENT CORPORATION.
     27					;
     28					; DEC  ASSUMES NO  RESPONSIBILITY  FOR  THE  USE  OR RELIABILITY
     29					; OF ITS  SOFTWARE ON  EQUIPMENT WHICH  IS NOT SUPPLIED BY DEC.
     30					;
     31					; VERSION 03
     32					;
     33					; C. MONIA 17-AUG-74
     34					;
     35					; TABLES AND DEFINITIONS FOR VIRTUAL MEMORY ROUTINES
     36					;
     37					; MODIFICATIONS:
     38					;
     39					; NO.		DATE		PROGRAMMER
     40					; ---		----		----------
     41					;
     42					; 043		28-OCT-75	C. MONIA
     43					; 065		30-JUL-76	C. MONIA
     44					;
     45					;
     46					; MACRO LIBRARY CALLS
     47					;
     48
     49						.MCALL	FCSBT$,FDAT$A,FDBDF$,FDOP$A,FDRC$A
     50
     51					;
     52					; EQUATED SYMBOLS
     53					;
     54					;
     55					; DEFINE PAGE BUFFER OFFSETS
     56					;
     57
VMDAT	MACRO M1110  22-AUG-78 02:01  PAGE 2-1


     58	000000					.PSECT	$$VMDF,ABS
     59
     60	000000				P$GNXT::.BLKW	1		; LINK TO NEXT PAGE
     61	000002				P$GBLK::.BLKB	1		; PAGE RELATIVE BLOCK NUMBER
     62	000003				P$GSTS::.BLKB	1		; PAGE STATUS BYTE
     63	000004				P$GTIM::.BLKW	1		; 'TIME' OF LAST REFERENCE
     64	000006				P$GLOK::.BLKB	1		; PAGE LOCK COUNT
     65
     66						.EVEN
     67
     68	000010				P$GHD::				; SIZE OF PAGE HEADER
     69
     70	000010					.BLKW	256.
     71
     72	001010				P$GSIZ::			; SIZE OF PAGE
     73
     74
     75					;
     76					; PAGE STATUS BITS
     77					;
     78
     79		000001 			PG$WRT==000001			; PAGE WRITTEN INTO (1=YES)
     80
     81	000000					.PSECT
     82
     83					;
     84					; GLOBAL DATA
     85					;
     86					; NEXT AVAILABLE VIRTUAL ADDRESS
     87					;
     88
     89	000000				$HGVAD::.BLKW	1		;
     90
     91					;
     92					; POINTER TO RESIDENT PAGE LIST
     93					;
     94
     95	000002				$PAGLS::.BLKW	1		;
     96
     97					;
     98					; RESIDENT PAGE LISTHEAD
     99					;
    100
    101	000004				$PAGHD::.BLKW	1		;
    102
    103					;
    104					; PAGE BUFFER TIME OF LAST USE
    105					;
    106
    107	000006				$TIME::	.BLKW	1		;
    108
    109						.IF DF	W$$KST
    110
    111					;
    112					; TOP OF TASK R/W VIRTUAL MEMORY
    113					;
    114
VMDAT	MACRO M1110  22-AUG-78 02:01  PAGE 2-2


    115					$TPADR::.BLKW	1		;
    116
    117					;
    118					; WORKFILE ACCESS COUNTS (ADJACENCY REQUIRED)
    119					;
    120					; TOTAL NUMBER OF WORKFILE ACCESSES
    121					;
    122
    123					$WRKAC::.BLKW	2		;
    124
    125					;
    126					; WORK FILE READ COUNT
    127					;
    128
    129					$WRKRD::.BLKW	2		;
    130
    131					;
    132					; WORK FILE WRITE COUNT
    133					;
    134
    135					$WRKWR::.BLKW	2		;
    136
    137						.ENDC
    138
    139					;
    140					; WORK FILE FDB
    141					;
    142
    143	000010	000012'			$WRKPT::.WORD	WRKPT		; ADDRESS OF FDB
    144
    145	000012				WRKPT:	FDBDF$			; ALLOCATE SPACE FOR FDB
    146	000152					FCSBT$			; DEFINE FCS BITS
    147	000152					FDAT$A	R.FIX,,512.	; FIXED LENGTH, 512.BYTE RECORDS
    148	000152					FDRC$A	FD.RWM!FD.RAN	; READ/WRITE MODE, RANDOM ACCESS
    149	000152					FDOP$A	W$KLUN		; I/O VIA LUN DEFINED AT TASK BUILD TIME
    150
    151					;+
    152					;
    153					; **-VMDAT- DEFINE VIRTUAL MEMORY STORAGE PARAMETERS AND
    154					;	    TABLES
    155					;
    156					;	THIS MODULES CONTAINS ALL GLOBALLY REFERENCED
    157					; DEFINITIONS AND STORAGE FOR THE VIRTUAL MEMORY MANAGEMENT
    158					; SUBROUTINES.
    159					;
    160					;-
    161
    162		000001 				.END
VMDAT	MACRO M1110  22-AUG-78 02:01  PAGE 2-3
SYMBOL TABLE

CH.AND= 000001   	FD.RAH= 000001   	F.CHR = 000075   	F.SPUN= 000074   	P$GLOK  000006 G    002
CR    = 000015   	FD.RAN= 000002   	F.CNTG= 000034   	F.STBK= 000036   	P$GNXT  000000 G    002
FA.APD= 000100   	FD.REC= 000001   	F.DFNB= 000046   	F.UNIT= 000136   	P$GSIZ  001010 G    002
FA.CRE= 000010   	FD.RWM= 000001   	F.DSPT= 000044   	F.URBD= 000020   	P$GSTS  000003 G    002
FA.DLK= 001000   	FD.SDI= 000020   	F.DVNM= 000134   	F.VBN = 000064   	P$GTIM  000004 G    002
FA.ENB= 100000   	FD.SQD= 000040   	F.EFBK= 000010   	F.VBSZ= 000060   	R$$11M= 000000
FA.EXC= 002000   	FD.TTY= 000004   	F.EFN = 000050   	HT    = 000011   	R.FIX = 000001
FA.EXT= 000004   	FD.WBH= 000002   	F.EOBB= 000032   	LF    = 000012   	R.SEQ = 000003
FA.NSP= 000100   	FF    = 000014   	F.ERR = 000052   	NB.DEV= 000200   	R.VAR = 000002
FA.POS= 010000   	FF.CHR= 000005   	F.FACC= 000043   	NB.DIR= 000100   	SPA   = 000040
FA.RD = 000001   	FF.NV = 000003   	F.FFBY= 000014   	NB.NAM= 000004   	S.FATT= 000016
FA.RWD= 004000   	FF.POE= 000002   	F.FNAM= 000110   	NB.SD1= 000400   	S.FDB = 000140
FA.SEQ= 040000   	FF.RWD= 000001   	F.FNB = 000102   	NB.SD2= 001000   	S.FNAM= 000006
FA.SHR= 000040   	FF.RWF= 000006   	F.FTYP= 000116   	NB.SNM= 000040   	S.FNB = 000036
FA.TMP= 000020   	FF.SPC= 000004   	F.FVER= 000120   	NB.STP= 000020   	S.FNBW= 000017
FA.WCK= 020000   	FO.APD= 000106   	F.HIBK= 000004   	NB.SVR= 000010   	S.FNTY= 000004
FA.WRT= 000002   	FO.MFY= 000002   	F.LUN = 000042   	NB.TYP= 000002   	S.FTYP= 000002
FD.BLK= 000010   	FO.RD = 000001   	F.MBCT= 000054   	NB.VER= 000001   	S.NFEN= 000020
FD.CCL= 000002   	FO.UPD= 000006   	F.MBC1= 000055   	N.DID = 000024   	VT    = 000013
FD.COM= 020000   	FO.WRT= 000016   	F.MBFG= 000056   	N.DVNM= 000032   	WRKPT   000012R
FD.CR = 000002   	F.ACTL= 000076   	F.NRBD= 000024   	N.FID = 000000   	W$KLUN= ****** GX
FD.DIR= 000010   	F.ALOC= 000040   	F.NREC= 000030   	N.FNAM= 000006   	$HGVAD  000000RG
FD.FTN= 000001   	F.BBFS= 000062   	F.OVBS= 000030   	N.FTYP= 000014   	$PAGHD  000004RG
FD.F11= 040000   	F.BDB = 000070   	F.RACC= 000016   	N.FVER= 000016   	$PAGLS  000002RG
FD.INS= 000010   	F.BGBC= 000057   	F.RATT= 000001   	N.NEXT= 000022   	$TIME   000006RG
FD.ISP= 002000   	F.BKDN= 000026   	F.RCNM= 000034   	N.STAT= 000020   	$WRKPT  000010RG
FD.MNT= 100000   	F.BKDS= 000020   	F.RCTL= 000017   	N.UNIT= 000034   	...GBL= 000000
FD.OSP= 004000   	F.BKEF= 000050   	F.RSIZ= 000002   	PG$WRT= 000001 G 	...PC1= 000012R
FD.PLC= 000004   	F.BKP1= 000051   	F.RTYP= 000000   	P$GBLK  000002 G    002	...PC2= 000152R
FD.PRN= 000004   	F.BKST= 000024   	F.SEQN= 000100   	P$GHD   000010 G    002	...TPC= 000140
FD.PSE= 010000   	F.BKVB= 000064   	F.SPDV= 000072

. ABS.	000000	   000
      	000152	   001
$$VMDF	001010	   002
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  3277 WORDS  ( 13 PAGES)
DYNAMIC MEMORY:  3828 WORDS  ( 14 PAGES)
ELAPSED TIME:  00:00:17
OBJ$:VMDAT,LIS$:VMDAT/-SP=SRC$:MACFLM,VMDAT
