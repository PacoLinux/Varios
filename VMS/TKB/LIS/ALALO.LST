ALALO	MACRO M1110  22-AUG-78 01:38  PAGE 2


      1						.TITLE	ALALO
      2						.IDENT	/07/
      3					                                                                                ;**-1
      4					;
      5					; COPYRIGHT   1976,  DIGITAL  EQUIPMENT  CORP.,  MAYNARD,   MASS.
      6					;                                                                               ;**-1
      7					; THIS SOFTWARE IS FURNISHED TO PURCHASER UNDER A LICENSE FOR USE
      8					; ON A  SINGLE COMPUTER SYSTEM AND CAN BE  COPIED (WITH INCLUSION
      9					; OF DEC'S COPYRIGHT  NOTICE) ONLY FOR USE IN SUCH SYSTEM, EXCEPT
     10					; AS MAY OTHERWISE BE PROVIDED IN WRITING BY DEC.
     11					;
     12					; THE  INFORMATION  IN THIS DOCUMENT IS SUBJECT TO CHANGE WITHOUT
     13					; NOTICE  AND  SHOULD NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL
     14					; EQUIPMENT CORPORATION.
     15					;
     16					; DEC  ASSUMES NO  RESPONSIBILITY  FOR  THE  USE  OR  RELIABILITY
     17					; OF  ITS  SOFTWARE ON  EQUIPMENT WHICH  IS  NOT SUPPLIED BY DEC.
     18					;
     19					; VERSION 07
     20					;                                                                               ;**-1
     21					; D. N. CUTLER/C. MONIA 17-MAR-74
     22					;                                                                               ;**NEW**
     23					; MODIFICATIONS:                                                                ;**NEW**
     24					;                                                                               ;**NEW**
     25					; NO.		DATE		PROGRAMMER                                      ;**NEW**
     26					; ---		----		----------                                      ;**NEW**
     27					;                                                                               ;**NEW**
     28					; 036		16-JAN-75	C. MONIA                                        ;**NEW**
     29					; 048		09-FEB-76	C. MONIA
     30					;                                                                               ;**NEW**
     31					; AUTOLOAD VECTOR ALLOCATION                                                    ;**NEW**
     32					;                                                                               ;**NEW**
     33					;
     34					;+
     35					; **-$ALALO-AUTOLOAD VECTOR ALLOCATION
     36					;
     37					; THIS ROUTINE IS CALLED IN PHASE 4 TO ASSIGN ADDRESSES TO
     38					; ALL AUTOLOAD VECTORS.
     39					;
     40					; INPUTS:
     41					;
     42					;	NONE.
     43					;
     44					; OUTPUTS:
     45					;
     46					;	ALL AUTOLOAD VECTORS ARE ASSIGNED ABSOLUTE ADDRESSES.
     47					;-
     48
     49	000000	022767 	000001 	000000G	$ALALO::CMP	#1,$NUMSG	;ONLY ONE SEGMENT?
     50	000006	001404 				BEQ	10$		;IF EQ YES
     51	000010	012700 	000022'			MOV	#ALALO,R0	;GET PHASE CONTROL ROUTINE ADDRESS
     52	000014					CALL	$PCTRL		;CALL PHASE CONTROL ROUTINE
     53	000020				10$:	RETURN			;
     54
     55					;
     56					; AUTOLOAD VECTOR ALLOCATION
     57					;
ALALO	MACRO M1110  22-AUG-78 01:38  PAGE 2-1


     58					; THIS ROUTINE IS CALLED FOR EACH SEGMENT IN THE ALLOCATION.
     59					;
     60
     61	000022				ALALO:	SAVRG			;SAVE NONVOLITILE REGISTERS
     62	000026	016705 	000000G			MOV	$CRSEG,R5	;GET ADDRESS OF CURRENT SEGMENT
     63	000032	016504 	000000G			MOV	S$GAUT(R5),R4	; GET BASE ADDRESS OF AUTOLOAD VECTORS
     64	000036	016503 	000002G			MOV	S$GAUT+2(R5),R3	; GET ADDRESS OF AUTOLOAD SECTION
     65	000042	062705 	000000G			ADD	#S$GATL,R5	; POINT TO AUTOLOAD LISTHEAD
     66	000046	011505 			20$:	MOV	(R5),R5		;GET ADDRESS OF NEXT IN LIST
     67	000050	001001 				BNE	30$		;IF NE GOT ONE
     68	000052					RETURN			;
     69	000054				30$:				;
     70	000054	016501 	000002 			MOV	2(R5),R1	; GET VIRTUAL ADDRESS OF INDIRECT SYMBOL
     71	000060					CALL	$CVRL		; CONVERT TO REAL ADDRESS
     72	000064					CALL	$WRMPG		; WRITE MARK PAGE
     73	000070	016046 	000000G			MOV	S$YVAL(R0),-(SP) ; SAVE VIRTUAL ADDRESS OF REAL SYMBOL
     74	000074	152760 	000000C	000000G		BISB	#<SY$REL!SY$ATR>,S$YFLG(R0) ;++036 SET REL., AUTOLOAD REF. FLAGS;**NEW**
     75	000102	142760 	000000G	000000G		BICB	#SY$IND,S$YFLG(R0) ; CLEAR INDIRECT FLAG                        ;**-1
     76	000110	010460 	000000G			MOV	R4,S$YVAL(R0)	; SET SYMBOL VALUE
     77	000114	012665 	000002 			MOV	(SP)+,2(R5)	; SET AUTOLOAD LIST ENTRY TO REAL SYMBOL
     78	000120	010360 	000000G			MOV	R3,S$YCMT(R0)	; SET ADDRESS OF SECTION TABLE
     79	000124	062704 	000000G			ADD	#S$ZATL,R4	; POINT TO NEXT AUTOLOAD ENTRY POINT
     80	000130	000746 				BR	20$		; GO AGAIN
     81
     82		000001 				.END
ALALO	MACRO M1110  22-AUG-78 01:38  PAGE 2-2
SYMBOL TABLE

ALALO   000022R  	R$$11M= 000000   	S$GATL= ****** GX	S$ZATL= ****** GX	$NUMSG= ****** GX
CR    = 000015   	SPA   = 000040   	S$GAUT= ****** GX	VT    = 000013   	$PCTRL= ****** GX
FF    = 000014   	SY$ATR= ****** GX	S$YCMT= ****** GX	$ALALO  000000RG 	$SAVRG= ****** GX
HT    = 000011   	SY$IND= ****** GX	S$YFLG= ****** GX	$CRSEG= ****** GX	$WRMPG= ****** GX
LF    = 000012   	SY$REL= ****** GX	S$YVAL= ****** GX	$CVRL = ****** GX	$$    = 000001

. ABS.	000000	   000
      	000132	   001
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  670 WORDS  ( 3 PAGES)
DYNAMIC MEMORY:  2772 WORDS  ( 10 PAGES)
ELAPSED TIME:  00:00:06
OBJ$:ALALO,LIS$:ALALO/-SP=SRC$:MACFLM,ALALO
