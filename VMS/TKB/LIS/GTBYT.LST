GTBYT	MACRO M1110  22-AUG-78 01:42  PAGE 3


      1						.TITLE	GTBYT
      2						.IDENT	/04/                                                           ;**NEW**
      3					;                                                                               ;**NEW**
      4					; COPYRIGHT   1974,  DIGITAL  EQUIPMENT  CORP.,  MAYNARD,   MASS.               ;**NEW**
      5					;                                                                               ;**NEW**
      6					; THIS SOFTWARE IS FURNISHED TO PURCHASER UNDER A LICENSE FOR USE               ;**NEW**
      7					; ON A  SINGLE COMPUTER SYSTEM AND CAN BE  COPIED (WITH INCLUSION               ;**NEW**
      8					; OF DEC'S COPYRIGHT  NOTICE) ONLY FOR USE IN SUCH SYSTEM, EXCEPT               ;**NEW**
      9					; AS MAY OTHERWISE BE PROVIDED IN WRITING BY DEC.                               ;**NEW**
     10					;                                                                               ;**NEW**
     11					; THE  INFORMATION  IN THIS DOCUMENT IS SUBJECT TO CHANGE WITHOUT               ;**NEW**
     12					; NOTICE  AND  SHOULD NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL               ;**NEW**
     13					; EQUIPMENT CORPORATION.                                                        ;**NEW**
     14					;                                                                               ;**NEW**
     15					; DEC  ASSUMES NO  RESPONSIBILITY  FOR  THE  USE  OR  RELIABILITY               ;**NEW**
     16					; OF  ITS  SOFTWARE ON  EQUIPMENT WHICH  IS  NOT SUPPLIED BY DEC.               ;**NEW**
     17					;                                                                               ;**NEW**
     18					; VERSION 04                                                                   ;**NEW**
     19					;                                                                               ;**NEW**
     20					; D.N. CUTLER/C. MONIA	21-JAN-74                                               ;**NEW**
     21					;                                                                               ;**-13
     22					; ROUTINES TO GET BYTE/WORD FROM INPUT FILE
     23					;
     24					; MACRO LIBRARY CALLS
     25					;
     26
     27						.MCALL	GET$S,QIOSY$                                                    ;**NEW**
     28	000000					QIOSY$                                                                  ;**-1
     29
     30					;
     31					; LOCAL DATA
     32					;
     33
     34	000000				BYTEA:	.BLKW	1		;NEXT BYTE IN RECORD ADDRESS
     35	000002				$NBYTE::.BLKW	1		;NUMBER OF BYTES REMAINING IN RECORD
     36
     37					;+
     38					; **-$GTBYT-GET BYTE FROM INPUT FILE
     39					;
     40					; THIS ROUTINE IS CALLED TO GET THE NEXT BYTE FROM THE CURRENT INPUT
     41					; FILE ($INPPT). IF THERE ARE NO MORE BYTES IN THE CURRENT RECORD,
     42					; THEN THE NEXT RECORD IS READ AND THE LENGTH OF THAT RECORD IS RE-
     43					; TURNED TO THE CALLER. ELSE THE NEXT BYTE IS RETURNED TO THE CALLER.
     44					; THUS THE NORMAL USE OF THIS ROUTINE IS TO MAKE A CALL TO OBTAIN THE
     45					; BYTE COUNT AND THEN TO MAKE SUBSEQUENT CALLS TO OBTAIN EACH BYTE.
     46					; BEFORE THE FIRST CALL IS MADE FOR EACH FILE, $NBYTE MUST BE ZEROED
     47					; IN ORDER TO FORCE A READ.
     48					;
     49					; INPUTS:
     50					;
     51					;	$INPPT RECORD BLOCK.
     52					;
     53					; OUTPUTS:
     54					;
     55					;	C=1 IF EOF ENCOUNTERED.
     56					;	C=0 IF NEXT BYTE OR RECORD LENGTH IS OBTAINED.
     57					;		R0=NEXT BYTE OR RECORD LENGTH.
GTBYT	MACRO M1110  22-AUG-78 01:42  PAGE 3-1


     58					;-
     59
     60	000004	005367 	177772 		$GTBYT::DEC	$NBYTE		;ANY MORE BYTES?
     61	000010	002406 				BLT	10$		;IF LT NO
     62	000012	005000 				CLR	R0		;CLEAR R0 AND CARRY
     63	000014	157700 	177760 			BISB	@BYTEA,R0	;PICK UP NEXT BYTE
     64	000020	005267 	177754 			INC	BYTEA		;INCREMENT BYTE ADDRESS
     65	000024	000427 				BR	30$		;EXIT THROUGH COMMON POINT
     66	000026	016700 	000000G		10$:	MOV	$INPPT,R0	;GET INPUT FILE RECORD BLOCK
     67	000032					GET$S	R0		; GET NEXT RECORD                               ;**NEW**
     68	000036	103013 				BCC	20$		;IF CC OKAY                                     ;**-1
     69	000040	122760 	177766 	000052 		CMPB	#IE.EOF,F.ERR(R0);EOF?
     70	000046	000261 				SEC			;ASSUME EOF
     71	000050	001415 				BEQ	30$		;IF EQ YES
     72	000052	016002 	000000G			MOV	R$NAME(R0),R2	;GET ADDRESS OF NAME STRING
     73	000056	012701 				MOV	(PC)+,R1	;GET ERROR/SEVERITY
     74	000060	   000G	   000G			.BYTE	E$R10,S$V2	;FATAL
     75	000062					CALL	$ERMSG		;OUTPUT ERROR MESSAGE
     76	000066	016067 	000026 	177704 	20$:	MOV	F.NRBD+2(R0),BYTEA;SET ADDRESS OF NEXT BYTE
     77	000074	016000 	000024 			MOV	F.NRBD(R0),R0	;GET LENGTH OF RECORD
     78	000100	010067 	177676 			MOV	R0,$NBYTE	;SET NUMBER OF BYTES
     79	000104				30$:	RETURN			;
     80
     81					;+
     82					; **-$GTWRD-GET WORD FROM INPUT FILE
     83					;
     84					; THIS ROUTINE IS CALLED TO GET THE NEXT TWO BYTES FROM THE CURRENT
     85					; INPUT FILE ($INPPT). $GTBYT IS CALLED TWICE TO OBTAIN THE TWO BYTES
     86					; AND THE RESULTANT WORD IS RETURNED TO THE CALLER.
     87					;
     88					; INPUTS:
     89					;
     90					;	NONE.
     91					;
     92					; OUTPUTS:
     93					;
     94					;	R0=NEXT TWO BYTES FROM THE INPUT FILE.
     95					;-
     96
     97	000106				$GTWRD::CALL	$GTBYT		;GET FIRST BYTE
     98	000112	010046 				MOV	R0,-(SP)	;SAVE IT ON STACK
     99	000114					CALL	$GTBYT		;GET SECOND BYTE
    100	000120	000300 				SWAB	R0		;SWAP HALVES
    101	000122	052600 				BIS	(SP)+,R0	;MERGE BYTES
    102	000124					RETURN			;
    103
    104		000001 				.END
GTBYT	MACRO M1110  22-AUG-78 01:42  PAGE 3-2
SYMBOL TABLE

BYTEA   000000R  	F.ACTL= 000076   	IE.BBE= 177710   	IE.NBF= 177731   	IO.APV= 014010
B.BBFS= 000010   	F.ALOC= 000040   	IE.BCC= 177676   	IE.NBK= 177727   	IO.ATA= 001410
B.BFST= 000015   	F.BBFS= 000062   	IE.BDI= 177714   	IE.NDR= 177670   	IO.ATT= 001400
B.NXBD= 000012   	F.BDB = 000070   	IE.BDR= 177716   	IE.NFI= 177704   	IO.CAS= 015420
B.VBN = 000004   	F.BGBC= 000057   	IE.BDV= 177711   	IE.NFW= 177673   	IO.CBO= 015510
CH.AND= 000001   	F.BKDN= 000026   	IE.BHD= 177700   	IE.NLK= 177661   	IO.CCI= 014000
CR    = 000015   	F.BKDS= 000020   	IE.BLB= 177672   	IE.NLN= 177733   	IO.CCO= 000440
E$R10 = ****** GX	F.BKEF= 000050   	IE.BLK= 177754   	IE.NNC= 177663   	IO.CIN= 016500
FA.APD= 000100   	F.BKP1= 000051   	IE.BNM= 177712   	IE.NNL= 177662   	IO.CLK= 015000
FA.CRE= 000010   	F.BKST= 000024   	IE.BTF= 177664   	IE.NNN= 177674   	IO.CLN= 003400
FA.DLK= 001000   	F.BKVB= 000064   	IE.BTP= 177725   	IE.NOD= 177751   	IO.CNT= 017000
FA.ENB= 100000   	F.CHR = 000075   	IE.BVR= 177701   	IE.NSF= 177746   	IO.CON= 015400
FA.EXC= 002000   	F.CNTG= 000034   	IE.BYT= 177755   	IE.NST= 177660   	IO.CPR= 015410
FA.EXT= 000004   	F.DFNB= 000046   	IE.CKP= 177766   	IE.NSW= 177756   	IO.CPW= 016520
FA.NSP= 000100   	F.DSPT= 000044   	IE.CKS= 177742   	IE.NVR= 177652   	IO.CRC= 001040
FA.POS= 010000   	F.DVNM= 000134   	IE.CLO= 177732   	IE.NVW= 177651   	IO.CRE= 012000
FA.RD = 000001   	F.EFBK= 000010   	IE.CNR= 177667   	IE.OFL= 177677   	IO.CRJ= 015440
FA.RWD= 004000   	F.EFN = 000050   	IE.CON= 177752   	IE.ONP= 177773   	IO.CSI= 013000
FA.SEQ= 040000   	F.EOBB= 000032   	IE.DAA= 177770   	IE.OVR= 177756   	IO.CSM= 016470
FA.SHR= 000040   	F.ERR = 000052   	IE.DAO= 177763   	IE.PES= 177655   	IO.CTI= 015400
FA.TMP= 000020   	F.FACC= 000043   	IE.DFU= 177750   	IE.PNS= 177642   	IO.CTL= 016400
FA.WCK= 020000   	F.FFBY= 000014   	IE.DNA= 177771   	IE.PRI= 177760   	IO.CTR= 015610
FA.WRT= 000002   	F.FNAM= 000110   	IE.DNR= 177775   	IE.PTS= 177775   	IO.CTY= 003400
FD.BLK= 000010   	F.FNB = 000102   	IE.DUN= 177767   	IE.RAC= 177724   	IO.DAC= 010000
FD.CCL= 000002   	F.FTYP= 000116   	IE.DUP= 177707   	IE.RAT= 177723   	IO.DCI= 014400
FD.COM= 020000   	F.FVER= 000120   	IE.EOF= 177766   	IE.RBG= 177730   	IO.DEL= 012400
FD.CR = 000002   	F.HIBK= 000004   	IE.EOT= 177702   	IE.RBS= 177761   	IO.DET= 002000
FD.DIR= 000010   	F.LUN = 000042   	IE.EOV= 177765   	IE.RCN= 177722   	IO.DIS= 016000
FD.FTN= 000001   	F.MBCT= 000054   	IE.EXP= 177665   	IE.RER= 177740   	IO.DLB= 016540
FD.F11= 040000   	F.MBC1= 000055   	IE.FEX= 177717   	IE.RNM= 177715   	IO.DSI= 013400
FD.INS= 000010   	F.MBFG= 000056   	IE.FHE= 177705   	IE.RSU= 177757   	IO.DTI= 016000
FD.ISP= 002000   	F.NRBD= 000024   	IE.FIX= 177767   	IE.SDP= 177635   	IO.DTY= 006400
FD.MNT= 100000   	F.NREC= 000030   	IE.FLN= 177657   	IE.SNC= 177735   	IO.ENA= 006000
FD.OSP= 004000   	F.OVBS= 000030   	IE.FOP= 177713   	IE.SPC= 177772   	IO.EOF= 003000
FD.PLC= 000004   	F.RACC= 000016   	IE.HFU= 177744   	IE.SQC= 177734   	IO.EXT= 011400
FD.PRN= 000004   	F.RATT= 000001   	IE.HWR= 177772   	IE.SRE= 177762   	IO.FDX= 003020
FD.PSE= 010000   	F.RCNM= 000034   	IE.IBS= 177647   	IE.STK= 177706   	IO.FLN= 012400
FD.RAH= 000001   	F.RCTL= 000017   	IE.IDU= 177644   	IE.TCH= 177765   	IO.FNA= 004400
FD.RAN= 000002   	F.RSIZ= 000002   	IE.IEF= 177637   	IE.TMM= 177671   	IO.GLC= 016430
FD.REC= 000001   	F.RTYP= 000000   	IE.IES= 177656   	IE.TMO= 177666   	IO.GLI= 016420
FD.RWM= 000001   	F.SEQN= 000100   	IE.IFC= 177776   	IE.ULK= 177653   	IO.GNI= 016410
FD.SDI= 000020   	F.SPDV= 000072   	IE.IFU= 177747   	IE.ULN= 177773   	IO.GRC= 016450
FD.SQD= 000040   	F.SPUN= 000074   	IE.ILL= 177726   	IE.UNS= 177774   	IO.GRI= 016440
FD.TTY= 000004   	F.STBK= 000036   	IE.ILU= 177640   	IE.UPN= 177777   	IO.GRN= 016460
FD.WBH= 000002   	F.UNIT= 000136   	IE.ILV= 177755   	IE.VER= 177774   	IO.GTS= 002400
FF    = 000014   	F.URBD= 000020   	IE.INS= 177776   	IE.WAC= 177743   	IO.HDX= 003010
FF.CHR= 000005   	F.VBN = 000064   	IE.IOP= 177655   	IE.WAT= 177741   	IO.HIS= 015000
FF.NV = 000003   	F.VBSZ= 000060   	IE.IPR= 177641   	IE.WCK= 177652   	IO.HNG= 003000
FF.POE= 000002   	HT    = 000011   	IE.ISQ= 177703   	IE.WER= 177737   	IO.INI= 014400
FF.RWD= 000001   	IE.ABO= 177761   	IE.ITI= 177643   	IE.WLK= 177764   	IO.INL= 002400
FF.RWF= 000006   	IE.ACT= 177771   	IE.ITP= 177650   	IE.WOV= 177653   	IO.ITI= 017000
FF.SPC= 000004   	IE.ADP= 177636   	IE.ITS= 177770   	IE.2DV= 177720   	IO.KIL= 000012
FO.APD= 000106   	IE.ALC= 177654   	IE.IUI= 177645   	IO.ACE= 007400   	IO.LDI= 007000
FO.MFY= 000002   	IE.ALG= 177654   	IE.LCK= 177745   	IO.ACR= 006400   	IO.LED= 012000
FO.RD = 000001   	IE.ALN= 177736   	IE.LNL= 177646   	IO.ACW= 007000   	IO.LEI= 007410
FO.UPD= 000006   	IE.AST= 177660   	IE.MAP= 177657   	IO.ADS= 014000   	IO.LKE= 012000
FO.WRT= 000016   	IE.BAD= 177777   	IE.MOD= 177753   	IO.APC= 014000   	IO.LOD= 014000
GTBYT	MACRO M1110  22-AUG-78 01:42  PAGE 3-3
SYMBOL TABLE

IO.LOV= 001010   	IO.RNC= 001040   	IO.UDI= 011410   	IS.CR = 006401   	N.STAT= 000020
IO.LSI= 011000   	IO.RNE= 001020   	IO.UEI= 011450   	IS.EOT= 002001   	N.UNIT= 000034
IO.LTI= 007400   	IO.RNS= 001020   	IO.UER= 011440   	IS.ESC= 015401   	PAR$$$= 000000
IO.LTK= 000050   	IO.RPB= 001040   	IO.ULK= 005000   	IS.ESQ= 115401   	R$NAME= ****** GX
IO.LTY= 010000   	IO.RPR= 004400   	IO.UNL= 000042   	IS.PES= 100001   	R$$11M= 000000
IO.MAO= 003410   	IO.RST= 001001   	IO.USI= 011460   	IS.PND= 000000   	R.FIX = 000001
IO.MCS= 013400   	IO.RTC= 003400   	IO.UTI= 011420   	IS.RDD= 000002   	R.SEQ = 000003
IO.MDA= 016000   	IO.RTI= 016400   	IO.UTY= 011430   	IS.SET= 000002   	R.VAR = 000002
IO.MDI= 014400   	IO.RTK= 000060   	IO.WAL= 000410   	IS.SPD= 000002   	SPA   = 000040
IO.MDO= 015400   	IO.RTM= 001200   	IO.WAT= 013400   	IS.SUC= 000001   	S$V2  = ****** GX
IO.MLO= 006000   	IO.RVB= 010400   	IO.WBT= 000500   	IS.TAB= 004401   	S.BFHD= 000020
IO.MOD= 003000   	IO.RWD= 002400   	IO.WDD= 000444   	IS.TMO= 000002   	S.FATT= 000016
IO.MSO= 005000   	IO.RWU= 002540   	IO.WLB= 000400   	LF    = 000012   	S.FDB = 000140
IO.NLB= 016530   	IO.R1C= 002400   	IO.WLC= 000420   	NB.DEV= 000200   	S.FNAM= 000006
IO.NLK= 011400   	IO.SAO= 004000   	IO.WLS= 000410   	NB.DIR= 000100   	S.FNB = 000036
IO.ONL= 017400   	IO.SCS= 013000   	IO.WLT= 000410   	NB.NAM= 000004   	S.FNBW= 000017
IO.RAD= 010400   	IO.SDI= 013000   	IO.WLV= 000500   	NB.SD1= 000400   	S.FNTY= 000004
IO.RAL= 001010   	IO.SDO= 012400   	IO.WMS= 000420   	NB.SD2= 001000   	S.FTYP= 000002
IO.RAT= 013000   	IO.SEC= 002520   	IO.WNS= 000420   	NB.SNM= 000040   	S.NFEN= 000020
IO.RBC= 003000   	IO.SET= 000030   	IO.WPB= 000440   	NB.STP= 000020   	VT    = 000013
IO.RCI= 015000   	IO.SLO= 005400   	IO.WVB= 011000   	NB.SVR= 000010   	$ERMSG= ****** GX
IO.RCV= 015000   	IO.SMO= 002560   	IO.XMT= 014400   	NB.TYP= 000002   	$GTBYT  000004RG
IO.RDB= 001200   	IO.SPB= 002420   	IO.XNA= 014410   	NB.VER= 000001   	$GTWRD  000106RG
IO.RDD= 010010   	IO.SPF= 002440   	IQ.Q  = 000002   	N.DID = 000024   	$INPPT= ****** GX
IO.RDN= 000022   	IO.SPW= 016510   	IQ.S  = 000004   	N.DVNM= 000032   	$NBYTE  000002RG
IO.REL= 013400   	IO.SSO= 004400   	IQ.UMD= 000004   	N.FID = 000000   	$$    = 000001
IO.RHD= 001010   	IO.STA= 015400   	IQ.X  = 000001   	N.FNAM= 000006   	$$MSG = 000000
IO.RLB= 001000   	IO.STC= 002500   	IS.BV = 000005   	N.FTYP= 000014   	.GETSQ= ****** G
IO.RLV= 001100   	IO.STP= 016400   	IS.CC = 001401   	N.FVER= 000016   	...GBL= 000000
IO.RMT= 010020   	IO.SYN= 003040   	IS.CLR= 000000   	N.NEXT= 000022   	...TPC= 000140
IO.RNA= 005400   	IO.TRM= 002410

. ABS.	000000	   000
      	000126	   001
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  5021 WORDS  ( 20 PAGES)
DYNAMIC MEMORY:  5940 WORDS  ( 22 PAGES)
ELAPSED TIME:  00:00:37
OBJ$:GTBYT,LIS$:GTBYT/-SP=SRC$:MACFLM,FCSPR,GTBYT
