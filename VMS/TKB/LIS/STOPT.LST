STOPT	MACRO M1110  22-AUG-78 02:01  PAGE 2


      1						.TITLE	STOPT
      2						.IDENT	/00/
      3
      4					;
      5					; COPYRIGHT (C) 1976
      6					; DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
      7					;
      8					; THIS SOFTWARE IS FURNISHED UNDER A LICENSE FOR USE ONLY ON A
      9					; SINGLE COMPUTER SYSTEM AND MAY  BE  COPIED   ONLY  WITH  THE
     10					; INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE,  OR
     11					; ANY OTHER COPIES THEREOF, MAY NOT BE PROVIDED  OR  OTHERWISE
     12					; MADE AVAILABLE TO ANY OTHER PERSON   EXCEPT FOR  USE ON SUCH
     13					; SYSTEM AND TO ONE WHO AGREES TO THESE LICENSE  TERMS.  TITLE
     14					; TO AND OWNERSHIP OF THE SOFTWARE SHALL AT ALL  TIMES  REMAIN
     15					; IN DEC.
     16					;
     17					; THE INFORMATION IN THIS DOCUMENT IS SUBJECT TO CHANGE WITHOUT
     18					; NOTICE AND SHOULD NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL
     19					; EQUIPMENT CORPORATION.
     20					;
     21					; DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF
     22					; ITS SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
     23					;
     24					; VERSION 00
     25					;
     26					; C. MONIA 26-AUG-76
     27					;
     28					; SETUP FOR TASK BUILDER OPTION INPUT
     29					;
     30					; EQUATED SYMBOLS
     31					;
     32					; DEFAULTED PARAMETERS
     33
     34		000004 			DFAFL=4.			; DEFAULT NUMBER OF ACTIVE FILES
     35		000024 			DFPOL=20.			; DEFAULT POOL USAGE
     36		001000 			DFSTK=256.*2			; DEFAULT STACK SIZE
     37		000006 			DFUNT=6.			; DEFAULT NUMBER OF LOGICAL UNITS
     38
     39					;+
     40					; **-$STOPT-SETUP FOR TASK BUILDER OPTION INPUTS
     41					;
     42					; THIS SUBROUTINE IS CALLED TO PREPARE FOR OPTION INPUTS. THE DEFAULT
     43					; VALUE OF ALL OPTIONAL PARAMETERS IS ESTABLISHED.
     44					;
     45					; INPUTS:
     46					;
     47					;	NONE
     48					;
     49					; OUTPUTS:
     50					;
     51					;	THE DEFAULT VALUE OF ALL OPTIONS IS SETUP
     52					;
     53					; REGISTERS MODIFIED:
     54					;
     55					;	R0, R1 AND R2
     56					;
     57					;-
STOPT	MACRO M1110  22-AUG-78 02:01  PAGE 2-1


     58
     59	000000				$STOPT::		;
     60	000000	005000 				CLR	R0		;++041 SET FOR DEFAULT PARTITION
     61	000002					CALL	$GTPPR		;++041 GET NAME OF DEFAULT PARTITION
     62	000006	012767 	000004 	000000G		MOV	#DFAFL,$ACTFL	;SET DEFAULT ACTIVE FILES
     63	000014	005067 	000000G			CLR	$FSIZI		; CLEAR FILE SIZE INDICATOR                     ;**NEW**
     64	000020	012767 	000006 	000000G		MOV	#DFUNT,$NUNIT	;SET DEFAULT NUMBER OF UNITS
     65	000026	005067 	000000G			.IIF	DF	R$$11M, CLR	$HGHAD	; CLEAR ADDRESS LIMIT
     66	000032	005067 	000000G			CLR	$LBEXT		;++041 CLEAR TASK EXTENSION SIZE
     67	000036	005067 	000000G			CLR	$MEMFL		;++041 CLEAR MEMORY ALLOCATION FLAG
     68	000042	005067 	000000G			CLR	$MXASG		; CLEAR MAXIMUM ASSIGNED LUN                    ;**NEW**
     69	000046	005067 	000000G			CLR	$ODTSZ		;CLEAR SIZE OF ODT AND TASK VECTORS
     70	000052	005067 	000000G			CLR	$ODTV		;CLEAR ODT VECTOR SYMBOL
     71	000056	005067 	000000G			CLR	$OFFST		;CLEAR OFFSET BIAS
     72						.IIF  NDF  R$$11M, MOV	#DFPOL,$POOL	; SET DEFAULT POOL USEAGE
     73	000062	005067 	000000G			CLR	$PRIOR		;CLEAR PRIORITY
     74	000066	005067 	000000G			CLR	$TNAME		;CLEAR TASK NAME
     75	000072	005067 	000002G			CLR	$TNAME+2	;
     76	000076	005067 	000000G			.IIF 	DF	R$$11M,	CLR	$TSKSZ	; CLEAR VECTOR SIZE
     77	000102	005067 	000000G			CLR	$TSKV		;CLEAR TSK VECTOR SYMBOL
     78	000106	012767 	001000 	000000G		MOV	#DFSTK,$STACK	;SET DEFAULT STACK SIZE
     79	000114	016700 	000000G			MOV	.FSRPT,R0	;++40 GET ADDRESS OF FILE STORAGE REGION 2
     80	000120	016067 	000000G	000000G		MOV	A.DFUI(R0),$TKUIC ; SET TASK UIC
     81	000126	005067 	000000G			CLR	$PATHD		;INITIALIZE PATCH LISTHEAD
     82	000132	012767 	000000G	000002G		MOV	#$PATHD,$PATHD+2;LAST POINTS TO FIRST FOR EMPTY LIST
     83	000140	012700 	000000G			MOV	#$LBRHD,R0	; GET LIBRARY LISTHEAD ADDRESS
     84	000144	010001 				MOV	R0,R1		; COPY LISTHEAD ADDRESS
     85	000146	005020 				CLR	(R0)+		; CLEAR FIRST WORD OF LISTHEAD
     86	000150	010120 				MOV	R1,(R0)+	; LAST POINTS TO FIRST INITIALLY
     87	000152	005010 				CLR	(R0)		; CLEAR NUMBER OF ENTRIES
     88	000154	016701 	000000G			MOV	$TSKNM,R1	; GET V/A OF TASK FILE NAMEBLOCK
     89	000160					CALL	$CVRL		; CONVERT TO REAL ADDRESS
     90	000164	016067 	000000G	000000G		MOV	E$LSWT(R0),$TKSW ; SAVE TASK FILE SWITCHES
     91	000172	012767 	000077 	000000G		MOV	#77,$ADBND	; ASSUME NON-MAPPED SYSTEM, SET ADDRESS BOUND
     92	000200	012767 	157777 	000000G		MOV	#157777,$ADLIM	; SET HIGH ADDRESS LIMIT
     93	000206	032767 	000000G	000000G		BIT	#MP$SY,$SWTCH	; SYSTEM MAPPED?
     94	000214	001406 				BEQ	5$		; IF EQ NO
     95	000216	012767 	017777 	000000G		MOV	#17777,$ADBND	; SET 4K ADDRESS BOUND
     96	000224	012767 	177777 	000000G		MOV	#177777,$ADLIM	; SET 32K-1 HIGH ADDRESS LIMIT
     97					                                                                                ;**-1
     98					;
     99					; INITIALIZE LUN ASSIGNMENT LISTHEAD                                            ;**NEW**
    100					;                                                                               ;**-1
    101
    102	000232				5$:				;                                               ;**NEW**
    103	000232	012700 	000000G			MOV	#$LUNHD,R0	;GET ADDRESS OF ASSIGNMENT LISTHEAD
    104	000236	010001 				MOV	R0,R1		;COPY ADDRESS
    105	000240	005020 				CLR	(R0)+		;CLEAR LINK TO FIRST
    106	000242	010110 				MOV	R1,(R0)		;LAST POINTS TO FIRST INITIALLY
    107	000244					RETURN			;
    108
    109		000001 				.END
STOPT	MACRO M1110  22-AUG-78 02:01  PAGE 2-2
SYMBOL TABLE

A.DFUI= ****** GX	LF    = 000012   	$FSIZI= ****** GX	$ODTSZ= ****** GX	$TKSW = ****** GX
CR    = 000015   	MP$SY = ****** GX	$GTPPR= ****** GX	$ODTV = ****** GX	$TKUIC= ****** GX
DFAFL = 000004   	R$$11M= 000000   	$HGHAD= ****** GX	$OFFST= ****** GX	$TNAME= ****** GX
DFPOL = 000024   	SPA   = 000040   	$LBEXT= ****** GX	$PATHD= ****** GX	$TSKNM= ****** GX
DFSTK = 001000   	VT    = 000013   	$LBRHD= ****** GX	$PRIOR= ****** GX	$TSKSZ= ****** GX
DFUNT = 000006   	$ACTFL= ****** GX	$LUNHD= ****** GX	$STACK= ****** GX	$TSKV = ****** GX
E$LSWT= ****** GX	$ADBND= ****** GX	$MEMFL= ****** GX	$STOPT  000000RG 	$$    = 000001
FF    = 000014   	$ADLIM= ****** GX	$MXASG= ****** GX	$SWTCH= ****** GX	.FSRPT= ****** GX
HT    = 000011   	$CVRL = ****** GX	$NUNIT= ****** GX

. ABS.	000000	   000
      	000246	   001
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  735 WORDS  ( 3 PAGES)
DYNAMIC MEMORY:  2772 WORDS  ( 10 PAGES)
ELAPSED TIME:  00:00:06
OBJ$:STOPT,LIS$:STOPT/-SP=SRC$:MACFLM,STOPT
