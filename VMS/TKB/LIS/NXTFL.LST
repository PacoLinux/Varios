NXTFL	MACRO M1110  22-AUG-78 01:49  PAGE 2


      1						.TITLE	NXTFL
      2						.IDENT	/05/                                                           ;**NEW**
      3					;                                                                               ;**-1
      4					; COPYRIGHT   1974,  DIGITAL  EQUIPMENT  CORP.,  MAYNARD,   MASS.
      5					;
      6					; THIS SOFTWARE IS FURNISHED TO PURCHASER UNDER A LICENSE FOR USE
      7					; ON A  SINGLE COMPUTER SYSTEM AND CAN BE  COPIED (WITH INCLUSION
      8					; OF DEC'S COPYRIGHT  NOTICE) ONLY FOR USE IN SUCH SYSTEM, EXCEPT
      9					; AS MAY OTHERWISE BE PROVIDED IN WRITING BY DEC.
     10					;
     11					; THE  INFORMATION  IN THIS DOCUMENT IS SUBJECT TO CHANGE WITHOUT
     12					; NOTICE  AND  SHOULD NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL
     13					; EQUIPMENT CORPORATION.
     14					;
     15					; DEC  ASSUMES NO  RESPONSIBILITY  FOR  THE  USE  OR  RELIABILITY
     16					; OF  ITS  SOFTWARE ON  EQUIPMENT WHICH  IS  NOT SUPPLIED BY DEC.
     17					;
     18					; VERSION 05                                                                   ;**NEW**
     19					;                                                                               ;**-2
     20					; D. N. CUTLER/C. MONIA	21-JAN-74
     21					;+
     22					; **-$NXTFL-GET NEXT INPUT FILE
     23					;
     24					; THIS ROUTINE IS CALLED TO GET THE NEXT INPUT FILE SPECIFICATION AND
     25					; PLACE IT IN THE OBJECT FILE RECORD BLOCK. IF $MRFLG IS NONZERO, THEN
     26					; THE SCANNING ROUTINE IS CALLED IMMEDIATELY. ELSE THE NEXT COMMAND IN-
     27					; PUT LINE IS READ AND THEN THE SCANNING ROUTINE IS CALLED.
     28					;
     29					; INPUTS:
     30					;
     31					;	R5=ADDRESS OF TEMP BUFFER.
     32					;
     33					; OUTPUTS:
     34					;
     35					;	C=1 IS COMMAND INPUT IS FINISHED.
     36					;	C=0 IF NEXT INPUT FILE HAS BEEN OBTAINED.
     37					;-
     38
     39	000000	005767 	000000G		$NXTFL::TST	$MRFLG		;ANY MORE FILES?
     40	000004	001412 				BEQ	10$		;IF EQ YES
     41	000006				5$:	CALL	$GTCML		;GET NEXT COMMAND INPUT LINE
     42	000012	103432 				BCS	20$		;IF CS LOGICAL EOF
     43	000014	010501 				MOV	R5,R1		;GET ADDRESS OF TEMP BUFFER
     44	000016					CALL	$SYNTX$		;ANALYZE SYNTAX
     45	000022	103766 				BCS	$NXTFL		;IF CS SYNTAX ERROR
     46	000024	012767 	000000G	000000G		MOV	#$SCANO,$SCANR	;SET ADDRESS OF SCANNING ROUTINE
     47	000032				10$:				;                                               ;**NEW**
     48	000032					CALL	$CLRMN		; INITIALIZE LIBRARY MODULE NAME LIST           ;**NEW**
     49	000036	016700 	000000G			MOV	$INIPT,R0	; GET RECORD BLOCK ADDRESS                      ;**NEW**
     50	000042	010501 				MOV	R5,R1		;GET ADDRESS OF TEMP BUFFER                     ;**-1
     51	000044					CALL	@$SCANR		;CALL SCANNING ROUTINE
     52	000050	010067 	000000G			MOV	R0,$MRFLG	;SAVE MORE FILES FLAG
     53	000054	103751 				BCS	$NXTFL		;IF CS BYPASS NULL FILE
     54	000056					CALL	$BLMNT		; BUILD MODULE NAME LIST                        ;**NEW**
     55	000062	103006 				BCC	20$		; IF C/C OK                                     ;**NEW**
     56	000064	012702 	000000G			MOV	#$LNDES,R2	; GET ADDRESS OF COMMAND LINE BUFFER            ;**NEW**
     57	000070	012701 	000000C			MOV	#<S$V2*400!E$R78>,R1 ; GET ERROR/SEVERITY                       ;**NEW**
NXTFL	MACRO M1110  22-AUG-78 01:49  PAGE 2-1


     58	000074					CALL	$ERMSG		; FATAL, NORETURN                               ;**NEW**
     59	000100				20$:	RETURN			;
     60
     61		000001 				.END
NXTFL	MACRO M1110  22-AUG-78 01:49  PAGE 2-2
SYMBOL TABLE

CR    = 000015   	R$$11M= 000000   	$BLMNT= ****** GX	$INIPT= ****** GX	$SCANO= ****** GX
E$R78 = ****** GX	SPA   = 000040   	$CLRMN= ****** GX	$LNDES= ****** GX	$SCANR= ****** GX
FF    = 000014   	S$V2  = ****** GX	$ERMSG= ****** GX	$MRFLG= ****** GX	$SYNTX= ****** GX
HT    = 000011   	VT    = 000013   	$GTCML= ****** GX	$NXTFL  000000RG 	$$    = 000001
LF    = 000012

. ABS.	000000	   000
      	000102	   001
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  670 WORDS  ( 3 PAGES)
DYNAMIC MEMORY:  2772 WORDS  ( 10 PAGES)
ELAPSED TIME:  00:00:07
OBJ$:NXTFL,LIS$:NXTFL/-SP=SRC$:MACFLM,NXTFL
