PRFND	MACRO M1110  22-AUG-78 01:50  PAGE 3


      1						.TITLE	PRFND
      2						.IDENT	/02/                                                           ;**NEW**
      3					                                                                                ;**NEW**
      4					;                                                                               ;**NEW**
      5					; COPYRIGHT   1974,  DIGITAL  EQUIPMENT  CORP.,  MAYNARD,   MASS.               ;**NEW**
      6					;                                                                               ;**NEW**
      7					; THIS SOFTWARE IS FURNISHED TO PURCHASER UNDER A LICENSE FOR USE               ;**NEW**
      8					; ON A  SINGLE COMPUTER SYSTEM AND CAN BE  COPIED (WITH INCLUSION               ;**NEW**
      9					; OF DEC'S COPYRIGHT  NOTICE) ONLY FOR USE IN SUCH SYSTEM, EXCEPT               ;**NEW**
     10					; AS MAY OTHERWISE BE PROVIDED IN WRITING BY DEC.                               ;**NEW**
     11					;                                                                               ;**NEW**
     12					; THE  INFORMATION  IN THIS DOCUMENT IS SUBJECT TO CHANGE WITHOUT               ;**NEW**
     13					; NOTICE  AND  SHOULD NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL               ;**NEW**
     14					; EQUIPMENT CORPORATION.                                                        ;**NEW**
     15					;                                                                               ;**NEW**
     16					; DEC  ASSUMES NO  RESPONSIBILITY  FOR  THE  USE  OR  RELIABILITY               ;**NEW**
     17					; OF  ITS  SOFTWARE ON  EQUIPMENT WHICH  IS  NOT SUPPLIED BY DEC.               ;**NEW**
     18					;                                                                               ;**NEW**
     19					;                                                                               ;**NEW**
     20					; VERSION 02                                                                   ;**NEW**
     21					;                                                                               ;**NEW**
     22					; D. N. CUTLER/C. MONIA	21-JAN-74                                               ;**NEW**
     23					;+                                                                              ;**-13
     24					; **-$PARSE-PARSE FILE NAME                                                     ;**NEW**
     25					; **-$PRFND-PARSE-FIND FILE
     26					;
     27					; THIS ROUTINE IS CALLED TO PARSE A DEVICE/FILE NAME STRING AND THEN
     28					; FIND THE FILE ON THE SPECIFIED DEVICE.
     29					;
     30					; INPUTS:
     31					;
     32					;	R0=ADDRESS OF RECORD BLOCK.
     33					;
     34					; OUTPUTS:
     35					;
     36					;	C=1 IF PARSE OR FIND FAILURE.
     37					;	C=0 IF NAME STRING SUCESSFULLY PARSED AND FILE IS FOUND.
     38					;
     39					;	IN EITHER CASE R0 IS RETURNED AS THE ADDRESS OF THE RECORD BLOCK.
     40					;-
     41
     42	000000				$PRFND::			;                                               ;**NEW**
     43	000000					SAVRG			; SAVE NON-VOLATILE REGISTERS                   ;**NEW**
     44	000004					CALL	PARSE		; PARSE FILE/DEVICE NAME STRING                 ;**NEW**
     45	000010	103402 				BCS	10$		; IF C/S LEAVE NOW                              ;**NEW**
     46	000012					CALL	.FIND		; ELSE FIND FILE                                ;**NEW**
     47	000016				10$:	RETURN			;                                               ;**NEW**
     48					                                                                                ;**NEW**
     49					;                                                                               ;**NEW**
     50					; PARSE FILE/DEVICE NAME STRING                                                 ;**NEW**
     51					;                                                                               ;**NEW**
     52					                                                                                ;**NEW**
     53	000020				$PARSE::			;                                               ;**NEW**
     54	000020					SAVRG			; SAVE NON-VOLATILE REGISTERS                   ;**NEW**
     55	000024				PARSE:				; REF. LABEL                                    ;**NEW**
     56	000024	010001 				MOV	R0,R1		; COPY RECORD BLOCK ADDRESS                     ;**NEW**
     57	000026	062701 	000102 			ADD	#F.FNB,R1	; POINT TO FILE NAME BLOCK                      ;**NEW**
PRFND	MACRO M1110  22-AUG-78 01:50  PAGE 3-1


     58	000032	016002 	000044 			MOV	F.DSPT(R0),R2	; GET DATA SET DESCRIPTOR ADDRESS               ;**NEW**
     59	000036	016003 	000046 			MOV	F.DFNB(R0),R3	; GET ADDRESS OF DEFAULT NAME                   ;**NEW**
     60	000042					CALLR	.PARSE		; PARSE FILE/DEVICE NAME STRING                 ;**NEW**
     61					                                                                                ;**-9
     62		000001 				.END
PRFND	MACRO M1110  22-AUG-78 01:50  PAGE 3-2
SYMBOL TABLE

B.BBFS= 000010   	FD.MNT= 100000   	F.BKDN= 000026   	F.RATT= 000001   	N.FTYP= 000014
B.BFST= 000015   	FD.OSP= 004000   	F.BKDS= 000020   	F.RCNM= 000034   	N.FVER= 000016
B.NXBD= 000012   	FD.PLC= 000004   	F.BKEF= 000050   	F.RCTL= 000017   	N.NEXT= 000022
B.VBN = 000004   	FD.PRN= 000004   	F.BKP1= 000051   	F.RSIZ= 000002   	N.STAT= 000020
CH.AND= 000001   	FD.PSE= 010000   	F.BKST= 000024   	F.RTYP= 000000   	N.UNIT= 000034
CR    = 000015   	FD.RAH= 000001   	F.BKVB= 000064   	F.SEQN= 000100   	PARSE   000024R
FA.APD= 000100   	FD.RAN= 000002   	F.CHR = 000075   	F.SPDV= 000072   	R$$11M= 000000
FA.CRE= 000010   	FD.REC= 000001   	F.CNTG= 000034   	F.SPUN= 000074   	R.FIX = 000001
FA.DLK= 001000   	FD.RWM= 000001   	F.DFNB= 000046   	F.STBK= 000036   	R.SEQ = 000003
FA.ENB= 100000   	FD.SDI= 000020   	F.DSPT= 000044   	F.UNIT= 000136   	R.VAR = 000002
FA.EXC= 002000   	FD.SQD= 000040   	F.DVNM= 000134   	F.URBD= 000020   	SPA   = 000040
FA.EXT= 000004   	FD.TTY= 000004   	F.EFBK= 000010   	F.VBN = 000064   	S.BFHD= 000020
FA.NSP= 000100   	FD.WBH= 000002   	F.EFN = 000050   	F.VBSZ= 000060   	S.FATT= 000016
FA.POS= 010000   	FF    = 000014   	F.EOBB= 000032   	HT    = 000011   	S.FDB = 000140
FA.RD = 000001   	FF.CHR= 000005   	F.ERR = 000052   	LF    = 000012   	S.FNAM= 000006
FA.RWD= 004000   	FF.NV = 000003   	F.FACC= 000043   	NB.DEV= 000200   	S.FNB = 000036
FA.SEQ= 040000   	FF.POE= 000002   	F.FFBY= 000014   	NB.DIR= 000100   	S.FNBW= 000017
FA.SHR= 000040   	FF.RWD= 000001   	F.FNAM= 000110   	NB.NAM= 000004   	S.FNTY= 000004
FA.TMP= 000020   	FF.RWF= 000006   	F.FNB = 000102   	NB.SD1= 000400   	S.FTYP= 000002
FA.WCK= 020000   	FF.SPC= 000004   	F.FTYP= 000116   	NB.SD2= 001000   	S.NFEN= 000020
FA.WRT= 000002   	FO.APD= 000106   	F.FVER= 000120   	NB.SNM= 000040   	VT    = 000013
FD.BLK= 000010   	FO.MFY= 000002   	F.HIBK= 000004   	NB.STP= 000020   	$PARSE  000020RG
FD.CCL= 000002   	FO.RD = 000001   	F.LUN = 000042   	NB.SVR= 000010   	$PRFND  000000RG
FD.COM= 020000   	FO.UPD= 000006   	F.MBCT= 000054   	NB.TYP= 000002   	$SAVRG= ****** GX
FD.CR = 000002   	FO.WRT= 000016   	F.MBC1= 000055   	NB.VER= 000001   	$$    = 000001
FD.DIR= 000010   	F.ACTL= 000076   	F.MBFG= 000056   	N.DID = 000024   	.FIND = ****** GX
FD.FTN= 000001   	F.ALOC= 000040   	F.NRBD= 000024   	N.DVNM= 000032   	.PARSE= ****** GX
FD.F11= 040000   	F.BBFS= 000062   	F.NREC= 000030   	N.FID = 000000   	...GBL= 000000
FD.INS= 000010   	F.BDB = 000070   	F.OVBS= 000030   	N.FNAM= 000006   	...TPC= 000140
FD.ISP= 002000   	F.BGBC= 000057   	F.RACC= 000016

. ABS.	000000	   000
      	000046	   001
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  2123 WORDS  ( 9 PAGES)
DYNAMIC MEMORY:  2772 WORDS  ( 10 PAGES)
ELAPSED TIME:  00:00:16
OBJ$:PRFND,LIS$:PRFND/-SP=SRC$:MACFLM,FCSPR,PRFND
