MRKPG	MACRO M1110  22-AUG-78 01:49  PAGE 2


      1						.TITLE	MRKPG
      2						.IDENT	/00/
      3
      4					;
      5					; COPYRIGHT   1974,  DIGITAL  EQUIPMENT  CORP.,  MAYNARD,   MASS.
      6					;
      7					; THIS SOFTWARE IS FURNISHED TO PURCHASER UNDER A LICENSE FOR USE
      8					; ON A  SINGLE COMPUTER SYSTEM AND CAN BE  COPIED (WITH INCLUSION
      9					; OF DEC'S COPYRIGHT  NOTICE) ONLY FOR USE IN SUCH SYSTEM, EXCEPT
     10					; AS MAY OTHERWISE BE PROVIDED IN WRITING BY DEC.
     11					;
     12					; THE  INFORMATION  IN THIS DOCUMENT IS SUBJECT TO CHANGE WITHOUT
     13					; NOTICE  AND  SHOULD NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL
     14					; EQUIPMENT CORPORATION.
     15					;
     16					; DEC  ASSUMES NO  RESPONSIBILITY  FOR  THE  USE  OR  RELIABILITY
     17					; OF  ITS  SOFTWARE ON  EQUIPMENT WHICH  IS  NOT SUPPLIED BY DEC.
     18					;
     19					; VERSION 00
     20					;
     21					; C. MONIA 22-FEB-74
     22					;
     23					; ROUTINES TO SET/CLEAR PAGE STATUS BITS
     24					;
     25					;+
     26					; **-$LCKPG-LOCK A PAGE IN MEMORY
     27					; **-$UNLPG-UNLOCK A PAGE FROM MEMORY
     28					; **-$WRMPG-MARK PAGE AS WRITTEN INTO
     29					;
     30					; INPUTS:
     31					;
     32					;	R1=VIRTUAL ADDRESS
     33					;
     34					; OUTPUTS:
     35					;
     36					;	C-CLEAR: PAGE WAS MARKED AS REQUESTED
     37					;
     38					;	C-SET: PAGE NOT RESIDENT
     39					;
     40					; ALL REGISTER CONTENTS ARE PRESERVED
     41					;-
     42
     43	000000				$LCKPG::			;
     44	000000					SAVVR			; SAVE VOLATILE REGISTERS
     45	000004					CALL	$FNDPG		; FIND SPECIFIED PAGE
     46	000010	103402 				BCS	10$		; IF C/S PAGE NOT IN MEMORY
     47	000012	105260 	000000G			INCB	P$GLOK(R0)	; INCREMENT LOCK COUNT
     48	000016				10$:				;
     49	000016					RETURN			;
     50
     51	000020				$UNLPG::			;
     52	000020					SAVVR			; SAVE VOLATILE REGISTERS
     53	000024					CALL	$FNDPG		; FIND SPECIFIED PAGE
     54	000030	103402 				BCS	10$		; IF C/S PAGE NOT IN MEMORY
     55	000032	105360 	000000G			DECB	P$GLOK(R0)	; DECREMENT LOCK COUNT
     56	000036				10$:				;
     57	000036					RETURN			;
MRKPG	MACRO M1110  22-AUG-78 01:49  PAGE 2-1


     58
     59	000040				$WRMPG::			;
     60	000040					SAVVR			;
     61	000044					CALL	$FNDPG		; FIND SPECIFIED PAGE
     62	000050	103403 				BCS	10$		; IF C/S NOT RESIDENT
     63	000052	152760 	000000G	000000G		BISB	#PG$WRT,P$GSTS(R0) ; WRITE-MARK PAGE
     64	000060				10$:				;
     65	000060					RETURN			;
     66
     67		000001 				.END
MRKPG	MACRO M1110  22-AUG-78 01:49  PAGE 2-2
SYMBOL TABLE

CR    = 000015   	PG$WRT= ****** GX	R$$11M= 000000   	$FNDPG= ****** GX	$UNLPG  000020RG
FF    = 000014   	P$GLOK= ****** GX	SPA   = 000040   	$LCKPG  000000RG 	$WRMPG  000040RG
HT    = 000011   	P$GSTS= ****** GX	VT    = 000013   	$SAVVR= ****** GX	$$    = 000001
LF    = 000012

. ABS.	000000	   000
      	000062	   001
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  600 WORDS  ( 3 PAGES)
DYNAMIC MEMORY:  2772 WORDS  ( 10 PAGES)
ELAPSED TIME:  00:00:06
OBJ$:MRKPG,LIS$:MRKPG/-SP=SRC$:MACFLM,MRKPG
