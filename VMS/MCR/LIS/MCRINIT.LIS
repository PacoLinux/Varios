MCRINIT         - MCR COMMAND INTERPRETER INITIALIZATION         22-AUG-1978 01:44:56   VAX-11 MACRO X0.3-11               Page   0
TABLE OF CONTENTS   

   (1)      42  COMMAND INTERPRETER START UP
MCRINIT         - MCR COMMAND INTERPRETER INITIALIZATION         22-AUG-1978 01:44:56   VAX-11 MACRO X0.3-11               Page   1
01                                                                                                                               (1)

                                     0000     1 	.TITLE	MCRINIT - MCR COMMAND INTERPRETER INITIALIZATION
                                     0000     2 	.IDENT	/01/
                                     0000     3 
                                     0000     4 ;
                                     0000     5 ; COPYRIGHT (C) 1977
                                     0000     6 ; DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASSACHUSETTS 01754
                                     0000     7 ;
                                     0000     8 ; THIS SOFTWARE IS FURNISHED  UNDER A LICENSE FOR USE ONLY ON A SINGLE
                                     0000     9 ; COMPUTER  SYSTEM AND  MAY BE  COPIED ONLY WITH  THE INCLUSION OF THE
                                     0000    10 ; ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE, OR ANY OTHER COPIES THEREOF,
                                     0000    11 ; MAY NOT BE PROVIDED OR  OTHERWISE MADE AVAILABLE TO ANY OTHER PERSON
                                     0000    12 ; EXCEPT FOR USE ON SUCH SYSTEM AND TO ONE WHO AGREES TO THESE LICENSE
                                     0000    13 ; TERMS.  TITLE TO AND  OWNERSHIP OF THE  SOFTWARE  SHALL AT ALL TIMES
                                     0000    14 ; REMAIN IN DEC.
                                     0000    15 ;
                                     0000    16 ; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE WITHOUT NOTICE
                                     0000    17 ; AND SHOULD  NOT BE CONSTRUED  AS A COMMITMENT  BY DIGITAL  EQUIPMENT
                                     0000    18 ; CORPORATION.
                                     0000    19 ;
                                     0000    20 ; DEC ASSUMES  NO  RESPONSIBILITY  FOR  THE USE OR  RELIABILITY OF ITS
                                     0000    21 ; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
                                     0000    22 ;
                                     0000    23 ; D. N. CUTLER 29-MAR-77
                                     0000    24 ;
                                     0000    25 ; DCLS COMMAND LANGUAGE INTERPRETER INITIALIZATION
                                     0000    26 ;
                                     0000    27 ; MACRO LIBRARY CALLS
                                     0000    28 ;
                                     0000    29  
                                     0000    30 	DEFCMDWRK			;DEFINE COMMAND WORK AREA OFFSETS
                                     0000    31 	DEFSYMTBL			;DEFINE SYMBOL ENTRY OFFSETS
                                     0000    32 	$PSLDEF				;DEFINE PROCESSOR STATUS FIELDS
                                     0000    33 
                                     0000    34 ;
                                     0000    35 ; LOCAL DATA
                                     0000    36 ;
                                     0000    37 ; RESERVED SYMBOL INITIALIZATION CHARACTER STRINGS
                                     0000    38 ;
                                     0000    39  
                                 00000000    40 	.PSECT	MCR$ZCODE,BYTE,RD,NOWRT
MCRINIT         - MCR COMMAND INTERPRETER INITIALIZATION         22-AUG-1978 01:44:56   VAX-11 MACRO X0.3-11               Page   2
01              COMMAND INTERPRETER START UP                                                                                     (1)

                                     0000    42 	.SBTTL	COMMAND INTERPRETER START UP
                                     0000    43 ;+
                                     0000    44 ; MCR$STARTUP - COMMAND INTERPRETER START UP
                                     0000    45 ;
                                     0000    46 ; THIS ENTRY POINT IS JUMPED TO AT THE CONCLUSION OF LOGGING A USER ONTO
                                     0000    47 ; THE SYSTEM. ALL INPUT AND OUTPUT FILES ARE OPEN AND THE COMMAND LANGUAGE
                                     0000    48 ; INDEPENDENT DATA AREA HAS BEEN INITIALIZED.
                                     0000    49 ;-
                                     0000    50  
                                 00000000    51 	.PSECT	MCR$$BASE,BYTE,RD,NOWRT
                                     0000    52 MCR$STARTUP::				;COMMAND INTERPRETER START UP
                     0000'CF     17  0000    53 	JMP	W^START			;TRANSFER TO START UP CODE
                                 00000000    54 	.PSECT	MCR$ZCODE,BYTE,RD,NOWRT
            5E   00000008'9F     D0  0000    55 START:	MOVL	@#CTL$AL_STACK+8,SP	;RELOAD SUPERVISOR STACK POINTER
                                     0007    56 	$RUNDWN_S #PSL$C_USER		;RUNDOWN LOGIN IMAGE
                          7E     D4  0010    57 	CLRL	-(SP)			;SET UP DUMMY ZERO PSL
         16'AF            6E     FA  0012    58 	CALLG	(SP),B^10$		;CREATE INITIAL CALL FRAME
                          0000       0016    59 10$:	.WORD	^M<>			;ENTRY MASK
            5B   00000000'9F     9E  0018    60 	MOVAB	@#CTL$AG_CLIDATA,R11	;GET ADDRESS OF COMMAND WORK AREA
            6B            5C     7D  001F    61 	MOVQ	AP,PRC_L_SAVAP(R11)	;SAVE INITIAL ARGUMENT AND FRAME POINTERS
   00000000'9F       0002'CF     9E  0022    62 	MOVAB	W^MCR$UTLSERV+2,@#CTL$AL_CLICALBK ;SET CALL BACK VECTOR
         5C AB       2E30 8F     3C  002B    63 	MOVZWL	#^A/0./,PRC_L_CLIWRK0(R11);SET INITIAL STRING LENGTH TO 0
                       52 AB     B4  0031    64 	CLRW	PRC_W_CLIFLAG(R11)	;INIT CLI SPECIFIC FLAGS TO 0
                                     0034    65 	ENBCONTRLY			;ENABLE CONTROL Y AST'S
       0090 CB            04     B0  0037    66 	MOVW	#4,PRC_B_EXMDEPWID(R11)	;SET EXAMINE MODE TO HEX,WIDTH TO 4
                                     003C    67 	$DCLCMH_S W^MCR$CHANGE_MODE	;DECLARE A CHANGE MODE TO SUPER HANLER
                          FFB2'  31  004B    68 	BRW	MCR$RESTART		;START COMMAND INTERPRETATION
                                     004E    69  
                                     004E    70 	.END
MCRINIT         - MCR COMMAND INTERPRETER INITIALIZATION         22-AUG-1978 01:44:56   VAX-11 MACRO X0.3-11               Page   3
SYMBOL TABLE                                                                                                                     (1)

BIT...         = 00000000            PRC_L_INDINPRAB  00000014            PSL$C_USER     = 00000003            
CMDBUFSIZ      = 000001FC            PRC_L_INDOUTRAB  00000018            PSL$M_CM       = 80000000            
CTL$AG_CLIDATA   ********   X   03   PRC_L_INPRAB     00000008            PSL$M_CURMOD   = 03000000            
CTL$AL_CLICALBK  ********   X   03   PRC_L_LSTSTATUS  00000094            PSL$M_DV       = 00000080            
CTL$AL_STACK     ********   X   03   PRC_L_ONCTLY     0000009C            PSL$M_FPD      = 08000000            
GBL...         = 00000000            PRC_L_ONERROR    00000058            PSL$M_FU       = 00000040            
INPBUFSIZ      = 00000084            PRC_L_OUTRAB     0000000C            PSL$M_IPL      = 001F0000            
MCR$CHANGE_MODE  ********   X   03   PRC_L_PROCUIC    00000098            PSL$M_IS       = 04000000            
MCR$ENBCONTRLY   ********   X   03   PRC_L_SAVAP      00000000            PSL$M_IV       = 00000020            
MCR$RESTART      ********   X   03   PRC_L_SAVFP      00000004            PSL$M_PRVMOD   = 00C00000            
MCR$STARTUP      00000000 RG    04   PRC_L_SEVERITY   00000040            PSL$M_SAFBITS  = 000037FF            
MCR$UTLSERV      ********   X   03   PRC_L_STACKLM    00000088            PSL$M_TBIT     = 00000010            
MCR_M_ALPHAN   = 00000002            PRC_L_STACKPT    00000084            PSL$M_TP       = 40000000            
MCR_M_DEFALT   = 00000008            PRC_L_STATUS     00000044            PSL$S_CURMOD   = 00000002            
MCR_M_DELINP   = 00000080            PRC_L_SYMBOL     0000004C            PSL$S_IPL      = 00000005            
MCR_M_DOLLARS  = 00000100            PRC_M_CNTRLY   = 00000002            PSL$S_PRVMOD   = 00000002            
MCR_M_ESCAPE   = 00000004            PRC_M_DBGQUAL  = 00000200            PSL$V_CM       = 0000001F            
MCR_M_ESCTRM   = 00000200            PRC_M_DBGTRUE  = 00000400            PSL$V_CURMOD   = 00000018            
MCR_M_GLOBAL   = 00000400            PRC_M_DISABL   = 00000004            PSL$V_DV       = 00000007            
MCR_M_LOWER    = 00000800            PRC_M_EXIT     = 00000008            PSL$V_FPD      = 0000001B            
MCR_M_OPNINP   = 00000040            PRC_M_GOEOF    = 00000001            PSL$V_FU       = 00000006            
MCR_M_RAD50    = 00000001            PRC_M_GOTO     = 00000010            PSL$V_IPL      = 00000010            
MCR_M_STRSUB   = 00001000            PRC_M_HANGUP   = 00001000            PSL$V_IS       = 0000001A            
MCR_V_ALPHAN   = 00000001            PRC_M_IND      = 00000020            PSL$V_IV       = 00000005            
MCR_V_DEFALT   = 00000003            PRC_M_MODE     = 00000040            PSL$V_PRVMOD   = 00000016            
MCR_V_DELINP   = 00000007            PRC_M_NOCTLY   = 00004000            PSL$V_TBIT     = 00000004            
MCR_V_DOLLARS  = 00000008            PRC_M_PAUSE    = 00002000            PSL$V_TP       = 0000001E            
MCR_V_ESCAPE   = 00000002            PRC_M_USRDET   = 00000100            RSLBUFSIZ      = 00000180            
MCR_V_ESCTRM   = 00000009            PRC_M_VERIFY   = 00000080            START            00000000 R     03   
MCR_V_FORCMD   = 0000000E            PRC_M_YLEVEL   = 00000800            SYM_B_TYPE       0000000A            
MCR_V_GLOBAL   = 0000000A            PRC_Q_ALLOCREG   00000020            SYM_K_DECIMAL  = 00000004            
MCR_V_LOWER    = 0000000B            PRC_Q_GLOBAL     00000028            SYM_K_HEXDEC   = 00000005            
MCR_V_OPNINP   = 00000006            PRC_Q_LABEL      00000030            SYM_K_LOGICAL  = 00000002            
MCR_V_RAD50    = 00000000            PRC_Q_LOCAL      00000038            SYM_K_OCTAL    = 00000003            
MCR_V_STRSUB   = 0000000C            PRC_V_CNTRLY   = 00000001            SYM_K_PERM     = 00000001            
MSGBUFSIZ      = 00000084            PRC_V_DBGQUAL  = 00000009            SYM_K_STRING   = 00000000            
PRC_B_DEFRADIX   00000092            PRC_V_DBGTRUE  = 0000000A            SYM_L_BL         00000004            
PRC_B_EXMDEPMOD  00000091            PRC_V_DISABL   = 00000002            SYM_L_FL         00000000            
PRC_B_EXMDEPWID  00000090            PRC_V_EXIT     = 00000003            SYM_T_SYMBOL     0000000C            
PRC_K_DEC      = 00000001            PRC_V_GOEOF    = 00000000            SYM_W_SIZE       00000008            
PRC_K_HEX      = 00000000            PRC_V_GOTO     = 00000004            SYS$DCLCMH       ********   X   03   
PRC_K_LENGTH     000000A0            PRC_V_HANGUP   = 0000000C            SYS$RUNDWN       ********   X   03   
PRC_K_OCT      = 00000002            PRC_V_IND      = 00000005            WRK_AB_BUFFER    FFFFFD44            
PRC_L_CLIWRK0    0000005C            PRC_V_MODE     = 00000006            WRK_AG_RESULT    FFFFFBC0            
PRC_L_CLIWRK1    00000060            PRC_V_NOCTLY   = 0000000E            WRK_B_CMDFLG     FFFFFFC9            
PRC_L_CLIWRK2    00000064            PRC_V_PAUSE    = 0000000D            WRK_B_CURADX     FFFFFFCA            
PRC_L_CLIWRK3    00000068            PRC_V_USRDET   = 00000008            WRK_B_PARMCNT    FFFFFFCB            
PRC_L_CLIWRK4    0000006C            PRC_V_VERIFY   = 00000007            WRK_B_VERBTYP    FFFFFFC8            
PRC_L_ERRRAB     00000010            PRC_V_YLEVEL   = 0000000B            WRK_K_LENGTH     FFFFFBC0            
PRC_L_EXMDEPADR  0000008C            PRC_W_CLIFLAG    00000052            WRK_L_CHARPTR    FFFFFFFC            
PRC_L_EXTARG     00000078            PRC_W_ERRIFI     00000052            WRK_L_IMAGE      FFFFFFEC            
PRC_L_EXTBLK     00000070            PRC_W_FLAGS      00000054            WRK_L_MAXPARM    FFFFFFCC            
PRC_L_EXTCOD     00000080            PRC_W_INPCHAN    00000050            WRK_L_MINPARM    FFFFFFD0            
PRC_L_EXTHND     00000074            PRC_W_ONLEVEL    00000056            WRK_L_PAROUT     FFFFFFF0            
PRC_L_EXTPRM     0000007C            PSL$C_EXEC     = 00000001            WRK_L_PROMPT     FFFFFFF4            
PRC_L_INDEPTH    00000048            PSL$C_KERNEL   = 00000000            WRK_L_QUABLK     FFFFFFE8            
PRC_L_INDFAB     0000001C            PSL$C_SUPER    = 00000002            WRK_L_RSLNXT     FFFFFD40            
MCRINIT         - MCR COMMAND INTERPRETER INITIALIZATION         22-AUG-1978 01:44:56   VAX-11 MACRO X0.3-11               Page   4
SYMBOL TABLE                                                                                                                     (1)

WRK_L_SAVAP      FFFFFFD8            
WRK_L_SAVFP      FFFFFFDC            
WRK_L_SAVSP      FFFFFFD4            
WRK_M_ALL      = 00000001            
WRK_M_ASK      = 00000100            
WRK_M_COMMAND  = 00000002            
WRK_M_CONTINU  = 00000400            
WRK_M_EQUAL    = 00000008            
WRK_M_IMCHNG   = 00000004            
WRK_M_QUAL     = 00000010            
WRK_M_QUOTE    = 00000020            
WRK_M_STAR     = 00000040            
WRK_M_TRAILSPC = 00000200            
WRK_M_VERB     = 00000080            
WRK_Q_IOSB       FFFFFFE0            
WRK_V_ALL      = 00000000            
WRK_V_ASK      = 00000008            
WRK_V_COMMAND  = 00000001            
WRK_V_CONTINU  = 0000000A            
WRK_V_EQUAL    = 00000003            
WRK_V_IMCHNG   = 00000002            
WRK_V_QUAL     = 00000004            
WRK_V_QUOTE    = 00000005            
WRK_V_STAR     = 00000006            
WRK_V_TRAILSPC = 00000009            
WRK_V_VERB     = 00000007            
WRK_W_FLAGS      FFFFFFFA            
WRK_W_LOCFLG     FFFFFFF8            


PROGRAM SECTION SYNOPSIS

.  ABS  .        00000000      00     NOPIC   USR   CON   ABS   LCL NOSHR NOEXE NORD  NOWRT BYTE  
. BLANK .        00000000      01     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
$ABS$            FFFFFFFC      02     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  
MCR$ZCODE        0000004E      03     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD  NOWRT BYTE  
MCR$$BASE        00000004      04     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD  NOWRT BYTE  


THERE WERE NO ERRORS OR WARNINGS.
20220. BYTES LEFT IN FREE MEMORY POOL.
190. BYTES OF RECLAIMED MEMORY.
OBJ$:MCRINIT,LIS$:MCRINIT/-SP=EXECML$/ML,LIB$:MCR/ML,SRC$:MCRINIT
28 MLB DIR RDS - 319 GETS TO DEFINE 18 MACROS. 22 INTER. FILE WRITES. 
