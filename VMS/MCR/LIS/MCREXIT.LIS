MCREXIT         - EXIT COMMAND EXECUTION                         22-AUG-1978 01:37:04   VAX-11 MACRO X0.3-11               Page   0
TABLE OF CONTENTS   

   (1)      34  EXIT COMMAND 
MCREXIT         - EXIT COMMAND EXECUTION                         22-AUG-1978 01:37:04   VAX-11 MACRO X0.3-11               Page   1
01                                                                                                                               (1)

                                     0000     1 	.TITLE	MCREXIT - EXIT COMMAND EXECUTION
                                     0000     2 	.IDENT	/01/
                                     0000     3  
                                     0000     4 ;
                                     0000     5 ; COPYRIGHT (C) 1977, 1978
                                     0000     6 ; DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
                                     0000     7 ;
                                     0000     8 ; THIS SOFTWARE IS FURNISHED UNDER  A LICENSE FOR USE ONLY  ON  A
                                     0000     9 ; SINGLE COMPUTER SYSTEM AND MAY BE  COPIED ONLY WITH  THE INCLU-
                                     0000    10 ; SION OF  THE  ABOVE  COPYRIGHT NOTICE.  THIS SOFTWARE,  OR  ANY
                                     0000    11 ; OTHER COPIES THEREOF, MAY NOT BE  PROVIDED  OR  OTHERWISE  MADE
                                     0000    12 ; AVAILABLE TO ANY OTHER PERSON EXCEPT  FOR  USE  ON  SUCH SYSTEM
                                     0000    13 ; AND TO  ONE WHO AGREES  TO  THESE LICENSE  TERMS.  TITLE TO AND
                                     0000    14 ; OWNERSHIP OF THE SOFTWARE SHALL AT ALL TIMES REMAIN IN DEC.
                                     0000    15 ;
                                     0000    16 ; THE INFORMATION IN THIS SOFTWARE  IS  SUBJECT TO CHANGE WITHOUT
                                     0000    17 ; NOTICE AND SHOULD NOT BE CONSTRUED  AS  A COMMITMENT BY DIGITAL
                                     0000    18 ; EQUIPMENT CORPORATION.
                                     0000    19 ;
                                     0000    20 ; DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF ITS
                                     0000    21 ; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
                                     0000    22 ;
                                     0000    23 ; W. H. BROWN 25-JUN-1977
                                     0000    24 ;
                                     0000    25 ; EXIT COMMAND EXECUTION
                                     0000    26 ;
                                     0000    27 ; MACRO LIBRARY CALLS
                                     0000    28 ;
                                     0000    29  
                                     0000    30 	DEFCMDBLK			; DEFINE COMMAND BLOCK VALUES
                                     0000    31 	DEFCMDWRK			; DEFINE WORK AREA OFFSETS
                                     0000    32 	DEFERRCOD			; DEFINE ERROR/STATUS CODES
MCREXIT         - EXIT COMMAND EXECUTION                         22-AUG-1978 01:37:04   VAX-11 MACRO X0.3-11               Page   2
01              EXIT COMMAND                                                                                                     (1)

                                     0000    34 	.SBTTL	EXIT COMMAND 
                                     0000    35 ;+
                                     0000    36 ; MCR$EXIT - EXIT COMMAND
                                     0000    37 ;
                                     0000    38 ; THIS COMMAND IS CALLED AS AN INTERNAL COMMAND TO EXECUTE THE MCR
                                     0000    39 ; EXIT INDIRECT COMMAND.
                                     0000    40 ;
                                     0000    41 ; INPUTS:
                                     0000    42 ;
                                     0000    43 ;	R6 = COMMAND BUFFER DISPLAY PARAMETER.
                                     0000    44 ;	R9 = ADDRESS OF NEXT BYTE IN COMMAND BUFFER.
                                     0000    45 ;	R10 = RESULT PARSE DESCRIPTOR TABLE POINTER.
                                     0000    46 ;	R11 = BASE ADDRESS OF PROCESS WORK AREA.
                                     0000    47 ;	FP = BASE ADDRESS OF COMMAND WORK AREA.
                                     0000    48 ;
                                     0000    49 ; OUTPUTS:
                                     0000    50 ;
                                     0000    51 ;	THE EXIT EXPRESSION IS EVALUATED
                                     0000    52 ;
                                     0000    53 ;	R0 LOW BIT CLEAR INDICATES EXPRESSION EVALUATION FAILURE.
                                     0000    54 ;
                                     0000    55 ;		R0 = MCR$_COMPLX - EXPRESSION TOO COMPLEX.
                                     0000    56 ;		R0 = MCR$_EXPSYN - EXPRESSION SYNTAX ERROR.
                                     0000    57 ;		R0 = MCR$_IVCHAR - INVALID CHARACTER IN NUMERIC STRING.
                                     0000    58 ;		R0 = MCR$_IVOPER - INVALID EXPRESSION OPERATOR.
                                     0000    59 ;		R0 = MCR$_UNDSYM - UNDEFINED SYMBOL.
                                     0000    60 ;
                                     0000    61 ;	IF THE EXPRESSION EVALUTES OK, THE INDIRECT LEVEL IS UNSTACKED
                                     0000    62 ;	ONE LEVEL AND THE STATUS IS SET TO THE VALUE OF THE EXPRESSION,
                                     0000    63 ;	OR IS LEFT AS THE ORIGINAL VALUE IF THE EXPRESSION WAS NULL.
                                     0000    64 ;	R0 LOW BIT SET INDICATES SUCCESSFUL COMPLETION.
                                     0000    65 ;
                                     0000    66 ;		R0 = MCR$_NORMAL - NORMAL COMPLETION.
                                     0000    67 ;-
                                     0000    68  
                                 00000000    69 	.PSECT	MCR$ZCODE,BYTE,RD,NOWRT
                                     0000    70 MCR$EXIT::				; EXIT COMMAND
       0094 CB   10000000 8F     C9  0000    71 	BISL3	#1@28,PRC_L_LSTSTATUS(R11),R8 ; GET LAST STATUS WITH INHIBIT MSG
                          58         0009       
                                     000A    72 	SETNBLK				; FIND NON-BLANK CHARACTER
                          09     13  000D    73 	BEQL	10$			; BR IF NONE-STATUS GETS SAVED
                                     000F    74 	EXPRESS				; EVALUATE EXPRESSION
            17            50     E9  0012    75 	BLBC	R0,40$			; BR IF ERROR EVALUATING EXPRESSION
            58            51     D0  0015    76 	MOVL	R1,R8			; SET RESULT OF EXPRESSION EVALUATION
                                 D1  0018    77 10$:	CMPL	PRC_L_INDINPRAB(R11),-	; IS INDIRECT LEVEL ABOVE THE
         08 AB         14 AB         0019    78 		PRC_L_INPRAB(R11)	; BASIC LEVEL?
                          0E     13  001D    79 	BEQL	50$			; BR IF NO THERE IS NOTHING TO UNSTACK
                                     001F    80 	UNSTACK				; REMOVE ONE LEVEL OF INDIRECT
            03            50     E9  0022    81 	BLBC	R0,30$			; BR IF FAILED
            50            58     D0  0025    82 20$:	MOVL	R8,R0			; SET RESULTANT STATUS
         FA AD            02     A8  0028    83 30$:	BISW	#WRK_M_COMMAND,WRK_W_FLAGS(FP) ; SET COMMAND IN EXECUTION
                                 05  002C    84 40$:	RSB
                                     002D    85  
                                     002D    86 ;
                                     002D    87 ; AN EXIT COMMAND ISSUED FOR COMMAND LEVEL 0
                                     002D    88 ; THIS IS A NOP FOR INTERACTIVE JOBS AND
                                     002D    89 ; A LOGOUT FOR BATCH JOBS.
MCREXIT         - EXIT COMMAND EXECUTION                         22-AUG-1978 01:37:04   VAX-11 MACRO X0.3-11               Page   3
01              EXIT COMMAND                                                                                                     (1)

                                     002D    90 ;
            58            01     D0  002D    91 50$:	MOVL	#1,R8			; SET GOOD STATUS INCASE CONTINUING
                                     0030    92 	SETBIT	CMD_V_NOSTAT,WRK_B_CMDFLG(FP) ; NO STATUS CHANGE COMING
         54 AB            06     E1  0034    93 	BBC	#PRC_V_MODE,PRC_W_FLAGS(R11),20$ ; BR IF INTERACTIVE JOB
                          EC         0038       
                          FFC4'  31  0039    94 	BRW	MCR$LOGOUT		; ELSE FORCE LOGOUT FOR BATCH JOBS
                                     003C    95  
                                     003C    96 	.END
MCREXIT         - EXIT COMMAND EXECUTION                         22-AUG-1978 01:37:04   VAX-11 MACRO X0.3-11               Page   4
SYMBOL TABLE                                                                                                                     (1)

BIT...         = 0003FFE9            CLI$_OVRFLW    = 00038160            MCR_M_DOLLARS  = 00000100            
CLI$_ABFNAM    = 000381B8            CLI$_PARMDEL   = 00038110            MCR_M_ESCAPE   = 00000004            
CLI$_ABKEYW    = 00038000            CLI$_PROC_ID   = 0003FFF1            MCR_M_ESCTRM   = 00000200            
CLI$_ABVERB    = 00038008            CLI$_QUEJOBCRE = 0003FFF9            MCR_M_GLOBAL   = 00000400            
CLI$_BADRET    = 00038198            CLI$_REQPRMABS = 00038812            MCR_M_LOWER    = 00000800            
CLI$_BADTEXT   = 000381B0            CLI$_RSLOVF    = 00038118            MCR_M_OPNINP   = 00000040            
CLI$_BUFOVF    = 00038018            CLI$_SKPDAT    = 00038120            MCR_M_RAD50    = 00000001            
CLI$_COMPLX    = 00038020            CLI$_SPARE0    = 00038010            MCR_M_STRSUB   = 00001000            
CLI$_CONFQUAL  = 00038802            CLI$_SPARE1    = 00038058            MCR_V_ALPHAN   = 00000001            
CLI$_CREQUEJOB = 0003884A            CLI$_STKOVF    = 00038128            MCR_V_DEFALT   = 00000003            
CLI$_DEFOVF    = 00038028            CLI$_SUBMITERR = 00038852            MCR_V_DELINP   = 00000007            
CLI$_DEVALSPL  = 0003885A            CLI$_SYMDEL    = 00038130            MCR_V_DOLLARS  = 00000008            
CLI$_DEVNOTFOR = 0003887A            CLI$_SYMOVF    = 00038138            MCR_V_ESCAPE   = 00000002            
CLI$_DEVNOTSPL = 00038862            CLI$_UNDFIL    = 00038188            MCR_V_ESCTRM   = 00000009            
CLI$_DIRECT    = 00038030            CLI$_UNDSYM    = 00038140            MCR_V_FORCMD   = 0000000E            
CLI$_EXPSYN    = 00038038            CLI$_UNPROPARM = 00038170            MCR_V_GLOBAL   = 0000000A            
CLI$_FILOPN    = 00038190            CLI$_UNPROQUAL = 00038168            MCR_V_LOWER    = 0000000B            
CLI$_ILLVAL    = 0003883A            CLI$_USGOTO    = 00038148            MCR_V_OPNINP   = 00000006            
CLI$_IMCHNG    = 00038040            CLI$_VALCNVERR = 00038832            MCR_V_RAD50    = 00000000            
CLI$_IMGFNF    = 00038872            CLI$_VALREQ    = 00038150            MCR_V_STRSUB   = 0000000C            
CLI$_INSFPRM   = 00038048            CMDBUFSIZ      = 000001FC            MSGBUFSIZ      = 00000084            
CLI$_INVKEY    = 00038178            CMD_AB_PAROUT    00000005            PRC_B_DEFRADIX   00000092            
CLI$_INVQUAL   = 0003880A            CMD_B_DEFIMG     00000002            PRC_B_EXMDEPMOD  00000091            
CLI$_INVQUALNUM= 0003881A            CMD_B_FLAGS      00000004            PRC_B_EXMDEPWID  00000090            
CLI$_INVREQTYP = 00038822            CMD_B_PARMCNT    00000001            PRC_K_DEC      = 00000001            
CLI$_INVRSP    = 00038180            CMD_B_QUABLK     00000003            PRC_K_HEX      = 00000000            
CLI$_INVUIC    = 000381A8            CMD_B_VERBTYP    00000000            PRC_K_LENGTH     000000A0            
CLI$_IVCHAR    = 00038050            CMD_M_ABREV    = 00000020            PRC_K_OCT      = 00000002            
CLI$_IVDEVTYPE = 0003886A            CMD_M_DEFQUAL  = 00000010            PRC_L_CLIWRK0    0000005C            
CLI$_IVFNAM    = 000381C0            CMD_M_DEVNAM   = 00000080            PRC_L_CLIWRK1    00000060            
CLI$_IVKEYW    = 00038060            CMD_M_IMMED    = 00000002            PRC_L_CLIWRK2    00000064            
CLI$_IVOPER    = 00038068            CMD_M_NOEQL    = 00000040            PRC_L_CLIWRK3    00000068            
CLI$_IVPROT    = 00038070            CMD_M_NOSTAT   = 00000008            PRC_L_CLIWRK4    0000006C            
CLI$_IVQLOC    = 00038078            CMD_M_OPTION   = 00000001            PRC_L_ERRRAB     00000010            
CLI$_IVSYMB    = 00038080            CMD_M_PAROUT   = 00000004            PRC_L_EXMDEPADR  0000008C            
CLI$_IVVALU    = 00038088            CMD_S_MAXPARM  = 00000004            PRC_L_EXTARG     00000078            
CLI$_IVVERB    = 00038090            CMD_S_MINPARM  = 00000004            PRC_L_EXTBLK     00000070            
CLI$_MAXPARM   = 00038098            CMD_V_ABREV    = 00000005            PRC_L_EXTCOD     00000080            
CLI$_MULKEY    = 000381A0            CMD_V_DEFQUAL  = 00000004            PRC_L_EXTHND     00000074            
CLI$_NOATFIL   = 000380A0            CMD_V_DEVNAM   = 00000007            PRC_L_EXTPRM     0000007C            
CLI$_NOCCAT    = 000380A8            CMD_V_IMMED    = 00000001            PRC_L_INDEPTH    00000048            
CLI$_NOCOMD    = 000380B0            CMD_V_MAXPARM  = 00000004            PRC_L_INDFAB     0000001C            
CLI$_NOKEYW    = 000380B8            CMD_V_MINPARM  = 00000000            PRC_L_INDINPRAB  00000014            
CLI$_NOLIST    = 000380C0            CMD_V_NOEQL    = 00000006            PRC_L_INDOUTRAB  00000018            
CLI$_NOOPTPRS  = 00038842            CMD_V_NOSTAT   = 00000003            PRC_L_INPRAB     00000008            
CLI$_NOQUAL    = 000380C8            CMD_V_OPTION   = 00000000            PRC_L_LSTSTATUS  00000094            
CLI$_NORMAL    = 00030001            CMD_V_PAROUT   = 00000002            PRC_L_ONCTLY     0000009C            
CLI$_NOTNEG    = 000380D8            GBL...         = 00000000            PRC_L_ONERROR    00000058            
CLI$_NOVALU    = 000380D0            INPBUFSIZ      = 00000084            PRC_L_OUTRAB     0000000C            
CLI$_NOVALUE   = 0003882A            MCR$EXIT         00000000 RG    03   PRC_L_PROCUIC    00000098            
CLI$_NULFIL    = 000380E0            MCR$EXPRESS      ********   X   03   PRC_L_SAVAP      00000000            
CLI$_NUMBER    = 000380E8            MCR$LOGOUT       ********   X   03   PRC_L_SAVFP      00000004            
CLI$_ONCOMD    = 000380F0            MCR$SETNBLK      ********   X   03   PRC_L_SEVERITY   00000040            
CLI$_ONERR     = 000380F8            MCR$UNSTACK      ********   X   03   PRC_L_STACKLM    00000088            
CLI$_ONEVAL    = 00038158            MCR_M_ALPHAN   = 00000002            PRC_L_STACKPT    00000084            
CLI$_ONLEVL    = 00038100            MCR_M_DEFALT   = 00000008            PRC_L_STATUS     00000044            
CLI$_ONOVF     = 00038108            MCR_M_DELINP   = 00000080            PRC_L_SYMBOL     0000004C            
MCREXIT         - EXIT COMMAND EXECUTION                         22-AUG-1978 01:37:04   VAX-11 MACRO X0.3-11               Page   5
SYMBOL TABLE                                                                                                                     (1)

PRC_M_CNTRLY   = 00000002            WRK_L_SAVSP      FFFFFFD4            
PRC_M_DBGQUAL  = 00000200            WRK_M_ALL      = 00000001            
PRC_M_DBGTRUE  = 00000400            WRK_M_ASK      = 00000100            
PRC_M_DISABL   = 00000004            WRK_M_COMMAND  = 00000002            
PRC_M_EXIT     = 00000008            WRK_M_CONTINU  = 00000400            
PRC_M_GOEOF    = 00000001            WRK_M_EQUAL    = 00000008            
PRC_M_GOTO     = 00000010            WRK_M_IMCHNG   = 00000004            
PRC_M_HANGUP   = 00001000            WRK_M_QUAL     = 00000010            
PRC_M_IND      = 00000020            WRK_M_QUOTE    = 00000020            
PRC_M_MODE     = 00000040            WRK_M_STAR     = 00000040            
PRC_M_NOCTLY   = 00004000            WRK_M_TRAILSPC = 00000200            
PRC_M_PAUSE    = 00002000            WRK_M_VERB     = 00000080            
PRC_M_USRDET   = 00000100            WRK_Q_IOSB       FFFFFFE0            
PRC_M_VERIFY   = 00000080            WRK_V_ALL      = 00000000            
PRC_M_YLEVEL   = 00000800            WRK_V_ASK      = 00000008            
PRC_Q_ALLOCREG   00000020            WRK_V_COMMAND  = 00000001            
PRC_Q_GLOBAL     00000028            WRK_V_CONTINU  = 0000000A            
PRC_Q_LABEL      00000030            WRK_V_EQUAL    = 00000003            
PRC_Q_LOCAL      00000038            WRK_V_IMCHNG   = 00000002            
PRC_V_CNTRLY   = 00000001            WRK_V_QUAL     = 00000004            
PRC_V_DBGQUAL  = 00000009            WRK_V_QUOTE    = 00000005            
PRC_V_DBGTRUE  = 0000000A            WRK_V_STAR     = 00000006            
PRC_V_DISABL   = 00000002            WRK_V_TRAILSPC = 00000009            
PRC_V_EXIT     = 00000003            WRK_V_VERB     = 00000007            
PRC_V_GOEOF    = 00000000            WRK_W_FLAGS      FFFFFFFA            
PRC_V_GOTO     = 00000004            WRK_W_LOCFLG     FFFFFFF8            
PRC_V_HANGUP   = 0000000C            _$$_           = 000000EF            
PRC_V_IND      = 00000005            
PRC_V_MODE     = 00000006            
PRC_V_NOCTLY   = 0000000E            
PRC_V_PAUSE    = 0000000D            
PRC_V_USRDET   = 00000008            
PRC_V_VERIFY   = 00000007            
PRC_V_YLEVEL   = 0000000B            
PRC_W_CLIFLAG    00000052            
PRC_W_ERRIFI     00000052            
PRC_W_FLAGS      00000054            
PRC_W_INPCHAN    00000050            
PRC_W_ONLEVEL    00000056            
RSLBUFSIZ      = 00000180            
WRK_AB_BUFFER    FFFFFD44            
WRK_AG_RESULT    FFFFFBC0            
WRK_B_CMDFLG     FFFFFFC9            
WRK_B_CURADX     FFFFFFCA            
WRK_B_PARMCNT    FFFFFFCB            
WRK_B_VERBTYP    FFFFFFC8            
WRK_K_LENGTH     FFFFFBC0            
WRK_L_CHARPTR    FFFFFFFC            
WRK_L_IMAGE      FFFFFFEC            
WRK_L_MAXPARM    FFFFFFCC            
WRK_L_MINPARM    FFFFFFD0            
WRK_L_PAROUT     FFFFFFF0            
WRK_L_PROMPT     FFFFFFF4            
WRK_L_QUABLK     FFFFFFE8            
WRK_L_RSLNXT     FFFFFD40            
WRK_L_SAVAP      FFFFFFD8            
WRK_L_SAVFP      FFFFFFDC            
MCREXIT         - EXIT COMMAND EXECUTION                         22-AUG-1978 01:37:04   VAX-11 MACRO X0.3-11               Page   6
PROGRAM SECTION SYNOPSIS                                                                                                         (1)



PROGRAM SECTION SYNOPSIS

.  ABS  .        00000000      00     NOPIC   USR   CON   ABS   LCL NOSHR NOEXE NORD  NOWRT BYTE  
. BLANK .        00000000      01     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
$ABS$            FFFFFFFC      02     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  
MCR$ZCODE        0000003C      03     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD  NOWRT BYTE  


THERE WERE NO ERRORS OR WARNINGS.
17692. BYTES LEFT IN FREE MEMORY POOL.
1498. BYTES OF RECLAIMED MEMORY.
OBJ$:MCREXIT,LIS$:MCREXIT/-SP=EXECML$/ML,LIB$:MCR/ML,SRC$:MCREXIT
21 MLB DIR RDS - 400 GETS TO DEFINE 18 MACROS. 29 INTER. FILE WRITES. 
