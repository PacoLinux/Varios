TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page   0
TABLE OF CONTENTS   

   (2)      94  DECLARATIONS
   (3)     117  TST$CONN_DTS - CONNECT TEST
   (4)     249  TST$DATA_DTS - DATA TEST
   (5)     434  TST$DISC_DTS - DISCONNECT TEST
   (6)     568  TST$INTE_DTS - INTERRUPT TEST
   (7)     742  TST$MISC_DTS - MISCELLANEOUS TEST
   (8)     827  TST$STARTUP_DTR - DTS/DTR INITIALIZATION
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page   1
X0.1-6                                                                                                                           (1)

                                     0000     1 	.TITLE	TST$DTSTEST - DTS TEST ROUTINES
                                     0000     2 	.IDENT	/X0.1-6/
                                     0000     3 
                                     0000     4 ;
                                     0000     5 ;			  COPYRIGHT (c) 1977, 1978 BY
                                     0000     6 ;	      DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
                                     0000     7 ;
                                     0000     8 ; THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND  COPIED
                                     0000     9 ; ONLY  IN  ACCORDANCE  WITH  THE  TERMS  OF  SUCH  LICENSE AND WITH THE
                                     0000    10 ; INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE OR  ANY  OTHER
                                     0000    11 ; COPIES  THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY
                                     0000    12 ; OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE  IS  HEREBY
                                     0000    13 ; TRANSFERRED.
                                     0000    14 ;
                                     0000    15 ; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITHOUT  NOTICE
                                     0000    16 ; AND  SHOULD  NOT  BE  CONSTRUED  AS  A COMMITMENT BY DIGITAL EQUIPMENT
                                     0000    17 ; CORPORATION.
                                     0000    18 ;
                                     0000    19 ; DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE OR  RELIABILITY  OF  ITS
                                     0000    20 ; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.
                                     0000    21 ;
                                     0000    22 
                                     0000    23 ;++
                                     0000    24 ; FACILITY: DTS/DTR DECNET TEST PACKAGE
                                     0000    25 ;
                                     0000    26 ; ABSTRACT:
                                     0000    27 ;	THIS MODULE IMPLEMENTS THE CONNECT, DATA, DISCONNECT,
                                     0000    28 ;	INTERRUPT, AND MISCELLANEOUS TEST SEQUENCES FOR DTS.
                                     0000    29 ;
                                     0000    30 ; ENVIRONMENT: DTS RUNS IN USER MODE AND REQUIRES NETWORK PRIVILEGE.
                                     0000    31 ;
                                     0000    32 ; AUTHOR: JAMES A. KRYCKA,	CREATION DATE: 11-AUG-77
                                     0000    33 ;
                                     0000    34 ; MODIFICATIONS:
                                     0000    35 ;
                                     0000    36 ;--
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page   2
X0.1-6          DECLARATIONS                                                                                                     (2)

                                     0000    38 	.SBTTL	DECLARATIONS
                                     0000    39 
                                     0000    40 ;
                                     0000    41 ; INCLUDE FILES:
                                     0000    42 ;
                                     0000    43 	$DTSDEF				;DTS ERROR MESSAGE MACROS
                                     0000    44 	CMDDEF				; DEFINE COMMAND LANGUAGE SYMBOLS
                                     0000    45 	EFNDEF				; DEFINE EFN'S AND FUNCTION CODES
                                     0000    46 	$MSGDEF				; DEFINE MAILBOX MESSAGE ID CODES
                                     0000    47 	.IIF NE	K_LIST_MEB, .LIST MEB	; DEFINED IN DTPREFIX.MAR
                                     0000    48 ;
                                     0000    49 ; MACROS:
                                     0000    50 ;
                                     0000    51 ;	NONE
                                     0000    52 ;
                                     0000    53 ; EQUATED SYMBOLS:
                                     0000    54 ;
                                     0000    55 ;	NONE
                                     0000    56 ;
                                     0000    57 ; OWN STORAGE:
                                     0000    58 ;
                                     0000    59 ;	NONE
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page   3
X0.1-6          TST$CONN_DTS - CONNECT TEST                                                                                      (3)

                                     0000    61 	.SBTTL	TST$CONN_DTS - CONNECT TEST
                                 00000000    62 	.PSECT	TST$CODE	NOWRT
                                     0000    63 ST::					; SYMBOL FOR DEBUGGING PURPOSES
                                     0000    64 
                                     0000    65 ;++
                                     0000    66 ; FUNCTIONAL DESCRIPTION:
                                     0000    67 ;
                                     0000    68 ;	NONE
                                     0000    69 ;
                                     0000    70 ; CALLING SEQUENCE:
                                     0000    71 ;
                                     0000    72 ;	BSB/JSB	TST$CONN_DTS
                                     0000    73 ;
                                     0000    74 ; INPUT PARAMETERS:
                                     0000    75 ;
                                     0000    76 ;	R10	TEST TYPE
                                     0000    77 ;	R11	ADDRESS OF USERDATA COUNTED ASCII STRING
                                     0000    78 ;
                                     0000    79 ; IMPLICIT INPUTS:
                                     0000    80 ;
                                     0000    81 ;	TST$GT_USERDATA
                                     0000    82 ;
                                     0000    83 ; OUTPUT PARAMETERS:
                                     0000    84 ;
                                     0000    85 ;	R0	COMPLETION CODE
                                     0000    86 ;	R1	ADDRESS OF TEST ID STRING
                                     0000    87 ;	R2-R9	DESTROYED
                                     0000    88 ;
                                     0000    89 ; IMPLICIT OUTPUTS:
                                     0000    90 ;
                                     0000    91 ;	TST$GT_USERDATA UPDATED
                                     0000    92 ;
                                     0000    93 ; COMPLETION CODES:
                                     0000    94 ;
                                     0000    95 ;	R0	1 = SUCCESS; 0 = FAILURE
                                     0000    96 ;
                                     0000    97 ; SIDE EFFECTS:
                                     0000    98 ;
                                     0000    99 ;	NONE
                                     0000   100 ;
                                     0000   101 ;--
                                     0000   102 
                                     0000   103 TST$CONN_DTS::				; CONTROL POINT
                                     0000   104 
                                     0000   105 ;
                                     0000   106 ; FINISH BUILDING THE CONNECT TEST REQUEST IN THE USERDATA STRING.
                                     0000   107 ;
                                     0000   108 ; THE DTS/R CONTYPE FIELD VALUE IS DERIVED FROM BOTH THE /TYPE AND THE
                                     0000   109 ; /[NO]USERDATA QUALIFIER VALUES.
                                     0000   110 ;
                                     0000   111 
            58       0000'CF     9A  0000   112 	MOVZBL	W^TST$GB_TYPE,R8	; GET TYPE QUALIFIER VALUE
            59       0000'CF     9A  0005   113 	MOVZBL	W^TST$GB_RETURN,R9	; GET RETURN QUALIFIER VALUE
            59            01     9C  000A   114 	ROTL	#1,R9,R0		; CONTYPE = RETURN * 2 + TYPE
                          50         000D       
            58            50     81  000E   115 	ADDB3	R0,R8,2(R11)		; UPDATE CONTYPE FIELD
                       02 AB         0011       
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page   4
X0.1-6          TST$CONN_DTS - CONNECT TEST                                                                                      (3)

            6B            02     90  0013   116 	MOVB	#2,(R11)		; UPDATE USERDATA STRING LENGTH
                                     0016   117 	$CASEB	SELECTOR=R9,DISPL=<-	; CHECK RETURN OPTION:
                                     0016   118 		CONN_TEST-		;  /NORETURN
                                     0016   119 		CONN_TEST-		;  /RETURN=STANDARD
                                     0016   120 	>				;  /RETURN=RECEIVED
            50       0000'CF     9A  001E   121 	MOVZBL	W^TST$GT_CONN,R0	; ADD TEXT TO USERDATA STRING
            6B            50     80  0023   122 	ADDB2	R0,(R11)		; UPDATE USERDATA STRING LENGTH
       0001'CF            50     28  0026   123 	MOVC3	R0,W^TST$GT_CONN+1,3(R11) ; APPEND THE STRING
                       03 AB         002B       
                                     002D   124 
                                     002D   125 ;
                                     002D   126 ; ENTER INTO NSP CONNECT SEQUENCE WITH DTR.
                                     002D   127 ;
                                     002D   128 
                                     002D   129 CONN_TEST:				; START THE CONNECT TEST
                          040B   30  002D   130 	BSBW	TST$STARTUP_DTR		; INITIATE NSP CONNECT SEQUENCE
            12            50     E9  0030   131 	BLBC	R0,CONN_EXPECTED	; WAS LINK ESTABLISHED?
            52            04     D0  0033   132 	MOVL	#EFN_K_DISC_ABRT,R2	; YES, GET FUNCTION/INDEX CODE
                          54     D4  0036   133 	CLRL	R4			; P2 = 0
                          FFC5'  30  0038   134 	BSBW	TST$QIOW		; DISCONNECT ABORT THE LINK
                                     003B   135 	CHECK_IOSB TST$GQ_LINKIOSB	;MAKE SURE ABORT  COMPLETES
                                     0045   136 
                                     0045   137 ;
                                     0045   138 ; STORE THE EXPECTED CONNECT ACCEPT/REJECT CODE ON THE STACK AND BUILD
                                     0045   139 ; THE EXPECTED RESPONSE COUNTED ASCII STRING IN TST$GT_USERDATA TO COMPARE
                                     0045   140 ; AGAINST THE ACTUAL RESPONSE RECEIVED FROM DTR.
                                     0045   141 ;
                                     0045   142 
                                     0045   143 CONN_EXPECTED:				;
                                     0045   144 5$:	$CASEB	SELECTOR=R9,DISPL=<-	; CHECK USERDATA OPTION:
                                     0045   145 		10$-			;  /NOUSERDATA
                                     0045   146 		20$-			;  /USERDATA=STANDARD
                                     0045   147 		CONN_RESPONSE-		;  /USERDATA=RECEIVED
                                     0045   148 	>				;
                          6B     94  004F   149 10$:	CLRB	(R11)			; ZERO USERDATA STRING LENGTH
                          0A     11  0051   150 	BRB	CONN_RESPONSE		; CONTINUE
            6B            10     90  0053   151 20$:	MOVB	#16,(R11)		; UPDATE USERDATA STRING LENGTH
       0001'CF            10     28  0056   152 	MOVC3	#16,W^TST$GT_STANDARD+1,1(R11) ; COPY STANDARD DATA PATTERN
                       01 AB         005B       
                                     005D   153 
                                     005D   154 ;
                                     005D   155 ; CHECK ACTUAL RESPONSE FROM DTR AGAINST EXPECTED RESPONSE.
                                     005D   156 ;
                                     005D   157 
                                     005D   158 CONN_RESPONSE:				; INTERROGATE RESPONSE
            2B            58     E8  005D   159 	BLBS	R8,3$			;BR IF CONN ACCEPT EXPECTED
            38            56     B1  0060   160 	CMPW	R6,#MSG$_REJECT		;WAS IT REJECTED?
                          09     13  0063   161 	BEQLU	1$			;BR IF YES
            50   01F58003 8F     D0  0065   162 	MOVL	#DTS$_CINBAD,R0		;NOTE UNEXPECT ACCEPT
                          47     11  006C   163 	BRB	CONN_FAILURE		;FAIL TEST
                                     006E   164 1$:
                     0004'CF     D5  006E   165 	TSTL	W^TST$GQ_LINKIOSB+4	;CHECK FOR DTR REJECT
                          1C     13  0072   166 	BEQLU	10$			;YES,CHECK USER LENGTH
       0004'CF            09     D1  0074   167 	CMPL	#9,W^TST$GQ_LINKIOSB+4	;ALSO DTR REJECT
                          15     13  0079   168 	BEQLU	10$			;CHECK USER DATA
                                     007B   169 2$:
            50   01F5801B 8F     D0  007B   170 	MOVL	#DTS$_CINREJ,R0		;SYSTEM REJECTED CONNECT
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page   5
X0.1-6          TST$CONN_DTS - CONNECT TEST                                                                                      (3)

                                 D0  0082   171 	MOVL	W^TST$GQ_LINKIOSB+4,-
       0000'CF       0004'CF         0083   172 		W^TST$GL_FAOARG		;SAVE NCP REASON
                          2A     11  0089   173 	BRB	CONN_FAILURE		;FAIL TEST
                                     008B   174 3$:
            31            56     D1  008B   175 	CMPL	R6,#MSG$_CONFIRM	;CHECK IF CONN ACCEPTED
                          EB     12  008E   176 	BNEQU	2$			;UNEXPECT REJECT
            67            6B     91  0090   177 10$:	CMPB	(R11),(R7)		; COMPARE EXPECTED VS ACTUAL
                                     0093   178 					;  USERDATA STRING LENGTH
                          09     13  0093   179 	BEQLU	20$			; IS IS OK?
            50   01F5800B 8F     D0  0095   180 	MOVL	#DTS$_BADUSRLEN,R0	;NOTE BAD LEN USER DATA
                          17     11  009C   181 	BRB	CONN_FAILURE		;
            50            6B     9A  009E   182 20$:	MOVZBL	(R11),R0		; COMPARE EXPECTED VS ACTUAL
         01 AB            50     29  00A1   183 	CMPC3	R0,1(R11),1(R7)		;  USERDATA STRING VALUE
                       01 A7         00A5       
                          09     13  00A7   184 	BEQLU	CONN_SUCCESS		; IS IT OK?
            50   01F58013 8F     D0  00A9   185 	MOVL	#DTS$_BADUSRDAT,R0	;NOTE BAD DATA
                          03     11  00B0   186 	BRB	CONN_FAILURE		; 
                                     00B2   187 CONN_SUCCESS:				; TEST WAS SUCCESSFUL
            50            01     D0  00B2   188 	MOVL	#1,R0			; SET COMPLETION CODE TO SUCCESS
                                     00B5   189 CONN_FAILURE:				; ENTER HERE IF TEST FAILED
            51       0000'CF     9E  00B5   190 	MOVAB	W^TST$GT_CONN,R1	; RETURN ADDRESS OF TEST ID STRING
                                 05  00BA   191 	RSB				; EXIT
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page   6
X0.1-6          TST$DATA_DTS - DATA TEST                                                                                         (4)

                                     00BB   193 	.SBTTL	TST$DATA_DTS - DATA TEST
                                 000000BB   194 	.PSECT	TST$CODE	NOWRT
                                     00BB   195 
                                     00BB   196 ;++
                                     00BB   197 ; FUNCTIONAL DESCRIPTION:
                                     00BB   198 ;
                                     00BB   199 ;	NONE
                                     00BB   200 ;
                                     00BB   201 ; CALLING SEQUENCE:
                                     00BB   202 ;
                                     00BB   203 ;	BSB/JSB	TST$DATA_DTS
                                     00BB   204 ;
                                     00BB   205 ; INPUT PARAMETERS:
                                     00BB   206 ;
                                     00BB   207 ;	R10	TEST TYPE
                                     00BB   208 ;	R11	ADDRESS OF USERDATA COUNTED ASCII STRING
                                     00BB   209 ;
                                     00BB   210 ; IMPLICIT INPUTS:
                                     00BB   211 ;
                                     00BB   212 ;	TST$GT_USERDATA
                                     00BB   213 ;
                                     00BB   214 ; OUTPUT PARAMETERS:
                                     00BB   215 ;
                                     00BB   216 ;	R0	COMPLETION CODE
                                     00BB   217 ;	R1	ADDRESS OF TEST ID STRING
                                     00BB   218 ;	R2-R9	DESTROYED
                                     00BB   219 ;
                                     00BB   220 ; IMPLICIT OUTPUTS:
                                     00BB   221 ;
                                     00BB   222 ;	TST$GT_USERDATA UPDATED
                                     00BB   223 ;
                                     00BB   224 ; COMPLETION CODES:
                                     00BB   225 ;
                                     00BB   226 ;	R0	1 = SUCCESS; 0 = FAILURE
                                     00BB   227 ;
                                     00BB   228 ; SIDE EFFECTS:
                                     00BB   229 ;
                                     00BB   230 ;	NONE
                                     00BB   231 ;
                                     00BB   232 ;--
                                     00BB   233 
                                     00BB   234 TST$DATA_DTS::				; CONTROL POINT
                                     00BB   235 
                                     00BB   236 ;
                                     00BB   237 ;VERIFY MESSAGE SIZE FIELD
                                     00BB   238 ;
                                     00BB   239 
            54       0000'CF     3C  00BB   240 	MOVZWL	W^TST$GW_SIZE,R4	;[TGD]VALUE OF SIZE FIELD
                                     00C0   241 	$CASEB SELECTOR=TST$GB_TYPE,DISPL=<-
                                     00C0   242 	    40$-			;SINK TEST
                                     00C0   243 	    10$-			;SEQUENCE TEST
                                     00C0   244 	    20$-			;PATTERN TEST
                                     00C0   245 	    40$-			;ECHO TEST
                                     00C0   246 		>
                                     00D0   247 10$:					;MIN SIZE OF SEQUENCE TEST IS 4
                                     00D0   248 
            50            04     D0  00D0   249 	MOVL	#4,R0			
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page   7
X0.1-6          TST$DATA_DTS - DATA TEST                                                                                         (4)

                          03     11  00D3   250 	BRB	30$			;GO TO COMMON CODE
                                     00D5   251 
                                     00D5   252 20$:					;MIN SIZE OF PATT CHECK IS 5
            50            05     D0  00D5   253 	MOVL	#5,R0
                                     00D8   254 30$:					;IF SIZE TOO SMALL THEN ERROR
            54            50     B1  00D8   255 	CMPW	R0,R4
                          06     15  00DB   256 	BLEQ	40$			;IF /SIZE EXCEEDS MIN THEN OKAY
            50            02     D0  00DD   257 	MOVL	#2,R0			;ERROR CODE
                          011D   31  00E0   258 	BRW	DATA_FAILURE		;GO TO COMMON ERROR CODE
                                     00E3   259 40$:
                                     00E3   260 ;
                                     00E3   261 ; FINISH BUILDING THE DATA TEST REQUEST IN THE USERDATA STRING.
                                     00E3   262 ;
                                     00E3   263 
            59         02 AB     DE  00E3   264 	MOVAL	2(R11),R9		; GET ADDRESS OF DTS/R DATATYPE FIELD
            89       0000'CF     90  00E7   265 	MOVB	W^TST$GB_TYPE,(R9)+	; UPDATE DATATYPE FIELD
            89       0000'CF     90  00EC   266 	MOVB	W^TST$GB_FLOW,(R9)+	; UPDATE FCOPT FIELD
            89       0000'CF     90  00F1   267 	MOVB	W^TST$GB_RQUEUE,(R9)+	; UPDATE DTS/R FCVAL FIELD
            89       0000'CF     90  00F6   268 	MOVB	W^TST$GB_NAK,(R9)+	; UPDATE NAKVAL FIELD
            89       0000'CF     90  00FB   269 	MOVB	W^TST$GB_BACK,(R9)+	; UPDATE BPVAL FIELD
            89       0000'CF     B0  0100   270 	MOVW	W^TST$GW_SIZE,(R9)+	; UPDATE MSGLEN FIELD
            6B            08     90  0105   271 	MOVB	#8,(R11)		; UPDATE USERDATA STRING LENGTH
                                     0108   272 
                                     0108   273 ;
                                     0108   274 ; ENTER INTO NSP CONNECT SEQUENCE WITH DTR.
                                     0108   275 ;
                                     0108   276 
                                     0108   277 DATA_TEST:				; START THE DATA TEST
                          0330   30  0108   278 	BSBW	TST$STARTUP_DTR		; INITIATE NSP CONNECT SEQUENCE
            11            50     E8  010B   279 	BLBS	R0,DATA_INIT		; WAS LINK ESTABLISHED?
            50   01F5801B 8F     D0  010E   280 	MOVL	#DTS$_CINREJ,R0
                                 D0  0115   281 	MOVL	W^TST$GQ_LINKIOSB+4,-
       0000'CF       0004'CF         0116   282 		W^TST$GL_FAOARG
                          00E1   31  011C   283 	BRW	DATA_FAILURE		;
                                     011F   284 
                                     011F   285 ;
                                     011F   286 ; DATA TEST INITIALIZATION
                                     011F   287 ;
                                     011F   288 
                                     011F   289 DATA_INIT:				; CONTINUE
                     0000'CF     7C  011F   290 	CLRQ	W^TST$GL_XMITDATA	; ZERO TRANSMIT AND RECEIVE
                                     0123   291 					;  MESSAGE COUNTERS
                     0000'CF     7C  0123   292 	CLRQ	W^TST$GL_XMITINTE	; ZERO TRANSMIT AND RECEIVE
                                     0127   293 					;  INTERRUPT MESSAGE COUNTERS
       0000'CF            01     D0  0127   294 	MOVL	#1,W^TST$GL_STATUS	; SET AST STATUS CODE TO SUCCESS
                     0000'CF     94  012C   295 	CLRB	W^TST$GB_ASTFLAGS	;NOTE TIMER RUNNING
   00000000'EF   00000000'EF     DE  0130   296 	MOVAL	TST$QB_QHEAD,TST$QB_QHEAD;INIT QUEUE HEAD
   00000004'EF   00000000'EF     DE  013B   297 	MOVAL	TST$QB_QHEAD,TST$QB_QHEAD+4
                                     0146   298 
                                     0146   299 ;
                                     0146   300 ; PUT REPETITIONS OF THE STANDARD DATA PATTERN IN THE MESSAGE BUFFER
                                     0146   301 ; BEGINNING AT BUFFER+4.
                                     0146   302 ;
                                     0146   303 
            53       0000'CF     9E  0146   304 	MOVAB	W^TST$GB_XMITBUF,R3	; GET ADDRESS OF MESSAGE
            83            01     D0  014B   305 	MOVL	#1,(R3)+		; INITIALIZE MESSAGE SEQUENCE NUMBER
            54       0000'CF     3C  014E   306 	MOVZWL	W^TST$GW_SIZE,R4	; GET MESSAGE SIZE
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page   8
X0.1-6          TST$DATA_DTS - DATA TEST                                                                                         (4)

            04            54     B1  0153   307 	CMPW	R4,#4			;ANY DATA IN MESSAGE?
                          06     15  0156   308 	BLEQ	5$			;NO, JUST SEQUENCE
            54            04     C2  0158   309 	SUBL2	#4,R4			; REDUCE SIZE ACCORDINGLY
                          FEA2'  30  015B   310 	BSBW	TST$STANDARD		; PUT STD DATA PATTERN IN BUFFER
                                     015E   311 
                                     015E   312 5$:
                                     015E   313 ;
                                     015E   314 ; SET TIMER 
                                     015E   315 ;
                                     015E   316 
       0000'CF       0000'CF     D0  015E   317 	MOVL	W^TST$GL_SECONDS,W^TST$GL_CLOCK	;SETUP COUNTDOWN LOCATION
                                     0165   318 	$SETIMR_S EFN=#EFN_K_TIMER-	;
                                     0165   319 		DAYTIM=W^TST$GQ_NANOSEC- ;
                                     0165   320 		ASTADR=W^TST$TIMER_DTS	;
                                     0178   321 	CHECK_SS			; CHECK STATUS CODE
                                     017B   322 
                                     017B   323 ;
                                     017B   324 ; TRANSMIT [AND RECEIVE] DATA MESSAGES UNTIL TIMER EXPIRES
                                     017B   325 ;
                                     017B   326 
            03         02 AB     91  017B   327 	CMPB	2(R11),#VAL_K_TYPE_ECHO	; SHOULD DTR ECHO MESSAGE?
                          10     12  017F   328 	BNEQU	10$			; NO, CONTINUE
            52            07     D0  0181   329 	MOVL	#EFN_K_RECV_DATA,R2	; GET FUNCTION/INDEX CODE
            54       0000'CF     3C  0184   330 	MOVZWL	W^TST$GW_SIZE,R4	;SIZE OF DATA BUFFER
            55       0000'CF     9E  0189   331 	MOVAB	W^TST$RECVAST_DTS,R5	; GET ADDRESS OF AST ROUTINE
                          FE6F'  30  018E   332 	BSBW	TST$QIOAST		; START UP RECEIVE MESSAGE STREAM
            52            00     D0  0191   333 10$:	MOVL	#EFN_K_READ_MAIL,R2	; GET FUNCTION/INDEX CODE
            54         00'8F     9A  0194   334 	MOVZBL	#TST$K_MAILBUF,R4	; GET MAILBOX BUFFER SIZE
            55       0000'CF     9E  0198   335 	MOVAB	W^TST$MAILAST_DTS,R5	; GET ADDRESS OF AST ROUTINE
                          FE60'  30  019D   336 	BSBW	TST$QIOAST		; ISSUE READ TO MAILBOX
            52            05     D0  01A0   337 	MOVL	#EFN_K_XMIT_DATA,R2	; GET FUNCTION/INDEX CODE
            54       0000'CF     3C  01A3   338 	MOVZWL	W^TST$GW_SIZE,R4	; GET MESSAGE SIZE
            55       0000'CF     9E  01A8   339 	MOVAB	W^TST$XMITAST_DTS,R5	; GET ADDRESS OF AST ROUTINE
                          FE50'  30  01AD   340 	BSBW	TST$QIOAST		; START UP TRANSMIT MESSAGE STREAM
                                     01B0   341 
                                     01B0   342 ;
                                     01B0   343 ; WAIT EITHER FOR TIMER TO EXPIRE OR FOR LINK DISCONNECT
                                     01B0   344 ;
                                     01B0   345 
                          07     11  01B0   346 	BRB	30$			;CHECK FOR ASTS 
                                     01B2   347 20$:
                                     01B2   348 	$HIBER_S			;GO TO SLEEP TILL AN AST
                                     01B9   349 30$:
            2B       0000'CF     E8  01B9   350 	BLBS	W^TST$GB_ASTFLAGS,40$	;JUMP IF TIMER EXPIRED
            50   00000000'FF     0F  01BE   351 	REMQUE	@TST$QB_QHEAD,R0	;DEQUEUE AN AST
                          EB     1D  01C5   352 	BVS	20$			;NOTHING THERE ,SLEEP
            52       0000'C0     D0  01C7   353 	MOVL	TST$QB_CODE(R0),R2		;QIO FUNCTION/CODE
            54   00000000'EF     3C  01CC   354 	MOVZWL	TST$GW_SIZE,R4		;SIZE FOR DATA MSG
            52            00     D1  01D3   355 	CMPL	#EFN_K_READ_MAIL,R2	;HAS A MAIL READ EXPIRED?
                          04     12  01D6   356 	BNEQU	35$			;NOPE A DATA AST
            54         00'8F     9A  01D8   357 	MOVZBL	#TST$K_MAILBUF,R4	;USE MAIL BUFFER SIZE
                                     01DC   358 35$:
            55       0000'C0     D0  01DC   359 	MOVL	TST$QB_ASTADR(R0),R5	;AST ADDRESS FOR QIO
                          FE1C'  30  01E1   360 	BSBW	TST$QIOAST		;DO QIO WITH AST
                                     01E4   361 	CHECK_SS			;MAKE SERVICE OKAY
                          D0     11  01E7   362 	BRB	30$			;DEQUEUE ANOTHER
                                     01E9   363 40$:
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page   9
X0.1-6          TST$DATA_DTS - DATA TEST                                                                                         (4)

            52            03     D0  01E9   364 	MOVL	#EFN_K_DISC_SYNC,R2	; GET FUNCTION/INDEX CODE
                          54     D4  01EC   365 	CLRL	R4			; P2 = 0
                          FE0F'  30  01EE   366 	BSBW	TST$QIOW		; DESTROY LINK WITH SYNC DISCONNECT
                                     01F1   367 	CHECK_IOSB TST$GQ_LINKIOSB	;MAKE SURE DISCONNECT COMPLETES
                                     01FB   368 
                                     01FB   369 ;
                                     01FB   370 ; DATA TEST IS FINISHED
                                     01FB   371 ;
                                     01FB   372 
            50       0000'CF     D0  01FB   373 	MOVL	W^TST$GL_STATUS,R0	; POST STATUS
                                     0200   374 DATA_FAILURE:				; ENTER HERE IF TEST FAILED
            51       0000'CF     9E  0200   375 	MOVAB	W^TST$GT_DATA,R1	; RETURN ADDRESS OF TEST ID STRING
                                 05  0205   376 	RSB				; EXIT
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page  10
X0.1-6          TST$DISC_DTS - DISCONNECT TEST                                                                                   (5)

                                     0206   378 	.SBTTL	TST$DISC_DTS - DISCONNECT TEST
                                 00000206   379 	.PSECT	TST$CODE	NOWRT
                                     0206   380 
                                     0206   381 ;++
                                     0206   382 ; FUNCTIONAL DESCRIPTION:
                                     0206   383 ;
                                     0206   384 ;	NONE
                                     0206   385 ;
                                     0206   386 ; CALLING SEQUENCE:
                                     0206   387 ;
                                     0206   388 ;	BSB/JSB	TST$DISC_DTS
                                     0206   389 ;
                                     0206   390 ; INPUT PARAMETERS:
                                     0206   391 ;
                                     0206   392 ;	R10	TEST TYPE
                                     0206   393 ;	R11	ADDRESS OF USERDATA COUNTED ASCII STRING
                                     0206   394 ;
                                     0206   395 ; IMPLICIT INPUTS:
                                     0206   396 ;
                                     0206   397 ;	TST$GT_USERDATA
                                     0206   398 ;
                                     0206   399 ; OUTPUT PARAMETERS:
                                     0206   400 ;
                                     0206   401 ;	R0	COMPLETION CODE
                                     0206   402 ;	R1	ADDRESS OF TEST ID STRING
                                     0206   403 ;	R2-R9	DESTROYED
                                     0206   404 ;
                                     0206   405 ; IMPLICIT OUTPUTS:
                                     0206   406 ;
                                     0206   407 ;	TST$GT_USERDATA UPDATED
                                     0206   408 ;
                                     0206   409 ; COMPLETION CODES:
                                     0206   410 ;
                                     0206   411 ;	R0	1 = SUCCESS; 0 = FAILURE
                                     0206   412 ;
                                     0206   413 ; SIDE EFFECTS:
                                     0206   414 ;
                                     0206   415 ;	NONE
                                     0206   416 ;
                                     0206   417 ;--
                                     0206   418 
                                     0206   419 TST$DISC_DTS::				; CONTROL POINT
                                     0206   420 
                                     0206   421 ;
                                     0206   422 ; FINISH BUILDING THE DISCONNECT TEST REQUEST IN THE USERDATA STRING.
                                     0206   423 ;
                                     0206   424 ; THE DTS/R DISTYPE FIELD VALUE IS DERIVED FROM BOTH THE /TYPE AND THE
                                     0206   425 ; /[NO]USERDATA QUALIFIER VALUES.
                                     0206   426 ;
                                     0206   427 
            58       0000'CF     9A  0206   428 	MOVZBL	W^TST$GB_TYPE,R8	; GET TYPE QUALIFIER VALUE
            59       0000'CF     9A  020B   429 	MOVZBL	W^TST$GB_RETURN,R9	; GET RETURN QUALIFIER VALUE
            59            01     9C  0210   430 	ROTL	#1,R9,R0		; CONTYPE = RETURN * 2 + TYPE
                          50         0213       
            58            50     81  0214   431 	ADDB3	R0,R8,2(R11)		; UPDATE DISTYPE FIELD
                       02 AB         0217       
            6B            02     90  0219   432 	MOVB	#2,(R11)		; UPDATE USERDATA STRING LENGTH
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page  11
X0.1-6          TST$DISC_DTS - DISCONNECT TEST                                                                                   (5)

                                     021C   433 	$CASEB	SELECTOR=R9,DISPL=<-	; CHECK RETURN OPTION:
                                     021C   434 		DISC_TEST-		;  /NORETURN
                                     021C   435 		DISC_TEST-		;  /RETURN=STANDARD
                                     021C   436 	>				;  /RETURN=RECEIVED
            50       0000'CF     9A  0224   437 	MOVZBL	W^TST$GT_DISC,R0	; ADD TEXT TO USERDATA STRING
            6B            50     80  0229   438 	ADDB2	R0,(R11)		; UPDATE USERDATA STRING LENGTH
       0001'CF            50     28  022C   439 	MOVC3	R0,W^TST$GT_DISC+1,3(R11) ; APPEND THE STRING
                       03 AB         0231       
                                     0233   440 
                                     0233   441 ;
                                     0233   442 ; ENTER INTO NSP CONNECT SEQUENCE WITH DTR.
                                     0233   443 ;
                                     0233   444 
                                     0233   445 DISC_TEST:				; START THE DISCONNECT TEST
                          0205   30  0233   446 	BSBW	TST$STARTUP_DTR		; INITIATE NSP CONNECT SEQUENCE
            10            50     E8  0236   447 	BLBS	R0,10$			; WAS LINK ESTABLISHED?
            50   01F5801B 8F     D0  0239   448 	MOVL	#DTS$_CINREJ,R0		;NOTE REJECTION
                                 D0  0240   449 	MOVL	W^TST$GQ_LINKIOSB+4,-
       0000'CF       0004'CF         0241   450 		W^TST$GL_FAOARG		;NOTE ABORT REASON
                          73     11  0247   451 	BRB	DISC_FAILURE		; NO, SOMETHING WENT WRONG
                                     0249   452 
                                     0249   453 ;
                                     0249   454 ; WAIT FOR DTR TO DISCONNECT THE LINK
                                     0249   455 ;
                                     0249   456 
            52            00     D0  0249   457 10$:	MOVL	#EFN_K_READ_MAIL,R2	; GET FUNCTION/INDEX CODE
            54         00'8F     9A  024C   458 	MOVZBL	#TST$K_MAILBUF,R4	; GET MAILBOX BUFFER SIZE
                          FDAD'  30  0250   459 	BSBW	TST$QIOW		; WAIT FOR RESPONSE
                          FDAA'  30  0253   460 	BSBW	TST$EXAM_MAIL		; PARSE MAILBOX MESSAGE
            52            04     D0  0256   461 	MOVL	#EFN_K_DISC_ABRT,R2	; GET FUNCTION/INDEX CODE
                          54     D4  0259   462 	CLRL	R4			; P2 = 0
                          FDA2'  30  025B   463 	BSBW	TST$QIOW		; DISCONNECT ABORT THE LINK
                                     025E   464 	CHECK_IOSB TST$GQ_LINKIOSB	;MAKE SURE ABORT COMPLETES
                                     0268   465 
                                     0268   466 ;
                                     0268   467 ; STORE THE EXPECTED DISCONNECT SYNCHRONOUS/ABORT CODE ON THE STACK AND BUILD
                                     0268   468 ; THE EXPECTED RESPONSE COUNTED ASCII STRING IN TST$GT_USERDATA TO COMPARE
                                     0268   469 ; AGAINST THE ACTUAL RESPONSE RECEIVED FROM DTR.
                                     0268   470 ;
                                     0268   471 
                                     0268   472 DISC_EXPECTED:				;
            7E            33     B0  0268   473 	MOVW	#MSG$_DISCON,-(SP)	; ASSUME SYNCHRONOUS DISCONNECT
            03            58     E9  026B   474 	BLBC	R8,5$			; BRANCH IF SYNC DISC SPECIFIED
            6E            30     B0  026E   475 	MOVW	#MSG$_ABORT,(SP)	; NO, DISC ABORT IS SPECIFIED
                                     0271   476 5$:	$CASEB	SELECTOR=R9,DISPL=<-	; CHECK USERDATA OPTION:
                                     0271   477 		10$-			;  /NOUSERDATA
                                     0271   478 		20$-			;  /USERDATA=STANDARD
                                     0271   479 		DISC_RESPONSE-		;  /USERDATA=RECEIVED
                                     0271   480 	>				;
                          6B     94  027B   481 10$:	CLRB	(R11)			; ZERO USERDATA STRING LENGTH
                          0A     11  027D   482 	BRB	DISC_RESPONSE		; CONTINUE
            6B            10     90  027F   483 20$:	MOVB	#16,(R11)		; UPDATE USERDATA STRING LENGTH
       0001'CF            10     28  0282   484 	MOVC3	#16,W^TST$GT_STANDARD+1,1(R11) ; COPY STANDARD DATA PATTERN
                       01 AB         0287       
                                     0289   485 
                                     0289   486 ;
                                     0289   487 ; CHECK ACTUAL RESPONSE FROM DTR AGAINST EXPECTED RESPONSE
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page  12
X0.1-6          TST$DISC_DTS - DISCONNECT TEST                                                                                   (5)

                                     0289   488 ;
                                     0289   489 
                                     0289   490 DISC_RESPONSE:				; INTERROGATE RESPONSE
            56            8E     B1  0289   491 	CMPW	(SP)+,R6		; COMPARE EXPECTED VS ACTUAL
                                     028C   492 					;  RESPONSE FROM DTR
                          09     13  028C   493 	BEQLU	10$			; IS IT OK?
            50   01F5802B 8F     D0  028E   494 	MOVL	#DTS$_DISBAD,R0		;NOTE WRONG KIND OF DISCONNECT
                          25     11  0295   495 	BRB	DISC_FAILURE		;
            67            6B     91  0297   496 10$:	CMPB	(R11),(R7)		; COMPARE EXPECTED VS ACTUAL
                                     029A   497 					;  USERDATA STRING LENGTH
                          09     13  029A   498 	BEQLU	20$			; IS IS OK?
            50   01F5800B 8F     D0  029C   499 	MOVL	#DTS$_BADUSRLEN,R0	;INVALID USERDATA LENGTH
                          17     11  02A3   500 	BRB	DISC_FAILURE		;
            50            6B     9A  02A5   501 20$:	MOVZBL	(R11),R0		; COMPARE EXPECTED VS ACTUAL
         01 AB            50     29  02A8   502 	CMPC3	R0,1(R11),1(R7)		;  USERDATA STRING VALUE
                       01 A7         02AC       
                          09     13  02AE   503 	BEQLU	DISC_SUCCESS		; IS IT OK?
            50   01F58013 8F     D0  02B0   504 	MOVL	#DTS$_BADUSRDAT,R0	;INVALID USER DATA
                          03     11  02B7   505 	BRB	DISC_FAILURE		; 
                                     02B9   506 DISC_SUCCESS:				; TEST WAS SUCCESSFUL
            50            01     D0  02B9   507 	MOVL	#1,R0			; SET COMPLETION CODE TO SUCCESS
                                     02BC   508 DISC_FAILURE:				; ENTER HERE IF TEST FAILED
            51       0000'CF     9E  02BC   509 	MOVAB	W^TST$GT_DISC,R1	; RETURN ADDRESS OF TEST ID STRING
                                 05  02C1   510 	RSB				; EXIT
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page  13
X0.1-6          TST$INTE_DTS - INTERRUPT TEST                                                                                    (6)

                                     02C2   512 	.SBTTL	TST$INTE_DTS - INTERRUPT TEST
                                 000002C2   513 	.PSECT	TST$CODE	NOWRT
                                     02C2   514 
                                     02C2   515 ;++
                                     02C2   516 ; FUNCTIONAL DESCRIPTION:
                                     02C2   517 ;
                                     02C2   518 ;	NONE
                                     02C2   519 ;
                                     02C2   520 ; CALLING SEQUENCE:
                                     02C2   521 ;
                                     02C2   522 ;	BSB/JSB	TST$INTE_DTS
                                     02C2   523 ;
                                     02C2   524 ; INPUT PARAMETERS:
                                     02C2   525 ;
                                     02C2   526 ;	R10	TEST TYPE
                                     02C2   527 ;	R11	ADDRESS OF USERDATA COUNTED ASCII STRING
                                     02C2   528 ;
                                     02C2   529 ; IMPLICIT INPUTS:
                                     02C2   530 ;
                                     02C2   531 ;	TST$GT_USERDATA
                                     02C2   532 ;
                                     02C2   533 ; OUTPUT PARAMETERS:
                                     02C2   534 ;
                                     02C2   535 ;	R0	COMPLETION CODE
                                     02C2   536 ;	R1	ADDRESS OF TEST ID STRING
                                     02C2   537 ;	R2-R9	DESTROYED
                                     02C2   538 ;
                                     02C2   539 ; IMPLICIT OUTPUTS:
                                     02C2   540 ;
                                     02C2   541 ;	TST$GT_USERDATA UPDATED
                                     02C2   542 ;
                                     02C2   543 ; COMPLETION CODES:
                                     02C2   544 ;
                                     02C2   545 ;	R0	1 = SUCCESS; 0 = FAILURE
                                     02C2   546 ;
                                     02C2   547 ; SIDE EFFECTS:
                                     02C2   548 ;
                                     02C2   549 ;	NONE
                                     02C2   550 ;
                                     02C2   551 ;--
                                     02C2   552 
                                     02C2   553 TST$INTE_DTS::				; CONTROL POINT
                                     02C2   554 
                                     02C2   555 ;
                                     02C2   556 ;VERIFY MESSAGE SIZE FIELD
                                     02C2   557 ;
                                     02C2   558 
            54       0000'CF     3C  02C2   559 	MOVZWL	W^TST$GW_SIZE,R4	;[TGD]VALUE OF SIZE FIELD
                                     02C7   560 	$CASEB SELECTOR=TST$GB_TYPE,DISPL=<-
                                     02C7   561 	    40$-			;SINK TEST
                                     02C7   562 	    10$-			;SEQUENCE TEST
                                     02C7   563 	    20$-			;PATTERN TEST
                                     02C7   564 	    40$-			;ECHO TEST
                                     02C7   565 		>
                                     02D7   566 10$:					;MIN SIZE OF SEQUENCE TEST IS 1
                                     02D7   567 
            50            04     D0  02D7   568 	MOVL	#4,R0			
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page  14
X0.1-6          TST$INTE_DTS - INTERRUPT TEST                                                                                    (6)

                          03     11  02DA   569 	BRB	30$			;GO TO COMMON CODE
                                     02DC   570 
                                     02DC   571 20$:					;MIN SIZE OF PATT CHECK IS 5
            50            05     D0  02DC   572 	MOVL	#5,R0
                                     02DF   573 30$:					;IF SIZE TOO SMALL THEN ERROR
            54            50     B1  02DF   574 	CMPW	R0,R4
                          06     15  02E2   575 	BLEQ	40$			;IF /SIZE EXCEEDS MIN THEN OKAY
            50            02     D0  02E4   576 	MOVL	#2,R0			;ERROR CODE
                          00EE   31  02E7   577 	BRW	INTE_FAILURE		;GO TO COMMON ERROR CODE
                                     02EA   578 40$:
                                     02EA   579 ;
                                     02EA   580 ; FINISH BUILDING THE INTERRUPT TEST REQUEST IN THE USERDATA STRING.
                                     02EA   581 ;
                                     02EA   582 
         02 AB       0000'CF     90  02EA   583 	MOVB	W^TST$GB_TYPE,2(R11)	; UPDATE INTTYPE FIELD
         03 AB       0000'CF     90  02F0   584 	MOVB	W^TST$GB_RQUEUE,3(R11)	; UPDATE INTFC FIELD
            6B            03     90  02F6   585 	MOVB	#3,(R11)		; UPDATE USERDATA STRING LENGTH
                                     02F9   586 
                                     02F9   587 ;
                                     02F9   588 ; ENTER INTO NSP CONNECT SEQUENCE WITH DTR.
                                     02F9   589 ;
                                     02F9   590 
                                     02F9   591 INTE_TEST:				; START THE INTE TEST
                          013F   30  02F9   592 	BSBW	TST$STARTUP_DTR		; INITIATE NSP CONNECT SEQUENCE
            0E            50     E8  02FC   593 	BLBS	R0,INTE_INIT		; WAS LINK ESTABLISHED?
            50   01F5801B 8F     D0  02FF   594 	MOVL	#DTS$_CINREJ,R0		;NOTE ABORTED CONNECT
                                 D0  0306   595 	MOVL	W^TST$GQ_LINKIOSB+4,-
       0000'CF       0004'CF         0307   596 		W^TST$GL_FAOARG	;NOTE REASON
                                     030D   597 
                                     030D   598 ;
                                     030D   599 ; INTERRUPT TEST INITIALIZATION
                                     030D   600 ;
                                     030D   601 
                                     030D   602 INTE_INIT:				; CONTINUE
                     0000'CF     7C  030D   603 	CLRQ	W^TST$GL_XMITDATA	; ZERO TRANSMIT AND RECEIVE
                                     0311   604 					;  MESSAGE COUNTERS
                     0000'CF     7C  0311   605 	CLRQ	W^TST$GL_XMITINTE	; ZERO TRANSMIT AND RECEIVE
                                     0315   606 					;  INTERRUPT MESSAGE COUNTERS
       0000'CF            01     D0  0315   607 	MOVL	#1,W^TST$GL_STATUS	; SET AST STATUS CODE TO SUCCESS
                     0000'CF     94  031A   608 	CLRB	W^TST$GB_ASTFLAGS	;NOTE TIMER RUNNING
   00000000'EF   00000000'EF     DE  031E   609 	MOVAL	TST$QB_QHEAD,TST$QB_QHEAD;INIT QUEUE HEAD
   00000004'EF   00000000'EF     DE  0329   610 	MOVAL	TST$QB_QHEAD,TST$QB_QHEAD+4
                                     0334   611 
                                     0334   612 ;
                                     0334   613 ; PUT REPETITIONS OF THE STANDARD DATA PATTERN IN THE MESSAGE BUFFER
                                     0334   614 ; BEGINNING AT BUFFER+4.
                                     0334   615 ;
                                     0334   616 
            53       0000'CF     9E  0334   617 	MOVAB	W^TST$GB_INTEBUF,R3	; GET ADDRESS OF MESSAGE
            83            01     D0  0339   618 	MOVL	#1,(R3)+		; INITIALIZE MESSAGE SEQUENCE NUMBER
            54       0000'CF     3C  033C   619 	MOVZWL	W^TST$GW_SIZE,R4	; GET MESSAGE SIZE
            04            54     B1  0341   620 	CMPW	R4,#4			;[TGD]ANY DAT IN MESSAGE
                          06     15  0344   621 	BLEQ	10$			;NOPE DONT FILL BUFFER
            54            04     C2  0346   622 	SUBL2	#4,R4			; REDUCE SIZE ACCORDINGLY
                          FCB4'  30  0349   623 	BSBW	TST$STANDARD		; PUT STD DATA PATTERN IN BUFFER
                                     034C   624 
                                     034C   625 10$:
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page  15
X0.1-6          TST$INTE_DTS - INTERRUPT TEST                                                                                    (6)

                                     034C   626 ;
                                     034C   627 ; SET TIMER 
                                     034C   628 ;
                                     034C   629 
       0000'CF       0000'CF     D0  034C   630 	MOVL	W^TST$GL_SECONDS,W^TST$GL_CLOCK	;SETUP COUNTDOWN LOCATION
                                     0353   631 	$SETIMR_S EFN=#EFN_K_TIMER-	;
                                     0353   632 		DAYTIM=W^TST$GQ_NANOSEC- ;
                                     0353   633 		ASTADR=W^TST$TIMER_DTS	;
                                     0366   634 	CHECK_SS			; CHECK STATUS CODE
                                     0369   635 
                                     0369   636 ;
                                     0369   637 ; TRANSMIT [AND RECEIVE] INTERRUPT MESSAGES UNTIL TIMER EXPIRES
                                     0369   638 ;
                                     0369   639 
            52            00     D0  0369   640 	MOVL	#EFN_K_READ_MAIL,R2	; GET FUNCTION/INDEX CODE
            54         00'8F     9A  036C   641 	MOVZBL	#TST$K_MAILBUF,R4	; GET MAILBOX BUFFER SIZE
            55       0000'CF     9E  0370   642 	MOVAB	W^TST$MAILAST_DTS,R5	; GET ADDRESS OF AST ROUTINE
                          FC88'  30  0375   643 	BSBW	TST$QIOAST		; ISSUE READ TO MAILBOX
            52            06     D0  0378   644 	MOVL	#EFN_K_XMIT_INTE,R2	; GET FUNCTION/INDEX CODE
            54       0000'CF     3C  037B   645 	MOVZWL	W^TST$GW_SIZE,R4	; GET MESSAGE SIZE
            55       0000'CF     9E  0380   646 	MOVAB	W^TST$INTEAST_DTS,R5	; GET ADDRESS OF AST ROUTINE
                          FC78'  30  0385   647 	BSBW	TST$QIOAST		; START UP TRANSMIT MESSAGE STREAM
                                     0388   648 
                                     0388   649 ;
                                     0388   650 ; WAIT EITHER FOR TIMER TO EXPIRE OR FOR LINK DISCONNECT
                                     0388   651 ;
                                     0388   652 
                                     0388   653 
                          07     11  0388   654 	BRB	30$			;CHECK FOR ASTS 
                                     038A   655 20$:
                                     038A   656 	$HIBER_S			;GO TO SLEEP TILL AN AST
                                     0391   657 30$:
            2B       0000'CF     E8  0391   658 	BLBS	W^TST$GB_ASTFLAGS,40$	;JUMP IF TIMER EXPIRED
            50   00000000'FF     0F  0396   659 	REMQUE	@TST$QB_QHEAD,R0	;DEQUEUE AN AST
                          EB     1D  039D   660 	BVS	20$			;NOTHING THERE ,SLEEP
            52       0000'C0     D0  039F   661 	MOVL	TST$QB_CODE(R0),R2		;QIO FUNCTION/CODE
            54   00000000'EF     3C  03A4   662 	MOVZWL	TST$GW_SIZE,R4		;SIZE FOR DATA MSG
            52            00     D1  03AB   663 	CMPL	#EFN_K_READ_MAIL,R2	;HAS A MAIL READ EXPIRED?
                          04     12  03AE   664 	BNEQU	35$			;NOPE A DATA AST
            54         00'8F     9A  03B0   665 	MOVZBL	#TST$K_MAILBUF,R4	;USE MAIL BUFFER SIZE
                                     03B4   666 35$:
            55       0000'C0     D0  03B4   667 	MOVL	TST$QB_ASTADR(R0),R5	;AST ADDRESS FOR QIO
                          FC44'  30  03B9   668 	BSBW	TST$QIOAST		;DO QIO WITH AST
                                     03BC   669 	CHECK_SS			;MAKE SERVICE OKAY
                          D0     11  03BF   670 	BRB	30$			;DEQUEUE ANOTHER
                                     03C1   671 40$:
            52            03     D0  03C1   672 	MOVL	#EFN_K_DISC_SYNC,R2	; GET FUNCTION/INDEX CODE
                          54     D4  03C4   673 	CLRL	R4			; P2 = 0
                          FC37'  30  03C6   674 	BSBW	TST$QIOW		; DESTROY LINK WITH SYNC DISCONNECT
                                     03C9   675 	CHECK_IOSB TST$GQ_LINKIOSB	;MAKE SURE DISCONNECT SUCCEEDS
                                     03D3   676 
                                     03D3   677 ;
                                     03D3   678 ; INTERRUPT TEST IS FINISHED
                                     03D3   679 ;
                                     03D3   680 
            50       0000'CF     D0  03D3   681 	MOVL	W^TST$GL_STATUS,R0	; POST STATUS
                                     03D8   682 INTE_FAILURE:				; ENTER HERE IF TEST FAILED
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page  16
X0.1-6          TST$INTE_DTS - INTERRUPT TEST                                                                                    (6)

            51       0000'CF     9E  03D8   683 	MOVAB	W^TST$GT_INTE,R1	; RETURN ADDRESS OF TEST ID STRING
                                 05  03DD   684 	RSB				; EXIT
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page  17
X0.1-6          TST$MISC_DTS - MISCELLANEOUS TEST                                                                                (7)

                                     03DE   686 	.SBTTL	TST$MISC_DTS - MISCELLANEOUS TEST
                                 000003DE   687 	.PSECT	TST$CODE	NOWRT
                                     03DE   688 
                                     03DE   689 ;++
                                     03DE   690 ; FUNCTIONAL DESCRIPTION:
                                     03DE   691 ;
                                     03DE   692 ;	NONE
                                     03DE   693 ;
                                     03DE   694 ; CALLING SEQUENCE:
                                     03DE   695 ;
                                     03DE   696 ;	BSB/JSB	TST$MISC_DTS
                                     03DE   697 ;
                                     03DE   698 ; INPUT PARAMETERS:
                                     03DE   699 ;
                                     03DE   700 ;	R10	TEST TYPE
                                     03DE   701 ;	R11	ADDRESS OF USERDATA COUNTED ASCII STRING
                                     03DE   702 ;
                                     03DE   703 ; IMPLICIT INPUTS:
                                     03DE   704 ;
                                     03DE   705 ;	TST$GT_USERDATA
                                     03DE   706 ;
                                     03DE   707 ; OUTPUT PARAMETERS:
                                     03DE   708 ;
                                     03DE   709 ;	R0	COMPLETION CODE
                                     03DE   710 ;	R1	ADDRESS OF TEST ID STRING
                                     03DE   711 ;	R2-R9	DESTROYED
                                     03DE   712 ;
                                     03DE   713 ; IMPLICIT OUTPUTS:
                                     03DE   714 ;
                                     03DE   715 ;	TST$GT_USERDATA UPDATED
                                     03DE   716 ;
                                     03DE   717 ; COMPLETION CODES:
                                     03DE   718 ;
                                     03DE   719 ; SIDE EFFECTS:
                                     03DE   720 ;
                                     03DE   721 ; SIDE EFFECTS:
                                     03DE   722 ;
                                     03DE   723 ;	NONE
                                     03DE   724 ;
                                     03DE   725 ;--
                                     03DE   726 
                                     03DE   727 TST$MISC_DTS::				; CONTROL POINT
                          0051   31  03DE   728 	BRW	MISC_SUCCESS		;
                                     03E1   729 
                                     03E1   730 ;
                                     03E1   731 ; FINISH BUILDING THE MISCELLANEOUS TEST REQUEST IN THE USERDATA STRING.
                                     03E1   732 ;
                                     03E1   733 
         02 AB       0000'CF     90  03E1   734 	MOVB	W^TST$GB_TYPE,2(R11)	; UPDATE MISCTYPE FIELD
            6B            02     D0  03E7   735 	MOVL	#2,(R11)		; UPDATE USERDATA STRING LENGTH
                                     03EA   736 
                                     03EA   737 ;
                                     03EA   738 ; ENTER INTO NSP CONNECT SEQUENCE WITH DTR.
                                     03EA   739 ;
                                     03EA   740 
                                     03EA   741 MISC_TEST:				; START THE DATA TEST
                          004E   30  03EA   742 	BSBW	TST$STARTUP_DTR		; INITIATE NSP CONNECT SEQUENCE
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page  18
X0.1-6          TST$MISC_DTS - MISCELLANEOUS TEST                                                                                (7)

            03            50     E8  03ED   743 	BLBS	R0,5$			; WAS LINK ESTABLISHED?
                          0042   31  03F0   744 	BRW	MISC_FAILURE		; NO, SOMETHING WENT WRONG
                                     03F3   745 
                                     03F3   746 5$:	$CASEB	SELECTOR=R10,DISPL=<-	; START THE MISCELLANEOUS TEST
                                     03F3   747 		10$-			;  ILLEGAL NODE NAME
                                     03F3   748 		20$-			;  NON-EXISTANT OBJECTTYPE
                                     03F3   749 		30$-			;  LOGICAL LINK ADDRESS
                                     03F3   750 	>				;
            7E       0000'CF     7D  03FD   751 10$:	MOVQ	W^TST$GT_NODENAME,-(SP)	; SAVE NODENAME
00'CF   3A4C4147 454C4C49 8F     7D  0402   752 	MOVQ	#^A/ILLEGAL:/,W^TST$GT_NODENAME ; ONLY ONE COLON
                                 00  040E       
                          20     10  040F   753 	BSBB	MISC_COMMON		; COMMON CODE
       0000'CF            8E     7D  0411   754 	MOVQ	(SP)+,W^TST$GT_NODENAME	; RESTORE NODENAME
                          1A     11  0416   755 	BRB	MISC_SUCCESS		; FINISHED
            7E       0000'CF     B0  0418   756 20$:	MOVW	W^TST$GT_OBJTYPE,-(SP)	; SAVE OBJECTTYPE
       0000'CF       3935 8F     B0  041D   757 	MOVW	#^A/59/,W^TST$GT_OBJTYPE ; UNKNOWN OBJECTTYPE
                          0B     10  0424   758 	BSBB	MISC_COMMON		; COMMON CODE
       0000'CF            8E     B0  0426   759 	MOVW	(SP)+,W^TST$GT_OBJTYPE	; RESTORE OBJECTTYPE
                          05     11  042B   760 	BRB	MISC_SUCCESS		; FINISHED
                          02     10  042D   761 30$:	BSBB	MISC_COMMON		; COMMON GODE
                          01     11  042F   762 	BRB	MISC_SUCCESS		; FINISHED
                                     0431   763 MISC_COMMON:				;
                                 05  0431   764 	RSB				; EXIT
                                     0432   765 MISC_SUCCESS:				; TEST WAS SUCCESSFUL
            50            01     D0  0432   766 	MOVL	#1,R0			; SET COMPLETION CODE TO SUCCESS
                                     0435   767 MISC_FAILURE:				; ENTER HERE IF TEST FAILED
            51       0000'CF     9E  0435   768 	MOVAB	W^TST$GT_MISC,R1	; RETURN ADDRESS OF TEST ID STRING
                                 05  043A   769 	RSB				; EXIT
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page  19
X0.1-6          TST$STARTUP_DTR - DTS/DTR INITIALIZATION                                                                         (8)

                                     043B   771 	.SBTTL	TST$STARTUP_DTR - DTS/DTR INITIALIZATION
                                 0000043B   772 	.PSECT	TST$CODE	NOWRT
                                     043B   773 
                                     043B   774 ;++
                                     043B   775 ; FUNCTIONAL DESCRIPTION:
                                     043B   776 ;
                                     043B   777 ;	NONE
                                     043B   778 ;
                                     043B   779 ; CALLING SEQUENCE:
                                     043B   780 ;
                                     043B   781 ;	BSB/JSB	TST$STARTUP_DTR
                                     043B   782 ;
                                     043B   783 ; INPUT PARAMETERS:
                                     043B   784 ;
                                     043B   785 ;	NONE
                                     043B   786 ;
                                     043B   787 ; IMPLICIT INPUTS:
                                     043B   788 ;
                                     043B   789 ;	TST$GT_NODENAME	- COUNTED ASCII STRING OF NODENAME
                                     043B   790 ;	TST$GT_OBJTYPE	- COUNTED ASCII STRING OF NSP OBJECT TYPE
                                     043B   791 ;	TST$GT_USERDATA	- COUNTED ASCII STRING OF NSP USERDATA
                                     043B   792 ;			  CONTAINING TEST REQUEST PARAMETERS FOR DTR
                                     043B   793 ;
                                     043B   794 ; OUTPUT PARAMETERS:
                                     043B   795 ;
                                     043B   796 ;	R0	COMPLETION CODE
                                     043B   797 ;	R6	MAILBOX MESSAGE CODE
                                     043B   798 ;	R7	ADDRESS OF RECEIVED MAILBOX DATA LESS HEADER STORED AS A
                                     043B   799 ;		COUNTED ASCII STRING
                                     043B   800 ;
                                     043B   801 ; IMPLICIT OUTPUTS:
                                     043B   802 ;
                                     043B   803 ;	TST$GQ_ACCESS	- QIO ACCESS DESCRIPTOR BLOCK
                                     043B   804 ;	TST$GB_NCB	- CONSTRUCTED NETWORK CONNECT BLOCK
                                     043B   805 ;	TST$GW_MAILCODE	- MAILBOX MESSAGE CODE
                                     043B   806 ;	TST$GW_DEV_UNIT	- DEVICE UNIT NUMBER
                                     043B   807 ;	TST$GT_DEV_NAME	- DEVICE NAME STORED AS A COUNTED STRING
                                     043B   808 ;	TST$GT_MAILDATA	- DATA FIELD OF MAILBOX MESSAGE STORED AS A
                                     043B   809 ;			  COUNTED STRING
                                     043B   810 ;
                                     043B   811 ; COMPLETION CODES:
                                     043B   812 ;
                                     043B   813 ;	R0	1 = LINK WAS ESTABLISHED; 0 = LINK WAS NOT ESTABLISHED
                                     043B   814 ;
                                     043B   815 ; SIDE EFFECTS:
                                     043B   816 ;
                                     043B   817 ;	NONE
                                     043B   818 ;
                                     043B   819 ;--
                                     043B   820 
                                     043B   821 TST$STARTUP_DTR::			; CONTROL POINT
                          3C     BB  043B   822 	PUSHR	#^M<R2,R3,R4,R5>	; SAVE REGISTERS
            56       0000'CF     DE  043D   823 	MOVAL	W^TST$GQ_ACCESS,R6	; GET ADDRESS OF QIO ACCESS
                                     0442   824 					; DESCRIPTOR BLOCK
            53       0000'CF     DE  0442   825 	MOVAL	W^TST$GB_NCB,R3		; GET ADDRESS OF NCB BUFFER
         04 A6            53     D0  0447   826 	MOVL	R3,4(R6)		; UPDATE ACCESS DESCRIPTOR BLOCK
            50       0000'CF     9A  044B   827 	MOVZBL	W^TST$GT_NODENAME,R0	; COPY NODENAME INTO NCB
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page  20
X0.1-6          TST$STARTUP_DTR - DTS/DTR INITIALIZATION                                                                         (8)

       0001'CF            50     28  0450   828 	MOVC3	R0,W^TST$GT_NODENAME+1,(R3) ; SOURCE IS COUNTED ASCII STRING
                          63         0455       
            83       3A3A 8F     B0  0456   829 	MOVW	#^A\::\,(R3)+		; APPEND DELIMITER
            83            22     90  045B   830 	MOVB	#^A\"\,(R3)+		; APPEND LEADING QUOTE
            50       0000'CF     9A  045E   831 	MOVZBL	W^TST$GT_OBJTYPE,R0	; COPY OBJECTTYPE INTO NCB
       0001'CF            50     28  0463   832 	MOVC3	R0,W^TST$GT_OBJTYPE+1,(R3) ; SOURCE IS COUNTED ASCII STRING
                          63         0468       
            83            2F     90  0469   833 	MOVB	#^A\/\,(R3)+		; APPEND DELIMITER
                          83     B4  046C   834 	CLRW	(R3)+			; ZERO NETACP LINK INDEX
            50       0000'CF     9A  046E   835 	MOVZBL	W^TST$GT_USERDATA,R0	; COPY USERDATA STRING TO NCB
                          50     D6  0473   836 	INCL	R0			;  (INCLUDING THE COUNT)
       0000'CF            50     28  0475   837 	MOVC3	R0,W^TST$GT_USERDATA,(R3) ; SOURCE IS COUNTED ASCII STRING
                          63         047A       
            83            22     90  047B   838 	MOVB	#^A\"\,(R3)+		; APPEND TRAILING QUOTE
            53         04 A6     C3  047E   839 	SUBL3	4(R6),R3,(R6)		; CALCULATE AND STORE LENGTH OF NCB
                          66         0482       
                                     0483   840 
                                     0483   841 ;
                                     0483   842 ; ISSUE THE NSP CONNECT INITIATE REQUEST TO ACTIVATE DTR
                                     0483   843 ;
                                     0483   844 
                                     0483   845 	$CANCEL_S CHAN=W^TST$GW_MAILCHAN	;CANCEL ANY MAILBOX READS
                                     048F   846 	CHECK_SS
                          FB6B'  30  0492   847 	BSBW	TST$FLUSH_MAIL		;CLEAN OUT ANYTHING IN MAILBOX
            52            01     D0  0495   848 	MOVL	#EFN_K_CONN_INIT,R2	; GET FUNCTION/INDEX CODE
            54            56     D0  0498   849 	MOVL	R6,R4			; P2 = ADDRESS OF ACCESS DESC BLOCK
                          FB62'  30  049B   850 	BSBW	TST$QIOW		; ISSUE CONNECT INITIATE
                                     049E   851 	CHECK_IOSB TST$GQ_LINKIOSB	;MAKE SURE CONNECT SENT OKAY
                                     04A8   852 
                                     04A8   853 ;
                                     04A8   854 ; DETERMINE WHETHER LINK HAS BEEN ESTABLISHED OR NOT.
                                     04A8   855 ;
                                     04A8   856 
            52            00     D0  04A8   857 	MOVL	#EFN_K_READ_MAIL,R2	; GET FUNCTION/INDEX CODE
            54         00'8F     9A  04AB   858 	MOVZBL	#TST$K_MAILBUF,R4	; GET MAILBOX BUFFER SIZE
                          FB4E'  30  04AF   859 	BSBW	TST$QIOW		; WAIT FOR RESPONSE
                          FB4B'  30  04B2   860 	BSBW	TST$EXAM_MAIL		; PARSE MAILBOX MESSAGE
                          FB48'  30  04B5   861 	BSBW	TST$FLUSH_MAIL		; DISCARD RESPONSE IN MAILBOX
                          50     D4  04B8   862 	CLRL	R0			; SET COMPLETION CODE TO FAILURE
            31            56     B1  04BA   863 	CMPW	R6,#MSG$_CONFIRM	; IS LINK ESTABLISHED?
                          02     12  04BD   864 	BNEQU	10$			; NO
                          50     D6  04BF   865 	INCL	R0			; YES, SET COMP CODE TO SUCCESS
                          3C     BA  04C1   866 10$:	POPR	#^M<R2,R3,R4,R5>	; RESTORE REGISTERS
                                 05  04C3   867 	RSB				; EXIT
                                     04C4   868 	.END
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page  21
SYMBOL TABLE                                                                                                                     (8)

$$COUNT        = 00000003            EFN_K_SIGNAL   = 00000009            MSG$_XM_ATTN   = 0000000D            
BIT...         = 0000003B            EFN_K_TIMER    = 00000008            MSG$_XM_DATAVL = 0000000B            
CONN_EXPECTED    00000045 R     03   EFN_K_XMIT_DATA= 00000005            MSG$_XM_SHUTDN = 0000000C            
CONN_FAILURE     000000B5 R     03   EFN_K_XMIT_INTE= 00000006            ST               00000000 RG    03   
CONN_RESPONSE    0000005D R     03   GBL...         = 00000000            SYS$CANCEL       ********   X   03   
CONN_SUCCESS     000000B2 R     03   INTE_FAILURE     000003D8 R     03   SYS$HIBER        ********   X   03   
CONN_TEST        0000002D R     03   INTE_INIT        0000030D R     03   SYS$SETIMR       ********   X   03   
DATA_FAILURE     00000200 R     03   INTE_TEST        000002F9 R     03   TST$CHECK_IOSB   ********   X   03   
DATA_INIT        0000011F R     03   K_LIST_MEB     = 00000000            TST$CHECK_SS     ********   X   03   
DATA_TEST        00000108 R     03   MAX_K_BACK     = 00000080            TST$CONN_DTS     00000000 RG    03   
DFT_K_BACK     = 00000000            MAX_K_DISPLAY  = 00000026            TST$DATA_DTS     000000BB RG    03   
DFT_K_DISPLAY  = 00000000            MAX_K_NAK      = 00000080            TST$DISC_DTS     00000206 RG    03   
DFT_K_FLOW     = 00000002            MAX_K_RQUEUE_DA= 00000008            TST$EXAM_MAIL    ********   X   03   
DFT_K_NAK      = 00000000            MAX_K_RQUEUE_IN= 00000008            TST$FLUSH_MAIL   ********   X   03   
DFT_K_PRINT    = 00000000            MAX_K_SIZE_DA  = 00001000            TST$GB_ASTFLAGS  ********   X   03   
DFT_K_RETURN_CO= 00000000            MAX_K_SIZE_IN  = 00000010            TST$GB_BACK      ********   X   03   
DFT_K_RETURN_DI= 00000000            MAX_K_SPEED    = 000F4240            TST$GB_FLOW      ********   X   03   
DFT_K_RQUEUE_DA= 00000001            MAX_K_SQUEUE_DA= 00000008            TST$GB_INTEBUF   ********   X   03   
DFT_K_RQUEUE_IN= 00000001            MAX_K_SQUEUE_IN= 00000008            TST$GB_NAK       ********   X   03   
DFT_K_SIZE_DA  = 00000080            MAX_K_TIME_DA  = 00057E40            TST$GB_NCB       ********   X   03   
DFT_K_SIZE_IN  = 00000010            MAX_K_TIME_IN  = 00057E40            TST$GB_RETURN    ********   X   03   
DFT_K_SPEED    = 000F4240            MISC_COMMON      00000431 R     03   TST$GB_RQUEUE    ********   X   03   
DFT_K_SQUEUE_DA= 00000001            MISC_FAILURE     00000435 R     03   TST$GB_TYPE      ********   X   03   
DFT_K_SQUEUE_IN= 00000001            MISC_SUCCESS     00000432 R     03   TST$GB_XMITBUF   ********   X   03   
DFT_K_STAT     = 00000001            MISC_TEST        000003EA R     03   TST$GL_CLOCK     ********   X   03   
DFT_K_TIME_DA  = 0000001E            MSG$_ABOOPR    = 00000011            TST$GL_FAOARG    ********   X   03   
DFT_K_TIME_IN  = 0000001E            MSG$_ABORT     = 00000030            TST$GL_SECONDS   ********   X   03   
DFT_K_TYPE_CO  = 00000001            MSG$_ACCRSP    = 00000021            TST$GL_STATUS    ********   X   03   
DFT_K_TYPE_DA  = 00000000            MSG$_CONFIRM   = 00000031            TST$GL_XMITDATA  ********   X   03   
DFT_K_TYPE_DI  = 00000001            MSG$_CONNECT   = 00000032            TST$GL_XMITINTE  ********   X   03   
DFT_K_TYPE_IN  = 00000000            MSG$_CRUNSOLIC = 00000002            TST$GQ_ACCESS    ********   X   03   
DFT_K_TYPE_MI  = 00000000            MSG$_DELPROC   = 00000003            TST$GQ_LINKIOSB  ********   X   03   
DISC_EXPECTED    00000268 R     03   MSG$_DELSMB    = 00000014            TST$GQ_NANOSEC   ********   X   03   
DISC_FAILURE     000002BC R     03   MSG$_DEVOFFLIN = 00000005            TST$GT_CONN      ********   X   03   
DISC_RESPONSE    00000289 R     03   MSG$_DEVONLIN  = 00000007            TST$GT_DATA      ********   X   03   
DISC_SUCCESS     000002B9 R     03   MSG$_DISCON    = 00000033            TST$GT_DISC      ********   X   03   
DISC_TEST        00000233 R     03   MSG$_EXIT      = 00000034            TST$GT_INTE      ********   X   03   
DTS$_BADDATDAT = 01F58033            MSG$_INIOPR    = 00000010            TST$GT_MISC      ********   X   03   
DTS$_BADDATLEN = 01F58023            MSG$_INTMSG    = 00000035            TST$GT_NODENAME  ********   X   03   
DTS$_BADFUNC   = 01F5805B            MSG$_OPREPLY   = 00000009            TST$GT_OBJTYPE   ********   X   03   
DTS$_BADMAIL   = 01F5803B            MSG$_OPRQST    = 00000008            TST$GT_STANDARD  ********   X   03   
DTS$_BADPAT    = 01F58043            MSG$_PATHLOST  = 00000036            TST$GT_USERDATA  ********   X   03   
DTS$_BADSEQNUM = 01F5804B            MSG$_PROTOCOL  = 00000037            TST$GW_MAILCHAN  ********   X   03   
DTS$_BADSUBFCN = 01F58053            MSG$_REJECT    = 00000038            TST$GW_SIZE      ********   X   03   
DTS$_BADUSRDAT = 01F58013            MSG$_RESOPR    = 00000013            TST$INTEAST_DTS  ********   X   03   
DTS$_BADUSRLEN = 01F5800B            MSG$_SCANBAD   = 00000028            TST$INTE_DTS     000002C2 RG    03   
DTS$_CINBAD    = 01F58003            MSG$_SCANRSP   = 00000029            TST$K_MAILBUF    ********   X   03   
DTS$_CINREJ    = 01F5801B            MSG$_SMBDON    = 00000009            TST$MAILAST_DTS  ********   X   03   
DTS$_DISBAD    = 01F5802B            MSG$_SMBINI    = 00000008            TST$MISC_DTS     000003DE RG    03   
DTS$_INVOPTION = 01F58063            MSG$_SMBRSP    = 00000020            TST$QB_ASTADR    ********   X   03   
EFN_K_CONN_ACCE= 00000001            MSG$_SNDACC    = 0000000A            TST$QB_CODE      ********   X   03   
EFN_K_CONN_INIT= 00000001            MSG$_SNDSMB    = 00000004            TST$QB_QHEAD     ********   X   03   
EFN_K_CONN_REJE= 00000002            MSG$_SUSOPR    = 00000012            TST$QIOAST       ********   X   03   
EFN_K_DISC_ABRT= 00000004            MSG$_THIRDPARTY= 00000039            TST$QIOW         ********   X   03   
EFN_K_DISC_SYNC= 00000003            MSG$_TIMEOUT   = 0000003A            TST$RECVAST_DTS  ********   X   03   
EFN_K_READ_MAIL= 00000000            MSG$_TRMHANGUP = 00000006            TST$STANDARD     ********   X   03   
EFN_K_RECV_DATA= 00000007            MSG$_TRMUNSOLIC= 00000001            TST$STARTUP_DTR  0000043B RG    03   
TST$DTSTEST     - DTS TEST ROUTINES                              22-AUG-1978 01:07:07   VAX-11 MACRO X0.3-11               Page  22
SYMBOL TABLE                                                                                                                     (8)

TST$TIMER_DTS    ********   X   03   
TST$XMITAST_DTS  ********   X   03   
VAL_K_BACK_NO  = 00000000            
VAL_K_DISP_NO  = 00000000            
VAL_K_FLOW_MESS= 00000002            
VAL_K_FLOW_NO  = 00000000            
VAL_K_FLOW_SEGM= 00000001            
VAL_K_NAK_NO   = 00000000            
VAL_K_PRIN_NO  = 00000000            
VAL_K_PRIN_YES = 00000080            
VAL_K_RETU_NO  = 00000000            
VAL_K_RETU_RECE= 00000004            
VAL_K_RETU_STAN= 00000002            
VAL_K_STAT_NO  = 00000000            
VAL_K_STAT_YES = 00000001            
VAL_K_TEST_CONN= 00000000            
VAL_K_TEST_DATA= 00000001            
VAL_K_TEST_DISC= 00000002            
VAL_K_TEST_INTE= 00000003            
VAL_K_TEST_MISC= 00000004            
VAL_K_TYPE_ABRT= 00000001            
VAL_K_TYPE_ACCE= 00000001            
VAL_K_TYPE_ECHO= 00000003            
VAL_K_TYPE_NAME= 00000000            
VAL_K_TYPE_PATT= 00000002            
VAL_K_TYPE_REJE= 00000000            
VAL_K_TYPE_SEQU= 00000001            
VAL_K_TYPE_SINK= 00000000            
VAL_K_TYPE_SYNC= 00000000            


PROGRAM SECTION SYNOPSIS

.  ABS  .        00000000      00     NOPIC   USR   CON   ABS   LCL NOSHR NOEXE NORD  NOWRT BYTE  
. BLANK .        00000000      01     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
$ABS$            00000000      02     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  
TST$CODE         000004C4      03     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD  NOWRT BYTE  


THERE WERE NO ERRORS OR WARNINGS.
19318. BYTES LEFT IN FREE MEMORY POOL.
12. BYTES OF RECLAIMED MEMORY.
OBJ$:DTSTEST,LIS$:DTSTEST/-SP=SRC$:DTPREFIX,DTSTEST
24 MLB DIR RDS - 264 GETS TO DEFINE 18 MACROS. 26 INTER. FILE WRITES. 
