TST$DTRMAIN     - DTR MAINLINE                                   22-AUG-1978 01:08:03   VAX-11 MACRO X0.3-11               Page   0
TABLE OF CONTENTS   

   (2)     114  DECLARATIONS
   (3)     135  TST$START_DTR - MAINLINE
TST$DTRMAIN     - DTR MAINLINE                                   22-AUG-1978 01:08:03   VAX-11 MACRO X0.3-11               Page   1
X0.1-10                                                                                                                          (1)

                                     0000     1 	.TITLE	TST$DTRMAIN - DTR MAINLINE
                                     0000     2 	.IDENT	/X0.1-10/
                                     0000     3 
                                     0000     4 ;
                                     0000     5 ;			  COPYRIGHT (c) 1977, 1978 BY
                                     0000     6 ;	      DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
                                     0000     7 ;
                                     0000     8 ; THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND  COPIED
                                     0000     9 ; ONLY  IN  ACCORDANCE  WITH  THE  TERMS  OF  SUCH  LICENSE AND WITH THE
                                     0000    10 ; INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE OR  ANY  OTHER
                                     0000    11 ; COPIES  THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY
                                     0000    12 ; OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE  IS  HEREBY
                                     0000    13 ; TRANSFERRED.
                                     0000    14 ;
                                     0000    15 ; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITHOUT  NOTICE
                                     0000    16 ; AND  SHOULD  NOT  BE  CONSTRUED  AS  A COMMITMENT BY DIGITAL EQUIPMENT
                                     0000    17 ; CORPORATION.
                                     0000    18 ;
                                     0000    19 ; DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE OR  RELIABILITY  OF  ITS
                                     0000    20 ; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.
                                     0000    21 ;
                                     0000    22 
                                     0000    23 ;++
                                     0000    24 ; FACILITY: DTS/DTR DECNET TEST PACKAGE
                                     0000    25 ;
                                     0000    26 ; ABSTRACT:
                                     0000    27 ;
                                     0000    28 ;	DTS/DTR ARE COOPERATING TEST PROGRAMS THAT EXERCISE NSP LEVEL
                                     0000    29 ;	FUNCTIONS ON A DECNET/VAX-11 NODE. DTS (SENDER) INITIATES A TEST
                                     0000    30 ;	SEQUENCE WHILE DTR (RECEIVER) IS THE PASSIVE PARTNER THAT PERFORMS
                                     0000    31 ;	THE REQUESTED FUNCTION. FIVE BASIC TESTS ARE IMPLEMENTED:
                                     0000    32 ;
                                     0000    33 ;	1.  THE CONNECT TEST EXERCISES THE CONNECT ACCEPT/REJECT LOGIC
                                     0000    34 ;	    WITH/WITHOUT OPTIONAL DATA.
                                     0000    35 ;
                                     0000    36 ;	2.  THE DATA TEST TRANSMITS DATA MESSAGES AND OPTIONALLY COMPUTES
                                     0000    37 ;	    THROUGHPUT STATISTICS. VARIOUS DATA VALIDATION CHECKS
                                     0000    38 ;	    AND FLOW CONTROL MECHANISMS MAY BE ENABLED.
                                     0000    39 ;
                                     0000    40 ;	3.  THE DISCONNECT TEST EXERCISES THE DISCONNECT SYNCHRONOUS/ABORT
                                     0000    41 ;	    LOGIC WITH/WITHOUT OPTIONAL DATA.
                                     0000    42 ;
                                     0000    43 ;	4.  THE INTERRUPT TEST TRANSMITS INTERRUPT MESSAGES AND OPTIONALLY
                                     0000    44 ;	    COMPUTES THROUGHPUT STATISTICS. VARIOUS DATA VALIDATION
                                     0000    45 ;	    CHECKS AND FLOW CONTROL MAY BE ENABLED.
                                     0000    46 ;
                                     0000    47 ;	5.  THE MISCELLANEOUS TEST EXERCISES DECNET/VAX-11 SPECIFIC
                                     0000    48 ;	    FUNCTIONS AND VALIDATES ERROR LOGIC.
                                     0000    49 ;
                                     0000    50 ; ENVIRONMENT: DTR RUNS IN USER MODE AND REQUIRES NETWORK PRIVILEGE.
                                     0000    51 ;
                                     0000    52 ; AUTHOR: JAMES A. KRYCKA,	CREATION DATE: 11-AUG-77
                                     0000    53 ;
                                     0000    54 ; MODIFICATIONS:
                                     0000    55 ;
                                     0000    56 ;--
TST$DTRMAIN     - DTR MAINLINE                                   22-AUG-1978 01:08:03   VAX-11 MACRO X0.3-11               Page   2
X0.1-10         DECLARATIONS                                                                                                     (2)

                                     0000    58 	.SBTTL	DECLARATIONS
                                     0000    59 
                                     0000    60 ;
                                     0000    61 ; INCLUDE FILES:
                                     0000    62 ;
                                     0000    63 	$DTSDEF
                                     0000    64 	CMDDEF				; DEFINE COMMAND LANGUAGE SYMBOLS
                                     0000    65 	.IIF NE	K_LIST_MEB, .LIST MEB	; DEFINED IN DTPREFIX.MAR
                                     0000    66 ;
                                     0000    67 ; MACROS:
                                     0000    68 ;
                                     0000    69 ;	NONE
                                     0000    70 ;
                                     0000    71 ; EQUATED SYMBOLS:
                                     0000    72 ;
                                     0000    73 ;	NONE
                                     0000    74 ;
                                     0000    75 ; OWN STORAGE:
                                     0000    76 ;
                                     0000    77 ;	NONE
TST$DTRMAIN     - DTR MAINLINE                                   22-AUG-1978 01:08:03   VAX-11 MACRO X0.3-11               Page   3
X0.1-10         TST$START_DTR - MAINLINE                                                                                         (3)

                                     0000    79 	.SBTTL	TST$START_DTR - MAINLINE
                                 00000000    80 	.PSECT	TST$CODE	NOWRT
                                     0000    81 R::					; SYMBOL FOR DEBUGGING PURPOSES
                                     0000    82 
                                     0000    83 ;++
                                     0000    84 ; FUNCTIONAL DESCRIPTION:
                                     0000    85 ;
                                     0000    86 ;	NONE
                                     0000    87 ;
                                     0000    88 ; CALLING SEQUENCE:
                                     0000    89 ;
                                     0000    90 ;	DTR IS INITIATED BY NETACP VIA AN NSP CONNECT INITIATE REQUEST
                                     0000    91 ;	FROM DTS.
                                     0000    92 ;
                                     0000    93 ; INPUT PARAMETERS:
                                     0000    94 ;
                                     0000    95 ;	NONE
                                     0000    96 ;
                                     0000    97 ; IMPLICIT INPUTS:
                                     0000    98 ;
                                     0000    99 ;	NONE
                                     0000   100 ;
                                     0000   101 ; OUTPUT PARAMETERS:
                                     0000   102 ;
                                     0000   103 ;	NONE
                                     0000   104 ;
                                     0000   105 ; IMPLICIT OUTPUTS:
                                     0000   106 ;
                                     0000   107 ;	NONE
                                     0000   108 ;
                                     0000   109 ; COMPLETION CODES:
                                     0000   110 ;
                                     0000   111 ;	NONE
                                     0000   112 ;
                                     0000   113 ; SIDE EFFECTS:
                                     0000   114 ;
                                     0000   115 ;	NONE
                                     0000   116 ;
                                     0000   117 ;--
                                     0000   118 
                               0000' 0000   119 	.ENTRY	TST$START_DTR,^M<>	; ENTRY POINT FROM EXECUTIVE
                                     0002   120 
                                     0002   121 ;
                                     0002   122 ; CREATE A TEMPORARY MAILBOX THAT WILL BE USED AS THE ASSOCIATED LINK
                                     0002   123 ; CHANNEL MAILBOX AND ASSIGN A CHANNEL TO IT.
                                     0002   124 ;
                                     0002   125 
                                     0002   126 	$CREMBX_S CHAN=W^TST$GW_MAILCHAN- ; STORE CHANNEL #
                                     0002   127 		MAXMSG=#TST$K_MAILBUF-	; SPECIFY LARGEST MESSAGE
                                     0002   128 		BUFQUO=#TST$K_MAILQUOTA- ; SPECIFY BUFFER QUOTA
                                     0002   129 		PROMSK=#TST$K_MAILPROT-	; SPECIFY PROTECTION FOR MAILBOX
                                     0002   130 		LOGNAM=W^TST$GQ_MAIL_DTR ; LOGICAL NAME OF MAILBOX
                                     0027   131 	CHECK_SS			; CHECK STATUS CODE
                                     002A   132 
                                     002A   133 ;
                                     002A   134 ; CREATE A CONTROL/INFORMATION PATH TO NETACP IN PREPARATION FOR
                                     002A   135 ; NON-TRANSPARENT NETWORK I/O. ALSO ASSOCIATE A MAILBOX WITH THE
TST$DTRMAIN     - DTR MAINLINE                                   22-AUG-1978 01:08:03   VAX-11 MACRO X0.3-11               Page   4
X0.1-10         TST$START_DTR - MAINLINE                                                                                         (3)

                                     002A   136 ; CHANNEL.
                                     002A   137 ;
                                     002A   138 
                                     002A   139 	$ASSIGN_S DEVNAM=W^TST$GQ_LINKNAME- ; "NET0" REFERS TO NETACP
                                     002A   140 		CHAN=W^TST$GW_LINKCHAN-	; STORE CHANNEL #
                                     002A   141 		MBXNAM=W^TST$GQ_MAIL_DTR ; SPECIFY ASSOCIATED MAILBOX
                                     003F   142 	CHECK_SS			; CHECK STATUS CODE
                                     0042   143 
                                     0042   144 ;
                                     0042   145 ; TRANSLATE THE LOGICAL NAME 'SYS$NET'. ITS EQUIVALENCE STRING IS
                                     0042   146 ; SET-UP BY NETACP TO BE THE ENTIRE NETWORK CONNECT BLOCK (NCB) WHICH
                                     0042   147 ; IS REQUIRED TO GAIN NON-TRANSPARENT ACCESS TO THE NETWORK.
                                     0042   148 ;
                                     0042   149 
            5B       0000'CF     7E  0042   150 	MOVAQ	W^TST$GQ_NCB,R11	; GET ADDRESS OF NCB DESCRIPTOR BLOCK
                                     0047   151 	$TRNLOG_S LOGNAM=W^TST$GQ_SYSNAME- ; ADDR OF LOGICAL NAME DESCRIPTOR
                                     0047   152 		RSLLEN=(R11)-		; UPDATE SIZE IN NCB DESCRIPTOR
                                     0047   153 		RSLBUF=(R11)		; PUT TRANSLATED STRING IN NCB
                                     005C   154 	CHECK_SS			; CHECK STATUS CODE
                                     005F   155 
                                     005F   156 ;++
                                     005F   157 ; THE GENERAL FORMAT OF THE EQUIVALENCE STRING DERIVED FROM SYS$NET IS:
                                     005F   158 ;
                                     005F   159 ;	nodespec::"objecttype=taskid/netacp_string"
                                     005F   160 ;
                                     005F   161 ; THE FOLLOWING WILL BE OUTPUT TO THE PRINT FILE:
                                     005F   162 ;
                                     005F   163 ;	nodespec::"objecttype=taskid"
                                     005F   164 ;
                                     005F   165 ; THE FOLLOWING WILL BE PUT INTO THE NCB FOR A CONNECT ACCEPT/REJECT
                                     005F   166 ; WITHOUT USERDATA:
                                     005F   167 ;
                                     005F   168 ;	nodespec::"objecttype=taskid/next_two_bytes"
                                     005F   169 ;
                                     005F   170 ; THE FOLLOWING WILL BE PUT INTO THE NCB FOR A CONNECT ACCEPT/REJECT
                                     005F   171 ; WITH USERDATA:
                                     005F   172 ;
                                     005F   173 ;	nodespec::"objecttype=taskid/next_two_bytes_plus_counted_string"
                                     005F   174 ;--
                                     005F   175 
            6B            2F     3A  005F   176 	LOCC	#^A\/\,(R11),@4(R11)	; FIND TASKID DELIMITER
                       04 BB         0062       
                          03     12  0064   177 	BNEQU	10$			; BRANCH IF SLASH FOUND
                          0168   31  0066   178 	BRW	EXIT			; OTHERWISE IT'S A FATAL ERROR!!
            51            03     C1  0069   179 10$:	ADDL3	#<1+2>,R1,R10		; COMPUTE ADDRESS OF USERDATA COUNTED
                          5A         006C       
                                     006D   180 					;  ASCII STRING BY SKIPPING OVER
                                     006D   181 					;  SLASH AND FIRST TWO BYTES OF
                                     006D   182 					;  NETACP_STRING DATA
            51         04 AB     C3  006D   183 	SUBL3	4(R11),R1,R6		; DETERMINE LENGTH OF NCB STRING
                          56         0071       
                                     0072   184 					;  THRU TASKID FIELD FOR PRINTOUT
                                     0072   185 					;  NOTE, NO MATCHING QUOTE INCLUDED!
            5A            11     C1  0072   186 	ADDL3	#<1+16>,R10,R2		; COMPUTE ADDRESS OF ONE BYTE PAST
                          52         0075       
                                     0076   187 					;  USERDATA STRING; NOTE, NETACP
                                     0076   188 					;  ALWAYS ALLOCATES 17 BYTES FOR
TST$DTRMAIN     - DTR MAINLINE                                   22-AUG-1978 01:08:03   VAX-11 MACRO X0.3-11               Page   5
X0.1-10         TST$START_DTR - MAINLINE                                                                                         (3)

                                     0076   189 					;  THE COUNTED STRING
            82            22     90  0076   190 	MOVB	#^A\"\,(R2)+		; TERMINATE NCB STRING WITH
                                     0079   191 					;  MATCHING QUOTE
            52         04 AB     C3  0079   192 	SUBL3	4(R11),R2,(R11)		; UPDATE SIZE OF SHORTENED NCB
                          6B         007D       
                                     007E   193 					;  STRING IN NCB DESCRIPTOR
                                     007E   194 
                                     007E   195 ;
                                     007E   196 ; PROCESS THE FUNCTION AND SUBFUNCTION VALUES OF THE REQUEST FROM DTSEND
                                     007E   197 ; STORED IN THE USERDATA FIELD OF THE NETACP_STRING.
                                     007E   198 ;
                                     007E   199 
            55         01 AA     9A  007E   200 	MOVZBL	1(R10),R5		; GET TESTTYPE FIELD VALUE
            55            07     E5  0082   201 	BBCC	#7,R5,20$		; IS PRINT OPTION SPECIFIED?
                          06         0085       
       0000'CF         80 8F     90  0086   202 	MOVB	#VAL_K_PRIN_YES,W^TST$GB_PRINT ; YES, UPDATE PRINT VALUE
       0000'CF            55     90  008C   203 20$:	MOVB	R5,W^TST$GB_TEST	; STORE TESTTYPE (FUNCTION) VALUE
            59         02 AA     9A  0091   204 	MOVZBL	2(R10),R9		; GET TYPE (SUBFUNCTION) VALUE
       0000'CF            59     90  0095   205 	MOVB	R9,W^TST$GB_TYPE	; STORE TYPE VALUE
                                     009A   206 
                                     009A   207 ;
                                     009A   208 ; OPEN THE PRINT FILE
                                     009A   209 ;
                                     009A   210 
                                 91  009A   211 	CMPB	W^TST$GB_PRINT,-	; IS PRINT OPTION SPECIFIED?
         80 8F       0000'CF         009B   212 		#VAL_K_PRIN_YES		;
                          6D     12  00A0   213 	BNEQ	DISPATCH		; BRANCH IF NO
                                     00A2   214 	$OPEN	FAB=W^TST$PRTFAB	; OPEN THE FILE
                                     00AD   215 	CHECK_RMS			; CHECK COMPLETION CODE
                                     00B0   216 	$CONNECT RAB=W^TST$PRTRAB	; ESTABLISH A RECORD STREAM
                                     00BB   217 	CHECK_RMS			; CHECK COMPLETION CODE
                                     00BE   218 
                                     00BE   219 ;
                                     00BE   220 ; OUTPUT THE INITIALIZATION MESSAGE TO THE PRINT FILE
                                     00BE   221 ;
                                     00BE   222 
                                     00BE   223 	$FAO_S	CTRSTR=W^TST$GQ_INIT-	; FORMAT MESSAGE
                                     00BE   224 		OUTLEN=W^TST$GW_PRTLEN-	;
                                     00BE   225 		OUTBUF=W^TST$GQ_PRTBUF-	;
                                     00BE   226 		P1=#TST$GT_DTR-		; INSERT DTR ID
                                     00BE   227 		P2=#TST$GT_VERSION-
                                     00BE   228 		P3=#0			; INSERT DATE AND TIME
                                     00DF   229 	CHECK_SS			; CHECK STATUS CODE
                          FF1B'  30  00E2   230 	BSBW	TST$PRINT_FAO		; PRINT MESSAGE
                                     00E5   231 
                                     00E5   232 ;
                                     00E5   233 ; OUTPUT THE IDENTITY OF THE REQUESTOR TO THE PRINT FILE
                                     00E5   234 ;
                                     00E5   235 
                                     00E5   236 	$FAO_S	CTRSTR=W^TST$GQ_CALLER-	; FORMAT MESSAGE
                                     00E5   237 		OUTLEN=W^TST$GW_PRTLEN-	;
                                     00E5   238 		OUTBUF=W^TST$GQ_PRTBUF-	;
                                     00E5   239 		P1=#TST$GT_DTR-		; INSERT DTR ID
                                     00E5   240 		P2=#TST$GT_VERSION-	; INSERT DTR VERSION NUMBER
                                     00E5   241 		P3=R6-			; LENGTH OF STRING LESS MATCHING QUOTE
                                     00E5   242 		P4=4(R11)		; ADDRESS OF NCB STRING
                                     0109   243 	CHECK_SS			; CHECK STATUS CODE
TST$DTRMAIN     - DTR MAINLINE                                   22-AUG-1978 01:08:03   VAX-11 MACRO X0.3-11               Page   6
X0.1-10         TST$START_DTR - MAINLINE                                                                                         (3)

                          FEF1'  30  010C   244 	BSBW	TST$PRINT_FAO		; PRINT MESSAGE
                                     010F   245 
                                     010F   246 ;
                                     010F   247 ; DISPATCH TO APPROPRIATE ROUTINE FOR EXECUTING THE COMMAND
                                     010F   248 ;
                                     010F   249 
                                     010F   250 DISPATCH:				;
                       23'AF     9F  010F   251 	PUSHAB	B^TEST_COMPLETE		; PUT RETURN ADDRESS ON STACK
                                     0112   252 					;  SO THAT ROUTINES EXECUTED BY
                                     0112   253 					;  'CASE' CAN EXIT VIA 'RSB'
                                     0112   254 	$CASEB	SELECTOR=R5,DISPL=<-	; DISPATCH TO:
                                     0112   255 			TST$CONN_DTR-	;  CONNECT TEST
                                     0112   256 			TST$DATA_DTR-	;  DATA TEST
                                     0112   257 			TST$DISC_DTR-	;  DISCONNECT TEST
                                     0112   258 			TST$INTE_DTR-	;  INTERRUPT TEST
                                     0112   259 			TST$MISC_DTR-	;  MISCELLANEOUS NSP TEST
                                     0112   260 	>				;
                          FEDD'  31  0120   261 	BRW	TST$BAD_DTR		;  INVALID TEST TYPE
                                     0123   262 
                                     0123   263 ;
                                     0123   264 ; RETURN HERE AFTER COMPLETING THE TEST
                                     0123   265 ;
                                     0123   266 
                                     0123   267 TEST_COMPLETE:				;
                                 91  0123   268 	CMPB	W^TST$GB_PRINT,-	; IS PRINT OPTION SPECIFIED?
         80 8F       0000'CF         0124   269 		#VAL_K_PRIN_YES		;
                          7D     12  0129   270 	BNEQ	TERMINATE		; BRANCH IF NO
                                     012B   271 
                                     012B   272 ;
                                     012B   273 ; OUTPUT END-OF-TEST MESSAGE TO THE PRINT FILE
                                     012B   274 ;
                                     012B   275 
       0000'CF            03     B0  012B   276 	MOVW	#3,W^TST$GT_DTSMSG	;ASSUME THERE IS AN FAO ARG
       0000'CF            50     D0  0130   277 	MOVL	R0,W^TST$GL_DTERROR	;SETUP ERROR CODE
            50            01     D1  0135   278 	CMPL	#1,R0
                          05     12  0138   279 	BNEQU	1$
       0000'CF            01     B0  013A   280 	MOVW	#1,W^TST$GT_DTSMSG
                                     013F   281 1$:
                                     013F   282 	$PUTMSG_S	MSGVEC=W^TST$GT_DTSMSG-
                                     013F   283 			FACNAM=W^TST$GQ_DTRDESC
                                     0150   284 	CHECK_SS			; CHECK STATUS CODE
       0000'CF            01     D1  0153   285 	CMPL	#1,W^TST$GL_DTERROR
                          03     13  0158   286 	BEQLU	2$
                          004B   31  015A   287 	BRW	W^TERMINATE		;LEAVE DTR
                                     015D   288 2$:
            01       0000'CF     91  015D   289 	CMPB	W^TST$GB_TEST,#VAL_K_TEST_DATA	;DATA TEST?
                          0E     13  0162   290 	BEQLU	SUMMARY			; YES, THERE'S MORE TO DO
            03       0000'CF     91  0164   291 	CMPB	W^TST$GB_TEST,#VAL_K_TEST_INTE ; WAS THIS AN INTERRUPT TEST?
                          3D     12  0169   292 	BNEQU	TERMINATE		; NO, FINISHED
                                 7D  016B   293 	MOVQ	W^TST$GL_XMITINTE,-	; YES, COPY TRANSMIT AND RECEIVE
       0000'CF       0000'CF         016C   294 		W^TST$GL_XMITDATA	;  INTE COUNTERS TO DATA COUNTERS
                                     0172   295 
                                     0172   296 ;
                                     0172   297 ; OUTPUT DATA/INTERRUPT TEST SUMMARY INFORMATION TO THE PRINT FILE
                                     0172   298 ;
                                     0172   299 
                                     0172   300 SUMMARY:				;
TST$DTRMAIN     - DTR MAINLINE                                   22-AUG-1978 01:08:03   VAX-11 MACRO X0.3-11               Page   7
X0.1-10         TST$START_DTR - MAINLINE                                                                                         (3)

            50       0000'CF     3C  0172   301 	MOVZWL	W^TST$GW_SIZE,R0	; GET MESSAGE SIZE
                                 C1  0177   302 	ADDL3	W^TST$GL_XMITDATA,-	; CALCULATE TOTAL NUMBER OF
       0000'CF       0000'CF         0178   303 		W^TST$GL_RECVDATA,R1	; MESSAGES TRANSFERRED
                          51         017E       
            51            50     C5  017F   304 	MULL3	R0,R1,R2		; CALCULATE TOTAL NUMBER OF
                          52         0182       
                                     0183   305 					;  BYTES TRANSFERRED
                                     0183   306 	$FAO_S	CTRSTR=W^TST$GQ_STAT3-	; FORMAT MESSAGE
                                     0183   307 		OUTLEN=W^TST$GW_PRTLEN-	;
                                     0183   308 		OUTBUF=W^TST$GQ_PRTBUF-	;
                                     0183   309 		P1=R0-			; DATA MESSAGE SIZE
                                     0183   310 		P2=W^TST$GL_XMITDATA-	; TOTAL # OF MESSAGES TRANSMITTED
                                     0183   311 		P3=W^TST$GL_RECVDATA-	; TOTAL # OF MESSAGES RECEIVED
                                     0183   312 		P4=R2			; TOTAL # BYTES TRANSFERRED
                                     01A2   313 	CHECK_SS			; CHECK STATUS CODE
                          FE58'  30  01A5   314 	BSBW	TST$PRINT_FAO		; PRINT MESSAGE
                                     01A8   315 
                                     01A8   316 ;
                                     01A8   317 ; OUTPUT TERMINATION MESSAGE TO THE PRINT FILE
                                     01A8   318 ;
                                     01A8   319 
                                     01A8   320 TERMINATE:				;
                                 91  01A8   321 	CMPB	W^TST$GB_PRINT,-	; IS PRINT OPTION SPECIFIED?
         80 8F       0000'CF         01A9   322 		#VAL_K_PRIN_YES		;
                          21     12  01AE   323 	BNEQ	EXIT			; BRANCH IF NO
                                     01B0   324 	$FAO_S	CTRSTR=W^TST$GQ_TERM-	; FORMAT MESSAGE
                                     01B0   325 		OUTLEN=W^TST$GW_PRTLEN-	;
                                     01B0   326 		OUTBUF=W^TST$GQ_PRTBUF-	;
                                     01B0   327 		P1=#TST$GT_DTR-		; INSERT DTR ID
                                     01B0   328 		P2=#0			; INSERT DATE AND TIME
                                     01CB   329 	CHECK_SS			; CHECK STATUS CODE
                          FE2F'  30  01CE   330 	BSBW	TST$PRINT_FAO		; PRINT MESSAGE
                                     01D1   331 
                                     01D1   332 ;
                                     01D1   333 ; DEASSIGN I/O CHANNELS
                                     01D1   334 ;
                                     01D1   335 
                                     01D1   336 ;	$DASSGN_S CHAN=W^TST$GW_MAILCHAN ; DEASSIGN ASSOCIATED MAILBOX
                                     01D1   337 ;	CHECK_SS			; CHECK STATUS CODE
                                     01D1   338 ;	$DASSGN_S CHAN=W^TST$GW_LINKCHAN ; DEASSIGN COMMUNICATIONS LINK
                                     01D1   339 ;	CHECK_SS			; CHECK STATUS CODE
                                     01D1   340 ;	$CLOSE	FAB=W^TST$PRTFAB	; CLOSE PRINT FILE
                                     01D1   341 EXIT:					;
                                     01D1   342 	$EXIT_S				; EXIT TO VMS
                                     01DA   343 	.END	TST$START_DTR
TST$DTRMAIN     - DTR MAINLINE                                   22-AUG-1978 01:08:03   VAX-11 MACRO X0.3-11               Page   8
SYMBOL TABLE                                                                                                                     (3)

$$.TMP1        = 00000001            R                00000000 RG    03   VAL_K_PRIN_NO  = 00000000            
$$.TMP2        = 000000CF            SUMMARY          00000172 R     03   VAL_K_PRIN_YES = 00000080            
$$COUNT        = 00000005            SYS$ASSIGN       ********   X   03   VAL_K_RETU_NO  = 00000000            
$$T1           = 00000000            SYS$CONNECT      ********  GX   03   VAL_K_RETU_RECE= 00000004            
$$T2           = 00000005            SYS$CREMBX       ********   X   03   VAL_K_RETU_STAN= 00000002            
BIT...         = 01F5806B            SYS$EXIT         ********   X   03   VAL_K_STAT_NO  = 00000000            
DFT_K_BACK     = 00000000            SYS$FAO          ********   X   03   VAL_K_STAT_YES = 00000001            
DFT_K_DISPLAY  = 00000000            SYS$OPEN         ********  GX   03   VAL_K_TEST_CONN= 00000000            
DFT_K_FLOW     = 00000002            SYS$PUTMSG       ********   X   03   VAL_K_TEST_DATA= 00000001            
DFT_K_NAK      = 00000000            SYS$TRNLOG       ********   X   03   VAL_K_TEST_DISC= 00000002            
DFT_K_PRINT    = 00000000            TERMINATE        000001A8 R     03   VAL_K_TEST_INTE= 00000003            
DFT_K_RETURN_CO= 00000000            TEST_COMPLETE    00000123 R     03   VAL_K_TEST_MISC= 00000004            
DFT_K_RETURN_DI= 00000000            TST$BAD_DTR      ********   X   03   VAL_K_TYPE_ABRT= 00000001            
DFT_K_RQUEUE_DA= 00000001            TST$CHECK_RMS    ********   X   03   VAL_K_TYPE_ACCE= 00000001            
DFT_K_RQUEUE_IN= 00000001            TST$CHECK_SS     ********   X   03   VAL_K_TYPE_ECHO= 00000003            
DFT_K_SIZE_DA  = 00000080            TST$CONN_DTR     ********   X   03   VAL_K_TYPE_NAME= 00000000            
DFT_K_SIZE_IN  = 00000010            TST$DATA_DTR     ********   X   03   VAL_K_TYPE_PATT= 00000002            
DFT_K_SPEED    = 000F4240            TST$DISC_DTR     ********   X   03   VAL_K_TYPE_REJE= 00000000            
DFT_K_SQUEUE_DA= 00000001            TST$GB_PRINT     ********   X   03   VAL_K_TYPE_SEQU= 00000001            
DFT_K_SQUEUE_IN= 00000001            TST$GB_TEST      ********   X   03   VAL_K_TYPE_SINK= 00000000            
DFT_K_STAT     = 00000001            TST$GB_TYPE      ********   X   03   VAL_K_TYPE_SYNC= 00000000            
DFT_K_TIME_DA  = 0000001E            TST$GL_DTERROR   ********   X   03   
DFT_K_TIME_IN  = 0000001E            TST$GL_RECVDATA  ********   X   03   
DFT_K_TYPE_CO  = 00000001            TST$GL_XMITDATA  ********   X   03   
DFT_K_TYPE_DA  = 00000000            TST$GL_XMITINTE  ********   X   03   
DFT_K_TYPE_DI  = 00000001            TST$GQ_CALLER    ********   X   03   
DFT_K_TYPE_IN  = 00000000            TST$GQ_DTRDESC   ********   X   03   
DFT_K_TYPE_MI  = 00000000            TST$GQ_INIT      ********   X   03   
DISPATCH         0000010F R     03   TST$GQ_LINKNAME  ********   X   03   
DTS$_BADDATDAT = 01F58033            TST$GQ_MAIL_DTR  ********   X   03   
DTS$_BADDATLEN = 01F58023            TST$GQ_NCB       ********   X   03   
DTS$_BADFUNC   = 01F5805B            TST$GQ_PRTBUF    ********   X   03   
DTS$_BADMAIL   = 01F5803B            TST$GQ_STAT3     ********   X   03   
DTS$_BADPAT    = 01F58043            TST$GQ_SYSNAME   ********   X   03   
DTS$_BADSEQNUM = 01F5804B            TST$GQ_TERM      ********   X   03   
DTS$_BADSUBFCN = 01F58053            TST$GT_DTR       ********   X   03   
DTS$_BADUSRDAT = 01F58013            TST$GT_DTSMSG    ********   X   03   
DTS$_BADUSRLEN = 01F5800B            TST$GT_VERSION   ********   X   03   
DTS$_CINBAD    = 01F58003            TST$GW_LINKCHAN  ********   X   03   
DTS$_CINREJ    = 01F5801B            TST$GW_MAILCHAN  ********   X   03   
DTS$_DISBAD    = 01F5802B            TST$GW_PRTLEN    ********   X   03   
DTS$_INVOPTION = 01F58063            TST$GW_SIZE      ********   X   03   
EXIT             000001D1 R     03   TST$INTE_DTR     ********   X   03   
GBL...         = 00000000            TST$K_MAILBUF    ********   X   03   
K_LIST_MEB     = 00000000            TST$K_MAILPROT   ********   X   03   
MAX_K_BACK     = 00000080            TST$K_MAILQUOTA  ********   X   03   
MAX_K_DISPLAY  = 00000026            TST$MISC_DTR     ********   X   03   
MAX_K_NAK      = 00000080            TST$PRINT_FAO    ********   X   03   
MAX_K_RQUEUE_DA= 00000008            TST$PRTFAB       ********   X   03   
MAX_K_RQUEUE_IN= 00000008            TST$PRTRAB       ********   X   03   
MAX_K_SIZE_DA  = 00001000            TST$START_DTR    00000000 RG    03   
MAX_K_SIZE_IN  = 00000010            VAL_K_BACK_NO  = 00000000            
MAX_K_SPEED    = 000F4240            VAL_K_DISP_NO  = 00000000            
MAX_K_SQUEUE_DA= 00000008            VAL_K_FLOW_MESS= 00000002            
MAX_K_SQUEUE_IN= 00000008            VAL_K_FLOW_NO  = 00000000            
MAX_K_TIME_DA  = 00057E40            VAL_K_FLOW_SEGM= 00000001            
MAX_K_TIME_IN  = 00057E40            VAL_K_NAK_NO   = 00000000            
TST$DTRMAIN     - DTR MAINLINE                                   22-AUG-1978 01:08:03   VAX-11 MACRO X0.3-11               Page   9
PROGRAM SECTION SYNOPSIS                                                                                                         (3)



PROGRAM SECTION SYNOPSIS

.  ABS  .        00000000      00     NOPIC   USR   CON   ABS   LCL NOSHR NOEXE NORD  NOWRT BYTE  
. BLANK .        00000000      01     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
$ABS$            00000000      02     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  
TST$CODE         000001DA      03     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD  NOWRT BYTE  


THERE WERE NO ERRORS OR WARNINGS.
19284. BYTES LEFT IN FREE MEMORY POOL.
OBJ$:DTRMAIN,LIS$:DTRMAIN/-SP=SRC$:DTPREFIX,DTRMAIN
38 MLB DIR RDS - 306 GETS TO DEFINE 24 MACROS. 17 INTER. FILE WRITES. 
