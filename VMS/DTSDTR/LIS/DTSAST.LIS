TST$DTSAST      - DTS AST ROUTINES                               22-AUG-1978 01:07:40   VAX-11 MACRO X0.3-11               Page   0
TABLE OF CONTENTS   

   (2)      92  DECLARATIONS
   (3)     115  TST$TIMER_DTS - TIMER AST ROUTINE
   (4)     172  TST$XMITAST_DTS - TRANSMIT DATA MESSAGE AST ROU
   (5)     232  TST$RECVAST_DTS - RECEIVE DATA MESSAGE AST ROUT
   (6)     290  TST$MAILAST_DTS - READ MAILBOX AST ROUTINE
   (7)     362  TST$INTEAST_DTS - TRANSMIT INTERRUPT MESSAGE AS
TST$DTSAST      - DTS AST ROUTINES                               22-AUG-1978 01:07:40   VAX-11 MACRO X0.3-11               Page   1
X0.1-5                                                                                                                           (1)

                                     0000     1 	.TITLE	TST$DTSAST - DTS AST ROUTINES
                                     0000     2 	.IDENT	/X0.1-5/
                                     0000     3 
                                     0000     4 ;
                                     0000     5 ;			  COPYRIGHT (c) 1977, 1978 BY
                                     0000     6 ;	      DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
                                     0000     7 ;
                                     0000     8 ; THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND  COPIED
                                     0000     9 ; ONLY  IN  ACCORDANCE  WITH  THE  TERMS  OF  SUCH  LICENSE AND WITH THE
                                     0000    10 ; INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE OR  ANY  OTHER
                                     0000    11 ; COPIES  THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY
                                     0000    12 ; OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE  IS  HEREBY
                                     0000    13 ; TRANSFERRED.
                                     0000    14 ;
                                     0000    15 ; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITHOUT  NOTICE
                                     0000    16 ; AND  SHOULD  NOT  BE  CONSTRUED  AS  A COMMITMENT BY DIGITAL EQUIPMENT
                                     0000    17 ; CORPORATION.
                                     0000    18 ;
                                     0000    19 ; DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE OR  RELIABILITY  OF  ITS
                                     0000    20 ; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.
                                     0000    21 ;
                                     0000    22 
                                     0000    23 ;++
                                     0000    24 ; FACILITY: DTS/DTR DECNET TEST PACKAGE
                                     0000    25 ;
                                     0000    26 ; ABSTRACT: THIS MODULE CONTAINS QIO AND TIMER AST ROUTINES FOR DTS.
                                     0000    27 ;
                                     0000    28 ; ENVIRONMENT: DTS RUNS IN USER MODE AND REQUIRES NETWORK PRIVILEGE.
                                     0000    29 ;
                                     0000    30 ; AUTHOR: JAMES A. KRYCKA,	CREATION DATE: 7-DEC-77
                                     0000    31 ;
                                     0000    32 ; MODIFICATIONS:
                                     0000    33 ;
                                     0000    34 ;--
TST$DTSAST      - DTS AST ROUTINES                               22-AUG-1978 01:07:40   VAX-11 MACRO X0.3-11               Page   2
X0.1-5          DECLARATIONS                                                                                                     (2)

                                     0000    36 	.SBTTL	DECLARATIONS
                                     0000    37 
                                     0000    38 ;
                                     0000    39 ; INCLUDE FILES:
                                     0000    40 ;
                                     0000    41 	$DTSDEF				;DTS ERROR CODES
                                     0000    42 	CMDDEF				; DEFINE COMMAND LANGUAGE SYMBOLS
                                     0000    43 	EFNDEF				; DEFINE EFN'S AND FUNCTION CODES
                                     0000    44 	$MSGDEF				; DEFINE MAILBOX MESSAGE ID CODES
                                     0000    45 	.IIF NE	K_LIST_MEB, .LIST MEB	; DEFINED IN DTPREFIX.MAR
                                     0000    46 ;
                                     0000    47 ; MACROS:
                                     0000    48 ;
                                     0000    49 ;	NONE
                                     0000    50 ;
                                     0000    51 ; EQUATED SYMBOLS:
                                     0000    52 ;
                                     0000    53 ;	NONE
                                     0000    54 ;
                                     0000    55 ; OWN STORAGE:
                                     0000    56 ;
                                     0000    57 ;	NONE
TST$DTSAST      - DTS AST ROUTINES                               22-AUG-1978 01:07:40   VAX-11 MACRO X0.3-11               Page   3
X0.1-5          TST$TIMER_DTS - TIMER AST ROUTINE                                                                                (3)

                                     0000    59 	.SBTTL	TST$TIMER_DTS - TIMER AST ROUTINE
                                 00000000    60 	.PSECT	TST$CODE	NOWRT
                                     0000    61 SA::					; SYMBOL FOR DEBUGGING PURPOSES
                                     0000    62 
                                     0000    63 ;++
                                     0000    64 ; FUNCTIONAL DESCRIPTION:
                                     0000    65 ;
                                     0000    66 ;	NONE
                                     0000    67 ;
                                     0000    68 ; CALLING SEQUENCE:
                                     0000    69 ;
                                     0000    70 ;	CALL	#5,TST$TIMER_DTS	(INVOKED BY VAX/VMS AS AN AST)
                                     0000    71 ;
                                     0000    72 ; INPUT PARAMETERS:
                                     0000    73 ;
                                     0000    74 ;	4(AP)	ADDRESS OF QIO PARAMETER BLOCK
                                     0000    75 ;
                                     0000    76 ; IMPLICIT INPUTS:
                                     0000    77 ;
                                     0000    78 ;	NONE
                                     0000    79 ;
                                     0000    80 ; OUTPUT PARAMETERS:
                                     0000    81 ;
                                     0000    82 ;	NONE
                                     0000    83 ;
                                     0000    84 ; IMPLICIT OUTPUTS:
                                     0000    85 ;
                                     0000    86 ;	NONE
                                     0000    87 ;
                                     0000    88 ; COMPLETION CODES:
                                     0000    89 ;
                                     0000    90 ;	NONE
                                     0000    91 ;
                                     0000    92 ; SIDE EFFECTS:
                                     0000    93 ;
                                     0000    94 ;	NONE
                                     0000    95 ;
                                     0000    96 ;--
                                     0000    97 
                               001C' 0000    98 	.ENTRY	TST$TIMER_DTS,^M<R2,R3,R4> ; ENTRY POINT
                     0000'CF     D7  0002    99 	DECL	W^TST$GL_CLOCK		;DECREMENTS TIMEOUT CONSTANT
                          14     13  0006   100 	BEQLU	10$			;IF NOT ZERO THEN TEST CONTINUES
                                     0008   101 	$SETIMR_S EFN=#EFN_K_TIMER-
                                     0008   102 		DAYTIM=W^TST$GQ_NANOSEC-
                                     0008   103 		ASTADR=W^TST$TIMER_DTS
                                 04  001B   104 	RET
                                     001C   105 10$:
                                     001C   106 	$CANCEL_S CHAN=W^TST$GW_LINKCHAN ; CANCEL ALL PENDING LINK I/O REQUESTS
                                     0028   107 	CHECK_SS			; CHECK STATUS CODE
                                     002B   108 	$CANCEL_S CHAN=W^TST$GW_MAILCHAN ; CANCEL MAILBOX READ
                                     0037   109 	CHECK_SS			; CHECK STATUS CODE
                                     003A   110 ;	$SETEF_S EFN=#EFN_K_SIGNAL	; SIGNAL END OF TEST
       0000'CF            01     90  003A   111 	MOVB	#1,W^TST$GB_ASTFLAGS	;DENOTE CLOCK TIMEOUT
                                     003F   112 	$WAKE_S				;WAKEUP MAINLINE
                                     004A   113 	CHECK_SS			; CHECK STATUS CODE
                                 04  004D   114 	RET				; EXIT
TST$DTSAST      - DTS AST ROUTINES                               22-AUG-1978 01:07:40   VAX-11 MACRO X0.3-11               Page   4
X0.1-5          TST$XMITAST_DTS - TRANSMIT DATA MESSAGE AST ROU                                                                  (4)

                                     004E   116 	.SBTTL	TST$XMITAST_DTS - TRANSMIT DATA MESSAGE AST ROUTINE
                                 0000004E   117 	.PSECT	TST$CODE	NOWRT
                                     004E   118 
                                     004E   119 ;++
                                     004E   120 ; FUNCTIONAL DESCRIPTION:
                                     004E   121 ;
                                     004E   122 ;	NONE
                                     004E   123 ;
                                     004E   124 ; CALLING SEQUENCE:
                                     004E   125 ;
                                     004E   126 ;	CALL	#5,TST$XMITAST_DTS	(INVOKED BY VAX/VMS AS AN AST)
                                     004E   127 ;
                                     004E   128 ; INPUT PARAMETERS:
                                     004E   129 ;
                                     004E   130 ;	4(AP)	ADDRESS OF QIO PARAMETER BLOCK
                                     004E   131 ;
                                     004E   132 ; IMPLICIT INPUTS:
                                     004E   133 ;
                                     004E   134 ;	NONE
                                     004E   135 ;
                                     004E   136 ; OUTPUT PARAMETERS:
                                     004E   137 ;
                                     004E   138 ;	NONE
                                     004E   139 ;
                                     004E   140 ; IMPLICIT OUTPUTS:
                                     004E   141 ;
                                     004E   142 ;	NONE
                                     004E   143 ;
                                     004E   144 ; COMPLETION CODES:
                                     004E   145 ;
                                     004E   146 ;	NONE
                                     004E   147 ;
                                     004E   148 ; SIDE EFFECTS:
                                     004E   149 ;
                                     004E   150 ;	NONE
                                     004E   151 ;
                                     004E   152 ;--
                                     004E   153 
                               0004' 004E   154 	.ENTRY	TST$XMITAST_DTS,^M<R2>	; ENTRY POINT
                                     0050   155 	CHECK_IOSB W^TST$GQ_XMITIOSB	; CHECK I/O STATUS CODE
            3B            51     E9  0058   156 	BLBC	R1,10$			; BRANCH ON FAILURE
       0000'CF            52     B1  005B   157 	CMPW	R2,W^TST$GW_SIZE	; IS MESSAGE CORRECT SIZE?
                          35     12  0060   158 	BNEQ	20$			; BRANCH ON ERROR
            7E       0002'CF     3C  0062   159 	MOVZWL	W^TST$GQ_XMITIOSB+2,-(SP) ; GET SIZE OF MESSAGE
                     0000'CF     DF  0067   160 	PUSHAL	W^TST$GB_XMITBUF	; GET ADDRESS OF MESSAGE BUFFER
                          00     DD  006B   161 	PUSHL	#0			; DENOTE A TRANSMIT
            7E       0000'CF     9A  006D   162 	MOVZBL	W^TST$GB_DISPLAY,-(SP)	; GET MAXIMUM BYTES TO DISPLAY
       0000'CF            04     FB  0072   163 	CALLS	#4,W^TST$DISPLAY_MSG	; OUTPUT MESSAGE TO PRINT FILE
                     0000'CF     D6  0077   164 	INCL	W^TST$GL_XMITDATA	; INCREMENT COUNTER
                     0000'CF     D6  007B   165 	INCL	W^TST$GB_XMITBUF	; INCREMENT MESSAGE SEQUENCE NUMBER
                                     007F   166 ;	$QIO_G	@4(AP)			; RE-ISSUE TRANSMIT DATA QIO
                                 0E  007F   167 	INSQUE	W^TST$QB_XMTDATA,-
   00000004'FF       0000'CF         0080   168 		@TST$QB_QHEAD+4		;QUEUE DATA AST 
                                     0088   169 	$WAKE_S				;WAKEUP MAINLINE FOR REQUEUE
                                     0093   170 	
                                     0093   171 	CHECK_SS			; CHECK STATUS CODE
                                 04  0096   172 10$:	RET				; EXIT
TST$DTSAST      - DTS AST ROUTINES                               22-AUG-1978 01:07:40   VAX-11 MACRO X0.3-11               Page   5
X0.1-5          TST$XMITAST_DTS - TRANSMIT DATA MESSAGE AST ROU                                                                  (4)

       0000'CF   01F58023 8F     D0  0097   173 20$:	MOVL	#DTS$_BADDATLEN,W^TST$GL_STATUS	;NOTE BAD DATA LEN
                                 04  00A0   174 	RET				; EXIT
TST$DTSAST      - DTS AST ROUTINES                               22-AUG-1978 01:07:40   VAX-11 MACRO X0.3-11               Page   6
X0.1-5          TST$RECVAST_DTS - RECEIVE DATA MESSAGE AST ROUT                                                                  (5)

                                     00A1   176 	.SBTTL	TST$RECVAST_DTS - RECEIVE DATA MESSAGE AST ROUTINE
                                 000000A1   177 	.PSECT	TST$CODE	NOWRT
                                     00A1   178 
                                     00A1   179 ;++
                                     00A1   180 ; FUNCTIONAL DESCRIPTION:
                                     00A1   181 ;
                                     00A1   182 ;	NONE
                                     00A1   183 ;
                                     00A1   184 ; CALLING SEQUENCE:
                                     00A1   185 ;
                                     00A1   186 ;	CALL	#5,TST$RECVAST_DTS	(INVOKED BY VAX/VMS AS AN AST)
                                     00A1   187 ;
                                     00A1   188 ; INPUT PARAMETERS:
                                     00A1   189 ;
                                     00A1   190 ;	4(AP)	ADDRESS OF QIO PARAMETER BLOCK
                                     00A1   191 ;
                                     00A1   192 ; IMPLICIT INPUTS:
                                     00A1   193 ;
                                     00A1   194 ;	NONE
                                     00A1   195 ;
                                     00A1   196 ; OUTPUT PARAMETERS:
                                     00A1   197 ;
                                     00A1   198 ;	NONE
                                     00A1   199 ;
                                     00A1   200 ; IMPLICIT OUTPUTS:
                                     00A1   201 ;
                                     00A1   202 ;	NONE
                                     00A1   203 ;
                                     00A1   204 ; COMPLETION CODES:
                                     00A1   205 ;
                                     00A1   206 ;	NONE
                                     00A1   207 ;
                                     00A1   208 ; SIDE EFFECTS:
                                     00A1   209 ;
                                     00A1   210 ;	NONE
                                     00A1   211 ;
                                     00A1   212 ;--
                                     00A1   213 
                               0004' 00A1   214 	.ENTRY	TST$RECVAST_DTS,^M<R2>	; ENTRY POINT
                                     00A3   215 	CHECK_IOSB W^TST$GQ_RECVIOSB	; CHECK I/O STATUS CODE
            37            51     E9  00AB   216 	BLBC	R1,10$			; BRANCH ON FAILURE
       0000'CF            52     B1  00AE   217 	CMPW	R2,W^TST$GW_SIZE	; IS MESSAGE CORRECT SIZE?
                          31     12  00B3   218 	BNEQ	20$			; BRANCH ON ERROR
            7E       0002'CF     3C  00B5   219 	MOVZWL	W^TST$GQ_RECVIOSB+2,-(SP) ; GET SIZE OF MESSAGE
                     0000'CF     DF  00BA   220 	PUSHAL	W^TST$GB_RECVBUF	; GET ADDRESS OF MESSAGE BUFFER
                          01     DD  00BE   221 	PUSHL	#1			; DENOTE A RECEIVE
            7E       0000'CF     9A  00C0   222 	MOVZBL	W^TST$GB_DISPLAY,-(SP)	; GET MAXIMUM BYTES TO DISPLAY
       0000'CF            04     FB  00C5   223 	CALLS	#4,W^TST$DISPLAY_MSG	; OUTPUT MESSAGE TO PRINT FILE
                     0000'CF     D6  00CA   224 	INCL	W^TST$GL_RECVDATA	; INCREMENT COUNTER
                                     00CE   225 ;	$QIO_G	@4(AP)			; RE-ISSUE RECEIVE DATA QIO
                                 0E  00CE   226 	INSQUE	W^TST$QB_RCVDATA,-
   00000004'FF       0000'CF         00CF   227 		@TST$QB_QHEAD+4		;QUEUE DATA AST 
                                     00D7   228 	$WAKE_S				;WAKE MAINLINE TO REQUEUE READ
                                     00E2   229 	CHECK_SS			; CHECK STATUS CODE
                                 04  00E5   230 10$:	RET				; EXIT
       0000'CF   01F58023 8F     D0  00E6   231 20$:	MOVL	#DTS$_BADDATLEN,W^TST$GL_STATUS	;NOTE BAD LENGTH
                                 04  00EF   232 	RET				; EXIT
TST$DTSAST      - DTS AST ROUTINES                               22-AUG-1978 01:07:40   VAX-11 MACRO X0.3-11               Page   7
X0.1-5          TST$MAILAST_DTS - READ MAILBOX AST ROUTINE                                                                       (6)

                                     00F0   234 	.SBTTL	TST$MAILAST_DTS - READ MAILBOX AST ROUTINE
                                 000000F0   235 	.PSECT	TST$CODE	NOWRT
                                     00F0   236 
                                     00F0   237 ;++
                                     00F0   238 ; FUNCTIONAL DESCRIPTION:
                                     00F0   239 ;
                                     00F0   240 ;	NONE
                                     00F0   241 ;
                                     00F0   242 ; CALLING SEQUENCE:
                                     00F0   243 ;
                                     00F0   244 ;	CALL	#5,TST$MAILAST_DTS	(INVOKED BY VAX/VMS AS AN AST)
                                     00F0   245 ;
                                     00F0   246 ; INPUT PARAMETERS:
                                     00F0   247 ;
                                     00F0   248 ;	4(AP)	ADDRESS OF QIO PARAMETER BLOCK
                                     00F0   249 ;
                                     00F0   250 ; IMPLICIT INPUTS:
                                     00F0   251 ;
                                     00F0   252 ;	NONE
                                     00F0   253 ;
                                     00F0   254 ; OUTPUT PARAMETERS:
                                     00F0   255 ;
                                     00F0   256 ;	NONE
                                     00F0   257 ;
                                     00F0   258 ; IMPLICIT OUTPUTS:
                                     00F0   259 ;
                                     00F0   260 ;	NONE
                                     00F0   261 ;
                                     00F0   262 ; COMPLETION CODES:
                                     00F0   263 ;
                                     00F0   264 ;	NONE
                                     00F0   265 ;
                                     00F0   266 ; SIDE EFFECTS:
                                     00F0   267 ;
                                     00F0   268 ;	NONE
                                     00F0   269 ;
                                     00F0   270 ;--
                                     00F0   271 
                               00C4' 00F0   272 	.ENTRY	TST$MAILAST_DTS,^M<R2,R6,R7> ; ENTRY POINT
                                     00F2   273 	CHECK_IOSB W^TST$GQ_MAILIOSB	; CHECK I/O STATUS CODE
            3B            51     E9  00FA   274 	BLBC	R1,10$			; BRANCH ON FAILURE
                          FF00'  30  00FD   275 	BSBW	TST$EXAM_MAIL		; EXAMINE THE MESSAGE
            35            56     B1  0100   276 	CMPW	R6,#MSG$_INTMSG		; IS IT AN INTERRUPT MESSAGE?
                          34     12  0103   277 	BNEQU	20$			; NO
       0000'CF            67     91  0105   278 	CMPB	(R7),W^TST$GW_SIZE	; IS MESSAGE CORRECT SIZE?
                          6C     12  010A   279 	BNEQ	30$			; BRANCH ON ERROR
            7E            87     9A  010C   280 	MOVZBL	(R7)+,-(SP)		; GET SIZE OF MESSAGE
                          57     DD  010F   281 	PUSHL	R7			; GET ADDRESS OF MESSAGE BUFFER
                          01     DD  0111   282 	PUSHL	#1			; DENOTE A RECEIVE
            7E       0000'CF     9A  0113   283 	MOVZBL	W^TST$GB_DISPLAY,-(SP)	; GET MAXIMUM BYTES TO DISPLAY
       0000'CF            04     FB  0118   284 	CALLS	#4,W^TST$DISPLAY_MSG	; OUTPUT MESSAGE TO PRINT FILE
                     0000'CF     D6  011D   285 	INCL	W^TST$GL_RECVINTE	; YES, INCREMENT COUNTER
                                     0121   286 ;	$QIO_G	@4(AP)			; RE-ISSUE READ MAILBOX QIO
                                 0E  0121   287 	INSQUE	W^TST$QB_RCVMAIL,-
   00000004'FF       0000'CF         0122   288 		@TST$QB_QHEAD+4		;QUEUE DATA AST 
                                     012A   289 	$WAKE_S				;WAKE MAINLINE TO REQUEUE READ
                                     0135   290 	CHECK_SS			; CHECK STATUS CODE
TST$DTSAST      - DTS AST ROUTINES                               22-AUG-1978 01:07:40   VAX-11 MACRO X0.3-11               Page   8
X0.1-5          TST$MAILAST_DTS - READ MAILBOX AST ROUTINE                                                                       (6)

                                 04  0138   291 10$:	RET				; EXIT
                                 D0  0139   292 20$:	MOVL	#DTS$_BADMAIL,-
       0000'CF   01F5803B 8F         013A   293 		W^TST$GL_STATUS
       0000'CF            56     3C  0142   294 	MOVZWL	R6,W^TST$GL_FAOARG	;GET TYPE OF MAIL
                                     0147   295 	$CANTIM_S			; CANCEL THE TIMER
                                     0152   296 	CHECK_SS			; CHECK STATUS CODE
                                     0155   297 	$CANCEL_S CHAN=W^TST$GW_LINKCHAN ; CANCEL ALL PENDING LINK I/O REQUESTS
                                     0161   298 	CHECK_SS			; CHECK STATUS CODE
       0000'CF            01     90  0164   299 	MOVB	#1,W^TST$GB_ASTFLAGS	;NOTE END OF TEST
                                     0169   300 	$WAKE_S				;WAKE MAIN ROUTINE
                                     0174   301 	CHECK_SS			; CHECK STATUS CODE
                                 04  0177   302 	RET				; EXIT
       0000'CF   01F58023 8F     D0  0178   303 30$:	MOVL	#DTS$_BADDATLEN,W^TST$GL_STATUS
                                 04  0181   304 	RET				; EXIT
TST$DTSAST      - DTS AST ROUTINES                               22-AUG-1978 01:07:40   VAX-11 MACRO X0.3-11               Page   9
X0.1-5          TST$INTEAST_DTS - TRANSMIT INTERRUPT MESSAGE AS                                                                  (7)

                                     0182   306 	.SBTTL	TST$INTEAST_DTS - TRANSMIT INTERRUPT MESSAGE AST ROUTINE
                                 00000182   307 	.PSECT	TST$CODE	NOWRT
                                     0182   308 
                                     0182   309 ;++
                                     0182   310 ; FUNCTIONAL DESCRIPTION:
                                     0182   311 ;
                                     0182   312 ;	NONE
                                     0182   313 ;
                                     0182   314 ; CALLING SEQUENCE:
                                     0182   315 ;
                                     0182   316 ;	CALL	#5,TST$INTEAST_DTS	(INVOKED BY VAX/VMS AS AN AST)
                                     0182   317 ;
                                     0182   318 ; INPUT PARAMETERS:
                                     0182   319 ;
                                     0182   320 ;	4(AP)	ADDRESS OF QIO PARAMETER BLOCK
                                     0182   321 ;
                                     0182   322 ; IMPLICIT INPUTS:
                                     0182   323 ;
                                     0182   324 ;	NONE
                                     0182   325 ;
                                     0182   326 ; OUTPUT PARAMETERS:
                                     0182   327 ;
                                     0182   328 ;	NONE
                                     0182   329 ;
                                     0182   330 ; IMPLICIT OUTPUTS:
                                     0182   331 ;
                                     0182   332 ;	NONE
                                     0182   333 ;
                                     0182   334 ; COMPLETION CODES:
                                     0182   335 ;
                                     0182   336 ;	NONE
                                     0182   337 ;
                                     0182   338 ; SIDE EFFECTS:
                                     0182   339 ;
                                     0182   340 ;	NONE
                                     0182   341 ;
                                     0182   342 ;--
                                     0182   343 
                               0004' 0182   344 	.ENTRY	TST$INTEAST_DTS,^M<R2>	; ENTRY POINT
                                 B1  0184   345 	CMPW	#SS$_NOSOLICIT,-
       0000'CF       0000'8F         0185   346 		W^TST$GQ_INTEIOSB	;INT MSG MAY HAVE NOT BEEN REQUESTED
                          1C     12  018B   347 	BNEQU	2$			;IF NOT CONTINUE
                                     018D   348 	$SETIMR_S	EFN=#10,DAYTIM=W^TST$GQ_NANOSEC
                                     019E   349 	$WAITFR_S		EFN=#10		;WAIT A SECOND BEFORE RESENDING
                          2F     11  01A7   350 	BRB		5$
                                     01A9   351 2$:
                                     01A9   352 	CHECK_IOSB W^TST$GQ_INTEIOSB	; CHECK I/O STATUS CODE
            3B            51     E9  01B1   353 	BLBC	R1,10$			; BRANCH ON FAILURE
       0000'CF            52     B1  01B4   354 	CMPW	R2,W^TST$GW_SIZE	; IS MESSAGE CORRECT SIZE?
                          35     12  01B9   355 	BNEQ	20$			; BRANCH ON ERROR
            7E       0002'CF     3C  01BB   356 	MOVZWL	W^TST$GQ_INTEIOSB+2,-(SP) ; GET SIZE OF MESSAGE
                     0000'CF     DF  01C0   357 	PUSHAL	W^TST$GB_INTEBUF	; GET ADDRESS OF MESSAGE BUFFER
                          00     DD  01C4   358 	PUSHL	#0			; DENOTE A TRANSMIT
            7E       0000'CF     9A  01C6   359 	MOVZBL	W^TST$GB_DISPLAY,-(SP)	; GET MAXIMUM BYTES TO DISPLAY
       0000'CF            04     FB  01CB   360 	CALLS	#4,W^TST$DISPLAY_MSG	; OUTPUT MESSAGE TO PRINT FILE
                     0000'CF     D6  01D0   361 	INCL	W^TST$GL_XMITINTE	; INCREMENT COUNTER
                     0000'CF     D6  01D4   362 	INCL	W^TST$GB_INTEBUF	; INCREMENT MESSAGE SEQUENCE NUMBER
TST$DTSAST      - DTS AST ROUTINES                               22-AUG-1978 01:07:40   VAX-11 MACRO X0.3-11               Page  10
X0.1-5          TST$INTEAST_DTS - TRANSMIT INTERRUPT MESSAGE AS                                                                  (7)

                                     01D8   363 ;	$QIO_G	@4(AP)			;RE_ISSUE TRANSMIT INTERRUPT QIO
                                     01D8   364 5$:
                                 0E  01D8   365 	INSQUE	W^TST$QB_XMTINT,-
   00000004'FF       0000'CF         01D9   366 		@TST$QB_QHEAD+4		;QUEUE DATA AST 
                                     01E1   367 	$WAKE_S				;WAKE MAINLINE FOR REQUEUE
                                     01EC   368 	CHECK_SS			; CHECK STATUS CODE
                                 04  01EF   369 10$:	RET				; EXIT
       0000'CF   01F58023 8F     D0  01F0   370 20$:	MOVL	#DTS$_BADDATLEN,W^TST$GL_STATUS
                                 04  01F9   371 	RET				; EXIT
                                     01FA   372 	.END
TST$DTSAST      - DTS AST ROUTINES                               22-AUG-1978 01:07:40   VAX-11 MACRO X0.3-11               Page  11
SYMBOL TABLE                                                                                                                     (7)

BIT...         = 0000003B            MAX_K_SQUEUE_DA= 00000008            TST$GL_RECVDATA  ********   X   03   
DFT_K_BACK     = 00000000            MAX_K_SQUEUE_IN= 00000008            TST$GL_RECVINTE  ********   X   03   
DFT_K_DISPLAY  = 00000000            MAX_K_TIME_DA  = 00057E40            TST$GL_STATUS    ********   X   03   
DFT_K_FLOW     = 00000002            MAX_K_TIME_IN  = 00057E40            TST$GL_XMITDATA  ********   X   03   
DFT_K_NAK      = 00000000            MSG$_ABOOPR    = 00000011            TST$GL_XMITINTE  ********   X   03   
DFT_K_PRINT    = 00000000            MSG$_ABORT     = 00000030            TST$GQ_INTEIOSB  ********   X   03   
DFT_K_RETURN_CO= 00000000            MSG$_ACCRSP    = 00000021            TST$GQ_MAILIOSB  ********   X   03   
DFT_K_RETURN_DI= 00000000            MSG$_CONFIRM   = 00000031            TST$GQ_NANOSEC   ********   X   03   
DFT_K_RQUEUE_DA= 00000001            MSG$_CONNECT   = 00000032            TST$GQ_RECVIOSB  ********   X   03   
DFT_K_RQUEUE_IN= 00000001            MSG$_CRUNSOLIC = 00000002            TST$GQ_XMITIOSB  ********   X   03   
DFT_K_SIZE_DA  = 00000080            MSG$_DELPROC   = 00000003            TST$GW_LINKCHAN  ********   X   03   
DFT_K_SIZE_IN  = 00000010            MSG$_DELSMB    = 00000014            TST$GW_MAILCHAN  ********   X   03   
DFT_K_SPEED    = 000F4240            MSG$_DEVOFFLIN = 00000005            TST$GW_SIZE      ********   X   03   
DFT_K_SQUEUE_DA= 00000001            MSG$_DEVONLIN  = 00000007            TST$INTEAST_DTS  00000182 RG    03   
DFT_K_SQUEUE_IN= 00000001            MSG$_DISCON    = 00000033            TST$MAILAST_DTS  000000F0 RG    03   
DFT_K_STAT     = 00000001            MSG$_EXIT      = 00000034            TST$QB_QHEAD     ********   X   03   
DFT_K_TIME_DA  = 0000001E            MSG$_INIOPR    = 00000010            TST$QB_RCVDATA   ********   X   03   
DFT_K_TIME_IN  = 0000001E            MSG$_INTMSG    = 00000035            TST$QB_RCVMAIL   ********   X   03   
DFT_K_TYPE_CO  = 00000001            MSG$_OPREPLY   = 00000009            TST$QB_XMTDATA   ********   X   03   
DFT_K_TYPE_DA  = 00000000            MSG$_OPRQST    = 00000008            TST$QB_XMTINT    ********   X   03   
DFT_K_TYPE_DI  = 00000001            MSG$_PATHLOST  = 00000036            TST$RECVAST_DTS  000000A1 RG    03   
DFT_K_TYPE_IN  = 00000000            MSG$_PROTOCOL  = 00000037            TST$TIMER_DTS    00000000 RG    03   
DFT_K_TYPE_MI  = 00000000            MSG$_REJECT    = 00000038            TST$XMITAST_DTS  0000004E RG    03   
DTS$_BADDATDAT = 01F58033            MSG$_RESOPR    = 00000013            VAL_K_BACK_NO  = 00000000            
DTS$_BADDATLEN = 01F58023            MSG$_SCANBAD   = 00000028            VAL_K_DISP_NO  = 00000000            
DTS$_BADFUNC   = 01F5805B            MSG$_SCANRSP   = 00000029            VAL_K_FLOW_MESS= 00000002            
DTS$_BADMAIL   = 01F5803B            MSG$_SMBDON    = 00000009            VAL_K_FLOW_NO  = 00000000            
DTS$_BADPAT    = 01F58043            MSG$_SMBINI    = 00000008            VAL_K_FLOW_SEGM= 00000001            
DTS$_BADSEQNUM = 01F5804B            MSG$_SMBRSP    = 00000020            VAL_K_NAK_NO   = 00000000            
DTS$_BADSUBFCN = 01F58053            MSG$_SNDACC    = 0000000A            VAL_K_PRIN_NO  = 00000000            
DTS$_BADUSRDAT = 01F58013            MSG$_SNDSMB    = 00000004            VAL_K_PRIN_YES = 00000080            
DTS$_BADUSRLEN = 01F5800B            MSG$_SUSOPR    = 00000012            VAL_K_RETU_NO  = 00000000            
DTS$_CINBAD    = 01F58003            MSG$_THIRDPARTY= 00000039            VAL_K_RETU_RECE= 00000004            
DTS$_CINREJ    = 01F5801B            MSG$_TIMEOUT   = 0000003A            VAL_K_RETU_STAN= 00000002            
DTS$_DISBAD    = 01F5802B            MSG$_TRMHANGUP = 00000006            VAL_K_STAT_NO  = 00000000            
DTS$_INVOPTION = 01F58063            MSG$_TRMUNSOLIC= 00000001            VAL_K_STAT_YES = 00000001            
EFN_K_CONN_ACCE= 00000001            MSG$_XM_ATTN   = 0000000D            VAL_K_TEST_CONN= 00000000            
EFN_K_CONN_INIT= 00000001            MSG$_XM_DATAVL = 0000000B            VAL_K_TEST_DATA= 00000001            
EFN_K_CONN_REJE= 00000002            MSG$_XM_SHUTDN = 0000000C            VAL_K_TEST_DISC= 00000002            
EFN_K_DISC_ABRT= 00000004            SA               00000000 RG    03   VAL_K_TEST_INTE= 00000003            
EFN_K_DISC_SYNC= 00000003            SS$_NOSOLICIT    ********   X   03   VAL_K_TEST_MISC= 00000004            
EFN_K_READ_MAIL= 00000000            SYS$CANCEL       ********   X   03   VAL_K_TYPE_ABRT= 00000001            
EFN_K_RECV_DATA= 00000007            SYS$CANTIM       ********   X   03   VAL_K_TYPE_ACCE= 00000001            
EFN_K_SIGNAL   = 00000009            SYS$SETIMR       ********   X   03   VAL_K_TYPE_ECHO= 00000003            
EFN_K_TIMER    = 00000008            SYS$WAITFR       ********   X   03   VAL_K_TYPE_NAME= 00000000            
EFN_K_XMIT_DATA= 00000005            SYS$WAKE         ********   X   03   VAL_K_TYPE_PATT= 00000002            
EFN_K_XMIT_INTE= 00000006            TST$CHECK_IOSB   ********   X   03   VAL_K_TYPE_REJE= 00000000            
GBL...         = 00000000            TST$CHECK_SS     ********   X   03   VAL_K_TYPE_SEQU= 00000001            
K_LIST_MEB     = 00000000            TST$DISPLAY_MSG  ********   X   03   VAL_K_TYPE_SINK= 00000000            
MAX_K_BACK     = 00000080            TST$EXAM_MAIL    ********   X   03   VAL_K_TYPE_SYNC= 00000000            
MAX_K_DISPLAY  = 00000026            TST$GB_ASTFLAGS  ********   X   03   
MAX_K_NAK      = 00000080            TST$GB_DISPLAY   ********   X   03   
MAX_K_RQUEUE_DA= 00000008            TST$GB_INTEBUF   ********   X   03   
MAX_K_RQUEUE_IN= 00000008            TST$GB_RECVBUF   ********   X   03   
MAX_K_SIZE_DA  = 00001000            TST$GB_XMITBUF   ********   X   03   
MAX_K_SIZE_IN  = 00000010            TST$GL_CLOCK     ********   X   03   
MAX_K_SPEED    = 000F4240            TST$GL_FAOARG    ********   X   03   
TST$DTSAST      - DTS AST ROUTINES                               22-AUG-1978 01:07:40   VAX-11 MACRO X0.3-11               Page  12
PROGRAM SECTION SYNOPSIS                                                                                                         (7)



PROGRAM SECTION SYNOPSIS

.  ABS  .        00000000      00     NOPIC   USR   CON   ABS   LCL NOSHR NOEXE NORD  NOWRT BYTE  
. BLANK .        00000000      01     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
$ABS$            00000000      02     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  
TST$CODE         000001FA      03     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD  NOWRT BYTE  


THERE WERE NO ERRORS OR WARNINGS.
20688. BYTES LEFT IN FREE MEMORY POOL.
24. BYTES OF RECLAIMED MEMORY.
OBJ$:DTSAST,LIS$:DTSAST/-SP=SRC$:DTPREFIX,DTSAST
28 MLB DIR RDS - 257 GETS TO DEFINE 18 MACROS. 20 INTER. FILE WRITES. 
