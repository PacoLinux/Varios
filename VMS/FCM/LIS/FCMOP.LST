FCMOP	MACRO M1110  21-AUG-78 23:22  PAGE 2


      1						.TITLE	FCMOP
      2						.IDENT	/00/
      3
      4					;
      5					; COPYRIGHT   1977,  DIGITAL  EQUIPMENT  CORP.,  MAYNARD,   MASS.
      6					;
      7					; THIS SOFTWARE IS FURNISHED TO PURCHASER UNDER A LICENSE FOR USE
      8					; ON A SINGLE COMPUTER SYSTEM  AND  CAN BE COPIED (WITH INCLUSION
      9					; OF DEC'S COPYRIGHT NOTICE)  ONLY FOR USE IN SUCH SYSTEM, EXCEPT
     10					; AS MAY OTHERWISE BE PROVIDED IN WRITING BY DEC.
     11					;
     12					; THE INFORMATION IN  THIS DOCUMENT IS  SUBJECT TO CHANGE WITHOUT
     13					; NOTICE AND SHOULD NOT  BE CONSTRUED AS  A COMMITMENT BY DIGITAL
     14					; EQUIPMENT CORPORATION.
     15					;
     16					; DEC ASSUMES  NO  RESPONSIBILITY  FOR  THE  USE  OR  RELIABILITY
     17					; OF ITS  SOFTWARE  ON  EQUIPMENT  WHICH IS NOT  SUPPLIED BY DEC.
     18					;
     19					; VERSION 00
     20					;
     21					; C. MONIA 17-OCT-77
     22					;
     23					; OPEN TASK, CME AND OUTPUT FILES
     24					;
     25					; MACRO LIBRARY CALLS
     26					;
     27
     28						.MCALL	FDAT$R,FDBK$R,OFNB$R,OFNB$W
     29
     30					;+
     31					; **-$OPNOU-OPEN CME OUTPUT OUTPUT FILE
     32					;
     33					; THIS SUBROUTINE IS CALLED TO OPEN THE CME OUTPUT FILE
     34					;
     35					; INPUTS:
     36					;
     37					;	$OUFDB=OUTPUT FILE FDB
     38					;
     39					; OUTPUTS:
     40					;
     41					;	THE OUTPUT FILE IS OPENED BY FILENAME BLOCK FOR WRITE
     42					;
     43					;-
     44
     45	000000				$OPNOU::			;
     46	000000					OFNB$W	#$OUFDB		; OPEN OUTPUT FILE FOR WRITE
     47	000016	103415 				BCS	OPERR		; IF C/S OPEN ERROR
     48	000020					RETURN			;
     49
     50					;+
     51					; **-$OPNIN-OPEN INPUT FILE FOR READ
     52					; **-$OPNTK-OPEN TASK FILE FOR READ
     53					;
     54					; AN INPUT FILE IS OPENED FOR READ BY FILENAME BLOCK
     55					;
     56					; INPUTS:
     57					;
FCMOP	MACRO M1110  21-AUG-78 23:22  PAGE 2-1


     58					;	$INFDB=INPUT FILE FDB
     59					;	$TKFDB=TASK FILE FDB
     60					;
     61					; OUTPUTS:
     62					;
     63					;	R0=ADDRESS OF INPUT FILE FDB
     64					;	SPECIFIED FILE IS OPENED FOR READ
     65					;
     66					;-
     67
     68						.ENABL	LSB
     69
     70
     71	000022				$OPNIN::			;
     72	000022	012700 	000000G			MOV	#$INFDB,R0	; GET ADDRESS OF INPUT FILE
     73	000026	000402 				BR	10$		;
     74
     75					;
     76					; OPEN TASK FILE
     77					;
     78
     79	000030				$OPNTK::			;
     80	000030	012700 	000000G			MOV	#$TKFDB,R0	; GET ADDRESS OF TASK FILE
     81	000034				10$:				;
     82	000034					OFNB$R	R0		; OPEN FILE FOR READ
     83	000046	103401 				BCS	OPERR		; IF C/S OPEN ERROR
     84	000050					RETURN			;
     85
     86						.DSABL	LSB
     87
     88					;
     89					; ERROR ON OPEN
     90					;
     91
     92	000052				OPERR:				;
     93	000052	062700 	000000C			ADD	#F.FNB+N.FNAM,R0 ; POINT TO FILENAME BLOCK
     94	000056	010002 				MOV	R0,R2		; COPY ADDRESS OF FNB
     95	000060					ERROR$	E$R9,S$V2	; FATAL, NO RETURN
     96
     97		000001 				.END
FCMOP	MACRO M1110  21-AUG-78 23:22  PAGE 2-2
SYMBOL TABLE

CR    = 000015   	F.FACC= ****** GX	OPERR   000052R  	VT    = 000013   	$OPNTK  000030RG
E$R9  = ****** GX	F.FNB = ****** GX	PAR$$$= 000000   	$CMD  = ****** GX	$OUFDB= ****** GX
FF    = 000014   	HT    = 000011   	R$$11M= 000000   	$INFDB= ****** GX	$TKFDB= ****** GX
FO.RD = ****** GX	LF    = 000012   	SPA   = 000040   	$OPNIN  000022RG 	.OPFNB= ****** G
FO.WRT= ****** GX	N.FNAM= ****** GX	S$V2  = ****** GX	$OPNOU  000000RG

. ABS.	000000	   000
      	000072	   001
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  1684 WORDS  ( 7 PAGES)
DYNAMIC MEMORY:  2772 WORDS  ( 10 PAGES)
ELAPSED TIME:  00:00:08
OBJ$:FCMOP,LIS$:FCMOP/-SP=SRC$:MACFLM,FCMOP
