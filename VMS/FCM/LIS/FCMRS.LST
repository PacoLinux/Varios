FCMRS	MACRO M1110  21-AUG-78 23:23  PAGE 2


      1						.TITLE	FCMRS
      2						.IDENT	/00/
      3
      4					;
      5					; COPYRIGHT (C) 1976, 1977
      6					; DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
      7					;
      8					; THIS SOFTWARE IS FURNISHED UNDER  A LICENSE FOR USE ONLY  ON  A
      9					; SINGLE COMPUTER SYSTEM AND MAY BE  COPIED ONLY WITH  THE INCLU-
     10					; SION OF  THE  ABOVE  COPYRIGHT NOTICE.  THIS SOFTWARE,  OR  ANY
     11					; OTHER COPIES THEREOF, MAY NOT BE  PROVIDED  OR  OTHERWISE  MADE
     12					; AVAILABLE TO ANY OTHER PERSON EXCEPT  FOR  USE  ON  SUCH SYSTEM
     13					; AND TO  ONE WHO AGREES  TO  THESE LICENSE  TERMS.  TITLE TO AND
     14					; OWNERSHIP OF THE SOFTWARE SHALL AT ALL TIMES REMAIN IN DEC.
     15					;
     16					; THE INFORMATION IN THIS SOFTWARE  IS  SUBJECT TO CHANGE WITHOUT
     17					; NOTICE AND SHOULD NOT BE CONSTRUED  AS  A COMMITMENT BY DIGITAL
     18					; EQUIPMENT CORPORATION.
     19					;
     20					; DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF ITS
     21					; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
     22					; VERSION 00
     23					;
     24					; C. MONIA 18-OCT-1977
     25					;
     26					; FCM RESTART AFTER FATAL ERROR
     27					;
     28					; MACRO LIBRARY CALLS
     29					;
     30
     31						.MCALL	CLOSE$
     32
     33					;+
     34					; **-$FCMRS-SETUP FOR RESTART AFTER FATAL ERROR
     35					;
     36					; THIS ORUTINE IS CALLED TO SETUP THE RESTART VECTOR TO BE CALLED PRIOR TO
     37					; RESTARTING THE PROGRAM OR AFFECTING TASK EXIT. IT ESTABLISHES THE CLEANUP
     38					; ENTRY POINT THEN RETURNS CONTROL TO THE CALLER. THE ENTRY POINT WILL BE
     39					; CALLED PRIOR TO TASK EXIT OR IN THE EVENT OF A FATAL ERROR TO PERFORM
     40					; CLEANUP AND RETURN CONTROL TO THE CALLER.
     41					;
     42					;-
     43
     44	000000				$FCMRS::			;
     45	000000	012767 	000010'	000000G		MOV	#$FCMCL,$CLNUP	; SET ENTRY POINT OF CLEANUP ROUTINE
     46	000006					RETURN			;
     47
     48					;+
     49					; **-$FCMCL-THIS ROUTINE IS CALLED TO CLOSE ALL FILES
     50					;
     51					;-
     52
     53	000010				$FCMCL::			;
     54	000010					CLOSE$	#$INFDB		; CLOSE INPUT FILE
     55	000020					CLOSE$	#$OUFDB		; CLOSE OUTPUT FILE
     56	000030					CLOSE$	#$TKFDB		; CLOSE TASK FILE
     57	000040					RETURN			;
FCMRS	MACRO M1110  21-AUG-78 23:23  PAGE 2-1


     58
     59		000001 				.END
FCMRS	MACRO M1110  21-AUG-78 23:23  PAGE 2-2
SYMBOL TABLE

CR    = 000015   	LF    = 000012   	SPA   = 000040   	$FCMCL  000010RG 	$OUFDB= ****** GX
FF    = 000014   	PAR$$$= 000027   	VT    = 000013   	$FCMRS  000000RG 	$TKFDB= ****** GX
HT    = 000011   	R$$11M= 000000   	$CLNUP= ****** GX	$INFDB= ****** GX	.CLOSE= ****** G

. ABS.	000000	   000
      	000042	   001
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  857 WORDS  ( 4 PAGES)
DYNAMIC MEMORY:  2772 WORDS  ( 10 PAGES)
ELAPSED TIME:  00:00:06
OBJ$:FCMRS,LIS$:FCMRS/-SP=SRC$:MACFLM,FCMRS
