SOSHLP - SUPPORT ROUTINES FOR H	MACRO M1110  22-AUG-78 05:32  PAGE 2


    100						.TITLE	SOSHLP - SUPPORT ROUTINES FOR HELP COMMAND
    200						.IDENT	/6B0201/
    300					;
    400					; COPYRIGHT 1977, DIGITAL EQUIPMENT CORP., MAYNARD, MASS. 01754
    500					;
    600					; DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF ITS
    700					; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
    800					;
    900					; THIS SOFTWARE IS FURNISHED TO PURCHASER UNDER A LICENSE FOR USE
   1000					; ON A SINGLE COMPUTER SYSTEM AND CAN BE COPIED (WITH INCLUSION
   1100					; OF DEC'S COPYRIGHT NOTICE) ONLY FOR USE IN SUCH SYSTEM, EXCEPT
   1200					; AS MAY OTHERWISE BE PROVIDED IN WRITING BY DEC.
   1300					;
   1400					; THE INFORMATION IN THIS DOCUMENT IS SUBJECT TO CHANGE WITHOUT
   1500					; NOTICE AND SHOULD NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL
   1600					; EQUIPMENT CORPORATION.
   1700					;
   1800					; PETER H. LIPMAN	19-JUN-77
   1900					;
   2000						.MCALL	FDOF$L
   2100	000000					FDOF$L
   2200						.MCALL	GET$S
   2300
   2400	000000					CODE$	HLP
   2500
   2600	000000	000002 	000014'		HLPDSC:	.WORD	DEVSIZ,DEVADR
   2700	000004	000005 	000016'			.WORD	DIRSIZ,DIRADR
   2800	000010	000007 	000023'			.WORD	NAMSIZ,NAMADR
   2900
   3000						.IF	NDF,R$$STS
   3100	000014	   114 	   102 		DEVADR:	.ASCII	/LB/
   3200						.IFF
   3300					DEVADR:	.ASCII	/SY/
   3400						.ENDC
   3500		000002 				DEVSIZ=.-DEVADR
   3600	000016	   133 	   061 	   054 	DIRADR:	.ASCII	/[1,2]/
	000021	   062 	   135
   3700		000005 				DIRSIZ=.-DIRADR
   3800	000023	   123 	   117 	   123 	NAMADR:	.ASCII	/SOS.HLP/
	000026	   056 	   110 	   114
	000031	   120
   3900		000007 				NAMSIZ=.-NAMADR
   4000
   4100						.EVEN
SOSHLP - SUPPORT ROUTINES FOR H	MACRO M1110  22-AUG-78 05:32  PAGE 3


    100	000032				ENTRY	OPNHLP				;OPNHLP(FDBADR)
    150	000032	016600 	000002 			MOV	2(SP),R0		;GET FDB ADDRESS
    200	000036	004167 	000000G			JSR	R1,$SAV3		;SAVE SOME REGISTERS
    600	000042	012702 	000000'			MOV	#HLPDSC,R2		;FILE NAME DESCRIPTOR
    700	000046	004767 	000000G			JSR	PC,PARSE		;PARSE THE NAME
    800	000052	103404 				BCS	10$			;BRANCH IF FAILED
    850	000054	010046 				MOV	R0,-(SP)		;PARAMETER FOR OPEN
    900	000056	004767 	000000G			JSR	PC,OPEN			;OPEN FOR READING
   1000	000062	005726 				TST	(SP)+			;CLEAN OFF OPEN PARAMETER
   1100	000064	000207 			10$:	RTS	PC			;AND RETURN
   1200
   1300
   1400	000066				ENTRY	GETHLP				;GETHLP(FDB,BUFADR,SIZ)
   1500	000066					GET$S	6(SP),4(SP),2(SP)	;GET THE NEXT RECORD
   1600	000112	103403 				BCS	10$			;BRANCH IF ERROR
   1700	000114	016000 	000024 			MOV	F.NRBD(R0),R0		;RETURN RECORD SIZE
   1800	000120	000207 				RTS	PC
   1900	000122	012700 	177777 		10$:	MOV	#-1,R0			;OTHERWISE, RETURN ERROR INDICATION
   2000	000126	000207 				RTS	PC
   3400
   3500
   3600		000001 				.END
SOSHLP - SUPPORT ROUTINES FOR H	MACRO M1110  22-AUG-78 05:32  PAGE 3-1
SYMBOL TABLE

DEVADR  000014R     002	F.DFNB= 000046   	F.MBFG= 000056   	F.VBSZ= 000060   	PARSE = ****** GX
DEVSIZ= 000002   	F.DSPT= 000044   	F.NRBD= 000024   	GETHLP  000066RG    002	PAR$$$= 000066
DIRADR  000016R     002	F.DVNM= 000134   	F.NREC= 000030   	HLPDSC  000000R     002	RONLY$= 000001
DIRSIZ= 000005   	F.EFBK= 000010   	F.OVBS= 000030   	NAMADR  000023R     002	R$$EIS= 000001
F.ACTL= 000076   	F.EFN = 000050   	F.RACC= 000016   	NAMSIZ= 000007   	R$$SHR= 000001
F.ALOC= 000040   	F.EOBB= 000032   	F.RATT= 000001   	N.DID = 000024   	S.FATT= 000016
F.BBFS= 000062   	F.ERR = 000052   	F.RCNM= 000034   	N.DVNM= 000032   	S.FDB = 000140
F.BDB = 000070   	F.FACC= 000043   	F.RCTL= 000017   	N.FID = 000000   	S.FNAM= 000006
F.BGBC= 000057   	F.FFBY= 000014   	F.RSIZ= 000002   	N.FNAM= 000006   	S.FNB = 000036
F.BKDN= 000026   	F.FNAM= 000110   	F.RTYP= 000000   	N.FTYP= 000014   	S.FNBW= 000017
F.BKDS= 000020   	F.FNB = 000102   	F.SEQN= 000100   	N.FVER= 000016   	S.FNTY= 000004
F.BKEF= 000050   	F.FTYP= 000116   	F.SPDV= 000072   	N.NEXT= 000022   	S.FTYP= 000002
F.BKP1= 000051   	F.FVER= 000120   	F.SPUN= 000074   	N.STAT= 000020   	S.NFEN= 000020
F.BKST= 000024   	F.HIBK= 000004   	F.STBK= 000036   	N.UNIT= 000034   	$SAV3 = ****** GX
F.BKVB= 000064   	F.LUN = 000042   	F.UNIT= 000136   	OPEN  = ****** GX	.GETSQ= ****** G
F.CHR = 000075   	F.MBCT= 000054   	F.URBD= 000020   	OPNHLP  000032RG    002	...TPC= 000140
F.CNTG= 000034   	F.MBC1= 000055   	F.VBN = 000064

. ABS.	000000	   000
      	000000	   001
CODE  	000130	   002
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  1914 WORDS  ( 8 PAGES)
DYNAMIC MEMORY:  2772 WORDS  ( 10 PAGES)
ELAPSED TIME:  00:00:07
OBJ$:SOSHLP,LIS$:SOSHLP/-SP/NL:TOC=SRC$:PREFIX,SOSHLP
