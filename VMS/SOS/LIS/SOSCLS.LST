SOSCLS - PRTFIL, RDFNM, WRTFNM	MACRO M1110  22-AUG-78 05:30  PAGE 2


    100						.TITLE	SOSCLS - PRTFIL, RDFNM, WRTFNM
    200						.IDENT	/020600/
    300					;
    400					; COPYRIGHT 1978, DIGITAL EQUIPMENT CORP., MAYNARD, MASS. 01754
    500					;
    600					; DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF ITS
    700					; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
    800					;
    900					; THIS SOFTWARE IS FURNISHED TO PURCHASER UNDER A LICENSE FOR USE
   1000					; ON A SINGLE COMPUTER SYSTEM AND CAN BE COPIED (WITH INCLUSION
   1100					; OF DEC'S COPYRIGHT NOTICE) ONLY FOR USE IN SUCH SYSTEM, EXCEPT
   1200					; AS MAY OTHERWISE BE PROVIDED IN WRITING BY DEC.
   1300					;
   1400					; THE INFORMATION IN THIS DOCUMENT IS SUBJECT TO CHANGE WITHOUT
   1500					; NOTICE AND SHOULD NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL
   1600					; EQUIPMENT CORPORATION.
   1700					;
   1800					; PETER H. LIPMAN	23-FEB-76
   1900					;
   1901					;	06	27-JUL-78	P. H. LIPMAN
   1902					;
   1903					;	DEFAULT DIRECTORY STRING BUFFER REQUIRED FOR VAX.  MUST MOVE THE
   1904					;		DEFAULT DIRECTORY STRING INTO IT THE FIRST TIME.
   1905					;
   2100						.MCALL	FDOF$L,FCSBT$,QIOSY$
   2200	000000					FDOF$L
   2300	000000					FCSBT$
   2400	000000					QIOSY$
   2420						.MCALL	ALUN$S,DIR$,WTSE$S,QIO$,NMBLK$
   2430
   2440	000000					DATA$	CLS
   2450					;
   2460					; QIOSYM MESSAGE FILE NAME
   2470					;
   2480	000000				QIOMSG::NMBLK$	QIOSYM,MSG,,LB,0
   2490
   2500
   2510	000000					.PSECT	DIRSEC	RW,D
   2520					;
   2530					; EXTEND THIS SECTION FOR VAX/VMS
   2540					;
   2550	000000				DIRSTR:
   2560
   2600	000000					CODE$	CLS
   2700
   2710					;
   2720					; CALL GET ERROR MESSAGE AND RETURN
   2730					;
   2800	000000				GERRM1::
   2900	000000	004767 	000000G			JSR	PC,.GERRM
   3000	000004	006146 				ROL	-(SP)			;SAVE CARRY BIT
   3100	000006	000167 	000000G			JMP	GERRM2
SOSCLS - PRTFIL, RDFNM, WRTFNM	MACRO M1110  22-AUG-78 05:30  PAGE 3
PRTFIL - PRINT THE NAME OF AN OPEN FILE

    100						.SBTTL	PRTFIL - PRINT THE NAME OF AN OPEN FILE
    400					;
    500					; PRTFIL(FDB ADR, FLAGS)
    600					;	2(SP) = FLAGS
    700					;		BIT 0 (1) - PRINT (NO CHANGES)
    800					;		BIT 1 (2) - ENCLOSE NAME IN BRACKETS [...]
    900					;		BIT 2 (4) - DO NOT RETURN CARRIAGE AFTER NAME
   1000					;	4(SP) = FDB ADDRESS
   1100					;
   1200	000012				ENTRY	PRTFIL
   1300	000012	005046 				CLR	-(SP)		; GET A SCRATCH WORD ON STACK
   1400	000014	136627 	000004 	000002 		BITB	4(SP),#2	; BRACKETS WANTED?
   1500	000022	001404 				BEQ	10$		; NO
   1600	000024	012716 	000133 			MOV	#'[,(SP)
   1700	000030	004767 	000000G			JSR	PC,TYPE		; TYPE LEADING BRACKET
   1800	000034	016646 	000006 		10$:	MOV	6(SP),-(SP)	; FDB POINTER
   1900	000040	016746 	000000G			MOV	TTOCTL,-(SP)	; DIRECT TO TTY OUTPUT BUFFER
   2000	000044	004767 	000072 			JSR	PC,NAMFIL	; GENERATE FILE NAME
   2100	000050	060067 	000000G			ADD	R0,TTOCTL	; COMPUTE NEW TTY OUTPUT BUFFER
   2200	000054	060067 	000002G			ADD	R0,TTOCTL+2	; POINTERS
   2300	000060	022626 				CMP	(SP)+,(SP)+	; CLEAR TW PARAM WORDS
   2400	000062	136627 	000004 	000002 		BITB	4(SP),#2	; CLOSING BRACKET?
   2500	000070	001404 				BEQ	20$		; NO
   2600	000072	012716 	000135 			MOV	#'],(SP)
   2700	000076	004767 	000000G			JSR	PC,TYPE
   2800	000102	036627 	000004 	000001 	20$:	BIT	4(SP),#1	; PRINT (NO CHANGES)?
   2900	000110	001404 				BEQ	30$		; NO
   3000	000112	012716 	000746'			MOV	#NOCHG,(SP)
   3100	000116	004767 	000000G			JSR	PC,PRINT
   3200	000122	036627 	000004 	000004 	30$:	BIT	4(SP),#4	; RETURN CARRIAGE?
   3300	000130	001002 				BNE	40$		; NO IF SET
   3400	000132	004767 	000000G			JSR	PC,TYPECR
   3500	000136	005726 			40$:	TST	(SP)+
   3600	000140	000207 				RTS	PC		; RETURN TO CALLER
SOSCLS - PRTFIL, RDFNM, WRTFNM	MACRO M1110  22-AUG-78 05:30  PAGE 4
PRTFIL - PRINT THE NAME OF AN OPEN FILE

    100					;
    200					; NAMFIL( FDB-ADDRESS, OUTPUT-LOCATION)
    300					;
    400					;	GENERATES A NAME FOR FILE WITH THE CORRESPONDING FDB,
    500					;	AND PUTS IT INTO A STRING STARTING AT THE DESIGNATED
    600					;	LOCATION. THE LENGTH OF THE STRING GENERATED IS RETURNED
    700					;	AS THE VALUE OF THE ROUTINE (IN R0)
    800					;
    900	000142				ENTRY	NAMFIL			;MAIN ENTRY POINT
   1000	000142	004167 	000000G			JSR	R1,$SAV3		;SAVE REGS
   1100	000146	016603 	000014 			MOV	14(SP),R3		;FDB ADDRESS
   1200	000152	016602 	000012 			MOV	12(SP),R2		; OUTPUT LOCATION
   1300	000156	062703 	000102 			ADD	#F.FNB,R3		;POINT TO NAMEBLK
   1400	000162	116322 	000032 			MOVB	N.DVNM(R3),(R2)+	;FIRST BYTE OF DEVICE
   1500	000166	116322 	000033 			MOVB	N.DVNM+1(R3),(R2)+	;SECOND OF DEVICE
   1550	000172	005046 				CLR	-(SP)			;ZERO A WORD FOR
   1600	000174	116316 	000034 			MOVB	N.UNIT(R3),(SP)		;A BYTE OF UNIT NUMBER
   1900
   2000						.IF	DF,R$$STS
   2050						MOV	#1,-(SP)		;LEN OF 1
   2100						TSTB	N.UNIT+1(R3)		;EXPLICIT UNIT?
   2200						BNE	7$			;NO
   2300						CMP	N.DVNM(R3),#"SY		;IF SYSTEM DEVICE,
   2400						BEQ	7$			;NEVER A UNIT
   2410
   2420						.IFF				;RSX ONLY
   2430	000200	032767 	000000G	000000G		BIT	#SYSCME,SYSTEM		;IF CME
   2440	000206	001410 				BEQ	5$
   2450	000210	011600 				MOV	(SP),R0			;GET UNIT
   2460
   2470						.IF	DF,R$$EIS
   2480	000212	072027 	177774 			ASH	#-4,R0			;HIGH 4 BITS
   2490						.IFF
   2500						ASR	R0
   2510						ASR	R0
   2520						ASR	R0
   2530						ASR	R0
   2540						.ENDC	;R$$EIS
   2550
   2560	000216	062700 	000101 			ADD	#'A,R0			;FORM CONTROLLER LETTER
   2570	000222	110022 				MOVB	R0,(R2)+		;AND STORE IT
   2580	000224	042716 	177760 			BIC	#^C<17>,(SP)		;CLEAR OUT CONTROLLER NUMBER
   2590	000230	012746 	000001 		5$:	MOV	#1,-(SP)		;AT LEAST ONE DIGIT OF UNIT
   2600						.ENDC	;R$$STS
   2610
   2700	000234	004767 	000000G			JSR	PC,CNVDEC		;PRINT NUMERIC VALUE
   2800	000240	004767 	000434 			JSR	PC,MOVDEC		; COPY IT TO OUTPUT STRING
   2900	000244	112722 	000072 		7$:	MOVB	#':,(R2)+		;COLON AFTER DEVICE
   3000
   3100						.IF	DF,R$$STS
   3200						TST	N.DID(R3)		;WAS A UIC SUPPLIED?
   3300						BEQ	40$			;IF NOT, DON'T PRINT [0,0]
   3400						MOVB	#'[,(R2)+		;SET START OF PPN
   3500						MOVB	N.DID+1(R3),2(SP)		;PROJ NUMBER
   3600						MOV	#1,(SP)
   3700						JSR	PC,CNVDEC
   3800						JSR	PC,MOVDEC
SOSCLS - PRTFIL, RDFNM, WRTFNM	MACRO M1110  22-AUG-78 05:30  PAGE 4-1
PRTFIL - PRINT THE NAME OF AN OPEN FILE

   3900						MOVB	#',,(R2)+
   4000						MOVB	N.DID(R3),2(SP)
   4100						MOV	#1,(SP)
   4200						JSR	PC,CNVDEC		;PROG NUMBER
   4300						JSR	PC,MOVDEC
   4400						MOVB	#'],(R2)+
   4500
   4600						.IFF
   4700					;
   4800					; PRINT DIRECTORY STRING
   4900					;
   5000	000250	010200 				MOV	R2,R0
   5100	000252	032763 	000100 	000020 		BIT	#NB.DIR,N.STAT(R3)	;EXPLICIT DIRECTORY GIVEN?
   5110	000260	001033 				BNE	25$			;BRANCH IF YES
   5120	000262	032767 	000000G	000000G		BIT	#SYSCME,SYSTEM		;IF VAX/VMS CME
   5130	000270	001420 				BEQ	18$
   5140	000272	012702 	000000'		10$:	MOV	#DIRSTR,R2		;USE COPY OF DEFAULT DIR STRING
   5150	000276	112201 				MOVB	(R2)+,R1		;UNLESS IT HASN'T BEEN INITIALIZED
   5160	000300	003020 				BGT	20$			;BRANCH IF IT IS PRESENT
   5170	000302	004767 	000000G			JSR	PC,.RDFDR		;GET FCS DEFAULT DIR STRING
   5180	000306	005701 				TST	R1			;FORGET IT IF THIS IS NOT INITIALIZED
   5190	000310	003516 				BLE	42$			;BRANCH IF NOT INITIALIZED
   5200	000312	010046 				MOV	R0,-(SP)		;SAVE OUTPUT STRING ADDRESS
   5210	000314	012700 	000000'			MOV	#DIRSTR,R0		;ADR TO SAVE DEFAULT DIR STRING
   5220	000320	110120 				MOVB	R1,(R0)+		;SAVE ITS SIZE
   5230	000322	112220 			12$:	MOVB	(R2)+,(R0)+		;COPY THE DEFAULT DIRECTORY STRING
   5240	000324	077102 				SOB	R1,12$			;
   5250	000326	012600 				MOV	(SP)+,R0		;RECOVER SAVED OUTPUT BUFFER ADR
   5260	000330	000760 				BR	10$			;AND USE SAVED DEFAULT DIR STRING
   5300	000332	004767 	000000G		18$:	JSR	PC,.RDFDR		;READ DEFAULT DIRECTORY
   5310	000336	005701 				TST	R1			;TEST FOR NULL STRING
   5320	000340	003502 				BLE	42$			;BRANCH IF NO DIRECTORY STRING
   5400	000342	112220 			20$:	MOVB	(R2)+,(R0)+		;R2=ADR, R1=SIZE OF DIR STRING
   5500	000344	077102 				SOB	R1,20$
   5600	000346	000477 				BR	42$
   5700					;
   5800					; MUST RECOVER DIRECTORY NAME USING DIRECTORY ID
   5900					;
   6000	000350	012701 	000000G		25$:	MOV	#TMPFNB,R1		;USE TEMP FILE NAME BLOCK
   6100	000354	016311 	000024 			MOV	N.DID(R3),(R1)		;MOVE DIR ID TO FNB FILE ID
   6200	000360	016361 	000026 	000002 		MOV	N.DID+2(R3),2(R1)
   6300	000366	016361 	000030 	000004 		MOV	N.DID+4(R3),4(R1)
   6400	000374	016361 	000032 	000032 		MOV	N.DVNM(R3),N.DVNM(R1)
   6500	000402	016361 	000034 	000034 		MOV	N.UNIT(R3),N.UNIT(R1)
   6600	000410	004767 	000352 			JSR	PC,RDFNM		;READ FILE NAME INTO FNB
   6700	000414	103453 				BCS	40$			;BRANCH IF FAILED
   6800	000416	010103 				MOV	R1,R3			;R3 = FNB
   6900	000420	062703 	000006 			ADD	#N.FNAM,R3		;POINT AT FILE NAME FIELD
   7000	000424	112720 	000133 			MOVB	#'[,(R0)+
   7100	000430	012301 				MOV	(R3)+,R1		;1ST WORD OF FILE NAME, RAD50
   7200	000432	004767 	000000G			JSR	PC,$C5TA
   7300					;
   7400					; IF FIRST CHARACTER IS NUMERIC, THEN ASSUME [PROJ,PROG] FORMAT
   7500					;
   7600	000436	126027 	177775 	000060 		CMPB	-3(R0),#'0
   7700	000444	002416 				BLT	35$			;BRANCH IF .LT. ASCII 0
   7800	000446	126027 	177775 	000071 		CMPB	-3(R0),#'9
SOSCLS - PRTFIL, RDFNM, WRTFNM	MACRO M1110  22-AUG-78 05:30  PAGE 4-2
PRTFIL - PRINT THE NAME OF AN OPEN FILE

   7900	000454	003012 				BGT	35$			;BRANCH IF .GT. ASCII 9
   8000	000456	004767 	000226 			JSR	PC,DLDZER		;DELETE LEAD ZEROS
   8100	000462	112720 	000054 			MOVB	#',,(R0)+
   8200	000466	011301 				MOV	(R3),R1			;2ND WORD OF FILE NAME
   8300	000470	004767 	000000G			JSR	PC,$C5TA
   8400	000474	004767 	000210 			JSR	PC,DLDZER
   8500	000500	000412 				BR	37$
   8600					;
   8700					; FIRST CHAR OF DIRECTORY NAME IS NOT NUMERIC, ASSUME UP TO
   8800					; 9 CHARACTER ASCII DIRECTORY NAME
   8900					;
   9000	000502	012301 			35$:	MOV	(R3)+,R1
   9100	000504	004767 	000000G			JSR	PC,$C5TA		;CONVERT 2ND WORD
   9200	000510	011301 				MOV	(R3),R1
   9300	000512	004767 	000000G			JSR	PC,$C5TA		;AND 3RD WORD
   9400	000516	012701 	000011 			MOV	#9.,R1
   9500	000522	004767 	000130 			JSR	PC,SUPRES		;SUPPRESS TRAILING BLANKS
   9600	000526	112720 	000135 		37$:	MOVB	#'],(R0)+
   9700	000532	016603 	000020 			MOV	20(SP),R3		;RECOVER FDB ADDRESS
   9800	000536	062703 	000110 			ADD	#F.FNB+N.FNAM,R3	;POINT AT FILE NAME
   9900	000542	000403 				BR	45$
  10000						.ENDC
  10100
  10200	000544	010200 			40$:	MOV	R2,R0			;CONVERT FILE NAME TO OUT BUF
  10300	000546	062703 	000006 		42$:	ADD	#N.FNAM,R3		;R3 POINTS TO RAD50 FILE NAME
  10400	000552	012301 			45$:	MOV	(R3)+,R1		;CONVERT FIRST WORD
  10500	000554	004767 	000000G			JSR	PC,$C5TA
  10600	000560	012301 				MOV	(R3)+,R1		;2ND WORD
  10700	000562	004767 	000000G			JSR	PC,$C5TA
  10800
  10900						.IF	NDF,R$$STS
  11000	000566	012301 				MOV	(R3)+,R1		;3RD WORD
  11100	000570	004767 	000000G			JSR	PC,$C5TA
  11200	000574	012701 	000011 			MOV	#9.,R1			;MAX SPACES TO SUPPRESS
  11300
  11400						.IFF
  11500						MOV	#6,R1			;MAX SPACES TO SUPPRESS
  11600						TST	(R3)+			;OVER UNUSED FILE SPACES
  11700						.ENDC
  11800
  11900	000600	004767 	000052 			JSR	PC,SUPRES		;SUPPRESS TRAILING BLANKS
  12000	000604	012301 				MOV	(R3)+,R1		;RAD50 FILE TYPE
  12100	000606	001410 				BEQ	60$			;BRANCH IF NULL
  12200	000610	112720 	000056 			MOVB	#'.,(R0)+		;DELIMITER FOR FILE TYPE
  12300	000614	004767 	000000G			JSR	PC,$C5TA
  12400	000620	012701 	000003 			MOV	#3,R1
  12500	000624	004767 	000026 			JSR	PC,SUPRES		;SUPPRESS TRAILING BLANKS
  12600	000630				60$:
  12700						.IF	NDF,R$$STS
  12800	000630	011301 				MOV	(R3),R1			;FILE VERSION NUMBER
  12900	000632	001405 				BEQ	70$			;SKIP IT IF NULL
  13000	000634	112720 	000073 			MOVB	#';,(R0)+		;VERSION DELIMITER
  13100	000640	005002 				CLR	R2			;CONVERT WITH ZERO SUPPRESSION
  13200	000642	004767 	000000G			JSR	PC,$CBVER		;CONVERT VERSION TO ASCII
  13250										;OCTAL OR DECIMAL ACCORDING TO SYSTEM
  13300	000646				70$:
  13400						.ENDC
SOSCLS - PRTFIL, RDFNM, WRTFNM	MACRO M1110  22-AUG-78 05:30  PAGE 4-3
PRTFIL - PRINT THE NAME OF AN OPEN FILE

  13500	000646	022626 				CMP	(SP)+,(SP)+		; POP 2 FROM STACK
  13600	000650	166600 	000012 			SUB	12(SP),R0		; COMPUTE LENGTH OF DATA STRING
  13700	000654	000207 				RTS	PC			; AND RETURN TO CALLER
SOSCLS - PRTFIL, RDFNM, WRTFNM	MACRO M1110  22-AUG-78 05:30  PAGE 5
PRTFIL - PRINT THE NAME OF AN OPEN FILE

    100					;
    200					; SUPPRESS TRAILING BLANKS FROM STRING POINTED TO BY R0
    300					; AT MOST R1 OF THEM
    400					;
    500	000656				SUPRES:
    600	000656	005301 			10$:	DEC	R1
    700	000660	100406 				BMI	20$			;BRANCH IF COUNT EXCEEDED
    800	000662	122760 	000040 	177777 		CMPB	#' ,-1(R0)		;IS THE PRECEEDING CHAR BLANK?
    900	000670	001002 				BNE	20$			;BRANCH IF NO, DONE
   1000	000672	005300 				DEC	R0			;DELETE IT
   1100	000674	000770 				BR	10$			;AND GO CHECK ANOTHER
   1200	000676	000207 			20$:	RTS	PC
   1300
   1400					;
   1500					; MOVE THE OUTPUT FROM A CNVDEC CALL TO THE OUTPUT BUFFER
   1600					; (ASCIZ STRING POINTED TO BY R0 TO STRING AT R2)
   1700					;
   1800	000700				MOVDEC:
   1900	000700	112022 				MOVB	(R0)+,(R2)+
   2000	000702	001376 				BNE	MOVDEC
   2100	000704	005302 				DEC	R2			; POINT TO NEXT AVAL CHAR
   2200	000706	000207 				RTS	PC			; RETURN
   2300
   2400						.IF	NDF,R$$STS
   2500					;
   2600					; DELETE LEADING ZEROS FROM THE LAST 3 CHARS STORED THROUGH R0
   2700					; AND MOVE THE CHARACTERS TO THE LEFT AS NECESSARY
   2800					;
   2900	000710	012702 	000002 		DLDZER:	MOV	#2,R2			;CHECK 2 CHARS FOR LEAD 0
   3000	000714	162700 	000003 			SUB	#3,R0			;POINT BACK AT 1ST CHAR
   3100	000720	010001 				MOV	R0,R1
   3200	000722	122711 	000060 		10$:	CMPB	#'0,(R1)		;SKIP IT IF A '0
   3300	000726	001002 				BNE	20$
   3400	000730	005201 				INC	R1
   3500	000732	077205 				SOB	R2,10$
   3600	000734	005202 			20$:	INC	R2			;MOVE THE 3RD CHARACTER TOO
   3700	000736	112120 			30$:	MOVB	(R1)+,(R0)+
   3800	000740	077202 				SOB	R2,30$
   3900	000742	000207 				RTS	PC
   4000						.ENDC
   4100
   4200	000744	000010 				.WORD	NOCHGL+1/2
   4300	000746	   040 	   040 	   040 	NOCHG:	.ASCII	/   (NO CHANGES)/
	000751	   050 	   116 	   117
	000754	   040 	   103 	   110
	000757	   101 	   116 	   107
	000762	   105 	   123 	   051
   4400		000017 			NOCHGL	=	.-NOCHG
   4500						.EVEN
   4600
SOSCLS - PRTFIL, RDFNM, WRTFNM	MACRO M1110  22-AUG-78 05:30  PAGE 6
RDFNM, WRTFNM - READ/WRITE FILE NAME FROM/TO HEADER

    100						.SBTTL	RDFNM, WRTFNM - READ/WRITE FILE NAME FROM/TO HEADER
    200
    300						.IF	NDF,R$$STS
    400
    500	000766					DATA$	CLS
    600					;
    700	000036				RWATT:	QIO$	,7,1,,IOSTS,,<,ATTLST>
    800	000066	   000 	   012 		ATTLST:	.BYTE	0,10.
    900	000070	000000 	000000 			.WORD	0,0
   1000
   1100	000074					CODE$	CLS
   1200					;
   1300					; READ FILE NAME FROM FILE HEADER
   1400					; WRITE FILE NAME TO FILE HEADER
   1500					; INPUTS:
   1600					;	R1=FNB TO WRITE FROM OR READ INTO.
   1700					;		WHETHER READING OR WRITING, THE FILE ID, DEVICE, AND UNIT
   1800					;		ARE REQUIRED.
   1900					;		IS RELEVANT
   2000					; OUTPUTS:
   2100					;	C=0 IF OK, C=1 IF ERROR, IOSTS = ERROR CODE
   2200					;	ALL REGISTERS PRESERVED
   2300					;
   2400						.ENABL	LSB
   2500	000766	012767 	013000 	000040'	RDFNM::	MOV	#IO.RAT,RWATT+Q.IOFN	;READ ATTRIBUTES FUNCTION
   2600	000774	112767 	000000C	000066'		MOVB	#-HA.NAM,ATTLST		;CODE FOR READ FILE NAME
   2700	001002	000406 				BR	10$
   2800	001004	012767 	013400 	000040'	WRTFNM::MOV	#IO.WAT,RWATT+Q.IOFN
   2900	001012	112767 	000000G	000066'		MOVB	#HA.NAM,ATTLST		;WRITE FILE NAME
   3000	001020	010167 	000052'		10$:	MOV	R1,RWATT+Q.IOPL		;ADDRESS OF FILE ID
   3100	001024	010167 	000070'			MOV	R1,ATTLST+2
   3200	001030	062767 	000006 	000070'		ADD	#N.FNAM,ATTLST+2	;ADDRESS TO READ/WRITE NAME
   3300	001036					ALUN$S	#7,N.DVNM(R1),N.UNIT(R1)
   3400	001060	103415 				BCS	34$
   3500	001062				20$:	DIR$	#RWATT
   3600	001070	103003 				BCC	30$
   3700	001072	004767 	000000G			JSR	PC,QIOERR
   3800	001076	000771 				BR	20$			;TRY AGAIN, SINCE OUT OF NODES
   3900	001100				30$:	WTSE$S	#1
   4000	001112	103003 				BCC	36$
   4010	001114	013767 	000000G	000000G	34$:	MOV	@#$DSW,IOSTS		;SAVE DIRECTIVE STATUS ERROR
   4100	001122	105767 	000000G		36$:	TSTB	IOSTS
   4200	001126	100001 				BPL	40$
   4300	001130	000261 				SEC
   4400	001132	000207 			40$:	RTS	PC
   4500						.DSABL	LSB
   4600						.ENDC
   4700					;
   4800		000001 				.END
SOSCLS - PRTFIL, RDFNM, WRTFNM	MACRO M1110  22-AUG-78 05:30  PAGE 6-1
SYMBOL TABLE

ATTLST  000066R     002	F.BGBC= 000057   	IE.BDI= 177714   	IE.NDR= 177670   	IO.ATA= 001410
CH.AND= 000001   	F.BKDN= 000026   	IE.BDR= 177716   	IE.NFI= 177704   	IO.ATT= 001400
CNVDEC= ****** GX	F.BKDS= 000020   	IE.BDV= 177711   	IE.NFW= 177673   	IO.CAS= 015420
DIRSTR  000000R     003	F.BKEF= 000050   	IE.BHD= 177700   	IE.NLK= 177661   	IO.CBO= 015510
DLDZER  000710R     004	F.BKP1= 000051   	IE.BLB= 177672   	IE.NLN= 177733   	IO.CCI= 014000
FA.APD= 000100   	F.BKST= 000024   	IE.BLK= 177754   	IE.NNC= 177663   	IO.CCO= 000440
FA.CRE= 000010   	F.BKVB= 000064   	IE.BNM= 177712   	IE.NNL= 177662   	IO.CIN= 016500
FA.DLK= 001000   	F.CHR = 000075   	IE.BTF= 177664   	IE.NNN= 177674   	IO.CLK= 015000
FA.ENB= 100000   	F.CNTG= 000034   	IE.BTP= 177725   	IE.NOD= 177751   	IO.CLN= 003400
FA.EXC= 002000   	F.DFNB= 000046   	IE.BVR= 177701   	IE.NSF= 177746   	IO.CNT= 017000
FA.EXT= 000004   	F.DSPT= 000044   	IE.BYT= 177755   	IE.NST= 177660   	IO.CON= 015400
FA.NSP= 000100   	F.DVNM= 000134   	IE.CKP= 177766   	IE.NSW= 177756   	IO.CPR= 015410
FA.POS= 010000   	F.EFBK= 000010   	IE.CKS= 177742   	IE.NVR= 177652   	IO.CPW= 016520
FA.RD = 000001   	F.EFN = 000050   	IE.CLO= 177732   	IE.NVW= 177651   	IO.CRC= 001040
FA.RWD= 004000   	F.EOBB= 000032   	IE.CNR= 177667   	IE.OFL= 177677   	IO.CRE= 012000
FA.SEQ= 040000   	F.ERR = 000052   	IE.CON= 177752   	IE.ONP= 177773   	IO.CRJ= 015440
FA.SHR= 000040   	F.FACC= 000043   	IE.DAA= 177770   	IE.OVR= 177756   	IO.CSI= 013000
FA.TMP= 000020   	F.FFBY= 000014   	IE.DAO= 177763   	IE.PES= 177655   	IO.CSM= 016470
FA.WCK= 020000   	F.FNAM= 000110   	IE.DFU= 177750   	IE.PNS= 177642   	IO.CTI= 015400
FA.WRT= 000002   	F.FNB = 000102   	IE.DNA= 177771   	IE.PRI= 177760   	IO.CTL= 016400
FD.BLK= 000010   	F.FTYP= 000116   	IE.DNR= 177775   	IE.PTS= 177775   	IO.CTR= 015610
FD.CCL= 000002   	F.FVER= 000120   	IE.DUN= 177767   	IE.RAC= 177724   	IO.CTY= 003400
FD.COM= 020000   	F.HIBK= 000004   	IE.DUP= 177707   	IE.RAT= 177723   	IO.DAC= 010000
FD.CR = 000002   	F.LUN = 000042   	IE.EOF= 177766   	IE.RBG= 177730   	IO.DCI= 014400
FD.DIR= 000010   	F.MBCT= 000054   	IE.EOT= 177702   	IE.RBS= 177761   	IO.DEL= 012400
FD.FTN= 000001   	F.MBC1= 000055   	IE.EOV= 177765   	IE.RCN= 177722   	IO.DET= 002000
FD.F11= 040000   	F.MBFG= 000056   	IE.EXP= 177665   	IE.RER= 177740   	IO.DIS= 016000
FD.INS= 000010   	F.NRBD= 000024   	IE.FEX= 177717   	IE.RNM= 177715   	IO.DLB= 016540
FD.ISP= 002000   	F.NREC= 000030   	IE.FHE= 177705   	IE.RSU= 177757   	IO.DSI= 013400
FD.MNT= 100000   	F.OVBS= 000030   	IE.FIX= 177767   	IE.SDP= 177635   	IO.DTI= 016000
FD.OSP= 004000   	F.RACC= 000016   	IE.FLN= 177657   	IE.SNC= 177735   	IO.DTY= 006400
FD.PLC= 000004   	F.RATT= 000001   	IE.FOP= 177713   	IE.SPC= 177772   	IO.ENA= 006000
FD.PRN= 000004   	F.RCNM= 000034   	IE.HFU= 177744   	IE.SQC= 177734   	IO.EOF= 003000
FD.PSE= 010000   	F.RCTL= 000017   	IE.HWR= 177772   	IE.SRE= 177762   	IO.EXT= 011400
FD.RAH= 000001   	F.RSIZ= 000002   	IE.IBS= 177647   	IE.STK= 177706   	IO.FDX= 003020
FD.RAN= 000002   	F.RTYP= 000000   	IE.IDU= 177644   	IE.TCH= 177765   	IO.FLN= 012400
FD.REC= 000001   	F.SEQN= 000100   	IE.IEF= 177637   	IE.TMM= 177671   	IO.FNA= 004400
FD.RWM= 000001   	F.SPDV= 000072   	IE.IES= 177656   	IE.TMO= 177666   	IO.GLC= 016430
FD.SDI= 000020   	F.SPUN= 000074   	IE.IFC= 177776   	IE.ULK= 177653   	IO.GLI= 016420
FD.SQD= 000040   	F.STBK= 000036   	IE.IFU= 177747   	IE.ULN= 177773   	IO.GNI= 016410
FD.TTY= 000004   	F.UNIT= 000136   	IE.ILL= 177726   	IE.UNS= 177774   	IO.GRC= 016450
FD.WBH= 000002   	F.URBD= 000020   	IE.ILU= 177640   	IE.UPN= 177777   	IO.GRI= 016440
FF.CHR= 000005   	F.VBN = 000064   	IE.ILV= 177755   	IE.VER= 177774   	IO.GRN= 016460
FF.NV = 000003   	F.VBSZ= 000060   	IE.INS= 177776   	IE.WAC= 177743   	IO.GTS= 002400
FF.POE= 000002   	GERRM1  000000RG    004	IE.IOP= 177655   	IE.WAT= 177741   	IO.HDX= 003010
FF.RWD= 000001   	GERRM2= ****** GX	IE.IPR= 177641   	IE.WCK= 177652   	IO.HIS= 015000
FF.RWF= 000006   	HA.NAM= ****** GX	IE.ISQ= 177703   	IE.WER= 177737   	IO.HNG= 003000
FF.SPC= 000004   	IE.ABO= 177761   	IE.ITI= 177643   	IE.WLK= 177764   	IO.INI= 014400
FO.APD= 000106   	IE.ACT= 177771   	IE.ITP= 177650   	IE.WOV= 177653   	IO.INL= 002400
FO.MFY= 000002   	IE.ADP= 177636   	IE.ITS= 177770   	IE.2DV= 177720   	IO.ITI= 017000
FO.RD = 000001   	IE.ALC= 177654   	IE.IUI= 177645   	IOSTS = ****** GX	IO.KIL= 000012
FO.UPD= 000006   	IE.ALG= 177654   	IE.LCK= 177745   	IO.ACE= 007400   	IO.LDI= 007000
FO.WRT= 000016   	IE.ALN= 177736   	IE.LNL= 177646   	IO.ACR= 006400   	IO.LED= 012000
F.ACTL= 000076   	IE.AST= 177660   	IE.MAP= 177657   	IO.ACW= 007000   	IO.LEI= 007410
F.ALOC= 000040   	IE.BAD= 177777   	IE.MOD= 177753   	IO.ADS= 014000   	IO.LKE= 012000
F.BBFS= 000062   	IE.BBE= 177710   	IE.NBF= 177731   	IO.APC= 014000   	IO.LOD= 014000
F.BDB = 000070   	IE.BCC= 177676   	IE.NBK= 177727   	IO.APV= 014010   	IO.LOV= 001010
SOSCLS - PRTFIL, RDFNM, WRTFNM	MACRO M1110  22-AUG-78 05:30  PAGE 6-2
SYMBOL TABLE

IO.LSI= 011000   	IO.RST= 001001   	IO.WAT= 013400   	NB.DEV= 000200   	R$$EIS= 000001
IO.LTI= 007400   	IO.RTC= 003400   	IO.WBT= 000500   	NB.DIR= 000100   	R$$SHR= 000001
IO.LTK= 000050   	IO.RTI= 016400   	IO.WDD= 000444   	NB.NAM= 000004   	R.FIX = 000001
IO.LTY= 010000   	IO.RTK= 000060   	IO.WLB= 000400   	NB.SD1= 000400   	R.SEQ = 000003
IO.MAO= 003410   	IO.RTM= 001200   	IO.WLC= 000420   	NB.SD2= 001000   	R.VAR = 000002
IO.MCS= 013400   	IO.RVB= 010400   	IO.WLS= 000410   	NB.SNM= 000040   	SUPRES  000656R     004
IO.MDA= 016000   	IO.RWD= 002400   	IO.WLT= 000410   	NB.STP= 000020   	SYSCME= ****** GX
IO.MDI= 014400   	IO.RWU= 002540   	IO.WLV= 000500   	NB.SVR= 000010   	SYSTEM= ****** GX
IO.MDO= 015400   	IO.R1C= 002400   	IO.WMS= 000420   	NB.TYP= 000002   	S.FATT= 000016
IO.MLO= 006000   	IO.SAO= 004000   	IO.WNS= 000420   	NB.VER= 000001   	S.FDB = 000140
IO.MOD= 003000   	IO.SCS= 013000   	IO.WPB= 000440   	NOCHG   000746R     004	S.FNAM= 000006
IO.MSO= 005000   	IO.SDI= 013000   	IO.WVB= 011000   	NOCHGL= 000017   	S.FNB = 000036
IO.NLB= 016530   	IO.SDO= 012400   	IO.XMT= 014400   	N.DID = 000024   	S.FNBW= 000017
IO.NLK= 011400   	IO.SEC= 002520   	IO.XNA= 014410   	N.DVNM= 000032   	S.FNTY= 000004
IO.ONL= 017400   	IO.SET= 000030   	IQ.Q  = 000002   	N.FID = 000000   	S.FTYP= 000002
IO.RAD= 010400   	IO.SLO= 005400   	IQ.S  = 000004   	N.FNAM= 000006   	S.NFEN= 000020
IO.RAL= 001010   	IO.SMO= 002560   	IQ.UMD= 000004   	N.FTYP= 000014   	TMPFNB= ****** GX
IO.RAT= 013000   	IO.SPB= 002420   	IQ.X  = 000001   	N.FVER= 000016   	TTOCTL= ****** GX
IO.RBC= 003000   	IO.SPF= 002440   	IS.BV = 000005   	N.NEXT= 000022   	TYPE  = ****** GX
IO.RCI= 015000   	IO.SPW= 016510   	IS.CC = 001401   	N.STAT= 000020   	TYPECR= ****** GX
IO.RCV= 015000   	IO.SSO= 004400   	IS.CLR= 000000   	N.UNIT= 000034   	WRTFNM  001004RG    004
IO.RDB= 001200   	IO.STA= 015400   	IS.CR = 006401   	PRINT = ****** GX	$CBVER= ****** GX
IO.RDD= 010010   	IO.STC= 002500   	IS.EOT= 002001   	PRTFIL  000012RG    004	$C5TA = ****** GX
IO.RDN= 000022   	IO.STP= 016400   	IS.ESC= 015401   	QIOERR= ****** GX	$DSW  = ****** GX
IO.REL= 013400   	IO.SYN= 003040   	IS.ESQ= 115401   	QIOMSG  000000RG    002	$SAV3 = ****** GX
IO.RHD= 001010   	IO.TRM= 002410   	IS.PES= 100001   	Q.IOAE= 000012   	$$MSG = 000000
IO.RLB= 001000   	IO.UDI= 011410   	IS.PND= 000000   	Q.IOEF= 000006   	$$$ARG= 000002
IO.RLV= 001100   	IO.UEI= 011450   	IS.RDD= 000002   	Q.IOFN= 000002   	$$$OST= 000014
IO.RMT= 010020   	IO.UER= 011440   	IS.SET= 000002   	Q.IOLU= 000004   	.GERRM= ****** GX
IO.RNA= 005400   	IO.ULK= 005000   	IS.SPD= 000002   	Q.IOPL= 000014   	.RDFDR= ****** GX
IO.RNC= 001040   	IO.UNL= 000042   	IS.SUC= 000001   	Q.IOPR= 000007   	...GBL= 000000
IO.RNE= 001020   	IO.USI= 011460   	IS.TAB= 004401   	Q.IOSB= 000010   	...PC1= 000000
IO.RNS= 001020   	IO.UTI= 011420   	IS.TMO= 000002   	RDFNM   000766RG    004	...PC2= 000034R     002
IO.RPB= 001040   	IO.UTY= 011430   	MOVDEC  000700R     004	RONLY$= 000001   	...PC3= 000000
IO.RPR= 004400   	IO.WAL= 000410   	NAMFIL  000142RG    004	RWATT   000036R     002	...TPC= 000140

. ABS.	000000	   000
      	000000	   001
CLS.D 	000074	   002
DIRSEC	000000	   003
CODE  	001134	   004
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  5411 WORDS  ( 22 PAGES)
DYNAMIC MEMORY:  6996 WORDS  ( 26 PAGES)
ELAPSED TIME:  00:00:24
OBJ$:SOSCLS,LIS$:SOSCLS/-SP/NL:TOC=SRC$:PREFIX,SOSCLS
