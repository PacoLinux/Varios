BASIC           - BACKTRANSLATOR FOR BASIC COMMAND               22-AUG-1978 05:27:53   VAX-11 MACRO X0.3-11               Page   1
HJ                                                                                                                               (1)

                                     0000     1 	.TITLE	BASIC - BACKTRANSLATOR FOR BASIC COMMAND
                                     0000     2 	.IDENT	/HJ/
                                     0000     3  
                                     0000     4 ;
                                     0000     5 ; COPYRIGHT (C) 1977
                                     0000     6 ; DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
                                     0000     7 ;
                                     0000     8 ; THIS SOFTWARE IS FURNISHED UNDER  A LICENSE FOR USE ONLY  ON  A
                                     0000     9 ; SINGLE COMPUTER SYSTEM AND MAY BE  COPIED ONLY WITH  THE INCLU-
                                     0000    10 ; SION OF  THE  ABOVE  COPYRIGHT NOTICE.  THIS SOFTWARE,  OR  ANY
                                     0000    11 ; OTHER COPIES THEREOF, MAY NOT BE  PROVIDED  OR  OTHERWISE  MADE
                                     0000    12 ; AVAILABLE TO ANY OTHER PERSON EXCEPT  FOR  USE  ON  SUCH SYSTEM
                                     0000    13 ; AND TO  ONE WHO AGREES  TO  THESE LICENSE  TERMS.  TITLE TO AND
                                     0000    14 ; OWNERSHIP OF THE SOFTWARE SHALL AT ALL TIMES REMAIN IN DEC.
                                     0000    15 ;
                                     0000    16 ; THE INFORMATION IN THIS SOFTWARE  IS  SUBJECT TO CHANGE WITHOUT
                                     0000    17 ; NOTICE AND SHOULD NOT BE CONSTRUED  AS  A COMMITMENT BY DIGITAL
                                     0000    18 ; EQUIPMENT CORPORATION.
                                     0000    19 ;
                                     0000    20 ; DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF ITS
                                     0000    21 ; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
                                     0000    22 ;
                                     0000    23 ; H.J.	JANUARY 1978
                                     0000    24 ;
                                     0000    25 ; BACKTRANSLATOR BASIC
                                     0000    26 ;
BASIC           - BACKTRANSLATOR FOR BASIC COMMAND               22-AUG-1978 05:27:53   VAX-11 MACRO X0.3-11               Page   2
HJ                                                                                                                               (2)

                                     0000    28 ;	.SBTTL INITIALIZE DATA DEFINITIONS
                                     0000    29 ;
                                     0000    30 ; MACRO LIBRARY CALLS
                                     0000    31 ;
                                     0000    32 	$BTDEFS				;DEFINE VALUES TO BE USED LOCALLY
                                     0000       	.SAVE
                                 00000000       	.PSECT	$ABS$,ABS
                                     0000       	.RESTORE
                                     0000    33 	$CLIDEF				;DEFINE CLI CODES AND VALUES
                                     0000       	.SAVE
                                 00000000       	.PSECT	$ABS$,ABS
                                     0000       CLI$L_INIARGCNT:
                           00000004  0000        			.BLKL	1
                                     0004       CLI$A_PROGXFER:
                           00000008  0004        			.BLKL	1
                                     0008       CLI$A_UTILSERV:
                           0000000C  0008        			.BLKL	1
                                     000C       CLI$A_IMGHDADR:
                           00000010  000C        			.BLKL	1
                                     0010       CLI$A_IMGFILED:
                           00000014  0010        			.BLKL	1
                                     0014       CLI$L_LINKFLAG:
                           00000018  0014        			.BLKL	1
                                     0018       CLI$L_CLIFLAG:
                           0000001C  0018        			.BLKL	1
                           00000000  001C        	. = 0
                                     0000       CLI$B_RQTYPE:
                           00000001  0000        			.BLKB	1
                                     0001       CLI$W_SERVCOD:
                                     0001       CLI$B_RQINDX:
                                     0001       CLI$B_BITNUM:
                           00000002  0001        			.BLKB	1
                                     0002       CLI$B_RQFLGS:
                           00000003  0002        			.BLKB	1
                                     0003       CLI$B_RQSTAT:
                           00000004  0003        			.BLKB	1
                                     0004       CLI$A_ERRACT:
                           00000008  0004        			.BLKL	1
                                     0008       CLI$Q_RQDESC:
                                     0008       CLI$W_RQSIZE:
                           0000000A  0008        			.BLKW	1
                           0000000C  000A        			.BLKW	1
                                     000C       CLI$L_RQVALU:
                                     000C       CLI$A_RQADDR:
                           00000010  000C        			.BLKL	1
                                     0010       CLI$A_PRSACT:
                           00000014  0010        			.BLKL	1
                                     0014       CLI$A_ABSACT:
                           00000018  0014        			.BLKL	1
                                     0018       CLI$A_QUALST:
                           0000001C  0018        			.BLKL	1
                                     001C       CLI$C_REQDESC:
                                     001C       CLI$K_REQDESC:
                           00000000  001C        	. = 0
                                     0000       CLI$B_QDBLKSIZ:
                           00000001  0000        			.BLKB	1
                                     0001       CLI$B_QDCODE:
BASIC           - BACKTRANSLATOR FOR BASIC COMMAND               22-AUG-1978 05:27:53   VAX-11 MACRO X0.3-11               Page   3
HJ                                                                                                                               (2)

                           00000002  0001        			.BLKB	1
                                     0002       CLI$B_QDFLGS:
                           00000003  0002        			.BLKB	1
                                     0003       CLI$B_QDSTAT:
                           00000004  0003        			.BLKB	1
                                     0004       CLI$Q_QDVALDESC:
                                     0004       CLI$W_QDVALSIZ:
                           00000006  0004        			.BLKW	1
                           00000008  0006        			.BLKW	1
                                     0008       CLI$A_QDVALADR:
                           0000000C  0008        			.BLKL	1
                                     000C       CLI$A_TRUACT:
                           00000010  000C        			.BLKL	1
                                     0010       CLI$A_FLSACT:
                           00000014  0010        			.BLKL	1
                                     0014       CLI$C_QUALDEF:
                                     0014       CLI$K_QUALDEF:
                                     0014       CLI$C_QDBITS:
                                     0014       CLI$K_QDBITS:
                                     0014       CLI$L_USRVAL:
                           00000018  0014        			.BLKL	1
                           00000000  0018        	. = 0
                                     0000       CLI$L_WORKAREA:
                           00000080  0000        			.BLKL	32
                                     0080       CLI$C_WORKAREA:
                                     0080       CLI$K_WORKAREA:
                                     0000       	.RESTORE
                                     0000    34 
                                     0000    35 ;
                                     0000    36 ; LOCAL SYMBOLS
                                     0000    37 ;
                                     0000    38 
                                     0000    39 ;
                                     0000    40 ; ARGUMENT LIST OFFSET DEFINITIONS
                                     0000    41 ;
                                     0000    42 
                                     0000    43 ;
                                     0000    44 ; LOCAL DATA
                                     0000    45 ;
                                     0000    46 	IMPURE
                                 00000000       	.PSECT	IMPURE_	LONG,RD,WRT,NOEXE
                                     0000    47 ;
                                     0000    48 ;
                                     0000    49 ;
                                     0000    50 INPUT_ARGLIST:
                                     0000    51 	$ARGLST	3,-			;CREATE AN ARGUMENT LIST
                                     0000    52 		INPUT_DESC,-		;FOR FIRST INPUT PARAMETER
                                     0000    53 		CLIWORKAREA,-		;WORK AREA FOR CLI
                                     0000    54 		BITMAP			;BIT ARRAY
                           00000003  0000       		.LONG	3
                           00000010' 0004       		.LONG	INPUT_DESC
                           00000000' 0008       		.LONG	CLIWORKAREA
                           00000000' 000C       		.LONG	BITMAP
                                     0010    55 
                                     0010    56 INPUT_DESC:
                                     0010    57 	$CLIREQDESC -			;CREATE A CLI REQUEST DESCRIPTOR
                                     0010    58 		RQTYPE=CLI$K_INPUT1	;FOR PRIMARY INPUT
BASIC           - BACKTRANSLATOR FOR BASIC COMMAND               22-AUG-1978 05:27:53   VAX-11 MACRO X0.3-11               Page   4
HJ                                                                                                                               (2)

                           0000002C  0010       	.BLKB	CLI$C_REQDESC
                           00000010  002C       	. = $CLI.+CLI$B_RQTYPE
                                 10  0010       	  .BYTE	CLI$K_INPUT1
                           0000002C  0011       	. = $CLI..
                                     002C    59 
                                     002C    60 	PURE
                                 00000000       	.PSECT	PURE_	BYTE,RD,EXE,NOWRT
                                 40  0000    61 ATSIGN:	.ASCII	\@\			;INDIRECT FILE CHARACTER FOR ARGUMENT
BASIC           - BACKTRANSLATOR FOR BASIC COMMAND               22-AUG-1978 05:27:53   VAX-11 MACRO X0.3-11               Page   5
HJ                                                                                                                               (3)

                                     0001    63 ;	.SBTTL BASIC
                                     0001    64 ;+
                                     0001    65 ; BACKTRANSLATOR BASIC
                                     0001    66 ;
                                     0001    67 ; CONVERTS DCL COMMAND TO COMPATIBILITY MODE IMAGE COMMAND
                                     0001    68 ;
                                     0001    69 ;
                                     0001    70 ; INPUTS:
                                     0001    71 ;  THE INPUTS ARE RETURNED FROM THE DCL RESULT PARSER AS RESPONSES
                                     0001    72 ;  TO THE VARIOUS REQUEST DESCRIPTORS THAT ARE GIVEN TO IT.
                                     0001    73 ;
                                     0001    74 ;
                                     0001    75 ; OUTPUTS:
                                     0001    76 ;  THE OUTPUT CONSISTS OF TWO STRINGS OR AN ERROR MESSAGE AND ABORT.
                                     0001    77 ;  THE CALLER OPENS THE IMAGE AND INVOKES THE COMPATIBILITY EMULATOR
                                     0001    78 ;  IF NO ERROR OCCURS.
                                     0001    79 ;
                                     0001    80 ;  1- FILENAME STRING OF COMPATIBILITY MODE IMAGE TO BE ACTIVATED.
                                     0001    81 ;
                                     0001    82 ;  2- COMMAND LINE TO BE GIVEN TO THE IMAGE.
                                     0001    83 ;
                                     0001    84 ;-
                                     0001    85 
                                     0001    86 	PURE
                                 00000001       	.PSECT	PURE_	BYTE,RD,EXE,NOWRT
                                     0001    87 
                                     0001    88 BASI::
                                 FA  0001    89 	CALLG	W^INPUT_ARGLIST,-	;PROCESS INPUTS
         08 BC       0000'CF         0002    90 		@CLI$A_UTILSERV(AP)
                     0018'CF     B5  0007    91 	TSTW	W^CLI$Q_RQDESC+INPUT_DESC ;DOES INPUT EXIST?
                          0A     13  000B    92 	BEQL	10$			;BRANCH IF NOT
            59            01     D0  000D    93 	MOVL	#1,R9			;SET UP TO MOVE '@' IN FRONT
            5A         ED AF     9E  0010    94 	MOVAB	ATSIGN,R10		;OF FILENAME STRING
                          FFE9'  30  0014    95 	BSBW	INSERTARG		;PUT IT INTO OUTPUT TABLE
            59       0018'CF     7D  0017    96 10$:	MOVQ	W^CLI$Q_RQDESC+INPUT_DESC,R9 ;PICK UP STRING DESCRIPTOR
                          FFE1'  30  001C    97 	BSBW	INSERTARG		;SAVE IT AS PRIMARY OUTPUT
                                     001F    98 	DEFPROG	BP2			;RETURN DEFAULT PROGRAM TO RUN
            50            0C     D0  001F       	MOVL	#PROG_BP2,R0
                                 05  0022    99 	RSB				;RETURN TO GENERATE COMMAND TEXT
                                     0023   100 
                                     0023   101 
                                     0023   102 	.END
BASIC           - BACKTRANSLATOR FOR BASIC COMMAND               22-AUG-1978 05:27:53   VAX-11 MACRO X0.3-11               Page   6
SYMBOL TABLE                                                                                                                     (3)

$$T1           = 00000003            CLI$C_QDBITS     00000014            CLI$M_PARMREQ  = 00000001            
$CLI.          = 00000010 R     03   CLI$C_QUALDEF    00000014            CLI$M_QDEXPA   = 00000004            
$CLI..         = 0000002C R     03   CLI$C_REQDESC    0000001C            CLI$M_QDUSRV   = 00000002            
ATSIGN           00000000 R     04   CLI$C_WORKAREA   00000080            CLI$M_QUALEXP  = 00000002            
BASI             00000001 RG    04   CLI$K_ASCIIVAL = 00000041            CLI$M_QUALTRU  = 00000001            
BIT...         = 00000045            CLI$K_CLISERV  = 00000005            CLI$M_TRMVRBLV = 00000300            
BITMAP           ********   X   03   CLI$K_ENDPRM1  = 00000030            CLI$M_VERIFY   = 00000004            
BTR$M_DECIMAL  = 00000080            CLI$K_ENDPRM2  = 00000031            CLI$M_VFYINP   = 00000020            
BTR$M_EXPLICIT = 00000020            CLI$K_ENDPRM3  = 00000032            CLI$Q_QDVALDESC  00000004            
BTR$M_FORCE    = 00000002            CLI$K_ENDPRM4  = 00000033            CLI$Q_RQDESC     00000008            
BTR$M_LIST     = 00000040            CLI$K_FILSPEC  = 00000044            CLI$S_PRITYP   = 00000004            
BTR$M_MULTKEY  = 00000010            CLI$K_GETCMD   = 00000001            CLI$S_SUBTYP   = 00000004            
BTR$M_RETURN   = 00000001            CLI$K_GETOPT   = 00000003            CLI$S_TRMVRBLV = 00000002            
BTR$M_TEMPPOS  = 00000004            CLI$K_GETQUAL  = 00000002            CLI$V_ABSADR   = 00000001            
BTR$M_VALREQ   = 00000008            CLI$K_INITPRS  = 00000000            CLI$V_ALLOCCUR = 00000000            
BTR$V_DECIMAL  = 00000007            CLI$K_INPSPEC  = 00000001            CLI$V_BATCH    = 00000003            
BTR$V_EXPLICIT = 00000005            CLI$K_INPUT1   = 00000010            CLI$V_CONCATINP= 00000001            
BTR$V_FORCE    = 00000001            CLI$K_INPUT2   = 00000011            CLI$V_DBGEXCP  = 00000010            
BTR$V_LIST     = 00000006            CLI$K_INPUT3   = 00000012            CLI$V_DBGTRU   = 00000001            
BTR$V_MULTKEY  = 00000004            CLI$K_INPUT4   = 00000013            CLI$V_DEBUG    = 00000000            
BTR$V_RETURN   = 00000000            CLI$K_KEYVAL   = 00000043            CLI$V_DUMMY    = 00000001            
BTR$V_TEMPPOS  = 00000002            CLI$K_KEYWORD  = 00000042            CLI$V_EXPNAM   = 00000002            
BTR$V_VALREQ   = 00000003            CLI$K_NUMERVAL = 00000040            CLI$V_INDIRECT = 00000004            
BTR$_AMBIGKEYW = 00688030            CLI$K_OUTPUT1  = 00000020            CLI$V_KEYVALU  = 00000001            
BTR$_ILLEGOPT  = 00688018            CLI$K_OUTPUT2  = 00000021            CLI$V_LASTVAL  = 00000000            
BTR$_IMGFNF    = 00688060            CLI$K_OUTPUT3  = 00000022            CLI$V_MOREINP  = 00000002            
BTR$_INTFAIL   = 00688048            CLI$K_OUTPUT4  = 00000023            CLI$V_MOREVALS = 00000000            
BTR$_INVALKEYW = 00688028            CLI$K_OUTSPEC  = 00000002            CLI$V_PARMDEF  = 00000003            
BTR$_KEYVALOVR = 00688038            CLI$K_PARDONE  = 00000003            CLI$V_PARMPRS  = 00000000            
BTR$_MISSNGVAL = 00688008            CLI$K_QDBITS     00000014            CLI$V_PARMREQ  = 00000000            
BTR$_NOTIMPLEM = 00688020            CLI$K_QUALDEF    00000014            CLI$V_PRITYP   = 00000004            
BTR$_OPTVALOVR = 00688050            CLI$K_REQDESC    0000001C            CLI$V_QDEXPA   = 00000002            
BTR$_STRINGOVR = 00688010            CLI$K_UTILOPR  = 00000000            CLI$V_QDUSRV   = 00000001            
BTR$_TOOMANY   = 00688058            CLI$K_VALCONV  = 00000004            CLI$V_QUALEXP  = 00000001            
BTR$_UNEXPLIST = 00688040            CLI$K_WORKAREA   00000080            CLI$V_QUALTRU  = 00000000            
BTRAN          = 00680000            CLI$L_CLIFLAG    00000018            CLI$V_SUBTYP   = 00000000            
CLI$A_ABSACT     00000014            CLI$L_INIARGCNT  00000000            CLI$V_TRMVRBLV = 00000008            
CLI$A_ERRACT     00000004            CLI$L_LINKFLAG   00000014            CLI$V_VERIFY   = 00000002            
CLI$A_FLSACT     00000010            CLI$L_RQVALU     0000000C            CLI$V_VFYINP   = 00000005            
CLI$A_IMGFILED   00000010            CLI$L_USRVAL     00000014            CLI$W_QDVALSIZ   00000004            
CLI$A_IMGHDADR   0000000C            CLI$L_WORKAREA   00000000            CLI$W_RQSIZE     00000008            
CLI$A_PROGXFER   00000004            CLI$M_ABSADR   = 00000002            CLI$W_SERVCOD    00000001            
CLI$A_PRSACT     00000010            CLI$M_ALLOCCUR = 00000001            CLIWORKAREA      ********   X   03   
CLI$A_QDVALADR   00000008            CLI$M_BATCH    = 00000008            FATAL          = 00000004            
CLI$A_QUALST     00000018            CLI$M_CONCATINP= 00000002            GBL...         = 00000000            
CLI$A_RQADDR     0000000C            CLI$M_DBGEXCP  = 00010000            INPUT_ARGLIST    00000000 R     03   
CLI$A_TRUACT     0000000C            CLI$M_DBGTRU   = 00000002            INPUT_DESC       00000010 R     03   
CLI$A_UTILSERV   00000008            CLI$M_DEBUG    = 00000001            INSERTARG        ********   X   04   
CLI$B_BITNUM     00000001            CLI$M_DUMMY    = 00000002            LAST_PARAM     = FFFFFFEC            
CLI$B_QDBLKSIZ   00000000            CLI$M_EXPNAM   = 00000004            NONE           = 00000000            
CLI$B_QDCODE     00000001            CLI$M_INDIRECT = 00000010            PRIM_INPUT     = FFFFFFF6            
CLI$B_QDFLGS     00000002            CLI$M_KEYVALU  = 00000002            PRIM_OUTPUT    = 00000000            
CLI$B_QDSTAT     00000003            CLI$M_LASTVAL  = 00000001            PROG_BP2       = 0000000C            
CLI$B_RQFLGS     00000002            CLI$M_MOREINP  = 00000004            PROG_CBL       = 00000008            
CLI$B_RQINDX     00000001            CLI$M_MOREVALS = 00000001            PROG_CNT       = 0000000F            
CLI$B_RQSTAT     00000003            CLI$M_PARMDEF  = 00000008            PROG_DIF       = 0000000F            
CLI$B_RQTYPE     00000000            CLI$M_PARMPRS  = 00000001            PROG_DMP       = 00000007            
BASIC           - BACKTRANSLATOR FOR BASIC COMMAND               22-AUG-1978 05:27:53   VAX-11 MACRO X0.3-11               Page   7
SYMBOL TABLE                                                                                                                     (3)

PROG_F4V       = 00000002            
PROG_LBR       = 0000000B            
PROG_LIB       = 0000000A            
PROG_MAC       = 00000004            
PROG_MAR       = 00000003            
PROG_PIP       = 00000001            
PROG_SLP       = 00000006            
PROG_SOS       = 00000005            
PROG_SRT       = 0000000E            
PROG_TKB       = 00000009            
PROG_UFD       = 0000000D            
SAVE_REG_MASK  = 00000FFC            


PROGRAM SECTION SYNOPSIS

.  ABS  .        00000000      00     NOPIC   USR   CON   ABS   LCL NOSHR NOEXE NORD  NOWRT BYTE  
. BLANK .        00000000      01     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
$ABS$            00000080      02     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  
IMPURE_          0000002C      03     NOPIC   USR   CON   REL   LCL NOSHR NOEXE   RD    WRT LONG  
PURE_            00000023      04     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD  NOWRT BYTE  


THERE WERE NO ERRORS OR WARNINGS.
17766. BYTES LEFT IN FREE MEMORY POOL.
2520. BYTES OF RECLAIMED MEMORY.
OBJ$:BASICMD,LIS$:BASICMD/-SP/LI:MEB=EXECML$/ML,LIB$:B/ML,SRC$:BASICMD
38 MLB DIR RDS - 392 GETS TO DEFINE 21 MACROS. 51 INTER. FILE WRITES. 
