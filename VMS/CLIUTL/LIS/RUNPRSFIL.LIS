RUNPARSFIL      - PARSE A FILE NAME STRING                       21-AUG-1978 19:04:00   VAX-11 MACRO X0.3-11               Page   0
TABLE OF CONTENTS   

   (1)      39  DECLARATIONS
   (1)      86  RUN_PARSFIL - PARSE AN EXECUTABLE FILE SPEC.
RUNPARSFIL      - PARSE A FILE NAME STRING                       21-AUG-1978 19:04:00   VAX-11 MACRO X0.3-11               Page   1
00                                                                                                                               (1)

                                     0000     1 	.TITLE	RUNPARSFIL - PARSE A FILE NAME STRING
                                     0000     2 	.IDENT	/00/
                                     0000     3 
                                     0000     4 ;
                                     0000     5 ;			  COPYRIGHT (c) 1977 BY
                                     0000     6 ;	      DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
                                     0000     7 ;
                                     0000     8 ; THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND  COPIED
                                     0000     9 ; ONLY  IN  ACCORDANCE  WITH  THE  TERMS  OF  SUCH  LICENSE AND WITH THE
                                     0000    10 ; INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE OR  ANY  OTHER
                                     0000    11 ; COPIES  THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY
                                     0000    12 ; OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE  IS  HEREBY
                                     0000    13 ; TRANSFERRED.
                                     0000    14 ;
                                     0000    15 ; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITHOUT  NOTICE
                                     0000    16 ; AND  SHOULD  NOT  BE  CONSTRUED  AS  A COMMITMENT BY DIGITAL EQUIPMENT
                                     0000    17 ; CORPORATION.
                                     0000    18 ;
                                     0000    19 ; DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE OR  RELIABILITY  OF  ITS
                                     0000    20 ; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.
                                     0000    21 ;
                                     0000    22 
                                     0000    23 ;++
                                     0000    24 ; FACILITY:	STARLET DCL CLI
                                     0000    25 ;
                                     0000    26 ; ABSTRACT:	FORM A FULLY QUALIFIED FILE STRING
                                     0000    27 ;
                                     0000    28 ;
                                     0000    29 ; ENVIRONMENT:	NATIVE MODE USER CODE
                                     0000    30 ;
                                     0000    31 ; AUTHOR:	C. A. MONIA, CREATION DATE: 27-SEP-1977
                                     0000    32 ;
                                     0000    33 ; MODIFIED BY:
                                     0000    34 ;
                                     0000    35 ;	, : VERSION
                                     0000    36 ; 01	- 
                                     0000    37 ;--
RUNPARSFIL      - PARSE A FILE NAME STRING                       21-AUG-1978 19:04:00   VAX-11 MACRO X0.3-11               Page   2
00              DECLARATIONS                                                                                                     (1)

                                     0000    39 	.SBTTL	DECLARATIONS
                                     0000    40  
                                     0000    41 ;
                                     0000    42 ; MACROS
                                     0000    43 ;
                                     0000    44 ; DEFINE DATA STRUCTURE
                                     0000    45 ;
                                     0000    46  
                                     0000    47 	.MACRO	$DSECT
                                     0000    48 	.PSECT	$ABS$,ABS
                                     0000    49 .=0
                                     0000    50 	.ENDM
                                     0000    51  
                                     0000    52 ;
                                     0000    53 ; EQUATED SYMBOLS:
                                     0000    54 ;
                                     0000    55 ; ARGUMENT LIST OFFSETS
                                     0000    56 ;
                                     0000    57  
                                     0000    58 	$DSECT
                                     0000    59  
                           00000004  0000    60 	.BLKL	1
                           00000008  0004    61 INFIL:	.BLKL	1			; ADDRESS OF INPTUT FILE STRING DESCRIPTOR
                           0000000C  0008    62 OUTFIL:	.BLKL	1			; ADDRESS OF OUTPUT FILE STRING DESCRIPTOR
                           00000010  000C    63 DFNAM:	.BLKL	1			; ADDRESS OF DEFAULT NAME STRING
                                     0010    64 	
                                     0010    65 ;
                                     0010    66 ; OWN STORAGE:
                                     0010    67 ;
                                     0010    68  
                                 00000000    69 	.PSECT	RUN_PARSFILDAT
                                     0000    70  
                                     0000    71 ;
                                     0000    72 ; FILE ACCESS BLOCK (FAB)
                                     0000    73 ;
                                     0000    74  
                                     0000    75 FAB:	$FAB	-			;
                                     0000    76 		NAM=NAM			; ADDRESS OF NAMEBLOCK
                                     0050    77  
                                     0050    78 ;
                                     0050    79 ; NAME BLOCK
                                     0050    80 ;
                                     0050    81  
                                     0050    82 NAM:	$NAM	-			;
                                     0050    83 		RSS=64,-		; LENGTH OF RESULTANT STRING
                                     0050    84 		ESS=64			; LENGTH OF EXPANDED STRING
RUNPARSFIL      - PARSE A FILE NAME STRING                       21-AUG-1978 19:04:00   VAX-11 MACRO X0.3-11               Page   3
00              RUN_PARSFIL - PARSE AN EXECUTABLE FILE SPEC.                                                                     (1)

                                     0088    86 	.SBTTL	RUN_PARSFIL - PARSE AN EXECUTABLE FILE SPEC.
                                     0088    87 ;++
                                     0088    88 ; FUNCTIONAL DESCRIPTION:
                                     0088    89 ;
                                     0088    90 ; THIS ROUTINE IS CALLED BY THE RUNDET CLI COMMAND PROCESSOR TO EXPAND
                                     0088    91 ; THE EXECUTABLE FILE SPECIFICATION.
                                     0088    92 ;
                                     0088    93 ; CALLING SEQUENCE:
                                     0088    94 ;
                                     0088    95 ;	CALL RUN_PARSFIL( INFIL,OUTFIL,DFNM )
                                     0088    96 ;
                                     0088    97 ; INPUT PARAMETERS:
                                     0088    98 ;
                                     0088    99 ;	INFIL = ADDRESS OF INPUT FILE STRING DESCRIPTOR. THE STRING RE-
                                     0088   100 ;		PRESENTS THE FILE NAME AS TYPED BY THE USER.
                                     0088   101 ;
                                     0088   102 ;	OUTFIL = ADDRESS OF OUTPUT FILE STRING DESCRIPTOR. AT LEAST
                                     0088   103 ;		 64 BYTES OF STORAGE MUST BE ALLOCATED TO CONTAIN
                                     0088   104 ;		 THE NAME STRING.
                                     0088   105 ;
                                     0088   106 ;	DFNM = ADDRESS OF DEFAULT FILE NAME DESCRIPTOR
                                     0088   107 ;
                                     0088   108 ; IMPLICIT INPUTS:
                                     0088   109 ;
                                     0088   110 ;	NONE
                                     0088   111 ;
                                     0088   112 ; OUTPUT PARAMETERS:
                                     0088   113 ;
                                     0088   114 ;	R0 LBS = SUCCESS
                                     0088   115 ;
                                     0088   116 ;	FIRST WORD OF OUTPUT FILE STRING DESCRIPTOR CONTAINS THE
                                     0088   117 ;	LENGTH OF THE FULLY QUALIFIED NAME STRING.
                                     0088   118 ;
                                     0088   119 ; IMPLICIT OUTPUTS:
                                     0088   120 ;
                                     0088   121 ;	NONE
                                     0088   122 ;
                                     0088   123 ; COMPLETION CODES:
                                     0088   124 ;
                                     0088   125 ;	R0 = 1, SUCCESSFUL COMPLETION
                                     0088   126 ;
                                     0088   127 ;	R0 = 0, A STRING LENGTH EXCEEDED 64 BYTES
                                     0088   128 ;
                                     0088   129 ;	R0 = COMPLETION CODES RETURNED BY RMS ROUTINE SYS$PARSE
                                     0088   130 ;
                                     0088   131 ; SIDE EFFECTS:
                                     0088   132 ;
                                     0088   133 ;	NONE
                                     0088   134 ;
                                     0088   135 ;--
                                     0088   136  
                                     0088   137 RUN_PARSFIL::				;
                               0006  0088   138 	.WORD	^M<R1,R2>		; SAVE R1 - R2
                          50     D4  008A   139 	CLRL	R0			; ASSUME BAD PARAMETERS
            51         04 BC     7D  008C   140 	MOVQ	@INFIL(AP),R1		; GET STRING DESCRIPTOR FOR INPUT FILE
       0040 8F            51     B1  0090   141 	CMPW	R1,#64			; CHECK LENGTH
                          3E     1A  0095   142 	BGTRU	10$			; IF GTRU ERROR
RUNPARSFIL      - PARSE A FILE NAME STRING                       21-AUG-1978 19:04:00   VAX-11 MACRO X0.3-11               Page   4
00              RUN_PARSFIL - PARSE AN EXECUTABLE FILE SPEC.                                                                     (1)

         99 AF            51     90  0097   143 	MOVB	R1,FAB+FAB$B_FNS	; SETUP SIZE OF INFILE NAME STRING
         8D AF            52     D0  009B   144 	MOVL	R2,FAB+FAB$L_FNA	; SETUP ADDRESS OF STRING
            51         0C BC     7D  009F   145 	MOVQ	@DFNAM(AP),R1		; GET DESCRIPTOR FOR DEFAULT NAME STRING
       0040 8F            51     B1  00A3   146 	CMPW	R1,#64			; CHECK SIZE OF STRING
                          2B     1A  00A8   147 	BGTRU	10$			; IF GTRU ERROR
         87 AF            51     90  00AA   148 	MOVB	R1,FAB+FAB$B_DNS	; SETUP SIZE OF DEFAULT NAME STRING
       FF7D CF            52     D0  00AE   149 	MOVL	R2,FAB+FAB$L_DNA	; SETUP ADDRESS OF STRING
            51         08 BC     7D  00B3   150 	MOVQ	@OUTFIL(AP),R1		; GET ADDRESS OF OUTPUT BUFFER IN R2
         99 AF            52     D0  00B7   151 	MOVL	R2,NAM+NAM$L_RSA	; SET ADDRESS OF RESULTANT STRING
         9D AF            52     D0  00BB   152 	MOVL	R2,NAM+NAM$L_ESA	; SET ADDRESS OF EXPANDED STRING
                          7E     7C  00BF   153 	CLRQ	-(SP)			; NO AST'S WANTED
            7E       FF3B CF     DE  00C1   154 	MOVAL	FAB,-(SP)		; PUSH ADDRESS OF FAB
   00000000'9F            03     FB  00C6   155 	CALLS	#3,@#SYS$PARSE		; PARSE INFILENAME
            05            50     E9  00CD   156 	BLBC	R0,10$			; IF LBC, ERROR
         08 BC         88 AF     9B  00D0   157 	MOVZBW	NAM+NAM$B_ESL,@OUTFIL(AP) ; SET LENGTH OF STRING
                                     00D5   158 10$:					;
                                 04  00D5   159 	RET				;
                                     00D6   160  
                                     00D6   161 	.END
RUNPARSFIL      - PARSE A FILE NAME STRING                       21-AUG-1978 19:04:00   VAX-11 MACRO X0.3-11               Page   5
SYMBOL TABLE                                                                                                                     (1)

$$.TAB         = 00000050 R     03   FAB$M_FTN      = 00000001            FAB$V_KFO      = 0000001E            
$$.TABEND      = 00000088 R     03   FAB$M_GET      = 00000002            FAB$V_MSE      = 00000004            
$$.TMP         = 00000000            FAB$M_INP      = 00080000            FAB$V_MXV      = 00000001            
BIT...         = 0000001A            FAB$M_JNL      = 00400000            FAB$V_NAM      = 00000018            
DFNAM            0000000C            FAB$M_KFO      = 40000000            FAB$V_NEF      = 0000000A            
FAB              00000000 R     03   FAB$M_MSE      = 00000010            FAB$V_NFS      = 00000010            
FAB$B_BID        00000000            FAB$M_MXV      = 00000002            FAB$V_NIL      = 00000005            
FAB$B_BKS        0000003E            FAB$M_NAM      = 01000000            FAB$V_OFP      = 0000001D            
FAB$B_BLN        00000001            FAB$M_NEF      = 00000400            FAB$V_ORG      = 00000004            
FAB$B_DNS        00000035            FAB$M_NFS      = 00010000            FAB$V_POS      = 00000008            
FAB$B_FAC        00000016            FAB$M_NIL      = 00000020            FAB$V_PPF      = 00000012            
FAB$B_FNS        00000034            FAB$M_OFP      = 20000000            FAB$V_PPF_IND  = 0000000E            
FAB$B_FSZ        0000003F            FAB$M_POS      = 00000100            FAB$V_PPF_RAT  = 00000006            
FAB$B_ORG        0000001D            FAB$M_PPF      = 00040000            FAB$V_PRN      = 00000002            
FAB$B_RAT        0000001E            FAB$M_PPF_IND  = 00004000            FAB$V_PUT      = 00000000            
FAB$B_RFM        0000001F            FAB$M_PPF_RAT  = 00003FC0            FAB$V_RCK      = 00000017            
FAB$B_RTV        0000001C            FAB$M_PRN      = 00000004            FAB$V_RWC      = 0000000B            
FAB$B_SHR        00000017            FAB$M_PUT      = 00000001            FAB$V_RWO      = 00000007            
FAB$C_BID      = 00000003            FAB$M_RCK      = 00800000            FAB$V_SCF      = 0000000E            
FAB$C_BLN        00000050            FAB$M_RWC      = 00000800            FAB$V_SHRDEL   = 00000002            
FAB$C_FIX      = 00000001            FAB$M_RWO      = 00000080            FAB$V_SHRGET   = 00000001            
FAB$C_HSH      = 00000030            FAB$M_SCF      = 00004000            FAB$V_SHRPUT   = 00000000            
FAB$C_IDX      = 00000020            FAB$M_SHRDEL   = 00000004            FAB$V_SHRUPD   = 00000003            
FAB$C_MAXRFM   = 00000003            FAB$M_SHRGET   = 00000002            FAB$V_SPL      = 0000000D            
FAB$C_REL      = 00000010            FAB$M_SHRPUT   = 00000001            FAB$V_SQO      = 00000006            
FAB$C_RFM_DFLT = 00000002            FAB$M_SHRUPD   = 00000008            FAB$V_SUP      = 00000002            
FAB$C_SEQ      = 00000000            FAB$M_SPL      = 00002000            FAB$V_TEF      = 0000001C            
FAB$C_UDF      = 00000000            FAB$M_SQO      = 00000040            FAB$V_TMD      = 00000004            
FAB$C_VAR      = 00000002            FAB$M_SUP      = 00000004            FAB$V_TMP      = 00000003            
FAB$C_VFC      = 00000003            FAB$M_TEF      = 10000000            FAB$V_TRN      = 00000004            
FAB$K_BLN        00000050            FAB$M_TMD      = 00000010            FAB$V_UFM      = 0000001A            
FAB$L_ALQ        00000010            FAB$M_TMP      = 00000008            FAB$V_UFO      = 00000011            
FAB$L_CTX        00000018            FAB$M_TRN      = 00000010            FAB$V_UPD      = 00000003            
FAB$L_DEV        00000040            FAB$M_UFM      = 04000000            FAB$V_UPI      = 00000006            
FAB$L_DNA        00000030            FAB$M_UFO      = 00020000            FAB$V_WCK      = 00000009            
FAB$L_FNA        0000002C            FAB$M_UPD      = 00000008            FAB$W_BLS        0000003C            
FAB$L_FOP        00000004            FAB$M_UPI      = 00000040            FAB$W_DEQ        00000014            
FAB$L_JNL        00000020            FAB$M_WCK      = 00000200            FAB$W_IFI        00000002            
FAB$L_MRN        00000038            FAB$S_ORG      = 00000004            FAB$W_MRS        00000036            
FAB$L_NAM        00000028            FAB$S_PPF_RAT  = 00000008            GBL...         = 00000000            
FAB$L_SDC        00000044            FAB$V_BIO      = 00000005            INFIL            00000004            
FAB$L_STS        00000008            FAB$V_BLK      = 00000003            NAM              00000050 R     03   
FAB$L_STV        0000000C            FAB$V_BRO      = 00000006            NAM$B_BID        00000000            
FAB$L_XAB        00000024            FAB$V_CBT      = 00000015            NAM$B_BLN        00000001            
FAB$M_BIO      = 00000020            FAB$V_CIF      = 00000019            NAM$B_CURLVL     00000038            
FAB$M_BLK      = 00000008            FAB$V_CR       = 00000001            NAM$B_ESL        0000000B            
FAB$M_BRO      = 00000040            FAB$V_CTG      = 00000014            NAM$B_ESS        0000000A            
FAB$M_CBT      = 00200000            FAB$V_DEL      = 00000002            NAM$B_RSL        00000003            
FAB$M_CIF      = 02000000            FAB$V_DFW      = 00000005            NAM$B_RSS        00000002            
FAB$M_CR       = 00000002            FAB$V_DLT      = 0000000F            NAM$C_BID      = 00000002            
FAB$M_CTG      = 00100000            FAB$V_DMO      = 0000000C            NAM$C_BLN        00000038            
FAB$M_DEL      = 00000004            FAB$V_ESC      = 0000001B            NAM$C_BLN_DIRWC  00000050            
FAB$M_DFW      = 00000020            FAB$V_EXE      = 00000007            NAM$C_DVI      = 00000010            
FAB$M_DLT      = 00008000            FAB$V_FTN      = 00000000            NAM$C_MAXRSS   = 00000080            
FAB$M_DMO      = 00001000            FAB$V_GET      = 00000001            NAM$C_MAXRSSLCL= 00000060            
FAB$M_ESC      = 08000000            FAB$V_INP      = 00000013            NAM$K_BLN        00000038            
FAB$M_EXE      = 00000080            FAB$V_JNL      = 00000016            NAM$K_BLN_DIRWC  00000050            
RUNPARSFIL      - PARSE A FILE NAME STRING                       21-AUG-1978 19:04:00   VAX-11 MACRO X0.3-11               Page   6
SYMBOL TABLE                                                                                                                     (1)

NAM$L_DIRWCC1    00000040            NAM$V_WILD_SFD2= 0000001A            
NAM$L_DIRWCC2    00000044            NAM$V_WILD_SFD3= 0000001B            
NAM$L_DIRWCC3    00000048            NAM$V_WILD_SFD4= 0000001C            
NAM$L_DIRWCC4    0000004C            NAM$V_WILD_SFD5= 0000001D            
NAM$L_DWC        00000038            NAM$V_WILD_SFD6= 0000001E            
NAM$L_ESA        0000000C            NAM$V_WILD_SFD7= 0000001F            
NAM$L_FNB        00000034            NAM$V_WILD_TYPE= 00000004            
NAM$L_RLF        00000010            NAM$V_WILD_UFD = 00000018            
NAM$L_RSA        00000004            NAM$V_WILD_VER = 00000003            
NAM$L_WCC        00000030            NAM$W_DID        0000002A            
NAM$M_DIR_LVLS = 00E00000            NAM$W_DID_NUM    0000002A            
NAM$M_EXP_DEV  = 00000080            NAM$W_DID_RVN    0000002E            
NAM$M_EXP_DIR  = 00000040            NAM$W_DID_SEQ    0000002C            
NAM$M_EXP_NAME = 00000004            NAM$W_FID        00000024            
NAM$M_EXP_TYPE = 00000002            NAM$W_FID_NUM    00000024            
NAM$M_EXP_VER  = 00000001            NAM$W_FID_RVN    00000028            
NAM$M_GRP_MBR  = 00080000            NAM$W_FID_SEQ    00000026            
NAM$M_HIGHVER  = 00008000            NAM$W_PRV_DID    0000003A            
NAM$M_LOWVER   = 00004000            OUTFIL           00000008            
NAM$M_NODE     = 00020000            RUN_PARSFIL      00000088 RG    03   
NAM$M_PPF      = 00010000            SYS$PARSE        ********   X   03   
NAM$M_QUOTED   = 00040000            
NAM$M_WILDCARD = 00000100            
NAM$M_WILD_DIR = 00100000            
NAM$M_WILD_GRP = 01000000            
NAM$M_WILD_MBR = 02000000            
NAM$M_WILD_NAME= 00000020            
NAM$M_WILD_SFD1= 02000000            
NAM$M_WILD_SFD2= 04000000            
NAM$M_WILD_SFD3= 08000000            
NAM$M_WILD_SFD4= 10000000            
NAM$M_WILD_SFD5= 20000000            
NAM$M_WILD_SFD6= 40000000            
NAM$M_WILD_SFD7= 80000000            
NAM$M_WILD_TYPE= 00000010            
NAM$M_WILD_UFD = 01000000            
NAM$M_WILD_VER = 00000008            
NAM$S_DIR_LVLS = 00000003            
NAM$T_DVI        00000014            
NAM$V_DIR_LVLS = 00000015            
NAM$V_EXP_DEV  = 00000007            
NAM$V_EXP_DIR  = 00000006            
NAM$V_EXP_NAME = 00000002            
NAM$V_EXP_TYPE = 00000001            
NAM$V_EXP_VER  = 00000000            
NAM$V_GRP_MBR  = 00000013            
NAM$V_HIGHVER  = 0000000F            
NAM$V_LOWVER   = 0000000E            
NAM$V_NODE     = 00000011            
NAM$V_PPF      = 00000010            
NAM$V_QUOTED   = 00000012            
NAM$V_WILDCARD = 00000008            
NAM$V_WILD_DIR = 00000014            
NAM$V_WILD_GRP = 00000018            
NAM$V_WILD_MBR = 00000019            
NAM$V_WILD_NAME= 00000005            
NAM$V_WILD_SFD1= 00000019            
RUNPARSFIL      - PARSE A FILE NAME STRING                       21-AUG-1978 19:04:00   VAX-11 MACRO X0.3-11               Page   7
PROGRAM SECTION SYNOPSIS                                                                                                         (1)



PROGRAM SECTION SYNOPSIS

.  ABS  .        00000000      00     NOPIC   USR   CON   ABS   LCL NOSHR NOEXE NORD  NOWRT BYTE  
. BLANK .        00000000      01     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
$ABS$            00000050      02     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  
RUN_PARSFILDAT   000000D6      03     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  


THERE WERE NO ERRORS OR WARNINGS.
16946. BYTES LEFT IN FREE MEMORY POOL.
1782. BYTES OF RECLAIMED MEMORY.
OBJ$:RUNPRSFIL,LIS$:RUNPRSFIL/-SP=EXECML$/ML,LIB$:CLIUTL/ML,SRC$:RUNPRSFIL
40 MLB DIR RDS - 448 GETS TO DEFINE 19 MACROS. 33 INTER. FILE WRITES. 
