CKSUM	X0001 - COMPUTE BLOCK C	MACRO M1110  21-AUG-78 20:00  PAGE 3


      1	000000					$BEGIN	CKSUM,0001,<COMPUTE BLOCK CHECKSUM>
						.TITLE	CKSUM	X0001 - COMPUTE BLOCK CHECKSUM
						.IDENT	"X0001"
      2
      3					;
      4					; COPYRIGHT (C) 1976 BY DIGITAL EQUIPMENT CORPORATION,
      5					; MAYNARD, MASSACHUSETTS
      6					;
      7					; THIS SOFTWARE IS FURNISHED UNDER A LICENSE FOR USE ONLY ON A
      8					; SINGLE  COMPUTER  SYSTEM AND MAY BE COPIED ONLY WITH THE IN-
      9					; CLUSION OF THE ABOVE COPYRIGHT NOTICE.   THIS  SOFTWARE,  OR
     10					; ANY  OTHER  COPIES THEREOF, MAY NOT BE PROVIDED OR OTHERWISE
     11					; MADE AVAILABLE TO ANY OTHER PERSON EXCEPT FOR  USE  ON  SUCH
     12					; SYSTEM  AND TO ONE WHO AGREES TO THESE LICENSE TERMS.  TITLE
     13					; TO AND OWNERSHIP OF THE SOFTWARE SHALL AT ALL  TIMES  REMAIN
     14					; IN DIGITAL.
     15					;
     16					; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITH-
     17					; OUT  NOTICE  AND  SHOULD NOT BE CONSTRUED AS A COMMITMENT BY
     18					; DIGITAL EQUIPMENT CORPORATION.
     19					;
     20					; DIGITAL EQUIPMENT CORPORATION ASSUMES NO RESPONSIBILITY  FOR
     21					; THE USE OR RELIABILITY OF ITS SOFTWARE ON EQUIPMENT WHICH IS
     22					; NOT SUPPLIED BY DIGITAL.
     23					;
     24					; ANDREW C. GOLDSTEIN  12 JUN 76  23:04
CKSUM	X0001 - COMPUTE BLOCK C	MACRO M1110  21-AUG-78 20:00  PAGE 4


     26					;+
     27					;
     28					; *** - $CKSUM	COMPUTE BLOCK CHECKSUM
     29					;
     30					; THIS ROUTINE COMPUTES AND CHECKS THE ADDITIVE CHECKSUM ON
     31					; THE INDICATED BLOCK. THE CHECKSUM IS STORED IN THE BLOCK AND
     32					; AN ERROR INDICATION IS RETURNED IF THE PREVIOUSLY EXISTING
     33					; CHECKSUM WAS INCORRECT.
     34					;
     35					; INPUTS:
     36					;
     37					;	R5 = BLOCK ADDRESS
     38					;
     39					; OUTPUTS:
     40					;
     41					;	CC - C	CLEAR IS CHECKSUM WAS CORRECT
     42					;		SET IF NOT
     43					;	CHECKSUM STORED IN LAST WORD OF BLOCK
     44					;	ALL REGISTERS PRESERVED
     45					;
     46					; *** - $CKSM1	COMPUTE SPECIAL LENGTH BLOCK CHECKSUM
     47					;
     48					; THIS ROUTINE IS IDENTICAL TO THE ABOVE EXCEPT THAT THE WORD COUNT
     49					; OF THE AREA TO BE CHECKED IS SUPPLIED. INPUTS AND OUTPUTS
     50					; ARE THE SAME AS ABOVE PLUS:
     51					;
     52					; INPUTS:
     53					;
     54					;	R1 = WORD COUNT
     55					;
     56					;-
     57
     58	000000				$CKSUM::
     59	000000					PUSH R1
     60	000002					LET R1 := #255.			; SET WORD COUNT
     61	000006					GOTO CKCOM
     62
     63	000010				$CKSM1::
     64	000010					PUSH R1
     65	000012				CKCOM:	PUSH R0,R5
     66
     67	000016					LET R0 := #0
     68	000020					THRU R1
     69	000020					  LET R0 := R0 + (R5)+		; COMPUTE SUM
     70	000022					END LOOP
     71	000026					IF R0 EQ (R5)			; IF CHECKSUM MATCHES
     72	000032	000241 				  CLC				; RETURN CARRY CLEAR
     73	000034					ELSE
     74	000036	000261 				  SEC
     75	000040					END
     76	000040					LET (R5) := R0			; STORE CHECKSUM IN LAST WORD
     77	000042					POP R5,R0,R1			; RESTORE REGISTERS
     78	000050					RETURN
     79
     80
     81
     82		000001 				.END
CKSUM	X0001 - COMPUTE BLOCK C	MACRO M1110  21-AUG-78 20:00  PAGE 4-1
SYMBOL TABLE

A3    = 000001   	LBLS0 = 000001   	$CKSUM  000000RG 	$L    = 000001   	$T    = 000002
B0      000020R  	L0      000036R  	$DIDDO= 000000   	$L$   = 000000   	$T1   = 000000
CKCOM   000012R  	L1      000040R  	$EF$  = 000000   	$O$   = 000000   	$T2   = 000001
E0      000026R  	TYPS0 = 000000   	$E$   = 000001   	$R    = 177777   	$Y$   = 000000
IIII  = 177777   	$CKSM1  000010RG 	$I$   = 000001   	$SUPMC= 000043   	$Z$   = 000000

. ABS.	000000	   000
      	000052	   001
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  11219 WORDS  ( 44 PAGES)
DYNAMIC MEMORY:  12276 WORDS  ( 47 PAGES)
ELAPSED TIME:  00:00:27
EXE$:CKSUM,LIS$:CKSUM/-SP=SRC$:SMAC/PA:1,DSCPRE,CKSUM
