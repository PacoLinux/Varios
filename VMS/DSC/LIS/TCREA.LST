TCREA	X0005 - CREATE FILE ON 	MACRO M1110  21-AUG-78 21:05  PAGE 3


      1	000000					$BEGIN	TCREA,0005,<CREATE FILE ON TAPE>
						.TITLE	TCREA	X0005 - CREATE FILE ON TAPE
						.IDENT	"X0005"
      2
      3					;
      4					; COPYRIGHT (C) 1976 BY DIGITAL EQUIPMENT CORPORATION,
      5					; MAYNARD, MASSACHUSETTS
      6					;
      7					; THIS SOFTWARE IS FURNISHED UNDER A LICENSE FOR USE ONLY ON A
      8					; SINGLE  COMPUTER  SYSTEM AND MAY BE COPIED ONLY WITH THE IN-
      9					; CLUSION OF THE ABOVE COPYRIGHT NOTICE.   THIS  SOFTWARE,  OR
     10					; ANY  OTHER  COPIES THEREOF, MAY NOT BE PROVIDED OR OTHERWISE
     11					; MADE AVAILABLE TO ANY OTHER PERSON EXCEPT FOR  USE  ON  SUCH
     12					; SYSTEM  AND TO ONE WHO AGREES TO THESE LICENSE TERMS.  TITLE
     13					; TO AND OWNERSHIP OF THE SOFTWARE SHALL AT ALL  TIMES  REMAIN
     14					; IN DIGITAL.
     15					;
     16					; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITH-
     17					; OUT  NOTICE  AND  SHOULD NOT BE CONSTRUED AS A COMMITMENT BY
     18					; DIGITAL EQUIPMENT CORPORATION.
     19					;
     20					; DIGITAL EQUIPMENT CORPORATION ASSUMES NO RESPONSIBILITY  FOR
     21					; THE USE OR RELIABILITY OF ITS SOFTWARE ON EQUIPMENT WHICH IS
     22					; NOT SUPPLIED BY DIGITAL.
     23					;
     24					; ANDREW C. GOLDSTEIN  11-AUG-76  16:27
TCREA	X0005 - CREATE FILE ON 	MACRO M1110  21-AUG-78 21:05  PAGE 4


     26					;+
     27					;
     28					; *** - $TCREA	CREATE FILE ON TAPE
     29					;
     30					; THIS ROUTINE WRITES THE FILE ATTRIBUTE BLOCK AND THE FILE HEADER
     31					; THAT ARE IN THE I/O BUFFERS TO THE TAPE. THE IDENTICAL OPERATION
     32					; IS USED TO WRITE OUT THE INDEX FILE HEADER.
     33					;
     34					; INPUTS:
     35					;
     36					;	ATTRIBUTE BLOCK AND PREAMBLE IN $BUF1
     37					;	FILE HEADER AND PREAMBLE IN $BUF2
     38					;
     39					; OUTPUTS:
     40					;
     41					;	BOTH BLOCKS WRITTEN
     42					;	ALL REGISTERS CLOBBERED
     43					;
     44					;
     45					; *** - $TEXTD	EXTEND FILE ON TAPE
     46					;
     47					; THIS ROUTINE WRITES JUST A FILE HEADER BLOCK TO TAPE.
     48					;
     49					; INPUTS:
     50					;
     51					;	FILE HEADER AND PREAMBLE IN $BUF2
     52					;
     53					; OUTPUTS:
     54					;
     55					;	HEADER WRITTEN
     56					;	ALL REGISTERS CLOBBERED
     57					;
     58					;
     59					; *** - $TWTSU	WRITE VOLUME SUMMARY TO TAPE
     60					;
     61					; THIS ROUTINE WRITES THE VOLUME SUMMARY BLOCK TO TAPE.
     62					;
     63					; INPUTS:
     64					;
     65					;	SUMMARY BLOCK AND PREAMBLE IN $BUF2
     66					;
     67					; OUTPUTS:
     68					;
     69					;	BLOCK WRITTEN
     70					;	ALL REGISTERS CLOBBERED
     71					;
     72					;-
     73
     74	000000				$TCREA::
     75	000000				$TWTIX::
     76	000000					LET R4 := #$B1HD
     77	000004					LET B.STAT(R4) := #0		; BUFFER NO LONGER NEEDED
     78	000010					$CALL $WRITE <,#2048.+P.SIZ,,,R4>
     79
     80	000020				$TEXTD::
     81	000020					LET R4 := #$B2HD
     82	000024					LET B.STAT(R4) := #0		; BUFFER NO LONGER NEEDED
TCREA	X0005 - CREATE FILE ON 	MACRO M1110  21-AUG-78 21:05  PAGE 4-1


     83	000030					$CALL $WRITE <,#512.+P.SIZ,,,R4>
     84	000040					RETURN
     85
     86	000042				$TWTSU::
     87	000042					LET R4 := #$B2HD
     88	000046					LET B.STAT(R4) := #0		; BUFFER NO LONGER NEEDED
     89	000052					$CALL $WRITE <,#S.SIZ+P.SIZ,,,R4>
     90	000062					RETURN
     91
     92
     93
     94		000001 				.END
TCREA	X0005 - CREATE FILE ON 	MACRO M1110  21-AUG-78 21:05  PAGE 4-2
SYMBOL TABLE

B.STAT= ****** GX	$B2HD = ****** GX	$L$   = 000000   	$TCREA  000000RG 	$WRITE= ****** GX
IIII  = 177777   	$DIDDO= 000000   	$R    = 177777   	$TEXTD  000020RG 	$Y$   = 000007
P.SIZ = ****** GX	$EF$  = 000000   	$SUPMC= 000043   	$TWTIX  000000RG 	$Z$   = 000000
S.SIZ = ****** GX	$E$   = 000001   	$T    = 000000   	$TWTSU  000042RG 	.$T   = 000005
$B1HD = ****** GX	$L    = 000000

. ABS.	000000	   000
      	000064	   001
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  11194 WORDS  ( 44 PAGES)
DYNAMIC MEMORY:  12276 WORDS  ( 47 PAGES)
ELAPSED TIME:  00:00:27
EXE$:TCREA,LIS$:TCREA/-SP=SRC$:SMAC/PA:1,DSCPRE,TCREA
