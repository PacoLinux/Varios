WBOOT	X0003 - WRITE BOOTSTRAP	MACRO M1110  21-AUG-78 21:23  PAGE 3


      1	000000					$BEGIN	WBOOT,0003,<WRITE BOOTSTRAP TO TAPE>
						.TITLE	WBOOT	X0003 - WRITE BOOTSTRAP TO TAPE
						.IDENT	"X0003"
      2
      3					;
      4					; COPYRIGHT (C) 1976 BY DIGITAL EQUIPMENT CORPORATION,
      5					; MAYNARD, MASSACHUSETTS
      6					;
      7					; THIS SOFTWARE IS FURNISHED UNDER A LICENSE FOR USE ONLY ON A
      8					; SINGLE  COMPUTER  SYSTEM AND MAY BE COPIED ONLY WITH THE IN-
      9					; CLUSION OF THE ABOVE COPYRIGHT NOTICE.   THIS  SOFTWARE,  OR
     10					; ANY  OTHER  COPIES THEREOF, MAY NOT BE PROVIDED OR OTHERWISE
     11					; MADE AVAILABLE TO ANY OTHER PERSON EXCEPT FOR  USE  ON  SUCH
     12					; SYSTEM  AND TO ONE WHO AGREES TO THESE LICENSE TERMS.  TITLE
     13					; TO AND OWNERSHIP OF THE SOFTWARE SHALL AT ALL  TIMES  REMAIN
     14					; IN DIGITAL.
     15					;
     16					; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITH-
     17					; OUT  NOTICE  AND  SHOULD NOT BE CONSTRUED AS A COMMITMENT BY
     18					; DIGITAL EQUIPMENT CORPORATION.
     19					;
     20					; DIGITAL EQUIPMENT CORPORATION ASSUMES NO RESPONSIBILITY  FOR
     21					; THE USE OR RELIABILITY OF ITS SOFTWARE ON EQUIPMENT WHICH IS
     22					; NOT SUPPLIED BY DIGITAL.
     23					;
     24					; ANDREW C. GOLDSTEIN  17-AUG-76  20:22
WBOOT	X0003 - WRITE BOOTSTRAP	MACRO M1110  21-AUG-78 21:23  PAGE 4


     26					;+
     27					;
     28					; *** - $WBOOT	WRITE BOOTSTRAP TO OUTPUT TAPE
     29					;
     30					; THIS ROUTINE WRITES THE BOOTSTRAP RECORD TO THE OUTPUT TAPE
     31					; BEING SET UP.
     32					;
     33					; INPUTS:
     34					;
     35					;	OUTLUN ASSIGNED TO OUTPUT TAPE
     36					;
     37					; OUTPUTS:
     38					;
     39					;	BOOT WRITTEN
     40					;
     41					;-
     42
     43	000000				$WBOOT::
     44	000000					$CALL $WRI1B <,,,,#$BOHD>	; WRITE THE BOOT RECORD
     45	000010					RETURN				; THAT'S IT
WBOOT	X0003 - WRITE BOOTSTRAP	MACRO M1110  21-AUG-78 21:23  PAGE 5


     47		000010 			B.SIZ	= 8.
     48		177564 			TPS	= 177564			; TTY CSR
     49		177566 			TPB	= 177566			; TTY DATA BUFFER
     50					;
     51					; THE BOOT BLOCK
     52					;
     53	000012				$BOHD::	.BLKB	B.SIZ		; THE UBIQUITOUS BUFFER HEADER
     54
     55	000022	000240 			BOOTBK:	NOP			; NOP IDENTIFIES BOOT BLOCK
     56	000024	012706 	001000 			MOV	#1000,SP	; SET TEMP STACK
     57	000030	010700 				MOV	PC,R0		; SET ADDRESS
     58	000032	062700 	000036 			ADD	#BOTMSG-.,R0	; OF MESSAGE
     59	000036	112001 			10$:	MOVB	(R0)+,R1	; GET NEXT CHARACTER
     60	000040	001403 				BEQ	20$		; END
     61	000042	004767 	000006 			CALL	TYPIT		; NO, PRINT IT
     62	000046	000773 				BR	10$		; LOOP FOR NEXT CHARACTER
     63	000050	000005 			20$:	RESET			;
     64	000052	000000 				HALT			; HALT
     65
     66
     67	000054	110137 	177566 		TYPIT:	MOVB	R1,@#TPB	; PRINT CHARACTER
     68	000060	105737 	177564 		10$:	TSTB	@#TPS		; DONE?
     69	000064	100375 				BPL	10$		; NO, WAIT
     70	000066					RETURN			;
     71
     72
     73	000070	   015 	   012 	   012 	BOTMSG:	.BYTE	15,12,12
     74	000073	   040 	   040 	   040 		.ASCII	/   ***THIS VOLUME DOES NOT CONTAIN A HARDWARE BOOTABLE SYSTEM ***/
	000076	   052 	   052 	   052
	000101	   124 	   110 	   111
	000104	   123 	   040 	   126
	000107	   117 	   114 	   125
	000112	   115 	   105 	   040
	000115	   104 	   117 	   105
	000120	   123 	   040 	   116
	000123	   117 	   124 	   040
	000126	   103 	   117 	   116
	000131	   124 	   101 	   111
	000134	   116 	   040 	   101
	000137	   040 	   110 	   101
	000142	   122 	   104 	   127
	000145	   101 	   122 	   105
	000150	   040 	   102 	   117
	000153	   117 	   124 	   101
	000156	   102 	   114 	   105
	000161	   040 	   123 	   131
	000164	   123 	   124 	   105
	000167	   115 	   040 	   052
	000172	   052 	   052
     75	000174	   015 	   012 	   012 		.BYTE	15,12,12,0
	000177	   000
     76						.EVEN
     77
     78
     79
     80		000001 				.END
WBOOT	X0003 - WRITE BOOTSTRAP	MACRO M1110  21-AUG-78 21:23  PAGE 5-1
SYMBOL TABLE

BOOTBK  000022R  	TPB   = 177566   	$DIDDO= 000000   	$L$   = 000000   	$WBOOT  000000RG
BOTMSG  000070R  	TPS   = 177564   	$EF$  = 000000   	$R    = 177777   	$WRI1B= ****** GX
B.SIZ = 000010   	TYPIT   000054R  	$E$   = 000001   	$SUPMC= 000043   	.$T   = 000005
IIII  = 177777   	$BOHD   000012RG 	$L    = 000000   	$T    = 000000

. ABS.	000000	   000
      	000200	   001
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  11384 WORDS  ( 45 PAGES)
DYNAMIC MEMORY:  12276 WORDS  ( 47 PAGES)
ELAPSED TIME:  00:00:20
EXE$:WBOOT,LIS$:WBOOT/-SP=SRC$:SMAC/PA:1,DSCPRE,WBOOT
