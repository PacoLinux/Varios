DRDSO	X0003 - READ VOLUME SUM	MACRO M1110  21-AUG-78 20:15  PAGE 3


      1	000000					$BEGIN	DRDSO,0003,<READ VOLUME SUMMARY FOR OUTPUT DISK>
						.TITLE	DRDSO	X0003 - READ VOLUME SUMMARY FOR OUTPUT DISK
						.IDENT	"X0003"
      2
      3					;
      4					; COPYRIGHT (C) 1976 BY DIGITAL EQUIPMENT CORPORATION,
      5					; MAYNARD, MASSACHUSETTS
      6					;
      7					; THIS SOFTWARE IS FURNISHED UNDER A LICENSE FOR USE ONLY ON A
      8					; SINGLE  COMPUTER  SYSTEM AND MAY BE COPIED ONLY WITH THE IN-
      9					; CLUSION OF THE ABOVE COPYRIGHT NOTICE.   THIS  SOFTWARE,  OR
     10					; ANY  OTHER  COPIES THEREOF, MAY NOT BE PROVIDED OR OTHERWISE
     11					; MADE AVAILABLE TO ANY OTHER PERSON EXCEPT FOR  USE  ON  SUCH
     12					; SYSTEM  AND TO ONE WHO AGREES TO THESE LICENSE TERMS.  TITLE
     13					; TO AND OWNERSHIP OF THE SOFTWARE SHALL AT ALL  TIMES  REMAIN
     14					; IN DIGITAL.
     15					;
     16					; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITH-
     17					; OUT  NOTICE  AND  SHOULD NOT BE CONSTRUED AS A COMMITMENT BY
     18					; DIGITAL EQUIPMENT CORPORATION.
     19					;
     20					; DIGITAL EQUIPMENT CORPORATION ASSUMES NO RESPONSIBILITY  FOR
     21					; THE USE OR RELIABILITY OF ITS SOFTWARE ON EQUIPMENT WHICH IS
     22					; NOT SUPPLIED BY DIGITAL.
     23					;
     24					; ANDREW C. GOLDSTEIN  1-NOV-76  23:30
DRDSO	X0003 - READ VOLUME SUM	MACRO M1110  21-AUG-78 20:15  PAGE 4


     26					;+
     27					;
     28					; *** - $DRDSO	READ VOLUME SUMMARY FOR OUTPUT DISK
     29					;
     30					; THIS ROUTINE READS THE VOLUME SUMMARY DATA FOR THE FIRST (AND ONLY)
     31					; OUTPUT DISK UNIT. IT DOES SO BY ASSIGNING THE INPUT LUN TO THE OUTPUT
     32					; DISK AND CALLING $DRDSU, THEN COPYING THE INDEX FILE HEADER BLOCK
     33					; TO THE OUTPUT INDEX FILE HEADER BUFFER.
     34					;
     35					; INPUTS:
     36					;
     37					;	NONE EXPLICIT
     38					;
     39					; OUTPUTS:
     40					;
     41					;	SUMMARY BLOCK IN $BUF2
     42					;	INDEX FILE HEADER IN $OXBF
     43					;	FIRST ENTRY IN $OVTAB FILLED IN
     44					;
     45					;-
     46
     47	000000				$DRDSO::
     48	000000					$CALL $ALUNI <#$OVTAB>		; ASSIGN LUN TO OUTPUT DISK
     49	000010					LET $FLAG1 := $FLAG1 SET.BY #KY.NIP  ;FLAG O.P.
     50	000016					$CALL $DRDSU			; USE COMMON ROUTINE
     51	000022					LET $OXHD+B.STAT := #1		; MARK HEADER BUFFER BUSY
     52	000030					LET $FLAG1 := $FLAG1 OFF.BY #KY.NIP  ;CLEAR O.P. FLAG
     53	000036					RETURN
     54
     55
     56
     57		000001 				.END
DRDSO	X0003 - READ VOLUME SUM	MACRO M1110  21-AUG-78 20:15  PAGE 4-1
SYMBOL TABLE

B.STAT= ****** GX	$DIDDO= 000000   	$E$   = 000001   	$OVTAB= ****** GX	$T    = 000000
IIII  = 177777   	$DRDSO  000000RG 	$FLAG1= ****** GX	$OXHD = ****** GX	$Y$   = 000000
KY.NIP= ****** GX	$DRDSU= ****** GX	$L    = 000000   	$R    = 177777   	$Z$   = 000000
$ALUNI= ****** GX	$EF$  = 000000   	$L$   = 000000   	$SUPMC= 000043   	.$T   = 000001

. ABS.	000000	   000
      	000040	   001
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  11184 WORDS  ( 44 PAGES)
DYNAMIC MEMORY:  12276 WORDS  ( 47 PAGES)
ELAPSED TIME:  00:00:27
EXE$:DRDSO,LIS$:DRDSO/-SP=SRC$:SMAC/PA:1,DSCPRE,DRDSO
