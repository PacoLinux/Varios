IOSLP	MACRO M1110  22-AUG-78 01:28  PAGE 7


      1						.TITLE	IOSLP
      2						.IDENT	/05/
      3
      4					;
      5					; COPYRIGHT (C) 1975,1976,1977
      6					; DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
      7					;
      8					; THIS SOFTWARE IS FURNISHED UNDER A LICENSE FOR USE ONLY ON A
      9					; SINGLE COMPUTER SYSTEM AND MAY  BE  COPIED   ONLY  WITH  THE
     10					; INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE,  OR
     11					; ANY OTHER COPIES THEREOF, MAY NOT BE PROVIDED  OR  OTHERWISE
     12					; MADE AVAILABLE TO ANY OTHER PERSON   EXCEPT FOR  USE ON SUCH
     13					; SYSTEM AND TO ONE WHO AGREES TO THESE LICENSE  TERMS.  TITLE
     14					; TO AND OWNERSHIP OF THE SOFTWARE SHALL AT ALL  TIMES  REMAIN
     15					; IN DEC.
     16					;
     17					; THE INFORMATION IN THIS DOCUMENT IS SUBJECT TO CHANGE WITHOUT
     18					; NOTICE AND SHOULD NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL
     19					; EQUIPMENT CORPORATION.
     20					;
     21					; DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF
     22					; ITS SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
     23					;
     24					; VERSION 05
     25					;
     26					; D.N. CUTLER 26-JAN-73
     27					;
     28					; MODIFICATIONS:
     29					;
     30					;	C. MONIA  11-SEP-75
     31					;
     32					;		CM001 -- ADD USER-SPECIFIED AUDIT TRAIL
     33					;
     34					;	C. MONIA  17-JAN-77
     35					;
     36					;	          CM003 -- ADD /CM SWITCH. INCREASE INDIRECT FILE DEPTH
     37					;
     38					; MONITOR DEPENDENT I/O DATA BASE
     39					;
     40					; EQUATED SYMBOLS
     41					;
     42
     43		000020 			F$DEVL==16.			;MAX LENGTH OF DEVICE NAME
     44		000037 			F$DIRL==31.			;MAX LENGTH OF DIRECTORY NAME
     45		000021 			F$FILL==17.			;MAX LENGTH OF FILENAME
     46
     47					;
     48					; MACRO LIBRARY CALLS
     49					;
     50
     51						.MCALL	CSI$ND,CSI$SV,CSI$SW,FDAT$A,FDOP$A
     52						.MCALL	FDRC$A,FSRSZ$,GCMLB$,NMBLK$
     53
     54					;
     55					; LOCAL MACROS
     56					;
     57					; CLOSE SWITCH P-SECTION
IOSLP	MACRO M1110  22-AUG-78 01:28  PAGE 7-1


     58					;
     59					;	A=FIRST THREE CHARACTER OF BLOCK NAME.
     60					;
     61
     62						.MACRO	CLOSCT A
     63						.PSECT	A'SWT,D,GBL
     64						CSI$ND
     65						.PSECT
     66						.ENDM
     67
     68					;
     69					; GENERATE CONTROL BLOCK
     70					;
     71					; GENBLK A,B,C,DD,E,F,G,H,I,J,K
     72					;
     73					; WHERE:
     74					;
     75					;	A=FIRST THREE CHARACTERS OF BLOCK NAME.
     76					;	B=RECORD TYPE.
     77					;	C=RECORD ATTRIBUTES.
     78					;	DD=RECORD SIZE.
     79					;	E=RECORD ACCESS.
     80					;	F=RECORD BUFFER SIZE.
     81					;	G=LOGICAL UNIT.
     82					;	H=FILE POINTER SWITCH.
     83					;	I=DEFAULT FILE TYPE.
     84					;	J=DEFAULT DEVICE NAME.
     85					;	K=DEFAULT DEVICE UNIT.
     86					;
     87
     88						.MACRO	GENBLK A,B,C,DD,E,F,G,H,I,J,K
     89						.PSECT	A'PT,D,GBL
     90					$'A'PT::.WORD	A'PT
     91					A'PT:	FDBDF$
     92						FDAT$A	B,C,DD
     93					$$=0
     94						.IF NB	F
     95						.PSECT	A'BUF,D,GBL
     96					$$=.
     97						.BLKB	F
     98						.PSECT	A'PT,D,GBL
     99						.ENDC
    100						FDRC$A	E,$$,F
    101						.PSECT	A'NAM,D,GBL
    102					$$=.
    103						NMBLK$	,I,,J,K
    104					$$0=0
    105						.IF NB	H
    106						.PSECT	A'DV,D,GBL
    107					$$1=.
    108						.BLKB	F$DEVL
    109						.PSECT	A'DR,D,GBL
    110					$$2=.
    111						.BLKB	F$DIRL
    112						.PSECT	A'FL,D,GBL
    113					$$3=.
    114						.BLKB	F$FILL
IOSLP	MACRO M1110  22-AUG-78 01:28  PAGE 7-2


    115						.PSECT	A'FP,D,GBL
    116					$$0=.
    117						.BLKW	1
    118						.WORD	$$1
    119						.BLKW	1
    120						.WORD	$$2
    121						.BLKW	1
    122						.WORD	$$3
    123						.ENDC
    124						.PSECT	A'PT,D,GBL
    125						FDOP$A	G,$$0,$$
    126					R$NAME==.-A'PT
    127						.WORD	A'PT+F.FNB+N.FNAM
    128					R$SWTH==.-A'PT
    129						.BLKW	1
    130					R$SWBK==.-A'PT
    131						.WORD	A'SW
    132						.PSECT	A'SWT,D,GBL
    133					A'SW:
    134						.PSECT
    135						.ENDM
    136
    137
    138					;
    139					; GENERATE SWITCH CONTROL BLOCK
    140					;
    141					; GENSWT A,B,C,D,E,F,G
    142					;
    143					;	A=FIRST THREE CHARACTERS OF RECORD BLOCK NAME.
    144					;	B=A 2 CHARACTER SWITCH NAME.
    145					;	C=SWITCH MASK.
    146					;	DD=ADDRESS OF SWITCH WORD.
    147					;	E=SWITCH MASK DISPOSITION.
    148					;	F=NEGATE ENABLE.
    149					;	G=SWITCH VALUE FLAG
    150					;
    151
    152						.MACRO	GENSWT	A,B,C,DD,E,F,G
    153						.PSECT	A'SWT,D,GBL
    154						.IF NB	G
    155						CSI$SW	B,C,DD,E,F,B'SVT
    156						.IFF
    157						CSI$SW	B,C,DD,E,F
    158						.ENDC
    159						.PSECT
    160						.ENDM
    161
    162					;
    163					; GENERATE SWITCH VALUE TABLE
    164					;
    165					; GENSVT A,B,C,DD
    166					;
    167					;	A=SWITCH TYPE
    168					;	B=LOCATION TO RECEIVE SWITCH VALUE
    169					;	C=LENGTH OF SWITCH VALUE IN BYTES
    170					;	DD=OPTIONAL TWO-CHARACTER SWITCH NAME
    171					;
IOSLP	MACRO M1110  22-AUG-78 01:28  PAGE 7-3


    172
    173						.MACRO	GENSVT	A,B,C,DD
    174						.IF NB	DD
    175						.PSECT	DD'SVT,D,GBL
    176					DD'SVT=.
    177						.ENDC
    178						CSI$SV	A,B,C
    179						CSI$ND
    180					.=.-2
    181						.ENDM
    182					;
    183					; GET COMMAND INPUT CONTROL BLOCK
    184					;
    185
    186	000000					.PSECT	CMIPT,D,GBL
    187	000000	000002'			$CMIPT::.WORD	CMIPT		;POINTER TO CONTROL BLOCK
    188	000002				CMIPT:
    189
    190					;
    191					; FILE CONTROL BLOCKS
    192					;
    193
    197
    198					;
    199					; ALLOCATE FILE SERVICES STORAGE REGION
    200					;
    201
    203
    204					;
    205					; SWITCH CONTROL BLOCK DEFINITIONS
    206					;
    207
    216
    217					;
    218					; SWITCH VALUE TABLES
    219					;
    220
    224
    225
    226					;
    227					; CLOSE SWITCH P-SECTIONS
    228					;
    229
    233
    234		000001 				.END
IOSLP	MACRO M1110  22-AUG-78 01:28  PAGE 7-4
SYMBOL TABLE

AB.CDT  000105   	F.ALOC= 000040   	F.NRBD= 000024   	G.DPRM= 000160   	SRCSW   000000R     030
AB.CHU  000064   	F.BBFS= 000062   	F.NREC= 000030   	G.ERR = 000140   	S.BFHD= 000020
AB.EXP  000122   	F.BDB = 000070   	F.OVBS= 000030   	G.ISIZ= 000020   	S.FATT= 000016
AB.FNU  000000   	F.BGBC= 000057   	F.RACC= 000016   	G.LPDL= 000100   	S.FDB = 000140
AB.FP   000062   	F.BKDN= 000026   	F.RATT= 000001   	G.MODE= 000141   	S.FNAM= 000006
AB.FSQ  000002   	F.BKDS= 000020   	F.RCNM= 000034   	G.PSDS= 000142   	S.FNB = 000036
AB.GC   000061   	F.BKEF= 000050   	F.RCTL= 000017   	G.SIZE= 000224   	S.FNBW= 000017
AB.NAM  000006   	F.BKP1= 000051   	F.RSIZ= 000002   	LSTPT   000002R     013	S.FNTY= 000004
AB.PC   000060   	F.BKST= 000024   	F.RTYP= 000000   	LSTSW   000000R     021	S.FTYP= 000002
AB.RDT  000070   	F.BKVB= 000064   	F.SEQN= 000100   	NB.NXD= 020000   	S.NFEN= 000020
AB.REV  000066   	F.CHR = 000075   	F.SPDV= 000072   	NB.WLV= 010000   	$AULGH= ****** GX
AB.UAT  000020   	F.CNTG= 000034   	F.SPUN= 000074   	N.DID = 000024   	$CFIPT  000000RG    003
AP$ND = ****** GX	F.DFNB= 000046   	F.STBK= 000036   	N.DVNM= 000032   	$CMIPT  000000RG    002
AUSVT = 000000R     032	F.DSPT= 000044   	F.UNIT= 000136   	N.FID = 000000   	$CMLGH= ****** GX
BL$NK = ****** GX	F.DVNM= 000134   	F.URBD= 000020   	N.FNAM= 000006   	$LSTPT  000000RG    013
CFIPT   000002R     003	F.EFBK= 000010   	F.VBN = 000064   	N.FTYP= 000014   	$PDSIZ= ****** GX
CFISW   000000R     012	F.EFN = 000050   	F.VBSZ= 000060   	N.FVER= 000016   	$SRCPT  000000RG    022
CHR$$ = 000115   	F.EOBB= 000032   	GE.BIF= 177775   	N.NEXT= 000022   	$SWTCH= ****** GX
CMIPT   000002R     002	F.ERR = 000052   	GE.CLO= 000004   	N.STAT= 000020   	$$    = 000001
CMSVT = 000000R     033	F.FACC= 000043   	GE.COM= 000001   	N.UNIT= 000034   	$$$   = 000162R     002
CM$PR = ****** GX	F.FFBY= 000014   	GE.CON= 000020   	R$NAME= 000140 G 	$$0   = 000000R     027
CNT$$ = 000002   	F.FNAM= 000110   	GE.EOF= 177766   	R$SWBK= 000144 G 	$$1   = 000000R     024
DB$LL = ****** GX	F.FNB = 000102   	GE.IND= 000002   	R$SWTH= 000142 G 	$$2   = 000000R     025
FD.CCL= ****** GX	F.FTYP= 000116   	GE.IOR= 177777   	R$$DPB= 000001   	$$3   = 000000R     026
FD.REC= ****** GX	F.FVER= 000120   	GE.LC = 000010   	R$$DYM= 000001   	.FSRCB= ****** G
FD.TTY= ****** GX	F.HIBK= 000004   	GE.MDE= 177774   	R$$EIS= 000000   	...PC1= 000002R     022
F$DEVL= 000020 G 	F.LUN = 000042   	GE.OPR= 177776   	R$$11M= 000001   	...PC2= 000142R     022
F$DIRL= 000037 G 	F.MBCT= 000054   	GE.RBG= 177730   	SIZ$$ = 000002   	...PC3= 000002R     022
F$FILL= 000021 G 	F.MBC1= 000055   	GE.SIZ= 000040   	SP$OL = ****** GX	...TPC= 000020
F.ACTL= 000076   	F.MBFG= 000056   	G.CMLD= 000146   	SRCPT   000002R     022

. ABS.	000131	   000
      	000000	   001
CMIPT 	000452	   002
CFIPT 	000150	   003
CFIBUF	000130	   004
CFINAM	000036	   005
CFIDV 	000020	   006
CFIDR 	000037	   007
CFIFL 	000021	   010
CFIFP 	000014	   011
CFISWT	000032	   012
LSTPT 	000150	   013
LSTNAM	000036	   014
LSTDV 	000020	   015
LSTDR 	000037	   016
LSTFL 	000021	   017
LSTFP 	000014	   020
LSTSWT	000022	   021
SRCPT 	000150	   022
SRCNAM	000036	   023
SRCDV 	000020	   024
SRCDR 	000037	   025
SRCFL 	000021	   026
SRCFP 	000014	   027
SRCSWT	000032	   030
$$FSR1	004232	   031
IOSLP	MACRO M1110  22-AUG-78 01:28  PAGE 7-5
SYMBOL TABLE

AUSVT 	000012	   032
CMSVT 	000006	   033
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  6786 WORDS  ( 27 PAGES)
DYNAMIC MEMORY:  8052 WORDS  ( 30 PAGES)
ELAPSED TIME:  00:00:45
OBJ$:IOSLP,LIS$:IOSLP/-SP=SRC$:PIPMAC,IOSLP
