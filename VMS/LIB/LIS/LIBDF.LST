FORMAT	MACRO M1110  22-AUG-78 02:09
TABLE OF CONTENTS

     1-  300	OBJECT LANGUAGE DEFS
FORMAT	MACRO M1110  22-AUG-78 02:09  PAGE 1


    100						.TITLE	FORMAT
    200						.IDENT	/X0300/
    300						.SBTTL	OBJECT LANGUAGE DEFS
FORMAT	MACRO M1110  22-AUG-78 02:09  PAGE 3


      1					; COPYRIGHT (C) 1976, 1977
      2					; DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
      3					;
      4					; THIS SOFTWARE IS FURNISHED UNDER  A LICENSE FOR USE ONLY  ON  A
      5					; SINGLE COMPUTER SYSTEM AND MAY BE  COPIED ONLY WITH  THE INCLU-
      6					; SION OF  THE  ABOVE  COPYRIGHT NOTICE.  THIS SOFTWARE,  OR  ANY
      7					; OTHER COPIES THEREOF, MAY NOT BE  PROVIDED  OR  OTHERWISE  MADE
      8					; AVAILABLE TO ANY OTHER PERSON EXCEPT  FOR  USE  ON  SUCH SYSTEM
      9					; AND TO  ONE WHO AGREES  TO  THESE LICENSE  TERMS.  TITLE TO AND
     10					; OWNERSHIP OF THE SOFTWARE SHALL AT ALL TIMES REMAIN IN DEC.
     11					;
     12					; THE INFORMATION IN THIS SOFTWARE  IS  SUBJECT TO CHANGE WITHOUT
     13					; NOTICE AND SHOULD NOT BE CONSTRUED  AS  A COMMITMENT BY DIGITAL
     14					; EQUIPMENT CORPORATION.
     15					;
     16					; DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF ITS
     17					; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 4


      1						.TITLE	LIBDF
      2						.IDENT	/X04.02/
      3
      4					; COPYRIGHT (C) 1976, 1977
      5					; DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
      6					;
      7					; THIS SOFTWARE IS FURNISHED UNDER  A LICENSE FOR USE ONLY  ON  A
      8					; SINGLE COMPUTER SYSTEM AND MAY BE  COPIED ONLY WITH  THE INCLU-
      9					; SION OF  THE  ABOVE  COPYRIGHT NOTICE.  THIS SOFTWARE,  OR  ANY
     10					; OTHER COPIES THEREOF, MAY NOT BE  PROVIDED  OR  OTHERWISE  MADE
     11					; AVAILABLE TO ANY OTHER PERSON EXCEPT  FOR  USE  ON  SUCH SYSTEM
     12					; AND TO  ONE WHO AGREES  TO  THESE LICENSE  TERMS.  TITLE TO AND
     13					; OWNERSHIP OF THE SOFTWARE SHALL AT ALL TIMES REMAIN IN DEC.
     14					;
     15					; THE INFORMATION IN THIS SOFTWARE  IS  SUBJECT TO CHANGE WITHOUT
     16					; NOTICE AND SHOULD NOT BE CONSTRUED  AS  A COMMITMENT BY DIGITAL
     17					; EQUIPMENT CORPORATION.
     18					;
     19					; DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF ITS
     20					; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
     21					;
     22					; VERSION X04.02
     23					;
     24					; WRITTEN BY:
     25					;	GEORGE W. BERRY
     26					;
     27					; MODIFIED BY:
     28					;	C.A. D'ELIA	22-MAY-74
     29					;	C.A. D'ELIA	02-JUL-74  (VIRTUAL TABLES)
     30					;	C.A. D'ELIA	05-SEP-74
     31					;	THOMAS J. MILLER 01-NOV-74
     32					;	T. J. MILLER 11-JAN-76
     33					;
     34					;		TM001 -- ADDITION OF EXTRACT SWITCH (/EX).
     35					;
     36					;	T. J. MILLER 22-JAN-76
     37					;
     38					;		TM002 -- ADDITION OF ENTRY POINT SWITCH (/EP).
     39					;
     40					;	H.B. BOSWELL	28-JUL-76	STAR
     41					;
     42					;	K.D. MORSE	14-DEC-76
     43					;
     44					;		KM001 -- MADE /SZ THE DEFAULT
     45					;	K.D. MORSE	19-JAN-78
     46					;
     47					;		KM002 -- MADE .LIS THE DEFAULT INSTEAD OF .LST
     48					;
     49					;	K.D. MORSE	9-MAR-78
     50					;
     51					;		KM003 -- FIXED LIB TO ACCEPT LOGICAL NAMES
     52					;
     53
     54					;
     55					; MONITOR DEPENDENT I/O DATA BASE
     56					;
     57					; EQUATED SYMBOLS
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 4-1


     58					;
     59		000020 			F$DEVL==16.			;++003 MAX LENGTH OF DEVICE NAME
     60		000037 			F$DIRL==31.			;++003 MAX LENGTH OF DIRECTORY NAME
     61		000021 			F$FILL==17.			;++003 MAX LENGTH OF FILENAME
     62
     63
     64					;
     65					; MACRO LIBRARY CALLS
     66					;
     67
     68						.MCALL	CSI$
     69	000000					CSI$
     70						.MCALL	FDOFF$
     71	000000					FDOFF$	DEF$L
     72						.MCALL	GCMLD$
     73	000000					GCMLD$
     74						.MCALL	FCSBT$
     75	000000					FCSBT$
     76
     77						.MCALL	CSI$ND,CSI$SV,CSI$SW,FDAT$A,FDBDF$,FDOP$A
     78						.MCALL	FDRC$A,FSRSZ$,GCMLB$,NMBLK$
     79
     80
     81
     82					;
     83					; LOCAL MACROS
     84					;
     85					; CLOSE SWITCH P-SECTION
     86					;
     87					; CLOSCT A
     88					;
     89					;	A=FIRST THREE CHARACTERS OF BLOCK NAME.
     90					;
     91
     92						.MACRO	CLOSCT A
     93						.PSECT	A'SWT,D,GBL
     94						.WORD	0
     95						.PSECT
     96						.ENDM
     97
     98					;
     99					; GENERATE CONTROL BLOCK
    100					;
    101					; GENBLK A,B,C,DD,E,F,G,H,I,J,K
    102					;
    103					; WHERE:
    104					;
    105					;	A=FIRST THREE CHARACTERS OF BLOCK NAME.
    106					;	B=RECORD TYPE.
    107					;	C=RECORD ATTRIBUTES.
    108					;	DD=RECORD SIZE.
    109					;	E=RECORD ACCESS.
    110					;	F=RECORD BUFFER SIZE.
    111					;	G=LOGICAL UNIT.
    112					;	H=FILE POINTER SWITCH.
    113					;	I=DEFAULT FILE TYPE.
    114					;	J=DEFAULT DEVICE NAME.
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 4-2


    115					;	K=DEFAULT DEVICE UNIT.
    116					;
    117
    118						.MACRO	GENBLK A,B,C,DD,E,F,G,H,I,J,K
    119						.PSECT	A'PT,D,GBL
    120					$'A'PT::.WORD	A'PT
    121					A'PT::	FDBDF$
    122						FDAT$A	B,C,DD
    123					$$=0
    124						.IF NB	F
    125						.PSECT	A'BUF,D,GBL
    126					$$=.
    127						.BLKB	F
    128						.PSECT	A'PT,D,GBL
    129						.ENDC
    130						FDRC$A	E,$$,F
    131						.PSECT	A'NAM,D,GBL
    132					$$=.
    133					A'NAM::
    134						NMBLK$	,I,,J,K
    135					$$0=0
    136						.IF NB	H
    137						.PSECT	A'DV,D,GBL
    138					$$1=.
    139						.BLKB	F$DEVL
    140						.PSECT	A'DR,D,GBL
    141					$$2=.
    142						.BLKB	F$DIRL
    143						.PSECT	A'FL,D,GBL
    144					$$3=.
    145						.BLKB	F$FILL
    146						.PSECT	A'FP,D,GBL
    147					$$0=.
    148						.BLKW	1
    149						.WORD	$$1
    150						.BLKW	1
    151						.WORD	$$2
    152						.BLKW	1
    153						.WORD	$$3
    154						.ENDC
    155						.PSECT	A'PT,D,GBL
    156						FDOP$A	G,$$0,$$
    157					R$NAME==.-A'PT
    158						.WORD	A'PT+F.FNB+N.FNAM
    159					R$SWTH==.-A'PT
    160						.BLKW	1
    161					R$SWBK==.-A'PT
    162						.WORD	A'SW
    163						.PSECT	A'SWT,D,GBL
    164					A'SW:
    165						.PSECT
    166						.ENDM
    167
    168
    169					;
    170					; GENERATE SWITCH CONTROL BLOCK
    171					;
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 4-3


    172					; GENSWT A,B,C,D,E,F,G
    173					;
    174					;	A=FIRST THREE CHARACTERS OF RECORD BLOCK NAME.
    175					;	B=A 2 CHARACTER SWITCH NAME.
    176					;	C=SWITCH MASK.
    177					;	DD=ADDRESS OF SWITCH WORD.
    178					;	E=SWITCH MASK DISPOSITION.
    179					;	F=NEGATE ENABLE.
    180					;	G=ADDRESS OF SWITCH VALUE TABLE.
    181					;
    182
    183						.MACRO	GENSWT	A,B,C,DD,E,F,G
    184						.PSECT	A'SWT,D,GBL
    185						CSI$SW	B,C,DD,E,F,G
    186						.PSECT
    187						.ENDM
    188
    189
    190					;
    191					; GET COMMAND INPUT CONTROL BLOCK
    192					;
    193
    194	000000					.PSECT	CMIPT,D,GBL
    195	000000	000002'			$CMIPT::.WORD	CMIPT		;POINTER TO CONTROL BLOCK
    196
    197		000003 			ILVL=3				;MAX LEVEL OF 3 INDIRECT FILES
    198
    199		000001 			ILVL=1	;ONE INDIRECT FILE IN RSX-11M VERSION
    200
    201	000002				CMIPT:	GCMLB$	ILVL,LIB,$LNBUF
    202
    203					;
    204					; FILE CONTROL BLOCKS
    205					;
    206
    207		000002 			$CMOLN==2			;LUN USED FOR COMMAND OUTPUT
    208
    212
    213
    214	000270					GENBLK	INP,,,,4,R$MXLN,3,1,,SY ;+++STAR INPUT ($INPPT)
    215	000000					GENBLK	LIS,R.VAR,,74.,,,4,1,LIS,SY  ;LISTING ($LISPT)			;KM002
    216	000000					GENBLK	LIB,R.FIX,,512.,10,,5,1,,SY  ;LIBRARY ($LIBPT)
    217	000000					GENBLK	CMP,R.FIX,,512.,10,,6,1,,SY  ;COMPRESS ($CMPPT)
    218	000000					GENBLK	EXT,R.VAR,,512.,,,4,1,,SY                                       ; TM001
    219
    220
    221
    222					;
    223					; OTHER WORK FILE RELATED DATA
    224					;
    225
    226	000000				$FRHD::	.BLKW	2		;FREE MEMORY LIST HEAD
    227
    228
    229
    230					;
    231					; SPECIFY ACTIVE FILE REQUIREMENTS
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 4-4


    232					;
    233
    234		000003 			AFILES=3			;3 ACTIVE FILES ARE REQUIRED
    235
    236		000002 			AFILES=AFILES-1  ;ONE LESS IF Q I/O TO CMD OUTPUT
    237
    238	000004					FSRSZ$	AFILES
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 5


    240					;+
    241					;
    242					; LIBRARIAN DATA BASE:
    243					;	LIBRARY HEADER BLOCK
    244					;	ENTRY POINT TABLE
    245					;	MODULE NAME TABLE
    246					;
    247					;-
    248
    249	000000					.PSECT	BUFFER
    250
    251					;
    252					; DEFINE THE LIBRARY HEADER
    253
    254					;	(ORDERED DATA)
    255					;
    256	000000				L$BUF::
    257
    258	000000				L$TYP::	.BLKB	1		;LIBRARY TYPE (OBJ, ETC)
    259	000001				L$ID::	.BLKB	1		;LIBRARY FILE ID
    260	000002				L$VER::	.BLKW	2		;CREATED BY LIB VERSION V-RRRRRR
    261						.EVEN
    262	000006				L$DAT::	.BLKW	6		;DATE OF LAST MODULE INSERTION
    263	000022				L$ES::	.BLKB	1		;SIZE OF LIBRARY EPT ENTRIES
    264	000023					.BLKB	1		;UNUSED BYTE
    265	000024				L$ET::	.BLKW	1		;LOW-ORDER VBN OF START OF EPT IN FILE
    266	000026				L$EI::	.BLKW	1		;NUMBER OF EPT ENTRIES ALLOCATED
    267	000030				L$EA::	.BLKW	1		;NUMBER OF EPT ENTRIES AVAILABLE
    268	000032				L$MS::	.BLKB	1		;SIZE OF LIBRARY MNT ENTRIES
    269	000033					.BLKB	1		;UNUSED BYTE
    270	000034				L$MT::	.BLKW	1		;LOW-ORDER VBN OF START OF MNT IN FILE
    271	000036				L$MI::	.BLKW	1		;NUMBER OF MNT ENTRIES ALLOCATED
    272	000040				L$MA::	.BLKW	1		;NUMBER OF MNT ENTIRES AVAILABLE
    273	000042				L$LD::	.BLKW	2		;LOGICALLY DELETED MODULE SPACE (BYTES)
    274	000046				L$LA::	.BLKW	2		;BYTES AVAILABLE FOR MODULE INSERTS
    275	000052				L$NX::	.BLKW	2		;ADDR (VBN+OFFSET) OF NEXT MODULE INSERT
    276
    277
    278		001000'			.=L$BUF+512.			;MUST USE 256. WORD BLK FOR LIBRARY HDR
    279
    280
    281					;
    282					; THIS BUFFER IS EXPANDED AS NEEDED AT LINK TIME.  THE FOLLOWING
    283					; .PSECT ENABLES THE RUNNING LIBRARIAN TO DETERMINE THE SIZE OF THIS
    284					; BUFFER.
    285					;
    286					; NOTE: WHEN RUNNING ON RSX-11M SYSTEM, THE AMOUNT OF DYNAMIC BUFFER
    287					; MEMORY IS DETERMINED AT RUN TIME BY OBTAINING INFORMATION ABOUT
    288					; ITS PARTITION'S AND ITS OWN ADDRESS LIMITS.
    289					;
    290
    291	000000					.PSECT	BUFFES
    292
    293	000000				$LBEND::			;REF LABEL TO END OF BUFFER
    294
    295	000004					.PSECT
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 6


    297					;
    298					; LIB FILE ID (INSURES ITS A LIBRARY FILE)
    299					;
    300
    301		000201 			ID$==129.			;+++STAR CHANGED FOR STARLET SOFTWARE
    302
    303
    304					;
    305					; ENTRY POINT TABLE (EPT)
    306					;
    307
    308		000002 			EPTBLK	==2			;STARTING DISK BLOCK OF EPT
    309
    310
    311					;
    312					; MODULE HEADER RECORD
    313					;
    314
    315		000034 			MHSIZE==14+S$MXLN+1		;+++STAR MAXIMUM SIZE OF THE MODULE HEADER
    316
    317
    318					;
    319					; MODULE HEADER READ/WRITE BUFFER
    320					;
    321
    322	000004				$MHBUF::.BLKB	MHSIZE		;MODULE HEADER BUFFER
    323
    324		000004'			$MHST	==$MHBUF		;HEADER STATUS
    325		000005'			$MHAT	==$MHBUF+1		;MODULE ATTRIBUTES (SEL-SRCH, ETC)
    326		000006'			$MOSZ	==$MHBUF+2		;SIZE OF MODULE IN BYTES
    327		000012'			$MHDA	==$MHBUF+6		;DATE MODULE INSERTED
    328		000020'			$MHID	==$MHBUF+14		;ADDITIONAL TYPE DEPENDENT ENTRIES
    329
    330
    331					;
    332					; TYPE DEPENDENT INFORMATION
    333					;
    334
    335		000001 			TY$	==1			;HIGHEST LEGAL MODULE TYPE CODE
    336
    337					; OBJECT MODULE TYPE
    338
    339		000000 			TY$OBJ	==0			;DEFINES OBJ MODULE TYPE
    340		000024 			E$OBJ	==S$MXLN+1+4		;+++STAR EPT ENTRY SIZE
    341		000024 			M$OBJ	==S$MXLN+1+4		;+++STAR MNT ENTRY SIZE
    342		000034 			HS$OBJ	==MHSIZE		;+++STAR MODULE HEADER SIZE
    343
    344					; MACRO DEFINITION MODULE TYPE
    345		000001 			TY$MAC	==1			;DEFINES MACRO DEF MODULE TYPE
    346		000000 			E$MAC	==0			;NO EPT IN MACRO DEF TYPE
    347		000024 			M$MAC	==S$MXLN+1+4		;+++STAR MNT ENTRY SIZE
    348		000034 			HS$MAC	==MHSIZE		;+++STAR MODULE HEADER SIZE
    349
    350
    351					;
    352					; EPT/MNT PARTITION DESCRIPTOR LIST
    353					;
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 6-1


    354
    355	000040				$PARTD::
    356	000040	   056 	   137 			.ASCII	/._/		;+++STAR $-._
    357	000042	   071 	   137 			.ASCII	/9_/		;+++STAR 0-9_
    358	000044	   105 	   137 			.ASCII	/E_/		;+++STAR A-E_
    359	000046	   113 	   137 			.ASCII	/K_/		;+++STAR F-K_
    360	000050	   123 	   137 			.ASCII	/S_/		;+++STAR L-S_
    361	000052	   132 	   137 			.ASCII	/Z_/		;+++STAR T-Z_
    362	000054	   137 	   137 			.ASCII	/__/		;+++STAR _-__
    363
    364		000007 			NU$PAR == <.-$PARTD>/2		;NUMBER OF TABLE PARTITIONS
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 7


    366					;+
    367					;
    368					; IMPURE DATA BASE AREA
    369					;
    370					; THE AREA BETWEEN 'DBASE' AND 'DBEND' IS ZEROED INITIALLY.
    371					;
    372					;-
    373		000056'			DBASE	==.
    374
    375					;
    376					; PARTITION LIST HEADS FOR THE EPT AND MNT
    377					;
    378
    379						.EVEN
    380	000056				$EPTHL::.BLKW	NU$PAR		;EPT LIST HEADS
    381	000074				$MNTHL::.BLKW	NU$PAR		;MNT LIST HEADS
    382
    383	000112				$HDLST::.BLKW	1		;POINTER TO LIST HEADS IN USE
    384
    385
    386					;
    387					; POINTER TO FDB OF FILE CURRENTLY OPEN (OTHER THAN LIBRARY FILE)
    388					;
    389
    390	000114				$OPNFL::.BLKW	1
    391
    392
    393					;
    394					; TELETYPE ATTACHED INFORMATION (FOR LIBRARY LISTING)
    395					;
    396
    397	000116				$ATTFG::.BLKB	1		;TELETYPE ATTACHED FLAG
    398	000117					.BLKB	1		;TELETYPE LUN
    399
    400
    401					;
    402					; SWITCH OPTION WORD AND LIBRARIAN STATUS WORD
    403					;
    404
    405	000120				$SWTCH::.BLKW	2
    406
    407
    408					;
    409					; MNT DESCRIPTOR BLOCK
    410					;
    411
    412	000124				$MNBLK::.BLKW	3
    413		000124'			$MNES	==$MNBLK		;MNT ENTRY SIZE
    414		000126'			$MNADR	==$MNBLK+2		;ADDRESS OF MNT LIST HEADS
    415		000130'			$MNSIZ	==$MNBLK+4		;NUMBER OF ENTRIES IN MNT
    416
    417
    418					;
    419					; EPT DESCRIPTOR BLOCK
    420					;
    421
    422	000132				$EPBLK::.BLKW	3
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 7-1


    423		000132'			$EPES	==$EPBLK		;EPT ENTRY SIZE
    424		000134'			$EPADR	==$EPBLK+2		;ADDRESS OF EPT LIST HEADS
    425		000136'			$EPSIZ	==$EPBLK+4		;NUMBER OF ENTRIES IN EPT
    426
    427
    428					;
    429					; -- $DMN -- MODULE DELETION LIST (USED BY /DE AND /DG)
    430					;
    431					;+++STAR THIS LIST CONTAINS THE NAMES, AS A BYTE OF COUNT FOLLOWED
    432					;+++STAR BY 'N' ASCII CHARS, OF THE
    433					; MODULES TO BE DELETED WITH /DE.
    434					;
    435		000036 			$DMSIZ	==30.			;NUMBER OF NAMES PERMITTED
    436
    437	000140				$DMN::	.BLKW	S$MXLN+1*$DMSIZ+1 ;+++STAR
    438		002030'			$DEND	==.-12
    439		002040'			$DGEND	==.-2
    440
    441
    442					;
    443					; /CR PARAMETERS
    444					;
    445
    446	002042				PBLK:	.BLKW	4
    447		002042'			$SIZ	==PBLK			;SIZE OF NEW FILE IN BLOCKS
    448		002044'			$EPT	==PBLK+2		;EPT ENTRIES TO ALLOCATE
    449		002046'			$MNT	==PBLK+4		;MNT ENTRIES TO ALLOCATE
    450		002050'			$TYP	==PBLK+6		;TYPE OF LIBRARY FILE
    451
    452
    453					;
    454					; END OF IMPURE DATA BASE AREA
    455					;
    456
    457		002052'			DBEND=.
    458		000776 			DSIZE	==<DBEND-DBASE>/2
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 8


    460					;
    461					; STORAGE REQURIED FOR 'GTCML' INTERFACE ROUTINE
    462					;
    463
    464	002052				$LNDES::.BLKW	2		;COMMAND LINE DESCRIPTOR
    465	002056				$LNBUF::.BLKW	42.		;COMMAND LINE BUFFER
    466
    467	002202	000000 			$CMFLG::.WORD	0		;NO SPECIAL PROMPT FROM $GTCML
    468
    469
    470					;
    471					; EPT ENTRY SIZE TABLE (INDEXED BY TYPE)
    472					;
    473
    474	002204				TY$ES::
    475	002204	   024 				.BYTE	E$OBJ		;SIZE OF OBJECT MODULE EPT ENTRIES
    476	002205	   000 				.BYTE	E$MAC		;SIZE OF MACRO DEF MODULE EPT ENTRIES
    477
    478
    479					;
    480					; MNT ENTRY SIZE TABLE (INDEXED BY TYPE)
    481					;
    482
    483	002206				TY$MS::
    484	002206	   024 				.BYTE	M$OBJ		;SIZE OF OBJECT MODULE MNT ENTRIES
    485	002207	   024 				.BYTE	M$MAC		;SIZE OF MACRO DEF MODULE MNT ENTRIES
    486
    487
    488						.EVEN
    489					;
    490					; CURRENT DEFAULT LIBRARY TYPE (INITIALLY OBJ)
    491					;
    492	002210	000000 			DF$TYP::.WORD	0
    493
    494
    495					;
    496					; REGISTER SAVE AREA FOR CONTINUOUS ASSOCIATIVE SEARCH
    497					;
    498
    499	002212				SR0::	.BLKW	5
    500
    501					;
    502					; THIS PSECT CONTAINS A ONE WORD ENTRY FOR EACH LIBRARY TYPE CONTAINING
    503					; THE DEFAULT LIBRARY EXTENSION FOR LIBRARY FILES OF THE TYPE.  THE
    504					; THE ENTRIES ARE IN THE MODULE LIBCD, BUT THEY ARE REFERENCED THROUGH
    505					; THE GLOBAL SYMBOL DEFINED HERE.  ALLOCATION FOR THE ENTRIES IS IN THE ROOT.
    506					;
    507
    508	000000					.PSECT	DFTYP,D,GBL,OVR
    509	000000				LIBTAB::
    510	002224					.PSECT
    511
    512
    513					;
    514					; MESSAGE OUTPUT BUFFER -- NOTE THE 'OVR' .PSECT ATTRIBUTE USED TO
    515					; SHARE THE ALLOCATED SPACE BETWEEN FOLLOWING MODULES:
    516					;	NORMAL MESSAGE OUTPUT ROUTINE ($OUT)
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 8-1


    517					;	ERROR MESSAGE OUTPUT ROUTINE ($ERMSG)
    518					;	TABLE INPUT ROUTINES ($RDEP/$RDMN)
    519					;
    520
    521	000000					.PSECT	OUTBUF,D,GBL,OVR
    522
    523	000000				$OUTBF::.BLKB	128.
    524
    525	002224					.PSECT
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 9


    527					;
    528					; CSI DEPENDENT DATA BASE
    529					;
    530
    531	002224				$CSIBK::.BLKB	C.SIZE		;CSI BLOCK
    532
    533
    534					;
    535					; SWITCHES DEFINED AS BITS IN $SWTCH
    536					;
    537
    538		100000 			CR$SW	==100000		;/CR (CREATE)
    539		040000 			IN$SW	==40000			;/IN (INSERT)
    540		020000 			DL$SW	==20000			;/DL (DELETE)
    541		010000 			RP$SW	==10000			;/RP (REPLACE)
    542		004000 			CO$SW	==4000			;/CO (COMPRESS)
    543		002000 			LI$SW	==2000			;/LI (LIST)
    544		001000 			LE$SW	==1000			;/LE (LIST MODULE ENTRY POINTS)
    545		000400 			FU$SW	==400			;/FU (LIST FULL MODULE ID)
    546		000200 			SP$SW	==200			;/SP (SPOOL OUTPUT)
    547		000100 			SS$SW	==100			;/SS (SELECTIVE SEARCH ATTRIBUTE)
    548		000040 			DF$SW	==40			;/DF (SET DEFAULT TYPE)
    549		000020 			SZ$SW	==20			;/SZ (SQUEEZE)
    550		000010 			EX$SW	==10			;/EX (EXTRACT)                                  ; TM001
    551		000004 			EP$SW	==4			;/EP (ENTRY POINT)                              ; TM002
    552					;
    553					; STATUS BITS DEFINED IN $SWTCH+2
    554					;
    555		100000 			IN$COR	==100000		;LIB HEADER, EPT AND MNT IN CORE
    556		040000 			LB$DTY	==40000			;LIB HEADER, EPT OR MNT HAS BEEN MODIFIED
    557					;
    558					; THE FOLLOWING IS DEFINED FOR GTCML COMPATIBILITY BUT IS NOT USED
    559					;
    560		000000 			EN$DR	==0
    561
    562					; SWITCH COMBINATION DEFINITIONS
    563
    564		160020 			XC$SW	==CR$SW!IN$SW!DL$SW!SZ$SW ;ALL BUT /CO AND /LI
    565		024000 			CO$DL	==CO$SW!DL$SW		;CO$SW+DL$SW
    566		002400 			LI$FU	==LI$SW!FU$SW		;LI$SW+FU$SW
    567		003000 			LI$LE	==LI$SW!LE$SW		;LI$SW+LE$SW
    568
    569
    570					;
    571					; GENERATE SWITCH CONTROL BLOCKS
    572					;
    573
    574	002300					GENSWT	LIB,CR,CR$SW,$SWTCH,SET,,CRVAL
    575	002300					GENSWT	LIB,CO,CO$SW,$SWTCH,SET,,COVAL
    576	002300					GENSWT	LIB,IN,IN$SW,$SWTCH,SET
    577	002300					GENSWT	LIB,RP,RP$SW,$SWTCH,SET
    578	002300					GENSWT	LIB,SZ,SZ$SW,$SWTCH,SET,NEG		;KM001 NEGATE SQ SWITCH
    579	002300					GENSWT	LIB,SS,SS$SW,$SWTCH,SET,NEG                                     ; TM001
    580	002300					GENSWT	LIB,LI,LI$SW,$SWTCH,SET
    581	002300					GENSWT	LIB,FU,LI$FU,$SWTCH,SET
    582	002300					GENSWT	LIB,LE,LI$LE,$SWTCH,SET
    583	002300					GENSWT	LIB,DE,DL$SW,$SWTCH,SET,,DLVAL
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 9-1


    584	002300					GENSWT	LIB,DF,DF$SW,$SWTCH,SET,,DFVAL
    585	002300					GENSWT	LIB,DG,DL$SW,$SWTCH,SET,,DGVAL
    586	002300					GENSWT	LIB,EX,EX$SW,$SWTCH,SET,,DLVAL                                  ; TM001
    587	002300					GENSWT	LIB,EP,EP$SW,$SWTCH,CLEAR,NEG                                   ; TM002
    588
    589	002300					GENSWT	LIS,LI,LI$SW,$SWTCH,SET
    590	002300					GENSWT	LIS,FU,FU$SW,$SWTCH,SET
    591	002300					GENSWT	LIS,LE,LE$SW,$SWTCH,SET
    592	002300					GENSWT	LIS,SP,SP$SW,$SWTCH,CLEAR,NEG
    593
    594	002300					GENSWT	INP,RP,RP$SW,INPPT+R$SWTH,SET,NEG
    595	002300					GENSWT	INP,SZ,SZ$SW,INPPT+R$SWTH,SET,NEG
    596	002300					GENSWT	INP,SS,SS$SW,INPPT+R$SWTH,SET,NEG
    597	002300					GENSWT	INP,EP,EP$SW,INPPT+R$SWTH,CLEAR,NEG                             ; TM002
    598
    599
    600	000000					.PSECT	LIBVAL,D,GBL
    601
    602					;
    603					; VALUE BLOCK FOR /CR:SIZ:EPT:MNT:TYPE
    604					;
    605	000000				CRVAL:	CSI$SV	NUMERIC,$SIZ,2
    606	000004					CSI$SV	NUMERIC,$EPT,2
    607	000010					CSI$SV	NUMERIC,$MNT,2
    608	000014					CSI$SV	ASCII,L$BUF,3
    609
    610	000020					CSI$ND
    611
    612
    613					;
    614					; VALUE BLOCK FOR /CO:SIZ:EPT:MNT
    615					;
    616	000022				COVAL:	CSI$SV	NUMERIC,$SIZ,2
    617	000026					CSI$SV	NUMERIC,$EPT,2
    618	000032					CSI$SV	NUMERIC,$MNT,2
    619
    620	000036					CSI$ND
    621					;
    622					; VALUE BLOCK FOR /DF:TYP
    623					;
    624	000040				DFVAL:	CSI$SV	ASCII,L$BUF+3,3
    625
    626	000044					CSI$ND
    627
    628					;
    629					; VALUE BLOCK FOR /DE:NAME1:NAME2:...
    630					;
    631		000006'			$DBLK	==L$BUF+6		;ADDRESS TO STORE NAMES
    632		000000 			ZZZ=0
    633
    634	000046				DLVAL:
    635		000036 				.REPT	$DMSIZ
    636						CSI$SV	ASCII,$DBLK+ZZZ,S$MXLN ;+++STAR
    637						ZZZ=ZZZ+S$MXLN		;+++STAR
    638						.ENDR
    639
    640		000710'			$DGBLK	==$DBLK+ZZZ
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 9-2


    641
    642	000236					CSI$ND
    643
    644
    645					;
    646					; VALUE TABLE FOR /DG:NAME:NAME:...
    647					;
    648		000000 			ZZZ=0
    649
    650	000240				DGVAL:
    651		000036 				.REPT	$DMSIZ
    652						CSI$SV	ASCII,$DGBLK+ZZZ,S$MXLN ;+++STAR
    653						ZZZ=ZZZ+S$MXLN		;+++STAR
    654						.ENDR
    655
    656	000430					CSI$ND
    657
    658	002300					.PSECT
    659
    660
    661					;
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 10


    663					; CLOSE SWITCH P-SECTIONS
    664					;
    665
    666	002300					CLOSCT	LIB
    667	002300					CLOSCT	LIS
    668	002300					CLOSCT	INP
    669	002300					CLOSCT	CMP
    670
    671
    672		000001 				.END
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 10-1
SYMBOL TABLE

AFILES= 000002   	FA.DLK= 001000   	F.BKEF= 000050   	G$SDTY  000001      005	M$HDMS  000003      003
CHR$$ = 000120   	FA.ENB= 100000   	F.BKP1= 000051   	G.CMLD= 000146   	M$HDNM  000005      003
CH.AND= 000001   	FA.EXC= 002000   	F.BKST= 000024   	G.DPRM= 000160   	M$HDSL  000002      003
CMIPT   000002R     013	FA.EXT= 000004   	F.BKVB= 000064   	G.ERR = 000140   	M$HDST  000001      003
CMPNAM  000000RG    043	FA.NSP= 000100   	F.CHR = 000075   	G.ISIZ= 000020   	M$MAC = 000024 G
CMPPT   000002RG    042	FA.POS= 010000   	F.CNTG= 000034   	G.LPDL= 000040   	M$OBJ = 000024 G
CMPSW   000000R     050	FA.RD = 000001   	F.DFNB= 000046   	G.MODE= 000141   	M$TCPN  000002      004
CNT$$ = 000002   	FA.RWD= 004000   	F.DSPT= 000044   	G.PSDS= 000142   	NB.DEV= 000200
COVAL   000022R     065	FA.SEQ= 040000   	F.DVNM= 000134   	G.SIZE= 000224   	NB.DIR= 000100
CO$DL = 024000 G 	FA.SHR= 000040   	F.EFBK= 000010   	HS$MAC= 000034 G 	NB.NAM= 000004
CO$SW = 004000 G 	FA.TMP= 000020   	F.EFN = 000050   	HS$OBJ= 000034 G 	NB.SD1= 000400
CRVAL   000000R     065	FA.WCK= 020000   	F.EOBB= 000032   	ID$   = 000201 G 	NB.SD2= 001000
CR$SW = 100000 G 	FA.WRT= 000002   	F.ERR = 000052   	ILVL  = 000001   	NB.SNM= 000040
CS.DIF= 000002   	FD.BLK= 000010   	F.FACC= 000043   	INPNAM  000000RG    016	NB.STP= 000020
CS.DVF= 000004   	FD.CCL= 000002   	F.FFBY= 000014   	INPPT   000002RG    014	NB.SVR= 000010
CS.EQU= 000040   	FD.COM= 020000   	F.FNAM= 000110   	INPSW   000000R     023	NB.TYP= 000002
CS.INP= 000001   	FD.CR = 000002   	F.FNB = 000102   	IN$COR= 100000 G 	NB.VER= 000001
CS.MOR= 000020   	FD.DIR= 000010   	F.FTYP= 000116   	IN$SW = 040000 G 	NU$PAR= 000007 G
CS.NMF= 000001   	FD.FTN= 000001   	F.FVER= 000120   	LB$DTY= 040000 G 	N.DID = 000024
CS.OUT= 000002   	FD.F11= 040000   	F.HIBK= 000004   	LE$SW = 001000 G 	N.DVNM= 000032
CS.WLD= 000010   	FD.INS= 000010   	F.LUN = 000042   	LIBNAM  000000RG    034	N.FID = 000000
CTLGRP= 000120   	FD.ISP= 002000   	F.MBCT= 000054   	LIBPT   000002RG    033	N.FNAM= 000006
C.CMLD= 000002   	FD.MNT= 100000   	F.MBC1= 000055   	LIBSW   000000R     041	N.FTYP= 000014
C.DEVD= 000006   	FD.OSP= 004000   	F.MBFG= 000056   	LIBTAB  000000RG    063	N.FVER= 000016
C.DIRD= 000012   	FD.PLC= 000004   	F.NRBD= 000024   	LISNAM  000000RG    025	N.NEXT= 000022
C.DSDS= 000006   	FD.PRN= 000004   	F.NREC= 000030   	LISPT   000002RG    024	N.STAT= 000020
C.FILD= 000016   	FD.PSE= 010000   	F.OVBS= 000030   	LISSW   000000R     032	N.UNIT= 000034
C.MKW1= 000024   	FD.RAH= 000001   	F.RACC= 000016   	LI$FU = 002400 G 	OBJ$SL= 000000
C.MKW2= 000026   	FD.RAN= 000002   	F.RATT= 000001   	LI$LE = 003000 G 	OB$DBG= 000004
C.SIZE= 000054   	FD.REC= 000001   	F.RCNM= 000034   	LI$SW = 002000 G 	OB$EOM= 000003
C.STAT= 000001   	FD.RWM= 000001   	F.RCTL= 000017   	L$BUF   000000RG    061	OB$GSD= 000001
C.SWAD= 000022   	FD.SDI= 000020   	F.RSIZ= 000002   	L$DAT   000006RG    061	OB$HDR= 000000
C.TYPR= 000000   	FD.SQD= 000040   	F.RTYP= 000000   	L$EA    000030RG    061	OB$LNK= 000005
DBASE = 000056RG 	FD.TTY= 000004   	F.SEQN= 000100   	L$EI    000026RG    061	OB$TIR= 000002
DBEND = 002052R  	FD.WBH= 000002   	F.SPDV= 000072   	L$ES    000022RG    061	OPRGRP= 000062
DFVAL   000040R     065	FF.CHR= 000005   	F.SPUN= 000074   	L$ET    000024RG    061	O$BJTY  000000      002
DF$SW = 000040 G 	FF.NV = 000003   	F.STBK= 000036   	L$ID    000001RG    061	PAGALI= 000011
DF$TYP  002210RG 	FF.POE= 000002   	F.UNIT= 000136   	L$LA    000046RG    061	PBLK    002042R
DGVAL   000240R     065	FF.RWD= 000001   	F.URBD= 000020   	L$LD    000042RG    061	PF$GBL= 000020
DLVAL   000046R     065	FF.RWF= 000006   	F.VBN = 000064   	L$MA    000040RG    061	PF$OVL= 000004
DL$SW = 020000 G 	FF.SPC= 000004   	F.VBSZ= 000060   	L$MI    000036RG    061	PF$PIC= 000001
DSIZE = 000776 G 	FO.APD= 000106   	GE.BIF= 177775   	L$MS    000032RG    061	PF$RD = 000200
EN$DR = 000000 G 	FO.MFY= 000002   	GE.CLO= 000004   	L$MT    000034RG    061	PF$REL= 000010
EOM$MX= 000007   	FO.RD = 000001   	GE.COM= 000001   	L$NX    000052RG    061	PF$SHR= 000040
EPTBLK= 000002 G 	FO.UPD= 000006   	GE.CON= 000020   	L$TYP   000000RG    061	PF$UNI= 000002
EP$SW = 000004 G 	FO.WRT= 000016   	GE.EOF= 177766   	L$VER   000002RG    061	PF$WRT= 000001
EXTNAM  000000RG    052	FU$SW = 000400 G 	GE.IND= 000002   	MAXALI= 000011   	PF$XEQ= 000100
EXTPT   000002RG    051	F$DEVL= 000020 G 	GE.IOR= 177777   	MHD$MX= 000111   	PSD$MX= 000031
EXTSW   000000R     057	F$DIRL= 000037 G 	GE.LC = 000010   	MHSIZE= 000034 G 	P$SALI  000002      006
EX$SW = 000010 G 	F$FILL= 000021 G 	GE.MDE= 177774   	MH$CPY= 000004   	P$SALO  000005      006
E$MAC = 000000 G 	F.ACTL= 000076   	GE.OPR= 177776   	MH$GTX= 000006   	P$SFL0  000003      006
E$OBJ = 000024 G 	F.ALOC= 000040   	GE.RBG= 177730   	MH$LNM= 000001   	P$SFL1  000004      006
E$OMAD  000003      012	F.BBFS= 000062   	GE.SIZ= 000040   	MH$MHD= 000000   	P$SNAM  000012      006
E$OMER  000001      012	F.BDB = 000070   	GS$ARG= 000003   	MH$MTC= 000005   	P$SNLN  000011      006
E$OMPS  000002      012	F.BGBC= 000057   	GS$EPM= 000002   	MH$SRC= 000002   	Q$$CMO= 000000
FA.APD= 000100   	F.BKDN= 000026   	GS$PSC= 000000   	MH$TTL= 000003   	RP$SW = 010000 G
FA.CRE= 000010   	F.BKDS= 000020   	GS$SYM= 000001   	MTC$MX= 000213   	R$MXLN= 001000
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 10-2
SYMBOL TABLE

R$NAME= 000140 G 	S$DPSI  000005      011	TY$OBJ= 000000 G 	$EPES = 000132RG 	$MNT  = 002046RG
R$SWBK= 000144 G 	S$DVAL  000006      011	T$CHAR= 000005   	$EPSIZ= 000136RG 	$MNTHL  000074RG
R$SWTH= 000142 G 	S$MXLN= 000017   	T$HEAD= 000000   	$EPT  = 002044RG 	$MOSZ = 000006RG
R$$11M= 000000   	S$RNAM  000006      010	T$SLEN= 000004   	$EPTHL  000056RG 	$OPNFL  000114RG
R.FIX = 000001   	S$RNLN  000005      010	T$SMBL= 000004   	$EXTPT  000000RG    051	$OUTBF  000000RG    064
R.SEQ = 000003   	S$SDTY  000002      007	V$MEML= 000002   	$FRHD   000000RG 	$PARTD  000040RG
R.VAR = 000002   	S$SFL0  000003      007	XC$SW = 160020 G 	$HDLST  000112RG 	$SIZ  = 002042RG
SDF$MX= 000032   	S$SFL1  000004      007	ZZZ   = 000702   	$INPPT  000000RG    014	$SWTCH  000120RG
SF$DEF= 000002   	S$$LIB= 000000   	$     = 000000      012	$LBEND  000000RG    062	$TYP  = 002050RG
SF$REL= 000010   	S.BFHD= 000020   	$ATTFG  000116RG 	$LIBPT  000000RG    033	$$    = 000001
SF$UNI= 000004   	S.FATT= 000016   	$CMFLG  002202RG 	$LISPT  000000RG    024	$$S   = 000005
SF$VAL= 000020   	S.FDB = 000140   	$CMIPT  000000RG    013	$LNBUF  002056RG 	$$$   = 000162R     013
SF$WK = 000001   	S.FNAM= 000006   	$CMOLN= 000002 G 	$LNDES  002052RG 	$$0   = 000000R     056
SIZ$$ = 000002   	S.FNB = 000036   	$CMPPT  000000RG    042	$MHAT = 000005RG 	$$1   = 000000R     053
SP$SW = 000200 G 	S.FNBW= 000017   	$CSIBK  002224RG 	$MHBUF  000004RG 	$$2   = 000000R     054
SRF$MX= 000025   	S.FNTY= 000004   	$DBLK = 000006RG    061	$MHDA = 000012RG 	$$3   = 000000R     055
SR0     002212RG 	S.FTYP= 000002   	$DEND = 002030RG 	$MHID = 000020RG 	.FSRCB= ****** G
SS$SW = 000100 G 	S.NFEN= 000020   	$DGBLK= 000710RG    061	$MHST = 000004RG 	...GBL= 000000
STAGRP= 000000   	TIRMAX= 000121   	$DGEND= 002040RG 	$MNADR= 000126RG 	...PC1= 000002R     051
STOGRP= 000024   	TY$   = 000001 G 	$DMN    000140RG 	$MNBLK  000124RG 	...PC2= 000142R     051
SZ$SW = 000020 G 	TY$ES   002204RG 	$DMSIZ= 000036 G 	$MNES = 000124RG 	...PC3= 000002R     051
S$DNAM  000013      011	TY$MAC= 000001 G 	$EPADR= 000134RG 	$MNSIZ= 000130RG 	...TPC= 000020
S$DNLN  000012      011	TY$MS   002206RG 	$EPBLK  000132RG

. ABS.	000000	   000
      	002300	   001
OBJREC	000001	   002
MHDREC	000111	   003
MTCREC	000213	   004
GSDREC	000002	   005
PSDEF 	000031	   006
SYMBOL	000005	   007
SYMREF	000025	   010
SYMDEF	000032	   011
EOMREC	000007	   012
CMIPT 	000270	   013
INPPT 	000150	   014
INPBUF	001000	   015
INPNAM	000036	   016
INPDV 	000020	   017
INPDR 	000037	   020
INPFL 	000021	   021
INPFP 	000014	   022
INPSWT	000042	   023
LISPT 	000150	   024
LISNAM	000036	   025
LISDV 	000020	   026
LISDR 	000037	   027
LISFL 	000021	   030
LISFP 	000014	   031
LISSWT	000042	   032
LIBPT 	000150	   033
LIBNAM	000036	   034
LIBDV 	000020	   035
LIBDR 	000037	   036
LIBFL 	000021	   037
LIBFP 	000014	   040
LIBDF	MACRO M1110  22-AUG-78 02:09  PAGE 10-3
SYMBOL TABLE

LIBSWT	000162	   041
CMPPT 	000150	   042
CMPNAM	000036	   043
CMPDV 	000020	   044
CMPDR 	000037	   045
CMPFL 	000021	   046
CMPFP 	000014	   047
CMPSWT	000002	   050
EXTPT 	000150	   051
EXTNAM	000036	   052
EXTDV 	000020	   053
EXTDR 	000037	   054
EXTFL 	000021	   055
EXTFP 	000014	   056
EXTSWT	000000	   057
$$FSR1	002040	   060
BUFFER	001000	   061
BUFFES	000000	   062
DFTYP 	000000	   063
OUTBUF	000200	   064
LIBVAL	000432	   065
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  6107 WORDS  ( 24 PAGES)
DYNAMIC MEMORY:  6996 WORDS  ( 26 PAGES)
ELAPSED TIME:  00:01:12
OBJ$:LIBDF,LIS$:LIBDF/-SP=SRC$:NEWFORMAT.,LIBPRE,LIBDF
