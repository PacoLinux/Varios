RMS0SDFP        SET DEFAULT FILE PROTECTION                      21-AUG-1978 22:11:23   VAX-11 MACRO X0.3-11               Page   0
TABLE OF CONTENTS   

   (1)      39  DECLARATIONS
   (1)      59  RMS$SETDFPROT  -  SET DEFAULT FILE PROTECTION R
RMS0SDFP        SET DEFAULT FILE PROTECTION                      21-AUG-1978 22:11:23   VAX-11 MACRO X0.3-11               Page   1
004                                                                                                                              (1)

                                     0000     1 	$BEGIN	RMS0SDFP,004,L$RMS0MISC,<SET DEFAULT FILE PROTECTION>
                                     0000     2 ; COPYRIGHT (C) 1977
                                     0000     3 ; DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASSACHUSETTS 01754
                                     0000     4 ;
                                     0000     5 ; THIS SOFTWARE IS FURNISHED  UNDER A LICENSE FOR USE ONLY ON A SINGLE
                                     0000     6 ; COMPUTER  SYSTEM AND  MAY BE  COPIED ONLY WITH  THE INCLUSION OF THE
                                     0000     7 ; ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE, OR ANY OTHER COPIES THEREOF,
                                     0000     8 ; MAY NOT BE PROVIDED OR  OTHERWISE MADE AVAILABLE TO ANY OTHER PERSON
                                     0000     9 ; EXCEPT FOR USE ON SUCH SYSTEM AND TO ONE WHO AGREES TO THESE LICENSE
                                     0000    10 ; TERMS.  TITLE TO AND  OWNERSHIP OF THE  SOFTWARE  SHALL AT ALL TIMES
                                     0000    11 ; REMAIN IN DEC.
                                     0000    12 ;
                                     0000    13 ; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE WITHOUT NOTICE
                                     0000    14 ; AND SHOULD  NOT BE CONSTRUED  AS A COMMITMENT  BY DIGITAL  EQUIPMENT
                                     0000    15 ; CORPORATION.
                                     0000    16 ;
                                     0000    17 ; DEC ASSUMES  NO  RESPONSIBILITY  FOR  THE USE OR  RELIABILITY OF ITS
                                     0000    18 ; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
                                     0000    19 ;
                                     0000    20 ;++
                                     0000    21 ; FACILITY: RMS32
                                     0000    22 ;
                                     0000    23 ; ABSTRACT:
                                     0000    24 ;		THIS ROUTINE SETS THE DEFAULT FILE PROTECTION IN
                                     0000    25 ;		THE PROCESS I/O CONTROL PAGE.
                                     0000    26 ;
                                     0000    27 ; ENVIRONMENT:
                                     0000    28 ;		STAR PROCESSOR RUNNING STARLET EXEC.
                                     0000    29 ;
                                     0000    30 ; AUTHOR: L F LAVERDURE,	 CREATION DATE: 22-APR-77
                                     0000    31 ;
                                     0000    32 ; MODIFIED BY:
                                     0000    33 ;
                                     0000    34 ;	L F LAVERDURE,   24-JUL-78  12:49
                                     0000    35 ;	W KOENIG,	 12-JUN-78  15:45
                                     0000    36 ; 01	- 
                                     0000    37 ;--
RMS0SDFP        SET DEFAULT FILE PROTECTION                      21-AUG-1978 22:11:23   VAX-11 MACRO X0.3-11               Page   2
004             DECLARATIONS                                                                                                     (1)

                                     0000    39 	.SBTTL	DECLARATIONS
                                     0000    40 ;
                                     0000    41 ; INCLUDE FILES:
                                     0000    42 ;
                                     0000    43 
                                     0000    44 ;
                                     0000    45 ; MACROS:
                                     0000    46 ;
                                     0000    47 	$PSLDEF
                                     0000    48 	$RMSDEF
                                     0000    49 	.LIST MEB
                                     0000    50 ;
                                     0000    51 ; EQUATED SYMBOLS:
                                     0000    52 ;
                                     0000    53 
                                     0000    54 ;
                                     0000    55 ; OWN STORAGE:
                                     0000    56 ;
                                     0000    57 
RMS0SDFP        SET DEFAULT FILE PROTECTION                      21-AUG-1978 22:11:23   VAX-11 MACRO X0.3-11               Page   3
004             RMS$SETDFPROT  -  SET DEFAULT FILE PROTECTION R                                                                  (1)

                                     0000    59 	.SBTTL	RMS$SETDFPROT  -  SET DEFAULT FILE PROTECTION ROUTINE
                                     0000    60 ;++
                                     0000    61 ; FUNCTIONAL DESCRIPTION:
                                     0000    62 ;
                                     0000    63 ;  THIS ROUTINE OPTIONALLY RETURNS AND/OR SETS THE VALUE OF THE
                                     0000    64 ;  DEFAULT FILE PROTECTION WORD IN THE PROCESS I/O CONTROL PAGE.
                                     0000    65 ;
                                     0000    66 ; CALLING SEQUENCE:
                                     0000    67 ;
                                     0000    68 ;	ENTERED FROM EXEC AS A RESULT OF USER'S CALLING SYS$SETDFPROT
                                     0000    69 ;
                                     0000    70 ; INPUT PARAMETERS:
                                     0000    71 ;
                                     0000    72 ;	AP	USER'S ARGUMENT LIST ADDR
                                     0000    73 ;		FIRST ARGUMENT GIVES THE ADDRESS OF THE NEW DEFAULT FILE
                                     0000    74 ;		PROTECTION WORD IF ANY, ELSE 0.
                                     0000    75 ;		CONTAINS A SECOND ARGUMENT OPTIONALLY GIVING THE ADDRESS OF
                                     0000    76 ;		A WORD IN WHICH THE CURRENT DEFAULT PROTECTION MAY BE RETURNED.
                                     0000    77 ;
                                     0000    78 ; IMPLICIT INPUTS:
                                     0000    79 ;
                                     0000    80 ;
                                     0000    81 ; OUTPUT PARAMETERS:
                                     0000    82 ;
                                     0000    83 ;	R1	DESTROYED
                                     0000    84 ;	R0	STATUS CODE
                                     0000    85 ;	(NOTE: THIS ROUTINE USES R0-R3 AS SAVED IN THE SYSTEM VECTOR ENTRY MASK)
                                     0000    86 ;
                                     0000    87 ; IMPLICIT OUTPUTS:
                                     0000    88 ;
                                     0000    89 ;	OPTIONALLY, PIO$GW_DFPROT SET TO THE VALUE OF THE INPUT WORD
                                     0000    90 ;	AND/OR THE CURRENT DEFAULT PROTECTION IS RETURNED TO THE CALLER
                                     0000    91 ;
                                     0000    92 ; COMPLETION CODES:
                                     0000    93 ;
                                     0000    94 ;	STANDARD RMS, IN PARTICULAR, SUC AND IAL.
                                     0000    95 ;
                                     0000    96 ; SIDE EFFECTS:
                                     0000    97 ;
                                     0000    98 ;	NONE
                                     0000    99 ;
                                     0000   100 ;--
RMS0SDFP        SET DEFAULT FILE PROTECTION                      21-AUG-1978 22:11:23   VAX-11 MACRO X0.3-11               Page   4
004             RMS$SETDFPROT  -  SET DEFAULT FILE PROTECTION R                                                                  (1)

                                     0000   102 	$ENTRY	RMS$SETDFPROT
                                 00000000       	.PSECT	L$RMS0MISC,GBL,NOWRT
                                     0000   103 	$TSTPT	SETDFPROT
                 00000200'9F     D6  0000       		INCL	@#PIO$GL_FMLH+512+TPT$L_SETDFPROT
                                     0006   104 ;
                                     0006   105 ; SEE IF THE CALLER WANTS THE PROTECTION RETURNED
                                     0006   106 ;
                                     0006   107 	RMSERR	IAL				; ANTICIPATE ERROR
            50       854C 8F     3C  0006       		MOVZWL	#<RMS$_IAL&^XFFFF>,R0
            52         04 AC     D0  000B   108 	MOVL	4(AP),R2			; GET 1ST ARGUMENT
                          09     13  000F   109 	BEQL	3$				;BRANCH IF NO VALUE TO SET
                                     0011   110 	IFNORD	#2,(R2),EXIT			;IS THE WORD READABLE?
            02            00     0C  0011       		PROBER	#0,#2,(R2)
                          62         0014       
                          24     13  0015       		BEQL	EXIT
            53            62     B0  0017   111 	MOVW	(R2),R3				;SAVE NEW VALUE
            51         08 AC     D0  001A   112 3$:	MOVL	8(AP),R1			;POSSIBLE ADDRESS OF RETURN LENGTH
                          0D     13  001E   113 	BEQL	5$				;IF CALLER DOESN'T WANT IT, O.K.
                                     0020   114 	IFNOWRT	#2,(R1),EXIT			;WRITEABLE?
            02            00     0D  0020       		PROBEW	#0,#2,(R1)
                          61         0023       
                          15     13  0024       		BEQL	EXIT
            61   00000000'9F     B0  0026   115 	MOVW	@#PIO$GW_DFPROT,(R1)		; YES, SO RETURN IT TO THE CALLER
                                     002D   116 5$:
                          52     D5  002D   117 	TSTL	R2				;WAS THERE A NEW VALUE?
                          07     13  002F   118 	BEQL	7$				;BRANCH IF NOT
   00000000'9F            53     B0  0031   119 	MOVW	R3,@#PIO$GW_DFPROT		; ELSE COPY IT OVER
                                     0038   120 7$:	RMSSUC
            50            01     D0  0038       		MOVL	#1,R0
                                     003B   121 EXIT:
                                     003B   122 	SSB	#16,R0
            50            10     E2  003B       		BBSS	#16,R0,30000$
                          00         003E       
                                     003F       30000$:
                                 04  003F   123 	RET
                                     0040   124 .END
RMS0SDFP        SET DEFAULT FILE PROTECTION                      21-AUG-1978 22:11:23   VAX-11 MACRO X0.3-11               Page   5
SYMBOL TABLE                                                                                                                     (1)

$$.PSECT_EP    = 00000000            RMS$_BUG_DAP   = 00018444            RMS$_IAL       = 0001854C            
$$RMSTEST      = 0000001A            RMS$_BUG_DDI   = 0001843C            RMS$_IAN       = 00018554            
$$RMS_PBUGCHK  = 00000010            RMS$_BUG_XX2   = 0001844C            RMS$_IBF       = 00018754            
$$RMS_TBUGCHK  = 00000008            RMS$_BUG_XX3   = 00018454            RMS$_IDX       = 0001855C            
$$RMS_UMODE    = 00000004            RMS$_BUG_XX4   = 0001845C            RMS$_IFA       = 0001C124            
BIT...         = 0001C134            RMS$_BUG_XX5   = 00018464            RMS$_IFI       = 00018564            
EXIT             0000003B R     02   RMS$_BUG_XX6   = 0001846C            RMS$_IMX       = 0001856C            
GBL...         = 00000000            RMS$_BUG_XX7   = 00018474            RMS$_IOP       = 00018574            
PIO$GL_FMLH      ********   X   02   RMS$_BUG_XX8   = 0001847C            RMS$_IRC       = 0001857C            
PIO$GW_DFPROT    ********   X   02   RMS$_BUG_XX9   = 00018484            RMS$_ISI       = 00018584            
PSL$C_EXEC     = 00000001            RMS$_CAA       = 0001848C            RMS$_KBF       = 0001858C            
PSL$C_KERNEL   = 00000000            RMS$_CCF       = 0001C0DC            RMS$_KEY       = 00018594            
PSL$C_SUPER    = 00000002            RMS$_CCR       = 00018494            RMS$_KFF       = 00018031            
PSL$C_USER     = 00000003            RMS$_CDA       = 0001C0E4            RMS$_KRF       = 0001859C            
PSL$M_CM       = 80000000            RMS$_CHG       = 0001849C            RMS$_KSZ       = 000185A4            
PSL$M_CURMOD   = 03000000            RMS$_CHK       = 000184A4            RMS$_LAN       = 000185AC            
PSL$M_DV       = 00000080            RMS$_CHN       = 0001C0EC            RMS$_LBL       = 000185B4            
PSL$M_FPD      = 08000000            RMS$_COD       = 000184AC            RMS$_LNE       = 000185BC            
PSL$M_FU       = 00000040            RMS$_CONTROLC  = 00010651            RMS$_LOC       = 000185C4            
PSL$M_IPL      = 001F0000            RMS$_CONTROLO  = 00010609            RMS$_MBC       = 00018734            
PSL$M_IS       = 04000000            RMS$_CONTROLY  = 00010611            RMS$_MKD       = 0001C032            
PSL$M_IV       = 00000020            RMS$_CRE       = 0001C00A            RMS$_MRN       = 000185CC            
PSL$M_PRVMOD   = 00C00000            RMS$_CREATED   = 00010619            RMS$_MRS       = 000185D4            
PSL$M_SAFBITS  = 000037FF            RMS$_CUR       = 000184B4            RMS$_NAM       = 000185DC            
PSL$M_TBIT     = 00000010            RMS$_DAC       = 0001C012            RMS$_NEF       = 000185E4            
PSL$M_TP       = 40000000            RMS$_DAN       = 000184BC            RMS$_NET       = 0001874C            
PSL$S_CURMOD   = 00000002            RMS$_DEL       = 00018262            RMS$_NID       = 000185EC            
PSL$S_IPL      = 00000005            RMS$_DEV       = 000184C4            RMS$_NMF       = 000182CA            
PSL$S_PRVMOD   = 00000002            RMS$_DIR       = 000184CC            RMS$_NOD       = 000185F4            
PSL$V_CM       = 0000001F            RMS$_DME       = 000184D4            RMS$_NORMAL    = 00010001            
PSL$V_CURMOD   = 00000018            RMS$_DNA       = 000184DC            RMS$_NPK       = 000185FC            
PSL$V_DV       = 00000007            RMS$_DNF       = 0001C04A            RMS$_OK_ALK    = 00018039            
PSL$V_FPD      = 0000001B            RMS$_DNR       = 00018272            RMS$_OK_DEL    = 00018041            
PSL$V_FU       = 00000006            RMS$_DPE       = 0001C03A            RMS$_OK_DUP    = 00018011            
PSL$V_IPL      = 00000010            RMS$_DTP       = 000184E4            RMS$_OK_IDX    = 00018019            
PSL$V_IS       = 0000001A            RMS$_DUP       = 000184EC            RMS$_OK_LIM    = 00018051            
PSL$V_IV       = 00000005            RMS$_DVI       = 000184F4            RMS$_OK_RLK    = 00018021            
PSL$V_PRVMOD   = 00000016            RMS$_ENT       = 0001C01A            RMS$_OK_RNF    = 00018049            
PSL$V_TBIT     = 00000004            RMS$_ENV       = 00018724            RMS$_OK_RRV    = 00018029            
PSL$V_TP       = 0000001E            RMS$_EOF       = 0001827A            RMS$_ORD       = 00018604            
RMS$SETDFPROT  = FFFFFFFE RG    02   RMS$_ESA       = 000184FC            RMS$_ORG       = 0001860C            
RMS$V_STVSTATUS= 0000000E            RMS$_ESL       = 00018714            RMS$_PBF       = 00018614            
RMS$_ABO       = 000183EC            RMS$_ESS       = 00018504            RMS$_PENDING   = 00018009            
RMS$_ACC       = 0001C002            RMS$_EXP       = 000182C2            RMS$_PLG       = 0001861C            
RMS$_ACT       = 0001825A            RMS$_EXT       = 0001C022            RMS$_PLV       = 0001872C            
RMS$_AID       = 000183F4            RMS$_FAB       = 0001850C            RMS$_POS       = 00018624            
RMS$_ALN       = 000183FC            RMS$_FAC       = 00018514            RMS$_PRM       = 0001862C            
RMS$_ALQ       = 00018404            RMS$_FEX       = 00018282            RMS$_PRV       = 0001829A            
RMS$_ANI       = 0001840C            RMS$_FLG       = 0001851C            RMS$_QUO       = 00018634            
RMS$_AOP       = 00018414            RMS$_FLK       = 0001828A            RMS$_RAB       = 0001863C            
RMS$_ATR       = 0001C0CC            RMS$_FNA       = 00018524            RMS$_RAC       = 00018644            
RMS$_ATW       = 0001C0D4            RMS$_FND       = 0001C02A            RMS$_RAT       = 0001864C            
RMS$_BKS       = 0001841C            RMS$_FNF       = 00018292            RMS$_RBF       = 00018654            
RMS$_BKZ       = 00018424            RMS$_FNM       = 0001852C            RMS$_RER       = 0001C0F4            
RMS$_BLN       = 0001842C            RMS$_FOP       = 0001853C            RMS$_REX       = 000182A2            
RMS$_BOF       = 00018198            RMS$_FSZ       = 00018534            RMS$_RFA       = 0001865C            
RMS$_BUG       = 00018434            RMS$_FUL       = 00018544            RMS$_RFM       = 00018664            
RMS0SDFP        SET DEFAULT FILE PROTECTION                      21-AUG-1978 22:11:23   VAX-11 MACRO X0.3-11               Page   6
SYMBOL TABLE                                                                                                                     (1)

RMS$_RHB       = 0001866C            
RMS$_RLF       = 00018674            
RMS$_RLK       = 000182AA            
RMS$_RMV       = 0001C0FC            
RMS$_RNF       = 000182B2            
RMS$_RNL       = 000181A0            
RMS$_ROP       = 0001867C            
RMS$_RPL       = 0001C104            
RMS$_RRV       = 00018684            
RMS$_RSA       = 000182DA            
RMS$_RSL       = 0001873C            
RMS$_RSS       = 00018694            
RMS$_RST       = 0001869C            
RMS$_RSZ       = 000186A4            
RMS$_RTB       = 000181A8            
RMS$_SEQ       = 000186AC            
RMS$_SHR       = 000186B4            
RMS$_SIZ       = 000186BC            
RMS$_SPL       = 0001C042            
RMS$_SQO       = 000186C4            
RMS$_STALL     = 00018001            
RMS$_STK       = 000186CC            
RMS$_SUC       = 00010001            
RMS$_SUP       = 000182D2            
RMS$_SUPERSEDE = 00010631            
RMS$_SYN       = 000186D4            
RMS$_SYS       = 0001C10C            
RMS$_TEMP1     = 0001826A            
RMS$_TEMP2     = 0001868C            
RMS$_TMO       = 000181B0            
RMS$_TRE       = 000186DC            
RMS$_TYP       = 000186E4            
RMS$_UBF       = 000186EC            
RMS$_USZ       = 000186F4            
RMS$_VER       = 000186FC            
RMS$_VOL       = 00018704            
RMS$_WBE       = 0001C12C            
RMS$_WER       = 0001C114            
RMS$_WLD       = 00018744            
RMS$_WLK       = 000182BA            
RMS$_WPL       = 0001C11C            
RMS$_WSF       = 0001871C            
RMS$_XAB       = 0001870C            
TPT$L_SETDFPROT  ********   X   02   


PROGRAM SECTION SYNOPSIS

.  ABS  .        00000000      00     NOPIC   USR   CON   ABS   LCL NOSHR NOEXE NORD  NOWRT BYTE  
. BLANK .        00000000      01     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
L$RMS0MISC       00000040      02     NOPIC   USR   CON   REL   GBL NOSHR   EXE   RD  NOWRT BYTE  
$ABS$            00000000      03     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  


THERE WERE NO ERRORS OR WARNINGS.
18414. BYTES LEFT IN FREE MEMORY POOL.
3036. BYTES OF RECLAIMED MEMORY.
RMS0SDFP        SET DEFAULT FILE PROTECTION                      21-AUG-1978 22:11:23   VAX-11 MACRO X0.3-11               Page   7
PROGRAM SECTION SYNOPSIS                                                                                                         (1)

OBJ$:RMS0SDFP,LIS$:RMS0SDFP/-SP=EXECML$/ML,LIB$:R/ML,SRC$:RMS0SDFP
25 MLB DIR RDS - 440 GETS TO DEFINE 19 MACROS. 27 INTER. FILE WRITES. 
