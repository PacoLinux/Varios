RM1DISCON       DISCONNECT FOR SEQ. ORG.                         21-AUG-1978 21:39:00   VAX-11 MACRO X0.3-11               Page   0
TABLE OF CONTENTS   

   (1)      39  DECLARATIONS
   (1)      58  RM$DISCONNECT1  -  SEQ. FILE ORG. SPECIFIC DISC
RM1DISCON       DISCONNECT FOR SEQ. ORG.                         21-AUG-1978 21:39:00   VAX-11 MACRO X0.3-11               Page   1
006                                                                                                                              (1)

                                     0000     1 	$BEGIN	RM1DISCON,006,F$RMSCLOSE1,<DISCONNECT FOR SEQ. ORG.>
                                     0000     2 ;
                                     0000     3 ; COPYRIGHT (C) 1977
                                     0000     4 ; DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASSACHUSETTS 01754
                                     0000     5 ;
                                     0000     6 ; THIS SOFTWARE IS FURNISHED  UNDER A LICENSE FOR USE ONLY ON A SINGLE
                                     0000     7 ; COMPUTER  SYSTEM AND  MAY BE  COPIED ONLY WITH  THE INCLUSION OF THE
                                     0000     8 ; ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE, OR ANY OTHER COPIES THEREOF,
                                     0000     9 ; MAY NOT BE PROVIDED OR  OTHERWISE MADE AVAILABLE TO ANY OTHER PERSON
                                     0000    10 ; EXCEPT FOR USE ON SUCH SYSTEM AND TO ONE WHO AGREES TO THESE LICENSE
                                     0000    11 ; TERMS.  TITLE TO AND  OWNERSHIP OF THE  SOFTWARE  SHALL AT ALL TIMES
                                     0000    12 ; REMAIN IN DEC.
                                     0000    13 ;
                                     0000    14 ; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE WITHOUT NOTICE
                                     0000    15 ; AND SHOULD  NOT BE CONSTRUED  AS A COMMITMENT  BY DIGITAL  EQUIPMENT
                                     0000    16 ; CORPORATION.
                                     0000    17 ;
                                     0000    18 ; DEC ASSUMES  NO  RESPONSIBILITY  FOR  THE USE OR  RELIABILITY OF ITS
                                     0000    19 ; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
                                     0000    20 ;
                                     0000    21 ;++
                                     0000    22 ; FACILITY: RMS32
                                     0000    23 ;
                                     0000    24 ; ABSTRACT:
                                     0000    25 ;		MODULE TO GIVE BACK ALL STORAGE ASSOCIATED WITH IRAB.
                                     0000    26 ;
                                     0000    27 ;
                                     0000    28 ; ENVIRONMENT:
                                     0000    29 ;		STAR PROCESSOR RUNNING STARLET EXEC.
                                     0000    30 ;
                                     0000    31 ; AUTHOR: L F LAVERDURE,	 CREATION DATE: 31-MAR-77
                                     0000    32 ;
                                     0000    33 ; MODIFIED BY:
                                     0000    34 ;
                                     0000    35 ;	L F LAVERDURE,   27-JUN-78  13:31
                                     0000    36 ; 01	- 
                                     0000    37 ;--
RM1DISCON       DISCONNECT FOR SEQ. ORG.                         21-AUG-1978 21:39:00   VAX-11 MACRO X0.3-11               Page   2
006             DECLARATIONS                                                                                                     (1)

                                     0000    39 	.SBTTL	DECLARATIONS
                                     0000    40 ;
                                     0000    41 ; INCLUDE FILES:
                                     0000    42 ;
                                     0000    43 
                                     0000    44 ;
                                     0000    45 ; MACROS:
                                     0000    46 ;
                                     0000    47 	$IFBDEF
                                     0000    48 	$IRBDEF
                                     0000    49 	$DEVDEF
                                     0000    50 ;
                                     0000    51 ; EQUATED SYMBOLS:
                                     0000    52 ;
                                     0000    53 ;
                                     0000    54 ; OWN STORAGE:
                                     0000    55 ;
                                     0000    56 
RM1DISCON       DISCONNECT FOR SEQ. ORG.                         21-AUG-1978 21:39:00   VAX-11 MACRO X0.3-11               Page   3
006             RM$DISCONNECT1  -  SEQ. FILE ORG. SPECIFIC DISC                                                                  (1)

                                     0000    58 	.SBTTL RM$DISCONNECT1  -  SEQ. FILE ORG. SPECIFIC DISCONNECT CODE
                                     0000    59 ;++
                                     0000    60 ; FUNCTIONAL DESCRIPTION:
                                     0000    61 ;
                                     0000    62 ; 1. IF NOT DOING BLOCK I/O, CALL RM$WTLST1 TO WRITE OUT LAST
                                     0000    63 ;	BLOCK WITH PADDING AND EXTENDING AS REQUIRED.
                                     0000    64 ; 2. IF DISK RESET IFB$V_EOF.
                                     0000    65 ; 3. JUMP TO RM$DISCOMMON
                                     0000    66 ;
                                     0000    67 ; CALLING SEQUENCE:
                                     0000    68 ;
                                     0000    69 ;	BSBW	RM$DISCONNECT1
                                     0000    70 ;
                                     0000    71 ;	(ENTERED AT RM$DISCONNECT1 VIA CASE BRANCH FROM
                                     0000    72 ;	RM$DISCONNECT WITH RETURN PC ON STACK)
                                     0000    73 ;
                                     0000    74 ; INPUT PARAMETERS:
                                     0000    75 ;
                                     0000    76 ;	R11	IMPURE AREA ADDRESS
                                     0000    77 ;	R10	IFAB ADDRESS
                                     0000    78 ;	R9	IRAB ADDRESS
                                     0000    79 ;	R8	RAB ADDRESS
                                     0000    80 ;
                                     0000    81 ; IMPLICIT INPUTS:
                                     0000    82 ;
                                     0000    83 ;	THE CONTENTS OF THE VARIOUS RMS INTERNAL STRUCTURES
                                     0000    84 ;
                                     0000    85 ; OUTPUT PARAMETERS:
                                     0000    86 ;
                                     0000    87 ;	R0	STATUS CODE
                                     0000    88 ;	R1-R7,AP DESTROYED
                                     0000    89 ;
                                     0000    90 ; IMPLICIT OUTPUTS:
                                     0000    91 ;
                                     0000    92 ;	IFB$V_EOF	CLEARED
                                     0000    93 ;	THE IMPLICIT OUTPUTS OF RM$WTLST1
                                     0000    94 ;
                                     0000    95 ; COMPLETION CODES:
                                     0000    96 ;
                                     0000    97 ;	STANDARD RMS
                                     0000    98 ;
                                     0000    99 ; SIDE EFFECTS:
                                     0000   100 ;
                                     0000   101 ;	MAY BE RUNNING AT AST LEVEL.
                                     0000   102 ;--
RM1DISCON       DISCONNECT FOR SEQ. ORG.                         21-AUG-1978 21:39:00   VAX-11 MACRO X0.3-11               Page   4
006             RM$DISCONNECT1  -  SEQ. FILE ORG. SPECIFIC DISC                                                                  (1)

                                     0000   104 RM$DISCONNECT1::
                                     0000   105 	$TSTPT	DISCON1
            50            01     D0  0006   106 	MOVL	#1,R0				; ANTICIPATE SUCCESS
            69            22     E0  0009   107 	BBS	#IRB$V_PPF_IMAGE,(R9),10$	; BRANCH IF INDIRECT PPF
                          0C         000C       
                                     000D   108 						; TO AVOID WRITE
         22 AA            05     E0  000D   109 	BBS	#IFB$V_BIO,IFB$B_FAC(R10),10$	; BRANCH IF BLOCK I/O
                          07         0011       
            69            27     E0  0012   110 	BBS	#IRB$V_BIO_LAST,(R9),10$	; BRANCH IF LAST OPERATION
                          03         0015       
                                     0016   111 						; WAS A BLOCK I/O OPERATION
                                     0016   112 						; (MIXED BLOCK AND REC. OPS)
                          FFE7'  30  0016   113 	BSBW	RM$WTLST1			; WRITE LAST BLOCK IF NEEDED
            6A            1C     E1  0019   114 10$:	BBC	#DEV$V_RND,IFB$L_PRIM_DEV(R10),20$	; BRANCH IF NOT DISK
                          04         001C       
                                     001D   115 	CSB	#IFB$V_EOF,(R10)		; CLEAR EOF FLAG
                          FFDC'  30  0021   116 20$:	BSBW	RM$DISCOMMON			; GO FINISH UP
         22 AA            05     E1  0024   117 	BBC	#IFB$V_BIO,IFB$B_FAC(R10),30$	; BRANCH IF NOT BLOCK I/O
                          09         0028       
                                     0029   118 ;
                                     0029   119 ;  THIS CONNECT WAS FOR BLOCK I/O.
                                     0029   120 ;  RESET TO BRO IF ALSO SET.
                                     0029   121 ;
         22 AA            06     E1  0029   122 	BBC	#IFB$V_BRO,IFB$B_FAC(R10),30$	; BRANCH IF BRO NOT ALSO SET
                          04         002D       
         22 AA            20     8A  002E   123 	BICB2	#IFB$M_BIO,IFB$B_FAC(R10)	; CLEAR BIO
                                 05  0032   124 30$:	RSB					; RETURN TO CALLER
                                     0033   125 	.END
RM1DISCON       DISCONNECT FOR SEQ. ORG.                         21-AUG-1978 21:39:00   VAX-11 MACRO X0.3-11               Page   5
SYMBOL TABLE                                                                                                                     (1)

$$.PSECT_EP    = 00000000            IFB$B_AMAX       00000059            IFB$M_BRO      = 00000040            
$$RMSTEST      = 0000001A            IFB$B_AVBN       00000058            IFB$M_DEL      = 00000004            
$$RMS_PBUGCHK  = 00000010            IFB$B_BID        00000008            IFB$M_EXE      = 00000080            
$$RMS_TBUGCHK  = 00000008            IFB$B_BKS        0000004A            IFB$M_GET      = 00000002            
$$RMS_UMODE    = 00000004            IFB$B_BLN        00000009            IFB$M_PUT      = 00000001            
BIT...         = 00000020            IFB$B_EFN        0000000B            IFB$M_TRN      = 00000010            
DEV$M_ALL      = 00800000            IFB$B_EXTRABUF   0000005D            IFB$M_UPD      = 00000008            
DEV$M_AVL      = 00040000            IFB$B_FAC        00000022            IFB$S_ORG      = 00000004            
DEV$M_CCL      = 00000002            IFB$B_FSZ        0000004B            IFB$S_RFM      = 00000004            
DEV$M_DIR      = 00000008            IFB$B_KBUFSZ     0000005C            IFB$V_ACCESSED = 00000025            
DEV$M_DMT      = 00200000            IFB$B_MODE       0000000A            IFB$V_ANSI_D   = 00000026            
DEV$M_ELG      = 00400000            IFB$B_NUM_KEYS   0000005A            IFB$V_ASYNC    = 00000023            
DEV$M_FOD      = 00004000            IFB$B_ORGCASE    00000023            IFB$V_ASYNCWAIT= 00000024            
DEV$M_FOR      = 01000000            IFB$B_RAT        0000003D            IFB$V_BIO      = 00000005            
DEV$M_GEN      = 00020000            IFB$B_RFMORG     0000003C            IFB$V_BRO      = 00000006            
DEV$M_IDV      = 04000000            IFB$B_UBUFSZ     0000005B            IFB$V_BUSY     = 00000020            
DEV$M_MBX      = 00100000            IFB$C_BID      = 0000000B            IFB$V_CREATE   = 00000032            
DEV$M_MNT      = 00080000            IFB$C_BLN        00000060            IFB$V_DAP      = 0000003E            
DEV$M_NET      = 00002000            IFB$C_BLN_IDX    00000060            IFB$V_DAP_OPEN = 0000003D            
DEV$M_ODV      = 08000000            IFB$C_BLN_REL    00000060            IFB$V_DEL      = 00000002            
DEV$M_RCK      = 40000000            IFB$C_BLN_SEQ    0000005C            IFB$V_DFW      = 0000002C            
DEV$M_REC      = 00000001            IFB$C_DIR      = 00000003            IFB$V_DLT      = 0000002B            
DEV$M_RND      = 10000000            IFB$C_FHAEND     00000050            IFB$V_DMO      = 00000028            
DEV$M_RTM      = 20000000            IFB$C_IDX      = 00000002            IFB$V_EOF      = 00000021            
DEV$M_SDI      = 00000010            IFB$C_MAXORG   = 00000002            IFB$V_EXE      = 00000007            
DEV$M_SHR      = 00010000            IFB$C_REL      = 00000001            IFB$V_GET      = 00000001            
DEV$M_SPL      = 00000040            IFB$C_SEQ      = 00000000            IFB$V_MSE      = 00000031            
DEV$M_SQD      = 00000020            IFB$K_BLN        00000060            IFB$V_NORECLK  = 00000033            
DEV$M_SWL      = 02000000            IFB$K_BLN_IDX    00000060            IFB$V_NSP      = 0000003F            
DEV$M_TRM      = 00000004            IFB$K_BLN_REL    00000060            IFB$V_NWA      = 0000003C            
DEV$M_WCK      = 80000000            IFB$K_BLN_SEQ    0000005C            IFB$V_ORG      = 00000004            
DEV$V_ALL      = 00000017            IFB$K_FHAEND     00000050            IFB$V_PPF_IMAGE= 00000022            
DEV$V_AVL      = 00000012            IFB$L_ARGLST     00000018            IFB$V_PPF_INPUT= 0000002E            
DEV$V_CCL      = 00000001            IFB$L_ASBADDR    00000014            IFB$V_PUT      = 00000000            
DEV$V_DIR      = 00000003            IFB$L_AS_DEV     00000054            IFB$V_RFM      = 00000000            
DEV$V_DMT      = 00000015            IFB$L_BDB_BLNK   00000034            IFB$V_RWC      = 00000027            
DEV$V_ELG      = 00000016            IFB$L_BDB_FLNK   00000030            IFB$V_RW_ATTR  = 00000034            
DEV$V_FOD      = 0000000E            IFB$L_BKPBITS    00000004            IFB$V_SCF      = 0000002A            
DEV$V_FOR      = 00000018            IFB$L_BWB        0000000C            IFB$V_SPL      = 00000029            
DEV$V_GEN      = 00000011            IFB$L_DVBN       00000058            IFB$V_SQO      = 0000002D            
DEV$V_IDV      = 0000001A            IFB$L_EBK        00000044            IFB$V_TEF      = 00000036            
DEV$V_MBX      = 00000014            IFB$L_FRB_PTR    00000028            IFB$V_TMP      = 00000035            
DEV$V_MNT      = 00000013            IFB$L_FWA_BDB    00000050            IFB$V_TRN      = 00000004            
DEV$V_NET      = 0000000D            IFB$L_HBK        00000040            IFB$V_UPD      = 00000003            
DEV$V_ODV      = 0000001B            IFB$L_IDX_PTR    00000054            IFB$V_WRTACC   = 00000030            
DEV$V_RCK      = 0000001E            IFB$L_IOS        0000000C            IFB$W_ASDEVBSIZ  0000005A            
DEV$V_REC      = 00000000            IFB$L_IOS4       00000010            IFB$W_BKS_BYTES  0000005C            
DEV$V_RND      = 0000001C            IFB$L_IRAB_LNK   0000001C            IFB$W_BKS_RECS   0000005E            
DEV$V_RTM      = 0000001D            IFB$L_LAST_FAB   00000024            IFB$W_CHNL       00000020            
DEV$V_SDI      = 00000004            IFB$L_LOCK_BDB   00000050            IFB$W_DEQ        0000004E            
DEV$V_SHR      = 00000010            IFB$L_MRN        00000054            IFB$W_DEVBUFSIZ  00000038            
DEV$V_SPL      = 00000006            IFB$L_NRP_LNK    00000050            IFB$W_EBK0       00000044            
DEV$V_SQD      = 00000005            IFB$L_NWA_PTR    00000028            IFB$W_EBK2       00000046            
DEV$V_SWL      = 00000019            IFB$L_PRIM_DEV   00000000            IFB$W_FFB        00000048            
DEV$V_TRM      = 00000002            IFB$L_RLB_LNK    0000002C            IFB$W_IOS2       0000000E            
DEV$V_WCK      = 0000001F            IFB$L_RNS_LEN    00000050            IFB$W_LRL        0000003E            
GBL...         = 00000000            IFB$M_BIO      = 00000020            IFB$W_MRS        0000004C            
RM1DISCON       DISCONNECT FOR SEQ. ORG.                         21-AUG-1978 21:39:00   VAX-11 MACRO X0.3-11               Page   6
SYMBOL TABLE                                                                                                                     (1)

IFB$W_RTDEQ      0000003A            IRB$V_BUSY     = 00000020            
IRB$B_BCNT       00000040            IRB$V_DAP_CONN = 0000003E            
IRB$B_BID        00000008            IRB$V_DAP_FMODE= 0000003F            
IRB$B_BLN        00000009            IRB$V_DUP      = 0000002C            
IRB$B_EFN        0000000B            IRB$V_EOF      = 00000021            
IRB$B_KEYSZ      00000051            IRB$V_FIND     = 00000029            
IRB$B_MBC        00000041            IRB$V_FIND_LAST= 00000025            
IRB$B_MODE       0000000A            IRB$V_IDX_ERR  = 00000031            
IRB$B_NRP_ID     00000030            IRB$V_LOCKABOVE= 00000002            
IRB$B_NRP_KREF   00000031            IRB$V_NEW_IDX  = 00000003            
IRB$B_NVBNS      00000048            IRB$V_POSINSERT= 00000000            
IRB$B_POST_CCTL  00000045            IRB$V_PPF_EOF  = 0000002E            
IRB$B_PPF_ISI    0000003E            IRB$V_PPF_FNDSV= 00000030            
IRB$B_PRE_CCTL   00000044            IRB$V_PPF_IMAGE= 00000022            
IRB$B_RFA_ID     00000058            IRB$V_PPF_SKIP = 0000002F            
IRB$B_RP_ID      00000038            IRB$V_PUTS_LAST= 00000026            
IRB$B_RP_KREF    00000039            IRB$V_RAHWBH   = 0000002A            
IRB$B_RRV_ID     00000050            IRB$V_SKIP_NEXT= 0000002B            
IRB$B_SRCHFLAGS  00000043            IRB$V_SRCHGT   = 00000001            
IRB$B_STOPLEVEL  00000042            IRB$V_UNLOCK_RP= 0000002D            
IRB$C_BID      = 0000000A            IRB$V_WRITE    = 00000029            
IRB$C_BLN_IDX    0000006C            IRB$W_CSIZ       00000042            
IRB$C_BLN_REL    00000048            IRB$W_DUP_POS    00000032            
IRB$C_BLN_SEQ    0000004C            IRB$W_IOS2       0000000E            
IRB$K_BLN_IDX    0000006C            IRB$W_NRP_OFF    00000030            
IRB$K_BLN_REL    00000048            IRB$W_OWN_ID     0000003C            
IRB$K_BLN_SEQ    0000004C            IRB$W_OWN_ISI    0000003E            
IRB$L_ARGLST     00000018            IRB$W_ROVHDSZ    00000044            
IRB$L_ASBADDR    00000014            IRB$W_RP_OFF     00000038            
IRB$L_BKPBITS    00000004            IRB$W_RTOTLSZ    00000046            
IRB$L_BWB        0000000C            IRB$W_SAVE_POS   00000052            
IRB$L_CURBDB     00000020            PIO$GL_FMLH      ********   X   02   
IRB$L_CURVBN     00000030            RM$DISCOMMON     ********   X   02   
IRB$L_IFAB_LNK   00000000            RM$DISCONNECT1   00000000 RG    02   
IRB$L_IOS        0000000C            RM$WTLST1        ********   X   02   
IRB$L_IOS4       00000010            TPT$L_DISCON1    ********   X   02   
IRB$L_IRAB_LNK   0000001C            
IRB$L_KEYBUF     00000048            
IRB$L_LAST_RAB   00000024            
IRB$L_LOCK_BDB   0000005C            
IRB$L_NRP        0000002C            
IRB$L_NRP_OFF    00000030            
IRB$L_NRP_VBN    0000002C            
IRB$L_NXTBDB     00000028            
IRB$L_OWNER_ID   0000003C            
IRB$L_RFA_VBN    00000054            
IRB$L_RLB_ADDR   00000044            
IRB$L_RP         00000034            
IRB$L_RP_OFF     00000038            
IRB$L_RP_VBN     00000034            
IRB$L_RRV_VBN    0000004C            
IRB$L_TEMP0      00000044            
IRB$L_TEMP1      00000048            
IRB$V_ASYNC    = 00000023            
IRB$V_ASYNCWAIT= 00000024            
IRB$V_BIO_LAST = 00000027            
IRB$V_BRO_SW   = 00000028            
RM1DISCON       DISCONNECT FOR SEQ. ORG.                         21-AUG-1978 21:39:00   VAX-11 MACRO X0.3-11               Page   7
PROGRAM SECTION SYNOPSIS                                                                                                         (1)



PROGRAM SECTION SYNOPSIS

.  ABS  .        00000000      00     NOPIC   USR   CON   ABS   LCL NOSHR NOEXE NORD  NOWRT BYTE  
. BLANK .        00000000      01     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
F$RMSCLOSE1      00000033      02     NOPIC   USR   CON   REL   GBL NOSHR   EXE   RD  NOWRT BYTE  
$ABS$            0000006C      03     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  


THERE WERE NO ERRORS OR WARNINGS.
17854. BYTES LEFT IN FREE MEMORY POOL.
2906. BYTES OF RECLAIMED MEMORY.
OBJ$:RM1DISCON,LIS$:RM1DISCON/-SP=EXECML$/ML,LIB$:R/ML,SRC$:RM1DISCON
19 MLB DIR RDS - 486 GETS TO DEFINE 13 MACROS. 33 INTER. FILE WRITES. 
