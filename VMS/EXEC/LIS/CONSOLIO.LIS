CONSOLIO        - CONSOLE TERMINAL I/O ROUTINES                  21-AUG-1978 19:38:27   VAX-11 MACRO X0.3-11               Page   0
TABLE OF CONTENTS   

   (1)    7800  CONVERT LONGWORD TO HEX AND OUTPUT DIGITS
   (1)   10400  OUTPUT BLANK CHARACTER
   (1)   12400  OUTPUT CHARACTER
   (1)   16500  OUTPUT CARRIAGE RETURN/LINE FEED PAIR
   (1)   18800  OUTPUT COUNTED AND ZERO TERMINATED STRINGS
CONSOLIO        - CONSOLE TERMINAL I/O ROUTINES                  21-AUG-1978 19:38:27   VAX-11 MACRO X0.3-11               Page   1
02                                                                                                                               (1)

                                     0000   100 	.TITLE CONSOLIO - CONSOLE TERMINAL I/O ROUTINES
                                     0000   200 	.IDENT	/02/
                                     0000   300  
                                     0000   400 ;
                                     0000   500 ; COPYRIGHT (C) 1978
                                     0000   600 ; DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
                                     0000   700 ;
                                     0000   800 ; THIS SOFTWARE IS FURNISHED UNDER  A LICENSE FOR USE ONLY  ON  A
                                     0000   900 ; SINGLE COMPUTER SYSTEM AND MAY BE  COPIED ONLY WITH  THE INCLU-
                                     0000  1000 ; SION OF  THE  ABOVE  COPYRIGHT NOTICE.  THIS SOFTWARE,  OR  ANY
                                     0000  1100 ; OTHER COPIES THEREOF, MAY NOT BE  PROVIDED  OR  OTHERWISE  MADE
                                     0000  1200 ; AVAILABLE TO ANY OTHER PERSON EXCEPT  FOR  USE  ON  SUCH SYSTEM
                                     0000  1300 ; AND TO  ONE WHO AGREES  TO  THESE LICENSE  TERMS.  TITLE TO AND
                                     0000  1400 ; OWNERSHIP OF THE SOFTWARE SHALL AT ALL TIMES REMAIN IN DEC.
                                     0000  1500 ;
                                     0000  1600 ; THE INFORMATION IN THIS SOFTWARE  IS  SUBJECT TO CHANGE WITHOUT
                                     0000  1700 ; NOTICE AND SHOULD NOT BE CONSTRUED  AS  A COMMITMENT BY DIGITAL
                                     0000  1800 ; EQUIPMENT CORPORATION.
                                     0000  1900 ;
                                     0000  2000 ; DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF ITS
                                     0000  2100 ; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
                                     0000  2200 ;
                                     0000  2300 ; D. N. CUTLER 12-AUG-76
                                     0000  2400 ;
                                     0000  2500 ; CONSOLE I/O ROUTINES
                                     0000  2600 ;
                                     0000  2700 ; MACRO LIBRARY CALLS
                                     0000  2800 ;
                                     0000  2900  
                                     0000  3000 	$PRDEF				;DEFINE PROCESSOR REGISTERS
                                     0000  3100  
                                     0000  3200 ;
                                     0000  3300 ; LOCAL SYMBOLS
                                     0000  3400 ;
                                     0000  3500 ; CHARACTER DEFINITIONS
                                     0000  3600 ;
                                     0000  3700  
                           00000020  0000  3800 BLANK=32				;BLANK
                           0000000D  0000  3900 CR=13					;CARRIAGE RETURN
                           0000000A  0000  4000 LF=10					;LINE FEED
                           00000037  0000  4100 SEVEN=55				;DIGIT 7
                           00000030  0000  4200 ZERO=48					;DIGIT 0
                                     0000  4300  
                                     0000  4400 ;
                                     0000  4500 ; TERMINAL REGISTER DEFINITIONS
                                     0000  4600 ;
                                     0000  4700  
                           FFFFFFFC  0000  4800 RCSR=-4					;OFFSET RECEIVER CSR
                           FFFFFFFE  0000  4900 RDBR=-2					;OFFSET RECEIVER DBR
                           00000000  0000  5000 TCSR=0					;OFFSET TRANSMITTER CSR
                           00000002  0000  5100 TDBR=2					;OFFSET TRANSMITTER DBR
                                     0000  5200  
                                     0000  5300 ;
                                     0000  5400 ; LOCAL DATA
                                     0000  5500 ;
                                     0000  5600 ; HEX CONVERSION TABLE
                                     0000  5700 ;
CONSOLIO        - CONSOLE TERMINAL I/O ROUTINES                  21-AUG-1978 19:38:27   VAX-11 MACRO X0.3-11               Page   2
02                                                                                                                               (1)

                                     0000  5800  
                                 00000000  5900 	.PSECT	$AEXENONPAGED
                                     0000  6000 EXE$AB_HEXTAB::				;HEXDECIMAL CONVERSION TABLE
                                 30  0000  6100 	.ASCII	/0/			;0 DIGIT
                                 31  0001  6200 	.ASCII	/1/			;1 DIGIT
                                 32  0002  6300 	.ASCII	/2/			;2 DIGIT
                                 33  0003  6400 	.ASCII	/3/			;3 DIGIT
                                 34  0004  6500 	.ASCII	/4/			;4 DIGIT
                                 35  0005  6600 	.ASCII	/5/			;5 DIGIT
                                 36  0006  6700 	.ASCII	/6/			;6 DIGIT
                                 37  0007  6800 	.ASCII	/7/			;7 DIGIT
                                 38  0008  6900 	.ASCII	/8/			;8 DIGIT
                                 39  0009  7000 	.ASCII	/9/			;9 DIGIT
                                 41  000A  7100 	.ASCII	/A/			;10 DIGIT
                                 42  000B  7200 	.ASCII	/B/			;11 DIGIT
                                 43  000C  7300 	.ASCII	/C/			;12 DIGIT
                                 44  000D  7400 	.ASCII	/D/			;13 DIGIT
                                 45  000E  7500 	.ASCII	/E/			;14 DIGIT
                                 46  000F  7600 	.ASCII	/F/			;15 DIGIT
CONSOLIO        - CONSOLE TERMINAL I/O ROUTINES                  21-AUG-1978 19:38:27   VAX-11 MACRO X0.3-11               Page   3
02              CONVERT LONGWORD TO HEX AND OUTPUT DIGITS                                                                        (1)

                                     0010  7800 	.SBTTL	CONVERT LONGWORD TO HEX AND OUTPUT DIGITS
                                     0010  7900 ;+
                                     0010  8000 ; EXE$OUTHEX - CONVERT LONGWORD TO HEX AND OUTPUT DIGITS
                                     0010  8100 ;
                                     0010  8200 ; THIS ROUTINE IS CALLED VIA A JSB TO CONVERT A LONGWORD TO HEX AND
                                     0010  8300 ; OUTPUT THE RESULTANT DIGITS TO A SPECIFIED DEVICE IN NONINTERRUPT
                                     0010  8400 ; MODE.
                                     0010  8500 ;
                                     0010  8600 ; INPUTS:
                                     0010  8700 ;
                                     0010  8800 ;	R1 = VALUE TO BE CONVERTED.
                                     0010  8900 ;	R11 = OUTPUT DEVICE CSR ADDRESS.
                                     0010  9000 ;
                                     0010  9100 ; OUTPUTS:
                                     0010  9200 ;
                                     0010  9300 ;	THE SPECIFED VALUE IS CONVERTED TO HEX AND OUTPUT.
                                     0010  9400 ;-
                                 00000000  9450 	.PSECT	Z$INIT__BUGC		;
                                     0000  9500  
                                     0000  9600 EXE$OUTHEX::				;CONVERT AND OUTPUT HEX LONGWORD
            52            1C     D0  0000  9700 	MOVL	#28,R2			;SET POSITION OF FIRST FOUR BIT FIELD
            04            52     EF  0003  9800 10$:	EXTZV	R2,#4,R1,R0		;GET NEXT FOUR BITS OF VALUE
            50            51         0006       
            50   00000000'9F40   9A  0008  9900 	MOVZBL	@#EXE$AB_HEXTAB[R0],R0	;GET ASCII CHARACTER
                          0D     10  0010 10000 	BSBB	EXE$OUTCHAR		;OUTPUT DIGIT
         FC 8F            00     9D  0012 10100 	ACBB	#0,#-4,R2,10$		;ANY MORE DIGITS TO CONVERT?
            FFEA          52         0016       
                                 05  0019 10200 	RSB				;
CONSOLIO        - CONSOLE TERMINAL I/O ROUTINES                  21-AUG-1978 19:38:27   VAX-11 MACRO X0.3-11               Page   4
02              OUTPUT BLANK CHARACTER                                                                                           (1)

                                     001A 10400 	.SBTTL	OUTPUT BLANK CHARACTER
                                     001A 10500 ;+
                                     001A 10600 ; EXE$OUTBLANK - OUTPUT BLANK CHARACTER
                                     001A 10700 ;
                                     001A 10800 ; THIS ROUTINE IS CALLED VIA A JSB TO OUTPUT A BLANK CHARACTER TO A
                                     001A 10900 ; SPECIFIED DEVICE.
                                     001A 11000 ;
                                     001A 11100 ; INPUTS:
                                     001A 11200 ;
                                     001A 11300 ;	R11 = OUTPUT DEVICE CSR ADDRESS.
                                     001A 11400 ;
                                     001A 11500 ; OUTPUTS:
                                     001A 11600 ;
                                     001A 11700 ;	BLANK CHARACTER IS OUTPUT TO SPECIFIED DEVICE.
                                     001A 11800 ;-
                                     001A 11900  
                                     001A 12000 EXE$OUTBLANK::				;OUTPUT BLANK CHARACTER
            50            20     9A  001A 12100 	MOVZBL	#BLANK,R0		;SET BLANK CHARACTER
                          00     11  001D 12200 	BRB	EXE$OUTCHAR		;
CONSOLIO        - CONSOLE TERMINAL I/O ROUTINES                  21-AUG-1978 19:38:27   VAX-11 MACRO X0.3-11               Page   5
02              OUTPUT CHARACTER                                                                                                 (1)

                                     001F 12400 	.SBTTL	OUTPUT CHARACTER
                                     001F 12500 ;+
                                     001F 12600 ; EXE$OUTCHAR - OUTPUT CHARACTER
                                     001F 12700 ;
                                     001F 12800 ; THIS ROUTINE IS CALLED VIA A JSB TO OUTPUT A CHARACTER TO A SPECIFIED
                                     001F 12900 ; DEVICE.
                                     001F 13000 ;
                                     001F 13100 ; INPUTS:
                                     001F 13200 ;
                                     001F 13300 ;	R0 = CHARACTER TO OUTPUT.
                                     001F 13400 ;	R11 = OUTPUT DEVICE CSR ADDRESS (ZERO IMPLIES CONSOLE TERMINAL).
                                     001F 13500 ;
                                     001F 13600 ; OUTPUTS:
                                     001F 13700 ;
                                     001F 13800 ;	CHARACTER IS OUTPUT TO THE SPECIFIED DEVICE. IF THE CHARACTER
                                     001F 13900 ;	IS A CARRIAGE RETURN AND THE OUTPUT DEVICE IS THE CONSOLE TERMINAL,
                                     001F 14000 ;	THEN A SUFFICIENT NUMBER OF FILL CHARACTERS ARE ALSO OUTPUT.
                                     001F 14100 ;-
                                     001F 14200  
                                     001F 14300 EXE$OUTCHAR::				;OUTPUT CHARACTER
                          5B     D5  001F 14400 	TSTL	R11			;CONSOLE TERMINAL?
                          11     12  0021 14500 	BNEQ	20$			;IF NEQ NO
            7E            22     DB  0023 14600 10$:	MFPR	#PR$_TXCS,-(SP)		;READ TRANSMIT CONTROL REGISTER
            8E   00000080 8F     D3  0026 14700 	BITL	#^X80,(SP)+		;TERMINAL READY?
                          F4     13  002D 14800 	BEQL	10$			;IF EQL NO
            23            50     DA  002F 14900 	MTPR	R0,#PR$_TXDB		;OUTPUT CHARACTER
                          0B     11  0032 15000 	BRB	30$			;
            6B       0080 8F     B3  0034 15100 20$:	BITW	#^X080,TCSR(R11)	;DEVICE READY?
                          F9     13  0039 15200 	BEQL	20$			;IF EQL NO
         02 AB            50     90  003B 15300 	MOVB	R0,TDBR(R11)		;OUTPUT CHARACTER
            50            0D     91  003F 15400 30$:	CMPB	#CR,R0			;CARRIAGE RETURN?
                          0F     12  0042 15500 	BNEQ	60$			;IF NEQ NO
                          5B     D5  0044 15600 	TSTL	R11			;CONSOLE TERMINAL?
                          0B     12  0046 15700 	BNEQ	60$			;IF NEQ NO
                          50     D4  0048 15800 40$:	CLRL	R0			;SET FILL CHARACTER
                          02     DD  004A 15900 	PUSHL	#2			;SET FILL COUNT
                          D1     10  004C 16000 50$:	BSBB	EXE$OUTCHAR		;OUTPUT A FILL CHARACTER
            FB            6E     F5  004E 16100 	SOBGTR	(SP),50$		;ANY MORE FILLS TO OUTPUT?
                          8E     D5  0051 16200 	TSTL	(SP)+			;CLEAN STACK
                                 05  0053 16300 60$:	RSB				;
CONSOLIO        - CONSOLE TERMINAL I/O ROUTINES                  21-AUG-1978 19:38:27   VAX-11 MACRO X0.3-11               Page   6
02              OUTPUT CARRIAGE RETURN/LINE FEED PAIR                                                                            (1)

                                     0054 16500 	.SBTTL	OUTPUT CARRIAGE RETURN/LINE FEED PAIR
                                     0054 16600 ;+
                                     0054 16700 ; EXE$OUTCRLF - OUTPUT CARRIAGE RETURN/LINE FEED PAIR
                                     0054 16800 ;
                                     0054 16900 ; THIS ROUTINE IS CALLED TO OUTPUT A CARRIAGE RETURN/LINE FEED PAIR TO A
                                     0054 17000 ; SPECIFIED DEVICE.
                                     0054 17100 ;
                                     0054 17200 ; INPUTS:
                                     0054 17300 ;
                                     0054 17400 ;	R11 = OUTPUT DEVICE CSR ADDRESS.
                                     0054 17500 ;
                                     0054 17600 ; OUTPUTS:
                                     0054 17700 ;
                                     0054 17800 ;	A CARRIAGE RETURN FOLLOWED BY A LINE FEED IS OUTPUT TO THE SPECIFIED
                                     0054 17900 ;	DEVICE.
                                     0054 18000 ;-
                                     0054 18100  
                                     0054 18200 EXE$OUTCRLF::				;OUTPUT CARRIAGE RETURN/LINE FEED PAIR
            50            0D     9A  0054 18300 	MOVZBL	#CR,R0			;SET CARRIAGE RETURN CHARACTER
                          C6     10  0057 18400 	BSBB	EXE$OUTCHAR		;OUTPUT CARRIAGE RETURN
            50            0A     9A  0059 18500 	MOVZBL	#LF,R0			;SET LINE FEED CHARACTER
                          C1     11  005C 18600 	BRB	EXE$OUTCHAR		;OUTPUT LINE FEED CHARACTER
CONSOLIO        - CONSOLE TERMINAL I/O ROUTINES                  21-AUG-1978 19:38:27   VAX-11 MACRO X0.3-11               Page   7
02              OUTPUT COUNTED AND ZERO TERMINATED STRINGS                                                                       (1)

                                     005E 18800 	.SBTTL	OUTPUT COUNTED AND ZERO TERMINATED STRINGS
                                     005E 18900 ;+
                                     005E 19000 ; EXE$OUTCSTRING - OUTPUT COUNTED STRING
                                     005E 19100 ;
                                     005E 19200 ; THIS ROUTINE IS CALLED VIA A JSB TO OUTPUT A STRING WHOSE FIRST CHARACTER
                                     005E 19300 ; IS THE NUMBER OF CHARACTERS TO BE OUTPUT.
                                     005E 19400 ;
                                     005E 19500 ; INPUTS:
                                     005E 19600 ;
                                     005E 19700 ;	R1 = ADDRESS OF COUNTED STRING.
                                     005E 19800 ;	R11 = OUTPUT DEVICE CSR ADDRESS.
                                     005E 19900 ;
                                     005E 20000 ; OUTPUTS:
                                     005E 20100 ;
                                     005E 20200 ;	THE NUMBER OF CHARACTERS SPECIFIED BY THE FIRST BYTE OF THE STRING
                                     005E 20300 ;	ARE OUTPUT TO THE SPECIFIED DEVICE. OUTPUT IS ALSO TERMINATED IF
                                     005E 20400 ;	A ZERO BYTE IS ENCOUNTERED BEFORE THE COUNT IS EXHAUSTED.
                                     005E 20500 ;-
                                     005E 20600  
                                     005E 20700 	.ENABL	LSB
                                     005E 20800 EXE$OUTCSTRING::			;OUTPUT COUNTED STRING
            52            81     9A  005E 20900 	MOVZBL	(R1)+,R2		;SET COUNT OF CHARACTERS TO OUTPUT
                          04     11  0061 21000 	BRB	10$			;
                                     0063 21100  
                                     0063 21200 ;+
                                     0063 21300 ; EZE$OUTZSTRING - OUTPUT ZERO TERMINATED STRING
                                     0063 21400 ;
                                     0063 21500 ; THIS ROUTINE IS CALLED VIA A JSB TO OUTPUT A STRING THAT IS TERMINATED BY
                                     0063 21600 ; A ZERO BYTE.
                                     0063 21700 ;
                                     0063 21800 ; INPUTS:
                                     0063 21900 ;
                                     0063 22000 ;	R1 = ADDRESS OF ZERO TERMINATED STRING.
                                     0063 22100 ;	R11 = OUTPUT DEVICE CSR ADDRESS.
                                     0063 22200 ;
                                     0063 22300 ; OUTPUTS:
                                     0063 22400 ;
                                     0063 22500 ;	CHARACTERS FROM THE SPECIFIED STRING ARE OUTPUT UNTIL A ZERO BYTE
                                     0063 22600 ;	IS ENCOUNTERED.
                                     0063 22700 ;-
                                     0063 22800  
                                     0063 22900 EXE$OUTZSTRING::			;OUTPUT ZERO TERMINATED STRING
            52         FF 8F     9A  0063 23000 	MOVZBL	#255,R2			;SET MAXIMUM ALLOWABLE STRING LENGTH
            50            81     9A  0067 23100 10$:	MOVZBL	(R1)+,R0		;GET NEXT CHARACTER FROM INPUT STRING
                          05     13  006A 23200 	BEQL	20$			;IF EQL END OF STRING
                          B1     10  006C 23300 	BSBB	EXE$OUTCHAR		;OUTPUT CHARACTER
            F6            52     F5  006E 23400 	SOBGTR	R2,10$			;ANY MORE CHARACTERS TO OUTPUT?
                                 05  0071 23500 20$:	RSB				;
                                     0072 23600 	.DSABL	LSB
                                     0072 23700  
                                     0072 23800 	.END
CONSOLIO        - CONSOLE TERMINAL I/O ROUTINES                  21-AUG-1978 19:38:27   VAX-11 MACRO X0.3-11               Page   8
SYMBOL TABLE                                                                                                                     (1)

BIT...         = 00000000            TDBR           = 00000002            
BLANK          = 00000020            ZERO           = 00000030            
CR             = 0000000D            
EXE$AB_HEXTAB    00000000 RG    03   
EXE$OUTBLANK     0000001A RG    04   
EXE$OUTCHAR      0000001F RG    04   
EXE$OUTCRLF      00000054 RG    04   
EXE$OUTCSTRING   0000005E RG    04   
EXE$OUTHEX       00000000 RG    04   
EXE$OUTZSTRING   00000063 RG    04   
GBL...         = 00000000            
LF             = 0000000A            
PR$_ACCR       = 00000029            
PR$_ACCS       = 00000028            
PR$_ASTLVL     = 00000013            
PR$_ESP        = 00000001            
PR$_ICCS       = 00000018            
PR$_ICR        = 0000001A            
PR$_IPL        = 00000012            
PR$_ISP        = 00000004            
PR$_KSP        = 00000000            
PR$_MAPEN      = 00000038            
PR$_NICR       = 00000019            
PR$_P0BR       = 00000008            
PR$_P0LR       = 00000009            
PR$_P1BR       = 0000000A            
PR$_P1LR       = 0000000B            
PR$_PCBB       = 00000010            
PR$_PME        = 0000003D            
PR$_RXCS       = 00000020            
PR$_RXDB       = 00000021            
PR$_SBIER      = 00000034            
PR$_SBIFS      = 00000030            
PR$_SBIMT      = 00000033            
PR$_SBIQC      = 00000036            
PR$_SBIS       = 00000031            
PR$_SBISC      = 00000032            
PR$_SBITA      = 00000035            
PR$_SBR        = 0000000C            
PR$_SCBB       = 00000011            
PR$_SID        = 0000003E            
PR$_SIRR       = 00000014            
PR$_SISR       = 00000015            
PR$_SLR        = 0000000D            
PR$_SSP        = 00000002            
PR$_TBIA       = 00000039            
PR$_TBIS       = 0000003A            
PR$_TODR       = 0000001B            
PR$_TXCS       = 00000022            
PR$_TXDB       = 00000023            
PR$_USP        = 00000003            
PR$_WCSA       = 0000002C            
PR$_WCSD       = 0000002D            
RCSR           = FFFFFFFC            
RDBR           = FFFFFFFE            
SEVEN          = 00000037            
TCSR           = 00000000            
CONSOLIO        - CONSOLE TERMINAL I/O ROUTINES                  21-AUG-1978 19:38:27   VAX-11 MACRO X0.3-11               Page   9
PROGRAM SECTION SYNOPSIS                                                                                                         (1)



PROGRAM SECTION SYNOPSIS

.  ABS  .        00000000      00     NOPIC   USR   CON   ABS   LCL NOSHR NOEXE NORD  NOWRT BYTE  
. BLANK .        00000000      01     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
$ABS$            00000000      02     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  
$AEXENONPAGED    00000010      03     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
Z$INIT__BUGC     00000072      04     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  


THERE WERE NO ERRORS OR WARNINGS.
25982. BYTES LEFT IN FREE MEMORY POOL.
406. BYTES OF RECLAIMED MEMORY.
OBJ$:CONSOLIO,LIS$:CONSOLIO/-SP=EXECML$/ML,SRC$:CONSOLIO
2 MLB DIR RDS - 95 GETS TO DEFINE 7 MACROS. 7 INTER. FILE WRITES. 
