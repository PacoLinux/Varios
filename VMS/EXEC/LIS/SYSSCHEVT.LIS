SYSSCHEVT       - SYSTEM SERVICES TO SCHEDULE EVENTS             21-AUG-1978 20:41:42   VAX-11 MACRO X0.3-11               Page   0
TABLE OF CONTENTS   

   (1)      62  SCHEDULE WAKEUP
   (1)     145  SET TIMER
   (1)     225  BUILD PROTOTYPE TIME QUEUE ENTRY
SYSSCHEVT       - SYSTEM SERVICES TO SCHEDULE EVENTS             21-AUG-1978 20:41:42   VAX-11 MACRO X0.3-11               Page   1
01                                                                                                                               (1)

                                     0000     1 	.TITLE	SYSSCHEVT - SYSTEM SERVICES TO SCHEDULE EVENTS
                                     0000     2 	.IDENT	/01/
                                     0000     3  
                                     0000     4 ;
                                     0000     5 ; COPYRIGHT (C) 1977
                                     0000     6 ; DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
                                     0000     7 ;
                                     0000     8 ; THIS SOFTWARE IS FURNISHED UNDER  A LICENSE FOR USE ONLY  ON  A
                                     0000     9 ; SINGLE COMPUTER SYSTEM AND MAY BE  COPIED ONLY WITH  THE INCLU-
                                     0000    10 ; SION OF  THE  ABOVE  COPYRIGHT NOTICE.  THIS SOFTWARE,  OR  ANY
                                     0000    11 ; OTHER COPIES THEREOF, MAY NOT BE  PROVIDED  OR  OTHERWISE  MADE
                                     0000    12 ; AVAILABLE TO ANY OTHER PERSON EXCEPT  FOR  USE  ON  SUCH SYSTEM
                                     0000    13 ; AND TO  ONE WHO AGREES  TO  THESE LICENSE  TERMS.  TITLE TO AND
                                     0000    14 ; OWNERSHIP OF THE SOFTWARE SHALL AT ALL TIMES REMAIN IN DEC.
                                     0000    15 ;
                                     0000    16 ; THE INFORMATION IN THIS SOFTWARE  IS  SUBJECT TO CHANGE WITHOUT
                                     0000    17 ; NOTICE AND SHOULD NOT BE CONSTRUED  AS  A COMMITMENT BY DIGITAL
                                     0000    18 ; EQUIPMENT CORPORATION.
                                     0000    19 ;
                                     0000    20 ; DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF ITS
                                     0000    21 ; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
                                     0000    22 ;
                                     0000    23 ; D. N. CUTLER 4-OCT-76
                                     0000    24 ;
                                     0000    25 ; SYSTEM SERVICES TO SCHEDULE EVENTS
                                     0000    26 ;
                                     0000    27 ;	SCHEDULE WAKEUP
                                     0000    28 ;	SET TIMER
                                     0000    29 ;
                                     0000    30 ; MACRO LIBRARY CALLS
                                     0000    31 ;
                                     0000    32  
                                     0000    33 	$ACBDEF				;DEFINE ACB OFFSETS
                                     0000    34 	$IPLDEF				;DEFINE INTERRUPT PRIORITY LEVELS
                                     0000    35 	$PCBDEF				;DEFINE PCB OFFSETS
                                     0000    36 	$PRDEF				;DEFINE PROCESSOR REGISTERS
                                     0000    37 	$PSLDEF				;DEFINE PROCESSOR STATUS FIELDS
                                     0000    38 	$RSNDEF				;DEFINE RESOURCE WAIT NUMBERS
                                     0000    39 	$SSDEF				;DEFINE SYSTEM STATUS VALUES
                                     0000    40 	$TQEDEF				;DEFINE TQE OFFSETS
                                     0000    41  
                                     0000    42 ;
                                     0000    43 ; LOCAL SYMBOLS
                                     0000    44 ;
                                     0000    45 ; ARGUMENT LIST OFFSET DEFINITIONS FOR SCHEDULE WAKEUP
                                     0000    46 ;
                                     0000    47  
                           00000004  0000    48 PIDADR=4				;ADDRESS OF PROCESS IDENTIFICATION
                           00000008  0000    49 LOGNAM=8				;ADDRESS OF PROCESS NAME STRING DESCRIPTOR
                           0000000C  0000    50 WKDAYTIM=12				;ADDRESS OF DELTA TIME TO EXPIRATION
                           00000010  0000    51 WKREPTIM=16				;ADDRESS OF DELTA TIME TO REPEAT EXPIRATION
                                     0000    52  
                                     0000    53 ;
                                     0000    54 ; ARGUMENT LIST OFFSET DEFINITIONS FOR SET TIMER
                                     0000    55 ;
                                     0000    56  
                           00000004  0000    57 EFN=4					;EVENT FLAG NUMBER
SYSSCHEVT       - SYSTEM SERVICES TO SCHEDULE EVENTS             21-AUG-1978 20:41:42   VAX-11 MACRO X0.3-11               Page   2
01                                                                                                                               (1)

                           00000008  0000    58 TMDAYTIM=8				;ADDRESS OF DELTA TIME TO EXPIRATION
                           0000000C  0000    59 ASTADR=12				;ADDRESS OF AST ROUTINE
                           00000010  0000    60 REQIDT=16				;REQUEST IDENTIFICATION
SYSSCHEVT       - SYSTEM SERVICES TO SCHEDULE EVENTS             21-AUG-1978 20:41:42   VAX-11 MACRO X0.3-11               Page   3
01              SCHEDULE WAKEUP                                                                                                  (1)

                                     0000    62 	.SBTTL	SCHEDULE WAKEUP
                                     0000    63 ;+
                                     0000    64 ; EXE$SCHDWK - SCHEDULE WAKEUP
                                     0000    65 ;
                                     0000    66 ; THIS SERVICE PROVIDES THE CAPABILITY TO SCHEDULE A WAKE UP FOR A PROCESS
                                     0000    67 ; THAT WILL OCCUR AT A SPECIFIED TIME AND OPTIONALLY BE REPEATED AT A FIXED
                                     0000    68 ; INTERVAL.
                                     0000    69 ;
                                     0000    70 ; INPUTS:
                                     0000    71 ;
                                     0000    72 ;	PIDADR(AP) = ADDRESS OF PROCESS IDENTIFICATION.
                                     0000    73 ;	LOGNAM(AP) = ADDRESS OF PROCESS NAME STRING DESCRIPTOR.
                                     0000    74 ;	WKDAYTIM(AP) = ADDRESS OF DELTA TIME TO EXPIRATION.
                                     0000    75 ;	WKREPTIM(AP) = ADDRESS OF DELTA TIME TO REPEAT EXPIRATION.
                                     0000    76 ;
                                     0000    77 ;	R4 = CURRENT PROCESS PCB ADDRESS.
                                     0000    78 ;
                                     0000    79 ; OUTPUTS:
                                     0000    80 ;
                                     0000    81 ;	R0 LOW BIT CLEAR INDICATES FAILURE TO SCHEDULE WAKE UP REQUEST.
                                     0000    82 ;
                                     0000    83 ;		R0 = SS$_ACCVIO - EXPIRATION TIME, DELTA REPEAT TIME, PROCESS
                                     0000    84 ;			NAME STRING, OR PROCESS NAME STRING DESCRIPTOR
                                     0000    85 ;			CANNOT BE READ BY CALLING ACCESS MODE, OR PROCESS
                                     0000    86 ;			IDENTIFICATION CANNOT BE WRITTEN BY CALLING ACCESS
                                     0000    87 ;			MODE.
                                     0000    88 ;
                                     0000    89 ;		R0 = SS$_EXQUOTA - PROCESS HAS INSUFFICIENT AST QUOTA
                                     0000    90 ;			REMAINING TO SCHEDULE WAKE UP.
                                     0000    91 ;
                                     0000    92 ;		R0 = SS$_INSFMEM - SUFFICIENT SYSTEM DYNAMIC MEMORY DOES NOT
                                     0000    93 ;			EXIST TO ALLOCATE TIME QUEUE ENTRY AND IMPLICIT
                                     0000    94 ;			RESOURCE WAIT IS NOT ENABLED.
                                     0000    95 ;
                                     0000    96 ;		R0 = SS$_IVLOGNAM - ZERO OR GREATER THAN MAXIMUM LENGTH
                                     0000    97 ;			PROCESS NAME STRING SPECIFIED.
                                     0000    98 ;
                                     0000    99 ;		R0 = SS$_IVTIME - POSITIVE DELTA REPEAT TIME SPECIFIED.
                                     0000   100 ;
                                     0000   101 ;		R0 = SS$_NONEXPR - NONEXISTENT PROCESS OR INVALID PROCESS
                                     0000   102 ;			IDENTIFICATION SPECIFIED.
                                     0000   103 ;
                                     0000   104 ;		R0 = SS$_NOPRIV - PROCESS DOES NOT HAVE PRIVILEGE TO WAKE
                                     0000   105 ;			SPECIFIED PROCESS.
                                     0000   106 ;
                                     0000   107 ;	R0 LOW BIT SET INDICATES SUCCESSFUL COMPLETION.
                                     0000   108 ;
                                     0000   109 ;		R0 = SS$_NORMAL - NORMAL COMPLETION.
                                     0000   110 ;-
                                     0000   111  
                                     0000   112 	.ENABL	LSB
                               03FC' 0000   113 	.ENTRY	EXE$SCHDWK,^M<R2,R3,R4,R5,R6,R7,R8,R9>
                          FFFB'  30  0002   114 	BSBW	EXE$NAMPID		;GET TARGET PROCESS ID
                                     0005   115 	SETIPL	#0			;ALLOW INTERRUPTS
            56            50     E9  0008   116 	BLBC	R0,20$			;IF LBC INVALID ARGUMENT
            59            51     D0  000B   117 	MOVL	R1,R9			;SET TARGET PROCESS ID
            58            02     9A  000E   118 	MOVZBL	#TQE$C_WKSNGL,R8	;SET SINGLE SHOT WAKEUP REQUEST
SYSSCHEVT       - SYSTEM SERVICES TO SCHEDULE EVENTS             21-AUG-1978 20:41:42   VAX-11 MACRO X0.3-11               Page   4
01              SCHEDULE WAKEUP                                                                                                  (1)

            55         10 AC     D0  0011   119 	MOVL	WKREPTIM(AP),R5		;GET ADDRESS OF DELTA REPEAT TIME
                          33     13  0015   120 	BEQL	10$			;IF EQL NONE SPECIFIED
            50            0C     3C  0017   121 	MOVZWL	#SS$_ACCVIO,R0		;ASSUME ACCESS VIOLATION
                                     001A   122 	IFNORD	#8,(R5),20$		;CAN DELTA REPEAT TIME BE READ?
            50       0184 8F     3C  0020   123 	MOVZWL	#SS$_IVTIME,R0		;ASSUME INVALID REPEAT TIME
            55            65     7D  0025   124 	MOVQ	(R5),R5			;GET REPEAT TIME
                          20     13  0028   125 	BEQL	10$			;IF EQL NONE SPECIFIED
                          35     14  002A   126 	BGTR	20$			;IF GTRU INVALID REPEAT TIME
            58            06     9A  002C   127 	MOVZBL	#TQE$C_WKREPT,R8	;SET REPEAT WAKEUP REQUEST
            56            56     CE  002F   128 	MNEGL	R6,R6			;NEGATE REPEAT TIME
            55            55     CE  0032   129 	MNEGL	R5,R5			;
            56            00     D9  0035   130 	SBWC	#0,R6			;
                          10     12  0038   131 	BNEQ	10$			;IF NEQ REPEAT TIME GREATER THAN 10MS
            55   000186A0 8F     D1  003A   132 	CMPL	#10*1000*10,R5		;REPEAT TIME GREATER THAN 10MS?
                          07     1B  0041   133 	BLEQU	10$			;IF LEQU YES
            55   000186A0 8F     D0  0043   134 	MOVL	#10*1000*10,R5		;SET REPEAT TIME TO 10MS
            57         0C AC     D0  004A   135 10$:	MOVL	WKDAYTIM(AP),R7		;GET ADDRESS OF DELTA EXPIRATION TIME
            54       0000'CF     D0  004E   136 	MOVL	W^SCH$GL_CURPCB,R4	;GET CURRENT PROCESS PCB ADDRESS
                          0085   30  0053   137 	BSBW	BUILDTQE		;CHECK ACCESSIBILITY OF DAY TIME
                       3C A4     B5  0056   138 	TSTW	PCB$W_ASTCNT(R4)	;AST QUEUE ENTRY QUOTA EXCEEDED?
                          61     15  0059   139 	BLEQ	50$			;IF LEQ YES
                          9E     16  005B   140 	JSB	@(SP)+			;ALLOCATE AND FILL IN TIME QUEUE ENTRY
                       3C A4     B7  005D   141 	DECW	PCB$W_ASTCNT(R4)	;UPDATE AVAILABLE AST QUEUE ENTRIES
                                 05  0060   142 	RSB				;
                                 04  0061   143 20$:	RET				;
SYSSCHEVT       - SYSTEM SERVICES TO SCHEDULE EVENTS             21-AUG-1978 20:41:42   VAX-11 MACRO X0.3-11               Page   5
01              SET TIMER                                                                                                        (1)

                                     0062   145 	.SBTTL	SET TIMER
                                     0062   146 ;+
                                     0062   147 ; EXE$SETIMR - SET TIMER
                                     0062   148 ;
                                     0062   149 ; THIS SERVICE PROVIDES THE CAPABILITY TO SCHEDULE THE SETTING OF AN EVENT
                                     0062   150 ; FLAG AND DECLARATION OF AN AST TO OCCUR AT A SPECIFIED TIME.
                                     0062   151 ;
                                     0062   152 ; INPUTS:
                                     0062   153 ;
                                     0062   154 ;	EFN(AP) = EVENT FLAG NUMBER.
                                     0062   155 ;	TMDAYTIM(AP) = ADDRESS OF DELTA TIME TO EXPIRATION.
                                     0062   156 ;	ASTADR(AP) = ADDRESS OF AST ROUTINE.
                                     0062   157 ;	REQIDT(AP) = REQUEST IDENTIFICATION.
                                     0062   158 ;
                                     0062   159 ;	R4 = CURRENT PROCESS PCB ADDRESS.
                                     0062   160 ;
                                     0062   161 ; OUTPUTS:
                                     0062   162 ;
                                     0062   163 ;	R0 LOW BIT CLEAR INDICATES FAILURE TO SET TIMER.
                                     0062   164 ;
                                     0062   165 ;		R0 = SS$_ACCVIO - EXPIRATION TIME CANNOT BE READ BY CALLING
                                     0062   166 ;			ACCESS MODE.
                                     0062   167 ;
                                     0062   168 ;		R0 = SS$_EXQUOTA - INSUFFICIENT AST OR TIMER QUOTA REMAINING
                                     0062   169 ;			AND IMPLICIT RESOURCE WAIT IS NOT ENABLED.
                                     0062   170 ;
                                     0062   171 ;		R0 = SS$_ILLEFC - ILLEGAL EVENT FLAG CLUSTER SPECIFIED.
                                     0062   172 ;
                                     0062   173 ;		R0 = SS$_INSFMEM - SUFFICIENT SYSTEM DYNAMIC MEMORY DOES NOT
                                     0062   174 ;			EXIST TO ALLOCATE TIME QUEUE ENTRY AND IMPLICIT
                                     0062   175 ;			RESOURCE WAIT IS NOT ENABLED.
                                     0062   176 ;
                                     0062   177 ;		R0 = SS$_UNASEFC - SPECIFIED EVENT FLAG CLUSTER IS NOT
                                     0062   178 ;			ASSIGNED.
                                     0062   179 ;
                                     0062   180 ;	R0 LOW BIT SET INDICATES SUCCESSFUL COMPLETION.
                                     0062   181 ;
                                     0062   182 ;		R0 = SS$_NORMAL - NORMAL COMPLETION.
                                     0062   183 ;-
                                     0062   184  
                               0FFC' 0062   185 	.ENTRY	EXE$SETIMR,^M<R2,R3,R4,R5,R6,R7,R8,R9,R10,R11>
            57         08 AC     D0  0064   186 	MOVL	TMDAYTIM(AP),R7		;GET ADDRESS OF DELTA EXPIRATION TIME
            58            00     9A  0068   187 	MOVZBL	#TQE$C_TMSNGL,R8	;SET SINGLE SHOT TIMER REQUEST
            59         60 A4     D0  006B   188 	MOVL	PCB$L_PID(R4),R9	;SET TARGET PROCESS ID
            53         04 AC     9A  006F   189 	MOVZBL	EFN(AP),R3		;GET EVENT FLAG NUMBER
                          53     DD  0073   190 	PUSHL	R3			;SAVE EVENT FLAG NUMBER
                          FF88'  30  0075   191 	BSBW	SCH$CLREF		;CLEAR SPECIFIED EVENT FLAG
            44            50     E9  0078   192 	BLBC	R0,60$			;IF LBC INVALID EVENT FLAG
                          5E     10  007B   193 	BSBB	BUILDTQE		;CHECK ACCESSIBILITY OF DAY TIME
            5B         10 AC     D0  007D   194 	MOVL	REQIDT(AP),R11		;GET REQUEST IDENTIFICATION
            5A         0C AC     D0  0081   195 	MOVL	ASTADR(AP),R10		;GET ADDRESS OF AST ROUTINE
                          05     13  0085   196 	BEQL	30$			;IF EQL NONE SPECIFIED
                       3C A4     B5  0087   197 	TSTW	PCB$W_ASTCNT(R4)	;AST QUEUE ENTRY QUOTA EXCEEDED?
                          30     15  008A   198 	BLEQ	50$			;IF LEQ YES
                                     008C   199 30$:	SETIPL	#IPL$_SYNCH		;RAISE IPL TO SYNCH LEVEL
                       4A A4     B5  008F   200 	TSTW	PCB$W_TQCNT(R4)		;ANY TIMER QUOTA REMAINING?
                          2F     13  0092   201 	BEQL	70$			;IF EQL NO
SYSSCHEVT       - SYSTEM SERVICES TO SCHEDULE EVENTS             21-AUG-1978 20:41:42   VAX-11 MACRO X0.3-11               Page   6
01              SET TIMER                                                                                                        (1)

                                     0094   202 	SETIPL	#IPL$_ASTDEL		;LOWER IPL TO ASTDEL LEVEL
                          9E     16  0097   203 	JSB	@(SP)+			;ALLOCATE AND FILL IN TIME QUEUE ENTRY
                       4A A4     B7  0099   204 	DECW	PCB$W_TQCNT(R4)		;UPDATE AVAILABLE TIME QUEUE ENTRIES
                          52     DC  009C   205 	MOVPSL	R2			;READ CURRENT PSL
            02            16     EF  009E   206 	EXTZV	#PSL$V_PRVMOD,#PSL$S_PRVMOD,R2,TQE$B_RMOD(R5) ;INSERT REQUEST ACCESS MODE
         28 A5            52         00A1       
         10 A5            5A     D0  00A4   207 	MOVL	R10,TQE$L_AST(R5)	;INSERT ADDRESS OF AST ROUTINE
                          08     13  00A8   208 	BEQL	40$			;IF EQL NONE SPECIFIED
                       3C A4     B7  00AA   209 	DECW	PCB$W_ASTCNT(R4)	;UPDATE AVAILABLE AST QUEUE ENTRIES
         28 A5         40 8F     88  00AD   210 	BISB	#ACB$M_QUOTA,TQE$B_RMOD(R5) ;SET AST ACCOUNTING FLAG
         14 A5            5B     D0  00B2   211 40$:	MOVL	R11,TQE$L_ASTPRM(R5)	;INSERT AST PARAMETER/REQUEST IDENTIFICATION
         29 A5         04 AE     90  00B6   212 	MOVB	4(SP),TQE$B_EFN(R5)	;SET EVENT FLAG NUMBER
                                 05  00BB   213 	RSB				;
            50            1C     3C  00BC   214 50$:	MOVZWL	#SS$_EXQUOTA,R0		;SET QUOTA EXCEEDED
                                     00BF   215 60$:	SETIPL	#0			;ALLOW INTERRUPTS
                                 04  00C2   216 	RET				;
         28 A4            0A     E0  00C3   217 70$:	BBS	#PCB$V_SSRWAIT,PCB$L_STS(R4),50$ ;IF SET, IMPLIED WAIT DISABLED
                          F4         00C7       
         4C A4            01     9A  00C8   218 	MOVZBL	#RSN$_ASTWAIT,PCB$L_EFWM(R4) ;SET WAIT STATE RESOURCE NUMBER
            5C         08 AD     D0  00CC   219 	MOVL	8(FP),AP		;RESTORE ORIGINAL ARGUMENT POINTER
            5E            5D     D0  00D0   220 	MOVL	FP,SP			;TRIM STACK BACK TO CHANGE MODE DISPATCH
            52       0000'CF     7E  00D3   221 	MOVAQ	W^SCH$GQ_MWAIT,R2	;SET ADDRESS OF WAIT QUEUE LISTHEAD
                          FF25'  31  00D8   222 	BRW	SCH$WAIT		;WAIT PROCESS IN ORIGINAL ACCESS MODE
                                     00DB   223 	.DSABL	LSB
SYSSCHEVT       - SYSTEM SERVICES TO SCHEDULE EVENTS             21-AUG-1978 20:41:42   VAX-11 MACRO X0.3-11               Page   7
01              BUILD PROTOTYPE TIME QUEUE ENTRY                                                                                 (1)

                                     00DB   225 	.SBTTL	BUILD PROTOTYPE TIME QUEUE ENTRY
                                     00DB   226 ;
                                     00DB   227 ; SUBROUTINE TO CHECK ARGUMENTS, ALLOCATE TIME QUEUE ENTRY, AND FILL IN
                                     00DB   228 ; PROTOTYPE TIME QUEUE ENTRY.
                                     00DB   229 ;
                                     00DB   230  
                                     00DB   231 BUILDTQE:				;BUILD TIME QUEUE ENTRY
            50            0C     3C  00DB   232 	MOVZWL	#SS$_ACCVIO,R0		;ASSUME ACCESS VIOLATION
                                     00DE   233 	IFNORD	#8,(R7),40$		;CAN EXPIRATION TIME BE READ?
                                     00E4   234 	SETIPL	#IPL$_ASTDEL		;RAISE TO AST DELIVERY LEVEL
                          9E     16  00E7   235 	JSB	@(SP)+			;CHECK QUOTAS
                          FF14'  30  00E9   236 	BSBW	EXE$ALLOCTQE		;ALLOCATE TIME QUEUE ENTRY
            60            50     E9  00EC   237 	BLBC	R0,40$			;IF LBC ALLOCATION FAILURE
         20 A2            55     7D  00EF   238 	MOVQ	R5,TQE$Q_DELTA(R2)	;INSERT REPEAT TIME
         0B A2            58     90  00F3   239 	MOVB	R8,TQE$B_RQTYPE(R2)	;SET REQUEST TYPE
         0C A2            59     D0  00F7   240 	MOVL	R9,TQE$L_PID(R2)	;INSERT TARGET PROCESS ID
         2C A2         60 A4     D0  00FB   241 	MOVL	PCB$L_PID(R4),TQE$L_RQPID(R2) ;INSERT REQUESTER PROCESS ID
            50            67     7D  0100   242 	MOVQ	(R7),R0			;MAKE SURE EXPIRATION TIME IS IN MEMORY
                                     0103   243  
                                     0103   244 	ASSUME	IPL$_SYNCH EQ IPL$_TIMER
                                     0103   245  
                                     0103   246 	SETIPL	#IPL$_SYNCH		;SYNCHRONIZE ACCESS TO SYSTEM DATA BASE
            58       0000'CF     7D  0106   247 	MOVQ	W^EXE$GQ_SYSTIME,R8	;GET CURRENT ABSOLUTE TIME
            50            50     7D  010B   248 	MOVQ	R0,R0			;GET EXPIRATION TIME
                          0F     18  010E   249 	BGEQ	10$			;IF GEQ ALREADY ABSOLUTE TIME
            51            51     CE  0110   250 	MNEGL	R1,R1			;NEGATE EXPIRATION TIME
            50            50     CE  0113   251 	MNEGL	R0,R0			;
            51            00     D9  0116   252 	SBWC	#0,R1			;
            50            58     C0  0119   253 	ADDL	R8,R0			;CALCULATE REAL EXPIRATION TIME
            51            59     D8  011C   254 	ADWC	R9,R1			;
         0B A2            06     91  011F   255 10$:	CMPB	#TQE$C_WKREPT,TQE$B_RQTYPE(R2) ;REPEAT WAKEUP REQUEST?
                          12     12  0123   256 	BNEQ	20$			;IF NEQ NO
            55            50     C0  0125   257 	ADDL	R0,R5			;CALCULATE NEXT EXPIRATION TIME
            56            51     D8  0128   258 	ADWC	R1,R6			;
            56            59     D1  012B   259 	CMPL	R9,R6			;CURRENT TIME AFTER NEXT TIME?
                          07     1F  012E   260 	BLSSU	20$			;IF LSSU NO
                          12     1A  0130   261 	BGTRU	30$			;IF GTRU YES
            55            58     D1  0132   262 	CMPL	R8,R5			;CURRENT TIME AFTER NEXT TIME?
                          0D     1A  0135   263 	BGTRU	30$			;IF GTRU YES
            55            52     D0  0137   264 20$:	MOVL	R2,R5			;COPY ADDRESS OF TIME QUEUE ENTRY
                          9E     16  013A   265 	JSB	@(SP)+			;FILL IN REQUEST DEPENDENT PARAMETERS
                          FEC1'  30  013C   266 	BSBW	EXE$INSTIMQ		;INSERT ENTRY IN TIME QUEUE
            50            01     3C  013F   267 	MOVZWL	#SS$_NORMAL,R0		;SET NORMAL COMPLETION STATUS
                          0B     11  0142   268 	BRB	40$			;
            50            52     D0  0144   269 30$:	MOVL	R2,R0			;SET ADDRESS OF TIME QUEUE ENTRY
                          FEB6'  30  0147   270 	BSBW	EXE$DEANONPAGED		;DEALLOCATE TIME QUEUE ENTRY
            50       0184 8F     3C  014A   271 	MOVZWL	#SS$_IVTIME,R0		;SET INVALID TIME COMPLETION STATUS
                                     014F   272 40$:	SETIPL	#0			;ALLOW INTERRUPTS
                                 04  0152   273 	RET				;
                                     0153   274  
                                     0153   275 	.END
SYSSCHEVT       - SYSTEM SERVICES TO SCHEDULE EVENTS             21-AUG-1978 20:41:42   VAX-11 MACRO X0.3-11               Page   8
SYMBOL TABLE                                                                                                                     (1)

ACB$B_RMOD       0000000B            PCB$L_SQFL       00000000            PR$_ISP        = 00000004            
ACB$B_TYPE       0000000A            PCB$L_STS        00000028            PR$_KSP        = 00000000            
ACB$L_AST        00000010            PCB$L_UIC        00000020            PR$_MAPEN      = 00000038            
ACB$L_ASTPRM     00000014            PCB$L_WSSWP      00000024            PR$_NICR       = 00000019            
ACB$L_ASTQBL     00000004            PCB$L_WTIME      0000002C            PR$_P0BR       = 00000008            
ACB$L_ASTQFL     00000000            PCB$T_LNAME      0000006C            PR$_P0LR       = 00000009            
ACB$L_KAST       00000018            PCB$V_ASTPEN   = 00000011            PR$_P1BR       = 0000000A            
ACB$L_PID        0000000C            PCB$V_BATCH    = 0000000E            PR$_P1LR       = 0000000B            
ACB$M_QUOTA    = 00000040            PCB$V_DELPEN   = 00000001            PR$_PCBB       = 00000010            
ACB$S_MODE     = 00000002            PCB$V_FORCPEN  = 00000002            PR$_PME        = 0000003D            
ACB$V_KAST     = 00000007            PCB$V_HIBER    = 00000013            PR$_RXCS       = 00000020            
ACB$V_MODE     = 00000000            PCB$V_INQUAN   = 00000003            PR$_RXDB       = 00000021            
ACB$V_QUOTA    = 00000006            PCB$V_LOGIN    = 00000014            PR$_SBIER      = 00000034            
ACB$W_SIZE       00000008            PCB$V_NETWRK   = 00000015            PR$_SBIFS      = 00000030            
ASTADR         = 0000000C            PCB$V_NOACNT   = 0000000F            PR$_SBIMT      = 00000033            
BIT...         = 00000003            PCB$V_NODELET  = 00000017            PR$_SBIQC      = 00000036            
BUILDTQE         000000DB R     01   PCB$V_PHDRES   = 00000012            PR$_SBIS       = 00000031            
EFN            = 00000004            PCB$V_PSWAPM   = 00000004            PR$_SBISC      = 00000032            
EXE$ALLOCTQE     ********   X   01   PCB$V_PWRAST   = 00000016            PR$_SBITA      = 00000035            
EXE$DEANONPAGED  ********   X   01   PCB$V_RES      = 00000000            PR$_SBR        = 0000000C            
EXE$GQ_SYSTIME   ********   X   01   PCB$V_RESPEN   = 00000005            PR$_SCBB       = 00000011            
EXE$INSTIMQ      ********   X   01   PCB$V_SSFEXC   = 00000006            PR$_SID        = 0000003E            
EXE$NAMPID       ********   X   01   PCB$V_SSFEXCE  = 00000007            PR$_SIRR       = 00000014            
EXE$SCHDWK       00000000 RG    01   PCB$V_SSFEXCS  = 00000008            PR$_SISR       = 00000015            
EXE$SETIMR       00000062 RG    01   PCB$V_SSFEXCU  = 00000009            PR$_SLR        = 0000000D            
GBL...         = 00000000            PCB$V_SSRWAIT  = 0000000A            PR$_SSP        = 00000002            
IPL$_ASTDEL    = 00000002            PCB$V_SUSPEN   = 0000000B            PR$_TBIA       = 00000039            
IPL$_HWCLK     = 00000018            PCB$V_SWPVBN   = 00000010            PR$_TBIS       = 0000003A            
IPL$_IOPOST    = 00000004            PCB$V_WAKEPEN  = 0000000C            PR$_TODR       = 0000001B            
IPL$_MAILBOX   = 0000000B            PCB$V_WALL     = 0000000D            PR$_TXCS       = 00000022            
IPL$_POWER     = 0000001F            PCB$W_APTCNT     00000034            PR$_TXDB       = 00000023            
IPL$_QUEUEAST  = 00000006            PCB$W_ASTCNT     0000003C            PR$_USP        = 00000003            
IPL$_SCHED     = 00000003            PCB$W_BIOCNT     0000003E            PR$_WCSA       = 0000002C            
IPL$_SYNCH     = 00000007            PCB$W_BIOLM      00000040            PR$_WCSD       = 0000002D            
IPL$_TIMER     = 00000007            PCB$W_BYTCNT     00000042            PSL$C_EXEC     = 00000001            
LOGNAM         = 00000008            PCB$W_BYTLM      00000068            PSL$C_KERNEL   = 00000000            
PCB$B_ASTACT     0000000C            PCB$W_DIOCNT     00000044            PSL$C_SUPER    = 00000002            
PCB$B_ASTEN      0000000D            PCB$W_DIOLM      00000046            PSL$C_USER     = 00000003            
PCB$B_PRI        0000000B            PCB$W_FILCNT     00000048            PSL$M_CM       = 80000000            
PCB$B_PRIB       00000033            PCB$W_GPGCNT     00000038            PSL$M_CURMOD   = 03000000            
PCB$B_TYPE       0000000A            PCB$W_GRP        00000022            PSL$M_DV       = 00000080            
PCB$B_WEFC       00000032            PCB$W_MEM        00000020            PSL$M_FPD      = 08000000            
PCB$C_LENGTH     0000007C            PCB$W_MTXCNT     0000000E            PSL$M_FU       = 00000040            
PCB$K_LENGTH     0000007C            PCB$W_PPGCNT     0000003A            PSL$M_IPL      = 001F0000            
PCB$L_ASTQBL     00000014            PCB$W_PRCCNT     0000006A            PSL$M_IS       = 04000000            
PCB$L_ASTQFL     00000010            PCB$W_SIZE       00000008            PSL$M_IV       = 00000020            
PCB$L_EFC2P      00000058            PCB$W_STATE      00000030            PSL$M_PRVMOD   = 00C00000            
PCB$L_EFC3P      0000005C            PCB$W_TMBU       00000036            PSL$M_SAFBITS  = 000037FF            
PCB$L_EFCS       00000050            PCB$W_TQCNT      0000004A            PSL$M_TBIT     = 00000010            
PCB$L_EFCU       00000054            PIDADR         = 00000004            PSL$M_TP       = 40000000            
PCB$L_EFWM       0000004C            PR$_ACCR       = 00000029            PSL$S_CURMOD   = 00000002            
PCB$L_OWNER      0000001C            PR$_ACCS       = 00000028            PSL$S_IPL      = 00000005            
PCB$L_PHD        00000064            PR$_ASTLVL     = 00000013            PSL$S_PRVMOD   = 00000002            
PCB$L_PHYPCB     00000018            PR$_ESP        = 00000001            PSL$V_CM       = 0000001F            
PCB$L_PID        00000060            PR$_ICCS       = 00000018            PSL$V_CURMOD   = 00000018            
PCB$L_PQB        0000004C            PR$_ICR        = 0000001A            PSL$V_DV       = 00000007            
PCB$L_SQBL       00000004            PR$_IPL        = 00000012            PSL$V_FPD      = 0000001B            
SYSSCHEVT       - SYSTEM SERVICES TO SCHEDULE EVENTS             21-AUG-1978 20:41:42   VAX-11 MACRO X0.3-11               Page   9
SYMBOL TABLE                                                                                                                     (1)

PSL$V_FU       = 00000006            SS$_DEVACTIVE  = 000002C4            SS$_INSFWSL    = 0000011C            
PSL$V_IPL      = 00000010            SS$_DEVALLOC   = 00000840            SS$_INTDIV     = 00000484            
PSL$V_IS       = 0000001A            SS$_DEVALRALLOC= 00000641            SS$_INTOVF     = 0000047C            
PSL$V_IV       = 00000005            SS$_DEVASSIGN  = 00000848            SS$_IVADDR     = 00000134            
PSL$V_PRVMOD   = 00000016            SS$_DEVFOREIGN = 00000064            SS$_IVCHAN     = 0000013C            
PSL$V_TBIT     = 00000004            SS$_DEVICEFULL = 00000850            SS$_IVCHNLSEC  = 0000026C            
PSL$V_TP       = 0000001E            SS$_DEVMOUNT   = 0000006C            SS$_IVDEVNAM   = 00000144            
REQIDT         = 00000010            SS$_DEVNOTALLOC= 00000858            SS$_IVGSDNAM   = 0000014C            
RSN$_ASTWAIT   = 00000001            SS$_DEVNOTMBX  = 00000074            SS$_IVLOGNAM   = 00000154            
RSN$_BRKTHRU   = 00000006            SS$_DEVNOTMOUNT= 0000007C            SS$_IVLOGTAB   = 0000015C            
RSN$_IACLOCK   = 00000007            SS$_DEVOFFLINE = 00000084            SS$_IVPROTECT  = 000002F4            
RSN$_MAILBOX   = 00000002            SS$_DIRFULL    = 00000860            SS$_IVQUOTAL   = 00000164            
RSN$_NPDYNMEM  = 00000003            SS$_DRVERR     = 0000008C            SS$_IVSECFLG   = 0000016C            
RSN$_PGDYNMEM  = 00000005            SS$_DUPFILENAME= 00000868            SS$_IVSECIDCTL = 000002E4            
RSN$_PGFILE    = 00000004            SS$_DUPLNAM    = 00000094            SS$_IVSSRQ     = 00000174            
SCH$CLREF        ********   X   01   SS$_ENDOFFILE  = 00000870            SS$_IVSTSFLG   = 0000017C            
SCH$GL_CURPCB    ********   X   01   SS$_ENDOFTAPE  = 00000878            SS$_IVTIME     = 00000184            
SCH$GQ_MWAIT     ********   X   01   SS$_ENDOFUSRLBL= 00000970            SS$_LCKPAGFUL  = 000000D4            
SCH$WAIT         ********   X   01   SS$_EXQUOTA    = 0000001C            SS$_LENVIO     = 0000018C            
SS$_ABORT      = 0000002C            SS$_EXTIDXFILE = 00000880            SS$_LKWSETFUL  = 00000194            
SS$_ACCONFLICT = 00000800            SS$_FCPREADERR = 00000888            SS$_MBFULL     = 000008D8            
SS$_ACCVIO     = 0000000C            SS$_FCPREPSTN  = 00000988            SS$_MBTOOSML   = 0000019C            
SS$_ACPVAFUL   = 000002FC            SS$_FCPREWNDERR= 00000890            SS$_MCHECK     = 000002BC            
SS$_ARTRES     = 00000474            SS$_FCPSPACERR = 00000898            SS$_MEDOFL     = 000001A4            
SS$_ASTFLT     = 0000040C            SS$_FCPWRITERR = 000008A0            SS$_MSGNOTFND  = 00000621            
SS$_BADATTRIB  = 00000034            SS$_FILACCERR  = 0000009C            SS$_MTLBLLONG  = 00000304            
SS$_BADCHKSUM  = 00000808            SS$_FILALRACC  = 000000A4            SS$_MUSTCLOSEFL= 00000948            
SS$_BADESCAPE  = 0000003C            SS$_FILELOCKED = 000008A8            SS$_NOAQB      = 00000314            
SS$_BADFILEHDR = 00000810            SS$_FILENUMCHK = 000008B0            SS$_NODATA     = 000001AC            
SS$_BADFILENAME= 00000818            SS$_FILESEQCHK = 000008B8            SS$_NOHANDLER  = 000008F8            
SS$_BADFILEVER = 00000820            SS$_FILESTRUCT = 000008C0            SS$_NOHOMEBLK  = 000008E0            
SS$_BADIMGHDR  = 00000044            SS$_FILNOTACC  = 000000AC            SS$_NOIOCHAN   = 000001B4            
SS$_BADIRECTORY= 00000828            SS$_FILNOTCNTG = 000002AC            SS$_NOLINKS    = 0000027C            
SS$_BADPARAM   = 00000014            SS$_FILNOTEXP  = 000000B4            SS$_NOLOGNAM   = 000001BC            
SS$_BADSTACK   = 000002B4            SS$_FLTDIV     = 00000494            SS$_NOMBX      = 00000274            
SS$_BEGOFFILE  = 00000938            SS$_FLTOVF     = 0000048C            SS$_NOMOREFILES= 00000930            
SS$_BLOCKCNTERR= 00000940            SS$_FLTUND     = 0000049C            SS$_NONEXDRV   = 000001C4            
SS$_BREAK      = 00000414            SS$_FORMAT     = 000000BC            SS$_NONEXPR    = 000008E8            
SS$_BUFBYTALI  = 0000030C            SS$_GPTFULL    = 000000C4            SS$_NONLOCAL   = 000008F0            
SS$_BUFFEROVF  = 00000601            SS$_GSDFULL    = 000000CC            SS$_NOPRIV     = 00000024            
SS$_BUGCHECK   = 000002A4            SS$_HANGUP     = 000002CC            SS$_NORMAL     = 00000001            
SS$_CANCEL     = 00000830            SS$_HEADERFULL = 000008C8            SS$_NOSIGNAL   = 00000900            
SS$_CHANINTLK  = 0000004C            SS$_IDXFILEFULL= 000008D0            SS$_NOSOLICIT  = 00000284            
SS$_CLIFRCEXT  = 00000980            SS$_ILLBLKNUM  = 000000DC            SS$_NOSUCHDEV  = 00000908            
SS$_CMODSUPR   = 0000041C            SS$_ILLCNTRFUNC= 000000E4            SS$_NOSUCHFILE = 00000910            
SS$_CMODUSER   = 00000424            SS$_ILLEFC     = 000000EC            SS$_NOSUCHNODE = 0000028C            
SS$_COMPAT     = 0000042C            SS$_ILLIOFUNC  = 000000F4            SS$_NOSUCHSEC  = 00000978            
SS$_CONTINUE   = 00000001            SS$_ILLLBLAST  = 00000968            SS$_NOTAPEOP   = 00000264            
SS$_CONTROLC   = 00000651            SS$_ILLPAGCNT  = 000000FC            SS$_NOTFILEDEV = 000001CC            
SS$_CONTROLO   = 00000609            SS$_ILLSEQOP   = 000002DC            SS$_NOTINTBLSZ = 000001D4            
SS$_CONTROLY   = 00000611            SS$_ILLSER     = 00000104            SS$_NOTLABELMT = 000001DC            
SS$_CREATED    = 00000619            SS$_ILLUSRLBLRD= 00000958            SS$_NOTMODIFIED= 00000659            
SS$_CTRLERR    = 00000054            SS$_ILLUSRLBLWT= 00000960            SS$_NOTNETDEV  = 000002EC            
SS$_DATACHECK  = 0000005C            SS$_INCVOLLABEL= 0000010C            SS$_NOTRAN     = 00000629            
SS$_DATAOVERUN = 00000838            SS$_INSFARG    = 00000114            SS$_NOTSQDEV   = 000001E4            
SS$_DEBUG      = 0000046C            SS$_INSFMEM    = 00000124            SS$_OPCCUS     = 00000434            
SS$_DECOVF     = 000004A4            SS$_INSFRAME   = 0000012C            SS$_OPCDEC     = 0000043C            
SYSSCHEVT       - SYSTEM SERVICES TO SCHEDULE EVENTS             21-AUG-1978 20:41:42   VAX-11 MACRO X0.3-11               Page  10
SYMBOL TABLE                                                                                                                     (1)

SS$_OPINCOMPL  = 000002D4            TQE$M_REPEAT   = 00000004            
SS$_PAGOWNVIO  = 000001EC            TQE$Q_DELTA      00000020            
SS$_PAGRDERR   = 00000444            TQE$Q_TIME       00000018            
SS$_PARITY     = 000001F4            TQE$V_REPEAT   = 00000002            
SS$_PARTESCAPE = 000001FC            TQE$W_SIZE       00000008            
SS$_PFMBSY     = 00000204            WKDAYTIM       = 0000000C            
SS$_PLHLDR     = 00000404            WKREPTIM       = 00000010            
SS$_PSTFULL    = 0000020C            
SS$_RADRMOD    = 0000044C            
SS$_REJECT     = 00000294            
SS$_REMOTE     = 00000649            
SS$_RESIGNAL   = 00000918            
SS$_RESULTOVF  = 00000214            
SS$_ROPRAND    = 00000454            
SS$_SECTBLFUL  = 0000021C            
SS$_SSFAIL     = 0000045C            
SS$_SUBRNG     = 000004AC            
SS$_SUPERSEDE  = 00000631            
SS$_TAPEPOSLOST= 00000224            
SS$_TBIT       = 00000464            
SS$_TIMEOUT    = 0000022C            
SS$_TOOMANYVER = 00000990            
SS$_TOOMUCHDATA= 0000029C            
SS$_UNASEFC    = 00000234            
SS$_UNSAFE     = 0000023C            
SS$_UNWIND     = 00000920            
SS$_UNWINDING  = 00000928            
SS$_VASFULL    = 00000244            
SS$_VECINUSE   = 0000024C            
SS$_VOLINV     = 00000254            
SS$_WAITUSRLBL = 00000950            
SS$_WASCLR     = 00000001            
SS$_WASECC     = 00000639            
SS$_WASSET     = 00000009            
SS$_WRITLCK    = 0000025C            
SS$_WRONGACP   = 0000031C            
TMDAYTIM       = 00000008            
TQE$B_EFN        00000029            
TQE$B_RMOD       00000028            
TQE$B_RQTYPE     0000000B            
TQE$B_TYPE       0000000A            
TQE$C_LENGTH     00000030            
TQE$C_SSREPT   = 00000005            
TQE$C_SSSNGL   = 00000001            
TQE$C_TMSNGL   = 00000000            
TQE$C_WKREPT   = 00000006            
TQE$C_WKSNGL   = 00000002            
TQE$K_LENGTH     00000030            
TQE$L_AST        00000010            
TQE$L_ASTPRM     00000014            
TQE$L_FPC        0000000C            
TQE$L_FR3        00000010            
TQE$L_FR4        00000014            
TQE$L_PID        0000000C            
TQE$L_RQPID      0000002C            
TQE$L_TQBL       00000004            
TQE$L_TQFL       00000000            
SYSSCHEVT       - SYSTEM SERVICES TO SCHEDULE EVENTS             21-AUG-1978 20:41:42   VAX-11 MACRO X0.3-11               Page  11
PROGRAM SECTION SYNOPSIS                                                                                                         (1)



PROGRAM SECTION SYNOPSIS

.  ABS  .        00000000      00     NOPIC   USR   CON   ABS   LCL NOSHR NOEXE NORD  NOWRT BYTE  
. BLANK .        00000153      01     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
$ABS$            0000007C      02     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  


THERE WERE NO ERRORS OR WARNINGS.
13746. BYTES LEFT IN FREE MEMORY POOL.
3678. BYTES OF RECLAIMED MEMORY.
OBJ$:SYSSCHEVT,LIS$:SYSSCHEVT/-SP=EXECML$/ML,SRC$:SYSSCHEVT
7 MLB DIR RDS - 653 GETS TO DEFINE 20 MACROS. 48 INTER. FILE WRITES. 
