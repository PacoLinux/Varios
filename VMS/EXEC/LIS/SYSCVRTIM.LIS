SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page   0
TABLE OF CONTENTS   

   (1)     192  CONVERT BINARY TIME TO ASCII STRING
   (1)     287  CONVERT ASCII STRING TO BINARY TIME
   (1)     519  CONVERT BINARY TIME TO NUMERIC TIME
SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page   1
01                                                                                                                               (1)

                                     0000     1 	.TITLE	SYSCVRTIM - SYSTEM SERVICES TO CONVERT TIME
                                     0000     2 	.IDENT	/01/
                                     0000     3  
                                     0000     4 ;
                                     0000     5 ; COPYRIGHT (C) 1976
                                     0000     6 ; DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
                                     0000     7 ;
                                     0000     8 ; THIS SOFTWARE IS FURNISHED UNDER  A LICENSE FOR USE ONLY  ON  A
                                     0000     9 ; SINGLE COMPUTER SYSTEM AND MAY BE  COPIED ONLY WITH  THE INCLU-
                                     0000    10 ; SION OF  THE  ABOVE  COPYRIGHT NOTICE.  THIS SOFTWARE,  OR  ANY
                                     0000    11 ; OTHER COPIES THEREOF, MAY NOT BE  PROVIDED  OR  OTHERWISE  MADE
                                     0000    12 ; AVAILABLE TO ANY OTHER PERSON EXCEPT  FOR  USE  ON  SUCH SYSTEM
                                     0000    13 ; AND TO  ONE WHO AGREES  TO  THESE LICENSE  TERMS.  TITLE TO AND
                                     0000    14 ; OWNERSHIP OF THE SOFTWARE SHALL AT ALL TIMES REMAIN IN DEC.
                                     0000    15 ;
                                     0000    16 ; THE INFORMATION IN THIS SOFTWARE  IS  SUBJECT TO CHANGE WITHOUT
                                     0000    17 ; NOTICE AND SHOULD NOT BE CONSTRUED  AS  A COMMITMENT BY DIGITAL
                                     0000    18 ; EQUIPMENT CORPORATION.
                                     0000    19 ;
                                     0000    20 ; DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF ITS
                                     0000    21 ; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
                                     0000    22 ;
                                     0000    23 ; D. N. CUTLER 6-JAN-76
                                     0000    24 ;
                                     0000    25 ; SYSTEM SERVICES TO CONVERT TIME
                                     0000    26 ;
                                     0000    27 ;	CONVERT BINARY TIME TO ASCII STRING
                                     0000    28 ;	CONVERT ASCII STRING TO BINARY TIME
                                     0000    29 ;	CONVERT BINARY TIME TO NUMERIC FORMAT
                                     0000    30 ;
                                     0000    31 ;	THE CONVERSION ALGORITHMS USED HEREIN WERE DEVELOPED BY P. CONKLIN,
                                     0000    32 ;	M. SPIER, AND D. ROSENBERY ON THE PDP-10.
                                     0000    33 ;
                                     0000    34 ; MODIFIED BY:
                                     0000    35 ;
                                     0000    36 ; 01    H. M. LEVY      2-MAR-1977  	ADD OUTPUT LENGTH TO ASCTIM
                                     0000    37 ;
                                     0000    38 ; MACRO LIBRARY CALLS
                                     0000    39 ;
                                     0000    40  
                                     0000    41 	$SSDEF				;DEFINE SYSTEM STATUS VALUES
                                     0000    42  
                                     0000    43 ;
                                     0000    44 ; LOCAL SYMBOLS
                                     0000    45 ;
                                     0000    46 ; ARGUMENT LIST OFFSET DEFINTIONS FOR CONVERT BINARY TIME TO ASCII STRING
                                     0000    47 ;
                                     0000    48  
                           00000004  0000    49 ATIMLEN=4				;ADDRESS OF WORD TO STORE LENGTH
                           00000008  0000    50 ATIMBUF=8				;ADDRESS OF OUTPUT BUFFER DESCRIPTOR
                           0000000C  0000    51 ATIMADR=12				;ADDRESS OF 64-BIT ABSOLUTE OR DELTA TIME
                           00000010  0000    52 ACVTFLG=16				;CONVERSION INDICATOR
                                     0000    53  
                                     0000    54 ;
                                     0000    55 ; ARGUMENT LIST OFFSET DEFINITIONS FOR CONVERT ASCII STRING TO BINARY TIME
                                     0000    56 ;
                                     0000    57  
SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page   2
01                                                                                                                               (1)

                           00000004  0000    58 BTIMBUF=4				;ADDRESS OF ASCII STRING DESCRIPTOR
                           00000008  0000    59 BTIMADR=8				;ADDRESS TO STORE 64-BIT ABSOLUTE OR DELTA TIME
                                     0000    60  
                                     0000    61 ;
                                     0000    62 ; ARGUMENT LIST OFFSET DEFINITIONS FOR CONVERT BINARY TIME TO NUMERIC TIME
                                     0000    63 ;
                                     0000    64  
                           00000004  0000    65 NTIMBUF=4				;ADDRESS OF 7-WORD BUFFER TO RECEIVE TIME
                           00000008  0000    66 NTIMADR=8				;ADDRESS OF 64-BIT ABSOLUTE OR DELTA TIME
                                     0000    67  
                                     0000    68 ;
                                     0000    69 ; CONVERSION CONSTANTS
                                     0000    70 ;
                                     0000    71 ; TOTAL DAYS IN A CENTURY
                                     0000    72 ;
                                     0000    73  
                           00008EAC  0000    74 CENTURYDAYS=<100*365>+<100/4>-<100/100>	;
                                     0000    75  
                                     0000    76 ;
                                     0000    77 ; AVERAGE QUARTER DAYS PER CENTURY
                                     0000    78 ;
                                     0000    79  
                           00023AB1  0000    80 QDAYSPCENT=<<<100*365>+<100/4>-<100/100>>*4>+<400/400> ;
                                     0000    81  
                                     0000    82 ;
                                     0000    83 ; AVERAGE QUARTER DAYS PER YEAR
                                     0000    84 ;
                                     0000    85  
                           000005B5  0000    86 QDAYSPYEAR=<365*4>+1			;
                                     0000    87  
                                     0000    88 ;
                                     0000    89 ; TOTAL DAYS IN A QUADRICENTURY
                                     0000    90 ;
                                     0000    91  
                           00023AB1  0000    92 QUADRIDAYS=<400*365>+<400/4>-<400/100>+<400/400> ;
                                     0000    93  
                                     0000    94 ;
                                     0000    95 ; TOTAL DAYS IN A QUADYEAR
                                     0000    96 ;
                                     0000    97  
                           000005B5  0000    98 QUADYEARDAYS=<365*4>+1			;
                                     0000    99  
                                     0000   100 ;
                                     0000   101 ; OFFSET IN DAYS FROM 1-JAN-1501 TO 17-NOV-1858
                                     0000   102 ;
                                     0000   103  
                                     0000   104 TIMOFF1=<<1858-1501>*365>+<<1858-1501>/4>-<<1858-1501>/100>+<<1858-1501>/400>+ -;
                           0001FE98  0000   105        31+28+31+30+31+30+31+31+30+31+17 ;
                                     0000   106  
                                     0000   107 ;
                                     0000   108 ; OFFSET IN DAYS FROM 1-JAN-1601 TO 17-NOV-1858
                                     0000   109 ;
                                     0000   110  
                                     0000   111 TIMOFF2=<<1858-1601>*365>+<<1858-1601>/4>-<<1858-1601>/100>+<<1858-1601>/400>+ -;
                           00016FEC  0000   112        31+28+31+30+31+30+31+31+30+31+17 ;
                                     0000   113  
                                     0000   114 ;
SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page   3
01                                                                                                                               (1)

                                     0000   115 ; CHARACTER CODE DEFINITIONS
                                     0000   116 ;
                                     0000   117  
                           00000020  0000   118 BLANK=32				;
                           0000003A  0000   119 COLON=58				;
                           0000002D  0000   120 HYPHEN=45				;
                           00000039  0000   121 NINE=57					;
                           00000030  0000   122 ONE=48					;
                           0000002E  0000   123 PERIOD=46				;
                                     0000   124  
                                     0000   125 ;
                                     0000   126 ; NUMERIC TIME BUFFER OFFSET DEFINITIONS
                                     0000   127 ;
                                     0000   128  
                           00000000  0000   129 YEAR=0					;
                           00000002  0000   130 MONTH=2					;
                           00000004  0000   131 DAY=4					;
                           00000006  0000   132 HOUR=6					;
                           00000008  0000   133 MINUTE=8				;
                           0000000A  0000   134 SECOND=10				;
                           0000000C  0000   135 HUNDREDTH=12				;
                                     0000   136  
                                     0000   137 ;
                                     0000   138 ; LOCAL DATA
                                     0000   139 ;
                                     0000   140 ; MONTH, DAY CONVERSION TABLE
                                     0000   141 ;
                                 00000000   142 	.PSECT	Y$EXEPAGED
                                     0000   143 DATETABLE:				;DATE CONVERSION TABLE
                                 1F  0000   144 	.BYTE	31			;JANUARY
                                 1D  0001   145 	.BYTE	29			;FEBRUARY
                                 1F  0002   146 	.BYTE	31			;MARCH
                                 1E  0003   147 	.BYTE	30			;APRIL
                                 1F  0004   148 	.BYTE	31			;MAY
                                 1E  0005   149 	.BYTE	30			;JUNE
                                 1F  0006   150 	.BYTE	31			;JULY
                                 1F  0007   151 	.BYTE	31			;AUGUST
                                 1E  0008   152 	.BYTE	30			;SEPTEMBER
                                 1F  0009   153 	.BYTE	31			;OCTOBER
                                 1E  000A   154 	.BYTE	30			;NOVEMBER
                                 1F  000B   155 	.BYTE	31			;DECEMBER
                                     000C   156  
                                     000C   157 ;
                                     000C   158 ; MONTH CONVERSION TABLE
                                     000C   159 ;
                                     000C   160  
                                     000C   161 MONTHTAB:				;
                        4E 41 4A 03  000C   162 	.ASCII	<3>/JAN/		;
                        42 45 46 03  0010   163 	.ASCII	<3>/FEB/		;
                        52 41 4D 03  0014   164 	.ASCII	<3>/MAR/		;
                        52 50 41 03  0018   165 	.ASCII	<3>/APR/		;
                        59 41 4D 03  001C   166 	.ASCII	<3>/MAY/		;
                        4E 55 4A 03  0020   167 	.ASCII	<3>/JUN/		;
                        4C 55 4A 03  0024   168 	.ASCII	<3>/JUL/		;
                        47 55 41 03  0028   169 	.ASCII	<3>/AUG/		;
                        50 45 53 03  002C   170 	.ASCII	<3>/SEP/		;
                        54 43 4F 03  0030   171 	.ASCII	<3>/OCT/		;
SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page   4
01                                                                                                                               (1)

                        56 4F 4E 03  0034   172 	.ASCII	<3>/NOV/		;
                        43 45 44 03  0038   173 	.ASCII	<3>/DEC/		;
                                     003C   174  
                                     003C   175 ;
                                     003C   176 ; HOURS, MINUTES, SECONDS, HUNDREDTHS CONVERSION TABLE
                                     003C   177 ;
                                     003C   178  
                                     003C   179 TIMETABLE:				;TIME CONVERSION TABLE
                                 64  003C   180 	.BYTE	100			;HUNDREDTHS
                                 3C  003D   181 	.BYTE	60			;SECONDS
                                 3C  003E   182 	.BYTE	60			;MINUTES AND HOURS
                                     003F   183  
                                     003F   184 ;
                                     003F   185 ; CONVERSION CONTROL STRINGS
                                     003F   186 ;
                                     003F   187  
5A 34 21 2D 43 41 21 2D 57 53 32 21  003F   188 DATE:	.ASCII	/!2SW-!AC-!4ZW /	;
                              20 57  004B       
                     20 57 53 34 21  004D   189 DELTA:	.ASCII	/!4SW /			;
32 21 3A 57 5A 32 21 3A 57 5A 32 21  0052   190 TIME:	.ASCII	/!2ZW:!2ZW:!2ZW.!2ZW/	;
               57 5A 32 21 2E 57 5A  005E       
SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page   5
01              CONVERT BINARY TIME TO ASCII STRING                                                                              (1)

                                     0065   192 	.SBTTL	CONVERT BINARY TIME TO ASCII STRING
                                     0065   193 ;+
                                     0065   194 ; EXE$ASCTIM - CONVERT BINARY TIME TO ASCII STRING
                                     0065   195 ;
                                     0065   196 ; THIS SERVICE PROVIDES THE CAPABILITY TO CONVERT AN ABSOLUTE OR DELTA
                                     0065   197 ; TIME FROM 64-BIT FORMAT TO AN ASCII STRING.
                                     0065   198 ;
                                     0065   199 ; INPUTS:
                                     0065   200 ;
                                     0065   201 ;	ATIMLEN(AP) = ADDRESS OF WORD TO RECEIVE OUTPUT LENGTH.
                                     0065   202 ;	ATIMBUF(AP) = ADDRESS OF OUTPUT BUFFER DESCRIPTOR.
                                     0065   203 ;	ATIMADR(AP) = ADDRESS OF 64-BIT TIME VALUE. IF ZERO, THEN THE CURRENT
                                     0065   204 ;		SYSTEM TIME IS USED. POSITIVE VALUES ARE INTERPRETED AS
                                     0065   205 ;		ABSOLUTE TIMES AND NEGATIVE VALUES AS DELTA TIMES.
                                     0065   206 ;	ACVTFLG(AP) = CONVERSION INDICATOR.
                                     0065   207 ;		LOW BIT CLEAR INDICATES BOTH DATE AND TIME ARE TO BE CON-
                                     0065   208 ;			VERTED.
                                     0065   209 ;		LOW BIT SET INDICATES ONLY TIME IS TO BE CONVERTED.
                                     0065   210 ;
                                     0065   211 ; OUTPUTS:
                                     0065   212 ;
                                     0065   213 ;	R0 LOW BIT CLEAR INDICATES FAILURE TO CONVERT TIME TO ASCII.
                                     0065   214 ;
                                     0065   215 ;		R0 = SS$_ACCVIO - 64-BIT TIME VALUE OR OUTPUT BUFFER DESCRIPTOR
                                     0065   216 ;			CANNOT BE READ BY CALLING ACCESS MODE, OR OUTPUT BUFFER
                                     0065   217 ;			CANNOT BE WRITTEN BY CALLING ACCESS MODE.
                                     0065   218 ;
                                     0065   219 ;		R0 = SS$_IVTIME - SPECIFIED DELTA TIME IS GREATER THAN 9999
                                     0065   220 ;			DAYS.
                                     0065   221 ;
                                     0065   222 ;	R0 LOW BIT SET INDICATES SUCCESSFUL COMPLETION.
                                     0065   223 ;
                                     0065   224 ;		R0 = SS$_NORMAL - NORMAL COMPLETION.
                                     0065   225 ;-
                                     0065   226  
                                     0065   227 EXE$ASCTIM::				;CONVERT TIME TO ASCII
                               007C  0065   228 	.WORD	^M<R2,R3,R4,R5,R6>	;ENTRY MASK
            7E         08 BC     7D  0067   229 	MOVQ	@ATIMBUF(AP),-(SP)	;SAVE OUTPUT BUFFER DESCRIPTOR
            56            5E     D0  006B   230 	MOVL	SP,R6			;SAVE ADDRESS OF OUTPUT BUFFER DESCRIPTOR
                          7E     D4  006E   231 	CLRL	-(SP)			;CLEAR SPACE FOR LENGTH FROM FAO
            55            5E     D0  0070   232 	MOVL	SP,R5			;SAVE ADDRESS OF LENGTH
                          52     D4  0073   233 	CLRL	R2			;ASSUME ABSOLUTE TIME SPECIFIED
            53         0C AC     D0  0075   234 	MOVL	ATIMADR(AP),R3		;GET ADDRESS OF 64-BIT TIME VALUE
                          07     13  0079   235 	BEQL	10$			;IF EQL NONE SPECIFIED
            50            63     7D  007B   236 	MOVQ	(R3),R0			;GET 64-BIT TIME VALUE
                          02     18  007E   237 	BGEQ	10$			;IF GEQ ABSOLUTE TIME
                          52     D6  0080   238 	INCL	R2			;INDICATE DELTA TIME
            5E            10     C2  0082   239 10$:	SUBL	#<<<7*2>+3>/4>*4,SP	;ALLOCATE NUMERIC TIME BUFFER
            54            5E     D0  0085   240 	MOVL	SP,R4			;SAVE ADDRESS OF NUMERIC TIME BUFFER
                                     0088   241 	$NUMTIM_S (R4),(R3)		;CONVERT TIME TO NUMERIC FORMAT
            6F            50     E9  0093   242 	BLBC	R0,60$			;IF LBC CONVERSION FAILURE
                                     0096   243 	
                                     0096   244 ;
                                     0096   245 ; CONVERT TIME TO ASCII FORMAT
                                     0096   246 ;
                                     0096   247  
            3E         10 AC     E8  0096   248 	BLBS	ACVTFLG(AP),40$		;IF LBS ONLY TIME IS TO BE CONVERTED
SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page   6
01              CONVERT BINARY TIME TO ASCII STRING                                                                              (1)

            12            52     E8  009A   249 	BLBS	R2,20$			;IF LBS DELTA TIME SPECIFIED
                                     009D   250  
                                     009D   251 ;
                                     009D   252 ; CONVERT DATE
                                     009D   253 ;
                                     009D   254  
            52         02 A4     3C  009D   255 	MOVZWL	MONTH(R4),R2		;GET NUMERIC MONTH VALUE
            52       FF62 CF42   DE  00A1   256 	MOVAL	W^MONTHTAB-4[R2],R2	;GET ADDRESS OF MONTH COUNTED STRING
                     FF94 CF     DF  00A7   257 	PUSHAL	W^DATE			;BUILD DESCRIPTOR FOR CONTROL STRING
                          0E     DD  00AB   258 	PUSHL	#DELTA-DATE		;
                          06     11  00AD   259 	BRB	30$			;
                                     00AF   260  
                                     00AF   261 ;
                                     00AF   262 ; CONVERT DELTA TIME
                                     00AF   263 ;
                                     00AF   264  
                     FF9A CF     DF  00AF   265 20$:	PUSHAL	W^DELTA			;BUILD CONTROL STRING DESCRIPTOR
                          05     DD  00B3   266 	PUSHL	#TIME-DELTA		;
            51            5E     D0  00B5   267 30$:	MOVL	SP,R1			;COPY ADDRESS OF CONTROL STRING DESCRIPTOR
                                     00B8   268 	$FAO_S	(R1),(R5),(R6),DAY(R4),R2,YEAR(R4) ;CONVERT DELTA TIME OR DATE
            36            50     E9  00CC   269 	BLBC	R0,60$			;IF LBC CONVERT FAILURE
            66            65     A2  00CF   270 	SUBW	(R5),(R6)		;ANY SPACE LEFT IN TIME BUFFER?
                          27     15  00D2   271 	BLEQ	50$			;IF LEQ NO
         04 A6            65     C0  00D4   272 	ADDL	(R5),4(R6)		;UPDATE TIME BUFFER ADDRESS
                                     00D8   273  
                                     00D8   274 ;
                                     00D8   275 ; CONVERT TIME
                                     00D8   276 ;
                                     00D8   277  
                     FF76 CF     DF  00D8   278 40$:	PUSHAL	W^TIME			;BUILD CONTROL STRING DESCRIPTOR
                          13     DD  00DC   279 	PUSHL	#EXE$ASCTIM-TIME	;
            51            5E     D0  00DE   280 	MOVL	SP,R1			;COPY ADDRESS OF CONTROL STRING DESCRIPTOR
                                     00E1   281 	$FAO_S	(R1),2(R5),(R6),HOUR(R4),MINUTE(R4),SECOND(R4),HUNDREDTH(R4) ;
            51         04 AC     D0  00FB   282 50$:	MOVL	ATIMLEN(AP),R1		;LENGTH ADDRESS SPECIFIED?
                          04     13  00FF   283 	BEQL	60$			;IF EQL NO
            65            85     A1  0101   284 	ADDW3	(R5)+,(R5),(R1)		;COMPUTE AND RETURN OUTPUT LENGTH
                          61         0104       
                                 04  0105   285 60$:	RET				;
SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page   7
01              CONVERT ASCII STRING TO BINARY TIME                                                                              (1)

                                     0106   287 	.SBTTL	CONVERT ASCII STRING TO BINARY TIME
                                     0106   288 ;+
                                     0106   289 ; EXE$BINTIM - CONVERT ASCII STRING TO BINARY TIME
                                     0106   290 ;
                                     0106   291 ; THIS SERVICE PROVIDES THE CAPABILITY TO CONVERT AN ASCII STRING TO A
                                     0106   292 ; 64-BIT ABSOLUTE OR DELTA TIME.
                                     0106   293 ;
                                     0106   294 ; INPUTS:
                                     0106   295 ;
                                     0106   296 ;	BTIMBUF(AP) = ADDRESS OF ASCII STRING DESCRIPTOR.
                                     0106   297 ;	BTIMADR(AP) = ADDRESS TO STORE 64-BIT TIME VALUE.
                                     0106   298 ;
                                     0106   299 ; OUTPUTS:
                                     0106   300 ;
                                     0106   301 ;	R0 LOW BIT CLEAR INDICATES FAILURE TO CONVERT TIME TO ASCII.
                                     0106   302 ;
                                     0106   303 ;		R0 = SS$_IVTIME - ASCII STRING HAS INVALID SYNTAX OR TIME
                                     0106   304 ;			COMPONENT IS OUT OF RANGE.
                                     0106   305 ;
                                     0106   306 ;	R0 LOW BIT SET INDICATES SUCCESSFUL COMPLETION.
                                     0106   307 ;
                                     0106   308 ;		R0 = SS$_NORMAL - NORMAL COMPLETION.
                                     0106   309 ;-
                                     0106   310  
                                     0106   311 EXE$BINTIM::				;CONVERT ASCII STRING TO BINARY TIME
                               01FC  0106   312 	.WORD	^M<R2,R3,R4,R5,R6,R7,R8> ;ENTRY MASK
            5E            10     C2  0108   313 	SUBL	#<<<7*2>+3>/4>*4,SP	;ALLOCATE NUMERIC TIME BUFFER
            57            5E     D0  010B   314 	MOVL	SP,R7			;SAVE ADDRESS OF NUMERIC TIME BUFFER
            55         04 BC     7D  010E   315 	MOVQ	@BTIMBUF(AP),R5		;GET ADDRESS AND LENGTH OF ASCII STRING
                          58     D4  0112   316 	CLRL	R8			;ASSUME DELTA TIME
                          55     B7  0114   317 10$:	DECW	R5			;ANY MORE CHARACTERS?
                          57     19  0116   318 	BLSS	30$			;IF LSS NO
            86            20     91  0118   319 	CMPB	#BLANK,(R6)+		;SKIP LEADING BLANK?
                          F7     13  011B   320 	BEQL	10$			;IF EQL YES
                          55     B6  011D   321 	INCW	R5			;CORRECT NUMBER OF CHARACTERS
            55            2D     3A  011F   322 	LOCC	#HYPHEN,R5,-(R6)	;ABSOLUTE TIME FORMAT?
                          76         0122       
                          4A     13  0123   323 	BEQL	30$			;IF EQL NO
                          58     D6  0125   324 	INCL	R8			;INDICATE ABSOLUTE TIME
                                     0127   325 	$NUMTIM_S (R7)			;CONVERT CURRENT TIME TO NUMERIC FORMAT
                                     0132   326  
                                     0132   327 ;
                                     0132   328 ; CONVERT ABSOLUTE TIME
                                     0132   329 ;
                                     0132   330  
            54         04 A7     DE  0132   331 	MOVAL	DAY(R7),R4		;SET ADDRESS TO STORE DAY
                          63     10  0136   332 	BSBB	CONVERT			;CONVERT DAY FIELD
                                 2D  0138   333 	.BYTE	HYPHEN			;EXPECTED TERMINATOR
                          55     B5  0139   334 	TSTW	R5			;ANY MORE CHARACTERS?
                          5C     13  013B   335 	BEQL	60$			;IF EQL NO
            86            2D     91  013D   336 	CMPB	#HYPHEN,(R6)+		;MONTH FIELD VOID?
                          26     13  0140   337 	BEQL	20$			;IF EQL YES
            76            03     39  0142   338 	MATCHC	#3,-(R6),#4*12,W^MONTHTAB ;SEARCH FOR MONTH SUBSTRING MATCH
       FEC3 CF            30         0145       
                          7D     12  0149   339 	BNEQ	IVTIME			;IF NEQ NO MATCH FOUND
            30            52     C3  014B   340 	SUBL3	R2,#4*12,R2		;CALCULATE CHARACTERS TO START OF SUBSTRING + 4
                          52         014E       
SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page   8
01              CONVERT ASCII STRING TO BINARY TIME                                                                              (1)

            52            03     D3  014F   341 	BITL	#3,R2			;MULTIPLE OF 4?
                          74     12  0152   342 	BNEQ	IVTIME			;IF NEQ NO
            52            04     A7  0154   343 	DIVW3	#4,R2,MONTH(R7)		;CONVERT TO MONTH AND STORE
                       02 A7         0157       
            56            03     C0  0159   344 	ADDL	#3,R6			;UPDATE ADDRESS OF ASCII STRING
            55            03     A2  015C   345 	SUBW	#3,R5			;UPDATE COUNT OF REMAINING CHARACTERS
                          67     19  015F   346 	BLSS	IVTIME			;IF LSS INVALID SYNTAX
                          36     13  0161   347 	BEQL	60$			;IF EQL END OF STRING
            86            2D     91  0163   348 	CMPB	#HYPHEN,(R6)+		;FIELD TERMINATED PROPERLY?
                          60     12  0166   349 	BNEQ	IVTIME			;IF NEQ NO
                          55     B7  0168   350 20$:	DECW	R5			;DECREMENT COUNT OF REMAINING CHARACTERS
            54            67     DE  016A   351 	MOVAL	YEAR(R7),R4		;SET ADDRESS TO STORE YEAR
                          0A     11  016D   352 	BRB	40$			;
                                     016F   353  
                                     016F   354 ;
                                     016F   355 ; CONVERT DELTA TIME
                                     016F   356 ;
                                     016F   357  
            54            67     DE  016F   358 30$:	MOVAL	YEAR(R7),R4		;GET ADDRESS TO STORE YEAR
                          84     D4  0172   359 	CLRL	(R4)+			;CLEAR YEAR AND MONTH
                          64     7C  0174   360 	CLRQ	(R4)			;CLEAR DAY, HOUR, MINUTE, AND SECOND
                       0C A7     B4  0176   361 	CLRW	HUNDREDTH(R7)		;CLEAR HUNDREDTH
                          20     10  0179   362 40$:	BSBB	CONVERT			;CONVERT RELATIVE DAY OR YEAR FIELD
                                 20  017B   363 	.BYTE	BLANK			;EXPECTED TERMINATOR
                          55     B7  017C   364 50$:	DECW	R5			;ANY REMAINING CHARACTERS?
                          19     19  017E   365 	BLSS	60$			;IF LSS NO
            86            20     91  0180   366 	CMPB	#BLANK,(R6)+		;NEXT CHARACTER BLANK?
                          F7     13  0183   367 	BEQL	50$			;IF EQL YES
                          56     D7  0185   368 	DECL	R6			;BACK UP TO NONBLANK CHARACTER
                          55     D6  0187   369 	INCL	R5			;ADJUST REMAINING CHARACTER COUNT
                                     0189   370  
                                     0189   371 ;
                                     0189   372 ; CONVERT TIME
                                     0189   373 ;
                                     0189   374  
            54         06 A7     DE  0189   375 	MOVAL	HOUR(R7),R4		;SET ADDRESS TO STORE HOUR
                          0C     10  018D   376 	BSBB	CONVERT			;CONVERT HOUR FIELD
                                 3A  018F   377 	.BYTE	COLON			;EXPECTED TERMINATOR
                          09     10  0190   378 	BSBB	CONVERT			;CONVERT MINUTE FIELD
                                 3A  0192   379 	.BYTE	COLON			;EXPECTED TERMINATOR
                          06     10  0193   380 	BSBB	CONVERT			;CONVERT SECOND FIELD
                                 2E  0195   381 	.BYTE	PERIOD			;EXPECTED TERMINATOR
                          03     10  0196   382 	BSBB	CONVERT			;CONVERT HUNDREDTH FIELD
                                 20  0198   383 	.BYTE	BLANK			;EXPECTED TERMINATOR
                          33     11  0199   384 60$:	BRB	CVRTIME			;
                                     019B   385  
                                     019B   386 ;
                                     019B   387 ; SUBROUTINE TO CONVERT NUMERIC FIELD TO BINARY
                                     019B   388 ;
                                     019B   389  
                                     019B   390 CONVERT:				;CONVERT FIELD
                          50     D4  019B   391 	CLRL	R0			;CLEAR ACCUMULATED VALUE
                          84     B5  019D   392 10$:	TSTW	(R4)+			;POINT PAST NEXT FIELD
                          55     B7  019F   393 	DECW	R5			;ANY MORE CHARACTERS?
                          2B     19  01A1   394 	BLSS	CVRTIME			;IF LSS NO
            51            86     9A  01A3   395 	MOVZBL	(R6)+,R1		;GET NEXT CHARACTER
         00 BE            51     91  01A6   396 	CMPB	R1,@(SP)		;EXPECTED TERMINATOR?
SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page   9
01              CONVERT ASCII STRING TO BINARY TIME                                                                              (1)

                          19     13  01AA   397 	BEQL	20$			;IF EQL YES
            51            30     C2  01AC   398 	SUBL	#ONE,R1			;SUBTRACT OUT CHARACTER BIAS
                          17     19  01AF   399 	BLSS	IVTIME			;IF LSS INVALID CHARACTER
            51            09     D1  01B1   400 	CMPL	#NINE-ONE,R1		;RESULT VALUE WITHIN RANGE?
                          12     19  01B4   401 	BLSS	IVTIME			;IF LSS INVALID CHARACTER
            50            0A     A4  01B6   402 	MULW	#10,R0			;MULTIPLY PARTIAL RESULT BY 10
                          0D     1D  01B9   403 	BVS	IVTIME			;IF VS INVALID TIME
            50            51     A0  01BB   404 	ADDW	R1,R0			;ACCUMULATE VALUE
                          08     1D  01BE   405 	BVS	IVTIME			;IF VS INVALID TIME VALUE
            74            50     B0  01C0   406 	MOVW	R0,-(R4)		;STORE VALUE
                          D8     11  01C3   407 	BRB	10$			;
                          6E     D6  01C5   408 20$:	INCL	(SP)			;INCREMENT PAST TERMINATOR
                                 05  01C7   409 	RSB				;
                                     01C8   410  
                                     01C8   411 ;
                                     01C8   412 ; INVALID SYNTAX OR TIME COMPONENT
                                     01C8   413 ;
                                     01C8   414  
            50       0184 8F     3C  01C8   415 IVTIME:	MOVZWL	#SS$_IVTIME,R0		;SET INVALID TIME
                                 04  01CD   416 	RET				;
                                     01CE   417  
                                     01CE   418 ;
                                     01CE   419 ; CHECK CONVERTED DATE AND TIME VALUES
                                     01CE   420 ;
                                     01CE   421  
                                     01CE   422 CVRTIME:				;
         04 A7       270F 8F     B1  01CE   423 	CMPW	#9999,DAY(R7)		;DAY WITHIN UPPER LIMIT?
                          F2     1F  01D4   424 	BLSSU	IVTIME			;IF LSSU NO
         06 A7            18     B1  01D6   425 	CMPW	#24,HOUR(R7)		;HOUR WITHIN LIMITS?
                          EC     1B  01DA   426 	BLEQU	IVTIME			;IF LEQU NO
         08 A7            3C     B1  01DC   427 	CMPW	#60,MINUTE(R7)		;MINUTE WITHIN LIMITS?
                          E6     1B  01E0   428 	BLEQU	IVTIME			;IF LEQU NO
         0A A7            3C     B1  01E2   429 	CMPW	#60,SECOND(R7)		;SECOND WITHIN LIMITS?
                          E0     1B  01E6   430 	BLEQU	IVTIME			;IF LEQU NO
         0C A7       0064 8F     B1  01E8   431 	CMPW	#100,HUNDREDTH(R7)	;HUNDREDTH WITHIN LIMITS?
                          D8     1B  01EE   432 	BLEQU	IVTIME			;IF LEQU NO
            55         04 A7     3C  01F0   433 	MOVZWL	DAY(R7),R5		;GET DAY VALUE
            03            58     E8  01F4   434 	BLBS	R8,5$			;IF LBS ABSOLUTE TIME
                          0097   31  01F7   435 	BRW	40$			;
                                     01FA   436  
                                     01FA   437 ;
                                     01FA   438 ; CONVERT YEARS TO QUADRICENTURIES, CENTURIES, QUADYEARS, YEARS
                                     01FA   439 ;
                                     01FA   440  
                          CC     13  01FA   441 5$:	BEQL	IVTIME			;IF EQL INVALID TIME
            50            67     3C  01FC   442 	MOVZWL	YEAR(R7),R0		;GET YEAR VALUE
            50       F9BF C0     3E  01FF   443 	MOVAW	-1601(R0),R0		;CALCULATE YEARS PAST 1601
                          C2     19  0204   444 	BLSS	IVTIME			;IF LSS INVALID TIME
                          51     D4  0206   445 	CLRL	R1			;CLEAR HIGH PART OF DIVIDEND
            50   00000190 8F     7B  0208   446 	EDIV	#400,R0,R0,R1		;CALCULATE QUADRICENTURIES
            51            50         020F       
                          52     D4  0211   447 	CLRL	R2			;CLEAR HIGH PART OF DIVIDEND
            51   00000064 8F     7B  0213   448 	EDIV	#100,R1,R1,R2		;CALCULATE CENTURIES
            52            51         021A       
                          53     D4  021C   449 	CLRL	R3			;CLEAR HIGH PART OF DIVIDEND
            52            04     7B  021E   450 	EDIV	#4,R2,R2,R3		;CALCULATE QUADYEARS AND YEARS
            53            52         0221       
SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page  10
01              CONVERT ASCII STRING TO BINARY TIME                                                                              (1)

                                     0223   451  
                                     0223   452 ;
                                     0223   453 ; CONVERT QUADRICENTURIES, CENTURIES, QUADYEARS, YEARS TO DAYS
                                     0223   454 ;
                                     0223   455  
            53       016D 8F     A4  0223   456 	MULW	#365,R3			;CALCULATE NUMBER OF DAYS PAST LEAP YEAR
            52   000005B5 8F     7A  0228   457 	EMUL	#QUADYEARDAYS,R2,R3,R2	;CALCULATE NUMBER OF QUADYEAR DAYS AND SUM
            52            53         022F       
            51   00008EAC 8F     C4  0231   458 	MULL	#CENTURYDAYS,R1		;CALCULATE NUMBER OF CENTURY DAYS
            50   00023AB1 8F     7A  0238   459 	EMUL	#QUADRIDAYS,R0,R1,R5	;CALCULATE NUMBER OF QUADRIDAYS AND SUM
            55            51         023F       
                          50     D4  0241   460 	CLRL	R0			;CLEAR INITIAL LOOP INDEX
            56         02 A7     3C  0243   461 	MOVZWL	MONTH(R7),R6		;GET SPECIFIED MONTH VALUE
            55            52     C0  0247   462 10$:	ADDL	R2,R5			;ACCUMULATE TOTAL DAYS
            52       FDB1 CF40   9A  024A   463 	MOVZBL	W^DATETABLE[R0],R2	;GET NUMBER OF DAYS IN MONTH
            50            01     D1  0250   464 	CMPL	#1,R0			;SECOND MONTH OF YEAR?
                          1E     12  0253   465 	BNEQ	30$			;IF NEQ NO
            53            67     3C  0255   466 	MOVZWL	YEAR(R7),R3		;GET SPECIFIED YEAR VALUE
            53            03     D3  0258   467 	BITL	#3,R3			;YEAR MULTIPLE OF 4?
                          14     12  025B   468 	BNEQ	20$			;IF NEQ NO
                          54     D4  025D   469 	CLRL	R4			;CLEAR HIGH PART OF DIVIDEND
            53   00000064 8F     7B  025F   470 	EDIV	#100,R3,R3,R4		;CALCULATE CENTURY AND YEAR IN CENTURY
            54            53         0266       
                          54     D5  0268   471 	TSTL	R4			;YEAR MULTIPLE OF 100?
                          07     12  026A   472 	BNEQ	30$			;IF NEQ NO
            53            03     D3  026C   473 	BITL	#3,R3			;YEAR MULTIPLE OF 400?
                          02     13  026F   474 	BEQL	30$			;IF EQL YES
                          52     D7  0271   475 20$:	DECL	R2			;REDUCE NUMBER OF DAYS IN MONTH
            50            56     F2  0273   476 30$:	AOBLSS	R6,R0,10$		;ANY MORE DAYS TO ACCUMULATE?
                          D0         0276       
            50       0184 8F     3C  0277   477 	MOVZWL	#SS$_IVTIME,R0		;ASSUME INVALID DAY OF MONTH
            51         04 A7     3C  027C   478 	MOVZWL	DAY(R7),R1		;GET SPECIFIED DAY
            55   00016FEC 8F     C2  0280   479 	SUBL	#TIMOFF2,R5		;SUBTRACT OUT NUMBER OF DAYS TO 17-NOV-1858
            55            51     C0  0287   480 	ADDL	R1,R5			;CALCULATE TOTAL NUMBER OF DAYS
                          57     19  028A   481 	BLSS	60$			;IF LSS INVALID TIME
            52            51     D1  028C   482 	CMPL	R1,R2			;DAY WITHIN LIMITS?
                          52     1A  028F   483 	BGTRU	60$			;IF GTRU NO
                                     0291   484  
                                     0291   485 ;
                                     0291   486 ; CONVERT TIME TO TENTHS OF MICROSECONDS
                                     0291   487 ;
                                     0291   488  
            50         06 A7     3C  0291   489 40$:	MOVZWL	HOUR(R7),R0		;GET HOUR VALUE
            51         08 A7     3C  0295   490 	MOVZWL	MINUTE(R7),R1		;GET MINUTE VALUE
            50            3C     7A  0299   491 	EMUL	#60,R0,R1,R0		;CONVERT HOURS TO MINUTES AND SUM
            50            51         029C       
            51         0A A7     3C  029E   492 	MOVZWL	SECOND(R7),R1		;GET SECOND VALUE
            50            3C     7A  02A2   493 	EMUL	#60,R0,R1,R0		;CONVERT MINUTES TO SECONDS AND SUM
            50            51         02A5       
            51         0C A7     3C  02A7   494 	MOVZWL	HUNDREDTH(R7),R1	;GET HUNDREDTH VALUE
            50   00000064 8F     7A  02AB   495 	EMUL	#100,R0,R1,R0		;CONVERT SECONDS TO HUNDREDTHS AND SUM
            50            51         02B2       
            50   000186A0 8F     7A  02B4   496 	EMUL	#100000,R0,#0,R0	;CONVERT TO TENTHS OF MICROSECONDS
            50            00         02BB       
                                     02BD   497  
                                     02BD   498 ;
                                     02BD   499 ; CONVERT DAYS TO TENTHS OF MICROSECONDS
SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page  11
01              CONVERT ASCII STRING TO BINARY TIME                                                                              (1)

                                     02BD   500 ;
                                     02BD   501  
            55   324A9A70 8F     7A  02BD   502 	EMUL	#843750000,R5,#0,R2	;MULTIPLY BY 864000000000/1024
            52            00         02C4       
            52            0A     79  02C6   503 	ASHQ	#10,R2,R2		;MULTIPLY BY 1024
                          52         02C9       
                                     02CA   504  
                                     02CA   505 ;
                                     02CA   506 ; COMBINE RESULTS AND STORE 64-BIT TIME
                                     02CA   507 ;
                                     02CA   508  
            52            50     C0  02CA   509 	ADDL	R0,R2			;ADD LOW ORDER PARTS
            53            51     D8  02CD   510 	ADWC	R1,R3			;ADD HIGH ORDER PARTS
            50            01     3C  02D0   511 	MOVZWL	#SS$_NORMAL,R0		;SET NORMAL COMPLETION
            09            58     E8  02D3   512 	BLBS	R8,50$			;IF LBS ABSOLUTE TIME
            53            53     CE  02D6   513 	MNEGL	R3,R3			;CONVERT TO DELTA TIME
            52            52     CE  02D9   514 	MNEGL	R2,R2			;
            53            00     D9  02DC   515 	SBWC	#0,R3			;
         08 BC            52     7D  02DF   516 50$:	MOVQ	R2,@BTIMADR(AP)		;STORE 64-BIT TIME VALUE
                                 04  02E3   517 60$:	RET				;
SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page  12
01              CONVERT BINARY TIME TO NUMERIC TIME                                                                              (1)

                                     02E4   519 	.SBTTL	CONVERT BINARY TIME TO NUMERIC TIME
                                     02E4   520 ;+
                                     02E4   521 ; EXE$NUMTIM - CONVERT BINARY TIME TO NUMERIC TIME
                                     02E4   522 ;
                                     02E4   523 ; THIS SERVICE PROVIDES THE CAPABILITY TO CONVERT AN ABSOLUTE OR DELTA TIME
                                     02E4   524 ; FROM 64-BIT FORMAT TO INTEGER DATE AND TIME VALUES.
                                     02E4   525 ;
                                     02E4   526 ; INPUTS:
                                     02E4   527 ;
                                     02E4   528 ;	NTIMBUF(AP) = ADDRESS OF 7-WORD BUFFER TO RECEIVE CONVERTED DATE AND
                                     02E4   529 ;		TIME VALUES.
                                     02E4   530 ;	NTIMADR(AP) = ADDRESS OF 64-BIT TIME VALUE. IF ZERO, THEN THE CURRENT
                                     02E4   531 ;		SYSTEM TIME IS USED. POSITIVE VALUES ARE INTERPRETED AS
                                     02E4   532 ;		ABSOLUTE TIMES AND NEGATIVE VALUES AS DELTA TIMES.
                                     02E4   533 ;
                                     02E4   534 ; OUTPUTS:
                                     02E4   535 ;
                                     02E4   536 ;	R0 LOW BIT CLEAR INDICATES FAILURE TO CONVERT TO NUMERIC TIME.
                                     02E4   537 ;
                                     02E4   538 ;		R0 = SS$_ACCVIO - 64-BIT TIME VALUE CANNOT BE READ BY CALLING
                                     02E4   539 ;			ACCESS MODE OR TIME BUFFER CANNOT BE WRITTEN BY
                                     02E4   540 ;			CALLING ACCESS MODE.
                                     02E4   541 ;
                                     02E4   542 ;		R0 = SS$_IVTIME - SPECIFIED DELTA TIME IS GREATER THAN 9999
                                     02E4   543 ;			DAYS.
                                     02E4   544 ;
                                     02E4   545 ;	R0 LOW BIT SET INDICATES SUCCESSFUL COMPLETION.
                                     02E4   546 ;
                                     02E4   547 ;		R0 = SS$_NORMAL - NORMAL COMPLETION.
                                     02E4   548 ;-
                                     02E4   549  
                                     02E4   550 EXE$NUMTIM::				;CONVERT TO NUMERIC TIME
                               00FC  02E4   551 	.WORD	^M<R2,R3,R4,R5,R6,R7>	;ENTRY MASK
            57         04 AC     D0  02E6   552 	MOVL	NTIMBUF(AP),R7		;GET ADDRESS OF 7-WORD TIME BUFFER
                                     02EA   553 	IFNOWRT	#7*2,(R7),10$		;CAN TIME BUFFER BE WRITTEN?
            50            01     3C  02F0   554 	MOVZWL	#SS$_NORMAL,R0		;ASSUME NORMAL COMPLETION
            51   00000000'EF     7D  02F3   555 	MOVQ	EXE$GQ_SYSTIME,R1	;ASSUME TIME NOT SPECIFIED
            53         08 AC     D0  02FA   556 	MOVL	NTIMADR(AP),R3		;GET ADDRESS OF 64-TIME VALUE
                          1C     13  02FE   557 	BEQL	20$			;IF EQL NONE SPECIFIED
                                     0300   558 	IFNORD	#8,(R3),10$		;CAN 64-BIT TIME VALUE BE READ?
            51            63     7D  0306   559 	MOVQ	(R3),R1			;GET 64-BIT TIME VALUE
                          11     18  0309   560 	BGEQ	20$			;IF GEQ ABSOLUTE TIME
            52            52     CE  030B   561 	MNEGL	R2,R2			;NEGATE DELTA TIME VALUE
            51            51     CE  030E   562 	MNEGL	R1,R1			;
            52            00     D9  0311   563 	SBWC	#0,R2			;
            50            00     E4  0314   564 	BBSC	#0,R0,20$		;INDICATE DELTA TIME VALUE
                          04         0317       
            50            0C     3C  0318   565 10$:	MOVZWL	#SS$_ACCVIO,R0		;SET ACCESS VIOLATION
                                 04  031B   566 	RET				;
                                     031C   567  
                                     031C   568 ;
                                     031C   569 ; R1 AND R2 CONTAIN 64-BIT ABSOLUTE TIME VALUE IN UNITS OF TENTHS OF MICRO-
                                     031C   570 ; SECONDS. CALCULATE DAYS PAST BASE TIME AND FRACTION OF DAY BY DIVIDING
                                     031C   571 ; BY 864000000000 WHICH IS THE NUMBER OF TENTHS OF MICROSECONDS IN A DAY.
                                     031C   572 ; THE DIVISION IS PERFORMED IN THREE STEPS TO INSURE BOTH QUOTIENT AND
                                     031C   573 ; REMAINDER STAY WITHIN 32 BITS.
                                     031C   574 ;
SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page  13
01              CONVERT BINARY TIME TO NUMERIC TIME                                                                              (1)

                                     031C   575 ; CALCULATE DAYS BY DIVIDING BY 1024 AND THEN 843750000. QUOTIENT IS DAYS
                                     031C   576 ; AND REMAINDER IS FRACTION OF DAY.
                                     031C   577 ;
                                     031C   578  
            20            0A     EF  031C   579 20$:	EXTZV	#10,#32,R1,R1		;EXTRACT LOW ORDER 32 BITS
            51            51         031F       
            16            0A     EF  0321   580 	EXTZV	#10,#22,R2,R2		;EXTRACT HIGH ORDER 22 BITS
            52            52         0324       
            51   324A9A70 8F     7B  0326   581 	EDIV	#843750000,R1,R1,R2	;CALCULATE DAYS AND FRACTION OF DAY
            52            51         032D       
                                     032F   582  
                                     032F   583 ;
                                     032F   584 ; R1 CONTAINS DAYS PAST BASE TIME AND R2 CONTAINS FRACTION OF DAY IN UNITS
                                     032F   585 ; OF 864000000000/1024.
                                     032F   586 ;
                                     032F   587 ; CALCULATE FRACTION OF DAY IN HUNDREDTHS OF SECONDS BY DIVIDING BY 3125/32.
                                     032F   588 ; NOTE THAT <1024*3125>/32 = 100000 WHICH IS THE NUMBER OF TENTHS OF MICRO-
                                     032F   589 ; SECONDS IN A HUNDREDTH OF A SECOND.
                                     032F   590 ;
                                     032F   591  
                          53     D4  032F   592 	CLRL	R3			;CLEAR HIGH PART OF DIVIDEND
            52            05     79  0331   593 	ASHQ	#5,R2,R2		;MULTIPLY BY 32
                          52         0334       
            52   00000C35 8F     7B  0335   594 	EDIV	#3125,R2,R5,R2		;CALCULATE FRACTION OF DAY IN HUNDREDTHS
            52            55         033C       
                                     033E   595  
                                     033E   596 ;
                                     033E   597 ; R1 CONTAINS DAYS PAST THE BASE TIME AND R5 CONTAINS THE FRACTION OF DAY
                                     033E   598 ; IN HUNDREDTHS OF A SECOND.
                                     033E   599 ;
                                     033E   600  
            50            00     E3  033E   601 	BBCS	#0,R0,70$		;IF CLR, DELTA TIME SPECIFIED
                          7E         0341       
                                     0342   602  
                                     0342   603 ;
                                     0342   604 ; ADD TIME OFFSET SO THAT DAY IS RELATIVE TO 1-JAN-1501.
                                     0342   605 ;
                                     0342   606  
            51   0001FE98 8F     C0  0342   607 	ADDL	#TIMOFF1,R1		;ADD TIME OFFSET
                                     0349   608  
                                     0349   609 ;
                                     0349   610 ; CALCULATE NUMBER OF QUADRICENTURIES THAT HAVE PAST SINCE 1501.
                                     0349   611 ;
                                     0349   612  
                          52     D4  0349   613 	CLRL	R2			;CLEAR HIGH PART OF DIVIDEND
            51   00023AB1 8F     7B  034B   614 	EDIV	#QUADRIDAYS,R1,R1,R2	;CALCULATE NUMBER OF QUADRICENTURIES
            52            51         0352       
                                     0354   615  
                                     0354   616 ;
                                     0354   617 ; R1 CONTAINS THE NUMBER OF QUADRICENTURIES AND R2 CONTAINS THE NUMBER OF
                                     0354   618 ; DAYS INTO THE NEXT QUADRICENTURY. CALCULATE THE NUMBER OF CENTURIES BY
                                     0354   619 ; CONVERTING TO QUARTER DAYS INTO NEXT QUADRICENTURY AND THEN DIVIDING BY
                                     0354   620 ; THE AVERAGE NUMBER OF QUARTER DAYS IN A CENTURY.
                                     0354   621 ;
                                     0354   622  
            52            04     C4  0354   623 	MULL	#4,R2			;CALCULATE NUMBER OF QUARTER DAYS
                          53     D4  0357   624 	CLRL	R3			;CLEAR HIGH PART OF DIVIDEND
SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page  14
01              CONVERT BINARY TIME TO NUMERIC TIME                                                                              (1)

            52   00023AB1 8F     7B  0359   625 	EDIV	#QDAYSPCENT,R2,R2,R3	;CALCULATE NUMBER OF CENTURIES
            53            52         0360       
                                     0362   626  
                                     0362   627 ;
                                     0362   628 ; R2 CONTAINS THE NUMBER OF CENTURIES AND R3 CONTAINS THE NUMBER OF QUARTER
                                     0362   629 ; DAYS INTO THE NEXT CENTURY.
                                     0362   630 ;
                                     0362   631 ; CALCULATE YEARS BY DISCARDING ANY FRACTION OF A DAY, ADDING 3/4'THS OF A
                                     0362   632 ; DAY, AND DIVIDING BY THE AVERAGE NUMBER OF DAYS IN A YEAR. THE LEAP DAY
                                     0362   633 ; OF EACH FOUR YEAR CYCLE IS FORCED INTO THE FOURTH YEAR.
                                     0362   634 ;
                                     0362   635  
                          54     D4  0362   636 	CLRL	R4			;CLEAR HIGH PART OF DIVIDEND
            53            03     C8  0364   637 	BISL	#3,R3			;TRUNCATE FRACTION AND ADD 3/4'THS OF DAY
            53   000005B5 8F     7B  0367   638 	EDIV	#QDAYSPYEAR,R3,R3,R4	;CALCULATE NUMBER OF YEARS
            54            53         036E       
            54            04     C6  0370   639 	DIVL	#4,R4			;CALCULATE NUMBER OF DAYS MINUS ONE
                          54     D6  0373   640 	INCL	R4			;CONVERT TO ACTUAL JULIAN DAY OF YEAR
                                     0375   641  
                                     0375   642 ;
                                     0375   643 ; R1 CONTAINS NUMBER OF QUADRICENTURIES.
                                     0375   644 ; R2 CONTAINS NUMBER OF CENTURIES.
                                     0375   645 ; R3 CONTAINS NUMBER OF YEARS.
                                     0375   646 ; R4 CONTAINS JULIAN DAY OF YEAR.
                                     0375   647 ;
                                     0375   648 ; CALCULATE ACTUAL YEAR.
                                     0375   649 ;
                                     0375   650  
            51            6241   DE  0375   651 	MOVAL	(R2)[R1],R1		;COMBINE CENTURIES AND QUADRICENTURIES
            51            32     C4  0379   652 	MULL	#50,R1			;CALCULATE NUMBER OF DOUBLE CENTURIES
            51       05DD C341   3E  037C   653 	MOVAW	1501(R3)[R1],R1		;CALCULATE ACTUAL YEAR
            87            51     B0  0382   654 	MOVW	R1,(R7)+		;STORE YEAR
                                     0385   655  
                                     0385   656 ;
                                     0385   657 ; TEST FOR NONLEAP YEAR AND BIAS DAY IF AFTER 28-FEB.
                                     0385   658 ;
                                     0385   659  
            51            03     D3  0385   660 	BITL	#3,R1			;YEAR MULTIPLE OF 4?
                          14     12  0388   661 	BNEQ	30$			;IF NEQ NO
                          52     D4  038A   662 	CLRL	R2			;CLEAR HIGH PART OF DIVIDEND
            51   00000064 8F     7B  038C   663 	EDIV	#100,R1,R1,R2		;CALCULATE CENTURY AND YEAR IN CENTURY
            52            51         0393       
                          52     D5  0395   664 	TSTL	R2			;YEAR MULTIPLE OF 100?
                          0C     12  0397   665 	BNEQ	40$			;IF NEQ NO
            51            03     D3  0399   666 	BITL	#3,R1			;YEAR MULTIPLE OF 400?
                          07     13  039C   667 	BEQL	40$			;IF EQL YES
            54            3B     D1  039E   668 30$:	CMPL	#31+28,R4		;AFTER 28-FEB?
                          02     18  03A1   669 	BGEQ	40$			;IF GEQ NO
                          54     D6  03A3   670 	INCL	R4			;ADJUST FOR TABLE BIAS
            51            01     D0  03A5   671 40$:	MOVL	#1,R1			;INITIALIZE MONTH
            52       FC52 CF41   9A  03A8   672 50$:	MOVZBL	W^DATETABLE-1[R1],R2	;GET NUMBER OF DAYS IN MONTH
            54            52     C2  03AE   673 	SUBL	R2,R4			;SUBTRACT FROM JULIAN DAY
                          04     15  03B1   674 	BLEQ	60$			;IF LEQ CORRECT MONTH FOUND
            51            0C     F3  03B3   675 	AOBLEQ	#12,R1,50$		;LOOP THROUGH ALL MONTHS
                          F1         03B6       
            87            51     B0  03B7   676 60$:	MOVW	R1,(R7)+		;STORE MONTH
            54            52     A1  03BA   677 	ADDW3	R2,R4,(R7)+		;STORE DAY
SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page  15
01              CONVERT BINARY TIME TO NUMERIC TIME                                                                              (1)

                          87         03BD       
                          14     11  03BE   678 	BRB	80$			;
                                     03C0   679  
                                     03C0   680 ;
                                     03C0   681 ; DELTA TIME SPECIFIED - STORE RELATIVE DAY
                                     03C0   682 ;
                                     03C0   683  
                          87     D4  03C0   684 70$:	CLRL	(R7)+			;CLEAR YEAR AND MONTH
            87            51     B0  03C2   685 	MOVW	R1,(R7)+		;STORE DAY
            51   00002710 8F     D1  03C5   686 	CMPL	#10000,R1		;RELATIVE DAY WITHIN LIMITS?
                          06     1A  03CC   687 	BGTRU	80$			;IF GTRU YES
            50       0184 8F     3C  03CE   688 	MOVZWL	#SS$_IVTIME,R0		;SET INVALID TIME
                                 04  03D3   689 	RET				;
                                     03D4   690  
                                     03D4   691 ;
                                     03D4   692 ; R5 CONTAINS FRACTION OF DAY IN HUNDREDTHS OF SECONDS.
                                     03D4   693 ;
                                     03D4   694 ; CALCULATE HOUR, MINUTE, SECOND, AND HUNDREDTH OF SECOND.
                                     03D4   695 ;
                                     03D4   696  
            57            08     C0  03D4   697 80$:	ADDL	#8,R7			;POINT TWO BYTES PAST END OF BUFFER
                          51     D4  03D7   698 	CLRL	R1			;CLEAR LOOP INDEX
            52       FC5E CF41   9A  03D9   699 90$:	MOVZBL	W^TIMETABLE[R1],R2	;GET NEXT UNIT DIVISOR
                          56     D4  03DF   700 	CLRL	R6			;CLEAR HIGH PART OF DIVIDEND
            55            52     7B  03E1   701 	EDIV	R2,R5,R5,R6		;CALCULATE NEXT PART
            56            55         03E4       
            77            56     B0  03E6   702 	MOVW	R6,-(R7)		;STORE NEXT PART
            51            02     F3  03E9   703 	AOBLEQ	#2,R1,90$		;LOOP FOR HUNDREDTHS, SECONDS, AND MINUTES
                          EC         03EC       
            77            55     B0  03ED   704 	MOVW	R5,-(R7)		;STORE HOUR
                                 04  03F0   705 	RET				;
                                     03F1   706  
                                     03F1   707 	.END
SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page  16
SYMBOL TABLE                                                                                                                     (1)

$$T2           = 00000007            SS$_BREAK      = 00000414            SS$_FORMAT     = 000000BC            
ACVTFLG        = 00000010            SS$_BUFBYTALI  = 0000030C            SS$_GPTFULL    = 000000C4            
ATIMADR        = 0000000C            SS$_BUFFEROVF  = 00000601            SS$_GSDFULL    = 000000CC            
ATIMBUF        = 00000008            SS$_BUGCHECK   = 000002A4            SS$_HANGUP     = 000002CC            
ATIMLEN        = 00000004            SS$_CANCEL     = 00000830            SS$_HEADERFULL = 000008C8            
BIT...         = 00000000            SS$_CHANINTLK  = 0000004C            SS$_IDXFILEFULL= 000008D0            
BLANK          = 00000020            SS$_CLIFRCEXT  = 00000980            SS$_ILLBLKNUM  = 000000DC            
BTIMADR        = 00000008            SS$_CMODSUPR   = 0000041C            SS$_ILLCNTRFUNC= 000000E4            
BTIMBUF        = 00000004            SS$_CMODUSER   = 00000424            SS$_ILLEFC     = 000000EC            
CENTURYDAYS    = 00008EAC            SS$_COMPAT     = 0000042C            SS$_ILLIOFUNC  = 000000F4            
COLON          = 0000003A            SS$_CONTINUE   = 00000001            SS$_ILLLBLAST  = 00000968            
CONVERT          0000019B R     03   SS$_CONTROLC   = 00000651            SS$_ILLPAGCNT  = 000000FC            
CVRTIME          000001CE R     03   SS$_CONTROLO   = 00000609            SS$_ILLSEQOP   = 000002DC            
DATE             0000003F R     03   SS$_CONTROLY   = 00000611            SS$_ILLSER     = 00000104            
DATETABLE        00000000 R     03   SS$_CREATED    = 00000619            SS$_ILLUSRLBLRD= 00000958            
DAY            = 00000004            SS$_CTRLERR    = 00000054            SS$_ILLUSRLBLWT= 00000960            
DELTA            0000004D R     03   SS$_DATACHECK  = 0000005C            SS$_INCVOLLABEL= 0000010C            
EXE$ASCTIM       00000065 RG    03   SS$_DATAOVERUN = 00000838            SS$_INSFARG    = 00000114            
EXE$BINTIM       00000106 RG    03   SS$_DEBUG      = 0000046C            SS$_INSFMEM    = 00000124            
EXE$GQ_SYSTIME   ********   X   03   SS$_DECOVF     = 000004A4            SS$_INSFRAME   = 0000012C            
EXE$NUMTIM       000002E4 RG    03   SS$_DEVACTIVE  = 000002C4            SS$_INSFWSL    = 0000011C            
GBL...         = 00000000            SS$_DEVALLOC   = 00000840            SS$_INTDIV     = 00000484            
HOUR           = 00000006            SS$_DEVALRALLOC= 00000641            SS$_INTOVF     = 0000047C            
HUNDREDTH      = 0000000C            SS$_DEVASSIGN  = 00000848            SS$_IVADDR     = 00000134            
HYPHEN         = 0000002D            SS$_DEVFOREIGN = 00000064            SS$_IVCHAN     = 0000013C            
IVTIME           000001C8 R     03   SS$_DEVICEFULL = 00000850            SS$_IVCHNLSEC  = 0000026C            
MINUTE         = 00000008            SS$_DEVMOUNT   = 0000006C            SS$_IVDEVNAM   = 00000144            
MONTH          = 00000002            SS$_DEVNOTALLOC= 00000858            SS$_IVGSDNAM   = 0000014C            
MONTHTAB         0000000C R     03   SS$_DEVNOTMBX  = 00000074            SS$_IVLOGNAM   = 00000154            
NINE           = 00000039            SS$_DEVNOTMOUNT= 0000007C            SS$_IVLOGTAB   = 0000015C            
NTIMADR        = 00000008            SS$_DEVOFFLINE = 00000084            SS$_IVPROTECT  = 000002F4            
NTIMBUF        = 00000004            SS$_DIRFULL    = 00000860            SS$_IVQUOTAL   = 00000164            
ONE            = 00000030            SS$_DRVERR     = 0000008C            SS$_IVSECFLG   = 0000016C            
PERIOD         = 0000002E            SS$_DUPFILENAME= 00000868            SS$_IVSECIDCTL = 000002E4            
QDAYSPCENT     = 00023AB1            SS$_DUPLNAM    = 00000094            SS$_IVSSRQ     = 00000174            
QDAYSPYEAR     = 000005B5            SS$_ENDOFFILE  = 00000870            SS$_IVSTSFLG   = 0000017C            
QUADRIDAYS     = 00023AB1            SS$_ENDOFTAPE  = 00000878            SS$_IVTIME     = 00000184            
QUADYEARDAYS   = 000005B5            SS$_ENDOFUSRLBL= 00000970            SS$_LCKPAGFUL  = 000000D4            
SECOND         = 0000000A            SS$_EXQUOTA    = 0000001C            SS$_LENVIO     = 0000018C            
SS$_ABORT      = 0000002C            SS$_EXTIDXFILE = 00000880            SS$_LKWSETFUL  = 00000194            
SS$_ACCONFLICT = 00000800            SS$_FCPREADERR = 00000888            SS$_MBFULL     = 000008D8            
SS$_ACCVIO     = 0000000C            SS$_FCPREPSTN  = 00000988            SS$_MBTOOSML   = 0000019C            
SS$_ACPVAFUL   = 000002FC            SS$_FCPREWNDERR= 00000890            SS$_MCHECK     = 000002BC            
SS$_ARTRES     = 00000474            SS$_FCPSPACERR = 00000898            SS$_MEDOFL     = 000001A4            
SS$_ASTFLT     = 0000040C            SS$_FCPWRITERR = 000008A0            SS$_MSGNOTFND  = 00000621            
SS$_BADATTRIB  = 00000034            SS$_FILACCERR  = 0000009C            SS$_MTLBLLONG  = 00000304            
SS$_BADCHKSUM  = 00000808            SS$_FILALRACC  = 000000A4            SS$_MUSTCLOSEFL= 00000948            
SS$_BADESCAPE  = 0000003C            SS$_FILELOCKED = 000008A8            SS$_NOAQB      = 00000314            
SS$_BADFILEHDR = 00000810            SS$_FILENUMCHK = 000008B0            SS$_NODATA     = 000001AC            
SS$_BADFILENAME= 00000818            SS$_FILESEQCHK = 000008B8            SS$_NOHANDLER  = 000008F8            
SS$_BADFILEVER = 00000820            SS$_FILESTRUCT = 000008C0            SS$_NOHOMEBLK  = 000008E0            
SS$_BADIMGHDR  = 00000044            SS$_FILNOTACC  = 000000AC            SS$_NOIOCHAN   = 000001B4            
SS$_BADIRECTORY= 00000828            SS$_FILNOTCNTG = 000002AC            SS$_NOLINKS    = 0000027C            
SS$_BADPARAM   = 00000014            SS$_FILNOTEXP  = 000000B4            SS$_NOLOGNAM   = 000001BC            
SS$_BADSTACK   = 000002B4            SS$_FLTDIV     = 00000494            SS$_NOMBX      = 00000274            
SS$_BEGOFFILE  = 00000938            SS$_FLTOVF     = 0000048C            SS$_NOMOREFILES= 00000930            
SS$_BLOCKCNTERR= 00000940            SS$_FLTUND     = 0000049C            SS$_NONEXDRV   = 000001C4            
SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page  17
SYMBOL TABLE                                                                                                                     (1)

SS$_NONEXPR    = 000008E8            SYS$NUMTIM       ********   X   03   
SS$_NONLOCAL   = 000008F0            TIME             00000052 R     03   
SS$_NOPRIV     = 00000024            TIMETABLE        0000003C R     03   
SS$_NORMAL     = 00000001            TIMOFF1        = 0001FE98            
SS$_NOSIGNAL   = 00000900            TIMOFF2        = 00016FEC            
SS$_NOSOLICIT  = 00000284            YEAR           = 00000000            
SS$_NOSUCHDEV  = 00000908            
SS$_NOSUCHFILE = 00000910            
SS$_NOSUCHNODE = 0000028C            
SS$_NOSUCHSEC  = 00000978            
SS$_NOTAPEOP   = 00000264            
SS$_NOTFILEDEV = 000001CC            
SS$_NOTINTBLSZ = 000001D4            
SS$_NOTLABELMT = 000001DC            
SS$_NOTMODIFIED= 00000659            
SS$_NOTNETDEV  = 000002EC            
SS$_NOTRAN     = 00000629            
SS$_NOTSQDEV   = 000001E4            
SS$_OPCCUS     = 00000434            
SS$_OPCDEC     = 0000043C            
SS$_OPINCOMPL  = 000002D4            
SS$_PAGOWNVIO  = 000001EC            
SS$_PAGRDERR   = 00000444            
SS$_PARITY     = 000001F4            
SS$_PARTESCAPE = 000001FC            
SS$_PFMBSY     = 00000204            
SS$_PLHLDR     = 00000404            
SS$_PSTFULL    = 0000020C            
SS$_RADRMOD    = 0000044C            
SS$_REJECT     = 00000294            
SS$_REMOTE     = 00000649            
SS$_RESIGNAL   = 00000918            
SS$_RESULTOVF  = 00000214            
SS$_ROPRAND    = 00000454            
SS$_SECTBLFUL  = 0000021C            
SS$_SSFAIL     = 0000045C            
SS$_SUBRNG     = 000004AC            
SS$_SUPERSEDE  = 00000631            
SS$_TAPEPOSLOST= 00000224            
SS$_TBIT       = 00000464            
SS$_TIMEOUT    = 0000022C            
SS$_TOOMANYVER = 00000990            
SS$_TOOMUCHDATA= 0000029C            
SS$_UNASEFC    = 00000234            
SS$_UNSAFE     = 0000023C            
SS$_UNWIND     = 00000920            
SS$_UNWINDING  = 00000928            
SS$_VASFULL    = 00000244            
SS$_VECINUSE   = 0000024C            
SS$_VOLINV     = 00000254            
SS$_WAITUSRLBL = 00000950            
SS$_WASCLR     = 00000001            
SS$_WASECC     = 00000639            
SS$_WASSET     = 00000009            
SS$_WRITLCK    = 0000025C            
SS$_WRONGACP   = 0000031C            
SYS$FAO          ********   X   03   
SYSCVRTIM       - SYSTEM SERVICES TO CONVERT TIME                21-AUG-1978 20:25:22   VAX-11 MACRO X0.3-11               Page  18
PROGRAM SECTION SYNOPSIS                                                                                                         (1)



PROGRAM SECTION SYNOPSIS

.  ABS  .        00000000      00     NOPIC   USR   CON   ABS   LCL NOSHR NOEXE NORD  NOWRT BYTE  
. BLANK .        00000000      01     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
$ABS$            00000000      02     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  
Y$EXEPAGED       000003F1      03     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  


THERE WERE NO ERRORS OR WARNINGS.
18396. BYTES LEFT IN FREE MEMORY POOL.
2694. BYTES OF RECLAIMED MEMORY.
OBJ$:SYSCVRTIM,LIS$:SYSCVRTIM/-SP=EXECML$/ML,SRC$:SYSCVRTIM
3 MLB DIR RDS - 324 GETS TO DEFINE 12 MACROS. 32 INTER. FILE WRITES. 
