RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page   1
026                                                                                                                              (1)

                                     0000     1 ;	UETP prefix file (contains macro library file specs).
                                     0000     2 ;
                                     0000     3 	.LIBRARY	/EXECML$/	;SYSTEM MACROS
                                     0000     4 	.LIBRARY	/LIBD$:[SYSTST.OBJ]SYSTST.MLB/ ; PRIVATE UETP,SYSTST LIB
                                     0000     5 	.LIST	MEB
                                     0000     6 ;
                                     0000    31 	$BEGIN RMSTEST,026,__RMSTEST,<USER ROUTINE TO CALL AND TEST RMS>,<LONG,GBL>
                                 00000000       	.PSECT	__RMSTEST,GBL,LONG,GBL
                                     0000    32 	.ENABL DBG
                                     0000    33 ;
                                     0000    34 .NLIST MEB
                                     0000    35 ;
                                     0000    36 ;  MACROS:
                                     0000    37 ;
                                     0000    38 	.MACRO	BUFF	NAM,SIZE
                                     0000    39 NAM'BUF::	.BLKB	SIZE
                                     0000    40 NAM'BSZ==SIZE
                                     0000    41 	.ENDM	BUFF
                                     0000    42 ;
                                     0000    43 	.MACRO	PROMPT	STRING,NULL,?L
                                     0000    44 	STORE	<STRING>,<.BYTE	13,10>
                                     0000    45 	MOVL	#$$.TMPX,CMDIRAB+RAB$L_PBF
                                     0000    46 	MOVB	#$$.TMPX1,CMDIRAB+RAB$B_PSZ
                                     0000    47 	$GET	RAB=CMDIRAB
                                     0000    48 	BLBS	R0,L
                                     0000    49 	BSBW	EOFDET
                                     0000    50 L:
                                     0000    51 	.IF NB NULL
                                     0000    52 	TSTW	CMDIRAB+RAB$W_RSZ
                                     0000    53 	BEQL	NULL
                                     0000    54 	.ENDC
                                     0000    55 	.ENDM	PROMPT
                                     0000    56 ;
                                     0000    57 ;
                                     0000    58 	.MACRO	TYPE	STRING,?L
                                     0000    59 	STORE	<STRING>
                                     0000    60 	BLBC	VERBOSITY,L
                                     0000    61 	MOVL	#$$.TMPX,CMDORAB+RAB$L_RBF
                                     0000    62 	MOVW	#$$.TMPX1,CMDORAB+RAB$W_RSZ
                                     0000    63 	$PUT	RAB=CMDORAB,ERR=REPORT_ERROR
                                     0000    64 	BSBW	ERR
                                     0000    65 L:
                                     0000    66 	.ENDM	TYPE
                                     0000    67 ;
                                     0000    68 	.MACRO	STORE	STRING,PRE
                                     0000    69 	.SAVE
                                     0000    70 	.PSECT	__$RMSNAM
                                     0000    71 	$$.TMPX=.
                                     0000    72 	PRE				; STORE ANY CARRIAGE CONTROL INFO
                                     0000    73 	.ASCII	%STRING%
                                     0000    74 	$$.TMPX1=.-$$.TMPX
                                     0000    75 	.RESTORE
                                     0000    76 	.ENDM	STORE
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page   2
026                                                                                                                              (1)

                                     0000    78 	.MACRO BEGIN TSTNAM
                                     0000    79 		STORE	<TSTNAM>
                                     0000    80 		MOVL	#$$.TMPX,BEG_DESCR+4		;ADDR
                                     0000    81 		MOVL	#$$.TMPX1,BEG_DESCR		;LEN
                                     0000    82 		BSBW	BEGPUT
                                     0000    83 	.ENDM	BEGIN
                                     0000    84 	.MACRO	FINISH	TSTNAM
                                     0000    85 		STORE	<TSTNAM>
                                     0000    86 		MOVL	#$$.TMPX,FIN_DESCR+4		;ADDR
                                     0000    87 		MOVL	#$$.TMPX1,FIN_DESCR		;LEN
                                     0000    88 		BSBW	FINPUT
                                     0000    89 	.ENDM	FINISH
                                     0000    90 	.MACRO	FIELD	FLDNAM
                                     0000    91 		STORE	<FLDNAM>
                                     0000    92 		MOVL	#$$.TMPX,FLD_DESCR+4		;ADDR
                                     0000    93 		MOVL	#$$.TMPX1,FLD_DESCR		;LEN
                                     0000    94 		BSBW	FLDPUT
                                     0000    95 	.ENDM	FIELD
                                     0000    96 	.MACRO	MBPT	?L				;BPT, MAYBE?
                                     0000    97 	BLBC	VERBOSITY,L
                                     0000    98 	BPT
                                     0000    99    L:
                                     0000   100 	.ENDM	MBPT
                                     0000   101 
                                     0000   102 	.MACRO SFNM	STRING
                                     0000   103 	STORE	<STRING>
                                     0000   104 	MOVB	#$$.TMPX1,STICKY_FAB2+FAB$B_FNS
                                     0000   105 	MOVL	#$$.TMPX,STICKY_FAB2+FAB$L_FNA
                                     0000   106 	.ENDM	SFNM
                                     0000   107 
                                     0000   108 	.MACRO	ALWAYS	STRING
                                     0000   109 	STORE	<STRING>
                                     0000   110 	MOVL	#$$.TMPX,CMDORAB+RAB$L_RBF
                                     0000   111 	MOVW	#$$.TMPX1,CMDORAB+RAB$W_RSZ
                                     0000   112 	$PUT	RAB=CMDORAB,ERR=REPORT_ERROR
                                     0000   113 	BSBW	ERR
                                     0000   114 	.ENDM	ALWAYS
                                     0000   115 
                           0000005D  0000   116 	RBRACK=93
                           0000003B  0000   117 	SEMI=59
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page   3
026                                                                                                                              (1)

                                 00000000   119 	.PSECT	__RMSTEST,GBL,LONG
                                     0000   120 ;
                                     0000   121 RELZERO:
                                     0000   122 .IF DF RMSDEBUG
                                     0000   123     CMDIFAB::	$FAB	FAC=<GET>,FNM=TST$INPUT:,MRS=132,RAT=CR
                                     0000   124     CMDOFAB::	$FAB	FAC=PUT,FNM=TST$OUTPUT:,MRS=132,RAT=CR,RFM=VAR
                                     0000   125 .IFF
                                     0000   126     CMDIFAB::	$FAB	FAC=<GET>,FNM=SYS$INPUT:,MRS=132,RAT=CR
                                     0050   127     CMDOFAB::	$FAB	FAC=PUT,FNM=SYS$OUTPUT:,MRS=132,RAT=CR,RFM=VAR
                                     00A0   128 .ENDC
                                     00A0   129 CMDIRAB::	$RAB	UBF=CMDBUF,USZ=CMDBSZ,FAB=CMDIFAB,ROP=PMT
                                     00E4   130 CMDORAB::	$RAB	UBF=CMDBUF,USZ=CMDBSZ,FAB=CMDOFAB
                                     0128   131 ;
                                     0128   132 INFAB::		$FAB	FAC=GET,FNA=PNSBUF,DNA=DNSBUF,NAM=NAMBLK
                                     0178   133 INRAB::		$RAB	UBF=CPYBUF,USZ=CPYBSZ,FAB=INFAB,RHB=RHBBUF,-
                                     0178   134 			MBC=4,MBF=-2
                                     01BC   135 OUTFAB::	$FAB	FAC=PUT,FNA=PNSBUF,DNA=DNSBUF,NAM=NAMBLK
                                     020C   136 OUTRAB::	$RAB	UBF=CPYBUF,USZ=CPYBSZ,RBF=CPYBUF,FAB=OUTFAB,ROP=EOF,-
                                     020C   137 			RHB=RHBBUF,MBC=8,MBF=1
                                     0250   138 NAMBLK::	$NAM	ESA=CMDBUF,ESS=CMDBSZ,RSA=RESBUF,RSS=RESBSZ
                                     0288   139 WCDNAM::	$NAM	ESA=WCDBUF,ESS=WCDBSZ,RSA=RWCBUF,RSS=RWCBSZ
                                     02C0   140 ;
                                     02C0   141 STICKY_FAB2:	$FAB	NAM=STICKY_NAMBLK,FOP=<OFP,CBT,SUP>,-
                                     02C0   142 			ALQ=4,FAC=PUT,DNM=<TST$DISK:>
                                     0310   143 STICKY_NAMBLK:	$NAM	RLF=RELATED_NAM,RSA=RESBUF,RSS=RESBSZ,ESA=EXPBUF,ESS=EXPBSZ
                                     0348   144 RELATED_NAM:	$NAM	RSA=REL_FILE   	  ;MUST SET RSL AT RUN-TIME
                  54 41 44 2E 53 54  0380   145 REL_FILE:	.ASCII /TS.DAT/
                           00000006  0386   146 REL_FILE_SIZE=.-REL_FILE
                                     0386   147 		.ALIGN	WORD
                           0000038C  0386   148 SAVE_FID:	.BLKB	6				;TO SAVE FID
                                     038C   149 		.ALIGN	LONG
                                     038C   150 OLDFAB::	$FAB	FNM=<TS.DAT>,DNM=<TST$DISK:>,NAM=OLDNAM
                                     03DC   151 NEWFAB::	$FAB	FNM=<TST$DISK:RENAMED.TST;32>,NAM=NEWNAM
                                     042C   152 OLDNAM::	$NAM	ESA=OLD_ESBUF,ESS=NAM$C_MAXRSS,-
                                     042C   153 			RSA=OLD_RSBUF,RSS=NAM$C_MAXRSS
                                     0464   154 NEWNAM::	$NAM	ESA=NEW_ESBUF,ESS=NAM$C_MAXRSS,-
                                     0464   155 			RSA=NEW_RSBUF,RSS=NAM$C_MAXRSS
                           0000051C  049C   156 OLD_ESBUF:	.BLKB	NAM$C_MAXRSS
                           0000059C  051C   157 OLD_RSBUF:	.BLKB	NAM$C_MAXRSS
                           0000061C  059C   158 NEW_ESBUF:	.BLKB	NAM$C_MAXRSS
                           0000069C  061C   159 NEW_RSBUF:	.BLKB	NAM$C_MAXRSS
                                     069C   160 		.ALIGN	LONG
                                     069C   161 ;
                                     069C   162 	BUFF	WCD,80
                                     06EC   163 	BUFF	RWC,80
                                     073C   164 	BUFF	EXP,64
                                     077C   165 	BUFF	RES,64
                           000007CC  07BC   166 RHBBUF:: .BLKB 16
                           00000000  07CC   167 DIRLEN: .LONG 	0
                           000007F8  07D0   168 DIRBUF: .BLKB 40
                           00000028  07F8   169 DIRDESC: .LONG 40
                           000007D0' 07FC   170 	 .LONG DIRBUF
            3A 54 53 45 54 53 4D 52  0800   171 ECHOBF: .ASCII	/RMSTEST:/	;MUST IMMEDIATELY PRECEDE CMDBUF
                                     0808   172 	BUFF	CMD,132
                           000008DC  088C   173 PNSBUF:: .BLKB 80
                                     08DC   174 	BUFF	DNS,80
                                     092C   175 	BUFF	CPY,512
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page   4
026                                                                                                                              (1)

                           00000B34  0B2C   176 	.BLKW	4
                               0000  0B34   177 DNSSIZ: .WORD	0		;SIZE OF DEFAULT NAME STRING
                           00000000  0B36   178 NAM::	.LONG	0		;ADDRESS OF NAMBLK FOR TST$SHOWNAM
                                 00  0B3A   179 CPYFLG:	.BYTE	0		;ZERO FOR COPY, 1 FOR APPEND
                                 00  0B3B   180 WCFLG:	.BYTE	0		;1 IF WILD CARD SPEC
                                 00  0B3C   181 ORGFLG:	.BYTE	0		;1 IF CHOICE OF ORG
                                 FF  0B3D   182 VSW:	.BYTE	-1		;VERIFY SWITCH
                                 00  0B3E   183 CMD:	.BYTE	0		;CHARACTER OF CURRENT COMMAND
                                     0B3F   184 	.ALIGN	LONG
                                     0B40   185 CPYBUFDSC:
                  0000092C'00000200  0B40   186 	.LONG	CPYBSZ,CPYBUF
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page   5
026                                                                                                                              (1)

                                     0B48   188 ;
                                     0B48   189 ;  FAO DATA
                                     0B48   190 ;
                  00000B58'0000003F' 0B48   191 FAOSTR:	.LONG	FSTR1LEN,FSTR1
                  00000808'00000084' 0B50   192 FAOBUF::	.LONG	CMDBSZ,CMDBUF
4F 49 54 41 52 45 50 4F 20 53 4D 52  0B58   193 FSTR1:	.ASCII	'RMS OPERATION ERROR!/   RMSTEST REL. PC = !XL'
20 20 20 2F 21 52 4F 52 52 45 20 4E  0B64       
2E 4C 45 52 20 54 53 45 54 53 4D 52  0B70       
         4C 58 21 20 3D 20 43 50 20  0B7C       
3D 20 2E 43 50 20 2E 53 42 41 20 20  0B85   194 	.ASCII	'  ABS. PC. = !XL!/'
                  2F 21 4C 58 21 20  0B91       
                           0000003F  0B97   195 FSTR1LEN=.-FSTR1
49 41 46 20 4E 57 4F 44 20 4E 55 52  0B97   196 RDMSG:	.ASCII 'RUN DOWN FAILURE - CONTINUING'
49 54 4E 4F 43 20 2D 20 45 52 55 4C  0BA3       
                     47 4E 49 55 4E  0BAF       
                           0000001D  0BB4   197 	RDMSGLEN=.-RDMSG
                                     0BB4   198 ;
                                     0BB4   199 ;  DESCRIPTORS FOR ASCII INSERTS INTO MESSAGES
                                     0BB4   200 ;
                                     0BB4   201 	.ALIGN	LONG
                  00000000 00000000  0BB4   202 BEG_DESCR::	.LONG	0,0
                  00000000 00000000  0BBC   203 FIN_DESCR::	.LONG	0,0
                  00000000 00000000  0BC4   204 FLD_DESCR::	.LONG	0,0
                  00000BDF'00000007' 0BCC   205 ILLSERDEC:	.LONG	ILLSERL,ILLSER
                  00000BDC'00000003' 0BD4   206 EOF_DSC:	.LONG	EXPEOF_LEN,EXPEOF
                           46 4F 45  0BDC   207 EXPEOF:	.ASCII	/EOF/
                           00000003  0BDF   208 EXPEOF_LEN=.-EXPEOF
                                     0BDF   209 ;
               6C 61 67 65 6C 6C 69  0BDF   210 ILLSER:	.ASCII /illegal/
                           00000007  0BE6   211 ILLSERL=.-ILLSER
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page   6
026                                                                                                                              (1)

                                     0BE6   213 ;
                                     0BE6   214 	;  SETUPS
                                     0BE6   215 ;
                               0000  0BE6   216 START::	.WORD	0
                                     0BE8   217 	$OPEN	FAB=CMDIFAB
            FF            50     E9  0BF3   218 	BLBC	R0,.			; TRAP ON ERROR
                                     0BF6   219 	$CONNECT	RAB=CMDIRAB
            FF            50     E9  0C01   220 	BLBC	R0,.			;TRAP ON ERROR
                                     0C04   221 	$OPEN	FAB=CMDOFAB
            FF            50     E9  0C0F   222 	BLBC	R0,.			; TRAP ON ERROR
                                     0C12   223 	$CONNECT	RAB=CMDORAB
            FF            50     E9  0C1D   224 	BLBC	R0,.			;TRAP ON ERROR
       FF0F CF       F62C CF     DE  0C20   225 	MOVAL	NAMBLK,NAM		;IN CASE OF ERROR
                          F3D6'  30  0C27   226 	BSBW	TRAN			;SET UP VERBOSITY FLAG
                                     0C2A   227 ;
                                     0C2A   228 ;  GET A COMMAND AND EXECUTE IT
                                     0C2A   229 ;
                                     0C2A   230 CMD_LOOP:
                     FF0E CF     94  0C2A   231 	CLRB	ORGFLG
       F4B5 CF            01     CA  0C2E   232 	BICL2	#RAB$M_ASY,CMDORAB+RAB$L_ROP	;INSURE CMD OUTPUT SYNC.
                                     0C33   233 	PROMPT	RMSTEST:,NULL=BR_COPY	;GET COMMAND
                          0EB5   30  0C58   234 ECHOIT:	BSBW	ECHO			;ECHO COMMAND LINE IF NON-INTERACTIVE
            50       FBA9 CF     90  0C5B   235 	MOVB	CMDBUF,R0		;PICK UP INPUT CHARACTER
            21            50     91  0C60   236 	CMPB	R0,#^A/!/		;COMMENT?
                          C5     13  0C63   237 	BEQL	CMD_LOOP		;BRANCH IF YES
            01       F459 CF     B1  0C65   238 	CMPW	CMDIRAB+RAB$W_RSZ,#1	;SINGLE BYTE INPUT?
                          42     12  0C6A   239 	BNEQ	QMARK
       FECD CF            50     90  0C6C   240 	MOVB	R0,CMD			;STORE COMMAND FOR POSSIBLE ACTION
                     F54B CF     D4  0C71   241 	CLRL	FAB$L_FOP+OUTFAB	;TURN OFF ANY STALE OPTIONS
                                     0C75   242 
                                     0C75   243 ;DECIDE WHERE TO GO
                                     0C75   244 ;
                                     0C75   245 	CASE	TYPE=B,SRC=R0,LIMIT=#^A/A/,-
                                     0C75   246 	DISPLIST=<TST$APPEND,TST$BLOCK,TST$COPY,TST$DEBUG,QMARK,TST$F,-
                                     0C75   247 		TST$GENERAL,HELP,QMARK,QMARK,TST$STICKY,TST$RELATIVE,-
                                     0C75   248 		TST$MTAPE,TST$NET,TST$ORG,TST$PRINT,QMARK,TST$RUNDWN,TST$SETDFLT,-
                                     0C75   249 		QMARK,TST$SETDDIR,SETVSW,QMARK,QMARK,QMARK,QMARK>
                                     0CAE   250 
                                     0CAE   251 QMARK:	ALWAYS	<?>					;TYPE ALWAYS
                                     0CD0   252 
                                     0CD0   253 CMD_LOOP_BR:
                          FF57   31  0CD0   254 	BRW	CMD_LOOP
                                     0CD3   255 
       FB2F CF         43 8F     90  0CD3   256 BR_COPY: MOVB	#^A/C/,CMDBUF		;DEFAULT TO 'C' COMMAND
                     F3E5 CF     B6  0CD9   257 	INCW	CMDIRAB+RAB$W_RSZ	;SAY 1 CHAR INPUT
                          FF78   31  0CDD   258 	BRW	ECHOIT			;GO PROCESS
                                     0CE0   259 
                                     0CE0   260 ;
                                     0CE0   261 SETVSW:	
            C7   00000000'EF     E9  0CE0   262 	BLBC	VERBOSITY,QMARK
       FE4F CF       FE52 CF     8E  0CE7   263 	MNEGB	VSW,VSW		;TOGGLE THE VERIFY SWITCH
                          E0     11  0CEE   264 	BRB	CMD_LOOP_BR
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page   7
026                                                                                                                              (1)

                                     0CF0   266 ;
                                     0CF0   267 ;  COPY ROUTINE  -  COPY INPUT FILE TO OUTPUT FILE
                                     0CF0   268 ;
                                     0CF0   269 TST$COPY:
                     FE47 CF     94  0CF0   270 	CLRB	WCFLG
                     FE42 CF     94  0CF4   271 	CLRB	CPYFLG
       FE37 CF       F554 CF     DE  0CF8   272 	MOVAL	NAMBLK,NAM	
                                     0CFF   273 COPY_PROMPT:
       FE39 CF         43 8F     90  0CFF   274 	MOVB	#^A/C/,CMD		;NO MATTER HOW WE GOT HERE (A,O,C,NULL)
                                     0D05   275 					;SIGNAL THIS IS A COPY
                                     0D05   276 	PROMPT	<INPUT FILE:>,NULL=CMD_LOOP_BR
       FAD7 CF       F394 CF     28  0D2A   277 	MOVC3	CMDIRAB+RAB$W_RSZ,CMDBUF,PNSBUF	; SAVE PRIMARY NAME STRING
                     FB58 CF         0D31       
       F421 CF       F38A CF     B0  0D34   278 	MOVW	CMDIRAB+RAB$W_RSZ,INFAB+FAB$B_FNS	; AND ITS LENGTH
       F41B CF       FDF5 CF     90  0D3B   279 	MOVB	DNSSIZ,INFAB+FAB$B_DNS			; SET DEFAULT STRING LEN
       F3FF CF            02     90  0D42   280 	MOVB	#FAB$M_CR,INFAB+FAB$B_RAT		; GET IMPLICIT LF IF TRM
                                     0D47   281 	$PARSE	FAB=INFAB,ERR=REPORT_ERROR	; PARSE, CHECKING FOR WC
                          0528   30  0D58   282 	BSBW	ERR
       F524 CF            08     E0  0D5B   283 	BBS	#NAM$V_WILDCARD,NAM$L_FNB+NAMBLK,WC
                          03         0D60       
                          008B   31  0D61   284 	BRW	NOWC
                                     0D64   285    WC:
       FDD2 CF            01     90  0D64   286 	MOVB	#1,WCFLG			; IT IS A WILDCARD SPEC
            50       F4EE CF     9A  0D69   287 	MOVZBL	NAMBLK+NAM$B_ESL,R0
       FA95 CF            50     28  0D6E   288 	MOVC3	R0,CMDBUF,WCDBUF		;SAVE PARSED STRING
                     F926 CF         0D73       
                                     0D76   289 						;LEN MUST BE A WORD, AT LEAST
       F4D5 CF            38     28  0D76   290 	MOVC3	#NAM$C_BLN,NAMBLK,WCDNAM	;COPY THE WHOLE NAMBLK
                     F50A CF         0D7B       
                                     0D7E   291 	$NAM_STORE	NAM=WCDNAM,ESA=WCDBUF,ESS=WCDBSZ,RSA=RWCBUF,ESS=RWCBUF
       F3B6 CF            50     D0  0D95   292 	MOVL	R0,INFAB+FAB$L_NAM		; USE WILDCARD NAMBLK FOR NOW ON
       FD97 CF            50     D0  0D9A   293 	MOVL	R0,NAM				; SET UP FOR TST$SHOWNAM
                                     0D9F   294 	$SEARCH	INFAB				; FIND 1ST ONE
   00000000'8F            50     D1  0DAA   295 	CMPL	R0,#RMS$_FNF			; ARE THERE ANY?
                          25     12  0DB1   296 	BNEQ	GOT_ONE				; GUESS SO
                                     0DB3   297 	ALWAYS	<NO SUCH FILES>
                          02C1   31  0DD5   298 	BRW	CLEAN				;CLEAN UP AND START OVER
                                     0DD8   299 GOT_ONE:
            0B            50     E8  0DD8   300 	BLBS	R0,10$
            5A       F349 CF     DE  0DDB   301 	MOVAL	INFAB,R10
                          043B   30  0DE0   302 	BSBW	REPORT_ERR
                          049D   30  0DE3   303 	BSBW	ERR
       F33D CF   01000000 8F     C8  0DE6   304 10$:	BISL	#FAB$M_NAM,FAB$L_FOP+INFAB	; NOW CAN OPEN BY FID
                                     0DEF   305 NOWC:	$OPEN	FAB=INFAB
            0B            50     E8  0DFA   306 	BLBS	R0,5$				; BRANCH ON SUCCESS
            5A       F327 CF     DE  0DFD   307 	MOVAL	INFAB,R10
                          0419   30  0E02   308 	BSBW	REPORT_ERR
                          047B   30  0E05   309 	BSBW	ERR
                          0C01   30  0E08   310 5$:	BSBW	TST$SHOWNAM
                                     0E0B   311 	$CONNECT	RAB=INRAB,ERR=REPORT_ERROR
                          0464   30  0E1C   312 	BSBW	ERR
                                     0E1F   313 ;
                                     0E1F   314 	PROMPT	<OUTPUT FILE:>,NULL=10$
                          03     11  0E44   315 	BRB	20$
                          0218   31  0E46   316 10$:	BRW	CLSINF
       F9B8 CF       F275 CF     28  0E49   317 20$:	MOVC3	CMDIRAB+RAB$W_RSZ,CMDBUF,PNSBUF
                     FA39 CF         0E50       
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page   8
026                                                                                                                              (1)

       F396 CF       F26B CF     B0  0E53   318 	MOVW	CMDIRAB+RAB$W_RSZ,OUTFAB+FAB$B_FNS
       F390 CF       FCD6 CF     90  0E5A   319 	MOVB	DNSSIZ,OUTFAB+FAB$B_DNS
       F372 CF       F2E1 CF     90  0E61   320 	MOVB	INFAB+FAB$B_RAT,OUTFAB+FAB$B_RAT	;SAME RECORD ATTRIBUTES
       F36C CF       F2DB CF     90  0E68   321 	MOVB	INFAB+FAB$B_RFM,OUTFAB+FAB$B_RFM
                                     0E6F   322 ;
                                     0E6F   323 ;  CREATE SPECIFIC SETUPS
                                     0E6F   324 ;
            37       FCC9 CF     E9  0E6F   325 	BLBC	ORGFLG,SAME_ORG		;IF JUST PLAIN COPY, ACTUALLY COPY ORG
                                     0E74   326 	PROMPT	<OUTPUT FILE ORG:>,NULL=SEQ_ORG	;ELSE ASK FOR IT, DEFAULT IS SEQ
            50       F96B CF     90  0E99   327 	MOVB	CMDBUF,R0
         52 8F            50     91  0E9E   328 	CMPB	R0,#^A/R/
                          10     12  0EA2   329 	BNEQ	SEQ_ORG			;IF NOT 'R', THEN SEQ
       F330 CF            10     90  0EA4   330 	MOVB	#FAB$C_REL,OUTFAB+FAB$B_ORG	;MAKE IT RELATIVE
                          0E     11  0EA9   331 	BRB	GO
                                     0EAB   332 SAME_ORG:
       F327 CF       F296 CF     90  0EAB   333 	MOVB	INFAB+FAB$B_ORG,OUTFAB+FAB$B_ORG		;COPY ORG
                          05     11  0EB2   334 	BRB	GO
                                     0EB4   335 SEQ_ORG:
       F320 CF            00     90  0EB4   336 	MOVB	#FAB$C_SEQ,OUTFAB+FAB$B_ORG	;MAKE IT SEQ
                                     0EB9   337 GO:
       F26A CF   01000000 8F     CB  0EB9   338 	BICL3	#FAB$M_NAM,INFAB+FAB$L_FOP,R0
                          50         0EC2       
       F2F8 CF            50     C8  0EC3   339 	BISL2	R0,OUTFAB+FAB$L_FOP		;COPY CTG BIT
       F323 CF       F292 CF     B0  0EC8   340 	MOVW	INFAB+FAB$W_MRS,OUTFAB+FAB$W_MRS
       F31E CF       F28D CF     D0  0ECF   341 	MOVL	INFAB+FAB$L_MRN,OUTFAB+FAB$L_MRN
       F31E CF       F28D CF     90  0ED6   342 	MOVB	INFAB+FAB$B_FSZ,OUTFAB+FAB$B_FSZ
       F2E8 CF       F257 CF     D0  0EDD   343 	MOVL	INFAB+FAB$L_ALQ,OUTFAB+FAB$L_ALQ
                     F310 CF     B4  0EE4   344 	CLRW	OUTFAB+FAB$W_BLS
            27       FC4E CF     E8  0EE8   345 	BLBS	CPYFLG,APPEND
                                     0EED   346 	BEGIN	<COPY>
                                     0EFE   347 	$CREATE	FAB=OUTFAB,ERR=REPORT_ERROR
                          0371   30  0F0F   348 	BSBW	ERR
                          6B     11  0F12   349 	BRB	CPYNAM
                                     0F14   350 ;
                                     0F14   351 APPEND:	BEGIN	<APPEND>
       F292 CF   02000000 8F     C8  0F25   352 	BISL2	#FAB$M_CIF,FAB$L_FOP+OUTFAB
                                     0F2E   353 	$CREATE	FAB=OUTFAB,ERR=REPORT_ERROR
                          0341   30  0F3F   354 	BSBW	ERR
       F275 CF   02000000 8F     CA  0F42   355 	BICL2	#FAB$M_CIF,FAB$L_FOP+OUTFAB
   00000000'8F       F275 CF     D1  0F4B   356 	CMPL	FAB$L_STS+OUTFAB,#RMS$_CREATED		; WAS FILE CREATED?
                          29     12  0F54   357 	BNEQ	CPYNAM					; BRANCH IF NOT
                                     0F56   358 	TYPE	<OUTPUT FILE CREATED!>
       FBB0 CF       F2CD CF     DE  0F7F   359 CPYNAM:	MOVAL	NAMBLK,NAM				;FOR TST$SHOWNAM
                          0A83   30  0F86   360 	BSBW	TST$SHOWNAM
                                     0F89   361 	$CONNECT	RAB=OUTRAB,ERR=REPORT_ERROR
                          02E6   30  0F9A   362 	BSBW	ERR
                                     0F9D   363 ;
                                     0F9D   364 COPY_LOOP:
                                     0F9D   365 	$GET	INRAB
   00000000'8F            50     D1  0FA8   366 	CMPL	R0,#RMS$_EOF
                          2B     13  0FAF   367 	BEQL	COPY_DONE
            0B            50     E8  0FB1   368 	BLBS	R0,10$
            5A       F1C0 CF     DE  0FB4   369 	MOVAL	INRAB,R10
                          0262   30  0FB9   370 	BSBW	REPORT_ERR
                          02C4   30  0FBC   371 	BSBW	ERR
       F268 CF       F1D7 CF     B0  0FBF   372 10$:	MOVW	INRAB+RAB$W_RSZ,OUTRAB+RAB$W_RSZ
                                     0FC6   373 	$PUT	RAB=OUTRAB,ERR=REPORT_ERROR
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page   9
026                                                                                                                              (1)

                          02A9   30  0FD7   374 	BSBW	ERR
                          C1     11  0FDA   375 	BRB	COPY_LOOP
                                     0FDC   376 ;
                                     0FDC   377 COPY_DONE:
                                     0FDC   378 	TYPE	<END OF INPUT FILE>
            54       FB32 CF     E9  1005   379 	BLBC	WCFLG,DONE			;IF NO WC, THEN REALLY DONE
                          00C1   30  100A   380 	BSBW	CLS_IN_FL
       FB22 CF       F277 CF     DE  100D   381 	MOVAL	WCDNAM,NAM			;USE WC NAMBLK FOR DURATION
                                     1014   382 	$SEARCH	INFAB				;LOOK FOR NEXT FILE
   00000000'8F            50     D1  101F   383 	CMPL	R0,#RMS$_NMF
                          42     13  1026   384 	BEQL	NO_MORE_FILES
            0B            50     E8  1028   385 	BLBS	R0,10$
            5A       F0F9 CF     DE  102B   386 	MOVAL	INFAB,R10
                          01EB   30  1030   387 	BSBW	REPORT_ERR
                          024D   30  1033   388 	BSBW	ERR
                                     1036   389 10$:	$OPEN	FAB=INFAB,ERR=REPORT_ERROR	;BY FID, AS SET BEFORE
                          09C2   30  1047   390 	BSBW	TST$SHOWNAM
                                     104A   391 	$CONNECT	RAB=INRAB,ERR=REPORT_ERROR
                          FF3F   31  105B   392 	BRW	COPY_LOOP
                          0096   30  105E   393 DONE:	BSBW	CLS_OUT_FL
                          006A   30  1061   394 CLSINF:	BSBW	CLS_IN_FL
                          00B9   30  1064   395 	BSBW	REPORT_END
                          FBC0   31  1067   396 	BRW	CMD_LOOP
                                     106A   397 
                                     106A   398 NO_MORE_FILES:
                                     106A   399 	TYPE	<NO MORE FILES>
                          0061   30  1093   400 	BSBW	CLS_OUT_FL			;CLOSE OUTPUT FILE
                          0087   30  1096   401 	BSBW	REPORT_END
       F08A CF   01000000 8F     CA  1099   402 CLEAN:	BICL	#FAB$M_NAM,FAB$L_FOP+INFAB	;NO MORE OPEN BY FID
       F0A7 CF       F1AA CF     DE  10A2   403 	MOVAL	NAMBLK,INFAB+FAB$L_NAM		;CAN USE ORDINARY NAMBLK AGAIN
       FA86 CF       F1A3 CF     DE  10A9   404 	MOVAL	NAMBLK,NAM			; DITTO
                          FB77   31  10B0   405 	BRW	CMD_LOOP
                                     10B3   406 
                                     10B3   407 ;
                                     10B3   408 ;
                                     10B3   409 ;  APPEND COMMAND
                                     10B3   410 ;
                                     10B3   411 TST$APPEND:
       FA82 CF            01     90  10B3   412 	MOVB	#1,CPYFLG
                     FA7F CF     94  10B8   413 	CLRB	WCFLG
       FA73 CF       F190 CF     DE  10BC   414 	MOVAL	NAMBLK,NAM
                          FC39   31  10C3   415 	BRW	COPY_PROMPT
                                     10C6   416 TST$ORG:				;ALLOWS YOU TO CHOSE ORG OF OUTPUT
       FA71 CF            01     90  10C6   417 	MOVB	#1,ORGFLG
                          FC22   31  10CB   418 	BRW	TST$COPY
                                     10CE   419 CLS_IN_FL:					;ROUTINE TO CLOSE INPUT FILE
                                     10CE   420 	$DISCONNECT	RAB=INRAB,ERR=REPORT_ERROR
                          01A1   30  10DF   421 	BSBW		ERR
                                     10E2   422 	$CLOSE		FAB=INFAB,ERR=REPORT_ERROR
                          018D   30  10F3   423 	BSBW		ERR
                                 05  10F6   424 	RSB
                                     10F7   425 
                                     10F7   426 CLS_OUT_FL:
                                     10F7   427 	$DISCONNECT	RAB=OUTRAB,ERR=REPORT_ERROR
                          0178   30  1108   428 	BSBW		ERR
                                     110B   429 	$CLOSE		FAB=OUTFAB,ERR=REPORT_ERROR
                          0164   30  111C   430 	BSBW		ERR
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  10
026                                                                                                                              (1)

                                 05  111F   431 	RSB
                                     1120   432 
                                     1120   433 REPORT_END:
            12       FA16 CF     E9  1120   434 	BLBC	CPYFLG,CPYEND			;BRANCH IF DOING COPY
                                     1125   435 	FINISH	<APPEND>
                                 05  1136   436 	RSB
                                     1137   437 CPYEND:	FINISH	<COPY>
                                 05  1148   438 	RSB
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  11
026                                                                                                                              (1)

                                     1149   440 TST$DEBUG:
            03   00000000'EF     E8  1149   441 	BLBS	VERBOSITY,10$
                          FB5B   31  1150   442 	BRW	QMARK
                                     1153   443    10$:	TYPE	<RMS DEBUG>
                                 03  117C   444 	BPT
                          FAAA   31  117D   445 	BRW	CMD_LOOP			; MORE CODE TO GO HERE
                                     1180   446 ;
                                     1180   447 ;
                                     1180   448 ;  SET UP DEFAULT NAME STRING
                                     1180   449 ;
                                     1180   450 TST$SETDFLT:
                                     1180   451 	PROMPT	<DEFAULT FILENAME STRING:>
       F98E CF       EF1F CF     90  119F   452 	MOVB	CMDIRAB+RAB$W_RSZ,DNSSIZ
       F65B CF       F98A CF     28  11A6   453 	MOVC3	DNSSIZ,CMDBUF,DNSBUF
                     F72C CF         11AD       
                          FA77   31  11B0   454 	BRW	CMD_LOOP
                                     11B3   455 ;
                                     11B3   456 CLOSE_UP:
                                     11B3   457 	ALWAYS	[EOF]
                                     11D5   458 	$DISCONNECT	CMDIRAB
                                     11E0   459 	$CLOSE	CMDIFAB
                                     11EB   460 	$CLOSE	CMDOFAB
                                     11F6   461 	$EXIT_S
                                     11FF   462 ; SUBROUTINE TO DETECT EOF (^Z) AND ERRORS AFTER PROMPT
                                     11FF   463 EOFDET:
   00000000'8F            50     D1  11FF   464 	CMPL	R0,#RMS$_EOF		;IS IT EOF?
                          AB     13  1206   465 	BEQL	CLOSE_UP		;MUST BE
            5A       EE94 CF     DE  1208   466 	MOVAL	CMDIRAB,R10		;SOME OTHER ERROR
                          000E   30  120D   467 	BSBW	REPORT_ERR		;REPORT IT
                          0070   30  1210   468 	BSBW	ERR			;CONTINUE?
                                 05  1213   469 	RSB				;THAT'S IT
                                     1214   470 ;  SUBROUTINE TO REPORT ERROR
                                     1214   471 ;
                                     1214   472 REPORT_ERROR::
                                     1214   473    ;AST TO CALL REPORT
                               0FFC  1214   474 	.WORD	^M<R2,R3,R4,R5,R6,R7,R8,R9,R10,R11>
            5A         04 AC     D0  1216   475 	MOVL	4(AP),R10			;STRUCTURE FROM RMS CALL
                          0015   30  121A   476 	BSBW	REPORT
                                 04  121D   477 	RET
                                     121E   478 REPORT_ERR::
                                     121E   479 	;ENTRY POINT TO ENTER REPORT IN-LINE, AS OPPOSED TO BY AST
                                     121E   480 	;SAVE R0, THEN PUSH STV AND R0 TO SET UP FOR CALL TO REPORT
                          50     DD  121E   481 	PUSHL	R0				;ERROR CODE IN R0
                                     1220   482 						;NOT IN STRUCTURE
                       0C AA     DD  1220   483 	PUSHL	FAB$L_STV(R10)
                          50     DD  1223   484 	PUSHL	R0
                                     1225   485 	$WAIT	CMDORAB
                          14     11  1230   486 	BRB	R
                                     1232   487 REPORT::
                                     1232   488   ;SUBROUTINE TO PRINT OUT ERROR
                                     1232   489   ;R10 IS THE STRUCTURE AT FAULT
                                     1232   490 	ASSUME	FAB$L_STS EQ RAB$L_STS		;COULD BE EITHER STRUCTURE
                       08 AA     DD  1232   491 	PUSHL	FAB$L_STS(R10)			;SAVE STATUS CODE
                                     1235   492 	$WAIT	CMDORAB
                       0C AA     DD  1240   493 	PUSHL	FAB$L_STV(R10)		;SET UP FOR LIB$PUT_MESG
                       08 AA     DD  1243   494 	PUSHL	FAB$L_STS(R10)
                          00     DD  1246   495 R:	PUSHL	#0			;NO. OF ARGS FOR FAO
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  12
026                                                                                                                              (1)

                 03E90003'8F     DD  1248   496 	PUSHL	#SHR$_RMSERROR+<RMSTEST@16>+3	;"RMS ERROR" MESSAGE
   00000000'9F            04     FB  124E   497 	CALLS	#4,@#LIB$SIGNAL
                                     1255   498 					;IF FNF IS THE ERROR, PRINT FILENAME
   00000000'8F            6E     D1  1255   499 	CMPL	(SP),#RMS$_FNF		;ERROR IS ON THE TOP OF THE STACK
                          22     12  125C   500 	BNEQ	10$
            5B         28 AA     D0  125E   501 	MOVL	FAB$L_NAM(R10),R11	;R10 IS THE GUILTY FAB, GET NAMBLK ADDR
                          1C     13  1262   502 	BEQL	10$			;IF NO NAMBLK, EXIT
       EE9C CF         0B AB     9B  1264   503 	MOVZBW	NAM$B_ESL(R11),RAB$W_RSZ+CMDORAB	;LENGTH OF FILENAM
                          14     13  126A   504 	BEQL	10$			;IF THERE IS NO NAME, EXIT
       EE9A CF         0C AB     D0  126C   505 	MOVL	NAM$L_ESA(R11),RAB$L_RBF+CMDORAB	;ADDR OF FILENAM
                                     1272   506 	$PUT	CMDORAB			;PRINT IT
            FF            50     E9  127D   507 	BLBC	R0,.			;TRAP IF ERROR
                          01     BA  1280   508 10$:	POPR	#^M<R0>			;RESTORE R0
                                 05  1282   509 	RSB
                                     1283   510 ;
                                     1283   511 ;THIS IS A ROUTINE TO ASK THE INTERACTIVE USER IF IT IS DESIRED TO CONTINUE
                                     1283   512 ;THE ABSOLUTE AND RELATIVE PC'S ARE DISPLAYED AND THEN 'CONTINUE' IS ASKED
                                     1283   513 ;
                                     1283   514 ERR::
            01            50     E9  1283   515 	BLBC	R0,ERR1
                                 05  1286   516 	RSB		;RETURN IF NO ERROR
                                     1287   517 ERR1:			;(SECONDARY ENTRY POINT IN CASE R0 MIGHT HAVE BEEN O.K.)
                                     1287   518 
   00000000'8F            50     D1  1287   519 	CMPL	R0,#SS$_ILLSER		;IF ILLEGAL SERVICE, NO MESG OUTPUT YET
                          1D     12  128E   520 	BNEQ	10$
            6E            14     C3  1290   521 	SUBL3	#20,(SP),R2		;SO OUTPUT ONE
                          52         1293       
                          50     DD  1294   522 	PUSHL	R0			;BETTER SAVE R0
                          52     DD  1296   523 	PUSHL	R2			;PC OF ERROR
                     F930 CF     DF  1298   524 	PUSHAL	ILLSERDEC		;DESCRIPTOR
                          02     DD  129C   525 	PUSHL	#2			;NUMBER OF ARGS
                 03E90002'8F     DD  129E   526 	PUSHL	#SHR$_SYSERROR+<RMSTEST*65536>+2	;MESG ID
   00000000'9F            04     FB  12A4   527 	CALLS	#4,@#LIB$SIGNAL
                          01     BA  12AB   528 	POPR	#^M<R0>			;RESTORE R0 AFTER MESG
                                     12AD   529 10$:
            6E            14     C3  12AD   530 	SUBL3	#20,(SP),-(SP)
                          7E         12B0       
            6E   00000000'8F     C3  12B1   531 	SUBL3	#RELZERO,(SP),-(SP)
                          7E         12B8       
                     F893 CF     7F  12B9   532 	PUSHAQ	FAOBUF
                     EE45 CF     3F  12BD   533 	PUSHAW	CMDORAB+RAB$W_RSZ
                     F883 CF     7F  12C1   534 	PUSHAQ	FAOSTR
   00000000'9F            05     FB  12C5   535 	CALLS	#5,@#SYS$FAO
            FF            50     E9  12CC   536 	BLBC	R0,.
       EE36 CF       F535 CF     9E  12CF   537 	MOVAB	CMDBUF,CMDORAB+RAB$L_RBF
                                     12D6   538 	$PUT	CMDORAB
            FF            50     E9  12E1   539 	BLBC	R0,.
            2E   00000000'EF     E9  12E4   540 	BLBC	VERBOSITY,POPPC
                                     12EB   541 	PROMPT	<CONTINUE?>,NULL=POPPC
         59 8F       F4F4 CF     91  1310   542 	CMPB	CMDBUF,#^A/Y/
                          01     12  1316   543 	BNEQ	POPPC
                                 05  1318   544 	RSB				; CONTINUE
                          01     BA  1319   545 POPPC:	POPR	#^M<R0>			; REMOVE RETURN PC
         43 8F       F81F CF     91  131B   546 	CMPB	CMD,#^A/C/		; IS IT A COPY COMMAND?
                          2D     12  1321   547 	BNEQ	CLBR1
                                     1323   548 	$CLOSE	FAB=INFAB		; IF SO, CLEAN UP, IGNORING ERRORS
                                     132E   549 	$CLOSE	FAB=OUTFAB
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  13
026                                                                                                                              (1)

       EDEA CF   01000000 8F     CA  1339   550 	BICL	#FAB$M_NAM,FAB$L_FOP+INFAB
       EE07 CF       EF0A CF     DE  1342   551 	MOVAL	NAMBLK,INFAB+FAB$L_NAM
       F7E6 CF       EF03 CF     DE  1349   552 	MOVAL	NAMBLK,NAM		; MAKE IT COMPLETELY RESTARTABLE
                          F8D7   31  1350   553 CLBR1:	BRW	CMD_LOOP
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  14
026                                                                                                                              (1)

                                     1353   555 ;
                                     1353   556 ;  'U' COMMAND  -  SET DEFAULT USER FILE DIRECTORY
                                     1353   557 ;
                                     1353   558 TST$SETDDIR:
                                     1353   559 	PROMPT	<DEFAULT UFD:>,NULL=CLBR1
       F489 CF       ED46 CF     28  1378   560 	MOVC3	CMDIRAB+RAB$W_RSZ,CMDBUF,PNSBUF
                     F50A CF         137F       
            52       ED3C CF     3C  1382   561 	MOVZWL	CMDIRAB+RAB$W_RSZ,R2		;COPY NAME STRING
       EDD0 CF            52     B0  1387   562 	MOVW	R2,INFAB+FAB$B_FNS		;AND LENGTH
                     EDCD CF     B4  138C   563 	CLRW	INFAB+FAB$B_DNS
                     F474 CF     DF  1390   564 	PUSHAL	CMDBUF			;BUILD DESCRIPTOR FOR NEW DEFAULT DIR
                          52     DD  1394   565 	PUSHL	R2			;  (ADDRESS AND LENGTH)
                     F45E CF     DF  1396   566 	PUSHAL	DIRDESC			;PUSH ARGS FOR SETDDIR (OUTPUT BUFF)
                     F42E CF     DF  139A   567 	PUSHAL	DIRLEN			;OUTPUT LENGTH
                       08 AE     DF  139E   568 	PUSHAL	8(SP)			;ADDR OF DESCRIPTOR
                                     13A1   569 	.IF NDF RMSDEBUG
   00000000'EF            03     FB  13A1   570 	CALLS	#3,SYS$SETDDIR		;SET DEFAULT DIRECTORY NAME
                                     13A8   571 	.IFF
                                     13A8   572 	CALLS	#3,RMD$SETDDIR
                                     13A8   573 	.ENDC
                          06     BA  13A8   574 	POPR	#^M<R1,R2>		;CLEAN UP STACK
            0B            50     E8  13AA   575 	BLBS	R0,CLBR2
            5A       ED77 CF     DE  13AD   576 	MOVAL	INFAB,R10
                          FE69   30  13B2   577 	BSBW	REPORT_ERR
                          FECB   30  13B5   578 	BSBW	ERR
                          F86F   31  13B8   579 CLBR2:	BRW	CMD_LOOP		;GET NEXT COMMAND
                                     13BB   580 ;
                                     13BB   581 BADUFD:	ALWAYS	<BAD DIRECTORY SPEC!>
                          DB     11  13DB   582 	BRB	CLBR2
                                     13DD   583 BADPARSE:
                                     13DD   584 	FIELD	<PARSED DIRECTORY SPEC>
                                     13EE   585 	MBPT
                          C0     11  13F6   586 	BRB	CLBR2
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  15
026                                                                                                                              (1)

                                     13F8   588 ;
                                     13F8   589 ;  'R' COMMAND  -  CALL I/O RUNDOWN
                                     13F8   590 ;
                                     13F8   591 TST$RUNDWN:
            03   00000000'EF     E8  13F8   592 	BLBS	VERBOSITY,10$
                          F8AC   31  13FF   593 	BRW	QMARK
                                     1402   594 10$:
                                     1402   595 	TYPE	<I/O RUNDOWN - IF SUCCESSFUL NO MORE IMAGE I/O!>
                          00     DD  1429   596 RD1:	PUSHL	#0			; RUNDOWN IMAGE ONLY
                     F711 CF     DF  142B   597 	PUSHAL	CPYBUFDSC
                                     142F   598 	.IF NDF RMSDEBUG
   00000000'9F            02     FB  142F   599 	CALLS	#2,@#SYS$RMSRUNDWN
                                     1436   600 	.IFF
                                     1436   601 	CALLS	#2,@#RMD$RMSRUNDWN
                                     1436   602 	.ENDC
            45            50     E8  1436   603 	BLBS	R0,RD2
                                     1439   604 ;
                                     1439   605 ;  GOT A PROBLEM  -  TRY WRITING TO CMD
                                     1439   606 ;
       ECCC CF       F75A CF     DE  1439   607 	MOVAL	RDMSG,CMDORAB+RAB$L_RBF
       ECC1 CF            1D     B0  1440   608 	MOVW	#RDMSGLEN,CMDORAB+RAB$W_RSZ
                                     1445   609 	$PUT	RAB=CMDORAB
            D6            50     E8  1450   610 	BLBS	R0,RD1
                          65     10  1453   611 	BSBB	REOPEN_CMD
                                     1455   612 	TYPE	<RUNDOWN ERROR - CONTINUING>
                          AB     11  147C   613 	BRB	RD1
                                     147E   614 ;
                                     147E   615 ;  RUN DOWN SUCCEEDED  -  REOPEN COMMAND INPUT CHANNEL
                                     147E   616 ;
                          3A     10  147E   617 RD2:	BSBB	REOPEN_CMD
                                     1480   618 	TYPE	<RUN DOWN SUCCEEDED>
                     EC7F CF     B4  14A7   619 	CLRW	INFAB+FAB$W_IFI
                     ED0F CF     B4  14AB   620 	CLRW	OUTFAB+FAB$W_IFI
                     ECC7 CF     B4  14AF   621 	CLRW	INRAB+RAB$W_ISI
                     ED57 CF     B4  14B3   622 	CLRW	OUTRAB+RAB$W_ISI
                          F770   31  14B7   623 	BRW	CMD_LOOP
                                     14BA   624 ;
                                     14BA   625 REOPEN_CMD:
                     EB44 CF     B4  14BA   626 	CLRW	CMDIFAB+FAB$W_IFI
                     EBE0 CF     B4  14BE   627 	CLRW	CMDIRAB+RAB$W_ISI
                                     14C2   628 	$OPEN	CMDIFAB
            FF            50     E9  14CD   629 	BLBC	R0,.
                                     14D0   630 	$CONNECT	CMDIRAB
            FF            50     E9  14DB   631 	BLBC	R0,.
                     EB70 CF     B4  14DE   632 	CLRW	CMDOFAB+FAB$W_IFI
                     EC00 CF     B4  14E2   633 	CLRW	CMDORAB+RAB$W_ISI
                                     14E6   634 	$OPEN	CMDOFAB
            FF            50     E9  14F1   635 	BLBC	R0,.
                                     14F4   636 	$CONNECT	CMDORAB
            FF            50     E9  14FF   637 	BLBC	R0,.
                                     1502   638 	ALWAYS	<COMMAND FAB REOPENED.>
                                 05  1522   639 	RSB
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  16
026                                                                                                                              (1)

                                     1523   641 ;
                                     1523   642 ;	'K' COMMAND - SET STICKINESS OF RELATED FILE
                                     1523   643 ;		- THEN TEST REMOVE,SEARCH,ENTER,SEARCH IN THAT ORDER
                                     1523   644 ;			- ALSO TESTS CONTIGUOUS-BEST-TRY ON CREATE
                                     1523   645 ;
                                     1523   646 ;
                                     1523   647 
                                     1523   648 
                                     1523   649 TST$STICKY:
                                     1523   650 	BEGIN	<RELATED FILENAME AND DIRECTORY TESTS>
       F5FB CF       EDD8 CF     DE  1534   651 	MOVAL	STICKY_NAMBLK,NAM		;IN CASE OF FNF ERROR
       EE0B CF            06     90  153B   652 	MOVB	#REL_FILE_SIZE,NAM$B_RSL+RELATED_NAM
                                     1540   653 ;
                                     1540   654 ; 	CHECK FOR SEPARATE PARSE FOLLOWED BY CREATE
                                     1540   655 ;
                                     1540   656 ;	FNM=TST$DISK:[]TS.*
                                     1540   657 ;	RELATED FILE SPEC=TS.DAT
                                     1540   658 ;
                                     1540   659 	SFNM		<[]TS.*;1>		;SPECIAL TEST FOR WILDCARDS
                                     154E   660 	$PARSE		FAB=STICKY_FAB2,ERR=REPORT_ERROR
                          FD23   30  155D   661 	BSBW	ERR
       ED5B CF   01000000 8F     C8  1560   662 	BISL2	#FAB$M_NAM,FAB$L_FOP+STICKY_FAB2	;DO CREATE WITH NAM BLK
                                     1569   663 	$CREATE		FAB=STICKY_FAB2,ERR=REPORT_ERROR
                          FD08   30  1578   664 	BSBW	ERR
                                     157B   665 	$CLOSE		FAB=STICKY_FAB2,ERR=REPORT_ERROR
                          FCF6   30  158A   666 	BSBW	ERR
                          0059   30  158D   667 	BSBW	MORE
                                     1590   668 ;
                                     1590   669 ;	CREATE A FILE WITH FNM=TST$DISK:.;1
                                     1590   670 ;		AND RELATED FILE SPEC = TS.DAT
                                     1590   671 ;	HOPEFULLY GETTING TS.DAT W/ CURRENT DEV AND UIC
                                     1590   672 ;
                                     1590   673 	SFNM	<;1>					;NEW FILENAME
                                     159E   674 					;NOTE: CAN'T HAVE .;1 SINCE THAT IMPLIES
                                     159E   675 					;EXPLICIT FILETYPE ( ALBEIT NULL)
       ED1D CF   01000000 8F     CA  159E   676 	BICL2	#FAB$M_NAM,FAB$L_FOP+STICKY_FAB2
                                     15A7   677 	$CREATE	FAB=STICKY_FAB2,ERR=REPORT_ERROR
                          FCCA   30  15B6   678 	BSBW	ERR
   00000000'8F            50     D1  15B9   679 	CMPL	R0,#RMS$_SUPERSEDE
                          11     13  15C0   680 	BEQL	OKSUP
                                     15C2   681 	FIELD	<STS (NOT = SUPERSEDE)>
                                     15D3   682 OKSUP:	$CLOSE	FAB=STICKY_FAB2,ERR=REPORT_ERROR
                          FC9E   30  15E2   683 	BSBW	ERR
                          02     10  15E5   684 	BSBB	MORE			;VERIFY RESULTANT NAME
                          3F     11  15E7   685 	BRB	NEXT
                                     15E9   686 ;
                                     15E9   687 ;  VERIFY RESULTANT NAME
                                     15E9   688 ;
       0040 8F         5D 8F     3A  15E9   689 MORE:	LOCC	#RBRACK,#RESBSZ,RESBUF	;TRY TO FIND RIGHT BRACKET
                     F18A CF         15EF       
                          18     13  15F2   690 	BEQL	10$			;BAD STRING
            50       ED88 CF     DE  15F4   691 	MOVAL	REL_FILE,R0
                          51     D6  15F9   692 	INCL	R1				;PASS BRACKET BY
            52            06     D0  15FB   693 	MOVL	#REL_FILE_SIZE,R2
            81            80     91  15FE   694 5$:	CMPB	(R0)+,(R1)+			;COMP NAM AND TYP
                          09     12  1601   695 	BNEQ	10$
            F8            52     F5  1603   696 	SOBGTR	R2,5$
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  17
026                                                                                                                              (1)

            3B            61     91  1606   697 	CMPB	(R1),#SEMI			;END OF RES TOO?
                          01     12  1609   698 	BNEQ	10$
                                 05  160B   699 	RSB				;WORKED
                                     160C   700 10$:	FIELD	<RESULTANT STRING>
                                     161D   701 	MBPT
                          F602   31  1625   702 	BRW	CMD_LOOP
                                     1628   703 ;
                                     1628   704 NEXT:	TYPE 	<STICKY CREATE WORKED>
                                     164F   705 ;
                                     164F   706 ;CREATED IT ALRIGHT - NOW ENTER IT CHECKING FOR LOWER VERSION
                                     164F   707 ;AND SEARCH FOR IT
                                     164F   708 ;
       ECC7 CF            02     82  164F   709 	SUBB2	#2,STICKY_NAMBLK+NAM$B_ESL	;GET RID OF VERSION IN EXP STR
                                     1654   710 						;JUST FOR GOOD MEASURE ZERO FNA
                     EC94 CF     D4  1654   711 	CLRL	STICKY_FAB2+FAB$L_FNA		;NO PRIMARY NAM STRING
                     EC98 CF     94  1658   712 	CLRB	STICKY_FAB2+FAB$B_FNS		;THEREFORE CLEAR LENGTH
                                     165C   713 	$ENTER	FAB=STICKY_FAB2,ERR=REPORT_ERROR ;ENTER TAKES EXP STR AS INPUT
                          FC15   30  166B   714 	BSBW	ERR
       ECD1 CF            0E     E0  166E   715 	BBS	#NAM$V_LOWVER,STICKY_NAMBLK+NAM$L_FNB,SOK
                          13         1673       
                                     1674   716 	FIELD <LOWER VERSION BIT IN FNB>
                          49     11  1685   717 	BRB	REM_SRCH
                                     1687   718 SOK:
            50       EC85 CF     DE  1687   719 	MOVAL	STICKY_NAMBLK,R0
         0C A0       F0EC CF     DE  168C   720 	MOVAL	RESBUF,NAM$L_ESA(R0)
         0B A0         03 A0     90  1692   721 	MOVB	NAM$B_RSL(R0),NAM$B_ESL(R0)
                                     1697   722 	$SEARCH	FAB=STICKY_FAB2,ERR=REPORT_ERROR
                          FBDA   30  16A6   723 	BSBW	ERR
                                     16A9   724 	TYPE	<ENTER WITH LOWER VERSION AND SEARCH OK >
                                     16D0   725 ;
                                     16D0   726 ;NOW REMOVE THAT NEWEST ENTRY AND SEARCH FOR IT, HOPING THE SEARCH FAILS
                                     16D0   727 ;
                                     16D0   728 REM_SRCH:
            50       EC3C CF     DE  16D0   729 	MOVAL	STICKY_NAMBLK,R0
       ECAB CF         24 A0     D0  16D5   730 	MOVL	NAM$W_FID(R0),SAVE_FID
       ECA9 CF         28 A0     B0  16DB   731 	MOVW	NAM$W_FID+4(R0),SAVE_FID+4	;SAVE FID FOR LATER
                                     16E1   732 	$NAM_STORE NAM=STICKY_NAMBLK,FID=#0	;ZERO IT
                                     16EC   733 	$REMOVE	FAB=STICKY_FAB2,ERR=REPORT_ERROR	;REMOVE THE DIR. ENTRY
                          FB85   30  16FB   734 	BSBW	ERR
            50       EC0E CF     DE  16FE   735 	MOVAL	STICKY_NAMBLK,R0
         0C A0       F075 CF     DE  1703   736 	MOVAL	RESBUF,NAM$L_ESA(R0)	;MOVE RESULTANT STR ADDR TO ESA
         0B A0         03 A0     90  1709   737 	MOVB	NAM$B_RSL(R0),NAM$B_ESL(R0)
                                     170E   738 	$SEARCH STICKY_FAB2			;LOOK FOR IT
       EBFC CF       F01F CF     DE  1719   739 	MOVAL 	EXPBUF,NAM$L_ESA+STICKY_NAMBLK
   00000000'8F            50     D1  1720   740 	CMPL	R0,#RMS$_FNF			;BETTER NOT BE THERE
                          40     13  1727   741 	BEQL	OK
   00000000'8F            50     D1  1729   742 	CMPL	R0,#RMS$_NORMAL		;BUT IT WAS
                          29     12  1730   743 	BNEQ	CHK
                                     1732   744 	TYPE	<SYS$REMOVE DIDN'T DO ITS JOB>
                          35     11  1759   745 	BRB	OUT
            0B            50     E8  175B   746 CHK:	BLBS	R0,10$
            5A       EB5E CF     DE  175E   747 	MOVAL	STICKY_FAB2,R10
                          FAAE   30  1763   748 	BSBW	REPORT_ERROR
                          FB1A   30  1766   749 	BSBW	ERR
                                     1769   750 10$:
                                     1769   751 OK:
                                     1769   752 	TYPE	<REMOVE AND SEARCH OK>
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  18
026                                                                                                                              (1)

                                     1790   753 OUT:
                                     1790   754 	$NAM_STORE NAM=STICKY_NAMBLK,FID=SAVE_FID	;RESTORE FID
                                     17A1   755 ;
                                     17A1   756 ;  NOW TEST $RENAME FUNCTION BY RENAMING TS.DAT TO RENAMED.TST;32 AND BACK.
                                     17A1   757 ;
                                     17A1   758 	$NAM_STORE	NAM=OLDNAM,ESL=#0,RSL=#0
                                     17AC   759 	$NAM_STORE	NAM=NEWNAM,ESL=#0,RSL=#0
                                     17B7   760 	$RENAME	OLDFAB=OLDFAB,NEWFAB=NEWFAB,ERR=REPORT_ERROR
                          FAB4   30  17CC   761 	BSBW	ERR
                                     17CF   762 	TYPE	<FILE RENAMED!>
                     F343 CF     95  17F6   763 	TSTB	VSW
                          62     19  17FA   764 	BLSS	RERENM				;OMIT PRINTOUT IF NOT WANTED
                                     17FC   765 	TYPE	<OLD NAME:>
       F30C CF       EC05 CF     DE  1823   766 	MOVAL	OLDNAM,NAM
                          01DF   30  182A   767 	BSBW	TST$SHOWNAM
                                     182D   768 	TYPE	<NEW NAME:>
       F2DB CF       EC0C CF     DE  1854   769 	MOVAL	NEWNAM,NAM
                          01AE   30  185B   770 	BSBW	TST$SHOWNAM
                                     185E   771 RERENM:	$RENAME	OLDFAB=NEWFAB,NEWFAB=OLDFAB,ERR=REPORT_ERROR	;RE-RENAME FILE
                          FA0D   30  1873   772 	BSBW	ERR
                                     1876   773 	TYPE	<ORIGINAL FILENAME RESTORED>
                                     189D   774 ;
                                     189D   775 ;NOW OPEN THE ORIGINAL FILE BY FILE ID AND DELETE IT ON CLOSE BY FID
                                     189D   776 ;
       EA1E CF   01000000 8F     C8  189D   777 	BISL	#FAB$M_NAM, FAB$L_FOP+STICKY_FAB2	;OPEN BY FID
       EA15 CF   00300000 8F     CA  18A6   778 	BICL	#FAB$M_CBT!FAB$M_CTG,FAB$L_FOP+STICKY_FAB2	;TO DO CBT TEST
                                     18AF   779 	$OPEN	FAB=STICKY_FAB2,ERR=REPORT_ERROR	;OPEN ORIG. FILE
                          F9C2   30  18BE   780 	BSBW	ERR
       E9FE CF            15     E0  18C1   781 	BBS	#FAB$V_CBT,FAB$L_FOP+STICKY_FAB2,CBTOK
                          11         18C6       
                                     18C7   782 	FIELD	<CBT BIT CLEAR, THEREFORE>
                                     18D8   783 CBTOK:
       E9E7 CF            14     E1  18D8   784 	BBC	#FAB$V_CTG,FAB$L_FOP+STICKY_FAB2,CTGOK
                          11         18DD       
                                     18DE   785 	FIELD	<CTG BIT SET, THEREFORE>
                                     18EF   786   CTGOK:
       E9CC CF   00008000 8F     C8  18EF   787 	BISL	#FAB$M_DLT, FAB$L_FOP+STICKY_FAB2
                                     18F8   788 	$CLOSE	FAB=STICKY_FAB2,ERR=REPORT_ERROR	;DELETE BY FID ON CLOSE
                          F979   30  1907   789 	BSBW	ERR
                                     190A   790 	TYPE	<TS.DAT DELETED ON CLOSE>
       E98A CF   01008000 8F     CA  1931   791 	BICL	#FAB$M_NAM!FAB$M_DLT, FAB$L_FOP+STICKY_FAB2	;FOR NEXT TIME
       F1F5 CF       E912 CF     DE  193A   792 	MOVAL	NAMBLK,NAM					;DITTO
                                     1941   793 	FINISH	<RELATED FILENAME AND DIRECTORY TESTS>
                          F2D5   31  1952   794 	BRW	CMD_LOOP
                                     1955   795 
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  19
026                                                                                                                              (1)

                                     1955   797 ;
                                     1955   798 ;  GENERAL RMS TESTS
                                     1955   799 ;
                                     1955   800 ;	TEST 1
                                     1955   801 ;
                                     1955   802 ;  SEQUENTIAL FILE ORG, DISK, VFC RFM
                                     1955   803 TST$GENERAL:
   00000000'EF            00     FB  1955   804 	CALLS	#0,RMT$TEST_1A
                          F2CB   31  195C   805 	BRW	CMD_LOOP
                                     195F   806 
                                     195F   807 
                                     195F   808 
                                     195F   809 ;
                                     195F   810 ;	BLOCK I/O TESTS
                                     195F   811 ;
                                     195F   812 ;
                                     195F   813 ;		TEST	2
                                     195F   814 ;
                                     195F   815 TST$BLOCK:
   00000000'EF            00     FB  195F   816 	CALLS	#0,TST$BLOCKIO
                          F2C1   31  1966   817 	BRW	CMD_LOOP
                                     1969   818 
                                     1969   819 
                                     1969   820 
                                     1969   821 ;
                                     1969   822 ;	RELATIVE TESTS
                                     1969   823 ;
                                     1969   824 ;		TEST 3
                                     1969   825 ;
                                     1969   826 TST$RELATIVE:
   00000000'EF            00     FB  1969   827 	CALLS	#0,RMT$TEST_3A
                          F2B7   31  1970   828 	BRW	CMD_LOOP
                                     1973   829 
                                     1973   830 
                                     1973   831 
                                     1973   832 ;
                                     1973   833 ;	FLUSH AND FHC XAB TESTS
                                     1973   834 ;
                                     1973   835 ;		TEST 4
                                     1973   836 ;
                                     1973   837 TST$F:
   00000000'EF            00     FB  1973   838 	CALLS	#0,RMT$TEST_4A
                          F2AD   31  197A   839 	BRW	CMD_LOOP
                                     197D   840 
                                     197D   841 
                                     197D   842 
                                     197D   843 ;
                                     197D   844 ;	MAGTAPE TESTS
                                     197D   845 ;
                                     197D   846 ;		TEST 6
                                     197D   847 ;
                                     197D   848 TST$MTAPE:
   00000000'EF            00     FB  197D   849 	CALLS	#0,TST$MTA
                          F2A3   31  1984   850 	BRW	CMD_LOOP
                                     1987   851 
                                     1987   852 
                                     1987   853 ;
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  20
026                                                                                                                              (1)

                                     1987   854 ;	NETWORK TESTS
                                     1987   855 ;
                                     1987   856 ;
                                     1987   857 TST$NET:
                                     1987   858 ;	COMMENT CALL UNTIL TST$NETWORK IS IMPLEMENTED
                                     1987   859 ;		TO PREVENT AN UNDEFINED SYMBOL AT LINK-TIME
                                     1987   860 ;	CALLS	#0,TST$NETWORK
                          F2A0   31  1987   861 ABORTP:	BRW	CMD_LOOP
                                     198A   862 ;
                                     198A   863 ;	PRINT OR SUBMIT OUTPUT FILE
                                     198A   864 ;
                                     198A   865 ;
                                     198A   866 TST$PRINT:
                                     198A   867 	PROMPT	<PRINT (P) OR SUBMIT COMMAND FILE (S)?>,NULL=ABORTP
         50 8F       EE55 CF     91  19AF   868 	CMPB	CMDBUF,#^A/P/
                          0B     12  19B5   869 	BNEQ	10$
       E800 CF   00002000 8F     C8  19B7   870 	BISL2	#FAB$M_SPL,FAB$L_FOP+OUTFAB
                          11     11  19C0   871 	BRB	20$
         53 8F       EE42 CF     91  19C2   872 10$:	CMPB	CMDBUF,#^A/S/
                          BD     12  19C8   873 	BNEQ	ABORTP
       E7ED CF   00004000 8F     C8  19CA   874 	BISL2	#FAB$M_SCF,FAB$L_FOP+OUTFAB
                                     19D3   875 20$:	PROMPT	<DELETE FILE AFTER QUEUING?>,NULL=30$
         59 8F       EE0C CF     91  19F8   876 	CMPB	CMDBUF,#^A/Y/
                          09     12  19FE   877 	BNEQ	30$
       E7B7 CF   00008000 8F     C8  1A00   878 	BISL2	#FAB$M_DLT,FAB$L_FOP+OUTFAB
                          F2E4   31  1A09   879 30$:	BRW	TST$COPY
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  21
026                                                                                                                              (1)

                                     1A0C   881 ;
                                     1A0C   882 ;  SUBROUTINE TO PRINT THE EXPANDED AND RESULTANT NAME STRINGS FROM
                                     1A0C   883 ;  THE NAM BLOCK -- THE ADDRESS OF THE NAM BLOCK IS FOUND IN NAM
                                     1A0C   884 ;
                                     1A0C   885 TST$SHOWNAM:
                     F12D CF     95  1A0C   886 	TSTB	VSW			;LONG TYPEOUT WANTED?
                          73     19  1A10   887 	BLSS	RTN			;BRANCH IF YES
            54       F120 CF     D0  1A12   888 	MOVL	NAM,R4			;GET ADDR OF NAMBLK IN R4
                                     1A17   889 	TYPE	<EXPANDED NAME STRING:>
                          46     10  1A3E   890 	BSBB	TYPEXP			;TYPE EXPANDED NAME STRING
                                     1A40   891 	TYPE	<RESULTANT NAME STRING:>
       E699 CF         03 A4     9B  1A67   892 	MOVZBW	NAM$B_RSL(R4),CMDORAB+RAB$W_RSZ
       E699 CF         04 A4     D0  1A6D   893 	MOVL	NAM$L_RSA(R4),CMDORAB+RAB$L_RBF
                                     1A73   894 	$PUT	RAB=CMDORAB,ERR=REPORT_ERROR
                          F7FE   30  1A82   895 	BSBW	ERR
                                 05  1A85   896 RTN:	RSB
                                     1A86   897 ;
                                     1A86   898 ;  PRINT EXPANDED NAME STRING
                                     1A86   899 ;		R4 MUST POINT TO A NAMBLK
                                     1A86   900 ;
       E67A CF         0B A4     9B  1A86   901 TYPEXP:	MOVZBW	NAM$B_ESL(R4),CMDORAB+RAB$W_RSZ
       E67A CF         0C A4     D0  1A8C   902 	MOVL	NAM$L_ESA(R4),CMDORAB+RAB$L_RBF
                                     1A92   903 	$PUT	RAB=CMDORAB,ERR=REPORT_ERROR
                          F7DF   30  1AA1   904 	BSBW	ERR
                                 05  1AA4   905 	RSB
                                     1AA5   906 ;
                                     1AA5   907 ;	ROUTINES TO ISSUE MESSAGES
                                     1AA5   908 ;
                                     1AA5   909 ;
                           000003E9  1AA5   910 		RMSTEST == 1001			;FACILITY CODE FOR RMSTEST
                                     1AA5   911 ;
                                     1AA5   912 ;
                                     1AA5   913 BEGPUT::
                          00     DD  1AA5   914 		PUSHL	#0				;GET CURRENT TIME
                     F109 CF     DF  1AA7   915 		PUSHAL	BEG_DESCR			;STRING DESCR
                          02     DD  1AAB   916 		PUSHL	#2				;# OF FAO ARGS
                 03E90003'8F     DD  1AAD   917 		PUSHL	#SHR$_BEGINT+<RMSTEST*65536>+3	;MESSAGE CODE
   00000000'9F            04     FB  1AB3   918 		CALLS	#4,@#LIB$SIGNAL
                                 05  1ABA   919 		RSB
                                     1ABB   920 FINPUT::
                          00     DD  1ABB   921 		PUSHL	#0			;CURRENT TIME
                     F0FB CF     DF  1ABD   922 		PUSHAL	FIN_DESCR		;STRING DESCR
                          02     DD  1AC1   923 		PUSHL	#2			;# OF FAO ARGS
                 03E90003'8F     DD  1AC3   924 		PUSHL	#SHR$_ENDEDT+<RMSTEST*65536>+3	;MESSAGE ID
   00000000'9F            04     FB  1AC9   925 		CALLS	#4,@#LIB$SIGNAL
                                 05  1AD0   926 		RSB
                                     1AD1   927 FLDPUT::
            6E            15     C3  1AD1   928 		SUBL3	#21,(SP),R2	;TRY TO FIND ABS. PC OF ERROR
                          52         1AD4       
                          50     DD  1AD5   929 		PUSHL	R0			;SAVE STATUS CODE, IF NEC.
                          52     DD  1AD7   930 		PUSHL	R2			;PC
                     F0E7 CF     DF  1AD9   931 		PUSHAL	FLD_DESCR		;STRING DESCR
                          02     DD  1ADD   932 		PUSHL	#2			;# OF FAO ARGS
                 03E90002'8F     DD  1ADF   933 		PUSHL	#SHR$_BADFIELD+<RMSTEST*65536>+2	;MESSAGE ID
   00000000'9F            04     FB  1AE5   934 		CALLS	#4,@#LIB$SIGNAL
                          01     BA  1AEC   935 		POPR	#^M<R0>			;RESTORE R0
                                 05  1AEE   936 		RSB
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  22
026                                                                                                                              (1)

                                     1AEF   937 ;
                                     1AEF   938 ;SUBROUTINE TO ISSUE "EXPECTED EOF NOT RECEIVED" MESG, AND DISPLAY ACTUAL ERROR
                                     1AEF   939 ;R10 POINTS TO THE STRUCTURE AT FAULT, FOR REPORT_ERR
                                     1AEF   940 ;
            6E            05     C3  1AEF   941 EOFPUT::	SUBL3	#5,(SP),R2
                          52         1AF2       
                          50     DD  1AF3   942 		PUSHL	R0				;SAVE STATUS, IF NEC.
                     F0DB CF     DF  1AF5   943 		PUSHAL	EOF_DSC				;"EOF" ARG FOR  FAO
                          01     DD  1AF9   944 		PUSHL	#1				;# OF ARGS, FOR FAO
                 03E90003'8F     DD  1AFB   945 		PUSHL	#SHR$_UNXPCTSTS+<RMSTEST@16>+3	;ERROR CODE
   00000000'9F            03     FB  1B01   946 		CALLS	#3,@#LIB$SIGNAL
                          01     BA  1B08   947 		POPR	#^M<R0>				;RESTORE STATUS
                          F711   30  1B0A   948 		BSBW	REPORT_ERR			;FIND OUT WHAT ERROR WAS
                          F777   31  1B0D   949 		BRW	ERR1				;CONTINUE?,EVEN IF R0=SUC
                                     1B10   950 ;
                                     1B10   951 ;  ROUTINE TO ECHO THE COMMAND IF COMMAND OUTPUT NOT TO A TERMINAL
                                     1B10   952 ;
            2B   00000000'EF     E9  1B10   953 ECHO:	BLBC	VERBOSITY,10$				;OMIT IF LOW VERBOSITY
       E570 CF   00000000'8F     E0  1B17   954 	BBS	#DEV$V_TRM,CMDOFAB+FAB$L_DEV,10$	;OR IF TERMINAL OUTPUT
                          21         1B20       
       E59C CF            08     A1  1B21   955 	ADDW3	#8,CMDIRAB+RAB$W_RSZ,CMDORAB+RAB$W_RSZ	;ADD SIZE OF PROMPT TO LEN
                     E5DD CF         1B26       
       E5DC CF       ECD3 CF     DE  1B29   956 	MOVAL	ECHOBF,CMDORAB+RAB$L_RBF		;ADDRESS OF OUTPUT LINE
                                     1B30   957 	$PUT	RAB=CMDORAB,ERR=REPORT_ERROR
                          F741   30  1B3F   958 	BSBW	ERR
                                 05  1B42   959 10$:	RSB
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  23
026                                                                                                                              (1)

                           00000003  1B43   961 	.MDELETE	 $FAB,$RAB,$NAM
                           00000001  1B43   962 	.MDELETE	$FAB_STORE,$NAM_STORE,$RAB_STORE
                                     1B43   963 ;
                                     1B43   964 ;
                                     1B43   965 ;		'H' SWITCH FOR HELP !!!!!!
                                     1B43   966 ;
                                     1B43   967 HELP:
            03   00000000'EF     E8  1B43   968 	BLBS	VERBOSITY,10$
                          F161   31  1B4A   969 	BRW	QMARK
                                     1B4D   970    10$:
                                     1B4D   971 	.SAVE
                                 00000349   972 	.PSECT	__$RMSNAM
                                     0349   973 HLPMSG:
0D 44 4E 45 50 50 41 20 2D 2D 20 41  0349   974 	.ASCII	/A -- APPEND/<13><10>
                                 0A  0355       
49 20 4B 43 4F 4C 42 20 2D 2D 20 42  0356   975 	.ASCII	%B -- BLOCK I/O%<13><10>
                        0A 0D 4F 2F  0362       
   0A 0D 59 50 4F 43 20 2D 2D 20 43  0366   976 	.ASCII	/C -- COPY/<13><10>
0A 0D 47 55 42 45 44 20 2D 2D 20 44  0371   977 	.ASCII	/D -- DEBUG/<13><10>
20 48 53 55 4C 46 24 20 2D 2D 20 46  037D   978 	.ASCII	/F -- $FLUSH AND FHC XAB TESTS/<13><10>
20 42 41 58 20 43 48 46 20 44 4E 41  0389       
               0A 0D 53 54 53 45 54  0395       
4C 41 52 45 4E 45 47 20 2D 2D 20 47  039C   979 	.ASCII	/G -- GENERAL SEQUENTIAL TESTS/<13><10>
20 4C 41 49 54 4E 45 55 51 45 53 20  03A8       
               0A 0D 53 54 53 45 54  03B4       
45 4D 20 53 49 48 54 20 2D 2D 20 48  03BB   980 	.ASCII	/H -- THIS MESSAGE/<13><10>
               0A 0D 45 47 41 53 53  03C7       
20 59 4B 43 49 54 53 20 2D 2D 20 4B  03CE   981 	.ASCII	/K -- STICKY CREATE,DIRECTORY TESTS/<13><10>
43 45 52 49 44 2C 45 54 41 45 52 43  03DA       
0A 0D 53 54 53 45 54 20 59 52 4F 54  03E6       
4C 41 52 45 4E 45 47 20 2D 2D 20 4C  03F2   982 	.ASCII	/L -- GENERAL RELATIVE TESTS/<13><10>
45 54 20 45 56 49 54 41 4C 45 52 20  03FE       
                     0A 0D 53 54 53  040A       
45 50 41 54 47 41 4D 20 2D 2D 20 4D  040F   983 	.ASCII	/M -- MAGTAPE TESTS/<13><10>
            0A 0D 53 54 53 45 54 20  041B       
20 54 45 4E 43 45 44 20 2D 2D 20 4E  0423   984 	.ASCII	/N -- DECNET TESTS/<13><10>
               0A 0D 53 54 53 45 54  042F       
49 57 20 59 50 4F 43 20 2D 2D 20 4F  0436   985 	.ASCII	/O -- COPY WITH CHOICE OF FILE ORG FOR OUTPUT FILE/<13><10>
46 4F 20 45 43 49 4F 48 43 20 48 54  0442       
4F 46 20 47 52 4F 20 45 4C 49 46 20  044E       
4C 49 46 20 54 55 50 54 55 4F 20 52  045A       
                           0A 0D 45  0466       
4F 20 54 4E 49 52 50 20 2D 2D 20 50  0469   986 	.ASCII	/P -- PRINT OR SUBMIT COMMAND FILE/<13><10>
4D 4F 43 20 54 49 4D 42 55 53 20 52  0475       
   0A 0D 45 4C 49 46 20 44 4E 41 4D  0481       
4E 55 52 20 4F 2F 49 20 2D 2D 20 52  048C   987 	.ASCII	%R -- I/O RUNDOWN%<13><10>
                  0A 0D 4E 57 4F 44  0498       
46 45 44 20 54 45 53 20 2D 2D 20 53  049E   988 	.ASCII	/S -- SET DEFAULT NAME STRING/<13><10>
54 53 20 45 4D 41 4E 20 54 4C 55 41  04AA       
                  0A 0D 47 4E 49 52  04B6       
46 45 44 20 54 45 53 20 2D 2D 20 55  04BC   989 	.ASCII	/U -- SET DEFAULT UFD/<13><10>
      0A 0D 44 46 55 20 54 4C 55 41  04C8       
20 59 46 49 52 45 56 20 2D 2D 20 56  04D2   990 	.ASCII	/V -- VERIFY FILE SPECIFICATIONS/<13><10>
49 46 49 43 45 50 53 20 45 4C 49 46  04DE       
         0A 0D 53 4E 4F 49 54 41 43  04EA       
45 4C 20 52 45 48 54 4F 20 4C 4C 41  04F3   991 	.ASCII	/ALL OTHER LETTERS ARE INVALID/<13><10>
4E 49 20 45 52 41 20 53 52 45 54 54  04FF       
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  24
026                                                                                                                              (1)

               0A 0D 44 49 4C 41 56  050B       
                           000001C9  0512   992 HLPMSGSZ=.-HLPMSG
                                 00001B4D   993 	.RESTORE
       E5B6 CF   00000349'EF     DE  1B4D   994 	MOVAL	HLPMSG,CMDORAB+RAB$L_RBF
       E5A9 CF       01C9 8F     B0  1B56   995 	MOVW	#HLPMSGSZ,CMDORAB+RAB$W_RSZ
                                     1B5D   996 	$PUT	RAB=CMDORAB,ERR=REPORT_ERROR
                          F714   30  1B6C   997 	BSBW	ERR
                          F0B8   31  1B6F   998 	BRW	CMD_LOOP
                                     1B72   999 	.END	START
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  25
SYMBOL TABLE                                                                                                                     (1)

$$.PSECT_EP    = 00000000            DNSBSZ         = 00000050  G         FAB$M_CBT      = 00200000    D       
$$.TAB         = 00000464 R  D  02   DNSBUF           000008DC RG D  02   FAB$M_CIF      = 02000000    D       
$$.TABEND      = 0000049C R  D  02   DNSSIZ           00000B34 R  D  02   FAB$M_CR       = 00000002    D       
$$.TMP         = 00000000    D       DONE             0000105E R  D  02   FAB$M_CTG      = 00100000    D       
$$.TMP1        = 00000002    D       ECHO             00001B10 R  D  02   FAB$M_DEL      = 00000004            
$$.TMP2        = 000000CF            ECHOBF           00000800 R  D  02   FAB$M_DFW      = 00000020            
$$.TMPX        = 00000333 R  D  05   ECHOIT           00000C58 R  D  02   FAB$M_DLT      = 00008000    D       
$$.TMPX1       = 00000016    D       EOFDET           000011FF R  D  02   FAB$M_DMO      = 00001000            
$$RMSTEST      = 0000001E            EOFPUT           00001AEF RG D  02   FAB$M_ESC      = 08000000            
$$RMS_PBUGCHK  = 00000010            EOF_DSC          00000BD4 R  D  02   FAB$M_EXE      = 00000080            
$$RMS_TBUGCHK  = 00000008            ERR              00001283 RG D  02   FAB$M_FTN      = 00000001            
$$RMS_UMODE    = 00000004            ERR1             00001287 R  D  02   FAB$M_GET      = 00000002            
..AFLG         = 00000000    D       EXPBSZ         = 00000040  G D       FAB$M_INP      = 00080000            
..FLG          = 00000001    D       EXPBUF           0000073C RG D  02   FAB$M_JNL      = 00400000            
..TMP          = 000000C0    D       EXPEOF           00000BDC R  D  02   FAB$M_KFO      = 40000000            
..TYP          = 000000CF            EXPEOF_LEN     = 00000003    D       FAB$M_MSE      = 00000010            
.LEN           = 00000001    D       FAB$B_BID        00000000            FAB$M_MXV      = 00000002            
ABORTP           00001987 R  D  02   FAB$B_BKS        0000003E    D       FAB$M_NAM      = 01000000    D       
APPEND           00000F14 R  D  02   FAB$B_BLN        00000001            FAB$M_NEF      = 00000400            
BADPARSE         000013DD R  D  02   FAB$B_DNS        00000035    D       FAB$M_NFS      = 00010000            
BADUFD           000013BB R  D  02   FAB$B_FAC        00000016    D       FAB$M_NIL      = 00000020            
BEGPUT           00001AA5 RG D  02   FAB$B_FNS        00000034    D       FAB$M_OFP      = 20000000            
BEG_DESCR        00000BB4 RG D  02   FAB$B_FSZ        0000003F    D       FAB$M_POS      = 00000100            
BIT...         = 0000001A    D       FAB$B_ORG        0000001D    D       FAB$M_PPF      = 00040000            
BR_COPY          00000CD3 R  D  02   FAB$B_RAT        0000001E    D       FAB$M_PPF_IND  = 00004000            
CBTOK            000018D8 R  D  02   FAB$B_RFM        0000001F    D       FAB$M_PPF_RAT  = 00003FC0            
CHK              0000175B R  D  02   FAB$B_RTV        0000001C    D       FAB$M_PRN      = 00000004            
CLBR1            00001350 R  D  02   FAB$B_SHR        00000017    D       FAB$M_PUT      = 00000001            
CLBR2            000013B8 R  D  02   FAB$C_BID      = 00000003    D       FAB$M_RCK      = 00800000            
CLEAN            00001099 R  D  02   FAB$C_BLN        00000050    D       FAB$M_RWC      = 00000800            
CLOSE_UP         000011B3 R  D  02   FAB$C_FIX      = 00000001            FAB$M_RWO      = 00000080            
CLSINF           00001061 R  D  02   FAB$C_HSH      = 00000030            FAB$M_SCF      = 00004000    D       
CLS_IN_FL        000010CE R  D  02   FAB$C_IDX      = 00000020            FAB$M_SHRDEL   = 00000004            
CLS_OUT_FL       000010F7 R  D  02   FAB$C_MAXRFM   = 00000003            FAB$M_SHRGET   = 00000002            
CMD              00000B3E R  D  02   FAB$C_REL      = 00000010    D       FAB$M_SHRPUT   = 00000001            
CMDBSZ         = 00000084  G D       FAB$C_RFM_DFLT = 00000002            FAB$M_SHRUPD   = 00000008            
CMDBUF           00000808 RG D  02   FAB$C_SEQ      = 00000000    D       FAB$M_SPL      = 00002000    D       
CMDIFAB          00000000 RG D  02   FAB$C_UDF      = 00000000            FAB$M_SQO      = 00000040            
CMDIRAB          000000A0 RG D  02   FAB$C_VAR      = 00000002    D       FAB$M_SUP      = 00000004            
CMDOFAB          00000050 RG D  02   FAB$C_VFC      = 00000003            FAB$M_TEF      = 10000000            
CMDORAB          000000E4 RG D  02   FAB$K_BLN        00000050            FAB$M_TMD      = 00000010            
CMD_LOOP         00000C2A R  D  02   FAB$L_ALQ        00000010    D       FAB$M_TMP      = 00000008            
CMD_LOOP_BR      00000CD0 R  D  02   FAB$L_CTX        00000018    D       FAB$M_TRN      = 00000010            
COPY_DONE        00000FDC R  D  02   FAB$L_DEV        00000040    D       FAB$M_UFM      = 04000000            
COPY_LOOP        00000F9D R  D  02   FAB$L_DNA        00000030    D       FAB$M_UFO      = 00020000            
COPY_PROMPT      00000CFF R  D  02   FAB$L_FNA        0000002C    D       FAB$M_UPD      = 00000008            
CPYBSZ         = 00000200  G D       FAB$L_FOP        00000004    D       FAB$M_UPI      = 00000040            
CPYBUF           0000092C RG D  02   FAB$L_JNL        00000020    D       FAB$M_WCK      = 00000200            
CPYBUFDSC        00000B40 R  D  02   FAB$L_MRN        00000038    D       FAB$S_ORG      = 00000004            
CPYEND           00001137 R  D  02   FAB$L_NAM        00000028    D       FAB$S_PPF_RAT  = 00000008            
CPYFLG           00000B3A R  D  02   FAB$L_SDC        00000044            FAB$V_BIO      = 00000005            
CPYNAM           00000F7F R  D  02   FAB$L_STS        00000008    D       FAB$V_BLK      = 00000003            
CTGOK            000018EF R  D  02   FAB$L_STV        0000000C    D       FAB$V_BRO      = 00000006            
DEV$V_TRM        ********   X   02   FAB$L_XAB        00000024    D       FAB$V_CBT      = 00000015    D       
DIRBUF           000007D0 R  D  02   FAB$M_BIO      = 00000020            FAB$V_CIF      = 00000019            
DIRDESC          000007F8 R  D  02   FAB$M_BLK      = 00000008            FAB$V_CR       = 00000001    D       
DIRLEN           000007CC R  D  02   FAB$M_BRO      = 00000040            FAB$V_CTG      = 00000014    D       
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  26
SYMBOL TABLE                                                                                                                     (1)

FAB$V_DEL      = 00000002            GBL...         = 00000000    D       NAM$M_WILD_SFD2= 04000000            
FAB$V_DFW      = 00000005            GO               00000EB9 R  D  02   NAM$M_WILD_SFD3= 08000000            
FAB$V_DLT      = 0000000F            GOT_ONE          00000DD8 R  D  02   NAM$M_WILD_SFD4= 10000000            
FAB$V_DMO      = 0000000C            HELP             00001B43 R  D  02   NAM$M_WILD_SFD5= 20000000            
FAB$V_ESC      = 0000001B            HLPMSG           00000349 R  D  05   NAM$M_WILD_SFD6= 40000000            
FAB$V_EXE      = 00000007            HLPMSGSZ       = 000001C9    D       NAM$M_WILD_SFD7= 80000000            
FAB$V_FTN      = 00000000            ILLSER           00000BDF R  D  02   NAM$M_WILD_TYPE= 00000010            
FAB$V_GET      = 00000001    D       ILLSERDEC        00000BCC R  D  02   NAM$M_WILD_UFD = 01000000            
FAB$V_INP      = 00000013            ILLSERL        = 00000007    D       NAM$M_WILD_VER = 00000008            
FAB$V_JNL      = 00000016            INFAB            00000128 RG D  02   NAM$S_DIR_LVLS = 00000003            
FAB$V_KFO      = 0000001E            INRAB            00000178 RG D  02   NAM$T_DVI        00000014            
FAB$V_MSE      = 00000004            LIB$SIGNAL       ********   X   02   NAM$V_DIR_LVLS = 00000015            
FAB$V_MXV      = 00000001            MORE             000015E9 R  D  02   NAM$V_EXP_DEV  = 00000007            
FAB$V_NAM      = 00000018            NAM              00000B36 RG D  02   NAM$V_EXP_DIR  = 00000006            
FAB$V_NEF      = 0000000A            NAM$B_BID        00000000            NAM$V_EXP_NAME = 00000002            
FAB$V_NFS      = 00000010            NAM$B_BLN        00000001            NAM$V_EXP_TYPE = 00000001            
FAB$V_NIL      = 00000005            NAM$B_CURLVL     00000038            NAM$V_EXP_VER  = 00000000            
FAB$V_OFP      = 0000001D    D       NAM$B_ESL        0000000B    D       NAM$V_GRP_MBR  = 00000013            
FAB$V_ORG      = 00000004            NAM$B_ESS        0000000A    D       NAM$V_HIGHVER  = 0000000F            
FAB$V_POS      = 00000008            NAM$B_RSL        00000003    D       NAM$V_LOWVER   = 0000000E    D       
FAB$V_PPF      = 00000012            NAM$B_RSS        00000002    D       NAM$V_NODE     = 00000011            
FAB$V_PPF_IND  = 0000000E            NAM$C_BID      = 00000002    D       NAM$V_PPF      = 00000010            
FAB$V_PPF_RAT  = 00000006            NAM$C_BLN        00000038    D       NAM$V_QUOTED   = 00000012            
FAB$V_PRN      = 00000002            NAM$C_BLN_DIRWC  00000050            NAM$V_WILDCARD = 00000008    D       
FAB$V_PUT      = 00000000    D       NAM$C_DVI      = 00000010            NAM$V_WILD_DIR = 00000014            
FAB$V_RCK      = 00000017            NAM$C_MAXRSS   = 00000080    D       NAM$V_WILD_GRP = 00000018            
FAB$V_RWC      = 0000000B            NAM$C_MAXRSSLCL= 00000060            NAM$V_WILD_MBR = 00000019            
FAB$V_RWO      = 00000007            NAM$K_BLN        00000038            NAM$V_WILD_NAME= 00000005            
FAB$V_SCF      = 0000000E            NAM$K_BLN_DIRWC  00000050            NAM$V_WILD_SFD1= 00000019            
FAB$V_SHRDEL   = 00000002            NAM$L_DIRWCC1    00000040            NAM$V_WILD_SFD2= 0000001A            
FAB$V_SHRGET   = 00000001            NAM$L_DIRWCC2    00000044            NAM$V_WILD_SFD3= 0000001B            
FAB$V_SHRPUT   = 00000000            NAM$L_DIRWCC3    00000048            NAM$V_WILD_SFD4= 0000001C            
FAB$V_SHRUPD   = 00000003            NAM$L_DIRWCC4    0000004C            NAM$V_WILD_SFD5= 0000001D            
FAB$V_SPL      = 0000000D            NAM$L_DWC        00000038            NAM$V_WILD_SFD6= 0000001E            
FAB$V_SQO      = 00000006            NAM$L_ESA        0000000C    D       NAM$V_WILD_SFD7= 0000001F            
FAB$V_SUP      = 00000002    D       NAM$L_FNB        00000034    D       NAM$V_WILD_TYPE= 00000004            
FAB$V_TEF      = 0000001C            NAM$L_RLF        00000010    D       NAM$V_WILD_UFD = 00000018            
FAB$V_TMD      = 00000004            NAM$L_RSA        00000004    D       NAM$V_WILD_VER = 00000003            
FAB$V_TMP      = 00000003            NAM$L_WCC        00000030            NAM$W_DID        0000002A            
FAB$V_TRN      = 00000004            NAM$M_DIR_LVLS = 00E00000            NAM$W_DID_NUM    0000002A            
FAB$V_UFM      = 0000001A            NAM$M_EXP_DEV  = 00000080            NAM$W_DID_RVN    0000002E            
FAB$V_UFO      = 00000011            NAM$M_EXP_DIR  = 00000040            NAM$W_DID_SEQ    0000002C            
FAB$V_UPD      = 00000003            NAM$M_EXP_NAME = 00000004            NAM$W_FID        00000024    D       
FAB$V_UPI      = 00000006            NAM$M_EXP_TYPE = 00000002            NAM$W_FID_NUM    00000024            
FAB$V_WCK      = 00000009            NAM$M_EXP_VER  = 00000001            NAM$W_FID_RVN    00000028            
FAB$W_BLS        0000003C    D       NAM$M_GRP_MBR  = 00080000            NAM$W_FID_SEQ    00000026            
FAB$W_DEQ        00000014    D       NAM$M_HIGHVER  = 00008000            NAM$W_PRV_DID    0000003A            
FAB$W_IFI        00000002    D       NAM$M_LOWVER   = 00004000            NAMBLK           00000250 RG D  02   
FAB$W_MRS        00000036    D       NAM$M_NODE     = 00020000            NEWFAB           000003DC RG D  02   
FAOBUF           00000B50 RG D  02   NAM$M_PPF      = 00010000            NEWNAM           00000464 RG D  02   
FAOSTR           00000B48 R  D  02   NAM$M_QUOTED   = 00040000            NEW_ESBUF        0000059C R  D  02   
FINPUT           00001ABB RG D  02   NAM$M_WILDCARD = 00000100            NEW_RSBUF        0000061C R  D  02   
FIN_DESCR        00000BBC RG D  02   NAM$M_WILD_DIR = 00100000            NEXT             00001628 R  D  02   
FLDPUT           00001AD1 RG D  02   NAM$M_WILD_GRP = 01000000            NOWC             00000DEF R  D  02   
FLD_DESCR        00000BC4 RG D  02   NAM$M_WILD_MBR = 02000000            NO_MORE_FILES    0000106A R  D  02   
FSTR1            00000B58 R  D  02   NAM$M_WILD_NAME= 00000020            OK               00001769 R  D  02   
FSTR1LEN       = 0000003F    D       NAM$M_WILD_SFD1= 02000000            OKSUP            000015D3 R  D  02   
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  27
SYMBOL TABLE                                                                                                                     (1)

OLDFAB           0000038C RG D  02   RAB$M_NXR      = 00800000            REL_FILE         00000380 R  D  02   
OLDNAM           0000042C RG D  02   RAB$M_PMT      = 40000000            REL_FILE_SIZE  = 00000006    D       
OLD_ESBUF        0000049C R  D  02   RAB$M_PPF_IND  = 00004000            REM_SRCH         000016D0 R  D  02   
OLD_RSBUF        0000051C R  D  02   RAB$M_PPF_RAT  = 00003FC0            REOPEN_CMD       000014BA R  D  02   
ORGFLG           00000B3C R  D  02   RAB$M_PTA      = 20000000            REPORT           00001232 RG D  02   
OUT              00001790 R  D  02   RAB$M_RAH      = 00000200            REPORT_END       00001120 R  D  02   
OUTFAB           000001BC RG D  02   RAB$M_RLK      = 00080000            REPORT_ERR       0000121E RG D  02   
OUTRAB           0000020C RG D  02   RAB$M_RNE      = 01000000            REPORT_ERROR     00001214 RG D  02   
PNSBUF           0000088C RG D  02   RAB$M_RNF      = 08000000            RERENM           0000185E R  D  02   
POPPC            00001319 R  D  02   RAB$M_TMO      = 02000000            RESBSZ         = 00000040  G D       
QMARK            00000CAE R  D  02   RAB$M_TPT      = 00000002            RESBUF           0000077C RG D  02   
R                00001246 R  D  02   RAB$M_UIF      = 00000010            RHBBUF           000007BC RG D  02   
RAB$B_BID        00000000            RAB$M_ULK      = 00040000            RMS$_CREATED     ********   X   02   
RAB$B_BLN        00000001            RAB$M_WAT      = 00020000            RMS$_EOF         ********   X   02   
RAB$B_KRF        00000035    D       RAB$M_WBH      = 00000400            RMS$_FNF         ********   X   02   
RAB$B_KSZ        00000034    D       RAB$S_PPF_RAT  = 00000008            RMS$_NMF         ********   X   02   
RAB$B_MBC        00000037    D       RAB$V_ASY      = 00000000            RMS$_NORMAL      ********   X   02   
RAB$B_MBF        00000036    D       RAB$V_BIO      = 0000000B            RMS$_SUPERSEDE   ********   X   02   
RAB$B_PSZ        00000034    D       RAB$V_CCO      = 0000001F            RMSTEST        = 000003E9  G D       
RAB$B_RAC        0000001E    D       RAB$V_CVT      = 0000001A            RMT$TEST_1A      ********   X   02   
RAB$B_ROP1       00000005            RAB$V_EOF      = 00000008    D       RMT$TEST_3A      ********   X   02   
RAB$B_ROP2       00000006            RAB$V_FDL      = 00000006            RMT$TEST_4A      ********   X   02   
RAB$B_ROP3       00000007            RAB$V_HSH      = 00000007            RTN              00001A85 R  D  02   
RAB$B_TMO        0000001F    D       RAB$V_KGE      = 00000015            RWCBSZ         = 00000050  G D       
RAB$C_BID      = 00000001    D       RAB$V_KGT      = 00000016            RWCBUF           000006EC RG D  02   
RAB$C_BLN        00000044    D       RAB$V_LIM      = 0000000E            SAME_ORG         00000EAB R  D  02   
RAB$C_KEY      = 00000001            RAB$V_LOA      = 0000000D            SAVE_FID         00000386 R  D  02   
RAB$C_RFA      = 00000002            RAB$V_LOC      = 00000010            SEMI           = 0000003B    D       
RAB$C_SEQ      = 00000000    D       RAB$V_MAS      = 00000005            SEQ_ORG          00000EB4 R  D  02   
RAB$K_BLN        00000044            RAB$V_NLK      = 00000014            SETVSW           00000CE0 R  D  02   
RAB$L_BKT        00000038    D       RAB$V_NXR      = 00000017            SHR$_BADFIELD    ********   X   02   
RAB$L_CTX        00000018    D       RAB$V_PMT      = 0000001E    D       SHR$_BEGINT      ********   X   02   
RAB$L_DCT        00000038            RAB$V_PPF_IND  = 0000000E            SHR$_ENDEDT      ********   X   02   
RAB$L_FAB        0000003C    D       RAB$V_PPF_RAT  = 00000006            SHR$_RMSERROR    ********   X   02   
RAB$L_KBF        00000030    D       RAB$V_PTA      = 0000001D            SHR$_SYSERROR    ********   X   02   
RAB$L_PBF        00000030    D       RAB$V_RAH      = 00000009            SHR$_UNXPCTSTS   ********   X   02   
RAB$L_RBF        00000028    D       RAB$V_RLK      = 00000013            SOK              00001687 R  D  02   
RAB$L_RFA0       00000010            RAB$V_RNE      = 00000018            SS$_ILLSER       ********   X   02   
RAB$L_RHB        0000002C    D       RAB$V_RNF      = 0000001B            START            00000BE6 RG D  02   
RAB$L_ROP        00000004    D       RAB$V_TMO      = 00000019            STICKY_FAB2      000002C0 R  D  02   
RAB$L_STS        00000008    D       RAB$V_TPT      = 00000001            STICKY_NAMBLK    00000310 R  D  02   
RAB$L_STV        0000000C            RAB$V_UIF      = 00000004            SYS$CLOSE        ********  GX   02   
RAB$L_UBF        00000024    D       RAB$V_ULK      = 00000012            SYS$CONNECT      ********  GX   02   
RAB$M_ASY      = 00000001    D       RAB$V_WAT      = 00000011            SYS$CREATE       ********  GX   02   
RAB$M_BIO      = 00000800            RAB$V_WBH      = 0000000A            SYS$DISCONNECT   ********  GX   02   
RAB$M_CCO      = 80000000            RAB$W_ISI        00000002    D       SYS$ENTER        ********  GX   02   
RAB$M_CVT      = 04000000            RAB$W_RFA        00000010            SYS$EXIT         ********   X   02   
RAB$M_EOF      = 00000100            RAB$W_RFA4       00000014            SYS$FAO          ********   X   02   
RAB$M_FDL      = 00000040            RAB$W_RSZ        00000022    D       SYS$GET          ********  GX   02   
RAB$M_HSH      = 00000080            RAB$W_USZ        00000020    D       SYS$OPEN         ********  GX   02   
RAB$M_KGE      = 00200000            RBRACK         = 0000005D    D       SYS$PARSE        ********  GX   02   
RAB$M_KGT      = 00400000            RD1              00001429 R  D  02   SYS$PUT          ********  GX   02   
RAB$M_LIM      = 00004000            RD2              0000147E R  D  02   SYS$REMOVE       ********  GX   02   
RAB$M_LOA      = 00002000            RDMSG            00000B97 R  D  02   SYS$RENAME       ********  GX   02   
RAB$M_LOC      = 00010000            RDMSGLEN       = 0000001D    D       SYS$RMSRUNDWN    ********   X   02   
RAB$M_MAS      = 00000020            RELATED_NAM      00000348 R  D  02   SYS$SEARCH       ********  GX   02   
RAB$M_NLK      = 00100000            RELZERO          00000000 R  D  02   SYS$SETDDIR      ********   X   02   
RMSTEST         USER ROUTINE TO CALL AND TEST RMS ;              22-AUG-1978 03:25:09   VAX-11 MACRO X0.3-11               Page  28
SYMBOL TABLE                                                                                                                     (1)

SYS$WAIT         ********  GX   02   
TRAN             ********   X   02   
TST$APPEND       000010B3 R  D  02   
TST$BLOCK        0000195F R  D  02   
TST$BLOCKIO      ********   X   02   
TST$COPY         00000CF0 R  D  02   
TST$DEBUG        00001149 R  D  02   
TST$F            00001973 R  D  02   
TST$GENERAL      00001955 R  D  02   
TST$MTA          ********   X   02   
TST$MTAPE        0000197D R  D  02   
TST$NET          00001987 R  D  02   
TST$ORG          000010C6 R  D  02   
TST$PRINT        0000198A R  D  02   
TST$RELATIVE     00001969 R  D  02   
TST$RUNDWN       000013F8 R  D  02   
TST$SETDDIR      00001353 R  D  02   
TST$SETDFLT      00001180 R  D  02   
TST$SHOWNAM      00001A0C R  D  02   
TST$STICKY       00001523 R  D  02   
TYPEXP           00001A86 R  D  02   
VERBOSITY        ********   X   02   
VSW              00000B3D R  D  02   
WC               00000D64 R  D  02   
WCDBSZ         = 00000050  G D       
WCDBUF           0000069C RG D  02   
WCDNAM           00000288 RG D  02   
WCFLG            00000B3B R  D  02   


PROGRAM SECTION SYNOPSIS

.  ABS  .        00000000      00     NOPIC   USR   CON   ABS   LCL NOSHR NOEXE NORD  NOWRT BYTE  
. BLANK .        00000000      01     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
__RMSTEST        00001B72      02     NOPIC   USR   CON   REL   GBL NOSHR   EXE   RD    WRT LONG  
$ABS$            00000050      03     NOPIC   USR   CON   ABS   LCL NOSHR   EXE   RD    WRT BYTE  
$RMSNAM          00000044      04     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  
__$RMSNAM        00000512      05     NOPIC   USR   CON   REL   LCL NOSHR   EXE   RD    WRT BYTE  


THERE WERE NO ERRORS OR WARNINGS.
1868. BYTES LEFT IN FREE MEMORY POOL.
4048. BYTES OF RECLAIMED MEMORY.
OBJ$:RMSTEST0,LIS$:RMSTEST0/-SP=SRC$:UETPLIBS,SRCD$:[RMSTEST]RMSTEST0
116 MLB DIR RDS - 919 GETS TO DEFINE 49 MACROS. 138 INTER. FILE WRITES. 
