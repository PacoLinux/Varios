
                22-Aug-1978 02:53:08	VAX-11 FORTRAN IV-PLUS V1.0-2      Page 1   
					PSL.FOR.7           

0001    	SUBROUTINE PSL (LUN,REG)
0002    	BYTE	LUN
0003    	INTEGER*4	REG
         
        C
        C	EXTERNAL ROUTINES:
        C
0004    	INTEGER*2	BITCNT
         
        C
        C	OWN STORAGE:
        C
         
0005    	INTEGER*4	LINE_CT,TEMP
         
0006    	CHARACTER*10	MODE (0:3)
0007    	CHARACTER*32	PSL_BITS(0:31)
         
0008    	DATA	MODE(0)	/'KERNEL'/
0009    	DATA	MODE(1)	/'EXECUTIVE'/
0010    	DATA	MODE(2)	/'SUPERVISOR'/
0011    	DATA	MODE(3)	/'USER'/
         
0012    	DATA	PSL_BITS(0)	/'C BIT SET<0>'/
0013    	DATA	PSL_BITS(1)	/'V BIT SET<1>'/
0014    	DATA	PSL_BITS(2)	/'Z BIT SET<2>'/
0015    	DATA	PSL_BITS(3)	/'N BIT SET<3>'/
0016    	DATA	PSL_BITS(4)	/'T BIT SET<4>'/
0017    	DATA	PSL_BITS(5)	/'INTEGER OVERFLOW TRAP ENABLED<5>'/
0018    	DATA	PSL_BITS(6)	/'FLOAT OVERFLOW TRAP ENABLED<6>'/
0019    	DATA	PSL_BITS(7)	/'DECIMAL OVERFLOW TRAP ENABLED<7>'/
0020    	DATA	PSL_BITS(16)	/'IPL<20:16>:'/
0021    	DATA	PSL_BITS(22)	/'PREVIOUS MODE<23:22>:'/
0022    	DATA	PSL_BITS(24)	/'CURRENT MODE<25:24>:'/
0023    	DATA	PSL_BITS(26)	/'EXECUTING ON INTERRUPT STACK<26>'/
0024    	DATA	PSL_BITS(27)	/'FIRST PART DONE BIT SET<27>'/
0025    	DATA	PSL_BITS(30)	/'TRACE PENDING BIT SET<30>'/
0026    	DATA	PSL_BITS(31)	/'COMPATIBILITY MODE<31>'/
         
0027    	LINE_CT=BITCNT(REG .AND. 'CC0000FF'X)+6
0028    	CALL LINCHK (LUN,LINE_CT)
0029    	WRITE (LUN,100) 'PSL(ID#0F):',REG
0030    100	FORMAT (' ',T10,A,T23,Z8)
0031    	CALL BITS_OUTPUT (LUN,REG,PSL_BITS(0),0,7,0)
0032    	TEMP=LIB$EXTZV(16,5,REG)
0033    	WRITE (LUN,110) PSL_BITS(16),TEMP
0034    110	FORMAT (' ',T40,A,T71,Z2)
0035    	TEMP=LIB$EXTZV (22,2,REG)
0036    	WRITE (LUN,110) PSL_BITS(22),TEMP
0037    	WRITE (LUN,120) MODE(TEMP)
0038    120	FORMAT(' ',T45,A)
0039    	TEMP=LIB$EXTZV (24,2,REG)
0040    	WRITE (LUN,110) PSL_BITS(24),TEMP
0041    	WRITE (LUN,120) MODE(TEMP)
0042    	CALL BITS_OUTPUT (LUN,REG,PSL_BITS(26),26,31,0)
0043    	RETURN

PSL             22-Aug-1978 02:53:08	VAX-11 FORTRAN IV-PLUS V1.0-2      Page 2   
					PSL.FOR.7           

0044    	END

PSL             22-Aug-1978 02:53:08	VAX-11 FORTRAN IV-PLUS V1.0-2      Page 3   
					PSL.FOR.7           

		.TITLE	PSL
		.IDENT	01

    0000	.PSECT	$PDATA
    0000	.XBYTE	50,53,4C,28,49,44,23,30,46,29,3A
    000B	.LONG	^X00000000
    000F	.LONG	^X00000007
    0013	.LONG	^X00000010
    0017	.LONG	^X00000005
    001B	.LONG	^X00000016
    001F	.LONG	^X00000002
    0023	.LONG	^X00000018
    0027	.LONG	^X0000001A
    002B	.LONG	^X0000001F

    0430	.PSECT	$LOCAL
    0430	.LONG	^X00000001
    0434	.LONG	^X00000000
    0438	.LONG	^X00000002
    043C	.LONG	^X00000000
    0440	.ADDR	LINE_CT
    0444	.LONG	^X010E000B
    0448	.ADDR	$PDATA
    044C	.LONG	^X010E0020
    0450	.ADDR	PSL_BITS
    0454	.LONG	^X00000006
    0458	.LONG	^X00000000
    045C	.LONG	^X00000000
    0460	.ADDR	$LOCAL+^X44C
    0464	.ADDR	$PDATA+^XB
    0468	.ADDR	$PDATA+^XF
    046C	.ADDR	$PDATA+^XB
    0470	.LONG	^X00000003
    0474	.ADDR	$PDATA+^X13
    0478	.ADDR	$PDATA+^X17
    047C	.LONG	^X00000000
    0480	.LONG	^X010E0000
    0484	.LONG	^X00000000
    0488	.LONG	^X00000003
    048C	.ADDR	$PDATA+^X1B
    0490	.ADDR	$PDATA+^X1F
    0494	.LONG	^X00000000
    0498	.LONG	^X00000003
    049C	.ADDR	$PDATA+^X23
    04A0	.ADDR	$PDATA+^X1F
    04A4	.LONG	^X00000000
    04A8	.LONG	^X010E0020
    04AC	.ADDR	PSL_BITS+832
    04B0	.LONG	^X00000006
    04B4	.LONG	^X00000000
    04B8	.LONG	^X00000000
    04BC	.ADDR	$LOCAL+^X4A8
    04C0	.ADDR	$PDATA+^X27
    04C4	.ADDR	$PDATA+^X2B
    04C8	.ADDR	$PDATA+^XB


PSL             22-Aug-1978 02:53:08	VAX-11 FORTRAN IV-PLUS V1.0-2      Page 4   
					PSL.FOR.7           

    002F	.PSECT	$PDATA
    002F  .100:
    002F	.XBYTE	0F,01,20,0D,0A,29,0D,17,19,08,04
    003A  .110:
    003A	.XBYTE	0F,01,20,0D,28,29,0D,47,19,02,04
    0045  .120:
    0045	.XBYTE	0F,01,20,0D,2D,29,04

    0000	.PSECT	$LOCAL
    0000  MODE:
    0000	.XBYTE	4B,45,52,4E,45,4C
    0006	.XBYTE	20 [4]
    000A  MODE+10:
    000A	.XBYTE	45,58,45,43,55,54,49,56,45
    0013	.XBYTE	20 [1]
    0014  MODE+20:
    0014	.XBYTE	53,55,50,45,52,56,49,53,4F,52
    001E  MODE+30:
    001E	.XBYTE	55,53,45,52
    0022	.XBYTE	20 [6]
    0028  PSL_BITS:
    0028	.XBYTE	43,20,42,49,54,20,53,45,54,3C,30,3E
    0034	.XBYTE	20 [20]
    0048  PSL_BITS+32:
    0048	.XBYTE	56,20,42,49,54,20,53,45,54,3C,31,3E
    0054	.XBYTE	20 [20]
    0068  PSL_BITS+64:
    0068	.XBYTE	5A,20,42,49,54,20,53,45,54,3C,32,3E
    0074	.XBYTE	20 [20]
    0088  PSL_BITS+96:
    0088	.XBYTE	4E,20,42,49,54,20,53,45,54,3C,33,3E
    0094	.XBYTE	20 [20]
    00A8  PSL_BITS+128:
    00A8	.XBYTE	54,20,42,49,54,20,53,45,54,3C,34,3E
    00B4	.XBYTE	20 [20]
    00C8  PSL_BITS+160:
    00C8	.XBYTE	49,4E,54,45,47,45,52,20,4F,56,45,52,46,4C,4F,57
    00D8	.XBYTE	20,54,52,41,50,20,45,4E,41,42,4C,45,44,3C,35,3E
    00E8  PSL_BITS+192:
    00E8	.XBYTE	46,4C,4F,41,54,20,4F,56,45,52,46,4C,4F,57,20,54
    00F8	.XBYTE	52,41,50,20,45,4E,41,42,4C,45,44,3C,36,3E
    0106	.XBYTE	20 [2]
    0108  PSL_BITS+224:
    0108	.XBYTE	44,45,43,49,4D,41,4C,20,4F,56,45,52,46,4C,4F,57
    0118	.XBYTE	20,54,52,41,50,20,45,4E,41,42,4C,45,44,3C,37,3E
    0228  PSL_BITS+512:
    0228	.XBYTE	49,50,4C,3C,32,30,3A,31,36,3E,3A
    0233	.XBYTE	20 [21]
    02E8  PSL_BITS+704:
    02E8	.XBYTE	50,52,45,56,49,4F,55,53,20,4D,4F,44,45,3C,32,33
    02F8	.XBYTE	3A,32,32,3E,3A
    02FD	.XBYTE	20 [11]
    0328  PSL_BITS+768:
    0328	.XBYTE	43,55,52,52,45,4E,54,20,4D,4F,44,45,3C,32,35,3A
    0338	.XBYTE	32,34,3E,3A
    033C	.XBYTE	20 [12]

PSL             22-Aug-1978 02:53:08	VAX-11 FORTRAN IV-PLUS V1.0-2      Page 5   
					PSL.FOR.7           

    0368  PSL_BITS+832:
    0368	.XBYTE	45,58,45,43,55,54,49,4E,47,20,4F,4E,20,49,4E,54
    0378	.XBYTE	45,52,52,55,50,54,20,53,54,41,43,4B,3C,32,36,3E
    0388  PSL_BITS+864:
    0388	.XBYTE	46,49,52,53,54,20,50,41,52,54,20,44,4F,4E,45,20
    0398	.XBYTE	42,49,54,20,53,45,54,3C,32,37,3E
    03A3	.XBYTE	20 [5]
    03E8  PSL_BITS+960:
    03E8	.XBYTE	54,52,41,43,45,20,50,45,4E,44,49,4E,47,20,42,49
    03F8	.XBYTE	54,20,53,45,54,3C,33,30,3E
    0401	.XBYTE	20 [7]
    0408  PSL_BITS+992:
    0408	.XBYTE	43,4F,4D,50,41,54,49,42,49,4C,49,54,59,20,4D,4F
    0418	.XBYTE	44,45,3C,33,31,3E
    041E	.XBYTE	20 [10]

    0000	.PSECT	$CODE
    0000  PSL::
    0000	.WORD	^M<IV,R10,R11>
    0002	MOVAL	$LOCAL+^X428, R11
									    ; 0027
    0009	BICL3	#^X33FFFF00, @REG(AP), -(SP)
    0012	MOVL	SP, $LOCAL+^X434(R11)
    0016	CALLG	$LOCAL+^X430(R11), BITCNT
    001E	ADDL2	#4, SP
    0021	ADDW2	#6, R0
    0024	CVTWL	R0, LINE_CT(R11)
									    ; 0028
    0027	MOVAB	@LUN(AP), $LOCAL+^X43C(R11)
    002C	CALLG	$LOCAL+^X438(R11), LINCHK
									    ; 0029
    0034	PUSHAL	.100
    003A	CVTBL	@LUN(AP), -(SP)
    003E	CALLS	#2, FOR$WRITE_SF
    0045	PUSHAB	$LOCAL+^X444(R11)
    0048	CALLS	#1, FOR$IO_T_DS
    004F	PUSHAL	@REG(AP)
    0052	CALLS	#1, FOR$IO_L_R
    0059	CALLS	#0, FOR$IO_END
									    ; 0031
    0060	MOVAB	@LUN(AP), $LOCAL+^X458(R11)
    0065	MOVAL	@REG(AP), $LOCAL+^X45C(R11)
    006A	CALLG	$LOCAL+^X454(R11), BITS_OUTPUT
									    ; 0032
    0072	MOVAL	@REG(AP), $LOCAL+^X47C(R11)
    0077	CALLG	$LOCAL+^X470(R11), LIB$EXTZV
    007F	MOVL	R0, TEMP(R11)
									    ; 0033
    0083	PUSHAL	.110
    0089	CVTBL	@LUN(AP), -(SP)
    008D	CALLS	#2, FOR$WRITE_SF
    0094	MOVW	#32, $LOCAL+^X480(R11)
    0098	MOVAB	PSL_BITS+512(R11), $LOCAL+^X484(R11)
    009E	PUSHAB	$LOCAL+^X480(R11)
    00A1	CALLS	#1, FOR$IO_T_DS
    00A8	PUSHAL	TEMP(R11)

PSL             22-Aug-1978 02:53:08	VAX-11 FORTRAN IV-PLUS V1.0-2      Page 6   
					PSL.FOR.7           

    00AB	CALLS	#1, FOR$IO_L_R
    00B2	CALLS	#0, FOR$IO_END
									    ; 0035
    00B9	MOVAL	@REG(AP), $LOCAL+^X494(R11)
    00BE	CALLG	$LOCAL+^X488(R11), LIB$EXTZV
    00C6	MOVL	R0, TEMP(R11)
									    ; 0036
    00CA	PUSHAL	.110
    00D0	CVTBL	@LUN(AP), R10
    00D4	PUSHL	R10
    00D6	CALLS	#2, FOR$WRITE_SF
    00DD	MOVW	#32, $LOCAL+^X480(R11)
    00E1	MOVAB	PSL_BITS+704(R11), $LOCAL+^X484(R11)
    00E7	PUSHAB	$LOCAL+^X480(R11)
    00EA	CALLS	#1, FOR$IO_T_DS
    00F1	PUSHAL	TEMP(R11)
    00F4	CALLS	#1, FOR$IO_L_R
    00FB	CALLS	#0, FOR$IO_END
									    ; 0037
    0102	PUSHAL	.120
    0108	PUSHL	R10
    010A	CALLS	#2, FOR$WRITE_SF
    0111	MULL3	#10, TEMP(R11), R0
    0116	MOVW	#10, $LOCAL+^X480(R11)
    011A	MOVAB	MODE(R11)[R0], $LOCAL+^X484(R11)
    0121	PUSHAB	$LOCAL+^X480(R11)
    0124	CALLS	#1, FOR$IO_T_DS
    012B	CALLS	#0, FOR$IO_END
									    ; 0039
    0132	MOVAL	@REG(AP), $LOCAL+^X4A4(R11)
    0137	CALLG	$LOCAL+^X498(R11), LIB$EXTZV
    013F	MOVL	R0, TEMP(R11)
									    ; 0040
    0143	PUSHAL	.110
    0149	CVTBL	@LUN(AP), R10
    014D	PUSHL	R10
    014F	CALLS	#2, FOR$WRITE_SF
    0156	MOVW	#32, $LOCAL+^X480(R11)
    015A	MOVAB	PSL_BITS+768(R11), $LOCAL+^X484(R11)
    0160	PUSHAB	$LOCAL+^X480(R11)
    0163	CALLS	#1, FOR$IO_T_DS
    016A	PUSHAL	TEMP(R11)
    016D	CALLS	#1, FOR$IO_L_R
    0174	CALLS	#0, FOR$IO_END
									    ; 0041
    017B	PUSHAL	.120
    0181	PUSHL	R10
    0183	CALLS	#2, FOR$WRITE_SF
    018A	MULL3	#10, TEMP(R11), R0
    018F	MOVW	#10, $LOCAL+^X480(R11)
    0193	MOVAB	MODE(R11)[R0], $LOCAL+^X484(R11)
    019A	PUSHAB	$LOCAL+^X480(R11)
    019D	CALLS	#1, FOR$IO_T_DS
    01A4	CALLS	#0, FOR$IO_END
									    ; 0042
    01AB	MOVAB	@LUN(AP), $LOCAL+^X4B4(R11)

PSL             22-Aug-1978 02:53:08	VAX-11 FORTRAN IV-PLUS V1.0-2      Page 7   
					PSL.FOR.7           

    01B1	MOVAL	@REG(AP), $LOCAL+^X4B8(R11)
    01B7	CALLG	$LOCAL+^X4B0(R11), BITS_OUTPUT
									    ; 0043
    01C0	RET	
		.END

PSL             22-Aug-1978 02:53:08	VAX-11 FORTRAN IV-PLUS V1.0-2      Page 8   
					PSL.FOR.7           

PROGRAM SECTIONS

    Name                 Bytes   Attributes

  0 $CODE                  449   PIC CON REL LCL   SHR   EXE   RD NOWRT LONG
  1 $PDATA                  76   PIC CON REL LCL   SHR NOEXE   RD NOWRT LONG
  2 $LOCAL                1228   PIC CON REL LCL NOSHR NOEXE   RD   WRT LONG


ENTRY POINTS

    Address  Type Name           

  0-00000000      PSL            


VARIABLES

    Address  Type Name               Address  Type Name               Address  Type Name               Address  Type Name           

  2-00000428  I*4 LINE_CT         AP-00000004@ L*1 LUN             AP-00000008@ I*4 REG              2-0000042C  I*4 TEMP           


ARRAYS

    Address  Type Name		       Bytes  Dimensions

  2-00000000  CHR MODE                    40  (0:3)
  2-00000028  CHR PSL_BITS              1024  (0:31)


LABELS

    Address   Label       Address   Label       Address   Label   

  1-0000002F  100'      1-0000003A  110'      1-00000045  120'    


FUNCTIONS AND SUBROUTINES REFERENCED

BITCNT            BITS_OUTPUT       LIB$EXTZV         LINCHK         


Total Space Allocated = 1753 Bytes


COMPILER OPTIONS

/CHECK=(NOBOUNDS,OVERFLOW)
/DEBUG=(NOSYMBOLS,TRACEBACK)
/OPTIMIZE  /WARNINGS  /I4  /NOD_LINES  
