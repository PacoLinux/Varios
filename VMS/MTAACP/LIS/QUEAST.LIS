
; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:34	DBB3:[MTAACP.SRC]QUEAST.B32;3					Page 1
; Digital Equipment Corporation
;
;	0001	MODULE QUEAST (
;	0002			LANGUAGE (BLISS32),
;	0003			IDENT = 'A0001'
;	0004			) =
;	0005	BEGIN
;	0006	
;	0007	!
;	0008	! COPYRIGHT (C) 1977
;	0009	! DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASSACHUSETTS 01754
;	0010	!
;	0011	! THIS SOFTWARE IS FURNISHED  UNDER A LICENSE FOR USE ONLY ON A SINGLE
;	0012	! COMPUTER  SYSTEM AND  MAY BE  COPIED ONLY WITH  THE INCLUSION OF THE
;	0013	! ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE, OR ANY OTHER COPIES THEREOF,
;	0014	! MAY NOT BE PROVIDED OR  OTHERWISE MADE AVAILABLE TO ANY OTHER PERSON
;	0015	! EXCEPT FOR USE ON SUCH SYSTEM AND TO ONE WHO AGREES TO THESE LICENSE
;	0016	! TERMS.  TITLE TO AND  OWNERSHIP OF THE  SOFTWARE  SHALL AT ALL TIMES
;	0017	! REMAIN IN DEC.
;	0018	!
;	0019	! THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE WITHOUT NOTICE
;	0020	! AND SHOULD  NOT BE CONSTRUED  AS A COMMITMENT  BY DIGITAL  EQUIPMENT
;	0021	! CORPORATION.
;	0022	!
;	0023	! DEC ASSUMES  NO  RESPONSIBILITY  FOR  THE USE OR  RELIABILITY OF ITS
;	0024	! SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
;	0025	
;	0026	!++
;	0027	!
;	0028	! FACILITY:  MTAACP
;	0029	!
;	0030	! ABSTRACT:
;	0031	!	THIS MODULE QUEUES THE AST INDICATING THAT USER LABELS SHOULD BE PROCESSED
;	0032	!
;	0033	!
;	0034	! ENVIRONMENT:
;	0035	!
;	0036	!	STARLET OPERATING SYSTEM, INCLUDING PRIVILEGED SYSTEM SERVICES
;	0037	!	AND INTERNAL EXEC ROUTINES.
;	0038	!
;	0039	!--
;	0040	!
;	0041	!
;	0042	! AUTHOR:  D. H. GILLESPIE,	 CREATION DATE:  05-OCT-1977
;	0043	  
;	0044	!
;	0045	! REVISION HISTORY:
;	0046	!
;	0047	!   D. H. Gillespie, 12-May-78  15:00
;	0048	!   A0001 - change CURRENT_VCB to a register
;	0049	!
;	0050	!**
;	0051	
;	0052	LIBRARY 'SYS$LIBRARY:LIB.L32';
;	0053	REQUIRE 'SRC$:MTADEF.B32';
;	0349	
;	0350	LINKAGE

; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:34	DBB3:[MTAACP.SRC]QUEAST.B32;3					Page 1-1
; Digital Equipment Corporation
;
;	0351		Q_AST	 	= JSB(REGISTER = 2,REGISTER = 5);	!CALL SEQUENCE FOR QUEUE AST
;	0352	
;	0353	EXTERNAL ROUTINE
;	0354		SCH$QAST	: Q_AST ADDRESSING_MODE(ABSOLUTE);	!QUEUE AST

; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:34	DBB3:[MTAACP.SRC]QUEAST.B32;3					Page 2
; Digital Equipment Corporation
;
;	0355	GLOBAL ROUTINE QUEUE_AST : COMMON_CALL  =
;	0356	
;	0357	!++
;	0358	!
;	0359	! FUNCTIONAL DESCRIPTION:
;	0360	!	THIS ROUTINE QUEUES AN AST TO THE USER INDICATING THAT USER LABELS
;	0361	!	ARE TO BE PROCESSED NOW
;	0362	!
;	0363	! CALLING SEQUENCE:
;	0364	!	QUEUE_AST(), CALLED IN KERNEL MODE
;	0365	!
;	0366	! INPUT PARAMETERS:
;	0367	!	NONE
;	0368	!
;	0369	! IMPLICIT INPUTS:
;	0370	!	CURRENT_VCB 	- ADDRESS OF VOLUME CONTROL BLOCK
;	0371	!
;	0372	! OUTPUT PARAMETERS:
;	0373	!	NONE
;	0374	!
;	0375	! IMPLICIT OUTPUTS:
;	0376	!	NONE
;	0377	!
;	0378	! ROUTINE VALUE:
;	0379	!	0	- AST NOT QUEUED
;	0380	!	1	- AST QUEUED
;	0381	!
;	0382	! SIDE EFFECTS:
;	0383	!	IF AN AST BLOCK WAS SUPPLIED THEN THE AST IS QUEUED TO THE USER.
;	0384	!
;	0385	!--
;	0386	
;	0387	BEGIN
;	0388	
;	0389	EXTERNAL REGISTER
;	0390		COMMON_REG;
;	0391	
;	0392	LOCAL
;	0393		AST_BLOCK;				!ADDRESS OF USER SUPPLIED AST CONTROL BLOCK
;	0394	
;	0395	AST_BLOCK = .CURRENT_VCB[VCB$L_USRLBLAST];	!PICK UP ADDRESS OF USER SUPPLIED AST CONTROL BLOCK
;	0396	IF .AST_BLOCK EQL 0 THEN RETURN 0;		!IF THERE WAS NOT ONE, RETURN
;	0397	CURRENT_VCB[VCB$L_USRLBLAST] = 0;		!THIS ONE IS ABOUT TO BE USED
;	0398	IF NOT SCH$QAST(0,.AST_BLOCK) THEN RETURN 0;	!MAY BE NON_EXISTENT PROCESS,0=NULL PRIORITY INC
;	0399	RETURN 1;
;	0400	END;						!END OF ROUTINE


							    .TITLE  QUEAST
							    .IDENT  \A0001\

							    .GLOBL  SCH$QAST

							    .PSECT  $CODE$,NOWRT,2


; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:34	DBB3:[MTAACP.SRC]QUEAST.B32;3					Page 2-1
; Digital Equipment Corporation
;
					 07FC 00000 	    .ENTRY  QUEUE_AST, Save R2,R3,R4,R5,R6,R7,R8,R9,R10		      ; 0355
		         55	  44   AB  D0 00002 	    MOVL    68(CURRENT_VCB), AST_BLOCK				      ; 0395
				       12  13 00006 	    BEQL    1$							      ; 0396
				  44   AB  D4 00008 	    CLRL    68(CURRENT_VCB)					      ; 0397
				       52  D4 0000B 	    CLRL    R2							      ; 0398
			    00000000G  9F  16 0000D 	    JSB     @#SCH$QAST						      ;
		         04	       50  E9 00013 	    BLBC    R0, 1$						      ;
		         50	       01  D0 00016 	    MOVL    #1, R0						      ; 0399
					   04 00019 	    RET     							      ;
				       50  D4 0001A 1$:     CLRL    R0							      ; 0355
					   04 0001C 	    RET     							      ;

; Routine Size:  29 bytes


;	0401	END
;	0402	ELUDOM






;				       PSECT SUMMARY
;
;	Name		 Bytes			       Attributes
;
;  $CODE$         	    29  NOWRT,  RD ,  EXE,NOSHR,  LCL,  REL,  CON,NOPIC,ALIGN(2)




;				LIBRARY STATISTICS
;
;					     -------- Symbols --------    Blocks
;	File				     Total    Loaded   Percent      Read
;
;  DBA4:[SYSLIB]LIB.L32;1		      5582         7         0       225





;	0403	
; Size:		29 code + 0 data bytes
; Run Time:	00:04.2
; Elapsed Time:	00:12.4
; Memory Used:	249 pages
; Compilation Complete
