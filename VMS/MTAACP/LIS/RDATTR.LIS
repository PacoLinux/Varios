
; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:48	DBB3:[MTAACP.SRC]RDATTR.B32;17					Page 1
; Digital Equipment Corporation
;
;	0001	MODULE RDATTR (
;	0002			LANGUAGE (BLISS32),
;	0003			IDENT = 'A0001'
;	0004			) =
;	0005	BEGIN
;	0006	
;	0007	!
;	0008	! COPYRIGHT (C) 1977
;	0009	! DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASSACHUSETTS 01754
;	0010	!
;	0011	! THIS SOFTWARE IS FURNISHED  UNDER A LICENSE FOR USE ONLY ON A SINGLE
;	0012	! COMPUTER  SYSTEM AND  MAY BE  COPIED ONLY WITH  THE INCLUSION OF THE
;	0013	! ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE, OR ANY OTHER COPIES THEREOF,
;	0014	! MAY NOT BE PROVIDED OR  OTHERWISE MADE AVAILABLE TO ANY OTHER PERSON
;	0015	! EXCEPT FOR USE ON SUCH SYSTEM AND TO ONE WHO AGREES TO THESE LICENSE
;	0016	! TERMS.  TITLE TO AND  OWNERSHIP OF THE  SOFTWARE  SHALL AT ALL TIMES
;	0017	! REMAIN IN DEC.
;	0018	!
;	0019	! THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE WITHOUT NOTICE
;	0020	! AND SHOULD  NOT BE CONSTRUED  AS A COMMITMENT  BY DIGITAL  EQUIPMENT
;	0021	! CORPORATION.
;	0022	!
;	0023	! DEC ASSUMES  NO  RESPONSIBILITY  FOR  THE USE OR  RELIABILITY OF ITS
;	0024	! SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
;	0025	
;	0026	!++
;	0027	!
;	0028	! FACILITY:  MTAACP
;	0029	!
;	0030	! ABSTRACT:
;	0031	!	THIS MODULE READS ATTRIBUTES
;	0032	
;	0033	!
;	0034	! ENVIRONMENT:
;	0035	!
;	0036	!	STARLET OPERATING SYSTEM, INCLUDING PRIVILEGED SYSTEM SERVICES
;	0037	!	AND INTERNAL EXEC ROUTINES.
;	0038	!
;	0039	!--
;	0040	!
;	0041	!
;	0042	! AUTHOR:  D. H. GILLESPIE,	 CREATION DATE:	19-MAY-77 13:55  
;	0043	!
;	0044	! REVISION HISTORY:
;	0045	!
;	0046	!   D. H. Gillespie, 21-Mar-1978  10:22
;	0047	!   X0002 - UPDATE TO DATE CHANGE MADE BY ANDY
;	0048	!
;	0049	!   D. H. Gillespie, 27-Mar-1978  13:40
;	0050	!   X0003 - ADD ATR$C_UIC_RO ATTRIBUTE
;	0051	!
;	0052	!   D. H. Gillespie, 12-May-78  15:02
;	0053	!   A0001 - change CURRENT_VCB to a register
;	0054	!
;	0055	!**

; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:48	DBB3:[MTAACP.SRC]RDATTR.B32;17					Page 1-1
; Digital Equipment Corporation
;
;	0056	LIBRARY 'SYS$LIBRARY:LIB.L32';
;	0057	REQUIRE 'SRC$:MTADEF.B32';
;	0353	FORWARD ROUTINE
;	0354		COMPLETE_USRLBL	: COMMON_CALL NOVALUE,	!COMPLETE USER LABEL PROCESSING
;	0355		HANDLER		: COMMON_CALL NOVALUE,	!EXCEPTION HANDLER
;	0356		MOVE_DATA	: COMMON_CALL NOVALUE,	!MOVE ATTRIBUTE DATE
;	0357		READ_ATTRIBUTE	: COMMON_CALL NOVALUE,	!READ ATTRIBUTES
;	0358		SET_BCNT	: COMMON_CALL NOVALUE;	!SET NUMBER OF VALID BUFFER DESCRIPTOR
;	0359	
;	0360	EXTERNAL
;	0361		CURRENT_UCB	: REF BBLOCK,		!ADDRESS OF CURRENT VOLUME CONTROL BLOCK
;	0362		CURRENT_WCB	: REF BBLOCK,		!ADDRESS OF CURRENT WINDOW CONTROL BLOCK
;	0363		HDR1		: REF BBLOCK,		!ADDRESS OF HDR1(EOF1) LABEL
;	0364		HDR2		: REF BBLOCK,		!ADDRESS OF HDR2(EOF2) LABEL
;	0365		IO_CHANNEL,				!IO CHANNEL 
;	0366		IO_PACKET	: REF BBLOCK,		!ADDRESS OF CURRENT IO REQUEST PACKET
;	0367		IO_STATUS,				!IO STATUS 
;	0368		SCH$GL_PCBVEC	: REF VECTOR ADDRESSING_MODE(ABSOLUTE),	!VECTOR OF PCB'S
;	0369		USER_STATUS	: VECTOR[2];		!STATUS TO RETURN TO USER
;	0370	
;	0371	
;	0372	EXTERNAL ROUTINE
;	0373		ADJTM,					!ADJUST NUMBER OF TM'S SEEN
;	0374		CONVDATE_J2R,				!CONVERT JULIAN TO REG DATE
;	0375		DEALLOCATE,				!DEALLOCATE SYSTEM SPACE
;	0376		FORMAT_F11HOD1,				!FORMAT & WRITE FILES_11 HEADER ATTRIBUTE
;	0377		GTNEXT_VOL_READ	: JSB,			!MOUNT NEXT VOLUME FOR READ
;	0378		IO_DONE,				!COMPLETE IO
;	0379		LIB$CVT_DTB	: ADDRESSING_MODE(ABSOLUTE),	!CONVERT DECIMAL TO BINARY
;	0380		READ_BLOCK,				!READ MT DATA BLOCK
;	0381		SPACE_TM,				!SPACE TM
;	0382		SYS$BINTIM	: ADDRESSING_MODE(ABSOLUTE),	!CONVERT ASCII TO BINARY TIME
;	0383		UNBLOCK;				!UNBLOCK PROCESS WAITING FOR COMPLETION OF USER LABELS
;	0384	
;	0385	OWN
;	0386		CURRENT_ATTRIB;				!CURRENT ATTRIBUTE NUMBER BEING PROCESSED

; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:48	DBB3:[MTAACP.SRC]RDATTR.B32;17					Page 2
; Digital Equipment Corporation
;
;	0387	GLOBAL ROUTINE READ_ATTRIBUTE(ABD) : COMMON_CALL NOVALUE  =
;	0388	
;	0389	!++
;	0390	!
;	0391	! FUNCTIONAL DESCRIPTION:
;	0392	!	THIS ROUTINE READS ATTRIBUTES
;	0393	!
;	0394	! CALLING SEQUENCE:
;	0395	!	READ_ATTRIBUTE(ARG1)
;	0396	!
;	0397	! INPUT PARAMETERS:
;	0398	!	ARG1 - ADDRESS OF BUFFER DESCRIPTORS
;	0399	!
;	0400	! IMPLICIT INPUTS:
;	0401	!
;	0402	! OUTPUT PARAMETERS:
;	0403	!	ARG1 - ADDRESS OF BUFFER DESCRIPTORS
;	0404	!
;	0405	! IMPLICIT OUTPUTS:
;	0406	!	NONE
;	0407	!
;	0408	! ROUTINE VALUE:
;	0409	!	NONE
;	0410	!
;	0411	! SIDE EFFECTS:
;	0412	!	ATTRIBUTE DATA WRITTEN INTO BUFFER PACKET, WRITE-BACK ENABLED
;	0413	!
;	0414	!--
;	0415	
;	0416	BEGIN
;	0417	
;	0418	EXTERNAL REGISTER
;	0419		COMMON_REG;
;	0420	
;	0421	
;	0422	LITERAL
;	0423		ATR_HDR = 0,
;	0424		ATR_STAT = 1,
;	0425		ATR_BLSZ = 2,
;	0426		ATR_USERLBL = 3,
;	0427		ATR_NOP = 4,
;	0428		ATR_ENDLBLAST = 5,
;	0429		ATR_ZERO = 6,
;	0430		ATR_BINDATE = 7,
;	0431		ATR_UIC = 8;
;	0432	
;	0433	PSECT	GLOBAL = $DATA$;
;	0434	GLOBAL	DATA		: BLOCK[512,BYTE];	!WORK AREA FOR FILE HEADER
;	0435	
;	0436	STACKLOCAL
;	0437	
;	0438	! THIS MUST BE ON THE STACK SO IT IS SAVED WHEN A BLOCK IS DONE ON MULTI
;	0439	! VOLUME FILES
;	0440		ACCBLCNT;				!ACCUMULATIVE BLOCK TOTAL
;	0441	

; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:48	DBB3:[MTAACP.SRC]RDATTR.B32;17					Page 2-1
; Digital Equipment Corporation
;
;	0442	LOCAL
;	0443		P,					!ADDRESS OF CURRENT ATTRIBUTE
;	0444		COUNT,					!LENGTH OF ATTRIBUTE BUFFER
;	0445		CODE;					!CURRENT ATTRIBUTE CODE
;	0446	
;	0447	MAP
;	0448		ABD:		REF BBLOCKVECTOR[,ABD$C_LENGTH];!ADDRESS OF BUFFER DESCRIPTOR
;	0449	
;	0450	! LAYOUT OF STATISTICS BLOCK
;	0451	MACRO	LBN	= 0,0,32,0%;
;	0452	MACRO	BLOCKCNT= 4,0,32,0%;
;	0453	MACRO	ACCCNT	= 8,0,8,0%;
;	0454	MACRO	LCKCNT	= 9,0,8,0%;
;	0455	
;	0456	! ATTRIBUTE TABLE LAYOUT
;	0457	MACRO	MAX	= 0,0,8,0%;			!MAXIMUM SIZE OF ATTRIBUTE
;	0458	MACRO 	DISP	= 0,8,8,0%;			!DISPLACEMENT INTO FILE HEADER
;	0459	MACRO	ATR	= 0,16,8,0%;			!ATTRIBUTE TYPE
;	0460	
;	0461	GLOBAL BIND
;	0462	ATR_TABLE =	UPLIT BYTE(
;	0463			5,$BYTEOFFSET(FHD$W_FILEOWNER),ATR_HDR,0,
;	0464			3,$BYTEOFFSET(FHD$W_FILEPROT),ATR_HDR,0,
;	0465			2,$BYTEOFFSET(FHD$W_FILECHAR),ATR_HDR,0,
;	0466			ATR$S_RECATTR,$BYTEOFFSET(FHD$W_RECATTR),ATR_HDR,0,
;	0467			ATR$S_FILNAM+ATR$S_FILTYP+ATR$C_FILVER,$BYTEOFFSET(FHI$W_FILENAME)+FHD$K_LENGTH,ATR_HDR,0,
;	0468			ATR$S_FILTYP+ATR$S_FILVER,$BYTEOFFSET(FHI$W_FILETYPE)+FHD$K_LENGTH,ATR_HDR,0,
;	0469			ATR$S_FILVER,$BYTEOFFSET(FHI$W_VERSION)+FHD$K_LENGTH,ATR_HDR,0,
;	0470			ATR$S_EXPDAT,$BYTEOFFSET(FHI$T_EXPDATE)+FHD$K_LENGTH,ATR_HDR,1,
;	0471			ATR$S_STATBLK,0,ATR_STAT,0,
;	0472			0,0,ATR_HDR,0,
;	0473			ATR$S_BLOCKSIZE,0,ATR_BLSZ,1,
;	0474			ATR$S_USERLABEL,0,ATR_USERLBL,0,
;	0475			ATR$S_ASCDATES,$BYTEOFFSET(FHI$W_REVISION)+FHD$K_LENGTH,ATR_HDR,0,
;	0476			ATR$S_ALCONTROL,0,ATR_NOP,0,
;	0477			ATR$S_ENDLBLAST,0,ATR_ENDLBLAST,1,
;	0478			ATR$S_ASCNAME,0,ATR_NOP,0,
;	0479			ATR$S_CREDATE,0,ATR_BINDATE,1,
;	0480			ATR$S_REVDATE,0,ATR_ZERO,0,
;	0481			ATR$S_EXPDATE,0,ATR_BINDATE,1,
;	0482			ATR$S_BAKDATE,0,ATR_ZERO,0,
;	0483			ATR$S_UIC,0,ATR_UIC,0,
;	0484			ATR$S_FPRO,$BYTEOFFSET(FHD$W_FILEPROT)+FHD$K_LENGTH,ATR_HDR,0,
;	0485			ATR$S_RPRO,0,ATR_ZERO,0,
;	0486			ATR$S_ACLEVEL,0,ATR_ZERO,0,
;	0487			ATR$S_SEMASK,0,ATR_ZERO,0,
;	0488			ATR$S_UIC_RO,0,ATR_UIC,0,
;	0489			):BLOCKVECTOR [MAX_ATTR_CODE,1];
;	0490	

; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:48	DBB3:[MTAACP.SRC]RDATTR.B32;17					Page 3
; Digital Equipment Corporation
;
;	0491	BUILTIN FP;
;	0492	.FP = HANDLER;
;	0493	
;	0494	! SCANE THROUGH BUFFER ATTRIBUTE DESCRIPTORS FILLING THEM IN ONE AT A TIME
;	0495	
;	0496	INCRU I FROM ABD$C_ATTRIB TO .IO_PACKET[IRP$W_BCNT] - 1 DO
;	0497	    BEGIN
;	0498	    CURRENT_ATTRIB = .I;			!FOR USE BY EXCEPTION HANDLER
;	0499	    P = .ABD[.I,ABD$W_TEXT] + ABD[.I,ABD$W_TEXT];
;	0500	    COUNT = .ABD[.I,ABD$W_COUNT];
;	0501	    CODE = .(.P)<0,8> - 1;
;	0502	
;	0503	! CHECK ATTRIBUTE CODE TO SEE IF ITS LEGAL, THEN CHECK THE SIZE AGAINST LIMIT
;	0504	! IF AN ERROR IS FOUND, SET THE DESCRIPTOR COUNT EQUAL TO THE ONE THAT IS IN ERROR
;	0505	! THIS ALSO INHIBITS THE RETURN OF UNPROCESSED DESCRIPTORS.
;	0506	    IF .CODE GTRU MAX_ATTR_CODE - 1 THEN ERR_EXIT(SS$_BADATTRIB);
;	0507	
;	0508	    (LOCAL MAX_SIZE;
;	0509	    MAX_SIZE = .ATR_TABLE[.CODE,MAX];
;	0510	    IF .MAX_SIZE EQL 0 THEN MAX_SIZE = 512;
;	0511	    IF .COUNT GTRU .MAX_SIZE THEN ERR_EXIT(SS$_BADATTRIB));
;	0512	
;	0513	! NOW CALL SUBROUTINE TO FORMAT ATTRIBUTE
;	0514	    CASE .ATR_TABLE[.CODE,ATR] FROM ATR_HDR TO ATR_UIC OF 
;	0515		SET
;	0516		[ATR_HDR]	: FORMAT_F11HOD1(DATA);		!FORMAT FILES_11 HEADER
;	0517		[ATR_STAT]	:
;	0518	! IF A WINDOW EXISTS THEN THE FILE HAS BEEN ACCESSED IN WHICH CASE
;	0519	! DO NOT BOTHER TO GET BLOCK COUNT.  ALSO DO NOT RETURN BLOCK COUNT IF
;	0520	! FILE WILL BE ACCESSED.
;	0521				  BEGIN
;	0522				  LOCAL FUNCTION : BBLOCK[1];
;	0523				  FUNCTION = .IO_PACKET[IRP$W_FUNC];
;	0524				  IF .CURRENT_WCB NEQ 0 OR .FUNCTION[IO$V_ACCESS] THEN
;	0525				    BEGIN
;	0526				    DATA[LBN] = 0;
;	0527				    DATA[BLOCKCNT] = 0;
;	0528				    DATA[ACCCNT] = 1;
;	0529				    DATA[LCKCNT] = 1;
;	0530				    END
;	0531	! IF PARTIALLY CREATED FILE THEN ALL STATISTICS ARE O
;	0532				  ELSE
;	0533				  IF .CURRENT_VCB[VCB$V_PARTFILE] THEN
;	0534				    BEGIN
;	0535				    CH$FILL(0,10,DATA);
;	0536				    END
;	0537	! NOW IF NOT ACCESSED CALCULATE BLOCK COUNT
;	0538				  ELSE
;	0539				  BEGIN
;	0540				  ACCBLCNT = 0;
;	0541				  WHILE 1 DO
;	0542				    BEGIN
;	0543				    LOCAL BLCNT;
;	0544				    SPACE_TM(2 - .CURRENT_VCB[VCB$B_TM]);
;	0545				    IF NOT READ_BLOCK(.HDR1,80) THEN ERR_EXIT(SS$_TAPEPOSLOST);	!READ TRAILERS

; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:48	DBB3:[MTAACP.SRC]RDATTR.B32;17					Page 3-1
; Digital Equipment Corporation
;
;	0546				    LIB$CVT_DTB(EO1$S_BLOCKCNT,HDR1[EO1$T_BLOCKCNT],BLCNT);
;	0547				    ACCBLCNT = .ACCBLCNT + .BLCNT;
;	0548				    IF .HDR1[EO1$L_EO1LID] EQL 'EOF1' THEN EXITLOOP;
;	0549				    GTNEXT_VOL_READ();
;	0550				    END;
;	0551				  DATA[LBN] = 0;
;	0552				  DATA[BLOCKCNT] = ROT(.ACCBLCNT,16);
;	0553				  DATA[ACCCNT] = 0;
;	0554				  DATA[LCKCNT] = 0;
;	0555				  END;
;	0556				  END;
;	0557		[ATR_BLSZ]	: BEGIN				!GET BLOCK SIZE FROM HDR2
;	0558				  LOCAL RESULT;
;	0559				  IF NOT LIB$CVT_DTB(HD2$S_BLOCKLEN,HDR2[HD2$T_BLOCKLEN],RESULT)
;	0560				  THEN RESULT = 512;
;	0561				  DATA<0,16> = .RESULT<0,16>;
;	0562				  END;
;	0563		[ATR_ENDLBLAST]	: BEGIN				!PROCESSING END OF USER LABELS WITH NEXT AST
;	0564				  ERR_EXIT(SS$_BADATTRIB);
;	0565	
;	0566	!			  LOCAL
;	0567	!				AST_BLOCK : REF BBLOCK,
;	0568	!				MODE,
;	0569	!				LENGTH;
;	0570	!			  AST_BLOCK = .(.P+1);		!PICKUP ATTRIBUTE FOLLOWING ATTR CODE
;	0571	!
;	0572	! IF AST ADDRESS GIVEN THEN IT MUST BE A VALID AST TYPE CONTROL BLOCK
;	0573	!			  BEGIN
;	0574	!			  BUILTIN PROBER;
;	0575	!			  MODE = 0;
;	0576	!			  LENGTH = 4;
;	0577	!			  IF .AST_BLOCK NEQ 0 AND			!CHECK FOR NO AST BLOCK GIVEN
;	0578	!			  (NOT PROBER(MODE,LENGTH,.AST_BLOCK)		!CHECK VALID ADDRESS
;	0579	!			  OR .AST_BLOCK[ACB$B_TYPE] NEQ DYN$C_ACB)	!CHECK AST BLOCK TYPE
;	0580	!			  THEN ERR_EXIT(SS$_ILLLBLAST);
;	0581	!			  END;
;	0582	!			  KERNEL_CALL(COMPLETE_USRLBL,.AST_BLOCK,.I);
;	0583	!			  IF .CURRENT_VCB[VCB$V_WAIUSRLBL] THEN UNBLOCK(.CURRENT_VCB);
;	0584				  END;
;	0585		[ATR_USERLBL]	: BEGIN
;	0586				  ERR_EXIT(SS$_BADATTRIB);
;	0587	!			  LOCAL STRATCH : REF BBLOCK;
;	0588	!
;	0589	! IF NOT READING OR NOT WAITING FOR USER LABEL READ OR NOT EOF THEN ERROR
;	0590	!			  IF NOT .CURRENT_WCB[WCB$V_READ]
;	0591	!			  OR (NOT .CURRENT_VCB[VCB$V_WAIUSRLBL]
;	0592	!			  AND NOT (.HDR1[EO1$L_EO1LID] EQL 'EOF1' AND .CURRENT_VCB[VCB$B_TM] EQL 2))
;	0593	!			  THEN ERR_EXIT(SS$_ILLUSRLBLRD);
;	0594	!
;	0595	! CHECK IF LABEL SET TERMINATOR HAS BEEN ENCOUNTERED ALREADY
;	0596	!			  IF (.(.HDR1)<0,16> EQL 'HD'  AND .CURRENT_VCB[VCB$B_TM] EQL 1)
;	0597	!			  OR (.(.HDR1)<0,16> EQL 'EO' AND .CURRENT_VCB[VCB$B_TM] EQL 0) THEN
;	0598	!				BEGIN
;	0599	!				ERROR(SS$_ENDOFUSRLBL);	!NO MORE USER LABELS IN THE SET
;	0600	!				COUNT = 0;

; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:48	DBB3:[MTAACP.SRC]RDATTR.B32;17					Page 3-2
; Digital Equipment Corporation
;
;	0601	!				END
;	0602	!			  ELSE
;	0603	!				BEGIN
;	0604	!				LOCAL
;	0605	!				    ID,
;	0606	!				    SCRATCH : REF BBLOCK;
;	0607	!				IF .(.HDR1)<0,16> EQL 'HD' THEN ID = 'UHL' 	!NOTE WHICH SET OF LABELS
;	0608	!				ELSE ID = 'UTL';	!ARE TO BE READ
;	0609	!
;	0610	! ONE LABEL MAY BE IN THE SCRATCH LABEL AREA IF THE WAS NO HDR2
;	0611	!				SCRATCH = .HDR1 + 160;	!ADDRESS OF SCRATCH LABEL
;	0612	!				IF .(.SCRATCH)<0,24> EQL .ID<0,24> THEN	!WAS ONE READ ALREADY?
;	0613	!				    BEGIN		!YES
;	0614	!				    CH$MOVE(.SCRATCH,DATA,.COUNT);
;	0615	!				    .SCRATCH = 0;	!RETREIVE THIS ONE ONLY ONCE
;	0616	!				    END
;	0617	!				ELSE
;	0618	!				    BEGIN		!NO USER LABEL PREVIOUSLY READ OR REPORTED
;	0619	!				    WHILE 1 DO
;	0620	!					BEGIN
;	0621	!					IF NOT READ_BLOCK(DATA,.COUNT) THEN
;	0622	!					    BEGIN
;	0623	!					    ERROR(SS$_ENDOFUSRLBL);
;	0624	!					    COUNT = 0;
;	0625	!					    EXITLOOP;
;	0626	!					    END;
;	0627	!
;	0628	! RETRIEVE ONLY VALID USER LABELS
;	0629	!					IF .DATA<0,24> EQL .ID<0,24> THEN EXITLOOP;
;	0630	!					END;		!END OF READ USER LABEL LOOP
;	0631	!				    IF .IO_STATUS<16,16> LSS .COUNT THEN COUNT = .IO_STATUS<16,16>;
;	0632	!				    USER_STATUS<16,16> = .COUNT;
;	0633	!				    END;		!END OF EITHER ALREADY READ OR MUST READ
;	0634	!				END;			!END OF EITHER END OF LABEL SET OR RETRIEVE LABEL
;	0635				  END;				!END OF USER LABEL
;	0636		[ATR_NOP]	: COUNT = 0;
;	0637		[ATR_ZERO]	: CH$FILL(0, .COUNT,DATA);
;	0638		[ATR_BINDATE]	: BEGIN
;	0639				  LOCAL ADDR : REF BBLOCK;
;	0640				  IF .CODE EQLU ATR$C_CREDATE-1 
;	0641				  THEN ADDR = HDR1[HD1$T_CREATEDT]
;	0642				  ELSE ADDR = HDR1[HD1$T_EXPIREDT];
;	0643				  CONVDATE_J2R(DATA+8,.ADDR);
;	0644				  (DATA+19)<0,8> = ' ';
;	0645				  (DATA+20) = 11;
;	0646				  (DATA+24) = DATA+8;
;	0647				  SYS$BINTIM(DATA+20,DATA);
;	0648				  END;
;	0649		[ATR_UIC]	: DATA= .CURRENT_UCB[UCB$L_OWNUIC];
;	0650		TES;
;	0651	    KERNEL_CALL(MOVE_DATA,.COUNT,DATA + .ATR_TABLE[.CODE,DISP],.P,.ABD,.I);
;	0652	    END;
;	0653	END;					!END OF ROUTINE



; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:48	DBB3:[MTAACP.SRC]RDATTR.B32;17					Page 3-3
; Digital Equipment Corporation
;
							    .TITLE  RDATTR
							    .IDENT  \A0001\

							    .PSECT  $CODE$,NOWRT,2

					      00000 P.AAA:  .BYTE   5, 8, 0, 0, 3, 10, 0, 0, 2, 12, 0, 0, 32, 14, 0, 0, 15, - ;
								    46, 0, 0, 4, 52, 0, 0, 2, 54, 0, 0, 7, 84, 0, 1, 10, 0, - ;
								    1, 0, 0, 0, 0, 0, 2, 0, 2, 1, 80, 0, 3, 0, 35, 56, 0, 0, -;
								    14, 0, 4, 0, 4, 0, 5, 1, 20, 0, 4, 0, 8, 0, 7, 1, 8, 0, - ;
								    6, 0, 8, 0, 7, 1, 8, 0, 6, 0, 4, 0, 8, 0, 2, 56, 0, 0, -  ;
								    2, 0, 6, 0, 2, 0, 6, 0, 8, 0, 6, 0, 4, 0, 8, 0, 0	      ;
					      00069	    .BLKB   3

							    .PSECT  $DATA$,NOEXE,2

					      00000 DATA::  .BLKB   512

							    .PSECT  $LOCKEDD1$,NOEXE,2

					      00000 CURRENT_ATTRIB:
							    .BLKB   4

						    ATR_TABLE==		P.AAA
							    .GLOBL  CURRENT_UCB, CURRENT_WCB, HDR1, HDR2, IO_CHANNEL
							    .GLOBL  IO_PACKET, IO_STATUS, SCH$GL_PCBVEC, USER_STATUS
							    .GLOBL  ADJTM, CONVDATE_J2R, DEALLOCATE, FORMAT_F11HOD1
							    .GLOBL  GTNEXT_VOL_READ, IO_DONE, LIB$CVT_DTB, READ_BLOCK
							    .GLOBL  SPACE_TM, SYS$BINTIM, UNBLOCK, SYS$CMKRNL

							    .PSECT  $CODE$,NOWRT,2

					 07FC 0006C 	    .ENTRY  READ_ATTRIBUTE, Save R2,R3,R4,R5,R6,R7,R8,R9,R10	      ; 0387
		         5E	       0C  C2 0006E 	    SUBL2   #12, SP						      ;
		         6D	0000V  CF  9E 00071 	    MOVAB   HANDLER, (FP)					      ; 0492
		         50	0000G  CF  D0 00076 	    MOVL    IO_PACKET, R0					      ; 0496
		         5A	  32   A0  3C 0007B 	    MOVZWL  50(R0), R10						      ;
				       5A  D7 0007F 	    DECL    R10							      ;
		         57	       05  D0 00081 	    MOVL    #5, I						      ;
				     0192  31 00084 	    BRW     27$							      ;
		  0000'  CF	       57  D0 00087 1$:     MOVL    I, CURRENT_ATTRIB					      ; 0498
		         50	  04 BC47  7E 0008C 	    MOVAQ   @ABD[I], R0						      ; 0499
		         59	       60  3C 00091 	    MOVZWL  (R0), P						      ;
		         59	       50  C0 00094 	    ADDL2   R0, P						      ;
		         50	  04 BC47  7E 00097 	    MOVAQ   @ABD[I], R0						      ; 0500
		         58	  02   A0  3C 0009C 	    MOVZWL  2(R0), COUNT					      ;
		         56	       69  9A 000A0 	    MOVZBL  (P), CODE						      ; 0501
				       56  D7 000A3 	    DECL    CODE						      ;
		         18	       56  D1 000A5 	    CMPL    CODE, #24						      ; 0506
				       02  1B 000A8 	    BLEQU   2$							      ;
				       34  BF 000AA 	    CHMU    #52							      ;
				FF4F CF46  DF 000AC 2$:     PUSHAL  ATR_TABLE[CODE]					      ; 0509
		         50	       9E  9A 000B1 	    MOVZBL  @(SP)+, MAX_SIZE					      ;
				       05  12 000B4 	    BNEQ    3$							      ; 0510
		         50	0200   8F  3C 000B6 	    MOVZWL  #512, MAX_SIZE					      ;
		         50	       58  D1 000BB 3$:     CMPL    COUNT, MAX_SIZE					      ; 0511

; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:48	DBB3:[MTAACP.SRC]RDATTR.B32;17					Page 3-4
; Digital Equipment Corporation
;
				       02  1B 000BE 	    BLEQU   4$							      ;
				       34  BF 000C0 	    CHMU    #52							      ;
				FF3B CF46  DF 000C2 4$:     PUSHAL  ATR_TABLE+2[CODE]					      ; 0514
	   08	         00	       9E  8F 000C7 	    CASEB   @(SP)+, #0, #8					      ;
	 00A7	       001D	     0012     000CB 5$:     .WORD   6$-5$,-						      ;
	 00C7	       00CB	     00C7     000D1		    7$-5$,-						      ;
	 0119	       00D9	     00CF     000D7		    16$-5$,-						      ;
								    18$-5$,-						      ;
								    20$-5$,-						      ;
								    18$-5$,-						      ;
								    21$-5$,-						      ;
								    22$-5$,-						      ;
								    25$-5$						      ;
				0000'  CF  9F 000DD 6$:     PUSHAB  DATA						      ; 0516
		  0000G  CF	       01  FB 000E1 	    CALLS   #1, FORMAT_F11HOD1					      ;
				       2C  11 000E6 	    BRB     10$							      ; 0514
		         50	0000G  CF  D0 000E8 7$:     MOVL    IO_PACKET, R0					      ; 0523
		         50	  20   A0  3C 000ED 	    MOVZWL  32(R0), FUNCTION					      ;
				0000G  CF  D5 000F1 	    TSTL    CURRENT_WCB						      ; 0524
				       04  12 000F5 	    BNEQ    8$							      ;
	   0D	         50	       06  E1 000F7 	    BBC     #6, FUNCTION, 9$					      ;
				0000'  CF  7C 000FB 8$:     CLRQ    DATA						      ; 0526
		  0000'  CF	0101   8F  B0 000FF 	    MOVW    #257, DATA+8					      ; 0528
				       68  11 00106 	    BRB     15$							      ; 0524
		         0A	  0B   AB  E9 00108 9$:     BLBC    11(CURRENT_VCB), 11$				      ; 0533
	   00	         6E	       00  2C 0010C 	    MOVC5   #0, (SP), #0, #10, DATA				      ; 0535
		  0000'  CF	       0A     00110									      ;
				       7E  11 00114 10$:    BRB     19$							      ; 0533
				  08   AE  D4 00116 11$:    CLRL    ACCBLCNT						      ; 0540
		         7E	  2E   AB  9A 00119 12$:    MOVZBL  46(CURRENT_VCB), -(SP)				      ; 0544
	   6E	         02	       6E  C3 0011D 	    SUBL3   (SP), #2, (SP)					      ;
		  0000G  CF	       01  FB 00121 	    CALLS   #1, SPACE_TM					      ;
		         7E	  50   8F  9A 00126 	    MOVZBL  #80, -(SP)						      ; 0545
				0000G  CF  DD 0012A 	    PUSHL   HDR1						      ;
		  0000G  CF	       02  FB 0012E 	    CALLS   #2, READ_BLOCK					      ;
		         04	       50  E8 00133 	    BLBS    R0, 13$						      ;
				0224   8F  BF 00136 	    CHMU    #548						      ;
				  04   AE  9F 0013A 13$:    PUSHAB  BLCNT						      ; 0546
	   7E	  0000G  CF	       36  C1 0013D 	    ADDL3   #54, HDR1, -(SP)					      ;
				       06  DD 00143 	    PUSHL   #6							      ;
	      00000000G  9F	       03  FB 00145 	    CALLS   #3, @#LIB$CVT_DTB					      ;
		    08   AE	  04   AE  C0 0014C 	    ADDL2   BLCNT, ACCBLCNT					      ; 0547
	      31464F45   8F	0000G  DF  D1 00151 	    CMPL    @HDR1, #826691397					      ; 0548
				       05  13 0015A 	    BEQL    14$							      ;
				     0000  30 0015C 	    BSBW    GTNEXT_VOL_READ					      ; 0549
				       B8  11 0015F 	    BRB     12$							      ; 0541
				0000'  CF  D4 00161 14$:    CLRL    DATA						      ; 0551
    0000'  CF	    08   AE	       10  9C 00165 	    ROTL    #16, ACCBLCNT, DATA+4				      ; 0552
				0000'  CF  B4 0016C 	    CLRW    DATA+8						      ; 0553
				       7D  11 00170 15$:    BRB     26$							      ; 0514
				       5E  DD 00172 16$:    PUSHL   SP							      ; 0559
	   7E	  0000G  CF	       05  C1 00174 	    ADDL3   #5, HDR2, -(SP)					      ;
				       05  DD 0017A 	    PUSHL   #5							      ;
	      00000000G  9F	       03  FB 0017C 	    CALLS   #3, @#LIB$CVT_DTB					      ;
		         05	       50  E8 00183 	    BLBS    R0, 17$						      ;

; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:48	DBB3:[MTAACP.SRC]RDATTR.B32;17					Page 3-5
; Digital Equipment Corporation
;
		         6E	0200   8F  3C 00186 	    MOVZWL  #512, RESULT					      ; 0560
		  0000'  CF	       6E  B0 0018B 17$:    MOVW    RESULT, DATA					      ; 0561
				       5D  11 00190 	    BRB     26$							      ; 0514
				       34  BF 00192 18$:    CHMU    #52							      ; 0586
				       59  11 00194 19$:    BRB     26$							      ; 0514
				       58  D4 00196 20$:    CLRL    COUNT						      ; 0636
				       55  11 00198 	    BRB     26$							      ; 0514
	   00	         6E	       00  2C 0019A 21$:    MOVC5   #0, (SP), #0, COUNT, DATA				      ; 0637
		  0000'  CF	       58     0019E									      ;
				       4B  11 001A2 	    BRB     26$							      ; 0514
		         10	       56  D1 001A4 22$:    CMPL    CODE, #16						      ; 0640
				       08  12 001A7 	    BNEQ    23$							      ;
	   50	  0000G  CF	       29  C1 001A9 	    ADDL3   #41, HDR1, ADDR					      ; 0641
				       06  11 001AF 	    BRB     24$							      ; 0640
	   50	  0000G  CF	       2F  C1 001B1 23$:    ADDL3   #47, HDR1, ADDR					      ; 0642
				       50  DD 001B7 24$:    PUSHL   ADDR						      ; 0643
				0000'  CF  9F 001B9 	    PUSHAB  DATA+8						      ;
		  0000G  CF	       02  FB 001BD 	    CALLS   #2, CONVDATE_J2R					      ;
		  0000'  CF	       20  90 001C2 	    MOVB    #32, DATA+19					      ; 0644
		  0000'  CF	       0B  D0 001C7 	    MOVL    #11, DATA+20					      ; 0645
		  0000'  CF	0000'  CF  9E 001CC 	    MOVAB   DATA+8, DATA+24					      ; 0646
				0000'  CF  9F 001D3 	    PUSHAB  DATA						      ; 0647
				0000'  CF  9F 001D7 	    PUSHAB  DATA+20						      ;
	      00000000G  9F	       02  FB 001DB 	    CALLS   #2, @#SYS$BINTIM					      ;
				       0B  11 001E2 	    BRB     26$							      ; 0514
		         50	0000G  CF  D0 001E4 25$:    MOVL    CURRENT_UCB, R0					      ; 0649
		  0000'  CF	  1C   A0  D0 001E9 	    MOVL    28(R0), DATA					      ;
				       57  DD 001EF 26$:    PUSHL   I							      ; 0651
				  04   AC  DD 001F1 	    PUSHL   ABD							      ;
				       59  DD 001F4 	    PUSHL   P							      ;
		         50	0000'  CF  9E 001F6 	    MOVAB   DATA, R0						      ;
				FE01 CF46  DF 001FB 	    PUSHAL  ATR_TABLE+1[CODE]					      ;
		         51	       9E  9A 00200 	    MOVZBL  @(SP)+, R1						      ;
				     6140  9F 00203 	    PUSHAB  (R1)[R0]						      ;
				       58  DD 00206 	    PUSHL   COUNT						      ;
				       05  DD 00208 	    PUSHL   #5							      ;
				       5E  DD 0020A 	    PUSHL   SP							      ;
				0000V  CF  9F 0020C 	    PUSHAB  MOVE_DATA						      ;
	      00000000G  9F	       08  FB 00210 	    CALLS   #8, @#SYS$CMKRNL					      ;
				       57  D6 00217 	    INCL    I							      ; 0496
		         5A	       57  D1 00219 27$:    CMPL    I, R10						      ;
				       03  1A 0021C 	    BGTRU   28$							      ;
				     FE66  31 0021E 	    BRW     1$							      ;
					   04 00221 28$:    RET     							      ; 0387

; Routine Size:  438 bytes



; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:48	DBB3:[MTAACP.SRC]RDATTR.B32;17					Page 4
; Digital Equipment Corporation
;
;	0654	ROUTINE MOVE_DATA(COUNT,SOURCE,DESTINATION,ABD,I) : COMMON_CALL NOVALUE  =
;	0655	
;	0656	!++
;	0657	!
;	0658	! FUNCTIONAL DESCRIPTION:
;	0659	!	WRITE BACK OF ATTRIBUTE ENABLED AND ATTRIBUTE WRITTEN INTO BUFFER PAKCET
;	0660	!
;	0661	! CALLING SEQUENCE:
;	0662	!	MOVE_DATA(ARG1,ARG2,ARG3,ARG4,ARG5), CALLED IN KERNEL MODE
;	0663	!
;	0664	! INPUT PARAMETERS:
;	0665	!	ARG1 - NUMBER OF CHARACTERS TO MOVE
;	0666	!	ARG2 - SOURCE ADDRESS
;	0667	!	ARG3 - DESTINATION ADDRESS
;	0668	!	ARG4 - ADDRESS OF BUFFER DESCRIPTORS
;	0669	!	ARG5 - NUMBER OF CURRENT BUFFER DESCRIPTOR
;	0670	!
;	0671	! IMPLICIT INPUTS:
;	0672	!	NONE
;	0673	!
;	0674	! OUTPUT PARAMETERS:
;	0675	!	ARG3 - DESTINATION ADDRESS
;	0676	!
;	0677	! IMPLICIT OUTPUTS:
;	0678	!	NONE
;	0679	!
;	0680	! ROUTINE VALUE:
;	0681	!	NONE
;	0682	!
;	0683	! SIDE EFFECTS:
;	0684	!	NONE
;	0685	!
;	0686	!--
;	0687	
;	0688	BEGIN
;	0689	
;	0690	EXTERNAL REGISTER
;	0691		COMMON_REG;
;	0692	
;	0693	MAP
;	0694		ABD	: REF BBLOCKVECTOR[,ABD$C_LENGTH];	!ADDRESS OF BEFFER DESCRIPTORS
;	0695	
;	0696	! SET THE BUFFERED READ BIT IN THE I/O PACKET TO INDICATE TO IO_DONE THAT THE
;	0697	! ATTRIBUTE BUFFERS ARE VALID
;	0698	IO_PACKET[IRP$V_FUNC] = 1;
;	0699	
;	0700	! RESTORE ACCESS MODE OF USER
;	0701	(.DESTINATION)<0,8> = .IO_PACKET[IRP$B_RMOD];
;	0702	
;	0703	! RETURN ACTUAL SIZE OF ATTRIBUTE TO USER
;	0704	ABD[.I,ABD$W_COUNT] = .COUNT;		
;	0705	
;	0706	! MOVE ATTRIBUTE TO BUFFER IN SYSTEM SPACE
;	0707	CH$MOVE(.COUNT,.SOURCE,.DESTINATION + 1);
;	0708	END;				!END OF ROUTINE

; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:48	DBB3:[MTAACP.SRC]RDATTR.B32;17					Page 4-1
; Digital Equipment Corporation
;





					 003C 00222 MOVE_DATA:
							    .WORD   Save R2,R3,R4,R5					      ; 0654
		         50	0000G  CF  D0 00224 	    MOVL    IO_PACKET, R0					      ; 0698
		    2A   A0	       02  88 00229 	    BISB2   #2, 42(R0)						      ;
		         51	  0C   AC  D0 0022D 	    MOVL    DESTINATION, R1					      ; 0701
		         61	  0B   A0  90 00231 	    MOVB    11(R0), (R1)					      ;
		         50	  14   AC  D0 00235 	    MOVL    I, R0						      ; 0704
		         50	  10 BC40  7E 00239 	    MOVAQ   @ABD[R0], R0					      ;
		    02   A0	  04   AC  B0 0023E 	    MOVW    COUNT, 2(R0)					      ;
      01   A1	    08   BC	  04   AC  28 00243 	    MOVC3   COUNT, @SOURCE, 1(R1)				      ; 0707
					   04 0024A 	    RET     							      ; 0654

; Routine Size:  41 bytes


;	0709	

; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:48	DBB3:[MTAACP.SRC]RDATTR.B32;17					Page 5
; Digital Equipment Corporation
;
;	0710	ROUTINE SET_BCNT(NUMBER) : COMMON_CALL NOVALUE  =
;	0711	
;	0712	!++
;	0713	!
;	0714	! FUNCTIONAL DESCRIPTION:
;	0715	!	THIS ROUTINE SETS THE BUFFER COUNT TO THE NUMBER OF VALID BUFFER DESCRIPTORS
;	0716	!
;	0717	! CALLING SEQUENCE:
;	0718	!	SET_BCNT(ARG1), CALLED IN KERNEL MODE
;	0719	!
;	0720	! INPUT PARAMETERS:
;	0721	!	THE NUMBER OF VALID BUFFER DESCRIPTOR
;	0722	!
;	0723	! IMPLICIT INPUTS:
;	0724	!	IO_PACKET - ADDRESS OF CURRENT IO REQUEST PACKET
;	0725	!
;	0726	! OUTPUT PARAMETERS:
;	0727	!	NONE
;	0728	!
;	0729	! IMPLICIT OUTPUTS:
;	0730	!	NONE
;	0731	!
;	0732	! ROUTINE VALUE:
;	0733	!	NONE
;	0734	!
;	0735	! SIDE EFFECTS:
;	0736	!	NONE
;	0737	!
;	0738	! USER ERRORS:
;	0739	!	NONE
;	0740	!
;	0741	!--
;	0742	
;	0743	BEGIN
;	0744	
;	0745	EXTERNAL REGISTER
;	0746		COMMON_REG;
;	0747	
;	0748	
;	0749	IO_PACKET[IRP$W_BCNT] = .NUMBER;
;	0750	END;					!END OF ROUTINE





					 0000 0024B SET_BCNT:
							    .WORD   Save nothing					      ; 0710
		         50	0000G  CF  D0 0024D 	    MOVL    IO_PACKET, R0					      ; 0749
		    32   A0	  04   AC  B0 00252 	    MOVW    NUMBER, 50(R0)					      ;
					   04 00257 	    RET     							      ; 0710

; Routine Size:  13 bytes



; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:48	DBB3:[MTAACP.SRC]RDATTR.B32;17					Page 5-1
; Digital Equipment Corporation
;
;	0751	

; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:48	DBB3:[MTAACP.SRC]RDATTR.B32;17					Page 6
; Digital Equipment Corporation
;
;	0752	GLOBAL ROUTINE COMPLETE_USRLBL(AST_BLOCK,NUMBER) : COMMON_CALL NOVALUE  =
;	0753	
;	0754	!++
;	0755	!
;	0756	! FUNCTIONAL DESCRIPTION:
;	0757	!	THIS ROUTINE RELEASES THE CURRENT AST BLOCK, STORES THE USERS NEXT AST
;	0758	!	CONTROL BLOCK AND COMPLETES THE CURRENT IO REQUEST
;	0759	!
;	0760	! CALLING SEQUENCE:
;	0761	!	COMPLETE_USRLBL(ARG1,ARG2), CALLED IN KERNEL MODE
;	0762	!
;	0763	! INPUT PARAMETERS:
;	0764	!	ARG1 - ADDRESS OF USER SUPPLIED AST CONTROL BLOCK
;	0765	!	ARG2 - NUMBER OF DESCRIPTOR FOR CURRENT ATTRIBUTE
;	0766	!
;	0767	! IMPLICIT INPUTS:
;	0768	!	NONE
;	0769	!
;	0770	! OUTPUT PARAMETERS:
;	0771	!	NONE
;	0772	!
;	0773	! IMPLICIT OUTPUTS:
;	0774	!	NONE
;	0775	!
;	0776	! ROUTINE VALUE:
;	0777	!	NONE
;	0778	!
;	0779	! SIDE EFFECTS:
;	0780	!	NONE
;	0781	!
;	0782	! USER ERRORS:
;	0783	!	NONE
;	0784	!
;	0785	!--
;	0786	
;	0787	BEGIN
;	0788	
;	0789	EXTERNAL REGISTER
;	0790		COMMON_REG;
;	0791	
;	0792	LOCAL
;	0793		PCB	: REF BBLOCK;
;	0794	IF .CURRENT_VCB[VCB$L_USRLBLAST] NEQ 0 THEN	!IF ONE CURRENTLY RECORDED
;	0795	    BEGIN
;	0796	    DEALLOCATE(.CURRENT_VCB[VCB$L_USRLBLAST]);	!DEALLOCATE CORE
;	0797	    PCB = .SCH$GL_PCBVEC[.(IO_PACKET[IRP$L_PID])<0,16>];	!INC USER AST QUOTA
;	0798	    PCB[PCB$W_ASTCNT] = .PCB[PCB$W_ASTCNT] + 1;
;	0799	    END;
;	0800	CURRENT_VCB[VCB$L_USRLBLAST] = .AST_BLOCK;
;	0801	IF .CURRENT_VCB[VCB$V_WAIUSRLBL] THEN
;	0802	    BEGIN
;	0803	    IO_DONE(.IO_PACKET);
;	0804	    IO_PACKET = 0;			!NOTE PACKET ALREADY RETURNED TO USER
;	0805	    END;
;	0806	END;

; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:48	DBB3:[MTAACP.SRC]RDATTR.B32;17					Page 6-1
; Digital Equipment Corporation
;





					 0400 00258 	    .ENTRY  COMPLETE_USRLBL, Save R10				      ; 0752
		         5A	0000G  CF  9E 0025A 	    MOVAB   IO_PACKET, R10					      ;
				  44   AB  D5 0025F 	    TSTL    68(CURRENT_VCB)					      ; 0794
				       1D  13 00262 	    BEQL    1$							      ;
				  44   AB  DD 00264 	    PUSHL   68(CURRENT_VCB)					      ; 0796
		  0000G  CF	       01  FB 00267 	    CALLS   #1, DEALLOCATE					      ;
		         51 00000000G  9F  D0 0026C 	    MOVL    @#SCH$GL_PCBVEC, R1					      ; 0797
		         50	       6A  D0 00273 	    MOVL    IO_PACKET, R0					      ;
		         50	  0C   A0  3C 00276 	    MOVZWL  12(R0), R0						      ;
		         50	     6140  D0 0027A 	    MOVL    (R1)[R0], PCB					      ;
				  3C   A0  B6 0027E 	    INCW    60(PCB)						      ; 0798
		    44   AB	  04   AC  D0 00281 1$:     MOVL    AST_BLOCK, 68(CURRENT_VCB)				      ; 0800
	   09	    0B   AB	       04  E1 00286 	    BBC     #4, 11(CURRENT_VCB), 2$				      ; 0801
				       6A  DD 0028B 	    PUSHL   IO_PACKET						      ; 0803
		  0000G  CF	       01  FB 0028D 	    CALLS   #1, IO_DONE						      ;
				       6A  D4 00292 	    CLRL    IO_PACKET						      ; 0804
					   04 00294 2$:     RET     							      ; 0752

; Routine Size:  61 bytes


;	0807	
;	0808	
;	0809	ROUTINE HANDLER : COMMON_CALL NOVALUE  =
;	0810	
;	0811	!++
;	0812	!
;	0813	! FUNCTIONAL DESCRIPTION:
;	0814	!	THIS ROUTINE  DOES CLEAN-UP ON ATTRIBUTE ERROR
;	0815	!
;	0816	! CALLING SEQUENCE:
;	0817	!	HANDLER()
;	0818	!
;	0819	! INPUT PARAMETERS:
;	0820	!	NONE
;	0821	!
;	0822	! IMPLICIT INPUTS:
;	0823	!	CURRENT_ATTRIB - ADDRESS OF DESCRIPTOR NUMBER FOR CURRENT ATTRIBUTE
;	0824	!
;	0825	! OUTPUT PARAMETERS:
;	0826	!	NONE
;	0827	!
;	0828	! IMPLICIT OUTPUTS:
;	0829	!	NONE
;	0830	!
;	0831	! ROUTINE VALUE:
;	0832	!	NONE
;	0833	!
;	0834	! SIDE EFFECTS:
;	0835	!	NONE

; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:48	DBB3:[MTAACP.SRC]RDATTR.B32;17					Page 6-2
; Digital Equipment Corporation
;
;	0836	!
;	0837	! USER ERRORS:
;	0838	!	NONE
;	0839	!
;	0840	!--
;	0841	
;	0842	BEGIN
;	0843	
;	0844	EXTERNAL REGISTER
;	0845		COMMON_REG;
;	0846	
;	0847	KERNEL_CALL(SET_BCNT,.CURRENT_ATTRIB);
;	0848	END;





					 0000 00295 HANDLER:.WORD   Save nothing					      ; 0809
				0000'  CF  DD 00297 	    PUSHL   CURRENT_ATTRIB					      ; 0847
				       01  DD 0029B 	    PUSHL   #1							      ;
				       5E  DD 0029D 	    PUSHL   SP							      ;
				  A9   AF  9F 0029F 	    PUSHAB  SET_BCNT						      ;
	      00000000G  9F	       04  FB 002A2 	    CALLS   #4, @#SYS$CMKRNL					      ;
					   04 002A9 	    RET     							      ; 0809

; Routine Size:  21 bytes


;	0849	
;	0850	END
;	0851	ELUDOM






;				       PSECT SUMMARY
;
;	Name		 Bytes			       Attributes
;
;  $LOCKEDD1$     	     4    WRT,  RD ,NOEXE,NOSHR,  LCL,  REL,  CON,NOPIC,ALIGN(2)
;  $DATA$         	   512    WRT,  RD ,NOEXE,NOSHR,  LCL,  REL,  CON,NOPIC,ALIGN(2)
;  $CODE$         	   682  NOWRT,  RD ,  EXE,NOSHR,  LCL,  REL,  CON,NOPIC,ALIGN(2)




;				LIBRARY STATISTICS
;
;					     -------- Symbols --------    Blocks
;	File				     Total    Loaded   Percent      Read
;
;  DBA4:[SYSLIB]LIB.L32;1		      5582        66         1       257

; Bliss-32 7.352	Saturday 21-AUG-1978 23:43:48	DBB3:[MTAACP.SRC]RDATTR.B32;17					Page 6-3
; Digital Equipment Corporation
;





;	0852	
; Size:		574 code + 624 data bytes
; Run Time:	00:17.4
; Elapsed Time:	00:40.7
; Memory Used:	346 pages
; Compilation Complete
