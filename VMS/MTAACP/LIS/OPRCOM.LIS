
; Bliss-32 7.352	Saturday 21-AUG-1978 23:41:21	DBB3:[MTAACP.SRC]OPRCOM.B32;21					Page 1
; Digital Equipment Corporation
;
;	0001	MODULE OPRCOM (
;	0002			LANGUAGE (BLISS32),
;	0003			IDENT = 'A0003'
;	0004			) =
;	0005	BEGIN
;	0006	
;	0007	!
;	0008	! COPYRIGHT (C) 1977
;	0009	! DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASSACHUSETTS 01754
;	0010	!
;	0011	! THIS SOFTWARE IS FURNISHED  UNDER A LICENSE FOR USE ONLY ON A SINGLE
;	0012	! COMPUTER  SYSTEM AND  MAY BE  COPIED ONLY WITH  THE INCLUSION OF THE
;	0013	! ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE, OR ANY OTHER COPIES THEREOF,
;	0014	! MAY NOT BE PROVIDED OR  OTHERWISE MADE AVAILABLE TO ANY OTHER PERSON
;	0015	! EXCEPT FOR USE ON SUCH SYSTEM AND TO ONE WHO AGREES TO THESE LICENSE
;	0016	! TERMS.  TITLE TO AND  OWNERSHIP OF THE  SOFTWARE  SHALL AT ALL TIMES
;	0017	! REMAIN IN DEC.
;	0018	!
;	0019	! THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE WITHOUT NOTICE
;	0020	! AND SHOULD  NOT BE CONSTRUED  AS A COMMITMENT  BY DIGITAL  EQUIPMENT
;	0021	! CORPORATION.
;	0022	!
;	0023	! DEC ASSUMES  NO  RESPONSIBILITY  FOR  THE USE OR  RELIABILITY OF ITS
;	0024	! SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
;	0025	
;	0026	!++
;	0027	!
;	0028	! FACILITY:  MTAACP
;	0029	!
;	0030	! ABSTRACT:
;	0031	!	THIS MODULE COMMUNICATES WITH THE OPERATOR
;	0032	!
;	0033	!
;	0034	! ENVIRONMENT:
;	0035	!
;	0036	!	STARLET OPERATING SYSTEM, INCLUDING PRIVILEGED SYSTEM SERVICES
;	0037	!	AND INTERNAL EXEC ROUTINES.
;	0038	!
;	0039	!--
;	0040	!
;	0041	!
;	0042	! AUTHOR:  D. H. GILLESPIE,	 CREATION DATE:  24-AUG-1977  
;	0043	!
;	0044	! REVISION HISTORY:
;	0045	!
;	0046	!   D. H. Gillespie, 27-Feb-1978  16:56
;	0047	!   X0002 - SET TIMER IF PROBLEM SENDING MSG TO OP
;	0048	!
;	0049	!   D. H. Gillespie, 12-May-78  14:42
;	0050	!   A0001 - change CURRENT_VCB to a register
;	0051	!
;	0052	!   D. H. Gillespie, 31-May-78  10:57
;	0053	!   A0002 - add PRINT_OPR_MSG subroutine
;	0054	!   D. H. Gillespie, 07-Aug-78  19:57
;	0055	!   A0003 - setup CTL$T_USERNAME and CTL$T_ACCOUNT

; Bliss-32 7.352	Saturday 21-AUG-1978 23:41:21	DBB3:[MTAACP.SRC]OPRCOM.B32;21					Page 1-1
; Digital Equipment Corporation
;
;	0056	!
;	0057	!**
;	0058	
;	0059	LIBRARY	'SYS$LIBRARY:LIB.L32';
;	0060	REQUIRE 'SRC$:MTADEF.B32';
;	0356	REQUIRE	'LIBD$:[VMSLIB.OBJ]MOUNTMSG.B32';
;	0456	
;	0457	
;	0458	FORWARD ROUTINE
;	0459		CANCEL_OP_REPLY	: COMMON_CALL NOVALUE,		!CANCEL REPLY FROM OPERATOR
;	0460		FILL_PROC	: COMMON_CALL NOVALUE,
;	0461		PRINT_NOT_LABEL	: NOVALUE JSB,			!PRINT NOT CORRECT LABEL
;	0462		PRINT_OPR_MSG	: L$PRINT_OPR_MSG,		!PRINT OPERATOR MESSAGE
;	0463		SEND_MSG	: COMMON_CALL;			!SEND MSG TO TAPE OPERATOR
;	0464	
;	0465	GLOBAL LITERAL
;	0466		WORK_AREA_SZ 	= 128;
;	0467	
;	0468	GLOBAL 
;	0469		WORK_AREA	: VECTOR[WORK_AREA_SZ,BYTE];
;	0470	
;	0471	EXTERNAL
;	0472		CTL$T_USERNAME	: ADDRESSING_MODE(ABSOLUTE),
;	0473		CTL$T_ACCOUNT	: ADDRESSING_MODE(ABSOLUTE),
;	0474		CURRENT_UCB	: REF BBLOCK,			!ADDRESS OF CURRENT UNIT CONTROL BLOCK
;	0475		MAIL_CHANNEL;					!CHANNEL FOR REPLY MAILBOX
;	0476	
;	0477	! SETUP MESSAGE DESCRIPTOR AND BUFFER IN WORK AREA
;	0478	BIND
;	0479		DESCR	= WORK_AREA 	: VECTOR [2],
;	0480		MSG	= WORK_AREA+8	: BBLOCK;

; Bliss-32 7.352	Saturday 21-AUG-1978 23:41:21	DBB3:[MTAACP.SRC]OPRCOM.B32;21					Page 2
; Digital Equipment Corporation
;
;	0481	ROUTINE SEND_MSG(MB_CHANNEL) : COMMON_CALL  =
;	0482	
;	0483	!++
;	0484	!
;	0485	! FUNCTIONAL DESCRIPTION:
;	0486	!	THIS ROUTINE FORMATS AND SENDS A MESSAGE TO THE TAPE OPERATOR
;	0487	!
;	0488	! CALLING SEQUENCE:
;	0489	!	SEND_MSG()
;	0490	!
;	0491	! INPUT PARAMETERS:
;	0492	!	ARG1 - MAILBOX CHANNEL NUMBER
;	0493	!
;	0494	! IMPLICIT INPUTS:
;	0495	!	CURRENT_VCB - ADDRESS OF CURRENT VOLUME CONTROL BLOCK
;	0496	!	DESCR[0] - LENGTH OF TEXT TO BE SENT
;	0497	!	MSG[OPC$L_MS_TEXT] - TEXT TO BE SENT
;	0498	!
;	0499	! OUTPUT PARAMETERS:
;	0500	!	NONE
;	0501	!
;	0502	! IMPLICIT OUTPUTS:
;	0503	!	MESSAGE SENT
;	0504	!
;	0505	! ROUTINE VALUE:
;	0506	!	SS$_DEVOFFLIN - NO OPERATOR
;	0507	!	SS$_MBTOOSML  - MAILBOX TOO SMALL FOR MESSAGE
;	0508	!
;	0509	! SIDE EFFECTS:
;	0510	!	NONE
;	0511	!
;	0512	!--
;	0513	
;	0514	BEGIN
;	0515	
;	0516	EXTERNAL REGISTER
;	0517		COMMON_REG;
;	0518	
;	0519	BIND
;	0520		SECONDS	= UPLIT(-10000000,-1);
;	0521	LOCAL
;	0522		STATUS;				!STATUS OF MAILBOX WRITE
;	0523	
;	0524	! FORMAT MESSAGE HEADER
;	0525	MSG[OPC$B_MS_TARGET] = OPR$M_TAPES;
;	0526	MSG[OPC$L_MS_RPLYID] = .CURRENT_VCB;	!ID IF REPLY
;	0527	DESCR[0] = .DESCR[0] + $BYTEOFFSET(OPC$L_MS_TEXT);
;	0528	DESCR[1] = MSG;
;	0529	INCR J FROM 0 TO 119 DO			!WAIT TWO MINUTES
;	0530	    BEGIN
;	0531	    KERNEL_CALL(FILL_PROC);
;	0532	    STATUS = $SNDOPR(	MSGBUF = DESCR,
;     P 0533				CHAN = .MB_CHANNEL);
;	0534	    IF .STATUS OR
;	0535	    (.STATUS NEQ SS$_INSFMEM AND .STATUS NEQ SS$_MBFULL)

; Bliss-32 7.352	Saturday 21-AUG-1978 23:41:21	DBB3:[MTAACP.SRC]OPRCOM.B32;21					Page 2-1
; Digital Equipment Corporation
;
;	0536	    THEN EXITLOOP;			!IF TEMPORARY PROBLEM, THEN REPEAT 
;	0537	    IF $SETIMR( DAYTIM = SECONDS, EFN = TIMEFN)
;	0538	    THEN $WAITFR (EFN = TIMEFN);
;	0539	    END;
;	0540	RETURN .STATUS;
;	0541	END;					!END OF ROUTINE


							    .TITLE  OPRCOM
							    .IDENT  \A0003\

							    .PSECT  $CODE$,NOWRT,2

					      00000 P.AAA:  .LONG   -10000000, -1					      ;

							    .PSECT  $LOCKEDD1$,NOEXE,2

					      00000 WORK_AREA::
							    .BLKB   128

						    WORK_AREA_SZ==	128
						    DESCR=		WORK_AREA
						    MSG=		WORK_AREA+8
						    SECONDS=		P.AAA
							    .GLOBL  CTL$T_USERNAME, CTL$T_ACCOUNT, CURRENT_UCB, MAIL_CHANNEL
							    .GLOBL  SYS$CMKRNL, SYS$SNDOPR, SYS$SETIMR, SYS$WAITFR

							    .PSECT  $CODE$,NOWRT,2

					 040C 00008 SEND_MSG:
							    .WORD   Save R2,R3,R10					      ; 0481
		         5A	0000'  CF  9E 0000A 	    MOVAB   DESCR, R10						      ;
		    09   AA	       04  90 0000F 	    MOVB    #4, MSG+1						      ; 0525
		    0C   AA	       5B  D0 00013 	    MOVL    CURRENT_VCB, MSG+4					      ; 0526
		         6A	       08  C0 00017 	    ADDL2   #8, DESCR						      ; 0527
		    04   AA	  08   AA  9E 0001A 	    MOVAB   MSG, DESCR+4					      ; 0481
				       53  D4 0001F 	    CLRL    J							      ; 0529
				       7E  D4 00021 1$:     CLRL    -(SP)						      ; 0531
				       5E  DD 00023 	    PUSHL   SP							      ;
				0000V  CF  9F 00025 	    PUSHAB  FILL_PROC						      ;
	      00000000G  9F	       03  FB 00029 	    CALLS   #3, @#SYS$CMKRNL					      ;
				  04   AC  DD 00030 	    PUSHL   MB_CHANNEL						      ; 0533
				       5A  DD 00033 	    PUSHL   R10							      ; 0481
	      00000000G  9F	       02  FB 00035 	    CALLS   #2, @#SYS$SNDOPR					      ; 0533
		         52	       50  D0 0003C 	    MOVL    R0, STATUS						      ;
		         34	       52  E8 0003F 	    BLBS    STATUS, 4$						      ; 0534
	      00000124   8F	       52  D1 00042 	    CMPL    STATUS, #292					      ; 0535
				       09  13 00049 	    BEQL    2$							      ;
	      000008D8   8F	       52  D1 0004B 	    CMPL    STATUS, #2264					      ;
				       22  12 00052 	    BNEQ    4$							      ;
				       7E  7C 00054 2$:     CLRQ    -(SP)						      ; 0537
				  A7   AF  9F 00056 	    PUSHAB  SECONDS						      ; 0481
				       03  DD 00059 	    PUSHL   #3							      ; 0537
	      00000000G  9F	       04  FB 0005B 	    CALLS   #4, @#SYS$SETIMR					      ;
		         09	       50  E9 00062 	    BLBC    R0, 3$						      ;

; Bliss-32 7.352	Saturday 21-AUG-1978 23:41:21	DBB3:[MTAACP.SRC]OPRCOM.B32;21					Page 2-2
; Digital Equipment Corporation
;
				       03  DD 00065 	    PUSHL   #3							      ; 0538
	      00000000G  9F	       01  FB 00067 	    CALLS   #1, @#SYS$WAITFR					      ;
	   AB	         53 00000077   8F  F3 0006E 3$:     AOBLEQ  #119, J, 1$						      ; 0529
		         50	       52  D0 00076 4$:     MOVL    STATUS, R0						      ; 0540
					   04 00079 	    RET     							      ; 0481

; Routine Size:  114 bytes


;	0542	

; Bliss-32 7.352	Saturday 21-AUG-1978 23:41:21	DBB3:[MTAACP.SRC]OPRCOM.B32;21					Page 3
; Digital Equipment Corporation
;
;	0543	GLOBAL ROUTINE PRINT_NOT_LABEL(MVL_ENTRY) : JSB NOVALUE  =
;	0544	
;	0545	!++
;	0546	!
;	0547	! FUNCTIONAL DESCRIPTION:
;	0548	!	THIS ROUTINE PRINTS AT THE TAPE OPERATOR'S TERMINAL THE MESSAGE
;	0549	!	'VOL ON MTAX: NOT XXXX'
;	0550	!
;	0551	! CALLING SEQUENCE:
;	0552	!	PRINT_NOT_LABEL(ARG1)
;	0553	!
;	0554	! INPUT PARAMETERS:
;	0555	!	NONE
;	0556	!
;	0557	! IMPLICIT INPUTS:
;	0558	!	CURRENT_UCB - ADDRESS OF CURRENT UNIT CONTROL BLOCK
;	0559	!	CURRENT_VCB - ADDRESS OF CURRENT VOLUME CONTROL BLOCK
;	0560	!
;	0561	! OUTPUT PARAMETERS:
;	0562	!	NONE
;	0563	!
;	0564	! IMPLICIT OUTPUTS:
;	0565	!	MESSAGE PRINTED AT TAPE OPERATOR'S TERMINAL UNLESS
;	0566	!	THERE IS NO OPERATOR OR THE MAILBOX IS TOO SMALL
;	0567	!
;	0568	! ROUTINE VALUE:
;	0569	!	NONE
;	0570	!
;	0571	! SIDE EFFECTS:
;	0572	!	NONE
;	0573	!
;	0574	!--
;	0575	
;	0576	BEGIN
;	0577	
;	0578	EXTERNAL REGISTER
;	0579		COMMON_REG;
;	0580	
;	0581	LOCAL
;	0582		LABEL_ADDR	: REF VECTOR[,BYTE],	!ADDRESS OF LABEL
;	0583		LABEL_SZ;
;	0584	
;	0585	MAP
;	0586		MVL_ENTRY	: REF BBLOCK;	!ADDRESS OF VOLUME ENTRY IN MVL
;	0587	
;	0588	LABEL_ADDR = MVL_ENTRY[MVL$T_VOLLBL];
;	0589	LABEL_SZ = 0;
;	0590	
;	0591	! FLUSH OUT TRAILING BLANKS
;	0592	INCR I FROM 0 TO MVL$S_VOLLBL -1 DO
;	0593	    BEGIN
;	0594	    IF .LABEL_ADDR[.I] EQL ' ' THEN EXITLOOP;
;	0595	    LABEL_SZ = .LABEL_SZ + 1;
;	0596	    END;
;	0597	PRINT_OPR_MSG(MOUN$_NOTLABEL,0,.LABEL_SZ,.LABEL_ADDR,BBLOCK[.CURRENT_UCB[UCB$L_DDB],DDB$T_NAME],

; Bliss-32 7.352	Saturday 21-AUG-1978 23:41:21	DBB3:[MTAACP.SRC]OPRCOM.B32;21					Page 3-1
; Digital Equipment Corporation
;
;	0598		.CURRENT_UCB[UCB$W_UNIT]);
;	0599	END;					!END OF ROUTINE





				       04  BB 0007A PRINT_NOT_LABEL::
							    PUSHR   #^M<R2>						      ; 0543
		         51	  08   AE  D0 0007C 	    MOVL    MVL_ENTRY, LABEL_ADDR				      ; 0588
				       52  D4 00080 	    CLRL    LABEL_SZ						      ; 0589
				       50  D4 00082 	    CLRL    I							      ; 0592
		         20	     6041  91 00084 1$:     CMPB    (I)[LABEL_ADDR], #32				      ; 0594
				       06  13 00088 	    BEQL    2$							      ;
				       52  D6 0008A 	    INCL    LABEL_SZ						      ; 0595
	   F4	         50	       05  F3 0008C 	    AOBLEQ  #5, I, 1$						      ; 0592
		         50	0000G  CF  D0 00090 2$:     MOVL    CURRENT_UCB, R0					      ; 0598
		         7E	  48   A0  3C 00095 	    MOVZWL  72(R0), -(SP)					      ; 0597
	   7E	    24   A0	       14  C1 00099 	    ADDL3   #20, 36(R0), -(SP)					      ;
				       51  DD 0009E 	    PUSHL   LABEL_ADDR						      ;
				       52  DD 000A0 	    PUSHL   LABEL_SZ						      ;
				       7E  D4 000A2 	    CLRL    -(SP)						      ;
			    00728104   8F  DD 000A4 	    PUSHL   #7504132						      ;
				     0000  30 000AA 	    BSBW    PRINT_OPR_MSG					      ;
		         5E	       18  C0 000AD 	    ADDL2   #24, SP						      ;
				       04  BA 000B0 	    POPR    #^M<R2>						      ; 0543
					   05 000B2 	    RSB     							      ;

; Routine Size:  57 bytes


;	0600	

; Bliss-32 7.352	Saturday 21-AUG-1978 23:41:21	DBB3:[MTAACP.SRC]OPRCOM.B32;21					Page 4
; Digital Equipment Corporation
;
;	0601	GLOBAL ROUTINE CANCEL_OP_REPLY : COMMON_CALL NOVALUE  =
;	0602	
;	0603	!++
;	0604	!
;	0605	! FUNCTIONAL DESCRIPTION:
;	0606	!	THIS ROUTINE CANCELS A REQUEST SENT TO THE OPERATOR
;	0607	!
;	0608	! CALLING SEQUENCE:
;	0609	!	CANCEL_OP_REPLY()
;	0610	!
;	0611	! INPUT PARAMETERS:
;	0612	!	NONE
;	0613	!
;	0614	! IMPLICIT INPUTS:
;	0615	!	CURRENT_VCB - ADDRESS OF CURRENT VOLUME CONTROL BLOCK
;	0616	!
;	0617	! OUTPUT PARAMETERS:
;	0618	!	NONE
;	0619	!
;	0620	! IMPLICIT OUTPUTS:
;	0621	!	NONE
;	0622	!
;	0623	! ROUTINE VALUE:
;	0624	!	NONE
;	0625	!
;	0626	! SIDE EFFECTS:
;	0627	!	NONE
;	0628	!
;	0629	! USER ERRORS:
;	0630	!	NONE
;	0631	!
;	0632	!--
;	0633	
;	0634	BEGIN
;	0635	
;	0636	EXTERNAL REGISTER
;	0637		COMMON_REG;
;	0638	
;	0639	MSG[OPC$B_MS_TYPE] = OPC$_RQ_CANCEL;
;	0640	DESCR[0] = 0;				!NO MESSAGE TEXT
;	0641	RETURN SEND_MSG(.MAIL_CHANNEL);
;	0642	END;





					 0000 000B3 	    .ENTRY  CANCEL_OP_REPLY, Save nothing			      ; 0601
		  0000'  CF	       05  90 000B5 	    MOVB    #5, MSG						      ; 0639
				0000'  CF  D4 000BA 	    CLRL    DESCR						      ; 0640
				0000G  CF  DD 000BE 	    PUSHL   MAIL_CHANNEL					      ; 0641
		  FF41   CF	       01  FB 000C2 	    CALLS   #1, SEND_MSG					      ;
					   04 000C7 	    RET     							      ; 0601

; Routine Size:  21 bytes

; Bliss-32 7.352	Saturday 21-AUG-1978 23:41:21	DBB3:[MTAACP.SRC]OPRCOM.B32;21					Page 4-1
; Digital Equipment Corporation
;


;	0643	

; Bliss-32 7.352	Saturday 21-AUG-1978 23:41:21	DBB3:[MTAACP.SRC]OPRCOM.B32;21					Page 5
; Digital Equipment Corporation
;
;	0644	GLOBAL ROUTINE PRINT_OPR_MSG(MSGNO,CHANNEL,ARGLIST) : L$PRINT_OPR_MSG  =
;	0645	
;	0646	!++
;	0647	!
;	0648	! FUNCTIONAL DESCRIPTION:
;	0649	!	This routine gets a system message, formats the messages and
;	0650	!	prints it.
;	0651	!
;	0652	! CALLING SEQUENCE:
;	0653	!	PRINT_OPR_MSG(ARG1,ARG2,ARG3)
;	0654	!
;	0655	! INPUT PARAMETERS:
;	0656	!	ARG1 - system message number
;	0657	!	ARG2 - channel number for reply if one is wanted
;	0658	!	ARG3 - arguments for inclusion in message
;	0659	!
;	0660	! IMPLICIT INPUTS:
;	0661	!	NONE
;	0662	!
;	0663	! OUTPUT PARAMETERS:
;	0664	!	NONE
;	0665	!
;	0666	! IMPLICIT OUTPUTS:
;	0667	!	NONE
;	0668	!
;	0669	! ROUTINE VALUE:
;	0670	!	status code from send to operator
;	0671	!
;	0672	! SIDE EFFECTS:
;	0673	!	DATA is used as a work area(also used by RDATTR)
;	0674	!
;	0675	!--
;	0676	
;	0677	BEGIN
;	0678	
;	0679	EXTERNAL REGISTER
;	0680		COMMON_REG;
;	0681	
;	0682	EXTERNAL ROUTINE
;	0683		SYS$FAOL	: ADDRESSING_MODE(ABSOLUTE),
;	0684		SYS$GETMSG	: ADDRESSING_MODE(ABSOLUTE);
;	0685	
;	0686	EXTERNAL
;	0687		DATA;
;	0688	
;	0689	LOCAL DESCR_FAOSTR : VECTOR [2];
;	0690	
;	0691	DESCR_FAOSTR[0] = 256;
;	0692	DESCR_FAOSTR[1] = DATA;
;	0693	
;	0694	SYS$GETMSG(.MSGNO,DESCR_FAOSTR,DESCR_FAOSTR,1,0);
;	0695	
;	0696	DESCR[0] = WORK_AREA_SZ - 8 - $BYTEOFFSET(OPC$L_MS_TEXT);
;	0697	DESCR[1] = MSG[OPC$L_MS_TEXT];
;	0698	SYS$FAOL(DESCR_FAOSTR,DESCR,DESCR,ARGLIST);

; Bliss-32 7.352	Saturday 21-AUG-1978 23:41:21	DBB3:[MTAACP.SRC]OPRCOM.B32;21					Page 5-1
; Digital Equipment Corporation
;
;	0699	MSG[OPC$B_MS_TYPE] = OPC$_RQ_RQST;
;	0700	(LOCAL STATUS;
;	0701	STATUS = SEND_MSG(.CHANNEL);
;	0702	IF NOT .STATUS THEN RETURN .STATUS);
;	0703	RETURN 1;
;	0704	END;				! end of routine PRINT_OPR_MSG



							    .GLOBL  SYS$FAOL, SYS$GETMSG, DATA

		         5E	       04  C2 000C8 PRINT_OPR_MSG::
							    SUBL2   #4, SP						      ; 0644
		         7E	0100   8F  3C 000CB 	    MOVZWL  #256, DESCR_FAOSTR					      ; 0691
		    04   AE	0000G  CF  9E 000D0 	    MOVAB   DATA, DESCR_FAOSTR+4				      ; 0692
		         7E	       01  7D 000D6 	    MOVQ    #1, -(SP)						      ; 0694
				  08   AE  9F 000D9 	    PUSHAB  DESCR_FAOSTR					      ;
				  0C   AE  9F 000DC 	    PUSHAB  DESCR_FAOSTR					      ;
				  1C   AE  DD 000DF 	    PUSHL   MSGNO						      ;
	      00000000G  9F	       05  FB 000E2 	    CALLS   #5, @#SYS$GETMSG					      ;
		  0000'  CF	  70   8F  9A 000E9 	    MOVZBL  #112, DESCR						      ; 0696
		  0000'  CF	0000'  CF  9E 000EF 	    MOVAB   MSG+8, DESCR+4					      ; 0697
				  14   AE  9F 000F6 	    PUSHAB  ARGLIST						      ; 0698
				0000'  CF  9F 000F9 	    PUSHAB  DESCR						      ; 0644
				0000'  CF  9F 000FD 	    PUSHAB  DESCR						      ;
				  0C   AE  9F 00101 	    PUSHAB  DESCR_FAOSTR					      ; 0698
	      00000000G  9F	       04  FB 00104 	    CALLS   #4, @#SYS$FAOL					      ;
		  0000'  CF	       03  90 0010B 	    MOVB    #3, MSG						      ; 0699
				  10   AE  DD 00110 	    PUSHL   CHANNEL						      ; 0701
		  FEF0   CF	       01  FB 00113 	    CALLS   #1, SEND_MSG					      ;
		         03	       50  E9 00118 	    BLBC    STATUS, 1$						      ; 0702
		         50	       01  D0 0011B 	    MOVL    #1, R0						      ; 0703
		         5E	       08  C0 0011E 1$:     ADDL2   #8, SP						      ; 0644
					   05 00121 	    RSB     							      ;

; Routine Size:  90 bytes


;	0705	

; Bliss-32 7.352	Saturday 21-AUG-1978 23:41:21	DBB3:[MTAACP.SRC]OPRCOM.B32;21					Page 6
; Digital Equipment Corporation
;
;	0706	ROUTINE FILL_PROC  : COMMON_CALL NOVALUE =
;	0707	
;	0708	!++
;	0709	!
;	0710	! FUNCTIONAL DESCRIPTION:
;	0711	!	This routine fills in the username and account which print on OPCOM messages
;	0712	!
;	0713	!
;	0714	!
;	0715	! CALLING SEQUENCE:
;	0716	!
;	0717	! INPUT PARAMETERS:
;	0718	!	NONE
;	0719	!
;	0720	! IMPLICIT INPUTS:
;	0721	!	NONE
;	0722	!
;	0723	! OUTPUT PARAMETERS:
;	0724	!	NONE
;	0725	!
;	0726	! IMPLICIT OUTPUTS:
;	0727	!	NONE
;	0728	!
;	0729	! ROUTINE VALUE:
;	0730	!	NONE
;	0731	!
;	0732	! SIDE EFFECTS:
;	0733	!	NONE
;	0734	!
;	0735	!--
;	0736	
;	0737	BEGIN
;	0738	
;	0739	EXTERNAL REGISTER
;	0740		COMMON_REG;
;	0741	
;	0742	CH$MOVE(VVP$S_PROC_NAME, BBLOCK[.CURRENT_VCB[VCB$L_VPFL],VVP$T_PROC_NAME],
;	0743			CTL$T_USERNAME);
;	0744	CH$FILL(' ',8,CTL$T_ACCOUNT);
;	0745	END;





					 003C 00122 FILL_PROC:
							    .WORD   Save R2,R3,R4,R5					      ; 0706
		         50	  3C   AB  D0 00124 	    MOVL    60(CURRENT_VCB), R0					      ; 0742
00000000G  9F	  0110   C0	       0C  28 00128 	    MOVC3   #12, 272(R0), @#CTL$T_USERNAME			      ;
	   20	         6E	       00  2C 00132 	    MOVC5   #0, (SP), #32, #8, @#CTL$T_ACCOUNT			      ; 0744
	      00000000G  9F	       08     00136									      ;
					   04 0013C 	    RET     							      ; 0706

; Routine Size:  27 bytes


; Bliss-32 7.352	Saturday 21-AUG-1978 23:41:21	DBB3:[MTAACP.SRC]OPRCOM.B32;21					Page 6-1
; Digital Equipment Corporation
;

;	0746	END
;	0747	ELUDOM






;				       PSECT SUMMARY
;
;	Name		 Bytes			       Attributes
;
;  $LOCKEDD1$     	   128    WRT,  RD ,NOEXE,NOSHR,  LCL,  REL,  CON,NOPIC,ALIGN(2)
;  $CODE$         	   317  NOWRT,  RD ,  EXE,NOSHR,  LCL,  REL,  CON,NOPIC,ALIGN(2)




;				LIBRARY STATISTICS
;
;					     -------- Symbols --------    Blocks
;	File				     Total    Loaded   Percent      Read
;
;  DBA4:[SYSLIB]LIB.L32;1		      5582        28         0       242





; Size:		309 code + 136 data bytes
; Run Time:	00:14.1
; Elapsed Time:	00:39.4
; Memory Used:	283 pages
; Compilation Complete
