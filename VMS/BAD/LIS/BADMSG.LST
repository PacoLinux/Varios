BADMSG - MESSAGE OUTPUT ROUTINE	MACRO M1110  22-AUG-78 02:07  PAGE 2


      1					.TITLE	BADMSG - MESSAGE OUTPUT ROUTINES
      2					.IDENT	/04/
      3					;
      4					;
      5					; COPYRIGHT (C) 1974,1975,1976,1977
      6					;
      7					;
      8					; THIS  SOFTWARE  IS  FURNISHED  UNDER A LICENSE FOR USE ONLY ON A
      9					; SINGLE COMPUTER SYSTEM AND MAY BE COPIED ONLY WITH THE INCLUSION
     10					; OF  THE  ABOVE COPYRIGHT  NOTICE.  THIS SOFTWARE, OR  ANY  OTHER
     11					; COPIES THEREOF, MAY NOT BE PROVIDED OR OTHERWISE  MADE AVAILABLE
     12					; TO  ANY  OTHER PERSON  EXCEPT  FOR USE ON SUCH SYSTEM AND TO ONE
     13					; WHO AGREES TO THESE LICENSE TERMS.  TITLE  TO  AND  OWNERSHIP OF
     14					; THE SOFTWARE SHALL AT ALL TIMES REMAIN IN DIGITAL.
     15					;
     16					; THE  INFORMATION  IN THIS DOCUMENT IS SUBJECT  TO CHANGE WITHOUT
     17					; NOTICE AND SHOULD NOT BE CONSTRUED AS A  COMMITMENT  BY  DIGITAL
     18					; EQUIPMENT CORPORATION.
     19					;
     20					; DIGITAL ASSUMES NO  RESPONSIBILITY FOR THE USE OR RELIABILITY OF
     21					; ITS SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.
     22					;
     23					;
     24					; VERSION 04
     25					;
     26					; J. MASSE 01-JUL-74
     27					;
     28					;
     29					; MODIFIED BY:
     30					;
     31					;	P. J. BEZEREDI 01-NOV-76
     32					;
     33					;		PB010 -- BREAK BAD INTO SEPERATE MODULES.  ADD
     34					;			/LI SWITCH.
     35					;
     36					;	P. J. BEZEREDI 11-APR-77
     37					;
     38					;		PB023 -- MODIFICATIONS TO RUN STAND-ALONE.
     39					;
     40					;	P. WANNHEDEN 07-NOV-77
     41					;
     42					;		PW002 -- IMPLEMENT EXIT WITH STATUS.
     43					;
     44					;
     45						.MCALL	DIR$, WTSE$S, EXIT$S
BADMSG - MESSAGE OUTPUT ROUTINE	MACRO M1110  22-AUG-78 02:07  PAGE 3


     47						.NLIST	BEX
     48
     49
     50						.IF NDF	S$$BAD
     51
     52	000000	   102 	   101 	   104 	$MSG1::	.ASCIZ	/BAD -- FAILED TO READ MCR COMMAND BUFFER/
     53
     54						.ENDC
     55
     56
     57	000051	   102 	   101 	   104 	$MSG2::	.ASCIZ	/BAD -- SYNTAX ERROR/
     58	000075	   102 	   101 	   104 	$MSG3::	.ASCIZ	/BAD -- ILLEGAL DEVICE/
     59	000123	   102 	   101 	   104 	$MSG4::	.ASCIZ	/BAD -- DEVICE NOT IN SYSTEM/
     60	000157	   102 	   101 	   104 	$MSG5::	.ASCIZ	/BAD -- FAILED TO ATTACH DEVICE/
     61	000216	   015 	   012 	   102 	$MSG6::	.ASCIZ	<15><12>/BAD -- BLOCK 0 BAD - DO NOT USE AS SYSTEM DISK/
     62	000277	   102 	   101 	   104 	$MSG7::	.ASCIZ	/BAD -- BAD BLOCK FILE OVERFLOW/
     63	000336	   102 	   101 	   104 	$MSG8::	.ASCIZ	/BAD -- UNRECOVERABLE ERROR/
     64	000371	   102 	   101 	   104 	$MSG9::	.ASCIZ	/BAD -- DEVICE WRITE LOCKED/
     65	000424	   102 	   101 	   104 	$MSG10::.ASCIZ	/BAD -- DEVICE NOT READY/
     66	000454	   015 	   012 	   102 	$MSG12::.ASCII	<15><12>/BAD -- TOTAL NO. OF BAD BLOCKS = /
     67	000517	   060 	   060 	   060 	$MS12A::.ASCIZ	/000000000/
     68	000531	   102 	   101 	   104 	$MSG13::.ASCIZ	/BAD -- DEVICE HANDLER MISSING/
     69	000567	   102 	   101 	   104 	$MSG14::.ASCIZ	/BAD -- FAILED TO WRITE BAD BLOCK FILE/
     70	000635	   102 	   101 	   104 	$MSG16::.ASCIZ	/BAD -- VOLUME IS MOUNTED AS FILES-11/
     71
     72
     73						.IF NDF	R$$11M&R$$11S
     74
     75					$MSG11::.ASCIZ	/BAD -- DEVICE ALREADY MOUNTED/
     76					$MSG15::.ASCIZ	/BAD -- ILLEGAL FUNCTION FOR NON-PRIVILEGED TERMINAL/
     77					$MSG17::.ASCIZ	/BAD -- UNRECOGNIZED DISK TYPE/
     78
     79						.ENDC
     80
     81
     82	000702	   102 	   101 	   104 	$MSG18::.ASCIZ	/BAD -- MANUFACTURER'S BAD SECTOR FILE CORRUPT/
     83	000760	   102 	   101 	   104 	$MSG19::.ASCIZ	/BAD -- DISK IS ALIGNMENT CARTRIDGE/
     84	001023	   102 	   101 	   104 	$MSG20::.ASCIZ	/BAD -- FATAL HARDWARE ERROR/
     85	001057	   102 	   101 	   104 	$MSG21::.ASCIZ	/BAD -- FAILED TO READ MANUFACTURER'S BAD SECTOR FILE/
     86	001144	   102 	   101 	   104 	$MSG22::.ASCIZ	/BAD -- INVALID SWITCH/
     87	001172	   102 	   101 	   104 	$MSG23::.ASCII	/BAD -- BAD BLOCK FOUND - LBN= /
     88	001230	   060 	   060 	   060 	$MSG24::.ASCIZ	/0000000000/
     89
     90
     91						.IF DF	S$$BAD
     92
     93					$MSG25::.ASCIZ	<12>/BAD>/
     94					$MSG26::.ASCIZ	/BAD -- DEVICE OFFLINE/
     95					$MSG27::.ASCIZ	/BAD -- VECTOR NOT MULTIPLE OF FOUR/
     96					$MSG28::.ASCIZ	"BAD -- COMMAND I/O ERROR"
     97					$MSG29::.ASCIZ	/BAD -- COMMAND TOO LONG/
     98					$MSG30::.ASCIZ	/BAD -- CSR ADDRESS NOT IN SYSTEM/
     99
    100						.ENDC
    101
    102
    103						.EVEN
BADMSG - MESSAGE OUTPUT ROUTINE	MACRO M1110  22-AUG-78 02:07  PAGE 3-1


    104
    105						.LIST	BEX
    106
    107
    108					;+
    109					; **-$MESAG-OUTPUT MESSAGE AND INDICATE FAILURE
    110					; **-$MSG-OUTPUT MESSAGE (SUCCESS ASSUMED)
    111					;
    112					; ROUTINE TO OUTPUT A MESSAGE AND EXIT FROM '...BAD'
    113					;
    114					;
    115					; INPUTS:
    116					;
    117					;	R0 -- ADDRESS OF "ASCIZ" MESSAGE STRING
    118					;
    119					; OUTPUTS:
    120					;
    121					;	THE MESSAGE IS SENT TO "CO" AND '...BAD' IS TERMINATED.
    122					;
    123					;-
    124
    125	001244	012767 	000000G	000000G	$MESAG::MOV	#EX$SEV,$STATS	;INDICATE FAILURE
    126	001252	012701 	000040 		$MSG::	MOV	#40,R1		;SET CARRIAGE CONTROL
    127	001256	005767 	000000G			TST	$BK0FG		;WAS BLOCK 0 BAD?
    128	001262	001415 				BEQ	10$		;NO
    129	001264	010046 				MOV	R0,-(SP)	;SAVE MESSAGE ADDRESS
    130	001266	012700 	000216'			MOV	#$MSG6,R0	;PRINT WARNING MESSAGE
    131	001272					CALL	$PRINT		;DO IT
    132	001276	012600 				MOV	(SP)+,R0	;RESTORE MESSAGE ADDRESS
    133	001300	026727 	000000G	000000G		CMP	$STATS,#EX$SUC	;STATUS INDICATES ERROR?
    134	001306	001003 				BNE	10$		;IF NE YES
    135	001310	012767 	000000G	000000G		MOV	#EX$WAR,$STATS	;EXIT WITH STATUS = WARNING
    136	001316				10$:	CALL	$PRINT		;PRINT THE MESSAGE
    137	001322	012700 	000000G			MOV	#$DSKPB,R0	;GET ADDRESS OF DISK DPB
    138	001326	012760 	000000G	000000G		MOV	#IO.DET,Q.IOFN(R0)  ;LOAD DETACH FUNCTION CODE
    139	001334					DIR$	R0		;DETACH DISK
    140									;WHO CARES IF IT FAILS!!
    141
    142
    143						.IF DF	IAS!S$$BAD
    144
    145						JMP	$BADEP		;RESTART
    146
    147						.ENDC
    148
    149
    150						.IF NDF	S$$BAD
    151
    152	001340	016700 	000000G		$BADXT::MOV	$STATS,R0	;PICK-UP EXIT STATUS
    153	001344	000167 	000000G			JMP	$EXST		;EXIT WITH STATUS
    154
    155
    156						.ENDC
    157
    158
    159		000001 				.END
BADMSG - MESSAGE OUTPUT ROUTINE	MACRO M1110  22-AUG-78 02:07  PAGE 3-2
SYMBOL TABLE

A$$CHK= 000000   	G$$TTK= 000000   	N$$LDV= 000001   	S$$WPC= 000036   	$BK0FG= ****** GX
A$$CPS= 000000   	IO.DET= ****** GX	N$$MOV= 000021   	S$$WPR= 000005   	$DSKPB= ****** GX
A$$NSI= 000000   	I$$RAR= 000000   	N$$MXM= 000400   	S$$WRG= 000000   	$EXST = ****** GX
A$$PRI= 000000   	I$$RDN= 000000   	N$$TMO= 000012   	S$$YSZ= 030000   	$MESAG  001244RG
A$$TRP= 000000   	K$$CNT= 177546   	P$$D70= 000000   	T$$ACR= 000000   	$MSG    001252RG
C$$CDA= 000001   	K$$CSR= 177546   	P$$GMX= 000000   	T$$BTW= 000000   	$MSG1   000000RG
C$$CKP= 000000   	K$$LDC= 000000   	P$$LAS= 000000   	T$$BUF= 000000   	$MSG10  000424RG
C$$ORE= 002000   	K$$TPS= 000074   	P$$P11= 000001   	T$$CCA= 000000   	$MSG12  000454RG
C$$OVL= 000000   	LD$DB = 000000   	P$$P45= 000000   	T$$CCO= 000000   	$MSG13  000531RG
C$$RSH= 177564   	LD$DK = 000000   	P$$RFL= 000000   	T$$CTR= 000000   	$MSG14  000567RG
D$$BUG= 177514   	LD$DS = 000000   	P$$RTY= 000000   	T$$C11= 000001   	$MSG16  000635RG
D$$H11= 000002   	LD$DT = 000000   	P$$R11= 000001   	T$$GMC= 000000   	$MSG18  000702RG
D$$IAG= 000000   	LD$DX = 000000   	P$$SRF= 000000   	T$$GTS= 000000   	$MSG19  000760RG
D$$ISK= 000000   	LD$LP = 000000   	P$$TPT= 000000   	T$$J16= 000001   	$MSG2   000051RG
D$$L11= 000001   	LD$MM = 000000   	Q$$OPT= 000014   	T$$KMG= 000000   	$MSG20  001023RG
D$$M11= 000001   	LD$PP = 000000   	Q.IOFN= ****** GX	T$$LWC= 000000   	$MSG21  001057RG
D$$SHF= 000000   	LD$PR = 000000   	R$$DER= 000000   	T$$MAN= 016703   	$MSG22  001144RG
D$$YNC= 000000   	LD$TT = 000000   	R$$EXV= 000000   	T$$RNE= 000000   	$MSG23  001172RG
D$$YNM= 000000   	L$$ASG= 000000   	R$$JPO= 000000   	T$$RPR= 000000   	$MSG24  001230RG
EX$SEV= ****** GX	L$$DRV= 000000   	R$$JP1= 000001   	T$$RST= 000000   	$MSG3   000075RG
EX$SUC= ****** GX	L$$P11= 000001   	R$$JS1= 000001   	T$$RUB= 000000   	$MSG4   000123RG
EX$WAR= ****** GX	L$$11R= 000000   	R$$KWC= 000000   	T$$SYN= 000000   	$MSG5   000157RG
E$$DVC= 000000   	M$$CRB= 000124   	R$$K11= 000001   	T$$TRW= 000000   	$MSG6   000216RG
E$$NSI= 000000   	M$$CRX= 000000   	R$$LKL= 000000   	T$$VBF= 000000   	$MSG7   000277RG
E$$PER= 000000   	M$$EXT= 000000   	R$$NDC= 000006   	U$$MHI= 000040   	$MSG8   000336RG
E$$XPR= 000000   	M$$FCS= 000000   	R$$NDH= 000144   	U$$MLO= 120000   	$MSG9   000371RG
F$$AST= 000000   	M$$MGE= 000000   	R$$NDL= 000001   	U$$MRN= 170324   	$MS12A  000517RG
F$$LPP= 000000   	M$$MUP= 000000   	R$$SND= 000000   	V$$CTR= 000400   	$PRINT= ****** GX
F$$LVL= 000001   	M$$NET= 000000   	R$$VAX= 000000   	X$$DBT= 000000   	$STATS= ****** GX
G$$TPP= 000000   	M$$OVR= 000000   	R$$X11= 000001   	$BADXT  001340RG 	$$$R4 = 000000
G$$TSS= 000000   	N$$CON= 000144   	R$$11M= 000000

. ABS.	000000	   000
      	001350	   001
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  4126 WORDS  ( 17 PAGES)
DYNAMIC MEMORY:  4884 WORDS  ( 18 PAGES)
ELAPSED TIME:  00:00:08
OBJ$:BADMSG,LIS$:BADMSG/-SP=SRC$:RSXMC/PA:1,BADMSG
