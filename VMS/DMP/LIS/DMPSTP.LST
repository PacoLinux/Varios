DMPDEF	MACRO M1110  22-AUG-78 02:05
TABLE OF CONTENTS

     7-   24	MACRO INVOCATION AND ASSEMBLY PARAMETERS
     9-    1	**** DMPSTP VERSION M0006.1 ****
DMPDEF	MACRO M1110  22-AUG-78 02:05  PAGE 7


      1						.TITLE	DMPDEF
      2						.IDENT	/V02.1/
      3					;+
      4					; DUMP DEFINITION PREFIX FILE
      5					;-
      6					; COPYRIGHT 1973, DIGITAL EQUIPMENT CORP., MAYNARD, MASS. 01754
      7					;
      8					; DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF ITS
      9					; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
     10					;
     11					; PETER H. LIPMAN 30-MARCH-73
     12					; ALTERED FRIDAY 11-JAN-74 13:40
     13					; ALTERED FOR RSX11M 12-MAR-74 R.HEINEN
     14					; ALTERED 10-MAR-76 H.B. BOSWELL ADD RAD50 MODE DUMP  HBB1
     15					; ALTERED 4/1/76 R. HEINEN ADD HEX DUMP SWITCH /HX/LW/WD
     16					; ALTERED 4/10/76 R. HEINEN ADD RECORD DMP MODE /RC
     17					;	25-JUL-77 G.RITTENBURG
     18					;
     19					;	GR001 TAPE DENSITY SWITCH ADDED
     20					;
     21					;	I$$AS = 1  ;CONDITIONAL FOR 11D AND IAS
     22					;
     23					;
     24						.SBTTL	MACRO INVOCATION AND ASSEMBLY PARAMETERS
     25					;
     27						.MCALL	FDOFF$,FCSBT$,QIOSY$,CSI$,GCMLD$
     28						.MCALL	FDRC$R,FDBK$R,GET$S
     29						.MCALL	FHDOF$
     30						.MCALL	SVTK$S
     36					;
     37						.MCALL	FINIT$,OFNB$,READ$,WAIT$,PUT$,CLOSE$
     38						.MCALL	FSRSZ$,FDBDF$,NMBLK$,FDAT$A,FDRC$A,FDBK$A,FDOP$A
     39						.MCALL	CSI$1,CSI$2,CSI$SW,CSI$SV,CSI$ND,ALUN$S
     40						.MCALL	GCMLB$,CALL,RETURN,EXIT$S
     41
     42		000014 				FF=14			;FORM FEED CHARACTER
     43		000015 				CR=15			;CARRIAGE RETURN CHARCTER
     44		000012 				LF=12			;LINE FEED CHARACTER
     45		000011 				TAB=11			;TAB CHARACTER
     46		000003 				INLUN=3			;LUN FOR INPUT FILE
     47		000004 				OUTLUN=4		;LUN FOR LISTING FILE
     48		000113 				MAXHED=75.		;MAXIMUM HEADER SIZE IN BYTES
     49					;
     50		000014 				S.STBK=12.		;SIZE OF STATISTICS BLOCK IN BYTES
     51		000040 				CS.SWF=40		;CSI$2 STATUS BIT FOR "SWITCH FOUND"
     52
     53					;
     54					; BITS IN DMPCTL
     55		000001 				BLBIT=1			;SET IF BLOCK SWITCH WAS SPECIFIED
     56		000002 				HDBIT=2			;SET IF HEADER SWITCH WAS SPECIFIED
     57		000004 				IDBIT=4			;SET TO PRINT THE IDENT MESSAGE
     58		000010 				MDBIT=10		;SET IF NUMBERING FOR MEMORY DUMP
     59		000020 				FIDBIT=20		;FILE ID SPECIFIED
     60		000040 				ASCBIT=40		;DUMP IN ASCII MODE
     61		000100 				BYTBIT=100		;DUMP BYTE ORIENTED (VERSUS WORD)
     62		000200 				BABIT=200		; BASE BLOCK NUMBER:N:N
     63		000400 				LBBIT=400		; START BLOCK NUMBER BIT
DMPDEF	MACRO M1110  22-AUG-78 02:05  PAGE 7-1
MACRO INVOCATION AND ASSEMBLY PARAMETERS

     64		001000 				R50BIT=1000		;***HBB1 DUMP IN RAD50 MODE
     65		002000 			HEXBIT=2000		;***RJH  DUMP IN HEX
     66		004000 				LNGBIT=4000		;***RJH HEX LONG WORD MODE
     67		010000 				WRDBIT=10000		;***RJH HEX WORD MODE
     68		020000 				DECBIT=20000		;***RJH DECIMAL BIT
     69		040000 				RECBIT=40000		;***RJH RECORD DMP MODE
     70		100000 				LBNBIT=100000		;SET IF IN LOGICAL BLOCK MODE
     71		000001 				SPLBIT=1		; SET IN "DMPCT2" IF SPOOL OUTPUT
     72		000002 				PEBIT=2		;SET IN DMPCT2 IF DENSITY SPECIFIED
     73					; DEFINITION TO AVOID GLOBAL ARITHMETIC PROBLEMS
     74		000001 				FO.RD=1
     75		000040 				FA.SHR=40
DMPSTP M0006.1, DMP SETUP ROUTI	MACRO M1110  22-AUG-78 02:05  PAGE 9
MACRO INVOCATION AND ASSEMBLY PARAMETERS

      1						.TITLE	DMPSTP M0006.1, DMP SETUP ROUTINES
						.SBTTL	**** DMPSTP VERSION M0006.1 ****
						.IDENT	/M0006.1/
      2					; ALTERED:
      3					; ANDREW C. GOLDSTEIN  1-MAR-78  11:35
      4					; ALTERED WEDNESDAY 30-JAN-74 21:10
      5					;
      6					; COPYRIGHT 1974, DIGITAL EQUIPMENT CORP., MAYNARD MASS.
      7
      8					; THIS SOFTWARE IS FURNISHED TO PURCHASER UNDER A LICENSE FOR USE
      9					; ON A SINGLE COMPUTER SYSTEM AND CAN BE COPIED (WITH INCLUSION
     10					; OF DEC'S COPYRIGHT NOTICE) ONLY FOR USE IN SUCH SYSTEM, EXCEPT
     11					; AS MAY OTHERWISE BE PROVIDED IN WRITING BY DEC.
     12
     13					; THE INFORMATION IN THIS DOCUMENT IS SUBJECT TO CHANGE WITHOUT
     14					; NOTICE AND SHOULD NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL
     15					; EQUIPMENT CORPORATION.
     16
     17					; DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY
     18					; OF ITS SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
     19					;
     20					; PETER H. LIPMAN 30-MARCH-73
     21					; FOR RSX11M 20-JUL-74 R.HEINEN
     22					; ALTERED 4/1/76 R.HEINEN ADD HEX DMP /HX/LW/WD
     23					; ALTERED 4/10/76 R.HEINEN ADD RECORD MODE DMP /RC
     24					;	25-JUL-77 G.RITTENBURG
     25					;
     26					;	GR001	TAPE DENSITY SWITCH ADDED
     27					;
     28					;	16-SEPT-77 G.RITTENBURG
     29					;
     30					;	GR002	EXIT WITH STATUS ADDED
     31					;
     32					;	23-SEPT.-77 G.RITTENBURG
     33					;
     34					;	GR003----ATTACH DEVICE IF LP: OR TI:
     35					;
     36					;
     37						.MCALL	FDBK$R,FDBF$R
DMPSTP M0006.1, DMP SETUP ROUTI	MACRO M1110  22-AUG-78 02:05  PAGE 10
**** DMPSTP VERSION M0006.1 ****

     39	000000					PURE.I
     40
     41					;
     42					; GOT A COMMAND, CHECK IT'S SYNTAX
     43	000000				CHECK::	CSI$1	#CSIBLK,GCMLCB+G.CMLD+2,GCMLCB+G.CMLD
     44	000024	016067 	000002 	000146G		MOV	C.CMLD(R0),GCMLCB+G.CMLD
     45	000032	103007 				BCC	T25
     46	000034					CALL	.SYNER		; SEND SYNTAX ERROR
     47	000040	012767 	000002 	000000G		MOV	#2,.EXSTS	;FATAL ERROR
     48	000046	000167 	000000G		AGAI:	JMP	AGAIN
     49
     50					; GOT A SYNTACTICALLY CORRECT COMMAND LINE
     51					; NOW GET THE INPUT SPEC AND OPEN THE FILE
     52	000052	012701 	000000G		T25:	MOV	#IFNPT,R1
     53	000056					CALL	INCSI		;GET THE INPUT SPEC
     54	000062	103443 				BCS	32$
     55	000064	012701 	000000G			MOV	#OFNPT,R1
     56	000070					CALL	OUTCSI		;GET THE OUTPUT SPEC
     57	000074	103436 				BCS	32$
     58	000076	032767 	000030 	000000G		BIT	#CS.MOR!CS.WLD,INSPEC
     59	000104	001023 				BNE	30$
     60	000106	032767 	000030 	000000G		BIT	#CS.MOR!CS.WLD,OUSPEC
     61	000114	001017 				BNE	30$
     62	000116	032767 	040000 	000000G		BIT	#RECBIT,DMPCTL	; CHECK ILLEGAL /RC SWITCH
     63	000124	001431 				BEQ	35$		; IF EQ THEN OK
     64	000126	032767 	000001 	000000G		BIT	#BLBIT,DMPCTL	; BLOCKS SPECIFIED?
     65	000134	001425 				BEQ	35$		; IF EQ THEN OK
     66	000136					ERROUT	ER16
	000136	104402 				TRAP	X
	000140	000000G				.WORD	ER16SZ
	000142	000000G				.WORD	ER16MG
     67	000144	012767 	000002 	000000G		MOV	#2,.EXSTS	;FATAL ERROR
     68	000152	000735 				BR	AGAI		; ISSUE ERROR
     69					;
     70					; NO WILD CARDS OR LISTS ALLOWED IN INPUT OR OUTPUT SPEC
     71	000154				30$:	ERROUT	ER08
	000154	104402 				TRAP	X
	000156	000000G				.WORD	ER08SZ
	000160	000000G				.WORD	ER08MG
     72	000162	012767 	000002 	000000G		MOV	#2,.EXSTS	;FATAL ERROR
     73	000170	000726 				BR	AGAI
     74					;
     75					; BAD SWITCH OR VALUE ERROR FROM CSI$2
     76	000172				32$:	ERROUT	ER07
	000172	104402 				TRAP	X
	000174	000000G				.WORD	ER07SZ
	000176	000000G				.WORD	ER07MG
     77	000200	012767 	000002 	000000G		MOV	#2,.EXSTS	;FATAL ERROR
     78	000206	000717 				BR	AGAI
     79					;
     80					; NO ILLEGAL SWITCHESPRESENT
     81	000210	032767 	000004 	000000G	35$:	BIT	#IDBIT,DMPCTL	;TYPE THE IDENT MESSAGE?
     82	000216	001404 				BEQ	37$
     83	000220					ERROUT	IDNT		;YES
	000220	104402 				TRAP	X
	000222	000000G				.WORD	IDNTSZ
	000224	000000G				.WORD	IDNTMG
DMPSTP M0006.1, DMP SETUP ROUTI	MACRO M1110  22-AUG-78 02:05  PAGE 10-1
**** DMPSTP VERSION M0006.1 ****

     84	000226	000707 				BR	AGAI
     85					;
     86	000230	032767 	000200 	000000G	37$:	BIT	#BABIT,DMPCTL	; IF /BA SPEC THEN ACCEPT VALUES
     87									; AND GO ON
     88	000236	001303 				BNE	AGAI
     89	000240	005767 	000000G			TST	INSPEC
     90	000244	001007 				BNE	40$
     91	000246					ERROUT	ER14		;NO INPUT FILE SPECIFIED
	000246	104402 				TRAP	X
	000250	000000G				.WORD	ER14SZ
	000252	000000G				.WORD	ER14MG
     92	000254	012767 	000002 	000000G		MOV	#2,.EXSTS	;FATAL ERROR
     93	000262	000671 				BR	AGAI
     94	000264				40$:
     95	000264	012700 	000000G			MOV	#FDBIN,R0
     96	000270					FDRC$R	R0,#FD.RWM		; ASSUME READ/WRITE
     97	000276					FDBK$R	R0,#INBUF,#512.,,,#IOSTBK;
     98					;
     99					; PARSE THE DEVICE NAME FIRST
    100					;
    101	000320	012701 	000102G			MOV	#FDBIN+F.FNB,R1
    102	000324	016002 	000044 			MOV	F.DSPT(R0),R2
    103	000330	016003 	000046 			MOV	F.DFNB(R0),R3
    104	000334					CALL	.PRSDV		;PARSE THE DEVICE NAME AND UNIT
    105	000340	103010 				BCC	63$
    106	000342					ERROUT	ER12		;BAD DEVICE NAME
	000342	104402 				TRAP	X
	000344	000000G				.WORD	ER12SZ
	000346	000000G				.WORD	ER12MG
    107	000350	012767 	000002 	000000G		MOV	#2,.EXSTS	;FATAL ERROR
    108	000356	000167 	177464 			JMP	AGAI
    109	000362	132760 	000041 	000017 	63$:	BITB	#FD.SQD!FD.REC,F.RCTL(R0) ; SEQUENTIAL DEVICE?
    110	000370	001447 				BEQ	48$		; IF EQ THEN NO
    111	000372	032767 	000002 	000000G		BIT	#PEBIT,DMPCT2	;DENSITY SPECIFIED?
    112	000400	001434 				BEQ	87$		;DO NOTHING
    113	000402	010246 				MOV	R2,-(SP)	; SAVE R2
    114	000404	010146 				MOV	R1,-(SP)	; SAVE R1
    115	000406	012701 	000000G			MOV	#IO.STC,R1	; SET FOR STC COMMAND
    116	000412	012702 	000001 			MOV	#1,R2		;SINGLE PARAMETER
    117	000416	026727 	000000G	003100 		CMP	DENSTY,#1600.	; 1600 BPI?
    118	000424	001414 				BEQ	81$		; YES,BRANCH
    119	000426	026727 	000000G	001440 		CMP	DENSTY,#800.	; 800 BPI?
    120	000434	001405 				BEQ	83$		; YES BRANCH
    121	000436	012767 	000002 	000000G		MOV	#2,.EXSTS	;NO IS FATAL ERROR FOR NOW
    122	000444	000167 	000656 			JMP	ERRDEN
    123	000450	012703 	000000G		83$:	MOV	#ST08,R3	; SET FOR 800 BPI
    124	000454	000402 				BR	85$
    125	000456	012703 	000000G		81$:	MOV	#ST16,R3	; SET FOR 1600 BPI
    126	000462				85$:	CALL	.XQIO	;EXECUTE IO.STC
    127	000466	012601 				MOV	(SP)+,R1	;RESTORE R1
    128	000470	012602 				MOV	(SP)+,R2	;RESTORE R2
    129	000472				87$:
    130	000472					FDBK$R	R0,,.BYTES
    131	000500	016767 	000000G	000000G		MOV	.BYTES,BYTCNT	;
    132	000506	000406 				BR	43$
    133	000510	012767 	001000 	000000G	48$:	MOV	#512.,BYTCNT
    134	000516					FDBK$R	R0,,#512.
DMPSTP M0006.1, DMP SETUP ROUTI	MACRO M1110  22-AUG-78 02:05  PAGE 10-2
**** DMPSTP VERSION M0006.1 ****

    135	000524	032767 	000003 	000000G	43$:	BIT	#CS.NMF!CS.DIF,INSPEC
    136	000532	001045 				BNE	50$		;BRANCH IF FILE NAME WAS SPECIFIED
    137	000534	062702 	000016 			ADD	#N.FLID,R2	;R2=FILE ID ADR IF /FI WAS USED
    138	000540	012221 				MOV	(R2)+,(R1)+	;MOVE TO FILE NAME BLOCK
    139	000542	001403 				BEQ	44$		;BRANCH IF /FI NOT SPECIFIED
    140	000544	012221 				MOV	(R2)+,(R1)+	;MOVE REMAINING FILE ID WORDS
    141	000546	012221 				MOV	(R2)+,(R1)+
    142	000550	000436 				BR	50$		;OPEN THE FILE BY ITS FILE ID
    143					;
    144					; MUST BE LOGICAL BLOCK MODE, NO FILE NAME OR FILE ID
    145					;
    146	000552	032767 	040000 	000000G	44$:	BIT	#RECBIT,DMPCTL	; RECORD BIT SET?
    147	000560	001407 				BEQ	46$		; IF EQ THEN OK
    148	000562					ERROUT	ER16		; ISSUE ERROR
	000562	104402 				TRAP	X
	000564	000000G				.WORD	ER16SZ
	000566	000000G				.WORD	ER16MG
    149	000570	012767 	000002 	000000G		MOV	#2,.EXSTS	; FATAL ERROR
    150	000576	000412 				BR	45$		; CONTINUE
    151	000600	032767 	000001 	000000G	46$:	BIT	#BLBIT,DMPCTL	;REQUIRE /BLOCK SWITCH
    152	000606	001010 				BNE	47$
    153	000610					ERROUT	ER15		;/BLOCK SWITCH NOT PRESENT
	000610	104402 				TRAP	X
	000612	000000G				.WORD	ER15SZ
	000614	000000G				.WORD	ER15MG
    154	000616	012767 	000002 	000000G		MOV	#2,.EXSTS	; FATAL ERROR
    155	000624	000167 	177216 		45$:	JMP	AGAI
    156	000630	052767 	100000 	000000G	47$:	BIS	#LBNBIT,DMPCTL	;NOTE LOGICAL BLOCK MODE
    157	000636	042767 	000002 	000000G		BIC	#HDBIT,DMPCTL
    158	000644	000475 				BR	60$		;GO DUMP THE BLOCKS
    159					;
    160					; VIRTUAL BLOCK MODE, DUMP SPECIFIED FILE
    161					;
    162	000646	012767 	000000G	000036G	50$:	MOV	#STBLK,FDBIN+F.STBK
    163	000654	005760 	000102 			TST	F.FNB+N.FID(R0)		; FID PRESENT?
    164	000660	001011 				BNE	61$			; BR IF YES
    165	000662	012701 	000102G			MOV	#F.FNB+FDBIN,R1
    166	000666	016002 	000044 			MOV	F.DSPT(R0),R2
    167	000672	016003 	000046 			MOV	F.DFNB(R0),R3
    168	000676					CALL	.PARSE
    169	000702	103546 				BCS	90$
    170	000704	032767 	040000 	000000G	61$:	BIT	#RECBIT,DMPCTL		; RECORD MODE?
    171	000712	001414 				BEQ	62$			; IF NE THEN YES
    172	000714					FDRC$R	R0,#0,#INBUF,.BYTES
    173	000734	005067 	000000G			CLR	RECNUM			; RESET RECORD NUMBER
    174	000740	005067 	000002G			CLR	RECNUM+2		;
    175	000744				62$:
    176	000744					OFNB$	R0,#<FA.SHR!FO.RD>
    177	000756	103520 				BCS	90$		;BRANCH IF CAN'T OPEN FILE
    178					;
    179					; CHECK TO SEE IF FILE APPEARS TO BE EMPTY, IF SO USE SIZE FROM
    180					; STATISTICS BLOCK TO SET THE END OF FILE.
    181					; EFBK =0 IF FILE WASN'T WRITTEN BY FCS, EFBK = 1 AND FFBY =0
    182					; IF FILE WAS PARTIALLY WRITTEN AND NOT CLOSED PROPERLY.
    183	000760	005760 	000010 			TST	F.EFBK(R0)
    184	000764	001025 				BNE	60$
    185	000766	016001 	000012 			MOV	F.EFBK+2(R0),R1
DMPSTP M0006.1, DMP SETUP ROUTI	MACRO M1110  22-AUG-78 02:05  PAGE 10-3
**** DMPSTP VERSION M0006.1 ****

    186	000772	001405 				BEQ	55$		;BRANCH IF EFBK=0
    187	000774	005760 	000014 			TST	F.FFBY(R0)
    188	001000	001017 				BNE	60$
    189					;
    190					; FFBY = 0, IF EFBK=1, THE FILE IS EMPTY
    191	001002	005301 				DEC	R1
    192	001004	001015 				BNE	60$
    193	001006	016760 	000004G	000010 	55$:	MOV	STBLK+4,F.EFBK(R0)
    194	001014	016760 	000006G	000012 		MOV	STBLK+6,F.EFBK+2(R0)
    195	001022	062760 	000001 	000012 		ADD	#1,F.EFBK+2(R0)
    196	001030	005560 	000010 			ADC	F.EFBK(R0)
    197	001034	005060 	000014 			CLR	F.FFBY(R0)
    198					;
    199					; NOW OPEN THE LISTING FILE
    200					;
    201					;  **** EHM026 ****
    202					;	SAVE DEFAULT DIRECTORY STRING IN DYNAMIC BUFFER
    203					;
    204	001040	012700 	000000G		60$:	MOV	#INBUF,R0	; GET SAVE BUFFER ADDR
    205	001044	013701 	000000G			MOV	@#.FSRPT,R1	; POINT TO DEFAULT DIRECTORY STRING DESC.
    206	001050	062701 	000000G			ADD	#A.DFDR,R1
    207	001054	012102 				MOV	(R1)+,R2	; GET SIZE
    208	001056	010220 				MOV	R2,(R0)+	; AND SAVE IT
    209	001060	003405 				BLE	101$		; IF 0 OR MINUS ALL DONE
    210	001062	011101 				MOV	(R1),R1		; GET ADDR OF  STRING
    211	001064	010120 				MOV	R1,(R0)+	; SAVE IT
    212	001066	112120 			102$:	MOVB	(R1)+,(R0)+	; SAVE STRING
    213	001070					SOB	R2,102$
    214	001074	012700 	000000G		101$:	MOV	#FDBOUT,R0	; RESTORE R0 TO FDB
    215					;
    216					;  **** EHM026 ****	END OF SAVE EDIT
    217					;
    218	001100	012767 	001000 	000030G		MOV	#512.,FDBOUT+F.OVBS ;FOR LARGE LOCATE MODE RECORDS
    219	001106	012700 	000000G			MOV	#FDBOUT,R0	; ADDR OUTPUT FDB
    220	001112	005760 	000102 			TST	F.FNB+N.FID(R0)		; IF FID PRESENT
    221	001116	001011 				BNE	71$			; NO INITIAL PARSE
    222	001120	012701 	000102G			MOV	#F.FNB+FDBOUT,R1
    223	001124	016002 	000044 			MOV	F.DSPT(R0),R2
    224	001130	016003 	000046 			MOV	F.DFNB(R0),R3
    225	001134					CALL	.PARSE
    226	001140	103420 				BCS	72$
    227	001142				71$:	OFNB$	R0,#<FO.WRT>
    228	001154	103412 				BCS	72$	;BRANCH IF UNSUCCESSFUL
    229	001156	132760 	000001 	000017 		BITB	#FD.REC,F.RCTL(R0) ;LP: OR TI:?
    230	001164	001440 				BEQ	98$	;NO BRANCH
    231	001166	012701 	000000G			MOV	#IO.ATT,R1	;SET FUNCTION TO ATTACH DEVICE
    232	001172	005002 				CLR	R2		;NO EXTRA PARAMETERS
    233	001174					CALL	.XQIO		;ATTACH DEVICE
    234	001200	000432 				BR	98$			;CONTINUE
    235					;
    236					; FAILED TO OPEN OUTPUT FILE
    237	001202				72$:	ERROUT	ER05,0,0
	001202	104426 				TRAP	X
	001204	000000G				.WORD	ER05SZ
	001206	000000G				.WORD	ER05MG
    238	001210	012767 	000002 	000000G		MOV	#2,.EXSTS	; FATAL ERROR
    239	001216	000421 				BR	95$
DMPSTP M0006.1, DMP SETUP ROUTI	MACRO M1110  22-AUG-78 02:05  PAGE 10-4
**** DMPSTP VERSION M0006.1 ****

    240					;
    241					; FAILED TO OPEN INPUT FILE
    242	001220	122760 	000000G	000052 	90$:	CMPB	#IE.NSF,F.ERR(R0) ;IF "NO SUCH FILE" ERROR
    243	001226	001007 				BNE	92$
    244	001230					ERROUT	ER06,0		;GIVE THAT ERROR MESSAGE
	001230	104406 				TRAP	X
	001232	000000G				.WORD	ER06SZ
	001234	000000G				.WORD	ER06MG
    245	001236	012767 	000002 	000000G		MOV	#2,.EXSTS	; FATAL ERROR
    246	001244	000406 				BR	95$
    247	001246				92$:	ERROUT	ER04,0,0	;OTHERWISE GIVE THE GENERAL ONE
	001246	104426 				TRAP	X
	001250	000000G				.WORD	ER04SZ
	001252	000000G				.WORD	ER04MG
    248	001254	012767 	000002 	000000G		MOV	#2,.EXSTS	; FATAL ERROR
    249	001262	000167 	000000G		95$:	JMP	RSTART
    250					;
    251					;  **** EHM026 ****
    252					;	RESTORE THE DEFAULT DIR STRING
    253					;
    254	001266	012700 	000000G		98$:	MOV	#INBUF,R0	; GET SAVE BUFFER ADDR
    255	001272	013701 	000000G			MOV	@#.FSRPT,R1	; GET ADDR OF DEFAULT DIR STRING DESC
    256	001276	062701 	000000G			ADD	#A.DFDR,R1
    257	001302	012002 				MOV	(R0)+,R2	; GET SIZE OF STRING
    258	001304	010221 				MOV	R2,(R1)+	; RESTORE IT
    259	001306	003405 				BLE	94$		; IF 0 OR MINUS ALL DONE
    260	001310	011011 				MOV	(R0),(R1)	; RESTORE ADDRESS
    261	001312	012001 				MOV	(R0)+,R1	; GET ADDRESS OF WHERE TO PUT STRING
    262	001314	112021 			93$:	MOVB	(R0)+,(R1)+	; RESTORE STRING
    263	001316					SOB	R2,93$
    264	001322				94$:
    265					;
    266					;  **** EHM026 ****	END OF RESTORE EDIT
    267					;
    268	001322	000167 	000000G			JMP	RODUMP		; GOTO DUMP VIA ROOT
    269	001326				ERRDEN:	ERROUT	ER17
	001326	104402 				TRAP	X
	001330	000000G				.WORD	ER17SZ
	001332	000000G				.WORD	ER17MG
    270	001334	000167 	176506 			JMP	AGAI
DMPSTP M0006.1, DMP SETUP ROUTI	MACRO M1110  22-AUG-78 02:05  PAGE 11
**** DMPSTP VERSION M0006.1 ****

    272		000001 				.END
DMPSTP M0006.1, DMP SETUP ROUTI	MACRO M1110  22-AUG-78 02:05  PAGE 11-1
SYMBOL TABLE

AB.CDT  000105   	ER08MG= ****** GX	FF.SPC= 000004   	F.URBD= 000020   	I.FVER= 000010
AB.CHU  000064   	ER08SZ= ****** GX	FIDBIT= 000020   	F.VBN = 000064   	I.RVDT= 000014
AB.EXP  000122   	ER12MG= ****** GX	FO.APD= 000106   	F.VBSZ= 000060   	I.RVNO= 000012
AB.FNU  000000   	ER12SZ= ****** GX	FO.MFY= 000002   	GCMLCB= ****** GX	I.RVTI= 000023
AB.FP   000062   	ER14MG= ****** GX	FO.RD = 000001   	GE.BIF= 177775   	I.TISZ= 000006
AB.FSQ  000002   	ER14SZ= ****** GX	FO.UPD= 000006   	GE.CLO= 000004   	LBBIT = 000400
AB.GC   000061   	ER15MG= ****** GX	FO.WRT= 000016   	GE.COM= 000001   	LBNBIT= 100000
AB.NAM  000006   	ER15SZ= ****** GX	FP.DEL= 000010   	GE.CON= 000020   	LF    = 000012
AB.PC   000060   	ER16MG= ****** GX	FP.EXT= 000004   	GE.EOF= 177766   	LNGBIT= 004000
AB.RDT  000070   	ER16SZ= ****** GX	FP.RAT= 000001   	GE.IND= 000002   	MAXHED= 000113
AB.REV  000066   	ER17MG= ****** GX	FP.RDV= 000001   	GE.IOR= 177777   	MDBIT = 000010
AB.UAT  000020   	ER17SZ= ****** GX	FP.WRV= 000002   	GE.LC = 000010   	M.CTSZ= 000006
AGAI    000046R     002	FA.APD= 000100   	F.ACTL= 000076   	GE.MDE= 177774   	M.EFNU= 000002
AGAIN = ****** GX	FA.CRE= 000010   	F.ALOC= 000040   	GE.OPR= 177776   	M.EFSQ= 000004
ASCBIT= 000040   	FA.DLK= 001000   	F.BBFS= 000062   	GE.RBG= 177730   	M.ERVN= 000001
A.DFDR= ****** GX	FA.ENB= 100000   	F.BDB = 000070   	GE.SIZ= 000040   	M.ESQN= 000000
BABIT = 000200   	FA.EXC= 002000   	F.BGBC= 000057   	G.CMLD= 000146   	M.LBSZ= 000007
BLBIT = 000001   	FA.EXT= 000004   	F.BKDN= 000026   	G.DPRM= 000160   	M.MAX = 000011
BYTBIT= 000100   	FA.NSP= 000100   	F.BKDS= 000020   	G.ERR = 000140   	M.RTRV= 000012
BYTCNT= ****** GX	FA.POS= 010000   	F.BKEF= 000050   	G.ISIZ= 000020   	M.USE = 000010
CHECK   000000RG    002	FA.RD = 000001   	F.BKP1= 000051   	G.MODE= 000141   	NB.DEV= 000200
CH.AND= 000001   	FA.RWD= 004000   	F.BKST= 000024   	G.PSDS= 000142   	NB.DIR= 000100
CR    = 000015   	FA.SEQ= 040000   	F.BKVB= 000064   	G.SIZE= 000224   	NB.NAM= 000004
CSIBLK= ****** GX	FA.SHR= 000040   	F.CHR = 000075   	HDBIT = 000002   	NB.NXD= 020000
CS.DIF= 000002   	FA.TMP= 000020   	F.CNTG= 000034   	HEXBIT= 002000   	NB.SD1= 000400
CS.DVF= 000004   	FA.WCK= 020000   	F.DFNB= 000046   	H.CKSM= 000776   	NB.SD2= 001000
CS.EQU= 000040   	FA.WRT= 000002   	F.DSPT= 000044   	H.FCHA= 000014   	NB.SNM= 000040
CS.INP= 000001   	FDBIN = ****** GX	F.DVNM= 000134   	H.FLEV= 000006   	NB.STP= 000020
CS.MOR= 000020   	FDBOUT= ****** GX	F.EFBK= 000010   	H.FNUM= 000002   	NB.SVR= 000010
CS.NMF= 000001   	FD.BLK= 000010   	F.EFN = 000050   	H.FOWN= 000010   	NB.TYP= 000002
CS.OUT= 000002   	FD.CCL= 000002   	F.EOBB= 000032   	H.FPRO= 000012   	NB.VER= 000001
CS.SWF= 000040   	FD.COM= 020000   	F.ERR = 000052   	H.FSEQ= 000004   	NB.WLV= 010000
CS.WLD= 000010   	FD.CR = 000002   	F.FACC= 000043   	H.IDOF= 000000   	N.DEVD= 000000
C.CMLD= 000002   	FD.DIR= 000010   	F.FFBY= 000014   	H.MPOF= 000001   	N.DID = 000024
C.DEVD= 000006   	FD.FTN= 000001   	F.FNAM= 000110   	H.PROG= 000010   	N.DIRD= 000004
C.DIRD= 000012   	FD.F11= 040000   	F.FNB = 000102   	H.PROJ= 000011   	N.DVNM= 000032
C.DSDS= 000006   	FD.INS= 000010   	F.FTYP= 000116   	H.SCHA= 000015   	N.FID = 000000
C.FILD= 000016   	FD.ISP= 002000   	F.FVER= 000120   	H.UCHA= 000014   	N.FLID= 000016
C.MKW1= 000024   	FD.MNT= 100000   	F.HIBK= 000004   	H.UFAT= 000016   	N.FNAM= 000006
C.MKW2= 000026   	FD.OSP= 004000   	F.LUN = 000042   	IDBIT = 000004   	N.FNMD= 000010
C.SIZE= 000054   	FD.PLC= 000004   	F.MBCT= 000054   	IDNTMG= ****** GX	N.FTYP= 000014
C.STAT= 000001   	FD.PRN= 000004   	F.MBC1= 000055   	IDNTSZ= ****** GX	N.FVER= 000016
C.SWAD= 000022   	FD.PSE= 010000   	F.MBFG= 000056   	IE.NSF= ****** GX	N.NEXT= 000022
C.TYPR= 000000   	FD.RAH= 000001   	F.NRBD= 000024   	IFNPT = ****** GX	N.SPEC= 000014
DECBIT= 020000   	FD.RAN= 000002   	F.NREC= 000030   	INBUF = ****** GX	N.STAT= 000020
DENSTY= ****** GX	FD.REC= 000001   	F.OVBS= 000030   	INCSI = ****** GX	N.UNIT= 000034
DMPCTL= ****** GX	FD.RWM= 000001   	F.RACC= 000016   	INLUN = 000003   	OFNPT = ****** GX
DMPCT2= ****** GX	FD.SDI= 000020   	F.RATT= 000001   	INSPEC= ****** GX	OUSPEC= ****** GX
ERRDEN  001326R     002	FD.SQD= 000040   	F.RCNM= 000034   	IOSTBK= ****** GX	OUTCSI= ****** GX
ER04MG= ****** GX	FD.TTY= 000004   	F.RCTL= 000017   	IO.ATT= ****** GX	OUTLUN= 000004
ER04SZ= ****** GX	FD.WBH= 000002   	F.RSIZ= 000002   	IO.STC= ****** GX	PAR$$$= 000000
ER05MG= ****** GX	FF    = 000014   	F.RTYP= 000000   	I.CRDT= 000031   	PEBIT = 000002
ER05SZ= ****** GX	FF.CHR= 000005   	F.SEQN= 000100   	I.CRTI= 000040   	RECBIT= 040000
ER06MG= ****** GX	FF.NV = 000003   	F.SPDV= 000072   	I.DASZ= 000007   	RECNUM= ****** GX
ER06SZ= ****** GX	FF.POE= 000002   	F.SPUN= 000074   	I.EXDT= 000046   	RODUMP= ****** GX
ER07MG= ****** GX	FF.RWD= 000001   	F.STBK= 000036   	I.FNAM= 000000   	RSTART= ****** GX
ER07SZ= ****** GX	FF.RWF= 000006   	F.UNIT= 000136   	I.FTYP= 000006   	R$$DPB= 000001
DMPSTP M0006.1, DMP SETUP ROUTI	MACRO M1110  22-AUG-78 02:05  PAGE 11-2
SYMBOL TABLE

R$$DYM= 000001   	SPLBIT= 000001   	S.FNB = 000036   	TAB   = 000011   	.FSRPT= ****** GX
R$$EIS= 000000   	STBLK = ****** GX	S.FNBW= 000017   	T25     000052R     002	.OPFNB= ****** G
R$$11M= 000001   	ST08  = ****** GX	S.FNTY= 000004   	UC.CON= 000200   	.PARSE= ****** GX
R.FIX = 000001   	ST16  = ****** GX	S.FTYP= 000002   	UC.DLK= 000100   	.PRSDV= ****** GX
R.SEQ = 000003   	S.APPD= 000010   	S.HDHD= 000056   	WRDBIT= 010000   	.SYNER= ****** GX
R.VAR = 000002   	S.FATT= 000016   	S.IDHD= 000056   	X     = 000002   	.XQIO = ****** GX
R50BIT= 001000   	S.FDB = 000140   	S.MPHD= 000012   	.BYTES= ****** GX	...GBL= 000000
SC.BAD= 000100   	S.FIDS= 000014   	S.NFEN= 000020   	.CSI1 = ****** G 	...TPC= 000012
SC.MDL= 000200   	S.FNAM= 000006   	S.STBK= 000014   	.EXSTS= ****** GX

. ABS.	000131	   000
      	000000	   001
PURE$I	001340	   002
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  8348 WORDS  ( 33 PAGES)
DYNAMIC MEMORY:  9108 WORDS  ( 35 PAGES)
ELAPSED TIME:  00:00:31
OBJ$:DMPSTP,LIS$:DMPSTP/-SP=SRC$:PIPMAC,DMPDEF,DMPSTP
