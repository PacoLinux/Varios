Comparing PMSRC_5X and PMSRC_51


Comparing PRINTMASTER directory:

     INSTALL_PRINTMASTER.CPL different.
     REMOVE_PRINTMASTER.CPL different.
     CONFIGURE_PRINTMASTER.CPL different.

Comparing PRINTMASTER>CMDNC0 directory:

     INIT_PRINTMASTER.CPL different.
     CDD.CPL different.
     CFD.CPL different.
     CPQ.CPL different.

Comparing COMM directory:

     COMM$XMIT.PSPL different.

Comparing CPL directory:

     LPQ.CPL different.
     RELEASE.CPL different.
     APJ.CPL different.
     DRIVER.CPL different.
     MONITOR.CPL different.
     CPJ.CPL different.
     DC.CPL different.
     DPJ.CPL different.
     EKF.CPL different.
     LPJ.CPL different.
     INIT_PRINTMASTER.CPL different.
     PROG_LIBRARY.CPL different.
     SPOOL$.CPL different.
     DRIVER_SUPPORT.CPL different.

Comparing DS directory:

     DS$OPEN_JOB.PSPL different.
     DS$MAIN.SPL different.

Comparing ENTRY directory:

     KWL$OPEN_KWL.INS.SPL different.
     KWL$BUF_TO_KWL.INS.SPL different.
     KWL$INSERT_KW.INS.SPL different.
     KWL$FLAGS_TO_STRING.INS.SPL different.
     KWL$PARSE_KW.INS.SPL different.
     PRIMOS.INS.SPL different.
     KWL$.INS.SPL different.
     HOOK$.INS.SPL different.
     DS$.INS.SPL different.
     GP$PARTIAL_INIT.INS.SPL different.
     KWL$EXPAND_FORM.INS.SPL different.
     KWL$DELETE_FORM.INS.SPL different.

Comparing EPF_COMMAND directory:

     APJ.SPL different.
     SPOOL$.SPL different.
     INIT_PRINTMASTER.SPL different.

Comparing GP directory:

     GP$GET_DTM.PSPL different.
     GP$INIT.PSPL different.
     GP$VERSION.PSPL different.
     GP$PARTIAL_INIT.PSPL different.
     GP$DYNAMIC_LINK.SPL different.

Comparing INSERT directory:

     KWL.INS.SPL different.
     L2.INS.SPL different.
     MSG$.INS.SPL different.
     L2_EXT.INS.SPL different.
     GBL.INS.SPL different.
     GBL_EXT.INS.SPL different.
     KWL_EXT.INS.SPL different.

Comparing KWL directory:

     KWL$INSERT_KW.SPL different.
     KWL$TEXT_TO_KWL.SPL different.
     KWL$FLAGS_TO_STRING.PSPL different.
     KWL$LOAD_IKWL.PSPL different.
     KWL$PARSE_KW.SPL different.
     KWL$CL_TO_KWL.SPL different.
     KWL$BUF_TO_KWL.SPL different.
     KWL$EXPAND_FORM.SPL different.
     KWL$DELETE_FORM.SPL different.

Comparing L2 directory:

     L2$MAIN.SPL different.
     L2$PRINT_BANNER.PSPL different.
     L2$IO.SPL different.

Comparing MON directory:

     MON$SCAN_JOB_LIST.SPL different.
     MON$QUEUE_JOB.SPL different.
     MON$MAIN_MONITOR.SPL different.
     MON$SEND_TO_DEVICE.SPL different.
     MON$START_DEVICE.SPL different.
     MON$CHANGE_DEVICE_STATE.SPL different.
     MON$DESTROY_DEVICE.SPL different.
     MON$INIT_DRIVERS.SPL different.
     MON$SCAN_DEVICE_LIST.SPL different.
     MON$CREATE_JOB.SPL different.
     MON$PROCESS_MESSAGE.SPL different.

End of comparison.


[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>PRINTMASTER>INSTALL_PRINTMASTER.CPL        SAT, DEC 13 1986 15:30:18

FILE A:  PMSRC_5X>PRINTMASTER>INSTALL_PRINTMASTER.CPL
FILE B:  PMSRC_51>PRINTMASTER>INSTALL_PRINTMASTER.CPL


A32       &s rev := 5.1.X
CHANGED TO
B32       &s rev := 5.0.7


A145         &do c &list INIT_PRINTMASTER CDD CFD CPQ
CHANGED TO
B145         &do c &list INIT_PRINTMASTER CDD CFD CPQ CPD


A241      &if [length %from_partition%] > 0 &then ~
A242         &if [query 'Has another system been configured (yes)' TRUE -tty] &then ~
A243            &if [query 'Copy system configuration from the other system (no)' FALSE -TTY] &then ~
A244               R %prog%>COPY_SYSTEM_CONFIGURATION  %from_partition% %partition%
CHANGED TO
B241      &if ^ [exists <%partition%>%pmsd%>PAPER_DEFAULTS.TF] &then ~
B242         &if [length %from_partition%] > 0 &then ~
B243            &if [query 'Has another system been configured (yes)' TRUE -tty] &then ~
B244               &if [query 'Copy system configuration from the other system (no)' FALSE -TTY] &then ~
B245                  R %prog%>COPY_SYSTEM_CONFIGURATION  %from_partition% %partition%


B276      &s need_to_configure := ^ [exists <%partition%>%pmsd%>PAPER_DEFAULTS.TF]
B277
INSERTED BEFORE
A275      &if [length [wild CMDNC0>APJ.@]] ^= 0 &then &do


A293         &if [null %default_partition%] &then &do
A294            type
A295            type You may want to run CONFIGURE_PRINTMASTER later to customize
A296            type PrintMaster for your site.
CHANGED TO
B296         &if %need_to_configure% &then &do
B297            type
B298            type After initialization, run CONFIGURE_PRINTMASTER from any terminal
B299            type to customize PrintMaster for your site.

COMPARISON FINISHED.
5 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>PRINTMASTER>REMOVE_PRINTMASTER.CPL        SAT, DEC 13 1986 15:30:19

FILE A:  PMSRC_5X>PRINTMASTER>REMOVE_PRINTMASTER.CPL
FILE B:  PMSRC_51>PRINTMASTER>REMOVE_PRINTMASTER.CPL


A14       &s rev := 5.1.X
CHANGED TO
B14       &s rev := 5.0.7


A117      DELETE (CMDNC0 HELP*)>(APJ DC DPJ EKF LPJ LPQ CPJ INIT_PRINTMASTER CDD CFD CPQ).@ -NQ -NVFY %rpt_sw%
CHANGED TO
B117      DELETE (CMDNC0 HELP*)>(APJ DC DPJ EKF LPJ LPQ CPJ INIT_PRINTMASTER CDD CFD CPQ CPD).@ -NQ -NVFY %rpt_sw%

COMPARISON FINISHED.
2 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>PRINTMASTER>CONFIGURE_PRINTMASTER.CPL        SAT, DEC 13 1986 15:30:20

FILE A:  PMSRC_5X>PRINTMASTER>CONFIGURE_PRINTMASTER.CPL
FILE B:  PMSRC_51>PRINTMASTER>CONFIGURE_PRINTMASTER.CPL


A9        &s rev := 5.1.X
CHANGED TO
B9        &s rev := 5.0.7


B55       &s already_configured := [exists <%partition%>%pmsd%>PAPER_DEFAULTS.TF]
B56       &if %already_configured% &then ~
B57          type 'PrintMaster has already been configured on this system.'
B58
INSERTED BEFORE
A55       &if [query 'Copy system configuration from another system (no)' FALSE -TTY] &then &do


A62       type 'Configuring PrintMaster'
A63       type
A64       r %prog%>SET_SYSTEM_DEFAULTS %partition%
A65       r %prog%>SET_DEVICE_DEFAULTS %partition%
CHANGED TO
B66       &if %already_configured% &then &do
B67          &if [query 'Change system defaults (no)' FALSE -tty] &then &do
B68             type
B69             r %prog%>SET_SYSTEM_DEFAULTS %partition%
B70             &end
B71          &if [query 'Change device defaults (no)' FALSE -tty] &then &do
B72             type
B73             r %prog%>SET_DEVICE_DEFAULTS %partition%
B74             &end
B75          &if [query 'Change paper defaults (no)' FALSE -tty] &then &do
B76             type
B77             r %prog%>SET_PAPER_DEFAULTS %partition%
B78             &end
B79          &else type
B80          &end
B81       &else &do
B82          type 'Configuring PrintMaster'
B83          type
B84          r %prog%>SET_SYSTEM_DEFAULTS %partition%
B85          r %prog%>SET_DEVICE_DEFAULTS %partition%
B86          r %prog%>SET_PAPER_DEFAULTS %partition%
B87          &end


A85       type
A86       type '* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *'
A87       type
A88       type 'PrintMaster configured.'
A89       type
CHANGED TO
B107
B108      type 'PrintMaster configured.'

COMPARISON FINISHED.
4 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>PRINTMASTER>CMDNC0>INIT_PRINTMASTER.CPL        SAT, DEC 13 1986 15:30:22

FILE A:  PMSRC_5X>PRINTMASTER>CMDNC0>INIT_PRINTMASTER.CPL
FILE B:  PMSRC_51>PRINTMASTER>CMDNC0>INIT_PRINTMASTER.CPL


A14             timelimit_sw: -timelimit tl:dec=30;   /* maximum wait time in seconds ~
CHANGED TO
B14             timelimit_sw: -timelimit, -tl tl:dec=30;   /* maximum wait time in seconds ~
B15             priority_sw: -priority, -pr monpri:dec=2 devpri:dec=1; /* mon & dev pri ~


A30       &s rev := 5.1.X
CHANGED TO
B31       &s rev := 5.0.7


B62          type '    -PRIORITY  m  d          Specifies the monitor and device priorities.'
B63          type '                             The default for M is 2, the default for D is 1.'
INSERTED BEFORE
A61          type '    -TIMELIMIT t             Specifies the maximum time to wait for a resource'


A68       /* determine if this is a rev 19.4 system or above; if so, we run REMEPF
A69       /* to un-map EPF's from console (they cause problems with subsequent
A70       /* installs).  The kludge we use is to see if the LISTF replacement
A71       /* CPL programs exist in CMDNC0, and assume 19.4 above if they do.
A72
A73       &s do_remepf := [exists CMDNC0>LISTIN.CPL] & [exists CMDNC0>LIS.CPL]
DELETED BEFORE
B71


A77        %full_sw% %pacl_sw% %other%
CHANGED TO
B74        %full_sw% %pacl_sw% -PRIORITY %monpri% %devpri% %other%


A81       &if %do_remepf% &then ~
A82          REMEPF INIT_PRINTMASTER -NQ -NVFY
CHANGED TO
B78       REMEPF INIT_PRINTMASTER -NQ -NVFY

COMPARISON FINISHED.
6 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>PRINTMASTER>CMDNC0>CDD.CPL        SAT, DEC 13 1986 15:30:24

FILE A:  PMSRC_5X>PRINTMASTER>CMDNC0>CDD.CPL
FILE B:  PMSRC_51>PRINTMASTER>CMDNC0>CDD.CPL


A14       &s rev := 5.0.4
CHANGED TO
B14       &s rev := 5.0.7


A64          &s destination_given := [query 'similiar to Prime''s -AT concept (no)' FALSE -tty]
A65          &if %destination_given% &then &do
A66             &s destination := [response 'Destination' '' -tty]
CHANGED TO
B64          &s destination_given := [query 'similiar to Prime''s -AT concept (no)' FALSE]
B65          &if %destination_given% &then &do
B66             &s destination := [response 'Destination' '']


A77          &s evfu := [query 'Does '%device%' have an EVFU (no)' FALSE -tty]
A78          &s uppercase := ^ [query 'Does it have lowercase (yes)' TRUE -tty]
A79          &s idle_mins := -1
A80          &if [query 'Should it logout when idle (yes)' TRUE -tty] &then &do
CHANGED TO
B77          &s evfu := [query 'Does '%device%' have an EVFU (no)' FALSE]
B78          &s uppercase := ^ [query 'Does it have lowercase (yes)' TRUE]
B79          &s idle_mins := -1
B80          &if [query 'Should it logout when idle (yes)' TRUE] &then &do


A85                &s idle_mins := [response %idle_prompt% 60 -tty]
CHANGED TO
B85                &s idle_mins := [response %idle_prompt% 60]


A92          &s trunc := [query 'Should it truncate lines longer than -CHARS_PER_LINE (no)' FALSE -tty]
CHANGED TO
B92          &s trunc := [query 'Should it truncate lines longer than -CHARS_PER_LINE (no)' FALSE]


A97             &s speed := [response 'Device speed (unknown)' 0 -tty]
CHANGED TO
B97             &s speed := [response 'Device speed (unknown)' 0]


A108            &s size_limit := [response 'Print file size limit (none)' NONE -tty]
CHANGED TO
B108            &s size_limit := [response 'Print file size limit (none)' NONE]


A127         &if [query 'Is this a PARALLEL device (i.e. PR0, PR1, etc.) (no)' FALSE -tty] ~
A128            &then &s generic_device_type := URC
A129         &else &if [query 'Is this an AMLC device (no)' FALSE -tty] ~
A130            &then &s generic_device_type := AMLC
A131         &else &if [query 'Is this a TERMINAL device (no)' FALSE -tty] ~
A132            &then &s generic_device_type := TERMINAL
A133         &else &if [query 'Is this a PLOT device (no)' FALSE -tty] ~
CHANGED TO
B127         &if [query 'Is this a PARALLEL device (i.e. PR0, PR1, etc.) (no)' FALSE] ~
B128            &then &s generic_device_type := URC
B129         &else &if [query 'Is this an AMLC device (no)' FALSE] ~
B130            &then &s generic_device_type := AMLC
B131         &else &if [query 'Is this a TERMINAL device (no)' FALSE] ~
B132            &then &s generic_device_type := TERMINAL
B133         &else &if [query 'Is this a PLOT device (no)' FALSE] ~


A147               &s unit := [response 'PR number of device (0, 1, 2, or 3)' x -tty]
CHANGED TO
B147               &s unit := [response 'PR number of device (0, 1, 2, or 3)' x]


A164               &s line := [response 'AMLC line number (in octal) of device' x -tty]
A165               &if [verify %line% 01234567] = 0 &then &do
A166                  &s AMLC_device_unit := [octal %line%]
A167                  &if [query 'Enable X-OFF/X-ON (no)' FALSE -tty] ~
A168                     &then &s AMLC_assign_device := AMLC TTY %line% 2/20000
A169                     &else &s AMLC_assign_device := AMLC TTY %line%
A170                  &if [query 'Should carrier be checked (no)' FALSE -tty] &then &do
A171                     &if [query '   Transmit on HIGH carrier (yes)' TRUE -tty] ~
CHANGED TO
B164               &s line := [response 'AMLC line number (in octal) of device' x]
B165               &if [verify %line% 01234567] = 0 &then &do
B166                  &s AMLC_device_unit := [octal %line%]
B167                  &if [query 'Enable X-OFF/X-ON (no)' FALSE] ~
B168                     &then &s AMLC_assign_device := AMLC TTY %line% 2/20000
B169                     &else &s AMLC_assign_device := AMLC TTY %line%
B170                  &if [query 'Should carrier be checked (no)' FALSE] &then &do
B171                     &if [query '   Transmit on HIGH carrier (yes)' TRUE] ~


A212         &if [query 'Is it a DataProducts compatible printer (no)' FALSE -tty] ~
A213            &then &s level_3_driver := L3$DP
A214         &else &if [query 'Is it a Printronix (no)' FALSE -tty] ~
A215            &then &s level_3_driver := L3$PX
A216         &else &if [query 'Is it a Xerox 2700-II (no)' FALSE -tty] ~
A217            &then &s level_3_driver := L3$X2700
A218         &else &if [query 'Is it an HP LaserJet (no)' FALSE -tty] ~
A219            &then &s level_3_driver := L3$LASERJET
A220         &else &if [query 'Is it a custom device (no)' FALSE -tty] &then &do
CHANGED TO
B212         &if [query 'Is it a DataProducts compatible printer (no)' FALSE] ~
B213            &then &s level_3_driver := L3$DP
B214         &else &if [query 'Is it a Printronix (no)' FALSE] ~
B215            &then &s level_3_driver := L3$PX
B216         &else &if [query 'Is it a Xerox 2700-II (no)' FALSE] ~
B217            &then &s level_3_driver := L3$X2700
B218         &else &if [query 'Is it an HP LaserJet (no)' FALSE] ~
B219            &then &s level_3_driver := L3$LASERJET
B220         &else &if [query 'Is it a custom device (no)' FALSE] &then &do


A325            &if [query 'Does '%device%' require any special keywords (no)' FALSE -tty] &then &do
CHANGED TO
B325            &if [query 'Does '%device%' require any special keywords (no)' FALSE] &then &do

COMPARISON FINISHED.
12 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>PRINTMASTER>CMDNC0>CFD.CPL        SAT, DEC 13 1986 15:30:26

FILE A:  PMSRC_5X>PRINTMASTER>CMDNC0>CFD.CPL
FILE B:  PMSRC_51>PRINTMASTER>CMDNC0>CFD.CPL


A14       &s rev := 5.1.X
CHANGED TO
B14       &s rev := 5.0.7


A33       &s flib := PRINTMASTER*>FORMS
CHANGED TO
B33       &s klib := PRINTMASTER*>LIBRARY
B34       &s plib := PRINTMASTER*>LIBRARY>PAPER_LIBRARY


A47       type 'Enter form description.  A form description consists of a form'
A48       type 'type, synonyms for the form, the number of print lines per page,'
A49       type 'and the number of print columns per line.  The name of the form'
CHANGED TO
B48       type 'Enter form descriptions.  A form description consists of a form'
B49       type 'type, any synonyms for the form, and a paper type.  The name of the form'


A70             type 'names for the same form.  Enter synonyms one per line'
CHANGED TO
B70             type 'names for the same form.  This is especially useful if'
B71             type 'current forms do not have valid file system names, for'
B72             type 'example ''8 x 11''.  Whenever the main form is loaded'
B73             type 'on a device, all jobs queued with the main form or any'
B74             type 'synonym will be printed.  Enter synonyms one per line'


A79          &s x := [translate [response 'Synonym (blank to stop)' '' -tty]]
CHANGED TO
B83          &s x := [translate [response 'Synonym (blank to stop)' '']]


A83             &s x := [translate [response 'Synonym (blank to stop)' '' -tty]]
CHANGED TO
B87             &s x := [translate [response 'Synonym (blank to stop)' '']]


A87          &do &until %x% > 0
A88             &do &until [verify %x% 0123456789] = 0  &  [length %x%] > 0
A89                &s x := [response 'How many lines per page are there (66)' 66 -tty]
A90                &end
A91             &end
A92          &s lines_per_page := %x%
A93
A94          &do &until %x% > 0
A95             &do &until [verify %x% 0123456789] = 0  &  [length %x%] > 0
A96                &s x := [response 'How many characters per line are there (132)' 132 -tty]
A97                &end
A98             &end
A99          &s chars_per_line := %x%
A100
A101         COMO <%partition%>%flib%>%form_type%.TF -NTTY
CHANGED TO
B91          type 'Enter the name of the paper used with this form.  This must'
B92          type 'be a valid filename and less than 30 characters.  The paper'
B93          type 'and form names can be the same.'
B94          type
B95          &s valid_paper_type_given := FALSE
B96          &do &until %valid_paper_type_given%
B97
B98             &s paper := [R %prog%>GET_FILENAME -DEFAULT %form_type% ~
B99                                                -PROMPT [quote What is the name of the paper type for form %form_type% (%form_type%)] ~
B100                                               -MAX %maxlen%]
B101            &if [index %paper% .KF] = 0 &then ~
B102               &s paper_s := %paper%.KF           /* Append suffix.
B103            &else &if [index %paper% .KF] ^= [calc [length %paper%] - 2] &then ~
B104               &s paper_s := %paper%.KF           /* Append suffix (.KF is in middle)
B105            &else &s paper_s := %paper%           /* Suffix already present
B106
B107            &if ^ [exists <%partition%>%plib%>%paper_s%] &then &do
B108               &if [query [quote Paper description %paper% not found.  Would you like to create it (yes)] TRUE] &then &do
B109                  type
B110                  CPD %partition% -PAPER %paper%
B111                  &if %severity$% ^= 0 &then ~
B112                     &return %severity$% &message Form description %form_type% not created.
B113                  &s valid_paper_type_given := TRUE
B114                  &end
B115               &end
B116            &else &s valid_paper_type_given := TRUE
B117            &end
B118         type
B119
B120         COMO <%partition%>%klib%>%form_type%.TF -NTTY
B121         type [quote -USING %plib%>%paper%]


A106         type [quote -LINES_PER_PAGE %lines_per_page%]
A107         type [quote -CHARS_PER_LINE %chars_per_line%]
A108
A109         COMO -END -TTY
A110
A111         &if [exists <%partition%>%flib%>%form_type%.KF] &then ~
A112            DELETE <%partition%>%flib%>%form_type%.KF -NQ -NVFY
A113
A114         EKF <%partition%>%flib%>%form_type% -CREATE <%partition%>%flib%>%form_type%.TF
A115         &s sev := %severity$%
A116
A117         &if %sev% = 0 &then ~
A118             &if [query 'Do you want to add any other keywords to this form (no) ' ~
A119                        FALSE] &then &do
A120                 EKF <%partition%>%flib%>%form_type% -EDIT
A121                 &s sev := %severity$%
A122                 &end
A123
A124         &if %sev% ^= 0 &then &do
A125            &if [exists <%partition%>%flib%>%form_type%.KF] &then ~
A126               DELETE <%partition%>%flib%>%form_type%.KF -NQ -NVFY
A127            type Form description %form_type% not created.
A128            &end
A129          &else type Form description %form_type% created.
A130
A131         DELETE <%partition%>%flib%>%form_type%.TF -nq -nvfy
CHANGED TO
B126         COMO -END -TTY
B127
B128         &if [exists <%partition%>%klib%>%form_type%.KF] &then ~
B129            DELETE <%partition%>%klib%>%form_type%.KF -NQ -NVFY
B130
B131         EKF <%partition%>%klib%>%form_type% -CREATE <%partition%>%klib%>%form_type%.TF
B132         &s sev := %severity$%
B133
B134         &if %sev% ^= 0 &then &do
B135            &if [exists <%partition%>%klib%>%form_type%.KF] &then ~
B136               DELETE <%partition%>%klib%>%form_type%.KF -NQ -NVFY
B137            type Form description %form_type% not created.
B138            &end
B139         &else type Form description %form_type% created.
B140
B141         DELETE <%partition%>%klib%>%form_type%.TF -nq -nvfy

COMPARISON FINISHED.
8 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>PRINTMASTER>CMDNC0>CPQ.CPL        SAT, DEC 13 1986 15:30:28

FILE A:  PMSRC_5X>PRINTMASTER>CMDNC0>CPQ.CPL
FILE B:  PMSRC_51>PRINTMASTER>CMDNC0>CPQ.CPL


A13       &s rev := 5.1.X
CHANGED TO
B13       &s rev := 5.0.7


A48             &if [query 'Print queue already exists, delete it (no)' FALSE -tty] &then &do
CHANGED TO
B48             &if [query 'Print queue already exists, delete it (no)' FALSE] &then &do


A84          SAC @@ $REST:DRW
CHANGED TO
B84          &severity &error &ignore
B85          SAC @@ $REST:DRW
B86          &severity

COMPARISON FINISHED.
3 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>COMM>COMM$XMIT.PSPL        SAT, DEC 13 1986 15:30:40

FILE A:  PMSRC_5X>COMM>COMM$XMIT.PSPL
FILE B:  PMSRC_51>COMM>COMM$XMIT.PSPL


B51       /*
B52             else
B53                call err$ (err$log_event_et, 'Target is zero in COMM$XMIT.', 0, 0, 0);
B54       */
INSERTED BEFORE
A51             end;  /* I am device or user */

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>CPL>LPQ.CPL        SAT, DEC 13 1986 15:30:57

FILE A:  PMSRC_5X>CPL>LPQ.CPL
FILE B:  PMSRC_51>CPL>LPQ.CPL


A15       &if ^ [null %debug_sw%] &then &do
A16           LOAD *>%bin%>GP$MESSAGE
A17           LOAD *>%bin%>ERR$
A18           LOAD *>%bin%>ERR$ABORT_PROGRAM
A19           LOAD *>%bin%>ERR$DISPLAY_ERROR
A20           LOAD *>%bin%>ERR$PRIMOS_ERROR_TEXT
A21           LOAD *>%bin%>ERR$PRINT_ERROR_MESSAGE
A22           LOAD *>%bin%>GP$ANY
A23           LOAD *>%bin%>GP$CLOSE
A24           LOAD *>%bin%>GP$INIT
A25           LOAD *>%bin%>GP$VERSION
A26           LOAD *>%bin%>KWL$INIT
A27           LOAD *>%bin%>COMM$INIT
A28           LOAD *>%bin%>COMM$FLUSH_IPC_MESSAGES
A29           LOAD *>%bin%>COMM$DEQUEUE_MESSAGE
A30           LOAD *>%bin%>GP$LOCK_SHARED_AREA
A31           LOAD *>%bin%>GP$UNLOCK_SHARED_AREA
A32           LOAD *>%bin%>GP$UID
A33           LOAD *>%bin%>ERR$INIT
A34           LOAD *>%bin%>GP$MAKE_DYNT
A35           LOAD *>%bin%>GP$SSWITCH
A36           LOAD *>%bin%>GP$OPEN_FILE
A37           LOAD *>%bin%>GP$OPEN_PDE
A38           LOAD *>%bin%>GP$PARTITION_NAME
A39           LOAD *>%bin%>GP$SYSTEM_NAME
A40           LOAD *>%bin%>GP$TERMINATE
A41           LOAD *>%bin%>COMM$TERMINATE
A42           LOAD *>%bin%>KWL$CL_TO_KWL
A43           LOAD *>%bin%>GP$UNQUOTE
A44           LOAD *>%bin%>KWL$EXPAND_ABBREV
A45           LOAD *>%bin%>KWL$LOAD_IKWL
A46           LOAD *>%bin%>KWL$LOAD_MKWL
A47           LOAD *>%bin%>KWL$MATCH_KWL
A48           LOAD *>%bin%>KWL$PARSE_KW
A49           LOAD *>%bin%>KWL$STRING_TO_FLAGS
A50           LOAD *>%bin%>KWL$FIND_KW
A51           LOAD *>%bin%>KWL$FIND_KWV
A52           LOAD *>%bin%>KWL$GET_NTH_VALUE
A53           LOAD *>%bin%>SPL$LJ
A54           LOAD *>%bin%>KWL$DESTROY_KWL
A55           LOAD *>%bin%>KWL$ADD_VALUE
A56           LOAD *>%bin%>KWL$BUF_TO_KWL
A57           LOAD *>%bin%>KWL$EXPAND_VALUE
A58           LOAD *>%bin%>KWL$FREE_BUFFER
A59           LOAD *>%bin%>KWL$OPEN_KWL
A60           LOAD *>%bin%>GP$OPEN_PATH
A61           LOAD *>%bin%>GP$SPLIT_PATHNAME
A62           LOAD *>%bin%>KWL$READ_DISK_BUFFER
A63           LOAD *>%bin%>KWL$FORMAT_KW
A64           LOAD *>%bin%>KWL$INSERT_KW
A65           LOAD *>%bin%>KWL$DELETE_KW
A66           LOAD *>%bin%>SQ$OPEN_ENTRY
A67           LOAD *>%bin%>SQ$POSITION
A68           LOAD *>%bin%>GP$TICKS
A69           LI *>UTIL>FSULIB
A70           LI VAPPLB
A71           LI *>UTIL>VNETLB
A72           LI
A73           &end
A74       &else &do
A75
A76           /* dynamic common owned by the library */
A77
A78           DYNT GBL$STATIC_EXTERNAL
A79           DYNT ERR$STATIC_EXTERNAL
A80
A81           LI *>UTIL>FSULIB
A82           LI VAPPLB
A83           LI *>UTIL>VNETLB
A84           LI
A85           &end
CHANGED TO
B15
B16       /* dynamic common owned by the library */
B17
B18       DYNT GBL$STATIC_EXTERNAL
B19       DYNT ERR$STATIC_EXTERNAL
B20
B21       LI *>UTIL>FSULIB
B22       LI VAPPLB
B23       LI *>UTIL>VNETLB
B24       LI

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>CPL>RELEASE.CPL        SAT, DEC 13 1986 15:31:03

FILE A:  PMSRC_5X>CPL>RELEASE.CPL
FILE B:  PMSRC_51>CPL>RELEASE.CPL


A62       spl *>(l2>l2$main,l2>l2$print_banner,gp>gp$version,ds>ds$process_request).@ -b *>bin.nodebug>=.bin -quick -no_copy -opt
CHANGED TO
B62       spl *>epf_command>init_printmaster.@spl -b *>bin.nodebug>=.bin -quick -no_copy -opt
B63       spl *>l2>l2$main.@spl -b *>bin.nodebug>=.bin -quick -no_copy -opt
B64       spl *>l2>l2$print_banner.@spl -b *>bin.nodebug>=.bin -quick -no_copy -opt
B65       spl *>gp>gp$init.@spl -b *>bin.nodebug>=.bin -quick -no_copy -opt
B66       spl *>gp>gp$version.@spl -b *>bin.nodebug>=.bin -quick -no_copy -opt
B67       spl *>ds>ds$process_request.@spl -b *>bin.nodebug>=.bin -quick -no_copy -opt

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>CPL>APJ.CPL        SAT, DEC 13 1986 15:31:06

FILE A:  PMSRC_5X>CPL>APJ.CPL
FILE B:  PMSRC_51>CPL>APJ.CPL


A14
A15       &data BIND
A16       LOAD *>%bin%>APJ
A17       &if ^ [null %debug_sw%] &then &do
A18           LOAD *>%bin%>ERR$
A19           LOAD *>%bin%>ERR$ABORT_PROGRAM
A20           LOAD *>%bin%>ERR$DISPLAY_ERROR
A21           LOAD *>%bin%>ERR$PRIMOS_ERROR_TEXT
A22           LOAD *>%bin%>ERR$PRINT_ERROR_MESSAGE
A23           LOAD *>%bin%>GP$ANY
A24           LOAD *>%bin%>GP$MESSAGE
A25           LOAD *>%bin%>GP$INIT
A26           LOAD *>%bin%>GP$QUOTE
A27           LOAD *>%bin%>GP$UNQUOTE
A28           LOAD *>%bin%>GP$VERSION
A29           LOAD *>%bin%>KWL$INIT
A30           LOAD *>%bin%>KWL$DESTROY_KWL
A31           LOAD *>%bin%>COMM$INIT
A32           LOAD *>%bin%>COMM$FLUSH_IPC_MESSAGES
A33           LOAD *>%bin%>COMM$DEQUEUE_MESSAGE
A34           LOAD *>%bin%>GP$LOCK_SHARED_AREA
A35           LOAD *>%bin%>GP$UNLOCK_SHARED_AREA
A36           LOAD *>%bin%>GP$UID
A37           LOAD *>%bin%>ERR$INIT
A38           LOAD *>%bin%>GP$MAKE_DYNT
A39           LOAD *>%bin%>GP$SSWITCH
A40           LOAD *>%bin%>GP$TERMINATE
A41           LOAD *>%bin%>GP$CHECK_PACL
A42           LOAD *>%bin%>COMM$TERMINATE
A43           LOAD *>%bin%>SPL$AJ
A44           LOAD *>%bin%>SQ$PART_2
A45           LOAD *>%bin%>COMM$SEND
A46           LOAD *>%bin%>COMM$CREATE_MSG
A47           LOAD *>%bin%>GP$COPY
A48           LOAD *>%bin%>COMM$DESTROY_MSG
A49           LOAD *>%bin%>COMM$XMIT
A50           LOAD *>%bin%>COMM$QUEUE_IPC_MESSAGE
A51           LOAD *>%bin%>COMM$MSG_LENGTH
A52           LOAD *>%bin%>COMM$QUEUE_MESSAGE
A53           LOAD *>%bin%>GP$CLOSE
A54           LOAD *>%bin%>GP$GET_DTM
A55           LOAD *>%bin%>GP$OPEN_CURDIR
A56           LOAD *>%bin%>GP$OPEN_PDE
A57           LOAD *>%bin%>GP$OPEN_FILE
A58           LOAD *>%bin%>GP$SPLIT_PATHNAME
A59           LOAD *>%bin%>GP$OPEN_PATH
A60           LOAD *>%bin%>GP$SYSTEM_NAME
A61           LOAD *>%bin%>KWL$ADD_VALUE
A62           LOAD *>%bin%>KWL$EDIT_CERTAIN_KWS
A63           LOAD *>%bin%>HOOK$EDIT_JOB_BEFORE_QUEUED
A64           LOAD *>%bin%>KWL$FIND_KW
A65           LOAD *>%bin%>KWL$FIND_KWV
A66           LOAD *>%bin%>KWL$FREE_BUFFER
A67           LOAD *>%bin%>KWL$GET_NTH_VALUE
A68           LOAD *>%bin%>KWL$FORMAT_KW
A69           LOAD *>%bin%>KWL$INSERT_KW
A70           LOAD *>%bin%>KWL$DELETE_KW
A71           LOAD *>%bin%>KWL$KWL_TO_BUF
A72           LOAD *>%bin%>KWL$WRITE_DISK_BUFFER
A73           LOAD *>%bin%>SQ$DELETE_ENTRY
A74           LOAD *>%bin%>SQ$WRITE_JOB_KWL
A75           LOAD *>%bin%>SQ$GRAB_A_NEW_JOB
A76           LOAD *>%bin%>GP$PARTITION_NAME
A77           LOAD *>%bin%>SQ$OPEN_ENTRY
A78           LOAD *>%bin%>SQ$POSITION
A79           LOAD *>%bin%>SQ$SET_UP_KWL
A80           LOAD *>%bin%>KWL$CL_TO_KWL
A81           LOAD *>%bin%>KWL$EXPAND_ABBREV
A82           LOAD *>%bin%>KWL$EXPAND_VALUE
A83           LOAD *>%bin%>KWL$BUF_TO_KWL
A84           LOAD *>%bin%>KWL$OPEN_KWL
A85           LOAD *>%bin%>KWL$READ_DISK_BUFFER
A86           LOAD *>%bin%>KWL$PARSE_KW
A87           LOAD *>%bin%>KWL$STRING_TO_FLAGS
A88           LOAD *>%bin%>KWL$GET_DEFAULT_KWL
A89           LOAD *>%bin%>KWL$LOAD_IKWL
A90           LOAD *>%bin%>KWL$LOAD_MKWL
A91           LOAD *>%bin%>SQ$SET_UP_PC
A92           LOAD *>%bin%>SPL$OJ
A93           LOAD *>%bin%>GP$TICKS
A94           LI *>UTIL>FSULIB
A95           LI VAPPLB
A96           LI *>UTIL>VNETLB
A97           LI
A98           &end
A99       &else &do
A100
A101          /* dynamic common owned by the library */
A102
A103          DYNT ERR$STATIC_EXTERNAL
A104          DYNT GBL$STATIC_EXTERNAL
A105
A106          LI *>UTIL>FSULIB
A107          LI VAPPLB
A108          LI *>UTIL>VNETLB
A109          LI
A110          &end
CHANGED TO
B14       &data BIND
B15       LOAD *>%bin%>APJ
B16
B17       /* dynamic common owned by the library */
B18
B19       DYNT ERR$STATIC_EXTERNAL
B20       DYNT GBL$STATIC_EXTERNAL
B21
B22       LI *>UTIL>FSULIB
B23       LI VAPPLB
B24       LI *>UTIL>VNETLB
B25       LI

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>CPL>DRIVER.CPL        SAT, DEC 13 1986 15:31:08

FILE A:  PMSRC_5X>CPL>DRIVER.CPL
FILE B:  PMSRC_51>CPL>DRIVER.CPL


A15       &if ^ [null %debug_sw%] &then &do
A16           LOAD *>%bin%>DS$DYNAMIC_LINK
A17           LOAD *>%bin%>GP$MESSAGE
A18           LOAD *>%bin%>L3$DP
A19           LOAD *>%bin%>L3$TTY
A20           LOAD *>%bin%>L3$PX
A21           LOAD *>%bin%>L3$X2700
A22           LOAD *>%bin%>L3$LASERJET
A23           LOAD *>%bin%>L3$STANDARD
A24           LOAD *>%bin%>L2$SCAN_PRINT_LINE
A25           LOAD *>%bin%>GP$SET_TRANSLATION
A26           LOAD *>%bin%>GP$TRANSLATE
A27           LOAD *>%bin%>ERR$
A28           LOAD *>%bin%>ERR$ABORT_PROGRAM
A29           LOAD *>%bin%>ERR$DISPLAY_ERROR
A30           LOAD *>%bin%>ERR$PRIMOS_ERROR_TEXT
A31           LOAD *>%bin%>ERR$PRINT_ERROR_MESSAGE
A32           LOAD *>%bin%>KWL$FIND_KW
A33           LOAD *>%bin%>KWL$FIND_KWV
A34           LOAD *>%bin%>KWL$LOAD_IKWL
A35           LOAD *>%bin%>KWL$LOAD_MKWL
A36           LOAD *>%bin%>KWL$GET_NTH_VALUE
A37           LOAD *>%bin%>KWL$COPY_KWL
A38           LOAD *>%bin%>KWL$MERGE_KWL
A39           LOAD *>%bin%>KWL$SORT_KWL
A40           LOAD *>%bin%>DS$PROCESS_REQUEST
A41           LOAD *>%bin%>BIO$GET_POSITION
A42           LOAD *>%bin%>COMM$DESTROY_MSG
A43           LOAD *>%bin%>COMM$FETCH_MSG
A44           LOAD *>%bin%>COMM$DEQUEUE_MESSAGE
A45           LOAD *>%bin%>COMM$SERVICE_IPC
A46           LOAD *>%bin%>COMM$DEQUEUE_IPC_MESSAGE
A47           LOAD *>%bin%>GP$LOCK_SHARED_AREA
A48           LOAD *>%bin%>COMM$MSG_LENGTH
A49           LOAD *>%bin%>GP$UNLOCK_SHARED_AREA
A50           LOAD *>%bin%>GP$COPY
A51           LOAD *>%bin%>COMM$QUEUE_MESSAGE
A52           LOAD *>%bin%>COMM$XMIT
A53           LOAD *>%bin%>COMM$QUEUE_IPC_MESSAGE
A54           LOAD *>%bin%>COMM$REPLY
A55           LOAD *>%bin%>COMM$CREATE_MSG
A56           LOAD *>%bin%>DS$CHANGE_STATE
A57           LOAD *>%bin%>COMM$SEND
A58           LOAD *>%bin%>DS$OPEN_JOB
A59           LOAD *>%bin%>DS$RESET_STATISTICS
A60           LOAD *>%bin%>GP$GET_DTM
A61           LOAD *>%bin%>GP$OPEN_CURDIR
A62           LOAD *>%bin%>DS$SEND_KWL
A63           LOAD *>%bin%>KWL$FREE_BUFFER
A64           LOAD *>%bin%>KWL$KWL_TO_BUF
A65           LOAD *>%bin%>GP$CLOSE
A66           LOAD *>%bin%>GP$OPEN_FILE
A67           LOAD *>%bin%>GP$OPEN_PDE
A68           LOAD *>%bin%>GP$OPEN_PATH
A69           LOAD *>%bin%>GP$DELETE_FILE
A70           LOAD *>%bin%>GP$FILE_EXISTS
A71           LOAD *>%bin%>GP$PARTITION_NAME
A72           LOAD *>%bin%>GP$SPLIT_PATHNAME
A73           LOAD *>%bin%>KWL$BUF_TO_KWL
A74           LOAD *>%bin%>KWL$ADD_VALUE
A75           LOAD *>%bin%>KWL$EXPAND_VALUE
A76           LOAD *>%bin%>KWL$OPEN_KWL
A77           LOAD *>%bin%>KWL$READ_DISK_BUFFER
A78           LOAD *>%bin%>KWL$FORMAT_KW
A79           LOAD *>%bin%>KWL$INSERT_KW
A80           LOAD *>%bin%>KWL$DELETE_KW
A81           LOAD *>%bin%>KWL$DESTROY_KWL
A82           LOAD *>%bin%>KWL$MATCH_KWL
A83           LOAD *>%bin%>SQ$OPEN_ENTRY
A84           LOAD *>%bin%>DS$WRITE_DEVICE_KWL
A85           LOAD *>%bin%>KWL$WRITE_DISK_BUFFER
A86           LOAD *>%bin%>SPL$DJ
A87           LOAD *>%bin%>GP$ANY
A88           LOAD *>%bin%>GP$INIT
A89           LOAD *>%bin%>GP$VERSION
A90           LOAD *>%bin%>KWL$INIT
A91           LOAD *>%bin%>COMM$INIT
A92           LOAD *>%bin%>COMM$FLUSH_IPC_MESSAGES
A93           LOAD *>%bin%>GP$UID
A94           LOAD *>%bin%>ERR$INIT
A95           LOAD *>%bin%>GP$MAKE_DYNT
A96           LOAD *>%bin%>GP$SSWITCH
A97           LOAD *>%bin%>GP$SYSTEM_NAME
A98           LOAD *>%bin%>GP$TERMINATE
A99           LOAD *>%bin%>COMM$TERMINATE
A100          LOAD *>%bin%>SQ$DELETE_ENTRY
A101          LOAD *>%bin%>SQ$DELETE_JOB
A102          LOAD *>%bin%>SQ$POSITION
A103          LOAD *>%bin%>DS$CHANGE_COPY_STATUS
A104          LOAD *>%bin%>DS$FIND_KW
A105          LOAD *>%bin%>KWL$CL_TO_KWL
A106          LOAD *>%bin%>GP$UNQUOTE
A107          LOAD *>%bin%>KWL$EXPAND_ABBREV
A108          LOAD *>%bin%>KWL$PARSE_KW
A109          LOAD *>%bin%>KWL$STRING_TO_FLAGS
A110          LOAD *>%bin%>L2$MAIN
A111          LOAD *>%bin%>L2$IO
A112          LOAD *>%bin%>L2$ACCOUNTING
A113          LOAD *>%bin%>L2$PRINT_BANNER
A114          LOAD *>%bin%>GP$WRITE_LINE
A115          LOAD *>%bin%>DS$READ_PC
A116          LOAD *>%bin%>DS$RESET_PC
A117          LOAD *>%bin%>DS$WRITE_PC
A118          LOAD *>%bin%>L2$EXPAND_STRING
A119          LOAD *>%bin%>L2$LOAD_BIG_LETTERS
A120          LOAD *>%bin%>BIO$INIT_FILE
A121          LOAD *>%bin%>BIO$READ_LINE
A122          LOAD *>%bin%>BIO$READ_BLOCK
A123          LOAD *>%bin%>BIO$SET_POSITION
A124          LOAD *>%bin%>BIO$CLOSE_FILE
A125          LOAD *>%bin%>GP$TICKS
A126          LI *>UTIL>FSULIB
A127          LI VAPPLB
A128          LI *>UTIL>VNETLB
A129          LI
A130          &end
A131      &else &do
A132
A133          /* dynamic common owned by the library */
A134
A135          DYNT ERR$STATIC_EXTERNAL
A136          DYNT GBL$STATIC_EXTERNAL
A137
A138          LI *>UTIL>FSULIB
A139          LI VAPPLB
A140          LI *>UTIL>VNETLB
A141          LI
A142          &end
CHANGED TO
B15
B16       /* dynamic common owned by the library */
B17
B18       DYNT ERR$STATIC_EXTERNAL
B19       DYNT GBL$STATIC_EXTERNAL
B20
B21       LI *>UTIL>FSULIB
B22       LI VAPPLB
B23       LI *>UTIL>VNETLB
B24       LI

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>CPL>MONITOR.CPL        SAT, DEC 13 1986 15:31:09

FILE A:  PMSRC_5X>CPL>MONITOR.CPL
FILE B:  PMSRC_51>CPL>MONITOR.CPL


A15       &if ^ [null %debug_sw%] &then &do
A16           LOAD *>%bin%>ERR$
A17           LOAD *>%bin%>ERR$ABORT_PROGRAM
A18           LOAD *>%bin%>ERR$DISPLAY_ERROR
A19           LOAD *>%bin%>ERR$NET_ERROR_TEXT
A20           LOAD *>%bin%>ERR$PRIMOS_ERROR_TEXT
A21           LOAD *>%bin%>ERR$PRINT_ERROR_MESSAGE
A22           LOAD *>%bin%>ERR$MAP_CLEARING_CODES
A23           LOAD *>%bin%>MON$MAIN_MONITOR
A24           LOAD *>%bin%>MON$SCAN_DEVICE_LIST
A25           LOAD *>%bin%>COMM$CONNECTED
A26           LOAD *>%bin%>COMM$FIND_CB
A27           LOAD *>%bin%>COMM$DESTROY_MSG
A28           LOAD *>%bin%>COMM$FETCH_MSG
A29           LOAD *>%bin%>COMM$DEQUEUE_MESSAGE
A30           LOAD *>%bin%>COMM$SERVICE_IPC
A31           LOAD *>%bin%>COMM$DEQUEUE_IPC_MESSAGE
A32           LOAD *>%bin%>GP$LOCK_SHARED_AREA
A33           LOAD *>%bin%>COMM$MSG_LENGTH
A34           LOAD *>%bin%>GP$UNLOCK_SHARED_AREA
A35           LOAD *>%bin%>GP$COPY
A36           LOAD *>%bin%>COMM$QUEUE_MESSAGE
A37           LOAD *>%bin%>COMM$XMIT
A38           LOAD *>%bin%>COMM$CONNECT
A39           LOAD *>%bin%>COMM$CREATE_CB
A40           LOAD *>%bin%>COMM$SERVICE
A41           LOAD *>%bin%>COMM$MY_SYSTEM_ID
A42           LOAD *>%bin%>COMM$FREE_IO_BUFFERS
A43           LOAD *>%bin%>COMM$GET_RECEIVE_BUFFER
A44           LOAD *>%bin%>COMM$QUEUE_IPC_MESSAGE
A45           LOAD *>%bin%>MON$SEND_TO_DEVICE
A46           LOAD *>%bin%>COMM$REPLY
A47           LOAD *>%bin%>COMM$CREATE_MSG
A48           LOAD *>%bin%>MON$CHANGE_DEVICE_STATE
A49           LOAD *>%bin%>MON$DESTROY_DEVICE
A50           LOAD *>%bin%>MON$SCHEDULE
A51           LOAD *>%bin%>COMM$SEND
A52           LOAD *>%bin%>KWL$MATCH_KWL
A53           LOAD *>%bin%>MON$DESTROY_JOB
A54           LOAD *>%bin%>KWL$DESTROY_KWL
A55           LOAD *>%bin%>MON$PARTITION_VISIBLE
A56           LOAD *>%bin%>MON$FIND_MONITOR
A57           LOAD *>%bin%>MON$SEND_TO_MASTER
A58           LOAD *>%bin%>MON$CHANGE_TO_MASTER
A59           LOAD *>%bin%>MON$INIT_DISK_LIST
A60           LOAD *>%bin%>MON$INIT_DRIVERS
A61           LOAD *>%bin%>MON$UPDATE_DISK_LIST
A62           LOAD *>%bin%>MON$SEND_DISK_LIST
A63           LOAD *>%bin%>MON$SHUTDOWN_QUEUE
A64           LOAD *>%bin%>MON$STARTUP_QUEUE
A65           LOAD *>%bin%>MON$UNATTACH
A66           LOAD *>%bin%>GP$CHECK_PACL
A67           LOAD *>%bin%>SPL$LJ
A68           LOAD *>%bin%>GP$SYSTEM_NAME
A69           LOAD *>%bin%>GP$PARTITION_NAME
A70           LOAD *>%bin%>GP$CLOSE
A71           LOAD *>%bin%>GP$OPEN_FILE
A72           LOAD *>%bin%>GP$OPEN_PDE
A73           LOAD *>%bin%>KWL$ADD_VALUE
A74           LOAD *>%bin%>KWL$FORMAT_KW
A75           LOAD *>%bin%>KWL$INSERT_KW
A76           LOAD *>%bin%>KWL$DELETE_KW
A77           LOAD *>%bin%>KWL$FIND_KW
A78           LOAD *>%bin%>KWL$FIND_KWV
A79           LOAD *>%bin%>KWL$BUF_TO_KWL
A80           LOAD *>%bin%>KWL$EXPAND_VALUE
A81           LOAD *>%bin%>KWL$FREE_BUFFER
A82           LOAD *>%bin%>KWL$OPEN_KWL
A83           LOAD *>%bin%>GP$OPEN_PATH
A84           LOAD *>%bin%>GP$SPLIT_PATHNAME
A85           LOAD *>%bin%>KWL$READ_DISK_BUFFER
A86           LOAD *>%bin%>SQ$OPEN_ENTRY
A87           LOAD *>%bin%>KWL$GET_NTH_VALUE
A88           LOAD *>%bin%>SQ$DELETE_ENTRY
A89           LOAD *>%bin%>MON$CREATE_JOB
A90           LOAD *>%bin%>MON$QUEUE_JOB
A91           LOAD *>%bin%>SQ$POSITION
A92           LOAD *>%bin%>MON$CREATE_DEVICE
A93           LOAD *>%bin%>MON$FIND_DEVICE
A94           LOAD *>%bin%>MON$START_DEVICE
A95           LOAD *>%bin%>GP$ATTACH_SYSTEM_DIR
A96           LOAD *>%bin%>GP$FILE_EXISTS
A97           LOAD *>%bin%>GP$ANY
A98           LOAD *>%bin%>GP$DELETE_FILE
A99           LOAD *>%bin%>GP$INIT
A100          LOAD *>%bin%>GP$VERSION
A101          LOAD *>%bin%>KWL$INIT
A102          LOAD *>%bin%>COMM$INIT
A103          LOAD *>%bin%>COMM$FLUSH_IPC_MESSAGES
A104          LOAD *>%bin%>GP$UID
A105          LOAD *>%bin%>ERR$INIT
A106          LOAD *>%bin%>GP$MAKE_DYNT
A107          LOAD *>%bin%>GP$SSWITCH
A108          LOAD *>%bin%>GP$OPEN_CURDIR
A109          LOAD *>%bin%>GP$TERMINATE
A110          LOAD *>%bin%>COMM$TERMINATE
A111          LOAD *>%bin%>MON$MASTER_CHECK
A112          LOAD *>%bin%>MON$PROCESS_MESSAGE
A113          LOAD *>%bin%>COMM$DISCONNECT
A114          LOAD *>%bin%>MON$CHANGE_DEVICE_KWL
A115          LOAD *>%bin%>MON$SEND_DEVICE_KWL
A116          LOAD *>%bin%>KWL$KWL_TO_BUF
A117          LOAD *>%bin%>MON$NEW_MON_DISK_LIST
A118          LOAD *>%bin%>MON$RESEND_JOB
A119          LOAD *>%bin%>MON$SCAN_JOB_LIST
A120          LOAD *>%bin%>MON$SYS_LIST_MISMATCH
A121          LOAD *>%bin%>GP$WRITE_LINE
A122          LOAD *>%bin%>MON$READ_SYSTEM_LIST
A123          LOAD *>%bin%>GP$READ_LINE
A124          LOAD *>%bin%>GP$TICKS
A125          LI *>UTIL>FSULIB
A126          LI VAPPLB
A127          LI *>UTIL>VNETLB
A128          LI
A129          &end
A130      &else &do
A131
A132          LOAD *>%bin%>MON$MAIN_MONITOR
A133          LOAD *>%bin%>MON$SCAN_DEVICE_LIST
A134          LOAD *>%bin%>MON$SCHEDULE
A135          LOAD *>%bin%>MON$UPDATE_DISK_LIST
A136          LOAD *>%bin%>MON$UNATTACH
A137          LOAD *>%bin%>MON$SCAN_JOB_LIST
A138
A139          /* not used when monitor idle (no jobs in queue)
A140
A141          LOAD *>%bin%>MON$PARTITION_VISIBLE
A142          LOAD *>%bin%>MON$SEND_DISK_LIST
A143          LOAD *>%bin%>MON$SEND_TO_MASTER
A144          LOAD *>%bin%>MON$PROCESS_MESSAGE
A145          LOAD *>%bin%>MON$CREATE_JOB
A146          LOAD *>%bin%>MON$QUEUE_JOB
A147          LOAD *>%bin%>MON$DESTROY_JOB
A148          LOAD *>%bin%>MON$FIND_DEVICE
A149          LOAD *>%bin%>MON$SEND_TO_DEVICE
A150          LOAD *>%bin%>MON$CHANGE_DEVICE_STATE
A151
A152          /* not used in normal loop
A153
A154          LOAD *>%bin%>MON$DESTROY_DEVICE
A155          LOAD *>%bin%>MON$INIT_DISK_LIST
A156          LOAD *>%bin%>MON$INIT_DRIVERS
A157          LOAD *>%bin%>MON$SHUTDOWN_QUEUE
A158          LOAD *>%bin%>MON$STARTUP_QUEUE
A159          LOAD *>%bin%>MON$CREATE_DEVICE
A160          LOAD *>%bin%>MON$START_DEVICE
A161          LOAD *>%bin%>MON$CHANGE_DEVICE_KWL
A162          LOAD *>%bin%>MON$SEND_DEVICE_KWL
A163          LOAD *>%bin%>MON$RESEND_JOB
A164
A165          /*  Network only procedures
A166
A167          LOAD *>%bin%>MON$FIND_MONITOR
A168          LOAD *>%bin%>MON$MASTER_CHECK
A169          LOAD *>%bin%>MON$CHANGE_TO_MASTER
A170          LOAD *>%bin%>MON$NEW_MON_DISK_LIST
A171          LOAD *>%bin%>MON$SYS_LIST_MISMATCH
A172          LOAD *>%bin%>MON$READ_SYSTEM_LIST
A173
A174          /* dynamic common owned by the library */
A175
A176          DYNT ERR$STATIC_EXTERNAL
A177          DYNT GBL$STATIC_EXTERNAL
A178          DYNT KWL$STATIC_EXTERNAL
A179
A180          LI *>UTIL>FSULIB
A181          LI VAPPLB
A182          LI *>UTIL>VNETLB
A183          LI
A184          &end
CHANGED TO
B15
B16       LOAD *>%bin%>MON$MAIN_MONITOR
B17       LOAD *>%bin%>MON$SCAN_DEVICE_LIST
B18       LOAD *>%bin%>MON$SCHEDULE
B19       LOAD *>%bin%>MON$UPDATE_DISK_LIST
B20       LOAD *>%bin%>MON$UNATTACH
B21       LOAD *>%bin%>MON$SCAN_JOB_LIST
B22
B23       /* not used when monitor idle (no jobs in queue)
B24
B25       LOAD *>%bin%>MON$PARTITION_VISIBLE
B26       LOAD *>%bin%>MON$SEND_DISK_LIST
B27       LOAD *>%bin%>MON$SEND_TO_MASTER
B28       LOAD *>%bin%>MON$PROCESS_MESSAGE
B29       LOAD *>%bin%>MON$CREATE_JOB
B30       LOAD *>%bin%>MON$QUEUE_JOB
B31       LOAD *>%bin%>MON$DESTROY_JOB
B32       LOAD *>%bin%>MON$FIND_DEVICE
B33       LOAD *>%bin%>MON$SEND_TO_DEVICE
B34       LOAD *>%bin%>MON$CHANGE_DEVICE_STATE
B35
B36       /* not used in normal loop
B37
B38       LOAD *>%bin%>MON$DESTROY_DEVICE
B39       LOAD *>%bin%>MON$INIT_DISK_LIST
B40       LOAD *>%bin%>MON$INIT_DRIVERS
B41       LOAD *>%bin%>MON$SHUTDOWN_QUEUE
B42       LOAD *>%bin%>MON$STARTUP_QUEUE
B43       LOAD *>%bin%>MON$CREATE_DEVICE
B44       LOAD *>%bin%>MON$START_DEVICE
B45       LOAD *>%bin%>MON$CHANGE_DEVICE_KWL
B46       LOAD *>%bin%>MON$SEND_DEVICE_KWL
B47       LOAD *>%bin%>MON$RESEND_JOB
B48
B49       /*  Network only procedures
B50
B51       LOAD *>%bin%>MON$FIND_MONITOR
B52       LOAD *>%bin%>MON$MASTER_CHECK
B53       LOAD *>%bin%>MON$CHANGE_TO_MASTER
B54       LOAD *>%bin%>MON$NEW_MON_DISK_LIST
B55       LOAD *>%bin%>MON$SYS_LIST_MISMATCH
B56       LOAD *>%bin%>MON$READ_SYSTEM_LIST
B57
B58       /* dynamic common owned by the library */
B59
B60       DYNT ERR$STATIC_EXTERNAL
B61       DYNT GBL$STATIC_EXTERNAL
B62       DYNT KWL$STATIC_EXTERNAL
B63
B64       LI *>UTIL>FSULIB
B65       LI VAPPLB
B66       LI *>UTIL>VNETLB
B67       LI

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>CPL>CPJ.CPL        SAT, DEC 13 1986 15:31:12

FILE A:  PMSRC_5X>CPL>CPJ.CPL
FILE B:  PMSRC_51>CPL>CPJ.CPL


A15       &if ^ [null %debug_sw%] &then &do
A16           LOAD *>%bin%>ERR$
A17           LOAD *>%bin%>ERR$ABORT_PROGRAM
A18           LOAD *>%bin%>ERR$DISPLAY_ERROR
A19           LOAD *>%bin%>ERR$PRIMOS_ERROR_TEXT
A20           LOAD *>%bin%>ERR$PRINT_ERROR_MESSAGE
A21           LOAD *>%bin%>GP$ANY
A22           LOAD *>%bin%>GP$ATTACH_SYSTEM_DIR
A23           LOAD *>%bin%>GP$CLOSE
A24           LOAD *>%bin%>GP$INIT
A25           LOAD *>%bin%>GP$VERSION
A26           LOAD *>%bin%>KWL$INIT
A27           LOAD *>%bin%>COMM$INIT
A28           LOAD *>%bin%>COMM$FLUSH_IPC_MESSAGES
A29           LOAD *>%bin%>COMM$DEQUEUE_MESSAGE
A30           LOAD *>%bin%>GP$LOCK_SHARED_AREA
A31           LOAD *>%bin%>GP$UNLOCK_SHARED_AREA
A32           LOAD *>%bin%>COMM$SEND
A33           LOAD *>%bin%>COMM$CREATE_MSG
A34           LOAD *>%bin%>GP$COPY
A35           LOAD *>%bin%>COMM$DESTROY_MSG
A36           LOAD *>%bin%>COMM$XMIT
A37           LOAD *>%bin%>COMM$QUEUE_IPC_MESSAGE
A38           LOAD *>%bin%>COMM$MSG_LENGTH
A39           LOAD *>%bin%>COMM$QUEUE_MESSAGE
A40           LOAD *>%bin%>GP$UID
A41           LOAD *>%bin%>ERR$INIT
A42           LOAD *>%bin%>GP$MAKE_DYNT
A43           LOAD *>%bin%>GP$PARTITION_NAME
A44           LOAD *>%bin%>GP$SSWITCH
A45           LOAD *>%bin%>GP$OPEN_FILE
A46           LOAD *>%bin%>GP$OPEN_PDE
A47           LOAD *>%bin%>GP$TERMINATE
A48           LOAD *>%bin%>COMM$TERMINATE
A49           LOAD *>%bin%>GP$OPEN_PATH
A50           LOAD *>%bin%>GP$SPLIT_PATHNAME
A51           LOAD *>%bin%>GP$WRITE_LINE
A52           LOAD *>%bin%>GP$SYSTEM_NAME
A53           LOAD *>%bin%>KWL$PARSE_KW
A54           LOAD *>%bin%>KWL$FLAGS_TO_STRING
A55           LOAD *>%bin%>KWL$STRING_TO_FLAGS
A56           LOAD *>%bin%>KWL$CL_TO_KWL
A57           LOAD *>%bin%>GP$UNQUOTE
A58           LOAD *>%bin%>KWL$EXPAND_ABBREV
A59           LOAD *>%bin%>KWL$GET_NTH_VALUE
A60           LOAD *>%bin%>KWL$KWL_TO_BUF
A61           LOAD *>%bin%>KWL$LOAD_IKWL
A62           LOAD *>%bin%>KWL$LOAD_MKWL
A63           LOAD *>%bin%>KWL$WRITE_DISK_BUFFER
A64           LOAD *>%bin%>SQ$PART_2
A65           LOAD *>%bin%>SQ$WRITE_JOB_KWL
A66           LOAD *>%bin%>SPL$CJ
A67           LOAD *>%bin%>KWL$ADD_VALUE
A68           LOAD *>%bin%>KWL$BUF_TO_KWL
A69           LOAD *>%bin%>KWL$EDIT_CERTAIN_KWS
A70           LOAD *>%bin%>HOOK$EDIT_JOB_BEFORE_QUEUED
A71           LOAD *>%bin%>KWL$EXPAND_VALUE
A72           LOAD *>%bin%>KWL$FREE_BUFFER
A73           LOAD *>%bin%>KWL$DESTROY_KWL
A74           LOAD *>%bin%>KWL$OPEN_KWL
A75           LOAD *>%bin%>KWL$READ_DISK_BUFFER
A76           LOAD *>%bin%>KWL$FORMAT_KW
A77           LOAD *>%bin%>KWL$INSERT_KW
A78           LOAD *>%bin%>KWL$DELETE_KW
A79           LOAD *>%bin%>KWL$FIND_KW
A80           LOAD *>%bin%>KWL$FIND_KWV
A81           LOAD *>%bin%>SQ$OPEN_ENTRY
A82           LOAD *>%bin%>SQ$POSITION
A83           LOAD *>%bin%>GP$TICKS
A84           LI *>UTIL>FSULIB
A85           LI VAPPLB
A86           LI *>UTIL>VNETLB
A87           LI
A88           &end
A89       &else &do
A90
A91           /* dynamic common owned by the library */
A92
A93           DYNT ERR$STATIC_EXTERNAL
A94           DYNT GBL$STATIC_EXTERNAL
A95
A96           LI *>UTIL>FSULIB
A97           LI VAPPLB
A98           LI *>UTIL>VNETLB
A99           LI
A100          &end
CHANGED TO
B15
B16       /* dynamic common owned by the library */
B17
B18       DYNT ERR$STATIC_EXTERNAL
B19       DYNT GBL$STATIC_EXTERNAL
B20
B21       LI *>UTIL>FSULIB
B22       LI VAPPLB
B23       LI *>UTIL>VNETLB
B24       LI

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>CPL>DC.CPL        SAT, DEC 13 1986 15:31:13

FILE A:  PMSRC_5X>CPL>DC.CPL
FILE B:  PMSRC_51>CPL>DC.CPL


A15       &if ^ [null %debug_sw%] &then &do
A16           LOAD *>%bin%>COMM$FETCH_MSG
A17           LOAD *>%bin%>COMM$DEQUEUE_MESSAGE
A18           LOAD *>%bin%>COMM$SERVICE_IPC
A19           LOAD *>%bin%>COMM$DEQUEUE_IPC_MESSAGE
A20           LOAD *>%bin%>GP$LOCK_SHARED_AREA
A21           LOAD *>%bin%>ERR$
A22           LOAD *>%bin%>ERR$NET_ERROR_TEXT
A23           LOAD *>%bin%>ERR$ABORT_PROGRAM
A24           LOAD *>%bin%>ERR$DISPLAY_ERROR
A25           LOAD *>%bin%>ERR$PRIMOS_ERROR_TEXT
A26           LOAD *>%bin%>ERR$PRINT_ERROR_MESSAGE
A27           LOAD *>%bin%>COMM$MSG_LENGTH
A28           LOAD *>%bin%>GP$UNLOCK_SHARED_AREA
A29           LOAD *>%bin%>GP$COPY
A30           LOAD *>%bin%>COMM$DESTROY_MSG
A31           LOAD *>%bin%>COMM$QUEUE_MESSAGE
A32           LOAD *>%bin%>COMM$XMIT
A33           LOAD *>%bin%>COMM$QUEUE_IPC_MESSAGE
A34           LOAD *>%bin%>COMM$SEND
A35           LOAD *>%bin%>COMM$CREATE_MSG
A36           LOAD *>%bin%>GP$ANY
A37           LOAD *>%bin%>GP$INIT
A38           LOAD *>%bin%>GP$VERSION
A39           LOAD *>%bin%>KWL$INIT
A40           LOAD *>%bin%>COMM$INIT
A41           LOAD *>%bin%>COMM$FLUSH_IPC_MESSAGES
A42           LOAD *>%bin%>GP$UID
A43           LOAD *>%bin%>ERR$INIT
A44           LOAD *>%bin%>GP$MAKE_DYNT
A45           LOAD *>%bin%>GP$SSWITCH
A46           LOAD *>%bin%>GP$TERMINATE
A47           LOAD *>%bin%>COMM$TERMINATE
A48           LOAD *>%bin%>KWL$CL_TO_KWL
A49           LOAD *>%bin%>GP$UNQUOTE
A50           LOAD *>%bin%>KWL$EXPAND_ABBREV
A51           LOAD *>%bin%>KWL$GET_NTH_VALUE
A52           LOAD *>%bin%>KWL$ADD_VALUE
A53           LOAD *>%bin%>KWL$DELETE_KW
A54           LOAD *>%bin%>KWL$EXPAND_VALUE
A55           LOAD *>%bin%>GP$CLOSE
A56           LOAD *>%bin%>KWL$BUF_TO_KWL
A57           LOAD *>%bin%>KWL$FORMAT_KW
A58           LOAD *>%bin%>KWL$INSERT_KW
A59           LOAD *>%bin%>KWL$FIND_KW
A60           LOAD *>%bin%>KWL$FIND_KWV
A61           LOAD *>%bin%>KWL$FREE_BUFFER
A62           LOAD *>%bin%>KWL$KWL_TO_TEXT
A63           LOAD *>%bin%>KWL$SORT_KWL
A64           LOAD *>%bin%>KWL$FLAGS_TO_STRING
A65           LOAD *>%bin%>GP$WRITE_LINE
A66           LOAD *>%bin%>KWL$OPEN_KWL
A67           LOAD *>%bin%>GP$OPEN_FILE
A68           LOAD *>%bin%>GP$OPEN_PDE
A69           LOAD *>%bin%>GP$OPEN_PATH
A70           LOAD *>%bin%>GP$SPLIT_PATHNAME
A71           LOAD *>%bin%>KWL$READ_DISK_BUFFER
A72           LOAD *>%bin%>KWL$PARSE_KW
A73           LOAD *>%bin%>KWL$STRING_TO_FLAGS
A74           LOAD *>%bin%>KWL$DESTROY_KWL
A75           LOAD *>%bin%>KWL$KWL_TO_BUF
A76           LOAD *>%bin%>GP$TICKS
A77           LI *>UTIL>FSULIB
A78           LI VAPPLB
A79           LI *>UTIL>VNETLB
A80           LI
A81           &end
A82       &else &do
A83
A84           /* dynamic common owned by the library */
A85
A86           DYNT GBL$STATIC_EXTERNAL
A87
A88           LI *>UTIL>FSULIB
A89           LI VAPPLB
A90           LI *>UTIL>VNETLB
A91           LI
A92           &end
CHANGED TO
B15
B16       /* dynamic common owned by the library */
B17
B18       DYNT GBL$STATIC_EXTERNAL
B19
B20       LI *>UTIL>FSULIB
B21       LI VAPPLB
B22       LI *>UTIL>VNETLB
B23       LI

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>CPL>DPJ.CPL        SAT, DEC 13 1986 15:31:14

FILE A:  PMSRC_5X>CPL>DPJ.CPL
FILE B:  PMSRC_51>CPL>DPJ.CPL


A15       &if ^ [null %debug_sw%] &then &do
A16           LOAD *>%bin%>ERR$
A17           LOAD *>%bin%>ERR$ABORT_PROGRAM
A18           LOAD *>%bin%>ERR$DISPLAY_ERROR
A19           LOAD *>%bin%>ERR$PRIMOS_ERROR_TEXT
A20           LOAD *>%bin%>ERR$PRINT_ERROR_MESSAGE
A21           LOAD *>%bin%>GP$ANY
A22           LOAD *>%bin%>GP$INIT
A23           LOAD *>%bin%>GP$VERSION
A24           LOAD *>%bin%>KWL$INIT
A25           LOAD *>%bin%>KWL$DESTROY_KWL
A26           LOAD *>%bin%>COMM$INIT
A27           LOAD *>%bin%>COMM$FLUSH_IPC_MESSAGES
A28           LOAD *>%bin%>COMM$DEQUEUE_MESSAGE
A29           LOAD *>%bin%>GP$LOCK_SHARED_AREA
A30           LOAD *>%bin%>GP$UNLOCK_SHARED_AREA
A31           LOAD *>%bin%>GP$UID
A32           LOAD *>%bin%>ERR$INIT
A33           LOAD *>%bin%>GP$MAKE_DYNT
A34           LOAD *>%bin%>GP$SSWITCH
A35           LOAD *>%bin%>GP$TERMINATE
A36           LOAD *>%bin%>COMM$TERMINATE
A37           LOAD *>%bin%>SPL$DJ
A38           LOAD *>%bin%>COMM$SEND
A39           LOAD *>%bin%>COMM$CREATE_MSG
A40           LOAD *>%bin%>GP$COPY
A41           LOAD *>%bin%>COMM$DESTROY_MSG
A42           LOAD *>%bin%>COMM$XMIT
A43           LOAD *>%bin%>COMM$QUEUE_IPC_MESSAGE
A44           LOAD *>%bin%>COMM$MSG_LENGTH
A45           LOAD *>%bin%>COMM$QUEUE_MESSAGE
A46           LOAD *>%bin%>GP$CLOSE
A47           LOAD *>%bin%>GP$OPEN_FILE
A48           LOAD *>%bin%>GP$OPEN_PDE
A49           LOAD *>%bin%>GP$PARTITION_NAME
A50           LOAD *>%bin%>GP$SYSTEM_NAME
A51           LOAD *>%bin%>KWL$BUF_TO_KWL
A52           LOAD *>%bin%>KWL$ADD_VALUE
A53           LOAD *>%bin%>KWL$EXPAND_VALUE
A54           LOAD *>%bin%>KWL$FREE_BUFFER
A55           LOAD *>%bin%>KWL$OPEN_KWL
A56           LOAD *>%bin%>GP$OPEN_PATH
A57           LOAD *>%bin%>GP$SPLIT_PATHNAME
A58           LOAD *>%bin%>KWL$READ_DISK_BUFFER
A59           LOAD *>%bin%>KWL$FORMAT_KW
A60           LOAD *>%bin%>KWL$INSERT_KW
A61           LOAD *>%bin%>KWL$DELETE_KW
A62           LOAD *>%bin%>KWL$FIND_KW
A63           LOAD *>%bin%>KWL$FIND_KWV
A64           LOAD *>%bin%>KWL$GET_NTH_VALUE
A65           LOAD *>%bin%>SQ$DELETE_ENTRY
A66           LOAD *>%bin%>SQ$DELETE_JOB
A67           LOAD *>%bin%>SQ$OPEN_ENTRY
A68           LOAD *>%bin%>SQ$POSITION
A69           LOAD *>%bin%>GP$TICKS
A70           LI *>UTIL>FSULIB
A71           LI VAPPLB
A72           LI *>UTIL>VNETLB
A73           LI
A74           &end
A75       &else &do
A76
A77           /* dynamic common owned by the library */
A78
A79           DYNT ERR$STATIC_EXTERNAL
A80           DYNT GBL$STATIC_EXTERNAL
A81
A82           LI *>UTIL>FSULIB
A83           LI VAPPLB
A84           LI *>UTIL>VNETLB
A85           LI
A86           &end
CHANGED TO
B15
B16       /* dynamic common owned by the library */
B17
B18       DYNT ERR$STATIC_EXTERNAL
B19       DYNT GBL$STATIC_EXTERNAL
B20
B21       LI *>UTIL>FSULIB
B22       LI VAPPLB
B23       LI *>UTIL>VNETLB
B24       LI

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>CPL>EKF.CPL        SAT, DEC 13 1986 15:31:16

FILE A:  PMSRC_5X>CPL>EKF.CPL
FILE B:  PMSRC_51>CPL>EKF.CPL


A15       &if ^ [null %debug_sw%] &then &do
A16           LOAD *>%bin%>ERR$
A17           LOAD *>%bin%>ERR$ABORT_PROGRAM
A18           LOAD *>%bin%>ERR$DISPLAY_ERROR
A19           LOAD *>%bin%>ERR$PRIMOS_ERROR_TEXT
A20           LOAD *>%bin%>ERR$PRINT_ERROR_MESSAGE
A21           LOAD *>%bin%>GP$ANY
A22           LOAD *>%bin%>GP$ATTACH_SYSTEM_DIR
A23           LOAD *>%bin%>GP$CLOSE
A24           LOAD *>%bin%>GP$INIT
A25           LOAD *>%bin%>GP$VERSION
A26           LOAD *>%bin%>KWL$INIT
A27           LOAD *>%bin%>KWL$DESTROY_KWL
A28           LOAD *>%bin%>COMM$INIT
A29           LOAD *>%bin%>COMM$FLUSH_IPC_MESSAGES
A30           LOAD *>%bin%>COMM$DEQUEUE_MESSAGE
A31           LOAD *>%bin%>GP$LOCK_SHARED_AREA
A32           LOAD *>%bin%>GP$UNLOCK_SHARED_AREA
A33           LOAD *>%bin%>GP$UID
A34           LOAD *>%bin%>ERR$INIT
A35           LOAD *>%bin%>GP$MAKE_DYNT
A36           LOAD *>%bin%>GP$SSWITCH
A37           LOAD *>%bin%>GP$TERMINATE
A38           LOAD *>%bin%>COMM$TERMINATE
A39           LOAD *>%bin%>KWL$BUF_TO_KWL
A40           LOAD *>%bin%>KWL$ADD_VALUE
A41           LOAD *>%bin%>KWL$EXPAND_VALUE
A42           LOAD *>%bin%>KWL$FREE_BUFFER
A43           LOAD *>%bin%>KWL$OPEN_KWL
A44           LOAD *>%bin%>GP$OPEN_FILE
A45           LOAD *>%bin%>GP$QUOTE
A46           LOAD *>%bin%>GP$UNQUOTE
A47           LOAD *>%bin%>GP$OPEN_PDE
A48           LOAD *>%bin%>GP$OPEN_PATH
A49           LOAD *>%bin%>GP$SPLIT_PATHNAME
A50           LOAD *>%bin%>KWL$READ_DISK_BUFFER
A51           LOAD *>%bin%>KWL$FORMAT_KW
A52           LOAD *>%bin%>KWL$INSERT_KW
A53           LOAD *>%bin%>KWL$DELETE_KW
A54           LOAD *>%bin%>KWL$FIND_KW
A55           LOAD *>%bin%>KWL$FIND_KWV
A56           LOAD *>%bin%>KWL$CL_TO_KWL
A57           LOAD *>%bin%>KWL$GET_NTH_VALUE
A58           LOAD *>%bin%>KWL$EXPAND_ABBREV
A59           LOAD *>%bin%>KWL$PARSE_KW
A60           LOAD *>%bin%>KWL$STRING_TO_FLAGS
A61           LOAD *>%bin%>KWL$KWL_TO_BUF
A62           LOAD *>%bin%>KWL$KWL_TO_TEXT
A63           LOAD *>%bin%>KWL$SORT_KWL
A64           LOAD *>%bin%>GP$WRITE_LINE
A65           LOAD *>%bin%>KWL$FLAGS_TO_STRING
A66           LOAD *>%bin%>KWL$LOAD_IKWL
A67           LOAD *>%bin%>KWL$LOAD_MKWL
A68           LOAD *>%bin%>KWL$TEXT_TO_KWL
A69           LOAD *>%bin%>KWL$WRITE_DISK_BUFFER
A70           LOAD *>%bin%>GP$TICKS
A71           LI *>UTIL>FSULIB
A72           LI VAPPLB
A73           LI *>UTIL>VNETLB
A74           LI
A75           &end
A76       &else &do
A77           LOAD *>%bin%>KWL$LOAD_MKWL
A78           LOAD *>%bin%>KWL$TEXT_TO_KWL
A79
A80           /* dynamic common owned by the library */
A81
A82           DYNT ERR$STATIC_EXTERNAL
A83           DYNT GBL$STATIC_EXTERNAL
A84           DYNT KWL$STATIC_EXTERNAL
A85
A86           LI *>UTIL>FSULIB
A87           LI VAPPLB
A88           LI *>UTIL>VNETLB
A89           LI
A90           &end
CHANGED TO
B15       LOAD *>%bin%>KWL$LOAD_MKWL
B16       LOAD *>%bin%>KWL$TEXT_TO_KWL
B17
B18       /* dynamic common owned by the library */
B19
B20       DYNT ERR$STATIC_EXTERNAL
B21       DYNT GBL$STATIC_EXTERNAL
B22       DYNT KWL$STATIC_EXTERNAL
B23
B24       LI *>UTIL>FSULIB
B25       LI VAPPLB
B26       LI *>UTIL>VNETLB
B27       LI

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>CPL>LPJ.CPL        SAT, DEC 13 1986 15:31:17

FILE A:  PMSRC_5X>CPL>LPJ.CPL
FILE B:  PMSRC_51>CPL>LPJ.CPL


A15       &if ^ [null %debug_sw%] &then &do
A16           LOAD *>%bin%>ERR$
A17           LOAD *>%bin%>ERR$ABORT_PROGRAM
A18           LOAD *>%bin%>ERR$DISPLAY_ERROR
A19           LOAD *>%bin%>ERR$PRIMOS_ERROR_TEXT
A20           LOAD *>%bin%>ERR$PRINT_ERROR_MESSAGE
A21           LOAD *>%bin%>GP$ANY
A22           LOAD *>%bin%>GP$CLOSE
A23           LOAD *>%bin%>GP$INIT
A24           LOAD *>%bin%>GP$VERSION
A25           LOAD *>%bin%>KWL$INIT
A26           LOAD *>%bin%>COMM$INIT
A27           LOAD *>%bin%>COMM$FLUSH_IPC_MESSAGES
A28           LOAD *>%bin%>COMM$DEQUEUE_MESSAGE
A29           LOAD *>%bin%>GP$LOCK_SHARED_AREA
A30           LOAD *>%bin%>GP$UNLOCK_SHARED_AREA
A31           LOAD *>%bin%>GP$UID
A32           LOAD *>%bin%>ERR$INIT
A33           LOAD *>%bin%>GP$MAKE_DYNT
A34           LOAD *>%bin%>GP$SSWITCH
A35           LOAD *>%bin%>GP$SYSTEM_NAME
A36           LOAD *>%bin%>GP$PARTITION_NAME
A37           LOAD *>%bin%>GP$OPEN_FILE
A38           LOAD *>%bin%>GP$OPEN_PDE
A39           LOAD *>%bin%>GP$TERMINATE
A40           LOAD *>%bin%>COMM$TERMINATE
A41           LOAD *>%bin%>KWL$KWL_TO_TEXT
A42           LOAD *>%bin%>KWL$SORT_KWL
A43           LOAD *>%bin%>GP$OPEN_PATH
A44           LOAD *>%bin%>GP$OPEN_PATH
A45           LOAD *>%bin%>GP$SPLIT_PATHNAME
A46           LOAD *>%bin%>GP$WRITE_LINE
A47           LOAD *>%bin%>KWL$FLAGS_TO_STRING
A48           LOAD *>%bin%>SPL$LJ
A49           LOAD *>%bin%>KWL$ADD_VALUE
A50           LOAD *>%bin%>KWL$BUF_TO_KWL
A51           LOAD *>%bin%>KWL$EXPAND_VALUE
A52           LOAD *>%bin%>KWL$FREE_BUFFER
A53           LOAD *>%bin%>KWL$DESTROY_KWL
A54           LOAD *>%bin%>KWL$OPEN_KWL
A55           LOAD *>%bin%>KWL$READ_DISK_BUFFER
A56           LOAD *>%bin%>KWL$GET_NTH_VALUE
A57           LOAD *>%bin%>KWL$FORMAT_KW
A58           LOAD *>%bin%>KWL$INSERT_KW
A59           LOAD *>%bin%>KWL$DELETE_KW
A60           LOAD *>%bin%>KWL$FIND_KW
A61           LOAD *>%bin%>KWL$FIND_KWV
A62           LOAD *>%bin%>SQ$OPEN_ENTRY
A63           LOAD *>%bin%>SQ$POSITION
A64           LOAD *>%bin%>GP$TICKS
A65           LI *>UTIL>FSULIB
A66           LI VAPPLB
A67           LI *>UTIL>VNETLB
A68           LI
A69           &end
A70       &else &do
A71
A72           /* dynamic common owned by the library */
A73
A74           DYNT GBL$STATIC_EXTERNAL
A75
A76           LI *>UTIL>FSULIB
A77           LI VAPPLB
A78           LI *>UTIL>VNETLB
A79           LI
A80           &end
CHANGED TO
B15
B16       /* dynamic common owned by the library */
B17
B18       DYNT GBL$STATIC_EXTERNAL
B19
B20       LI *>UTIL>FSULIB
B21       LI VAPPLB
B22       LI *>UTIL>VNETLB
B23       LI

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>CPL>INIT_PRINTMASTER.CPL        SAT, DEC 13 1986 15:31:19

FILE A:  PMSRC_5X>CPL>INIT_PRINTMASTER.CPL
FILE B:  PMSRC_51>CPL>INIT_PRINTMASTER.CPL


A15       &if ^ [null %debug_sw%] &then &do
A16           LOAD *>%bin%>GP$INIT
A17           LOAD *>%bin%>ERR$INIT
A18           LOAD *>%bin%>KWL$INIT
A19           LOAD *>%bin%>COMM$INIT
A20           LOAD *>%bin%>GP$ANY
A21           LOAD *>%bin%>GP$MAKE_DYNT
A22           LOAD *>%bin%>GP$SSWITCH
A23           LOAD *>%bin%>GP$TERMINATE
A24           LOAD *>%bin%>COMM$FLUSH_IPC_MESSAGES
A25           LOAD *>%bin%>COMM$TERMINATE
A26           LOAD *>%bin%>GP$UID
A27           LOAD *>%bin%>COMM$DEQUEUE_MESSAGE
A28           LOAD *>%bin%>ERR$
A29           LOAD *>%bin%>ERR$ABORT_PROGRAM
A30           LOAD *>%bin%>ERR$DISPLAY_ERROR
A31           LOAD *>%bin%>ERR$PRIMOS_ERROR_TEXT
A32           LOAD *>%bin%>ERR$PRINT_ERROR_MESSAGE
A33           LOAD *>%bin%>GP$VERSION
A34           LOAD *>%bin%>GP$CLOSE
A35           LOAD *>%bin%>GP$COMO_STATE
A36           LOAD *>%bin%>GP$OPEN_CURDIR
A37           LOAD *>%bin%>GP$PARTITION_NAME
A38           LOAD *>%bin%>GP$SYSTEM_NAME
A39           LOAD *>%bin%>COMM$MY_SYSTEM_ID
A40           LOAD *>%bin%>GP$CHECK_PACL
A41           LOAD *>%bin%>GP$FILE_EXISTS
A42           LOAD *>%bin%>KWL$LOAD_IKWL
A43           LOAD *>%bin%>KWL$LOAD_MKWL
A44           LOAD *>%bin%>KWL$ADD_VALUE
A45           LOAD *>%bin%>KWL$FORMAT_KW
A46           LOAD *>%bin%>KWL$INSERT_KW
A47           LOAD *>%bin%>KWL$DELETE_KW
A48           LOAD *>%bin%>KWL$FIND_KW
A49           LOAD *>%bin%>KWL$FIND_KWV
A50           LOAD *>%bin%>KWL$BUF_TO_KWL
A51           LOAD *>%bin%>KWL$EXPAND_VALUE
A52           LOAD *>%bin%>KWL$FREE_BUFFER
A53           LOAD *>%bin%>KWL$OPEN_KWL
A54           LOAD *>%bin%>KWL$DESTROY_KWL
A55           LOAD *>%bin%>GP$OPEN_FILE
A56           LOAD *>%bin%>GP$OPEN_PDE
A57           LOAD *>%bin%>GP$OPEN_PATH
A58           LOAD *>%bin%>GP$SPLIT_PATHNAME
A59           LOAD *>%bin%>KWL$READ_DISK_BUFFER
A60           LOAD *>%bin%>GP$LOCK_SHARED_AREA
A61           LOAD *>%bin%>GP$UNLOCK_SHARED_AREA
A62           LOAD *>%bin%>GP$TICKS
A63           LI *>UTIL>FSULIB
A64           LI VAPPLB
A65           LI *>UTIL>VNETLB
A66           LI
A67           &end
A68       &else &do
A69           LOAD *>%bin%>KWL$LOAD_IKWL
A70           LOAD *>%bin%>KWL$LOAD_MKWL
A71
A72           /* dynamic common owned by the library */
A73
A74           DYNT GBL$STATIC_EXTERNAL
A75           DYNT KWL$STATIC_EXTERNAL
A76
A77           LI *>UTIL>FSULIB
A78           LI VAPPLB
A79           LI *>UTIL>VNETLB
A80           LI
A81           &end
CHANGED TO
B15       LOAD *>%bin%>KWL$LOAD_IKWL
B16       LOAD *>%bin%>KWL$LOAD_MKWL
B17
B18       /* dynamic common owned by the library */
B19
B20       DYNT GBL$STATIC_EXTERNAL
B21       DYNT KWL$STATIC_EXTERNAL
B22
B23       LI *>UTIL>FSULIB
B24       LI VAPPLB
B25       LI *>UTIL>VNETLB
B26       LI

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>CPL>PROG_LIBRARY.CPL        SAT, DEC 13 1986 15:31:25

FILE A:  PMSRC_5X>CPL>PROG_LIBRARY.CPL
FILE B:  PMSRC_51>CPL>PROG_LIBRARY.CPL


A6        &args bin:entry=BIN.NODEBUG
A7
A8        COMO *>COMO>PROG_LIBRARY.COMO
CHANGED TO
B6        &args bin:entry=BIN;~
B7              debug_sw:-debug, -d
B8
B9        COMO *>COMO>PROG_LIBRARY.COMO
B10
B11       &if [null %debug_sw%] & [exists BIN.NODEBUG] &then ~
B12           &s bin := BIN.NODEBUG
B13


A68       LOAD *>%bin%>KWL$DELETE_FORM
A69       LOAD *>%bin%>KWL$EXPAND_FORM
DELETED BEFORE
B73       LOAD *>%bin%>KWL$CL_TO_KWL


B92       LOAD *>%bin%>KWL$STRING_TO_FLAGS
INSERTED BEFORE
A89       LOAD *>%bin%>KWL$WRITE_DISK_BUFFER

COMPARISON FINISHED.
3 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>CPL>SPOOL$.CPL        SAT, DEC 13 1986 15:31:26

FILE A:  PMSRC_5X>CPL>SPOOL$.CPL
FILE B:  PMSRC_51>CPL>SPOOL$.CPL


A14
DELETED BEFORE
B14       &data BIND

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>CPL>DRIVER_SUPPORT.CPL        SAT, DEC 13 1986 15:31:28

FILE A:  PMSRC_5X>CPL>DRIVER_SUPPORT.CPL
FILE B:  PMSRC_51>CPL>DRIVER_SUPPORT.CPL


A17       &if ^ [null %debug_sw%] &then &do
A18           LOAD *>%bin%>DS$DYNAMIC_LINK
A19           LOAD *>%bin%>GP$MESSAGE
A20           LOAD *>%bin%>L3$DP
A21           LOAD *>%bin%>L3$TTY
A22           LOAD *>%bin%>L3$PX
A23           LOAD *>%bin%>L3$X2700
A24           LOAD *>%bin%>L3$LASERJET
A25           LOAD *>%bin%>L3$STANDARD
A26           LOAD *>%bin%>L2$SCAN_PRINT_LINE
A27           LOAD *>%bin%>GP$SET_TRANSLATION
A28           LOAD *>%bin%>GP$TRANSLATE
A29           LOAD *>%bin%>ERR$
A30           LOAD *>%bin%>ERR$ABORT_PROGRAM
A31           LOAD *>%bin%>ERR$DISPLAY_ERROR
A32           LOAD *>%bin%>ERR$PRIMOS_ERROR_TEXT
A33           LOAD *>%bin%>ERR$PRINT_ERROR_MESSAGE
A34           LOAD *>%bin%>KWL$FIND_KW
A35           LOAD *>%bin%>KWL$FIND_KWV
A36           LOAD *>%bin%>KWL$LOAD_IKWL
A37           LOAD *>%bin%>KWL$LOAD_MKWL
A38           LOAD *>%bin%>KWL$GET_NTH_VALUE
A39           LOAD *>%bin%>KWL$COPY_KWL
A40           LOAD *>%bin%>KWL$MERGE_KWL
A41           LOAD *>%bin%>KWL$SORT_KWL
A42           LOAD *>%bin%>DS$PROCESS_REQUEST
A43           LOAD *>%bin%>BIO$GET_POSITION
A44           LOAD *>%bin%>COMM$DESTROY_MSG
A45           LOAD *>%bin%>COMM$FETCH_MSG
A46           LOAD *>%bin%>COMM$DEQUEUE_MESSAGE
A47           LOAD *>%bin%>COMM$SERVICE_IPC
A48           LOAD *>%bin%>COMM$DEQUEUE_IPC_MESSAGE
A49           LOAD *>%bin%>GP$LOCK_SHARED_AREA
A50           LOAD *>%bin%>COMM$MSG_LENGTH
A51           LOAD *>%bin%>GP$UNLOCK_SHARED_AREA
A52           LOAD *>%bin%>GP$COPY
A53           LOAD *>%bin%>COMM$QUEUE_MESSAGE
A54           LOAD *>%bin%>COMM$XMIT
A55           LOAD *>%bin%>COMM$QUEUE_IPC_MESSAGE
A56           LOAD *>%bin%>COMM$REPLY
A57           LOAD *>%bin%>COMM$CREATE_MSG
A58           LOAD *>%bin%>DS$CHANGE_STATE
A59           LOAD *>%bin%>COMM$SEND
A60           LOAD *>%bin%>DS$OPEN_JOB
A61           LOAD *>%bin%>DS$RESET_STATISTICS
A62           LOAD *>%bin%>GP$GET_DTM
A63           LOAD *>%bin%>GP$OPEN_CURDIR
A64           LOAD *>%bin%>DS$SEND_KWL
A65           LOAD *>%bin%>KWL$FREE_BUFFER
A66           LOAD *>%bin%>KWL$KWL_TO_BUF
A67           LOAD *>%bin%>GP$CLOSE
A68           LOAD *>%bin%>GP$OPEN_FILE
A69           LOAD *>%bin%>GP$OPEN_PDE
A70           LOAD *>%bin%>GP$OPEN_PATH
A71           LOAD *>%bin%>GP$DELETE_FILE
A72           LOAD *>%bin%>GP$FILE_EXISTS
A73           LOAD *>%bin%>GP$PARTITION_NAME
A74           LOAD *>%bin%>GP$SPLIT_PATHNAME
A75           LOAD *>%bin%>KWL$BUF_TO_KWL
A76           LOAD *>%bin%>KWL$ADD_VALUE
A77           LOAD *>%bin%>KWL$EXPAND_VALUE
A78           LOAD *>%bin%>KWL$OPEN_KWL
A79           LOAD *>%bin%>KWL$READ_DISK_BUFFER
A80           LOAD *>%bin%>KWL$FORMAT_KW
A81           LOAD *>%bin%>KWL$INSERT_KW
A82           LOAD *>%bin%>KWL$DELETE_KW
A83           LOAD *>%bin%>KWL$DESTROY_KWL
A84           LOAD *>%bin%>KWL$MATCH_KWL
A85           LOAD *>%bin%>SQ$OPEN_ENTRY
A86           LOAD *>%bin%>DS$WRITE_DEVICE_KWL
A87           LOAD *>%bin%>KWL$WRITE_DISK_BUFFER
A88           LOAD *>%bin%>SPL$DJ
A89           LOAD *>%bin%>GP$ANY
A90           LOAD *>%bin%>GP$INIT
A91           LOAD *>%bin%>GP$VERSION
A92           LOAD *>%bin%>KWL$INIT
A93           LOAD *>%bin%>COMM$INIT
A94           LOAD *>%bin%>COMM$FLUSH_IPC_MESSAGES
A95           LOAD *>%bin%>GP$UID
A96           LOAD *>%bin%>ERR$INIT
A97           LOAD *>%bin%>GP$MAKE_DYNT
A98           LOAD *>%bin%>GP$SSWITCH
A99           LOAD *>%bin%>GP$SYSTEM_NAME
A100          LOAD *>%bin%>GP$TERMINATE
A101          LOAD *>%bin%>COMM$TERMINATE
A102          LOAD *>%bin%>SQ$DELETE_ENTRY
A103          LOAD *>%bin%>SQ$DELETE_JOB
A104          LOAD *>%bin%>SQ$POSITION
A105          LOAD *>%bin%>DS$CHANGE_COPY_STATUS
A106          LOAD *>%bin%>DS$FIND_KW
A107          LOAD *>%bin%>KWL$CL_TO_KWL
A108          LOAD *>%bin%>GP$UNQUOTE
A109          LOAD *>%bin%>KWL$EXPAND_ABBREV
A110          LOAD *>%bin%>KWL$PARSE_KW
A111          LOAD *>%bin%>KWL$STRING_TO_FLAGS
A112          LOAD *>%bin%>L2$MAIN
A113          LOAD *>%bin%>L2$IO
A114          LOAD *>%bin%>L2$ACCOUNTING
A115          LOAD *>%bin%>L2$PRINT_BANNER
A116          LOAD *>%bin%>GP$WRITE_LINE
A117          LOAD *>%bin%>DS$READ_PC
A118          LOAD *>%bin%>DS$RESET_PC
A119          LOAD *>%bin%>DS$WRITE_PC
A120          LOAD *>%bin%>L2$EXPAND_STRING
A121          LOAD *>%bin%>L2$LOAD_BIG_LETTERS
A122          LOAD *>%bin%>BIO$INIT_FILE
A123          LOAD *>%bin%>BIO$READ_LINE
A124          LOAD *>%bin%>BIO$READ_BLOCK
A125          LOAD *>%bin%>BIO$SET_POSITION
A126          LOAD *>%bin%>BIO$CLOSE_FILE
A127          LOAD *>%bin%>GP$TICKS
A128          LI *>UTIL>FSULIB
A129          LI VAPPLB
A130          LI *>UTIL>VNETLB
A131          LI
A132          &end
A133      &else &do
A134          LOAD *>%bin%>DS$MAIN
A135          LOAD *>%bin%>DS$CHANGE_STATE
A136          LOAD *>%bin%>DS$OPEN_JOB
A137          LOAD *>%bin%>DS$CHANGE_COPY_STATUS
A138          LOAD *>%bin%>DS$SEND_KWL
A139          LOAD *>%bin%>KWL$COPY_KWL
A140          LOAD *>%bin%>KWL$MERGE_KWL
A141          LOAD *>%bin%>DS$WRITE_DEVICE_KWL
A142          LOAD *>%bin%>GP$SET_TRANSLATION
A143          LOAD *>%bin%>GP$TRANSLATE
A144          LOAD *>%bin%>DS$PROCESS_REQUEST
A145          LOAD *>%bin%>BIO$GET_POSITION
A146          LOAD *>%bin%>DS$RESET_STATISTICS
A147          LOAD *>%bin%>DS$FIND_KW
A148          LOAD *>%bin%>DS$READ_PC
A149          LOAD *>%bin%>DS$RESET_PC
A150          LOAD *>%bin%>DS$WRITE_PC
A151          LOAD *>%bin%>BIO$INIT_FILE
A152          LOAD *>%bin%>BIO$READ_LINE
A153          LOAD *>%bin%>BIO$READ_BLOCK
A154          LOAD *>%bin%>BIO$SET_POSITION
A155          LOAD *>%bin%>BIO$CLOSE_FILE
A156
A157          /* dynamic common owned by driver support routines */
A158
A159          ENTRYNAME DS$STATIC_EXTERNAL
A160
A161          ENTRYNAME -NONE
A162
A163          /* dynamic common owned by the library */
A164
A165          DYNT ERR$STATIC_EXTERNAL
A166          DYNT GBL$STATIC_EXTERNAL
A167
A168          LI *>UTIL>FSULIB
A169          LI VAPPLB
A170          LI *>UTIL>VNETLB
A171          LI
A172          &end
CHANGED TO
B17       LOAD *>%bin%>DS$MAIN
B18       LOAD *>%bin%>DS$CHANGE_STATE
B19       LOAD *>%bin%>DS$OPEN_JOB
B20       LOAD *>%bin%>DS$CHANGE_COPY_STATUS
B21       LOAD *>%bin%>DS$SEND_KWL
B22       LOAD *>%bin%>KWL$COPY_KWL
B23       LOAD *>%bin%>KWL$MERGE_KWL
B24       LOAD *>%bin%>DS$WRITE_DEVICE_KWL
B25       LOAD *>%bin%>GP$SET_TRANSLATION
B26       LOAD *>%bin%>GP$TRANSLATE
B27       LOAD *>%bin%>DS$PROCESS_REQUEST
B28       LOAD *>%bin%>BIO$GET_POSITION
B29       LOAD *>%bin%>DS$RESET_STATISTICS
B30       LOAD *>%bin%>DS$FIND_KW
B31       LOAD *>%bin%>DS$READ_PC
B32       LOAD *>%bin%>DS$RESET_PC
B33       LOAD *>%bin%>DS$WRITE_PC
B34       LOAD *>%bin%>BIO$INIT_FILE
B35       LOAD *>%bin%>BIO$READ_LINE
B36       LOAD *>%bin%>BIO$READ_BLOCK
B37       LOAD *>%bin%>BIO$SET_POSITION
B38       LOAD *>%bin%>BIO$CLOSE_FILE
B39
B40       /* dynamic common owned by driver support routines */
B41
B42       ENTRYNAME DS$STATIC_EXTERNAL
B43
B44       ENTRYNAME -NONE
B45
B46       /* dynamic common owned by the library */
B47
B48       DYNT ERR$STATIC_EXTERNAL
B49       DYNT GBL$STATIC_EXTERNAL
B50
B51       LI *>UTIL>FSULIB
B52       LI VAPPLB
B53       LI *>UTIL>VNETLB
B54       LI

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>DS>DS$OPEN_JOB.PSPL        SAT, DEC 13 1986 15:31:33

FILE A:  PMSRC_5X>DS>DS$OPEN_JOB.PSPL
FILE B:  PMSRC_51>DS>DS$OPEN_JOB.PSPL


A280                                         pc_sd_sd_unit, i, ds.page_control_unit);
CHANGED TO
B280                                         pc_sd_sd_unit, copy_to_print + i, ds.page_control_unit);

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>DS>DS$MAIN.SPL        SAT, DEC 13 1986 15:31:40

FILE A:  PMSRC_5X>DS>DS$MAIN.SPL
FILE B:  PMSRC_51>DS>DS$MAIN.SPL


B165
B166               /* now that we're awake, drain semaphore of extraneous notifies
B167                  that may have accumulated while printing */
B168
B169               call sem$dr (ds.semaphore, status);
INSERTED BEFORE
A165               end;

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>ENTRY>KWL$OPEN_KWL.INS.SPL        SAT, DEC 13 1986 15:32:08

FILE A:  PMSRC_5X>ENTRY>KWL$OPEN_KWL.INS.SPL
FILE B:  PMSRC_51>ENTRY>KWL$OPEN_KWL.INS.SPL


A6           kwl$open_kwl entry (bin, char(*) var, bin, 1, 2 bit, 2 bit, 2 bit, 2 bit, 2 bit(12));
CHANGED TO
B6           kwl$open_kwl entry (bin, char(*) var, bin, 1, 2 bit, 2 bit, 2 bit, 2 bit(13));

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>ENTRY>KWL$BUF_TO_KWL.INS.SPL        SAT, DEC 13 1986 15:32:10

FILE A:  PMSRC_5X>ENTRY>KWL$BUF_TO_KWL.INS.SPL
FILE B:  PMSRC_51>ENTRY>KWL$BUF_TO_KWL.INS.SPL


A8                                 1, 2 bit, 2 bit, 2 bit, 2 bit, 2 bit(12));               /* flags (in) */
CHANGED TO
B8                                 1, 2 bit, 2 bit, 2 bit, 2 bit(13));               /* flags (in) */

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>ENTRY>KWL$INSERT_KW.INS.SPL        SAT, DEC 13 1986 15:32:12

FILE A:  PMSRC_5X>ENTRY>KWL$INSERT_KW.INS.SPL
FILE B:  PMSRC_51>ENTRY>KWL$INSERT_KW.INS.SPL


A10                               1, 2 bit, 2 bit, 2 bit, 2 bit, 2 bit(12),  /* flags_kw (in) */
A11                               1, 2 bit, 2 bit, 2 bit, 2 bit, 2 bit(12)); /* flags_acl (in) */
CHANGED TO
B10                               1, 2 bit, 2 bit, 2 bit, 2 bit(13),  /* flags_kw (in) */
B11                               1, 2 bit, 2 bit, 2 bit, 2 bit(13)); /* flags_acl (in) */

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>ENTRY>KWL$FLAGS_TO_STRING.INS.SPL        SAT, DEC 13 1986 15:32:14

FILE A:  PMSRC_5X>ENTRY>KWL$FLAGS_TO_STRING.INS.SPL
FILE B:  PMSRC_51>ENTRY>KWL$FLAGS_TO_STRING.INS.SPL


A6                                       1, 2 bit, 2 bit, 2 bit, 2 bit, 2 bit(12));
CHANGED TO
B6                                       1, 2 bit, 2 bit, 2 bit, 2 bit(13));

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>ENTRY>KWL$PARSE_KW.INS.SPL        SAT, DEC 13 1986 15:32:15

FILE A:  PMSRC_5X>ENTRY>KWL$PARSE_KW.INS.SPL
FILE B:  PMSRC_51>ENTRY>KWL$PARSE_KW.INS.SPL


A6                                1, 2 bit, 2 bit, 2 bit, 2 bit, 2 bit(12));
CHANGED TO
B6                                1, 2 bit, 2 bit, 2 bit, 2 bit(13));

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>ENTRY>PRIMOS.INS.SPL        SAT, DEC 13 1986 15:32:25

FILE A:  PMSRC_5X>ENTRY>PRIMOS.INS.SPL
FILE B:  PMSRC_51>ENTRY>PRIMOS.INS.SPL


B116            at$tmp            entry
B117                              returns (bit),      /* true if swapped */
B118
INSERTED BEFORE
A116            rdlin$            entry(bin,          /* file unit */


B449         /* return (deallocate) segment */
B450            rtnsg$   entry (bin, bin),
B451
INSERTED BEFORE
A446         /* get system administrator's user id */

COMPARISON FINISHED.
2 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>ENTRY>KWL$.INS.SPL        SAT, DEC 13 1986 15:32:33

FILE A:  PMSRC_5X>ENTRY>KWL$.INS.SPL
FILE B:  PMSRC_51>ENTRY>KWL$.INS.SPL


A18       %include '*>entry>kwl$delete_form.ins.spl';
DELETED BEFORE
B18       %include '*>entry>kwl$delete_kw.ins.spl';


A22       %include '*>entry>kwl$expand_form.ins.spl';
DELETED BEFORE
B21       %include '*>entry>kwl$expand_value.ins.spl';


B37       %include '*>entry>kwl$string_to_flags.ins.spl';
INSERTED BEFORE
A39       %include '*>entry>kwl$sort_kwl.ins.spl';

COMPARISON FINISHED.
3 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>ENTRY>DS$.INS.SPL        SAT, DEC 13 1986 15:33:20

FILE A:  PMSRC_5X>ENTRY>DS$.INS.SPL
FILE B:  PMSRC_51>ENTRY>DS$.INS.SPL


B10
INSERTED BEFORE
A10       %include '*>entry>ds$change_copy_status.ins.spl';

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>ENTRY>GP$PARTIAL_INIT.INS.SPL        SAT, DEC 13 1986 15:33:40

FILE A:  PMSRC_5X>ENTRY>GP$PARTIAL_INIT.INS.SPL
FILE B:  PMSRC_51>ENTRY>GP$PARTIAL_INIT.INS.SPL


A6        dcl gp$partial_init  entry (bit)            /* true if initing system (in) */
CHANGED TO
B6        dcl gp$partial_init  entry (bit(1) aligned, /* true if initing system (in) */
B7                                    bit(1) aligned, /* true if full init (in/out) */
B8                                    char(*) var)    /* system version (in) */

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>EPF_COMMAND>APJ.SPL        SAT, DEC 13 1986 15:33:45

FILE A:  PMSRC_5X>EPF_COMMAND>APJ.SPL
FILE B:  PMSRC_51>EPF_COMMAND>APJ.SPL


A169         if spl_info.file_size = 1 then
A170            rec_lit = 'record';
A171         else
A172            rec_lit = 'records';
A173         if length (spl_info.job_name) = 0 then
A174            call ioa$ ('Job %d, %d %v, added to queue %v.%.', -1, spl_info.job_id,
A175                       spl_info.file_size, rec_lit, spl_info.q_partition);
A176         else
A177            call ioa$ ('Job %d %v, %d %v, added to queue %v.%.', -1, spl_info.job_id,
A178                       spl_info.job_name, spl_info.file_size, rec_lit,
A179                       spl_info.q_partition);
CHANGED TO
B169         call ioa$ ('Job %d%$', -1, spl_info.job_id);
B170         if length (spl_info.job_name) ^= 0 then
B171            call ioa$ (' %v%$', -1, spl_info.job_name);
B172         if spl_info.file_size = 1 then
B173            call ioa$ (', 1 record,%$', -1);
B174         else if spl_info.file_size ^= maxint then /* didn't use -OPEN */
B175            call ioa$ (', %d records,%$', -1, spl_info.file_size);
B176         call ioa$ (' added to queue %v.%.', -1, spl_info.q_partition);

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>EPF_COMMAND>SPOOL$.SPL        SAT, DEC 13 1986 15:33:51

FILE A:  PMSRC_5X>EPF_COMMAND>SPOOL$.SPL
FILE B:  PMSRC_51>EPF_COMMAND>SPOOL$.SPL


A32                   3  notused1 bit,                /* formerly, no eject when done */
CHANGED TO
B32                   3  no_eject bit,                /* no eject when done */


B65             inhibited         bit,
INSERTED BEFORE
A65             name_var          char(128) var,


A73             sp                ptr,
A74             status            bin,
CHANGED TO
B74             1  saved_swi      like swi_switches,
B75             sp                ptr,
B76             status            bin,
B77             swapped           bit,


A91          we_did_initialization = gp$init ('user', '', abnormal_return);
CHANGED TO
B94          /* preserve current attach point in case a simple file name is given
B95             and current and home attach points are not the same */
B96
B97          swapped = false;
B98          inhibited = false;
B99          call sw$rao (saved_swi);
B100         inhibited = true;
B101         swapped = at$tmp();                      /* save current */
B102         call at$hom (code);                      /* attach current to home */
B103
B104         we_did_initialization = gp$init ('user', '', abnormal_return);
B105
B106         /* restore current attach point */
B107
B108         if swapped then do;
B109            call at$inv (k$cura, code);           /* close current */
B110            if ^at$tmp() then                     /* restore current */
B111               call at$hom (code);                /* failed - attach home */
B112            end;
B113
B114         inhibited = false;                       /* enable interrupts */
B115         call sw$on (saved_swi);
B116


B187         if swapped then do;
B188            call at$inv (k$cura, code);           /* close current */
B189            if ^at$tmp() then                     /* restore current */
B190               call at$hom (code);                /* failed - attach home */
B191            end;
B192
B193         if inhibited then do;
B194            inhibited = false;
B195            call sw$on (saved_swi);
B196            end;
B197
INSERTED BEFORE
A162         if we_did_initialization then


B300         if info.pow.no_eject then
B301            kw_cl = kw_cl || ' -NO_EJECT';
B302
INSERTED BEFORE
A264         if info.pow.nfmt then

COMPARISON FINISHED.
6 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>EPF_COMMAND>INIT_PRINTMASTER.SPL        SAT, DEC 13 1986 15:33:53

FILE A:  PMSRC_5X>EPF_COMMAND>INIT_PRINTMASTER.SPL
FILE B:  PMSRC_51>EPF_COMMAND>INIT_PRINTMASTER.SPL


B63             2  pr_given       bit aligned,        /* monitor/device priority */
B64             2  mon_priority   bin(31),
B65             2  dev_priority   bin(31),
INSERTED BEFORE
A63             2  version_given  bit aligned,


B74          com_status = severity$error;
B75          dir_unit = 0;
B76
B77          /* set flag so GP$TERMINATE won't be called unless commons have been
B78             initialized */
B79
B80          we_did_initialization = false;
B81
B82          call parse_cl;
B83
INSERTED BEFORE
A71          /* ensure this is run only from the console.  -PLEASE overrides this,


A74          com_status = severity$error;
A75
DELETED BEFORE
B87          call user$ (local_user_nr, total_users);


A82
A83          dir_unit = 0;
A84
A85          /* set flag so GP$TERMINATE won't be called unless commons have been
A86             initialized */
A87
A88          we_did_initialization = false;
A89
A90          /* determine address of shared segment and init named semaphores */
A91
A92          if ^gp$partial_init (true) then
A93             call exit;                            /* message already printed */
A94
A95          call parse_cl;
A96
A97          /* do a full init if they told us to or we haven't initialized the system */
A98
A99          full_given = full_given  |  ^psv.system_inited;
A100         if full_given then do;
A101
A102            /* initialize port, and time limits from command line */
A103
A104            psv.system_inited = false;
A105            psv.time_limit = struc.tl;
CHANGED TO
B93          /* determine address of shared segment and init named semaphores */
B94
B95          if ^gp$partial_init (true, struc.full_given, rev_number) then
B96             call exit;                            /* message already printed */
B97
B98          /* init these vars each time */
B99
B100         psv.expiration_date = 0;                 /* may be changed by GP$INIT */
B101         psv.time_limit = struc.tl;
B102         psv.monitor_priority = struc.mon_priority;
B103         psv.device_priority = struc.dev_priority;
B104
B105         /* initialize clock tick rate.  This is the tick rate (ticks per second)
B106            used by GP$TICKS */
B107
B108         call timdat (time_array, 11);
B109         psv.ticks_per_sec = time_array(11);
B110
B111         if struc.full_given then do;
B112
B113            psv.system_inited = false;


A114         /* initialize clock tick rate.  This is the tick rate (ticks per second)
A115            used by GP$TICKS */
A116
A117         call timdat (time_array, 11);
A118         psv.ticks_per_sec = time_array(11);
A119
A120         we_did_initialization = gp$init ('user', '', error_exit);
CHANGED TO
B122         we_did_initialization = gp$init ('system', '', error_exit);


A192         if full_given then do;
CHANGED TO
B194         if struc.full_given then do;


A256            spawn_ds.priority = 3;                   /* default priority */
CHANGED TO
B258            spawn_ds.priority = psv.monitor_priority; /* priority */


A447               pic (3)  char(pixel_size) var static
A448                        init('-monitor; -full; -pacl; -port dec=-9999;',
A449                             ' -timelimit dec=-9999;',
CHANGED TO
B449               pic (4)  char(pixel_size) var static
B450                        init('-monitor; -full; -pacl; -port dec=-9999;',
B451                             ' -timelimit dec=-9999;',
B452                             ' -priority dec dec;',


B477            if struc.pr_given then do;
B478               if -2 <= struc.mon_priority & struc.mon_priority <= 3 then
B479                  ;
B480               else
B481                  call bad_value ('PRIORITY', struc.mon_priority, 0, 3);
B482               if -2 <= struc.dev_priority & struc.dev_priority <= 3 then
B483                  ;
B484               else
B485                  call bad_value ('PRIORITY', struc.dev_priority, 0, 3);
B486               end;
B487
INSERTED BEFORE
A474            if struc.version_given then do;

COMPARISON FINISHED.
9 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>GP>GP$GET_DTM.PSPL        SAT, DEC 13 1986 15:34:05

FILE A:  PMSRC_5X>GP>GP$GET_DTM.PSPL
FILE B:  PMSRC_51>GP>GP$GET_DTM.PSPL


B29
B30          dtm_mod = '** not set **';
B31          dtm_bk = '** not set **';
B32
INSERTED BEFORE
A29          unit = 0;


B40          on condition (err$condition_before_msg)
B41             goto cleanup;
B42
INSERTED BEFORE
A36          is_path = (index (path, '>') ^= 0);


A48          call gp$close (unit);
A49
DELETED BEFORE
B55          call cv$fdv (entry_buf.dtm_mod, dow, dtm_mod);


B58
B59       cleanup:
B60
B61          call gp$close (unit);
B62
INSERTED BEFORE
A53       end gp$get_dtm;

COMPARISON FINISHED.
4 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>GP>GP$INIT.PSPL        SAT, DEC 13 1986 15:34:07

FILE A:  PMSRC_5X>GP>GP$INIT.PSPL
FILE B:  PMSRC_51>GP>GP$INIT.PSPL


A32          dcl exp   bin;
CHANGED TO
B32          dcl exp   bin(31);


A42          i              bin,
CHANGED TO
B42          dow            bin,
B43          full_init      bit(1) aligned,
B44          i              bin,
B45          initing        bit(1) aligned,


A46          uid            char(6);                  /* actually is a bit(48) */
CHANGED TO
B49          uid            char(6),                  /* actually is a bit(48) */
B50          visual_date    char(28) var,
B51          was_inited     bit;


A57             semaphores.  If this can't be done, all is lost */
A58
A59          if ^gp$partial_init (false) then do;
A60             call ioa$er ('The PrintMaster system has not been initialized.%.', -1);
A61             call ioa$er ('Contact your System Administrator.%.', -1);
A62             call exit;
A63             end;
A64
A65          on condition (any$)
CHANGED TO
B62             semaphores.  If this can't be done, all is lost.
B63
B64             If called from INIT_PRINTMASTER (user_type = 'system'), segment
B65             initialization has already been done */
B66
B67          if user_type ^= 'system' then
B68             if ^gp$partial_init (false, false, rev_number) then do;
B69                call ioa$er ('Contact your System Administrator if you need help.%.', -1);
B70                call exit;
B71                end;
B72
B73           on condition (any$)


A72          addr(exp)->b16 = 'FFFF'b4;               /* On or After June 15, 1986 */
A73          fs = date$();
A74          if (addr(fs)->fb15 >= exp) then
A75             call fatal$ (0);
A76
A77          /* if bit 15 of virtual sense switches is is set (with VRTSSW
A78             command), set the using_debugger flag (running under DBG);
A79             if bit 16 of sense switches set, set trace_on */
CHANGED TO
B80          exp = 0;
B81          addr(exp)->b16 = 'AE41'b4;               /* On or After Feb 1, 1987 */
B82          fs = date$();
B83          if fs >= exp then
B84             call fatal$ (0);
B85
B86          if user_type = 'system' then do;
B87             psv.expiration_date = exp;
B88             call cv$fdv (exp, dow, visual_date);
B89             call ioa$ ('Demo version expires %v.%.', -1, visual_date);
B90             end;
B91
B92          /* if bit 16 of virtual sense switches is is set (with VRTSSW
B93             command), set the using_debugger flag (running under DBG);
B94             if bit 15 of sense switches set, set trace_on */


A112            when ('user') do;
CHANGED TO
B127            when ('user', 'system') do;

COMPARISON FINISHED.
6 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>GP>GP$VERSION.PSPL        SAT, DEC 13 1986 15:34:18

FILE A:  PMSRC_5X>GP>GP$VERSION.PSPL
FILE B:  PMSRC_51>GP>GP$VERSION.PSPL


B15          dow         bin,
B16          exp_msg     char(30) var,
INSERTED BEFORE
A15          modifier    char(2) var;


A24          call ioa$ ('[%c %c%v]%.', -1, program, length(program),
A25                     rev_number, length(rev_number), modifier);
CHANGED TO
B26          if psv.expiration_date ^= 0 then do;
B27             call cv$fdv (psv.expiration_date, dow, exp_msg);
B28             exp_msg = ' expires ' || substr (exp_msg, 1, 9)
B29                       || substr (exp_msg, 19);
B30             end;
B31          else
B32             exp_msg = '';
B33
B34          call ioa$ ('[%c %c%v%v]%.', -1, program, length(program),
B35                     rev_number, length(rev_number), modifier, exp_msg);

COMPARISON FINISHED.
2 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>GP>GP$PARTIAL_INIT.PSPL        SAT, DEC 13 1986 15:34:26

FILE A:  PMSRC_5X>GP>GP$PARTIAL_INIT.PSPL
FILE B:  PMSRC_51>GP>GP$PARTIAL_INIT.SPL


A12       gp$partial_init : procedure (initing) returns (bit);
CHANGED TO
B12       gp$partial_init : procedure (initing, full_init, system_version) returns (bit);


A23          initing        bit,                      /* true if called by INIT (in) */
CHANGED TO
B23          initing        bit(1) aligned,           /* true if called by INIT (in) */
B24          full_init      bit(1) aligned,           /* true if wants a full init */
B25                                    /* true on return if full init needed (in/out) */
B26          system_version char (10) var,            /* PrintMaster version (in) */
B27


A45          if status = e$nfas then
A46             goto cleanup;
DELETED BEFORE
B49          if status ^= 0 then


A58             goto cleanup;
CHANGED TO
B60             goto create_new_segment;              /* will print "not initialized" */


B93          /* check the versions; if a new version is installed, a full init
B94             is required. */
B95
B96          if psv.system_version ^= system_version then
B97             if ^initing then do;                  /* can't do full init here! */
B98                call ioa$er ('PrintMaster version mismatch.%.', -1);
B99                call ioa$er ('EPF is version %v, shared segment is version %v.%.', -1,
B100                            system_version, psv.system_version);
B101               call ioa$er ('Use the ICE command to remove old EPF.%.', -1);
B102               goto cleanup;
B103               end;
B104            else
B105               full_init = true;
B106
B107         /* a full init is also required if the system is not currently initialized */
B108
B109         if ^psv.system_inited then
B110            if ^initing then do;
B111               call ioa$er ('The PrintMaster system has not been initialized.%.', -1);
B112               goto cleanup;
B113               end;
B114            else
B115               full_init = true;
B116
INSERTED BEFORE
A91          /* everything good - if initing, display segment being used */


A94             call ioa$ ('Shared segment %o already allocated.%.', -1,
A95                        bin (psv_segment, 15));
CHANGED TO
B120            if ^full_init then
B121               call ioa$ ('Shared segment %o already allocated.%.', -1,
B122                          bin (psv_segment, 15));
B123            else do;
B124
B125               /* return old PrintMaster segment */
B126
B127               call rtnsg$ (bin (psv_segment, 15), status);
B128               if status = 0 then
B129                  call ioa$ ('Shared segment %o deleted.%.', -1, bin (psv_segment, 15));
B130               else
B131                  call error ('Deleting old dynamic segment');
B132
B133               goto create_new_segment;
B134               end;
B135


A115         if ^initing then
A116            goto cleanup;
CHANGED TO
B155         if ^initing then do;
B156            call ioa$er ('The PrintMaster system has not been initialized.%.', -1);
B157            goto cleanup;
B158            end;
B159
B160         /* if segment is created, a full init is required */
B161
B162         full_init = true;


B178         psv.system_version = system_version;
INSERTED BEFORE
A132

COMPARISON FINISHED.
8 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>GP>GP$DYNAMIC_LINK.SPL        SAT, DEC 13 1986 15:34:29

FILE A:  PMSRC_5X>GP>GP$DYNAMIC_LINK.SPL
FILE B:  PMSRC_51>GP>GP$DYNAMIC_LINK.PSPL


A27             2  displayp    ptr,                   /* pointer to display */
CHANGED TO
B27             2  displayp    ptr options (short),   /* pointer to display */

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>INSERT>KWL.INS.SPL        SAT, DEC 13 1986 15:34:31

FILE A:  PMSRC_5X>INSERT>KWL.INS.SPL
FILE B:  PMSRC_51>INSERT>KWL.INS.SPL


A35          kwl$form_directory         by  'PRINTMASTER*>FORMS',
A36
DELETED BEFORE
B35          /* Keyword & Value delimiters in Text files */


A55          kw$form           by 'FORM',
DELETED BEFORE
B53          kw$hold_job       by 'HOLD',             /* until operator releases it */


A81          kw$use            by 'USE',
DELETED BEFORE
B78


A94             2  form           bit,
A95             2  mbz            bit(12),
CHANGED TO
B90             2  mbz            bit(13),

COMPARISON FINISHED.
4 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>INSERT>L2.INS.SPL        SAT, DEC 13 1986 15:34:32

FILE A:  PMSRC_5X>INSERT>L2.INS.SPL
FILE B:  PMSRC_51>INSERT>L2.INS.SPL


A3        /* NOTE:  Variables in L2$ structure may be referenced by device driver L3$   */
CHANGED TO
B3        /* NOTE:  Variables in L2 structure may be referenced by device driver L3$    */


A12          l2$mark_size      by  77,  /* wds */     /* DOES include length wd */
CHANGED TO
B12          l2$mark_size      by  78,  /* wds */     /* DOES include length wd */


B109            3  banner_printed       bit aligned,  /* true if banner printed */
INSERTED BEFORE
A109            3  big_letters (160:255),             /* letter array (space to del) */

COMPARISON FINISHED.
3 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>INSERT>MSG$.INS.SPL        SAT, DEC 13 1986 15:34:41

FILE A:  PMSRC_5X>INSERT>MSG$.INS.SPL
FILE B:  PMSRC_51>INSERT>MSG$.INS.SPL


A43          ml$device_status_reply        by -314,   /* fixed part only */
CHANGED TO
B43          ml$device_status_reply        by -316,   /* fixed part only */

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>INSERT>L2_EXT.INS.SPL        SAT, DEC 13 1986 15:34:48

FILE A:  PMSRC_5X>INSERT>L2_EXT.INS.SPL
FILE B:  PMSRC_51>INSERT>L2_EXT.INS.SPL


A12          l2$mark_size      by  77,  /* wds */     /* DOES include length wd */
CHANGED TO
B12          l2$mark_size      by  78,  /* wds */     /* DOES include length wd */


B109            3  banner_printed       bit aligned,  /* true if banner printed */
INSERTED BEFORE
A109            3  big_letters (160:255),             /* letter array (space to del) */

COMPARISON FINISHED.
2 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>INSERT>GBL.INS.SPL        SAT, DEC 13 1986 15:34:50

FILE A:  PMSRC_5X>INSERT>GBL.INS.SPL
FILE B:  PMSRC_51>INSERT>GBL.INS.SPL


A6        %replace rev_number by '5.1.X';
CHANGED TO
B6        %replace rev_number by '5.0.7';


A103            3  monitor_semaphore       bin,
CHANGED TO
B103            3  monitor_semaphore       bin,       /* these two must be contiguous */


B120            2  system_version          char(10) var, /* PrintMaster version */
INSERTED BEFORE
A120            2  monitor_user            bin,          /* monitor user # */


B125            2  monitor_priority        bin,       /* priority to start monitor */
B126            2  device_priority         bin,       /* priority to start devices */
INSERTED BEFORE
A124            2  primenet_port           bin,

COMPARISON FINISHED.
4 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>INSERT>GBL_EXT.INS.SPL        SAT, DEC 13 1986 15:34:54

FILE A:  PMSRC_5X>INSERT>GBL_EXT.INS.SPL
FILE B:  PMSRC_51>INSERT>GBL_EXT.INS.SPL


A6        %replace rev_number by '5.1.X';
CHANGED TO
B6        %replace rev_number by '5.0.7';


A104            3  monitor_semaphore       bin,
CHANGED TO
B104            3  monitor_semaphore       bin,       /* these two must be contiguous */


B121            2  system_version          char(10) var, /* PrintMaster version */
INSERTED BEFORE
A121            2  monitor_user            bin,          /* monitor user # */


B126            2  monitor_priority        bin,       /* priority to start monitor */
B127            2  device_priority         bin,       /* priority to start devices */
INSERTED BEFORE
A125            2  primenet_port           bin,

COMPARISON FINISHED.
4 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>INSERT>KWL_EXT.INS.SPL        SAT, DEC 13 1986 15:34:55

FILE A:  PMSRC_5X>INSERT>KWL_EXT.INS.SPL
FILE B:  PMSRC_51>INSERT>KWL_EXT.INS.SPL


A35          kwl$form_directory         by  'PRINTMASTER*>FORMS',
A36
DELETED BEFORE
B35          /* Keyword & Value delimiters in Text files */


A55          kw$form           by 'FORM',
DELETED BEFORE
B53          kw$hold_job       by 'HOLD',             /* until operator releases it */


A81          kw$use            by 'USE',
DELETED BEFORE
B78


A94             2  form           bit,
A95             2  mbz            bit(12),
CHANGED TO
B90             2  mbz            bit(13),

COMPARISON FINISHED.
4 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>KWL>KWL$INSERT_KW.SPL        SAT, DEC 13 1986 15:34:58

FILE A:  PMSRC_5X>KWL>KWL$INSERT_KW.SPL
FILE B:  PMSRC_51>KWL>KWL$INSERT_KW.PSPL


A110         p_kw_ret->kw_entry.flags.form = flags_kw.form | flags_acl.form;
A111
DELETED BEFORE
B110         return;

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>KWL>KWL$TEXT_TO_KWL.SPL        SAT, DEC 13 1986 15:35:02

FILE A:  PMSRC_5X>KWL>KWL$TEXT_TO_KWL.SPL
FILE B:  PMSRC_51>KWL>KWL$TEXT_TO_KWL.PSPL


B36             dash                 by '-',
B37             not_char             by '-^',         /* code assumes it starts with dash */
INSERTED BEFORE
A36             max_line_len         by 160,


B49             printed_flag_msg     bit,
INSERTED BEFORE
A47             (unit, code, x)      bin,


A68          if length (trim (text_path_name, '11'b)) = 0 then do;
A69             from_tty = true;
A70             call ioa$('Enter keyword list.  A blank line terminates EKF.%.', -1);
CHANGED TO
B71          printed_flag_msg = false;
B72          if length (trim (text_path_name, '11'b)) = 0 then do;
B73             from_tty = true;
B74             call ioa$('Enter keyword list.%.', -1);


A83                if (substr (vs, 1, 1)) = '-' then do;
CHANGED TO
B87
B88                /* this test depends on dash being the first character of
B89                   a "not" keyword -^abc */
B90
B91                if (substr (vs, 1, 1)) = dash then do;


A119            if length(str) > 2 then
A120               if substr(str, 1, 2) = '-^' then do;/* Negated kw, */
A121                  kw = substr(str, 3);
CHANGED TO
B127            if length(str) > length(not_char) then
B128               if substr(str, 1, length(not_char)) = not_char then do;/* Negated kw, */
B129                  kw = substr(str, length(not_char)+1);


A126                           call error_ ('Keyword "'||kw || '" cannot be removed.');
CHANGED TO
B134                           call error_ ('Keyword "'||str || '" cannot be removed.');


A136            if length(str) = 2 then
A137               if str = '-^' then do;
A138                  call error_ ('Negated null keyword "-^" is not allowed.');
CHANGED TO
B144            if length(str) = length(not_char) then
B145               if str = not_char then do;
B146                  call error_ ('Negated null keyword "' || not_char
B147                             || '" not allowed.');


A150            call kwl$parse_kw (substr (str, 2), kw, flags);
CHANGED TO
B159            call kwl$parse_kw (str, kw, flags);


A161                  call err$ (err$user_et + err$warning_et,
A162                        'Flags accepted, but are ignored on all but the system MASTER keyword file.',
A163                        err$flags_not_valid_here_ue, 0, 0);
CHANGED TO
B170                  if ^printed_flag_msg then do;
B171                     call err$ (err$user_et + err$warning_et,
B172                        'Flags accepted, but are ignored on all but the system MASTER keyword file.',
B173                        err$flags_not_valid_here_ue, 0, 0);
B174                     printed_flag_msg = true;
B175                     end;


A186               call error_ ('Length exceeds maximum value length "' || value || '".');
A187            else
A188               if p_kw = null then
A189                  call error_ ('No keyword for the value "' || value || '".');
CHANGED TO
B198               call error_ ('Length exceeds maximum value length "' || value || '"');
B199            else
B200               if p_kw = null then
B201                  call error_ ('No keyword for this value "' || value || '"');


A193                     call error_ ('Values are not permitted in the master keyword file except for abbreviations.');
CHANGED TO
B205                     call error_ ('Values are not permitted here');


A247                  call ioa$er ('%v  %$', -1, msg);
CHANGED TO
B259                  call ioa$er ('%v.  %$', -1, msg);

COMPARISON FINISHED.
12 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>KWL>KWL$FLAGS_TO_STRING.PSPL        SAT, DEC 13 1986 15:35:03

FILE A:  PMSRC_5X>KWL>KWL$FLAGS_TO_STRING.PSPL
FILE B:  PMSRC_51>KWL>KWL$FLAGS_TO_STRING.PSPL


A21          if flags.form then
A22             str = str || 'f';
DELETED BEFORE
B21          if flags.info then

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>KWL>KWL$LOAD_IKWL.PSPL        SAT, DEC 13 1986 15:35:09

FILE A:  PMSRC_5X>KWL>KWL$LOAD_IKWL.PSPL
FILE B:  PMSRC_51>KWL>KWL$LOAD_IKWL.PSPL


A92          call kwl$insert_kw (kw$using, p_ikw, new_internal_kwl, expand_info, flags, flags);
A93          call kwl$insert_kw (kw$use,   p_ikw, new_internal_kwl, expand_info, flags, flags);
CHANGED TO
B92          call kwl$insert_kw (kw$using,       p_ikw, new_internal_kwl, expand_info, flags, flags);

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>KWL>KWL$PARSE_KW.SPL        SAT, DEC 13 1986 15:35:10

FILE A:  PMSRC_5X>KWL>KWL$PARSE_KW.SPL
FILE B:  PMSRC_51>KWL>KWL$PARSE_KW.PSPL


A2        /* Procedure to parse string containing kw and flags, '<kw>[:<flags>]'.       */
A3        /* NOTE: This assumes the leading "-" or "-^" has already been removed.       */
CHANGED TO
B2        /* Procedure to parse string containing kw and flags, '[-]<kw>[:<flags>]'.    */


A7        kwl$parse_kw: proc (str, kw, flags);
CHANGED TO
B6        kwl$parse_kw: proc (str_given, kw, flags);


A12       %include '*>entry>err$.ins.spl';
A13       %list;
A14
A15          dcl
A16             str            char(*) var,           /* (in) */
CHANGED TO
B11       %include '*>entry>kwl$string_to_flags.ins.spl';
B12       %list;
B13
B14          %replace
B15             dash  by '-';
B16
B17          dcl
B18             str_given      char(*) var,           /* (in) */


A20             ix             bin;
A21
A22
A23          ix = index (str, kwl$kw_end_marker);
A24          if ix = 0 then do;                       /* no flags on keyword */
A25             kw = str;
A26             string(flags) = kwl$default_flags;
CHANGED TO
B22             str            char(length(str_given)) var,
B23             ix             bin;
B24
B25       %page;
B26          str = str_given;
B27          if substr (str_given, 1, 1) = dash then
B28             if length (str_given) > 1 then
B29                str = substr (str_given, 2);
B30
B31          ix = index (str, kwl$kw_end_marker);
B32          if ix = 0 then do;
B33             kw = str;
B34             call kwl$string_to_flags ('', flags);


A30             call string_to_flags (substr (str, ix+1), flags);
A31             end;
CHANGED TO
B38             call kwl$string_to_flags (substr (str, ix+1), flags);
B39             end;
B40
B41          return;
B42          end kwl$parse_kw;


A33
A34       /* KWL$PARSE_KW.STRING_TO_FLAGS, PrintMaster, Jeff Hostetler, September 12, 1983   */
A35       /* Procedure to convert string parameters to flags.                           */
A36       /******************************************************************************/
A37
A38       string_to_flags: proc (str, flags);
A39
A40          dcl
A41             bad_flag       bin,
A42             str            char(*) var,
A43             flags          like kwl$flags;
A44
A45
A46          string (flags) = kwl$default_flags;
A47
A48          bad_flag = verify (str, 'AaFfIiPp');
A49          if bad_flag ^= 0 then
A50             call err$ (err$user_et, 'Keyword flag "' || substr (str, bad_flag, 1) ||
A51                        '" is not defined.', err$ill_kw_ue, 0, 0);
A52
A53          if index (str, 'A') > 0  |  index (str, 'a') > 0 then
A54             flags.abbrev = true;
A55          if index (str, 'F') > 0  |  index (str, 'f') > 0 then
A56             flags.form = true;
A57          if index (str, 'I') > 0  |  index (str, 'i') > 0 then
A58             flags.info = true;
A59          if index (str, 'P') > 0  |  index (str, 'p') > 0 then
A60             flags.wp = true;
A61
A62          end string_to_flags;
A63
A64       end kwl$parse_kw;
DELETED BEFORE
END OF FILE B.

COMPARISON FINISHED.
6 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>KWL>KWL$CL_TO_KWL.SPL        SAT, DEC 13 1986 15:35:18

FILE A:  PMSRC_5X>KWL>KWL$CL_TO_KWL.SPL
FILE B:  PMSRC_51>KWL>KWL$CL_TO_KWL.PSPL


A13       %include '*>entry>kwl$delete_form.ins.spl';
A14       %include '*>entry>kwl$delete_kw.ins.spl';
A15       %include '*>entry>kwl$expand_abbrev.ins.spl';
A16       %include '*>entry>kwl$expand_form.ins.spl';
CHANGED TO
B13       %include '*>entry>kwl$delete_kw.ins.spl';
B14       %include '*>entry>kwl$expand_abbrev.ins.spl';


A28             max_token   by 128;
CHANGED TO
B26             max_token   by 128,
B27             not_char    by '-^',
B28             dash        by '-';


A40             code        bin,                      /* not used */
A41             kw_required bit,                      /* true if kw required next */
A42             mult_forms_err bit,                   /* forms error msg printed */
A43             form_flag   bit,                      /* processing form keyword */
CHANGED TO
B40             printed_flag_msg bit,
B41             code        bin,                      /* not used */
B42             no_kw_flag  bit,                      /* has a kw just been added */


A47
CHANGED TO
B46       %page;


A60
A61          p_kw = null;
A62          next_ch = 1;
A63          kw_required = true;
A64          mult_forms_err = false;
A65          form_flag = false;
A66          using_flag = false;
A67          eol = false;
CHANGED TO
B59       %page;
B60          p_kw = null;
B61          next_ch = 1;
B62          no_kw_flag = true;
B63          using_flag = false;
B64          eol = false;
B65          printed_flag_msg = false;


A71
DELETED BEFORE
B69          do while (^eol);


A77                if cl_info.flags.keyword then      /* begins with dash, not dec # */
A78                   call handle_kw;
A79                else
A80                   call handle_value;
A81             end;
A82
A83          /* if the last token was a form keyword, it had no values;
A84             -FORM with no values must be added; this dups code below */
A85
A86          if form_flag & ^kw_required & expand_info.expand then
A87             call kwl$expand_form(p_kwl, '', expand_info, flags, flags_acl, true);
A88
A89          return;
CHANGED TO
B74                if ^ handle_kw () then
B75                   call handle_value;              /* it's not a keyword */
B76             end;
B77
B78          return;
B79          /* logical end of kwl$cl_to_kwl */


A93          call err$ (err$user_et, '', err$cl_ue, 0, 0);   /* does not return */
A94
CHANGED TO
B83          call err$ (err$user_et, '', err$cl_ue, 0, 0);
B84          /* does not return */


A98       /* add keyword to keyword list                                                */
A99       /******************************************************************************/
A100
A101      handle_kw: proc;
A102
A103         dcl
A104            p        ptr,
A105            kw       char(kwl$chars_in_kw) var,
A106            p_ikw    ptr;
A107
A108
A109         /* length of token must be at least 1, since cl$par said this was a kw */
A110
A111         if length(token) = 1 then
A112            call err$ (err$user_et, 'Null keyword "-" not allowed.',
A113                       err$cl_ue, 0, 0);
A114
A115         /* length of token must now be at least 2 */
A116
A117         if token = '-^' then
A118            call err$ (err$user_et, 'Negated null keyword "-^" not allowed.',
A119                       err$cl_ue, 0, 0);
A120
A121         /* now either going to insert or remove a keyword;
A122            if the previous token was a form keyword, it had no values and
A123            -FORM with no values must be added */
A124
A125         if form_flag & ^kw_required & expand_info.expand then
A126            call kwl$expand_form(p_kwl, '', expand_info, flags, flags_acl, true);
A127
A128         /* reset state variables */
A129
A130         using_flag = false;                   /* not inside -USE */
A131         form_flag = false;                    /* nor -FORM */
A132
A133         /* check for and handle negated keyword */
A134
A135         if substr(token, 1, 2) = '-^' then do;
A136            call kwl$parse_kw (substr(token, 3), kw, flags);
A137            call kwl$format_kw (kw);
A138            if ^expand_info.special_kwl & ^flags.abbrev then
A139               call kwl$expand_abbrev (kw, kw);
A140            if kwl.check_wp_from_ikwl_only then                   /* See if it's */
A141               if kwl$find_kwv (kw, psv.internal_kwl, p_ikw) then /* a reserved  */
A142                  if p_ikw->kw_entry.wp then                      /*protected kw */
A143                     call err$ (err$user_et, 'Keyword "-' || kw ||
A144                                '" cannot be removed.',
A145                                err$kw_wp_ue, 0, 0);
A146
A147            if kw = kw$form & expand_info.expand then
A148               call kwl$delete_form (p_kwl);
A149            else
A150               if kwl$find_kwv (kw, p_kwl, p) then
A151                  call kwl$delete_kw (p, p_kwl);  /* remove keyword from list */
A152            kw_required = true;                /* VALUE following -^ is invalid */
A153            end;  /* negated keyword */
A154
A155         /* not a negated keyword; add a keyword */
A156
A157         else do;
A158            kw_required = false;
A159            call kwl$parse_kw (substr(token, 2), kw, flags);
A160            call kwl$format_kw (kw);
A161            if ^expand_info.special_kwl & string(flags) ^= kwl$default_flags then
A162               if kwl.in_edit_kwl then
A163                  call err$ (err$user_et + err$warning_et,
A164                     'Flags accepted, but are ignored on all but the system MASTER keyword file.',
A165                     err$flags_not_valid_here_ue, 0, 0);
A166               else
A167                  call err$ (err$user_et, 'Flags are not valid here "' || token || '".',
A168                             err$flags_not_valid_here_ue, 0, 0);
A169
A170            if ^expand_info.special_kwl & ^flags.abbrev then
A171               call kwl$expand_abbrev (kw, kw);
A172            if (kw = kw$using | kw = kw$use) & expand_info.expand then
A173               using_flag = true;
A174            else if kw = kw$form & expand_info.expand then
A175               form_flag = true;
A176            else
A177               call kwl$insert_kw ((kw), p_kw, p_kwl, expand_info, flags, flags_acl);
A178            end;
A179
A180         end handle_kw;
CHANGED TO
B88       /* Examine token, if it is a keyword (i.e. starts with "-") return true.      */
B89       /******************************************************************************/
B90
B91          handle_kw: proc returns (bit);
B92
B93             dcl
B94                p        ptr,
B95                kw       char(kwl$chars_in_kw) var,
B96                p_ikw    ptr;
B97
B98
B99             if cl_info.flags.decimal_number then
B100               return (false);
B101
B102            if length(token) > length(not_char) then
B103               if substr(token, 1, length(not_char)) = not_char then do;/* Negated kw, */
B104                  call kwl$parse_kw (substr(token, length(not_char)+1), kw, flags);
B105                  call kwl$format_kw (kw);
B106                  if ^expand_info.special_kwl & ^flags.abbrev then
B107                     call kwl$expand_abbrev (kw, kw);
B108                  if kwl.check_wp_from_ikwl_only then do;       /* See if it's */
B109                     if kwl$find_kwv (kw, psv.internal_kwl, p_ikw) then /* a reserved  */
B110                        if p_ikw->kw_entry.wp then                   /*protected kw */
B111                           call err$ (err$user_et, 'Keyword "'||token
B112                                      || '" cannot be changed.',
B113                                      err$kw_wp_ue, 0, 0);
B114                     end;
B115                  using_flag = false;
B116                  no_kw_flag = true;                      /* a VALUE following this is invalid */
B117                  if kwl$find_kwv (kw, p_kwl, p) then
B118                     call kwl$delete_kw (p, p_kwl); /* remove from list  */
B119                  return (true);
B120                  end;
B121
B122            if length(token) = length(not_char) then
B123               if token = not_char then
B124                  call err$ (err$user_et, 'Negated null keyword "' || not_char
B125                             || '" not allowed.', err$cl_ue, 0, 0);
B126
B127            if substr(token, 1, 1) = dash then do; /* otherwise add it */
B128               if length(token) = 1 then
B129                  call err$ (err$user_et, 'Null keyword "-" not allowed.',
B130                             err$cl_ue, 0, 0);
B131               call kwl$parse_kw (substr(token, 2), kw, flags);
B132               call kwl$format_kw (kw);
B133               no_kw_flag = false;
B134               if (kw = kw$using) & expand_info.expand then
B135                  using_flag = true;
B136               else do;
B137                  using_flag = false;
B138                  if ^expand_info.special_kwl
B139                        &  string(flags) ^= kwl$default_flags then
B140                     if kwl.in_edit_kwl then
B141                        if ^printed_flag_msg then do;
B142                           call err$ (err$user_et + err$warning_et,
B143                              'Flags accepted, but are ignored on all but the system MASTER keyword file.',
B144                              err$flags_not_valid_here_ue, 0, 0);
B145                           printed_flag_msg = true;
B146                           end;
B147                        else ;
B148                     else
B149                        call err$ (err$user_et, 'Flags are not valid here "' || token || '".',
B150                                   err$flags_not_valid_here_ue, 0, 0);
B151
B152                  if ^expand_info.special_kwl & ^flags.abbrev then
B153                     call kwl$expand_abbrev (kw, kw);
B154                  call kwl$insert_kw ((kw), p_kw, p_kwl, expand_info, flags, flags_acl);
B155                  end;
B156
B157               return (true);
B158               end;
B159
B160            return (false);                       /* not a keyword */
B161            end handle_kw;


A186      handle_value: proc;
A187
A188         dcl
A189            value          char(kwl$chars_in_value) var;
A190
A191         if kw_required then                      /* no kw preceeded this value */
A192            if form_flag then do;                 /* or multiple form values */
A193               if ^mult_forms_err then do;
A194                  call err$(err$user_et + err$warning_et,
A195                           'Multiple form names; all but first ignored.',
A196                           err$bad_value_ue, 0, 0);
A197                  mult_forms_err = true;
A198                  end;
A199               end;
A200            else
A201               call err$ (err$user_et, 'No keyword for value "' || token || '".',
A202                          err$cl_ue, 0, 0);
A203         else do;
CHANGED TO
B167         handle_value: proc;
B168
B169            dcl
B170               value          char(kwl$chars_in_value) var;
B171
B172            if no_kw_flag then                    /* if no kw preceeded this, error */
B173               call err$ (err$user_et, 'No keyword for value "' || token || '".',
B174                          err$cl_ue, 0, 0);
B175


A208            else if form_flag then do;            /* expand is always true here */
A209               call kwl$expand_form(p_kwl, value, expand_info,
A210                                    flags, flags_acl, false);
A211               kw_required = true;                /* only 1 form name allowed */
A212               end;
A213            else
A214               if expand_info.special_kwl  &  ^p_kw->kw_entry.flags.abbrev then
A215                  call err$ (err$user_et,
A216                             'Values are not permitted in the master keyword file except for abbreviations.',
CHANGED TO
B180            else
B181               if expand_info.special_kwl  &  ^p_kw->kw_entry.flags.abbrev then
B182                  call err$ (err$user_et, 'Values are not permitted here.',


A220            end;
A221
A222         end handle_value;
A223
A224      end kwl$cl_to_kwl;
CHANGED TO
B186
B187            return;
B188            end handle_value;
B189
B190         end kwl$cl_to_kwl;

COMPARISON FINISHED.
12 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>KWL>KWL$BUF_TO_KWL.SPL        SAT, DEC 13 1986 15:35:24

FILE A:  PMSRC_5X>KWL>KWL$BUF_TO_KWL.SPL
FILE B:  PMSRC_51>KWL>KWL$BUF_TO_KWL.PSPL


A13       %include '*>entry>kwl$expand_form.ins.spl';
A14       %include '*>entry>kwl$add_value.ins.spl';
A15       %include '*>entry>primos.ins.spl';
A16       %include '*>entry>err$.ins.spl';
CHANGED TO
B13       %include '*>entry>kwl$add_value.ins.spl';
B14       %include '*>entry>primos.ins.spl';


A51             we_are_expanding = false;
A52
A53             pf = addrel (pk, to_wds (pk->bin15) + 1); /* skip over bvs, to flag wd */
A54
A55             if (pk->bvs = kw$using | pk->bvs = kw$use) & expand_info.expand then
A56                we_are_expanding = true;
A57
A58             else if ((pk->bvs = kw$form)              /* We have a -FORM and we are */
A59                         & (expand_info.expand)        /*   expanding and it has not */
A60                         & (^pf->kwl$flags.form)       /* already been expanded */
A61                         & (^flags_acl.form)) then do; /* not currently in form def */
A62                call do_form();
A63                error_has_happened = true;      /* dont add the values in part below */
A64                end;
A65
A66             else do;
CHANGED TO
B49             pf = addrel (pk, to_wds (pk->bin15) + 1); /* skip over bvs, to flag wd */
B50             if pk->bvs = kw$using & expand_info.expand then
B51                we_are_expanding = true;
B52             else do;
B53                we_are_expanding = false;


A103
A104
A105         do_form: proc();
A106
A107            nr_v = addrel(pf, 1)->bin15;          /* number of values */
A108            pv = addrel(pf, 2);                   /* ptr to first value */
A109
A110            if nr_v = 0 then
A111               call kwl$expand_form(p_kwl, '', expand_info,
A112                                    pf->kwl$flags, flags_acl, true);
A113            else do;
A114               if nr_v > 1 then
A115                  call err$(err$user_et + err$warning_et,
A116                           'Multiple form names; all but first ignored.',
A117                           err$bad_value_ue, 0, 0);
A118               call kwl$expand_form(p_kwl, pv->bvs, expand_info,
A119                                    pf->kwl$flags, flags_acl, false);
A120               end;
A121
A122            return;
A123            end do_form;
A124
DELETED BEFORE
B90          end kwl$buf_to_kwl;

COMPARISON FINISHED.
3 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>L2>L2$MAIN.SPL        SAT, DEC 13 1986 15:35:30

FILE A:  PMSRC_5X>L2>L2$MAIN.SPL
FILE B:  PMSRC_51>L2>L2$MAIN.SPL


B534         kwp         ptr,
INSERTED BEFORE
A534         bptr        ptr based;


A540         l2.suppress_accounting = true;
A541         call skip_channel (1);
A542         l2.total_pages_printed = l2.total_pages_printed + 1;
CHANGED TO
B541         if ^ds$find_kw ('NO_EJECT', kwp) then do;
B542            l2.suppress_accounting = true;
B543            call skip_channel (1);
B544            l2.total_pages_printed = l2.total_pages_printed + 1;
B545            end;


B1355        l2.banner_printed = false;
B1356
INSERTED BEFORE
A1352        call set_job_attributes;


B1367        if ^l2.banner_printed then
B1368           call l2$print_banner;
B1369
INSERTED BEFORE
A1362        /* reset L2.PRINT_LINE_LEN in case level 3 driver changes


A1385        call l2$print_banner;
A1386
DELETED BEFORE
B1393        l2.pm_lines_printed_this_page = maxint;

COMPARISON FINISHED.
5 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>L2>L2$PRINT_BANNER.PSPL        SAT, DEC 13 1986 15:35:32

FILE A:  PMSRC_5X>L2>L2$PRINT_BANNER.PSPL
FILE B:  PMSRC_51>L2>L2$PRINT_BANNER.PSPL


A25             local_line     char(l2.print_line_len) var,
DELETED BEFORE
B25             date_          bin(31),


B44          /* only print banner once; L3 may request it early */
B45
B46          if l2.banner_printed then
B47             return;
B48
B49          l2.banner_printed = true;
INSERTED BEFORE
A45          quiet_save = l2.quiet;

COMPARISON FINISHED.
2 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>L2>L2$IO.SPL        SAT, DEC 13 1986 15:35:34

FILE A:  PMSRC_5X>L2>L2$IO.SPL
FILE B:  PMSRC_51>L2>L2$IO.SPL


B337                        n = n - 1;                /* T$VG always skips 1 more */
INSERTED BEFORE
A337                        do i = 1 to n;


B341                        status_vector(1) = 0;     /* T$VG bug */
INSERTED BEFORE
A340                        call t$vg (ds.device_unit, addr(t$vg_ls), n, t$vg$print_line,


B416                     status_vector(1) = 0;        /* T$VG bug */
INSERTED BEFORE
A414                     call t$vg (ds.device_unit, addr(t$vg_skip_command), 1,


B473               status_vector(1) = 0;              /* T$VG bug */
INSERTED BEFORE
A470               call t$vg (ds.device_unit, null, 0, t$vg$read_status, status_vector);


B516         /* if null string, don't do anything; T$AMLC will give errors
B517            when the string length is zero */
B518
B519         if length (data_line) = 0 then
B520            return;
B521
INSERTED BEFORE
A512         calling_output_string = true;


B578               status_vector(1) = 0;              /* T$VG bug */
INSERTED BEFORE
A568               call t$vg (ds.device_unit, stringp,

COMPARISON FINISHED.
6 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>MON>MON$SCAN_JOB_LIST.SPL        SAT, DEC 13 1986 15:35:49

FILE A:  PMSRC_5X>MON>MON$SCAN_JOB_LIST.SPL
FILE B:  PMSRC_51>MON>MON$SCAN_JOB_LIST.SPL


A65             /* if job needs to be requeued, take it out of the list, and add it
A66                back to the list (possibly in a different order).  Then try to
CHANGED TO
B65             /* if job needs to be requeued, do it, then try to


A70                if prev_jep = null then
A71                   mon.job_bol = next_jep;
A72                else
A73                   prev_jep->je.next = next_jep;
DELETED BEFORE
B69                call mon$queue_job (jep);

COMPARISON FINISHED.
2 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>MON>MON$QUEUE_JOB.SPL        SAT, DEC 13 1986 15:35:50

FILE A:  PMSRC_5X>MON>MON$QUEUE_JOB.SPL
FILE B:  PMSRC_51>MON>MON$QUEUE_JOB.SPL


A27       empty_list:
A28
A29          jep->je.next = null;
A30          if mon.job_bol = null then do;               /* easy case */
A31             mon.job_bol = jep;
CHANGED TO
B27
B28          if mon.job_bol = null then do;               /* easy case */
B29
B30       empty_list:
B31
B32             mon.job_bol = jep;
B33             jep->je.next = null;


A35          /* remove any duplicate jobs.  If a duplicate is found and is closed,
CHANGED TO
B37          /* remove any duplicate jobs from the job list.  It is possible to call
B38             this procedure with a job already on the job list, in which case it
B39             should not be destroyed.  However, if a duplicate is found and is closed,


A47             if p->je.uid = jep->je.uid then do;
A48                jep->je.is_open = p->je.is_open;
A49                call mon$destroy_job (p);          /* sets p to null */
CHANGED TO
B51             if p->je.uid = jep->je.uid then do;   /* p and jep may be equal */
B52                jep->je.is_open = p->je.is_open;
B53
B54                /* if this job is being re-queued, remove it from the job list,
B55                   but don't destroy it.  If it is a duplicate, destroy it (this
B56                   removes it from the job list also) */
B57
B58                if p = jep then do;
B59                   if q = null then                /* remove from list */
B60                      mon.job_bol = p->je.next;
B61                   else
B62                      q->je.next = p->je.next;
B63                   p->je.next = null;
B64                   end;
B65                else                               /* remove and destroy */
B66                   call mon$destroy_job (p);


A80                goto next;
A81                end;
A82
A83             /* job is priority zero; queue by date queued */
CHANGED TO
B97                if job_size > p->je.size * p->je.copies_left then goto next;
B98                end;
B99
B100            /* queue by date queued */


B121         jep->je.next = null;
INSERTED BEFORE
A104

COMPARISON FINISHED.
5 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>MON>MON$MAIN_MONITOR.SPL        SAT, DEC 13 1986 15:35:59

FILE A:  PMSRC_5X>MON>MON$MAIN_MONITOR.SPL
FILE B:  PMSRC_51>MON>MON$MAIN_MONITOR.SPL


A273            if num_potential_masters = 1 then
CHANGED TO
B273            else if num_potential_masters = 1 then

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>MON>MON$SEND_TO_DEVICE.SPL        SAT, DEC 13 1986 15:36:01

FILE A:  PMSRC_5X>MON>MON$SEND_TO_DEVICE.SPL
FILE B:  PMSRC_51>MON>MON$SEND_TO_DEVICE.SPL


B17       %include '*>entry>mon$destroy_device.ins.spl';
INSERTED BEFORE
A17       %include '*>entry>mon$find_device.ins.spl';


A46             reply = 'Device '||msgp->msg.target_id||' is not started up.';
CHANGED TO
B47             if created then
B48                reply = 'Device '||msgp->msg.target_id||' doesn''t exist.';
B49             else
B50                reply = 'Device '||msgp->msg.target_id||' is not started up.';


B98                   call err$ (err$log_event_et, 'Shutting down device in MON$SEND_TO_DEVICE', 0, 0, 0);
INSERTED BEFORE
A94                   call mon$change_device_state  (devp, '', ds$none_cc, 0,


A107         if was_queued then                       /* don't let anybody destory msg */
A108            msgp = null;
CHANGED TO
B112         if was_queued then                       /* don't let anybody destroy msg */
B113            msgp = null;
B114
B115         if created & devp->device_info.device_state = ds$shutdown_st then
B116            call mon$destroy_device (devp);

COMPARISON FINISHED.
4 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>MON>MON$START_DEVICE.SPL        SAT, DEC 13 1986 15:36:03

FILE A:  PMSRC_5X>MON>MON$START_DEVICE.SPL
FILE B:  PMSRC_51>MON>MON$START_DEVICE.SPL


A63          call gp$open_file (k$writ+k$getu+k$$no_wait, cpl_file, cpl_unit);
CHANGED TO
B63          call gp$open_file (k$writ+k$getu, cpl_file, cpl_unit);


A72          spawn_ds.priority = -1;                  /* default priority */
CHANGED TO
B72          spawn_ds.priority = psv.device_priority; /* priority */


B125         if new_state = ds$shutdown_st & devp->device_info.device_state ^= ds$shutdown_st then
B126            call err$ (err$log_event_et, 'Changing device to shutdown in SEND_TO_DEVICE', 0, 0, 0);
INSERTED BEFORE
A125         call mon$change_device_state (devp, '', ds$none_cc, 0, new_state);

COMPARISON FINISHED.
3 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>MON>MON$CHANGE_DEVICE_STATE.SPL        SAT, DEC 13 1986 15:36:04

FILE A:  PMSRC_5X>MON>MON$CHANGE_DEVICE_STATE.SPL
FILE B:  PMSRC_51>MON>MON$CHANGE_DEVICE_STATE.SPL


A141         if had_failure then
A142            call mon$change_device_state (devp, '', ds$none_cc, 0, ds$shutdown_st);
CHANGED TO
B141         if had_failure then do;
B142            call err$ (err$log_event_et, 'Shutting down device ' ||
B143                       devp->device_info.device_id, 0, 0, 0);
B144            call err$ (err$log_event_et, '   (failure sending messages after state change)', 0, 0, 0);
B145            call mon$change_device_state (devp, '', ds$none_cc, 0, ds$shutdown_st);
B146            end;

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>MON>MON$DESTROY_DEVICE.SPL        SAT, DEC 13 1986 15:36:05

FILE A:  PMSRC_5X>MON>MON$DESTROY_DEVICE.SPL
FILE B:  PMSRC_51>MON>MON$DESTROY_DEVICE.SPL


B26             q = p;
INSERTED BEFORE
A26             end;

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>MON>MON$INIT_DRIVERS.SPL        SAT, DEC 13 1986 15:36:07

FILE A:  PMSRC_5X>MON>MON$INIT_DRIVERS.SPL
FILE B:  PMSRC_51>MON>MON$INIT_DRIVERS.SPL


A19       %include '*>entry>mon$destroy_device.ins.spl';
DELETED BEFORE
B19       %include '*>entry>mon$unattach.ins.spl';


A122            if devp->device_info.device_state = ds$shutdown_st then
A123               call mon$destroy_device (devp);
A124
DELETED BEFORE
B121            call dir$ls (dir_unit, 4, '0'b, '0010'b, addr(wildname), 1,

COMPARISON FINISHED.
2 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>MON>MON$SCAN_DEVICE_LIST.SPL        SAT, DEC 13 1986 15:36:08

FILE A:  PMSRC_5X>MON>MON$SCAN_DEVICE_LIST.SPL
FILE B:  PMSRC_51>MON>MON$SCAN_DEVICE_LIST.SPL


A40                   if devp->device_info.semaphore = 0 then
A41                      call mon$destroy_device (devp);
CHANGED TO
B40                   if devp->device_info.semaphore = 0 then do;
B41                      call err$ (err$log_event_et, 'Destroying device in MON$SCAN_DEVICE_LIST', 0, 0, 0);
B42                      call mon$destroy_device (devp);
B43                      end;

COMPARISON FINISHED.
1 DISCREPANCY FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>MON>MON$CREATE_JOB.SPL        SAT, DEC 13 1986 15:36:09

FILE A:  PMSRC_5X>MON>MON$CREATE_JOB.SPL
FILE B:  PMSRC_51>MON>MON$CREATE_JOB.SPL


A23          dow            bin,                      /* day of the week */
A24          jep            ptr,                      /* local job entry pointer */
A25          job_is_remote  bit,                      /* true if job is remote */
A26          status         bin,
A27          kwp            ptr;                      /* keyword pointer */
CHANGED TO
B23          delete_info_kws bit,                     /* true if info keywords can be deleted */
B24          dow            bin,                      /* day of the week */
B25          jep            ptr,                      /* local job entry pointer */
B26          kwp            ptr,                      /* keyword pointer */
B27          next_kwp       ptr,                      /* next keyword pointer */
B28          status         bin;


A59          /* try to determine if job is remote.  If so, then info keywords
A60             can be deleted */
A61
A62          job_is_remote = false;
A63          if gbl.I_am_master then
A64             if kwl$find_kw (kw$q_system, kwlp, kwp) then
A65                if kwp->kw_entry.pf_value->value ^= psv.my_system_id then
A66                   job_is_remote = true;
CHANGED TO
B60          /* if job is remote or I am the highest master, the info keywords
B61             can be deleted on this job.  If I'm not the highest master, I
B62             may have to forward this job to another master later, and the
B63             info keywords will be needed */
B64
B65          delete_info_kws = false;
B66          if mon.my_system_index = 1 then
B67             delete_info_kws = true;
B68          else
B69             if gbl.I_am_master then
B70                if kwl$find_kw (kw$q_system, kwlp, kwp) then
B71                   if kwp->kw_entry.pf_value->value ^= psv.my_system_id then
B72                      delete_info_kws = true;


A70          do kwp = kwlp repeat kwp->kw_entry.next while (kwp ^= null);
CHANGED TO
B76          do kwp = kwlp repeat next_kwp while (kwp ^= null);
B77
B78             /* get forward pointer now, because keyword may be deleted */
B79
B80             next_kwp = kwp->kw_entry.next;


B86
INSERTED BEFORE
A76                when (kw$copies_left)


A152            if mon.my_system_index = 1 | job_is_remote then
A153               if kwp->kw_entry.flags.info then do;
A154                  kwl.in_edit_kwl = true;             /* allows delete of protected kw */
A155                  call kwl$delete_kw (kwp, jep->je.kwlp);
A156                  kwl.in_edit_kwl = false;
A157                  end;
CHANGED TO
B163            if delete_info_kws & kwp->kw_entry.flags.info then do;
B164               kwl.in_edit_kwl = true;             /* allows delete of protected kw */
B165               call kwl$delete_kw (kwp, jep->je.kwlp);
B166               kwl.in_edit_kwl = false;
B167               end;

COMPARISON FINISHED.
5 DISCREPANCIES FOUND.

[CMPF 19.4.5]     COMPARISON OF PMSRC_5X>MON>MON$PROCESS_MESSAGE.SPL        SAT, DEC 13 1986 15:36:11

FILE A:  PMSRC_5X>MON>MON$PROCESS_MESSAGE.SPL
FILE B:  PMSRC_51>MON>MON$PROCESS_MESSAGE.SPL


B202         if msgp->msg.sender_id = devp->device_info.device_id
B203          & msgp->msg.sender_system = devp->device_info.system_id then
B204            if devp->device_info.user_nr ^= msgp->msg.sender_user_nr then do;
B205               if devp->device_info.user_nr ^= 0 then
B206                  call err$ (err$log_event_et, 'Changing device user number.', 0, 0, 0);
B207               devp->device_info.user_nr = msgp->msg.sender_user_nr;
B208               end;
B209
INSERTED BEFORE
A202         if gbl.trace_on then do;


A300                     /* dequeue job and requeue it (queue order may change)
A301                        don't do this for priority zero jobs! */
A302
A303                     if jep->je.priority ^= 0 then do;
A304                        if prev = null then
A305                           mon.job_bol = jep->je.next;
A306                        else
A307                           prev->je.next = jep->je.next;
A308                        call mon$queue_job (jep);
A309                        end;
CHANGED TO
B308                     /* requeue job (queue order may change)
B309                        don't do this for priority zero jobs! */
B310
B311                     if jep->je.priority ^= 0 then
B312                        call mon$queue_job (jep);


A332         if msgp->msg.sender_user_nr ^= 0 then
A333            devp->device_info.user_nr = msgp->msg.sender_user_nr;
A334
DELETED BEFORE
B335         /* update device's state, and reschedule it */


A635                  if mon.my_disks(ldev).disk_name = jep->je.queue_partition then
CHANGED TO
B635                  if mon.my_disks(ldev).disk_name = jep->je.queue_partition
B636                   & length (mon.my_disks(ldev).system_name) = 0 then

COMPARISON FINISHED.
4 DISCREPANCIES FOUND.

