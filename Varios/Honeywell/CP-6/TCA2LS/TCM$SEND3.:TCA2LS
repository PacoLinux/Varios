VERSION A02

PL6.E3A0      #001=TCM$TCP_CONNECT File=TCM$SEND3.:TCA2TSI                       SUN 11/16/97 14:19 Page:1    
        1        1        /*M*    TCM$SEND3   SMTP Mail Sender, part 3                        */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /* Contains TCP/IP specific routines */
        8        8        TCM$TCP_CONNECT: PROC(ADDRESS) ALTRET;
        9        9
       10       10    1   DCL ADDRESS CHAR(32);
       11       11
       12       12        %INCLUDE TCP_HEP_M;
       13       67        %INCLUDE TCP_HEP_E;
       14      144
       15      145
       16      146    1   DCL TCP$OPEN ENTRY(6) ALTRET;
       17      147    1   DCL TCP$READ ENTRY(3) ALTRET;
       18      148    1   DCL TCP$WRITE_D ENTRY(4) ALTRET;
       19      149    1   DCL TCP$WRITE ENTRY(4) ALTRET;
       20      150    1   DCL TCP$RELEASE ENTRY(1) ALTRET;
       21      151    1   DCL NET$ADDR2IP ENTRY(2);
       22      152    1   DCL NET$IP2ADDR ENTRY(2) ALTRET;
       23      153    1   DCL NET$NAME2ADDR ENTRY(2) ALTRET;
       24      154
       25      155        %TCP$SOCKET (NAME=TCM_CMD_LS, STCLASS=STATIC SYMDEF);
       26      163        %TCP$SOCKET (NAME=TCM_CMD_FS, STCLASS=STATIC SYMDEF);
       27      171
       28      172        %TCP$ADMIN (STCLASS=STATIC);
       29      193        %TCP$CB(NAME=CB, STCLASS=STATIC);
       30      196
       31      197    1   DCL TCM_CMD_LCN UBIN(36) STATIC SYMDEF;
       32      198
       33      199
       34      200        /* CONVERT TO IP ADDRESS */
       35      201    2      CALL NET$IP2ADDR(TCM_CMD_FS.ADDRESS, ADDRESS) WHENALTRETURN DO;
       36      202    2          CALL NET$NAME2ADDR(TCM_CMD_FS.ADDRESS, ADDRESS)
       37      203    3          WHENALTRETURN DO;
PL6.E3A0      #001=TCM$TCP_CONNECT File=TCM$SEND3.:TCA2TSI                       SUN 11/16/97 14:19 Page:2    
       38      204    3              ALTRETURN;
       39      205    3              END;
       40      206    2          END;
       41      207
       42      208    1      TCM_CMD_LS='0'B;
       43      209    1      TCM_CMD_FS.PORT = %TCP$WKS$SMTP;
       44      210    1      CALL TCP$OPEN (TCM_CMD_LCN, TCM_CMD_LS, TCM_CMD_FS, %TCP_ACTIVE)
       45      211    2           WHENALTRETURN DO;
       46      212    2                   ALTRETURN;
       47      213    2           END;
       48      214    1      CALL TCP$READ (TCM_CMD_LCN, VECTOR(TCP$ADMIN), CB)
       49      215    2      WHENALTRETURN DO;
       50      216    2          ALTRETURN;
       51      217    2          END;
       52      218
       53      219    1       IF CB.ADMIN THEN
       54      220    2           DO SELECT( TCP$ADMIN.CMD);
       55      221    2               SELECT( %TCP_ADMINMSG_ESTABLISHED);
       56      222    2                   RETURN;
       57      223    2               SELECT( %TCP_ADMINMSG_RESET);
       58      224    2                   CALL TCP$RELEASE( TCM_CMD_LCN)
       59      225    3                   WHENALTRETURN DO;
       60      226    3                       END;
       61      227    2                   ALTRETURN;
       62      228    2               SELECT( ELSE);
       63      229    2                   ALTRETURN;
       64      230    2               END;
       65      231
       66      232
       67      233    1   END TCM$TCP_CONNECT;
       68      234        %EOD;

PL6.E3A0      #001=TCM$TCP_CONNECT File=TCM$SEND3.:TCA2TSI                       SUN 11/16/97 14:19 Page:3    
--  Include file information  --

   TCP_HEP_E.:TCA2TOU  is referenced.
   TCP_HEP_M.:TCA2TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure TCM$TCP_CONNECT.

   Procedure TCM$TCP_CONNECT requires 55 words for executable code.
   Procedure TCM$TCP_CONNECT requires 6 words of local(AUTO) storage.

PL6.E3A0      #001=TCM$TCP_CONNECT File=TCM$SEND3.:TCA2TSI                       SUN 11/16/97 14:19 Page:4    

 Object Unit name= TCM$TCP_CONNECT                            File name= TCM$SEND3.:TCA2TOU
 UTS= NOV 16 '97 14:19:11.96 SUN                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none    22     26  TCM$TCP_CONNECT
    1   Proc  even  none    55     67  TCM$TCP_CONNECT
    2  RoData even  none    11     13  TCM$TCP_CONNECT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes    yes     yes      Std        1  TCM$TCP_CONNECT

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      0  TCM_CMD_LS                         0      2  TCM_CMD_FS
    0     25  TCM_CMD_LCN
PL6.E3A0      #001=TCM$TCP_CONNECT File=TCM$SEND3.:TCA2TSI                       SUN 11/16/97 14:19 Page:5    

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       2 NET$IP2ADDR
 yes     yes           Std       6 TCP$OPEN
 yes     yes           Std       3 TCP$READ
 yes     yes           Std       2 NET$NAME2ADDR
 yes     yes           Std       1 TCP$RELEASE
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #001=TCM$TCP_CONNECT File=TCM$SEND3.:TCA2TSI                       SUN 11/16/97 14:19 Page:6    


        1        1        /*M*    TCM$SEND3   SMTP Mail Sender, part 3                        */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /* Contains TCP/IP specific routines */
        8        8        TCM$TCP_CONNECT: PROC(ADDRESS) ALTRET;

      8  1 000000   000000 700200 xent  TCM$TCP_CON* TSX0  ! X66_AUTO_1
         1 000001   000006 000001                    ZERO    6,1

        9        9
       10       10    1   DCL ADDRESS CHAR(32);
       11       11
       12       12        %INCLUDE TCP_HEP_M;
       13       67        %INCLUDE TCP_HEP_E;
       14      144
       15      145
       16      146    1   DCL TCP$OPEN ENTRY(6) ALTRET;
       17      147    1   DCL TCP$READ ENTRY(3) ALTRET;
       18      148    1   DCL TCP$WRITE_D ENTRY(4) ALTRET;
       19      149    1   DCL TCP$WRITE ENTRY(4) ALTRET;
       20      150    1   DCL TCP$RELEASE ENTRY(1) ALTRET;
       21      151    1   DCL NET$ADDR2IP ENTRY(2);
       22      152    1   DCL NET$IP2ADDR ENTRY(2) ALTRET;
       23      153    1   DCL NET$NAME2ADDR ENTRY(2) ALTRET;
       24      154
       25      155        %TCP$SOCKET (NAME=TCM_CMD_LS, STCLASS=STATIC SYMDEF);
       26      163        %TCP$SOCKET (NAME=TCM_CMD_FS, STCLASS=STATIC SYMDEF);
       27      171
       28      172        %TCP$ADMIN (STCLASS=STATIC);
       29      193        %TCP$CB(NAME=CB, STCLASS=STATIC);
       30      196
       31      197    1   DCL TCM_CMD_LCN UBIN(36) STATIC SYMDEF;
       32      198
PL6.E3A0      #001=TCM$TCP_CONNECT File=TCM$SEND3.:TCA2TSI                       SUN 11/16/97 14:19 Page:7    
       33      199
       34      200        /* CONVERT TO IP ADDRESS */
       35      201    2      CALL NET$IP2ADDR(TCM_CMD_FS.ADDRESS, ADDRESS) WHENALTRETURN DO;

    201  1 000002   200003 236100                    LDQ     @ADDRESS,,AUTO
         1 000003   000000 235000 2                  LDA     0
         1 000004   200004 757100                    STAQ    @ADDRESS+1,,AUTO
         1 000005   200004 630500                    EPPR0   @ADDRESS+1,,AUTO
         1 000006   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000007   000000 701000 xent               TSX1    NET$IP2ADDR
         1 000010   000012 702000 1                  TSX2    s:202
         1 000011   000023 710000 1                  TRA     s:208

       36      202    2          CALL NET$NAME2ADDR(TCM_CMD_FS.ADDRESS, ADDRESS)

    202  1 000012   200003 236100                    LDQ     @ADDRESS,,AUTO
         1 000013   000000 235000 2                  LDA     0
         1 000014   200004 757100                    STAQ    @ADDRESS+1,,AUTO
         1 000015   200004 630500                    EPPR0   @ADDRESS+1,,AUTO
         1 000016   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000017   000000 701000 xent               TSX1    NET$NAME2ADDR
         1 000020   000022 702000 1                  TSX2    s:204
         1 000021   000023 710000 1                  TRA     s:208

       37      203    3          WHENALTRETURN DO;

       38      204    3              ALTRETURN;

    204  1 000022   000000 702200 xent               TSX2  ! X66_AALT

       39      205    3              END;
       40      206    2          END;

       41      207
       42      208    1      TCM_CMD_LS='0'B;

    208  1 000023   000000 235003                    LDA     0,DU
PL6.E3A0      #001=TCM$TCP_CONNECT File=TCM$SEND3.:TCA2TSI                       SUN 11/16/97 14:19 Page:8    
         1 000024   000000 236003                    LDQ     0,DU
         1 000025   000000 757000 0                  STAQ    TCM_CMD_LS

       43      209    1      TCM_CMD_FS.PORT = %TCP$WKS$SMTP;

    209  1 000026   000144 236003                    LDQ     100,DU
         1 000027   000003 756000 0                  STQ     TCM_CMD_FS+1

       44      210    1      CALL TCP$OPEN (TCM_CMD_LCN, TCM_CMD_LS, TCM_CMD_FS, %TCP_ACTIVE)

    210  1 000030   000001 630400 2                  EPPR0   1
         1 000031   000022 631400 xsym               EPPR1   B_VECTNIL+18
         1 000032   000000 701000 xent               TSX1    TCP$OPEN
         1 000033   000035 702000 1                  TSX2    s:212
         1 000034   000036 710000 1                  TRA     s:214

       45      211    2           WHENALTRETURN DO;

       46      212    2                   ALTRETURN;

    212  1 000035   000000 702200 xent               TSX2  ! X66_AALT

       47      213    2           END;
       48      214    1      CALL TCP$READ (TCM_CMD_LCN, VECTOR(TCP$ADMIN), CB)

    214  1 000036   000010 630400 2                  EPPR0   8
         1 000037   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 000040   000000 701000 xent               TSX1    TCP$READ
         1 000041   000043 702000 1                  TSX2    s:216
         1 000042   000044 710000 1                  TRA     s:219

       49      215    2      WHENALTRETURN DO;

       50      216    2          ALTRETURN;

    216  1 000043   000000 702200 xent               TSX2  ! X66_AALT

PL6.E3A0      #001=TCM$TCP_CONNECT File=TCM$SEND3.:TCA2TSI                       SUN 11/16/97 14:19 Page:9    
       51      217    2          END;
       52      218
       53      219    1       IF CB.ADMIN THEN

    219  1 000044   000020 234000 0                  SZN     CB
         1 000045   000066 605000 1                  TPL     s:233

       54      220    2           DO SELECT( TCP$ADMIN.CMD);

    220  1 000046   000004 236000 0                  LDQ     TCP$ADMIN
         1 000047   000003 116007                    CMPQ    3,DL
         1 000050   000053 602000 1                  TNC     s:220+5
         1 000051   000056 600000 1                  TZE     s:222
         1 000052   000065 710000 1                  TRA     s:229
         1 000053   000002 116007                    CMPQ    2,DL
         1 000054   000065 601000 1                  TNZ     s:229
         1 000055   000057 710000 1                  TRA     s:224

       55      221    2               SELECT( %TCP_ADMINMSG_ESTABLISHED);

       56      222    2                   RETURN;

    222  1 000056   000000 702200 xent               TSX2  ! X66_ARET

       57      223    2               SELECT( %TCP_ADMINMSG_RESET);

       58      224    2                   CALL TCP$RELEASE( TCM_CMD_LCN)

    224  1 000057   000001 630400 2                  EPPR0   1
         1 000060   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000061   000000 701000 xent               TSX1    TCP$RELEASE
         1 000062   000064 702000 1                  TSX2    s:227
         1 000063   000064 710000 1                  TRA     s:227

       59      225    3                   WHENALTRETURN DO;

       60      226    3                       END;
PL6.E3A0      #001=TCM$TCP_CONNECT File=TCM$SEND3.:TCA2TSI                       SUN 11/16/97 14:19 Page:10   

       61      227    2                   ALTRETURN;

    227  1 000064   000000 702200 xent               TSX2  ! X66_AALT

       62      228    2               SELECT( ELSE);

       63      229    2                   ALTRETURN;

    229  1 000065   000000 702200 xent               TSX2  ! X66_AALT

       64      230    2               END;

       65      231
       66      232
       67      233    1   END TCM$TCP_CONNECT;

    233  1 000066   000000 702200 xent               TSX2  ! X66_ARET

TCP$ADMIN
 Sect OctLoc
   0     004   ****** ******   ****** ******   ****** ******   ****** ******    ................

CB
 Sect OctLoc
   0     020   ****** ******   ****** ******   ****** ******   ****** ******    ................

(unnamed)
 Sect OctLoc
   2     000   000002 006000   000025 006000   000000 006000   000002 006000    ................
   2     004   000003 006000   000000 000000   000013 777640   000004 006000    ................
   2     010   000025 006000   000006 006000   000020 006000                    ............
       68      234        %EOD;

PL6.E3A0      #001=TCM$TCP_CONNECT File=TCM$SEND3.:TCA2TSI                       SUN 11/16/97 14:19 Page:11   
--  Include file information  --

   TCP_HEP_E.:TCA2TOU  is referenced.
   TCP_HEP_M.:TCA2TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure TCM$TCP_CONNECT.
PL6.E3A0      #001=TCM$TCP_CONNECT File=TCM$SEND3.:TCA2TSI                       SUN 11/16/97 14:19 Page:12   

 **** Variables and constants ****

  ****  Section 000  Data  TCM$TCP_CONNECT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    20-0-0/w STRC(180)   r     1 CB                         2-0-0/w STRC(72)    r     1 TCM_CMD_FS
    25-0-0/w UBIN        r     1 TCM_CMD_LCN                0-0-0/w STRC(72)    r     1 TCM_CMD_LS
     4-0-0/w STRC(432)   r     1 TCP$ADMIN

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @ADDRESS                  *0-0-0/c CHAR(32)    r     1 ADDRESS


   Procedure TCM$TCP_CONNECT requires 55 words for executable code.
   Procedure TCM$TCP_CONNECT requires 6 words of local(AUTO) storage.
PL6.E3A0      #001=TCM$TCP_CONNECT File=TCM$SEND3.:TCA2TSI                       SUN 11/16/97 14:19 Page:13   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=TCM$TCP_CONNECT File=TCM$SEND3.:TCA2TSI                       SUN 11/16/97 14:19 Page:14   
          MINI XREF LISTING

ADDRESS
        10**DCL         8--PROC      201<>CALL      202<>CALL
CB
       194**DCL       214<>CALL
CB.ADMIN
       194**DCL       219>>IF
NET$IP2ADDR
       152**DCL-ENT   201--CALL
NET$NAME2ADDR
       153**DCL-ENT   202--CALL
TCM_CMD_FS
       165**DCL       210<>CALL
TCM_CMD_FS.ADDRESS
       169**DCL       201<>CALL      202<>CALL
TCM_CMD_FS.PORT
       169**DCL       209<<ASSIGN
TCM_CMD_LCN
       197**DCL       210<>CALL      214<>CALL      224<>CALL
TCM_CMD_LS
       157**DCL       208<<ASSIGN    210<>CALL
TCP$ADMIN
       173**DCL       214--CALL
TCP$ADMIN.CMD
       173**DCL       220>>DOSELCT
TCP$ADMIN.GHST_LCN
       174**DCL       174--REDEF
TCP$ADMIN.USER_LCN
       173**DCL       174--REDEF
TCP$OPEN
       146**DCL-ENT   210--CALL
TCP$READ
       147**DCL-ENT   214--CALL
PL6.E3A0      #001=TCM$TCP_CONNECT File=TCM$SEND3.:TCA2TSI                       SUN 11/16/97 14:19 Page:15   
TCP$RELEASE
       150**DCL-ENT   224--CALL
PL6.E3A0      #001=TCM$TCP_CONNECT File=TCM$SEND3.:TCA2TSI                       SUN 11/16/97 14:19 Page:16   
              *** CROSS REFERENCE LISTING ***
    **     DENOTES     IDENTIFIER DEFINITION
    <<                 IDENTIFIER'S VALUE SET
    >>                 IDENTIFIER'S VALUE USED
    <>                 IDENTIFIER SET AND/OR USED
    --                 IDENTIFIER REFERENCED
PL6.E3A0      #001=TCM$TCP_CONNECT File=TCM$SEND3.:TCA2TSI                       SUN 11/16/97 14:19 Page:17   
              MINI UREF LISTING

NET$ADDR2IP     151**DCL-ENT
TCM$TCP_CONNECT       8**PROC
TCP$WRITE     149**DCL-ENT
TCP$WRITE_D     148**DCL-ENT
TCP_ERR_CODE      48**DCL
TCP_MON_ERR      48**DCL

PL6.E3A0      #002=TCM$TCP_DISCONNECT File=TCM$SEND3.:TCA2TSI                    SUN 11/16/97 14:19 Page:18   
       69        1        /*T***********************************************************/
       70        2        /*T*                                                         */
       71        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       72        4        /*T*                                                         */
       73        5        /*T***********************************************************/
       74        6
       75        7        TCM$TCP_DISCONNECT: PROC ALTRET;
       76        8        %INCLUDE TCP_HEP_M;
       77       63    1   DCL TCP$ABORT ENTRY(1) ALTRET;
       78       64    1   DCL TCM_CMD_LCN UBIN(36) SYMREF;
       79       65
       80       66    2           CALL TCP$ABORT(TCM_CMD_LCN) WHENALTRETURN DO;
       81       67    2                  ALTRETURN;
       82       68    2                  END;
       83       69
       84       70    1   END TCM$TCP_DISCONNECT;
       85       71
       86       72        %EOD;

PL6.E3A0      #002=TCM$TCP_DISCONNECT File=TCM$SEND3.:TCA2TSI                    SUN 11/16/97 14:19 Page:19   
--  Include file information  --

   TCP_HEP_M.:TCA2TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure TCM$TCP_DISCONNECT.

   Procedure TCM$TCP_DISCONNECT requires 9 words for executable code.
   Procedure TCM$TCP_DISCONNECT requires 4 words of local(AUTO) storage.

PL6.E3A0      #002=TCM$TCP_DISCONNECT File=TCM$SEND3.:TCA2TSI                    SUN 11/16/97 14:19 Page:20   

 Object Unit name= TCM$TCP_DISCONNECT                         File name= TCM$SEND3.:TCA2TOU
 UTS= NOV 16 '97 14:19:26.16 SUN                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none     9     11  TCM$TCP_DISCONNECT
    1  RoData even  none     1      1  TCM$TCP_DISCONNECT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes    yes     yes      Std        0  TCM$TCP_DISCONNECT

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       1 TCP$ABORT
                       nStd      0 X66_AUTO_0
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     TCM_CMD_LCN                           B_VECTNIL
PL6.E3A0      #002=TCM$TCP_DISCONNECT File=TCM$SEND3.:TCA2TSI                    SUN 11/16/97 14:19 Page:21   

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #002=TCM$TCP_DISCONNECT File=TCM$SEND3.:TCA2TSI                    SUN 11/16/97 14:19 Page:22   


       69        1        /*T***********************************************************/
       70        2        /*T*                                                         */
       71        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       72        4        /*T*                                                         */
       73        5        /*T***********************************************************/
       74        6
       75        7        TCM$TCP_DISCONNECT: PROC ALTRET;

      7  0 000000   000000 700200 xent  TCM$TCP_DIS* TSX0  ! X66_AUTO_0
         0 000001   000004 000000                    ZERO    4,0

       76        8        %INCLUDE TCP_HEP_M;
       77       63    1   DCL TCP$ABORT ENTRY(1) ALTRET;
       78       64    1   DCL TCM_CMD_LCN UBIN(36) SYMREF;
       79       65
       80       66    2           CALL TCP$ABORT(TCM_CMD_LCN) WHENALTRETURN DO;

     66  0 000002   000000 630400 1                  EPPR0   0
         0 000003   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000004   000000 701000 xent               TSX1    TCP$ABORT
         0 000005   000007 702000 0                  TSX2    s:67
         0 000006   000010 710000 0                  TRA     s:70

       81       67    2                  ALTRETURN;

     67  0 000007   000000 702200 xent               TSX2  ! X66_AALT

       82       68    2                  END;
       83       69
       84       70    1   END TCM$TCP_DISCONNECT;

     70  0 000010   000000 702200 xent               TSX2  ! X66_ARET

(unnamed)
 Sect OctLoc
   1     000   000000 006000                                                    ....
PL6.E3A0      #002=TCM$TCP_DISCONNECT File=TCM$SEND3.:TCA2TSI                    SUN 11/16/97 14:19 Page:23   
       85       71
       86       72        %EOD;

PL6.E3A0      #002=TCM$TCP_DISCONNECT File=TCM$SEND3.:TCA2TSI                    SUN 11/16/97 14:19 Page:24   
--  Include file information  --

   TCP_HEP_M.:TCA2TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure TCM$TCP_DISCONNECT.
PL6.E3A0      #002=TCM$TCP_DISCONNECT File=TCM$SEND3.:TCA2TSI                    SUN 11/16/97 14:19 Page:25   

 **** Variables and constants ****

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN        r     1 TCM_CMD_LCN


   Procedure TCM$TCP_DISCONNECT requires 9 words for executable code.
   Procedure TCM$TCP_DISCONNECT requires 4 words of local(AUTO) storage.
PL6.E3A0      #002=TCM$TCP_DISCONNECT File=TCM$SEND3.:TCA2TSI                    SUN 11/16/97 14:19 Page:26   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=TCM$TCP_DISCONNECT File=TCM$SEND3.:TCA2TSI                    SUN 11/16/97 14:19 Page:27   
          MINI XREF LISTING

TCM_CMD_LCN
        64**DCL        66<>CALL
TCP$ABORT
        63**DCL-ENT    66--CALL
PL6.E3A0      #002=TCM$TCP_DISCONNECT File=TCM$SEND3.:TCA2TSI                    SUN 11/16/97 14:19 Page:28   
              *** CROSS REFERENCE LISTING ***
    **     DENOTES     IDENTIFIER DEFINITION
    <<                 IDENTIFIER'S VALUE SET
    >>                 IDENTIFIER'S VALUE USED
    <>                 IDENTIFIER SET AND/OR USED
    --                 IDENTIFIER REFERENCED
PL6.E3A0      #002=TCM$TCP_DISCONNECT File=TCM$SEND3.:TCA2TSI                    SUN 11/16/97 14:19 Page:29   
              MINI UREF LISTING

TCM$TCP_DISCONNECT       7**PROC
TCP_ERR_CODE      44**DCL
TCP_MON_ERR      44**DCL

PL6.E3A0      #003=TCM$LTCP_READ File=TCM$SEND3.:TCA2TSI                         SUN 11/16/97 14:19 Page:30   
       87        1        /*T***********************************************************/
       88        2        /*T*                                                         */
       89        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       90        4        /*T*                                                         */
       91        5        /*T***********************************************************/
       92        6
       93        7        TCM$LTCP_READ: PROC(BUF_, TIME, EOMTABLE, EOMCHAR, ARS, MERR, TIMEFLAG) ALTRET;
       94        8    1   DCL 1 BUF_,
       95        9    1        2 VSIZE# UBIN(20) UNAL,
       96       10    1        2 * BIT(16) UNAL,
       97       11    1        2 PTR$ PTR;
       98       12    1   DCL TIME SBIN;
       99       13    1   DCL TBIN UBIN STATIC;
      100       14    1   DCL BIT9 BIT(9) BASED UNAL;
      101       15    1   DCL EOMTABLE(0:287) BIT(1) UNAL;
      102       16    1   DCL EOMCHAR CHAR(1);
      103       17    1   DCL EOMUBIN REDEF EOMCHAR UBIN(9) UNAL;
      104       18    1   DCL ARS UBIN;
      105       19    1   DCL MERR UBIN;
      106       20    1   DCL TIMEFLAG BIT(1) UNAL;
      107       21
      108       22
      109       23    1   DCL TCM_CMD_LCN UBIN SYMREF;
      110       24    1   DCL TCM$GET_LINE ENTRY(4) ALTRET;
      111       25
      112       26    1          CALL TCM$GET_LINE (TCM_CMD_LCN, BUF_, ARS, 300)
      113       27    2          WHENALTRETURN DO;
      114       28    2              ALTRETURN;
      115       29    2              END;
      116       30    1   END TCM$LTCP_READ;
      117       31        %EOD;

PL6.E3A0      #003=TCM$LTCP_READ File=TCM$SEND3.:TCA2TSI                         SUN 11/16/97 14:19 Page:31   
--  Include file information  --

   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure TCM$LTCP_READ.

   Procedure TCM$LTCP_READ requires 15 words for executable code.
   Procedure TCM$LTCP_READ requires 14 words of local(AUTO) storage.

PL6.E3A0      #003=TCM$LTCP_READ File=TCM$SEND3.:TCA2TSI                         SUN 11/16/97 14:19 Page:32   

 Object Unit name= TCM$LTCP_READ                              File name= TCM$SEND3.:TCA2TOU
 UTS= NOV 16 '97 14:19:34.36 SUN                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none     1      1  TCM$LTCP_READ
    1   Proc  even  none    15     17  TCM$LTCP_READ
    2  RoData even  none     3      3  TCM$LTCP_READ

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes    yes     yes      Std        7  TCM$LTCP_READ

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       4 TCM$GET_LINE
                       nStd      0 X66_AUTO_N
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     TCM_CMD_LCN                           B_VECTNIL
PL6.E3A0      #003=TCM$LTCP_READ File=TCM$SEND3.:TCA2TSI                         SUN 11/16/97 14:19 Page:33   

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #003=TCM$LTCP_READ File=TCM$SEND3.:TCA2TSI                         SUN 11/16/97 14:19 Page:34   


       87        1        /*T***********************************************************/
       88        2        /*T*                                                         */
       89        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       90        4        /*T*                                                         */
       91        5        /*T***********************************************************/
       92        6
       93        7        TCM$LTCP_READ: PROC(BUF_, TIME, EOMTABLE, EOMCHAR, ARS, MERR, TIMEFLAG) ALTRET;

      7  1 000000   000000 700200 xent  TCM$LTCP_RE* TSX0  ! X66_AUTO_N
         1 000001   000016 000007                    ZERO    14,7

       94        8    1   DCL 1 BUF_,
       95        9    1        2 VSIZE# UBIN(20) UNAL,
       96       10    1        2 * BIT(16) UNAL,
       97       11    1        2 PTR$ PTR;
       98       12    1   DCL TIME SBIN;
       99       13    1   DCL TBIN UBIN STATIC;
      100       14    1   DCL BIT9 BIT(9) BASED UNAL;
      101       15    1   DCL EOMTABLE(0:287) BIT(1) UNAL;
      102       16    1   DCL EOMCHAR CHAR(1);
      103       17    1   DCL EOMUBIN REDEF EOMCHAR UBIN(9) UNAL;
      104       18    1   DCL ARS UBIN;
      105       19    1   DCL MERR UBIN;
      106       20    1   DCL TIMEFLAG BIT(1) UNAL;
      107       21
      108       22
      109       23    1   DCL TCM_CMD_LCN UBIN SYMREF;
      110       24    1   DCL TCM$GET_LINE ENTRY(4) ALTRET;
      111       25
      112       26    1          CALL TCM$GET_LINE (TCM_CMD_LCN, BUF_, ARS, 300)

     26  1 000002   000001 236000 2                  LDQ     1
         1 000003   200007 235100                    LDA     @ARS,,AUTO
         1 000004   200014 757100                    STAQ    @TIMEFLAG+3,,AUTO
         1 000005   200003 236100                    LDQ     @BUF_,,AUTO
         1 000006   000002 235000 2                  LDA     2
PL6.E3A0      #003=TCM$LTCP_READ File=TCM$SEND3.:TCA2TSI                         SUN 11/16/97 14:19 Page:35   
         1 000007   200012 757100                    STAQ    @TIMEFLAG+1,,AUTO
         1 000010   200012 630500                    EPPR0   @TIMEFLAG+1,,AUTO
         1 000011   000022 631400 xsym               EPPR1   B_VECTNIL+18
         1 000012   000000 701000 xent               TSX1    TCM$GET_LINE
         1 000013   000015 702000 1                  TSX2    s:28
         1 000014   000016 710000 1                  TRA     s:30

      113       27    2          WHENALTRETURN DO;

      114       28    2              ALTRETURN;

     28  1 000015   000000 702200 xent               TSX2  ! X66_AALT

      115       29    2              END;
      116       30    1   END TCM$LTCP_READ;

     30  1 000016   000000 702200 xent               TSX2  ! X66_ARET

(unnamed)
 Sect OctLoc
   2     000   000000 000454   000000 006000   000000 006000                    ............
      117       31        %EOD;

PL6.E3A0      #003=TCM$LTCP_READ File=TCM$SEND3.:TCA2TSI                         SUN 11/16/97 14:19 Page:36   
--  Include file information  --

   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure TCM$LTCP_READ.
PL6.E3A0      #003=TCM$LTCP_READ File=TCM$SEND3.:TCA2TSI                         SUN 11/16/97 14:19 Page:37   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     7-0-0/w PTR         r     1 @ARS                       3-0-0/w PTR         r     1 @BUF_
     6-0-0/w PTR         r     1 @EOMCHAR                   5-0-0/w PTR         r     1 @EOMTABLE
    10-0-0/w PTR         r     1 @MERR                      4-0-0/w PTR         r     1 @TIME
    11-0-0/w PTR         r     1 @TIMEFLAG                 *0-0-0/w UBIN        r     1 ARS
    *0-0-0/w STRC(72)    r     1 BUF_                      *0-0-0/c CHAR        r     1 EOMCHAR
    *0-0-0/b BIT         r     1 EOMTABLE(0:287)           *0-0-0/w UBIN        r     1 MERR
    *0-0-0/w SBIN        r     1 TIME                      *0-0-0/b BIT         r     1 TIMEFLAG

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN        r     1 TCM_CMD_LCN


   Procedure TCM$LTCP_READ requires 15 words for executable code.
   Procedure TCM$LTCP_READ requires 14 words of local(AUTO) storage.
PL6.E3A0      #003=TCM$LTCP_READ File=TCM$SEND3.:TCA2TSI                         SUN 11/16/97 14:19 Page:38   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=TCM$LTCP_READ File=TCM$SEND3.:TCA2TSI                         SUN 11/16/97 14:19 Page:39   
          MINI XREF LISTING

ARS
        18**DCL         7--PROC       26<>CALL
BUF_
         8**DCL         7--PROC       26<>CALL
EOMCHAR
        16**DCL         7--PROC       17--REDEF
EOMTABLE
        15**DCL         7--PROC
MERR
        19**DCL         7--PROC
TCM$GET_LINE
        24**DCL-ENT    26--CALL
TCM_CMD_LCN
        23**DCL        26<>CALL
TIME
        12**DCL         7--PROC
TIMEFLAG
        20**DCL         7--PROC
PL6.E3A0      #003=TCM$LTCP_READ File=TCM$SEND3.:TCA2TSI                         SUN 11/16/97 14:19 Page:40   
              *** CROSS REFERENCE LISTING ***
    **     DENOTES     IDENTIFIER DEFINITION
    <<                 IDENTIFIER'S VALUE SET
    >>                 IDENTIFIER'S VALUE USED
    <>                 IDENTIFIER SET AND/OR USED
    --                 IDENTIFIER REFERENCED
PL6.E3A0      #003=TCM$LTCP_READ File=TCM$SEND3.:TCA2TSI                         SUN 11/16/97 14:19 Page:41   
              MINI UREF LISTING

BIT9      14**DCL
EOMUBIN      17**DCL
TBIN      13**DCL
TCM$LTCP_READ       7**PROC

PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:42   
      118        1        /*T***********************************************************/
      119        2        /*T*                                                         */
      120        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      121        4        /*T*                                                         */
      122        5        /*T***********************************************************/
      123        6
      124        7        TCM$GET_LINE: PROC(LCN, BUF_, ARS,  TIMEOUT) ALTRET;
      125        8        %INCLUDE CP_6;
      126       89        %INCLUDE TCP_HEP_M;
      127      144        %INCLUDE TCT_TELNET_E;
      128      199
      129      200    1   DCL LCN UBIN(36);
      130      201    1   DCL BUF_ VECTOR;
      131      202    1   DCL ARS UBIN(36);
      132      203    1   DCL TIMEOUT UBIN(36);
      133      204    1   DCL C CHAR(1) BASED;
      134      205    1   DCL INDX UBIN(36) STATIC INIT(0);
      135      206    1   DCL OUT_INDX UBIN(36) STATIC INIT(0);
      136      207    1   DCL IN_PROGRESS BIT(1) STATIC INIT('0'B);
      137      208    1   DCL REMOTE_IAC BIT(1) STATIC INIT('0'B);
      138      209    1   DCL REMOTE_OPTION BIT(1) STATIC INIT('0'B);
      139      210    1   DCL TELNET_INBUF CHAR(1600) STATIC;
      140      211    1   DCL OUT$ PTR STATIC;
      141      212    1   DCL IN$ PTR STATIC;
      142      213    1   DCL BUFL UBIN(36) STATIC INIT(0);
      143      214    1   DCL TO_USER$ PTR STATIC;
      144      215    1   DCL DONE BIT(1);
      145      216    1   DCL CRFLAG BIT(1) STATIC INIT('0'B);
      146      217    1   DCL I UBIN(36) STATIC;
      147      218    1   DCL CHARN CHAR(CHARNLEN) BASED;
      148      219    1   DCL CHARNLEN UBIN(36) STATIC;
      149      220        /* Called to return a <crlf> terminated string for the given lcn */
      150      221    1   DCL LOOP BIT(1);
      151      222    1   DCL MAX_BYTES UBIN(36) STATIC;
      152      223    1   DCL TCP$USER_TIMEOUT ENTRY(1);
      153      224
      154      225    1      TO_USER$ = VBASE(BUF_);
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:43   
      155      226    1      MAX_BYTES = VBOUND(BUF_)+1;
      156      227
      157      228    1      DONE = '0'B;
      158      229    1      ARS = 0;
      159      230
      160      231    1      CALL TCP$USER_TIMEOUT(TIMEOUT);
      161      232    2      DO WHILE ((NOT DONE) AND (ARS<MAX_BYTES));
      162      233    2          IF BUFL=0
      163      234    3          THEN DO;
      164      235    4              CALL TELNET_INPUT WHENALTRETURN DO;
      165      236    4                  ALTRETURN;
      166      237    4                  END;
      167      238                                /* Telnet characters are in TELNET_BUF,
      168      239                                    count is in bufl */
      169      240    3              IN$ = ADDR(TELNET_INBUF);
      170      241    3              END;
      171      242
      172      243    3          DO WHILE (BUFL > 0) AND (NOT DONE) AND (ARS<MAX_BYTES);
      173      244        /*         IF CRFLAG THEN DO; SUN ONLY SENDS LF */
      174      245    3                  IF IN$->C = %CP6_LF
      175      246    4                  THEN DO;
      176      247    4                      DONE = '1'B;
      177      248    4                      END;
      178      249        /*             END;*/
      179      250    3              IF IN$->C = %CP6_CR THEN CRFLAG='1'B;
      180      251    3              ELSE CRFLAG='0'B;
      181      252    3              TO_USER$->C = IN$->C;
      182      253    3              TO_USER$ = PINCRC(TO_USER$,1);
      183      254    3              ARS = ARS + 1;
      184      255    3              IN$ = PINCRC(IN$,1);
      185      256    3              BUFL = BUFL-1;
      186      257    3              END;
      187      258    2          END;
      188      259
      189      260    1      RETURN;
      190      261
      191      262
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:44   
      192      263    1   TELNET_INPUT: PROC ALTRET;
      193      264    2   DCL I UBIN(36) STATIC;
      194      265    2   DCL C CHAR(1) BASED;
      195      266        %TCP$CB (NAME=CB, STCLASS=STATIC);
      196      269    2   DCL TCP$READ ENTRY(3) ALTRET;
      197      270    2   DCL TCP$READ_NW ENTRY(3) ALTRET;
      198      271    2   DCL IP$WAIT ENTRY(2);
      199      272    2   DCL REMOTE_ADMIN ENTRY(1);
      200      273    2   DCL IP_WAIT_UETIME UBIN(36) SYMREF;
      201      274    2   DCL REMAINING_TIME UBIN(36) STATIC;
      202      275
      203      276           /* Get a buffer from tcp into TELNET_INBUF.  Filter out all
      204      277              commands and options.  Since the filtered buffer will be
      205      278              smaller, filter into the same buffer.  Remember the iac
      206      279              state */
      207      280
      208      281    2      BUFL = 0;
      209      282    2      IN$ = ADDR(TELNET_INBUF);
      210      283    2      OUT$ = IN$;
      211      284    3      IF ADDR(TIMEOUT) ~= ADDR(NIL) AND TIMEOUT > 0 THEN DO;
      212      285    3         CALL TCP$READ_NW (LCN, VECTOR(TELNET_INBUF), CB) ALTRET (RETALT);
      213      286    3         CALL IP$WAIT (TIMEOUT);
      214      287    3         IF NOT CB.READ_COMPLETE THEN
      215      288    3   RETALT:
      216      289    3            ALTRETURN;
      217      290    3         END;
      218      291    2      ELSE
      219      292    2         CALL TCP$READ (LCN, VECTOR(TELNET_INBUF), CB) ALTRET (RETALT);
      220      293
      221      294    3      IF CB.ADMIN THEN DO;
      222      295        /*     Call REMOTE_ADMIN(ADDR(TELNET_INBUF)); */
      223      296    3          ALTRETURN;
      224      297    3          END;
      225      298    3      DO I=1 TO CB.ARS;
      226      299    3          IF REMOTE_IAC
      227      300    4          THEN DO;
      228      301    4              REMOTE_IAC = '0'B;
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:45   
      229      302    5              DO SELECT (IN$->C);
      230      303    5               SELECT (%TELNET_IAC);
      231      304    5                  BUFL = BUFL+1;
      232      305    5                  OUT$->C = %TELNET_IAC;
      233      306    5                  OUT$ = PINCRC(OUT$,1);
      234      307
      235      308    5               SELECT (%TELNET_WILL, %TELNET_WONT,
      236      309    5                        %TELNET_DO, %TELNET_DONT);
      237      310    5                  REMOTE_OPTION = '1'B;
      238      311
      239      312    5               SELECT (ELSE);
      240      313                                                /* Ignore all commands */
      241      314    5                  END;
      242      315    4              END;
      243      316
      244      317    3          ELSE IF REMOTE_OPTION
      245      318    4              THEN DO;
      246      319    4                  REMOTE_OPTION = '0'B;
      247      320                                                /* Ignore all options */
      248      321    4                  END;
      249      322
      250      323    4              ELSE DO;
      251      324
      252      325    4                  IF IN$->C = %TELNET_IAC
      253      326    4                  THEN REMOTE_IAC = '1'B;
      254      327    5                  ELSE DO;
      255      328    5                      OUT$->C = IN$->C;
      256      329    5                      BUFL = BUFL + 1;
      257      330    5                      OUT$ = PINCRC(OUT$,1);
      258      331    5                      END;
      259      332    4                  END;
      260      333
      261      334    3          IN$ = PINCRC(IN$,1);
      262      335
      263      336    3          END;                             /* Do to CB.ARS */
      264      337
      265      338
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:46   
      266      339    2   END TELNET_INPUT;
      267      340    1   END TCM$GET_LINE;
      268      341
      269      342        %EOD;

PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:47   
--  Include file information  --

   TCT_TELNET_E.:TCA2TOU  is referenced.
   TCP_HEP_M.:TCA2TOU  cannot be made into a system file and is referenced.
   CP_6.:LIBRARY  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure TCM$GET_LINE.

   Procedure TCM$GET_LINE requires 194 words for executable code.
   Procedure TCM$GET_LINE requires 16 words of local(AUTO) storage.

PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:48   

 Object Unit name= TCM$GET_LINE                               File name= TCM$SEND3.:TCA2TOU
 UTS= NOV 16 '97 14:19:43.68 SUN                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none   420    644  TCM$GET_LINE
    2   Proc  even  none   194    302  TCM$GET_LINE
    3  RoData even  none    12     14  TCM$GET_LINE

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes    yes     yes      Std        4  TCM$GET_LINE

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       1 TCP$USER_TIMEOUT
 yes     yes           Std       3 TCP$READ_NW
         yes           Std       2 IP$WAIT
 yes     yes           Std       3 TCP$READ
                       nStd      0 X66_AUTO_4
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:49   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:50   


      118        1        /*T***********************************************************/
      119        2        /*T*                                                         */
      120        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      121        4        /*T*                                                         */
      122        5        /*T***********************************************************/
      123        6
      124        7        TCM$GET_LINE: PROC(LCN, BUF_, ARS,  TIMEOUT) ALTRET;

      7  2 000000   000000 700200 xent  TCM$GET_LINE TSX0  ! X66_AUTO_4
         2 000001   000020 000004                    ZERO    16,4

      125        8        %INCLUDE CP_6;
      126       89        %INCLUDE TCP_HEP_M;
      127      144        %INCLUDE TCT_TELNET_E;
      128      199
      129      200    1   DCL LCN UBIN(36);
      130      201    1   DCL BUF_ VECTOR;
      131      202    1   DCL ARS UBIN(36);
      132      203    1   DCL TIMEOUT UBIN(36);
      133      204    1   DCL C CHAR(1) BASED;
      134      205    1   DCL INDX UBIN(36) STATIC INIT(0);
      135      206    1   DCL OUT_INDX UBIN(36) STATIC INIT(0);
      136      207    1   DCL IN_PROGRESS BIT(1) STATIC INIT('0'B);
      137      208    1   DCL REMOTE_IAC BIT(1) STATIC INIT('0'B);
      138      209    1   DCL REMOTE_OPTION BIT(1) STATIC INIT('0'B);
      139      210    1   DCL TELNET_INBUF CHAR(1600) STATIC;
      140      211    1   DCL OUT$ PTR STATIC;
      141      212    1   DCL IN$ PTR STATIC;
      142      213    1   DCL BUFL UBIN(36) STATIC INIT(0);
      143      214    1   DCL TO_USER$ PTR STATIC;
      144      215    1   DCL DONE BIT(1);
      145      216    1   DCL CRFLAG BIT(1) STATIC INIT('0'B);
      146      217    1   DCL I UBIN(36) STATIC;
      147      218    1   DCL CHARN CHAR(CHARNLEN) BASED;
      148      219    1   DCL CHARNLEN UBIN(36) STATIC;
      149      220        /* Called to return a <crlf> terminated string for the given lcn */
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:51   
      150      221    1   DCL LOOP BIT(1);
      151      222    1   DCL MAX_BYTES UBIN(36) STATIC;
      152      223    1   DCL TCP$USER_TIMEOUT ENTRY(1);
      153      224
      154      225    1      TO_USER$ = VBASE(BUF_);

    225  2 000002   200004 470500                    LDP0    @BUF_,,AUTO
         2 000003   000001 236100                    LDQ     1,,PR0
         2 000004   000630 756000 1                  STQ     TO_USER$

      155      226    1      MAX_BYTES = VBOUND(BUF_)+1;

    226  2 000005   000000 236100                    LDQ     0,,PR0
         2 000006   000020 772000                    QRL     16
         2 000007   000001 036007                    ADLQ    1,DL
         2 000010   000634 756000 1                  STQ     MAX_BYTES

      156      227
      157      228    1      DONE = '0'B;

    228  2 000011   200007 450100                    STZ     DONE,,AUTO

      158      229    1      ARS = 0;

    229  2 000012   200005 471500                    LDP1    @ARS,,AUTO
         2 000013   100000 450100                    STZ     0,,PR1

      159      230
      160      231    1      CALL TCP$USER_TIMEOUT(TIMEOUT);

    231  2 000014   200006 630500                    EPPR0   @TIMEOUT,,AUTO
         2 000015   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000016   000000 701000 xent               TSX1    TCP$USER_TIMEOUT
         2 000017   000000 011000                    NOP     0

      161      232    2      DO WHILE ((NOT DONE) AND (ARS<MAX_BYTES));

PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:52   
    232  2 000020   000102 710000 2                  TRA     s:258

      162      233    2          IF BUFL=0

    233  2 000021   000627 235000 1                  LDA     BUFL
         2 000022   000031 601000 2                  TNZ     s:243

      163      234    3          THEN DO;

      164      235    4              CALL TELNET_INPUT WHENALTRETURN DO;

    235  2 000023   000111 701000 2                  TSX1    TELNET_INPUT
         2 000024   000026 702000 2                  TSX2    s:236
         2 000025   000027 710000 2                  TRA     s:240

      165      236    4                  ALTRETURN;

    236  2 000026   000000 702200 xent               TSX2  ! X66_AALT

      166      237    4                  END;
      167      238                                /* Telnet characters are in TELNET_BUF,
      168      239                                    count is in bufl */
      169      240    3              IN$ = ADDR(TELNET_INBUF);

    240  2 000027   000000 236000 3                  LDQ     0
         2 000030   000626 756000 1                  STQ     IN$

      170      241    3              END;

      171      242
      172      243    3          DO WHILE (BUFL > 0) AND (NOT DONE) AND (ARS<MAX_BYTES);

    243  2 000031   000072 710000 2                  TRA     s:257

      173      244        /*         IF CRFLAG THEN DO; SUN ONLY SENDS LF */
      174      245    3                  IF IN$->C = %CP6_LF

PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:53   
    245  2 000032   000626 470400 1                  LDP0    IN$
         2 000033   040000 106500                    CMPC    fill='040'O
         2 000034   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         2 000035   000001 000001 3                  ADSC9   1                        cn=0,n=1
         2 000036   000041 601000 2                  TNZ     s:250

      175      246    4                  THEN DO;

      176      247    4                      DONE = '1'B;

    247  2 000037   400000 236003                    LDQ     -131072,DU
         2 000040   200007 756100                    STQ     DONE,,AUTO

      177      248    4                      END;

      178      249        /*             END;*/
      179      250    3              IF IN$->C = %CP6_CR THEN CRFLAG='1'B;

    250  2 000041   040000 106500                    CMPC    fill='040'O
         2 000042   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         2 000043   000002 000001 3                  ADSC9   2                        cn=0,n=1
         2 000044   000050 601000 2                  TNZ     s:251

    250  2 000045   400000 236003                    LDQ     -131072,DU
         2 000046   000631 756000 1                  STQ     CRFLAG
         2 000047   000051 710000 2                  TRA     s:252

      180      251    3              ELSE CRFLAG='0'B;

    251  2 000050   000631 450000 1                  STZ     CRFLAG

      181      252    3              TO_USER$->C = IN$->C;

    252  2 000051   000630 471400 1                  LDP1    TO_USER$
         2 000052   040100 100500                    MLR     fill='040'O
         2 000053   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         2 000054   100000 000001                    ADSC9   0,,PR1                   cn=0,n=1
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:54   

      182      253    3              TO_USER$ = PINCRC(TO_USER$,1);

    253  2 000055   000630 236000 1                  LDQ     TO_USER$
         2 000056   200000 036007                    ADLQ    65536,DL
         2 000057   000630 756000 1                  STQ     TO_USER$

      183      254    3              ARS = ARS + 1;

    254  2 000060   200005 471500                    LDP1    @ARS,,AUTO
         2 000061   100000 235100                    LDA     0,,PR1
         2 000062   000001 035007                    ADLA    1,DL
         2 000063   100000 755100                    STA     0,,PR1

      184      255    3              IN$ = PINCRC(IN$,1);

    255  2 000064   000626 236000 1                  LDQ     IN$
         2 000065   200000 036007                    ADLQ    65536,DL
         2 000066   000626 756000 1                  STQ     IN$

      185      256    3              BUFL = BUFL-1;

    256  2 000067   000627 235000 1                  LDA     BUFL
         2 000070   000001 135007                    SBLA    1,DL
         2 000071   000627 755000 1                  STA     BUFL

      186      257    3              END;

    257  2 000072   000627 235000 1                  LDA     BUFL
         2 000073   000102 600000 2                  TZE     s:258
         2 000074   200007 234100                    SZN     DONE,,AUTO
         2 000075   000102 604000 2                  TMI     s:258
         2 000076   200005 470500                    LDP0    @ARS,,AUTO
         2 000077   000000 236100                    LDQ     0,,PR0
         2 000100   000634 116000 1                  CMPQ    MAX_BYTES
         2 000101   000032 602000 2                  TNC     s:245

PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:55   
      187      258    2          END;

    258  2 000102   200007 234100                    SZN     DONE,,AUTO
         2 000103   000110 604000 2                  TMI     s:260
         2 000104   200005 470500                    LDP0    @ARS,,AUTO
         2 000105   000000 236100                    LDQ     0,,PR0
         2 000106   000634 116000 1                  CMPQ    MAX_BYTES
         2 000107   000021 602000 2                  TNC     s:233

      188      259
      189      260    1      RETURN;

    260  2 000110   000000 702200 xent               TSX2  ! X66_ARET

      190      261
      191      262
      192      263    1   TELNET_INPUT: PROC ALTRET;

    263  2 000111   200012 741300       TELNET_INPUT STX1  ! DONE+3,,AUTO

      193      264    2   DCL I UBIN(36) STATIC;
      194      265    2   DCL C CHAR(1) BASED;
      195      266        %TCP$CB (NAME=CB, STCLASS=STATIC);
      196      269    2   DCL TCP$READ ENTRY(3) ALTRET;
      197      270    2   DCL TCP$READ_NW ENTRY(3) ALTRET;
      198      271    2   DCL IP$WAIT ENTRY(2);
      199      272    2   DCL REMOTE_ADMIN ENTRY(1);
      200      273    2   DCL IP_WAIT_UETIME UBIN(36) SYMREF;
      201      274    2   DCL REMAINING_TIME UBIN(36) STATIC;
      202      275
      203      276           /* Get a buffer from tcp into TELNET_INBUF.  Filter out all
      204      277              commands and options.  Since the filtered buffer will be
      205      278              smaller, filter into the same buffer.  Remember the iac
      206      279              state */
      207      280
      208      281    2      BUFL = 0;

PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:56   
    281  2 000112   000627 450000 1                  STZ     BUFL

      209      282    2      IN$ = ADDR(TELNET_INBUF);

    282  2 000113   000000 236000 3                  LDQ     0
         2 000114   000626 756000 1                  STQ     IN$

      210      283    2      OUT$ = IN$;

    283  2 000115   000625 756000 1                  STQ     OUT$

      211      284    3      IF ADDR(TIMEOUT) ~= ADDR(NIL) AND TIMEOUT > 0 THEN DO;

    284  2 000116   200006 236100                    LDQ     @TIMEOUT,,AUTO
         2 000117   000001 116000 xsym               CMPQ    B_VECTNIL+1
         2 000120   000145 600000 2                  TZE     s:292
         2 000121   200006 470500                    LDP0    @TIMEOUT,,AUTO
         2 000122   000000 235100                    LDA     0,,PR0
         2 000123   000145 600000 2                  TZE     s:292

      212      285    3         CALL TCP$READ_NW (LCN, VECTOR(TELNET_INBUF), CB) ALTRET (RETALT);

    285  2 000124   000003 236000 3                  LDQ     3
         2 000125   200016 756100                    STQ     DONE+7,,AUTO
         2 000126   000006 236000 3                  LDQ     6
         2 000127   200003 235100                    LDA     @LCN,,AUTO
         2 000130   200014 757100                    STAQ    DONE+5,,AUTO
         2 000131   200014 630500                    EPPR0   DONE+5,,AUTO
         2 000132   000021 631400 xsym               EPPR1   B_VECTNIL+17
         2 000133   000000 701000 xent               TSX1    TCP$READ_NW
         2 000134   000143 702000 2                  TSX2    RETALT

      213      286    3         CALL IP$WAIT (TIMEOUT);

    286  2 000135   200006 630500                    EPPR0   @TIMEOUT,,AUTO
         2 000136   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000137   000000 701000 xent               TSX1    IP$WAIT
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:57   
         2 000140   000000 011000                    NOP     0

      214      287    3         IF NOT CB.READ_COMPLETE THEN

    287  2 000141   000641 234000 1                  SZN     CB+3
         2 000142   000156 604000 2                  TMI     s:294

      215      288    3   RETALT:
      216      289    3            ALTRETURN;

    289  2 000143   200012 221300       RETALT       LDX1  ! DONE+3,,AUTO
         2 000144   000000 702211                    TSX2  ! 0,X1

      217      290    3         END;
      218      291    2      ELSE
      219      292    2         CALL TCP$READ (LCN, VECTOR(TELNET_INBUF), CB) ALTRET (RETALT);

    292  2 000145   000003 236000 3                  LDQ     3
         2 000146   200016 756100                    STQ     DONE+7,,AUTO
         2 000147   000006 236000 3                  LDQ     6
         2 000150   200003 235100                    LDA     @LCN,,AUTO
         2 000151   200014 757100                    STAQ    DONE+5,,AUTO
         2 000152   200014 630500                    EPPR0   DONE+5,,AUTO
         2 000153   000021 631400 xsym               EPPR1   B_VECTNIL+17
         2 000154   000000 701000 xent               TSX1    TCP$READ
         2 000155   000143 702000 2                  TSX2    RETALT

      220      293
      221      294    3      IF CB.ADMIN THEN DO;

    294  2 000156   000636 234000 1                  SZN     CB
         2 000157   000162 605000 2                  TPL     s:298

      222      295        /*     Call REMOTE_ADMIN(ADDR(TELNET_INBUF)); */
      223      296    3          ALTRETURN;

    296  2 000160   200012 221300                    LDX1  ! DONE+3,,AUTO
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:58   
         2 000161   000000 702211                    TSX2  ! 0,X1

      224      297    3          END;
      225      298    3      DO I=1 TO CB.ARS;

    298  2 000162   000001 235007                    LDA     1,DL
         2 000163   000635 755000 1                  STA     I
         2 000164   000275 710000 2                  TRA     s:336+3

      226      299    3          IF REMOTE_IAC

    299  2 000165   000003 234000 1                  SZN     REMOTE_IAC
         2 000166   000241 605000 2                  TPL     s:317

      227      300    4          THEN DO;

      228      301    4              REMOTE_IAC = '0'B;

    301  2 000167   000003 450000 1                  STZ     REMOTE_IAC

      229      302    5              DO SELECT (IN$->C);

    302  2 000170   000626 470400 1                  LDP0    IN$
         2 000171   040000 106500                    CMPC    fill='040'O
         2 000172   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         2 000173   000007 000001 3                  ADSC9   7                        cn=0,n=1
         2 000174   000215 602000 2                  TNC     s:302+21
         2 000175   000235 600000 2                  TZE     s:310
         2 000176   040000 106500                    CMPC    fill='040'O
         2 000177   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         2 000200   000010 000001 3                  ADSC9   8                        cn=0,n=1
         2 000201   000210 602000 2                  TNC     s:302+16
         2 000202   000235 600000 2                  TZE     s:310
         2 000203   040000 106500                    CMPC    fill='040'O
         2 000204   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         2 000205   000011 000001 3                  ADSC9   9                        cn=0,n=1
         2 000206   000240 601000 2                  TNZ     s:315
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:59   
         2 000207   000222 710000 2                  TRA     s:304
         2 000210   040000 106500                    CMPC    fill='040'O
         2 000211   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         2 000212   000012 000001 3                  ADSC9   10                       cn=0,n=1
         2 000213   000240 601000 2                  TNZ     s:315
         2 000214   000235 710000 2                  TRA     s:310
         2 000215   040000 106500                    CMPC    fill='040'O
         2 000216   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         2 000217   000013 000001 3                  ADSC9   11                       cn=0,n=1
         2 000220   000240 601000 2                  TNZ     s:315
         2 000221   000235 710000 2                  TRA     s:310

      230      303    5               SELECT (%TELNET_IAC);

      231      304    5                  BUFL = BUFL+1;

    304  2 000222   000627 235000 1                  LDA     BUFL
         2 000223   000001 035007                    ADLA    1,DL
         2 000224   000627 755000 1                  STA     BUFL

      232      305    5                  OUT$->C = %TELNET_IAC;

    305  2 000225   000625 471400 1                  LDP1    OUT$
         2 000226   040100 100400                    MLR     fill='040'O
         2 000227   000011 000001 3                  ADSC9   9                        cn=0,n=1
         2 000230   100000 000001                    ADSC9   0,,PR1                   cn=0,n=1

      233      306    5                  OUT$ = PINCRC(OUT$,1);

    306  2 000231   000625 236000 1                  LDQ     OUT$
         2 000232   200000 036007                    ADLQ    65536,DL
         2 000233   000625 756000 1                  STQ     OUT$
         2 000234   000267 710000 2                  TRA     s:334

      234      307
      235      308    5               SELECT (%TELNET_WILL, %TELNET_WONT,

PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:60   
      236      309    5                        %TELNET_DO, %TELNET_DONT);
      237      310    5                  REMOTE_OPTION = '1'B;

    310  2 000235   400000 236003                    LDQ     -131072,DU
         2 000236   000004 756000 1                  STQ     REMOTE_OPTION
         2 000237   000267 710000 2                  TRA     s:334

      238      311
      239      312    5               SELECT (ELSE);

      240      313                                                /* Ignore all commands */
      241      314    5                  END;

      242      315    4              END;

    315  2 000240   000267 710000 2                  TRA     s:334

      243      316
      244      317    3          ELSE IF REMOTE_OPTION

    317  2 000241   000004 234000 1                  SZN     REMOTE_OPTION
         2 000242   000245 605000 2                  TPL     s:325

      245      318    4              THEN DO;

      246      319    4                  REMOTE_OPTION = '0'B;

    319  2 000243   000004 450000 1                  STZ     REMOTE_OPTION

      247      320                                                /* Ignore all options */
      248      321    4                  END;

    321  2 000244   000267 710000 2                  TRA     s:334

      249      322
      250      323    4              ELSE DO;

PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:61   
      251      324
      252      325    4                  IF IN$->C = %TELNET_IAC

    325  2 000245   000626 470400 1                  LDP0    IN$
         2 000246   040000 106500                    CMPC    fill='040'O
         2 000247   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         2 000250   000011 000001 3                  ADSC9   9                        cn=0,n=1
         2 000251   000255 601000 2                  TNZ     s:328

      253      326    4                  THEN REMOTE_IAC = '1'B;

    326  2 000252   400000 236003                    LDQ     -131072,DU
         2 000253   000003 756000 1                  STQ     REMOTE_IAC
         2 000254   000267 710000 2                  TRA     s:334

      254      327    5                  ELSE DO;

      255      328    5                      OUT$->C = IN$->C;

    328  2 000255   000625 471400 1                  LDP1    OUT$
         2 000256   040100 100500                    MLR     fill='040'O
         2 000257   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         2 000260   100000 000001                    ADSC9   0,,PR1                   cn=0,n=1

      256      329    5                      BUFL = BUFL + 1;

    329  2 000261   000627 235000 1                  LDA     BUFL
         2 000262   000001 035007                    ADLA    1,DL
         2 000263   000627 755000 1                  STA     BUFL

      257      330    5                      OUT$ = PINCRC(OUT$,1);

    330  2 000264   000625 236000 1                  LDQ     OUT$
         2 000265   200000 036007                    ADLQ    65536,DL
         2 000266   000625 756000 1                  STQ     OUT$

      258      331    5                      END;
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:62   

      259      332    4                  END;

      260      333
      261      334    3          IN$ = PINCRC(IN$,1);

    334  2 000267   000626 236000 1                  LDQ     IN$
         2 000270   200000 036007                    ADLQ    65536,DL
         2 000271   000626 756000 1                  STQ     IN$

      262      335
      263      336    3          END;                             /* Do to CB.ARS */

    336  2 000272   000635 235000 1                  LDA     I
         2 000273   000001 035007                    ADLA    1,DL
         2 000274   000635 755000 1                  STA     I
         2 000275   000637 236000 1                  LDQ     CB+1
         2 000276   000635 116000 1                  CMPQ    I
         2 000277   000165 603000 2                  TRC     s:299

      264      337
      265      338
      266      339    2   END TELNET_INPUT;

    339  2 000300   200012 221300                    LDX1  ! DONE+3,,AUTO
         2 000301   000001 702211                    TSX2  ! 1,X1

(unnamed)
 Sect OctLoc
   1     000   000000 000000   000000 000000   0***** ******                    ............

REMOTE_IAC
 Sect OctLoc
   1     003   0***** ******                                                    ....

REMOTE_OPTION
 Sect OctLoc
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:63   
   1     004   0***** ******                                                    ....

TELNET_INBUF
 Sect OctLoc
   1     005   ****** ******   ****** ******   ****** ******   ****** ******    ................

BUFL
 Sect OctLoc
   1     627   000000 000000                                                    ....

CRFLAG
 Sect OctLoc
   1     631   0***** ******                                                    ....

CB
 Sect OctLoc
   1     636   ****** ******   ****** ******   ****** ******   ****** ******    ................

(unnamed)
 Sect OctLoc
   3     000   000005 006000   012040 040040   015040 040040   000636 006000    .....   .   ....
   3     004   000617 777640   000005 006000   000004 006000   374040 040040    .............
   3     010   376040 040040   377040 040040   375040 040040   373040 040040    .   .   .   .
      267      340    1   END TCM$GET_LINE;
      268      341
      269      342        %EOD;

PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:64   
--  Include file information  --

   TCT_TELNET_E.:TCA2TOU  is referenced.
   TCP_HEP_M.:TCA2TOU  cannot be made into a system file and is referenced.
   CP_6.:LIBRARY  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure TCM$GET_LINE.
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:65   

 **** Variables and constants ****

  ****  Section 001  Data  TCM$GET_LINE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

   627-0-0/w UBIN        r     1 BUFL                     636-0-0/w STRC(180)   r     1 CB
   633-0-0/w UBIN        r     1 CHARNLEN                 631-0-0/b BIT         r     1 CRFLAG
   635-0-0/w UBIN        r     1 I                        626-0-0/w PTR         r     1 IN$
   634-0-0/w UBIN        r     1 MAX_BYTES                625-0-0/w PTR         r     1 OUT$
     3-0-0/b BIT         r     1 REMOTE_IAC                 4-0-0/b BIT         r     1 REMOTE_OPTION
     5-0-0/c CHAR(1600)  r     1 TELNET_INBUF             630-0-0/w PTR         r     1 TO_USER$

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     5-0-0/w PTR         r     1 @ARS                       4-0-0/w PTR         r     1 @BUF_
     3-0-0/w PTR         r     1 @LCN                       6-0-0/w PTR         r     1 @TIMEOUT
    *0-0-0/w UBIN        r     1 ARS                       *0-0-0/d VECT        r     1 BUF_
     7-0-0/b BIT         r     1 DONE                      *0-0-0/w UBIN        r     1 LCN
    *0-0-0/w UBIN        r     1 TIMEOUT

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR        r     1 C                          0-0-0/c CHAR        r     1 C


   Procedure TCM$GET_LINE requires 194 words for executable code.
   Procedure TCM$GET_LINE requires 16 words of local(AUTO) storage.
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:66   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:67   
          MINI XREF LISTING

ARS
       202**DCL         7--PROC      229<<ASSIGN    232>>DOWHILE   243>>DOWHILE   254<<ASSIGN    254>>ASSIGN
BUFL
       213**DCL       233>>IF        243>>DOWHILE   256<<ASSIGN    256>>ASSIGN    281<<ASSIGN    304<<ASSIGN
       304>>ASSIGN    329<<ASSIGN    329>>ASSIGN
BUF_
       201**DCL         7--PROC      225>>ASSIGN    226>>ASSIGN
C
       204**DCL       245>>IF        250>>IF        252<<ASSIGN    252>>ASSIGN
C IN PROCEDURE TELNET_INPUT
       265**DCL       302>>DOSELCT   305<<ASSIGN    325>>IF        328<<ASSIGN    328>>ASSIGN
CB IN PROCEDURE TELNET_INPUT
       267**DCL       285<>CALL      292<>CALL
CB.ADMIN IN PROCEDURE TELNET_INPUT
       267**DCL       294>>IF
CB.ARS IN PROCEDURE TELNET_INPUT
       267**DCL       298>>DOINDEX
CB.READ_COMPLETE IN PROCEDURE TELNET_INPUT
       267**DCL       287>>IF
CHARNLEN
       219**DCL       218--IMP-SIZ
CRFLAG
       216**DCL       250<<ASSIGN    251<<ASSIGN
DONE
       215**DCL       228<<ASSIGN    232>>DOWHILE   243>>DOWHILE   247<<ASSIGN
I IN PROCEDURE TELNET_INPUT
       264**DCL       298<<DOINDEX
IN$
       212**DCL       240<<ASSIGN    245>>IF        250>>IF        252>>ASSIGN    255<<ASSIGN    255>>ASSIGN
       282<<ASSIGN    283>>ASSIGN    302>>DOSELCT   325>>IF        328>>ASSIGN    334<<ASSIGN    334>>ASSIGN
IP$WAIT IN PROCEDURE TELNET_INPUT
       271**DCL-ENT   286--CALL
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:68   
LCN
       200**DCL         7--PROC      285<>CALL      292<>CALL
MAX_BYTES
       222**DCL       226<<ASSIGN    232>>DOWHILE   243>>DOWHILE
OUT$
       211**DCL       283<<ASSIGN    305>>ASSIGN    306<<ASSIGN    306>>ASSIGN    328>>ASSIGN    330<<ASSIGN
       330>>ASSIGN
REMOTE_IAC
       208**DCL       299>>IF        301<<ASSIGN    326<<ASSIGN
REMOTE_OPTION
       209**DCL       310<<ASSIGN    317>>IF        319<<ASSIGN
RETALT IN PROCEDURE TELNET_INPUT
       289**LABEL     285--CALLALT   292--CALLALT
TCP$READ IN PROCEDURE TELNET_INPUT
       269**DCL-ENT   292--CALL
TCP$READ_NW IN PROCEDURE TELNET_INPUT
       270**DCL-ENT   285--CALL
TCP$USER_TIMEOUT
       223**DCL-ENT   231--CALL
TELNET_INBUF
       210**DCL       240--ASSIGN    282--ASSIGN    285--CALL      292--CALL
TELNET_INPUT
       263**PROC      235--CALL
TIMEOUT
       203**DCL         7--PROC      231<>CALL      284--IF        284>>IF        286<>CALL
TO_USER$
       214**DCL       225<<ASSIGN    252>>ASSIGN    253<<ASSIGN    253>>ASSIGN
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:69   
              *** CROSS REFERENCE LISTING ***
    **     DENOTES     IDENTIFIER DEFINITION
    <<                 IDENTIFIER'S VALUE SET
    >>                 IDENTIFIER'S VALUE USED
    <>                 IDENTIFIER SET AND/OR USED
    --                 IDENTIFIER REFERENCED
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:70   
              MINI UREF LISTING

CHARN     218**DCL
I     217**DCL
INDX     205**DCL
IN_PROGRESS     207**DCL
IP_WAIT_UETIME IN PROCEDURE TELNET_INPUT    273**DCL
LOOP     221**DCL
M$ACCT      34**DCL-ENT
M$ACTIVATE      37**DCL-ENT
M$ALIB      30**DCL-ENT
M$ASUSER      32**DCL-ENT
M$ATTACH      39**DCL-ENT
M$BADPP      57**DCL-ENT
M$CGCTL      38**DCL-ENT
M$CGINFO      38**DCL-ENT
M$CHECK      19**DCL-ENT
M$CHGUNIT      77**DCL-ENT
M$CLOSE      17**DCL-ENT
M$CLRSTK      75**DCL-ENT
M$CMDVAR      86**DCL-ENT
M$CONFIG      47**DCL-ENT
M$CORRES      22**DCL-ENT
M$CPEXIT      31**DCL-ENT
M$CVM      55**DCL-ENT
M$CVOL      20**DCL-ENT
M$DCLFLD      47**DCL-ENT
M$DEACTIVATE      37**DCL-ENT
M$DELREC      19**DCL-ENT
M$DEQ      84**DCL-ENT
M$DETACH      39**DCL-ENT
M$DEVICE      21**DCL-ENT
M$DISPLAY      84**DCL-ENT
M$DISPRES      24**DCL-ENT
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:71   
M$DLIB      30**DCL-ENT
M$DRIBBLE      47**DCL-ENT
M$DRTN      75**DCL-ENT
M$DSUSER      32**DCL-ENT
M$ENQ      83**DCL-ENT
M$EOM      42**DCL-ENT
M$ERASE      48**DCL-ENT
M$ERR      29**DCL-ENT
M$ERRMSG      80**DCL-ENT
M$EVENT      72**DCL-ENT
M$EXHUME      81**DCL-ENT
M$EXIT      29**DCL-ENT
M$EXTEND      21**DCL-ENT
M$FDP      53**DCL-ENT
M$FDS      52**DCL-ENT
M$FEBOOT      45**DCL-ENT
M$FECTL      46**DCL-ENT
M$FEDUMP      45**DCL-ENT
M$FID      80**DCL-ENT
M$FINDPROC      34**DCL-ENT
M$FSUSER      32**DCL-ENT
M$FVP      54**DCL-ENT
M$FWCG      38**DCL-ENT
M$GBPL      58**DCL-ENT
M$GDDL      54**DCL-ENT
M$GDP      53**DCL-ENT
M$GDS      52**DCL-ENT
M$GETDCB      23**DCL-ENT
M$GETMOUSE      63**DCL-ENT
M$GETPM      64**DCL-ENT
M$GJOB      82**DCL-ENT
M$GLINEATTR      42**DCL-ENT
M$GOODPP      57**DCL-ENT
M$GPLATEN      50**DCL-ENT
M$GPROMPT      49**DCL-ENT
M$GTRMATTR      43**DCL-ENT
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:72   
M$GTRMCTL      41**DCL-ENT
M$GTRMTAB      44**DCL-ENT
M$GVP      53**DCL-ENT
M$HELP      80**DCL-ENT
M$INT      72**DCL-ENT
M$INTRTN      33**DCL-ENT
M$IOQ      68**DCL-ENT
M$JOBSTATS      82**DCL-ENT
M$KEYIN      22**DCL-ENT
M$LDEV      17**DCL-ENT
M$LDTRC      30**DCL-ENT
M$LIMIT      23**DCL-ENT
M$LINES      22**DCL-ENT
M$LINK      29**DCL-ENT
M$MADMUCK      25**DCL-ENT
M$MAKUSER      56**DCL-ENT
M$MBS      24**DCL-ENT
M$MDFFLD      48**DCL-ENT
M$MERC      73**DCL-ENT
M$MERCS      74**DCL-ENT
M$MIRROR      68**DCL-ENT
M$MONINFO      85**DCL-ENT
M$MPL      58**DCL-ENT
M$NODEINFO      49**DCL-ENT
M$NXTUSR      83**DCL-ENT
M$OCMSG      81**DCL-ENT
M$OLAY      29**DCL-ENT
M$OPEN      17**DCL-ENT
M$PAS      58**DCL-ENT
M$PATHCON      81**DCL-ENT
M$PDS      52**DCL-ENT
M$PFIL      19**DCL-ENT
M$PLATEN      43**DCL-ENT
M$PRECORD      21**DCL-ENT
M$PROCNAME      34**DCL-ENT
M$PROFILE      45**DCL-ENT
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:73   
M$PROMPT      41**DCL-ENT
M$RACST      25**DCL-ENT
M$RDSYSLOG      66**DCL-ENT
M$READ      18**DCL-ENT
M$RELDCB      23**DCL-ENT
M$RELRES      24**DCL-ENT
M$RELSTARF      26**DCL-ENT
M$REM      26**DCL-ENT
M$RENV      73**DCL-ENT
M$REQUIRE      25**DCL-ENT
M$RETRY      74**DCL-ENT
M$RETRYS      74**DCL-ENT
M$REW      20**DCL-ENT
M$RLSFLD      48**DCL-ENT
M$RPRIV      76**DCL-ENT
M$RSPP      55**DCL-ENT
M$RSWITCH      77**DCL-ENT
M$RUE      83**DCL-ENT
M$SAD      56**DCL-ENT
M$SAVE      32**DCL-ENT
M$SCON      33**DCL-ENT
M$SCREECH      31**DCL-ENT
M$SENV      73**DCL-ENT
M$SETFMA      17**DCL-ENT
M$SETFP      46**DCL-ENT
M$SINPUT      44**DCL-ENT
M$SLCFLD      49**DCL-ENT
M$SMOUSE      63**DCL-ENT
M$SMPRT      55**DCL-ENT
M$SPRIV      76**DCL-ENT
M$SSC      56**DCL-ENT
M$SSWITCH      76**DCL-ENT
M$STATE      85**DCL-ENT
M$STD      57**DCL-ENT
M$STIMER      71**DCL-ENT
M$STLPP      54**DCL-ENT
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:74   
M$STRAP      71**DCL-ENT
M$STRMATTR      43**DCL-ENT
M$STRMCTL      41**DCL-ENT
M$STRMTAB      44**DCL-ENT
M$SYMBIO      82**DCL-ENT
M$SYSCON      68**DCL-ENT
M$SYSID      86**DCL-ENT
M$TDCLOSE      67**DCL-ENT
M$TDIO      67**DCL-ENT
M$TDOPEN      66**DCL-ENT
M$TDREQCPU      67**DCL-ENT
M$TEMPWROC      61**DCL-ENT
M$TIME      84**DCL-ENT
M$TRAP      71**DCL-ENT
M$TRMISC      46**DCL-ENT
M$TRMPRG      42**DCL-ENT
M$TRTN      75**DCL-ENT
M$TRUNC      18**DCL-ENT
M$TTIMER      71**DCL-ENT
M$UC      41**DCL
M$UMPL      58**DCL-ENT
M$UNFID      80**DCL-ENT
M$UNLATCH      37**DCL-ENT
M$UNSHARE      34**DCL-ENT
M$USRFIELD      77**DCL-ENT
M$VIRTUAL      52**DCL-ENT
M$WAIT      75**DCL-ENT
M$WEOF      20**DCL-ENT
M$WRITE      18**DCL-ENT
M$WRSYSLOG      66**DCL-ENT
M$XCON      72**DCL-ENT
M$XCONRTN      33**DCL-ENT
M$XEQTIME      85**DCL-ENT
M$XFLUSH      26**DCL-ENT
M$XMOUSE      63**DCL-ENT
M$XXX      29**DCL-ENT
PL6.E3A0      #004=TCM$GET_LINE File=TCM$SEND3.:TCA2TSI                          SUN 11/16/97 14:19 Page:75   
M$YC      31**DCL-ENT
OUT_INDX     206**DCL
REMAINING_TIME IN PROCEDURE TELNET_INPUT    274**DCL
REMOTE_ADMIN IN PROCEDURE TELNET_INPUT    272**DCL-ENT
TCM$GET_LINE       7**PROC
TCP_ERR_CODE     125**DCL
TCP_MON_ERR     125**DCL

PL6.E3A0      #005=TCM$LTCP_WRITE File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:76   
      270        1        /*T***********************************************************/
      271        2        /*T*                                                         */
      272        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      273        4        /*T*                                                         */
      274        5        /*T***********************************************************/
      275        6
      276        7        TCM$LTCP_WRITE: PROC(BUF_, ERR) ALTRET;
      277        8    1   DCL BUF_ VECTOR;
      278        9    1   DCL ERR UBIN;
      279       10    1   DCL TCP$WRITE ENTRY(4) ALTRET;
      280       11    1   DCL TCM$TELNET_EOL ENTRY(1) ;
      281       12
      282       13    1   DCL TCM_CMD_LCN UBIN SYMREF;
      283       14
      284       15    1       IF BUF_ ~= VECTOR( NIL) THEN
      285       16    1           CALL TCP$WRITE(TCM_CMD_LCN, BUF_, '0'B/*NO PUSH */)
      286       17    2                   WHENALTRETURN DO;
      287       18    2                           ALTRETURN;
      288       19    2           END;
      289       20    1           CALL TCM$TELNET_EOL(TCM_CMD_LCN);
      290       21    1   END TCM$LTCP_WRITE;
      291       22
      292       23        %EOD;

PL6.E3A0      #005=TCM$LTCP_WRITE File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:77   
--  Include file information  --

   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure TCM$LTCP_WRITE.

   Procedure TCM$LTCP_WRITE requires 22 words for executable code.
   Procedure TCM$LTCP_WRITE requires 10 words of local(AUTO) storage.

PL6.E3A0      #005=TCM$LTCP_WRITE File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:78   

 Object Unit name= TCM$LTCP_WRITE                             File name= TCM$SEND3.:TCA2TOU
 UTS= NOV 16 '97 14:20:12.84 SUN                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none    22     26  TCM$LTCP_WRITE
    1  RoData even  none     4      4  TCM$LTCP_WRITE

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes    yes     yes      Std        2  TCM$LTCP_WRITE

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       4 TCP$WRITE
         yes           Std       1 TCM$TELNET_EOL
                       nStd      0 X66_AUTO_2
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     TCM_CMD_LCN                           B_VECTNIL
PL6.E3A0      #005=TCM$LTCP_WRITE File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:79   

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     NULLSID                               ISSID
PL6.E3A0      #005=TCM$LTCP_WRITE File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:80   


      270        1        /*T***********************************************************/
      271        2        /*T*                                                         */
      272        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      273        4        /*T*                                                         */
      274        5        /*T***********************************************************/
      275        6
      276        7        TCM$LTCP_WRITE: PROC(BUF_, ERR) ALTRET;

      7  0 000000   000000 700200 xent  TCM$LTCP_WR* TSX0  ! X66_AUTO_2
         0 000001   000012 000002                    ZERO    10,2

      277        8    1   DCL BUF_ VECTOR;
      278        9    1   DCL ERR UBIN;
      279       10    1   DCL TCP$WRITE ENTRY(4) ALTRET;
      280       11    1   DCL TCM$TELNET_EOL ENTRY(1) ;
      281       12
      282       13    1   DCL TCM_CMD_LCN UBIN SYMREF;
      283       14
      284       15    1       IF BUF_ ~= VECTOR( NIL) THEN

     15  0 000002   200003 470500                    LDP0    @BUF_,,AUTO
         0 000003   000000 237100                    LDAQ    0,,PR0
         0 000004   000000 117000 1                  CMPAQ   0
         0 000005   000021 600000 0                  TZE     s:20

      285       16    1           CALL TCP$WRITE(TCM_CMD_LCN, BUF_, '0'B/*NO PUSH */)

     16  0 000006   000002 236000 1                  LDQ     2
         0 000007   200010 756100                    STQ     @ERR+4,,AUTO
         0 000010   200003 236100                    LDQ     @BUF_,,AUTO
         0 000011   000003 235000 1                  LDA     3
         0 000012   200006 757100                    STAQ    @ERR+2,,AUTO
         0 000013   200006 630500                    EPPR0   @ERR+2,,AUTO
         0 000014   000021 631400 xsym               EPPR1   B_VECTNIL+17
         0 000015   000000 701000 xent               TSX1    TCP$WRITE
         0 000016   000020 702000 0                  TSX2    s:18
PL6.E3A0      #005=TCM$LTCP_WRITE File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:81   
         0 000017   000021 710000 0                  TRA     s:20

      286       17    2                   WHENALTRETURN DO;

      287       18    2                           ALTRETURN;

     18  0 000020   000000 702200 xent               TSX2  ! X66_AALT

      288       19    2           END;
      289       20    1           CALL TCM$TELNET_EOL(TCM_CMD_LCN);

     20  0 000021   000003 630400 1                  EPPR0   3
         0 000022   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000023   000000 701000 xent               TSX1    TCM$TELNET_EOL
         0 000024   000000 011000                    NOP     0

      290       21    1   END TCM$LTCP_WRITE;

     21  0 000025   000000 702200 xent               TSX2  ! X66_ARET

(unnamed)
 Sect OctLoc
   1     000   000000 177640   000000 006014   000002 006000   000000 006000    ................
      291       22
      292       23        %EOD;

PL6.E3A0      #005=TCM$LTCP_WRITE File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:82   
--  Include file information  --

   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure TCM$LTCP_WRITE.
PL6.E3A0      #005=TCM$LTCP_WRITE File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:83   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @BUF_                      4-0-0/w PTR         r     1 @ERR
    *0-0-0/d VECT        r     1 BUF_                      *0-0-0/w UBIN        r     1 ERR

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN        r     1 TCM_CMD_LCN


   Procedure TCM$LTCP_WRITE requires 22 words for executable code.
   Procedure TCM$LTCP_WRITE requires 10 words of local(AUTO) storage.
PL6.E3A0      #005=TCM$LTCP_WRITE File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:84   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #005=TCM$LTCP_WRITE File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:85   
          MINI XREF LISTING

BUF_
         8**DCL         7--PROC       15>>IF         16<>CALL
ERR
         9**DCL         7--PROC
TCM$TELNET_EOL
        11**DCL-ENT    20--CALL
TCM_CMD_LCN
        13**DCL        16<>CALL       20<>CALL
TCP$WRITE
        10**DCL-ENT    16--CALL
PL6.E3A0      #005=TCM$LTCP_WRITE File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:86   
              *** CROSS REFERENCE LISTING ***
    **     DENOTES     IDENTIFIER DEFINITION
    <<                 IDENTIFIER'S VALUE SET
    >>                 IDENTIFIER'S VALUE USED
    <>                 IDENTIFIER SET AND/OR USED
    --                 IDENTIFIER REFERENCED
PL6.E3A0      #005=TCM$LTCP_WRITE File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:87   
              MINI UREF LISTING

TCM$LTCP_WRITE       7**PROC

PL6.E3A0      #006=TCM$TELNET_EOL File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:88   
      293        1        /*T***********************************************************/
      294        2        /*T*                                                         */
      295        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      296        4        /*T*                                                         */
      297        5        /*T***********************************************************/
      298        6
      299        7
      300        8
      301        9        TCM$TELNET_EOL: PROC(LCN);
      302       10    1   DCL LCN UBIN(36);
      303       11
      304       12    1   DCL 1 TCM_CRLF STATIC SYMDEF,
      305       13    1             2 * CHAR(1) INIT (BINASC(13)),
      306       14    1             2 * CHAR(1) INIT (BINASC(10));
      307       15    1   DCL TCP$WRITE ENTRY(4) ALTRET;
      308       16
      309       17    1      CALL TCP$WRITE (LCN, VECTOR(TCM_CRLF), '1'B/*Push*/ );
      310       18    1      RETURN;
      311       19    1   END TCM$TELNET_EOL;

PL6.E3A0      #006=TCM$TELNET_EOL File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:89   
--  Include file information  --

   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure TCM$TELNET_EOL.

   Procedure TCM$TELNET_EOL requires 12 words for executable code.
   Procedure TCM$TELNET_EOL requires 8 words of local(AUTO) storage.

    No errors detected in file TCM$SEND3.:TCA2TSI    .

PL6.E3A0      #006=TCM$TELNET_EOL File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:90   

 Object Unit name= TCM$TELNET_EOL                             File name= TCM$SEND3.:TCA2TOU
 UTS= NOV 16 '97 14:20:21.24 SUN                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none     1      1  TCM$TELNET_EOL
    1   Proc  even  none    12     14  TCM$TELNET_EOL
    2  RoData even  none     4      4  TCM$TELNET_EOL

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes            yes      Std        1  TCM$TELNET_EOL

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      0  TCM_CRLF

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       4 TCP$WRITE
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
PL6.E3A0      #006=TCM$TELNET_EOL File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:91   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #006=TCM$TELNET_EOL File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:92   


      293        1        /*T***********************************************************/
      294        2        /*T*                                                         */
      295        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      296        4        /*T*                                                         */
      297        5        /*T***********************************************************/
      298        6
      299        7
      300        8
      301        9        TCM$TELNET_EOL: PROC(LCN);

      9  1 000000   000000 700200 xent  TCM$TELNET_* TSX0  ! X66_AUTO_1
         1 000001   000010 000001                    ZERO    8,1

      302       10    1   DCL LCN UBIN(36);
      303       11
      304       12    1   DCL 1 TCM_CRLF STATIC SYMDEF,
      305       13    1             2 * CHAR(1) INIT (BINASC(13)),
      306       14    1             2 * CHAR(1) INIT (BINASC(10));
      307       15    1   DCL TCP$WRITE ENTRY(4) ALTRET;
      308       16
      309       17    1      CALL TCP$WRITE (LCN, VECTOR(TCM_CRLF), '1'B/*Push*/ );

     17  1 000002   000002 236000 2                  LDQ     2
         1 000003   200006 756100                    STQ     @LCN+3,,AUTO
         1 000004   000003 236000 2                  LDQ     3
         1 000005   200003 235100                    LDA     @LCN,,AUTO
         1 000006   200004 757100                    STAQ    @LCN+1,,AUTO
         1 000007   200004 630500                    EPPR0   @LCN+1,,AUTO
         1 000010   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 000011   000000 701000 xent               TSX1    TCP$WRITE
         1 000012   000000 011000                    NOP     0

      310       18    1      RETURN;

     18  1 000013   000000 702200 xent               TSX2  ! X66_ARET

PL6.E3A0      #006=TCM$TELNET_EOL File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:93   
TCM_CRLF
 Sect OctLoc
   0     000   015012 ******                                                    ....

(unnamed)
 Sect OctLoc
   2     000   000000 377640   000000 006000   000030 006000   000000 006000    ................
      311       19    1   END TCM$TELNET_EOL;

PL6.E3A0      #006=TCM$TELNET_EOL File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:94   
--  Include file information  --

   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure TCM$TELNET_EOL.
PL6.E3A0      #006=TCM$TELNET_EOL File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:95   

 **** Variables and constants ****

  ****  Section 000  Data  TCM$TELNET_EOL

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(18)    r     1 TCM_CRLF

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @LCN                      *0-0-0/w UBIN        r     1 LCN


   Procedure TCM$TELNET_EOL requires 12 words for executable code.
   Procedure TCM$TELNET_EOL requires 8 words of local(AUTO) storage.

    No errors detected in file TCM$SEND3.:TCA2TSI    .
PL6.E3A0      #006=TCM$TELNET_EOL File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:96   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #006=TCM$TELNET_EOL File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:97   
          MINI XREF LISTING

LCN
        10**DCL         9--PROC       17<>CALL
TCM_CRLF
        12**DCL        17--CALL
TCP$WRITE
        15**DCL-ENT    17--CALL
PL6.E3A0      #006=TCM$TELNET_EOL File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:98   
              *** CROSS REFERENCE LISTING ***
    **     DENOTES     IDENTIFIER DEFINITION
    <<                 IDENTIFIER'S VALUE SET
    >>                 IDENTIFIER'S VALUE USED
    <>                 IDENTIFIER SET AND/OR USED
    --                 IDENTIFIER REFERENCED
PL6.E3A0      #006=TCM$TELNET_EOL File=TCM$SEND3.:TCA2TSI                        SUN 11/16/97 14:20 Page:99   
              MINI UREF LISTING

TCM$TELNET_EOL       9**PROC
