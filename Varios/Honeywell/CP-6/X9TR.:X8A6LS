VERSION A06

PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:1    
        1        1        /*M* X9TR$ATRAP -- TRAP PROCEDURE                                    */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        X9TR$ATRAP:  PROC ASYNC ;
        8        8
        9        9        /*P*
       10       10
       11       11              NAME: X9TR$ATRAP
       12       12           PURPOSE: To output an error about the nature of the fault, and
       13       13                    resume processing at the next statement.
       14       14
       15       15        */
       16       16        /*D*
       17       17
       18       18              NAME: X9TR$ATRAP
       19       19              CALL: This is an indirect call.  First a macro is set up
       20       20                    stating that if an ARITHMETIC error occurs, call
       21       21                    X9TR$ATRAP.
       22       22
       23       23                     %FPT_TRAP(ARITHMETIC=X9TR$ATRAP,DIVIDE_CHECK=TRAP,
       24       24                               OVERFLOW=TRAP) ;
       25       25
       26       26                    Then a call to M$TRAP is made which sets up the whole
       27       27                    thing.  Then is a fault occurs, control is transfered
       28       28                    to this proc.
       29       29         INTERFACE:
       30       30                               indicator register.
       31       31                    2.) X8ER$ERROR - This is the error output routine.
       32       32                    3.) M$TRTN - This returns control to the COBOL program
       33       33                                 to the IC + IC_INCREMENT location.
       34       34                        nature of the fault.
       35       35             INPUT: None
       36       36            OUTPUT: None
       37       37           SCRATCH: None
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:2    
       38       38         REFERENCE: J. E. Heath, X8LC$DOCUMENT, CP6 - Moniter Services
       39       39                    Manual.
       40       40
       41       41        */
       42       42
       43       43    1   DCL X8CO$CONV_TO_OCTAL  ENTRY(2) ;
       44       44    1   DCL X8ER$ERROR                 ENTRY(3);
       45       45    1   DCL X9ER$PRINT_ERROR           ENTRY(1);
       46       46
       47       47
       48       48            %INCLUDE X8A_SYS_FILE ;
       49     6318            %INCLUDE B_SEGIDS_C ;
       50     6857            %INCLUDE B$JIT_C ;                                     /*#41202*/
       51     7171            %INCLUDE X8A_LIBCOM ;
       52     7391            %INCLUDE X8A_ERRCOM;
       53     7480            %INCLUDE X8A_OPCODES;
       54     7502            %INCLUDE X8A_MACROS;
       55     7759
       56     7760    1       DCL B$PTR    PTR  ;
       57     7761    1       DCL B$EXCFR$ PTR ;
       58     7762    1       DCL TEMP_IC$ PTR ;
       59     7763    1       DCL B$TCB$   PTR SYMREF ;
       60     7764    1       DCL B$JIT$   PTR SYMREF ;                              /*#41202*/
       61     7765
       62     7766    1       DCL BIN_36   UBIN WORD ;
       63     7767    1       DCL CHAR_12  CHAR(12) ;
       64     7768    1       DCL NO_OF_DSCRPTRS UBIN WORD ;
       65     7769    1       DCL IC_REL1       BIT(1) ;
       66     7770    1       DCL IC_REL2       BIT(1) ;
       67     7771    1       DCL AR1           BIT(1) ;
       68     7772    1       DCL AR2           BIT(1) ;
       69     7773    1       DCL FAULT_CODE UBIN WORD ;
       70     7774    1       DCL 1 EIS BASED(TEMP_IC$) ALIGNED,
       71     7775    1             2 GARBAGE        UBIN(2) UNAL,
       72     7776    1             2 MF3            UBIN(7) UNAL,
       73     7777    1             2 GARBAGE_2      UBIN(2) UNAL,
       74     7778    1             2 MF2            UBIN(7) UNAL,
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:3    
       75     7779    1             2 MOD_FLD2 REDEF MF2,
       76     7780    1               3 AR           BIT(1) UNAL,
       77     7781    1               3 THE_REST     UBIN(2) UNAL,
       78     7782    1               3 REG          SBIN(4) UNAL,
       79     7783    1             2 OPCODE         UBIN(9) UNAL,
       80     7784    1             2 EIS_BIT        BIT(1) UNAL,
       81     7785    1             2 INIHIBIT_BIT   UBIN(1) UNAL,
       82     7786    1             2 MF1            UBIN(7) UNAL,
       83     7787    1             2 MOD_FLD1 REDEF MF1,
       84     7788    1               3 AR           BIT(1) UNAL,
       85     7789    1               3 THE_REST     UBIN(2) UNAL,
       86     7790    1               3 REG          SBIN(4) UNAL;
       87     7791    1       DCL 1 DESC REDEF EIS ALIGNED,
       88     7792    1             2 OFFSET         UBIN(18) UNAL,
       89     7793    1             2 PTR_STFF REDEF OFFSET,
       90     7794    1               3 PR#          UBIN(3) UNAL,
       91     7795    1               3 Y            SBIN(15) UNAL,
       92     7796    1             2 CN             SBIN(3) UNAL,
       93     7797    1             2 TN             UBIN(1) UNAL,
       94     7798    1             2 SN             UBIN(2) UNAL,
       95     7799    1             2 SF             SBIN(6) UNAL,
       96     7800    1             2 N              SBIN(6) UNAL ;
       97     7801    1       DCL IC_PTR$  PTR ;
       98     7802    1       DCL 1 INSTR REDEF IC_PTR$ ALIGNED,
       99     7803    1             2 IC             UBIN(18) UNAL,
      100     7804    1             2 SEG_ID_1       BIT(6) UNAL ,
      101     7805    1             2 SEG_ID_2       BIT(12) UNAL  ;
      102     7806    1       DCL I                  SBIN WORD ;
      103     7807    1       DCL TEMP_IC2$          PTR ;
      104     7808    1       DCL 1 REL_IC REDEF TEMP_IC2$ ALIGNED,
      105     7809    1           2 IC_CN            UBIN(21) UNAL,
      106     7810    1           2 N_IC REDEF IC_CN,
      107     7811    1             3 TEMP_IC1       UBIN HALF UNAL,
      108     7812    1             3 FILL           UBIN(3) UNAL,
      109     7813    1           2 IC_BN            BIT(3) UNAL,
      110     7814    1           2 SEG_ID_2         BIT(12) UNAL ;
      111     7815    1       DCL DATA               UBIN WORD BASED(TEMP_IC2$) ;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:4    
      112     7816    1       DCL BYTE_PER_WORD      SBIN WORD ;
      113     7817    1       DCL DATA_TYPE          SBIN WORD ;
      114     7818    1       DCL TOTAL_BYTE_OFFSET  SBIN WORD ;
      115     7819    1       DCL CHAR_OFFSET        SBIN WORD ;
      116     7820    1       DCL WORD_OFFSET        SBIN WORD ;
      117     7821    1       DCL J                  SBIN WORD ;
      118     7822    1       DCL REG                SBIN WORD ;
      119     7823    1       DCL REG1               SBIN WORD ;
      120     7824    1       DCL REG2               SBIN WORD ;
      121     7825    1       DCL REG_OFFSET         SBIN WORD ;
      122     7826    1       DCL IR (0:17)          BIT (1) UNAL;
      123     7827
      124     7828    1       DCL X8RV$COMP_3_RECOVERY  ENTRY (3) ALTRET ;
      125     7829
      126     7830            %FPT_TRTN ;
      127     7847            %FPT_TRTN (FPTN = FPT_TRTN_W_IR, SETIR = YES);
      128     7864            %FPT_TRAP (FPTN = FPT_UNTRAP, DIVIDE_CHECK = ABORT, OVERFLOW = ABORT, IPR =
              7864                ABORT,
      129     7865                       COMMAND = ABORT, HARDWARE = ABORT, LOCKUP = ABORT, MEMORY = ABORT,
      130     7866                       MISSING_PAGE = ABORT, MISSING_SEG = ABORT, SECURITY_1 = ABORT,
      131     7867                       SECURITY_2 = ABORT, DERAIL = ABORT, FAULT_TAG = ABORT,
      132     7868                       MME = ABORT );
      133     7891            %B$FLT   ( STCLASS = "BASED(B$PTR)" ) ;
      134     7943            %B$TCB   ( STCLASS = "BASED(B$TCB$)" ) ;
      135     7946            %B$EXCFR ( STCLASS = "BASED(B$EXCFR$)" ) ;
      136     7964
      137     7965            %B$JIT0;                                               /*#41202*/
      138     8054            %U$JIT1;
      139     8128            %A$JIT6X;
      140     8131
      141     8132
      142     8133        /*V*
      143     8134                               SET_POINTERS
      144     8135                 The pointers to each of the macros B$FLT, B$XFCR have
      145     8136                 to be set to the location of the corresponding struc-
      146     8137                 tures, using B$TCB.
      147     8138
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:5    
      148     8139        */
      149     8140    1       B$PTR = B$TCB$->B$TCB.STK$ ;
      150     8141    1       B$EXCFR$ = B$TCB$->B$TCB.STK$ ;
      151     8142    1       INSTR.SEG_ID_1 = '00'O ;
      152     8143    1       INSTR.SEG_ID_2 = %ISSID ;
      153     8144    1       REL_IC.N_IC.FILL = BITBIN('0'O) ;
      154     8145    1       REL_IC.IC_BN = '0'O ;
      155     8146    1       REL_IC.SEG_ID_2 = %ISSID ;
      156     8147    1       AR1 = '0'B ;
      157     8148    1       AR2 = '0'B ;
      158     8149    1       IC_REL1 = '0'B ;
      159     8150    1       IC_REL2 = '0'B ;
      160     8151
      161     8152    1       IR = B$EXCFR$ -> B$EXCFR.IR;
      162     8153    1       IR (3) = '1'B;
      163     8154
      164     8155    1       FAULT_CODE = B$PTR->B$FLT.SUBC ;
      165     8156    1       INSTR.IC = B$EXCFR$->B$EXCFR.IC ;
      166     8157    1       TEMP_IC$ = IC_PTR$ ;
      167     8158        /*V*
      168     8159                               IC_AND_LENGTH
      169     8160                 This next sequence of instructions get the length of
      170     8161                 total instruction, so we know how much to increment
      171     8162                 the IC by.  Then the IC is pulled out.  If the length
      172     8163                 is equal to three or four then that is what the IC is
      173     8164                 incremented by, else the IC is incremented by one.
      174     8165                 The instructions that are three or four are EIS instr-
      175     8166                 uctions, the others could be either EIS or NON-EIS.
      176     8167
      177     8168        */
      178     8169
      179     8170    2   EIS_INSTR: DO CASE ( FAULT_CODE );
      180     8171
      181     8172    2                   CASE( %OVERFLOW_CHECK ) ;
      182     8173
      183     8174        /*V*
      184     8175                               EXPONENT_FAULT
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:6    
      185     8176                 If the element " SUBC " is equal to zero then the type of
      186     8177                 fault is an exponent fault( either overflow or underflow ).
      187     8178        */
      188     8179
      189     8180
      190     8181    2                     IF EIS.EIS_BIT THEN
      191     8182    3   OVERFLOW_CHECK:   DO CASE ( EIS.OPCODE ) ;
      192     8183
      193     8184    3                       CASE ( %AD3D, %DV3D, %MP3D, %SB3D ) ;
      194     8185
      195     8186    3                         INSTR.IC = INSTR.IC + %FOUR ;
      196     8187
      197     8188    3                       CASE ( %AD2D, %BTD, %DTB, %DV2D, %MP2D, %MVN, %SB2D );
      198     8189
      199     8190    3                         INSTR.IC = INSTR.IC + %THREE ;
      200     8191
      201     8192    3                     END OVERFLOW_CHECK ; /* CASE OF OPCODE */
      202     8193
      203     8194    2                     ELSE
      204     8195
      205     8196    2                       INSTR.IC = INSTR.IC + %ONE ;
      206     8197
      207     8198    2                   CASE( %DIVIDE_CHECK ) ;
      208     8199
      209     8200        /*V*
      210     8201                               DIVIDE_BY_ZERO_FAULT
      211     8202                 If the element of B$FLT " SUBC " is equal to one then the
      212     8203                 type of fault is a division by zero fault.
      213     8204
      214     8205        */
      215     8206
      216     8207    2                     BIN_36 = BITBIN(INSTR) ;
      217     8208    2                     CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;
      218     8209    2                     CALL CONCAT(SPECIAL_ERR_MSG,'Fault occurred at address ',
      219     8210    2                       SUBSTR(CHAR_12,0,6)) ;
      220     8211    2                     CALL X8ER$ERROR ( %ZERO_DIVIDE, SPECIAL_ERR_MSG );
      221     8212
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:7    
      222     8213    2                     IF EIS.EIS_BIT THEN
      223     8214    3   DIVIDE_CHECK:     DO CASE( EIS.OPCODE ) ;
      224     8215
      225     8216    3                       CASE ( %DV3D ) ;
      226     8217
      227     8218    3                         INSTR.IC = INSTR.IC + %FOUR ;
      228     8219
      229     8220    3                       CASE ( %DV2D ) ;
      230     8221
      231     8222    3                         INSTR.IC = INSTR.IC + %THREE ;
      232     8223
      233     8224    3                     END DIVIDE_CHECK ; /* CASE OF OPCODE - DIVIDE CHECK */
      234     8225
      235     8226    2                     ELSE
      236     8227
      237     8228    2                       INSTR.IC = INSTR.IC + %ONE ;
      238     8229
      239     8230
      240     8231    2                   CASE( %IPR_FAULT ) ;
      241     8232
      242     8233    2                     IF (EIS.EIS_BIT) AND ((EIS.OPCODE = %MVNE) OR (EIS.OPCODE =
      243     8234    2                        %DTB) OR (EIS.OPCODE = %CMPN) OR
      244     8235    2                        ((EIS.OPCODE >= %AD2D) AND (EIS.OPCODE <= %MVN))) THEN
      245     8236    3                     DO ;
      246     8237
      247     8238    3                       BIN_36 = BITBIN(INSTR) ;
      248     8239    3                       CHAR_12 = %BLANC ;
      249     8240    3                       CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;
      250     8241    3                       SPECIAL_ERR_MSG = SUBSTR(CHAR_12,0,6) ;
      251     8242    3                       BIN_36 = BITBIN(EIS) ;
      252     8243    3                       CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;
      253     8244    3                       CALL CONCAT(SUBSTR(SPECIAL_ERR_MSG,6),'     ',CHAR_12) ;
      254     8245    3                       CALL X8ER$ERROR( %ILLEGAL_EIS_DATA, SPECIAL_ERR_MSG );
      255     8246    3                       IF EIS.MF1 = %FOUR THEN
      256     8247    3                         IC_REL1 = '1'B ;
      257     8248    3                       ELSE
      258     8249    3                         IF EIS.MOD_FLD1.AR THEN
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:8    
      259     8250    4                         DO ;
      260     8251
      261     8252    4                           REG1 = EIS.MOD_FLD1.REG ;
      262     8253    4                           AR1 = '1'B ;
      263     8254
      264     8255    4                         END ;
      265     8256    3                         ELSE
      266     8257
      267     8258    3                           CALL X8ER$ERROR ( %NO_ADDR_TO_DATA );
      268     8259
      269     8260    3                       IF EIS.MF2 = %FOUR THEN
      270     8261    3                         IC_REL2 = '1'B ;
      271     8262    3                       ELSE
      272     8263    3                         IF EIS.MOD_FLD2.AR THEN
      273     8264    4                         DO ;
      274     8265
      275     8266    4                           REG2 = EIS.MOD_FLD2.REG ;
      276     8267    4                           AR2 = '1'B ;
      277     8268
      278     8269    4                         END ;
      279     8270    3                         ELSE
      280     8271    3                           CALL X8ER$ERROR ( %NO_ADDR_TO_DATA );
      281     8272
      282     8273    4                       DO I = %ONE TO NO_OF_DSCRPTRS ;
      283     8274
      284     8275    4                         INSTR.IC = INSTR.IC + %ONE ;
      285     8276    4                         TEMP_IC$ = IC_PTR$ ;
      286     8277    4                         IF  I ~= %THREE THEN
      287     8278    5                         DO ;
      288     8279
      289     8280    5                           IF (( I = %ONE ) AND ( IC_REL1 )) OR
      290     8281    5                              (( I = %TWO ) AND ( IC_REL2 )) THEN
      291     8282    6                           DO ;
      292     8283
      293     8284    6                             REL_IC.N_IC.TEMP_IC1 = INSTR.IC + DESC.OFFSET - I ;
      294     8285    6                             BIN_36 = BITBIN(DESC) ;
      295     8286    6                             CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:9    
      296     8287    6                             CALL CONCAT(SPECIAL_ERR_MSG,'           ',CHAR_12) ;
      297     8288    6                             BIN_36 = DATA ;
      298     8289    6                             CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;
      299     8290    6                             CALL CONCAT(SUBSTR(SPECIAL_ERR_MSG,23),'    ',CHAR_12) ;
      300     8291    6                             CALL X8ER$ERROR( %SPECIAL_MSG, SPECIAL_ERR_MSG);
      301     8292
      302     8293    6                           END ;
      303     8294    5                           ELSE
      304     8295    5                           IF (( I = %ONE ) AND ( AR1 )) OR
      305     8296    5                              (( I = %TWO ) AND ( AR2 )) THEN
      306     8297    6                           DO ;
      307     8298
      308     8299    6                             TEMP_IC2$ = B$EXCFR$->B$EXCFR.PRS(DESC.PTR_STFF.PR#) ;
      309     8300    6                             IF I = %ONE THEN
      310     8301    6                               REG = REG1 ;
      311     8302    6                             ELSE
      312     8303    6                               REG = REG2 ;
      313     8304    7   M_F_REG_BITS:             DO CASE ( REG ) ;
      314     8305
      315     8306    7                               CASE ( %A_REG ) ;
      316     8307
      317     8308    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.A ;
      318     8309
      319     8310    7                               CASE ( %Q_REG ) ;
      320     8311
      321     8312    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.Q ;
      322     8313
      323     8314    7                               CASE ( %X0 ) ;
      324     8315
      325     8316    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.XREG(0) ;
      326     8317
      327     8318    7                               CASE ( %X1 ) ;
      328     8319
      329     8320    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.XREG(1) ;
      330     8321
      331     8322    7                               CASE ( %X2 ) ;
      332     8323
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:10   
      333     8324    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.XREG(2) ;
      334     8325    7                               CASE ( %X3 ) ;
      335     8326
      336     8327    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.XREG(3) ;
      337     8328
      338     8329    7                               CASE ( %X4 ) ;
      339     8330
      340     8331    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.XREG(4) ;
      341     8332
      342     8333    7                               CASE ( %X5 ) ;
      343     8334
      344     8335    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.XREG(5) ;
      345     8336
      346     8337    7                               CASE ( %X6 ) ;
      347     8338
      348     8339    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.XREG(6) ;
      349     8340
      350     8341    7                               CASE ( %X7 ) ;
      351     8342
      352     8343    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.XREG(7) ;
      353     8344
      354     8345    7                               CASE ( ELSE, %ZERO ) ;
      355     8346
      356     8347    7                                 REG_OFFSET = %ZERO ;
      357     8348
      358     8349    7                             END M_F_REG_BITS ;
      359     8350
      360     8351    6                             IF DESC.TN = %ZERO THEN
      361     8352                                  /* 9-BIT BYTES */
      362     8353    7                             DO ;
      363     8354
      364     8355    7                               BYTE_PER_WORD = %FOUR ;
      365     8356    7                               DATA_TYPE = %NINE_BIT ;
      366     8357
      367     8358    7                             END ;
      368     8359    6                             ELSE
      369     8360    7                             DO ;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:11   
      370     8361
      371     8362    7                               BYTE_PER_WORD = %EIGHT ;
      372     8363    7                               DATA_TYPE = %FOUR_BIT ;
      373     8364
      374     8365    7                             END ;
      375     8366
      376     8367    6                             TOTAL_BYTE_OFFSET = REG_OFFSET + DESC.CN +
      377     8368    6                               (DESC.PTR_STFF.Y * BYTE_PER_WORD) ;
      378     8369    6                             CHAR_OFFSET = MOD(TOTAL_BYTE_OFFSET,DATA_TYPE ) ;
      379     8370    6                             WORD_OFFSET = TOTAL_BYTE_OFFSET / DATA_TYPE ;
      380     8371    6                             REL_IC.N_IC.TEMP_IC1 = REL_IC.N_IC.TEMP_IC1 +
      381     8372    6                               WORD_OFFSET ;
      382     8373    6                             REL_IC.IC_CN = REL_IC.IC_CN + CHAR_OFFSET ;
      383     8374
      384     8375    7                             DO J = %ONE TO DESC.N / DATA_TYPE ;
      385     8376
      386     8377    7                               IF J = %ONE THEN
      387     8378    8                               DO ;
      388     8379
      389     8380    8                                 BIN_36 = BITBIN(DESC) ;
      390     8381    8                                 CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;
      391     8382
      392     8383    8                               END ;
      393     8384    7                               BIN_36 = DATA ;
      394     8385    7                               CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;
      395     8386    7                               CALL CONCAT(SUBSTR(SPECIAL_ERR_MSG,27),CHAR_12) ;
      396     8387    7                               CALL X8ER$ERROR( %SPECIAL_MSG, SPECIAL_ERR_MSG );
      397     8388    7                               REL_IC.N_IC.TEMP_IC1 = REL_IC.N_IC.TEMP_IC1 +
      398     8389    7                                 %ONE ;
      399     8390
      400     8391    7                             END ;
      401     8392
      402     8393    6                             IF DESC.N / DATA_TYPE = %ZERO THEN
      403     8394    7                             DO ;
      404     8395
      405     8396    7                               BIN_36 = BITBIN(DESC) ;
      406     8397    7                               CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:12   
      407     8398
      408     8399    7                             END ;
      409     8400    6                             J = MOD(DESC.N,DATA_TYPE) ;
      410     8401    6                             IF DESC.TN = %ZERO THEN
      411     8402    6                               J = J * 3 ;
      412     8403    6                             ELSE
      413     8404    6                               J = 2 * J - ( J / 2 ) ;
      414     8405    6                             BIN_36 = DATA ;
      415     8406    6                             CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;
      416     8407    6                             SUBSTR(CHAR_12,J) = %BLANC ;
      417     8408    6                             CALL CONCAT(SUBSTR(SPECIAL_ERR_MSG,27),SUBSTR(CHAR_12,0,J)
              8408                                      ) ;
      418     8409    6                             CALL X8ER$ERROR( %SPECIAL_MSG, SPECIAL_ERR_MSG );
      419     8410
      420     8411    6                           END ;
      421     8412    5                         END ;
      422     8413    4                         ELSE
      423     8414    4                           IF NO_OF_DSCRPTRS = %THREE THEN
      424     8415    5                           DO ;
      425     8416
      426     8417    5                             INSTR.IC = INSTR.IC + %ONE ;
      427     8418    5                             BIN_36 = BITBIN(DESC) ;
      428     8419    5                             CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;
      429     8420    5                             CALL CONCAT(SPECIAL_ERR_MSG,'           ',CHAR_12) ;
      430     8421    5                             CALL X8ER$ERROR( %SPECIAL_MSG, SPECIAL_ERR_MSG );
      431     8422
      432     8423    5                           END ;
      433     8424
      434     8425    4                       END ;
      435     8426    3                       IF LIBCOM.CONTINUE THEN
      436     8427    3                         INSTR.IC = INSTR.IC + %ONE ;
      437     8428    3                       ELSE
      438     8429    4                       DO ;
      439     8430
      440     8431    4                         CALL M$TRAP( FPT_UNTRAP ) ;
      441     8432    4                         INSTR.IC = B$EXCFR$->B$EXCFR.IC ;
      442     8433
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:13   
      443     8434    4                       END ;
      444     8435
      445     8436    3                     END ;
      446     8437    2                     ELSE
      447     8438    3                     DO ;
      448     8439
      449     8440    3                       BIN_36 = BITBIN(INSTR) ;
      450     8441    3                       CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;
      451     8442    3                       CALL CONCAT(SPECIAL_ERR_MSG,'Fault occurred at address ',
      452     8443    3                         SUBSTR(CHAR_12,0,6)) ;
      453     8444    3                       CALL X8ER$ERROR( %IPROC_FAULT, SPECIAL_ERR_MSG );
      454     8445    3                       CALL X9TR$DELTA;
      455     8446    3                       CALL M$TRAP ( FPT_UNTRAP ) ;
      456     8447
      457     8448    3                     END ;
      458     8449
      459     8450    2                   CASE ( ELSE );
      460     8451    3                     DO;
      461     8452    3                       CALL X9TR$DELTA;
      462     8453    3                       CALL M$TRAP ( FPT_UNTRAP );
      463     8454    3                     END;
      464     8455
      465     8456    2              END EIS_INSTR ; /* CASE OF FAULT CODES */
      466     8457
      467     8458    1       FPT_TRTN_W_IR.V.IC# = INSTR.IC ;
      468     8459    1       FPT_TRTN_W_IR.V.IR# = IR;  /* keep current indicators */
      469     8460    1       CALL M$TRTN (FPT_TRTN_W_IR);
      470     8461
      471     8462        %EJECT;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:14   
      472     8463    1   X9TR$ETRAP:  ENTRY ASYNC;
      473     8464
      474     8465    1       IF B$JIT.SWITCH( 9 ) THEN                              /*#41202*/
      475     8466    1         CALL LOW_VALUES_CHECK ; /* may never return */
      476     8467    1       CALL X8ER$ERROR( %RUNTIME_ABORT );
      477     8468    1       CALL X9TR$DELTA;
      478     8469    1       SPECIAL_ERR_MSG = ' ';
      479     8470    1       CALL X9ER$PRINT_ERROR( SPECIAL_ERR_MSG );
      480     8471    1       CALL CONTINUE_CHECK;
      481     8472    1       RETURN;
      482     8473
      483     8474        %EJECT;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:15   
      484     8475    1     CONTINUE_CHECK: PROC;
      485     8476
      486     8477    2        IF LIBCOM.CONTINUE THEN
      487     8478    3          DO;
      488     8479    3            B$PTR = B$TCB$-> B$TCB.STK$;
      489     8480    3            B$EXCFR$ = B$TCB$->B$TCB.STK$;
      490     8481    3            INSTR.IC = B$EXCFR$-> B$EXCFR.IC;
      491     8482    3            INSTR.SEG_ID_1 = '00'O;
      492     8483    3            INSTR.SEG_ID_2 = %ISSID;
      493     8484    3            TEMP_IC$ = IC_PTR$;
      494     8485    4            DO CASE( EIS.OPCODE );
      495     8486
      496     8487    4              CASE ( %AD3D, %DV3D, %MP3D, %SB3D ) ;
      497     8488
      498     8489    4                 NO_OF_DSCRPTRS = %THREE ;
      499     8490
      500     8491    4               CASE ( %AD2D, %DTB, %DV2D, %MVN, %MVNE, %SB2D, %CMPN) ;
      501     8492
      502     8493    4                  NO_OF_DSCRPTRS = %TWO ;
      503     8494
      504     8495    4                CASE ( ELSE, %ZERO ) ;
      505     8496
      506     8497    4                  NO_OF_DSCRPTRS = %ZERO ;
      507     8498
      508     8499    4            END ; /* case eis.opcodes */
      509     8500    3            INSTR.IC = INSTR.IC + NO_OF_DSCRPTRS + %ONE;
      510     8501    3            FPT_TRTN.V.IC# = INSTR.IC;
      511     8502    3            CALL M$TRTN ( FPT_TRTN );
      512     8503    3          END;
      513     8504    2        ELSE
      514     8505    3          DO;
      515     8506    3            CALL M$TRAP( FPT_UNTRAP ) ;
      516     8507    3          END;
      517     8508
      518     8509    2     END CONTINUE_CHECK; /* proc */
      519     8510
      520     8511        %EJECT;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:16   
      521     8512    1     LOW_VALUES_CHECK: PROC ;
      522     8513
      523     8514    2          B$EXCFR$ = B$TCB$ -> B$TCB.STK$ ;
      524     8515    2          INSTR.IC = B$EXCFR$ -> B$EXCFR.IC ;
      525     8516    2          INSTR.SEG_ID_1 = '00'O ;
      526     8517    2          INSTR.SEG_ID_2 = %ISSID ;
      527     8518    2          TEMP_IC$ = IC_PTR$ ;
      528     8519
      529     8520    2          CALL X8RV$COMP_3_RECOVERY (TEMP_IC$ -> EIS,
      530     8521    2                                     B$EXCFR$ -> B$EXCFR.REGS,
      531     8522    2                                     B$EXCFR$ -> B$EXCFR.PRS(0))
      532     8523    3          WHENRETURN DO ; /* Successful data change -- retry instr */
      533     8524    3            FPT_TRTN.V.IC# = INSTR.IC ;
      534     8525    3            CALL M$TRTN (FPT_TRTN) ;
      535     8526    3          END ;
      536     8527
      537     8528    2   END LOW_VALUES_CHECK ;
      538     8529
      539     8530        %EJECT;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:17   
      540     8531    1   X9TR$DELTA: PROC;
      541     8532
      542     8533            %FPT_ALIB (FPTN=TO_DELTA,CMD=DELTA_CMD,LIBNAME=DELTA,
      543     8534                       RETRN=YES,STCLASS=CONSTANT);
      544     8551            %VLP_NAME (FPTN=DELTA,NAME='DELTA',STCLASS=CONSTANT);
      545     8578
      546     8579    2       DCL 1 DELTA_CMD STATIC,
      547     8580    2             2 *     CHAR(0) INIT ( '     '),   /* PLUGH */
      548     8581    2             2 *     CHAR(0) INIT ('  '),       /* ; */
      549     8582    2             2 *     CHAR(0) INIT ('M '),
      550     8583    2             2 LOC   CHAR(6) INIT ('  '),
      551     8584    2             2 *      CHAR(0) INIT('\I');
      552     8585
      553     8586
      554     8587    2       CALL BINCHAR ( DELTA_CMD.LOC, B$TCB$->B$TCB.STK$->B$EXCFR.IC );
      555     8588    2       CALL M$ALIB (TO_DELTA);
      556     8589    2   END X9TR$DELTA;      /* proc */
      557     8590    1   END X9TR$ATRAP ;
      558     8591        %EJECT;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:18   

PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:19   
--  Include file information  --

   X8A_COM_MACS.:X8A6TOU  is referenced.
   X8A_MACROS.:X8A6TOU  is referenced.
   X8A_OPCODES.:X8A6TOU  is referenced.
   X8A_ERRCOM.:X8A6TOU  cannot be made into a system file and is referenced.
   X8A_LIBCOM.:X8A6TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:LIB_E04  is referenced.
   B_SEGIDS_C.:LIB_E04  is referenced.
   CP_6_SUBS.:LIB_E04  is referenced.
   CP_6_C.:LIB_E04  is referenced.
   CP_6.:LIB_E04  cannot be made into a system file and is referenced.
   Z9A_FLAGS.:Z8A6TOU  is referenced.
   X8A_SYS_FILE.:X8A6TOU  is referenced.
      No diagnostics issued in procedure X9TR$ATRAP.

   Procedure X9TR$ATRAP requires 1007 words for executable code.
   Procedure X9TR$ATRAP requires 94 words of local(AUTO) storage.

    No errors detected in file X9TR.:X8A6TSI    .

PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:20   

 Object Unit name= X9TR$ATRAP                                 File name= X9TR.:X8A6TOU
 UTS= AUG 09 '97 11:04:14.04 SAT                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1  LblCom even  none    20     24  LIBCOM
    2  LblCom even  none     1      1  DEC_OR_COMMA
    3  LblCom even  none    20     24  IN_TEMP
    4  LblCom even  none     1      1  OVRCHR
    5  LblCom even  none     1      1  SELECT_TIME
    6  LblCom even  none     1      1  NO_ADVANCE_OFFSET
    7  LblCom even  none    18     22  DSPLY_SAVE
    8  LblCom even  none     3      3  D_DATE
    9  LblCom even  none     3      3  D_TIME
   10  LblCom even  none     1      1  D_DAY
   11  LblCom even  none     2      2  C_DATE
   12  LblCom even  none     2      2  C_TIME
   13  LblCom even  none     2      2  C_DAY
   14  LblCom even  none     1      1  RTHOLD2
   15  LblCom even  none     1      1  LTHOLD2
   16  LblCom even  none     1      1  NDX2
   17  LblCom even  none     1      1  IN_LEN
   18   Data  even  none    31     37  X9TR$ATRAP
   19  RoData even  UTS     24     30  X9TR$ATRAP
   20   Proc  even  none  1007   1757  X9TR$ATRAP
   21  RoData even  none    20     24  X9TR$ATRAP
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:21   

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
    20      0   yes            yes     Async       0  X9TR$ATRAP
    20   1264                  yes     Async       0  X9TR$ETRAP

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       2 X8CO$CONV_TO_OCTAL
         yes           Std       3 X8ER$ERROR
         yes           Std       1 X9ER$PRINT_ERROR
 yes     yes           Std       3 X8RV$COMP_3_RECOVERY
                       nStd      0 X66_AAUTO
                       nStd      0 X66_AARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  B$TCB$                                B$JIT$

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     NULLSID                               ISSID
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:22   


        1        1        /*M* X9TR$ATRAP -- TRAP PROCEDURE                                    */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        X9TR$ATRAP:  PROC ASYNC ;

      7 20 000000   000000 700200 xent  X9TR$ATRAP   TSX0  ! X66_AAUTO
        20 000001   000136 000000                    ZERO    94,0

        8        8
        9        9        /*P*
       10       10
       11       11              NAME: X9TR$ATRAP
       12       12           PURPOSE: To output an error about the nature of the fault, and
       13       13                    resume processing at the next statement.
       14       14
       15       15        */
       16       16        /*D*
       17       17
       18       18              NAME: X9TR$ATRAP
       19       19              CALL: This is an indirect call.  First a macro is set up
       20       20                    stating that if an ARITHMETIC error occurs, call
       21       21                    X9TR$ATRAP.
       22       22
       23       23                     %FPT_TRAP(ARITHMETIC=X9TR$ATRAP,DIVIDE_CHECK=TRAP,
       24       24                               OVERFLOW=TRAP) ;
       25       25
       26       26                    Then a call to M$TRAP is made which sets up the whole
       27       27                    thing.  Then is a fault occurs, control is transfered
       28       28                    to this proc.
       29       29         INTERFACE:
       30       30                               indicator register.
       31       31                    2.) X8ER$ERROR - This is the error output routine.
       32       32                    3.) M$TRTN - This returns control to the COBOL program
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:23   
       33       33                                 to the IC + IC_INCREMENT location.
       34       34                        nature of the fault.
       35       35             INPUT: None
       36       36            OUTPUT: None
       37       37           SCRATCH: None
       38       38         REFERENCE: J. E. Heath, X8LC$DOCUMENT, CP6 - Moniter Services
       39       39                    Manual.
       40       40
       41       41        */
       42       42
       43       43    1   DCL X8CO$CONV_TO_OCTAL  ENTRY(2) ;
       44       44    1   DCL X8ER$ERROR                 ENTRY(3);
       45       45    1   DCL X9ER$PRINT_ERROR           ENTRY(1);
       46       46
       47       47
       48       48            %INCLUDE X8A_SYS_FILE ;
       49     6318            %INCLUDE B_SEGIDS_C ;
       50     6857            %INCLUDE B$JIT_C ;                                     /*#41202*/
       51     7171            %INCLUDE X8A_LIBCOM ;
       52     7391            %INCLUDE X8A_ERRCOM;
       53     7480            %INCLUDE X8A_OPCODES;
       54     7502            %INCLUDE X8A_MACROS;
       55     7759
       56     7760    1       DCL B$PTR    PTR  ;
       57     7761    1       DCL B$EXCFR$ PTR ;
       58     7762    1       DCL TEMP_IC$ PTR ;
       59     7763    1       DCL B$TCB$   PTR SYMREF ;
       60     7764    1       DCL B$JIT$   PTR SYMREF ;                              /*#41202*/
       61     7765
       62     7766    1       DCL BIN_36   UBIN WORD ;
       63     7767    1       DCL CHAR_12  CHAR(12) ;
       64     7768    1       DCL NO_OF_DSCRPTRS UBIN WORD ;
       65     7769    1       DCL IC_REL1       BIT(1) ;
       66     7770    1       DCL IC_REL2       BIT(1) ;
       67     7771    1       DCL AR1           BIT(1) ;
       68     7772    1       DCL AR2           BIT(1) ;
       69     7773    1       DCL FAULT_CODE UBIN WORD ;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:24   
       70     7774    1       DCL 1 EIS BASED(TEMP_IC$) ALIGNED,
       71     7775    1             2 GARBAGE        UBIN(2) UNAL,
       72     7776    1             2 MF3            UBIN(7) UNAL,
       73     7777    1             2 GARBAGE_2      UBIN(2) UNAL,
       74     7778    1             2 MF2            UBIN(7) UNAL,
       75     7779    1             2 MOD_FLD2 REDEF MF2,
       76     7780    1               3 AR           BIT(1) UNAL,
       77     7781    1               3 THE_REST     UBIN(2) UNAL,
       78     7782    1               3 REG          SBIN(4) UNAL,
       79     7783    1             2 OPCODE         UBIN(9) UNAL,
       80     7784    1             2 EIS_BIT        BIT(1) UNAL,
       81     7785    1             2 INIHIBIT_BIT   UBIN(1) UNAL,
       82     7786    1             2 MF1            UBIN(7) UNAL,
       83     7787    1             2 MOD_FLD1 REDEF MF1,
       84     7788    1               3 AR           BIT(1) UNAL,
       85     7789    1               3 THE_REST     UBIN(2) UNAL,
       86     7790    1               3 REG          SBIN(4) UNAL;
       87     7791    1       DCL 1 DESC REDEF EIS ALIGNED,
       88     7792    1             2 OFFSET         UBIN(18) UNAL,
       89     7793    1             2 PTR_STFF REDEF OFFSET,
       90     7794    1               3 PR#          UBIN(3) UNAL,
       91     7795    1               3 Y            SBIN(15) UNAL,
       92     7796    1             2 CN             SBIN(3) UNAL,
       93     7797    1             2 TN             UBIN(1) UNAL,
       94     7798    1             2 SN             UBIN(2) UNAL,
       95     7799    1             2 SF             SBIN(6) UNAL,
       96     7800    1             2 N              SBIN(6) UNAL ;
       97     7801    1       DCL IC_PTR$  PTR ;
       98     7802    1       DCL 1 INSTR REDEF IC_PTR$ ALIGNED,
       99     7803    1             2 IC             UBIN(18) UNAL,
      100     7804    1             2 SEG_ID_1       BIT(6) UNAL ,
      101     7805    1             2 SEG_ID_2       BIT(12) UNAL  ;
      102     7806    1       DCL I                  SBIN WORD ;
      103     7807    1       DCL TEMP_IC2$          PTR ;
      104     7808    1       DCL 1 REL_IC REDEF TEMP_IC2$ ALIGNED,
      105     7809    1           2 IC_CN            UBIN(21) UNAL,
      106     7810    1           2 N_IC REDEF IC_CN,
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:25   
      107     7811    1             3 TEMP_IC1       UBIN HALF UNAL,
      108     7812    1             3 FILL           UBIN(3) UNAL,
      109     7813    1           2 IC_BN            BIT(3) UNAL,
      110     7814    1           2 SEG_ID_2         BIT(12) UNAL ;
      111     7815    1       DCL DATA               UBIN WORD BASED(TEMP_IC2$) ;
      112     7816    1       DCL BYTE_PER_WORD      SBIN WORD ;
      113     7817    1       DCL DATA_TYPE          SBIN WORD ;
      114     7818    1       DCL TOTAL_BYTE_OFFSET  SBIN WORD ;
      115     7819    1       DCL CHAR_OFFSET        SBIN WORD ;
      116     7820    1       DCL WORD_OFFSET        SBIN WORD ;
      117     7821    1       DCL J                  SBIN WORD ;
      118     7822    1       DCL REG                SBIN WORD ;
      119     7823    1       DCL REG1               SBIN WORD ;
      120     7824    1       DCL REG2               SBIN WORD ;
      121     7825    1       DCL REG_OFFSET         SBIN WORD ;
      122     7826    1       DCL IR (0:17)          BIT (1) UNAL;
      123     7827
      124     7828    1       DCL X8RV$COMP_3_RECOVERY  ENTRY (3) ALTRET ;
      125     7829
      126     7830            %FPT_TRTN ;
      127     7847            %FPT_TRTN (FPTN = FPT_TRTN_W_IR, SETIR = YES);
      128     7864            %FPT_TRAP (FPTN = FPT_UNTRAP, DIVIDE_CHECK = ABORT, OVERFLOW = ABORT, IPR =
              7864                ABORT,
      129     7865                       COMMAND = ABORT, HARDWARE = ABORT, LOCKUP = ABORT, MEMORY = ABORT,
      130     7866                       MISSING_PAGE = ABORT, MISSING_SEG = ABORT, SECURITY_1 = ABORT,
      131     7867                       SECURITY_2 = ABORT, DERAIL = ABORT, FAULT_TAG = ABORT,
      132     7868                       MME = ABORT );
      133     7891            %B$FLT   ( STCLASS = "BASED(B$PTR)" ) ;
      134     7943            %B$TCB   ( STCLASS = "BASED(B$TCB$)" ) ;
      135     7946            %B$EXCFR ( STCLASS = "BASED(B$EXCFR$)" ) ;
      136     7964
      137     7965            %B$JIT0;                                               /*#41202*/
      138     8054            %U$JIT1;
      139     8128            %A$JIT6X;
      140     8131
      141     8132
      142     8133        /*V*
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:26   
      143     8134                               SET_POINTERS
      144     8135                 The pointers to each of the macros B$FLT, B$XFCR have
      145     8136                 to be set to the location of the corresponding struc-
      146     8137                 tures, using B$TCB.
      147     8138
      148     8139        */
      149     8140    1       B$PTR = B$TCB$->B$TCB.STK$ ;

   8140 20 000002   000000 470400 xsym               LDP0    B$TCB$
        20 000003   000001 236100                    LDQ     1,,PR0
        20 000004   200074 756100                    STQ     B$PTR,,AUTO

      150     8141    1       B$EXCFR$ = B$TCB$->B$TCB.STK$ ;

   8141 20 000005   200075 756100                    STQ     B$EXCFR$,,AUTO

      151     8142    1       INSTR.SEG_ID_1 = '00'O ;

   8142 20 000006   000000 236003                    LDQ     0,DU
        20 000007   200111 752104                    STCQ    IC_PTR$,'04'O,AUTO

      152     8143    1       INSTR.SEG_ID_2 = %ISSID ;

   8143 20 000010   006000 236007                    LDQ     3072,DL
        20 000011   200111 752103                    STCQ    IC_PTR$,'03'O,AUTO

      153     8144    1       REL_IC.N_IC.FILL = BITBIN('0'O) ;

   8144 20 000012   000000 236000 21                 LDQ     0
        20 000013   200113 356100                    ANSQ    TEMP_IC2$,,AUTO

      154     8145    1       REL_IC.IC_BN = '0'O ;

   8145 20 000014   000001 236000 21                 LDQ     1
        20 000015   200113 356100                    ANSQ    TEMP_IC2$,,AUTO

      155     8146    1       REL_IC.SEG_ID_2 = %ISSID ;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:27   

   8146 20 000016   006000 236007                    LDQ     3072,DL
        20 000017   200113 752103                    STCQ    TEMP_IC2$,'03'O,AUTO

      156     8147    1       AR1 = '0'B ;

   8147 20 000020   200106 450100                    STZ     AR1,,AUTO

      157     8148    1       AR2 = '0'B ;

   8148 20 000021   200107 450100                    STZ     AR2,,AUTO

      158     8149    1       IC_REL1 = '0'B ;

   8149 20 000022   200104 450100                    STZ     IC_REL1,,AUTO

      159     8150    1       IC_REL2 = '0'B ;

   8150 20 000023   200105 450100                    STZ     IC_REL2,,AUTO

      160     8151
      161     8152    1       IR = B$EXCFR$ -> B$EXCFR.IR;

   8152 20 000024   200075 471500                    LDP1    B$EXCFR$,,AUTO
        20 000025   100004 720100                    LXL0    4,,PR1
        20 000026   200126 740100                    STX0    IR,,AUTO

      162     8153    1       IR (3) = '1'B;

   8153 20 000027   040000 236003                    LDQ     16384,DU
        20 000030   200126 256100                    ORSQ    IR,,AUTO

      163     8154
      164     8155    1       FAULT_CODE = B$PTR->B$FLT.SUBC ;

   8155 20 000031   200074 473500                    LDP3    B$PTR,,AUTO
        20 000032   300100 236100                    LDQ     64,,PR3
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:28   
        20 000033   777777 376007                    ANQ     -1,DL
        20 000034   200110 756100                    STQ     FAULT_CODE,,AUTO

      165     8156    1       INSTR.IC = B$EXCFR$->B$EXCFR.IC ;

   8156 20 000035   100004 221100                    LDX1    4,,PR1
        20 000036   200111 741100                    STX1    IC_PTR$,,AUTO

      166     8157    1       TEMP_IC$ = IC_PTR$ ;

   8157 20 000037   200111 236100                    LDQ     IC_PTR$,,AUTO
        20 000040   200076 756100                    STQ     TEMP_IC$,,AUTO

      167     8158        /*V*
      168     8159                               IC_AND_LENGTH
      169     8160                 This next sequence of instructions get the length of
      170     8161                 total instruction, so we know how much to increment
      171     8162                 the IC by.  Then the IC is pulled out.  If the length
      172     8163                 is equal to three or four then that is what the IC is
      173     8164                 incremented by, else the IC is incremented by one.
      174     8165                 The instructions that are three or four are EIS instr-
      175     8166                 uctions, the others could be either EIS or NON-EIS.
      176     8167
      177     8168        */
      178     8169
      179     8170    2   EIS_INSTR: DO CASE ( FAULT_CODE );

   8170 20 000041   200110 235100       EIS_INSTR    LDA     FAULT_CODE,,AUTO
        20 000042   000004 115007                    CMPA    4,DL
        20 000043   000045 602005 20                 TNC     EIS_INSTR+4,AL
        20 000044   001247 710000 20                 TRA     s:8452
        20 000045   000051 710000 20                 TRA     s:8181
        20 000046   000201 710000 20                 TRA     s:8207
        20 000047   001247 710000 20                 TRA     s:8452
        20 000050   000301 710000 20                 TRA     s:8233

      180     8171
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:29   
      181     8172    2                   CASE( %OVERFLOW_CHECK ) ;

      182     8173
      183     8174        /*V*
      184     8175                               EXPONENT_FAULT
      185     8176                 If the element " SUBC " is equal to zero then the type of
      186     8177                 fault is an exponent fault( either overflow or underflow ).
      187     8178        */
      188     8179
      189     8180
      190     8181    2                     IF EIS.EIS_BIT THEN

   8181 20 000051   200076 474500                    LDP4    TEMP_IC$,,AUTO
        20 000052   400000 236100                    LDQ     0,,PR4
        20 000053   000400 316007                    CANQ    256,DL
        20 000054   000176 600000 20                 TZE     s:8196

      191     8182    3   OVERFLOW_CHECK:   DO CASE ( EIS.OPCODE ) ;

   8182 20 000055   400000 236100       OVERFLOW_CH* LDQ     0,,PR4
        20 000056   000011 772000                    QRL     9
        20 000057   000777 376007                    ANQ     511,DL
        20 000060   000202 136007                    SBLQ    130,DL
        20 000061   000104 116007                    CMPQ    68,DL
        20 000062   000064 602006 20                 TNC     OVERFLOW_CHECK+7,QL
        20 000063   001254 710000 20                 TRA     s:8458
        20 000064   000173 710000 20                 TRA     s:8190
        20 000065   000173 710000 20                 TRA     s:8190
        20 000066   000175 710000 20                 TRA     s:8192
        20 000067   000175 710000 20                 TRA     s:8192
        20 000070   000173 710000 20                 TRA     s:8190
        20 000071   000173 710000 20                 TRA     s:8190
        20 000072   000175 710000 20                 TRA     s:8192
        20 000073   000175 710000 20                 TRA     s:8192
        20 000074   000175 710000 20                 TRA     s:8192
        20 000075   000175 710000 20                 TRA     s:8192
        20 000076   000175 710000 20                 TRA     s:8192
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:30   
        20 000077   000175 710000 20                 TRA     s:8192
        20 000100   000175 710000 20                 TRA     s:8192
        20 000101   000175 710000 20                 TRA     s:8192
        20 000102   000175 710000 20                 TRA     s:8192
        20 000103   000175 710000 20                 TRA     s:8192
        20 000104   000170 710000 20                 TRA     s:8186
        20 000105   000170 710000 20                 TRA     s:8186
        20 000106   000175 710000 20                 TRA     s:8192
        20 000107   000175 710000 20                 TRA     s:8192
        20 000110   000170 710000 20                 TRA     s:8186
        20 000111   000170 710000 20                 TRA     s:8186
        20 000112   000175 710000 20                 TRA     s:8192
        20 000113   000175 710000 20                 TRA     s:8192
        20 000114   000175 710000 20                 TRA     s:8192
        20 000115   000175 710000 20                 TRA     s:8192
        20 000116   000175 710000 20                 TRA     s:8192
        20 000117   000175 710000 20                 TRA     s:8192
        20 000120   000175 710000 20                 TRA     s:8192
        20 000121   000175 710000 20                 TRA     s:8192
        20 000122   000175 710000 20                 TRA     s:8192
        20 000123   000175 710000 20                 TRA     s:8192
        20 000124   000175 710000 20                 TRA     s:8192
        20 000125   000175 710000 20                 TRA     s:8192
        20 000126   000175 710000 20                 TRA     s:8192
        20 000127   000175 710000 20                 TRA     s:8192
        20 000130   000175 710000 20                 TRA     s:8192
        20 000131   000175 710000 20                 TRA     s:8192
        20 000132   000175 710000 20                 TRA     s:8192
        20 000133   000175 710000 20                 TRA     s:8192
        20 000134   000175 710000 20                 TRA     s:8192
        20 000135   000175 710000 20                 TRA     s:8192
        20 000136   000175 710000 20                 TRA     s:8192
        20 000137   000175 710000 20                 TRA     s:8192
        20 000140   000175 710000 20                 TRA     s:8192
        20 000141   000175 710000 20                 TRA     s:8192
        20 000142   000175 710000 20                 TRA     s:8192
        20 000143   000175 710000 20                 TRA     s:8192
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:31   
        20 000144   000175 710000 20                 TRA     s:8192
        20 000145   000175 710000 20                 TRA     s:8192
        20 000146   000175 710000 20                 TRA     s:8192
        20 000147   000175 710000 20                 TRA     s:8192
        20 000150   000175 710000 20                 TRA     s:8192
        20 000151   000175 710000 20                 TRA     s:8192
        20 000152   000175 710000 20                 TRA     s:8192
        20 000153   000175 710000 20                 TRA     s:8192
        20 000154   000175 710000 20                 TRA     s:8192
        20 000155   000175 710000 20                 TRA     s:8192
        20 000156   000175 710000 20                 TRA     s:8192
        20 000157   000175 710000 20                 TRA     s:8192
        20 000160   000175 710000 20                 TRA     s:8192
        20 000161   000175 710000 20                 TRA     s:8192
        20 000162   000173 710000 20                 TRA     s:8190
        20 000163   000173 710000 20                 TRA     s:8190
        20 000164   000175 710000 20                 TRA     s:8192
        20 000165   000175 710000 20                 TRA     s:8192
        20 000166   000175 710000 20                 TRA     s:8192
        20 000167   000173 710000 20                 TRA     s:8190

      192     8183
      193     8184    3                       CASE ( %AD3D, %DV3D, %MP3D, %SB3D ) ;

      194     8185
      195     8186    3                         INSTR.IC = INSTR.IC + %FOUR ;

   8186 20 000170   000004 622011                    EAX2    4,X1
        20 000171   200111 742100                    STX2    IC_PTR$,,AUTO
        20 000172   001254 710000 20                 TRA     s:8458

      196     8187
      197     8188    3                       CASE ( %AD2D, %BTD, %DTB, %DV2D, %MP2D, %MVN, %SB2D );

      198     8189
      199     8190    3                         INSTR.IC = INSTR.IC + %THREE ;

PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:32   
   8190 20 000173   000003 622011                    EAX2    3,X1
        20 000174   200111 742100                    STX2    IC_PTR$,,AUTO

      200     8191
      201     8192    3                     END OVERFLOW_CHECK ; /* CASE OF OPCODE */

   8192 20 000175   001254 710000 20                 TRA     s:8458

      202     8193
      203     8194    2                     ELSE
      204     8195
      205     8196    2                       INSTR.IC = INSTR.IC + %ONE ;

   8196 20 000176   000001 622011                    EAX2    1,X1
        20 000177   200111 742100                    STX2    IC_PTR$,,AUTO
        20 000200   001254 710000 20                 TRA     s:8458

      206     8197
      207     8198    2                   CASE( %DIVIDE_CHECK ) ;

      208     8199
      209     8200        /*V*
      210     8201                               DIVIDE_BY_ZERO_FAULT
      211     8202                 If the element of B$FLT " SUBC " is equal to one then the
      212     8203                 type of fault is a division by zero fault.
      213     8204
      214     8205        */
      215     8206
      216     8207    2                     BIN_36 = BITBIN(INSTR) ;

   8207 20 000201   200111 235100                    LDA     IC_PTR$,,AUTO
        20 000202   200077 755100                    STA     BIN_36,,AUTO

      217     8208    2                     CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;

   8208 20 000203   200100 634500                    EPPR4   CHAR_12,,AUTO
        20 000204   200133 454500                    STP4    IR+5,,AUTO
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:33   
        20 000205   200077 635500                    EPPR5   BIN_36,,AUTO
        20 000206   200132 455500                    STP5    IR+4,,AUTO
        20 000207   200132 630500                    EPPR0   IR+4,,AUTO
        20 000210   000002 631400 21                 EPPR1   2
        20 000211   000000 701000 xent               TSX1    X8CO$CONV_TO_OCTAL
        20 000212   000000 011000                    NOP     0

      218     8209    2                     CALL CONCAT(SPECIAL_ERR_MSG,'Fault occurred at address ',

   8209 20 000213   040100 100400                    MLR     fill='040'O
        20 000214   000014 000032 19                 ADSC9   DELTA+2                  cn=0,n=26
        20 000215   200050 000032                    ADSC9   SPECIAL_ERR_MSG,,AUTO    cn=0,n=26
        20 000216   040100 100500                    MLR     fill='040'O
        20 000217   200100 000006                    ADSC9   CHAR_12,,AUTO            cn=0,n=6
        20 000220   200056 400066                    ADSC9   SPECIAL_ERR_MSG+6,,AUTO  cn=2,n=54

      219     8210    2                       SUBSTR(CHAR_12,0,6)) ;
      220     8211    2                     CALL X8ER$ERROR ( %ZERO_DIVIDE, SPECIAL_ERR_MSG );

   8211 20 000221   200050 630500                    EPPR0   SPECIAL_ERR_MSG,,AUTO
        20 000222   200133 450500                    STP0    IR+5,,AUTO
        20 000223   000004 236000 21                 LDQ     4
        20 000224   200132 756100                    STQ     IR+4,,AUTO
        20 000225   200132 630500                    EPPR0   IR+4,,AUTO
        20 000226   000002 631400 21                 EPPR1   2
        20 000227   000000 701000 xent               TSX1    X8ER$ERROR
        20 000230   000000 011000                    NOP     0

      221     8212
      222     8213    2                     IF EIS.EIS_BIT THEN

   8213 20 000231   200076 470500                    LDP0    TEMP_IC$,,AUTO
        20 000232   000000 236100                    LDQ     0,,PR0
        20 000233   000400 316007                    CANQ    256,DL
        20 000234   000275 600000 20                 TZE     s:8228

      223     8214    3   DIVIDE_CHECK:     DO CASE( EIS.OPCODE ) ;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:34   

   8214 20 000235   000000 236100       DIVIDE_CHECK LDQ     0,,PR0
        20 000236   000011 772000                    QRL     9
        20 000237   000777 376007                    ANQ     511,DL
        20 000240   000207 136007                    SBLQ    135,DL
        20 000241   000021 116007                    CMPQ    17,DL
        20 000242   000244 602006 20                 TNC     DIVIDE_CHECK+7,QL
        20 000243   001254 710000 20                 TRA     s:8458
        20 000244   000271 710000 20                 TRA     s:8222
        20 000245   000274 710000 20                 TRA     s:8224
        20 000246   000274 710000 20                 TRA     s:8224
        20 000247   000274 710000 20                 TRA     s:8224
        20 000250   000274 710000 20                 TRA     s:8224
        20 000251   000274 710000 20                 TRA     s:8224
        20 000252   000274 710000 20                 TRA     s:8224
        20 000253   000274 710000 20                 TRA     s:8224
        20 000254   000274 710000 20                 TRA     s:8224
        20 000255   000274 710000 20                 TRA     s:8224
        20 000256   000274 710000 20                 TRA     s:8224
        20 000257   000274 710000 20                 TRA     s:8224
        20 000260   000274 710000 20                 TRA     s:8224
        20 000261   000274 710000 20                 TRA     s:8224
        20 000262   000274 710000 20                 TRA     s:8224
        20 000263   000274 710000 20                 TRA     s:8224
        20 000264   000265 710000 20                 TRA     s:8218

      224     8215
      225     8216    3                       CASE ( %DV3D ) ;

      226     8217
      227     8218    3                         INSTR.IC = INSTR.IC + %FOUR ;

   8218 20 000265   200111 220100                    LDX0    IC_PTR$,,AUTO
        20 000266   000004 621010                    EAX1    4,X0
        20 000267   200111 741100                    STX1    IC_PTR$,,AUTO
        20 000270   001254 710000 20                 TRA     s:8458

PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:35   
      228     8219
      229     8220    3                       CASE ( %DV2D ) ;

      230     8221
      231     8222    3                         INSTR.IC = INSTR.IC + %THREE ;

   8222 20 000271   200111 220100                    LDX0    IC_PTR$,,AUTO
        20 000272   000003 621010                    EAX1    3,X0
        20 000273   200111 741100                    STX1    IC_PTR$,,AUTO

      232     8223
      233     8224    3                     END DIVIDE_CHECK ; /* CASE OF OPCODE - DIVIDE CHECK */

   8224 20 000274   001254 710000 20                 TRA     s:8458

      234     8225
      235     8226    2                     ELSE
      236     8227
      237     8228    2                       INSTR.IC = INSTR.IC + %ONE ;

   8228 20 000275   200111 220100                    LDX0    IC_PTR$,,AUTO
        20 000276   000001 621010                    EAX1    1,X0
        20 000277   200111 741100                    STX1    IC_PTR$,,AUTO
        20 000300   001254 710000 20                 TRA     s:8458

      238     8229
      239     8230
      240     8231    2                   CASE( %IPR_FAULT ) ;

      241     8232
      242     8233    2                     IF (EIS.EIS_BIT) AND ((EIS.OPCODE = %MVNE) OR (EIS.OPCODE =

   8233 20 000301   200076 474500                    LDP4    TEMP_IC$,,AUTO
        20 000302   400000 236100                    LDQ     0,,PR4
        20 000303   000400 316007                    CANQ    256,DL
        20 000304   001211 600000 20                 TZE     s:8440
        20 000305   400000 236100                    LDQ     0,,PR4
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:36   
        20 000306   777000 376007                    ANQ     -512,DL
        20 000307   024000 116007                    CMPQ    10240,DL
        20 000310   000321 600000 20                 TZE     s:8238
        20 000311   305000 116007                    CMPQ    100864,DL
        20 000312   000321 600000 20                 TZE     s:8238
        20 000313   303000 116007                    CMPQ    99840,DL
        20 000314   000321 600000 20                 TZE     s:8238
        20 000315   202000 116007                    CMPQ    66560,DL
        20 000316   001211 602000 20                 TNC     s:8440
        20 000317   301000 116007                    CMPQ    98816,DL
        20 000320   001211 603000 20                 TRC     s:8440

      243     8234    2                        %DTB) OR (EIS.OPCODE = %CMPN) OR
      244     8235    2                        ((EIS.OPCODE >= %AD2D) AND (EIS.OPCODE <= %MVN))) THEN
      245     8236    3                     DO ;

      246     8237
      247     8238    3                       BIN_36 = BITBIN(INSTR) ;

   8238 20 000321   200111 235100                    LDA     IC_PTR$,,AUTO
        20 000322   200077 755100                    STA     BIN_36,,AUTO

      248     8239    3                       CHAR_12 = %BLANC ;

   8239 20 000323   040100 100400                    MLR     fill='040'O
        20 000324   000005 000001 21                 ADSC9   5                        cn=0,n=1
        20 000325   200100 000014                    ADSC9   CHAR_12,,AUTO            cn=0,n=12

      249     8240    3                       CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;

   8240 20 000326   200100 635500                    EPPR5   CHAR_12,,AUTO
        20 000327   200133 455500                    STP5    IR+5,,AUTO
        20 000330   200077 636500                    EPPR6   BIN_36,,AUTO
        20 000331   200132 456500                    STP6    IR+4,,AUTO
        20 000332   200132 630500                    EPPR0   IR+4,,AUTO
        20 000333   000002 631400 21                 EPPR1   2
        20 000334   000000 701000 xent               TSX1    X8CO$CONV_TO_OCTAL
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:37   
        20 000335   000000 011000                    NOP     0

      250     8241    3                       SPECIAL_ERR_MSG = SUBSTR(CHAR_12,0,6) ;

   8241 20 000336   040100 100500                    MLR     fill='040'O
        20 000337   200100 000006                    ADSC9   CHAR_12,,AUTO            cn=0,n=6
        20 000340   200050 000120                    ADSC9   SPECIAL_ERR_MSG,,AUTO    cn=0,n=80

      251     8242    3                       BIN_36 = BITBIN(EIS) ;

   8242 20 000341   200076 470500                    LDP0    TEMP_IC$,,AUTO
        20 000342   000000 235100                    LDA     0,,PR0
        20 000343   200077 755100                    STA     BIN_36,,AUTO

      252     8243    3                       CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;

   8243 20 000344   200100 631500                    EPPR1   CHAR_12,,AUTO
        20 000345   200133 451500                    STP1    IR+5,,AUTO
        20 000346   200077 633500                    EPPR3   BIN_36,,AUTO
        20 000347   200132 453500                    STP3    IR+4,,AUTO
        20 000350   200132 630500                    EPPR0   IR+4,,AUTO
        20 000351   000002 631400 21                 EPPR1   2
        20 000352   000000 701000 xent               TSX1    X8CO$CONV_TO_OCTAL
        20 000353   000000 011000                    NOP     0

      253     8244    3                       CALL CONCAT(SUBSTR(SPECIAL_ERR_MSG,6),'     ',CHAR_12) ;

   8244 20 000354   040100 100400                    MLR     fill='040'O
        20 000355   000023 000005 19                 ADSC9   DELTA+9                  cn=0,n=5
        20 000356   200051 400005                    ADSC9   SPECIAL_ERR_MSG+1,,AUTO  cn=2,n=5
        20 000357   040100 100500                    MLR     fill='040'O
        20 000360   200100 000014                    ADSC9   CHAR_12,,AUTO            cn=0,n=12
        20 000361   200052 600105                    ADSC9   SPECIAL_ERR_MSG+2,,AUTO  cn=3,n=69

      254     8245    3                       CALL X8ER$ERROR( %ILLEGAL_EIS_DATA, SPECIAL_ERR_MSG );

   8245 20 000362   200050 630500                    EPPR0   SPECIAL_ERR_MSG,,AUTO
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:38   
        20 000363   200133 450500                    STP0    IR+5,,AUTO
        20 000364   000007 236000 21                 LDQ     7
        20 000365   200132 756100                    STQ     IR+4,,AUTO
        20 000366   200132 630500                    EPPR0   IR+4,,AUTO
        20 000367   000002 631400 21                 EPPR1   2
        20 000370   000000 701000 xent               TSX1    X8ER$ERROR
        20 000371   000000 011000                    NOP     0

      255     8246    3                       IF EIS.MF1 = %FOUR THEN

   8246 20 000372   200076 470500                    LDP0    TEMP_IC$,,AUTO
        20 000373   000000 236100                    LDQ     0,,PR0
        20 000374   000177 376007                    ANQ     127,DL
        20 000375   000004 116007                    CMPQ    4,DL
        20 000376   000402 601000 20                 TNZ     s:8249

      256     8247    3                         IC_REL1 = '1'B ;

   8247 20 000377   400000 236003                    LDQ     -131072,DU
        20 000400   200104 756100                    STQ     IC_REL1,,AUTO
        20 000401   000420 710000 20                 TRA     s:8260

      257     8248    3                       ELSE
      258     8249    3                         IF EIS.MOD_FLD1.AR THEN

   8249 20 000402   000000 236100                    LDQ     0,,PR0
        20 000403   000100 316007                    CANQ    64,DL
        20 000404   000414 600000 20                 TZE     s:8258

      259     8250    4                         DO ;

      260     8251
      261     8252    4                           REG1 = EIS.MOD_FLD1.REG ;

   8252 20 000405   000000 236100                    LDQ     0,,PR0
        20 000406   000040 736000                    QLS     32
        20 000407   000040 732000                    QRS     32
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:39   
        20 000410   200123 756100                    STQ     REG1,,AUTO

      262     8253    4                           AR1 = '1'B ;

   8253 20 000411   400000 236003                    LDQ     -131072,DU
        20 000412   200106 756100                    STQ     AR1,,AUTO

      263     8254
      264     8255    4                         END ;

   8255 20 000413   000420 710000 20                 TRA     s:8260

      265     8256    3                         ELSE
      266     8257
      267     8258    3                           CALL X8ER$ERROR ( %NO_ADDR_TO_DATA );

   8258 20 000414   000012 630400 21                 EPPR0   10
        20 000415   000010 631400 21                 EPPR1   8
        20 000416   000000 701000 xent               TSX1    X8ER$ERROR
        20 000417   000000 011000                    NOP     0

      268     8259
      269     8260    3                       IF EIS.MF2 = %FOUR THEN

   8260 20 000420   200076 470500                    LDP0    TEMP_IC$,,AUTO
        20 000421   000000 236100                    LDQ     0,,PR0
        20 000422   000177 376003                    ANQ     127,DU
        20 000423   000004 116003                    CMPQ    4,DU
        20 000424   000430 601000 20                 TNZ     s:8263

      270     8261    3                         IC_REL2 = '1'B ;

   8261 20 000425   400000 236003                    LDQ     -131072,DU
        20 000426   200105 756100                    STQ     IC_REL2,,AUTO
        20 000427   000446 710000 20                 TRA     s:8273

      271     8262    3                       ELSE
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:40   
      272     8263    3                         IF EIS.MOD_FLD2.AR THEN

   8263 20 000430   000000 236100                    LDQ     0,,PR0
        20 000431   000100 316003                    CANQ    64,DU
        20 000432   000442 600000 20                 TZE     s:8271

      273     8264    4                         DO ;

      274     8265
      275     8266    4                           REG2 = EIS.MOD_FLD2.REG ;

   8266 20 000433   000000 236100                    LDQ     0,,PR0
        20 000434   000016 736000                    QLS     14
        20 000435   000040 732000                    QRS     32
        20 000436   200124 756100                    STQ     REG2,,AUTO

      276     8267    4                           AR2 = '1'B ;

   8267 20 000437   400000 236003                    LDQ     -131072,DU
        20 000440   200107 756100                    STQ     AR2,,AUTO

      277     8268
      278     8269    4                         END ;

   8269 20 000441   000446 710000 20                 TRA     s:8273

      279     8270    3                         ELSE
      280     8271    3                           CALL X8ER$ERROR ( %NO_ADDR_TO_DATA );

   8271 20 000442   000012 630400 21                 EPPR0   10
        20 000443   000010 631400 21                 EPPR1   8
        20 000444   000000 701000 xent               TSX1    X8ER$ERROR
        20 000445   000000 011000                    NOP     0

      281     8272
      282     8273    4                       DO I = %ONE TO NO_OF_DSCRPTRS ;

PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:41   
   8273 20 000446   000001 235007                    LDA     1,DL
        20 000447   200112 755100                    STA     I,,AUTO
        20 000450   001170 710000 20                 TRA     s:8425+1

      283     8274
      284     8275    4                         INSTR.IC = INSTR.IC + %ONE ;

   8275 20 000451   200111 220100                    LDX0    IC_PTR$,,AUTO
        20 000452   000001 621010                    EAX1    1,X0
        20 000453   200111 741100                    STX1    IC_PTR$,,AUTO

      285     8276    4                         TEMP_IC$ = IC_PTR$ ;

   8276 20 000454   200111 236100                    LDQ     IC_PTR$,,AUTO
        20 000455   200076 756100                    STQ     TEMP_IC$,,AUTO

      286     8277    4                         IF  I ~= %THREE THEN

   8277 20 000456   200112 235100                    LDA     I,,AUTO
        20 000457   000003 115007                    CMPA    3,DL
        20 000460   001131 600000 20                 TZE     s:8414

      287     8278    5                         DO ;

      288     8279
      289     8280    5                           IF (( I = %ONE ) AND ( IC_REL1 )) OR

   8280 20 000461   000001 115007                    CMPA    1,DL
        20 000462   000465 601000 20                 TNZ     s:8280+4
        20 000463   200104 234100                    SZN     IC_REL1,,AUTO
        20 000464   000471 604000 20                 TMI     s:8284
        20 000465   000002 115007                    CMPA    2,DL
        20 000466   000555 601000 20                 TNZ     s:8295
        20 000467   200105 234100                    SZN     IC_REL2,,AUTO
        20 000470   000555 605000 20                 TPL     s:8295

      290     8281    5                              (( I = %TWO ) AND ( IC_REL2 )) THEN
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:42   
      291     8282    6                           DO ;

      292     8283
      293     8284    6                             REL_IC.N_IC.TEMP_IC1 = INSTR.IC + DESC.OFFSET - I ;

   8284 20 000471   200076 470500                    LDP0    TEMP_IC$,,AUTO
        20 000472   000000 236100                    LDQ     0,,PR0
        20 000473   000022 772000                    QRL     18
        20 000474   200132 756100                    STQ     IR+4,,AUTO
        20 000475   200111 236100                    LDQ     IC_PTR$,,AUTO
        20 000476   000022 772000                    QRL     18
        20 000477   200132 036100                    ADLQ    IR+4,,AUTO
        20 000500   200112 136100                    SBLQ    I,,AUTO
        20 000501   000000 620006                    EAX0    0,QL
        20 000502   200113 740100                    STX0    TEMP_IC2$,,AUTO

      294     8285    6                             BIN_36 = BITBIN(DESC) ;

   8285 20 000503   000000 235100                    LDA     0,,PR0
        20 000504   200077 755100                    STA     BIN_36,,AUTO

      295     8286    6                             CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;

   8286 20 000505   200100 631500                    EPPR1   CHAR_12,,AUTO
        20 000506   200133 451500                    STP1    IR+5,,AUTO
        20 000507   200077 633500                    EPPR3   BIN_36,,AUTO
        20 000510   200132 453500                    STP3    IR+4,,AUTO
        20 000511   200132 630500                    EPPR0   IR+4,,AUTO
        20 000512   000002 631400 21                 EPPR1   2
        20 000513   000000 701000 xent               TSX1    X8CO$CONV_TO_OCTAL
        20 000514   000000 011000                    NOP     0

      296     8287    6                             CALL CONCAT(SPECIAL_ERR_MSG,'           ',CHAR_12) ;

   8287 20 000515   040100 100400                    MLR     fill='040'O
        20 000516   000025 000013 19                 ADSC9   DELTA+11                 cn=0,n=11
        20 000517   200050 000013                    ADSC9   SPECIAL_ERR_MSG,,AUTO    cn=0,n=11
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:43   
        20 000520   040100 100500                    MLR     fill='040'O
        20 000521   200100 000014                    ADSC9   CHAR_12,,AUTO            cn=0,n=12
        20 000522   200052 600105                    ADSC9   SPECIAL_ERR_MSG+2,,AUTO  cn=3,n=69

      297     8288    6                             BIN_36 = DATA ;

   8288 20 000523   200113 470500                    LDP0    TEMP_IC2$,,AUTO
        20 000524   000000 235100                    LDA     0,,PR0
        20 000525   200077 755100                    STA     BIN_36,,AUTO

      298     8289    6                             CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;

   8289 20 000526   200100 631500                    EPPR1   CHAR_12,,AUTO
        20 000527   200133 451500                    STP1    IR+5,,AUTO
        20 000530   200077 633500                    EPPR3   BIN_36,,AUTO
        20 000531   200132 453500                    STP3    IR+4,,AUTO
        20 000532   200132 630500                    EPPR0   IR+4,,AUTO
        20 000533   000002 631400 21                 EPPR1   2
        20 000534   000000 701000 xent               TSX1    X8CO$CONV_TO_OCTAL
        20 000535   000000 011000                    NOP     0

      299     8290    6                             CALL CONCAT(SUBSTR(SPECIAL_ERR_MSG,23),'    ',CHAR_12) ;

   8290 20 000536   040100 100400                    MLR     fill='040'O
        20 000537   000023 000004 19                 ADSC9   DELTA+9                  cn=0,n=4
        20 000540   200055 600004                    ADSC9   SPECIAL_ERR_MSG+5,,AUTO  cn=3,n=4
        20 000541   040100 100500                    MLR     fill='040'O
        20 000542   200100 000014                    ADSC9   CHAR_12,,AUTO            cn=0,n=12
        20 000543   200056 600065                    ADSC9   SPECIAL_ERR_MSG+6,,AUTO  cn=3,n=53

      300     8291    6                             CALL X8ER$ERROR( %SPECIAL_MSG, SPECIAL_ERR_MSG);

   8291 20 000544   200050 630500                    EPPR0   SPECIAL_ERR_MSG,,AUTO
        20 000545   200133 450500                    STP0    IR+5,,AUTO
        20 000546   000014 236000 21                 LDQ     12
        20 000547   200132 756100                    STQ     IR+4,,AUTO
        20 000550   200132 630500                    EPPR0   IR+4,,AUTO
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:44   
        20 000551   000002 631400 21                 EPPR1   2
        20 000552   000000 701000 xent               TSX1    X8ER$ERROR
        20 000553   000000 011000                    NOP     0

      301     8292
      302     8293    6                           END ;

   8293 20 000554   001167 710000 20                 TRA     s:8425

      303     8294    5                           ELSE
      304     8295    5                           IF (( I = %ONE ) AND ( AR1 )) OR

   8295 20 000555   000001 115007                    CMPA    1,DL
        20 000556   000561 601000 20                 TNZ     s:8295+4
        20 000557   200106 234100                    SZN     AR1,,AUTO
        20 000560   000565 604000 20                 TMI     s:8299
        20 000561   000002 115007                    CMPA    2,DL
        20 000562   001167 601000 20                 TNZ     s:8425
        20 000563   200107 234100                    SZN     AR2,,AUTO
        20 000564   001167 605000 20                 TPL     s:8425

      305     8296    5                              (( I = %TWO ) AND ( AR2 )) THEN
      306     8297    6                           DO ;

      307     8298
      308     8299    6                             TEMP_IC2$ = B$EXCFR$->B$EXCFR.PRS(DESC.PTR_STFF.PR#) ;

   8299 20 000565   200076 470500                    LDP0    TEMP_IC$,,AUTO
        20 000566   000000 236100                    LDQ     0,,PR0
        20 000567   000041 772000                    QRL     33
        20 000570   200075 471500                    LDP1    B$EXCFR$,,AUTO
        20 000571   100020 236106                    LDQ     16,QL,PR1
        20 000572   200113 756100                    STQ     TEMP_IC2$,,AUTO

      309     8300    6                             IF I = %ONE THEN

   8300 20 000573   000001 115007                    CMPA    1,DL
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:45   
        20 000574   000600 601000 20                 TNZ     s:8303

      310     8301    6                               REG = REG1 ;

   8301 20 000575   200123 235100                    LDA     REG1,,AUTO
        20 000576   200122 755100                    STA     REG,,AUTO
        20 000577   000602 710000 20                 TRA     M_F_REG_BITS

      311     8302    6                             ELSE
      312     8303    6                               REG = REG2 ;

   8303 20 000600   200124 235100                    LDA     REG2,,AUTO
        20 000601   200122 755100                    STA     REG,,AUTO

      313     8304    7   M_F_REG_BITS:             DO CASE ( REG ) ;

   8304 20 000602   000020 115007       M_F_REG_BITS CMPA    16,DL
        20 000603   000605 602005 20                 TNC     M_F_REG_BITS+3,AL
        20 000604   000673 710000 20                 TRA     s:8347
        20 000605   000673 710000 20                 TRA     s:8347
        20 000606   000673 710000 20                 TRA     s:8347
        20 000607   000673 710000 20                 TRA     s:8347
        20 000610   000673 710000 20                 TRA     s:8347
        20 000611   000673 710000 20                 TRA     s:8347
        20 000612   000625 710000 20                 TRA     s:8308
        20 000613   000630 710000 20                 TRA     s:8312
        20 000614   000673 710000 20                 TRA     s:8347
        20 000615   000633 710000 20                 TRA     s:8316
        20 000616   000637 710000 20                 TRA     s:8320
        20 000617   000643 710000 20                 TRA     s:8324
        20 000620   000647 710000 20                 TRA     s:8327
        20 000621   000653 710000 20                 TRA     s:8331
        20 000622   000657 710000 20                 TRA     s:8335
        20 000623   000663 710000 20                 TRA     s:8339
        20 000624   000667 710000 20                 TRA     s:8343

      314     8305
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:46   
      315     8306    7                               CASE ( %A_REG ) ;

      316     8307
      317     8308    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.A ;

   8308 20 000625   100054 235100                    LDA     44,,PR1
        20 000626   200125 755100                    STA     REG_OFFSET,,AUTO
        20 000627   000674 710000 20                 TRA     s:8351

      318     8309
      319     8310    7                               CASE ( %Q_REG ) ;

      320     8311
      321     8312    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.Q ;

   8312 20 000630   100055 235100                    LDA     45,,PR1
        20 000631   200125 755100                    STA     REG_OFFSET,,AUTO
        20 000632   000674 710000 20                 TRA     s:8351

      322     8313
      323     8314    7                               CASE ( %X0 ) ;

      324     8315
      325     8316    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.XREG(0) ;

   8316 20 000633   100050 236100                    LDQ     40,,PR1
        20 000634   000022 772000                    QRL     18
        20 000635   200125 756100                    STQ     REG_OFFSET,,AUTO
        20 000636   000674 710000 20                 TRA     s:8351

      326     8317
      327     8318    7                               CASE ( %X1 ) ;

      328     8319
      329     8320    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.XREG(1) ;

   8320 20 000637   100050 236100                    LDQ     40,,PR1
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:47   
        20 000640   777777 376007                    ANQ     -1,DL
        20 000641   200125 756100                    STQ     REG_OFFSET,,AUTO
        20 000642   000674 710000 20                 TRA     s:8351

      330     8321
      331     8322    7                               CASE ( %X2 ) ;

      332     8323
      333     8324    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.XREG(2) ;

   8324 20 000643   100051 236100                    LDQ     41,,PR1
        20 000644   000022 772000                    QRL     18
        20 000645   200125 756100                    STQ     REG_OFFSET,,AUTO
        20 000646   000674 710000 20                 TRA     s:8351

      334     8325    7                               CASE ( %X3 ) ;

      335     8326
      336     8327    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.XREG(3) ;

   8327 20 000647   100051 236100                    LDQ     41,,PR1
        20 000650   777777 376007                    ANQ     -1,DL
        20 000651   200125 756100                    STQ     REG_OFFSET,,AUTO
        20 000652   000674 710000 20                 TRA     s:8351

      337     8328
      338     8329    7                               CASE ( %X4 ) ;

      339     8330
      340     8331    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.XREG(4) ;

   8331 20 000653   100052 236100                    LDQ     42,,PR1
        20 000654   000022 772000                    QRL     18
        20 000655   200125 756100                    STQ     REG_OFFSET,,AUTO
        20 000656   000674 710000 20                 TRA     s:8351

      341     8332
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:48   
      342     8333    7                               CASE ( %X5 ) ;

      343     8334
      344     8335    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.XREG(5) ;

   8335 20 000657   100052 236100                    LDQ     42,,PR1
        20 000660   777777 376007                    ANQ     -1,DL
        20 000661   200125 756100                    STQ     REG_OFFSET,,AUTO
        20 000662   000674 710000 20                 TRA     s:8351

      345     8336
      346     8337    7                               CASE ( %X6 ) ;

      347     8338
      348     8339    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.XREG(6) ;

   8339 20 000663   100053 236100                    LDQ     43,,PR1
        20 000664   000022 772000                    QRL     18
        20 000665   200125 756100                    STQ     REG_OFFSET,,AUTO
        20 000666   000674 710000 20                 TRA     s:8351

      349     8340
      350     8341    7                               CASE ( %X7 ) ;

      351     8342
      352     8343    7                                 REG_OFFSET = B$EXCFR$->B$EXCFR.REGS.XREG(7) ;

   8343 20 000667   100053 236100                    LDQ     43,,PR1
        20 000670   777777 376007                    ANQ     -1,DL
        20 000671   200125 756100                    STQ     REG_OFFSET,,AUTO
        20 000672   000674 710000 20                 TRA     s:8351

      353     8344
      354     8345    7                               CASE ( ELSE, %ZERO ) ;

      355     8346
      356     8347    7                                 REG_OFFSET = %ZERO ;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:49   

   8347 20 000673   200125 450100                    STZ     REG_OFFSET,,AUTO

      357     8348
      358     8349    7                             END M_F_REG_BITS ;

      359     8350
      360     8351    6                             IF DESC.TN = %ZERO THEN

   8351 20 000674   000000 236100                    LDQ     0,,PR0
        20 000675   040000 316007                    CANQ    16384,DL
        20 000676   000703 601000 20                 TNZ     s:8362

      361     8352                                  /* 9-BIT BYTES */
      362     8353    7                             DO ;

      363     8354
      364     8355    7                               BYTE_PER_WORD = %FOUR ;

   8355 20 000677   000004 235007                    LDA     4,DL
        20 000700   200114 755100                    STA     BYTE_PER_WORD,,AUTO

      365     8356    7                               DATA_TYPE = %NINE_BIT ;

   8356 20 000701   200115 755100                    STA     DATA_TYPE,,AUTO

      366     8357
      367     8358    7                             END ;

   8358 20 000702   000706 710000 20                 TRA     s:8367

      368     8359    6                             ELSE
      369     8360    7                             DO ;

      370     8361
      371     8362    7                               BYTE_PER_WORD = %EIGHT ;

PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:50   
   8362 20 000703   000010 235007                    LDA     8,DL
        20 000704   200114 755100                    STA     BYTE_PER_WORD,,AUTO

      372     8363    7                               DATA_TYPE = %FOUR_BIT ;

   8363 20 000705   200115 755100                    STA     DATA_TYPE,,AUTO

      373     8364
      374     8365    7                             END ;

      375     8366
      376     8367    6                             TOTAL_BYTE_OFFSET = REG_OFFSET + DESC.CN +

   8367 20 000706   000000 236100                    LDQ     0,,PR0
        20 000707   000022 736000                    QLS     18
        20 000710   000041 732000                    QRS     33
        20 000711   200125 036100                    ADLQ    REG_OFFSET,,AUTO
        20 000712   200132 756100                    STQ     IR+4,,AUTO
        20 000713   000000 236100                    LDQ     0,,PR0
        20 000714   000003 736000                    QLS     3
        20 000715   000025 732000                    QRS     21
        20 000716   200114 402100                    MPY     BYTE_PER_WORD,,AUTO
        20 000717   200132 036100                    ADLQ    IR+4,,AUTO
        20 000720   200116 756100                    STQ     TOTAL_BYTE_OFFSET,,AUTO

      377     8368    6                               (DESC.PTR_STFF.Y * BYTE_PER_WORD) ;
      378     8369    6                             CHAR_OFFSET = MOD(TOTAL_BYTE_OFFSET,DATA_TYPE ) ;

   8369 20 000721   200115 506100                    DIV     DATA_TYPE,,AUTO
        20 000722   200117 755100                    STA     CHAR_OFFSET,,AUTO

      379     8370    6                             WORD_OFFSET = TOTAL_BYTE_OFFSET / DATA_TYPE ;

   8370 20 000723   200116 236100                    LDQ     TOTAL_BYTE_OFFSET,,AUTO
        20 000724   200115 506100                    DIV     DATA_TYPE,,AUTO
        20 000725   200120 756100                    STQ     WORD_OFFSET,,AUTO

PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:51   
      380     8371    6                             REL_IC.N_IC.TEMP_IC1 = REL_IC.N_IC.TEMP_IC1 +

   8371 20 000726   200113 236100                    LDQ     TEMP_IC2$,,AUTO
        20 000727   000022 772000                    QRL     18
        20 000730   200120 036100                    ADLQ    WORD_OFFSET,,AUTO
        20 000731   000000 620006                    EAX0    0,QL
        20 000732   200113 740100                    STX0    TEMP_IC2$,,AUTO

      381     8372    6                               WORD_OFFSET ;
      382     8373    6                             REL_IC.IC_CN = REL_IC.IC_CN + CHAR_OFFSET ;

   8373 20 000733   200113 236100                    LDQ     TEMP_IC2$,,AUTO
        20 000734   000017 772000                    QRL     15
        20 000735   200117 036100                    ADLQ    CHAR_OFFSET,,AUTO
        20 000736   000017 736000                    QLS     15
        20 000737   200113 676100                    ERQ     TEMP_IC2$,,AUTO
        20 000740   000015 376000 21                 ANQ     13
        20 000741   200113 656100                    ERSQ    TEMP_IC2$,,AUTO

      383     8374
      384     8375    7                             DO J = %ONE TO DESC.N / DATA_TYPE ;

   8375 20 000742   000001 235007                    LDA     1,DL
        20 000743   200121 755100                    STA     J,,AUTO
        20 000744   001015 710000 20                 TRA     s:8391+1

      385     8376
      386     8377    7                               IF J = %ONE THEN

   8377 20 000745   200121 235100                    LDA     J,,AUTO
        20 000746   000001 115007                    CMPA    1,DL
        20 000747   000763 601000 20                 TNZ     s:8384

      387     8378    8                               DO ;

      388     8379
      389     8380    8                                 BIN_36 = BITBIN(DESC) ;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:52   

   8380 20 000750   200076 470500                    LDP0    TEMP_IC$,,AUTO
        20 000751   000000 235100                    LDA     0,,PR0
        20 000752   200077 755100                    STA     BIN_36,,AUTO

      390     8381    8                                 CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;

   8381 20 000753   200100 631500                    EPPR1   CHAR_12,,AUTO
        20 000754   200133 451500                    STP1    IR+5,,AUTO
        20 000755   200077 633500                    EPPR3   BIN_36,,AUTO
        20 000756   200132 453500                    STP3    IR+4,,AUTO
        20 000757   200132 630500                    EPPR0   IR+4,,AUTO
        20 000760   000002 631400 21                 EPPR1   2
        20 000761   000000 701000 xent               TSX1    X8CO$CONV_TO_OCTAL
        20 000762   000000 011000                    NOP     0

      391     8382
      392     8383    8                               END ;

      393     8384    7                               BIN_36 = DATA ;

   8384 20 000763   200113 470500                    LDP0    TEMP_IC2$,,AUTO
        20 000764   000000 235100                    LDA     0,,PR0
        20 000765   200077 755100                    STA     BIN_36,,AUTO

      394     8385    7                               CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;

   8385 20 000766   200100 631500                    EPPR1   CHAR_12,,AUTO
        20 000767   200133 451500                    STP1    IR+5,,AUTO
        20 000770   200077 633500                    EPPR3   BIN_36,,AUTO
        20 000771   200132 453500                    STP3    IR+4,,AUTO
        20 000772   200132 630500                    EPPR0   IR+4,,AUTO
        20 000773   000002 631400 21                 EPPR1   2
        20 000774   000000 701000 xent               TSX1    X8CO$CONV_TO_OCTAL
        20 000775   000000 011000                    NOP     0

      395     8386    7                               CALL CONCAT(SUBSTR(SPECIAL_ERR_MSG,27),CHAR_12) ;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:53   

   8386 20 000776   040100 100500                    MLR     fill='040'O
        20 000777   200100 000014                    ADSC9   CHAR_12,,AUTO            cn=0,n=12
        20 001000   200056 600065                    ADSC9   SPECIAL_ERR_MSG+6,,AUTO  cn=3,n=53

      396     8387    7                               CALL X8ER$ERROR( %SPECIAL_MSG, SPECIAL_ERR_MSG );

   8387 20 001001   200050 630500                    EPPR0   SPECIAL_ERR_MSG,,AUTO
        20 001002   200133 450500                    STP0    IR+5,,AUTO
        20 001003   000014 236000 21                 LDQ     12
        20 001004   200132 756100                    STQ     IR+4,,AUTO
        20 001005   200132 630500                    EPPR0   IR+4,,AUTO
        20 001006   000002 631400 21                 EPPR1   2
        20 001007   000000 701000 xent               TSX1    X8ER$ERROR
        20 001010   000000 011000                    NOP     0

      397     8388    7                               REL_IC.N_IC.TEMP_IC1 = REL_IC.N_IC.TEMP_IC1 +

   8388 20 001011   200113 220100                    LDX0    TEMP_IC2$,,AUTO
        20 001012   000001 621010                    EAX1    1,X0
        20 001013   200113 741100                    STX1    TEMP_IC2$,,AUTO

      398     8389    7                                 %ONE ;
      399     8390
      400     8391    7                             END ;

   8391 20 001014   200121 054100                    AOS     J,,AUTO
        20 001015   200076 470500                    LDP0    TEMP_IC$,,AUTO
        20 001016   000000 236100                    LDQ     0,,PR0
        20 001017   000036 736000                    QLS     30
        20 001020   000036 732000                    QRS     30
        20 001021   200115 506100                    DIV     DATA_TYPE,,AUTO
        20 001022   200121 116100                    CMPQ    J,,AUTO
        20 001023   000745 605000 20                 TPL     s:8377

      401     8392
      402     8393    6                             IF DESC.N / DATA_TYPE = %ZERO THEN
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:54   

   8393 20 001024   000000 236100                    LDQ     0,,PR0
        20 001025   000036 736000                    QLS     30
        20 001026   000036 732000                    QRS     30
        20 001027   200115 506100                    DIV     DATA_TYPE,,AUTO
        20 001030   000000 116003                    CMPQ    0,DU
        20 001031   001044 601000 20                 TNZ     s:8400

      403     8394    7                             DO ;

      404     8395
      405     8396    7                               BIN_36 = BITBIN(DESC) ;

   8396 20 001032   000000 235100                    LDA     0,,PR0
        20 001033   200077 755100                    STA     BIN_36,,AUTO

      406     8397    7                               CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;

   8397 20 001034   200100 631500                    EPPR1   CHAR_12,,AUTO
        20 001035   200133 451500                    STP1    IR+5,,AUTO
        20 001036   200077 633500                    EPPR3   BIN_36,,AUTO
        20 001037   200132 453500                    STP3    IR+4,,AUTO
        20 001040   200132 630500                    EPPR0   IR+4,,AUTO
        20 001041   000002 631400 21                 EPPR1   2
        20 001042   000000 701000 xent               TSX1    X8CO$CONV_TO_OCTAL
        20 001043   000000 011000                    NOP     0

      407     8398
      408     8399    7                             END ;

      409     8400    6                             J = MOD(DESC.N,DATA_TYPE) ;

   8400 20 001044   200076 470500                    LDP0    TEMP_IC$,,AUTO
        20 001045   000000 236100                    LDQ     0,,PR0
        20 001046   000036 736000                    QLS     30
        20 001047   000036 732000                    QRS     30
        20 001050   200115 506100                    DIV     DATA_TYPE,,AUTO
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:55   
        20 001051   200121 755100                    STA     J,,AUTO

      410     8401    6                             IF DESC.TN = %ZERO THEN

   8401 20 001052   000000 236100                    LDQ     0,,PR0
        20 001053   040000 316007                    CANQ    16384,DL
        20 001054   001061 601000 20                 TNZ     s:8404

      411     8402    6                               J = J * 3 ;

   8402 20 001055   200121 236100                    LDQ     J,,AUTO
        20 001056   000003 402007                    MPY     3,DL
        20 001057   200121 756100                    STQ     J,,AUTO
        20 001060   001072 710000 20                 TRA     s:8405

      412     8403    6                             ELSE
      413     8404    6                               J = 2 * J - ( J / 2 ) ;

   8404 20 001061   200121 236100                    LDQ     J,,AUTO
        20 001062   000002 506007                    DIV     2,DL
        20 001063   200132 756100                    STQ     IR+4,,AUTO
        20 001064   200121 336100                    LCQ     J,,AUTO
        20 001065   000001 736000                    QLS     1
        20 001066   200132 036100                    ADLQ    IR+4,,AUTO
        20 001067   000016 676000 21                 ERQ     14
        20 001070   000001 036007                    ADLQ    1,DL
        20 001071   200121 756100                    STQ     J,,AUTO

      414     8405    6                             BIN_36 = DATA ;

   8405 20 001072   200113 471500                    LDP1    TEMP_IC2$,,AUTO
        20 001073   100000 235100                    LDA     0,,PR1
        20 001074   200077 755100                    STA     BIN_36,,AUTO

      415     8406    6                             CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;

   8406 20 001075   200100 633500                    EPPR3   CHAR_12,,AUTO
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:56   
        20 001076   200133 453500                    STP3    IR+5,,AUTO
        20 001077   200077 634500                    EPPR4   BIN_36,,AUTO
        20 001100   200132 454500                    STP4    IR+4,,AUTO
        20 001101   200132 630500                    EPPR0   IR+4,,AUTO
        20 001102   000002 631400 21                 EPPR1   2
        20 001103   000000 701000 xent               TSX1    X8CO$CONV_TO_OCTAL
        20 001104   000000 011000                    NOP     0

      416     8407    6                             SUBSTR(CHAR_12,J) = %BLANC ;

   8407 20 001105   200121 720100                    LXL0    J,,AUTO
        20 001106   777763 620010                    EAX0    -13,X0
        20 001107   777777 660003                    ERX0    -1,DU
        20 001110   200121 235100                    LDA     J,,AUTO
        20 001111   040145 100400                    MLR     fill='040'O
        20 001112   000005 000001 21                 ADSC9   5                        cn=0,n=1
        20 001113   200100 000010                    ADSC9   CHAR_12,A,AUTO           cn=0,n=*X0

      417     8408    6                            CALL CONCAT(SUBSTR(SPECIAL_ERR_MSG,27),SUBSTR(CHAR_12,0,J)
              8408                                      ) ;

   8408 20 001114   000000 621005                    EAX1    0,AL
        20 001115   040100 100540                    MLR     fill='040'O
        20 001116   200100 000011                    ADSC9   CHAR_12,,AUTO            cn=0,n=*X1
        20 001117   200056 600065                    ADSC9   SPECIAL_ERR_MSG+6,,AUTO  cn=3,n=53

      418     8409    6                             CALL X8ER$ERROR( %SPECIAL_MSG, SPECIAL_ERR_MSG );

   8409 20 001120   200050 630500                    EPPR0   SPECIAL_ERR_MSG,,AUTO
        20 001121   200133 450500                    STP0    IR+5,,AUTO
        20 001122   000014 236000 21                 LDQ     12
        20 001123   200132 756100                    STQ     IR+4,,AUTO
        20 001124   200132 630500                    EPPR0   IR+4,,AUTO
        20 001125   000002 631400 21                 EPPR1   2
        20 001126   000000 701000 xent               TSX1    X8ER$ERROR
        20 001127   000000 011000                    NOP     0

PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:57   
      419     8410
      420     8411    6                           END ;

      421     8412    5                         END ;

   8412 20 001130   001167 710000 20                 TRA     s:8425

      422     8413    4                         ELSE
      423     8414    4                           IF NO_OF_DSCRPTRS = %THREE THEN

   8414 20 001131   200103 235100                    LDA     NO_OF_DSCRPTRS,,AUTO
        20 001132   000003 115007                    CMPA    3,DL
        20 001133   001167 601000 20                 TNZ     s:8425

      424     8415    5                           DO ;

      425     8416
      426     8417    5                             INSTR.IC = INSTR.IC + %ONE ;

   8417 20 001134   000001 620011                    EAX0    1,X1
        20 001135   200111 740100                    STX0    IC_PTR$,,AUTO

      427     8418    5                             BIN_36 = BITBIN(DESC) ;

   8418 20 001136   200076 470500                    LDP0    TEMP_IC$,,AUTO
        20 001137   000000 235100                    LDA     0,,PR0
        20 001140   200077 755100                    STA     BIN_36,,AUTO

      428     8419    5                             CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;

   8419 20 001141   200100 631500                    EPPR1   CHAR_12,,AUTO
        20 001142   200133 451500                    STP1    IR+5,,AUTO
        20 001143   200077 633500                    EPPR3   BIN_36,,AUTO
        20 001144   200132 453500                    STP3    IR+4,,AUTO
        20 001145   200132 630500                    EPPR0   IR+4,,AUTO
        20 001146   000002 631400 21                 EPPR1   2
        20 001147   000000 701000 xent               TSX1    X8CO$CONV_TO_OCTAL
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:58   
        20 001150   000000 011000                    NOP     0

      429     8420    5                             CALL CONCAT(SPECIAL_ERR_MSG,'           ',CHAR_12) ;

   8420 20 001151   040100 100400                    MLR     fill='040'O
        20 001152   000023 000013 19                 ADSC9   DELTA+9                  cn=0,n=11
        20 001153   200050 000013                    ADSC9   SPECIAL_ERR_MSG,,AUTO    cn=0,n=11
        20 001154   040100 100500                    MLR     fill='040'O
        20 001155   200100 000014                    ADSC9   CHAR_12,,AUTO            cn=0,n=12
        20 001156   200052 600105                    ADSC9   SPECIAL_ERR_MSG+2,,AUTO  cn=3,n=69

      430     8421    5                             CALL X8ER$ERROR( %SPECIAL_MSG, SPECIAL_ERR_MSG );

   8421 20 001157   200050 630500                    EPPR0   SPECIAL_ERR_MSG,,AUTO
        20 001160   200133 450500                    STP0    IR+5,,AUTO
        20 001161   000014 236000 21                 LDQ     12
        20 001162   200132 756100                    STQ     IR+4,,AUTO
        20 001163   200132 630500                    EPPR0   IR+4,,AUTO
        20 001164   000002 631400 21                 EPPR1   2
        20 001165   000000 701000 xent               TSX1    X8ER$ERROR
        20 001166   000000 011000                    NOP     0

      431     8422
      432     8423    5                           END ;

      433     8424
      434     8425    4                       END ;

   8425 20 001167   200112 054100                    AOS     I,,AUTO
        20 001170   200103 236100                    LDQ     NO_OF_DSCRPTRS,,AUTO
        20 001171   000451 604000 20                 TMI     s:8275
        20 001172   200112 116100                    CMPQ    I,,AUTO
        20 001173   000451 605000 20                 TPL     s:8275

      435     8426    3                       IF LIBCOM.CONTINUE THEN

   8426 20 001174   000001 234000 1                  SZN     LIBCOM+1
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:59   
        20 001175   001202 605000 20                 TPL     s:8431

      436     8427    3                         INSTR.IC = INSTR.IC + %ONE ;

   8427 20 001176   200111 220100                    LDX0    IC_PTR$,,AUTO
        20 001177   000001 621010                    EAX1    1,X0
        20 001200   200111 741100                    STX1    IC_PTR$,,AUTO
        20 001201   001254 710000 20                 TRA     s:8458

      437     8428    3                       ELSE
      438     8429    4                       DO ;

      439     8430
      440     8431    4                         CALL M$TRAP( FPT_UNTRAP ) ;

   8431 20 001202   000020 630400 18                 EPPR0   FPT_UNTRAP
        20 001203   010004 713400                    CLIMB   4100
        20 001204   400400 401760                    pmme    nvectors=2

      441     8432    4                         INSTR.IC = B$EXCFR$->B$EXCFR.IC ;

   8432 20 001205   200075 470500                    LDP0    B$EXCFR$,,AUTO
        20 001206   000004 220100                    LDX0    4,,PR0
        20 001207   200111 740100                    STX0    IC_PTR$,,AUTO

      442     8433
      443     8434    4                       END ;

      444     8435
      445     8436    3                     END ;

   8436 20 001210   001254 710000 20                 TRA     s:8458

      446     8437    2                     ELSE
      447     8438    3                     DO ;

      448     8439
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:60   
      449     8440    3                       BIN_36 = BITBIN(INSTR) ;

   8440 20 001211   200111 236100                    LDQ     IC_PTR$,,AUTO
        20 001212   200077 756100                    STQ     BIN_36,,AUTO

      450     8441    3                       CALL X8CO$CONV_TO_OCTAL (BIN_36,CHAR_12) ;

   8441 20 001213   200100 635500                    EPPR5   CHAR_12,,AUTO
        20 001214   200133 455500                    STP5    IR+5,,AUTO
        20 001215   200077 636500                    EPPR6   BIN_36,,AUTO
        20 001216   200132 456500                    STP6    IR+4,,AUTO
        20 001217   200132 630500                    EPPR0   IR+4,,AUTO
        20 001220   000002 631400 21                 EPPR1   2
        20 001221   000000 701000 xent               TSX1    X8CO$CONV_TO_OCTAL
        20 001222   000000 011000                    NOP     0

      451     8442    3                       CALL CONCAT(SPECIAL_ERR_MSG,'Fault occurred at address ',

   8442 20 001223   040100 100400                    MLR     fill='040'O
        20 001224   000014 000032 19                 ADSC9   DELTA+2                  cn=0,n=26
        20 001225   200050 000032                    ADSC9   SPECIAL_ERR_MSG,,AUTO    cn=0,n=26
        20 001226   040100 100500                    MLR     fill='040'O
        20 001227   200100 000006                    ADSC9   CHAR_12,,AUTO            cn=0,n=6
        20 001230   200056 400066                    ADSC9   SPECIAL_ERR_MSG+6,,AUTO  cn=2,n=54

      452     8443    3                         SUBSTR(CHAR_12,0,6)) ;
      453     8444    3                       CALL X8ER$ERROR( %IPROC_FAULT, SPECIAL_ERR_MSG );

   8444 20 001231   200050 630500                    EPPR0   SPECIAL_ERR_MSG,,AUTO
        20 001232   200133 450500                    STP0    IR+5,,AUTO
        20 001233   000020 236000 21                 LDQ     16
        20 001234   200132 756100                    STQ     IR+4,,AUTO
        20 001235   200132 630500                    EPPR0   IR+4,,AUTO
        20 001236   000002 631400 21                 EPPR1   2
        20 001237   000000 701000 xent               TSX1    X8ER$ERROR
        20 001240   000000 011000                    NOP     0

PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:61   
      454     8445    3                       CALL X9TR$DELTA;

   8445 20 001241   001740 701000 20                 TSX1    X9TR$DELTA
        20 001242   000000 011000                    NOP     0

      455     8446    3                       CALL M$TRAP ( FPT_UNTRAP ) ;

   8446 20 001243   000020 630400 18                 EPPR0   FPT_UNTRAP
        20 001244   010004 713400                    CLIMB   4100
        20 001245   400400 401760                    pmme    nvectors=2

      456     8447
      457     8448    3                     END ;

   8448 20 001246   001254 710000 20                 TRA     s:8458

      458     8449
      459     8450    2                   CASE ( ELSE );

      460     8451    3                     DO;

      461     8452    3                       CALL X9TR$DELTA;

   8452 20 001247   001740 701000 20                 TSX1    X9TR$DELTA
        20 001250   000000 011000                    NOP     0

      462     8453    3                       CALL M$TRAP ( FPT_UNTRAP );

   8453 20 001251   000020 630400 18                 EPPR0   FPT_UNTRAP
        20 001252   010004 713400                    CLIMB   4100
        20 001253   400400 401760                    pmme    nvectors=2

      463     8454    3                     END;

      464     8455
      465     8456    2              END EIS_INSTR ; /* CASE OF FAULT CODES */

PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:62   
      466     8457
      467     8458    1       FPT_TRTN_W_IR.V.IC# = INSTR.IC ;

   8458 20 001254   200111 220100                    LDX0    IC_PTR$,,AUTO
        20 001255   000016 740000 18                 STX0    FPT_TRTN_W_IR+6

      468     8459    1       FPT_TRTN_W_IR.V.IR# = IR;  /* keep current indicators */

   8459 20 001256   200126 221100                    LDX1    IR,,AUTO
        20 001257   000016 441000 18                 SXL1    FPT_TRTN_W_IR+6

      469     8460    1       CALL M$TRTN (FPT_TRTN_W_IR);

   8460 20 001260   000010 630400 18                 EPPR0   FPT_TRTN_W_IR
        20 001261   010012 713400                    CLIMB   4106
        20 001262   401000 401760                    pmme    nvectors=3
        20 001263   001266 710000 20                 TRA     s:8465

      470     8461
      471     8462        %EJECT;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:63   
      472     8463    1   X9TR$ETRAP:  ENTRY ASYNC;

   8463 20 001264   000000 700200 xent  X9TR$ETRAP   TSX0  ! X66_AAUTO
        20 001265   000136 000000                    ZERO    94,0

      473     8464
      474     8465    1       IF B$JIT.SWITCH( 9 ) THEN                              /*#41202*/

   8465 20 001266   000000 470400 xsym               LDP0    B$JIT$
        20 001267   000031 236100                    LDQ     25,,PR0
        20 001270   000400 316003                    CANQ    256,DU
        20 001271   001274 600000 20                 TZE     s:8467

      475     8466    1         CALL LOW_VALUES_CHECK ; /* may never return */

   8466 20 001272   001701 701000 20                 TSX1    LOW_VALUES_CHECK
        20 001273   000000 011000                    NOP     0

      476     8467    1       CALL X8ER$ERROR( %RUNTIME_ABORT );

   8467 20 001274   000022 630400 21                 EPPR0   18
        20 001275   000010 631400 21                 EPPR1   8
        20 001276   000000 701000 xent               TSX1    X8ER$ERROR
        20 001277   000000 011000                    NOP     0

      477     8468    1       CALL X9TR$DELTA;

   8468 20 001300   001740 701000 20                 TSX1    X9TR$DELTA
        20 001301   000000 011000                    NOP     0

      478     8469    1       SPECIAL_ERR_MSG = ' ';

   8469 20 001302   040100 100400                    MLR     fill='040'O
        20 001303   000005 000001 21                 ADSC9   5                        cn=0,n=1
        20 001304   200050 000120                    ADSC9   SPECIAL_ERR_MSG,,AUTO    cn=0,n=80

      479     8470    1       CALL X9ER$PRINT_ERROR( SPECIAL_ERR_MSG );
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:64   

   8470 20 001305   200050 630500                    EPPR0   SPECIAL_ERR_MSG,,AUTO
        20 001306   200132 450500                    STP0    IR+4,,AUTO
        20 001307   200132 630500                    EPPR0   IR+4,,AUTO
        20 001310   000010 631400 21                 EPPR1   8
        20 001311   000000 701000 xent               TSX1    X9ER$PRINT_ERROR
        20 001312   000000 011000                    NOP     0

      480     8471    1       CALL CONTINUE_CHECK;

   8471 20 001313   001316 701000 20                 TSX1    CONTINUE_CHECK
        20 001314   000000 011000                    NOP     0

      481     8472    1       RETURN;

   8472 20 001315   000000 702200 xent               TSX2  ! X66_AARET

      482     8473
      483     8474        %EJECT;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:65   
      484     8475    1     CONTINUE_CHECK: PROC;

   8475 20 001316   200130 741300       CONTINUE_CH* STX1  ! IR+2,,AUTO

      485     8476
      486     8477    2        IF LIBCOM.CONTINUE THEN

   8477 20 001317   000001 234000 1                  SZN     LIBCOM+1
        20 001320   001674 605000 20                 TPL     s:8506

      487     8478    3          DO;

      488     8479    3            B$PTR = B$TCB$-> B$TCB.STK$;

   8479 20 001321   000000 470400 xsym               LDP0    B$TCB$
        20 001322   000001 236100                    LDQ     1,,PR0
        20 001323   200074 756100                    STQ     B$PTR,,AUTO

      489     8480    3            B$EXCFR$ = B$TCB$->B$TCB.STK$;

   8480 20 001324   200075 756100                    STQ     B$EXCFR$,,AUTO

      490     8481    3            INSTR.IC = B$EXCFR$-> B$EXCFR.IC;

   8481 20 001325   200075 471500                    LDP1    B$EXCFR$,,AUTO
        20 001326   100004 220100                    LDX0    4,,PR1
        20 001327   200111 740100                    STX0    IC_PTR$,,AUTO

      491     8482    3            INSTR.SEG_ID_1 = '00'O;

   8482 20 001330   000000 236003                    LDQ     0,DU
        20 001331   200111 752104                    STCQ    IC_PTR$,'04'O,AUTO

      492     8483    3            INSTR.SEG_ID_2 = %ISSID;

   8483 20 001332   006000 236007                    LDQ     3072,DL
        20 001333   200111 752103                    STCQ    IC_PTR$,'03'O,AUTO
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:66   

      493     8484    3            TEMP_IC$ = IC_PTR$;

   8484 20 001334   200111 236100                    LDQ     IC_PTR$,,AUTO
        20 001335   200076 756100                    STQ     TEMP_IC$,,AUTO

      494     8485    4            DO CASE( EIS.OPCODE );

   8485 20 001336   200076 473500                    LDP3    TEMP_IC$,,AUTO
        20 001337   300000 236100                    LDQ     0,,PR3
        20 001340   000011 772000                    QRL     9
        20 001341   000777 376007                    ANQ     511,DL
        20 001342   000306 116007                    CMPQ    198,DL
        20 001343   001345 602006 20                 TNC     s:8485+7,QL
        20 001344   001661 710000 20                 TRA     s:8497
        20 001345   001661 710000 20                 TRA     s:8497
        20 001346   001661 710000 20                 TRA     s:8497
        20 001347   001661 710000 20                 TRA     s:8497
        20 001350   001661 710000 20                 TRA     s:8497
        20 001351   001661 710000 20                 TRA     s:8497
        20 001352   001661 710000 20                 TRA     s:8497
        20 001353   001661 710000 20                 TRA     s:8497
        20 001354   001661 710000 20                 TRA     s:8497
        20 001355   001661 710000 20                 TRA     s:8497
        20 001356   001661 710000 20                 TRA     s:8497
        20 001357   001661 710000 20                 TRA     s:8497
        20 001360   001661 710000 20                 TRA     s:8497
        20 001361   001661 710000 20                 TRA     s:8497
        20 001362   001661 710000 20                 TRA     s:8497
        20 001363   001661 710000 20                 TRA     s:8497
        20 001364   001661 710000 20                 TRA     s:8497
        20 001365   001661 710000 20                 TRA     s:8497
        20 001366   001661 710000 20                 TRA     s:8497
        20 001367   001661 710000 20                 TRA     s:8497
        20 001370   001661 710000 20                 TRA     s:8497
        20 001371   001656 710000 20                 TRA     s:8493
        20 001372   001661 710000 20                 TRA     s:8497
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:67   
        20 001373   001661 710000 20                 TRA     s:8497
        20 001374   001661 710000 20                 TRA     s:8497
        20 001375   001661 710000 20                 TRA     s:8497
        20 001376   001661 710000 20                 TRA     s:8497
        20 001377   001661 710000 20                 TRA     s:8497
        20 001400   001661 710000 20                 TRA     s:8497
        20 001401   001661 710000 20                 TRA     s:8497
        20 001402   001661 710000 20                 TRA     s:8497
        20 001403   001661 710000 20                 TRA     s:8497
        20 001404   001661 710000 20                 TRA     s:8497
        20 001405   001661 710000 20                 TRA     s:8497
        20 001406   001661 710000 20                 TRA     s:8497
        20 001407   001661 710000 20                 TRA     s:8497
        20 001410   001661 710000 20                 TRA     s:8497
        20 001411   001661 710000 20                 TRA     s:8497
        20 001412   001661 710000 20                 TRA     s:8497
        20 001413   001661 710000 20                 TRA     s:8497
        20 001414   001661 710000 20                 TRA     s:8497
        20 001415   001661 710000 20                 TRA     s:8497
        20 001416   001661 710000 20                 TRA     s:8497
        20 001417   001661 710000 20                 TRA     s:8497
        20 001420   001661 710000 20                 TRA     s:8497
        20 001421   001661 710000 20                 TRA     s:8497
        20 001422   001661 710000 20                 TRA     s:8497
        20 001423   001661 710000 20                 TRA     s:8497
        20 001424   001661 710000 20                 TRA     s:8497
        20 001425   001661 710000 20                 TRA     s:8497
        20 001426   001661 710000 20                 TRA     s:8497
        20 001427   001661 710000 20                 TRA     s:8497
        20 001430   001661 710000 20                 TRA     s:8497
        20 001431   001661 710000 20                 TRA     s:8497
        20 001432   001661 710000 20                 TRA     s:8497
        20 001433   001661 710000 20                 TRA     s:8497
        20 001434   001661 710000 20                 TRA     s:8497
        20 001435   001661 710000 20                 TRA     s:8497
        20 001436   001661 710000 20                 TRA     s:8497
        20 001437   001661 710000 20                 TRA     s:8497
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:68   
        20 001440   001661 710000 20                 TRA     s:8497
        20 001441   001661 710000 20                 TRA     s:8497
        20 001442   001661 710000 20                 TRA     s:8497
        20 001443   001661 710000 20                 TRA     s:8497
        20 001444   001661 710000 20                 TRA     s:8497
        20 001445   001661 710000 20                 TRA     s:8497
        20 001446   001661 710000 20                 TRA     s:8497
        20 001447   001661 710000 20                 TRA     s:8497
        20 001450   001661 710000 20                 TRA     s:8497
        20 001451   001661 710000 20                 TRA     s:8497
        20 001452   001661 710000 20                 TRA     s:8497
        20 001453   001661 710000 20                 TRA     s:8497
        20 001454   001661 710000 20                 TRA     s:8497
        20 001455   001661 710000 20                 TRA     s:8497
        20 001456   001661 710000 20                 TRA     s:8497
        20 001457   001661 710000 20                 TRA     s:8497
        20 001460   001661 710000 20                 TRA     s:8497
        20 001461   001661 710000 20                 TRA     s:8497
        20 001462   001661 710000 20                 TRA     s:8497
        20 001463   001661 710000 20                 TRA     s:8497
        20 001464   001661 710000 20                 TRA     s:8497
        20 001465   001661 710000 20                 TRA     s:8497
        20 001466   001661 710000 20                 TRA     s:8497
        20 001467   001661 710000 20                 TRA     s:8497
        20 001470   001661 710000 20                 TRA     s:8497
        20 001471   001661 710000 20                 TRA     s:8497
        20 001472   001661 710000 20                 TRA     s:8497
        20 001473   001661 710000 20                 TRA     s:8497
        20 001474   001661 710000 20                 TRA     s:8497
        20 001475   001661 710000 20                 TRA     s:8497
        20 001476   001661 710000 20                 TRA     s:8497
        20 001477   001661 710000 20                 TRA     s:8497
        20 001500   001661 710000 20                 TRA     s:8497
        20 001501   001661 710000 20                 TRA     s:8497
        20 001502   001661 710000 20                 TRA     s:8497
        20 001503   001661 710000 20                 TRA     s:8497
        20 001504   001661 710000 20                 TRA     s:8497
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:69   
        20 001505   001661 710000 20                 TRA     s:8497
        20 001506   001661 710000 20                 TRA     s:8497
        20 001507   001661 710000 20                 TRA     s:8497
        20 001510   001661 710000 20                 TRA     s:8497
        20 001511   001661 710000 20                 TRA     s:8497
        20 001512   001661 710000 20                 TRA     s:8497
        20 001513   001661 710000 20                 TRA     s:8497
        20 001514   001661 710000 20                 TRA     s:8497
        20 001515   001661 710000 20                 TRA     s:8497
        20 001516   001661 710000 20                 TRA     s:8497
        20 001517   001661 710000 20                 TRA     s:8497
        20 001520   001661 710000 20                 TRA     s:8497
        20 001521   001661 710000 20                 TRA     s:8497
        20 001522   001661 710000 20                 TRA     s:8497
        20 001523   001661 710000 20                 TRA     s:8497
        20 001524   001661 710000 20                 TRA     s:8497
        20 001525   001661 710000 20                 TRA     s:8497
        20 001526   001661 710000 20                 TRA     s:8497
        20 001527   001661 710000 20                 TRA     s:8497
        20 001530   001661 710000 20                 TRA     s:8497
        20 001531   001661 710000 20                 TRA     s:8497
        20 001532   001661 710000 20                 TRA     s:8497
        20 001533   001661 710000 20                 TRA     s:8497
        20 001534   001661 710000 20                 TRA     s:8497
        20 001535   001661 710000 20                 TRA     s:8497
        20 001536   001661 710000 20                 TRA     s:8497
        20 001537   001661 710000 20                 TRA     s:8497
        20 001540   001661 710000 20                 TRA     s:8497
        20 001541   001661 710000 20                 TRA     s:8497
        20 001542   001661 710000 20                 TRA     s:8497
        20 001543   001661 710000 20                 TRA     s:8497
        20 001544   001661 710000 20                 TRA     s:8497
        20 001545   001661 710000 20                 TRA     s:8497
        20 001546   001661 710000 20                 TRA     s:8497
        20 001547   001656 710000 20                 TRA     s:8493
        20 001550   001656 710000 20                 TRA     s:8493
        20 001551   001661 710000 20                 TRA     s:8497
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:70   
        20 001552   001661 710000 20                 TRA     s:8497
        20 001553   001661 710000 20                 TRA     s:8497
        20 001554   001656 710000 20                 TRA     s:8493
        20 001555   001661 710000 20                 TRA     s:8497
        20 001556   001661 710000 20                 TRA     s:8497
        20 001557   001661 710000 20                 TRA     s:8497
        20 001560   001661 710000 20                 TRA     s:8497
        20 001561   001661 710000 20                 TRA     s:8497
        20 001562   001661 710000 20                 TRA     s:8497
        20 001563   001661 710000 20                 TRA     s:8497
        20 001564   001661 710000 20                 TRA     s:8497
        20 001565   001661 710000 20                 TRA     s:8497
        20 001566   001661 710000 20                 TRA     s:8497
        20 001567   001653 710000 20                 TRA     s:8489
        20 001570   001653 710000 20                 TRA     s:8489
        20 001571   001661 710000 20                 TRA     s:8497
        20 001572   001661 710000 20                 TRA     s:8497
        20 001573   001653 710000 20                 TRA     s:8489
        20 001574   001653 710000 20                 TRA     s:8489
        20 001575   001661 710000 20                 TRA     s:8497
        20 001576   001661 710000 20                 TRA     s:8497
        20 001577   001661 710000 20                 TRA     s:8497
        20 001600   001661 710000 20                 TRA     s:8497
        20 001601   001661 710000 20                 TRA     s:8497
        20 001602   001661 710000 20                 TRA     s:8497
        20 001603   001661 710000 20                 TRA     s:8497
        20 001604   001661 710000 20                 TRA     s:8497
        20 001605   001661 710000 20                 TRA     s:8497
        20 001606   001661 710000 20                 TRA     s:8497
        20 001607   001661 710000 20                 TRA     s:8497
        20 001610   001661 710000 20                 TRA     s:8497
        20 001611   001661 710000 20                 TRA     s:8497
        20 001612   001661 710000 20                 TRA     s:8497
        20 001613   001661 710000 20                 TRA     s:8497
        20 001614   001661 710000 20                 TRA     s:8497
        20 001615   001661 710000 20                 TRA     s:8497
        20 001616   001661 710000 20                 TRA     s:8497
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:71   
        20 001617   001661 710000 20                 TRA     s:8497
        20 001620   001661 710000 20                 TRA     s:8497
        20 001621   001661 710000 20                 TRA     s:8497
        20 001622   001661 710000 20                 TRA     s:8497
        20 001623   001661 710000 20                 TRA     s:8497
        20 001624   001661 710000 20                 TRA     s:8497
        20 001625   001661 710000 20                 TRA     s:8497
        20 001626   001661 710000 20                 TRA     s:8497
        20 001627   001661 710000 20                 TRA     s:8497
        20 001630   001661 710000 20                 TRA     s:8497
        20 001631   001661 710000 20                 TRA     s:8497
        20 001632   001661 710000 20                 TRA     s:8497
        20 001633   001661 710000 20                 TRA     s:8497
        20 001634   001661 710000 20                 TRA     s:8497
        20 001635   001661 710000 20                 TRA     s:8497
        20 001636   001661 710000 20                 TRA     s:8497
        20 001637   001661 710000 20                 TRA     s:8497
        20 001640   001661 710000 20                 TRA     s:8497
        20 001641   001661 710000 20                 TRA     s:8497
        20 001642   001661 710000 20                 TRA     s:8497
        20 001643   001661 710000 20                 TRA     s:8497
        20 001644   001661 710000 20                 TRA     s:8497
        20 001645   001656 710000 20                 TRA     s:8493
        20 001646   001661 710000 20                 TRA     s:8497
        20 001647   001661 710000 20                 TRA     s:8497
        20 001650   001656 710000 20                 TRA     s:8493
        20 001651   001661 710000 20                 TRA     s:8497
        20 001652   001656 710000 20                 TRA     s:8493

      495     8486
      496     8487    4              CASE ( %AD3D, %DV3D, %MP3D, %SB3D ) ;

      497     8488
      498     8489    4                 NO_OF_DSCRPTRS = %THREE ;

   8489 20 001653   000003 235007                    LDA     3,DL
        20 001654   200103 755100                    STA     NO_OF_DSCRPTRS,,AUTO
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:72   
        20 001655   001662 710000 20                 TRA     s:8500

      499     8490
      500     8491    4               CASE ( %AD2D, %DTB, %DV2D, %MVN, %MVNE, %SB2D, %CMPN) ;

      501     8492
      502     8493    4                  NO_OF_DSCRPTRS = %TWO ;

   8493 20 001656   000002 235007                    LDA     2,DL
        20 001657   200103 755100                    STA     NO_OF_DSCRPTRS,,AUTO
        20 001660   001662 710000 20                 TRA     s:8500

      503     8494
      504     8495    4                CASE ( ELSE, %ZERO ) ;

      505     8496
      506     8497    4                  NO_OF_DSCRPTRS = %ZERO ;

   8497 20 001661   200103 450100                    STZ     NO_OF_DSCRPTRS,,AUTO

      507     8498
      508     8499    4            END ; /* case eis.opcodes */

      509     8500    3            INSTR.IC = INSTR.IC + NO_OF_DSCRPTRS + %ONE;

   8500 20 001662   200111 236100                    LDQ     IC_PTR$,,AUTO
        20 001663   000022 772000                    QRL     18
        20 001664   200103 036100                    ADLQ    NO_OF_DSCRPTRS,,AUTO
        20 001665   000001 622006                    EAX2    1,QL
        20 001666   200111 742100                    STX2    IC_PTR$,,AUTO

      510     8501    3            FPT_TRTN.V.IC# = INSTR.IC;

   8501 20 001667   000006 742000 18                 STX2    FPT_TRTN+6

      511     8502    3            CALL M$TRTN ( FPT_TRTN );

PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:73   
   8502 20 001670   000000 630400 18                 EPPR0   FPT_TRTN
        20 001671   010012 713400                    CLIMB   4106
        20 001672   401000 401760                    pmme    nvectors=3

      512     8503    3          END;

   8503 20 001673   001677 710000 20                 TRA     s:8509

      513     8504    2        ELSE
      514     8505    3          DO;

      515     8506    3            CALL M$TRAP( FPT_UNTRAP ) ;

   8506 20 001674   000020 630400 18                 EPPR0   FPT_UNTRAP
        20 001675   010004 713400                    CLIMB   4100
        20 001676   400400 401760                    pmme    nvectors=2

      516     8507    3          END;

      517     8508
      518     8509    2     END CONTINUE_CHECK; /* proc */

   8509 20 001677   200130 221300                    LDX1  ! IR+2,,AUTO
        20 001700   000001 702211                    TSX2  ! 1,X1

      519     8510
      520     8511        %EJECT;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:74   
      521     8512    1     LOW_VALUES_CHECK: PROC ;

   8512 20 001701   200130 741300       LOW_VALUES_* STX1  ! IR+2,,AUTO

      522     8513
      523     8514    2          B$EXCFR$ = B$TCB$ -> B$TCB.STK$ ;

   8514 20 001702   000000 470400 xsym               LDP0    B$TCB$
        20 001703   000001 236100                    LDQ     1,,PR0
        20 001704   200075 756100                    STQ     B$EXCFR$,,AUTO

      524     8515    2          INSTR.IC = B$EXCFR$ -> B$EXCFR.IC ;

   8515 20 001705   200075 471500                    LDP1    B$EXCFR$,,AUTO
        20 001706   100004 220100                    LDX0    4,,PR1
        20 001707   200111 740100                    STX0    IC_PTR$,,AUTO

      525     8516    2          INSTR.SEG_ID_1 = '00'O ;

   8516 20 001710   000000 236003                    LDQ     0,DU
        20 001711   200111 752104                    STCQ    IC_PTR$,'04'O,AUTO

      526     8517    2          INSTR.SEG_ID_2 = %ISSID ;

   8517 20 001712   006000 236007                    LDQ     3072,DL
        20 001713   200111 752103                    STCQ    IC_PTR$,'03'O,AUTO

      527     8518    2          TEMP_IC$ = IC_PTR$ ;

   8518 20 001714   200111 236100                    LDQ     IC_PTR$,,AUTO
        20 001715   200076 756100                    STQ     TEMP_IC$,,AUTO

      528     8519
      529     8520    2          CALL X8RV$COMP_3_RECOVERY (TEMP_IC$ -> EIS,

   8520 20 001716   200075 236100                    LDQ     B$EXCFR$,,AUTO
        20 001717   000020 036003                    ADLQ    16,DU
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:75   
        20 001720   200134 756100                    STQ     IR+6,,AUTO
        20 001721   200075 236100                    LDQ     B$EXCFR$,,AUTO
        20 001722   000050 036003                    ADLQ    40,DU
        20 001723   200076 235100                    LDA     TEMP_IC$,,AUTO
        20 001724   200132 757100                    STAQ    IR+4,,AUTO
        20 001725   200132 630500                    EPPR0   IR+4,,AUTO
        20 001726   000023 631400 21                 EPPR1   19
        20 001727   000000 701000 xent               TSX1    X8RV$COMP_3_RECOVERY
        20 001730   001736 702000 20                 TSX2    s:8528

      530     8521    2                                     B$EXCFR$ -> B$EXCFR.REGS,
      531     8522    2                                     B$EXCFR$ -> B$EXCFR.PRS(0))
      532     8523    3          WHENRETURN DO ; /* Successful data change -- retry instr */

      533     8524    3            FPT_TRTN.V.IC# = INSTR.IC ;

   8524 20 001731   200111 220100                    LDX0    IC_PTR$,,AUTO
        20 001732   000006 740000 18                 STX0    FPT_TRTN+6

      534     8525    3            CALL M$TRTN (FPT_TRTN) ;

   8525 20 001733   000000 630400 18                 EPPR0   FPT_TRTN
        20 001734   010012 713400                    CLIMB   4106
        20 001735   401000 401760                    pmme    nvectors=3

      535     8526    3          END ;

      536     8527
      537     8528    2   END LOW_VALUES_CHECK ;

   8528 20 001736   200130 221300                    LDX1  ! IR+2,,AUTO
        20 001737   000001 702211                    TSX2  ! 1,X1

      538     8529
      539     8530        %EJECT;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:76   
      540     8531    1   X9TR$DELTA: PROC;

   8531 20 001740   200130 741300       X9TR$DELTA   STX1  ! IR+2,,AUTO

      541     8532
      542     8533            %FPT_ALIB (FPTN=TO_DELTA,CMD=DELTA_CMD,LIBNAME=DELTA,
      543     8534                       RETRN=YES,STCLASS=CONSTANT);
      544     8551            %VLP_NAME (FPTN=DELTA,NAME='DELTA',STCLASS=CONSTANT);
      545     8578
      546     8579    2       DCL 1 DELTA_CMD STATIC,
      547     8580    2             2 *     CHAR(0) INIT ( '     '),   /* PLUGH */
      548     8581    2             2 *     CHAR(0) INIT ('  '),       /* ; */
      549     8582    2             2 *     CHAR(0) INIT ('M '),
      550     8583    2             2 LOC   CHAR(6) INIT ('  '),
      551     8584    2             2 *      CHAR(0) INIT('\I');
      552     8585
      553     8586
      554     8587    2       CALL BINCHAR ( DELTA_CMD.LOC, B$TCB$->B$TCB.STK$->B$EXCFR.IC );

   8587 20 001741   000000 470400 xsym               LDP0    B$TCB$
        20 001742   000001 471500                    LDP1    1,,PR0
        20 001743   100004 236100                    LDQ     4,,PR1
        20 001744   000022 772000                    QRL     18
        20 001745   000000 235003                    LDA     0,DU
        20 001746   200132 757100                    STAQ    IR+4,,AUTO
        20 001747   000000 301500                    BTD
        20 001750   200132 000010                    NDSC9   IR+4,,AUTO               cn=0,s=lsgnf,sf=0,n=8
        20 001751   000034 230006 18                 NDSC9   DELTA_CMD+2              cn=1,s=nosgn,sf=0,n=6

      555     8588    2       CALL M$ALIB (TO_DELTA);

   8588 20 001752   000000 630400 19                 EPPR0   TO_DELTA
        20 001753   000007 713400                    CLIMB   7
        20 001754   401400 401760                    pmme    nvectors=4

      556     8589    2   END X9TR$DELTA;      /* proc */

PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:77   
   8589 20 001755   200130 221300                    LDX1  ! IR+2,,AUTO
        20 001756   000001 702211                    TSX2  ! 1,X1
      557     8590    1   END X9TR$ATRAP ;
      558     8591        %EJECT;
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:78   

PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:79   
--  Include file information  --

   X8A_COM_MACS.:X8A6TOU  is referenced.
   X8A_MACROS.:X8A6TOU  is referenced.
   X8A_OPCODES.:X8A6TOU  is referenced.
   X8A_ERRCOM.:X8A6TOU  cannot be made into a system file and is referenced.
   X8A_LIBCOM.:X8A6TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:LIB_E04  is referenced.
   B_SEGIDS_C.:LIB_E04  is referenced.
   CP_6_SUBS.:LIB_E04  is referenced.
   CP_6_C.:LIB_E04  is referenced.
   CP_6.:LIB_E04  cannot be made into a system file and is referenced.
   Z9A_FLAGS.:Z8A6TOU  is referenced.
   X8A_SYS_FILE.:X8A6TOU  is referenced.
      No diagnostics issued in procedure X9TR$ATRAP.
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:80   

 **** Variables and constants ****

  ****  Section 001 LblCom LIBCOM

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(720)   r     1 LIBCOM

  ****  Section 002 LblCom DEC_OR_COMMA

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR              1 DEC_OR_COMMA

  ****  Section 003 LblCom IN_TEMP

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(80)          1 IN_TEMP

  ****  Section 004 LblCom OVRCHR

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR              1 OVRCHR

  ****  Section 005 LblCom SELECT_TIME

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN              1 SELECT_TIME

PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:81   
  ****  Section 006 LblCom NO_ADVANCE_OFFSET

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN              1 NO_ADVANCE_OFFSET

  ****  Section 007 LblCom DSPLY_SAVE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(72)          1 DSPLY_SAVE

  ****  Section 008 LblCom D_DATE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(10)          1 D_DATE

  ****  Section 009 LblCom D_TIME

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(11)          1 D_TIME

  ****  Section 010 LblCom D_DAY

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(3)           1 D_DAY

  ****  Section 011 LblCom C_DATE

PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:82   
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(6)           1 C_DATE

  ****  Section 012 LblCom C_TIME

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(8)           1 C_TIME

  ****  Section 013 LblCom C_DAY

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(5)           1 C_DAY

  ****  Section 014 LblCom RTHOLD2

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN              1 RTHOLD2

  ****  Section 015 LblCom LTHOLD2

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN              1 LTHOLD2

  ****  Section 016 LblCom NDX2

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:83   

     0-0-0/w SBIN              1 NDX2

  ****  Section 017 LblCom IN_LEN

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN              1 IN_LEN

  ****  Section 018  Data  X9TR$ATRAP

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    32-0-0/c STRC(153)   r     1 DELTA_CMD                  0-0-0/d STRC(288)   r     1 FPT_TRTN
    10-0-0/d STRC(288)   r     1 FPT_TRTN_W_IR             20-0-0/d STRC(360)   r     1 FPT_UNTRAP

  ****  Section 019 RoData X9TR$ATRAP

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    12-0-0/c STRC(54)    r     1 DELTA                      0-0-0/d STRC(360)   r     1 TO_DELTA

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

   106-0-0/b BIT         r     1 AR1                      107-0-0/b BIT         r     1 AR2
    75-0-0/w PTR         r     1 B$EXCFR$                  74-0-0/w PTR         r     1 B$PTR
    77-0-0/w UBIN        r     1 BIN_36                   114-0-0/w SBIN        r     1 BYTE_PER_WORD
   100-0-0/c CHAR(12)    r     1 CHAR_12                  117-0-0/w SBIN        r     1 CHAR_OFFSET
   115-0-0/w SBIN        r     1 DATA_TYPE                110-0-0/w UBIN        r     1 FAULT_CODE
   112-0-0/w SBIN        r     1 I                        111-0-0/w PTR         r     1 IC_PTR$
   104-0-0/b BIT         r     1 IC_REL1                  105-0-0/b BIT         r     1 IC_REL2
PL6.E3A0      #001=X9TR$ATRAP File=X9TR.:X8A6TSI                                 SAT 08/09/97 11:04 Page:84   
   111-0-0/w STRC        r     1 INSTR                    126-0-0/b BIT         r     1 IR(0:17)
   121-0-0/w SBIN        r     1 J                          3-0-0/w SBIN              1 LT
     4-0-0/c CHAR(65)          1 LTHOLD                    46-0-0/w SBIN              1 NDX
    47-0-0/w SBIN              1 NDX3                     103-0-0/w UBIN        r     1 NO_OF_DSCRPTRS
   122-0-0/w SBIN        r     1 REG                      123-0-0/w SBIN        r     1 REG1
   124-0-0/w SBIN        r     1 REG2                     125-0-0/w SBIN        r     1 REG_OFFSET
   113-0-0/w STRC        r     1 REL_IC                    25-0-0/c CHAR(65)          1 RTHOLD
    50-0-0/c CHAR(80)    r     1 SPECIAL_ERR_MSG           76-0-0/w PTR         r     1 TEMP_IC$
   113-0-0/w PTR         r     1 TEMP_IC2$                116-0-0/w SBIN        r     1 TOTAL_BYTE_OFFSET
   120-0-0/w SBIN        r     1 WORD_OFFSET

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$JIT$                     0-0-0/w PTR         r     1 B$TCB$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$EXCFR                    0-0-0/w STRC(7056)  r     1 B$FLT
     0-0-0/d STRC(5760)  r     1 B$JIT                      0-0-0/w STRC(144)   r     1 B$TCB
     0-0-0/w UBIN        r     1 DATA                       0-0-0/w STRC        r     1 DESC
     0-0-0/w STRC        r     1 EIS                        0-0-0N  NULL        r     1 M$UC


   Procedure X9TR$ATRAP requires 1007 words for executable code.
   Procedure X9TR$ATRAP requires 94 words of local(AUTO) storage.

    No errors detected in file X9TR.:X8A6TSI    .
