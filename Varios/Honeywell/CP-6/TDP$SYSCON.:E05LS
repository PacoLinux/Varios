VERSION E05

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:1    
        1        1        /*T***********************************************************/
        2        2        /*T*                                                         */
        3        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        4        4        /*T*                                                         */
        5        5        /*T***********************************************************/
        6        6        /* TDP$SYSCON - PROCESS M$SYSCON PMME */
        7        7        TDP$SYSCON: PROC(SYSCON_V,RESULT,ERR) ALTRET;
        8        8        /*
        9        9                Includes
       10       10        */
       11       11        %INCLUDE                B$JIT ;
       12      614        %INCLUDE                CP_6_SUBS ;
       13     1154        %INCLUDE                EL$TABLES ;
       14     1477        %INCLUDE                EL_SUBS_C ;
       15     1561        %INCLUDE                FP_MACRO_C ;
       16     1833        %INCLUDE                FR_ERRORS_C ;
       17     1864        %INCLUDE                HF_DATA_R ;
       18     1907        %INCLUDE                HF_LOCK_C ;
       19     1921        %INCLUDE                IS$MACROS ;
       20     3196        %INCLUDE                JG_GHOSTS_C ;
       21     3286        %INCLUDE                KI_DATA_R ;
       22     3312        %INCLUDE                KI_MACROS_C ;
       23     3920        %INCLUDE                KI_SUBS_C ;
       24     4056        %INCLUDE                MM_DATA_R ;
       25     4576        %INCLUDE                NI_DATA_C ;
       26     4689        %INCLUDE                NI_DATA_R ;
       27     5126        %INCLUDE                NI_MACROS_C ;
       28     5393        %INCLUDE                N_FC_C ;
       29     5430        %INCLUDE                SS_SCHED_C ;
       30     5663        %INCLUDE                SS_SCHED_R ;
       31     5706        %INCLUDE                TD$CP6V_C ;
       32     5742        %INCLUDE                TD_ERRORS_C ;
       33     5825        %INCLUDE                TM_DATA_M ;
       34     5927        /*
       35     5928                Parameters
       36     5929        */
       37     5930    1   DCL 1 ERR               SBIN PARAM ;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:2    
       38     5931        %VLR$SYSCON_V           ( FPTN=RESULT,   BASED=PARAM ) ;
       39     5936        %FPT$SYSCON_V           ( FPTN=SYSCON_V, BASED=PARAM ) ;
       40     5940        /*
       41     5941                Entries
       42     5942        */
       43     5943    1   DCL 1 ELA$SYSLOG        ENTRY(6) ALTRET ;
       44     5944    1   DCL 1 FMC$RELSCU        ENTRY(3) ALTRET ;
       45     5945    1   DCL 1 FMN$AVR           ENTRY(2) ;
       46     5946    1   DCL 1 HFA$STARTCPU      ENTRY;
       47     5947    1   DCL 1 HFA$STOPCPU      ENTRY;
       48     5948    1   DCL 1 HFB$DISPORT       ENTRY(1) ;
       49     5949    1   DCL 1 HFB$ENAPORT       ENTRY(1) ;
       50     5950    1   DCL 1 HFC$RCONF_8000    ENTRY ;
       51     5951    1   DCL 1 HFC$RSCR          ENTRY(3) ;
       52     5952    1   DCL 1 HFC$SCONF_8000    ENTRY ;
       53     5953    1   DCL 1 HFC$SSCR          ENTRY(3) ;
       54     5954    1   DCL 1 KIQ$PARTFEP       ENTRY(2) ;
       55     5955    1   DCL 1 KIQ$UPRTFEP       ENTRY(1) ;
       56     5956    1   DCL 1 MMB$RELMEM        ENTRY(3) ALTRET ;
       57     5957    1   DCL 1 MMB$RETMEM        ENTRY(1) ALTRET ;
       58     5958    1   DCL 1 NIO$IOSPIN        ENTRY(1) ;
       59     5959    1   DCL 1 NIO$QUE           ENTRY(1) ALTRET ;
       60     5960    1   DCL 1 NIQ$GET           ENTRY(1) ALTRET ;
       61     5961    1   DCL 1 NIQ$REL           ENTRY(1) ALTRET ;
       62     5962    1   DCL 1 NIW$DQHSTART      ENTRY(1) ALTRET ;
       63     5963    1   DCL 1 NIW$DQHSTOP       ENTRY(1) ALTRET ;
       64     5964    1   DCL 1 NIW$MPCDQH        ENTRY(2) ALTRET ;
       65     5965    1   DCL 1 NIX$CHANCONFIG    ENTRY(3)  ;
       66     5966    1   DCL 1 NIX$DEVCONFIG     ENTRY(2)  ;
       67     5967    1   DCL 1 NKP$PART          ENTRY(2) ALTRET ;
       68     5968    1   DCL 1 NKP$RTN           ENTRY(2) ALTRET ;
       69     5969    1   DCL 1 SSS$BLOCKM        ENTRY ;
       70     5970    1   DCL 1 TDP$SYSCONEA      ENTRY(1) ;
       71     5971    1   DCL 1 TMB$BUF_ALLOC     ENTRY(3) ALTRET ;
       72     5972    1   DCL 1 TMB$BUF_DEALLOC   ENTRY(2) ALTRET ;
       73     5973    1   DCL 1 TMB$MCA           ENTRY(4) ALTRET ;
       74     5974        /*
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:3    
       75     5975                Symrefs
       76     5976        */
       77     5977    1   DCL 1 B$IMXBUF$         PTR SYMREF ;
       78     5978    1   DCL 1 B$JIT$            PTR SYMREF ;
       79     5979    1   DCL 1 B$PPUT$           PTR SYMREF READONLY ;
       80     5980    1   DCL 1 B$SCU$            PTR SYMREF ;
       81     5981    1   DCL 1 FP_OPCI$$         PTR SYMREF ;
       82     5982    1   DCL 1 NK_MXLOCAL        UBIN(36) SYMREF ;
       83     5983    1   DCL 1 S_PNO             UBIN SYMREF ;
       84     5984        /*
       85     5985                Auto
       86     5986        */
       87     5987    1   DCL 1 ADCT$(0:1)        PTR ALIGNED AUTO ;
       88     5988        %VLR$SYSCON_V           ( FPTN=BOOTINFO, BASED=AUTO ) ;
       89     5993    1   DCL 1 BUF$              PTR ALIGNED AUTO ;
       90     5994    1   DCL 1 BUFX              SBIN ALIGNED AUTO ;
       91     5995    1   DCL 1 CHAN              UBIN ALIGNED AUTO ;
       92     5996    1   DCL 1 CHANX             SBIN ALIGNED AUTO ;
       93     5997    1   DCL 1 CPUX              UBIN ALIGNED AUTO ;
       94     5998    1   DCL 1 DCT$              PTR ALIGNED AUTO ;
       95     5999    1   DCL 1 DQH$              PTR ALIGNED AUTO ;
       96     6000        %EL$CHNGAARD            ( NAME=EL$CHNGAARD, STCLASS=AUTO ) ;
       97     6004        %EL$SYSCON              ( NAME=EL$SYSCON  , STCLASS=AUTO ) ;
       98     6008    1   DCL 1 FEI               UBIN ALIGNED AUTO ;
       99     6009    1   DCL 1 FEI$              PTR ALIGNED AUTO ;
      100     6010    1   DCL 1 FEX               UBIN ALIGNED AUTO ;
      101     6011    1   DCL 1 FIRST_PAGE        UBIN ALIGNED AUTO ;
      102     6012    1   DCL 1 I                 UBIN ALIGNED AUTO ;
      103     6013    1   DCL 1 IOM#              UBIN ALIGNED AUTO ;
      104     6014    1   DCL 1 IOM$              PTR ALIGNED AUTO ;
      105     6015    1   DCL 1 IPC               UBIN ALIGNED AUTO ;
      106     6016    1   DCL 1 J                 UBIN ALIGNED AUTO ;
      107     6017    1   DCL 1 LAST_PAGE         UBIN ALIGNED AUTO ;
      108     6018    1   DCL 1 MDCT$             PTR ALIGNED AUTO ;
      109     6019    1   DCL 1 MDCTX             UBIN WORD ALIGNED AUTO ;
      110     6020    1   DCL 1 NCHANS            SBIN ALIGNED AUTO ;
      111     6021    1   DCL 1 ONLYSCONS         BIT(1) ALIGNED AUTO ;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:4    
      112     6022    1   DCL 1 PHY_CPU           UBIN ALIGNED AUTO ;
      113     6023    1   DCL 1 REL_PAGE          UBIN ALIGNED AUTO ;
      114     6024    1   DCL 1 REQ$              PTR ALIGNED AUTO ;
      115     6025    1   DCL 1 SCUX              UBIN ALIGNED AUTO ;
      116     6026    1   DCL 1 SQH$              PTR ALIGNED AUTO ;
      117     6027    1   DCL 1 TDQH$             PTR ALIGNED AUTO ;
      118     6028    1   DCL 1 TEMP$             PTR ALIGNED AUTO ;
      119     6029    1   DCL 1 TOTAL_RELEASED    SBIN ALIGNED AUTO ;
      120     6030        /*
      121     6031                Based
      122     6032        */
      123     6033        %NI$DCT                 ( NAME=DCT, STCLASS="BASED(DCT$)" ) ;
      124     6081        %NI$DQH                 ( NAME=DQH, STCLASS="BASED(DQH$)" ) ;
      125     6104        %FP$OPCI                ( FPTN=FP$OPCI, STCLASS=BASED ) ;
      126     6114        %NI$IOM                 ( NAME=IOM, STCLASS="BASED(IOM$)" ) ;
      127     6119        %KI$FEI                 ( STCLASS="BASED(FEI$)" ) ;
      128     6203        %MCA_CFG                ( NAME=MCA_CFG, STCLASS="BASED(BUF$)" ) ;
      129     6313        %NI$DCT                 ( NAME=MDCT, STCLASS="BASED(MDCT$)" ) ;
      130     6361        %NI$CHT ;
      131     6364        %N$REQ                  ( NAME=REQ, STCLASS="BASED(REQ$)" ) ;
      132     6422        %NI$SQH                 ( NAME=SQH, STCLASS="BASED(SQH$)" ) ;
      133     6435        /*
      134     6436                Constants
      135     6437        */
      136     6438    1   DCL MCA_FW_LOAD(0:15) BIT(1) UNAL CONSTANT
      137     6439    1     INIT ('0'B, '0'B, '1'B, '0'B, '1'B, '1'B, '1'B, '0'B,
      138     6440    1           '0'B, '0'B, '0'B, '1'B, '0'B*0);
      139     6441    1   DCL H_DPS8000_SPLIT_TABLE(0:4) UBIN HALF HALIGNED CONSTANT INIT
      140     6442    1        (15,14,12,8,0);
      141     6443        %EJECT;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:5    
      142     6444    1           BOOTINFO='0'B ;
      143     6445    1           ERR=0;
      144     6446        /**/
      145     6447        /* FIND THE COMPONENT */
      146     6448        /**/
      147     6449    2           DO CASE(SYSCON_V.COMPONENT);
      148     6450    2            CASE(%CHANNEL#);
      149     6451    2              CHANX=SYSCON_V.IOM*%N_MAXCHANS+SYSCON_V.CHAN;
      150     6452    2              DQH$=NI$CHT.DQH$(CHANX);
      151     6453    2              IF DQH$ = ADDR(NIL) OR SYSCON_V.CHAN < 8 OR
      152     6454    2                 SYSCON_V.CHAN > HW_CHANS-1 OR SYSCON_V.IOM > NI_IOMS-1 THEN
      153     6455    2                 GOTO ERR_SCNNOCOMP;
      154     6456    2              SQH$=DQH.SQH$;
      155     6457    2            CASE(%MPC#,%DVC#);
      156     6458    2              DCT$=ADDR(NIL);
      157     6459    3              DO I=1 TO NK_MXLOCAL;
      158     6460    4                 IF N$DCT$(I)~=ADDR(NIL) THEN DO;
      159     6461    4                    IF N$DCT$(I)->DCT.DEVNM=SYSCON_V.DEVNM THEN
      160     6462    4                       DCT$=N$DCT$(I);
      161     6463    4                    END;
      162     6464    3                 END;
      163     6465    2              IF DCT$=ADDR(NIL) THEN
      164     6466    2                 GOTO ERR_SCNNOCOMP;
      165     6467    2              SQH$=DCT.SQH$;
      166     6468    2            CASE(%FEP##);
      167     6469    2              FEX=SYSCON_V.CHAN;
      168     6470    3              IF FEX>KI_NODES THEN DO;
      169     6471    3                 ERR=%E$SCNNOTFEP;
      170     6472    3                 ALTRETURN;
      171     6473    3                 END;
      172     6474    3              DO FEI = 1 TO KI_MXFE;
      173     6475    3                 FEI$ = KI$FEI$(FEI);
      174     6476    3                 IF KI$FEI.FEP# = FEX THEN
      175     6477    3                    GOTO FOUND_FEP;
      176     6478    3                 END;
      177     6479    2              ERR = %E$REMOTEFEP;
      178     6480    2              ALTRETURN;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:6    
      179     6481    2   FOUND_FEP: ;
      180     6482    2              DQH$=NI$CHT.DQH$(BITBIN(KI$FEI.FECH ));
      181     6483    2            CASE(%IOM##);
      182     6484    2              IOM$ = NI$IOM$(SYSCON_V.IOM);
      183     6485    2              IF IOM$ = ADDR(NIL) OR SYSCON_V.IOM > NI_IOMS-1 THEN
      184     6486    2                 GOTO ERR_SCNNOCOMP;
      185     6487    2              IOM# = SYSCON_V.IOM;
      186     6488    2            CASE (%CPU##);
      187     6489    2              IF SYSCON_V.CPU = S_PORTNR(0) THEN GOTO ERR_CPUMASTER;
      188     6490    3              DO CPUX =  1 TO S_NSCPU;
      189     6491    3                 IF S_PORTNR(CPUX) = SYSCON_V.CPU THEN GOTO GET_PHY_CPU;
      190     6492    3                 END;
      191     6493    2              GOTO ERR_SCNNOCOMP;
      192     6494    2   GET_PHY_CPU:
      193     6495    3              DO PHY_CPU =  0 TO 3;
      194     6496    3                 IF H_RPM_CONNECT_TABLE.ENTRI.PORT#(PHY_CPU+8) = SYSCON_V.CPU THEN GOTO
              6496                          DO_FUNCTION;
      195     6497    3                 END;
      196     6498    2              GOTO ERR_SCNNOCOMP;
      197     6499    2            CASE (%SCU##);
      198     6500    2              SCUX = SYSCON_V.SCU;
      199     6501    2              IF H_DPS8000_SCU_INFO.SCU_STATUS.NOT_CONFIG(SCUX) THEN GOTO
              6501                       ERR_SCUNOTCONFIG;
      200     6502    2              IF H_DPS8000_SCU_INFO.SCU_STATUS.LOW_MEM(SCUX) THEN GOTO ERR_SCUNOTVALID;
      201     6503    2              GOTO DO_FUNCTION;
      202     6504    2            END;                           /* CASE SYSCON_V.COMPONENT            */
      203     6505    1   DO_FUNCTION:
      204     6506
      205     6507
      206     6508
      207     6509    2           DO CASE(SYSCON_V.FUNCTION);
      208     6510    2            CASE(%PARTITION#,%RELEASE_SYSCON#);
      209     6511    3              DO CASE(SYSCON_V.COMPONENT);
      210     6512    3               CASE(%CHANNEL#);
      211     6513        /**/
      212     6514        /* PARTITION A CHANNEL */
      213     6515        /**/
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:7    
      214     6516    3                 IF DQH.MPC$ = ADDR(NIL) THEN   /* FEP & console channels */
      215     6517    3                    GOTO ERR_NOPARTRETCHAN;
      216     6518    3                 IF DQH.STATUS.SYSCON_PART THEN
      217     6519    3                    GOTO RETURN_RESULT;
      218     6520    3                 IF (DQH.MPC$->DCT.MPC.TYPE = %DV_LP)  OR
      219     6521    4                    (DQH.MPC$->DCT.MPC.TYPE = %DV_AP)  THEN DO;
      220     6522    4                    IF (DQH.MPC$->DCT.MPC.IOCHANX(0) = CHANX ) AND
      221     6523    5                       (DQH.MPC$->DCT.MPC.TYPE = %DV_AP ) THEN DO;
      222     6524    6                       DO I = SQH.FDCT + 1 TO SQH.FDCT + SQH.NDCT-1;
      223     6525    6                         IF NOT (N$DCT$(I)->DCT.STATUS.SYSCON_PART AND
      224     6526    6                                 N$DCT$(I)->DCT.STATUS.DOWN) THEN
      225     6527    6                            GOTO ERR_ONLYPATH;
      226     6528    6                         END;   /* DO I                                 */
      227     6529    5                       END;       /* IF ARRAY PROCES' AND CHAN OF CONTROLR*/
      228     6530    4                    ELSE
      229     6531    5                       DO I = SQH.FDCT + 1 TO SQH.FDCT + SQH.NDCT - 1;
      230     6532    5                          IF (N$DCT$(I)->DCT.DQH$ = DQH$) AND
      231     6533    5                             NOT (N$DCT$(I)->DCT.STATUS.SYSCON_PART AND
      232     6534    5                                  N$DCT$(I)->DCT.STATUS.DOWN) THEN
      233     6535    5                             GOTO ERR_ONLYPATH;
      234     6536    5                          END;             /* DO I                               */
      235     6537    4                       END;                /* IF UNIT RECORD MPC                 */
      236     6538    4                    ELSE DO;
      237     6539    4                        IF  NOT DQH.MPC$->DCT.STATUS.DOWN
      238     6540    5                        THEN DO ;
      239     6541    5                            NCHANS = 0 ;
      240     6542    6                            DO  I = 0 TO %N_CHANSPERMPCM1 ;
      241     6543    6                                TEMP$ = NI$CHT.DQH$(DQH.MPC$->DCT.MPC.IOCHANX(I)) ;
      242     6544    6                                IF  TEMP$ ~= ADDR(NIL)
      243     6545    6                                AND TEMP$ ~= DQH$
      244     6546    6                                AND NOT TEMP$->DQH.STATUS.DOWN
      245     6547    6                                AND NOT TEMP$->DQH.STATUS.SYSCON_PART
      246     6548    6                                THEN
      247     6549    6                                    NCHANS = NCHANS + 1 ;
      248     6550    6                                END /* DO I = 0 ... */ ;
      249     6551    5                            IF  NCHANS = 0
      250     6552    5                            THEN
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:8    
      251     6553    5                                GOTO ERR_ONLYPATH ;
      252     6554    5                            END /* IF NOT ...STATUS.DOWN */ ;
      253     6555    4                        END /* ELSE */ ;
      254     6556                         %LOCK ( G#=SQH.GATE ) ;
      255     6559    3                    DQH.STATUS.SYSCON_PART = '1'B ;
      256     6560    3                    DQH.STATUS.DOWN        = '1'B ;
      257     6561    3                    DQH.CHANSTATE.DOWN     = '1'B ;
      258     6562    3                    IF  NOT DQH.MPC$->DCT.STATUS.DOWN
      259     6563    3                    AND DQH.MPC$->DCT.DQH$      = DQH$
      260     6564    3                    AND DQH.MPC$->DCT.MPC.TYPE ~= %DV_AP
      261     6565    3                    THEN
      262     6566    3                        CALL NIW$MPCDQH ( DQH.MPC$->DCT, DQH.MPC$->DCT.DQH$ ) ;
      263     6567    3                    CALL NIW$DQHSTOP ( DQH ) ;
      264     6568                         %UNLOCK ( G#=SQH.GATE ) ;
      265     6571    3                    CALL NIX$CHANCONFIG ( DQH, BOOTINFO, '1'B ) ;
      266     6572        /**/
      267     6573        /* PARTITION A DEVICE */
      268     6574        /**/
      269     6575    3               CASE(%DVC#);
      270     6576    3                 IF DCT.STATUS.SYSCON_PART AND DCT.STATUS.DOWN THEN
              6576                          /* not delayed partitioning */
      271     6577    3                    GOTO RETURN_RESULT;
      272     6578    3                 IF DCT.TYPE=%DV_MPC THEN
      273     6579    3                    GOTO ERR_SCNNOTDEV;
      274     6580    4                 IF DCT.DFLG.CONSOLE THEN DO;
      275     6581    4                    ONLYSCONS = '1'B;
      276     6582    5                    DO I = 1 TO NK_MXLOCAL;
      277     6583    5                       IF N$DCT$(I) ~= ADDR(NIL) AND N$DCT$(I) ~= DCT$ THEN
      278     6584    5                        IF N$DCT$(I)->DCT.DFLG.CONSOLE AND NOT N$DCT$(I)->DCT.STATUS.
              6584                                 DOWN THEN
      279     6585    5                         ONLYSCONS = '0'B;
      280     6586    5                       END;
      281     6587    5                    IF ONLYSCONS THEN DO;
      282     6588    5                       ERR = %E$ONLYSCONS;
      283     6589    5                       ALTRETURN;
      284     6590    5                       END;
      285     6591    4                    END;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:9    
      286     6592    3                 IF  DCT.TYPE = %DV_DP
      287     6593    3                 AND DCT.DP.MIRROR.FLAG
      288     6594    4                 THEN DO ;
      289     6595    4                     MDCTX = DCT.DP.MIRROR.DCTX ;
      290     6596    4                     MDCT$ = N$DCT$(MDCTX) ;
      291     6597    4                     IF  DCT.DP.MIRROR.PRI
      292     6598    5                     THEN DO ;
      293     6599    5                         ADCT$(0) = DCT$  ;
      294     6600    5                         ADCT$(1) = MDCT$ ;
      295     6601    5                         END ;
      296     6602    5                     ELSE DO ;
      297     6603    5                         ADCT$(0) = MDCT$ ;
      298     6604    5                         ADCT$(1) = DCT$  ;
      299     6605    5                         END ;
      300     6606    4                     END ;
      301     6607    3                 ELSE
      302     6608    3                     MDCT$ = ADDR(NIL) ;
      303     6609    3                 IF  DCT.STATE = %KIWAIT
      304     6610    3                 OR  DCT.STATE = %MPCWAIT
      305     6611    3                 THEN
      306     6612    3                     GOTO ERR_DEVNOTIDLE ;
      307     6613    3                 IF  MDCT$ ~= ADDR(NIL)
      308     6614    3                 THEN
      309     6615    3                     IF  MDCT.STATE = %KIWAIT
      310     6616    3                     OR  MDCT.STATE = %MPCWAIT
      311     6617    3                     THEN
      312     6618    3                         GOTO ERR_DEVNOTIDLE ;
      313     6619                      /*  if not MSOS delayed partitioned */
      314     6620    3                 IF  NOT ( NOT DCT.STATUS.DOWN AND DCT.STATUS.MSOS_PART )
      315     6621    3                 THEN
      316     6622    3                     DCT.STATUS.SYSCON_PART = '1'B ;
      317     6623    3                 IF  MDCT$ ~= ADDR(NIL)
      318     6624    3                 THEN
      319     6625    3                     IF  NOT ( NOT MDCT.STATUS.DOWN AND MDCT.STATUS.MSOS_PART )
      320     6626    3                     THEN
      321     6627    3                         MDCT.STATUS.SYSCON_PART = '1'B ;
      322     6628    3                 IF  NOT DCT.STATUS.DOWN
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:10   
      323     6629    4                 THEN DO ;
      324     6630    4                     IF  MDCT$ ~= ADDR(NIL)
      325     6631    5                     THEN DO ;
      326     6632    5                         IF  NOT MDCT.STATUS.SYSCON_PART
      327     6633    6                         THEN DO ;
      328     6634    6                             ERR = %E$PRTBSY ;
      329     6635    6                             ALTRETURN ;
      330     6636    6                             END ;
      331     6637    6                         DO  I = 0 TO 1 ;
      332     6638    6                             IF  I = 0
      333     6639    6                             AND ADCT$(I)->DCT.RAT$ ~= ADDR(NIL)
      334     6640    6                             THEN
      335     6641    6                                 CALL NKP$PART ( ADCT$(I)->DCT, ERR ) ALTRET (
              6641                                          ERR_RETURN ) ;
      336     6642    6                             CALL FMN$AVR ( ADCT$(I)->DCT.DCTX, %NI_AVR_PART ) ;
      337     6643    6                             ADCT$(I)->DCT.STATUS.DOWN = '1'B ;
      338     6644    6                             END ;
      339     6645    5                         END ;
      340     6646    5                     ELSE DO ;
      341     6647    5                         IF  DCT.RAT$ ~= ADDR(NIL)
      342     6648    5                         OR  DCT.DFLG.CONSOLE
      343     6649    5                         THEN
      344     6650    5                             CALL NKP$PART ( DCT, ERR ) ALTRET (ERR_RETURN ) ;
      345     6651    5                         IF  DCT.TYPE = %DV_DP
      346     6652    5                         THEN
      347     6653    5                             CALL FMN$AVR ( DCT.DCTX, %NI_AVR_PART ) ;
      348     6654    5                         END ;
      349     6655    4                     END ;
      350     6656    3                 DCT.STATUS.DOWN='1'B;
      351     6657    4                 IF DCT.DFLG.CONSOLE THEN DO;   /* do channel too */
      352     6658    4                    DCT.DQH$->DQH.STATUS.DOWN = '1'B;
      353     6659    4                    DCT.DQH$->DQH.STATUS.SYSCON_PART = '1'B;
      354     6660    4                    END;
      355     6661    3                 CALL NIX$DEVCONFIG ( DCT, BOOTINFO ) ;
      356     6662    3               CASE(%MPC#);
      357     6663        /**/
      358     6664        /* PARTITION AN MPC */
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:11   
      359     6665        /**/
      360     6666    3                 IF DCT.STATUS.SYSCON_PART THEN
      361     6667    3                    GOTO RETURN_RESULT;
      362     6668    3                 IF DCT.TYPE~=%DV_MPC THEN
      363     6669    3                    GOTO ERR_SCNNOTMPC;
      364     6670    4                 DO I=0 TO 1;
      365     6671    5                    IF SQH.MPC$(I)~=DCT$ AND SQH.MPC$(I)~=ADDR(NIL) THEN DO;
      366     6672    5                       IF NOT SQH.MPC$(I)->DCT.STATUS.SYSCON_PART  AND
      367     6673    5                          NOT SQH.MPC$(I)->DCT.STATUS.MSOS_PART    AND
      368     6674    5                          NOT SQH.MPC$(I)->DCT.STATUS.DOWN         AND
      369     6675    5                          NOT SQH.MPC$(I)->DCT.DFLG.MPCSUSPENDED   AND
      370     6676    5                          NOT SQH.MPC$(I)->DCT.DFLG.MPCSTOP        THEN
      371     6677    5                          GOTO NOT_ONLY_MPC;
      372     6678    5                       END;
      373     6679    4                    END;
      374     6680    4                 DO I=SQH.FDCT TO SQH.FDCT+SQH.NDCT-1;
      375     6681    4                    IF N$DCT$(I)->DCT.TYPE ~= %DV_MPC AND
      376     6682    4                       NOT (N$DCT$(I)->DCT.STATUS.SYSCON_PART AND
      377     6683    4                            N$DCT$(I)->DCT.STATUS.DOWN) THEN
      378     6684    4                       GOTO ERR_ONLYPATH;
      379     6685    4                    END;
      380     6686    3   NOT_ONLY_MPC: ;
      381     6687    3                 DCT.STATUS.DOWN='1'B;
      382     6688    3                 DCT.STATUS.SYSCON_PART='1'B;
      383     6689                      %LOCK   ( G#=SQH.GATE ) ;
      384     6692    4                 DO  I = 0 TO %N_CHANSPERMPC-1 ;
      385     6693    4                     TEMP$ = NI$CHT.DQH$(DCT.MPC.IOCHANX(I)) ;
      386     6694    5                     IF  TEMP$ ~= ADDR(NIL)  THEN DO ;
      387     6695    5                         TEMP$->DQH.CHANSTATE.DOWN = '1'B ;
      388     6696    5                         CALL NIW$DQHSTOP ( TEMP$->DQH ) ;
      389     6697    5                         END ;
      390     6698    4                     END ;
      391     6699                      %UNLOCK ( G#=SQH.GATE ) ;
      392     6702    3               CASE(%FEP##);
      393     6703        /**/
      394     6704        /* PARTITION FEP */
      395     6705        /**/
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:12   
      396     6706    3                 TEMP$ = FP_OPCI$$;
      397     6707    4                 DO WHILE TEMP$ ~= ADDR(NIL);
      398     6708    4                    IF TEMP$->FP$OPCI.FEI# = DQH.FEX THEN /* optical disk controller */
      399     6709    5                       DO I = 0 TO NK_MXLOCAL;
      400     6710    5                          IF N$DCT$(I) ~= ADDR(NIL) THEN
      401     6711    5                             IF N$DCT$(I)->DCT.DQH$ = DQH$ AND
      402     6712    5                                NOT N$DCT$(I)->DCT.STATUS.DOWN THEN
      403     6713    5                                GOTO ERR_ONLYPATH;
      404     6714    5                          END;
      405     6715    4                    TEMP$ = TEMP$->FP$OPCI.LNK$;
      406     6716    4                    END;
      407     6717    3                 CALL KIQ$PARTFEP(FEI,KIER_PART);
      408     6718    3                 FEI$ = KI$FEI$(FEI);
      409     6719    3                 IF KI$FEI.PBST.PROB =KIER_PART
      410     6720    4                 THEN DO;
      411     6721    4                      DQH.STATUS.DOWN='1'B;
      412     6722    4                      DQH.STATUS.SYSCON_PART = '1'B;
      413     6723    4                      DQH.STATE = %IDLE;
      414     6724    4                      END;
      415     6725    4                 ELSE DO;
      416     6726    4                      DQH.STATUS.DOWN='0'B;
      417     6727    4                      DQH.STATUS.SYSCON_PART = '0'B;
      418     6728    4                      DQH.STATE = %BUSY;
      419     6729    4                      GOTO ERR_NOPARTRETFEP;
      420     6730    4                      END;
      421     6731    3               CASE(%IOM##);
      422     6732        /**/
      423     6733        /* PARTITION OR RELEASE AN IOM */
      424     6734        /**/
      425     6735    4                 IF IOM.STATUS.SYSCON_PART THEN DO;
      426     6736    4                    IF SYSCON_V.FUNCTION = %PARTITION# THEN GOTO RETURN_RESULT;
      427     6737    4                    IF IOM.STATUS.DOWN THEN GOTO RETURN_RESULT;
      428     6738    4                    GOTO DO_RELEASE;
      429     6739    4                    END;
      430     6740    3                 J = IOM.IOM#*%N_MAXCHANS;
      431     6741    4                 DO I = J+8 TO J+NI_CHANS(IOM.IOM#);
      432     6742    4                    DQH$ = NI$CHT.DQH$(I);
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:13   
      433     6743    4                    IF DQH$ ~= ADDR(NIL) THEN
      434     6744    5                       IF NOT DQH.STATUS.SYSCON_PART THEN DO;
      435     6745    5                          ERR = %E$CHANUP;
      436     6746    5                          ALTRETURN;
      437     6747    5                          END;
      438     6748    4                    END;
      439     6749    4                 DO I = 1 TO NK_MXLOCAL;
      440     6750    4                    DCT$ = N$DCT$(I);
      441     6751    5                    IF DCT.TYPE = %DV_MPC AND NOT DCT.STATUS.SYSCON_PART THEN DO;
      442     6752    6                       DO J = 0 TO %N_CHANSPERMPC-1;
      443     6753    6                          IF DCT.MPC.IOCHANX(J) ~= 0 AND
      444     6754    6                             DCT.MPC.IOCHAN.IOM(J) ~= IOM.IOM# AND
      445     6755    6                             NOT NI$IOM$(DCT.MPC.IOCHAN.IOM(J))->IOM.STATUS.SYSCON_PART
              6755                                      THEN
      446     6756    6                             GOTO ANOTHER_IOM;
      447     6757    6                          END;
      448     6758    5                       ERR = %E$MPCUP;
      449     6759    5                       ALTRETURN;
      450     6760    5                       END;
      451     6761    4   ANOTHER_IOM: ;
      452     6762    4                    END;
      453     6763    3                 IOM.STATUS.SYSCON_PART = '1'B;
      454     6764    4                 IF HW_IMX OR HW_IOP THEN DO;
      455     6765    4                    DCT$ = N$DCT$(NI_MAINT_DCTX(IOM.IOM#));
      456     6766    5                    IF HW_IMX THEN DO;
      457     6767    6                       IF DCT.MCA.RESERVED THEN DO;
      458     6768    6                          ERR = %E$MCAINUSE;
      459     6769    6                          ALTRETURN;
      460     6770    6                          END;
      461     6771    5                       CHANX = IOM.IOM# * %N_MAXCHANS + 3;
      462     6772    5                       END;
      463     6773    4                    ELSE
      464     6774    4                       CHANX = IOM.IOM# * %N_MAXCHANS + 4;
      465     6775    4                    DCT.STATUS.DOWN = '1'B;
      466     6776    4                    DCT.STATUS.SYSCON_PART = '1'B;
      467     6777    4                    DQH$ = NI$CHT.DQH$(CHANX);
      468     6778    4                    DQH.STATUS.DOWN = '1'B;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:14   
      469     6779    4                    DQH.STATUS.SYSCON_PART = '1'B;
      470     6780    4                    END;
      471     6781    4                 IF NOT IOM.STATUS.MSOS_PART THEN DO;
      472     6782    4                    IOM.STATUS.DOWN = '1'B;
      473     6783    4                    I = IOM.ADDRESS;
      474     6784    4                    CALL HFB$DISPORT (I);
      475     6785    4                    END;
      476     6786    3               IF SYSCON_V.FUNCTION = %PARTITION# THEN GOTO RETURN_RESULT;
      477     6787    3   DO_RELEASE:
      478     6788    4               IF HW_IMX THEN DO;
      479     6789    4                  I = IOM.ADDRESS;
      480     6790    4                  H_DPS8000_SCU_CONF_REG.PORTS(I) = '0'B;
      481     6791    4                  CALL HFC$SSCR(B$SCU$,8,H_DPS8000_SCU_CONF_REG);
      482     6792    4                  CALL TMB$BUF_ALLOC (BUF$,BUFX,DQH$) ALTRET(ERR_RELEASE);
      483     6793    4                  CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_SCU_OFF#,BUFX,I)
      484     6794    4                    ALTRET(SWITCH_REL_FAILED);
      485     6795    4                  IOM.STATUS.DOWN = '1'B;
      486     6796    4                  CALL TMB$BUF_DEALLOC(BUF$,BUFX);
      487     6797    4                  END;
      488     6798    3             CASE(%CPU##);
      489     6799    3               IF S_MPSTATE(CPUX) = %SS_REL# THEN GOTO RETURN_RESULT;
      490     6800    3               IF S_MPSTATE(CPUX) ~= %SS_STOP# THEN
      491     6801    3                  GOTO ERR_CPUNOTSTOP;
      492     6802    3               H_DPS8000_SCU_CONF_REG.PORTS(S_PORTNR(CPUX)) = '0'B;
      493     6803    3               CALL HFC$SSCR(B$SCU$,8,H_DPS8000_SCU_CONF_REG);
      494     6804    3               CALL TMB$BUF_ALLOC (BUF$,BUFX,DQH$) ALTRET(ERR_RELEASE);
      495     6805    3               CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_SCU_OFF#,BUFX,S_PORTNR(CPUX))
      496     6806    3                 ALTRET(SWITCH_REL_FAILED);
      497     6807    3               S_MPSTATE(CPUX) = %SS_REL#;
      498     6808    3               CALL TMB$BUF_DEALLOC(BUF$,BUFX);
      499     6809    3             CASE(%SCU##);
      500     6810    4               IF NOT H_RPM_FLG THEN DO;
      501     6811    4                  ERR = %E$SCUCMDNOTVALID;
      502     6812    4                  GOTO ERR_RETURN;
      503     6813    4                  END;
      504     6814    3               IF S_PNO ~=0 THEN
      505     6815    3                 CALL SSS$BLOCKM;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:15   
      506     6816    3               FIRST_PAGE = H_DPS8000_SCU_INFO.LOWER_BOUND(SCUX);
      507     6817    3               LAST_PAGE = H_DPS8000_SCU_INFO.UPPER_BOUND(SCUX);
      508     6818    3               H_DPS8000_SCU_INFO.SCU_STATUS.REL_IN_PROGRESS(SCUX) = '1'B;
      509     6819    3               CALL FMC$RELSCU(FIRST_PAGE,LAST_PAGE,REL_PAGE);
      510     6820    3               H_DPS8000_SCU_INFO.PAGES(SCUX) = H_DPS8000_SCU_INFO.PAGES(SCUX) -
              6820                        REL_PAGE;
      511     6821    3               CALL HFA$STOPCPU;
      512     6822    3               CALL MMB$RELMEM(FIRST_PAGE,LAST_PAGE,REL_PAGE);
      513     6823    3               H_DPS8000_SCU_INFO.PAGES(SCUX) = H_DPS8000_SCU_INFO.PAGES(SCUX) -
              6823                        REL_PAGE;
      514     6824    4               IF H_DPS8000_SCU_INFO.PAGES(SCUX) = 0  THEN DO;
      515     6825    4                  H_DPS8000_SCU_INFO.SCU_STATUS.REL_BIT(SCUX) = '1'B;
      516     6826    4                  H_DPS8000_SCU_INFO.SCU_STATUS.REL_IN_PROGRESS(SCUX) = '0'B;
      517     6827    4                  MM_PCORE = MM_PCORE - MM_GAPSZ - REL_PAGE;
      518     6828    4                  CALL HFC$RCONF_8000;
      519     6829    4                  H_DPS8000_CPU_CONF_REG.PORT_B_ENABLED = '0'B;
      520     6830    4                  CALL HFC$SCONF_8000;
      521     6831    4                  CALL HFA$STARTCPU;
      522     6832    4                  CALL TMB$BUF_ALLOC (BUF$,BUFX,DQH$) ALTRET(ERR_RELEASE);
      523     6833    5                  IF SCUX = 1 THEN DO;
      524     6834    5                    CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_CPU_OFF#,BUFX,0)
      525     6835    5                      ALTRET(SWITCH_REL_FAILED);
      526     6836    5                    IF H_DPS8000_SCU_CONF_REG.PORTS(5) = '1'B THEN
      527     6837    5                      CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_CPU_OFF#,BUFX,2)
      528     6838    5                        ALTRET(SWITCH_REL_FAILED);
      529     6839    5                    END;
      530     6840    5                  ELSE DO;
      531     6841    5                    CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_CPU_OFF#,BUFX,1)
      532     6842    5                      ALTRET(SWITCH_REL_FAILED);
      533     6843    5                    IF H_DPS8000_SCU_CONF_REG.PORTS(7) = '1'B THEN
      534     6844    5                      CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_CPU_OFF#,BUFX,3)
      535     6845    5                        ALTRET(SWITCH_REL_FAILED);
      536     6846    5                    END;
      537     6847    4                  CALL TMB$BUF_DEALLOC(BUF$,BUFX);
      538     6848    4                  END;
      539     6849    4               ELSE DO;
      540     6850    4                 CALL HFA$STARTCPU;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:16   
      541     6851    4                 ERR = %E$SCUPAGESINUSE;
      542     6852    4                 ALTRETURN;
      543     6853    4                 END;
      544     6854    3               END;                        /* CASE SYSCON_V.COMPONENT            */
      545     6855
      546     6856
      547     6857
      548     6858    2            CASE(%RETURN#);
      549     6859    3              DO CASE(SYSCON_V.COMPONENT);
      550     6860        /**/
      551     6861        /* RETURN CHANNEL */
      552     6862        /**/
      553     6863    3               CASE(%CHANNEL#);
      554     6864    3                 IF DQH.MPC$ = ADDR(NIL) THEN   /* FEP and console */
      555     6865    3                    GOTO ERR_NOPARTRETCHAN;
      556     6866    3                 IF NOT DQH.STATUS.SYSCON_PART THEN
      557     6867    3                    GOTO RETURN_RESULT;
      558     6868    3                 IF DQH.STATUS.TND~=0 THEN
      559     6869    3                    GOTO ERR_SCNTDUSER;
      560     6870    3                 IF NI$IOM$(DQH.IOCHAN.IOM)->IOM.STATUS.SYSCON_PART THEN
      561     6871    3                    GOTO ERR_IOMDOWN;
      562     6872    3                 DQH.STATUS.SYSCON_PART = '0'B;
      563     6873    4                 IF NOT DQH.STATUS.MSOS_PART THEN DO;
      564     6874                         %LOCK (G#=SQH.GATE);
      565     6877    4                    DQH.STATUS.DOWN = '0'B;
      566     6878    4                    IF  DQH.MPC$->DCT.DQH$ = ADDR(NIL)
      567     6879    4                    THEN
      568     6880    4                        DQH.MPC$->DCT.DQH$ = DQH$ ;
      569     6881    4                    ELSE IF  DQH.MPC$->DCT.DQH$->DQH.STATUS.DOWN
      570     6882    4                         AND DQH.MPC$->DCT.MPC.TYPE ~= %DV_AP
      571     6883    4                    THEN
      572     6884    4                       DQH.MPC$->DCT.DQH$ = DQH$;
      573     6885                         %UNLOCK(G#=SQH.GATE);
      574     6888    4                    IF  DQH.MPC$->DCT.MPC.TYPE ~= %DV_AP  AND
      575     6889    4                        NOT DQH.MPC$->DCT.STATUS.DOWN
      576     6890    5                    THEN DO  ;
      577     6891    5                        DQH.CHANSTATE.DOWN = '0'B ;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:17   
      578     6892    5                        CALL NIW$DQHSTART ( DQH ) ;
      579     6893    5                        END ;
      580     6894    4                    END;
      581     6895    3               CASE(%DVC#);
      582     6896        /**/
      583     6897        /* RETURN DEVICE */
      584     6898        /**/
      585     6899    3                 DCT.TDUSER#=0;
      586     6900    3                 IF (NOT DCT.STATUS.DOWN AND DCT.STATUS.SYSCON_PART) OR
      587     6901    4                    NOT DCT.STATUS.SYSCON_PART THEN DO;
      588     6902    4                    DCT.STATUS.SYSCON_PART = '0'B;  /* cancel delayed part req */
      589     6903    4                    GOTO RETURN_RESULT;
      590     6904    4                    END;
      591     6905    3                 IF DCT.STATUS.TND~=0 THEN
      592     6906    3                    GOTO ERR_SCNTDUSER;
      593     6907    3                 IF DCT.TYPE=%DV_MPC THEN
      594     6908    3                    GOTO ERR_SCNNOTDEV;
      595     6909    4                 DO CASE(DCT.TYPE);
      596     6910    4                  CASE(%DV_SC);
      597     6911    4                    IF NI$IOM$(DCT.DQH$->DQH.IOCHAN.IOM)->IOM.STATUS.SYSCON_PART THEN
      598     6912    4                       GOTO ERR_IOMDOWN;
      599     6913    5                    ELSE DO;
      600     6914    5                       DCT.DQH$->DQH.STATUS.SYSCON_PART = '0'B;
      601     6915    5                       GOTO PATH_AVAILABLE;
      602     6916    5                       END;
      603     6917    4                  CASE(%DV_LP,%DV_CR,%DV_CP,%DV_AP);
      604     6918    4                    IF NOT DCT.DQH$->DQH.STATUS.SYSCON_PART THEN
      605     6919    4                       IF NOT DCT.DQH$->DQH.MPC$->DCT.STATUS.SYSCON_PART THEN
      606     6920    4                          GOTO PATH_AVAILABLE;
      607     6921    4                  CASE(%DV_OD);
      608     6922    4                    IF NOT DCT.DQH$->DQH.STATUS.SYSCON_PART THEN
      609     6923    4                       GOTO PATH_AVAILABLE;
      610     6924    4                  CASE(ELSE);
      611     6925    5                    DO I = 0 TO 1;
      612     6926    5                       J = 0;
      613     6927    5                       IF SQH.MPC$(I) ~= ADDR(NIL) THEN
      614     6928    5                          IF NOT SQH.MPC$(I)->DCT.STATUS.SYSCON_PART  AND
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:18   
      615     6929    5                             NOT SQH.MPC$(I)->DCT.STATUS.MSOS_PART    AND
      616     6930    5                             NOT SQH.MPC$(I)->DCT.STATUS.DOWN         AND
      617     6931    5                             NOT SQH.MPC$(I)->DCT.DFLG.MPCSUSPENDED   AND
      618     6932    5                             NOT SQH.MPC$(I)->DCT.DFLG.MPCSTOP
      619     6933    5                          THEN
      620     6934    5                             CALL NIW$MPCDQH ( SQH.MPC$(I)->DCT, TEMP$ )
      621     6935    6                             WHENRETURN DO ;
      622     6936    6                                 GOTO PATH_AVAILABLE ;
      623     6937    6                                 END ;
      624     6938    5                       END;
      625     6939    4                  END;
      626     6940    3                 ERR=%E$SCNNOPATH;
      627     6941    3                 ALTRETURN;
      628     6942    3   PATH_AVAILABLE: ;
      629     6943    3                 DCT.STATUS.SYSCON_PART = '0'B;
      630     6944    4                 IF NOT DCT.STATUS.MSOS_PART THEN DO;
      631     6945    4                    IF DCT.RAT$ ~= ADDR(NIL) OR DCT.DFLG.CONSOLE THEN
      632     6946    4                      CALL NKP$RTN(DCT,ERR) ALTRET(ERR_RETURN);
      633     6947    5                    IF DCT.TYPE = %DV_DP THEN DO;
      634     6948    5                       DCT.DP.MIRROR = '0'B ;
      635     6949    5                       CALL NIQ$GET(REQ$) ALTRET(BAG_IT);
      636     6950    5                       REQ.DLA.DCTX = DCT.DCTX;
      637     6951    5                       REQ.FC = %N_RQSTAT;
      638     6952    5                       REQ.BPMIR = '1'B ;
      639     6953    5                       REQ.NOALT='1'B;
      640     6954    5                       REQ.OPFLG=OP_EA;
      641     6955    5                       REQ.EAENTRY=ENTADDR(TDP$SYSCONEA);
      642     6956    5                       CALL NIO$QUE(REQ);
      643     6957    5                       END;                   /* IF TYPE = DP                       */
      644     6958    4      BAG_IT:
      645     6959    4                    IF DCT.DFLG.CONSOLE THEN
      646     6960    4                       DCT.DQH$->DQH.STATUS.DOWN = '0'B;
      647     6961    4                    DCT.STATUS.DOWN='0'B;
      648     6962    4                    END;
      649     6963    3               CASE(%MPC#);
      650     6964        /**/
      651     6965        /* RETURN MPC */
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:19   
      652     6966        /**/
      653     6967    3                 IF NOT DCT.STATUS.SYSCON_PART THEN
      654     6968    3                    GOTO RETURN_RESULT;
      655     6969    3                 IF DCT.TYPE~=%DV_MPC THEN
      656     6970    3                    GOTO ERR_SCNNOTMPC;
      657     6971    3                 IF DCT.STATUS.TND~=0 THEN
      658     6972    3                    GOTO ERR_SCNTDUSER;
      659     6973    4                 DO I = 0 TO %N_CHANSPERMPC-1;
      660     6974    4                    IF DCT.MPC.IOCHANX(I) ~= 0 AND
      661     6975    4                       NOT NI$IOM$(DCT.MPC.IOCHAN.IOM(I))->IOM.STATUS.SYSCON_PART THEN
      662     6976    4                       GOTO IOM_AVAILABLE;
      663     6977    4                    END;
      664     6978    3                 GOTO ERR_IOMDOWN;
      665     6979    3   IOM_AVAILABLE: ;
      666     6980    3                 DCT.STATUS.SYSCON_PART = '0'B;
      667     6981    3                 DCT.STATUS.DOWN = DCT.STATUS.MSOS_PART;
      668     6982    4                 DO  I = 0 TO %N_CHANSPERMPC-1 ;
      669     6983    4                     TEMP$ = NI$CHT.DQH$(DCT.MPC.IOCHANX(I)) ;
      670     6984    4                     IF  TEMP$ ~= ADDR(NIL)  THEN
      671     6985    5                         IF  NOT TEMP$->DQH.STATUS.DOWN  THEN  DO ;
      672     6986    5                             TEMP$->DQH.CHANSTATE.DOWN = '0'B ;
      673     6987    5                             CALL NIW$DQHSTART ( TEMP$->DQH ) ;
      674     6988    5                             END ;
      675     6989    4                     END ;
      676     6990    3               CASE(%FEP##);
      677     6991        /**/
      678     6992        /* RETURN FEP */
      679     6993        /**/
      680     6994    3                 IF NI$IOM$(DQH.IOCHAN.IOM)->IOM.STATUS.SYSCON_PART THEN
      681     6995    3                    GOTO ERR_IOMDOWN;
      682     6996    3                 CALL KIQ$UPRTFEP(FEI);
      683     6997    3                 FEI$ = KI$FEI$(FEI);
      684     6998    3                 IF KI$FEI.PBST.PROB =KIER_PART
      685     6999    4                 THEN DO;
      686     7000    4                      DQH.STATUS.DOWN='1'B;
      687     7001    4                      DQH.STATUS.SYSCON_PART = '1'B;
      688     7002    4                      DQH.STATE = %IDLE;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:20   
      689     7003    4                      GOTO ERR_NOPARTRETFEP;
      690     7004    4                      END;
      691     7005    4                 ELSE DO;
      692     7006    4                      DQH.STATUS.DOWN='0'B;
      693     7007    4                      DQH.STATUS.SYSCON_PART = '0'B;
      694     7008    4                      DQH.STATE = %BUSY;
      695     7009    4                      END;
      696     7010    3               CASE(%IOM##);
      697     7011        /**/
      698     7012        /* RETURN AN IOM */
      699     7013        /**/
      700     7014    3                 IF NOT IOM.STATUS.SYSCON_PART THEN
      701     7015    3                    GOTO RETURN_RESULT;
      702     7016    4                  IF HW_IMX THEN DO;
      703     7017    5                     IF NOT IOM.STATUS.DOWN THEN DO;
      704     7018    5                       IF H_DPS8000_SCU_CONF_REG.PORTS(IOM.IOM# * 2) = '0'B THEN
      705     7019    5                         GOTO ERR_IOMNOTENABLED;
      706     7020    5                     END;
      707     7021    4                     I = IOM.ADDRESS;
      708     7022    4                     CALL TMB$BUF_ALLOC (BUF$,BUFX,DQH$) ALTRET(ERR_RETURN);
      709     7023        /* THIS CODE CHECKS THE STATE OF THE SCU THIS IMX IS ASSOCIATED WITH */
      710     7024        /* THERE IS NO EASY WAY TO GET THE STATE OF THE IMX               */
      711     7025        /* THE THEORY IS IF YOU CAN GET TO THE SCU THIS IMX IS ASSOCAITED */
      712     7026        /* WITH YOU CAN ALSO GET TO THE IMX                               */
      713     7027    4                     CALL TMB$MCA(DQH$->DQH,TM_OC_STATE_SCU#,BUFX,MOD(IOM#,2))
      714     7028    4                       ALTRET(SWITCH_RET_FAILED);
      715     7029    4                     CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_SCU_ON#,BUFX,I)
      716     7030    4                       ALTRET(SWITCH_RET_FAILED);
      717     7031    4                     IOM.STATUS.DOWN = '0'B;
      718     7032    4                     CALL TMB$BUF_DEALLOC(BUF$,BUFX);
      719     7033    4                     H_DPS8000_SCU_CONF_REG.PORTS(I) = '1'B;
      720     7034    4                     CALL HFC$SSCR(B$SCU$,8,H_DPS8000_SCU_CONF_REG);
      721     7035    4                     END;
      722     7036    3                 IOM.STATUS.SYSCON_PART = '0'B;
      723     7037    4                 IF HW_IMX OR HW_IOP THEN DO;
      724     7038    4                    DCT$ = N$DCT$(NI_MAINT_DCTX(IOM.IOM#));
      725     7039    4                    DCT.STATUS.DOWN = '0'B;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:21   
      726     7040    4                    DCT.STATUS.SYSCON_PART = '0'B;
      727     7041    4                    IF HW_IMX THEN
      728     7042    4                       CHANX = IOM.IOM# * %N_MAXCHANS + 3;
      729     7043    4                    ELSE
      730     7044    4                       CHANX = IOM.IOM# * %N_MAXCHANS + 4;
      731     7045    4                    DQH$ = NI$CHT.DQH$(CHANX);
      732     7046    4                    DQH.STATUS.DOWN = '0'B;
      733     7047    4                    DQH.STATUS.SYSCON_PART = '0'B;
      734     7048    4                    END;
      735     7049    4                 IF NOT IOM.STATUS.MSOS_PART THEN DO;
      736     7050    4                    IOM.STATUS.DOWN = '0'B;
      737     7051    4                    I = IOM.ADDRESS;
      738     7052    4                    CALL HFB$ENAPORT (I);
      739     7053    4                    END;
      740     7054    4                 IF HW_IMX THEN DO;
      741     7055    5                    CALL TMB$BUF_ALLOC (BUF$,BUFX) WHENALTRETURN DO;
      742     7056    5                       ERR = %E$MCAINUSE;
      743     7057    5                       GOTO ERR_RETURN;
      744     7058    5                       END;
      745     7059    4                    CALL TMB$MCA(N$DCT$(NI_MAINT_DCTX(SYSCON_V.IOM))->DCT.DQH$->DQH,
              7059                             TM_OC_CONFIG#,BUFX)
      746     7060    5                    WHENALTRETURN DO;
      747     7061    5                       CALL TMB$BUF_DEALLOC (BUF$,BUFX);
      748     7062    5                       GOTO ERR_RETURN;
      749     7063    5                       END;
      750     7064    5                    DO IPC = 0 TO 15;
      751     7065    5                       DQH$ = ADDR(NIL);
      752     7066    6                       IF MCA_CFG.LEVEL_1.STATE(IPC) > 7 THEN DO;
      753     7067    6                          CHAN = SYSCON_V.IOM * %N_MAXCHANS + MCA_CFG.LEVEL_1.PRI_CHN(
              7067                                   IPC);
      754     7068    7                          DO J = CHAN TO (CHAN + MCA_CFG.LEVEL_1.LOG_CHNS(IPC)-1);
      755     7069    7                             TDQH$ = NI$CHT$ -> NI$CHT.DQH$(J);
      756     7070    8                             IF TDQH$ ~= ADDR(NIL) THEN DO;
      757     7071    8                                DQH$ = TDQH$;
      758     7072    8                                DQH$ -> DQH.IPCNUM = IPC;
      759     7073    8                                END;
      760     7074    7                             END;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:22   
      761     7075    6                          IF MCA_FW_LOAD(MCA_CFG.LEVEL_1.HARDWARE_ID(IPC)) AND
      762     7076    6                             DQH$ ~= ADDR(NIL) THEN
      763     7077    7                             DO CASE (DQH$ -> DQH.MPC$ -> DCT.TYPE);
      764     7078    7                               CASE(%DV_DP);
      765     7079    7                                 DQH$->DQH.MPC$->DCT.MPC.FWNAME='IFDK';
      766     7080    7                               CASE(%DV_MT);
      767     7081    7                                 DQH$->DQH.MPC$->DCT.MPC.FWNAME='IFTP';
      768     7082    7                               CASE(%DV_LP);
      769     7083    7                                 DQH$->DQH.MPC$->DCT.MPC.FWNAME='IPR5';
      770     7084    7                               CASE(%DV_CR);
      771     7085    7                                 DQH$->DQH.MPC$->DCT.MPC.FWNAME='ICRD';
      772     7086    7                             END;  /*CASE*/
      773     7087    6                          END;
      774     7088    5                       END;
      775     7089    4                    CALL TMB$BUF_DEALLOC (BUF$,BUFX);
      776     7090    4                    END;
      777     7091    3              CASE (%CPU##);
      778     7092    3                IF S_MPSTATE(CPUX) < %SS_REL# THEN
      779     7093    3                   GOTO RETURN_RESULT;
      780     7094    3                CALL TMB$BUF_ALLOC (BUF$,BUFX,DQH$) ALTRET(ERR_RELEASE);
      781     7095    3                CALL TMB$MCA(DQH$->DQH,TM_OC_STATE_CPU#,BUFX,PHY_CPU)
      782     7096    3                  ALTRET(SWITCH_RET_FAILED);
      783     7097    3                CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_SCU_ON#,BUFX,S_PORTNR(CPUX))
      784     7098    3                  ALTRET(SWITCH_RET_FAILED);
      785     7099    3                H_DPS8000_SCU_CONF_REG.PORTS(S_PORTNR(CPUX)) = '1'B;
      786     7100    3                CALL HFC$SSCR(B$SCU$,8,H_DPS8000_SCU_CONF_REG);
      787     7101    3                S_MPSTATE(CPUX) = %SS_STOP#;
      788     7102    3                CALL TMB$BUF_DEALLOC(BUF$,BUFX);
      789     7103    3             CASE(%SCU##);
      790     7104    4               IF NOT H_RPM_FLG THEN DO;
      791     7105    4                  ERR = %E$SCUCMDNOTVALID;
      792     7106    4                  GOTO ERR_RETURN;
      793     7107    4                  END;
      794     7108    3               IF S_PNO ~= 0 THEN
      795     7109    3                 CALL SSS$BLOCKM;
      796     7110    3               CALL TMB$BUF_ALLOC (BUF$,BUFX,DQH$) ALTRET(ERR_RELEASE);
      797     7111    3               CALL TMB$MCA(DQH$->DQH,TM_OC_STATE_SCU#,BUFX,SCUX)
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:23   
      798     7112    3                 ALTRET(SWITCH_RET_FAILED);
      799     7113    3               CALL HFC$RCONF_8000;
      800     7114    3               H_DPS8000_CPU_CONF_REG.PORT_B_ENABLED = '1'B;
      801     7115    3               H_DPS8000_CPU_CONF_REG.ADDRESS_SPLIT = H_DPS8000_SPLIT_TABLE(
      802     7116    3                H_DPS8000_SCU_INFO.LOWER_BOUND(SCUX)/(1024*32));
      803     7117    3               CALL HFC$SCONF_8000;
      804     7118    4                IF SCUX = 1 THEN DO;
      805     7119    4                  CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_CPU_ON#,BUFX,0)
      806     7120    4                    ALTRET(SWITCH_RET_FAILED);
      807     7121    4                  IF H_DPS8000_SCU_CONF_REG.PORTS(5) = '1'B THEN
      808     7122    4                    CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_CPU_ON#,BUFX,2)
      809     7123    4                      ALTRET(SWITCH_RET_FAILED);
      810     7124    4                  END;
      811     7125    4                ELSE DO;
      812     7126    4                  CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_CPU_ON#,BUFX,1)
      813     7127    4                    ALTRET(SWITCH_RET_FAILED);
      814     7128    4                  IF H_DPS8000_SCU_CONF_REG.PORTS(7) = '1'B THEN
      815     7129    4                    CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_CPU_ON#,BUFX,3)
      816     7130    4                      ALTRET(SWITCH_RET_FAILED);
      817     7131    4                  END;
      818     7132    3               FIRST_PAGE = H_DPS8000_SCU_INFO.LOWER_BOUND(SCUX);
      819     7133    3               LAST_PAGE = H_DPS8000_SCU_INFO.UPPER_BOUND(SCUX);
      820     7134    3               H_DPS8000_SCU_INFO.SCU_STATUS.RET_IN_PROGRESS(SCUX) = '1'B;
      821     7135    3               H_DPS8000_SCU_INFO.PAGES(SCUX) = 0;
      822     7136    3               CALL HFA$STOPCPU;
      823     7137    4               DO REL_PAGE = FIRST_PAGE TO LAST_PAGE;
      824     7138    5                 CALL MMB$RETMEM(REL_PAGE) WHENRETURN DO;
      825     7139    5                    H_DPS8000_SCU_INFO.PAGES(SCUX) = H_DPS8000_SCU_INFO.PAGES(SCUX) + 1
              7139                             ;
      826     7140    5                   END;
      827     7141    4                 END;
      828     7142    3               MM_PCORE = MM_PCORE + MM_GAPSZ + H_DPS8000_SCU_INFO.PAGES(SCUX);
      829     7143    3               CALL HFA$STARTCPU;
      830     7144    3               IF H_DPS8000_SCU_INFO.PAGES(SCUX) = (H_DPS8000_SCU_INFO.UPPER_BOUND(SCUX
              7144                        )
      831     7145    4                  - H_DPS8000_SCU_INFO.LOWER_BOUND(SCUX) + 1) THEN DO;
      832     7146    4                 H_DPS8000_SCU_INFO.SCU_STATUS.RET_IN_PROGRESS(SCUX) = '0'B;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:24   
      833     7147    4                 H_DPS8000_SCU_INFO.SCU_STATUS.REL_BIT(SCUX) = '0'B;
      834     7148    4                 END;
      835     7149    3                CALL TMB$BUF_DEALLOC(BUF$,BUFX);
      836     7150    3               END;                        /* CASE SYSCON_V.COMPONENT            */
      837     7151    2            CASE(%SETFLAG#);
      838     7152        /**/
      839     7153        /* SET FLAGS */
      840     7154        /**/
      841     7155    3              DO CASE(SYSCON_V.FLAG);
      842     7156    3               CASE(%TDOK#);
      843     7157    4                 DO CASE(SYSCON_V.COMPONENT);
      844     7158    4                  CASE(%CHANNEL#,%FEP##);
      845     7159    4                    DQH.STATUS.TDOK = SYSCON_V.FLAGVAL;
      846     7160    4                  CASE(%DVC#,%MPC#);
      847     7161    4                    DCT.STATUS.TDOK = SYSCON_V.FLAGVAL;
      848     7162    4                  CASE(%IOM##);
      849     7163    4                    ERR = %E$TDOKFORIOM;
      850     7164    4                    ALTRETURN;
      851     7165    4                  END;                     /* CASE COMPONENT                     */
      852     7166    3               CASE(%CHECKWRITE#);
      853     7167    4                 DO CASE(SYSCON_V.COMPONENT);
      854     7168    4                  CASE(%DVC#);
      855     7169    4                    IF SUBSTR(SYSCON_V.DEVNM,0,2) ~= 'DP' THEN
      856     7170    4                       GOTO ERR_CWFORNONDP;
      857     7171    4                    ELSE DCT.DFLG.CHECKWRITE = SYSCON_V.FLAGVAL;
      858     7172    4                  CASE(ELSE);
      859     7173    4                    GOTO ERR_CWFORNONDP;
      860     7174    4                  END;                     /* CASE COMPONENT                     */
      861     7175    3               END;                        /* CASE SYSCON_V.FLAG                 */
      862     7176    2            END;
      863     7177    1   LOG_IT: ;
      864     7178    2           IF SYSCON_V.FUNCTION~=%DISPLAY# AND B$JIT.USER>JG_GHOST1# THEN DO;
      865     7179    2              EL$SYSCON=SYSCON_V;
      866     7180    2              EL$SYSCON.ACCN=B$JIT.ACCN;
      867     7181    2              EL$SYSCON.UNAME=B$JIT.UNAME;
      868     7182    2              EL$SYSCON.SYSID=B$JIT.SYSID;
      869     7183    2              CALL ELA$SYSLOG(EL_SYSCON,EL$SYSCON,SIZEC(EL$SYSCON),'0'B,1,I);
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:25   
      870     7184    3              IF BOOTINFO.BOOTINFO ~= '0'B THEN DO ;
      871     7185    3                 EL$CHNGAARD = BOOTINFO.BOOTINFO ;
      872     7186    3                 EL$CHNGAARD.ACCN = B$JIT.ACCN;
      873     7187    3                 EL$CHNGAARD.UNAME = B$JIT.UNAME;
      874     7188    3                 EL$CHNGAARD.SYSID = B$JIT.SYSID;
      875     7189    3                 CALL ELA$SYSLOG(EL_CHNGAARD,EL$CHNGAARD,SIZEC(EL$CHNGAARD),'0'B,EL_ERR
              7189                          ,I);
      876     7190    3                 END;
      877     7191    2              END;
      878     7192    1   RETURN_RESULT: ;
      879     7193    2           DO CASE(SYSCON_V.COMPONENT);
      880     7194    2            CASE(%CHANNEL#,%FEP##);
      881     7195    2              RESULT = DQH.STATUS;
      882     7196    2              RESULT.CHECKWRITE = '0'B;
      883     7197    2              RESULT.BOOTINFO = BOOTINFO.BOOTINFO ;
      884     7198    2            CASE(%DVC#,%MPC#);
      885     7199    2              RESULT = DCT.STATUS;
      886     7200    2              RESULT.CHECKWRITE = DCT.DFLG.CHECKWRITE;
      887     7201    2              RESULT.BOOTINFO = BOOTINFO.BOOTINFO ;
      888     7202    2            CASE(%IOM##);
      889     7203    2              RESULT.PART = IOM.STATUS.DOWN;
      890     7204    2              RESULT.SYSCONPART = IOM.STATUS.SYSCON_PART;
      891     7205    2              RESULT.MSOSPART = IOM.STATUS.MSOS_PART;
      892     7206    2              RESULT.RELEASED = IOM.STATUS.DOWN;
      893     7207    2            CASE (%CPU##);
      894     7208    2              IF S_MPSTATE(CPUX) = %SS_REL# THEN
      895     7209    2                RESULT.RELEASED = '1'B;
      896     7210    2            CASE (%SCU##);
      897     7211    2              IF H_DPS8000_SCU_INFO.SCU_STATUS.REL_BIT(SCUX) = '1'B THEN
      898     7212    2                RESULT.RELEASED = '1'B;
      899     7213    2            END;                           /* CASE SYSCON_V.COMPONENT            */
      900     7214    1           RETURN;
      901     7215    1   ERR_RETURN: ;
      902     7216    1           ALTRETURN;
      903     7217
      904     7218    1   ERR_CWFORNONDP: ;
      905     7219    1           ERR = %E$CWFORNONDP;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:26   
      906     7220    1           ALTRETURN;
      907     7221    1   ERR_NOPARTRETFEP: ;
      908     7222    1           ERR = %E$NOPARTRETFEP;
      909     7223    1           ALTRETURN;
      910     7224    1   ERR_DEVNOTIDLE: ;
      911     7225    1           ERR = %E$DEVNOTIDLE;
      912     7226    1           ALTRETURN;
      913     7227    1   ERR_NOPARTRETCHAN: ;
      914     7228    1           ERR = %E$NOPARTRETCHAN;
      915     7229    1           ALTRETURN;
      916     7230    1   ERR_IOMDOWN: ;
      917     7231    1           ERR = %E$IOMDOWN;
      918     7232    1           ALTRETURN;
      919     7233    1   ERR_ONLYPATH: ;
      920     7234    1           ERR = %E$ONLYPATH;
      921     7235    1           ALTRETURN;
      922     7236    1   ERR_SCNNOCOMP: ;
      923     7237    1           ERR = %E$SCNNOCOMP;
      924     7238    1           ALTRETURN;
      925     7239    1   ERR_SCNNOTDEV: ;
      926     7240    1           ERR = %E$SCNNOTDEV;
      927     7241    1           ALTRETURN;
      928     7242    1   ERR_SCNNOTMPC: ;
      929     7243    1           ERR = %E$SCNNOTMPC;
      930     7244    1           ALTRETURN;
      931     7245    1   ERR_SCNTDUSER: ;
      932     7246    1           ERR = %E$SCNTDUSER;
      933     7247    1           ALTRETURN;
      934     7248    1   ERR_IOMNOTENABLED:
      935     7249    1           ERR = %E$IOMNOTENABLED;
      936     7250    1           ALTRETURN;
      937     7251    1   ERR_CPUNOTSTOP:
      938     7252    1           ERR = %E$CPURUNNING;
      939     7253    1           ALTRETURN;
      940     7254    1   ERR_RELEASE:
      941     7255    1           ERR = %E$MCAINUSE;
      942     7256    1           ALTRETURN;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:27   
      943     7257    1   ERR_CPUMASTER:
      944     7258    1           ERR = %E$CPUMASTER;
      945     7259    1           ALTRETURN;
      946     7260    1   ERR_SCUNOTVALID:
      947     7261    1           ERR = %E$SCUNOTVALID;
      948     7262    1           ALTRETURN;
      949     7263    1   ERR_SCUNOTCONFIG:
      950     7264    1           ERR = %E$SCUNOTCONFIG;
      951     7265    1           ALTRETURN;
      952     7266    1   SWITCH_RET_FAILED:
      953     7267    1           CALL TMB$BUF_DEALLOC(BUF$,BUFX);
      954     7268    1           IF SYSCON_V.COMPONENT = %IOM## THEN
      955     7269    1             ERR = %E$IOMNOTRETURNED;
      956     7270    1           ELSE
      957     7271    1             IF SYSCON_V.COMPONENT = %CPU## THEN
      958     7272    1               ERR = %E$CPUNOTRETURNED;
      959     7273    1             ELSE
      960     7274    1               ERR = %E$SCUNOTRETURNED;
      961     7275    1           ALTRETURN;
      962     7276    1   SWITCH_REL_FAILED:
      963     7277    1           IF SYSCON_V.COMPONENT = %IOM## THEN
      964     7278    1             ERR = %E$IOMNOTRELEASED;
      965     7279    1           ELSE
      966     7280    1             IF SYSCON_V.COMPONENT = %CPU## THEN
      967     7281    1               ERR = %E$CPUNOTRELEASED;
      968     7282    1             ELSE
      969     7283    1               ERR = %E$SCUNOTRELEASED;
      970     7284    1           CALL TMB$BUF_DEALLOC(BUF$,BUFX);
      971     7285    1           ALTRETURN;
      972     7286    1   END TDP$SYSCON;
      973     7287        %EOD;

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:28   
--  Include file information  --

   TM_DATA_M.:E05TOU  is referenced.
   TD_ERRORS_C.:E05TOU  is referenced.
   TD$CP6V_C.:E05TOU  is referenced.
   SS_CNTRLD_R.:E05TOU  cannot be made into a system file and is referenced.
   SS_CNTRL_R.:E05TOU  cannot be made into a system file and is referenced.
   SS_SCHED_R.:E05TOU  cannot be made into a system file and is referenced.
   SS_SCHED_C.:E05TOU  is referenced.
   N_FC_C.:E05TOU  is referenced.
   NI_MACROS_C.:E05TOU  cannot be made into a system file and is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   NI_DATA_C.:E05TOU  is referenced.
   MM_MACRO_M.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   MM$SYSGEN.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   MM_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   KI_SUBS_C.:E05TOU  is referenced.
   KI_MACROS_C.:E05TOU  is referenced.
   KI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   JG_GHOSTS_C.:E05TOU  is referenced.
   IS$MACROS.:E05TOU  is referenced.
   HF_LOCK_C.:E05TOU  cannot be made into a system file and is referenced.
   HF_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   FR_ERRORS_C.:E05TOU  is referenced.
   FP_MACRO_C.:E05TOU  is referenced.
   EL_SUBS_C.:E05TOU  is referenced.
   EL$TABLES.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure TDP$SYSCON.
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:29   

   Procedure TDP$SYSCON requires 2377 words for executable code.
   Procedure TDP$SYSCON requires 62 words of local(AUTO) storage.

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:30   

 Object Unit name= TDP$SYSCON                                 File name= TDP$SYSCON.:E05TOU
 UTS= JUL 30 '97 06:03:27.52 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  RoData even  UTS      9     11  TDP$SYSCON
    1   Proc  even  none  2377   4511  TDP$SYSCON
    2  RoData even  none    35     43  TDP$SYSCON

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes    yes     yes      Std        3  TDP$SYSCON
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:31   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       1 HFC$LOCK
 yes     yes           Std       2 NIW$MPCDQH
 yes     yes           Std       1 NIW$DQHSTOP
         yes           Std       1 HFC$UNLOCK
 yes     yes           Std       2 NKP$RTN
 yes     yes           Std       1 NIO$QUE
 yes     yes           Std       2 NKP$PART
         yes           Std       2 FMN$AVR
         yes           Std       2 NIX$DEVCONFIG
 yes     yes           Std       4 TMB$MCA
         yes           Std       0 HFC$RCONF_8000
         yes           Std       0 HFA$STOPCPU
 yes     yes           Std       1 NIQ$GET
         yes           Std       1 TDP$SYSCONEA
         yes           Std       1 KIQ$UPRTFEP
 yes     yes           Std       6 ELA$SYSLOG
         yes           Std       3 NIX$CHANCONFIG
 yes     yes           Std       2 TMB$BUF_DEALLOC
 yes     yes           Std       1 NIW$DQHSTART
         yes           Std       1 HFB$DISPORT
         yes           Std       3 HFC$SSCR
         yes           Std       1 HFB$ENAPORT
         yes           Std       0 HFA$STARTCPU
 yes     yes           Std       1 MMB$RETMEM
         yes           Std       2 KIQ$PARTFEP
 yes     yes           Std       3 TMB$BUF_ALLOC
 yes     yes           Std       3 FMC$RELSCU
 yes     yes           Std       3 MMB$RELMEM
         yes           Std       0 HFC$SCONF_8000
         yes           Std       0 SSS$BLOCKM
                       nStd      0 X66_AUTO_3
                       Std       0 B_CONSPOOL_D
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:32   
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     H_RPM_FLG                             H_DPS8000_CPU_CONF_REG                H_DPS8000_SCU_CONF_REG
     H_DPS8000_SCU_INFO                    H_RPM_CONNECT_TABLE                   HW_IOP
     HW_CHANS                              HW_IMX                                KI_FEI$$
     KI_NODES                              KI_MXFE                          r    MM_BYP$
     MM_PCORE                              MM_GAPSZ                              N$DCT$$
     N$FQ$                                 NI$CHT$                               NI$FQ$
     NI$IBUF$                              NI$IOM$                               NI$RP$
     NI_CHANS                              NI_IOMS                               NI_MAINT_DCTX
     S_PORTNR                              S_MPSTATE                             S_NSCPU
     B$JIT$                                B$SCU$                                FP_OPCI$$
     NK_MXLOCAL                            S_PNO                                 B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:33   


        1        1        /*T***********************************************************/
        2        2        /*T*                                                         */
        3        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        4        4        /*T*                                                         */
        5        5        /*T***********************************************************/
        6        6        /* TDP$SYSCON - PROCESS M$SYSCON PMME */
        7        7        TDP$SYSCON: PROC(SYSCON_V,RESULT,ERR) ALTRET;

      7  1 000000   000000 700200 xent  TDP$SYSCON   TSX0  ! X66_AUTO_3
         1 000001   000076 000003                    ZERO    62,3

        8        8        /*
        9        9                Includes
       10       10        */
       11       11        %INCLUDE                B$JIT ;
       12      614        %INCLUDE                CP_6_SUBS ;
       13     1154        %INCLUDE                EL$TABLES ;
       14     1477        %INCLUDE                EL_SUBS_C ;
       15     1561        %INCLUDE                FP_MACRO_C ;
       16     1833        %INCLUDE                FR_ERRORS_C ;
       17     1864        %INCLUDE                HF_DATA_R ;
       18     1907        %INCLUDE                HF_LOCK_C ;
       19     1921        %INCLUDE                IS$MACROS ;
       20     3196        %INCLUDE                JG_GHOSTS_C ;
       21     3286        %INCLUDE                KI_DATA_R ;
       22     3312        %INCLUDE                KI_MACROS_C ;
       23     3920        %INCLUDE                KI_SUBS_C ;
       24     4056        %INCLUDE                MM_DATA_R ;
       25     4576        %INCLUDE                NI_DATA_C ;
       26     4689        %INCLUDE                NI_DATA_R ;
       27     5126        %INCLUDE                NI_MACROS_C ;
       28     5393        %INCLUDE                N_FC_C ;
       29     5430        %INCLUDE                SS_SCHED_C ;
       30     5663        %INCLUDE                SS_SCHED_R ;
       31     5706        %INCLUDE                TD$CP6V_C ;
       32     5742        %INCLUDE                TD_ERRORS_C ;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:34   
       33     5825        %INCLUDE                TM_DATA_M ;
       34     5927        /*
       35     5928                Parameters
       36     5929        */
       37     5930    1   DCL 1 ERR               SBIN PARAM ;
       38     5931        %VLR$SYSCON_V           ( FPTN=RESULT,   BASED=PARAM ) ;
       39     5936        %FPT$SYSCON_V           ( FPTN=SYSCON_V, BASED=PARAM ) ;
       40     5940        /*
       41     5941                Entries
       42     5942        */
       43     5943    1   DCL 1 ELA$SYSLOG        ENTRY(6) ALTRET ;
       44     5944    1   DCL 1 FMC$RELSCU        ENTRY(3) ALTRET ;
       45     5945    1   DCL 1 FMN$AVR           ENTRY(2) ;
       46     5946    1   DCL 1 HFA$STARTCPU      ENTRY;
       47     5947    1   DCL 1 HFA$STOPCPU      ENTRY;
       48     5948    1   DCL 1 HFB$DISPORT       ENTRY(1) ;
       49     5949    1   DCL 1 HFB$ENAPORT       ENTRY(1) ;
       50     5950    1   DCL 1 HFC$RCONF_8000    ENTRY ;
       51     5951    1   DCL 1 HFC$RSCR          ENTRY(3) ;
       52     5952    1   DCL 1 HFC$SCONF_8000    ENTRY ;
       53     5953    1   DCL 1 HFC$SSCR          ENTRY(3) ;
       54     5954    1   DCL 1 KIQ$PARTFEP       ENTRY(2) ;
       55     5955    1   DCL 1 KIQ$UPRTFEP       ENTRY(1) ;
       56     5956    1   DCL 1 MMB$RELMEM        ENTRY(3) ALTRET ;
       57     5957    1   DCL 1 MMB$RETMEM        ENTRY(1) ALTRET ;
       58     5958    1   DCL 1 NIO$IOSPIN        ENTRY(1) ;
       59     5959    1   DCL 1 NIO$QUE           ENTRY(1) ALTRET ;
       60     5960    1   DCL 1 NIQ$GET           ENTRY(1) ALTRET ;
       61     5961    1   DCL 1 NIQ$REL           ENTRY(1) ALTRET ;
       62     5962    1   DCL 1 NIW$DQHSTART      ENTRY(1) ALTRET ;
       63     5963    1   DCL 1 NIW$DQHSTOP       ENTRY(1) ALTRET ;
       64     5964    1   DCL 1 NIW$MPCDQH        ENTRY(2) ALTRET ;
       65     5965    1   DCL 1 NIX$CHANCONFIG    ENTRY(3)  ;
       66     5966    1   DCL 1 NIX$DEVCONFIG     ENTRY(2)  ;
       67     5967    1   DCL 1 NKP$PART          ENTRY(2) ALTRET ;
       68     5968    1   DCL 1 NKP$RTN           ENTRY(2) ALTRET ;
       69     5969    1   DCL 1 SSS$BLOCKM        ENTRY ;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:35   
       70     5970    1   DCL 1 TDP$SYSCONEA      ENTRY(1) ;
       71     5971    1   DCL 1 TMB$BUF_ALLOC     ENTRY(3) ALTRET ;
       72     5972    1   DCL 1 TMB$BUF_DEALLOC   ENTRY(2) ALTRET ;
       73     5973    1   DCL 1 TMB$MCA           ENTRY(4) ALTRET ;
       74     5974        /*
       75     5975                Symrefs
       76     5976        */
       77     5977    1   DCL 1 B$IMXBUF$         PTR SYMREF ;
       78     5978    1   DCL 1 B$JIT$            PTR SYMREF ;
       79     5979    1   DCL 1 B$PPUT$           PTR SYMREF READONLY ;
       80     5980    1   DCL 1 B$SCU$            PTR SYMREF ;
       81     5981    1   DCL 1 FP_OPCI$$         PTR SYMREF ;
       82     5982    1   DCL 1 NK_MXLOCAL        UBIN(36) SYMREF ;
       83     5983    1   DCL 1 S_PNO             UBIN SYMREF ;
       84     5984        /*
       85     5985                Auto
       86     5986        */
       87     5987    1   DCL 1 ADCT$(0:1)        PTR ALIGNED AUTO ;
       88     5988        %VLR$SYSCON_V           ( FPTN=BOOTINFO, BASED=AUTO ) ;
       89     5993    1   DCL 1 BUF$              PTR ALIGNED AUTO ;
       90     5994    1   DCL 1 BUFX              SBIN ALIGNED AUTO ;
       91     5995    1   DCL 1 CHAN              UBIN ALIGNED AUTO ;
       92     5996    1   DCL 1 CHANX             SBIN ALIGNED AUTO ;
       93     5997    1   DCL 1 CPUX              UBIN ALIGNED AUTO ;
       94     5998    1   DCL 1 DCT$              PTR ALIGNED AUTO ;
       95     5999    1   DCL 1 DQH$              PTR ALIGNED AUTO ;
       96     6000        %EL$CHNGAARD            ( NAME=EL$CHNGAARD, STCLASS=AUTO ) ;
       97     6004        %EL$SYSCON              ( NAME=EL$SYSCON  , STCLASS=AUTO ) ;
       98     6008    1   DCL 1 FEI               UBIN ALIGNED AUTO ;
       99     6009    1   DCL 1 FEI$              PTR ALIGNED AUTO ;
      100     6010    1   DCL 1 FEX               UBIN ALIGNED AUTO ;
      101     6011    1   DCL 1 FIRST_PAGE        UBIN ALIGNED AUTO ;
      102     6012    1   DCL 1 I                 UBIN ALIGNED AUTO ;
      103     6013    1   DCL 1 IOM#              UBIN ALIGNED AUTO ;
      104     6014    1   DCL 1 IOM$              PTR ALIGNED AUTO ;
      105     6015    1   DCL 1 IPC               UBIN ALIGNED AUTO ;
      106     6016    1   DCL 1 J                 UBIN ALIGNED AUTO ;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:36   
      107     6017    1   DCL 1 LAST_PAGE         UBIN ALIGNED AUTO ;
      108     6018    1   DCL 1 MDCT$             PTR ALIGNED AUTO ;
      109     6019    1   DCL 1 MDCTX             UBIN WORD ALIGNED AUTO ;
      110     6020    1   DCL 1 NCHANS            SBIN ALIGNED AUTO ;
      111     6021    1   DCL 1 ONLYSCONS         BIT(1) ALIGNED AUTO ;
      112     6022    1   DCL 1 PHY_CPU           UBIN ALIGNED AUTO ;
      113     6023    1   DCL 1 REL_PAGE          UBIN ALIGNED AUTO ;
      114     6024    1   DCL 1 REQ$              PTR ALIGNED AUTO ;
      115     6025    1   DCL 1 SCUX              UBIN ALIGNED AUTO ;
      116     6026    1   DCL 1 SQH$              PTR ALIGNED AUTO ;
      117     6027    1   DCL 1 TDQH$             PTR ALIGNED AUTO ;
      118     6028    1   DCL 1 TEMP$             PTR ALIGNED AUTO ;
      119     6029    1   DCL 1 TOTAL_RELEASED    SBIN ALIGNED AUTO ;
      120     6030        /*
      121     6031                Based
      122     6032        */
      123     6033        %NI$DCT                 ( NAME=DCT, STCLASS="BASED(DCT$)" ) ;
      124     6081        %NI$DQH                 ( NAME=DQH, STCLASS="BASED(DQH$)" ) ;
      125     6104        %FP$OPCI                ( FPTN=FP$OPCI, STCLASS=BASED ) ;
      126     6114        %NI$IOM                 ( NAME=IOM, STCLASS="BASED(IOM$)" ) ;
      127     6119        %KI$FEI                 ( STCLASS="BASED(FEI$)" ) ;
      128     6203        %MCA_CFG                ( NAME=MCA_CFG, STCLASS="BASED(BUF$)" ) ;
      129     6313        %NI$DCT                 ( NAME=MDCT, STCLASS="BASED(MDCT$)" ) ;
      130     6361        %NI$CHT ;
      131     6364        %N$REQ                  ( NAME=REQ, STCLASS="BASED(REQ$)" ) ;
      132     6422        %NI$SQH                 ( NAME=SQH, STCLASS="BASED(SQH$)" ) ;
      133     6435        /*
      134     6436                Constants
      135     6437        */
      136     6438    1   DCL MCA_FW_LOAD(0:15) BIT(1) UNAL CONSTANT
      137     6439    1     INIT ('0'B, '0'B, '1'B, '0'B, '1'B, '1'B, '1'B, '0'B,
      138     6440    1           '0'B, '0'B, '0'B, '1'B, '0'B*0);
      139     6441    1   DCL H_DPS8000_SPLIT_TABLE(0:4) UBIN HALF HALIGNED CONSTANT INIT
      140     6442    1        (15,14,12,8,0);
      141     6443        %EJECT;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:37   
      142     6444    1           BOOTINFO='0'B ;

   6444  1 000002   000000 235003                    LDA     0,DU
         1 000003   000000 236003                    LDQ     0,DU
         1 000004   200010 757100                    STAQ    BOOTINFO,,AUTO

      143     6445    1           ERR=0;

   6445  1 000005   200005 470500                    LDP0    @ERR,,AUTO
         1 000006   000000 450100                    STZ     0,,PR0

      144     6446        /**/
      145     6447        /* FIND THE COMPONENT */
      146     6448        /**/
      147     6449    2           DO CASE(SYSCON_V.COMPONENT);

   6449  1 000007   200003 471500                    LDP1    @SYSCON_V,,AUTO
         1 000010   100000 220100                    LDX0    0,,PR1
         1 000011   000777 360003                    ANX0    511,DU
         1 000012   000010 100003                    CMPX0   8,DU
         1 000013   000015 602010 1                  TNC     s:6449+6,X0
         1 000014   000274 710000 1                  TRA     DO_FUNCTION
         1 000015   000274 710000 1                  TRA     DO_FUNCTION
         1 000016   000025 710000 1                  TRA     s:6451
         1 000017   000063 710000 1                  TRA     s:6458
         1 000020   000063 710000 1                  TRA     s:6458
         1 000021   000121 710000 1                  TRA     s:6469
         1 000022   000170 710000 1                  TRA     s:6484
         1 000023   000206 710000 1                  TRA     s:6489
         1 000024   000260 710000 1                  TRA     s:6500

      148     6450    2            CASE(%CHANNEL#);

      149     6451    2              CHANX=SYSCON_V.IOM*%N_MAXCHANS+SYSCON_V.CHAN;

   6451  1 000025   100000 236100                    LDQ     0,,PR1
         1 000026   000777 376007                    ANQ     511,DL
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:38   
         1 000027   200070 756100                    STQ     TEMP$+3,,AUTO
         1 000030   100000 236100                    LDQ     0,,PR1
         1 000031   000002 772000                    QRL     2
         1 000032   177600 376007                    ANQ     65408,DL
         1 000033   200070 036100                    ADLQ    TEMP$+3,,AUTO
         1 000034   200015 756100                    STQ     CHANX,,AUTO

      150     6452    2              DQH$=NI$CHT.DQH$(CHANX);

   6452  1 000035   200015 235100                    LDA     CHANX,,AUTO
         1 000036   000001 735000                    ALS     1
         1 000037   000000 473400 xsym               LDP3    NI$CHT$
         1 000040   300000 236105                    LDQ     0,AL,PR3
         1 000041   200020 756100                    STQ     DQH$,,AUTO

      151     6453    2              IF DQH$ = ADDR(NIL) OR SYSCON_V.CHAN < 8 OR

   6453  1 000042   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000043   004356 600000 1                  TZE     ERR_SCNNOCOMP
         1 000044   100000 236100                    LDQ     0,,PR1
         1 000045   000777 376007                    ANQ     511,DL
         1 000046   000010 116007                    CMPQ    8,DL
         1 000047   004356 602000 1                  TNC     ERR_SCNNOCOMP
         1 000050   000000 116000 xsym               CMPQ    HW_CHANS
         1 000051   004356 603000 1                  TRC     ERR_SCNNOCOMP
         1 000052   100000 236100                    LDQ     0,,PR1
         1 000053   000011 772000                    QRL     9
         1 000054   000777 376007                    ANQ     511,DL
         1 000055   000000 116000 xsym               CMPQ    NI_IOMS
         1 000056   004356 605000 1                  TPL     ERR_SCNNOCOMP

      152     6454    2                 SYSCON_V.CHAN > HW_CHANS-1 OR SYSCON_V.IOM > NI_IOMS-1 THEN
      153     6455    2                 GOTO ERR_SCNNOCOMP;
      154     6456    2              SQH$=DQH.SQH$;

   6456  1 000057   200020 474500                    LDP4    DQH$,,AUTO
         1 000060   400013 236100                    LDQ     11,,PR4
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:39   
         1 000061   200063 756100                    STQ     SQH$,,AUTO
         1 000062   000274 710000 1                  TRA     DO_FUNCTION

      155     6457    2            CASE(%MPC#,%DVC#);

      156     6458    2              DCT$=ADDR(NIL);

   6458  1 000063   000001 236000 xsym               LDQ     B_VECTNIL+1
         1 000064   200017 756100                    STQ     DCT$,,AUTO

      157     6459    3              DO I=1 TO NK_MXLOCAL;

   6459  1 000065   000001 235007                    LDA     1,DL
         1 000066   200045 755100                    STA     I,,AUTO
         1 000067   000107 710000 1                  TRA     s:6464+3

      158     6460    4                 IF N$DCT$(I)~=ADDR(NIL) THEN DO;

   6460  1 000070   000000 470400 xsym               LDP0    N$DCT$$
         1 000071   200045 720100                    LXL0    I,,AUTO
         1 000072   000000 236110                    LDQ     0,X0,PR0
         1 000073   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000074   000104 600000 1                  TZE     s:6464

      159     6461    4                    IF N$DCT$(I)->DCT.DEVNM=SYSCON_V.DEVNM THEN

   6461  1 000075   000000 471510                    LDP1    0,X0,PR0
         1 000076   200003 473500                    LDP3    @SYSCON_V,,AUTO
         1 000077   040100 106500                    CMPC    fill='040'O
         1 000100   100002 000010                    ADSC9   2,,PR1                   cn=0,n=8
         1 000101   300001 000010                    ADSC9   1,,PR3                   cn=0,n=8
         1 000102   000104 601000 1                  TNZ     s:6464

      160     6462    4                       DCT$=N$DCT$(I);

   6462  1 000103   200017 756100                    STQ     DCT$,,AUTO

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:40   
      161     6463    4                    END;

      162     6464    3                 END;

   6464  1 000104   200045 235100                    LDA     I,,AUTO
         1 000105   000001 035007                    ADLA    1,DL
         1 000106   200045 755100                    STA     I,,AUTO
         1 000107   000000 236000 xsym               LDQ     NK_MXLOCAL
         1 000110   200045 116100                    CMPQ    I,,AUTO
         1 000111   000070 603000 1                  TRC     s:6460

      163     6465    2              IF DCT$=ADDR(NIL) THEN

   6465  1 000112   200017 236100                    LDQ     DCT$,,AUTO
         1 000113   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000114   004356 600000 1                  TZE     ERR_SCNNOCOMP

      164     6466    2                 GOTO ERR_SCNNOCOMP;
      165     6467    2              SQH$=DCT.SQH$;

   6467  1 000115   200017 470500                    LDP0    DCT$,,AUTO
         1 000116   000022 236100                    LDQ     18,,PR0
         1 000117   200063 756100                    STQ     SQH$,,AUTO
         1 000120   000274 710000 1                  TRA     DO_FUNCTION

      166     6468    2            CASE(%FEP##);

      167     6469    2              FEX=SYSCON_V.CHAN;

   6469  1 000121   100000 236100                    LDQ     0,,PR1
         1 000122   000777 376007                    ANQ     511,DL
         1 000123   200043 756100                    STQ     FEX,,AUTO

      168     6470    3              IF FEX>KI_NODES THEN DO;

   6470  1 000124   000000 116000 xsym               CMPQ    KI_NODES
         1 000125   000132 602000 1                  TNC     s:6474
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:41   
         1 000126   000132 600000 1                  TZE     s:6474

      169     6471    3                 ERR=%E$SCNNOTFEP;

   6471  1 000127   001641 235007                    LDA     929,DL
         1 000130   000000 755100                    STA     0,,PR0

      170     6472    3                 ALTRETURN;

   6472  1 000131   000000 702200 xent               TSX2  ! X66_AALT

      171     6473    3                 END;
      172     6474    3              DO FEI = 1 TO KI_MXFE;

   6474  1 000132   000001 235007                    LDA     1,DL
         1 000133   200041 755100                    STA     FEI,,AUTO
         1 000134   000152 710000 1                  TRA     s:6478+3

      173     6475    3                 FEI$ = KI$FEI$(FEI);

   6475  1 000135   000000 470400 xsym               LDP0    KI_FEI$$
         1 000136   200041 720100                    LXL0    FEI,,AUTO
         1 000137   000000 236110                    LDQ     0,X0,PR0
         1 000140   200042 756100                    STQ     FEI$,,AUTO

      174     6476    3                 IF KI$FEI.FEP# = FEX THEN

   6476  1 000141   200042 471500                    LDP1    FEI$,,AUTO
         1 000142   100012 236100                    LDQ     10,,PR1
         1 000143   000011 772000                    QRL     9
         1 000144   000777 376007                    ANQ     511,DL
         1 000145   200043 116100                    CMPQ    FEX,,AUTO
         1 000146   000161 600000 1                  TZE     FOUND_FEP

      175     6477    3                    GOTO FOUND_FEP;
      176     6478    3                 END;

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:42   
   6478  1 000147   200041 235100                    LDA     FEI,,AUTO
         1 000150   000001 035007                    ADLA    1,DL
         1 000151   200041 755100                    STA     FEI,,AUTO
         1 000152   000000 236000 xsym               LDQ     KI_MXFE
         1 000153   200041 116100                    CMPQ    FEI,,AUTO
         1 000154   000135 603000 1                  TRC     s:6475

      177     6479    2              ERR = %E$REMOTEFEP;

   6479  1 000155   001651 235007                    LDA     937,DL
         1 000156   200005 470500                    LDP0    @ERR,,AUTO
         1 000157   000000 755100                    STA     0,,PR0

      178     6480    2              ALTRETURN;

   6480  1 000160   000000 702200 xent               TSX2  ! X66_AALT

   6479  1 000161                       FOUND_FEP    null
      179     6481    2   FOUND_FEP: ;
      180     6482    2              DQH$=NI$CHT.DQH$(BITBIN(KI$FEI.FECH ));

   6482  1 000161   100002 236100                    LDQ     2,,PR1
         1 000162   000033 772000                    QRL     27
         1 000163   000001 736000                    QLS     1
         1 000164   000000 473400 xsym               LDP3    NI$CHT$
         1 000165   300000 236106                    LDQ     0,QL,PR3
         1 000166   200020 756100                    STQ     DQH$,,AUTO
         1 000167   000274 710000 1                  TRA     DO_FUNCTION

      181     6483    2            CASE(%IOM##);

      182     6484    2              IOM$ = NI$IOM$(SYSCON_V.IOM);

   6484  1 000170   100000 236100                    LDQ     0,,PR1
         1 000171   000011 772000                    QRL     9
         1 000172   000777 376007                    ANQ     511,DL
         1 000173   000000 236006 xsym               LDQ     NI$IOM$,QL
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:43   
         1 000174   200047 756100                    STQ     IOM$,,AUTO

      183     6485    2              IF IOM$ = ADDR(NIL) OR SYSCON_V.IOM > NI_IOMS-1 THEN

   6485  1 000175   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000176   004356 600000 1                  TZE     ERR_SCNNOCOMP
         1 000177   100000 236100                    LDQ     0,,PR1
         1 000200   000011 772000                    QRL     9
         1 000201   000777 376007                    ANQ     511,DL
         1 000202   000000 116000 xsym               CMPQ    NI_IOMS
         1 000203   004356 605000 1                  TPL     ERR_SCNNOCOMP

      184     6486    2                 GOTO ERR_SCNNOCOMP;
      185     6487    2              IOM# = SYSCON_V.IOM;

   6487  1 000204   200046 756100                    STQ     IOM#,,AUTO
         1 000205   000274 710000 1                  TRA     DO_FUNCTION

      186     6488    2            CASE (%CPU##);

      187     6489    2              IF SYSCON_V.CPU = S_PORTNR(0) THEN GOTO ERR_CPUMASTER;

   6489  1 000206   100000 236100                    LDQ     0,,PR1
         1 000207   000011 772000                    QRL     9
         1 000210   000777 376007                    ANQ     511,DL
         1 000211   000000 116000 xsym               CMPQ    S_PORTNR
         1 000212   004412 600000 1                  TZE     ERR_CPUMASTER

      188     6490    3              DO CPUX =  1 TO S_NSCPU;

   6490  1 000213   000001 235007                    LDA     1,DL
         1 000214   200016 755100                    STA     CPUX,,AUTO
         1 000215   000230 710000 1                  TRA     s:6492+3

      189     6491    3                 IF S_PORTNR(CPUX) = SYSCON_V.CPU THEN GOTO GET_PHY_CPU;

   6491  1 000216   200016 720100                    LXL0    CPUX,,AUTO
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:44   
         1 000217   200003 470500                    LDP0    @SYSCON_V,,AUTO
         1 000220   000000 236100                    LDQ     0,,PR0
         1 000221   000011 772000                    QRL     9
         1 000222   000777 376007                    ANQ     511,DL
         1 000223   000000 116010 xsym               CMPQ    S_PORTNR,X0
         1 000224   000234 600000 1                  TZE     GET_PHY_CPU

      190     6492    3                 END;

   6492  1 000225   200016 235100                    LDA     CPUX,,AUTO
         1 000226   000001 035007                    ADLA    1,DL
         1 000227   200016 755100                    STA     CPUX,,AUTO
         1 000230   000000 236000 xsym               LDQ     S_NSCPU
         1 000231   200016 116100                    CMPQ    CPUX,,AUTO
         1 000232   000216 603000 1                  TRC     s:6491

      191     6493    2              GOTO ERR_SCNNOCOMP;

   6493  1 000233   004356 710000 1                  TRA     ERR_SCNNOCOMP

      192     6494    2   GET_PHY_CPU:
      193     6495    3              DO PHY_CPU =  0 TO 3;

   6495  1 000234   200057 450100       GET_PHY_CPU  STZ     PHY_CPU,,AUTO

      194     6496    3                IF H_RPM_CONNECT_TABLE.ENTRI.PORT#(PHY_CPU+8) = SYSCON_V.CPU THEN GOTO
              6496                          DO_FUNCTION;

   6496  1 000235   200003 470500                    LDP0    @SYSCON_V,,AUTO
         1 000236   000000 236100                    LDQ     0,,PR0
         1 000237   000011 772000                    QRL     9
         1 000240   000777 376007                    ANQ     511,DL
         1 000241   200070 756100                    STQ     TEMP$+3,,AUTO
         1 000242   200057 236100                    LDQ     PHY_CPU,,AUTO
         1 000243   000014 402007                    MPY     12,DL
         1 000244   003100 061406                    CSR     bolr='003'O
         1 000245   000002 460003 xsym               BDSC    H_RPM_CONNECT_TABLE+2,Q  by=2,bit=6,n=3
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:45   
         1 000246   200071 000044                    BDSC    TEMP$+4,,AUTO            by=0,bit=0,n=36
         1 000247   200071 236100                    LDQ     TEMP$+4,,AUTO
         1 000250   200070 116100                    CMPQ    TEMP$+3,,AUTO
         1 000251   000274 600000 1                  TZE     DO_FUNCTION

      195     6497    3                 END;

   6497  1 000252   200057 235100                    LDA     PHY_CPU,,AUTO
         1 000253   000001 035007                    ADLA    1,DL
         1 000254   200057 755100                    STA     PHY_CPU,,AUTO
         1 000255   000004 115007                    CMPA    4,DL
         1 000256   000235 602000 1                  TNC     s:6496

      196     6498    2              GOTO ERR_SCNNOCOMP;

   6498  1 000257   004356 710000 1                  TRA     ERR_SCNNOCOMP

      197     6499    2            CASE (%SCU##);

      198     6500    2              SCUX = SYSCON_V.SCU;

   6500  1 000260   100000 236100                    LDQ     0,,PR1
         1 000261   000011 772000                    QRL     9
         1 000262   000777 376007                    ANQ     511,DL
         1 000263   200062 756100                    STQ     SCUX,,AUTO

      199     6501    2              IF H_DPS8000_SCU_INFO.SCU_STATUS.NOT_CONFIG(SCUX) THEN GOTO
              6501                       ERR_SCUNOTCONFIG;

   6501  1 000264   200062 235100                    LDA     SCUX,,AUTO
         1 000265   000001 735000                    ALS     1
         1 000266   000001 236005 xsym               LDQ     H_DPS8000_SCU_INFO+1,AL
         1 000267   400000 316007                    CANQ    -131072,DL
         1 000270   004420 601000 1                  TNZ     ERR_SCUNOTCONFIG

      200     6502    2             IF H_DPS8000_SCU_INFO.SCU_STATUS.LOW_MEM(SCUX) THEN GOTO ERR_SCUNOTVALID;

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:46   
   6502  1 000271   020000 316007                    CANQ    8192,DL
         1 000272   004415 601000 1                  TNZ     ERR_SCUNOTVALID

      201     6503    2              GOTO DO_FUNCTION;

   6503  1 000273   000274 710000 1                  TRA     DO_FUNCTION

      202     6504    2            END;                           /* CASE SYSCON_V.COMPONENT            */

      203     6505    1   DO_FUNCTION:
      204     6506
      205     6507
      206     6508
      207     6509    2           DO CASE(SYSCON_V.FUNCTION);

   6509  1 000274   200003 470500       DO_FUNCTION  LDP0    @SYSCON_V,,AUTO
         1 000275   000000 236100                    LDQ     0,,PR0
         1 000276   000033 772000                    QRL     27
         1 000277   000006 116007                    CMPQ    6,DL
         1 000300   000302 602006 1                  TNC     DO_FUNCTION+6,QL
         1 000301   004104 710000 1                  TRA     LOG_IT
         1 000302   004104 710000 1                  TRA     LOG_IT
         1 000303   000310 710000 1                  TRA     s:6511
         1 000304   002241 710000 1                  TRA     s:6859
         1 000305   004104 710000 1                  TRA     LOG_IT
         1 000306   004013 710000 1                  TRA     s:7155
         1 000307   000310 710000 1                  TRA     s:6511

      208     6510    2            CASE(%PARTITION#,%RELEASE_SYSCON#);

      209     6511    3              DO CASE(SYSCON_V.COMPONENT);

   6511  1 000310   000000 220100                    LDX0    0,,PR0
         1 000311   000777 360003                    ANX0    511,DU
         1 000312   000010 100003                    CMPX0   8,DU
         1 000313   000315 602010 1                  TNC     s:6511+5,X0
         1 000314   004104 710000 1                  TRA     LOG_IT
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:47   
         1 000315   002240 710000 1                  TRA     s:6854
         1 000316   000325 710000 1                  TRA     s:6516
         1 000317   000570 710000 1                  TRA     s:6576
         1 000320   001103 710000 1                  TRA     s:6666
         1 000321   001253 710000 1                  TRA     s:6706
         1 000322   001361 710000 1                  TRA     s:6735
         1 000323   001722 710000 1                  TRA     s:6799
         1 000324   002002 710000 1                  TRA     s:6810

      210     6512    3               CASE(%CHANNEL#);

      211     6513        /**/
      212     6514        /* PARTITION A CHANNEL */
      213     6515        /**/
      214     6516    3                 IF DQH.MPC$ = ADDR(NIL) THEN   /* FEP & console channels */

   6516  1 000325   200020 471500                    LDP1    DQH$,,AUTO
         1 000326   100015 236100                    LDQ     13,,PR1
         1 000327   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000330   004342 600000 1                  TZE     ERR_NOPARTRETCHAN

      215     6517    3                    GOTO ERR_NOPARTRETCHAN;
      216     6518    3                 IF DQH.STATUS.SYSCON_PART THEN

   6518  1 000331   100001 236100                    LDQ     1,,PR1
         1 000332   002000 316003                    CANQ    1024,DU
         1 000333   004206 601000 1                  TNZ     RETURN_RESULT

      217     6519    3                    GOTO RETURN_RESULT;
      218     6520    3                 IF (DQH.MPC$->DCT.MPC.TYPE = %DV_LP)  OR

   6520  1 000334   100015 473500                    LDP3    13,,PR1
         1 000335   300035 236100                    LDQ     29,,PR3
         1 000336   777000 376003                    ANQ     -512,DU
         1 000337   003000 116003                    CMPQ    1536,DU
         1 000340   000343 600000 1                  TZE     s:6522
         1 000341   010000 116003                    CMPQ    4096,DU
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:48   
         1 000342   000446 601000 1                  TNZ     s:6539

      219     6521    4                    (DQH.MPC$->DCT.MPC.TYPE = %DV_AP)  THEN DO;

      220     6522    4                    IF (DQH.MPC$->DCT.MPC.IOCHANX(0) = CHANX ) AND

   6522  1 000343   300031 236100                    LDQ     25,,PR3
         1 000344   000033 772000                    QRL     27
         1 000345   200015 116100                    CMPQ    CHANX,,AUTO
         1 000346   000407 601000 1                  TNZ     s:6531
         1 000347   300035 236100                    LDQ     29,,PR3
         1 000350   777000 376003                    ANQ     -512,DU
         1 000351   010000 116003                    CMPQ    4096,DU
         1 000352   000407 601000 1                  TNZ     s:6531

      221     6523    5                       (DQH.MPC$->DCT.MPC.TYPE = %DV_AP ) THEN DO;

      222     6524    6                       DO I = SQH.FDCT + 1 TO SQH.FDCT + SQH.NDCT-1;

   6524  1 000353   200063 474500                    LDP4    SQH$,,AUTO
         1 000354   400002 236100                    LDQ     2,,PR4
         1 000355   000022 772000                    QRL     18
         1 000356   000001 036007                    ADLQ    1,DL
         1 000357   200045 756100                    STQ     I,,AUTO
         1 000360   000374 710000 1                  TRA     s:6528+3

      223     6525    6                         IF NOT (N$DCT$(I)->DCT.STATUS.SYSCON_PART AND

   6525  1 000361   000000 470400 xsym               LDP0    N$DCT$$
         1 000362   200045 720100                    LXL0    I,,AUTO
         1 000363   000000 471510                    LDP1    0,X0,PR0
         1 000364   100027 236100                    LDQ     23,,PR1
         1 000365   004000 316003                    CANQ    2048,DU
         1 000366   004352 600000 1                  TZE     ERR_ONLYPATH
         1 000367   100027 234100                    SZN     23,,PR1
         1 000370   004352 605000 1                  TPL     ERR_ONLYPATH

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:49   
      224     6526    6                                 N$DCT$(I)->DCT.STATUS.DOWN) THEN
      225     6527    6                            GOTO ERR_ONLYPATH;
      226     6528    6                         END;   /* DO I                                 */

   6528  1 000371   200045 235100                    LDA     I,,AUTO
         1 000372   000001 035007                    ADLA    1,DL
         1 000373   200045 755100                    STA     I,,AUTO
         1 000374   200063 470500                    LDP0    SQH$,,AUTO
         1 000375   000002 236100                    LDQ     2,,PR0
         1 000376   777777 376007                    ANQ     -1,DL
         1 000377   200070 756100                    STQ     TEMP$+3,,AUTO
         1 000400   000002 236100                    LDQ     2,,PR0
         1 000401   000022 772000                    QRL     18
         1 000402   200070 036100                    ADLQ    TEMP$+3,,AUTO
         1 000403   200045 116100                    CMPQ    I,,AUTO
         1 000404   000406 600000 1                  TZE     s:6529
         1 000405   000361 603000 1                  TRC     s:6525

      227     6529    5                       END;       /* IF ARRAY PROCES' AND CHAN OF CONTROLR*/

   6529  1 000406   000506 710000 1                  TRA     s:6557

      228     6530    4                    ELSE
      229     6531    5                       DO I = SQH.FDCT + 1 TO SQH.FDCT + SQH.NDCT - 1;

   6531  1 000407   200063 474500                    LDP4    SQH$,,AUTO
         1 000410   400002 236100                    LDQ     2,,PR4
         1 000411   000022 772000                    QRL     18
         1 000412   000001 036007                    ADLQ    1,DL
         1 000413   200045 756100                    STQ     I,,AUTO
         1 000414   000433 710000 1                  TRA     s:6536+3

      230     6532    5                          IF (N$DCT$(I)->DCT.DQH$ = DQH$) AND

   6532  1 000415   000000 470400 xsym               LDP0    N$DCT$$
         1 000416   200045 720100                    LXL0    I,,AUTO
         1 000417   000000 471510                    LDP1    0,X0,PR0
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:50   
         1 000420   100023 236100                    LDQ     19,,PR1
         1 000421   200020 116100                    CMPQ    DQH$,,AUTO
         1 000422   000430 601000 1                  TNZ     s:6536
         1 000423   100027 236100                    LDQ     23,,PR1
         1 000424   004000 316003                    CANQ    2048,DU
         1 000425   004352 600000 1                  TZE     ERR_ONLYPATH
         1 000426   100027 234100                    SZN     23,,PR1
         1 000427   004352 605000 1                  TPL     ERR_ONLYPATH

      231     6533    5                             NOT (N$DCT$(I)->DCT.STATUS.SYSCON_PART AND
      232     6534    5                                  N$DCT$(I)->DCT.STATUS.DOWN) THEN
      233     6535    5                             GOTO ERR_ONLYPATH;
      234     6536    5                          END;             /* DO I                               */

   6536  1 000430   200045 235100                    LDA     I,,AUTO
         1 000431   000001 035007                    ADLA    1,DL
         1 000432   200045 755100                    STA     I,,AUTO
         1 000433   200063 470500                    LDP0    SQH$,,AUTO
         1 000434   000002 236100                    LDQ     2,,PR0
         1 000435   777777 376007                    ANQ     -1,DL
         1 000436   200070 756100                    STQ     TEMP$+3,,AUTO
         1 000437   000002 236100                    LDQ     2,,PR0
         1 000440   000022 772000                    QRL     18
         1 000441   200070 036100                    ADLQ    TEMP$+3,,AUTO
         1 000442   200045 116100                    CMPQ    I,,AUTO
         1 000443   000445 600000 1                  TZE     s:6537
         1 000444   000415 603000 1                  TRC     s:6532

      235     6537    4                       END;                /* IF UNIT RECORD MPC                 */

   6537  1 000445   000506 710000 1                  TRA     s:6557

      236     6538    4                    ELSE DO;

      237     6539    4                        IF  NOT DQH.MPC$->DCT.STATUS.DOWN

   6539  1 000446   300027 234100                    SZN     23,,PR3
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:51   
         1 000447   000506 604000 1                  TMI     s:6557

      238     6540    5                        THEN DO ;

      239     6541    5                            NCHANS = 0 ;

   6541  1 000450   200055 450100                    STZ     NCHANS,,AUTO

      240     6542    6                            DO  I = 0 TO %N_CHANSPERMPCM1 ;

   6542  1 000451   200045 450100                    STZ     I,,AUTO

      241     6543    6                                TEMP$ = NI$CHT.DQH$(DQH.MPC$->DCT.MPC.IOCHANX(I)) ;

   6543  1 000452   200020 470500                    LDP0    DQH$,,AUTO
         1 000453   000015 471500                    LDP1    13,,PR0
         1 000454   200045 235100                    LDA     I,,AUTO
         1 000455   000100 101505                    MRL     fill='000'O
         1 000456   100031 000001                    ADSC9   25,A,PR1                 cn=0,n=1
         1 000457   200070 000002                    ADSC9   TEMP$+3,,AUTO            cn=0,n=2
         1 000460   200070 220100                    LDX0    TEMP$+3,,AUTO
         1 000461   200070 020100                    ADLX0   TEMP$+3,,AUTO
         1 000462   000000 471400 xsym               LDP1    NI$CHT$
         1 000463   100000 236110                    LDQ     0,X0,PR1
         1 000464   200065 756100                    STQ     TEMP$,,AUTO

      242     6544    6                                IF  TEMP$ ~= ADDR(NIL)

   6544  1 000465   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000466   000500 600000 1                  TZE     s:6550
         1 000467   200020 116100                    CMPQ    DQH$,,AUTO
         1 000470   000500 600000 1                  TZE     s:6550
         1 000471   200065 473500                    LDP3    TEMP$,,AUTO
         1 000472   300001 236100                    LDQ     1,,PR3
         1 000473   200000 316003                    CANQ    65536,DU
         1 000474   000500 601000 1                  TNZ     s:6550
         1 000475   002000 316003                    CANQ    1024,DU
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:52   
         1 000476   000500 601000 1                  TNZ     s:6550

      243     6545    6                                AND TEMP$ ~= DQH$
      244     6546    6                                AND NOT TEMP$->DQH.STATUS.DOWN
      245     6547    6                                AND NOT TEMP$->DQH.STATUS.SYSCON_PART
      246     6548    6                                THEN
      247     6549    6                                    NCHANS = NCHANS + 1 ;

   6549  1 000477   200055 054100                    AOS     NCHANS,,AUTO

      248     6550    6                                END /* DO I = 0 ... */ ;

   6550  1 000500   000001 035007                    ADLA    1,DL
         1 000501   200045 755100                    STA     I,,AUTO
         1 000502   000020 115007                    CMPA    16,DL
         1 000503   000452 602000 1                  TNC     s:6543

      249     6551    5                            IF  NCHANS = 0

   6551  1 000504   200055 236100                    LDQ     NCHANS,,AUTO
         1 000505   004352 600000 1                  TZE     ERR_ONLYPATH

      250     6552    5                            THEN
      251     6553    5                                GOTO ERR_ONLYPATH ;
      252     6554    5                            END /* IF NOT ...STATUS.DOWN */ ;

      253     6555    4                        END /* ELSE */ ;

      254     6556                         %LOCK ( G#=SQH.GATE ) ;

   6557  1 000506   200063 630500                    EPPR0   SQH$,,AUTO
         1 000507   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000510   000000 701000 xent               TSX1    HFC$LOCK
         1 000511   000000 011000                    NOP     0

      255     6559    3                    DQH.STATUS.SYSCON_PART = '1'B ;

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:53   
   6559  1 000512   200020 470500                    LDP0    DQH$,,AUTO
         1 000513   002000 236003                    LDQ     1024,DU
         1 000514   000001 256100                    ORSQ    1,,PR0

      256     6560    3                    DQH.STATUS.DOWN        = '1'B ;

   6560  1 000515   200020 470500                    LDP0    DQH$,,AUTO
         1 000516   200000 236003                    LDQ     65536,DU
         1 000517   000001 256100                    ORSQ    1,,PR0

      257     6561    3                    DQH.CHANSTATE.DOWN     = '1'B ;

   6561  1 000520   200020 470500                    LDP0    DQH$,,AUTO
         1 000521   040000 236003                    LDQ     16384,DU
         1 000522   000020 256100                    ORSQ    16,,PR0

      258     6562    3                    IF  NOT DQH.MPC$->DCT.STATUS.DOWN

   6562  1 000523   200020 470500                    LDP0    DQH$,,AUTO
         1 000524   000015 471500                    LDP1    13,,PR0
         1 000525   100027 234100                    SZN     23,,PR1
         1 000526   000545 604000 1                  TMI     s:6567
         1 000527   100023 236100                    LDQ     19,,PR1
         1 000530   200020 116100                    CMPQ    DQH$,,AUTO
         1 000531   000545 601000 1                  TNZ     s:6567
         1 000532   100035 236100                    LDQ     29,,PR1
         1 000533   777000 376003                    ANQ     -512,DU
         1 000534   010000 116003                    CMPQ    4096,DU
         1 000535   000545 600000 1                  TZE     s:6567

      259     6563    3                    AND DQH.MPC$->DCT.DQH$      = DQH$
      260     6564    3                    AND DQH.MPC$->DCT.MPC.TYPE ~= %DV_AP
      261     6565    3                    THEN
      262     6566    3                        CALL NIW$MPCDQH ( DQH.MPC$->DCT, DQH.MPC$->DCT.DQH$ ) ;

   6566  1 000536   100023 633500                    EPPR3   19,,PR1
         1 000537   200071 453500                    STP3    TEMP$+4,,AUTO
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:54   
         1 000540   200070 451500                    STP1    TEMP$+3,,AUTO
         1 000541   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 000542   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000543   000000 701000 xent               TSX1    NIW$MPCDQH
         1 000544   000000 011000                    NOP     0

      263     6567    3                    CALL NIW$DQHSTOP ( DQH ) ;

   6567  1 000545   200020 630500                    EPPR0   DQH$,,AUTO
         1 000546   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000547   000000 701000 xent               TSX1    NIW$DQHSTOP
         1 000550   000000 011000                    NOP     0

      264     6568                         %UNLOCK ( G#=SQH.GATE ) ;

   6569  1 000551   200063 630500                    EPPR0   SQH$,,AUTO
         1 000552   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000553   000000 701000 xent               TSX1    HFC$UNLOCK
         1 000554   000000 011000                    NOP     0

      265     6571    3                    CALL NIX$CHANCONFIG ( DQH, BOOTINFO, '1'B ) ;

   6571  1 000555   000000 236000 2                  LDQ     0
         1 000556   200072 756100                    STQ     TEMP$+5,,AUTO
         1 000557   200010 630500                    EPPR0   BOOTINFO,,AUTO
         1 000560   200071 450500                    STP0    TEMP$+4,,AUTO
         1 000561   200020 236100                    LDQ     DQH$,,AUTO
         1 000562   200070 756100                    STQ     TEMP$+3,,AUTO
         1 000563   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 000564   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 000565   000000 701000 xent               TSX1    NIX$CHANCONFIG
         1 000566   000000 011000                    NOP     0
         1 000567   004104 710000 1                  TRA     LOG_IT

      266     6572        /**/
      267     6573        /* PARTITION A DEVICE */
      268     6574        /**/
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:55   
      269     6575    3               CASE(%DVC#);

      270     6576    3                 IF DCT.STATUS.SYSCON_PART AND DCT.STATUS.DOWN THEN
              6576                          /* not delayed partitioning */

   6576  1 000570   200017 471500                    LDP1    DCT$,,AUTO
         1 000571   100027 236100                    LDQ     23,,PR1
         1 000572   004000 316003                    CANQ    2048,DU
         1 000573   000576 600000 1                  TZE     s:6578
         1 000574   100027 234100                    SZN     23,,PR1
         1 000575   004206 604000 1                  TMI     RETURN_RESULT

      271     6577    3                    GOTO RETURN_RESULT;
      272     6578    3                 IF DCT.TYPE=%DV_MPC THEN

   6578  1 000576   100007 236100                    LDQ     7,,PR1
         1 000577   007700 376007                    ANQ     4032,DL
         1 000600   000700 116007                    CMPQ    448,DL
         1 000601   004362 600000 1                  TZE     ERR_SCNNOTDEV

      273     6579    3                    GOTO ERR_SCNNOTDEV;
      274     6580    4                 IF DCT.DFLG.CONSOLE THEN DO;

   6580  1 000602   100006 236100                    LDQ     6,,PR1
         1 000603   040000 316007                    CANQ    16384,DL
         1 000604   000644 600000 1                  TZE     s:6592

      275     6581    4                    ONLYSCONS = '1'B;

   6581  1 000605   400000 236003                    LDQ     -131072,DU
         1 000606   200056 756100                    STQ     ONLYSCONS,,AUTO

      276     6582    5                    DO I = 1 TO NK_MXLOCAL;

   6582  1 000607   000001 235007                    LDA     1,DL
         1 000610   200045 755100                    STA     I,,AUTO
         1 000611   000633 710000 1                  TRA     s:6586+3
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:56   

      277     6583    5                       IF N$DCT$(I) ~= ADDR(NIL) AND N$DCT$(I) ~= DCT$ THEN

   6583  1 000612   000000 470400 xsym               LDP0    N$DCT$$
         1 000613   200045 720100                    LXL0    I,,AUTO
         1 000614   000000 236110                    LDQ     0,X0,PR0
         1 000615   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000616   000630 600000 1                  TZE     s:6586
         1 000617   200017 116100                    CMPQ    DCT$,,AUTO
         1 000620   000630 600000 1                  TZE     s:6586

      278     6584    5                        IF N$DCT$(I)->DCT.DFLG.CONSOLE AND NOT N$DCT$(I)->DCT.STATUS.
              6584                                 DOWN THEN

   6584  1 000621   000000 471510                    LDP1    0,X0,PR0
         1 000622   100006 236100                    LDQ     6,,PR1
         1 000623   040000 316007                    CANQ    16384,DL
         1 000624   000630 600000 1                  TZE     s:6586
         1 000625   100027 234100                    SZN     23,,PR1
         1 000626   000630 604000 1                  TMI     s:6586

      279     6585    5                         ONLYSCONS = '0'B;

   6585  1 000627   200056 450100                    STZ     ONLYSCONS,,AUTO

      280     6586    5                       END;

   6586  1 000630   200045 235100                    LDA     I,,AUTO
         1 000631   000001 035007                    ADLA    1,DL
         1 000632   200045 755100                    STA     I,,AUTO
         1 000633   000000 236000 xsym               LDQ     NK_MXLOCAL
         1 000634   200045 116100                    CMPQ    I,,AUTO
         1 000635   000612 603000 1                  TRC     s:6583

      281     6587    5                    IF ONLYSCONS THEN DO;

   6587  1 000636   200056 234100                    SZN     ONLYSCONS,,AUTO
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:57   
         1 000637   000644 605000 1                  TPL     s:6592

      282     6588    5                       ERR = %E$ONLYSCONS;

   6588  1 000640   001652 235007                    LDA     938,DL
         1 000641   200005 470500                    LDP0    @ERR,,AUTO
         1 000642   000000 755100                    STA     0,,PR0

      283     6589    5                       ALTRETURN;

   6589  1 000643   000000 702200 xent               TSX2  ! X66_AALT

      284     6590    5                       END;
      285     6591    4                    END;
      286     6592    3                 IF  DCT.TYPE = %DV_DP

   6592  1 000644   200017 470500                    LDP0    DCT$,,AUTO
         1 000645   000007 236100                    LDQ     7,,PR0
         1 000646   007700 376007                    ANQ     4032,DL
         1 000647   000600 116007                    CMPQ    384,DL
         1 000650   000676 601000 1                  TNZ     s:6608
         1 000651   000036 234100                    SZN     30,,PR0
         1 000652   000676 605000 1                  TPL     s:6608

      287     6593    3                 AND DCT.DP.MIRROR.FLAG
      288     6594    4                 THEN DO ;

      289     6595    4                     MDCTX = DCT.DP.MIRROR.DCTX ;

   6595  1 000653   000037 236100                    LDQ     31,,PR0
         1 000654   000022 772000                    QRL     18
         1 000655   200054 756100                    STQ     MDCTX,,AUTO

      290     6596    4                     MDCT$ = N$DCT$(MDCTX) ;

   6596  1 000656   000000 471400 xsym               LDP1    N$DCT$$
         1 000657   100000 236106                    LDQ     0,QL,PR1
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:58   
         1 000660   200053 756100                    STQ     MDCT$,,AUTO

      291     6597    4                     IF  DCT.DP.MIRROR.PRI

   6597  1 000661   000036 236100                    LDQ     30,,PR0
         1 000662   020000 316003                    CANQ    8192,DU
         1 000663   000671 600000 1                  TZE     s:6603

      292     6598    5                     THEN DO ;

      293     6599    5                         ADCT$(0) = DCT$  ;

   6599  1 000664   200017 236100                    LDQ     DCT$,,AUTO
         1 000665   200006 756100                    STQ     ADCT$,,AUTO

      294     6600    5                         ADCT$(1) = MDCT$ ;

   6600  1 000666   200053 236100                    LDQ     MDCT$,,AUTO
         1 000667   200007 756100                    STQ     ADCT$+1,,AUTO

      295     6601    5                         END ;

   6601  1 000670   000700 710000 1                  TRA     s:6609

      296     6602    5                     ELSE DO ;

      297     6603    5                         ADCT$(0) = MDCT$ ;

   6603  1 000671   200053 236100                    LDQ     MDCT$,,AUTO
         1 000672   200006 756100                    STQ     ADCT$,,AUTO

      298     6604    5                         ADCT$(1) = DCT$  ;

   6604  1 000673   200017 236100                    LDQ     DCT$,,AUTO
         1 000674   200007 756100                    STQ     ADCT$+1,,AUTO

      299     6605    5                         END ;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:59   

      300     6606    4                     END ;

   6606  1 000675   000700 710000 1                  TRA     s:6609

      301     6607    3                 ELSE
      302     6608    3                     MDCT$ = ADDR(NIL) ;

   6608  1 000676   000001 236000 xsym               LDQ     B_VECTNIL+1
         1 000677   200053 756100                    STQ     MDCT$,,AUTO

      303     6609    3                 IF  DCT.STATE = %KIWAIT

   6609  1 000700   000007 236100                    LDQ     7,,PR0
         1 000701   000077 376007                    ANQ     63,DL
         1 000702   000004 116007                    CMPQ    4,DL
         1 000703   004336 600000 1                  TZE     ERR_DEVNOTIDLE
         1 000704   000007 116007                    CMPQ    7,DL
         1 000705   004336 600000 1                  TZE     ERR_DEVNOTIDLE

      304     6610    3                 OR  DCT.STATE = %MPCWAIT
      305     6611    3                 THEN
      306     6612    3                     GOTO ERR_DEVNOTIDLE ;
      307     6613    3                 IF  MDCT$ ~= ADDR(NIL)

   6613  1 000706   200053 236100                    LDQ     MDCT$,,AUTO
         1 000707   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000710   000720 600000 1                  TZE     s:6620

      308     6614    3                 THEN
      309     6615    3                     IF  MDCT.STATE = %KIWAIT

   6615  1 000711   200053 471500                    LDP1    MDCT$,,AUTO
         1 000712   100007 236100                    LDQ     7,,PR1
         1 000713   000077 376007                    ANQ     63,DL
         1 000714   000004 116007                    CMPQ    4,DL
         1 000715   004336 600000 1                  TZE     ERR_DEVNOTIDLE
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:60   
         1 000716   000007 116007                    CMPQ    7,DL
         1 000717   004336 600000 1                  TZE     ERR_DEVNOTIDLE

      310     6616    3                     OR  MDCT.STATE = %MPCWAIT
      311     6617    3                     THEN
      312     6618    3                         GOTO ERR_DEVNOTIDLE ;
      313     6619                      /*  if not MSOS delayed partitioned */
      314     6620    3                 IF  NOT ( NOT DCT.STATUS.DOWN AND DCT.STATUS.MSOS_PART )

   6620  1 000720   000027 234100                    SZN     23,,PR0
         1 000721   000725 604000 1                  TMI     s:6622
         1 000722   000027 236100                    LDQ     23,,PR0
         1 000723   002000 316003                    CANQ    1024,DU
         1 000724   000727 601000 1                  TNZ     s:6623

      315     6621    3                 THEN
      316     6622    3                     DCT.STATUS.SYSCON_PART = '1'B ;

   6622  1 000725   004000 236003                    LDQ     2048,DU
         1 000726   000027 256100                    ORSQ    23,,PR0

      317     6623    3                 IF  MDCT$ ~= ADDR(NIL)

   6623  1 000727   200053 236100                    LDQ     MDCT$,,AUTO
         1 000730   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000731   000742 600000 1                  TZE     s:6628

      318     6624    3                 THEN
      319     6625    3                     IF  NOT ( NOT MDCT.STATUS.DOWN AND MDCT.STATUS.MSOS_PART )

   6625  1 000732   200053 471500                    LDP1    MDCT$,,AUTO
         1 000733   100027 234100                    SZN     23,,PR1
         1 000734   000740 604000 1                  TMI     s:6627
         1 000735   100027 236100                    LDQ     23,,PR1
         1 000736   002000 316003                    CANQ    1024,DU
         1 000737   000742 601000 1                  TNZ     s:6628

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:61   
      320     6626    3                     THEN
      321     6627    3                         MDCT.STATUS.SYSCON_PART = '1'B ;

   6627  1 000740   004000 236003                    LDQ     2048,DU
         1 000741   100027 256100                    ORSQ    23,,PR1

      322     6628    3                 IF  NOT DCT.STATUS.DOWN

   6628  1 000742   000027 234100                    SZN     23,,PR0
         1 000743   001056 604000 1                  TMI     s:6656

      323     6629    4                 THEN DO ;

      324     6630    4                     IF  MDCT$ ~= ADDR(NIL)

   6630  1 000744   200053 236100                    LDQ     MDCT$,,AUTO
         1 000745   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000746   001023 600000 1                  TZE     s:6647

      325     6631    5                     THEN DO ;

      326     6632    5                         IF  NOT MDCT.STATUS.SYSCON_PART

   6632  1 000747   200053 471500                    LDP1    MDCT$,,AUTO
         1 000750   100027 236100                    LDQ     23,,PR1
         1 000751   004000 316003                    CANQ    2048,DU
         1 000752   000757 601000 1                  TNZ     s:6637

      327     6633    6                         THEN DO ;

      328     6634    6                             ERR = %E$PRTBSY ;

   6634  1 000753   001235 235007                    LDA     669,DL
         1 000754   200005 473500                    LDP3    @ERR,,AUTO
         1 000755   300000 755100                    STA     0,,PR3

      329     6635    6                             ALTRETURN ;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:62   

   6635  1 000756   000000 702200 xent               TSX2  ! X66_AALT

      330     6636    6                             END ;
      331     6637    6                         DO  I = 0 TO 1 ;

   6637  1 000757   200045 450100                    STZ     I,,AUTO

      332     6638    6                             IF  I = 0

   6638  1 000760   200045 235100                    LDA     I,,AUTO
         1 000761   000777 601000 1                  TNZ     s:6642
         1 000762   200006 470505                    LDP0    ADCT$,AL,AUTO
         1 000763   000005 236100                    LDQ     5,,PR0
         1 000764   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000765   000777 600000 1                  TZE     s:6642

      333     6639    6                             AND ADCT$(I)->DCT.RAT$ ~= ADDR(NIL)
      334     6640    6                             THEN
      335     6641    6                                 CALL NKP$PART ( ADCT$(I)->DCT, ERR ) ALTRET (
              6641                                          ERR_RETURN ) ;

   6641  1 000766   200045 720100                    LXL0    I,,AUTO
         1 000767   200006 470510                    LDP0    ADCT$,X0,AUTO
         1 000770   200005 236100                    LDQ     @ERR,,AUTO
         1 000771   200071 756100                    STQ     TEMP$+4,,AUTO
         1 000772   200070 450500                    STP0    TEMP$+3,,AUTO
         1 000773   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 000774   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000775   000000 701000 xent               TSX1    NKP$PART
         1 000776   004325 702000 1                  TSX2    ERR_RETURN

      336     6642    6                             CALL FMN$AVR ( ADCT$(I)->DCT.DCTX, %NI_AVR_PART ) ;

   6642  1 000777   200045 720100                    LXL0    I,,AUTO
         1 001000   200006 470510                    LDP0    ADCT$,X0,AUTO
         1 001001   000001 236000 2                  LDQ     1
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:63   
         1 001002   200071 756100                    STQ     TEMP$+4,,AUTO
         1 001003   000006 631500                    EPPR1   6,,PR0
         1 001004   200070 451500                    STP1    TEMP$+3,,AUTO
         1 001005   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 001006   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 001007   000000 701000 xent               TSX1    FMN$AVR
         1 001010   000000 011000                    NOP     0

      337     6643    6                             ADCT$(I)->DCT.STATUS.DOWN = '1'B ;

   6643  1 001011   200045 720100                    LXL0    I,,AUTO
         1 001012   200006 470510                    LDP0    ADCT$,X0,AUTO
         1 001013   400000 236003                    LDQ     -131072,DU
         1 001014   000027 256100                    ORSQ    23,,PR0

      338     6644    6                             END ;

   6644  1 001015   200045 235100                    LDA     I,,AUTO
         1 001016   000001 035007                    ADLA    1,DL
         1 001017   200045 755100                    STA     I,,AUTO
         1 001020   000002 115007                    CMPA    2,DL
         1 001021   000760 602000 1                  TNC     s:6638

      339     6645    5                         END ;

   6645  1 001022   001056 710000 1                  TRA     s:6656

      340     6646    5                     ELSE DO ;

      341     6647    5                         IF  DCT.RAT$ ~= ADDR(NIL)

   6647  1 001023   000005 236100                    LDQ     5,,PR0
         1 001024   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 001025   001031 601000 1                  TNZ     s:6650
         1 001026   000006 236100                    LDQ     6,,PR0
         1 001027   040000 316007                    CANQ    16384,DL
         1 001030   001040 600000 1                  TZE     s:6651
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:64   

      342     6648    5                         OR  DCT.DFLG.CONSOLE
      343     6649    5                         THEN
      344     6650    5                             CALL NKP$PART ( DCT, ERR ) ALTRET (ERR_RETURN ) ;

   6650  1 001031   200005 236100                    LDQ     @ERR,,AUTO
         1 001032   200017 235100                    LDA     DCT$,,AUTO
         1 001033   200070 757100                    STAQ    TEMP$+3,,AUTO
         1 001034   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 001035   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 001036   000000 701000 xent               TSX1    NKP$PART
         1 001037   004325 702000 1                  TSX2    ERR_RETURN

      345     6651    5                         IF  DCT.TYPE = %DV_DP

   6651  1 001040   200017 470500                    LDP0    DCT$,,AUTO
         1 001041   000007 236100                    LDQ     7,,PR0
         1 001042   007700 376007                    ANQ     4032,DL
         1 001043   000600 116007                    CMPQ    384,DL
         1 001044   001056 601000 1                  TNZ     s:6656

      346     6652    5                         THEN
      347     6653    5                             CALL FMN$AVR ( DCT.DCTX, %NI_AVR_PART ) ;

   6653  1 001045   000001 236000 2                  LDQ     1
         1 001046   200071 756100                    STQ     TEMP$+4,,AUTO
         1 001047   200017 236100                    LDQ     DCT$,,AUTO
         1 001050   000006 036003                    ADLQ    6,DU
         1 001051   200070 756100                    STQ     TEMP$+3,,AUTO
         1 001052   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 001053   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 001054   000000 701000 xent               TSX1    FMN$AVR
         1 001055   000000 011000                    NOP     0

      348     6654    5                         END ;

      349     6655    4                     END ;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:65   

      350     6656    3                 DCT.STATUS.DOWN='1'B;

   6656  1 001056   200017 470500                    LDP0    DCT$,,AUTO
         1 001057   400000 236003                    LDQ     -131072,DU
         1 001060   000027 256100                    ORSQ    23,,PR0

      351     6657    4                 IF DCT.DFLG.CONSOLE THEN DO;   /* do channel too */

   6657  1 001061   000006 236100                    LDQ     6,,PR0
         1 001062   040000 316007                    CANQ    16384,DL
         1 001063   001072 600000 1                  TZE     s:6661

      352     6658    4                    DCT.DQH$->DQH.STATUS.DOWN = '1'B;

   6658  1 001064   000023 471500                    LDP1    19,,PR0
         1 001065   200000 236003                    LDQ     65536,DU
         1 001066   100001 256100                    ORSQ    1,,PR1

      353     6659    4                    DCT.DQH$->DQH.STATUS.SYSCON_PART = '1'B;

   6659  1 001067   000023 471500                    LDP1    19,,PR0
         1 001070   002000 236003                    LDQ     1024,DU
         1 001071   100001 256100                    ORSQ    1,,PR1

      354     6660    4                    END;

      355     6661    3                 CALL NIX$DEVCONFIG ( DCT, BOOTINFO ) ;

   6661  1 001072   200010 631500                    EPPR1   BOOTINFO,,AUTO
         1 001073   200071 451500                    STP1    TEMP$+4,,AUTO
         1 001074   200017 236100                    LDQ     DCT$,,AUTO
         1 001075   200070 756100                    STQ     TEMP$+3,,AUTO
         1 001076   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 001077   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 001100   000000 701000 xent               TSX1    NIX$DEVCONFIG
         1 001101   000000 011000                    NOP     0
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:66   
         1 001102   004104 710000 1                  TRA     LOG_IT

      356     6662    3               CASE(%MPC#);

      357     6663        /**/
      358     6664        /* PARTITION AN MPC */
      359     6665        /**/
      360     6666    3                 IF DCT.STATUS.SYSCON_PART THEN

   6666  1 001103   200017 471500                    LDP1    DCT$,,AUTO
         1 001104   100027 236100                    LDQ     23,,PR1
         1 001105   004000 316003                    CANQ    2048,DU
         1 001106   004206 601000 1                  TNZ     RETURN_RESULT

      361     6667    3                    GOTO RETURN_RESULT;
      362     6668    3                 IF DCT.TYPE~=%DV_MPC THEN

   6668  1 001107   100007 236100                    LDQ     7,,PR1
         1 001110   007700 376007                    ANQ     4032,DL
         1 001111   000700 116007                    CMPQ    448,DL
         1 001112   004366 601000 1                  TNZ     ERR_SCNNOTMPC

      363     6669    3                    GOTO ERR_SCNNOTMPC;
      364     6670    4                 DO I=0 TO 1;

   6670  1 001113   200045 450100                    STZ     I,,AUTO

      365     6671    5                    IF SQH.MPC$(I)~=DCT$ AND SQH.MPC$(I)~=ADDR(NIL) THEN DO;

   6671  1 001114   200063 470500                    LDP0    SQH$,,AUTO
         1 001115   200045 720100                    LXL0    I,,AUTO
         1 001116   000005 236110                    LDQ     5,X0,PR0
         1 001117   200017 116100                    CMPQ    DCT$,,AUTO
         1 001120   001140 600000 1                  TZE     s:6679
         1 001121   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 001122   001140 600000 1                  TZE     s:6679

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:67   
      366     6672    5                       IF NOT SQH.MPC$(I)->DCT.STATUS.SYSCON_PART  AND

   6672  1 001123   000005 471510                    LDP1    5,X0,PR0
         1 001124   100027 236100                    LDQ     23,,PR1
         1 001125   004000 316003                    CANQ    2048,DU
         1 001126   001140 601000 1                  TNZ     s:6679
         1 001127   002000 316003                    CANQ    1024,DU
         1 001130   001140 601000 1                  TNZ     s:6679
         1 001131   100027 234100                    SZN     23,,PR1
         1 001132   001140 604000 1                  TMI     s:6679
         1 001133   100006 236100                    LDQ     6,,PR1
         1 001134   002000 316007                    CANQ    1024,DL
         1 001135   001140 601000 1                  TNZ     s:6679
         1 001136   001000 316007                    CANQ    512,DL
         1 001137   001202 600000 1                  TZE     NOT_ONLY_MPC

      367     6673    5                          NOT SQH.MPC$(I)->DCT.STATUS.MSOS_PART    AND
      368     6674    5                          NOT SQH.MPC$(I)->DCT.STATUS.DOWN         AND
      369     6675    5                          NOT SQH.MPC$(I)->DCT.DFLG.MPCSUSPENDED   AND
      370     6676    5                          NOT SQH.MPC$(I)->DCT.DFLG.MPCSTOP        THEN
      371     6677    5                          GOTO NOT_ONLY_MPC;
      372     6678    5                       END;

      373     6679    4                    END;

   6679  1 001140   200045 235100                    LDA     I,,AUTO
         1 001141   000001 035007                    ADLA    1,DL
         1 001142   200045 755100                    STA     I,,AUTO
         1 001143   000002 115007                    CMPA    2,DL
         1 001144   001114 602000 1                  TNC     s:6671

      374     6680    4                 DO I=SQH.FDCT TO SQH.FDCT+SQH.NDCT-1;

   6680  1 001145   000002 236100                    LDQ     2,,PR0
         1 001146   000022 772000                    QRL     18
         1 001147   200045 756100                    STQ     I,,AUTO
         1 001150   001170 710000 1                  TRA     s:6685+3
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:68   

      375     6681    4                    IF N$DCT$(I)->DCT.TYPE ~= %DV_MPC AND

   6681  1 001151   000000 470400 xsym               LDP0    N$DCT$$
         1 001152   200045 720100                    LXL0    I,,AUTO
         1 001153   000000 471510                    LDP1    0,X0,PR0
         1 001154   100007 236100                    LDQ     7,,PR1
         1 001155   007700 376007                    ANQ     4032,DL
         1 001156   000700 116007                    CMPQ    448,DL
         1 001157   001165 600000 1                  TZE     s:6685
         1 001160   100027 236100                    LDQ     23,,PR1
         1 001161   004000 316003                    CANQ    2048,DU
         1 001162   004352 600000 1                  TZE     ERR_ONLYPATH
         1 001163   100027 234100                    SZN     23,,PR1
         1 001164   004352 605000 1                  TPL     ERR_ONLYPATH

      376     6682    4                       NOT (N$DCT$(I)->DCT.STATUS.SYSCON_PART AND
      377     6683    4                            N$DCT$(I)->DCT.STATUS.DOWN) THEN
      378     6684    4                       GOTO ERR_ONLYPATH;
      379     6685    4                    END;

   6685  1 001165   200045 235100                    LDA     I,,AUTO
         1 001166   000001 035007                    ADLA    1,DL
         1 001167   200045 755100                    STA     I,,AUTO
         1 001170   200063 470500                    LDP0    SQH$,,AUTO
         1 001171   000002 236100                    LDQ     2,,PR0
         1 001172   777777 376007                    ANQ     -1,DL
         1 001173   200070 756100                    STQ     TEMP$+3,,AUTO
         1 001174   000002 236100                    LDQ     2,,PR0
         1 001175   000022 772000                    QRL     18
         1 001176   200070 036100                    ADLQ    TEMP$+3,,AUTO
         1 001177   200045 116100                    CMPQ    I,,AUTO
         1 001200   001202 600000 1                  TZE     NOT_ONLY_MPC
         1 001201   001151 603000 1                  TRC     s:6681

   6683  1 001202                       NOT_ONLY_MPC null
      380     6686    3   NOT_ONLY_MPC: ;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:69   
      381     6687    3                 DCT.STATUS.DOWN='1'B;

   6687  1 001202   200017 471500                    LDP1    DCT$,,AUTO
         1 001203   400000 236003                    LDQ     -131072,DU
         1 001204   100027 256100                    ORSQ    23,,PR1

      382     6688    3                 DCT.STATUS.SYSCON_PART='1'B;

   6688  1 001205   004000 236003                    LDQ     2048,DU
         1 001206   100027 256100                    ORSQ    23,,PR1

      383     6689                      %LOCK   ( G#=SQH.GATE ) ;

   6690  1 001207   200063 630500                    EPPR0   SQH$,,AUTO
         1 001210   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 001211   000000 701000 xent               TSX1    HFC$LOCK
         1 001212   000000 011000                    NOP     0

      384     6692    4                 DO  I = 0 TO %N_CHANSPERMPC-1 ;

   6692  1 001213   200045 450100                    STZ     I,,AUTO
         1 001214   001243 710000 1                  TRA     s:6698+3

      385     6693    4                     TEMP$ = NI$CHT.DQH$(DCT.MPC.IOCHANX(I)) ;

   6693  1 001215   200017 470500                    LDP0    DCT$,,AUTO
         1 001216   200045 235100                    LDA     I,,AUTO
         1 001217   000100 101505                    MRL     fill='000'O
         1 001220   000031 000001                    ADSC9   25,A,PR0                 cn=0,n=1
         1 001221   200070 000002                    ADSC9   TEMP$+3,,AUTO            cn=0,n=2
         1 001222   200070 220100                    LDX0    TEMP$+3,,AUTO
         1 001223   200070 020100                    ADLX0   TEMP$+3,,AUTO
         1 001224   000000 471400 xsym               LDP1    NI$CHT$
         1 001225   100000 236110                    LDQ     0,X0,PR1
         1 001226   200065 756100                    STQ     TEMP$,,AUTO

      386     6694    5                     IF  TEMP$ ~= ADDR(NIL)  THEN DO ;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:70   

   6694  1 001227   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 001230   001240 600000 1                  TZE     s:6698

      387     6695    5                         TEMP$->DQH.CHANSTATE.DOWN = '1'B ;

   6695  1 001231   200065 473500                    LDP3    TEMP$,,AUTO
         1 001232   040000 236003                    LDQ     16384,DU
         1 001233   300020 256100                    ORSQ    16,,PR3

      388     6696    5                         CALL NIW$DQHSTOP ( TEMP$->DQH ) ;

   6696  1 001234   200065 630500                    EPPR0   TEMP$,,AUTO
         1 001235   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 001236   000000 701000 xent               TSX1    NIW$DQHSTOP
         1 001237   000000 011000                    NOP     0

      389     6697    5                         END ;

      390     6698    4                     END ;

   6698  1 001240   200045 235100                    LDA     I,,AUTO
         1 001241   000001 035007                    ADLA    1,DL
         1 001242   200045 755100                    STA     I,,AUTO
         1 001243   200045 235100                    LDA     I,,AUTO
         1 001244   000020 115007                    CMPA    16,DL
         1 001245   001215 602000 1                  TNC     s:6693

      391     6699                      %UNLOCK ( G#=SQH.GATE ) ;

   6700  1 001246   200063 630500                    EPPR0   SQH$,,AUTO
         1 001247   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 001250   000000 701000 xent               TSX1    HFC$UNLOCK
         1 001251   000000 011000                    NOP     0
         1 001252   004104 710000 1                  TRA     LOG_IT

      392     6702    3               CASE(%FEP##);
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:71   

      393     6703        /**/
      394     6704        /* PARTITION FEP */
      395     6705        /**/
      396     6706    3                 TEMP$ = FP_OPCI$$;

   6706  1 001253   000000 236000 xsym               LDQ     FP_OPCI$$
         1 001254   200065 756100                    STQ     TEMP$,,AUTO

      397     6707    4                 DO WHILE TEMP$ ~= ADDR(NIL);

   6707  1 001255   001313 710000 1                  TRA     s:6716

      398     6708    4                   IF TEMP$->FP$OPCI.FEI# = DQH.FEX THEN /* optical disk controller */

   6708  1 001256   200065 470500                    LDP0    TEMP$,,AUTO
         1 001257   200020 471500                    LDP1    DQH$,,AUTO
         1 001260   100001 236100                    LDQ     1,,PR1
         1 001261   000006 772000                    QRL     6
         1 001262   000077 376007                    ANQ     63,DL
         1 001263   000001 116100                    CMPQ    1,,PR0
         1 001264   001310 601000 1                  TNZ     s:6715

      399     6709    5                       DO I = 0 TO NK_MXLOCAL;

   6709  1 001265   200045 450100                    STZ     I,,AUTO
         1 001266   001305 710000 1                  TRA     s:6714+3

      400     6710    5                          IF N$DCT$(I) ~= ADDR(NIL) THEN

   6710  1 001267   000000 470400 xsym               LDP0    N$DCT$$
         1 001270   200045 720100                    LXL0    I,,AUTO
         1 001271   000000 236110                    LDQ     0,X0,PR0
         1 001272   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 001273   001302 600000 1                  TZE     s:6714

      401     6711    5                             IF N$DCT$(I)->DCT.DQH$ = DQH$ AND
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:72   

   6711  1 001274   000000 471510                    LDP1    0,X0,PR0
         1 001275   100023 236100                    LDQ     19,,PR1
         1 001276   200020 116100                    CMPQ    DQH$,,AUTO
         1 001277   001302 601000 1                  TNZ     s:6714
         1 001300   100027 234100                    SZN     23,,PR1
         1 001301   004352 605000 1                  TPL     ERR_ONLYPATH

      402     6712    5                                NOT N$DCT$(I)->DCT.STATUS.DOWN THEN
      403     6713    5                                GOTO ERR_ONLYPATH;
      404     6714    5                          END;

   6714  1 001302   200045 235100                    LDA     I,,AUTO
         1 001303   000001 035007                    ADLA    1,DL
         1 001304   200045 755100                    STA     I,,AUTO
         1 001305   000000 236000 xsym               LDQ     NK_MXLOCAL
         1 001306   200045 116100                    CMPQ    I,,AUTO
         1 001307   001267 603000 1                  TRC     s:6710

      405     6715    4                    TEMP$ = TEMP$->FP$OPCI.LNK$;

   6715  1 001310   200065 470500                    LDP0    TEMP$,,AUTO
         1 001311   000000 236100                    LDQ     0,,PR0
         1 001312   200065 756100                    STQ     TEMP$,,AUTO

      406     6716    4                    END;

   6716  1 001313   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 001314   001256 601000 1                  TNZ     s:6708

      407     6717    3                 CALL KIQ$PARTFEP(FEI,KIER_PART);

   6717  1 001315   000003 236000 2                  LDQ     3
         1 001316   200071 756100                    STQ     TEMP$+4,,AUTO
         1 001317   200041 630500                    EPPR0   FEI,,AUTO
         1 001320   200070 450500                    STP0    TEMP$+3,,AUTO
         1 001321   200070 630500                    EPPR0   TEMP$+3,,AUTO
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:73   
         1 001322   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 001323   000000 701000 xent               TSX1    KIQ$PARTFEP
         1 001324   000000 011000                    NOP     0

      408     6718    3                 FEI$ = KI$FEI$(FEI);

   6718  1 001325   000000 470400 xsym               LDP0    KI_FEI$$
         1 001326   200041 720100                    LXL0    FEI,,AUTO
         1 001327   000000 236110                    LDQ     0,X0,PR0
         1 001330   200042 756100                    STQ     FEI$,,AUTO

      409     6719    3                 IF KI$FEI.PBST.PROB =KIER_PART

   6719  1 001331   200042 471500                    LDP1    FEI$,,AUTO
         1 001332   100015 221100                    LDX1    13,,PR1
         1 001333   000016 101003                    CMPX1   14,DU
         1 001334   001347 601000 1                  TNZ     s:6726

      410     6720    4                 THEN DO;

      411     6721    4                      DQH.STATUS.DOWN='1'B;

   6721  1 001335   200020 473500                    LDP3    DQH$,,AUTO
         1 001336   200000 236003                    LDQ     65536,DU
         1 001337   300001 256100                    ORSQ    1,,PR3

      412     6722    4                      DQH.STATUS.SYSCON_PART = '1'B;

   6722  1 001340   200020 473500                    LDP3    DQH$,,AUTO
         1 001341   002000 236003                    LDQ     1024,DU
         1 001342   300001 256100                    ORSQ    1,,PR3

      413     6723    4                      DQH.STATE = %IDLE;

   6723  1 001343   200020 473500                    LDP3    DQH$,,AUTO
         1 001344   000000 236003                    LDQ     0,DU
         1 001345   300001 752101                    STCQ    1,'01'O,PR3
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:74   

      414     6724    4                      END;

   6724  1 001346   004104 710000 1                  TRA     LOG_IT

      415     6725    4                 ELSE DO;

      416     6726    4                      DQH.STATUS.DOWN='0'B;

   6726  1 001347   200020 473500                    LDP3    DQH$,,AUTO
         1 001350   000004 236000 2                  LDQ     4
         1 001351   300001 356100                    ANSQ    1,,PR3

      417     6727    4                      DQH.STATUS.SYSCON_PART = '0'B;

   6727  1 001352   200020 473500                    LDP3    DQH$,,AUTO
         1 001353   000005 236000 2                  LDQ     5
         1 001354   300001 356100                    ANSQ    1,,PR3

      418     6728    4                      DQH.STATE = %BUSY;

   6728  1 001355   200020 473500                    LDP3    DQH$,,AUTO
         1 001356   000005 236007                    LDQ     5,DL
         1 001357   300001 752101                    STCQ    1,'01'O,PR3

      419     6729    4                      GOTO ERR_NOPARTRETFEP;

   6729  1 001360   004332 710000 1                  TRA     ERR_NOPARTRETFEP

      420     6730    4                      END;
      421     6731    3               CASE(%IOM##);

      422     6732        /**/
      423     6733        /* PARTITION OR RELEASE AN IOM */
      424     6734        /**/
      425     6735    4                 IF IOM.STATUS.SYSCON_PART THEN DO;

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:75   
   6735  1 001361   200047 471500                    LDP1    IOM$,,AUTO
         1 001362   100003 236100                    LDQ     3,,PR1
         1 001363   000020 316007                    CANQ    16,DL
         1 001364   001375 600000 1                  TZE     s:6740

      426     6736    4                    IF SYSCON_V.FUNCTION = %PARTITION# THEN GOTO RETURN_RESULT;

   6736  1 001365   000000 236100                    LDQ     0,,PR0
         1 001366   777000 376003                    ANQ     -512,DU
         1 001367   001000 116003                    CMPQ    512,DU
         1 001370   004206 600000 1                  TZE     RETURN_RESULT

      427     6737    4                    IF IOM.STATUS.DOWN THEN GOTO RETURN_RESULT;

   6737  1 001371   100003 236100                    LDQ     3,,PR1
         1 001372   000040 316007                    CANQ    32,DL
         1 001373   004206 601000 1                  TNZ     RETURN_RESULT

      428     6738    4                    GOTO DO_RELEASE;

   6738  1 001374   001644 710000 1                  TRA     DO_RELEASE

      429     6739    4                    END;
      430     6740    3                 J = IOM.IOM#*%N_MAXCHANS;

   6740  1 001375   100003 236100                    LDQ     3,,PR1
         1 001376   000021 772000                    QRL     17
         1 001377   001600 376007                    ANQ     896,DL
         1 001400   200051 756100                    STQ     J,,AUTO

      431     6741    4                 DO I = J+8 TO J+NI_CHANS(IOM.IOM#);

   6741  1 001401   000010 036007                    ADLQ    8,DL
         1 001402   200045 756100                    STQ     I,,AUTO
         1 001403   001426 710000 1                  TRA     s:6748+3

      432     6742    4                    DQH$ = NI$CHT.DQH$(I);
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:76   

   6742  1 001404   200045 235100                    LDA     I,,AUTO
         1 001405   000001 735000                    ALS     1
         1 001406   000000 470400 xsym               LDP0    NI$CHT$
         1 001407   000000 236105                    LDQ     0,AL,PR0
         1 001410   200020 756100                    STQ     DQH$,,AUTO

      433     6743    4                    IF DQH$ ~= ADDR(NIL) THEN

   6743  1 001411   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 001412   001423 600000 1                  TZE     s:6748

      434     6744    5                       IF NOT DQH.STATUS.SYSCON_PART THEN DO;

   6744  1 001413   200020 471500                    LDP1    DQH$,,AUTO
         1 001414   100001 236100                    LDQ     1,,PR1
         1 001415   002000 316003                    CANQ    1024,DU
         1 001416   001423 601000 1                  TNZ     s:6748

      435     6745    5                          ERR = %E$CHANUP;

   6745  1 001417   001655 235007                    LDA     941,DL
         1 001420   200005 473500                    LDP3    @ERR,,AUTO
         1 001421   300000 755100                    STA     0,,PR3

      436     6746    5                          ALTRETURN;

   6746  1 001422   000000 702200 xent               TSX2  ! X66_AALT

      437     6747    5                          END;
      438     6748    4                    END;

   6748  1 001423   200045 236100                    LDQ     I,,AUTO
         1 001424   000001 036007                    ADLQ    1,DL
         1 001425   200045 756100                    STQ     I,,AUTO
         1 001426   200047 470500                    LDP0    IOM$,,AUTO
         1 001427   000003 236100                    LDQ     3,,PR0
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:77   
         1 001430   000030 772000                    QRL     24
         1 001431   000007 376007                    ANQ     7,DL
         1 001432   000000 620006                    EAX0    0,QL
         1 001433   200051 236100                    LDQ     J,,AUTO
         1 001434   000000 036010 xsym               ADLQ    NI_CHANS,X0
         1 001435   200045 116100                    CMPQ    I,,AUTO
         1 001436   001404 603000 1                  TRC     s:6742

      439     6749    4                 DO I = 1 TO NK_MXLOCAL;

   6749  1 001437   000001 235007                    LDA     1,DL
         1 001440   200045 755100                    STA     I,,AUTO
         1 001441   001534 710000 1                  TRA     ANOTHER_IOM+3

      440     6750    4                    DCT$ = N$DCT$(I);

   6750  1 001442   000000 470400 xsym               LDP0    N$DCT$$
         1 001443   200045 720100                    LXL0    I,,AUTO
         1 001444   000000 236110                    LDQ     0,X0,PR0
         1 001445   200017 756100                    STQ     DCT$,,AUTO

      441     6751    5                    IF DCT.TYPE = %DV_MPC AND NOT DCT.STATUS.SYSCON_PART THEN DO;

   6751  1 001446   200017 471500                    LDP1    DCT$,,AUTO
         1 001447   100007 236100                    LDQ     7,,PR1
         1 001450   007700 376007                    ANQ     4032,DL
         1 001451   000700 116007                    CMPQ    448,DL
         1 001452   001531 601000 1                  TNZ     ANOTHER_IOM
         1 001453   100027 236100                    LDQ     23,,PR1
         1 001454   004000 316003                    CANQ    2048,DU
         1 001455   001531 601000 1                  TNZ     ANOTHER_IOM

      442     6752    6                       DO J = 0 TO %N_CHANSPERMPC-1;

   6752  1 001456   200051 450100                    STZ     J,,AUTO
         1 001457   001522 710000 1                  TRA     s:6757+3

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:78   
      443     6753    6                          IF DCT.MPC.IOCHANX(J) ~= 0 AND

   6753  1 001460   200017 470500                    LDP0    DCT$,,AUTO
         1 001461   200051 235100                    LDA     J,,AUTO
         1 001462   000100 101505                    MRL     fill='000'O
         1 001463   000031 000001                    ADSC9   25,A,PR0                 cn=0,n=1
         1 001464   200070 000004                    ADSC9   TEMP$+3,,AUTO            cn=0,n=4
         1 001465   200070 236100                    LDQ     TEMP$+3,,AUTO
         1 001466   000000 116003                    CMPQ    0,DU
         1 001467   001517 600000 1                  TZE     s:6757
         1 001470   200047 471500                    LDP1    IOM$,,AUTO
         1 001471   100003 236100                    LDQ     3,,PR1
         1 001472   000030 772000                    QRL     24
         1 001473   000007 376007                    ANQ     7,DL
         1 001474   200071 756100                    STQ     TEMP$+4,,AUTO
         1 001475   200051 236100                    LDQ     J,,AUTO
         1 001476   000011 402007                    MPY     9,DL
         1 001477   003100 061506                    CSR     bolr='003'O
         1 001500   000031 000002                    BDSC    25,Q,PR0                 by=0,bit=0,n=2
         1 001501   200072 000044                    BDSC    TEMP$+5,,AUTO            by=0,bit=0,n=36
         1 001502   200072 236100                    LDQ     TEMP$+5,,AUTO
         1 001503   200071 116100                    CMPQ    TEMP$+4,,AUTO
         1 001504   001517 600000 1                  TZE     s:6757
         1 001505   200051 236100                    LDQ     J,,AUTO
         1 001506   000011 402007                    MPY     9,DL
         1 001507   003100 061506                    CSR     bolr='003'O
         1 001510   000031 000002                    BDSC    25,Q,PR0                 by=0,bit=0,n=2
         1 001511   200073 000022                    BDSC    TEMP$+6,,AUTO            by=0,bit=0,n=18
         1 001512   200073 220100                    LDX0    TEMP$+6,,AUTO
         1 001513   000000 473410 xsym               LDP3    NI$IOM$,X0
         1 001514   300003 236100                    LDQ     3,,PR3
         1 001515   000020 316007                    CANQ    16,DL
         1 001516   001531 600000 1                  TZE     ANOTHER_IOM

      444     6754    6                             DCT.MPC.IOCHAN.IOM(J) ~= IOM.IOM# AND
      445     6755    6                            NOT NI$IOM$(DCT.MPC.IOCHAN.IOM(J))->IOM.STATUS.SYSCON_PART
              6755                                      THEN
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:79   
      446     6756    6                             GOTO ANOTHER_IOM;
      447     6757    6                          END;

   6757  1 001517   200051 235100                    LDA     J,,AUTO
         1 001520   000001 035007                    ADLA    1,DL
         1 001521   200051 755100                    STA     J,,AUTO
         1 001522   200051 235100                    LDA     J,,AUTO
         1 001523   000020 115007                    CMPA    16,DL
         1 001524   001460 602000 1                  TNC     s:6753

      448     6758    5                       ERR = %E$MPCUP;

   6758  1 001525   001656 236007                    LDQ     942,DL
         1 001526   200005 470500                    LDP0    @ERR,,AUTO
         1 001527   000000 756100                    STQ     0,,PR0

      449     6759    5                       ALTRETURN;

   6759  1 001530   000000 702200 xent               TSX2  ! X66_AALT

   6755  1 001531                       ANOTHER_IOM  null
      450     6760    5                       END;
      451     6761    4   ANOTHER_IOM: ;
      452     6762    4                    END;

   6762  1 001531   200045 235100                    LDA     I,,AUTO
         1 001532   000001 035007                    ADLA    1,DL
         1 001533   200045 755100                    STA     I,,AUTO
         1 001534   000000 236000 xsym               LDQ     NK_MXLOCAL
         1 001535   200045 116100                    CMPQ    I,,AUTO
         1 001536   001442 603000 1                  TRC     s:6750

      453     6763    3                 IOM.STATUS.SYSCON_PART = '1'B;

   6763  1 001537   200047 470500                    LDP0    IOM$,,AUTO
         1 001540   000020 236007                    LDQ     16,DL
         1 001541   000003 256100                    ORSQ    3,,PR0
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:80   

      454     6764    4                 IF HW_IMX OR HW_IOP THEN DO;

   6764  1 001542   000000 234000 xsym               SZN     HW_IMX
         1 001543   001546 604000 1                  TMI     s:6765
         1 001544   000000 234000 xsym               SZN     HW_IOP
         1 001545   001621 605000 1                  TPL     s:6781

      455     6765    4                    DCT$ = N$DCT$(NI_MAINT_DCTX(IOM.IOM#));

   6765  1 001546   000003 236100                    LDQ     3,,PR0
         1 001547   000030 772000                    QRL     24
         1 001550   000007 376007                    ANQ     7,DL
         1 001551   000000 720006 xsym               LXL0    NI_MAINT_DCTX,QL
         1 001552   000000 471400 xsym               LDP1    N$DCT$$
         1 001553   100000 236110                    LDQ     0,X0,PR1
         1 001554   200017 756100                    STQ     DCT$,,AUTO

      456     6766    5                    IF HW_IMX THEN DO;

   6766  1 001555   000000 234000 xsym               SZN     HW_IMX
         1 001556   001574 605000 1                  TPL     s:6774

      457     6767    6                       IF DCT.MCA.RESERVED THEN DO;

   6767  1 001557   200017 473500                    LDP3    DCT$,,AUTO
         1 001560   300030 234100                    SZN     24,,PR3
         1 001561   001566 605000 1                  TPL     s:6771

      458     6768    6                          ERR = %E$MCAINUSE;

   6768  1 001562   001665 235007                    LDA     949,DL
         1 001563   200005 474500                    LDP4    @ERR,,AUTO
         1 001564   400000 755100                    STA     0,,PR4

      459     6769    6                          ALTRETURN;

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:81   
   6769  1 001565   000000 702200 xent               TSX2  ! X66_AALT

      460     6770    6                          END;
      461     6771    5                       CHANX = IOM.IOM# * %N_MAXCHANS + 3;

   6771  1 001566   000003 236100                    LDQ     3,,PR0
         1 001567   000021 772000                    QRL     17
         1 001570   001600 376007                    ANQ     896,DL
         1 001571   000003 036007                    ADLQ    3,DL
         1 001572   200015 756100                    STQ     CHANX,,AUTO

      462     6772    5                       END;

   6772  1 001573   001601 710000 1                  TRA     s:6775

      463     6773    4                    ELSE
      464     6774    4                       CHANX = IOM.IOM# * %N_MAXCHANS + 4;

   6774  1 001574   000003 236100                    LDQ     3,,PR0
         1 001575   000021 772000                    QRL     17
         1 001576   001600 376007                    ANQ     896,DL
         1 001577   000004 036007                    ADLQ    4,DL
         1 001600   200015 756100                    STQ     CHANX,,AUTO

      465     6775    4                    DCT.STATUS.DOWN = '1'B;

   6775  1 001601   200017 473500                    LDP3    DCT$,,AUTO
         1 001602   400000 236003                    LDQ     -131072,DU
         1 001603   300027 256100                    ORSQ    23,,PR3

      466     6776    4                    DCT.STATUS.SYSCON_PART = '1'B;

   6776  1 001604   004000 236003                    LDQ     2048,DU
         1 001605   300027 256100                    ORSQ    23,,PR3

      467     6777    4                    DQH$ = NI$CHT.DQH$(CHANX);

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:82   
   6777  1 001606   200015 235100                    LDA     CHANX,,AUTO
         1 001607   000001 735000                    ALS     1
         1 001610   000000 474400 xsym               LDP4    NI$CHT$
         1 001611   400000 236105                    LDQ     0,AL,PR4
         1 001612   200020 756100                    STQ     DQH$,,AUTO

      468     6778    4                    DQH.STATUS.DOWN = '1'B;

   6778  1 001613   200020 475500                    LDP5    DQH$,,AUTO
         1 001614   200000 236003                    LDQ     65536,DU
         1 001615   500001 256100                    ORSQ    1,,PR5

      469     6779    4                    DQH.STATUS.SYSCON_PART = '1'B;

   6779  1 001616   200020 475500                    LDP5    DQH$,,AUTO
         1 001617   002000 236003                    LDQ     1024,DU
         1 001620   500001 256100                    ORSQ    1,,PR5

      470     6780    4                    END;

      471     6781    4                 IF NOT IOM.STATUS.MSOS_PART THEN DO;

   6781  1 001621   000003 236100                    LDQ     3,,PR0
         1 001622   000010 316007                    CANQ    8,DL
         1 001623   001637 601000 1                  TNZ     s:6786

      472     6782    4                    IOM.STATUS.DOWN = '1'B;

   6782  1 001624   000040 236007                    LDQ     32,DL
         1 001625   000003 256100                    ORSQ    3,,PR0

      473     6783    4                    I = IOM.ADDRESS;

   6783  1 001626   000003 236100                    LDQ     3,,PR0
         1 001627   000007 376007                    ANQ     7,DL
         1 001630   200045 756100                    STQ     I,,AUTO

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:83   
      474     6784    4                    CALL HFB$DISPORT (I);

   6784  1 001631   200045 631500                    EPPR1   I,,AUTO
         1 001632   200070 451500                    STP1    TEMP$+3,,AUTO
         1 001633   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 001634   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 001635   000000 701000 xent               TSX1    HFB$DISPORT
         1 001636   000000 011000                    NOP     0

      475     6785    4                    END;

      476     6786    3               IF SYSCON_V.FUNCTION = %PARTITION# THEN GOTO RETURN_RESULT;

   6786  1 001637   200003 470500                    LDP0    @SYSCON_V,,AUTO
         1 001640   000000 236100                    LDQ     0,,PR0
         1 001641   777000 376003                    ANQ     -512,DU
         1 001642   001000 116003                    CMPQ    512,DU
         1 001643   004206 600000 1                  TZE     RETURN_RESULT

      477     6787    3   DO_RELEASE:
      478     6788    4               IF HW_IMX THEN DO;

   6788  1 001644   000000 234000 xsym  DO_RELEASE   SZN     HW_IMX
         1 001645   004104 605000 1                  TPL     LOG_IT

      479     6789    4                  I = IOM.ADDRESS;

   6789  1 001646   200047 471500                    LDP1    IOM$,,AUTO
         1 001647   100003 236100                    LDQ     3,,PR1
         1 001650   000007 376007                    ANQ     7,DL
         1 001651   200045 756100                    STQ     I,,AUTO

      480     6790    4                  H_DPS8000_SCU_CONF_REG.PORTS(I) = '0'B;

   6790  1 001652   003006 060400                    CSL     bolr='003'O
         1 001653   000002 000001 xsym               BDSC    B_VECTNIL+2              by=0,bit=0,n=1
         1 001654   000000 610001 xsym               BDSC    H_DPS8000_SCU_CONF_REG,Q by=3,bit=1,n=1
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:84   

      481     6791    4                  CALL HFC$SSCR(B$SCU$,8,H_DPS8000_SCU_CONF_REG);

   6791  1 001655   000006 630400 2                  EPPR0   6
         1 001656   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 001657   000000 701000 xent               TSX1    HFC$SSCR
         1 001660   000000 011000                    NOP     0

      482     6792    4                  CALL TMB$BUF_ALLOC (BUF$,BUFX,DQH$) ALTRET(ERR_RELEASE);

   6792  1 001661   200020 630500                    EPPR0   DQH$,,AUTO
         1 001662   200072 450500                    STP0    TEMP$+5,,AUTO
         1 001663   200013 631500                    EPPR1   BUFX,,AUTO
         1 001664   200071 451500                    STP1    TEMP$+4,,AUTO
         1 001665   200012 633500                    EPPR3   BUF$,,AUTO
         1 001666   200070 453500                    STP3    TEMP$+3,,AUTO
         1 001667   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 001670   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 001671   000000 701000 xent               TSX1    TMB$BUF_ALLOC
         1 001672   004406 702000 1                  TSX2    ERR_RELEASE

      483     6793    4                  CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_SCU_OFF#,BUFX,I)

   6793  1 001673   200045 630500                    EPPR0   I,,AUTO
         1 001674   200073 450500                    STP0    TEMP$+6,,AUTO
         1 001675   200013 631500                    EPPR1   BUFX,,AUTO
         1 001676   200072 451500                    STP1    TEMP$+5,,AUTO
         1 001677   000011 236000 2                  LDQ     9
         1 001700   200020 235100                    LDA     DQH$,,AUTO
         1 001701   200070 757100                    STAQ    TEMP$+3,,AUTO
         1 001702   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 001703   000022 631400 xsym               EPPR1   B_VECTNIL+18
         1 001704   000000 701000 xent               TSX1    TMB$MCA
         1 001705   004456 702000 1                  TSX2    SWITCH_REL_FAILED

      484     6794    4                    ALTRET(SWITCH_REL_FAILED);
      485     6795    4                  IOM.STATUS.DOWN = '1'B;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:85   

   6795  1 001706   200047 470500                    LDP0    IOM$,,AUTO
         1 001707   000040 236007                    LDQ     32,DL
         1 001710   000003 256100                    ORSQ    3,,PR0

      486     6796    4                  CALL TMB$BUF_DEALLOC(BUF$,BUFX);

   6796  1 001711   200013 631500                    EPPR1   BUFX,,AUTO
         1 001712   200071 451500                    STP1    TEMP$+4,,AUTO
         1 001713   200012 633500                    EPPR3   BUF$,,AUTO
         1 001714   200070 453500                    STP3    TEMP$+3,,AUTO
         1 001715   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 001716   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 001717   000000 701000 xent               TSX1    TMB$BUF_DEALLOC
         1 001720   000000 011000                    NOP     0

      487     6797    4                  END;

   6797  1 001721   004104 710000 1                  TRA     LOG_IT

      488     6798    3             CASE(%CPU##);

      489     6799    3               IF S_MPSTATE(CPUX) = %SS_REL# THEN GOTO RETURN_RESULT;

   6799  1 001722   200016 721100                    LXL1    CPUX,,AUTO
         1 001723   000000 235011 xsym               LDA     S_MPSTATE,X1
         1 001724   000003 115007                    CMPA    3,DL
         1 001725   004206 600000 1                  TZE     RETURN_RESULT

      490     6800    3               IF S_MPSTATE(CPUX) ~= %SS_STOP# THEN

   6800  1 001726   000000 115003                    CMPA    0,DU
         1 001727   004402 601000 1                  TNZ     ERR_CPUNOTSTOP

      491     6801    3                  GOTO ERR_CPUNOTSTOP;
      492     6802    3               H_DPS8000_SCU_CONF_REG.PORTS(S_PORTNR(CPUX)) = '0'B;

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:86   
   6802  1 001730   000000 235011 xsym               LDA     S_PORTNR,X1
         1 001731   003005 060400                    CSL     bolr='003'O
         1 001732   000002 000001 xsym               BDSC    B_VECTNIL+2              by=0,bit=0,n=1
         1 001733   000000 610001 xsym               BDSC    H_DPS8000_SCU_CONF_REG,A by=3,bit=1,n=1

      493     6803    3               CALL HFC$SSCR(B$SCU$,8,H_DPS8000_SCU_CONF_REG);

   6803  1 001734   000006 630400 2                  EPPR0   6
         1 001735   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 001736   000000 701000 xent               TSX1    HFC$SSCR
         1 001737   000000 011000                    NOP     0

      494     6804    3               CALL TMB$BUF_ALLOC (BUF$,BUFX,DQH$) ALTRET(ERR_RELEASE);

   6804  1 001740   200020 630500                    EPPR0   DQH$,,AUTO
         1 001741   200072 450500                    STP0    TEMP$+5,,AUTO
         1 001742   200013 631500                    EPPR1   BUFX,,AUTO
         1 001743   200071 451500                    STP1    TEMP$+4,,AUTO
         1 001744   200012 633500                    EPPR3   BUF$,,AUTO
         1 001745   200070 453500                    STP3    TEMP$+3,,AUTO
         1 001746   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 001747   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 001750   000000 701000 xent               TSX1    TMB$BUF_ALLOC
         1 001751   004406 702000 1                  TSX2    ERR_RELEASE

      495     6805    3               CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_SCU_OFF#,BUFX,S_PORTNR(CPUX))

   6805  1 001752   200016 720100                    LXL0    CPUX,,AUTO
         1 001753   000000 630410 xsym               EPPR0   S_PORTNR,X0
         1 001754   200073 450500                    STP0    TEMP$+6,,AUTO
         1 001755   200013 631500                    EPPR1   BUFX,,AUTO
         1 001756   200072 451500                    STP1    TEMP$+5,,AUTO
         1 001757   000011 236000 2                  LDQ     9
         1 001760   200020 235100                    LDA     DQH$,,AUTO
         1 001761   200070 757100                    STAQ    TEMP$+3,,AUTO
         1 001762   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 001763   000022 631400 xsym               EPPR1   B_VECTNIL+18
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:87   
         1 001764   000000 701000 xent               TSX1    TMB$MCA
         1 001765   004456 702000 1                  TSX2    SWITCH_REL_FAILED

      496     6806    3                 ALTRET(SWITCH_REL_FAILED);
      497     6807    3               S_MPSTATE(CPUX) = %SS_REL#;

   6807  1 001766   000003 235007                    LDA     3,DL
         1 001767   200016 720100                    LXL0    CPUX,,AUTO
         1 001770   000000 755010 xsym               STA     S_MPSTATE,X0

      498     6808    3               CALL TMB$BUF_DEALLOC(BUF$,BUFX);

   6808  1 001771   200013 630500                    EPPR0   BUFX,,AUTO
         1 001772   200071 450500                    STP0    TEMP$+4,,AUTO
         1 001773   200012 631500                    EPPR1   BUF$,,AUTO
         1 001774   200070 451500                    STP1    TEMP$+3,,AUTO
         1 001775   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 001776   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 001777   000000 701000 xent               TSX1    TMB$BUF_DEALLOC
         1 002000   000000 011000                    NOP     0
         1 002001   004104 710000 1                  TRA     LOG_IT

      499     6809    3             CASE(%SCU##);

      500     6810    4               IF NOT H_RPM_FLG THEN DO;

   6810  1 002002   000000 234000 xsym               SZN     H_RPM_FLG
         1 002003   002010 604000 1                  TMI     s:6814

      501     6811    4                  ERR = %E$SCUCMDNOTVALID;

   6811  1 002004   003251 235007                    LDA     1705,DL
         1 002005   200005 471500                    LDP1    @ERR,,AUTO
         1 002006   100000 755100                    STA     0,,PR1

      502     6812    4                  GOTO ERR_RETURN;

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:88   
   6812  1 002007   004325 710000 1                  TRA     ERR_RETURN

      503     6813    4                  END;
      504     6814    3               IF S_PNO ~=0 THEN

   6814  1 002010   000000 235000 xsym               LDA     S_PNO
         1 002011   002015 600000 1                  TZE     s:6816

      505     6815    3                 CALL SSS$BLOCKM;

   6815  1 002012   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 002013   000000 701000 xent               TSX1    SSS$BLOCKM
         1 002014   000000 011000                    NOP     0

      506     6816    3               FIRST_PAGE = H_DPS8000_SCU_INFO.LOWER_BOUND(SCUX);

   6816  1 002015   200062 235100                    LDA     SCUX,,AUTO
         1 002016   000001 735000                    ALS     1
         1 002017   000000 236005 xsym               LDQ     H_DPS8000_SCU_INFO,AL
         1 002020   000022 772000                    QRL     18
         1 002021   200044 756100                    STQ     FIRST_PAGE,,AUTO

      507     6817    3               LAST_PAGE = H_DPS8000_SCU_INFO.UPPER_BOUND(SCUX);

   6817  1 002022   000000 236005 xsym               LDQ     H_DPS8000_SCU_INFO,AL
         1 002023   777777 376007                    ANQ     -1,DL
         1 002024   200052 756100                    STQ     LAST_PAGE,,AUTO

      508     6818    3               H_DPS8000_SCU_INFO.SCU_STATUS.REL_IN_PROGRESS(SCUX) = '1'B;

   6818  1 002025   100000 236007                    LDQ     32768,DL
         1 002026   000001 256005 xsym               ORSQ    H_DPS8000_SCU_INFO+1,AL

      509     6819    3               CALL FMC$RELSCU(FIRST_PAGE,LAST_PAGE,REL_PAGE);

   6819  1 002027   200060 630500                    EPPR0   REL_PAGE,,AUTO
         1 002030   200072 450500                    STP0    TEMP$+5,,AUTO
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:89   
         1 002031   200052 631500                    EPPR1   LAST_PAGE,,AUTO
         1 002032   200071 451500                    STP1    TEMP$+4,,AUTO
         1 002033   200044 633500                    EPPR3   FIRST_PAGE,,AUTO
         1 002034   200070 453500                    STP3    TEMP$+3,,AUTO
         1 002035   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 002036   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 002037   000000 701000 xent               TSX1    FMC$RELSCU
         1 002040   000000 011000                    NOP     0

      510     6820    3               H_DPS8000_SCU_INFO.PAGES(SCUX) = H_DPS8000_SCU_INFO.PAGES(SCUX) -
              6820                        REL_PAGE;

   6820  1 002041   200062 235100                    LDA     SCUX,,AUTO
         1 002042   000001 735000                    ALS     1
         1 002043   000001 236005 xsym               LDQ     H_DPS8000_SCU_INFO+1,AL
         1 002044   000022 772000                    QRL     18
         1 002045   200060 136100                    SBLQ    REL_PAGE,,AUTO
         1 002046   000000 620006                    EAX0    0,QL
         1 002047   000001 740005 xsym               STX0    H_DPS8000_SCU_INFO+1,AL

      511     6821    3               CALL HFA$STOPCPU;

   6821  1 002050   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 002051   000000 701000 xent               TSX1    HFA$STOPCPU
         1 002052   000000 011000                    NOP     0

      512     6822    3               CALL MMB$RELMEM(FIRST_PAGE,LAST_PAGE,REL_PAGE);

   6822  1 002053   200060 630500                    EPPR0   REL_PAGE,,AUTO
         1 002054   200072 450500                    STP0    TEMP$+5,,AUTO
         1 002055   200052 631500                    EPPR1   LAST_PAGE,,AUTO
         1 002056   200071 451500                    STP1    TEMP$+4,,AUTO
         1 002057   200044 633500                    EPPR3   FIRST_PAGE,,AUTO
         1 002060   200070 453500                    STP3    TEMP$+3,,AUTO
         1 002061   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 002062   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 002063   000000 701000 xent               TSX1    MMB$RELMEM
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:90   
         1 002064   000000 011000                    NOP     0

      513     6823    3               H_DPS8000_SCU_INFO.PAGES(SCUX) = H_DPS8000_SCU_INFO.PAGES(SCUX) -
              6823                        REL_PAGE;

   6823  1 002065   200062 235100                    LDA     SCUX,,AUTO
         1 002066   000001 735000                    ALS     1
         1 002067   000001 236005 xsym               LDQ     H_DPS8000_SCU_INFO+1,AL
         1 002070   000022 772000                    QRL     18
         1 002071   200060 136100                    SBLQ    REL_PAGE,,AUTO
         1 002072   000000 620006                    EAX0    0,QL
         1 002073   000001 740005 xsym               STX0    H_DPS8000_SCU_INFO+1,AL

      514     6824    4               IF H_DPS8000_SCU_INFO.PAGES(SCUX) = 0  THEN DO;

   6824  1 002074   002231 601000 1                  TNZ     s:6850

      515     6825    4                  H_DPS8000_SCU_INFO.SCU_STATUS.REL_BIT(SCUX) = '1'B;

   6825  1 002075   200000 236007                    LDQ     65536,DL
         1 002076   000001 256005 xsym               ORSQ    H_DPS8000_SCU_INFO+1,AL

      516     6826    4                  H_DPS8000_SCU_INFO.SCU_STATUS.REL_IN_PROGRESS(SCUX) = '0'B;

   6826  1 002077   000012 236000 2                  LDQ     10
         1 002100   000001 356005 xsym               ANSQ    H_DPS8000_SCU_INFO+1,AL

      517     6827    4                  MM_PCORE = MM_PCORE - MM_GAPSZ - REL_PAGE;

   6827  1 002101   000000 236000 xsym               LDQ     MM_PCORE
         1 002102   000000 136000 xsym               SBLQ    MM_GAPSZ
         1 002103   200060 136100                    SBLQ    REL_PAGE,,AUTO
         1 002104   000000 756000 xsym               STQ     MM_PCORE

      518     6828    4                  CALL HFC$RCONF_8000;

   6828  1 002105   000002 631400 xsym               EPPR1   B_VECTNIL+2
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:91   
         1 002106   000000 701000 xent               TSX1    HFC$RCONF_8000
         1 002107   000000 011000                    NOP     0

      519     6829    4                  H_DPS8000_CPU_CONF_REG.PORT_B_ENABLED = '0'B;

   6829  1 002110   000013 236000 2                  LDQ     11
         1 002111   000000 356000 xsym               ANSQ    H_DPS8000_CPU_CONF_REG

      520     6830    4                  CALL HFC$SCONF_8000;

   6830  1 002112   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 002113   000000 701000 xent               TSX1    HFC$SCONF_8000
         1 002114   000000 011000                    NOP     0

      521     6831    4                  CALL HFA$STARTCPU;

   6831  1 002115   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 002116   000000 701000 xent               TSX1    HFA$STARTCPU
         1 002117   000000 011000                    NOP     0

      522     6832    4                  CALL TMB$BUF_ALLOC (BUF$,BUFX,DQH$) ALTRET(ERR_RELEASE);

   6832  1 002120   200020 630500                    EPPR0   DQH$,,AUTO
         1 002121   200072 450500                    STP0    TEMP$+5,,AUTO
         1 002122   200013 631500                    EPPR1   BUFX,,AUTO
         1 002123   200071 451500                    STP1    TEMP$+4,,AUTO
         1 002124   200012 633500                    EPPR3   BUF$,,AUTO
         1 002125   200070 453500                    STP3    TEMP$+3,,AUTO
         1 002126   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 002127   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 002130   000000 701000 xent               TSX1    TMB$BUF_ALLOC
         1 002131   004406 702000 1                  TSX2    ERR_RELEASE

      523     6833    5                  IF SCUX = 1 THEN DO;

   6833  1 002132   200062 235100                    LDA     SCUX,,AUTO
         1 002133   000001 115007                    CMPA    1,DL
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:92   
         1 002134   002167 601000 1                  TNZ     s:6841

      524     6834    5                    CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_CPU_OFF#,BUFX,0)

   6834  1 002135   000014 236000 2                  LDQ     12
         1 002136   200073 756100                    STQ     TEMP$+6,,AUTO
         1 002137   200013 630500                    EPPR0   BUFX,,AUTO
         1 002140   200072 450500                    STP0    TEMP$+5,,AUTO
         1 002141   000015 236000 2                  LDQ     13
         1 002142   200020 235100                    LDA     DQH$,,AUTO
         1 002143   200070 757100                    STAQ    TEMP$+3,,AUTO
         1 002144   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 002145   000022 631400 xsym               EPPR1   B_VECTNIL+18
         1 002146   000000 701000 xent               TSX1    TMB$MCA
         1 002147   004456 702000 1                  TSX2    SWITCH_REL_FAILED

      525     6835    5                      ALTRET(SWITCH_REL_FAILED);
      526     6836    5                    IF H_DPS8000_SCU_CONF_REG.PORTS(5) = '1'B THEN

   6836  1 002150   000000 236000 xsym               LDQ     H_DPS8000_SCU_CONF_REG
         1 002151   000004 316007                    CANQ    4,DL
         1 002152   002220 600000 1                  TZE     s:6847

      527     6837    5                      CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_CPU_OFF#,BUFX,2)

   6837  1 002153   000016 236000 2                  LDQ     14
         1 002154   200073 756100                    STQ     TEMP$+6,,AUTO
         1 002155   200013 630500                    EPPR0   BUFX,,AUTO
         1 002156   200072 450500                    STP0    TEMP$+5,,AUTO
         1 002157   000015 236000 2                  LDQ     13
         1 002160   200020 235100                    LDA     DQH$,,AUTO
         1 002161   200070 757100                    STAQ    TEMP$+3,,AUTO
         1 002162   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 002163   000022 631400 xsym               EPPR1   B_VECTNIL+18
         1 002164   000000 701000 xent               TSX1    TMB$MCA
         1 002165   004456 702000 1                  TSX2    SWITCH_REL_FAILED

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:93   
      528     6838    5                        ALTRET(SWITCH_REL_FAILED);
      529     6839    5                    END;

   6839  1 002166   002220 710000 1                  TRA     s:6847

      530     6840    5                  ELSE DO;

      531     6841    5                    CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_CPU_OFF#,BUFX,1)

   6841  1 002167   000017 236000 2                  LDQ     15
         1 002170   200073 756100                    STQ     TEMP$+6,,AUTO
         1 002171   200013 630500                    EPPR0   BUFX,,AUTO
         1 002172   200072 450500                    STP0    TEMP$+5,,AUTO
         1 002173   000015 236000 2                  LDQ     13
         1 002174   200020 235100                    LDA     DQH$,,AUTO
         1 002175   200070 757100                    STAQ    TEMP$+3,,AUTO
         1 002176   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 002177   000022 631400 xsym               EPPR1   B_VECTNIL+18
         1 002200   000000 701000 xent               TSX1    TMB$MCA
         1 002201   004456 702000 1                  TSX2    SWITCH_REL_FAILED

      532     6842    5                      ALTRET(SWITCH_REL_FAILED);
      533     6843    5                    IF H_DPS8000_SCU_CONF_REG.PORTS(7) = '1'B THEN

   6843  1 002202   000000 236000 xsym               LDQ     H_DPS8000_SCU_CONF_REG
         1 002203   000001 316007                    CANQ    1,DL
         1 002204   002220 600000 1                  TZE     s:6847

      534     6844    5                      CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_CPU_OFF#,BUFX,3)

   6844  1 002205   000001 236000 2                  LDQ     1
         1 002206   200073 756100                    STQ     TEMP$+6,,AUTO
         1 002207   200013 630500                    EPPR0   BUFX,,AUTO
         1 002210   200072 450500                    STP0    TEMP$+5,,AUTO
         1 002211   000015 236000 2                  LDQ     13
         1 002212   200020 235100                    LDA     DQH$,,AUTO
         1 002213   200070 757100                    STAQ    TEMP$+3,,AUTO
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:94   
         1 002214   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 002215   000022 631400 xsym               EPPR1   B_VECTNIL+18
         1 002216   000000 701000 xent               TSX1    TMB$MCA
         1 002217   004456 702000 1                  TSX2    SWITCH_REL_FAILED

      535     6845    5                        ALTRET(SWITCH_REL_FAILED);
      536     6846    5                    END;

      537     6847    4                  CALL TMB$BUF_DEALLOC(BUF$,BUFX);

   6847  1 002220   200013 630500                    EPPR0   BUFX,,AUTO
         1 002221   200071 450500                    STP0    TEMP$+4,,AUTO
         1 002222   200012 631500                    EPPR1   BUF$,,AUTO
         1 002223   200070 451500                    STP1    TEMP$+3,,AUTO
         1 002224   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 002225   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 002226   000000 701000 xent               TSX1    TMB$BUF_DEALLOC
         1 002227   000000 011000                    NOP     0

      538     6848    4                  END;

   6848  1 002230   004104 710000 1                  TRA     LOG_IT

      539     6849    4               ELSE DO;

      540     6850    4                 CALL HFA$STARTCPU;

   6850  1 002231   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 002232   000000 701000 xent               TSX1    HFA$STARTCPU
         1 002233   000000 011000                    NOP     0

      541     6851    4                 ERR = %E$SCUPAGESINUSE;

   6851  1 002234   003250 235007                    LDA     1704,DL
         1 002235   200005 470500                    LDP0    @ERR,,AUTO
         1 002236   000000 755100                    STA     0,,PR0

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:95   
      542     6852    4                 ALTRETURN;

   6852  1 002237   000000 702200 xent               TSX2  ! X66_AALT

      543     6853    4                 END;
      544     6854    3               END;                        /* CASE SYSCON_V.COMPONENT            */

   6854  1 002240   004104 710000 1                  TRA     LOG_IT

      545     6855
      546     6856
      547     6857
      548     6858    2            CASE(%RETURN#);

      549     6859    3              DO CASE(SYSCON_V.COMPONENT);

   6859  1 002241   000000 220100                    LDX0    0,,PR0
         1 002242   000777 360003                    ANX0    511,DU
         1 002243   000010 100003                    CMPX0   8,DU
         1 002244   002246 602010 1                  TNC     s:6859+5,X0
         1 002245   004104 710000 1                  TRA     LOG_IT
         1 002246   004012 710000 1                  TRA     s:7150
         1 002247   002256 710000 1                  TRA     s:6864
         1 002250   002357 710000 1                  TRA     s:6899
         1 002251   002627 710000 1                  TRA     s:6967
         1 002252   002743 710000 1                  TRA     s:6994
         1 002253   003015 710000 1                  TRA     s:7014
         1 002254   003437 710000 1                  TRA     s:7092
         1 002255   003530 710000 1                  TRA     s:7104

      550     6860        /**/
      551     6861        /* RETURN CHANNEL */
      552     6862        /**/
      553     6863    3               CASE(%CHANNEL#);

      554     6864    3                 IF DQH.MPC$ = ADDR(NIL) THEN   /* FEP and console */

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:96   
   6864  1 002256   200020 471500                    LDP1    DQH$,,AUTO
         1 002257   100015 236100                    LDQ     13,,PR1
         1 002260   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 002261   004342 600000 1                  TZE     ERR_NOPARTRETCHAN

      555     6865    3                    GOTO ERR_NOPARTRETCHAN;
      556     6866    3                 IF NOT DQH.STATUS.SYSCON_PART THEN

   6866  1 002262   100001 236100                    LDQ     1,,PR1
         1 002263   002000 316003                    CANQ    1024,DU
         1 002264   004206 600000 1                  TZE     RETURN_RESULT

      557     6867    3                    GOTO RETURN_RESULT;
      558     6868    3                 IF DQH.STATUS.TND~=0 THEN

   6868  1 002265   074000 316003                    CANQ    30720,DU
         1 002266   004372 601000 1                  TNZ     ERR_SCNTDUSER

      559     6869    3                    GOTO ERR_SCNTDUSER;
      560     6870    3                 IF NI$IOM$(DQH.IOCHAN.IOM)->IOM.STATUS.SYSCON_PART THEN

   6870  1 002267   100001 236100                    LDQ     1,,PR1
         1 002270   000031 772000                    QRL     25
         1 002271   000003 376007                    ANQ     3,DL
         1 002272   000000 473406 xsym               LDP3    NI$IOM$,QL
         1 002273   300003 236100                    LDQ     3,,PR3
         1 002274   000020 316007                    CANQ    16,DL
         1 002275   004346 601000 1                  TNZ     ERR_IOMDOWN

      561     6871    3                    GOTO ERR_IOMDOWN;
      562     6872    3                 DQH.STATUS.SYSCON_PART = '0'B;

   6872  1 002276   000005 236000 2                  LDQ     5
         1 002277   100001 356100                    ANSQ    1,,PR1

      563     6873    4                 IF NOT DQH.STATUS.MSOS_PART THEN DO;

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:97   
   6873  1 002300   200020 471500                    LDP1    DQH$,,AUTO
         1 002301   100001 430100                    FSZN    1,,PR1
         1 002302   004104 604000 1                  TMI     LOG_IT

      564     6874                         %LOCK (G#=SQH.GATE);

   6875  1 002303   200063 630500                    EPPR0   SQH$,,AUTO
         1 002304   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 002305   000000 701000 xent               TSX1    HFC$LOCK
         1 002306   000000 011000                    NOP     0

      565     6877    4                    DQH.STATUS.DOWN = '0'B;

   6877  1 002307   200020 470500                    LDP0    DQH$,,AUTO
         1 002310   000004 236000 2                  LDQ     4
         1 002311   000001 356100                    ANSQ    1,,PR0

      566     6878    4                    IF  DQH.MPC$->DCT.DQH$ = ADDR(NIL)

   6878  1 002312   200020 470500                    LDP0    DQH$,,AUTO
         1 002313   000015 471500                    LDP1    13,,PR0
         1 002314   100023 236100                    LDQ     19,,PR1
         1 002315   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 002316   002322 601000 1                  TNZ     s:6881

      567     6879    4                    THEN
      568     6880    4                        DQH.MPC$->DCT.DQH$ = DQH$ ;

   6880  1 002317   200020 236100                    LDQ     DQH$,,AUTO
         1 002320   100023 756100                    STQ     19,,PR1
         1 002321   002334 710000 1                  TRA     s:6886

      569     6881    4                    ELSE IF  DQH.MPC$->DCT.DQH$->DQH.STATUS.DOWN

   6881  1 002322   100023 473500                    LDP3    19,,PR1
         1 002323   300001 236100                    LDQ     1,,PR3
         1 002324   200000 316003                    CANQ    65536,DU
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:98   
         1 002325   002334 600000 1                  TZE     s:6886
         1 002326   100035 236100                    LDQ     29,,PR1
         1 002327   777000 376003                    ANQ     -512,DU
         1 002330   010000 116003                    CMPQ    4096,DU
         1 002331   002334 600000 1                  TZE     s:6886

      570     6882    4                         AND DQH.MPC$->DCT.MPC.TYPE ~= %DV_AP
      571     6883    4                    THEN
      572     6884    4                       DQH.MPC$->DCT.DQH$ = DQH$;

   6884  1 002332   200020 236100                    LDQ     DQH$,,AUTO
         1 002333   100023 756100                    STQ     19,,PR1

      573     6885                         %UNLOCK(G#=SQH.GATE);

   6886  1 002334   200063 630500                    EPPR0   SQH$,,AUTO
         1 002335   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 002336   000000 701000 xent               TSX1    HFC$UNLOCK
         1 002337   000000 011000                    NOP     0

      574     6888    4                    IF  DQH.MPC$->DCT.MPC.TYPE ~= %DV_AP  AND

   6888  1 002340   200020 470500                    LDP0    DQH$,,AUTO
         1 002341   000015 471500                    LDP1    13,,PR0
         1 002342   100035 236100                    LDQ     29,,PR1
         1 002343   777000 376003                    ANQ     -512,DU
         1 002344   010000 116003                    CMPQ    4096,DU
         1 002345   004104 600000 1                  TZE     LOG_IT
         1 002346   100027 234100                    SZN     23,,PR1
         1 002347   004104 604000 1                  TMI     LOG_IT

      575     6889    4                        NOT DQH.MPC$->DCT.STATUS.DOWN
      576     6890    5                    THEN DO  ;

      577     6891    5                        DQH.CHANSTATE.DOWN = '0'B ;

   6891  1 002350   000020 236000 2                  LDQ     16
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:99   
         1 002351   000020 356100                    ANSQ    16,,PR0

      578     6892    5                        CALL NIW$DQHSTART ( DQH ) ;

   6892  1 002352   200020 630500                    EPPR0   DQH$,,AUTO
         1 002353   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 002354   000000 701000 xent               TSX1    NIW$DQHSTART
         1 002355   000000 011000                    NOP     0

      579     6893    5                        END ;

      580     6894    4                    END;

   6894  1 002356   004104 710000 1                  TRA     LOG_IT

      581     6895    3               CASE(%DVC#);

      582     6896        /**/
      583     6897        /* RETURN DEVICE */
      584     6898        /**/
      585     6899    3                 DCT.TDUSER#=0;

   6899  1 002357   200017 471500                    LDP1    DCT$,,AUTO
         1 002360   000000 236003                    LDQ     0,DU
         1 002361   100027 552120                    STBQ    23,'20'O,PR1

      586     6900    3                 IF (NOT DCT.STATUS.DOWN AND DCT.STATUS.SYSCON_PART) OR

   6900  1 002362   100027 234100                    SZN     23,,PR1
         1 002363   002367 604000 1                  TMI     s:6900+5
         1 002364   100027 236100                    LDQ     23,,PR1
         1 002365   004000 316003                    CANQ    2048,DU
         1 002366   002372 601000 1                  TNZ     s:6902
         1 002367   100027 236100                    LDQ     23,,PR1
         1 002370   004000 316003                    CANQ    2048,DU
         1 002371   002375 601000 1                  TNZ     s:6905

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:100  
      587     6901    4                    NOT DCT.STATUS.SYSCON_PART THEN DO;

      588     6902    4                    DCT.STATUS.SYSCON_PART = '0'B;  /* cancel delayed part req */

   6902  1 002372   000021 236000 2                  LDQ     17
         1 002373   100027 356100                    ANSQ    23,,PR1

      589     6903    4                    GOTO RETURN_RESULT;

   6903  1 002374   004206 710000 1                  TRA     RETURN_RESULT

      590     6904    4                    END;
      591     6905    3                 IF DCT.STATUS.TND~=0 THEN

   6905  1 002375   170000 316003                    CANQ    61440,DU
         1 002376   004372 601000 1                  TNZ     ERR_SCNTDUSER

      592     6906    3                    GOTO ERR_SCNTDUSER;
      593     6907    3                 IF DCT.TYPE=%DV_MPC THEN

   6907  1 002377   100007 236100                    LDQ     7,,PR1
         1 002400   007700 376007                    ANQ     4032,DL
         1 002401   000700 116007                    CMPQ    448,DL
         1 002402   004362 600000 1                  TZE     ERR_SCNNOTDEV

      594     6908    3                    GOTO ERR_SCNNOTDEV;
      595     6909    4                 DO CASE(DCT.TYPE);

   6909  1 002403   100007 236100                    LDQ     7,,PR1
         1 002404   000006 772000                    QRL     6
         1 002405   000077 376007                    ANQ     63,DL
         1 002406   000014 116007                    CMPQ    12,DL
         1 002407   002411 602006 1                  TNC     s:6909+6,QL
         1 002410   002456 710000 1                  TRA     s:6925
         1 002411   002425 710000 1                  TRA     s:6911
         1 002412   002440 710000 1                  TRA     s:6918
         1 002413   002440 710000 1                  TRA     s:6918
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:101  
         1 002414   002440 710000 1                  TRA     s:6918
         1 002415   002456 710000 1                  TRA     s:6925
         1 002416   002456 710000 1                  TRA     s:6925
         1 002417   002456 710000 1                  TRA     s:6925
         1 002420   002456 710000 1                  TRA     s:6925
         1 002421   002440 710000 1                  TRA     s:6918
         1 002422   002456 710000 1                  TRA     s:6925
         1 002423   002456 710000 1                  TRA     s:6925
         1 002424   002451 710000 1                  TRA     s:6922

      596     6910    4                  CASE(%DV_SC);

      597     6911    4                    IF NI$IOM$(DCT.DQH$->DQH.IOCHAN.IOM)->IOM.STATUS.SYSCON_PART THEN

   6911  1 002425   100023 473500                    LDP3    19,,PR1
         1 002426   300001 236100                    LDQ     1,,PR3
         1 002427   000031 772000                    QRL     25
         1 002430   000003 376007                    ANQ     3,DL
         1 002431   000000 474406 xsym               LDP4    NI$IOM$,QL
         1 002432   400003 236100                    LDQ     3,,PR4
         1 002433   000020 316007                    CANQ    16,DL
         1 002434   004346 601000 1                  TNZ     ERR_IOMDOWN

      598     6912    4                       GOTO ERR_IOMDOWN;
      599     6913    5                    ELSE DO;

      600     6914    5                       DCT.DQH$->DQH.STATUS.SYSCON_PART = '0'B;

   6914  1 002435   000005 236000 2                  LDQ     5
         1 002436   300001 356100                    ANSQ    1,,PR3

      601     6915    5                       GOTO PATH_AVAILABLE;

   6915  1 002437   002523 710000 1                  TRA     PATH_AVAILABLE

      602     6916    5                       END;
      603     6917    4                  CASE(%DV_LP,%DV_CR,%DV_CP,%DV_AP);
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:102  

      604     6918    4                    IF NOT DCT.DQH$->DQH.STATUS.SYSCON_PART THEN

   6918  1 002440   100023 473500                    LDP3    19,,PR1
         1 002441   300001 236100                    LDQ     1,,PR3
         1 002442   002000 316003                    CANQ    1024,DU
         1 002443   002517 601000 1                  TNZ     s:6940

      605     6919    4                       IF NOT DCT.DQH$->DQH.MPC$->DCT.STATUS.SYSCON_PART THEN

   6919  1 002444   300015 474500                    LDP4    13,,PR3
         1 002445   400027 236100                    LDQ     23,,PR4
         1 002446   004000 316003                    CANQ    2048,DU
         1 002447   002523 600000 1                  TZE     PATH_AVAILABLE
         1 002450   002517 710000 1                  TRA     s:6940

      606     6920    4                          GOTO PATH_AVAILABLE;
      607     6921    4                  CASE(%DV_OD);

      608     6922    4                    IF NOT DCT.DQH$->DQH.STATUS.SYSCON_PART THEN

   6922  1 002451   100023 473500                    LDP3    19,,PR1
         1 002452   300001 236100                    LDQ     1,,PR3
         1 002453   002000 316003                    CANQ    1024,DU
         1 002454   002523 600000 1                  TZE     PATH_AVAILABLE
         1 002455   002517 710000 1                  TRA     s:6940

      609     6923    4                       GOTO PATH_AVAILABLE;
      610     6924    4                  CASE(ELSE);

      611     6925    5                    DO I = 0 TO 1;

   6925  1 002456   200045 450100                    STZ     I,,AUTO

      612     6926    5                       J = 0;

   6926  1 002457   200051 450100                    STZ     J,,AUTO
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:103  

      613     6927    5                       IF SQH.MPC$(I) ~= ADDR(NIL) THEN

   6927  1 002460   200063 470500                    LDP0    SQH$,,AUTO
         1 002461   200045 720100                    LXL0    I,,AUTO
         1 002462   000005 236110                    LDQ     5,X0,PR0
         1 002463   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 002464   002512 600000 1                  TZE     s:6938

      614     6928    5                          IF NOT SQH.MPC$(I)->DCT.STATUS.SYSCON_PART  AND

   6928  1 002465   000005 471510                    LDP1    5,X0,PR0
         1 002466   100027 236100                    LDQ     23,,PR1
         1 002467   004000 316003                    CANQ    2048,DU
         1 002470   002512 601000 1                  TNZ     s:6938
         1 002471   002000 316003                    CANQ    1024,DU
         1 002472   002512 601000 1                  TNZ     s:6938
         1 002473   100027 234100                    SZN     23,,PR1
         1 002474   002512 604000 1                  TMI     s:6938
         1 002475   100006 236100                    LDQ     6,,PR1
         1 002476   002000 316007                    CANQ    1024,DL
         1 002477   002512 601000 1                  TNZ     s:6938
         1 002500   001000 316007                    CANQ    512,DL
         1 002501   002512 601000 1                  TNZ     s:6938

      615     6929    5                             NOT SQH.MPC$(I)->DCT.STATUS.MSOS_PART    AND
      616     6930    5                             NOT SQH.MPC$(I)->DCT.STATUS.DOWN         AND
      617     6931    5                             NOT SQH.MPC$(I)->DCT.DFLG.MPCSUSPENDED   AND
      618     6932    5                             NOT SQH.MPC$(I)->DCT.DFLG.MPCSTOP
      619     6933    5                          THEN
      620     6934    5                             CALL NIW$MPCDQH ( SQH.MPC$(I)->DCT, TEMP$ )

   6934  1 002502   200065 633500                    EPPR3   TEMP$,,AUTO
         1 002503   200071 453500                    STP3    TEMP$+4,,AUTO
         1 002504   200070 451500                    STP1    TEMP$+3,,AUTO
         1 002505   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 002506   000020 631400 xsym               EPPR1   B_VECTNIL+16
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:104  
         1 002507   000000 701000 xent               TSX1    NIW$MPCDQH
         1 002510   002512 702000 1                  TSX2    s:6938

      621     6935    6                             WHENRETURN DO ;

      622     6936    6                                 GOTO PATH_AVAILABLE ;

   6936  1 002511   002523 710000 1                  TRA     PATH_AVAILABLE

      623     6937    6                                 END ;
      624     6938    5                       END;

   6938  1 002512   200045 235100                    LDA     I,,AUTO
         1 002513   000001 035007                    ADLA    1,DL
         1 002514   200045 755100                    STA     I,,AUTO
         1 002515   000002 115007                    CMPA    2,DL
         1 002516   002457 602000 1                  TNC     s:6926

      625     6939    4                  END;

      626     6940    3                 ERR=%E$SCNNOPATH;

   6940  1 002517   001637 235007                    LDA     927,DL
         1 002520   200005 470500                    LDP0    @ERR,,AUTO
         1 002521   000000 755100                    STA     0,,PR0

      627     6941    3                 ALTRETURN;

   6941  1 002522   000000 702200 xent               TSX2  ! X66_AALT

   6940  1 002523                       PATH_AVAILA* null
      628     6942    3   PATH_AVAILABLE: ;
      629     6943    3                 DCT.STATUS.SYSCON_PART = '0'B;

   6943  1 002523   200017 470500                    LDP0    DCT$,,AUTO
         1 002524   000021 236000 2                  LDQ     17
         1 002525   000027 356100                    ANSQ    23,,PR0
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:105  

      630     6944    4                 IF NOT DCT.STATUS.MSOS_PART THEN DO;

   6944  1 002526   000027 236100                    LDQ     23,,PR0
         1 002527   002000 316003                    CANQ    1024,DU
         1 002530   004104 601000 1                  TNZ     LOG_IT

      631     6945    4                    IF DCT.RAT$ ~= ADDR(NIL) OR DCT.DFLG.CONSOLE THEN

   6945  1 002531   000005 236100                    LDQ     5,,PR0
         1 002532   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 002533   002537 601000 1                  TNZ     s:6946
         1 002534   000006 236100                    LDQ     6,,PR0
         1 002535   040000 316007                    CANQ    16384,DL
         1 002536   002546 600000 1                  TZE     s:6947

      632     6946    4                      CALL NKP$RTN(DCT,ERR) ALTRET(ERR_RETURN);

   6946  1 002537   200005 236100                    LDQ     @ERR,,AUTO
         1 002540   200017 235100                    LDA     DCT$,,AUTO
         1 002541   200070 757100                    STAQ    TEMP$+3,,AUTO
         1 002542   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 002543   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 002544   000000 701000 xent               TSX1    NKP$RTN
         1 002545   004325 702000 1                  TSX2    ERR_RETURN

      633     6947    5                    IF DCT.TYPE = %DV_DP THEN DO;

   6947  1 002546   200017 470500                    LDP0    DCT$,,AUTO
         1 002547   000007 236100                    LDQ     7,,PR0
         1 002550   007700 376007                    ANQ     4032,DL
         1 002551   000600 116007                    CMPQ    384,DL
         1 002552   002615 601000 1                  TNZ     BAG_IT

      634     6948    5                       DCT.DP.MIRROR = '0'B ;

   6948  1 002553   000100 100400                    MLR     fill='000'O
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:106  
         1 002554   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         1 002555   000036 000024                    ADSC9   30,,PR0                  cn=0,n=20

      635     6949    5                       CALL NIQ$GET(REQ$) ALTRET(BAG_IT);

   6949  1 002556   200061 631500                    EPPR1   REQ$,,AUTO
         1 002557   200070 451500                    STP1    TEMP$+3,,AUTO
         1 002560   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 002561   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 002562   000000 701000 xent               TSX1    NIQ$GET
         1 002563   002615 702000 1                  TSX2    BAG_IT

      636     6950    5                       REQ.DLA.DCTX = DCT.DCTX;

   6950  1 002564   200017 470500                    LDP0    DCT$,,AUTO
         1 002565   200061 471500                    LDP1    REQ$,,AUTO
         1 002566   000006 236100                    LDQ     6,,PR0
         1 002567   100001 676100                    ERQ     1,,PR1
         1 002570   777770 376003                    ANQ     -8,DU
         1 002571   100001 656100                    ERSQ    1,,PR1

      637     6951    5                       REQ.FC = %N_RQSTAT;

   6951  1 002572   200061 471500                    LDP1    REQ$,,AUTO
         1 002573   000001 236007                    LDQ     1,DL
         1 002574   100003 552104                    STBQ    3,'04'O,PR1

      638     6952    5                       REQ.BPMIR = '1'B ;

   6952  1 002575   200061 471500                    LDP1    REQ$,,AUTO
         1 002576   200000 236003                    LDQ     65536,DU
         1 002577   100034 256100                    ORSQ    28,,PR1

      639     6953    5                       REQ.NOALT='1'B;

   6953  1 002600   200061 471500                    LDP1    REQ$,,AUTO
         1 002601   100000 236007                    LDQ     32768,DL
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:107  
         1 002602   100004 256100                    ORSQ    4,,PR1

      640     6954    5                       REQ.OPFLG=OP_EA;

   6954  1 002603   200061 471500                    LDP1    REQ$,,AUTO
         1 002604   000040 236007                    LDQ     32,DL
         1 002605   100004 552104                    STBQ    4,'04'O,PR1

      641     6955    5                       REQ.EAENTRY=ENTADDR(TDP$SYSCONEA);

   6955  1 002606   000000 636000 xent               EAQ     TDP$SYSCONEA
         1 002607   200061 471500                    LDP1    REQ$,,AUTO
         1 002610   100023 756100                    STQ     19,,PR1

      642     6956    5                       CALL NIO$QUE(REQ);

   6956  1 002611   200061 630500                    EPPR0   REQ$,,AUTO
         1 002612   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 002613   000000 701000 xent               TSX1    NIO$QUE
         1 002614   000000 011000                    NOP     0

      643     6957    5                       END;                   /* IF TYPE = DP                       */

      644     6958    4      BAG_IT:
      645     6959    4                    IF DCT.DFLG.CONSOLE THEN

   6959  1 002615   200017 470500       BAG_IT       LDP0    DCT$,,AUTO
         1 002616   000006 236100                    LDQ     6,,PR0
         1 002617   040000 316007                    CANQ    16384,DL
         1 002620   002624 600000 1                  TZE     s:6961

      646     6960    4                       DCT.DQH$->DQH.STATUS.DOWN = '0'B;

   6960  1 002621   000023 471500                    LDP1    19,,PR0
         1 002622   000004 236000 2                  LDQ     4
         1 002623   100001 356100                    ANSQ    1,,PR1

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:108  
      647     6961    4                    DCT.STATUS.DOWN='0'B;

   6961  1 002624   000031 236000 xsym               LDQ     B_VECTNIL+25
         1 002625   000027 356100                    ANSQ    23,,PR0

      648     6962    4                    END;

   6962  1 002626   004104 710000 1                  TRA     LOG_IT

      649     6963    3               CASE(%MPC#);

      650     6964        /**/
      651     6965        /* RETURN MPC */
      652     6966        /**/
      653     6967    3                 IF NOT DCT.STATUS.SYSCON_PART THEN

   6967  1 002627   200017 471500                    LDP1    DCT$,,AUTO
         1 002630   100027 236100                    LDQ     23,,PR1
         1 002631   004000 316003                    CANQ    2048,DU
         1 002632   004206 600000 1                  TZE     RETURN_RESULT

      654     6968    3                    GOTO RETURN_RESULT;
      655     6969    3                 IF DCT.TYPE~=%DV_MPC THEN

   6969  1 002633   100007 236100                    LDQ     7,,PR1
         1 002634   007700 376007                    ANQ     4032,DL
         1 002635   000700 116007                    CMPQ    448,DL
         1 002636   004366 601000 1                  TNZ     ERR_SCNNOTMPC

      656     6970    3                    GOTO ERR_SCNNOTMPC;
      657     6971    3                 IF DCT.STATUS.TND~=0 THEN

   6971  1 002637   100027 236100                    LDQ     23,,PR1
         1 002640   170000 316003                    CANQ    61440,DU
         1 002641   004372 601000 1                  TNZ     ERR_SCNTDUSER

      658     6972    3                    GOTO ERR_SCNTDUSER;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:109  
      659     6973    4                 DO I = 0 TO %N_CHANSPERMPC-1;

   6973  1 002642   200045 450100                    STZ     I,,AUTO
         1 002643   002671 710000 1                  TRA     s:6977+3

      660     6974    4                    IF DCT.MPC.IOCHANX(I) ~= 0 AND

   6974  1 002644   200017 470500                    LDP0    DCT$,,AUTO
         1 002645   200045 235100                    LDA     I,,AUTO
         1 002646   000100 101505                    MRL     fill='000'O
         1 002647   000031 000001                    ADSC9   25,A,PR0                 cn=0,n=1
         1 002650   200070 000004                    ADSC9   TEMP$+3,,AUTO            cn=0,n=4
         1 002651   200070 236100                    LDQ     TEMP$+3,,AUTO
         1 002652   000000 116003                    CMPQ    0,DU
         1 002653   002666 600000 1                  TZE     s:6977
         1 002654   200045 236100                    LDQ     I,,AUTO
         1 002655   000011 402007                    MPY     9,DL
         1 002656   003100 061506                    CSR     bolr='003'O
         1 002657   000031 000002                    BDSC    25,Q,PR0                 by=0,bit=0,n=2
         1 002660   200071 000022                    BDSC    TEMP$+4,,AUTO            by=0,bit=0,n=18
         1 002661   200071 220100                    LDX0    TEMP$+4,,AUTO
         1 002662   000000 471410 xsym               LDP1    NI$IOM$,X0
         1 002663   100003 236100                    LDQ     3,,PR1
         1 002664   000020 316007                    CANQ    16,DL
         1 002665   002675 600000 1                  TZE     IOM_AVAILABLE

      661     6975    4                       NOT NI$IOM$(DCT.MPC.IOCHAN.IOM(I))->IOM.STATUS.SYSCON_PART THEN
      662     6976    4                       GOTO IOM_AVAILABLE;
      663     6977    4                    END;

   6977  1 002666   200045 235100                    LDA     I,,AUTO
         1 002667   000001 035007                    ADLA    1,DL
         1 002670   200045 755100                    STA     I,,AUTO
         1 002671   200045 235100                    LDA     I,,AUTO
         1 002672   000020 115007                    CMPA    16,DL
         1 002673   002644 602000 1                  TNC     s:6974

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:110  
      664     6978    3                 GOTO ERR_IOMDOWN;

   6978  1 002674   004346 710000 1                  TRA     ERR_IOMDOWN

   6973  1 002675                       IOM_AVAILAB* null
      665     6979    3   IOM_AVAILABLE: ;
      666     6980    3                 DCT.STATUS.SYSCON_PART = '0'B;

   6980  1 002675   000021 236000 2                  LDQ     17
         1 002676   000027 356100                    ANSQ    23,,PR0

      667     6981    3                 DCT.STATUS.DOWN = DCT.STATUS.MSOS_PART;

   6981  1 002677   000027 236100                    LDQ     23,,PR0
         1 002700   000007 736000                    QLS     7
         1 002701   000027 676100                    ERQ     23,,PR0
         1 002702   400000 376003                    ANQ     -131072,DU
         1 002703   000027 656100                    ERSQ    23,,PR0

      668     6982    4                 DO  I = 0 TO %N_CHANSPERMPC-1 ;

   6982  1 002704   200045 450100                    STZ     I,,AUTO
         1 002705   002737 710000 1                  TRA     s:6989+3

      669     6983    4                     TEMP$ = NI$CHT.DQH$(DCT.MPC.IOCHANX(I)) ;

   6983  1 002706   200017 470500                    LDP0    DCT$,,AUTO
         1 002707   200045 235100                    LDA     I,,AUTO
         1 002710   000100 101505                    MRL     fill='000'O
         1 002711   000031 000001                    ADSC9   25,A,PR0                 cn=0,n=1
         1 002712   200070 000002                    ADSC9   TEMP$+3,,AUTO            cn=0,n=2
         1 002713   200070 220100                    LDX0    TEMP$+3,,AUTO
         1 002714   200070 020100                    ADLX0   TEMP$+3,,AUTO
         1 002715   000000 471400 xsym               LDP1    NI$CHT$
         1 002716   100000 236110                    LDQ     0,X0,PR1
         1 002717   200065 756100                    STQ     TEMP$,,AUTO

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:111  
      670     6984    4                     IF  TEMP$ ~= ADDR(NIL)  THEN

   6984  1 002720   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 002721   002734 600000 1                  TZE     s:6989

      671     6985    5                         IF  NOT TEMP$->DQH.STATUS.DOWN  THEN  DO ;

   6985  1 002722   200065 473500                    LDP3    TEMP$,,AUTO
         1 002723   300001 236100                    LDQ     1,,PR3
         1 002724   200000 316003                    CANQ    65536,DU
         1 002725   002734 601000 1                  TNZ     s:6989

      672     6986    5                             TEMP$->DQH.CHANSTATE.DOWN = '0'B ;

   6986  1 002726   000020 236000 2                  LDQ     16
         1 002727   300020 356100                    ANSQ    16,,PR3

      673     6987    5                             CALL NIW$DQHSTART ( TEMP$->DQH ) ;

   6987  1 002730   200065 630500                    EPPR0   TEMP$,,AUTO
         1 002731   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 002732   000000 701000 xent               TSX1    NIW$DQHSTART
         1 002733   000000 011000                    NOP     0

      674     6988    5                             END ;

      675     6989    4                     END ;

   6989  1 002734   200045 235100                    LDA     I,,AUTO
         1 002735   000001 035007                    ADLA    1,DL
         1 002736   200045 755100                    STA     I,,AUTO
         1 002737   200045 235100                    LDA     I,,AUTO
         1 002740   000020 115007                    CMPA    16,DL
         1 002741   002706 602000 1                  TNC     s:6983
         1 002742   004104 710000 1                  TRA     LOG_IT

      676     6990    3               CASE(%FEP##);
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:112  

      677     6991        /**/
      678     6992        /* RETURN FEP */
      679     6993        /**/
      680     6994    3                 IF NI$IOM$(DQH.IOCHAN.IOM)->IOM.STATUS.SYSCON_PART THEN

   6994  1 002743   200020 471500                    LDP1    DQH$,,AUTO
         1 002744   100001 236100                    LDQ     1,,PR1
         1 002745   000031 772000                    QRL     25
         1 002746   000003 376007                    ANQ     3,DL
         1 002747   000000 473406 xsym               LDP3    NI$IOM$,QL
         1 002750   300003 236100                    LDQ     3,,PR3
         1 002751   000020 316007                    CANQ    16,DL
         1 002752   004346 601000 1                  TNZ     ERR_IOMDOWN

      681     6995    3                    GOTO ERR_IOMDOWN;
      682     6996    3                 CALL KIQ$UPRTFEP(FEI);

   6996  1 002753   200041 633500                    EPPR3   FEI,,AUTO
         1 002754   200070 453500                    STP3    TEMP$+3,,AUTO
         1 002755   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 002756   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 002757   000000 701000 xent               TSX1    KIQ$UPRTFEP
         1 002760   000000 011000                    NOP     0

      683     6997    3                 FEI$ = KI$FEI$(FEI);

   6997  1 002761   000000 470400 xsym               LDP0    KI_FEI$$
         1 002762   200041 720100                    LXL0    FEI,,AUTO
         1 002763   000000 236110                    LDQ     0,X0,PR0
         1 002764   200042 756100                    STQ     FEI$,,AUTO

      684     6998    3                 IF KI$FEI.PBST.PROB =KIER_PART

   6998  1 002765   200042 471500                    LDP1    FEI$,,AUTO
         1 002766   100015 221100                    LDX1    13,,PR1
         1 002767   000016 101003                    CMPX1   14,DU
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:113  
         1 002770   003003 601000 1                  TNZ     s:7006

      685     6999    4                 THEN DO;

      686     7000    4                      DQH.STATUS.DOWN='1'B;

   7000  1 002771   200020 473500                    LDP3    DQH$,,AUTO
         1 002772   200000 236003                    LDQ     65536,DU
         1 002773   300001 256100                    ORSQ    1,,PR3

      687     7001    4                      DQH.STATUS.SYSCON_PART = '1'B;

   7001  1 002774   200020 473500                    LDP3    DQH$,,AUTO
         1 002775   002000 236003                    LDQ     1024,DU
         1 002776   300001 256100                    ORSQ    1,,PR3

      688     7002    4                      DQH.STATE = %IDLE;

   7002  1 002777   200020 473500                    LDP3    DQH$,,AUTO
         1 003000   000000 236003                    LDQ     0,DU
         1 003001   300001 752101                    STCQ    1,'01'O,PR3

      689     7003    4                      GOTO ERR_NOPARTRETFEP;

   7003  1 003002   004332 710000 1                  TRA     ERR_NOPARTRETFEP

      690     7004    4                      END;
      691     7005    4                 ELSE DO;

      692     7006    4                      DQH.STATUS.DOWN='0'B;

   7006  1 003003   200020 473500                    LDP3    DQH$,,AUTO
         1 003004   000004 236000 2                  LDQ     4
         1 003005   300001 356100                    ANSQ    1,,PR3

      693     7007    4                      DQH.STATUS.SYSCON_PART = '0'B;

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:114  
   7007  1 003006   200020 473500                    LDP3    DQH$,,AUTO
         1 003007   000005 236000 2                  LDQ     5
         1 003010   300001 356100                    ANSQ    1,,PR3

      694     7008    4                      DQH.STATE = %BUSY;

   7008  1 003011   200020 473500                    LDP3    DQH$,,AUTO
         1 003012   000005 236007                    LDQ     5,DL
         1 003013   300001 752101                    STCQ    1,'01'O,PR3

      695     7009    4                      END;

   7009  1 003014   004104 710000 1                  TRA     LOG_IT

      696     7010    3               CASE(%IOM##);

      697     7011        /**/
      698     7012        /* RETURN AN IOM */
      699     7013        /**/
      700     7014    3                 IF NOT IOM.STATUS.SYSCON_PART THEN

   7014  1 003015   200047 471500                    LDP1    IOM$,,AUTO
         1 003016   100003 236100                    LDQ     3,,PR1
         1 003017   000020 316007                    CANQ    16,DL
         1 003020   004206 600000 1                  TZE     RETURN_RESULT

      701     7015    3                    GOTO RETURN_RESULT;
      702     7016    4                  IF HW_IMX THEN DO;

   7016  1 003021   000000 234000 xsym               SZN     HW_IMX
         1 003022   003125 605000 1                  TPL     s:7036

      703     7017    5                     IF NOT IOM.STATUS.DOWN THEN DO;

   7017  1 003023   000040 316007                    CANQ    32,DL
         1 003024   003034 601000 1                  TNZ     s:7021

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:115  
      704     7018    5                       IF H_DPS8000_SCU_CONF_REG.PORTS(IOM.IOM# * 2) = '0'B THEN

   7018  1 003025   100003 236100                    LDQ     3,,PR1
         1 003026   000027 772000                    QRL     23
         1 003027   000016 376007                    ANQ     14,DL
         1 003030   000000 066406                    CMPB    filb='0'B
         1 003031   000000 610001 xsym               BDSC    H_DPS8000_SCU_CONF_REG,Q by=3,bit=1,n=1
         1 003032   000002 000022 xsym               BDSC    B_VECTNIL+2              by=0,bit=0,n=18
         1 003033   004376 600000 1                  TZE     ERR_IOMNOTENABLED

      705     7019    5                         GOTO ERR_IOMNOTENABLED;
      706     7020    5                     END;

      707     7021    4                     I = IOM.ADDRESS;

   7021  1 003034   100003 236100                    LDQ     3,,PR1
         1 003035   000007 376007                    ANQ     7,DL
         1 003036   200045 756100                    STQ     I,,AUTO

      708     7022    4                     CALL TMB$BUF_ALLOC (BUF$,BUFX,DQH$) ALTRET(ERR_RETURN);

   7022  1 003037   200020 633500                    EPPR3   DQH$,,AUTO
         1 003040   200072 453500                    STP3    TEMP$+5,,AUTO
         1 003041   200013 634500                    EPPR4   BUFX,,AUTO
         1 003042   200071 454500                    STP4    TEMP$+4,,AUTO
         1 003043   200012 635500                    EPPR5   BUF$,,AUTO
         1 003044   200070 455500                    STP5    TEMP$+3,,AUTO
         1 003045   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003046   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 003047   000000 701000 xent               TSX1    TMB$BUF_ALLOC
         1 003050   004325 702000 1                  TSX2    ERR_RETURN

      709     7023        /* THIS CODE CHECKS THE STATE OF THE SCU THIS IMX IS ASSOCIATED WITH */
      710     7024        /* THERE IS NO EASY WAY TO GET THE STATE OF THE IMX               */
      711     7025        /* THE THEORY IS IF YOU CAN GET TO THE SCU THIS IMX IS ASSOCAITED */
      712     7026        /* WITH YOU CAN ALSO GET TO THE IMX                               */
      713     7027    4                     CALL TMB$MCA(DQH$->DQH,TM_OC_STATE_SCU#,BUFX,MOD(IOM#,2))
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:116  

   7027  1 003051   200046 236100                    LDQ     IOM#,,AUTO
         1 003052   000001 376007                    ANQ     1,DL
         1 003053   200070 756100                    STQ     TEMP$+3,,AUTO
         1 003054   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003055   200075 450500                    STP0    TEMP$+8,,AUTO
         1 003056   200013 631500                    EPPR1   BUFX,,AUTO
         1 003057   200074 451500                    STP1    TEMP$+7,,AUTO
         1 003060   000022 236000 2                  LDQ     18
         1 003061   200020 235100                    LDA     DQH$,,AUTO
         1 003062   200072 757100                    STAQ    TEMP$+5,,AUTO
         1 003063   200072 630500                    EPPR0   TEMP$+5,,AUTO
         1 003064   000022 631400 xsym               EPPR1   B_VECTNIL+18
         1 003065   000000 701000 xent               TSX1    TMB$MCA
         1 003066   004423 702000 1                  TSX2    SWITCH_RET_FAILED

      714     7028    4                       ALTRET(SWITCH_RET_FAILED);
      715     7029    4                     CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_SCU_ON#,BUFX,I)

   7029  1 003067   200045 630500                    EPPR0   I,,AUTO
         1 003070   200073 450500                    STP0    TEMP$+6,,AUTO
         1 003071   200013 631500                    EPPR1   BUFX,,AUTO
         1 003072   200072 451500                    STP1    TEMP$+5,,AUTO
         1 003073   000007 236000 2                  LDQ     7
         1 003074   200020 235100                    LDA     DQH$,,AUTO
         1 003075   200070 757100                    STAQ    TEMP$+3,,AUTO
         1 003076   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003077   000022 631400 xsym               EPPR1   B_VECTNIL+18
         1 003100   000000 701000 xent               TSX1    TMB$MCA
         1 003101   004423 702000 1                  TSX2    SWITCH_RET_FAILED

      716     7030    4                       ALTRET(SWITCH_RET_FAILED);
      717     7031    4                     IOM.STATUS.DOWN = '0'B;

   7031  1 003102   200047 470500                    LDP0    IOM$,,AUTO
         1 003103   000023 236000 2                  LDQ     19
         1 003104   000003 356100                    ANSQ    3,,PR0
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:117  

      718     7032    4                     CALL TMB$BUF_DEALLOC(BUF$,BUFX);

   7032  1 003105   200013 631500                    EPPR1   BUFX,,AUTO
         1 003106   200071 451500                    STP1    TEMP$+4,,AUTO
         1 003107   200012 633500                    EPPR3   BUF$,,AUTO
         1 003110   200070 453500                    STP3    TEMP$+3,,AUTO
         1 003111   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003112   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 003113   000000 701000 xent               TSX1    TMB$BUF_DEALLOC
         1 003114   000000 011000                    NOP     0

      719     7033    4                     H_DPS8000_SCU_CONF_REG.PORTS(I) = '1'B;

   7033  1 003115   200045 235100                    LDA     I,,AUTO
         1 003116   003005 060400                    CSL     bolr='003'O
         1 003117   000030 000001 xsym               BDSC    B_VECTNIL+24             by=0,bit=0,n=1
         1 003120   000000 610001 xsym               BDSC    H_DPS8000_SCU_CONF_REG,A by=3,bit=1,n=1

      720     7034    4                     CALL HFC$SSCR(B$SCU$,8,H_DPS8000_SCU_CONF_REG);

   7034  1 003121   000006 630400 2                  EPPR0   6
         1 003122   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 003123   000000 701000 xent               TSX1    HFC$SSCR
         1 003124   000000 011000                    NOP     0

      721     7035    4                     END;

      722     7036    3                 IOM.STATUS.SYSCON_PART = '0'B;

   7036  1 003125   200047 470500                    LDP0    IOM$,,AUTO
         1 003126   000024 236000 2                  LDQ     20
         1 003127   000003 356100                    ANSQ    3,,PR0

      723     7037    4                 IF HW_IMX OR HW_IOP THEN DO;

   7037  1 003130   000000 234000 xsym               SZN     HW_IMX
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:118  
         1 003131   003134 604000 1                  TMI     s:7038
         1 003132   000000 234000 xsym               SZN     HW_IOP
         1 003133   003200 605000 1                  TPL     s:7049

      724     7038    4                    DCT$ = N$DCT$(NI_MAINT_DCTX(IOM.IOM#));

   7038  1 003134   000003 236100                    LDQ     3,,PR0
         1 003135   000030 772000                    QRL     24
         1 003136   000007 376007                    ANQ     7,DL
         1 003137   000000 720006 xsym               LXL0    NI_MAINT_DCTX,QL
         1 003140   000000 471400 xsym               LDP1    N$DCT$$
         1 003141   100000 236110                    LDQ     0,X0,PR1
         1 003142   200017 756100                    STQ     DCT$,,AUTO

      725     7039    4                    DCT.STATUS.DOWN = '0'B;

   7039  1 003143   200017 473500                    LDP3    DCT$,,AUTO
         1 003144   000031 236000 xsym               LDQ     B_VECTNIL+25
         1 003145   300027 356100                    ANSQ    23,,PR3

      726     7040    4                    DCT.STATUS.SYSCON_PART = '0'B;

   7040  1 003146   000021 236000 2                  LDQ     17
         1 003147   300027 356100                    ANSQ    23,,PR3

      727     7041    4                    IF HW_IMX THEN

   7041  1 003150   000000 234000 xsym               SZN     HW_IMX
         1 003151   003160 605000 1                  TPL     s:7044

      728     7042    4                       CHANX = IOM.IOM# * %N_MAXCHANS + 3;

   7042  1 003152   000003 236100                    LDQ     3,,PR0
         1 003153   000021 772000                    QRL     17
         1 003154   001600 376007                    ANQ     896,DL
         1 003155   000003 036007                    ADLQ    3,DL
         1 003156   200015 756100                    STQ     CHANX,,AUTO
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:119  
         1 003157   003165 710000 1                  TRA     s:7045

      729     7043    4                    ELSE
      730     7044    4                       CHANX = IOM.IOM# * %N_MAXCHANS + 4;

   7044  1 003160   000003 236100                    LDQ     3,,PR0
         1 003161   000021 772000                    QRL     17
         1 003162   001600 376007                    ANQ     896,DL
         1 003163   000004 036007                    ADLQ    4,DL
         1 003164   200015 756100                    STQ     CHANX,,AUTO

      731     7045    4                    DQH$ = NI$CHT.DQH$(CHANX);

   7045  1 003165   200015 235100                    LDA     CHANX,,AUTO
         1 003166   000001 735000                    ALS     1
         1 003167   000000 474400 xsym               LDP4    NI$CHT$
         1 003170   400000 236105                    LDQ     0,AL,PR4
         1 003171   200020 756100                    STQ     DQH$,,AUTO

      732     7046    4                    DQH.STATUS.DOWN = '0'B;

   7046  1 003172   200020 475500                    LDP5    DQH$,,AUTO
         1 003173   000004 236000 2                  LDQ     4
         1 003174   500001 356100                    ANSQ    1,,PR5

      733     7047    4                    DQH.STATUS.SYSCON_PART = '0'B;

   7047  1 003175   200020 475500                    LDP5    DQH$,,AUTO
         1 003176   000005 236000 2                  LDQ     5
         1 003177   500001 356100                    ANSQ    1,,PR5

      734     7048    4                    END;

      735     7049    4                 IF NOT IOM.STATUS.MSOS_PART THEN DO;

   7049  1 003200   000003 236100                    LDQ     3,,PR0
         1 003201   000010 316007                    CANQ    8,DL
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:120  
         1 003202   003216 601000 1                  TNZ     s:7054

      736     7050    4                    IOM.STATUS.DOWN = '0'B;

   7050  1 003203   000023 236000 2                  LDQ     19
         1 003204   000003 356100                    ANSQ    3,,PR0

      737     7051    4                    I = IOM.ADDRESS;

   7051  1 003205   000003 236100                    LDQ     3,,PR0
         1 003206   000007 376007                    ANQ     7,DL
         1 003207   200045 756100                    STQ     I,,AUTO

      738     7052    4                    CALL HFB$ENAPORT (I);

   7052  1 003210   200045 631500                    EPPR1   I,,AUTO
         1 003211   200070 451500                    STP1    TEMP$+3,,AUTO
         1 003212   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003213   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 003214   000000 701000 xent               TSX1    HFB$ENAPORT
         1 003215   000000 011000                    NOP     0

      739     7053    4                    END;

      740     7054    4                 IF HW_IMX THEN DO;

   7054  1 003216   000000 234000 xsym               SZN     HW_IMX
         1 003217   004104 605000 1                  TPL     LOG_IT

      741     7055    5                    CALL TMB$BUF_ALLOC (BUF$,BUFX) WHENALTRETURN DO;

   7055  1 003220   200013 630500                    EPPR0   BUFX,,AUTO
         1 003221   200071 450500                    STP0    TEMP$+4,,AUTO
         1 003222   200012 631500                    EPPR1   BUF$,,AUTO
         1 003223   200070 451500                    STP1    TEMP$+3,,AUTO
         1 003224   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003225   000020 631400 xsym               EPPR1   B_VECTNIL+16
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:121  
         1 003226   000000 701000 xent               TSX1    TMB$BUF_ALLOC
         1 003227   003231 702000 1                  TSX2    s:7056
         1 003230   003235 710000 1                  TRA     s:7059

      742     7056    5                       ERR = %E$MCAINUSE;

   7056  1 003231   001665 235007                    LDA     949,DL
         1 003232   200005 470500                    LDP0    @ERR,,AUTO
         1 003233   000000 755100                    STA     0,,PR0

      743     7057    5                       GOTO ERR_RETURN;

   7057  1 003234   004325 710000 1                  TRA     ERR_RETURN

      744     7058    5                       END;
      745     7059    4                    CALL TMB$MCA(N$DCT$(NI_MAINT_DCTX(SYSCON_V.IOM))->DCT.DQH$->DQH,
              7059                             TM_OC_CONFIG#,BUFX)

   7059  1 003235   200003 470500                    LDP0    @SYSCON_V,,AUTO
         1 003236   000000 236100                    LDQ     0,,PR0
         1 003237   000011 772000                    QRL     9
         1 003240   000777 376007                    ANQ     511,DL
         1 003241   000000 720006 xsym               LXL0    NI_MAINT_DCTX,QL
         1 003242   000000 471400 xsym               LDP1    N$DCT$$
         1 003243   100000 473510                    LDP3    0,X0,PR1
         1 003244   300023 474500                    LDP4    19,,PR3
         1 003245   200013 635500                    EPPR5   BUFX,,AUTO
         1 003246   200072 455500                    STP5    TEMP$+5,,AUTO
         1 003247   000017 236000 2                  LDQ     15
         1 003250   200071 756100                    STQ     TEMP$+4,,AUTO
         1 003251   200070 454500                    STP4    TEMP$+3,,AUTO
         1 003252   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003253   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 003254   000000 701000 xent               TSX1    TMB$MCA
         1 003255   003257 702000 1                  TSX2    s:7061
         1 003256   003270 710000 1                  TRA     s:7064

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:122  
      746     7060    5                    WHENALTRETURN DO;

      747     7061    5                       CALL TMB$BUF_DEALLOC (BUF$,BUFX);

   7061  1 003257   200013 630500                    EPPR0   BUFX,,AUTO
         1 003260   200071 450500                    STP0    TEMP$+4,,AUTO
         1 003261   200012 631500                    EPPR1   BUF$,,AUTO
         1 003262   200070 451500                    STP1    TEMP$+3,,AUTO
         1 003263   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003264   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 003265   000000 701000 xent               TSX1    TMB$BUF_DEALLOC
         1 003266   000000 011000                    NOP     0

      748     7062    5                       GOTO ERR_RETURN;

   7062  1 003267   004325 710000 1                  TRA     ERR_RETURN

      749     7063    5                       END;
      750     7064    5                    DO IPC = 0 TO 15;

   7064  1 003270   200050 450100                    STZ     IPC,,AUTO

      751     7065    5                       DQH$ = ADDR(NIL);

   7065  1 003271   000001 236000 xsym               LDQ     B_VECTNIL+1
         1 003272   200020 756100                    STQ     DQH$,,AUTO

      752     7066    6                       IF MCA_CFG.LEVEL_1.STATE(IPC) > 7 THEN DO;

   7066  1 003273   200050 236100                    LDQ     IPC,,AUTO
         1 003274   000013 402007                    MPY     11,DL
         1 003275   200012 470500                    LDP0    BUF$,,AUTO
         1 003276   000100 101506                    MRL     fill='000'O
         1 003277   000026 400001                    ADSC9   22,Q,PR0                 cn=2,n=1
         1 003300   200070 000004                    ADSC9   TEMP$+3,,AUTO            cn=0,n=4
         1 003301   200070 236100                    LDQ     TEMP$+3,,AUTO
         1 003302   000010 116007                    CMPQ    8,DL
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:123  
         1 003303   003421 604000 1                  TMI     s:7088

      753     7067    6                          CHAN = SYSCON_V.IOM * %N_MAXCHANS + MCA_CFG.LEVEL_1.PRI_CHN(
              7067                                   IPC);

   7067  1 003304   200050 236100                    LDQ     IPC,,AUTO
         1 003305   000013 402007                    MPY     11,DL
         1 003306   000100 101506                    MRL     fill='000'O
         1 003307   000030 000001                    ADSC9   24,Q,PR0                 cn=0,n=1
         1 003310   200070 000004                    ADSC9   TEMP$+3,,AUTO            cn=0,n=4
         1 003311   200003 471500                    LDP1    @SYSCON_V,,AUTO
         1 003312   100000 236100                    LDQ     0,,PR1
         1 003313   000002 772000                    QRL     2
         1 003314   177600 376007                    ANQ     65408,DL
         1 003315   200070 036100                    ADLQ    TEMP$+3,,AUTO
         1 003316   200014 756100                    STQ     CHAN,,AUTO

      754     7068    7                          DO J = CHAN TO (CHAN + MCA_CFG.LEVEL_1.LOG_CHNS(IPC)-1);

   7068  1 003317   200051 756100                    STQ     J,,AUTO
         1 003320   003337 710000 1                  TRA     s:7074+3

      755     7069    7                             TDQH$ = NI$CHT$ -> NI$CHT.DQH$(J);

   7069  1 003321   200051 235100                    LDA     J,,AUTO
         1 003322   000001 735000                    ALS     1
         1 003323   000000 470400 xsym               LDP0    NI$CHT$
         1 003324   000000 236105                    LDQ     0,AL,PR0
         1 003325   200064 756100                    STQ     TDQH$,,AUTO

      756     7070    8                             IF TDQH$ ~= ADDR(NIL) THEN DO;

   7070  1 003326   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 003327   003334 600000 1                  TZE     s:7074

      757     7071    8                                DQH$ = TDQH$;

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:124  
   7071  1 003330   200020 756100                    STQ     DQH$,,AUTO

      758     7072    8                                DQH$ -> DQH.IPCNUM = IPC;

   7072  1 003331   200020 471500                    LDP1    DQH$,,AUTO
         1 003332   200050 236100                    LDQ     IPC,,AUTO
         1 003333   100020 552104                    STBQ    16,'04'O,PR1

      759     7073    8                                END;

      760     7074    7                             END;

   7074  1 003334   200051 236100                    LDQ     J,,AUTO
         1 003335   000001 036007                    ADLQ    1,DL
         1 003336   200051 756100                    STQ     J,,AUTO
         1 003337   200050 236100                    LDQ     IPC,,AUTO
         1 003340   000013 402007                    MPY     11,DL
         1 003341   200012 470500                    LDP0    BUF$,,AUTO
         1 003342   000100 101506                    MRL     fill='000'O
         1 003343   000030 200001                    ADSC9   24,Q,PR0                 cn=1,n=1
         1 003344   200070 000004                    ADSC9   TEMP$+3,,AUTO            cn=0,n=4
         1 003345   200070 236100                    LDQ     TEMP$+3,,AUTO
         1 003346   200014 036100                    ADLQ    CHAN,,AUTO
         1 003347   200051 116100                    CMPQ    J,,AUTO
         1 003350   003352 600000 1                  TZE     s:7075
         1 003351   003321 603000 1                  TRC     s:7069

      761     7075    6                          IF MCA_FW_LOAD(MCA_CFG.LEVEL_1.HARDWARE_ID(IPC)) AND

   7075  1 003352   200050 236100                    LDQ     IPC,,AUTO
         1 003353   000013 402007                    MPY     11,DL
         1 003354   000100 101506                    MRL     fill='000'O
         1 003355   000027 400001                    ADSC9   23,Q,PR0                 cn=2,n=1
         1 003356   200070 000004                    ADSC9   TEMP$+3,,AUTO            cn=0,n=4
         1 003357   200070 236100                    LDQ     TEMP$+3,,AUTO
         1 003360   000000 066406                    CMPB    filb='0'B
         1 003361   000000 000001 0                  BDSC    MCA_FW_LOAD,Q            by=0,bit=0,n=1
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:125  
         1 003362   000002 000022 xsym               BDSC    B_VECTNIL+2              by=0,bit=0,n=18
         1 003363   003421 600000 1                  TZE     s:7088
         1 003364   200020 236100                    LDQ     DQH$,,AUTO
         1 003365   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 003366   003421 600000 1                  TZE     s:7088

      762     7076    6                             DQH$ ~= ADDR(NIL) THEN
      763     7077    7                             DO CASE (DQH$ -> DQH.MPC$ -> DCT.TYPE);

   7077  1 003367   200020 471500                    LDP1    DQH$,,AUTO
         1 003370   100015 473500                    LDP3    13,,PR1
         1 003371   300007 236100                    LDQ     7,,PR3
         1 003372   000006 772000                    QRL     6
         1 003373   000077 376007                    ANQ     63,DL
         1 003374   000007 116007                    CMPQ    7,DL
         1 003375   003377 602006 1                  TNC     s:7077+8,QL
         1 003376   003421 710000 1                  TRA     s:7088
         1 003377   003421 710000 1                  TRA     s:7088
         1 003400   003417 710000 1                  TRA     s:7085
         1 003401   003421 710000 1                  TRA     s:7088
         1 003402   003414 710000 1                  TRA     s:7083
         1 003403   003411 710000 1                  TRA     s:7081
         1 003404   003421 710000 1                  TRA     s:7088
         1 003405   003406 710000 1                  TRA     s:7079

      764     7078    7                               CASE(%DV_DP);

      765     7079    7                                 DQH$->DQH.MPC$->DCT.MPC.FWNAME='IFDK';

   7079  1 003406   000004 236000 0                  LDQ     H_DPS8000_SPLIT_TABLE+3
         1 003407   300041 756100                    STQ     33,,PR3
         1 003410   003421 710000 1                  TRA     s:7088

      766     7080    7                               CASE(%DV_MT);

      767     7081    7                                 DQH$->DQH.MPC$->DCT.MPC.FWNAME='IFTP';

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:126  
   7081  1 003411   000005 236000 0                  LDQ     H_DPS8000_SPLIT_TABLE+4
         1 003412   300041 756100                    STQ     33,,PR3
         1 003413   003421 710000 1                  TRA     s:7088

      768     7082    7                               CASE(%DV_LP);

      769     7083    7                                 DQH$->DQH.MPC$->DCT.MPC.FWNAME='IPR5';

   7083  1 003414   000006 236000 0                  LDQ     H_DPS8000_SPLIT_TABLE+5
         1 003415   300041 756100                    STQ     33,,PR3
         1 003416   003421 710000 1                  TRA     s:7088

      770     7084    7                               CASE(%DV_CR);

      771     7085    7                                 DQH$->DQH.MPC$->DCT.MPC.FWNAME='ICRD';

   7085  1 003417   000007 236000 0                  LDQ     H_DPS8000_SPLIT_TABLE+6
         1 003420   300041 756100                    STQ     33,,PR3

      772     7086    7                             END;  /*CASE*/

      773     7087    6                          END;

      774     7088    5                       END;

   7088  1 003421   200050 235100                    LDA     IPC,,AUTO
         1 003422   000001 035007                    ADLA    1,DL
         1 003423   200050 755100                    STA     IPC,,AUTO
         1 003424   000020 115007                    CMPA    16,DL
         1 003425   003271 602000 1                  TNC     s:7065

      775     7089    4                    CALL TMB$BUF_DEALLOC (BUF$,BUFX);

   7089  1 003426   200013 631500                    EPPR1   BUFX,,AUTO
         1 003427   200071 451500                    STP1    TEMP$+4,,AUTO
         1 003430   200012 633500                    EPPR3   BUF$,,AUTO
         1 003431   200070 453500                    STP3    TEMP$+3,,AUTO
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:127  
         1 003432   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003433   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 003434   000000 701000 xent               TSX1    TMB$BUF_DEALLOC
         1 003435   000000 011000                    NOP     0

      776     7090    4                    END;

   7090  1 003436   004104 710000 1                  TRA     LOG_IT

      777     7091    3              CASE (%CPU##);

      778     7092    3                IF S_MPSTATE(CPUX) < %SS_REL# THEN

   7092  1 003437   200016 721100                    LXL1    CPUX,,AUTO
         1 003440   000000 235011 xsym               LDA     S_MPSTATE,X1
         1 003441   000003 115007                    CMPA    3,DL
         1 003442   004206 604000 1                  TMI     RETURN_RESULT

      779     7093    3                   GOTO RETURN_RESULT;
      780     7094    3                CALL TMB$BUF_ALLOC (BUF$,BUFX,DQH$) ALTRET(ERR_RELEASE);

   7094  1 003443   200020 631500                    EPPR1   DQH$,,AUTO
         1 003444   200072 451500                    STP1    TEMP$+5,,AUTO
         1 003445   200013 633500                    EPPR3   BUFX,,AUTO
         1 003446   200071 453500                    STP3    TEMP$+4,,AUTO
         1 003447   200012 634500                    EPPR4   BUF$,,AUTO
         1 003450   200070 454500                    STP4    TEMP$+3,,AUTO
         1 003451   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003452   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 003453   000000 701000 xent               TSX1    TMB$BUF_ALLOC
         1 003454   004406 702000 1                  TSX2    ERR_RELEASE

      781     7095    3                CALL TMB$MCA(DQH$->DQH,TM_OC_STATE_CPU#,BUFX,PHY_CPU)

   7095  1 003455   200057 630500                    EPPR0   PHY_CPU,,AUTO
         1 003456   200073 450500                    STP0    TEMP$+6,,AUTO
         1 003457   200013 631500                    EPPR1   BUFX,,AUTO
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:128  
         1 003460   200072 451500                    STP1    TEMP$+5,,AUTO
         1 003461   000025 236000 2                  LDQ     21
         1 003462   200020 235100                    LDA     DQH$,,AUTO
         1 003463   200070 757100                    STAQ    TEMP$+3,,AUTO
         1 003464   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003465   000022 631400 xsym               EPPR1   B_VECTNIL+18
         1 003466   000000 701000 xent               TSX1    TMB$MCA
         1 003467   004423 702000 1                  TSX2    SWITCH_RET_FAILED

      782     7096    3                  ALTRET(SWITCH_RET_FAILED);
      783     7097    3                CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_SCU_ON#,BUFX,S_PORTNR(CPUX))

   7097  1 003470   200016 720100                    LXL0    CPUX,,AUTO
         1 003471   000000 630410 xsym               EPPR0   S_PORTNR,X0
         1 003472   200073 450500                    STP0    TEMP$+6,,AUTO
         1 003473   200013 631500                    EPPR1   BUFX,,AUTO
         1 003474   200072 451500                    STP1    TEMP$+5,,AUTO
         1 003475   000007 236000 2                  LDQ     7
         1 003476   200020 235100                    LDA     DQH$,,AUTO
         1 003477   200070 757100                    STAQ    TEMP$+3,,AUTO
         1 003500   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003501   000022 631400 xsym               EPPR1   B_VECTNIL+18
         1 003502   000000 701000 xent               TSX1    TMB$MCA
         1 003503   004423 702000 1                  TSX2    SWITCH_RET_FAILED

      784     7098    3                  ALTRET(SWITCH_RET_FAILED);
      785     7099    3                H_DPS8000_SCU_CONF_REG.PORTS(S_PORTNR(CPUX)) = '1'B;

   7099  1 003504   200016 720100                    LXL0    CPUX,,AUTO
         1 003505   000000 235010 xsym               LDA     S_PORTNR,X0
         1 003506   003005 060400                    CSL     bolr='003'O
         1 003507   000030 000001 xsym               BDSC    B_VECTNIL+24             by=0,bit=0,n=1
         1 003510   000000 610001 xsym               BDSC    H_DPS8000_SCU_CONF_REG,A by=3,bit=1,n=1

      786     7100    3                CALL HFC$SSCR(B$SCU$,8,H_DPS8000_SCU_CONF_REG);

   7100  1 003511   000006 630400 2                  EPPR0   6
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:129  
         1 003512   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 003513   000000 701000 xent               TSX1    HFC$SSCR
         1 003514   000000 011000                    NOP     0

      787     7101    3                S_MPSTATE(CPUX) = %SS_STOP#;

   7101  1 003515   200016 720100                    LXL0    CPUX,,AUTO
         1 003516   000000 450010 xsym               STZ     S_MPSTATE,X0

      788     7102    3                CALL TMB$BUF_DEALLOC(BUF$,BUFX);

   7102  1 003517   200013 630500                    EPPR0   BUFX,,AUTO
         1 003520   200071 450500                    STP0    TEMP$+4,,AUTO
         1 003521   200012 631500                    EPPR1   BUF$,,AUTO
         1 003522   200070 451500                    STP1    TEMP$+3,,AUTO
         1 003523   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003524   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 003525   000000 701000 xent               TSX1    TMB$BUF_DEALLOC
         1 003526   000000 011000                    NOP     0
         1 003527   004104 710000 1                  TRA     LOG_IT

      789     7103    3             CASE(%SCU##);

      790     7104    4               IF NOT H_RPM_FLG THEN DO;

   7104  1 003530   000000 234000 xsym               SZN     H_RPM_FLG
         1 003531   003536 604000 1                  TMI     s:7108

      791     7105    4                  ERR = %E$SCUCMDNOTVALID;

   7105  1 003532   003251 235007                    LDA     1705,DL
         1 003533   200005 471500                    LDP1    @ERR,,AUTO
         1 003534   100000 755100                    STA     0,,PR1

      792     7106    4                  GOTO ERR_RETURN;

   7106  1 003535   004325 710000 1                  TRA     ERR_RETURN
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:130  

      793     7107    4                  END;
      794     7108    3               IF S_PNO ~= 0 THEN

   7108  1 003536   000000 235000 xsym               LDA     S_PNO
         1 003537   003543 600000 1                  TZE     s:7110

      795     7109    3                 CALL SSS$BLOCKM;

   7109  1 003540   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 003541   000000 701000 xent               TSX1    SSS$BLOCKM
         1 003542   000000 011000                    NOP     0

      796     7110    3               CALL TMB$BUF_ALLOC (BUF$,BUFX,DQH$) ALTRET(ERR_RELEASE);

   7110  1 003543   200020 630500                    EPPR0   DQH$,,AUTO
         1 003544   200072 450500                    STP0    TEMP$+5,,AUTO
         1 003545   200013 631500                    EPPR1   BUFX,,AUTO
         1 003546   200071 451500                    STP1    TEMP$+4,,AUTO
         1 003547   200012 633500                    EPPR3   BUF$,,AUTO
         1 003550   200070 453500                    STP3    TEMP$+3,,AUTO
         1 003551   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003552   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 003553   000000 701000 xent               TSX1    TMB$BUF_ALLOC
         1 003554   004406 702000 1                  TSX2    ERR_RELEASE

      797     7111    3               CALL TMB$MCA(DQH$->DQH,TM_OC_STATE_SCU#,BUFX,SCUX)

   7111  1 003555   200062 630500                    EPPR0   SCUX,,AUTO
         1 003556   200073 450500                    STP0    TEMP$+6,,AUTO
         1 003557   200013 631500                    EPPR1   BUFX,,AUTO
         1 003560   200072 451500                    STP1    TEMP$+5,,AUTO
         1 003561   000022 236000 2                  LDQ     18
         1 003562   200020 235100                    LDA     DQH$,,AUTO
         1 003563   200070 757100                    STAQ    TEMP$+3,,AUTO
         1 003564   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003565   000022 631400 xsym               EPPR1   B_VECTNIL+18
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:131  
         1 003566   000000 701000 xent               TSX1    TMB$MCA
         1 003567   004423 702000 1                  TSX2    SWITCH_RET_FAILED

      798     7112    3                 ALTRET(SWITCH_RET_FAILED);
      799     7113    3               CALL HFC$RCONF_8000;

   7113  1 003570   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 003571   000000 701000 xent               TSX1    HFC$RCONF_8000
         1 003572   000000 011000                    NOP     0

      800     7114    3               H_DPS8000_CPU_CONF_REG.PORT_B_ENABLED = '1'B;

   7114  1 003573   100000 236003                    LDQ     32768,DU
         1 003574   000000 256000 xsym               ORSQ    H_DPS8000_CPU_CONF_REG

      801     7115    3               H_DPS8000_CPU_CONF_REG.ADDRESS_SPLIT = H_DPS8000_SPLIT_TABLE(

   7115  1 003575   200062 235100                    LDA     SCUX,,AUTO
         1 003576   000001 735000                    ALS     1
         1 003577   000000 236005 xsym               LDQ     H_DPS8000_SCU_INFO,AL
         1 003600   000022 772000                    QRL     18
         1 003601   000017 772000                    QRL     15
         1 003602   000022 402007                    MPY     18,DL
         1 003603   003000 061406                    CSR     bolr='003'O
         1 003604   000001 000022 0                  BDSC    H_DPS8000_SPLIT_TABLE,Q  by=0,bit=0,n=18
         1 003605   000000 050004 xsym               BDSC    H_DPS8000_CPU_CONF_REG   by=0,bit=5,n=4

      802     7116    3                H_DPS8000_SCU_INFO.LOWER_BOUND(SCUX)/(1024*32));
      803     7117    3               CALL HFC$SCONF_8000;

   7117  1 003606   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 003607   000000 701000 xent               TSX1    HFC$SCONF_8000
         1 003610   000000 011000                    NOP     0

      804     7118    4                IF SCUX = 1 THEN DO;

   7118  1 003611   200062 235100                    LDA     SCUX,,AUTO
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:132  
         1 003612   000001 115007                    CMPA    1,DL
         1 003613   003646 601000 1                  TNZ     s:7126

      805     7119    4                  CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_CPU_ON#,BUFX,0)

   7119  1 003614   000014 236000 2                  LDQ     12
         1 003615   200073 756100                    STQ     TEMP$+6,,AUTO
         1 003616   200013 630500                    EPPR0   BUFX,,AUTO
         1 003617   200072 450500                    STP0    TEMP$+5,,AUTO
         1 003620   000026 236000 2                  LDQ     22
         1 003621   200020 235100                    LDA     DQH$,,AUTO
         1 003622   200070 757100                    STAQ    TEMP$+3,,AUTO
         1 003623   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003624   000022 631400 xsym               EPPR1   B_VECTNIL+18
         1 003625   000000 701000 xent               TSX1    TMB$MCA
         1 003626   004423 702000 1                  TSX2    SWITCH_RET_FAILED

      806     7120    4                    ALTRET(SWITCH_RET_FAILED);
      807     7121    4                  IF H_DPS8000_SCU_CONF_REG.PORTS(5) = '1'B THEN

   7121  1 003627   000000 236000 xsym               LDQ     H_DPS8000_SCU_CONF_REG
         1 003630   000004 316007                    CANQ    4,DL
         1 003631   003677 600000 1                  TZE     s:7132

      808     7122    4                    CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_CPU_ON#,BUFX,2)

   7122  1 003632   000016 236000 2                  LDQ     14
         1 003633   200073 756100                    STQ     TEMP$+6,,AUTO
         1 003634   200013 630500                    EPPR0   BUFX,,AUTO
         1 003635   200072 450500                    STP0    TEMP$+5,,AUTO
         1 003636   000026 236000 2                  LDQ     22
         1 003637   200020 235100                    LDA     DQH$,,AUTO
         1 003640   200070 757100                    STAQ    TEMP$+3,,AUTO
         1 003641   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003642   000022 631400 xsym               EPPR1   B_VECTNIL+18
         1 003643   000000 701000 xent               TSX1    TMB$MCA
         1 003644   004423 702000 1                  TSX2    SWITCH_RET_FAILED
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:133  

      809     7123    4                      ALTRET(SWITCH_RET_FAILED);
      810     7124    4                  END;

   7124  1 003645   003677 710000 1                  TRA     s:7132

      811     7125    4                ELSE DO;

      812     7126    4                  CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_CPU_ON#,BUFX,1)

   7126  1 003646   000017 236000 2                  LDQ     15
         1 003647   200073 756100                    STQ     TEMP$+6,,AUTO
         1 003650   200013 630500                    EPPR0   BUFX,,AUTO
         1 003651   200072 450500                    STP0    TEMP$+5,,AUTO
         1 003652   000026 236000 2                  LDQ     22
         1 003653   200020 235100                    LDA     DQH$,,AUTO
         1 003654   200070 757100                    STAQ    TEMP$+3,,AUTO
         1 003655   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003656   000022 631400 xsym               EPPR1   B_VECTNIL+18
         1 003657   000000 701000 xent               TSX1    TMB$MCA
         1 003660   004423 702000 1                  TSX2    SWITCH_RET_FAILED

      813     7127    4                    ALTRET(SWITCH_RET_FAILED);
      814     7128    4                  IF H_DPS8000_SCU_CONF_REG.PORTS(7) = '1'B THEN

   7128  1 003661   000000 236000 xsym               LDQ     H_DPS8000_SCU_CONF_REG
         1 003662   000001 316007                    CANQ    1,DL
         1 003663   003677 600000 1                  TZE     s:7132

      815     7129    4                    CALL TMB$MCA(DQH$->DQH,TM_OC_SWITCH_CPU_ON#,BUFX,3)

   7129  1 003664   000001 236000 2                  LDQ     1
         1 003665   200073 756100                    STQ     TEMP$+6,,AUTO
         1 003666   200013 630500                    EPPR0   BUFX,,AUTO
         1 003667   200072 450500                    STP0    TEMP$+5,,AUTO
         1 003670   000026 236000 2                  LDQ     22
         1 003671   200020 235100                    LDA     DQH$,,AUTO
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:134  
         1 003672   200070 757100                    STAQ    TEMP$+3,,AUTO
         1 003673   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003674   000022 631400 xsym               EPPR1   B_VECTNIL+18
         1 003675   000000 701000 xent               TSX1    TMB$MCA
         1 003676   004423 702000 1                  TSX2    SWITCH_RET_FAILED

      816     7130    4                      ALTRET(SWITCH_RET_FAILED);
      817     7131    4                  END;

      818     7132    3               FIRST_PAGE = H_DPS8000_SCU_INFO.LOWER_BOUND(SCUX);

   7132  1 003677   200062 235100                    LDA     SCUX,,AUTO
         1 003700   000001 735000                    ALS     1
         1 003701   000000 236005 xsym               LDQ     H_DPS8000_SCU_INFO,AL
         1 003702   000022 772000                    QRL     18
         1 003703   200044 756100                    STQ     FIRST_PAGE,,AUTO

      819     7133    3               LAST_PAGE = H_DPS8000_SCU_INFO.UPPER_BOUND(SCUX);

   7133  1 003704   000000 236005 xsym               LDQ     H_DPS8000_SCU_INFO,AL
         1 003705   777777 376007                    ANQ     -1,DL
         1 003706   200052 756100                    STQ     LAST_PAGE,,AUTO

      820     7134    3               H_DPS8000_SCU_INFO.SCU_STATUS.RET_IN_PROGRESS(SCUX) = '1'B;

   7134  1 003707   040000 236007                    LDQ     16384,DL
         1 003710   000001 256005 xsym               ORSQ    H_DPS8000_SCU_INFO+1,AL

      821     7135    3               H_DPS8000_SCU_INFO.PAGES(SCUX) = 0;

   7135  1 003711   000000 220003                    LDX0    0,DU
         1 003712   000001 740005 xsym               STX0    H_DPS8000_SCU_INFO+1,AL

      822     7136    3               CALL HFA$STOPCPU;

   7136  1 003713   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 003714   000000 701000 xent               TSX1    HFA$STOPCPU
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:135  
         1 003715   000000 011000                    NOP     0

      823     7137    4               DO REL_PAGE = FIRST_PAGE TO LAST_PAGE;

   7137  1 003716   200044 235100                    LDA     FIRST_PAGE,,AUTO
         1 003717   200060 755100                    STA     REL_PAGE,,AUTO
         1 003720   003737 710000 1                  TRA     s:7141+3

      824     7138    5                 CALL MMB$RETMEM(REL_PAGE) WHENRETURN DO;

   7138  1 003721   200060 630500                    EPPR0   REL_PAGE,,AUTO
         1 003722   200070 450500                    STP0    TEMP$+3,,AUTO
         1 003723   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 003724   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 003725   000000 701000 xent               TSX1    MMB$RETMEM
         1 003726   003734 702000 1                  TSX2    s:7141

      825     7139    5                   H_DPS8000_SCU_INFO.PAGES(SCUX) = H_DPS8000_SCU_INFO.PAGES(SCUX) + 1
              7139                             ;

   7139  1 003727   200062 235100                    LDA     SCUX,,AUTO
         1 003730   000001 735000                    ALS     1
         1 003731   000001 220005 xsym               LDX0    H_DPS8000_SCU_INFO+1,AL
         1 003732   000001 621010                    EAX1    1,X0
         1 003733   000001 741005 xsym               STX1    H_DPS8000_SCU_INFO+1,AL

      826     7140    5                   END;

      827     7141    4                 END;

   7141  1 003734   200060 235100                    LDA     REL_PAGE,,AUTO
         1 003735   000001 035007                    ADLA    1,DL
         1 003736   200060 755100                    STA     REL_PAGE,,AUTO
         1 003737   200052 236100                    LDQ     LAST_PAGE,,AUTO
         1 003740   200060 116100                    CMPQ    REL_PAGE,,AUTO
         1 003741   003721 603000 1                  TRC     s:7138

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:136  
      828     7142    3               MM_PCORE = MM_PCORE + MM_GAPSZ + H_DPS8000_SCU_INFO.PAGES(SCUX);

   7142  1 003742   000000 236000 xsym               LDQ     MM_PCORE
         1 003743   000000 036000 xsym               ADLQ    MM_GAPSZ
         1 003744   200062 235100                    LDA     SCUX,,AUTO
         1 003745   000001 735000                    ALS     1
         1 003746   200070 756100                    STQ     TEMP$+3,,AUTO
         1 003747   000001 236005 xsym               LDQ     H_DPS8000_SCU_INFO+1,AL
         1 003750   000022 772000                    QRL     18
         1 003751   200071 756100                    STQ     TEMP$+4,,AUTO
         1 003752   200070 236100                    LDQ     TEMP$+3,,AUTO
         1 003753   200071 036100                    ADLQ    TEMP$+4,,AUTO
         1 003754   000000 756000 xsym               STQ     MM_PCORE

      829     7143    3               CALL HFA$STARTCPU;

   7143  1 003755   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 003756   000000 701000 xent               TSX1    HFA$STARTCPU
         1 003757   000000 011000                    NOP     0

      830     7144    3              IF H_DPS8000_SCU_INFO.PAGES(SCUX) = (H_DPS8000_SCU_INFO.UPPER_BOUND(SCUX
              7144                        )

   7144  1 003760   200062 235100                    LDA     SCUX,,AUTO
         1 003761   000001 735000                    ALS     1
         1 003762   000000 236005 xsym               LDQ     H_DPS8000_SCU_INFO,AL
         1 003763   000022 772000                    QRL     18
         1 003764   200070 756100                    STQ     TEMP$+3,,AUTO
         1 003765   000000 236005 xsym               LDQ     H_DPS8000_SCU_INFO,AL
         1 003766   777777 376007                    ANQ     -1,DL
         1 003767   200070 136100                    SBLQ    TEMP$+3,,AUTO
         1 003770   000001 036007                    ADLQ    1,DL
         1 003771   200071 756100                    STQ     TEMP$+4,,AUTO
         1 003772   000001 236005 xsym               LDQ     H_DPS8000_SCU_INFO+1,AL
         1 003773   000022 772000                    QRL     18
         1 003774   200071 116100                    CMPQ    TEMP$+4,,AUTO
         1 003775   004002 601000 1                  TNZ     s:7149
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:137  

      831     7145    4                  - H_DPS8000_SCU_INFO.LOWER_BOUND(SCUX) + 1) THEN DO;

      832     7146    4                 H_DPS8000_SCU_INFO.SCU_STATUS.RET_IN_PROGRESS(SCUX) = '0'B;

   7146  1 003776   000027 236000 2                  LDQ     23
         1 003777   000001 356005 xsym               ANSQ    H_DPS8000_SCU_INFO+1,AL

      833     7147    4                 H_DPS8000_SCU_INFO.SCU_STATUS.REL_BIT(SCUX) = '0'B;

   7147  1 004000   000030 236000 2                  LDQ     24
         1 004001   000001 356005 xsym               ANSQ    H_DPS8000_SCU_INFO+1,AL

      834     7148    4                 END;

      835     7149    3                CALL TMB$BUF_DEALLOC(BUF$,BUFX);

   7149  1 004002   200013 630500                    EPPR0   BUFX,,AUTO
         1 004003   200071 450500                    STP0    TEMP$+4,,AUTO
         1 004004   200012 631500                    EPPR1   BUF$,,AUTO
         1 004005   200070 451500                    STP1    TEMP$+3,,AUTO
         1 004006   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 004007   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 004010   000000 701000 xent               TSX1    TMB$BUF_DEALLOC
         1 004011   000000 011000                    NOP     0

      836     7150    3               END;                        /* CASE SYSCON_V.COMPONENT            */

   7150  1 004012   004104 710000 1                  TRA     LOG_IT

      837     7151    2            CASE(%SETFLAG#);

      838     7152        /**/
      839     7153        /* SET FLAGS */
      840     7154        /**/
      841     7155    3              DO CASE(SYSCON_V.FLAG);

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:138  
   7155  1 004013   000003 236100                    LDQ     3,,PR0
         1 004014   000033 772000                    QRL     27
         1 004015   000003 116007                    CMPQ    3,DL
         1 004016   004020 602006 1                  TNC     s:7155+5,QL
         1 004017   004104 710000 1                  TRA     LOG_IT
         1 004020   004104 710000 1                  TRA     LOG_IT
         1 004021   004023 710000 1                  TRA     s:7157
         1 004022   004061 710000 1                  TRA     s:7167

      842     7156    3               CASE(%TDOK#);

      843     7157    4                 DO CASE(SYSCON_V.COMPONENT);

   7157  1 004023   000000 220100                    LDX0    0,,PR0
         1 004024   000777 360003                    ANX0    511,DU
         1 004025   000006 100003                    CMPX0   6,DU
         1 004026   004030 602010 1                  TNC     s:7157+5,X0
         1 004027   004104 710000 1                  TRA     LOG_IT
         1 004030   004060 710000 1                  TRA     s:7165
         1 004031   004036 710000 1                  TRA     s:7159
         1 004032   004045 710000 1                  TRA     s:7161
         1 004033   004045 710000 1                  TRA     s:7161
         1 004034   004036 710000 1                  TRA     s:7159
         1 004035   004054 710000 1                  TRA     s:7163

      844     7158    4                  CASE(%CHANNEL#,%FEP##);

      845     7159    4                    DQH.STATUS.TDOK = SYSCON_V.FLAGVAL;

   7159  1 004036   200020 471500                    LDP1    DQH$,,AUTO
         1 004037   000003 236100                    LDQ     3,,PR0
         1 004040   000007 736000                    QLS     7
         1 004041   100001 676100                    ERQ     1,,PR1
         1 004042   100000 376003                    ANQ     32768,DU
         1 004043   100001 656100                    ERSQ    1,,PR1
         1 004044   004104 710000 1                  TRA     LOG_IT

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:139  
      846     7160    4                  CASE(%DVC#,%MPC#);

      847     7161    4                    DCT.STATUS.TDOK = SYSCON_V.FLAGVAL;

   7161  1 004045   200017 471500                    LDP1    DCT$,,AUTO
         1 004046   000003 236100                    LDQ     3,,PR0
         1 004047   000010 736000                    QLS     8
         1 004050   100027 676100                    ERQ     23,,PR1
         1 004051   200000 376003                    ANQ     65536,DU
         1 004052   100027 656100                    ERSQ    23,,PR1
         1 004053   004104 710000 1                  TRA     LOG_IT

      848     7162    4                  CASE(%IOM##);

      849     7163    4                    ERR = %E$TDOKFORIOM;

   7163  1 004054   001654 235007                    LDA     940,DL
         1 004055   200005 471500                    LDP1    @ERR,,AUTO
         1 004056   100000 755100                    STA     0,,PR1

      850     7164    4                    ALTRETURN;

   7164  1 004057   000000 702200 xent               TSX2  ! X66_AALT

      851     7165    4                  END;                     /* CASE COMPONENT                     */

   7165  1 004060   004104 710000 1                  TRA     LOG_IT

      852     7166    3               CASE(%CHECKWRITE#);

      853     7167    4                 DO CASE(SYSCON_V.COMPONENT);

   7167  1 004061   000000 220100                    LDX0    0,,PR0
         1 004062   000777 360003                    ANX0    511,DU
         1 004063   000003 100003                    CMPX0   3,DU
         1 004064   004066 602010 1                  TNC     s:7167+5,X0
         1 004065   004103 710000 1                  TRA     s:7173
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:140  
         1 004066   004103 710000 1                  TRA     s:7173
         1 004067   004103 710000 1                  TRA     s:7173
         1 004070   004071 710000 1                  TRA     s:7169

      854     7168    4                  CASE(%DVC#);

      855     7169    4                    IF SUBSTR(SYSCON_V.DEVNM,0,2) ~= 'DP' THEN

   7169  1 004071   000001 221100                    LDX1    1,,PR0
         1 004072   000010 101000 0                  CMPX1   H_DPS8000_SPLIT_TABLE+7
         1 004073   004326 601000 1                  TNZ     ERR_CWFORNONDP

      856     7170    4                       GOTO ERR_CWFORNONDP;
      857     7171    4                    ELSE DCT.DFLG.CHECKWRITE = SYSCON_V.FLAGVAL;

   7171  1 004074   200017 471500                    LDP1    DCT$,,AUTO
         1 004075   000003 236100                    LDQ     3,,PR0
         1 004076   000025 772000                    QRL     21
         1 004077   100006 676100                    ERQ     6,,PR1
         1 004100   000040 376007                    ANQ     32,DL
         1 004101   100006 656100                    ERSQ    6,,PR1
         1 004102   004104 710000 1                  TRA     LOG_IT

      858     7172    4                  CASE(ELSE);

      859     7173    4                    GOTO ERR_CWFORNONDP;

   7173  1 004103   004326 710000 1                  TRA     ERR_CWFORNONDP

      860     7174    4                  END;                     /* CASE COMPONENT                     */

      861     7175    3               END;                        /* CASE SYSCON_V.FLAG                 */

      862     7176    2            END;

   7169  1 004104                       LOG_IT       null
      863     7177    1   LOG_IT: ;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:141  
      864     7178    2           IF SYSCON_V.FUNCTION~=%DISPLAY# AND B$JIT.USER>JG_GHOST1# THEN DO;

   7178  1 004104   200003 470500                    LDP0    @SYSCON_V,,AUTO
         1 004105   000000 236100                    LDQ     0,,PR0
         1 004106   777000 376003                    ANQ     -512,DU
         1 004107   003000 116003                    CMPQ    1536,DU
         1 004110   004206 600000 1                  TZE     RETURN_RESULT
         1 004111   000000 471400 xsym               LDP1    B$JIT$
         1 004112   100000 236100                    LDQ     0,,PR1
         1 004113   000777 376003                    ANQ     511,DU
         1 004114   000002 116003                    CMPQ    2,DU
         1 004115   004206 602000 1                  TNC     RETURN_RESULT

      865     7179    2              EL$SYSCON=SYSCON_V;

   7179  1 004116   003100 060500                    CSL     bolr='003'O
         1 004117   000000 000166                    BDSC    0,,PR0                   by=0,bit=0,n=118
         1 004120   200030 000462                    BDSC    EL$SYSCON,,AUTO          by=0,bit=0,n=306

      866     7180    2              EL$SYSCON.ACCN=B$JIT.ACCN;

   7180  1 004121   040100 100500                    MLR     fill='040'O
         1 004122   100001 000010                    ADSC9   1,,PR1                   cn=0,n=8
         1 004123   200033 000010                    ADSC9   EL$SYSCON+3,,AUTO        cn=0,n=8

      867     7181    2              EL$SYSCON.UNAME=B$JIT.UNAME;

   7181  1 004124   040100 100500                    MLR     fill='040'O
         1 004125   100003 000014                    ADSC9   3,,PR1                   cn=0,n=12
         1 004126   200035 000014                    ADSC9   EL$SYSCON+5,,AUTO        cn=0,n=12

      868     7182    2              EL$SYSCON.SYSID=B$JIT.SYSID;

   7182  1 004127   100000 720100                    LXL0    0,,PR1
         1 004130   200040 740100                    STX0    EL$SYSCON+8,,AUTO

      869     7183    2              CALL ELA$SYSLOG(EL_SYSCON,EL$SYSCON,SIZEC(EL$SYSCON),'0'B,1,I);
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:142  

   7183  1 004131   200045 633500                    EPPR3   I,,AUTO
         1 004132   200075 453500                    STP3    TEMP$+8,,AUTO
         1 004133   000017 236000 2                  LDQ     15
         1 004134   200074 756100                    STQ     TEMP$+7,,AUTO
         1 004135   000034 237000 2                  LDAQ    28
         1 004136   200072 757100                    STAQ    TEMP$+5,,AUTO
         1 004137   200030 634500                    EPPR4   EL$SYSCON,,AUTO
         1 004140   200071 454500                    STP4    TEMP$+4,,AUTO
         1 004141   000033 236000 2                  LDQ     27
         1 004142   200070 756100                    STQ     TEMP$+3,,AUTO
         1 004143   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 004144   000024 631400 xsym               EPPR1   B_VECTNIL+20
         1 004145   000000 701000 xent               TSX1    ELA$SYSLOG
         1 004146   000000 011000                    NOP     0

      870     7184    3              IF BOOTINFO.BOOTINFO ~= '0'B THEN DO ;

   7184  1 004147   000000 106500                    CMPC    fill='000'O
         1 004150   200010 600005                    ADSC9   BOOTINFO,,AUTO           cn=3,n=5
         1 004151   000002 000002 xsym               ADSC9   B_VECTNIL+2              cn=0,n=2
         1 004152   004206 600000 1                  TZE     RETURN_RESULT

      871     7185    3                 EL$CHNGAARD = BOOTINFO.BOOTINFO ;

   7185  1 004153   000100 100500                    MLR     fill='000'O
         1 004154   200010 600005                    ADSC9   BOOTINFO,,AUTO           cn=3,n=5
         1 004155   200021 000033                    ADSC9   EL$CHNGAARD,,AUTO        cn=0,n=27

      872     7186    3                 EL$CHNGAARD.ACCN = B$JIT.ACCN;

   7186  1 004156   000000 470400 xsym               LDP0    B$JIT$
         1 004157   040100 100500                    MLR     fill='040'O
         1 004160   000001 000010                    ADSC9   1,,PR0                   cn=0,n=8
         1 004161   200022 200010                    ADSC9   EL$CHNGAARD+1,,AUTO      cn=1,n=8

      873     7187    3                 EL$CHNGAARD.UNAME = B$JIT.UNAME;
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:143  

   7187  1 004162   040100 100500                    MLR     fill='040'O
         1 004163   000003 000014                    ADSC9   3,,PR0                   cn=0,n=12
         1 004164   200024 200014                    ADSC9   EL$CHNGAARD+3,,AUTO      cn=1,n=12

      874     7188    3                 EL$CHNGAARD.SYSID = B$JIT.SYSID;

   7188  1 004165   000000 236100                    LDQ     0,,PR0
         1 004166   000011 736000                    QLS     9
         1 004167   200027 552130                    STBQ    EL$CHNGAARD+6,'30'O,AUTO

      875     7189    3                CALL ELA$SYSLOG(EL_CHNGAARD,EL$CHNGAARD,SIZEC(EL$CHNGAARD),'0'B,EL_ERR
              7189                          ,I);

   7189  1 004170   200045 631500                    EPPR1   I,,AUTO
         1 004171   200075 451500                    STP1    TEMP$+8,,AUTO
         1 004172   000017 236000 2                  LDQ     15
         1 004173   200074 756100                    STQ     TEMP$+7,,AUTO
         1 004174   000040 237000 2                  LDAQ    32
         1 004175   200072 757100                    STAQ    TEMP$+5,,AUTO
         1 004176   200021 633500                    EPPR3   EL$CHNGAARD,,AUTO
         1 004177   200071 453500                    STP3    TEMP$+4,,AUTO
         1 004200   000042 236000 2                  LDQ     34
         1 004201   200070 756100                    STQ     TEMP$+3,,AUTO
         1 004202   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 004203   000024 631400 xsym               EPPR1   B_VECTNIL+20
         1 004204   000000 701000 xent               TSX1    ELA$SYSLOG
         1 004205   000000 011000                    NOP     0

      876     7190    3                 END;

      877     7191    2              END;

   7189  1 004206                       RETURN_RESU* null
      878     7192    1   RETURN_RESULT: ;
      879     7193    2           DO CASE(SYSCON_V.COMPONENT);

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:144  
   7193  1 004206   200003 470500                    LDP0    @SYSCON_V,,AUTO
         1 004207   000000 220100                    LDX0    0,,PR0
         1 004210   000777 360003                    ANX0    511,DU
         1 004211   000010 100003                    CMPX0   8,DU
         1 004212   004214 602010 1                  TNC     RETURN_RESULT+6,X0
         1 004213   004324 710000 1                  TRA     s:7214
         1 004214   004324 710000 1                  TRA     s:7214
         1 004215   004224 710000 1                  TRA     s:7195
         1 004216   004237 710000 1                  TRA     s:7199
         1 004217   004237 710000 1                  TRA     s:7199
         1 004220   004224 710000 1                  TRA     s:7195
         1 004221   004255 710000 1                  TRA     s:7203
         1 004222   004304 710000 1                  TRA     s:7208
         1 004223   004314 710000 1                  TRA     s:7211

      880     7194    2            CASE(%CHANNEL#,%FEP##);

      881     7195    2              RESULT = DQH.STATUS;

   7195  1 004224   200020 471500                    LDP1    DQH$,,AUTO
         1 004225   200004 473500                    LDP3    @RESULT,,AUTO
         1 004226   003100 060500                    CSL     bolr='003'O
         1 004227   100001 010010                    BDSC    1,,PR1                   by=0,bit=1,n=8
         1 004230   300000 000110                    BDSC    0,,PR3                   by=0,bit=0,n=72

      882     7196    2              RESULT.CHECKWRITE = '0'B;

   7196  1 004231   000013 236000 2                  LDQ     11
         1 004232   300000 356100                    ANSQ    0,,PR3

      883     7197    2              RESULT.BOOTINFO = BOOTINFO.BOOTINFO ;

   7197  1 004233   000100 100500                    MLR     fill='000'O
         1 004234   200010 600005                    ADSC9   BOOTINFO,,AUTO           cn=3,n=5
         1 004235   300000 600005                    ADSC9   0,,PR3                   cn=3,n=5
         1 004236   004324 710000 1                  TRA     s:7214

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:145  
      884     7198    2            CASE(%DVC#,%MPC#);

      885     7199    2              RESULT = DCT.STATUS;

   7199  1 004237   200017 471500                    LDP1    DCT$,,AUTO
         1 004240   200004 473500                    LDP3    @RESULT,,AUTO
         1 004241   003100 060500                    CSL     bolr='003'O
         1 004242   100027 000010                    BDSC    23,,PR1                  by=0,bit=0,n=8
         1 004243   300000 000110                    BDSC    0,,PR3                   by=0,bit=0,n=72

      886     7200    2              RESULT.CHECKWRITE = DCT.DFLG.CHECKWRITE;

   7200  1 004244   100006 236100                    LDQ     6,,PR1
         1 004245   000034 736000                    QLS     28
         1 004246   300000 676100                    ERQ     0,,PR3
         1 004247   100000 376003                    ANQ     32768,DU
         1 004250   300000 656100                    ERSQ    0,,PR3

      887     7201    2              RESULT.BOOTINFO = BOOTINFO.BOOTINFO ;

   7201  1 004251   000100 100500                    MLR     fill='000'O
         1 004252   200010 600005                    ADSC9   BOOTINFO,,AUTO           cn=3,n=5
         1 004253   300000 600005                    ADSC9   0,,PR3                   cn=3,n=5
         1 004254   004324 710000 1                  TRA     s:7214

      888     7202    2            CASE(%IOM##);

      889     7203    2              RESULT.PART = IOM.STATUS.DOWN;

   7203  1 004255   200004 471500                    LDP1    @RESULT,,AUTO
         1 004256   200047 473500                    LDP3    IOM$,,AUTO
         1 004257   300003 236100                    LDQ     3,,PR3
         1 004260   000036 736000                    QLS     30
         1 004261   100000 676100                    ERQ     0,,PR1
         1 004262   400000 376003                    ANQ     -131072,DU
         1 004263   100000 656100                    ERSQ    0,,PR1

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:146  
      890     7204    2              RESULT.SYSCONPART = IOM.STATUS.SYSCON_PART;

   7204  1 004264   300003 236100                    LDQ     3,,PR3
         1 004265   000031 736000                    QLS     25
         1 004266   100000 676100                    ERQ     0,,PR1
         1 004267   004000 376003                    ANQ     2048,DU
         1 004270   100000 656100                    ERSQ    0,,PR1

      891     7205    2              RESULT.MSOSPART = IOM.STATUS.MSOS_PART;

   7205  1 004271   300003 236100                    LDQ     3,,PR3
         1 004272   000031 736000                    QLS     25
         1 004273   100000 676100                    ERQ     0,,PR1
         1 004274   002000 376003                    ANQ     1024,DU
         1 004275   100000 656100                    ERSQ    0,,PR1

      892     7206    2              RESULT.RELEASED = IOM.STATUS.DOWN;

   7206  1 004276   300003 236100                    LDQ     3,,PR3
         1 004277   000033 736000                    QLS     27
         1 004300   100000 676100                    ERQ     0,,PR1
         1 004301   040000 376003                    ANQ     16384,DU
         1 004302   100000 656100                    ERSQ    0,,PR1
         1 004303   004324 710000 1                  TRA     s:7214

      893     7207    2            CASE (%CPU##);

      894     7208    2              IF S_MPSTATE(CPUX) = %SS_REL# THEN

   7208  1 004304   200016 721100                    LXL1    CPUX,,AUTO
         1 004305   000000 235011 xsym               LDA     S_MPSTATE,X1
         1 004306   000003 115007                    CMPA    3,DL
         1 004307   004324 601000 1                  TNZ     s:7214

      895     7209    2                RESULT.RELEASED = '1'B;

   7209  1 004310   200004 471500                    LDP1    @RESULT,,AUTO
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:147  
         1 004311   040000 236003                    LDQ     16384,DU
         1 004312   100000 256100                    ORSQ    0,,PR1
         1 004313   004324 710000 1                  TRA     s:7214

      896     7210    2            CASE (%SCU##);

      897     7211    2              IF H_DPS8000_SCU_INFO.SCU_STATUS.REL_BIT(SCUX) = '1'B THEN

   7211  1 004314   200062 235100                    LDA     SCUX,,AUTO
         1 004315   000001 735000                    ALS     1
         1 004316   000001 236005 xsym               LDQ     H_DPS8000_SCU_INFO+1,AL
         1 004317   200000 316007                    CANQ    65536,DL
         1 004320   004324 600000 1                  TZE     s:7214

      898     7212    2                RESULT.RELEASED = '1'B;

   7212  1 004321   200004 471500                    LDP1    @RESULT,,AUTO
         1 004322   040000 236003                    LDQ     16384,DU
         1 004323   100000 256100                    ORSQ    0,,PR1

      899     7213    2            END;                           /* CASE SYSCON_V.COMPONENT            */

      900     7214    1           RETURN;

   7214  1 004324   000000 702200 xent               TSX2  ! X66_ARET

   7213  1 004325                       ERR_RETURN   null
      901     7215    1   ERR_RETURN: ;
      902     7216    1           ALTRETURN;

   7216  1 004325   000000 702200 xent               TSX2  ! X66_AALT

   7213  1 004326                       ERR_CWFORNO* null
      903     7217
      904     7218    1   ERR_CWFORNONDP: ;
      905     7219    1           ERR = %E$CWFORNONDP;

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:148  
   7219  1 004326   001647 235007                    LDA     935,DL
         1 004327   200005 471500                    LDP1    @ERR,,AUTO
         1 004330   100000 755100                    STA     0,,PR1

      906     7220    1           ALTRETURN;

   7220  1 004331   000000 702200 xent               TSX2  ! X66_AALT

   7219  1 004332                       ERR_NOPARTR* null
      907     7221    1   ERR_NOPARTRETFEP: ;
      908     7222    1           ERR = %E$NOPARTRETFEP;

   7222  1 004332   001660 235007                    LDA     944,DL
         1 004333   200005 473500                    LDP3    @ERR,,AUTO
         1 004334   300000 755100                    STA     0,,PR3

      909     7223    1           ALTRETURN;

   7223  1 004335   000000 702200 xent               TSX2  ! X66_AALT

   7222  1 004336                       ERR_DEVNOTI* null
      910     7224    1   ERR_DEVNOTIDLE: ;
      911     7225    1           ERR = %E$DEVNOTIDLE;

   7225  1 004336   001614 235007                    LDA     908,DL
         1 004337   200005 471500                    LDP1    @ERR,,AUTO
         1 004340   100000 755100                    STA     0,,PR1

      912     7226    1           ALTRETURN;

   7226  1 004341   000000 702200 xent               TSX2  ! X66_AALT

   7225  1 004342                       ERR_NOPARTR* null
      913     7227    1   ERR_NOPARTRETCHAN: ;
      914     7228    1           ERR = %E$NOPARTRETCHAN;

   7228  1 004342   001657 235007                    LDA     943,DL
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:149  
         1 004343   200005 473500                    LDP3    @ERR,,AUTO
         1 004344   300000 755100                    STA     0,,PR3

      915     7229    1           ALTRETURN;

   7229  1 004345   000000 702200 xent               TSX2  ! X66_AALT

   7228  1 004346                       ERR_IOMDOWN  null
      916     7230    1   ERR_IOMDOWN: ;
      917     7231    1           ERR = %E$IOMDOWN;

   7231  1 004346   001653 235007                    LDA     939,DL
         1 004347   200005 470500                    LDP0    @ERR,,AUTO
         1 004350   000000 755100                    STA     0,,PR0

      918     7232    1           ALTRETURN;

   7232  1 004351   000000 702200 xent               TSX2  ! X66_AALT

   7231  1 004352                       ERR_ONLYPATH null
      919     7233    1   ERR_ONLYPATH: ;
      920     7234    1           ERR = %E$ONLYPATH;

   7234  1 004352   001640 235007                    LDA     928,DL
         1 004353   200005 470500                    LDP0    @ERR,,AUTO
         1 004354   000000 755100                    STA     0,,PR0

      921     7235    1           ALTRETURN;

   7235  1 004355   000000 702200 xent               TSX2  ! X66_AALT

   7234  1 004356                       ERR_SCNNOCO* null
      922     7236    1   ERR_SCNNOCOMP: ;
      923     7237    1           ERR = %E$SCNNOCOMP;

   7237  1 004356   001634 235007                    LDA     924,DL
         1 004357   200005 470500                    LDP0    @ERR,,AUTO
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:150  
         1 004360   000000 755100                    STA     0,,PR0

      924     7238    1           ALTRETURN;

   7238  1 004361   000000 702200 xent               TSX2  ! X66_AALT

   7237  1 004362                       ERR_SCNNOTD* null
      925     7239    1   ERR_SCNNOTDEV: ;
      926     7240    1           ERR = %E$SCNNOTDEV;

   7240  1 004362   001635 235007                    LDA     925,DL
         1 004363   200005 473500                    LDP3    @ERR,,AUTO
         1 004364   300000 755100                    STA     0,,PR3

      927     7241    1           ALTRETURN;

   7241  1 004365   000000 702200 xent               TSX2  ! X66_AALT

   7240  1 004366                       ERR_SCNNOTM* null
      928     7242    1   ERR_SCNNOTMPC: ;
      929     7243    1           ERR = %E$SCNNOTMPC;

   7243  1 004366   001636 235007                    LDA     926,DL
         1 004367   200005 473500                    LDP3    @ERR,,AUTO
         1 004370   300000 755100                    STA     0,,PR3

      930     7244    1           ALTRETURN;

   7244  1 004371   000000 702200 xent               TSX2  ! X66_AALT

   7243  1 004372                       ERR_SCNTDUS* null
      931     7245    1   ERR_SCNTDUSER: ;
      932     7246    1           ERR = %E$SCNTDUSER;

   7246  1 004372   001642 235007                    LDA     930,DL
         1 004373   200005 471500                    LDP1    @ERR,,AUTO
         1 004374   100000 755100                    STA     0,,PR1
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:151  

      933     7247    1           ALTRETURN;

   7247  1 004375   000000 702200 xent               TSX2  ! X66_AALT

      934     7248    1   ERR_IOMNOTENABLED:
      935     7249    1           ERR = %E$IOMNOTENABLED;

   7249  1 004376   003244 235007       ERR_IOMNOTE* LDA     1700,DL
         1 004377   200005 473500                    LDP3    @ERR,,AUTO
         1 004400   300000 755100                    STA     0,,PR3

      936     7250    1           ALTRETURN;

   7250  1 004401   000000 702200 xent               TSX2  ! X66_AALT

      937     7251    1   ERR_CPUNOTSTOP:
      938     7252    1           ERR = %E$CPURUNNING;

   7252  1 004402   003245 235007       ERR_CPUNOTS* LDA     1701,DL
         1 004403   200005 471500                    LDP1    @ERR,,AUTO
         1 004404   100000 755100                    STA     0,,PR1

      939     7253    1           ALTRETURN;

   7253  1 004405   000000 702200 xent               TSX2  ! X66_AALT

      940     7254    1   ERR_RELEASE:
      941     7255    1           ERR = %E$MCAINUSE;

   7255  1 004406   001665 235007       ERR_RELEASE  LDA     949,DL
         1 004407   200005 470500                    LDP0    @ERR,,AUTO
         1 004410   000000 755100                    STA     0,,PR0

      942     7256    1           ALTRETURN;

   7256  1 004411   000000 702200 xent               TSX2  ! X66_AALT
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:152  

      943     7257    1   ERR_CPUMASTER:
      944     7258    1           ERR = %E$CPUMASTER;

   7258  1 004412   003246 235007       ERR_CPUMAST* LDA     1702,DL
         1 004413   000000 755100                    STA     0,,PR0

      945     7259    1           ALTRETURN;

   7259  1 004414   000000 702200 xent               TSX2  ! X66_AALT

      946     7260    1   ERR_SCUNOTVALID:
      947     7261    1           ERR = %E$SCUNOTVALID;

   7261  1 004415   003247 235007       ERR_SCUNOTV* LDA     1703,DL
         1 004416   000000 755100                    STA     0,,PR0

      948     7262    1           ALTRETURN;

   7262  1 004417   000000 702200 xent               TSX2  ! X66_AALT

      949     7263    1   ERR_SCUNOTCONFIG:
      950     7264    1           ERR = %E$SCUNOTCONFIG;

   7264  1 004420   003252 235007       ERR_SCUNOTC* LDA     1706,DL
         1 004421   000000 755100                    STA     0,,PR0

      951     7265    1           ALTRETURN;

   7265  1 004422   000000 702200 xent               TSX2  ! X66_AALT

      952     7266    1   SWITCH_RET_FAILED:
      953     7267    1           CALL TMB$BUF_DEALLOC(BUF$,BUFX);

   7267  1 004423   200013 630500       SWITCH_RET_* EPPR0   BUFX,,AUTO
         1 004424   200071 450500                    STP0    TEMP$+4,,AUTO
         1 004425   200012 631500                    EPPR1   BUF$,,AUTO
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:153  
         1 004426   200070 451500                    STP1    TEMP$+3,,AUTO
         1 004427   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 004430   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 004431   000000 701000 xent               TSX1    TMB$BUF_DEALLOC
         1 004432   000000 011000                    NOP     0

      954     7268    1           IF SYSCON_V.COMPONENT = %IOM## THEN

   7268  1 004433   200003 470500                    LDP0    @SYSCON_V,,AUTO
         1 004434   000000 236100                    LDQ     0,,PR0
         1 004435   000777 376003                    ANQ     511,DU
         1 004436   000005 116003                    CMPQ    5,DU
         1 004437   004444 601000 1                  TNZ     s:7271

      955     7269    1             ERR = %E$IOMNOTRETURNED;

   7269  1 004440   003255 235007                    LDA     1709,DL
         1 004441   200005 471500                    LDP1    @ERR,,AUTO
         1 004442   100000 755100                    STA     0,,PR1
         1 004443   004455 710000 1                  TRA     s:7275

      956     7270    1           ELSE
      957     7271    1             IF SYSCON_V.COMPONENT = %CPU## THEN

   7271  1 004444   000006 116003                    CMPQ    6,DU
         1 004445   004452 601000 1                  TNZ     s:7274

      958     7272    1               ERR = %E$CPUNOTRETURNED;

   7272  1 004446   003254 235007                    LDA     1708,DL
         1 004447   200005 471500                    LDP1    @ERR,,AUTO
         1 004450   100000 755100                    STA     0,,PR1
         1 004451   004455 710000 1                  TRA     s:7275

      959     7273    1             ELSE
      960     7274    1               ERR = %E$SCUNOTRETURNED;

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:154  
   7274  1 004452   003253 235007                    LDA     1707,DL
         1 004453   200005 471500                    LDP1    @ERR,,AUTO
         1 004454   100000 755100                    STA     0,,PR1

      961     7275    1           ALTRETURN;

   7275  1 004455   000000 702200 xent               TSX2  ! X66_AALT

      962     7276    1   SWITCH_REL_FAILED:
      963     7277    1           IF SYSCON_V.COMPONENT = %IOM## THEN

   7277  1 004456   200003 470500       SWITCH_REL_* LDP0    @SYSCON_V,,AUTO
         1 004457   000000 236100                    LDQ     0,,PR0
         1 004460   000777 376003                    ANQ     511,DU
         1 004461   000005 116003                    CMPQ    5,DU
         1 004462   004467 601000 1                  TNZ     s:7280

      964     7278    1             ERR = %E$IOMNOTRELEASED;

   7278  1 004463   003257 235007                    LDA     1711,DL
         1 004464   200005 471500                    LDP1    @ERR,,AUTO
         1 004465   100000 755100                    STA     0,,PR1
         1 004466   004500 710000 1                  TRA     s:7284

      965     7279    1           ELSE
      966     7280    1             IF SYSCON_V.COMPONENT = %CPU## THEN

   7280  1 004467   000006 116003                    CMPQ    6,DU
         1 004470   004475 601000 1                  TNZ     s:7283

      967     7281    1               ERR = %E$CPUNOTRELEASED;

   7281  1 004471   003256 235007                    LDA     1710,DL
         1 004472   200005 471500                    LDP1    @ERR,,AUTO
         1 004473   100000 755100                    STA     0,,PR1
         1 004474   004500 710000 1                  TRA     s:7284

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:155  
      968     7282    1             ELSE
      969     7283    1               ERR = %E$SCUNOTRELEASED;

   7283  1 004475   003260 235007                    LDA     1712,DL
         1 004476   200005 471500                    LDP1    @ERR,,AUTO
         1 004477   100000 755100                    STA     0,,PR1

      970     7284    1           CALL TMB$BUF_DEALLOC(BUF$,BUFX);

   7284  1 004500   200013 633500                    EPPR3   BUFX,,AUTO
         1 004501   200071 453500                    STP3    TEMP$+4,,AUTO
         1 004502   200012 634500                    EPPR4   BUF$,,AUTO
         1 004503   200070 454500                    STP4    TEMP$+3,,AUTO
         1 004504   200070 630500                    EPPR0   TEMP$+3,,AUTO
         1 004505   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 004506   000000 701000 xent               TSX1    TMB$BUF_DEALLOC
         1 004507   000000 011000                    NOP     0

      971     7285    1           ALTRETURN;

   7285  1 004510   000000 702200 xent               TSX2  ! X66_AALT

MCA_FW_LOAD
 Sect OctLoc
   0     000   134100 ******                                                    \@..

H_DPS8000_SPLIT_TABLE
 Sect OctLoc
   0     001   000017 000016   000014 000010   000000 ******                    ............

(unnamed)
 Sect OctLoc
   0     004   111106 104113   111106 124120   111120 122065   111103 122104    IFDKIFTPIPR5ICRD
   0     010   104120 040040                                                    DP

(unnamed)
 Sect OctLoc
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:156  
   2     000   000030 006000   000005 006000   000000 000016   000002 006000    ................
   2     004   577777 777777   775777 777777   000000 006000   000012 006000    ................
   2     010   000000 006000   000011 006000   777777 677777   677777 777777    ................
   2     014   000002 006000   000007 006000   000004 006000   000003 006000    ................
   2     020   737777 777777   773777 777777   000013 006000   777777 777737    ................
   2     024   777777 777757   000014 006000   000010 006000   777777 737777    ................
   2     030   777777 577777   000000 000157   000000 000044   000031 006000    .......o...$....
   2     034   000032 006000   000002 006000   000000 000170   000000 000034    ...........x....
   2     040   000037 006000   000002 006000   000036 006000                    ............
      972     7286    1   END TDP$SYSCON;
      973     7287        %EOD;

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:157  
--  Include file information  --

   TM_DATA_M.:E05TOU  is referenced.
   TD_ERRORS_C.:E05TOU  is referenced.
   TD$CP6V_C.:E05TOU  is referenced.
   SS_CNTRLD_R.:E05TOU  cannot be made into a system file and is referenced.
   SS_CNTRL_R.:E05TOU  cannot be made into a system file and is referenced.
   SS_SCHED_R.:E05TOU  cannot be made into a system file and is referenced.
   SS_SCHED_C.:E05TOU  is referenced.
   N_FC_C.:E05TOU  is referenced.
   NI_MACROS_C.:E05TOU  cannot be made into a system file and is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   NI_DATA_C.:E05TOU  is referenced.
   MM_MACRO_M.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   MM$SYSGEN.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   MM_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   KI_SUBS_C.:E05TOU  is referenced.
   KI_MACROS_C.:E05TOU  is referenced.
   KI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   JG_GHOSTS_C.:E05TOU  is referenced.
   IS$MACROS.:E05TOU  is referenced.
   HF_LOCK_C.:E05TOU  cannot be made into a system file and is referenced.
   HF_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   FR_ERRORS_C.:E05TOU  is referenced.
   FP_MACRO_C.:E05TOU  is referenced.
   EL_SUBS_C.:E05TOU  is referenced.
   EL$TABLES.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure TDP$SYSCON.
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:158  

 **** Variables and constants ****

  ****  Section 000 RoData TDP$SYSCON

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     1-0-0/h UBIN(18)    r     1 H_DPS8000_SPLIT_TABLE(0:4)
     0-0-0/b BIT         r     1 MCA_FW_LOAD(0:15)

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     5-0-0/w PTR         r     1 @ERR                       4-0-0/w PTR         r     1 @RESULT
     3-0-0/w PTR         r     1 @SYSCON_V                  6-0-0/w PTR         r     1 ADCT$(0:1)
    10-0-0/d STRC(72)    r     1 BOOTINFO                  12-0-0/w PTR         r     1 BUF$
    13-0-0/w SBIN        r     1 BUFX                      14-0-0/w UBIN        r     1 CHAN
    15-0-0/w SBIN        r     1 CHANX                     16-0-0/w UBIN        r     1 CPUX
    17-0-0/w PTR         r     1 DCT$                      20-0-0/w PTR         r     1 DQH$
    21-0-0/w STRC(243)   r     1 EL$CHNGAARD               30-0-0/w STRC(306)   r     1 EL$SYSCON
    *0-0-0/w SBIN        r     1 ERR                       41-0-0/w UBIN        r     1 FEI
    42-0-0/w PTR         r     1 FEI$                      43-0-0/w UBIN        r     1 FEX
    44-0-0/w UBIN        r     1 FIRST_PAGE                45-0-0/w UBIN        r     1 I
    46-0-0/w UBIN        r     1 IOM#                      47-0-0/w PTR         r     1 IOM$
    50-0-0/w UBIN        r     1 IPC                       51-0-0/w UBIN        r     1 J
    52-0-0/w UBIN        r     1 LAST_PAGE                 53-0-0/w PTR         r     1 MDCT$
    54-0-0/w UBIN        r     1 MDCTX                     55-0-0/w SBIN        r     1 NCHANS
    56-0-0/w BIT         r     1 ONLYSCONS                 57-0-0/w UBIN        r     1 PHY_CPU
    60-0-0/w UBIN        r     1 REL_PAGE                  61-0-0/w PTR         r     1 REQ$
    *0-0-0/d STRC(72)    r     1 RESULT                    62-0-0/w UBIN        r     1 SCUX
    63-0-0/w PTR         r     1 SQH$                      *0-0-0/d STRC(118)   r     1 SYSCON_V
    64-0-0/w PTR         r     1 TDQH$                     65-0-0/w PTR         r     1 TEMP$

  ****  SYMREF variables  ****

PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:159  
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$JIT$                     0-0-0/w PTR         r     1 B$SCU$
     0-0-0/w PTR         r     1 FP_OPCI$$                  0-0-0/w UBIN        r     1 HW_CHANS
     0-0-0/w BIT         r     1 HW_IMX                     0-0-0/w BIT         r     1 HW_IOP
     0-0-0/d STRC(72)    r     1 H_DPS8000_CPU_CONF_REG
     0-0-0/d STRC(72)    r     1 H_DPS8000_SCU_CONF_REG
     0-0-0/w STRC(72)    r     1 H_DPS8000_SCU_INFO(0:1)
     0-0-0/d STRC(288)   r     1 H_RPM_CONNECT_TABLE        0-0-0/w BIT         r     1 H_RPM_FLG
     0-0-0/w PTR         r     1 KI_FEI$$                   0-0-0/w UBIN        r     1 KI_MXFE
     0-0-0/w UBIN        r     1 KI_NODES                   0-0-0/w PTR         r     1 MM_BYP$
     0-0-0/w SBIN        r     1 MM_GAPSZ                   0-0-0/w SBIN        r     1 MM_PCORE
     0-0-0/w PTR         r     1 N$DCT$$                    0-0-0/w PTR         r     1 N$FQ$
     0-0-0/w PTR         r     1 NI$CHT$                    0-0-0/w PTR         r     1 NI$FQ$
     0-0-0/w PTR         r     1 NI$IBUF$
     0-0-0/w PTR         r     1 NI$IOM$(0:3)
     0-0-0/w PTR         r     1 NI$RP$
     0-0-0/w UBIN        r     1 NI_CHANS(0:3)
     0-0-0/w SBIN        r     1 NI_IOMS
     0-0-0/w UBIN        r     1 NI_MAINT_DCTX(0:3)
     0-0-0/w UBIN        r     1 NK_MXLOCAL
     0-0-0/w SBIN        r     1 S_MPSTATE(0:7)
     0-0-0/w UBIN        r     1 S_NSCPU                    0-0-0/w UBIN        r     1 S_PNO
     0-0-0/w UBIN        r     1 S_PORTNR(0:7)

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(8856)  r     1 B$JIT                      0-0-0/w STRC(1332)  r     1 DCT
     0-0-0/w STRC(648)   r     1 DQH                        0-0-0/w STRC(108)   r     1 FP$OPCI
     0-0-0/w STRC(252)   r     1 IOM                        0-0-0/w STRC(612)   r     1 KI$FEI
     0-0-0/w PTR         r     1 KI$FEI$(0:0)
     0-0-0/w STRC(14616) r     1 MCA_CFG                    0-0-0/w STRC(1332)  r     1 MDCT
     0-0-0/w PTR         r     1 N$DCT$(0:0)                0-0-0/w STRC(72)    r     1 NI$CHT(0:127)
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:160  
     0-0-0/d STRC(1080)  r     1 REQ                        0-0-0/w STRC(252)   r     1 SQH


   Procedure TDP$SYSCON requires 2377 words for executable code.
   Procedure TDP$SYSCON requires 62 words of local(AUTO) storage.
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:161  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:162  
          MINI XREF LISTING

ADCT$
      5987**DCL      6599<<ASSIGN   6600<<ASSIGN   6603<<ASSIGN   6604<<ASSIGN   6638>>IF       6641>>CALL
      6642>>CALL     6643>>ASSIGN
ANOTHER_IOM
      6755**LABEL    6756--GOTO
B$JIT.ACCN
       338**DCL      7180>>ASSIGN   7186>>ASSIGN
B$JIT.CPFLAGS1.SLEAZE
       432**DCL       432--REDEF
B$JIT.ERR.MID
       339**DCL       339--REDEF
B$JIT.JRESPEAK
       500**DCL       501--REDEF
B$JIT.ORIGINATOR_PORT.FROM_CR
       609**DCL       609--REDEF     610--REDEF
B$JIT.PNR
       513**DCL       513--REDEF
B$JIT.SYSID
       338**DCL      7182>>ASSIGN   7188>>ASSIGN
B$JIT.TSLINE
       607**DCL       608--REDEF
B$JIT.UNAME
       338**DCL      7181>>ASSIGN   7187>>ASSIGN
B$JIT.USER
       338**DCL      7178>>IF
B$JIT$
      5978**DCL       333--IMP-PTR  7178>>IF       7180>>ASSIGN   7181>>ASSIGN   7182>>ASSIGN   7186>>ASSIGN
      7187>>ASSIGN   7188>>ASSIGN
B$SCU$
      5980**DCL      6791<>CALL     6803<>CALL     7034<>CALL     7100<>CALL
BAG_IT
      6959**LABEL    6949--CALLALT
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:163  
BOOTINFO
      5989**DCL      6444<<ASSIGN   6571<>CALL     6661<>CALL
BOOTINFO.BOOTINFO
      5990**DCL      7184>>IF       7185>>ASSIGN   7197>>ASSIGN   7201>>ASSIGN
BUF$
      5993**DCL      6213--IMP-PTR  6792<>CALL     6796<>CALL     6804<>CALL     6808<>CALL     6832<>CALL
      6847<>CALL     7022<>CALL     7032<>CALL     7055<>CALL     7061<>CALL     7066>>IF       7067>>ASSIGN
      7068>>DOINDEX  7075>>IF       7089<>CALL     7094<>CALL     7102<>CALL     7110<>CALL     7149<>CALL
      7267<>CALL     7284<>CALL
BUFX
      5994**DCL      6792<>CALL     6793<>CALL     6796<>CALL     6804<>CALL     6805<>CALL     6808<>CALL
      6832<>CALL     6834<>CALL     6837<>CALL     6841<>CALL     6844<>CALL     6847<>CALL     7022<>CALL
      7027<>CALL     7029<>CALL     7032<>CALL     7055<>CALL     7059<>CALL     7061<>CALL     7089<>CALL
      7094<>CALL     7095<>CALL     7097<>CALL     7102<>CALL     7110<>CALL     7111<>CALL     7119<>CALL
      7122<>CALL     7126<>CALL     7129<>CALL     7149<>CALL     7267<>CALL     7284<>CALL
CHAN
      5995**DCL      7067<<ASSIGN   7068>>DOINDEX  7068>>DOINDEX
CHANX
      5996**DCL      6451<<ASSIGN   6452>>ASSIGN   6522>>IF       6771<<ASSIGN   6774<<ASSIGN   6777>>ASSIGN
      7042<<ASSIGN   7044<<ASSIGN   7045>>ASSIGN
CPUX
      5997**DCL      6490<<DOINDEX  6491>>IF       6799>>IF       6800>>IF       6802>>ASSIGN   6805>>CALL
      6807>>ASSIGN   7092>>IF       7097>>CALL     7099>>ASSIGN   7101>>ASSIGN   7208>>IF
DCT
      6042**DCL      6566<>CALL     6641<>CALL     6650<>CALL     6661<>CALL     6934<>CALL     6946<>CALL
DCT.DCTX
      6043**DCL      6642<>CALL     6653<>CALL     6950>>ASSIGN
DCT.DEVNM
      6042**DCL      6461>>IF
DCT.DFLG.CHECKWRITE
      6048**DCL      7171<<ASSIGN   7200>>ASSIGN
DCT.DFLG.CONSOLE
      6045**DCL      6580>>IF       6584>>IF       6647>>IF       6657>>IF       6945>>IF       6959>>IF
DCT.DFLG.MPCSTOP
      6047**DCL      6672>>IF       6928>>IF
DCT.DFLG.MPCSUSPENDED
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:164  
      6047**DCL      6672>>IF       6928>>IF
DCT.DP
      6062**DCL      6069--REDEF    6072--REDEF    6073--REDEF    6075--REDEF    6075--REDEF    6076--REDEF
      6077--REDEF    6077--REDEF
DCT.DP.MIRROR
      6064**DCL      6948<<ASSIGN
DCT.DP.MIRROR.DCTX
      6067**DCL      6595>>ASSIGN
DCT.DP.MIRROR.FLAG
      6064**DCL      6592>>IF
DCT.DP.MIRROR.PRI
      6066**DCL      6597>>IF
DCT.DQH$
      6058**DCL      6532>>IF       6562>>IF       6566<>CALL     6658>>ASSIGN   6659>>ASSIGN   6711>>IF
      6878>>IF       6880<<ASSIGN   6881>>IF       6884<<ASSIGN   6911>>IF       6914>>ASSIGN   6918>>IF
      6919>>IF       6922>>IF       6960>>ASSIGN   7059>>CALL
DCT.MCA.RESERVED
      6077**DCL      6767>>IF
DCT.MPC.FWNAME
      6072**DCL      7079<<ASSIGN   7081<<ASSIGN   7083<<ASSIGN   7085<<ASSIGN
DCT.MPC.IOCHAN.IOM
      6070**DCL      6753>>IF       6753>>IF       6974>>IF
DCT.MPC.IOCHANX
      6070**DCL      6070--REDEF    6522>>IF       6543>>ASSIGN   6693>>ASSIGN   6753>>IF       6974>>IF
      6983>>ASSIGN
DCT.MPC.TYPE
      6070**DCL      6520>>IF       6520>>IF       6522>>IF       6562>>IF       6881>>IF       6888>>IF
DCT.RAT$
      6043**DCL      6638>>IF       6647>>IF       6945>>IF
DCT.SQH$
      6057**DCL      6467>>ASSIGN
DCT.STATE
      6052**DCL      6609>>IF       6609>>IF
DCT.STATUS
      6059**DCL      7199>>ASSIGN
DCT.STATUS.DOWN
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:165  
      6059**DCL      6525>>IF       6532>>IF       6539>>IF       6562>>IF       6576>>IF       6584>>IF
      6620>>IF       6628>>IF       6643<<ASSIGN   6656<<ASSIGN   6672>>IF       6681>>IF       6687<<ASSIGN
      6711>>IF       6775<<ASSIGN   6888>>IF       6900>>IF       6928>>IF       6961<<ASSIGN   6981<<ASSIGN
      7039<<ASSIGN
DCT.STATUS.MSOS_PART
      6061**DCL      6620>>IF       6672>>IF       6928>>IF       6944>>IF       6981>>ASSIGN
DCT.STATUS.SYSCON_PART
      6060**DCL      6525>>IF       6532>>IF       6576>>IF       6622<<ASSIGN   6666>>IF       6672>>IF
      6681>>IF       6688<<ASSIGN   6751>>IF       6776<<ASSIGN   6900>>IF       6900>>IF       6902<<ASSIGN
      6919>>IF       6928>>IF       6943<<ASSIGN   6967>>IF       6980<<ASSIGN   7040<<ASSIGN
DCT.STATUS.TDOK
      6060**DCL      7161<<ASSIGN
DCT.STATUS.TND
      6060**DCL      6905>>IF       6971>>IF
DCT.TDUSER#
      6061**DCL      6899<<ASSIGN
DCT.TYPE
      6052**DCL      6578>>IF       6592>>IF       6651>>IF       6668>>IF       6681>>IF       6751>>IF
      6907>>IF       6909>>DOCASE   6947>>IF       6969>>IF       7077>>DOCASE
DCT$
      5998**DCL      6042--IMP-PTR  6458<<ASSIGN   6462<<ASSIGN   6465>>IF       6467>>ASSIGN   6576>>IF
      6576>>IF       6578>>IF       6580>>IF       6583>>IF       6592>>IF       6592>>IF       6595>>ASSIGN
      6597>>IF       6599>>ASSIGN   6604>>ASSIGN   6609>>IF       6609>>IF       6620>>IF       6620>>IF
      6622>>ASSIGN   6628>>IF       6647>>IF       6647>>IF       6650>>CALL     6651>>IF       6653>>CALL
      6656>>ASSIGN   6657>>IF       6658>>ASSIGN   6659>>ASSIGN   6661>>CALL     6666>>IF       6668>>IF
      6671>>IF       6687>>ASSIGN   6688>>ASSIGN   6693>>ASSIGN   6750<<ASSIGN   6751>>IF       6751>>IF
      6753>>IF       6753>>IF       6753>>IF       6765<<ASSIGN   6767>>IF       6775>>ASSIGN   6776>>ASSIGN
      6899>>ASSIGN   6900>>IF       6900>>IF       6900>>IF       6902>>ASSIGN   6905>>IF       6907>>IF
      6909>>DOCASE   6911>>IF       6914>>ASSIGN   6918>>IF       6919>>IF       6922>>IF       6943>>ASSIGN
      6944>>IF       6945>>IF       6945>>IF       6946>>CALL     6947>>IF       6948>>ASSIGN   6950>>ASSIGN
      6959>>IF       6960>>ASSIGN   6961>>ASSIGN   6967>>IF       6969>>IF       6971>>IF       6974>>IF
      6974>>IF       6980>>ASSIGN   6981>>ASSIGN   6981>>ASSIGN   6983>>ASSIGN   7038<<ASSIGN   7039>>ASSIGN
      7040>>ASSIGN   7161>>ASSIGN   7171>>ASSIGN   7199>>ASSIGN   7200>>ASSIGN
DO_FUNCTION
      6509**LABEL    6496--GOTO     6503--GOTO
DO_RELEASE
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:166  
      6788**LABEL    6738--GOTO
DQH
      6090**DCL      6567<>CALL     6571<>CALL     6696<>CALL     6793<>CALL     6805<>CALL     6834<>CALL
      6837<>CALL     6841<>CALL     6844<>CALL     6892<>CALL     6987<>CALL     7027<>CALL     7029<>CALL
      7059<>CALL     7095<>CALL     7097<>CALL     7111<>CALL     7119<>CALL     7122<>CALL     7126<>CALL
      7129<>CALL
DQH.CHANSTATE.DOWN
      6099**DCL      6561<<ASSIGN   6695<<ASSIGN   6891<<ASSIGN   6986<<ASSIGN
DQH.FEX
      6093**DCL      6708>>IF
DQH.IOCHAN.IOM
      6093**DCL      6870>>IF       6911>>IF       6994>>IF
DQH.IOCHANX
      6092**DCL      6093--REDEF
DQH.IPCNUM
      6101**DCL      7072<<ASSIGN
DQH.MBX$
      6101**DCL      6102--REDEF
DQH.MPC$
      6097**DCL      6516>>IF       6520>>IF       6520>>IF       6522>>IF       6522>>IF       6539>>IF
      6543>>ASSIGN   6562>>IF       6562>>IF       6562>>IF       6566>>CALL     6566>>CALL     6864>>IF
      6878>>IF       6880>>ASSIGN   6881>>IF       6881>>IF       6884>>ASSIGN   6888>>IF       6888>>IF
      6919>>IF       7077>>DOCASE   7079>>ASSIGN   7081>>ASSIGN   7083>>ASSIGN   7085>>ASSIGN
DQH.SQH$
      6096**DCL      6456>>ASSIGN
DQH.STATE
      6094**DCL      6723<<ASSIGN   6728<<ASSIGN   7002<<ASSIGN   7008<<ASSIGN
DQH.STATUS
      6090**DCL      7195>>ASSIGN
DQH.STATUS.DOWN
      6090**DCL      6544>>IF       6560<<ASSIGN   6658<<ASSIGN   6721<<ASSIGN   6726<<ASSIGN   6778<<ASSIGN
      6877<<ASSIGN   6881>>IF       6960<<ASSIGN   6985>>IF       7000<<ASSIGN   7006<<ASSIGN   7046<<ASSIGN
DQH.STATUS.MSOS_PART
      6092**DCL      6873>>IF
DQH.STATUS.SYSCON_PART
      6091**DCL      6518>>IF       6544>>IF       6559<<ASSIGN   6659<<ASSIGN   6722<<ASSIGN   6727<<ASSIGN
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:167  
      6744>>IF       6779<<ASSIGN   6866>>IF       6872<<ASSIGN   6914<<ASSIGN   6918>>IF       6922>>IF
      7001<<ASSIGN   7007<<ASSIGN   7047<<ASSIGN
DQH.STATUS.TDOK
      6091**DCL      7159<<ASSIGN
DQH.STATUS.TND
      6091**DCL      6868>>IF
DQH$
      5999**DCL      6090--IMP-PTR  6452<<ASSIGN   6453>>IF       6456>>ASSIGN   6482<<ASSIGN   6516>>IF
      6518>>IF       6520>>IF       6520>>IF       6522>>IF       6522>>IF       6532>>IF       6539>>IF
      6543>>ASSIGN   6544>>IF       6559>>ASSIGN   6560>>ASSIGN   6561>>ASSIGN   6562>>IF       6562>>IF
      6562>>IF       6562>>IF       6566>>CALL     6566>>CALL     6567>>CALL     6571>>CALL     6708>>IF
      6711>>IF       6721>>ASSIGN   6722>>ASSIGN   6723>>ASSIGN   6726>>ASSIGN   6727>>ASSIGN   6728>>ASSIGN
      6742<<ASSIGN   6743>>IF       6744>>IF       6777<<ASSIGN   6778>>ASSIGN   6779>>ASSIGN   6792<>CALL
      6793>>CALL     6804<>CALL     6805>>CALL     6832<>CALL     6834>>CALL     6837>>CALL     6841>>CALL
      6844>>CALL     6864>>IF       6866>>IF       6868>>IF       6870>>IF       6872>>ASSIGN   6873>>IF
      6877>>ASSIGN   6878>>IF       6880>>ASSIGN   6880>>ASSIGN   6881>>IF       6881>>IF       6884>>ASSIGN
      6884>>ASSIGN   6888>>IF       6888>>IF       6891>>ASSIGN   6892>>CALL     6994>>IF       7000>>ASSIGN
      7001>>ASSIGN   7002>>ASSIGN   7006>>ASSIGN   7007>>ASSIGN   7008>>ASSIGN   7022<>CALL     7027>>CALL
      7029>>CALL     7045<<ASSIGN   7046>>ASSIGN   7047>>ASSIGN   7065<<ASSIGN   7071<<ASSIGN   7072>>ASSIGN
      7075>>IF       7077>>DOCASE   7079>>ASSIGN   7081>>ASSIGN   7083>>ASSIGN   7085>>ASSIGN   7094<>CALL
      7095>>CALL     7097>>CALL     7110<>CALL     7111>>CALL     7119>>CALL     7122>>CALL     7126>>CALL
      7129>>CALL     7159>>ASSIGN   7195>>ASSIGN
EL$CHNGAARD
      6001**DCL      7185<<ASSIGN   7189<>CALL     7189--CALL
EL$CHNGAARD.ACCN
      6002**DCL      7186<<ASSIGN
EL$CHNGAARD.SYSID
      6002**DCL      7188<<ASSIGN
EL$CHNGAARD.UNAME
      6002**DCL      7187<<ASSIGN
EL$SYSCON
      6005**DCL      7179<<ASSIGN   7183<>CALL     7183--CALL
EL$SYSCON.ACCN
      6006**DCL      7180<<ASSIGN
EL$SYSCON.SYSID
      6006**DCL      7182<<ASSIGN
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:168  
EL$SYSCON.UNAME
      6006**DCL      7181<<ASSIGN
ELA$SYSLOG
      5943**DCL-ENT  7183--CALL     7189--CALL
ERR
      5930**DCL         7--PROC     6445<<ASSIGN   6471<<ASSIGN   6479<<ASSIGN   6588<<ASSIGN   6634<<ASSIGN
      6641<>CALL     6650<>CALL     6745<<ASSIGN   6758<<ASSIGN   6768<<ASSIGN   6811<<ASSIGN   6851<<ASSIGN
      6940<<ASSIGN   6946<>CALL     7056<<ASSIGN   7105<<ASSIGN   7163<<ASSIGN   7219<<ASSIGN   7222<<ASSIGN
      7225<<ASSIGN   7228<<ASSIGN   7231<<ASSIGN   7234<<ASSIGN   7237<<ASSIGN   7240<<ASSIGN   7243<<ASSIGN
      7246<<ASSIGN   7249<<ASSIGN   7252<<ASSIGN   7255<<ASSIGN   7258<<ASSIGN   7261<<ASSIGN   7264<<ASSIGN
      7269<<ASSIGN   7272<<ASSIGN   7274<<ASSIGN   7278<<ASSIGN   7281<<ASSIGN   7283<<ASSIGN
ERR_CPUMASTER
      7258**LABEL    6489--GOTO
ERR_CPUNOTSTOP
      7252**LABEL    6801--GOTO
ERR_CWFORNONDP
      7213**LABEL    7170--GOTO     7173--GOTO
ERR_DEVNOTIDLE
      7222**LABEL    6612--GOTO     6618--GOTO
ERR_IOMDOWN
      7228**LABEL    6871--GOTO     6912--GOTO     6978--GOTO     6995--GOTO
ERR_IOMNOTENABLED
      7249**LABEL    7019--GOTO
ERR_NOPARTRETCHAN
      7225**LABEL    6517--GOTO     6865--GOTO
ERR_NOPARTRETFEP
      7219**LABEL    6729--GOTO     7003--GOTO
ERR_ONLYPATH
      7231**LABEL    6527--GOTO     6535--GOTO     6553--GOTO     6684--GOTO     6713--GOTO
ERR_RELEASE
      7255**LABEL    6792--CALLALT  6804--CALLALT  6832--CALLALT  7094--CALLALT  7110--CALLALT
ERR_RETURN
      7213**LABEL    6641--CALLALT  6650--CALLALT  6812--GOTO     6946--CALLALT  7022--CALLALT  7057--GOTO
      7062--GOTO     7106--GOTO
ERR_SCNNOCOMP
      7234**LABEL    6455--GOTO     6466--GOTO     6486--GOTO     6493--GOTO     6498--GOTO
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:169  
ERR_SCNNOTDEV
      7237**LABEL    6579--GOTO     6908--GOTO
ERR_SCNNOTMPC
      7240**LABEL    6669--GOTO     6970--GOTO
ERR_SCNTDUSER
      7243**LABEL    6869--GOTO     6906--GOTO     6972--GOTO
ERR_SCUNOTCONFIG
      7264**LABEL    6501--GOTO
ERR_SCUNOTVALID
      7261**LABEL    6502--GOTO
FEI
      6008**DCL      6474<<DOINDEX  6475>>ASSIGN   6717<>CALL     6718>>ASSIGN   6996<>CALL     6997>>ASSIGN
FEI$
      6009**DCL      6132--IMP-PTR  6475<<ASSIGN   6476>>IF       6482>>ASSIGN   6718<<ASSIGN   6719>>IF
      6997<<ASSIGN   6998>>IF
FEX
      6010**DCL      6469<<ASSIGN   6470>>IF       6476>>IF
FIRST_PAGE
      6011**DCL      6816<<ASSIGN   6819<>CALL     6822<>CALL     7132<<ASSIGN   7137>>DOINDEX
FMC$RELSCU
      5944**DCL-ENT  6819--CALL
FMN$AVR
      5945**DCL-ENT  6642--CALL     6653--CALL
FOUND_FEP
      6479**LABEL    6477--GOTO
FP$OPCI.FEI#
      6111**DCL      6708>>IF
FP$OPCI.LNK$
      6110**DCL      6715>>ASSIGN
FP_OPCI$$
      5981**DCL      6706>>ASSIGN
GET_PHY_CPU
      6495**LABEL    6491--GOTO
HFA$STARTCPU
      5946**DCL-ENT  6831--CALL     6850--CALL     7143--CALL
HFA$STOPCPU
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:170  
      5947**DCL-ENT  6821--CALL     7136--CALL
HFB$DISPORT
      5948**DCL-ENT  6784--CALL
HFB$ENAPORT
      5949**DCL-ENT  7052--CALL
HFC$LOCK
      1920**DCL-ENT  6557--CALL     6690--CALL     6875--CALL
HFC$RCONF_8000
      5950**DCL-ENT  6828--CALL     7113--CALL
HFC$SCONF_8000
      5952**DCL-ENT  6830--CALL     7117--CALL
HFC$SSCR
      5953**DCL-ENT  6791--CALL     6803--CALL     7034--CALL     7100--CALL
HFC$UNLOCK
      1920**DCL-ENT  6569--CALL     6700--CALL     6886--CALL
HW_CHANS
      1905**DCL      6453>>IF
HW_IMX
      1906**DCL      6764>>IF       6766>>IF       6788>>IF       7016>>IF       7037>>IF       7041>>IF
      7054>>IF
HW_IOP
      1903**DCL      6764>>IF       7037>>IF
H_DPS8000_CPU_CONF_REG.ADDRESS_SPLIT
      1894**DCL      7115<<ASSIGN
H_DPS8000_CPU_CONF_REG.PORT_B_ENABLED
      1894**DCL      6829<<ASSIGN   7114<<ASSIGN
H_DPS8000_SCU_CONF_REG
      1894**DCL      6791<>CALL     6803<>CALL     7034<>CALL     7100<>CALL
H_DPS8000_SCU_CONF_REG.PORTS
      1895**DCL      6790<<ASSIGN   6802<<ASSIGN   6836>>IF       6843>>IF       7018>>IF       7033<<ASSIGN
      7099<<ASSIGN   7121>>IF       7128>>IF
H_DPS8000_SCU_INFO.LOWER_BOUND
      1895**DCL      6816>>ASSIGN   7115>>ASSIGN   7132>>ASSIGN   7144>>IF
H_DPS8000_SCU_INFO.PAGES
      1896**DCL      6820<<ASSIGN   6820>>ASSIGN   6823<<ASSIGN   6823>>ASSIGN   6824>>IF       7135<<ASSIGN
      7139<<ASSIGN   7139>>ASSIGN   7142>>ASSIGN   7144>>IF
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:171  
H_DPS8000_SCU_INFO.SCU_STATUS.LOW_MEM
      1897**DCL      6502>>IF
H_DPS8000_SCU_INFO.SCU_STATUS.NOT_CONFIG
      1896**DCL      6501>>IF
H_DPS8000_SCU_INFO.SCU_STATUS.REL_BIT
      1896**DCL      6825<<ASSIGN   7147<<ASSIGN   7211>>IF
H_DPS8000_SCU_INFO.SCU_STATUS.REL_IN_PROGRESS
      1896**DCL      6818<<ASSIGN   6826<<ASSIGN
H_DPS8000_SCU_INFO.SCU_STATUS.RET_IN_PROGRESS
      1897**DCL      7134<<ASSIGN   7146<<ASSIGN
H_DPS8000_SCU_INFO.UPPER_BOUND
      1896**DCL      6817>>ASSIGN   7133>>ASSIGN   7144>>IF
H_DPS8000_SPLIT_TABLE
      6441**DCL      7115>>ASSIGN
H_RPM_CONNECT_TABLE.ENTRI.PORT#
      1898**DCL      6496>>IF
H_RPM_FLG
      1876**DCL      6810>>IF       7104>>IF
I
      6012**DCL      6459<<DOINDEX  6460>>IF       6461>>IF       6462>>ASSIGN   6524<<DOINDEX  6525>>IF
      6525>>IF       6531<<DOINDEX  6532>>IF       6532>>IF       6532>>IF       6542<<DOINDEX  6543>>ASSIGN
      6582<<DOINDEX  6583>>IF       6583>>IF       6584>>IF       6584>>IF       6637<<DOINDEX  6638>>IF
      6638>>IF       6641>>CALL     6642>>CALL     6643>>ASSIGN   6670<<DOINDEX  6671>>IF       6671>>IF
      6672>>IF       6672>>IF       6672>>IF       6672>>IF       6672>>IF       6680<<DOINDEX  6681>>IF
      6681>>IF       6681>>IF       6692<<DOINDEX  6693>>ASSIGN   6709<<DOINDEX  6710>>IF       6711>>IF
      6711>>IF       6741<<DOINDEX  6742>>ASSIGN   6749<<DOINDEX  6750>>ASSIGN   6783<<ASSIGN   6784<>CALL
      6789<<ASSIGN   6790>>ASSIGN   6793<>CALL     6925<<DOINDEX  6927>>IF       6928>>IF       6928>>IF
      6928>>IF       6928>>IF       6928>>IF       6934>>CALL     6973<<DOINDEX  6974>>IF       6974>>IF
      6982<<DOINDEX  6983>>ASSIGN   7021<<ASSIGN   7029<>CALL     7033>>ASSIGN   7051<<ASSIGN   7052<>CALL
      7183<>CALL     7189<>CALL
IOM.ADDRESS
      6116**DCL      6783>>ASSIGN   6789>>ASSIGN   7021>>ASSIGN   7051>>ASSIGN
IOM.IOM#
      6115**DCL      6740>>ASSIGN   6741>>DOINDEX  6753>>IF       6765>>ASSIGN   6771>>ASSIGN   6774>>ASSIGN
      7018>>IF       7038>>ASSIGN   7042>>ASSIGN   7044>>ASSIGN
IOM.STATUS.DOWN
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:172  
      6116**DCL      6737>>IF       6782<<ASSIGN   6795<<ASSIGN   7017>>IF       7031<<ASSIGN   7050<<ASSIGN
      7203>>ASSIGN   7206>>ASSIGN
IOM.STATUS.MSOS_PART
      6116**DCL      6781>>IF       7049>>IF       7205>>ASSIGN
IOM.STATUS.SYSCON_PART
      6116**DCL      6735>>IF       6753>>IF       6763<<ASSIGN   6870>>IF       6911>>IF       6974>>IF
      6994>>IF       7014>>IF       7036<<ASSIGN   7204>>ASSIGN
IOM#
      6013**DCL      6487<<ASSIGN   7027>>CALL
IOM$
      6014**DCL      6115--IMP-PTR  6484<<ASSIGN   6485>>IF       6735>>IF       6737>>IF       6740>>ASSIGN
      6741>>DOINDEX  6753>>IF       6763>>ASSIGN   6765>>ASSIGN   6771>>ASSIGN   6774>>ASSIGN   6781>>IF
      6782>>ASSIGN   6783>>ASSIGN   6789>>ASSIGN   6795>>ASSIGN   7014>>IF       7017>>IF       7018>>IF
      7021>>ASSIGN   7031>>ASSIGN   7036>>ASSIGN   7038>>ASSIGN   7042>>ASSIGN   7044>>ASSIGN   7049>>IF
      7050>>ASSIGN   7051>>ASSIGN   7203>>ASSIGN   7204>>ASSIGN   7205>>ASSIGN   7206>>ASSIGN
IOM_AVAILABLE
      6973**LABEL    6976--GOTO
IPC
      6015**DCL      7064<<DOINDEX  7066>>IF       7067>>ASSIGN   7068>>DOINDEX  7072>>ASSIGN   7075>>IF
J
      6016**DCL      6740<<ASSIGN   6741>>DOINDEX  6741>>DOINDEX  6752<<DOINDEX  6753>>IF       6753>>IF
      6753>>IF       6926<<ASSIGN   7068<<DOINDEX  7069>>ASSIGN
KI$FEI.BD$
      6167**DCL      6168--REDEF
KI$FEI.BDAD.WADDR
      6169**DCL      6170--REDEF
KI$FEI.FECH
      6134**DCL      6482>>ASSIGN
KI$FEI.FEP#
      6177**DCL      6476>>IF
KI$FEI.PBST.PROB
      6185**DCL      6719>>IF       6998>>IF
KI$FEI.RCVPB
      6183**DCL      6184--REDEF
KI$FEI$
      3298**DCL      6475>>ASSIGN   6718>>ASSIGN   6997>>ASSIGN
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:173  
KIQ$PARTFEP
      5954**DCL-ENT  6717--CALL
KIQ$UPRTFEP
      5955**DCL-ENT  6996--CALL
KI_FEI$$
      3297**DCL      3298--IMP-PTR  6475>>ASSIGN   6718>>ASSIGN   6997>>ASSIGN
KI_MXFE
      3306**DCL      6474>>DOINDEX
KI_NODES
      3305**DCL      6470>>IF
LAST_PAGE
      6017**DCL      6817<<ASSIGN   6819<>CALL     6822<>CALL     7133<<ASSIGN   7137>>DOINDEX
MCA_CFG.LEVEL_1.CONSOLE_CNTL
      6275**DCL      6281--REDEF    6285--REDEF
MCA_CFG.LEVEL_1.HARDWARE_ID
      6296**DCL      7075>>IF
MCA_CFG.LEVEL_1.LOG_CHNS
      6299**DCL      7068>>DOINDEX
MCA_CFG.LEVEL_1.PRI_CHN
      6298**DCL      7067>>ASSIGN
MCA_CFG.LEVEL_1.STATE
      6274**DCL      7066>>IF
MCA_FW_LOAD
      6438**DCL      7075>>IF
MDCT.DP
      6342**DCL      6349--REDEF    6352--REDEF    6353--REDEF    6355--REDEF    6355--REDEF    6356--REDEF
      6357--REDEF    6357--REDEF
MDCT.MPC.IOCHANX
      6350**DCL      6350--REDEF
MDCT.STATE
      6332**DCL      6615>>IF       6615>>IF
MDCT.STATUS.DOWN
      6339**DCL      6625>>IF
MDCT.STATUS.MSOS_PART
      6341**DCL      6625>>IF
MDCT.STATUS.SYSCON_PART
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:174  
      6340**DCL      6627<<ASSIGN   6632>>IF
MDCT$
      6018**DCL      6322--IMP-PTR  6596<<ASSIGN   6600>>ASSIGN   6603>>ASSIGN   6608<<ASSIGN   6613>>IF
      6615>>IF       6615>>IF       6623>>IF       6625>>IF       6625>>IF       6627>>ASSIGN   6630>>IF
      6632>>IF
MDCTX
      6019**DCL      6595<<ASSIGN   6596>>ASSIGN
MM$DESC.BOUND
      4527**DCL      4528--REDEF
MM$DESC.FLGS
      4528**DCL      4528--REDEF
MM$PPUT.USER#
      4516**DCL      4516--REDEF
MMB$RELMEM
      5956**DCL-ENT  6822--CALL
MMB$RETMEM
      5957**DCL-ENT  7138--CALL
MM_BYP$
      4447**DCL      4447--IMP-PTR
MM_GAPSZ
      4449**DCL      6827>>ASSIGN   7142>>ASSIGN
MM_PCORE
      4449**DCL      6827<<ASSIGN   6827>>ASSIGN   7142<<ASSIGN   7142>>ASSIGN
N$DCT$
      5121**DCL      6460>>IF       6461>>IF       6462>>ASSIGN   6525>>IF       6525>>IF       6532>>IF
      6532>>IF       6532>>IF       6583>>IF       6583>>IF       6584>>IF       6584>>IF       6596>>ASSIGN
      6681>>IF       6681>>IF       6681>>IF       6710>>IF       6711>>IF       6711>>IF       6750>>ASSIGN
      6765>>ASSIGN   7038>>ASSIGN   7059>>CALL
N$DCT$$
      4987**DCL      5121--IMP-PTR  6460>>IF       6461>>IF       6462>>ASSIGN   6525>>IF       6525>>IF
      6532>>IF       6532>>IF       6532>>IF       6583>>IF       6583>>IF       6584>>IF       6584>>IF
      6596>>ASSIGN   6681>>IF       6681>>IF       6681>>IF       6710>>IF       6711>>IF       6711>>IF
      6750>>ASSIGN   6765>>ASSIGN   7038>>ASSIGN   7059>>CALL
N$FQ$
      4987**DCL      5122--IMP-PTR
N$REQ_INIT.BUFADDR
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:175  
      5006**DCL      5007--REDEF    5007--REDEF
N$REQ_INIT.DLA.DRELADDR
      4998**DCL      4998--REDEF
N$REQ_INIT.DVE.EOMCHAR
      5035**DCL      5036--REDEF
N$REQ_INIT.EAINFO
      5029**DCL      5029--REDEF
N$REQ_INIT.EAINFOX
      5029**DCL      5030--REDEF
N$REQ_INIT.EVNTINFO
      5030**DCL      5030--REDEF
N$REQ_INIT.STATUS
      5011**DCL      5017--REDEF
NCHANS
      6020**DCL      6541<<ASSIGN   6549<<ASSIGN   6549>>ASSIGN   6551>>IF
NI$CHT.DQH$
      6362**DCL      6452>>ASSIGN   6482>>ASSIGN   6543>>ASSIGN   6693>>ASSIGN   6742>>ASSIGN   6777>>ASSIGN
      6983>>ASSIGN   7045>>ASSIGN   7069>>ASSIGN
NI$CHT$
      5046**DCL      6362--IMP-PTR  6452>>ASSIGN   6482>>ASSIGN   6543>>ASSIGN   6693>>ASSIGN   6742>>ASSIGN
      6777>>ASSIGN   6983>>ASSIGN   7045>>ASSIGN   7069>>ASSIGN
NI$FQ$
      5047**DCL      5123--IMP-PTR
NI$IBUF$
      5047**DCL      5123--IMP-PTR
NI$IMXMBX_INIT.PAGED_BASE
      5057**DCL      5058--REDEF    5058--REDEF
NI$IMXMBX_INIT.SIZE
      5059**DCL      5059--REDEF
NI$IOM$
      5069**DCL      6484>>ASSIGN   6753>>IF       6870>>IF       6911>>IF       6974>>IF       6994>>IF
NI$REQ_INIT.DCW
      5081**DCL      5084--REDEF
NI$REQ_INIT.DCW.TALLY
      5082**DCL      5082--REDEF
NI$REQ_INIT.IDCW.EXTA
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:176  
      5084**DCL      5084--REDEF
NI$REQ_INIT.PCW
      5086**DCL      5090--REDEF
NI$REQ_INIT.SEEK
      5091**DCL      5092--REDEF    5093--REDEF
NI$RP$
      5095**DCL      5125--IMP-PTR
NIO$QUE
      5959**DCL-ENT  6956--CALL
NIQ$GET
      5960**DCL-ENT  6949--CALL
NIW$DQHSTART
      5962**DCL-ENT  6892--CALL     6987--CALL
NIW$DQHSTOP
      5963**DCL-ENT  6567--CALL     6696--CALL
NIW$MPCDQH
      5964**DCL-ENT  6566--CALL     6934--CALL
NIX$CHANCONFIG
      5965**DCL-ENT  6571--CALL
NIX$DEVCONFIG
      5966**DCL-ENT  6661--CALL
NI_CHANS
      5095**DCL      6741>>DOINDEX
NI_IOMS
      5099**DCL      6453>>IF       6485>>IF
NI_MAINT_DCTX
      5099**DCL      6765>>ASSIGN   7038>>ASSIGN   7059>>CALL
NI_MBX_INIT.DCW.CONTROL.AE
      5117**DCL      5117--REDEF
NI_MBX_INIT.LPW.CONTROL.AE
      5113**DCL      5113--REDEF
NKP$PART
      5967**DCL-ENT  6641--CALL     6650--CALL
NKP$RTN
      5968**DCL-ENT  6946--CALL
NK_MXLOCAL
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:177  
      5982**DCL      6459>>DOINDEX  6582>>DOINDEX  6709>>DOINDEX  6749>>DOINDEX
NOT_ONLY_MPC
      6683**LABEL    6677--GOTO
ONLYSCONS
      6021**DCL      6581<<ASSIGN   6585<<ASSIGN   6587>>IF
PATH_AVAILABLE
      6940**LABEL    6915--GOTO     6920--GOTO     6923--GOTO     6936--GOTO
PHY_CPU
      6022**DCL      6495<<DOINDEX  6496>>IF       7095<>CALL
REL_PAGE
      6023**DCL      6819<>CALL     6820>>ASSIGN   6822<>CALL     6823>>ASSIGN   6827>>ASSIGN   7137<<DOINDEX
      7138<>CALL
REQ
      6373**DCL      6956<>CALL
REQ.BPMIR
      6418**DCL      6952<<ASSIGN
REQ.BUFADDR
      6382**DCL      6383--REDEF    6383--REDEF
REQ.DLA.DCTX
      6373**DCL      6950<<ASSIGN
REQ.DLA.DRELADDR
      6374**DCL      6374--REDEF
REQ.DVE.EOMCHAR
      6411**DCL      6412--REDEF
REQ.EAENTRY
      6404**DCL      6955<<ASSIGN
REQ.EAINFO
      6405**DCL      6405--REDEF
REQ.EAINFOX
      6405**DCL      6406--REDEF
REQ.EVNTINFO
      6406**DCL      6406--REDEF
REQ.FC
      6376**DCL      6951<<ASSIGN
REQ.NOALT
      6376**DCL      6953<<ASSIGN
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:178  
REQ.OPFLG
      6379**DCL      6954<<ASSIGN
REQ.STATUS
      6387**DCL      6393--REDEF
REQ$
      6024**DCL      6373--IMP-PTR  6949<>CALL     6950>>ASSIGN   6951>>ASSIGN   6952>>ASSIGN   6953>>ASSIGN
      6954>>ASSIGN   6955>>ASSIGN   6956>>CALL
RESULT
      5932**DCL         7--PROC     7195<<ASSIGN   7199<<ASSIGN
RESULT.BOOTINFO
      5933**DCL      7197<<ASSIGN   7201<<ASSIGN
RESULT.CHECKWRITE
      5932**DCL      7196<<ASSIGN   7200<<ASSIGN
RESULT.MSOSPART
      5932**DCL      7205<<ASSIGN
RESULT.PART
      5932**DCL      7203<<ASSIGN
RESULT.RELEASED
      5932**DCL      7206<<ASSIGN   7209<<ASSIGN   7212<<ASSIGN
RESULT.SYSCONPART
      5932**DCL      7204<<ASSIGN
RETURN_RESULT
      7189**LABEL    6519--GOTO     6577--GOTO     6667--GOTO     6736--GOTO     6737--GOTO     6786--GOTO
      6799--GOTO     6867--GOTO     6903--GOTO     6968--GOTO     7015--GOTO     7093--GOTO
SCUX
      6025**DCL      6500<<ASSIGN   6501>>IF       6502>>IF       6816>>ASSIGN   6817>>ASSIGN   6818>>ASSIGN
      6820>>ASSIGN   6820>>ASSIGN   6823>>ASSIGN   6823>>ASSIGN   6824>>IF       6825>>ASSIGN   6826>>ASSIGN
      6833>>IF       7111<>CALL     7115>>ASSIGN   7118>>IF       7132>>ASSIGN   7133>>ASSIGN   7134>>ASSIGN
      7135>>ASSIGN   7139>>ASSIGN   7139>>ASSIGN   7142>>ASSIGN   7144>>IF       7144>>IF       7144>>IF
      7146>>ASSIGN   7147>>ASSIGN   7211>>IF
SQH.DOOR
      6431**DCL      6431--REDEF
SQH.FDCT
      6431**DCL      6524>>DOINDEX  6524>>DOINDEX  6531>>DOINDEX  6531>>DOINDEX  6680>>DOINDEX  6680>>DOINDEX
SQH.GATE
      6431**DCL      6557<>CALL     6569<>CALL     6690<>CALL     6700<>CALL     6875<>CALL     6886<>CALL
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:179  
SQH.MPC$
      6433**DCL      6671>>IF       6671>>IF       6672>>IF       6672>>IF       6672>>IF       6672>>IF
      6672>>IF       6927>>IF       6928>>IF       6928>>IF       6928>>IF       6928>>IF       6928>>IF
      6934>>CALL
SQH.NDCT
      6432**DCL      6524>>DOINDEX  6531>>DOINDEX  6680>>DOINDEX
SQH$
      6026**DCL      6431--IMP-PTR  6456<<ASSIGN   6467<<ASSIGN   6524>>DOINDEX  6524>>DOINDEX  6524>>DOINDEX
      6531>>DOINDEX  6531>>DOINDEX  6531>>DOINDEX  6557>>CALL     6569>>CALL     6671>>IF       6671>>IF
      6672>>IF       6672>>IF       6672>>IF       6672>>IF       6672>>IF       6680>>DOINDEX  6680>>DOINDEX
      6680>>DOINDEX  6690>>CALL     6700>>CALL     6875>>CALL     6886>>CALL     6927>>IF       6928>>IF
      6928>>IF       6928>>IF       6928>>IF       6928>>IF       6934>>CALL
SSS$BLOCKM
      5969**DCL-ENT  6815--CALL     7109--CALL
SWITCH_REL_FAILED
      7277**LABEL    6793--CALLALT  6805--CALLALT  6834--CALLALT  6837--CALLALT  6841--CALLALT  6844--CALLALT
SWITCH_RET_FAILED
      7267**LABEL    7027--CALLALT  7029--CALLALT  7095--CALLALT  7097--CALLALT  7111--CALLALT  7119--CALLALT
      7122--CALLALT  7126--CALLALT  7129--CALLALT
SYSCON_V
      5937**DCL         7--PROC     7179>>ASSIGN
SYSCON_V.CHAN
      5938**DCL      6451>>ASSIGN   6453>>IF       6453>>IF       6469>>ASSIGN
SYSCON_V.COMPONENT
      5937**DCL      6449>>DOCASE   6511>>DOCASE   6859>>DOCASE   7157>>DOCASE   7167>>DOCASE   7193>>DOCASE
      7268>>IF       7271>>IF       7277>>IF       7280>>IF
SYSCON_V.CPU
      5937**DCL      6489>>IF       6491>>IF       6496>>IF
SYSCON_V.DEVNM
      5938**DCL      6461>>IF       7169>>IF
SYSCON_V.FLAG
      5938**DCL      7155>>DOCASE
SYSCON_V.FLAGVAL
      5938**DCL      7159>>ASSIGN   7161>>ASSIGN   7171>>ASSIGN
SYSCON_V.FUNCTION
      5937**DCL      6509>>DOCASE   6736>>IF       6786>>IF       7178>>IF
PL6.E3A0      #001=TDP$SYSCON File=TDP$SYSCON.:E05TSI                            WED 07/30/97 06:03 Page:180  
SYSCON_V.IOM
      5937**DCL      5937--REDEF    5937--REDEF    6451>>ASSIGN   6453>>IF       6484>>ASSIGN   6485>>IF
      6487>>ASSIGN   7059>>CALL     7067>>ASSIGN
SYSCON_V.SCU
      5937**DCL      6500>>ASSIGN
S_MPSTATE
      5692**DCL      6799>>IF       6800>>IF       6807<<ASSIGN   7092>>IF       7101<<ASSIGN   7208>>IF
S_NSCPU
      5693**DCL      6490>>DOINDEX
S_PNO
      5983**DCL      6814>>IF       7108>>IF
S_PORTNR
      5692**DCL      6489>>IF       6491>>IF       6802>>ASSIGN   6805<>CALL     7097<>CALL     7099>>ASSIGN
TDP$SYSCONEA
      5970**DCL-ENT  6955--ASSIGN
TDQH$
      6027**DCL      7069<<ASSIGN   7070>>IF       7071>>ASSIGN
TEMP$
      6028**DCL      6543<<ASSIGN   6544>>IF       6544>>IF       6544>>IF       6544>>IF       6693<<ASSIGN
      6694>>IF       6695>>ASSIGN   6696>>CALL     6706<<ASSIGN   6707>>DOWHILE  6708>>IF       6715<<ASSIGN
      6715>>ASSIGN   6934<>CALL     6983<<ASSIGN   6984>>IF       6985>>IF       6986>>ASSIGN   6987>>CALL
TMB$BUF_ALLOC
      5971**DCL-ENT  6792--CALL     6804--CALL     6832--CALL     7022--CALL     7055--CALL     7094--CALL
      7110--CALL
TMB$BUF_DEALLOC
      5972**DCL-ENT  6796--CALL     6808--CALL     6847--CALL     7032--CALL     7061--CALL     7089--CALL
      7102--CALL     7149--CALL     7267--CALL     7284--CALL
TMB$MCA
      5973**DCL-ENT  6793--CALL     6805--CALL     6834--CALL     6837--CALL     6841--CALL     6844--CALL
      7027--CALL     7029--CALL     7059--CALL     7095--CALL     7097--CALL     7111--CALL     7119--CALL
      7122--CALL     7126--CALL     7129--CALL

PL6.E3A0      #002=TDP$RSETCPU File=TDP$SYSCON.:E05TSI                           WED 07/30/97 06:05 Page:181  
      974        1        /*T***********************************************************/
      975        2        /*T*                                                         */
      976        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      977        4        /*T*                                                         */
      978        5        /*T***********************************************************/
      979        6        TDP$RSETCPU: PROC;
      980        7        /**/
      981        8        %INCLUDE SS_SCHED_R;
      982       51        %INCLUDE B$USER;
      983      267        %B$USERREFS;
      984      271        /**/
      985      272        /**/
      986      273        /**/
      987      274    1           IF S_TDCPUJ ~= 0 THEN RETURN;   /* Let S_TDCPUJ last til end of job   */
      988      275    1   TDP$RSETCPUJ: ENTRY;                    /* Entry to reset at end of job       */
      989      276    1           S_TDCPUJ = 0;
      990      277    1           S$CU$->B$U.CPU=0;
      991      278    1           S_TDCPUF=0;
      992      279    1           S_TDCPU#=0;
      993      280    1           RETURN;
      994      281        /**/
      995      282    1   END TDP$RSETCPU;

PL6.E3A0      #002=TDP$RSETCPU File=TDP$SYSCON.:E05TSI                           WED 07/30/97 06:05 Page:182  
--  Include file information  --

   B$USER.:E05TOU  cannot be made into a system file and is referenced.
   SS_CNTRLD_R.:E05TOU  cannot be made into a system file and is referenced.
   SS_CNTRL_R.:E05TOU  cannot be made into a system file and is referenced.
   SS_SCHED_R.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure TDP$RSETCPU.

   Procedure TDP$RSETCPU requires 15 words for executable code.
   Procedure TDP$RSETCPU requires 4 words of local(AUTO) storage.

    No errors detected in file TDP$SYSCON.:E05TSI    .

PL6.E3A0      #002=TDP$RSETCPU File=TDP$SYSCON.:E05TSI                           WED 07/30/97 06:05 Page:183  

 Object Unit name= TDP$RSETCPU                                File name= TDP$SYSCON.:E05TOU
 UTS= JUL 30 '97 06:05:37.36 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none    15     17  TDP$RSETCPU

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes      Std        0  TDP$RSETCPU
     0      6                  yes      Std        0  TDP$RSETCPUJ

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     S_TDCPUF                              S_TDCPU#                              S_TDCPUJ
     S$CU$
PL6.E3A0      #002=TDP$RSETCPU File=TDP$SYSCON.:E05TSI                           WED 07/30/97 06:05 Page:184  


      974        1        /*T***********************************************************/
      975        2        /*T*                                                         */
      976        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      977        4        /*T*                                                         */
      978        5        /*T***********************************************************/
      979        6        TDP$RSETCPU: PROC;

      6  0 000000   000000 700200 xent  TDP$RSETCPU  TSX0  ! X66_AUTO_0
         0 000001   000004 000000                    ZERO    4,0

      980        7        /**/
      981        8        %INCLUDE SS_SCHED_R;
      982       51        %INCLUDE B$USER;
      983      267        %B$USERREFS;
      984      271        /**/
      985      272        /**/
      986      273        /**/
      987      274    1           IF S_TDCPUJ ~= 0 THEN RETURN;   /* Let S_TDCPUJ last til end of job   */

    274  0 000002   000000 235000 xsym               LDA     S_TDCPUJ
         0 000003   000005 600000 0                  TZE     s:274+3

    274  0 000004   000000 702200 xent               TSX2  ! X66_ARET
         0 000005   000010 710000 0                  TRA     s:276

      988      275    1   TDP$RSETCPUJ: ENTRY;                    /* Entry to reset at end of job       */

    275  0 000006   000000 700200 xent  TDP$RSETCPUJ TSX0  ! X66_AUTO_0
         0 000007   000004 000000                    ZERO    4,0

      989      276    1           S_TDCPUJ = 0;

    276  0 000010   000000 450000 xsym               STZ     S_TDCPUJ

      990      277    1           S$CU$->B$U.CPU=0;

PL6.E3A0      #002=TDP$RSETCPU File=TDP$SYSCON.:E05TSI                           WED 07/30/97 06:05 Page:185  
    277  0 000011   000000 470400 xsym               LDP0    S$CU$
         0 000012   000000 236003                    LDQ     0,DU
         0 000013   000010 552104                    STBQ    8,'04'O,PR0

      991      278    1           S_TDCPUF=0;

    278  0 000014   000000 450000 xsym               STZ     S_TDCPUF

      992      279    1           S_TDCPU#=0;

    279  0 000015   000000 450000 xsym               STZ     S_TDCPU#

      993      280    1           RETURN;

    280  0 000016   000000 702200 xent               TSX2  ! X66_ARET
      994      281        /**/
      995      282    1   END TDP$RSETCPU;

PL6.E3A0      #002=TDP$RSETCPU File=TDP$SYSCON.:E05TSI                           WED 07/30/97 06:05 Page:186  
--  Include file information  --

   B$USER.:E05TOU  cannot be made into a system file and is referenced.
   SS_CNTRLD_R.:E05TOU  cannot be made into a system file and is referenced.
   SS_CNTRL_R.:E05TOU  cannot be made into a system file and is referenced.
   SS_SCHED_R.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure TDP$RSETCPU.
PL6.E3A0      #002=TDP$RSETCPU File=TDP$SYSCON.:E05TSI                           WED 07/30/97 06:05 Page:187  

 **** Variables and constants ****

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 S$CU$                      0-0-0/w UBIN        r     1 S_TDCPU#
     0-0-0/w SBIN        r     1 S_TDCPUF                   0-0-0/w UBIN        r     1 S_TDCPUJ

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(576)   r     1 B$U


   Procedure TDP$RSETCPU requires 15 words for executable code.
   Procedure TDP$RSETCPU requires 4 words of local(AUTO) storage.

    No errors detected in file TDP$SYSCON.:E05TSI    .
PL6.E3A0      #002=TDP$RSETCPU File=TDP$SYSCON.:E05TSI                           WED 07/30/97 06:05 Page:188  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=TDP$RSETCPU File=TDP$SYSCON.:E05TSI                           WED 07/30/97 06:05 Page:189  
          MINI XREF LISTING

B$DO.ECCINFO
       202**DCL       203--REDEF
B$U.CPU
       167**DCL       277<<ASSIGN
B$U.MISC
       181**DCL       182--REDEF
B$USER.MISC
       257**DCL       258--REDEF
S$CU$
       268**DCL       277>>ASSIGN
S_TDCPU#
        39**DCL       279<<ASSIGN
S_TDCPUF
        39**DCL       278<<ASSIGN
S_TDCPUJ
        39**DCL       274>>IF        276<<ASSIGN
