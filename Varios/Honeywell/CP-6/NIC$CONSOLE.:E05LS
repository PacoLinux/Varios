VERSION E05

PL6.E3A0      #001=NIC$REQSCHED File=NIC$CONSOLE.:E05TSI                         WED 07/30/97 03:29 Page:1    
        1        1        /*M* NIC$CONSOLE - SYSTEM CONSOLE HANDLER */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DMR */
        8        8        /**/
        9        9        /*P*   NAME:   NIC$CONSOLE
       10       10
       11       11               PURPOSE:    The Console Handler performs all I/O for the System Console.
       12       12        */
       13       13        /*D*  NAME:             NIC$REQSCHED
       14       14
       15       15              CALL:             CALL NIC$REQSCHED ( PAR ) ;
       16       16
       17       17              ENVIRONMENT:      Monitor, not privileged, not inhibited.
       18       18
       19       19              INPUT:            N$REQ (IOQ request packet)
       20       20
       21       21              DESCRIPTION:      NIC$REQSCHED enques an IOQ reqest on the
       22       22                                appropriate console scheduler queue and then
       23       23                                goes to the common code at SCHED.
       24       24        */
       25       25        NIC$REQSCHED: PROC ( REQ ) ;
       26       26        /*
       27       27                Includes
       28       28        */
       29       29        %INCLUDE                HF_LOCK_C ;
       30       43        %INCLUDE                N$REQ ;
       31      117        %INCLUDE                NI$TABLES ;
       32      333        %INCLUDE                NI_DATA_C ;
       33      446        %INCLUDE                NI_MACROS_C ;
       34      713        %INCLUDE                N_FC_C ;
       35      750        /*
       36      751                Parameters
       37      752        */
PL6.E3A0      #001=NIC$REQSCHED File=NIC$CONSOLE.:E05TSI                         WED 07/30/97 03:29 Page:2    
       38      753        %N$REQ                  ( NAME=REQ, STCLASS=PARAM ) ;
       39      811        /*
       40      812                Entries
       41      813        */
       42      814    1   DCL 1 NIO$COMP          ENTRY(2) ;
       43      815    1   DCL 1 NIS$DRIVER        ENTRY(1) ;
       44      816        /*
       45      817                Auto
       46      818        */
       47      819    1   DCL 1 DCT$              PTR ALIGNED AUTO ;
       48      820    1   DCL 1 DQH$              PTR ALIGNED AUTO ;
       49      821    1   DCL 1 REQ$              PTR ALIGNED AUTO ;
       50      822    1   DCL 1 SQH$              PTR ALIGNED AUTO ;
       51      823        /*
       52      824                Based
       53      825        */
       54      826        %NI$DCT                 ( NAME=DCT, STCLASS="BASED(DCT$)" ) ;
       55      874        %NI$DQH                 ( NAME=DQH, STCLASS="BASED(DQH$)" ) ;
       56      897        %NI$SQH                 ( NAME=SQH, STCLASS="BASED(SQH$)" ) ;
       57      910        %EJECT ;
PL6.E3A0      #001=NIC$REQSCHED File=NIC$CONSOLE.:E05TSI                         WED 07/30/97 03:29 Page:3    
       58      911    1           DCT$=REQ.DCT$;
       59      912    2           IF DCT.STATUS.DOWN AND DCT.STATUS.TND=0 THEN DO;
       60      913    2              REQ.STATUS.NCP=7;
       61      914    2              CALL NIO$COMP(REQ);
       62      915    2              RETURN;
       63      916    2              END;
       64      917    1           DQH$=DCT.DQH$;
       65      918    1           SQH$=DCT.SQH$;
       66      919                %LOCK(G#=SQH.GATE);
       67      922    2           IF REQ.FC=%N_READ THEN DO;
       68      923                   %REQUEUE (P#=REQ,Q#=DCT.SQ$);
       69      926    2              END;
       70      927    2           ELSE DO;
       71      928                   %ENQUEUE (P#=REQ,Q#=DCT.SQ$);
       72      931    2              END;
       73      932    2           IF DQH.STATE=%IDLE THEN DO;
       74      933                   %DEQUEUE (P#=REQ$,Q#=DCT.SQ$,A#=NO_REQ);
       75      940    2              DQH.IO$=REQ$;
       76      941    2              CALL NIS$DRIVER (DQH);
       77      942    2   NO_REQ:    END;
       78      943                %UNLOCK (G#=SQH.GATE);
       79      946    1           RETURN;
       80      947    1   END NIC$REQSCHED;
       81      948        %EOD;

PL6.E3A0      #001=NIC$REQSCHED File=NIC$CONSOLE.:E05TSI                         WED 07/30/97 03:29 Page:4    
--  Include file information  --

   N_FC_C.:E05TOU  is referenced.
   NI_MACROS_C.:E05TOU  cannot be made into a system file and is referenced.
   NI_DATA_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   HF_LOCK_C.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure NIC$REQSCHED.

   Procedure NIC$REQSCHED requires 73 words for executable code.
   Procedure NIC$REQSCHED requires 10 words of local(AUTO) storage.

PL6.E3A0      #001=NIC$REQSCHED File=NIC$CONSOLE.:E05TSI                         WED 07/30/97 03:29 Page:5    

 Object Unit name= NIC$REQSCHED                               File name= NIC$CONSOLE.:E05TOU
 UTS= JUL 30 '97 03:29:04.88 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none    73    111  NIC$REQSCHED

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes      Std        1  NIC$REQSCHED

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       2 NIO$COMP
         yes           Std       2 NIM$REQUEUE
         yes           Std       1 HFC$UNLOCK
         yes           Std       1 NIS$DRIVER
         yes           Std       1 HFC$LOCK
 yes     yes           Std       2 NIM$DEQUEUE
         yes           Std       2 NIM$ENQUEUE
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
PL6.E3A0      #001=NIC$REQSCHED File=NIC$CONSOLE.:E05TSI                         WED 07/30/97 03:29 Page:6    

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     B_VECTNIL
PL6.E3A0      #001=NIC$REQSCHED File=NIC$CONSOLE.:E05TSI                         WED 07/30/97 03:29 Page:7    


        1        1        /*M* NIC$CONSOLE - SYSTEM CONSOLE HANDLER */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DMR */
        8        8        /**/
        9        9        /*P*   NAME:   NIC$CONSOLE
       10       10
       11       11               PURPOSE:    The Console Handler performs all I/O for the System Console.
       12       12        */
       13       13        /*D*  NAME:             NIC$REQSCHED
       14       14
       15       15              CALL:             CALL NIC$REQSCHED ( PAR ) ;
       16       16
       17       17              ENVIRONMENT:      Monitor, not privileged, not inhibited.
       18       18
       19       19              INPUT:            N$REQ (IOQ request packet)
       20       20
       21       21              DESCRIPTION:      NIC$REQSCHED enques an IOQ reqest on the
       22       22                                appropriate console scheduler queue and then
       23       23                                goes to the common code at SCHED.
       24       24        */
       25       25        NIC$REQSCHED: PROC ( REQ ) ;

     25  0 000000   000000 700200 xent  NIC$REQSCHED TSX0  ! X66_AUTO_1
         0 000001   000012 000001                    ZERO    10,1

       26       26        /*
       27       27                Includes
       28       28        */
       29       29        %INCLUDE                HF_LOCK_C ;
       30       43        %INCLUDE                N$REQ ;
       31      117        %INCLUDE                NI$TABLES ;
       32      333        %INCLUDE                NI_DATA_C ;
PL6.E3A0      #001=NIC$REQSCHED File=NIC$CONSOLE.:E05TSI                         WED 07/30/97 03:29 Page:8    
       33      446        %INCLUDE                NI_MACROS_C ;
       34      713        %INCLUDE                N_FC_C ;
       35      750        /*
       36      751                Parameters
       37      752        */
       38      753        %N$REQ                  ( NAME=REQ, STCLASS=PARAM ) ;
       39      811        /*
       40      812                Entries
       41      813        */
       42      814    1   DCL 1 NIO$COMP          ENTRY(2) ;
       43      815    1   DCL 1 NIS$DRIVER        ENTRY(1) ;
       44      816        /*
       45      817                Auto
       46      818        */
       47      819    1   DCL 1 DCT$              PTR ALIGNED AUTO ;
       48      820    1   DCL 1 DQH$              PTR ALIGNED AUTO ;
       49      821    1   DCL 1 REQ$              PTR ALIGNED AUTO ;
       50      822    1   DCL 1 SQH$              PTR ALIGNED AUTO ;
       51      823        /*
       52      824                Based
       53      825        */
       54      826        %NI$DCT                 ( NAME=DCT, STCLASS="BASED(DCT$)" ) ;
       55      874        %NI$DQH                 ( NAME=DQH, STCLASS="BASED(DQH$)" ) ;
       56      897        %NI$SQH                 ( NAME=SQH, STCLASS="BASED(SQH$)" ) ;
       57      910        %EJECT ;
PL6.E3A0      #001=NIC$REQSCHED File=NIC$CONSOLE.:E05TSI                         WED 07/30/97 03:29 Page:9    
       58      911    1           DCT$=REQ.DCT$;

    911  0 000002   200003 470500                    LDP0    @REQ,,AUTO
         0 000003   000002 236100                    LDQ     2,,PR0
         0 000004   200004 756100                    STQ     DCT$,,AUTO

       59      912    2           IF DCT.STATUS.DOWN AND DCT.STATUS.TND=0 THEN DO;

    912  0 000005   200004 471500                    LDP1    DCT$,,AUTO
         0 000006   100027 234100                    SZN     23,,PR1
         0 000007   000022 605000 0                  TPL     s:917
         0 000010   100027 236100                    LDQ     23,,PR1
         0 000011   170000 316003                    CANQ    61440,DU
         0 000012   000022 601000 0                  TNZ     s:917

       60      913    2              REQ.STATUS.NCP=7;

    913  0 000013   700000 236007                    LDQ     -32768,DL
         0 000014   000015 256100                    ORSQ    13,,PR0

       61      914    2              CALL NIO$COMP(REQ);

    914  0 000015   200003 630500                    EPPR0   @REQ,,AUTO
         0 000016   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000017   000000 701000 xent               TSX1    NIO$COMP
         0 000020   000000 011000                    NOP     0

       62      915    2              RETURN;

    915  0 000021   000000 702200 xent               TSX2  ! X66_ARET

       63      916    2              END;
       64      917    1           DQH$=DCT.DQH$;

    917  0 000022   100023 236100                    LDQ     19,,PR1
         0 000023   200005 756100                    STQ     DQH$,,AUTO

PL6.E3A0      #001=NIC$REQSCHED File=NIC$CONSOLE.:E05TSI                         WED 07/30/97 03:29 Page:10   
       65      918    1           SQH$=DCT.SQH$;

    918  0 000024   100022 236100                    LDQ     18,,PR1
         0 000025   200007 756100                    STQ     SQH$,,AUTO

       66      919                %LOCK(G#=SQH.GATE);

    920  0 000026   200007 630500                    EPPR0   SQH$,,AUTO
         0 000027   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000030   000000 701000 xent               TSX1    HFC$LOCK
         0 000031   000000 011000                    NOP     0

       67      922    2           IF REQ.FC=%N_READ THEN DO;

    922  0 000032   200003 470500                    LDP0    @REQ,,AUTO
         0 000033   000003 236100                    LDQ     3,,PR0
         0 000034   000777 376007                    ANQ     511,DL
         0 000035   000014 116007                    CMPQ    12,DL
         0 000036   000050 601000 0                  TNZ     s:929

       68      923                   %REQUEUE (P#=REQ,Q#=DCT.SQ$);

    924  0 000037   200004 236100                    LDQ     DCT$,,AUTO
         0 000040   000001 036003                    ADLQ    1,DU
         0 000041   200003 235100                    LDA     @REQ,,AUTO
         0 000042   200010 757100                    STAQ    SQH$+1,,AUTO
         0 000043   200010 630500                    EPPR0   SQH$+1,,AUTO
         0 000044   000020 631400 xsym               EPPR1   B_VECTNIL+16
         0 000045   000000 701000 xent               TSX1    NIM$REQUEUE
         0 000046   000000 011000                    NOP     0

       69      926    2              END;

    926  0 000047   000060 710000 0                  TRA     s:932

       70      927    2           ELSE DO;

PL6.E3A0      #001=NIC$REQSCHED File=NIC$CONSOLE.:E05TSI                         WED 07/30/97 03:29 Page:11   
       71      928                   %ENQUEUE (P#=REQ,Q#=DCT.SQ$);

    929  0 000050   200004 236100                    LDQ     DCT$,,AUTO
         0 000051   000001 036003                    ADLQ    1,DU
         0 000052   200003 235100                    LDA     @REQ,,AUTO
         0 000053   200010 757100                    STAQ    SQH$+1,,AUTO
         0 000054   200010 630500                    EPPR0   SQH$+1,,AUTO
         0 000055   000020 631400 xsym               EPPR1   B_VECTNIL+16
         0 000056   000000 701000 xent               TSX1    NIM$ENQUEUE
         0 000057   000000 011000                    NOP     0

       72      931    2              END;

       73      932    2           IF DQH.STATE=%IDLE THEN DO;

    932  0 000060   200005 470500                    LDP0    DQH$,,AUTO
         0 000061   000001 236100                    LDQ     1,,PR0
         0 000062   000077 316007                    CANQ    63,DL
         0 000063   000104 601000 0                  TNZ     NO_REQ

       74      933                   %DEQUEUE (P#=REQ$,Q#=DCT.SQ$,A#=NO_REQ);

    935  0 000064   200004 236100                    LDQ     DCT$,,AUTO
         0 000065   000001 036003                    ADLQ    1,DU
         0 000066   200011 756100                    STQ     SQH$+2,,AUTO
         0 000067   200006 631500                    EPPR1   REQ$,,AUTO
         0 000070   200010 451500                    STP1    SQH$+1,,AUTO
         0 000071   200010 630500                    EPPR0   SQH$+1,,AUTO
         0 000072   000020 631400 xsym               EPPR1   B_VECTNIL+16
         0 000073   000000 701000 xent               TSX1    NIM$DEQUEUE
         0 000074   000104 702000 0                  TSX2    NO_REQ

       75      940    2              DQH.IO$=REQ$;

    940  0 000075   200006 236100                    LDQ     REQ$,,AUTO
         0 000076   200005 470500                    LDP0    DQH$,,AUTO
         0 000077   000014 756100                    STQ     12,,PR0
PL6.E3A0      #001=NIC$REQSCHED File=NIC$CONSOLE.:E05TSI                         WED 07/30/97 03:29 Page:12   

       76      941    2              CALL NIS$DRIVER (DQH);

    941  0 000100   200005 630500                    EPPR0   DQH$,,AUTO
         0 000101   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000102   000000 701000 xent               TSX1    NIS$DRIVER
         0 000103   000000 011000                    NOP     0

       77      942    2   NO_REQ:    END;

    942  0 000104                       NO_REQ       null
       78      943                %UNLOCK (G#=SQH.GATE);

    944  0 000104   200007 630500                    EPPR0   SQH$,,AUTO
         0 000105   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000106   000000 701000 xent               TSX1    HFC$UNLOCK
         0 000107   000000 011000                    NOP     0

       79      946    1           RETURN;

    946  0 000110   000000 702200 xent               TSX2  ! X66_ARET
       80      947    1   END NIC$REQSCHED;
       81      948        %EOD;

PL6.E3A0      #001=NIC$REQSCHED File=NIC$CONSOLE.:E05TSI                         WED 07/30/97 03:29 Page:13   
--  Include file information  --

   N_FC_C.:E05TOU  is referenced.
   NI_MACROS_C.:E05TOU  cannot be made into a system file and is referenced.
   NI_DATA_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   HF_LOCK_C.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure NIC$REQSCHED.
PL6.E3A0      #001=NIC$REQSCHED File=NIC$CONSOLE.:E05TSI                         WED 07/30/97 03:29 Page:14   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @REQ                       4-0-0/w PTR         r     1 DCT$
     5-0-0/w PTR         r     1 DQH$                      *0-0-0/d STRC(1080)  r     1 REQ
     6-0-0/w PTR         r     1 REQ$                       7-0-0/w PTR         r     1 SQH$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(1332)  r     1 DCT                        0-0-0/w STRC(648)   r     1 DQH
     0-0-0/w STRC(252)   r     1 SQH


   Procedure NIC$REQSCHED requires 73 words for executable code.
   Procedure NIC$REQSCHED requires 10 words of local(AUTO) storage.
PL6.E3A0      #001=NIC$REQSCHED File=NIC$CONSOLE.:E05TSI                         WED 07/30/97 03:29 Page:15   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=NIC$REQSCHED File=NIC$CONSOLE.:E05TSI                         WED 07/30/97 03:29 Page:16   
          MINI XREF LISTING

DCT.DP
       855**DCL       862--REDEF     865--REDEF     866--REDEF     868--REDEF     868--REDEF     869--REDEF
       870--REDEF     870--REDEF
DCT.DQH$
       851**DCL       917>>ASSIGN
DCT.MPC.IOCHANX
       863**DCL       863--REDEF
DCT.SQ$
       835**DCL       924<>CALL      929<>CALL      935<>CALL
DCT.SQH$
       850**DCL       918>>ASSIGN
DCT.STATUS.DOWN
       852**DCL       912>>IF
DCT.STATUS.TND
       853**DCL       912>>IF
DCT$
       819**DCL       835--IMP-PTR   911<<ASSIGN    912>>IF        912>>IF        917>>ASSIGN    918>>ASSIGN
       924>>CALL      929>>CALL      935>>CALL
DQH
       883**DCL       941<>CALL
DQH.IO$
       890**DCL       940<<ASSIGN
DQH.IOCHANX
       885**DCL       886--REDEF
DQH.MBX$
       894**DCL       895--REDEF
DQH.STATE
       887**DCL       932>>IF
DQH$
       820**DCL       883--IMP-PTR   917<<ASSIGN    932>>IF        940>>ASSIGN    941>>CALL
HFC$LOCK
        42**DCL-ENT   920--CALL
PL6.E3A0      #001=NIC$REQSCHED File=NIC$CONSOLE.:E05TSI                         WED 07/30/97 03:29 Page:17   
HFC$UNLOCK
        42**DCL-ENT   944--CALL
NIM$DEQUEUE
       470**DCL-ENT   935--CALL
NIM$ENQUEUE
       471**DCL-ENT   929--CALL
NIM$REQUEUE
       472**DCL-ENT   924--CALL
NIO$COMP
       814**DCL-ENT   914--CALL
NIS$DRIVER
       815**DCL-ENT   941--CALL
NO_REQ
       942**LABEL     935--CALLALT
REQ
       762**DCL        25--PROC      914<>CALL      924<>CALL      929<>CALL
REQ.BUFADDR
       771**DCL       772--REDEF     772--REDEF
REQ.DCT$
       763**DCL       911>>ASSIGN
REQ.DLA.DRELADDR
       763**DCL       763--REDEF
REQ.DVE.EOMCHAR
       800**DCL       801--REDEF
REQ.EAINFO
       794**DCL       794--REDEF
REQ.EAINFOX
       794**DCL       795--REDEF
REQ.EVNTINFO
       795**DCL       795--REDEF
REQ.FC
       765**DCL       922>>IF
REQ.STATUS
       776**DCL       782--REDEF
REQ.STATUS.NCP
       780**DCL       913<<ASSIGN
PL6.E3A0      #001=NIC$REQSCHED File=NIC$CONSOLE.:E05TSI                         WED 07/30/97 03:29 Page:18   
REQ$
       821**DCL       935<>CALL      940>>ASSIGN
SQH.DOOR
       906**DCL       906--REDEF
SQH.GATE
       906**DCL       920<>CALL      944<>CALL
SQH$
       822**DCL       906--IMP-PTR   918<<ASSIGN    920>>CALL      944>>CALL

PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:19   
       82        1        /*T***********************************************************/
       83        2        /*T*                                                         */
       84        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       85        4        /*T*                                                         */
       86        5        /*T***********************************************************/
       87        6        /*X* DMR */
       88        7        /*D*  NAME:             NIC$POSTER
       89        8
       90        9              CALL:             CALL NIC$POSTER ( PAR, INTLVL, STATUS ) ;
       91       10
       92       11              ENVIRONMENT:      Monitor Linkage Segment, Interrupt Level
       93       12
       94       13              INPUT:            PAR     - DQH
       95       14                                INTLVL  - 0 = Overhead
       96       15                                          1 = Terminate
       97       16                                          2 = Marker
       98       17                                          3 = Special
       99       18                                          4 = Lost
      100       19                                STATUS  - Status double word.
      101       20
      102       21              DESCRIPTION:      This routine handles all interrupts from the
      103       22                                IOM/IOP/IMX connected consoles.
      104       23        */
      105       24        NIC$POSTER: PROC ( PAR, INTLVL, STATUS ) ;
      106       25        /*
      107       26                Includes
      108       27        */
      109       28        %INCLUDE                B_MLSMAC_C ;
      110      970        %INCLUDE                B_STRINGS_C ;
      111     1099        %INCLUDE                CP_6_SUBS ;
      112     1639        %INCLUDE                EL_SUBS_C ;
      113     1723        %INCLUDE                HF_LOCK_C ;
      114     1737        %INCLUDE                HF_DATA_R ;
      115     1780        %INCLUDE                NI_DATA_C ;
      116     1893        %INCLUDE                NI_DATA_R ;
      117     2330        %INCLUDE                N_FC_C ;
      118     2367        %INCLUDE                PM$NI ;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:20   
      119     2391        %INCLUDE                S_WSPTD_R ;
      120     2407        %INCLUDE                NI_MACROS_C ;
      121     2674        /*
      122     2675                Macros
      123     2676        */
      124     2677        %MACRO ERRMSG           ( NAME = ""
      125     2678                                , MESS = ""
      126     2679                                , CR   = "2 * BIT(18) INIT('015012'O)," ) ;
      127     2680        DCL 1 NAME              CONSTANT,
      128     2681              CR
      129     2682              2 *               CHAR(0) INIT(MESS),
      130     2683              2 *               BIT(45) INIT('015012000000000'O) ;
      131     2684        %MEND ;
      132     2685        %SUB EREQ               = EREQ$->REQ ;
      133     2686        %SUB FOREVER            = "WHILE('1'B)" ;
      134     2687        %EQU O40                = BITBIN('40'O) ;
      135     2688        %SUB NEVER              = "WHILE('0'B)" ;
      136     2689        /*
      137     2690                Parameters
      138     2691        */
      139     2692    1   DCL 1 INTLVL            UBIN(18) PARAM ;
      140     2693    1   DCL 1 PAR               SBIN PARAM ;    /* N$REQ */
      141     2694        %STATUS                 ( NAME=STATUS, STCLASS=PARAM ) ;
      142     2761        /*
      143     2762                Entries
      144     2763        */
      145     2764    1   DCL 1 HFC$ASSOCCLR      ENTRY(3) ;
      146     2765    1   DCL 1 NIA$SPURINT       ENTRY(4) ;
      147     2766    1   DCL 1 NIF$ANFAULT       ENTRY(3) ALTRET ;
      148     2767    1   DCL 1 NIF$ANIOM         ENTRY(2) ALTRET ;
      149     2768    1   DCL 1 NIO$DCWBLD        ENTRY(1) ALTRET ;
      150     2769    1   DCL 1 NIO$COMP          ENTRY(2) ;
      151     2770    1   DCL 1 NIO$SPCOMP        ENTRY(1) ;
      152     2771    1   DCL 1 NIQ$GET           ENTRY(1) ALTRET ;
      153     2772    1   DCL 1 NIQ$REL           ENTRY(1) ALTRET ;
      154     2773    1   DCL 1 NIS$DRIVER        ENTRY(1) ;
      155     2774    1   DCL 1 NIS$MASK          ENTRY(2) ;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:21   
      156     2775    1   DCL 1 PMN$COLLECT       ENTRY(3) ;
      157     2776        /*
      158     2777                Symrefs
      159     2778        */
      160     2779    1   DCL 1 B$LS$             PTR SYMREF ;
      161     2780    1   DCL 1 B$MISC$           PTR SYMREF ;
      162     2781    1   DCL 1 F_DCBLOCK         SBIN SYMREF ;
      163     2782    1   DCL 1 OCI_BOOT          BIT(1) ALIGNED SYMREF ;
      164     2783        /*
      165     2784                Auto
      166     2785        */
      167     2786    1   DCL 1 ACTION            SBIN WORD ALIGNED AUTO ;
      168     2787    1   DCL 1 ARS               SBIN WORD ALIGNED AUTO ;
      169     2788    1   DCL 1 CHANTIME          SBIN WORD ALIGNED AUTO ;
      170     2789    1   DCL 1 CODE              SBIN WORD ALIGNED AUTO ;
      171     2790    1   DCL 1 DCT$              PTR ALIGNED AUTO ;
      172     2791    1   DCL 1 DQH$              PTR ALIGNED AUTO ;
      173     2792    1   DCL 1 EREQ$             PTR ALIGNED AUTO ;
      174     2793    1   DCL 1 I                 SBIN WORD ALIGNED AUTO ;
      175     2794    1   DCL 1 J                 SBIN WORD ALIGNED AUTO ;
      176     2795    1   DCL 1 K                 SBIN WORD ALIGNED AUTO ;
      177     2796    1   DCL 1 MINOR             SBIN WORD ALIGNED AUTO ;
      178     2797    1   DCL 1 REQ$              PTR ALIGNED AUTO ;
      179     2798    1   DCL 1 SQH$              PTR ALIGNED AUTO ;
      180     2799    1   DCL 1 MSG$              PTR ALIGNED AUTO ;
      181     2800    1   DCL 1 T$                PTR ALIGNED AUTO ;
      182     2801        /*
      183     2802                Based
      184     2803        */
      185     2804        %B_MLS                  ( FPTN=B$MLNK, STCLASS=BASED ) ;
      186     3619    1   DCL 1 BUFFER            CHAR(1) BASED(T$) ;
      187     3620        %NI$DCT                 ( NAME=DCT,    STCLASS="BASED(DCT$)" ) ;
      188     3668        %NI$DQH                 ( NAME=DQH,    STCLASS="BASED(DQH$)" ) ;
      189     3691        %NI$IOM                 ( NAME=IOM,    STCLASS=BASED ) ;
      190     3696        %NI$REQ                 ( NAME=IOS,    STCLASS=BASED ) ;
      191     3721        %NI$IOSTAT              ( NAME=IOSTAT, STCLASS=BASED ) ;
      192     3730        %NI$MBX                 ( NAME=MBX,    STCLASS=BASED ) ;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:22   
      193     3749        %N$REQ                  ( NAME=REQ,    STCLASS="BASED(REQ$)" ) ;
      194     3807        %NI$SQH                 ( NAME=SQH,    STCLASS="BASED(SQH$)" ) ;
      195     3820        /*
      196     3821                Constants
      197     3822        */
      198     3823    1   DCL 1 DALERTACT(0:%O40) UBIN(3) UNAL CONSTANT
      199     3824    1                           INIT(6,2,3,6,4,6*3,1,6*9,3,6*13,5);
      200     3825    1   DCL 1 DALERTTYC(0:%O40) BIT(36) ALIGNED CONSTANT
      201     3826    1                           INIT(%TYC_IOERR*4,'0'B,%TYC_IOERR*3,
      202     3827    1                                %TYC_TIMO,%TYC_IOERR*23,%TYC_IOERR);
      203     3828        %ERRMSG                 ( NAME=MSGOV, MESS="'--BUFFER OVERFLOW, RETRY'" ) ;
      204     3834        %ERRMSG                 ( NAME=MSGPE, MESS="'--PARITY ERROR, RETRY'" ) ;
      205     3840        %ERRMSG                 ( NAME=MSGRE, MESS="'--RETRY'" ) ;
      206     3846        %ERRMSG                 ( NAME=MSGTE, MESS="'--TIMING ERROR, RETRY'" ) ;
      207     3852        %ERRMSG                 ( NAME=MSGTO, MESS="'--CONSOLE TIMEOUT'" ) ;
      208     3858        %ERRMSG                 ( NAME=MSGUS, MESS="'_'", CR="" ) ;
      209     3864    1   DCL 1 MSGS(0:4)         VECTOR CONSTANT INIT(VECTOR(MSGTE),
      210     3865    1                                                VECTOR(MSGPE),
      211     3866    1                                                VECTOR(MSGUS),
      212     3867    1                                                VECTOR(MSGOV),
      213     3868    1                                                VECTOR(MSGRE) ) ;
      214     3869    1   DCL 1 NONBS(0:511)      UBIN(9) UNAL CONSTANT INIT(1*8,0,1*503) ;
      215     3870        %EJECT;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:23   
      216     3871    2           DO INHIBIT;
      217     3872    3              DO CASE(INTLVL);
      218     3873    3               CASE(%OVERHEAD,%TERMINATE,%LOST);
      219     3874    3                 DQH$=ADDR(PAR);
      220     3875    3                 SQH$=DQH.SQH$;
      221     3876                      %LOCK (G#=SQH.GATE);
      222     3879    3                 IF  DQH.STATE ~= %BUSY
      223     3880    4                 THEN DO ;
      224     3881    4                    IF  ADDR(STATUS) = ADDR(NIL)
      225     3882    4                    THEN
      226     3883    4                       CALL NIA$SPURINT ( DQH, EL_SPURINT, INTLVL, NI_DBLZERO ) ;
      227     3884    4                    ELSE
      228     3885    4                       CALL NIA$SPURINT ( DQH, EL_SPURINT, INTLVL, STATUS ) ;
      229     3886                         %UNLOCK ( G#=SQH.GATE ) ;
      230     3889    4                    RETURN ;
      231     3890    4                    END ;
      232     3891    3                 REQ$=DQH.IO$;
      233     3892    3                 DCT$=REQ.DCT$;
      234     3893    3                 IF HW_IMX THEN
      235     3894    3                    REQ.FLPW=DQH.IOSTATUS$->IOSTAT.LPW_RESIDUE;
      236     3895    3                 ELSE
      237     3896    3                    REQ.FLPW=DQH.MBX$->MBX.LPW;
      238     3897    4                 IF INTLVL=%TERMINATE THEN DO;
      239     3898    4                    REQ.STATUS=DQH.IOSTATUS$->IOSTAT.STATUS;
      240     3899    4                    IF HW_IOP THEN    /* ignore IOP generated lost interrupt */
      241     3900    4                       IF REQ.STATUS.MAJOR = %READY AND
      242     3901    5                         REQ.STATUS.IOM.CHANNEL = %LOSTINT THEN DO;
      243     3902                               %UNLOCK (G#=SQH.GATE);
      244     3905    5                          RETURN;
      245     3906    5                          END;
      246     3907    4                    END;
      247     3908    4                 ELSE DO;
      248     3909    4                    REQ.STATUS=STATUS;
      249     3910    5                    IF REQ.STATUS.MAJOR=%LOST_INTERRUPT THEN DO;
      250     3911    5                       CALL NIS$MASK(DQH,%IMX_CCW_MASK_CHAN);
      251     3912    5                       END;
      252     3913    4                    END;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:24   
      253     3914                      %UNLOCK (G#=SQH.GATE);
      254     3917    3               CASE(%MARKER);
      255     3918    3                 DQH$=ADDR(PAR);
      256     3919    3                 CALL NIA$SPURINT(DQH,EL_SPURINT,INTLVL,NI_DBLZERO);
      257     3920    3                 RETURN;
      258     3921    3               CASE(%SPECIAL);
      259     3922    3                 DQH$=ADDR(PAR);
      260     3923    3                 SQH$=DQH.SQH$;
      261     3924    3                 DCT$=N$DCT$(SQH.FDCT);
      262     3925                      %LOCK (G#=SQH.GATE);
      263     3928    4                 IF DCT.SPSTAT.PRESENCE THEN DO;
      264     3929                         %UNLOCK (G#=SQH.GATE);
      265     3932    4                    END;
      266     3933    4                 ELSE DO;
      267     3934    4                    DCT.SPSTAT='56'O;
      268     3935                         %UNLOCK (G#=SQH.GATE);
      269     3938    4                    CALL NIO$SPCOMP(DCT);
      270     3939    4                    DCT.SPSTAT.PRESENCE='0'B;
      271     3940    4                    END;
      272     3941    3                 RETURN;
      273     3942    3               CASE(%REPOST);
      274     3943    3                 REQ$=ADDR(PAR);
      275     3944    3                 DCT$=REQ.DCT$;
      276     3945    3                 SQH$=DCT.SQH$;
      277     3946    3                 DQH$=DCT.DQH$;
      278     3947    3               END;
      279     3948    2              END;
      280     3949    1           IF NOT REQ.STATUS.PRESENCE THEN REQ.STATUS.MAJOR = %LOST_INTERRUPT;
      281     3950    1           CALL PMN$COLLECT(DQH.PM,%PM_IDLE,CHANTIME);
      282     3951    1           DQH.STATE=%REQUESTED;
      283     3952    1           EREQ$=ADDR(NIL);
      284     3953    2           IF REQ.COMP=%COMP_TD THEN DO;
      285     3954    2              REQ.EAINFO=CHANTIME;
      286     3955    2              GOTO COMP_IT;
      287     3956    2              END;
      288     3957    1           REQ.TYC='0'B;
      289     3958    2           IF REQ.STATUS.IOM THEN DO;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:25   
      290     3959    2              CALL NIF$ANIOM(REQ,CODE) ALTRET(CALLER);
      291     3960    2              REQ.ERRCT=REQ.ERRCT+1;
      292     3961    2              GOTO RETRY;
      293     3962    2              END;
      294     3963    1           MINOR=BITBIN(REQ.STATUS.MINOR);
      295     3964    2           DO CASE(REQ.STATUS.MAJOR);
      296     3965    2            CASE(%READY);
      297     3966    2              IF MINOR~=0 THEN GOTO ILLSTAT;
      298     3967    2            CASE(%ATTENTION);
      299     3968    2              GOTO ILLSTAT;
      300     3969    2            CASE(%DATA_ALERT);
      301     3970    2              IF MINOR>%O40 THEN GOTO ILLSTAT;
      302     3971    2              REQ.TYC=REQ.TYC|DALERTTYC(MINOR);
      303     3972    2              ACTION=DALERTACT(MINOR);
      304     3973    3              IF ACTION=1 THEN DO;
      305     3974    3                 REQ.STATUS.NCP=7;
      306     3975    3                 REQ.ARSIZE=0;
      307     3976    3                 GOTO CALLER;
      308     3977    3                 END;
      309     3978    2   RETRY1:
      310     3979    2              IF ACTION~=6 OR REQ.STATUS.READFLG THEN
      311     3980    2   RETRY2:
      312     3981    2                 CALL ERRMSG(MSGS(ACTION-2));
      313     3982    2   RETRY:
      314     3983    2              REQ.ERRCT=REQ.ERRCT+1;
      315     3984    2              IF REQ.ERRCT<=4 THEN GOTO RESCHED;
      316     3985    2            CASE(%COMMAND_REJECT);
      317     3986    2              IF MINOR~=1 THEN GOTO ILLSTAT;
      318     3987    2              REQ.TYC.IOERR='1'B;
      319     3988    2              ACTION=6;
      320     3989    2              GOTO RETRY1;
      321     3990    2            CASE(%LOST_INTERRUPT);
      322     3991    2              ACTION=6;
      323     3992    2              REQ.TYC.TIMO='1'B;
      324     3993    2              REQ.STATUS.NCP=7;            /* DON'T CALC ARS IN COMP */
      325     3994    2              REQ.STATUS.READFLG='1'B;
      326     3995    2              REQ.ARSIZE=0;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:26   
      327     3996    2              CALL ERRMSG(VECTOR(MSGTO));
      328     3997    2              GOTO CALLER;
      329     3998    2            CASE(%SYSTEM_FAULT);
      330     3999    2              CALL NIF$ANFAULT(REQ,CODE) ALTRET(CALLER);
      331     4000    2              GOTO RETRY2;
      332     4001    2            CASE(ELSE);
      333     4002    2   ILLSTAT:
      334     4003    2              ACTION=6;
      335     4004    2              REQ.TYC.IOERR='1'B;
      336     4005    2              REQ.STATUS.NCP=7;            /* DON'T CALC ARS IN COMP */
      337     4006    2              GOTO RETRY1;
      338     4007    2            END/* CASE MAJOR */;
      339     4008    1   CALLER:
      340     4009    2           IF OCI_BOOT AND NOT (REQ.STATUS&'37770077'O) THEN DO;
      341     4010    3              IF REQ.FC=%N_READ THEN DO;
      342     4011    3                 ARS=REQ.STATUS.NCP;
      343     4012    3                 IF ARS~=0 THEN ARS=ARS-4;
      344     4013    4                 IF HW_IMX THEN DO;
      345     4014    4                    T$=PINCRW(REQ.IOS$,%IMX_STATUS_OFFSET);
      346     4015    4                    ARS=T$->IOSTAT.LAST_IDCW.COUNT*4+ARS;
      347     4016    4                    END;
      348     4017    3                 ELSE
      349     4018    3                    ARS=(REQ.STATUS.NWA-REQ.BUFREAL.ADR)*4+ARS;
      350     4019                      %LOCK(G#=F_DCBLOCK);
      351     4022    3                 B$LS$->B$MLNK.MISC=B$LS$->B$MLNK.IOEND;
      352     4023    3                 B$LS$->B$MLNK.MISC.BOUND=((REQ.BUFVIRT.BYT+ARS+7)/8)*8-1;
      353     4024    3                 J = HW_PTB_UNITS/HW_IOPTP_UNITS;
      354     4025    3                 S_WSPTD.BLKNO(%IOENDWSQ) = REQ.PTP/J;
      355     4026    3                 B$LS$->B$MLNK.MISC.BASE = REQ.BUFVIRT.BASE*8 + MOD(REQ.PTP,J)*
              4026                          HW_IOPTP_UNITS*4096;
      356     4027    3                 CALL HFC$ASSOCCLR(%IOENDWSQ,0,16384); /*MAX Dense PT*/
      357     4028    3                 T$=PINCRC(B$MISC$,REQ.BUFVIRT.BYT);
      358     4029    3                 I=0;
      359     4030    4                 DO FOREVER;
      360     4031    4                    CALL INDEX(I,BINASC(8)/*BS*/,SUBSTR(BUFFER,0,ARS),I) ALTRET(NOBS);
      361     4032    4                    CALL SEARCH(J,K,NONBS,SUBSTR(BUFFER,0,ARS),I);
      362     4033    4                    I=2*I-J;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:27   
      363     4034    4                    K=ARS-J;
      364     4035    4                    CALL INSERT(BUFFER,I,K,SUBSTR(BUFFER,J,K));
      365     4036    4                    ARS=K+I;
      366     4037    4                    END;
      367     4038    3   NOBS:
      368     4039                      %UNLOCK(G#=F_DCBLOCK);
      369     4042    3                 REQ.STATUS.NWA=(REQ.BUFADDR+ARS+3)/4;
      370     4043    3                 REQ.STATUS.NCP=MOD(REQ.BUFADDR+ARS,4);
      371     4044    3                 END/* IF REQ.FC */;
      372     4045    2              END/* IF OCI_BOOT */;
      373     4046                                        /* DON'T CALCULATE ARS IF ANY FUNNY
      374     4047                                           STATUS BITS ARE SET */
      375     4048    1   COMP_IT:
      376     4049    1           IF REQ.STATUS & '37000077'O THEN REQ.STATUS.NCP=7;
      377     4050    1           CALL NIO$COMP(REQ);
      378     4051    1           REQ$=ADDR(NIL);
      379     4052    1   RESCHED:
      380     4053                %LOCK (G#=SQH.GATE);
      381     4056    2           IF EREQ$~=ADDR(NIL) THEN DO;
      382     4057    3              IF REQ$~=ADDR(NIL) THEN DO;
      383     4058                      %REQUEUE (P#=REQ,Q#=DCT.SQ$);
      384     4061    3                 END;
      385     4062    2              REQ$=EREQ$;
      386     4063    2              END;
      387     4064    2           ELSE DO;
      388     4065    3              IF REQ$=ADDR(NIL) THEN DO;
      389     4066                      %DEQUEUE (P#=REQ$,Q#=DCT.SQ$);
      390     4073    3                 END;
      391     4074    2              END;
      392     4075    2           IF REQ$=ADDR(NIL) THEN DO;
      393     4076    2              DQH.STATE=%IDLE;
      394     4077    2              END;
      395     4078    2           ELSE DO;
      396     4079    2              DQH.IO$=REQ$;
      397     4080    2              CALL NIS$DRIVER(DQH);
      398     4081    2              END;
      399     4082                %UNLOCK (G#=SQH.GATE);
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:28   
      400     4085    1           RETURN;
      401     4086        %EJECT;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:29   
      402     4087        /* SET UP ERROR MESSAGE */
      403     4088        /**/
      404     4089    1   ERRMSG: PROC (MSG);
      405     4090    2   DCL 1 MSG ALIGNED,
      406     4091    2         2 LEN UBIN(18) UNAL,              /* SIZE (WORDS) */
      407     4092    2         2 MSG$ PTR;
      408     4093        /**/
      409     4094        /**/
      410     4095    2           IF REQ.ERRCT>4 OR REQ.COMP~=%COMP_REG THEN RETURN;
      411     4096    2           IF NOT REQ.STATUS.READFLG THEN RETURN;
      412     4097    2           CALL NIQ$GET(EREQ$) ALTRET(OHWELL);
      413     4098    2           EREQ$->REQ.DLA=REQ.DLA;
      414     4099    2           EREQ$->REQ.FC=%N_WRASC;
      415     4100    2           EREQ$->REQ.BUF$=MSG.MSG$;
      416     4101    2           EREQ$->REQ.BUFSIZE=MSG.LEN*4;
      417     4102    2           EREQ$->REQ.OPFLG=OP_BPF;
      418     4103    2           EREQ$->REQ.COMP=%COMP_IOS;
      419     4104    2           CALL NIO$DCWBLD(EREQ$->REQ) ALTRET(RELIOQ);
      420     4105    2           RETURN;
      421     4106    2   RELIOQ: CALL NIQ$REL(EREQ$);
      422     4107    2   OHWELL: RETURN;
      423     4108        /**/
      424     4109    2   END ERRMSG;
      425     4110    1   END NIC$POSTER;
      426     4111        %EOD;

PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:30   
--  Include file information  --

   NI_MACROS_C.:E05TOU  cannot be made into a system file and is referenced.
   S_WSPTD_R.:E05TOU  cannot be made into a system file and is referenced.
   PM$NI.:E05TOU  is referenced.
   N_FC_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   NI_DATA_C.:E05TOU  is referenced.
   HF_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   HF_LOCK_C.:E05TOU  cannot be made into a system file and is referenced.
   EL_SUBS_C.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   B_MLSMAC_C.:E05TOU  is referenced.
      No diagnostics issued in procedure NIC$POSTER.

   Procedure NIC$POSTER requires 623 words for executable code.
   Procedure NIC$POSTER requires 28 words of local(AUTO) storage.

PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:31   

 Object Unit name= NIC$POSTER                                 File name= NIC$CONSOLE.:E05TOU
 UTS= JUL 30 '97 03:29:19.04 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  RoData even  UTS    211    323  NIC$POSTER
    1   Proc  even  none   623   1157  NIC$POSTER
    2  RoData even  none    20     24  NIC$POSTER

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes            yes      Std        3  NIC$POSTER
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:32   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       1 HFC$LOCK
         yes           Std       4 NIA$SPURINT
         yes           Std       1 HFC$UNLOCK
         yes           Std       2 NIS$MASK
         yes           Std       2 NIM$REQUEUE
         yes           Std       1 NIO$SPCOMP
         yes           Std       3 PMN$COLLECT
         yes           Std       3 HFC$ASSOCCLR
         yes           Std       1 NIS$DRIVER
 yes     yes           Std       2 NIF$ANIOM
 yes     yes           Std       3 NIF$ANFAULT
         yes           Std       2 NIO$COMP
 yes     yes           Std       2 NIM$DEQUEUE
 yes     yes           Std       1 NIQ$GET
 yes     yes           Std       1 NIQ$REL
 yes     yes           Std       1 NIO$DCWBLD
                       nStd      0 X66_AUTO_3
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     HW_PTB_UNITS                          HW_IOPTP_UNITS                        HW_IOP
     HW_IMX                                N$DCT$$                               N$FQ$
     NI$FQ$                                NI$IBUF$                              NI$RP$
     NI_DBLZERO                            S_WSPTD                               B$LS$
     B$MISC$                               F_DCBLOCK                             OCI_BOOT
     B_VECTNIL
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:33   

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:34   


       82        1        /*T***********************************************************/
       83        2        /*T*                                                         */
       84        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       85        4        /*T*                                                         */
       86        5        /*T***********************************************************/
       87        6        /*X* DMR */
       88        7        /*D*  NAME:             NIC$POSTER
       89        8
       90        9              CALL:             CALL NIC$POSTER ( PAR, INTLVL, STATUS ) ;
       91       10
       92       11              ENVIRONMENT:      Monitor Linkage Segment, Interrupt Level
       93       12
       94       13              INPUT:            PAR     - DQH
       95       14                                INTLVL  - 0 = Overhead
       96       15                                          1 = Terminate
       97       16                                          2 = Marker
       98       17                                          3 = Special
       99       18                                          4 = Lost
      100       19                                STATUS  - Status double word.
      101       20
      102       21              DESCRIPTION:      This routine handles all interrupts from the
      103       22                                IOM/IOP/IMX connected consoles.
      104       23        */
      105       24        NIC$POSTER: PROC ( PAR, INTLVL, STATUS ) ;

     24  1 000000   000000 700200 xent  NIC$POSTER   TSX0  ! X66_AUTO_3
         1 000001   000034 000003                    ZERO    28,3

      106       25        /*
      107       26                Includes
      108       27        */
      109       28        %INCLUDE                B_MLSMAC_C ;
      110      970        %INCLUDE                B_STRINGS_C ;
      111     1099        %INCLUDE                CP_6_SUBS ;
      112     1639        %INCLUDE                EL_SUBS_C ;
      113     1723        %INCLUDE                HF_LOCK_C ;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:35   
      114     1737        %INCLUDE                HF_DATA_R ;
      115     1780        %INCLUDE                NI_DATA_C ;
      116     1893        %INCLUDE                NI_DATA_R ;
      117     2330        %INCLUDE                N_FC_C ;
      118     2367        %INCLUDE                PM$NI ;
      119     2391        %INCLUDE                S_WSPTD_R ;
      120     2407        %INCLUDE                NI_MACROS_C ;
      121     2674        /*
      122     2675                Macros
      123     2676        */
      124     2677        %MACRO ERRMSG           ( NAME = ""
      125     2678                                , MESS = ""
      126     2679                                , CR   = "2 * BIT(18) INIT('015012'O)," ) ;
      127     2680        DCL 1 NAME              CONSTANT,
      128     2681              CR
      129     2682              2 *               CHAR(0) INIT(MESS),
      130     2683              2 *               BIT(45) INIT('015012000000000'O) ;
      131     2684        %MEND ;
      132     2685        %SUB EREQ               = EREQ$->REQ ;
      133     2686        %SUB FOREVER            = "WHILE('1'B)" ;
      134     2687        %EQU O40                = BITBIN('40'O) ;
      135     2688        %SUB NEVER              = "WHILE('0'B)" ;
      136     2689        /*
      137     2690                Parameters
      138     2691        */
      139     2692    1   DCL 1 INTLVL            UBIN(18) PARAM ;
      140     2693    1   DCL 1 PAR               SBIN PARAM ;    /* N$REQ */
      141     2694        %STATUS                 ( NAME=STATUS, STCLASS=PARAM ) ;
      142     2761        /*
      143     2762                Entries
      144     2763        */
      145     2764    1   DCL 1 HFC$ASSOCCLR      ENTRY(3) ;
      146     2765    1   DCL 1 NIA$SPURINT       ENTRY(4) ;
      147     2766    1   DCL 1 NIF$ANFAULT       ENTRY(3) ALTRET ;
      148     2767    1   DCL 1 NIF$ANIOM         ENTRY(2) ALTRET ;
      149     2768    1   DCL 1 NIO$DCWBLD        ENTRY(1) ALTRET ;
      150     2769    1   DCL 1 NIO$COMP          ENTRY(2) ;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:36   
      151     2770    1   DCL 1 NIO$SPCOMP        ENTRY(1) ;
      152     2771    1   DCL 1 NIQ$GET           ENTRY(1) ALTRET ;
      153     2772    1   DCL 1 NIQ$REL           ENTRY(1) ALTRET ;
      154     2773    1   DCL 1 NIS$DRIVER        ENTRY(1) ;
      155     2774    1   DCL 1 NIS$MASK          ENTRY(2) ;
      156     2775    1   DCL 1 PMN$COLLECT       ENTRY(3) ;
      157     2776        /*
      158     2777                Symrefs
      159     2778        */
      160     2779    1   DCL 1 B$LS$             PTR SYMREF ;
      161     2780    1   DCL 1 B$MISC$           PTR SYMREF ;
      162     2781    1   DCL 1 F_DCBLOCK         SBIN SYMREF ;
      163     2782    1   DCL 1 OCI_BOOT          BIT(1) ALIGNED SYMREF ;
      164     2783        /*
      165     2784                Auto
      166     2785        */
      167     2786    1   DCL 1 ACTION            SBIN WORD ALIGNED AUTO ;
      168     2787    1   DCL 1 ARS               SBIN WORD ALIGNED AUTO ;
      169     2788    1   DCL 1 CHANTIME          SBIN WORD ALIGNED AUTO ;
      170     2789    1   DCL 1 CODE              SBIN WORD ALIGNED AUTO ;
      171     2790    1   DCL 1 DCT$              PTR ALIGNED AUTO ;
      172     2791    1   DCL 1 DQH$              PTR ALIGNED AUTO ;
      173     2792    1   DCL 1 EREQ$             PTR ALIGNED AUTO ;
      174     2793    1   DCL 1 I                 SBIN WORD ALIGNED AUTO ;
      175     2794    1   DCL 1 J                 SBIN WORD ALIGNED AUTO ;
      176     2795    1   DCL 1 K                 SBIN WORD ALIGNED AUTO ;
      177     2796    1   DCL 1 MINOR             SBIN WORD ALIGNED AUTO ;
      178     2797    1   DCL 1 REQ$              PTR ALIGNED AUTO ;
      179     2798    1   DCL 1 SQH$              PTR ALIGNED AUTO ;
      180     2799    1   DCL 1 MSG$              PTR ALIGNED AUTO ;
      181     2800    1   DCL 1 T$                PTR ALIGNED AUTO ;
      182     2801        /*
      183     2802                Based
      184     2803        */
      185     2804        %B_MLS                  ( FPTN=B$MLNK, STCLASS=BASED ) ;
      186     3619    1   DCL 1 BUFFER            CHAR(1) BASED(T$) ;
      187     3620        %NI$DCT                 ( NAME=DCT,    STCLASS="BASED(DCT$)" ) ;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:37   
      188     3668        %NI$DQH                 ( NAME=DQH,    STCLASS="BASED(DQH$)" ) ;
      189     3691        %NI$IOM                 ( NAME=IOM,    STCLASS=BASED ) ;
      190     3696        %NI$REQ                 ( NAME=IOS,    STCLASS=BASED ) ;
      191     3721        %NI$IOSTAT              ( NAME=IOSTAT, STCLASS=BASED ) ;
      192     3730        %NI$MBX                 ( NAME=MBX,    STCLASS=BASED ) ;
      193     3749        %N$REQ                  ( NAME=REQ,    STCLASS="BASED(REQ$)" ) ;
      194     3807        %NI$SQH                 ( NAME=SQH,    STCLASS="BASED(SQH$)" ) ;
      195     3820        /*
      196     3821                Constants
      197     3822        */
      198     3823    1   DCL 1 DALERTACT(0:%O40) UBIN(3) UNAL CONSTANT
      199     3824    1                           INIT(6,2,3,6,4,6*3,1,6*9,3,6*13,5);
      200     3825    1   DCL 1 DALERTTYC(0:%O40) BIT(36) ALIGNED CONSTANT
      201     3826    1                           INIT(%TYC_IOERR*4,'0'B,%TYC_IOERR*3,
      202     3827    1                                %TYC_TIMO,%TYC_IOERR*23,%TYC_IOERR);
      203     3828        %ERRMSG                 ( NAME=MSGOV, MESS="'--BUFFER OVERFLOW, RETRY'" ) ;
      204     3834        %ERRMSG                 ( NAME=MSGPE, MESS="'--PARITY ERROR, RETRY'" ) ;
      205     3840        %ERRMSG                 ( NAME=MSGRE, MESS="'--RETRY'" ) ;
      206     3846        %ERRMSG                 ( NAME=MSGTE, MESS="'--TIMING ERROR, RETRY'" ) ;
      207     3852        %ERRMSG                 ( NAME=MSGTO, MESS="'--CONSOLE TIMEOUT'" ) ;
      208     3858        %ERRMSG                 ( NAME=MSGUS, MESS="'_'", CR="" ) ;
      209     3864    1   DCL 1 MSGS(0:4)         VECTOR CONSTANT INIT(VECTOR(MSGTE),
      210     3865    1                                                VECTOR(MSGPE),
      211     3866    1                                                VECTOR(MSGUS),
      212     3867    1                                                VECTOR(MSGOV),
      213     3868    1                                                VECTOR(MSGRE) ) ;
      214     3869    1   DCL 1 NONBS(0:511)      UBIN(9) UNAL CONSTANT INIT(1*8,0,1*503) ;
      215     3870        %EJECT;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:38   
      216     3871    2           DO INHIBIT;

      217     3872    3              DO CASE(INTLVL);

   3872  1 000002   200004 470700                    LDP0  ! @INTLVL,,AUTO
         1 000003   000000 220300                    LDX0  ! 0,,PR0
         1 000004   000006 100203                    CMPX0 ! 6,DU
         1 000005   000007 602210 1                  TNC   ! s:3872+5,X0
         1 000006   000254 710200 1                  TRA   ! s:3949
         1 000007   000015 710200 1                  TRA   ! s:3874
         1 000010   000015 710200 1                  TRA   ! s:3874
         1 000011   000161 710200 1                  TRA   ! s:3918
         1 000012   000176 710200 1                  TRA   ! s:3922
         1 000013   000015 710200 1                  TRA   ! s:3874
         1 000014   000242 710200 1                  TRA   ! s:3943

      218     3873    3               CASE(%OVERHEAD,%TERMINATE,%LOST);

      219     3874    3                 DQH$=ADDR(PAR);

   3874  1 000015   200003 236300                    LDQ   ! @PAR,,AUTO
         1 000016   200013 756300                    STQ   ! DQH$,,AUTO

      220     3875    3                 SQH$=DQH.SQH$;

   3875  1 000017   200013 471700                    LDP1  ! DQH$,,AUTO
         1 000020   100013 236300                    LDQ   ! 11,,PR1
         1 000021   200022 756300                    STQ   ! SQH$,,AUTO

      221     3876                      %LOCK (G#=SQH.GATE);

   3877  1 000022   200022 630700                    EPPR0 ! SQH$,,AUTO
         1 000023   000017 631600 xsym               EPPR1 ! B_VECTNIL+15
         1 000024   000000 701200 xent               TSX1  ! HFC$LOCK
         1 000025   000000 011200                    NOP   ! 0

      222     3879    3                 IF  DQH.STATE ~= %BUSY
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:39   

   3879  1 000026   200013 470700                    LDP0  ! DQH$,,AUTO
         1 000027   000001 236300                    LDQ   ! 1,,PR0
         1 000030   000077 376207                    ANQ   ! 63,DL
         1 000031   000005 116207                    CMPQ  ! 5,DL
         1 000032   000067 600200 1                  TZE   ! s:3891

      223     3880    4                 THEN DO ;

      224     3881    4                    IF  ADDR(STATUS) = ADDR(NIL)

   3881  1 000033   200005 236300                    LDQ   ! @STATUS,,AUTO
         1 000034   000001 116200 xsym               CMPQ  ! B_VECTNIL+1
         1 000035   000051 601200 1                  TNZ   ! s:3885

      225     3882    4                    THEN
      226     3883    4                       CALL NIA$SPURINT ( DQH, EL_SPURINT, INTLVL, NI_DBLZERO ) ;

   3883  1 000036   000001 236200 2                  LDQ   ! 1
         1 000037   200004 235300                    LDA   ! @INTLVL,,AUTO
         1 000040   200032 757300                    STAQ  ! @MSG+3,,AUTO
         1 000041   000002 236200 2                  LDQ   ! 2
         1 000042   200013 235300                    LDA   ! DQH$,,AUTO
         1 000043   200030 757300                    STAQ  ! @MSG+1,,AUTO
         1 000044   200030 630700                    EPPR0 ! @MSG+1,,AUTO
         1 000045   000022 631600 xsym               EPPR1 ! B_VECTNIL+18
         1 000046   000000 701200 xent               TSX1  ! NIA$SPURINT
         1 000047   000000 011200                    NOP   ! 0
         1 000050   000062 710200 1                  TRA   ! s:3887

      227     3884    4                    ELSE
      228     3885    4                       CALL NIA$SPURINT ( DQH, EL_SPURINT, INTLVL, STATUS ) ;

   3885  1 000051   200004 237300                    LDAQ  ! @INTLVL,,AUTO
         1 000052   200032 757300                    STAQ  ! @MSG+3,,AUTO
         1 000053   000002 236200 2                  LDQ   ! 2
         1 000054   200013 235300                    LDA   ! DQH$,,AUTO
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:40   
         1 000055   200030 757300                    STAQ  ! @MSG+1,,AUTO
         1 000056   200030 630700                    EPPR0 ! @MSG+1,,AUTO
         1 000057   000022 631600 xsym               EPPR1 ! B_VECTNIL+18
         1 000060   000000 701200 xent               TSX1  ! NIA$SPURINT
         1 000061   000000 011200                    NOP   ! 0

      229     3886                         %UNLOCK ( G#=SQH.GATE ) ;

   3887  1 000062   200022 630700                    EPPR0 ! SQH$,,AUTO
         1 000063   000017 631600 xsym               EPPR1 ! B_VECTNIL+15
         1 000064   000000 701200 xent               TSX1  ! HFC$UNLOCK
         1 000065   000000 011200                    NOP   ! 0

      230     3889    4                    RETURN ;

   3889  1 000066   000000 702200 xent               TSX2  ! X66_ARET

      231     3890    4                    END ;
      232     3891    3                 REQ$=DQH.IO$;

   3891  1 000067   000014 236300                    LDQ   ! 12,,PR0
         1 000070   200021 756300                    STQ   ! REQ$,,AUTO

      233     3892    3                 DCT$=REQ.DCT$;

   3892  1 000071   200021 471700                    LDP1  ! REQ$,,AUTO
         1 000072   100002 236300                    LDQ   ! 2,,PR1
         1 000073   200012 756300                    STQ   ! DCT$,,AUTO

      234     3893    3                 IF HW_IMX THEN

   3893  1 000074   000000 234200 xsym               SZN   ! HW_IMX
         1 000075   000102 605200 1                  TPL   ! s:3896

      235     3894    3                    REQ.FLPW=DQH.IOSTATUS$->IOSTAT.LPW_RESIDUE;

   3894  1 000076   000016 473700                    LDP3  ! 14,,PR0
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:41   
         1 000077   300003 236300                    LDQ   ! 3,,PR3
         1 000100   100016 756300                    STQ   ! 14,,PR1
         1 000101   000105 710200 1                  TRA   ! s:3897

      236     3895    3                 ELSE
      237     3896    3                    REQ.FLPW=DQH.MBX$->MBX.LPW;

   3896  1 000102   000021 473700                    LDP3  ! 17,,PR0
         1 000103   300000 236300                    LDQ   ! 0,,PR3
         1 000104   100016 756300                    STQ   ! 14,,PR1

      238     3897    4                 IF INTLVL=%TERMINATE THEN DO;

   3897  1 000105   200004 471700                    LDP1  ! @INTLVL,,AUTO
         1 000106   100000 220300                    LDX0  ! 0,,PR1
         1 000107   000001 100203                    CMPX0 ! 1,DU
         1 000110   000134 601200 1                  TNZ   ! s:3909

      239     3898    4                    REQ.STATUS=DQH.IOSTATUS$->IOSTAT.STATUS;

   3898  1 000111   000016 473700                    LDP3  ! 14,,PR0
         1 000112   300000 237300                    LDAQ  ! 0,,PR3
         1 000113   200021 474700                    LDP4  ! REQ$,,AUTO
         1 000114   400014 757300                    STAQ  ! 12,,PR4

      240     3899    4                    IF HW_IOP THEN    /* ignore IOP generated lost interrupt */

   3899  1 000115   000000 234200 xsym               SZN   ! HW_IOP
         1 000116   000154 605200 1                  TPL   ! s:3915

      241     3900    4                       IF REQ.STATUS.MAJOR = %READY AND

   3900  1 000117   200021 473700                    LDP3  ! REQ$,,AUTO
         1 000120   300014 236300                    LDQ   ! 12,,PR3
         1 000121   170000 316203                    CANQ  ! 61440,DU
         1 000122   000154 601200 1                  TNZ   ! s:3915
         1 000123   300014 236300                    LDQ   ! 12,,PR3
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:42   
         1 000124   700000 376207                    ANQ   ! -32768,DL
         1 000125   400000 116207                    CMPQ  ! -131072,DL
         1 000126   000154 601200 1                  TNZ   ! s:3915

      242     3901    5                         REQ.STATUS.IOM.CHANNEL = %LOSTINT THEN DO;

      243     3902                               %UNLOCK (G#=SQH.GATE);

   3903  1 000127   200022 630700                    EPPR0 ! SQH$,,AUTO
         1 000130   000017 631600 xsym               EPPR1 ! B_VECTNIL+15
         1 000131   000000 701200 xent               TSX1  ! HFC$UNLOCK
         1 000132   000000 011200                    NOP   ! 0

      244     3905    5                          RETURN;

   3905  1 000133   000000 702200 xent               TSX2  ! X66_ARET

      245     3906    5                          END;
      246     3907    4                    END;
      247     3908    4                 ELSE DO;

      248     3909    4                    REQ.STATUS=STATUS;

   3909  1 000134   200005 473700                    LDP3  ! @STATUS,,AUTO
         1 000135   300000 237300                    LDAQ  ! 0,,PR3
         1 000136   200021 474700                    LDP4  ! REQ$,,AUTO
         1 000137   400014 757300                    STAQ  ! 12,,PR4

      249     3910    5                    IF REQ.STATUS.MAJOR=%LOST_INTERRUPT THEN DO;

   3910  1 000140   200021 474700                    LDP4  ! REQ$,,AUTO
         1 000141   400014 236300                    LDQ   ! 12,,PR4
         1 000142   170000 376203                    ANQ   ! 61440,DU
         1 000143   100000 116203                    CMPQ  ! 32768,DU
         1 000144   000154 601200 1                  TNZ   ! s:3915

      250     3911    5                       CALL NIS$MASK(DQH,%IMX_CCW_MASK_CHAN);
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:43   

   3911  1 000145   000003 236200 2                  LDQ   ! 3
         1 000146   200013 235300                    LDA   ! DQH$,,AUTO
         1 000147   200030 757300                    STAQ  ! @MSG+1,,AUTO
         1 000150   200030 630700                    EPPR0 ! @MSG+1,,AUTO
         1 000151   000020 631600 xsym               EPPR1 ! B_VECTNIL+16
         1 000152   000000 701200 xent               TSX1  ! NIS$MASK
         1 000153   000000 011200                    NOP   ! 0

      251     3912    5                       END;

      252     3913    4                    END;

      253     3914                      %UNLOCK (G#=SQH.GATE);

   3915  1 000154   200022 630700                    EPPR0 ! SQH$,,AUTO
         1 000155   000017 631600 xsym               EPPR1 ! B_VECTNIL+15
         1 000156   000000 701200 xent               TSX1  ! HFC$UNLOCK
         1 000157   000000 011200                    NOP   ! 0
         1 000160   000254 710200 1                  TRA   ! s:3949

      254     3917    3               CASE(%MARKER);

      255     3918    3                 DQH$=ADDR(PAR);

   3918  1 000161   200003 236300                    LDQ   ! @PAR,,AUTO
         1 000162   200013 756300                    STQ   ! DQH$,,AUTO

      256     3919    3                 CALL NIA$SPURINT(DQH,EL_SPURINT,INTLVL,NI_DBLZERO);

   3919  1 000163   000001 236200 2                  LDQ   ! 1
         1 000164   200004 235300                    LDA   ! @INTLVL,,AUTO
         1 000165   200032 757300                    STAQ  ! @MSG+3,,AUTO
         1 000166   000002 236200 2                  LDQ   ! 2
         1 000167   200013 235300                    LDA   ! DQH$,,AUTO
         1 000170   200030 757300                    STAQ  ! @MSG+1,,AUTO
         1 000171   200030 630700                    EPPR0 ! @MSG+1,,AUTO
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:44   
         1 000172   000022 631600 xsym               EPPR1 ! B_VECTNIL+18
         1 000173   000000 701200 xent               TSX1  ! NIA$SPURINT
         1 000174   000000 011200                    NOP   ! 0

      257     3920    3                 RETURN;

   3920  1 000175   000000 702200 xent               TSX2  ! X66_ARET

      258     3921    3               CASE(%SPECIAL);

      259     3922    3                 DQH$=ADDR(PAR);

   3922  1 000176   200003 236300                    LDQ   ! @PAR,,AUTO
         1 000177   200013 756300                    STQ   ! DQH$,,AUTO

      260     3923    3                 SQH$=DQH.SQH$;

   3923  1 000200   200013 471700                    LDP1  ! DQH$,,AUTO
         1 000201   100013 236300                    LDQ   ! 11,,PR1
         1 000202   200022 756300                    STQ   ! SQH$,,AUTO

      261     3924    3                 DCT$=N$DCT$(SQH.FDCT);

   3924  1 000203   200022 473700                    LDP3  ! SQH$,,AUTO
         1 000204   300002 221300                    LDX1  ! 2,,PR3
         1 000205   000000 474600 xsym               LDP4  ! N$DCT$$
         1 000206   400000 236311                    LDQ   ! 0,X1,PR4
         1 000207   200012 756300                    STQ   ! DCT$,,AUTO

      262     3925                      %LOCK (G#=SQH.GATE);

   3926  1 000210   200022 630700                    EPPR0 ! SQH$,,AUTO
         1 000211   000017 631600 xsym               EPPR1 ! B_VECTNIL+15
         1 000212   000000 701200 xent               TSX1  ! HFC$LOCK
         1 000213   000000 011200                    NOP   ! 0

      263     3928    4                 IF DCT.SPSTAT.PRESENCE THEN DO;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:45   

   3928  1 000214   200012 470700                    LDP0  ! DCT$,,AUTO
         1 000215   000017 234300                    SZN   ! 15,,PR0
         1 000216   000224 605200 1                  TPL   ! s:3934

      264     3929                         %UNLOCK (G#=SQH.GATE);

   3930  1 000217   200022 630700                    EPPR0 ! SQH$,,AUTO
         1 000220   000017 631600 xsym               EPPR1 ! B_VECTNIL+15
         1 000221   000000 701200 xent               TSX1  ! HFC$UNLOCK
         1 000222   000000 011200                    NOP   ! 0

      265     3932    4                    END;

   3932  1 000223   000241 710200 1                  TRA   ! s:3941

      266     3933    4                 ELSE DO;

      267     3934    4                    DCT.SPSTAT='56'O;

   3934  1 000224   560000 236203                    LDQ   ! -73728,DU
         1 000225   000017 756300                    STQ   ! 15,,PR0

      268     3935                         %UNLOCK (G#=SQH.GATE);

   3936  1 000226   200022 630700                    EPPR0 ! SQH$,,AUTO
         1 000227   000017 631600 xsym               EPPR1 ! B_VECTNIL+15
         1 000230   000000 701200 xent               TSX1  ! HFC$UNLOCK
         1 000231   000000 011200                    NOP   ! 0

      269     3938    4                    CALL NIO$SPCOMP(DCT);

   3938  1 000232   200012 630700                    EPPR0 ! DCT$,,AUTO
         1 000233   000017 631600 xsym               EPPR1 ! B_VECTNIL+15
         1 000234   000000 701200 xent               TSX1  ! NIO$SPCOMP
         1 000235   000000 011200                    NOP   ! 0

PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:46   
      270     3939    4                    DCT.SPSTAT.PRESENCE='0'B;

   3939  1 000236   200012 470700                    LDP0  ! DCT$,,AUTO
         1 000237   000031 236200 xsym               LDQ   ! B_VECTNIL+25
         1 000240   000017 356300                    ANSQ  ! 15,,PR0

      271     3940    4                    END;

      272     3941    3                 RETURN;

   3941  1 000241   000000 702200 xent               TSX2  ! X66_ARET

      273     3942    3               CASE(%REPOST);

      274     3943    3                 REQ$=ADDR(PAR);

   3943  1 000242   200003 236300                    LDQ   ! @PAR,,AUTO
         1 000243   200021 756300                    STQ   ! REQ$,,AUTO

      275     3944    3                 DCT$=REQ.DCT$;

   3944  1 000244   200021 471700                    LDP1  ! REQ$,,AUTO
         1 000245   100002 236300                    LDQ   ! 2,,PR1
         1 000246   200012 756300                    STQ   ! DCT$,,AUTO

      276     3945    3                 SQH$=DCT.SQH$;

   3945  1 000247   200012 473700                    LDP3  ! DCT$,,AUTO
         1 000250   300022 236300                    LDQ   ! 18,,PR3
         1 000251   200022 756300                    STQ   ! SQH$,,AUTO

      277     3946    3                 DQH$=DCT.DQH$;

   3946  1 000252   300023 236300                    LDQ   ! 19,,PR3
         1 000253   200013 756300                    STQ   ! DQH$,,AUTO

      278     3947    3               END;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:47   

      279     3948    2              END;

      280     3949    1           IF NOT REQ.STATUS.PRESENCE THEN REQ.STATUS.MAJOR = %LOST_INTERRUPT;

   3949  1 000254   200021 470500                    LDP0    REQ$,,AUTO
         1 000255   000014 234100                    SZN     12,,PR0
         1 000256   000263 604000 1                  TMI     s:3950

   3949  1 000257   000014 236100                    LDQ     12,,PR0
         1 000260   000004 376000 2                  ANQ     4
         1 000261   100000 276003                    ORQ     32768,DU
         1 000262   000014 756100                    STQ     12,,PR0

      281     3950    1           CALL PMN$COLLECT(DQH.PM,%PM_IDLE,CHANTIME);

   3950  1 000263   200010 630500                    EPPR0   CHANTIME,,AUTO
         1 000264   200032 450500                    STP0    @MSG+3,,AUTO
         1 000265   000005 236000 2                  LDQ     5
         1 000266   200031 756100                    STQ     @MSG+2,,AUTO
         1 000267   200013 236100                    LDQ     DQH$,,AUTO
         1 000270   000002 036003                    ADLQ    2,DU
         1 000271   200030 756100                    STQ     @MSG+1,,AUTO
         1 000272   200030 630500                    EPPR0   @MSG+1,,AUTO
         1 000273   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 000274   000000 701000 xent               TSX1    PMN$COLLECT
         1 000275   000000 011000                    NOP     0

      282     3951    1           DQH.STATE=%REQUESTED;

   3951  1 000276   200013 470500                    LDP0    DQH$,,AUTO
         1 000277   000001 236007                    LDQ     1,DL
         1 000300   000001 752101                    STCQ    1,'01'O,PR0

      283     3952    1           EREQ$=ADDR(NIL);

   3952  1 000301   000001 236000 xsym               LDQ     B_VECTNIL+1
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:48   
         1 000302   200014 756100                    STQ     EREQ$,,AUTO

      284     3953    2           IF REQ.COMP=%COMP_TD THEN DO;

   3953  1 000303   200021 471500                    LDP1    REQ$,,AUTO
         1 000304   100027 236100                    LDQ     23,,PR1
         1 000305   177000 376007                    ANQ     65024,DL
         1 000306   004000 116007                    CMPQ    2048,DL
         1 000307   000313 601000 1                  TNZ     s:3957

      285     3954    2              REQ.EAINFO=CHANTIME;

   3954  1 000310   200010 235100                    LDA     CHANTIME,,AUTO
         1 000311   100024 755100                    STA     20,,PR1

      286     3955    2              GOTO COMP_IT;

   3955  1 000312   000762 710000 1                  TRA     COMP_IT

      287     3956    2              END;
      288     3957    1           REQ.TYC='0'B;

   3957  1 000313   100021 450100                    STZ     17,,PR1

      289     3958    2           IF REQ.STATUS.IOM THEN DO;

   3958  1 000314   200021 471500                    LDP1    REQ$,,AUTO
         1 000315   100014 236100                    LDQ     12,,PR1
         1 000316   770000 316007                    CANQ    -4096,DL
         1 000317   000335 600000 1                  TZE     s:3963

      290     3959    2              CALL NIF$ANIOM(REQ,CODE) ALTRET(CALLER);

   3959  1 000320   200011 633500                    EPPR3   CODE,,AUTO
         1 000321   200031 453500                    STP3    @MSG+2,,AUTO
         1 000322   200021 236100                    LDQ     REQ$,,AUTO
         1 000323   200030 756100                    STQ     @MSG+1,,AUTO
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:49   
         1 000324   200030 630500                    EPPR0   @MSG+1,,AUTO
         1 000325   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000326   000000 701000 xent               TSX1    NIF$ANIOM
         1 000327   000525 702000 1                  TSX2    CALLER

      291     3960    2              REQ.ERRCT=REQ.ERRCT+1;

   3960  1 000330   200021 470500                    LDP0    REQ$,,AUTO
         1 000331   000003 236100                    LDQ     3,,PR0
         1 000332   001000 036003                    ADLQ    512,DU
         1 000333   000003 552140                    STBQ    3,'40'O,PR0

      292     3961    2              GOTO RETRY;

   3961  1 000334   000440 710000 1                  TRA     RETRY

      293     3962    2              END;
      294     3963    1           MINOR=BITBIN(REQ.STATUS.MINOR);

   3963  1 000335   100014 236100                    LDQ     12,,PR1
         1 000336   000030 772000                    QRL     24
         1 000337   000077 376007                    ANQ     63,DL
         1 000340   200020 756100                    STQ     MINOR,,AUTO

      295     3964    2           DO CASE(REQ.STATUS.MAJOR);

   3964  1 000341   100014 236100                    LDQ     12,,PR1
         1 000342   000036 772000                    QRL     30
         1 000343   000017 376007                    ANQ     15,DL
         1 000344   000020 116007                    CMPQ    16,DL
         1 000345   000347 602006 1                  TNC     s:3964+6,QL
         1 000346   000515 710000 1                  TRA     ILLSTAT
         1 000347   000367 710000 1                  TRA     s:3966
         1 000350   000515 710000 1                  TRA     ILLSTAT
         1 000351   000372 710000 1                  TRA     s:3968
         1 000352   000373 710000 1                  TRA     s:3970
         1 000353   000515 710000 1                  TRA     ILLSTAT
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:50   
         1 000354   000452 710000 1                  TRA     s:3986
         1 000355   000515 710000 1                  TRA     ILLSTAT
         1 000356   000515 710000 1                  TRA     ILLSTAT
         1 000357   000462 710000 1                  TRA     s:3991
         1 000360   000515 710000 1                  TRA     ILLSTAT
         1 000361   000515 710000 1                  TRA     ILLSTAT
         1 000362   000515 710000 1                  TRA     ILLSTAT
         1 000363   000515 710000 1                  TRA     ILLSTAT
         1 000364   000515 710000 1                  TRA     ILLSTAT
         1 000365   000515 710000 1                  TRA     ILLSTAT
         1 000366   000504 710000 1                  TRA     s:3999

      296     3965    2            CASE(%READY);

      297     3966    2              IF MINOR~=0 THEN GOTO ILLSTAT;

   3966  1 000367   200020 235100                    LDA     MINOR,,AUTO
         1 000370   000515 601000 1                  TNZ     ILLSTAT
         1 000371   000525 710000 1                  TRA     CALLER

      298     3967    2            CASE(%ATTENTION);

      299     3968    2              GOTO ILLSTAT;

   3968  1 000372   000515 710000 1                  TRA     ILLSTAT

      300     3969    2            CASE(%DATA_ALERT);

      301     3970    2              IF MINOR>%O40 THEN GOTO ILLSTAT;

   3970  1 000373   200020 235100                    LDA     MINOR,,AUTO
         1 000374   000040 115007                    CMPA    32,DL
         1 000375   000515 605400 1                  TPNZ    ILLSTAT

      302     3971    2              REQ.TYC=REQ.TYC|DALERTTYC(MINOR);

   3971  1 000376   100021 236100                    LDQ     17,,PR1
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:51   
         1 000377   000003 276005 0                  ORQ     DALERTTYC,AL
         1 000400   100021 756100                    STQ     17,,PR1

      303     3972    2              ACTION=DALERTACT(MINOR);

   3972  1 000401   200020 236100                    LDQ     MINOR,,AUTO
         1 000402   000003 402007                    MPY     3,DL
         1 000403   000000 116003                    CMPQ    0,DU
         1 000404   000406 605000 1                  TPL     s:3972+5
         1 000405   000044 036003                    ADLQ    36,DU
         1 000406   003100 061406                    CSR     bolr='003'O
         1 000407   000000 000003 0                  BDSC    DALERTACT,Q              by=0,bit=0,n=3
         1 000410   200006 000044                    BDSC    ACTION,,AUTO             by=0,bit=0,n=36

      304     3973    3              IF ACTION=1 THEN DO;

   3973  1 000411   200006 235100                    LDA     ACTION,,AUTO
         1 000412   000001 115007                    CMPA    1,DL
         1 000413   000423 601000 1                  TNZ     RETRY1

      305     3974    3                 REQ.STATUS.NCP=7;

   3974  1 000414   200021 471500                    LDP1    REQ$,,AUTO
         1 000415   700000 236007                    LDQ     -32768,DL
         1 000416   100015 256100                    ORSQ    13,,PR1

      306     3975    3                 REQ.ARSIZE=0;

   3975  1 000417   200021 471500                    LDP1    REQ$,,AUTO
         1 000420   177777 236007                    LDQ     65535,DL
         1 000421   100027 356100                    ANSQ    23,,PR1

      307     3976    3                 GOTO CALLER;

   3976  1 000422   000525 710000 1                  TRA     CALLER

      308     3977    3                 END;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:52   
      309     3978    2   RETRY1:
      310     3979    2              IF ACTION~=6 OR REQ.STATUS.READFLG THEN

   3979  1 000423   200006 235100       RETRY1       LDA     ACTION,,AUTO
         1 000424   000006 115007                    CMPA    6,DL
         1 000425   000432 601000 1                  TNZ     RETRY2
         1 000426   200021 470500                    LDP0    REQ$,,AUTO
         1 000427   000015 236100                    LDQ     13,,PR0
         1 000430   040000 316007                    CANQ    16384,DL
         1 000431   000440 600000 1                  TZE     RETRY

      311     3980    2   RETRY2:
      312     3981    2                 CALL ERRMSG(MSGS(ACTION-2));

   3981  1 000432   200006 236100       RETRY2       LDQ     ACTION,,AUTO
         1 000433   000023 736000                    QLS     19
         1 000434   000006 036000 2                  ADLQ    6
         1 000435   200027 756100                    STQ     T$+3,,AUTO
         1 000436   001062 701000 1                  TSX1    ERRMSG
         1 000437   000000 011000                    NOP     0

      313     3982    2   RETRY:
      314     3983    2              REQ.ERRCT=REQ.ERRCT+1;

   3983  1 000440   200021 470500       RETRY        LDP0    REQ$,,AUTO
         1 000441   000003 236100                    LDQ     3,,PR0
         1 000442   001000 036003                    ADLQ    512,DU
         1 000443   000003 552140                    STBQ    3,'40'O,PR0

      315     3984    2              IF REQ.ERRCT<=4 THEN GOTO RESCHED;

   3984  1 000444   200021 470500                    LDP0    REQ$,,AUTO
         1 000445   000003 236100                    LDQ     3,,PR0
         1 000446   777000 376003                    ANQ     -512,DU
         1 000447   005000 116003                    CMPQ    2560,DU
         1 000450   000777 602000 1                  TNC     RESCHED
         1 000451   000525 710000 1                  TRA     CALLER
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:53   

      316     3985    2            CASE(%COMMAND_REJECT);

      317     3986    2              IF MINOR~=1 THEN GOTO ILLSTAT;

   3986  1 000452   200020 235100                    LDA     MINOR,,AUTO
         1 000453   000001 115007                    CMPA    1,DL
         1 000454   000515 601000 1                  TNZ     ILLSTAT

      318     3987    2              REQ.TYC.IOERR='1'B;

   3987  1 000455   001000 236003                    LDQ     512,DU
         1 000456   100021 256100                    ORSQ    17,,PR1

      319     3988    2              ACTION=6;

   3988  1 000457   000006 235007                    LDA     6,DL
         1 000460   200006 755100                    STA     ACTION,,AUTO

      320     3989    2              GOTO RETRY1;

   3989  1 000461   000423 710000 1                  TRA     RETRY1

      321     3990    2            CASE(%LOST_INTERRUPT);

      322     3991    2              ACTION=6;

   3991  1 000462   000006 235007                    LDA     6,DL
         1 000463   200006 755100                    STA     ACTION,,AUTO

      323     3992    2              REQ.TYC.TIMO='1'B;

   3992  1 000464   000010 236003                    LDQ     8,DU
         1 000465   100021 256100                    ORSQ    17,,PR1

      324     3993    2              REQ.STATUS.NCP=7;            /* DON'T CALC ARS IN COMP */

PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:54   
   3993  1 000466   200021 471500                    LDP1    REQ$,,AUTO
         1 000467   700000 236007                    LDQ     -32768,DL
         1 000470   100015 256100                    ORSQ    13,,PR1

      325     3994    2              REQ.STATUS.READFLG='1'B;

   3994  1 000471   200021 471500                    LDP1    REQ$,,AUTO
         1 000472   040000 236007                    LDQ     16384,DL
         1 000473   100015 256100                    ORSQ    13,,PR1

      326     3995    2              REQ.ARSIZE=0;

   3995  1 000474   200021 471500                    LDP1    REQ$,,AUTO
         1 000475   177777 236007                    LDQ     65535,DL
         1 000476   100027 356100                    ANSQ    23,,PR1

      327     3996    2              CALL ERRMSG(VECTOR(MSGTO));

   3996  1 000477   000012 236000 2                  LDQ     10
         1 000500   200027 756100                    STQ     T$+3,,AUTO
         1 000501   001062 701000 1                  TSX1    ERRMSG
         1 000502   000000 011000                    NOP     0

      328     3997    2              GOTO CALLER;

   3997  1 000503   000525 710000 1                  TRA     CALLER

      329     3998    2            CASE(%SYSTEM_FAULT);

      330     3999    2              CALL NIF$ANFAULT(REQ,CODE) ALTRET(CALLER);

   3999  1 000504   200011 633500                    EPPR3   CODE,,AUTO
         1 000505   200031 453500                    STP3    @MSG+2,,AUTO
         1 000506   200021 236100                    LDQ     REQ$,,AUTO
         1 000507   200030 756100                    STQ     @MSG+1,,AUTO
         1 000510   200030 630500                    EPPR0   @MSG+1,,AUTO
         1 000511   000020 631400 xsym               EPPR1   B_VECTNIL+16
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:55   
         1 000512   000000 701000 xent               TSX1    NIF$ANFAULT
         1 000513   000525 702000 1                  TSX2    CALLER

      331     4000    2              GOTO RETRY2;

   4000  1 000514   000432 710000 1                  TRA     RETRY2

      332     4001    2            CASE(ELSE);

      333     4002    2   ILLSTAT:
      334     4003    2              ACTION=6;

   4003  1 000515   000006 235007       ILLSTAT      LDA     6,DL
         1 000516   200006 755100                    STA     ACTION,,AUTO

      335     4004    2              REQ.TYC.IOERR='1'B;

   4004  1 000517   001000 236003                    LDQ     512,DU
         1 000520   100021 256100                    ORSQ    17,,PR1

      336     4005    2              REQ.STATUS.NCP=7;            /* DON'T CALC ARS IN COMP */

   4005  1 000521   200021 471500                    LDP1    REQ$,,AUTO
         1 000522   700000 236007                    LDQ     -32768,DL
         1 000523   100015 256100                    ORSQ    13,,PR1

      337     4006    2              GOTO RETRY1;

   4006  1 000524   000423 710000 1                  TRA     RETRY1

      338     4007    2            END/* CASE MAJOR */;

      339     4008    1   CALLER:
      340     4009    2           IF OCI_BOOT AND NOT (REQ.STATUS&'37770077'O) THEN DO;

   4009  1 000525   000000 234000 xsym  CALLER       SZN     OCI_BOOT
         1 000526   000762 605000 1                  TPL     COMP_IT
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:56   
         1 000527   200021 470500                    LDP0    REQ$,,AUTO
         1 000530   000321 235000 0                  LDA     NONBS+129
         1 000531   000000 236003                    LDQ     0,DU
         1 000532   000014 377100                    ANAQ    12,,PR0
         1 000533   000762 601000 1                  TNZ     COMP_IT

      341     4010    3              IF REQ.FC=%N_READ THEN DO;

   4010  1 000534   000003 236100                    LDQ     3,,PR0
         1 000535   000777 376007                    ANQ     511,DL
         1 000536   000014 116007                    CMPQ    12,DL
         1 000537   000762 601000 1                  TNZ     COMP_IT

      342     4011    3                 ARS=REQ.STATUS.NCP;

   4011  1 000540   000015 236100                    LDQ     13,,PR0
         1 000541   000017 772000                    QRL     15
         1 000542   000007 376007                    ANQ     7,DL
         1 000543   200007 756100                    STQ     ARS,,AUTO

      343     4012    3                 IF ARS~=0 THEN ARS=ARS-4;

   4012  1 000544   000547 600000 1                  TZE     s:4013

   4012  1 000545   000004 336007                    LCQ     4,DL
         1 000546   200007 056100                    ASQ     ARS,,AUTO

      344     4013    4                 IF HW_IMX THEN DO;

   4013  1 000547   000000 234000 xsym               SZN     HW_IMX
         1 000550   000563 605000 1                  TPL     s:4018

      345     4014    4                    T$=PINCRW(REQ.IOS$,%IMX_STATUS_OFFSET);

   4014  1 000551   000012 236100                    LDQ     10,,PR0
         1 000552   000020 036003                    ADLQ    16,DU
         1 000553   200024 756100                    STQ     T$,,AUTO
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:57   

      346     4015    4                    ARS=T$->IOSTAT.LAST_IDCW.COUNT*4+ARS;

   4015  1 000554   200024 471500                    LDP1    T$,,AUTO
         1 000555   100004 236100                    LDQ     4,,PR1
         1 000556   000010 772000                    QRL     8
         1 000557   000013 376000 2                  ANQ     11
         1 000560   200007 036100                    ADLQ    ARS,,AUTO
         1 000561   200007 756100                    STQ     ARS,,AUTO

      347     4016    4                    END;

   4016  1 000562   000575 710000 1                  TRA     s:4020

      348     4017    3                 ELSE
      349     4018    3                    ARS=(REQ.STATUS.NWA-REQ.BUFREAL.ADR)*4+ARS;

   4018  1 000563   000006 236100                    LDQ     6,,PR0
         1 000564   000002 772000                    QRL     2
         1 000565   777777 376007                    ANQ     -1,DL
         1 000566   200030 756100                    STQ     @MSG+1,,AUTO
         1 000567   000015 236100                    LDQ     13,,PR0
         1 000570   000022 772000                    QRL     18
         1 000571   200030 136100                    SBLQ    @MSG+1,,AUTO
         1 000572   000002 736000                    QLS     2
         1 000573   200007 036100                    ADLQ    ARS,,AUTO
         1 000574   200007 756100                    STQ     ARS,,AUTO

      350     4019                      %LOCK(G#=F_DCBLOCK);

   4020  1 000575   000014 630400 2                  EPPR0   12
         1 000576   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000577   000000 701000 xent               TSX1    HFC$LOCK
         1 000600   000000 011000                    NOP     0

      351     4022    3                 B$LS$->B$MLNK.MISC=B$LS$->B$MLNK.IOEND;

PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:58   
   4022  1 000601   000000 470400 xsym               LDP0    B$LS$
         1 000602   000244 237100                    LDAQ    164,,PR0
         1 000603   000130 757100                    STAQ    88,,PR0

      352     4023    3                 B$LS$->B$MLNK.MISC.BOUND=((REQ.BUFVIRT.BYT+ARS+7)/8)*8-1;

   4023  1 000604   200021 471500                    LDP1    REQ$,,AUTO
         1 000605   100006 236100                    LDQ     6,,PR1
         1 000606   000007 376007                    ANQ     7,DL
         1 000607   200007 036100                    ADLQ    ARS,,AUTO
         1 000610   000007 036007                    ADLQ    7,DL
         1 000611   000010 506007                    DIV     8,DL
         1 000612   000003 736000                    QLS     3
         1 000613   000001 136007                    SBLQ    1,DL
         1 000614   000020 736000                    QLS     16
         1 000615   000130 676100                    ERQ     88,,PR0
         1 000616   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000617   000130 656100                    ERSQ    88,,PR0

      353     4024    3                 J = HW_PTB_UNITS/HW_IOPTP_UNITS;

   4024  1 000620   000000 236000 xsym               LDQ     HW_PTB_UNITS
         1 000621   000000 506000 xsym               DIV     HW_IOPTP_UNITS
         1 000622   200016 756100                    STQ     J,,AUTO

      354     4025    3                 S_WSPTD.BLKNO(%IOENDWSQ) = REQ.PTP/J;

   4025  1 000623   100007 236100                    LDQ     7,,PR1
         1 000624   200016 506100                    DIV     J,,AUTO
         1 000625   000000 620006                    EAX0    0,QL
         1 000626   000007 740000 xsym               STX0    S_WSPTD+7

      355     4026    3                 B$LS$->B$MLNK.MISC.BASE = REQ.BUFVIRT.BASE*8 + MOD(REQ.PTP,J)*
              4026                          HW_IOPTP_UNITS*4096;

   4026  1 000627   100007 236100                    LDQ     7,,PR1
         1 000630   200016 506100                    DIV     J,,AUTO
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:59   
         1 000631   000044 733000                    LRS     36
         1 000632   000000 402000 xsym               MPY     HW_IOPTP_UNITS
         1 000633   200030 756100                    STQ     @MSG+1,,AUTO
         1 000634   100006 236100                    LDQ     6,,PR1
         1 000635   000003 732000                    QRS     3
         1 000636   200031 756100                    STQ     @MSG+2,,AUTO
         1 000637   200030 236100                    LDQ     @MSG+1,,AUTO
         1 000640   000011 736000                    QLS     9
         1 000641   200031 036100                    ADLQ    @MSG+2,,AUTO
         1 000642   000003 736000                    QLS     3
         1 000643   000131 756100                    STQ     89,,PR0

      356     4027    3                 CALL HFC$ASSOCCLR(%IOENDWSQ,0,16384); /*MAX Dense PT*/

   4027  1 000644   000016 630400 2                  EPPR0   14
         1 000645   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 000646   000000 701000 xent               TSX1    HFC$ASSOCCLR
         1 000647   000000 011000                    NOP     0

      357     4028    3                 T$=PINCRC(B$MISC$,REQ.BUFVIRT.BYT);

   4028  1 000650   200021 470500                    LDP0    REQ$,,AUTO
         1 000651   000006 236100                    LDQ     6,,PR0
         1 000652   000007 376007                    ANQ     7,DL
         1 000653   000020 736000                    QLS     16
         1 000654   000000 036000 xsym               ADLQ    B$MISC$
         1 000655   200024 756100                    STQ     T$,,AUTO

      358     4029    3                 I=0;

   4029  1 000656   200015 450100                    STZ     I,,AUTO

      359     4030    4                 DO FOREVER;

      360     4031    4                    CALL INDEX(I,BINASC(8)/*BS*/,SUBSTR(BUFFER,0,ARS),I) ALTRET(NOBS);

   4031  1 000657   200007 236100                    LDQ     ARS,,AUTO
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:60   
         1 000660   200015 136100                    SBLQ    I,,AUTO
         1 000661   200030 756100                    STQ     @MSG+1,,AUTO
         1 000662   200015 236100                    LDQ     I,,AUTO
         1 000663   200024 470500                    LDP0    T$,,AUTO
         1 000664   200030 720100                    LXL0    @MSG+1,,AUTO
         1 000665   200015 235100                    LDA     I,,AUTO
         1 000666   000000 124545                    SCM     mask='000'O
         1 000667   000000 000010                    ADSC9   0,A,PR0                  cn=0,n=*X0
         1 000670   000021 000001 2                  ADSC9   17                       cn=0,n=1
         1 000671   200015 000100                    ARG     I,,AUTO
         1 000672   200015 056100                    ASQ     I,,AUTO
         1 000673   000736 606400 1                  TTN     NOBS

      361     4032    4                    CALL SEARCH(J,K,NONBS,SUBSTR(BUFFER,0,ARS),I);

   4032  1 000674   200007 236100                    LDQ     ARS,,AUTO
         1 000675   200015 136100                    SBLQ    I,,AUTO
         1 000676   200030 756100                    STQ     @MSG+1,,AUTO
         1 000677   200015 236100                    LDQ     I,,AUTO
         1 000700   200030 720100                    LXL0    @MSG+1,,AUTO
         1 000701   000000 164546                    TCT
         1 000702   000000 000010                    ADSC9   0,Q,PR0                  cn=0,n=*X0
         1 000703   000120 000000 0                  ARG     NONBS
         1 000704   200016 000100                    ARG     J,,AUTO
         1 000705   200016 235100                    LDA     J,,AUTO
         1 000706   000033 771000                    ARL     27
         1 000707   200017 755100                    STA     K,,AUTO
         1 000710   200016 551140                    STBA    J,'40'O,AUTO
         1 000711   200016 056100                    ASQ     J,,AUTO

      362     4033    4                    I=2*I-J;

   4033  1 000712   000001 736000                    QLS     1
         1 000713   000027 676000 xsym               ERQ     B_VECTNIL+23
         1 000714   000001 036007                    ADLQ    1,DL
         1 000715   200016 036100                    ADLQ    J,,AUTO
         1 000716   000027 676000 xsym               ERQ     B_VECTNIL+23
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:61   
         1 000717   000001 036007                    ADLQ    1,DL
         1 000720   200015 756100                    STQ     I,,AUTO

      363     4034    4                    K=ARS-J;

   4034  1 000721   200007 236100                    LDQ     ARS,,AUTO
         1 000722   200016 136100                    SBLQ    J,,AUTO
         1 000723   200017 756100                    STQ     K,,AUTO

      364     4035    4                    CALL INSERT(BUFFER,I,K,SUBSTR(BUFFER,J,K));

   4035  1 000724   000000 620006                    EAX0    0,QL
         1 000725   200016 235100                    LDA     J,,AUTO
         1 000726   200017 721100                    LXL1    K,,AUTO
         1 000727   200015 236100                    LDQ     I,,AUTO
         1 000730   040146 100545                    MLR     fill='040'O
         1 000731   000000 000010                    ADSC9   0,A,PR0                  cn=0,n=*X0
         1 000732   000000 000011                    ADSC9   0,Q,PR0                  cn=0,n=*X1

      365     4036    4                    ARS=K+I;

   4036  1 000733   200017 036100                    ADLQ    K,,AUTO
         1 000734   200007 756100                    STQ     ARS,,AUTO

      366     4037    4                    END;

   4037  1 000735   000657 710000 1                  TRA     s:4031

      367     4038    3   NOBS:
      368     4039                      %UNLOCK(G#=F_DCBLOCK);

   4040  1 000736   000014 630400 2     NOBS         EPPR0   12
         1 000737   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000740   000000 701000 xent               TSX1    HFC$UNLOCK
         1 000741   000000 011000                    NOP     0

      369     4042    3                 REQ.STATUS.NWA=(REQ.BUFADDR+ARS+3)/4;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:62   

   4042  1 000742   200021 470500                    LDP0    REQ$,,AUTO
         1 000743   000006 236100                    LDQ     6,,PR0
         1 000744   200007 036100                    ADLQ    ARS,,AUTO
         1 000745   000003 036007                    ADLQ    3,DL
         1 000746   000004 506007                    DIV     4,DL
         1 000747   000000 620006                    EAX0    0,QL
         1 000750   000015 740100                    STX0    13,,PR0

      370     4043    3                 REQ.STATUS.NCP=MOD(REQ.BUFADDR+ARS,4);

   4043  1 000751   200021 470500                    LDP0    REQ$,,AUTO
         1 000752   000006 236100                    LDQ     6,,PR0
         1 000753   200007 036100                    ADLQ    ARS,,AUTO
         1 000754   000004 506007                    DIV     4,DL
         1 000755   000044 733000                    LRS     36
         1 000756   000017 736000                    QLS     15
         1 000757   000015 676100                    ERQ     13,,PR0
         1 000760   700000 376007                    ANQ     -32768,DL
         1 000761   000015 656100                    ERSQ    13,,PR0

      371     4044    3                 END/* IF REQ.FC */;

      372     4045    2              END/* IF OCI_BOOT */;

      373     4046                                        /* DON'T CALCULATE ARS IF ANY FUNNY
      374     4047                                           STATUS BITS ARE SET */
      375     4048    1   COMP_IT:
      376     4049    1           IF REQ.STATUS & '37000077'O THEN REQ.STATUS.NCP=7;

   4049  1 000762   200021 470500       COMP_IT      LDP0    REQ$,,AUTO
         1 000763   000322 235000 0                  LDA     NONBS+130
         1 000764   000000 236003                    LDQ     0,DU
         1 000765   000014 377100                    ANAQ    12,,PR0
         1 000766   000771 600000 1                  TZE     s:4050

   4049  1 000767   700000 236007                    LDQ     -32768,DL
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:63   
         1 000770   000015 256100                    ORSQ    13,,PR0

      377     4050    1           CALL NIO$COMP(REQ);

   4050  1 000771   200021 630500                    EPPR0   REQ$,,AUTO
         1 000772   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000773   000000 701000 xent               TSX1    NIO$COMP
         1 000774   000000 011000                    NOP     0

      378     4051    1           REQ$=ADDR(NIL);

   4051  1 000775   000001 236000 xsym               LDQ     B_VECTNIL+1
         1 000776   200021 756100                    STQ     REQ$,,AUTO

      379     4052    1   RESCHED:
      380     4053                %LOCK (G#=SQH.GATE);

   4054  1 000777   200022 630500       RESCHED      EPPR0   SQH$,,AUTO
         1 001000   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 001001   000000 701000 xent               TSX1    HFC$LOCK
         1 001002   000000 011000                    NOP     0

      381     4056    2           IF EREQ$~=ADDR(NIL) THEN DO;

   4056  1 001003   200014 236100                    LDQ     EREQ$,,AUTO
         1 001004   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 001005   001024 600000 1                  TZE     s:4065

      382     4057    3              IF REQ$~=ADDR(NIL) THEN DO;

   4057  1 001006   200021 236100                    LDQ     REQ$,,AUTO
         1 001007   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 001010   001021 600000 1                  TZE     s:4062

      383     4058                      %REQUEUE (P#=REQ,Q#=DCT.SQ$);

   4059  1 001011   200012 236100                    LDQ     DCT$,,AUTO
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:64   
         1 001012   000001 036003                    ADLQ    1,DU
         1 001013   200021 235100                    LDA     REQ$,,AUTO
         1 001014   200030 757100                    STAQ    @MSG+1,,AUTO
         1 001015   200030 630500                    EPPR0   @MSG+1,,AUTO
         1 001016   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 001017   000000 701000 xent               TSX1    NIM$REQUEUE
         1 001020   000000 011000                    NOP     0

      384     4061    3                 END;

      385     4062    2              REQ$=EREQ$;

   4062  1 001021   200014 236100                    LDQ     EREQ$,,AUTO
         1 001022   200021 756100                    STQ     REQ$,,AUTO

      386     4063    2              END;

   4063  1 001023   001040 710000 1                  TRA     s:4075

      387     4064    2           ELSE DO;

      388     4065    3              IF REQ$=ADDR(NIL) THEN DO;

   4065  1 001024   200021 236100                    LDQ     REQ$,,AUTO
         1 001025   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 001026   001040 601000 1                  TNZ     s:4075

      389     4066                      %DEQUEUE (P#=REQ$,Q#=DCT.SQ$);

   4070  1 001027   200012 236100                    LDQ     DCT$,,AUTO
         1 001030   000001 036003                    ADLQ    1,DU
         1 001031   200031 756100                    STQ     @MSG+2,,AUTO
         1 001032   200021 630500                    EPPR0   REQ$,,AUTO
         1 001033   200030 450500                    STP0    @MSG+1,,AUTO
         1 001034   200030 630500                    EPPR0   @MSG+1,,AUTO
         1 001035   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 001036   000000 701000 xent               TSX1    NIM$DEQUEUE
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:65   
         1 001037   000000 011000                    NOP     0

      390     4073    3                 END;

      391     4074    2              END;

      392     4075    2           IF REQ$=ADDR(NIL) THEN DO;

   4075  1 001040   200021 236100                    LDQ     REQ$,,AUTO
         1 001041   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 001042   001047 601000 1                  TNZ     s:4079

      393     4076    2              DQH.STATE=%IDLE;

   4076  1 001043   200013 470500                    LDP0    DQH$,,AUTO
         1 001044   000000 236003                    LDQ     0,DU
         1 001045   000001 752101                    STCQ    1,'01'O,PR0

      394     4077    2              END;

   4077  1 001046   001055 710000 1                  TRA     s:4083

      395     4078    2           ELSE DO;

      396     4079    2              DQH.IO$=REQ$;

   4079  1 001047   200013 470500                    LDP0    DQH$,,AUTO
         1 001050   000014 756100                    STQ     12,,PR0

      397     4080    2              CALL NIS$DRIVER(DQH);

   4080  1 001051   200013 630500                    EPPR0   DQH$,,AUTO
         1 001052   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 001053   000000 701000 xent               TSX1    NIS$DRIVER
         1 001054   000000 011000                    NOP     0

      398     4081    2              END;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:66   

      399     4082                %UNLOCK (G#=SQH.GATE);

   4083  1 001055   200022 630500                    EPPR0   SQH$,,AUTO
         1 001056   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 001057   000000 701000 xent               TSX1    HFC$UNLOCK
         1 001060   000000 011000                    NOP     0

      400     4085    1           RETURN;

   4085  1 001061   000000 702200 xent               TSX2  ! X66_ARET

      401     4086        %EJECT;
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:67   
      402     4087        /* SET UP ERROR MESSAGE */
      403     4088        /**/
      404     4089    1   ERRMSG: PROC (MSG);

   4089  1 001062   200026 741300       ERRMSG       STX1  ! T$+2,,AUTO

      405     4090    2   DCL 1 MSG ALIGNED,
      406     4091    2         2 LEN UBIN(18) UNAL,              /* SIZE (WORDS) */
      407     4092    2         2 MSG$ PTR;
      408     4093        /**/
      409     4094        /**/
      410     4095    2           IF REQ.ERRCT>4 OR REQ.COMP~=%COMP_REG THEN RETURN;

   4095  1 001063   200021 470500                    LDP0    REQ$,,AUTO
         1 001064   000003 236100                    LDQ     3,,PR0
         1 001065   777000 376003                    ANQ     -512,DU
         1 001066   005000 116003                    CMPQ    2560,DU
         1 001067   001073 603000 1                  TRC     s:4095+8
         1 001070   000027 236100                    LDQ     23,,PR0
         1 001071   177000 316007                    CANQ    65024,DL
         1 001072   001074 600000 1                  TZE     s:4096

   4095  1 001073   000001 702211                    TSX2  ! 1,X1

      411     4096    2           IF NOT REQ.STATUS.READFLG THEN RETURN;

   4096  1 001074   000015 236100                    LDQ     13,,PR0
         1 001075   040000 316007                    CANQ    16384,DL
         1 001076   001100 601000 1                  TNZ     s:4097

   4096  1 001077   000001 702211                    TSX2  ! 1,X1

      412     4097    2           CALL NIQ$GET(EREQ$) ALTRET(OHWELL);

   4097  1 001100   200014 631500                    EPPR1   EREQ$,,AUTO
         1 001101   200030 451500                    STP1    @MSG+1,,AUTO
         1 001102   200030 630500                    EPPR0   @MSG+1,,AUTO
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:68   
         1 001103   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 001104   000000 701000 xent               TSX1    NIQ$GET
         1 001105   001155 702000 1                  TSX2    OHWELL

      413     4098    2           EREQ$->REQ.DLA=REQ.DLA;

   4098  1 001106   200021 470500                    LDP0    REQ$,,AUTO
         1 001107   000001 236100                    LDQ     1,,PR0
         1 001110   200014 471500                    LDP1    EREQ$,,AUTO
         1 001111   100001 756100                    STQ     1,,PR1

      414     4099    2           EREQ$->REQ.FC=%N_WRASC;

   4099  1 001112   200014 470500                    LDP0    EREQ$,,AUTO
         1 001113   000005 236007                    LDQ     5,DL
         1 001114   000003 552104                    STBQ    3,'04'O,PR0

      415     4100    2           EREQ$->REQ.BUF$=MSG.MSG$;

   4100  1 001115   200027 470500                    LDP0    @MSG,,AUTO
         1 001116   000001 236100                    LDQ     1,,PR0
         1 001117   200014 471500                    LDP1    EREQ$,,AUTO
         1 001120   100005 756100                    STQ     5,,PR1

      416     4101    2           EREQ$->REQ.BUFSIZE=MSG.LEN*4;

   4101  1 001121   200014 471500                    LDP1    EREQ$,,AUTO
         1 001122   000000 236100                    LDQ     0,,PR0
         1 001123   000020 772000                    QRL     16
         1 001124   000022 376000 2                  ANQ     18
         1 001125   000020 736000                    QLS     16
         1 001126   100004 676100                    ERQ     4,,PR1
         1 001127   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 001130   100004 656100                    ERSQ    4,,PR1

      417     4102    2           EREQ$->REQ.OPFLG=OP_BPF;

PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:69   
   4102  1 001131   200014 471500                    LDP1    EREQ$,,AUTO
         1 001132   000010 236007                    LDQ     8,DL
         1 001133   100004 552104                    STBQ    4,'04'O,PR1

      418     4103    2           EREQ$->REQ.COMP=%COMP_IOS;

   4103  1 001134   200014 471500                    LDP1    EREQ$,,AUTO
         1 001135   100027 236100                    LDQ     23,,PR1
         1 001136   000023 376000 2                  ANQ     19
         1 001137   003000 276007                    ORQ     1536,DL
         1 001140   100027 756100                    STQ     23,,PR1

      419     4104    2           CALL NIO$DCWBLD(EREQ$->REQ) ALTRET(RELIOQ);

   4104  1 001141   200014 630500                    EPPR0   EREQ$,,AUTO
         1 001142   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 001143   000000 701000 xent               TSX1    NIO$DCWBLD
         1 001144   001147 702000 1                  TSX2    RELIOQ

      420     4105    2           RETURN;

   4105  1 001145   200026 221300                    LDX1  ! T$+2,,AUTO
         1 001146   000001 702211                    TSX2  ! 1,X1

      421     4106    2   RELIOQ: CALL NIQ$REL(EREQ$);

   4106  1 001147   200014 630500       RELIOQ       EPPR0   EREQ$,,AUTO
         1 001150   200030 450500                    STP0    @MSG+1,,AUTO
         1 001151   200030 630500                    EPPR0   @MSG+1,,AUTO
         1 001152   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 001153   000000 701000 xent               TSX1    NIQ$REL
         1 001154   000000 011000                    NOP     0

      422     4107    2   OHWELL: RETURN;

   4107  1 001155   200026 221300       OHWELL       LDX1  ! T$+2,,AUTO
         1 001156   000001 702211                    TSX2  ! 1,X1
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:70   

DALERTACT
 Sect OctLoc
   0     000   623646 661666   666666 366666   666666 665***                    ............

DALERTTYC
 Sect OctLoc
   0     003   001000 000000   001000 000000   001000 000000   001000 000000    ................
   0     007   000000 000000   001000 000000   001000 000000   001000 000000    ................
   0     013   000010 000000   001000 000000   001000 000000   001000 000000    ................
   0     017   001000 000000   001000 000000   001000 000000   001000 000000    ................
   0     043*  001000 000000                                                    ....

MSGOV
 Sect OctLoc
   0     044   015012 055055   102125 106106   105122 040117   126105 122106    ..--BUFFER OVERF
   0     050   114117 127054   040122 105124   122131 015012   000000 000***    LOW, RETRY......

MSGPE
 Sect OctLoc
   0     054   015012 055055   120101 122111   124131 040105   122122 117122    ..--PARITY ERROR
   0     060   054040 122105   124122 131015   012000 000000                    , RETRY.....

MSGRE
 Sect OctLoc
   0     063   015012 055055   122105 124122   131015 012000   000000 ******    ..--RETRY.......

MSGTE
 Sect OctLoc
   0     067   015012 055055   124111 115111   116107 040105   122122 117122    ..--TIMING ERROR
   0     073   054040 122105   124122 131015   012000 000000                    , RETRY.....

MSGTO
 Sect OctLoc
   0     076   015012 055055   103117 116123   117114 105040   124111 115105    ..--CONSOLE TIME
   0     102   117125 124015   012000 000000                                    OUT.....

PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:71   
MSGUS
 Sect OctLoc
   0     104   137015 012000   000000 ******                                    _.......

MSGS
 Sect OctLoc
   0     106   000006 777640   000067 006000   000006 777640   000054 006000    .....7.......,..
   0     112   000001 377640   000104 006000   000007 577640   000044 006000    .....D.......$..
   0     116   000003 377640   000063 006000                                    .....3..

NONBS
 Sect OctLoc
   0     120   001001 001001   001001 001001   000001 001001   001001 001001    ................
   0     124   001001 001001   001001 001001   001001 001001   001001 001001    ................
   0     314*  001001 001001   001001 001001   001001 001001   001001 001001    ................

(unnamed)
 Sect OctLoc
   0     320   604000 000000   377700 770000   370000 770000                    ............

(unnamed)
 Sect OctLoc
   2     000   000000 000315   000000 006000   000000 006000   000320 006000    ................
   2     004   607777 777777   000002 006000   000102 006000   000000 000000    .........B......
   2     010   000005 777640   000076 006000   000010 006000   001777 777774    .....>..........
   2     014   000000 006000   000000 040000   000011 006000   000002 006000    ...... .........
   2     020   000015 006000   010040 040040   000003 777774   777777 600777    .....   ........
      423     4108        /**/
      424     4109    2   END ERRMSG;
      425     4110    1   END NIC$POSTER;
      426     4111        %EOD;

PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:72   
--  Include file information  --

   NI_MACROS_C.:E05TOU  cannot be made into a system file and is referenced.
   S_WSPTD_R.:E05TOU  cannot be made into a system file and is referenced.
   PM$NI.:E05TOU  is referenced.
   N_FC_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   NI_DATA_C.:E05TOU  is referenced.
   HF_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   HF_LOCK_C.:E05TOU  cannot be made into a system file and is referenced.
   EL_SUBS_C.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   B_MLSMAC_C.:E05TOU  is referenced.
      No diagnostics issued in procedure NIC$POSTER.
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:73   

 **** Variables and constants ****

  ****  Section 000 RoData NIC$POSTER

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/b UBIN(3)     r     1 DALERTACT(0:32)
     3-0-0/w BIT         r     1 DALERTTYC(0:32)
    44-0-0/c STRC(279)   r     1 MSGOV                     54-0-0/c STRC(252)   r     1 MSGPE
    63-0-0/c STRC(126)   r     1 MSGRE                    106-0-0/d VECT        r     1 MSGS(0:4)
    67-0-0/c STRC(252)   r     1 MSGTE                     76-0-0/c STRC(216)   r     1 MSGTO
   104-0-0/c STRC(54)    r     1 MSGUS                    120-0-0/b UBIN(9)     r     1 NONBS(0:511)

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @INTLVL                   27-0-0/w PTR         r     1 @MSG
     3-0-0/w PTR         r     1 @PAR                       5-0-0/w PTR         r     1 @STATUS
     6-0-0/w SBIN        r     1 ACTION                     7-0-0/w SBIN        r     1 ARS
    10-0-0/w SBIN        r     1 CHANTIME                  11-0-0/w SBIN        r     1 CODE
    12-0-0/w PTR         r     1 DCT$                      13-0-0/w PTR         r     1 DQH$
    14-0-0/w PTR         r     1 EREQ$                     15-0-0/w SBIN        r     1 I
    *0-0-0/w UBIN(18)    r     1 INTLVL                    16-0-0/w SBIN        r     1 J
    17-0-0/w SBIN        r     1 K                         20-0-0/w SBIN        r     1 MINOR
    *0-0-0/w STRC(72)    r     1 MSG                       *0-0-0/w SBIN        r     1 PAR
    21-0-0/w PTR         r     1 REQ$                      22-0-0/w PTR         r     1 SQH$
    *0-0-0/d STRC(72)    r     1 STATUS                    24-0-0/w PTR         r     1 T$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$LS$                      0-0-0/w PTR         r     1 B$MISC$
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:74   
     0-0-0/w SBIN        r     1 F_DCBLOCK                  0-0-0/w BIT         r     1 HW_IMX
     0-0-0/w BIT         r     1 HW_IOP                     0-0-0/w SBIN        r     1 HW_IOPTP_UNITS
     0-0-0/w SBIN        r     1 HW_PTB_UNITS               0-0-0/w PTR         r     1 N$DCT$$
     0-0-0/w PTR         r     1 N$FQ$                      0-0-0/w PTR         r     1 NI$FQ$
     0-0-0/w PTR         r     1 NI$IBUF$                   0-0-0/w PTR         r     1 NI$RP$
     0-0-0/d BIT (72)    r     1 NI_DBLZERO                 0-0-0/w BIT         r     1 OCI_BOOT
     0-0-0/w STRC        r     1 S_WSPTD(0:28)

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(10368) r     1 B$MLNK                     0-0-0/c CHAR        r     1 BUFFER
     0-0-0/w STRC(1332)  r     1 DCT                        0-0-0/w STRC(648)   r     1 DQH
     0-0-0/d STRC(576)   r     1 IOSTAT                     0-0-0/d STRC(144)   r     1 MBX
     0-0-0/w PTR         r     1 N$DCT$(0:0)                0-0-0/d STRC(1080)  r     1 REQ
     0-0-0/w STRC(252)   r     1 SQH


   Procedure NIC$POSTER requires 623 words for executable code.
   Procedure NIC$POSTER requires 28 words of local(AUTO) storage.
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:75   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:76   
          MINI XREF LISTING

ACTION
      2786**DCL      3972<<ASSIGN   3973>>IF       3979>>IF       3981>>CALL     3988<<ASSIGN   3991<<ASSIGN
      4003<<ASSIGN
ARS
      2787**DCL      4011<<ASSIGN   4012>>IF       4012<<ASSIGN   4012>>ASSIGN   4015<<ASSIGN   4015>>ASSIGN
      4018<<ASSIGN   4018>>ASSIGN   4023>>ASSIGN   4031>>CALLBLT  4032>>CALLBLT  4034>>ASSIGN   4036<<ASSIGN
      4042>>ASSIGN   4043>>ASSIGN
B$LS$
      2779**DCL      4022>>ASSIGN   4022>>ASSIGN   4023>>ASSIGN   4026>>ASSIGN
B$MISC$
      2780**DCL      4028>>ASSIGN
B$MLNK.IOEND
      3344**DCL      4022>>ASSIGN
B$MLNK.MISC
      3116**DCL      4022<<ASSIGN
B$MLNK.MISC.BASE
      3121**DCL      4026<<ASSIGN
B$MLNK.MISC.BOUND
      3117**DCL      4023<<ASSIGN
BUFFER
      3619**DCL      4031>>CALLBLT  4032>>CALLBLT  4035<<CALLBLT  4035>>CALLBLT
CALLER
      4009**LABEL    3959--CALLALT  3976--GOTO     3997--GOTO     3999--CALLALT
CHANTIME
      2788**DCL      3950<>CALL     3954>>ASSIGN
CODE
      2789**DCL      3959<>CALL     3999<>CALL
COMP_IT
      4049**LABEL    3955--GOTO
DALERTACT
      3823**DCL      3972>>ASSIGN
DALERTTYC
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:77   
      3825**DCL      3971>>ASSIGN
DCT
      3629**DCL      3938<>CALL
DCT.DP
      3649**DCL      3656--REDEF    3659--REDEF    3660--REDEF    3662--REDEF    3662--REDEF    3663--REDEF
      3664--REDEF    3664--REDEF
DCT.DQH$
      3645**DCL      3946>>ASSIGN
DCT.MPC.IOCHANX
      3657**DCL      3657--REDEF
DCT.SPSTAT
      3641**DCL      3934<<ASSIGN
DCT.SPSTAT.PRESENCE
      3641**DCL      3928>>IF       3939<<ASSIGN
DCT.SQ$
      3629**DCL      4059<>CALL     4070<>CALL
DCT.SQH$
      3644**DCL      3945>>ASSIGN
DCT$
      2790**DCL      3629--IMP-PTR  3892<<ASSIGN   3924<<ASSIGN   3928>>IF       3934>>ASSIGN   3938>>CALL
      3939>>ASSIGN   3944<<ASSIGN   3945>>ASSIGN   3946>>ASSIGN   4059>>CALL     4070>>CALL
DQH
      3677**DCL      3883<>CALL     3885<>CALL     3911<>CALL     3919<>CALL     4080<>CALL
DQH.IO$
      3684**DCL      3891>>ASSIGN   4079<<ASSIGN
DQH.IOCHANX
      3679**DCL      3680--REDEF
DQH.IOSTATUS$
      3684**DCL      3894>>ASSIGN   3898>>ASSIGN
DQH.MBX$
      3688**DCL      3689--REDEF    3896>>ASSIGN
DQH.PM
      3681**DCL      3950<>CALL
DQH.SQH$
      3683**DCL      3875>>ASSIGN   3923>>ASSIGN
DQH.STATE
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:78   
      3681**DCL      3879>>IF       3951<<ASSIGN   4076<<ASSIGN
DQH$
      2791**DCL      3677--IMP-PTR  3874<<ASSIGN   3875>>ASSIGN   3879>>IF       3883>>CALL     3885>>CALL
      3891>>ASSIGN   3894>>ASSIGN   3896>>ASSIGN   3898>>ASSIGN   3911>>CALL     3918<<ASSIGN   3919>>CALL
      3922<<ASSIGN   3923>>ASSIGN   3946<<ASSIGN   3950>>CALL     3951>>ASSIGN   4076>>ASSIGN   4079>>ASSIGN
      4080>>CALL
EREQ$
      2792**DCL      3952<<ASSIGN   4056>>IF       4062>>ASSIGN   4097<>CALL     4098>>ASSIGN   4099>>ASSIGN
      4100>>ASSIGN   4101>>ASSIGN   4102>>ASSIGN   4103>>ASSIGN   4104>>CALL     4106<>CALL
ERRMSG
      4089**PROC     3981--CALL     3996--CALL
F_DCBLOCK
      2781**DCL      4020<>CALL     4040<>CALL
HFC$ASSOCCLR
      2764**DCL-ENT  4027--CALL
HFC$LOCK
      1736**DCL-ENT  3877--CALL     3926--CALL     4020--CALL     4054--CALL
HFC$UNLOCK
      1736**DCL-ENT  3887--CALL     3903--CALL     3915--CALL     3930--CALL     3936--CALL     4040--CALL
      4083--CALL
HW_IMX
      1779**DCL      3893>>IF       4013>>IF
HW_IOP
      1776**DCL      3899>>IF
HW_IOPTP_UNITS
      1774**DCL      4024>>ASSIGN   4026>>ASSIGN
HW_PTB_UNITS
      1774**DCL      4024>>ASSIGN
I
      2793**DCL      4029<<ASSIGN   4031<<CALLBLT  4031>>CALLBLT  4032>>CALLBLT  4033<<ASSIGN   4033>>ASSIGN
      4035>>CALLBLT  4036>>ASSIGN
ILLSTAT
      4003**LABEL    3966--GOTO     3968--GOTO     3970--GOTO     3986--GOTO
INTLVL
      2692**DCL        24--PROC     3872>>DOCASE   3883<>CALL     3885<>CALL     3897>>IF       3919<>CALL
IOS.DCW
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:79   
      3707**DCL      3710--REDEF
IOS.DCW.TALLY
      3708**DCL      3708--REDEF
IOS.IDCW.EXTA
      3710**DCL      3710--REDEF
IOS.PCW
      3712**DCL      3716--REDEF
IOS.SEEK
      3717**DCL      3718--REDEF    3719--REDEF
IOSTAT.AESDCW
      3727**DCL      3727--REDEF
IOSTAT.LAST_IDCW.COUNT
      3727**DCL      4015>>ASSIGN
IOSTAT.LPW_RESIDUE
      3725**DCL      3894>>ASSIGN
IOSTAT.STATUS
      3722**DCL      3898>>ASSIGN
J
      2794**DCL      4024<<ASSIGN   4025>>ASSIGN   4026>>ASSIGN   4032<<CALLBLT  4033>>ASSIGN   4034>>ASSIGN
      4035>>CALLBLT
K
      2795**DCL      4032<<CALLBLT  4034<<ASSIGN   4035>>CALLBLT  4035>>CALLBLT  4036>>ASSIGN
MBX.DCW.CONTROL.AE
      3746**DCL      3746--REDEF
MBX.LPW
      3741**DCL      3896>>ASSIGN
MBX.LPW.CONTROL.AE
      3742**DCL      3742--REDEF
MINOR
      2796**DCL      3963<<ASSIGN   3966>>IF       3970>>IF       3971>>ASSIGN   3972>>ASSIGN   3986>>IF
MSG IN PROCEDURE ERRMSG
      4090**DCL      4089--PROC
MSG.LEN IN PROCEDURE ERRMSG
      4091**DCL      4101>>ASSIGN
MSG.MSG$ IN PROCEDURE ERRMSG
      4092**DCL      4100>>ASSIGN
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:80   
MSGOV
      3829**DCL      3867--DCLINIT
MSGPE
      3835**DCL      3865--DCLINIT
MSGRE
      3841**DCL      3868--DCLINIT
MSGS
      3864**DCL      3981<>CALL
MSGTE
      3847**DCL      3864--DCLINIT
MSGTO
      3853**DCL      3996--CALL
MSGUS
      3859**DCL      3866--DCLINIT
N$DCT$
      2325**DCL      3924>>ASSIGN
N$DCT$$
      2191**DCL      2325--IMP-PTR  3924>>ASSIGN
N$FQ$
      2191**DCL      2326--IMP-PTR
N$REQ_INIT.BUFADDR
      2210**DCL      2211--REDEF    2211--REDEF
N$REQ_INIT.DLA.DRELADDR
      2202**DCL      2202--REDEF
N$REQ_INIT.DVE.EOMCHAR
      2239**DCL      2240--REDEF
N$REQ_INIT.EAINFO
      2233**DCL      2233--REDEF
N$REQ_INIT.EAINFOX
      2233**DCL      2234--REDEF
N$REQ_INIT.EVNTINFO
      2234**DCL      2234--REDEF
N$REQ_INIT.STATUS
      2215**DCL      2221--REDEF
NI$FQ$
      2251**DCL      2327--IMP-PTR
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:81   
NI$IBUF$
      2251**DCL      2327--IMP-PTR
NI$IMXMBX_INIT.PAGED_BASE
      2261**DCL      2262--REDEF    2262--REDEF
NI$IMXMBX_INIT.SIZE
      2263**DCL      2263--REDEF
NI$REQ_INIT.DCW
      2285**DCL      2288--REDEF
NI$REQ_INIT.DCW.TALLY
      2286**DCL      2286--REDEF
NI$REQ_INIT.IDCW.EXTA
      2288**DCL      2288--REDEF
NI$REQ_INIT.PCW
      2290**DCL      2294--REDEF
NI$REQ_INIT.SEEK
      2295**DCL      2296--REDEF    2297--REDEF
NI$RP$
      2299**DCL      2329--IMP-PTR
NIA$SPURINT
      2765**DCL-ENT  3883--CALL     3885--CALL     3919--CALL
NIF$ANFAULT
      2766**DCL-ENT  3999--CALL
NIF$ANIOM
      2767**DCL-ENT  3959--CALL
NIM$DEQUEUE
      2431**DCL-ENT  4070--CALL
NIM$REQUEUE
      2433**DCL-ENT  4059--CALL
NIO$COMP
      2769**DCL-ENT  4050--CALL
NIO$DCWBLD
      2768**DCL-ENT  4104--CALL
NIO$SPCOMP
      2770**DCL-ENT  3938--CALL
NIQ$GET
      2771**DCL-ENT  4097--CALL
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:82   
NIQ$REL
      2772**DCL-ENT  4106--CALL
NIS$DRIVER
      2773**DCL-ENT  4080--CALL
NIS$MASK
      2774**DCL-ENT  3911--CALL
NI_DBLZERO
      2300**DCL      3883<>CALL     3919<>CALL
NI_MBX_INIT.DCW.CONTROL.AE
      2321**DCL      2321--REDEF
NI_MBX_INIT.LPW.CONTROL.AE
      2317**DCL      2317--REDEF
NOBS
      4040**LABEL    4031--CALLALT
NONBS
      3869**DCL      4032>>CALLBLT
OCI_BOOT
      2782**DCL      4009>>IF
OHWELL IN PROCEDURE ERRMSG
      4107**LABEL    4097--CALLALT
PAR
      2693**DCL        24--PROC     3874--ASSIGN   3918--ASSIGN   3922--ASSIGN   3943--ASSIGN
PMN$COLLECT
      2775**DCL-ENT  3950--CALL
RELIOQ IN PROCEDURE ERRMSG
      4106**LABEL    4104--CALLALT
REQ
      3758**DCL      3959<>CALL     3999<>CALL     4050<>CALL     4059<>CALL     4104<>CALL
REQ.ARSIZE
      3791**DCL      3975<<ASSIGN   3995<<ASSIGN
REQ.BUF$
      3767**DCL      4100<<ASSIGN
REQ.BUFADDR
      3767**DCL      3768--REDEF    3768--REDEF    4042>>ASSIGN   4043>>ASSIGN
REQ.BUFREAL.ADR
      3768**DCL      4018>>ASSIGN
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:83   
REQ.BUFSIZE
      3761**DCL      4101<<ASSIGN
REQ.BUFVIRT.BASE
      3768**DCL      4026>>ASSIGN
REQ.BUFVIRT.BYT
      3768**DCL      4023>>ASSIGN   4028>>ASSIGN
REQ.COMP
      3792**DCL      3953>>IF       4095>>IF       4103<<ASSIGN
REQ.DCT$
      3759**DCL      3892>>ASSIGN   3944>>ASSIGN
REQ.DLA
      3758**DCL      4098<<ASSIGN   4098>>ASSIGN
REQ.DLA.DRELADDR
      3759**DCL      3759--REDEF
REQ.DVE.EOMCHAR
      3796**DCL      3797--REDEF
REQ.EAINFO
      3790**DCL      3790--REDEF    3954<<ASSIGN
REQ.EAINFOX
      3790**DCL      3791--REDEF
REQ.ERRCT
      3760**DCL      3960<<ASSIGN   3960>>ASSIGN   3983<<ASSIGN   3983>>ASSIGN   3984>>IF       4095>>IF
REQ.EVNTINFO
      3791**DCL      3791--REDEF
REQ.FC
      3761**DCL      4010>>IF       4099<<ASSIGN
REQ.FLPW
      3779**DCL      3894<<ASSIGN   3896<<ASSIGN
REQ.IOS$
      3771**DCL      4014>>ASSIGN
REQ.OPFLG
      3764**DCL      4102<<ASSIGN
REQ.PTP
      3769**DCL      4025>>ASSIGN   4026>>ASSIGN
REQ.STATUS
      3772**DCL      3778--REDEF    3898<<ASSIGN   3909<<ASSIGN   4009>>IF       4049>>IF
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:84   
REQ.STATUS.IOM
      3775**DCL      3958>>IF
REQ.STATUS.IOM.CHANNEL
      3775**DCL      3900>>IF
REQ.STATUS.MAJOR
      3772**DCL      3900>>IF       3910>>IF       3949<<ASSIGN   3964>>DOCASE
REQ.STATUS.MINOR
      3773**DCL      3963>>ASSIGN
REQ.STATUS.NCP
      3776**DCL      3974<<ASSIGN   3993<<ASSIGN   4005<<ASSIGN   4011>>ASSIGN   4043<<ASSIGN   4049<<ASSIGN
REQ.STATUS.NWA
      3776**DCL      4018>>ASSIGN   4042<<ASSIGN
REQ.STATUS.PRESENCE
      3772**DCL      3949>>IF
REQ.STATUS.READFLG
      3777**DCL      3979>>IF       3994<<ASSIGN   4096>>IF
REQ.TYC
      3780**DCL      3957<<ASSIGN   3971<<ASSIGN   3971>>ASSIGN
REQ.TYC.IOERR
      3783**DCL      3987<<ASSIGN   4004<<ASSIGN
REQ.TYC.TIMO
      3785**DCL      3992<<ASSIGN
REQ$
      2797**DCL      3758--IMP-PTR  3891<<ASSIGN   3892>>ASSIGN   3894>>ASSIGN   3896>>ASSIGN   3898>>ASSIGN
      3900>>IF       3900>>IF       3909>>ASSIGN   3910>>IF       3943<<ASSIGN   3944>>ASSIGN   3949>>IF
      3949>>ASSIGN   3953>>IF       3954>>ASSIGN   3957>>ASSIGN   3958>>IF       3959>>CALL     3960>>ASSIGN
      3960>>ASSIGN   3963>>ASSIGN   3964>>DOCASE   3971>>ASSIGN   3971>>ASSIGN   3974>>ASSIGN   3975>>ASSIGN
      3979>>IF       3983>>ASSIGN   3983>>ASSIGN   3984>>IF       3987>>ASSIGN   3992>>ASSIGN   3993>>ASSIGN
      3994>>ASSIGN   3995>>ASSIGN   3999>>CALL     4004>>ASSIGN   4005>>ASSIGN   4009>>IF       4010>>IF
      4011>>ASSIGN   4014>>ASSIGN   4018>>ASSIGN   4018>>ASSIGN   4023>>ASSIGN   4025>>ASSIGN   4026>>ASSIGN
      4026>>ASSIGN   4028>>ASSIGN   4042>>ASSIGN   4042>>ASSIGN   4043>>ASSIGN   4043>>ASSIGN   4049>>IF
      4049>>ASSIGN   4050>>CALL     4051<<ASSIGN   4057>>IF       4059>>CALL     4062<<ASSIGN   4065>>IF
      4070<>CALL     4075>>IF       4079>>ASSIGN   4095>>IF       4095>>IF       4096>>IF       4098>>ASSIGN
RESCHED
      4054**LABEL    3984--GOTO
RETRY
PL6.E3A0      #002=NIC$POSTER File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:29 Page:85   
      3983**LABEL    3961--GOTO
RETRY1
      3979**LABEL    3989--GOTO     4006--GOTO
RETRY2
      3981**LABEL    4000--GOTO
SQH.DOOR
      3816**DCL      3816--REDEF
SQH.FDCT
      3816**DCL      3924>>ASSIGN
SQH.GATE
      3816**DCL      3877<>CALL     3887<>CALL     3903<>CALL     3915<>CALL     3926<>CALL     3930<>CALL
      3936<>CALL     4054<>CALL     4083<>CALL
SQH$
      2798**DCL      3816--IMP-PTR  3875<<ASSIGN   3877>>CALL     3887>>CALL     3903>>CALL     3915>>CALL
      3923<<ASSIGN   3924>>ASSIGN   3926>>CALL     3930>>CALL     3936>>CALL     3945<<ASSIGN   4054>>CALL
      4083>>CALL
STATUS
      2699**DCL        24--PROC     2724--REDEF    2740--REDEF    3881--IF       3885<>CALL     3909>>ASSIGN
S_WSPTD.BLKNO
      2399**DCL      4025<<ASSIGN
T$
      2800**DCL      3619--IMP-PTR  4014<<ASSIGN   4015>>ASSIGN   4028<<ASSIGN   4031>>CALLBLT  4032>>CALLBLT
      4035>>CALLBLT  4035>>CALLBLT

PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:86   
      427        1        /*T***********************************************************/
      428        2        /*T*                                                         */
      429        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      430        4        /*T*                                                         */
      431        5        /*T***********************************************************/
      432        6        NIC$NOPKTS: PROC(MSG);
      433        7        /*
      434        8                Includes
      435        9        */
      436       10        %INCLUDE                HF_LOCK_C ;
      437       24        %INCLUDE                NI_DATA_R ;
      438      461        %INCLUDE                N_FC_C ;
      439      498        %INCLUDE                XUD_UTS_M;
      440      580        /*
      441      581                Parameters
      442      582        */
      443      583    1   DCL 1 MSG               ALIGNED PARAM,
      444      584    1         2 BOUND           UBIN(20) UNAL,
      445      585    1         2 *               BIT(16) UNAL,
      446      586    1         2 PTR$            PTR ;
      447      587        /*
      448      588                Entries
      449      589        */
      450      590    1   DCL 1 NIO$QUE           ENTRY(1) ALTRET ;
      451      591    1   DCL 1 SSS$SYSTIME       ENTRY(1) ;
      452      592        %XUD$UTS_ENTRIES;
      453      624        /*
      454      625                Equs
      455      626        */
      456      627        %XUD_UTS_EQU;
      457      638        /*
      458      639                Symrefs
      459      640        */
      460      641    1   DCL 1 B$PS0$            PTR SYMREF ;
      461      642    1   DCL 1 B_SCDCTX          UBIN SYMREF ;
      462      643        /*
      463      644                Auto
PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:87   
      464      645        */
      465      646    1   DCL 1 CURUTS            UBIN WORD ALIGNED AUTO ;
      466      647    1   DCL 1 DCT$              PTR ALIGNED AUTO ;
      467      648    1   DCL 1 REQ$              PTR ALIGNED AUTO ;
      468      649    1   DCL 1 SQH$              PTR ALIGNED AUTO ;
      469      650    1   DCL 1 TMPUTS            UBIN WORD ALIGNED AUTO ;
      470      651        /*
      471      652                Based
      472      653        */
      473      654        %NI$DCT                 ( NAME=DCT, STCLASS="BASED(DCT$)" ) ;
      474      702        %N$REQ                  ( NAME=REQ, STCLASS="BASED(REQ$)" ) ;
      475      760        %NI$SQH                 ( NAME=SQH, STCLASS="BASED(SQH$)" ) ;
      476      773        %EJECT ;
PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:88   
      477      774    1           DCT$=N$DCT$(B_SCDCTX);
      478      775    1           IF DCT$=ADDR(NIL) THEN RETURN;
      479      776    1           REQ$=DCT.SC.IOQ$;
      480      777    1           IF REQ$=ADDR(NIL) OR REQ$=B$PS0$ THEN RETURN; /* NO PKT ON THIS CONSOLE */
      481      778    1           CALL SSS$SYSTIME(CURUTS);
      482      779    1           SQH$=DCT.SQH$;
      483      780                %LOCK (G#=SQH.GATE);
      484      783    1           CALL XUD$UTS_ADJ_25TH(TMPUTS,DCT.SC.MSGUTS,%UTS_25TH_MIN#);
      485      784    2           IF CURUTS<TMPUTS THEN DO;       /* ONCE A MINUTE ONLY */
      486      785                   %UNLOCK (G#=SQH.GATE);
      487      788    2              RETURN;
      488      789    2              END;
      489      790    1           DCT.SC.MSGUTS=CURUTS;
      490      791                %UNLOCK (G#=SQH.GATE);
      491      794    1           REQ.DLA.DCTX=B_SCDCTX;
      492      795    1           REQ.ERRCT=0;
      493      796    1           REQ.FC=%N_WRITE;
      494      797    1           REQ.BUFSIZE=MSG.BOUND+1;
      495      798    1           REQ.OPFLG=%(OP_EA|OP_BPF|OP_HOLD);
      496      799    1           REQ.BUF$=MSG.PTR$;
      497      800    1           REQ.TYC='0'B;
      498      801    1           REQ.EAENTRY=ENTADDR(NIC$NOPKTSEA);
      499      802    1           DCT.SC.IOQ$=ADDR(NIL);
      500      803    1           CALL NIO$QUE(REQ);
      501      804    1           RETURN;
      502      805        %EJECT;
PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:89   
      503      806    1   NIC$NOPKTSEA: ENTRY(MSG);
      504      807    1           REQ$=ADDR(MSG);
      505      808    1           DCT$=REQ.DCT$;
      506      809    1           DCT.SC.IOQ$=REQ$;
      507      810    1           RETURN;
      508      811    1   END NIC$NOPKTS;

PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:90   
--  Include file information  --

   XUD_UTS_M.:E05TOU  is referenced.
   N_FC_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   HF_LOCK_C.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure NIC$NOPKTS.

   Procedure NIC$NOPKTS requires 99 words for executable code.
   Procedure NIC$NOPKTS requires 14 words of local(AUTO) storage.

    No errors detected in file NIC$CONSOLE.:E05TSI    .

PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:91   

 Object Unit name= NIC$NOPKTS                                 File name= NIC$CONSOLE.:E05TOU
 UTS= JUL 30 '97 03:30:26.92 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none    99    143  NIC$NOPKTS
    1  RoData even  none     2      2  NIC$NOPKTS

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes      Std        1  NIC$NOPKTS
     0    130                  yes      Std        1  NIC$NOPKTSEA

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       1 SSS$SYSTIME
         yes           Std       1 HFC$UNLOCK
 yes     yes           Std       1 NIO$QUE
         yes           Std       1 HFC$LOCK
 yes     yes           Std       3 XUD$UTS_ADJ_25TH
         yes           Std       1 NIC$NOPKTSEA
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:92   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     N$DCT$$                               N$FQ$                                 NI$FQ$
     NI$IBUF$                              NI$RP$                                B$PS0$
     B_SCDCTX                              B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:93   


      427        1        /*T***********************************************************/
      428        2        /*T*                                                         */
      429        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      430        4        /*T*                                                         */
      431        5        /*T***********************************************************/
      432        6        NIC$NOPKTS: PROC(MSG);

      6  0 000000   000000 700200 xent  NIC$NOPKTS   TSX0  ! X66_AUTO_1
         0 000001   000016 000001                    ZERO    14,1

      433        7        /*
      434        8                Includes
      435        9        */
      436       10        %INCLUDE                HF_LOCK_C ;
      437       24        %INCLUDE                NI_DATA_R ;
      438      461        %INCLUDE                N_FC_C ;
      439      498        %INCLUDE                XUD_UTS_M;
      440      580        /*
      441      581                Parameters
      442      582        */
      443      583    1   DCL 1 MSG               ALIGNED PARAM,
      444      584    1         2 BOUND           UBIN(20) UNAL,
      445      585    1         2 *               BIT(16) UNAL,
      446      586    1         2 PTR$            PTR ;
      447      587        /*
      448      588                Entries
      449      589        */
      450      590    1   DCL 1 NIO$QUE           ENTRY(1) ALTRET ;
      451      591    1   DCL 1 SSS$SYSTIME       ENTRY(1) ;
      452      592        %XUD$UTS_ENTRIES;
      453      624        /*
      454      625                Equs
      455      626        */
      456      627        %XUD_UTS_EQU;
      457      638        /*
      458      639                Symrefs
PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:94   
      459      640        */
      460      641    1   DCL 1 B$PS0$            PTR SYMREF ;
      461      642    1   DCL 1 B_SCDCTX          UBIN SYMREF ;
      462      643        /*
      463      644                Auto
      464      645        */
      465      646    1   DCL 1 CURUTS            UBIN WORD ALIGNED AUTO ;
      466      647    1   DCL 1 DCT$              PTR ALIGNED AUTO ;
      467      648    1   DCL 1 REQ$              PTR ALIGNED AUTO ;
      468      649    1   DCL 1 SQH$              PTR ALIGNED AUTO ;
      469      650    1   DCL 1 TMPUTS            UBIN WORD ALIGNED AUTO ;
      470      651        /*
      471      652                Based
      472      653        */
      473      654        %NI$DCT                 ( NAME=DCT, STCLASS="BASED(DCT$)" ) ;
      474      702        %N$REQ                  ( NAME=REQ, STCLASS="BASED(REQ$)" ) ;
      475      760        %NI$SQH                 ( NAME=SQH, STCLASS="BASED(SQH$)" ) ;
      476      773        %EJECT ;
PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:95   
      477      774    1           DCT$=N$DCT$(B_SCDCTX);

    774  0 000002   000000 470400 xsym               LDP0    N$DCT$$
         0 000003   000000 720000 xsym               LXL0    B_SCDCTX
         0 000004   000000 236110                    LDQ     0,X0,PR0
         0 000005   200005 756100                    STQ     DCT$,,AUTO

      478      775    1           IF DCT$=ADDR(NIL) THEN RETURN;

    775  0 000006   000001 116000 xsym               CMPQ    B_VECTNIL+1
         0 000007   000011 601000 0                  TNZ     s:776

    775  0 000010   000000 702200 xent               TSX2  ! X66_ARET

      479      776    1           REQ$=DCT.SC.IOQ$;

    776  0 000011   200005 471500                    LDP1    DCT$,,AUTO
         0 000012   100032 236100                    LDQ     26,,PR1
         0 000013   200006 756100                    STQ     REQ$,,AUTO

      480      777    1           IF REQ$=ADDR(NIL) OR REQ$=B$PS0$ THEN RETURN; /* NO PKT ON THIS CONSOLE */

    777  0 000014   000001 116000 xsym               CMPQ    B_VECTNIL+1
         0 000015   000020 600000 0                  TZE     s:777+4
         0 000016   000000 116000 xsym               CMPQ    B$PS0$
         0 000017   000021 601000 0                  TNZ     s:778

    777  0 000020   000000 702200 xent               TSX2  ! X66_ARET

      481      778    1           CALL SSS$SYSTIME(CURUTS);

    778  0 000021   200004 633500                    EPPR3   CURUTS,,AUTO
         0 000022   200012 453500                    STP3    TMPUTS+2,,AUTO
         0 000023   200012 630500                    EPPR0   TMPUTS+2,,AUTO
         0 000024   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000025   000000 701000 xent               TSX1    SSS$SYSTIME
         0 000026   000000 011000                    NOP     0
PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:96   

      482      779    1           SQH$=DCT.SQH$;

    779  0 000027   200005 470500                    LDP0    DCT$,,AUTO
         0 000030   000022 236100                    LDQ     18,,PR0
         0 000031   200007 756100                    STQ     SQH$,,AUTO

      483      780                %LOCK (G#=SQH.GATE);

    781  0 000032   200007 630500                    EPPR0   SQH$,,AUTO
         0 000033   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000034   000000 701000 xent               TSX1    HFC$LOCK
         0 000035   000000 011000                    NOP     0

      484      783    1           CALL XUD$UTS_ADJ_25TH(TMPUTS,DCT.SC.MSGUTS,%UTS_25TH_MIN#);

    783  0 000036   000001 236000 1                  LDQ     1
         0 000037   200014 756100                    STQ     TMPUTS+4,,AUTO
         0 000040   200005 236100                    LDQ     DCT$,,AUTO
         0 000041   000031 036003                    ADLQ    25,DU
         0 000042   200013 756100                    STQ     TMPUTS+3,,AUTO
         0 000043   200010 630500                    EPPR0   TMPUTS,,AUTO
         0 000044   200012 450500                    STP0    TMPUTS+2,,AUTO
         0 000045   200012 630500                    EPPR0   TMPUTS+2,,AUTO
         0 000046   000021 631400 xsym               EPPR1   B_VECTNIL+17
         0 000047   000000 701000 xent               TSX1    XUD$UTS_ADJ_25TH
         0 000050   000000 011000                    NOP     0

      485      784    2           IF CURUTS<TMPUTS THEN DO;       /* ONCE A MINUTE ONLY */

    784  0 000051   200004 236100                    LDQ     CURUTS,,AUTO
         0 000052   200010 116100                    CMPQ    TMPUTS,,AUTO
         0 000053   000061 603000 0                  TRC     s:790

      486      785                   %UNLOCK (G#=SQH.GATE);

    786  0 000054   200007 630500                    EPPR0   SQH$,,AUTO
PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:97   
         0 000055   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000056   000000 701000 xent               TSX1    HFC$UNLOCK
         0 000057   000000 011000                    NOP     0

      487      788    2              RETURN;

    788  0 000060   000000 702200 xent               TSX2  ! X66_ARET

      488      789    2              END;
      489      790    1           DCT.SC.MSGUTS=CURUTS;

    790  0 000061   200005 470500                    LDP0    DCT$,,AUTO
         0 000062   000031 756100                    STQ     25,,PR0

      490      791                %UNLOCK (G#=SQH.GATE);

    792  0 000063   200007 630500                    EPPR0   SQH$,,AUTO
         0 000064   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000065   000000 701000 xent               TSX1    HFC$UNLOCK
         0 000066   000000 011000                    NOP     0

      491      794    1           REQ.DLA.DCTX=B_SCDCTX;

    794  0 000067   200006 470500                    LDP0    REQ$,,AUTO
         0 000070   000000 236000 xsym               LDQ     B_SCDCTX
         0 000071   000025 736000                    QLS     21
         0 000072   000001 676100                    ERQ     1,,PR0
         0 000073   777770 376003                    ANQ     -8,DU
         0 000074   000001 656100                    ERSQ    1,,PR0

      492      795    1           REQ.ERRCT=0;

    795  0 000075   000000 236003                    LDQ     0,DU
         0 000076   000003 552140                    STBQ    3,'40'O,PR0

      493      796    1           REQ.FC=%N_WRITE;

PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:98   
    796  0 000077   000015 236007                    LDQ     13,DL
         0 000100   000003 552104                    STBQ    3,'04'O,PR0

      494      797    1           REQ.BUFSIZE=MSG.BOUND+1;

    797  0 000101   200003 471500                    LDP1    @MSG,,AUTO
         0 000102   100000 236100                    LDQ     0,,PR1
         0 000103   000020 772000                    QRL     16
         0 000104   000001 036007                    ADLQ    1,DL
         0 000105   000020 736000                    QLS     16
         0 000106   000004 676100                    ERQ     4,,PR0
         0 000107   000034 376000 xsym               ANQ     B_VECTNIL+28
         0 000110   000004 656100                    ERSQ    4,,PR0

      495      798    1           REQ.OPFLG=%(OP_EA|OP_BPF|OP_HOLD);

    798  0 000111   000054 236007                    LDQ     44,DL
         0 000112   000004 552104                    STBQ    4,'04'O,PR0

      496      799    1           REQ.BUF$=MSG.PTR$;

    799  0 000113   100001 236100                    LDQ     1,,PR1
         0 000114   000005 756100                    STQ     5,,PR0

      497      800    1           REQ.TYC='0'B;

    800  0 000115   000021 450100                    STZ     17,,PR0

      498      801    1           REQ.EAENTRY=ENTADDR(NIC$NOPKTSEA);

    801  0 000116   000130 636000 0                  EAQ     s:806
         0 000117   000023 756100                    STQ     19,,PR0

      499      802    1           DCT.SC.IOQ$=ADDR(NIL);

    802  0 000120   000001 236000 xsym               LDQ     B_VECTNIL+1
         0 000121   200005 473500                    LDP3    DCT$,,AUTO
PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:99   
         0 000122   300032 756100                    STQ     26,,PR3

      500      803    1           CALL NIO$QUE(REQ);

    803  0 000123   200006 630500                    EPPR0   REQ$,,AUTO
         0 000124   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000125   000000 701000 xent               TSX1    NIO$QUE
         0 000126   000000 011000                    NOP     0

      501      804    1           RETURN;

    804  0 000127   000000 702200 xent               TSX2  ! X66_ARET

      502      805        %EJECT;
PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:100  
      503      806    1   NIC$NOPKTSEA: ENTRY(MSG);

    806  0 000130   000000 700200 xent  NIC$NOPKTSEA TSX0  ! X66_AUTO_1
         0 000131   000016 000001                    ZERO    14,1

      504      807    1           REQ$=ADDR(MSG);

    807  0 000132   200003 236100                    LDQ     @MSG,,AUTO
         0 000133   200006 756100                    STQ     REQ$,,AUTO

      505      808    1           DCT$=REQ.DCT$;

    808  0 000134   200006 470500                    LDP0    REQ$,,AUTO
         0 000135   000002 236100                    LDQ     2,,PR0
         0 000136   200005 756100                    STQ     DCT$,,AUTO

      506      809    1           DCT.SC.IOQ$=REQ$;

    809  0 000137   200006 236100                    LDQ     REQ$,,AUTO
         0 000140   200005 471500                    LDP1    DCT$,,AUTO
         0 000141   100032 756100                    STQ     26,,PR1

      507      810    1           RETURN;

    810  0 000142   000000 702200 xent               TSX2  ! X66_ARET

(unnamed)
 Sect OctLoc
   1     000   000000 002734   000000 006000                                    ........
      508      811    1   END NIC$NOPKTS;

PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:101  
--  Include file information  --

   XUD_UTS_M.:E05TOU  is referenced.
   N_FC_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   HF_LOCK_C.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure NIC$NOPKTS.
PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:102  

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @MSG                       4-0-0/w UBIN        r     1 CURUTS
     5-0-0/w PTR         r     1 DCT$                      *0-0-0/w STRC(72)    r     1 MSG
     6-0-0/w PTR         r     1 REQ$                       7-0-0/w PTR         r     1 SQH$
    10-0-0/w UBIN        r     1 TMPUTS

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$PS0$                     0-0-0/w UBIN        r     1 B_SCDCTX
     0-0-0/w PTR         r     1 N$DCT$$                    0-0-0/w PTR         r     1 N$FQ$
     0-0-0/w PTR         r     1 NI$FQ$                     0-0-0/w PTR         r     1 NI$IBUF$
     0-0-0/w PTR         r     1 NI$RP$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(1332)  r     1 DCT                        0-0-0/w PTR         r     1 N$DCT$(0:0)
     0-0-0/d STRC(1080)  r     1 REQ                        0-0-0/w STRC(252)   r     1 SQH


   Procedure NIC$NOPKTS requires 99 words for executable code.
   Procedure NIC$NOPKTS requires 14 words of local(AUTO) storage.

    No errors detected in file NIC$CONSOLE.:E05TSI    .
PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:103  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:104  
          MINI XREF LISTING

B$PS0$
       641**DCL       777>>IF
B_SCDCTX
       642**DCL       774>>ASSIGN    794>>ASSIGN
CURUTS
       646**DCL       778<>CALL      784>>IF        790>>ASSIGN
DCT.DP
       683**DCL       690--REDEF     693--REDEF     694--REDEF     696--REDEF     696--REDEF     697--REDEF
       698--REDEF     698--REDEF
DCT.MPC.IOCHANX
       691**DCL       691--REDEF
DCT.SC.IOQ$
       696**DCL       776>>ASSIGN    802<<ASSIGN    809<<ASSIGN
DCT.SC.MSGUTS
       696**DCL       783<>CALL      790<<ASSIGN
DCT.SQH$
       678**DCL       779>>ASSIGN
DCT$
       647**DCL       663--IMP-PTR   774<<ASSIGN    775>>IF        776>>ASSIGN    779>>ASSIGN    783>>CALL
       790>>ASSIGN    802>>ASSIGN    808<<ASSIGN    809>>ASSIGN
HFC$LOCK
        23**DCL-ENT   781--CALL
HFC$UNLOCK
        23**DCL-ENT   786--CALL      792--CALL
MSG
       583**DCL         6--PROC      806--ENTRY     807--ASSIGN
MSG.BOUND
       584**DCL       797>>ASSIGN
MSG.PTR$
       586**DCL       799>>ASSIGN
N$DCT$
       456**DCL       774>>ASSIGN
PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:105  
N$DCT$$
       322**DCL       456--IMP-PTR   774>>ASSIGN
N$FQ$
       322**DCL       457--IMP-PTR
N$REQ_INIT.BUFADDR
       341**DCL       342--REDEF     342--REDEF
N$REQ_INIT.DLA.DRELADDR
       333**DCL       333--REDEF
N$REQ_INIT.DVE.EOMCHAR
       370**DCL       371--REDEF
N$REQ_INIT.EAINFO
       364**DCL       364--REDEF
N$REQ_INIT.EAINFOX
       364**DCL       365--REDEF
N$REQ_INIT.EVNTINFO
       365**DCL       365--REDEF
N$REQ_INIT.STATUS
       346**DCL       352--REDEF
NI$FQ$
       382**DCL       458--IMP-PTR
NI$IBUF$
       382**DCL       458--IMP-PTR
NI$IMXMBX_INIT.PAGED_BASE
       392**DCL       393--REDEF     393--REDEF
NI$IMXMBX_INIT.SIZE
       394**DCL       394--REDEF
NI$REQ_INIT.DCW
       416**DCL       419--REDEF
NI$REQ_INIT.DCW.TALLY
       417**DCL       417--REDEF
NI$REQ_INIT.IDCW.EXTA
       419**DCL       419--REDEF
NI$REQ_INIT.PCW
       421**DCL       425--REDEF
NI$REQ_INIT.SEEK
       426**DCL       427--REDEF     428--REDEF
PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:106  
NI$RP$
       430**DCL       460--IMP-PTR
NIC$NOPKTSEA
       806**ENTRY     801--ASSIGN
NIO$QUE
       590**DCL-ENT   803--CALL
NI_MBX_INIT.DCW.CONTROL.AE
       452**DCL       452--REDEF
NI_MBX_INIT.LPW.CONTROL.AE
       448**DCL       448--REDEF
REQ
       711**DCL       803<>CALL
REQ.BUF$
       720**DCL       799<<ASSIGN
REQ.BUFADDR
       720**DCL       721--REDEF     721--REDEF
REQ.BUFSIZE
       714**DCL       797<<ASSIGN
REQ.DCT$
       712**DCL       808>>ASSIGN
REQ.DLA.DCTX
       711**DCL       794<<ASSIGN
REQ.DLA.DRELADDR
       712**DCL       712--REDEF
REQ.DVE.EOMCHAR
       749**DCL       750--REDEF
REQ.EAENTRY
       742**DCL       801<<ASSIGN
REQ.EAINFO
       743**DCL       743--REDEF
REQ.EAINFOX
       743**DCL       744--REDEF
REQ.ERRCT
       713**DCL       795<<ASSIGN
REQ.EVNTINFO
       744**DCL       744--REDEF
PL6.E3A0      #003=NIC$NOPKTS File=NIC$CONSOLE.:E05TSI                           WED 07/30/97 03:30 Page:107  
REQ.FC
       714**DCL       796<<ASSIGN
REQ.OPFLG
       717**DCL       798<<ASSIGN
REQ.STATUS
       725**DCL       731--REDEF
REQ.TYC
       733**DCL       800<<ASSIGN
REQ$
       648**DCL       711--IMP-PTR   776<<ASSIGN    777>>IF        777>>IF        794>>ASSIGN    795>>ASSIGN
       796>>ASSIGN    797>>ASSIGN    798>>ASSIGN    799>>ASSIGN    800>>ASSIGN    801>>ASSIGN    803>>CALL
       807<<ASSIGN    808>>ASSIGN    809>>ASSIGN
SQH.DOOR
       769**DCL       769--REDEF
SQH.GATE
       769**DCL       781<>CALL      786<>CALL      792<>CALL
SQH$
       649**DCL       769--IMP-PTR   779<<ASSIGN    781>>CALL      786>>CALL      792>>CALL
SSS$SYSTIME
       591**DCL-ENT   778--CALL
TMPUTS
       650**DCL       783<>CALL      784>>IF
XUD$UTS_ADJ_25TH
       617**DCL-ENT   783--CALL
