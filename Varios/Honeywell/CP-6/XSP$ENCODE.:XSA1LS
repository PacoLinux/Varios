VERSION A01

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:1    
        1        1        /*M*    XSP$ENCODE      Routines for encoding and sending a PPDU        */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DDA */
        8        8        /*F*    NAME:   XSP$ENCODE
        9        9                DESCRIPTION:
       10       10                    This routine handles the encoding of a Presentation PDU in order
       11       11                    to send it to the other endpoint.  Any User Data supplied in the
       12       12                    FPT when the user called XSP$PRESENTATION has already been encoded
       13       13                    with the XSP_ASN1 macros, according to the abstract syntax(es)
       14       14                    the user supplied.
       15       15        */
       16       16        XSP$ENCODE: PROC( VBLK) ALTRET;
       17       17        %INCLUDE XSP_ASN1_M;
       18      363            %XSP_ASN1_FPT( FPTN=AFPT, STCLASS="BASED( AFPT$)");
       19      383        %INCLUDE XSS_SESSION_E;
       20      948        %INCLUDE XSP_PRESENTATION_E;
       21     1047        %INCLUDE XSP_PRESENTATION_M;
       22     2533            %XSP$GENERIC( STCLASS="BASED( VBLK.FPT$)");
       23     2629            %XSP$CONNECT( STCLASS="BASED( VBLK.FPT$)");
       24     2774            %XSP$PSAP( FPTN=PSAP, STCLASS="BASED( PSAP$)");
       25     2810            %XSP$CTXTNAME( NAME=CTXT, STCLASS=BASED);
       26     2852        %INCLUDE XSP_INTERNAL_E;
       27     3126        %INCLUDE XSP_INTERNAL_M;
       28     3787            %XSP$VBLK( NAME=VBLK, STCLASS="");
       29     3933            %XSP$PCTX( NAME=PCTX, STCLASS="BASED( VBLK.CTX$)");
       30     4089            %XSP$CTXTMAP( NAME=CMAP, STCLASS="BASED( CMAP$)");
       31     4130            %ENCDECMACS;
       32     4309        %INCLUDE K_ADDRESS_M;
       33     4812        %INCLUDE XSC_COMMON_M;
       34     5465            %XSC$ADDRESS;
       35     5748        %INCLUDE UM_CP6;
       36     6600        %MACRO FATALDEF( NAME=XSP_FATAL, STCLASS="CONSTANT SYMDEF", LVL=1, LAST=";",
       37     6601                         ERR#=0, SEV=7);
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:2    
       38     6602            %VLP_ERRCODE( FPTN=NAME, STCLASS=STCLASS, FCG='XS', MID='P',
       39     6603                          MON='0'B, ERR#=ERR#, SEV=SEV);
       40     6604        %MEND;
       41     6605        %INCLUDE XSC_PERR_C;
       42     6682            %FATALDEF( NAME=XSP_F$ENCODE, ERR#=%F$ENCODE);
       43     6730            /*E*  ERROR:  XSP-F$ENCODE-7
       44     6731                MESSAGE:  VBLK.EVENT illegal for PDU encoder.
       45     6732            */
       46     6733        %EQU ITEMMAX = 31;
       47     6734
       48     6735    1       DCL XSP$SSEND ENTRY(1) ALTRET;
       49     6736    1       DCL XSS$BUFPTR ENTRY(2) ALTRET;
       50     6737    1       DCL XSS$SCREECH ENTRY(1);
       51     6738
       52     6739    1       DCL 1 XSP_ABSLIST SYMREF,
       53     6740    1            2 CTXT$(0:0) PTR;
       54     6741    1       DCL 1 XSP_TFRLIST SYMREF,
       55     6742    1            2 CTXT$(0:0) PTR;
       56     6743
       57     6744    1       DCL XSP_ITEMCNT SBIN STATIC SYMDEF INIT( 0);
       58     6745    1       DCL XSP_ITEMMAX SBIN STATIC SYMDEF INIT( %ITEMMAX);
       59     6746
       60     6747            %ITEM( NAME="ITEMLIST(0:%ITEMMAX)", STCLASS=AUTO);
       61     6772    1       DCL AFPT$ PTR;
       62     6773    1       DCL CMAP$ PTR;
       63     6774    1       DCL DATALVL SBIN;
       64     6775    1       DCL EVIDMAP(0:14) UBIN(9) CONSTANT INIT(
       65     6776    1           511, 5, 6, 4, 3, 0, 1, 2, 12, 13, 10, 11, 7, 9, 8) CALIGNED;
       66     6777    1       DCL I SBIN;
       67     6778    1       DCL J SBIN;
       68     6779    1       DCL PDUBUF CHAR(128) STATIC;
       69     6780    1       DCL PDUIDX SBIN;
       70     6781    1       DCL PSAP$ PTR;
       71     6782    1       DCL TEMP SBIN;
       72     6783
       73     6784    1       CALL XSS$BUFPTR( PCTX.CTXTMAPX, CMAP$);
       74     6785    1       AFPT$ = XSP$GENERIC.DATA$;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:3    
       75     6786    1       DATALVL = 0;
       76     6787    1       XSP_ITEMCNT = 0;
       77     6788    1       ITEMLIST = '0'B;
       78     6789            %LOAD( LVL=0, TYP=NONE, CON=Y);
       79     6881    2       DO CASE( VBLK.EVENT);
       80     6882        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:4    
       81     6883        /*****************************************************************************
       82     6884        *
       83     6885        *       AC
       84     6886        *
       85     6887        *****************************************************************************/
       86     6888    2           CASE( %XSP_PEV_AC);
       87     6889                    %LOAD( LVL=1, TAG=C0, IMP=Y, TYP=SEQ);  /* AC */
       88     6981    3               IF VBLK.DEFMASK ~= '0'B THEN DO;
       89     6982                        %LOAD( LVL=2, TAG=C0, IMP=Y, TYP=SEQOF); /* PresCtxtAddList */
       90     7074    4                   DO I = 1 TO %XSP_MAX_CTXTID;
       91     7075    5                       IF CMAP.STATE( I) = %XSP_CMAP_LCLDEF THEN DO;
       92     7076                                %LOAD( LVL=3, TYP=SEQ);
       93     7168                                %LOAD( LVL=4, TYP=INTG,
       94     7169                                        VAL="I");  /* PresCtxtIdent */
       95     7261                                %LOAD( LVL=4, TYP=OBJID,  /* AbsSynName */
       96     7262                                        VAL="XSP_ABSLIST.CTXT$( CMAP.ABSCTXTID( I))");
       97     7354                                %LOAD( LVL=4, TYP=SEQOF);
       98     7446                                /*N* assumes only one transfer syntax supported */
       99     7447                                %LOAD( LVL=5, TYP=OBJID,  /* TfrSynName */
      100     7448                                        VAL="XSP_TFRLIST.CTXT$( CMAP.TFRCTXTID( I))");
      101     7540    5                           END;
      102     7541    4                       END;
      103     7542    3                   END;
      104     7543    3               IF VBLK.DELMASK ~= '0'B THEN DO;
      105     7544                        %LOAD( LVL=2, TAG=C1, IMP=Y, TYP=SEQOF); /* PresCtxtDelList */
      106     7636    4                   DO I = 1 TO %XSP_MAX_CTXTID;
      107     7637    5                       IF CMAP.STATE( I) = %XSP_CMAP_LCLDEL THEN DO;
      108     7638                                %LOAD( LVL=3, TYP=INTG, VAL=I);  /* PresCtxtIdent */
      109     7730    5                           END;
      110     7731    4                       END;
      111     7732    3                   END;
      112     7733    2               DATALVL = 2;
      113     7734        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:5    
      114     7735        /*****************************************************************************
      115     7736        *
      116     7737        *       ACA
      117     7738        *
      118     7739        *****************************************************************************/
      119     7740    2           CASE( %XSP_PEV_ACA);
      120     7741                    %LOAD( LVL=1, TAG=C1, IMP=Y, TYP=SEQ);  /* ACA */
      121     7833    2               TEMP = 0;
      122     7834    3               DO I = 1 TO %XSP_MAX_CTXTID;
      123     7835    3                   IF CMAP.STATE( I) = %XSP_CMAP_RMTDEF THEN
      124     7836    3                       TEMP = TEMP + 1;
      125     7837    3                   END;
      126     7838    3               IF TEMP > 0 THEN DO;
      127     7839                        %LOAD( LVL=2, TAG=C0, IMP=Y, TYP=SEQOF); /* PresCtxtAddResultList */
      128     7931    4                   DO I = 1 TO %XSP_MAX_CTXTID;
      129     7932    5                       IF CMAP.STATE( I) = %XSP_CMAP_RMTDEF THEN DO;
      130     7933                                %LOAD( LVL=3, TYP=SEQ);
      131     8025                                %LOAD( LVL=4, TAG=C0, IMP=Y, TYP=INTG,
      132     8026                                        VAL="CMAP.RESULT( I)");  /* Result */
      133     8118                                %LOAD( LVL=4, TAG=C1, IMP=Y, TYP=OBJID, /*TfrSynName*/
      134     8119                                        VAL="XSP_TFRLIST.CTXT$( CMAP.TFRCTXTID( I))");
      135     8211                                %LOAD( LVL=4, TAG=C2, IMP=Y, TYP=INTG,
      136     8212                                        VAL=0);  /*N* ProviderReason */
      137     8304    5                           END;
      138     8305    4                       END;
      139     8306    3                   END;
      140     8307    2               TEMP = 0;
      141     8308    3               DO I = 1 TO %XSP_MAX_CTXTID;
      142     8309    3                   IF CMAP.STATE( I) = %XSP_CMAP_RMTDEL THEN
      143     8310    3                       TEMP = TEMP + 1;
      144     8311    3                   END;
      145     8312    3               IF TEMP > 0 THEN DO;
      146     8313                        %LOAD( LVL=2, TAG=C1, IMP=Y, TYP=SEQOF); /* PresCtxtDelResultList */
      147     8405    4                   DO I = 1 TO %XSP_MAX_CTXTID;
      148     8406    5                       IF CMAP.STATE( I) = %XSP_CMAP_RMTDEL THEN DO;
      149     8407                                %LOAD( LVL=3, TYP=INTG,
      150     8408                                        VAL="CMAP.RESULT( I)");  /* Result */
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:6    
      151     8500    5                           END;
      152     8501    4                       END;
      153     8502    3                   END;
      154     8503    2               DATALVL = 2;
      155     8504        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:7    
      156     8505        /*****************************************************************************
      157     8506        *
      158     8507        *       ARP
      159     8508        *
      160     8509        *****************************************************************************/
      161     8510    2           CASE( %XSP_PEV_ARP);
      162     8511                    %LOAD( LVL=1, TYP=SEQ);  /* ARP */
      163     8603                    %LOAD( LVL=2, TAG=C0, IMP=Y, TYP=INTG,
      164     8604                            VAL=0);  /*N* AbortReason */
      165     8696                    %LOAD( LVL=2, TAG=C1, IMP=Y, TYP=INTG,
      166     8697                            VAL="EVIDMAP( VBLK.EVENT)");  /* EventIdent */
      167     8789        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:8    
      168     8790        /*****************************************************************************
      169     8791        *
      170     8792        *       ARU
      171     8793        *
      172     8794        *****************************************************************************/
      173     8795    2           CASE( %XSP_PEV_ARU);
      174     8796                    %LOAD( LVL=1, TAG=C0, IMP=Y, TYP=SEQ);  /* ARU */
      175     8888    2               TEMP = 0;
      176     8889    3               DO I = 1 TO %XSP_MAX_CTXTID;
      177     8890    3                   IF CMAP.STATE( I) = %XSP_CMAP_ACTIVE THEN
      178     8891    3                       TEMP = TEMP + 1;
      179     8892    3                   END;
      180     8893    3               IF TEMP > 0 THEN DO;
      181     8894                        %LOAD( LVL=2, TAG=C0, IMP=Y, TYP=SEQOF);  /* PresCtxtIdentList */
      182     8986    4                   DO I = 1 TO %XSP_MAX_CTXTID;
      183     8987    5                       IF CMAP.STATE( I) = %XSP_CMAP_ACTIVE THEN DO;
      184     8988                                %LOAD( LVL=3, TYP=SEQ);
      185     9080                                %LOAD( LVL=4, TYP=INTG,
      186     9081                                        VAL=I);  /* PresCtxtIdent */
      187     9173                                %LOAD( LVL=4, TYP=OBJID,  /* TfrSynName */
      188     9174                                        VAL="XSP_TFRLIST.CTXT$( CMAP.TFRCTXTID( I))");
      189     9266    5                           END;
      190     9267    4                       END;
      191     9268    3                   END;
      192     9269    2               DATALVL = 2;
      193     9270        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:9    
      194     9271        /*****************************************************************************
      195     9272        *
      196     9273        *       CP
      197     9274        *
      198     9275        *****************************************************************************/
      199     9276    2           CASE( %XSP_PEV_CP);
      200     9277                    %LOAD( LVL=1, TYP=SET);  /* CPType */
      201     9369                    %LOAD( LVL=2, TAG=C0, IMP=Y, TYP=SET);  /* ModeSelector */
      202     9461                    %LOAD( LVL=3, TAG=C0, TYP=INTG, LEN=1, VAL=1);
      203     9553                    %LOAD( LVL=2, TAG=C2, IMP=Y, TYP=SEQ);
      204     9645                    %LOAD( LVL=3, TAG=C0, IMP=Y, TYP=BITSTR,
      205     9646                            LEN=1, VAL='1'B);  /* ProtocolVersion */
      206     9738    2               PSAP$ = ADDR( XSP$CONNECT.CALLING$->XSC$ADDRESS.PSAP);
      207     9739                    %LOAD( LVL=3, TAG=C1, IMP=Y, TYP=OCTETSTR,
      208     9740                            LEN="PSAP.LEN", VAL="PSAP.TXT"); /* CallingPresSelector */
      209     9832    2               PSAP$ = ADDR( XSP$CONNECT.CALLED$->XSC$ADDRESS.PSAP);
      210     9833                    %LOAD( LVL=3, TAG=C2, IMP=Y, TYP=OCTETSTR,
      211     9834                            LEN="PSAP.LEN", VAL="PSAP.TXT");  /* CalledPresSelector */
      212     9926    3               IF VBLK.DEFMASK ~= '0'B THEN DO;
      213     9927                        %LOAD( LVL=3, TAG=C4, IMP=Y, TYP=SEQOF); /* PresCtxtDefList */
      214    10019    4                   DO I = 1 TO %XSP_MAX_CTXTID;
      215    10020    5                       IF CMAP.STATE( I) = %XSP_CMAP_LCLDEF THEN DO;
      216    10021                                %LOAD( LVL=4, TYP=SEQ);
      217    10113                                %LOAD( LVL=5, TYP=INTG, VAL=I);  /* PresCtxtIdent */
      218    10205                                %LOAD( LVL=5, TYP=OBJID,  /* AbsSynName */
      219    10206                                        VAL="XSP_ABSLIST.CTXT$( CMAP.ABSCTXTID( I))");
      220    10298                                %LOAD( LVL=5, TYP=SEQOF);
      221    10390                                /*N* assume only one transfer syntax supported */
      222    10391                                %LOAD( LVL=6, TYP=OBJID,  /* TfrSynName */
      223    10392                                        VAL="XSP_TFRLIST.CTXT$( CMAP.TFRCTXTID( I))");
      224    10484    5                           END;
      225    10485    4                       END;
      226    10486    3                   END;
      227    10487                    %LOAD( LVL=3, TAG=C6, IMP=Y, TYP=SEQ);  /* DefaultCtxtName */
      228    10579                    %LOAD( LVL=4, TAG=C0, IMP=Y, TYP=OBJID,  /* AbsSynName */
      229    10580                            VAL="XSP_ABSLIST.CTXT$( CMAP.ABSCTXTID(0))");
      230    10672                    %LOAD( LVL=4, TAG=C1, IMP=Y, TYP=OBJID,  /* TfrSynName */
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:10   
      231    10673                            VAL="XSP_TFRLIST.CTXT$( CMAP.TFRCTXTID(0))");
      232    10765                    %LOAD( LVL=3, TAG=C8, IMP=Y, TYP=BITSTR,
      233    10766                            LEN=2, VAL="XSP$CONNECT.PFU");  /* PresRequirements */
      234    10858                    %LOAD( LVL=3, TAG=C9, IMP=Y, TYP=BITSTR,
      235    10859                            LEN=11, VAL="XSP$CONNECT.SFU");  /* UserSessionRequirements */
      236    10951    2               DATALVL = 3;
      237    10952        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:11   
      238    10953        /*****************************************************************************
      239    10954        *
      240    10955        *       CPA
      241    10956        *
      242    10957        *****************************************************************************/
      243    10958    2           CASE( %XSP_PEV_CPA);
      244    10959                    %LOAD( LVL=1, TYP=SET);  /* CPA */
      245    11051                    %LOAD( LVL=2, TAG=C0, IMP=Y, TYP=SET);  /* ModeSelector */
      246    11143                    %LOAD( LVL=3, TAG=C0, TYP=INTG, LEN=1, VAL=1);
      247    11235                    %LOAD( LVL=2, TAG=C2, IMP=Y, TYP=SEQ);
      248    11327                    %LOAD( LVL=3, TAG=C0, IMP=Y, TYP=BITSTR,
      249    11328                            LEN=1, VAL='1'B);  /* ProtocolVersion */
      250    11420    2               PSAP$ = ADDR( XSP$CONNECT.RESPONDING$->XSC$ADDRESS.PSAP);
      251    11421                    %LOAD( LVL=3, TAG=C3, IMP=Y, TYP=OCTETSTR,
      252    11422                            LEN="PSAP.LEN", VAL="PSAP.TXT"); /* RespondPresSelector */
      253    11514    2               TEMP = 0;
      254    11515    3               DO I = 1 TO %XSP_MAX_CTXTID;
      255    11516    3                   IF CMAP.STATE( I) = %XSP_CMAP_RMTDEF THEN
      256    11517    3                       TEMP = TEMP + 1;
      257    11518    3                   END;
      258    11519    3               IF TEMP > 0 THEN DO;
      259    11520                        %LOAD( LVL=3, TAG=C5, IMP=Y, TYP=SEQOF); /* PresCtxtDefResultList */
      260    11612    4                   DO I = 1 TO %XSP_MAX_CTXTID;
      261    11613    5                       IF CMAP.STATE( I) = %XSP_CMAP_RMTDEF THEN DO;
      262    11614                                %LOAD( LVL=4, TYP=SEQ);
      263    11706                                %LOAD( LVL=5, TAG=C0, IMP=Y, TYP=INTG,
      264    11707                                        LEN=1, VAL="CMAP.RESULT( I)");  /* Result */
      265    11799                                %LOAD( LVL=5, TAG=C1, IMP=Y, TYP=OBJID, /*TfrSynName*/
      266    11800                                        VAL="XSP_TFRLIST.CTXT$( CMAP.TFRCTXTID( I))");
      267    11892                                %LOAD( LVL=5, TAG=C2, IMP=Y, TYP=INTG,
      268    11893                                        VAL=0);  /*N* ProviderReason */
      269    11985    5                           END;
      270    11986    4                       END;
      271    11987    3                   END;
      272    11988                    %LOAD( LVL=3, TAG=C8, IMP=Y, TYP=BITSTR,
      273    11989                            LEN=2, VAL="XSP$CONNECT.PFU");  /* PresRequirements */
      274    12081                    %LOAD( LVL=3, TAG=C9, IMP=Y, TYP=BITSTR,
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:12   
      275    12082                            LEN=11, VAL="XSP$CONNECT.SFU");  /* UserSessionRequirements */
      276    12174    2               DATALVL = 3;
      277    12175        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:13   
      278    12176        /*****************************************************************************
      279    12177        *
      280    12178        *       CPR
      281    12179        *
      282    12180        *****************************************************************************/
      283    12181    2           CASE( %XSP_PEV_CPR);
      284    12182                    %LOAD( LVL=1, TYP=SEQ);  /* CPR */
      285    12274                    %LOAD( LVL=2, TAG=C0, IMP=Y, TYP=BITSTR,
      286    12275                            LEN=1, VAL='1'B);  /* ProtocolVersion */
      287    12367    2               PSAP$ = ADDR( XSP$CONNECT.RESPONDING$->XSC$ADDRESS.PSAP);
      288    12368                    %LOAD( LVL=2, TAG=C3, IMP=Y, TYP=OCTETSTR,
      289    12369                            LEN="PSAP.LEN", VAL="PSAP.TXT"); /* RespondPresSelector */
      290    12461    2               TEMP = 0;
      291    12462    3               DO I = 1 TO %XSP_MAX_CTXTID;
      292    12463    3                   IF CMAP.STATE( I) = %XSP_CMAP_RMTDEF THEN
      293    12464    3                       TEMP = TEMP + 1;
      294    12465    3                   END;
      295    12466    3               IF TEMP > 0 THEN DO;
      296    12467                        %LOAD( LVL=2, TAG=C5, IMP=Y, TYP=SEQOF); /* PresCtxtDefResultList */
      297    12559    4                   DO I = 1 TO %XSP_MAX_CTXTID;
      298    12560    5                       IF CMAP.STATE( I) = %XSP_CMAP_RMTDEF THEN DO;
      299    12561                                %LOAD( LVL=3, TYP=SEQ);
      300    12653                                %LOAD( LVL=4, TAG=C0, IMP=Y, TYP=INTG,
      301    12654                                        LEN=1, VAL="CMAP.RESULT( I)");  /* Result */
      302    12746                                %LOAD( LVL=4, TAG=C1, IMP=Y, TYP=OBJID, /*TfrSynName*/
      303    12747                                        VAL="XSP_TFRLIST.CTXT$( CMAP.TFRCTXTID( I))");
      304    12839                                %LOAD( LVL=4, TAG=C2, IMP=Y, TYP=INTG,
      305    12840                                        VAL=0);  /*N* ProviderReason */
      306    12932    5                           END;
      307    12933    4                       END;
      308    12934    3                   END;
      309    12935                    %LOAD( LVL=2, TAG=C10, IMP=Y, TYP=INTG,
      310    12936                            VAL=0);  /*N* ProviderReason */
      311    13028    2               DATALVL = 2;
      312    13029        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:14   
      313    13030        /*****************************************************************************
      314    13031        *
      315    13032        *       RS and RSA
      316    13033        *
      317    13034        *****************************************************************************/
      318    13035    2           CASE( %XSP_PEV_RS,
      319    13036    2                 %XSP_PEV_RSA);
      320    13037                    %LOAD( LVL=1, TYP=SEQ);  /* RS */
      321    13129    2               TEMP = 0;
      322    13130    3               DO I = 1 TO %XSP_MAX_CTXTID;
      323    13131    3                   IF CMAP.STATE( I) = %XSP_CMAP_ACTIVE THEN
      324    13132    3                       TEMP = TEMP + 1;
      325    13133    3                   END;
      326    13134    3               IF TEMP > 0 THEN DO;
      327    13135                        %LOAD( LVL=2, TAG=C0, IMP=Y, TYP=SEQOF); /* PresCtxtIdentList */
      328    13227    4                   DO I = 1 TO %XSP_MAX_CTXTID;
      329    13228    5                       IF CMAP.STATE( I) = %XSP_CMAP_ACTIVE THEN DO;
      330    13229                                %LOAD( LVL=3, TYP=SEQ);
      331    13321                                %LOAD( LVL=4, TYP=INTG,
      332    13322                                        VAL=I);  /* PresCtxtIdent */
      333    13414                                %LOAD( LVL=4, TYP=OBJID,  /* TfrSynName */
      334    13415                                        VAL="XSP_TFRLIST.CTXT$( CMAP.TFRCTXTID( I))");
      335    13507    5                           END;
      336    13508    4                       END;
      337    13509    3                   END;
      338    13510    2               DATALVL = 2;
      339    13511        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:15   
      340    13512        /*****************************************************************************
      341    13513        *
      342    13514        *       TC, TCC, TD, TE,  and TTD
      343    13515        *
      344    13516        *****************************************************************************/
      345    13517    2           CASE( %XSP_PEV_TC,
      346    13518    2                 %XSP_PEV_TCC,
      347    13519    2                 %XSP_PEV_TD,
      348    13520    2                 %XSP_PEV_TE,
      349    13521    2                 %XSP_PEV_TTD);
      350    13522    2               DATALVL = 1;
      351    13523        /*****************************************************************************
      352    13524        *
      353    13525        *       Illegal VBLK.EVENT
      354    13526        *
      355    13527        *****************************************************************************/
      356    13528    2           CASE( ELSE);
      357    13529    2               CALL XSS$SCREECH( XSP_F$ENCODE);
      358    13530    2           END;
      359    13531        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:16   
      360    13532            /* handle UserData if present */
      361    13533    2       IF DATALVL > 0 AND AFPT$ ~= ADDR( NIL) THEN DO;
      362    13534    2           IF AFPT.LINK$ = ADDR( NIL) THEN
      363    13535                    %LOAD( LVL=DATALVL, TAG=A0, IMP=Y, TYP=OCTETSTR,
      364    13536                            LEN="AFPT.NXTX", VAL="AFPT.BUF$"); /* SimplyEncodedData */
      365    13628    3           ELSE DO;
      366    13629                    %LOAD( LVL=DATALVL, TAG=A1, IMP=Y, TYP=SEQOF);  /* FullyEncodedData */
      367    13721    3               DATALVL = DATALVL + 1;
      368    13722    4               DO WHILE( AFPT$ ~= ADDR( NIL));
      369    13723                        %LOAD( LVL=DATALVL, TYP=SEQ);  /* PDVList */
      370    13815    4                   DATALVL = DATALVL + 1;
      371    13816                        %LOAD( LVL=DATALVL, TYP=OBJID,  /* TfrSynName */
      372    13817                                VAL="XSP_ABSLIST.CTXT$( CMAP.ABSCTXTID( I))");
      373    13909                        %LOAD( LVL=DATALVL, TYP=INTG,
      374    13910                                LEN=1, VAL="AFPT.CTXTID");  /* PresCtxtIdent */
      375    14002                        /*N* for now, assume OCTETSTRING */
      376    14003                        %LOAD( LVL=DATALVL, TAG=C1, IMP=Y, TYP=OCTETSTR,
      377    14004                                LEN="AFPT.NXTX", VAL="AFPT.BUF$");  /* the data */
      378    14096    4                   DATALVL = DATALVL - 1;
      379    14097    4                   AFPT$ = AFPT.LINK$;
      380    14098    4                   END;
      381    14099    3               END;
      382    14100    2           END;
      383    14101            /* Now, fix up the itemlist and build the PDU */
      384    14102    1       CALL FIXITEMS;
      385    14103    1       CALL BUILDPDU;
      386    14104            /* Send the constructed PDU on to Session */
      387    14105    1       VBLK.DATA.SIZE = PDUIDX;
      388    14106    1       VBLK.DATA.PTR$ = ADDR( PDUBUF);
      389    14107    1       CALL XSP$SSEND( VBLK)
      390    14108    2       WHENALTRETURN DO;
      391    14109    2           ALTRETURN;
      392    14110    2           END;
      393    14111    1       RETURN;
      394    14112        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:17   
      395    14113        /*I*    NAME:   FIXITEMS
      396    14114
      397    14115                FIXITEMS is called to fix the itemlist.  'Fix'ing means trundling
      398    14116                through the list figuring out the lengths of all constructor items
      399    14117                now that we know how big each primitive item is.
      400    14118        */
      401    14119    1   FIXITEMS: PROC;
      402    14120
      403    14121    2       DCL I SBIN;
      404    14122    2       DCL J SBIN;
      405    14123    2       DCL LEN SBIN;
      406    14124    2       DCL LVL SBIN;
      407    14125    2       DCL TMP REDEF LVL SBIN;
      408    14126    2       DCL UTMP REDEF LVL UBIN;
      409    14127
      410    14128    3       DO I = XSP_ITEMCNT - 1 DOWNTO 1;
      411    14129    3           IF ITEMLIST.X.TAG( I) = 0 THEN
      412    14130    3               ITEMLIST.X.TAG( I) = ITEMLIST.X.TYP( I);
      413    14131    4           DO CASE( ITEMLIST.X.TYP( I));
      414    14132    4               CASE( %XSP_TYP_BITSTR);
      415    14133                        /* Have to convert bitstring lengths to bytelength + slack */
      416    14134    4                   TMP = ITEMLIST.X.LEN( I);
      417    14135    4                   IF TMP > 24 THEN
      418    14136    4                       TMP = 24;  /* can't hold more than 24 bits in U */
      419    14137    4                   ITEMLIST.X.LEN( I) = ( TMP + 15) / 8;  /* new bytelength */
      420    14138    4                   UTMP = BITBIN( '007'O & BINBIT( 8-MOD( TMP, 8), 9)); /*slack*/
      421    14139    4                   ITEMLIST.U( I) = UTMP*268435456 + ITEMLIST.U( I)/256;
      422    14140                        /* U now has slack in highest 8 bits, followed by value */
      423    14141    4               CASE( %XSP_TYP_NONE, %XSP_TYP_BOOL, %XSP_TYP_INTG,
      424    14142    4                     %XSP_TYP_NULL, %XSP_TYP_SEQ, %XSP_TYP_SET,
      425    14143    4                     %XSP_TYP_UTCTIM, %XSP_TYP_GENTIM, %XSP_TYP_CHOICE,
      426    14144    4                     %XSP_TYP_SEQOF, %XSP_TYP_SETOF);
      427    14145                        /* do nothing */
      428    14146    4               CASE( %XSP_TYP_OBJID, %XSP_TYP_OBJDSCR);
      429    14147    4                   ;  /*N* figure out final length by test-encoding */
      430    14148    4               CASE( ELSE);
      431    14149    4                   IF ITEMLIST.P( I) = ADDR( NIL) THEN
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:18   
      432    14150    4                       ITEMLIST.X.LEN( I) = 0;  /* don't address NIL segment */
      433    14151    4               END;
      434    14152    3           LEN = 1;  /* 1 byte to represent length */
      435    14153    3           TMP = ITEMLIST.X.LEN( I);
      436    14154    3           IF TMP > 127 THEN
      437    14155    4               DO WHILE( TMP > 0);
      438    14156    4                   LEN = LEN + 1;  /* add another byte to represent length */
      439    14157    4                   TMP = TMP / 256;  /* keep going to find length of length */
      440    14158    4                   END;
      441    14159                /* now add length of item itself */
      442    14160    3           LEN = LEN + ITEMLIST.X.LEN( I);
      443    14161                /* add length of tag if a tag will be encoded */
      444    14162    3           IF ITEMLIST.X.TAG( I) ~= %XSP_TYP_NONE OR
      445    14163    3                   ( ITEMLIST.X.TYP( I) ~= %XSP_TYP_NONE AND
      446    14164    3                   ITEMLIST.X.IMP( I) = 0) THEN
      447    14165    3               LEN = LEN + 1;  /* assume all tags 1 byte long... */
      448    14166    3           LVL = ITEMLIST.X.LVL( I) - 1;
      449    14167    3   INCRLOOP:
      450    14168    4           DO J = I - 1 DOWNTO 0;
      451    14169    5               IF LVL = ITEMLIST.X.LVL( J) THEN DO;
      452    14170    5                   ITEMLIST.X.LEN( J) = LEN + ITEMLIST.X.LEN( J);
      453    14171    5                   EXIT INCRLOOP;
      454    14172    5                   END;
      455    14173    4               END;
      456    14174    3           END;
      457    14175    2       RETURN;
      458    14176
      459    14177    2       END FIXITEMS;
      460    14178        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:19   
      461    14179        /*I*    NAME:   BUILDPDU
      462    14180
      463    14181                BUILDPDU is called to actually construct the PPDU from the itemlist.
      464    14182        */
      465    14183    1   BUILDPDU: PROC;
      466    14184
      467    14185    2       DCL BYTES CHAR( LEN) BASED;
      468    14186    2       DCL I SBIN;
      469    14187    2       DCL LEN SBIN;
      470    14188    2       DCL TMP SBIN;
      471    14189    2       DCL U36(0:1) UBIN;
      472    14190    2       DCL U8(0:8) REDEF U36 UBIN(8) UNAL;
      473    14191        %MACRO STORBYTE( BYT=0);
      474    14192            CALL INSERT( PDUBUF, PDUIDX, 1, BINASC( BYT));
      475    14193            PDUIDX = PDUIDX + 1;
      476    14194        %MEND;
      477    14195
      478    14196    2       PDUIDX = 0;
      479    14197    2       XSP_ITEMCNT = XSP_ITEMCNT - 1;
      480    14198            /* Construct each item of the itemlist in turn.  Item 0 not used. */
      481    14199    3       DO I = 1 TO XSP_ITEMCNT;
      482    14200                /* Move the TAG field into the PDU buffer */
      483    14201                %STORBYTE( BYT="ITEMLIST.X.TAG( I)");
      484    14205                /* Move the length into the PDU buffer */
      485    14206    3           TMP = ITEMLIST.X.LEN( I);
      486    14207    4           IF TMP > 127 THEN DO;
      487    14208    4               LEN = 0;
      488    14209    5               DO WHILE( TMP > 0);
      489    14210    5                   LEN = LEN + 1;
      490    14211    5                   TMP = TMP / 256;
      491    14212    5                   END;
      492    14213                    %STORBYTE( BYT="LEN+128");
      493    14217    4               CALL INSERT( PDUBUF, PDUIDX, LEN,
      494    14218    4                       PINCRC( ADDR( ITEMLIST.X.LEN( I)), 4 - LEN)->BYTES);
      495    14219    4               PDUIDX = PDUIDX + LEN;
      496    14220    4               END;
      497    14221    4           ELSE DO;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:20   
      498    14222                    %STORBYTE( BYT="TMP");
      499    14226    4               END;
      500    14227    3           ;  /*N* handle case where TYP~=TAG and not IMP */
      501    14228                /* And finally.... move the value itself into the PDU buffer */
      502    14229    3           LEN = ITEMLIST.X.LEN( I);
      503    14230    4           DO CASE( ITEMLIST.X.TYP( I));
      504    14231    4               CASE( %XSP_TYP_NONE, %XSP_TYP_NULL,
      505    14232    4                     %XSP_TYP_SEQ, %XSP_TYP_SEQOF,
      506    14233    4                     %XSP_TYP_SET, %XSP_TYP_SETOF,
      507    14234    4                     %XSP_TYP_CHOICE);
      508    14235                        /* Set LEN zero so not to incr PDUIDX for enclosing item */
      509    14236    4                   LEN = 0;
      510    14237    4               CASE( %XSP_TYP_BOOL);  /* boolean */
      511    14238    5                   IF ITEMLIST.S( I) ~= 0 THEN DO;
      512    14239                            %STORBYTE( BYT="511");
      513    14243    5                       END;
      514    14244    5                   ELSE DO;
      515    14245                            %STORBYTE( BYT="0");
      516    14249    5                       END;
      517    14250    4               CASE( %XSP_TYP_INTG);  /* signed integer of length LEN */
      518    14251    4                   U36(0) = 0;
      519    14252    4                   U36(1) = ITEMLIST.U( I);
      520    14253    5                   DO WHILE( LEN > 0);
      521    14254                            %STORBYTE( BYT="U8( 9 - LEN)");
      522    14258    5                       LEN = LEN - 1;
      523    14259    5                       END;
      524    14260    4                   GOTO NEXTITEM;
      525    14261    4               CASE( %XSP_TYP_BITSTR);  /* left-justified bitstring */
      526    14262    4                   U36(0) = ITEMLIST.U( I);
      527    14263    4                   U36(1) = 0;
      528    14264    4                   TMP = 0;
      529    14265    4                   IF LEN > 0 THEN
      530    14266    5                       DO WHILE( TMP < LEN);
      531    14267                            %STORBYTE( BYT="U8( TMP)");
      532    14271    5                       TMP = TMP + 1;
      533    14272    5                       END;
      534    14273    4                   GOTO NEXTITEM;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:21   
      535    14274    4               CASE( %XSP_TYP_OBJID,
      536    14275    4                     %XSP_TYP_OBJDSCR);
      537    14276    4                   ;  /*N* Encode into temp buffer, then move bytes in */
      538    14277    4                   GOTO COMMON;  /*N* But for now, just move raw text... */
      539    14278    4               CASE( %XSP_TYP_UTCTIM,
      540    14279    4                     %XSP_TYP_GENTIM);  /* UTS to be converted to ISO time */
      541    14280    4                   LEN = 0;  /*N* worry about this later... */
      542    14281    4               CASE( ELSE);  /* anything else is pointer to LEN bytes of text */
      543    14282    4   COMMON:
      544    14283    4                   IF LEN > 0 THEN
      545    14284    4                       CALL INSERT( PDUBUF, PDUIDX, LEN, ITEMLIST.P( I)->BYTES);
      546    14285    4               END;
      547    14286    3           PDUIDX = LEN + PDUIDX;
      548    14287    3   NEXTITEM:
      549    14288    3           END;
      550    14289    2       RETURN;
      551    14290
      552    14291    2       END BUILDPDU;
      553    14292
      554    14293    1       END XSP$ENCODE;
      555    14294        %EOD;

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:22   
--  Include file information  --

   XSC_PERR_C.:XSA1TOU  is referenced.
   UM_CP6.:E05OU  is referenced.
   XSC_COMMON_M.:XSA1TOU  is referenced.
   K_ADDRESS_M.:LIB_E05  is referenced.
   XSP_INTERNAL_M.:XSA1TOU  is referenced.
   XSP_INTERNAL_E.:XSA1TOU  is referenced.
   XSP_PRESENTATION_M.:XSA1TOU  is referenced.
   XSP_PRESENTATION_E.:XSA1TOU  is referenced.
   XSS_SESSION_E.:XSA1TOU  is referenced.
   XSP_ASN1_M.:XSA1TOU  is referenced.
      No diagnostics issued in procedure XSP$ENCODE.

   Procedure XSP$ENCODE requires 1415 words for executable code.
   Procedure XSP$ENCODE requires 86 words of local(AUTO) storage.

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:23   

 Object Unit name= XSP$ENCODE                                 File name= XSP$ENCODE.:XSA1TOU
 UTS= OCT 01 '97 12:02:31.44 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  RoData even  UTS      5      5  XSP$ENCODE
    1   Data  even  none    34     42  XSP$ENCODE
    2   Proc  even  none  1415   2607  XSP$ENCODE
    3  RoData even  none    27     33  XSP$ENCODE

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes    yes     yes      Std        1  XSP$ENCODE

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      0  XSP_F$ENCODE                       1      0  XSP_ITEMCNT
    1      1  XSP_ITEMMAX

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       2 XSS$BUFPTR
         yes           Std       1 XSS$SCREECH
 yes     yes           Std       1 XSP$SSEND
                       nStd      0 X66_AUTO_1
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:24   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     XSP_ABSLIST                           XSP_TFRLIST

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     NULLSID                               ISSID
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:25   


        1        1        /*M*    XSP$ENCODE      Routines for encoding and sending a PPDU        */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DDA */
        8        8        /*F*    NAME:   XSP$ENCODE
        9        9                DESCRIPTION:
       10       10                    This routine handles the encoding of a Presentation PDU in order
       11       11                    to send it to the other endpoint.  Any User Data supplied in the
       12       12                    FPT when the user called XSP$PRESENTATION has already been encoded
       13       13                    with the XSP_ASN1 macros, according to the abstract syntax(es)
       14       14                    the user supplied.
       15       15        */
       16       16        XSP$ENCODE: PROC( VBLK) ALTRET;

     16  2 000000   000000 700200 xent  XSP$ENCODE   TSX0  ! X66_AUTO_1
         2 000001   000126 000001                    ZERO    86,1

       17       17        %INCLUDE XSP_ASN1_M;
       18      363            %XSP_ASN1_FPT( FPTN=AFPT, STCLASS="BASED( AFPT$)");
       19      383        %INCLUDE XSS_SESSION_E;
       20      948        %INCLUDE XSP_PRESENTATION_E;
       21     1047        %INCLUDE XSP_PRESENTATION_M;
       22     2533            %XSP$GENERIC( STCLASS="BASED( VBLK.FPT$)");
       23     2629            %XSP$CONNECT( STCLASS="BASED( VBLK.FPT$)");
       24     2774            %XSP$PSAP( FPTN=PSAP, STCLASS="BASED( PSAP$)");
       25     2810            %XSP$CTXTNAME( NAME=CTXT, STCLASS=BASED);
       26     2852        %INCLUDE XSP_INTERNAL_E;
       27     3126        %INCLUDE XSP_INTERNAL_M;
       28     3787            %XSP$VBLK( NAME=VBLK, STCLASS="");
       29     3933            %XSP$PCTX( NAME=PCTX, STCLASS="BASED( VBLK.CTX$)");
       30     4089            %XSP$CTXTMAP( NAME=CMAP, STCLASS="BASED( CMAP$)");
       31     4130            %ENCDECMACS;
       32     4309        %INCLUDE K_ADDRESS_M;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:26   
       33     4812        %INCLUDE XSC_COMMON_M;
       34     5465            %XSC$ADDRESS;
       35     5748        %INCLUDE UM_CP6;
       36     6600        %MACRO FATALDEF( NAME=XSP_FATAL, STCLASS="CONSTANT SYMDEF", LVL=1, LAST=";",
       37     6601                         ERR#=0, SEV=7);
       38     6602            %VLP_ERRCODE( FPTN=NAME, STCLASS=STCLASS, FCG='XS', MID='P',
       39     6603                          MON='0'B, ERR#=ERR#, SEV=SEV);
       40     6604        %MEND;
       41     6605        %INCLUDE XSC_PERR_C;
       42     6682            %FATALDEF( NAME=XSP_F$ENCODE, ERR#=%F$ENCODE);
       43     6730            /*E*  ERROR:  XSP-F$ENCODE-7
       44     6731                MESSAGE:  VBLK.EVENT illegal for PDU encoder.
       45     6732            */
       46     6733        %EQU ITEMMAX = 31;
       47     6734
       48     6735    1       DCL XSP$SSEND ENTRY(1) ALTRET;
       49     6736    1       DCL XSS$BUFPTR ENTRY(2) ALTRET;
       50     6737    1       DCL XSS$SCREECH ENTRY(1);
       51     6738
       52     6739    1       DCL 1 XSP_ABSLIST SYMREF,
       53     6740    1            2 CTXT$(0:0) PTR;
       54     6741    1       DCL 1 XSP_TFRLIST SYMREF,
       55     6742    1            2 CTXT$(0:0) PTR;
       56     6743
       57     6744    1       DCL XSP_ITEMCNT SBIN STATIC SYMDEF INIT( 0);
       58     6745    1       DCL XSP_ITEMMAX SBIN STATIC SYMDEF INIT( %ITEMMAX);
       59     6746
       60     6747            %ITEM( NAME="ITEMLIST(0:%ITEMMAX)", STCLASS=AUTO);
       61     6772    1       DCL AFPT$ PTR;
       62     6773    1       DCL CMAP$ PTR;
       63     6774    1       DCL DATALVL SBIN;
       64     6775    1       DCL EVIDMAP(0:14) UBIN(9) CONSTANT INIT(
       65     6776    1           511, 5, 6, 4, 3, 0, 1, 2, 12, 13, 10, 11, 7, 9, 8) CALIGNED;
       66     6777    1       DCL I SBIN;
       67     6778    1       DCL J SBIN;
       68     6779    1       DCL PDUBUF CHAR(128) STATIC;
       69     6780    1       DCL PDUIDX SBIN;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:27   
       70     6781    1       DCL PSAP$ PTR;
       71     6782    1       DCL TEMP SBIN;
       72     6783
       73     6784    1       CALL XSS$BUFPTR( PCTX.CTXTMAPX, CMAP$);

   6784  2 000002   200003 470500                    LDP0    @VBLK,,AUTO
         2 000003   000000 471500                    LDP1    0,,PR0
         2 000004   200105 633500                    EPPR3   CMAP$,,AUTO
         2 000005   200123 453500                    STP3    U36+3,,AUTO
         2 000006   200124 451500                    STP1    U36+4,,AUTO
         2 000007   200124 236100                    LDQ     U36+4,,AUTO
         2 000010   000001 036000 3                  ADLQ    1
         2 000011   200122 756100                    STQ     U36+2,,AUTO
         2 000012   200122 630500                    EPPR0   U36+2,,AUTO
         2 000013   000000 631400 3                  EPPR1   0
         2 000014   000000 701000 xent               TSX1    XSS$BUFPTR
         2 000015   000000 011000                    NOP     0

       74     6785    1       AFPT$ = XSP$GENERIC.DATA$;

   6785  2 000016   200003 470500                    LDP0    @VBLK,,AUTO
         2 000017   000001 471500                    LDP1    1,,PR0
         2 000020   100002 236100                    LDQ     2,,PR1
         2 000021   200104 756100                    STQ     AFPT$,,AUTO

       75     6786    1       DATALVL = 0;

   6786  2 000022   200106 450100                    STZ     DATALVL,,AUTO

       76     6787    1       XSP_ITEMCNT = 0;

   6787  2 000023   000000 450000 1                  STZ     XSP_ITEMCNT

       77     6788    1       ITEMLIST = '0'B;

   6788  2 000024   000100 100400                    MLR     fill='000'O
         2 000025   000002 000001 3                  ADSC9   2                        cn=0,n=1
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:28   
         2 000026   200004 000400                    ADSC9   ITEMLIST,,AUTO           cn=0,n=256

       78     6789            %LOAD( LVL=0, TYP=NONE, CON=Y);

   6874  2 000027   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000030   000001 735000                    ALS     1
         2 000031   040000 236007                    LDQ     16384,DL
         2 000032   200004 756105                    STQ     ITEMLIST,AL,AUTO

   6877  2 000033   000000 054000 1                  AOS     XSP_ITEMCNT

       79     6881    2       DO CASE( VBLK.EVENT);

   6881  2 000034   000006 720100                    LXL0    6,,PR0
         2 000035   000777 360003                    ANX0    511,DU
         2 000036   000017 100003                    CMPX0   15,DU
         2 000037   000041 602010 2                  TNC     s:6881+5,X0
         2 000040   001703 710000 2                  TRA     s:13529
         2 000041   001703 710000 2                  TRA     s:13529
         2 000042   000060 710000 2                  TRA     s:6974
         2 000043   000247 710000 2                  TRA     s:7826
         2 000044   000456 710000 2                  TRA     s:8596
         2 000045   000507 710000 2                  TRA     s:8881
         2 000046   000625 710000 2                  TRA     s:9362
         2 000047   001146 710000 2                  TRA     s:11044
         2 000050   001374 710000 2                  TRA     s:12267
         2 000051   001562 710000 2                  TRA     s:13122
         2 000052   001562 710000 2                  TRA     s:13122
         2 000053   001700 710000 2                  TRA     s:13522
         2 000054   001700 710000 2                  TRA     s:13522
         2 000055   001700 710000 2                  TRA     s:13522
         2 000056   001700 710000 2                  TRA     s:13522
         2 000057   001700 710000 2                  TRA     s:13522

       80     6882        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:29   
       81     6883        /*****************************************************************************
       82     6884        *
       83     6885        *       AC
       84     6886        *
       85     6887        *****************************************************************************/
       86     6888    2           CASE( %XSP_PEV_AC);

       87     6889                    %LOAD( LVL=1, TAG=C0, IMP=Y, TYP=SEQ);  /* AC */

   6974  2 000060   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000061   000001 735000                    ALS     1
         2 000062   240601 236007                    LDQ     82305,DL
         2 000063   200004 756105                    STQ     ITEMLIST,AL,AUTO

   6977  2 000064   000000 054000 1                  AOS     XSP_ITEMCNT

       88     6981    3               IF VBLK.DEFMASK ~= '0'B THEN DO;

   6981  2 000065   000007 235100                    LDA     7,,PR0
         2 000066   000210 600000 2                  TZE     s:7543

       89     6982                        %LOAD( LVL=2, TAG=C0, IMP=Y, TYP=SEQOF); /* PresCtxtAddList */

   7067  2 000067   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000070   000001 735000                    ALS     1
         2 000071   240562 236007                    LDQ     82290,DL
         2 000072   200004 756105                    STQ     ITEMLIST,AL,AUTO

   7070  2 000073   000000 054000 1                  AOS     XSP_ITEMCNT

       90     7074    4                   DO I = 1 TO %XSP_MAX_CTXTID;

   7074  2 000074   000001 235007                    LDA     1,DL
         2 000075   200107 755100                    STA     I,,AUTO

       91     7075    5                       IF CMAP.STATE( I) = %XSP_CMAP_LCLDEF THEN DO;

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:30   
   7075  2 000076   200107 235100                    LDA     I,,AUTO
         2 000077   000001 735000                    ALS     1
         2 000100   200105 470500                    LDP0    CMAP$,,AUTO
         2 000101   000001 236105                    LDQ     1,AL,PR0
         2 000102   000777 376007                    ANQ     511,DL
         2 000103   000001 116007                    CMPQ    1,DL
         2 000104   000204 601000 2                  TNZ     s:7541

       92     7076                                %LOAD( LVL=3, TYP=SEQ);

   7161  2 000105   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000106   000001 735000                    ALS     1
         2 000107   060203 236007                    LDQ     24707,DL
         2 000110   200004 756105                    STQ     ITEMLIST,AL,AUTO

   7164  2 000111   000000 054000 1                  AOS     XSP_ITEMCNT

       93     7168                                %LOAD( LVL=4, TYP=INTG,
       94     7169                                        VAL="I");  /* PresCtxtIdent */

   7222  2 000112   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000113   000001 735000                    ALS     1
         2 000114   200107 236100                    LDQ     I,,AUTO
         2 000115   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

   7254  2 000116   000003 236000 3                  LDQ     3
         2 000117   200004 756105                    STQ     ITEMLIST,AL,AUTO

   7257  2 000120   000000 054000 1                  AOS     XSP_ITEMCNT

       95     7261                                %LOAD( LVL=4, TYP=OBJID,  /* AbsSynName */
       96     7262                                        VAL="XSP_ABSLIST.CTXT$( CMAP.ABSCTXTID( I))");

   7334  2 000121   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000122   000001 735000                    ALS     1
         2 000123   200107 236100                    LDQ     I,,AUTO
         2 000124   000001 736000                    QLS     1
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:31   
         2 000125   200105 470500                    LDP0    CMAP$,,AUTO
         2 000126   000001 236106                    LDQ     1,QL,PR0
         2 000127   000033 772000                    QRL     27
         2 000130   000000 471406 xsym               LDP1    XSP_ABSLIST,QL
         2 000131   200122 451500                    STP1    U36+2,,AUTO
         2 000132   200122 236100                    LDQ     U36+2,,AUTO
         2 000133   400000 036007                    ADLQ    -131072,DL
         2 000134   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

   7347  2 000135   200107 236100                    LDQ     I,,AUTO
         2 000136   000001 736000                    QLS     1
         2 000137   200105 470500                    LDP0    CMAP$,,AUTO
         2 000140   000001 236106                    LDQ     1,QL,PR0
         2 000141   000033 772000                    QRL     27
         2 000142   000000 471406 xsym               LDP1    XSP_ABSLIST,QL
         2 000143   100000 236100                    LDQ     0,,PR1
         2 000144   777777 376003                    ANQ     -1,DU
         2 000145   006064 036007                    ADLQ    3124,DL
         2 000146   200004 756105                    STQ     ITEMLIST,AL,AUTO

   7350  2 000147   000000 054000 1                  AOS     XSP_ITEMCNT

       97     7354                                %LOAD( LVL=4, TYP=SEQOF);

   7439  2 000150   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000151   000001 735000                    ALS     1
         2 000152   120164 236007                    LDQ     41076,DL
         2 000153   200004 756105                    STQ     ITEMLIST,AL,AUTO

   7442  2 000154   000000 054000 1                  AOS     XSP_ITEMCNT

       98     7446                                /*N* assumes only one transfer syntax supported */
       99     7447                                %LOAD( LVL=5, TYP=OBJID,  /* TfrSynName */
      100     7448                                        VAL="XSP_TFRLIST.CTXT$( CMAP.TFRCTXTID( I))");

   7520  2 000155   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000156   000001 735000                    ALS     1
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:32   
         2 000157   200107 236100                    LDQ     I,,AUTO
         2 000160   000001 736000                    QLS     1
         2 000161   200105 470500                    LDP0    CMAP$,,AUTO
         2 000162   000001 220106                    LDX0    1,QL,PR0
         2 000163   000777 360003                    ANX0    511,DU
         2 000164   000000 471410 xsym               LDP1    XSP_TFRLIST,X0
         2 000165   200122 451500                    STP1    U36+2,,AUTO
         2 000166   200122 236100                    LDQ     U36+2,,AUTO
         2 000167   400000 036007                    ADLQ    -131072,DL
         2 000170   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

   7533  2 000171   200107 236100                    LDQ     I,,AUTO
         2 000172   000001 736000                    QLS     1
         2 000173   200105 470500                    LDP0    CMAP$,,AUTO
         2 000174   000001 220106                    LDX0    1,QL,PR0
         2 000175   000777 360003                    ANX0    511,DU
         2 000176   000000 471410 xsym               LDP1    XSP_TFRLIST,X0
         2 000177   100000 236100                    LDQ     0,,PR1
         2 000200   777777 376003                    ANQ     -1,DU
         2 000201   006065 036007                    ADLQ    3125,DL
         2 000202   200004 756105                    STQ     ITEMLIST,AL,AUTO

   7536  2 000203   000000 054000 1                  AOS     XSP_ITEMCNT

      101     7540    5                           END;

      102     7541    4                       END;

   7541  2 000204   200107 054100                    AOS     I,,AUTO
         2 000205   200107 235100                    LDA     I,,AUTO
         2 000206   000022 115007                    CMPA    18,DL
         2 000207   000076 604400 2                  TMOZ    s:7075

      103     7542    3                   END;

      104     7543    3               IF VBLK.DELMASK ~= '0'B THEN DO;

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:33   
   7543  2 000210   200003 470500                    LDP0    @VBLK,,AUTO
         2 000211   000010 235100                    LDA     8,,PR0
         2 000212   000244 600000 2                  TZE     s:7733

      105     7544                        %LOAD( LVL=2, TAG=C1, IMP=Y, TYP=SEQOF); /* PresCtxtDelList */

   7629  2 000213   000000 236000 1                  LDQ     XSP_ITEMCNT
         2 000214   000001 736000                    QLS     1
         2 000215   241562 235007                    LDA     82802,DL
         2 000216   200004 755106                    STA     ITEMLIST,QL,AUTO

   7632  2 000217   000000 054000 1                  AOS     XSP_ITEMCNT

      106     7636    4                   DO I = 1 TO %XSP_MAX_CTXTID;

   7636  2 000220   000001 236007                    LDQ     1,DL
         2 000221   200107 756100                    STQ     I,,AUTO

      107     7637    5                       IF CMAP.STATE( I) = %XSP_CMAP_LCLDEL THEN DO;

   7637  2 000222   200107 235100                    LDA     I,,AUTO
         2 000223   000001 735000                    ALS     1
         2 000224   200105 470500                    LDP0    CMAP$,,AUTO
         2 000225   000001 236105                    LDQ     1,AL,PR0
         2 000226   000777 376007                    ANQ     511,DL
         2 000227   000002 116007                    CMPQ    2,DL
         2 000230   000240 601000 2                  TNZ     s:7731

      108     7638                                %LOAD( LVL=3, TYP=INTG, VAL=I);  /* PresCtxtIdent */

   7691  2 000231   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000232   000001 735000                    ALS     1
         2 000233   200107 236100                    LDQ     I,,AUTO
         2 000234   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

   7723  2 000235   000004 236000 3                  LDQ     4
         2 000236   200004 756105                    STQ     ITEMLIST,AL,AUTO
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:34   

   7726  2 000237   000000 054000 1                  AOS     XSP_ITEMCNT

      109     7730    5                           END;

      110     7731    4                       END;

   7731  2 000240   200107 054100                    AOS     I,,AUTO
         2 000241   200107 235100                    LDA     I,,AUTO
         2 000242   000022 115007                    CMPA    18,DL
         2 000243   000222 604400 2                  TMOZ    s:7637

      111     7732    3                   END;

      112     7733    2               DATALVL = 2;

   7733  2 000244   000002 235007                    LDA     2,DL
         2 000245   200106 755100                    STA     DATALVL,,AUTO
         2 000246   001707 710000 2                  TRA     s:13533

      113     7734        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:35   
      114     7735        /*****************************************************************************
      115     7736        *
      116     7737        *       ACA
      117     7738        *
      118     7739        *****************************************************************************/
      119     7740    2           CASE( %XSP_PEV_ACA);

      120     7741                    %LOAD( LVL=1, TAG=C1, IMP=Y, TYP=SEQ);  /* ACA */

   7826  2 000247   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000250   000001 735000                    ALS     1
         2 000251   241601 236007                    LDQ     82817,DL
         2 000252   200004 756105                    STQ     ITEMLIST,AL,AUTO

   7829  2 000253   000000 054000 1                  AOS     XSP_ITEMCNT

      121     7833    2               TEMP = 0;

   7833  2 000254   200113 450100                    STZ     TEMP,,AUTO

      122     7834    3               DO I = 1 TO %XSP_MAX_CTXTID;

   7834  2 000255   000001 235007                    LDA     1,DL
         2 000256   200107 755100                    STA     I,,AUTO

      123     7835    3                   IF CMAP.STATE( I) = %XSP_CMAP_RMTDEF THEN

   7835  2 000257   200107 235100                    LDA     I,,AUTO
         2 000260   000001 735000                    ALS     1
         2 000261   200105 470500                    LDP0    CMAP$,,AUTO
         2 000262   000001 236105                    LDQ     1,AL,PR0
         2 000263   000777 376007                    ANQ     511,DL
         2 000264   000003 116007                    CMPQ    3,DL
         2 000265   000267 601000 2                  TNZ     s:7837

      124     7836    3                       TEMP = TEMP + 1;

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:36   
   7836  2 000266   200113 054100                    AOS     TEMP,,AUTO

      125     7837    3                   END;

   7837  2 000267   200107 054100                    AOS     I,,AUTO
         2 000270   200107 235100                    LDA     I,,AUTO
         2 000271   000022 115007                    CMPA    18,DL
         2 000272   000257 604400 2                  TMOZ    s:7835

      126     7838    3               IF TEMP > 0 THEN DO;

   7838  2 000273   200113 236100                    LDQ     TEMP,,AUTO
         2 000274   000375 604400 2                  TMOZ    s:8307

      127     7839                       %LOAD( LVL=2, TAG=C0, IMP=Y, TYP=SEQOF); /* PresCtxtAddResultList */

   7924  2 000275   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000276   000001 735000                    ALS     1
         2 000277   240562 236007                    LDQ     82290,DL
         2 000300   200004 756105                    STQ     ITEMLIST,AL,AUTO

   7927  2 000301   000000 054000 1                  AOS     XSP_ITEMCNT

      128     7931    4                   DO I = 1 TO %XSP_MAX_CTXTID;

   7931  2 000302   000001 235007                    LDA     1,DL
         2 000303   200107 755100                    STA     I,,AUTO

      129     7932    5                       IF CMAP.STATE( I) = %XSP_CMAP_RMTDEF THEN DO;

   7932  2 000304   200107 235100                    LDA     I,,AUTO
         2 000305   000001 735000                    ALS     1
         2 000306   200105 470500                    LDP0    CMAP$,,AUTO
         2 000307   000001 236105                    LDQ     1,AL,PR0
         2 000310   000777 376007                    ANQ     511,DL
         2 000311   000003 116007                    CMPQ    3,DL
         2 000312   000371 601000 2                  TNZ     s:8305
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:37   

      130     7933                                %LOAD( LVL=3, TYP=SEQ);

   8018  2 000313   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000314   000001 735000                    ALS     1
         2 000315   060203 236007                    LDQ     24707,DL
         2 000316   200004 756105                    STQ     ITEMLIST,AL,AUTO

   8021  2 000317   000000 054000 1                  AOS     XSP_ITEMCNT

      131     8025                                %LOAD( LVL=4, TAG=C0, IMP=Y, TYP=INTG,
      132     8026                                        VAL="CMAP.RESULT( I)");  /* Result */

   8079  2 000320   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000321   000001 735000                    ALS     1
         2 000322   200107 236100                    LDQ     I,,AUTO
         2 000323   000001 736000                    QLS     1
         2 000324   200105 470500                    LDP0    CMAP$,,AUTO
         2 000325   000001 236106                    LDQ     1,QL,PR0
         2 000326   000011 772000                    QRL     9
         2 000327   000017 376007                    ANQ     15,DL
         2 000330   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

   8111  2 000331   000005 236000 3                  LDQ     5
         2 000332   200004 756105                    STQ     ITEMLIST,AL,AUTO

   8114  2 000333   000000 054000 1                  AOS     XSP_ITEMCNT

      133     8118                                %LOAD( LVL=4, TAG=C1, IMP=Y, TYP=OBJID, /*TfrSynName*/
      134     8119                                        VAL="XSP_TFRLIST.CTXT$( CMAP.TFRCTXTID( I))");

   8191  2 000334   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000335   000001 735000                    ALS     1
         2 000336   200107 236100                    LDQ     I,,AUTO
         2 000337   000001 736000                    QLS     1
         2 000340   200105 470500                    LDP0    CMAP$,,AUTO
         2 000341   000001 220106                    LDX0    1,QL,PR0
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:38   
         2 000342   000777 360003                    ANX0    511,DU
         2 000343   000000 471410 xsym               LDP1    XSP_TFRLIST,X0
         2 000344   200122 451500                    STP1    U36+2,,AUTO
         2 000345   200122 236100                    LDQ     U36+2,,AUTO
         2 000346   400000 036007                    ADLQ    -131072,DL
         2 000347   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

   8204  2 000350   200107 236100                    LDQ     I,,AUTO
         2 000351   000001 736000                    QLS     1
         2 000352   200105 470500                    LDP0    CMAP$,,AUTO
         2 000353   000001 220106                    LDX0    1,QL,PR0
         2 000354   000777 360003                    ANX0    511,DU
         2 000355   000000 471410 xsym               LDP1    XSP_TFRLIST,X0
         2 000356   100000 236100                    LDQ     0,,PR1
         2 000357   777777 376003                    ANQ     -1,DU
         2 000360   201464 036007                    ADLQ    66356,DL
         2 000361   200004 756105                    STQ     ITEMLIST,AL,AUTO

   8207  2 000362   000000 054000 1                  AOS     XSP_ITEMCNT

      135     8211                                %LOAD( LVL=4, TAG=C2, IMP=Y, TYP=INTG,
      136     8212                                        VAL=0);  /*N* ProviderReason */

   8265  2 000363   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000364   000001 735000                    ALS     1
         2 000365   200005 450105                    STZ     ITEMLIST+1,AL,AUTO

   8297  2 000366   000006 236000 3                  LDQ     6
         2 000367   200004 756105                    STQ     ITEMLIST,AL,AUTO

   8300  2 000370   000000 054000 1                  AOS     XSP_ITEMCNT

      137     8304    5                           END;

      138     8305    4                       END;

   8305  2 000371   200107 054100                    AOS     I,,AUTO
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:39   
         2 000372   200107 235100                    LDA     I,,AUTO
         2 000373   000022 115007                    CMPA    18,DL
         2 000374   000304 604400 2                  TMOZ    s:7932

      139     8306    3                   END;

      140     8307    2               TEMP = 0;

   8307  2 000375   200113 450100                    STZ     TEMP,,AUTO

      141     8308    3               DO I = 1 TO %XSP_MAX_CTXTID;

   8308  2 000376   000001 236007                    LDQ     1,DL
         2 000377   200107 756100                    STQ     I,,AUTO

      142     8309    3                   IF CMAP.STATE( I) = %XSP_CMAP_RMTDEL THEN

   8309  2 000400   200107 235100                    LDA     I,,AUTO
         2 000401   000001 735000                    ALS     1
         2 000402   200105 470500                    LDP0    CMAP$,,AUTO
         2 000403   000001 236105                    LDQ     1,AL,PR0
         2 000404   000777 376007                    ANQ     511,DL
         2 000405   000004 116007                    CMPQ    4,DL
         2 000406   000410 601000 2                  TNZ     s:8311

      143     8310    3                       TEMP = TEMP + 1;

   8310  2 000407   200113 054100                    AOS     TEMP,,AUTO

      144     8311    3                   END;

   8311  2 000410   200107 054100                    AOS     I,,AUTO
         2 000411   200107 235100                    LDA     I,,AUTO
         2 000412   000022 115007                    CMPA    18,DL
         2 000413   000400 604400 2                  TMOZ    s:8309

      145     8312    3               IF TEMP > 0 THEN DO;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:40   

   8312  2 000414   200113 236100                    LDQ     TEMP,,AUTO
         2 000415   000453 604400 2                  TMOZ    s:8503

      146     8313                       %LOAD( LVL=2, TAG=C1, IMP=Y, TYP=SEQOF); /* PresCtxtDelResultList */

   8398  2 000416   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000417   000001 735000                    ALS     1
         2 000420   241562 236007                    LDQ     82802,DL
         2 000421   200004 756105                    STQ     ITEMLIST,AL,AUTO

   8401  2 000422   000000 054000 1                  AOS     XSP_ITEMCNT

      147     8405    4                   DO I = 1 TO %XSP_MAX_CTXTID;

   8405  2 000423   000001 235007                    LDA     1,DL
         2 000424   200107 755100                    STA     I,,AUTO

      148     8406    5                       IF CMAP.STATE( I) = %XSP_CMAP_RMTDEL THEN DO;

   8406  2 000425   200107 235100                    LDA     I,,AUTO
         2 000426   000001 735000                    ALS     1
         2 000427   200105 470500                    LDP0    CMAP$,,AUTO
         2 000430   000001 236105                    LDQ     1,AL,PR0
         2 000431   000777 376007                    ANQ     511,DL
         2 000432   000004 116007                    CMPQ    4,DL
         2 000433   000447 601000 2                  TNZ     s:8501

      149     8407                                %LOAD( LVL=3, TYP=INTG,
      150     8408                                        VAL="CMAP.RESULT( I)");  /* Result */

   8461  2 000434   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000435   000001 735000                    ALS     1
         2 000436   200107 236100                    LDQ     I,,AUTO
         2 000437   000001 736000                    QLS     1
         2 000440   000001 236106                    LDQ     1,QL,PR0
         2 000441   000011 772000                    QRL     9
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:41   
         2 000442   000017 376007                    ANQ     15,DL
         2 000443   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

   8493  2 000444   000004 236000 3                  LDQ     4
         2 000445   200004 756105                    STQ     ITEMLIST,AL,AUTO

   8496  2 000446   000000 054000 1                  AOS     XSP_ITEMCNT

      151     8500    5                           END;

      152     8501    4                       END;

   8501  2 000447   200107 054100                    AOS     I,,AUTO
         2 000450   200107 235100                    LDA     I,,AUTO
         2 000451   000022 115007                    CMPA    18,DL
         2 000452   000425 604400 2                  TMOZ    s:8406

      153     8502    3                   END;

      154     8503    2               DATALVL = 2;

   8503  2 000453   000002 236007                    LDQ     2,DL
         2 000454   200106 756100                    STQ     DATALVL,,AUTO
         2 000455   001707 710000 2                  TRA     s:13533

      155     8504        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:42   
      156     8505        /*****************************************************************************
      157     8506        *
      158     8507        *       ARP
      159     8508        *
      160     8509        *****************************************************************************/
      161     8510    2           CASE( %XSP_PEV_ARP);

      162     8511                    %LOAD( LVL=1, TYP=SEQ);  /* ARP */

   8596  2 000456   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000457   000001 735000                    ALS     1
         2 000460   060201 236007                    LDQ     24705,DL
         2 000461   200004 756105                    STQ     ITEMLIST,AL,AUTO

   8599  2 000462   000000 054000 1                  AOS     XSP_ITEMCNT

      163     8603                    %LOAD( LVL=2, TAG=C0, IMP=Y, TYP=INTG,
      164     8604                            VAL=0);  /*N* AbortReason */

   8657  2 000463   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000464   000001 735000                    ALS     1
         2 000465   200005 450105                    STZ     ITEMLIST+1,AL,AUTO

   8689  2 000466   000007 236000 3                  LDQ     7
         2 000467   200004 756105                    STQ     ITEMLIST,AL,AUTO

   8692  2 000470   000000 054000 1                  AOS     XSP_ITEMCNT

      165     8696                    %LOAD( LVL=2, TAG=C1, IMP=Y, TYP=INTG,
      166     8697                            VAL="EVIDMAP( VBLK.EVENT)");  /* EventIdent */

   8750  2 000471   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000472   000001 735000                    ALS     1
         2 000473   000006 236100                    LDQ     6,,PR0
         2 000474   000777 376007                    ANQ     511,DL
         2 000475   000002 735000                    ALS     2
         2 000476   000105 101406                    MRL     fill='000'O
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:43   
         2 000477   000001 000001 0                  ADSC9   EVIDMAP,Q                cn=0,n=1
         2 000500   200005 000004                    ADSC9   ITEMLIST+1,A,AUTO        cn=0,n=4

   8782  2 000501   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000502   000001 735000                    ALS     1
         2 000503   000010 236000 3                  LDQ     8
         2 000504   200004 756105                    STQ     ITEMLIST,AL,AUTO

   8785  2 000505   000000 054000 1                  AOS     XSP_ITEMCNT

   8787  2 000506   001707 710000 2                  TRA     s:13533

      167     8789        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:44   
      168     8790        /*****************************************************************************
      169     8791        *
      170     8792        *       ARU
      171     8793        *
      172     8794        *****************************************************************************/
      173     8795    2           CASE( %XSP_PEV_ARU);

      174     8796                    %LOAD( LVL=1, TAG=C0, IMP=Y, TYP=SEQ);  /* ARU */

   8881  2 000507   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000510   000001 735000                    ALS     1
         2 000511   240601 236007                    LDQ     82305,DL
         2 000512   200004 756105                    STQ     ITEMLIST,AL,AUTO

   8884  2 000513   000000 054000 1                  AOS     XSP_ITEMCNT

      175     8888    2               TEMP = 0;

   8888  2 000514   200113 450100                    STZ     TEMP,,AUTO

      176     8889    3               DO I = 1 TO %XSP_MAX_CTXTID;

   8889  2 000515   000001 235007                    LDA     1,DL
         2 000516   200107 755100                    STA     I,,AUTO

      177     8890    3                   IF CMAP.STATE( I) = %XSP_CMAP_ACTIVE THEN

   8890  2 000517   200107 235100                    LDA     I,,AUTO
         2 000520   000001 735000                    ALS     1
         2 000521   200105 470500                    LDP0    CMAP$,,AUTO
         2 000522   000001 236105                    LDQ     1,AL,PR0
         2 000523   000777 376007                    ANQ     511,DL
         2 000524   000005 116007                    CMPQ    5,DL
         2 000525   000527 601000 2                  TNZ     s:8892

      178     8891    3                       TEMP = TEMP + 1;

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:45   
   8891  2 000526   200113 054100                    AOS     TEMP,,AUTO

      179     8892    3                   END;

   8892  2 000527   200107 054100                    AOS     I,,AUTO
         2 000530   200107 235100                    LDA     I,,AUTO
         2 000531   000022 115007                    CMPA    18,DL
         2 000532   000517 604400 2                  TMOZ    s:8890

      180     8893    3               IF TEMP > 0 THEN DO;

   8893  2 000533   200113 236100                    LDQ     TEMP,,AUTO
         2 000534   000622 604400 2                  TMOZ    s:9269

      181     8894                        %LOAD( LVL=2, TAG=C0, IMP=Y, TYP=SEQOF);  /* PresCtxtIdentList */

   8979  2 000535   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000536   000001 735000                    ALS     1
         2 000537   240562 236007                    LDQ     82290,DL
         2 000540   200004 756105                    STQ     ITEMLIST,AL,AUTO

   8982  2 000541   000000 054000 1                  AOS     XSP_ITEMCNT

      182     8986    4                   DO I = 1 TO %XSP_MAX_CTXTID;

   8986  2 000542   000001 235007                    LDA     1,DL
         2 000543   200107 755100                    STA     I,,AUTO

      183     8987    5                       IF CMAP.STATE( I) = %XSP_CMAP_ACTIVE THEN DO;

   8987  2 000544   200107 235100                    LDA     I,,AUTO
         2 000545   000001 735000                    ALS     1
         2 000546   200105 470500                    LDP0    CMAP$,,AUTO
         2 000547   000001 236105                    LDQ     1,AL,PR0
         2 000550   000777 376007                    ANQ     511,DL
         2 000551   000005 116007                    CMPQ    5,DL
         2 000552   000616 601000 2                  TNZ     s:9267
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:46   

      184     8988                                %LOAD( LVL=3, TYP=SEQ);

   9073  2 000553   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000554   000001 735000                    ALS     1
         2 000555   060203 236007                    LDQ     24707,DL
         2 000556   200004 756105                    STQ     ITEMLIST,AL,AUTO

   9076  2 000557   000000 054000 1                  AOS     XSP_ITEMCNT

      185     9080                                %LOAD( LVL=4, TYP=INTG,
      186     9081                                        VAL=I);  /* PresCtxtIdent */

   9134  2 000560   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000561   000001 735000                    ALS     1
         2 000562   200107 236100                    LDQ     I,,AUTO
         2 000563   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

   9166  2 000564   000003 236000 3                  LDQ     3
         2 000565   200004 756105                    STQ     ITEMLIST,AL,AUTO

   9169  2 000566   000000 054000 1                  AOS     XSP_ITEMCNT

      187     9173                                %LOAD( LVL=4, TYP=OBJID,  /* TfrSynName */
      188     9174                                        VAL="XSP_TFRLIST.CTXT$( CMAP.TFRCTXTID( I))");

   9246  2 000567   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000570   000001 735000                    ALS     1
         2 000571   200107 236100                    LDQ     I,,AUTO
         2 000572   000001 736000                    QLS     1
         2 000573   200105 470500                    LDP0    CMAP$,,AUTO
         2 000574   000001 220106                    LDX0    1,QL,PR0
         2 000575   000777 360003                    ANX0    511,DU
         2 000576   000000 471410 xsym               LDP1    XSP_TFRLIST,X0
         2 000577   200122 451500                    STP1    U36+2,,AUTO
         2 000600   200122 236100                    LDQ     U36+2,,AUTO
         2 000601   400000 036007                    ADLQ    -131072,DL
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:47   
         2 000602   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

   9259  2 000603   200107 236100                    LDQ     I,,AUTO
         2 000604   000001 736000                    QLS     1
         2 000605   200105 470500                    LDP0    CMAP$,,AUTO
         2 000606   000001 220106                    LDX0    1,QL,PR0
         2 000607   000777 360003                    ANX0    511,DU
         2 000610   000000 471410 xsym               LDP1    XSP_TFRLIST,X0
         2 000611   100000 236100                    LDQ     0,,PR1
         2 000612   777777 376003                    ANQ     -1,DU
         2 000613   006064 036007                    ADLQ    3124,DL
         2 000614   200004 756105                    STQ     ITEMLIST,AL,AUTO

   9262  2 000615   000000 054000 1                  AOS     XSP_ITEMCNT

      189     9266    5                           END;

      190     9267    4                       END;

   9267  2 000616   200107 054100                    AOS     I,,AUTO
         2 000617   200107 235100                    LDA     I,,AUTO
         2 000620   000022 115007                    CMPA    18,DL
         2 000621   000544 604400 2                  TMOZ    s:8987

      191     9268    3                   END;

      192     9269    2               DATALVL = 2;

   9269  2 000622   000002 236007                    LDQ     2,DL
         2 000623   200106 756100                    STQ     DATALVL,,AUTO
         2 000624   001707 710000 2                  TRA     s:13533

      193     9270        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:48   
      194     9271        /*****************************************************************************
      195     9272        *
      196     9273        *       CP
      197     9274        *
      198     9275        *****************************************************************************/
      199     9276    2           CASE( %XSP_PEV_CP);

      200     9277                    %LOAD( LVL=1, TYP=SET);  /* CPType */

   9362  2 000625   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000626   000001 735000                    ALS     1
         2 000627   061211 236007                    LDQ     25225,DL
         2 000630   200004 756105                    STQ     ITEMLIST,AL,AUTO

   9365  2 000631   000000 054000 1                  AOS     XSP_ITEMCNT

      201     9369                    %LOAD( LVL=2, TAG=C0, IMP=Y, TYP=SET);  /* ModeSelector */

   9454  2 000632   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000633   000001 735000                    ALS     1
         2 000634   240612 236007                    LDQ     82314,DL
         2 000635   200004 756105                    STQ     ITEMLIST,AL,AUTO

   9457  2 000636   000000 054000 1                  AOS     XSP_ITEMCNT

      202     9461                    %LOAD( LVL=3, TAG=C0, TYP=INTG, LEN=1, VAL=1);

   9514  2 000637   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000640   000001 735000                    ALS     1
         2 000641   000001 236007                    LDQ     1,DL
         2 000642   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

   9546  2 000643   000011 236000 3                  LDQ     9
         2 000644   200004 756105                    STQ     ITEMLIST,AL,AUTO

   9549  2 000645   000000 054000 1                  AOS     XSP_ITEMCNT

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:49   
      203     9553                    %LOAD( LVL=2, TAG=C2, IMP=Y, TYP=SEQ);

   9638  2 000646   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000647   000001 735000                    ALS     1
         2 000650   242602 236007                    LDQ     83330,DL
         2 000651   200004 756105                    STQ     ITEMLIST,AL,AUTO

   9641  2 000652   000000 054000 1                  AOS     XSP_ITEMCNT

      204     9645                    %LOAD( LVL=3, TAG=C0, IMP=Y, TYP=BITSTR,
      205     9646                            LEN=1, VAL='1'B);  /* ProtocolVersion */

   9705  2 000653   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000654   000001 735000                    ALS     1
         2 000655   400000 236003                    LDQ     -131072,DU
         2 000656   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

   9731  2 000657   000012 236000 3                  LDQ     10
         2 000660   200004 756105                    STQ     ITEMLIST,AL,AUTO

   9734  2 000661   000000 054000 1                  AOS     XSP_ITEMCNT

      206     9738    2               PSAP$ = ADDR( XSP$CONNECT.CALLING$->XSC$ADDRESS.PSAP);

   9738  2 000662   000001 471500                    LDP1    1,,PR0
         2 000663   100006 473500                    LDP3    6,,PR1
         2 000664   200112 453500                    STP3    PSAP$,,AUTO

      207     9739                    %LOAD( LVL=3, TAG=C1, IMP=Y, TYP=OCTETSTR,
      208     9740                            LEN="PSAP.LEN", VAL="PSAP.TXT"); /* CallingPresSelector */

   9822  2 000665   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000666   000001 735000                    ALS     1
         2 000667   200112 236100                    LDQ     PSAP$,,AUTO
         2 000670   200000 036007                    ADLQ    65536,DL
         2 000671   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:50   
   9825  2 000672   000100 101500                    MRL     fill='000'O
         2 000673   300000 000001                    ADSC9   0,,PR3                   cn=0,n=1
         2 000674   200122 000004                    ADSC9   U36+2,,AUTO              cn=0,n=4
         2 000675   200122 236100                    LDQ     U36+2,,AUTO
         2 000676   000022 736000                    QLS     18
         2 000677   201443 036007                    ADLQ    66339,DL
         2 000700   200004 756105                    STQ     ITEMLIST,AL,AUTO

   9828  2 000701   000000 054000 1                  AOS     XSP_ITEMCNT

      209     9832    2               PSAP$ = ADDR( XSP$CONNECT.CALLED$->XSC$ADDRESS.PSAP);

   9832  2 000702   000001 471500                    LDP1    1,,PR0
         2 000703   100007 474500                    LDP4    7,,PR1
         2 000704   200112 454500                    STP4    PSAP$,,AUTO

      210     9833                    %LOAD( LVL=3, TAG=C2, IMP=Y, TYP=OCTETSTR,
      211     9834                            LEN="PSAP.LEN", VAL="PSAP.TXT");  /* CalledPresSelector */

   9916  2 000705   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000706   000001 735000                    ALS     1
         2 000707   200112 236100                    LDQ     PSAP$,,AUTO
         2 000710   200000 036007                    ADLQ    65536,DL
         2 000711   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

   9919  2 000712   000100 101500                    MRL     fill='000'O
         2 000713   400000 000001                    ADSC9   0,,PR4                   cn=0,n=1
         2 000714   200122 000004                    ADSC9   U36+2,,AUTO              cn=0,n=4
         2 000715   200122 236100                    LDQ     U36+2,,AUTO
         2 000716   000022 736000                    QLS     18
         2 000717   202443 036007                    ADLQ    66851,DL
         2 000720   200004 756105                    STQ     ITEMLIST,AL,AUTO

   9922  2 000721   000000 054000 1                  AOS     XSP_ITEMCNT

      212     9926    3               IF VBLK.DEFMASK ~= '0'B THEN DO;

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:51   
   9926  2 000722   000007 235100                    LDA     7,,PR0
         2 000723   001045 600000 2                  TZE     s:10572

      213     9927                        %LOAD( LVL=3, TAG=C4, IMP=Y, TYP=SEQOF); /* PresCtxtDefList */

  10012  2 000724   000000 236000 1                  LDQ     XSP_ITEMCNT
         2 000725   000001 736000                    QLS     1
         2 000726   244563 235007                    LDA     84339,DL
         2 000727   200004 755106                    STA     ITEMLIST,QL,AUTO

  10015  2 000730   000000 054000 1                  AOS     XSP_ITEMCNT

      214    10019    4                   DO I = 1 TO %XSP_MAX_CTXTID;

  10019  2 000731   000001 236007                    LDQ     1,DL
         2 000732   200107 756100                    STQ     I,,AUTO

      215    10020    5                       IF CMAP.STATE( I) = %XSP_CMAP_LCLDEF THEN DO;

  10020  2 000733   200107 235100                    LDA     I,,AUTO
         2 000734   000001 735000                    ALS     1
         2 000735   200105 470500                    LDP0    CMAP$,,AUTO
         2 000736   000001 236105                    LDQ     1,AL,PR0
         2 000737   000777 376007                    ANQ     511,DL
         2 000740   000001 116007                    CMPQ    1,DL
         2 000741   001041 601000 2                  TNZ     s:10485

      216    10021                                %LOAD( LVL=4, TYP=SEQ);

  10106  2 000742   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000743   000001 735000                    ALS     1
         2 000744   060204 236007                    LDQ     24708,DL
         2 000745   200004 756105                    STQ     ITEMLIST,AL,AUTO

  10109  2 000746   000000 054000 1                  AOS     XSP_ITEMCNT

      217    10113                                %LOAD( LVL=5, TYP=INTG, VAL=I);  /* PresCtxtIdent */
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:52   

  10166  2 000747   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000750   000001 735000                    ALS     1
         2 000751   200107 236100                    LDQ     I,,AUTO
         2 000752   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  10198  2 000753   000013 236000 3                  LDQ     11
         2 000754   200004 756105                    STQ     ITEMLIST,AL,AUTO

  10201  2 000755   000000 054000 1                  AOS     XSP_ITEMCNT

      218    10205                                %LOAD( LVL=5, TYP=OBJID,  /* AbsSynName */
      219    10206                                        VAL="XSP_ABSLIST.CTXT$( CMAP.ABSCTXTID( I))");

  10278  2 000756   000000 235000 1                  LDA     XSP_ITEMCNT
         2 000757   000001 735000                    ALS     1
         2 000760   200107 236100                    LDQ     I,,AUTO
         2 000761   000001 736000                    QLS     1
         2 000762   200105 470500                    LDP0    CMAP$,,AUTO
         2 000763   000001 236106                    LDQ     1,QL,PR0
         2 000764   000033 772000                    QRL     27
         2 000765   000000 471406 xsym               LDP1    XSP_ABSLIST,QL
         2 000766   200122 451500                    STP1    U36+2,,AUTO
         2 000767   200122 236100                    LDQ     U36+2,,AUTO
         2 000770   400000 036007                    ADLQ    -131072,DL
         2 000771   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  10291  2 000772   200107 236100                    LDQ     I,,AUTO
         2 000773   000001 736000                    QLS     1
         2 000774   200105 470500                    LDP0    CMAP$,,AUTO
         2 000775   000001 236106                    LDQ     1,QL,PR0
         2 000776   000033 772000                    QRL     27
         2 000777   000000 471406 xsym               LDP1    XSP_ABSLIST,QL
         2 001000   100000 236100                    LDQ     0,,PR1
         2 001001   777777 376003                    ANQ     -1,DU
         2 001002   006065 036007                    ADLQ    3125,DL
         2 001003   200004 756105                    STQ     ITEMLIST,AL,AUTO
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:53   

  10294  2 001004   000000 054000 1                  AOS     XSP_ITEMCNT

      220    10298                                %LOAD( LVL=5, TYP=SEQOF);

  10383  2 001005   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001006   000001 735000                    ALS     1
         2 001007   120165 236007                    LDQ     41077,DL
         2 001010   200004 756105                    STQ     ITEMLIST,AL,AUTO

  10386  2 001011   000000 054000 1                  AOS     XSP_ITEMCNT

      221    10390                                /*N* assume only one transfer syntax supported */
      222    10391                                %LOAD( LVL=6, TYP=OBJID,  /* TfrSynName */
      223    10392                                        VAL="XSP_TFRLIST.CTXT$( CMAP.TFRCTXTID( I))");

  10464  2 001012   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001013   000001 735000                    ALS     1
         2 001014   200107 236100                    LDQ     I,,AUTO
         2 001015   000001 736000                    QLS     1
         2 001016   200105 470500                    LDP0    CMAP$,,AUTO
         2 001017   000001 220106                    LDX0    1,QL,PR0
         2 001020   000777 360003                    ANX0    511,DU
         2 001021   000000 471410 xsym               LDP1    XSP_TFRLIST,X0
         2 001022   200122 451500                    STP1    U36+2,,AUTO
         2 001023   200122 236100                    LDQ     U36+2,,AUTO
         2 001024   400000 036007                    ADLQ    -131072,DL
         2 001025   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  10477  2 001026   200107 236100                    LDQ     I,,AUTO
         2 001027   000001 736000                    QLS     1
         2 001030   200105 470500                    LDP0    CMAP$,,AUTO
         2 001031   000001 220106                    LDX0    1,QL,PR0
         2 001032   000777 360003                    ANX0    511,DU
         2 001033   000000 471410 xsym               LDP1    XSP_TFRLIST,X0
         2 001034   100000 236100                    LDQ     0,,PR1
         2 001035   777777 376003                    ANQ     -1,DU
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:54   
         2 001036   006066 036007                    ADLQ    3126,DL
         2 001037   200004 756105                    STQ     ITEMLIST,AL,AUTO

  10480  2 001040   000000 054000 1                  AOS     XSP_ITEMCNT

      224    10484    5                           END;

      225    10485    4                       END;

  10485  2 001041   200107 054100                    AOS     I,,AUTO
         2 001042   200107 235100                    LDA     I,,AUTO
         2 001043   000022 115007                    CMPA    18,DL
         2 001044   000733 604400 2                  TMOZ    s:10020

      226    10486    3                   END;

      227    10487                    %LOAD( LVL=3, TAG=C6, IMP=Y, TYP=SEQ);  /* DefaultCtxtName */

  10572  2 001045   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001046   000001 735000                    ALS     1
         2 001047   246603 236007                    LDQ     85379,DL
         2 001050   200004 756105                    STQ     ITEMLIST,AL,AUTO

  10575  2 001051   000000 054000 1                  AOS     XSP_ITEMCNT

      228    10579                    %LOAD( LVL=4, TAG=C0, IMP=Y, TYP=OBJID,  /* AbsSynName */
      229    10580                            VAL="XSP_ABSLIST.CTXT$( CMAP.ABSCTXTID(0))");

  10652  2 001052   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001053   000001 735000                    ALS     1
         2 001054   200105 470500                    LDP0    CMAP$,,AUTO
         2 001055   000001 236100                    LDQ     1,,PR0
         2 001056   000033 772000                    QRL     27
         2 001057   000000 471406 xsym               LDP1    XSP_ABSLIST,QL
         2 001060   200122 451500                    STP1    U36+2,,AUTO
         2 001061   200122 236100                    LDQ     U36+2,,AUTO
         2 001062   400000 036007                    ADLQ    -131072,DL
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:55   
         2 001063   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  10665  2 001064   200105 470500                    LDP0    CMAP$,,AUTO
         2 001065   000001 236100                    LDQ     1,,PR0
         2 001066   000033 772000                    QRL     27
         2 001067   000000 471406 xsym               LDP1    XSP_ABSLIST,QL
         2 001070   100000 236100                    LDQ     0,,PR1
         2 001071   777777 376003                    ANQ     -1,DU
         2 001072   200464 036007                    ADLQ    65844,DL
         2 001073   200004 756105                    STQ     ITEMLIST,AL,AUTO

  10668  2 001074   000000 054000 1                  AOS     XSP_ITEMCNT

      230    10672                    %LOAD( LVL=4, TAG=C1, IMP=Y, TYP=OBJID,  /* TfrSynName */
      231    10673                            VAL="XSP_TFRLIST.CTXT$( CMAP.TFRCTXTID(0))");

  10745  2 001075   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001076   000001 735000                    ALS     1
         2 001077   200105 470500                    LDP0    CMAP$,,AUTO
         2 001100   000001 220100                    LDX0    1,,PR0
         2 001101   000777 360003                    ANX0    511,DU
         2 001102   000000 471410 xsym               LDP1    XSP_TFRLIST,X0
         2 001103   200122 451500                    STP1    U36+2,,AUTO
         2 001104   200122 236100                    LDQ     U36+2,,AUTO
         2 001105   400000 036007                    ADLQ    -131072,DL
         2 001106   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  10758  2 001107   200105 470500                    LDP0    CMAP$,,AUTO
         2 001110   000001 220100                    LDX0    1,,PR0
         2 001111   000777 360003                    ANX0    511,DU
         2 001112   000000 471410 xsym               LDP1    XSP_TFRLIST,X0
         2 001113   100000 236100                    LDQ     0,,PR1
         2 001114   777777 376003                    ANQ     -1,DU
         2 001115   201464 036007                    ADLQ    66356,DL
         2 001116   200004 756105                    STQ     ITEMLIST,AL,AUTO

  10761  2 001117   000000 054000 1                  AOS     XSP_ITEMCNT
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:56   

      232    10765                    %LOAD( LVL=3, TAG=C8, IMP=Y, TYP=BITSTR,
      233    10766                            LEN=2, VAL="XSP$CONNECT.PFU");  /* PresRequirements */

  10825  2 001120   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001121   000001 735000                    ALS     1
         2 001122   200003 470500                    LDP0    @VBLK,,AUTO
         2 001123   000001 471500                    LDP1    1,,PR0
         2 001124   100013 236100                    LDQ     11,,PR1
         2 001125   600000 376003                    ANQ     -65536,DU
         2 001126   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  10851  2 001127   000014 236000 3                  LDQ     12
         2 001130   200004 756105                    STQ     ITEMLIST,AL,AUTO

  10854  2 001131   000000 054000 1                  AOS     XSP_ITEMCNT

      234    10858                    %LOAD( LVL=3, TAG=C9, IMP=Y, TYP=BITSTR,
      235    10859                            LEN=11, VAL="XSP$CONNECT.SFU");  /* UserSessionRequirements */

  10918  2 001132   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001133   000001 735000                    ALS     1
         2 001134   000001 471500                    LDP1    1,,PR0
         2 001135   100010 236100                    LDQ     8,,PR1
         2 001136   000022 736000                    QLS     18
         2 001137   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  10944  2 001140   000015 236000 3                  LDQ     13
         2 001141   200004 756105                    STQ     ITEMLIST,AL,AUTO

  10947  2 001142   000000 054000 1                  AOS     XSP_ITEMCNT

      236    10951    2               DATALVL = 3;

  10951  2 001143   000003 235007                    LDA     3,DL
         2 001144   200106 755100                    STA     DATALVL,,AUTO
         2 001145   001707 710000 2                  TRA     s:13533
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:57   

      237    10952        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:58   
      238    10953        /*****************************************************************************
      239    10954        *
      240    10955        *       CPA
      241    10956        *
      242    10957        *****************************************************************************/
      243    10958    2           CASE( %XSP_PEV_CPA);

      244    10959                    %LOAD( LVL=1, TYP=SET);  /* CPA */

  11044  2 001146   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001147   000001 735000                    ALS     1
         2 001150   061211 236007                    LDQ     25225,DL
         2 001151   200004 756105                    STQ     ITEMLIST,AL,AUTO

  11047  2 001152   000000 054000 1                  AOS     XSP_ITEMCNT

      245    11051                    %LOAD( LVL=2, TAG=C0, IMP=Y, TYP=SET);  /* ModeSelector */

  11136  2 001153   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001154   000001 735000                    ALS     1
         2 001155   240612 236007                    LDQ     82314,DL
         2 001156   200004 756105                    STQ     ITEMLIST,AL,AUTO

  11139  2 001157   000000 054000 1                  AOS     XSP_ITEMCNT

      246    11143                    %LOAD( LVL=3, TAG=C0, TYP=INTG, LEN=1, VAL=1);

  11196  2 001160   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001161   000001 735000                    ALS     1
         2 001162   000001 236007                    LDQ     1,DL
         2 001163   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  11228  2 001164   000011 236000 3                  LDQ     9
         2 001165   200004 756105                    STQ     ITEMLIST,AL,AUTO

  11231  2 001166   000000 054000 1                  AOS     XSP_ITEMCNT

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:59   
      247    11235                    %LOAD( LVL=2, TAG=C2, IMP=Y, TYP=SEQ);

  11320  2 001167   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001170   000001 735000                    ALS     1
         2 001171   242602 236007                    LDQ     83330,DL
         2 001172   200004 756105                    STQ     ITEMLIST,AL,AUTO

  11323  2 001173   000000 054000 1                  AOS     XSP_ITEMCNT

      248    11327                    %LOAD( LVL=3, TAG=C0, IMP=Y, TYP=BITSTR,
      249    11328                            LEN=1, VAL='1'B);  /* ProtocolVersion */

  11387  2 001174   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001175   000001 735000                    ALS     1
         2 001176   400000 236003                    LDQ     -131072,DU
         2 001177   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  11413  2 001200   000012 236000 3                  LDQ     10
         2 001201   200004 756105                    STQ     ITEMLIST,AL,AUTO

  11416  2 001202   000000 054000 1                  AOS     XSP_ITEMCNT

      250    11420    2               PSAP$ = ADDR( XSP$CONNECT.RESPONDING$->XSC$ADDRESS.PSAP);

  11420  2 001203   000001 471500                    LDP1    1,,PR0
         2 001204   100007 473500                    LDP3    7,,PR1
         2 001205   200112 453500                    STP3    PSAP$,,AUTO

      251    11421                    %LOAD( LVL=3, TAG=C3, IMP=Y, TYP=OCTETSTR,
      252    11422                            LEN="PSAP.LEN", VAL="PSAP.TXT"); /* RespondPresSelector */

  11504  2 001206   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001207   000001 735000                    ALS     1
         2 001210   200112 236100                    LDQ     PSAP$,,AUTO
         2 001211   200000 036007                    ADLQ    65536,DL
         2 001212   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:60   
  11507  2 001213   000100 101500                    MRL     fill='000'O
         2 001214   300000 000001                    ADSC9   0,,PR3                   cn=0,n=1
         2 001215   200122 000004                    ADSC9   U36+2,,AUTO              cn=0,n=4
         2 001216   200122 236100                    LDQ     U36+2,,AUTO
         2 001217   000022 736000                    QLS     18
         2 001220   203443 036007                    ADLQ    67363,DL
         2 001221   200004 756105                    STQ     ITEMLIST,AL,AUTO

  11510  2 001222   000000 054000 1                  AOS     XSP_ITEMCNT

      253    11514    2               TEMP = 0;

  11514  2 001223   200113 450100                    STZ     TEMP,,AUTO

      254    11515    3               DO I = 1 TO %XSP_MAX_CTXTID;

  11515  2 001224   000001 235007                    LDA     1,DL
         2 001225   200107 755100                    STA     I,,AUTO

      255    11516    3                   IF CMAP.STATE( I) = %XSP_CMAP_RMTDEF THEN

  11516  2 001226   200107 235100                    LDA     I,,AUTO
         2 001227   000001 735000                    ALS     1
         2 001230   200105 470500                    LDP0    CMAP$,,AUTO
         2 001231   000001 236105                    LDQ     1,AL,PR0
         2 001232   000777 376007                    ANQ     511,DL
         2 001233   000003 116007                    CMPQ    3,DL
         2 001234   001236 601000 2                  TNZ     s:11518

      256    11517    3                       TEMP = TEMP + 1;

  11517  2 001235   200113 054100                    AOS     TEMP,,AUTO

      257    11518    3                   END;

  11518  2 001236   200107 054100                    AOS     I,,AUTO
         2 001237   200107 235100                    LDA     I,,AUTO
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:61   
         2 001240   000022 115007                    CMPA    18,DL
         2 001241   001226 604400 2                  TMOZ    s:11516

      258    11519    3               IF TEMP > 0 THEN DO;

  11519  2 001242   200113 236100                    LDQ     TEMP,,AUTO
         2 001243   001344 604400 2                  TMOZ    s:12048

      259    11520                       %LOAD( LVL=3, TAG=C5, IMP=Y, TYP=SEQOF); /* PresCtxtDefResultList */

  11605  2 001244   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001245   000001 735000                    ALS     1
         2 001246   245563 236007                    LDQ     84851,DL
         2 001247   200004 756105                    STQ     ITEMLIST,AL,AUTO

  11608  2 001250   000000 054000 1                  AOS     XSP_ITEMCNT

      260    11612    4                   DO I = 1 TO %XSP_MAX_CTXTID;

  11612  2 001251   000001 235007                    LDA     1,DL
         2 001252   200107 755100                    STA     I,,AUTO

      261    11613    5                       IF CMAP.STATE( I) = %XSP_CMAP_RMTDEF THEN DO;

  11613  2 001253   200107 235100                    LDA     I,,AUTO
         2 001254   000001 735000                    ALS     1
         2 001255   200105 470500                    LDP0    CMAP$,,AUTO
         2 001256   000001 236105                    LDQ     1,AL,PR0
         2 001257   000777 376007                    ANQ     511,DL
         2 001260   000003 116007                    CMPQ    3,DL
         2 001261   001340 601000 2                  TNZ     s:11986

      262    11614                                %LOAD( LVL=4, TYP=SEQ);

  11699  2 001262   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001263   000001 735000                    ALS     1
         2 001264   060204 236007                    LDQ     24708,DL
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:62   
         2 001265   200004 756105                    STQ     ITEMLIST,AL,AUTO

  11702  2 001266   000000 054000 1                  AOS     XSP_ITEMCNT

      263    11706                                %LOAD( LVL=5, TAG=C0, IMP=Y, TYP=INTG,
      264    11707                                        LEN=1, VAL="CMAP.RESULT( I)");  /* Result */

  11760  2 001267   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001270   000001 735000                    ALS     1
         2 001271   200107 236100                    LDQ     I,,AUTO
         2 001272   000001 736000                    QLS     1
         2 001273   200105 470500                    LDP0    CMAP$,,AUTO
         2 001274   000001 236106                    LDQ     1,QL,PR0
         2 001275   000011 772000                    QRL     9
         2 001276   000017 376007                    ANQ     15,DL
         2 001277   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  11792  2 001300   000016 236000 3                  LDQ     14
         2 001301   200004 756105                    STQ     ITEMLIST,AL,AUTO

  11795  2 001302   000000 054000 1                  AOS     XSP_ITEMCNT

      265    11799                                %LOAD( LVL=5, TAG=C1, IMP=Y, TYP=OBJID, /*TfrSynName*/
      266    11800                                        VAL="XSP_TFRLIST.CTXT$( CMAP.TFRCTXTID( I))");

  11872  2 001303   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001304   000001 735000                    ALS     1
         2 001305   200107 236100                    LDQ     I,,AUTO
         2 001306   000001 736000                    QLS     1
         2 001307   200105 470500                    LDP0    CMAP$,,AUTO
         2 001310   000001 220106                    LDX0    1,QL,PR0
         2 001311   000777 360003                    ANX0    511,DU
         2 001312   000000 471410 xsym               LDP1    XSP_TFRLIST,X0
         2 001313   200122 451500                    STP1    U36+2,,AUTO
         2 001314   200122 236100                    LDQ     U36+2,,AUTO
         2 001315   400000 036007                    ADLQ    -131072,DL
         2 001316   200005 756105                    STQ     ITEMLIST+1,AL,AUTO
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:63   

  11885  2 001317   200107 236100                    LDQ     I,,AUTO
         2 001320   000001 736000                    QLS     1
         2 001321   200105 470500                    LDP0    CMAP$,,AUTO
         2 001322   000001 220106                    LDX0    1,QL,PR0
         2 001323   000777 360003                    ANX0    511,DU
         2 001324   000000 471410 xsym               LDP1    XSP_TFRLIST,X0
         2 001325   100000 236100                    LDQ     0,,PR1
         2 001326   777777 376003                    ANQ     -1,DU
         2 001327   201465 036007                    ADLQ    66357,DL
         2 001330   200004 756105                    STQ     ITEMLIST,AL,AUTO

  11888  2 001331   000000 054000 1                  AOS     XSP_ITEMCNT

      267    11892                                %LOAD( LVL=5, TAG=C2, IMP=Y, TYP=INTG,
      268    11893                                        VAL=0);  /*N* ProviderReason */

  11946  2 001332   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001333   000001 735000                    ALS     1
         2 001334   200005 450105                    STZ     ITEMLIST+1,AL,AUTO

  11978  2 001335   000017 236000 3                  LDQ     15
         2 001336   200004 756105                    STQ     ITEMLIST,AL,AUTO

  11981  2 001337   000000 054000 1                  AOS     XSP_ITEMCNT

      269    11985    5                           END;

      270    11986    4                       END;

  11986  2 001340   200107 054100                    AOS     I,,AUTO
         2 001341   200107 235100                    LDA     I,,AUTO
         2 001342   000022 115007                    CMPA    18,DL
         2 001343   001253 604400 2                  TMOZ    s:11613

      271    11987    3                   END;

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:64   
      272    11988                    %LOAD( LVL=3, TAG=C8, IMP=Y, TYP=BITSTR,
      273    11989                            LEN=2, VAL="XSP$CONNECT.PFU");  /* PresRequirements */

  12048  2 001344   000000 236000 1                  LDQ     XSP_ITEMCNT
         2 001345   000001 736000                    QLS     1
         2 001346   200003 470500                    LDP0    @VBLK,,AUTO
         2 001347   000001 471500                    LDP1    1,,PR0
         2 001350   000000 620006                    EAX0    0,QL
         2 001351   100013 236100                    LDQ     11,,PR1
         2 001352   600000 376003                    ANQ     -65536,DU
         2 001353   200005 756110                    STQ     ITEMLIST+1,X0,AUTO

  12074  2 001354   000014 235000 3                  LDA     12
         2 001355   200004 755110                    STA     ITEMLIST,X0,AUTO

  12077  2 001356   000000 054000 1                  AOS     XSP_ITEMCNT

      274    12081                    %LOAD( LVL=3, TAG=C9, IMP=Y, TYP=BITSTR,
      275    12082                            LEN=11, VAL="XSP$CONNECT.SFU");  /* UserSessionRequirements */

  12141  2 001357   000000 236000 1                  LDQ     XSP_ITEMCNT
         2 001360   000001 736000                    QLS     1
         2 001361   000001 471500                    LDP1    1,,PR0
         2 001362   000000 620006                    EAX0    0,QL
         2 001363   100010 236100                    LDQ     8,,PR1
         2 001364   000022 736000                    QLS     18
         2 001365   200005 756110                    STQ     ITEMLIST+1,X0,AUTO

  12167  2 001366   000015 235000 3                  LDA     13
         2 001367   200004 755110                    STA     ITEMLIST,X0,AUTO

  12170  2 001370   000000 054000 1                  AOS     XSP_ITEMCNT

      276    12174    2               DATALVL = 3;

  12174  2 001371   000003 236007                    LDQ     3,DL
         2 001372   200106 756100                    STQ     DATALVL,,AUTO
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:65   
         2 001373   001707 710000 2                  TRA     s:13533

      277    12175        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:66   
      278    12176        /*****************************************************************************
      279    12177        *
      280    12178        *       CPR
      281    12179        *
      282    12180        *****************************************************************************/
      283    12181    2           CASE( %XSP_PEV_CPR);

      284    12182                    %LOAD( LVL=1, TYP=SEQ);  /* CPR */

  12267  2 001374   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001375   000001 735000                    ALS     1
         2 001376   060201 236007                    LDQ     24705,DL
         2 001377   200004 756105                    STQ     ITEMLIST,AL,AUTO

  12270  2 001400   000000 054000 1                  AOS     XSP_ITEMCNT

      285    12274                    %LOAD( LVL=2, TAG=C0, IMP=Y, TYP=BITSTR,
      286    12275                            LEN=1, VAL='1'B);  /* ProtocolVersion */

  12334  2 001401   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001402   000001 735000                    ALS     1
         2 001403   400000 236003                    LDQ     -131072,DU
         2 001404   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  12360  2 001405   000020 236000 3                  LDQ     16
         2 001406   200004 756105                    STQ     ITEMLIST,AL,AUTO

  12363  2 001407   000000 054000 1                  AOS     XSP_ITEMCNT

      287    12367    2               PSAP$ = ADDR( XSP$CONNECT.RESPONDING$->XSC$ADDRESS.PSAP);

  12367  2 001410   000001 471500                    LDP1    1,,PR0
         2 001411   100007 473500                    LDP3    7,,PR1
         2 001412   200112 453500                    STP3    PSAP$,,AUTO

      288    12368                    %LOAD( LVL=2, TAG=C3, IMP=Y, TYP=OCTETSTR,
      289    12369                            LEN="PSAP.LEN", VAL="PSAP.TXT"); /* RespondPresSelector */
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:67   

  12451  2 001413   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001414   000001 735000                    ALS     1
         2 001415   200112 236100                    LDQ     PSAP$,,AUTO
         2 001416   200000 036007                    ADLQ    65536,DL
         2 001417   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  12454  2 001420   000100 101500                    MRL     fill='000'O
         2 001421   300000 000001                    ADSC9   0,,PR3                   cn=0,n=1
         2 001422   200122 000004                    ADSC9   U36+2,,AUTO              cn=0,n=4
         2 001423   200122 236100                    LDQ     U36+2,,AUTO
         2 001424   000022 736000                    QLS     18
         2 001425   203442 036007                    ADLQ    67362,DL
         2 001426   200004 756105                    STQ     ITEMLIST,AL,AUTO

  12457  2 001427   000000 054000 1                  AOS     XSP_ITEMCNT

      290    12461    2               TEMP = 0;

  12461  2 001430   200113 450100                    STZ     TEMP,,AUTO

      291    12462    3               DO I = 1 TO %XSP_MAX_CTXTID;

  12462  2 001431   000001 235007                    LDA     1,DL
         2 001432   200107 755100                    STA     I,,AUTO

      292    12463    3                   IF CMAP.STATE( I) = %XSP_CMAP_RMTDEF THEN

  12463  2 001433   200107 235100                    LDA     I,,AUTO
         2 001434   000001 735000                    ALS     1
         2 001435   200105 470500                    LDP0    CMAP$,,AUTO
         2 001436   000001 236105                    LDQ     1,AL,PR0
         2 001437   000777 376007                    ANQ     511,DL
         2 001440   000003 116007                    CMPQ    3,DL
         2 001441   001443 601000 2                  TNZ     s:12465

      293    12464    3                       TEMP = TEMP + 1;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:68   

  12464  2 001442   200113 054100                    AOS     TEMP,,AUTO

      294    12465    3                   END;

  12465  2 001443   200107 054100                    AOS     I,,AUTO
         2 001444   200107 235100                    LDA     I,,AUTO
         2 001445   000022 115007                    CMPA    18,DL
         2 001446   001433 604400 2                  TMOZ    s:12463

      295    12466    3               IF TEMP > 0 THEN DO;

  12466  2 001447   200113 236100                    LDQ     TEMP,,AUTO
         2 001450   001551 604400 2                  TMOZ    s:12989

      296    12467                       %LOAD( LVL=2, TAG=C5, IMP=Y, TYP=SEQOF); /* PresCtxtDefResultList */

  12552  2 001451   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001452   000001 735000                    ALS     1
         2 001453   245562 236007                    LDQ     84850,DL
         2 001454   200004 756105                    STQ     ITEMLIST,AL,AUTO

  12555  2 001455   000000 054000 1                  AOS     XSP_ITEMCNT

      297    12559    4                   DO I = 1 TO %XSP_MAX_CTXTID;

  12559  2 001456   000001 235007                    LDA     1,DL
         2 001457   200107 755100                    STA     I,,AUTO

      298    12560    5                       IF CMAP.STATE( I) = %XSP_CMAP_RMTDEF THEN DO;

  12560  2 001460   200107 235100                    LDA     I,,AUTO
         2 001461   000001 735000                    ALS     1
         2 001462   200105 470500                    LDP0    CMAP$,,AUTO
         2 001463   000001 236105                    LDQ     1,AL,PR0
         2 001464   000777 376007                    ANQ     511,DL
         2 001465   000003 116007                    CMPQ    3,DL
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:69   
         2 001466   001545 601000 2                  TNZ     s:12933

      299    12561                                %LOAD( LVL=3, TYP=SEQ);

  12646  2 001467   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001470   000001 735000                    ALS     1
         2 001471   060203 236007                    LDQ     24707,DL
         2 001472   200004 756105                    STQ     ITEMLIST,AL,AUTO

  12649  2 001473   000000 054000 1                  AOS     XSP_ITEMCNT

      300    12653                                %LOAD( LVL=4, TAG=C0, IMP=Y, TYP=INTG,
      301    12654                                        LEN=1, VAL="CMAP.RESULT( I)");  /* Result */

  12707  2 001474   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001475   000001 735000                    ALS     1
         2 001476   200107 236100                    LDQ     I,,AUTO
         2 001477   000001 736000                    QLS     1
         2 001500   200105 470500                    LDP0    CMAP$,,AUTO
         2 001501   000001 236106                    LDQ     1,QL,PR0
         2 001502   000011 772000                    QRL     9
         2 001503   000017 376007                    ANQ     15,DL
         2 001504   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  12739  2 001505   000021 236000 3                  LDQ     17
         2 001506   200004 756105                    STQ     ITEMLIST,AL,AUTO

  12742  2 001507   000000 054000 1                  AOS     XSP_ITEMCNT

      302    12746                                %LOAD( LVL=4, TAG=C1, IMP=Y, TYP=OBJID, /*TfrSynName*/
      303    12747                                        VAL="XSP_TFRLIST.CTXT$( CMAP.TFRCTXTID( I))");

  12819  2 001510   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001511   000001 735000                    ALS     1
         2 001512   200107 236100                    LDQ     I,,AUTO
         2 001513   000001 736000                    QLS     1
         2 001514   200105 470500                    LDP0    CMAP$,,AUTO
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:70   
         2 001515   000001 220106                    LDX0    1,QL,PR0
         2 001516   000777 360003                    ANX0    511,DU
         2 001517   000000 471410 xsym               LDP1    XSP_TFRLIST,X0
         2 001520   200122 451500                    STP1    U36+2,,AUTO
         2 001521   200122 236100                    LDQ     U36+2,,AUTO
         2 001522   400000 036007                    ADLQ    -131072,DL
         2 001523   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  12832  2 001524   200107 236100                    LDQ     I,,AUTO
         2 001525   000001 736000                    QLS     1
         2 001526   200105 470500                    LDP0    CMAP$,,AUTO
         2 001527   000001 220106                    LDX0    1,QL,PR0
         2 001530   000777 360003                    ANX0    511,DU
         2 001531   000000 471410 xsym               LDP1    XSP_TFRLIST,X0
         2 001532   100000 236100                    LDQ     0,,PR1
         2 001533   777777 376003                    ANQ     -1,DU
         2 001534   201464 036007                    ADLQ    66356,DL
         2 001535   200004 756105                    STQ     ITEMLIST,AL,AUTO

  12835  2 001536   000000 054000 1                  AOS     XSP_ITEMCNT

      304    12839                                %LOAD( LVL=4, TAG=C2, IMP=Y, TYP=INTG,
      305    12840                                        VAL=0);  /*N* ProviderReason */

  12893  2 001537   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001540   000001 735000                    ALS     1
         2 001541   200005 450105                    STZ     ITEMLIST+1,AL,AUTO

  12925  2 001542   000006 236000 3                  LDQ     6
         2 001543   200004 756105                    STQ     ITEMLIST,AL,AUTO

  12928  2 001544   000000 054000 1                  AOS     XSP_ITEMCNT

      306    12932    5                           END;

      307    12933    4                       END;

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:71   
  12933  2 001545   200107 054100                    AOS     I,,AUTO
         2 001546   200107 235100                    LDA     I,,AUTO
         2 001547   000022 115007                    CMPA    18,DL
         2 001550   001460 604400 2                  TMOZ    s:12560

      308    12934    3                   END;

      309    12935                    %LOAD( LVL=2, TAG=C10, IMP=Y, TYP=INTG,
      310    12936                            VAL=0);  /*N* ProviderReason */

  12989  2 001551   000000 236000 1                  LDQ     XSP_ITEMCNT
         2 001552   000001 736000                    QLS     1
         2 001553   200005 450106                    STZ     ITEMLIST+1,QL,AUTO

  13021  2 001554   000022 235000 3                  LDA     18
         2 001555   200004 755106                    STA     ITEMLIST,QL,AUTO

  13024  2 001556   000000 054000 1                  AOS     XSP_ITEMCNT

      311    13028    2               DATALVL = 2;

  13028  2 001557   000002 236007                    LDQ     2,DL
         2 001560   200106 756100                    STQ     DATALVL,,AUTO
         2 001561   001707 710000 2                  TRA     s:13533

      312    13029        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:72   
      313    13030        /*****************************************************************************
      314    13031        *
      315    13032        *       RS and RSA
      316    13033        *
      317    13034        *****************************************************************************/
      318    13035    2           CASE( %XSP_PEV_RS,

      319    13036    2                 %XSP_PEV_RSA);
      320    13037                    %LOAD( LVL=1, TYP=SEQ);  /* RS */

  13122  2 001562   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001563   000001 735000                    ALS     1
         2 001564   060201 236007                    LDQ     24705,DL
         2 001565   200004 756105                    STQ     ITEMLIST,AL,AUTO

  13125  2 001566   000000 054000 1                  AOS     XSP_ITEMCNT

      321    13129    2               TEMP = 0;

  13129  2 001567   200113 450100                    STZ     TEMP,,AUTO

      322    13130    3               DO I = 1 TO %XSP_MAX_CTXTID;

  13130  2 001570   000001 235007                    LDA     1,DL
         2 001571   200107 755100                    STA     I,,AUTO

      323    13131    3                   IF CMAP.STATE( I) = %XSP_CMAP_ACTIVE THEN

  13131  2 001572   200107 235100                    LDA     I,,AUTO
         2 001573   000001 735000                    ALS     1
         2 001574   200105 470500                    LDP0    CMAP$,,AUTO
         2 001575   000001 236105                    LDQ     1,AL,PR0
         2 001576   000777 376007                    ANQ     511,DL
         2 001577   000005 116007                    CMPQ    5,DL
         2 001600   001602 601000 2                  TNZ     s:13133

      324    13132    3                       TEMP = TEMP + 1;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:73   

  13132  2 001601   200113 054100                    AOS     TEMP,,AUTO

      325    13133    3                   END;

  13133  2 001602   200107 054100                    AOS     I,,AUTO
         2 001603   200107 235100                    LDA     I,,AUTO
         2 001604   000022 115007                    CMPA    18,DL
         2 001605   001572 604400 2                  TMOZ    s:13131

      326    13134    3               IF TEMP > 0 THEN DO;

  13134  2 001606   200113 236100                    LDQ     TEMP,,AUTO
         2 001607   001675 604400 2                  TMOZ    s:13510

      327    13135                        %LOAD( LVL=2, TAG=C0, IMP=Y, TYP=SEQOF); /* PresCtxtIdentList */

  13220  2 001610   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001611   000001 735000                    ALS     1
         2 001612   240562 236007                    LDQ     82290,DL
         2 001613   200004 756105                    STQ     ITEMLIST,AL,AUTO

  13223  2 001614   000000 054000 1                  AOS     XSP_ITEMCNT

      328    13227    4                   DO I = 1 TO %XSP_MAX_CTXTID;

  13227  2 001615   000001 235007                    LDA     1,DL
         2 001616   200107 755100                    STA     I,,AUTO

      329    13228    5                       IF CMAP.STATE( I) = %XSP_CMAP_ACTIVE THEN DO;

  13228  2 001617   200107 235100                    LDA     I,,AUTO
         2 001620   000001 735000                    ALS     1
         2 001621   200105 470500                    LDP0    CMAP$,,AUTO
         2 001622   000001 236105                    LDQ     1,AL,PR0
         2 001623   000777 376007                    ANQ     511,DL
         2 001624   000005 116007                    CMPQ    5,DL
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:74   
         2 001625   001671 601000 2                  TNZ     s:13508

      330    13229                                %LOAD( LVL=3, TYP=SEQ);

  13314  2 001626   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001627   000001 735000                    ALS     1
         2 001630   060203 236007                    LDQ     24707,DL
         2 001631   200004 756105                    STQ     ITEMLIST,AL,AUTO

  13317  2 001632   000000 054000 1                  AOS     XSP_ITEMCNT

      331    13321                                %LOAD( LVL=4, TYP=INTG,
      332    13322                                        VAL=I);  /* PresCtxtIdent */

  13375  2 001633   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001634   000001 735000                    ALS     1
         2 001635   200107 236100                    LDQ     I,,AUTO
         2 001636   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  13407  2 001637   000003 236000 3                  LDQ     3
         2 001640   200004 756105                    STQ     ITEMLIST,AL,AUTO

  13410  2 001641   000000 054000 1                  AOS     XSP_ITEMCNT

      333    13414                                %LOAD( LVL=4, TYP=OBJID,  /* TfrSynName */
      334    13415                                        VAL="XSP_TFRLIST.CTXT$( CMAP.TFRCTXTID( I))");

  13487  2 001642   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001643   000001 735000                    ALS     1
         2 001644   200107 236100                    LDQ     I,,AUTO
         2 001645   000001 736000                    QLS     1
         2 001646   200105 470500                    LDP0    CMAP$,,AUTO
         2 001647   000001 220106                    LDX0    1,QL,PR0
         2 001650   000777 360003                    ANX0    511,DU
         2 001651   000000 471410 xsym               LDP1    XSP_TFRLIST,X0
         2 001652   200122 451500                    STP1    U36+2,,AUTO
         2 001653   200122 236100                    LDQ     U36+2,,AUTO
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:75   
         2 001654   400000 036007                    ADLQ    -131072,DL
         2 001655   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  13500  2 001656   200107 236100                    LDQ     I,,AUTO
         2 001657   000001 736000                    QLS     1
         2 001660   200105 470500                    LDP0    CMAP$,,AUTO
         2 001661   000001 220106                    LDX0    1,QL,PR0
         2 001662   000777 360003                    ANX0    511,DU
         2 001663   000000 471410 xsym               LDP1    XSP_TFRLIST,X0
         2 001664   100000 236100                    LDQ     0,,PR1
         2 001665   777777 376003                    ANQ     -1,DU
         2 001666   006064 036007                    ADLQ    3124,DL
         2 001667   200004 756105                    STQ     ITEMLIST,AL,AUTO

  13503  2 001670   000000 054000 1                  AOS     XSP_ITEMCNT

      335    13507    5                           END;

      336    13508    4                       END;

  13508  2 001671   200107 054100                    AOS     I,,AUTO
         2 001672   200107 235100                    LDA     I,,AUTO
         2 001673   000022 115007                    CMPA    18,DL
         2 001674   001617 604400 2                  TMOZ    s:13228

      337    13509    3                   END;

      338    13510    2               DATALVL = 2;

  13510  2 001675   000002 236007                    LDQ     2,DL
         2 001676   200106 756100                    STQ     DATALVL,,AUTO
         2 001677   001707 710000 2                  TRA     s:13533

      339    13511        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:76   
      340    13512        /*****************************************************************************
      341    13513        *
      342    13514        *       TC, TCC, TD, TE,  and TTD
      343    13515        *
      344    13516        *****************************************************************************/
      345    13517    2           CASE( %XSP_PEV_TC,

      346    13518    2                 %XSP_PEV_TCC,
      347    13519    2                 %XSP_PEV_TD,
      348    13520    2                 %XSP_PEV_TE,
      349    13521    2                 %XSP_PEV_TTD);
      350    13522    2               DATALVL = 1;

  13522  2 001700   000001 235007                    LDA     1,DL
         2 001701   200106 755100                    STA     DATALVL,,AUTO
         2 001702   001707 710000 2                  TRA     s:13533

      351    13523        /*****************************************************************************
      352    13524        *
      353    13525        *       Illegal VBLK.EVENT
      354    13526        *
      355    13527        *****************************************************************************/
      356    13528    2           CASE( ELSE);

      357    13529    2               CALL XSS$SCREECH( XSP_F$ENCODE);

  13529  2 001703   000024 630400 3                  EPPR0   20
         2 001704   000023 631400 3                  EPPR1   19
         2 001705   000000 701000 xent               TSX1    XSS$SCREECH
         2 001706   000000 011000                    NOP     0

      358    13530    2           END;

      359    13531        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:77   
      360    13532            /* handle UserData if present */
      361    13533    2       IF DATALVL > 0 AND AFPT$ ~= ADDR( NIL) THEN DO;

  13533  2 001707   200106 235100                    LDA     DATALVL,,AUTO
         2 001710   002037 604400 2                  TMOZ    s:14102
         2 001711   200104 236100                    LDQ     AFPT$,,AUTO
         2 001712   000025 116000 3                  CMPQ    21
         2 001713   002037 600000 2                  TZE     s:14102

      362    13534    2           IF AFPT.LINK$ = ADDR( NIL) THEN

  13534  2 001714   200104 470500                    LDP0    AFPT$,,AUTO
         2 001715   000004 236100                    LDQ     4,,PR0
         2 001716   000025 116000 3                  CMPQ    21
         2 001717   001734 601000 2                  TNZ     s:13714

      363    13535                    %LOAD( LVL=DATALVL, TAG=A0, IMP=Y, TYP=OCTETSTR,
      364    13536                            LEN="AFPT.NXTX", VAL="AFPT.BUF$"); /* SimplyEncodedData */

  13618  2 001720   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001721   000001 735000                    ALS     1
         2 001722   200104 236100                    LDQ     AFPT$,,AUTO
         2 001723   000001 036003                    ADLQ    1,DU
         2 001724   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  13621  2 001725   000014 236100                    LDQ     12,,PR0
         2 001726   000022 736000                    QLS     18
         2 001727   200106 036100                    ADLQ    DATALVL,,AUTO
         2 001730   100440 036007                    ADLQ    33056,DL
         2 001731   200004 756105                    STQ     ITEMLIST,AL,AUTO

  13624  2 001732   000000 054000 1                  AOS     XSP_ITEMCNT

  13626  2 001733   002037 710000 2                  TRA     s:14102

      365    13628    3           ELSE DO;

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:78   
      366    13629                    %LOAD( LVL=DATALVL, TAG=A1, IMP=Y, TYP=SEQOF);  /* FullyEncodedData */

  13714  2 001734   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001735   000001 735000                    ALS     1
         2 001736   200106 236100                    LDQ     DATALVL,,AUTO
         2 001737   141560 036007                    ADLQ    50032,DL
         2 001740   200004 756105                    STQ     ITEMLIST,AL,AUTO

  13717  2 001741   000000 054000 1                  AOS     XSP_ITEMCNT

      367    13721    3               DATALVL = DATALVL + 1;

  13721  2 001742   200106 054100                    AOS     DATALVL,,AUTO

      368    13722    4               DO WHILE( AFPT$ ~= ADDR( NIL));

  13722  2 001743   002034 710000 2                  TRA     s:14098

      369    13723                        %LOAD( LVL=DATALVL, TYP=SEQ);  /* PDVList */

  13808  2 001744   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001745   000001 735000                    ALS     1
         2 001746   200106 236100                    LDQ     DATALVL,,AUTO
         2 001747   060200 036007                    ADLQ    24704,DL
         2 001750   200004 756105                    STQ     ITEMLIST,AL,AUTO

  13811  2 001751   000000 054000 1                  AOS     XSP_ITEMCNT

      370    13815    4                   DATALVL = DATALVL + 1;

  13815  2 001752   200106 054100                    AOS     DATALVL,,AUTO

      371    13816                        %LOAD( LVL=DATALVL, TYP=OBJID,  /* TfrSynName */
      372    13817                                VAL="XSP_ABSLIST.CTXT$( CMAP.ABSCTXTID( I))");

  13889  2 001753   000000 235000 1                  LDA     XSP_ITEMCNT
         2 001754   000001 735000                    ALS     1
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:79   
         2 001755   200107 236100                    LDQ     I,,AUTO
         2 001756   000001 736000                    QLS     1
         2 001757   200105 470500                    LDP0    CMAP$,,AUTO
         2 001760   000001 236106                    LDQ     1,QL,PR0
         2 001761   000033 772000                    QRL     27
         2 001762   000000 471406 xsym               LDP1    XSP_ABSLIST,QL
         2 001763   200122 451500                    STP1    U36+2,,AUTO
         2 001764   200122 236100                    LDQ     U36+2,,AUTO
         2 001765   400000 036007                    ADLQ    -131072,DL
         2 001766   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  13902  2 001767   200107 236100                    LDQ     I,,AUTO
         2 001770   000001 736000                    QLS     1
         2 001771   200105 470500                    LDP0    CMAP$,,AUTO
         2 001772   000001 236106                    LDQ     1,QL,PR0
         2 001773   000033 772000                    QRL     27
         2 001774   000000 471406 xsym               LDP1    XSP_ABSLIST,QL
         2 001775   100000 236100                    LDQ     0,,PR1
         2 001776   777777 376003                    ANQ     -1,DU
         2 001777   200106 036100                    ADLQ    DATALVL,,AUTO
         2 002000   006060 036007                    ADLQ    3120,DL
         2 002001   200004 756105                    STQ     ITEMLIST,AL,AUTO

  13905  2 002002   000000 054000 1                  AOS     XSP_ITEMCNT

      373    13909                        %LOAD( LVL=DATALVL, TYP=INTG,
      374    13910                                LEN=1, VAL="AFPT.CTXTID");  /* PresCtxtIdent */

  13963  2 002003   000000 235000 1                  LDA     XSP_ITEMCNT
         2 002004   000001 735000                    ALS     1
         2 002005   200104 470500                    LDP0    AFPT$,,AUTO
         2 002006   000000 620005                    EAX0    0,AL
         2 002007   000005 235100                    LDA     5,,PR0
         2 002010   200005 755110                    STA     ITEMLIST+1,X0,AUTO

  13995  2 002011   200106 236100                    LDQ     DATALVL,,AUTO
         2 002012   000026 036000 3                  ADLQ    22
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:80   
         2 002013   200004 756110                    STQ     ITEMLIST,X0,AUTO

  13998  2 002014   000000 054000 1                  AOS     XSP_ITEMCNT

      375    14002                        /*N* for now, assume OCTETSTRING */
      376    14003                        %LOAD( LVL=DATALVL, TAG=C1, IMP=Y, TYP=OCTETSTR,
      377    14004                                LEN="AFPT.NXTX", VAL="AFPT.BUF$");  /* the data */

  14086  2 002015   000000 235000 1                  LDA     XSP_ITEMCNT
         2 002016   000001 735000                    ALS     1
         2 002017   200104 236100                    LDQ     AFPT$,,AUTO
         2 002020   000001 036003                    ADLQ    1,DU
         2 002021   200005 756105                    STQ     ITEMLIST+1,AL,AUTO

  14089  2 002022   000014 236100                    LDQ     12,,PR0
         2 002023   000022 736000                    QLS     18
         2 002024   200106 036100                    ADLQ    DATALVL,,AUTO
         2 002025   201440 036007                    ADLQ    66336,DL
         2 002026   200004 756105                    STQ     ITEMLIST,AL,AUTO

  14092  2 002027   000000 054000 1                  AOS     XSP_ITEMCNT

      378    14096    4                   DATALVL = DATALVL - 1;

  14096  2 002030   000001 336007                    LCQ     1,DL
         2 002031   200106 056100                    ASQ     DATALVL,,AUTO

      379    14097    4                   AFPT$ = AFPT.LINK$;

  14097  2 002032   000004 236100                    LDQ     4,,PR0
         2 002033   200104 756100                    STQ     AFPT$,,AUTO

      380    14098    4                   END;

  14098  2 002034   200104 236100                    LDQ     AFPT$,,AUTO
         2 002035   000025 116000 3                  CMPQ    21
         2 002036   001744 601000 2                  TNZ     s:13808
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:81   

      381    14099    3               END;

      382    14100    2           END;

      383    14101            /* Now, fix up the itemlist and build the PDU */
      384    14102    1       CALL FIXITEMS;

  14102  2 002037   002057 701000 2                  TSX1    FIXITEMS
         2 002040   000000 011000                    NOP     0

      385    14103    1       CALL BUILDPDU;

  14103  2 002041   002302 701000 2                  TSX1    BUILDPDU
         2 002042   000000 011000                    NOP     0

      386    14104            /* Send the constructed PDU on to Session */
      387    14105    1       VBLK.DATA.SIZE = PDUIDX;

  14105  2 002043   200003 470500                    LDP0    @VBLK,,AUTO
         2 002044   200111 235100                    LDA     PDUIDX,,AUTO
         2 002045   000005 755100                    STA     5,,PR0

      388    14106    1       VBLK.DATA.PTR$ = ADDR( PDUBUF);

  14106  2 002046   000027 236000 3                  LDQ     23
         2 002047   000004 756100                    STQ     4,,PR0

      389    14107    1       CALL XSP$SSEND( VBLK)

  14107  2 002050   200003 630500                    EPPR0   @VBLK,,AUTO
         2 002051   000023 631400 3                  EPPR1   19
         2 002052   000000 701000 xent               TSX1    XSP$SSEND
         2 002053   002055 702000 2                  TSX2    s:14109
         2 002054   002056 710000 2                  TRA     s:14111

      390    14108    2       WHENALTRETURN DO;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:82   

      391    14109    2           ALTRETURN;

  14109  2 002055   000000 702200 xent               TSX2  ! X66_AALT

      392    14110    2           END;
      393    14111    1       RETURN;

  14111  2 002056   000000 702200 xent               TSX2  ! X66_ARET

      394    14112        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:83   
      395    14113        /*I*    NAME:   FIXITEMS
      396    14114
      397    14115                FIXITEMS is called to fix the itemlist.  'Fix'ing means trundling
      398    14116                through the list figuring out the lengths of all constructor items
      399    14117                now that we know how big each primitive item is.
      400    14118        */
      401    14119    1   FIXITEMS: PROC;

  14119  2 002057   200114 741300       FIXITEMS     STX1  ! TEMP+1,,AUTO

      402    14120
      403    14121    2       DCL I SBIN;
      404    14122    2       DCL J SBIN;
      405    14123    2       DCL LEN SBIN;
      406    14124    2       DCL LVL SBIN;
      407    14125    2       DCL TMP REDEF LVL SBIN;
      408    14126    2       DCL UTMP REDEF LVL UBIN;
      409    14127
      410    14128    3       DO I = XSP_ITEMCNT - 1 DOWNTO 1;

  14128  2 002060   000000 235000 1                  LDA     XSP_ITEMCNT
         2 002061   000001 135007                    SBLA    1,DL
         2 002062   200115 755100                    STA     I,,AUTO
         2 002063   002276 710000 2                  TRA     s:14174+2

      411    14129    3           IF ITEMLIST.X.TAG( I) = 0 THEN

  14129  2 002064   200115 235100                    LDA     I,,AUTO
         2 002065   000001 735000                    ALS     1
         2 002066   200004 236105                    LDQ     ITEMLIST,AL,AUTO
         2 002067   377000 316007                    CANQ    130560,DL
         2 002070   002076 601000 2                  TNZ     s:14131

      412    14130    3               ITEMLIST.X.TAG( I) = ITEMLIST.X.TYP( I);

  14130  2 002071   000370 376007                    ANQ     248,DL
         2 002072   000006 736000                    QLS     6
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:84   
         2 002073   200004 676105                    ERQ     ITEMLIST,AL,AUTO
         2 002074   377000 376007                    ANQ     130560,DL
         2 002075   200004 656105                    ERSQ    ITEMLIST,AL,AUTO

      413    14131    4           DO CASE( ITEMLIST.X.TYP( I));

  14131  2 002076   200004 236105                    LDQ     ITEMLIST,AL,AUTO
         2 002077   000003 772000                    QRL     3
         2 002100   000037 376007                    ANQ     31,DL
         2 002101   000031 116007                    CMPQ    25,DL
         2 002102   002104 602006 2                  TNC     s:14131+6,QL
         2 002103   002202 710000 2                  TRA     s:14149
         2 002104   002207 710000 2                  TRA     s:14152
         2 002105   002207 710000 2                  TRA     s:14152
         2 002106   002207 710000 2                  TRA     s:14152
         2 002107   002135 710000 2                  TRA     s:14134
         2 002110   002202 710000 2                  TRA     s:14149
         2 002111   002207 710000 2                  TRA     s:14152
         2 002112   002207 710000 2                  TRA     s:14152
         2 002113   002207 710000 2                  TRA     s:14152
         2 002114   002202 710000 2                  TRA     s:14149
         2 002115   002202 710000 2                  TRA     s:14149
         2 002116   002202 710000 2                  TRA     s:14149
         2 002117   002202 710000 2                  TRA     s:14149
         2 002120   002202 710000 2                  TRA     s:14149
         2 002121   002207 710000 2                  TRA     s:14152
         2 002122   002207 710000 2                  TRA     s:14152
         2 002123   002207 710000 2                  TRA     s:14152
         2 002124   002207 710000 2                  TRA     s:14152
         2 002125   002207 710000 2                  TRA     s:14152
         2 002126   002202 710000 2                  TRA     s:14149
         2 002127   002202 710000 2                  TRA     s:14149
         2 002130   002202 710000 2                  TRA     s:14149
         2 002131   002202 710000 2                  TRA     s:14149
         2 002132   002202 710000 2                  TRA     s:14149
         2 002133   002207 710000 2                  TRA     s:14152
         2 002134   002207 710000 2                  TRA     s:14152
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:85   

      414    14132    4               CASE( %XSP_TYP_BITSTR);

      415    14133                        /* Have to convert bitstring lengths to bytelength + slack */
      416    14134    4                   TMP = ITEMLIST.X.LEN( I);

  14134  2 002135   200004 236105                    LDQ     ITEMLIST,AL,AUTO
         2 002136   000022 772000                    QRL     18
         2 002137   200120 756100                    STQ     LVL,,AUTO

      417    14135    4                   IF TMP > 24 THEN

  14135  2 002140   000030 116007                    CMPQ    24,DL
         2 002141   002144 604400 2                  TMOZ    s:14137

      418    14136    4                       TMP = 24;  /* can't hold more than 24 bits in U */

  14136  2 002142   000030 235007                    LDA     24,DL
         2 002143   200120 755100                    STA     LVL,,AUTO

      419    14137    4                   ITEMLIST.X.LEN( I) = ( TMP + 15) / 8;  /* new bytelength */

  14137  2 002144   200115 235100                    LDA     I,,AUTO
         2 002145   000001 735000                    ALS     1
         2 002146   200120 236100                    LDQ     LVL,,AUTO
         2 002147   000017 036007                    ADLQ    15,DL
         2 002150   000000 620005                    EAX0    0,AL
         2 002151   000010 506007                    DIV     8,DL
         2 002152   000000 621006                    EAX1    0,QL
         2 002153   200004 741110                    STX1    ITEMLIST,X0,AUTO

      420    14138    4                   UTMP = BITBIN( '007'O & BINBIT( 8-MOD( TMP, 8), 9)); /*slack*/

  14138  2 002154   200120 236100                    LDQ     LVL,,AUTO
         2 002155   000010 506007                    DIV     8,DL
         2 002156   000044 733000                    LRS     36
         2 002157   000030 676000 3                  ERQ     24
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:86   
         2 002160   000011 036007                    ADLQ    9,DL
         2 002161   000033 736000                    QLS     27
         2 002162   000022 772000                    QRL     18
         2 002163   000000 620006                    EAX0    0,QL
         2 002164   007000 360003                    ANX0    3584,DU
         2 002165   000000 636010                    EAQ     0,X0
         2 002166   000033 772000                    QRL     27
         2 002167   200120 756100                    STQ     LVL,,AUTO

      421    14139    4                   ITEMLIST.U( I) = UTMP*268435456 + ITEMLIST.U( I)/256;

  14139  2 002170   200115 235100                    LDA     I,,AUTO
         2 002171   000001 735000                    ALS     1
         2 002172   200005 236105                    LDQ     ITEMLIST+1,AL,AUTO
         2 002173   000010 772000                    QRL     8
         2 002174   200122 756100                    STQ     U36+2,,AUTO
         2 002175   200120 236100                    LDQ     LVL,,AUTO
         2 002176   000034 736000                    QLS     28
         2 002177   200122 036100                    ADLQ    U36+2,,AUTO
         2 002200   200005 756105                    STQ     ITEMLIST+1,AL,AUTO
         2 002201   002207 710000 2                  TRA     s:14152

      422    14140                        /* U now has slack in highest 8 bits, followed by value */
      423    14141    4               CASE( %XSP_TYP_NONE, %XSP_TYP_BOOL, %XSP_TYP_INTG,

      424    14142    4                     %XSP_TYP_NULL, %XSP_TYP_SEQ, %XSP_TYP_SET,
      425    14143    4                     %XSP_TYP_UTCTIM, %XSP_TYP_GENTIM, %XSP_TYP_CHOICE,
      426    14144    4                     %XSP_TYP_SEQOF, %XSP_TYP_SETOF);
      427    14145                        /* do nothing */
      428    14146    4               CASE( %XSP_TYP_OBJID, %XSP_TYP_OBJDSCR);

      429    14147    4                   ;  /*N* figure out final length by test-encoding */
      430    14148    4               CASE( ELSE);

      431    14149    4                   IF ITEMLIST.P( I) = ADDR( NIL) THEN

  14149  2 002202   200005 236105                    LDQ     ITEMLIST+1,AL,AUTO
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:87   
         2 002203   000025 116000 3                  CMPQ    21
         2 002204   002207 601000 2                  TNZ     s:14152

      432    14150    4                       ITEMLIST.X.LEN( I) = 0;  /* don't address NIL segment */

  14150  2 002205   000000 220003                    LDX0    0,DU
         2 002206   200004 740105                    STX0    ITEMLIST,AL,AUTO

      433    14151    4               END;

      434    14152    3           LEN = 1;  /* 1 byte to represent length */

  14152  2 002207   000001 236007                    LDQ     1,DL
         2 002210   200117 756100                    STQ     LEN,,AUTO

      435    14153    3           TMP = ITEMLIST.X.LEN( I);

  14153  2 002211   200004 236105                    LDQ     ITEMLIST,AL,AUTO
         2 002212   000022 772000                    QRL     18
         2 002213   200120 756100                    STQ     LVL,,AUTO

      436    14154    3           IF TMP > 127 THEN

  14154  2 002214   000177 116007                    CMPQ    127,DL
         2 002215   002226 604400 2                  TMOZ    s:14160

      437    14155    4               DO WHILE( TMP > 0);

  14155  2 002216   000000 116003                    CMPQ    0,DU
         2 002217   002226 604400 2                  TMOZ    s:14160

      438    14156    4                   LEN = LEN + 1;  /* add another byte to represent length */

  14156  2 002220   200117 054100                    AOS     LEN,,AUTO

      439    14157    4                   TMP = TMP / 256;  /* keep going to find length of length */

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:88   
  14157  2 002221   200120 236100                    LDQ     LVL,,AUTO
         2 002222   000400 506007                    DIV     256,DL
         2 002223   200120 756100                    STQ     LVL,,AUTO

      440    14158    4                   END;

  14158  2 002224   000000 116003                    CMPQ    0,DU
         2 002225   002220 605400 2                  TPNZ    s:14156

      441    14159                /* now add length of item itself */
      442    14160    3           LEN = LEN + ITEMLIST.X.LEN( I);

  14160  2 002226   200115 235100                    LDA     I,,AUTO
         2 002227   000001 735000                    ALS     1
         2 002230   200004 236105                    LDQ     ITEMLIST,AL,AUTO
         2 002231   000022 772000                    QRL     18
         2 002232   200117 036100                    ADLQ    LEN,,AUTO
         2 002233   200117 756100                    STQ     LEN,,AUTO

      443    14161                /* add length of tag if a tag will be encoded */
      444    14162    3           IF ITEMLIST.X.TAG( I) ~= %XSP_TYP_NONE OR

  14162  2 002234   200004 236105                    LDQ     ITEMLIST,AL,AUTO
         2 002235   377000 316007                    CANQ    130560,DL
         2 002236   002243 601000 2                  TNZ     s:14165
         2 002237   000370 316007                    CANQ    248,DL
         2 002240   002244 600000 2                  TZE     s:14166
         2 002241   000400 316007                    CANQ    256,DL
         2 002242   002244 601000 2                  TNZ     s:14166

      445    14163    3                   ( ITEMLIST.X.TYP( I) ~= %XSP_TYP_NONE AND
      446    14164    3                   ITEMLIST.X.IMP( I) = 0) THEN
      447    14165    3               LEN = LEN + 1;  /* assume all tags 1 byte long... */

  14165  2 002243   200117 054100                    AOS     LEN,,AUTO

      448    14166    3           LVL = ITEMLIST.X.LVL( I) - 1;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:89   

  14166  2 002244   200004 236105                    LDQ     ITEMLIST,AL,AUTO
         2 002245   000007 376007                    ANQ     7,DL
         2 002246   000001 136007                    SBLQ    1,DL
         2 002247   200120 756100                    STQ     LVL,,AUTO

      449    14167    3   INCRLOOP:
      450    14168    4           DO J = I - 1 DOWNTO 0;

  14168  2 002250   200115 235100       INCRLOOP     LDA     I,,AUTO
         2 002251   000001 135007                    SBLA    1,DL
         2 002252   200116 755100                    STA     J,,AUTO
         2 002253   002272 710000 2                  TRA     s:14173+2

      451    14169    5               IF LVL = ITEMLIST.X.LVL( J) THEN DO;

  14169  2 002254   200116 235100                    LDA     J,,AUTO
         2 002255   000001 735000                    ALS     1
         2 002256   200004 236105                    LDQ     ITEMLIST,AL,AUTO
         2 002257   000007 376007                    ANQ     7,DL
         2 002260   200120 116100                    CMPQ    LVL,,AUTO
         2 002261   002270 601000 2                  TNZ     s:14173

      452    14170    5                   ITEMLIST.X.LEN( J) = LEN + ITEMLIST.X.LEN( J);

  14170  2 002262   200004 236105                    LDQ     ITEMLIST,AL,AUTO
         2 002263   000022 772000                    QRL     18
         2 002264   200117 036100                    ADLQ    LEN,,AUTO
         2 002265   000000 620006                    EAX0    0,QL
         2 002266   200004 740105                    STX0    ITEMLIST,AL,AUTO

      453    14171    5                   EXIT INCRLOOP;

  14171  2 002267   002274 710000 2                  TRA     s:14174

      454    14172    5                   END;
      455    14173    4               END;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:90   

  14173  2 002270   000001 336007                    LCQ     1,DL
         2 002271   200116 056100                    ASQ     J,,AUTO
         2 002272   200116 235100                    LDA     J,,AUTO
         2 002273   002254 605000 2                  TPL     s:14169

      456    14174    3           END;

  14174  2 002274   000001 336007                    LCQ     1,DL
         2 002275   200115 056100                    ASQ     I,,AUTO
         2 002276   200115 235100                    LDA     I,,AUTO
         2 002277   002064 605400 2                  TPNZ    s:14129

      457    14175    2       RETURN;

  14175  2 002300   200114 221300                    LDX1  ! TEMP+1,,AUTO
         2 002301   000001 702211                    TSX2  ! 1,X1

      458    14176
      459    14177    2       END FIXITEMS;
      460    14178        %EJECT;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:91   
      461    14179        /*I*    NAME:   BUILDPDU
      462    14180
      463    14181                BUILDPDU is called to actually construct the PPDU from the itemlist.
      464    14182        */
      465    14183    1   BUILDPDU: PROC;

  14183  2 002302   200114 741300       BUILDPDU     STX1  ! TEMP+1,,AUTO

      466    14184
      467    14185    2       DCL BYTES CHAR( LEN) BASED;
      468    14186    2       DCL I SBIN;
      469    14187    2       DCL LEN SBIN;
      470    14188    2       DCL TMP SBIN;
      471    14189    2       DCL U36(0:1) UBIN;
      472    14190    2       DCL U8(0:8) REDEF U36 UBIN(8) UNAL;
      473    14191        %MACRO STORBYTE( BYT=0);
      474    14192            CALL INSERT( PDUBUF, PDUIDX, 1, BINASC( BYT));
      475    14193            PDUIDX = PDUIDX + 1;
      476    14194        %MEND;
      477    14195
      478    14196    2       PDUIDX = 0;

  14196  2 002303   200111 450100                    STZ     PDUIDX,,AUTO

      479    14197    2       XSP_ITEMCNT = XSP_ITEMCNT - 1;

  14197  2 002304   000001 336007                    LCQ     1,DL
         2 002305   000000 056000 1                  ASQ     XSP_ITEMCNT

      480    14198            /* Construct each item of the itemlist in turn.  Item 0 not used. */
      481    14199    3       DO I = 1 TO XSP_ITEMCNT;

  14199  2 002306   000001 235007                    LDA     1,DL
         2 002307   200115 755100                    STA     I,,AUTO
         2 002310   002602 710000 2                  TRA     NEXTITEM+1

      482    14200                /* Move the TAG field into the PDU buffer */
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:92   
      483    14201                %STORBYTE( BYT="ITEMLIST.X.TAG( I)");

  14202  2 002311   200115 235100                    LDA     I,,AUTO
         2 002312   000001 735000                    ALS     1
         2 002313   200004 236105                    LDQ     ITEMLIST,AL,AUTO
         2 002314   000011 772000                    QRL     9
         2 002315   000377 376007                    ANQ     255,DL
         2 002316   000033 736000                    QLS     27
         2 002317   000031 276000 3                  ORQ     25
         2 002320   200122 756100                    STQ     U36+2,,AUTO
         2 002321   200111 235100                    LDA     PDUIDX,,AUTO
         2 002322   040005 100500                    MLR     fill='040'O
         2 002323   200122 000004                    ADSC9   U36+2,,AUTO              cn=0,n=4
         2 002324   000002 000001 1                  ADSC9   PDUBUF,A                 cn=0,n=1

  14203  2 002325   200111 054100                    AOS     PDUIDX,,AUTO

      484    14205                /* Move the length into the PDU buffer */
      485    14206    3           TMP = ITEMLIST.X.LEN( I);

  14206  2 002326   200115 235100                    LDA     I,,AUTO
         2 002327   000001 735000                    ALS     1
         2 002330   200004 236105                    LDQ     ITEMLIST,AL,AUTO
         2 002331   000022 772000                    QRL     18
         2 002332   200117 756100                    STQ     TMP,,AUTO

      486    14207    4           IF TMP > 127 THEN DO;

  14207  2 002333   000177 116007                    CMPQ    127,DL
         2 002334   002376 604400 2                  TMOZ    s:14223

      487    14208    4               LEN = 0;

  14208  2 002335   200116 450100                    STZ     LEN,,AUTO

      488    14209    5               DO WHILE( TMP > 0);

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:93   
  14209  2 002336   000000 116003                    CMPQ    0,DU
         2 002337   002346 604400 2                  TMOZ    s:14214

      489    14210    5                   LEN = LEN + 1;

  14210  2 002340   200116 054100                    AOS     LEN,,AUTO

      490    14211    5                   TMP = TMP / 256;

  14211  2 002341   200117 236100                    LDQ     TMP,,AUTO
         2 002342   000400 506007                    DIV     256,DL
         2 002343   200117 756100                    STQ     TMP,,AUTO

      491    14212    5                   END;

  14212  2 002344   000000 116003                    CMPQ    0,DU
         2 002345   002340 605400 2                  TPNZ    s:14210

      492    14213                    %STORBYTE( BYT="LEN+128");

  14214  2 002346   200116 236100                    LDQ     LEN,,AUTO
         2 002347   000200 036007                    ADLQ    128,DL
         2 002350   000033 736000                    QLS     27
         2 002351   000031 276000 3                  ORQ     25
         2 002352   200122 756100                    STQ     U36+2,,AUTO
         2 002353   200111 235100                    LDA     PDUIDX,,AUTO
         2 002354   040005 100500                    MLR     fill='040'O
         2 002355   200122 000004                    ADSC9   U36+2,,AUTO              cn=0,n=4
         2 002356   000002 000001 1                  ADSC9   PDUBUF,A                 cn=0,n=1

  14215  2 002357   200111 054100                    AOS     PDUIDX,,AUTO

      493    14217    4               CALL INSERT( PDUBUF, PDUIDX, LEN,

  14217  2 002360   200115 336100                    LCQ     I,,AUTO
         2 002361   000003 736000                    QLS     3
         2 002362   200116 036100                    ADLQ    LEN,,AUTO
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:94   
         2 002363   000030 676000 3                  ERQ     24
         2 002364   000001 036007                    ADLQ    1,DL
         2 002365   200116 720100                    LXL0    LEN,,AUTO
         2 002366   200111 235100                    LDA     PDUIDX,,AUTO
         2 002367   040045 100546                    MLR     fill='040'O
         2 002370   200005 000010                    ADSC9   ITEMLIST+1,Q,AUTO        cn=0,n=*X0
         2 002371   000002 000010 1                  ADSC9   PDUBUF,A                 cn=0,n=*X0

      494    14218    4                       PINCRC( ADDR( ITEMLIST.X.LEN( I)), 4 - LEN)->BYTES);
      495    14219    4               PDUIDX = PDUIDX + LEN;

  14219  2 002372   200111 236100                    LDQ     PDUIDX,,AUTO
         2 002373   200116 036100                    ADLQ    LEN,,AUTO
         2 002374   200111 756100                    STQ     PDUIDX,,AUTO

      496    14220    4               END;

  14220  2 002375   002406 710000 2                  TRA     s:14229

      497    14221    4           ELSE DO;

      498    14222                    %STORBYTE( BYT="TMP");

  14223  2 002376   000033 736000                    QLS     27
         2 002377   000031 276000 3                  ORQ     25
         2 002400   200122 756100                    STQ     U36+2,,AUTO
         2 002401   200111 235100                    LDA     PDUIDX,,AUTO
         2 002402   040005 100500                    MLR     fill='040'O
         2 002403   200122 000004                    ADSC9   U36+2,,AUTO              cn=0,n=4
         2 002404   000002 000001 1                  ADSC9   PDUBUF,A                 cn=0,n=1

  14224  2 002405   200111 054100                    AOS     PDUIDX,,AUTO

      499    14226    4               END;

      500    14227    3           ;  /*N* handle case where TYP~=TAG and not IMP */
      501    14228                /* And finally.... move the value itself into the PDU buffer */
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:95   
      502    14229    3           LEN = ITEMLIST.X.LEN( I);

  14229  2 002406   200115 235100                    LDA     I,,AUTO
         2 002407   000001 735000                    ALS     1
         2 002410   200004 236105                    LDQ     ITEMLIST,AL,AUTO
         2 002411   000022 772000                    QRL     18
         2 002412   200116 756100                    STQ     LEN,,AUTO

      503    14230    4           DO CASE( ITEMLIST.X.TYP( I));

  14230  2 002413   200004 236105                    LDQ     ITEMLIST,AL,AUTO
         2 002414   000003 772000                    QRL     3
         2 002415   000037 376007                    ANQ     31,DL
         2 002416   000031 116007                    CMPQ    25,DL
         2 002417   002421 602006 2                  TNC     s:14230+6,QL
         2 002420   002563 710000 2                  TRA     COMMON
         2 002421   002452 710000 2                  TRA     s:14236
         2 002422   002454 710000 2                  TRA     s:14238
         2 002423   002472 710000 2                  TRA     s:14251
         2 002424   002523 710000 2                  TRA     s:14262
         2 002425   002563 710000 2                  TRA     COMMON
         2 002426   002452 710000 2                  TRA     s:14236
         2 002427   002560 710000 2                  TRA     s:14277
         2 002430   002560 710000 2                  TRA     s:14277
         2 002431   002563 710000 2                  TRA     COMMON
         2 002432   002563 710000 2                  TRA     COMMON
         2 002433   002563 710000 2                  TRA     COMMON
         2 002434   002563 710000 2                  TRA     COMMON
         2 002435   002563 710000 2                  TRA     COMMON
         2 002436   002452 710000 2                  TRA     s:14236
         2 002437   002452 710000 2                  TRA     s:14236
         2 002440   002452 710000 2                  TRA     s:14236
         2 002441   002452 710000 2                  TRA     s:14236
         2 002442   002452 710000 2                  TRA     s:14236
         2 002443   002563 710000 2                  TRA     COMMON
         2 002444   002563 710000 2                  TRA     COMMON
         2 002445   002563 710000 2                  TRA     COMMON
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:96   
         2 002446   002563 710000 2                  TRA     COMMON
         2 002447   002563 710000 2                  TRA     COMMON
         2 002450   002561 710000 2                  TRA     s:14280
         2 002451   002561 710000 2                  TRA     s:14280

      504    14231    4               CASE( %XSP_TYP_NONE, %XSP_TYP_NULL,

      505    14232    4                     %XSP_TYP_SEQ, %XSP_TYP_SEQOF,
      506    14233    4                     %XSP_TYP_SET, %XSP_TYP_SETOF,
      507    14234    4                     %XSP_TYP_CHOICE);
      508    14235                        /* Set LEN zero so not to incr PDUIDX for enclosing item */
      509    14236    4                   LEN = 0;

  14236  2 002452   200116 450100                    STZ     LEN,,AUTO
         2 002453   002576 710000 2                  TRA     s:14286

      510    14237    4               CASE( %XSP_TYP_BOOL);  /* boolean */

      511    14238    5                   IF ITEMLIST.S( I) ~= 0 THEN DO;

  14238  2 002454   200005 235105                    LDA     ITEMLIST+1,AL,AUTO
         2 002455   002464 600000 2                  TZE     s:14246

      512    14239                            %STORBYTE( BYT="511");

  14240  2 002456   200111 235100                    LDA     PDUIDX,,AUTO
         2 002457   040005 100400                    MLR     fill='040'O
         2 002460   000032 000001 3                  ADSC9   26                       cn=0,n=1
         2 002461   000002 000001 1                  ADSC9   PDUBUF,A                 cn=0,n=1

  14241  2 002462   200111 054100                    AOS     PDUIDX,,AUTO

      513    14243    5                       END;

  14243  2 002463   002576 710000 2                  TRA     s:14286

      514    14244    5                   ELSE DO;
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:97   

      515    14245                            %STORBYTE( BYT="0");

  14246  2 002464   200111 235100                    LDA     PDUIDX,,AUTO
         2 002465   040005 100400                    MLR     fill='040'O
         2 002466   000031 000001 3                  ADSC9   25                       cn=0,n=1
         2 002467   000002 000001 1                  ADSC9   PDUBUF,A                 cn=0,n=1

  14247  2 002470   200111 054100                    AOS     PDUIDX,,AUTO

      516    14249    5                       END;

  14249  2 002471   002576 710000 2                  TRA     s:14286

      517    14250    4               CASE( %XSP_TYP_INTG);  /* signed integer of length LEN */

      518    14251    4                   U36(0) = 0;

  14251  2 002472   200120 450100                    STZ     U36,,AUTO

      519    14252    4                   U36(1) = ITEMLIST.U( I);

  14252  2 002473   200005 235105                    LDA     ITEMLIST+1,AL,AUTO
         2 002474   200121 755100                    STA     U36+1,,AUTO

      520    14253    5                   DO WHILE( LEN > 0);

  14253  2 002475   200116 236100                    LDQ     LEN,,AUTO
         2 002476   002522 604400 2                  TMOZ    s:14260

      521    14254                            %STORBYTE( BYT="U8( 9 - LEN)");

  14255  2 002477   200116 335100                    LCA     LEN,,AUTO
         2 002500   000003 735000                    ALS     3
         2 002501   002503 605000 2                  TPL     s:14255+4
         2 002502   000044 035003                    ADLA    36,DU
         2 002503   003100 061505                    CSR     bolr='003'O
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:98   
         2 002504   200122 000010                    BDSC    U36+2,A,AUTO             by=0,bit=0,n=8
         2 002505   200122 000044                    BDSC    U36+2,,AUTO              by=0,bit=0,n=36
         2 002506   200122 236100                    LDQ     U36+2,,AUTO
         2 002507   000033 736000                    QLS     27
         2 002510   000031 276000 3                  ORQ     25
         2 002511   200123 756100                    STQ     U36+3,,AUTO
         2 002512   200111 235100                    LDA     PDUIDX,,AUTO
         2 002513   040005 100500                    MLR     fill='040'O
         2 002514   200123 000004                    ADSC9   U36+3,,AUTO              cn=0,n=4
         2 002515   000002 000001 1                  ADSC9   PDUBUF,A                 cn=0,n=1

  14256  2 002516   200111 054100                    AOS     PDUIDX,,AUTO

      522    14258    5                       LEN = LEN - 1;

  14258  2 002517   000001 336007                    LCQ     1,DL
         2 002520   200116 056100                    ASQ     LEN,,AUTO

      523    14259    5                       END;

  14259  2 002521   002477 605400 2                  TPNZ    s:14255

      524    14260    4                   GOTO NEXTITEM;

  14260  2 002522   002601 710000 2                  TRA     NEXTITEM

      525    14261    4               CASE( %XSP_TYP_BITSTR);  /* left-justified bitstring */

      526    14262    4                   U36(0) = ITEMLIST.U( I);

  14262  2 002523   200005 235105                    LDA     ITEMLIST+1,AL,AUTO
         2 002524   200120 755100                    STA     U36,,AUTO

      527    14263    4                   U36(1) = 0;

  14263  2 002525   200121 450100                    STZ     U36+1,,AUTO

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:99   
      528    14264    4                   TMP = 0;

  14264  2 002526   200117 450100                    STZ     TMP,,AUTO

      529    14265    4                   IF LEN > 0 THEN

  14265  2 002527   200116 236100                    LDQ     LEN,,AUTO
         2 002530   002557 604400 2                  TMOZ    s:14273

      530    14266    5                       DO WHILE( TMP < LEN);

  14266  2 002531   200117 116100                    CMPQ    TMP,,AUTO
         2 002532   002557 604400 2                  TMOZ    s:14273

      531    14267                            %STORBYTE( BYT="U8( TMP)");

  14268  2 002533   200117 235100                    LDA     TMP,,AUTO
         2 002534   000003 735000                    ALS     3
         2 002535   002537 605000 2                  TPL     s:14268+4
         2 002536   000044 035003                    ADLA    36,DU
         2 002537   003100 061505                    CSR     bolr='003'O
         2 002540   200120 000010                    BDSC    U36,A,AUTO               by=0,bit=0,n=8
         2 002541   200122 000044                    BDSC    U36+2,,AUTO              by=0,bit=0,n=36
         2 002542   200122 236100                    LDQ     U36+2,,AUTO
         2 002543   000033 736000                    QLS     27
         2 002544   000031 276000 3                  ORQ     25
         2 002545   200123 756100                    STQ     U36+3,,AUTO
         2 002546   200111 235100                    LDA     PDUIDX,,AUTO
         2 002547   040005 100500                    MLR     fill='040'O
         2 002550   200123 000004                    ADSC9   U36+3,,AUTO              cn=0,n=4
         2 002551   000002 000001 1                  ADSC9   PDUBUF,A                 cn=0,n=1

  14269  2 002552   200111 054100                    AOS     PDUIDX,,AUTO

      532    14271    5                       TMP = TMP + 1;

  14271  2 002553   200117 054100                    AOS     TMP,,AUTO
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:100  

      533    14272    5                       END;

  14272  2 002554   200117 236100                    LDQ     TMP,,AUTO
         2 002555   200116 116100                    CMPQ    LEN,,AUTO
         2 002556   002533 604000 2                  TMI     s:14268

      534    14273    4                   GOTO NEXTITEM;

  14273  2 002557   002601 710000 2                  TRA     NEXTITEM

      535    14274    4               CASE( %XSP_TYP_OBJID,

      536    14275    4                     %XSP_TYP_OBJDSCR);
      537    14276    4                   ;  /*N* Encode into temp buffer, then move bytes in */
      538    14277    4                   GOTO COMMON;  /*N* But for now, just move raw text... */

  14277  2 002560   002563 710000 2                  TRA     COMMON

      539    14278    4               CASE( %XSP_TYP_UTCTIM,

      540    14279    4                     %XSP_TYP_GENTIM);  /* UTS to be converted to ISO time */
      541    14280    4                   LEN = 0;  /*N* worry about this later... */

  14280  2 002561   200116 450100                    STZ     LEN,,AUTO
         2 002562   002576 710000 2                  TRA     s:14286

      542    14281    4               CASE( ELSE);  /* anything else is pointer to LEN bytes of text */

      543    14282    4   COMMON:
      544    14283    4                   IF LEN > 0 THEN

  14283  2 002563   200116 235100       COMMON       LDA     LEN,,AUTO
         2 002564   002576 604400 2                  TMOZ    s:14286

      545    14284    4                       CALL INSERT( PDUBUF, PDUIDX, LEN, ITEMLIST.P( I)->BYTES);

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:101  
  14284  2 002565   200115 236100                    LDQ     I,,AUTO
         2 002566   000001 736000                    QLS     1
         2 002567   200005 470506                    LDP0    ITEMLIST+1,QL,AUTO
         2 002570   000000 620005                    EAX0    0,AL
         2 002571   200116 721100                    LXL1    LEN,,AUTO
         2 002572   200111 235100                    LDA     PDUIDX,,AUTO
         2 002573   040045 100540                    MLR     fill='040'O
         2 002574   000000 000010                    ADSC9   0,,PR0                   cn=0,n=*X0
         2 002575   000002 000011 1                  ADSC9   PDUBUF,A                 cn=0,n=*X1

      546    14285    4               END;

      547    14286    3           PDUIDX = LEN + PDUIDX;

  14286  2 002576   200116 236100                    LDQ     LEN,,AUTO
         2 002577   200111 036100                    ADLQ    PDUIDX,,AUTO
         2 002600   200111 756100                    STQ     PDUIDX,,AUTO

      548    14287    3   NEXTITEM:
      549    14288    3           END;

  14288  2 002601   200115 054100       NEXTITEM     AOS     I,,AUTO
         2 002602   200115 236100                    LDQ     I,,AUTO
         2 002603   000000 116000 1                  CMPQ    XSP_ITEMCNT
         2 002604   002311 604400 2                  TMOZ    s:14202

      550    14289    2       RETURN;

  14289  2 002605   200114 221300                    LDX1  ! TEMP+1,,AUTO
         2 002606   000001 702211                    TSX2  ! 1,X1

XSP_F$ENCODE
 Sect OctLoc
   0     000   302320 001327                                                    ....

EVIDMAP
 Sect OctLoc
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:102  
   0     001   777005 006004   003000 001002   014015 012013   007011 010***    ................

XSP_ITEMCNT
 Sect OctLoc
   1     000   000000 000000                                                    ....

(unnamed)
 Sect OctLoc
   1     001   000000 000037                                                    ....

PDUBUF
 Sect OctLoc
   1     002   ****** ******   ****** ******   ****** ******   ****** ******    ................

(unnamed)
 Sect OctLoc
   3     000   000002 000000   000014 400000   000000 000000   000004 002024    ................
   3     004   000004 002023   000004 200424   000004 202424   000004 200422    ................
   3     010   000004 201422   000001 200023   000001 200433   000004 002025    ................
   3     014   000002 210433   000013 211433   000001 200425   000004 202425    ................
   3     020   000001 200432   000001 200424   000004 212422   000001 000000    ................
   3     024   000000 006000   000000 006014   000001 002020   000002 006000    ................
   3     030   777777 777777   000040 040040   777040 040040                    .....   .
      551    14290
      552    14291    2       END BUILDPDU;
      553    14292
      554    14293    1       END XSP$ENCODE;
      555    14294        %EOD;

PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:103  
--  Include file information  --

   XSC_PERR_C.:XSA1TOU  is referenced.
   UM_CP6.:E05OU  is referenced.
   XSC_COMMON_M.:XSA1TOU  is referenced.
   K_ADDRESS_M.:LIB_E05  is referenced.
   XSP_INTERNAL_M.:XSA1TOU  is referenced.
   XSP_INTERNAL_E.:XSA1TOU  is referenced.
   XSP_PRESENTATION_M.:XSA1TOU  is referenced.
   XSP_PRESENTATION_E.:XSA1TOU  is referenced.
   XSS_SESSION_E.:XSA1TOU  is referenced.
   XSP_ASN1_M.:XSA1TOU  is referenced.
      No diagnostics issued in procedure XSP$ENCODE.
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:104  

 **** Variables and constants ****

  ****  Section 000 RoData XSP$ENCODE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     1-0-0/c UBIN(9)     r     1 EVIDMAP(0:14)              0-0-0/w STRC        r     1 XSP_F$ENCODE

  ****  Section 001  Data  XSP$ENCODE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     2-0-0/c CHAR(128)   r     1 PDUBUF                     0-0-0/w SBIN        r     1 XSP_ITEMCNT

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @VBLK                    104-0-0/w PTR         r     1 AFPT$
   105-0-0/w PTR         r     1 CMAP$                    106-0-0/w SBIN        r     1 DATALVL
   107-0-0/w SBIN        r     1 I                        115-0-0/w SBIN        r     1 I
   115-0-0/w SBIN        r     1 I
     4-0-0/w STRC(72)    r     1 ITEMLIST(0:31)
   116-0-0/w SBIN        r     1 J                        117-0-0/w SBIN        r     1 LEN
   116-0-0/w SBIN        r     1 LEN                      120-0-0/w SBIN        r     1 LVL
   111-0-0/w SBIN        r     1 PDUIDX                   112-0-0/w PTR         r     1 PSAP$
   113-0-0/w SBIN        r     1 TEMP                     120-0-0/w SBIN        r     1 TMP
   117-0-0/w SBIN        r     1 TMP                      120-0-0/w UBIN        r     1 U36(0:1)
   120-0-0/w UBIN(8)     r     1 U8(0:8)                  120-0-0/w UBIN        r     1 UTMP
    *0-0-0/d STRC(396)   r     1 VBLK

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:105  
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC        r     1 XSP_ABSLIST                0-0-0/w STRC        r     1 XSP_TFRLIST

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(504)   r     1 AFPT                       0-0-0/c ACHR        r     1 BYTES
     0-0-0/w STRC(72)    r     1 CMAP(0:0)                  0-0-0/w ASTR(18)    r     1 CTXT
     0-0-0/w STRC(468)   r     1 PCTX                       0-0-0/c ASTR(9)     r     1 PSAP
     0-0-0/w STRC(2718)  r     1 XSC$ADDRESS                0-0-0/w STRC(398)   r     1 XSP$CONNECT
     0-0-0/w STRC(504)   r     1 XSP$GENERIC


   Procedure XSP$ENCODE requires 1415 words for executable code.
   Procedure XSP$ENCODE requires 86 words of local(AUTO) storage.
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:106  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:107  
          MINI XREF LISTING

AFPT.BUF$
       377**DCL     13618--ASSIGN  14086--ASSIGN
AFPT.C0
       379**DCL       379--REDEF
AFPT.CTXTID
       378**DCL     13963>>ASSIGN
AFPT.DAT$
       381**DCL       381--REDEF
AFPT.LINK$
       378**DCL     13534>>IF      14097>>ASSIGN
AFPT.N0
       380**DCL       380--REDEF
AFPT.NXTX
       380**DCL     13621>>ASSIGN  14089>>ASSIGN
AFPT.R0
       378**DCL       379--REDEF
AFPT$
      6772**DCL       373--IMP-PTR  6785<<ASSIGN  13533>>IF      13534>>IF      13618>>ASSIGN  13621>>ASSIGN
     13722>>DOWHILE 13963>>ASSIGN  14086>>ASSIGN  14089>>ASSIGN  14097<<ASSIGN  14097>>ASSIGN
BUILDPDU
     14183**PROC    14103--CALL
BYTES IN PROCEDURE BUILDPDU
     14185**DCL     14217>>CALLBLT 14284>>CALLBLT
CMAP.ABSCTXTID
      4121**DCL      7334>>ASSIGN   7347>>ASSIGN  10278>>ASSIGN  10291>>ASSIGN  10652>>ASSIGN  10665>>ASSIGN
     13889>>ASSIGN  13902>>ASSIGN
CMAP.RESULT
      4127**DCL      8079>>ASSIGN   8461>>ASSIGN  11760>>ASSIGN  12707>>ASSIGN
CMAP.STATE
      4128**DCL      7075>>IF       7637>>IF       7835>>IF       7932>>IF       8309>>IF       8406>>IF
      8890>>IF       8987>>IF      10020>>IF      11516>>IF      11613>>IF      12463>>IF      12560>>IF
     13131>>IF      13228>>IF
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:108  
CMAP.TFRCTXTID
      4122**DCL      7520>>ASSIGN   7533>>ASSIGN   8191>>ASSIGN   8204>>ASSIGN   9246>>ASSIGN   9259>>ASSIGN
     10464>>ASSIGN  10477>>ASSIGN  10745>>ASSIGN  10758>>ASSIGN  11872>>ASSIGN  11885>>ASSIGN  12819>>ASSIGN
     12832>>ASSIGN  13487>>ASSIGN  13500>>ASSIGN
CMAP$
      6773**DCL      4106--IMP-PTR  6784<>CALL     7075>>IF       7334>>ASSIGN   7347>>ASSIGN   7520>>ASSIGN
      7533>>ASSIGN   7637>>IF       7835>>IF       7932>>IF       8079>>ASSIGN   8191>>ASSIGN   8204>>ASSIGN
      8309>>IF       8406>>IF       8461>>ASSIGN   8890>>IF       8987>>IF       9246>>ASSIGN   9259>>ASSIGN
     10020>>IF      10278>>ASSIGN  10291>>ASSIGN  10464>>ASSIGN  10477>>ASSIGN  10652>>ASSIGN  10665>>ASSIGN
     10745>>ASSIGN  10758>>ASSIGN  11516>>IF      11613>>IF      11760>>ASSIGN  11872>>ASSIGN  11885>>ASSIGN
     12463>>IF      12560>>IF      12707>>ASSIGN  12819>>ASSIGN  12832>>ASSIGN  13131>>IF      13228>>IF
     13487>>ASSIGN  13500>>ASSIGN  13889>>ASSIGN  13902>>ASSIGN
COMMON IN PROCEDURE BUILDPDU
     14283**LABEL   14277--GOTO
CTXT.LEN
      2848**DCL      2849--IMP-SIZ  7347>>ASSIGN   7533>>ASSIGN   8204>>ASSIGN   9259>>ASSIGN  10291>>ASSIGN
     10477>>ASSIGN  10665>>ASSIGN  10758>>ASSIGN  11885>>ASSIGN  12832>>ASSIGN  13500>>ASSIGN  13902>>ASSIGN
CTXT.TXT
      2849**DCL      7334--ASSIGN   7520--ASSIGN   8191--ASSIGN   9246--ASSIGN  10278--ASSIGN  10464--ASSIGN
     10652--ASSIGN  10745--ASSIGN  11872--ASSIGN  12819--ASSIGN  13487--ASSIGN  13889--ASSIGN
DATALVL
      6774**DCL      6786<<ASSIGN   7733<<ASSIGN   8503<<ASSIGN   9269<<ASSIGN  10951<<ASSIGN  12174<<ASSIGN
     13028<<ASSIGN  13510<<ASSIGN  13522<<ASSIGN  13533>>IF      13621>>ASSIGN  13714>>ASSIGN  13721<<ASSIGN
     13721>>ASSIGN  13808>>ASSIGN  13815<<ASSIGN  13815>>ASSIGN  13902>>ASSIGN  13995>>ASSIGN  14089>>ASSIGN
     14096<<ASSIGN  14096>>ASSIGN
EVIDMAP
      6775**DCL      8750>>ASSIGN
FIXITEMS
     14119**PROC    14102--CALL
I
      6777**DCL      7074<<DOINDEX  7075>>IF       7222>>ASSIGN   7334>>ASSIGN   7347>>ASSIGN   7520>>ASSIGN
      7533>>ASSIGN   7636<<DOINDEX  7637>>IF       7691>>ASSIGN   7834<<DOINDEX  7835>>IF       7931<<DOINDEX
      7932>>IF       8079>>ASSIGN   8191>>ASSIGN   8204>>ASSIGN   8308<<DOINDEX  8309>>IF       8405<<DOINDEX
      8406>>IF       8461>>ASSIGN   8889<<DOINDEX  8890>>IF       8986<<DOINDEX  8987>>IF       9134>>ASSIGN
      9246>>ASSIGN   9259>>ASSIGN  10019<<DOINDEX 10020>>IF      10166>>ASSIGN  10278>>ASSIGN  10291>>ASSIGN
     10464>>ASSIGN  10477>>ASSIGN  11515<<DOINDEX 11516>>IF      11612<<DOINDEX 11613>>IF      11760>>ASSIGN
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:109  
     11872>>ASSIGN  11885>>ASSIGN  12462<<DOINDEX 12463>>IF      12559<<DOINDEX 12560>>IF      12707>>ASSIGN
     12819>>ASSIGN  12832>>ASSIGN  13130<<DOINDEX 13131>>IF      13227<<DOINDEX 13228>>IF      13375>>ASSIGN
     13487>>ASSIGN  13500>>ASSIGN  13889>>ASSIGN  13902>>ASSIGN
I IN PROCEDURE BUILDPDU
     14186**DCL     14199<<DOINDEX 14202>>CALLBLT 14206>>ASSIGN  14217>>CALLBLT 14229>>ASSIGN  14230>>DOCASE
     14238>>IF      14252>>ASSIGN  14262>>ASSIGN  14284>>CALLBLT
I IN PROCEDURE FIXITEMS
     14121**DCL     14128<<DOINDEX 14129>>IF      14130>>ASSIGN  14130>>ASSIGN  14131>>DOCASE  14134>>ASSIGN
     14137>>ASSIGN  14139>>ASSIGN  14139>>ASSIGN  14149>>IF      14150>>ASSIGN  14153>>ASSIGN  14160>>ASSIGN
     14162>>IF      14162>>IF      14162>>IF      14166>>ASSIGN  14168>>DOINDEX
INCRLOOP IN PROCEDURE FIXITEMS
     14168**LABEL   14171--EXIT
ITEMLIST
      6752**DCL      6788<<ASSIGN
ITEMLIST.B
      6770**DCL      9705<<ASSIGN  10825<<ASSIGN  10918<<ASSIGN  11387<<ASSIGN  12048<<ASSIGN  12141<<ASSIGN
     12334<<ASSIGN
ITEMLIST.P
      6769**DCL      7334<<ASSIGN   7520<<ASSIGN   8191<<ASSIGN   9246<<ASSIGN   9822<<ASSIGN   9916<<ASSIGN
     10278<<ASSIGN  10464<<ASSIGN  10652<<ASSIGN  10745<<ASSIGN  11504<<ASSIGN  11872<<ASSIGN  12451<<ASSIGN
     12819<<ASSIGN  13487<<ASSIGN  13618<<ASSIGN  13889<<ASSIGN  14086<<ASSIGN  14149>>IF      14284>>CALLBLT
ITEMLIST.S
      6768**DCL      7222<<ASSIGN   7691<<ASSIGN   8079<<ASSIGN   8265<<ASSIGN   8461<<ASSIGN   8657<<ASSIGN
      8750<<ASSIGN   9134<<ASSIGN   9514<<ASSIGN  10166<<ASSIGN  11196<<ASSIGN  11760<<ASSIGN  11946<<ASSIGN
     12707<<ASSIGN  12893<<ASSIGN  12989<<ASSIGN  13375<<ASSIGN  13963<<ASSIGN  14238>>IF
ITEMLIST.U
      6767**DCL      6768--REDEF    6769--REDEF    6770--REDEF   14139<<ASSIGN  14139>>ASSIGN  14252>>ASSIGN
     14262>>ASSIGN
ITEMLIST.X.IMP
      6764**DCL     14162>>IF
ITEMLIST.X.LEN
      6761**DCL     14134>>ASSIGN  14137<<ASSIGN  14150<<ASSIGN  14153>>ASSIGN  14160>>ASSIGN  14170<<ASSIGN
     14170>>ASSIGN  14206>>ASSIGN  14217--CALLBLT 14229>>ASSIGN
ITEMLIST.X.LVL
      6766**DCL     14166>>ASSIGN  14169>>IF
ITEMLIST.X.TAG
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:110  
      6763**DCL     14129>>IF      14130<<ASSIGN  14162>>IF      14202>>CALLBLT
ITEMLIST.X.TYP
      6765**DCL     14130>>ASSIGN  14131>>DOCASE  14162>>IF      14230>>DOCASE
ITEMLIST.Z
      6759**DCL      6760--REDEF    6874<<ASSIGN   6974<<ASSIGN   7067<<ASSIGN   7161<<ASSIGN   7254<<ASSIGN
      7347<<ASSIGN   7439<<ASSIGN   7533<<ASSIGN   7629<<ASSIGN   7723<<ASSIGN   7826<<ASSIGN   7924<<ASSIGN
      8018<<ASSIGN   8111<<ASSIGN   8204<<ASSIGN   8297<<ASSIGN   8398<<ASSIGN   8493<<ASSIGN   8596<<ASSIGN
      8689<<ASSIGN   8782<<ASSIGN   8881<<ASSIGN   8979<<ASSIGN   9073<<ASSIGN   9166<<ASSIGN   9259<<ASSIGN
      9362<<ASSIGN   9454<<ASSIGN   9546<<ASSIGN   9638<<ASSIGN   9731<<ASSIGN   9825<<ASSIGN   9919<<ASSIGN
     10012<<ASSIGN  10106<<ASSIGN  10198<<ASSIGN  10291<<ASSIGN  10383<<ASSIGN  10477<<ASSIGN  10572<<ASSIGN
     10665<<ASSIGN  10758<<ASSIGN  10851<<ASSIGN  10944<<ASSIGN  11044<<ASSIGN  11136<<ASSIGN  11228<<ASSIGN
     11320<<ASSIGN  11413<<ASSIGN  11507<<ASSIGN  11605<<ASSIGN  11699<<ASSIGN  11792<<ASSIGN  11885<<ASSIGN
     11978<<ASSIGN  12074<<ASSIGN  12167<<ASSIGN  12267<<ASSIGN  12360<<ASSIGN  12454<<ASSIGN  12552<<ASSIGN
     12646<<ASSIGN  12739<<ASSIGN  12832<<ASSIGN  12925<<ASSIGN  13021<<ASSIGN  13122<<ASSIGN  13220<<ASSIGN
     13314<<ASSIGN  13407<<ASSIGN  13500<<ASSIGN  13621<<ASSIGN  13714<<ASSIGN  13808<<ASSIGN  13902<<ASSIGN
     13995<<ASSIGN  14089<<ASSIGN
J IN PROCEDURE FIXITEMS
     14122**DCL     14168<<DOINDEX 14169>>IF      14170>>ASSIGN  14170>>ASSIGN
LEN IN PROCEDURE BUILDPDU
     14187**DCL     14185--IMP-SIZ 14208<<ASSIGN  14210<<ASSIGN  14210>>ASSIGN  14214>>CALLBLT 14217>>CALLBLT
     14217>>CALLBLT 14217>>CALLBLT 14219>>ASSIGN  14229<<ASSIGN  14236<<ASSIGN  14253>>DOWHILE 14255>>CALLBLT
     14258<<ASSIGN  14258>>ASSIGN  14265>>IF      14266>>DOWHILE 14280<<ASSIGN  14283>>IF      14284>>CALLBLT
     14284>>CALLBLT 14286>>ASSIGN
LEN IN PROCEDURE FIXITEMS
     14123**DCL     14152<<ASSIGN  14156<<ASSIGN  14156>>ASSIGN  14160<<ASSIGN  14160>>ASSIGN  14165<<ASSIGN
     14165>>ASSIGN  14170>>ASSIGN
LVL IN PROCEDURE FIXITEMS
     14124**DCL     14125--REDEF   14126--REDEF   14166<<ASSIGN  14169>>IF
NEXTITEM IN PROCEDURE BUILDPDU
     14288**LABEL   14260--GOTO    14273--GOTO
PCTX.ACTDCSMASK
      4037**DCL      4040--REDEF
PCTX.CTXTMAPX
      4087**DCL      6784<>CALL
PCTX.CURDCSMASK
      4022**DCL      4025--REDEF
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:111  
PCTX.HISTZ
      4080**DCL      4081--REDEF
PCTX.INIDCSMASK
      4030**DCL      4033--REDEF
PDUBUF
      6779**DCL     14106--ASSIGN  14202<<CALLBLT 14214<<CALLBLT 14217<<CALLBLT 14223<<CALLBLT 14240<<CALLBLT
     14246<<CALLBLT 14255<<CALLBLT 14268<<CALLBLT 14284<<CALLBLT
PDUIDX
      6780**DCL     14105>>ASSIGN  14196<<ASSIGN  14202>>CALLBLT 14203<<ASSIGN  14203>>ASSIGN  14214>>CALLBLT
     14215<<ASSIGN  14215>>ASSIGN  14217>>CALLBLT 14219<<ASSIGN  14219>>ASSIGN  14223>>CALLBLT 14224<<ASSIGN
     14224>>ASSIGN  14240>>CALLBLT 14241<<ASSIGN  14241>>ASSIGN  14246>>CALLBLT 14247<<ASSIGN  14247>>ASSIGN
     14255>>CALLBLT 14256<<ASSIGN  14256>>ASSIGN  14268>>CALLBLT 14269<<ASSIGN  14269>>ASSIGN  14284>>CALLBLT
     14286<<ASSIGN  14286>>ASSIGN
PSAP.LEN
      2806**DCL      2807--IMP-SIZ  9825>>ASSIGN   9919>>ASSIGN  11507>>ASSIGN  12454>>ASSIGN
PSAP.TXT
      2807**DCL      9822--ASSIGN   9916--ASSIGN  11504--ASSIGN  12451--ASSIGN
PSAP$
      6781**DCL      2794--IMP-PTR  9738<<ASSIGN   9822>>ASSIGN   9825>>ASSIGN   9832<<ASSIGN   9916>>ASSIGN
      9919>>ASSIGN  11420<<ASSIGN  11504>>ASSIGN  11507>>ASSIGN  12367<<ASSIGN  12451>>ASSIGN  12454>>ASSIGN
TEMP
      6782**DCL      7833<<ASSIGN   7836<<ASSIGN   7836>>ASSIGN   7838>>IF       8307<<ASSIGN   8310<<ASSIGN
      8310>>ASSIGN   8312>>IF       8888<<ASSIGN   8891<<ASSIGN   8891>>ASSIGN   8893>>IF      11514<<ASSIGN
     11517<<ASSIGN  11517>>ASSIGN  11519>>IF      12461<<ASSIGN  12464<<ASSIGN  12464>>ASSIGN  12466>>IF
     13129<<ASSIGN  13132<<ASSIGN  13132>>ASSIGN  13134>>IF
TMP IN PROCEDURE BUILDPDU
     14188**DCL     14206<<ASSIGN  14207>>IF      14209>>DOWHILE 14211<<ASSIGN  14211>>ASSIGN  14223>>CALLBLT
     14264<<ASSIGN  14266>>DOWHILE 14268>>CALLBLT 14271<<ASSIGN  14271>>ASSIGN
TMP IN PROCEDURE FIXITEMS
     14125**DCL     14134<<ASSIGN  14135>>IF      14136<<ASSIGN  14137>>ASSIGN  14138>>ASSIGN  14153<<ASSIGN
     14154>>IF      14155>>DOWHILE 14157<<ASSIGN  14157>>ASSIGN
U36 IN PROCEDURE BUILDPDU
     14189**DCL     14190--REDEF   14251<<ASSIGN  14252<<ASSIGN  14262<<ASSIGN  14263<<ASSIGN
U8 IN PROCEDURE BUILDPDU
     14190**DCL     14255>>CALLBLT 14268>>CALLBLT
UTMP IN PROCEDURE FIXITEMS
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:112  
     14126**DCL     14138<<ASSIGN  14139>>ASSIGN
VBLK
      3804**DCL        16--PROC    14107<>CALL
VBLK.CTX$
      3814**DCL      3951--IMP-PTR  6784>>CALL
VBLK.DATA.PTR$
      3890**DCL     14106<<ASSIGN
VBLK.DATA.SIZE
      3891**DCL     14105<<ASSIGN
VBLK.DATMASK
      3920**DCL      3923--REDEF
VBLK.DEFMASK
      3904**DCL      3907--REDEF    6981>>IF       9926>>IF
VBLK.DELMASK
      3912**DCL      3915--REDEF    7543>>IF
VBLK.EVENT
      3899**DCL      6881>>DOCASE   8750>>ASSIGN
VBLK.FPT$
      3818**DCL      2550--IMP-PTR  2646--IMP-PTR  6785>>ASSIGN   9738>>ASSIGN   9832>>ASSIGN  10825>>ASSIGN
     10918>>ASSIGN  11420>>ASSIGN  12048>>ASSIGN  12141>>ASSIGN  12367>>ASSIGN
VBLK.SPIMASK
      3928**DCL      3931--REDEF
XSC$ADDRESS.NSAP.ADDRESS_N
      5743**DCL      5744--REDEF
XSC$ADDRESS.PSAP
      5519**DCL      9738--ASSIGN   9832--ASSIGN  11420--ASSIGN  12367--ASSIGN
XSP$CONNECT.CALLED$
      2741**DCL      2742--REDEF    9832>>ASSIGN
XSP$CONNECT.CALLING$
      2735**DCL      9738>>ASSIGN
XSP$CONNECT.DFLT$
      2731**DCL      2732--REDEF
XSP$CONNECT.ERRDEF
      2700**DCL      2720--REDEF
XSP$CONNECT.PFU
      2770**DCL     10825>>ASSIGN  12048>>ASSIGN
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:113  
XSP$CONNECT.RESPONDING$
      2742**DCL     11420>>ASSIGN  12367>>ASSIGN
XSP$CONNECT.SFU
      2752**DCL     10918>>ASSIGN  12141>>ASSIGN
XSP$GENERIC.DATA$
      2626**DCL      6785>>ASSIGN
XSP$GENERIC.ERRDEF
      2596**DCL      2616--REDEF
XSP$SSEND
      6735**DCL-ENT 14107--CALL
XSP_ABSLIST.CTXT$
      6740**DCL      7334>>ASSIGN   7347>>ASSIGN  10278>>ASSIGN  10291>>ASSIGN  10652>>ASSIGN  10665>>ASSIGN
     13889>>ASSIGN  13902>>ASSIGN
XSP_F$ENCODE
      6696**DCL     13529<>CALL
XSP_ITEMCNT
      6744**DCL      6787<<ASSIGN   6874>>ASSIGN   6877<<ASSIGN   6877>>ASSIGN   6974>>ASSIGN   6977<<ASSIGN
      6977>>ASSIGN   7067>>ASSIGN   7070<<ASSIGN   7070>>ASSIGN   7161>>ASSIGN   7164<<ASSIGN   7164>>ASSIGN
      7222>>ASSIGN   7254>>ASSIGN   7257<<ASSIGN   7257>>ASSIGN   7334>>ASSIGN   7347>>ASSIGN   7350<<ASSIGN
      7350>>ASSIGN   7439>>ASSIGN   7442<<ASSIGN   7442>>ASSIGN   7520>>ASSIGN   7533>>ASSIGN   7536<<ASSIGN
      7536>>ASSIGN   7629>>ASSIGN   7632<<ASSIGN   7632>>ASSIGN   7691>>ASSIGN   7723>>ASSIGN   7726<<ASSIGN
      7726>>ASSIGN   7826>>ASSIGN   7829<<ASSIGN   7829>>ASSIGN   7924>>ASSIGN   7927<<ASSIGN   7927>>ASSIGN
      8018>>ASSIGN   8021<<ASSIGN   8021>>ASSIGN   8079>>ASSIGN   8111>>ASSIGN   8114<<ASSIGN   8114>>ASSIGN
      8191>>ASSIGN   8204>>ASSIGN   8207<<ASSIGN   8207>>ASSIGN   8265>>ASSIGN   8297>>ASSIGN   8300<<ASSIGN
      8300>>ASSIGN   8398>>ASSIGN   8401<<ASSIGN   8401>>ASSIGN   8461>>ASSIGN   8493>>ASSIGN   8496<<ASSIGN
      8496>>ASSIGN   8596>>ASSIGN   8599<<ASSIGN   8599>>ASSIGN   8657>>ASSIGN   8689>>ASSIGN   8692<<ASSIGN
      8692>>ASSIGN   8750>>ASSIGN   8782>>ASSIGN   8785<<ASSIGN   8785>>ASSIGN   8881>>ASSIGN   8884<<ASSIGN
      8884>>ASSIGN   8979>>ASSIGN   8982<<ASSIGN   8982>>ASSIGN   9073>>ASSIGN   9076<<ASSIGN   9076>>ASSIGN
      9134>>ASSIGN   9166>>ASSIGN   9169<<ASSIGN   9169>>ASSIGN   9246>>ASSIGN   9259>>ASSIGN   9262<<ASSIGN
      9262>>ASSIGN   9362>>ASSIGN   9365<<ASSIGN   9365>>ASSIGN   9454>>ASSIGN   9457<<ASSIGN   9457>>ASSIGN
      9514>>ASSIGN   9546>>ASSIGN   9549<<ASSIGN   9549>>ASSIGN   9638>>ASSIGN   9641<<ASSIGN   9641>>ASSIGN
      9705>>ASSIGN   9731>>ASSIGN   9734<<ASSIGN   9734>>ASSIGN   9822>>ASSIGN   9825>>ASSIGN   9828<<ASSIGN
      9828>>ASSIGN   9916>>ASSIGN   9919>>ASSIGN   9922<<ASSIGN   9922>>ASSIGN  10012>>ASSIGN  10015<<ASSIGN
     10015>>ASSIGN  10106>>ASSIGN  10109<<ASSIGN  10109>>ASSIGN  10166>>ASSIGN  10198>>ASSIGN  10201<<ASSIGN
     10201>>ASSIGN  10278>>ASSIGN  10291>>ASSIGN  10294<<ASSIGN  10294>>ASSIGN  10383>>ASSIGN  10386<<ASSIGN
     10386>>ASSIGN  10464>>ASSIGN  10477>>ASSIGN  10480<<ASSIGN  10480>>ASSIGN  10572>>ASSIGN  10575<<ASSIGN
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:114  
     10575>>ASSIGN  10652>>ASSIGN  10665>>ASSIGN  10668<<ASSIGN  10668>>ASSIGN  10745>>ASSIGN  10758>>ASSIGN
     10761<<ASSIGN  10761>>ASSIGN  10825>>ASSIGN  10851>>ASSIGN  10854<<ASSIGN  10854>>ASSIGN  10918>>ASSIGN
     10944>>ASSIGN  10947<<ASSIGN  10947>>ASSIGN  11044>>ASSIGN  11047<<ASSIGN  11047>>ASSIGN  11136>>ASSIGN
     11139<<ASSIGN  11139>>ASSIGN  11196>>ASSIGN  11228>>ASSIGN  11231<<ASSIGN  11231>>ASSIGN  11320>>ASSIGN
     11323<<ASSIGN  11323>>ASSIGN  11387>>ASSIGN  11413>>ASSIGN  11416<<ASSIGN  11416>>ASSIGN  11504>>ASSIGN
     11507>>ASSIGN  11510<<ASSIGN  11510>>ASSIGN  11605>>ASSIGN  11608<<ASSIGN  11608>>ASSIGN  11699>>ASSIGN
     11702<<ASSIGN  11702>>ASSIGN  11760>>ASSIGN  11792>>ASSIGN  11795<<ASSIGN  11795>>ASSIGN  11872>>ASSIGN
     11885>>ASSIGN  11888<<ASSIGN  11888>>ASSIGN  11946>>ASSIGN  11978>>ASSIGN  11981<<ASSIGN  11981>>ASSIGN
     12048>>ASSIGN  12074>>ASSIGN  12077<<ASSIGN  12077>>ASSIGN  12141>>ASSIGN  12167>>ASSIGN  12170<<ASSIGN
     12170>>ASSIGN  12267>>ASSIGN  12270<<ASSIGN  12270>>ASSIGN  12334>>ASSIGN  12360>>ASSIGN  12363<<ASSIGN
     12363>>ASSIGN  12451>>ASSIGN  12454>>ASSIGN  12457<<ASSIGN  12457>>ASSIGN  12552>>ASSIGN  12555<<ASSIGN
     12555>>ASSIGN  12646>>ASSIGN  12649<<ASSIGN  12649>>ASSIGN  12707>>ASSIGN  12739>>ASSIGN  12742<<ASSIGN
     12742>>ASSIGN  12819>>ASSIGN  12832>>ASSIGN  12835<<ASSIGN  12835>>ASSIGN  12893>>ASSIGN  12925>>ASSIGN
     12928<<ASSIGN  12928>>ASSIGN  12989>>ASSIGN  13021>>ASSIGN  13024<<ASSIGN  13024>>ASSIGN  13122>>ASSIGN
     13125<<ASSIGN  13125>>ASSIGN  13220>>ASSIGN  13223<<ASSIGN  13223>>ASSIGN  13314>>ASSIGN  13317<<ASSIGN
     13317>>ASSIGN  13375>>ASSIGN  13407>>ASSIGN  13410<<ASSIGN  13410>>ASSIGN  13487>>ASSIGN  13500>>ASSIGN
     13503<<ASSIGN  13503>>ASSIGN  13618>>ASSIGN  13621>>ASSIGN  13624<<ASSIGN  13624>>ASSIGN  13714>>ASSIGN
     13717<<ASSIGN  13717>>ASSIGN  13808>>ASSIGN  13811<<ASSIGN  13811>>ASSIGN  13889>>ASSIGN  13902>>ASSIGN
     13905<<ASSIGN  13905>>ASSIGN  13963>>ASSIGN  13995>>ASSIGN  13998<<ASSIGN  13998>>ASSIGN  14086>>ASSIGN
     14089>>ASSIGN  14092<<ASSIGN  14092>>ASSIGN  14128>>DOINDEX 14197<<ASSIGN  14197>>ASSIGN  14199>>DOINDEX
XSP_TFRLIST.CTXT$
      6742**DCL      7520>>ASSIGN   7533>>ASSIGN   8191>>ASSIGN   8204>>ASSIGN   9246>>ASSIGN   9259>>ASSIGN
     10464>>ASSIGN  10477>>ASSIGN  10745>>ASSIGN  10758>>ASSIGN  11872>>ASSIGN  11885>>ASSIGN  12819>>ASSIGN
     12832>>ASSIGN  13487>>ASSIGN  13500>>ASSIGN
XSS$BUFPTR
      6736**DCL-ENT  6784--CALL
XSS$SCREECH
      6737**DCL-ENT 13529--CALL
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:115  
              *** CROSS REFERENCE LISTING ***
    **     DENOTES     IDENTIFIER DEFINITION
    <<                 IDENTIFIER'S VALUE SET
    >>                 IDENTIFIER'S VALUE USED
    <>                 IDENTIFIER SET AND/OR USED
    --                 IDENTIFIER REFERENCED
PL6.E3A0      #001=XSP$ENCODE File=XSP$ENCODE.:XSA1TSI                           WED 10/01/97 12:02 Page:116  
              MINI UREF LISTING

J    6778**DCL
XSP$ENCODE      16**PROC
XSP_ITEMMAX    6745**DCL

PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:117  
      556        1        /*T***********************************************************/
      557        2        /*T*                                                         */
      558        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      559        4        /*T*                                                         */
      560        5        /*T***********************************************************/
      561        6        /*F*    NAME:   XSP$SSEND
      562        7                DESCRIPTION:
      563        8                    This is the common routine in Presentation that handles sending
      564        9                    a message on to Session.  The Presentation event in VBLK.EVENT
      565       10                    is mapped to a Session function code.
      566       11        */
      567       12        XSP$SSEND: PROC( VBLK) ALTRET;
      568       13        %INCLUDE XSS_SESSION_E;
      569      578        %INCLUDE XSS_SESSION_M;
      570     3221            %XSS$GENERIC( FPTN=SFPT, STCLASS=AUTO);
      571     3367            %XSS$PRIMITIVES( STCLASS="BASED( SFPT$)");
      572     6746            %XSS_PRIMITIVES( STCLASS=SYMREF);
      573    10125        %INCLUDE XSP_PRESENTATION_E;
      574    10224        %INCLUDE XSP_PRESENTATION_M;
      575    11710            %XSP$PRIMITIVES( STCLASS="BASED( VBLK.FPT$)");
      576    13409        %INCLUDE XSP_INTERNAL_E;
      577    13683        %INCLUDE XSP_INTERNAL_M;
      578    14344            %XSP$VBLK( NAME=VBLK, STCLASS="");
      579    14490
      580    14491    1       DCL XSS$SESSION ENTRY(1) ALTRET;
      581    14492
      582    14493    1       DCL SFPT$ PTR;
      583    14494
      584    14495    1       SFPT$ = ADDR( SFPT);
      585    14496            /* Determine the Session function code and copy params if necessary */
      586    14497    2       DO CASE( VBLK.EVENT);
      587    14498    2           CASE( %XSP_PEV_AC,
      588    14499    2                 %XSP_PEV_ACA,
      589    14500    2                 %XSP_PEV_TTD);
      590    14501    2               XSS$TYPED_DATA = XSS_TYPED_DATA;
      591    14502    2               XSS$TYPED_DATA.FNC = %XSS_FNC_STYDREQ#;
      592    14503    2               XSS$TYPED_DATA.DATA = VBLK.DATA;
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:118  
      593    14504    2           CASE( %XSP_PEV_ARP,
      594    14505    2                 %XSP_PEV_ARU);
      595    14506    2               XSS$U_ABORT = XSS_U_ABORT;
      596    14507    2               XSS$U_ABORT.FNC = %XSS_FNC_SUABREQ#;
      597    14508    2               XSS$U_ABORT.DATA = VBLK.DATA;
      598    14509    2           CASE( %XSP_PEV_CP);
      599    14510    2               XSS$CONNECT = XSS_CONNECT;
      600    14511    2               XSS$CONNECT.FNC = %XSS_FNC_SCONREQ#;
      601    14512    2               XSS$CONNECT.DATA = VBLK.DATA;
      602    14513    2               XSS$CONNECT.SERNUM = XSP$CONNECT.SERNUM;
      603    14514    2               XSS$CONNECT.CALLING$ = XSP$CONNECT.CALLING$;
      604    14515    2               XSS$CONNECT.CALLED$ = XSP$CONNECT.CALLED$;
      605    14516    2               XSS$CONNECT.ITOKENS = XSP$CONNECT.ITOKENS;
      606    14517    2               XSS$CONNECT.SFU = XSP$CONNECT.SFU;
      607    14518    2               XSS$CONNECT.QOS = XSP$CONNECT.QOS;
      608    14519    2           CASE( %XSP_PEV_CPA,
      609    14520    2                 %XSP_PEV_CPR);
      610    14521    2               XSS$CONNECT = XSS_CONNECT;
      611    14522    2               XSS$CONNECT.FNC = %XSS_FNC_SCONRSP#;
      612    14523    2               XSS$CONNECT.RESULT = XSP$CONNECT.RESULT;
      613    14524    2               XSS$CONNECT.DATA = VBLK.DATA;
      614    14525    2               XSS$CONNECT.SERNUM = XSP$CONNECT.SERNUM;
      615    14526    2               XSS$CONNECT.CALLING$ = XSP$CONNECT.CALLING$;
      616    14527    2               XSS$CONNECT.RESPONDING$ = XSP$CONNECT.RESPONDING$;
      617    14528    2               XSS$CONNECT.ITOKENS = XSP$CONNECT.ITOKENS;
      618    14529    2               XSS$CONNECT.SFU = XSP$CONNECT.SFU;
      619    14530    2               XSS$CONNECT.QOS = XSP$CONNECT.QOS;
      620    14531    2           CASE( %XSP_PEV_RS);
      621    14532    2               XSS$RESYNCHRONIZE = XSS_RESYNCHRONIZE;
      622    14533    2               XSS$RESYNCHRONIZE.FNC = %XSS_FNC_SRSXREQ#;
      623    14534    2               XSS$RESYNCHRONIZE.TYPE = XSP$RESYNCHRONIZE.TYPE;
      624    14535    2               XSS$RESYNCHRONIZE.TOKENS = XSP$RESYNCHRONIZE.TOKENS;
      625    14536    2               XSS$RESYNCHRONIZE.DATA = VBLK.DATA;
      626    14537    2               XSS$RESYNCHRONIZE.SERNUM = XSP$RESYNCHRONIZE.SERNUM;
      627    14538    2           CASE( %XSP_PEV_RSA);
      628    14539    2               XSS$RESYNCHRONIZE = XSS_RESYNCHRONIZE;
      629    14540    2               XSS$RESYNCHRONIZE.FNC = %XSS_FNC_SRSXRSP#;
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:119  
      630    14541    2               XSS$RESYNCHRONIZE.TYPE = XSP$RESYNCHRONIZE.TYPE;
      631    14542    2               XSS$RESYNCHRONIZE.TOKENS = XSP$RESYNCHRONIZE.TOKENS;
      632    14543    2               XSS$RESYNCHRONIZE.DATA = VBLK.DATA;
      633    14544    2               XSS$RESYNCHRONIZE.SERNUM = XSP$RESYNCHRONIZE.SERNUM;
      634    14545    2           CASE( %XSP_PEV_TC);
      635    14546    2               XSS$CAPABILITY_DATA = XSS_CAPABILITY_DATA;
      636    14547    2               XSS$CAPABILITY_DATA.FNC = %XSS_FNC_SCADREQ#;
      637    14548    2               XSS$CAPABILITY_DATA.DATA = VBLK.DATA;
      638    14549    2           CASE( %XSP_PEV_TCC);
      639    14550    2               XSS$CAPABILITY_DATA = XSS_CAPABILITY_DATA;
      640    14551    2               XSS$CAPABILITY_DATA.FNC = %XSS_FNC_SCADRSP#;
      641    14552    2               XSS$CAPABILITY_DATA.DATA = VBLK.DATA;
      642    14553    2           CASE( %XSP_PEV_TD);
      643    14554    2               XSS$DATA = XSS_DATA;
      644    14555    2               XSS$DATA.FNC = %XSS_FNC_SDATREQ#;
      645    14556    2               XSS$DATA.DATA = VBLK.DATA;
      646    14557    2           CASE( %XSP_PEV_TE);
      647    14558    2               XSS$EXPEDITED_DATA = XSS_EXPEDITED_DATA;
      648    14559    2               XSS$EXPEDITED_DATA.FNC = %XSS_FNC_SEXPREQ#;
      649    14560    2               XSS$EXPEDITED_DATA.DATA = VBLK.DATA;
      650    14561    2           CASE( %XSP_PEV_SACDREQ);
      651    14562    2               XSS$ACTIVITY_DISCARD = XSS_ACTIVITY_DISCARD;
      652    14563    2               XSS$ACTIVITY_DISCARD.FNC = %XSS_FNC_SACDREQ#;
      653    14564    2               XSS$ACTIVITY_DISCARD.REASON = XSP$ACTIVITY_DISCARD.REASON;
      654    14565    2           CASE( %XSP_PEV_SACDRSP);
      655    14566    2               XSS$ACTIVITY_DISCARD = XSS_ACTIVITY_DISCARD;
      656    14567    2               XSS$ACTIVITY_DISCARD.FNC = %XSS_FNC_SACDRSP#;
      657    14568    2               XSS$ACTIVITY_DISCARD.REASON = XSP$ACTIVITY_DISCARD.REASON;
      658    14569    2           CASE( %XSP_PEV_SACEREQ);
      659    14570    2               XSS$ACTIVITY_END = XSS_ACTIVITY_END;
      660    14571    2               XSS$ACTIVITY_END.FNC = %XSS_FNC_SACEREQ#;
      661    14572    2               XSS$ACTIVITY_END.DATA = VBLK.DATA;
      662    14573    2               XSS$ACTIVITY_END.SERNUM = XSP$ACTIVITY_END.SERNUM;
      663    14574    2           CASE( %XSP_PEV_SACERSP);
      664    14575    2               XSS$ACTIVITY_END = XSS_ACTIVITY_END;
      665    14576    2               XSS$ACTIVITY_END.FNC = %XSS_FNC_SACERSP#;
      666    14577    2               XSS$ACTIVITY_END.DATA = VBLK.DATA;
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:120  
      667    14578    2               XSS$ACTIVITY_END.SERNUM = XSP$ACTIVITY_END.SERNUM;
      668    14579    2           CASE( %XSP_PEV_SACIREQ);
      669    14580    2               XSS$ACTIVITY_INTERRUPT = XSS_ACTIVITY_INTERRUPT;
      670    14581    2               XSS$ACTIVITY_INTERRUPT.FNC = %XSS_FNC_SACIREQ#;
      671    14582    2               XSS$ACTIVITY_INTERRUPT.REASON = XSP$ACTIVITY_INTERRUPT.REASON;
      672    14583    2           CASE( %XSP_PEV_SACIRSP);
      673    14584    2               XSS$ACTIVITY_INTERRUPT = XSS_ACTIVITY_INTERRUPT;
      674    14585    2               XSS$ACTIVITY_INTERRUPT.FNC = %XSS_FNC_SACIRSP#;
      675    14586    2               XSS$ACTIVITY_INTERRUPT.REASON = XSP$ACTIVITY_INTERRUPT.REASON;
      676    14587    2           CASE( %XSP_PEV_SACRREQ);
      677    14588    2               XSS$ACTIVITY_RESUME = XSS_ACTIVITY_RESUME;
      678    14589    2               XSS$ACTIVITY_RESUME.FNC = %XSS_FNC_SACRREQ#;
      679    14590    2               XSS$ACTIVITY_RESUME.OSCID = XSP$ACTIVITY_RESUME.OSCID;
      680    14591    2               XSS$ACTIVITY_RESUME.DATA = VBLK.DATA;
      681    14592    2               XSS$ACTIVITY_RESUME.SERNUM = XSP$ACTIVITY_RESUME.SERNUM;
      682    14593    2               XSS$ACTIVITY_RESUME.ACTID = XSP$ACTIVITY_RESUME.ACTID;
      683    14594    2               XSS$ACTIVITY_RESUME.OACTID = XSP$ACTIVITY_RESUME.OACTID;
      684    14595    2           CASE( %XSP_PEV_SACSREQ);
      685    14596    2               XSS$ACTIVITY_START = XSS_ACTIVITY_START;
      686    14597    2               XSS$ACTIVITY_START.FNC = %XSS_FNC_SACSREQ#;
      687    14598    2               XSS$ACTIVITY_START.DATA = VBLK.DATA;
      688    14599    2               XSS$ACTIVITY_START.ACTID = XSP$ACTIVITY_START.ACTID;
      689    14600    2           CASE( %XSP_PEV_SCTGREQ);
      690    14601    2               XSS$CONTROL_GIVE = XSS_CONTROL_GIVE;
      691    14602    2               XSS$CONTROL_GIVE.FNC = %XSS_FNC_SCTGREQ#;
      692    14603    2           CASE( %XSP_PEV_STKGREQ);
      693    14604    2               XSS$TOKEN_GIVE = XSS_TOKEN_GIVE;
      694    14605    2               XSS$TOKEN_GIVE.FNC = %XSS_FNC_STKGREQ#;
      695    14606    2               XSS$TOKEN_GIVE.TOKENS = XSP$TOKEN_GIVE.TOKENS;
      696    14607    2           CASE( %XSP_PEV_STKPREQ);
      697    14608    2               XSS$TOKEN_PLEASE = XSS_TOKEN_PLEASE;
      698    14609    2               XSS$TOKEN_PLEASE.FNC = %XSS_FNC_STKPREQ#;
      699    14610    2               XSS$TOKEN_PLEASE.TOKENS = XSP$TOKEN_PLEASE.TOKENS;
      700    14611    2               XSS$TOKEN_PLEASE.DATA = VBLK.DATA;
      701    14612    2           CASE( %XSP_PEV_SRELREQ);
      702    14613    2               XSS$RELEASE = XSS_RELEASE;
      703    14614    2               XSS$RELEASE.FNC = %XSS_FNC_SRELREQ#;
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:121  
      704    14615    2               XSS$RELEASE.DATA = VBLK.DATA;
      705    14616    2           CASE( %XSP_PEV_SRELRSP,
      706    14617    2                 %XSP_PEV_SRELRSN);
      707    14618    2               XSS$RELEASE = XSS_RELEASE;
      708    14619    2               XSS$RELEASE.FNC = %XSS_FNC_SRELRSP#;
      709    14620    2               XSS$RELEASE.RESULT = XSP$RELEASE.RESULT;
      710    14621    2               XSS$RELEASE.DATA = VBLK.DATA;
      711    14622    2           CASE( %XSP_PEV_SRSXREQ);
      712    14623    2               XSS$RESYNCHRONIZE = XSS_RESYNCHRONIZE;
      713    14624    2               XSS$RESYNCHRONIZE.FNC = %XSS_FNC_SRSXREQ#;
      714    14625    2               XSS$RESYNCHRONIZE.TYPE = XSP$RESYNCHRONIZE.TYPE;
      715    14626    2               XSS$RESYNCHRONIZE.TOKENS = XSP$RESYNCHRONIZE.TOKENS;
      716    14627    2               XSS$RESYNCHRONIZE.DATA = VBLK.DATA;
      717    14628    2               XSS$RESYNCHRONIZE.SERNUM = XSP$RESYNCHRONIZE.SERNUM;
      718    14629    2           CASE( %XSP_PEV_SRSXRSP);
      719    14630    2               XSS$RESYNCHRONIZE = XSS_RESYNCHRONIZE;
      720    14631    2               XSS$RESYNCHRONIZE.FNC = %XSS_FNC_SRSXRSP#;
      721    14632    2               XSS$RESYNCHRONIZE.TYPE = XSP$RESYNCHRONIZE.TYPE;
      722    14633    2               XSS$RESYNCHRONIZE.TOKENS = XSP$RESYNCHRONIZE.TOKENS;
      723    14634    2               XSS$RESYNCHRONIZE.DATA = VBLK.DATA;
      724    14635    2               XSS$RESYNCHRONIZE.SERNUM = XSP$RESYNCHRONIZE.SERNUM;
      725    14636    2           CASE( %XSP_PEV_SSMAREQ);
      726    14637    2               XSS$SYNC_MAJOR = XSS_SYNC_MAJOR;
      727    14638    2               XSS$SYNC_MAJOR.FNC = %XSS_FNC_SSMAREQ#;
      728    14639    2               XSS$SYNC_MAJOR.DATA = VBLK.DATA;
      729    14640    2               XSS$SYNC_MAJOR.SERNUM = XSP$SYNC_MAJOR.SERNUM;
      730    14641    2           CASE( %XSP_PEV_SSMARSP);
      731    14642    2               XSS$SYNC_MAJOR = XSS_SYNC_MAJOR;
      732    14643    2               XSS$SYNC_MAJOR.FNC = %XSS_FNC_SSMARSP#;
      733    14644    2               XSS$SYNC_MAJOR.DATA = VBLK.DATA;
      734    14645    2               XSS$SYNC_MAJOR.SERNUM = XSP$SYNC_MAJOR.SERNUM;
      735    14646    2           CASE( %XSP_PEV_SSMIREQ);
      736    14647    2               XSS$SYNC_MINOR = XSS_SYNC_MINOR;
      737    14648    2               XSS$SYNC_MINOR.FNC = %XSS_FNC_SSMIRSP#;
      738    14649    2               XSS$SYNC_MINOR.TYPE = XSP$SYNC_MINOR.TYPE;
      739    14650    2               XSS$SYNC_MINOR.DATA = VBLK.DATA;
      740    14651    2               XSS$SYNC_MINOR.SERNUM = XSP$SYNC_MINOR.SERNUM;
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:122  
      741    14652    2           CASE( %XSP_PEV_SSMIRSP);
      742    14653    2               XSS$SYNC_MINOR = XSS_SYNC_MINOR;
      743    14654    2               XSS$SYNC_MINOR.FNC = %XSS_FNC_SSMIRSP#;
      744    14655    2               XSS$SYNC_MINOR.TYPE = XSP$SYNC_MINOR.TYPE;
      745    14656    2               XSS$SYNC_MINOR.DATA = VBLK.DATA;
      746    14657    2               XSS$SYNC_MINOR.SERNUM = XSP$SYNC_MINOR.SERNUM;
      747    14658    2           CASE( %XSP_PEV_SUERREQ);
      748    14659    2               XSS$U_EXCEPTION_REPORT = XSS_U_EXCEPTION_REPORT;
      749    14660    2               XSS$U_EXCEPTION_REPORT.FNC = %XSS_FNC_SUERREQ#;
      750    14661    2               XSS$U_EXCEPTION_REPORT.REASON = XSP$U_EXCEPTION_REPORT.REASON;
      751    14662    2               XSS$U_EXCEPTION_REPORT.DATA = VBLK.DATA;
      752    14663    2           CASE( ELSE);
      753    14664    2               ALTRETURN;
      754    14665    2           END;
      755    14666    1       XSS$GENERIC.SCID = XSP$GENERIC.PCID;
      756    14667            /* ..and send it on its way */
      757    14668    1       CALL XSS$SESSION( XSS$GENERIC)
      758    14669    2       WHENALTRETURN DO;
      759    14670    2           XSP$GENERIC.ERROR = XSS$GENERIC.ERROR;
      760    14671    2           ALTRETURN;
      761    14672    2           END;
      762    14673    1       RETURN;
      763    14674
      764    14675    1       END XSP$SSEND;

PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:123  
--  Include file information  --

   XSP_INTERNAL_M.:XSA1TOU  is referenced.
   XSP_INTERNAL_E.:XSA1TOU  is referenced.
   XSP_PRESENTATION_M.:XSA1TOU  is referenced.
   XSP_PRESENTATION_E.:XSA1TOU  is referenced.
   XSS_SESSION_M.:XSA1TOU  is referenced.
   XSS_SESSION_E.:XSA1TOU  is referenced.
      No diagnostics issued in procedure XSP$SSEND.

   Procedure XSP$SSEND requires 452 words for executable code.
   Procedure XSP$SSEND requires 20 words of local(AUTO) storage.

    No errors detected in file XSP$ENCODE.:XSA1TSI    .

PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:124  

 Object Unit name= XSP$SSEND                                  File name= XSP$ENCODE.:XSA1TOU
 UTS= OCT 01 '97 12:03:17.40 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none   452    704  XSP$SSEND
    1  RoData even  none     1      1  XSP$SSEND

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes    yes     yes      Std        1  XSP$SSEND

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       1 XSS$SESSION
                       nStd      0 X66_AUTO_1
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:125  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     XSS_ACTIVITY_DISCARD                  XSS_ACTIVITY_END                      XSS_ACTIVITY_INTERRUPT
     XSS_ACTIVITY_RESUME                   XSS_ACTIVITY_START                    XSS_CAPABILITY_DATA
     XSS_CONNECT                           XSS_CONTROL_GIVE                      XSS_DATA
     XSS_EXPEDITED_DATA                    XSS_RELEASE                           XSS_RESYNCHRONIZE
     XSS_SYNC_MAJOR                        XSS_SYNC_MINOR                        XSS_TOKEN_GIVE
     XSS_TOKEN_PLEASE                      XSS_TYPED_DATA                        XSS_U_ABORT
     XSS_U_EXCEPTION_REPORT
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:126  


      556        1        /*T***********************************************************/
      557        2        /*T*                                                         */
      558        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      559        4        /*T*                                                         */
      560        5        /*T***********************************************************/
      561        6        /*F*    NAME:   XSP$SSEND
      562        7                DESCRIPTION:
      563        8                    This is the common routine in Presentation that handles sending
      564        9                    a message on to Session.  The Presentation event in VBLK.EVENT
      565       10                    is mapped to a Session function code.
      566       11        */
      567       12        XSP$SSEND: PROC( VBLK) ALTRET;

     12  0 000000   000000 700200 xent  XSP$SSEND    TSX0  ! X66_AUTO_1
         0 000001   000024 000001                    ZERO    20,1

      568       13        %INCLUDE XSS_SESSION_E;
      569      578        %INCLUDE XSS_SESSION_M;
      570     3221            %XSS$GENERIC( FPTN=SFPT, STCLASS=AUTO);
      571     3367            %XSS$PRIMITIVES( STCLASS="BASED( SFPT$)");
      572     6746            %XSS_PRIMITIVES( STCLASS=SYMREF);
      573    10125        %INCLUDE XSP_PRESENTATION_E;
      574    10224        %INCLUDE XSP_PRESENTATION_M;
      575    11710            %XSP$PRIMITIVES( STCLASS="BASED( VBLK.FPT$)");
      576    13409        %INCLUDE XSP_INTERNAL_E;
      577    13683        %INCLUDE XSP_INTERNAL_M;
      578    14344            %XSP$VBLK( NAME=VBLK, STCLASS="");
      579    14490
      580    14491    1       DCL XSS$SESSION ENTRY(1) ALTRET;
      581    14492
      582    14493    1       DCL SFPT$ PTR;
      583    14494
      584    14495    1       SFPT$ = ADDR( SFPT);

  14495  0 000002   200004 630500                    EPPR0   SFPT,,AUTO
         0 000003   200022 450500                    STP0    SFPT$,,AUTO
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:127  

      585    14496            /* Determine the Session function code and copy params if necessary */
      586    14497    2       DO CASE( VBLK.EVENT);

  14497  0 000004   200003 471500                    LDP1    @VBLK,,AUTO
         0 000005   100006 720100                    LXL0    6,,PR1
         0 000006   000777 360003                    ANX0    511,DU
         0 000007   000071 100003                    CMPX0   57,DU
         0 000010   000012 602010 0                  TNC     s:14497+6,X0
         0 000011   000664 710000 0                  TRA     s:14664
         0 000012   000664 710000 0                  TRA     s:14664
         0 000013   000103 710000 0                  TRA     s:14501
         0 000014   000103 710000 0                  TRA     s:14501
         0 000015   000113 710000 0                  TRA     s:14506
         0 000016   000113 710000 0                  TRA     s:14506
         0 000017   000123 710000 0                  TRA     s:14510
         0 000020   000155 710000 0                  TRA     s:14521
         0 000021   000155 710000 0                  TRA     s:14521
         0 000022   000212 710000 0                  TRA     s:14532
         0 000023   000233 710000 0                  TRA     s:14539
         0 000024   000254 710000 0                  TRA     s:14546
         0 000025   000264 710000 0                  TRA     s:14550
         0 000026   000274 710000 0                  TRA     s:14554
         0 000027   000304 710000 0                  TRA     s:14558
         0 000030   000103 710000 0                  TRA     s:14501
         0 000031   000664 710000 0                  TRA     s:14664
         0 000032   000314 710000 0                  TRA     s:14562
         0 000033   000664 710000 0                  TRA     s:14664
         0 000034   000325 710000 0                  TRA     s:14566
         0 000035   000664 710000 0                  TRA     s:14664
         0 000036   000336 710000 0                  TRA     s:14570
         0 000037   000664 710000 0                  TRA     s:14664
         0 000040   000351 710000 0                  TRA     s:14575
         0 000041   000664 710000 0                  TRA     s:14664
         0 000042   000364 710000 0                  TRA     s:14580
         0 000043   000664 710000 0                  TRA     s:14664
         0 000044   000375 710000 0                  TRA     s:14584
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:128  
         0 000045   000664 710000 0                  TRA     s:14664
         0 000046   000406 710000 0                  TRA     s:14588
         0 000047   000664 710000 0                  TRA     s:14664
         0 000050   000434 710000 0                  TRA     s:14596
         0 000051   000664 710000 0                  TRA     s:14664
         0 000052   000450 710000 0                  TRA     s:14601
         0 000053   000664 710000 0                  TRA     s:14664
         0 000054   000456 710000 0                  TRA     s:14604
         0 000055   000664 710000 0                  TRA     s:14664
         0 000056   000467 710000 0                  TRA     s:14608
         0 000057   000664 710000 0                  TRA     s:14664
         0 000060   000502 710000 0                  TRA     s:14613
         0 000061   000664 710000 0                  TRA     s:14664
         0 000062   000512 710000 0                  TRA     s:14618
         0 000063   000664 710000 0                  TRA     s:14664
         0 000064   000512 710000 0                  TRA     s:14618
         0 000065   000664 710000 0                  TRA     s:14664
         0 000066   000525 710000 0                  TRA     s:14623
         0 000067   000664 710000 0                  TRA     s:14664
         0 000070   000546 710000 0                  TRA     s:14630
         0 000071   000664 710000 0                  TRA     s:14664
         0 000072   000567 710000 0                  TRA     s:14637
         0 000073   000664 710000 0                  TRA     s:14664
         0 000074   000602 710000 0                  TRA     s:14642
         0 000075   000664 710000 0                  TRA     s:14664
         0 000076   000615 710000 0                  TRA     s:14647
         0 000077   000664 710000 0                  TRA     s:14664
         0 000100   000633 710000 0                  TRA     s:14653
         0 000101   000664 710000 0                  TRA     s:14664
         0 000102   000651 710000 0                  TRA     s:14659

      587    14498    2           CASE( %XSP_PEV_AC,

      588    14499    2                 %XSP_PEV_ACA,
      589    14500    2                 %XSP_PEV_TTD);
      590    14501    2               XSS$TYPED_DATA = XSS_TYPED_DATA;

PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:129  
  14501  0 000103   000100 100400                    MLR     fill='000'O
         0 000104   000000 000020 xsym               ADSC9   XSS_TYPED_DATA           cn=0,n=16
         0 000105   000000 000020                    ADSC9   0,,PR0                   cn=0,n=16

      591    14502    2               XSS$TYPED_DATA.FNC = %XSS_FNC_STYDREQ#;

  14502  0 000106   063000 236003                    LDQ     26112,DU
         0 000107   000000 552140                    STBQ    0,'40'O,PR0

      592    14503    2               XSS$TYPED_DATA.DATA = VBLK.DATA;

  14503  0 000110   100004 237100                    LDAQ    4,,PR1
         0 000111   000002 757100                    STAQ    2,,PR0
         0 000112   000665 710000 0                  TRA     s:14666

      593    14504    2           CASE( %XSP_PEV_ARP,

      594    14505    2                 %XSP_PEV_ARU);
      595    14506    2               XSS$U_ABORT = XSS_U_ABORT;

  14506  0 000113   000100 100400                    MLR     fill='000'O
         0 000114   000000 000020 xsym               ADSC9   XSS_U_ABORT              cn=0,n=16
         0 000115   000000 000020                    ADSC9   0,,PR0                   cn=0,n=16

      596    14507    2               XSS$U_ABORT.FNC = %XSS_FNC_SUABREQ#;

  14507  0 000116   065000 236003                    LDQ     27136,DU
         0 000117   000000 552140                    STBQ    0,'40'O,PR0

      597    14508    2               XSS$U_ABORT.DATA = VBLK.DATA;

  14508  0 000120   100004 237100                    LDAQ    4,,PR1
         0 000121   000002 757100                    STAQ    2,,PR0
         0 000122   000665 710000 0                  TRA     s:14666

      598    14509    2           CASE( %XSP_PEV_CP);

PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:130  
      599    14510    2               XSS$CONNECT = XSS_CONNECT;

  14510  0 000123   000100 100400                    MLR     fill='000'O
         0 000124   000000 000054 xsym               ADSC9   XSS_CONNECT              cn=0,n=44
         0 000125   000000 000054                    ADSC9   0,,PR0                   cn=0,n=44

      600    14511    2               XSS$CONNECT.FNC = %XSS_FNC_SCONREQ#;

  14511  0 000126   025000 236003                    LDQ     10752,DU
         0 000127   000000 552140                    STBQ    0,'40'O,PR0

      601    14512    2               XSS$CONNECT.DATA = VBLK.DATA;

  14512  0 000130   100004 237100                    LDAQ    4,,PR1
         0 000131   000002 757100                    STAQ    2,,PR0

      602    14513    2               XSS$CONNECT.SERNUM = XSP$CONNECT.SERNUM;

  14513  0 000132   100001 473500                    LDP3    1,,PR1
         0 000133   300004 235100                    LDA     4,,PR3
         0 000134   000004 755100                    STA     4,,PR0

      603    14514    2               XSS$CONNECT.CALLING$ = XSP$CONNECT.CALLING$;

  14514  0 000135   100001 473500                    LDP3    1,,PR1
         0 000136   300006 236100                    LDQ     6,,PR3
         0 000137   000006 756100                    STQ     6,,PR0

      604    14515    2               XSS$CONNECT.CALLED$ = XSP$CONNECT.CALLED$;

  14515  0 000140   100001 473500                    LDP3    1,,PR1
         0 000141   300007 236100                    LDQ     7,,PR3
         0 000142   000007 756100                    STQ     7,,PR0

      605    14516    2               XSS$CONNECT.ITOKENS = XSP$CONNECT.ITOKENS;

  14516  0 000143   100001 473500                    LDP3    1,,PR1
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:131  
         0 000144   300010 236100                    LDQ     8,,PR3
         0 000145   000010 552140                    STBQ    8,'40'O,PR0

      606    14517    2               XSS$CONNECT.SFU = XSP$CONNECT.SFU;

  14517  0 000146   100001 473500                    LDP3    1,,PR1
         0 000147   300010 720100                    LXL0    8,,PR3
         0 000150   000010 440100                    SXL0    8,,PR0

      607    14518    2               XSS$CONNECT.QOS = XSP$CONNECT.QOS;

  14518  0 000151   100001 473500                    LDP3    1,,PR1
         0 000152   300011 235100                    LDA     9,,PR3
         0 000153   000011 755100                    STA     9,,PR0
         0 000154   000665 710000 0                  TRA     s:14666

      608    14519    2           CASE( %XSP_PEV_CPA,

      609    14520    2                 %XSP_PEV_CPR);
      610    14521    2               XSS$CONNECT = XSS_CONNECT;

  14521  0 000155   000100 100400                    MLR     fill='000'O
         0 000156   000000 000054 xsym               ADSC9   XSS_CONNECT              cn=0,n=44
         0 000157   000000 000054                    ADSC9   0,,PR0                   cn=0,n=44

      611    14522    2               XSS$CONNECT.FNC = %XSS_FNC_SCONRSP#;

  14522  0 000160   027000 236003                    LDQ     11776,DU
         0 000161   000000 552140                    STBQ    0,'40'O,PR0

      612    14523    2               XSS$CONNECT.RESULT = XSP$CONNECT.RESULT;

  14523  0 000162   100001 473500                    LDP3    1,,PR1
         0 000163   300010 236100                    LDQ     8,,PR3
         0 000164   000010 552120                    STBQ    8,'20'O,PR0

      613    14524    2               XSS$CONNECT.DATA = VBLK.DATA;
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:132  

  14524  0 000165   100004 237100                    LDAQ    4,,PR1
         0 000166   000002 757100                    STAQ    2,,PR0

      614    14525    2               XSS$CONNECT.SERNUM = XSP$CONNECT.SERNUM;

  14525  0 000167   100001 473500                    LDP3    1,,PR1
         0 000170   300004 235100                    LDA     4,,PR3
         0 000171   000004 755100                    STA     4,,PR0

      615    14526    2               XSS$CONNECT.CALLING$ = XSP$CONNECT.CALLING$;

  14526  0 000172   100001 473500                    LDP3    1,,PR1
         0 000173   300006 236100                    LDQ     6,,PR3
         0 000174   000006 756100                    STQ     6,,PR0

      616    14527    2               XSS$CONNECT.RESPONDING$ = XSP$CONNECT.RESPONDING$;

  14527  0 000175   100001 473500                    LDP3    1,,PR1
         0 000176   300007 236100                    LDQ     7,,PR3
         0 000177   000007 756100                    STQ     7,,PR0

      617    14528    2               XSS$CONNECT.ITOKENS = XSP$CONNECT.ITOKENS;

  14528  0 000200   100001 473500                    LDP3    1,,PR1
         0 000201   300010 236100                    LDQ     8,,PR3
         0 000202   000010 552140                    STBQ    8,'40'O,PR0

      618    14529    2               XSS$CONNECT.SFU = XSP$CONNECT.SFU;

  14529  0 000203   100001 473500                    LDP3    1,,PR1
         0 000204   300010 720100                    LXL0    8,,PR3
         0 000205   000010 440100                    SXL0    8,,PR0

      619    14530    2               XSS$CONNECT.QOS = XSP$CONNECT.QOS;

  14530  0 000206   100001 473500                    LDP3    1,,PR1
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:133  
         0 000207   300011 235100                    LDA     9,,PR3
         0 000210   000011 755100                    STA     9,,PR0
         0 000211   000665 710000 0                  TRA     s:14666

      620    14531    2           CASE( %XSP_PEV_RS);

      621    14532    2               XSS$RESYNCHRONIZE = XSS_RESYNCHRONIZE;

  14532  0 000212   000100 100400                    MLR     fill='000'O
         0 000213   000000 000024 xsym               ADSC9   XSS_RESYNCHRONIZE        cn=0,n=20
         0 000214   000000 000024                    ADSC9   0,,PR0                   cn=0,n=20

      622    14533    2               XSS$RESYNCHRONIZE.FNC = %XSS_FNC_SRSXREQ#;

  14533  0 000215   043000 236003                    LDQ     17920,DU
         0 000216   000000 552140                    STBQ    0,'40'O,PR0

      623    14534    2               XSS$RESYNCHRONIZE.TYPE = XSP$RESYNCHRONIZE.TYPE;

  14534  0 000217   100001 473500                    LDP3    1,,PR1
         0 000220   300000 236100                    LDQ     0,,PR3
         0 000221   000000 552110                    STBQ    0,'10'O,PR0

      624    14535    2               XSS$RESYNCHRONIZE.TOKENS = XSP$RESYNCHRONIZE.TOKENS;

  14535  0 000222   100001 473500                    LDP3    1,,PR1
         0 000223   300000 236100                    LDQ     0,,PR3
         0 000224   000000 552104                    STBQ    0,'04'O,PR0

      625    14536    2               XSS$RESYNCHRONIZE.DATA = VBLK.DATA;

  14536  0 000225   100004 237100                    LDAQ    4,,PR1
         0 000226   000002 757100                    STAQ    2,,PR0

      626    14537    2               XSS$RESYNCHRONIZE.SERNUM = XSP$RESYNCHRONIZE.SERNUM;

  14537  0 000227   100001 473500                    LDP3    1,,PR1
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:134  
         0 000230   300004 235100                    LDA     4,,PR3
         0 000231   000004 755100                    STA     4,,PR0
         0 000232   000665 710000 0                  TRA     s:14666

      627    14538    2           CASE( %XSP_PEV_RSA);

      628    14539    2               XSS$RESYNCHRONIZE = XSS_RESYNCHRONIZE;

  14539  0 000233   000100 100400                    MLR     fill='000'O
         0 000234   000000 000024 xsym               ADSC9   XSS_RESYNCHRONIZE        cn=0,n=20
         0 000235   000000 000024                    ADSC9   0,,PR0                   cn=0,n=20

      629    14540    2               XSS$RESYNCHRONIZE.FNC = %XSS_FNC_SRSXRSP#;

  14540  0 000236   045000 236003                    LDQ     18944,DU
         0 000237   000000 552140                    STBQ    0,'40'O,PR0

      630    14541    2               XSS$RESYNCHRONIZE.TYPE = XSP$RESYNCHRONIZE.TYPE;

  14541  0 000240   100001 473500                    LDP3    1,,PR1
         0 000241   300000 236100                    LDQ     0,,PR3
         0 000242   000000 552110                    STBQ    0,'10'O,PR0

      631    14542    2               XSS$RESYNCHRONIZE.TOKENS = XSP$RESYNCHRONIZE.TOKENS;

  14542  0 000243   100001 473500                    LDP3    1,,PR1
         0 000244   300000 236100                    LDQ     0,,PR3
         0 000245   000000 552104                    STBQ    0,'04'O,PR0

      632    14543    2               XSS$RESYNCHRONIZE.DATA = VBLK.DATA;

  14543  0 000246   100004 237100                    LDAQ    4,,PR1
         0 000247   000002 757100                    STAQ    2,,PR0

      633    14544    2               XSS$RESYNCHRONIZE.SERNUM = XSP$RESYNCHRONIZE.SERNUM;

  14544  0 000250   100001 473500                    LDP3    1,,PR1
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:135  
         0 000251   300004 235100                    LDA     4,,PR3
         0 000252   000004 755100                    STA     4,,PR0
         0 000253   000665 710000 0                  TRA     s:14666

      634    14545    2           CASE( %XSP_PEV_TC);

      635    14546    2               XSS$CAPABILITY_DATA = XSS_CAPABILITY_DATA;

  14546  0 000254   000100 100400                    MLR     fill='000'O
         0 000255   000000 000020 xsym               ADSC9   XSS_CAPABILITY_DATA      cn=0,n=16
         0 000256   000000 000020                    ADSC9   0,,PR0                   cn=0,n=16

      636    14547    2               XSS$CAPABILITY_DATA.FNC = %XSS_FNC_SCADREQ#;

  14547  0 000257   021000 236003                    LDQ     8704,DU
         0 000260   000000 552140                    STBQ    0,'40'O,PR0

      637    14548    2               XSS$CAPABILITY_DATA.DATA = VBLK.DATA;

  14548  0 000261   100004 237100                    LDAQ    4,,PR1
         0 000262   000002 757100                    STAQ    2,,PR0
         0 000263   000665 710000 0                  TRA     s:14666

      638    14549    2           CASE( %XSP_PEV_TCC);

      639    14550    2               XSS$CAPABILITY_DATA = XSS_CAPABILITY_DATA;

  14550  0 000264   000100 100400                    MLR     fill='000'O
         0 000265   000000 000020 xsym               ADSC9   XSS_CAPABILITY_DATA      cn=0,n=16
         0 000266   000000 000020                    ADSC9   0,,PR0                   cn=0,n=16

      640    14551    2               XSS$CAPABILITY_DATA.FNC = %XSS_FNC_SCADRSP#;

  14551  0 000267   023000 236003                    LDQ     9728,DU
         0 000270   000000 552140                    STBQ    0,'40'O,PR0

      641    14552    2               XSS$CAPABILITY_DATA.DATA = VBLK.DATA;
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:136  

  14552  0 000271   100004 237100                    LDAQ    4,,PR1
         0 000272   000002 757100                    STAQ    2,,PR0
         0 000273   000665 710000 0                  TRA     s:14666

      642    14553    2           CASE( %XSP_PEV_TD);

      643    14554    2               XSS$DATA = XSS_DATA;

  14554  0 000274   000100 100400                    MLR     fill='000'O
         0 000275   000000 000020 xsym               ADSC9   XSS_DATA                 cn=0,n=16
         0 000276   000000 000020                    ADSC9   0,,PR0                   cn=0,n=16

      644    14555    2               XSS$DATA.FNC = %XSS_FNC_SDATREQ#;

  14555  0 000277   033000 236003                    LDQ     13824,DU
         0 000300   000000 552140                    STBQ    0,'40'O,PR0

      645    14556    2               XSS$DATA.DATA = VBLK.DATA;

  14556  0 000301   100004 237100                    LDAQ    4,,PR1
         0 000302   000002 757100                    STAQ    2,,PR0
         0 000303   000665 710000 0                  TRA     s:14666

      646    14557    2           CASE( %XSP_PEV_TE);

      647    14558    2               XSS$EXPEDITED_DATA = XSS_EXPEDITED_DATA;

  14558  0 000304   000100 100400                    MLR     fill='000'O
         0 000305   000000 000020 xsym               ADSC9   XSS_EXPEDITED_DATA       cn=0,n=16
         0 000306   000000 000020                    ADSC9   0,,PR0                   cn=0,n=16

      648    14559    2               XSS$EXPEDITED_DATA.FNC = %XSS_FNC_SEXPREQ#;

  14559  0 000307   035000 236003                    LDQ     14848,DU
         0 000310   000000 552140                    STBQ    0,'40'O,PR0

PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:137  
      649    14560    2               XSS$EXPEDITED_DATA.DATA = VBLK.DATA;

  14560  0 000311   100004 237100                    LDAQ    4,,PR1
         0 000312   000002 757100                    STAQ    2,,PR0
         0 000313   000665 710000 0                  TRA     s:14666

      650    14561    2           CASE( %XSP_PEV_SACDREQ);

      651    14562    2               XSS$ACTIVITY_DISCARD = XSS_ACTIVITY_DISCARD;

  14562  0 000314   000100 100400                    MLR     fill='000'O
         0 000315   000000 000010 xsym               ADSC9   XSS_ACTIVITY_DISCARD     cn=0,n=8
         0 000316   000000 000010                    ADSC9   0,,PR0                   cn=0,n=8

      652    14563    2               XSS$ACTIVITY_DISCARD.FNC = %XSS_FNC_SACDREQ#;

  14563  0 000317   001000 236003                    LDQ     512,DU
         0 000320   000000 552140                    STBQ    0,'40'O,PR0

      653    14564    2               XSS$ACTIVITY_DISCARD.REASON = XSP$ACTIVITY_DISCARD.REASON;

  14564  0 000321   100001 473500                    LDP3    1,,PR1
         0 000322   300000 236100                    LDQ     0,,PR3
         0 000323   000000 552110                    STBQ    0,'10'O,PR0
         0 000324   000665 710000 0                  TRA     s:14666

      654    14565    2           CASE( %XSP_PEV_SACDRSP);

      655    14566    2               XSS$ACTIVITY_DISCARD = XSS_ACTIVITY_DISCARD;

  14566  0 000325   000100 100400                    MLR     fill='000'O
         0 000326   000000 000010 xsym               ADSC9   XSS_ACTIVITY_DISCARD     cn=0,n=8
         0 000327   000000 000010                    ADSC9   0,,PR0                   cn=0,n=8

      656    14567    2               XSS$ACTIVITY_DISCARD.FNC = %XSS_FNC_SACDRSP#;

  14567  0 000330   003000 236003                    LDQ     1536,DU
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:138  
         0 000331   000000 552140                    STBQ    0,'40'O,PR0

      657    14568    2               XSS$ACTIVITY_DISCARD.REASON = XSP$ACTIVITY_DISCARD.REASON;

  14568  0 000332   100001 473500                    LDP3    1,,PR1
         0 000333   300000 236100                    LDQ     0,,PR3
         0 000334   000000 552110                    STBQ    0,'10'O,PR0
         0 000335   000665 710000 0                  TRA     s:14666

      658    14569    2           CASE( %XSP_PEV_SACEREQ);

      659    14570    2               XSS$ACTIVITY_END = XSS_ACTIVITY_END;

  14570  0 000336   000100 100400                    MLR     fill='000'O
         0 000337   000000 000024 xsym               ADSC9   XSS_ACTIVITY_END         cn=0,n=20
         0 000340   000000 000024                    ADSC9   0,,PR0                   cn=0,n=20

      660    14571    2               XSS$ACTIVITY_END.FNC = %XSS_FNC_SACEREQ#;

  14571  0 000341   005000 236003                    LDQ     2560,DU
         0 000342   000000 552140                    STBQ    0,'40'O,PR0

      661    14572    2               XSS$ACTIVITY_END.DATA = VBLK.DATA;

  14572  0 000343   100004 237100                    LDAQ    4,,PR1
         0 000344   000002 757100                    STAQ    2,,PR0

      662    14573    2               XSS$ACTIVITY_END.SERNUM = XSP$ACTIVITY_END.SERNUM;

  14573  0 000345   100001 473500                    LDP3    1,,PR1
         0 000346   300004 235100                    LDA     4,,PR3
         0 000347   000004 755100                    STA     4,,PR0
         0 000350   000665 710000 0                  TRA     s:14666

      663    14574    2           CASE( %XSP_PEV_SACERSP);

      664    14575    2               XSS$ACTIVITY_END = XSS_ACTIVITY_END;
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:139  

  14575  0 000351   000100 100400                    MLR     fill='000'O
         0 000352   000000 000024 xsym               ADSC9   XSS_ACTIVITY_END         cn=0,n=20
         0 000353   000000 000024                    ADSC9   0,,PR0                   cn=0,n=20

      665    14576    2               XSS$ACTIVITY_END.FNC = %XSS_FNC_SACERSP#;

  14576  0 000354   007000 236003                    LDQ     3584,DU
         0 000355   000000 552140                    STBQ    0,'40'O,PR0

      666    14577    2               XSS$ACTIVITY_END.DATA = VBLK.DATA;

  14577  0 000356   100004 237100                    LDAQ    4,,PR1
         0 000357   000002 757100                    STAQ    2,,PR0

      667    14578    2               XSS$ACTIVITY_END.SERNUM = XSP$ACTIVITY_END.SERNUM;

  14578  0 000360   100001 473500                    LDP3    1,,PR1
         0 000361   300004 235100                    LDA     4,,PR3
         0 000362   000004 755100                    STA     4,,PR0
         0 000363   000665 710000 0                  TRA     s:14666

      668    14579    2           CASE( %XSP_PEV_SACIREQ);

      669    14580    2               XSS$ACTIVITY_INTERRUPT = XSS_ACTIVITY_INTERRUPT;

  14580  0 000364   000100 100400                    MLR     fill='000'O
         0 000365   000000 000010 xsym               ADSC9   XSS_ACTIVITY_INTERRUPT   cn=0,n=8
         0 000366   000000 000010                    ADSC9   0,,PR0                   cn=0,n=8

      670    14581    2               XSS$ACTIVITY_INTERRUPT.FNC = %XSS_FNC_SACIREQ#;

  14581  0 000367   011000 236003                    LDQ     4608,DU
         0 000370   000000 552140                    STBQ    0,'40'O,PR0

      671    14582    2               XSS$ACTIVITY_INTERRUPT.REASON = XSP$ACTIVITY_INTERRUPT.REASON;

PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:140  
  14582  0 000371   100001 473500                    LDP3    1,,PR1
         0 000372   300000 236100                    LDQ     0,,PR3
         0 000373   000000 552110                    STBQ    0,'10'O,PR0
         0 000374   000665 710000 0                  TRA     s:14666

      672    14583    2           CASE( %XSP_PEV_SACIRSP);

      673    14584    2               XSS$ACTIVITY_INTERRUPT = XSS_ACTIVITY_INTERRUPT;

  14584  0 000375   000100 100400                    MLR     fill='000'O
         0 000376   000000 000010 xsym               ADSC9   XSS_ACTIVITY_INTERRUPT   cn=0,n=8
         0 000377   000000 000010                    ADSC9   0,,PR0                   cn=0,n=8

      674    14585    2               XSS$ACTIVITY_INTERRUPT.FNC = %XSS_FNC_SACIRSP#;

  14585  0 000400   013000 236003                    LDQ     5632,DU
         0 000401   000000 552140                    STBQ    0,'40'O,PR0

      675    14586    2               XSS$ACTIVITY_INTERRUPT.REASON = XSP$ACTIVITY_INTERRUPT.REASON;

  14586  0 000402   100001 473500                    LDP3    1,,PR1
         0 000403   300000 236100                    LDQ     0,,PR3
         0 000404   000000 552110                    STBQ    0,'10'O,PR0
         0 000405   000665 710000 0                  TRA     s:14666

      676    14587    2           CASE( %XSP_PEV_SACRREQ);

      677    14588    2               XSS$ACTIVITY_RESUME = XSS_ACTIVITY_RESUME;

  14588  0 000406   000100 100400                    MLR     fill='000'O
         0 000407   000000 000064 xsym               ADSC9   XSS_ACTIVITY_RESUME      cn=0,n=52
         0 000410   000000 000064                    ADSC9   0,,PR0                   cn=0,n=52

      678    14589    2               XSS$ACTIVITY_RESUME.FNC = %XSS_FNC_SACRREQ#;

  14589  0 000411   015000 236003                    LDQ     6656,DU
         0 000412   000000 552140                    STBQ    0,'40'O,PR0
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:141  

      679    14590    2               XSS$ACTIVITY_RESUME.OSCID = XSP$ACTIVITY_RESUME.OSCID;

  14590  0 000413   100001 473500                    LDP3    1,,PR1
         0 000414   300000 236100                    LDQ     0,,PR3
         0 000415   000000 552110                    STBQ    0,'10'O,PR0

      680    14591    2               XSS$ACTIVITY_RESUME.DATA = VBLK.DATA;

  14591  0 000416   100004 237100                    LDAQ    4,,PR1
         0 000417   000002 757100                    STAQ    2,,PR0

      681    14592    2               XSS$ACTIVITY_RESUME.SERNUM = XSP$ACTIVITY_RESUME.SERNUM;

  14592  0 000420   100001 473500                    LDP3    1,,PR1
         0 000421   300004 235100                    LDA     4,,PR3
         0 000422   000004 755100                    STA     4,,PR0

      682    14593    2               XSS$ACTIVITY_RESUME.ACTID = XSP$ACTIVITY_RESUME.ACTID;

  14593  0 000423   100001 473500                    LDP3    1,,PR1
         0 000424   000100 100500                    MLR     fill='000'O
         0 000425   300010 000007                    ADSC9   8,,PR3                   cn=0,n=7
         0 000426   000010 000007                    ADSC9   8,,PR0                   cn=0,n=7

      683    14594    2               XSS$ACTIVITY_RESUME.OACTID = XSP$ACTIVITY_RESUME.OACTID;

  14594  0 000427   100001 473500                    LDP3    1,,PR1
         0 000430   000100 100500                    MLR     fill='000'O
         0 000431   300012 000007                    ADSC9   10,,PR3                  cn=0,n=7
         0 000432   000012 000007                    ADSC9   10,,PR0                  cn=0,n=7
         0 000433   000665 710000 0                  TRA     s:14666

      684    14595    2           CASE( %XSP_PEV_SACSREQ);

      685    14596    2               XSS$ACTIVITY_START = XSS_ACTIVITY_START;

PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:142  
  14596  0 000434   000100 100400                    MLR     fill='000'O
         0 000435   000000 000030 xsym               ADSC9   XSS_ACTIVITY_START       cn=0,n=24
         0 000436   000000 000030                    ADSC9   0,,PR0                   cn=0,n=24

      686    14597    2               XSS$ACTIVITY_START.FNC = %XSS_FNC_SACSREQ#;

  14597  0 000437   017000 236003                    LDQ     7680,DU
         0 000440   000000 552140                    STBQ    0,'40'O,PR0

      687    14598    2               XSS$ACTIVITY_START.DATA = VBLK.DATA;

  14598  0 000441   100004 237100                    LDAQ    4,,PR1
         0 000442   000002 757100                    STAQ    2,,PR0

      688    14599    2               XSS$ACTIVITY_START.ACTID = XSP$ACTIVITY_START.ACTID;

  14599  0 000443   100001 473500                    LDP3    1,,PR1
         0 000444   000100 100500                    MLR     fill='000'O
         0 000445   300004 000007                    ADSC9   4,,PR3                   cn=0,n=7
         0 000446   000004 000007                    ADSC9   4,,PR0                   cn=0,n=7
         0 000447   000665 710000 0                  TRA     s:14666

      689    14600    2           CASE( %XSP_PEV_SCTGREQ);

      690    14601    2               XSS$CONTROL_GIVE = XSS_CONTROL_GIVE;

  14601  0 000450   000100 100400                    MLR     fill='000'O
         0 000451   000000 000010 xsym               ADSC9   XSS_CONTROL_GIVE         cn=0,n=8
         0 000452   000000 000010                    ADSC9   0,,PR0                   cn=0,n=8

      691    14602    2               XSS$CONTROL_GIVE.FNC = %XSS_FNC_SCTGREQ#;

  14602  0 000453   031000 236003                    LDQ     12800,DU
         0 000454   000000 552140                    STBQ    0,'40'O,PR0
         0 000455   000665 710000 0                  TRA     s:14666

      692    14603    2           CASE( %XSP_PEV_STKGREQ);
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:143  

      693    14604    2               XSS$TOKEN_GIVE = XSS_TOKEN_GIVE;

  14604  0 000456   000100 100400                    MLR     fill='000'O
         0 000457   000000 000010 xsym               ADSC9   XSS_TOKEN_GIVE           cn=0,n=8
         0 000460   000000 000010                    ADSC9   0,,PR0                   cn=0,n=8

      694    14605    2               XSS$TOKEN_GIVE.FNC = %XSS_FNC_STKGREQ#;

  14605  0 000461   057000 236003                    LDQ     24064,DU
         0 000462   000000 552140                    STBQ    0,'40'O,PR0

      695    14606    2               XSS$TOKEN_GIVE.TOKENS = XSP$TOKEN_GIVE.TOKENS;

  14606  0 000463   100001 473500                    LDP3    1,,PR1
         0 000464   300000 236100                    LDQ     0,,PR3
         0 000465   000000 552104                    STBQ    0,'04'O,PR0
         0 000466   000665 710000 0                  TRA     s:14666

      696    14607    2           CASE( %XSP_PEV_STKPREQ);

      697    14608    2               XSS$TOKEN_PLEASE = XSS_TOKEN_PLEASE;

  14608  0 000467   000100 100400                    MLR     fill='000'O
         0 000470   000000 000020 xsym               ADSC9   XSS_TOKEN_PLEASE         cn=0,n=16
         0 000471   000000 000020                    ADSC9   0,,PR0                   cn=0,n=16

      698    14609    2               XSS$TOKEN_PLEASE.FNC = %XSS_FNC_STKPREQ#;

  14609  0 000472   061000 236003                    LDQ     25088,DU
         0 000473   000000 552140                    STBQ    0,'40'O,PR0

      699    14610    2               XSS$TOKEN_PLEASE.TOKENS = XSP$TOKEN_PLEASE.TOKENS;

  14610  0 000474   100001 473500                    LDP3    1,,PR1
         0 000475   300000 236100                    LDQ     0,,PR3
         0 000476   000000 552104                    STBQ    0,'04'O,PR0
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:144  

      700    14611    2               XSS$TOKEN_PLEASE.DATA = VBLK.DATA;

  14611  0 000477   100004 237100                    LDAQ    4,,PR1
         0 000500   000002 757100                    STAQ    2,,PR0
         0 000501   000665 710000 0                  TRA     s:14666

      701    14612    2           CASE( %XSP_PEV_SRELREQ);

      702    14613    2               XSS$RELEASE = XSS_RELEASE;

  14613  0 000502   000100 100400                    MLR     fill='000'O
         0 000503   000000 000020 xsym               ADSC9   XSS_RELEASE              cn=0,n=16
         0 000504   000000 000020                    ADSC9   0,,PR0                   cn=0,n=16

      703    14614    2               XSS$RELEASE.FNC = %XSS_FNC_SRELREQ#;

  14614  0 000505   037000 236003                    LDQ     15872,DU
         0 000506   000000 552140                    STBQ    0,'40'O,PR0

      704    14615    2               XSS$RELEASE.DATA = VBLK.DATA;

  14615  0 000507   100004 237100                    LDAQ    4,,PR1
         0 000510   000002 757100                    STAQ    2,,PR0
         0 000511   000665 710000 0                  TRA     s:14666

      705    14616    2           CASE( %XSP_PEV_SRELRSP,

      706    14617    2                 %XSP_PEV_SRELRSN);
      707    14618    2               XSS$RELEASE = XSS_RELEASE;

  14618  0 000512   000100 100400                    MLR     fill='000'O
         0 000513   000000 000020 xsym               ADSC9   XSS_RELEASE              cn=0,n=16
         0 000514   000000 000020                    ADSC9   0,,PR0                   cn=0,n=16

      708    14619    2               XSS$RELEASE.FNC = %XSS_FNC_SRELRSP#;

PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:145  
  14619  0 000515   041000 236003                    LDQ     16896,DU
         0 000516   000000 552140                    STBQ    0,'40'O,PR0

      709    14620    2               XSS$RELEASE.RESULT = XSP$RELEASE.RESULT;

  14620  0 000517   100001 473500                    LDP3    1,,PR1
         0 000520   300000 236100                    LDQ     0,,PR3
         0 000521   000000 552104                    STBQ    0,'04'O,PR0

      710    14621    2               XSS$RELEASE.DATA = VBLK.DATA;

  14621  0 000522   100004 237100                    LDAQ    4,,PR1
         0 000523   000002 757100                    STAQ    2,,PR0
         0 000524   000665 710000 0                  TRA     s:14666

      711    14622    2           CASE( %XSP_PEV_SRSXREQ);

      712    14623    2               XSS$RESYNCHRONIZE = XSS_RESYNCHRONIZE;

  14623  0 000525   000100 100400                    MLR     fill='000'O
         0 000526   000000 000024 xsym               ADSC9   XSS_RESYNCHRONIZE        cn=0,n=20
         0 000527   000000 000024                    ADSC9   0,,PR0                   cn=0,n=20

      713    14624    2               XSS$RESYNCHRONIZE.FNC = %XSS_FNC_SRSXREQ#;

  14624  0 000530   043000 236003                    LDQ     17920,DU
         0 000531   000000 552140                    STBQ    0,'40'O,PR0

      714    14625    2               XSS$RESYNCHRONIZE.TYPE = XSP$RESYNCHRONIZE.TYPE;

  14625  0 000532   100001 473500                    LDP3    1,,PR1
         0 000533   300000 236100                    LDQ     0,,PR3
         0 000534   000000 552110                    STBQ    0,'10'O,PR0

      715    14626    2               XSS$RESYNCHRONIZE.TOKENS = XSP$RESYNCHRONIZE.TOKENS;

  14626  0 000535   100001 473500                    LDP3    1,,PR1
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:146  
         0 000536   300000 236100                    LDQ     0,,PR3
         0 000537   000000 552104                    STBQ    0,'04'O,PR0

      716    14627    2               XSS$RESYNCHRONIZE.DATA = VBLK.DATA;

  14627  0 000540   100004 237100                    LDAQ    4,,PR1
         0 000541   000002 757100                    STAQ    2,,PR0

      717    14628    2               XSS$RESYNCHRONIZE.SERNUM = XSP$RESYNCHRONIZE.SERNUM;

  14628  0 000542   100001 473500                    LDP3    1,,PR1
         0 000543   300004 235100                    LDA     4,,PR3
         0 000544   000004 755100                    STA     4,,PR0
         0 000545   000665 710000 0                  TRA     s:14666

      718    14629    2           CASE( %XSP_PEV_SRSXRSP);

      719    14630    2               XSS$RESYNCHRONIZE = XSS_RESYNCHRONIZE;

  14630  0 000546   000100 100400                    MLR     fill='000'O
         0 000547   000000 000024 xsym               ADSC9   XSS_RESYNCHRONIZE        cn=0,n=20
         0 000550   000000 000024                    ADSC9   0,,PR0                   cn=0,n=20

      720    14631    2               XSS$RESYNCHRONIZE.FNC = %XSS_FNC_SRSXRSP#;

  14631  0 000551   045000 236003                    LDQ     18944,DU
         0 000552   000000 552140                    STBQ    0,'40'O,PR0

      721    14632    2               XSS$RESYNCHRONIZE.TYPE = XSP$RESYNCHRONIZE.TYPE;

  14632  0 000553   100001 473500                    LDP3    1,,PR1
         0 000554   300000 236100                    LDQ     0,,PR3
         0 000555   000000 552110                    STBQ    0,'10'O,PR0

      722    14633    2               XSS$RESYNCHRONIZE.TOKENS = XSP$RESYNCHRONIZE.TOKENS;

  14633  0 000556   100001 473500                    LDP3    1,,PR1
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:147  
         0 000557   300000 236100                    LDQ     0,,PR3
         0 000560   000000 552104                    STBQ    0,'04'O,PR0

      723    14634    2               XSS$RESYNCHRONIZE.DATA = VBLK.DATA;

  14634  0 000561   100004 237100                    LDAQ    4,,PR1
         0 000562   000002 757100                    STAQ    2,,PR0

      724    14635    2               XSS$RESYNCHRONIZE.SERNUM = XSP$RESYNCHRONIZE.SERNUM;

  14635  0 000563   100001 473500                    LDP3    1,,PR1
         0 000564   300004 235100                    LDA     4,,PR3
         0 000565   000004 755100                    STA     4,,PR0
         0 000566   000665 710000 0                  TRA     s:14666

      725    14636    2           CASE( %XSP_PEV_SSMAREQ);

      726    14637    2               XSS$SYNC_MAJOR = XSS_SYNC_MAJOR;

  14637  0 000567   000100 100400                    MLR     fill='000'O
         0 000570   000000 000024 xsym               ADSC9   XSS_SYNC_MAJOR           cn=0,n=20
         0 000571   000000 000024                    ADSC9   0,,PR0                   cn=0,n=20

      727    14638    2               XSS$SYNC_MAJOR.FNC = %XSS_FNC_SSMAREQ#;

  14638  0 000572   047000 236003                    LDQ     19968,DU
         0 000573   000000 552140                    STBQ    0,'40'O,PR0

      728    14639    2               XSS$SYNC_MAJOR.DATA = VBLK.DATA;

  14639  0 000574   100004 237100                    LDAQ    4,,PR1
         0 000575   000002 757100                    STAQ    2,,PR0

      729    14640    2               XSS$SYNC_MAJOR.SERNUM = XSP$SYNC_MAJOR.SERNUM;

  14640  0 000576   100001 473500                    LDP3    1,,PR1
         0 000577   300004 235100                    LDA     4,,PR3
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:148  
         0 000600   000004 755100                    STA     4,,PR0
         0 000601   000665 710000 0                  TRA     s:14666

      730    14641    2           CASE( %XSP_PEV_SSMARSP);

      731    14642    2               XSS$SYNC_MAJOR = XSS_SYNC_MAJOR;

  14642  0 000602   000100 100400                    MLR     fill='000'O
         0 000603   000000 000024 xsym               ADSC9   XSS_SYNC_MAJOR           cn=0,n=20
         0 000604   000000 000024                    ADSC9   0,,PR0                   cn=0,n=20

      732    14643    2               XSS$SYNC_MAJOR.FNC = %XSS_FNC_SSMARSP#;

  14643  0 000605   051000 236003                    LDQ     20992,DU
         0 000606   000000 552140                    STBQ    0,'40'O,PR0

      733    14644    2               XSS$SYNC_MAJOR.DATA = VBLK.DATA;

  14644  0 000607   100004 237100                    LDAQ    4,,PR1
         0 000610   000002 757100                    STAQ    2,,PR0

      734    14645    2               XSS$SYNC_MAJOR.SERNUM = XSP$SYNC_MAJOR.SERNUM;

  14645  0 000611   100001 473500                    LDP3    1,,PR1
         0 000612   300004 235100                    LDA     4,,PR3
         0 000613   000004 755100                    STA     4,,PR0
         0 000614   000665 710000 0                  TRA     s:14666

      735    14646    2           CASE( %XSP_PEV_SSMIREQ);

      736    14647    2               XSS$SYNC_MINOR = XSS_SYNC_MINOR;

  14647  0 000615   000100 100400                    MLR     fill='000'O
         0 000616   000000 000024 xsym               ADSC9   XSS_SYNC_MINOR           cn=0,n=20
         0 000617   000000 000024                    ADSC9   0,,PR0                   cn=0,n=20

      737    14648    2               XSS$SYNC_MINOR.FNC = %XSS_FNC_SSMIRSP#;
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:149  

  14648  0 000620   055000 236003                    LDQ     23040,DU
         0 000621   000000 552140                    STBQ    0,'40'O,PR0

      738    14649    2               XSS$SYNC_MINOR.TYPE = XSP$SYNC_MINOR.TYPE;

  14649  0 000622   100001 473500                    LDP3    1,,PR1
         0 000623   300000 236100                    LDQ     0,,PR3
         0 000624   000000 552110                    STBQ    0,'10'O,PR0

      739    14650    2               XSS$SYNC_MINOR.DATA = VBLK.DATA;

  14650  0 000625   100004 237100                    LDAQ    4,,PR1
         0 000626   000002 757100                    STAQ    2,,PR0

      740    14651    2               XSS$SYNC_MINOR.SERNUM = XSP$SYNC_MINOR.SERNUM;

  14651  0 000627   100001 473500                    LDP3    1,,PR1
         0 000630   300004 235100                    LDA     4,,PR3
         0 000631   000004 755100                    STA     4,,PR0
         0 000632   000665 710000 0                  TRA     s:14666

      741    14652    2           CASE( %XSP_PEV_SSMIRSP);

      742    14653    2               XSS$SYNC_MINOR = XSS_SYNC_MINOR;

  14653  0 000633   000100 100400                    MLR     fill='000'O
         0 000634   000000 000024 xsym               ADSC9   XSS_SYNC_MINOR           cn=0,n=20
         0 000635   000000 000024                    ADSC9   0,,PR0                   cn=0,n=20

      743    14654    2               XSS$SYNC_MINOR.FNC = %XSS_FNC_SSMIRSP#;

  14654  0 000636   055000 236003                    LDQ     23040,DU
         0 000637   000000 552140                    STBQ    0,'40'O,PR0

      744    14655    2               XSS$SYNC_MINOR.TYPE = XSP$SYNC_MINOR.TYPE;

PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:150  
  14655  0 000640   100001 473500                    LDP3    1,,PR1
         0 000641   300000 236100                    LDQ     0,,PR3
         0 000642   000000 552110                    STBQ    0,'10'O,PR0

      745    14656    2               XSS$SYNC_MINOR.DATA = VBLK.DATA;

  14656  0 000643   100004 237100                    LDAQ    4,,PR1
         0 000644   000002 757100                    STAQ    2,,PR0

      746    14657    2               XSS$SYNC_MINOR.SERNUM = XSP$SYNC_MINOR.SERNUM;

  14657  0 000645   100001 473500                    LDP3    1,,PR1
         0 000646   300004 235100                    LDA     4,,PR3
         0 000647   000004 755100                    STA     4,,PR0
         0 000650   000665 710000 0                  TRA     s:14666

      747    14658    2           CASE( %XSP_PEV_SUERREQ);

      748    14659    2               XSS$U_EXCEPTION_REPORT = XSS_U_EXCEPTION_REPORT;

  14659  0 000651   000100 100400                    MLR     fill='000'O
         0 000652   000000 000020 xsym               ADSC9   XSS_U_EXCEPTION_REPORT   cn=0,n=16
         0 000653   000000 000020                    ADSC9   0,,PR0                   cn=0,n=16

      749    14660    2               XSS$U_EXCEPTION_REPORT.FNC = %XSS_FNC_SUERREQ#;

  14660  0 000654   067000 236003                    LDQ     28160,DU
         0 000655   000000 552140                    STBQ    0,'40'O,PR0

      750    14661    2               XSS$U_EXCEPTION_REPORT.REASON = XSP$U_EXCEPTION_REPORT.REASON;

  14661  0 000656   100001 473500                    LDP3    1,,PR1
         0 000657   300000 236100                    LDQ     0,,PR3
         0 000660   000000 552110                    STBQ    0,'10'O,PR0

      751    14662    2               XSS$U_EXCEPTION_REPORT.DATA = VBLK.DATA;

PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:151  
  14662  0 000661   100004 237100                    LDAQ    4,,PR1
         0 000662   000002 757100                    STAQ    2,,PR0
         0 000663   000665 710000 0                  TRA     s:14666

      752    14663    2           CASE( ELSE);

      753    14664    2               ALTRETURN;

  14664  0 000664   000000 702200 xent               TSX2  ! X66_AALT

      754    14665    2           END;

      755    14666    1       XSS$GENERIC.SCID = XSP$GENERIC.PCID;

  14666  0 000665   100001 473500                    LDP3    1,,PR1
         0 000666   300000 236100                    LDQ     0,,PR3
         0 000667   000000 552120                    STBQ    0,'20'O,PR0

      756    14667            /* ..and send it on its way */
      757    14668    1       CALL XSS$SESSION( XSS$GENERIC)

  14668  0 000670   200022 630500                    EPPR0   SFPT$,,AUTO
         0 000671   000000 631400 1                  EPPR1   0
         0 000672   000000 701000 xent               TSX1    XSS$SESSION
         0 000673   000675 702000 0                  TSX2    s:14670
         0 000674   000703 710000 0                  TRA     s:14673

      758    14669    2       WHENALTRETURN DO;

      759    14670    2           XSP$GENERIC.ERROR = XSS$GENERIC.ERROR;

  14670  0 000675   200003 470500                    LDP0    @VBLK,,AUTO
         0 000676   000001 471500                    LDP1    1,,PR0
         0 000677   200022 473500                    LDP3    SFPT$,,AUTO
         0 000700   300001 236100                    LDQ     1,,PR3
         0 000701   100001 756100                    STQ     1,,PR1

PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:152  
      760    14671    2           ALTRETURN;

  14671  0 000702   000000 702200 xent               TSX2  ! X66_AALT

      761    14672    2           END;
      762    14673    1       RETURN;

  14673  0 000703   000000 702200 xent               TSX2  ! X66_ARET

(unnamed)
 Sect OctLoc
   1     000   000001 000000                                                    ....
      763    14674
      764    14675    1       END XSP$SSEND;

PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:153  
--  Include file information  --

   XSP_INTERNAL_M.:XSA1TOU  is referenced.
   XSP_INTERNAL_E.:XSA1TOU  is referenced.
   XSP_PRESENTATION_M.:XSA1TOU  is referenced.
   XSP_PRESENTATION_E.:XSA1TOU  is referenced.
   XSS_SESSION_M.:XSA1TOU  is referenced.
   XSS_SESSION_E.:XSA1TOU  is referenced.
      No diagnostics issued in procedure XSP$SSEND.
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:154  

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @VBLK                      4-0-0/d STRC(504)   r     1 SFPT
    22-0-0/w PTR         r     1 SFPT$                     *0-0-0/d STRC(396)   r     1 VBLK

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(72)    r     1 XSS_ACTIVITY_DISCARD       0-0-0/d STRC(180)   r     1 XSS_ACTIVITY_END
     0-0-0/w STRC(72)    r     1 XSS_ACTIVITY_INTERRUPT
     0-0-0/d STRC(468)   r     1 XSS_ACTIVITY_RESUME        0-0-0/d STRC(216)   r     1 XSS_ACTIVITY_START
     0-0-0/d STRC(144)   r     1 XSS_CAPABILITY_DATA        0-0-0/d STRC(396)   r     1 XSS_CONNECT
     0-0-0/w STRC(72)    r     1 XSS_CONTROL_GIVE           0-0-0/d STRC(144)   r     1 XSS_DATA
     0-0-0/d STRC(144)   r     1 XSS_EXPEDITED_DATA         0-0-0/d STRC(144)   r     1 XSS_RELEASE
     0-0-0/d STRC(180)   r     1 XSS_RESYNCHRONIZE          0-0-0/d STRC(180)   r     1 XSS_SYNC_MAJOR
     0-0-0/d STRC(180)   r     1 XSS_SYNC_MINOR             0-0-0/w STRC(72)    r     1 XSS_TOKEN_GIVE
     0-0-0/d STRC(144)   r     1 XSS_TOKEN_PLEASE           0-0-0/d STRC(144)   r     1 XSS_TYPED_DATA
     0-0-0/d STRC(144)   r     1 XSS_U_ABORT
     0-0-0/d STRC(144)   r     1 XSS_U_EXCEPTION_REPORT

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(72)    r     1 XSP$ACTIVITY_DISCARD       0-0-0/w STRC(180)   r     1 XSP$ACTIVITY_END
     0-0-0/w STRC(72)    r     1 XSP$ACTIVITY_INTERRUPT
     0-0-0/w STRC(468)   r     1 XSP$ACTIVITY_RESUME        0-0-0/w STRC(216)   r     1 XSP$ACTIVITY_START
     0-0-0/w STRC(398)   r     1 XSP$CONNECT                0-0-0/w STRC(504)   r     1 XSP$GENERIC
     0-0-0/w STRC(108)   r     1 XSP$RELEASE                0-0-0/w STRC(216)   r     1 XSP$RESYNCHRONIZE
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:155  
     0-0-0/w STRC(180)   r     1 XSP$SYNC_MAJOR             0-0-0/w STRC(180)   r     1 XSP$SYNC_MINOR
     0-0-0/w STRC(72)    r     1 XSP$TOKEN_GIVE             0-0-0/w STRC(108)   r     1 XSP$TOKEN_PLEASE
     0-0-0/w STRC(108)   r     1 XSP$U_EXCEPTION_REPORT
     0-0-0/w STRC(72)    r     1 XSS$ACTIVITY_DISCARD       0-0-0/d STRC(180)   r     1 XSS$ACTIVITY_END
     0-0-0/w STRC(72)    r     1 XSS$ACTIVITY_INTERRUPT
     0-0-0/d STRC(468)   r     1 XSS$ACTIVITY_RESUME        0-0-0/d STRC(216)   r     1 XSS$ACTIVITY_START
     0-0-0/d STRC(144)   r     1 XSS$CAPABILITY_DATA        0-0-0/d STRC(396)   r     1 XSS$CONNECT
     0-0-0/w STRC(72)    r     1 XSS$CONTROL_GIVE           0-0-0/d STRC(144)   r     1 XSS$DATA
     0-0-0/d STRC(144)   r     1 XSS$EXPEDITED_DATA         0-0-0/d STRC(504)   r     1 XSS$GENERIC
     0-0-0/d STRC(144)   r     1 XSS$RELEASE                0-0-0/d STRC(180)   r     1 XSS$RESYNCHRONIZE
     0-0-0/d STRC(180)   r     1 XSS$SYNC_MAJOR             0-0-0/d STRC(180)   r     1 XSS$SYNC_MINOR
     0-0-0/w STRC(72)    r     1 XSS$TOKEN_GIVE             0-0-0/d STRC(144)   r     1 XSS$TOKEN_PLEASE
     0-0-0/d STRC(144)   r     1 XSS$TYPED_DATA             0-0-0/d STRC(144)   r     1 XSS$U_ABORT
     0-0-0/d STRC(144)   r     1 XSS$U_EXCEPTION_REPORT


   Procedure XSP$SSEND requires 452 words for executable code.
   Procedure XSP$SSEND requires 20 words of local(AUTO) storage.

    No errors detected in file XSP$ENCODE.:XSA1TSI    .
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:156  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:157  
          MINI XREF LISTING

SFPT
      3238**DCL     14495--ASSIGN
SFPT.ERRDEF
      3292**DCL      3312--REDEF
SFPT$
     14493**DCL      3385--IMP-PTR  3531--IMP-PTR  3629--IMP-PTR  3780--IMP-PTR  3878--IMP-PTR  4104--IMP-PTR
      4267--IMP-PTR  4413--IMP-PTR  4736--IMP-PTR  4860--IMP-PTR  5004--IMP-PTR  5148--IMP-PTR  5234--IMP-PTR
      5320--IMP-PTR  5472--IMP-PTR  5685--IMP-PTR  5844--IMP-PTR  6003--IMP-PTR  6133--IMP-PTR  6325--IMP-PTR
      6469--IMP-PTR  6613--IMP-PTR 14495<<ASSIGN  14501>>ASSIGN  14502>>ASSIGN  14503>>ASSIGN  14506>>ASSIGN
     14507>>ASSIGN  14508>>ASSIGN  14510>>ASSIGN  14511>>ASSIGN  14512>>ASSIGN  14513>>ASSIGN  14514>>ASSIGN
     14515>>ASSIGN  14516>>ASSIGN  14517>>ASSIGN  14518>>ASSIGN  14521>>ASSIGN  14522>>ASSIGN  14523>>ASSIGN
     14524>>ASSIGN  14525>>ASSIGN  14526>>ASSIGN  14527>>ASSIGN  14528>>ASSIGN  14529>>ASSIGN  14530>>ASSIGN
     14532>>ASSIGN  14533>>ASSIGN  14534>>ASSIGN  14535>>ASSIGN  14536>>ASSIGN  14537>>ASSIGN  14539>>ASSIGN
     14540>>ASSIGN  14541>>ASSIGN  14542>>ASSIGN  14543>>ASSIGN  14544>>ASSIGN  14546>>ASSIGN  14547>>ASSIGN
     14548>>ASSIGN  14550>>ASSIGN  14551>>ASSIGN  14552>>ASSIGN  14554>>ASSIGN  14555>>ASSIGN  14556>>ASSIGN
     14558>>ASSIGN  14559>>ASSIGN  14560>>ASSIGN  14562>>ASSIGN  14563>>ASSIGN  14564>>ASSIGN  14566>>ASSIGN
     14567>>ASSIGN  14568>>ASSIGN  14570>>ASSIGN  14571>>ASSIGN  14572>>ASSIGN  14573>>ASSIGN  14575>>ASSIGN
     14576>>ASSIGN  14577>>ASSIGN  14578>>ASSIGN  14580>>ASSIGN  14581>>ASSIGN  14582>>ASSIGN  14584>>ASSIGN
     14585>>ASSIGN  14586>>ASSIGN  14588>>ASSIGN  14589>>ASSIGN  14590>>ASSIGN  14591>>ASSIGN  14592>>ASSIGN
     14593>>ASSIGN  14594>>ASSIGN  14596>>ASSIGN  14597>>ASSIGN  14598>>ASSIGN  14599>>ASSIGN  14601>>ASSIGN
     14602>>ASSIGN  14604>>ASSIGN  14605>>ASSIGN  14606>>ASSIGN  14608>>ASSIGN  14609>>ASSIGN  14610>>ASSIGN
     14611>>ASSIGN  14613>>ASSIGN  14614>>ASSIGN  14615>>ASSIGN  14618>>ASSIGN  14619>>ASSIGN  14620>>ASSIGN
     14621>>ASSIGN  14623>>ASSIGN  14624>>ASSIGN  14625>>ASSIGN  14626>>ASSIGN  14627>>ASSIGN  14628>>ASSIGN
     14630>>ASSIGN  14631>>ASSIGN  14632>>ASSIGN  14633>>ASSIGN  14634>>ASSIGN  14635>>ASSIGN  14637>>ASSIGN
     14638>>ASSIGN  14639>>ASSIGN  14640>>ASSIGN  14642>>ASSIGN  14643>>ASSIGN  14644>>ASSIGN  14645>>ASSIGN
     14647>>ASSIGN  14648>>ASSIGN  14649>>ASSIGN  14650>>ASSIGN  14651>>ASSIGN  14653>>ASSIGN  14654>>ASSIGN
     14655>>ASSIGN  14656>>ASSIGN  14657>>ASSIGN  14659>>ASSIGN  14660>>ASSIGN  14661>>ASSIGN  14662>>ASSIGN
     14666>>ASSIGN  14668>>CALL    14670>>ASSIGN
VBLK
     14361**DCL        12--PROC
VBLK.DATA
     14435**DCL     14503>>ASSIGN  14508>>ASSIGN  14512>>ASSIGN  14524>>ASSIGN  14536>>ASSIGN  14543>>ASSIGN
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:158  
     14548>>ASSIGN  14552>>ASSIGN  14556>>ASSIGN  14560>>ASSIGN  14572>>ASSIGN  14577>>ASSIGN  14591>>ASSIGN
     14598>>ASSIGN  14611>>ASSIGN  14615>>ASSIGN  14621>>ASSIGN  14627>>ASSIGN  14634>>ASSIGN  14639>>ASSIGN
     14644>>ASSIGN  14650>>ASSIGN  14656>>ASSIGN  14662>>ASSIGN
VBLK.DATMASK
     14477**DCL     14480--REDEF
VBLK.DEFMASK
     14461**DCL     14464--REDEF
VBLK.DELMASK
     14469**DCL     14472--REDEF
VBLK.EVENT
     14456**DCL     14497>>DOCASE
VBLK.FPT$
     14375**DCL     11728--IMP-PTR 11824--IMP-PTR 11882--IMP-PTR 11947--IMP-PTR 12005--IMP-PTR 12096--IMP-PTR
     12171--IMP-PTR 12232--IMP-PTR 12290--IMP-PTR 12435--IMP-PTR 12529--IMP-PTR 12587--IMP-PTR 12645--IMP-PTR
     12703--IMP-PTR 12761--IMP-PTR 12820--IMP-PTR 12925--IMP-PTR 12991--IMP-PTR 13057--IMP-PTR 13153--IMP-PTR
     13250--IMP-PTR 13308--IMP-PTR 13366--IMP-PTR 14513>>ASSIGN  14514>>ASSIGN  14515>>ASSIGN  14516>>ASSIGN
     14517>>ASSIGN  14518>>ASSIGN  14523>>ASSIGN  14525>>ASSIGN  14526>>ASSIGN  14527>>ASSIGN  14528>>ASSIGN
     14529>>ASSIGN  14530>>ASSIGN  14534>>ASSIGN  14535>>ASSIGN  14537>>ASSIGN  14541>>ASSIGN  14542>>ASSIGN
     14544>>ASSIGN  14564>>ASSIGN  14568>>ASSIGN  14573>>ASSIGN  14578>>ASSIGN  14582>>ASSIGN  14586>>ASSIGN
     14590>>ASSIGN  14592>>ASSIGN  14593>>ASSIGN  14594>>ASSIGN  14599>>ASSIGN  14606>>ASSIGN  14610>>ASSIGN
     14620>>ASSIGN  14625>>ASSIGN  14626>>ASSIGN  14628>>ASSIGN  14632>>ASSIGN  14633>>ASSIGN  14635>>ASSIGN
     14640>>ASSIGN  14645>>ASSIGN  14649>>ASSIGN  14651>>ASSIGN  14655>>ASSIGN  14657>>ASSIGN  14661>>ASSIGN
     14666>>ASSIGN  14670>>ASSIGN
VBLK.SPIMASK
     14485**DCL     14488--REDEF
XSP$ACTIVITY_DISCARD.ERRDEF
     11834**DCL     11854--REDEF
XSP$ACTIVITY_DISCARD.REASON
     11832**DCL     14564>>ASSIGN  14568>>ASSIGN
XSP$ACTIVITY_END.ERRDEF
     11896**DCL     11916--REDEF
XSP$ACTIVITY_END.SERNUM
     11928**DCL     14573>>ASSIGN  14578>>ASSIGN
XSP$ACTIVITY_INTERRUPT.ERRDEF
     11957**DCL     11977--REDEF
XSP$ACTIVITY_INTERRUPT.REASON
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:159  
     11955**DCL     14582>>ASSIGN  14586>>ASSIGN
XSP$ACTIVITY_RESUME.ACTID
     12064**DCL     14593>>ASSIGN
XSP$ACTIVITY_RESUME.ERRDEF
     12021**DCL     12041--REDEF
XSP$ACTIVITY_RESUME.OACTID
     12074**DCL     14594>>ASSIGN
XSP$ACTIVITY_RESUME.OSCID
     12019**DCL     14590>>ASSIGN
XSP$ACTIVITY_RESUME.SERNUM
     12053**DCL     14592>>ASSIGN
XSP$ACTIVITY_START.ACTID
     12150**DCL     14599>>ASSIGN
XSP$ACTIVITY_START.ERRDEF
     12111**DCL     12131--REDEF
XSP$ALTER_CONTEXT.ERRDEF
     12180**DCL     12200--REDEF
XSP$CAPABILITY_DATA.ERRDEF
     12241**DCL     12261--REDEF
XSP$CONNECT.CALLED$
     12385**DCL     12386--REDEF   14515>>ASSIGN
XSP$CONNECT.CALLING$
     12379**DCL     14514>>ASSIGN  14526>>ASSIGN
XSP$CONNECT.DFLT$
     12375**DCL     12376--REDEF
XSP$CONNECT.ERRDEF
     12344**DCL     12364--REDEF
XSP$CONNECT.ITOKENS
     12387**DCL     14516>>ASSIGN  14528>>ASSIGN
XSP$CONNECT.QOS
     12412**DCL     14518>>ASSIGN  14530>>ASSIGN
XSP$CONNECT.RESPONDING$
     12386**DCL     14527>>ASSIGN
XSP$CONNECT.RESULT
     12395**DCL     14523>>ASSIGN
XSP$CONNECT.SERNUM
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:160  
     12377**DCL     14513>>ASSIGN  14525>>ASSIGN
XSP$CONNECT.SFU
     12396**DCL     14517>>ASSIGN  14529>>ASSIGN
XSP$CONTROL_GIVE.ERRDEF
     12481**DCL     12501--REDEF
XSP$DATA.ERRDEF
     12538**DCL     12558--REDEF
XSP$EXPEDITED_DATA.ERRDEF
     12596**DCL     12616--REDEF
XSP$GENERIC.ERRDEF
     11774**DCL     11794--REDEF
XSP$GENERIC.ERROR
     11794**DCL     14670<<ASSIGN
XSP$GENERIC.PCID
     11735**DCL     14666>>ASSIGN
XSP$P_ABORT.ERRDEF
     12655**DCL     12675--REDEF
XSP$P_EXCEPTION_REPORT.ERRDEF
     12713**DCL     12733--REDEF
XSP$RELEASE.ERRDEF
     12771**DCL     12791--REDEF
XSP$RELEASE.RESULT
     12770**DCL     14620>>ASSIGN
XSP$RESYNCHRONIZE.ERRDEF
     12873**DCL     12893--REDEF
XSP$RESYNCHRONIZE.SERNUM
     12905**DCL     14537>>ASSIGN  14544>>ASSIGN  14628>>ASSIGN  14635>>ASSIGN
XSP$RESYNCHRONIZE.TOKENS
     12855**DCL     14535>>ASSIGN  14542>>ASSIGN  14626>>ASSIGN  14633>>ASSIGN
XSP$RESYNCHRONIZE.TYPE
     12834**DCL     14534>>ASSIGN  14541>>ASSIGN  14625>>ASSIGN  14632>>ASSIGN
XSP$SYNC_MAJOR.ERRDEF
     12940**DCL     12960--REDEF
XSP$SYNC_MAJOR.SERNUM
     12972**DCL     14640>>ASSIGN  14645>>ASSIGN
XSP$SYNC_MINOR.ERRDEF
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:161  
     13006**DCL     13026--REDEF
XSP$SYNC_MINOR.SERNUM
     13038**DCL     14651>>ASSIGN  14657>>ASSIGN
XSP$SYNC_MINOR.TYPE
     13004**DCL     14649>>ASSIGN  14655>>ASSIGN
XSP$TOKEN_GIVE.ERRDEF
     13105**DCL     13125--REDEF
XSP$TOKEN_GIVE.TOKENS
     13087**DCL     14606>>ASSIGN
XSP$TOKEN_PLEASE.ERRDEF
     13201**DCL     13221--REDEF
XSP$TOKEN_PLEASE.TOKENS
     13183**DCL     14610>>ASSIGN
XSP$TYPED_DATA.ERRDEF
     13259**DCL     13279--REDEF
XSP$U_ABORT.ERRDEF
     13317**DCL     13337--REDEF
XSP$U_EXCEPTION_REPORT.ERRDEF
     13376**DCL     13396--REDEF
XSP$U_EXCEPTION_REPORT.REASON
     13374**DCL     14661>>ASSIGN
XSS$ACTIVITY_DISCARD
      3531**DCL     14562<<ASSIGN  14566<<ASSIGN
XSS$ACTIVITY_DISCARD.ERRDEF
      3575**DCL      3601--REDEF
XSS$ACTIVITY_DISCARD.FNC
      3554**DCL     14563<<ASSIGN  14567<<ASSIGN
XSS$ACTIVITY_DISCARD.REASON
      3573**DCL     14564<<ASSIGN  14568<<ASSIGN
XSS$ACTIVITY_END
      3629**DCL     14570<<ASSIGN  14575<<ASSIGN
XSS$ACTIVITY_END.DATA
      3728**DCL     14572<<ASSIGN  14577<<ASSIGN
XSS$ACTIVITY_END.ERRDEF
      3665**DCL      3685--REDEF
XSS$ACTIVITY_END.FNC
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:162  
      3652**DCL     14571<<ASSIGN  14576<<ASSIGN
XSS$ACTIVITY_END.SERNUM
      3761**DCL     14573<<ASSIGN  14578<<ASSIGN
XSS$ACTIVITY_INTERRUPT
      3780**DCL     14580<<ASSIGN  14584<<ASSIGN
XSS$ACTIVITY_INTERRUPT.ERRDEF
      3830**DCL      3850--REDEF
XSS$ACTIVITY_INTERRUPT.FNC
      3803**DCL     14581<<ASSIGN  14585<<ASSIGN
XSS$ACTIVITY_INTERRUPT.REASON
      3822**DCL     14582<<ASSIGN  14586<<ASSIGN
XSS$ACTIVITY_RESUME
      3878**DCL     14588<<ASSIGN
XSS$ACTIVITY_RESUME.ACTID
      4067**DCL     14593<<ASSIGN
XSS$ACTIVITY_RESUME.DATA
      3980**DCL     14591<<ASSIGN
XSS$ACTIVITY_RESUME.ERRDEF
      3917**DCL      3937--REDEF
XSS$ACTIVITY_RESUME.FNC
      3899**DCL     14589<<ASSIGN
XSS$ACTIVITY_RESUME.OACTID
      4077**DCL     14594<<ASSIGN
XSS$ACTIVITY_RESUME.OSCID
      3909**DCL     14590<<ASSIGN
XSS$ACTIVITY_RESUME.SERNUM
      4013**DCL     14592<<ASSIGN
XSS$ACTIVITY_START
      4104**DCL     14596<<ASSIGN
XSS$ACTIVITY_START.ACTID
      4246**DCL     14599<<ASSIGN
XSS$ACTIVITY_START.DATA
      4201**DCL     14598<<ASSIGN
XSS$ACTIVITY_START.ERRDEF
      4138**DCL      4158--REDEF
XSS$ACTIVITY_START.FNC
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:163  
      4125**DCL     14597<<ASSIGN
XSS$CAPABILITY_DATA
      4267**DCL     14546<<ASSIGN  14550<<ASSIGN
XSS$CAPABILITY_DATA.DATA
      4366**DCL     14548<<ASSIGN  14552<<ASSIGN
XSS$CAPABILITY_DATA.ERRDEF
      4303**DCL      4323--REDEF
XSS$CAPABILITY_DATA.FNC
      4290**DCL     14547<<ASSIGN  14551<<ASSIGN
XSS$CONNECT
      4413**DCL     14510<<ASSIGN  14521<<ASSIGN
XSS$CONNECT.CALLED$
      4639**DCL      4640--REDEF   14515<<ASSIGN
XSS$CONNECT.CALLING$
      4622**DCL     14514<<ASSIGN  14526<<ASSIGN
XSS$CONNECT.DATA
      4570**DCL     14512<<ASSIGN  14524<<ASSIGN
XSS$CONNECT.ERRDEF
      4507**DCL      4527--REDEF
XSS$CONNECT.FNC
      4436**DCL     14511<<ASSIGN  14522<<ASSIGN
XSS$CONNECT.ITOKENS
      4656**DCL     14516<<ASSIGN  14528<<ASSIGN
XSS$CONNECT.QOS
      4711**DCL     14518<<ASSIGN  14530<<ASSIGN
XSS$CONNECT.RESPONDING$
      4640**DCL     14527<<ASSIGN
XSS$CONNECT.RESULT
      4669**DCL     14523<<ASSIGN
XSS$CONNECT.SERNUM
      4603**DCL     14513<<ASSIGN  14525<<ASSIGN
XSS$CONNECT.SFU
      4692**DCL     14517<<ASSIGN  14529<<ASSIGN
XSS$CONTROL_GIVE
      4736**DCL     14601<<ASSIGN
XSS$CONTROL_GIVE.ERRDEF
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:164  
      4812**DCL      4832--REDEF
XSS$CONTROL_GIVE.FNC
      4757**DCL     14602<<ASSIGN
XSS$DATA
      4860**DCL     14554<<ASSIGN
XSS$DATA.DATA
      4957**DCL     14556<<ASSIGN
XSS$DATA.ERRDEF
      4894**DCL      4914--REDEF
XSS$DATA.FNC
      4881**DCL     14555<<ASSIGN
XSS$EXPEDITED_DATA
      5004**DCL     14558<<ASSIGN
XSS$EXPEDITED_DATA.DATA
      5101**DCL     14560<<ASSIGN
XSS$EXPEDITED_DATA.ERRDEF
      5038**DCL      5058--REDEF
XSS$EXPEDITED_DATA.FNC
      5025**DCL     14559<<ASSIGN
XSS$GENERIC
      3385**DCL     14668<>CALL
XSS$GENERIC.ERRDEF
      3439**DCL      3459--REDEF
XSS$GENERIC.ERROR
      3459**DCL     14670>>ASSIGN
XSS$GENERIC.SCID
      3400**DCL     14666<<ASSIGN
XSS$P_ABORT.ERRDEF
      5186**DCL      5206--REDEF
XSS$P_EXCEPTION_REPORT.ERRDEF
      5272**DCL      5292--REDEF
XSS$RELEASE
      5320**DCL     14613<<ASSIGN  14618<<ASSIGN
XSS$RELEASE.DATA
      5425**DCL     14615<<ASSIGN  14621<<ASSIGN
XSS$RELEASE.ERRDEF
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:165  
      5362**DCL      5382--REDEF
XSS$RELEASE.FNC
      5343**DCL     14614<<ASSIGN  14619<<ASSIGN
XSS$RELEASE.RESULT
      5355**DCL     14620<<ASSIGN
XSS$RESYNCHRONIZE
      5472**DCL     14532<<ASSIGN  14539<<ASSIGN  14623<<ASSIGN  14630<<ASSIGN
XSS$RESYNCHRONIZE.DATA
      5633**DCL     14536<<ASSIGN  14543<<ASSIGN  14627<<ASSIGN  14634<<ASSIGN
XSS$RESYNCHRONIZE.ERRDEF
      5570**DCL      5590--REDEF
XSS$RESYNCHRONIZE.FNC
      5495**DCL     14533<<ASSIGN  14540<<ASSIGN  14624<<ASSIGN  14631<<ASSIGN
XSS$RESYNCHRONIZE.SERNUM
      5666**DCL     14537<<ASSIGN  14544<<ASSIGN  14628<<ASSIGN  14635<<ASSIGN
XSS$RESYNCHRONIZE.TOKENS
      5546**DCL     14535<<ASSIGN  14542<<ASSIGN  14626<<ASSIGN  14633<<ASSIGN
XSS$RESYNCHRONIZE.TYPE
      5510**DCL     14534<<ASSIGN  14541<<ASSIGN  14625<<ASSIGN  14632<<ASSIGN
XSS$SESSION
     14491**DCL-ENT 14668--CALL
XSS$SYNC_MAJOR
      5685**DCL     14637<<ASSIGN  14642<<ASSIGN
XSS$SYNC_MAJOR.DATA
      5792**DCL     14639<<ASSIGN  14644<<ASSIGN
XSS$SYNC_MAJOR.ERRDEF
      5729**DCL      5749--REDEF
XSS$SYNC_MAJOR.FNC
      5708**DCL     14638<<ASSIGN  14643<<ASSIGN
XSS$SYNC_MAJOR.SERNUM
      5825**DCL     14640<<ASSIGN  14645<<ASSIGN
XSS$SYNC_MINOR
      5844**DCL     14647<<ASSIGN  14653<<ASSIGN
XSS$SYNC_MINOR.DATA
      5951**DCL     14650<<ASSIGN  14656<<ASSIGN
XSS$SYNC_MINOR.ERRDEF
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:166  
      5888**DCL      5908--REDEF
XSS$SYNC_MINOR.FNC
      5867**DCL     14648<<ASSIGN  14654<<ASSIGN
XSS$SYNC_MINOR.SERNUM
      5984**DCL     14651<<ASSIGN  14657<<ASSIGN
XSS$SYNC_MINOR.TYPE
      5880**DCL     14649<<ASSIGN  14655<<ASSIGN
XSS$TOKEN_GIVE
      6003**DCL     14604<<ASSIGN
XSS$TOKEN_GIVE.ERRDEF
      6085**DCL      6105--REDEF
XSS$TOKEN_GIVE.FNC
      6024**DCL     14605<<ASSIGN
XSS$TOKEN_GIVE.TOKENS
      6061**DCL     14606<<ASSIGN
XSS$TOKEN_PLEASE
      6133**DCL     14608<<ASSIGN
XSS$TOKEN_PLEASE.DATA
      6278**DCL     14611<<ASSIGN
XSS$TOKEN_PLEASE.ERRDEF
      6215**DCL      6235--REDEF
XSS$TOKEN_PLEASE.FNC
      6154**DCL     14609<<ASSIGN
XSS$TOKEN_PLEASE.TOKENS
      6191**DCL     14610<<ASSIGN
XSS$TYPED_DATA
      6325**DCL     14501<<ASSIGN
XSS$TYPED_DATA.DATA
      6422**DCL     14503<<ASSIGN
XSS$TYPED_DATA.ERRDEF
      6359**DCL      6379--REDEF
XSS$TYPED_DATA.FNC
      6346**DCL     14502<<ASSIGN
XSS$U_ABORT
      6469**DCL     14506<<ASSIGN
XSS$U_ABORT.DATA
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:167  
      6566**DCL     14508<<ASSIGN
XSS$U_ABORT.ERRDEF
      6503**DCL      6523--REDEF
XSS$U_ABORT.FNC
      6490**DCL     14507<<ASSIGN
XSS$U_EXCEPTION_REPORT
      6613**DCL     14659<<ASSIGN
XSS$U_EXCEPTION_REPORT.DATA
      6715**DCL     14662<<ASSIGN
XSS$U_EXCEPTION_REPORT.ERRDEF
      6652**DCL      6672--REDEF
XSS$U_EXCEPTION_REPORT.FNC
      6634**DCL     14660<<ASSIGN
XSS$U_EXCEPTION_REPORT.REASON
      6644**DCL     14661<<ASSIGN
XSS_ACTIVITY_DISCARD
      6910**DCL     14562>>ASSIGN  14566>>ASSIGN
XSS_ACTIVITY_DISCARD.ERRDEF
      6954**DCL      6980--REDEF
XSS_ACTIVITY_END
      7008**DCL     14570>>ASSIGN  14575>>ASSIGN
XSS_ACTIVITY_END.ERRDEF
      7044**DCL      7064--REDEF
XSS_ACTIVITY_INTERRUPT
      7159**DCL     14580>>ASSIGN  14584>>ASSIGN
XSS_ACTIVITY_INTERRUPT.ERRDEF
      7209**DCL      7229--REDEF
XSS_ACTIVITY_RESUME
      7257**DCL     14588>>ASSIGN
XSS_ACTIVITY_RESUME.ERRDEF
      7296**DCL      7316--REDEF
XSS_ACTIVITY_START
      7483**DCL     14596>>ASSIGN
XSS_ACTIVITY_START.ERRDEF
      7517**DCL      7537--REDEF
XSS_CAPABILITY_DATA
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:168  
      7646**DCL     14546>>ASSIGN  14550>>ASSIGN
XSS_CAPABILITY_DATA.ERRDEF
      7682**DCL      7702--REDEF
XSS_CONNECT
      7792**DCL     14510>>ASSIGN  14521>>ASSIGN
XSS_CONNECT.CALLED$
      8018**DCL      8019--REDEF
XSS_CONNECT.ERRDEF
      7886**DCL      7906--REDEF
XSS_CONTROL_GIVE
      8115**DCL     14601>>ASSIGN
XSS_CONTROL_GIVE.ERRDEF
      8191**DCL      8211--REDEF
XSS_DATA
      8239**DCL     14554>>ASSIGN
XSS_DATA.ERRDEF
      8273**DCL      8293--REDEF
XSS_EXPEDITED_DATA
      8383**DCL     14558>>ASSIGN
XSS_EXPEDITED_DATA.ERRDEF
      8417**DCL      8437--REDEF
XSS_GENERIC.ERRDEF
      6818**DCL      6838--REDEF
XSS_P_ABORT.ERRDEF
      8565**DCL      8585--REDEF
XSS_P_EXCEPTION_REPORT.ERRDEF
      8651**DCL      8671--REDEF
XSS_RELEASE
      8699**DCL     14613>>ASSIGN  14618>>ASSIGN
XSS_RELEASE.ERRDEF
      8741**DCL      8761--REDEF
XSS_RESYNCHRONIZE
      8851**DCL     14532>>ASSIGN  14539>>ASSIGN  14623>>ASSIGN  14630>>ASSIGN
XSS_RESYNCHRONIZE.ERRDEF
      8949**DCL      8969--REDEF
XSS_SYNC_MAJOR
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:169  
      9064**DCL     14637>>ASSIGN  14642>>ASSIGN
XSS_SYNC_MAJOR.ERRDEF
      9108**DCL      9128--REDEF
XSS_SYNC_MINOR
      9223**DCL     14647>>ASSIGN  14653>>ASSIGN
XSS_SYNC_MINOR.ERRDEF
      9267**DCL      9287--REDEF
XSS_TOKEN_GIVE
      9382**DCL     14604>>ASSIGN
XSS_TOKEN_GIVE.ERRDEF
      9464**DCL      9484--REDEF
XSS_TOKEN_PLEASE
      9512**DCL     14608>>ASSIGN
XSS_TOKEN_PLEASE.ERRDEF
      9594**DCL      9614--REDEF
XSS_TYPED_DATA
      9704**DCL     14501>>ASSIGN
XSS_TYPED_DATA.ERRDEF
      9738**DCL      9758--REDEF
XSS_U_ABORT
      9848**DCL     14506>>ASSIGN
XSS_U_ABORT.ERRDEF
      9882**DCL      9902--REDEF
XSS_U_EXCEPTION_REPORT
      9992**DCL     14659>>ASSIGN
XSS_U_EXCEPTION_REPORT.ERRDEF
     10031**DCL     10051--REDEF
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:170  
              *** CROSS REFERENCE LISTING ***
    **     DENOTES     IDENTIFIER DEFINITION
    <<                 IDENTIFIER'S VALUE SET
    >>                 IDENTIFIER'S VALUE USED
    <>                 IDENTIFIER SET AND/OR USED
    --                 IDENTIFIER REFERENCED
PL6.E3A0      #002=XSP$SSEND File=XSP$ENCODE.:XSA1TSI                            WED 10/01/97 12:03 Page:171  
              MINI UREF LISTING

XSP$SSEND      12**PROC
