
PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:1    
        1        1        /*M*    ZIU$GDCB     IDS/2      DCB NAME AND NUMBER RETRIEVAL */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        ZIU$GDCB: PROC(PARM) ALTRET;
        8        8    1   DCL 1 PARM ALIGNED,
        9        9    1         2 NM UNAL,
       10       10    1           3 LEN UBIN BYTE UNAL,
       11       11    1           3 TXT CHAR(30) UNAL,
       12       12    1         2 DCB# UBIN HALF ALIGNED;
       13       13    1   DCL INDX SBIN WORD STATIC ALIGNED;
       14       14
       15       15         %INCLUDE ZI$DIR;
       16      172         %DIR;
       17      316         %INCLUDE ZI_GLOBAL_DBUTIL;
       18      494         %SYS_FUNC;
       19      586         %MISC_DCLS;
       20      639         %INCLUDE CP_6;
       21      720         %F$DCB;
       22      777         %INCLUDE CP_6_SUBS;
       23     1317         %INCLUDE ZI_ERRORS_SUBS;
       24     1837         %INCLUDE ZI$PG_STRUCTS;
       25     1940         %ATBLK_PG;
       26     1996        /**/
       27     1997    1   DCL SYS_FUNC_GETDCB ENTRY ALTRET;
       28     1998    1   DCL SYS_FUNC_OPEN ENTRY ALTRET;
       29     1999    1   DCL SYS_FUNC_READ ENTRY ALTRET;
       30     2000    1   DCL SYS_FUNC_CLOS ENTRY ALTRET;
       31     2001    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
       32     2002        /**/
       33     2003    1   GET_DCB: ENTRY(PARM) ALTRET;
       34     2004    1       CALL INDEX(INDX,' ',PARM.NM.TXT,0);
       35     2005    1       PARM.NM.LEN = INDX;
       36     2006    1   /**/ DCBNMSF = VECTOR(PARM.NM);
       37     2007    1       CALL SYS_FUNC_GETDCB ALTRET(NO_DCB);
PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:2    
       38     2008    1       PARM.DCB# = DCBSF;
       39     2009    1       RETURN;
       40     2010        /**/
       41     2011    1   GET_SCHEMA_NAME: ENTRY(PARM) ALTRET;
       42     2012    1       IF PARM.NM.TXT = 'ALL ' THEN
       43     2013    2       DO;
       44     2014         /*E* ERROR: ZIU-02027-C
       45     2015                    MESSAGE: Keyword ALL must be followed by WITHIN schema-name. */
       46     2016    2           ERRCODESF.ERR# = 2027;
       47     2017    2           MSGCODE = ERRCODE_RDEF;
       48     2018    2           CALL SYS_FUNC_ERRMSG;
       49     2019    2           ALTRETURN;
       50     2020    2           END;
       51     2021    1   /**/ DCBSF = PARM.DCB#;
       52     2022    1   /**/ ORGSF = %IDS#;
       53     2023    1   /**/ ACSSF = %DIRECT#;
       54     2024    1   /**/ FUNSF = %IN#;
       55     2025    1   /**/ ASNSF = %FILE#;
       56     2026    1   /**/ SHARESF = %ALL#;
       57     2027    1   /**/ FIDSF = PARM.NM.TXT;
       58     2028    1       CALL SYS_FUNC_OPEN ALTRET(ALT_OPEN);
       59     2029    1       IF DCBADDR(DCBSF)->F$DCB.ORG# = %INDEXED# THEN
       60     2030    2       DO;
       61     2031         /*E* ERROR: ZIU-DBU#INDXSCHE-C
       62     2032                       MESSAGE: Area "%U1" is set to an indexed file.
       63     2033                            The keyword WITHIN schema-name is required for indexed areas. */
       64     2034    2           ERR_INSERT(0)=ZI$DIR.AREA_NM;
       65     2035    2           ERRCODESF.ERR# = DBU#INDXSCHE;
       66     2036    2           MSGCODE = ERRCODE_RDEF;
       67     2037    2           ERRFLGSF = 3;
       68     2038    2           CALL SYS_FUNC_ERRMSG;
       69     2039    2           GOTO ALT_READ; /* GOTO CLOSE THE AREA */
       70     2040    2           END;
       71     2041    1       IF (DCBADDR(DCBSF)->F$DCB.ORG#~=%IDS#) AND (DCBADDR(DCBSF)->F$DCB.ORG#~=%KEYED#)
              2041                THEN
       72     2042    2       DO;
       73     2043    2           ERRCODESF.ERR# = DBU#CHKIDSREP;
PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:3    
       74     2044    2           MSGCODE = ERRCODE_RDEF;
       75     2045    2           ERRFLGSF = 3;
       76     2046    2           CALL SYS_FUNC_ERRMSG;
       77     2047    2           GOTO ALT_READ; /* CLOSE THE AREA */
       78     2048    2           END;
       79     2049    1   /**/ BUFSF = VECTOR(I_O_BUF(0));
       80     2050    1   /**/ BUFLNSF = 4096;
       81     2051    1   /**/ FULLSF = %YES#;
       82     2052    1   /**/ ENCRP_SEEDSF = ZI$DIR.ENCP_SEED;
       83     2053    1   /**/ KEYSF = %YES#;
       84     2054    1   /**/ KEYVSF.LEN =4;
       85     2055    1   /**/ KEYVSF.IDSKEY = 0;
       86     2056    1       CALL SYS_FUNC_READ ALTRET(ALT_READ);
       87     2057    1       ATBLK$ = ADDR(I_O_BUF(0));
       88     2058    1       ZI$DIR.SCHEMA_NM.NAME.TEXT = ATBLK_PG.SCHNAM;
       89     2059    1       CALL SYS_FUNC_CLOS;
       90     2060    1       RETURN;
       91     2061        /**/
       92     2062    1   ALT_READ:
       93     2063    1       CALL SYS_FUNC_CLOS;
       94     2064    1   ALT_OPEN:
       95     2065         /*E* ERROR: ZIU-02003-C
       96     2066                 MESSAGE: Unable to retrieve schema name from area "%U1". */
       97     2067    1       ERRCODESF.ERR# = 2003;
       98     2068    1       MSGCODE = ERRCODE_RDEF;
       99     2069    1       ERR_INSERT(0) = PARM.NM;
      100     2070    1       CALL SYS_FUNC_ERRMSG;
      101     2071    1       ALTRETURN;
      102     2072    1   NO_DCB:
      103     2073    1       ALTRETURN;
      104     2074    1   END ZIU$GDCB;
      105     2075        %EOD;

PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:4    
--  Include file information  --

   ZI$PG_STRUCTS.:ZIC0TOU  is referenced.
   ZI_ERRORS_SUBS.:ZIC0TOU  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   ZI$DIR.:ZIC0TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure ZIU$GDCB.

   Procedure ZIU$GDCB requires 141 words for executable code.
   Procedure ZIU$GDCB requires 4 words of local(AUTO) storage.

PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:5    

 Object Unit name= ZIU$GDCB                                   File name= ZIU$GDCB.:ZIC0TOU
 UTS= SEP 05 '97 13:15:13.80 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none     1      1  ZIU$GDCB
    1   DCB   even  none     0      0  M$LO
    2   DCB   even  none     0      0  M$UC
    3  RoData even  UTS      1      1  ZIU$GDCB
    4   Proc  even  none   141    215  ZIU$GDCB
    5  RoData even  none     6      6  ZIU$GDCB

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     4      0   yes    yes     yes      Std        1  ZIU$GDCB
     4      3          yes     yes      Std        1  GET_DCB
     4     30          yes     yes      Std        1  GET_SCHEMA_NAME

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       0 SYS_FUNC_GETDCB
 yes     yes           Std       0 SYS_FUNC_OPEN
 yes     yes           Std       0 SYS_FUNC_READ
 yes     yes           Std       0 SYS_FUNC_CLOS
 yes     yes           Std       0 SYS_FUNC_ERRMSG
                       nStd      0 X66_AUTO_1
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:6    

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ZI$DIR                                SCHEMA_ACTIVE                         RECORD_LIST
     SET_LIST                              RETAIN_LIST                           DUMP_FID
     ALTKY                                 INIT_RG                               KEY_RNG
     ITEM_LIST                             BLKLSF                                KEYLSF
     KEYXSF                                DCBSF                                 ORGSF
     KEYSF                                 KEYVSF                                ACSSF
     NOTIMESF                              FUNSF                                 ASNSF
     TESTSF                                XTENSIZESF                            DISPSF
     WAITSF                                VFCSF                                 FULLSF
     BKUPSF                                BUFLNSF                               BUFSF
     SOURCESF                              DESTSF                                DATESF
     TIMESF                                UTSSF                                 DAYSF
     TSTAMPSF                              ENCRP_SEEDSF                          ERRCODESF
     MSGCODE                               INCL_ERR                              ERR_INSERT
     FIDSF_RD                              ACNT                                  EXISTSF
     SHARESF                               DCBNMSF                               KEYRSF
     NO_KEYSF                              REASGNSF                              CARRY_ATTRIBUTESF
     SUBMESSF                              SPKY_OPNSF                            POSSF
     ERRFLGSF                              MERGESF                               FSA_FLAG
     RELGSF                                UNUSED                                HELPCODE
     COUNTSF                               INDEXSF                               GAP
     PSNSF                                 ACNTSF                                KEY_SHADWSF
     REC$                                  RB                                    RE
     IE                                    IB                                    CNT
     ICNT                                  RCNT                                  SCNT
     FIRST_SET                             RETCNT                                DMPCNT
     KCNT                                  ACNT_IDX                              I
     J                                     K                                     X
     STEPCC                                I_O_BUF$                              OUT_INDX
     I_O_SIZE                              REC_DATA_LN                           M$LO
     B$TCB$                                B$ROS$                                B$JIT$
     KEYFID                                I_O_KEY                               RESTART
     BREAK_FLAG                            ICHKSUM                               ITMCNT
PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:7    
     GAP1                                  M$UC                                  ATBLK$

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ROSID
PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:8    


        1        1        /*M*    ZIU$GDCB     IDS/2      DCB NAME AND NUMBER RETRIEVAL */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        ZIU$GDCB: PROC(PARM) ALTRET;

      7  4 000000   000000 700200 xent  ZIU$GDCB     TSX0  ! X66_AUTO_1
         4 000001   000004 000001                    ZERO    4,1
         4 000002   000005 710000 4                  TRA     s:2004

        8        8    1   DCL 1 PARM ALIGNED,
        9        9    1         2 NM UNAL,
       10       10    1           3 LEN UBIN BYTE UNAL,
       11       11    1           3 TXT CHAR(30) UNAL,
       12       12    1         2 DCB# UBIN HALF ALIGNED;
       13       13    1   DCL INDX SBIN WORD STATIC ALIGNED;
       14       14
       15       15         %INCLUDE ZI$DIR;
       16      172         %DIR;
       17      316         %INCLUDE ZI_GLOBAL_DBUTIL;
       18      494         %SYS_FUNC;
       19      586         %MISC_DCLS;
       20      639         %INCLUDE CP_6;
       21      720         %F$DCB;
       22      777         %INCLUDE CP_6_SUBS;
       23     1317         %INCLUDE ZI_ERRORS_SUBS;
       24     1837         %INCLUDE ZI$PG_STRUCTS;
       25     1940         %ATBLK_PG;
       26     1996        /**/
       27     1997    1   DCL SYS_FUNC_GETDCB ENTRY ALTRET;
       28     1998    1   DCL SYS_FUNC_OPEN ENTRY ALTRET;
       29     1999    1   DCL SYS_FUNC_READ ENTRY ALTRET;
       30     2000    1   DCL SYS_FUNC_CLOS ENTRY ALTRET;
       31     2001    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:9    
       32     2002        /**/
       33     2003    1   GET_DCB: ENTRY(PARM) ALTRET;

   2003  4 000003   000000 700200 xent  GET_DCB      TSX0  ! X66_AUTO_1
         4 000004   000004 000001                    ZERO    4,1

       34     2004    1       CALL INDEX(INDX,' ',PARM.NM.TXT,0);

   2004  4 000005   200003 470500                    LDP0    @PARM,,AUTO
         4 000006   000000 124500                    SCM     mask='000'O
         4 000007   000000 200036                    ADSC9   0,,PR0                   cn=1,n=30
         4 000010   000000 000001 5                  ADSC9   0                        cn=0,n=1
         4 000011   000000 000000 0                  ARG     INDX

       35     2005    1       PARM.NM.LEN = INDX;

   2005  4 000012   000000 236000 0                  LDQ     INDX
         4 000013   000033 736000                    QLS     27
         4 000014   000000 552140                    STBQ    0,'40'O,PR0

       36     2006    1   /**/ DCBNMSF = VECTOR(PARM.NM);

   2006  4 000015   000001 235000 5                  LDA     1
         4 000016   200003 236100                    LDQ     @PARM,,AUTO
         4 000017   000000 755000 xsym               STA     DCBNMSF
         4 000020   000001 756000 xsym               STQ     DCBNMSF+1

       37     2007    1       CALL SYS_FUNC_GETDCB ALTRET(NO_DCB);

   2007  4 000021   000002 631400 5                  EPPR1   2
         4 000022   000000 701000 xent               TSX1    SYS_FUNC_GETDCB
         4 000023   000214 702000 4                  TSX2    NO_DCB

       38     2008    1       PARM.DCB# = DCBSF;

   2008  4 000024   000000 220000 xsym               LDX0    DCBSF
         4 000025   200003 470500                    LDP0    @PARM,,AUTO
PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:10   
         4 000026   000010 740100                    STX0    8,,PR0

       39     2009    1       RETURN;

   2009  4 000027   000000 702200 xent               TSX2  ! X66_ARET

       40     2010        /**/
       41     2011    1   GET_SCHEMA_NAME: ENTRY(PARM) ALTRET;

   2011  4 000030   000000 700200 xent  GET_SCHEMA_* TSX0  ! X66_AUTO_1
         4 000031   000004 000001                    ZERO    4,1

       42     2012    1       IF PARM.NM.TXT = 'ALL ' THEN

   2012  4 000032   200003 470500                    LDP0    @PARM,,AUTO
         4 000033   040000 106500                    CMPC    fill='040'O
         4 000034   000000 200036                    ADSC9   0,,PR0                   cn=1,n=30
         4 000035   000000 000004 3                  ADSC9   0                        cn=0,n=4
         4 000036   000050 601000 4                  TNZ     s:2021

       43     2013    2       DO;

       44     2014         /*E* ERROR: ZIU-02027-C
       45     2015                    MESSAGE: Keyword ALL must be followed by WITHIN schema-name. */
       46     2016    2           ERRCODESF.ERR# = 2027;

   2016  4 000037   000000 236000 xsym               LDQ     ERRCODESF
         4 000040   000003 376000 5                  ANQ     3
         4 000041   037530 276007                    ORQ     16216,DL
         4 000042   000000 756000 xsym               STQ     ERRCODESF

       47     2017    2           MSGCODE = ERRCODE_RDEF;

   2017  4 000043   000000 756000 xsym               STQ     MSGCODE

       48     2018    2           CALL SYS_FUNC_ERRMSG;

PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:11   
   2018  4 000044   000002 631400 5                  EPPR1   2
         4 000045   000000 701000 xent               TSX1    SYS_FUNC_ERRMSG
         4 000046   000000 011000                    NOP     0

       49     2019    2           ALTRETURN;

   2019  4 000047   000000 702200 xent               TSX2  ! X66_AALT

       50     2020    2           END;
       51     2021    1   /**/ DCBSF = PARM.DCB#;

   2021  4 000050   000010 220100                    LDX0    8,,PR0
         4 000051   000000 740000 xsym               STX0    DCBSF

       52     2022    1   /**/ ORGSF = %IDS#;

   2022  4 000052   000007 235007                    LDA     7,DL
         4 000053   000000 755000 xsym               STA     ORGSF

       53     2023    1   /**/ ACSSF = %DIRECT#;

   2023  4 000054   000002 236007                    LDQ     2,DL
         4 000055   000000 756000 xsym               STQ     ACSSF

       54     2024    1   /**/ FUNSF = %IN#;

   2024  4 000056   000000 756000 xsym               STQ     FUNSF

       55     2025    1   /**/ ASNSF = %FILE#;

   2025  4 000057   000001 235007                    LDA     1,DL
         4 000060   000000 755000 xsym               STA     ASNSF

       56     2026    1   /**/ SHARESF = %ALL#;

   2026  4 000061   200000 236003                    LDQ     65536,DU
         4 000062   000000 756000 xsym               STQ     SHARESF
PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:12   

       57     2027    1   /**/ FIDSF = PARM.NM.TXT;

   2027  4 000063   040000 100500                    MLR     fill='040'O
         4 000064   000000 200036                    ADSC9   0,,PR0                   cn=1,n=30
         4 000065   000000 000036 xsym               ADSC9   FIDSF_RD                 cn=0,n=30

       58     2028    1       CALL SYS_FUNC_OPEN ALTRET(ALT_OPEN);

   2028  4 000066   000002 631400 5                  EPPR1   2
         4 000067   000000 701000 xent               TSX1    SYS_FUNC_OPEN
         4 000070   000177 702000 4                  TSX2    ALT_OPEN

       59     2029    1       IF DCBADDR(DCBSF)->F$DCB.ORG# = %INDEXED# THEN

   2029  4 000071   000004 470400 5                  LDP0    4
         4 000072   000000 471500                    LDP1    0,,PR0
         4 000073   000000 220000 xsym               LDX0    DCBSF
         4 000074   100000 473510                    LDP3    0,X0,PR1
         4 000075   300032 236100                    LDQ     26,,PR3
         4 000076   777000 376003                    ANQ     -512,DU
         4 000077   006000 116003                    CMPQ    3072,DU
         4 000100   000117 601000 4                  TNZ     s:2041

       60     2030    2       DO;

       61     2031         /*E* ERROR: ZIU-DBU#INDXSCHE-C
       62     2032                       MESSAGE: Area "%U1" is set to an indexed file.
       63     2033                           The keyword WITHIN schema-name is required for indexed areas. */
       64     2034    2           ERR_INSERT(0)=ZI$DIR.AREA_NM;

   2034  4 000101   000000 100400                    MLR     fill='000'O
         4 000102   000234 000037 xsym               ADSC9   ZI$DIR+156               cn=0,n=31
         4 000103   000000 000037 xsym               ADSC9   ERR_INSERT               cn=0,n=31

       65     2035    2           ERRCODESF.ERR# = DBU#INDXSCHE;

PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:13   
   2035  4 000104   000000 236000 xsym               LDQ     ERRCODESF
         4 000105   000003 376000 5                  ANQ     3
         4 000106   220110 276007                    ORQ     73800,DL
         4 000107   000000 756000 xsym               STQ     ERRCODESF

       66     2036    2           MSGCODE = ERRCODE_RDEF;

   2036  4 000110   000000 756000 xsym               STQ     MSGCODE

       67     2037    2           ERRFLGSF = 3;

   2037  4 000111   003000 236003                    LDQ     1536,DU
         4 000112   000000 756000 xsym               STQ     ERRFLGSF

       68     2038    2           CALL SYS_FUNC_ERRMSG;

   2038  4 000113   000002 631400 5                  EPPR1   2
         4 000114   000000 701000 xent               TSX1    SYS_FUNC_ERRMSG
         4 000115   000000 011000                    NOP     0

       69     2039    2           GOTO ALT_READ; /* GOTO CLOSE THE AREA */

   2039  4 000116   000174 710000 4                  TRA     ALT_READ

       70     2040    2           END;
       71     2041    1      IF (DCBADDR(DCBSF)->F$DCB.ORG#~=%IDS#) AND (DCBADDR(DCBSF)->F$DCB.ORG#~=%KEYED#)
              2041                THEN

   2041  4 000117   007000 116003                    CMPQ    3584,DU
         4 000120   000136 600000 4                  TZE     s:2049
         4 000121   002000 116003                    CMPQ    1024,DU
         4 000122   000136 600000 4                  TZE     s:2049

       72     2042    2       DO;

       73     2043    2           ERRCODESF.ERR# = DBU#CHKIDSREP;

PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:14   
   2043  4 000123   000000 236000 xsym               LDQ     ERRCODESF
         4 000124   000003 376000 5                  ANQ     3
         4 000125   216760 276007                    ORQ     73200,DL
         4 000126   000000 756000 xsym               STQ     ERRCODESF

       74     2044    2           MSGCODE = ERRCODE_RDEF;

   2044  4 000127   000000 756000 xsym               STQ     MSGCODE

       75     2045    2           ERRFLGSF = 3;

   2045  4 000130   003000 236003                    LDQ     1536,DU
         4 000131   000000 756000 xsym               STQ     ERRFLGSF

       76     2046    2           CALL SYS_FUNC_ERRMSG;

   2046  4 000132   000002 631400 5                  EPPR1   2
         4 000133   000000 701000 xent               TSX1    SYS_FUNC_ERRMSG
         4 000134   000000 011000                    NOP     0

       77     2047    2           GOTO ALT_READ; /* CLOSE THE AREA */

   2047  4 000135   000174 710000 4                  TRA     ALT_READ

       78     2048    2           END;
       79     2049    1   /**/ BUFSF = VECTOR(I_O_BUF(0));

   2049  4 000136   000005 235000 5                  LDA     5
         4 000137   000000 236000 xsym               LDQ     I_O_BUF$
         4 000140   000000 755000 xsym               STA     BUFSF
         4 000141   000001 756000 xsym               STQ     BUFSF+1

       80     2050    1   /**/ BUFLNSF = 4096;

   2050  4 000142   010000 235007                    LDA     4096,DL
         4 000143   000000 755000 xsym               STA     BUFLNSF

PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:15   
       81     2051    1   /**/ FULLSF = %YES#;

   2051  4 000144   400000 236003                    LDQ     -131072,DU
         4 000145   000000 756000 xsym               STQ     FULLSF

       82     2052    1   /**/ ENCRP_SEEDSF = ZI$DIR.ENCP_SEED;

   2052  4 000146   000027 236000 xsym               LDQ     ZI$DIR+23
         4 000147   000000 756000 xsym               STQ     ENCRP_SEEDSF

       83     2053    1   /**/ KEYSF = %YES#;

   2053  4 000150   400000 236003                    LDQ     -131072,DU
         4 000151   000000 756000 xsym               STQ     KEYSF

       84     2054    1   /**/ KEYVSF.LEN =4;

   2054  4 000152   004000 236003                    LDQ     2048,DU
         4 000153   000000 552040 xsym               STBQ    KEYVSF,'40'O

       85     2055    1   /**/ KEYVSF.IDSKEY = 0;

   2055  4 000154   000000 100400                    MLR     fill='000'O
         4 000155   000002 000004 5                  ADSC9   2                        cn=0,n=4
         4 000156   000000 200004 xsym               ADSC9   KEYVSF                   cn=1,n=4

       86     2056    1       CALL SYS_FUNC_READ ALTRET(ALT_READ);

   2056  4 000157   000002 631400 5                  EPPR1   2
         4 000160   000000 701000 xent               TSX1    SYS_FUNC_READ
         4 000161   000174 702000 4                  TSX2    ALT_READ

       87     2057    1       ATBLK$ = ADDR(I_O_BUF(0));

   2057  4 000162   000000 236000 xsym               LDQ     I_O_BUF$
         4 000163   000000 756000 xsym               STQ     ATBLK$

PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:16   
       88     2058    1       ZI$DIR.SCHEMA_NM.NAME.TEXT = ATBLK_PG.SCHNAM;

   2058  4 000164   000000 470400 xsym               LDP0    ATBLK$
         4 000165   040000 100500                    MLR     fill='040'O
         4 000166   000031 000036                    ADSC9   25,,PR0                  cn=0,n=30
         4 000167   000223 200036 xsym               ADSC9   ZI$DIR+147               cn=1,n=30

       89     2059    1       CALL SYS_FUNC_CLOS;

   2059  4 000170   000002 631400 5                  EPPR1   2
         4 000171   000000 701000 xent               TSX1    SYS_FUNC_CLOS
         4 000172   000000 011000                    NOP     0

       90     2060    1       RETURN;

   2060  4 000173   000000 702200 xent               TSX2  ! X66_ARET

       91     2061        /**/
       92     2062    1   ALT_READ:
       93     2063    1       CALL SYS_FUNC_CLOS;

   2063  4 000174   000002 631400 5     ALT_READ     EPPR1   2
         4 000175   000000 701000 xent               TSX1    SYS_FUNC_CLOS
         4 000176   000000 011000                    NOP     0

       94     2064    1   ALT_OPEN:
       95     2065         /*E* ERROR: ZIU-02003-C
       96     2066                 MESSAGE: Unable to retrieve schema name from area "%U1". */
       97     2067    1       ERRCODESF.ERR# = 2003;

   2067  4 000177   000000 236000 xsym  ALT_OPEN     LDQ     ERRCODESF
         4 000200   000003 376000 5                  ANQ     3
         4 000201   037230 276007                    ORQ     16024,DL
         4 000202   000000 756000 xsym               STQ     ERRCODESF

       98     2068    1       MSGCODE = ERRCODE_RDEF;

PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:17   
   2068  4 000203   000000 756000 xsym               STQ     MSGCODE

       99     2069    1       ERR_INSERT(0) = PARM.NM;

   2069  4 000204   200003 470500                    LDP0    @PARM,,AUTO
         4 000205   000000 100500                    MLR     fill='000'O
         4 000206   000000 000037                    ADSC9   0,,PR0                   cn=0,n=31
         4 000207   000000 000037 xsym               ADSC9   ERR_INSERT               cn=0,n=31

      100     2070    1       CALL SYS_FUNC_ERRMSG;

   2070  4 000210   000002 631400 5                  EPPR1   2
         4 000211   000000 701000 xent               TSX1    SYS_FUNC_ERRMSG
         4 000212   000000 011000                    NOP     0

      101     2071    1       ALTRETURN;

   2071  4 000213   000000 702200 xent               TSX2  ! X66_AALT

      102     2072    1   NO_DCB:
      103     2073    1       ALTRETURN;

   2073  4 000214   000000 702200 xent  NO_DCB       TSX2  ! X66_AALT

(unnamed)
 Sect OctLoc
   3     000   101114 114040                                                    ALL

(unnamed)
 Sect OctLoc
   5     000   040040 040040   000007 577640   000000 000000   777777 400007        ............
   5     004   000000 006003   001777 777640                                    ........
      104     2074    1   END ZIU$GDCB;
      105     2075        %EOD;

PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:18   
--  Include file information  --

   ZI$PG_STRUCTS.:ZIC0TOU  is referenced.
   ZI_ERRORS_SUBS.:ZIC0TOU  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   ZI$DIR.:ZIC0TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure ZIU$GDCB.

   Procedure ZIU$GDCB requires 141 words for executable code.
   Procedure ZIU$GDCB requires 4 words of local(AUTO) storage.
PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:19   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:20   
          MINI XREF LISTING

ACSSF
       513**DCL      2023<<ASSIGN
ALT_OPEN
      2067**LABEL    2028--CALLALT
ALT_READ
      2063**LABEL    2039--GOTO     2047--GOTO     2056--CALLALT
ASNSF
       516**DCL      2025<<ASSIGN
ATBLK$
      1941**DCL      1942--IMP-PTR  2057<<ASSIGN   2058>>ASSIGN
ATBLK_PG.AREA_NM
      1967**DCL      1968--REDEF
ATBLK_PG.SCHNAM
      1975**DCL      2058>>ASSIGN
ATBLK_PG.STATUS
      1976**DCL      1984--REDEF
BUFLNSF
       524**DCL      2050<<ASSIGN
BUFSF
       525**DCL      2049<<ASSIGN
COUNTSF
       575**DCL       576--REDEF
DCBNMSF
       556**DCL      2006<<ASSIGN
DCBSF
       504**DCL      2008>>ASSIGN   2021<<ASSIGN   2029--IF       2041--IF       2041--IF
ENCRP_SEEDSF
       533**DCL       534--REDEF    2052<<ASSIGN
ERRCODESF
       535**DCL       540--REDEF
ERRCODESF.ERR#
       538**DCL      2016<<ASSIGN   2035<<ASSIGN   2043<<ASSIGN   2067<<ASSIGN
PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:21   
ERRCODE_RDEF
       540**DCL      2017>>ASSIGN   2036>>ASSIGN   2044>>ASSIGN   2068>>ASSIGN
ERRFLGSF
       564**DCL      2037<<ASSIGN   2045<<ASSIGN
ERR_INSERT
       548**DCL      2034<<ASSIGN   2069<<ASSIGN
F$DCB.ACTPOS
       753**DCL       753--REDEF
F$DCB.ARS#
       727**DCL       727--REDEF
F$DCB.ATTR
       746**DCL       747--REDEF
F$DCB.BORROW
       761**DCL       761--REDEF     761--REDEF     761--REDEF
F$DCB.DCBNAME.L
       775**DCL       775--IMP-SIZ
F$DCB.EOMCHAR#
       731**DCL       731--REDEF
F$DCB.FLDID
       756**DCL       756--REDEF
F$DCB.FORM$
       750**DCL       750--REDEF
F$DCB.FSECT
       766**DCL       766--REDEF
F$DCB.FSN#
       743**DCL       743--REDEF     743--REDEF     744--REDEF
F$DCB.HEADER$
       749**DCL       749--REDEF
F$DCB.IXTNSIZE#
       747**DCL       747--REDEF
F$DCB.LASTSTA$
       736**DCL       736--REDEF
F$DCB.LVL
       762**DCL       762--REDEF
F$DCB.NAME#.C
       737**DCL       737--REDEF
PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:22   
F$DCB.NOEOF
       759**DCL       759--REDEF
F$DCB.NRECS#
       748**DCL       748--REDEF
F$DCB.NRECX
       767**DCL       767--REDEF
F$DCB.OHDR
       759**DCL       759--REDEF
F$DCB.ORG#
       742**DCL       742--REDEF    2029>>IF       2041>>IF       2041>>IF
F$DCB.PRECNO
       765**DCL       765--REDEF
F$DCB.RCSZ
       771**DCL       771--REDEF
F$DCB.RES#
       738**DCL       738--REDEF
F$DCB.SETX
       750**DCL       750--REDEF
F$DCB.TAB$
       750**DCL       750--REDEF
F$DCB.TDA
       764**DCL       765--REDEF
F$DCB.WSN#
       738**DCL       738--REDEF
FIDSF
       552**DCL      2027<<ASSIGN
FIDSF_RD
       551**DCL       552--REDEF
FULLSF
       522**DCL      2051<<ASSIGN
FUNSF
       515**DCL      2024<<ASSIGN
HELPCODE
       569**DCL       574--REDEF
ICHKSUM
       634**DCL       635--REDEF
PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:23   
INDX
        13**DCL      2004<<CALLBLT  2005>>ASSIGN
I_O_BUF
       613**DCL      2049--ASSIGN   2057--ASSIGN
I_O_BUF$
       612**DCL       613--IMP-PTR  2049>>ASSIGN   2057>>ASSIGN
KEYSF
       506**DCL      2053<<ASSIGN
KEYVSF
       507**DCL       512--REDEF
KEYVSF.IDSKEY
       510**DCL      2055<<ASSIGN
KEYVSF.LEN
       508**DCL      2054<<ASSIGN
KEYVSF.WD_ONE
       509**DCL       510--REDEF
MSGCODE
       541**DCL       542--REDEF    2017<<ASSIGN   2036<<ASSIGN   2044<<ASSIGN   2068<<ASSIGN
NO_DCB
      2073**LABEL    2007--CALLALT
ORGSF
       505**DCL      2022<<ASSIGN
PARM
         8**DCL         7--PROC     2003--ENTRY    2011--ENTRY
PARM.DCB#
        12**DCL      2008<<ASSIGN   2021>>ASSIGN
PARM.NM
         9**DCL      2006--ASSIGN   2069>>ASSIGN
PARM.NM.LEN
        10**DCL      2005<<ASSIGN
PARM.NM.TXT
        11**DCL      2004>>CALLBLT  2012>>IF       2027>>ASSIGN
REC$
       593**DCL       616--IMP-PTR
REC_DATA_LN
       621**DCL       620--IMP-SIZ
PL6.E3A0      #001=ZIU$GDCB File=ZIU$GDCB.:ZIC0TSI                               FRI 09/05/97 13:15 Page:24   
SHARESF
       555**DCL      2026<<ASSIGN
SYS_FUNC_CLOS
      2000**DCL-ENT  2059--CALL     2063--CALL
SYS_FUNC_ERRMSG
      2001**DCL-ENT  2018--CALL     2038--CALL     2046--CALL     2070--CALL
SYS_FUNC_GETDCB
      1997**DCL-ENT  2007--CALL
SYS_FUNC_OPEN
      1998**DCL-ENT  2028--CALL
SYS_FUNC_READ
      1999**DCL-ENT  2056--CALL
ZI$DIR.ALTKEY
       244**DCL       245--REDEF     246--REDEF
ZI$DIR.AREAFID
       210**DCL       211--REDEF
ZI$DIR.AREA_NM
       273**DCL      2034>>ASSIGN
ZI$DIR.DATE
       249**DCL       253--REDEF
ZI$DIR.DEST_SEED
       205**DCL       206--REDEF     207--REDEF
ZI$DIR.ENCP_SEED
       202**DCL       203--REDEF     204--REDEF    2052>>ASSIGN
ZI$DIR.REPRT_ZERO
       236**DCL       237--REDEF
ZI$DIR.SCHEMA_NM.NAME.TEXT
       271**DCL      2058<<ASSIGN
ZI$DIR.SCHFID
       208**DCL       209--REDEF
ZI$DIR.TIME
       254**DCL       259--REDEF

PL6.E3A0      #002=ZIU$SRTDCB File=ZIU$GDCB.:ZIC0TSI                             FRI 09/05/97 13:15 Page:25   
      106        1        /*M* ZIU$SRTDCB            IDSII             Check sort dcb for set */
      107        2        /*T***********************************************************/
      108        3        /*T*                                                         */
      109        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      110        5        /*T*                                                         */
      111        6        /*T***********************************************************/
      112        7        ZIU$SRTDCB: PROC;
      113        8
      114        9    1   DCL 1 SORT_DCB STATIC ALIGNED,
      115       10    1         2 V,
      116       11    1           3 CNT UBIN BYTE INIT(7) UNAL,
      117       12    1           3 TXT CHAR(7) INIT('F$SCRF1') UNAL,
      118       13    1         2 DCB# UBIN HALF ALIGNED;
      119       14
      120       15    1   DCL SET_CMD CHAR(48) CONSTANT
      121       16    1    INIT('SET F$SCRF1 *SORT,ORG=RANDOM,DISP=SCRATCH,IX=15');
      122       17
      123       18         %INCLUDE CP_6;
      124       99         %FPT_YC(CMD=SET_CMD);
      125      116         %F$DCB;
      126      173         %INCLUDE CP_6_SUBS;
      127      713         %INCLUDE ZI_GLOBAL_DBUTIL;
      128      891         %SYS_FUNC;
      129      983
      130      984    1   DCL SYS_FUNC_OPEN ENTRY ALTRET;
      131      985    1   DCL SYS_FUNC_CLOS ENTRY ALTRET;
      132      986    1   DCL SYS_FUNC_GETDCB ENTRY ALTRET;
      133      987
      134      988    1   /**/ DCBNMSF = VECTOR(SORT_DCB.V);
      135      989    1       CALL SYS_FUNC_GETDCB;
      136      990    1       SORT_DCB.DCB# = DCBSF;
      137      991
      138      992        /*
      139      993              Set up sort dcb with defaults by doing a test open. Dont worry
      140      994              about an altreturn since this dcb can be handled by sort.
      141      995        */
      142      996    1   /**/ DCBSF = SORT_DCB.DCB#;
PL6.E3A0      #002=ZIU$SRTDCB File=ZIU$GDCB.:ZIC0TSI                             FRI 09/05/97 13:15 Page:26   
      143      997    1   /**/ FIDSF = '*SORT      ';
      144      998    1   /**/ ORGSF = %RANDOM#;
      145      999    1   /**/ ACSSF = %DIRECT#;
      146     1000    1   /**/ FUNSF = %CREATE#;
      147     1001    1   /**/ XTENSIZESF = 15;
      148     1002    1   /**/ ASNSF = %FILE#;
      149     1003    1       CALL SYS_FUNC_OPEN;
      150     1004         /*
      151     1005            Check for a set command on DCB F$SCRF1. If none exists, then
      152     1006            call the M$YC monitor routine and supply the default SET cmnd.
      153     1007         */
      154     1008    1       IF DCBADDR(DCBSF) -> F$DCB.AMR# = %NO# THEN
      155     1009    1           CALL M$YC(FPT_YC);
      156     1010    1       CALL SYS_FUNC_CLOS;
      157     1011
      158     1012    1       RETURN;
      159     1013
      160     1014    1   END ZIU$SRTDCB;

PL6.E3A0      #002=ZIU$SRTDCB File=ZIU$GDCB.:ZIC0TSI                             FRI 09/05/97 13:15 Page:27   
--  Include file information  --

   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure ZIU$SRTDCB.

   Procedure ZIU$SRTDCB requires 40 words for executable code.
   Procedure ZIU$SRTDCB requires 4 words of local(AUTO) storage.

    No errors detected in file ZIU$GDCB.:ZIC0TSI    .

PL6.E3A0      #002=ZIU$SRTDCB File=ZIU$GDCB.:ZIC0TSI                             FRI 09/05/97 13:15 Page:28   

 Object Unit name= ZIU$SRTDCB                                 File name= ZIU$GDCB.:ZIC0TOU
 UTS= SEP 05 '97 13:15:23.60 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none    12     14  ZIU$SRTDCB
    1  RoData even  UTS     15     17  ZIU$SRTDCB
    2   DCB   even  none     0      0  M$UC
    3   Proc  even  none    40     50  ZIU$SRTDCB
    4  RoData even  none     4      4  ZIU$SRTDCB

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes            yes      Std        0  ZIU$SRTDCB

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       0 SYS_FUNC_GETDCB
 yes     yes           Std       0 SYS_FUNC_OPEN
 yes     yes           Std       0 SYS_FUNC_CLOS
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
PL6.E3A0      #002=ZIU$SRTDCB File=ZIU$GDCB.:ZIC0TSI                             FRI 09/05/97 13:15 Page:29   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  BLKLSF                                KEYLSF
     KEYXSF                                DCBSF                                 ORGSF
     KEYSF                                 KEYVSF                                ACSSF
     NOTIMESF                              FUNSF                                 ASNSF
     TESTSF                                XTENSIZESF                            DISPSF
     WAITSF                                VFCSF                                 FULLSF
     BKUPSF                                BUFLNSF                               BUFSF
     SOURCESF                              DESTSF                                DATESF
     TIMESF                                UTSSF                                 DAYSF
     TSTAMPSF                              ENCRP_SEEDSF                          ERRCODESF
     MSGCODE                               INCL_ERR                              ERR_INSERT
     FIDSF_RD                              ACNT                                  EXISTSF
     SHARESF                               DCBNMSF                               KEYRSF
     NO_KEYSF                              REASGNSF                              CARRY_ATTRIBUTESF
     SUBMESSF                              SPKY_OPNSF                            POSSF
     ERRFLGSF                              MERGESF                               FSA_FLAG
     RELGSF                                UNUSED                                HELPCODE
     COUNTSF                               INDEXSF                               GAP
     PSNSF                                 ACNTSF                                KEY_SHADWSF

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #002=ZIU$SRTDCB File=ZIU$GDCB.:ZIC0TSI                             FRI 09/05/97 13:15 Page:30   


      106        1        /*M* ZIU$SRTDCB            IDSII             Check sort dcb for set */
      107        2        /*T***********************************************************/
      108        3        /*T*                                                         */
      109        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      110        5        /*T*                                                         */
      111        6        /*T***********************************************************/
      112        7        ZIU$SRTDCB: PROC;

      7  3 000000   000000 700200 xent  ZIU$SRTDCB   TSX0  ! X66_AUTO_0
         3 000001   000004 000000                    ZERO    4,0

      113        8
      114        9    1   DCL 1 SORT_DCB STATIC ALIGNED,
      115       10    1         2 V,
      116       11    1           3 CNT UBIN BYTE INIT(7) UNAL,
      117       12    1           3 TXT CHAR(7) INIT('F$SCRF1') UNAL,
      118       13    1         2 DCB# UBIN HALF ALIGNED;
      119       14
      120       15    1   DCL SET_CMD CHAR(48) CONSTANT
      121       16    1    INIT('SET F$SCRF1 *SORT,ORG=RANDOM,DISP=SCRATCH,IX=15');
      122       17
      123       18         %INCLUDE CP_6;
      124       99         %FPT_YC(CMD=SET_CMD);
      125      116         %F$DCB;
      126      173         %INCLUDE CP_6_SUBS;
      127      713         %INCLUDE ZI_GLOBAL_DBUTIL;
      128      891         %SYS_FUNC;
      129      983
      130      984    1   DCL SYS_FUNC_OPEN ENTRY ALTRET;
      131      985    1   DCL SYS_FUNC_CLOS ENTRY ALTRET;
      132      986    1   DCL SYS_FUNC_GETDCB ENTRY ALTRET;
      133      987
      134      988    1   /**/ DCBNMSF = VECTOR(SORT_DCB.V);

    988  3 000002   000000 237000 4                  LDAQ    0
         3 000003   000000 755000 xsym               STA     DCBNMSF
PL6.E3A0      #002=ZIU$SRTDCB File=ZIU$GDCB.:ZIC0TSI                             FRI 09/05/97 13:15 Page:31   
         3 000004   000001 756000 xsym               STQ     DCBNMSF+1

      135      989    1       CALL SYS_FUNC_GETDCB;

    989  3 000005   000002 631400 4                  EPPR1   2
         3 000006   000000 701000 xent               TSX1    SYS_FUNC_GETDCB
         3 000007   000000 011000                    NOP     0

      136      990    1       SORT_DCB.DCB# = DCBSF;

    990  3 000010   000000 220000 xsym               LDX0    DCBSF
         3 000011   000002 740000 0                  STX0    SORT_DCB+2

      137      991
      138      992        /*
      139      993              Set up sort dcb with defaults by doing a test open. Dont worry
      140      994              about an altreturn since this dcb can be handled by sort.
      141      995        */
      142      996    1   /**/ DCBSF = SORT_DCB.DCB#;

    996  3 000012   000000 740000 xsym               STX0    DCBSF

      143      997    1   /**/ FIDSF = '*SORT      ';

    997  3 000013   040000 100400                    MLR     fill='040'O
         3 000014   000014 000013 1                  ADSC9   SET_CMD+12               cn=0,n=11
         3 000015   000000 000036 xsym               ADSC9   FIDSF_RD                 cn=0,n=30

      144      998    1   /**/ ORGSF = %RANDOM#;

    998  3 000016   000003 235007                    LDA     3,DL
         3 000017   000000 755000 xsym               STA     ORGSF

      145      999    1   /**/ ACSSF = %DIRECT#;

    999  3 000020   000002 236007                    LDQ     2,DL
         3 000021   000000 756000 xsym               STQ     ACSSF
PL6.E3A0      #002=ZIU$SRTDCB File=ZIU$GDCB.:ZIC0TSI                             FRI 09/05/97 13:15 Page:32   

      146     1000    1   /**/ FUNSF = %CREATE#;

   1000  3 000022   000000 755000 xsym               STA     FUNSF

      147     1001    1   /**/ XTENSIZESF = 15;

   1001  3 000023   000017 235007                    LDA     15,DL
         3 000024   000000 755000 xsym               STA     XTENSIZESF

      148     1002    1   /**/ ASNSF = %FILE#;

   1002  3 000025   000001 235007                    LDA     1,DL
         3 000026   000000 755000 xsym               STA     ASNSF

      149     1003    1       CALL SYS_FUNC_OPEN;

   1003  3 000027   000002 631400 4                  EPPR1   2
         3 000030   000000 701000 xent               TSX1    SYS_FUNC_OPEN
         3 000031   000000 011000                    NOP     0

      150     1004         /*
      151     1005            Check for a set command on DCB F$SCRF1. If none exists, then
      152     1006            call the M$YC monitor routine and supply the default SET cmnd.
      153     1007         */
      154     1008    1       IF DCBADDR(DCBSF) -> F$DCB.AMR# = %NO# THEN

   1008  3 000032   000003 470400 4                  LDP0    3
         3 000033   000000 471500                    LDP1    0,,PR0
         3 000034   000000 220000 xsym               LDX0    DCBSF
         3 000035   100000 473510                    LDP3    0,X0,PR1
         3 000036   300031 236100                    LDQ     25,,PR3
         3 000037   010000 316007                    CANQ    4096,DL
         3 000040   000044 601000 3                  TNZ     s:1010

      155     1009    1           CALL M$YC(FPT_YC);

PL6.E3A0      #002=ZIU$SRTDCB File=ZIU$GDCB.:ZIC0TSI                             FRI 09/05/97 13:15 Page:33   
   1009  3 000041   000004 630400 0                  EPPR0   FPT_YC
         3 000042   000011 713400                    CLIMB   9
         3 000043   401000 401760                    pmme    nvectors=3

      156     1010    1       CALL SYS_FUNC_CLOS;

   1010  3 000044   000002 631400 4                  EPPR1   2
         3 000045   000000 701000 xent               TSX1    SYS_FUNC_CLOS
         3 000046   000000 011000                    NOP     0

      157     1011
      158     1012    1       RETURN;

   1012  3 000047   000000 702200 xent               TSX2  ! X66_ARET

SORT_DCB
 Sect OctLoc
   0     000   007106 044123   103122 106061   ****** ******                    .F$SCRF1....

FPT_YC
 Sect OctLoc
   0     004   000013 777640   000000 006000   000001 777640   000012 006000    ................
   0     010   000000 177640   000000 006014   000000 000000   0***** ******    ................

SET_CMD
 Sect OctLoc
   1     000   123105 124040   106044 123103   122106 061040   052123 117122    SET F$SCRF1 *SOR
   1     004   124054 117122   107075 122101   116104 117115   054104 111123    T,ORG=RANDOM,DIS
   1     010   120075 123103   122101 124103   110054 111130   075061 065040    P=SCRATCH,IX=15

(unnamed)
 Sect OctLoc
   1     014   052123 117122   124040 040040   040040 040040                    *SORT

(unnamed)
 Sect OctLoc
   4     000   000001 777640   000000 006000   000000 000000   000000 006003    ................
PL6.E3A0      #002=ZIU$SRTDCB File=ZIU$GDCB.:ZIC0TSI                             FRI 09/05/97 13:15 Page:34   
      159     1013
      160     1014    1   END ZIU$SRTDCB;

PL6.E3A0      #002=ZIU$SRTDCB File=ZIU$GDCB.:ZIC0TSI                             FRI 09/05/97 13:15 Page:35   
--  Include file information  --

   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure ZIU$SRTDCB.

   Procedure ZIU$SRTDCB requires 40 words for executable code.
   Procedure ZIU$SRTDCB requires 4 words of local(AUTO) storage.

    No errors detected in file ZIU$GDCB.:ZIC0TSI    .
PL6.E3A0      #002=ZIU$SRTDCB File=ZIU$GDCB.:ZIC0TSI                             FRI 09/05/97 13:15 Page:36   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=ZIU$SRTDCB File=ZIU$GDCB.:ZIC0TSI                             FRI 09/05/97 13:15 Page:37   
          MINI XREF LISTING

ACSSF
       910**DCL       999<<ASSIGN
ASNSF
       913**DCL      1002<<ASSIGN
COUNTSF
       972**DCL       973--REDEF
DCBNMSF
       953**DCL       988<<ASSIGN
DCBSF
       901**DCL       990>>ASSIGN    996<<ASSIGN   1008--IF
ENCRP_SEEDSF
       930**DCL       931--REDEF
ERRCODESF
       932**DCL       937--REDEF
F$DCB.ACTPOS
       149**DCL       149--REDEF
F$DCB.AMR#
       136**DCL      1008>>IF
F$DCB.ARS#
       123**DCL       123--REDEF
F$DCB.ATTR
       142**DCL       143--REDEF
F$DCB.BORROW
       157**DCL       157--REDEF     157--REDEF     157--REDEF
F$DCB.DCBNAME.L
       171**DCL       171--IMP-SIZ
F$DCB.EOMCHAR#
       127**DCL       127--REDEF
F$DCB.FLDID
       152**DCL       152--REDEF
F$DCB.FORM$
       146**DCL       146--REDEF
PL6.E3A0      #002=ZIU$SRTDCB File=ZIU$GDCB.:ZIC0TSI                             FRI 09/05/97 13:15 Page:38   
F$DCB.FSECT
       162**DCL       162--REDEF
F$DCB.FSN#
       139**DCL       139--REDEF     139--REDEF     140--REDEF
F$DCB.HEADER$
       145**DCL       145--REDEF
F$DCB.IXTNSIZE#
       143**DCL       143--REDEF
F$DCB.LASTSTA$
       132**DCL       132--REDEF
F$DCB.LVL
       158**DCL       158--REDEF
F$DCB.NAME#.C
       133**DCL       133--REDEF
F$DCB.NOEOF
       155**DCL       155--REDEF
F$DCB.NRECS#
       144**DCL       144--REDEF
F$DCB.NRECX
       163**DCL       163--REDEF
F$DCB.OHDR
       155**DCL       155--REDEF
F$DCB.ORG#
       138**DCL       138--REDEF
F$DCB.PRECNO
       161**DCL       161--REDEF
F$DCB.RCSZ
       167**DCL       167--REDEF
F$DCB.RES#
       134**DCL       134--REDEF
F$DCB.SETX
       146**DCL       146--REDEF
F$DCB.TAB$
       146**DCL       146--REDEF
F$DCB.TDA
       160**DCL       161--REDEF
PL6.E3A0      #002=ZIU$SRTDCB File=ZIU$GDCB.:ZIC0TSI                             FRI 09/05/97 13:15 Page:39   
F$DCB.WSN#
       134**DCL       134--REDEF
FIDSF
       949**DCL       997<<ASSIGN
FIDSF_RD
       948**DCL       949--REDEF
FPT_YC
       112**DCL      1009<>CALL
FPT_YC.V
       113**DCL       112--DCLINIT
FUNSF
       912**DCL      1000<<ASSIGN
HELPCODE
       966**DCL       971--REDEF
KEYVSF
       904**DCL       909--REDEF
KEYVSF.WD_ONE
       906**DCL       907--REDEF
M$YC
        41**DCL-ENT  1009--CALL
MSGCODE
       938**DCL       939--REDEF
ORGSF
       902**DCL       998<<ASSIGN
SET_CMD
        15**DCL       112--DCLINIT
SORT_DCB.DCB#
        13**DCL       990<<ASSIGN    996>>ASSIGN
SORT_DCB.V
        10**DCL       988--ASSIGN
SYS_FUNC_CLOS
       985**DCL-ENT  1010--CALL
SYS_FUNC_GETDCB
       986**DCL-ENT   989--CALL
SYS_FUNC_OPEN
       984**DCL-ENT  1003--CALL
PL6.E3A0      #002=ZIU$SRTDCB File=ZIU$GDCB.:ZIC0TSI                             FRI 09/05/97 13:15 Page:40   
XTENSIZESF
       915**DCL      1001<<ASSIGN
