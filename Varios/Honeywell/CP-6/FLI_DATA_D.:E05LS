VERSION E05

PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:1    
        1        1        /*M* FLI_DATA_D - data for EFT's I/O routines */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        FLI_DATA_D: PROC NOAUTO;
        8        8
        9        9        /*  ! !  */
       10       10        %INCLUDE CP_6;
       11     5569        /*  !R!  */
       12     5570        %INCLUDE FLB_SUBS_C;
       13     5774        %INCLUDE B_MICROPS_C;
       14     5946
       15     5947    1   DCL LAST_SNLISTINFO$ PTR STATIC SYMDEF INIT(ADDR(NIL));
       16     5948                                           /* Pointer to last serial number list info */
       17     5949
       18     5950        %MACRO SNLISTINFO( FPTN=SNLISTINFO,
       19     5951                           STCLASS=BASED );
       20     5952        DCL 1 FPTN STCLASS,
       21     5953              2 SNLIST$ PTR,                    /* Pointer to serial number list      */
       22     5954              2 PREVINFO$ PTR;                  /* Pointer to previous snlist info    */
       23     5955
       24     5956        %MEND;
       25     5957
       26     5958    1   DCL NBR_SNLISTS SBIN STATIC SYMDEF INIT(0); /* Number of sn lists             */
       27     5959
       28     5960    1   DCL TAPE_DCBLIST$ PTR STATIC SYMDEF;   /* Pointer to tape DCB list                */
       29     5961
       30     5962    1   DCL 1 TAPE_DCBLIST(0:0) BASED(TAPE_DCBLIST$),
              5962            /* DCB info                           */
       31     5963    1         2 DCB# SBIN,
       32     5964    1         2 DCB$ PTR;
       33     5965
       34     5966        %FPT_EXIT( FPTN=FPT_EXIT,
       35     5967                   STCLASS="STATIC SYMDEF" );
       36     5982        %EQU OPER_ERROR = 5;
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:2    
       37     5983        %EQU TAPE_ERROR = 4;
       38     5984        %EQU DISK_ERROR = 3;
       39     5985        %EQU SERIOUS_ERROR = 2;
       40     5986        %EQU MINOR_ERROR = 1;
       41     5987
       42     5988        %FPT_OPEN( FPTN=DISK_OPEN,
       43     5989                   STCLASS="STATIC SYMDEF",
       44     5990                   ACS=BLOCK,
       45     5991                   THISF=YES,
       46     5992                   NXTF=YES,
       47     5993                   ANYF=YES,
       48     5994                   CTG=YES,
       49     5995                   ASN=FILE );
       50     6104
       51     6105        %FPT_READ( FPTN=DISK_READ,
       52     6106                   STCLASS="STATIC SYMDEF",
       53     6107                   WAIT=NO );
       54     6146
       55     6147        %FPT_WRITE( FPTN=DISK_WRITE,
       56     6148                    STCLASS="STATIC SYMDEF",
       57     6149                    WAIT=NO );
       58     6180
       59     6181        %FPT_CLOSE( FPTN=DISK_CLOSE,
       60     6182                    STCLASS="STATIC SYMDEF",
       61     6183                    DISP=SAVE );
       62     6225
       63     6226        %FPT_OPEN( FPTN=TAPE_OPEN,
       64     6227                   ORG=RESTRICT,
       65     6228                   RES='LT',
       66     6229                   ACS=BLOCK,
       67     6230                   STCLASS="STATIC SYMDEF",
       68     6231                   ASN=TAPE );
       69     6340
       70     6341        %FPT_READ( FPTN=TAPE_READ,
       71     6342                   STCLASS="STATIC SYMDEF",
       72     6343                   WAIT=YES );
       73     6382
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:3    
       74     6383        %FPT_WRITE( FPTN=TAPE_WRITE,
       75     6384                    FULL=YES,
       76     6385                    STCLASS="STATIC SYMDEF",
       77     6386                    WAIT=YES );
       78     6417
       79     6418        %FPT_CLOSE( FPTN=TAPE_CLOSE,
       80     6419                    STCLASS="STATIC SYMDEF",
       81     6420                    DISP=SAVE );
       82     6462
       83     6463        %FPT_REM( FPTN=TAPE_REWIND,
       84     6464                  DISP=PTV,
       85     6465                  STCLASS="STATIC SYMDEF" );
       86     6479
       87     6480        %FPT_REM( FPTN=TAPE_REMOVE,
       88     6481                  DISP=REM,
       89     6482                  STCLASS="STATIC SYMDEF" );
       90     6496
       91     6497        %FPT_CVOL( FPTN=TAPE_CVOL,
       92     6498                   STCLASS="STATIC SYMDEF" );
       93     6513
       94     6514        %FPT_PRECORD( FPTN=TAPE_PRECORD,
       95     6515                  STCLASS="STATIC SYMDEF" );
       96     6536
       97     6537
       98     6538    1   DCL SNVECLIST$ PTR STATIC SYMDEF;       /* To serial number vector list       */
       99     6539
      100     6540    1   DCL 1 SNVECLIST(0:0) DALIGNED BASED(SNVECLIST$),
      101     6541    1         2 SN_ BIT(72);
      102     6542
      103     6543
      104     6544        %VLP_VECTOR( FPTN=TVECTOR,
      105     6545                     STCLASS="STATIC SYMDEF" );
      106     6560
      107     6561    1   DCL B$JIT$ PTR SYMREF;
      108     6562    1   DCL B$TCB$ PTR SYMREF;
      109     6563
      110     6564    1   DCL FMSEC BIT(1) STATIC SYMDEF;
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:4    
      111     6565
      112     6566    1   DCL ZERO UBIN WORD CONSTANT SYMDEF INIT(0);
      113     6567    1   DCL COMMAND_ERROR BIT(1) STATIC SYMDEF;
      114     6568
      115     6569    1   DCL OVER_FIL BIT(1) STATIC SYMDEF;
      116     6570    1   DCL NBR_OUTSTANDING_IOS SBIN STATIC SYMDEF;
      117     6571    1   DCL LAST_FREE_IX SBIN STATIC SYMDEF;    /* Ix of last free buffer             */
      118     6572    1   DCL LAST_USED_IX SBIN STATIC SYMDEF;    /* Ix of last used buffer             */
      119     6573    1   DCL FIRST_USED_IX SBIN STATIC SYMDEF;   /* Ix of first used buffer            */
      120     6574    1   DCL USED_BUF_ERR BIT(36) STATIC SYMDEF;
      121     6575    1   DCL RELEASED_BUF_ERR BIT(36) STATIC SYMDEF;
      122     6576    1   DCL NBR_GRANS_REMAINING SBIN STATIC SYMDEF; /* Left to read                   */
      123     6577    1   DCL NBR_GRANS_PER_DISK_BUF SBIN STATIC SYMDEF;
      124     6578    1   DCL DEFAULT_GRANS_PER_DISK_BUF SBIN STATIC SYMDEF INIT(4);
      125     6579    1   DCL NBR_GRANS_PER_TAPE_BUF SBIN STATIC SYMDEF;
      126     6580    1   DCL DEFAULT_GRANS_PER_TAPE_BUF SBIN STATIC SYMDEF INIT(8);
      127     6581        %EQU MAX_GRANS_PER_TAPE_BUF = ( 99999 / ( 4096 * 9 / 8) ); /* 99999 is ANS */
      128     6582          /* limit, 4096 binary block size, 9/8 conversion factor from binary to ASCII */
      129     6583
      130     6584        %EQU MAX_OUTSTANDING_IOS=5;             /* Limited by OUTSTANDING_IO.EVID.IX  */
      131     6585    1   DCL MAX_IOS SBIN STATIC SYMDEF INIT(%MAX_OUTSTANDING_IOS);
      132     6586
      133     6587    1   DCL 1 OUTSTANDING_IO(0:%MAX_OUTSTANDING_IOS) DALIGNED STATIC SYMDEF,
      134     6588    1         2 BUF_ BIT(72) DALIGNED,          /* Frames buffer                      */
      135     6589    1         2 DCB# UBIN(18) UNAL,             /* DCB I/O was started through        */
      136     6590    1         2 * BIT(16) UNAL,
      137     6591    1         2 RELEASED BIT(1) UNAL,           /* Buffer released to caller          */
      138     6592    1         2 NOT_READY BIT(1) UNAL,          /* Indicates still waiting            */
      139     6593    1         2 ERR,
      140     6594    1           3 * BIT(19),
      141     6595    1           3 CODE UBIN(14) UNAL,
      142     6596    1           3 * BIT(3),
      143     6597    1         2 NEXT_IX SBIN,                   /* Index of next I/O in sequence      */
      144     6598    1         2 ARS SBIN;
      145     6599
      146     6600    1   DCL EOVOL_DETECTED BIT(1) STATIC SYMDEF ; /* Indicates volume change needed   */
      147     6601
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:5    
      148     6602    1   DCL NOW_UTS UBIN WORD STATIC SYMDEF;
      149     6603
      150     6604        %FPT_TIME( FPTN=GET_NOW_UTS,            /* Used to get current time           */
      151     6605                   STCLASS="STATIC SYMDEF",
      152     6606                   TSTAMP=NOW_UTS,
      153     6607                   SOURCE=CLOCK );
      154     6626
      155     6627    1   DCL START_UTS UBIN WORD STATIC SYMDEF;  /* Beginning of run                   */
      156     6628    1   DCL ACCUMULATED_MOUNT_TIME UBIN WORD STATIC SYMDEF;
      157     6629    1   DCL ACCUMULATED_SPIN_TIME UBIN WORD STATIC SYMDEF;
      158     6630    1   DCL ACCUMULATED_BREAK_TIME UBIN WORD STATIC SYMDEF;
      159     6631
      160     6632    1   DCL DPLIST$ PTR STATIC SYMDEF;          /* Points to DP list                  */
      161     6633        %VLP_SN( FPTN=DPLIST,
      162     6634                 STCLASS="BASED(DPLIST$)" );
      163     6647
      164     6648    1   DCL DPRESLIST$ PTR STATIC SYMDEF;              /* Pointer to DP resource list */
      165     6649    1   DCL 1 DPRESLIST ALIGNED BASED(DPRESLIST$), /* Resource list parallel to DPLIST */
      166     6650    1         2 NBR SBIN,                         /* Number of items in resource list */
      167     6651    1         2 NAME(0:0) CHAR(4) CALIGNED;
      168     6652
      169     6653    1   DCL DISK_FILE_SPEC$ PTR STATIC SYMDEF;  /* Points to file specifications list */
      170     6654    1   DCL 1 DISK_FILE_SPEC BASED(DISK_FILE_SPEC$),
      171     6655    1         2 NBR SBIN,                       /* Number of items in following list  */
      172     6656    1         2 NBR_LEFT SBIN,             /* Number of unused items following list   */
      173     6657    1         2 PASSWORD_SPEC BIT(1),  /* Password was spec'd - single file operation */
      174     6658    1         2 PASSWORD# CHAR(8) CALIGNED,
      175     6659    1         2 SPEC(0:0),
      176     6660    1           3 SKIP SBIN,
      177     6661    1           3 START,
      178     6662    1             4 ACCT,
      179     6663    1               5 ACCT# CHAR(8),
      180     6664    1             4 FILE,
      181     6665    1               5 NAME# CHAR(31) CALIGNED,
      182     6666    1               5 L# UBIN(9) CALIGNED,
      183     6667    1           3 STARTCHARS REDEF START CHAR(40),
      184     6668    1           3 STOP,
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:6    
      185     6669    1             4 ACCT,
      186     6670    1               5 ACCT# CHAR(8),
      187     6671    1             4 FILE,
      188     6672    1               5 NAME# CHAR(31) CALIGNED,
      189     6673    1               5 L# UBIN(9) CALIGNED,
      190     6674    1           3 STOPCHARS REDEF STOP CHAR(40),
      191     6675    1         2 SPECCHARS(0:0) REDEF SPEC CHAR(84);
      192     6676
      193     6677    1   DCL SPECCHARS CHAR(84) STATIC SYMDEF;
      194     6678    1   DCL 1 SPEC REDEF SPECCHARS,
      195     6679    1           2 SKIP SBIN,
      196     6680    1           2 START,
      197     6681    1             3 ACCT,
      198     6682    1               4 ACCT# CHAR(8),
      199     6683    1             3 FILE,
      200     6684    1               4 NAME# CHAR(31) CALIGNED,
      201     6685    1               4 L# UBIN(9) CALIGNED,
      202     6686    1           2 STARTCHARS REDEF START CHAR(40),
      203     6687    1           2 STOP,
      204     6688    1             3 ACCT,
      205     6689    1               4 ACCT# CHAR(8),
      206     6690    1             3 FILE,
      207     6691    1               4 NAME# CHAR(31) CALIGNED,
      208     6692    1               4 L# UBIN(9) CALIGNED,
      209     6693    1           2 STOPCHARS REDEF STOP CHAR(40);
      210     6694
      211     6695    1   DCL 1 DISK_SRCHCOND STATIC SYMDEF,      /* Exactly like FPT_OPEN.V.SRCHCOND   */
      212     6696    1         2 DELF# BIT(1),
      213     6697    1         2 NOLIST# BIT(1),
      214     6698    1         2 BUF# BIT(1),
      215     6699    1         2 * BIT(1),
      216     6700    1         2 BAD# BIT(1),
      217     6701    1         2 QS# BIT(1),
      218     6702    1         2 * BIT(2),
      219     6703    1         2 ARCHIVE# BIT(1),
      220     6704    1         2 ANYF# BIT(1),
      221     6705    1         2 * BIT(7),
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:7    
      222     6706    1         2 REV# BIT(1);
      223     6707
      224     6708    1   DCL 1 TEMP_DISK_SRCHCOND STATIC SYMDEF,
      225     6709    1         2 DELF# BIT (1),
      226     6710    1         2 NOLIST# BIT (1),
      227     6711    1         2 BUF# BIT (1),
      228     6712    1         2 * BIT(1),
      229     6713    1         2 BAD# BIT(1),
      230     6714    1         2 QS# BIT(1),
      231     6715    1         2 * BIT(2),
      232     6716    1         2 ARCHIVE# BIT(1),
      233     6717    1         2 ANYF# BIT(1),
      234     6718    1         2 * BIT(7),
      235     6719    1         2 REV# BIT(1);
      236     6720
      237     6721    1   DCL 1 DISK_DESC STATIC SYMDEF,          /* Exactly like M$DCB.DESC            */
      238     6722    1         2 DELF# BIT(1),
      239     6723    1         2 NOLIST# BIT(1),
      240     6724    1         2 BUF# BIT(1),
      241     6725    1         2 ODSTOW# BIT(1),
      242     6726    1         2 BAD# BIT(1),
      243     6727    1         2 QS# BIT(1),
      244     6728    1         2 * BIT(2),
      245     6729    1         2 ARCHIVE# BIT(1),
      246     6730    1         2 BUPM# BIT(1),
      247     6731    1         2 NBUF# BIT(1),
      248     6732    1         2 ACTIVE# BIT(1),
      249     6733    1         2 TPB# BIT(1),
      250     6734    1         2 TERMINATE# BIT(1),
      251     6735    1         2 FETCH# BIT(1),
      252     6736    1         2 * BIT(3);
      253     6737
      254     6738    1   DCL 1 DISK_DESC_MASK STATIC SYMDEF,     /* Exactly like M$DCB.DESC            */
      255     6739    1         2 DELF# BIT(1),
      256     6740    1         2 NOLIST# BIT(1),
      257     6741    1         2 BUF# BIT(1),
      258     6742    1         2 ODSTOW# BIT(1),
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:8    
      259     6743    1         2 BAD# BIT(1),
      260     6744    1         2 QS# BIT(1),
      261     6745    1         2 * BIT(2),
      262     6746    1         2 ARCHIVE# BIT(1),
      263     6747    1         2 BUPM# BIT(1),
      264     6748    1         2 NBUF# BIT(1),
      265     6749    1         2 ACTIVE# BIT(1),
      266     6750    1         2 TPB# BIT(1),
      267     6751    1         2 TERMINATE# BIT(1),
      268     6752    1         2 FETCH# BIT(1),
      269     6753    1         2 * BIT(3);
      270     6754
      271     6755    1   DCL 1 DISK_OPTION STATIC SYMDEF,        /* All the other funny options        */
      272     6756    1         2 DIR BIT(1),
      273     6757    1         2 DELETED_ACCOUNTS BIT(1),
      274     6758    1         2 CLEANUP BIT(1),
      275     6759    1         2 LEA BIT(1),
      276     6760    1         2 PAD BIT(1),
      277     6761    1         2 INACTIVATE BIT(1),
      278     6762    1         2 ACUP BIT(1),
      279     6763    1         2 CHECK BIT(1),
      280     6764    1         2 NOUPDATE BIT(1),
      281     6765    1         2 IDSS UBIN(3),
      282     6766    1         2 SCRUB,
      283     6767    1            3 BACKUP BIT(1),
      284     6768    1            3 CREATOR BIT(1),
      285     6769    1            3 STOW BIT(1),
      286     6770    1         2 DELETE BIT(1),
      287     6771    1         2 OVERLAP_WARN BIT(1),
      288     6772    1         2 SWITCH_IF_ERRORS BIT(1),
      289     6773    1         2 SKIP_NO_BACKUP BIT(1),
      290     6774    1         2 SKIP_NO_STOW BIT(1),
      291     6775    1         2 SKIP_NO_PURGE BIT(1),
      292     6776    1         2 XFER BIT(1),
      293     6777    1         2 SAVE_DIR BIT(1),
      294     6778    1         2 OPEN_MODE UBIN(3),
      295     6779    1         2 SHARED BIT(1);
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:9    
      296     6780    1   DCL 1 FILE_TYPE WALIGNED STATIC SYMDEF,
      297     6781    1         2 A BIT(1),      /* Actively Archived files   */
      298     6782    1         2 I BIT(1),      /* Inactively Archived files */
      299     6783    1         2 SA BIT(1),     /* Actively Stowed files     */
      300     6784    1         2 SI BIT(1),     /* Inactively Stowed files   */
      301     6785    1         2 FA BIT(1),     /* Fetched files             */
      302     6786    1         2 FI BIT(1),
      303     6787    1         2 DF BIT(1),     /* Deleted files             */
      304     6788    1         2 BUF BIT(1),    /* Backed up files           */
      305     6789    1         2 * BIT(10);
      306     6790                                                /* ... and others to be added         */
      307     6791
      308     6792    1   DCL 1 DISK_ORGS STATIC SYMDEF,          /* Selected organizations             */
      309     6793    1         2 NBR SBIN,
      310     6794    1         2 ORG(0:20) SBIN;
      311     6795
      312     6796    1   DCL DISK_BEF_UTS(0:%MAX_DATE) UBIN STATIC SYMDEF;
      313     6797    1   DCL DISK_AFT_UTS(0:%MAX_DATE) UBIN STATIC SYMDEF;
      314     6798    1   DCL DISK_AND_OP(0:%MAX_DATE) BIT(1) STATIC SYMDEF;
      315     6799
      316     6800    1   DCL 1 DISK_CRIT STATIC SYMDEF,          /* Disk criteria to match             */
      317     6801    1         2 DSC BIT(1),                     /* Descriptor bits                    */
      318     6802    1         2 ORG BIT(1),                     /* File organization                  */
      319     6803    1         2 TIM BIT(1);                     /* Time specification */
      320     6804
      321     6805    1   DCL 1 DATE_CRIT STATIC SYMDEF,
      322     6806    1         2 BEF(0:%MAX_DATE) BIT(1),
      323     6807    1         2 AFT(0:%MAX_DATE) BIT(1),
      324     6808    1         2 EXPD BIT(1),                    /* Expiration date                    */
      325     6809    1         2 NOT_EXPD BIT(1);                /* Expiration date                    */
      326     6810
      327     6811    1   DCL 1 NEW_DISK_DESC STATIC SYMDEF,          /* Exactly like M$DCB.DESC            */
      328     6812    1         2 DELF# BIT(1),
      329     6813    1         2 NOLIST# BIT(1),
      330     6814    1         2 BUF# BIT(1),
      331     6815    1         2 ODSTOW# BIT(1),
      332     6816    1         2 BAD# BIT(1),
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:10   
      333     6817    1         2 QS# BIT(1),
      334     6818    1         2 * BIT(2),
      335     6819    1         2 ARCHIVE# BIT(1),
      336     6820    1         2 BUPM# BIT(1),
      337     6821    1         2 NBUF# BIT(1),
      338     6822    1         2 ACTIVE# BIT(1),
      339     6823    1         2 TPB# BIT(1),
      340     6824    1         2 TERMINATE# BIT(1),
      341     6825    1         2 FETCH# BIT(1),
      342     6826    1         2 * BIT(3);
      343     6827
      344     6828    1   DCL 1 DISK_DESC_SAVE STATIC SYMDEF,     /* Exactly like M$DCB.DESC            */
      345     6829    1         2 DELF# BIT(1),
      346     6830    1         2 NOLIST# BIT(1),
      347     6831    1         2 BUF# BIT(1),
      348     6832    1         2 ODSTOW# BIT(1),
      349     6833    1         2 BAD# BIT(1),
      350     6834    1         2 QS# BIT(1),
      351     6835    1         2 * BIT(2),
      352     6836    1         2 ARCHIVE# BIT(1),
      353     6837    1         2 BUPM# BIT(1),
      354     6838    1         2 NBUF# BIT(1),
      355     6839    1         2 ACTIVE# BIT(1),
      356     6840    1         2 TPB# BIT(1),
      357     6841    1         2 TERMINATE# BIT(1),
      358     6842    1         2 FETCH# BIT(1),
      359     6843    1         2 * BIT(3);
      360     6844
      361     6845        %VLP_ACCT( FPTN=FIRST_ACCT,
      362     6846                   ACCT='$       ',
      363     6847                   STCLASS="CONSTANT SYMDEF" );
      364     6860
      365     6861        %VLP_ACCT( FPTN=LAST_ACCT,
      366     6862                   ACCT='zzzzzzzz',
      367     6863                   STCLASS="CONSTANT SYMDEF" );
      368     6876
      369     6877        %VLP_ACCT( FPTN=NO_ACCT,
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:11   
      370     6878                   ACCT='        ',
      371     6879                   STCLASS="CONSTANT SYMDEF" );
      372     6892
      373     6893        %VLP_ACCT( FPTN=NULL_ACCT,
      374     6894                   ACCT='        ',
      375     6895                   STCLASS="CONSTANT SYMDEF" );
      376     6908
      377     6909    1   DCL 1 FIRST_FILE CONSTANT SYMDEF,
      378     6910    1         2 NAME# CHAR(31) INIT('$                              '),
      379     6911    1         2 L# UBIN BYTE CALIGNED INIT(1);
      380     6912
      381     6913    1   DCL 1 LAST_FILE CONSTANT SYMDEF,
      382     6914    1         2 NAME# CHAR(31) INIT('zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz'),
      383     6915    1         2 L# UBIN BYTE CALIGNED INIT(31);
      384     6916
      385     6917    1   DCL 1 NO_FILE CONSTANT SYMDEF,
      386     6918    1         2 NAME# CHAR(31) INIT('                               '),
      387     6919    1         2 L# UBIN BYTE CALIGNED INIT(0);
      388     6920
      389     6921    1   DCL 1 NULL_FILE CONSTANT SYMDEF,
      390     6922    1         2 L# UBIN BYTE CALIGNED INIT(0),
      391     6923    1         2 NAME# CHAR(31) INIT('                               ');
      392     6924
      393     6925        %FPT_WAIT( FPTN=WAIT_1,
      394     6926                   UNITS=1,
      395     6927                   STCLASS="CONSTANT SYMDEF" );
      396     6941
      397     6942        %VLP_SN( FPTN=DISK_DEST_SN,
      398     6943                 N=1,
      399     6944                 STCLASS="STATIC SYMDEF" );
      400     6957        %VLP_ACCT( FPTN=DISK_DEST_ACCT,
      401     6958                   STCLASS="STATIC SYMDEF" );
      402     6971
      403     6972    1   DCL 1 DISK_DEST_RES ALIGNED STATIC SYMDEF, /* Res. list parallel to DISK_DEST_SN */
      404     6973    1         2 NBR SBIN INIT(1),
      405     6974    1         2 NAME CHAR(4) CALIGNED INIT(' ');
      406     6975
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:12   
      407     6976    1   DCL DISK_DEST_EXIST SBIN STATIC SYMDEF;
      408     6977
      409     6978    1   DCL LAST_TAPE_FSN SBIN STATIC SYMDEF; /* Tape FSN to stop on */
      410     6979
      411     6980    1   DCL FIRST_TAPE_VOL SBIN STATIC SYMDEF;           /* Starting VOL for this job */
      412     6981
      413     6982    1   DCL 1 EFTWORD SYMDEF STATIC,
      414     6983    1         2 CROSS BIT(1),
      415     6984    1         2 * BIT(3),
      416     6985    1         2 FSN UBIN(14) UNAL; /* Maximum value is 9999 */
      417     6986    1   DCL EFTWORDEXPIRE REDEF EFTWORD SBIN(18) UNAL;
      418     6987
      419     6988    1   DCL DPLISTX SBIN STATIC SYMDEF;
      420     6989    1   DCL SPECX SBIN STATIC SYMDEF;
      421     6990
      422     6991        %EQU MAX_SNSIZEW=151; /* = 100*LENGTHC(VLP_SN.SN#)+LENGTHC(VLP_SN.NUM#) in words */
      423     6992    1   DCL 1 TAPE_OPTION STATIC SYMDEF,
      424     6993    1         2 CHECK BIT(1),
      425     6994    1         2 CHECK_SPECD BIT(1),
      426     6995    1         2 PROTTYPE UBIN(3),
      427     6996    1         2 DENSITY BIT(1),
      428     6997    1         2 VOLACCESS BIT(1),
      429     6998    1         2 EXPIRE BIT(1),
      430     6999    1         2 BLOCK BIT(1),
      431     7000    1         2 NPAD BIT(1),
      432     7001    1         2 IOERRORC BIT(1),                                   /* IO continuation */
      433     7002    1         2 IOERRORC_SPECD BIT(1),     /* IO continuation spec'd - used by MODIFY */
      434     7003    1         2 DUPLICATE_TAPESET BIT(1), /* Use duplicate archive set - used by RETRIEVE */
      435     7004    1         2 OPEN_FUNCTION UBIN BYTE;
      436     7005
      437     7006    1   DCL TRANS_NBR SBIN STATIC SYMDEF;
      438     7007
      439     7008    1   DCL CT_IMAGE CHAR(4) STATIC SYMDEF;
      440     7009
      441     7010    1   DCL TOTAL_FILES SBIN STATIC SYMDEF;
      442     7011    1   DCL TOTAL_GRANS SBIN STATIC SYMDEF;
      443     7012    1   DCL TOTAL_ERRORS SBIN STATIC SYMDEF;
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:13   
      444     7013    1   DCL ERROR_LIMIT SBIN STATIC SYMDEF;
      445     7014
      446     7015    1   DCL STAF BIT(1) STATIC SYMDEF;
      447     7016    1   DCL NBR_CONTROL_FILE UBIN STATIC SYMDEF;
      448     7017    1   DCL CONTROL_LIST (0:5) UBIN STATIC SYMDEF;
      449     7018    1   DCL NO_10_LEADING_ZEROS(0:2) BIT(9) CONSTANT SYMDEF CALIGNED INIT( %MVZB10, %SES10,
              7018            %MVC1 );
      450     7019    1   DCL NO_2_LEADING_ZEROS(0:2) BIT(9) CONSTANT SYMDEF CALIGNED
      451     7020    1      INIT( %MVZB2, %SES10, %MVC1 );
      452     7021    1   DCL NO_LEADING_4_ZEROS(0:0) BIT(9) CONSTANT SYMDEF CALIGNED
      453     7022    1      INIT( %MVZB4 );
      454     7023    1   DCL NO_LEADING_6_ZEROS(0:0) BIT(9) CONSTANT SYMDEF CALIGNED
      455     7024    1      INIT( %MVZB6 );
      456     7025    1   DCL NO_6_LEADING_ZEROS(0:2) BIT(9) CONSTANT SYMDEF CALIGNED
      457     7026    1      INIT( %MVZB6, %SES10, %MVC1 );
      458     7027    1   DCL NO_4_LEADING_ZEROS(0:2) BIT(9) CONSTANT SYMDEF CALIGNED
      459     7028    1      INIT( %MVZB4, %SES10, %MVC1 );
      460     7029    1   DCL NO_5_LEADING_ZEROS(0:2) BIT(9) CONSTANT SYMDEF CALIGNED
      461     7030    1      INIT( %MVZB5, %SES10, %MVC1 );
      462     7031
      463     7032    1   DCL M$PRE_RET DCB;
      464     7033
      465     7034    1   DCL 1 PRE_RET_KEY STATIC SYMDEF,
      466     7035    1         2 KL UBIN BYTE CALIGNED,
      467     7036    1         2 RES CHAR(2),
      468     7037    1         2 SN CHAR(6),
      469     7038    1         2 FSN UBIN(18) CALIGNED,
      470     7039    1         2 PSN CHAR(6),
      471     7040    1         2 ACCT CHAR(8),
      472     7041    1         2 FNAME CALIGNED,
      473     7042    1           3 C CHAR(31),
      474     7043    1           3 L UBIN BYTE CALIGNED;
      475     7044
      476     7045    1   DCL 1 PRE_RET_REC STATIC SYMDEF,
      477     7046    1         2 CROSS BIT(1),
      478     7047    1         2 IOERRORC BIT(1),
      479     7048    1         2 * BIT(7);
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:14   
      480     7049
      481     7050        %FPT_READ( FPTN=PRE_RET_READ,
      482     7051                   DCB=M$PRE_RET,
      483     7052                   KEY=PRE_RET_KEY,
      484     7053                   KEYR=YES,
      485     7054                   BUF=PRE_RET_REC,
      486     7055                   STCLASS="STATIC SYMDEF" );
      487     7094
      488     7095        %FPT_WRITE( FPTN=PRE_RET_WRITE,
      489     7096                    DCB=M$PRE_RET,
      490     7097                    KEY=PRE_RET_KEY,
      491     7098                    BUF=PRE_RET_REC,
      492     7099                    STCLASS="STATIC SYMDEF" );
      493     7130
      494     7131        %VLP_NAME( FPTN=PRE_RET_NAME,
      495     7132                   NAME='*PRE_RET' );
      496     7159
      497     7160        %FPT_OPEN( FPTN=PRE_RET_OPEN,
      498     7161                   DCB=M$PRE_RET,
      499     7162                   NAME=PRE_RET_NAME,
      500     7163                   ORG=KEYED,
      501     7164                   FUN=CREATE,
      502     7165                   ACS=DIRECT,
      503     7166                   ASN=FILE,
      504     7167                   EXIST=NEWFILE,
      505     7168                   CTG=YES,
      506     7169                   STCLASS="STATIC SYMDEF" );
      507     7278
      508     7279        %FPT_CLOSE( FPTN=PRE_RET_CLOSE,
      509     7280                    DCB=M$PRE_RET,
      510     7281                    STCLASS="STATIC SYMDEF" );
      511     7323
      512     7324        %VLP_NAME( FPTN=RET_CMDS_NAME,
      513     7325                   NAME='*RET_CMDS',
      514     7326                   STCLASS="STATIC SYMDEF" );
      515     7353        %VLP_NAME ( FPTN = BACKUP_CMD_FNAME,
      516     7354                    NAME = '*BACKUP_CMD' );
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:15   
      517     7381
      518     7382        %EQU E$FIT_ONLY = 500;
      519     7383
      520     7384    1   DCL 1 FIT_ONLY_CODE CONSTANT SYMDEF,          /* Indicate to FLP$WR_FILE_INFO */
      521     7385    1         2 * BIT(19) INIT('0'B),                 /* that "fit" should be printed */
      522     7386    1         2 * UBIN(14) UNAL INIT(%E$FIT_ONLY),
      523     7387    1         2 * BIT(3) INIT('0'B);
      524     7388
      525     7389    1   DCL TEST_MODE BIT(1) STATIC SYMDEF;
      526     7390
      527     7391    1   END FLI_DATA_D;

PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:16   
--  Include file information  --

   B_MICROPS_C.:E05TOU  is referenced.
   FLB_SUBS_C.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure FLI_DATA_D.

   No code generated for procedure FLI_DATA_D .
   Procedure FLI_DATA_D is declared NOAUTO and requires 584 words of local(STATIC) storage.

    No errors detected in file FLI_DATA_D.:E05TSI    .

PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:17   

 Object Unit name= FLI_DATA_D                                 File name= FLI_DATA_D.:E05TOU
 UTS= JUL 29 '97 16:00:42.92 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none   584   1110  FLI_DATA_D
    1   DCB   even  none     0      0  M$UC
    2  RoData even  UTS     56     70  FLI_DATA_D
    3   DCB   even  none     0      0  M$PRE_RET
    4   Proc  even  none     0      0  FLI_DATA_D

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     4      0   yes            yes     ~proc       0  FLI_DATA_D
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:18   

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      1  LAST_SNLISTINFO$                   0      2  NBR_SNLISTS
    0      3  TAPE_DCBLIST$                      0      4  FPT_EXIT
    0     12  DISK_OPEN                          0    104  DISK_READ
    0    122  DISK_WRITE                         0    136  DISK_CLOSE
    0    174  TAPE_OPEN                          0    266  TAPE_READ
    0    304  TAPE_WRITE                         0    320  TAPE_CLOSE
    0    356  TAPE_REWIND                        0    362  TAPE_REMOVE
    0    366  TAPE_CVOL                          0    376  TAPE_PRECORD
    0    410  SNVECLIST$                         0    412  TVECTOR
    0    414  FMSEC                              2      0  ZERO
    0    415  COMMAND_ERROR                      0    416  OVER_FIL
    0    417  NBR_OUTSTANDING_IOS                0    420  LAST_FREE_IX
    0    421  LAST_USED_IX                       0    422  FIRST_USED_IX
    0    423  USED_BUF_ERR                       0    424  RELEASED_BUF_ERR
    0    425  NBR_GRANS_REMAINING                0    426  NBR_GRANS_PER_DISK_BUF
    0    427  DEFAULT_GRANS_PER_DISK_BUF         0    430  NBR_GRANS_PER_TAPE_BUF
    0    431  DEFAULT_GRANS_PER_TAPE_BUF         0    432  MAX_IOS
    0    434  OUTSTANDING_IO                     0    500  EOVOL_DETECTED
    0    501  NOW_UTS                            0    502  GET_NOW_UTS
    0    516  START_UTS                          0    517  ACCUMULATED_MOUNT_TIME
    0    520  ACCUMULATED_SPIN_TIME              0    521  ACCUMULATED_BREAK_TIME
    0    522  DPLIST$                            0    523  DPRESLIST$
    0    524  DISK_FILE_SPEC$                    0    525  SPECCHARS
    0    552  DISK_SRCHCOND                      0    553  TEMP_DISK_SRCHCOND
    0    554  DISK_DESC                          0    555  DISK_DESC_MASK
    0    556  DISK_OPTION                        0    563  FILE_TYPE
    0    564  DISK_ORGS                          0    612  DISK_BEF_UTS
    0    617  DISK_AFT_UTS                       0    624  DISK_AND_OP
    0    625  DISK_CRIT                          0    626  DATE_CRIT
    0    627  NEW_DISK_DESC                      0    630  DISK_DESC_SAVE
    2      1  FIRST_ACCT                         2      3  LAST_ACCT
    2      5  NO_ACCT                            2      7  NULL_ACCT
    2     11  FIRST_FILE                         2     21  LAST_FILE
    2     31  NO_FILE                            2     41  NULL_FILE
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:19   
    2     52  WAIT_1                             0    632  DISK_DEST_SN
    0    636  DISK_DEST_ACCT                     0    640  DISK_DEST_RES
    0    642  DISK_DEST_EXIST                    0    643  LAST_TAPE_FSN
    0    644  FIRST_TAPE_VOL                     0    645  EFTWORD
    0    646  DPLISTX                            0    647  SPECX
    0    650  TAPE_OPTION                        0    654  TRANS_NBR
    0    655  CT_IMAGE                           0    656  TOTAL_FILES
    0    657  TOTAL_GRANS                        0    660  TOTAL_ERRORS
    0    661  ERROR_LIMIT                        0    662  STAF
    0    663  NBR_CONTROL_FILE                   0    664  CONTROL_LIST
    2     60  NO_10_LEADING_ZEROS                2     61  NO_2_LEADING_ZEROS
    2     62  NO_LEADING_4_ZEROS                 2     63  NO_LEADING_6_ZEROS
    2     64  NO_6_LEADING_ZEROS                 2     65  NO_4_LEADING_ZEROS
    2     66  NO_5_LEADING_ZEROS                 0    672  PRE_RET_KEY
    0    711  PRE_RET_REC                        0    712  PRE_RET_READ
    0    730  PRE_RET_WRITE                      0    750  PRE_RET_OPEN
    0   1042  PRE_RET_CLOSE                      0   1100  RET_CMDS_NAME
    2     67  FIT_ONLY_CODE                      0   1106  TEST_MODE

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  M$PRE_RET

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     NULLSID                               ISSID
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:20   

        1        1        /*M* FLI_DATA_D - data for EFT's I/O routines */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        FLI_DATA_D: PROC NOAUTO;
        8        8
        9        9        /*  ! !  */
       10       10        %INCLUDE CP_6;
       11     5569        /*  !R!  */
       12     5570        %INCLUDE FLB_SUBS_C;
       13     5774        %INCLUDE B_MICROPS_C;
       14     5946
       15     5947    1   DCL LAST_SNLISTINFO$ PTR STATIC SYMDEF INIT(ADDR(NIL));
       16     5948                                           /* Pointer to last serial number list info */
       17     5949
       18     5950        %MACRO SNLISTINFO( FPTN=SNLISTINFO,
       19     5951                           STCLASS=BASED );
       20     5952        DCL 1 FPTN STCLASS,
       21     5953              2 SNLIST$ PTR,                    /* Pointer to serial number list      */
       22     5954              2 PREVINFO$ PTR;                  /* Pointer to previous snlist info    */
       23     5955
       24     5956        %MEND;
       25     5957
       26     5958    1   DCL NBR_SNLISTS SBIN STATIC SYMDEF INIT(0); /* Number of sn lists             */
       27     5959
       28     5960    1   DCL TAPE_DCBLIST$ PTR STATIC SYMDEF;   /* Pointer to tape DCB list               */
       29     5961
       30     5962    1   DCL 1 TAPE_DCBLIST(0:0) BASED(TAPE_DCBLIST$),
              5962            /* DCB info                           */
       31     5963    1         2 DCB# SBIN,
       32     5964    1         2 DCB$ PTR;
       33     5965
       34     5966        %FPT_EXIT( FPTN=FPT_EXIT,
       35     5967                   STCLASS="STATIC SYMDEF" );
       36     5982        %EQU OPER_ERROR = 5;
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:21   
       37     5983        %EQU TAPE_ERROR = 4;
       38     5984        %EQU DISK_ERROR = 3;
       39     5985        %EQU SERIOUS_ERROR = 2;
       40     5986        %EQU MINOR_ERROR = 1;
       41     5987
       42     5988        %FPT_OPEN( FPTN=DISK_OPEN,
       43     5989                   STCLASS="STATIC SYMDEF",
       44     5990                   ACS=BLOCK,
       45     5991                   THISF=YES,
       46     5992                   NXTF=YES,
       47     5993                   ANYF=YES,
       48     5994                   CTG=YES,
       49     5995                   ASN=FILE );
       50     6104
       51     6105        %FPT_READ( FPTN=DISK_READ,
       52     6106                   STCLASS="STATIC SYMDEF",
       53     6107                   WAIT=NO );
       54     6146
       55     6147        %FPT_WRITE( FPTN=DISK_WRITE,
       56     6148                    STCLASS="STATIC SYMDEF",
       57     6149                    WAIT=NO );
       58     6180
       59     6181        %FPT_CLOSE( FPTN=DISK_CLOSE,
       60     6182                    STCLASS="STATIC SYMDEF",
       61     6183                    DISP=SAVE );
       62     6225
       63     6226        %FPT_OPEN( FPTN=TAPE_OPEN,
       64     6227                   ORG=RESTRICT,
       65     6228                   RES='LT',
       66     6229                   ACS=BLOCK,
       67     6230                   STCLASS="STATIC SYMDEF",
       68     6231                   ASN=TAPE );
       69     6340
       70     6341        %FPT_READ( FPTN=TAPE_READ,
       71     6342                   STCLASS="STATIC SYMDEF",
       72     6343                   WAIT=YES );
       73     6382
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:22   
       74     6383        %FPT_WRITE( FPTN=TAPE_WRITE,
       75     6384                    FULL=YES,
       76     6385                    STCLASS="STATIC SYMDEF",
       77     6386                    WAIT=YES );
       78     6417
       79     6418        %FPT_CLOSE( FPTN=TAPE_CLOSE,
       80     6419                    STCLASS="STATIC SYMDEF",
       81     6420                    DISP=SAVE );
       82     6462
       83     6463        %FPT_REM( FPTN=TAPE_REWIND,
       84     6464                  DISP=PTV,
       85     6465                  STCLASS="STATIC SYMDEF" );
       86     6479
       87     6480        %FPT_REM( FPTN=TAPE_REMOVE,
       88     6481                  DISP=REM,
       89     6482                  STCLASS="STATIC SYMDEF" );
       90     6496
       91     6497        %FPT_CVOL( FPTN=TAPE_CVOL,
       92     6498                   STCLASS="STATIC SYMDEF" );
       93     6513
       94     6514        %FPT_PRECORD( FPTN=TAPE_PRECORD,
       95     6515                  STCLASS="STATIC SYMDEF" );
       96     6536
       97     6537
       98     6538    1   DCL SNVECLIST$ PTR STATIC SYMDEF;       /* To serial number vector list       */
       99     6539
      100     6540    1   DCL 1 SNVECLIST(0:0) DALIGNED BASED(SNVECLIST$),
      101     6541    1         2 SN_ BIT(72);
      102     6542
      103     6543
      104     6544        %VLP_VECTOR( FPTN=TVECTOR,
      105     6545                     STCLASS="STATIC SYMDEF" );
      106     6560
      107     6561    1   DCL B$JIT$ PTR SYMREF;
      108     6562    1   DCL B$TCB$ PTR SYMREF;
      109     6563
      110     6564    1   DCL FMSEC BIT(1) STATIC SYMDEF;
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:23   
      111     6565
      112     6566    1   DCL ZERO UBIN WORD CONSTANT SYMDEF INIT(0);
      113     6567    1   DCL COMMAND_ERROR BIT(1) STATIC SYMDEF;
      114     6568
      115     6569    1   DCL OVER_FIL BIT(1) STATIC SYMDEF;
      116     6570    1   DCL NBR_OUTSTANDING_IOS SBIN STATIC SYMDEF;
      117     6571    1   DCL LAST_FREE_IX SBIN STATIC SYMDEF;    /* Ix of last free buffer             */
      118     6572    1   DCL LAST_USED_IX SBIN STATIC SYMDEF;    /* Ix of last used buffer             */
      119     6573    1   DCL FIRST_USED_IX SBIN STATIC SYMDEF;   /* Ix of first used buffer            */
      120     6574    1   DCL USED_BUF_ERR BIT(36) STATIC SYMDEF;
      121     6575    1   DCL RELEASED_BUF_ERR BIT(36) STATIC SYMDEF;
      122     6576    1   DCL NBR_GRANS_REMAINING SBIN STATIC SYMDEF; /* Left to read                   */
      123     6577    1   DCL NBR_GRANS_PER_DISK_BUF SBIN STATIC SYMDEF;
      124     6578    1   DCL DEFAULT_GRANS_PER_DISK_BUF SBIN STATIC SYMDEF INIT(4);
      125     6579    1   DCL NBR_GRANS_PER_TAPE_BUF SBIN STATIC SYMDEF;
      126     6580    1   DCL DEFAULT_GRANS_PER_TAPE_BUF SBIN STATIC SYMDEF INIT(8);
      127     6581        %EQU MAX_GRANS_PER_TAPE_BUF = ( 99999 / ( 4096 * 9 / 8) ); /* 99999 is ANS */
      128     6582          /* limit, 4096 binary block size, 9/8 conversion factor from binary to ASCII */
      129     6583
      130     6584        %EQU MAX_OUTSTANDING_IOS=5;             /* Limited by OUTSTANDING_IO.EVID.IX  */
      131     6585    1   DCL MAX_IOS SBIN STATIC SYMDEF INIT(%MAX_OUTSTANDING_IOS);
      132     6586
      133     6587    1   DCL 1 OUTSTANDING_IO(0:%MAX_OUTSTANDING_IOS) DALIGNED STATIC SYMDEF,
      134     6588    1         2 BUF_ BIT(72) DALIGNED,          /* Frames buffer                      */
      135     6589    1         2 DCB# UBIN(18) UNAL,             /* DCB I/O was started through        */
      136     6590    1         2 * BIT(16) UNAL,
      137     6591    1         2 RELEASED BIT(1) UNAL,           /* Buffer released to caller          */
      138     6592    1         2 NOT_READY BIT(1) UNAL,          /* Indicates still waiting            */
      139     6593    1         2 ERR,
      140     6594    1           3 * BIT(19),
      141     6595    1           3 CODE UBIN(14) UNAL,
      142     6596    1           3 * BIT(3),
      143     6597    1         2 NEXT_IX SBIN,                   /* Index of next I/O in sequence      */
      144     6598    1         2 ARS SBIN;
      145     6599
      146     6600    1   DCL EOVOL_DETECTED BIT(1) STATIC SYMDEF ; /* Indicates volume change needed   */
      147     6601
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:24   
      148     6602    1   DCL NOW_UTS UBIN WORD STATIC SYMDEF;
      149     6603
      150     6604        %FPT_TIME( FPTN=GET_NOW_UTS,            /* Used to get current time           */
      151     6605                   STCLASS="STATIC SYMDEF",
      152     6606                   TSTAMP=NOW_UTS,
      153     6607                   SOURCE=CLOCK );
      154     6626
      155     6627    1   DCL START_UTS UBIN WORD STATIC SYMDEF;  /* Beginning of run                   */
      156     6628    1   DCL ACCUMULATED_MOUNT_TIME UBIN WORD STATIC SYMDEF;
      157     6629    1   DCL ACCUMULATED_SPIN_TIME UBIN WORD STATIC SYMDEF;
      158     6630    1   DCL ACCUMULATED_BREAK_TIME UBIN WORD STATIC SYMDEF;
      159     6631
      160     6632    1   DCL DPLIST$ PTR STATIC SYMDEF;          /* Points to DP list                  */
      161     6633        %VLP_SN( FPTN=DPLIST,
      162     6634                 STCLASS="BASED(DPLIST$)" );
      163     6647
      164     6648    1   DCL DPRESLIST$ PTR STATIC SYMDEF;              /* Pointer to DP resource list */
      165     6649    1   DCL 1 DPRESLIST ALIGNED BASED(DPRESLIST$), /* Resource list parallel to DPLIST */
      166     6650    1         2 NBR SBIN,                         /* Number of items in resource list */
      167     6651    1         2 NAME(0:0) CHAR(4) CALIGNED;
      168     6652
      169     6653    1   DCL DISK_FILE_SPEC$ PTR STATIC SYMDEF;  /* Points to file specifications list */
      170     6654    1   DCL 1 DISK_FILE_SPEC BASED(DISK_FILE_SPEC$),
      171     6655    1         2 NBR SBIN,                       /* Number of items in following list  */
      172     6656    1         2 NBR_LEFT SBIN,             /* Number of unused items following list   */
      173     6657    1         2 PASSWORD_SPEC BIT(1),  /* Password was spec'd - single file operation */
      174     6658    1         2 PASSWORD# CHAR(8) CALIGNED,
      175     6659    1         2 SPEC(0:0),
      176     6660    1           3 SKIP SBIN,
      177     6661    1           3 START,
      178     6662    1             4 ACCT,
      179     6663    1               5 ACCT# CHAR(8),
      180     6664    1             4 FILE,
      181     6665    1               5 NAME# CHAR(31) CALIGNED,
      182     6666    1               5 L# UBIN(9) CALIGNED,
      183     6667    1           3 STARTCHARS REDEF START CHAR(40),
      184     6668    1           3 STOP,
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:25   
      185     6669    1             4 ACCT,
      186     6670    1               5 ACCT# CHAR(8),
      187     6671    1             4 FILE,
      188     6672    1               5 NAME# CHAR(31) CALIGNED,
      189     6673    1               5 L# UBIN(9) CALIGNED,
      190     6674    1           3 STOPCHARS REDEF STOP CHAR(40),
      191     6675    1         2 SPECCHARS(0:0) REDEF SPEC CHAR(84);
      192     6676
      193     6677    1   DCL SPECCHARS CHAR(84) STATIC SYMDEF;
      194     6678    1   DCL 1 SPEC REDEF SPECCHARS,
      195     6679    1           2 SKIP SBIN,
      196     6680    1           2 START,
      197     6681    1             3 ACCT,
      198     6682    1               4 ACCT# CHAR(8),
      199     6683    1             3 FILE,
      200     6684    1               4 NAME# CHAR(31) CALIGNED,
      201     6685    1               4 L# UBIN(9) CALIGNED,
      202     6686    1           2 STARTCHARS REDEF START CHAR(40),
      203     6687    1           2 STOP,
      204     6688    1             3 ACCT,
      205     6689    1               4 ACCT# CHAR(8),
      206     6690    1             3 FILE,
      207     6691    1               4 NAME# CHAR(31) CALIGNED,
      208     6692    1               4 L# UBIN(9) CALIGNED,
      209     6693    1           2 STOPCHARS REDEF STOP CHAR(40);
      210     6694
      211     6695    1   DCL 1 DISK_SRCHCOND STATIC SYMDEF,      /* Exactly like FPT_OPEN.V.SRCHCOND   */
      212     6696    1         2 DELF# BIT(1),
      213     6697    1         2 NOLIST# BIT(1),
      214     6698    1         2 BUF# BIT(1),
      215     6699    1         2 * BIT(1),
      216     6700    1         2 BAD# BIT(1),
      217     6701    1         2 QS# BIT(1),
      218     6702    1         2 * BIT(2),
      219     6703    1         2 ARCHIVE# BIT(1),
      220     6704    1         2 ANYF# BIT(1),
      221     6705    1         2 * BIT(7),
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:26   
      222     6706    1         2 REV# BIT(1);
      223     6707
      224     6708    1   DCL 1 TEMP_DISK_SRCHCOND STATIC SYMDEF,
      225     6709    1         2 DELF# BIT (1),
      226     6710    1         2 NOLIST# BIT (1),
      227     6711    1         2 BUF# BIT (1),
      228     6712    1         2 * BIT(1),
      229     6713    1         2 BAD# BIT(1),
      230     6714    1         2 QS# BIT(1),
      231     6715    1         2 * BIT(2),
      232     6716    1         2 ARCHIVE# BIT(1),
      233     6717    1         2 ANYF# BIT(1),
      234     6718    1         2 * BIT(7),
      235     6719    1         2 REV# BIT(1);
      236     6720
      237     6721    1   DCL 1 DISK_DESC STATIC SYMDEF,          /* Exactly like M$DCB.DESC            */
      238     6722    1         2 DELF# BIT(1),
      239     6723    1         2 NOLIST# BIT(1),
      240     6724    1         2 BUF# BIT(1),
      241     6725    1         2 ODSTOW# BIT(1),
      242     6726    1         2 BAD# BIT(1),
      243     6727    1         2 QS# BIT(1),
      244     6728    1         2 * BIT(2),
      245     6729    1         2 ARCHIVE# BIT(1),
      246     6730    1         2 BUPM# BIT(1),
      247     6731    1         2 NBUF# BIT(1),
      248     6732    1         2 ACTIVE# BIT(1),
      249     6733    1         2 TPB# BIT(1),
      250     6734    1         2 TERMINATE# BIT(1),
      251     6735    1         2 FETCH# BIT(1),
      252     6736    1         2 * BIT(3);
      253     6737
      254     6738    1   DCL 1 DISK_DESC_MASK STATIC SYMDEF,     /* Exactly like M$DCB.DESC            */
      255     6739    1         2 DELF# BIT(1),
      256     6740    1         2 NOLIST# BIT(1),
      257     6741    1         2 BUF# BIT(1),
      258     6742    1         2 ODSTOW# BIT(1),
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:27   
      259     6743    1         2 BAD# BIT(1),
      260     6744    1         2 QS# BIT(1),
      261     6745    1         2 * BIT(2),
      262     6746    1         2 ARCHIVE# BIT(1),
      263     6747    1         2 BUPM# BIT(1),
      264     6748    1         2 NBUF# BIT(1),
      265     6749    1         2 ACTIVE# BIT(1),
      266     6750    1         2 TPB# BIT(1),
      267     6751    1         2 TERMINATE# BIT(1),
      268     6752    1         2 FETCH# BIT(1),
      269     6753    1         2 * BIT(3);
      270     6754
      271     6755    1   DCL 1 DISK_OPTION STATIC SYMDEF,        /* All the other funny options        */
      272     6756    1         2 DIR BIT(1),
      273     6757    1         2 DELETED_ACCOUNTS BIT(1),
      274     6758    1         2 CLEANUP BIT(1),
      275     6759    1         2 LEA BIT(1),
      276     6760    1         2 PAD BIT(1),
      277     6761    1         2 INACTIVATE BIT(1),
      278     6762    1         2 ACUP BIT(1),
      279     6763    1         2 CHECK BIT(1),
      280     6764    1         2 NOUPDATE BIT(1),
      281     6765    1         2 IDSS UBIN(3),
      282     6766    1         2 SCRUB,
      283     6767    1            3 BACKUP BIT(1),
      284     6768    1            3 CREATOR BIT(1),
      285     6769    1            3 STOW BIT(1),
      286     6770    1         2 DELETE BIT(1),
      287     6771    1         2 OVERLAP_WARN BIT(1),
      288     6772    1         2 SWITCH_IF_ERRORS BIT(1),
      289     6773    1         2 SKIP_NO_BACKUP BIT(1),
      290     6774    1         2 SKIP_NO_STOW BIT(1),
      291     6775    1         2 SKIP_NO_PURGE BIT(1),
      292     6776    1         2 XFER BIT(1),
      293     6777    1         2 SAVE_DIR BIT(1),
      294     6778    1         2 OPEN_MODE UBIN(3),
      295     6779    1         2 SHARED BIT(1);
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:28   
      296     6780    1   DCL 1 FILE_TYPE WALIGNED STATIC SYMDEF,
      297     6781    1         2 A BIT(1),      /* Actively Archived files   */
      298     6782    1         2 I BIT(1),      /* Inactively Archived files */
      299     6783    1         2 SA BIT(1),     /* Actively Stowed files     */
      300     6784    1         2 SI BIT(1),     /* Inactively Stowed files   */
      301     6785    1         2 FA BIT(1),     /* Fetched files             */
      302     6786    1         2 FI BIT(1),
      303     6787    1         2 DF BIT(1),     /* Deleted files             */
      304     6788    1         2 BUF BIT(1),    /* Backed up files           */
      305     6789    1         2 * BIT(10);
      306     6790                                                /* ... and others to be added         */
      307     6791
      308     6792    1   DCL 1 DISK_ORGS STATIC SYMDEF,          /* Selected organizations             */
      309     6793    1         2 NBR SBIN,
      310     6794    1         2 ORG(0:20) SBIN;
      311     6795
      312     6796    1   DCL DISK_BEF_UTS(0:%MAX_DATE) UBIN STATIC SYMDEF;
      313     6797    1   DCL DISK_AFT_UTS(0:%MAX_DATE) UBIN STATIC SYMDEF;
      314     6798    1   DCL DISK_AND_OP(0:%MAX_DATE) BIT(1) STATIC SYMDEF;
      315     6799
      316     6800    1   DCL 1 DISK_CRIT STATIC SYMDEF,          /* Disk criteria to match             */
      317     6801    1         2 DSC BIT(1),                     /* Descriptor bits                    */
      318     6802    1         2 ORG BIT(1),                     /* File organization                  */
      319     6803    1         2 TIM BIT(1);                     /* Time specification */
      320     6804
      321     6805    1   DCL 1 DATE_CRIT STATIC SYMDEF,
      322     6806    1         2 BEF(0:%MAX_DATE) BIT(1),
      323     6807    1         2 AFT(0:%MAX_DATE) BIT(1),
      324     6808    1         2 EXPD BIT(1),                    /* Expiration date                    */
      325     6809    1         2 NOT_EXPD BIT(1);                /* Expiration date                    */
      326     6810
      327     6811    1   DCL 1 NEW_DISK_DESC STATIC SYMDEF,          /* Exactly like M$DCB.DESC           */
      328     6812    1         2 DELF# BIT(1),
      329     6813    1         2 NOLIST# BIT(1),
      330     6814    1         2 BUF# BIT(1),
      331     6815    1         2 ODSTOW# BIT(1),
      332     6816    1         2 BAD# BIT(1),
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:29   
      333     6817    1         2 QS# BIT(1),
      334     6818    1         2 * BIT(2),
      335     6819    1         2 ARCHIVE# BIT(1),
      336     6820    1         2 BUPM# BIT(1),
      337     6821    1         2 NBUF# BIT(1),
      338     6822    1         2 ACTIVE# BIT(1),
      339     6823    1         2 TPB# BIT(1),
      340     6824    1         2 TERMINATE# BIT(1),
      341     6825    1         2 FETCH# BIT(1),
      342     6826    1         2 * BIT(3);
      343     6827
      344     6828    1   DCL 1 DISK_DESC_SAVE STATIC SYMDEF,     /* Exactly like M$DCB.DESC            */
      345     6829    1         2 DELF# BIT(1),
      346     6830    1         2 NOLIST# BIT(1),
      347     6831    1         2 BUF# BIT(1),
      348     6832    1         2 ODSTOW# BIT(1),
      349     6833    1         2 BAD# BIT(1),
      350     6834    1         2 QS# BIT(1),
      351     6835    1         2 * BIT(2),
      352     6836    1         2 ARCHIVE# BIT(1),
      353     6837    1         2 BUPM# BIT(1),
      354     6838    1         2 NBUF# BIT(1),
      355     6839    1         2 ACTIVE# BIT(1),
      356     6840    1         2 TPB# BIT(1),
      357     6841    1         2 TERMINATE# BIT(1),
      358     6842    1         2 FETCH# BIT(1),
      359     6843    1         2 * BIT(3);
      360     6844
      361     6845        %VLP_ACCT( FPTN=FIRST_ACCT,
      362     6846                   ACCT='$       ',
      363     6847                   STCLASS="CONSTANT SYMDEF" );
      364     6860
      365     6861        %VLP_ACCT( FPTN=LAST_ACCT,
      366     6862                   ACCT='zzzzzzzz',
      367     6863                   STCLASS="CONSTANT SYMDEF" );
      368     6876
      369     6877        %VLP_ACCT( FPTN=NO_ACCT,
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:30   
      370     6878                   ACCT='        ',
      371     6879                   STCLASS="CONSTANT SYMDEF" );
      372     6892
      373     6893        %VLP_ACCT( FPTN=NULL_ACCT,
      374     6894                   ACCT='        ',
      375     6895                   STCLASS="CONSTANT SYMDEF" );
      376     6908
      377     6909    1   DCL 1 FIRST_FILE CONSTANT SYMDEF,
      378     6910    1         2 NAME# CHAR(31) INIT('$                              '),
      379     6911    1         2 L# UBIN BYTE CALIGNED INIT(1);
      380     6912
      381     6913    1   DCL 1 LAST_FILE CONSTANT SYMDEF,
      382     6914    1         2 NAME# CHAR(31) INIT('zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz'),
      383     6915    1         2 L# UBIN BYTE CALIGNED INIT(31);
      384     6916
      385     6917    1   DCL 1 NO_FILE CONSTANT SYMDEF,
      386     6918    1         2 NAME# CHAR(31) INIT('                               '),
      387     6919    1         2 L# UBIN BYTE CALIGNED INIT(0);
      388     6920
      389     6921    1   DCL 1 NULL_FILE CONSTANT SYMDEF,
      390     6922    1         2 L# UBIN BYTE CALIGNED INIT(0),
      391     6923    1         2 NAME# CHAR(31) INIT('                               ');
      392     6924
      393     6925        %FPT_WAIT( FPTN=WAIT_1,
      394     6926                   UNITS=1,
      395     6927                   STCLASS="CONSTANT SYMDEF" );
      396     6941
      397     6942        %VLP_SN( FPTN=DISK_DEST_SN,
      398     6943                 N=1,
      399     6944                 STCLASS="STATIC SYMDEF" );
      400     6957        %VLP_ACCT( FPTN=DISK_DEST_ACCT,
      401     6958                   STCLASS="STATIC SYMDEF" );
      402     6971
      403     6972    1   DCL 1 DISK_DEST_RES ALIGNED STATIC SYMDEF, /* Res. list parallel to DISK_DEST_SN */
      404     6973    1         2 NBR SBIN INIT(1),
      405     6974    1         2 NAME CHAR(4) CALIGNED INIT(' ');
      406     6975
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:31   
      407     6976    1   DCL DISK_DEST_EXIST SBIN STATIC SYMDEF;
      408     6977
      409     6978    1   DCL LAST_TAPE_FSN SBIN STATIC SYMDEF; /* Tape FSN to stop on */
      410     6979
      411     6980    1   DCL FIRST_TAPE_VOL SBIN STATIC SYMDEF;           /* Starting VOL for this job */
      412     6981
      413     6982    1   DCL 1 EFTWORD SYMDEF STATIC,
      414     6983    1         2 CROSS BIT(1),
      415     6984    1         2 * BIT(3),
      416     6985    1         2 FSN UBIN(14) UNAL; /* Maximum value is 9999 */
      417     6986    1   DCL EFTWORDEXPIRE REDEF EFTWORD SBIN(18) UNAL;
      418     6987
      419     6988    1   DCL DPLISTX SBIN STATIC SYMDEF;
      420     6989    1   DCL SPECX SBIN STATIC SYMDEF;
      421     6990
      422     6991        %EQU MAX_SNSIZEW=151; /* = 100*LENGTHC(VLP_SN.SN#)+LENGTHC(VLP_SN.NUM#) in words */
      423     6992    1   DCL 1 TAPE_OPTION STATIC SYMDEF,
      424     6993    1         2 CHECK BIT(1),
      425     6994    1         2 CHECK_SPECD BIT(1),
      426     6995    1         2 PROTTYPE UBIN(3),
      427     6996    1         2 DENSITY BIT(1),
      428     6997    1         2 VOLACCESS BIT(1),
      429     6998    1         2 EXPIRE BIT(1),
      430     6999    1         2 BLOCK BIT(1),
      431     7000    1         2 NPAD BIT(1),
      432     7001    1         2 IOERRORC BIT(1),                                   /* IO continuation */
      433     7002    1         2 IOERRORC_SPECD BIT(1),     /* IO continuation spec'd - used by MODIFY */
      434     7003    1        2 DUPLICATE_TAPESET BIT(1), /* Use duplicate archive set - used by RETRIEVE */
      435     7004    1         2 OPEN_FUNCTION UBIN BYTE;
      436     7005
      437     7006    1   DCL TRANS_NBR SBIN STATIC SYMDEF;
      438     7007
      439     7008    1   DCL CT_IMAGE CHAR(4) STATIC SYMDEF;
      440     7009
      441     7010    1   DCL TOTAL_FILES SBIN STATIC SYMDEF;
      442     7011    1   DCL TOTAL_GRANS SBIN STATIC SYMDEF;
      443     7012    1   DCL TOTAL_ERRORS SBIN STATIC SYMDEF;
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:32   
      444     7013    1   DCL ERROR_LIMIT SBIN STATIC SYMDEF;
      445     7014
      446     7015    1   DCL STAF BIT(1) STATIC SYMDEF;
      447     7016    1   DCL NBR_CONTROL_FILE UBIN STATIC SYMDEF;
      448     7017    1   DCL CONTROL_LIST (0:5) UBIN STATIC SYMDEF;
      449     7018    1   DCL NO_10_LEADING_ZEROS(0:2) BIT(9) CONSTANT SYMDEF CALIGNED INIT( %MVZB10, %SES10,
              7018            %MVC1 );
      450     7019    1   DCL NO_2_LEADING_ZEROS(0:2) BIT(9) CONSTANT SYMDEF CALIGNED
      451     7020    1      INIT( %MVZB2, %SES10, %MVC1 );
      452     7021    1   DCL NO_LEADING_4_ZEROS(0:0) BIT(9) CONSTANT SYMDEF CALIGNED
      453     7022    1      INIT( %MVZB4 );
      454     7023    1   DCL NO_LEADING_6_ZEROS(0:0) BIT(9) CONSTANT SYMDEF CALIGNED
      455     7024    1      INIT( %MVZB6 );
      456     7025    1   DCL NO_6_LEADING_ZEROS(0:2) BIT(9) CONSTANT SYMDEF CALIGNED
      457     7026    1      INIT( %MVZB6, %SES10, %MVC1 );
      458     7027    1   DCL NO_4_LEADING_ZEROS(0:2) BIT(9) CONSTANT SYMDEF CALIGNED
      459     7028    1      INIT( %MVZB4, %SES10, %MVC1 );
      460     7029    1   DCL NO_5_LEADING_ZEROS(0:2) BIT(9) CONSTANT SYMDEF CALIGNED
      461     7030    1      INIT( %MVZB5, %SES10, %MVC1 );
      462     7031
      463     7032    1   DCL M$PRE_RET DCB;
      464     7033
      465     7034    1   DCL 1 PRE_RET_KEY STATIC SYMDEF,
      466     7035    1         2 KL UBIN BYTE CALIGNED,
      467     7036    1         2 RES CHAR(2),
      468     7037    1         2 SN CHAR(6),
      469     7038    1         2 FSN UBIN(18) CALIGNED,
      470     7039    1         2 PSN CHAR(6),
      471     7040    1         2 ACCT CHAR(8),
      472     7041    1         2 FNAME CALIGNED,
      473     7042    1           3 C CHAR(31),
      474     7043    1           3 L UBIN BYTE CALIGNED;
      475     7044
      476     7045    1   DCL 1 PRE_RET_REC STATIC SYMDEF,
      477     7046    1         2 CROSS BIT(1),
      478     7047    1         2 IOERRORC BIT(1),
      479     7048    1         2 * BIT(7);
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:33   
      480     7049
      481     7050        %FPT_READ( FPTN=PRE_RET_READ,
      482     7051                   DCB=M$PRE_RET,
      483     7052                   KEY=PRE_RET_KEY,
      484     7053                   KEYR=YES,
      485     7054                   BUF=PRE_RET_REC,
      486     7055                   STCLASS="STATIC SYMDEF" );
      487     7094
      488     7095        %FPT_WRITE( FPTN=PRE_RET_WRITE,
      489     7096                    DCB=M$PRE_RET,
      490     7097                    KEY=PRE_RET_KEY,
      491     7098                    BUF=PRE_RET_REC,
      492     7099                    STCLASS="STATIC SYMDEF" );
      493     7130
      494     7131        %VLP_NAME( FPTN=PRE_RET_NAME,
      495     7132                   NAME='*PRE_RET' );
      496     7159
      497     7160        %FPT_OPEN( FPTN=PRE_RET_OPEN,
      498     7161                   DCB=M$PRE_RET,
      499     7162                   NAME=PRE_RET_NAME,
      500     7163                   ORG=KEYED,
      501     7164                   FUN=CREATE,
      502     7165                   ACS=DIRECT,
      503     7166                   ASN=FILE,
      504     7167                   EXIST=NEWFILE,
      505     7168                   CTG=YES,
      506     7169                   STCLASS="STATIC SYMDEF" );
      507     7278
      508     7279        %FPT_CLOSE( FPTN=PRE_RET_CLOSE,
      509     7280                    DCB=M$PRE_RET,
      510     7281                    STCLASS="STATIC SYMDEF" );
      511     7323
      512     7324        %VLP_NAME( FPTN=RET_CMDS_NAME,
      513     7325                   NAME='*RET_CMDS',
      514     7326                   STCLASS="STATIC SYMDEF" );
      515     7353        %VLP_NAME ( FPTN = BACKUP_CMD_FNAME,
      516     7354                    NAME = '*BACKUP_CMD' );
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:34   
      517     7381
      518     7382        %EQU E$FIT_ONLY = 500;
      519     7383
      520     7384    1   DCL 1 FIT_ONLY_CODE CONSTANT SYMDEF,          /* Indicate to FLP$WR_FILE_INFO */
      521     7385    1         2 * BIT(19) INIT('0'B),                 /* that "fit" should be printed */
      522     7386    1         2 * UBIN(14) UNAL INIT(%E$FIT_ONLY),
      523     7387    1         2 * BIT(3) INIT('0'B);
      524     7388
      525     7389    1   DCL TEST_MODE BIT(1) STATIC SYMDEF;
      526     7390
      527     7391    1   END FLI_DATA_D;

PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:35   
--  Include file information  --

   B_MICROPS_C.:E05TOU  is referenced.
   FLB_SUBS_C.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure FLI_DATA_D.
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:36   

 **** Variables and constants ****

  ****  Section 000  Data  FLI_DATA_D

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

   136-0-0/d STRC(1080)  r     1 DISK_CLOSE               524-0-0/w PTR         r     1 DISK_FILE_SPEC$
    12-0-0/d STRC(2088)  r     1 DISK_OPEN                104-0-0/d STRC(504)   r     1 DISK_READ
   122-0-0/d STRC(432)   r     1 DISK_WRITE               522-0-0/w PTR         r     1 DPLIST$
   523-0-0/w PTR         r     1 DPRESLIST$                 4-0-0/d STRC(216)   r     1 FPT_EXIT
   502-0-0/d STRC(432)   r     1 GET_NOW_UTS              501-0-0/w UBIN        r     1 NOW_UTS
  1042-0-0/d STRC(1080)  r     1 PRE_RET_CLOSE            672-0-0/c STRC(513)   r     1 PRE_RET_KEY
   744-0-0/c STRC(81)    r     1 PRE_RET_NAME             750-0-0/d STRC(2088)  r     1 PRE_RET_OPEN
   712-0-0/d STRC(504)   r     1 PRE_RET_READ             711-0-0/b STRC(9)     r     1 PRE_RET_REC
   730-0-0/d STRC(432)   r     1 PRE_RET_WRITE            410-0-0/w PTR         r     1 SNVECLIST$
   320-0-0/d STRC(1080)  r     1 TAPE_CLOSE               366-0-0/d STRC(288)   r     1 TAPE_CVOL
     3-0-0/w PTR         r     1 TAPE_DCBLIST$            174-0-0/d STRC(2088)  r     1 TAPE_OPEN
   376-0-0/d STRC(360)   r     1 TAPE_PRECORD             266-0-0/d STRC(504)   r     1 TAPE_READ
   362-0-0/d STRC(144)   r     1 TAPE_REMOVE              356-0-0/d STRC(144)   r     1 TAPE_REWIND
   304-0-0/d STRC(432)   r     1 TAPE_WRITE

  ****  Section 002 RoData FLI_DATA_D

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    52-0-0/d STRC(216)   r     1 WAIT_1

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0N  NULL        r     1 M$PRE_RET

PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:37   

   No code generated for procedure FLI_DATA_D .
   Procedure FLI_DATA_D is declared NOAUTO and requires 584 words of local(STATIC) storage.

    No errors detected in file FLI_DATA_D.:E05TSI    .
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:38   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:39   
          MINI XREF LISTING

DISK_CLOSE.SN_
      6206**DCL      6206--REDEF
DISK_CLOSE.UTL_
      6207**DCL      6207--REDEF
DISK_CLOSE.V
      6211**DCL      6206--DCLINIT
DISK_CLOSE.V.EXPIRE#
      6221**DCL      6221--REDEF
DISK_CLOSE.V.TYPE#
      6219**DCL      6219--REDEF
DISK_CLOSE.V.XTNSIZE#
      6216**DCL      6216--REDEF    6218--REDEF
DISK_FILE_SPEC.SPEC
      6659**DCL      6675--REDEF
DISK_FILE_SPEC.SPEC.START
      6661**DCL      6667--REDEF
DISK_FILE_SPEC.SPEC.STOP
      6668**DCL      6674--REDEF
DISK_FILE_SPEC$
      6653**DCL      6654--IMP-PTR
DISK_OPEN.ACSVEH_
      6062**DCL      6063--REDEF
DISK_OPEN.ALTKEYS_
      6068**DCL      6069--REDEF    6069--REDEF
DISK_OPEN.HDR_
      6067**DCL      6068--REDEF
DISK_OPEN.TAB_
      6066**DCL      6067--REDEF
DISK_OPEN.UHL_
      6060**DCL      6061--REDEF    6061--REDEF
DISK_OPEN.V
      6069**DCL      6060--DCLINIT
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:40   
DISK_OPEN.V.FSN#
      6100**DCL      6100--REDEF    6100--REDEF
DISK_OPEN.WSN_
      6066**DCL      6066--REDEF
DISK_READ.STATION_
      6127**DCL      6128--REDEF
DISK_READ.V
      6128**DCL      6124--DCLINIT
DISK_READ.V.DVBYTE.REREAD#
      6139**DCL      6139--REDEF
DISK_READ.V.INDX#
      6137**DCL      6137--REDEF
DISK_WRITE.STATION_
      6168**DCL      6168--REDEF
DISK_WRITE.V
      6169**DCL      6166--DCLINIT
DISK_WRITE.V.DVBYTE.VFC#
      6175**DCL      6175--REDEF
DPLIST$
      6632**DCL      6645--IMP-PTR
DPRESLIST$
      6648**DCL      6649--IMP-PTR
EFTWORD
      6982**DCL      6986--REDEF
FPT_EXIT.V
      5978**DCL      5978--DCLINIT
FPT_EXIT.V.STEPCC#
      5979**DCL      5979--REDEF
GET_NOW_UTS.V
      6622**DCL      6618--DCLINIT
NOW_UTS
      6602**DCL      6622--DCLINIT
PRE_RET_CLOSE.SN_
      7304**DCL      7304--REDEF
PRE_RET_CLOSE.UTL_
      7305**DCL      7305--REDEF
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:41   
PRE_RET_CLOSE.V
      7309**DCL      7304--DCLINIT
PRE_RET_CLOSE.V.EXPIRE#
      7319**DCL      7319--REDEF
PRE_RET_CLOSE.V.TYPE#
      7317**DCL      7317--REDEF
PRE_RET_CLOSE.V.XTNSIZE#
      7314**DCL      7314--REDEF    7316--REDEF
PRE_RET_KEY
      7034**DCL      7072--DCLINIT  7073--DCLINIT  7116--DCLINIT
PRE_RET_NAME
      7157**DCL      7235--DCLINIT
PRE_RET_OPEN.ACSVEH_
      7236**DCL      7237--REDEF
PRE_RET_OPEN.ALTKEYS_
      7242**DCL      7243--REDEF    7243--REDEF
PRE_RET_OPEN.HDR_
      7241**DCL      7242--REDEF
PRE_RET_OPEN.TAB_
      7240**DCL      7241--REDEF
PRE_RET_OPEN.UHL_
      7234**DCL      7235--REDEF    7235--REDEF
PRE_RET_OPEN.V
      7243**DCL      7234--DCLINIT
PRE_RET_OPEN.V.FSN#
      7274**DCL      7274--REDEF    7274--REDEF
PRE_RET_OPEN.WSN_
      7240**DCL      7240--REDEF
PRE_RET_READ.STATION_
      7075**DCL      7076--REDEF
PRE_RET_READ.V
      7076**DCL      7072--DCLINIT
PRE_RET_READ.V.DVBYTE.REREAD#
      7087**DCL      7087--REDEF
PRE_RET_READ.V.INDX#
      7085**DCL      7085--REDEF
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:42   
PRE_RET_REC
      7045**DCL      7074--DCLINIT  7075--DCLINIT  7117--DCLINIT  7118--DCLINIT
PRE_RET_WRITE.STATION_
      7118**DCL      7118--REDEF
PRE_RET_WRITE.V
      7119**DCL      7116--DCLINIT
PRE_RET_WRITE.V.DVBYTE.VFC#
      7125**DCL      7125--REDEF
SNVECLIST$
      6538**DCL      6540--IMP-PTR
SPEC.START
      6680**DCL      6686--REDEF
SPEC.STOP
      6687**DCL      6693--REDEF
SPECCHARS
      6677**DCL      6678--REDEF
TAPE_CLOSE.SN_
      6443**DCL      6443--REDEF
TAPE_CLOSE.UTL_
      6444**DCL      6444--REDEF
TAPE_CLOSE.V
      6448**DCL      6443--DCLINIT
TAPE_CLOSE.V.EXPIRE#
      6458**DCL      6458--REDEF
TAPE_CLOSE.V.TYPE#
      6456**DCL      6456--REDEF
TAPE_CLOSE.V.XTNSIZE#
      6453**DCL      6453--REDEF    6455--REDEF
TAPE_CVOL.V
      6510**DCL      6509--DCLINIT
TAPE_DCBLIST$
      5960**DCL      5962--IMP-PTR
TAPE_OPEN.ACSVEH_
      6298**DCL      6299--REDEF
TAPE_OPEN.ALTKEYS_
      6304**DCL      6305--REDEF    6305--REDEF
PL6.E3A0      #001=FLI_DATA_D File=FLI_DATA_D.:E05TSI                            TUE 07/29/97 16:00 Page:43   
TAPE_OPEN.HDR_
      6303**DCL      6304--REDEF
TAPE_OPEN.TAB_
      6302**DCL      6303--REDEF
TAPE_OPEN.UHL_
      6296**DCL      6297--REDEF    6297--REDEF
TAPE_OPEN.V
      6305**DCL      6296--DCLINIT
TAPE_OPEN.V.FSN#
      6336**DCL      6336--REDEF    6336--REDEF
TAPE_OPEN.WSN_
      6302**DCL      6302--REDEF
TAPE_PRECORD.V
      6528**DCL      6526--DCLINIT
TAPE_READ.STATION_
      6363**DCL      6364--REDEF
TAPE_READ.V
      6364**DCL      6360--DCLINIT
TAPE_READ.V.DVBYTE.REREAD#
      6375**DCL      6375--REDEF
TAPE_READ.V.INDX#
      6373**DCL      6373--REDEF
TAPE_REMOVE.V
      6493**DCL      6493--DCLINIT
TAPE_REWIND.V
      6476**DCL      6476--DCLINIT
TAPE_WRITE.STATION_
      6405**DCL      6405--REDEF
TAPE_WRITE.V
      6406**DCL      6403--DCLINIT
TAPE_WRITE.V.DVBYTE.VFC#
      6412**DCL      6412--REDEF
TVECTOR.W2
      6557**DCL      6558--REDEF
WAIT_1.V
      6939**DCL      6938--DCLINIT
