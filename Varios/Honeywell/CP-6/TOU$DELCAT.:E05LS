VERSION E05

PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:1    
        1        1        /*M* TOU$DELCAT     DEckfile Editor Routine DELETE CATALOG Function */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7
        8        8        /*X* PLM=3,DCI=6,SQB=N,PRB=N,DTI=5,ENI=0,AND=Y,ECI=0,CSU=3,DIN=3,
        9        9             CTI=8,CRM=109,CRT=1,NLB=N,NTB=Y,MCL=110 */
       10       10
       11       11        /*P*  NAME:        TOU$DELCAT
       12       12              AUTHOR:      Scott S. Sheppard
       13       13              PURPOSE:     DEckfile Editor Routine DELETE CATALOG Function
       14       14              DESCRIPTION: This program is called when the  DELCAT function
       15       15                           is invoked by the  CP-6  deckfile editor driver.
       16       16                           This program deletes all object decks referenced
       17       17                           by the catalog and the catalog itself. If a deck
       18       18                           is part of a catalog to be deleted,  but is also
       19       19                           part of another catalog, only the  reference  to
       20       20                           the deck by the extinct catalog is removed.
       21       21              REFERENCE:   CP-6 Release C0M0
       22       22              LAST UPDATE: 10/27/83
       23       23        */
       24       24
       25       25        /*F*  NAME:        TOU$DELCAT
       26       26              DESCRIPTION: Procedure Nesting Hierarchy
       27       27
       28       28              TOU$DELCAT: procedure
       29       29                 DC_INIT_DUP: procedure
       30       30                 DC_COMMAND_SETUP: procedure ALTRET ;
       31       31                 DC_DELETE_CATALOG_DECKS: procedure ALTRET
       32       32                    DC_DELETE_DECK: procedure ALTRET
       33       33                    DC_CHANGE_DECK: procedure ALTRET
       34       34                 DC_DELETE_CATALOG_ENTRIES: procedure ALTRET
       35       35        */
       36       36        %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:2    
       37       37        TOU$DELCAT: PROC ;
       38       38
       39       39        /* Include Files */
       40       40
       41       41           %INCLUDE TOU_DEER_M ;
       42     1452           %INCLUDE TOU_RQSTS_E ;
       43     1527           %INCLUDE TO_PERR_C ;
       44     2112           %INCLUDE XU_MACRO_C ;
       45     5218
       46     5219        /* Macros */
       47     5220
       48     5221           %DUP (STCLASS = SYMREF) ;
       49     5364           %CATALOG_DATA (STCLASS = SYMREF) ;
       50     5378           %CATALOG_ENTRY_KEY (STCLASS = SYMREF) ;
       51     5392           %CATALOG_KEY (STCLASS = SYMREF) ;
       52     5406           %CATALOG_SEARCH_KEY (STCLASS = SYMREF) ;
       53     5418           %BINARY_KEY (STCLASS = SYMREF) ;
       54     5432           %OBJECT (STCLASS = SYMREF) ;
       55     5495           %OBJECT_KEY (STCLASS = SYMREF) ;
       56     5508           %OBJECT_REFLIST_KEY (STCLASS = SYMREF) ;
       57     5522           %OBJECT_REFLIST_DATA (STCLASS = SYMREF) ;
       58     5537           %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:3    
       59     5538        /* External Entry Points */
       60     5539
       61     5540    1      DCL TOU$DU_SET_DF_FID              ENTRY ALTRET ;
       62     5541    1      DCL TOU$DU_OPEN_DF                 ENTRY ALTRET ;
       63     5542    1      DCL TOU$DU_CLOSE_DF                ENTRY ALTRET ;
       64     5543
       65     5544    1      DCL TOU$DU_USER_WRITE              ENTRY ALTRET ;
       66     5545    1      DCL TOU$DU_PRINTER_WRITE           ENTRY ALTRET ;
       67     5546
       68     5547    1      DCL TOU$DFU_DF_RD_CATALOG_CONTROL  ENTRY ALTRET ;
       69     5548    1      DCL TOU$DFU_DF_RD_CATALOG_ENTRY    ENTRY ALTRET ;
       70     5549    1      DCL TOU$DFU_DF_RD_OBJECT           ENTRY ALTRET ;
       71     5550    1      DCL TOU$DFU_DF_RD_OBJECT_REFLIST   ENTRY ALTRET ;
       72     5551    1      DCL TOU$DFU_DF_DL_DECK             ENTRY ALTRET ;
       73     5552    1      DCL TOU$DFU_DF_WR_LOG              ENTRY ALTRET ;
       74     5553    1      DCL TOU$DFU_DF_RD_LOG              ENTRY ALTRET ;
       75     5554    1      DCL TOU$DFU_DF_DL_CATALOG_ENTRY    ENTRY ALTRET ;
       76     5555
       77     5556    1      DCL TOU$ND_FIND_CATALOG            ENTRY ALTRET ;
       78     5557    1      DCL TOU$RR_REMOVE_FROM_REFLIST     ENTRY ALTRET ;
       79     5558    1      DCL TOU$RR_DELETE_CATALOG          ENTRY ALTRET ;
       80     5559
       81     5560    1      DCL TOU$L_SHOW_DCB                 ENTRY ;
       82     5561           %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:4    
       83     5562        /* ****************
       84     5563           * Main Program *
       85     5564           **************** */
       86     5565
       87     5566    1      CALL DC_INIT_DUP ;
       88     5567    1      CALL DC_COMMAND_SETUP ALTRET (ERROR_RETURN) ;
       89     5568    1      CALL TOU$L_SHOW_DCB ;
       90     5569
       91     5570    1      CALL TOU$DU_OPEN_DF ALTRET (ERROR_RETURN) ;
       92     5571    1      CALL TOU$ND_FIND_CATALOG ALTRET (ERROR_RETURN) ;
       93     5572    1      CALL TOU$DFU_DF_RD_LOG ALTRET (ERROR_RETURN) ;
       94     5573    1      DUP.BREAK_DISABLED = %TRUE ;
       95     5574    1      CALL DC_DELETE_CATALOG_DECKS ALTRET (ERROR_RETURN) ;
       96     5575    1      CALL DC_DELETE_CATALOG_ENTRIES ALTRET (ERROR_RETURN) ;
       97     5576    1      CALL TOU$RR_DELETE_CATALOG ALTRET (ERROR_RETURN) ;
       98     5577    1      CALL TOU$DFU_DF_WR_LOG ALTRET (ERROR_RETURN) ;
       99     5578    1      CALL TOU$DU_CLOSE_DF ALTRET (ERROR_RETURN) ;
      100     5579
      101     5580        /* NORMAL_RETURN: */
      102     5581    1      DUP.MSG_CODE = %T$DC_SUCCESS;
      103     5582    1      CALL TOU$DU_USER_WRITE ;
      104     5583    1      DUP.BREAK_DISABLED = %FALSE ;
      105     5584    1      RETURN ;
      106     5585
      107     5586    1   ERROR_RETURN:
      108     5587    1      DUP.BREAK_DISABLED = %FALSE ;
      109     5588    1      CALL TOU$DU_CLOSE_DF ;
      110     5589    1      DUP.MSG_CODE = %T$DC_FAILURE;
      111     5590    1      CALL TOU$DU_USER_WRITE ;
      112     5591    1      RETURN ;
      113     5592
      114     5593        /* ***************
      115     5594           * End Of Main *
      116     5595           *************** */
      117     5596        %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:5    
      118     5597        /*I*  NAME:        DC_INIT_DUP
      119     5598              AUTHOR:      Scott S. Sheppard
      120     5599              PURPOSE:     Initilization
      121     5600              INTERFACE:   None called.
      122     5601              INPUT:       Set of system equates.
      123     5602              OUTPUT:      DUP - Deckfile Utility Parameter
      124     5603              DESCRIPTION: This procedure initializes the deckfile utility
      125     5604                           parameter to appropriate starting values.
      126     5605        */
      127     5606
      128     5607    1   DC_INIT_DUP: PROC ;
      129     5608
      130     5609        /* Code */
      131     5610
      132     5611    2      DUP.HDR_CODE = %H$DELCAT ;
      133     5612    2      DUP.LINE_VFC = %SKIP_WRITE ;
      134     5613    2      DUP.FORCE_NEW_PAGE = %TRUE ;
      135     5614    2      DUP.DF.ENTERED = %FALSE ;
      136     5615    2      DUP.DF.OPEN_TYPE = %UPDATE_FILE ;
      137     5616    2      DUP.DF.REPORT_ERROR = %TRUE ;
      138     5617    2      DUP.DF.CLOSE_TYPE = %SAVE_FILE ;
      139     5618    2      RETURN ;
      140     5619
      141     5620    2   END DC_INIT_DUP ;
      142     5621        %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:6    
      143     5622        /*I*  NAME:        DC_COMMAND_SETUP
      144     5623              AUTHOR:      Scott S. Sheppard
      145     5624              PURPOSE:     Sets up DELCAT Command
      146     5625              INTERFACE:   TOU$DU_SET_DF_FID
      147     5626              INPUT:       DUP.CMD$ - pointer to the parse control block
      148     5627              OUTPUT:      DUP.DF.HOLD_AREA
      149     5628                           DUP.DF.HOLD_AREA_LGTH
      150     5629                           CATALOG_SEARCH_KEY
      151     5630              DESCRIPTION: This procedure sets up the DELCAT command from the
      152     5631                           information entered by the user.     DUP.CMD$ is a
      153     5632                           pointer to a   parse control block  that  contains
      154     5633                           the tokens entered by the user.
      155     5634                           COMMAND FORMS:
      156     5635              Case 1: DC <catalog key>
      157     5636              Case 2: DC <catalog key> FROM <deckfile fid>
      158     5637        */
      159     5638        %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:7    
      160     5639    1   DC_COMMAND_SETUP: PROC ALTRET ;
      161     5640
      162     5641    2      DCL OUTBLK#                    UBIN WORD ALIGNED ;
      163     5642    2      DCL OUTBLK$                    PTR ALIGNED ;
      164     5643           %PARSE$OUT (STCLASS = BASED) ;
      165     5688           %PARSE$SYM (STCLASS = BASED) ;
      166     5726
      167     5727        /* Code */
      168     5728
      169     5729    3      DO OUTBLK# = 0 TO DUP.CMD$ -> OUT$BLK.NSUBLKS - 1 ;
      170     5730    3         OUTBLK$ = DUP.CMD$ -> OUT$BLK.SUBLK$(OUTBLK#) ;
      171     5731    4         DO CASE (OUTBLK$ -> OUT$BLK.CODE) ;
      172     5732    4            CASE (%CATKEY) ;
      173     5733    4               CATALOG_SEARCH_KEY.DATA = OUTBLK$ -> OUT$SYM.TEXT ;
      174     5734    4            CASE (%DECKFILE_FID) ;
      175     5735    4               DUP.DF.ENTERED = %TRUE ;
      176     5736    4               DUP.HOLD_AREA = OUTBLK$ -> OUT$SYM.TEXT ;
      177     5737    4               DUP.HOLD_AREA_LGTH = OUTBLK$ -> OUT$SYM.COUNT ;
      178     5738    4               CALL TOU$DU_SET_DF_FID ALTRET (ERROR) ;
      179     5739    4         END /* CASE */ ;
      180     5740    3      END /* DO */ ;
      181     5741
      182     5742    2      IF DUP.DF.ENTERED
      183     5743    2      THEN /* FID set from DEER command */ ;
      184     5744    2      ELSE CALL TOU$DU_SET_DF_FID ALTRET (ERROR) ;
      185     5745    2      RETURN ;
      186     5746
      187     5747    2   ERROR:
      188     5748    2      ALTRETURN ;
      189     5749
      190     5750    2   END DC_COMMAND_SETUP ;
      191     5751        %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:8    
      192     5752        /*I*  NAME:        DC_DELETE_CATALOG_DECKS
      193     5753              AUTHOR:      Scott S. Sheppard
      194     5754              PURPOSE:     Delete object decks
      195     5755              INTERFACE:   TOU$DFU_DF_RD_CATALOG_CONTROL
      196     5756                           TOU$DFU_DF_RD_CATALOG_ENTRY
      197     5757                           TOU$DFU_DF_RD_OBJECT
      198     5758                           DC_DELETE_DECK
      199     5759                           DC_CHANGE_DECK
      200     5760              INPUT:       CATALOG_DATA
      201     5761                           OBJECT
      202     5762                           OBJECT_REFLIST_DATA
      203     5763              OUTPUT:      CATALOG_ENTRY_KEY
      204     5764                           OBJECT_REFLIST_KEY
      205     5765                           OBJECT_REFLIST_DATA
      206     5766              DESCRIPTION: This procedure steps through all of the catalog
      207     5767                           entries and deletes the object deck if no other
      208     5768                           catalogs reference the deck   or   removes  the
      209     5769                           reference to the deck otherwise.
      210     5770        */
      211     5771        %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:9    
      212     5772    1   DC_DELETE_CATALOG_DECKS: PROC ALTRET ;
      213     5773
      214     5774        /* Code */
      215     5775
      216     5776    2      CALL TOU$DFU_DF_RD_CATALOG_CONTROL ALTRET (ERROR) ;
      217     5777    2      CATALOG_ENTRY_KEY.DECK# = CATALOG_DATA.DECK# ;
      218     5778    3      DO CATALOG_ENTRY_KEY.ENTRY# = 1 TO CATALOG_DATA.ENTRY_COUNT ;
      219     5779    3         CALL TOU$DFU_DF_RD_CATALOG_ENTRY ALTRET (ERROR) ;
      220     5780    3         CALL TOU$DFU_DF_RD_OBJECT ALTRET (ERROR) ;
      221     5781
      222     5782              /* See if object deck should be deleted or altered */
      223     5783    3         OBJECT_REFLIST_KEY.DECK# = OBJECT.DECK# ;
      224     5784    3         CALL TOU$DFU_DF_RD_OBJECT_REFLIST ALTRET (ERROR) ;
      225     5785
      226     5786    3         IF OBJECT_REFLIST_DATA.NUM_REFS = 1
      227     5787    3         THEN CALL DC_DELETE_DECK ALTRET (ERROR) ;
      228     5788    3         ELSE CALL DC_CHANGE_DECK ALTRET (ERROR) ;
      229     5789    3      END /* DO */ ;
      230     5790    2      RETURN ;
      231     5791
      232     5792    2   ERROR:
      233     5793    2      ALTRETURN ;
      234     5794
      235     5795        /* END DC_DELETE_CATALOG_DECKS */
      236     5796        %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:10   
      237     5797        /*I*  NAME:        DC_DELETE_DECK
      238     5798              AUTHOR:      Scott S. Sheppard
      239     5799              PURPOSE:     Deletes an object deck
      240     5800              INTERFACE:   TOU$DFU_DF_DL_DECK
      241     5801                           TOU$DU_USER_WRITE
      242     5802                           TOU$DU_PRINTER_WRITE
      243     5803              DESCRIPTION: Calls appropriate modules to delete a deck.
      244     5804        */
      245     5805
      246     5806    2   DC_DELETE_DECK: PROC ALTRET ;
      247     5807
      248     5808        /* Code */
      249     5809
      250     5810           /* remove the binary image from the deckfile */
      251     5811    3      BINARY_KEY.DECK# = OBJECT.DECK# ;
      252     5812    3      CALL TOU$DFU_DF_DL_DECK ALTRET (ERROR) ;
      253     5813
      254     5814           /* print message on user terminal and DEER printout */
      255     5815    3      DUP.MSG_CODE = %T$DD_INFORM ;
      256     5816    3      CALL TOU$DU_USER_WRITE ;
      257     5817    3      CALL TOU$DU_PRINTER_WRITE ;
      258     5818    3      RETURN ;
      259     5819
      260     5820    3   ERROR:
      261     5821    3      ALTRETURN ;
      262     5822
      263     5823    3   END DC_DELETE_DECK ;
      264     5824        %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:11   
      265     5825        /*I*  NAME:        DC_CHANGE_DECK
      266     5826              AUTHOR:      Scott S. Sheppard
      267     5827              PURPOSE:     Removes a catalog reference
      268     5828              INTERFACE:   TOU$RR_REMOVE_FROM_REFLIST
      269     5829                           TOU$DU_USER_WRITE
      270     5830                           TOU$DU_PRINTER_WRITE
      271     5831              DESCRIPTION: Calls appropriate modules to remove a reference.
      272     5832        */
      273     5833
      274     5834    2   DC_CHANGE_DECK: PROC ALTRET ;
      275     5835
      276     5836        /* Code */
      277     5837
      278     5838           /* call routine to remove this catalog from the reference list */
      279     5839    3      CALL TOU$RR_REMOVE_FROM_REFLIST ALTRET (ERROR) ;
      280     5840
      281     5841           /* print message on user terminal and DEER printout */
      282     5842    3      DUP.MSG_CODE = %T$DC_REMREF ;
      283     5843    3      CALL TOU$DU_USER_WRITE ;
      284     5844    3      CALL TOU$DU_PRINTER_WRITE ;
      285     5845    3      RETURN ;
      286     5846
      287     5847    3   ERROR:
      288     5848    3      ALTRETURN ;
      289     5849
      290     5850    3   END DC_CHANGE_DECK ;
      291     5851    2   END DC_DELETE_CATALOG_DECKS ;
      292     5852        %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:12   
      293     5853        /*I*  NAME:        DC_DELETE_CATALOG_ENTRIES
      294     5854              AUTHOR:      Scott S. Sheppard
      295     5855              PURPOSE:     Deletes Catalog Entries
      296     5856              INTERFACE:   TOU$DFU_DF_DL_CATALOG_ENTRY
      297     5857              INPUT:       CATALOG_DATA.ENTRY_COUNT
      298     5858              OUTPUT:      CATALOG_DATA.ENTRY_COUNT
      299     5859              DESCRIPTION: This procedure loops,  deleting  all  of  the
      300     5860                           catalog entries for the catalog to be deleted.
      301     5861        */
      302     5862
      303     5863    1   DC_DELETE_CATALOG_ENTRIES: PROC ALTRET ;
      304     5864
      305     5865    2      DCL ENTRY_COUNT UBIN WORD ALIGNED ;
      306     5866
      307     5867        /* Code */
      308     5868
      309     5869    2      ENTRY_COUNT = CATALOG_DATA.ENTRY_COUNT ;
      310     5870    3      DO CATALOG_DATA.ENTRY_COUNT = ENTRY_COUNT DOWNTO 1 BY -1 ;
      311     5871    3         CALL TOU$DFU_DF_DL_CATALOG_ENTRY ALTRET (ERROR) ;
      312     5872    3      END /* DO */ ;
      313     5873    2      RETURN ;
      314     5874
      315     5875    2   ERROR:
      316     5876    2      ALTRETURN ;
      317     5877
      318     5878    2   END DC_DELETE_CATALOG_ENTRIES ;
      319     5879    1   END TOU$DELCAT ;

PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:13   
--  Include file information  --

   XU_MACRO_C.:E05TOU  is referenced.
   TO_PERR_C.:E05TOU  is referenced.
   TOU_RQSTS_E.:E05TOU  is referenced.
   TOU_DEER_M.:E05TOU  is referenced.
      No diagnostics issued in procedure TOU$DELCAT.

   Procedure TOU$DELCAT requires 232 words for executable code.
   Procedure TOU$DELCAT requires 10 words of local(AUTO) storage.

    No errors detected in file TOU$DELCAT.:E05TSI    .

PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:14   

 Object Unit name= TOU$DELCAT                                 File name= TOU$DELCAT.:E05TOU
 UTS= JUL 30 '97 06:41:13.84 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none   232    350  TOU$DELCAT
    1  RoData even  none     1      1  TOU$DELCAT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes      Std        0  TOU$DELCAT

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       0 TOU$ND_FIND_CATALOG
 yes     yes           Std       0 TOU$RR_DELETE_CATALOG
 yes     yes           Std       0 TOU$DU_CLOSE_DF
         yes           Std       0 TOU$L_SHOW_DCB
 yes     yes           Std       0 TOU$DFU_DF_WR_LOG
 yes     yes           Std       0 TOU$DU_OPEN_DF
 yes     yes           Std       0 TOU$DFU_DF_RD_LOG
 yes     yes           Std       0 TOU$DU_USER_WRITE
 yes     yes           Std       0 TOU$DU_SET_DF_FID
 yes     yes           Std       0 TOU$DFU_DF_RD_CATALOG_CONTROL
 yes     yes           Std       0 TOU$DFU_DF_RD_CATALOG_ENTRY
 yes     yes           Std       0 TOU$DFU_DF_RD_OBJECT_REFLIST
 yes     yes           Std       0 TOU$DFU_DF_RD_OBJECT
 yes     yes           Std       0 TOU$DFU_DF_DL_DECK
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:15   
 yes     yes           Std       0 TOU$DU_PRINTER_WRITE
 yes     yes           Std       0 TOU$RR_REMOVE_FROM_REFLIST
 yes     yes           Std       0 TOU$DFU_DF_DL_CATALOG_ENTRY
                       nStd      0 X66_AUTO_0
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     DUP                                   CATALOG_DATA                          CATALOG_ENTRY_KEY
     CATALOG_SEARCH_KEY                    BINARY_KEY                            OBJECT
     OBJECT_REFLIST_KEY                    OBJECT_REFLIST_DATA                   B_VECTNIL
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:16   


        1        1        /*M* TOU$DELCAT     DEckfile Editor Routine DELETE CATALOG Function */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7
        8        8        /*X* PLM=3,DCI=6,SQB=N,PRB=N,DTI=5,ENI=0,AND=Y,ECI=0,CSU=3,DIN=3,
        9        9             CTI=8,CRM=109,CRT=1,NLB=N,NTB=Y,MCL=110 */
       10       10
       11       11        /*P*  NAME:        TOU$DELCAT
       12       12              AUTHOR:      Scott S. Sheppard
       13       13              PURPOSE:     DEckfile Editor Routine DELETE CATALOG Function
       14       14              DESCRIPTION: This program is called when the  DELCAT function
       15       15                           is invoked by the  CP-6  deckfile editor driver.
       16       16                           This program deletes all object decks referenced
       17       17                           by the catalog and the catalog itself. If a deck
       18       18                           is part of a catalog to be deleted,  but is also
       19       19                           part of another catalog, only the  reference  to
       20       20                           the deck by the extinct catalog is removed.
       21       21              REFERENCE:   CP-6 Release C0M0
       22       22              LAST UPDATE: 10/27/83
       23       23        */
       24       24
       25       25        /*F*  NAME:        TOU$DELCAT
       26       26              DESCRIPTION: Procedure Nesting Hierarchy
       27       27
       28       28              TOU$DELCAT: procedure
       29       29                 DC_INIT_DUP: procedure
       30       30                 DC_COMMAND_SETUP: procedure ALTRET ;
       31       31                 DC_DELETE_CATALOG_DECKS: procedure ALTRET
       32       32                    DC_DELETE_DECK: procedure ALTRET
       33       33                    DC_CHANGE_DECK: procedure ALTRET
       34       34                 DC_DELETE_CATALOG_ENTRIES: procedure ALTRET
       35       35        */
       36       36        %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:17   
       37       37        TOU$DELCAT: PROC ;

     37  0 000000   000000 700200 xent  TOU$DELCAT   TSX0  ! X66_AUTO_0
         0 000001   000012 000000                    ZERO    10,0

       38       38
       39       39        /* Include Files */
       40       40
       41       41           %INCLUDE TOU_DEER_M ;
       42     1452           %INCLUDE TOU_RQSTS_E ;
       43     1527           %INCLUDE TO_PERR_C ;
       44     2112           %INCLUDE XU_MACRO_C ;
       45     5218
       46     5219        /* Macros */
       47     5220
       48     5221           %DUP (STCLASS = SYMREF) ;
       49     5364           %CATALOG_DATA (STCLASS = SYMREF) ;
       50     5378           %CATALOG_ENTRY_KEY (STCLASS = SYMREF) ;
       51     5392           %CATALOG_KEY (STCLASS = SYMREF) ;
       52     5406           %CATALOG_SEARCH_KEY (STCLASS = SYMREF) ;
       53     5418           %BINARY_KEY (STCLASS = SYMREF) ;
       54     5432           %OBJECT (STCLASS = SYMREF) ;
       55     5495           %OBJECT_KEY (STCLASS = SYMREF) ;
       56     5508           %OBJECT_REFLIST_KEY (STCLASS = SYMREF) ;
       57     5522           %OBJECT_REFLIST_DATA (STCLASS = SYMREF) ;
       58     5537           %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:18   
       59     5538        /* External Entry Points */
       60     5539
       61     5540    1      DCL TOU$DU_SET_DF_FID              ENTRY ALTRET ;
       62     5541    1      DCL TOU$DU_OPEN_DF                 ENTRY ALTRET ;
       63     5542    1      DCL TOU$DU_CLOSE_DF                ENTRY ALTRET ;
       64     5543
       65     5544    1      DCL TOU$DU_USER_WRITE              ENTRY ALTRET ;
       66     5545    1      DCL TOU$DU_PRINTER_WRITE           ENTRY ALTRET ;
       67     5546
       68     5547    1      DCL TOU$DFU_DF_RD_CATALOG_CONTROL  ENTRY ALTRET ;
       69     5548    1      DCL TOU$DFU_DF_RD_CATALOG_ENTRY    ENTRY ALTRET ;
       70     5549    1      DCL TOU$DFU_DF_RD_OBJECT           ENTRY ALTRET ;
       71     5550    1      DCL TOU$DFU_DF_RD_OBJECT_REFLIST   ENTRY ALTRET ;
       72     5551    1      DCL TOU$DFU_DF_DL_DECK             ENTRY ALTRET ;
       73     5552    1      DCL TOU$DFU_DF_WR_LOG              ENTRY ALTRET ;
       74     5553    1      DCL TOU$DFU_DF_RD_LOG              ENTRY ALTRET ;
       75     5554    1      DCL TOU$DFU_DF_DL_CATALOG_ENTRY    ENTRY ALTRET ;
       76     5555
       77     5556    1      DCL TOU$ND_FIND_CATALOG            ENTRY ALTRET ;
       78     5557    1      DCL TOU$RR_REMOVE_FROM_REFLIST     ENTRY ALTRET ;
       79     5558    1      DCL TOU$RR_DELETE_CATALOG          ENTRY ALTRET ;
       80     5559
       81     5560    1      DCL TOU$L_SHOW_DCB                 ENTRY ;
       82     5561           %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:19   
       83     5562        /* ****************
       84     5563           * Main Program *
       85     5564           **************** */
       86     5565
       87     5566    1      CALL DC_INIT_DUP ;

   5566  0 000002   000064 701000 0                  TSX1    DC_INIT_DUP
         0 000003   000000 011000                    NOP     0

       88     5567    1      CALL DC_COMMAND_SETUP ALTRET (ERROR_RETURN) ;

   5567  0 000004   000103 701000 0                  TSX1    DC_COMMAND_SETUP
         0 000005   000051 702000 0                  TSX2    ERROR_RETURN

       89     5568    1      CALL TOU$L_SHOW_DCB ;

   5568  0 000006   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000007   000000 701000 xent               TSX1    TOU$L_SHOW_DCB
         0 000010   000000 011000                    NOP     0

       90     5569
       91     5570    1      CALL TOU$DU_OPEN_DF ALTRET (ERROR_RETURN) ;

   5570  0 000011   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000012   000000 701000 xent               TSX1    TOU$DU_OPEN_DF
         0 000013   000051 702000 0                  TSX2    ERROR_RETURN

       92     5571    1      CALL TOU$ND_FIND_CATALOG ALTRET (ERROR_RETURN) ;

   5571  0 000014   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000015   000000 701000 xent               TSX1    TOU$ND_FIND_CATALOG
         0 000016   000051 702000 0                  TSX2    ERROR_RETURN

       93     5572    1      CALL TOU$DFU_DF_RD_LOG ALTRET (ERROR_RETURN) ;

   5572  0 000017   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000020   000000 701000 xent               TSX1    TOU$DFU_DF_RD_LOG
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:20   
         0 000021   000051 702000 0                  TSX2    ERROR_RETURN

       94     5573    1      DUP.BREAK_DISABLED = %TRUE ;

   5573  0 000022   000400 236003                    LDQ     256,DU
         0 000023   000155 256000 xsym               ORSQ    DUP+109

       95     5574    1      CALL DC_DELETE_CATALOG_DECKS ALTRET (ERROR_RETURN) ;

   5574  0 000024   000175 701000 0                  TSX1    DC_DELETE_CATALOG_DECKS
         0 000025   000051 702000 0                  TSX2    ERROR_RETURN

       96     5575    1      CALL DC_DELETE_CATALOG_ENTRIES ALTRET (ERROR_RETURN) ;

   5575  0 000026   000325 701000 0                  TSX1    DC_DELETE_CATALOG_ENTRIES
         0 000027   000051 702000 0                  TSX2    ERROR_RETURN

       97     5576    1      CALL TOU$RR_DELETE_CATALOG ALTRET (ERROR_RETURN) ;

   5576  0 000030   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000031   000000 701000 xent               TSX1    TOU$RR_DELETE_CATALOG
         0 000032   000051 702000 0                  TSX2    ERROR_RETURN

       98     5577    1      CALL TOU$DFU_DF_WR_LOG ALTRET (ERROR_RETURN) ;

   5577  0 000033   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000034   000000 701000 xent               TSX1    TOU$DFU_DF_WR_LOG
         0 000035   000051 702000 0                  TSX2    ERROR_RETURN

       99     5578    1      CALL TOU$DU_CLOSE_DF ALTRET (ERROR_RETURN) ;

   5578  0 000036   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000037   000000 701000 xent               TSX1    TOU$DU_CLOSE_DF
         0 000040   000051 702000 0                  TSX2    ERROR_RETURN

      100     5579
      101     5580        /* NORMAL_RETURN: */
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:21   
      102     5581    1      DUP.MSG_CODE = %T$DC_SUCCESS;

   5581  0 000041   000226 235007                    LDA     150,DL
         0 000042   000020 755000 xsym               STA     DUP+16

      103     5582    1      CALL TOU$DU_USER_WRITE ;

   5582  0 000043   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000044   000000 701000 xent               TSX1    TOU$DU_USER_WRITE
         0 000045   000000 011000                    NOP     0

      104     5583    1      DUP.BREAK_DISABLED = %FALSE ;

   5583  0 000046   000000 236000 1                  LDQ     0
         0 000047   000155 356000 xsym               ANSQ    DUP+109

      105     5584    1      RETURN ;

   5584  0 000050   000000 702200 xent               TSX2  ! X66_ARET

      106     5585
      107     5586    1   ERROR_RETURN:
      108     5587    1      DUP.BREAK_DISABLED = %FALSE ;

   5587  0 000051   000000 236000 1     ERROR_RETURN LDQ     0
         0 000052   000155 356000 xsym               ANSQ    DUP+109

      109     5588    1      CALL TOU$DU_CLOSE_DF ;

   5588  0 000053   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000054   000000 701000 xent               TSX1    TOU$DU_CLOSE_DF
         0 000055   000000 011000                    NOP     0

      110     5589    1      DUP.MSG_CODE = %T$DC_FAILURE;

   5589  0 000056   000227 235007                    LDA     151,DL
         0 000057   000020 755000 xsym               STA     DUP+16
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:22   

      111     5590    1      CALL TOU$DU_USER_WRITE ;

   5590  0 000060   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000061   000000 701000 xent               TSX1    TOU$DU_USER_WRITE
         0 000062   000000 011000                    NOP     0

      112     5591    1      RETURN ;

   5591  0 000063   000000 702200 xent               TSX2  ! X66_ARET

      113     5592
      114     5593        /* ***************
      115     5594           * End Of Main *
      116     5595           *************** */
      117     5596        %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:23   
      118     5597        /*I*  NAME:        DC_INIT_DUP
      119     5598              AUTHOR:      Scott S. Sheppard
      120     5599              PURPOSE:     Initilization
      121     5600              INTERFACE:   None called.
      122     5601              INPUT:       Set of system equates.
      123     5602              OUTPUT:      DUP - Deckfile Utility Parameter
      124     5603              DESCRIPTION: This procedure initializes the deckfile utility
      125     5604                           parameter to appropriate starting values.
      126     5605        */
      127     5606
      128     5607    1   DC_INIT_DUP: PROC ;

   5607  0 000064   200004 741300       DC_INIT_DUP  STX1  ! 4,,AUTO

      129     5608
      130     5609        /* Code */
      131     5610
      132     5611    2      DUP.HDR_CODE = %H$DELCAT ;

   5611  0 000065   001452 235007                    LDA     810,DL
         0 000066   000021 755000 xsym               STA     DUP+17

      133     5612    2      DUP.LINE_VFC = %SKIP_WRITE ;

   5612  0 000067   142000 236003                    LDQ     50176,DU
         0 000070   000026 756000 xsym               STQ     DUP+22

      134     5613    2      DUP.FORCE_NEW_PAGE = %TRUE ;

   5613  0 000071   400000 236003                    LDQ     -131072,DU
         0 000072   000056 756000 xsym               STQ     DUP+46

      135     5614    2      DUP.DF.ENTERED = %FALSE ;

   5614  0 000073   000031 236000 xsym               LDQ     B_VECTNIL+25
         0 000074   000104 356000 xsym               ANSQ    DUP+68

PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:24   
      136     5615    2      DUP.DF.OPEN_TYPE = %UPDATE_FILE ;

   5615  0 000075   000001 235007                    LDA     1,DL
         0 000076   000105 755000 xsym               STA     DUP+69

      137     5616    2      DUP.DF.REPORT_ERROR = %TRUE ;

   5616  0 000077   400000 236007                    LDQ     -131072,DL
         0 000100   000104 256000 xsym               ORSQ    DUP+68

      138     5617    2      DUP.DF.CLOSE_TYPE = %SAVE_FILE ;

   5617  0 000101   000106 450000 xsym               STZ     DUP+70

      139     5618    2      RETURN ;

   5618  0 000102   000001 702211                    TSX2  ! 1,X1

      140     5619
      141     5620    2   END DC_INIT_DUP ;
      142     5621        %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:25   
      143     5622        /*I*  NAME:        DC_COMMAND_SETUP
      144     5623              AUTHOR:      Scott S. Sheppard
      145     5624              PURPOSE:     Sets up DELCAT Command
      146     5625              INTERFACE:   TOU$DU_SET_DF_FID
      147     5626              INPUT:       DUP.CMD$ - pointer to the parse control block
      148     5627              OUTPUT:      DUP.DF.HOLD_AREA
      149     5628                           DUP.DF.HOLD_AREA_LGTH
      150     5629                           CATALOG_SEARCH_KEY
      151     5630              DESCRIPTION: This procedure sets up the DELCAT command from the
      152     5631                           information entered by the user.     DUP.CMD$ is a
      153     5632                           pointer to a   parse control block  that  contains
      154     5633                           the tokens entered by the user.
      155     5634                           COMMAND FORMS:
      156     5635              Case 1: DC <catalog key>
      157     5636              Case 2: DC <catalog key> FROM <deckfile fid>
      158     5637        */
      159     5638        %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:26   
      160     5639    1   DC_COMMAND_SETUP: PROC ALTRET ;

   5639  0 000103   200004 741300       DC_COMMAND_* STX1  ! 4,,AUTO

      161     5640
      162     5641    2      DCL OUTBLK#                    UBIN WORD ALIGNED ;
      163     5642    2      DCL OUTBLK$                    PTR ALIGNED ;
      164     5643           %PARSE$OUT (STCLASS = BASED) ;
      165     5688           %PARSE$SYM (STCLASS = BASED) ;
      166     5726
      167     5727        /* Code */
      168     5728
      169     5729    3      DO OUTBLK# = 0 TO DUP.CMD$ -> OUT$BLK.NSUBLKS - 1 ;

   5729  0 000104   200005 450100                    STZ     OUTBLK#,,AUTO
         0 000105   000156 710000 0                  TRA     s:5740+3

      170     5730    3         OUTBLK$ = DUP.CMD$ -> OUT$BLK.SUBLK$(OUTBLK#) ;

   5730  0 000106   000017 470400 xsym               LDP0    DUP+15
         0 000107   200005 720100                    LXL0    OUTBLK#,,AUTO
         0 000110   000003 236110                    LDQ     3,X0,PR0
         0 000111   200006 756100                    STQ     OUTBLK$,,AUTO

      171     5731    4         DO CASE (OUTBLK$ -> OUT$BLK.CODE) ;

   5731  0 000112   200006 471500                    LDP1    OUTBLK$,,AUTO
         0 000113   100000 236100                    LDQ     0,,PR1
         0 000114   777777 376007                    ANQ     -1,DL
         0 000115   000004 136007                    SBLQ    4,DL
         0 000116   000005 116007                    CMPQ    5,DL
         0 000117   000121 602006 0                  TNC     s:5731+7,QL
         0 000120   000153 710000 0                  TRA     s:5740
         0 000121   000135 710000 0                  TRA     s:5735
         0 000122   000153 710000 0                  TRA     s:5740
         0 000123   000153 710000 0                  TRA     s:5740
         0 000124   000153 710000 0                  TRA     s:5740
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:27   
         0 000125   000126 710000 0                  TRA     s:5733

      172     5732    4            CASE (%CATKEY) ;

      173     5733    4               CATALOG_SEARCH_KEY.DATA = OUTBLK$ -> OUT$SYM.TEXT ;

   5733  0 000126   100004 236100                    LDQ     4,,PR1
         0 000127   000033 772000                    QRL     27
         0 000130   000000 621006                    EAX1    0,QL
         0 000131   040000 100540                    MLR     fill='040'O
         0 000132   100004 200011                    ADSC9   4,,PR1                   cn=1,n=*X1
         0 000133   000000 000025 xsym               ADSC9   CATALOG_SEARCH_KEY       cn=0,n=21
         0 000134   000153 710000 0                  TRA     s:5740

      174     5734    4            CASE (%DECKFILE_FID) ;

      175     5735    4               DUP.DF.ENTERED = %TRUE ;

   5735  0 000135   400000 236003                    LDQ     -131072,DU
         0 000136   000104 256000 xsym               ORSQ    DUP+68

      176     5736    4               DUP.HOLD_AREA = OUTBLK$ -> OUT$SYM.TEXT ;

   5736  0 000137   100004 236100                    LDQ     4,,PR1
         0 000140   000033 772000                    QRL     27
         0 000141   000000 621006                    EAX1    0,QL
         0 000142   040000 100540                    MLR     fill='040'O
         0 000143   100004 200011                    ADSC9   4,,PR1                   cn=1,n=*X1
         0 000144   000142 000050 xsym               ADSC9   DUP+98                   cn=0,n=40

      177     5737    4               DUP.HOLD_AREA_LGTH = OUTBLK$ -> OUT$SYM.COUNT ;

   5737  0 000145   100004 236100                    LDQ     4,,PR1
         0 000146   000033 772000                    QRL     27
         0 000147   000154 756000 xsym               STQ     DUP+108

      178     5738    4               CALL TOU$DU_SET_DF_FID ALTRET (ERROR) ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:28   

   5738  0 000150   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000151   000000 701000 xent               TSX1    TOU$DU_SET_DF_FID
         0 000152   000173 702000 0                  TSX2    ERROR

      179     5739    4         END /* CASE */ ;

      180     5740    3      END /* DO */ ;

   5740  0 000153   200005 235100                    LDA     OUTBLK#,,AUTO
         0 000154   000001 035007                    ADLA    1,DL
         0 000155   200005 755100                    STA     OUTBLK#,,AUTO
         0 000156   000017 470400 xsym               LDP0    DUP+15
         0 000157   000001 236100                    LDQ     1,,PR0
         0 000160   000022 772000                    QRL     18
         0 000161   200005 116100                    CMPQ    OUTBLK#,,AUTO
         0 000162   000164 600000 0                  TZE     s:5742
         0 000163   000106 603000 0                  TRC     s:5730

      181     5741
      182     5742    2      IF DUP.DF.ENTERED

   5742  0 000164   000104 234000 xsym               SZN     DUP+68
         0 000165   000171 604000 0                  TMI     s:5745

      183     5743    2      THEN /* FID set from DEER command */ ;
      184     5744    2      ELSE CALL TOU$DU_SET_DF_FID ALTRET (ERROR) ;

   5744  0 000166   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000167   000000 701000 xent               TSX1    TOU$DU_SET_DF_FID
         0 000170   000173 702000 0                  TSX2    ERROR

      185     5745    2      RETURN ;

   5745  0 000171   200004 221300                    LDX1  ! 4,,AUTO
         0 000172   000001 702211                    TSX2  ! 1,X1

PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:29   
      186     5746
      187     5747    2   ERROR:
      188     5748    2      ALTRETURN ;

   5748  0 000173   200004 221300       ERROR        LDX1  ! 4,,AUTO
         0 000174   000000 702211                    TSX2  ! 0,X1

      189     5749
      190     5750    2   END DC_COMMAND_SETUP ;
      191     5751        %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:30   
      192     5752        /*I*  NAME:        DC_DELETE_CATALOG_DECKS
      193     5753              AUTHOR:      Scott S. Sheppard
      194     5754              PURPOSE:     Delete object decks
      195     5755              INTERFACE:   TOU$DFU_DF_RD_CATALOG_CONTROL
      196     5756                           TOU$DFU_DF_RD_CATALOG_ENTRY
      197     5757                           TOU$DFU_DF_RD_OBJECT
      198     5758                           DC_DELETE_DECK
      199     5759                           DC_CHANGE_DECK
      200     5760              INPUT:       CATALOG_DATA
      201     5761                           OBJECT
      202     5762                           OBJECT_REFLIST_DATA
      203     5763              OUTPUT:      CATALOG_ENTRY_KEY
      204     5764                           OBJECT_REFLIST_KEY
      205     5765                           OBJECT_REFLIST_DATA
      206     5766              DESCRIPTION: This procedure steps through all of the catalog
      207     5767                           entries and deletes the object deck if no other
      208     5768                           catalogs reference the deck   or   removes  the
      209     5769                           reference to the deck otherwise.
      210     5770        */
      211     5771        %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:31   
      212     5772    1   DC_DELETE_CATALOG_DECKS: PROC ALTRET ;

   5772  0 000175   200004 741300       DC_DELETE_C* STX1  ! 4,,AUTO

      213     5773
      214     5774        /* Code */
      215     5775
      216     5776    2      CALL TOU$DFU_DF_RD_CATALOG_CONTROL ALTRET (ERROR) ;

   5776  0 000176   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000177   000000 701000 xent               TSX1    TOU$DFU_DF_RD_CATALOG_CONTROL
         0 000200   000260 702000 0                  TSX2    ERROR

      217     5777    2      CATALOG_ENTRY_KEY.DECK# = CATALOG_DATA.DECK# ;

   5777  0 000201   000000 236000 xsym               LDQ     CATALOG_DATA
         0 000202   000011 772000                    QRL     9
         0 000203   000000 552030 xsym               STBQ    CATALOG_ENTRY_KEY,'30'O

      218     5778    3      DO CATALOG_ENTRY_KEY.ENTRY# = 1 TO CATALOG_DATA.ENTRY_COUNT ;

   5778  0 000204   000000 101400                    MRL     fill='000'O
         0 000205   000003 000004 xsym               ADSC9   B_VECTNIL+3              cn=0,n=4
         0 000206   000000 600002 xsym               ADSC9   CATALOG_ENTRY_KEY        cn=3,n=2
         0 000207   000245 710000 0                  TRA     s:5789+9

      219     5779    3         CALL TOU$DFU_DF_RD_CATALOG_ENTRY ALTRET (ERROR) ;

   5779  0 000210   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000211   000000 701000 xent               TSX1    TOU$DFU_DF_RD_CATALOG_ENTRY
         0 000212   000260 702000 0                  TSX2    ERROR

      220     5780    3         CALL TOU$DFU_DF_RD_OBJECT ALTRET (ERROR) ;

   5780  0 000213   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000214   000000 701000 xent               TSX1    TOU$DFU_DF_RD_OBJECT
         0 000215   000260 702000 0                  TSX2    ERROR
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:32   

      221     5781
      222     5782              /* See if object deck should be deleted or altered */
      223     5783    3         OBJECT_REFLIST_KEY.DECK# = OBJECT.DECK# ;

   5783  0 000216   000024 236000 xsym               LDQ     OBJECT+20
         0 000217   000011 772000                    QRL     9
         0 000220   000000 552030 xsym               STBQ    OBJECT_REFLIST_KEY,'30'O

      224     5784    3         CALL TOU$DFU_DF_RD_OBJECT_REFLIST ALTRET (ERROR) ;

   5784  0 000221   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000222   000000 701000 xent               TSX1    TOU$DFU_DF_RD_OBJECT_REFLIST
         0 000223   000260 702000 0                  TSX2    ERROR

      225     5785
      226     5786    3         IF OBJECT_REFLIST_DATA.NUM_REFS = 1

   5786  0 000224   000000 235000 xsym               LDA     OBJECT_REFLIST_DATA
         0 000225   000001 115007                    CMPA    1,DL
         0 000226   000232 601000 0                  TNZ     s:5788

      227     5787    3         THEN CALL DC_DELETE_DECK ALTRET (ERROR) ;

   5787  0 000227   000262 701000 0                  TSX1    DC_DELETE_DECK
         0 000230   000260 702000 0                  TSX2    ERROR
         0 000231   000234 710000 0                  TRA     s:5789

      228     5788    3         ELSE CALL DC_CHANGE_DECK ALTRET (ERROR) ;

   5788  0 000232   000305 701000 0                  TSX1    DC_CHANGE_DECK
         0 000233   000260 702000 0                  TSX2    ERROR

      229     5789    3      END /* DO */ ;

   5789  0 000234   000000 235000 xsym               LDA     CATALOG_ENTRY_KEY
         0 000235   000001 236000 xsym               LDQ     CATALOG_ENTRY_KEY+1
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:33   
         0 000236   000033 773000                    LRL     27
         0 000237   777777 376007                    ANQ     -1,DL
         0 000240   000001 036007                    ADLQ    1,DL
         0 000241   200010 756100                    STQ     OUTBLK$+2,,AUTO
         0 000242   000000 101500                    MRL     fill='000'O
         0 000243   200010 000004                    ADSC9   OUTBLK$+2,,AUTO          cn=0,n=4
         0 000244   000000 600002 xsym               ADSC9   CATALOG_ENTRY_KEY        cn=3,n=2
         0 000245   000000 235000 xsym               LDA     CATALOG_ENTRY_KEY
         0 000246   000001 236000 xsym               LDQ     CATALOG_ENTRY_KEY+1
         0 000247   000033 773000                    LRL     27
         0 000250   777777 376007                    ANQ     -1,DL
         0 000251   200011 756100                    STQ     OUTBLK$+3,,AUTO
         0 000252   000000 236000 xsym               LDQ     CATALOG_DATA
         0 000253   777777 376007                    ANQ     -1,DL
         0 000254   200011 116100                    CMPQ    OUTBLK$+3,,AUTO
         0 000255   000210 605000 0                  TPL     s:5779

      230     5790    2      RETURN ;

   5790  0 000256   200004 221300                    LDX1  ! 4,,AUTO
         0 000257   000001 702211                    TSX2  ! 1,X1

      231     5791
      232     5792    2   ERROR:
      233     5793    2      ALTRETURN ;

   5793  0 000260   200004 221300       ERROR        LDX1  ! 4,,AUTO
         0 000261   000000 702211                    TSX2  ! 0,X1

      234     5794
      235     5795        /* END DC_DELETE_CATALOG_DECKS */
      236     5796        %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:34   
      237     5797        /*I*  NAME:        DC_DELETE_DECK
      238     5798              AUTHOR:      Scott S. Sheppard
      239     5799              PURPOSE:     Deletes an object deck
      240     5800              INTERFACE:   TOU$DFU_DF_DL_DECK
      241     5801                           TOU$DU_USER_WRITE
      242     5802                           TOU$DU_PRINTER_WRITE
      243     5803              DESCRIPTION: Calls appropriate modules to delete a deck.
      244     5804        */
      245     5805
      246     5806    2   DC_DELETE_DECK: PROC ALTRET ;

   5806  0 000262   200006 741300       DC_DELETE_D* STX1  ! OUTBLK$,,AUTO

      247     5807
      248     5808        /* Code */
      249     5809
      250     5810           /* remove the binary image from the deckfile */
      251     5811    3      BINARY_KEY.DECK# = OBJECT.DECK# ;

   5811  0 000263   000024 236000 xsym               LDQ     OBJECT+20
         0 000264   000011 772000                    QRL     9
         0 000265   000000 552030 xsym               STBQ    BINARY_KEY,'30'O

      252     5812    3      CALL TOU$DFU_DF_DL_DECK ALTRET (ERROR) ;

   5812  0 000266   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000267   000000 701000 xent               TSX1    TOU$DFU_DF_DL_DECK
         0 000270   000303 702000 0                  TSX2    ERROR

      253     5813
      254     5814           /* print message on user terminal and DEER printout */
      255     5815    3      DUP.MSG_CODE = %T$DD_INFORM ;

   5815  0 000271   000204 235007                    LDA     132,DL
         0 000272   000020 755000 xsym               STA     DUP+16

      256     5816    3      CALL TOU$DU_USER_WRITE ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:35   

   5816  0 000273   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000274   000000 701000 xent               TSX1    TOU$DU_USER_WRITE
         0 000275   000000 011000                    NOP     0

      257     5817    3      CALL TOU$DU_PRINTER_WRITE ;

   5817  0 000276   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000277   000000 701000 xent               TSX1    TOU$DU_PRINTER_WRITE
         0 000300   000000 011000                    NOP     0

      258     5818    3      RETURN ;

   5818  0 000301   200006 221300                    LDX1  ! OUTBLK$,,AUTO
         0 000302   000001 702211                    TSX2  ! 1,X1

      259     5819
      260     5820    3   ERROR:
      261     5821    3      ALTRETURN ;

   5821  0 000303   200006 221300       ERROR        LDX1  ! OUTBLK$,,AUTO
         0 000304   000000 702211                    TSX2  ! 0,X1

      262     5822
      263     5823    3   END DC_DELETE_DECK ;
      264     5824        %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:36   
      265     5825        /*I*  NAME:        DC_CHANGE_DECK
      266     5826              AUTHOR:      Scott S. Sheppard
      267     5827              PURPOSE:     Removes a catalog reference
      268     5828              INTERFACE:   TOU$RR_REMOVE_FROM_REFLIST
      269     5829                           TOU$DU_USER_WRITE
      270     5830                           TOU$DU_PRINTER_WRITE
      271     5831              DESCRIPTION: Calls appropriate modules to remove a reference.
      272     5832        */
      273     5833
      274     5834    2   DC_CHANGE_DECK: PROC ALTRET ;

   5834  0 000305   200006 741300       DC_CHANGE_D* STX1  ! OUTBLK$,,AUTO

      275     5835
      276     5836        /* Code */
      277     5837
      278     5838           /* call routine to remove this catalog from the reference list */
      279     5839    3      CALL TOU$RR_REMOVE_FROM_REFLIST ALTRET (ERROR) ;

   5839  0 000306   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000307   000000 701000 xent               TSX1    TOU$RR_REMOVE_FROM_REFLIST
         0 000310   000323 702000 0                  TSX2    ERROR

      280     5840
      281     5841           /* print message on user terminal and DEER printout */
      282     5842    3      DUP.MSG_CODE = %T$DC_REMREF ;

   5842  0 000311   000230 235007                    LDA     152,DL
         0 000312   000020 755000 xsym               STA     DUP+16

      283     5843    3      CALL TOU$DU_USER_WRITE ;

   5843  0 000313   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000314   000000 701000 xent               TSX1    TOU$DU_USER_WRITE
         0 000315   000000 011000                    NOP     0

      284     5844    3      CALL TOU$DU_PRINTER_WRITE ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:37   

   5844  0 000316   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000317   000000 701000 xent               TSX1    TOU$DU_PRINTER_WRITE
         0 000320   000000 011000                    NOP     0

      285     5845    3      RETURN ;

   5845  0 000321   200006 221300                    LDX1  ! OUTBLK$,,AUTO
         0 000322   000001 702211                    TSX2  ! 1,X1

      286     5846
      287     5847    3   ERROR:
      288     5848    3      ALTRETURN ;

   5848  0 000323   200006 221300       ERROR        LDX1  ! OUTBLK$,,AUTO
         0 000324   000000 702211                    TSX2  ! 0,X1

      289     5849
      290     5850    3   END DC_CHANGE_DECK ;
      291     5851    2   END DC_DELETE_CATALOG_DECKS ;
      292     5852        %EJECT ;
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:38   
      293     5853        /*I*  NAME:        DC_DELETE_CATALOG_ENTRIES
      294     5854              AUTHOR:      Scott S. Sheppard
      295     5855              PURPOSE:     Deletes Catalog Entries
      296     5856              INTERFACE:   TOU$DFU_DF_DL_CATALOG_ENTRY
      297     5857              INPUT:       CATALOG_DATA.ENTRY_COUNT
      298     5858              OUTPUT:      CATALOG_DATA.ENTRY_COUNT
      299     5859              DESCRIPTION: This procedure loops,  deleting  all  of  the
      300     5860                           catalog entries for the catalog to be deleted.
      301     5861        */
      302     5862
      303     5863    1   DC_DELETE_CATALOG_ENTRIES: PROC ALTRET ;

   5863  0 000325   200004 741300       DC_DELETE_C* STX1  ! 4,,AUTO

      304     5864
      305     5865    2      DCL ENTRY_COUNT UBIN WORD ALIGNED ;
      306     5866
      307     5867        /* Code */
      308     5868
      309     5869    2      ENTRY_COUNT = CATALOG_DATA.ENTRY_COUNT ;

   5869  0 000326   000000 236000 xsym               LDQ     CATALOG_DATA
         0 000327   777777 376007                    ANQ     -1,DL
         0 000330   200005 756100                    STQ     ENTRY_COUNT,,AUTO

      310     5870    3      DO CATALOG_DATA.ENTRY_COUNT = ENTRY_COUNT DOWNTO 1 BY -1 ;

   5870  0 000331   000000 620006                    EAX0    0,QL
         0 000332   000000 440000 xsym               SXL0    CATALOG_DATA
         0 000333   000342 710000 0                  TRA     s:5872+3

      311     5871    3         CALL TOU$DFU_DF_DL_CATALOG_ENTRY ALTRET (ERROR) ;

   5871  0 000334   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000335   000000 701000 xent               TSX1    TOU$DFU_DF_DL_CATALOG_ENTRY
         0 000336   000346 702000 0                  TSX2    ERROR

PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:39   
      312     5872    3      END /* DO */ ;

   5872  0 000337   000000 720000 xsym               LXL0    CATALOG_DATA
         0 000340   777777 621010                    EAX1    -1,X0
         0 000341   000000 441000 xsym               SXL1    CATALOG_DATA
         0 000342   000000 720000 xsym               LXL0    CATALOG_DATA
         0 000343   000334 601000 0                  TNZ     s:5871

      313     5873    2      RETURN ;

   5873  0 000344   200004 221300                    LDX1  ! 4,,AUTO
         0 000345   000001 702211                    TSX2  ! 1,X1

      314     5874
      315     5875    2   ERROR:
      316     5876    2      ALTRETURN ;

   5876  0 000346   200004 221300       ERROR        LDX1  ! 4,,AUTO
         0 000347   000000 702211                    TSX2  ! 0,X1

(unnamed)
 Sect OctLoc
   1     000   777377 777777                                                    ....
      317     5877
      318     5878    2   END DC_DELETE_CATALOG_ENTRIES ;
      319     5879    1   END TOU$DELCAT ;

PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:40   
--  Include file information  --

   XU_MACRO_C.:E05TOU  is referenced.
   TO_PERR_C.:E05TOU  is referenced.
   TOU_RQSTS_E.:E05TOU  is referenced.
   TOU_DEER_M.:E05TOU  is referenced.
      No diagnostics issued in procedure TOU$DELCAT.
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:41   

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0    37-  5879     84    30     0      0  y   y    0   1 TOU$DELCAT
  1  5607-  5620      9     0     0     64  y   y    0     2 DC_INIT_DUP
  2  5639-  5750     17     9     0    103  y y y    0     2 DC_COMMAND_SETUP
  3  5772-  5851     29     0     0    175  y y y    0     2 DC_DELETE_CATALOG_DECKS
  4  5806-  5823      8     0     0    262  y y y    0      3 DC_DELETE_DECK
  5  5834-  5850      7     0     0    305  y y y    0      3 DC_CHANGE_DECK
  6  5863-  5878      7     1     0    325  y y y    0     2 DC_DELETE_CATALOG_ENTRIES
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:42   

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label

              37   0      0 Proc    0                              5566   0      2 Call    0
            5567   0      4 Call    0                              5568   0      6 Call    0
            5570   0     11 Call    0                              5571   0     14 Call    0
            5572   0     17 Call    0                              5573   0     22 Assign  0
            5574   0     24 Call    0                              5575   0     26 Call    0
            5576   0     30 Call    0                              5577   0     33 Call    0
            5578   0     36 Call    0                              5581   0     41 Assign  0
            5582   0     43 Call    0                              5583   0     46 Assign  0
            5584   0     50 Return  0                              5587   0     51 Assign  0 ERROR_RETURN
            5588   0     53 Call    0                              5589   0     56 Assign  0
            5590   0     60 Call    0                              5591   0     63 Return  0
            5607   0     64 Proc    1                              5611   0     65 Assign  1
            5612   0     67 Assign  1                              5613   0     71 Assign  1
            5614   0     73 Assign  1                              5615   0     75 Assign  1
            5616   0     77 Assign  1                              5617   0    101 Assign  1
            5618   0    102 Return  1                              5639   0    103 Proc    2
            5729   0    104 DoIndx  2                           $  5730   0    106 Assign  2
      $$$$  5731   0    112 DoCase  2                              5732   0    126 Case    2
         $  5733   0    126 Assign  2                              5734   0    135 Case    2
            5735   0    135 Assign  2                           $  5736   0    137 Assign  2
            5737   0    145 Assign  2                              5738   0    150 Call    2
            5739   0    153 EndCse  2                          $$  5740   0    153 EndInd  2
            5742   0    164 If      2                              5744   0    166 Call    2
            5745   0    171 Return  2                              5748   0    173 Altret  2 ERROR
            5772   0    175 Proc    3                              5776   0    176 Call    3
            5777   0    201 Assign  3                           $  5778   0    204 DoIndx  3
            5779   0    210 Call    3                              5780   0    213 Call    3
            5783   0    216 Assign  3                              5784   0    221 Call    3
            5786   0    224 If      3                              5787   0    227 Call    3
            5788   0    232 Call    3                      $$$$$$  5789   0    234 EndInd  3
            5790   0    256 Return  3                              5793   0    260 Altret  3 ERROR
            5806   0    262 Proc    4                              5811   0    263 Assign  4
            5812   0    266 Call    4                              5815   0    271 Assign  4
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:43   
            5816   0    273 Call    4                              5817   0    276 Call    4
            5818   0    301 Return  4                              5821   0    303 Altret  4 ERROR
            5834   0    305 Proc    5                              5839   0    306 Call    5
            5842   0    311 Assign  5                              5843   0    313 Call    5
            5844   0    316 Call    5                              5845   0    321 Return  5
            5848   0    323 Altret  5 ERROR                        5863   0    325 Proc    6
            5869   0    326 Assign  6                              5870   0    331 DoIndx  6
            5871   0    334 Call    6                              5872   0    337 EndInd  6
            5873   0    344 Return  6                              5876   0    346 Altret  6 ERROR


  **** Statement type totals  ****

    23 Assign    29 Call       2 If         2 Case       8 Return     5 Altret
     3 DoIndx     1 DoCase     3 EndInd     1 EndCse     7 Proc       6 Labels


 # major stmts=   71 Code/major= 3.26 # stmts=   84 Code/stmt= 2.76  Point total=100.4
 Cost/major stmt=  2.6 Cost/stmt=  2.2 Total cost=    187.8

   0-4  $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
   4-6  $$$$
   6-8  $
  8-10
 10-12  $
 12-14
 14-16  $
 16-18
 18-20
 20-22
 22-??
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:44   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     5-0-0/w UBIN        r     1 ENTRY_COUNT                5-0-0/w UBIN        r     1 OUTBLK#
     6-0-0/w PTR         r     1 OUTBLK$

  ****  SYMREF variables  ****

  ****  Structures  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(45)    r     1 BINARY_KEY
     0-1-0/b UBIN(18)    r         2 DECK#

     0-0-0/w STRC(72)    r     1 CATALOG_DATA
     0-0-0/b UBIN(18)    r         2 DECK#
     0-2-0/b UBIN(18)    r         2 ENTRY_COUNT

     0-0-0/c STRC(45)    r     1 CATALOG_ENTRY_KEY
     0-1-0/b UBIN(18)    r         2 DECK#
     0-3-0/b UBIN(18)    r         2 ENTRY#

     0-0-0/c STRC(189)   r     1 CATALOG_SEARCH_KEY
     0-0-0/c CHAR(21)    r         2 DATA

     0-0-0/d STRC(5220)  r     1 DUP
    17-0-0/w PTR         r         2 CMD$
    20-0-0/w UBIN        r         2 MSG_CODE
    21-0-0/w UBIN        r         2 HDR_CODE
    26-0-0/c CHAR        r         2 LINE_VFC
    56-0-0/c BIT         r         2 FORCE_NEW_PAGE
   104-0-0/w STRC(504)   r         2 DF
   104-0-0/c BIT         r          3 ENTERED
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:45   
   104-2-0/c BIT         r          3 REPORT_ERROR
   105-0-0/w UBIN        r          3 OPEN_TYPE
   106-0-0/w UBIN        r          3 CLOSE_TYPE
   142-0-0/c CHAR(40)    r         2 HOLD_AREA
   154-0-0/w UBIN        r         2 HOLD_AREA_LGTH
   155-1-0/c BIT         r         2 BREAK_DISABLED

     0-0-0/w STRC(864)   r     1 OBJECT
    24-0-0/b UBIN(18)    r         2 DECK#

     0-0-0/w STRC(576)   r     1 OBJECT_REFLIST_DATA
     0-0-0/b UBIN        r         2 NUM_REFS

     0-0-0/c STRC(45)    r     1 OBJECT_REFLIST_KEY
     0-1-0/b UBIN(18)    r         2 DECK#


  ****  BASED and DCB variables  ****

  ****  Structures  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(144)   r     1 OUT$BLK
     0-2-0/h UBIN(18)    r         2 CODE
     1-0-0/h UBIN(18)    r         2 NSUBLKS
     3-0-0/b PTR         r         2 SUBLK$(0:0)

     0-0-0/w ASTR(153)   r     1 OUT$SYM
     4-0-0/c UBIN(9)     r         2 COUNT
     4-1-0/c ACHR        r         2 TEXT



   Procedure TOU$DELCAT requires 232 words for executable code.
   Procedure TOU$DELCAT requires 10 words of local(AUTO) storage.
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:46   

    No errors detected in file TOU$DELCAT.:E05TSI    .
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:47   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:48   
          MINI XREF LISTING

BINARY_KEY.DECK#
      5429**DCL      5811<<ASSIGN
CATALOG_DATA.DECK#
      5374**DCL      5777>>ASSIGN
CATALOG_DATA.ENTRY_COUNT
      5375**DCL      5778>>DOINDEX  5869>>ASSIGN   5870<<DOINDEX
CATALOG_ENTRY_KEY.DECK#
      5389**DCL      5777<<ASSIGN
CATALOG_ENTRY_KEY.ENTRY#
      5390**DCL      5778<<DOINDEX
CATALOG_SEARCH_KEY.DATA
      5416**DCL      5733<<ASSIGN
DC_CHANGE_DECK IN PROCEDURE DC_DELETE_CATALOG_DECKS
      5834**PROC     5788--CALL
DC_COMMAND_SETUP
      5639**PROC     5567--CALL
DC_DELETE_CATALOG_DECKS
      5772**PROC     5574--CALL
DC_DELETE_CATALOG_ENTRIES
      5863**PROC     5575--CALL
DC_DELETE_DECK IN PROCEDURE DC_DELETE_CATALOG_DECKS
      5806**PROC     5787--CALL
DC_INIT_DUP
      5607**PROC     5566--CALL
DUP.BREAK_DISABLED
      5350**DCL      5573<<ASSIGN   5583<<ASSIGN   5587<<ASSIGN
DUP.CMD$
      5248**DCL      5729>>DOINDEX  5730>>ASSIGN
DUP.DF.CLOSE_TYPE
      5316**DCL      5617<<ASSIGN
DUP.DF.ENTERED
      5308**DCL      5614<<ASSIGN   5735<<ASSIGN   5742>>IF
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:49   
DUP.DF.OPEN_TYPE
      5314**DCL      5615<<ASSIGN
DUP.DF.REPORT_ERROR
      5312**DCL      5616<<ASSIGN
DUP.FORCE_NEW_PAGE
      5272**DCL      5613<<ASSIGN
DUP.HDR_CODE
      5253**DCL      5611<<ASSIGN
DUP.HOLD_AREA
      5343**DCL      5736<<ASSIGN
DUP.HOLD_AREA_LGTH
      5345**DCL      5737<<ASSIGN
DUP.LINE_VFC
      5262**DCL      5612<<ASSIGN
DUP.LOG_V
      5330**DCL      5335--REDEF
DUP.MSG_CODE
      5251**DCL      5581<<ASSIGN   5589<<ASSIGN   5815<<ASSIGN   5842<<ASSIGN
ENTRY_COUNT IN PROCEDURE DC_DELETE_CATALOG_ENTRIES
      5865**DCL      5869<<ASSIGN   5870>>DOINDEX
ERROR IN PROCEDURE DC_CHANGE_DECK
      5848**LABEL    5839--CALLALT
ERROR IN PROCEDURE DC_COMMAND_SETUP
      5748**LABEL    5738--CALLALT  5744--CALLALT
ERROR IN PROCEDURE DC_DELETE_CATALOG_DECKS
      5793**LABEL    5776--CALLALT  5779--CALLALT  5780--CALLALT  5784--CALLALT  5787--CALLALT  5788--CALLALT
ERROR IN PROCEDURE DC_DELETE_CATALOG_ENTRIES
      5876**LABEL    5871--CALLALT
ERROR IN PROCEDURE DC_DELETE_DECK
      5821**LABEL    5812--CALLALT
ERROR_RETURN
      5587**LABEL    5567--CALLALT  5570--CALLALT  5571--CALLALT  5572--CALLALT  5574--CALLALT  5575--CALLALT
      5576--CALLALT  5577--CALLALT  5578--CALLALT
OBJECT.BCD
      5442**DCL      5464--REDEF    5487--REDEF
OBJECT.DECK#
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:50   
      5488**DCL      5783>>ASSIGN   5811>>ASSIGN
OBJECT.NIO_BCD.X_OF_N
      5475**DCL      5480--REDEF
OBJECT_REFLIST_DATA.NUM_REFS
      5532**DCL      5786>>IF
OBJECT_REFLIST_KEY.DECK#
      5519**DCL      5783<<ASSIGN
OUT$BLK.CODE IN PROCEDURE DC_COMMAND_SETUP
      5657**DCL      5731>>DOCASE
OUT$BLK.NSUBLKS IN PROCEDURE DC_COMMAND_SETUP
      5661**DCL      5729>>DOINDEX
OUT$BLK.SUBLK$ IN PROCEDURE DC_COMMAND_SETUP
      5682**DCL      5730>>ASSIGN
OUT$SYM.COUNT IN PROCEDURE DC_COMMAND_SETUP
      5718**DCL      5721--IMP-SIZ  5733>>ASSIGN   5736>>ASSIGN   5737>>ASSIGN
OUT$SYM.TEXT IN PROCEDURE DC_COMMAND_SETUP
      5721**DCL      5733>>ASSIGN   5736>>ASSIGN
OUTBLK# IN PROCEDURE DC_COMMAND_SETUP
      5641**DCL      5729<<DOINDEX  5730>>ASSIGN
OUTBLK$ IN PROCEDURE DC_COMMAND_SETUP
      5642**DCL      5730<<ASSIGN   5731>>DOCASE   5733>>ASSIGN   5733>>ASSIGN   5736>>ASSIGN   5736>>ASSIGN
      5737>>ASSIGN
TOU$DFU_DF_DL_CATALOG_ENTRY
      5554**DCL-ENT  5871--CALL
TOU$DFU_DF_DL_DECK
      5551**DCL-ENT  5812--CALL
TOU$DFU_DF_RD_CATALOG_CONTROL
      5547**DCL-ENT  5776--CALL
TOU$DFU_DF_RD_CATALOG_ENTRY
      5548**DCL-ENT  5779--CALL
TOU$DFU_DF_RD_LOG
      5553**DCL-ENT  5572--CALL
TOU$DFU_DF_RD_OBJECT
      5549**DCL-ENT  5780--CALL
TOU$DFU_DF_RD_OBJECT_REFLIST
      5550**DCL-ENT  5784--CALL
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:51   
TOU$DFU_DF_WR_LOG
      5552**DCL-ENT  5577--CALL
TOU$DU_CLOSE_DF
      5542**DCL-ENT  5578--CALL     5588--CALL
TOU$DU_OPEN_DF
      5541**DCL-ENT  5570--CALL
TOU$DU_PRINTER_WRITE
      5545**DCL-ENT  5817--CALL     5844--CALL
TOU$DU_SET_DF_FID
      5540**DCL-ENT  5738--CALL     5744--CALL
TOU$DU_USER_WRITE
      5544**DCL-ENT  5582--CALL     5590--CALL     5816--CALL     5843--CALL
TOU$L_SHOW_DCB
      5560**DCL-ENT  5568--CALL
TOU$ND_FIND_CATALOG
      5556**DCL-ENT  5571--CALL
TOU$RR_DELETE_CATALOG
      5558**DCL-ENT  5576--CALL
TOU$RR_REMOVE_FROM_REFLIST
      5557**DCL-ENT  5839--CALL
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:52   
              *** CROSS REFERENCE LISTING ***
    **     DENOTES     IDENTIFIER DEFINITION
    <<                 IDENTIFIER'S VALUE SET
    >>                 IDENTIFIER'S VALUE USED
    <>                 IDENTIFIER SET AND/OR USED
    --                 IDENTIFIER REFERENCED
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:53   
              FULL UREF LISTING

BINARY_KEY
      5427**DCL
BINARY_KEY.ENTRY#
      5430**DCL
BINARY_KEY.SIZE
      5428**DCL
CATALOG_DATA
      5373**DCL
CATALOG_DATA.RFU
      5376**DCL
CATALOG_ENTRY_KEY
      5387**DCL
CATALOG_ENTRY_KEY.SIZE
      5388**DCL
CATALOG_KEY
      5401**DCL
CATALOG_KEY.DATA
      5403**DCL
CATALOG_KEY.DECK#
      5404**DCL
CATALOG_KEY.SIZE
      5402**DCL
CATALOG_SEARCH_KEY
      5415**DCL
DUP
      5230**DCL
DUP.BATCH_MODE
      5232**DCL
DUP.BCD_V
      5301**DCL
DUP.BCD_V.PTR$
      5304**DCL
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:54   
DUP.BINARY_V
      5296**DCL
DUP.BINARY_V.PTR$
      5299**DCL
DUP.BOTTOM_LINE#
      5268**DCL
DUP.BREAK_RETURN
      5352**DCL
DUP.BREAK_TERMINATE
      5348**DCL
DUP.CPU_TYPE
      5361**DCL
DUP.CURRENT_LINE#
      5266**DCL
DUP.CURRENT_PAGE#
      5264**DCL
DUP.DF
      5307**DCL
DUP.DF.FID
      5318**DCL
DUP.DF.FID_LGTH
      5320**DCL
DUP.DF.NO_EXIST
      5310**DCL
DUP.DS_V
      5241**DCL
DUP.ERROR_IMAGE
      5270**DCL
DUP.FAULT_ERROR
      5236**DCL
DUP.IFAD
      5275**DCL
DUP.IFAD.CONFIG_TAB
      5284**DCL
DUP.IFAD.DEVICE_INPUT
      5280**DCL
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:55   
DUP.IFAD.DRIVE_NUMBER
      5290**DCL
DUP.IFAD.ENTERED
      5278**DCL
DUP.IFAD.FID
      5292**DCL
DUP.IFAD.FID_LGTH
      5294**DCL
DUP.IFAD.IMU_NUMBER
      5288**DCL
DUP.IFAD.IMU_TAB
      5282**DCL
DUP.IFAD.ME_ALLOWED
      5276**DCL
DUP.IFAD.NUM_VOLUMES
      5286**DCL
DUP.LOG
      5323**DCL
DUP.LOG.CATALOG
      5326**DCL
DUP.LOG.DECK
      5328**DCL
DUP.LOG.TYPE
      5324**DCL
DUP.LOG_V.PTR$
      5333**DCL
DUP.LOG_V_
      5335**DCL
DUP.MSG_V
      5257**DCL
DUP.MSG_V.PTR$
      5260**DCL
DUP.NUM_LINES
      5255**DCL
DUP.NUM_WORDS
      5239**DCL
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:56   
DUP.PROCESS_COMPLETE
      5234**DCL
DUP.RESPONSE
      5244**DCL
DUP.RESPONSE_LGTH
      5246**DCL
DUP.SITE_ID
      5359**DCL
DUP.SITE_NAME
      5354**DCL
DUP.SITE_NAME.LGTH
      5355**DCL
DUP.SITE_NAME.TEXT
      5357**DCL
DUP.TEMP
      5337**DCL
DUP.TEMP.CLOSE_TYPE
      5340**DCL
DUP.TEMP.OPEN_TYPE
      5338**DCL
OBJECT
      5441**DCL
OBJECT.BCD.ASSEMBLER
      5459**DCL
OBJECT.BCD.CLASS
      5447**DCL
OBJECT.BCD.CONTROL
      5443**DCL
OBJECT.BCD.DATE
      5461**DCL
OBJECT.BCD.DONT_APPLY
      5448**DCL
OBJECT.BCD.DONT_APPLY.CP6
      5450**DCL
OBJECT.BCD.DONT_APPLY.DPS8000
      5453**DCL
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:57   
OBJECT.BCD.DONT_APPLY.DPS90
      5452**DCL
OBJECT.BCD.FILENAME
      5457**DCL
OBJECT.BCD.GECALL
      5460**DCL
OBJECT.BCD.LBL
      5462**DCL
OBJECT.BCD.LIBRARY
      5445**DCL
OBJECT.BCD.LOAD_TYPE
      5446**DCL
OBJECT.BCD.MODEL
      5456**DCL
OBJECT.BCD.SEQ
      5463**DCL
OBJECT.BCD.TYPE
      5444**DCL
OBJECT.BCD_
      5487**DCL
OBJECT.BINARY_COUNT
      5489**DCL
OBJECT.CHECKSUM
      5493**DCL
OBJECT.DECK_CHECKSUM
      5492**DCL
OBJECT.LOAD_SIZE
      5491**DCL
OBJECT.NIO_BCD
      5464**DCL
OBJECT.NIO_BCD.ASSEMBLER
      5481**DCL
OBJECT.NIO_BCD.CLASS
      5469**DCL
OBJECT.NIO_BCD.CONTROL
      5465**DCL
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:58   
OBJECT.NIO_BCD.DATA
      5471**DCL
OBJECT.NIO_BCD.EQUIP_TYPE
      5473**DCL
OBJECT.NIO_BCD.FILE_NAME
      5474**DCL
OBJECT.NIO_BCD.LBL
      5485**DCL
OBJECT.NIO_BCD.LIBRARY
      5467**DCL
OBJECT.NIO_BCD.LOAD_TYPE
      5468**DCL
OBJECT.NIO_BCD.PRD_NUM_TAB
      5482**DCL
OBJECT.NIO_BCD.PRG_NUM_TAB
      5483**DCL
OBJECT.NIO_BCD.SEQ
      5486**DCL
OBJECT.NIO_BCD.TYPE
      5466**DCL
OBJECT.NIO_BCD.X_OF_N.N
      5479**DCL
OBJECT.NIO_BCD.X_OF_N.X
      5477**DCL
OBJECT.NIO_BCD.X_OF_N_
      5480**DCL
OBJECT.TOTAL_COUNT
      5490**DCL
OBJECT_KEY
      5504**DCL
OBJECT_KEY.DATA
      5506**DCL
OBJECT_KEY.SIZE
      5505**DCL
OBJECT_REFLIST_DATA
      5531**DCL
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:59   
OBJECT_REFLIST_DATA.REFS
      5533**DCL
OBJECT_REFLIST_DATA.REFS.CE#
      5535**DCL
OBJECT_REFLIST_DATA.REFS.ME#
      5534**DCL
OBJECT_REFLIST_KEY
      5517**DCL
OBJECT_REFLIST_KEY.ENTRY#
      5520**DCL
OBJECT_REFLIST_KEY.SIZE
      5518**DCL
OUT$BLK IN PROCEDURE DC_COMMAND_SETUP
      5649**DCL
OUT$BLK.CPOS IN PROCEDURE DC_COMMAND_SETUP
      5675**DCL
OUT$BLK.NDTYPE IN PROCEDURE DC_COMMAND_SETUP
      5652**DCL
OUT$BLK.SCRITCH IN PROCEDURE DC_COMMAND_SETUP
      5665**DCL
OUT$BLK.TEMP IN PROCEDURE DC_COMMAND_SETUP
      5650**DCL
OUT$SYM IN PROCEDURE DC_COMMAND_SETUP
      5695**DCL
OUT$SYM.CODE IN PROCEDURE DC_COMMAND_SETUP
      5701**DCL
OUT$SYM.CPOS IN PROCEDURE DC_COMMAND_SETUP
      5710**DCL
OUT$SYM.NDTYPE IN PROCEDURE DC_COMMAND_SETUP
      5698**DCL
OUT$SYM.NSUBLKS IN PROCEDURE DC_COMMAND_SETUP
      5704**DCL
OUT$SYM.SCRITCH IN PROCEDURE DC_COMMAND_SETUP
      5707**DCL
OUT$SYM.TEMP IN PROCEDURE DC_COMMAND_SETUP
      5696**DCL
PL6.E3A0      #001=TOU$DELCAT File=TOU$DELCAT.:E05TSI                            WED 07/30/97 06:41 Page:60   
OUT$SYM.TEXTC$ IN PROCEDURE DC_COMMAND_SETUP
      5713**DCL
TOU$DELCAT
        37**PROC
