VERSION A06

PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:1    
        1        1        /*M* CNFG => BUILDS CONFIGURATION SETS */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7
        8        8
        9        9
       10       10
       11       11
       12       12        CNFG:   PROC;
       13       13
       14       14
       15       15        /*D*
       16       16               NAME: CNFG
       17       17            PURPOSE: BUILD THE CONFIGURATION SETS(STATES) FROM
       18       18                      THE GRAMMAR SPECIFICATION.
       19       19        */
       20       20
       21       21
       22       22        %INCLUDE LR_GRAM_EXT;
       23      561        %INCLUDE LR_CNFG_EXT;
       24      714    1   DCL INCL_LEN         SBIN;
       25      715    1   DCL BUILD_HEAD$      PTR;
       26      716        %KEY_(NAME=BKEY,STCLASS="BASED(BKEY$)");
       27      733    1   DCL BKEY$            PTR;
       28      734    1   DCL KEY$             PTR;
       29      735    1   DCL NR_CTHREAD       SBIN;
       30      736    1   DCL NR_CTHREAD_FOUND SBIN;
       31      737    1   DCL MAX_DEP          SBIN;
       32      738    1   DCL AVG_DEP          SBIN;
       33      739    1   DCL HASH_HEAD$(0:HASH_MOD) PTR;
       34      740
       35      741    1   DCL LIMCHK           ENTRY(4);
       36      742    1   DCL DIAG             ENTRY(6);
       37      743        %EJECT;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:2    
       38      744    1   ENTER_KEY:PROC(KEY,KEY$);
       39      745
       40      746
       41      747          /* This key value is used for two purposes:
       42      748            1) To record the particular productions & dot positions
       43      749               having the same symbol after the dot position
       44      750               in a configuration set.
       45      751            2) To serve as a key to identify a configuration set. The
       46      752               basis set for the new configuration is all the productions
       47      753               with the dot position advanced by 1. */
       48      754
       49      755        %KEY_;
       50      772
       51      773    2   DCL KEY$         PTR;
       52      774    2   DCL CUR_KEY$     PTR;
       53      775    2   DCL SUC_KEY$     PTR;
       54      776    2   DCL DEP          SBIN;
       55      777    2   DCL CMPR_RESULT  SBIN;
       56      778    2   DCL HASHVAL      SBIN;
       57      779    2   DCL I            SBIN;
       58      780    2   DCL J            SBIN;
       59      781    2   DCL LENW         SBIN;
       60      782    2   DCL LENC         SBIN;
       61      783
       62      784
       63      785    2           LENW=LENGTHW(KEY.W)+KEY.W.ELEM_COUNT*LENGTHW(KEY.ELEM(0));
       64      786    2           KEY.W.SET_STATE=SET_STATE_UNCALC;
       65      787
       66      788        /* Compute hash value. */
       67      789
       68      790    2           HASHVAL=MOD((KEY.W.ELEM_COUNT*HASH_MUL+KEY.W.SYM_AFTER)
       69      791    2             *HASH_MUL+KEY.KEY_W(2),HASH_MOD);
       70      792
       71      793    2           IF HASHVAL<0 THEN
       72      794    2              HASHVAL=HASHVAL+HASH_MOD;
       73      795
       74      796    2           CUR_KEY$=PINCRW(ADDR(HASH_HEAD$(HASHVAL)),
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:3    
       75      797    2             POFFW(ADDR(KEY),ADDR(KEY.LLINK$)));
       76      798
       77      799    2           CMPR_RESULT=0;
       78      800
       79      801    2           SUC_KEY$=HASH_HEAD$(HASHVAL);
       80      802
       81      803    2           DEP=0;
       82      804    2           IF KEY.W.SYM_AFTER~=0 THEN
       83      805    3   SEARCHING: DO WHILE(SUC_KEY$~=ADDR(NIL));
       84      806    3              CUR_KEY$=SUC_KEY$;
       85      807    3              DEP=DEP+1;
       86      808
       87      809    3              CMPR_RESULT=KEY.KEY_W(0)-CUR_KEY$->KEY_B.KEY_W(0);
       88      810    3              IF CMPR_RESULT=0 THEN
       89      811    4              DO;
       90      812
       91      813    4                 CMPR_RESULT=KEY.KEY_W(1)-CUR_KEY$->KEY_B.KEY_W(1);
       92      814    4                 IF CMPR_RESULT=0 THEN
       93      815    5                 DO;
       94      816
       95      817    5                    I=2;
       96      818
       97      819    6                    DO WHILE(CMPR_RESULT=0
       98      820    6                      AND I<LENW);
       99      821    6                       CMPR_RESULT=KEY.KEY_W(I)-CUR_KEY$->KEY_B.KEY_W(I);
      100      822    6                       I=I+LENGTHW(KEY.ELEM(0));
      101      823    6                       END;
      102      824    5                    END;
      103      825    4                 END;
      104      826
      105      827    3              IF CMPR_RESULT>0 THEN
      106      828    4              DO;
      107      829    4                 SUC_KEY$=CUR_KEY$->KEY_B.RLINK$;
      108      830    4                 END;
      109      831    3              ELSE
      110      832    3                 IF CMPR_RESULT<0 THEN
      111      833    4                 DO;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:4    
      112      834    4                    SUC_KEY$=CUR_KEY$->KEY_B.LLINK$;
      113      835    4                    END;
      114      836    3                 ELSE
      115      837    4                 DO;
      116      838    4                    KEY$=CUR_KEY$;
      117      839    4                    NR_CTHREAD_FOUND=NR_CTHREAD_FOUND+1;
      118      840    4                    AVG_DEP=AVG_DEP+DEP;
      119      841    4                    RETURN;
      120      842    4                    END;
      121      843    3              END SEARCHING;
      122      844
      123      845    2           MAX_DEP=MAXIMUM(MAX_DEP,DEP);
      124      846
      125      847    2           IF KEY.W.SYM_AFTER~=0 THEN
      126      848    3   CATALOG_KEY:DO;
      127      849
      128      850    3              KEY.LLINK$=ADDR(NIL);
      129      851    3              KEY.RLINK$=ADDR(NIL);
      130      852
      131      853    3              IF CMPR_RESULT>0 THEN
      132      854    4              DO;
      133      855    4                 CUR_KEY$->KEY_B.RLINK$=ADDR(KEY);
      134      856    4                 END;
      135      857    3              ELSE
      136      858    4              DO;
      137      859    4                 CUR_KEY$->KEY_B.LLINK$=ADDR(KEY);
      138      860    4                 END;
      139      861
      140      862    3              NR_CTHREAD=NR_CTHREAD+1;
      141      863
      142      864    3              KEY.KEY_VAL$=BUILD_HEAD$;
      143      865    3              BUILD_HEAD$=ADDR(KEY);
      144      866
      145      867    3              END CATALOG_KEY;
      146      868
      147      869    2           KEY$=ADDR(KEY);
      148      870
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:5    
      149      871    2           KEY.SET$=ADDR(NIL);
      150      872
      151      873        /* The new key has been built in the front of
      152      874           dynamic memory space. The actual amount of
      153      875           space gotten corresponds to the maximum size
      154      876           of the key. Get more space so more keys may
      155      877           be built. */
      156      878
      157      879    2           BKEY$=ADDR(KEY.ELEM(KEY.W.ELEM_COUNT));
      158      880    2           IF KEY.W.SYM_AFTER>NR_TERM THEN
      159      881    3   ALLOCATE_READ_SET:DO;
      160      882    3              CALL MEM_TRUNC(BKEY$,LENGTHW(KEY_B)+INCL_LEN);
      161      883    3              KEY.SET$=BKEY$;
      162      884    3              BKEY$=PINCRW(BKEY$,SET_LENGTHW);
      163      885    3              END ALLOCATE_READ_SET;
      164      886    2           ELSE
      165      887    2              CALL MEM_TRUNC(BKEY$,LENGTHW(KEY_B));
      166      888
      167      889    2   END;
      168      890        %EJECT;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:6    
      169      891    1   CNFG_BUILD:PROC(KEY);
      170      892
      171      893        %KEY_(NAME=KEY);
      172      910
      173      911        /* The key value passed as an argument
      174      912            is used to construct the basis set for
      175      913           a new configuration, and is used to uniquely
      176      914           identify the current configuration set */
      177      915
      178      916
      179      917        /* Build the new configuration set as
      180      918          a threaded binary tree. After the configuration
      181      919          set is built, then the tree may be traversed in
      182      920          in-order to get a sorted configuration set */
      183      921
      184      922    2   DCL C$ PTR;
      185      923    2   DCL KEY$ PTR;
      186      924    2   DCL INCL$ PTR;
      187      925        %C_SET_(NAME=C_SET,STCLASS=" ");
      188      942
      189      943        %EQU NR_SORT_MAX=NR_BASIS_EST * NR_BASIS_EST ;
      190      944
      191      945    2   DCL 1 BIN_TREE1(0:%NR_SORT_MAX) ,
      192      946    2         2 LLINK UBIN BYTE UNAL,
      193      947    2         2 RLINK UBIN BYTE UNAL,
      194      948    2         2 SYM_AFTER  UBIN HALF UNAL;
      195      949
      196      950    2   DCL 1 BIN_TREE2(0:%NR_SORT_MAX),
      197      951    2         2 PROD    SBIN HALF UNAL,
      198      952    2         2 DOT_POS SBIN HALF UNAL;
      199      953    2   DCL BIN_TREE2_W(0:%NR_SORT_MAX) REDEF BIN_TREE2 UBIN;
      200      954
      201      955    2   DCL SYM_AFTER UBIN HALF;
      202      956    2   DCL CN SBIN;
      203      957    2   DCL NN SBIN;
      204      958    2   DCL NE SBIN;
      205      959
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:7    
      206      960    2   DCL NNODE SBIN;
      207      961
      208      962    2   DCL 1 TREE2,
      209      963    2         2 PROD SBIN HALF UNAL,
      210      964    2         2 DOT_POS SBIN HALF UNAL;
      211      965
      212      966    2   DCL TREE2_W REDEF TREE2 UBIN;
      213      967
      214      968
      215      969    2   DCL DO_LIST(0:NR_SYMS_MAX) BIT(1) UNAL;
      216      970    2   DCL DO_LIST_S(0:NR_SYMS_MAX) UBIN HALF UNAL;
      217      971    2   DCL DO_LIST_C      SBIN;
      218      972    2   DCL CONFIG_NUMBER  SBIN;
      219      973    2   DCL I              SBIN;
      220      974    2   DCL J              SBIN;
      221      975    2   DCL N              SBIN;
      222      976    2   DCL SA$ PTR;
      223      977    2   DCL SA             SBIN;
      224      978    2   DCL P              SBIN;
      225      979
      226      980        %EJECT;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:8    
      227      981    2   INSRT:  PROC ALTRET;
      228      982
      229      983    3   DCL CMPR_RESULT  SBIN;
      230      984    3   DCL N            SBIN;
      231      985    3   DCL M            SBIN;
      232      986
      233      987    3           SYM_AFTER=0;
      234      988    3           IF TREE2.DOT_POS<PROD.RIGHT_CNT(TREE2.PROD) THEN
      235      989    4           DO;
      236      990    4              SYM_AFTER=RIGHT_PARTS(PROD.RIGHT_START(TREE2.PROD)+TREE2.DOT_POS);
      237      991    4              IF SYM_AFTER>NR_TERM THEN
      238      992    5              DO;
      239      993    5                 IF NOT DO_LIST(SYM_AFTER) THEN
      240      994    6                 DO;
      241      995    6                    DO_LIST(SYM_AFTER)=TRUE;
      242      996    6                    DO_LIST_S(DO_LIST_C)=SYM_AFTER;
      243      997    6                    DO_LIST_C=DO_LIST_C+1;
      244      998    6                    END;
      245      999    5                 END;
      246     1000    4              END;
      247     1001    3           N=0;
      248     1002    3           M=1;
      249     1003    3           IF NNODE=0 THEN
      250     1004    4           DO;
      251     1005    4              M=0;
      252     1006    4              CMPR_RESULT=0;
      253     1007    4              END;
      254     1008
      255     1009    4   SEARCHING:DO WHILE(N<M);
      256     1010    4              N=M;
      257     1011
      258     1012    4              CMPR_RESULT=SYM_AFTER-BIN_TREE1.SYM_AFTER(N);
      259     1013
      260     1014    4              IF CMPR_RESULT=0 THEN
      261     1015    5              DO;
      262     1016    5                 CMPR_RESULT=TREE2_W-BIN_TREE2_W(N);
      263     1017    5                 IF CMPR_RESULT=0 THEN
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:9    
      264     1018    5                    ALTRETURN;
      265     1019    5                 END;
      266     1020
      267     1021    4              IF CMPR_RESULT>0 THEN
      268     1022    4                 M=BIN_TREE1.RLINK(N);
      269     1023    4              ELSE
      270     1024    4                 M=BIN_TREE1.LLINK(N);
      271     1025    4              END SEARCHING;
      272     1026
      273     1027    3           NNODE=NNODE+1;
      274     1028    3           IF NNODE>%NR_SORT_MAX THEN
      275     1029    3              CALL LIMCHK(15,NNODE,%NR_SORT_MAX,
      276     1030    3                'The maximum configuration set size has been exceeded: %%');
      277     1031    3           BIN_TREE1.SYM_AFTER(NNODE)=SYM_AFTER;
      278     1032    3           BIN_TREE2_W(NNODE)=TREE2_W;
      279     1033
      280     1034    3           IF CMPR_RESULT>=0 THEN
      281     1035    4           DO;
      282     1036    4              BIN_TREE1.RLINK(N)=NNODE;
      283     1037    4              BIN_TREE1.RLINK(NNODE)=M;
      284     1038    4              BIN_TREE1.LLINK(NNODE)=N;
      285     1039    4              END;
      286     1040    3           ELSE
      287     1041    4           DO;
      288     1042    4              BIN_TREE1.LLINK(N)=NNODE;
      289     1043    4              BIN_TREE1.LLINK(NNODE)=M;
      290     1044    4              BIN_TREE1.RLINK(NNODE)=N;
      291     1045    4              END;
      292     1046    3   END INSRT;
      293     1047
      294     1048        %EJECT;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:10   
      295     1049            /* Body of CNFG_BUILD */
      296     1050
      297     1051    2           NNODE=0;
      298     1052
      299     1053
      300     1054    2           CALL BITZAP(DO_LIST,NR_SYMS_MAX);
      301     1055    2           DO_LIST_C=0;
      302     1056
      303     1057    3           DO I=KEY.W.ELEM_COUNT-1 DOWNTO 0;
      304     1058    3              TREE2.PROD=KEY.ELEM.PROD(I);
      305     1059    3              TREE2.DOT_POS=KEY.ELEM.DOT_POS(I)+1;
      306     1060    3              IF TREE2.DOT_POS<=PROD.RIGHT_CNT(TREE2.PROD) THEN
      307     1061    3                 CALL INSRT;
      308     1062    3              END;
      309     1063
      310     1064    2           J=0;
      311     1065    2           TREE2.DOT_POS=0;
      312     1066    3           DO WHILE(J<DO_LIST_C);
      313     1067
      314     1068    3              SA=DO_LIST_S(J);
      315     1069    3              SA$=SYM_PTRS(SA);
      316     1070    3              P=SA$->SYMBOL.PROD_INDX;
      317     1071
      318     1072    4              DO I=SA$->SYMBOL.PROD_CNT+P-1 DOWNTO P;
      319     1073    4                 TREE2.PROD=I;
      320     1074    4                 CALL INSRT ALTRET (DONE_PRODS);
      321     1075    4                 END;
      322     1076
      323     1077    3   DONE_PRODS:;
      324     1078    3              J=J+1;
      325     1079    3              END;
      326     1080
      327     1081
      328     1082        /*The complete configuration set has been built.
      329     1083
      330     1084          Note that the nodes have been built in the binary
      331     1085          tree with the ordering SYM_AFTER,PROD,DOT_POS.
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:11   
      332     1086
      333     1087          Because the binary tree has been built as a
      334     1088          threaded tree, traversing the tree to get the
      335     1089          elements in sorted order is a very simple task. */
      336     1090
      337     1091    2           IF NNODE=0 THEN
      338     1092    2              RETURN;
      339     1093
      340     1094    2           CN=0;
      341     1095    2           NN=1;
      342     1096    2           SA=0;
      343     1097    2           BIN_TREE1.SYM_AFTER(0)=0;
      344     1098    3           DO WHILE(NN>CN);
      345     1099    3              CN=NN;
      346     1100    3              NN=BIN_TREE1.LLINK(CN);
      347     1101    3              END;
      348     1102    2           C_SET.NR_ELEM=0;
      349     1103
      350     1104    3   MORE_CELEM:DO WHILE(CN>0);
      351     1105
      352     1106    3              SYM_AFTER=BIN_TREE1.SYM_AFTER(CN);
      353     1107
      354     1108    3              IF SYM_AFTER<SA THEN
      355     1109    3                 CALL DIAG(15,'ERROR => Internal error in CNFG, out of sorts%%');
      356     1110
      357     1111    3              SA=SYM_AFTER;
      358     1112
      359     1113    3              NE=0;
      360     1114
      361     1115    4              DO WHILE(BIN_TREE1.SYM_AFTER(CN)=SYM_AFTER);
      362     1116
      363     1117    4                 IF NE > %NR_BASIS_EST THEN
      364     1118    4                   CALL LIMCHK(15,NE,%NR_BASIS_EST,
      365     1119    4                   'The maximum number of basis items in a state has been exceeded: %%'
              1119                                );
      366     1120    4                 BKEY.ELEM.PROD(NE)=BIN_TREE2.PROD(CN);
      367     1121    4                 BKEY.ELEM.DOT_POS(NE)=BIN_TREE2.DOT_POS(CN);
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:12   
      368     1122
      369     1123    4                 NE=NE+1;
      370     1124
      371     1125    4                 NN=BIN_TREE1.RLINK(CN);
      372     1126
      373     1127    4                 IF NN>CN THEN
      374     1128    5                 DO WHILE(NN>CN);
      375     1129    5                    CN=NN;
      376     1130    5                    NN=BIN_TREE1.LLINK(NN);
      377     1131    5                    END;
      378     1132    4                 ELSE
      379     1133    4                    CN=NN;
      380     1134
      381     1135    4                 IF SYM_AFTER=0 THEN
      382     1136    4                    SYM_AFTER=NR_SYMS+1;
      383     1137
      384     1138    4                 END /* WHILE SAME SYM_AFTER */;
      385     1139
      386     1140    3              BKEY.W.ELEM_COUNT=NE;
      387     1141    3              BKEY.W.SYM_AFTER=SA;
      388     1142    3              BKEY.W.KEY_TYPE=0 /* value not used yet */;
      389     1143    3              CALL ENTER_KEY(BKEY,KEY$);
      390     1144
      391     1145    3              IF SA>0
      392     1146    3                AND SA<=NR_TERM THEN
      393     1147    3                 INCL$=ADDR(NIL);
      394     1148    3              ELSE
      395     1149    4              DO;
      396     1150    4                 INCL$=BKEY$;
      397     1151    4                 CALL MEM_TRUNC(INCL$,INCL_LEN);
      398     1152    4                 CALL GETNEW(BKEY$,LENGTHW(KEY_B));
      399     1153    4                 END;
      400     1154
      401     1155    3              IF C_SET.NR_ELEM<=%NR_ELEM_MAX THEN
      402     1156    4              DO;
      403     1157    4                 C_SET.ELEM.INCL$(C_SET.NR_ELEM)=INCL$;
      404     1158    4                 C_SET.ELEM.KEY$(C_SET.NR_ELEM)=KEY$;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:13   
      405     1159    4                 END;
      406     1160
      407     1161    3              C_SET.NR_ELEM=C_SET.NR_ELEM+1;
      408     1162
      409     1163    3              END MORE_CELEM;
      410     1164
      411     1165    2           I=C_SET.NR_ELEM;
      412     1166    2           IF I>%NR_ELEM_MAX THEN
      413     1167    2              CALL LIMCHK(15,I,%NR_ELEM_MAX,
      414     1168    2                'The maximum configuration set size has been exceeded: %%');
      415     1169
      416     1170
      417     1171        /* There is unused dynamic memory lying around.
      418     1172           Free it back up before asking for space for
      419     1173           the configuration set */
      420     1174
      421     1175    2           C$=BKEY$;
      422     1176
      423     1177    2           CALL MEM_TRUNC(C$,
      424     1178    2             LENGTHW(C_SET)-(%NR_ELEM_MAX-C_SET.NR_ELEM) *
      425     1179    2             LENGTHW(C_SET.ELEM(0)));
      426     1180
      427     1181
      428     1182        /* Ask for dynamic memory space again for building
      429     1183           keys. */
      430     1184
      431     1185    2           CALL GETNEW(BKEY$,LENGTHW(KEY_B));
      432     1186
      433     1187    2           CONFIG_NUMBER=NR_CONFIG;
      434     1188    2           NR_CONFIG=NR_CONFIG+1;
      435     1189    2           C$->C_SET_B.C_SET#=CONFIG_NUMBER;
      436     1190
      437     1191    2           IF NR_CONFIG>%NR_CONFIG_MAX THEN
      438     1192    2              CALL LIMCHK(15,NR_CONFIG,%NR_CONFIG_MAX,
      439     1193    2                'The maximum number of configuration sets has been exceeded: %%');
      440     1194
      441     1195    2           C#_TO_$(CONFIG_NUMBER)=C$;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:14   
      442     1196
      443     1197    2           C$->C_SET_B.KEY$=ADDR(KEY);
      444     1198    2           C$->C_SET_B.NR_ELEM=C_SET.NR_ELEM;
      445     1199
      446     1200    2           KEY.KEY_VAL$=C$;
      447     1201
      448     1202    3           DO I=C_SET.NR_ELEM-1 DOWNTO 0;
      449     1203    3              KEY$=C_SET.ELEM.KEY$(I);
      450     1204    3              C$->C_SET_B.ELEM.KEY$(I)=KEY$;
      451     1205    3              INCL$=C_SET.ELEM.INCL$(I);
      452     1206    3              C$->C_SET_B.ELEM.INCL$(I)=INCL$;
      453     1207    3              IF INCL$~=ADDR(NIL) THEN
      454     1208    4              DO;
      455     1209    4                 INCL$->INCL_B.KEY$=KEY$;
      456     1210    4                 INCL$->INCL_B.SET_STATE=SET_STATE_UNCALC;
      457     1211    4                 INCL$->INCL_B.INCL_HEAD$=ADDR(NIL);
      458     1212
      459     1213    4                 IF KEY$->KEY_B.W.SYM_AFTER=0 THEN
      460     1214    5                 DO;
      461     1215    5                    KEY$->KEY_B.FOLLOW$=INCL$;
      462     1216    5                    C$->C_SET_B.ELEM.INCL$(I)=ADDR(NIL);
      463     1217    5                    END;
      464     1218    4                 END;
      465     1219
      466     1220
      467     1221    3              END;
      468     1222
      469     1223    2   END CNFG_BUILD;
      470     1224        %EJECT;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:15   
      471     1225        /* Main body of CNFG */
      472     1226
      473     1227    2           DO NR_CONFIG=%NR_CONFIG_MAX DOWNTO 0;
      474     1228    2              C#_TO_$(NR_CONFIG)=ADDR(NIL);
      475     1229    2              END;
      476     1230
      477     1231    2           DO NR_CONFIG=0 TO HASH_MOD;
      478     1232    2              HASH_HEAD$(NR_CONFIG)=ADDR(NIL);
      479     1233    2              END;
      480     1234
      481     1235    1           INCL_LEN=LENGTHW(INCL_B)+SET_LENGTHW-1;
      482     1236    1           NR_CONFIG=0;
      483     1237    1           NR_CTHREAD=0;
      484     1238    1           NR_CTHREAD_FOUND=0;
      485     1239    1           MAX_DEP=0;
      486     1240    1           AVG_DEP=0;
      487     1241
      488     1242        /* BUILD BASIS SET FOR THE FIRST CONFIGURATION */
      489     1243
      490     1244    1           CALL GETNEW(BKEY$,LENGTHW(KEY_B));
      491     1245    1           BKEY.W.KEY_TYPE=0 /* value not used yet */;
      492     1246    1           BKEY.W.ELEM_COUNT=1;
      493     1247    1           BKEY.W.SYM_AFTER=RIGHT_PARTS(1);
      494     1248    1           BKEY.ELEM.PROD(0)=0;
      495     1249    1           BKEY.ELEM.DOT_POS(0)=0;
      496     1250
      497     1251    1           BKEY.KEY_VAL$=ADDR(NIL);
      498     1252    1           BUILD_HEAD$=ADDR(NIL);
      499     1253
      500     1254    1           CALL ENTER_KEY(BKEY,KEY$);
      501     1255
      502     1256    1           BKEY$=ADDR(BKEY.ELEM(1));
      503     1257    1           CALL MEM_TRUNC(BKEY$,LENGTHW(KEY_B));
      504     1258
      505     1259    2           DO WHILE(BUILD_HEAD$~=ADDR(NIL));
      506     1260    2              KEY$=BUILD_HEAD$;
      507     1261    2              BUILD_HEAD$=KEY$->KEY_B.KEY_VAL$;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:16   
      508     1262    2              KEY$->KEY_B.KEY_VAL$=ADDR(NIL);
      509     1263    2              CALL CNFG_BUILD(KEY$->KEY_B);
      510     1264    2              END;
      511     1265
      512     1266    1           CALL MEM_TRUNC(BKEY$);
      513     1267
      514     1268    1           CALL LIMCHK(0,NR_CONFIG,%NR_CONFIG_MAX,
      515     1269    1             'The maximum number of configuration sets has been exceeded: %%');
      516     1270
      517     1271    1   END;

PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:17   
--  Include file information  --

   LR_CNFG_EXT.:Z8A6TOU  cannot be made into a system file and is referenced.
   LR_IO_EXT.:Z8A6TOU  cannot be made into a system file and is referenced.
   LR_GRAM_EXT.:Z8A6TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure CNFG.

   Procedure CNFG requires 831 words for executable code.
   Procedure CNFG requires 47658 words of local(AUTO) storage.

    No errors detected in file LR_CNFG.:Z8A6TSI    .

PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:18   

 Object Unit name= CNFG                                       File name= LR_CNFG.:Z8A6TOU
 UTS= AUG 09 '97 09:26:17.56 SAT                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  LblCom even  none     1      1  OUT_DCBN
    1   DCB   even  none     0      0  M$OU
    2   DCB   even  none     0      0  M$SO
    3   DCB   even  none     0      0  M$LO
    4   DCB   even  none     0      0  M$SI
    5   DCB   even  none     0      0  M$UI
    6  LblCom even  none  1401   2571  SYM_PTRS
    7  LblCom even  none  4001   7641  RIGHT_PARTS
    8  LblCom even  none  3002   5672  PROD
    9  LblCom even  none     1      1  NR_PROD
   10  LblCom even  none     1      1  NR_SYMS
   11  LblCom even  none     1      1  NR_TERM
   12  LblCom even  none     1      1  LAST_ACT
   13  LblCom even  none     1      1  LAST_NULL
   14  LblCom even  none     1      1  NR_ONRIGHT
   15  LblCom even  none     1      1  NR_NT
   16  LblCom even  none     1      1  PROD_LEN_MAX_EVER
   17  LblCom even  none     1      1  LAST_ORDER_SPECIFIED
   18  LblCom even  none     1      1  SEMANTIC_ORDERING
   19  LblCom even  none     1      1  ERR_SEV
   20  LblCom even  none     1      1  SET_LENGTHB
   21  LblCom even  none     1      1  SET_LENGTHW
   22  LblCom even  none     1      1  EOF_SYMBOL_PTR
   23  LblCom even  none     1      1  ERROR_SYMBOL_PTR
   24  LblCom even  none     1      1  BOF_SYMBOL_PTR
   25  LblCom even  none     1      1  OPTIONS
   26  LblCom even  none    26     32  OPTIONS_TEXT
   27  LblCom even  none   128    200  INSTR
   28  LblCom even  none     1      1  INSTR_LISTED
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:19   
   29  LblCom even  none     1      1  INSTR_LEN
   30  LblCom even  none     1      1  INSTR_INDX
   31  LblCom even  none     1      1  EOF_FLAG
   32  LblCom even  none     3      3  KEY_REC
   33  LblCom even  none    28     34  LINE
   34  LblCom even  none     1      1  LINELEN
   35  LblCom even  none   205    315  TSTATS
   36  LblCom even  none  2201   4231  C#_TO_$
   37  LblCom even  none     1      1  NR_CONFIG
   38  LblCom even  none     1      1  INIT_CONFIG
   39  LblCom even  none     1      1  MAX_BASIS_ITEMS
   40  LblCom even  none     1      1  MAX_TOTAL_ITEMS
   41  LblCom even  none     1      1  LAST_BINSRCH_ONLY
   42  LblCom even  none     1      1  LAST_BOTH_BITBIN
   43  RoData even  UTS     59     73  CNFG
   44   Proc  even  none   831   1477  CNFG
   45  RoData even  none    35     43  CNFG

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
    44      0   yes            yes      Std        0  CNFG

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       2 GETNEW
         yes           Std       2 MEM_TRUNC
         yes           Std       4 LIMCHK
         yes           Std       2 BITZAP
         yes           Std       6 DIAG
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:20   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$OU                                  M$SO                                  M$LO
     M$SI                                  M$UI

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     NULLSID                               ISSID
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:21   


        1        1        /*M* CNFG => BUILDS CONFIGURATION SETS */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7
        8        8
        9        9
       10       10
       11       11
       12       12        CNFG:   PROC;

     12 44 000000   000000 700200 xent  CNFG         TSX0  ! X66_AUTO_0
        44 000001   135052 000000                    ZERO    47658,0
        44 000002   100000 221203                    LDX1  ! 32768,DU
        44 000003   235044 634711                    EPPR4 ! BIN_TREE1+13001,X1,AUTO
        44 000004   001331 710000 44                 TRA     s:1227

       13       13
       14       14
       15       15        /*D*
       16       16               NAME: CNFG
       17       17            PURPOSE: BUILD THE CONFIGURATION SETS(STATES) FROM
       18       18                      THE GRAMMAR SPECIFICATION.
       19       19        */
       20       20
       21       21
       22       22        %INCLUDE LR_GRAM_EXT;
       23      561        %INCLUDE LR_CNFG_EXT;
       24      714    1   DCL INCL_LEN         SBIN;
       25      715    1   DCL BUILD_HEAD$      PTR;
       26      716        %KEY_(NAME=BKEY,STCLASS="BASED(BKEY$)");
       27      733    1   DCL BKEY$            PTR;
       28      734    1   DCL KEY$             PTR;
       29      735    1   DCL NR_CTHREAD       SBIN;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:22   
       30      736    1   DCL NR_CTHREAD_FOUND SBIN;
       31      737    1   DCL MAX_DEP          SBIN;
       32      738    1   DCL AVG_DEP          SBIN;
       33      739    1   DCL HASH_HEAD$(0:HASH_MOD) PTR;
       34      740
       35      741    1   DCL LIMCHK           ENTRY(4);
       36      742    1   DCL DIAG             ENTRY(6);
       37      743        %EJECT;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:23   
       38      744    1   ENTER_KEY:PROC(KEY,KEY$);

    744 44 000005   100000 220203       ENTER_KEY    LDX0  ! 32768,DU
        44 000006   235030 741310                    STX1  ! BIN_TREE1+12989,X0,AUTO

       39      745
       40      746
       41      747          /* This key value is used for two purposes:
       42      748            1) To record the particular productions & dot positions
       43      749               having the same symbol after the dot position
       44      750               in a configuration set.
       45      751            2) To serve as a key to identify a configuration set. The
       46      752               basis set for the new configuration is all the productions
       47      753               with the dot position advanced by 1. */
       48      754
       49      755        %KEY_;
       50      772
       51      773    2   DCL KEY$         PTR;
       52      774    2   DCL CUR_KEY$     PTR;
       53      775    2   DCL SUC_KEY$     PTR;
       54      776    2   DCL DEP          SBIN;
       55      777    2   DCL CMPR_RESULT  SBIN;
       56      778    2   DCL HASHVAL      SBIN;
       57      779    2   DCL I            SBIN;
       58      780    2   DCL J            SBIN;
       59      781    2   DCL LENW         SBIN;
       60      782    2   DCL LENC         SBIN;
       61      783
       62      784
       63      785    2           LENW=LENGTHW(KEY.W)+KEY.W.ELEM_COUNT*LENGTHW(KEY.ELEM(0));

    785 44 000007   235031 470510                    LDP0    BIN_TREE1+12990,X0,AUTO
        44 000010   000005 236100                    LDQ     5,,PR0
        44 000011   000022 736000                    QLS     18
        44 000012   000022 732000                    QRS     18
        44 000013   000002 036007                    ADLQ    2,DL
        44 000014   235042 756110                    STQ     BIN_TREE1+12999,X0,AUTO
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:24   

       64      786    2           KEY.W.SET_STATE=SET_STATE_UNCALC;

    786 44 000015   235031 470510                    LDP0    BIN_TREE1+12990,X0,AUTO
        44 000016   000000 236003                    LDQ     0,DU
        44 000017   000005 552140                    STBQ    5,'40'O,PR0

       65      787
       66      788        /* Compute hash value. */
       67      789
       68      790    2           HASHVAL=MOD((KEY.W.ELEM_COUNT*HASH_MUL+KEY.W.SYM_AFTER)

    790 44 000020   000005 236100                    LDQ     5,,PR0
        44 000021   000022 736000                    QLS     18
        44 000022   000022 732000                    QRS     18
        44 000023   000057 402007                    MPY     47,DL
        44 000024   000004 036100                    ADLQ    4,,PR0
        44 000025   000057 402007                    MPY     47,DL
        44 000026   000006 036100                    ADLQ    6,,PR0
        44 000027   000401 506007                    DIV     257,DL
        44 000030   235037 755110                    STA     BIN_TREE1+12996,X0,AUTO

       69      791    2             *HASH_MUL+KEY.KEY_W(2),HASH_MOD);
       70      792
       71      793    2           IF HASHVAL<0 THEN

    793 44 000031   000000 115003                    CMPA    0,DU
        44 000032   000035 605000 44                 TPL     s:796

       72      794    2              HASHVAL=HASHVAL+HASH_MOD;

    794 44 000033   000401 236007                    LDQ     257,DL
        44 000034   235037 056110                    ASQ     BIN_TREE1+12996,X0,AUTO

       73      795
       74      796    2           CUR_KEY$=PINCRW(ADDR(HASH_HEAD$(HASHVAL)),

PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:25   
    796 44 000035   235037 235110                    LDA     BIN_TREE1+12996,X0,AUTO
        44 000036   235031 470510                    LDP0    BIN_TREE1+12990,X0,AUTO
        44 000037   400000 450500                    STP0    0,,PR4
        44 000040   400000 236100                    LDQ     0,,PR4
        44 000041   000022 772000                    QRL     18
        44 000042   400001 450500                    STP0    1,,PR4
        44 000043   400002 756100                    STQ     2,,PR4
        44 000044   400001 236100                    LDQ     1,,PR4
        44 000045   000022 772000                    QRL     18
        44 000046   400002 136100                    SBLQ    2,,PR4
        44 000047   400003 756100                    STQ     3,,PR4
        44 000050   000044 733000                    LRS     36
        44 000051   400003 036100                    ADLQ    3,,PR4
        44 000052   200013 631506                    EPPR1   HASH_HEAD$,QL,AUTO
        44 000053   235033 451510                    STP1    BIN_TREE1+12992,X0,AUTO

       75      797    2             POFFW(ADDR(KEY),ADDR(KEY.LLINK$)));
       76      798
       77      799    2           CMPR_RESULT=0;

    799 44 000054   235036 450110                    STZ     BIN_TREE1+12995,X0,AUTO

       78      800
       79      801    2           SUC_KEY$=HASH_HEAD$(HASHVAL);

    801 44 000055   235037 235110                    LDA     BIN_TREE1+12996,X0,AUTO
        44 000056   200013 236105                    LDQ     HASH_HEAD$,AL,AUTO
        44 000057   235034 756110                    STQ     BIN_TREE1+12993,X0,AUTO

       80      802
       81      803    2           DEP=0;

    803 44 000060   235035 450110                    STZ     BIN_TREE1+12994,X0,AUTO

       82      804    2           IF KEY.W.SYM_AFTER~=0 THEN

    804 44 000061   235031 470510                    LDP0    BIN_TREE1+12990,X0,AUTO
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:26   
        44 000062   000004 235100                    LDA     4,,PR0
        44 000063   000154 600000 44                 TZE     s:845

       83      805    3   SEARCHING: DO WHILE(SUC_KEY$~=ADDR(NIL));

    805 44 000064   000151 710000 44    SEARCHING    TRA     s:843

       84      806    3              CUR_KEY$=SUC_KEY$;

    806 44 000065   100000 220003                    LDX0    32768,DU
        44 000066   235034 236110                    LDQ     BIN_TREE1+12993,X0,AUTO
        44 000067   235033 756110                    STQ     BIN_TREE1+12992,X0,AUTO

       85      807    3              DEP=DEP+1;

    807 44 000070   235035 054110                    AOS     BIN_TREE1+12994,X0,AUTO

       86      808
       87      809    3              CMPR_RESULT=KEY.KEY_W(0)-CUR_KEY$->KEY_B.KEY_W(0);

    809 44 000071   235031 470510                    LDP0    BIN_TREE1+12990,X0,AUTO
        44 000072   235033 471510                    LDP1    BIN_TREE1+12992,X0,AUTO
        44 000073   000004 236100                    LDQ     4,,PR0
        44 000074   100004 136100                    SBLQ    4,,PR1
        44 000075   235036 756110                    STQ     BIN_TREE1+12995,X0,AUTO

       88      810    3              IF CMPR_RESULT=0 THEN

    810 44 000076   000125 601000 44                 TNZ     s:827

       89      811    4              DO;

       90      812
       91      813    4                 CMPR_RESULT=KEY.KEY_W(1)-CUR_KEY$->KEY_B.KEY_W(1);

    813 44 000077   235031 470510                    LDP0    BIN_TREE1+12990,X0,AUTO
        44 000100   235033 471510                    LDP1    BIN_TREE1+12992,X0,AUTO
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:27   
        44 000101   000005 236100                    LDQ     5,,PR0
        44 000102   100005 136100                    SBLQ    5,,PR1
        44 000103   235036 756110                    STQ     BIN_TREE1+12995,X0,AUTO

       92      814    4                 IF CMPR_RESULT=0 THEN

    814 44 000104   000125 601000 44                 TNZ     s:827

       93      815    5                 DO;

       94      816
       95      817    5                    I=2;

    817 44 000105   000002 235007                    LDA     2,DL
        44 000106   235040 755110                    STA     BIN_TREE1+12997,X0,AUTO

       96      818
       97      819    6                    DO WHILE(CMPR_RESULT=0

    819 44 000107   000120 710000 44                 TRA     s:823

       98      820    6                      AND I<LENW);
       99      821    6                       CMPR_RESULT=KEY.KEY_W(I)-CUR_KEY$->KEY_B.KEY_W(I);

    821 44 000110   100000 220003                    LDX0    32768,DU
        44 000111   235031 470510                    LDP0    BIN_TREE1+12990,X0,AUTO
        44 000112   235040 235110                    LDA     BIN_TREE1+12997,X0,AUTO
        44 000113   235033 471510                    LDP1    BIN_TREE1+12992,X0,AUTO
        44 000114   000004 236105                    LDQ     4,AL,PR0
        44 000115   100004 136105                    SBLQ    4,AL,PR1
        44 000116   235036 756110                    STQ     BIN_TREE1+12995,X0,AUTO

      100      822    6                       I=I+LENGTHW(KEY.ELEM(0));

    822 44 000117   235040 054110                    AOS     BIN_TREE1+12997,X0,AUTO

      101      823    6                       END;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:28   

    823 44 000120   235036 235110                    LDA     BIN_TREE1+12995,X0,AUTO
        44 000121   000125 601000 44                 TNZ     s:827
        44 000122   235040 236110                    LDQ     BIN_TREE1+12997,X0,AUTO
        44 000123   235042 116110                    CMPQ    BIN_TREE1+12999,X0,AUTO
        44 000124   000110 604000 44                 TMI     s:821

      102      824    5                    END;

      103      825    4                 END;

      104      826
      105      827    3              IF CMPR_RESULT>0 THEN

    827 44 000125   235036 235110                    LDA     BIN_TREE1+12995,X0,AUTO
        44 000126   000133 604400 44                 TMOZ    s:832

      106      828    4              DO;

      107      829    4                 SUC_KEY$=CUR_KEY$->KEY_B.RLINK$;

    829 44 000127   235033 470510                    LDP0    BIN_TREE1+12992,X0,AUTO
        44 000130   000001 236100                    LDQ     1,,PR0
        44 000131   235034 756110                    STQ     BIN_TREE1+12993,X0,AUTO

      108      830    4                 END;

    830 44 000132   000151 710000 44                 TRA     s:843

      109      831    3              ELSE
      110      832    3                 IF CMPR_RESULT<0 THEN

    832 44 000133   000140 605000 44                 TPL     s:838

      111      833    4                 DO;

      112      834    4                    SUC_KEY$=CUR_KEY$->KEY_B.LLINK$;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:29   

    834 44 000134   235033 470510                    LDP0    BIN_TREE1+12992,X0,AUTO
        44 000135   000000 236100                    LDQ     0,,PR0
        44 000136   235034 756110                    STQ     BIN_TREE1+12993,X0,AUTO

      113      835    4                    END;

    835 44 000137   000151 710000 44                 TRA     s:843

      114      836    3                 ELSE
      115      837    4                 DO;

      116      838    4                    KEY$=CUR_KEY$;

    838 44 000140   235032 470510                    LDP0    BIN_TREE1+12991,X0,AUTO
        44 000141   235033 236110                    LDQ     BIN_TREE1+12992,X0,AUTO
        44 000142   000000 756100                    STQ     0,,PR0

      117      839    4                    NR_CTHREAD_FOUND=NR_CTHREAD_FOUND+1;

    839 44 000143   200010 054100                    AOS     NR_CTHREAD_FOUND,,AUTO

      118      840    4                    AVG_DEP=AVG_DEP+DEP;

    840 44 000144   200012 236100                    LDQ     AVG_DEP,,AUTO
        44 000145   235035 036110                    ADLQ    BIN_TREE1+12994,X0,AUTO
        44 000146   200012 756100                    STQ     AVG_DEP,,AUTO

      119      841    4                    RETURN;

    841 44 000147   235030 221310                    LDX1  ! BIN_TREE1+12989,X0,AUTO
        44 000150   000001 702211                    TSX2  ! 1,X1

      120      842    4                    END;
      121      843    3              END SEARCHING;

    843 44 000151   235034 236110                    LDQ     BIN_TREE1+12993,X0,AUTO
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:30   
        44 000152   000000 116000 45                 CMPQ    0
        44 000153   000065 601000 44                 TNZ     s:806

      122      844
      123      845    2           MAX_DEP=MAXIMUM(MAX_DEP,DEP);

    845 44 000154   235035 236110                    LDQ     BIN_TREE1+12994,X0,AUTO
        44 000155   200011 116100                    CMPQ    MAX_DEP,,AUTO
        44 000156   000160 605000 44                 TPL     s:845+4
        44 000157   200011 236100                    LDQ     MAX_DEP,,AUTO
        44 000160   200011 756100                    STQ     MAX_DEP,,AUTO

      124      846
      125      847    2           IF KEY.W.SYM_AFTER~=0 THEN

    847 44 000161   235031 470510                    LDP0    BIN_TREE1+12990,X0,AUTO
        44 000162   000004 235100                    LDA     4,,PR0
        44 000163   000203 600000 44                 TZE     s:869

      126      848    3   CATALOG_KEY:DO;

    848 44 000164                       CATALOG_KEY  null
      127      849
      128      850    3              KEY.LLINK$=ADDR(NIL);

    850 44 000164   000000 236000 45                 LDQ     0
        44 000165   000000 756100                    STQ     0,,PR0

      129      851    3              KEY.RLINK$=ADDR(NIL);

    851 44 000166   000000 236000 45                 LDQ     0
        44 000167   000001 756100                    STQ     1,,PR0

      130      852
      131      853    3              IF CMPR_RESULT>0 THEN

    853 44 000170   235036 235110                    LDA     BIN_TREE1+12995,X0,AUTO
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:31   
        44 000171   000175 604400 44                 TMOZ    s:859

      132      854    4              DO;

      133      855    4                 CUR_KEY$->KEY_B.RLINK$=ADDR(KEY);

    855 44 000172   235033 471510                    LDP1    BIN_TREE1+12992,X0,AUTO
        44 000173   100001 450500                    STP0    1,,PR1

      134      856    4                 END;

    856 44 000174   000177 710000 44                 TRA     s:862

      135      857    3              ELSE
      136      858    4              DO;

      137      859    4                 CUR_KEY$->KEY_B.LLINK$=ADDR(KEY);

    859 44 000175   235033 471510                    LDP1    BIN_TREE1+12992,X0,AUTO
        44 000176   100000 450500                    STP0    0,,PR1

      138      860    4                 END;

      139      861
      140      862    3              NR_CTHREAD=NR_CTHREAD+1;

    862 44 000177   200007 054100                    AOS     NR_CTHREAD,,AUTO

      141      863
      142      864    3              KEY.KEY_VAL$=BUILD_HEAD$;

    864 44 000200   200004 236100                    LDQ     BUILD_HEAD$,,AUTO
        44 000201   000003 756100                    STQ     3,,PR0

      143      865    3              BUILD_HEAD$=ADDR(KEY);

    865 44 000202   200004 450500                    STP0    BUILD_HEAD$,,AUTO
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:32   

      144      866
      145      867    3              END CATALOG_KEY;

      146      868
      147      869    2           KEY$=ADDR(KEY);

    869 44 000203   235032 471510                    LDP1    BIN_TREE1+12991,X0,AUTO
        44 000204   100000 450500                    STP0    0,,PR1

      148      870
      149      871    2           KEY.SET$=ADDR(NIL);

    871 44 000205   000000 236000 45                 LDQ     0
        44 000206   000002 756100                    STQ     2,,PR0

      150      872
      151      873        /* The new key has been built in the front of
      152      874           dynamic memory space. The actual amount of
      153      875           space gotten corresponds to the maximum size
      154      876           of the key. Get more space so more keys may
      155      877           be built. */
      156      878
      157      879    2           BKEY$=ADDR(KEY.ELEM(KEY.W.ELEM_COUNT));

    879 44 000207   000005 236100                    LDQ     5,,PR0
        44 000210   000022 736000                    QLS     18
        44 000211   000022 732000                    QRS     18
        44 000212   000006 633506                    EPPR3   6,QL,PR0
        44 000213   200005 453500                    STP3    BKEY$,,AUTO

      158      880    2           IF KEY.W.SYM_AFTER>NR_TERM THEN

    880 44 000214   000004 236100                    LDQ     4,,PR0
        44 000215   000000 116000 11                 CMPQ    NR_TERM
        44 000216   000244 604400 44                 TMOZ    s:887

PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:33   
      159      881    3   ALLOCATE_READ_SET:DO;

    881 44 000217                       ALLOCATE_RE* null
      160      882    3              CALL MEM_TRUNC(BKEY$,LENGTHW(KEY_B)+INCL_LEN);

    882 44 000217   200003 235100                    LDA     INCL_LEN,,AUTO
        44 000220   000235 035007                    ADLA    157,DL
        44 000221   400000 755100                    STA     0,,PR4
        44 000222   400003 454500                    STP4    3,,PR4
        44 000223   200005 635500                    EPPR5   BKEY$,,AUTO
        44 000224   400002 455500                    STP5    2,,PR4
        44 000225   400002 630500                    EPPR0   2,,PR4
        44 000226   000001 631400 45                 EPPR1   1
        44 000227   000000 701000 xent               TSX1    MEM_TRUNC
        44 000230   000000 011000                    NOP     0
        44 000231   100000 221003                    LDX1    32768,DU
        44 000232   235044 634511                    EPPR4   BIN_TREE1+13001,X1,AUTO

      161      883    3              KEY.SET$=BKEY$;

    883 44 000233   100000 220003                    LDX0    32768,DU
        44 000234   235031 470510                    LDP0    BIN_TREE1+12990,X0,AUTO
        44 000235   200005 236100                    LDQ     BKEY$,,AUTO
        44 000236   000002 756100                    STQ     2,,PR0

      162      884    3              BKEY$=PINCRW(BKEY$,SET_LENGTHW);

    884 44 000237   000000 236000 21                 LDQ     SET_LENGTHW
        44 000240   000022 736000                    QLS     18
        44 000241   200005 036100                    ADLQ    BKEY$,,AUTO
        44 000242   200005 756100                    STQ     BKEY$,,AUTO

      163      885    3              END ALLOCATE_READ_SET;

    885 44 000243   000256 710000 44                 TRA     s:889

      164      886    2           ELSE
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:34   
      165      887    2              CALL MEM_TRUNC(BKEY$,LENGTHW(KEY_B));

    887 44 000244   000003 236000 45                 LDQ     3
        44 000245   400001 756100                    STQ     1,,PR4
        44 000246   200005 635500                    EPPR5   BKEY$,,AUTO
        44 000247   400000 455500                    STP5    0,,PR4
        44 000250   400000 630500                    EPPR0   0,,PR4
        44 000251   000001 631400 45                 EPPR1   1
        44 000252   000000 701000 xent               TSX1    MEM_TRUNC
        44 000253   000000 011000                    NOP     0
        44 000254   100000 221003                    LDX1    32768,DU
        44 000255   235044 634511                    EPPR4   BIN_TREE1+13001,X1,AUTO

      166      888
      167      889    2   END;

    889 44 000256   100000 220203                    LDX0  ! 32768,DU
        44 000257   235030 221310                    LDX1  ! BIN_TREE1+12989,X0,AUTO
        44 000260   000001 702211                    TSX2  ! 1,X1

      168      890        %EJECT;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:35   
      169      891    1   CNFG_BUILD:PROC(KEY);

    891 44 000261   200416 741300       CNFG_BUILD   STX1  ! HASH_HEAD$+259,,AUTO
        44 000262   000521 710000 44                 TRA     s:1051

      170      892
      171      893        %KEY_(NAME=KEY);
      172      910
      173      911        /* The key value passed as an argument
      174      912            is used to construct the basis set for
      175      913           a new configuration, and is used to uniquely
      176      914           identify the current configuration set */
      177      915
      178      916
      179      917        /* Build the new configuration set as
      180      918          a threaded binary tree. After the configuration
      181      919          set is built, then the tree may be traversed in
      182      920          in-order to get a sorted configuration set */
      183      921
      184      922    2   DCL C$ PTR;
      185      923    2   DCL KEY$ PTR;
      186      924    2   DCL INCL$ PTR;
      187      925        %C_SET_(NAME=C_SET,STCLASS=" ");
      188      942
      189      943        %EQU NR_SORT_MAX=NR_BASIS_EST * NR_BASIS_EST ;
      190      944
      191      945    2   DCL 1 BIN_TREE1(0:%NR_SORT_MAX) ,
      192      946    2         2 LLINK UBIN BYTE UNAL,
      193      947    2         2 RLINK UBIN BYTE UNAL,
      194      948    2         2 SYM_AFTER  UBIN HALF UNAL;
      195      949
      196      950    2   DCL 1 BIN_TREE2(0:%NR_SORT_MAX),
      197      951    2         2 PROD    SBIN HALF UNAL,
      198      952    2         2 DOT_POS SBIN HALF UNAL;
      199      953    2   DCL BIN_TREE2_W(0:%NR_SORT_MAX) REDEF BIN_TREE2 UBIN;
      200      954
      201      955    2   DCL SYM_AFTER UBIN HALF;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:36   
      202      956    2   DCL CN SBIN;
      203      957    2   DCL NN SBIN;
      204      958    2   DCL NE SBIN;
      205      959
      206      960    2   DCL NNODE SBIN;
      207      961
      208      962    2   DCL 1 TREE2,
      209      963    2         2 PROD SBIN HALF UNAL,
      210      964    2         2 DOT_POS SBIN HALF UNAL;
      211      965
      212      966    2   DCL TREE2_W REDEF TREE2 UBIN;
      213      967
      214      968
      215      969    2   DCL DO_LIST(0:NR_SYMS_MAX) BIT(1) UNAL;
      216      970    2   DCL DO_LIST_S(0:NR_SYMS_MAX) UBIN HALF UNAL;
      217      971    2   DCL DO_LIST_C      SBIN;
      218      972    2   DCL CONFIG_NUMBER  SBIN;
      219      973    2   DCL I              SBIN;
      220      974    2   DCL J              SBIN;
      221      975    2   DCL N              SBIN;
      222      976    2   DCL SA$ PTR;
      223      977    2   DCL SA             SBIN;
      224      978    2   DCL P              SBIN;
      225      979
      226      980        %EJECT;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:37   
      227      981    2   INSRT:  PROC ALTRET;

    981 44 000263   100000 220203       INSRT        LDX0  ! 32768,DU
        44 000264   235030 741310                    STX1  ! BIN_TREE1+12989,X0,AUTO

      228      982
      229      983    3   DCL CMPR_RESULT  SBIN;
      230      984    3   DCL N            SBIN;
      231      985    3   DCL M            SBIN;
      232      986
      233      987    3           SYM_AFTER=0;

    987 44 000265   000000 222003                    LDX2    0,DU
        44 000266   233445 742110                    STX2    BIN_TREE1+12234,X0,AUTO

      234      988    3           IF TREE2.DOT_POS<PROD.RIGHT_CNT(TREE2.PROD) THEN

    988 44 000267   233452 236110                    LDQ     BIN_TREE1+12239,X0,AUTO
        44 000270   000022 732000                    QRS     18
        44 000271   233452 721110                    LXL1    BIN_TREE1+12239,X0,AUTO
        44 000272   000001 736000                    QLS     1
        44 000273   000001 101006 8                  CMPX1   PROD+1,QL
        44 000274   000345 605000 44                 TPL     s:1001

      235      989    4           DO;

      236      990    4              SYM_AFTER=RIGHT_PARTS(PROD.RIGHT_START(TREE2.PROD)+TREE2.DOT_POS);

    990 44 000275   233452 236110                    LDQ     BIN_TREE1+12239,X0,AUTO
        44 000276   000022 732000                    QRS     18
        44 000277   400000 756100                    STQ     0,,PR4
        44 000300   233452 236110                    LDQ     BIN_TREE1+12239,X0,AUTO
        44 000301   000022 736000                    QLS     18
        44 000302   000022 732000                    QRS     18
        44 000303   400001 756100                    STQ     1,,PR4
        44 000304   400000 235100                    LDA     0,,PR4
        44 000305   000001 735000                    ALS     1
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:38   
        44 000306   000001 236005 8                  LDQ     PROD+1,AL
        44 000307   000022 736000                    QLS     18
        44 000310   000022 732000                    QRS     18
        44 000311   400001 036100                    ADLQ    1,,PR4
        44 000312   000001 736000                    QLS     1
        44 000313   400000 223003                    LDX3    -131072,DU
        44 000314   000113 100406                    MLR     fill='000'O
        44 000315   000000 000002 7                  ADSC9   RIGHT_PARTS,Q            cn=0,n=2
        44 000316   233445 000002                    ADSC9   BIN_TREE1+12234,X3,AUTO  cn=0,n=2

      237      991    4              IF SYM_AFTER>NR_TERM THEN

    991 44 000317   233445 236110                    LDQ     BIN_TREE1+12234,X0,AUTO
        44 000320   000022 772000                    QRL     18
        44 000321   000000 116000 11                 CMPQ    NR_TERM
        44 000322   000345 604400 44                 TMOZ    s:1001

      238      992    5              DO;

      239      993    5                 IF NOT DO_LIST(SYM_AFTER) THEN

    993 44 000323   000005 036000 45                 ADLQ    5
        44 000324   000000 066506                    CMPB    filb='0'B
        44 000325   200000 000001                    BDSC    0,Q,AUTO                 by=0,bit=0,n=1
        44 000326   000004 000022 45                 BDSC    4                        by=0,bit=0,n=18
        44 000327   000345 601000 44                 TNZ     s:1001

      240      994    6                 DO;

      241      995    6                    DO_LIST(SYM_AFTER)=TRUE;

    995 44 000330   233445 236110                    LDQ     BIN_TREE1+12234,X0,AUTO
        44 000331   000022 772000                    QRL     18
        44 000332   000005 036000 45                 ADLQ    5
        44 000333   003106 060400                    CSL     bolr='003'O
        44 000334   000006 000001 45                 BDSC    6                        by=0,bit=0,n=1
        44 000335   200000 000001                    BDSC    0,Q,AUTO                 by=0,bit=0,n=1
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:39   

      242      996    6                    DO_LIST_S(DO_LIST_C)=SYM_AFTER;

    996 44 000336   235017 235110                    LDA     BIN_TREE1+12980,X0,AUTO
        44 000337   000001 735000                    ALS     1
        44 000340   400000 035007                    ADLA    -131072,DL
        44 000341   000105 100513                    MLR     fill='000'O
        44 000342   233445 000002                    ADSC9   BIN_TREE1+12234,X3,AUTO  cn=0,n=2
        44 000343   233522 000002                    ADSC9   BIN_TREE1+12279,A,AUTO   cn=0,n=2

      243      997    6                    DO_LIST_C=DO_LIST_C+1;

    997 44 000344   235017 054110                    AOS     BIN_TREE1+12980,X0,AUTO

      244      998    6                    END;

      245      999    5                 END;

      246     1000    4              END;

      247     1001    3           N=0;

   1001 44 000345   235032 450110                    STZ     BIN_TREE1+12991,X0,AUTO

      248     1002    3           M=1;

   1002 44 000346   000001 235007                    LDA     1,DL
        44 000347   235033 755110                    STA     BIN_TREE1+12992,X0,AUTO

      249     1003    3           IF NNODE=0 THEN

   1003 44 000350   233451 235110                    LDA     BIN_TREE1+12238,X0,AUTO
        44 000351   000354 601000 44                 TNZ     SEARCHING

      250     1004    4           DO;

      251     1005    4              M=0;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:40   

   1005 44 000352   235033 450110                    STZ     BIN_TREE1+12992,X0,AUTO

      252     1006    4              CMPR_RESULT=0;

   1006 44 000353   235031 450110                    STZ     BIN_TREE1+12990,X0,AUTO

      253     1007    4              END;

      254     1008
      255     1009    4   SEARCHING:DO WHILE(N<M);

   1009 44 000354   235032 236110       SEARCHING    LDQ     BIN_TREE1+12991,X0,AUTO
        44 000355   235033 116110                    CMPQ    BIN_TREE1+12992,X0,AUTO
        44 000356   000417 605000 44                 TPL     s:1027

      256     1010    4              N=M;

   1010 44 000357   100000 220003                    LDX0    32768,DU
        44 000360   235033 235110                    LDA     BIN_TREE1+12992,X0,AUTO
        44 000361   235032 755110                    STA     BIN_TREE1+12991,X0,AUTO

      257     1011
      258     1012    4              CMPR_RESULT=SYM_AFTER-BIN_TREE1.SYM_AFTER(N);

   1012 44 000362   203533 236105                    LDQ     BIN_TREE1,AL,AUTO
        44 000363   777777 376007                    ANQ     -1,DL
        44 000364   400000 756100                    STQ     0,,PR4
        44 000365   233445 236110                    LDQ     BIN_TREE1+12234,X0,AUTO
        44 000366   000022 772000                    QRL     18
        44 000367   400000 136100                    SBLQ    0,,PR4
        44 000370   235031 756110                    STQ     BIN_TREE1+12990,X0,AUTO

      259     1013
      260     1014    4              IF CMPR_RESULT=0 THEN

   1014 44 000371   000402 601000 44                 TNZ     s:1021
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:41   

      261     1015    5              DO;

      262     1016    5                 CMPR_RESULT=TREE2_W-BIN_TREE2_W(N);

   1016 44 000372   235032 235110                    LDA     BIN_TREE1+12991,X0,AUTO
        44 000373   040000 621005                    EAX1    16384,AL
        44 000374   233452 236110                    LDQ     BIN_TREE1+12239,X0,AUTO
        44 000375   217500 136111                    SBLQ    BIN_TREE1+6117,X1,AUTO
        44 000376   235031 756110                    STQ     BIN_TREE1+12990,X0,AUTO

      263     1017    5                 IF CMPR_RESULT=0 THEN

   1017 44 000377   000402 601000 44                 TNZ     s:1021

      264     1018    5                    ALTRETURN;

   1018 44 000400   235030 221310                    LDX1  ! BIN_TREE1+12989,X0,AUTO
        44 000401   000000 702211                    TSX2  ! 0,X1

      265     1019    5                 END;
      266     1020
      267     1021    4              IF CMPR_RESULT>0 THEN

   1021 44 000402   000411 604400 44                 TMOZ    s:1024

      268     1022    4                 M=BIN_TREE1.RLINK(N);

   1022 44 000403   235032 235110                    LDA     BIN_TREE1+12991,X0,AUTO
        44 000404   203533 236105                    LDQ     BIN_TREE1,AL,AUTO
        44 000405   000022 772000                    QRL     18
        44 000406   000777 376007                    ANQ     511,DL
        44 000407   235033 756110                    STQ     BIN_TREE1+12992,X0,AUTO
        44 000410   000415 710000 44                 TRA     s:1025

      269     1023    4              ELSE
      270     1024    4                 M=BIN_TREE1.LLINK(N);
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:42   

   1024 44 000411   235032 235110                    LDA     BIN_TREE1+12991,X0,AUTO
        44 000412   203533 236105                    LDQ     BIN_TREE1,AL,AUTO
        44 000413   000033 772000                    QRL     27
        44 000414   235033 756110                    STQ     BIN_TREE1+12992,X0,AUTO

      271     1025    4              END SEARCHING;

   1025 44 000415   235032 116110                    CMPQ    BIN_TREE1+12991,X0,AUTO
        44 000416   000357 605400 44                 TPNZ    s:1010

      272     1026
      273     1027    3           NNODE=NNODE+1;

   1027 44 000417   233451 054110                    AOS     BIN_TREE1+12238,X0,AUTO

      274     1028    3           IF NNODE>%NR_SORT_MAX THEN

   1028 44 000420   233451 235110                    LDA     BIN_TREE1+12238,X0,AUTO
        44 000421   053744 115007                    CMPA    22500,DL
        44 000422   000440 604400 44                 TMOZ    s:1031

      275     1029    3              CALL LIMCHK(15,NNODE,%NR_SORT_MAX,

   1029 44 000423   000012 237000 45                 LDAQ    10
        44 000424   400002 757100                    STAQ    2,,PR4
        44 000425   400004 452500                    STP2    4,,PR4
        44 000426   400004 236100                    LDQ     4,,PR4
        44 000427   133451 036003                    ADLQ    46889,DU
        44 000430   000014 235000 45                 LDA     12
        44 000431   400000 757100                    STAQ    0,,PR4
        44 000432   400000 630500                    EPPR0   0,,PR4
        44 000433   000007 631400 45                 EPPR1   7
        44 000434   000000 701000 xent               TSX1    LIMCHK
        44 000435   000000 011000                    NOP     0
        44 000436   100000 221003                    LDX1    32768,DU
        44 000437   235044 634511                    EPPR4   BIN_TREE1+13001,X1,AUTO
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:43   

      276     1030    3                'The maximum configuration set size has been exceeded: %%');
      277     1031    3           BIN_TREE1.SYM_AFTER(NNODE)=SYM_AFTER;

   1031 44 000440   100000 220003                    LDX0    32768,DU
        44 000441   233451 235110                    LDA     BIN_TREE1+12238,X0,AUTO
        44 000442   233445 221110                    LDX1    BIN_TREE1+12234,X0,AUTO
        44 000443   203533 441105                    SXL1    BIN_TREE1,AL,AUTO

      278     1032    3           BIN_TREE2_W(NNODE)=TREE2_W;

   1032 44 000444   233451 235110                    LDA     BIN_TREE1+12238,X0,AUTO
        44 000445   040000 622005                    EAX2    16384,AL
        44 000446   233452 235110                    LDA     BIN_TREE1+12239,X0,AUTO
        44 000447   217500 755112                    STA     BIN_TREE1+6117,X2,AUTO

      279     1033
      280     1034    3           IF CMPR_RESULT>=0 THEN

   1034 44 000450   235031 235110                    LDA     BIN_TREE1+12990,X0,AUTO
        44 000451   000475 604000 44                 TMI     s:1042

      281     1035    4           DO;

      282     1036    4              BIN_TREE1.RLINK(N)=NNODE;

   1036 44 000452   235032 235110                    LDA     BIN_TREE1+12991,X0,AUTO
        44 000453   233451 236110                    LDQ     BIN_TREE1+12238,X0,AUTO
        44 000454   000022 736000                    QLS     18
        44 000455   203533 676105                    ERQ     BIN_TREE1,AL,AUTO
        44 000456   000777 376003                    ANQ     511,DU
        44 000457   203533 656105                    ERSQ    BIN_TREE1,AL,AUTO

      283     1037    4              BIN_TREE1.RLINK(NNODE)=M;

   1037 44 000460   233451 235110                    LDA     BIN_TREE1+12238,X0,AUTO
        44 000461   235033 236110                    LDQ     BIN_TREE1+12992,X0,AUTO
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:44   
        44 000462   000022 736000                    QLS     18
        44 000463   203533 676105                    ERQ     BIN_TREE1,AL,AUTO
        44 000464   000777 376003                    ANQ     511,DU
        44 000465   203533 656105                    ERSQ    BIN_TREE1,AL,AUTO

      284     1038    4              BIN_TREE1.LLINK(NNODE)=N;

   1038 44 000466   233451 235110                    LDA     BIN_TREE1+12238,X0,AUTO
        44 000467   235032 236110                    LDQ     BIN_TREE1+12991,X0,AUTO
        44 000470   000033 736000                    QLS     27
        44 000471   203533 676105                    ERQ     BIN_TREE1,AL,AUTO
        44 000472   777000 376003                    ANQ     -512,DU
        44 000473   203533 656105                    ERSQ    BIN_TREE1,AL,AUTO

      285     1039    4              END;

   1039 44 000474   000517 710000 44                 TRA     s:1046

      286     1040    3           ELSE
      287     1041    4           DO;

      288     1042    4              BIN_TREE1.LLINK(N)=NNODE;

   1042 44 000475   235032 235110                    LDA     BIN_TREE1+12991,X0,AUTO
        44 000476   233451 236110                    LDQ     BIN_TREE1+12238,X0,AUTO
        44 000477   000033 736000                    QLS     27
        44 000500   203533 676105                    ERQ     BIN_TREE1,AL,AUTO
        44 000501   777000 376003                    ANQ     -512,DU
        44 000502   203533 656105                    ERSQ    BIN_TREE1,AL,AUTO

      289     1043    4              BIN_TREE1.LLINK(NNODE)=M;

   1043 44 000503   233451 235110                    LDA     BIN_TREE1+12238,X0,AUTO
        44 000504   235033 236110                    LDQ     BIN_TREE1+12992,X0,AUTO
        44 000505   000033 736000                    QLS     27
        44 000506   203533 676105                    ERQ     BIN_TREE1,AL,AUTO
        44 000507   777000 376003                    ANQ     -512,DU
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:45   
        44 000510   203533 656105                    ERSQ    BIN_TREE1,AL,AUTO

      290     1044    4              BIN_TREE1.RLINK(NNODE)=N;

   1044 44 000511   233451 235110                    LDA     BIN_TREE1+12238,X0,AUTO
        44 000512   235032 236110                    LDQ     BIN_TREE1+12991,X0,AUTO
        44 000513   000022 736000                    QLS     18
        44 000514   203533 676105                    ERQ     BIN_TREE1,AL,AUTO
        44 000515   000777 376003                    ANQ     511,DU
        44 000516   203533 656105                    ERSQ    BIN_TREE1,AL,AUTO

      291     1045    4              END;

      292     1046    3   END INSRT;

   1046 44 000517   235030 221310                    LDX1  ! BIN_TREE1+12989,X0,AUTO
        44 000520   000001 702211                    TSX2  ! 1,X1

      293     1047
      294     1048        %EJECT;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:46   
      295     1049            /* Body of CNFG_BUILD */
      296     1050
      297     1051    2           NNODE=0;

   1051 44 000521   100000 220003                    LDX0    32768,DU
        44 000522   233451 450110                    STZ     BIN_TREE1+12238,X0,AUTO

      298     1052
      299     1053
      300     1054    2           CALL BITZAP(DO_LIST,NR_SYMS_MAX);

   1054 44 000523   000016 236000 45                 LDQ     14
        44 000524   400001 756100                    STQ     1,,PR4
        44 000525   400002 452500                    STP2    2,,PR4
        44 000526   400002 236100                    LDQ     2,,PR4
        44 000527   133453 036003                    ADLQ    46891,DU
        44 000530   400000 756100                    STQ     0,,PR4
        44 000531   400000 630500                    EPPR0   0,,PR4
        44 000532   000001 631400 45                 EPPR1   1
        44 000533   000000 701000 xent               TSX1    BITZAP
        44 000534   000000 011000                    NOP     0
        44 000535   100000 221003                    LDX1    32768,DU
        44 000536   235044 634511                    EPPR4   BIN_TREE1+13001,X1,AUTO

      301     1055    2           DO_LIST_C=0;

   1055 44 000537   100000 220003                    LDX0    32768,DU
        44 000540   235017 450110                    STZ     BIN_TREE1+12980,X0,AUTO

      302     1056
      303     1057    3           DO I=KEY.W.ELEM_COUNT-1 DOWNTO 0;

   1057 44 000541   200417 470500                    LDP0    @KEY,,AUTO
        44 000542   000005 236100                    LDQ     5,,PR0
        44 000543   000022 736000                    QLS     18
        44 000544   000022 732000                    QRS     18
        44 000545   000001 136007                    SBLQ    1,DL
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:47   
        44 000546   235021 756110                    STQ     BIN_TREE1+12982,X0,AUTO
        44 000547   000573 710000 44                 TRA     s:1062+3

      304     1058    3              TREE2.PROD=KEY.ELEM.PROD(I);

   1058 44 000550   100000 220003                    LDX0    32768,DU
        44 000551   235021 235110                    LDA     BIN_TREE1+12982,X0,AUTO
        44 000552   200417 470500                    LDP0    @KEY,,AUTO
        44 000553   000006 221105                    LDX1    6,AL,PR0
        44 000554   233452 741110                    STX1    BIN_TREE1+12239,X0,AUTO

      305     1059    3              TREE2.DOT_POS=KEY.ELEM.DOT_POS(I)+1;

   1059 44 000555   235021 235110                    LDA     BIN_TREE1+12982,X0,AUTO
        44 000556   000006 722105                    LXL2    6,AL,PR0
        44 000557   000001 623012                    EAX3    1,X2
        44 000560   233452 443110                    SXL3    BIN_TREE1+12239,X0,AUTO

      306     1060    3              IF TREE2.DOT_POS<=PROD.RIGHT_CNT(TREE2.PROD) THEN

   1060 44 000561   233452 236110                    LDQ     BIN_TREE1+12239,X0,AUTO
        44 000562   000022 732000                    QRS     18
        44 000563   000001 736000                    QLS     1
        44 000564   000001 103006 8                  CMPX3   PROD+1,QL
        44 000565   000570 605400 44                 TPNZ    s:1062

      307     1061    3                 CALL INSRT;

   1061 44 000566   000263 701000 44                 TSX1    INSRT
        44 000567   000000 011000                    NOP     0

      308     1062    3              END;

   1062 44 000570   100000 220003                    LDX0    32768,DU
        44 000571   000001 336007                    LCQ     1,DL
        44 000572   235021 056110                    ASQ     BIN_TREE1+12982,X0,AUTO
        44 000573   235021 235110                    LDA     BIN_TREE1+12982,X0,AUTO
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:48   
        44 000574   000550 605000 44                 TPL     s:1058

      309     1063
      310     1064    2           J=0;

   1064 44 000575   235022 450110                    STZ     BIN_TREE1+12983,X0,AUTO

      311     1065    2           TREE2.DOT_POS=0;

   1065 44 000576   000000 221003                    LDX1    0,DU
        44 000577   233452 441110                    SXL1    BIN_TREE1+12239,X0,AUTO

      312     1066    3           DO WHILE(J<DO_LIST_C);

   1066 44 000600   235022 236110                    LDQ     BIN_TREE1+12983,X0,AUTO
        44 000601   235017 116110                    CMPQ    BIN_TREE1+12980,X0,AUTO
        44 000602   000651 605000 44                 TPL     s:1091

      313     1067
      314     1068    3              SA=DO_LIST_S(J);

   1068 44 000603   100000 220003                    LDX0    32768,DU
        44 000604   235022 235110                    LDA     BIN_TREE1+12983,X0,AUTO
        44 000605   000001 735000                    ALS     1
        44 000606   400000 035007                    ADLA    -131072,DL
        44 000607   400000 221003                    LDX1    -131072,DU
        44 000610   000111 101505                    MRL     fill='000'O
        44 000611   233522 000002                    ADSC9   BIN_TREE1+12279,A,AUTO   cn=0,n=2
        44 000612   235025 000004                    ADSC9   BIN_TREE1+12986,X1,AUTO  cn=0,n=4

      315     1069    3              SA$=SYM_PTRS(SA);

   1069 44 000613   235025 722110                    LXL2    BIN_TREE1+12986,X0,AUTO
        44 000614   000000 236012 6                  LDQ     SYM_PTRS,X2
        44 000615   235024 756110                    STQ     BIN_TREE1+12985,X0,AUTO

      316     1070    3              P=SA$->SYMBOL.PROD_INDX;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:49   

   1070 44 000616   235024 470510                    LDP0    BIN_TREE1+12985,X0,AUTO
        44 000617   000006 235100                    LDA     6,,PR0
        44 000620   235026 755110                    STA     BIN_TREE1+12987,X0,AUTO

      317     1071
      318     1072    4              DO I=SA$->SYMBOL.PROD_CNT+P-1 DOWNTO P;

   1072 44 000621   235024 470510                    LDP0    BIN_TREE1+12985,X0,AUTO
        44 000622   000007 236100                    LDQ     7,,PR0
        44 000623   235026 036110                    ADLQ    BIN_TREE1+12987,X0,AUTO
        44 000624   000001 136007                    SBLQ    1,DL
        44 000625   235021 756110                    STQ     BIN_TREE1+12982,X0,AUTO
        44 000626   000637 710000 44                 TRA     s:1075+3

      319     1073    4                 TREE2.PROD=I;

   1073 44 000627   100000 220003                    LDX0    32768,DU
        44 000630   235021 721110                    LXL1    BIN_TREE1+12982,X0,AUTO
        44 000631   233452 741110                    STX1    BIN_TREE1+12239,X0,AUTO

      320     1074    4                 CALL INSRT ALTRET (DONE_PRODS);

   1074 44 000632   000263 701000 44                 TSX1    INSRT
        44 000633   000642 702000 44                 TSX2    DONE_PRODS

      321     1075    4                 END;

   1075 44 000634   100000 220003                    LDX0    32768,DU
        44 000635   000001 336007                    LCQ     1,DL
        44 000636   235021 056110                    ASQ     BIN_TREE1+12982,X0,AUTO
        44 000637   235021 236110                    LDQ     BIN_TREE1+12982,X0,AUTO
        44 000640   235026 116110                    CMPQ    BIN_TREE1+12987,X0,AUTO
        44 000641   000627 605000 44                 TPL     s:1073

   1073 44 000642   100000 221003       DONE_PRODS   LDX1    32768,DU
        44 000643   235044 634511                    EPPR4   BIN_TREE1+13001,X1,AUTO
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:50   

      322     1076
      323     1077    3   DONE_PRODS:;
      324     1078    3              J=J+1;

   1078 44 000644   100000 220003                    LDX0    32768,DU
        44 000645   235022 054110                    AOS     BIN_TREE1+12983,X0,AUTO

      325     1079    3              END;

   1079 44 000646   235022 236110                    LDQ     BIN_TREE1+12983,X0,AUTO
        44 000647   235017 116110                    CMPQ    BIN_TREE1+12980,X0,AUTO
        44 000650   000603 604000 44                 TMI     s:1068

      326     1080
      327     1081
      328     1082        /*The complete configuration set has been built.
      329     1083
      330     1084          Note that the nodes have been built in the binary
      331     1085          tree with the ordering SYM_AFTER,PROD,DOT_POS.
      332     1086
      333     1087          Because the binary tree has been built as a
      334     1088          threaded tree, traversing the tree to get the
      335     1089          elements in sorted order is a very simple task. */
      336     1090
      337     1091    2           IF NNODE=0 THEN

   1091 44 000651   233451 235110                    LDA     BIN_TREE1+12238,X0,AUTO
        44 000652   000655 601000 44                 TNZ     s:1094

      338     1092    2              RETURN;

   1092 44 000653   200416 221300                    LDX1  ! HASH_HEAD$+259,,AUTO
        44 000654   000001 702211                    TSX2  ! 1,X1

      339     1093
      340     1094    2           CN=0;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:51   

   1094 44 000655   233446 450110                    STZ     BIN_TREE1+12235,X0,AUTO

      341     1095    2           NN=1;

   1095 44 000656   000001 235007                    LDA     1,DL
        44 000657   233447 755110                    STA     BIN_TREE1+12236,X0,AUTO

      342     1096    2           SA=0;

   1096 44 000660   235025 450110                    STZ     BIN_TREE1+12986,X0,AUTO

      343     1097    2           BIN_TREE1.SYM_AFTER(0)=0;

   1097 44 000661   000000 221003                    LDX1    0,DU
        44 000662   203533 441100                    SXL1    BIN_TREE1,,AUTO

      344     1098    3           DO WHILE(NN>CN);

   1098 44 000663   233447 236110                    LDQ     BIN_TREE1+12236,X0,AUTO
        44 000664   233446 116110                    CMPQ    BIN_TREE1+12235,X0,AUTO
        44 000665   000676 604400 44                 TMOZ    s:1102

      345     1099    3              CN=NN;

   1099 44 000666   100000 220003                    LDX0    32768,DU
        44 000667   233447 235110                    LDA     BIN_TREE1+12236,X0,AUTO
        44 000670   233446 755110                    STA     BIN_TREE1+12235,X0,AUTO

      346     1100    3              NN=BIN_TREE1.LLINK(CN);

   1100 44 000671   203533 236105                    LDQ     BIN_TREE1,AL,AUTO
        44 000672   000033 772000                    QRL     27
        44 000673   233447 756110                    STQ     BIN_TREE1+12236,X0,AUTO

      347     1101    3              END;

PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:52   
   1101 44 000674   233446 116110                    CMPQ    BIN_TREE1+12235,X0,AUTO
        44 000675   000666 605400 44                 TPNZ    s:1099

      348     1102    2           C_SET.NR_ELEM=0;

   1102 44 000676   000000 221003                    LDX1    0,DU
        44 000677   200424 441100                    SXL1    C_SET+1,,AUTO

      349     1103
      350     1104    3   MORE_CELEM:DO WHILE(CN>0);

   1104 44 000700   233446 235110       MORE_CELEM   LDA     BIN_TREE1+12235,X0,AUTO
        44 000701   001134 604400 44                 TMOZ    s:1165

      351     1105
      352     1106    3              SYM_AFTER=BIN_TREE1.SYM_AFTER(CN);

   1106 44 000702   100000 220003                    LDX0    32768,DU
        44 000703   233446 235110                    LDA     BIN_TREE1+12235,X0,AUTO
        44 000704   203533 721105                    LXL1    BIN_TREE1,AL,AUTO
        44 000705   233445 741110                    STX1    BIN_TREE1+12234,X0,AUTO

      353     1107
      354     1108    3              IF SYM_AFTER<SA THEN

   1108 44 000706   233445 236110                    LDQ     BIN_TREE1+12234,X0,AUTO
        44 000707   000022 772000                    QRL     18
        44 000710   235025 116110                    CMPQ    BIN_TREE1+12986,X0,AUTO
        44 000711   000720 605000 44                 TPL     s:1111

      355     1109    3                 CALL DIAG(15,'ERROR => Internal error in CNFG, out of sorts%%');

   1109 44 000712   000017 630400 45                 EPPR0   15
        44 000713   000001 631400 45                 EPPR1   1
        44 000714   000000 701000 xent               TSX1    DIAG
        44 000715   000000 011000                    NOP     0
        44 000716   100000 221003                    LDX1    32768,DU
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:53   
        44 000717   235044 634511                    EPPR4   BIN_TREE1+13001,X1,AUTO

      356     1110
      357     1111    3              SA=SYM_AFTER;

   1111 44 000720   100000 220003                    LDX0    32768,DU
        44 000721   233445 236110                    LDQ     BIN_TREE1+12234,X0,AUTO
        44 000722   000022 772000                    QRL     18
        44 000723   235025 756110                    STQ     BIN_TREE1+12986,X0,AUTO

      358     1112
      359     1113    3              NE=0;

   1113 44 000724   233450 450110                    STZ     BIN_TREE1+12237,X0,AUTO

      360     1114
      361     1115    4              DO WHILE(BIN_TREE1.SYM_AFTER(CN)=SYM_AFTER);

   1115 44 000725   233446 235110                    LDA     BIN_TREE1+12235,X0,AUTO
        44 000726   203533 721105                    LXL1    BIN_TREE1,AL,AUTO
        44 000727   233445 101110                    CMPX1   BIN_TREE1+12234,X0,AUTO
        44 000730   001030 601000 44                 TNZ     s:1140

      362     1116
      363     1117    4                 IF NE > %NR_BASIS_EST THEN

   1117 44 000731   100000 220003                    LDX0    32768,DU
        44 000732   233450 235110                    LDA     BIN_TREE1+12237,X0,AUTO
        44 000733   000226 115007                    CMPA    150,DL
        44 000734   000752 604400 44                 TMOZ    s:1120

      364     1118    4                   CALL LIMCHK(15,NE,%NR_BASIS_EST,

   1118 44 000735   000022 237000 45                 LDAQ    18
        44 000736   400002 757100                    STAQ    2,,PR4
        44 000737   400004 452500                    STP2    4,,PR4
        44 000740   400004 236100                    LDQ     4,,PR4
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:54   
        44 000741   133450 036003                    ADLQ    46888,DU
        44 000742   000014 235000 45                 LDA     12
        44 000743   400000 757100                    STAQ    0,,PR4
        44 000744   400000 630500                    EPPR0   0,,PR4
        44 000745   000007 631400 45                 EPPR1   7
        44 000746   000000 701000 xent               TSX1    LIMCHK
        44 000747   000000 011000                    NOP     0
        44 000750   100000 221003                    LDX1    32768,DU
        44 000751   235044 634511                    EPPR4   BIN_TREE1+13001,X1,AUTO

      365     1119    4                  'The maximum number of basis items in a state has been exceeded: %%'
              1119                                );
      366     1120    4                 BKEY.ELEM.PROD(NE)=BIN_TREE2.PROD(CN);

   1120 44 000752   100000 220003                    LDX0    32768,DU
        44 000753   233450 235110                    LDA     BIN_TREE1+12237,X0,AUTO
        44 000754   400000 755100                    STA     0,,PR4
        44 000755   233446 235110                    LDA     BIN_TREE1+12235,X0,AUTO
        44 000756   040000 621005                    EAX1    16384,AL
        44 000757   217500 222111                    LDX2    BIN_TREE1+6117,X1,AUTO
        44 000760   200005 470500                    LDP0    BKEY$,,AUTO
        44 000761   400000 723100                    LXL3    0,,PR4
        44 000762   000006 742113                    STX2    6,X3,PR0

      367     1121    4                 BKEY.ELEM.DOT_POS(NE)=BIN_TREE2.DOT_POS(CN);

   1121 44 000763   233450 235110                    LDA     BIN_TREE1+12237,X0,AUTO
        44 000764   400000 755100                    STA     0,,PR4
        44 000765   233446 235110                    LDA     BIN_TREE1+12235,X0,AUTO
        44 000766   040000 623005                    EAX3    16384,AL
        44 000767   217500 724113                    LXL4    BIN_TREE1+6117,X3,AUTO
        44 000770   200005 470500                    LDP0    BKEY$,,AUTO
        44 000771   400000 725100                    LXL5    0,,PR4
        44 000772   000006 444115                    SXL4    6,X5,PR0

      368     1122
      369     1123    4                 NE=NE+1;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:55   

   1123 44 000773   233450 054110                    AOS     BIN_TREE1+12237,X0,AUTO

      370     1124
      371     1125    4                 NN=BIN_TREE1.RLINK(CN);

   1125 44 000774   233446 235110                    LDA     BIN_TREE1+12235,X0,AUTO
        44 000775   203533 236105                    LDQ     BIN_TREE1,AL,AUTO
        44 000776   000022 772000                    QRL     18
        44 000777   000777 376007                    ANQ     511,DL
        44 001000   233447 756110                    STQ     BIN_TREE1+12236,X0,AUTO

      372     1126
      373     1127    4                 IF NN>CN THEN

   1127 44 001001   233446 116110                    CMPQ    BIN_TREE1+12235,X0,AUTO
        44 001002   001016 604400 44                 TMOZ    s:1133

      374     1128    5                 DO WHILE(NN>CN);

   1128 44 001003   001017 604400 44                 TMOZ    s:1135

      375     1129    5                    CN=NN;

   1129 44 001004   100000 220003                    LDX0    32768,DU
        44 001005   233447 235110                    LDA     BIN_TREE1+12236,X0,AUTO
        44 001006   233446 755110                    STA     BIN_TREE1+12235,X0,AUTO

      376     1130    5                    NN=BIN_TREE1.LLINK(NN);

   1130 44 001007   233447 235110                    LDA     BIN_TREE1+12236,X0,AUTO
        44 001010   203533 236105                    LDQ     BIN_TREE1,AL,AUTO
        44 001011   000033 772000                    QRL     27
        44 001012   233447 756110                    STQ     BIN_TREE1+12236,X0,AUTO

      377     1131    5                    END;

PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:56   
   1131 44 001013   233446 116110                    CMPQ    BIN_TREE1+12235,X0,AUTO
        44 001014   001004 605400 44                 TPNZ    s:1129
        44 001015   001017 710000 44                 TRA     s:1135

      378     1132    4                 ELSE
      379     1133    4                    CN=NN;

   1133 44 001016   233446 756110                    STQ     BIN_TREE1+12235,X0,AUTO

      380     1134
      381     1135    4                 IF SYM_AFTER=0 THEN

   1135 44 001017   233445 221110                    LDX1    BIN_TREE1+12234,X0,AUTO
        44 001020   001024 601000 44                 TNZ     s:1138

      382     1136    4                    SYM_AFTER=NR_SYMS+1;

   1136 44 001021   000000 722000 10                 LXL2    NR_SYMS
        44 001022   000001 623012                    EAX3    1,X2
        44 001023   233445 743110                    STX3    BIN_TREE1+12234,X0,AUTO

      383     1137
      384     1138    4                 END /* WHILE SAME SYM_AFTER */;

   1138 44 001024   233446 235110                    LDA     BIN_TREE1+12235,X0,AUTO
        44 001025   203533 721105                    LXL1    BIN_TREE1,AL,AUTO
        44 001026   233445 101110                    CMPX1   BIN_TREE1+12234,X0,AUTO
        44 001027   000731 600000 44                 TZE     s:1117

      385     1139
      386     1140    3              BKEY.W.ELEM_COUNT=NE;

   1140 44 001030   233450 721110                    LXL1    BIN_TREE1+12237,X0,AUTO
        44 001031   200005 470500                    LDP0    BKEY$,,AUTO
        44 001032   000005 441100                    SXL1    5,,PR0

      387     1141    3              BKEY.W.SYM_AFTER=SA;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:57   

   1141 44 001033   200005 470500                    LDP0    BKEY$,,AUTO
        44 001034   235025 235110                    LDA     BIN_TREE1+12986,X0,AUTO
        44 001035   000004 755100                    STA     4,,PR0

      388     1142    3              BKEY.W.KEY_TYPE=0 /* value not used yet */;

   1142 44 001036   200005 470500                    LDP0    BKEY$,,AUTO
        44 001037   000000 236003                    LDQ     0,DU
        44 001040   000005 552120                    STBQ    5,'20'O,PR0

      389     1143    3              CALL ENTER_KEY(BKEY,KEY$);

   1143 44 001041   200421 630500                    EPPR0   KEY$,,AUTO
        44 001042   235032 450510                    STP0    BIN_TREE1+12991,X0,AUTO
        44 001043   200005 236100                    LDQ     BKEY$,,AUTO
        44 001044   235031 756110                    STQ     BIN_TREE1+12990,X0,AUTO
        44 001045   000005 701000 44                 TSX1    ENTER_KEY
        44 001046   000000 011000                    NOP     0

      390     1144
      391     1145    3              IF SA>0

   1145 44 001047   100000 220003                    LDX0    32768,DU
        44 001050   235025 235110                    LDA     BIN_TREE1+12986,X0,AUTO
        44 001051   001060 604400 44                 TMOZ    s:1150
        44 001052   235025 236110                    LDQ     BIN_TREE1+12986,X0,AUTO
        44 001053   000000 116000 11                 CMPQ    NR_TERM
        44 001054   001060 605400 44                 TPNZ    s:1150

      392     1146    3                AND SA<=NR_TERM THEN
      393     1147    3                 INCL$=ADDR(NIL);

   1147 44 001055   000000 236000 45                 LDQ     0
        44 001056   200422 756100                    STQ     INCL$,,AUTO
        44 001057   001106 710000 44                 TRA     s:1155

PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:58   
      394     1148    3              ELSE
      395     1149    4              DO;

      396     1150    4                 INCL$=BKEY$;

   1150 44 001060   200005 236100                    LDQ     BKEY$,,AUTO
        44 001061   200422 756100                    STQ     INCL$,,AUTO

      397     1151    4                 CALL MEM_TRUNC(INCL$,INCL_LEN);

   1151 44 001062   200003 630500                    EPPR0   INCL_LEN,,AUTO
        44 001063   400001 450500                    STP0    1,,PR4
        44 001064   200422 631500                    EPPR1   INCL$,,AUTO
        44 001065   400000 451500                    STP1    0,,PR4
        44 001066   400000 630500                    EPPR0   0,,PR4
        44 001067   000001 631400 45                 EPPR1   1
        44 001070   000000 701000 xent               TSX1    MEM_TRUNC
        44 001071   000000 011000                    NOP     0
        44 001072   100000 221003                    LDX1    32768,DU
        44 001073   235044 634511                    EPPR4   BIN_TREE1+13001,X1,AUTO

      398     1152    4                 CALL GETNEW(BKEY$,LENGTHW(KEY_B));

   1152 44 001074   000003 236000 45                 LDQ     3
        44 001075   400001 756100                    STQ     1,,PR4
        44 001076   200005 630500                    EPPR0   BKEY$,,AUTO
        44 001077   400000 450500                    STP0    0,,PR4
        44 001100   400000 630500                    EPPR0   0,,PR4
        44 001101   000001 631400 45                 EPPR1   1
        44 001102   000000 701000 xent               TSX1    GETNEW
        44 001103   000000 011000                    NOP     0
        44 001104   100000 221003                    LDX1    32768,DU
        44 001105   235044 634511                    EPPR4   BIN_TREE1+13001,X1,AUTO

      399     1153    4                 END;

      400     1154
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:59   
      401     1155    3              IF C_SET.NR_ELEM<=%NR_ELEM_MAX THEN

   1155 44 001106   200424 720100                    LXL0    C_SET+1,,AUTO
        44 001107   000621 100003                    CMPX0   401,DU
        44 001110   001127 603000 44                 TRC     s:1161

      402     1156    4              DO;

      403     1157    4                 C_SET.ELEM.INCL$(C_SET.NR_ELEM)=INCL$;

   1157 44 001111   200424 236100                    LDQ     C_SET+1,,AUTO
        44 001112   000001 736000                    QLS     1
        44 001113   000024 376000 45                 ANQ     20
        44 001114   000001 736000                    QLS     1
        44 001115   000000 621006                    EAX1    0,QL
        44 001116   200422 236100                    LDQ     INCL$,,AUTO
        44 001117   200430 756111                    STQ     C_SET+5,X1,AUTO

      404     1158    4                 C_SET.ELEM.KEY$(C_SET.NR_ELEM)=KEY$;

   1158 44 001120   200424 236100                    LDQ     C_SET+1,,AUTO
        44 001121   000001 736000                    QLS     1
        44 001122   000024 376000 45                 ANQ     20
        44 001123   000001 736000                    QLS     1
        44 001124   000000 621006                    EAX1    0,QL
        44 001125   200421 236100                    LDQ     KEY$,,AUTO
        44 001126   200427 756111                    STQ     C_SET+4,X1,AUTO

      405     1159    4                 END;

      406     1160
      407     1161    3              C_SET.NR_ELEM=C_SET.NR_ELEM+1;

   1161 44 001127   000001 621010                    EAX1    1,X0
        44 001130   200424 441100                    SXL1    C_SET+1,,AUTO

      408     1162
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:60   
      409     1163    3              END MORE_CELEM;

   1163 44 001131   100000 220003                    LDX0    32768,DU
        44 001132   233446 235110                    LDA     BIN_TREE1+12235,X0,AUTO
        44 001133   000702 605400 44                 TPNZ    s:1106

      410     1164
      411     1165    2           I=C_SET.NR_ELEM;

   1165 44 001134   200424 236100                    LDQ     C_SET+1,,AUTO
        44 001135   777777 376007                    ANQ     -1,DL
        44 001136   235021 756110                    STQ     BIN_TREE1+12982,X0,AUTO

      412     1166    2           IF I>%NR_ELEM_MAX THEN

   1166 44 001137   000620 116007                    CMPQ    400,DL
        44 001140   001156 604400 44                 TMOZ    s:1175

      413     1167    2              CALL LIMCHK(15,I,%NR_ELEM_MAX,

   1167 44 001141   000026 237000 45                 LDAQ    22
        44 001142   400002 757100                    STAQ    2,,PR4
        44 001143   400004 452500                    STP2    4,,PR4
        44 001144   400004 236100                    LDQ     4,,PR4
        44 001145   135021 036003                    ADLQ    47633,DU
        44 001146   000014 235000 45                 LDA     12
        44 001147   400000 757100                    STAQ    0,,PR4
        44 001150   400000 630500                    EPPR0   0,,PR4
        44 001151   000007 631400 45                 EPPR1   7
        44 001152   000000 701000 xent               TSX1    LIMCHK
        44 001153   000000 011000                    NOP     0
        44 001154   100000 221003                    LDX1    32768,DU
        44 001155   235044 634511                    EPPR4   BIN_TREE1+13001,X1,AUTO

      414     1168    2                'The maximum configuration set size has been exceeded: %%');
      415     1169
      416     1170
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:61   
      417     1171        /* There is unused dynamic memory lying around.
      418     1172           Free it back up before asking for space for
      419     1173           the configuration set */
      420     1174
      421     1175    2           C$=BKEY$;

   1175 44 001156   200005 236100                    LDQ     BKEY$,,AUTO
        44 001157   200420 756100                    STQ     C$,,AUTO

      422     1176
      423     1177    2           CALL MEM_TRUNC(C$,

   1177 44 001160   200424 236100                    LDQ     C_SET+1,,AUTO
        44 001161   000002 736000                    QLS     2
        44 001162   000030 376000 45                 ANQ     24
        44 001163   000010 036007                    ADLQ    8,DL
        44 001164   400000 756100                    STQ     0,,PR4
        44 001165   400003 454500                    STP4    3,,PR4
        44 001166   200420 630500                    EPPR0   C$,,AUTO
        44 001167   400002 450500                    STP0    2,,PR4
        44 001170   400002 630500                    EPPR0   2,,PR4
        44 001171   000001 631400 45                 EPPR1   1
        44 001172   000000 701000 xent               TSX1    MEM_TRUNC
        44 001173   000000 011000                    NOP     0
        44 001174   100000 221003                    LDX1    32768,DU
        44 001175   235044 634511                    EPPR4   BIN_TREE1+13001,X1,AUTO

      424     1178    2             LENGTHW(C_SET)-(%NR_ELEM_MAX-C_SET.NR_ELEM) *
      425     1179    2             LENGTHW(C_SET.ELEM(0)));
      426     1180
      427     1181
      428     1182        /* Ask for dynamic memory space again for building
      429     1183           keys. */
      430     1184
      431     1185    2           CALL GETNEW(BKEY$,LENGTHW(KEY_B));

   1185 44 001176   000003 236000 45                 LDQ     3
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:62   
        44 001177   400001 756100                    STQ     1,,PR4
        44 001200   200005 630500                    EPPR0   BKEY$,,AUTO
        44 001201   400000 450500                    STP0    0,,PR4
        44 001202   400000 630500                    EPPR0   0,,PR4
        44 001203   000001 631400 45                 EPPR1   1
        44 001204   000000 701000 xent               TSX1    GETNEW
        44 001205   000000 011000                    NOP     0
        44 001206   100000 221003                    LDX1    32768,DU
        44 001207   235044 634511                    EPPR4   BIN_TREE1+13001,X1,AUTO

      432     1186
      433     1187    2           CONFIG_NUMBER=NR_CONFIG;

   1187 44 001210   100000 220003                    LDX0    32768,DU
        44 001211   000000 235000 37                 LDA     NR_CONFIG
        44 001212   235020 755110                    STA     BIN_TREE1+12981,X0,AUTO

      434     1188    2           NR_CONFIG=NR_CONFIG+1;

   1188 44 001213   000000 054000 37                 AOS     NR_CONFIG

      435     1189    2           C$->C_SET_B.C_SET#=CONFIG_NUMBER;

   1189 44 001214   235020 721110                    LXL1    BIN_TREE1+12981,X0,AUTO
        44 001215   200420 470500                    LDP0    C$,,AUTO
        44 001216   000001 741100                    STX1    1,,PR0

      436     1190
      437     1191    2           IF NR_CONFIG>%NR_CONFIG_MAX THEN

   1191 44 001217   000000 236000 37                 LDQ     NR_CONFIG
        44 001220   004230 116007                    CMPQ    2200,DL
        44 001221   001230 604400 44                 TMOZ    s:1195

      438     1192    2              CALL LIMCHK(15,NR_CONFIG,%NR_CONFIG_MAX,

   1192 44 001222   000032 630400 45                 EPPR0   26
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:63   
        44 001223   000007 631400 45                 EPPR1   7
        44 001224   000000 701000 xent               TSX1    LIMCHK
        44 001225   000000 011000                    NOP     0
        44 001226   100000 221003                    LDX1    32768,DU
        44 001227   235044 634511                    EPPR4   BIN_TREE1+13001,X1,AUTO

      439     1193    2                'The maximum number of configuration sets has been exceeded: %%');
      440     1194
      441     1195    2           C#_TO_$(CONFIG_NUMBER)=C$;

   1195 44 001230   100000 220003                    LDX0    32768,DU
        44 001231   235020 721110                    LXL1    BIN_TREE1+12981,X0,AUTO
        44 001232   200420 236100                    LDQ     C$,,AUTO
        44 001233   000000 756011 36                 STQ     C#_TO_$,X1

      442     1196
      443     1197    2           C$->C_SET_B.KEY$=ADDR(KEY);

   1197 44 001234   200417 236100                    LDQ     @KEY,,AUTO
        44 001235   200420 470500                    LDP0    C$,,AUTO
        44 001236   000000 756100                    STQ     0,,PR0

      444     1198    2           C$->C_SET_B.NR_ELEM=C_SET.NR_ELEM;

   1198 44 001237   200424 721100                    LXL1    C_SET+1,,AUTO
        44 001240   200420 470500                    LDP0    C$,,AUTO
        44 001241   000001 441100                    SXL1    1,,PR0

      445     1199
      446     1200    2           KEY.KEY_VAL$=C$;

   1200 44 001242   200420 236100                    LDQ     C$,,AUTO
        44 001243   200417 470500                    LDP0    @KEY,,AUTO
        44 001244   000003 756100                    STQ     3,,PR0

      447     1201
      448     1202    3           DO I=C_SET.NR_ELEM-1 DOWNTO 0;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:64   

   1202 44 001245   200424 236100                    LDQ     C_SET+1,,AUTO
        44 001246   777777 376007                    ANQ     -1,DL
        44 001247   000001 136007                    SBLQ    1,DL
        44 001250   235021 756110                    STQ     BIN_TREE1+12982,X0,AUTO
        44 001251   001325 710000 44                 TRA     s:1221+2

      449     1203    3              KEY$=C_SET.ELEM.KEY$(I);

   1203 44 001252   100000 220003                    LDX0    32768,DU
        44 001253   235021 235110                    LDA     BIN_TREE1+12982,X0,AUTO
        44 001254   000001 735000                    ALS     1
        44 001255   000001 735000                    ALS     1
        44 001256   200427 236105                    LDQ     C_SET+4,AL,AUTO
        44 001257   200421 756100                    STQ     KEY$,,AUTO

      450     1204    3              C$->C_SET_B.ELEM.KEY$(I)=KEY$;

   1204 44 001260   235021 235110                    LDA     BIN_TREE1+12982,X0,AUTO
        44 001261   000002 735000                    ALS     2
        44 001262   200420 470500                    LDP0    C$,,AUTO
        44 001263   000004 756105                    STQ     4,AL,PR0

      451     1205    3              INCL$=C_SET.ELEM.INCL$(I);

   1205 44 001264   235021 235110                    LDA     BIN_TREE1+12982,X0,AUTO
        44 001265   000001 735000                    ALS     1
        44 001266   000001 735000                    ALS     1
        44 001267   200430 236105                    LDQ     C_SET+5,AL,AUTO
        44 001270   200422 756100                    STQ     INCL$,,AUTO

      452     1206    3              C$->C_SET_B.ELEM.INCL$(I)=INCL$;

   1206 44 001271   235021 235110                    LDA     BIN_TREE1+12982,X0,AUTO
        44 001272   000002 735000                    ALS     2
        44 001273   200420 470500                    LDP0    C$,,AUTO
        44 001274   000005 756105                    STQ     5,AL,PR0
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:65   

      453     1207    3              IF INCL$~=ADDR(NIL) THEN

   1207 44 001275   200422 236100                    LDQ     INCL$,,AUTO
        44 001276   000000 116000 45                 CMPQ    0
        44 001277   001323 600000 44                 TZE     s:1221

      454     1208    4              DO;

      455     1209    4                 INCL$->INCL_B.KEY$=KEY$;

   1209 44 001300   200421 236100                    LDQ     KEY$,,AUTO
        44 001301   200422 470500                    LDP0    INCL$,,AUTO
        44 001302   000001 756100                    STQ     1,,PR0

      456     1210    4                 INCL$->INCL_B.SET_STATE=SET_STATE_UNCALC;

   1210 44 001303   200422 470500                    LDP0    INCL$,,AUTO
        44 001304   000000 236003                    LDQ     0,DU
        44 001305   000002 552140                    STBQ    2,'40'O,PR0

      457     1211    4                 INCL$->INCL_B.INCL_HEAD$=ADDR(NIL);

   1211 44 001306   000000 236000 45                 LDQ     0
        44 001307   200422 470500                    LDP0    INCL$,,AUTO
        44 001310   000000 756100                    STQ     0,,PR0

      458     1212
      459     1213    4                 IF KEY$->KEY_B.W.SYM_AFTER=0 THEN

   1213 44 001311   200421 470500                    LDP0    KEY$,,AUTO
        44 001312   000004 235100                    LDA     4,,PR0
        44 001313   001323 601000 44                 TNZ     s:1221

      460     1214    5                 DO;

      461     1215    5                    KEY$->KEY_B.FOLLOW$=INCL$;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:66   

   1215 44 001314   200422 236100                    LDQ     INCL$,,AUTO
        44 001315   000003 756100                    STQ     3,,PR0

      462     1216    5                    C$->C_SET_B.ELEM.INCL$(I)=ADDR(NIL);

   1216 44 001316   235021 235110                    LDA     BIN_TREE1+12982,X0,AUTO
        44 001317   000002 735000                    ALS     2
        44 001320   000000 236000 45                 LDQ     0
        44 001321   200420 470500                    LDP0    C$,,AUTO
        44 001322   000005 756105                    STQ     5,AL,PR0

      463     1217    5                    END;

      464     1218    4                 END;

      465     1219
      466     1220
      467     1221    3              END;

   1221 44 001323   000001 336007                    LCQ     1,DL
        44 001324   235021 056110                    ASQ     BIN_TREE1+12982,X0,AUTO
        44 001325   235021 235110                    LDA     BIN_TREE1+12982,X0,AUTO
        44 001326   001252 605000 44                 TPL     s:1203

      468     1222
      469     1223    2   END CNFG_BUILD;

   1223 44 001327   200416 221300                    LDX1  ! HASH_HEAD$+259,,AUTO
        44 001330   000001 702211                    TSX2  ! 1,X1

      470     1224        %EJECT;
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:67   
      471     1225        /* Main body of CNFG */
      472     1226
      473     1227    2           DO NR_CONFIG=%NR_CONFIG_MAX DOWNTO 0;

   1227 44 001331   004230 235007                    LDA     2200,DL
        44 001332   000000 755000 37                 STA     NR_CONFIG

      474     1228    2              C#_TO_$(NR_CONFIG)=ADDR(NIL);

   1228 44 001333   000000 236000 45                 LDQ     0
        44 001334   000000 720000 37                 LXL0    NR_CONFIG
        44 001335   000000 756010 36                 STQ     C#_TO_$,X0

      475     1229    2              END;

   1229 44 001336   000001 336007                    LCQ     1,DL
        44 001337   000000 056000 37                 ASQ     NR_CONFIG
        44 001340   001333 605000 44                 TPL     s:1228

      476     1230
      477     1231    2           DO NR_CONFIG=0 TO HASH_MOD;

   1231 44 001341   000000 450000 37                 STZ     NR_CONFIG

      478     1232    2              HASH_HEAD$(NR_CONFIG)=ADDR(NIL);

   1232 44 001342   000000 236000 45                 LDQ     0
        44 001343   000000 720000 37                 LXL0    NR_CONFIG
        44 001344   200013 756110                    STQ     HASH_HEAD$,X0,AUTO

      479     1233    2              END;

   1233 44 001345   000000 054000 37                 AOS     NR_CONFIG
        44 001346   000000 235000 37                 LDA     NR_CONFIG
        44 001347   000401 115007                    CMPA    257,DL
        44 001350   001342 604400 44                 TMOZ    s:1232

PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:68   
      480     1234
      481     1235    1           INCL_LEN=LENGTHW(INCL_B)+SET_LENGTHW-1;

   1235 44 001351   000000 235000 21                 LDA     SET_LENGTHW
        44 001352   000003 035007                    ADLA    3,DL
        44 001353   200003 755100                    STA     INCL_LEN,,AUTO

      482     1236    1           NR_CONFIG=0;

   1236 44 001354   000000 450000 37                 STZ     NR_CONFIG

      483     1237    1           NR_CTHREAD=0;

   1237 44 001355   200007 450100                    STZ     NR_CTHREAD,,AUTO

      484     1238    1           NR_CTHREAD_FOUND=0;

   1238 44 001356   200010 450100                    STZ     NR_CTHREAD_FOUND,,AUTO

      485     1239    1           MAX_DEP=0;

   1239 44 001357   200011 450100                    STZ     MAX_DEP,,AUTO

      486     1240    1           AVG_DEP=0;

   1240 44 001360   200012 450100                    STZ     AVG_DEP,,AUTO

      487     1241
      488     1242        /* BUILD BASIS SET FOR THE FIRST CONFIGURATION */
      489     1243
      490     1244    1           CALL GETNEW(BKEY$,LENGTHW(KEY_B));

   1244 44 001361   000003 236000 45                 LDQ     3
        44 001362   400001 756100                    STQ     1,,PR4
        44 001363   200005 630500                    EPPR0   BKEY$,,AUTO
        44 001364   400000 450500                    STP0    0,,PR4
        44 001365   400000 630500                    EPPR0   0,,PR4
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:69   
        44 001366   000001 631400 45                 EPPR1   1
        44 001367   000000 701000 xent               TSX1    GETNEW
        44 001370   000000 011000                    NOP     0
        44 001371   100000 221003                    LDX1    32768,DU
        44 001372   235044 634511                    EPPR4   BIN_TREE1+13001,X1,AUTO

      491     1245    1           BKEY.W.KEY_TYPE=0 /* value not used yet */;

   1245 44 001373   200005 470500                    LDP0    BKEY$,,AUTO
        44 001374   000000 236003                    LDQ     0,DU
        44 001375   000005 552120                    STBQ    5,'20'O,PR0

      492     1246    1           BKEY.W.ELEM_COUNT=1;

   1246 44 001376   000001 220003                    LDX0    1,DU
        44 001377   200005 470500                    LDP0    BKEY$,,AUTO
        44 001400   000005 440100                    SXL0    5,,PR0

      493     1247    1           BKEY.W.SYM_AFTER=RIGHT_PARTS(1);

   1247 44 001401   000000 236000 7                  LDQ     RIGHT_PARTS
        44 001402   000022 736000                    QLS     18
        44 001403   000022 732000                    QRS     18
        44 001404   200005 470500                    LDP0    BKEY$,,AUTO
        44 001405   000004 756100                    STQ     4,,PR0

      494     1248    1           BKEY.ELEM.PROD(0)=0;

   1248 44 001406   000000 221003                    LDX1    0,DU
        44 001407   200005 470500                    LDP0    BKEY$,,AUTO
        44 001410   000006 741100                    STX1    6,,PR0

      495     1249    1           BKEY.ELEM.DOT_POS(0)=0;

   1249 44 001411   000006 441100                    SXL1    6,,PR0

      496     1250
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:70   
      497     1251    1           BKEY.KEY_VAL$=ADDR(NIL);

   1251 44 001412   000000 236000 45                 LDQ     0
        44 001413   000003 756100                    STQ     3,,PR0

      498     1252    1           BUILD_HEAD$=ADDR(NIL);

   1252 44 001414   200004 756100                    STQ     BUILD_HEAD$,,AUTO

      499     1253
      500     1254    1           CALL ENTER_KEY(BKEY,KEY$);

   1254 44 001415   200006 630500                    EPPR0   KEY$,,AUTO
        44 001416   100000 222003                    LDX2    32768,DU
        44 001417   235032 450512                    STP0    BIN_TREE1+12991,X2,AUTO
        44 001420   200005 236100                    LDQ     BKEY$,,AUTO
        44 001421   235031 756112                    STQ     BIN_TREE1+12990,X2,AUTO
        44 001422   000005 701000 44                 TSX1    ENTER_KEY
        44 001423   000000 011000                    NOP     0

      501     1255
      502     1256    1           BKEY$=ADDR(BKEY.ELEM(1));

   1256 44 001424   200005 236100                    LDQ     BKEY$,,AUTO
        44 001425   000007 036003                    ADLQ    7,DU
        44 001426   200005 756100                    STQ     BKEY$,,AUTO

      503     1257    1           CALL MEM_TRUNC(BKEY$,LENGTHW(KEY_B));

   1257 44 001427   000003 236000 45                 LDQ     3
        44 001430   400001 756100                    STQ     1,,PR4
        44 001431   200005 630500                    EPPR0   BKEY$,,AUTO
        44 001432   400000 450500                    STP0    0,,PR4
        44 001433   400000 630500                    EPPR0   0,,PR4
        44 001434   000001 631400 45                 EPPR1   1
        44 001435   000000 701000 xent               TSX1    MEM_TRUNC
        44 001436   000000 011000                    NOP     0
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:71   
        44 001437   100000 221003                    LDX1    32768,DU
        44 001440   235044 634511                    EPPR4   BIN_TREE1+13001,X1,AUTO

      504     1258
      505     1259    2           DO WHILE(BUILD_HEAD$~=ADDR(NIL));

   1259 44 001441   001455 710000 44                 TRA     s:1264

      506     1260    2              KEY$=BUILD_HEAD$;

   1260 44 001442   200004 236100                    LDQ     BUILD_HEAD$,,AUTO
        44 001443   200006 756100                    STQ     KEY$,,AUTO

      507     1261    2              BUILD_HEAD$=KEY$->KEY_B.KEY_VAL$;

   1261 44 001444   200006 470500                    LDP0    KEY$,,AUTO
        44 001445   000003 236100                    LDQ     3,,PR0
        44 001446   200004 756100                    STQ     BUILD_HEAD$,,AUTO

      508     1262    2              KEY$->KEY_B.KEY_VAL$=ADDR(NIL);

   1262 44 001447   000000 236000 45                 LDQ     0
        44 001450   000003 756100                    STQ     3,,PR0

      509     1263    2              CALL CNFG_BUILD(KEY$->KEY_B);

   1263 44 001451   200006 236100                    LDQ     KEY$,,AUTO
        44 001452   200417 756100                    STQ     HASH_HEAD$+260,,AUTO
        44 001453   000261 701000 44                 TSX1    CNFG_BUILD
        44 001454   000000 011000                    NOP     0

      510     1264    2              END;

   1264 44 001455   200004 236100                    LDQ     BUILD_HEAD$,,AUTO
        44 001456   000000 116000 45                 CMPQ    0
        44 001457   001442 601000 44                 TNZ     s:1260

PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:72   
      511     1265
      512     1266    1           CALL MEM_TRUNC(BKEY$);

   1266 44 001460   200005 630500                    EPPR0   BKEY$,,AUTO
        44 001461   400000 450500                    STP0    0,,PR4
        44 001462   400000 630500                    EPPR0   0,,PR4
        44 001463   000036 631400 45                 EPPR1   30
        44 001464   000000 701000 xent               TSX1    MEM_TRUNC
        44 001465   000000 011000                    NOP     0
        44 001466   100000 221003                    LDX1    32768,DU
        44 001467   235044 634511                    EPPR4   BIN_TREE1+13001,X1,AUTO

      513     1267
      514     1268    1           CALL LIMCHK(0,NR_CONFIG,%NR_CONFIG_MAX,

   1268 44 001470   000037 630400 45                 EPPR0   31
        44 001471   000007 631400 45                 EPPR1   7
        44 001472   000000 701000 xent               TSX1    LIMCHK
        44 001473   000000 011000                    NOP     0
        44 001474   100000 221003                    LDX1    32768,DU
        44 001475   235044 634511                    EPPR4   BIN_TREE1+13001,X1,AUTO

      515     1269    1             'The maximum number of configuration sets has been exceeded: %%');
      516     1270
      517     1271    1   END;

   1271 44 001476   000000 702200 xent               TSX2  ! X66_ARET

PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:73   
--  Include file information  --

   LR_CNFG_EXT.:Z8A6TOU  cannot be made into a system file and is referenced.
   LR_IO_EXT.:Z8A6TOU  cannot be made into a system file and is referenced.
   LR_GRAM_EXT.:Z8A6TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure CNFG.
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:74   

 **** Variables and constants ****

  ****  Section 000 LblCom OUT_DCBN

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 OUT_DCBN

  ****  Section 006 LblCom SYM_PTRS

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 SYM_PTRS(0:1400)

  ****  Section 007 LblCom RIGHT_PARTS

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/h SBIN(18)    r     1 RIGHT_PARTS(0:8000)

  ****  Section 008 LblCom PROD

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/h STRC(72)    r     1 PROD(0:1500)

  ****  Section 009 LblCom NR_PROD

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 NR_PROD

PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:75   
  ****  Section 010 LblCom NR_SYMS

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r     1 NR_SYMS

  ****  Section 011 LblCom NR_TERM

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r     1 NR_TERM

  ****  Section 012 LblCom LAST_ACT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 LAST_ACT

  ****  Section 013 LblCom LAST_NULL

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 LAST_NULL

  ****  Section 014 LblCom NR_ONRIGHT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 NR_ONRIGHT

  ****  Section 015 LblCom NR_NT

PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:76   
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 NR_NT

  ****  Section 016 LblCom PROD_LEN_MAX_EVER

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 PROD_LEN_MAX_EVER

  ****  Section 017 LblCom LAST_ORDER_SPECIFIED

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 LAST_ORDER_SPECIFIED

  ****  Section 018 LblCom SEMANTIC_ORDERING

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/b BIT               1 SEMANTIC_ORDERING

  ****  Section 019 LblCom ERR_SEV

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 ERR_SEV

  ****  Section 020 LblCom SET_LENGTHB

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:77   

     0-0-0/w SBIN              1 SET_LENGTHB

  ****  Section 021 LblCom SET_LENGTHW

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r     1 SET_LENGTHW

  ****  Section 022 LblCom EOF_SYMBOL_PTR

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR               1 EOF_SYMBOL_PTR

  ****  Section 023 LblCom ERROR_SYMBOL_PTR

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR               1 ERROR_SYMBOL_PTR

  ****  Section 024 LblCom BOF_SYMBOL_PTR

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR               1 BOF_SYMBOL_PTR

  ****  Section 025 LblCom OPTIONS

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/b BIT               1 OPTIONS(0:25)
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:78   

  ****  Section 026 LblCom OPTIONS_TEXT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(4)           1 OPTIONS_TEXT(0:25)

  ****  Section 027 LblCom INSTR

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR              1 INSTR(0:511)               0-0-0/c CHAR(512)         1 INSTRCHR

  ****  Section 028 LblCom INSTR_LISTED

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/b BIT               1 INSTR_LISTED

  ****  Section 029 LblCom INSTR_LEN

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 INSTR_LEN

  ****  Section 030 LblCom INSTR_INDX

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 INSTR_INDX

  ****  Section 031 LblCom EOF_FLAG
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:79   

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/b BIT               1 EOF_FLAG

  ****  Section 032 LblCom KEY_REC

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(10)          1 KEY_REC

  ****  Section 033 LblCom LINE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(109)         1 LINE

  ****  Section 034 LblCom LINELEN

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 LINELEN

  ****  Section 035 LblCom TSTATS

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(7380)        1 TSTATS

  ****  Section 036 LblCom C#_TO_$

  ****  Scalars and arrays  ****
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:80   
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 C#_TO_$(0:2200)

  ****  Section 037 LblCom NR_CONFIG

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r     1 NR_CONFIG

  ****  Section 038 LblCom INIT_CONFIG

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 INIT_CONFIG

  ****  Section 039 LblCom MAX_BASIS_ITEMS

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 MAX_BASIS_ITEMS

  ****  Section 040 LblCom MAX_TOTAL_ITEMS

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 MAX_TOTAL_ITEMS

  ****  Section 041 LblCom LAST_BINSRCH_ONLY

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:81   
     0-0-0/w SBIN              1 LAST_BINSRCH_ONLY

  ****  Section 042 LblCom LAST_BOTH_BITBIN

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 LAST_BOTH_BITBIN

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

135031-0-0/w PTR         r     1 @KEY                     417-0-0/w PTR         r     1 @KEY
135032-0-0/w PTR         r     1 @KEY$                     12-0-0/w SBIN        r     1 AVG_DEP
  3533-0-0/b STRC        r     1 BIN_TREE1(0:22500)     57500-0-0/b STRC        r     1 BIN_TREE2(0:22500)
 57500-0-0/w UBIN        r     1 BIN_TREE2_W(0:22500)
     5-0-0/w PTR         r     1 BKEY$                      4-0-0/w PTR         r     1 BUILD_HEAD$
   420-0-0/w PTR         r     1 C$                    135036-0-0/w SBIN        r     1 CMPR_RESULT
135031-0-0/w SBIN        r     1 CMPR_RESULT           133446-0-0/w SBIN        r     1 CN
135020-0-0/w SBIN        r     1 CONFIG_NUMBER         135033-0-0/w PTR         r     1 CUR_KEY$
   423-0-0/w STRC(57888) r     1 C_SET                 135035-0-0/w SBIN        r     1 DEP
133453-0-0/b BIT         r     1 DO_LIST(0:1400)       135017-0-0/w SBIN        r     1 DO_LIST_C
133522-0-0/b UBIN(18)    r     1 DO_LIST_S(0:1400)     135037-0-0/w SBIN        r     1 HASHVAL
    13-0-0/w PTR         r     1 HASH_HEAD$(0:257)
135040-0-0/w SBIN        r     1 I                     135021-0-0/w SBIN        r     1 I
   422-0-0/w PTR         r     1 INCL$                      3-0-0/w SBIN        r     1 INCL_LEN
135041-0-0/w SBIN              1 J                     135022-0-0/w SBIN        r     1 J
    *0-0-0/w STRC(5652)  r     1 KEY                       *0-0-0/w STRC(5652)  r     1 KEY
     6-0-0/w PTR         r     1 KEY$                      *0-0-0/w PTR         r     1 KEY$
   421-0-0/w PTR         r     1 KEY$                  135043-0-0/w SBIN              1 LENC
135042-0-0/w SBIN        r     1 LENW                  135033-0-0/w SBIN        r     1 M
    11-0-0/w SBIN        r     1 MAX_DEP               135023-0-0/w SBIN              1 N
135032-0-0/w SBIN        r     1 N                     133450-0-0/w SBIN        r     1 NE
133447-0-0/w SBIN        r     1 NN                    133451-0-0/w SBIN        r     1 NNODE
     7-0-0/w SBIN        r     1 NR_CTHREAD                10-0-0/w SBIN        r     1 NR_CTHREAD_FOUND
PL6.E3A0      #001=CNFG File=LR_CNFG.:Z8A6TSI                                    SAT 08/09/97 09:26 Page:82   
135026-0-0/w SBIN        r     1 P                     135025-0-0/w SBIN        r     1 SA
135024-0-0/w PTR         r     1 SA$                   135034-0-0/w PTR         r     1 SUC_KEY$
133445-0-0/w UBIN(18)    r     1 SYM_AFTER             133452-0-0/b STRC        r     1 TREE2
133452-0-0/w UBIN        r     1 TREE2_W

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(5652)  r     1 BKEY                       0-0-0/w STRC(57888) r     1 C_SET_B
     0-0-0/w STRC(72)          1 INCLUDES_B                 0-0-0/w STRC(144)   r     1 INCL_B
     0-0-0/w STRC(5436)        1 ITEM_B                     0-0-0/w STRC(5652)  r     1 KEY_B
     0-0-0N  NULL        r     1 M$LO                       0-0-0N  NULL        r     1 M$OU
     0-0-0N  NULL        r     1 M$SI                       0-0-0N  NULL        r     1 M$SO
     0-0-0N  NULL        r     1 M$UI                       0-0-0/w STRC(351)   r     1 SYMBOL


   Procedure CNFG requires 831 words for executable code.
   Procedure CNFG requires 47658 words of local(AUTO) storage.

    No errors detected in file LR_CNFG.:Z8A6TSI    .
