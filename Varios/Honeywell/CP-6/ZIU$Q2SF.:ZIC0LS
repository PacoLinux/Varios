
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:1    
        1        1        /*M* ZIU$Q2SF - System interface modules for DBUTIL */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*P*
        8        8        NAME: ZIU$Q2SF
        9        9        DESCRIPTION:
       10       10
       11       11                               MONITOR  INTERFACES
       12       12                                    ZIU$Q2SF
       13       13
       14       14
       15       15                  Module  ZIU$Q2SF contains  all the  routines neccessary
       16       16               for   performing  the   monitor   interfaces.  The  naming
       17       17               convention for the  individual  monitor  procedures  is as
       18       18               follows. The name  of the procedure  is the name of the of
       19       19               the  monitor  call  preceeded by  'SYS_FUNC_' (for  system
       20       20               function). With this convention, a monitor call to release
       21       21               a dcb is is done by calling  SYS_FUNC_RELDCB which in turn
       22       22               will set up the Function Parameter Table (FPT) and perform
       23       23               the call to M$RELDCB.
       24       24
       25       25                  With  the   exception of   SYS_FUNC_CORRES,   parameter
       26       26               information   is    passed    thru   the   include    file
       27       27               ZI_GLOBAL_DBUTIL.   This  file   includes a  macro  called
       28       28               SYS_FUNC  which  contains   all  the  definitions  of  the
       29       29               variables which are used by ZIU$Q2SF with the exception of
       30       30               those variables that are  unique to a given procedure. The
       31       31               variables defined in this include file are initialized and
       32       32               SYMDEFed  in  the   procedure   ZIU$Q2UT  found in  module
       33       33               ZIU$Q2DI.  What ever   parameters are  needed  by a  given
       34       34               SYS_FUNC_  procedure will be set in  the calling procedure
       35       35               just prior to the call to that procedure. In these utility
       36       36               programs,  this parameter  setting is  usually offset by a
       37       37               slash star star slash symbol combination.
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:2    
       38       38                  EX:     (slash star star slash) DCBSF = DCBNUM(M$LO);
       39       39                          CALL SYS_FUNC_RELDCB;
       40       40                      DCBSF is the parameter being passed via the global
       41       41                      include file and contains the dcb number to be
       42       42                      released by SYS_FUNC_RELDCB.
       43       43
       44       44                  SYS_FUNC_CORRES  has only two  parameters which are two
       45       45               dcb  numbers  that  are   passed  in the  manner of  being
       46       46               enclosed by parenthesis after the procedure name. In other
       47       47               words:
       48       48                          CALL SYS_FUNC_CORRES(dcb1,dcb2) ALTRET (label);
       49       49
       50       50                  With the exception of  SYS_FUNC_OPEN, all the SYS_FUNC_
       51       51               procedures are   straight   foward in   their   functions.
       52       52               SYS_FUNC_OPEN however, deserves some individual attention.
       53       53
       54       54
       55       55
       56       56                  The basic parameters SYS_FUNC_OPEN must have are:
       57       57                      1) DCBSF       - The dcb number to be opened.
       58       58                      2) ORGSF       - The organization of file being
       59       59                                       opened(ids,key..)
       60       60                      3) TESTSF      - Will this just be a test open?
       61       61                      4) FUNSF       - What is the open function (Ie.
       62       62                                        in,update,create)
       63       63                      5) XTENSIZESF  - If create- how many granules do I
       64       64                                       reserve?
       65       65                      6) BKUPSF      - If create- is the file to be
       66       66                                       backed up?
       67       67                      7) EXISTSF     - If create- what is to be done if
       68       68                                       file exists?
       69       69                      8) ACNT        - If create- what accounts get EXEC
       70       70                                       privileges?
       71       71                      9) ACSSF       - what is the access mode?
       72       72                                       (seq,direct..)
       73       73                     10) ASNSF       - is this a file,tape or device?
       74       74                     11) FIDSF       - is there a file name?
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:3    
       75       75                     12) SHARESF     - if a file- do I open shared?
       76       76
       77       77                  In addition to  the above, there  is a parameter called
       78       78               CARRY_ATTRIBUTESF.  I will assume  normally that when  you
       79       79               are creating a  file that you want  to carry over the file
       80       80               information table of the file last openedto this new file.
       81       81               This  means that  when  creating a  dump  file from an IDS
       82       82               file, the  same NOLIST  attributes will  apply to the dump
       83       83               file as did the IDS file.  However, in a case such as area
       84       84               initialization,   you  would  not   want  to  carry  these
       85       85               attributes  because the area is  being created independent
       86       86               of any other files. Also because you would want to use the
       87       87               attributes specified by the user. For this case where file
       88       88               attributes  are not  to be  carried   from  the last  file
       89       89               opened, set CARRY_ATTRIBUTESF equal to '0'B or '%no#'.
       90       90
       91       91                  Also  the open  routine  looks  at a  parameter  called
       92       92               REASGNSF. One of the functions of the utilities is to keep
       93       93               an  area  file  and  its  associated  key  file  together.
       94       94               Therefore, if a  user an area with  an associated key file
       95       95               to  tape,  I   want  to  make  sure   the  key  file  goes
       96       96               automatically (without setting a separate dcb) to the tape
       97       97               also. By setting  REASGNSF to %no#  when opening the keyed
       98       98               file I  make sure  that I don't  overwrite  the parameters
       99       99               that are already  in the dcb and I  make sure that the set
      100      100               commands (if  any) are  not  re-applied to  the dcb  which
      101      101               would overwrite the key file name with the area file name.
      102      102
      103      103
      104      104                                                               */
      105      105        %EJECT;
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:4    
      106      106        SYS_FUNC_OPEN: PROC /*Dcbsf,  dcb number to be opened */
      107      107         /*Orgsf,  file organization */
      108      108         /*Testsf  %YES# = test open only */
      109      109         /*Xtensizesf, granuals reserved at create */
      110      110         /*Acssf    access mode (seq,direct) */
      111      111         /*Funsf    function (in,out,update) */
      112      112         /*Anssf    1=file 2=tape 3=device */
      113      113         /*Bkupsf   create attrib ..backup of file */
      114      114         /*Acnt     list of accounts w/exec priv */
      115      115         /*Fidsf    file or dcb name */
      116      116         /*Existsf  open mode of the file */
      117      117         /*Sharesf  share options on the 'DCB' */
      118      118               ALTRET;
      119      119    1   DCL M$SI DCB;
      120      120    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      121      121    1   DCL XSA$OPEN ENTRY(2) ALTRET;
      122      122    1   DCL FIT$ STATIC SYMDEF PTR ALIGNED;
      123      123    1   DCL CODE7 UBIN CONSTANT SYMDEF ALIGNED INIT(7);
      124      124    1   DCL XSF$LOCCODT ENTRY(2) ALTRET;
      125      125    1   DCL FILE_INFO (0:1023) UBIN WORD STATIC SYMDEF;
      126      126    1   DCL ACCOUNT# CHAR(8) BASED;
      127      127    1   DCL ACCOUNT$ PTR;
      128      128    1   DCL 1 FLNM,
      129      129    1         2 CNT UBIN(9) CALIGNED,
      130      130    1         2 FILE_NM CHAR(30) CALIGNED;
      131      131    1   DCL XTN UBIN;
      132      132        %INCLUDE ZI_GLOBAL_DBUTIL;
      133      310         %SYS_FUNC;
      134      402         %MISC_DCLS;
      135      455        %INCLUDE XS_MACRO_C;
      136      499         %XSA_PARAM(FPTN=FSA,
      137      500         STCLASS="STATIC SYMDEF");
      138      530
      139      531        %INCLUDE CP_6;
      140      612        %INCLUDE CP_6_SUBS;
      141     1152        %VLP_ALTKEYS(N=20,STCLASS="STATIC SYMDEF"); /* RESERVE 20 MAX */
      142     1167        %B$TCB;
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:5    
      143     1170        %B$EXCFR;
      144     1188        %INCLUDE B_ERRORS_C;
      145     2315        %VLP_SN(N=1);
      146     2328        %FPT_OPEN(FPTN=RES_FPT,STCLASS="STATIC SYMDEF");
      147     2437        %FPT_OPEN(FPTN=OPEN_FPT,STCLASS="STATIC SYMDEF");
      148     2546        %VLP_ATTR(FPTN=VEH,STCLASS=CONSTANT);
      149     2560        %VLP_ACSVEH(READ=YES,
      150     2561         UPD=YES,
      151     2562         VEHICLE='IDS',
      152     2563         LAST=";");
      153     2580        %VLP_ATTR(FPTN=KEYVEH,STCLASS=CONSTANT);
      154     2594        %VLP_ACSVEH(READ=YES,
      155     2595         WNEW=YES,
      156     2596         DELR=YES,
      157     2597         DELF=YES,
      158     2598         UPD=YES,
      159     2599         VEHICLE='IDS',
      160     2600         LAST=";");
      161     2617        %VLP_ATTR(FPTN=ACNT_ALL,STCLASS=CONSTANT);
      162     2631        %VLP_ACCESS(EXEC=YES,NOLIST=YES,ACCT='ALL',LAST=";");
      163     2648        %VLP_ATTR(FPTN=ACCOUNT);
      164     2662        %VLP_ACCESS(EXEC=NO,NOLIST=YES,ACCT='ALL');
      165     2679        %VLP_ACCESS(EXEC=YES,NOLIST=NO);
      166     2696        %VLP_ACCESS(EXEC=YES,NOLIST=NO);
      167     2713        %VLP_ACCESS(EXEC=YES,NOLIST=NO);
      168     2730        %VLP_ACCESS(EXEC=YES,NOLIST=NO);
      169     2747        %VLP_ACCESS(EXEC=YES,NOLIST=NO);
      170     2764        %VLP_ACCESS(EXEC=YES,NOLIST=NO);
      171     2781        %VLP_ACCESS(EXEC=YES,NOLIST=NO);
      172     2798        %VLP_ACCESS(EXEC=YES,NOLIST=NO);
      173     2815        %VLP_ACCESS(EXEC=YES,NOLIST=NO);
      174     2832        %VLP_ACCESS(EXEC=YES,NOLIST=NO,LAST=";");
      175     2849        /**/
      176     2850        %F$DCB;
      177     2907        %INCLUDE FM$FIT;
      178     3128        %CODE07 (BASED="BASED(FIT$)");
      179     3131        %EJECT;
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:6    
      180     3132    1       XTN = 0;
      181     3133    1       RES_FPT.V.DCB# = DCBSF;
      182     3134    1       OPEN_FPT.V.DCB# = DCBSF;
      183     3135        /*
      184     3136               Set up special opens for M$SI and M$LO.
      185     3137        */
      186     3138    1       IF DCBSF = DCBNUM(M$LO) OR DCBSF = DCBNUM(M$SI) THEN
      187     3139    2       DO;
      188     3140    2           RES_FPT.V.INITZ.SCRUB# = %YES#;
      189     3141    2           RES_FPT.V.INITZ.REASSIGN# = REASGNSF ;
      190     3142    2           RES_FPT.V.CTG# = %YES# ;
      191     3143    2           CALL M$OPEN(RES_FPT) ALTRET(OPEN_ERR);
      192     3144    2           RETURN;
      193     3145    2           END;
      194     3146    1       IF FIDSF = '*SORT ' THEN
      195     3147    1           RES_FPT.V.DISP# = %SCRATCH#;
      196     3148    1       ELSE
      197     3149    1           RES_FPT.V.DISP# = 0;
      198     3150    1       OPEN_FPT.V.ORG#=ORGSF;
      199     3151    1       OPEN_FPT.V.OPER.TEST#=TESTSF;
      200     3152    1       OPEN_FPT.V.CTG#=%YES#;
      201     3153    1       OPEN_FPT.V.SHARE#=SHARESF;
      202     3154    1       OPEN_FPT.V.ACS#=ACSSF;
      203     3155    1       OPEN_FPT.V.FUN#=FUNSF;
      204     3156    1       OPEN_FPT.V.BLKL# = BLKLSF;
      205     3157    1       BLKLSF = 0; /* RESET TO DEFAULT BLKL SIZE */
      206     3158    1       IF REASGNSF = %NO# THEN
      207     3159    1           OPEN_FPT.V.ASN#=DCBADDR(DCBSF)->F$DCB.ASN#;
      208     3160    1       ELSE
      209     3161    1           OPEN_FPT.V.ASN# = ASNSF;
      210     3162    2       IF FUNSF = %CREATE# THEN DO;
      211     3163    3           IF ORGSF = %INDEXED# THEN DO;
      212     3164    3               IF DCBADDR(DCBSF)->F$DCB.IXTNSIZE# ~= 0 AND
      213     3165    3                  DCBADDR(DCBSF)->F$DCB.IXTNSIZE# ~= 2 THEN
      214     3166    3                   XTENSIZESF = DCBADDR(DCBSF)->F$DCB.IXTNSIZE#;
      215     3167    3               IF DCBADDR(DCBSF)->F$DCB.XTNSIZE# ~= 0 AND
      216     3168    3                  DCBADDR(DCBSF)->F$DCB.XTNSIZE# ~= 2 THEN
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:7    
      217     3169    3                   XTN = DCBADDR(DCBSF)->F$DCB.XTNSIZE#;
      218     3170    3               END;
      219     3171    2           OPEN_FPT.V.IXTNSIZE# = XTENSIZESF;
      220     3172    2           END;
      221     3173    1       OPEN_FPT.V.SETDCB#=%YES#;
      222     3174    1       IF FIDSF = '  ' THEN
      223     3175    1           OPEN_FPT.NAME_ = VECTOR(NIL);
      224     3176    2       ELSE DO;
      225     3177    2           CALL INDEX(I,' ',FIDSF,0);
      226     3178    2           FLNM.CNT = I;
      227     3179    2           FLNM.FILE_NM = FIDSF;
      228     3180    2           OPEN_FPT.NAME_ = VECTOR(FLNM);
      229     3181    2           END;
      230     3182    1       IF SPKY_OPNSF THEN OPEN_FPT.V.FUN#=%UPDATE#;
      231     3183    1       CALL M$OPEN(OPEN_FPT) ALTRET(OPEN_ERR);
      232     3184    1       RES_FPT.V.INITZ.SCRUB# = %NO#;
      233     3185    1       RES_FPT.V.INITZ.REASSIGN#=REASGNSF;
      234     3186    1       RES_FPT.V.SETDCB#=%NO#;
      235     3187    1       RES_FPT.V.ORG# = ORGSF;
      236     3188    1       RES_FPT.V.OPER.TEST#=TESTSF;
      237     3189    1       RES_FPT.V.ACS# = ACSSF;
      238     3190    1       RES_FPT.V.FUN# = FUNSF;
      239     3191    1       IF PSNSF.VOL# > 1 THEN
      240     3192    1           RES_FPT.V.VOL# = PSNSF.VOL#;
      241     3193    1       ELSE RES_FPT.V.VOL# = 0;
      242     3194    1       IF DCBADDR(DCBSF) -> F$DCB.ASN# = %TAPE# AND REASGNSF = %NO#
      243     3195    1       THEN RES_FPT.V.OPER.NXTF# = %YES#; /* Open next on tape */
      244     3196    1       ELSE
      245     3197    1           RES_FPT.V.OPER.NXTF# = %NO#;
      246     3198    1       IF KEY_SHADWSF > 0 THEN
      247     3199    2       DO;
      248     3200    2           RES_FPT.V.ASN# = DCBADDR(KEY_SHADWSF)->F$DCB.ASN#;
      249     3201    2           RES_FPT.ACCT_ = VECTOR(DCBADDR(KEY_SHADWSF)->F$DCB.ACCT#);
      250     3202    2           RES_FPT.NAME_ = VECTOR(FLNM);
      251     3203    2           VLP_SN.SN#(0) = DCBADDR(KEY_SHADWSF)->F$DCB.PSN#;
      252     3204    2           RES_FPT.SN_ = VECTOR(VLP_SN);
      253     3205    2           END;
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:8    
      254     3206    2       ELSE DO;
      255     3207    2           RES_FPT.V.ASN# = 0; /* Unspecified (get from set cmnd) */
      256     3208    2           RES_FPT.ACCT_ = VECTOR(NIL);
      257     3209    2           RES_FPT.NAME_ = VECTOR(NIL);
      258     3210    2           RES_FPT.SN_ = VECTOR(NIL);
      259     3211    2           END;
      260     3212    1       RES_FPT.ALTKEYS_=VECTOR(NIL);
      261     3213         /*2 opens are use to merge
      262     3214         in the set command if specified*/
      263     3215    1       IF FUNSF=%CREATE# THEN
      264     3216    2       DO; /* Install create attrib */
      265     3217    2           RES_FPT.V.EXPIRE# = DCBADDR(DCBSF)->F$DCB.EXPIRE#;
      266     3218    2           RES_FPT.V.EXIST#=EXISTSF;
      267     3219    2           RES_FPT.V.IXTNSIZE#=XTENSIZESF;
      268     3220    2           IF XTN = 0 THEN
      269     3221    2               IF XTENSIZESF > 100 THEN
      270     3222    2                   RES_FPT.V.XTNSIZE# = 100;
      271     3223    2               ELSE
      272     3224    2                   RES_FPT.V.XTNSIZE# = XTENSIZESF;
      273     3225    2           ELSE
      274     3226    2               RES_FPT.V.XTNSIZE# = XTN;
      275     3227    2           IF ORGSF=%INDEXED#
      276     3228    3           THEN DO; /* FOR INDEX AREA INIT */
      277     3229    3               RES_FPT.V.KEYL# = KEYLSF;
      278     3230    3               RES_FPT.V.KEYX# = KEYXSF;
      279     3231    3               RES_FPT.ALTKEYS_=VECTOR(VLP_ALTKEYS);
      280     3232    3               END;
      281     3233
      282     3234    3           DO SELECT ORGSF;
      283     3235    3               SELECT %IDS#;
      284     3236    3               RES_FPT.V.TYPE# = 'II';
      285     3237    3               SELECT %KEYED#;
      286     3238    3               RES_FPT.V.TYPE# = '3I';
      287     3239    3               SELECT %INDEXED#;
      288     3240    3               RES_FPT.V.TYPE# = 'IX';
      289     3241    3               SELECT %RESTRICT#;
      290     3242    3               RES_FPT.V.TYPE# = 'IB'; /* FOR BLOCKED DUMP FILES */
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:9    
      291     3243    3               END;
      292     3244
      293     3245    2           IF ORGSF=%IDS# OR
      294     3246    2              ORGSF=%KEYED# OR
      295     3247    2              ORGSF=%INDEXED# OR
      296     3248    2              ORGSF=%RESTRICT#
      297     3249    3           THEN DO;
      298     3250    3               IF CARRY_ATTRIBUTESF = %YES# THEN
      299     3251    4               DO;
      300     3252    4                   RES_FPT.IFPARAM_ = VECTOR(FILE_INFO);
      301     3253    4                   RES_FPT.FPARAM_ = VECTOR(NIL);
      302     3254    4                   END;
      303     3255    4               ELSE DO;
      304     3256    4                   IF ORGSF = %KEYED# OR
      305     3257    4                      ORGSF = %INDEXED#
      306     3258    4                   THEN
      307     3259    4                       RES_FPT.ACSVEH_ = VECTOR(KEYVEH);
      308     3260    4                   ELSE
      309     3261    4                       RES_FPT.ACSVEH_ = VECTOR(VEH);
      310     3262         /* Check acnt list - default all for following cond:
      311     3263            'ACNT(0)' = blank
      312     3264            'ALL' is an element of acnt list or
      313     3265            '?' is an element of acnt list. */
      314     3266    4                   IF ACNT(0) = '  ' THEN
      315     3267    5                   DO;
      316     3268    5                       ACNT(0) = 'ALL';
      317     3269    5                       RES_FPT.ACCESS_ = VECTOR(ACNT_ALL);
      318     3270    5                       END;
      319     3271    4                   ELSE
      320     3272    5                   DO J = 0 TO 9 BY 1;
      321     3273    5                       IF ACNT(J) = 'ALL' OR ACNT(J) = '?' THEN
      322     3274    6                       DO;
      323     3275    6                           ACNT(0) = 'ALL';
      324     3276    6                           RES_FPT.ACCESS_ = VECTOR(ACNT_ALL);
      325     3277    6                           END;
      326     3278    5                       END;
      327     3279    4                   IF ACNT(0) ~= 'ALL' THEN
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:10   
      328     3280    5                   DO;
      329     3281    5                       I=0;
      330     3282    6                       DO WHILE((ACNT(I) ~= '  ') AND (I < 10));
      331     3283    6                           I = I+1;
      332     3284    6                           END;
      333     3285    5                       ACCOUNT.SIZ# = 3+((3+(10*I))/4); /* Set vector word count for
      334     3286         VLP_ATTR to 10 chrs/account-
      335     3287         each VLP_ACCESS needs 1.5 wrds*/
      336     3288    5                       IF MOD(I,2) > 0 THEN
      337     3289    5                           ACCOUNT.SIZ# = ACCOUNT.SIZ# - 1;
      338     3290    5                       ACCOUNT$=ADDR(ACCOUNT);
      339     3291    5                       ACCOUNT$=PINCRC(ACCOUNT$,16); /* Adjust pointer to point
      340     3292         first account in struct */
      341     3293    6                       DO J = 0 TO I-1;
      342     3294    6                           ACCOUNT$->ACCOUNT# = ACNT(J);
      343     3295    6                           ACCOUNT$= PINCRC(ACCOUNT$,10); /* Skip to next acnt
      344     3296         in structure */
      345     3297    6                           END;
      346     3298    5                       RES_FPT.ACCESS_ = VECTOR(ACCOUNT);
      347     3299    5                       END;
      348     3300    4                   END;
      349     3301    3               END;
      350     3302    2           END;
      351     3303    2       ELSE DO;
      352     3304    2           FIT$ = ADDR(FILE_INFO);
      353     3305    2           CALL XSF$LOCCODT(FIT$, CODE7) ALTRET(NO_PASS);
      354     3306    2           CODE07.PASS = ' ';
      355     3307    2   NO_PASS: ;
      356     3308    2           RES_FPT.FPARAM_ = VECTOR(FILE_INFO);
      357     3309    2           RES_FPT.IFPARAM_ = VECTOR(NIL);
      358     3310    2           END;
      359     3311    1       IF SPKY_OPNSF THEN RES_FPT.V.FUN#=%UPDATE#;
      360     3312    1       IF FSA_FLAG = %YES# THEN
      361     3313    2       DO;
      362     3314    2           FSA.BBUF_ = BUFSF;
      363     3315    2           CALL XSA$OPEN(RES_FPT,FSA) ALTRET(OPEN_ERR);
      364     3316    2           END;
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:11   
      365     3317    1       ELSE
      366     3318    1           CALL M$OPEN(RES_FPT) ALTRET(OPEN_ERR);
      367     3319    1       FIDSF = ' '; /* Blank out for next call */
      368     3320    1       REASGNSF = %YES#;
      369     3321    1       CARRY_ATTRIBUTESF = %YES#;
      370     3322    1       SPKY_OPNSF='0'B;
      371     3323    1       TESTSF = '0'B;
      372     3324    1       ACNTSF = '  ';
      373     3325    1       KEY_SHADWSF = 0;
      374     3326    1       RES_FPT.IFPARAM_=VECTOR(NIL);
      375     3327    1       RES_FPT.FPARAM_=VECTOR(NIL);
      376     3328    1       FSA_FLAG = %NO#; /*  FSA = fast seq access */
      377     3329    1       RETURN;
      378     3330    1   OPEN_ERR:
      379     3331    1       RES_FPT.IFPARAM_=VECTOR(NIL);
      380     3332    1       RES_FPT.FPARAM_=VECTOR(NIL);
      381     3333    1       FIDSF = ' ';
      382     3334    1       REASGNSF = %YES#;
      383     3335    1       CARRY_ATTRIBUTESF = %YES#;
      384     3336    1       SPKY_OPNSF='0'B;
      385     3337    1       TESTSF = '0'B;
      386     3338    1       ACNTSF = '  ';
      387     3339    1       KEY_SHADWSF = 0;
      388     3340    1       IF B$TCB$->B$TCB.ALT$->B$EXCFR.ERR.ERR# = %E$DCBOPEN THEN
      389     3341    1           RETURN;
      390     3342    1       IF FSA_FLAG = %YES# THEN
      391     3343    1           MONITOR_ERR = FSA.ERR;
      392     3344    1       ELSE
      393     3345    1           MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;
      394     3346    1       FSA_FLAG = %NO#;
      395     3347    1       INCL_ERR = %YES#;
      396     3348    1       CALL SYS_FUNC_ERRMSG;
      397     3349    1       ALTRETURN;
      398     3350    1   END SYS_FUNC_OPEN;
      399     3351        %EOD;

PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:12   
--  Include file information  --

   FM$FIT.:LIB_E05  is referenced.
   B_ERRORS_C.:LIB_E05  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   XS_MACRO_C.:LIB_E05  is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_OPEN.

   Procedure SYS_FUNC_OPEN requires 465 words for executable code.
   Procedure SYS_FUNC_OPEN requires 16 words of local(AUTO) storage.

PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:13   

 Object Unit name= SYS_FUNC_OPEN                              File name= ZIU$Q2SF.:ZIC0TOU
 UTS= SEP 05 '97 13:26:29.32 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$SI
    1   Data  even  none  1211   2273  SYS_FUNC_OPEN
    2  RoData even  UTS     19     23  SYS_FUNC_OPEN
    3   DCB   even  none     0      0  M$LO
    4   DCB   even  none     0      0  M$UC
    5   Proc  even  none   465    721  SYS_FUNC_OPEN
    6  RoData even  none    33     41  SYS_FUNC_OPEN

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     5      0   yes    yes     yes      Std        0  SYS_FUNC_OPEN

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    1      0  FIT$                               2      0  CODE7
    1      1  FILE_INFO                          1   2002  FSA
    1   2020  VLP_ALTKEYS                        1   2052  RES_FPT
    1   2144  OPEN_FPT
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:14   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       2 XSF$LOCCODT
 yes     yes           Std       2 XSA$OPEN
 yes     yes           Std       0 SYS_FUNC_ERRMSG
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$SI                                  BLKLSF                                KEYLSF
     KEYXSF                                DCBSF                                 ORGSF
     KEYSF                                 KEYVSF                                ACSSF
     NOTIMESF                              FUNSF                                 ASNSF
     TESTSF                                XTENSIZESF                            DISPSF
     WAITSF                                VFCSF                                 FULLSF
     BKUPSF                                BUFLNSF                               BUFSF
     SOURCESF                              DESTSF                                DATESF
     TIMESF                                UTSSF                                 DAYSF
     TSTAMPSF                              ENCRP_SEEDSF                          ERRCODESF
     MSGCODE                               INCL_ERR                              ERR_INSERT
     FIDSF_RD                              ACNT                                  EXISTSF
     SHARESF                               DCBNMSF                               KEYRSF
     NO_KEYSF                              REASGNSF                              CARRY_ATTRIBUTESF
     SUBMESSF                              SPKY_OPNSF                            POSSF
     ERRFLGSF                              MERGESF                               FSA_FLAG
     RELGSF                                UNUSED                                HELPCODE
     COUNTSF                               INDEXSF                               GAP
     PSNSF                                 ACNTSF                                KEY_SHADWSF
     REC$                                  RB                                    RE
     IE                                    IB                                    CNT
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:15   
     ICNT                                  RCNT                                  SCNT
     FIRST_SET                             RETCNT                                DMPCNT
     KCNT                                  ACNT_IDX                              I
     J                                     K                                     X
     STEPCC                                I_O_BUF$                              OUT_INDX
     I_O_SIZE                              REC_DATA_LN                           M$LO
     B$TCB$                                B$ROS$                                B$JIT$
     KEYFID                                I_O_KEY                               RESTART
     BREAK_FLAG                            ICHKSUM                               ITMCNT
     GAP1                                  M$UC

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     NULLSID                               ISSID                                 ROSID
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:16   


        1        1        /*M* ZIU$Q2SF - System interface modules for DBUTIL */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*P*
        8        8        NAME: ZIU$Q2SF
        9        9        DESCRIPTION:
       10       10
       11       11                               MONITOR  INTERFACES
       12       12                                    ZIU$Q2SF
       13       13
       14       14
       15       15                  Module  ZIU$Q2SF contains  all the  routines neccessary
       16       16               for   performing  the   monitor   interfaces.  The  naming
       17       17               convention for the  individual  monitor  procedures  is as
       18       18               follows. The name  of the procedure  is the name of the of
       19       19               the  monitor  call  preceeded by  'SYS_FUNC_' (for  system
       20       20               function). With this convention, a monitor call to release
       21       21               a dcb is is done by calling  SYS_FUNC_RELDCB which in turn
       22       22               will set up the Function Parameter Table (FPT) and perform
       23       23               the call to M$RELDCB.
       24       24
       25       25                  With  the   exception of   SYS_FUNC_CORRES,   parameter
       26       26               information   is    passed    thru   the   include    file
       27       27               ZI_GLOBAL_DBUTIL.   This  file   includes a  macro  called
       28       28               SYS_FUNC  which  contains   all  the  definitions  of  the
       29       29               variables which are used by ZIU$Q2SF with the exception of
       30       30               those variables that are  unique to a given procedure. The
       31       31               variables defined in this include file are initialized and
       32       32               SYMDEFed  in  the   procedure   ZIU$Q2UT  found in  module
       33       33               ZIU$Q2DI.  What ever   parameters are  needed  by a  given
       34       34               SYS_FUNC_  procedure will be set in  the calling procedure
       35       35               just prior to the call to that procedure. In these utility
       36       36               programs,  this parameter  setting is  usually offset by a
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:17   
       37       37               slash star star slash symbol combination.
       38       38                  EX:     (slash star star slash) DCBSF = DCBNUM(M$LO);
       39       39                          CALL SYS_FUNC_RELDCB;
       40       40                      DCBSF is the parameter being passed via the global
       41       41                      include file and contains the dcb number to be
       42       42                      released by SYS_FUNC_RELDCB.
       43       43
       44       44                  SYS_FUNC_CORRES  has only two  parameters which are two
       45       45               dcb  numbers  that  are   passed  in the  manner of  being
       46       46               enclosed by parenthesis after the procedure name. In other
       47       47               words:
       48       48                          CALL SYS_FUNC_CORRES(dcb1,dcb2) ALTRET (label);
       49       49
       50       50                  With the exception of  SYS_FUNC_OPEN, all the SYS_FUNC_
       51       51               procedures are   straight   foward in   their   functions.
       52       52               SYS_FUNC_OPEN however, deserves some individual attention.
       53       53
       54       54
       55       55
       56       56                  The basic parameters SYS_FUNC_OPEN must have are:
       57       57                      1) DCBSF       - The dcb number to be opened.
       58       58                      2) ORGSF       - The organization of file being
       59       59                                       opened(ids,key..)
       60       60                      3) TESTSF      - Will this just be a test open?
       61       61                      4) FUNSF       - What is the open function (Ie.
       62       62                                        in,update,create)
       63       63                      5) XTENSIZESF  - If create- how many granules do I
       64       64                                       reserve?
       65       65                      6) BKUPSF      - If create- is the file to be
       66       66                                       backed up?
       67       67                      7) EXISTSF     - If create- what is to be done if
       68       68                                       file exists?
       69       69                      8) ACNT        - If create- what accounts get EXEC
       70       70                                       privileges?
       71       71                      9) ACSSF       - what is the access mode?
       72       72                                       (seq,direct..)
       73       73                     10) ASNSF       - is this a file,tape or device?
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:18   
       74       74                     11) FIDSF       - is there a file name?
       75       75                     12) SHARESF     - if a file- do I open shared?
       76       76
       77       77                  In addition to  the above, there  is a parameter called
       78       78               CARRY_ATTRIBUTESF.  I will assume  normally that when  you
       79       79               are creating a  file that you want  to carry over the file
       80       80               information table of the file last openedto this new file.
       81       81               This  means that  when  creating a  dump  file from an IDS
       82       82               file, the  same NOLIST  attributes will  apply to the dump
       83       83               file as did the IDS file.  However, in a case such as area
       84       84               initialization,   you  would  not   want  to  carry  these
       85       85               attributes  because the area is  being created independent
       86       86               of any other files. Also because you would want to use the
       87       87               attributes specified by the user. For this case where file
       88       88               attributes  are not  to be  carried   from  the last  file
       89       89               opened, set CARRY_ATTRIBUTESF equal to '0'B or '%no#'.
       90       90
       91       91                  Also  the open  routine  looks  at a  parameter  called
       92       92               REASGNSF. One of the functions of the utilities is to keep
       93       93               an  area  file  and  its  associated  key  file  together.
       94       94               Therefore, if a  user an area with  an associated key file
       95       95               to  tape,  I   want  to  make  sure   the  key  file  goes
       96       96               automatically (without setting a separate dcb) to the tape
       97       97               also. By setting  REASGNSF to %no#  when opening the keyed
       98       98               file I  make sure  that I don't  overwrite  the parameters
       99       99               that are already  in the dcb and I  make sure that the set
      100      100               commands (if  any) are  not  re-applied to  the dcb  which
      101      101               would overwrite the key file name with the area file name.
      102      102
      103      103
      104      104                                                               */
      105      105        %EJECT;
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:19   
      106      106        SYS_FUNC_OPEN: PROC /*Dcbsf,  dcb number to be opened */

    106  5 000000   000000 700200 xent  SYS_FUNC_OP* TSX0  ! X66_AUTO_0
         5 000001   000020 000000                    ZERO    16,0

      107      107         /*Orgsf,  file organization */
      108      108         /*Testsf  %YES# = test open only */
      109      109         /*Xtensizesf, granuals reserved at create */
      110      110         /*Acssf    access mode (seq,direct) */
      111      111         /*Funsf    function (in,out,update) */
      112      112         /*Anssf    1=file 2=tape 3=device */
      113      113         /*Bkupsf   create attrib ..backup of file */
      114      114         /*Acnt     list of accounts w/exec priv */
      115      115         /*Fidsf    file or dcb name */
      116      116         /*Existsf  open mode of the file */
      117      117         /*Sharesf  share options on the 'DCB' */
      118      118               ALTRET;
      119      119    1   DCL M$SI DCB;
      120      120    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      121      121    1   DCL XSA$OPEN ENTRY(2) ALTRET;
      122      122    1   DCL FIT$ STATIC SYMDEF PTR ALIGNED;
      123      123    1   DCL CODE7 UBIN CONSTANT SYMDEF ALIGNED INIT(7);
      124      124    1   DCL XSF$LOCCODT ENTRY(2) ALTRET;
      125      125    1   DCL FILE_INFO (0:1023) UBIN WORD STATIC SYMDEF;
      126      126    1   DCL ACCOUNT# CHAR(8) BASED;
      127      127    1   DCL ACCOUNT$ PTR;
      128      128    1   DCL 1 FLNM,
      129      129    1         2 CNT UBIN(9) CALIGNED,
      130      130    1         2 FILE_NM CHAR(30) CALIGNED;
      131      131    1   DCL XTN UBIN;
      132      132        %INCLUDE ZI_GLOBAL_DBUTIL;
      133      310         %SYS_FUNC;
      134      402         %MISC_DCLS;
      135      455        %INCLUDE XS_MACRO_C;
      136      499         %XSA_PARAM(FPTN=FSA,
      137      500         STCLASS="STATIC SYMDEF");
      138      530
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:20   
      139      531        %INCLUDE CP_6;
      140      612        %INCLUDE CP_6_SUBS;
      141     1152        %VLP_ALTKEYS(N=20,STCLASS="STATIC SYMDEF"); /* RESERVE 20 MAX */
      142     1167        %B$TCB;
      143     1170        %B$EXCFR;
      144     1188        %INCLUDE B_ERRORS_C;
      145     2315        %VLP_SN(N=1);
      146     2328        %FPT_OPEN(FPTN=RES_FPT,STCLASS="STATIC SYMDEF");
      147     2437        %FPT_OPEN(FPTN=OPEN_FPT,STCLASS="STATIC SYMDEF");
      148     2546        %VLP_ATTR(FPTN=VEH,STCLASS=CONSTANT);
      149     2560        %VLP_ACSVEH(READ=YES,
      150     2561         UPD=YES,
      151     2562         VEHICLE='IDS',
      152     2563         LAST=";");
      153     2580        %VLP_ATTR(FPTN=KEYVEH,STCLASS=CONSTANT);
      154     2594        %VLP_ACSVEH(READ=YES,
      155     2595         WNEW=YES,
      156     2596         DELR=YES,
      157     2597         DELF=YES,
      158     2598         UPD=YES,
      159     2599         VEHICLE='IDS',
      160     2600         LAST=";");
      161     2617        %VLP_ATTR(FPTN=ACNT_ALL,STCLASS=CONSTANT);
      162     2631        %VLP_ACCESS(EXEC=YES,NOLIST=YES,ACCT='ALL',LAST=";");
      163     2648        %VLP_ATTR(FPTN=ACCOUNT);
      164     2662        %VLP_ACCESS(EXEC=NO,NOLIST=YES,ACCT='ALL');
      165     2679        %VLP_ACCESS(EXEC=YES,NOLIST=NO);
      166     2696        %VLP_ACCESS(EXEC=YES,NOLIST=NO);
      167     2713        %VLP_ACCESS(EXEC=YES,NOLIST=NO);
      168     2730        %VLP_ACCESS(EXEC=YES,NOLIST=NO);
      169     2747        %VLP_ACCESS(EXEC=YES,NOLIST=NO);
      170     2764        %VLP_ACCESS(EXEC=YES,NOLIST=NO);
      171     2781        %VLP_ACCESS(EXEC=YES,NOLIST=NO);
      172     2798        %VLP_ACCESS(EXEC=YES,NOLIST=NO);
      173     2815        %VLP_ACCESS(EXEC=YES,NOLIST=NO);
      174     2832        %VLP_ACCESS(EXEC=YES,NOLIST=NO,LAST=";");
      175     2849        /**/
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:21   
      176     2850        %F$DCB;
      177     2907        %INCLUDE FM$FIT;
      178     3128        %CODE07 (BASED="BASED(FIT$)");
      179     3131        %EJECT;
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:22   
      180     3132    1       XTN = 0;

   3132  5 000002   200014 450100                    STZ     XTN,,AUTO

      181     3133    1       RES_FPT.V.DCB# = DCBSF;

   3133  5 000003   000000 220000 xsym               LDX0    DCBSF
         5 000004   002116 740000 1                  STX0    RES_FPT+36

      182     3134    1       OPEN_FPT.V.DCB# = DCBSF;

   3134  5 000005   002210 740000 1                  STX0    OPEN_FPT+36

      183     3135        /*
      184     3136               Set up special opens for M$SI and M$LO.
      185     3137        */
      186     3138    1       IF DCBSF = DCBNUM(M$LO) OR DCBSF = DCBNUM(M$SI) THEN

   3138  5 000006   000000 236007 xsym               LDQ     M$LO,DL
         5 000007   200016 756100                    STQ     XTN+2,,AUTO
         5 000010   000000 236000 xsym               LDQ     DCBSF
         5 000011   000022 772000                    QRL     18
         5 000012   200016 116100                    CMPQ    XTN+2,,AUTO
         5 000013   000022 600000 5                  TZE     s:3140
         5 000014   000000 236007 xsym               LDQ     M$SI,DL
         5 000015   200017 756100                    STQ     XTN+3,,AUTO
         5 000016   000000 236000 xsym               LDQ     DCBSF
         5 000017   000022 772000                    QRL     18
         5 000020   200017 116100                    CMPQ    XTN+3,,AUTO
         5 000021   000042 601000 5                  TNZ     s:3146

      187     3139    2       DO;

      188     3140    2           RES_FPT.V.INITZ.SCRUB# = %YES#;

   3140  5 000022   400000 236007                    LDQ     -131072,DL
         5 000023   002116 256000 1                  ORSQ    RES_FPT+36
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:23   

      189     3141    2           RES_FPT.V.INITZ.REASSIGN# = REASGNSF ;

   3141  5 000024   000000 236000 xsym               LDQ     REASGNSF
         5 000025   000023 772000                    QRL     19
         5 000026   002116 676000 1                  ERQ     RES_FPT+36
         5 000027   200000 376007                    ANQ     65536,DL
         5 000030   002116 656000 1                  ERSQ    RES_FPT+36

      190     3142    2           RES_FPT.V.CTG# = %YES# ;

   3142  5 000031   002116 236000 1                  LDQ     RES_FPT+36
         5 000032   000000 376000 6                  ANQ     0
         5 000033   000100 276007                    ORQ     64,DL
         5 000034   002116 756000 1                  STQ     RES_FPT+36

      191     3143    2           CALL M$OPEN(RES_FPT) ALTRET(OPEN_ERR);

   3143  5 000035   002052 630400 1                  EPPR0   RES_FPT
         5 000036   450000 713400                    CLIMB   alt,open
         5 000037   410400 401760                    pmme    nvectors=18
         5 000040   000654 702000 5                  TSX2    OPEN_ERR

      192     3144    2           RETURN;

   3144  5 000041   000000 702200 xent               TSX2  ! X66_ARET

      193     3145    2           END;
      194     3146    1       IF FIDSF = '*SORT ' THEN

   3146  5 000042   040000 106400                    CMPC    fill='040'O
         5 000043   000000 000036 xsym               ADSC9   FIDSF_RD                 cn=0,n=30
         5 000044   000013 000006 2                  ADSC9   ACNT_ALL+4               cn=0,n=6
         5 000045   000051 601000 5                  TNZ     s:3149

      195     3147    1           RES_FPT.V.DISP# = %SCRATCH#;

PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:24   
   3147  5 000046   000001 236007                    LDQ     1,DL
         5 000047   002123 552004 1                  STBQ    RES_FPT+41,'04'O
         5 000050   000053 710000 5                  TRA     s:3150

      196     3148    1       ELSE
      197     3149    1           RES_FPT.V.DISP# = 0;

   3149  5 000051   000000 236003                    LDQ     0,DU
         5 000052   002123 552004 1                  STBQ    RES_FPT+41,'04'O

      198     3150    1       OPEN_FPT.V.ORG#=ORGSF;

   3150  5 000053   000000 236000 xsym               LDQ     ORGSF
         5 000054   000011 736000                    QLS     9
         5 000055   002212 552010 1                  STBQ    OPEN_FPT+38,'10'O

      199     3151    1       OPEN_FPT.V.OPER.TEST#=TESTSF;

   3151  5 000056   000000 236000 xsym               LDQ     TESTSF
         5 000057   000026 772000                    QRL     22
         5 000060   002210 676000 1                  ERQ     OPEN_FPT+36
         5 000061   020000 376007                    ANQ     8192,DL
         5 000062   002210 656000 1                  ERSQ    OPEN_FPT+36

      200     3152    1       OPEN_FPT.V.CTG#=%YES#;

   3152  5 000063   002210 236000 1                  LDQ     OPEN_FPT+36
         5 000064   000000 376000 6                  ANQ     0
         5 000065   000100 276007                    ORQ     64,DL
         5 000066   002210 756000 1                  STQ     OPEN_FPT+36

      201     3153    1       OPEN_FPT.V.SHARE#=SHARESF;

   3153  5 000067   000000 236000 xsym               LDQ     SHARESF
         5 000070   000037 772000                    QRL     31
         5 000071   002210 676000 1                  ERQ     OPEN_FPT+36
         5 000072   000030 376007                    ANQ     24,DL
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:25   
         5 000073   002210 656000 1                  ERSQ    OPEN_FPT+36

      202     3154    1       OPEN_FPT.V.ACS#=ACSSF;

   3154  5 000074   000000 236000 xsym               LDQ     ACSSF
         5 000075   002212 552004 1                  STBQ    OPEN_FPT+38,'04'O

      203     3155    1       OPEN_FPT.V.FUN#=FUNSF;

   3155  5 000076   000000 236000 xsym               LDQ     FUNSF
         5 000077   000011 736000                    QLS     9
         5 000100   002211 552010 1                  STBQ    OPEN_FPT+37,'10'O

      204     3156    1       OPEN_FPT.V.BLKL# = BLKLSF;

   3156  5 000101   000000 721000 xsym               LXL1    BLKLSF
         5 000102   002216 741000 1                  STX1    OPEN_FPT+42

      205     3157    1       BLKLSF = 0; /* RESET TO DEFAULT BLKL SIZE */

   3157  5 000103   000000 450000 xsym               STZ     BLKLSF

      206     3158    1       IF REASGNSF = %NO# THEN

   3158  5 000104   000000 234000 xsym               SZN     REASGNSF
         5 000105   000115 604000 5                  TMI     s:3161

      207     3159    1           OPEN_FPT.V.ASN#=DCBADDR(DCBSF)->F$DCB.ASN#;

   3159  5 000106   000001 470400 6                  LDP0    1
         5 000107   000000 471500                    LDP1    0,,PR0
         5 000110   100000 473510                    LDP3    0,X0,PR1
         5 000111   300032 236100                    LDQ     26,,PR3
         5 000112   000011 772000                    QRL     9
         5 000113   002211 552004 1                  STBQ    OPEN_FPT+37,'04'O
         5 000114   000117 710000 5                  TRA     s:3162

PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:26   
      208     3160    1       ELSE
      209     3161    1           OPEN_FPT.V.ASN# = ASNSF;

   3161  5 000115   000000 236000 xsym               LDQ     ASNSF
         5 000116   002211 552004 1                  STBQ    OPEN_FPT+37,'04'O

      210     3162    2       IF FUNSF = %CREATE# THEN DO;

   3162  5 000117   000000 235000 xsym               LDA     FUNSF
         5 000120   000003 115007                    CMPA    3,DL
         5 000121   000146 601000 5                  TNZ     s:3173

      211     3163    3           IF ORGSF = %INDEXED# THEN DO;

   3163  5 000122   000000 236000 xsym               LDQ     ORGSF
         5 000123   000006 116007                    CMPQ    6,DL
         5 000124   000144 601000 5                  TNZ     s:3171

      212     3164    3               IF DCBADDR(DCBSF)->F$DCB.IXTNSIZE# ~= 0 AND

   3164  5 000125   000001 470400 6                  LDP0    1
         5 000126   000000 471500                    LDP1    0,,PR0
         5 000127   100000 473510                    LDP3    0,X0,PR1
         5 000130   300041 235100                    LDA     33,,PR3
         5 000131   000135 600000 5                  TZE     s:3167
         5 000132   000002 115007                    CMPA    2,DL
         5 000133   000135 600000 5                  TZE     s:3167

      213     3165    3                  DCBADDR(DCBSF)->F$DCB.IXTNSIZE# ~= 2 THEN
      214     3166    3                   XTENSIZESF = DCBADDR(DCBSF)->F$DCB.IXTNSIZE#;

   3166  5 000134   000000 755000 xsym               STA     XTENSIZESF

      215     3167    3               IF DCBADDR(DCBSF)->F$DCB.XTNSIZE# ~= 0 AND

   3167  5 000135   300037 222100                    LDX2    31,,PR3
         5 000136   000144 600000 5                  TZE     s:3171
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:27   
         5 000137   000002 102003                    CMPX2   2,DU
         5 000140   000144 600000 5                  TZE     s:3171

      216     3168    3                  DCBADDR(DCBSF)->F$DCB.XTNSIZE# ~= 2 THEN
      217     3169    3                   XTN = DCBADDR(DCBSF)->F$DCB.XTNSIZE#;

   3169  5 000141   300037 236100                    LDQ     31,,PR3
         5 000142   000022 772000                    QRL     18
         5 000143   200014 756100                    STQ     XTN,,AUTO

      218     3170    3               END;

      219     3171    2           OPEN_FPT.V.IXTNSIZE# = XTENSIZESF;

   3171  5 000144   000000 235000 xsym               LDA     XTENSIZESF
         5 000145   002221 755000 1                  STA     OPEN_FPT+45

      220     3172    2           END;

      221     3173    1       OPEN_FPT.V.SETDCB#=%YES#;

   3173  5 000146   100000 236007                    LDQ     32768,DL
         5 000147   002210 256000 1                  ORSQ    OPEN_FPT+36

      222     3174    1       IF FIDSF = '  ' THEN

   3174  5 000150   040000 106400                    CMPC    fill='040'O
         5 000151   000000 000036 xsym               ADSC9   FIDSF_RD                 cn=0,n=30
         5 000152   000015 000002 2                  ADSC9   ACNT_ALL+6               cn=0,n=2
         5 000153   000157 601000 5                  TNZ     s:3177

      223     3175    1           OPEN_FPT.NAME_ = VECTOR(NIL);

   3175  5 000154   000002 237000 6                  LDAQ    2
         5 000155   002152 757000 1                  STAQ    OPEN_FPT+6
         5 000156   000176 710000 5                  TRA     s:3182

PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:28   
      224     3176    2       ELSE DO;

      225     3177    2           CALL INDEX(I,' ',FIDSF,0);

   3177  5 000157   000000 124400                    SCM     mask='000'O
         5 000160   000000 000036 xsym               ADSC9   FIDSF_RD                 cn=0,n=30
         5 000161   000004 000001 6                  ADSC9   4                        cn=0,n=1
         5 000162   000000 000000 xsym               ARG     I

      226     3178    2           FLNM.CNT = I;

   3178  5 000163   000000 236000 xsym               LDQ     I
         5 000164   000033 736000                    QLS     27
         5 000165   200004 552140                    STBQ    FLNM,'40'O,AUTO

      227     3179    2           FLNM.FILE_NM = FIDSF;

   3179  5 000166   040100 100400                    MLR     fill='040'O
         5 000167   000000 000036 xsym               ADSC9   FIDSF_RD                 cn=0,n=30
         5 000170   200004 200036                    ADSC9   FLNM,,AUTO               cn=1,n=30

      228     3180    2           OPEN_FPT.NAME_ = VECTOR(FLNM);

   3180  5 000171   000005 235000 6                  LDA     5
         5 000172   200016 452500                    STP2    XTN+2,,AUTO
         5 000173   200016 236100                    LDQ     XTN+2,,AUTO
         5 000174   000004 036003                    ADLQ    4,DU
         5 000175   002152 757000 1                  STAQ    OPEN_FPT+6

      229     3181    2           END;

      230     3182    1       IF SPKY_OPNSF THEN OPEN_FPT.V.FUN#=%UPDATE#;

   3182  5 000176   000000 234000 xsym               SZN     SPKY_OPNSF
         5 000177   000202 605000 5                  TPL     s:3183

   3182  5 000200   001000 236007                    LDQ     512,DL
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:29   
         5 000201   002211 552010 1                  STBQ    OPEN_FPT+37,'10'O

      231     3183    1       CALL M$OPEN(OPEN_FPT) ALTRET(OPEN_ERR);

   3183  5 000202   002144 630400 1                  EPPR0   OPEN_FPT
         5 000203   450000 713400                    CLIMB   alt,open
         5 000204   410400 401760                    pmme    nvectors=18
         5 000205   000654 702000 5                  TSX2    OPEN_ERR

      232     3184    1       RES_FPT.V.INITZ.SCRUB# = %NO#;

   3184  5 000206   000006 236000 6                  LDQ     6
         5 000207   002116 356000 1                  ANSQ    RES_FPT+36

      233     3185    1       RES_FPT.V.INITZ.REASSIGN#=REASGNSF;

   3185  5 000210   000000 236000 xsym               LDQ     REASGNSF
         5 000211   000023 772000                    QRL     19
         5 000212   002116 676000 1                  ERQ     RES_FPT+36
         5 000213   200000 376007                    ANQ     65536,DL
         5 000214   002116 656000 1                  ERSQ    RES_FPT+36

      234     3186    1       RES_FPT.V.SETDCB#=%NO#;

   3186  5 000215   000007 236000 6                  LDQ     7
         5 000216   002116 356000 1                  ANSQ    RES_FPT+36

      235     3187    1       RES_FPT.V.ORG# = ORGSF;

   3187  5 000217   000000 236000 xsym               LDQ     ORGSF
         5 000220   000011 736000                    QLS     9
         5 000221   002120 552010 1                  STBQ    RES_FPT+38,'10'O

      236     3188    1       RES_FPT.V.OPER.TEST#=TESTSF;

   3188  5 000222   000000 236000 xsym               LDQ     TESTSF
         5 000223   000026 772000                    QRL     22
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:30   
         5 000224   002116 676000 1                  ERQ     RES_FPT+36
         5 000225   020000 376007                    ANQ     8192,DL
         5 000226   002116 656000 1                  ERSQ    RES_FPT+36

      237     3189    1       RES_FPT.V.ACS# = ACSSF;

   3189  5 000227   000000 236000 xsym               LDQ     ACSSF
         5 000230   002120 552004 1                  STBQ    RES_FPT+38,'04'O

      238     3190    1       RES_FPT.V.FUN# = FUNSF;

   3190  5 000231   000000 236000 xsym               LDQ     FUNSF
         5 000232   000011 736000                    QLS     9
         5 000233   002117 552010 1                  STBQ    RES_FPT+37,'10'O

      239     3191    1       IF PSNSF.VOL# > 1 THEN

   3191  5 000234   000000 236000 xsym               LDQ     PSNSF
         5 000235   777000 376003                    ANQ     -512,DU
         5 000236   002000 116003                    CMPQ    1024,DU
         5 000237   000243 602000 5                  TNC     s:3193

      240     3192    1           RES_FPT.V.VOL# = PSNSF.VOL#;

   3192  5 000240   000000 236000 xsym               LDQ     PSNSF
         5 000241   002133 552040 1                  STBQ    RES_FPT+49,'40'O
         5 000242   000245 710000 5                  TRA     s:3194

      241     3193    1       ELSE RES_FPT.V.VOL# = 0;

   3193  5 000243   000000 236003                    LDQ     0,DU
         5 000244   002133 552040 1                  STBQ    RES_FPT+49,'40'O

      242     3194    1       IF DCBADDR(DCBSF) -> F$DCB.ASN# = %TAPE# AND REASGNSF = %NO#

   3194  5 000245   000001 470400 6                  LDP0    1
         5 000246   000000 471500                    LDP1    0,,PR0
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:31   
         5 000247   000000 220000 xsym               LDX0    DCBSF
         5 000250   100000 473510                    LDP3    0,X0,PR1
         5 000251   300032 236100                    LDQ     26,,PR3
         5 000252   777000 376007                    ANQ     -512,DL
         5 000253   002000 116007                    CMPQ    1024,DL
         5 000254   000262 601000 5                  TNZ     s:3197
         5 000255   000000 234000 xsym               SZN     REASGNSF
         5 000256   000262 604000 5                  TMI     s:3197

      243     3195    1       THEN RES_FPT.V.OPER.NXTF# = %YES#; /* Open next on tape */

   3195  5 000257   004000 236007                    LDQ     2048,DL
         5 000260   002116 256000 1                  ORSQ    RES_FPT+36
         5 000261   000264 710000 5                  TRA     s:3198

      244     3196    1       ELSE
      245     3197    1           RES_FPT.V.OPER.NXTF# = %NO#;

   3197  5 000262   000010 236000 6                  LDQ     8
         5 000263   002116 356000 1                  ANSQ    RES_FPT+36

      246     3198    1       IF KEY_SHADWSF > 0 THEN

   3198  5 000264   000000 235000 xsym               LDA     KEY_SHADWSF
         5 000265   000314 600000 5                  TZE     s:3207

      247     3199    2       DO;

      248     3200    2           RES_FPT.V.ASN# = DCBADDR(KEY_SHADWSF)->F$DCB.ASN#;

   3200  5 000266   100000 474505                    LDP4    0,AL,PR1
         5 000267   400032 236100                    LDQ     26,,PR4
         5 000270   000011 772000                    QRL     9
         5 000271   002117 552004 1                  STBQ    RES_FPT+37,'04'O

      249     3201    2           RES_FPT.ACCT_ = VECTOR(DCBADDR(KEY_SHADWSF)->F$DCB.ACCT#);

PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:32   
   3201  5 000272   000000 721000 xsym               LXL1    KEY_SHADWSF
         5 000273   100000 474511                    LDP4    0,X1,PR1
         5 000274   000011 235000 6                  LDA     9
         5 000275   200016 454500                    STP4    XTN+2,,AUTO
         5 000276   200016 236100                    LDQ     XTN+2,,AUTO
         5 000277   000020 036003                    ADLQ    16,DU
         5 000300   002076 757000 1                  STAQ    RES_FPT+20

      250     3202    2           RES_FPT.NAME_ = VECTOR(FLNM);

   3202  5 000301   000005 235000 6                  LDA     5
         5 000302   200016 452500                    STP2    XTN+2,,AUTO
         5 000303   200016 236100                    LDQ     XTN+2,,AUTO
         5 000304   000004 036003                    ADLQ    4,DU
         5 000305   002060 757000 1                  STAQ    RES_FPT+6

      251     3203    2           VLP_SN.SN#(0) = DCBADDR(KEY_SHADWSF)->F$DCB.PSN#;

   3203  5 000306   040000 100500                    MLR     fill='040'O
         5 000307   400024 000006                    ADSC9   20,,PR4                  cn=0,n=6
         5 000310   002047 000006 1                  ADSC9   VLP_SN+1                 cn=0,n=6

      252     3204    2           RES_FPT.SN_ = VECTOR(VLP_SN);

   3204  5 000311   000012 237000 6                  LDAQ    10
         5 000312   002054 757000 1                  STAQ    RES_FPT+2

      253     3205    2           END;

   3205  5 000313   000324 710000 5                  TRA     s:3212

      254     3206    2       ELSE DO;

      255     3207    2           RES_FPT.V.ASN# = 0; /* Unspecified (get from set cmnd) */

   3207  5 000314   000000 236003                    LDQ     0,DU
         5 000315   002117 552004 1                  STBQ    RES_FPT+37,'04'O
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:33   

      256     3208    2           RES_FPT.ACCT_ = VECTOR(NIL);

   3208  5 000316   000002 237000 6                  LDAQ    2
         5 000317   002076 757000 1                  STAQ    RES_FPT+20

      257     3209    2           RES_FPT.NAME_ = VECTOR(NIL);

   3209  5 000320   000002 237000 6                  LDAQ    2
         5 000321   002060 757000 1                  STAQ    RES_FPT+6

      258     3210    2           RES_FPT.SN_ = VECTOR(NIL);

   3210  5 000322   000002 237000 6                  LDAQ    2
         5 000323   002054 757000 1                  STAQ    RES_FPT+2

      259     3211    2           END;

      260     3212    1       RES_FPT.ALTKEYS_=VECTOR(NIL);

   3212  5 000324   000002 237000 6                  LDAQ    2
         5 000325   002114 757000 1                  STAQ    RES_FPT+34

      261     3213         /*2 opens are use to merge
      262     3214         in the set command if specified*/
      263     3215    1       IF FUNSF=%CREATE# THEN

   3215  5 000326   000000 235000 xsym               LDA     FUNSF
         5 000327   000003 115007                    CMPA    3,DL
         5 000330   000571 601000 5                  TNZ     s:3304

      264     3216    2       DO; /* Install create attrib */

      265     3217    2           RES_FPT.V.EXPIRE# = DCBADDR(DCBSF)->F$DCB.EXPIRE#;

   3217  5 000331   300035 235100                    LDA     29,,PR3
         5 000332   002131 755000 1                  STA     RES_FPT+47
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:34   

      266     3218    2           RES_FPT.V.EXIST#=EXISTSF;

   3218  5 000333   000000 236000 xsym               LDQ     EXISTSF
         5 000334   000033 772000                    QRL     27
         5 000335   002116 676000 1                  ERQ     RES_FPT+36
         5 000336   000600 376007                    ANQ     384,DL
         5 000337   002116 656000 1                  ERSQ    RES_FPT+36

      267     3219    2           RES_FPT.V.IXTNSIZE#=XTENSIZESF;

   3219  5 000340   000000 236000 xsym               LDQ     XTENSIZESF
         5 000341   002127 756000 1                  STQ     RES_FPT+45

      268     3220    2           IF XTN = 0 THEN

   3220  5 000342   200014 235100                    LDA     XTN,,AUTO
         5 000343   000354 601000 5                  TNZ     s:3226

      269     3221    2               IF XTENSIZESF > 100 THEN

   3221  5 000344   000145 116007                    CMPQ    101,DL
         5 000345   000351 602000 5                  TNC     s:3224

      270     3222    2                   RES_FPT.V.XTNSIZE# = 100;

   3222  5 000346   000144 221003                    LDX1    100,DU
         5 000347   002126 441000 1                  SXL1    RES_FPT+44
         5 000350   000356 710000 5                  TRA     s:3227

      271     3223    2               ELSE
      272     3224    2                   RES_FPT.V.XTNSIZE# = XTENSIZESF;

   3224  5 000351   000000 621006                    EAX1    0,QL
         5 000352   002126 441000 1                  SXL1    RES_FPT+44
         5 000353   000356 710000 5                  TRA     s:3227

PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:35   
      273     3225    2           ELSE
      274     3226    2               RES_FPT.V.XTNSIZE# = XTN;

   3226  5 000354   000000 621005                    EAX1    0,AL
         5 000355   002126 441000 1                  SXL1    RES_FPT+44

      275     3227    2           IF ORGSF=%INDEXED#

   3227  5 000356   000000 235000 xsym               LDA     ORGSF
         5 000357   000006 115007                    CMPA    6,DL
         5 000360   000370 601000 5                  TNZ     s:3234

      276     3228    3           THEN DO; /* FOR INDEX AREA INIT */

      277     3229    3               RES_FPT.V.KEYL# = KEYLSF;

   3229  5 000361   000000 236000 xsym               LDQ     KEYLSF
         5 000362   000011 736000                    QLS     9
         5 000363   002123 552010 1                  STBQ    RES_FPT+41,'10'O

      278     3230    3               RES_FPT.V.KEYX# = KEYXSF;

   3230  5 000364   000000 722000 xsym               LXL2    KEYXSF
         5 000365   002123 742000 1                  STX2    RES_FPT+41

      279     3231    3               RES_FPT.ALTKEYS_=VECTOR(VLP_ALTKEYS);

   3231  5 000366   000014 237000 6                  LDAQ    12
         5 000367   002114 757000 1                  STAQ    RES_FPT+34

      280     3232    3               END;

      281     3233
      282     3234    3           DO SELECT ORGSF;

   3234  5 000370   000000 236000 xsym               LDQ     ORGSF
         5 000371   000006 116007                    CMPQ    6,DL
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:36   
         5 000372   000402 602000 5                  TNC     s:3234+10
         5 000373   000413 600000 5                  TZE     s:3240
         5 000374   000007 116007                    CMPQ    7,DL
         5 000375   000420 602000 5                  TNC     s:3245
         5 000376   000405 600000 5                  TZE     s:3236
         5 000377   000022 116007                    CMPQ    18,DL
         5 000400   000420 601000 5                  TNZ     s:3245
         5 000401   000416 710000 5                  TRA     s:3242
         5 000402   000002 116007                    CMPQ    2,DL
         5 000403   000420 601000 5                  TNZ     s:3245
         5 000404   000410 710000 5                  TRA     s:3238

      283     3235    3               SELECT %IDS#;

      284     3236    3               RES_FPT.V.TYPE# = 'II';

   3236  5 000405   000016 222000 2                  LDX2    ACNT_ALL+7
         5 000406   002121 742000 1                  STX2    RES_FPT+39
         5 000407   000420 710000 5                  TRA     s:3245

      285     3237    3               SELECT %KEYED#;

      286     3238    3               RES_FPT.V.TYPE# = '3I';

   3238  5 000410   000017 222000 2                  LDX2    ACNT_ALL+8
         5 000411   002121 742000 1                  STX2    RES_FPT+39
         5 000412   000420 710000 5                  TRA     s:3245

      287     3239    3               SELECT %INDEXED#;

      288     3240    3               RES_FPT.V.TYPE# = 'IX';

   3240  5 000413   000020 222000 2                  LDX2    ACNT_ALL+9
         5 000414   002121 742000 1                  STX2    RES_FPT+39
         5 000415   000420 710000 5                  TRA     s:3245

      289     3241    3               SELECT %RESTRICT#;
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:37   

      290     3242    3               RES_FPT.V.TYPE# = 'IB'; /* FOR BLOCKED DUMP FILES */

   3242  5 000416   000021 222000 2                  LDX2    ACNT_ALL+10
         5 000417   002121 742000 1                  STX2    RES_FPT+39

      291     3243    3               END;

      292     3244
      293     3245    2           IF ORGSF=%IDS# OR

   3245  5 000420   000007 116007                    CMPQ    7,DL
         5 000421   000430 600000 5                  TZE     s:3250
         5 000422   000002 116007                    CMPQ    2,DL
         5 000423   000430 600000 5                  TZE     s:3250
         5 000424   000006 116007                    CMPQ    6,DL
         5 000425   000430 600000 5                  TZE     s:3250
         5 000426   000022 116007                    CMPQ    18,DL
         5 000427   000610 601000 5                  TNZ     s:3311

      294     3246    2              ORGSF=%KEYED# OR
      295     3247    2              ORGSF=%INDEXED# OR
      296     3248    2              ORGSF=%RESTRICT#
      297     3249    3           THEN DO;

      298     3250    3               IF CARRY_ATTRIBUTESF = %YES# THEN

   3250  5 000430   000000 234000 xsym               SZN     CARRY_ATTRIBUTESF
         5 000431   000437 605000 5                  TPL     s:3256

      299     3251    4               DO;

      300     3252    4                   RES_FPT.IFPARAM_ = VECTOR(FILE_INFO);

   3252  5 000432   000016 237000 6                  LDAQ    14
         5 000433   002100 757000 1                  STAQ    RES_FPT+22

PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:38   
      301     3253    4                   RES_FPT.FPARAM_ = VECTOR(NIL);

   3253  5 000434   000002 237000 6                  LDAQ    2
         5 000435   002102 757000 1                  STAQ    RES_FPT+24

      302     3254    4                   END;

   3254  5 000436   000610 710000 5                  TRA     s:3311

      303     3255    4               ELSE DO;

      304     3256    4                   IF ORGSF = %KEYED# OR

   3256  5 000437   000002 116007                    CMPQ    2,DL
         5 000440   000443 600000 5                  TZE     s:3259
         5 000441   000006 116007                    CMPQ    6,DL
         5 000442   000446 601000 5                  TNZ     s:3261

      305     3257    4                      ORGSF = %INDEXED#
      306     3258    4                   THEN
      307     3259    4                       RES_FPT.ACSVEH_ = VECTOR(KEYVEH);

   3259  5 000443   000020 237000 6                  LDAQ    16
         5 000444   002066 757000 1                  STAQ    RES_FPT+12
         5 000445   000450 710000 5                  TRA     s:3266

      308     3260    4                   ELSE
      309     3261    4                       RES_FPT.ACSVEH_ = VECTOR(VEH);

   3261  5 000446   000022 237000 6                  LDAQ    18
         5 000447   002066 757000 1                  STAQ    RES_FPT+12

      310     3262         /* Check acnt list - default all for following cond:
      311     3263            'ACNT(0)' = blank
      312     3264            'ALL' is an element of acnt list or
      313     3265            '?' is an element of acnt list. */
      314     3266    4                   IF ACNT(0) = '  ' THEN
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:39   

   3266  5 000450   040000 106400                    CMPC    fill='040'O
         5 000451   000000 000010 xsym               ADSC9   ACNT                     cn=0,n=8
         5 000452   000015 000002 2                  ADSC9   ACNT_ALL+6               cn=0,n=2
         5 000453   000462 601000 5                  TNZ     s:3272

      315     3267    5                   DO;

      316     3268    5                       ACNT(0) = 'ALL';

   3268  5 000454   040000 100400                    MLR     fill='040'O
         5 000455   000022 000003 2                  ADSC9   ACNT_ALL+11              cn=0,n=3
         5 000456   000000 000010 xsym               ADSC9   ACNT                     cn=0,n=8

      317     3269    5                       RES_FPT.ACCESS_ = VECTOR(ACNT_ALL);

   3269  5 000457   000024 237000 6                  LDAQ    20
         5 000460   002064 757000 1                  STAQ    RES_FPT+10

      318     3270    5                       END;

   3270  5 000461   000506 710000 5                  TRA     s:3279

      319     3271    4                   ELSE
      320     3272    5                   DO J = 0 TO 9 BY 1;

   3272  5 000462   000000 450000 xsym               STZ     J

      321     3273    5                       IF ACNT(J) = 'ALL' OR ACNT(J) = '?' THEN

   3273  5 000463   000000 235000 xsym               LDA     J
         5 000464   000003 735000                    ALS     3
         5 000465   040000 106405                    CMPC    fill='040'O
         5 000466   000000 000010 xsym               ADSC9   ACNT,A                   cn=0,n=8
         5 000467   000022 000003 2                  ADSC9   ACNT_ALL+11              cn=0,n=3
         5 000470   000475 600000 5                  TZE     s:3275
         5 000471   040000 106405                    CMPC    fill='040'O
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:40   
         5 000472   000000 000010 xsym               ADSC9   ACNT,A                   cn=0,n=8
         5 000473   000026 000001 6                  ADSC9   22                       cn=0,n=1
         5 000474   000502 601000 5                  TNZ     s:3278

      322     3274    6                       DO;

      323     3275    6                           ACNT(0) = 'ALL';

   3275  5 000475   040000 100400                    MLR     fill='040'O
         5 000476   000022 000003 2                  ADSC9   ACNT_ALL+11              cn=0,n=3
         5 000477   000000 000010 xsym               ADSC9   ACNT                     cn=0,n=8

      324     3276    6                           RES_FPT.ACCESS_ = VECTOR(ACNT_ALL);

   3276  5 000500   000024 237000 6                  LDAQ    20
         5 000501   002064 757000 1                  STAQ    RES_FPT+10

      325     3277    6                           END;

      326     3278    5                       END;

   3278  5 000502   000000 054000 xsym               AOS     J
         5 000503   000000 235000 xsym               LDA     J
         5 000504   000011 115007                    CMPA    9,DL
         5 000505   000463 604400 5                  TMOZ    s:3273

      327     3279    4                   IF ACNT(0) ~= 'ALL' THEN

   3279  5 000506   040000 106400                    CMPC    fill='040'O
         5 000507   000000 000010 xsym               ADSC9   ACNT                     cn=0,n=8
         5 000510   000022 000003 2                  ADSC9   ACNT_ALL+11              cn=0,n=3
         5 000511   000610 600000 5                  TZE     s:3311

      328     3280    5                   DO;

      329     3281    5                       I=0;

PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:41   
   3281  5 000512   000000 450000 xsym               STZ     I

      330     3282    6                       DO WHILE((ACNT(I) ~= '  ') AND (I < 10));

   3282  5 000513   000515 710000 5                  TRA     s:3284

      331     3283    6                           I = I+1;

   3283  5 000514   000000 054000 xsym               AOS     I

      332     3284    6                           END;

   3284  5 000515   000000 235000 xsym               LDA     I
         5 000516   000003 735000                    ALS     3
         5 000517   040000 106405                    CMPC    fill='040'O
         5 000520   000000 000010 xsym               ADSC9   ACNT,A                   cn=0,n=8
         5 000521   000015 000002 2                  ADSC9   ACNT_ALL+6               cn=0,n=2
         5 000522   000526 600000 5                  TZE     s:3285
         5 000523   000000 236000 xsym               LDQ     I
         5 000524   000012 116007                    CMPQ    10,DL
         5 000525   000514 604000 5                  TMI     s:3283

      333     3285    5                       ACCOUNT.SIZ# = 3+((3+(10*I))/4); /* Set vector word count for

   3285  5 000526   000000 236000 xsym               LDQ     I
         5 000527   000012 402007                    MPY     10,DL
         5 000530   000003 036007                    ADLQ    3,DL
         5 000531   000004 506007                    DIV     4,DL
         5 000532   000003 620006                    EAX0    3,QL
         5 000533   002236 440000 1                  SXL0    ACCOUNT

      334     3286         VLP_ATTR to 10 chrs/account-
      335     3287         each VLP_ACCESS needs 1.5 wrds*/
      336     3288    5                       IF MOD(I,2) > 0 THEN

   3288  5 000534   000000 236000 xsym               LDQ     I
         5 000535   000002 506007                    DIV     2,DL
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:42   
         5 000536   000044 733000                    LRS     36
         5 000537   000000 116003                    CMPQ    0,DU
         5 000540   000543 604400 5                  TMOZ    s:3290

      337     3289    5                           ACCOUNT.SIZ# = ACCOUNT.SIZ# - 1;

   3289  5 000541   777777 621010                    EAX1    -1,X0
         5 000542   002236 441000 1                  SXL1    ACCOUNT

      338     3290    5                       ACCOUNT$=ADDR(ACCOUNT);

   3290  5 000543   000027 236000 6                  LDQ     23
         5 000544   200003 756100                    STQ     ACCOUNT$,,AUTO

      339     3291    5                       ACCOUNT$=PINCRC(ACCOUNT$,16); /* Adjust pointer to point

   3291  5 000545   000004 036003                    ADLQ    4,DU
         5 000546   200003 756100                    STQ     ACCOUNT$,,AUTO

      340     3292         first account in struct */
      341     3293    6                       DO J = 0 TO I-1;

   3293  5 000547   000000 450000 xsym               STZ     J
         5 000550   000563 710000 5                  TRA     s:3297+1

      342     3294    6                           ACCOUNT$->ACCOUNT# = ACNT(J);

   3294  5 000551   000000 235000 xsym               LDA     J
         5 000552   000003 735000                    ALS     3
         5 000553   200003 470500                    LDP0    ACCOUNT$,,AUTO
         5 000554   040100 100405                    MLR     fill='040'O
         5 000555   000000 000010 xsym               ADSC9   ACNT,A                   cn=0,n=8
         5 000556   000000 000010                    ADSC9   0,,PR0                   cn=0,n=8

      343     3295    6                           ACCOUNT$= PINCRC(ACCOUNT$,10); /* Skip to next acnt

   3295  5 000557   200003 236100                    LDQ     ACCOUNT$,,AUTO
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:43   
         5 000560   000030 036000 6                  ADLQ    24
         5 000561   200003 756100                    STQ     ACCOUNT$,,AUTO

      344     3296         in structure */
      345     3297    6                           END;

   3297  5 000562   000000 054000 xsym               AOS     J
         5 000563   000000 236000 xsym               LDQ     J
         5 000564   000000 116000 xsym               CMPQ    I
         5 000565   000551 604000 5                  TMI     s:3294

      346     3298    5                       RES_FPT.ACCESS_ = VECTOR(ACCOUNT);

   3298  5 000566   000032 237000 6                  LDAQ    26
         5 000567   002064 757000 1                  STAQ    RES_FPT+10

      347     3299    5                       END;

      348     3300    4                   END;

      349     3301    3               END;

      350     3302    2           END;

   3302  5 000570   000610 710000 5                  TRA     s:3311

      351     3303    2       ELSE DO;

      352     3304    2           FIT$ = ADDR(FILE_INFO);

   3304  5 000571   000017 236000 6                  LDQ     15
         5 000572   000000 756000 1                  STQ     FIT$

      353     3305    2           CALL XSF$LOCCODT(FIT$, CODE7) ALTRET(NO_PASS);

   3305  5 000573   000034 630400 6                  EPPR0   28
         5 000574   000031 631400 6                  EPPR1   25
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:44   
         5 000575   000000 701000 xent               TSX1    XSF$LOCCODT
         5 000576   000604 702000 5                  TSX2    NO_PASS

      354     3306    2           CODE07.PASS = ' ';

   3306  5 000577   000000 470400 1                  LDP0    FIT$
         5 000600   000004 235000 6                  LDA     4
         5 000601   000004 236000 6                  LDQ     4
         5 000602   000000 755100                    STA     0,,PR0
         5 000603   000001 756100                    STQ     1,,PR0

   3306  5 000604                       NO_PASS      null
      355     3307    2   NO_PASS: ;
      356     3308    2           RES_FPT.FPARAM_ = VECTOR(FILE_INFO);

   3308  5 000604   000016 237000 6                  LDAQ    14
         5 000605   002102 757000 1                  STAQ    RES_FPT+24

      357     3309    2           RES_FPT.IFPARAM_ = VECTOR(NIL);

   3309  5 000606   000002 237000 6                  LDAQ    2
         5 000607   002100 757000 1                  STAQ    RES_FPT+22

      358     3310    2           END;

      359     3311    1       IF SPKY_OPNSF THEN RES_FPT.V.FUN#=%UPDATE#;

   3311  5 000610   000000 234000 xsym               SZN     SPKY_OPNSF
         5 000611   000614 605000 5                  TPL     s:3312

   3311  5 000612   001000 236007                    LDQ     512,DL
         5 000613   002117 552010 1                  STBQ    RES_FPT+37,'10'O

      360     3312    1       IF FSA_FLAG = %YES# THEN

   3312  5 000614   000000 234000 xsym               SZN     FSA_FLAG
         5 000615   000626 605000 5                  TPL     s:3318
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:45   

      361     3313    2       DO;

      362     3314    2           FSA.BBUF_ = BUFSF;

   3314  5 000616   000000 100400                    MLR     fill='000'O
         5 000617   000000 000010 xsym               ADSC9   BUFSF                    cn=0,n=8
         5 000620   002006 000010 1                  ADSC9   FSA+4                    cn=0,n=8

      363     3315    2           CALL XSA$OPEN(RES_FPT,FSA) ALTRET(OPEN_ERR);

   3315  5 000621   000036 630400 6                  EPPR0   30
         5 000622   000031 631400 6                  EPPR1   25
         5 000623   000000 701000 xent               TSX1    XSA$OPEN
         5 000624   000654 702000 5                  TSX2    OPEN_ERR

      364     3316    2           END;

   3316  5 000625   000632 710000 5                  TRA     s:3319

      365     3317    1       ELSE
      366     3318    1           CALL M$OPEN(RES_FPT) ALTRET(OPEN_ERR);

   3318  5 000626   002052 630400 1                  EPPR0   RES_FPT
         5 000627   450000 713400                    CLIMB   alt,open
         5 000630   410400 401760                    pmme    nvectors=18
         5 000631   000654 702000 5                  TSX2    OPEN_ERR

      367     3319    1       FIDSF = ' '; /* Blank out for next call */

   3319  5 000632   040000 100400                    MLR     fill='040'O
         5 000633   000004 000001 6                  ADSC9   4                        cn=0,n=1
         5 000634   000000 000036 xsym               ADSC9   FIDSF_RD                 cn=0,n=30

      368     3320    1       REASGNSF = %YES#;

   3320  5 000635   400000 236003                    LDQ     -131072,DU
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:46   
         5 000636   000000 756000 xsym               STQ     REASGNSF

      369     3321    1       CARRY_ATTRIBUTESF = %YES#;

   3321  5 000637   000000 756000 xsym               STQ     CARRY_ATTRIBUTESF

      370     3322    1       SPKY_OPNSF='0'B;

   3322  5 000640   000000 450000 xsym               STZ     SPKY_OPNSF

      371     3323    1       TESTSF = '0'B;

   3323  5 000641   000000 450000 xsym               STZ     TESTSF

      372     3324    1       ACNTSF = '  ';

   3324  5 000642   040000 100400                    MLR     fill='040'O
         5 000643   000015 000002 2                  ADSC9   ACNT_ALL+6               cn=0,n=2
         5 000644   000000 000010 xsym               ADSC9   ACNTSF                   cn=0,n=8

      373     3325    1       KEY_SHADWSF = 0;

   3325  5 000645   000000 450000 xsym               STZ     KEY_SHADWSF

      374     3326    1       RES_FPT.IFPARAM_=VECTOR(NIL);

   3326  5 000646   000002 237000 6                  LDAQ    2
         5 000647   002100 757000 1                  STAQ    RES_FPT+22

      375     3327    1       RES_FPT.FPARAM_=VECTOR(NIL);

   3327  5 000650   000002 237000 6                  LDAQ    2
         5 000651   002102 757000 1                  STAQ    RES_FPT+24

      376     3328    1       FSA_FLAG = %NO#; /*  FSA = fast seq access */

   3328  5 000652   000000 450000 xsym               STZ     FSA_FLAG
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:47   

      377     3329    1       RETURN;

   3329  5 000653   000000 702200 xent               TSX2  ! X66_ARET

      378     3330    1   OPEN_ERR:
      379     3331    1       RES_FPT.IFPARAM_=VECTOR(NIL);

   3331  5 000654   000002 237000 6     OPEN_ERR     LDAQ    2
         5 000655   002100 757000 1                  STAQ    RES_FPT+22

      380     3332    1       RES_FPT.FPARAM_=VECTOR(NIL);

   3332  5 000656   000002 237000 6                  LDAQ    2
         5 000657   002102 757000 1                  STAQ    RES_FPT+24

      381     3333    1       FIDSF = ' ';

   3333  5 000660   040000 100400                    MLR     fill='040'O
         5 000661   000004 000001 6                  ADSC9   4                        cn=0,n=1
         5 000662   000000 000036 xsym               ADSC9   FIDSF_RD                 cn=0,n=30

      382     3334    1       REASGNSF = %YES#;

   3334  5 000663   400000 236003                    LDQ     -131072,DU
         5 000664   000000 756000 xsym               STQ     REASGNSF

      383     3335    1       CARRY_ATTRIBUTESF = %YES#;

   3335  5 000665   000000 756000 xsym               STQ     CARRY_ATTRIBUTESF

      384     3336    1       SPKY_OPNSF='0'B;

   3336  5 000666   000000 450000 xsym               STZ     SPKY_OPNSF

      385     3337    1       TESTSF = '0'B;

PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:48   
   3337  5 000667   000000 450000 xsym               STZ     TESTSF

      386     3338    1       ACNTSF = '  ';

   3338  5 000670   040000 100400                    MLR     fill='040'O
         5 000671   000015 000002 2                  ADSC9   ACNT_ALL+6               cn=0,n=2
         5 000672   000000 000010 xsym               ADSC9   ACNTSF                   cn=0,n=8

      387     3339    1       KEY_SHADWSF = 0;

   3339  5 000673   000000 450000 xsym               STZ     KEY_SHADWSF

      388     3340    1       IF B$TCB$->B$TCB.ALT$->B$EXCFR.ERR.ERR# = %E$DCBOPEN THEN

   3340  5 000674   000000 470400 xsym               LDP0    B$TCB$
         5 000675   000000 471500                    LDP1    0,,PR0
         5 000676   100102 236100                    LDQ     66,,PR1
         5 000677   377770 376007                    ANQ     131064,DL
         5 000700   001440 116007                    CMPQ    800,DL
         5 000701   000703 601000 5                  TNZ     s:3342

      389     3341    1           RETURN;

   3341  5 000702   000000 702200 xent               TSX2  ! X66_ARET

      390     3342    1       IF FSA_FLAG = %YES# THEN

   3342  5 000703   000000 234000 xsym               SZN     FSA_FLAG
         5 000704   000710 605000 5                  TPL     s:3345

      391     3343    1           MONITOR_ERR = FSA.ERR;

   3343  5 000705   002003 236000 1                  LDQ     FSA+1
         5 000706   000000 756000 xsym               STQ     MSGCODE
         5 000707   000712 710000 5                  TRA     s:3346

      392     3344    1       ELSE
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:49   
      393     3345    1           MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;

   3345  5 000710   100102 236100                    LDQ     66,,PR1
         5 000711   000000 756000 xsym               STQ     MSGCODE

      394     3346    1       FSA_FLAG = %NO#;

   3346  5 000712   000000 450000 xsym               STZ     FSA_FLAG

      395     3347    1       INCL_ERR = %YES#;

   3347  5 000713   400000 236003                    LDQ     -131072,DU
         5 000714   000000 756000 xsym               STQ     INCL_ERR

      396     3348    1       CALL SYS_FUNC_ERRMSG;

   3348  5 000715   000040 631400 6                  EPPR1   32
         5 000716   000000 701000 xent               TSX1    SYS_FUNC_ERRMSG
         5 000717   000000 011000                    NOP     0

      397     3349    1       ALTRETURN;

   3349  5 000720   000000 702200 xent               TSX2  ! X66_AALT

FILE_INFO
 Sect OctLoc
   1     001   ****** ******   ****** ******   ****** ******   ****** ******    ................

FSA
 Sect OctLoc
   1    2002   000000 000000   000000 000000   000000 177640   000000 006014    ................
   1    2006   000000 177640   000000 006014   125116 106101   123124 041077    ........UNFAST!?
   1    2012   000000 000000   000000 000000   000000 000000   000000 000000    ................
   1    2016   000000 000000   040000 000000                                    .... ...

VLP_ALTKEYS
 Sect OctLoc
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:50   
   1    2020   000000 000024   000001 000000   000001 000000   000001 000000    ................
   1    2024   000001 000000   000001 000000   000001 000000   000001 000000    ................
   1    2044*  000001 000000                                                    ....

VLP_SN
 Sect OctLoc
   1    2046   000000 000001   040040 040040   040040 ******                    ....      ..

RES_FPT
 Sect OctLoc
   1    2052   000025 777640   002116 006000   000000 177640   000000 006014    .....N..........
   1    2056   000000 177640   000000 006014   000000 177640   000000 006014    ................
   1    2116*  000000 000042   000000 000000   252525 000000   000040 252520    ..."......... ..
   1    2122   000040 040040   000000 000000   000000 777777   000000 000000    .   ............
   1    2126   000000 000000   000000 000000   000000 000000   000000 000000    ................
   1    2132   251000 622000   000000 000000   000000 000000   111250 000000    ............I...
   1    2136   040040 040040   000000 000000   000000 000000   000000 000000        ............
   1    2142   000000 000000   ****** ******                                    ........

OPEN_FPT
 Sect OctLoc
   1    2144   000025 777640   002210 006000   000000 177640   000000 006014    ................
   1    2150   000000 177640   000000 006014   000000 177640   000000 006014    ................
   1    2210*  000000 000042   000000 000000   252525 000000   000040 252520    ..."......... ..
   1    2214   000040 040040   000000 000000   000000 777777   000000 000000    .   ............
   1    2220   000000 000000   000000 000000   000000 000000   000000 000000    ................
   1    2224   251000 622000   000000 000000   000000 000000   111250 000000    ............I...
   1    2230   040040 040040   000000 000000   000000 000000   000000 000000        ............
   1    2234   000000 000000   ****** ******                                    ........

ACCOUNT
 Sect OctLoc
   1    2236   000000 000034   010000 101114   114040 040040   040040 002000    ......ALL     ..
   1    2242   040040 040040   040040 040040   002000 040040   040040 040040            ..
   1    2246   040040 002000   040040 040040   040040 040040   002000 040040      ..        ..
   1    2252   040040 040040   040040 002000   040040 040040   040040 040040          ..
   1    2256   002000 040040   040040 040040   040040 002000   040040 040040    ..        ..
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:51   
   1    2262   040040 040040   002000 040040   040040 040040   040040 002000        ..        ..
   1    2266   040040 040040   040040 040040   002000 040040   040040 040040            ..
   1    2272   040040 ******                                                      ..

CODE7
 Sect OctLoc
   2     000   000000 000007                                                    ....

VEH
 Sect OctLoc
   2     001   000000 000002   440000 003111   104123 ******                    .......IDS..

KEYVEH
 Sect OctLoc
   2     004   000000 000002   760000 003111   104123 ******                    .......IDS..

ACNT_ALL
 Sect OctLoc
   2     007   000000 000003   012000 101114   114040 040040   040040 ******    ......ALL     ..

(unnamed)
 Sect OctLoc
   2     013   052123 117122   124040 040040   040040 040040   111111 040040    *SORT       II
   2     017   063111 040040   111130 040040   111102 040040   101114 114040    3I  IX  IB  ALL

(unnamed)
 Sect OctLoc
   6     000   777777 777637   000000 006003   000000 177640   000000 006014    ................
   6     004   040040 040040   000007 577640   777777 377777   777777 677777        ............
   6     010   777777 773777   000001 777640   000003 777640   002046 006000    .............&..
   6     014   000025 777640   002020 006000   001777 777640   000001 006000    ................
   6     020   000002 777640   000004 006000   000002 777640   000001 006000    ................
   6     024   000003 777640   000007 006000   077040 040040   002236 006000    ........?   ....
   6     030   000002 400000   000002 000000   000034 777640   002236 006000    ................
   6     034   000000 006000   000000 006000   002052 006000   002002 006000    .........*......
   6     040   000000 000000                                                    ....
      398     3350    1   END SYS_FUNC_OPEN;
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:52   
      399     3351        %EOD;

PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:53   
--  Include file information  --

   FM$FIT.:LIB_E05  is referenced.
   B_ERRORS_C.:LIB_E05  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   XS_MACRO_C.:LIB_E05  is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_OPEN.

   Procedure SYS_FUNC_OPEN requires 465 words for executable code.
   Procedure SYS_FUNC_OPEN requires 16 words of local(AUTO) storage.
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:54   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:55   
          MINI XREF LISTING

ACCOUNT
      2659**DCL      3290--ASSIGN   3298--ASSIGN
ACCOUNT.Q
      2660**DCL      2659--DCLINIT
ACCOUNT.SIZ#
      2659**DCL      3285<<ASSIGN   3289<<ASSIGN   3289>>ASSIGN
ACCOUNT#
       126**DCL      3294<<ASSIGN
ACCOUNT$
       127**DCL      3290<<ASSIGN   3291<<ASSIGN   3291>>ASSIGN   3294>>ASSIGN   3295<<ASSIGN   3295>>ASSIGN
ACNT
       369**DCL      3266>>IF       3268<<ASSIGN   3273>>IF       3273>>IF       3275<<ASSIGN   3279>>IF
      3282>>DOWHILE  3294>>ASSIGN
ACNTSF
       399**DCL      3324<<ASSIGN   3338<<ASSIGN
ACNT_ALL
      2628**DCL      3269--ASSIGN   3276--ASSIGN
ACNT_ALL.Q
      2629**DCL      2628--DCLINIT
ACSSF
       329**DCL      3154>>ASSIGN   3189>>ASSIGN
ASNSF
       332**DCL      3161>>ASSIGN
B$EXCFR.ASL
      1171**DCL      1171--REDEF
B$EXCFR.ERR
      1185**DCL      3345>>ASSIGN
B$EXCFR.ERR.ERR#
      1185**DCL      1185--REDEF    3340>>IF
B$EXCFR.EVID
      1184**DCL      1184--REDEF    1185--REDEF
B$EXCFR.IR
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:56   
      1172**DCL      1172--REDEF
B$EXCFR.PREVSZ
      1171**DCL      1171--REDEF
B$EXCFR.SUBC
      1183**DCL      1183--REDEF    1184--REDEF    1184--REDEF
B$TCB.ALT$
      1168**DCL      3340>>IF       3345>>ASSIGN
B$TCB$
       439**DCL      3340>>IF       3345>>ASSIGN
BLKLSF
       317**DCL      3156>>ASSIGN   3157<<ASSIGN
BUFSF
       341**DCL      3314>>ASSIGN
CARRY_ATTRIBUTESF
       376**DCL      3250>>IF       3321<<ASSIGN   3335<<ASSIGN
CODE07.PASS
      3129**DCL      3306<<ASSIGN
CODE7
       123**DCL      3305<>CALL
COUNTSF
       391**DCL       392--REDEF
DCBSF
       320**DCL      3133>>ASSIGN   3134>>ASSIGN   3138>>IF       3138>>IF       3159--ASSIGN   3164--IF
      3164--IF       3166--ASSIGN   3167--IF       3167--IF       3169--ASSIGN   3194--IF       3217--ASSIGN
ENCRP_SEEDSF
       349**DCL       350--REDEF
ERRCODESF
       351**DCL       356--REDEF
EXISTSF
       370**DCL      3218>>ASSIGN
F$DCB.ACCT#
      2867**DCL      3201--ASSIGN
F$DCB.ACTPOS
      2883**DCL      2883--REDEF
F$DCB.ARS#
      2857**DCL      2857--REDEF
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:57   
F$DCB.ASN#
      2872**DCL      3159>>ASSIGN   3194>>IF       3200>>ASSIGN
F$DCB.ATTR
      2876**DCL      2877--REDEF
F$DCB.BORROW
      2891**DCL      2891--REDEF    2891--REDEF    2891--REDEF
F$DCB.DCBNAME.L
      2905**DCL      2905--IMP-SIZ
F$DCB.EOMCHAR#
      2861**DCL      2861--REDEF
F$DCB.EXPIRE#
      2874**DCL      3217>>ASSIGN
F$DCB.FLDID
      2886**DCL      2886--REDEF
F$DCB.FORM$
      2880**DCL      2880--REDEF
F$DCB.FSECT
      2896**DCL      2896--REDEF
F$DCB.FSN#
      2873**DCL      2873--REDEF    2873--REDEF    2874--REDEF
F$DCB.HEADER$
      2879**DCL      2879--REDEF
F$DCB.IXTNSIZE#
      2877**DCL      2877--REDEF    3164>>IF       3164>>IF       3166>>ASSIGN
F$DCB.LASTSTA$
      2866**DCL      2866--REDEF
F$DCB.LVL
      2892**DCL      2892--REDEF
F$DCB.NAME#.C
      2867**DCL      2867--REDEF
F$DCB.NOEOF
      2889**DCL      2889--REDEF
F$DCB.NRECS#
      2878**DCL      2878--REDEF
F$DCB.NRECX
      2897**DCL      2897--REDEF
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:58   
F$DCB.OHDR
      2889**DCL      2889--REDEF
F$DCB.ORG#
      2872**DCL      2872--REDEF
F$DCB.PRECNO
      2895**DCL      2895--REDEF
F$DCB.PSN#
      2867**DCL      3203>>ASSIGN
F$DCB.RCSZ
      2901**DCL      2901--REDEF
F$DCB.RES#
      2868**DCL      2868--REDEF
F$DCB.SETX
      2880**DCL      2880--REDEF
F$DCB.TAB$
      2880**DCL      2880--REDEF
F$DCB.TDA
      2894**DCL      2895--REDEF
F$DCB.WSN#
      2868**DCL      2868--REDEF
F$DCB.XTNSIZE#
      2875**DCL      3167>>IF       3167>>IF       3169>>ASSIGN
FIDSF
       368**DCL      3146>>IF       3174>>IF       3177>>CALLBLT  3179>>ASSIGN   3319<<ASSIGN   3333<<ASSIGN
FIDSF_RD
       367**DCL       368--REDEF
FILE_INFO
       125**DCL      3252--ASSIGN   3304--ASSIGN   3308--ASSIGN
FIT$
       122**DCL      3129--IMP-PTR  3304<<ASSIGN   3305<>CALL     3306>>ASSIGN
FLNM
       128**DCL      3180--ASSIGN   3202--ASSIGN
FLNM.CNT
       129**DCL      3178<<ASSIGN
FLNM.FILE_NM
       130**DCL      3179<<ASSIGN
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:59   
FSA
       508**DCL      3315<>CALL
FSA.BBUF_
       516**DCL      3314<<ASSIGN
FSA.EOMCHAR#
       524**DCL       525--REDEF
FSA.ERR
       512**DCL      3343>>ASSIGN
FSA.SIG1
       518**DCL       518--REDEF
FSA.SIG2
       518**DCL       519--REDEF
FSA_FLAG
       382**DCL      3312>>IF       3328<<ASSIGN   3342>>IF       3346<<ASSIGN
FUNSF
       331**DCL      3155>>ASSIGN   3162>>IF       3190>>ASSIGN   3215>>IF
HELPCODE
       385**DCL       390--REDEF
I
       423**DCL      3177<<CALLBLT  3178>>ASSIGN   3281<<ASSIGN   3282>>DOWHILE  3282>>DOWHILE  3283<<ASSIGN
      3283>>ASSIGN   3285>>ASSIGN   3288>>IF       3293>>DOINDEX
ICHKSUM
       450**DCL       451--REDEF
INCL_ERR
       363**DCL      3347<<ASSIGN
I_O_BUF$
       428**DCL       429--IMP-PTR
J
       424**DCL      3272<<DOINDEX  3273>>IF       3273>>IF       3293<<DOINDEX  3294>>ASSIGN
KEYLSF
       318**DCL      3229>>ASSIGN
KEYVEH
      2591**DCL      3259--ASSIGN
KEYVEH.Q
      2592**DCL      2591--DCLINIT
KEYVSF
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:60   
       323**DCL       328--REDEF
KEYVSF.WD_ONE
       325**DCL       326--REDEF
KEYXSF
       319**DCL      3230>>ASSIGN
KEY_SHADWSF
       400**DCL      3198>>IF       3200--ASSIGN   3201--ASSIGN   3203--ASSIGN   3325<<ASSIGN   3339<<ASSIGN
M$LO
       438**DCL      3138>>IF
M$OPEN
       540**DCL-ENT  3143--CALL     3183--CALL     3318--CALL
M$SI
       119**DCL      3138>>IF
MONITOR_ERR
       358**DCL      3343<<ASSIGN   3345<<ASSIGN
MSGCODE
       357**DCL       358--REDEF
NO_PASS
      3306**LABEL    3305--CALLALT
OPEN_ERR
      3331**LABEL    3143--CALLALT  3183--CALLALT  3315--CALLALT  3318--CALLALT
OPEN_FPT
      2502**DCL      3183<>CALL
OPEN_FPT.ACSVEH_
      2504**DCL      2505--REDEF
OPEN_FPT.ALTKEYS_
      2510**DCL      2511--REDEF    2511--REDEF
OPEN_FPT.HDR_
      2509**DCL      2510--REDEF
OPEN_FPT.NAME_
      2503**DCL      3175<<ASSIGN   3180<<ASSIGN
OPEN_FPT.TAB_
      2508**DCL      2509--REDEF
OPEN_FPT.UHL_
      2502**DCL      2503--REDEF    2503--REDEF
OPEN_FPT.V
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:61   
      2511**DCL      2502--DCLINIT
OPEN_FPT.V.ACS#
      2522**DCL      3154<<ASSIGN
OPEN_FPT.V.ASN#
      2521**DCL      3159<<ASSIGN   3161<<ASSIGN
OPEN_FPT.V.BLKL#
      2528**DCL      3156<<ASSIGN
OPEN_FPT.V.CTG#
      2515**DCL      3152<<ASSIGN
OPEN_FPT.V.DCB#
      2511**DCL      3134<<ASSIGN
OPEN_FPT.V.FSN#
      2542**DCL      2542--REDEF    2542--REDEF
OPEN_FPT.V.FUN#
      2521**DCL      3155<<ASSIGN   3182<<ASSIGN
OPEN_FPT.V.IXTNSIZE#
      2530**DCL      3171<<ASSIGN
OPEN_FPT.V.OPER.TEST#
      2513**DCL      3151<<ASSIGN
OPEN_FPT.V.ORG#
      2522**DCL      3150<<ASSIGN
OPEN_FPT.V.SETDCB#
      2512**DCL      3173<<ASSIGN
OPEN_FPT.V.SHARE#
      2516**DCL      3153<<ASSIGN
OPEN_FPT.WSN_
      2508**DCL      2508--REDEF
ORGSF
       321**DCL      3150>>ASSIGN   3163>>IF       3187>>ASSIGN   3227>>IF       3234>>DOSELCT  3245>>IF
      3245>>IF       3245>>IF       3245>>IF       3256>>IF       3256>>IF
PSNSF.VOL#
       396**DCL      3191>>IF       3192>>ASSIGN
REASGNSF
       375**DCL      3141>>ASSIGN   3158>>IF       3185>>ASSIGN   3194>>IF       3320<<ASSIGN   3334<<ASSIGN
REC$
       409**DCL       432--IMP-PTR
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:62   
REC_DATA_LN
       437**DCL       436--IMP-SIZ
RES_FPT
      2393**DCL      3143<>CALL     3315<>CALL     3318<>CALL
RES_FPT.ACCESS_
      2395**DCL      3269<<ASSIGN   3276<<ASSIGN   3298<<ASSIGN
RES_FPT.ACCT_
      2397**DCL      3201<<ASSIGN   3208<<ASSIGN
RES_FPT.ACSVEH_
      2395**DCL      2396--REDEF    3259<<ASSIGN   3261<<ASSIGN
RES_FPT.ALTKEYS_
      2401**DCL      2402--REDEF    2402--REDEF    3212<<ASSIGN   3231<<ASSIGN
RES_FPT.FPARAM_
      2398**DCL      3253<<ASSIGN   3308<<ASSIGN   3327<<ASSIGN   3332<<ASSIGN
RES_FPT.HDR_
      2400**DCL      2401--REDEF
RES_FPT.IFPARAM_
      2398**DCL      3252<<ASSIGN   3309<<ASSIGN   3326<<ASSIGN   3331<<ASSIGN
RES_FPT.NAME_
      2394**DCL      3202<<ASSIGN   3209<<ASSIGN
RES_FPT.SN_
      2393**DCL      3204<<ASSIGN   3210<<ASSIGN
RES_FPT.TAB_
      2399**DCL      2400--REDEF
RES_FPT.UHL_
      2393**DCL      2394--REDEF    2394--REDEF
RES_FPT.V
      2402**DCL      2393--DCLINIT
RES_FPT.V.ACS#
      2413**DCL      3189<<ASSIGN
RES_FPT.V.ASN#
      2412**DCL      3200<<ASSIGN   3207<<ASSIGN
RES_FPT.V.CTG#
      2406**DCL      3142<<ASSIGN
RES_FPT.V.DCB#
      2402**DCL      3133<<ASSIGN
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:63   
RES_FPT.V.DISP#
      2418**DCL      3147<<ASSIGN   3149<<ASSIGN
RES_FPT.V.EXIST#
      2406**DCL      3218<<ASSIGN
RES_FPT.V.EXPIRE#
      2422**DCL      3217<<ASSIGN
RES_FPT.V.FSN#
      2433**DCL      2433--REDEF    2433--REDEF
RES_FPT.V.FUN#
      2412**DCL      3190<<ASSIGN   3311<<ASSIGN
RES_FPT.V.INITZ.REASSIGN#
      2403**DCL      3141<<ASSIGN   3185<<ASSIGN
RES_FPT.V.INITZ.SCRUB#
      2403**DCL      3140<<ASSIGN   3184<<ASSIGN
RES_FPT.V.IXTNSIZE#
      2421**DCL      3219<<ASSIGN
RES_FPT.V.KEYL#
      2418**DCL      3229<<ASSIGN
RES_FPT.V.KEYX#
      2417**DCL      3230<<ASSIGN
RES_FPT.V.OPER.NXTF#
      2405**DCL      3195<<ASSIGN   3197<<ASSIGN
RES_FPT.V.OPER.TEST#
      2404**DCL      3188<<ASSIGN
RES_FPT.V.ORG#
      2413**DCL      3187<<ASSIGN
RES_FPT.V.SETDCB#
      2403**DCL      3186<<ASSIGN
RES_FPT.V.TYPE#
      2414**DCL      3236<<ASSIGN   3238<<ASSIGN   3240<<ASSIGN   3242<<ASSIGN
RES_FPT.V.VOL#
      2427**DCL      3192<<ASSIGN   3193<<ASSIGN
RES_FPT.V.XTNSIZE#
      2421**DCL      3222<<ASSIGN   3224<<ASSIGN   3226<<ASSIGN
RES_FPT.WSN_
      2399**DCL      2399--REDEF
PL6.E3A0      #001=SYS_FUNC_OPEN File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:64   
SHARESF
       371**DCL      3153>>ASSIGN
SPKY_OPNSF
       378**DCL      3182>>IF       3311>>IF       3322<<ASSIGN   3336<<ASSIGN
SYS_FUNC_ERRMSG
       120**DCL-ENT  3348--CALL
TESTSF
       333**DCL      3151>>ASSIGN   3188>>ASSIGN   3323<<ASSIGN   3337<<ASSIGN
VEH
      2557**DCL      3261--ASSIGN
VEH.Q
      2558**DCL      2557--DCLINIT
VLP_ALTKEYS
      1163**DCL      3231--ASSIGN
VLP_SN
      2326**DCL      3204--ASSIGN
VLP_SN.SN#
      2326**DCL      3203<<ASSIGN
XSA$OPEN
       121**DCL-ENT  3315--CALL
XSF$LOCCODT
       124**DCL-ENT  3305--CALL
XTENSIZESF
       334**DCL      3166<<ASSIGN   3171>>ASSIGN   3219>>ASSIGN   3221>>IF       3224>>ASSIGN
XTN
       131**DCL      3132<<ASSIGN   3169<<ASSIGN   3220>>IF       3226>>ASSIGN

PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:65   
      400        1        /*T***********************************************************/
      401        2        /*T*                                                         */
      402        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      403        4        /*T*                                                         */
      404        5        /*T***********************************************************/
      405        6        SYS_FUNC_CLOS: PROC ALTRET;
      406        7    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      407        8    1   DCL XSA$CLOSE ENTRY(2) ALTRET;
      408        9         %INCLUDE XS_MACRO_C;
      409       53         %XSA_PARAM(FPTN=FSA,
      410       54         STCLASS=SYMREF);
      411       84
      412       85        %INCLUDE ZI_GLOBAL_DBUTIL;
      413      263         %SYS_FUNC;
      414      355         %MISC_DCLS;
      415      408        %INCLUDE CP_6;
      416      489        %VLP_SN(FPTN=PSN,
      417      490        N=15); /* Allow a maximum of 15 SN#s to be returned */
      418      503        %INCLUDE CP_6_SUBS;
      419     1043        %B$TCB;
      420     1046        %B$EXCFR;
      421     1064        %F$DCB;
      422     1121        %FPT_CLOSE(FPTN=CLOSE_FPT);
      423     1163    1       IF DCBADDR(DCBSF)->F$DCB.FCD# = '0'B
      424     1164    1       THEN RETURN; /* Ignore CALL..DCB is already closed */
      425     1165    1       CLOSE_FPT.V.DCB#=DCBSF;
      426     1166    1       CLOSE_FPT.V.OPER.RELG# = RELGSF;
      427     1167    1       CLOSE_FPT.V.POS# = POSSF; /* Tape position on close */
      428     1168    1       CLOSE_FPT.SN_ = VECTOR(PSN);
      429     1169    1       IF FSA_FLAG = %YES# THEN
      430     1170    2       DO;
      431     1171    2           CALL XSA$CLOSE(CLOSE_FPT,FSA) ALTRET(CLOSE_ERR);
      432     1172    2           END;
      433     1173    1       ELSE
      434     1174    1           CALL M$CLOSE(CLOSE_FPT) ALTRET(CLOSE_ERR);
      435     1175    1       FSA_FLAG = %NO#;
      436     1176    1       POSSF = 0; /* RESET DEFAULT */
PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:66   
      437     1177    1       IF DCBADDR(DCBSF)->F$DCB.ASN# = %TAPE# THEN
      438     1178    2       DO;
      439     1179    2           PSNSF.SN# = PSN.SN#(0);
      440     1180    2           PSNSF.NUM# = PSN.NUM#;
      441     1181    2           PSNSF.VOL# = DCBADDR(DCBSF)->F$DCB.VOL#;
      442     1182    2           END;
      443     1183    1       RETURN;
      444     1184    1   SYS_FUNC_RELEASE: ENTRY ALTRET;
      445     1185    1       CLOSE_FPT.V.DCB#=DCBSF;
      446     1186    1       CLOSE_FPT.V.DISP#=%RELEASE#;
      447     1187    1       CALL M$CLOSE(CLOSE_FPT) ALTRET(CLOSE_ERR);
      448     1188    1       CLOSE_FPT.V.DISP#=%SAVE#;
      449     1189    1       RETURN;
      450     1190    1   CLOSE_ERR:
      451     1191    1       CLOSE_FPT.V.DISP#=%SAVE#;
      452     1192    1       IF FSA_FLAG = %YES# THEN
      453     1193    1           MONITOR_ERR = FSA.ERR;
      454     1194    1       ELSE
      455     1195    1           MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;
      456     1196    1       FSA_FLAG = %NO#;
      457     1197    1       INCL_ERR = %YES#;
      458     1198    1       CALL SYS_FUNC_ERRMSG;
      459     1199    1       ALTRETURN;
      460     1200    1   END SYS_FUNC_CLOS;
      461     1201        %EOD;

PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:67   
--  Include file information  --

   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   XS_MACRO_C.:LIB_E05  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_CLOS.

   Procedure SYS_FUNC_CLOS requires 81 words for executable code.
   Procedure SYS_FUNC_CLOS requires 4 words of local(AUTO) storage.

PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:68   

 Object Unit name= SYS_FUNC_CLOS                              File name= ZIU$Q2SF.:ZIC0TOU
 UTS= SEP 05 '97 13:26:51.72 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$LO
    1   DCB   even  none     0      0  M$UC
    2   Data  even  none    54     66  SYS_FUNC_CLOS
    3   Proc  even  none    81    121  SYS_FUNC_CLOS
    4  RoData even  none     8     10  SYS_FUNC_CLOS

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes    yes     yes      Std        0  SYS_FUNC_CLOS
     3     62          yes     yes      Std        0  SYS_FUNC_RELEASE

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       2 XSA$CLOSE
 yes     yes           Std       0 SYS_FUNC_ERRMSG
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:69   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     FSA                                   BLKLSF                                KEYLSF
     KEYXSF                                DCBSF                                 ORGSF
     KEYSF                                 KEYVSF                                ACSSF
     NOTIMESF                              FUNSF                                 ASNSF
     TESTSF                                XTENSIZESF                            DISPSF
     WAITSF                                VFCSF                                 FULLSF
     BKUPSF                                BUFLNSF                               BUFSF
     SOURCESF                              DESTSF                                DATESF
     TIMESF                                UTSSF                                 DAYSF
     TSTAMPSF                              ENCRP_SEEDSF                          ERRCODESF
     MSGCODE                               INCL_ERR                              ERR_INSERT
     FIDSF_RD                              ACNT                                  EXISTSF
     SHARESF                               DCBNMSF                               KEYRSF
     NO_KEYSF                              REASGNSF                              CARRY_ATTRIBUTESF
     SUBMESSF                              SPKY_OPNSF                            POSSF
     ERRFLGSF                              MERGESF                               FSA_FLAG
     RELGSF                                UNUSED                                HELPCODE
     COUNTSF                               INDEXSF                               GAP
     PSNSF                                 ACNTSF                                KEY_SHADWSF
     REC$                                  RB                                    RE
     IE                                    IB                                    CNT
     ICNT                                  RCNT                                  SCNT
     FIRST_SET                             RETCNT                                DMPCNT
     KCNT                                  ACNT_IDX                              I
     J                                     K                                     X
     STEPCC                                I_O_BUF$                              OUT_INDX
     I_O_SIZE                              REC_DATA_LN                           M$LO
     B$TCB$                                B$ROS$                                B$JIT$
     KEYFID                                I_O_KEY                               RESTART
     BREAK_FLAG                            ICHKSUM                               ITMCNT
     GAP1                                  M$UC
PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:70   

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:71   


      400        1        /*T***********************************************************/
      401        2        /*T*                                                         */
      402        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      403        4        /*T*                                                         */
      404        5        /*T***********************************************************/
      405        6        SYS_FUNC_CLOS: PROC ALTRET;

      6  3 000000   000000 700200 xent  SYS_FUNC_CL* TSX0  ! X66_AUTO_0
         3 000001   000004 000000                    ZERO    4,0

      406        7    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      407        8    1   DCL XSA$CLOSE ENTRY(2) ALTRET;
      408        9         %INCLUDE XS_MACRO_C;
      409       53         %XSA_PARAM(FPTN=FSA,
      410       54         STCLASS=SYMREF);
      411       84
      412       85        %INCLUDE ZI_GLOBAL_DBUTIL;
      413      263         %SYS_FUNC;
      414      355         %MISC_DCLS;
      415      408        %INCLUDE CP_6;
      416      489        %VLP_SN(FPTN=PSN,
      417      490        N=15); /* Allow a maximum of 15 SN#s to be returned */
      418      503        %INCLUDE CP_6_SUBS;
      419     1043        %B$TCB;
      420     1046        %B$EXCFR;
      421     1064        %F$DCB;
      422     1121        %FPT_CLOSE(FPTN=CLOSE_FPT);
      423     1163    1       IF DCBADDR(DCBSF)->F$DCB.FCD# = '0'B

   1163  3 000002   000000 470400 4                  LDP0    0
         3 000003   000000 471500                    LDP1    0,,PR0
         3 000004   000000 220000 xsym               LDX0    DCBSF
         3 000005   100000 473510                    LDP3    0,X0,PR1
         3 000006   300031 236100                    LDQ     25,,PR3
         3 000007   020000 316007                    CANQ    8192,DL
         3 000010   000012 601000 3                  TNZ     s:1165
PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:72   

      424     1164    1       THEN RETURN; /* Ignore CALL..DCB is already closed */

   1164  3 000011   000000 702200 xent               TSX2  ! X66_ARET

      425     1165    1       CLOSE_FPT.V.DCB#=DCBSF;

   1165  3 000012   000062 740000 2                  STX0    CLOSE_FPT+26

      426     1166    1       CLOSE_FPT.V.OPER.RELG# = RELGSF;

   1166  3 000013   000000 236000 xsym               LDQ     RELGSF
         3 000014   000023 772000                    QRL     19
         3 000015   000062 676000 2                  ERQ     CLOSE_FPT+26
         3 000016   200000 376007                    ANQ     65536,DL
         3 000017   000062 656000 2                  ERSQ    CLOSE_FPT+26

      427     1167    1       CLOSE_FPT.V.POS# = POSSF; /* Tape position on close */

   1167  3 000020   000000 236000 xsym               LDQ     POSSF
         3 000021   000064 552040 2                  STBQ    CLOSE_FPT+28,'40'O

      428     1168    1       CLOSE_FPT.SN_ = VECTOR(PSN);

   1168  3 000022   000002 237000 4                  LDAQ    2
         3 000023   000032 757000 2                  STAQ    CLOSE_FPT+2

      429     1169    1       IF FSA_FLAG = %YES# THEN

   1169  3 000024   000000 234000 xsym               SZN     FSA_FLAG
         3 000025   000033 605000 3                  TPL     s:1174

      430     1170    2       DO;

      431     1171    2           CALL XSA$CLOSE(CLOSE_FPT,FSA) ALTRET(CLOSE_ERR);

   1171  3 000026   000005 630400 4                  EPPR0   5
PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:73   
         3 000027   000004 631400 4                  EPPR1   4
         3 000030   000000 701000 xent               TSX1    XSA$CLOSE
         3 000031   000077 702000 3                  TSX2    CLOSE_ERR

      432     1172    2           END;

   1172  3 000032   000037 710000 3                  TRA     s:1175

      433     1173    1       ELSE
      434     1174    1           CALL M$CLOSE(CLOSE_FPT) ALTRET(CLOSE_ERR);

   1174  3 000033   000030 630400 2                  EPPR0   CLOSE_FPT
         3 000034   450001 713400                    CLIMB   alt,close
         3 000035   406000 401760                    pmme    nvectors=13
         3 000036   000077 702000 3                  TSX2    CLOSE_ERR

      435     1175    1       FSA_FLAG = %NO#;

   1175  3 000037   000000 450000 xsym               STZ     FSA_FLAG

      436     1176    1       POSSF = 0; /* RESET DEFAULT */

   1176  3 000040   000000 450000 xsym               STZ     POSSF

      437     1177    1       IF DCBADDR(DCBSF)->F$DCB.ASN# = %TAPE# THEN

   1177  3 000041   000000 470400 4                  LDP0    0
         3 000042   000000 471500                    LDP1    0,,PR0
         3 000043   000000 220000 xsym               LDX0    DCBSF
         3 000044   100000 473510                    LDP3    0,X0,PR1
         3 000045   300032 236100                    LDQ     26,,PR3
         3 000046   777000 376007                    ANQ     -512,DL
         3 000047   002000 116007                    CMPQ    1024,DL
         3 000050   000061 601000 3                  TNZ     s:1183

      438     1178    2       DO;

PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:74   
      439     1179    2           PSNSF.SN# = PSN.SN#(0);

   1179  3 000051   040000 100400                    MLR     fill='040'O
         3 000052   000001 000006 2                  ADSC9   PSN+1                    cn=0,n=6
         3 000053   000000 400006 xsym               ADSC9   PSNSF                    cn=2,n=6

      440     1180    2           PSNSF.NUM# = PSN.NUM#;

   1180  3 000054   000000 236000 2                  LDQ     PSN
         3 000055   000022 736000                    QLS     18
         3 000056   000000 552020 xsym               STBQ    PSNSF,'20'O

      441     1181    2           PSNSF.VOL# = DCBADDR(DCBSF)->F$DCB.VOL#;

   1181  3 000057   300043 236100                    LDQ     35,,PR3
         3 000060   000000 552040 xsym               STBQ    PSNSF,'40'O

      442     1182    2           END;

      443     1183    1       RETURN;

   1183  3 000061   000000 702200 xent               TSX2  ! X66_ARET

      444     1184    1   SYS_FUNC_RELEASE: ENTRY ALTRET;

   1184  3 000062   000000 700200 xent  SYS_FUNC_RE* TSX0  ! X66_AUTO_0
         3 000063   000004 000000                    ZERO    4,0

      445     1185    1       CLOSE_FPT.V.DCB#=DCBSF;

   1185  3 000064   000000 220000 xsym               LDX0    DCBSF
         3 000065   000062 740000 2                  STX0    CLOSE_FPT+26

      446     1186    1       CLOSE_FPT.V.DISP#=%RELEASE#;

   1186  3 000066   000001 236007                    LDQ     1,DL
         3 000067   000062 552004 2                  STBQ    CLOSE_FPT+26,'04'O
PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:75   

      447     1187    1       CALL M$CLOSE(CLOSE_FPT) ALTRET(CLOSE_ERR);

   1187  3 000070   000030 630400 2                  EPPR0   CLOSE_FPT
         3 000071   450001 713400                    CLIMB   alt,close
         3 000072   406000 401760                    pmme    nvectors=13
         3 000073   000077 702000 3                  TSX2    CLOSE_ERR

      448     1188    1       CLOSE_FPT.V.DISP#=%SAVE#;

   1188  3 000074   000002 236007                    LDQ     2,DL
         3 000075   000062 552004 2                  STBQ    CLOSE_FPT+26,'04'O

      449     1189    1       RETURN;

   1189  3 000076   000000 702200 xent               TSX2  ! X66_ARET

      450     1190    1   CLOSE_ERR:
      451     1191    1       CLOSE_FPT.V.DISP#=%SAVE#;

   1191  3 000077   000002 236007       CLOSE_ERR    LDQ     2,DL
         3 000100   000062 552004 2                  STBQ    CLOSE_FPT+26,'04'O

      452     1192    1       IF FSA_FLAG = %YES# THEN

   1192  3 000101   000000 234000 xsym               SZN     FSA_FLAG
         3 000102   000106 605000 3                  TPL     s:1195

      453     1193    1           MONITOR_ERR = FSA.ERR;

   1193  3 000103   000001 236000 xsym               LDQ     FSA+1
         3 000104   000000 756000 xsym               STQ     MSGCODE
         3 000105   000112 710000 3                  TRA     s:1196

      454     1194    1       ELSE
      455     1195    1           MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;

PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:76   
   1195  3 000106   000000 470400 xsym               LDP0    B$TCB$
         3 000107   000000 471500                    LDP1    0,,PR0
         3 000110   100102 236100                    LDQ     66,,PR1
         3 000111   000000 756000 xsym               STQ     MSGCODE

      456     1196    1       FSA_FLAG = %NO#;

   1196  3 000112   000000 450000 xsym               STZ     FSA_FLAG

      457     1197    1       INCL_ERR = %YES#;

   1197  3 000113   400000 236003                    LDQ     -131072,DU
         3 000114   000000 756000 xsym               STQ     INCL_ERR

      458     1198    1       CALL SYS_FUNC_ERRMSG;

   1198  3 000115   000007 631400 4                  EPPR1   7
         3 000116   000000 701000 xent               TSX1    SYS_FUNC_ERRMSG
         3 000117   000000 011000                    NOP     0

      459     1199    1       ALTRETURN;

   1199  3 000120   000000 702200 xent               TSX2  ! X66_AALT

PSN
 Sect OctLoc
   2     000   000000 000017   040040 040040   040040 040040   040040 040040    ....
   2     004   040040 040040   040040 040040   040040 040040   040040 040040
   2     024*  040040 040040   040040 040040   040040 040040   040040 ******                  ..

CLOSE_FPT
 Sect OctLoc
   2     030   000003 777640   000062 006000   000000 177640   000000 006014    .....2..........
   2     034   000000 177640   000000 006014   000000 177640   000000 006014    ................
   2     060*  000000 177640   000000 006014   000000 000000   000000 000040    ...............
   2     064   000220 000000   000000 000000                                    ........

PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:77   
(unnamed)
 Sect OctLoc
   4     000   000000 006003   000000 000000   000027 777640   000000 006000    ................
   4     004   000002 000000   000030 006000   000000 006000   000000 000000    ................
      460     1200    1   END SYS_FUNC_CLOS;
      461     1201        %EOD;

PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:78   
--  Include file information  --

   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   XS_MACRO_C.:LIB_E05  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_CLOS.

   Procedure SYS_FUNC_CLOS requires 81 words for executable code.
   Procedure SYS_FUNC_CLOS requires 4 words of local(AUTO) storage.
PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:79   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:80   
          MINI XREF LISTING

B$EXCFR.ASL
      1047**DCL      1047--REDEF
B$EXCFR.ERR
      1061**DCL      1195>>ASSIGN
B$EXCFR.ERR.ERR#
      1061**DCL      1061--REDEF
B$EXCFR.EVID
      1060**DCL      1060--REDEF    1061--REDEF
B$EXCFR.IR
      1048**DCL      1048--REDEF
B$EXCFR.PREVSZ
      1047**DCL      1047--REDEF
B$EXCFR.SUBC
      1059**DCL      1059--REDEF    1060--REDEF    1060--REDEF
B$TCB.ALT$
      1044**DCL      1195>>ASSIGN
B$TCB$
       392**DCL      1195>>ASSIGN
CLOSE_ERR
      1191**LABEL    1171--CALLALT  1174--CALLALT  1187--CALLALT
CLOSE_FPT
      1144**DCL      1171<>CALL     1174<>CALL     1187<>CALL
CLOSE_FPT.SN_
      1144**DCL      1144--REDEF    1168<<ASSIGN
CLOSE_FPT.UTL_
      1145**DCL      1145--REDEF
CLOSE_FPT.V
      1149**DCL      1144--DCLINIT
CLOSE_FPT.V.DCB#
      1150**DCL      1165<<ASSIGN   1185<<ASSIGN
CLOSE_FPT.V.DISP#
      1153**DCL      1186<<ASSIGN   1188<<ASSIGN   1191<<ASSIGN
PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:81   
CLOSE_FPT.V.EXPIRE#
      1159**DCL      1159--REDEF
CLOSE_FPT.V.OPER.RELG#
      1150**DCL      1166<<ASSIGN
CLOSE_FPT.V.POS#
      1157**DCL      1167<<ASSIGN
CLOSE_FPT.V.TYPE#
      1157**DCL      1157--REDEF
CLOSE_FPT.V.XTNSIZE#
      1154**DCL      1154--REDEF    1156--REDEF
COUNTSF
       344**DCL       345--REDEF
DCBSF
       273**DCL      1163--IF       1165>>ASSIGN   1177--IF       1181--ASSIGN   1185>>ASSIGN
ENCRP_SEEDSF
       302**DCL       303--REDEF
ERRCODESF
       304**DCL       309--REDEF
F$DCB.ACTPOS
      1097**DCL      1097--REDEF
F$DCB.ARS#
      1071**DCL      1071--REDEF
F$DCB.ASN#
      1086**DCL      1177>>IF
F$DCB.ATTR
      1090**DCL      1091--REDEF
F$DCB.BORROW
      1105**DCL      1105--REDEF    1105--REDEF    1105--REDEF
F$DCB.DCBNAME.L
      1119**DCL      1119--IMP-SIZ
F$DCB.EOMCHAR#
      1075**DCL      1075--REDEF
F$DCB.FCD#
      1084**DCL      1163>>IF
F$DCB.FLDID
      1100**DCL      1100--REDEF
PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:82   
F$DCB.FORM$
      1094**DCL      1094--REDEF
F$DCB.FSECT
      1110**DCL      1110--REDEF
F$DCB.FSN#
      1087**DCL      1087--REDEF    1087--REDEF    1088--REDEF
F$DCB.HEADER$
      1093**DCL      1093--REDEF
F$DCB.IXTNSIZE#
      1091**DCL      1091--REDEF
F$DCB.LASTSTA$
      1080**DCL      1080--REDEF
F$DCB.LVL
      1106**DCL      1106--REDEF
F$DCB.NAME#.C
      1081**DCL      1081--REDEF
F$DCB.NOEOF
      1103**DCL      1103--REDEF
F$DCB.NRECS#
      1092**DCL      1092--REDEF
F$DCB.NRECX
      1111**DCL      1111--REDEF
F$DCB.OHDR
      1103**DCL      1103--REDEF
F$DCB.ORG#
      1086**DCL      1086--REDEF
F$DCB.PRECNO
      1109**DCL      1109--REDEF
F$DCB.RCSZ
      1115**DCL      1115--REDEF
F$DCB.RES#
      1082**DCL      1082--REDEF
F$DCB.SETX
      1094**DCL      1094--REDEF
F$DCB.TAB$
      1094**DCL      1094--REDEF
PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:83   
F$DCB.TDA
      1108**DCL      1109--REDEF
F$DCB.VOL#
      1092**DCL      1181>>ASSIGN
F$DCB.WSN#
      1082**DCL      1082--REDEF
FIDSF_RD
       320**DCL       321--REDEF
FSA
        62**DCL      1171<>CALL
FSA.EOMCHAR#
        78**DCL        79--REDEF
FSA.ERR
        66**DCL      1193>>ASSIGN
FSA.SIG1
        72**DCL        72--REDEF
FSA.SIG2
        72**DCL        73--REDEF
FSA_FLAG
       335**DCL      1169>>IF       1175<<ASSIGN   1192>>IF       1196<<ASSIGN
HELPCODE
       338**DCL       343--REDEF
ICHKSUM
       403**DCL       404--REDEF
INCL_ERR
       316**DCL      1197<<ASSIGN
I_O_BUF$
       381**DCL       382--IMP-PTR
KEYVSF
       276**DCL       281--REDEF
KEYVSF.WD_ONE
       278**DCL       279--REDEF
M$CLOSE
       417**DCL-ENT  1174--CALL     1187--CALL
MONITOR_ERR
       311**DCL      1193<<ASSIGN   1195<<ASSIGN
PL6.E3A0      #002=SYS_FUNC_CLOS File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:26 Page:84   
MSGCODE
       310**DCL       311--REDEF
POSSF
       332**DCL      1167>>ASSIGN   1176<<ASSIGN
PSN
       501**DCL      1168--ASSIGN
PSN.NUM#
       501**DCL      1180>>ASSIGN
PSN.SN#
       501**DCL      1179>>ASSIGN
PSNSF.NUM#
       350**DCL      1180<<ASSIGN
PSNSF.SN#
       351**DCL      1179<<ASSIGN
PSNSF.VOL#
       349**DCL      1181<<ASSIGN
REC$
       362**DCL       385--IMP-PTR
REC_DATA_LN
       390**DCL       389--IMP-SIZ
RELGSF
       336**DCL      1166>>ASSIGN
SYS_FUNC_ERRMSG
         7**DCL-ENT  1198--CALL
XSA$CLOSE
         8**DCL-ENT  1171--CALL

PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:85   
      462        1        /*T***********************************************************/
      463        2        /*T*                                                         */
      464        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      465        4        /*T*                                                         */
      466        5        /*T***********************************************************/
      467        6        SYS_FUNC_READ: PROC ALTRET;
      468        7    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      469        8    1   DCL XSA$READ ENTRY(2) ALTRET;
      470        9
      471       10         %INCLUDE XS_MACRO_C;
      472       54         %XSA_PARAM(FPTN=FSA,
      473       55        STCLASS=SYMREF); /* Symdefed in SYS_FUNC_OPEN */
      474       85
      475       86        %INCLUDE ZI_GLOBAL_DBUTIL;
      476      264         %SYS_FUNC;
      477      356         %MISC_DCLS;
      478      409        %INCLUDE CP_6;
      479      490        %INCLUDE CP_6_SUBS;
      480     1030        %B$TCB;
      481     1033        %B$EXCFR;
      482     1051        %INCLUDE B_ERRORS_C;
      483     2178        %F$DCB;
      484     2235        %FPT_READ(FPTN=READ_FPT);
      485     2274    1       READ_FPT.V.DCB#=DCBSF;
      486     2275    1       READ_FPT.V.FULL#=FULLSF;
      487     2276    1       READ_FPT.V.KEYS#=KEYSF;
      488     2277    1       READ_FPT.V.WAIT# = WAITSF;
      489     2278    1       IF KEYSF THEN
      490     2279    2       DO;
      491     2280    2           NO_KEYSF = %NO#; /* Reset non existant key flag */
      492     2281    2           IF DCBADDR(DCBSF)->F$DCB.ORG# = %IDS# THEN
      493     2282    2               READ_FPT.KEY_ = VECTOR(KEYVSF.IDSKEY);
      494     2283    2           ELSE
      495     2284    2               READ_FPT.KEY_ = VECTOR(KEYVSF);
      496     2285    2           END;
      497     2286    2       ELSE DO;
      498     2287    2           READ_FPT.V.KEYR# = %NO#;
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:86   
      499     2288    2           READ_FPT.KEY_ = VECTOR(NIL);
      500     2289    2           END;
      501     2290    1       IF KEYRSF THEN
      502     2291    2       DO;
      503     2292    2           READ_FPT.V.KEYR# = '1'B;
      504     2293    2           READ_FPT.KEY_ = VECTOR(KEYVSF);
      505     2294    2           END;
      506     2295    1       IF BUFLNSF = 0 THEN
      507     2296    1           READ_FPT.BUF_ = VECTOR(NIL);
      508     2297    2       ELSE DO;
      509     2298    2           IF BUFLNSF > 0 THEN BUFLNSF = BUFLNSF-1; /* Zero base array*/
      510     2299    2           READ_FPT.BUF_ = BUFSF;
      511     2300    2           READ_FPT.BUF_.BOUND = BUFLNSF;
      512     2301    2           END;
      513     2302    1       READ_FPT.V.SEED#=ENCRP_SEEDSF;
      514     2303    1       IF DCBADDR(DCBSF)->F$DCB.ORG# = %INDEXED# THEN
      515     2304    1           READ_FPT.V.INDX# = INDEXSF;
      516     2305    1       ELSE
      517     2306    1           READ_FPT.V.INDX# = 0;
      518     2307    1       IF FSA_FLAG = %YES# THEN
      519     2308    1           CALL XSA$READ(READ_FPT,FSA) ALTRET(READ_ERR);
      520     2309    1       ELSE
      521     2310    1           CALL M$READ(READ_FPT) ALTRET(READ_ERR);
      522     2311    1       FSA_FLAG = %NO#;
      523     2312         /*   Put in the defaults for next read */
      524     2313    1       FULLSF = %NO#;
      525     2314    1       ENCRP_SEEDSF = '0'B;
      526     2315    1       KEYSF = %NO#;
      527     2316    1       KEYRSF = %NO#;
      528     2317    1       WAITSF = %YES#; /* DEFAULT WAIT=YES */
      529     2318    1       RETURN;
      530     2319    1   READ_ERR:
      531     2320         /*   Put in the defaults for next read */
      532     2321    1       WAITSF = %YES#;
      533     2322    1       FULLSF = %NO#;
      534     2323    1       ENCRP_SEEDSF = '0'B;
      535     2324    1       KEYSF = %NO#;
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:87   
      536     2325    1       KEYRSF = %NO#;
      537     2326    1       IF FSA_FLAG = %YES# THEN
      538     2327    2       DO;
      539     2328    2           IF FSA.ERR.CODE = %E$EOF THEN
      540     2329    3           DO;
      541     2330    3               ERRCODESF.ERR# = %E$EOF;
      542     2331    3               FSA_FLAG = %NO#;
      543     2332    3               ALTRETURN;
      544     2333    3               END;
      545     2334    2           ELSE
      546     2335    2               MONITOR_ERR = FSA.ERR;
      547     2336    2           FSA_FLAG = %NO#;
      548     2337    2           END;
      549     2338    2       ELSE DO;
      550     2339    2           MONITOR_ERR=B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;
      551     2340    2           IF MONITOR_ERR.ERR# = %E$NOKEY THEN
      552     2341    3           DO;
      553     2342    3               NO_KEYSF = %YES#;
      554     2343    3               RETURN;
      555     2344    3               END;
      556     2345    2           IF MONITOR_ERR.ERR# = %E$EOF THEN
      557     2346    2               ALTRETURN;
      558     2347    2           END;
      559     2348
      560     2349    1       INCL_ERR = %YES#;
      561     2350    1       CALL SYS_FUNC_ERRMSG;
      562     2351
      563     2352    1       ALTRETURN;
      564     2353    1   END SYS_FUNC_READ;
      565     2354        %EOD;

PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:88   
--  Include file information  --

   B_ERRORS_C.:LIB_E05  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   XS_MACRO_C.:LIB_E05  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_READ.

   Procedure SYS_FUNC_READ requires 136 words for executable code.
   Procedure SYS_FUNC_READ requires 4 words of local(AUTO) storage.

PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:89   

 Object Unit name= SYS_FUNC_READ                              File name= ZIU$Q2SF.:ZIC0TOU
 UTS= SEP 05 '97 13:27:00.24 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$LO
    1   DCB   even  none     0      0  M$UC
    2   Data  even  none    14     16  SYS_FUNC_READ
    3   Proc  even  none   136    210  SYS_FUNC_READ
    4  RoData even  none    15     17  SYS_FUNC_READ

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes    yes     yes      Std        0  SYS_FUNC_READ

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       2 XSA$READ
 yes     yes           Std       0 SYS_FUNC_ERRMSG
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:90   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     FSA                                   BLKLSF                                KEYLSF
     KEYXSF                                DCBSF                                 ORGSF
     KEYSF                                 KEYVSF                                ACSSF
     NOTIMESF                              FUNSF                                 ASNSF
     TESTSF                                XTENSIZESF                            DISPSF
     WAITSF                                VFCSF                                 FULLSF
     BKUPSF                                BUFLNSF                               BUFSF
     SOURCESF                              DESTSF                                DATESF
     TIMESF                                UTSSF                                 DAYSF
     TSTAMPSF                              ENCRP_SEEDSF                          ERRCODESF
     MSGCODE                               INCL_ERR                              ERR_INSERT
     FIDSF_RD                              ACNT                                  EXISTSF
     SHARESF                               DCBNMSF                               KEYRSF
     NO_KEYSF                              REASGNSF                              CARRY_ATTRIBUTESF
     SUBMESSF                              SPKY_OPNSF                            POSSF
     ERRFLGSF                              MERGESF                               FSA_FLAG
     RELGSF                                UNUSED                                HELPCODE
     COUNTSF                               INDEXSF                               GAP
     PSNSF                                 ACNTSF                                KEY_SHADWSF
     REC$                                  RB                                    RE
     IE                                    IB                                    CNT
     ICNT                                  RCNT                                  SCNT
     FIRST_SET                             RETCNT                                DMPCNT
     KCNT                                  ACNT_IDX                              I
     J                                     K                                     X
     STEPCC                                I_O_BUF$                              OUT_INDX
     I_O_SIZE                              REC_DATA_LN                           M$LO
     B$TCB$                                B$ROS$                                B$JIT$
     KEYFID                                I_O_KEY                               RESTART
     BREAK_FLAG                            ICHKSUM                               ITMCNT
     GAP1                                  M$UC
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:91   

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:92   


      462        1        /*T***********************************************************/
      463        2        /*T*                                                         */
      464        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      465        4        /*T*                                                         */
      466        5        /*T***********************************************************/
      467        6        SYS_FUNC_READ: PROC ALTRET;

      6  3 000000   000000 700200 xent  SYS_FUNC_RE* TSX0  ! X66_AUTO_0
         3 000001   000004 000000                    ZERO    4,0

      468        7    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      469        8    1   DCL XSA$READ ENTRY(2) ALTRET;
      470        9
      471       10         %INCLUDE XS_MACRO_C;
      472       54         %XSA_PARAM(FPTN=FSA,
      473       55        STCLASS=SYMREF); /* Symdefed in SYS_FUNC_OPEN */
      474       85
      475       86        %INCLUDE ZI_GLOBAL_DBUTIL;
      476      264         %SYS_FUNC;
      477      356         %MISC_DCLS;
      478      409        %INCLUDE CP_6;
      479      490        %INCLUDE CP_6_SUBS;
      480     1030        %B$TCB;
      481     1033        %B$EXCFR;
      482     1051        %INCLUDE B_ERRORS_C;
      483     2178        %F$DCB;
      484     2235        %FPT_READ(FPTN=READ_FPT);
      485     2274    1       READ_FPT.V.DCB#=DCBSF;

   2274  3 000002   000000 220000 xsym               LDX0    DCBSF
         3 000003   000010 740000 2                  STX0    READ_FPT+8

      486     2275    1       READ_FPT.V.FULL#=FULLSF;

   2275  3 000004   000000 236000 xsym               LDQ     FULLSF
         3 000005   000027 772000                    QRL     23
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:93   
         3 000006   000010 676000 2                  ERQ     READ_FPT+8
         3 000007   010000 376007                    ANQ     4096,DL
         3 000010   000010 656000 2                  ERSQ    READ_FPT+8

      487     2276    1       READ_FPT.V.KEYS#=KEYSF;

   2276  3 000011   000000 236000 xsym               LDQ     KEYSF
         3 000012   000023 772000                    QRL     19
         3 000013   000010 676000 2                  ERQ     READ_FPT+8
         3 000014   200000 376007                    ANQ     65536,DL
         3 000015   000010 656000 2                  ERSQ    READ_FPT+8

      488     2277    1       READ_FPT.V.WAIT# = WAITSF;

   2277  3 000016   000000 236000 xsym               LDQ     WAITSF
         3 000017   000022 772000                    QRL     18
         3 000020   000010 676000 2                  ERQ     READ_FPT+8
         3 000021   400000 376007                    ANQ     -131072,DL
         3 000022   000010 656000 2                  ERSQ    READ_FPT+8

      489     2278    1       IF KEYSF THEN

   2278  3 000023   000000 234000 xsym               SZN     KEYSF
         3 000024   000043 605000 3                  TPL     s:2287

      490     2279    2       DO;

      491     2280    2           NO_KEYSF = %NO#; /* Reset non existant key flag */

   2280  3 000025   000000 450000 xsym               STZ     NO_KEYSF

      492     2281    2           IF DCBADDR(DCBSF)->F$DCB.ORG# = %IDS# THEN

   2281  3 000026   000000 470400 4                  LDP0    0
         3 000027   000000 471500                    LDP1    0,,PR0
         3 000030   100000 473510                    LDP3    0,X0,PR1
         3 000031   300032 236100                    LDQ     26,,PR3
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:94   
         3 000032   777000 376003                    ANQ     -512,DU
         3 000033   007000 116003                    CMPQ    3584,DU
         3 000034   000040 601000 3                  TNZ     s:2284

      493     2282    2               READ_FPT.KEY_ = VECTOR(KEYVSF.IDSKEY);

   2282  3 000035   000002 237000 4                  LDAQ    2
         3 000036   000002 757000 2                  STAQ    READ_FPT+2
         3 000037   000047 710000 3                  TRA     s:2290

      494     2283    2           ELSE
      495     2284    2               READ_FPT.KEY_ = VECTOR(KEYVSF);

   2284  3 000040   000004 237000 4                  LDAQ    4
         3 000041   000002 757000 2                  STAQ    READ_FPT+2

      496     2285    2           END;

   2285  3 000042   000047 710000 3                  TRA     s:2290

      497     2286    2       ELSE DO;

      498     2287    2           READ_FPT.V.KEYR# = %NO#;

   2287  3 000043   000006 236000 4                  LDQ     6
         3 000044   000010 356000 2                  ANSQ    READ_FPT+8

      499     2288    2           READ_FPT.KEY_ = VECTOR(NIL);

   2288  3 000045   000010 237000 4                  LDAQ    8
         3 000046   000002 757000 2                  STAQ    READ_FPT+2

      500     2289    2           END;

      501     2290    1       IF KEYRSF THEN

   2290  3 000047   000000 234000 xsym               SZN     KEYRSF
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:95   
         3 000050   000055 605000 3                  TPL     s:2295

      502     2291    2       DO;

      503     2292    2           READ_FPT.V.KEYR# = '1'B;

   2292  3 000051   100000 236007                    LDQ     32768,DL
         3 000052   000010 256000 2                  ORSQ    READ_FPT+8

      504     2293    2           READ_FPT.KEY_ = VECTOR(KEYVSF);

   2293  3 000053   000004 237000 4                  LDAQ    4
         3 000054   000002 757000 2                  STAQ    READ_FPT+2

      505     2294    2           END;

      506     2295    1       IF BUFLNSF = 0 THEN

   2295  3 000055   000000 235000 xsym               LDA     BUFLNSF
         3 000056   000062 601000 3                  TNZ     s:2298

      507     2296    1           READ_FPT.BUF_ = VECTOR(NIL);

   2296  3 000057   000010 237000 4                  LDAQ    8
         3 000060   000004 757000 2                  STAQ    READ_FPT+4
         3 000061   000075 710000 3                  TRA     s:2302

      508     2297    2       ELSE DO;

      509     2298    2           IF BUFLNSF > 0 THEN BUFLNSF = BUFLNSF-1; /* Zero base array*/

   2298  3 000062   000065 600000 3                  TZE     s:2299

   2298  3 000063   000001 135007                    SBLA    1,DL
         3 000064   000000 755000 xsym               STA     BUFLNSF

      510     2299    2           READ_FPT.BUF_ = BUFSF;
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:96   

   2299  3 000065   000000 100400                    MLR     fill='000'O
         3 000066   000000 000010 xsym               ADSC9   BUFSF                    cn=0,n=8
         3 000067   000004 000010 2                  ADSC9   READ_FPT+4               cn=0,n=8

      511     2300    2           READ_FPT.BUF_.BOUND = BUFLNSF;

   2300  3 000070   000000 236000 xsym               LDQ     BUFLNSF
         3 000071   000020 736000                    QLS     16
         3 000072   000004 676000 2                  ERQ     READ_FPT+4
         3 000073   000007 376000 4                  ANQ     7
         3 000074   000004 656000 2                  ERSQ    READ_FPT+4

      512     2301    2           END;

      513     2302    1       READ_FPT.V.SEED#=ENCRP_SEEDSF;

   2302  3 000075   000000 236000 xsym               LDQ     ENCRP_SEEDSF
         3 000076   000012 756000 2                  STQ     READ_FPT+10

      514     2303    1       IF DCBADDR(DCBSF)->F$DCB.ORG# = %INDEXED# THEN

   2303  3 000077   000000 470400 4                  LDP0    0
         3 000100   000000 471500                    LDP1    0,,PR0
         3 000101   100000 473510                    LDP3    0,X0,PR1
         3 000102   300032 236100                    LDQ     26,,PR3
         3 000103   777000 376003                    ANQ     -512,DU
         3 000104   006000 116003                    CMPQ    3072,DU
         3 000105   000111 601000 3                  TNZ     s:2306

      515     2304    1           READ_FPT.V.INDX# = INDEXSF;

   2304  3 000106   000000 236000 xsym               LDQ     INDEXSF
         3 000107   000010 552004 2                  STBQ    READ_FPT+8,'04'O
         3 000110   000113 710000 3                  TRA     s:2307

      516     2305    1       ELSE
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:97   
      517     2306    1           READ_FPT.V.INDX# = 0;

   2306  3 000111   000000 236003                    LDQ     0,DU
         3 000112   000010 552004 2                  STBQ    READ_FPT+8,'04'O

      518     2307    1       IF FSA_FLAG = %YES# THEN

   2307  3 000113   000000 234000 xsym               SZN     FSA_FLAG
         3 000114   000122 605000 3                  TPL     s:2310

      519     2308    1           CALL XSA$READ(READ_FPT,FSA) ALTRET(READ_ERR);

   2308  3 000115   000013 630400 4                  EPPR0   11
         3 000116   000012 631400 4                  EPPR1   10
         3 000117   000000 701000 xent               TSX1    XSA$READ
         3 000120   000136 702000 3                  TSX2    READ_ERR
         3 000121   000126 710000 3                  TRA     s:2311

      520     2309    1       ELSE
      521     2310    1           CALL M$READ(READ_FPT) ALTRET(READ_ERR);

   2310  3 000122   000000 630400 2                  EPPR0   READ_FPT
         3 000123   440000 713400                    CLIMB   alt,read
         3 000124   401400 401760                    pmme    nvectors=4
         3 000125   000136 702000 3                  TSX2    READ_ERR

      522     2311    1       FSA_FLAG = %NO#;

   2311  3 000126   000000 450000 xsym               STZ     FSA_FLAG

      523     2312         /*   Put in the defaults for next read */
      524     2313    1       FULLSF = %NO#;

   2313  3 000127   000000 450000 xsym               STZ     FULLSF

      525     2314    1       ENCRP_SEEDSF = '0'B;

PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:98   
   2314  3 000130   000000 450000 xsym               STZ     ENCRP_SEEDSF

      526     2315    1       KEYSF = %NO#;

   2315  3 000131   000000 450000 xsym               STZ     KEYSF

      527     2316    1       KEYRSF = %NO#;

   2316  3 000132   000000 450000 xsym               STZ     KEYRSF

      528     2317    1       WAITSF = %YES#; /* DEFAULT WAIT=YES */

   2317  3 000133   400000 236003                    LDQ     -131072,DU
         3 000134   000000 756000 xsym               STQ     WAITSF

      529     2318    1       RETURN;

   2318  3 000135   000000 702200 xent               TSX2  ! X66_ARET

      530     2319    1   READ_ERR:
      531     2320         /*   Put in the defaults for next read */
      532     2321    1       WAITSF = %YES#;

   2321  3 000136   400000 236003       READ_ERR     LDQ     -131072,DU
         3 000137   000000 756000 xsym               STQ     WAITSF

      533     2322    1       FULLSF = %NO#;

   2322  3 000140   000000 450000 xsym               STZ     FULLSF

      534     2323    1       ENCRP_SEEDSF = '0'B;

   2323  3 000141   000000 450000 xsym               STZ     ENCRP_SEEDSF

      535     2324    1       KEYSF = %NO#;

   2324  3 000142   000000 450000 xsym               STZ     KEYSF
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:99   

      536     2325    1       KEYRSF = %NO#;

   2325  3 000143   000000 450000 xsym               STZ     KEYRSF

      537     2326    1       IF FSA_FLAG = %YES# THEN

   2326  3 000144   000000 234000 xsym               SZN     FSA_FLAG
         3 000145   000164 605000 3                  TPL     s:2339

      538     2327    2       DO;

      539     2328    2           IF FSA.ERR.CODE = %E$EOF THEN

   2328  3 000146   000001 236000 xsym               LDQ     FSA+1
         3 000147   377770 376007                    ANQ     131064,DL
         3 000150   000060 116007                    CMPQ    48,DL
         3 000151   000160 601000 3                  TNZ     s:2335

      540     2329    3           DO;

      541     2330    3               ERRCODESF.ERR# = %E$EOF;

   2330  3 000152   000000 236000 xsym               LDQ     ERRCODESF
         3 000153   000015 376000 4                  ANQ     13
         3 000154   000060 276007                    ORQ     48,DL
         3 000155   000000 756000 xsym               STQ     ERRCODESF

      542     2331    3               FSA_FLAG = %NO#;

   2331  3 000156   000000 450000 xsym               STZ     FSA_FLAG

      543     2332    3               ALTRETURN;

   2332  3 000157   000000 702200 xent               TSX2  ! X66_AALT

      544     2333    3               END;
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:100  
      545     2334    2           ELSE
      546     2335    2               MONITOR_ERR = FSA.ERR;

   2335  3 000160   000001 236000 xsym               LDQ     FSA+1
         3 000161   000000 756000 xsym               STQ     MSGCODE

      547     2336    2           FSA_FLAG = %NO#;

   2336  3 000162   000000 450000 xsym               STZ     FSA_FLAG

      548     2337    2           END;

   2337  3 000163   000202 710000 3                  TRA     s:2349

      549     2338    2       ELSE DO;

      550     2339    2           MONITOR_ERR=B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;

   2339  3 000164   000000 470400 xsym               LDP0    B$TCB$
         3 000165   000000 471500                    LDP1    0,,PR0
         3 000166   100102 236100                    LDQ     66,,PR1
         3 000167   000000 756000 xsym               STQ     MSGCODE

      551     2340    2           IF MONITOR_ERR.ERR# = %E$NOKEY THEN

   2340  3 000170   000000 236000 xsym               LDQ     MSGCODE
         3 000171   377770 376007                    ANQ     131064,DL
         3 000172   001020 116007                    CMPQ    528,DL
         3 000173   000177 601000 3                  TNZ     s:2345

      552     2341    3           DO;

      553     2342    3               NO_KEYSF = %YES#;

   2342  3 000174   400000 236003                    LDQ     -131072,DU
         3 000175   000000 756000 xsym               STQ     NO_KEYSF

PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:101  
      554     2343    3               RETURN;

   2343  3 000176   000000 702200 xent               TSX2  ! X66_ARET

      555     2344    3               END;
      556     2345    2           IF MONITOR_ERR.ERR# = %E$EOF THEN

   2345  3 000177   000060 116007                    CMPQ    48,DL
         3 000200   000202 601000 3                  TNZ     s:2349

      557     2346    2               ALTRETURN;

   2346  3 000201   000000 702200 xent               TSX2  ! X66_AALT

      558     2347    2           END;
      559     2348
      560     2349    1       INCL_ERR = %YES#;

   2349  3 000202   400000 236003                    LDQ     -131072,DU
         3 000203   000000 756000 xsym               STQ     INCL_ERR

      561     2350    1       CALL SYS_FUNC_ERRMSG;

   2350  3 000204   000016 631400 4                  EPPR1   14
         3 000205   000000 701000 xent               TSX1    SYS_FUNC_ERRMSG
         3 000206   000000 011000                    NOP     0

      562     2351
      563     2352    1       ALTRETURN;

   2352  3 000207   000000 702200 xent               TSX2  ! X66_AALT

READ_FPT
 Sect OctLoc
   2     000   000005 777640   000010 006000   000000 177640   000000 006014    ................
   2     004   000000 177640   000000 006014   000000 177640   000000 006014    ................
   2     010   000000 400000   000000 000000   000000 000000   000000 000000    ................
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:102  
   2     014   000000 000000   000000 000000                                    ........

(unnamed)
 Sect OctLoc
   4     000   000000 006003   000000 000000   000000 777640   000000 206000    ................
   4     004   000077 777640   000000 006000   777777 677777   777777 600000    .?..............
   4     010   000000 177640   000000 006014   000002 000000   000000 006000    ................
   4     014   000000 006000   777777 400007   000000 000000                    ............
      564     2353    1   END SYS_FUNC_READ;
      565     2354        %EOD;

PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:103  
--  Include file information  --

   B_ERRORS_C.:LIB_E05  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   XS_MACRO_C.:LIB_E05  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_READ.

   Procedure SYS_FUNC_READ requires 136 words for executable code.
   Procedure SYS_FUNC_READ requires 4 words of local(AUTO) storage.
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:104  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:105  
          MINI XREF LISTING

B$EXCFR.ASL
      1034**DCL      1034--REDEF
B$EXCFR.ERR
      1048**DCL      2339>>ASSIGN
B$EXCFR.ERR.ERR#
      1048**DCL      1048--REDEF
B$EXCFR.EVID
      1047**DCL      1047--REDEF    1048--REDEF
B$EXCFR.IR
      1035**DCL      1035--REDEF
B$EXCFR.PREVSZ
      1034**DCL      1034--REDEF
B$EXCFR.SUBC
      1046**DCL      1046--REDEF    1047--REDEF    1047--REDEF
B$TCB.ALT$
      1031**DCL      2339>>ASSIGN
B$TCB$
       393**DCL      2339>>ASSIGN
BUFLNSF
       294**DCL      2295>>IF       2298>>IF       2298<<ASSIGN   2298>>ASSIGN   2300>>ASSIGN
BUFSF
       295**DCL      2299>>ASSIGN
COUNTSF
       345**DCL       346--REDEF
DCBSF
       274**DCL      2274>>ASSIGN   2281--IF       2303--IF
ENCRP_SEEDSF
       303**DCL       304--REDEF    2302>>ASSIGN   2314<<ASSIGN   2323<<ASSIGN
ERRCODESF
       305**DCL       310--REDEF
ERRCODESF.ERR#
       308**DCL      2330<<ASSIGN
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:106  
F$DCB.ACTPOS
      2211**DCL      2211--REDEF
F$DCB.ARS#
      2185**DCL      2185--REDEF
F$DCB.ATTR
      2204**DCL      2205--REDEF
F$DCB.BORROW
      2219**DCL      2219--REDEF    2219--REDEF    2219--REDEF
F$DCB.DCBNAME.L
      2233**DCL      2233--IMP-SIZ
F$DCB.EOMCHAR#
      2189**DCL      2189--REDEF
F$DCB.FLDID
      2214**DCL      2214--REDEF
F$DCB.FORM$
      2208**DCL      2208--REDEF
F$DCB.FSECT
      2224**DCL      2224--REDEF
F$DCB.FSN#
      2201**DCL      2201--REDEF    2201--REDEF    2202--REDEF
F$DCB.HEADER$
      2207**DCL      2207--REDEF
F$DCB.IXTNSIZE#
      2205**DCL      2205--REDEF
F$DCB.LASTSTA$
      2194**DCL      2194--REDEF
F$DCB.LVL
      2220**DCL      2220--REDEF
F$DCB.NAME#.C
      2195**DCL      2195--REDEF
F$DCB.NOEOF
      2217**DCL      2217--REDEF
F$DCB.NRECS#
      2206**DCL      2206--REDEF
F$DCB.NRECX
      2225**DCL      2225--REDEF
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:107  
F$DCB.OHDR
      2217**DCL      2217--REDEF
F$DCB.ORG#
      2200**DCL      2200--REDEF    2281>>IF       2303>>IF
F$DCB.PRECNO
      2223**DCL      2223--REDEF
F$DCB.RCSZ
      2229**DCL      2229--REDEF
F$DCB.RES#
      2196**DCL      2196--REDEF
F$DCB.SETX
      2208**DCL      2208--REDEF
F$DCB.TAB$
      2208**DCL      2208--REDEF
F$DCB.TDA
      2222**DCL      2223--REDEF
F$DCB.WSN#
      2196**DCL      2196--REDEF
FIDSF_RD
       321**DCL       322--REDEF
FSA
        63**DCL      2308<>CALL
FSA.EOMCHAR#
        79**DCL        80--REDEF
FSA.ERR
        67**DCL      2335>>ASSIGN
FSA.ERR.CODE
        68**DCL      2328>>IF
FSA.SIG1
        73**DCL        73--REDEF
FSA.SIG2
        73**DCL        74--REDEF
FSA_FLAG
       336**DCL      2307>>IF       2311<<ASSIGN   2326>>IF       2331<<ASSIGN   2336<<ASSIGN
FULLSF
       292**DCL      2275>>ASSIGN   2313<<ASSIGN   2322<<ASSIGN
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:108  
HELPCODE
       339**DCL       344--REDEF
ICHKSUM
       404**DCL       405--REDEF
INCL_ERR
       317**DCL      2349<<ASSIGN
INDEXSF
       347**DCL      2304>>ASSIGN
I_O_BUF$
       382**DCL       383--IMP-PTR
KEYRSF
       327**DCL      2290>>IF       2316<<ASSIGN   2325<<ASSIGN
KEYSF
       276**DCL      2276>>ASSIGN   2278>>IF       2315<<ASSIGN   2324<<ASSIGN
KEYVSF
       277**DCL       282--REDEF    2284--ASSIGN   2293--ASSIGN
KEYVSF.IDSKEY
       280**DCL      2282--ASSIGN
KEYVSF.WD_ONE
       279**DCL       280--REDEF
M$READ
       419**DCL-ENT  2310--CALL
MONITOR_ERR
       312**DCL      2335<<ASSIGN   2339<<ASSIGN
MONITOR_ERR.ERR#
       315**DCL      2340>>IF       2345>>IF
MSGCODE
       311**DCL       312--REDEF
NO_KEYSF
       328**DCL      2280<<ASSIGN   2342<<ASSIGN
READ_ERR
      2321**LABEL    2308--CALLALT  2310--CALLALT
READ_FPT
      2252**DCL      2308<>CALL     2310<>CALL
READ_FPT.BUF_
      2254**DCL      2296<<ASSIGN   2299<<ASSIGN
PL6.E3A0      #003=SYS_FUNC_READ File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:109  
READ_FPT.BUF_.BOUND
      2254**DCL      2300<<ASSIGN
READ_FPT.KEY_
      2252**DCL      2282<<ASSIGN   2284<<ASSIGN   2288<<ASSIGN   2293<<ASSIGN
READ_FPT.STATION_
      2255**DCL      2256--REDEF
READ_FPT.V
      2256**DCL      2252--DCLINIT
READ_FPT.V.DCB#
      2256**DCL      2274<<ASSIGN
READ_FPT.V.DVBYTE.REREAD#
      2267**DCL      2267--REDEF
READ_FPT.V.FULL#
      2258**DCL      2275<<ASSIGN
READ_FPT.V.INDX#
      2265**DCL      2265--REDEF    2304<<ASSIGN   2306<<ASSIGN
READ_FPT.V.KEYR#
      2257**DCL      2287<<ASSIGN   2292<<ASSIGN
READ_FPT.V.KEYS#
      2257**DCL      2276<<ASSIGN
READ_FPT.V.SEED#
      2266**DCL      2302<<ASSIGN
READ_FPT.V.WAIT#
      2256**DCL      2277<<ASSIGN
REC$
       363**DCL       386--IMP-PTR
REC_DATA_LN
       391**DCL       390--IMP-SIZ
SYS_FUNC_ERRMSG
         7**DCL-ENT  2350--CALL
WAITSF
       290**DCL      2277>>ASSIGN   2317<<ASSIGN   2321<<ASSIGN
XSA$READ
         8**DCL-ENT  2308--CALL

PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:110  
      566        1        /*T***********************************************************/
      567        2        /*T*                                                         */
      568        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      569        4        /*T*                                                         */
      570        5        /*T***********************************************************/
      571        6        SYS_FUNC_WRIT: PROC ALTRET;
      572        7    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      573        8    1   DCL TEMPLEN SBIN WORD STATIC ALIGNED;
      574        9        %INCLUDE ZI_GLOBAL_DBUTIL;
      575      187         %SYS_FUNC;
      576      279         %MISC_DCLS;
      577      332        %INCLUDE CP_6;
      578      413        %INCLUDE CP_6_SUBS;
      579      953        %B$TCB;
      580      956        %F$DCB;
      581     1013        %B$EXCFR;
      582     1031        %FPT_WRITE(FPTN=WRITE_FPT);
      583     1062        %VLP_VECTOR(FPTN=IKEY,
      584     1063         STCLASS="BASED(IKEY$) ");
      585     1078         %INCLUDE XS_MACRO_C;
      586     1122         %XSA_PARAM(FPTN=FSA,
      587     1123         STCLASS=SYMREF);
      588     1153    1   DCL XSA$WRITE ENTRY(2) ALTRET;
      589     1154
      590     1155    1   DCL IKEY$ PTR;
      591     1156    1       WRITE_FPT.V.DCB#=DCBSF;
      592     1157    1       IF BUFLNSF = 0 THEN
      593     1158    1           WRITE_FPT.BUF_ = VECTOR(NIL);
      594     1159    2       ELSE DO;
      595     1160    2           IF BUFLNSF > 0 THEN TEMPLEN = BUFLNSF-1; /* Zero base array*/
      596     1161    2           WRITE_FPT.BUF_ = BUFSF;
      597     1162    2           WRITE_FPT.BUF_.BOUND = TEMPLEN;
      598     1163    2           END;
      599     1164    1       WRITE_FPT.V.WAIT#=WAITSF;
      600     1165    1       WRITE_FPT.V.EVENT#=EVENTSF;
      601     1166    1       WRITE_FPT.V.NOTIME#=NOTIMESF;
      602     1167    1       WRITE_FPT.V.DVBYTE.VFC#=VFCSF;
PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:111  
      603     1168    1       WRITE_FPT.V.FULL#=FULLSF;
      604     1169    1       WRITE_FPT.V.SEED#=ENCRP_SEEDSF;
      605     1170    1       IF KEYVSF.WD_ONE = '    ' THEN
      606     1171    1           WRITE_FPT.KEY_=VECTOR(NIL);
      607     1172    1       ELSE
      608     1173    2       DO;
      609     1174    2           IF DCBADDR(DCBSF)->F$DCB.ORG# = %IDS#
      610     1175    2           THEN WRITE_FPT.KEY_ = VECTOR(KEYVSF.IDSKEY);
      611     1176    3           ELSE DO;
      612     1177    3               WRITE_FPT.KEY_ = VECTOR(KEYVSF);
      613     1178    3               IF DCBADDR(DCBSF) -> F$DCB.ORG# = %INDEXED# THEN
      614     1179    4               DO;
      615     1180    4                   IKEY$ = ADDR(WRITE_FPT.KEY_);
      616     1181    4                   IKEY.W1.VSIZE# = BUFLNSF; /* Adjust size of indexed key */
      617     1182    4                   END;
      618     1183    3               END;
      619     1184    2           END;
      620     1185    1       IF FSA_FLAG = %YES# /* Fast seq access on writing */
      621     1186    1       THEN CALL XSA$WRITE(WRITE_FPT,FSA) ALTRET(WRT_ERR);
      622     1187    1       ELSE
      623     1188    1           CALL M$WRITE(WRITE_FPT) ALTRET(WRT_ERR);
      624     1189         /*    Put in defaults for next call */
      625     1190    1       WAITSF = %YES#;
      626     1191    1       EVENTSF = 0;
      627     1192    1       FULLSF = %NO#;
      628     1193    1       NOTIMESF = %NO#;
      629     1194    1       VFCSF = %YES#;
      630     1195    1       ENCRP_SEEDSF = '0'B;
      631     1196    1       KEYSF = %NO#;
      632     1197    1       KEYVSF.WD_ONE = ' ';
      633     1198    1       RETURN;
      634     1199    1   WRT_ERR:
      635     1200    1       IF FSA_FLAG = %YES# THEN
      636     1201    1           MONITOR_ERR = FSA.ERR;
      637     1202    1       ELSE
      638     1203    1           MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;
      639     1204    1       INCL_ERR = %YES#;
PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:112  
      640     1205    1       CALL SYS_FUNC_ERRMSG;
      641     1206         /*    Put in defaults for next call */
      642     1207    1       WAITSF = %YES#;
      643     1208    1       EVENTSF = 0;
      644     1209    1       FULLSF = %NO#;
      645     1210    1       NOTIMESF = %NO#;
      646     1211    1       VFCSF = %YES#;
      647     1212    1       ENCRP_SEEDSF = '0'B;
      648     1213    1       KEYSF = %NO#;
      649     1214    1       KEYVSF.WD_ONE = ' ';
      650     1215    1       ALTRETURN;
      651     1216    1   END SYS_FUNC_WRIT;
      652     1217        %EOD;

PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:113  
--  Include file information  --

   XS_MACRO_C.:LIB_E05  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_WRIT.

   Procedure SYS_FUNC_WRIT requires 124 words for executable code.
   Procedure SYS_FUNC_WRIT requires 4 words of local(AUTO) storage.

PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:114  

 Object Unit name= SYS_FUNC_WRIT                              File name= ZIU$Q2SF.:ZIC0TOU
 UTS= SEP 05 '97 13:27:10.96 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none    14     16  SYS_FUNC_WRIT
    1   DCB   even  none     0      0  M$LO
    2   DCB   even  none     0      0  M$UC
    3  RoData even  UTS      1      1  SYS_FUNC_WRIT
    4   Proc  even  none   124    174  SYS_FUNC_WRIT
    5  RoData even  none    14     16  SYS_FUNC_WRIT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     4      0   yes    yes     yes      Std        0  SYS_FUNC_WRIT

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       2 XSA$WRITE
 yes     yes           Std       0 SYS_FUNC_ERRMSG
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:115  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     BLKLSF                                KEYLSF                                KEYXSF
     DCBSF                                 ORGSF                                 KEYSF
     KEYVSF                                ACSSF                                 NOTIMESF
     FUNSF                                 ASNSF                                 TESTSF
     XTENSIZESF                            DISPSF                                WAITSF
     VFCSF                                 FULLSF                                BKUPSF
     BUFLNSF                               BUFSF                                 SOURCESF
     DESTSF                                DATESF                                TIMESF
     UTSSF                                 DAYSF                                 TSTAMPSF
     ENCRP_SEEDSF                          ERRCODESF                             MSGCODE
     INCL_ERR                              ERR_INSERT                            FIDSF_RD
     ACNT                                  EXISTSF                               SHARESF
     DCBNMSF                               KEYRSF                                NO_KEYSF
     REASGNSF                              CARRY_ATTRIBUTESF                     SUBMESSF
     SPKY_OPNSF                            POSSF                                 ERRFLGSF
     MERGESF                               FSA_FLAG                              RELGSF
     UNUSED                                HELPCODE                              COUNTSF
     INDEXSF                               GAP                                   PSNSF
     ACNTSF                                KEY_SHADWSF                           REC$
     RB                                    RE                                    IE
     IB                                    CNT                                   ICNT
     RCNT                                  SCNT                                  FIRST_SET
     RETCNT                                DMPCNT                                KCNT
     ACNT_IDX                              I                                     J
     K                                     X                                     STEPCC
     I_O_BUF$                              OUT_INDX                              I_O_SIZE
     REC_DATA_LN                           M$LO                                  B$TCB$
     B$ROS$                                B$JIT$                                KEYFID
     I_O_KEY                               RESTART                               BREAK_FLAG
     ICHKSUM                               ITMCNT                                GAP1
     M$UC                                  FSA
PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:116  

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:117  


      566        1        /*T***********************************************************/
      567        2        /*T*                                                         */
      568        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      569        4        /*T*                                                         */
      570        5        /*T***********************************************************/
      571        6        SYS_FUNC_WRIT: PROC ALTRET;

      6  4 000000   000000 700200 xent  SYS_FUNC_WR* TSX0  ! X66_AUTO_0
         4 000001   000004 000000                    ZERO    4,0

      572        7    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      573        8    1   DCL TEMPLEN SBIN WORD STATIC ALIGNED;
      574        9        %INCLUDE ZI_GLOBAL_DBUTIL;
      575      187         %SYS_FUNC;
      576      279         %MISC_DCLS;
      577      332        %INCLUDE CP_6;
      578      413        %INCLUDE CP_6_SUBS;
      579      953        %B$TCB;
      580      956        %F$DCB;
      581     1013        %B$EXCFR;
      582     1031        %FPT_WRITE(FPTN=WRITE_FPT);
      583     1062        %VLP_VECTOR(FPTN=IKEY,
      584     1063         STCLASS="BASED(IKEY$) ");
      585     1078         %INCLUDE XS_MACRO_C;
      586     1122         %XSA_PARAM(FPTN=FSA,
      587     1123         STCLASS=SYMREF);
      588     1153    1   DCL XSA$WRITE ENTRY(2) ALTRET;
      589     1154
      590     1155    1   DCL IKEY$ PTR;
      591     1156    1       WRITE_FPT.V.DCB#=DCBSF;

   1156  4 000002   000000 220000 xsym               LDX0    DCBSF
         4 000003   000012 740000 0                  STX0    WRITE_FPT+8

      592     1157    1       IF BUFLNSF = 0 THEN

PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:118  
   1157  4 000004   000000 235000 xsym               LDA     BUFLNSF
         4 000005   000011 601000 4                  TNZ     s:1160

      593     1158    1           WRITE_FPT.BUF_ = VECTOR(NIL);

   1158  4 000006   000000 237000 5                  LDAQ    0
         4 000007   000006 757000 0                  STAQ    WRITE_FPT+4
         4 000010   000024 710000 4                  TRA     s:1164

      594     1159    2       ELSE DO;

      595     1160    2           IF BUFLNSF > 0 THEN TEMPLEN = BUFLNSF-1; /* Zero base array*/

   1160  4 000011   000014 600000 4                  TZE     s:1161

   1160  4 000012   000001 135007                    SBLA    1,DL
         4 000013   000000 755000 0                  STA     TEMPLEN

      596     1161    2           WRITE_FPT.BUF_ = BUFSF;

   1161  4 000014   000000 100400                    MLR     fill='000'O
         4 000015   000000 000010 xsym               ADSC9   BUFSF                    cn=0,n=8
         4 000016   000006 000010 0                  ADSC9   WRITE_FPT+4              cn=0,n=8

      597     1162    2           WRITE_FPT.BUF_.BOUND = TEMPLEN;

   1162  4 000017   000000 236000 0                  LDQ     TEMPLEN
         4 000020   000020 736000                    QLS     16
         4 000021   000006 676000 0                  ERQ     WRITE_FPT+4
         4 000022   000002 376000 5                  ANQ     2
         4 000023   000006 656000 0                  ERSQ    WRITE_FPT+4

      598     1163    2           END;

      599     1164    1       WRITE_FPT.V.WAIT#=WAITSF;

   1164  4 000024   000000 236000 xsym               LDQ     WAITSF
PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:119  
         4 000025   000022 772000                    QRL     18
         4 000026   000012 676000 0                  ERQ     WRITE_FPT+8
         4 000027   400000 376007                    ANQ     -131072,DL
         4 000030   000012 656000 0                  ERSQ    WRITE_FPT+8

      600     1165    1       WRITE_FPT.V.EVENT#=EVENTSF;

   1165  4 000031   000000 235000 xsym               LDA     COUNTSF
         4 000032   000013 755000 0                  STA     WRITE_FPT+9

      601     1166    1       WRITE_FPT.V.NOTIME#=NOTIMESF;

   1166  4 000033   000000 236000 xsym               LDQ     NOTIMESF
         4 000034   000036 772000                    QRL     30
         4 000035   000012 676000 0                  ERQ     WRITE_FPT+8
         4 000036   000040 376007                    ANQ     32,DL
         4 000037   000012 656000 0                  ERSQ    WRITE_FPT+8

      602     1167    1       WRITE_FPT.V.DVBYTE.VFC#=VFCSF;

   1167  4 000040   000000 236000 xsym               LDQ     VFCSF
         4 000041   000002 772000                    QRL     2
         4 000042   000015 676000 0                  ERQ     WRITE_FPT+11
         4 000043   100000 376003                    ANQ     32768,DU
         4 000044   000015 656000 0                  ERSQ    WRITE_FPT+11

      603     1168    1       WRITE_FPT.V.FULL#=FULLSF;

   1168  4 000045   000000 236000 xsym               LDQ     FULLSF
         4 000046   000027 772000                    QRL     23
         4 000047   000012 676000 0                  ERQ     WRITE_FPT+8
         4 000050   010000 376007                    ANQ     4096,DL
         4 000051   000012 656000 0                  ERSQ    WRITE_FPT+8

      604     1169    1       WRITE_FPT.V.SEED#=ENCRP_SEEDSF;

   1169  4 000052   000000 236000 xsym               LDQ     ENCRP_SEEDSF
PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:120  
         4 000053   000014 756000 0                  STQ     WRITE_FPT+10

      605     1170    1       IF KEYVSF.WD_ONE = '    ' THEN

   1170  4 000054   040000 106400                    CMPC    fill='040'O
         4 000055   000000 200004 xsym               ADSC9   KEYVSF                   cn=1,n=4
         4 000056   000000 000004 3                  ADSC9   0                        cn=0,n=4
         4 000057   000063 601000 4                  TNZ     s:1174

      606     1171    1           WRITE_FPT.KEY_=VECTOR(NIL);

   1171  4 000060   000000 237000 5                  LDAQ    0
         4 000061   000004 757000 0                  STAQ    WRITE_FPT+2
         4 000062   000113 710000 4                  TRA     s:1185

      607     1172    1       ELSE
      608     1173    2       DO;

      609     1174    2           IF DCBADDR(DCBSF)->F$DCB.ORG# = %IDS#

   1174  4 000063   000003 470400 5                  LDP0    3
         4 000064   000000 471500                    LDP1    0,,PR0
         4 000065   100000 473510                    LDP3    0,X0,PR1
         4 000066   300032 236100                    LDQ     26,,PR3
         4 000067   777000 376003                    ANQ     -512,DU
         4 000070   007000 116003                    CMPQ    3584,DU
         4 000071   000075 601000 4                  TNZ     s:1177

      610     1175    2           THEN WRITE_FPT.KEY_ = VECTOR(KEYVSF.IDSKEY);

   1175  4 000072   000004 237000 5                  LDAQ    4
         4 000073   000004 757000 0                  STAQ    WRITE_FPT+2
         4 000074   000113 710000 4                  TRA     s:1185

      611     1176    3           ELSE DO;

      612     1177    3               WRITE_FPT.KEY_ = VECTOR(KEYVSF);
PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:121  

   1177  4 000075   000006 237000 5                  LDAQ    6
         4 000076   000004 757000 0                  STAQ    WRITE_FPT+2

      613     1178    3               IF DCBADDR(DCBSF) -> F$DCB.ORG# = %INDEXED# THEN

   1178  4 000077   300032 236100                    LDQ     26,,PR3
         4 000100   777000 376003                    ANQ     -512,DU
         4 000101   006000 116003                    CMPQ    3072,DU
         4 000102   000113 601000 4                  TNZ     s:1185

      614     1179    4               DO;

      615     1180    4                   IKEY$ = ADDR(WRITE_FPT.KEY_);

   1180  4 000103   000010 236000 5                  LDQ     8
         4 000104   200003 756100                    STQ     IKEY$,,AUTO

      616     1181    4                   IKEY.W1.VSIZE# = BUFLNSF; /* Adjust size of indexed key */

   1181  4 000105   200003 474500                    LDP4    IKEY$,,AUTO
         4 000106   000000 236000 xsym               LDQ     BUFLNSF
         4 000107   000020 736000                    QLS     16
         4 000110   400000 676100                    ERQ     0,,PR4
         4 000111   000002 376000 5                  ANQ     2
         4 000112   400000 656100                    ERSQ    0,,PR4

      617     1182    4                   END;

      618     1183    3               END;

      619     1184    2           END;

      620     1185    1       IF FSA_FLAG = %YES# /* Fast seq access on writing */

   1185  4 000113   000000 234000 xsym               SZN     FSA_FLAG
         4 000114   000122 605000 4                  TPL     s:1188
PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:122  

      621     1186    1       THEN CALL XSA$WRITE(WRITE_FPT,FSA) ALTRET(WRT_ERR);

   1186  4 000115   000012 630400 5                  EPPR0   10
         4 000116   000011 631400 5                  EPPR1   9
         4 000117   000000 701000 xent               TSX1    XSA$WRITE
         4 000120   000142 702000 4                  TSX2    WRT_ERR
         4 000121   000126 710000 4                  TRA     s:1190

      622     1187    1       ELSE
      623     1188    1           CALL M$WRITE(WRITE_FPT) ALTRET(WRT_ERR);

   1188  4 000122   000002 630400 0                  EPPR0   WRITE_FPT
         4 000123   440001 713400                    CLIMB   alt,write
         4 000124   401400 401760                    pmme    nvectors=4
         4 000125   000142 702000 4                  TSX2    WRT_ERR

      624     1189         /*    Put in defaults for next call */
      625     1190    1       WAITSF = %YES#;

   1190  4 000126   400000 236003                    LDQ     -131072,DU
         4 000127   000000 756000 xsym               STQ     WAITSF

      626     1191    1       EVENTSF = 0;

   1191  4 000130   000000 450000 xsym               STZ     COUNTSF

      627     1192    1       FULLSF = %NO#;

   1192  4 000131   000000 450000 xsym               STZ     FULLSF

      628     1193    1       NOTIMESF = %NO#;

   1193  4 000132   000000 450000 xsym               STZ     NOTIMESF

      629     1194    1       VFCSF = %YES#;

PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:123  
   1194  4 000133   000000 756000 xsym               STQ     VFCSF

      630     1195    1       ENCRP_SEEDSF = '0'B;

   1195  4 000134   000000 450000 xsym               STZ     ENCRP_SEEDSF

      631     1196    1       KEYSF = %NO#;

   1196  4 000135   000000 450000 xsym               STZ     KEYSF

      632     1197    1       KEYVSF.WD_ONE = ' ';

   1197  4 000136   040000 100400                    MLR     fill='040'O
         4 000137   000014 000001 5                  ADSC9   12                       cn=0,n=1
         4 000140   000000 200004 xsym               ADSC9   KEYVSF                   cn=1,n=4

      633     1198    1       RETURN;

   1198  4 000141   000000 702200 xent               TSX2  ! X66_ARET

      634     1199    1   WRT_ERR:
      635     1200    1       IF FSA_FLAG = %YES# THEN

   1200  4 000142   000000 234000 xsym  WRT_ERR      SZN     FSA_FLAG
         4 000143   000147 605000 4                  TPL     s:1203

      636     1201    1           MONITOR_ERR = FSA.ERR;

   1201  4 000144   000001 236000 xsym               LDQ     FSA+1
         4 000145   000000 756000 xsym               STQ     MSGCODE
         4 000146   000153 710000 4                  TRA     s:1204

      637     1202    1       ELSE
      638     1203    1           MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;

   1203  4 000147   000000 470400 xsym               LDP0    B$TCB$
         4 000150   000000 471500                    LDP1    0,,PR0
PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:124  
         4 000151   100102 236100                    LDQ     66,,PR1
         4 000152   000000 756000 xsym               STQ     MSGCODE

      639     1204    1       INCL_ERR = %YES#;

   1204  4 000153   400000 236003                    LDQ     -131072,DU
         4 000154   000000 756000 xsym               STQ     INCL_ERR

      640     1205    1       CALL SYS_FUNC_ERRMSG;

   1205  4 000155   000015 631400 5                  EPPR1   13
         4 000156   000000 701000 xent               TSX1    SYS_FUNC_ERRMSG
         4 000157   000000 011000                    NOP     0

      641     1206         /*    Put in defaults for next call */
      642     1207    1       WAITSF = %YES#;

   1207  4 000160   400000 236003                    LDQ     -131072,DU
         4 000161   000000 756000 xsym               STQ     WAITSF

      643     1208    1       EVENTSF = 0;

   1208  4 000162   000000 450000 xsym               STZ     COUNTSF

      644     1209    1       FULLSF = %NO#;

   1209  4 000163   000000 450000 xsym               STZ     FULLSF

      645     1210    1       NOTIMESF = %NO#;

   1210  4 000164   000000 450000 xsym               STZ     NOTIMESF

      646     1211    1       VFCSF = %YES#;

   1211  4 000165   000000 756000 xsym               STQ     VFCSF

      647     1212    1       ENCRP_SEEDSF = '0'B;
PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:125  

   1212  4 000166   000000 450000 xsym               STZ     ENCRP_SEEDSF

      648     1213    1       KEYSF = %NO#;

   1213  4 000167   000000 450000 xsym               STZ     KEYSF

      649     1214    1       KEYVSF.WD_ONE = ' ';

   1214  4 000170   040000 100400                    MLR     fill='040'O
         4 000171   000014 000001 5                  ADSC9   12                       cn=0,n=1
         4 000172   000000 200004 xsym               ADSC9   KEYVSF                   cn=1,n=4

      650     1215    1       ALTRETURN;

   1215  4 000173   000000 702200 xent               TSX2  ! X66_AALT

WRITE_FPT
 Sect OctLoc
   0     002   000003 777640   000012 006000   000000 177640   000000 006014    ................
   0     006   000000 177640   000000 006014   000000 177640   000000 006014    ................
   0     012   000000 400400   000000 000000   000000 000000   000000 000000    ................

(unnamed)
 Sect OctLoc
   3     000   040040 040040

(unnamed)
 Sect OctLoc
   5     000   000000 177640   000000 006014   777777 600000   000000 006003    ................
   5     004   000000 777640   000000 206000   000077 777640   000000 006000    .........?......
   5     010   000004 006000   000002 000000   000002 006000   000000 006000    ................
   5     014   040040 040040   000000 000000                                        ....
      651     1216    1   END SYS_FUNC_WRIT;
      652     1217        %EOD;

PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:126  
--  Include file information  --

   XS_MACRO_C.:LIB_E05  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_WRIT.

   Procedure SYS_FUNC_WRIT requires 124 words for executable code.
   Procedure SYS_FUNC_WRIT requires 4 words of local(AUTO) storage.
PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:127  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:128  
          MINI XREF LISTING

B$EXCFR.ASL
      1014**DCL      1014--REDEF
B$EXCFR.ERR
      1028**DCL      1203>>ASSIGN
B$EXCFR.ERR.ERR#
      1028**DCL      1028--REDEF
B$EXCFR.EVID
      1027**DCL      1027--REDEF    1028--REDEF
B$EXCFR.IR
      1015**DCL      1015--REDEF
B$EXCFR.PREVSZ
      1014**DCL      1014--REDEF
B$EXCFR.SUBC
      1026**DCL      1026--REDEF    1027--REDEF    1027--REDEF
B$TCB.ALT$
       954**DCL      1203>>ASSIGN
B$TCB$
       316**DCL      1203>>ASSIGN
BUFLNSF
       217**DCL      1157>>IF       1160>>IF       1160>>ASSIGN   1181>>ASSIGN
BUFSF
       218**DCL      1161>>ASSIGN
COUNTSF
       268**DCL       269--REDEF
DCBSF
       197**DCL      1156>>ASSIGN   1174--IF       1178--IF
ENCRP_SEEDSF
       226**DCL       227--REDEF    1169>>ASSIGN   1195<<ASSIGN   1212<<ASSIGN
ERRCODESF
       228**DCL       233--REDEF
EVENTSF
       269**DCL      1165>>ASSIGN   1191<<ASSIGN   1208<<ASSIGN
PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:129  
F$DCB.ACTPOS
       989**DCL       989--REDEF
F$DCB.ARS#
       963**DCL       963--REDEF
F$DCB.ATTR
       982**DCL       983--REDEF
F$DCB.BORROW
       997**DCL       997--REDEF     997--REDEF     997--REDEF
F$DCB.DCBNAME.L
      1011**DCL      1011--IMP-SIZ
F$DCB.EOMCHAR#
       967**DCL       967--REDEF
F$DCB.FLDID
       992**DCL       992--REDEF
F$DCB.FORM$
       986**DCL       986--REDEF
F$DCB.FSECT
      1002**DCL      1002--REDEF
F$DCB.FSN#
       979**DCL       979--REDEF     979--REDEF     980--REDEF
F$DCB.HEADER$
       985**DCL       985--REDEF
F$DCB.IXTNSIZE#
       983**DCL       983--REDEF
F$DCB.LASTSTA$
       972**DCL       972--REDEF
F$DCB.LVL
       998**DCL       998--REDEF
F$DCB.NAME#.C
       973**DCL       973--REDEF
F$DCB.NOEOF
       995**DCL       995--REDEF
F$DCB.NRECS#
       984**DCL       984--REDEF
F$DCB.NRECX
      1003**DCL      1003--REDEF
PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:130  
F$DCB.OHDR
       995**DCL       995--REDEF
F$DCB.ORG#
       978**DCL       978--REDEF    1174>>IF       1178>>IF
F$DCB.PRECNO
      1001**DCL      1001--REDEF
F$DCB.RCSZ
      1007**DCL      1007--REDEF
F$DCB.RES#
       974**DCL       974--REDEF
F$DCB.SETX
       986**DCL       986--REDEF
F$DCB.TAB$
       986**DCL       986--REDEF
F$DCB.TDA
      1000**DCL      1001--REDEF
F$DCB.WSN#
       974**DCL       974--REDEF
FIDSF_RD
       244**DCL       245--REDEF
FSA
      1131**DCL      1186<>CALL
FSA.EOMCHAR#
      1147**DCL      1148--REDEF
FSA.ERR
      1135**DCL      1201>>ASSIGN
FSA.SIG1
      1141**DCL      1141--REDEF
FSA.SIG2
      1141**DCL      1142--REDEF
FSA_FLAG
       259**DCL      1185>>IF       1200>>IF
FULLSF
       215**DCL      1168>>ASSIGN   1192<<ASSIGN   1209<<ASSIGN
HELPCODE
       262**DCL       267--REDEF
PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:131  
ICHKSUM
       327**DCL       328--REDEF
IKEY.W1.VSIZE#
      1074**DCL      1181<<ASSIGN
IKEY.W2
      1075**DCL      1076--REDEF
IKEY$
      1155**DCL      1074--IMP-PTR  1180<<ASSIGN   1181>>ASSIGN
INCL_ERR
       240**DCL      1204<<ASSIGN
I_O_BUF$
       305**DCL       306--IMP-PTR
KEYSF
       199**DCL      1196<<ASSIGN   1213<<ASSIGN
KEYVSF
       200**DCL       205--REDEF    1177--ASSIGN
KEYVSF.IDSKEY
       203**DCL      1175--ASSIGN
KEYVSF.WD_ONE
       202**DCL       203--REDEF    1170>>IF       1197<<ASSIGN   1214<<ASSIGN
M$WRITE
       342**DCL-ENT  1188--CALL
MONITOR_ERR
       235**DCL      1201<<ASSIGN   1203<<ASSIGN
MSGCODE
       234**DCL       235--REDEF
NOTIMESF
       207**DCL      1166>>ASSIGN   1193<<ASSIGN   1210<<ASSIGN
REC$
       286**DCL       309--IMP-PTR
REC_DATA_LN
       314**DCL       313--IMP-SIZ
SYS_FUNC_ERRMSG
         7**DCL-ENT  1205--CALL
TEMPLEN
         8**DCL      1160<<ASSIGN   1162>>ASSIGN
PL6.E3A0      #004=SYS_FUNC_WRIT File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:132  
VFCSF
       214**DCL      1167>>ASSIGN   1194<<ASSIGN   1211<<ASSIGN
WAITSF
       213**DCL      1164>>ASSIGN   1190<<ASSIGN   1207<<ASSIGN
WRITE_FPT
      1048**DCL      1186<>CALL     1188<>CALL
WRITE_FPT.BUF_
      1048**DCL      1158<<ASSIGN   1161<<ASSIGN
WRITE_FPT.BUF_.BOUND
      1048**DCL      1162<<ASSIGN
WRITE_FPT.KEY_
      1048**DCL      1171<<ASSIGN   1175<<ASSIGN   1177<<ASSIGN   1180--ASSIGN
WRITE_FPT.STATION_
      1050**DCL      1050--REDEF
WRITE_FPT.V
      1051**DCL      1048--DCLINIT
WRITE_FPT.V.DCB#
      1051**DCL      1156<<ASSIGN
WRITE_FPT.V.DVBYTE.VFC#
      1057**DCL      1057--REDEF    1167<<ASSIGN
WRITE_FPT.V.EVENT#
      1056**DCL      1165<<ASSIGN
WRITE_FPT.V.FULL#
      1053**DCL      1168<<ASSIGN
WRITE_FPT.V.NOTIME#
      1054**DCL      1166<<ASSIGN
WRITE_FPT.V.SEED#
      1056**DCL      1169<<ASSIGN
WRITE_FPT.V.WAIT#
      1051**DCL      1164<<ASSIGN
WRT_ERR
      1200**LABEL    1186--CALLALT  1188--CALLALT
XSA$WRITE
      1153**DCL-ENT  1186--CALL

PL6.E3A0      #005=SYS_FUNC_DATE File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:133  
      653        1        /*T***********************************************************/
      654        2        /*T*                                                         */
      655        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      656        4        /*T*                                                         */
      657        5        /*T***********************************************************/
      658        6        SYS_FUNC_DATE: PROC ALTRET;
      659        7    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      660        8        %INCLUDE ZI_GLOBAL_DBUTIL;
      661      186         %SYS_FUNC;
      662      278         %MISC_DCLS;
      663      331        %INCLUDE CP_6;
      664      412        %INCLUDE CP_6_SUBS;
      665      952        %B$TCB;
      666      955        %B$EXCFR;
      667      973        %FPT_TIME(FPTN=TIME_FPT);
      668      992    1       TIME_FPT.V.SOURCE#=SOURCESF;
      669      993    1       TIME_FPT.V.DEST#=DESTSF;
      670      994    1       TIME_FPT.DATE_= DATESF;
      671      995    1       IF TIME_FPT.V.SOURCE# ~= %CLOCK# THEN
      672      996    1           TIME_FPT.TSTAMP_ = UTSSF;
      673      997    1       CALL M$TIME(TIME_FPT) ALTRET(TIME_ERR);
      674      998    1       RETURN;
      675      999    1   TIME_ERR:
      676     1000    1       MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;
      677     1001    1       INCL_ERR = %YES#;
      678     1002    1       CALL SYS_FUNC_ERRMSG;
      679     1003    1       ALTRETURN;
      680     1004    1   END SYS_FUNC_DATE;
      681     1005        %EOD;

PL6.E3A0      #005=SYS_FUNC_DATE File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:134  
--  Include file information  --

   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_DATE.

   Procedure SYS_FUNC_DATE requires 32 words for executable code.
   Procedure SYS_FUNC_DATE requires 4 words of local(AUTO) storage.

PL6.E3A0      #005=SYS_FUNC_DATE File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:135  

 Object Unit name= SYS_FUNC_DATE                              File name= ZIU$Q2SF.:ZIC0TOU
 UTS= SEP 05 '97 13:27:19.92 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$LO
    1   DCB   even  none     0      0  M$UC
    2   Data  even  none    12     14  SYS_FUNC_DATE
    3   Proc  even  none    32     40  SYS_FUNC_DATE
    4  RoData even  none     1      1  SYS_FUNC_DATE

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes    yes     yes      Std        0  SYS_FUNC_DATE

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       0 SYS_FUNC_ERRMSG
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #005=SYS_FUNC_DATE File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:136  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     BLKLSF                                KEYLSF                                KEYXSF
     DCBSF                                 ORGSF                                 KEYSF
     KEYVSF                                ACSSF                                 NOTIMESF
     FUNSF                                 ASNSF                                 TESTSF
     XTENSIZESF                            DISPSF                                WAITSF
     VFCSF                                 FULLSF                                BKUPSF
     BUFLNSF                               BUFSF                                 SOURCESF
     DESTSF                                DATESF                                TIMESF
     UTSSF                                 DAYSF                                 TSTAMPSF
     ENCRP_SEEDSF                          ERRCODESF                             MSGCODE
     INCL_ERR                              ERR_INSERT                            FIDSF_RD
     ACNT                                  EXISTSF                               SHARESF
     DCBNMSF                               KEYRSF                                NO_KEYSF
     REASGNSF                              CARRY_ATTRIBUTESF                     SUBMESSF
     SPKY_OPNSF                            POSSF                                 ERRFLGSF
     MERGESF                               FSA_FLAG                              RELGSF
     UNUSED                                HELPCODE                              COUNTSF
     INDEXSF                               GAP                                   PSNSF
     ACNTSF                                KEY_SHADWSF                           REC$
     RB                                    RE                                    IE
     IB                                    CNT                                   ICNT
     RCNT                                  SCNT                                  FIRST_SET
     RETCNT                                DMPCNT                                KCNT
     ACNT_IDX                              I                                     J
     K                                     X                                     STEPCC
     I_O_BUF$                              OUT_INDX                              I_O_SIZE
     REC_DATA_LN                           M$LO                                  B$TCB$
     B$ROS$                                B$JIT$                                KEYFID
     I_O_KEY                               RESTART                               BREAK_FLAG
     ICHKSUM                               ITMCNT                                GAP1
     M$UC
PL6.E3A0      #005=SYS_FUNC_DATE File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:137  

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #005=SYS_FUNC_DATE File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:138  


      653        1        /*T***********************************************************/
      654        2        /*T*                                                         */
      655        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      656        4        /*T*                                                         */
      657        5        /*T***********************************************************/
      658        6        SYS_FUNC_DATE: PROC ALTRET;

      6  3 000000   000000 700200 xent  SYS_FUNC_DA* TSX0  ! X66_AUTO_0
         3 000001   000004 000000                    ZERO    4,0

      659        7    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      660        8        %INCLUDE ZI_GLOBAL_DBUTIL;
      661      186         %SYS_FUNC;
      662      278         %MISC_DCLS;
      663      331        %INCLUDE CP_6;
      664      412        %INCLUDE CP_6_SUBS;
      665      952        %B$TCB;
      666      955        %B$EXCFR;
      667      973        %FPT_TIME(FPTN=TIME_FPT);
      668      992    1       TIME_FPT.V.SOURCE#=SOURCESF;

    992  3 000002   000000 236000 xsym               LDQ     SOURCESF
         3 000003   000033 736000                    QLS     27
         3 000004   000012 552040 2                  STBQ    TIME_FPT+10,'40'O

      669      993    1       TIME_FPT.V.DEST#=DESTSF;

    993  3 000005   000000 236000 xsym               LDQ     DESTSF
         3 000006   000022 736000                    QLS     18
         3 000007   000012 552020 2                  STBQ    TIME_FPT+10,'20'O

      670      994    1       TIME_FPT.DATE_= DATESF;

    994  3 000010   000000 100400                    MLR     fill='000'O
         3 000011   000000 000010 xsym               ADSC9   DATESF                   cn=0,n=8
         3 000012   000002 000010 2                  ADSC9   TIME_FPT+2               cn=0,n=8
PL6.E3A0      #005=SYS_FUNC_DATE File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:139  

      671      995    1       IF TIME_FPT.V.SOURCE# ~= %CLOCK# THEN

    995  3 000013   000012 236000 2                  LDQ     TIME_FPT+10
         3 000014   777000 316003                    CANQ    -512,DU
         3 000015   000021 600000 3                  TZE     s:997

      672      996    1           TIME_FPT.TSTAMP_ = UTSSF;

    996  3 000016   000000 100400                    MLR     fill='000'O
         3 000017   000000 000010 xsym               ADSC9   UTSSF                    cn=0,n=8
         3 000020   000010 000010 2                  ADSC9   TIME_FPT+8               cn=0,n=8

      673      997    1       CALL M$TIME(TIME_FPT) ALTRET(TIME_ERR);

    997  3 000021   000000 630400 2                  EPPR0   TIME_FPT
         3 000022   420004 713400                    CLIMB   alt,+8196
         3 000023   402000 401760                    pmme    nvectors=5
         3 000024   000026 702000 3                  TSX2    TIME_ERR

      674      998    1       RETURN;

    998  3 000025   000000 702200 xent               TSX2  ! X66_ARET

      675      999    1   TIME_ERR:
      676     1000    1       MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;

   1000  3 000026   000000 470400 xsym  TIME_ERR     LDP0    B$TCB$
         3 000027   000000 471500                    LDP1    0,,PR0
         3 000030   100102 236100                    LDQ     66,,PR1
         3 000031   000000 756000 xsym               STQ     MSGCODE

      677     1001    1       INCL_ERR = %YES#;

   1001  3 000032   400000 236003                    LDQ     -131072,DU
         3 000033   000000 756000 xsym               STQ     INCL_ERR

PL6.E3A0      #005=SYS_FUNC_DATE File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:140  
      678     1002    1       CALL SYS_FUNC_ERRMSG;

   1002  3 000034   000000 631400 4                  EPPR1   0
         3 000035   000000 701000 xent               TSX1    SYS_FUNC_ERRMSG
         3 000036   000000 011000                    NOP     0

      679     1003    1       ALTRETURN;

   1003  3 000037   000000 702200 xent               TSX2  ! X66_AALT

TIME_FPT
 Sect OctLoc
   2     000   000001 777640   000012 006000   000000 177640   000000 006014    ................
   2     004   000000 177640   000000 006014   000000 177640   000000 006014    ................
   2     010   000000 177640   000000 006014   000001 000000   ****** ******    ................

(unnamed)
 Sect OctLoc
   4     000   000000 000000                                                    ....
      680     1004    1   END SYS_FUNC_DATE;
      681     1005        %EOD;

PL6.E3A0      #005=SYS_FUNC_DATE File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:141  
--  Include file information  --

   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_DATE.

   Procedure SYS_FUNC_DATE requires 32 words for executable code.
   Procedure SYS_FUNC_DATE requires 4 words of local(AUTO) storage.
PL6.E3A0      #005=SYS_FUNC_DATE File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:142  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #005=SYS_FUNC_DATE File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:143  
          MINI XREF LISTING

B$EXCFR.ASL
       956**DCL       956--REDEF
B$EXCFR.ERR
       970**DCL      1000>>ASSIGN
B$EXCFR.ERR.ERR#
       970**DCL       970--REDEF
B$EXCFR.EVID
       969**DCL       969--REDEF     970--REDEF
B$EXCFR.IR
       957**DCL       957--REDEF
B$EXCFR.PREVSZ
       956**DCL       956--REDEF
B$EXCFR.SUBC
       968**DCL       968--REDEF     969--REDEF     969--REDEF
B$TCB.ALT$
       953**DCL      1000>>ASSIGN
B$TCB$
       315**DCL      1000>>ASSIGN
COUNTSF
       267**DCL       268--REDEF
DATESF
       220**DCL       994>>ASSIGN
DESTSF
       219**DCL       993>>ASSIGN
ENCRP_SEEDSF
       225**DCL       226--REDEF
ERRCODESF
       227**DCL       232--REDEF
FIDSF_RD
       243**DCL       244--REDEF
HELPCODE
       261**DCL       266--REDEF
PL6.E3A0      #005=SYS_FUNC_DATE File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:144  
ICHKSUM
       326**DCL       327--REDEF
INCL_ERR
       239**DCL      1001<<ASSIGN
I_O_BUF$
       304**DCL       305--IMP-PTR
KEYVSF
       199**DCL       204--REDEF
KEYVSF.WD_ONE
       201**DCL       202--REDEF
M$TIME
       407**DCL-ENT   997--CALL
MONITOR_ERR
       234**DCL      1000<<ASSIGN
MSGCODE
       233**DCL       234--REDEF
REC$
       285**DCL       308--IMP-PTR
REC_DATA_LN
       313**DCL       312--IMP-SIZ
SOURCESF
       218**DCL       992>>ASSIGN
SYS_FUNC_ERRMSG
         7**DCL-ENT  1002--CALL
TIME_ERR
      1000**LABEL     997--CALLALT
TIME_FPT
       984**DCL       997<>CALL
TIME_FPT.DATE_
       984**DCL       994<<ASSIGN
TIME_FPT.TSTAMP_
       987**DCL       996<<ASSIGN
TIME_FPT.V
       988**DCL       984--DCLINIT
TIME_FPT.V.DEST#
       988**DCL       993<<ASSIGN
PL6.E3A0      #005=SYS_FUNC_DATE File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:145  
TIME_FPT.V.SOURCE#
       988**DCL       992<<ASSIGN    995>>IF
UTSSF
       222**DCL       996>>ASSIGN

PL6.E3A0      #006=SYS_FUNC_TSTAMP File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:146  
      682        1        /*T***********************************************************/
      683        2        /*T*                                                         */
      684        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      685        4        /*T*                                                         */
      686        5        /*T***********************************************************/
      687        6        SYS_FUNC_TSTAMP: PROC ALTRET;
      688        7    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      689        8        %INCLUDE ZI_GLOBAL_DBUTIL;
      690      186         %SYS_FUNC;
      691      278         %MISC_DCLS;
      692      331        %INCLUDE CP_6;
      693      412        %INCLUDE CP_6_SUBS;
      694      952        %B$TCB;
      695      955        %B$EXCFR;
      696      973        %FPT_TIME(FPTN=TIME_FPT);
      697      992    1       TIME_FPT.V.SOURCE#=SOURCESF;
      698      993    1       TIME_FPT.V.DEST#=DESTSF;
      699      994    1       TIME_FPT.TSTAMP_=TSTAMPSF;
      700      995    1       IF DATESF ~='0'B THEN
      701      996    1           TIME_FPT.DATE_=DATESF;
      702      997    1       IF TIMESF ~='0'B THEN
      703      998    1           TIME_FPT.TIME_=TIMESF;
      704      999    1       CALL M$TIME(TIME_FPT) ALTRET(TIME_ERR);
      705     1000    1       RETURN;
      706     1001    1   TIME_ERR:
      707     1002    1       MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;
      708     1003    1       INCL_ERR = %YES#;
      709     1004    1       CALL SYS_FUNC_ERRMSG;
      710     1005    1       ALTRETURN;
      711     1006    1   END SYS_FUNC_TSTAMP;
      712     1007        %EOD;

PL6.E3A0      #006=SYS_FUNC_TSTAMP File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:147  
--  Include file information  --

   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_TSTAMP.

   Procedure SYS_FUNC_TSTAMP requires 40 words for executable code.
   Procedure SYS_FUNC_TSTAMP requires 4 words of local(AUTO) storage.

PL6.E3A0      #006=SYS_FUNC_TSTAMP File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:148  

 Object Unit name= SYS_FUNC_TSTAMP                            File name= ZIU$Q2SF.:ZIC0TOU
 UTS= SEP 05 '97 13:27:25.44 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$LO
    1   DCB   even  none     0      0  M$UC
    2   Data  even  none    12     14  SYS_FUNC_TSTAMP
    3   Proc  even  none    40     50  SYS_FUNC_TSTAMP
    4  RoData even  none     1      1  SYS_FUNC_TSTAMP

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes    yes     yes      Std        0  SYS_FUNC_TSTAMP

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       0 SYS_FUNC_ERRMSG
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #006=SYS_FUNC_TSTAMP File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:149  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     BLKLSF                                KEYLSF                                KEYXSF
     DCBSF                                 ORGSF                                 KEYSF
     KEYVSF                                ACSSF                                 NOTIMESF
     FUNSF                                 ASNSF                                 TESTSF
     XTENSIZESF                            DISPSF                                WAITSF
     VFCSF                                 FULLSF                                BKUPSF
     BUFLNSF                               BUFSF                                 SOURCESF
     DESTSF                                DATESF                                TIMESF
     UTSSF                                 DAYSF                                 TSTAMPSF
     ENCRP_SEEDSF                          ERRCODESF                             MSGCODE
     INCL_ERR                              ERR_INSERT                            FIDSF_RD
     ACNT                                  EXISTSF                               SHARESF
     DCBNMSF                               KEYRSF                                NO_KEYSF
     REASGNSF                              CARRY_ATTRIBUTESF                     SUBMESSF
     SPKY_OPNSF                            POSSF                                 ERRFLGSF
     MERGESF                               FSA_FLAG                              RELGSF
     UNUSED                                HELPCODE                              COUNTSF
     INDEXSF                               GAP                                   PSNSF
     ACNTSF                                KEY_SHADWSF                           REC$
     RB                                    RE                                    IE
     IB                                    CNT                                   ICNT
     RCNT                                  SCNT                                  FIRST_SET
     RETCNT                                DMPCNT                                KCNT
     ACNT_IDX                              I                                     J
     K                                     X                                     STEPCC
     I_O_BUF$                              OUT_INDX                              I_O_SIZE
     REC_DATA_LN                           M$LO                                  B$TCB$
     B$ROS$                                B$JIT$                                KEYFID
     I_O_KEY                               RESTART                               BREAK_FLAG
     ICHKSUM                               ITMCNT                                GAP1
     M$UC
PL6.E3A0      #006=SYS_FUNC_TSTAMP File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:150  

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #006=SYS_FUNC_TSTAMP File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:151  


      682        1        /*T***********************************************************/
      683        2        /*T*                                                         */
      684        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      685        4        /*T*                                                         */
      686        5        /*T***********************************************************/
      687        6        SYS_FUNC_TSTAMP: PROC ALTRET;

      6  3 000000   000000 700200 xent  SYS_FUNC_TS* TSX0  ! X66_AUTO_0
         3 000001   000004 000000                    ZERO    4,0

      688        7    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      689        8        %INCLUDE ZI_GLOBAL_DBUTIL;
      690      186         %SYS_FUNC;
      691      278         %MISC_DCLS;
      692      331        %INCLUDE CP_6;
      693      412        %INCLUDE CP_6_SUBS;
      694      952        %B$TCB;
      695      955        %B$EXCFR;
      696      973        %FPT_TIME(FPTN=TIME_FPT);
      697      992    1       TIME_FPT.V.SOURCE#=SOURCESF;

    992  3 000002   000000 236000 xsym               LDQ     SOURCESF
         3 000003   000033 736000                    QLS     27
         3 000004   000012 552040 2                  STBQ    TIME_FPT+10,'40'O

      698      993    1       TIME_FPT.V.DEST#=DESTSF;

    993  3 000005   000000 236000 xsym               LDQ     DESTSF
         3 000006   000022 736000                    QLS     18
         3 000007   000012 552020 2                  STBQ    TIME_FPT+10,'20'O

      699      994    1       TIME_FPT.TSTAMP_=TSTAMPSF;

    994  3 000010   000000 100400                    MLR     fill='000'O
         3 000011   000000 000010 xsym               ADSC9   TSTAMPSF                 cn=0,n=8
         3 000012   000010 000010 2                  ADSC9   TIME_FPT+8               cn=0,n=8
PL6.E3A0      #006=SYS_FUNC_TSTAMP File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:152  

      700      995    1       IF DATESF ~='0'B THEN

    995  3 000013   000000 106400                    CMPC    fill='000'O
         3 000014   000000 000010 xsym               ADSC9   DATESF                   cn=0,n=8
         3 000015   000000 000002 4                  ADSC9   0                        cn=0,n=2
         3 000016   000022 600000 3                  TZE     s:997

      701      996    1           TIME_FPT.DATE_=DATESF;

    996  3 000017   000000 100400                    MLR     fill='000'O
         3 000020   000000 000010 xsym               ADSC9   DATESF                   cn=0,n=8
         3 000021   000002 000010 2                  ADSC9   TIME_FPT+2               cn=0,n=8

      702      997    1       IF TIMESF ~='0'B THEN

    997  3 000022   000000 106400                    CMPC    fill='000'O
         3 000023   000000 000010 xsym               ADSC9   TIMESF                   cn=0,n=8
         3 000024   000000 000002 4                  ADSC9   0                        cn=0,n=2
         3 000025   000031 600000 3                  TZE     s:999

      703      998    1           TIME_FPT.TIME_=TIMESF;

    998  3 000026   000000 100400                    MLR     fill='000'O
         3 000027   000000 000010 xsym               ADSC9   TIMESF                   cn=0,n=8
         3 000030   000004 000010 2                  ADSC9   TIME_FPT+4               cn=0,n=8

      704      999    1       CALL M$TIME(TIME_FPT) ALTRET(TIME_ERR);

    999  3 000031   000000 630400 2                  EPPR0   TIME_FPT
         3 000032   420004 713400                    CLIMB   alt,+8196
         3 000033   402000 401760                    pmme    nvectors=5
         3 000034   000036 702000 3                  TSX2    TIME_ERR

      705     1000    1       RETURN;

   1000  3 000035   000000 702200 xent               TSX2  ! X66_ARET
PL6.E3A0      #006=SYS_FUNC_TSTAMP File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:153  

      706     1001    1   TIME_ERR:
      707     1002    1       MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;

   1002  3 000036   000000 470400 xsym  TIME_ERR     LDP0    B$TCB$
         3 000037   000000 471500                    LDP1    0,,PR0
         3 000040   100102 236100                    LDQ     66,,PR1
         3 000041   000000 756000 xsym               STQ     MSGCODE

      708     1003    1       INCL_ERR = %YES#;

   1003  3 000042   400000 236003                    LDQ     -131072,DU
         3 000043   000000 756000 xsym               STQ     INCL_ERR

      709     1004    1       CALL SYS_FUNC_ERRMSG;

   1004  3 000044   000000 631400 4                  EPPR1   0
         3 000045   000000 701000 xent               TSX1    SYS_FUNC_ERRMSG
         3 000046   000000 011000                    NOP     0

      710     1005    1       ALTRETURN;

   1005  3 000047   000000 702200 xent               TSX2  ! X66_AALT

TIME_FPT
 Sect OctLoc
   2     000   000001 777640   000012 006000   000000 177640   000000 006014    ................
   2     004   000000 177640   000000 006014   000000 177640   000000 006014    ................
   2     010   000000 177640   000000 006014   000001 000000   ****** ******    ................

(unnamed)
 Sect OctLoc
   4     000   000000 000000                                                    ....
      711     1006    1   END SYS_FUNC_TSTAMP;
      712     1007        %EOD;

PL6.E3A0      #006=SYS_FUNC_TSTAMP File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:154  
--  Include file information  --

   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_TSTAMP.

   Procedure SYS_FUNC_TSTAMP requires 40 words for executable code.
   Procedure SYS_FUNC_TSTAMP requires 4 words of local(AUTO) storage.
PL6.E3A0      #006=SYS_FUNC_TSTAMP File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:155  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #006=SYS_FUNC_TSTAMP File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:156  
          MINI XREF LISTING

B$EXCFR.ASL
       956**DCL       956--REDEF
B$EXCFR.ERR
       970**DCL      1002>>ASSIGN
B$EXCFR.ERR.ERR#
       970**DCL       970--REDEF
B$EXCFR.EVID
       969**DCL       969--REDEF     970--REDEF
B$EXCFR.IR
       957**DCL       957--REDEF
B$EXCFR.PREVSZ
       956**DCL       956--REDEF
B$EXCFR.SUBC
       968**DCL       968--REDEF     969--REDEF     969--REDEF
B$TCB.ALT$
       953**DCL      1002>>ASSIGN
B$TCB$
       315**DCL      1002>>ASSIGN
COUNTSF
       267**DCL       268--REDEF
DATESF
       220**DCL       995>>IF        996>>ASSIGN
DESTSF
       219**DCL       993>>ASSIGN
ENCRP_SEEDSF
       225**DCL       226--REDEF
ERRCODESF
       227**DCL       232--REDEF
FIDSF_RD
       243**DCL       244--REDEF
HELPCODE
       261**DCL       266--REDEF
PL6.E3A0      #006=SYS_FUNC_TSTAMP File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:157  
ICHKSUM
       326**DCL       327--REDEF
INCL_ERR
       239**DCL      1003<<ASSIGN
I_O_BUF$
       304**DCL       305--IMP-PTR
KEYVSF
       199**DCL       204--REDEF
KEYVSF.WD_ONE
       201**DCL       202--REDEF
M$TIME
       407**DCL-ENT   999--CALL
MONITOR_ERR
       234**DCL      1002<<ASSIGN
MSGCODE
       233**DCL       234--REDEF
REC$
       285**DCL       308--IMP-PTR
REC_DATA_LN
       313**DCL       312--IMP-SIZ
SOURCESF
       218**DCL       992>>ASSIGN
SYS_FUNC_ERRMSG
         7**DCL-ENT  1004--CALL
TIMESF
       221**DCL       997>>IF        998>>ASSIGN
TIME_ERR
      1002**LABEL     999--CALLALT
TIME_FPT
       984**DCL       999<>CALL
TIME_FPT.DATE_
       984**DCL       996<<ASSIGN
TIME_FPT.TIME_
       986**DCL       998<<ASSIGN
TIME_FPT.TSTAMP_
       987**DCL       994<<ASSIGN
PL6.E3A0      #006=SYS_FUNC_TSTAMP File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:158  
TIME_FPT.V
       988**DCL       984--DCLINIT
TIME_FPT.V.DEST#
       988**DCL       993<<ASSIGN
TIME_FPT.V.SOURCE#
       988**DCL       992<<ASSIGN
TSTAMPSF
       224**DCL       994>>ASSIGN

PL6.E3A0      #007=SYS_FUNC_GETDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:159  
      713        1        /*T***********************************************************/
      714        2        /*T*                                                         */
      715        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      716        4        /*T*                                                         */
      717        5        /*T***********************************************************/
      718        6        SYS_FUNC_GETDCB: PROC ALTRET;
      719        7    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      720        8        %INCLUDE ZI_GLOBAL_DBUTIL;
      721      186         %SYS_FUNC;
      722      278         %MISC_DCLS;
      723      331        %INCLUDE CP_6;
      724      412        %INCLUDE CP_6_SUBS;
      725      952        %B$TCB;
      726      955        %B$EXCFR;
      727      973        %FPT_GETDCB (FPTN=GETDCB_FPT);
      728      988    1       GETDCB_FPT.DCBNAME_=DCBNMSF;
      729      989    1       GETDCB_FPT.V.MERGE#=MERGESF;
      730      990    1       CALL M$GETDCB(GETDCB_FPT) ALTRET(GETDCB_ERR);
      731      991    1       DCBSF=GETDCB_FPT.V.DCB#;
      732      992    1       MERGESF = %NO#;
      733      993    1       RETURN;
      734      994    1   GETDCB_ERR:
      735      995    1       MERGESF = %NO#;
      736      996    1       MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;
      737      997    1       INCL_ERR = %YES#;
      738      998    1       CALL SYS_FUNC_ERRMSG;
      739      999    1       ALTRETURN;
      740     1000    1   END SYS_FUNC_GETDCB;
      741     1001        %EOD;

PL6.E3A0      #007=SYS_FUNC_GETDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:160  
--  Include file information  --

   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_GETDCB.

   Procedure SYS_FUNC_GETDCB requires 29 words for executable code.
   Procedure SYS_FUNC_GETDCB requires 4 words of local(AUTO) storage.

PL6.E3A0      #007=SYS_FUNC_GETDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:161  

 Object Unit name= SYS_FUNC_GETDCB                            File name= ZIU$Q2SF.:ZIC0TOU
 UTS= SEP 05 '97 13:27:31.04 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$LO
    1   DCB   even  none     0      0  M$UC
    2   Data  even  none     8     10  SYS_FUNC_GETDCB
    3   Proc  even  none    29     35  SYS_FUNC_GETDCB
    4  RoData even  none     1      1  SYS_FUNC_GETDCB

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes    yes     yes      Std        0  SYS_FUNC_GETDCB

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       0 SYS_FUNC_ERRMSG
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #007=SYS_FUNC_GETDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:162  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     BLKLSF                                KEYLSF                                KEYXSF
     DCBSF                                 ORGSF                                 KEYSF
     KEYVSF                                ACSSF                                 NOTIMESF
     FUNSF                                 ASNSF                                 TESTSF
     XTENSIZESF                            DISPSF                                WAITSF
     VFCSF                                 FULLSF                                BKUPSF
     BUFLNSF                               BUFSF                                 SOURCESF
     DESTSF                                DATESF                                TIMESF
     UTSSF                                 DAYSF                                 TSTAMPSF
     ENCRP_SEEDSF                          ERRCODESF                             MSGCODE
     INCL_ERR                              ERR_INSERT                            FIDSF_RD
     ACNT                                  EXISTSF                               SHARESF
     DCBNMSF                               KEYRSF                                NO_KEYSF
     REASGNSF                              CARRY_ATTRIBUTESF                     SUBMESSF
     SPKY_OPNSF                            POSSF                                 ERRFLGSF
     MERGESF                               FSA_FLAG                              RELGSF
     UNUSED                                HELPCODE                              COUNTSF
     INDEXSF                               GAP                                   PSNSF
     ACNTSF                                KEY_SHADWSF                           REC$
     RB                                    RE                                    IE
     IB                                    CNT                                   ICNT
     RCNT                                  SCNT                                  FIRST_SET
     RETCNT                                DMPCNT                                KCNT
     ACNT_IDX                              I                                     J
     K                                     X                                     STEPCC
     I_O_BUF$                              OUT_INDX                              I_O_SIZE
     REC_DATA_LN                           M$LO                                  B$TCB$
     B$ROS$                                B$JIT$                                KEYFID
     I_O_KEY                               RESTART                               BREAK_FLAG
     ICHKSUM                               ITMCNT                                GAP1
     M$UC
PL6.E3A0      #007=SYS_FUNC_GETDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:163  

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #007=SYS_FUNC_GETDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:164  


      713        1        /*T***********************************************************/
      714        2        /*T*                                                         */
      715        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      716        4        /*T*                                                         */
      717        5        /*T***********************************************************/
      718        6        SYS_FUNC_GETDCB: PROC ALTRET;

      6  3 000000   000000 700200 xent  SYS_FUNC_GE* TSX0  ! X66_AUTO_0
         3 000001   000004 000000                    ZERO    4,0

      719        7    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      720        8        %INCLUDE ZI_GLOBAL_DBUTIL;
      721      186         %SYS_FUNC;
      722      278         %MISC_DCLS;
      723      331        %INCLUDE CP_6;
      724      412        %INCLUDE CP_6_SUBS;
      725      952        %B$TCB;
      726      955        %B$EXCFR;
      727      973        %FPT_GETDCB (FPTN=GETDCB_FPT);
      728      988    1       GETDCB_FPT.DCBNAME_=DCBNMSF;

    988  3 000002   000000 100400                    MLR     fill='000'O
         3 000003   000000 000010 xsym               ADSC9   DCBNMSF                  cn=0,n=8
         3 000004   000002 000010 2                  ADSC9   GETDCB_FPT+2             cn=0,n=8

      729      989    1       GETDCB_FPT.V.MERGE#=MERGESF;

    989  3 000005   000000 236000 xsym               LDQ     MERGESF
         3 000006   000022 772000                    QRL     18
         3 000007   000006 676000 2                  ERQ     GETDCB_FPT+6
         3 000010   400000 376007                    ANQ     -131072,DL
         3 000011   000006 656000 2                  ERSQ    GETDCB_FPT+6

      730      990    1       CALL M$GETDCB(GETDCB_FPT) ALTRET(GETDCB_ERR);

    990  3 000012   000000 630400 2                  EPPR0   GETDCB_FPT
PL6.E3A0      #007=SYS_FUNC_GETDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:165  
         3 000013   460002 713400                    CLIMB   alt,+24578
         3 000014   401000 401760                    pmme    nvectors=3
         3 000015   000022 702000 3                  TSX2    GETDCB_ERR

      731      991    1       DCBSF=GETDCB_FPT.V.DCB#;

    991  3 000016   000006 220000 2                  LDX0    GETDCB_FPT+6
         3 000017   000000 740000 xsym               STX0    DCBSF

      732      992    1       MERGESF = %NO#;

    992  3 000020   000000 450000 xsym               STZ     MERGESF

      733      993    1       RETURN;

    993  3 000021   000000 702200 xent               TSX2  ! X66_ARET

      734      994    1   GETDCB_ERR:
      735      995    1       MERGESF = %NO#;

    995  3 000022   000000 450000 xsym  GETDCB_ERR   STZ     MERGESF

      736      996    1       MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;

    996  3 000023   000000 470400 xsym               LDP0    B$TCB$
         3 000024   000000 471500                    LDP1    0,,PR0
         3 000025   100102 236100                    LDQ     66,,PR1
         3 000026   000000 756000 xsym               STQ     MSGCODE

      737      997    1       INCL_ERR = %YES#;

    997  3 000027   400000 236003                    LDQ     -131072,DU
         3 000030   000000 756000 xsym               STQ     INCL_ERR

      738      998    1       CALL SYS_FUNC_ERRMSG;

    998  3 000031   000000 631400 4                  EPPR1   0
PL6.E3A0      #007=SYS_FUNC_GETDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:166  
         3 000032   000000 701000 xent               TSX1    SYS_FUNC_ERRMSG
         3 000033   000000 011000                    NOP     0

      739      999    1       ALTRETURN;

    999  3 000034   000000 702200 xent               TSX2  ! X66_AALT

GETDCB_FPT
 Sect OctLoc
   2     000   000001 777640   000006 006000   000000 177640   000000 006014    ................
   2     004   000000 177640   000000 006014   000000 000000   000000 000000    ................

(unnamed)
 Sect OctLoc
   4     000   000000 000000                                                    ....
      740     1000    1   END SYS_FUNC_GETDCB;
      741     1001        %EOD;

PL6.E3A0      #007=SYS_FUNC_GETDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:167  
--  Include file information  --

   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_GETDCB.

   Procedure SYS_FUNC_GETDCB requires 29 words for executable code.
   Procedure SYS_FUNC_GETDCB requires 4 words of local(AUTO) storage.
PL6.E3A0      #007=SYS_FUNC_GETDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:168  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #007=SYS_FUNC_GETDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:169  
          MINI XREF LISTING

B$EXCFR.ASL
       956**DCL       956--REDEF
B$EXCFR.ERR
       970**DCL       996>>ASSIGN
B$EXCFR.ERR.ERR#
       970**DCL       970--REDEF
B$EXCFR.EVID
       969**DCL       969--REDEF     970--REDEF
B$EXCFR.IR
       957**DCL       957--REDEF
B$EXCFR.PREVSZ
       956**DCL       956--REDEF
B$EXCFR.SUBC
       968**DCL       968--REDEF     969--REDEF     969--REDEF
B$TCB.ALT$
       953**DCL       996>>ASSIGN
B$TCB$
       315**DCL       996>>ASSIGN
COUNTSF
       267**DCL       268--REDEF
DCBNMSF
       248**DCL       988>>ASSIGN
DCBSF
       196**DCL       991<<ASSIGN
ENCRP_SEEDSF
       225**DCL       226--REDEF
ERRCODESF
       227**DCL       232--REDEF
FIDSF_RD
       243**DCL       244--REDEF
GETDCB_ERR
       995**LABEL     990--CALLALT
PL6.E3A0      #007=SYS_FUNC_GETDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:170  
GETDCB_FPT
       984**DCL       990<>CALL
GETDCB_FPT.DCBNAME_
       984**DCL       988<<ASSIGN
GETDCB_FPT.V
       985**DCL       984--DCLINIT
GETDCB_FPT.V.DCB#
       985**DCL       991>>ASSIGN
GETDCB_FPT.V.MERGE#
       985**DCL       989<<ASSIGN
HELPCODE
       261**DCL       266--REDEF
ICHKSUM
       326**DCL       327--REDEF
INCL_ERR
       239**DCL       997<<ASSIGN
I_O_BUF$
       304**DCL       305--IMP-PTR
KEYVSF
       199**DCL       204--REDEF
KEYVSF.WD_ONE
       201**DCL       202--REDEF
M$GETDCB
       346**DCL-ENT   990--CALL
MERGESF
       257**DCL       989>>ASSIGN    992<<ASSIGN    995<<ASSIGN
MONITOR_ERR
       234**DCL       996<<ASSIGN
MSGCODE
       233**DCL       234--REDEF
REC$
       285**DCL       308--IMP-PTR
REC_DATA_LN
       313**DCL       312--IMP-SIZ
SYS_FUNC_ERRMSG
         7**DCL-ENT   998--CALL

PL6.E3A0      #008=SYS_FUNC_ERRMSG File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:171  
      742        1        /*T***********************************************************/
      743        2        /*T*                                                         */
      744        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      745        4        /*T*                                                         */
      746        5        /*T***********************************************************/
      747        6        SYS_FUNC_ERRMSG: PROC ALTRET AVOID($PR5,$PR6,$PR7);
      748        7    1   DCL M$DO DCB ;
      749        8    1   DCL ERROR_BUF CHAR(120);
      750        9    1   DCL INITIAL_CALL BIT(1) STATIC SYMDEF ALIGNED INIT('1'B);
      751       10    1   DCL SYS_FUNC_CORRES ENTRY(2) ALTRET;
      752       11         /*      Include global defined variables */
      753       12         %INCLUDE ZI_GLOBAL_DBUTIL;
      754      190         %SYS_FUNC;
      755      282         %MISC_DCLS;
      756      335         %INCLUDE CP_6;
      757      416         %INCLUDE CP_6_SUBS;
      758      956    1   DCL DCB_ONE UBIN(18) CONSTANT INIT(DCBNUM(M$DO));
      759      957    1   DCL DCB_TWO UBIN(18) CONSTANT INIT(DCBNUM(M$LO));
      760      958    1   DCL 1 ZI_EMNAME CONSTANT SYMDEF,
      761      959    1         2 CNT UBIN(9) INIT (9) UNAL,
      762      960    1         2 TXT CHAR(9) INIT (':ZIERRMSG') UNAL;
      763      961    1   DCL ZI_EMACCT CHAR(8) CONSTANT SYMDEF INIT(':SYS');
      764      962        %FPT_ERRMSG(OUTDCB1=M$DO,FLAGLEV=3,
      765      963         FILEACCT=ZI_EMACCT, FILENAME=ZI_EMNAME );
      766      990        %VLR_ERRMSG (STCLASS=AUTO, FPTN=RESULTSE);
      767     1012
      768     1013    1       IF INITIAL_CALL THEN
      769     1014    2       DO;
      770     1015    2           INITIAL_CALL = '0'B;
      771     1016    2           FPT_ERRMSG.FIELD1_ = VECTOR(ERR_INSERT(0));
      772     1017    2           FPT_ERRMSG.FIELD2_ = VECTOR(ERR_INSERT(1));
      773     1018    2           FPT_ERRMSG.FIELD3_ = VECTOR(ERR_INSERT(2));
      774     1019    2           CALL SYS_FUNC_CORRES(DCB_ONE,DCB_TWO) ALTRET(SAME);
      775     1020    2           FPT_ERRMSG.V.OUTDCB2# = DCB_TWO;
      776     1021    2   SAME:   END;
      777     1022    1       FPT_ERRMSG.V.INCLCODE# = INCL_ERR;
      778     1023    1       FPT_ERRMSG.V.DCB# = DCBSF;
PL6.E3A0      #008=SYS_FUNC_ERRMSG File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:172  
      779     1024    1       IF DCBADDR(DCBSF) = ADDR(NIL) THEN
      780     1025    1           FPT_ERRMSG.V.DCB# = 0;
      781     1026    1       FPT_ERRMSG.CODE_ = VECTOR(MONITOR_ERR);
      782     1027    1       FPT_ERRMSG.V.SUBMESS# = SUBMESSF;
      783     1028    1       FPT_ERRMSG.V.FLAGLEV# = ERRFLGSF;
      784     1029    1       FPT_ERRMSG.BUF_ = VECTOR(ERROR_BUF);
      785     1030    1       FPT_ERRMSG.RESULTS_ = VECTOR(RESULTSE);
      786     1031    1       CALL M$ERRMSG(FPT_ERRMSG) ALTRET(ERR_ERRMSG);
      787     1032
      788     1033    1   RET: INCL_ERR = %NO#;
      789     1034    1       SUBMESSF = %YES# ;
      790     1035    1       ERRFLGSF = 3;
      791     1036    1       RETURN;
      792     1037    1   ERR_ERRMSG:
      793     1038    1       SUBMESSF = %YES#;
      794     1039    1       ERRFLGSF = 3;
      795     1040    1       INCL_ERR = %NO#;
      796     1041    1       IF RESULTSE.NOMSG THEN ALTRETURN;
      797     1042    1   END SYS_FUNC_ERRMSG;
      798     1043        %EOD;

PL6.E3A0      #008=SYS_FUNC_ERRMSG File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:173  
--  Include file information  --

   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_ERRMSG.

   Procedure SYS_FUNC_ERRMSG requires 71 words for executable code.
   Procedure SYS_FUNC_ERRMSG requires 40 words of local(AUTO) storage.

PL6.E3A0      #008=SYS_FUNC_ERRMSG File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:174  

 Object Unit name= SYS_FUNC_ERRMSG                            File name= ZIU$Q2SF.:ZIC0TOU
 UTS= SEP 05 '97 13:27:36.44 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$DO
    1   Data  even  none    28     34  SYS_FUNC_ERRMSG
    2   DCB   even  none     0      0  M$LO
    3   DCB   even  none     0      0  M$UC
    4  RoData even  UTS      7      7  SYS_FUNC_ERRMSG
    5   Proc  even  none    71    107  SYS_FUNC_ERRMSG
    6  RoData even  none    16     20  SYS_FUNC_ERRMSG

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     5      0   yes    yes     yes      XStd       0  SYS_FUNC_ERRMSG

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    1      0  INITIAL_CALL                       4      2  ZI_EMNAME
    4      5  ZI_EMACCT
PL6.E3A0      #008=SYS_FUNC_ERRMSG File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:175  

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           XStd      2 SYS_FUNC_CORRES
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$DO                                  BLKLSF                                KEYLSF
     KEYXSF                                DCBSF                                 ORGSF
     KEYSF                                 KEYVSF                                ACSSF
     NOTIMESF                              FUNSF                                 ASNSF
     TESTSF                                XTENSIZESF                            DISPSF
     WAITSF                                VFCSF                                 FULLSF
     BKUPSF                                BUFLNSF                               BUFSF
     SOURCESF                              DESTSF                                DATESF
     TIMESF                                UTSSF                                 DAYSF
     TSTAMPSF                              ENCRP_SEEDSF                          ERRCODESF
     MSGCODE                               INCL_ERR                              ERR_INSERT
     FIDSF_RD                              ACNT                                  EXISTSF
     SHARESF                               DCBNMSF                               KEYRSF
     NO_KEYSF                              REASGNSF                              CARRY_ATTRIBUTESF
     SUBMESSF                              SPKY_OPNSF                            POSSF
     ERRFLGSF                              MERGESF                               FSA_FLAG
     RELGSF                                UNUSED                                HELPCODE
     COUNTSF                               INDEXSF                               GAP
     PSNSF                                 ACNTSF                                KEY_SHADWSF
     REC$                                  RB                                    RE
     IE                                    IB                                    CNT
     ICNT                                  RCNT                                  SCNT
     FIRST_SET                             RETCNT                                DMPCNT
PL6.E3A0      #008=SYS_FUNC_ERRMSG File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:176  
     KCNT                                  ACNT_IDX                              I
     J                                     K                                     X
     STEPCC                                I_O_BUF$                              OUT_INDX
     I_O_SIZE                              REC_DATA_LN                           M$LO
     B$TCB$                                B$ROS$                                B$JIT$
     KEYFID                                I_O_KEY                               RESTART
     BREAK_FLAG                            ICHKSUM                               ITMCNT
     GAP1                                  M$UC

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #008=SYS_FUNC_ERRMSG File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:177  


      742        1        /*T***********************************************************/
      743        2        /*T*                                                         */
      744        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      745        4        /*T*                                                         */
      746        5        /*T***********************************************************/
      747        6        SYS_FUNC_ERRMSG: PROC ALTRET AVOID($PR5,$PR6,$PR7);

      6  5 000000   000000 700200 xent  SYS_FUNC_ER* TSX0  ! X66_AUTO_0
         5 000001   000050 000000                    ZERO    40,0

      748        7    1   DCL M$DO DCB ;
      749        8    1   DCL ERROR_BUF CHAR(120);
      750        9    1   DCL INITIAL_CALL BIT(1) STATIC SYMDEF ALIGNED INIT('1'B);
      751       10    1   DCL SYS_FUNC_CORRES ENTRY(2) ALTRET;
      752       11         /*      Include global defined variables */
      753       12         %INCLUDE ZI_GLOBAL_DBUTIL;
      754      190         %SYS_FUNC;
      755      282         %MISC_DCLS;
      756      335         %INCLUDE CP_6;
      757      416         %INCLUDE CP_6_SUBS;
      758      956    1   DCL DCB_ONE UBIN(18) CONSTANT INIT(DCBNUM(M$DO));
      759      957    1   DCL DCB_TWO UBIN(18) CONSTANT INIT(DCBNUM(M$LO));
      760      958    1   DCL 1 ZI_EMNAME CONSTANT SYMDEF,
      761      959    1         2 CNT UBIN(9) INIT (9) UNAL,
      762      960    1         2 TXT CHAR(9) INIT (':ZIERRMSG') UNAL;
      763      961    1   DCL ZI_EMACCT CHAR(8) CONSTANT SYMDEF INIT(':SYS');
      764      962        %FPT_ERRMSG(OUTDCB1=M$DO,FLAGLEV=3,
      765      963         FILEACCT=ZI_EMACCT, FILENAME=ZI_EMNAME );
      766      990        %VLR_ERRMSG (STCLASS=AUTO, FPTN=RESULTSE);
      767     1012
      768     1013    1       IF INITIAL_CALL THEN

   1013  5 000002   000000 234000 1                  SZN     INITIAL_CALL
         5 000003   000021 605000 5                  TPL     SAME

      769     1014    2       DO;
PL6.E3A0      #008=SYS_FUNC_ERRMSG File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:178  

      770     1015    2           INITIAL_CALL = '0'B;

   1015  5 000004   000000 450000 1                  STZ     INITIAL_CALL

      771     1016    2           FPT_ERRMSG.FIELD1_ = VECTOR(ERR_INSERT(0));

   1016  5 000005   000000 237000 6                  LDAQ    0
         5 000006   000016 757000 1                  STAQ    FPT_ERRMSG+12

      772     1017    2           FPT_ERRMSG.FIELD2_ = VECTOR(ERR_INSERT(1));

   1017  5 000007   000002 237000 6                  LDAQ    2
         5 000010   000020 757000 1                  STAQ    FPT_ERRMSG+14

      773     1018    2           FPT_ERRMSG.FIELD3_ = VECTOR(ERR_INSERT(2));

   1018  5 000011   000004 237000 6                  LDAQ    4
         5 000012   000022 757000 1                  STAQ    FPT_ERRMSG+16

      774     1019    2           CALL SYS_FUNC_CORRES(DCB_ONE,DCB_TWO) ALTRET(SAME);

   1019  5 000013   000007 630400 6                  EPPR0   7
         5 000014   000006 631400 6                  EPPR1   6
         5 000015   000000 701000 xent               TSX1    SYS_FUNC_CORRES
         5 000016   000021 702000 5                  TSX2    SAME

      775     1020    2           FPT_ERRMSG.V.OUTDCB2# = DCB_TWO;

   1020  5 000017   000001 220000 4                  LDX0    DCB_TWO
         5 000020   000031 740000 1                  STX0    FPT_ERRMSG+23

      776     1021    2   SAME:   END;

   1021  5 000021                       SAME         null
      777     1022    1       FPT_ERRMSG.V.INCLCODE# = INCL_ERR;

PL6.E3A0      #008=SYS_FUNC_ERRMSG File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:179  
   1022  5 000021   000000 236000 xsym               LDQ     INCL_ERR
         5 000022   000006 772000                    QRL     6
         5 000023   000032 676000 1                  ERQ     FPT_ERRMSG+24
         5 000024   004000 376003                    ANQ     2048,DU
         5 000025   000032 656000 1                  ERSQ    FPT_ERRMSG+24

      778     1023    1       FPT_ERRMSG.V.DCB# = DCBSF;

   1023  5 000026   000000 220000 xsym               LDX0    DCBSF
         5 000027   000030 740000 1                  STX0    FPT_ERRMSG+22

      779     1024    1       IF DCBADDR(DCBSF) = ADDR(NIL) THEN

   1024  5 000030   000011 470400 6                  LDP0    9
         5 000031   000000 471500                    LDP1    0,,PR0
         5 000032   100000 236110                    LDQ     0,X0,PR1
         5 000033   000012 116000 6                  CMPQ    10
         5 000034   000037 601000 5                  TNZ     s:1026

      780     1025    1           FPT_ERRMSG.V.DCB# = 0;

   1025  5 000035   000000 221003                    LDX1    0,DU
         5 000036   000030 741000 1                  STX1    FPT_ERRMSG+22

      781     1026    1       FPT_ERRMSG.CODE_ = VECTOR(MONITOR_ERR);

   1026  5 000037   000014 237000 6                  LDAQ    12
         5 000040   000004 757000 1                  STAQ    FPT_ERRMSG+2

      782     1027    1       FPT_ERRMSG.V.SUBMESS# = SUBMESSF;

   1027  5 000041   000000 236000 xsym               LDQ     SUBMESSF
         5 000042   000010 772000                    QRL     8
         5 000043   000032 676000 1                  ERQ     FPT_ERRMSG+24
         5 000044   001000 376003                    ANQ     512,DU
         5 000045   000032 656000 1                  ERSQ    FPT_ERRMSG+24

PL6.E3A0      #008=SYS_FUNC_ERRMSG File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:180  
      783     1028    1       FPT_ERRMSG.V.FLAGLEV# = ERRFLGSF;

   1028  5 000046   000000 236000 xsym               LDQ     ERRFLGSF
         5 000047   000022 772000                    QRL     18
         5 000050   000031 552010 1                  STBQ    FPT_ERRMSG+23,'10'O

      784     1029    1       FPT_ERRMSG.BUF_ = VECTOR(ERROR_BUF);

   1029  5 000051   000016 235000 6                  LDA     14
         5 000052   200046 452500                    STP2    RESULTSE+4,,AUTO
         5 000053   200046 236100                    LDQ     RESULTSE+4,,AUTO
         5 000054   000003 036003                    ADLQ    3,DU
         5 000055   000006 757000 1                  STAQ    FPT_ERRMSG+4

      785     1030    1       FPT_ERRMSG.RESULTS_ = VECTOR(RESULTSE);

   1030  5 000056   000017 235000 6                  LDA     15
         5 000057   200046 452500                    STP2    RESULTSE+4,,AUTO
         5 000060   200046 236100                    LDQ     RESULTSE+4,,AUTO
         5 000061   000042 036003                    ADLQ    34,DU
         5 000062   000024 757000 1                  STAQ    FPT_ERRMSG+18

      786     1031    1       CALL M$ERRMSG(FPT_ERRMSG) ALTRET(ERR_ERRMSG);

   1031  5 000063   000002 630400 1                  EPPR0   FPT_ERRMSG
         5 000064   420000 713400                    CLIMB   alt,+8192
         5 000065   405000 401760                    pmme    nvectors=11
         5 000066   000075 702000 5                  TSX2    ERR_ERRMSG

      787     1032
      788     1033    1   RET: INCL_ERR = %NO#;

   1033  5 000067   000000 450000 xsym  RET          STZ     INCL_ERR

      789     1034    1       SUBMESSF = %YES# ;

   1034  5 000070   400000 236003                    LDQ     -131072,DU
PL6.E3A0      #008=SYS_FUNC_ERRMSG File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:181  
         5 000071   000000 756000 xsym               STQ     SUBMESSF

      790     1035    1       ERRFLGSF = 3;

   1035  5 000072   003000 236003                    LDQ     1536,DU
         5 000073   000000 756000 xsym               STQ     ERRFLGSF

      791     1036    1       RETURN;

   1036  5 000074   000000 702200 xent               TSX2  ! X66_ARET

      792     1037    1   ERR_ERRMSG:
      793     1038    1       SUBMESSF = %YES#;

   1038  5 000075   400000 236003       ERR_ERRMSG   LDQ     -131072,DU
         5 000076   000000 756000 xsym               STQ     SUBMESSF

      794     1039    1       ERRFLGSF = 3;

   1039  5 000077   003000 236003                    LDQ     1536,DU
         5 000100   000000 756000 xsym               STQ     ERRFLGSF

      795     1040    1       INCL_ERR = %NO#;

   1040  5 000101   000000 450000 xsym               STZ     INCL_ERR

      796     1041    1       IF RESULTSE.NOMSG THEN ALTRETURN;

   1041  5 000102   200042 236100                    LDQ     RESULTSE,,AUTO
         5 000103   100000 316003                    CANQ    32768,DU
         5 000104   000106 600000 5                  TZE     s:1042

   1041  5 000105   000000 702200 xent               TSX2  ! X66_AALT

      797     1042    1   END SYS_FUNC_ERRMSG;

   1042  5 000106   000000 702200 xent               TSX2  ! X66_ARET
PL6.E3A0      #008=SYS_FUNC_ERRMSG File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:182  

INITIAL_CALL
 Sect OctLoc
   1     000   4***** ******                                                    ....

FPT_ERRMSG
 Sect OctLoc
   1     002   000003 777640   000030 006000   000000 177640   000000 006014    ................
   1     006   000000 177640   000000 006014   000002 377640   000002 006000    ................
   1     012   000001 777640   000005 006000   000000 177640   000000 006014    ................
   1     016   000000 177640   000000 006014   000000 177640   000000 006014    ................
   1     026*  000000 177640   000000 006014   000000 000000   000000 003000    ................
   1     032   375000 030001   040000 000000                                    .... ...

DCB_ONE
 Sect OctLoc
   4     000   000000 ******                                                    ....

DCB_TWO
 Sect OctLoc
   4     001   000000 ******                                                    ....

ZI_EMNAME
 Sect OctLoc
   4     002   011072 132111   105122 122115   123107 ******                    .:ZIERRMSG..

ZI_EMACCT
 Sect OctLoc
   4     005   072123 131123   040040 040040                                    :SYS

(unnamed)
 Sect OctLoc
   6     000   000007 777640   000000 006000   000007 777640   000010 006000    ................
   6     004   000007 777640   000020 006000   000002 000000   000000 006000    ................
   6     010   000001 006000   000000 006003   000000 006014   000000 000000    ................
   6     014   000000 777640   000000 006000   000035 777640   000003 777640    ................
      798     1043        %EOD;
PL6.E3A0      #008=SYS_FUNC_ERRMSG File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:183  

PL6.E3A0      #008=SYS_FUNC_ERRMSG File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:184  
--  Include file information  --

   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_ERRMSG.

   Procedure SYS_FUNC_ERRMSG requires 71 words for executable code.
   Procedure SYS_FUNC_ERRMSG requires 40 words of local(AUTO) storage.
PL6.E3A0      #008=SYS_FUNC_ERRMSG File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:185  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #008=SYS_FUNC_ERRMSG File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:186  
          MINI XREF LISTING

COUNTSF
       271**DCL       272--REDEF
DCBSF
       200**DCL      1023>>ASSIGN   1024--IF
DCB_ONE
       956**DCL      1019<>CALL
DCB_TWO
       957**DCL      1019<>CALL     1020>>ASSIGN
ENCRP_SEEDSF
       229**DCL       230--REDEF
ERRCODESF
       231**DCL       236--REDEF
ERRFLGSF
       260**DCL      1028>>ASSIGN   1035<<ASSIGN   1039<<ASSIGN
ERROR_BUF
         8**DCL      1029--ASSIGN
ERR_ERRMSG
      1038**LABEL    1031--CALLALT
ERR_INSERT
       244**DCL      1016--ASSIGN   1017--ASSIGN   1018--ASSIGN
FIDSF_RD
       247**DCL       248--REDEF
FPT_ERRMSG
       974**DCL      1031<>CALL
FPT_ERRMSG.BUF_
       974**DCL      1029<<ASSIGN
FPT_ERRMSG.CODE_
       974**DCL      1026<<ASSIGN
FPT_ERRMSG.FIELD1_
       976**DCL      1016<<ASSIGN
FPT_ERRMSG.FIELD2_
       977**DCL      1017<<ASSIGN
PL6.E3A0      #008=SYS_FUNC_ERRMSG File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:187  
FPT_ERRMSG.FIELD3_
       977**DCL      1018<<ASSIGN
FPT_ERRMSG.RESULTS_
       977**DCL      1030<<ASSIGN
FPT_ERRMSG.V
       978**DCL       974--DCLINIT
FPT_ERRMSG.V.DCB#
       978**DCL      1023<<ASSIGN   1025<<ASSIGN
FPT_ERRMSG.V.FLAGLEV#
       980**DCL      1028<<ASSIGN
FPT_ERRMSG.V.INCLCODE#
       983**DCL      1022<<ASSIGN
FPT_ERRMSG.V.OUTDCB2#
       979**DCL      1020<<ASSIGN
FPT_ERRMSG.V.SUBMESS#
       984**DCL      1027<<ASSIGN
HELPCODE
       265**DCL       270--REDEF
ICHKSUM
       330**DCL       331--REDEF
INCL_ERR
       243**DCL      1022>>ASSIGN   1033<<ASSIGN   1040<<ASSIGN
INITIAL_CALL
         9**DCL      1013>>IF       1015<<ASSIGN
I_O_BUF$
       308**DCL       309--IMP-PTR
KEYVSF
       203**DCL       208--REDEF
KEYVSF.WD_ONE
       205**DCL       206--REDEF
M$ERRMSG
       407**DCL-ENT  1031--CALL
MONITOR_ERR
       238**DCL      1026--ASSIGN
MSGCODE
       237**DCL       238--REDEF
PL6.E3A0      #008=SYS_FUNC_ERRMSG File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:188  
REC$
       289**DCL       312--IMP-PTR
REC_DATA_LN
       317**DCL       316--IMP-SIZ
RESULTSE
      1001**DCL      1030--ASSIGN
RESULTSE.NOMSG
      1001**DCL      1041>>IF
SAME
      1021**LABEL    1019--CALLALT
SUBMESSF
       257**DCL      1027>>ASSIGN   1034<<ASSIGN   1038<<ASSIGN
SYS_FUNC_CORRES
        10**DCL-ENT  1019--CALL
ZI_EMACCT
       961**DCL       975--DCLINIT
ZI_EMNAME
       958**DCL       975--DCLINIT

PL6.E3A0      #009=SYS_FUNC_RELDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:189  
      799        1        /*T***********************************************************/
      800        2        /*T*                                                         */
      801        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      802        4        /*T*                                                         */
      803        5        /*T***********************************************************/
      804        6        /************************************************************/
      805        7        /*     Release    dcb    function                           */
      806        8        /************************************************************/
      807        9        SYS_FUNC_RELDCB: PROC ALTRET;
      808       10    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      809       11         %INCLUDE CP_6;
      810       92         %INCLUDE CP_6_SUBS;
      811      632         %B$TCB;
      812      635         %B$EXCFR;
      813      653         %INCLUDE B_ERRORS_C;
      814     1780         %INCLUDE ZI_GLOBAL_DBUTIL;
      815     1958         %SYS_FUNC;
      816     2050         %MISC_DCLS;
      817     2103         %FPT_RELDCB(FPTN=RELEASE);
      818     2117
      819     2118    1       RELEASE.V.DCB# = DCBSF;
      820     2119    1       CALL M$RELDCB(RELEASE) ALTRET(REL_ERR);
      821     2120    1       RETURN;
      822     2121
      823     2122    1   REL_ERR:
      824     2123    1       MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;
      825     2124    1       INCL_ERR = %YES#;
      826     2125    1       CALL SYS_FUNC_ERRMSG;
      827     2126    1       ALTRETURN;
      828     2127    1   END SYS_FUNC_RELDCB;
      829     2128        %EOD;

PL6.E3A0      #009=SYS_FUNC_RELDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:190  
--  Include file information  --

   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B_ERRORS_C.:LIB_E05  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_RELDCB.

   Procedure SYS_FUNC_RELDCB requires 19 words for executable code.
   Procedure SYS_FUNC_RELDCB requires 4 words of local(AUTO) storage.

PL6.E3A0      #009=SYS_FUNC_RELDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:191  

 Object Unit name= SYS_FUNC_RELDCB                            File name= ZIU$Q2SF.:ZIC0TOU
 UTS= SEP 05 '97 13:27:42.60 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   DCB   even  none     0      0  M$LO
    2   Data  even  none     4      4  SYS_FUNC_RELDCB
    3   Proc  even  none    19     23  SYS_FUNC_RELDCB
    4  RoData even  none     1      1  SYS_FUNC_RELDCB

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes    yes     yes      Std        0  SYS_FUNC_RELDCB

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       0 SYS_FUNC_ERRMSG
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #009=SYS_FUNC_RELDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:192  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  BLKLSF                                KEYLSF
     KEYXSF                                DCBSF                                 ORGSF
     KEYSF                                 KEYVSF                                ACSSF
     NOTIMESF                              FUNSF                                 ASNSF
     TESTSF                                XTENSIZESF                            DISPSF
     WAITSF                                VFCSF                                 FULLSF
     BKUPSF                                BUFLNSF                               BUFSF
     SOURCESF                              DESTSF                                DATESF
     TIMESF                                UTSSF                                 DAYSF
     TSTAMPSF                              ENCRP_SEEDSF                          ERRCODESF
     MSGCODE                               INCL_ERR                              ERR_INSERT
     FIDSF_RD                              ACNT                                  EXISTSF
     SHARESF                               DCBNMSF                               KEYRSF
     NO_KEYSF                              REASGNSF                              CARRY_ATTRIBUTESF
     SUBMESSF                              SPKY_OPNSF                            POSSF
     ERRFLGSF                              MERGESF                               FSA_FLAG
     RELGSF                                UNUSED                                HELPCODE
     COUNTSF                               INDEXSF                               GAP
     PSNSF                                 ACNTSF                                KEY_SHADWSF
     REC$                                  RB                                    RE
     IE                                    IB                                    CNT
     ICNT                                  RCNT                                  SCNT
     FIRST_SET                             RETCNT                                DMPCNT
     KCNT                                  ACNT_IDX                              I
     J                                     K                                     X
     STEPCC                                I_O_BUF$                              OUT_INDX
     I_O_SIZE                              REC_DATA_LN                           M$LO
     B$TCB$                                B$ROS$                                B$JIT$
     KEYFID                                I_O_KEY                               RESTART
     BREAK_FLAG                            ICHKSUM                               ITMCNT
     GAP1
PL6.E3A0      #009=SYS_FUNC_RELDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:193  

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #009=SYS_FUNC_RELDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:194  


      799        1        /*T***********************************************************/
      800        2        /*T*                                                         */
      801        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      802        4        /*T*                                                         */
      803        5        /*T***********************************************************/
      804        6        /************************************************************/
      805        7        /*     Release    dcb    function                           */
      806        8        /************************************************************/
      807        9        SYS_FUNC_RELDCB: PROC ALTRET;

      9  3 000000   000000 700200 xent  SYS_FUNC_RE* TSX0  ! X66_AUTO_0
         3 000001   000004 000000                    ZERO    4,0

      808       10    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      809       11         %INCLUDE CP_6;
      810       92         %INCLUDE CP_6_SUBS;
      811      632         %B$TCB;
      812      635         %B$EXCFR;
      813      653         %INCLUDE B_ERRORS_C;
      814     1780         %INCLUDE ZI_GLOBAL_DBUTIL;
      815     1958         %SYS_FUNC;
      816     2050         %MISC_DCLS;
      817     2103         %FPT_RELDCB(FPTN=RELEASE);
      818     2117
      819     2118    1       RELEASE.V.DCB# = DCBSF;

   2118  3 000002   000000 220000 xsym               LDX0    DCBSF
         3 000003   000002 740000 2                  STX0    RELEASE+2

      820     2119    1       CALL M$RELDCB(RELEASE) ALTRET(REL_ERR);

   2119  3 000004   000000 630400 2                  EPPR0   RELEASE
         3 000005   460003 713400                    CLIMB   alt,+24579
         3 000006   400000 401760                    pmme    nvectors=1
         3 000007   000011 702000 3                  TSX2    REL_ERR

PL6.E3A0      #009=SYS_FUNC_RELDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:195  
      821     2120    1       RETURN;

   2120  3 000010   000000 702200 xent               TSX2  ! X66_ARET

      822     2121
      823     2122    1   REL_ERR:
      824     2123    1       MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;

   2123  3 000011   000000 470400 xsym  REL_ERR      LDP0    B$TCB$
         3 000012   000000 471500                    LDP1    0,,PR0
         3 000013   100102 236100                    LDQ     66,,PR1
         3 000014   000000 756000 xsym               STQ     MSGCODE

      825     2124    1       INCL_ERR = %YES#;

   2124  3 000015   400000 236003                    LDQ     -131072,DU
         3 000016   000000 756000 xsym               STQ     INCL_ERR

      826     2125    1       CALL SYS_FUNC_ERRMSG;

   2125  3 000017   000000 631400 4                  EPPR1   0
         3 000020   000000 701000 xent               TSX1    SYS_FUNC_ERRMSG
         3 000021   000000 011000                    NOP     0

      827     2126    1       ALTRETURN;

   2126  3 000022   000000 702200 xent               TSX2  ! X66_AALT

RELEASE
 Sect OctLoc
   2     000   000001 777640   000002 006000   000000 000000   000000 000000    ................

(unnamed)
 Sect OctLoc
   4     000   000000 000000                                                    ....
      828     2127    1   END SYS_FUNC_RELDCB;
      829     2128        %EOD;
PL6.E3A0      #009=SYS_FUNC_RELDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:196  

PL6.E3A0      #009=SYS_FUNC_RELDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:197  
--  Include file information  --

   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B_ERRORS_C.:LIB_E05  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_RELDCB.

   Procedure SYS_FUNC_RELDCB requires 19 words for executable code.
   Procedure SYS_FUNC_RELDCB requires 4 words of local(AUTO) storage.
PL6.E3A0      #009=SYS_FUNC_RELDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:198  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #009=SYS_FUNC_RELDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:199  
          MINI XREF LISTING

B$EXCFR.ASL
       636**DCL       636--REDEF
B$EXCFR.ERR
       650**DCL      2123>>ASSIGN
B$EXCFR.ERR.ERR#
       650**DCL       650--REDEF
B$EXCFR.EVID
       649**DCL       649--REDEF     650--REDEF
B$EXCFR.IR
       637**DCL       637--REDEF
B$EXCFR.PREVSZ
       636**DCL       636--REDEF
B$EXCFR.SUBC
       648**DCL       648--REDEF     649--REDEF     649--REDEF
B$TCB.ALT$
       633**DCL      2123>>ASSIGN
B$TCB$
      2087**DCL      2123>>ASSIGN
COUNTSF
      2039**DCL      2040--REDEF
DCBSF
      1968**DCL      2118>>ASSIGN
ENCRP_SEEDSF
      1997**DCL      1998--REDEF
ERRCODESF
      1999**DCL      2004--REDEF
FIDSF_RD
      2015**DCL      2016--REDEF
HELPCODE
      2033**DCL      2038--REDEF
ICHKSUM
      2098**DCL      2099--REDEF
PL6.E3A0      #009=SYS_FUNC_RELDCB File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:200  
INCL_ERR
      2011**DCL      2124<<ASSIGN
I_O_BUF$
      2076**DCL      2077--IMP-PTR
KEYVSF
      1971**DCL      1976--REDEF
KEYVSF.WD_ONE
      1973**DCL      1974--REDEF
M$RELDCB
        26**DCL-ENT  2119--CALL
MONITOR_ERR
      2006**DCL      2123<<ASSIGN
MSGCODE
      2005**DCL      2006--REDEF
REC$
      2057**DCL      2080--IMP-PTR
REC_DATA_LN
      2085**DCL      2084--IMP-SIZ
RELEASE
      2114**DCL      2119<>CALL
RELEASE.V
      2114**DCL      2114--DCLINIT
RELEASE.V.DCB#
      2114**DCL      2118<<ASSIGN
REL_ERR
      2123**LABEL    2119--CALLALT
SYS_FUNC_ERRMSG
        10**DCL-ENT  2125--CALL

PL6.E3A0      #010=SYS_FUNC_CORRES File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:201  
      830        1        /*T***********************************************************/
      831        2        /*T*                                                         */
      832        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      833        4        /*T*                                                         */
      834        5        /*T***********************************************************/
      835        6        SYS_FUNC_CORRES: PROC(DCB_ONE,DCB_TWO) ALTRET AVOID($PR5,$PR6,$PR7);
      836        7    1   DCL DCB_ONE UBIN(18) ALIGNED;
      837        8    1   DCL DCB_TWO UBIN(18) ALIGNED;
      838        9        %INCLUDE CP_6;
      839       90        %INCLUDE CP_6_SUBS;
      840      630        %B$TCB;
      841      633        %B$EXCFR;
      842      651        %FPT_CORRES (FPTN = CORRES_FPT);
      843      665    1       CORRES_FPT.V.DCB1# = DCB_ONE;
      844      666    1       CORRES_FPT.V.DCB2# = DCB_TWO;
      845      667    1       CALL M$CORRES(CORRES_FPT) ALTRET (CORRES_ERR);
      846      668    1       RETURN;
      847      669    1   CORRES_ERR:
      848      670    1       ALTRETURN;
      849      671    1   END SYS_FUNC_CORRES;
      850      672        %EOD;

PL6.E3A0      #010=SYS_FUNC_CORRES File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:202  
--  Include file information  --

   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_CORRES.

   Procedure SYS_FUNC_CORRES requires 14 words for executable code.
   Procedure SYS_FUNC_CORRES requires 6 words of local(AUTO) storage.

PL6.E3A0      #010=SYS_FUNC_CORRES File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:203  

 Object Unit name= SYS_FUNC_CORRES                            File name= ZIU$Q2SF.:ZIC0TOU
 UTS= SEP 05 '97 13:27:49.36 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none     4      4  SYS_FUNC_CORRES
    2   Proc  even  none    14     16  SYS_FUNC_CORRES

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes    yes     yes      XStd       2  SYS_FUNC_CORRES

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_2
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC
PL6.E3A0      #010=SYS_FUNC_CORRES File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:204  

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #010=SYS_FUNC_CORRES File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:205  


      830        1        /*T***********************************************************/
      831        2        /*T*                                                         */
      832        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      833        4        /*T*                                                         */
      834        5        /*T***********************************************************/
      835        6        SYS_FUNC_CORRES: PROC(DCB_ONE,DCB_TWO) ALTRET AVOID($PR5,$PR6,$PR7);

      6  2 000000   000000 700200 xent  SYS_FUNC_CO* TSX0  ! X66_AUTO_2
         2 000001   000006 000002                    ZERO    6,2

      836        7    1   DCL DCB_ONE UBIN(18) ALIGNED;
      837        8    1   DCL DCB_TWO UBIN(18) ALIGNED;
      838        9        %INCLUDE CP_6;
      839       90        %INCLUDE CP_6_SUBS;
      840      630        %B$TCB;
      841      633        %B$EXCFR;
      842      651        %FPT_CORRES (FPTN = CORRES_FPT);
      843      665    1       CORRES_FPT.V.DCB1# = DCB_ONE;

    665  2 000002   200003 470500                    LDP0    @DCB_ONE,,AUTO
         2 000003   000000 220100                    LDX0    0,,PR0
         2 000004   000002 740000 1                  STX0    CORRES_FPT+2

      844      666    1       CORRES_FPT.V.DCB2# = DCB_TWO;

    666  2 000005   200004 471500                    LDP1    @DCB_TWO,,AUTO
         2 000006   100000 221100                    LDX1    0,,PR1
         2 000007   000002 441000 1                  SXL1    CORRES_FPT+2

      845      667    1       CALL M$CORRES(CORRES_FPT) ALTRET (CORRES_ERR);

    667  2 000010   000000 630400 1                  EPPR0   CORRES_FPT
         2 000011   460000 713400                    CLIMB   alt,+24576
         2 000012   400000 401760                    pmme    nvectors=1
         2 000013   000015 702000 2                  TSX2    CORRES_ERR

PL6.E3A0      #010=SYS_FUNC_CORRES File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:206  
      846      668    1       RETURN;

    668  2 000014   000000 702200 xent               TSX2  ! X66_ARET

      847      669    1   CORRES_ERR:
      848      670    1       ALTRETURN;

    670  2 000015   000000 702200 xent  CORRES_ERR   TSX2  ! X66_AALT

CORRES_FPT
 Sect OctLoc
   1     000   000001 777640   000002 006000   000000 000000   ****** ******    ................
      849      671    1   END SYS_FUNC_CORRES;
      850      672        %EOD;

PL6.E3A0      #010=SYS_FUNC_CORRES File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:207  
--  Include file information  --

   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_CORRES.

   Procedure SYS_FUNC_CORRES requires 14 words for executable code.
   Procedure SYS_FUNC_CORRES requires 6 words of local(AUTO) storage.
PL6.E3A0      #010=SYS_FUNC_CORRES File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:208  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #010=SYS_FUNC_CORRES File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:27 Page:209  
          MINI XREF LISTING

B$EXCFR.ASL
       634**DCL       634--REDEF
B$EXCFR.ERR.ERR#
       648**DCL       648--REDEF
B$EXCFR.EVID
       647**DCL       647--REDEF     648--REDEF
B$EXCFR.IR
       635**DCL       635--REDEF
B$EXCFR.PREVSZ
       634**DCL       634--REDEF
B$EXCFR.SUBC
       646**DCL       646--REDEF     647--REDEF     647--REDEF
CORRES_ERR
       670**LABEL     667--CALLALT
CORRES_FPT
       662**DCL       667<>CALL
CORRES_FPT.V
       662**DCL       662--DCLINIT
CORRES_FPT.V.DCB1#
       662**DCL       665<<ASSIGN
CORRES_FPT.V.DCB2#
       663**DCL       666<<ASSIGN
DCB_ONE
         7**DCL         6--PROC      665>>ASSIGN
DCB_TWO
         8**DCL         6--PROC      666>>ASSIGN
M$CORRES
        23**DCL-ENT   667--CALL

PL6.E3A0      #011=SYS_FUNC_CHECK File=ZIU$Q2SF.:ZIC0TSI                         FRI 09/05/97 13:27 Page:210  
      851        1        /*T***********************************************************/
      852        2        /*T*                                                         */
      853        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      854        4        /*T*                                                         */
      855        5        /*T***********************************************************/
      856        6        SYS_FUNC_CHECK: PROC ALTRET;
      857        7    1   DCL B$TCB$ PTR SYMREF ALIGNED;
      858        8    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      859        9        %INCLUDE CP_6;
      860       90        %INCLUDE CP_6_SUBS;
      861      630        %B$TCB;
      862      633        %B$EXCFR;
      863      651        %INCLUDE B_ERRORS_C;
      864     1778        %FPT_CHECK;
      865     1792        %INCLUDE ZI_GLOBAL_DBUTIL;
      866     1970         %SYS_FUNC;
      867     2062    1       FPT_CHECK.V.DCB# = DCBSF;
      868     2063    1       CALL M$CHECK(FPT_CHECK) ALTRET (CHECK_ERR);
      869     2064    1       RETURN;
      870     2065    1   CHECK_ERR:
      871     2066    1       IF B$TCB$->B$TCB.ALT$->B$EXCFR.ERR.ERR# = %E$EOF THEN
      872     2067    1           ALTRETURN; /* DONT PRINT ERRMSG ON END-OFOFILE */
      873     2068    1       MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;
      874     2069    1       INCL_ERR = %YES#;
      875     2070    1       CALL SYS_FUNC_ERRMSG;
      876     2071    1       ALTRETURN;
      877     2072    1   END SYS_FUNC_CHECK;
      878     2073        %EOD;

PL6.E3A0      #011=SYS_FUNC_CHECK File=ZIU$Q2SF.:ZIC0TSI                         FRI 09/05/97 13:27 Page:211  
--  Include file information  --

   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B_ERRORS_C.:LIB_E05  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_CHECK.

   Procedure SYS_FUNC_CHECK requires 24 words for executable code.
   Procedure SYS_FUNC_CHECK requires 4 words of local(AUTO) storage.

PL6.E3A0      #011=SYS_FUNC_CHECK File=ZIU$Q2SF.:ZIC0TSI                         FRI 09/05/97 13:27 Page:212  

 Object Unit name= SYS_FUNC_CHECK                             File name= ZIU$Q2SF.:ZIC0TOU
 UTS= SEP 05 '97 13:27:53.16 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none     4      4  SYS_FUNC_CHECK
    2   Proc  even  none    24     30  SYS_FUNC_CHECK
    3  RoData even  none     1      1  SYS_FUNC_CHECK

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes    yes     yes      Std        0  SYS_FUNC_CHECK

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       0 SYS_FUNC_ERRMSG
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #011=SYS_FUNC_CHECK File=ZIU$Q2SF.:ZIC0TSI                         FRI 09/05/97 13:27 Page:213  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     B$TCB$                                M$UC                                  BLKLSF
     KEYLSF                                KEYXSF                                DCBSF
     ORGSF                                 KEYSF                                 KEYVSF
     ACSSF                                 NOTIMESF                              FUNSF
     ASNSF                                 TESTSF                                XTENSIZESF
     DISPSF                                WAITSF                                VFCSF
     FULLSF                                BKUPSF                                BUFLNSF
     BUFSF                                 SOURCESF                              DESTSF
     DATESF                                TIMESF                                UTSSF
     DAYSF                                 TSTAMPSF                              ENCRP_SEEDSF
     ERRCODESF                             MSGCODE                               INCL_ERR
     ERR_INSERT                            FIDSF_RD                              ACNT
     EXISTSF                               SHARESF                               DCBNMSF
     KEYRSF                                NO_KEYSF                              REASGNSF
     CARRY_ATTRIBUTESF                     SUBMESSF                              SPKY_OPNSF
     POSSF                                 ERRFLGSF                              MERGESF
     FSA_FLAG                              RELGSF                                UNUSED
     HELPCODE                              COUNTSF                               INDEXSF
     GAP                                   PSNSF                                 ACNTSF
     KEY_SHADWSF

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #011=SYS_FUNC_CHECK File=ZIU$Q2SF.:ZIC0TSI                         FRI 09/05/97 13:27 Page:214  


      851        1        /*T***********************************************************/
      852        2        /*T*                                                         */
      853        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      854        4        /*T*                                                         */
      855        5        /*T***********************************************************/
      856        6        SYS_FUNC_CHECK: PROC ALTRET;

      6  2 000000   000000 700200 xent  SYS_FUNC_CH* TSX0  ! X66_AUTO_0
         2 000001   000004 000000                    ZERO    4,0

      857        7    1   DCL B$TCB$ PTR SYMREF ALIGNED;
      858        8    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      859        9        %INCLUDE CP_6;
      860       90        %INCLUDE CP_6_SUBS;
      861      630        %B$TCB;
      862      633        %B$EXCFR;
      863      651        %INCLUDE B_ERRORS_C;
      864     1778        %FPT_CHECK;
      865     1792        %INCLUDE ZI_GLOBAL_DBUTIL;
      866     1970         %SYS_FUNC;
      867     2062    1       FPT_CHECK.V.DCB# = DCBSF;

   2062  2 000002   000000 220000 xsym               LDX0    DCBSF
         2 000003   000002 740000 1                  STX0    FPT_CHECK+2

      868     2063    1       CALL M$CHECK(FPT_CHECK) ALTRET (CHECK_ERR);

   2063  2 000004   000000 630400 1                  EPPR0   FPT_CHECK
         2 000005   450002 713400                    CLIMB   alt,+20482
         2 000006   400000 401760                    pmme    nvectors=1
         2 000007   000011 702000 2                  TSX2    CHECK_ERR

      869     2064    1       RETURN;

   2064  2 000010   000000 702200 xent               TSX2  ! X66_ARET

PL6.E3A0      #011=SYS_FUNC_CHECK File=ZIU$Q2SF.:ZIC0TSI                         FRI 09/05/97 13:27 Page:215  
      870     2065    1   CHECK_ERR:
      871     2066    1       IF B$TCB$->B$TCB.ALT$->B$EXCFR.ERR.ERR# = %E$EOF THEN

   2066  2 000011   000000 470400 xsym  CHECK_ERR    LDP0    B$TCB$
         2 000012   000000 471500                    LDP1    0,,PR0
         2 000013   100102 236100                    LDQ     66,,PR1
         2 000014   377770 376007                    ANQ     131064,DL
         2 000015   000060 116007                    CMPQ    48,DL
         2 000016   000020 601000 2                  TNZ     s:2068

      872     2067    1           ALTRETURN; /* DONT PRINT ERRMSG ON END-OFOFILE */

   2067  2 000017   000000 702200 xent               TSX2  ! X66_AALT

      873     2068    1       MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;

   2068  2 000020   100102 236100                    LDQ     66,,PR1
         2 000021   000000 756000 xsym               STQ     MSGCODE

      874     2069    1       INCL_ERR = %YES#;

   2069  2 000022   400000 236003                    LDQ     -131072,DU
         2 000023   000000 756000 xsym               STQ     INCL_ERR

      875     2070    1       CALL SYS_FUNC_ERRMSG;

   2070  2 000024   000000 631400 3                  EPPR1   0
         2 000025   000000 701000 xent               TSX1    SYS_FUNC_ERRMSG
         2 000026   000000 011000                    NOP     0

      876     2071    1       ALTRETURN;

   2071  2 000027   000000 702200 xent               TSX2  ! X66_AALT

FPT_CHECK
 Sect OctLoc
   1     000   000001 777640   000002 006000   000000 000000   000000 000000    ................
PL6.E3A0      #011=SYS_FUNC_CHECK File=ZIU$Q2SF.:ZIC0TSI                         FRI 09/05/97 13:27 Page:216  

(unnamed)
 Sect OctLoc
   3     000   000000 000000                                                    ....
      877     2072    1   END SYS_FUNC_CHECK;
      878     2073        %EOD;

PL6.E3A0      #011=SYS_FUNC_CHECK File=ZIU$Q2SF.:ZIC0TSI                         FRI 09/05/97 13:27 Page:217  
--  Include file information  --

   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B_ERRORS_C.:LIB_E05  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_CHECK.

   Procedure SYS_FUNC_CHECK requires 24 words for executable code.
   Procedure SYS_FUNC_CHECK requires 4 words of local(AUTO) storage.
PL6.E3A0      #011=SYS_FUNC_CHECK File=ZIU$Q2SF.:ZIC0TSI                         FRI 09/05/97 13:27 Page:218  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #011=SYS_FUNC_CHECK File=ZIU$Q2SF.:ZIC0TSI                         FRI 09/05/97 13:27 Page:219  
          MINI XREF LISTING

B$EXCFR.ASL
       634**DCL       634--REDEF
B$EXCFR.ERR
       648**DCL      2068>>ASSIGN
B$EXCFR.ERR.ERR#
       648**DCL       648--REDEF    2066>>IF
B$EXCFR.EVID
       647**DCL       647--REDEF     648--REDEF
B$EXCFR.IR
       635**DCL       635--REDEF
B$EXCFR.PREVSZ
       634**DCL       634--REDEF
B$EXCFR.SUBC
       646**DCL       646--REDEF     647--REDEF     647--REDEF
B$TCB.ALT$
       631**DCL      2066>>IF       2068>>ASSIGN
B$TCB$
         7**DCL      2066>>IF       2068>>ASSIGN
CHECK_ERR
      2066**LABEL    2063--CALLALT
COUNTSF
      2051**DCL      2052--REDEF
DCBSF
      1980**DCL      2062>>ASSIGN
ENCRP_SEEDSF
      2009**DCL      2010--REDEF
ERRCODESF
      2011**DCL      2016--REDEF
FIDSF_RD
      2027**DCL      2028--REDEF
FPT_CHECK
      1789**DCL      2063<>CALL
PL6.E3A0      #011=SYS_FUNC_CHECK File=ZIU$Q2SF.:ZIC0TSI                         FRI 09/05/97 13:27 Page:220  
FPT_CHECK.V
      1789**DCL      1789--DCLINIT
FPT_CHECK.V.DCB#
      1789**DCL      2062<<ASSIGN
HELPCODE
      2045**DCL      2050--REDEF
INCL_ERR
      2023**DCL      2069<<ASSIGN
KEYVSF
      1983**DCL      1988--REDEF
KEYVSF.WD_ONE
      1985**DCL      1986--REDEF
M$CHECK
        20**DCL-ENT  2063--CALL
MONITOR_ERR
      2018**DCL      2068<<ASSIGN
MSGCODE
      2017**DCL      2018--REDEF
SYS_FUNC_ERRMSG
         8**DCL-ENT  2070--CALL

PL6.E3A0      #012=SYS_FUNC_PREC File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:221  
      879        1        /*T***********************************************************/
      880        2        /*T*                                                         */
      881        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      882        4        /*T*                                                         */
      883        5        /*T***********************************************************/
      884        6        SYS_FUNC_PREC: PROC ALTRET;
      885        7    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      886        8        %INCLUDE ZI_GLOBAL_DBUTIL;
      887      186         %SYS_FUNC;
      888      278         %MISC_DCLS;
      889      331        %INCLUDE CP_6;
      890      412        %INCLUDE CP_6_SUBS;
      891      952        %B$TCB;
      892      955        %B$EXCFR;
      893      973        %INCLUDE B_ERRORS_C;
      894     2100        %F$DCB;
      895     2157        %FPT_PRECORD(FPTN=PREC_FPT);
      896     2178        %VLP_VECTOR(FPTN=IKEY,
      897     2179         STCLASS="BASED(IKEY$) ");
      898     2194    1   DCL IKEY$ PTR;
      899     2195
      900     2196    1       PREC_FPT.V.DCB#=DCBSF;
      901     2197    1       PREC_FPT.V.KEYS#=%YES#;
      902     2198    1       NO_KEYSF = %NO#; /* Reset non existant key flag */
      903     2199    1       PREC_FPT.V.N# = COUNTSF;
      904     2200    1       PREC_FPT.V.KEYR# = %YES#;
      905     2201    1       PREC_FPT.KEY_ = VECTOR(KEYVSF);
      906     2202    1       IF DCBADDR(DCBSF) -> F$DCB.ORG# = %INDEXED# THEN
      907     2203    2       DO;
      908     2204    2           IKEY$ = ADDR(PREC_FPT.KEY_);
      909     2205    2           IKEY.W1.VSIZE# = BUFLNSF; /* Adjust size of indexed key */
      910     2206    2           PREC_FPT.V.INDX# = INDEXSF;
      911     2207    2           END;
      912     2208    1       ELSE
      913     2209    1           PREC_FPT.V.INDX# = 0;
      914     2210    1       CALL M$PRECORD(PREC_FPT) ALTRET(PREC_ERR);
      915     2211    1       RETURN;
PL6.E3A0      #012=SYS_FUNC_PREC File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:222  
      916     2212    1   PREC_ERR:
      917     2213    1       IF B$TCB$->B$TCB.ALT$->B$EXCFR.ERR.ERR# = %E$NOKEY THEN
      918     2214    2       DO;
      919     2215    2           NO_KEYSF = %YES#;
      920     2216    2           RETURN;
      921     2217    2           END;
      922     2218    1       IF KEYVSF.LEN = 0 /* end of file */
      923     2219    1       THEN RETURN;
      924     2220    2       ELSE DO;
      925     2221    2           MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;
      926     2222    2           INCL_ERR = %YES#;
      927     2223    2           CALL SYS_FUNC_ERRMSG;
      928     2224    2           END;
      929     2225    1       ALTRETURN;
      930     2226    1   END SYS_FUNC_PREC;
      931     2227        %EOD;

PL6.E3A0      #012=SYS_FUNC_PREC File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:223  
--  Include file information  --

   B_ERRORS_C.:LIB_E05  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_PREC.

   Procedure SYS_FUNC_PREC requires 59 words for executable code.
   Procedure SYS_FUNC_PREC requires 4 words of local(AUTO) storage.

PL6.E3A0      #012=SYS_FUNC_PREC File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:224  

 Object Unit name= SYS_FUNC_PREC                              File name= ZIU$Q2SF.:ZIC0TOU
 UTS= SEP 05 '97 13:27:59.52 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$LO
    1   DCB   even  none     0      0  M$UC
    2   Data  even  none    10     12  SYS_FUNC_PREC
    3   Proc  even  none    59     73  SYS_FUNC_PREC
    4  RoData even  none     6      6  SYS_FUNC_PREC

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes    yes     yes      Std        0  SYS_FUNC_PREC

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       0 SYS_FUNC_ERRMSG
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #012=SYS_FUNC_PREC File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:225  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     BLKLSF                                KEYLSF                                KEYXSF
     DCBSF                                 ORGSF                                 KEYSF
     KEYVSF                                ACSSF                                 NOTIMESF
     FUNSF                                 ASNSF                                 TESTSF
     XTENSIZESF                            DISPSF                                WAITSF
     VFCSF                                 FULLSF                                BKUPSF
     BUFLNSF                               BUFSF                                 SOURCESF
     DESTSF                                DATESF                                TIMESF
     UTSSF                                 DAYSF                                 TSTAMPSF
     ENCRP_SEEDSF                          ERRCODESF                             MSGCODE
     INCL_ERR                              ERR_INSERT                            FIDSF_RD
     ACNT                                  EXISTSF                               SHARESF
     DCBNMSF                               KEYRSF                                NO_KEYSF
     REASGNSF                              CARRY_ATTRIBUTESF                     SUBMESSF
     SPKY_OPNSF                            POSSF                                 ERRFLGSF
     MERGESF                               FSA_FLAG                              RELGSF
     UNUSED                                HELPCODE                              COUNTSF
     INDEXSF                               GAP                                   PSNSF
     ACNTSF                                KEY_SHADWSF                           REC$
     RB                                    RE                                    IE
     IB                                    CNT                                   ICNT
     RCNT                                  SCNT                                  FIRST_SET
     RETCNT                                DMPCNT                                KCNT
     ACNT_IDX                              I                                     J
     K                                     X                                     STEPCC
     I_O_BUF$                              OUT_INDX                              I_O_SIZE
     REC_DATA_LN                           M$LO                                  B$TCB$
     B$ROS$                                B$JIT$                                KEYFID
     I_O_KEY                               RESTART                               BREAK_FLAG
     ICHKSUM                               ITMCNT                                GAP1
     M$UC
PL6.E3A0      #012=SYS_FUNC_PREC File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:226  

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #012=SYS_FUNC_PREC File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:227  


      879        1        /*T***********************************************************/
      880        2        /*T*                                                         */
      881        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      882        4        /*T*                                                         */
      883        5        /*T***********************************************************/
      884        6        SYS_FUNC_PREC: PROC ALTRET;

      6  3 000000   000000 700200 xent  SYS_FUNC_PR* TSX0  ! X66_AUTO_0
         3 000001   000004 000000                    ZERO    4,0

      885        7    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      886        8        %INCLUDE ZI_GLOBAL_DBUTIL;
      887      186         %SYS_FUNC;
      888      278         %MISC_DCLS;
      889      331        %INCLUDE CP_6;
      890      412        %INCLUDE CP_6_SUBS;
      891      952        %B$TCB;
      892      955        %B$EXCFR;
      893      973        %INCLUDE B_ERRORS_C;
      894     2100        %F$DCB;
      895     2157        %FPT_PRECORD(FPTN=PREC_FPT);
      896     2178        %VLP_VECTOR(FPTN=IKEY,
      897     2179         STCLASS="BASED(IKEY$) ");
      898     2194    1   DCL IKEY$ PTR;
      899     2195
      900     2196    1       PREC_FPT.V.DCB#=DCBSF;

   2196  3 000002   000000 220000 xsym               LDX0    DCBSF
         3 000003   000006 740000 2                  STX0    PREC_FPT+6

      901     2197    1       PREC_FPT.V.KEYS#=%YES#;

   2197  3 000004   400000 236007                    LDQ     -131072,DL
         3 000005   000006 256000 2                  ORSQ    PREC_FPT+6

      902     2198    1       NO_KEYSF = %NO#; /* Reset non existant key flag */
PL6.E3A0      #012=SYS_FUNC_PREC File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:228  

   2198  3 000006   000000 450000 xsym               STZ     NO_KEYSF

      903     2199    1       PREC_FPT.V.N# = COUNTSF;

   2199  3 000007   000000 235000 xsym               LDA     COUNTSF
         3 000010   000007 755000 2                  STA     PREC_FPT+7

      904     2200    1       PREC_FPT.V.KEYR# = %YES#;

   2200  3 000011   200000 236007                    LDQ     65536,DL
         3 000012   000006 256000 2                  ORSQ    PREC_FPT+6

      905     2201    1       PREC_FPT.KEY_ = VECTOR(KEYVSF);

   2201  3 000013   000000 237000 4                  LDAQ    0
         3 000014   000002 757000 2                  STAQ    PREC_FPT+2

      906     2202    1       IF DCBADDR(DCBSF) -> F$DCB.ORG# = %INDEXED# THEN

   2202  3 000015   000002 470400 4                  LDP0    2
         3 000016   000000 471500                    LDP1    0,,PR0
         3 000017   100000 473510                    LDP3    0,X0,PR1
         3 000020   300032 236100                    LDQ     26,,PR3
         3 000021   777000 376003                    ANQ     -512,DU
         3 000022   006000 116003                    CMPQ    3072,DU
         3 000023   000037 601000 3                  TNZ     s:2209

      907     2203    2       DO;

      908     2204    2           IKEY$ = ADDR(PREC_FPT.KEY_);

   2204  3 000024   000003 236000 4                  LDQ     3
         3 000025   200003 756100                    STQ     IKEY$,,AUTO

      909     2205    2           IKEY.W1.VSIZE# = BUFLNSF; /* Adjust size of indexed key */

PL6.E3A0      #012=SYS_FUNC_PREC File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:229  
   2205  3 000026   200003 474500                    LDP4    IKEY$,,AUTO
         3 000027   000000 236000 xsym               LDQ     BUFLNSF
         3 000030   000020 736000                    QLS     16
         3 000031   400000 676100                    ERQ     0,,PR4
         3 000032   000004 376000 4                  ANQ     4
         3 000033   400000 656100                    ERSQ    0,,PR4

      910     2206    2           PREC_FPT.V.INDX# = INDEXSF;

   2206  3 000034   000000 236000 xsym               LDQ     INDEXSF
         3 000035   000006 552004 2                  STBQ    PREC_FPT+6,'04'O

      911     2207    2           END;

   2207  3 000036   000041 710000 3                  TRA     s:2210

      912     2208    1       ELSE
      913     2209    1           PREC_FPT.V.INDX# = 0;

   2209  3 000037   000000 236003                    LDQ     0,DU
         3 000040   000006 552004 2                  STBQ    PREC_FPT+6,'04'O

      914     2210    1       CALL M$PRECORD(PREC_FPT) ALTRET(PREC_ERR);

   2210  3 000041   000000 630400 2                  EPPR0   PREC_FPT
         3 000042   440003 713400                    CLIMB   alt,+16387
         3 000043   401000 401760                    pmme    nvectors=3
         3 000044   000046 702000 3                  TSX2    PREC_ERR

      915     2211    1       RETURN;

   2211  3 000045   000000 702200 xent               TSX2  ! X66_ARET

      916     2212    1   PREC_ERR:
      917     2213    1       IF B$TCB$->B$TCB.ALT$->B$EXCFR.ERR.ERR# = %E$NOKEY THEN

   2213  3 000046   000000 470400 xsym  PREC_ERR     LDP0    B$TCB$
PL6.E3A0      #012=SYS_FUNC_PREC File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:230  
         3 000047   000000 471500                    LDP1    0,,PR0
         3 000050   100102 236100                    LDQ     66,,PR1
         3 000051   377770 376007                    ANQ     131064,DL
         3 000052   001020 116007                    CMPQ    528,DL
         3 000053   000057 601000 3                  TNZ     s:2218

      918     2214    2       DO;

      919     2215    2           NO_KEYSF = %YES#;

   2215  3 000054   400000 236003                    LDQ     -131072,DU
         3 000055   000000 756000 xsym               STQ     NO_KEYSF

      920     2216    2           RETURN;

   2216  3 000056   000000 702200 xent               TSX2  ! X66_ARET

      921     2217    2           END;
      922     2218    1       IF KEYVSF.LEN = 0 /* end of file */

   2218  3 000057   000000 236000 xsym               LDQ     KEYVSF
         3 000060   777000 316003                    CANQ    -512,DU
         3 000061   000063 601000 3                  TNZ     s:2221

      923     2219    1       THEN RETURN;

   2219  3 000062   000000 702200 xent               TSX2  ! X66_ARET

      924     2220    2       ELSE DO;

      925     2221    2           MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;

   2221  3 000063   100102 236100                    LDQ     66,,PR1
         3 000064   000000 756000 xsym               STQ     MSGCODE

      926     2222    2           INCL_ERR = %YES#;

PL6.E3A0      #012=SYS_FUNC_PREC File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:231  
   2222  3 000065   400000 236003                    LDQ     -131072,DU
         3 000066   000000 756000 xsym               STQ     INCL_ERR

      927     2223    2           CALL SYS_FUNC_ERRMSG;

   2223  3 000067   000005 631400 4                  EPPR1   5
         3 000070   000000 701000 xent               TSX1    SYS_FUNC_ERRMSG
         3 000071   000000 011000                    NOP     0

      928     2224    2           END;

      929     2225    1       ALTRETURN;

   2225  3 000072   000000 702200 xent               TSX2  ! X66_AALT

PREC_FPT
 Sect OctLoc
   2     000   000003 777640   000006 006000   000000 177640   000000 006014    ................
   2     004   000000 177640   000000 006014   000000 000000   000000 000000    ................
   2     010   000000 000000   0***** ******                                    ........

(unnamed)
 Sect OctLoc
   4     000   000077 777640   000000 006000   000000 006003   000002 006000    .?..............
   4     004   777777 600000   000000 000000                                    ........
      930     2226    1   END SYS_FUNC_PREC;
      931     2227        %EOD;

PL6.E3A0      #012=SYS_FUNC_PREC File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:232  
--  Include file information  --

   B_ERRORS_C.:LIB_E05  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_PREC.

   Procedure SYS_FUNC_PREC requires 59 words for executable code.
   Procedure SYS_FUNC_PREC requires 4 words of local(AUTO) storage.
PL6.E3A0      #012=SYS_FUNC_PREC File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:233  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #012=SYS_FUNC_PREC File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:234  
          MINI XREF LISTING

B$EXCFR.ASL
       956**DCL       956--REDEF
B$EXCFR.ERR
       970**DCL      2221>>ASSIGN
B$EXCFR.ERR.ERR#
       970**DCL       970--REDEF    2213>>IF
B$EXCFR.EVID
       969**DCL       969--REDEF     970--REDEF
B$EXCFR.IR
       957**DCL       957--REDEF
B$EXCFR.PREVSZ
       956**DCL       956--REDEF
B$EXCFR.SUBC
       968**DCL       968--REDEF     969--REDEF     969--REDEF
B$TCB.ALT$
       953**DCL      2213>>IF       2221>>ASSIGN
B$TCB$
       315**DCL      2213>>IF       2221>>ASSIGN
BUFLNSF
       216**DCL      2205>>ASSIGN
COUNTSF
       267**DCL       268--REDEF    2199>>ASSIGN
DCBSF
       196**DCL      2196>>ASSIGN   2202--IF
ENCRP_SEEDSF
       225**DCL       226--REDEF
ERRCODESF
       227**DCL       232--REDEF
F$DCB.ACTPOS
      2133**DCL      2133--REDEF
F$DCB.ARS#
      2107**DCL      2107--REDEF
PL6.E3A0      #012=SYS_FUNC_PREC File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:235  
F$DCB.ATTR
      2126**DCL      2127--REDEF
F$DCB.BORROW
      2141**DCL      2141--REDEF    2141--REDEF    2141--REDEF
F$DCB.DCBNAME.L
      2155**DCL      2155--IMP-SIZ
F$DCB.EOMCHAR#
      2111**DCL      2111--REDEF
F$DCB.FLDID
      2136**DCL      2136--REDEF
F$DCB.FORM$
      2130**DCL      2130--REDEF
F$DCB.FSECT
      2146**DCL      2146--REDEF
F$DCB.FSN#
      2123**DCL      2123--REDEF    2123--REDEF    2124--REDEF
F$DCB.HEADER$
      2129**DCL      2129--REDEF
F$DCB.IXTNSIZE#
      2127**DCL      2127--REDEF
F$DCB.LASTSTA$
      2116**DCL      2116--REDEF
F$DCB.LVL
      2142**DCL      2142--REDEF
F$DCB.NAME#.C
      2117**DCL      2117--REDEF
F$DCB.NOEOF
      2139**DCL      2139--REDEF
F$DCB.NRECS#
      2128**DCL      2128--REDEF
F$DCB.NRECX
      2147**DCL      2147--REDEF
F$DCB.OHDR
      2139**DCL      2139--REDEF
F$DCB.ORG#
      2122**DCL      2122--REDEF    2202>>IF
PL6.E3A0      #012=SYS_FUNC_PREC File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:236  
F$DCB.PRECNO
      2145**DCL      2145--REDEF
F$DCB.RCSZ
      2151**DCL      2151--REDEF
F$DCB.RES#
      2118**DCL      2118--REDEF
F$DCB.SETX
      2130**DCL      2130--REDEF
F$DCB.TAB$
      2130**DCL      2130--REDEF
F$DCB.TDA
      2144**DCL      2145--REDEF
F$DCB.WSN#
      2118**DCL      2118--REDEF
FIDSF_RD
       243**DCL       244--REDEF
HELPCODE
       261**DCL       266--REDEF
ICHKSUM
       326**DCL       327--REDEF
IKEY.W1.VSIZE#
      2190**DCL      2205<<ASSIGN
IKEY.W2
      2191**DCL      2192--REDEF
IKEY$
      2194**DCL      2190--IMP-PTR  2204<<ASSIGN   2205>>ASSIGN
INCL_ERR
       239**DCL      2222<<ASSIGN
INDEXSF
       269**DCL      2206>>ASSIGN
I_O_BUF$
       304**DCL       305--IMP-PTR
KEYVSF
       199**DCL       204--REDEF    2201--ASSIGN
KEYVSF.LEN
       200**DCL      2218>>IF
PL6.E3A0      #012=SYS_FUNC_PREC File=ZIU$Q2SF.:ZIC0TSI                          FRI 09/05/97 13:27 Page:237  
KEYVSF.WD_ONE
       201**DCL       202--REDEF
M$PRECORD
       344**DCL-ENT  2210--CALL
MONITOR_ERR
       234**DCL      2221<<ASSIGN
MSGCODE
       233**DCL       234--REDEF
NO_KEYSF
       250**DCL      2198<<ASSIGN   2215<<ASSIGN
PREC_ERR
      2213**LABEL    2210--CALLALT
PREC_FPT
      2168**DCL      2210<>CALL
PREC_FPT.KEY_
      2168**DCL      2201<<ASSIGN   2204--ASSIGN
PREC_FPT.V
      2170**DCL      2168--DCLINIT
PREC_FPT.V.DCB#
      2170**DCL      2196<<ASSIGN
PREC_FPT.V.INDX#
      2173**DCL      2206<<ASSIGN   2209<<ASSIGN
PREC_FPT.V.KEYR#
      2171**DCL      2200<<ASSIGN
PREC_FPT.V.KEYS#
      2171**DCL      2197<<ASSIGN
PREC_FPT.V.N#
      2174**DCL      2199<<ASSIGN
REC$
       285**DCL       308--IMP-PTR
REC_DATA_LN
       313**DCL       312--IMP-SIZ
SYS_FUNC_ERRMSG
         7**DCL-ENT  2223--CALL

PL6.E3A0      #013=SYS_FUNC_DELREC File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:28 Page:238  
      932        1        /*T***********************************************************/
      933        2        /*T*                                                         */
      934        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      935        4        /*T*                                                         */
      936        5        /*T***********************************************************/
      937        6        SYS_FUNC_DELREC: PROC ALTRET;
      938        7    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      939        8        %INCLUDE ZI_GLOBAL_DBUTIL;
      940      186         %SYS_FUNC;
      941      278         %MISC_DCLS;
      942      331        %INCLUDE CP_6;
      943      412        %INCLUDE CP_6_SUBS;
      944      952        %B$TCB;
      945      955        %F$DCB;
      946     1012        %B$EXCFR;
      947     1030        %FPT_DELREC;
      948     1049        %VLP_VECTOR(FPTN=IKEY,
      949     1050         STCLASS="BASED(IKEY$) ");
      950     1065    1   DCL IKEY$ PTR;
      951     1066
      952     1067    1       FPT_DELREC.V.DCB# = DCBSF;
      953     1068    1       FPT_DELREC.LKEY_ = VECTOR(NIL);
      954     1069    1       FPT_DELREC.KEY_ = VECTOR(KEYVSF);
      955     1070    1       IF DCBADDR(DCBSF) -> F$DCB.ORG# = %INDEXED# THEN
      956     1071    2       DO;
      957     1072    2           IKEY$ = ADDR(FPT_DELREC.KEY_);
      958     1073    2           IKEY.W1.VSIZE# = BUFLNSF; /* Adjust size of indexed key */
      959     1074    2           FPT_DELREC.V.INDX# = INDEXSF;
      960     1075    2           END;
      961     1076    1       ELSE
      962     1077    1           FPT_DELREC.V.INDX# = 0;
      963     1078    1       CALL M$DELREC(FPT_DELREC) ALTRET(ALTRTN);
      964     1079    1       RETURN;
      965     1080
      966     1081    1   ALTRTN:
      967     1082    1       MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;
      968     1083    1       CALL SYS_FUNC_ERRMSG;
PL6.E3A0      #013=SYS_FUNC_DELREC File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:28 Page:239  
      969     1084    1       ALTRETURN;
      970     1085    1   END SYS_FUNC_DELREC;

PL6.E3A0      #013=SYS_FUNC_DELREC File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:28 Page:240  
--  Include file information  --

   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_DELREC.

   Procedure SYS_FUNC_DELREC requires 41 words for executable code.
   Procedure SYS_FUNC_DELREC requires 4 words of local(AUTO) storage.

    No errors detected in file ZIU$Q2SF.:ZIC0TSI    .

PL6.E3A0      #013=SYS_FUNC_DELREC File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:28 Page:241  

 Object Unit name= SYS_FUNC_DELREC                            File name= ZIU$Q2SF.:ZIC0TOU
 UTS= SEP 05 '97 13:28:11.36 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$LO
    1   DCB   even  none     0      0  M$UC
    2   Data  even  none    10     12  SYS_FUNC_DELREC
    3   Proc  even  none    41     51  SYS_FUNC_DELREC
    4  RoData even  none     8     10  SYS_FUNC_DELREC

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes    yes     yes      Std        0  SYS_FUNC_DELREC

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       0 SYS_FUNC_ERRMSG
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #013=SYS_FUNC_DELREC File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:28 Page:242  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     BLKLSF                                KEYLSF                                KEYXSF
     DCBSF                                 ORGSF                                 KEYSF
     KEYVSF                                ACSSF                                 NOTIMESF
     FUNSF                                 ASNSF                                 TESTSF
     XTENSIZESF                            DISPSF                                WAITSF
     VFCSF                                 FULLSF                                BKUPSF
     BUFLNSF                               BUFSF                                 SOURCESF
     DESTSF                                DATESF                                TIMESF
     UTSSF                                 DAYSF                                 TSTAMPSF
     ENCRP_SEEDSF                          ERRCODESF                             MSGCODE
     INCL_ERR                              ERR_INSERT                            FIDSF_RD
     ACNT                                  EXISTSF                               SHARESF
     DCBNMSF                               KEYRSF                                NO_KEYSF
     REASGNSF                              CARRY_ATTRIBUTESF                     SUBMESSF
     SPKY_OPNSF                            POSSF                                 ERRFLGSF
     MERGESF                               FSA_FLAG                              RELGSF
     UNUSED                                HELPCODE                              COUNTSF
     INDEXSF                               GAP                                   PSNSF
     ACNTSF                                KEY_SHADWSF                           REC$
     RB                                    RE                                    IE
     IB                                    CNT                                   ICNT
     RCNT                                  SCNT                                  FIRST_SET
     RETCNT                                DMPCNT                                KCNT
     ACNT_IDX                              I                                     J
     K                                     X                                     STEPCC
     I_O_BUF$                              OUT_INDX                              I_O_SIZE
     REC_DATA_LN                           M$LO                                  B$TCB$
     B$ROS$                                B$JIT$                                KEYFID
     I_O_KEY                               RESTART                               BREAK_FLAG
     ICHKSUM                               ITMCNT                                GAP1
     M$UC
PL6.E3A0      #013=SYS_FUNC_DELREC File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:28 Page:243  

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #013=SYS_FUNC_DELREC File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:28 Page:244  


      932        1        /*T***********************************************************/
      933        2        /*T*                                                         */
      934        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      935        4        /*T*                                                         */
      936        5        /*T***********************************************************/
      937        6        SYS_FUNC_DELREC: PROC ALTRET;

      6  3 000000   000000 700200 xent  SYS_FUNC_DE* TSX0  ! X66_AUTO_0
         3 000001   000004 000000                    ZERO    4,0

      938        7    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
      939        8        %INCLUDE ZI_GLOBAL_DBUTIL;
      940      186         %SYS_FUNC;
      941      278         %MISC_DCLS;
      942      331        %INCLUDE CP_6;
      943      412        %INCLUDE CP_6_SUBS;
      944      952        %B$TCB;
      945      955        %F$DCB;
      946     1012        %B$EXCFR;
      947     1030        %FPT_DELREC;
      948     1049        %VLP_VECTOR(FPTN=IKEY,
      949     1050         STCLASS="BASED(IKEY$) ");
      950     1065    1   DCL IKEY$ PTR;
      951     1066
      952     1067    1       FPT_DELREC.V.DCB# = DCBSF;

   1067  3 000002   000000 220000 xsym               LDX0    DCBSF
         3 000003   000010 740000 2                  STX0    FPT_DELREC+8

      953     1068    1       FPT_DELREC.LKEY_ = VECTOR(NIL);

   1068  3 000004   000000 237000 4                  LDAQ    0
         3 000005   000004 757000 2                  STAQ    FPT_DELREC+4

      954     1069    1       FPT_DELREC.KEY_ = VECTOR(KEYVSF);

PL6.E3A0      #013=SYS_FUNC_DELREC File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:28 Page:245  
   1069  3 000006   000002 237000 4                  LDAQ    2
         3 000007   000002 757000 2                  STAQ    FPT_DELREC+2

      955     1070    1       IF DCBADDR(DCBSF) -> F$DCB.ORG# = %INDEXED# THEN

   1070  3 000010   000004 470400 4                  LDP0    4
         3 000011   000000 471500                    LDP1    0,,PR0
         3 000012   100000 473510                    LDP3    0,X0,PR1
         3 000013   300032 236100                    LDQ     26,,PR3
         3 000014   777000 376003                    ANQ     -512,DU
         3 000015   006000 116003                    CMPQ    3072,DU
         3 000016   000032 601000 3                  TNZ     s:1077

      956     1071    2       DO;

      957     1072    2           IKEY$ = ADDR(FPT_DELREC.KEY_);

   1072  3 000017   000005 236000 4                  LDQ     5
         3 000020   200003 756100                    STQ     IKEY$,,AUTO

      958     1073    2           IKEY.W1.VSIZE# = BUFLNSF; /* Adjust size of indexed key */

   1073  3 000021   200003 474500                    LDP4    IKEY$,,AUTO
         3 000022   000000 236000 xsym               LDQ     BUFLNSF
         3 000023   000020 736000                    QLS     16
         3 000024   400000 676100                    ERQ     0,,PR4
         3 000025   000006 376000 4                  ANQ     6
         3 000026   400000 656100                    ERSQ    0,,PR4

      959     1074    2           FPT_DELREC.V.INDX# = INDEXSF;

   1074  3 000027   000000 236000 xsym               LDQ     INDEXSF
         3 000030   000010 552004 2                  STBQ    FPT_DELREC+8,'04'O

      960     1075    2           END;

   1075  3 000031   000034 710000 3                  TRA     s:1078
PL6.E3A0      #013=SYS_FUNC_DELREC File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:28 Page:246  

      961     1076    1       ELSE
      962     1077    1           FPT_DELREC.V.INDX# = 0;

   1077  3 000032   000000 236003                    LDQ     0,DU
         3 000033   000010 552004 2                  STBQ    FPT_DELREC+8,'04'O

      963     1078    1       CALL M$DELREC(FPT_DELREC) ALTRET(ALTRTN);

   1078  3 000034   000000 630400 2                  EPPR0   FPT_DELREC
         3 000035   440002 713400                    CLIMB   alt,+16386
         3 000036   401400 401760                    pmme    nvectors=4
         3 000037   000041 702000 3                  TSX2    ALTRTN

      964     1079    1       RETURN;

   1079  3 000040   000000 702200 xent               TSX2  ! X66_ARET

      965     1080
      966     1081    1   ALTRTN:
      967     1082    1       MONITOR_ERR = B$TCB$->B$TCB.ALT$->B$EXCFR.ERR;

   1082  3 000041   000000 470400 xsym  ALTRTN       LDP0    B$TCB$
         3 000042   000000 471500                    LDP1    0,,PR0
         3 000043   100102 236100                    LDQ     66,,PR1
         3 000044   000000 756000 xsym               STQ     MSGCODE

      968     1083    1       CALL SYS_FUNC_ERRMSG;

   1083  3 000045   000007 631400 4                  EPPR1   7
         3 000046   000000 701000 xent               TSX1    SYS_FUNC_ERRMSG
         3 000047   000000 011000                    NOP     0

      969     1084    1       ALTRETURN;

   1084  3 000050   000000 702200 xent               TSX2  ! X66_AALT

PL6.E3A0      #013=SYS_FUNC_DELREC File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:28 Page:247  
FPT_DELREC
 Sect OctLoc
   2     000   000001 777640   000010 006000   000000 177640   000000 006014    ................
   2     004   000000 177640   000000 006014   000000 177640   000000 006014    ................
   2     010   000000 000000   000000 000000                                    ........

(unnamed)
 Sect OctLoc
   4     000   000000 177640   000000 006014   000077 777640   000000 006000    .........?......
   4     004   000000 006003   000002 006000   777777 600000   000000 000000    ................
      970     1085    1   END SYS_FUNC_DELREC;

PL6.E3A0      #013=SYS_FUNC_DELREC File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:28 Page:248  
--  Include file information  --

   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure SYS_FUNC_DELREC.

   Procedure SYS_FUNC_DELREC requires 41 words for executable code.
   Procedure SYS_FUNC_DELREC requires 4 words of local(AUTO) storage.

    No errors detected in file ZIU$Q2SF.:ZIC0TSI    .
PL6.E3A0      #013=SYS_FUNC_DELREC File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:28 Page:249  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #013=SYS_FUNC_DELREC File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:28 Page:250  
          MINI XREF LISTING

ALTRTN
      1082**LABEL    1078--CALLALT
B$EXCFR.ASL
      1013**DCL      1013--REDEF
B$EXCFR.ERR
      1027**DCL      1082>>ASSIGN
B$EXCFR.ERR.ERR#
      1027**DCL      1027--REDEF
B$EXCFR.EVID
      1026**DCL      1026--REDEF    1027--REDEF
B$EXCFR.IR
      1014**DCL      1014--REDEF
B$EXCFR.PREVSZ
      1013**DCL      1013--REDEF
B$EXCFR.SUBC
      1025**DCL      1025--REDEF    1026--REDEF    1026--REDEF
B$TCB.ALT$
       953**DCL      1082>>ASSIGN
B$TCB$
       315**DCL      1082>>ASSIGN
BUFLNSF
       216**DCL      1073>>ASSIGN
COUNTSF
       267**DCL       268--REDEF
DCBSF
       196**DCL      1067>>ASSIGN   1070--IF
ENCRP_SEEDSF
       225**DCL       226--REDEF
ERRCODESF
       227**DCL       232--REDEF
F$DCB.ACTPOS
       988**DCL       988--REDEF
PL6.E3A0      #013=SYS_FUNC_DELREC File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:28 Page:251  
F$DCB.ARS#
       962**DCL       962--REDEF
F$DCB.ATTR
       981**DCL       982--REDEF
F$DCB.BORROW
       996**DCL       996--REDEF     996--REDEF     996--REDEF
F$DCB.DCBNAME.L
      1010**DCL      1010--IMP-SIZ
F$DCB.EOMCHAR#
       966**DCL       966--REDEF
F$DCB.FLDID
       991**DCL       991--REDEF
F$DCB.FORM$
       985**DCL       985--REDEF
F$DCB.FSECT
      1001**DCL      1001--REDEF
F$DCB.FSN#
       978**DCL       978--REDEF     978--REDEF     979--REDEF
F$DCB.HEADER$
       984**DCL       984--REDEF
F$DCB.IXTNSIZE#
       982**DCL       982--REDEF
F$DCB.LASTSTA$
       971**DCL       971--REDEF
F$DCB.LVL
       997**DCL       997--REDEF
F$DCB.NAME#.C
       972**DCL       972--REDEF
F$DCB.NOEOF
       994**DCL       994--REDEF
F$DCB.NRECS#
       983**DCL       983--REDEF
F$DCB.NRECX
      1002**DCL      1002--REDEF
F$DCB.OHDR
       994**DCL       994--REDEF
PL6.E3A0      #013=SYS_FUNC_DELREC File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:28 Page:252  
F$DCB.ORG#
       977**DCL       977--REDEF    1070>>IF
F$DCB.PRECNO
      1000**DCL      1000--REDEF
F$DCB.RCSZ
      1006**DCL      1006--REDEF
F$DCB.RES#
       973**DCL       973--REDEF
F$DCB.SETX
       985**DCL       985--REDEF
F$DCB.TAB$
       985**DCL       985--REDEF
F$DCB.TDA
       999**DCL      1000--REDEF
F$DCB.WSN#
       973**DCL       973--REDEF
FIDSF_RD
       243**DCL       244--REDEF
FPT_DELREC
      1041**DCL      1078<>CALL
FPT_DELREC.KEY_
      1041**DCL      1069<<ASSIGN   1072--ASSIGN
FPT_DELREC.LKEY_
      1043**DCL      1068<<ASSIGN
FPT_DELREC.V
      1044**DCL      1041--DCLINIT
FPT_DELREC.V.DCB#
      1045**DCL      1067<<ASSIGN
FPT_DELREC.V.INDX#
      1045**DCL      1074<<ASSIGN   1077<<ASSIGN
HELPCODE
       261**DCL       266--REDEF
ICHKSUM
       326**DCL       327--REDEF
IKEY.W1.VSIZE#
      1061**DCL      1073<<ASSIGN
PL6.E3A0      #013=SYS_FUNC_DELREC File=ZIU$Q2SF.:ZIC0TSI                        FRI 09/05/97 13:28 Page:253  
IKEY.W2
      1062**DCL      1063--REDEF
IKEY$
      1065**DCL      1061--IMP-PTR  1072<<ASSIGN   1073>>ASSIGN
INDEXSF
       269**DCL      1074>>ASSIGN
I_O_BUF$
       304**DCL       305--IMP-PTR
KEYVSF
       199**DCL       204--REDEF    1069--ASSIGN
KEYVSF.WD_ONE
       201**DCL       202--REDEF
M$DELREC
       342**DCL-ENT  1078--CALL
MONITOR_ERR
       234**DCL      1082<<ASSIGN
MSGCODE
       233**DCL       234--REDEF
REC$
       285**DCL       308--IMP-PTR
REC_DATA_LN
       313**DCL       312--IMP-SIZ
SYS_FUNC_ERRMSG
         7**DCL-ENT  1083--CALL
