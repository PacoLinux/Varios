VERSION A01

PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:1    
        1        1        /*M*    XSP$PRESENTATION   Entry to ISO Presentation layer from higher up. */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DDA */
        8        8        /*F*
        9        9                NAME:   XSP$PRESENTATION
       10       10                PURPOSE:
       11       11                    This routine is the entry into the Presentation layer from any
       12       12                    higher layer, such as ACSE or X.400.
       13       13                DESCRIPTION:
       14       14                    This is the sole entry point to the Presentation layer from any
       15       15                    higher layer.  A single parameter is passed, which is the
       16       16                    Presentation FPT.  This FPT is examined to determine the
       17       17                    Presentation function code that is being requested, as well as
       18       18                    the Presentation connection number to apply the request to.
       19       19                    Various things may possibly be updated and then the Presentation
       20       20                    state machine is invoked.  The state machine may cause other
       21       21                    Presentation actions to occur and may further update the state
       22       22                    of the connection.
       23       23        */
       24       24        XSP$PRESENTATION: PROC( PFPT) ALTRET;
       25       25        %INCLUDE B_SEGIDS_C;
       26      564        %INCLUDE B$JIT_C;
       27      878            %B$JIT0;
       28      967            %U$JIT1X;
       29      970            %M$JIT2;
       30      980            %F$JIT3X;
       31      983            %S$JIT4X;
       32      986            %J$JIT5X;
       33      989            %A$JIT6X;
       34      992        %INCLUDE XSS_SESSION_E;
       35     1557        %INCLUDE XSP_PRESENTATION_E;
       36     1656        %INCLUDE XSP_PRESENTATION_M;
       37     3142            %XSP$PRIMITIVES( STCLASS="BASED( PFPT$)");
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:2    
       38     4841            %XSP$GENERIC( FPTN=PFPT, STCLASS="");
       39     4937            %XSP$PSAP;
       40     4973        %INCLUDE XSP_INTERNAL_E;
       41     5247        %INCLUDE XSP_INTERNAL_M;
       42     5908            %XSP$VBLK( NAME=XSP_VBLK, STCLASS="CONSTANT SYMDEF");
       43     6054            %XSP$PCTX( NAME=PCTX, STCLASS="BASED( CTX$)");
       44     6210            %XSP$VBLK( NAME=VBLK, STCLASS=AUTO);
       45     6356        %INCLUDE UM_CP6;
       46     7208        %MACRO ERRORDEF( NAME=XSP_ERROR, STCLASS="CONSTANT SYMDEF", LVL=1, LAST=";",
       47     7209                         ERR#=0, SEV=0);
       48     7210            %VLP_ERRCODE( FPTN=NAME, STCLASS=STCLASS, FCG='XS', MID='P',
       49     7211                          MON='0'B, ERR#=ERR#, SEV=SEV);
       50     7212        %MEND;
       51     7213        %INCLUDE XSC_PERR_C;
       52     7290            %ERRORDEF( NAME=XSP_E$RDONLYFPT, ERR#=%E$RDONLYFPT);
       53     7338            /*E*  ERROR:  XSP-E$RDONLYFPT-0
       54     7339                MESSAGE:  FPT is read-only; must be writeable.
       55     7340            */
       56     7341            %ERRORDEF( NAME=XSP_E$BADCID, ERR#=%E$BADCID);
       57     7389            /*E*  ERROR:  XSP-E$BADCID-0
       58     7390                MESSAGE:  Illegal connection identifier.
       59     7391            */
       60     7392            %ERRORDEF( NAME=XSP_E$BADFNC, ERR#=%E$BADFNC);
       61     7440            /*E*  ERROR:  XSP-E$BADFNC-0
       62     7441                MESSAGE:  Illegal function code.
       63     7442            */
       64     7443            %ERRORDEF( NAME=XSP_E$STATE, ERR#=%E$STATE);
       65     7491            /*E*  ERROR:  XSP-E$STATE-0
       66     7492                MESSAGE:  Connection state prevents this action.
       67     7493            */
       68     7494            %ERRORDEF( NAME=XSP_E$ACTID, ERR#=%E$ACTID);
       69     7542            /*E*  ERROR:  XSP-E$ACTID-0
       70     7543                MESSAGE:  ACTID contains an illegal value.
       71     7544            */
       72     7545            %ERRORDEF( NAME=XSP_E$CALLED, ERR#=%E$CALLED);
       73     7593            /*E*  ERROR:  XSP-E$CALLED-0
       74     7594                MESSAGE:  CALLED$ contains an illegal value.
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:3    
       75     7595            */
       76     7596            %ERRORDEF( NAME=XSP_E$CALLING, ERR#=%E$CALLING);
       77     7644            /*E*  ERROR:  XSP-E$CALLING-0
       78     7645                MESSAGE:  CALLING$ contains an illegal value.
       79     7646            */
       80     7647            %ERRORDEF( NAME=XSP_E$CTXT, ERR#=%E$CTXT);
       81     7695            /*E*  ERROR:  XSP-E$CTXT-0
       82     7696                MESSAGE:  CTXT$ contains an illegal value.
       83     7697            */
       84     7698            %ERRORDEF( NAME=XSP_E$DATA, ERR#=%E$DATA);
       85     7746            /*E*  ERROR:  XSP-E$DATA-0
       86     7747                MESSAGE:  DATA$ contains an illegal value.
       87     7748            */
       88     7749            %ERRORDEF( NAME=XSP_E$DFLT, ERR#=%E$DFLT);
       89     7797            /*E*  ERROR:  XSP-E$DFLT-0
       90     7798                MESSAGE:  DFLT$ contains an illegal value.
       91     7799            */
       92     7800            %ERRORDEF( NAME=XSP_E$DFLTRSLT, ERR#=%E$DFLTRSLT);
       93     7848            /*E*  ERROR:  XSP-E$DFLTRSLT-0
       94     7849                MESSAGE:  DFLTRSLT contains an illegal value.
       95     7850            */
       96     7851            %ERRORDEF( NAME=XSP_E$ITOKENS, ERR#=%E$ITOKENS);
       97     7899            /*E*  ERROR:  XSP-E$ITOKENS-0
       98     7900                MESSAGE:  ITOKENS contains an illegal value.
       99     7901            */
      100     7902            %ERRORDEF( NAME=XSP_E$OACTID, ERR#=%E$OACTID);
      101     7950            /*E*  ERROR:  XSP-E$OACTID-0
      102     7951                MESSAGE:  OACTID contains an illegal value.
      103     7952            */
      104     7953            %ERRORDEF( NAME=XSP_E$OSCID, ERR#=%E$OSCID);
      105     8001            /*E*  ERROR:  XSP-E$OSCID-0
      106     8002                MESSAGE:  OSCID contains an illegal value.
      107     8003            */
      108     8004            %ERRORDEF( NAME=XSP_E$PFU, ERR#=%E$PFU);
      109     8052            /*E*  ERROR:  XSP-E$PFU-0
      110     8053                MESSAGE:  PFU contains an illegal value.
      111     8054            */
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:4    
      112     8055            %ERRORDEF( NAME=XSP_E$QOS, ERR#=%E$QOS);
      113     8103            /*E*  ERROR:  XSP-E$QOS-0
      114     8104                MESSAGE:  QOS contains an illegal value.
      115     8105            */
      116     8106            %ERRORDEF( NAME=XSP_E$REASON, ERR#=%E$REASON);
      117     8154            /*E*  ERROR:  XSP-E$REASON-0
      118     8155                MESSAGE:  REASON contains an illegal value.
      119     8156            */
      120     8157            %ERRORDEF( NAME=XSP_E$RESPONDING, ERR#=%E$RESPONDING);
      121     8205            /*E*  ERROR:  XSP-E$RESPONDING-0
      122     8206                MESSAGE:  RESPONDING$ contains an illegal value.
      123     8207            */
      124     8208            %ERRORDEF( NAME=XSP_E$RESULT, ERR#=%E$RESULT);
      125     8256            /*E*  ERROR:  XSP-E$RESULT-0
      126     8257                MESSAGE:  RESULT contains an illegal value.
      127     8258            */
      128     8259            %ERRORDEF( NAME=XSP_E$SERNUM, ERR#=%E$SERNUM);
      129     8307            /*E*  ERROR:  XSP-E$SERNUM-0
      130     8308                MESSAGE:  SERNUM contains an illegal value.
      131     8309            */
      132     8310            %ERRORDEF( NAME=XSP_E$SFU, ERR#=%E$SFU);
      133     8358            /*E*  ERROR:  XSP-E$SFU-0
      134     8359                MESSAGE:  SFU contains an illegal value.
      135     8360            */
      136     8361            %ERRORDEF( NAME=XSP_E$TOKENS, ERR#=%E$TOKENS);
      137     8409            /*E*  ERROR:  XSP-E$TOKENS-0
      138     8410                MESSAGE:  TOKENS contains an illegal value.
      139     8411            */
      140     8412            %ERRORDEF( NAME=XSP_E$TYPE, ERR#=%E$TYPE);
      141     8460            /*E*  ERROR:  XSP-E$TYPE-0
      142     8461                MESSAGE:  TYPE contains an illegal value.
      143     8462            */
      144     8463
      145     8464    1       DCL XSP$CTXPTR ENTRY(2) ALTRET;
      146     8465    1       DCL XSP$CTXTMASKS ENTRY(1) ALTRET;
      147     8466    1       DCL XSP$DATAMASKS ENTRY(1) ALTRET;
      148     8467    1       DCL XSP$DFLTMASKS ENTRY(1) ALTRET;
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:5    
      149     8468    1       DCL XSP$DUMPFPT ENTRY(1);
      150     8469    1       DCL XSP$MACHINE ENTRY(1) ALTRET;
      151     8470    1       DCL XSS$SCREECH ENTRY(1);
      152     8471
      153     8472    1       DCL B$JIT$ PTR SYMREF;
      154     8473    1       DCL XSS_TRACE SBIN SYMREF;
      155     8474
      156     8475    1       DCL CTX$ PTR;
      157     8476    1       DCL PCID SBIN;
      158     8477    1       DCL TEMP REDEF PCID SBIN;
      159     8478    1       DCL PFPT$ PTR;
      160     8479    1       DCL 1 PX REDEF PFPT$,
      161     8480    1            2 OFFSET UBIN(18) UNAL,
      162     8481    1            2 * BIT(6) UNAL,
      163     8482    1            2 SEGID BIT(12) UNAL;
      164     8483        %EJECT;
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:6    
      165     8484    1       PFPT$ = ADDR( PFPT);
      166     8485    2       IF PX.SEGID = %ISSID THEN DO;
      167     8486    2           TEMP = 64 + PX.OFFSET / 1024;  /* page number of FPT's page */
      168     8487    3           IF TEMP >= B$JIT.PLL AND TEMP <= B$JIT.PUL THEN DO;
      169     8488                    /* user's FPT was allocated in CONSTANT storage */
      170     8489    3               IF XSP$GENERIC.ERROR = XSP_E$RDONLYFPT THEN
      171     8490    3                   ALTRETURN;
      172     8491    3               CALL XSS$SCREECH( XSP_E$RDONLYFPT);
      173     8492    3               END;
      174     8493    2           END;
      175     8494            /* Initialize returned error code */
      176     8495    1       XSP$GENERIC.ERROR = '0'B;
      177     8496            /* Initialize AUTO copy of VBLK structure */
      178     8497    1       VBLK = XSP_VBLK;
      179     8498    1       VBLK.FPT$ = PFPT$;
      180     8499            /* Determine which connection is being referred to */
      181     8500    1       PCID = XSP$GENERIC.PCID;
      182     8501    1       CALL XSP$CTXPTR( PCID, CTX$)
      183     8502    2       WHENALTRETURN DO;
      184     8503    2           XSP$GENERIC.ERROR = XSP_E$BADCID;
      185     8504    2           ALTRETURN;
      186     8505    2           END;
      187     8506            /* Update AUTO VBLK context ptr */
      188     8507    1       VBLK.CTX$ = CTX$;
      189     8508        %EJECT;
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:7    
      190     8509            /* Split depending on the Presentation function code requested */
      191     8510    2       DO CASE( XSP$GENERIC.FNC);
      192     8511    2           CASE( %XSP_FNC_PACDREQ#);
      193     8512    2               VBLK.EVENT = %XSP_PEV_PACDREQ;
      194     8513    2           CASE( %XSP_FNC_PACDRSP#);
      195     8514    2               VBLK.EVENT = %XSP_PEV_PACDRSP;
      196     8515    2           CASE( %XSP_FNC_PACEREQ#);
      197     8516    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      198     8517    2               VBLK.EVENT = %XSP_PEV_PACEREQ;
      199     8518    2           CASE( %XSP_FNC_PACERSP#);
      200     8519    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      201     8520    2               VBLK.EVENT = %XSP_PEV_PACERSP;
      202     8521    2           CASE( %XSP_FNC_PACIREQ#);
      203     8522    2               VBLK.EVENT = %XSP_PEV_PACIREQ;
      204     8523    2           CASE( %XSP_FNC_PACIRSP#);
      205     8524    2               VBLK.EVENT = %XSP_PEV_PACIRSP;
      206     8525    2           CASE( %XSP_FNC_PACRREQ#);
      207     8526    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      208     8527    2               VBLK.EVENT = %XSP_PEV_PACRREQ;
      209     8528    2           CASE( %XSP_FNC_PACSREQ#);
      210     8529    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      211     8530    2               VBLK.EVENT = %XSP_PEV_PACSREQ;
      212     8531    2           CASE( %XSP_FNC_PALTREQ#);
      213     8532    2               CALL XSP$CTXTMASKS( VBLK) ALTRET( BAD_CTXT);
      214     8533    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      215     8534    2               VBLK.EVENT = %XSP_PEV_PALTREQ;
      216     8535    2           CASE( %XSP_FNC_PALTRSP#);
      217     8536    2               CALL XSP$CTXTMASKS( VBLK) ALTRET( BAD_CTXT);
      218     8537    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      219     8538    2               VBLK.EVENT = %XSP_PEV_PALTRSP;
      220     8539    2           CASE( %XSP_FNC_PCADREQ#);
      221     8540    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      222     8541    2               VBLK.EVENT = %XSP_PEV_PCADREQ;
      223     8542    2           CASE( %XSP_FNC_PCADRSP#);
      224     8543    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      225     8544    2               VBLK.EVENT = %XSP_PEV_PCADRSP;
      226     8545    2           CASE( %XSP_FNC_PCONREQ#);
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:8    
      227     8546    2               CALL XSP$CTXTMASKS( VBLK) ALTRET( BAD_CTXT);
      228     8547    2               CALL XSP$DFLTMASKS( VBLK) ALTRET( BAD_DFLT);
      229     8548    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      230     8549    2               PCTX.MODE = %CLIENT;
      231     8550    2               PCTX.FU = XSP$CONNECT.PFU;
      232     8551    2               PCTX.SUR = XSP$CONNECT.SFU;
      233     8552    2               VBLK.EVENT = %XSP_PEV_PCONREQ;
      234     8553    2           CASE( %XSP_FNC_PCONRSP#);
      235     8554    2               CALL XSP$CTXTMASKS( VBLK) ALTRET( BAD_CTXT);
      236     8555    2               CALL XSP$DFLTMASKS( VBLK) ALTRET( BAD_DFLT);
      237     8556    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      238     8557    2               IF XSP$CONNECT.RESULT ~= 0 THEN
      239     8558    2                   VBLK.EVENT = %XSP_PEV_PCONRSN;
      240     8559    2               ELSE
      241     8560    2                   VBLK.EVENT = %XSP_PEV_PCONRSP;
      242     8561    2           CASE( %XSP_FNC_PCTGREQ#);
      243     8562    2               VBLK.EVENT = %XSP_PEV_PCTGREQ;
      244     8563    2           CASE( %XSP_FNC_PDATREQ#);
      245     8564    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      246     8565    2               VBLK.EVENT = %XSP_PEV_PDATREQ;
      247     8566    2           CASE( %XSP_FNC_PEXPREQ#);
      248     8567    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      249     8568    2               VBLK.EVENT = %XSP_PEV_PEXPREQ;
      250     8569    2           CASE( %XSP_FNC_PRELREQ#);
      251     8570    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      252     8571    2               VBLK.EVENT = %XSP_PEV_PRELREQ;
      253     8572    2           CASE( %XSP_FNC_PRELRSP#);
      254     8573    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      255     8574    2               VBLK.EVENT = %XSP_PEV_PRELRSP;
      256     8575    2           CASE( %XSP_FNC_PRSXREQ#);
      257     8576    2               CALL XSP$CTXTMASKS( VBLK) ALTRET( BAD_CTXT);
      258     8577    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      259     8578    2               VBLK.EVENT = %XSP_PEV_PRSXREQ;
      260     8579    2           CASE( %XSP_FNC_PRSXRSP#);
      261     8580    2               CALL XSP$CTXTMASKS( VBLK) ALTRET( BAD_CTXT);
      262     8581    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      263     8582    2               VBLK.EVENT = %XSP_PEV_PRSXRSP;
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:9    
      264     8583    2           CASE( %XSP_FNC_PSMAREQ#);
      265     8584    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      266     8585    2               VBLK.EVENT = %XSP_PEV_PSMAREQ;
      267     8586    2           CASE( %XSP_FNC_PSMARSP#);
      268     8587    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      269     8588    2               VBLK.EVENT = %XSP_PEV_PSMARSP;
      270     8589    2           CASE( %XSP_FNC_PSMIREQ#);
      271     8590    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      272     8591    2               VBLK.EVENT = %XSP_PEV_PSMIREQ;
      273     8592    2           CASE( %XSP_FNC_PSMIRSP#);
      274     8593    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      275     8594    2               VBLK.EVENT = %XSP_PEV_PSMIRSP;
      276     8595    2           CASE( %XSP_FNC_PTKGREQ#);
      277     8596    2               VBLK.EVENT = %XSP_PEV_PTKGREQ;
      278     8597    2           CASE( %XSP_FNC_PTKPREQ#);
      279     8598    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      280     8599    2               VBLK.EVENT = %XSP_PEV_PTKPREQ;
      281     8600    2           CASE( %XSP_FNC_PTYDREQ#);
      282     8601    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      283     8602    2               VBLK.EVENT = %XSP_PEV_PTYDREQ;
      284     8603    2           CASE( %XSP_FNC_PUABREQ#);
      285     8604    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      286     8605    2               VBLK.EVENT = %XSP_PEV_PUABREQ;
      287     8606    2           CASE( %XSP_FNC_PUERREQ#);
      288     8607    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
      289     8608    2               VBLK.EVENT = %XSP_PEV_PUERREQ;
      290     8609    2           CASE( ELSE);
      291     8610    2               XSP$GENERIC.ERROR = XSP_E$BADFNC;
      292     8611    2               ALTRETURN;
      293     8612    2           END;
      294     8613    1       IF XSS_TRACE > 0 THEN
      295     8614    1           CALL XSP$DUMPFPT( XSP$GENERIC);
      296     8615    1       CALL XSP$MACHINE( VBLK)
      297     8616    2       WHENALTRETURN DO;
      298     8617    2           IF XSP$GENERIC.ERROR = '0'O THEN
      299     8618    2               XSP$GENERIC.ERROR = XSP_E$STATE;
      300     8619    2   GETOUT:
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:10   
      301     8620    2           ALTRETURN;
      302     8621    2           END;
      303     8622    1       RETURN;
      304     8623        %EJECT;
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:11   
      305     8624    1   BAD_DATA: ;
      306     8625    1   BAD_DFLT: ;
      307     8626    1   BAD_CTXT: ;
      308     8627    1   BAD_VIBES:
      309     8628            /* altreturn with error code set */
      310     8629    1       ALTRETURN;
      311     8630
      312     8631    1       END XSP$PRESENTATION;
      313     8632        %EOD;

PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:12   
--  Include file information  --

   XSC_PERR_C.:XSA1TOU  is referenced.
   UM_CP6.:E05OU  is referenced.
   XSP_INTERNAL_M.:XSA1TOU  is referenced.
   XSP_INTERNAL_E.:XSA1TOU  is referenced.
   XSP_PRESENTATION_M.:XSA1TOU  is referenced.
   XSP_PRESENTATION_E.:XSA1TOU  is referenced.
   XSS_SESSION_E.:XSA1TOU  is referenced.
   B$JIT_C.:LIB_E05  is referenced.
   B_SEGIDS_C.:LIB_E05  is referenced.
      No diagnostics issued in procedure XSP$PRESENTATION.

   Procedure XSP$PRESENTATION requires 448 words for executable code.
   Procedure XSP$PRESENTATION requires 22 words of local(AUTO) storage.

PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:13   

 Object Unit name= XSP$PRESENTATION                           File name= XSP$PRESENTATION.:XSA1TOU
 UTS= OCT 01 '97 12:06:53.12 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  RoData even  UTS     35     43  XSP$PRESENTATION
    1   Proc  even  none   448    700  XSP$PRESENTATION
    2  RoData even  none     4      4  XSP$PRESENTATION

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes    yes     yes      Std        1  XSP$PRESENTATION
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:14   

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      0  XSP_VBLK                           0     14  XSP_E$RDONLYFPT
    0     15  XSP_E$BADCID                       0     16  XSP_E$BADFNC
    0     17  XSP_E$STATE                        0     20  XSP_E$ACTID
    0     21  XSP_E$CALLED                       0     22  XSP_E$CALLING
    0     23  XSP_E$CTXT                         0     24  XSP_E$DATA
    0     25  XSP_E$DFLT                         0     26  XSP_E$DFLTRSLT
    0     27  XSP_E$ITOKENS                      0     30  XSP_E$OACTID
    0     31  XSP_E$OSCID                        0     32  XSP_E$PFU
    0     33  XSP_E$QOS                          0     34  XSP_E$REASON
    0     35  XSP_E$RESPONDING                   0     36  XSP_E$RESULT
    0     37  XSP_E$SERNUM                       0     40  XSP_E$SFU
    0     41  XSP_E$TOKENS                       0     42  XSP_E$TYPE

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       1 XSS$SCREECH
 yes     yes           Std       2 XSP$CTXPTR
 yes     yes           Std       1 XSP$CTXTMASKS
         yes           Std       1 XSP$DUMPFPT
 yes     yes           Std       1 XSP$DATAMASKS
 yes     yes           Std       1 XSP$MACHINE
 yes     yes           Std       1 XSP$DFLTMASKS
                       nStd      0 X66_AUTO_1
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:15   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     B$JIT$                                XSS_TRACE

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     NULLSID                               ISSID
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:16   


        1        1        /*M*    XSP$PRESENTATION   Entry to ISO Presentation layer from higher up. */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DDA */
        8        8        /*F*
        9        9                NAME:   XSP$PRESENTATION
       10       10                PURPOSE:
       11       11                    This routine is the entry into the Presentation layer from any
       12       12                    higher layer, such as ACSE or X.400.
       13       13                DESCRIPTION:
       14       14                    This is the sole entry point to the Presentation layer from any
       15       15                    higher layer.  A single parameter is passed, which is the
       16       16                    Presentation FPT.  This FPT is examined to determine the
       17       17                    Presentation function code that is being requested, as well as
       18       18                    the Presentation connection number to apply the request to.
       19       19                    Various things may possibly be updated and then the Presentation
       20       20                    state machine is invoked.  The state machine may cause other
       21       21                    Presentation actions to occur and may further update the state
       22       22                    of the connection.
       23       23        */
       24       24        XSP$PRESENTATION: PROC( PFPT) ALTRET;

     24  1 000000   000000 700200 xent  XSP$PRESENT* TSX0  ! X66_AUTO_1
         1 000001   000026 000001                    ZERO    22,1

       25       25        %INCLUDE B_SEGIDS_C;
       26      564        %INCLUDE B$JIT_C;
       27      878            %B$JIT0;
       28      967            %U$JIT1X;
       29      970            %M$JIT2;
       30      980            %F$JIT3X;
       31      983            %S$JIT4X;
       32      986            %J$JIT5X;
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:17   
       33      989            %A$JIT6X;
       34      992        %INCLUDE XSS_SESSION_E;
       35     1557        %INCLUDE XSP_PRESENTATION_E;
       36     1656        %INCLUDE XSP_PRESENTATION_M;
       37     3142            %XSP$PRIMITIVES( STCLASS="BASED( PFPT$)");
       38     4841            %XSP$GENERIC( FPTN=PFPT, STCLASS="");
       39     4937            %XSP$PSAP;
       40     4973        %INCLUDE XSP_INTERNAL_E;
       41     5247        %INCLUDE XSP_INTERNAL_M;
       42     5908            %XSP$VBLK( NAME=XSP_VBLK, STCLASS="CONSTANT SYMDEF");
       43     6054            %XSP$PCTX( NAME=PCTX, STCLASS="BASED( CTX$)");
       44     6210            %XSP$VBLK( NAME=VBLK, STCLASS=AUTO);
       45     6356        %INCLUDE UM_CP6;
       46     7208        %MACRO ERRORDEF( NAME=XSP_ERROR, STCLASS="CONSTANT SYMDEF", LVL=1, LAST=";",
       47     7209                         ERR#=0, SEV=0);
       48     7210            %VLP_ERRCODE( FPTN=NAME, STCLASS=STCLASS, FCG='XS', MID='P',
       49     7211                          MON='0'B, ERR#=ERR#, SEV=SEV);
       50     7212        %MEND;
       51     7213        %INCLUDE XSC_PERR_C;
       52     7290            %ERRORDEF( NAME=XSP_E$RDONLYFPT, ERR#=%E$RDONLYFPT);
       53     7338            /*E*  ERROR:  XSP-E$RDONLYFPT-0
       54     7339                MESSAGE:  FPT is read-only; must be writeable.
       55     7340            */
       56     7341            %ERRORDEF( NAME=XSP_E$BADCID, ERR#=%E$BADCID);
       57     7389            /*E*  ERROR:  XSP-E$BADCID-0
       58     7390                MESSAGE:  Illegal connection identifier.
       59     7391            */
       60     7392            %ERRORDEF( NAME=XSP_E$BADFNC, ERR#=%E$BADFNC);
       61     7440            /*E*  ERROR:  XSP-E$BADFNC-0
       62     7441                MESSAGE:  Illegal function code.
       63     7442            */
       64     7443            %ERRORDEF( NAME=XSP_E$STATE, ERR#=%E$STATE);
       65     7491            /*E*  ERROR:  XSP-E$STATE-0
       66     7492                MESSAGE:  Connection state prevents this action.
       67     7493            */
       68     7494            %ERRORDEF( NAME=XSP_E$ACTID, ERR#=%E$ACTID);
       69     7542            /*E*  ERROR:  XSP-E$ACTID-0
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:18   
       70     7543                MESSAGE:  ACTID contains an illegal value.
       71     7544            */
       72     7545            %ERRORDEF( NAME=XSP_E$CALLED, ERR#=%E$CALLED);
       73     7593            /*E*  ERROR:  XSP-E$CALLED-0
       74     7594                MESSAGE:  CALLED$ contains an illegal value.
       75     7595            */
       76     7596            %ERRORDEF( NAME=XSP_E$CALLING, ERR#=%E$CALLING);
       77     7644            /*E*  ERROR:  XSP-E$CALLING-0
       78     7645                MESSAGE:  CALLING$ contains an illegal value.
       79     7646            */
       80     7647            %ERRORDEF( NAME=XSP_E$CTXT, ERR#=%E$CTXT);
       81     7695            /*E*  ERROR:  XSP-E$CTXT-0
       82     7696                MESSAGE:  CTXT$ contains an illegal value.
       83     7697            */
       84     7698            %ERRORDEF( NAME=XSP_E$DATA, ERR#=%E$DATA);
       85     7746            /*E*  ERROR:  XSP-E$DATA-0
       86     7747                MESSAGE:  DATA$ contains an illegal value.
       87     7748            */
       88     7749            %ERRORDEF( NAME=XSP_E$DFLT, ERR#=%E$DFLT);
       89     7797            /*E*  ERROR:  XSP-E$DFLT-0
       90     7798                MESSAGE:  DFLT$ contains an illegal value.
       91     7799            */
       92     7800            %ERRORDEF( NAME=XSP_E$DFLTRSLT, ERR#=%E$DFLTRSLT);
       93     7848            /*E*  ERROR:  XSP-E$DFLTRSLT-0
       94     7849                MESSAGE:  DFLTRSLT contains an illegal value.
       95     7850            */
       96     7851            %ERRORDEF( NAME=XSP_E$ITOKENS, ERR#=%E$ITOKENS);
       97     7899            /*E*  ERROR:  XSP-E$ITOKENS-0
       98     7900                MESSAGE:  ITOKENS contains an illegal value.
       99     7901            */
      100     7902            %ERRORDEF( NAME=XSP_E$OACTID, ERR#=%E$OACTID);
      101     7950            /*E*  ERROR:  XSP-E$OACTID-0
      102     7951                MESSAGE:  OACTID contains an illegal value.
      103     7952            */
      104     7953            %ERRORDEF( NAME=XSP_E$OSCID, ERR#=%E$OSCID);
      105     8001            /*E*  ERROR:  XSP-E$OSCID-0
      106     8002                MESSAGE:  OSCID contains an illegal value.
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:19   
      107     8003            */
      108     8004            %ERRORDEF( NAME=XSP_E$PFU, ERR#=%E$PFU);
      109     8052            /*E*  ERROR:  XSP-E$PFU-0
      110     8053                MESSAGE:  PFU contains an illegal value.
      111     8054            */
      112     8055            %ERRORDEF( NAME=XSP_E$QOS, ERR#=%E$QOS);
      113     8103            /*E*  ERROR:  XSP-E$QOS-0
      114     8104                MESSAGE:  QOS contains an illegal value.
      115     8105            */
      116     8106            %ERRORDEF( NAME=XSP_E$REASON, ERR#=%E$REASON);
      117     8154            /*E*  ERROR:  XSP-E$REASON-0
      118     8155                MESSAGE:  REASON contains an illegal value.
      119     8156            */
      120     8157            %ERRORDEF( NAME=XSP_E$RESPONDING, ERR#=%E$RESPONDING);
      121     8205            /*E*  ERROR:  XSP-E$RESPONDING-0
      122     8206                MESSAGE:  RESPONDING$ contains an illegal value.
      123     8207            */
      124     8208            %ERRORDEF( NAME=XSP_E$RESULT, ERR#=%E$RESULT);
      125     8256            /*E*  ERROR:  XSP-E$RESULT-0
      126     8257                MESSAGE:  RESULT contains an illegal value.
      127     8258            */
      128     8259            %ERRORDEF( NAME=XSP_E$SERNUM, ERR#=%E$SERNUM);
      129     8307            /*E*  ERROR:  XSP-E$SERNUM-0
      130     8308                MESSAGE:  SERNUM contains an illegal value.
      131     8309            */
      132     8310            %ERRORDEF( NAME=XSP_E$SFU, ERR#=%E$SFU);
      133     8358            /*E*  ERROR:  XSP-E$SFU-0
      134     8359                MESSAGE:  SFU contains an illegal value.
      135     8360            */
      136     8361            %ERRORDEF( NAME=XSP_E$TOKENS, ERR#=%E$TOKENS);
      137     8409            /*E*  ERROR:  XSP-E$TOKENS-0
      138     8410                MESSAGE:  TOKENS contains an illegal value.
      139     8411            */
      140     8412            %ERRORDEF( NAME=XSP_E$TYPE, ERR#=%E$TYPE);
      141     8460            /*E*  ERROR:  XSP-E$TYPE-0
      142     8461                MESSAGE:  TYPE contains an illegal value.
      143     8462            */
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:20   
      144     8463
      145     8464    1       DCL XSP$CTXPTR ENTRY(2) ALTRET;
      146     8465    1       DCL XSP$CTXTMASKS ENTRY(1) ALTRET;
      147     8466    1       DCL XSP$DATAMASKS ENTRY(1) ALTRET;
      148     8467    1       DCL XSP$DFLTMASKS ENTRY(1) ALTRET;
      149     8468    1       DCL XSP$DUMPFPT ENTRY(1);
      150     8469    1       DCL XSP$MACHINE ENTRY(1) ALTRET;
      151     8470    1       DCL XSS$SCREECH ENTRY(1);
      152     8471
      153     8472    1       DCL B$JIT$ PTR SYMREF;
      154     8473    1       DCL XSS_TRACE SBIN SYMREF;
      155     8474
      156     8475    1       DCL CTX$ PTR;
      157     8476    1       DCL PCID SBIN;
      158     8477    1       DCL TEMP REDEF PCID SBIN;
      159     8478    1       DCL PFPT$ PTR;
      160     8479    1       DCL 1 PX REDEF PFPT$,
      161     8480    1            2 OFFSET UBIN(18) UNAL,
      162     8481    1            2 * BIT(6) UNAL,
      163     8482    1            2 SEGID BIT(12) UNAL;
      164     8483        %EJECT;
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:21   
      165     8484    1       PFPT$ = ADDR( PFPT);

   8484  1 000002   200003 236100                    LDQ     @PFPT,,AUTO
         1 000003   200022 756100                    STQ     PFPT$,,AUTO

      166     8485    2       IF PX.SEGID = %ISSID THEN DO;

   8485  1 000004   200022 236100                    LDQ     PFPT$,,AUTO
         1 000005   007777 376007                    ANQ     4095,DL
         1 000006   006000 116007                    CMPQ    3072,DL
         1 000007   000037 601000 1                  TNZ     s:8495

      167     8486    2           TEMP = 64 + PX.OFFSET / 1024;  /* page number of FPT's page */

   8486  1 000010   200022 236100                    LDQ     PFPT$,,AUTO
         1 000011   000022 772000                    QRL     18
         1 000012   000012 772000                    QRL     10
         1 000013   000100 036007                    ADLQ    64,DL
         1 000014   200021 756100                    STQ     PCID,,AUTO

      168     8487    3           IF TEMP >= B$JIT.PLL AND TEMP <= B$JIT.PUL THEN DO;

   8487  1 000015   000000 470400 xsym               LDP0    B$JIT$
         1 000016   000176 236100                    LDQ     126,,PR0
         1 000017   000022 772000                    QRL     18
         1 000020   200021 116100                    CMPQ    PCID,,AUTO
         1 000021   000037 605400 1                  TPNZ    s:8495
         1 000022   000176 236100                    LDQ     126,,PR0
         1 000023   777777 376007                    ANQ     -1,DL
         1 000024   200021 116100                    CMPQ    PCID,,AUTO
         1 000025   000037 604000 1                  TMI     s:8495

      169     8488                    /* user's FPT was allocated in CONSTANT storage */
      170     8489    3               IF XSP$GENERIC.ERROR = XSP_E$RDONLYFPT THEN

   8489  1 000026   200022 471500                    LDP1    PFPT$,,AUTO
         1 000027   100001 236100                    LDQ     1,,PR1
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:22   
         1 000030   000014 116000 0                  CMPQ    XSP_E$RDONLYFPT
         1 000031   000033 601000 1                  TNZ     s:8491

      171     8490    3                   ALTRETURN;

   8490  1 000032   000000 702200 xent               TSX2  ! X66_AALT

      172     8491    3               CALL XSS$SCREECH( XSP_E$RDONLYFPT);

   8491  1 000033   000001 630400 2                  EPPR0   1
         1 000034   000000 631400 2                  EPPR1   0
         1 000035   000000 701000 xent               TSX1    XSS$SCREECH
         1 000036   000000 011000                    NOP     0

      173     8492    3               END;

      174     8493    2           END;

      175     8494            /* Initialize returned error code */
      176     8495    1       XSP$GENERIC.ERROR = '0'B;

   8495  1 000037   200022 470500                    LDP0    PFPT$,,AUTO
         1 000040   000001 450100                    STZ     1,,PR0

      177     8496            /* Initialize AUTO copy of VBLK structure */
      178     8497    1       VBLK = XSP_VBLK;

   8497  1 000041   000100 100400                    MLR     fill='000'O
         1 000042   000000 000054 0                  ADSC9   XSP_VBLK                 cn=0,n=44
         1 000043   200004 000054                    ADSC9   VBLK,,AUTO               cn=0,n=44

      179     8498    1       VBLK.FPT$ = PFPT$;

   8498  1 000044   200022 236100                    LDQ     PFPT$,,AUTO
         1 000045   200005 756100                    STQ     VBLK+1,,AUTO

      180     8499            /* Determine which connection is being referred to */
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:23   
      181     8500    1       PCID = XSP$GENERIC.PCID;

   8500  1 000046   000000 236100                    LDQ     0,,PR0
         1 000047   000022 772000                    QRL     18
         1 000050   000777 376007                    ANQ     511,DL
         1 000051   200021 756100                    STQ     PCID,,AUTO

      182     8501    1       CALL XSP$CTXPTR( PCID, CTX$)

   8501  1 000052   200020 631500                    EPPR1   CTX$,,AUTO
         1 000053   200025 451500                    STP1    PFPT$+3,,AUTO
         1 000054   200021 633500                    EPPR3   PCID,,AUTO
         1 000055   200024 453500                    STP3    PFPT$+2,,AUTO
         1 000056   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000057   000002 631400 2                  EPPR1   2
         1 000060   000000 701000 xent               TSX1    XSP$CTXPTR
         1 000061   000063 702000 1                  TSX2    s:8503
         1 000062   000067 710000 1                  TRA     s:8507

      183     8502    2       WHENALTRETURN DO;

      184     8503    2           XSP$GENERIC.ERROR = XSP_E$BADCID;

   8503  1 000063   000015 236000 0                  LDQ     XSP_E$BADCID
         1 000064   200022 470500                    LDP0    PFPT$,,AUTO
         1 000065   000001 756100                    STQ     1,,PR0

      185     8504    2           ALTRETURN;

   8504  1 000066   000000 702200 xent               TSX2  ! X66_AALT

      186     8505    2           END;
      187     8506            /* Update AUTO VBLK context ptr */
      188     8507    1       VBLK.CTX$ = CTX$;

   8507  1 000067   200020 236100                    LDQ     CTX$,,AUTO
         1 000070   200004 756100                    STQ     VBLK,,AUTO
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:24   

      189     8508        %EJECT;
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:25   
      190     8509            /* Split depending on the Presentation function code requested */
      191     8510    2       DO CASE( XSP$GENERIC.FNC);

   8510  1 000071   200022 470500                    LDP0    PFPT$,,AUTO
         1 000072   000000 236100                    LDQ     0,,PR0
         1 000073   000033 772000                    QRL     27
         1 000074   000074 116007                    CMPQ    60,DL
         1 000075   000077 602006 1                  TNC     s:8510+6,QL
         1 000076   000650 710000 1                  TRA     s:8610
         1 000077   000650 710000 1                  TRA     s:8610
         1 000100   000173 710000 1                  TRA     s:8512
         1 000101   000650 710000 1                  TRA     s:8610
         1 000102   000176 710000 1                  TRA     s:8514
         1 000103   000650 710000 1                  TRA     s:8610
         1 000104   000201 710000 1                  TRA     s:8516
         1 000105   000650 710000 1                  TRA     s:8610
         1 000106   000212 710000 1                  TRA     s:8519
         1 000107   000650 710000 1                  TRA     s:8610
         1 000110   000223 710000 1                  TRA     s:8522
         1 000111   000650 710000 1                  TRA     s:8610
         1 000112   000226 710000 1                  TRA     s:8524
         1 000113   000650 710000 1                  TRA     s:8610
         1 000114   000231 710000 1                  TRA     s:8526
         1 000115   000650 710000 1                  TRA     s:8610
         1 000116   000242 710000 1                  TRA     s:8529
         1 000117   000650 710000 1                  TRA     s:8610
         1 000120   000253 710000 1                  TRA     s:8532
         1 000121   000650 710000 1                  TRA     s:8610
         1 000122   000272 710000 1                  TRA     s:8536
         1 000123   000650 710000 1                  TRA     s:8610
         1 000124   000311 710000 1                  TRA     s:8540
         1 000125   000650 710000 1                  TRA     s:8610
         1 000126   000322 710000 1                  TRA     s:8543
         1 000127   000650 710000 1                  TRA     s:8610
         1 000130   000333 710000 1                  TRA     s:8546
         1 000131   000650 710000 1                  TRA     s:8610
         1 000132   000374 710000 1                  TRA     s:8554
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:26   
         1 000133   000650 710000 1                  TRA     s:8610
         1 000134   000430 710000 1                  TRA     s:8562
         1 000135   000650 710000 1                  TRA     s:8610
         1 000136   000433 710000 1                  TRA     s:8564
         1 000137   000650 710000 1                  TRA     s:8610
         1 000140   000444 710000 1                  TRA     s:8567
         1 000141   000650 710000 1                  TRA     s:8610
         1 000142   000455 710000 1                  TRA     s:8570
         1 000143   000650 710000 1                  TRA     s:8610
         1 000144   000466 710000 1                  TRA     s:8573
         1 000145   000650 710000 1                  TRA     s:8610
         1 000146   000477 710000 1                  TRA     s:8576
         1 000147   000650 710000 1                  TRA     s:8610
         1 000150   000516 710000 1                  TRA     s:8580
         1 000151   000650 710000 1                  TRA     s:8610
         1 000152   000535 710000 1                  TRA     s:8584
         1 000153   000650 710000 1                  TRA     s:8610
         1 000154   000546 710000 1                  TRA     s:8587
         1 000155   000650 710000 1                  TRA     s:8610
         1 000156   000557 710000 1                  TRA     s:8590
         1 000157   000650 710000 1                  TRA     s:8610
         1 000160   000570 710000 1                  TRA     s:8593
         1 000161   000650 710000 1                  TRA     s:8610
         1 000162   000601 710000 1                  TRA     s:8596
         1 000163   000650 710000 1                  TRA     s:8610
         1 000164   000604 710000 1                  TRA     s:8598
         1 000165   000650 710000 1                  TRA     s:8610
         1 000166   000615 710000 1                  TRA     s:8601
         1 000167   000650 710000 1                  TRA     s:8610
         1 000170   000626 710000 1                  TRA     s:8604
         1 000171   000650 710000 1                  TRA     s:8610
         1 000172   000637 710000 1                  TRA     s:8607

      192     8511    2           CASE( %XSP_FNC_PACDREQ#);

      193     8512    2               VBLK.EVENT = %XSP_PEV_PACDREQ;

PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:27   
   8512  1 000173   000100 236007                    LDQ     64,DL
         1 000174   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000175   000653 710000 1                  TRA     s:8613

      194     8513    2           CASE( %XSP_FNC_PACDRSP#);

      195     8514    2               VBLK.EVENT = %XSP_PEV_PACDRSP;

   8514  1 000176   000102 236007                    LDQ     66,DL
         1 000177   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000200   000653 710000 1                  TRA     s:8613

      196     8515    2           CASE( %XSP_FNC_PACEREQ#);

      197     8516    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8516  1 000201   200004 631500                    EPPR1   VBLK,,AUTO
         1 000202   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000203   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000204   000000 631400 2                  EPPR1   0
         1 000205   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000206   000677 702000 1                  TSX2    BAD_DATA

      198     8517    2               VBLK.EVENT = %XSP_PEV_PACEREQ;

   8517  1 000207   000104 236007                    LDQ     68,DL
         1 000210   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000211   000653 710000 1                  TRA     s:8613

      199     8518    2           CASE( %XSP_FNC_PACERSP#);

      200     8519    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8519  1 000212   200004 631500                    EPPR1   VBLK,,AUTO
         1 000213   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000214   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000215   000000 631400 2                  EPPR1   0
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:28   
         1 000216   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000217   000677 702000 1                  TSX2    BAD_DATA

      201     8520    2               VBLK.EVENT = %XSP_PEV_PACERSP;

   8520  1 000220   000106 236007                    LDQ     70,DL
         1 000221   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000222   000653 710000 1                  TRA     s:8613

      202     8521    2           CASE( %XSP_FNC_PACIREQ#);

      203     8522    2               VBLK.EVENT = %XSP_PEV_PACIREQ;

   8522  1 000223   000110 236007                    LDQ     72,DL
         1 000224   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000225   000653 710000 1                  TRA     s:8613

      204     8523    2           CASE( %XSP_FNC_PACIRSP#);

      205     8524    2               VBLK.EVENT = %XSP_PEV_PACIRSP;

   8524  1 000226   000112 236007                    LDQ     74,DL
         1 000227   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000230   000653 710000 1                  TRA     s:8613

      206     8525    2           CASE( %XSP_FNC_PACRREQ#);

      207     8526    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8526  1 000231   200004 631500                    EPPR1   VBLK,,AUTO
         1 000232   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000233   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000234   000000 631400 2                  EPPR1   0
         1 000235   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000236   000677 702000 1                  TSX2    BAD_DATA

      208     8527    2               VBLK.EVENT = %XSP_PEV_PACRREQ;
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:29   

   8527  1 000237   000114 236007                    LDQ     76,DL
         1 000240   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000241   000653 710000 1                  TRA     s:8613

      209     8528    2           CASE( %XSP_FNC_PACSREQ#);

      210     8529    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8529  1 000242   200004 631500                    EPPR1   VBLK,,AUTO
         1 000243   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000244   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000245   000000 631400 2                  EPPR1   0
         1 000246   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000247   000677 702000 1                  TSX2    BAD_DATA

      211     8530    2               VBLK.EVENT = %XSP_PEV_PACSREQ;

   8530  1 000250   000116 236007                    LDQ     78,DL
         1 000251   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000252   000653 710000 1                  TRA     s:8613

      212     8531    2           CASE( %XSP_FNC_PALTREQ#);

      213     8532    2               CALL XSP$CTXTMASKS( VBLK) ALTRET( BAD_CTXT);

   8532  1 000253   200004 631500                    EPPR1   VBLK,,AUTO
         1 000254   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000255   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000256   000000 631400 2                  EPPR1   0
         1 000257   000000 701000 xent               TSX1    XSP$CTXTMASKS
         1 000260   000677 702000 1                  TSX2    BAD_DATA

      214     8533    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8533  1 000261   200004 630500                    EPPR0   VBLK,,AUTO
         1 000262   200024 450500                    STP0    PFPT$+2,,AUTO
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:30   
         1 000263   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000264   000000 631400 2                  EPPR1   0
         1 000265   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000266   000677 702000 1                  TSX2    BAD_DATA

      215     8534    2               VBLK.EVENT = %XSP_PEV_PALTREQ;

   8534  1 000267   000120 236007                    LDQ     80,DL
         1 000270   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000271   000653 710000 1                  TRA     s:8613

      216     8535    2           CASE( %XSP_FNC_PALTRSP#);

      217     8536    2               CALL XSP$CTXTMASKS( VBLK) ALTRET( BAD_CTXT);

   8536  1 000272   200004 631500                    EPPR1   VBLK,,AUTO
         1 000273   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000274   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000275   000000 631400 2                  EPPR1   0
         1 000276   000000 701000 xent               TSX1    XSP$CTXTMASKS
         1 000277   000677 702000 1                  TSX2    BAD_DATA

      218     8537    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8537  1 000300   200004 630500                    EPPR0   VBLK,,AUTO
         1 000301   200024 450500                    STP0    PFPT$+2,,AUTO
         1 000302   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000303   000000 631400 2                  EPPR1   0
         1 000304   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000305   000677 702000 1                  TSX2    BAD_DATA

      219     8538    2               VBLK.EVENT = %XSP_PEV_PALTRSP;

   8538  1 000306   000122 236007                    LDQ     82,DL
         1 000307   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000310   000653 710000 1                  TRA     s:8613

PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:31   
      220     8539    2           CASE( %XSP_FNC_PCADREQ#);

      221     8540    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8540  1 000311   200004 631500                    EPPR1   VBLK,,AUTO
         1 000312   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000313   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000314   000000 631400 2                  EPPR1   0
         1 000315   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000316   000677 702000 1                  TSX2    BAD_DATA

      222     8541    2               VBLK.EVENT = %XSP_PEV_PCADREQ;

   8541  1 000317   000124 236007                    LDQ     84,DL
         1 000320   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000321   000653 710000 1                  TRA     s:8613

      223     8542    2           CASE( %XSP_FNC_PCADRSP#);

      224     8543    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8543  1 000322   200004 631500                    EPPR1   VBLK,,AUTO
         1 000323   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000324   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000325   000000 631400 2                  EPPR1   0
         1 000326   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000327   000677 702000 1                  TSX2    BAD_DATA

      225     8544    2               VBLK.EVENT = %XSP_PEV_PCADRSP;

   8544  1 000330   000126 236007                    LDQ     86,DL
         1 000331   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000332   000653 710000 1                  TRA     s:8613

      226     8545    2           CASE( %XSP_FNC_PCONREQ#);

      227     8546    2               CALL XSP$CTXTMASKS( VBLK) ALTRET( BAD_CTXT);
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:32   

   8546  1 000333   200004 631500                    EPPR1   VBLK,,AUTO
         1 000334   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000335   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000336   000000 631400 2                  EPPR1   0
         1 000337   000000 701000 xent               TSX1    XSP$CTXTMASKS
         1 000340   000677 702000 1                  TSX2    BAD_DATA

      228     8547    2               CALL XSP$DFLTMASKS( VBLK) ALTRET( BAD_DFLT);

   8547  1 000341   200004 630500                    EPPR0   VBLK,,AUTO
         1 000342   200024 450500                    STP0    PFPT$+2,,AUTO
         1 000343   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000344   000000 631400 2                  EPPR1   0
         1 000345   000000 701000 xent               TSX1    XSP$DFLTMASKS
         1 000346   000677 702000 1                  TSX2    BAD_DATA

      229     8548    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8548  1 000347   200004 630500                    EPPR0   VBLK,,AUTO
         1 000350   200024 450500                    STP0    PFPT$+2,,AUTO
         1 000351   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000352   000000 631400 2                  EPPR1   0
         1 000353   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000354   000677 702000 1                  TSX2    BAD_DATA

      230     8549    2               PCTX.MODE = %CLIENT;

   8549  1 000355   200020 470500                    LDP0    CTX$,,AUTO
         1 000356   000003 236000 2                  LDQ     3
         1 000357   000000 356100                    ANSQ    0,,PR0

      231     8550    2               PCTX.FU = XSP$CONNECT.PFU;

   8550  1 000360   200020 470500                    LDP0    CTX$,,AUTO
         1 000361   200022 471500                    LDP1    PFPT$,,AUTO
         1 000362   100013 236100                    LDQ     11,,PR1
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:33   
         1 000363   600000 376003                    ANQ     -65536,DU
         1 000364   000022 772000                    QRL     18
         1 000365   000000 552110                    STBQ    0,'10'O,PR0

      232     8551    2               PCTX.SUR = XSP$CONNECT.SFU;

   8551  1 000366   100010 720100                    LXL0    8,,PR1
         1 000367   200020 470500                    LDP0    CTX$,,AUTO
         1 000370   000010 740100                    STX0    8,,PR0

      233     8552    2               VBLK.EVENT = %XSP_PEV_PCONREQ;

   8552  1 000371   000132 236007                    LDQ     90,DL
         1 000372   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000373   000653 710000 1                  TRA     s:8613

      234     8553    2           CASE( %XSP_FNC_PCONRSP#);

      235     8554    2               CALL XSP$CTXTMASKS( VBLK) ALTRET( BAD_CTXT);

   8554  1 000374   200004 631500                    EPPR1   VBLK,,AUTO
         1 000375   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000376   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000377   000000 631400 2                  EPPR1   0
         1 000400   000000 701000 xent               TSX1    XSP$CTXTMASKS
         1 000401   000677 702000 1                  TSX2    BAD_DATA

      236     8555    2               CALL XSP$DFLTMASKS( VBLK) ALTRET( BAD_DFLT);

   8555  1 000402   200004 630500                    EPPR0   VBLK,,AUTO
         1 000403   200024 450500                    STP0    PFPT$+2,,AUTO
         1 000404   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000405   000000 631400 2                  EPPR1   0
         1 000406   000000 701000 xent               TSX1    XSP$DFLTMASKS
         1 000407   000677 702000 1                  TSX2    BAD_DATA

      237     8556    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:34   

   8556  1 000410   200004 630500                    EPPR0   VBLK,,AUTO
         1 000411   200024 450500                    STP0    PFPT$+2,,AUTO
         1 000412   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000413   000000 631400 2                  EPPR1   0
         1 000414   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000415   000677 702000 1                  TSX2    BAD_DATA

      238     8557    2               IF XSP$CONNECT.RESULT ~= 0 THEN

   8557  1 000416   200022 470500                    LDP0    PFPT$,,AUTO
         1 000417   000010 236100                    LDQ     8,,PR0
         1 000420   000777 316003                    CANQ    511,DU
         1 000421   000425 600000 1                  TZE     s:8560

      239     8558    2                   VBLK.EVENT = %XSP_PEV_PCONRSN;

   8558  1 000422   000136 236007                    LDQ     94,DL
         1 000423   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000424   000653 710000 1                  TRA     s:8613

      240     8559    2               ELSE
      241     8560    2                   VBLK.EVENT = %XSP_PEV_PCONRSP;

   8560  1 000425   000134 236007                    LDQ     92,DL
         1 000426   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000427   000653 710000 1                  TRA     s:8613

      242     8561    2           CASE( %XSP_FNC_PCTGREQ#);

      243     8562    2               VBLK.EVENT = %XSP_PEV_PCTGREQ;

   8562  1 000430   000130 236007                    LDQ     88,DL
         1 000431   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000432   000653 710000 1                  TRA     s:8613

      244     8563    2           CASE( %XSP_FNC_PDATREQ#);
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:35   

      245     8564    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8564  1 000433   200004 631500                    EPPR1   VBLK,,AUTO
         1 000434   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000435   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000436   000000 631400 2                  EPPR1   0
         1 000437   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000440   000677 702000 1                  TSX2    BAD_DATA

      246     8565    2               VBLK.EVENT = %XSP_PEV_PDATREQ;

   8565  1 000441   000140 236007                    LDQ     96,DL
         1 000442   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000443   000653 710000 1                  TRA     s:8613

      247     8566    2           CASE( %XSP_FNC_PEXPREQ#);

      248     8567    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8567  1 000444   200004 631500                    EPPR1   VBLK,,AUTO
         1 000445   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000446   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000447   000000 631400 2                  EPPR1   0
         1 000450   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000451   000677 702000 1                  TSX2    BAD_DATA

      249     8568    2               VBLK.EVENT = %XSP_PEV_PEXPREQ;

   8568  1 000452   000142 236007                    LDQ     98,DL
         1 000453   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000454   000653 710000 1                  TRA     s:8613

      250     8569    2           CASE( %XSP_FNC_PRELREQ#);

      251     8570    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:36   
   8570  1 000455   200004 631500                    EPPR1   VBLK,,AUTO
         1 000456   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000457   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000460   000000 631400 2                  EPPR1   0
         1 000461   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000462   000677 702000 1                  TSX2    BAD_DATA

      252     8571    2               VBLK.EVENT = %XSP_PEV_PRELREQ;

   8571  1 000463   000150 236007                    LDQ     104,DL
         1 000464   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000465   000653 710000 1                  TRA     s:8613

      253     8572    2           CASE( %XSP_FNC_PRELRSP#);

      254     8573    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8573  1 000466   200004 631500                    EPPR1   VBLK,,AUTO
         1 000467   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000470   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000471   000000 631400 2                  EPPR1   0
         1 000472   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000473   000677 702000 1                  TSX2    BAD_DATA

      255     8574    2               VBLK.EVENT = %XSP_PEV_PRELRSP;

   8574  1 000474   000152 236007                    LDQ     106,DL
         1 000475   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000476   000653 710000 1                  TRA     s:8613

      256     8575    2           CASE( %XSP_FNC_PRSXREQ#);

      257     8576    2               CALL XSP$CTXTMASKS( VBLK) ALTRET( BAD_CTXT);

   8576  1 000477   200004 631500                    EPPR1   VBLK,,AUTO
         1 000500   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000501   200024 630500                    EPPR0   PFPT$+2,,AUTO
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:37   
         1 000502   000000 631400 2                  EPPR1   0
         1 000503   000000 701000 xent               TSX1    XSP$CTXTMASKS
         1 000504   000677 702000 1                  TSX2    BAD_DATA

      258     8577    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8577  1 000505   200004 630500                    EPPR0   VBLK,,AUTO
         1 000506   200024 450500                    STP0    PFPT$+2,,AUTO
         1 000507   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000510   000000 631400 2                  EPPR1   0
         1 000511   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000512   000677 702000 1                  TSX2    BAD_DATA

      259     8578    2               VBLK.EVENT = %XSP_PEV_PRSXREQ;

   8578  1 000513   000156 236007                    LDQ     110,DL
         1 000514   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000515   000653 710000 1                  TRA     s:8613

      260     8579    2           CASE( %XSP_FNC_PRSXRSP#);

      261     8580    2               CALL XSP$CTXTMASKS( VBLK) ALTRET( BAD_CTXT);

   8580  1 000516   200004 631500                    EPPR1   VBLK,,AUTO
         1 000517   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000520   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000521   000000 631400 2                  EPPR1   0
         1 000522   000000 701000 xent               TSX1    XSP$CTXTMASKS
         1 000523   000677 702000 1                  TSX2    BAD_DATA

      262     8581    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8581  1 000524   200004 630500                    EPPR0   VBLK,,AUTO
         1 000525   200024 450500                    STP0    PFPT$+2,,AUTO
         1 000526   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000527   000000 631400 2                  EPPR1   0
         1 000530   000000 701000 xent               TSX1    XSP$DATAMASKS
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:38   
         1 000531   000677 702000 1                  TSX2    BAD_DATA

      263     8582    2               VBLK.EVENT = %XSP_PEV_PRSXRSP;

   8582  1 000532   000160 236007                    LDQ     112,DL
         1 000533   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000534   000653 710000 1                  TRA     s:8613

      264     8583    2           CASE( %XSP_FNC_PSMAREQ#);

      265     8584    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8584  1 000535   200004 631500                    EPPR1   VBLK,,AUTO
         1 000536   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000537   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000540   000000 631400 2                  EPPR1   0
         1 000541   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000542   000677 702000 1                  TSX2    BAD_DATA

      266     8585    2               VBLK.EVENT = %XSP_PEV_PSMAREQ;

   8585  1 000543   000162 236007                    LDQ     114,DL
         1 000544   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000545   000653 710000 1                  TRA     s:8613

      267     8586    2           CASE( %XSP_FNC_PSMARSP#);

      268     8587    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8587  1 000546   200004 631500                    EPPR1   VBLK,,AUTO
         1 000547   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000550   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000551   000000 631400 2                  EPPR1   0
         1 000552   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000553   000677 702000 1                  TSX2    BAD_DATA

      269     8588    2               VBLK.EVENT = %XSP_PEV_PSMARSP;
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:39   

   8588  1 000554   000164 236007                    LDQ     116,DL
         1 000555   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000556   000653 710000 1                  TRA     s:8613

      270     8589    2           CASE( %XSP_FNC_PSMIREQ#);

      271     8590    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8590  1 000557   200004 631500                    EPPR1   VBLK,,AUTO
         1 000560   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000561   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000562   000000 631400 2                  EPPR1   0
         1 000563   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000564   000677 702000 1                  TSX2    BAD_DATA

      272     8591    2               VBLK.EVENT = %XSP_PEV_PSMIREQ;

   8591  1 000565   000166 236007                    LDQ     118,DL
         1 000566   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000567   000653 710000 1                  TRA     s:8613

      273     8592    2           CASE( %XSP_FNC_PSMIRSP#);

      274     8593    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8593  1 000570   200004 631500                    EPPR1   VBLK,,AUTO
         1 000571   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000572   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000573   000000 631400 2                  EPPR1   0
         1 000574   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000575   000677 702000 1                  TSX2    BAD_DATA

      275     8594    2               VBLK.EVENT = %XSP_PEV_PSMIRSP;

   8594  1 000576   000170 236007                    LDQ     120,DL
         1 000577   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:40   
         1 000600   000653 710000 1                  TRA     s:8613

      276     8595    2           CASE( %XSP_FNC_PTKGREQ#);

      277     8596    2               VBLK.EVENT = %XSP_PEV_PTKGREQ;

   8596  1 000601   000144 236007                    LDQ     100,DL
         1 000602   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000603   000653 710000 1                  TRA     s:8613

      278     8597    2           CASE( %XSP_FNC_PTKPREQ#);

      279     8598    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8598  1 000604   200004 631500                    EPPR1   VBLK,,AUTO
         1 000605   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000606   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000607   000000 631400 2                  EPPR1   0
         1 000610   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000611   000677 702000 1                  TSX2    BAD_DATA

      280     8599    2               VBLK.EVENT = %XSP_PEV_PTKPREQ;

   8599  1 000612   000146 236007                    LDQ     102,DL
         1 000613   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000614   000653 710000 1                  TRA     s:8613

      281     8600    2           CASE( %XSP_FNC_PTYDREQ#);

      282     8601    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8601  1 000615   200004 631500                    EPPR1   VBLK,,AUTO
         1 000616   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000617   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000620   000000 631400 2                  EPPR1   0
         1 000621   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000622   000677 702000 1                  TSX2    BAD_DATA
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:41   

      283     8602    2               VBLK.EVENT = %XSP_PEV_PTYDREQ;

   8602  1 000623   000172 236007                    LDQ     122,DL
         1 000624   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000625   000653 710000 1                  TRA     s:8613

      284     8603    2           CASE( %XSP_FNC_PUABREQ#);

      285     8604    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8604  1 000626   200004 631500                    EPPR1   VBLK,,AUTO
         1 000627   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000630   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000631   000000 631400 2                  EPPR1   0
         1 000632   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000633   000677 702000 1                  TSX2    BAD_DATA

      286     8605    2               VBLK.EVENT = %XSP_PEV_PUABREQ;

   8605  1 000634   000174 236007                    LDQ     124,DL
         1 000635   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000636   000653 710000 1                  TRA     s:8613

      287     8606    2           CASE( %XSP_FNC_PUERREQ#);

      288     8607    2               CALL XSP$DATAMASKS( VBLK) ALTRET( BAD_DATA);

   8607  1 000637   200004 631500                    EPPR1   VBLK,,AUTO
         1 000640   200024 451500                    STP1    PFPT$+2,,AUTO
         1 000641   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000642   000000 631400 2                  EPPR1   0
         1 000643   000000 701000 xent               TSX1    XSP$DATAMASKS
         1 000644   000677 702000 1                  TSX2    BAD_DATA

      289     8608    2               VBLK.EVENT = %XSP_PEV_PUERREQ;

PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:42   
   8608  1 000645   000176 236007                    LDQ     126,DL
         1 000646   200012 552104                    STBQ    VBLK+6,'04'O,AUTO
         1 000647   000653 710000 1                  TRA     s:8613

      290     8609    2           CASE( ELSE);

      291     8610    2               XSP$GENERIC.ERROR = XSP_E$BADFNC;

   8610  1 000650   000016 236000 0                  LDQ     XSP_E$BADFNC
         1 000651   000001 756100                    STQ     1,,PR0

      292     8611    2               ALTRETURN;

   8611  1 000652   000000 702200 xent               TSX2  ! X66_AALT

      293     8612    2           END;

      294     8613    1       IF XSS_TRACE > 0 THEN

   8613  1 000653   000000 235000 xsym               LDA     XSS_TRACE
         1 000654   000661 604400 1                  TMOZ    s:8615

      295     8614    1           CALL XSP$DUMPFPT( XSP$GENERIC);

   8614  1 000655   200022 630500                    EPPR0   PFPT$,,AUTO
         1 000656   000000 631400 2                  EPPR1   0
         1 000657   000000 701000 xent               TSX1    XSP$DUMPFPT
         1 000660   000000 011000                    NOP     0

      296     8615    1       CALL XSP$MACHINE( VBLK)

   8615  1 000661   200004 630500                    EPPR0   VBLK,,AUTO
         1 000662   200024 450500                    STP0    PFPT$+2,,AUTO
         1 000663   200024 630500                    EPPR0   PFPT$+2,,AUTO
         1 000664   000000 631400 2                  EPPR1   0
         1 000665   000000 701000 xent               TSX1    XSP$MACHINE
         1 000666   000670 702000 1                  TSX2    s:8617
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:43   
         1 000667   000676 710000 1                  TRA     s:8622

      297     8616    2       WHENALTRETURN DO;

      298     8617    2           IF XSP$GENERIC.ERROR = '0'O THEN

   8617  1 000670   200022 470500                    LDP0    PFPT$,,AUTO
         1 000671   000001 235100                    LDA     1,,PR0
         1 000672   000675 601000 1                  TNZ     GETOUT

      299     8618    2               XSP$GENERIC.ERROR = XSP_E$STATE;

   8618  1 000673   000017 236000 0                  LDQ     XSP_E$STATE
         1 000674   000001 756100                    STQ     1,,PR0

      300     8619    2   GETOUT:
      301     8620    2           ALTRETURN;

   8620  1 000675   000000 702200 xent  GETOUT       TSX2  ! X66_AALT

      302     8621    2           END;
      303     8622    1       RETURN;

   8622  1 000676   000000 702200 xent               TSX2  ! X66_ARET

   8613  1 000677                       BAD_DATA     null
   8613  1 000677                       BAD_DFLT     null
   8613  1 000677                       BAD_CTXT     null
      304     8623        %EJECT;
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:44   
      305     8624    1   BAD_DATA: ;
      306     8625    1   BAD_DFLT: ;
      307     8626    1   BAD_CTXT: ;
      308     8627    1   BAD_VIBES:
      309     8628            /* altreturn with error code set */
      310     8629    1       ALTRETURN;

   8629  1 000677   000000 702200 xent  BAD_VIBES    TSX2  ! X66_AALT

XSP_VBLK
 Sect OctLoc
   0     000   000000 006014   000000 006014   000000 006014   000000 000000    ................
   0     004   000000 006014   000000 000000   000000 000000   000000 000000    ................
   0     010   000000 000000   000000 000000   000000 000000                    ............

XSP_E$RDONLYFPT
 Sect OctLoc
   0     014   302320 000200                                                    ....

XSP_E$BADCID
 Sect OctLoc
   0     015   302320 000010                                                    ....

XSP_E$BADFNC
 Sect OctLoc
   0     016   302320 000020                                                    ....

XSP_E$STATE
 Sect OctLoc
   0     017   302320 000030                                                    ....

(unnamed)
 Sect OctLoc
   0     020   302320 000240   302320 000260   302320 000270   302320 000500    ................
   0     024   302320 000310   302320 000520   302320 000530   302320 000320    ................
   0     030   302320 000330   302320 000340   302320 000550   302320 000350    ................
   0     034   302320 000360   302320 000370   302320 000400   302320 000410    ................
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:45   
   0     040   302320 000420   302320 000430   302320 000440                    ............

(unnamed)
 Sect OctLoc
   2     000   000001 000000   000014 006000   000002 000000   777777 777776    ................
      311     8630
      312     8631    1       END XSP$PRESENTATION;
      313     8632        %EOD;

PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:46   
--  Include file information  --

   XSC_PERR_C.:XSA1TOU  is referenced.
   UM_CP6.:E05OU  is referenced.
   XSP_INTERNAL_M.:XSA1TOU  is referenced.
   XSP_INTERNAL_E.:XSA1TOU  is referenced.
   XSP_PRESENTATION_M.:XSA1TOU  is referenced.
   XSP_PRESENTATION_E.:XSA1TOU  is referenced.
   XSS_SESSION_E.:XSA1TOU  is referenced.
   B$JIT_C.:LIB_E05  is referenced.
   B_SEGIDS_C.:LIB_E05  is referenced.
      No diagnostics issued in procedure XSP$PRESENTATION.
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:47   

 **** Variables and constants ****

  ****  Section 000 RoData XSP$PRESENTATION

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    15-0-0/w STRC        r     1 XSP_E$BADCID              16-0-0/w STRC        r     1 XSP_E$BADFNC
    14-0-0/w STRC        r     1 XSP_E$RDONLYFPT           17-0-0/w STRC        r     1 XSP_E$STATE
     0-0-0/d STRC(396)   r     1 XSP_VBLK

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @PFPT                     20-0-0/w PTR         r     1 CTX$
    21-0-0/w SBIN        r     1 PCID                      *0-0-0/w STRC(504)   r     1 PFPT
    22-0-0/w PTR         r     1 PFPT$                     22-0-0/w STRC        r     1 PX
    21-0-0/w SBIN        r     1 TEMP                       4-0-0/d STRC(396)   r     1 VBLK

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$JIT$                     0-0-0/w SBIN        r     1 XSS_TRACE

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(8856)  r     1 B$JIT                      0-0-0/w STRC(468)   r     1 PCTX
     0-0-0/w STRC(398)   r     1 XSP$CONNECT                0-0-0/w STRC(504)   r     1 XSP$GENERIC
     0-0-0/c ASTR(9)     r     1 XSP$PSAP

PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:48   

   Procedure XSP$PRESENTATION requires 448 words for executable code.
   Procedure XSP$PRESENTATION requires 22 words of local(AUTO) storage.
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:49   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:50   
          MINI XREF LISTING

B$JIT.ERR.MID
       885**DCL       885--REDEF
B$JIT.JRESPEAK
       975**DCL       976--REDEF
B$JIT.PLL
       971**DCL      8487>>IF
B$JIT.PUL
       971**DCL      8487>>IF
B$JIT$
      8472**DCL       879--IMP-PTR  8487>>IF       8487>>IF
BAD_CTXT
      8613**LABEL    8532--CALLALT  8536--CALLALT  8546--CALLALT  8554--CALLALT  8576--CALLALT  8580--CALLALT
BAD_DATA
      8613**LABEL    8516--CALLALT  8519--CALLALT  8526--CALLALT  8529--CALLALT  8533--CALLALT  8537--CALLALT
      8540--CALLALT  8543--CALLALT  8548--CALLALT  8556--CALLALT  8564--CALLALT  8567--CALLALT  8570--CALLALT
      8573--CALLALT  8577--CALLALT  8581--CALLALT  8584--CALLALT  8587--CALLALT  8590--CALLALT  8593--CALLALT
      8598--CALLALT  8601--CALLALT  8604--CALLALT  8607--CALLALT
BAD_DFLT
      8613**LABEL    8547--CALLALT  8555--CALLALT
CTX$
      8475**DCL      6072--IMP-PTR  8501<>CALL     8507>>ASSIGN   8549>>ASSIGN   8550>>ASSIGN   8551>>ASSIGN
PCID
      8476**DCL      8477--REDEF    8500<<ASSIGN   8501<>CALL
PCTX.ACTDCSMASK
      6158**DCL      6161--REDEF
PCTX.CURDCSMASK
      6143**DCL      6146--REDEF
PCTX.FU
      6098**DCL      8550<<ASSIGN
PCTX.HISTZ
      6201**DCL      6202--REDEF
PCTX.INIDCSMASK
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:51   
      6151**DCL      6154--REDEF
PCTX.MODE
      6121**DCL      8549<<ASSIGN
PCTX.SUR
      6181**DCL      8551<<ASSIGN
PFPT
      4858**DCL        24--PROC     8484--ASSIGN
PFPT.ERRDEF
      4904**DCL      4924--REDEF
PFPT$
      8478**DCL      3160--IMP-PTR  3256--IMP-PTR  3314--IMP-PTR  3379--IMP-PTR  3437--IMP-PTR  3528--IMP-PTR
      3603--IMP-PTR  3664--IMP-PTR  3722--IMP-PTR  3867--IMP-PTR  3961--IMP-PTR  4019--IMP-PTR  4077--IMP-PTR
      4135--IMP-PTR  4193--IMP-PTR  4252--IMP-PTR  4357--IMP-PTR  4423--IMP-PTR  4489--IMP-PTR  4585--IMP-PTR
      4682--IMP-PTR  4740--IMP-PTR  4798--IMP-PTR  8479--REDEF    8484<<ASSIGN   8489>>IF       8495>>ASSIGN
      8498>>ASSIGN   8500>>ASSIGN   8503>>ASSIGN   8510>>DOCASE   8550>>ASSIGN   8551>>ASSIGN   8557>>IF
      8610>>ASSIGN   8614>>CALL     8617>>IF       8618>>ASSIGN
PX.OFFSET
      8480**DCL      8486>>ASSIGN
PX.SEGID
      8482**DCL      8485>>IF
TEMP
      8477**DCL      8486<<ASSIGN   8487>>IF       8487>>IF
VBLK
      6227**DCL      8497<<ASSIGN   8516<>CALL     8519<>CALL     8526<>CALL     8529<>CALL     8532<>CALL
      8533<>CALL     8536<>CALL     8537<>CALL     8540<>CALL     8543<>CALL     8546<>CALL     8547<>CALL
      8548<>CALL     8554<>CALL     8555<>CALL     8556<>CALL     8564<>CALL     8567<>CALL     8570<>CALL
      8573<>CALL     8576<>CALL     8577<>CALL     8580<>CALL     8581<>CALL     8584<>CALL     8587<>CALL
      8590<>CALL     8593<>CALL     8598<>CALL     8601<>CALL     8604<>CALL     8607<>CALL     8615<>CALL
VBLK.CTX$
      6237**DCL      8507<<ASSIGN
VBLK.DATMASK
      6343**DCL      6346--REDEF
VBLK.DEFMASK
      6327**DCL      6330--REDEF
VBLK.DELMASK
      6335**DCL      6338--REDEF
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:52   
VBLK.EVENT
      6322**DCL      8512<<ASSIGN   8514<<ASSIGN   8517<<ASSIGN   8520<<ASSIGN   8522<<ASSIGN   8524<<ASSIGN
      8527<<ASSIGN   8530<<ASSIGN   8534<<ASSIGN   8538<<ASSIGN   8541<<ASSIGN   8544<<ASSIGN   8552<<ASSIGN
      8558<<ASSIGN   8560<<ASSIGN   8562<<ASSIGN   8565<<ASSIGN   8568<<ASSIGN   8571<<ASSIGN   8574<<ASSIGN
      8578<<ASSIGN   8582<<ASSIGN   8585<<ASSIGN   8588<<ASSIGN   8591<<ASSIGN   8594<<ASSIGN   8596<<ASSIGN
      8599<<ASSIGN   8602<<ASSIGN   8605<<ASSIGN   8608<<ASSIGN
VBLK.FPT$
      6241**DCL      8498<<ASSIGN
VBLK.SPIMASK
      6351**DCL      6354--REDEF
XSP$ACTIVITY_DISCARD.ERRDEF
      3266**DCL      3286--REDEF
XSP$ACTIVITY_END.ERRDEF
      3328**DCL      3348--REDEF
XSP$ACTIVITY_INTERRUPT.ERRDEF
      3389**DCL      3409--REDEF
XSP$ACTIVITY_RESUME.ERRDEF
      3453**DCL      3473--REDEF
XSP$ACTIVITY_START.ERRDEF
      3543**DCL      3563--REDEF
XSP$ALTER_CONTEXT.ERRDEF
      3612**DCL      3632--REDEF
XSP$CAPABILITY_DATA.ERRDEF
      3673**DCL      3693--REDEF
XSP$CONNECT.CALLED$
      3817**DCL      3818--REDEF
XSP$CONNECT.DFLT$
      3807**DCL      3808--REDEF
XSP$CONNECT.ERRDEF
      3776**DCL      3796--REDEF
XSP$CONNECT.PFU
      3846**DCL      8550>>ASSIGN
XSP$CONNECT.RESULT
      3827**DCL      8557>>IF
XSP$CONNECT.SFU
      3828**DCL      8551>>ASSIGN
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:53   
XSP$CONTROL_GIVE.ERRDEF
      3913**DCL      3933--REDEF
XSP$CTXPTR
      8464**DCL-ENT  8501--CALL
XSP$CTXTMASKS
      8465**DCL-ENT  8532--CALL     8536--CALL     8546--CALL     8554--CALL     8576--CALL     8580--CALL
XSP$DATA.ERRDEF
      3970**DCL      3990--REDEF
XSP$DATAMASKS
      8466**DCL-ENT  8516--CALL     8519--CALL     8526--CALL     8529--CALL     8533--CALL     8537--CALL
      8540--CALL     8543--CALL     8548--CALL     8556--CALL     8564--CALL     8567--CALL     8570--CALL
      8573--CALL     8577--CALL     8581--CALL     8584--CALL     8587--CALL     8590--CALL     8593--CALL
      8598--CALL     8601--CALL     8604--CALL     8607--CALL
XSP$DFLTMASKS
      8467**DCL-ENT  8547--CALL     8555--CALL
XSP$DUMPFPT
      8468**DCL-ENT  8614--CALL
XSP$EXPEDITED_DATA.ERRDEF
      4028**DCL      4048--REDEF
XSP$GENERIC
      3160**DCL      8614<>CALL
XSP$GENERIC.ERRDEF
      3206**DCL      3226--REDEF
XSP$GENERIC.ERROR
      3226**DCL      8489>>IF       8495<<ASSIGN   8503<<ASSIGN   8610<<ASSIGN   8617>>IF       8618<<ASSIGN
XSP$GENERIC.FNC
      3166**DCL      8510>>DOCASE
XSP$GENERIC.PCID
      3167**DCL      8500>>ASSIGN
XSP$MACHINE
      8469**DCL-ENT  8615--CALL
XSP$PSAP.LEN
      4969**DCL      4970--IMP-SIZ
XSP$P_ABORT.ERRDEF
      4087**DCL      4107--REDEF
XSP$P_EXCEPTION_REPORT.ERRDEF
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:54   
      4145**DCL      4165--REDEF
XSP$RELEASE.ERRDEF
      4203**DCL      4223--REDEF
XSP$RESYNCHRONIZE.ERRDEF
      4305**DCL      4325--REDEF
XSP$SYNC_MAJOR.ERRDEF
      4372**DCL      4392--REDEF
XSP$SYNC_MINOR.ERRDEF
      4438**DCL      4458--REDEF
XSP$TOKEN_GIVE.ERRDEF
      4537**DCL      4557--REDEF
XSP$TOKEN_PLEASE.ERRDEF
      4633**DCL      4653--REDEF
XSP$TYPED_DATA.ERRDEF
      4691**DCL      4711--REDEF
XSP$U_ABORT.ERRDEF
      4749**DCL      4769--REDEF
XSP$U_EXCEPTION_REPORT.ERRDEF
      4808**DCL      4828--REDEF
XSP_E$BADCID
      7355**DCL      8503>>ASSIGN
XSP_E$BADFNC
      7406**DCL      8610>>ASSIGN
XSP_E$RDONLYFPT
      7304**DCL      8489>>IF       8491<>CALL
XSP_E$STATE
      7457**DCL      8618>>ASSIGN
XSP_VBLK
      5925**DCL      8497>>ASSIGN
XSP_VBLK.DATMASK
      6041**DCL      6044--REDEF
XSP_VBLK.DEFMASK
      6025**DCL      6028--REDEF
XSP_VBLK.DELMASK
      6033**DCL      6036--REDEF
XSP_VBLK.SPIMASK
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:55   
      6049**DCL      6052--REDEF
XSS$SCREECH
      8470**DCL-ENT  8491--CALL
XSS_TRACE
      8473**DCL      8613>>IF
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:56   
              *** CROSS REFERENCE LISTING ***
    **     DENOTES     IDENTIFIER DEFINITION
    <<                 IDENTIFIER'S VALUE SET
    >>                 IDENTIFIER'S VALUE USED
    <>                 IDENTIFIER SET AND/OR USED
    --                 IDENTIFIER REFERENCED
PL6.E3A0      #001=XSP$PRESENTATION File=XSP$PRESENTATION.:XSA1TSI               WED 10/01/97 12:06 Page:57   
              MINI UREF LISTING

BAD_VIBES    8629**LABEL
GETOUT    8620**LABEL
XSP$PRESENTATION      24**PROC
XSP_E$ACTID    7508**DCL
XSP_E$CALLED    7559**DCL
XSP_E$CALLING    7610**DCL
XSP_E$CTXT    7661**DCL
XSP_E$DATA    7712**DCL
XSP_E$DFLT    7763**DCL
XSP_E$DFLTRSLT    7814**DCL
XSP_E$ITOKENS    7865**DCL
XSP_E$OACTID    7916**DCL
XSP_E$OSCID    7967**DCL
XSP_E$PFU    8018**DCL
XSP_E$QOS    8069**DCL
XSP_E$REASON    8120**DCL
XSP_E$RESPONDING    8171**DCL
XSP_E$RESULT    8222**DCL
XSP_E$SERNUM    8273**DCL
XSP_E$SFU    8324**DCL
XSP_E$TOKENS    8375**DCL
XSP_E$TYPE    8426**DCL

PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:58   
      314        1        /*T***********************************************************/
      315        2        /*T*                                                         */
      316        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      317        4        /*T*                                                         */
      318        5        /*T***********************************************************/
      319        6        /*F*
      320        7                NAME:   XSP$COMMINIT
      321        8                PURPOSE:
      322        9                    This routine is called to set up a Presentation connection path.
      323       10                DESCRIPTION:
      324       11                    First we call the Session path init routine to do what it needs
      325       12                    to do (allocate Session context and set up a DCB's no-wait read),
      326       13                    then we allocate Presentation context and init it.
      327       14        */
      328       15        XSP$COMMINIT: PROC( CCB) ALTRET;
      329       16        %INCLUDE B_SEGIDS_C;
      330      555        %INCLUDE B$JIT_C;
      331      869            %B$JIT0;
      332      958            %U$JIT1X;
      333      961            %M$JIT2;
      334      971            %F$JIT3X;
      335      974            %S$JIT4X;
      336      977            %J$JIT5X;
      337      980            %A$JIT6X;
      338      983        %INCLUDE XSC_COMMON_M;
      339     1636            %XSC$CCB( NAME=CCB, STCLASS="");
      340     1933        %INCLUDE XSP_PRESENTATION_E;
      341     2032        %INCLUDE XSP_PRESENTATION_M;
      342     3518            %XSP$GENERIC;
      343     3614        %INCLUDE XSP_INTERNAL_E;
      344     3888        %INCLUDE XSP_INTERNAL_M;
      345     4549            %XSP$PCTX( NAME=PCTX, STCLASS="BASED( CTX$)");
      346     4705        %INCLUDE UM_CP6;
      347     5557        %MACRO ERRORDEF( NAME=XSP_ERROR, STCLASS="CONSTANT SYMDEF", LVL=1, LAST=";",
      348     5558                         ERR#=0, SEV=0);
      349     5559            %VLP_ERRCODE( FPTN=NAME, STCLASS=STCLASS, FCG='XS', MID='P',
      350     5560                          MON='0'B, ERR#=ERR#, SEV=SEV);
PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:59   
      351     5561        %MEND;
      352     5562        %INCLUDE XSC_PERR_C;
      353     5639            %ERRORDEF( NAME=XSP_E$RDONLYCCB, ERR#=%E$RDONLYCCB);
      354     5687            /*E*  ERROR:  XSP-E$RDONLYCCB-0
      355     5688                MESSAGE:  CCB is read-only; must be writeable.
      356     5689            */
      357     5690
      358     5691    1       DCL XSP$CTXPTR ENTRY(2) ALTRET;
      359     5692    1       DCL XSP$GETCTX ENTRY(2) ALTRET;
      360     5693    1       DCL XSP$RELCTX ENTRY(1) ALTRET;
      361     5694    1       DCL XSP$SRECV ENTRY(1) ALTRET;
      362     5695    1       DCL XSS$COMMINIT ENTRY(1) ALTRET;
      363     5696    1       DCL XSS$COMMTERM ENTRY(1) ALTRET;
      364     5697    1       DCL XSS$SCREECH ENTRY(1);
      365     5698
      366     5699    1       DCL B$JIT$ PTR SYMREF;
      367     5700
      368     5701    1       DCL CTX$ PTR;
      369     5702    1       DCL PCID SBIN;
      370     5703    1       DCL TEMP REDEF PCID SBIN;
      371     5704    1       DCL P PTR;
      372     5705    1       DCL 1 PX REDEF P,
      373     5706    1            2 OFFSET UBIN(18) UNAL,
      374     5707    1            2 * BIT(6) UNAL,
      375     5708    1            2 SEGID BIT(12) UNAL;
      376     5709        %EJECT;
PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:60   
      377     5710    1       P = ADDR( CCB);
      378     5711    2       IF PX.SEGID = %ISSID THEN DO;
      379     5712    2           TEMP = 64 + PX.OFFSET / 1024;  /* page number of CCB's page */
      380     5713    3           IF TEMP >= B$JIT.PLL AND TEMP <= B$JIT.PUL THEN DO;
      381     5714                    /* user's FPT was allocated in CONSTANT storage */
      382     5715    3               IF CCB.ERROR = XSP_E$RDONLYCCB THEN
      383     5716    3                   ALTRETURN;
      384     5717    3               CALL XSS$SCREECH( XSP_E$RDONLYCCB);
      385     5718    3               END;
      386     5719    2           END;
      387     5720            /* Initialize returned error code */
      388     5721    1       CCB.ERROR = '0'B;
      389     5722            /* have Session initialize first */
      390     5723    1       CCB.SESS$ = ENTADDR( XSP$SRECV);
      391     5724    1       CALL XSS$COMMINIT( CCB) ALTRET( OOPS);
      392     5725    1       PCID = CCB.LCID;
      393     5726            /* allocate space for Presentation connection context */
      394     5727    1       CALL XSP$GETCTX( CTX$, PCID)
      395     5728    2       WHENALTRETURN DO;
      396     5729    2   OOPS:
      397     5730    2           ALTRETURN;
      398     5731    2           END;
      399     5732    1       IF CCB.FLAGS.PVALID THEN
      400     5733    1           PCTX.ENTRY$ = CCB.PRES$;  /* save handler proc address */
      401     5734    1       RETURN;
      402     5735        %EJECT;
PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:61   
      403     5736    1   XSP$COMMTERM: ENTRY( CCB) ALTRET;
      404     5737
      405     5738            /* point at Presentation connection context */
      406     5739    1       PCID = CCB.LCID;
      407     5740    1       CALL XSP$CTXPTR( PCID, CTX$) ALTRET( OOPS);
      408     5741            /* call Session to terminate */
      409     5742    1       CALL XSS$COMMTERM( CCB) ALTRET( OOPS);
      410     5743            /* release Presentation connection context */
      411     5744    1       CALL XSP$RELCTX( CTX$)
      412     5745    2       WHENALTRETURN DO;
      413     5746    2           END;
      414     5747    1       RETURN;
      415     5748
      416     5749    1       END XSP$COMMINIT;

PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:62   
--  Include file information  --

   XSC_PERR_C.:XSA1TOU  is referenced.
   UM_CP6.:E05OU  is referenced.
   XSP_INTERNAL_M.:XSA1TOU  is referenced.
   XSP_INTERNAL_E.:XSA1TOU  is referenced.
   XSP_PRESENTATION_M.:XSA1TOU  is referenced.
   XSP_PRESENTATION_E.:XSA1TOU  is referenced.
   XSC_COMMON_M.:XSA1TOU  is referenced.
   B$JIT_C.:LIB_E05  is referenced.
   B_SEGIDS_C.:LIB_E05  is referenced.
      No diagnostics issued in procedure XSP$COMMINIT.

   Procedure XSP$COMMINIT requires 87 words for executable code.
   Procedure XSP$COMMINIT requires 10 words of local(AUTO) storage.

    No errors detected in file XSP$PRESENTATION.:XSA1TSI    .

PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:63   

 Object Unit name= XSP$COMMINIT                               File name= XSP$PRESENTATION.:XSA1TOU
 UTS= OCT 01 '97 12:07:22.68 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  RoData even  UTS      1      1  XSP$COMMINIT
    1   Proc  even  none    87    127  XSP$COMMINIT
    2  RoData even  none     3      3  XSP$COMMINIT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes    yes     yes      Std        1  XSP$COMMINIT
     1     75          yes     yes      Std        1  XSP$COMMTERM

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      0  XSP_E$RDONLYCCB
PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:64   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       1 XSS$SCREECH
 yes     yes           Std       1 XSP$SRECV
 yes     yes           Std       2 XSP$GETCTX
 yes     yes           Std       2 XSP$CTXPTR
 yes     yes           Std       1 XSP$RELCTX
 yes     yes           Std       1 XSS$COMMTERM
 yes     yes           Std       1 XSS$COMMINIT
                       nStd      0 X66_AUTO_1
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     B$JIT$

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:65   


      314        1        /*T***********************************************************/
      315        2        /*T*                                                         */
      316        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      317        4        /*T*                                                         */
      318        5        /*T***********************************************************/
      319        6        /*F*
      320        7                NAME:   XSP$COMMINIT
      321        8                PURPOSE:
      322        9                    This routine is called to set up a Presentation connection path.
      323       10                DESCRIPTION:
      324       11                    First we call the Session path init routine to do what it needs
      325       12                    to do (allocate Session context and set up a DCB's no-wait read),
      326       13                    then we allocate Presentation context and init it.
      327       14        */
      328       15        XSP$COMMINIT: PROC( CCB) ALTRET;

     15  1 000000   000000 700200 xent  XSP$COMMINIT TSX0  ! X66_AUTO_1
         1 000001   000012 000001                    ZERO    10,1

      329       16        %INCLUDE B_SEGIDS_C;
      330      555        %INCLUDE B$JIT_C;
      331      869            %B$JIT0;
      332      958            %U$JIT1X;
      333      961            %M$JIT2;
      334      971            %F$JIT3X;
      335      974            %S$JIT4X;
      336      977            %J$JIT5X;
      337      980            %A$JIT6X;
      338      983        %INCLUDE XSC_COMMON_M;
      339     1636            %XSC$CCB( NAME=CCB, STCLASS="");
      340     1933        %INCLUDE XSP_PRESENTATION_E;
      341     2032        %INCLUDE XSP_PRESENTATION_M;
      342     3518            %XSP$GENERIC;
      343     3614        %INCLUDE XSP_INTERNAL_E;
      344     3888        %INCLUDE XSP_INTERNAL_M;
      345     4549            %XSP$PCTX( NAME=PCTX, STCLASS="BASED( CTX$)");
PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:66   
      346     4705        %INCLUDE UM_CP6;
      347     5557        %MACRO ERRORDEF( NAME=XSP_ERROR, STCLASS="CONSTANT SYMDEF", LVL=1, LAST=";",
      348     5558                         ERR#=0, SEV=0);
      349     5559            %VLP_ERRCODE( FPTN=NAME, STCLASS=STCLASS, FCG='XS', MID='P',
      350     5560                          MON='0'B, ERR#=ERR#, SEV=SEV);
      351     5561        %MEND;
      352     5562        %INCLUDE XSC_PERR_C;
      353     5639            %ERRORDEF( NAME=XSP_E$RDONLYCCB, ERR#=%E$RDONLYCCB);
      354     5687            /*E*  ERROR:  XSP-E$RDONLYCCB-0
      355     5688                MESSAGE:  CCB is read-only; must be writeable.
      356     5689            */
      357     5690
      358     5691    1       DCL XSP$CTXPTR ENTRY(2) ALTRET;
      359     5692    1       DCL XSP$GETCTX ENTRY(2) ALTRET;
      360     5693    1       DCL XSP$RELCTX ENTRY(1) ALTRET;
      361     5694    1       DCL XSP$SRECV ENTRY(1) ALTRET;
      362     5695    1       DCL XSS$COMMINIT ENTRY(1) ALTRET;
      363     5696    1       DCL XSS$COMMTERM ENTRY(1) ALTRET;
      364     5697    1       DCL XSS$SCREECH ENTRY(1);
      365     5698
      366     5699    1       DCL B$JIT$ PTR SYMREF;
      367     5700
      368     5701    1       DCL CTX$ PTR;
      369     5702    1       DCL PCID SBIN;
      370     5703    1       DCL TEMP REDEF PCID SBIN;
      371     5704    1       DCL P PTR;
      372     5705    1       DCL 1 PX REDEF P,
      373     5706    1            2 OFFSET UBIN(18) UNAL,
      374     5707    1            2 * BIT(6) UNAL,
      375     5708    1            2 SEGID BIT(12) UNAL;
      376     5709        %EJECT;
PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:67   
      377     5710    1       P = ADDR( CCB);

   5710  1 000002   200003 236100                    LDQ     @CCB,,AUTO
         1 000003   200006 756100                    STQ     P,,AUTO

      378     5711    2       IF PX.SEGID = %ISSID THEN DO;

   5711  1 000004   200006 236100                    LDQ     P,,AUTO
         1 000005   007777 376007                    ANQ     4095,DL
         1 000006   006000 116007                    CMPQ    3072,DL
         1 000007   000037 601000 1                  TNZ     s:5721

      379     5712    2           TEMP = 64 + PX.OFFSET / 1024;  /* page number of CCB's page */

   5712  1 000010   200006 236100                    LDQ     P,,AUTO
         1 000011   000022 772000                    QRL     18
         1 000012   000012 772000                    QRL     10
         1 000013   000100 036007                    ADLQ    64,DL
         1 000014   200005 756100                    STQ     PCID,,AUTO

      380     5713    3           IF TEMP >= B$JIT.PLL AND TEMP <= B$JIT.PUL THEN DO;

   5713  1 000015   000000 470400 xsym               LDP0    B$JIT$
         1 000016   000176 236100                    LDQ     126,,PR0
         1 000017   000022 772000                    QRL     18
         1 000020   200005 116100                    CMPQ    PCID,,AUTO
         1 000021   000037 605400 1                  TPNZ    s:5721
         1 000022   000176 236100                    LDQ     126,,PR0
         1 000023   777777 376007                    ANQ     -1,DL
         1 000024   200005 116100                    CMPQ    PCID,,AUTO
         1 000025   000037 604000 1                  TMI     s:5721

      381     5714                    /* user's FPT was allocated in CONSTANT storage */
      382     5715    3               IF CCB.ERROR = XSP_E$RDONLYCCB THEN

   5715  1 000026   200003 471500                    LDP1    @CCB,,AUTO
         1 000027   100001 236100                    LDQ     1,,PR1
PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:68   
         1 000030   000000 116000 0                  CMPQ    XSP_E$RDONLYCCB
         1 000031   000033 601000 1                  TNZ     s:5717

      383     5716    3                   ALTRETURN;

   5716  1 000032   000000 702200 xent               TSX2  ! X66_AALT

      384     5717    3               CALL XSS$SCREECH( XSP_E$RDONLYCCB);

   5717  1 000033   000001 630400 2                  EPPR0   1
         1 000034   000000 631400 2                  EPPR1   0
         1 000035   000000 701000 xent               TSX1    XSS$SCREECH
         1 000036   000000 011000                    NOP     0

      385     5718    3               END;

      386     5719    2           END;

      387     5720            /* Initialize returned error code */
      388     5721    1       CCB.ERROR = '0'B;

   5721  1 000037   200003 470500                    LDP0    @CCB,,AUTO
         1 000040   000001 450100                    STZ     1,,PR0

      389     5722            /* have Session initialize first */
      390     5723    1       CCB.SESS$ = ENTADDR( XSP$SRECV);

   5723  1 000041   000000 636000 xent               EAQ     XSP$SRECV
         1 000042   000010 756100                    STQ     8,,PR0

      391     5724    1       CALL XSS$COMMINIT( CCB) ALTRET( OOPS);

   5724  1 000043   200003 630500                    EPPR0   @CCB,,AUTO
         1 000044   000000 631400 2                  EPPR1   0
         1 000045   000000 701000 xent               TSX1    XSS$COMMINIT
         1 000046   000064 702000 1                  TSX2    OOPS

PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:69   
      392     5725    1       PCID = CCB.LCID;

   5725  1 000047   200003 470500                    LDP0    @CCB,,AUTO
         1 000050   000000 236100                    LDQ     0,,PR0
         1 000051   000777 376007                    ANQ     511,DL
         1 000052   200005 756100                    STQ     PCID,,AUTO

      393     5726            /* allocate space for Presentation connection context */
      394     5727    1       CALL XSP$GETCTX( CTX$, PCID)

   5727  1 000053   200005 631500                    EPPR1   PCID,,AUTO
         1 000054   200011 451500                    STP1    P+3,,AUTO
         1 000055   200004 633500                    EPPR3   CTX$,,AUTO
         1 000056   200010 453500                    STP3    P+2,,AUTO
         1 000057   200010 630500                    EPPR0   P+2,,AUTO
         1 000060   000002 631400 2                  EPPR1   2
         1 000061   000000 701000 xent               TSX1    XSP$GETCTX
         1 000062   000064 702000 1                  TSX2    OOPS
         1 000063   000065 710000 1                  TRA     s:5732

      395     5728    2       WHENALTRETURN DO;

      396     5729    2   OOPS:
      397     5730    2           ALTRETURN;

   5730  1 000064   000000 702200 xent  OOPS         TSX2  ! X66_AALT

      398     5731    2           END;
      399     5732    1       IF CCB.FLAGS.PVALID THEN

   5732  1 000065   200003 470500                    LDP0    @CCB,,AUTO
         1 000066   000000 236100                    LDQ     0,,PR0
         1 000067   020000 316007                    CANQ    8192,DL
         1 000070   000074 600000 1                  TZE     s:5734

      400     5733    1           PCTX.ENTRY$ = CCB.PRES$;  /* save handler proc address */

PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:70   
   5733  1 000071   000011 236100                    LDQ     9,,PR0
         1 000072   200004 471500                    LDP1    CTX$,,AUTO
         1 000073   100007 756100                    STQ     7,,PR1

      401     5734    1       RETURN;

   5734  1 000074   000000 702200 xent               TSX2  ! X66_ARET

      402     5735        %EJECT;
PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:71   
      403     5736    1   XSP$COMMTERM: ENTRY( CCB) ALTRET;

   5736  1 000075   000000 700200 xent  XSP$COMMTERM TSX0  ! X66_AUTO_1
         1 000076   000012 000001                    ZERO    10,1

      404     5737
      405     5738            /* point at Presentation connection context */
      406     5739    1       PCID = CCB.LCID;

   5739  1 000077   200003 470500                    LDP0    @CCB,,AUTO
         1 000100   000000 236100                    LDQ     0,,PR0
         1 000101   000777 376007                    ANQ     511,DL
         1 000102   200005 756100                    STQ     PCID,,AUTO

      407     5740    1       CALL XSP$CTXPTR( PCID, CTX$) ALTRET( OOPS);

   5740  1 000103   200004 631500                    EPPR1   CTX$,,AUTO
         1 000104   200011 451500                    STP1    P+3,,AUTO
         1 000105   200005 633500                    EPPR3   PCID,,AUTO
         1 000106   200010 453500                    STP3    P+2,,AUTO
         1 000107   200010 630500                    EPPR0   P+2,,AUTO
         1 000110   000002 631400 2                  EPPR1   2
         1 000111   000000 701000 xent               TSX1    XSP$CTXPTR
         1 000112   000064 702000 1                  TSX2    OOPS

      408     5741            /* call Session to terminate */
      409     5742    1       CALL XSS$COMMTERM( CCB) ALTRET( OOPS);

   5742  1 000113   200003 630500                    EPPR0   @CCB,,AUTO
         1 000114   000000 631400 2                  EPPR1   0
         1 000115   000000 701000 xent               TSX1    XSS$COMMTERM
         1 000116   000064 702000 1                  TSX2    OOPS

      410     5743            /* release Presentation connection context */
      411     5744    1       CALL XSP$RELCTX( CTX$)

   5744  1 000117   200004 630500                    EPPR0   CTX$,,AUTO
PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:72   
         1 000120   200010 450500                    STP0    P+2,,AUTO
         1 000121   200010 630500                    EPPR0   P+2,,AUTO
         1 000122   000000 631400 2                  EPPR1   0
         1 000123   000000 701000 xent               TSX1    XSP$RELCTX
         1 000124   000126 702000 1                  TSX2    s:5747
         1 000125   000126 710000 1                  TRA     s:5747

      412     5745    2       WHENALTRETURN DO;

      413     5746    2           END;

      414     5747    1       RETURN;

   5747  1 000126   000000 702200 xent               TSX2  ! X66_ARET

XSP_E$RDONLYCCB
 Sect OctLoc
   0     000   302320 000170                                                    ...x

(unnamed)
 Sect OctLoc
   2     000   000001 000000   000000 006000   000002 000000                    ............
      415     5748
      416     5749    1       END XSP$COMMINIT;

PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:73   
--  Include file information  --

   XSC_PERR_C.:XSA1TOU  is referenced.
   UM_CP6.:E05OU  is referenced.
   XSP_INTERNAL_M.:XSA1TOU  is referenced.
   XSP_INTERNAL_E.:XSA1TOU  is referenced.
   XSP_PRESENTATION_M.:XSA1TOU  is referenced.
   XSP_PRESENTATION_E.:XSA1TOU  is referenced.
   XSC_COMMON_M.:XSA1TOU  is referenced.
   B$JIT_C.:LIB_E05  is referenced.
   B_SEGIDS_C.:LIB_E05  is referenced.
      No diagnostics issued in procedure XSP$COMMINIT.
PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:74   

 **** Variables and constants ****

  ****  Section 000 RoData XSP$COMMINIT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC        r     1 XSP_E$RDONLYCCB

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @CCB                      *0-0-0/w STRC(504)   r     1 CCB
     4-0-0/w PTR         r     1 CTX$                       6-0-0/w PTR         r     1 P
     5-0-0/w SBIN        r     1 PCID                       6-0-0/w STRC        r     1 PX
     5-0-0/w SBIN        r     1 TEMP

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$JIT$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(8856)  r     1 B$JIT                      0-0-0/w STRC(468)   r     1 PCTX


   Procedure XSP$COMMINIT requires 87 words for executable code.
   Procedure XSP$COMMINIT requires 10 words of local(AUTO) storage.
PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:75   

    No errors detected in file XSP$PRESENTATION.:XSA1TSI    .
PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:76   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:77   
          MINI XREF LISTING

B$JIT.ERR.MID
       876**DCL       876--REDEF
B$JIT.JRESPEAK
       966**DCL       967--REDEF
B$JIT.PLL
       962**DCL      5713>>IF
B$JIT.PUL
       962**DCL      5713>>IF
B$JIT$
      5699**DCL       870--IMP-PTR  5713>>IF       5713>>IF
CCB
      1653**DCL        15--PROC     5710--ASSIGN   5724<>CALL     5736--ENTRY    5742<>CALL
CCB.ERRDEF
      1760**DCL      1780--REDEF
CCB.ERROR
      1780**DCL      5715>>IF       5721<<ASSIGN
CCB.FLAGS.PVALID
      1720**DCL      5732>>IF
CCB.LCID
      1752**DCL      5725>>ASSIGN   5739>>ASSIGN
CCB.PRES$
      1903**DCL      5733>>ASSIGN
CCB.SESS$
      1889**DCL      5723<<ASSIGN
CTX$
      5701**DCL      4567--IMP-PTR  5727<>CALL     5733>>ASSIGN   5740<>CALL     5744<>CALL
OOPS
      5730**LABEL    5724--CALLALT  5740--CALLALT  5742--CALLALT
P
      5704**DCL      5705--REDEF    5710<<ASSIGN
PCID
      5702**DCL      5703--REDEF    5725<<ASSIGN   5727<>CALL     5739<<ASSIGN   5740<>CALL
PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:78   
PCTX.ACTDCSMASK
      4653**DCL      4656--REDEF
PCTX.CURDCSMASK
      4638**DCL      4641--REDEF
PCTX.ENTRY$
      4672**DCL      5733<<ASSIGN
PCTX.HISTZ
      4696**DCL      4697--REDEF
PCTX.INIDCSMASK
      4646**DCL      4649--REDEF
PX.OFFSET
      5706**DCL      5712>>ASSIGN
PX.SEGID
      5708**DCL      5711>>IF
TEMP
      5703**DCL      5712<<ASSIGN   5713>>IF       5713>>IF
XSP$CTXPTR
      5691**DCL-ENT  5740--CALL
XSP$GENERIC.ERRDEF
      3581**DCL      3601--REDEF
XSP$GETCTX
      5692**DCL-ENT  5727--CALL
XSP$RELCTX
      5693**DCL-ENT  5744--CALL
XSP$SRECV
      5694**DCL-ENT  5723--ASSIGN
XSP_E$RDONLYCCB
      5653**DCL      5715>>IF       5717<>CALL
XSS$COMMINIT
      5695**DCL-ENT  5724--CALL
XSS$COMMTERM
      5696**DCL-ENT  5742--CALL
XSS$SCREECH
      5697**DCL-ENT  5717--CALL
PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:79   
              *** CROSS REFERENCE LISTING ***
    **     DENOTES     IDENTIFIER DEFINITION
    <<                 IDENTIFIER'S VALUE SET
    >>                 IDENTIFIER'S VALUE USED
    <>                 IDENTIFIER SET AND/OR USED
    --                 IDENTIFIER REFERENCED
PL6.E3A0      #002=XSP$COMMINIT File=XSP$PRESENTATION.:XSA1TSI                   WED 10/01/97 12:07 Page:80   
              MINI UREF LISTING

XSP$COMMINIT      15**PROC
XSP$COMMTERM    5736**ENTRY
