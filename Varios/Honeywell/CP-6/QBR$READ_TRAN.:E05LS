VERSION E05

PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:1    
        1        1        /*M* QBR$READ_TRAN:  READ a transaction from the host.  */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DMC,PLM=4,IND=0,DCI=4,CSI=2,IAD=2,DTI=2,AND,ECI=0,DIN=2,STI=2 */
        8        8
        9        9        /*P*  NAME:         QBR$READ_TRAN
       10       10              PURPOSE:      Read a transaction from the host.
       11       11              DESCRIPTION:  Execute a READ_TRAN op-code, whose argument is
       12       12                            a QI$TRAN_FILE-type DAD.
       13       13        */
       14       14
       15       15        QBR$READ_TRAN: PROC;
       16       16
       17       17        /*D*  NAME:         QBR$READ_TRAN
       18       18              CALL:         CALL QBR$READ_TRAN;
       19       19              PARAMETERS:   None.
       20       20              INTERFACE:    Called by QAT$TALLYHO when a READ_TRAN op-code
       21       21                            is encountered.
       22       22                            Calls M$READ directed at the host.
       23       23              ENVIRONMENT:  Nothing unusual.
       24       24              INPUT:        QI_1,
       25       25                            FPL rununit static data following the op-code.
       26       26              OUTPUT:       Fills buffers with stuff from the general direction of the
       27       27                            host, from a timesharing- or comgroup-connected user.
       28       28              SCRATCH:      Various otter data.
       29       29              DESCRIPTION:  Check the transaction TYPE for legality, and read it.
       30       30                            Something in the host should be smart enough to
       31       31                            throw away unusable FPT junk (VLP_CG, etc.) for
       32       32                            reads directed to non-comgroup things.
       33       33        */
       34       34
       35       35          %INCLUDE B_ERRORS_C;
       36     1162          %INCLUDE QI_PERR_C;
       37     1330          %INCLUDE LCP_6;
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:2    
       38     1521          %FPT_READ ( FPTN = FPT@READ,
       39     1522                      STCLASS = AUTO );
       40     1548          %VLP_CG ( FPTN = VLP@CG,
       41     1549                    STCLASS = AUTO );
       42     1569
       43     1570          %INCLUDE QG_MACRO_M;
       44     1707          %QGB_ENTRIES;
       45     1720          %INCLUDE QI_EQUATES_E;
       46     2079          %INCLUDE QI_MACROS_M;
       47     7137          %QI$ALL;
       48    18250          %QI_FPTS;
       49    20295
       50    20296    1     DCL ERROR_STATUS$ PTR;
       51    20297    1     DCL INSTR$ PTR;
       52    20298    1     DCL TRAN_FILE$ PTR;
       53    20299    1     DCL TRAN_STATUS$ PTR;
       54    20300
       55    20301    1     DCL QCC$CBD ENTRY (1);
       56    20302    1     DCL QCC$CDB ENTRY (1);
       57    20303    1     DCL QCE$ERROR_INTERNAL ENTRY (4);
       58    20304    1     DCL QCE$ERROR_M$INTERNAL ENTRY (4);
       59    20305    1     DCL QCS$SETUP_SOURCE ENTRY;
       60    20306    1     DCL QCS$SETUP_TARGET ENTRY;
       61    20307    1     DCL QCU$UPDATE_SCREEN ENTRY;
       62    20308    1     DCL QCU$USE_INVALID_IO ENTRY (1);
       63    20309
       64    20310          %QI@OTTER_SPACE;
       65    20338
       66    20339          %SET LISTMAC = '1'B;
       67    20340
       68    20341          %INCLUDE QCU_USE_M;
       69    20395          %QCU@USE;
             20396            %BEGIN_MACRO;
             20397            %SET LISTDIR = '0'B;
             20410    1     DCL 1 QCU@USE AUTO ALIGNED,
             20411    1           2 CURR_FRAME$ PTR,
             20412                          /* Pointer to DAD of current frame or ADDR (NIL).  */
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:3    
             20413    1           2 CURR_NODE$ PTR,
             20414                          /* Pointer to current node or ADDR (NIL).  */
             20415    1           2 USE_DEFAULT_IO UBIN,
             20416                          /* For USE procedures which default applies
             20417                             (see corresponding EQUs).  */
             20418    1           2 IS_TIME_TO_SAVE_AWAY_FIELDS BIT(1) ALIGNED,
             20419                          /* If IS_TIME_TO_SAVE_AWAY_FIELDS, then
             20420                             save the fields within the bounds of
             20421                             FRAME_START_INDEX, FRAME_STOP_INDEX,
             20422                             FIELD_START_INDEX, and FIELD_STOP_INDEX
             20423                             before calling the USE procedure.  */
             20424    1           2 FRAME_START_INDEX UBIN,
             20425                          /* Foist frame of the CURRENT.FORM$
             20426                             involved with the I-O error.  */
             20427    1           2 FRAME_STOP_INDEX UBIN,
             20428                          /* Larst frame of the CURRENT.FORM$
             20429                             involved with the I-O error.  */
             20430    1           2 IS_FIELD_INDEXES_VALID BIT(1) ALIGNED,
             20431                          /* If IS_FIELD_INDEXES_VALID, use them;
             20432                             else use all the fields in the frame.  */
             20433    1           2 FIELD_START_INDEX UBIN,
             20434                          /* Starting index into QI$GZ_FIELD
             20435                             which may have values "pushed".  */
             20436    1           2 FIELD_STOP_INDEX UBIN,
             20437                          /* Stopping index into QI$GZ_FIELD
             20438                             which may have values "pushed".  */
             20439    1           2 IS_CURSOR_POSITION_VALID BIT(1) ALIGNED,
             20440                          /* If IS_CURSOR_POSITION_VALID, use it;
             20441                             else allow cursor to default to upper-left-most field.  */
             20442    1           2 CURSOR_POSITION BIT(16) ALIGNED,
             20443                          /* POSition of the field on which to place the cursor.  */
             20444    1           2 STATUS UBIN;
             20445                          /* Returned action code; see corresponding EQUs.  */
             20452            %ENDIF;
       70    20455
       71    20456          %SET LISTMAC = '0'B;
       72    20457        %EJECT;
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:4    
       73    20458    1       INSTR$ = QI_1.INSTR$;
       74    20459    1       QI_1.INSTR$ = ADDR ( INSTR$ -> QI$OP_READ_TRAN.NEXT_CODE@P );
       75    20460
       76    20461    1       IF QI_1.SCREEN_UPDATE_FLAGS
       77    20462    1       THEN
       78    20463    1         CALL QCU$UPDATE_SCREEN;
       79    20464
       80    20465    1   RETRY_TRANSACTION_READ:
       81    20466    1       QI_1.A_REG = 0;
       82    20467    1       QI_1.NO_DATA = 0;
       83    20468    1       QI_1.AT_END = 0;
       84    20469
       85    20470            %PROC_ADDRESS ( THING@P = "INSTR$ -> QI$OP_READ_TRAN.TRAN_FILE@P",
       86    20471            CHECK_FOR_INDIRECTION = YES,
       87    20472            RESULT$ = TRAN_FILE$ );
       88    20509
       89    20510            %IF QI#DEBUG;
       90    20511
       91    20512    1       IF TRAN_FILE$ -> QI$TRAN_FILE.WORD0_FLAGS.TYPE ~= %QI#TYPE_TRANSACTION
       92    20513    1       THEN
       93    20514    1         CALL QCE$ERROR_INTERNAL ( %E$INTERNAL_COMPILER_ERROR );
       94    20515
       95    20516            %ENDIF;
       96    20517
       97    20518            %DATA_ADDRESS ( THING@D = "TRAN_FILE$ -> QI$TRAN_FILE.STATUS_AREA@D",
       98    20519            CHECK_FOR_INDIRECTION = NO,
       99    20520            RESULT$ = TRAN_STATUS$ );
      100    20557
      101    20558        /*  Used to be (pre-C00) there was a thing called G$REP_OPT_COMP              */
      102    20559        /*  which got called to "REPort_OutPuT_COMPlete" on the last                  */
      103    20560        /*  MSGID# we read with RRR set.   Don't do that no more, but                 */
      104    20561        /*  this is how it would have went (sort of).                                 */
      105    20562        /*  IF QI_1.CURRENT.TRAN_STATUS$ -> QI$TRAN_STATUS.CURRENT.IS_RRR_ID_VALID    */
      106    20563        /*  THEN                                                                      */
      107    20564        /*    DO;                                                                     */
      108    20565        /*      QI_1.CURRENT.TRAN_STATUS$ ->                                          */
      109    20566        /*        QI$TRAN_STATUS.CURRENT.IS_RRR_ID_VALID = %NO;                       */
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:5    
      110    20567        /*      FPT@REP_OTP_COMP.RRR_ID = QI_1.CURRENT.TRAN_STATUS$ ->                */
      111    20568        /*        QI$TRAN_STATUS.RRR_ID;                                              */
      112    20569        /*      CALL G$REP_OTP_COMP ( FPT@REP_OPT_COMP );                             */
      113    20570        /*      WHENALTRETURN                                                         */
      114    20571        /*      DO;                                                                   */
      115    20572        /*      END;                                                                  */
      116    20573        /*    END;                                                                    */
      117    20574        /*                                                                            */
      118    20575        /* Make sure the file is open input.                                          */
      119    20576    1       IF NOT TRAN_STATUS$ -> QI$TRAN_STATUS.INDICATORS.OPEN_FLAGS.IS_OUTPUT
      120    20577    1         AND NOT TRAN_STATUS$ -> QI$TRAN_STATUS.INDICATORS.OPEN_FLAGS.IS_INPUT
      121    20578    1       THEN
      122    20579    2         DO;
      123    20580    2           QI_1.ERROR_STATUS = %E$FILE_NOT_OPEN;
      124    20581    2           GOTO CHECK_USE_PROCEDURE_OR_INVALID;
      125    20582    2         END;
      126    20583    1       ELSE
      127    20584    1         IF NOT TRAN_STATUS$ -> QI$TRAN_STATUS.INDICATORS.OPEN_FLAGS.IS_INPUT
      128    20585    1         THEN
      129    20586    2           DO;
      130    20587    2             QI_1.ERROR_STATUS = %E$FILE_NOT_OPEN_INPUT;
      131    20588    2             GOTO CHECK_USE_PROCEDURE_OR_INVALID;
      132    20589    2           END;
      133    20590
      134    20591    1       FPT@READ = QI_FPT_READ;
      135    20592    1       VBASE ( FPT@READ.V_ ) = ADDR ( FPT@READ.V );
      136    20593    1       FPT@READ.CG_ = VECTOR ( VLP@CG );
      137    20594    1       VLP@CG = QI_VLP_CG;
      138    20595
      139    20596    1       FPT@READ.V.DCB# = TRAN_FILE$ -> QI$TRAN_FILE.DCB#;
      140    20597
      141    20598            %DATA_ADDRESS ( THING@D = "TRAN_FILE$ -> QI$TRAN_FILE.BUFFER@D",
      142    20599            CHECK_FOR_INDIRECTION = NO,
      143    20600            RESULT$ = "VBASE ( FPT@READ.BUF_ )" );
      144    20637
      145    20638    1       VBOUND ( FPT@READ.BUF_ ) = TRAN_FILE$ -> QI$TRAN_FILE.MAX_RECORD_SIZE - 1;
      146    20639
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:6    
      147    20640    1       IF INSTR$ -> QI$OP_READ_TRAN.NO_DATA
      148    20641    1       THEN
      149    20642    1         FPT@READ.V.DVBYTE.NODAT = %YES;
      150    20643    1       ELSE
      151    20644    1         FPT@READ.V.DVBYTE.NODAT = %NO;
      152    20645
      153    20646    1       QI_1.A_REG = 0;
      154    20647    1       QI_1.AT_END = 0;
      155    20648    1       QI_1.NO_DATA = 0;
      156    20649
      157    20650    1       IF TRAN_FILE$ -> QI$TRAN_FILE.WORD0_FLAGS.INPUT_CLASS
      158    20651    1       THEN
      159    20652    2         DO;
      160    20653        /* Report                                                                     */
      161    20654    2           QI_1.SOURCE$ = ADDR ( TRAN_FILE$ -> QI$TRAN_FILE.TYPE@P );
      162    20655
      163    20656    2           CALL QCS$SETUP_TARGET;
      164    20657
      165    20658                /*  The compiler should always force TYPE variables
      166    20659                    to be 01-level items, and therefore word-aligned.
      167    20660                    (So we don't have to bother with QI_1.OFFSET.T).  */
      168    20661    2           VLP@CG.MSGTYP# = QI_1.OP.DATA.T$ -> QI$MESSAGE_TYPE.TEXT;
      169    20662
      170    20663    2         END;
      171    20664    1       ELSE
      172    20665    2         DO;
      173    20666        /* Response                                                                   */
      174    20667    2           FPT@READ.V.KEYS = %YES;
      175    20668
      176    20669    2           IF TRAN_FILE$ -> QI$TRAN_FILE.WORD0_FLAGS.IS_ID_VALID
      177    20670    2           THEN
      178    20671    3             DO;
      179    20672    3               FPT@READ.KEY_ = VECTOR ( VLP@CG.MSGID# );
      180    20673
      181    20674    3               QI_1.SOURCE$ = ADDR ( TRAN_FILE$ -> QI$TRAN_FILE.ID@P );
      182    20675    3               CALL QCS$SETUP_SOURCE;
      183    20676
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:7    
      184    20677    4               DO CASE ( QI_1.TYPE.S );
      185    20678
      186    20679    4                 CASE ( %QI#TYPE_BINARY );
      187    20680                            %IF QI#DEBUG;
      188    20681
      189    20682    4                   IF QI_1.OP.LEN.S ~= %QI#MAX_BINARY_LENGTH
      190    20683    4                   THEN
      191    20684    4                     CALL QCE$ERROR_INTERNAL ( %E$INTERNAL_COMPILER_ERROR );
      192    20685
      193    20686                            %ENDIF;
      194    20687
      195    20688    4                   QI_1.OP.CIP.T_A (0) = QI_31_DIGIT_ST_PACKED_A (0);
      196    20689    4                   QI_1.OP.DATA.T$ = ADDR ( QI@OTTER_SPACE );
      197    20690    4                   QI_1.OP.DEC.T = 0;
      198    20691
      199    20692    4                   QI_1.OP.SIZE_ERROR = %QI#DONT_CHECK_FOR_SIZE_ERROR;
      200    20693
      201    20694    4                   CALL QCC$CBD ( QI_1.OP );
      202    20695
      203    20696    4                   QI_1.OP.CIP.S_A (0) = QI_1.OP.CIP.T_A (0);
      204    20697    4                   QI_1.OP.DATA.S$ = QI_1.OP.DATA.T$;
      205    20698    4                   QI_1.OP.CIP.T_A (0) = QI_32_BIT_BINARY_A (0);
      206    20699    4                   QI_1.OP.DATA.T$ = ADDR ( VLP@CG.MSGID# );
      207    20700
      208    20701    4                   CALL QCC$CDB ( QI_1.OP );
      209    20702
      210    20703    4                 CASE ( %QI#TYPE_DISPLAY,
      211    20704    4                     %QI#TYPE_PACKED );
      212    20705                            %IF QI#DEBUG;
      213    20706
      214    20707    4                   IF QI_1.OP.LEN.S ~= 10
      215    20708    4                   THEN
      216    20709    4                     CALL QCE$ERROR_INTERNAL ( %E$INTERNAL_COMPILER_ERROR );
      217    20710
      218    20711                            %ENDIF;
      219    20712
      220    20713    4                   QI_1.OP.CIP.T_A (0) = QI_32_BIT_BINARY_A (0);
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:8    
      221    20714    4                   QI_1.OP.DATA.T$ = ADDR ( VLP@CG.MSGID# );
      222    20715    4                   QI_1.OP.DEC.T = 0;
      223    20716
      224    20717    4                   QI_1.OP.SIZE_ERROR = %QI#DONT_CHECK_FOR_SIZE_ERROR;
      225    20718
      226    20719    4                   CALL QCC$CDB ( QI_1.OP );
      227    20720
      228    20721    4                 CASE ( ELSE );
      229    20722    4                   CALL QCE$ERROR_INTERNAL ( %E$INTERNAL_COMPILER_ERROR );
      230    20723
      231    20724    4               END;
      232    20725
      233    20726    3             END;
      234    20727
      235    20728    2           ELSE
      236    20729        /* Use save ID.                                                               */
      237    20730    2             VLP@CG.MSGID# = TRAN_STATUS$ -> QI$TRAN_STATUS.LAST_ID;
      238    20731    2           FPT@READ.KEY_ = VECTOR ( VLP@CG.MSGID# );
      239    20732
      240    20733    2           VLP@CG.MSGTYP# = '*RESP?';
      241    20734
      242    20735    2         END;
      243    20736
      244    20737    1       CALL QGB$READ ( FPT@READ, QGB_PARAM )
      245    20738    1       WHENALTRETURN
      246    20739    2         DO;
      247    20740
      248    20741    3           DO CASE ( QGB_PARAM.ERR.ERR# );
      249    20742
      250    20743    3             CASE ( %E$NODAT );
      251    20744    3               QI_1.NO_DATA = QI_1.NO_DATA + 1;
      252    20745    3               GOTO UPDATE_SILLY_ERROR_STATUS;
      253    20746
      254    20747    3             CASE ( ELSE );
      255    20748    3               IF QGB_PARAM.ERR.ERR# = %E$LD
      256    20749    3               THEN
      257    20750    3                 QI_1.ERROR_STATUS = %E$TRANSACTION_LOST_DATA;
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:9    
      258    20751    3               ELSE
      259    20752    3                 QI_1.ERROR_STATUS = %E$TRANSACTION_READ_ERROR;
      260    20753
      261    20754    3               GOTO CHECK_USE_PROCEDURE_OR_INVALID;
      262    20755
      263    20756    3           END;
      264    20757
      265    20758    2         END;
      266    20759
      267    20760    1       IF NOT TRAN_FILE$ -> QI$TRAN_FILE.WORD0_FLAGS.INPUT_CLASS
      268    20761        /* Response read:  must check for *RESPX (tpap abort)                         */
      269    20762    1         AND VLP@CG.MSGTYP# = '*RESPX'
      270    20763    1       THEN
      271    20764    2         DO;
      272    20765        /* Our TPAP is gone!                                                          */
      273    20766    2           QI_1.ERROR_STATUS = %E$TPAP_ABORT;
      274    20767    2           GOTO CHECK_USE_PROCEDURE_OR_INVALID;
      275    20768    2         END;
      276    20769
      277    20770        /*  More historic RRR code:  here's where the RRR_ID gets saved               */
      278    20771        /*  away so it can be RRR'ed on the next read.  (See previous).               */
      279    20772        /*  IF QGB_PARM.DVBYTE.RRR                                                    */
      280    20773        /*  THEN                                                                      */
      281    20774        /*    DO;                                                                     */
      282    20775        /*      TRAN_STATUS$ -> QI$TRAN_STATUS.RRR_ID = VLP@CG.MSGID#;                */
      283    20776        /*      TRAN_STATUS$ -> QI$TRAN_STATUS.CURRENT.IS_RRR_ID_VALID = %YES;        */
      284    20777        /*    END;                                                                    */
      285    20778
      286    20779            /*  For REPORT reads, we replace the TYPE variable with
      287    20780                the actual MSGTYP# read.
      288    20781                E.g., replace ICK? with ICKTYPE7.  */
      289    20782    1       IF TRAN_FILE$ -> QI$TRAN_FILE.WORD0_FLAGS.INPUT_CLASS
      290    20783    1       THEN
      291    20784    2         DO;
      292    20785    2           QI_1.SOURCE$ = ADDR ( TRAN_FILE$ -> QI$TRAN_FILE.TYPE@P );
      293    20786
      294    20787    2           CALL QCS$SETUP_TARGET;
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:10   
      295    20788
      296    20789    2           QI_1.OP.DATA.T$ -> QI$MESSAGE_TYPE.TEXT = VLP@CG.MSGTYP#;
      297    20790    2         END;
      298    20791
      299    20792    1   UPDATE_SILLY_ERROR_STATUS:
      300    20793    1       IF TRAN_FILE$ -> QI$TRAN_FILE.WORD0_FLAGS.IS_ERROR_STATUS_VALID
      301    20794    1       THEN
      302    20795    2         DO;
      303    20796                %DATA_ADDRESS ( THING@D = "TRAN_FILE$ -> QI$TRAN_FILE.ERROR_STATUS@D",
      304    20797                CHECK_FOR_INDIRECTION = NO,
      305    20798                RESULT$ = ERROR_STATUS$ );
      306    20835
      307    20836    2           ERROR_STATUS$ -> QI$ERROR_STATUS.TEXT = %QI#OP_READ_TRAN_TEXT;
      308    20837    2         END;
      309    20838
      310    20839    1       RETURN;
      311    20840
      312    20841        %EJECT;
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:11   
      313    20842    1   CHECK_USE_PROCEDURE_OR_INVALID:
      314    20843    1       QI_1.CURRENT.TRAN$ = TRAN_FILE$;
      315    20844    1       QI_1.CURRENT.TRAN_STATUS$ = TRAN_STATUS$;
      316    20845
      317    20846    1       QCU@USE.USE_DEFAULT_IO = %QI#USE_DEFAULT_NONE;
      318    20847    1       QCU@USE.IS_TIME_TO_SAVE_AWAY_FIELDS = %NO;
      319    20848    1       QCU@USE.CURR_FRAME$ = ADDR (NIL);
      320    20849    1       QCU@USE.CURR_NODE$ = TRAN_FILE$;
      321    20850
      322    20851    1       CALL QCU$USE_INVALID_IO ( QCU@USE );
      323    20852
      324    20853    2       DO CASE ( QCU@USE.STATUS );
      325    20854
      326    20855    2         CASE ( %QI#USE_INVALID_RETURN );
      327    20856    2           RETURN;
      328    20857
      329    20858    2         CASE ( %QI#USE_INVALID_RETRY );
      330    20859    2           GOTO RETRY_TRANSACTION_READ;
      331    20860
      332    20861    2         CASE ( %QI#USE_INVALID_SKIP_TO_NEXT );
      333    20862    2           RETURN;
      334    20863
      335    20864    2         CASE ( ELSE );
      336    20865    2           CALL QCE$ERROR_INTERNAL ( %E$INTERNAL_INTERPRETER_ERROR );
      337    20866
      338    20867    2       END;
      339    20868
      340    20869    1   END QBR$READ_TRAN;

PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:12   
--  Include file information  --

   QCU_USE_M.:E05TOU  is referenced.
   QI_MACROS_M.:E05TOU  is referenced.
   QI_EQUATES_E.:E05TOU  is referenced.
   QG_MACRO_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
   QI_PERR_C.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is referenced.
   KI_CP6.:E05TOU  was found in the system file and is referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure QBR$READ_TRAN.

   Procedure QBR$READ_TRAN requires 644 words for executable code.
   Procedure QBR$READ_TRAN requires 68 words of local(AUTO) storage.

    No errors detected in file QBR$READ_TRAN.:E05TSI    .

PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:13   

 Object Unit name= QBR$READ_TRAN                              File name= QBR$READ_TRAN.:E05TOU
 UTS= JUL 30 '97 04:54:59.96 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0  RoData even  UTS      7      7  QBR$READ_TRAN
    1   Proc  even  none   644    284  QBR$READ_TRAN
    2  RoData even  none     8      8  QBR$READ_TRAN

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     1      0   yes            yes      Std        0  QBR$READ_TRAN

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       0 QCU$UPDATE_SCREEN
         yes           Std       4 QCE$ERROR_INTERNAL
         yes           Std       0 QCS$SETUP_SOURCE
         yes           Std       1 QCC$CBD
         yes           Std       0 QCS$SETUP_TARGET
         yes           Std       1 QCC$CDB
 yes     yes           Std       2 QGB$READ
         yes           Std       1 QCU$USE_INVALID_IO
                       nStd      0 X6A_AUTO_0
                       nStd      0 X6A_ARET
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:14   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     QI_1                                  QGB_PARAM                             QI_4_CHAR_ALPHANUMERIC
     QI_31_DIGIT_SLS_DISPLAY               QI_16_BIT_BINARY                      QI_32_BIT_BINARY
     QI_31_DIGIT_ST_PACKED                 QI_PICTURE_STRING                     QI_FPT_READ
     QI_VLP_CG                        r    G$ROS$
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:15   


        1        1        /*M* QBR$READ_TRAN:  READ a transaction from the host.  */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DMC,PLM=4,IND=0,DCI=4,CSI=2,IAD=2,DTI=2,AND,ECI=0,DIN=2,STI=2 */
        8        8
        9        9        /*P*  NAME:         QBR$READ_TRAN
       10       10              PURPOSE:      Read a transaction from the host.
       11       11              DESCRIPTION:  Execute a READ_TRAN op-code, whose argument is
       12       12                            a QI$TRAN_FILE-type DAD.
       13       13        */
       14       14
       15       15        QBR$READ_TRAN: PROC;

     15   1 000000  D380 0000 0000  xent QBR$READ_TRAN   LNJ,B5   X6A_AUTO_0
          1 000003       0044 0000                       DC       68,0

       16       16
       17       17        /*D*  NAME:         QBR$READ_TRAN
       18       18              CALL:         CALL QBR$READ_TRAN;
       19       19              PARAMETERS:   None.
       20       20              INTERFACE:    Called by QAT$TALLYHO when a READ_TRAN op-code
       21       21                            is encountered.
       22       22                            Calls M$READ directed at the host.
       23       23              ENVIRONMENT:  Nothing unusual.
       24       24              INPUT:        QI_1,
       25       25                            FPL rununit static data following the op-code.
       26       26              OUTPUT:       Fills buffers with stuff from the general direction of the
       27       27                            host, from a timesharing- or comgroup-connected user.
       28       28              SCRATCH:      Various otter data.
       29       29              DESCRIPTION:  Check the transaction TYPE for legality, and read it.
       30       30                            Something in the host should be smart enough to
       31       31                            throw away unusable FPT junk (VLP_CG, etc.) for
       32       32                            reads directed to non-comgroup things.
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:16   
       33       33        */
       34       34
       35       35          %INCLUDE B_ERRORS_C;
       36     1162          %INCLUDE QI_PERR_C;
       37     1330          %INCLUDE LCP_6;
       38     1521          %FPT_READ ( FPTN = FPT@READ,
       39     1522                      STCLASS = AUTO );
       40     1548          %VLP_CG ( FPTN = VLP@CG,
       41     1549                    STCLASS = AUTO );
       42     1569
       43     1570          %INCLUDE QG_MACRO_M;
       44     1707          %QGB_ENTRIES;
       45     1720          %INCLUDE QI_EQUATES_E;
       46     2079          %INCLUDE QI_MACROS_M;
       47     7137          %QI$ALL;
       48    18250          %QI_FPTS;
       49    20295
       50    20296    1     DCL ERROR_STATUS$ PTR;
       51    20297    1     DCL INSTR$ PTR;
       52    20298    1     DCL TRAN_FILE$ PTR;
       53    20299    1     DCL TRAN_STATUS$ PTR;
       54    20300
       55    20301    1     DCL QCC$CBD ENTRY (1);
       56    20302    1     DCL QCC$CDB ENTRY (1);
       57    20303    1     DCL QCE$ERROR_INTERNAL ENTRY (4);
       58    20304    1     DCL QCE$ERROR_M$INTERNAL ENTRY (4);
       59    20305    1     DCL QCS$SETUP_SOURCE ENTRY;
       60    20306    1     DCL QCS$SETUP_TARGET ENTRY;
       61    20307    1     DCL QCU$UPDATE_SCREEN ENTRY;
       62    20308    1     DCL QCU$USE_INVALID_IO ENTRY (1);
       63    20309
       64    20310          %QI@OTTER_SPACE;
       65    20338
       66    20339          %SET LISTMAC = '1'B;
       67    20340
       68    20341          %INCLUDE QCU_USE_M;
       69    20395          %QCU@USE;
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:17   
             20396            %BEGIN_MACRO;
             20397            %SET LISTDIR = '0'B;
             20410    1     DCL 1 QCU@USE AUTO ALIGNED,
             20411    1           2 CURR_FRAME$ PTR,
             20412                          /* Pointer to DAD of current frame or ADDR (NIL).  */
             20413    1           2 CURR_NODE$ PTR,
             20414                          /* Pointer to current node or ADDR (NIL).  */
             20415    1           2 USE_DEFAULT_IO UBIN,
             20416                          /* For USE procedures which default applies
             20417                             (see corresponding EQUs).  */
             20418    1           2 IS_TIME_TO_SAVE_AWAY_FIELDS BIT(1) ALIGNED,
             20419                          /* If IS_TIME_TO_SAVE_AWAY_FIELDS, then
             20420                             save the fields within the bounds of
             20421                             FRAME_START_INDEX, FRAME_STOP_INDEX,
             20422                             FIELD_START_INDEX, and FIELD_STOP_INDEX
             20423                             before calling the USE procedure.  */
             20424    1           2 FRAME_START_INDEX UBIN,
             20425                          /* Foist frame of the CURRENT.FORM$
             20426                             involved with the I-O error.  */
             20427    1           2 FRAME_STOP_INDEX UBIN,
             20428                          /* Larst frame of the CURRENT.FORM$
             20429                             involved with the I-O error.  */
             20430    1           2 IS_FIELD_INDEXES_VALID BIT(1) ALIGNED,
             20431                          /* If IS_FIELD_INDEXES_VALID, use them;
             20432                             else use all the fields in the frame.  */
             20433    1           2 FIELD_START_INDEX UBIN,
             20434                          /* Starting index into QI$GZ_FIELD
             20435                             which may have values "pushed".  */
             20436    1           2 FIELD_STOP_INDEX UBIN,
             20437                          /* Stopping index into QI$GZ_FIELD
             20438                             which may have values "pushed".  */
             20439    1           2 IS_CURSOR_POSITION_VALID BIT(1) ALIGNED,
             20440                          /* If IS_CURSOR_POSITION_VALID, use it;
             20441                             else allow cursor to default to upper-left-most field.  */
             20442    1           2 CURSOR_POSITION BIT(16) ALIGNED,
             20443                          /* POSition of the field on which to place the cursor.  */
             20444    1           2 STATUS UBIN;
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:18   
             20445                          /* Returned action code; see corresponding EQUs.  */
             20452            %ENDIF;
       70    20455
       71    20456          %SET LISTMAC = '0'B;
       72    20457        %EJECT;
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:19   
       73    20458    1       INSTR$ = QI_1.INSTR$;

  20458   1 000005  EC80 0000 0006  xsym                 LDB,B6   QI_1+6
          1 000008  EFC7 0024                            STB,B6   INSTR$,AUTO

       74    20459    1       QI_1.INSTR$ = ADDR ( INSTR$ -> QI$OP_READ_TRAN.NEXT_CODE@P );

  20459   1 00000A  DBC6 0003                            LAB,B5   3,B6
          1 00000C  DF80 0000 0006  xsym                 STB,B5   QI_1+6

       75    20460
       76    20461    1       IF QI_1.SCREEN_UPDATE_FLAGS

  20461   1 00000F  8280 0000 0016  xsym                 LB,'F000'X        QI_1+22
  20461   1 000012       F000
          1 000013  0581 0007                            BBF      s:20466,PREL

       77    20462    1       THEN
       78    20463    1         CALL QCU$UPDATE_SCREEN;

  20463   1 000015  CBF0 0000                            LAB,B4   0,IMO
          1 000017  E380 0000 0000  xent                 LNJ,B6   QCU$UPDATE_SCREEN
          1 00001A       0001                            DC       s:20466,PREL

       79    20464
       80    20465    1   RETRY_TRANSACTION_READ:
       81    20466    1       QI_1.A_REG = 0;

  20466   1 00001B  8700 0000 0054  xsym RETRY_TRANSACTI*CL       QI_1+84

       82    20467    1       QI_1.NO_DATA = 0;

  20467   1 00001E  8700 0000 0060  xsym                 CL       QI_1+96

       83    20468    1       QI_1.AT_END = 0;

  20468   1 000021  8700 0000 0056  xsym                 CL       QI_1+86
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:20   

       84    20469
       85    20470            %PROC_ADDRESS ( THING@P = "INSTR$ -> QI$OP_READ_TRAN.TRAN_FILE@P",
       86    20471            CHECK_FOR_INDIRECTION = YES,
       87    20472            RESULT$ = TRAN_FILE$ );

  20490   1 000024  ECC7 0024                            LDB,B6   INSTR$,AUTO
          1 000026  B846 0001                            LDR,R3   1,B6
          1 000028  F853                                 LDR,R7   R3
          1 000029  6C00                                 LDV,R6   0
          1 00002A  8400 0000 0002  xsym                 AID      QI_1+2
          1 00002D  8D47 0026                            SDI      TRAN_FILE$,AUTO

  20492   1 00002F  DCC7 0026                            LDB,B5   TRAN_FILE$,AUTO
          1 000031  8985                                 CMZ      ,B5
          1 000032  0881 0019                            BAGE     s:20512,PREL

  20493   1 000034  ECC7 0026                            LDB,B6   TRAN_FILE$,AUTO
          1 000036  E806                                 LDR,R6   ,B6
          1 000037  6046                                 SOR,R6   6
          1 000038  E570 0001                            AND,R6   1,IMO
          1 00003A  B846 0002                            LDR,R3   2,B6
          1 00003C  A856                                 LDR,R2   R6
          1 00003D  DCA0 0000 0000  xsym                 LDB,B5   QI_1,R2
          1 000040  DFC7 0040                            STB,B5   QCU@USE+14,AUTO
          1 000042  F853                                 LDR,R7   R3
          1 000043  6C00                                 LDV,R6   0
          1 000044  8447 0040                            AID      QCU@USE+14,AUTO
          1 000046  8D47 0026                            SDI      TRAN_FILE$,AUTO

  20497   1 000048  ECC7 0026                            LDB,B6   TRAN_FILE$,AUTO
          1 00004A  8986                                 CMZ      ,B6
          1 00004B  0869                                 BAL      s:20493,SPREL

       88    20509
       89    20510            %IF QI#DEBUG;
       90    20511
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:21   
       91    20512    1       IF TRAN_FILE$ -> QI$TRAN_FILE.WORD0_FLAGS.TYPE ~= %QI#TYPE_TRANSACTION

  20512   1 00004C  ECC7 0026                            LDB,B6   TRAN_FILE$,AUTO
          1 00004E  D806                                 LDR,R5   ,B6
          1 00004F  D570 000F                            AND,R5   15,IMO
          1 000051  5D0C                                 CMV,R5   12
          1 000052  0901 000A                            BE       s:20538,PREL

       92    20513    1       THEN
       93    20514    1         CALL QCE$ERROR_INTERNAL ( %E$INTERNAL_COMPILER_ERROR );

  20514   1 000054  BB80 0000 0001  02                   LAB,B3   +1
          1 000057  CBF0 0100                            LAB,B4   256,IMO
          1 000059  E380 0000 0000  xent                 LNJ,B6   QCE$ERROR_INTERNAL
          1 00005C       0001                            DC       s:20538,PREL

       94    20515
       95    20516            %ENDIF;
       96    20517
       97    20518            %DATA_ADDRESS ( THING@D = "TRAN_FILE$ -> QI$TRAN_FILE.STATUS_AREA@D",
       98    20519            CHECK_FOR_INDIRECTION = NO,
       99    20520            RESULT$ = TRAN_STATUS$ );

  20538   1 00005D  ECC7 0026                            LDB,B6   TRAN_FILE$,AUTO
          1 00005F  B846 0006                            LDR,R3   6,B6
          1 000061  F853                                 LDR,R7   R3
          1 000062  6C00                                 LDV,R6   0
          1 000063  8400 0000 0000  xsym                 AID      QI_1
          1 000066  8D47 0028                            SDI      TRAN_STATUS$,AUTO

      100    20557
      101    20558        /*  Used to be (pre-C00) there was a thing called G$REP_OPT_COMP              */
      102    20559        /*  which got called to "REPort_OutPuT_COMPlete" on the last                  */
      103    20560        /*  MSGID# we read with RRR set.   Don't do that no more, but                 */
      104    20561        /*  this is how it would have went (sort of).                                 */
      105    20562        /*  IF QI_1.CURRENT.TRAN_STATUS$ -> QI$TRAN_STATUS.CURRENT.IS_RRR_ID_VALID    */
      106    20563        /*  THEN                                                                      */
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:22   
      107    20564        /*    DO;                                                                     */
      108    20565        /*      QI_1.CURRENT.TRAN_STATUS$ ->                                          */
      109    20566        /*        QI$TRAN_STATUS.CURRENT.IS_RRR_ID_VALID = %NO;                       */
      110    20567        /*      FPT@REP_OTP_COMP.RRR_ID = QI_1.CURRENT.TRAN_STATUS$ ->                */
      111    20568        /*        QI$TRAN_STATUS.RRR_ID;                                              */
      112    20569        /*      CALL G$REP_OTP_COMP ( FPT@REP_OPT_COMP );                             */
      113    20570        /*      WHENALTRETURN                                                         */
      114    20571        /*      DO;                                                                   */
      115    20572        /*      END;                                                                  */
      116    20573        /*    END;                                                                    */
      117    20574        /*                                                                            */
      118    20575        /* Make sure the file is open input.                                          */
      119    20576    1       IF NOT TRAN_STATUS$ -> QI$TRAN_STATUS.INDICATORS.OPEN_FLAGS.IS_OUTPUT

  20576   1 000068  DCC7 0028                            LDB,B5   TRAN_STATUS$,AUTO
          1 00006A  82C5 0008                            LB,'0400'X        8,B5
          1 00006C       0400
          1 00006D  0501 000C                            BBT      s:20584,PREL
          1 00006F  82C5 0008                            LB,'0200'X        8,B5
          1 000071       0200
          1 000072  0501 0007                            BBT      s:20584,PREL

      120    20577    1         AND NOT TRAN_STATUS$ -> QI$TRAN_STATUS.INDICATORS.OPEN_FLAGS.IS_INPUT
      121    20578    1       THEN
      122    20579    2         DO;

      123    20580    2           QI_1.ERROR_STATUS = %E$FILE_NOT_OPEN;

  20580   1 000074  5C01                                 LDV,R5   1
          1 000075  DF00 0000 008C  xsym                 STR,R5   QI_1+140

      124    20581    2           GOTO CHECK_USE_PROCEDURE_OR_INVALID;

  20581   1 000078  0F81 01C8                            B        s:20843,PREL

      125    20582    2         END;
      126    20583    1       ELSE
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:23   
      127    20584    1         IF NOT TRAN_STATUS$ -> QI$TRAN_STATUS.INDICATORS.OPEN_FLAGS.IS_INPUT

  20584   1 00007A  82C5 0008                            LB,'0200'X        8,B5
  20584   1 00007C       0200
          1 00007D  0501 0007                            BBT      s:20591,PREL

      128    20585    1         THEN
      129    20586    2           DO;

      130    20587    2             QI_1.ERROR_STATUS = %E$FILE_NOT_OPEN_INPUT;

  20587   1 00007F  5C05                                 LDV,R5   5
          1 000080  DF00 0000 008C  xsym                 STR,R5   QI_1+140

      131    20588    2             GOTO CHECK_USE_PROCEDURE_OR_INVALID;

  20588   1 000083  0F81 01BD                            B        s:20843,PREL

      132    20589    2           END;
      133    20590
      134    20591    1       FPT@READ = QI_FPT_READ;

  20591   1 000085  AB80 0000 0000  xsym                 LAB,B2   QI_FPT_READ
          1 000088  2C00                                 LDV,R2   0
          1 000089  6C24                                 LDV,R6   36
          1 00008A  BB87                                 LAB,B3   ,AUTO
          1 00008B  3C08                                 LDV,R3   8
          1 00008C  0008                                 MMM

      135    20592    1       VBASE ( FPT@READ.V_ ) = ADDR ( FPT@READ.V );

  20592   1 00008D  EBC7 0013                            LAB,B6   FPT@READ+15,AUTO
          1 00008F  EFC7 0005                            STB,B6   FPT@READ+1,AUTO

      136    20593    1       FPT@READ.CG_ = VECTOR ( VLP@CG );

  20593   1 000091  DBC7 0016                            LAB,B5   VLP@CG,AUTO
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:24   
          1 000093  DFC7 0041                            STB,B5   QCU@USE+15,AUTO
          1 000095  6C17                                 LDV,R6   23
          1 000096  EF47 0040                            STR,R6   QCU@USE+14,AUTO
          1 000098  ABC7 0040                            LAB,B2   QCU@USE+14,AUTO
          1 00009A  2C00                                 LDV,R2   0
          1 00009B  6C06                                 LDV,R6   6
          1 00009C  BB87                                 LAB,B3   ,AUTO
          1 00009D  3C1A                                 LDV,R3   26
          1 00009E  0008                                 MMM

      137    20594    1       VLP@CG = QI_VLP_CG;

  20594   1 00009F  AB80 0000 0000  xsym                 LAB,B2   QI_VLP_CG
          1 0000A2  2C00                                 LDV,R2   0
          1 0000A3  6C18                                 LDV,R6   24
          1 0000A4  BB87                                 LAB,B3   ,AUTO
          1 0000A5  3C2C                                 LDV,R3   44
          1 0000A6  0008                                 MMM

      138    20595
      139    20596    1       FPT@READ.V.DCB# = TRAN_FILE$ -> QI$TRAN_FILE.DCB#;

  20596   1 0000A7  ECC7 0026                            LDB,B6   TRAN_FILE$,AUTO
          1 0000A9  E846 0008                            LDR,R6   8,B6
          1 0000AB  E7C7 0013                            STH,R6   FPT@READ+15,AUTO

      140    20597
      141    20598            %DATA_ADDRESS ( THING@D = "TRAN_FILE$ -> QI$TRAN_FILE.BUFFER@D",
      142    20599            CHECK_FOR_INDIRECTION = NO,
      143    20600            RESULT$ = "VBASE ( FPT@READ.BUF_ )" );

  20618   1 0000AD  B846 0002                            LDR,R3   2,B6
          1 0000AF  F853                                 LDR,R7   R3
          1 0000B0  6C00                                 LDV,R6   0
          1 0000B1  8400 0000 0000  xsym                 AID      QI_1
          1 0000B4  8D47 000B                            SDI      FPT@READ+7,AUTO

PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:25   
      144    20637
      145    20638    1       VBOUND ( FPT@READ.BUF_ ) = TRAN_FILE$ -> QI$TRAN_FILE.MAX_RECORD_SIZE - 1;

  20638   1 0000B6  D846 0001                            LDR,R5   1,B6
          1 0000B8  5EFF                                 ADV,R5   -1
          1 0000B9  DF47 000A                            STR,R5   FPT@READ+6,AUTO

      146    20639
      147    20640    1       IF INSTR$ -> QI$OP_READ_TRAN.NO_DATA

  20640   1 0000BB  DCC7 0024                            LDB,B5   INSTR$,AUTO
          1 0000BD  82C5 0002                            LB,'0001'X        2,B5
          1 0000BF       0001
          1 0000C0  0581 0006                            BBF      s:20644,PREL

      148    20641    1       THEN
      149    20642    1         FPT@READ.V.DVBYTE.NODAT = %YES;

  20642   1 0000C2  8947 0015                            LBT,'0400'X       FPT@READ+17,AUTO
  20642   1 0000C4       0400
          1 0000C5  0F81 0004                            B        s:20646,PREL

      150    20643    1       ELSE
      151    20644    1         FPT@READ.V.DVBYTE.NODAT = %NO;

  20644   1 0000C7  8847 0015                            LBF,'0400'X       FPT@READ+17,AUTO
  20644   1 0000C9       0400

      152    20645
      153    20646    1       QI_1.A_REG = 0;

  20646   1 0000CA  8700 0000 0054  xsym                 CL       QI_1+84

      154    20647    1       QI_1.AT_END = 0;

  20647   1 0000CD  8700 0000 0056  xsym                 CL       QI_1+86

PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:26   
      155    20648    1       QI_1.NO_DATA = 0;

  20648   1 0000D0  8700 0000 0060  xsym                 CL       QI_1+96

      156    20649
      157    20650    1       IF TRAN_FILE$ -> QI$TRAN_FILE.WORD0_FLAGS.INPUT_CLASS

  20650   1 0000D3  8286                                 LB,'0100'X        ,B6
  20650   1 0000D4       0100
          1 0000D5  0581 0016                            BBF      s:20667,PREL

      158    20651    1       THEN
      159    20652    2         DO;

      160    20653        /* Report                                                                     */
      161    20654    2           QI_1.SOURCE$ = ADDR ( TRAN_FILE$ -> QI$TRAN_FILE.TYPE@P );

  20654   1 0000D7  CBC6 000B                            LAB,B4   11,B6
          1 0000D9  CF80 0000 0018  xsym                 STB,B4   QI_1+24

      162    20655
      163    20656    2           CALL QCS$SETUP_TARGET;

  20656   1 0000DC  CBF0 0000                            LAB,B4   0,IMO
          1 0000DE  E380 0000 0000  xent                 LNJ,B6   QCS$SETUP_TARGET
          1 0000E1       0001                            DC       s:20661,PREL

      164    20657
      165    20658                /*  The compiler should always force TYPE variables
      166    20659                    to be 01-level items, and therefore word-aligned.
      167    20660                    (So we don't have to bother with QI_1.OFFSET.T).  */
      168    20661    2           VLP@CG.MSGTYP# = QI_1.OP.DATA.T$ -> QI$MESSAGE_TYPE.TEXT;

  20661   1 0000E2  AC80 0000 0022  xsym                 LDB,B2   QI_1+34
          1 0000E5  2C00                                 LDV,R2   0
          1 0000E6  6C08                                 LDV,R6   8
          1 0000E7  BB87                                 LAB,B3   ,AUTO
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:27   
          1 0000E8  3C34                                 LDV,R3   52
          1 0000E9  0008                                 MMM

      169    20662
      170    20663    2         END;

  20663   1 0000EA  0F81 00CF                            B        s:20737,PREL

      171    20664    1       ELSE
      172    20665    2         DO;

      173    20666        /* Response                                                                   */
      174    20667    2           FPT@READ.V.KEYS = %YES;

  20667   1 0000EC  8947 0013                            LBT,'0080'X       FPT@READ+15,AUTO
  20667   1 0000EE       0080

      175    20668
      176    20669    2           IF TRAN_FILE$ -> QI$TRAN_FILE.WORD0_FLAGS.IS_ID_VALID

  20669   1 0000EF  8286                                 LB,'1000'X        ,B6
  20669   1 0000F0       1000
          1 0000F1  0581 00AC                            BBF      s:20730,PREL

      177    20670    2           THEN
      178    20671    3             DO;

      179    20672    3               FPT@READ.KEY_ = VECTOR ( VLP@CG.MSGID# );

  20672   1 0000F3  CBC7 001F                            LAB,B4   VLP@CG+9,AUTO
          1 0000F5  CFC7 0041                            STB,B4   QCU@USE+15,AUTO
          1 0000F7  4C03                                 LDV,R4   3
          1 0000F8  CF47 0040                            STR,R4   QCU@USE+14,AUTO
          1 0000FA  ABC7 0040                            LAB,B2   QCU@USE+14,AUTO
          1 0000FC  2C00                                 LDV,R2   0
          1 0000FD  6C06                                 LDV,R6   6
          1 0000FE  BB87                                 LAB,B3   ,AUTO
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:28   
          1 0000FF  3C0E                                 LDV,R3   14
          1 000100  0008                                 MMM

      180    20673
      181    20674    3               QI_1.SOURCE$ = ADDR ( TRAN_FILE$ -> QI$TRAN_FILE.ID@P );

  20674   1 000101  ECC7 0026                            LDB,B6   TRAN_FILE$,AUTO
          1 000103  DBC6 0005                            LAB,B5   5,B6
          1 000105  DF80 0000 0018  xsym                 STB,B5   QI_1+24

      182    20675    3               CALL QCS$SETUP_SOURCE;

  20675   1 000108  CBF0 0000                            LAB,B4   0,IMO
          1 00010A  E380 0000 0000  xent                 LNJ,B6   QCS$SETUP_SOURCE
          1 00010D       0001                            DC       s:20677,PREL

      183    20676
      184    20677    4               DO CASE ( QI_1.TYPE.S );

  20677   1 00010E  B800 0000 0050  xsym                 LDR,R3   QI_1+80
          1 000111  3D03                                 CMV,R3   3
          1 000112  0281 0080                            BGE      s:20722,PREL
          1 000114  A830 0000 011A  01                   LDR,R2   s:20677+12,R3
          1 000117  83A0 0000 011D  01                   JMP      s:20682,R2
          1 00011A       004B                            DC       s:20707,PREL
          1 00011B       004B                            DC       s:20707,PREL
          1 00011C       0000                            DC       s:20682,PREL

      185    20678
      186    20679    4                 CASE ( %QI#TYPE_BINARY );

      187    20680                            %IF QI#DEBUG;
      188    20681
      189    20682    4                   IF QI_1.OP.LEN.S ~= %QI#MAX_BINARY_LENGTH

  20682   1 00011D  E800 0000 0026  xsym                 LDR,R6   QI_1+38
          1 000120  6D04                                 CMV,R6   4
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:29   
          1 000121  0901 000A                            BE       s:20688,PREL

      190    20683    4                   THEN
      191    20684    4                     CALL QCE$ERROR_INTERNAL ( %E$INTERNAL_COMPILER_ERROR );

  20684   1 000123  BB80 0000 0001  02                   LAB,B3   +1
          1 000126  CBF0 0100                            LAB,B4   256,IMO
          1 000128  E380 0000 0000  xent                 LNJ,B6   QCE$ERROR_INTERNAL
          1 00012B       0001                            DC       s:20688,PREL

      192    20685
      193    20686                            %ENDIF;
      194    20687
      195    20688    4                   QI_1.OP.CIP.T_A (0) = QI_31_DIGIT_ST_PACKED_A (0);

  20688   1 00012C  E800 0000 0000  xsym                 LDR,R6   QI_31_DIGIT_ST_PACKED
          1 00012F  EF00 0000 001C  xsym                 STR,R6   QI_1+28

      196    20689    4                   QI_1.OP.DATA.T$ = ADDR ( QI@OTTER_SPACE );

  20689   1 000132  EBC7 002A                            LAB,B6   QI@OTTER_SPACE,AUTO
          1 000134  EF80 0000 0022  xsym                 STB,B6   QI_1+34

      197    20690    4                   QI_1.OP.DEC.T = 0;

  20690   1 000137  8700 0000 002A  xsym                 CL       QI_1+42

      198    20691
      199    20692    4                   QI_1.OP.SIZE_ERROR = %QI#DONT_CHECK_FOR_SIZE_ERROR;

  20692   1 00013A  8700 0000 0030  xsym                 CL       QI_1+48

      200    20693
      201    20694    4                   CALL QCC$CBD ( QI_1.OP );

  20694   1 00013D  BB80 0000 0003  02                   LAB,B3   +3
          1 000140  CBF0 0100                            LAB,B4   256,IMO
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:30   
          1 000142  E380 0000 0000  xent                 LNJ,B6   QCC$CBD
          1 000145       0001                            DC       s:20696,PREL

      202    20695
      203    20696    4                   QI_1.OP.CIP.S_A (0) = QI_1.OP.CIP.T_A (0);

  20696   1 000146  E800 0000 001C  xsym                 LDR,R6   QI_1+28
          1 000149  EF00 0000 001A  xsym                 STR,R6   QI_1+26

      204    20697    4                   QI_1.OP.DATA.S$ = QI_1.OP.DATA.T$;

  20697   1 00014C  EC80 0000 0022  xsym                 LDB,B6   QI_1+34
          1 00014F  EF80 0000 0020  xsym                 STB,B6   QI_1+32

      205    20698    4                   QI_1.OP.CIP.T_A (0) = QI_32_BIT_BINARY_A (0);

  20698   1 000152  E800 0000 0000  xsym                 LDR,R6   QI_32_BIT_BINARY
          1 000155  EF00 0000 001C  xsym                 STR,R6   QI_1+28

      206    20699    4                   QI_1.OP.DATA.T$ = ADDR ( VLP@CG.MSGID# );

  20699   1 000158  DBC7 001F                            LAB,B5   VLP@CG+9,AUTO
          1 00015A  DF80 0000 0022  xsym                 STB,B5   QI_1+34

      207    20700
      208    20701    4                   CALL QCC$CDB ( QI_1.OP );

  20701   1 00015D  BB80 0000 0003  02                   LAB,B3   +3
          1 000160  CBF0 0100                            LAB,B4   256,IMO
          1 000162  E380 0000 0000  xent                 LNJ,B6   QCC$CDB
          1 000165       0001                            DC       s:20701+9,PREL
          1 000166  0F81 003D                            B        s:20731,PREL

      209    20702
      210    20703    4                 CASE ( %QI#TYPE_DISPLAY,

      211    20704    4                     %QI#TYPE_PACKED );
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:31   
      212    20705                            %IF QI#DEBUG;
      213    20706
      214    20707    4                   IF QI_1.OP.LEN.S ~= 10

  20707   1 000168  E800 0000 0026  xsym                 LDR,R6   QI_1+38
          1 00016B  6D0A                                 CMV,R6   10
          1 00016C  0901 000A                            BE       s:20713,PREL

      215    20708    4                   THEN
      216    20709    4                     CALL QCE$ERROR_INTERNAL ( %E$INTERNAL_COMPILER_ERROR );

  20709   1 00016E  BB80 0000 0001  02                   LAB,B3   +1
          1 000171  CBF0 0100                            LAB,B4   256,IMO
          1 000173  E380 0000 0000  xent                 LNJ,B6   QCE$ERROR_INTERNAL
          1 000176       0001                            DC       s:20713,PREL

      217    20710
      218    20711                            %ENDIF;
      219    20712
      220    20713    4                   QI_1.OP.CIP.T_A (0) = QI_32_BIT_BINARY_A (0);

  20713   1 000177  E800 0000 0000  xsym                 LDR,R6   QI_32_BIT_BINARY
          1 00017A  EF00 0000 001C  xsym                 STR,R6   QI_1+28

      221    20714    4                   QI_1.OP.DATA.T$ = ADDR ( VLP@CG.MSGID# );

  20714   1 00017D  EBC7 001F                            LAB,B6   VLP@CG+9,AUTO
          1 00017F  EF80 0000 0022  xsym                 STB,B6   QI_1+34

      222    20715    4                   QI_1.OP.DEC.T = 0;

  20715   1 000182  8700 0000 002A  xsym                 CL       QI_1+42

      223    20716
      224    20717    4                   QI_1.OP.SIZE_ERROR = %QI#DONT_CHECK_FOR_SIZE_ERROR;

  20717   1 000185  8700 0000 0030  xsym                 CL       QI_1+48
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:32   

      225    20718
      226    20719    4                   CALL QCC$CDB ( QI_1.OP );

  20719   1 000188  BB80 0000 0003  02                   LAB,B3   +3
          1 00018B  CBF0 0100                            LAB,B4   256,IMO
          1 00018D  E380 0000 0000  xent                 LNJ,B6   QCC$CDB
          1 000190       0001                            DC       s:20719+9,PREL
          1 000191  0F81 0012                            B        s:20731,PREL

      227    20720
      228    20721    4                 CASE ( ELSE );

      229    20722    4                   CALL QCE$ERROR_INTERNAL ( %E$INTERNAL_COMPILER_ERROR );

  20722   1 000193  BB80 0000 0001  02                   LAB,B3   +1
          1 000196  CBF0 0100                            LAB,B4   256,IMO
          1 000198  E380 0000 0000  xent                 LNJ,B6   QCE$ERROR_INTERNAL
          1 00019B       0001                            DC       s:20726,PREL

      230    20723
      231    20724    4               END;

      232    20725
      233    20726    3             END;

  20726   1 00019C  0F81 0007                            B        s:20731,PREL

      234    20727
      235    20728    2           ELSE
      236    20729        /* Use save ID.                                                               */
      237    20730    2             VLP@CG.MSGID# = TRAN_STATUS$ -> QI$TRAN_STATUS.LAST_ID;

  20730   1 00019E  CCC7 0028                            LDB,B4   TRAN_STATUS$,AUTO
          1 0001A0  8CC4 0004                            LDI      4,B4
          1 0001A2  8D47 001F                            SDI      VLP@CG+9,AUTO

PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:33   
      238    20731    2           FPT@READ.KEY_ = VECTOR ( VLP@CG.MSGID# );

  20731   1 0001A4  EBC7 001F                            LAB,B6   VLP@CG+9,AUTO
          1 0001A6  EFC7 0041                            STB,B6   QCU@USE+15,AUTO
          1 0001A8  6C03                                 LDV,R6   3
          1 0001A9  EF47 0040                            STR,R6   QCU@USE+14,AUTO
          1 0001AB  ABC7 0040                            LAB,B2   QCU@USE+14,AUTO
          1 0001AD  2C00                                 LDV,R2   0
          1 0001AE  6C06                                 LDV,R6   6
          1 0001AF  BB87                                 LAB,B3   ,AUTO
          1 0001B0  3C0E                                 LDV,R3   14
          1 0001B1  0008                                 MMM

      239    20732
      240    20733    2           VLP@CG.MSGTYP# = '*RESP?';

  20733   1 0001B2  EB80 0000 0000  00                   LAB,B6   0
          1 0001B5  0021                                 ALR      ;
          1 0001B6       4606 0000                                ALPHANUM(0,B6,,6),;
          1 0001B8       4807 001A                                ALPHANUM(VLP@CG+4,AUTO,,8,FILL)

      241    20734
      242    20735    2         END;

      243    20736
      244    20737    1       CALL QGB$READ ( FPT@READ, QGB_PARAM )

  20737   1 0001BA  EB80 0000 0000  xsym                 LAB,B6   QGB_PARAM
          1 0001BD  437F                                 CSYNC    s:20737+2,SPREL
          1 0001BE  EFC7 0042                            STB,B6   QCU@USE+16,AUTO
          1 0001C0  DBC7 0004                            LAB,B5   FPT@READ,AUTO
          1 0001C2  DFC7 0040                            STB,B5   QCU@USE+14,AUTO
          1 0001C4  BBC7 0040                            LAB,B3   QCU@USE+14,AUTO
          1 0001C6  CBF0 0200                            LAB,B4   512,IMO
          1 0001C8  E380 0000 0000  xent                 LNJ,B6   QGB$READ
          1 0001CB       0003                            DC       s:20741,PREL
          1 0001CC  0F81 002B                            B        s:20760,PREL
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:34   

      245    20738    1       WHENALTRETURN
      246    20739    2         DO;

      247    20740
      248    20741    3           DO CASE ( QGB_PARAM.ERR.ERR# );

  20741   1 0001CE  B800 0000 0006  xsym                 LDR,R3   QGB_PARAM+6
          1 0001D1  3043                                 SOR,R3   3
          1 0001D2  BA70 FBC0                            ADD,R3   -1088,IMO
          1 0001D4  3D01                                 CMV,R3   1
          1 0001D5  0281 000D                            BGE      s:20748,PREL
          1 0001D7  A830 0000 01DD  01                   LDR,R2   s:20741+15,R3
          1 0001DA  83A0 0000 01DE  01                   JMP      s:20744,R2
          1 0001DD       0000                            DC       s:20744,PREL

      249    20742
      250    20743    3             CASE ( %E$NODAT );

      251    20744    3               QI_1.NO_DATA = QI_1.NO_DATA + 1;

  20744   1 0001DE  8A80 0000 0060  xsym                 INC      QI_1+96

      252    20745    3               GOTO UPDATE_SILLY_ERROR_STATUS;

  20745   1 0001E1  0F81 0042                            B        s:20790,PREL

      253    20746
      254    20747    3             CASE ( ELSE );

      255    20748    3               IF QGB_PARAM.ERR.ERR# = %E$LD

  20748   1 0001E3  E800 0000 0006  xsym                 LDR,R6   QGB_PARAM+6
          1 0001E6  6043                                 SOR,R6   3
          1 0001E7  6D07                                 CMV,R6   7
          1 0001E8  0981 0008                            BNE      s:20752,PREL

PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:35   
      256    20749    3               THEN
      257    20750    3                 QI_1.ERROR_STATUS = %E$TRANSACTION_LOST_DATA;

  20750   1 0001EA  D870 00CF                            LDR,R5   207,IMO
          1 0001EC  DF00 0000 008C  xsym                 STR,R5   QI_1+140
          1 0001EF  0F81 0006                            B        s:20754,PREL

      258    20751    3               ELSE
      259    20752    3                 QI_1.ERROR_STATUS = %E$TRANSACTION_READ_ERROR;

  20752   1 0001F1  D870 00C8                            LDR,R5   200,IMO
          1 0001F3  DF00 0000 008C  xsym                 STR,R5   QI_1+140

      260    20753
      261    20754    3               GOTO CHECK_USE_PROCEDURE_OR_INVALID;

  20754   1 0001F6  0F81 004A                            B        s:20843,PREL

      262    20755
      263    20756    3           END;

      264    20757
      265    20758    2         END;
      266    20759
      267    20760    1       IF NOT TRAN_FILE$ -> QI$TRAN_FILE.WORD0_FLAGS.INPUT_CLASS

  20760   1 0001F8  ECC7 0026                            LDB,B6   TRAN_FILE$,AUTO
          1 0001FA  8286                                 LB,'0100'X        ,B6
          1 0001FB       0100
          1 0001FC  0501 0012                            BBT      s:20782,PREL
          1 0001FE  DB80 0000 0000  00                   LAB,B5   0
          1 000201  0022                                 ACM      ;
          1 000202       4807 001A                                ALPHANUM(VLP@CG+4,AUTO,,8,FILL),;
          1 000204       4605 0003                                ALPHANUM(3,B5,,6,FILL)
          1 000206  5301 0008                            CBNE     s:20782,PREL

      268    20761        /* Response read:  must check for *RESPX (tpap abort)                         */
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:36   
      269    20762    1         AND VLP@CG.MSGTYP# = '*RESPX'
      270    20763    1       THEN
      271    20764    2         DO;

      272    20765        /* Our TPAP is gone!                                                          */
      273    20766    2           QI_1.ERROR_STATUS = %E$TPAP_ABORT;

  20766   1 000208  E870 00C9                            LDR,R6   201,IMO
          1 00020A  EF00 0000 008C  xsym                 STR,R6   QI_1+140

      274    20767    2           GOTO CHECK_USE_PROCEDURE_OR_INVALID;

  20767   1 00020D  0F81 0033                            B        s:20843,PREL

      275    20768    2         END;
      276    20769
      277    20770        /*  More historic RRR code:  here's where the RRR_ID gets saved               */
      278    20771        /*  away so it can be RRR'ed on the next read.  (See previous).               */
      279    20772        /*  IF QGB_PARM.DVBYTE.RRR                                                    */
      280    20773        /*  THEN                                                                      */
      281    20774        /*    DO;                                                                     */
      282    20775        /*      TRAN_STATUS$ -> QI$TRAN_STATUS.RRR_ID = VLP@CG.MSGID#;                */
      283    20776        /*      TRAN_STATUS$ -> QI$TRAN_STATUS.CURRENT.IS_RRR_ID_VALID = %YES;        */
      284    20777        /*    END;                                                                    */
      285    20778
      286    20779            /*  For REPORT reads, we replace the TYPE variable with
      287    20780                the actual MSGTYP# read.
      288    20781                E.g., replace ICK? with ICKTYPE7.  */
      289    20782    1       IF TRAN_FILE$ -> QI$TRAN_FILE.WORD0_FLAGS.INPUT_CLASS

  20782   1 00020F  0581 0014                            BBF      s:20790,PREL

      290    20783    1       THEN
      291    20784    2         DO;

      292    20785    2           QI_1.SOURCE$ = ADDR ( TRAN_FILE$ -> QI$TRAN_FILE.TYPE@P );

PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:37   
  20785   1 000211  DBC6 000B                            LAB,B5   11,B6
          1 000213  DF80 0000 0018  xsym                 STB,B5   QI_1+24

      293    20786
      294    20787    2           CALL QCS$SETUP_TARGET;

  20787   1 000216  CBF0 0000                            LAB,B4   0,IMO
          1 000218  E380 0000 0000  xent                 LNJ,B6   QCS$SETUP_TARGET
          1 00021B       0001                            DC       s:20789,PREL

      295    20788
      296    20789    2           QI_1.OP.DATA.T$ -> QI$MESSAGE_TYPE.TEXT = VLP@CG.MSGTYP#;

  20789   1 00021C  AB87                                 LAB,B2   ,AUTO
          1 00021D  2C34                                 LDV,R2   52
          1 00021E  6C08                                 LDV,R6   8
          1 00021F  BC80 0000 0022  xsym                 LDB,B3   QI_1+34
          1 000222  3C00                                 LDV,R3   0
          1 000223  0008                                 MMM

      297    20790    2         END;

      298    20791
      299    20792    1   UPDATE_SILLY_ERROR_STATUS:
      300    20793    1       IF TRAN_FILE$ -> QI$TRAN_FILE.WORD0_FLAGS.IS_ERROR_STATUS_VALID

  20793   1 000224  ECC7 0026            UPDATE_SILLY_ER*LDB,B6   TRAN_FILE$,AUTO
          1 000226  8286                                 LB,'4000'X        ,B6
          1 000227       4000
          1 000228  0581 0014                            BBF      s:20839,PREL

      301    20794    1       THEN
      302    20795    2         DO;

      303    20796                %DATA_ADDRESS ( THING@D = "TRAN_FILE$ -> QI$TRAN_FILE.ERROR_STATUS@D",
      304    20797                CHECK_FOR_INDIRECTION = NO,
      305    20798                RESULT$ = ERROR_STATUS$ );
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:38   

  20816   1 00022A  B846 0003                            LDR,R3   3,B6
          1 00022C  F853                                 LDR,R7   R3
          1 00022D  6C00                                 LDV,R6   0
          1 00022E  8400 0000 0000  xsym                 AID      QI_1
          1 000231  8D47 0022                            SDI      ERROR_STATUS$,AUTO

      306    20835
      307    20836    2           ERROR_STATUS$ -> QI$ERROR_STATUS.TEXT = %QI#OP_READ_TRAN_TEXT;

  20836   1 000233  DB80 0000 0000  00                   LAB,B5   0
          1 000236  CCC7 0022                            LDB,B4   ERROR_STATUS$,AUTO
          1 000238  0021                                 ALR      ;
          1 000239       4205 0006                                ALPHANUM(6,B5,,2),;
          1 00023B       4804 0000                                ALPHANUM(0,B4,,8,FILL)

      308    20837    2         END;

      309    20838
      310    20839    1       RETURN;

  20839   1 00023D  437F                                 CSYNC    s:20836+9,SPREL
          1 00023E  C380 0000 0000  xent                 LNJ,B4   X6A_ARET

      311    20840
      312    20841        %EJECT;
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:39   
      313    20842    1   CHECK_USE_PROCEDURE_OR_INVALID:
      314    20843    1       QI_1.CURRENT.TRAN$ = TRAN_FILE$;

  20843   1 000241  ECC7 0026            CHECK_USE_PROCE*LDB,B6   TRAN_FILE$,AUTO
          1 000243  EF80 0000 0076  xsym                 STB,B6   QI_1+118

      315    20844    1       QI_1.CURRENT.TRAN_STATUS$ = TRAN_STATUS$;

  20844   1 000246  DCC7 0028                            LDB,B5   TRAN_STATUS$,AUTO
          1 000248  DF80 0000 0078  xsym                 STB,B5   QI_1+120

      316    20845
      317    20846    1       QCU@USE.USE_DEFAULT_IO = %QI#USE_DEFAULT_NONE;

  20846   1 00024B  8747 0036                            CL       QCU@USE+4,AUTO

      318    20847    1       QCU@USE.IS_TIME_TO_SAVE_AWAY_FIELDS = %NO;

  20847   1 00024D  8747 0037                            CL       QCU@USE+5,AUTO

      319    20848    1       QCU@USE.CURR_FRAME$ = ADDR (NIL);

  20848   1 00024F  CB80 0000 0000                       LAB,B4   0
          1 000252  CFC7 0032                            STB,B4   QCU@USE,AUTO

      320    20849    1       QCU@USE.CURR_NODE$ = TRAN_FILE$;

  20849   1 000254  EFC7 0034                            STB,B6   QCU@USE+2,AUTO

      321    20850
      322    20851    1       CALL QCU$USE_INVALID_IO ( QCU@USE );

  20851   1 000256  BBC7 0032                            LAB,B3   QCU@USE,AUTO
          1 000258  BFC7 0040                            STB,B3   QCU@USE+14,AUTO
          1 00025A  BBC7 0040                            LAB,B3   QCU@USE+14,AUTO
          1 00025C  CBF0 0100                            LAB,B4   256,IMO
          1 00025E  E380 0000 0000  xent                 LNJ,B6   QCU$USE_INVALID_IO
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:40   
          1 000261       0001                            DC       s:20853,PREL

      323    20852
      324    20853    2       DO CASE ( QCU@USE.STATUS );

  20853   1 000262  B847 003F                            LDR,R3   QCU@USE+13,AUTO
          1 000264  3D03                                 CMV,R3   3
          1 000265  0281 0012                            BGE      s:20865,PREL
          1 000267  A830 0000 026D  01                   LDR,R2   s:20853+11,R3
          1 00026A  83A0 0000 0270  01                   JMP      s:20856,R2
          1 00026D       0000                            DC       s:20856,PREL
          1 00026E       0003                            DC       s:20859,PREL
          1 00026F       0005                            DC       s:20862,PREL

      325    20854
      326    20855    2         CASE ( %QI#USE_INVALID_RETURN );

      327    20856    2           RETURN;

  20856   1 000270  C380 0000 0000  xent                 LNJ,B4   X6A_ARET

      328    20857
      329    20858    2         CASE ( %QI#USE_INVALID_RETRY );

      330    20859    2           GOTO RETRY_TRANSACTION_READ;

  20859   1 000273  0F81 FDA7                            B        s:20466,PREL

      331    20860
      332    20861    2         CASE ( %QI#USE_INVALID_SKIP_TO_NEXT );

      333    20862    2           RETURN;

  20862   1 000275  C380 0000 0000  xent                 LNJ,B4   X6A_ARET

      334    20863
      335    20864    2         CASE ( ELSE );
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:41   

      336    20865    2           CALL QCE$ERROR_INTERNAL ( %E$INTERNAL_INTERPRETER_ERROR );

  20865   1 000278  BB80 0000 0006  02                   LAB,B3   +6
          1 00027B  CBF0 0100                            LAB,B4   256,IMO
          1 00027D  E380 0000 0000  xent                 LNJ,B6   QCE$ERROR_INTERNAL
          1 000280       0001                            DC       s:20869,PREL

      337    20866
      338    20867    2       END;

      339    20868
      340    20869    1   END QBR$READ_TRAN;

  20869   1 000281  C380 0000 0000  xent                 LNJ,B4   X6A_ARET

PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:42   
--  Include file information  --

   QCU_USE_M.:E05TOU  is referenced.
   QI_MACROS_M.:E05TOU  is referenced.
   QI_EQUATES_E.:E05TOU  is referenced.
   QG_MACRO_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
   QI_PERR_C.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is referenced.
   KI_CP6.:E05TOU  was found in the system file and is referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure QBR$READ_TRAN.
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:43   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

    22-0-0/w PTR         r     1 ERROR_STATUS$              4-0-0/w STRC(288)   r     1 FPT@READ
    24-0-0/w PTR         r     1 INSTR$                    32-0-0/w STRC(224)   r     1 QCU@USE
    2A-0-0/w STRC(128)   r     1 QI@OTTER_SPACE            26-0-0/w PTR         r     1 TRAN_FILE$
    28-0-0/w PTR         r     1 TRAN_STATUS$              16-0-0/w STRC(192)   r     1 VLP@CG

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(432)   r     1 QGB_PARAM                  0-0-0/d STRC(2576)  r     1 QI_1
     0-0-0/d STRC(32)    r     1 QI_31_DIGIT_ST_PACKED
     0-0-0/d UBIN(16)    r     1 QI_31_DIGIT_ST_PACKED_A(0:1)
     0-0-0/d STRC(32)    r     1 QI_32_BIT_BINARY
     0-0-0/d UBIN(16)    r     1 QI_32_BIT_BINARY_A(0:1)
     0-0-0/w STRC(288)   r     1 QI_FPT_READ                0-0-0/w STRC(192)   r     1 QI_VLP_CG

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(48)    r     1 QI$DAD                     0-0-0/c STRC(64)    r     1 QI$ERROR_STATUS
     0-0-0/c STRC(64)    r     1 QI$MESSAGE_TYPE            0-0-0/w STRC(64)    r     1 QI$OP_READ_TRAN
     0-0-0/w STRC(192)   r     1 QI$TRAN_FILE               0-0-0/w STRC(144)   r     1 QI$TRAN_STATUS
     0-0-0/c ASTR(8)     r     1 QI$VARIABLE_IDENTIFIER


   Procedure QBR$READ_TRAN requires 644 words for executable code.
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:44   
   Procedure QBR$READ_TRAN requires 68 words of local(AUTO) storage.

    No errors detected in file QBR$READ_TRAN.:E05TSI    .
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:45   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:46   
          MINI XREF LISTING

CHECK_USE_PROCEDURE_OR_INVALID
     20843**LABEL   20581--GOTO    20588--GOTO    20754--GOTO    20767--GOTO
ERROR_STATUS$
     20296**DCL     20816<<ASSIGN  20836>>ASSIGN
FPT@READ
      1535**DCL     20591<<ASSIGN  20737<>CALL
FPT@READ.BUF_
      1537**DCL     20618<<ASSIGN  20638<<ASSIGN
FPT@READ.CG_
      1537**DCL     20593<<ASSIGN
FPT@READ.KEY_
      1537**DCL     20672<<ASSIGN  20731<<ASSIGN
FPT@READ.V
      1540**DCL     20592--ASSIGN
FPT@READ.V.DCB#
      1540**DCL     20596<<ASSIGN
FPT@READ.V.DVBYTE.NODAT
      1544**DCL     20642<<ASSIGN  20644<<ASSIGN
FPT@READ.V.KEYS
      1540**DCL     20667<<ASSIGN
FPT@READ.V_
      1537**DCL     20592<<ASSIGN
INSTR$
     20297**DCL     20458<<ASSIGN  20459>>ASSIGN  20490>>ASSIGN  20640>>IF
QCC$CBD
     20301**DCL-ENT 20694--CALL
QCC$CDB
     20302**DCL-ENT 20701--CALL    20719--CALL
QCE$ERROR_INTERNAL
     20303**DCL-ENT 20514--CALL    20684--CALL    20709--CALL    20722--CALL    20865--CALL
QCS$SETUP_SOURCE
     20305**DCL-ENT 20675--CALL
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:47   
QCS$SETUP_TARGET
     20306**DCL-ENT 20656--CALL    20787--CALL
QCU$UPDATE_SCREEN
     20307**DCL-ENT 20463--CALL
QCU$USE_INVALID_IO
     20308**DCL-ENT 20851--CALL
QCU@USE
     20410**DCL     20851<>CALL
QCU@USE.CURR_FRAME$
     20411**DCL     20848<<ASSIGN
QCU@USE.CURR_NODE$
     20413**DCL     20849<<ASSIGN
QCU@USE.IS_TIME_TO_SAVE_AWAY_FIELDS
     20418**DCL     20847<<ASSIGN
QCU@USE.STATUS
     20444**DCL     20853>>DOCASE
QCU@USE.USE_DEFAULT_IO
     20415**DCL     20846<<ASSIGN
QGB$READ
      1716**DCL-ENT 20737--CALL
QGB_PARAM
     12666**DCL     20737<>CALL
QGB_PARAM.DVE.DVBYTE.VFC
     12734**DCL     12735--REDEF
QGB_PARAM.DVE.EOMCHAR
     12746**DCL     12747--REDEF
QGB_PARAM.ERR.ERR#
     12725**DCL     20741>>DOCASE  20748>>IF
QGB_PARAM.MSG$
     12728**DCL     12729--REDEF
QGB_PARAM.UHDR$
     12753**DCL     12754--REDEF
QI$ACTIVATION_STATUS
     10492**DCL     10498--REDEF
QI$CIP
      9333**DCL      9403--REDEF
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:48   
QI$CIP.CA
      9338**DCL      9342--REDEF    9345--REDEF    9348--REDEF
QI$COBOL_DAD.PSEUDO_CIP
      9577**DCL      9602--REDEF
QI$COBOL_DAD.PSEUDO_CIP.ALPHANUMERIC
      9579**DCL      9584--REDEF
QI$COBOL_DAD.PSEUDO_CIP.NUMERIC.CB
      9585**DCL      9588--REDEF    9591--REDEF
QI$COBOL_DAD.VARIABLE_LENGTH_ITEMS
      9613**DCL      9629--REDEF    9637--REDEF    9645--REDEF
QI$COBOL_DAD.VARIABLE_LENGTH_ITEMS.LEVEL_MULTIPLIERS
      9614**DCL      9624--REDEF    9627--REDEF
QI$COBOL_DAD.WORD0
      9541**DCL      9542--REDEF    9556--REDEF
QI$COBOL_DAD_P_BITS.P
      9681**DCL      9687--REDEF
QI$CONDITION_CONTROL_BLOCK.LIST_A@P
      9167**DCL      9168--REDEF
QI$CONDITION_CONTROL_BLOCK.WORD0_FLAGS
      9163**DCL      9166--REDEF
QI$CONDITION_LEGAL_BLOCK.ARRAY@P
      9200**DCL      9201--REDEF    9202--REDEF
QI$DAD.PSEUDO_CIP
      9480**DCL      9505--REDEF
QI$DAD.PSEUDO_CIP.ALPHANUMERIC
      9482**DCL      9487--REDEF
QI$DAD.PSEUDO_CIP.DATA@
      9504**DCL     20493>>ASSIGN
QI$DAD.PSEUDO_CIP.NUMERIC.CB
      9488**DCL      9491--REDEF    9494--REDEF
QI$DAD.WORD0
      9449**DCL      9450--REDEF
QI$DAD.WORD0_FLAGS.INDIRECT
      9451**DCL     20492>>DOWHILE
QI$DAD.WORD0_FLAGS.IS_CONSTANT
      9456**DCL     20493>>ASSIGN
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:49   
QI$ERROR_MESSAGE_LINE
     12841**DCL     12843--REDEF
QI$ERROR_STATUS
     12838**DCL     12840--REDEF
QI$ERROR_STATUS.TEXT
     12839**DCL     20836<<ASSIGN
QI$FIELD_DAD.ELEMENTARY_ITEM.P
      9895**DCL      9902--REDEF
QI$FIELD_DAD.ONE_DIMENSIONAL_ITEM.P
      9915**DCL      9922--REDEF
QI$FIELD_DAD.PSEUDO_CIP
      9822**DCL      9847--REDEF
QI$FIELD_DAD.PSEUDO_CIP.ALPHANUMERIC
      9824**DCL      9829--REDEF
QI$FIELD_DAD.PSEUDO_CIP.NUMERIC.CB
      9830**DCL      9833--REDEF    9836--REDEF
QI$FIELD_DAD.TWO_DIMENSIONAL_ITEM.P
      9935**DCL      9942--REDEF
QI$FIELD_DAD.VARIABLE_LENGTH_ITEMS
      9878**DCL      9894--REDEF    9912--REDEF    9930--REDEF
QI$FIELD_DAD.VARIABLE_LENGTH_ITEMS.LEVEL_MULTIPLIERS
      9879**DCL      9889--REDEF    9892--REDEF
QI$FIELD_DAD.WORD0
      9774**DCL      9775--REDEF
QI$FIELD_DAD.WORD0_FLAGS.IO_FLAGS
      9778**DCL      9783--REDEF
QI$FIELD_DAD_P.P
      9976**DCL      9983--REDEF
QI$FIELD_STATUS.INDICATORS
     10642**DCL     10674--REDEF
QI$FIELD_STATUS.INDICATORS.ENABLED_FLAGS
     10646**DCL     10651--REDEF
QI$FIELD_STATUS.INDICATORS.OPEN_FLAGS
     10658**DCL     10665--REDEF
QI$FIELD_STATUS.INDICATORS.STATE_FLAGS
     10652**DCL     10657--REDEF
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:50   
QI$FILE.WORD0
     10098**DCL     10099--REDEF
QI$FILE_STATUS.INDICATORS
     10935**DCL     10967--REDEF
QI$FILE_STATUS.INDICATORS.ENABLED_FLAGS
     10939**DCL     10944--REDEF
QI$FILE_STATUS.INDICATORS.OPEN_FLAGS
     10951**DCL     10958--REDEF
QI$FILE_STATUS.INDICATORS.STATE_FLAGS
     10945**DCL     10950--REDEF
QI$FORM_FILE.USE_PROCEDURE
     10198**DCL     10205--REDEF
QI$FORM_FILE.WORD0
     10152**DCL     10153--REDEF
QI$FORM_STATUS.INDICATORS
     11056**DCL     11088--REDEF
QI$FORM_STATUS.INDICATORS.ENABLED_FLAGS
     11060**DCL     11065--REDEF
QI$FORM_STATUS.INDICATORS.OPEN_FLAGS
     11072**DCL     11079--REDEF
QI$FORM_STATUS.INDICATORS.STATE_FLAGS
     11066**DCL     11071--REDEF
QI$FRAME.WORD0
     10313**DCL     10314--REDEF
QI$FRAME_STATUS.INDICATORS
     11285**DCL     11317--REDEF
QI$FRAME_STATUS.INDICATORS.ENABLED_FLAGS
     11289**DCL     11294--REDEF
QI$FRAME_STATUS.INDICATORS.OPEN_FLAGS
     11301**DCL     11308--REDEF
QI$FRAME_STATUS.INDICATORS.STATE_FLAGS
     11295**DCL     11300--REDEF
QI$GZ_FIELD.DESCRIPTION.IO_FLAGS
     18167**DCL     18172--REDEF
QI$IDENTIFIER
     12844**DCL     12846--REDEF
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:51   
QI$INDICATORS
     10556**DCL     10586--REDEF
QI$INDICATORS.ENABLED_FLAGS
     10562**DCL     10567--REDEF
QI$INDICATORS.OPEN_FLAGS
     10574**DCL     10581--REDEF
QI$INDICATORS.STATE_FLAGS
     10568**DCL     10573--REDEF
QI$MAJOR_NODE.WORD0
     10012**DCL     10013--REDEF
QI$MAJOR_STATUS.INDICATORS
     10735**DCL     10767--REDEF
QI$MAJOR_STATUS.INDICATORS.ENABLED_FLAGS
     10739**DCL     10744--REDEF
QI$MAJOR_STATUS.INDICATORS.OPEN_FLAGS
     10751**DCL     10758--REDEF
QI$MAJOR_STATUS.INDICATORS.STATE_FLAGS
     10745**DCL     10750--REDEF
QI$MESSAGE_TYPE
     12835**DCL     12837--REDEF
QI$MESSAGE_TYPE.TEXT
     12836**DCL     20661>>ASSIGN  20789<<ASSIGN
QI$MINOR_NODE.WORD0
     10055**DCL     10056--REDEF
QI$MINOR_STATUS.INDICATORS
     10828**DCL     10860--REDEF
QI$MINOR_STATUS.INDICATORS.ENABLED_FLAGS
     10832**DCL     10837--REDEF
QI$MINOR_STATUS.INDICATORS.OPEN_FLAGS
     10844**DCL     10851--REDEF
QI$MINOR_STATUS.INDICATORS.STATE_FLAGS
     10838**DCL     10843--REDEF
QI$OP_ACCEPT.DATANAME@P
      7243**DCL      7244--REDEF
QI$OP_CALL.EPTR$
      7415**DCL      7416--REDEF
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:52   
QI$OP_CLEAR.IO_FLAGS
      7448**DCL      7451--REDEF
QI$OP_DISPLAY.FIELD_A@P
      7715**DCL      7716--REDEF
QI$OP_ENABLE.IO_FLAGS
      7802**DCL      7805--REDEF
QI$OP_IFCLS.ATTRIBUTE.TYPE
      7895**DCL      7900--REDEF
QI$OP_INSPECT.TALLYING_FOR_ITEM@P
      8129**DCL      8130--REDEF
QI$OP_INSPECT.TALLYING_INITIAL_ITEM@P
      8131**DCL      8132--REDEF
QI$OP_INSPECT.TALLYING_ITEM@P
      8127**DCL      8128--REDEF
QI$OP_OPEN.IO_FLAGS
      8689**DCL      8692--REDEF
QI$OP_PERFM.BINARY_ITERATION_COUNT@P
      8727**DCL      8728--REDEF
QI$OP_READ_TRAN.NEXT_CODE@P
      8818**DCL     20459--ASSIGN
QI$OP_READ_TRAN.NO_DATA
      8817**DCL     20640>>IF
QI$OP_READ_TRAN.TRAN_FILE@P
      8815**DCL     20490>>ASSIGN
QI$PSEUDO_CIP
      9228**DCL      9252--REDEF
QI$PSEUDO_CIP.ALPHANUMERIC
      9232**DCL      9237--REDEF
QI$PSEUDO_CIP.NUMERIC.CB
      9238**DCL      9241--REDEF    9244--REDEF
QI$TERMINAL_ATTRIBUTES
     10449**DCL     10462--REDEF
QI$TRAN_FILE.BUFFER@D
     10263**DCL     20618>>ASSIGN
QI$TRAN_FILE.DCB#
     10280**DCL     20596>>ASSIGN
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:53   
QI$TRAN_FILE.ERROR_STATUS@D
     10265**DCL     20816>>ASSIGN
QI$TRAN_FILE.ID@P
     10271**DCL     20674--ASSIGN
QI$TRAN_FILE.MAX_RECORD_SIZE
     10261**DCL     20638>>ASSIGN
QI$TRAN_FILE.STATUS_AREA@D
     10274**DCL     20538>>ASSIGN
QI$TRAN_FILE.TYPE@P
     10285**DCL     20654--ASSIGN  20785--ASSIGN
QI$TRAN_FILE.WORD0
     10234**DCL     10235--REDEF
QI$TRAN_FILE.WORD0_FLAGS.INPUT_CLASS
     10249**DCL     20650>>IF      20760>>IF      20782>>IF
QI$TRAN_FILE.WORD0_FLAGS.IS_ERROR_STATUS_VALID
     10239**DCL     20793>>IF
QI$TRAN_FILE.WORD0_FLAGS.IS_ID_VALID
     10245**DCL     20669>>IF
QI$TRAN_FILE.WORD0_FLAGS.TYPE
     10258**DCL     20512>>IF
QI$TRAN_STATUS.INDICATORS
     11169**DCL     11201--REDEF
QI$TRAN_STATUS.INDICATORS.ENABLED_FLAGS
     11173**DCL     11178--REDEF
QI$TRAN_STATUS.INDICATORS.OPEN_FLAGS
     11185**DCL     11192--REDEF
QI$TRAN_STATUS.INDICATORS.OPEN_FLAGS.IS_INPUT
     11189**DCL     20576>>IF      20584>>IF
QI$TRAN_STATUS.INDICATORS.OPEN_FLAGS.IS_OUTPUT
     11186**DCL     20576>>IF
QI$TRAN_STATUS.INDICATORS.STATE_FLAGS
     11179**DCL     11184--REDEF
QI$TRAN_STATUS.LAST_ID
     11143**DCL     20730>>ASSIGN
QI$VARIABLE_IDENTIFIER.LENGTH
     12848**DCL     12849--IMP-SIZ
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:54   
QI@OTTER_SPACE
     20325**DCL     20327--REDEF   20328--REDEF   20689--ASSIGN
QI_1.AT_END
     12126**DCL     20468<<ASSIGN  20647<<ASSIGN
QI_1.A_REG
     12122**DCL     20466<<ASSIGN  20646<<ASSIGN
QI_1.BASE
     11377**DCL     11384--REDEF
QI_1.BASE.DATA$
     11378**DCL     20538>>ASSIGN  20618>>ASSIGN  20816>>ASSIGN
QI_1.BASE.PROC$
     11380**DCL     20490>>ASSIGN
QI_1.BASE_A$
     11384**DCL     20493>>ASSIGN
QI_1.CURRENT.FILE$
     12268**DCL     12270--REDEF   12272--REDEF
QI_1.CURRENT.FILE_STATUS$
     12274**DCL     12276--REDEF   12278--REDEF
QI_1.CURRENT.TRAN$
     12272**DCL     20843<<ASSIGN
QI_1.CURRENT.TRAN_STATUS$
     12278**DCL     20844<<ASSIGN
QI_1.DAD
     12072**DCL     12077--REDEF
QI_1.ERROR_STATUS
     12302**DCL     20580<<ASSIGN  20587<<ASSIGN  20750<<ASSIGN  20752<<ASSIGN  20766<<ASSIGN
QI_1.FILE_HEAD
     12255**DCL     12262--REDEF
QI_1.INSTR$
     11385**DCL     20458>>ASSIGN  20459<<ASSIGN
QI_1.IS_ALL_LIT
     12078**DCL     12083--REDEF
QI_1.IS_FORM_VARIABLE
     12084**DCL     12089--REDEF
QI_1.IS_TEMP
     12090**DCL     12095--REDEF
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:55   
QI_1.MESSAGE_LINE_DAD.PSEUDO_CIP
     12188**DCL     12213--REDEF
QI_1.MESSAGE_LINE_DAD.PSEUDO_CIP.ALPHANUMERIC
     12190**DCL     12195--REDEF
QI_1.MESSAGE_LINE_DAD.PSEUDO_CIP.NUMERIC.CB
     12196**DCL     12199--REDEF   12202--REDEF
QI_1.MESSAGE_LINE_DAD.WORD0
     12157**DCL     12158--REDEF
QI_1.NO_DATA
     12132**DCL     20467<<ASSIGN  20648<<ASSIGN  20744<<ASSIGN  20744>>ASSIGN
QI_1.OFFSET
     12096**DCL     12101--REDEF
QI_1.OP
     11455**DCL     20694<>CALL    20701<>CALL    20719<>CALL
QI_1.OP.CIP
     11457**DCL     11908--REDEF
QI_1.OP.CIP.AUX
     11823**DCL     11894--REDEF
QI_1.OP.CIP.AUX.CD
     11868**DCL     11871--REDEF   11875--REDEF   11878--REDEF
QI_1.OP.CIP.S
     11527**DCL     11598--REDEF
QI_1.OP.CIP.S.CD
     11572**DCL     11575--REDEF   11579--REDEF   11582--REDEF
QI_1.OP.CIP.S_A
     11598**DCL     20696<<ASSIGN
QI_1.OP.CIP.T
     11675**DCL     11746--REDEF
QI_1.OP.CIP.T.CD
     11720**DCL     11723--REDEF   11727--REDEF   11730--REDEF
QI_1.OP.CIP.T_A
     11746**DCL     20688<<ASSIGN  20696>>ASSIGN  20698<<ASSIGN  20713<<ASSIGN
QI_1.OP.DATA
     11915**DCL     11919--REDEF
QI_1.OP.DATA.S$
     11916**DCL     20697<<ASSIGN
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:56   
QI_1.OP.DATA.T$
     11917**DCL     20661>>ASSIGN  20689<<ASSIGN  20697>>ASSIGN  20699<<ASSIGN  20714<<ASSIGN  20789>>ASSIGN
QI_1.OP.DEC.T
     11979**DCL     20690<<ASSIGN  20715<<ASSIGN
QI_1.OP.FILL_CHAR
     12039**DCL     12042--REDEF
QI_1.OP.INX
     11972**DCL     11976--REDEF   11977--REDEF   11981--REDEF
QI_1.OP.LEN
     11955**DCL     11959--REDEF   11960--REDEF   11964--REDEF   11965--REDEF   11969--REDEF
QI_1.OP.LEN.AUX
     11958**DCL     12859--IMP-SIZ
QI_1.OP.LEN.S
     11956**DCL     12855--IMP-SIZ 20682>>IF      20707>>IF
QI_1.OP.LEN.T
     11957**DCL     12857--IMP-SIZ
QI_1.OP.PICTURE_STRING
     12025**DCL     12028--REDEF   12029--REDEF   12032--REDEF   12033--REDEF   12036--REDEF
QI_1.OP.ROUND
     12058**DCL     12059--REDEF   12060--REDEF
QI_1.OP.SIZE_ERROR
     12042**DCL     20692<<ASSIGN  20717<<ASSIGN
QI_1.OP.SRCH_VRFY_ELEMS
     11994**DCL     11997--REDEF
QI_1.OPENED_COUNT
     12263**DCL     12266--REDEF
QI_1.OTTER_SPACE
     12102**DCL     12107--REDEF
QI_1.PICTURE_STRING
     12108**DCL     12113--REDEF
QI_1.SCREEN_UPDATE_FLAGS
     11416**DCL     20461>>IF
QI_1.SOURCE$
     11428**DCL     20654<<ASSIGN  20674<<ASSIGN  20785<<ASSIGN
QI_1.SPECIAL_NAMES
     12291**DCL     12300--REDEF
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:57   
QI_1.TYPE
     12114**DCL     12119--REDEF
QI_1.TYPE.S
     12116**DCL     20677>>DOCASE
QI_16_BIT_BINARY
     17304**DCL     17374--REDEF
QI_16_BIT_BINARY.CB
     17323**DCL     17326--REDEF   17330--REDEF   17333--REDEF
QI_31_DIGIT_SLS_DISPLAY
     17137**DCL     17207--REDEF
QI_31_DIGIT_SLS_DISPLAY.CD
     17184**DCL     17187--REDEF   17191--REDEF   17194--REDEF
QI_31_DIGIT_ST_PACKED
     17639**DCL     17709--REDEF
QI_31_DIGIT_ST_PACKED.CP
     17672**DCL     17675--REDEF   17679--REDEF   17682--REDEF
QI_31_DIGIT_ST_PACKED_A
     17709**DCL     20688>>ASSIGN
QI_32_BIT_BINARY
     17471**DCL     17541--REDEF
QI_32_BIT_BINARY.CB
     17490**DCL     17493--REDEF   17497--REDEF   17500--REDEF
QI_32_BIT_BINARY_A
     17541**DCL     20698>>ASSIGN  20713>>ASSIGN
QI_4_CHAR_ALPHANUMERIC
     16969**DCL     17039--REDEF
QI_4_CHAR_ALPHANUMERIC.CA
     16974**DCL     16978--REDEF   16981--REDEF   16984--REDEF
QI_ACCUMULATOR_DAD.CIP
     17982**DCL     18053--REDEF
QI_ACCUMULATOR_DAD.CIP.CP
     18013**DCL     18016--REDEF   18020--REDEF   18023--REDEF
QI_ALR.CIP
     12934**DCL     13385--REDEF
QI_ALR.CIP.AUX
     13300**DCL     13371--REDEF
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:58   
QI_ALR.CIP.AUX.CA
     13303**DCL     13307--REDEF   13310--REDEF   13313--REDEF
QI_ALR.CIP.S
     13004**DCL     13075--REDEF
QI_ALR.CIP.S.CA
     13007**DCL     13011--REDEF   13014--REDEF   13017--REDEF
QI_ALR.CIP.T
     13152**DCL     13223--REDEF
QI_ALR.CIP.T.CA
     13155**DCL     13159--REDEF   13162--REDEF   13165--REDEF
QI_ALR.DATA
     13392**DCL     13396--REDEF
QI_ALR.FILL_CHAR
     13516**DCL     13519--REDEF
QI_ALR.INX
     13449**DCL     13453--REDEF   13454--REDEF   13458--REDEF
QI_ALR.LEN
     13432**DCL     13436--REDEF   13437--REDEF   13441--REDEF   13442--REDEF   13446--REDEF
QI_ALR.PICTURE_STRING
     13502**DCL     13505--REDEF   13506--REDEF   13509--REDEF   13510--REDEF   13513--REDEF
QI_ALR.ROUND
     13535**DCL     13536--REDEF   13537--REDEF
QI_ALR.SRCH_VRFY_ELEMS
     13471**DCL     13474--REDEF
QI_FPT_DBCONTROL.V_
     18354**DCL     18354--REDEF
QI_FPT_INT.V_
     19192**DCL     19192--REDEF
QI_FPT_READ
     19466**DCL     20591>>ASSIGN
QI_MAT.CIP
     16273**DCL     16724--REDEF
QI_MAT.CIP.AUX
     16639**DCL     16710--REDEF
QI_MAT.CIP.AUX.CA
     16642**DCL     16646--REDEF   16649--REDEF   16652--REDEF
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:59   
QI_MAT.CIP.S
     16343**DCL     16414--REDEF
QI_MAT.CIP.S.CA
     16346**DCL     16350--REDEF   16353--REDEF   16356--REDEF
QI_MAT.CIP.T
     16491**DCL     16562--REDEF
QI_MAT.CIP.T.CA
     16494**DCL     16498--REDEF   16501--REDEF   16504--REDEF
QI_MAT.DATA
     16731**DCL     16735--REDEF
QI_MAT.DEC
     16799**DCL     16803--REDEF   16804--REDEF   16808--REDEF
QI_MAT.FILL_CHAR
     16855**DCL     16858--REDEF
QI_MAT.LEN
     16771**DCL     16775--REDEF   16776--REDEF   16780--REDEF   16781--REDEF   16785--REDEF
QI_MAT.PICTURE_STRING
     16841**DCL     16844--REDEF   16845--REDEF   16848--REDEF   16849--REDEF   16852--REDEF
QI_MAT.ROUND
     16874**DCL     16875--REDEF   16876--REDEF
QI_MAT.SRCH_VRFY_ELEMS
     16810**DCL     16813--REDEF
QI_PICTURE_STRING
     17807**DCL     17877--REDEF
QI_PICTURE_STRING.CA
     17812**DCL     17816--REDEF   17819--REDEF   17822--REDEF
QI_SRCH_VRFY.CIP
     15604**DCL     16055--REDEF
QI_SRCH_VRFY.CIP.AUX
     15970**DCL     16041--REDEF
QI_SRCH_VRFY.CIP.AUX.CA
     15973**DCL     15977--REDEF   15980--REDEF   15983--REDEF
QI_SRCH_VRFY.CIP.S
     15674**DCL     15745--REDEF
QI_SRCH_VRFY.CIP.S.CA
     15677**DCL     15681--REDEF   15684--REDEF   15687--REDEF
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:60   
QI_SRCH_VRFY.CIP.T
     15822**DCL     15893--REDEF
QI_SRCH_VRFY.CIP.T.CA
     15825**DCL     15829--REDEF   15832--REDEF   15835--REDEF
QI_SRCH_VRFY.DATA
     16062**DCL     16066--REDEF
QI_SRCH_VRFY.DEC
     16130**DCL     16134--REDEF   16135--REDEF   16139--REDEF
QI_SRCH_VRFY.FILL_CHAR
     16186**DCL     16189--REDEF
QI_SRCH_VRFY.ROUND
     16205**DCL     16206--REDEF   16207--REDEF
QI_SRCH_VRFY.SRCH_RESULT
     16146**DCL     16149--REDEF   16150--REDEF   16153--REDEF   16154--REDEF   16157--REDEF
QI_SRCH_VRFY.SRCH_VRFY_ARGS
     16070**DCL     16074--REDEF   16075--REDEF   16079--REDEF   16080--REDEF   16084--REDEF
QI_SRCH_VRFY.SRCH_VRFY_ELEMS
     16141**DCL     16144--REDEF
QI_TYPE_BINARY_TARGET.CIP
     14931**DCL     15382--REDEF
QI_TYPE_BINARY_TARGET.CIP.AUX
     15297**DCL     15368--REDEF
QI_TYPE_BINARY_TARGET.CIP.AUX.CA
     15300**DCL     15304--REDEF   15307--REDEF   15310--REDEF
QI_TYPE_BINARY_TARGET.CIP.S
     15001**DCL     15072--REDEF
QI_TYPE_BINARY_TARGET.CIP.S.CA
     15004**DCL     15008--REDEF   15011--REDEF   15014--REDEF
QI_TYPE_BINARY_TARGET.CIP.T
     15149**DCL     15220--REDEF
QI_TYPE_BINARY_TARGET.CIP.T.CB
     15166**DCL     15169--REDEF   15173--REDEF   15176--REDEF
QI_TYPE_BINARY_TARGET.DATA
     15389**DCL     15393--REDEF
QI_TYPE_BINARY_TARGET.DEC
     15457**DCL     15461--REDEF   15462--REDEF   15466--REDEF
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:61   
QI_TYPE_BINARY_TARGET.LEN
     15429**DCL     15433--REDEF   15434--REDEF   15438--REDEF   15439--REDEF   15443--REDEF
QI_TYPE_BINARY_TARGET.PICTURE_STRING
     15499**DCL     15502--REDEF   15503--REDEF   15506--REDEF   15507--REDEF   15510--REDEF
QI_TYPE_BINARY_TARGET.ROUND
     15532**DCL     15533--REDEF   15534--REDEF
QI_TYPE_BINARY_TARGET.SIZE_ERROR
     15518**DCL     15519--REDEF
QI_TYPE_BINARY_TARGET.SRCH_VRFY_ELEMS
     15468**DCL     15471--REDEF
QI_TYPE_DISPLAY_SOURCE.CIP
     13599**DCL     14050--REDEF
QI_TYPE_DISPLAY_SOURCE.CIP.AUX
     13965**DCL     14036--REDEF
QI_TYPE_DISPLAY_SOURCE.CIP.AUX.CA
     13968**DCL     13972--REDEF   13975--REDEF   13978--REDEF
QI_TYPE_DISPLAY_SOURCE.CIP.S
     13669**DCL     13740--REDEF
QI_TYPE_DISPLAY_SOURCE.CIP.S.CD
     13714**DCL     13717--REDEF   13721--REDEF   13724--REDEF
QI_TYPE_DISPLAY_SOURCE.CIP.T
     13817**DCL     13888--REDEF
QI_TYPE_DISPLAY_SOURCE.CIP.T.CA
     13820**DCL     13824--REDEF   13827--REDEF   13830--REDEF
QI_TYPE_DISPLAY_SOURCE.DATA
     14057**DCL     14061--REDEF
QI_TYPE_DISPLAY_SOURCE.DEC
     14125**DCL     14129--REDEF   14130--REDEF   14134--REDEF
QI_TYPE_DISPLAY_SOURCE.LEN
     14097**DCL     14101--REDEF   14102--REDEF   14106--REDEF   14107--REDEF   14111--REDEF
QI_TYPE_DISPLAY_SOURCE.PICTURE_STRING
     14167**DCL     14170--REDEF   14171--REDEF   14174--REDEF   14175--REDEF   14178--REDEF
QI_TYPE_DISPLAY_SOURCE.ROUND
     14200**DCL     14201--REDEF   14202--REDEF
QI_TYPE_DISPLAY_SOURCE.SIZE_ERROR
     14186**DCL     14187--REDEF
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:62   
QI_TYPE_DISPLAY_SOURCE.SRCH_VRFY_ELEMS
     14136**DCL     14139--REDEF
QI_TYPE_DISPLAY_TARGET.CIP
     14265**DCL     14716--REDEF
QI_TYPE_DISPLAY_TARGET.CIP.AUX
     14631**DCL     14702--REDEF
QI_TYPE_DISPLAY_TARGET.CIP.AUX.CA
     14634**DCL     14638--REDEF   14641--REDEF   14644--REDEF
QI_TYPE_DISPLAY_TARGET.CIP.S
     14335**DCL     14406--REDEF
QI_TYPE_DISPLAY_TARGET.CIP.S.CA
     14338**DCL     14342--REDEF   14345--REDEF   14348--REDEF
QI_TYPE_DISPLAY_TARGET.CIP.T
     14483**DCL     14554--REDEF
QI_TYPE_DISPLAY_TARGET.CIP.T.CD
     14528**DCL     14531--REDEF   14535--REDEF   14538--REDEF
QI_TYPE_DISPLAY_TARGET.DATA
     14723**DCL     14727--REDEF
QI_TYPE_DISPLAY_TARGET.DEC
     14791**DCL     14795--REDEF   14796--REDEF   14800--REDEF
QI_TYPE_DISPLAY_TARGET.LEN
     14763**DCL     14767--REDEF   14768--REDEF   14772--REDEF   14773--REDEF   14777--REDEF
QI_TYPE_DISPLAY_TARGET.PICTURE_STRING
     14833**DCL     14836--REDEF   14837--REDEF   14840--REDEF   14841--REDEF   14844--REDEF
QI_TYPE_DISPLAY_TARGET.ROUND
     14866**DCL     14867--REDEF   14868--REDEF
QI_TYPE_DISPLAY_TARGET.SIZE_ERROR
     14852**DCL     14853--REDEF
QI_TYPE_DISPLAY_TARGET.SRCH_VRFY_ELEMS
     14802**DCL     14805--REDEF
QI_VLP_CG
     19516**DCL     20594>>ASSIGN
QI_VLP_SEGMENT.BASE
     18891**DCL     18891--REDEF
QI_VLP_SEGMENT_BUFFER.BASE
     18989**DCL     18989--REDEF
PL6.E3A0      #001=QBR$READ_TRAN File=QBR$READ_TRAN.:E05TSI                      WED 07/30/97 04:54 Page:63   
QI_VLP_SEGMENT_LOAD.BASE
     19087**DCL     19087--REDEF
QI_VLP_TRMCTL.BREAKCOUNT
     20081**DCL     20082--REDEF
QI_VLP_XBREAK.IC
     20271**DCL     20271--REDEF
QI_VLP_XBREAK.OLDIC
     20271**DCL     20272--REDEF   20272--REDEF
RETRY_TRANSACTION_READ
     20466**LABEL   20859--GOTO
TRAN_FILE$
     20298**DCL     20490<<ASSIGN  20492>>DOWHILE 20493<<ASSIGN  20493>>ASSIGN  20493>>ASSIGN  20512>>IF
     20538>>ASSIGN  20596>>ASSIGN  20618>>ASSIGN  20638>>ASSIGN  20650>>IF      20654>>ASSIGN  20669>>IF
     20674>>ASSIGN  20760>>IF      20782>>IF      20785>>ASSIGN  20793>>IF      20816>>ASSIGN  20843>>ASSIGN
     20849>>ASSIGN
TRAN_STATUS$
     20299**DCL     20538<<ASSIGN  20576>>IF      20576>>IF      20584>>IF      20730>>ASSIGN  20844>>ASSIGN
UPDATE_SILLY_ERROR_STATUS
     20793**LABEL   20745--GOTO
VLP@CG
      1561**DCL     20593--ASSIGN  20594<<ASSIGN
VLP@CG.MSGID#
      1566**DCL     20672--ASSIGN  20699--ASSIGN  20714--ASSIGN  20730<<ASSIGN  20731--ASSIGN
VLP@CG.MSGTYP#
      1565**DCL     20661<<ASSIGN  20733<<ASSIGN  20760>>IF      20789>>ASSIGN
