VERSION E05

PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:1    
        1        1        /*M*      Frog init                */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* CCE CRM 70 IND 5 ECU 10 THI 0 DCI 10 CSU 5 ENU 5 */
        8        8        /**/
        9        9        /*F* NAME:          KFI$INIT
       10       10             PURPOSE:       To initialize frog
       11       11             DESCRIPTION:   This routine is called when frog is started.
       12       12                            This routine:
       13       13                            Sets an event address
       14       14                            sets an xcon address
       15       15                            sets up the event queue
       16       16                            opens to the cscg
       17       17                            opens to the fecg
       18       18                            builds a user table out of the list returned form the fecg open
       19       19                            initializes the stats buffer
       20       20                            clears some flags
       21       21                            exits
       22       22        */
       23       23        /*D* NAME:          KFI$INIT
       24       24             CALL:          Call KFI$INIT
       25       25             INTERFACE:     M$WRITE
       26       26                            M$XCON
       27       27                            M$EVENT
       28       28                            M$OPEN
       29       29                            KFB$BLD_TBL
       30       30                            KFI$BLD_FREE_STATBUF
       31       31                            KFE$ERP
       32       32             INPUT:         None
       33       33             OUTPUT:        None
       34       34             DESCRIPTION:   If the frog is running on-line, write out "RIBBIT".
       35       35                            Set the event address to KFA$ASYNC thru M$EVENT.  Set
       36       36                            the xcon address to KFM$XCON thru M$XCON.  Set up the
       37       37                            event queue that is used to handle asynchronous events
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:2    
       38       38                            like fecg reads, fecg opens, and cscg reads.  This
       39       39                            queue is about 50 entries long.  Kfa uses the index
       40       40                            KF_QINSERT to put something into the queue.  Kfm uses
       41       41                            the indes KF_QREMOVE to point to the item to remove
       42       42                            from the queue.
       43       43                                 Open to the cscg.  This allows us to receive
       44       44                            keyins from keyin.
       45       45                                 Open to fecg as admin. User, this returns a list
       46       46                            of users already connected to fecg.  A user table entry
       47       47                            is built for each user in the list thru KFB$BLD_TBL.
       48       48                            This open also sets the event # that will be used in
       49       49                            the event handler to handle open events.  Build some
       50       50                            tempory stats buffers for use by the KFS$STATS routines
       51       51                            thru KFI$BLD_ FREE_STATBUF, clear some flags for
       52       52                            message logging, feptrace, and killfrog.
       53       53        */
       54       54        KFI$INIT: PROC;
       55       55        %INCLUDE CP_6;
       56      136        %INCLUDE CP_6_SUBS;
       57      676 S      %INCLUDE B$JIT_C;
       58      677        %B$JIT0;
       59      766        %U$JIT1;
       60      840        %A$JIT6X;
       61      843        %INCLUDE KF$SUBS;
       62      910        %INCLUDE KF$MSG_C;
       63      977        %INCLUDE KF_DAT_R;
       64      996        %INCLUDE JC_MACRO_C;
       65     1110        %INCLUDE JG_EVID_C;
       66     1335        %INCLUDE JG_GHOSTS_C;
       67     1425        /**/
       68     1426        /**/
       69     1427        %FPT_OPEN (FPTN=OPCG,
       70     1428                   NAME=CGNM,
       71     1429                   ACCT=SYSACCT,
       72     1430                   DCB=M$FE,
       73     1431                   ASN=COMGROUP,
       74     1432                   FUN=CREATE,
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:3    
       75     1433                   ORG=CONSEC,
       76     1434                   AU=YES,
       77     1435                   SHARE=ALL,
       78     1436                   EXIST=NEWFILE,
       79     1437                   IXTNSIZE=100,
       80     1438                   CTG=YES,
       81     1439                   SETSTA=VLP_SETSTAFE,
       82     1440                   ACSVEH=FECG_ACSVEH);
       83     1549        %VLP_ACCT (FPTN=SYSACCT,
       84     1550                   ACCT=':SYS');
       85     1563        %VLP_SETSTA (FPTN=VLP_SETSTAFE,MYSTATION='FROG    ');
       86     1591        %VLP_NAME (FPTN=CGNM,NAME='FECG');
       87     1618        %VLP_ATTR (FPTN=FECG_ACSVEH);
       88     1632        %VLP_ACSVEH (READ=YES,UPD=YES,WNEW=YES,TCTL=YES,VEHICLE='FEPANLZ?');
       89     1649        %VLP_ACSVEH (READ=YES,UPD=YES,WNEW=YES,TCTL=YES,VEHICLE='DELTA?');
       90     1666        %VLP_ACSVEH (READ=YES,UPD=YES,WNEW=YES,VEHICLE='MULE?',LAST=";");
       91     1683        /**/
       92     1684        %FPT_CGCTL (DCB=M$FE,CGCP=VLP_CGCP);
       93     1707        %VLP_CGCP (TRMRDSIZ=512,
       94     1708                   DISKWARN=25,
       95     1709                   MEMWARN=25,
       96     1710                   MAXPG=50,
       97     1711                   DATAPGS=10,
       98     1712                 MXACT=100,
       99     1713                 MAXMC=2048,
      100     1714                 DEFERBLKS=30,
      101     1715                 XSTALGL=YES,
      102     1716                 TERMCONAU=YES,
      103     1717                 DCBCONAU=YES,
      104     1718                 TERMCONNAU=YES,
      105     1719                 DCBCONNAU=YES,
      106     1720                 AUCONTERM=NC,
      107     1721                 AUCONDCB=NC,
      108     1722                 AUDCONTERM=NC,
      109     1723                 AUDCONDCB=DEACTIVATE,
      110     1724                 WAS=NO,
      111     1725                 RAS=NO,
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:4    
      112     1726                 SMD=NO,
      113     1727                 CONMSG=YES,
      114     1728                 SECURE=NO,
      115     1729                 INPUT=YES,
      116     1730                 OUTPUT=YES,
      117     1731                 REREAD=NO,
      118     1732                 BIN=NO,
      119     1733                 TRANS=YES,
      120     1734                 TERMCONLGL=YES,
      121     1735                 DCBCONLGL=YES,
      122     1736                 XTYPLGL=YES);
      123     1779        %FPT_WRITE (FPTN=TELL_SLUG,
      124     1780                    DCB=M$CS,
      125     1781                    BUF=JC_CITE,
      126     1782                    STATION=SLUG_STATION,
      127     1783                    WAIT=NO);
      128     1814        %JC_CITE (TYP=PCMP);
      129     1864        %VLP_STATION (FPTN=SLUG_STATION,
      130     1865                      STATION='SLUG');
      131     1892        %FPT_READ (FPTN=READCSCG,
      132     1893                   DCB=M$CS,
      133     1894                   BUF=KF_CSCG_INBUF,
      134     1895                   WAIT=NO,
      135     1896                   EVENT=%EV_READ_CSCG##,
      136     1897                   STATION=VLP_STATION);
      137     1936        %VLP_STATION (DIRONLY=YES);
      138     1963        %FPT_WAIT (UNITS=10);
      139     1977        /**/
      140     1978        %FPT_OPEN (FPTN=OPCSCG,NAME=CSCGNM,
      141     1979                 ASN=COMGROUP,FUN=UPDATE,ORG=CONSEC,SHARE=ALL,
      142     1980                 SETSTA=VLP_SETSTACS,DCB=M$CS);
      143     2089        %VLP_SETSTA (FPTN=VLP_SETSTACS,MYSTATION='FROG    ');
      144     2117        %VLP_NAME (FPTN=CSCGNM,NAME='CSCG');
      145     2144        /**/
      146     2145        %FPT_WRITE (FPTN=WRTEO,DCB=M$DO,BUF=WRMSG);
      147     2176        /**/
      148     2177        /**/
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:5    
      149     2178
      150     2179        %FPT_OPEN (FPTN=OPEN_FILE,FUN=IN,ASN=FILE,SHARE=ALL);
      151     2288        %VLP_NAME (FPTN=HLPNAME,NAME=':HLP');
      152     2315        %VLP_NAME (FPTN=PRONAME,NAME=':PRO');
      153     2342        %VLP_NAME (FPTN=NETCONNAME,NAME=':NETCON');
      154     2369    1   DCL WRMSG CHAR(12) STATIC ALIGNED INIT('***RIBBIT***');
      155     2370        /**/
      156     2371        %FPT_EVENT (FPTN=EVCG,UENTRY=KFA$ASYNC);
      157     2385        /**/
      158     2386        %FPT_XCON (FPTN=XCONFPT,UENTRY=KFM$XCONENTRY);
      159     2400    1   DCL L$ PTR;
      160     2401    1   DCL NUM UBIN(36);
      161     2402    1   DCL I UBIN(36);
      162     2403    1   DCL ERR_CNT UBIN(36) STATIC INIT(0);
      163     2404    1   DCL B$JIT$ PTR SYMREF;
      164     2405    1   DCL Y$SIZE UBIN WORD;
      165     2406    1   DCL Y$STA CHAR(8);
      166     2407    1   DCL Y$TDTYP UBIN WORD;
      167     2408    1   DCL Y$LFLGS BIT(18);
      168     2409    1   DCL Y$IDX UBIN WORD;
      169     2410    1   DCL Y$UID UBIN WORD;
      170     2411    1   DCL Y$FEX UBIN WORD;
      171     2412    1   DCL M$DO DCB;
      172     2413    1   DCL M$SI DCB;
      173     2414        /**/
      174     2415    1   DCL 1 EMSG STATIC,
      175     2416    1         2 * CHAR(4) UNAL INIT('KFI$'),
      176     2417    1         2 NUM CHAR(4) UNAL INIT('    ');
      177     2418        /**/
      178     2419        /**/
      179     2420        /**/
      180     2421    1   DCL KFB$BLD_TBL ENTRY(4);
      181     2422    1   DCL KFA$ASYNC ENTRY ASYNC;
      182     2423    1   DCL KFE$ERP ENTRY(1);
      183     2424    1   DCL KFX$CNSL_WRT ENTRY (3);
      184     2425    1   DCL KFM$XCONENTRY ENTRY ASYNC;
      185     2426        /**/
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:6    
      186     2427        /*   DO INITIALIZATION HERE  */
      187     2428        /**/
      188     2429    1           ERR_CNT = 0;
      189     2430    1           IF B$JIT$->B$JIT.MODE = %M_INT# THEN
      190     2431    2           DO;
      191     2432        /*
      192     2433                  FROG is running as a ts user - write
      193     2434                  a couple msgs to the console
      194     2435        */
      195     2436    2                CALL M$WRITE (WRTEO) ALTRET(BDWR);
      196     2437    2           END;
      197     2438        /**/
      198     2439        /*   SET EVENT ADDRESS  */
      199     2440        /**/
      200     2441    1           CALL M$EVENT(EVCG)      ALTRET(BDEV);
      201     2442        /**/
      202     2443        /*             SET UP EXIT CONTROL ADDRESS   */
      203     2444        /**/
      204     2445    1           CALL M$XCON(XCONFPT);
      205     2446        /**/
      206     2447        /*       SET UP THE EVENT QUEUE BEFORE OPENING TO THE COMGROUPS*/
      207     2448    1           KF_EVMSG_QUEUE = '0'B;
      208     2449    1           KF_QINSERT = 0;
      209     2450    1           KF_QREMOVE = %KF_EVMAX##;
      210     2451    1           KF_EVCOUNT = 0;
      211     2452        /**/
      212     2453        /*        Now open to the CSCG comgroup           */
      213     2454        /**/
      214     2455    1           CALL M$OPEN (OPCSCG) ALTRET(BDOP1);
      215     2456        /**/
      216     2457        /*        Now open to FECG comgroup          */
      217     2458    1           CALL M$OPEN (OPCG) ALTRET(TRY_OLDFILE);
      218     2459    2           DO WHILE('0'B);                 /* DO NEVER                 */
      219     2460    2   TRY_OLDFILE:
      220     2461    2                OPCG.V.EXIST# = %OLDFILE#;
      221     2462    2                CALL M$OPEN(OPCG) ALTRET(BDOP);
      222     2463    2           END;                            /* DO NEVER                 */
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:7    
      223     2464        /**/
      224     2465    1           CALL M$CGCTL(FPT_CGCTL) ALTRET(BDCGCTL);
      225     2466        /**/
      226     2467        /*                 Initialize the user table     */
      227     2468        /**/
      228     2469    1           KF_UTBL = '0'B;
      229     2470    2           DO Y$IDX = 0 TO %KF_UTBL_MAX##;
      230     2471    2                KF_UTBL.STATE(Y$IDX) = %KF_UTBLST_DELTD#;
      231     2472    2                KF_UTBL.STATION(Y$IDX) = ' ';
      232     2473    2                KF_UTBL.DCBSTATION(Y$IDX) = ' ';
      233     2474    2           END;                            /*END OF DO Y$IDX*/
      234     2475        /*
      235     2476                 NOW CLEAR SOME FROG FLAGS
      236     2477        */
      237     2478    1           KF_FLGS.MSGLOG = '0'B;
      238     2479    1           KF_FLGS.FEPTRACE = '0'B;
      239     2480    1           KF_FLGS.KILLFROG = '0'B;        /*KILLFROG RCVD FLAG*/
      240     2481        /**/
      241     2482    2           IF B$JIT$->B$JIT.USERWORD(0) = 0 THEN DO; /* FIRST TIME THROUGH INIT */
      242     2483                                 /* Tell SLUG that init for FROG is done    */
      243     2484    2                KF_WAIT4SLUG = '1'B;
      244     2485    2                JC_CITE.CODE = JCEV_PCMP#;
      245     2486    2                JC_CITE.USER = JG_FROG#;
      246     2487    2                CALL M$WRITE(TELL_SLUG) ALTRET(BDWR);
      247     2488    2                CALL M$READ(READCSCG) ALTRET(BDWR);
      248     2489
      249     2490                            /* Now wait for SLUG to tell us its OK to go    */
      250     2491    3                DO INHIBIT;
      251     2492    3   CHK:
      252     2493    4                     IF KF_WAIT4SLUG THEN DO;
      253     2494    4                          CALL M$WAIT(FPT_WAIT);
      254     2495    4                          GOTO CHK;
      255     2496    4                     END;                  /* IF                       */
      256     2497    3                END;                       /* DO INHIBIT               */
      257     2498    2           END;                            /* IF B$JIT.USERWORD(0) = 0 */
      258     2499        /**/
      259     2500    1           OPEN_FILE.V.DCB# = DCBNUM(M$NETCON);
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:8    
      260     2501    1           OPEN_FILE.NAME_ = VECTOR(NETCONNAME);
      261     2502    1           CALL M$OPEN (OPEN_FILE)
      262     2503    2           WHENALTRETURN DO;
      263     2504    2           END;
      264     2505    1           OPEN_FILE.V.DCB# = DCBNUM(M$HLPF);
      265     2506    1           OPEN_FILE.NAME_ = VECTOR(HLPNAME);
      266     2507    1           CALL M$OPEN (OPEN_FILE)
      267     2508    2           WHENALTRETURN DO;
      268     2509    2           END;
      269     2510    1           OPEN_FILE.V.DCB# = DCBNUM(M$PROF);
      270     2511    1           OPEN_FILE.NAME_ = VECTOR(PRONAME);
      271     2512    1           CALL M$OPEN (OPEN_FILE)
      272     2513    2           WHENALTRETURN DO;
      273     2514    2           END;
      274     2515    1           KF_RUN_FLAG = %SET##;
      275     2516    1           RETURN;
      276     2517        /**/
      277     2518        /*        ERROR HANDLING      */
      278     2519        /**/
      279     2520    1   BDWR:   ERR_CNT = 0;
      280     2521    1   BDEV:   ERR_CNT = ERR_CNT+1;
      281     2522    1   BDOP:   ERR_CNT=ERR_CNT+1;
      282     2523    1   BDOP1:  ERR_CNT = ERR_CNT + 1;
      283     2524    1   BDCGCTL: ERR_CNT = ERR_CNT+1;
      284     2525    1           CALL BINCHAR(EMSG.NUM,ERR_CNT);
      285     2526    1           CALL KFE$ERP(EMSG);
      286     2527    1           KF_RUN_FLAG = %RESET##;
      287     2528    1           RETURN;
      288     2529    1   END KFI$INIT;

PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:9    
--  Include file information  --

   JG_GHOSTS_C.:E05TOU  is referenced.
   JG_EVID_C.:E05TOU  is referenced.
   JC_MACRO_C.:E05TOU  is referenced.
   KF_DAT_R.:E05TOU  cannot be made into a system file and is referenced.
   KF$MSG_C.:E05TOU  is referenced.
   KF$SUBS.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure KFI$INIT.

   Procedure KFI$INIT requires 157 words for executable code.
   Procedure KFI$INIT requires 16 words of local(AUTO) storage.

    No errors detected in file KFI$INIT.:E05TSI    .

PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:10   

 Object Unit name= KFI$INIT                                   File name= KFI$INIT.:E05TOU
 UTS= JUL 30 '97 00:23:17.24 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   DCB   even  none     0      0  M$FE
    2   DCB   even  none     0      0  M$CS
    3   DCB   even  none     0      0  M$HLPF
    4   DCB   even  none     0      0  M$PROF
    5   DCB   even  none     0      0  M$NETCON
    6   Data  even  none   369    561  KFI$INIT
    7   DCB   even  none     0      0  M$DO
    8   DCB   even  none     0      0  M$SI
    9   Proc  even  none   157    235  KFI$INIT
   10  RoData even  none    10     12  KFI$INIT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     9      0   yes            yes      Std        0  KFI$INIT
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:11   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes          Async      0 KFA$ASYNC
         yes          Async      0 KFM$XCONENTRY
         yes           Std       1 KFE$ERP
                       nStd      0 X66_AUTO_0
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  KF_EVMSG_QUEUE                        KF_QINSERT
     KF_QREMOVE                            KF_WAIT4SLUG                          KF_EVCOUNT
     KF_RUN_FLAG                           KF_CSCG_INBUF                         M$FE
     M$CS                                  M$HLPF                                M$PROF
     M$NETCON                              KF_UTBL                               KF_FLGS
     B$JIT$                                M$DO                                  M$SI
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:12   


        1        1        /*M*      Frog init                */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* CCE CRM 70 IND 5 ECU 10 THI 0 DCI 10 CSU 5 ENU 5 */
        8        8        /**/
        9        9        /*F* NAME:          KFI$INIT
       10       10             PURPOSE:       To initialize frog
       11       11             DESCRIPTION:   This routine is called when frog is started.
       12       12                            This routine:
       13       13                            Sets an event address
       14       14                            sets an xcon address
       15       15                            sets up the event queue
       16       16                            opens to the cscg
       17       17                            opens to the fecg
       18       18                            builds a user table out of the list returned form the fecg open
       19       19                            initializes the stats buffer
       20       20                            clears some flags
       21       21                            exits
       22       22        */
       23       23        /*D* NAME:          KFI$INIT
       24       24             CALL:          Call KFI$INIT
       25       25             INTERFACE:     M$WRITE
       26       26                            M$XCON
       27       27                            M$EVENT
       28       28                            M$OPEN
       29       29                            KFB$BLD_TBL
       30       30                            KFI$BLD_FREE_STATBUF
       31       31                            KFE$ERP
       32       32             INPUT:         None
       33       33             OUTPUT:        None
       34       34             DESCRIPTION:   If the frog is running on-line, write out "RIBBIT".
       35       35                            Set the event address to KFA$ASYNC thru M$EVENT.  Set
       36       36                            the xcon address to KFM$XCON thru M$XCON.  Set up the
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:13   
       37       37                            event queue that is used to handle asynchronous events
       38       38                            like fecg reads, fecg opens, and cscg reads.  This
       39       39                            queue is about 50 entries long.  Kfa uses the index
       40       40                            KF_QINSERT to put something into the queue.  Kfm uses
       41       41                            the indes KF_QREMOVE to point to the item to remove
       42       42                            from the queue.
       43       43                                 Open to the cscg.  This allows us to receive
       44       44                            keyins from keyin.
       45       45                                 Open to fecg as admin. User, this returns a list
       46       46                            of users already connected to fecg.  A user table entry
       47       47                            is built for each user in the list thru KFB$BLD_TBL.
       48       48                            This open also sets the event # that will be used in
       49       49                            the event handler to handle open events.  Build some
       50       50                            tempory stats buffers for use by the KFS$STATS routines
       51       51                            thru KFI$BLD_ FREE_STATBUF, clear some flags for
       52       52                            message logging, feptrace, and killfrog.
       53       53        */
       54       54        KFI$INIT: PROC;

     54  9 000000   000000 700200 xent  KFI$INIT     TSX0  ! X66_AUTO_0
         9 000001   000020 000000                    ZERO    16,0

       55       55        %INCLUDE CP_6;
       56      136        %INCLUDE CP_6_SUBS;
       57      676 S      %INCLUDE B$JIT_C;
       58      677        %B$JIT0;
       59      766        %U$JIT1;
       60      840        %A$JIT6X;
       61      843        %INCLUDE KF$SUBS;
       62      910        %INCLUDE KF$MSG_C;
       63      977        %INCLUDE KF_DAT_R;
       64      996        %INCLUDE JC_MACRO_C;
       65     1110        %INCLUDE JG_EVID_C;
       66     1335        %INCLUDE JG_GHOSTS_C;
       67     1425        /**/
       68     1426        /**/
       69     1427        %FPT_OPEN (FPTN=OPCG,
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:14   
       70     1428                   NAME=CGNM,
       71     1429                   ACCT=SYSACCT,
       72     1430                   DCB=M$FE,
       73     1431                   ASN=COMGROUP,
       74     1432                   FUN=CREATE,
       75     1433                   ORG=CONSEC,
       76     1434                   AU=YES,
       77     1435                   SHARE=ALL,
       78     1436                   EXIST=NEWFILE,
       79     1437                   IXTNSIZE=100,
       80     1438                   CTG=YES,
       81     1439                   SETSTA=VLP_SETSTAFE,
       82     1440                   ACSVEH=FECG_ACSVEH);
       83     1549        %VLP_ACCT (FPTN=SYSACCT,
       84     1550                   ACCT=':SYS');
       85     1563        %VLP_SETSTA (FPTN=VLP_SETSTAFE,MYSTATION='FROG    ');
       86     1591        %VLP_NAME (FPTN=CGNM,NAME='FECG');
       87     1618        %VLP_ATTR (FPTN=FECG_ACSVEH);
       88     1632        %VLP_ACSVEH (READ=YES,UPD=YES,WNEW=YES,TCTL=YES,VEHICLE='FEPANLZ?');
       89     1649        %VLP_ACSVEH (READ=YES,UPD=YES,WNEW=YES,TCTL=YES,VEHICLE='DELTA?');
       90     1666        %VLP_ACSVEH (READ=YES,UPD=YES,WNEW=YES,VEHICLE='MULE?',LAST=";");
       91     1683        /**/
       92     1684        %FPT_CGCTL (DCB=M$FE,CGCP=VLP_CGCP);
       93     1707        %VLP_CGCP (TRMRDSIZ=512,
       94     1708                   DISKWARN=25,
       95     1709                   MEMWARN=25,
       96     1710                   MAXPG=50,
       97     1711                   DATAPGS=10,
       98     1712                 MXACT=100,
       99     1713                 MAXMC=2048,
      100     1714                 DEFERBLKS=30,
      101     1715                 XSTALGL=YES,
      102     1716                 TERMCONAU=YES,
      103     1717                 DCBCONAU=YES,
      104     1718                 TERMCONNAU=YES,
      105     1719                 DCBCONNAU=YES,
      106     1720                 AUCONTERM=NC,
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:15   
      107     1721                 AUCONDCB=NC,
      108     1722                 AUDCONTERM=NC,
      109     1723                 AUDCONDCB=DEACTIVATE,
      110     1724                 WAS=NO,
      111     1725                 RAS=NO,
      112     1726                 SMD=NO,
      113     1727                 CONMSG=YES,
      114     1728                 SECURE=NO,
      115     1729                 INPUT=YES,
      116     1730                 OUTPUT=YES,
      117     1731                 REREAD=NO,
      118     1732                 BIN=NO,
      119     1733                 TRANS=YES,
      120     1734                 TERMCONLGL=YES,
      121     1735                 DCBCONLGL=YES,
      122     1736                 XTYPLGL=YES);
      123     1779        %FPT_WRITE (FPTN=TELL_SLUG,
      124     1780                    DCB=M$CS,
      125     1781                    BUF=JC_CITE,
      126     1782                    STATION=SLUG_STATION,
      127     1783                    WAIT=NO);
      128     1814        %JC_CITE (TYP=PCMP);
      129     1864        %VLP_STATION (FPTN=SLUG_STATION,
      130     1865                      STATION='SLUG');
      131     1892        %FPT_READ (FPTN=READCSCG,
      132     1893                   DCB=M$CS,
      133     1894                   BUF=KF_CSCG_INBUF,
      134     1895                   WAIT=NO,
      135     1896                   EVENT=%EV_READ_CSCG##,
      136     1897                   STATION=VLP_STATION);
      137     1936        %VLP_STATION (DIRONLY=YES);
      138     1963        %FPT_WAIT (UNITS=10);
      139     1977        /**/
      140     1978        %FPT_OPEN (FPTN=OPCSCG,NAME=CSCGNM,
      141     1979                 ASN=COMGROUP,FUN=UPDATE,ORG=CONSEC,SHARE=ALL,
      142     1980                 SETSTA=VLP_SETSTACS,DCB=M$CS);
      143     2089        %VLP_SETSTA (FPTN=VLP_SETSTACS,MYSTATION='FROG    ');
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:16   
      144     2117        %VLP_NAME (FPTN=CSCGNM,NAME='CSCG');
      145     2144        /**/
      146     2145        %FPT_WRITE (FPTN=WRTEO,DCB=M$DO,BUF=WRMSG);
      147     2176        /**/
      148     2177        /**/
      149     2178
      150     2179        %FPT_OPEN (FPTN=OPEN_FILE,FUN=IN,ASN=FILE,SHARE=ALL);
      151     2288        %VLP_NAME (FPTN=HLPNAME,NAME=':HLP');
      152     2315        %VLP_NAME (FPTN=PRONAME,NAME=':PRO');
      153     2342        %VLP_NAME (FPTN=NETCONNAME,NAME=':NETCON');
      154     2369    1   DCL WRMSG CHAR(12) STATIC ALIGNED INIT('***RIBBIT***');
      155     2370        /**/
      156     2371        %FPT_EVENT (FPTN=EVCG,UENTRY=KFA$ASYNC);
      157     2385        /**/
      158     2386        %FPT_XCON (FPTN=XCONFPT,UENTRY=KFM$XCONENTRY);
      159     2400    1   DCL L$ PTR;
      160     2401    1   DCL NUM UBIN(36);
      161     2402    1   DCL I UBIN(36);
      162     2403    1   DCL ERR_CNT UBIN(36) STATIC INIT(0);
      163     2404    1   DCL B$JIT$ PTR SYMREF;
      164     2405    1   DCL Y$SIZE UBIN WORD;
      165     2406    1   DCL Y$STA CHAR(8);
      166     2407    1   DCL Y$TDTYP UBIN WORD;
      167     2408    1   DCL Y$LFLGS BIT(18);
      168     2409    1   DCL Y$IDX UBIN WORD;
      169     2410    1   DCL Y$UID UBIN WORD;
      170     2411    1   DCL Y$FEX UBIN WORD;
      171     2412    1   DCL M$DO DCB;
      172     2413    1   DCL M$SI DCB;
      173     2414        /**/
      174     2415    1   DCL 1 EMSG STATIC,
      175     2416    1         2 * CHAR(4) UNAL INIT('KFI$'),
      176     2417    1         2 NUM CHAR(4) UNAL INIT('    ');
      177     2418        /**/
      178     2419        /**/
      179     2420        /**/
      180     2421    1   DCL KFB$BLD_TBL ENTRY(4);
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:17   
      181     2422    1   DCL KFA$ASYNC ENTRY ASYNC;
      182     2423    1   DCL KFE$ERP ENTRY(1);
      183     2424    1   DCL KFX$CNSL_WRT ENTRY (3);
      184     2425    1   DCL KFM$XCONENTRY ENTRY ASYNC;
      185     2426        /**/
      186     2427        /*   DO INITIALIZATION HERE  */
      187     2428        /**/
      188     2429    1           ERR_CNT = 0;

   2429  9 000002   000556 450000 6                  STZ     ERR_CNT

      189     2430    1           IF B$JIT$->B$JIT.MODE = %M_INT# THEN

   2430  9 000003   000000 470400 xsym               LDP0    B$JIT$
         9 000004   000000 236100                    LDQ     0,,PR0
         9 000005   740000 376003                    ANQ     -16384,DU
         9 000006   140000 116003                    CMPQ    49152,DU
         9 000007   000014 601000 9                  TNZ     s:2441

      190     2431    2           DO;

      191     2432        /*
      192     2433                  FROG is running as a ts user - write
      193     2434                  a couple msgs to the console
      194     2435        */
      195     2436    2                CALL M$WRITE (WRTEO) ALTRET(BDWR);

   2436  9 000010   000424 630400 6                  EPPR0   WRTEO
         9 000011   440001 713400                    CLIMB   alt,write
         9 000012   401400 401760                    pmme    nvectors=4
         9 000013   000205 702000 9                  TSX2    BDWR

      196     2437    2           END;

      197     2438        /**/
      198     2439        /*   SET EVENT ADDRESS  */
      199     2440        /**/
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:18   
      200     2441    1           CALL M$EVENT(EVCG)      ALTRET(BDEV);

   2441  9 000014   000544 630400 6                  EPPR0   EVCG
         9 000015   410001 713400                    CLIMB   alt,+4097
         9 000016   400000 401760                    pmme    nvectors=1
         9 000017   000206 702000 9                  TSX2    BDEV

      201     2442        /**/
      202     2443        /*             SET UP EXIT CONTROL ADDRESS   */
      203     2444        /**/
      204     2445    1           CALL M$XCON(XCONFPT);

   2445  9 000020   000550 630400 6                  EPPR0   XCONFPT
         9 000021   010003 713400                    CLIMB   4099
         9 000022   400400 401760                    pmme    nvectors=2

      205     2446        /**/
      206     2447        /*       SET UP THE EVENT QUEUE BEFORE OPENING TO THE COMGROUPS*/
      207     2448    1           KF_EVMSG_QUEUE = '0'B;

   2448  9 000023   000000 100400                    MLR     fill='000'O
         9 000024   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         9 000025   000000 000630 xsym               ADSC9   KF_EVMSG_QUEUE           cn=0,n=408

      208     2449    1           KF_QINSERT = 0;

   2449  9 000026   000000 450000 xsym               STZ     KF_QINSERT

      209     2450    1           KF_QREMOVE = %KF_EVMAX##;

   2450  9 000027   000062 235007                    LDA     50,DL
         9 000030   000000 755000 xsym               STA     KF_QREMOVE

      210     2451    1           KF_EVCOUNT = 0;

   2451  9 000031   000000 450000 xsym               STZ     KF_EVCOUNT

PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:19   
      211     2452        /**/
      212     2453        /*        Now open to the CSCG comgroup           */
      213     2454        /**/
      214     2455    1           CALL M$OPEN (OPCSCG) ALTRET(BDOP1);

   2455  9 000032   000314 630400 6                  EPPR0   OPCSCG
         9 000033   450000 713400                    CLIMB   alt,open
         9 000034   410400 401760                    pmme    nvectors=18
         9 000035   000214 702000 9                  TSX2    BDOP1

      215     2456        /**/
      216     2457        /*        Now open to FECG comgroup          */
      217     2458    1           CALL M$OPEN (OPCG) ALTRET(TRY_OLDFILE);

   2458  9 000036   000000 630400 6                  EPPR0   OPCG
         9 000037   450000 713400                    CLIMB   alt,open
         9 000040   410400 401760                    pmme    nvectors=18
         9 000041   000043 702000 9                  TSX2    TRY_OLDFILE

      218     2459    2           DO WHILE('0'B);                 /* DO NEVER                 */

   2459  9 000042   000053 710000 9                  TRA     s:2465

      219     2460    2   TRY_OLDFILE:
      220     2461    2                OPCG.V.EXIST# = %OLDFILE#;

   2461  9 000043   000044 236000 6     TRY_OLDFILE  LDQ     OPCG+36
         9 000044   000000 376000 10                 ANQ     0
         9 000045   000400 276007                    ORQ     256,DL
         9 000046   000044 756000 6                  STQ     OPCG+36

      221     2462    2                CALL M$OPEN(OPCG) ALTRET(BDOP);

   2462  9 000047   000000 630400 6                  EPPR0   OPCG
         9 000050   450000 713400                    CLIMB   alt,open
         9 000051   410400 401760                    pmme    nvectors=18
         9 000052   000211 702000 9                  TSX2    BDOP
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:20   

      222     2463    2           END;                            /* DO NEVER                 */

      223     2464        /**/
      224     2465    1           CALL M$CGCTL(FPT_CGCTL) ALTRET(BDCGCTL);

   2465  9 000053   000122 630400 6                  EPPR0   FPT_CGCTL
         9 000054   500003 713400                    CLIMB   alt,+32771
         9 000055   411400 401760                    pmme    nvectors=20
         9 000056   000217 702000 9                  TSX2    BDCGCTL

      225     2466        /**/
      226     2467        /*                 Initialize the user table     */
      227     2468        /**/
      228     2469    1           KF_UTBL = '0'B;

   2469  9 000057   000000 100400                    MLR     fill='000'O
         9 000060   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         9 000061   000000 001362 xsym               ADSC9   KF_UTBL                  cn=0,n=754

      229     2470    2           DO Y$IDX = 0 TO %KF_UTBL_MAX##;

   2470  9 000062   200013 450100                    STZ     Y$IDX,,AUTO

      230     2471    2                KF_UTBL.STATE(Y$IDX) = %KF_UTBLST_DELTD#;

   2471  9 000063   200013 236100                    LDQ     Y$IDX,,AUTO
         9 000064   000011 402007                    MPY     9,DL
         9 000065   000002 220003                    LDX0    2,DU
         9 000066   000002 740006 xsym               STX0    KF_UTBL+2,QL

      231     2472    2                KF_UTBL.STATION(Y$IDX) = ' ';

   2472  9 000067   000000 621006                    EAX1    0,QL
         9 000070   000000 622006                    EAX2    0,QL
         9 000071   000035 235000 xsym               LDA     B_VECTNIL+29
         9 000072   000035 236000 xsym               LDQ     B_VECTNIL+29
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:21   
         9 000073   000000 755011 xsym               STA     KF_UTBL,X1
         9 000074   000001 756012 xsym               STQ     KF_UTBL+1,X2

      232     2473    2                KF_UTBL.DCBSTATION(Y$IDX) = ' ';

   2473  9 000075   000000 635011                    EAA     0,X1
         9 000076   000020 771000                    ARL     16
         9 000077   040005 100400                    MLR     fill='040'O
         9 000100   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
         9 000101   000006 400010 xsym               ADSC9   KF_UTBL+6,A              cn=2,n=8

      233     2474    2           END;                            /*END OF DO Y$IDX*/

   2474  9 000102   200013 235100                    LDA     Y$IDX,,AUTO
         9 000103   000001 035007                    ADLA    1,DL
         9 000104   200013 755100                    STA     Y$IDX,,AUTO
         9 000105   000025 115007                    CMPA    21,DL
         9 000106   000063 602000 9                  TNC     s:2471

      234     2475        /*
      235     2476                 NOW CLEAR SOME FROG FLAGS
      236     2477        */
      237     2478    1           KF_FLGS.MSGLOG = '0'B;

   2478  9 000107   000031 236000 xsym               LDQ     B_VECTNIL+25
         9 000110   000000 356000 xsym               ANSQ    KF_FLGS

      238     2479    1           KF_FLGS.FEPTRACE = '0'B;

   2479  9 000111   000001 236000 10                 LDQ     1
         9 000112   000000 356000 xsym               ANSQ    KF_FLGS

      239     2480    1           KF_FLGS.KILLFROG = '0'B;        /*KILLFROG RCVD FLAG*/

   2480  9 000113   000002 236000 10                 LDQ     2
         9 000114   000000 356000 xsym               ANSQ    KF_FLGS

PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:22   
      240     2481        /**/
      241     2482    2           IF B$JIT$->B$JIT.USERWORD(0) = 0 THEN DO; /* FIRST TIME THROUGH INIT */

   2482  9 000115   000000 470400 xsym               LDP0    B$JIT$
         9 000116   000133 221100                    LDX1    91,,PR0
         9 000117   000144 601000 9                  TNZ     s:2500

      242     2483                                 /* Tell SLUG that init for FROG is done    */
      243     2484    2                KF_WAIT4SLUG = '1'B;

   2484  9 000120   400000 236003                    LDQ     -131072,DU
         9 000121   000000 756000 xsym               STQ     KF_WAIT4SLUG

      244     2485    2                JC_CITE.CODE = JCEV_PCMP#;

   2485  9 000122   000001 222003                    LDX2    1,DU
         9 000123   000246 442000 6                  SXL2    JC_CITE

      245     2486    2                JC_CITE.USER = JG_FROG#;

   2486  9 000124   000010 221003                    LDX1    8,DU
         9 000125   000247 741000 6                  STX1    JC_CITE+1

      246     2487    2                CALL M$WRITE(TELL_SLUG) ALTRET(BDWR);

   2487  9 000126   000232 630400 6                  EPPR0   TELL_SLUG
         9 000127   440001 713400                    CLIMB   alt,write
         9 000130   401400 401760                    pmme    nvectors=4
         9 000131   000205 702000 9                  TSX2    BDWR

      247     2488    2                CALL M$READ(READCSCG) ALTRET(BDWR);

   2488  9 000132   000260 630400 6                  EPPR0   READCSCG
         9 000133   440000 713400                    CLIMB   alt,read
         9 000134   401400 401760                    pmme    nvectors=4
         9 000135   000205 702000 9                  TSX2    BDWR

PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:23   
      248     2489
      249     2490                            /* Now wait for SLUG to tell us its OK to go    */
      250     2491    3                DO INHIBIT;

      251     2492    3   CHK:
      252     2493    4                     IF KF_WAIT4SLUG THEN DO;

   2493  9 000136   000000 234200 xsym  CHK          SZN   ! KF_WAIT4SLUG
         9 000137   000144 605200 9                  TPL   ! s:2500

      253     2494    4                          CALL M$WAIT(FPT_WAIT);

   2494  9 000140   000306 630600 6                  EPPR0 ! FPT_WAIT
         9 000141   020006 713600                    CLIMB ! 8198
         9 000142   400400 401760                    pmme    nvectors=2

      254     2495    4                          GOTO CHK;

   2495  9 000143   000136 710200 9                  TRA   ! CHK

      255     2496    4                     END;                  /* IF                       */
      256     2497    3                END;                       /* DO INHIBIT               */

      257     2498    2           END;                            /* IF B$JIT.USERWORD(0) = 0 */

      258     2499        /**/
      259     2500    1           OPEN_FILE.V.DCB# = DCBNUM(M$NETCON);

   2500  9 000144   000000 236007 xsym               LDQ     M$NETCON,DL
         9 000145   000000 620006                    EAX0    0,QL
         9 000146   000504 740000 6                  STX0    OPEN_FILE+36

      260     2501    1           OPEN_FILE.NAME_ = VECTOR(NETCONNAME);

   2501  9 000147   000004 237000 10                 LDAQ    4
         9 000150   000446 757000 6                  STAQ    OPEN_FILE+6

PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:24   
      261     2502    1           CALL M$OPEN (OPEN_FILE)

   2502  9 000151   000440 630400 6                  EPPR0   OPEN_FILE
         9 000152   450000 713400                    CLIMB   alt,open
         9 000153   410400 401760                    pmme    nvectors=18
         9 000154   000156 702000 9                  TSX2    s:2505
         9 000155   000156 710000 9                  TRA     s:2505

      262     2503    2           WHENALTRETURN DO;

      263     2504    2           END;

      264     2505    1           OPEN_FILE.V.DCB# = DCBNUM(M$HLPF);

   2505  9 000156   000000 236007 xsym               LDQ     M$HLPF,DL
         9 000157   000000 620006                    EAX0    0,QL
         9 000160   000504 740000 6                  STX0    OPEN_FILE+36

      265     2506    1           OPEN_FILE.NAME_ = VECTOR(HLPNAME);

   2506  9 000161   000006 237000 10                 LDAQ    6
         9 000162   000446 757000 6                  STAQ    OPEN_FILE+6

      266     2507    1           CALL M$OPEN (OPEN_FILE)

   2507  9 000163   000440 630400 6                  EPPR0   OPEN_FILE
         9 000164   450000 713400                    CLIMB   alt,open
         9 000165   410400 401760                    pmme    nvectors=18
         9 000166   000170 702000 9                  TSX2    s:2510
         9 000167   000170 710000 9                  TRA     s:2510

      267     2508    2           WHENALTRETURN DO;

      268     2509    2           END;

      269     2510    1           OPEN_FILE.V.DCB# = DCBNUM(M$PROF);

PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:25   
   2510  9 000170   000000 236007 xsym               LDQ     M$PROF,DL
         9 000171   000000 620006                    EAX0    0,QL
         9 000172   000504 740000 6                  STX0    OPEN_FILE+36

      270     2511    1           OPEN_FILE.NAME_ = VECTOR(PRONAME);

   2511  9 000173   000010 237000 10                 LDAQ    8
         9 000174   000446 757000 6                  STAQ    OPEN_FILE+6

      271     2512    1           CALL M$OPEN (OPEN_FILE)

   2512  9 000175   000440 630400 6                  EPPR0   OPEN_FILE
         9 000176   450000 713400                    CLIMB   alt,open
         9 000177   410400 401760                    pmme    nvectors=18
         9 000200   000202 702000 9                  TSX2    s:2515
         9 000201   000202 710000 9                  TRA     s:2515

      272     2513    2           WHENALTRETURN DO;

      273     2514    2           END;

      274     2515    1           KF_RUN_FLAG = %SET##;

   2515  9 000202   000001 235007                    LDA     1,DL
         9 000203   000000 755000 xsym               STA     KF_RUN_FLAG

      275     2516    1           RETURN;

   2516  9 000204   000000 702200 xent               TSX2  ! X66_ARET

      276     2517        /**/
      277     2518        /*        ERROR HANDLING      */
      278     2519        /**/
      279     2520    1   BDWR:   ERR_CNT = 0;

   2520  9 000205   000556 450000 6     BDWR         STZ     ERR_CNT

PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:26   
      280     2521    1   BDEV:   ERR_CNT = ERR_CNT+1;

   2521  9 000206   000556 235000 6     BDEV         LDA     ERR_CNT
         9 000207   000001 035007                    ADLA    1,DL
         9 000210   000556 755000 6                  STA     ERR_CNT

      281     2522    1   BDOP:   ERR_CNT=ERR_CNT+1;

   2522  9 000211   000556 235000 6     BDOP         LDA     ERR_CNT
         9 000212   000001 035007                    ADLA    1,DL
         9 000213   000556 755000 6                  STA     ERR_CNT

      282     2523    1   BDOP1:  ERR_CNT = ERR_CNT + 1;

   2523  9 000214   000556 235000 6     BDOP1        LDA     ERR_CNT
         9 000215   000001 035007                    ADLA    1,DL
         9 000216   000556 755000 6                  STA     ERR_CNT

      283     2524    1   BDCGCTL: ERR_CNT = ERR_CNT+1;

   2524  9 000217   000556 235000 6     BDCGCTL      LDA     ERR_CNT
         9 000220   000001 035007                    ADLA    1,DL
         9 000221   000556 755000 6                  STA     ERR_CNT

      284     2525    1           CALL BINCHAR(EMSG.NUM,ERR_CNT);

   2525  9 000222   000044 773000                    LRL     36
         9 000223   200016 757100                    STAQ    Y$IDX+3,,AUTO
         9 000224   000000 301500                    BTD
         9 000225   200016 000010                    NDSC9   Y$IDX+3,,AUTO            cn=0,s=lsgnf,sf=0,n=8
         9 000226   000560 030004 6                  NDSC9   EMSG+1                   cn=0,s=nosgn,sf=0,n=4

      285     2526    1           CALL KFE$ERP(EMSG);

   2526  9 000227   000003 630400 10                 EPPR0   3
         9 000230   000017 631400 xsym               EPPR1   B_VECTNIL+15
         9 000231   000000 701000 xent               TSX1    KFE$ERP
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:27   
         9 000232   000000 011000                    NOP     0

      286     2527    1           KF_RUN_FLAG = %RESET##;

   2527  9 000233   000000 450000 xsym               STZ     KF_RUN_FLAG

      287     2528    1           RETURN;

   2528  9 000234   000000 702200 xent               TSX2  ! X66_ARET
      288     2529    1   END KFI$INIT;

PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:28   
--  Include file information  --

   JG_GHOSTS_C.:E05TOU  is referenced.
   JG_EVID_C.:E05TOU  is referenced.
   JC_MACRO_C.:E05TOU  is referenced.
   KF_DAT_R.:E05TOU  cannot be made into a system file and is referenced.
   KF$MSG_C.:E05TOU  is referenced.
   KF$SUBS.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure KFI$INIT.
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:29   

 **** Variables and constants ****

  ****  Section 006  Data  KFI$INIT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

   110-0-0/c STRC(45)    r     1 CGNM                     422-0-0/c STRC(45)    r     1 CSCGNM
   557-0-0/c STRC(72)    r     1 EMSG                     556-0-0/w UBIN        r     1 ERR_CNT
   544-0-0/d STRC(144)   r     1 EVCG                     112-0-0/w STRC(288)   r     1 FECG_ACSVEH
   122-0-0/d STRC(1872)  r     1 FPT_CGCTL                306-0-0/d STRC(216)   r     1 FPT_WAIT
   532-0-0/c STRC(45)    r     1 HLPNAME                  246-0-0/w STRC(54)    r     1 JC_CITE
   536-0-0/c STRC(72)    r     1 NETCONNAME                 0-0-0/d STRC(2088)  r     1 OPCG
   314-0-0/d STRC(2088)  r     1 OPCSCG                   440-0-0/d STRC(2088)  r     1 OPEN_FILE
   534-0-0/c STRC(45)    r     1 PRONAME                  260-0-0/d STRC(504)   r     1 READCSCG
   250-0-0/w STRC(288)   r     1 SLUG_STATION              72-0-0/c STRC(72)    r     1 SYSACCT
   232-0-0/d STRC(432)   r     1 TELL_SLUG                206-0-0/d STRC(720)   r     1 VLP_CGCP
   406-0-0/w STRC(432)   r     1 VLP_SETSTACS              74-0-0/w STRC(432)   r     1 VLP_SETSTAFE
   276-0-0/w STRC(288)   r     1 VLP_STATION              540-0-0/w CHAR(12)    r     1 WRMSG
   424-0-0/d STRC(432)   r     1 WRTEO                    550-0-0/d STRC(216)   r     1 XCONFPT

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    13-0-0/w UBIN        r     1 Y$IDX

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$JIT$                     0-0-0/c CHAR(1024)  r     1 KF_CSCG_INBUF
     0-0-0/w UBIN        r     1 KF_EVCOUNT
     0-0-0/w STRC(72)    r     1 KF_EVMSG_QUEUE(0:50)
     0-0-0/b STRC(3)     r     1 KF_FLGS                    0-0-0/w UBIN        r     1 KF_QINSERT
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:30   
     0-0-0/w UBIN        r     1 KF_QREMOVE                 0-0-0/w UBIN        r     1 KF_RUN_FLAG
     0-0-0/w STRC(306)   r     1 KF_UTBL(0:20)              0-0-0/b BIT         r     1 KF_WAIT4SLUG

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(5760)  r     1 B$JIT                      0-0-0N  NULL        r     1 M$CS
     0-0-0N  NULL        r     1 M$DO                       0-0-0N  NULL        r     1 M$FE
     0-0-0N  NULL        r     1 M$HLPF                     0-0-0N  NULL        r     1 M$NETCON
     0-0-0N  NULL        r     1 M$PROF


   Procedure KFI$INIT requires 157 words for executable code.
   Procedure KFI$INIT requires 16 words of local(AUTO) storage.

    No errors detected in file KFI$INIT.:E05TSI    .
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:31   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:32   
          MINI XREF LISTING

B$JIT.CPFLAGS1.SLEAZE
       777**DCL       777--REDEF
B$JIT.ERR.MID
       684**DCL       684--REDEF
B$JIT.MODE
       678**DCL      2430>>IF
B$JIT.USERWORD
       771**DCL      2482>>IF
B$JIT$
      2404**DCL       678--IMP-PTR  2430>>IF       2482>>IF
BDCGCTL
      2524**LABEL    2465--CALLALT
BDEV
      2521**LABEL    2441--CALLALT
BDOP
      2522**LABEL    2462--CALLALT
BDOP1
      2523**LABEL    2455--CALLALT
BDWR
      2520**LABEL    2436--CALLALT  2487--CALLALT  2488--CALLALT
CGNM
      1616**DCL      1506--DCLINIT
CHK
      2493**LABEL    2495--GOTO
CSCGNM
      2142**DCL      2046--DCLINIT
EMSG
      2415**DCL      2526<>CALL
EMSG.NUM
      2417**DCL      2525<<CALLBLT
ERR_CNT
      2403**DCL      2429<<ASSIGN   2520<<ASSIGN   2521<<ASSIGN   2521>>ASSIGN   2522<<ASSIGN   2522>>ASSIGN
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:33   
      2523<<ASSIGN   2523>>ASSIGN   2524<<ASSIGN   2524>>ASSIGN   2525>>CALLBLT
EVCG
      2382**DCL      2441<>CALL
EVCG.V
      2382**DCL      2382--DCLINIT
FECG_ACSVEH
      1629**DCL      1508--DCLINIT
FECG_ACSVEH.Q
      1630**DCL      1629--DCLINIT
FPT_CGCTL
      1695**DCL      2465<>CALL
FPT_CGCTL.V
      1700**DCL      1695--DCLINIT
FPT_WAIT
      1974**DCL      2494<>CALL
FPT_WAIT.V
      1975**DCL      1974--DCLINIT
HLPNAME
      2313**DCL      2506--ASSIGN
JC_CITE
      1827**DCL      1801--DCLINIT  1802--DCLINIT
JC_CITE.CODE
      1831**DCL      2485<<ASSIGN
JC_CITE.USER
      1837**DCL      2486<<ASSIGN
KFA$ASYNC
      2422**DCL-ENT  2382--DCLINIT
KFE$ERP
      2423**DCL-ENT  2526--CALL
KFM$XCONENTRY
      2425**DCL-ENT  2398--DCLINIT
KF_CSCG_INBUF
       988**DCL      1916--DCLINIT  1917--DCLINIT
KF_EVCOUNT
       986**DCL      2451<<ASSIGN
KF_EVMSG_QUEUE
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:34   
       985**DCL      2448<<ASSIGN
KF_FLGS.FEPTRACE
       994**DCL      2479<<ASSIGN
KF_FLGS.KILLFROG
       994**DCL      2480<<ASSIGN
KF_FLGS.MSGLOG
       994**DCL      2478<<ASSIGN
KF_QINSERT
       985**DCL      2449<<ASSIGN
KF_QREMOVE
       985**DCL      2450<<ASSIGN
KF_RUN_FLAG
       986**DCL      2515<<ASSIGN   2527<<ASSIGN
KF_UTBL
       989**DCL      2469<<ASSIGN
KF_UTBL.DCBSTATION
       992**DCL      2473<<ASSIGN
KF_UTBL.STATE
       990**DCL      2471<<ASSIGN
KF_UTBL.STATION
       990**DCL       990--REDEF    2472<<ASSIGN
KF_WAIT4SLUG
       986**DCL      2484<<ASSIGN   2493>>IF
M$CGCTL
        85**DCL-ENT  2465--CALL
M$EVENT
       119**DCL-ENT  2441--CALL
M$HLPF
       989**DCL      2505>>ASSIGN
M$NETCON
       989**DCL      2500>>ASSIGN
M$OPEN
        64**DCL-ENT  2455--CALL     2458--CALL     2462--CALL     2502--CALL     2507--CALL     2512--CALL
M$PROF
       989**DCL      2510>>ASSIGN
M$READ
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:35   
        65**DCL-ENT  2488--CALL
M$WAIT
       122**DCL-ENT  2494--CALL
M$WRITE
        65**DCL-ENT  2436--CALL     2487--CALL
M$XCON
       119**DCL-ENT  2445--CALL
NETCONNAME
      2367**DCL      2501--ASSIGN
OPCG
      1505**DCL      2458<>CALL     2462<>CALL
OPCG.ACSVEH_
      1507**DCL      1508--REDEF
OPCG.ALTKEYS_
      1513**DCL      1514--REDEF    1514--REDEF
OPCG.HDR_
      1512**DCL      1513--REDEF
OPCG.TAB_
      1511**DCL      1512--REDEF
OPCG.UHL_
      1505**DCL      1506--REDEF    1506--REDEF
OPCG.V
      1514**DCL      1505--DCLINIT
OPCG.V.EXIST#
      1518**DCL      2461<<ASSIGN
OPCG.V.FSN#
      1545**DCL      1545--REDEF    1545--REDEF
OPCG.WSN_
      1511**DCL      1511--REDEF
OPCSCG
      2045**DCL      2455<>CALL
OPCSCG.ACSVEH_
      2047**DCL      2048--REDEF
OPCSCG.ALTKEYS_
      2053**DCL      2054--REDEF    2054--REDEF
OPCSCG.HDR_
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:36   
      2052**DCL      2053--REDEF
OPCSCG.TAB_
      2051**DCL      2052--REDEF
OPCSCG.UHL_
      2045**DCL      2046--REDEF    2046--REDEF
OPCSCG.V
      2054**DCL      2045--DCLINIT
OPCSCG.V.FSN#
      2085**DCL      2085--REDEF    2085--REDEF
OPCSCG.WSN_
      2051**DCL      2051--REDEF
OPEN_FILE
      2244**DCL      2502<>CALL     2507<>CALL     2512<>CALL
OPEN_FILE.ACSVEH_
      2246**DCL      2247--REDEF
OPEN_FILE.ALTKEYS_
      2252**DCL      2253--REDEF    2253--REDEF
OPEN_FILE.HDR_
      2251**DCL      2252--REDEF
OPEN_FILE.NAME_
      2245**DCL      2501<<ASSIGN   2506<<ASSIGN   2511<<ASSIGN
OPEN_FILE.TAB_
      2250**DCL      2251--REDEF
OPEN_FILE.UHL_
      2244**DCL      2245--REDEF    2245--REDEF
OPEN_FILE.V
      2253**DCL      2244--DCLINIT
OPEN_FILE.V.DCB#
      2253**DCL      2500<<ASSIGN   2505<<ASSIGN   2510<<ASSIGN
OPEN_FILE.V.FSN#
      2284**DCL      2284--REDEF    2284--REDEF
OPEN_FILE.WSN_
      2250**DCL      2250--REDEF
PRONAME
      2340**DCL      2511--ASSIGN
READCSCG
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:37   
      1914**DCL      2488<>CALL
READCSCG.STATION_
      1917**DCL      1918--REDEF
READCSCG.V
      1918**DCL      1914--DCLINIT
READCSCG.V.DVBYTE.REREAD#
      1929**DCL      1929--REDEF
READCSCG.V.INDX#
      1927**DCL      1927--REDEF
SLUG_STATION
      1877**DCL      1802--DCLINIT
SLUG_STATION.MSGIDXT
      1887**DCL      1890--REDEF
SYSACCT
      1561**DCL      1510--DCLINIT
TELL_SLUG
      1800**DCL      2487<>CALL
TELL_SLUG.STATION_
      1802**DCL      1802--REDEF
TELL_SLUG.V
      1803**DCL      1800--DCLINIT
TELL_SLUG.V.DVBYTE.VFC#
      1809**DCL      1809--REDEF
TRY_OLDFILE
      2461**LABEL    2458--CALLALT
VLP_CGCP
      1748**DCL      1696--DCLINIT
VLP_CGCP.DVBYTE.REREAD#
      1762**DCL      1763--REDEF
VLP_SETSTACS
      2101**DCL      2046--DCLINIT
VLP_SETSTAFE
      1575**DCL      1506--DCLINIT
VLP_STATION
      1948**DCL      1917--DCLINIT
VLP_STATION.MSGIDXT
PL6.E3A0      #001=KFI$INIT File=KFI$INIT.:E05TSI                                WED 07/30/97 00:23 Page:38   
      1958**DCL      1961--REDEF
WRMSG
      2369**DCL      2163--DCLINIT  2164--DCLINIT
WRTEO
      2162**DCL      2436<>CALL
WRTEO.STATION_
      2164**DCL      2164--REDEF
WRTEO.V
      2165**DCL      2162--DCLINIT
WRTEO.V.DVBYTE.VFC#
      2171**DCL      2171--REDEF
XCONFPT
      2397**DCL      2445<>CALL
XCONFPT.V
      2398**DCL      2397--DCLINIT
Y$IDX
      2409**DCL      2470<<DOINDEX  2471>>ASSIGN   2472>>ASSIGN   2473>>ASSIGN
