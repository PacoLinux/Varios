VERSION E05

PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:1    
        1        1        /*M* KFD$FEDUMP - Dump local FEP */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DMR */
        8        8        KFD$FEDUMP: PROC(FEP#) ALTRET;
        9        9        /*D* NAME: KFD$FEDUMP
       10       10             CALL: CALL KFD$FEDUMP (NODENAME) ALTRET(DUMP_TROUBLE);
       11       11             DESCRIPTION:  This routine is called to dump a local FEP.
       12       12                           NOTE:  The FEP is assumed already stopped.
       13       13        */
       14       14        /**/
       15       15        /*  Parameters  */
       16       16        /**/
       17       17    1   DCL FEP# UBIN;
       18       18        /**/
       19       19        /*  INCLUDE files  */
       20       20        /**/
       21       21        %INCLUDE B_ERRORS_C;
       22     1148        %INCLUDE CP_6;
       23     1229        %INCLUDE CP_6_SUBS;
       24     1769        %INCLUDE IR_DATA_M;
       25     1933        %INCLUDE KI_SUBS_C;
       26     2069        %INCLUDE K_SCODE_C;
       27     2154        %INCLUDE EL$TABLES;
       28     2477        %INCLUDE FM$FIT;
       29     2698        /**/
       30     2699        /*  Equates  */
       31     2700        /**/
       32     2701        %GI_RCVR_EQU;
       33     2713        %RV_DFSUBS;
       34     2740        /**/
       35     2741        /*  Entries  */
       36     2742        /**/
       37     2743    1   DCL KFD$DUMPSEG ENTRY(4) ALTRET;
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:2    
       38     2744    1   DCL KFD$GETMEM ENTRY(4) ALTRET;
       39     2745    1   DCL KFD$LOGSCREECH ENTRY(3);
       40     2746    1   DCL KFF$SAVE_DFNAME ENTRY(2) ALTRET;
       41     2747    1   DCL KFS$PACKMSG ENTRY(3);
       42     2748    1   DCL XUR$ERRCNVRT ENTRY(2);
       43     2749    1   DCL XSF$LOCCODT ENTRY(2) ALTRET;
       44     2750        /**/
       45     2751        /*  Auto  */
       46     2752        /**/
       47     2753    1   DCL M$DUMPFILE# SBIN;
       48     2754    1   DCL M$DUMPFILE$ PTR;
       49     2755    1   DCL I SBIN;
       50     2756    1   DCL STARTED BIT(1);
       51     2757    1   DCL MAP_IDX SBIN;
       52     2758    1   DCL PAGE SBIN;
       53     2759    1   DCL LOW_PAGE SBIN;
       54     2760        %RV_FEP_BUFF (FPTN = RECOVERY_BUFFER,
       55     2761                   STCLASS = AUTO);
       56     2794    1   DCL DUMPMAP (0:%(GI_BITMAP_SIZE-1)) BIT(1) UNAL;
       57     2795
       58     2796        %VLP_ATTR (FPTN=DUMP_ATTR);
       59     2810        %VLP_ACSVEH (FPTN=X,VEHICLE='FCG-M12345-0[NN]',LAST=";");
       60     2827    1   DCL GOT_ACS BIT(1) ALIGNED;
       61     2828    1   DCL FIT$ PTR;
       62     2829        %CODE10;
       63     2833
       64     2834    1   DCL GDP_ VECTOR STATIC;
       65     2835        %FPT_GDP (PAGES=1,RESULTS=GDP_);
       66     2849        %FPT_FDP (PAGES=1);
       67     2863        /**/
       68     2864        /*  Constants  */
       69     2865        /**/
       70     2866    1   DCL M$DUMPFILE DCB;
       71     2867
       72     2868    1   DCL B$TCB$ PTR SYMREF READONLY;
       73     2869
       74     2870        %FPT_SCREECH (FPTN = FPT_SCREECH,
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:3    
       75     2871                      SCODE = RECOVERY_CODE,
       76     2872                      SCREECHID = DUMP_NAME,
       77     2873                      STCLASS = CONSTANT);
       78     2887        %VLP_ACCT (FPTN = DUMP_ACCT,
       79     2888                   ACCT = ':SYSTAC',
       80     2889                   STCLASS = CONSTANT);
       81     2902        %FPT_OPEN (FPTN = FPT_OPEN_DUMP,
       82     2903                   DCB = M$DUMPFILE,
       83     2904                   NAME = DUMP_NAME,
       84     2905                   ACCT = DUMP_ACCT,
       85     2906                   ASN = FILE,
       86     2907                   ORG=KEYED,
       87     2908                   FUN = UPDATE,
       88     2909                   SHARE = NONE,
       89     2910                   IXTNSIZE = 20,
       90     2911                   XTNSIZE = 20,
       91     2912                   STCLASS = STATIC);
       92     3021        %FPT_CLOSE (FPTN = FPT_CLOSE_DUMP,
       93     3022                    DCB = M$DUMPFILE,
       94     3023                    DISP=SAVE,
       95     3024                    RELG = YES,
       96     3025                    STCLASS = STATIC);
       97     3067        %FPT_READ (FPTN=RDDUMP,
       98     3068                   DCB=M$DUMPFILE,
       99     3069                   BUF=NODEDIR,
      100     3070                   KEY=NODEKEY,
      101     3071                   KEYS=YES);
      102     3110        %FPT_WRITE (FPTN=WRDUMP,
      103     3111                    DCB=M$DUMPFILE,
      104     3112                    BUF=NODEDIR,
      105     3113                    KEY=NODEKEY);
      106     3144    1   DCL 1 NODEKEY STATIC ALIGNED,
      107     3145    1         2 L UBIN BYTE CALIGNED INIT(7),
      108     3146    1         2 K(0:6) UBIN BYTE CALIGNED INIT(0*0);
      109     3147        %FPT_WAIT (FPTN=WAIT10,
      110     3148                   UNITS=10);
      111     3162        %VLP_SCODE (FPTN = RECOVERY_CODE,
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:4    
      112     3163                    FCG = KF,
      113     3164                    MID = D,
      114     3165                    MON = NO,
      115     3166                    CODE = 0,
      116     3167                    LDCTS = YES,
      117     3168                    CWSPT = YES,
      118     3169                   CGDATA=YES,
      119     3170                    STCLASS = STATIC);
      120     3231        %VLP_ERRCODE (FPTN=NODUMP_CODE,STCLASS=CONSTANT,
      121     3232                      FCG=KF,MID=D,ERR#=%S$FEDUMP_TIMEOUT,SEV=3);
      122     3277    1   DCL 1 NODUMP_NAME CONSTANT CALIGNED,
      123     3278    1         2 L UBIN BYTE CALIGNED INIT(10),
      124     3279    1         2 C CHAR(0) INIT(':DFNONE000');
      125     3280        /**/
      126     3281        /*  Static  */
      127     3282        /**/
      128     3283        %VLP_NAME (FPTN = DUMP_NAME,
      129     3284                   LEN = 31,
      130     3285                   STCLASS = STATIC);
      131     3312    1   DCL KF_NODEIDX SBIN STATIC SYMDEF;
      132     3313        %RV_NODEDIR (FPTN=NODEDIR,STCLASS=STATIC,N=10);
      133     3330        /**/
      134     3331        /*  Based  */
      135     3332        /**/
      136     3333        %F$DCB;
      137     3390        %B$TCB;
      138     3393        %B$ALT;
      139     3401        %SUB B$ALT=B$TCB$->B$TCB.ALT$->B$ALT;
      140     3402        /**/
      141     3403        %EJECT;
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:5    
      142     3404        /**/
      143     3405        /*  Basic initialization.  */
      144     3406        /**/
      145     3407    1           M$DUMPFILE# = DCBNUM (M$DUMPFILE);
      146     3408    1           M$DUMPFILE$ = DCBADDR (M$DUMPFILE#);
      147     3409        /**/
      148     3410        /*  Reconcile parameters.  */
      149     3411        /**/
      150     3412    1           IF FEP# = 0 OR FEP# > %KI_FEMAX#
      151     3413    1           THEN                            /* FEP number out of range            */
      152     3414    1              GOTO BAD_NODE;
      153     3415        /**/
      154     3416        /*  Grab the FEP's recovery buffer and pack strange fields.  */
      155     3417        /**/
      156     3418    1           CALL KFD$GETMEM (RECOVERY_BUFFER,
      157     3419    1             %GI_RVBUF_LOC,
      158     3420    1             SIZEC(RECOVERY_BUFFER)/2,
      159     3421    2             FEP#) WHENALTRETURN DO;
      160     3422    2              CALL KFD$LOGSCREECH(NODUMP_CODE,FEP#,NODUMP_NAME);
      161     3423        /*S*       SCREECH_CODE:  KFD-S$FEDUMP_TIMEOUT
      162     3424                   MESSAGE:       FEP does not respond to dump request.
      163     3425        */
      164     3426    2              ALTRETURN;
      165     3427    2              END;
      166     3428    1           CALL KFS$PACKMSG (ADDR(RECOVERY_BUFFER.DUMPMAP),
      167     3429    1             ADDR(DUMPMAP),
      168     3430    1             %(GI_BITMAP_SIZE/8));
      169     3431        /**/
      170     3432        /*  Cause a HOST dump as a starting base.  */
      171     3433        /**/
      172     3434    1           CALL XUR$ERRCNVRT(RECOVERY_BUFFER.SCODE.ERRCODE,RECOVERY_CODE);
      173     3435    1           RECOVERY_CODE.SEV#=%SEV_FESNAP#;
      174     3436    1           CALL M$SCREECH (FPT_SCREECH) ALTRET(CREATION_TROUBLE);
      175     3437    1           CALL KFD$LOGSCREECH(RECOVERY_CODE,FEP#,DUMP_NAME);
      176     3438        /**/
      177     3439        /*  Prepare to embellish host dump with FEP information.  */
      178     3440        /**/
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:6    
      179     3441    2           CALL OPENDUMP WHENALTRETURN DO;
      180     3442    2              CALL CLEANUP;
      181     3443    2              ALTRETURN;
      182     3444    2              END;
      183     3445    1           CALL KFF$SAVE_DFNAME(FEP#,DUMP_NAME);
      184     3446        /**/
      185     3447    1           WRDUMP.BUF_=VECTOR(RECOVERY_BUFFER);
      186     3448    1           NODEKEY.K(0)=KF_NODEIDX;
      187     3449    1           CALL M$WRITE(WRDUMP);           /* WRITE RECOVERY BUFFER */
      188     3450        /**/
      189     3451        %EJECT;
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:7    
      190     3452        /**/
      191     3453        /*  Dump the pages of FEP memory indicated by the bit map.  */
      192     3454        /**/
      193     3455    1           STARTED = %NO#;
      194     3456    2           DO MAP_IDX = 0 TO %GI_BITMAP_SIZE-1;
      195     3457    2              PAGE = MAP_IDX * %GI_PGS_PER_BIT;
      196     3458    2              IF DUMPMAP(MAP_IDX) AND NOT STARTED
      197     3459    2              THEN                         /* Start of a dump chunk              */
      198     3460    3              DO;
      199     3461    3                 STARTED = %YES#;
      200     3462    3                 LOW_PAGE = PAGE;
      201     3463    3                 END;
      202     3464    2              IF STARTED AND NOT DUMPMAP(MAP_IDX)
      203     3465    2              THEN                         /* End of a dump chunk                */
      204     3466    3              DO;
      205     3467    3                 STARTED = %NO#;
      206     3468    3                 CALL KFD$DUMPSEG (LOW_PAGE,
      207     3469    3                   PAGE - LOW_PAGE,
      208     3470    3                   M$DUMPFILE#,
      209     3471    3                   FEP#) ALTRET(FEPERR);
      210     3472    3                 END;
      211     3473    2              END;
      212     3474        /**/
      213     3475    1           IF STARTED
      214     3476    1           THEN                            /* Finish off prior chunk             */
      215     3477    1              CALL KFD$DUMPSEG (LOW_PAGE,
      216     3478    1                PAGE+%GI_PGS_PER_BIT - LOW_PAGE,
      217     3479    1                M$DUMPFILE#,
      218     3480    1                FEP#) ALTRET(FEPERR);
      219     3481        %EJECT;
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:8    
      220     3482        /**/
      221     3483        /*  It's all over.  */
      222     3484        /**/
      223     3485    1           CALL CLEANUP;
      224     3486    1           RETURN;
      225     3487        /**/
      226     3488    1   BAD_NODE: ;                             /* NODENAME doesn't map into FEP      */
      227     3489    1   CREATION_TROUBLE: ;                     /* Trouble creating/initializing dump */
      228     3490    1   FEPERR: ;                               /* Trouble dumping FEP memory         */
      229     3491    1           CALL CLEANUP;
      230     3492    1           ALTRETURN;
      231     3493        %EJECT;
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:9    
      232     3494
      233     3495    1   OPENDUMP: PROC ALTRET;
      234     3496
      235     3497    2           CALL M$GDP (FPT_GDP);
      236     3498    2           FPT_OPEN_DUMP.FPARAM_ = GDP_;
      237     3499    3   TRYOPN: CALL M$OPEN(FPT_OPEN_DUMP) WHENALTRETURN DO;
      238     3500    3              IF B$ALT.ERR.CODE~=%E$FILEBUSY AND B$ALT.ERR.CODE~=%E$NOFILE THEN
              3500                       ALTRETURN;
      239     3501    3              CALL M$WAIT(WAIT10);
      240     3502    3              GOTO TRYOPN;
      241     3503    3              END;
      242     3504    2           GOT_ACS = '0'B;
      243     3505    2           FIT$ = VBASE(GDP_);
      244     3506    3           CALL XSF$LOCCODT (FIT$,10) WHENRETURN DO;
      245     3507    3              DUMP_ATTR.Q.X.VEHICLE# = FIT$->CODE10.ACSVEH.T;
      246     3508    3              GOT_ACS = '1'B;
      247     3509    3              END;
      248     3510    2           SUBSTR(DUMP_ATTR.Q.X.VEHICLE#,12,1)='(';
      249     3511    2           SUBSTR(DUMP_ATTR.Q.X.VEHICLE#,15,1)=')';
      250     3512    2           CALL BINCHAR(SUBSTR(DUMP_ATTR.Q.X.VEHICLE#,13,2),FEP#);
      251     3513    2           CALL M$FDP (FPT_FDP);
      252     3514    2           NODEKEY.K='0'B;
      253     3515    3           CALL M$READ(RDDUMP) WHENALTRETURN DO;
      254     3516    3              ALTRETURN;              /* CLEANUP will close dumpfile if needed */
      255     3517    3              END;
      256     3518    2           NODEDIR.N = NODEDIR.N + 1;
      257     3519    2           KF_NODEIDX=NODEDIR.N;
      258     3520    2           CALL BINCHAR(NODEDIR.NODE.NODENAME(KF_NODEIDX),FEP#);
      259     3521    2           NODEDIR.NODE.TYPE(KF_NODEIDX)=%R_FEPNODE#;
      260     3522    2           WRDUMP.BUF_=VECTOR(NODEDIR);
      261     3523    3           CALL M$WRITE(WRDUMP) WHENALTRETURN DO; END;
      262     3524    2           RETURN;
      263     3525
      264     3526    2   END OPENDUMP;
      265     3527
      266     3528        %EJECT;
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:10   
      267     3529    1   CLEANUP: PROC;
      268     3530        /**/
      269     3531    2           IF M$DUMPFILE$ -> F$DCB.FCD#
      270     3532    3           THEN DO;
      271     3533    4              IF GOT_ACS THEN DO;
      272     3534    4                 FPT_CLOSE_DUMP.ACSVEH_ = VECTOR(DUMP_ATTR);
      273     3535    4                 FPT_CLOSE_DUMP.V.OPER.CHGATT# = '1'B;
      274     3536    4                 END;
      275     3537    4              ELSE DO;
      276     3538    4                 FPT_CLOSE_DUMP.ACSVEH_ = VECTOR(NIL);
      277     3539    4                 FPT_CLOSE_DUMP.V.OPER.CHGATT# = '0'B;
      278     3540    4                 END;
      279     3541    4              CALL M$CLOSE (FPT_CLOSE_DUMP) WHENALTRETURN DO; END;
      280     3542    3              END;
      281     3543        /**/
      282     3544    2           RETURN;
      283     3545    2   END CLEANUP;
      284     3546        /**/
      285     3547    1   END KFD$FEDUMP;
      286     3548        %EOD;

PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:11   
--  Include file information  --

   FM$FIT.:E05TOU  is referenced.
   EL$TABLES.:E05TOU  is referenced.
   K_SCODE_C.:E05TOU  is referenced.
   KI_SUBS_C.:E05TOU  is referenced.
   IR_DATA_M.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure KFD$FEDUMP.

   Procedure KFD$FEDUMP requires 293 words for executable code.
   Procedure KFD$FEDUMP requires 270 words of local(AUTO) storage.

PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:12   

 Object Unit name= KFD$FEDUMP                                 File name= KFD$FEDUMP.:E05TOU
 UTS= JUL 30 '97 00:20:22.60 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none   187    273  KFD$FEDUMP
    2   DCB   even  none     0      0  M$DUMPFILE
    3  RoData even  UTS     12     14  KFD$FEDUMP
    4   Proc  even  none   293    445  KFD$FEDUMP
    5  RoData even  none    19     23  KFD$FEDUMP

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     4      0   yes    yes     yes      Std        1  KFD$FEDUMP

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    1    230  KF_NODEIDX
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:13   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       4 KFD$GETMEM
         yes           Std       2 XUR$ERRCNVRT
 yes     yes           Std       2 KFF$SAVE_DFNAME
 yes     yes           Std       4 KFD$DUMPSEG
         yes           Std       3 KFD$LOGSCREECH
         yes           Std       3 KFS$PACKMSG
 yes     yes           Std       2 XSF$LOCCODT
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  M$DUMPFILE                       r    B$TCB$
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:14   


        1        1        /*M* KFD$FEDUMP - Dump local FEP */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DMR */
        8        8        KFD$FEDUMP: PROC(FEP#) ALTRET;

      8  4 000000   000000 700200 xent  KFD$FEDUMP   TSX0  ! X66_AUTO_1
         4 000001   000416 000001                    ZERO    270,1

        9        9        /*D* NAME: KFD$FEDUMP
       10       10             CALL: CALL KFD$FEDUMP (NODENAME) ALTRET(DUMP_TROUBLE);
       11       11             DESCRIPTION:  This routine is called to dump a local FEP.
       12       12                           NOTE:  The FEP is assumed already stopped.
       13       13        */
       14       14        /**/
       15       15        /*  Parameters  */
       16       16        /**/
       17       17    1   DCL FEP# UBIN;
       18       18        /**/
       19       19        /*  INCLUDE files  */
       20       20        /**/
       21       21        %INCLUDE B_ERRORS_C;
       22     1148        %INCLUDE CP_6;
       23     1229        %INCLUDE CP_6_SUBS;
       24     1769        %INCLUDE IR_DATA_M;
       25     1933        %INCLUDE KI_SUBS_C;
       26     2069        %INCLUDE K_SCODE_C;
       27     2154        %INCLUDE EL$TABLES;
       28     2477        %INCLUDE FM$FIT;
       29     2698        /**/
       30     2699        /*  Equates  */
       31     2700        /**/
       32     2701        %GI_RCVR_EQU;
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:15   
       33     2713        %RV_DFSUBS;
       34     2740        /**/
       35     2741        /*  Entries  */
       36     2742        /**/
       37     2743    1   DCL KFD$DUMPSEG ENTRY(4) ALTRET;
       38     2744    1   DCL KFD$GETMEM ENTRY(4) ALTRET;
       39     2745    1   DCL KFD$LOGSCREECH ENTRY(3);
       40     2746    1   DCL KFF$SAVE_DFNAME ENTRY(2) ALTRET;
       41     2747    1   DCL KFS$PACKMSG ENTRY(3);
       42     2748    1   DCL XUR$ERRCNVRT ENTRY(2);
       43     2749    1   DCL XSF$LOCCODT ENTRY(2) ALTRET;
       44     2750        /**/
       45     2751        /*  Auto  */
       46     2752        /**/
       47     2753    1   DCL M$DUMPFILE# SBIN;
       48     2754    1   DCL M$DUMPFILE$ PTR;
       49     2755    1   DCL I SBIN;
       50     2756    1   DCL STARTED BIT(1);
       51     2757    1   DCL MAP_IDX SBIN;
       52     2758    1   DCL PAGE SBIN;
       53     2759    1   DCL LOW_PAGE SBIN;
       54     2760        %RV_FEP_BUFF (FPTN = RECOVERY_BUFFER,
       55     2761                   STCLASS = AUTO);
       56     2794    1   DCL DUMPMAP (0:%(GI_BITMAP_SIZE-1)) BIT(1) UNAL;
       57     2795
       58     2796        %VLP_ATTR (FPTN=DUMP_ATTR);
       59     2810        %VLP_ACSVEH (FPTN=X,VEHICLE='FCG-M12345-0[NN]',LAST=";");
       60     2827    1   DCL GOT_ACS BIT(1) ALIGNED;
       61     2828    1   DCL FIT$ PTR;
       62     2829        %CODE10;
       63     2833
       64     2834    1   DCL GDP_ VECTOR STATIC;
       65     2835        %FPT_GDP (PAGES=1,RESULTS=GDP_);
       66     2849        %FPT_FDP (PAGES=1);
       67     2863        /**/
       68     2864        /*  Constants  */
       69     2865        /**/
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:16   
       70     2866    1   DCL M$DUMPFILE DCB;
       71     2867
       72     2868    1   DCL B$TCB$ PTR SYMREF READONLY;
       73     2869
       74     2870        %FPT_SCREECH (FPTN = FPT_SCREECH,
       75     2871                      SCODE = RECOVERY_CODE,
       76     2872                      SCREECHID = DUMP_NAME,
       77     2873                      STCLASS = CONSTANT);
       78     2887        %VLP_ACCT (FPTN = DUMP_ACCT,
       79     2888                   ACCT = ':SYSTAC',
       80     2889                   STCLASS = CONSTANT);
       81     2902        %FPT_OPEN (FPTN = FPT_OPEN_DUMP,
       82     2903                   DCB = M$DUMPFILE,
       83     2904                   NAME = DUMP_NAME,
       84     2905                   ACCT = DUMP_ACCT,
       85     2906                   ASN = FILE,
       86     2907                   ORG=KEYED,
       87     2908                   FUN = UPDATE,
       88     2909                   SHARE = NONE,
       89     2910                   IXTNSIZE = 20,
       90     2911                   XTNSIZE = 20,
       91     2912                   STCLASS = STATIC);
       92     3021        %FPT_CLOSE (FPTN = FPT_CLOSE_DUMP,
       93     3022                    DCB = M$DUMPFILE,
       94     3023                    DISP=SAVE,
       95     3024                    RELG = YES,
       96     3025                    STCLASS = STATIC);
       97     3067        %FPT_READ (FPTN=RDDUMP,
       98     3068                   DCB=M$DUMPFILE,
       99     3069                   BUF=NODEDIR,
      100     3070                   KEY=NODEKEY,
      101     3071                   KEYS=YES);
      102     3110        %FPT_WRITE (FPTN=WRDUMP,
      103     3111                    DCB=M$DUMPFILE,
      104     3112                    BUF=NODEDIR,
      105     3113                    KEY=NODEKEY);
      106     3144    1   DCL 1 NODEKEY STATIC ALIGNED,
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:17   
      107     3145    1         2 L UBIN BYTE CALIGNED INIT(7),
      108     3146    1         2 K(0:6) UBIN BYTE CALIGNED INIT(0*0);
      109     3147        %FPT_WAIT (FPTN=WAIT10,
      110     3148                   UNITS=10);
      111     3162        %VLP_SCODE (FPTN = RECOVERY_CODE,
      112     3163                    FCG = KF,
      113     3164                    MID = D,
      114     3165                    MON = NO,
      115     3166                    CODE = 0,
      116     3167                    LDCTS = YES,
      117     3168                    CWSPT = YES,
      118     3169                   CGDATA=YES,
      119     3170                    STCLASS = STATIC);
      120     3231        %VLP_ERRCODE (FPTN=NODUMP_CODE,STCLASS=CONSTANT,
      121     3232                      FCG=KF,MID=D,ERR#=%S$FEDUMP_TIMEOUT,SEV=3);
      122     3277    1   DCL 1 NODUMP_NAME CONSTANT CALIGNED,
      123     3278    1         2 L UBIN BYTE CALIGNED INIT(10),
      124     3279    1         2 C CHAR(0) INIT(':DFNONE000');
      125     3280        /**/
      126     3281        /*  Static  */
      127     3282        /**/
      128     3283        %VLP_NAME (FPTN = DUMP_NAME,
      129     3284                   LEN = 31,
      130     3285                   STCLASS = STATIC);
      131     3312    1   DCL KF_NODEIDX SBIN STATIC SYMDEF;
      132     3313        %RV_NODEDIR (FPTN=NODEDIR,STCLASS=STATIC,N=10);
      133     3330        /**/
      134     3331        /*  Based  */
      135     3332        /**/
      136     3333        %F$DCB;
      137     3390        %B$TCB;
      138     3393        %B$ALT;
      139     3401        %SUB B$ALT=B$TCB$->B$TCB.ALT$->B$ALT;
      140     3402        /**/
      141     3403        %EJECT;
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:18   
      142     3404        /**/
      143     3405        /*  Basic initialization.  */
      144     3406        /**/
      145     3407    1           M$DUMPFILE# = DCBNUM (M$DUMPFILE);

   3407  4 000002   000000 236007 xsym               LDQ     M$DUMPFILE,DL
         4 000003   200004 756100                    STQ     M$DUMPFILE#,,AUTO

      146     3408    1           M$DUMPFILE$ = DCBADDR (M$DUMPFILE#);

   3408  4 000004   000000 470400 5                  LDP0    0
         4 000005   000000 471500                    LDP1    0,,PR0
         4 000006   100000 236106                    LDQ     0,QL,PR1
         4 000007   200005 756100                    STQ     M$DUMPFILE$,,AUTO

      147     3409        /**/
      148     3410        /*  Reconcile parameters.  */
      149     3411        /**/
      150     3412    1           IF FEP# = 0 OR FEP# > %KI_FEMAX#

   3412  4 000010   200003 473500                    LDP3    @FEP#,,AUTO
         4 000011   300000 235100                    LDA     0,,PR3
         4 000012   000246 600000 4                  TZE     BAD_NODE
         4 000013   000144 115007                    CMPA    100,DL
         4 000014   000246 603000 4                  TRC     BAD_NODE

      151     3413    1           THEN                            /* FEP number out of range            */
      152     3414    1              GOTO BAD_NODE;
      153     3415        /**/
      154     3416        /*  Grab the FEP's recovery buffer and pack strange fields.  */
      155     3417        /**/
      156     3418    1           CALL KFD$GETMEM (RECOVERY_BUFFER,

   3418  4 000015   200003 236100                    LDQ     @FEP#,,AUTO
         4 000016   000003 235000 5                  LDA     3
         4 000017   200412 757100                    STAQ    FIT$+6,,AUTO
         4 000020   000004 236000 5                  LDQ     4
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:19   
         4 000021   200411 756100                    STQ     FIT$+5,,AUTO
         4 000022   200013 634500                    EPPR4   RECOVERY_BUFFER,,AUTO
         4 000023   200410 454500                    STP4    FIT$+4,,AUTO
         4 000024   200410 630500                    EPPR0   FIT$+4,,AUTO
         4 000025   000022 631400 xsym               EPPR1   B_VECTNIL+18
         4 000026   000000 701000 xent               TSX1    KFD$GETMEM
         4 000027   000031 702000 4                  TSX2    s:3422
         4 000030   000043 710000 4                  TRA     s:3428

      157     3419    1             %GI_RVBUF_LOC,
      158     3420    1             SIZEC(RECOVERY_BUFFER)/2,
      159     3421    2             FEP#) WHENALTRETURN DO;

      160     3422    2              CALL KFD$LOGSCREECH(NODUMP_CODE,FEP#,NODUMP_NAME);

   3422  4 000031   000005 236000 5                  LDQ     5
         4 000032   200412 756100                    STQ     FIT$+6,,AUTO
         4 000033   200003 236100                    LDQ     @FEP#,,AUTO
         4 000034   000006 235000 5                  LDA     6
         4 000035   200410 757100                    STAQ    FIT$+4,,AUTO
         4 000036   200410 630500                    EPPR0   FIT$+4,,AUTO
         4 000037   000021 631400 xsym               EPPR1   B_VECTNIL+17
         4 000040   000000 701000 xent               TSX1    KFD$LOGSCREECH
         4 000041   000000 011000                    NOP     0

      161     3423        /*S*       SCREECH_CODE:  KFD-S$FEDUMP_TIMEOUT
      162     3424                   MESSAGE:       FEP does not respond to dump request.
      163     3425        */
      164     3426    2              ALTRETURN;

   3426  4 000042   000000 702200 xent               TSX2  ! X66_AALT

      165     3427    2              END;
      166     3428    1           CALL KFS$PACKMSG (ADDR(RECOVERY_BUFFER.DUMPMAP),

   3428  4 000043   200013 630500                    EPPR0   RECOVERY_BUFFER,,AUTO
         4 000044   200410 450500                    STP0    FIT$+4,,AUTO
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:20   
         4 000045   200221 631500                    EPPR1   DUMPMAP,,AUTO
         4 000046   200411 451500                    STP1    FIT$+5,,AUTO
         4 000047   000004 236000 5                  LDQ     4
         4 000050   200414 756100                    STQ     FIT$+8,,AUTO
         4 000051   200411 633500                    EPPR3   FIT$+5,,AUTO
         4 000052   200413 453500                    STP3    FIT$+7,,AUTO
         4 000053   200410 634500                    EPPR4   FIT$+4,,AUTO
         4 000054   200412 454500                    STP4    FIT$+6,,AUTO
         4 000055   200412 630500                    EPPR0   FIT$+6,,AUTO
         4 000056   000021 631400 xsym               EPPR1   B_VECTNIL+17
         4 000057   000000 701000 xent               TSX1    KFS$PACKMSG
         4 000060   000000 011000                    NOP     0

      167     3429    1             ADDR(DUMPMAP),
      168     3430    1             %(GI_BITMAP_SIZE/8));
      169     3431        /**/
      170     3432        /*  Cause a HOST dump as a starting base.  */
      171     3433        /**/
      172     3434    1           CALL XUR$ERRCNVRT(RECOVERY_BUFFER.SCODE.ERRCODE,RECOVERY_CODE);

   3434  4 000061   000007 236000 5                  LDQ     7
         4 000062   200411 756100                    STQ     FIT$+5,,AUTO
         4 000063   200215 630500                    EPPR0   RECOVERY_BUFFER+130,,AUTO
         4 000064   200410 450500                    STP0    FIT$+4,,AUTO
         4 000065   200410 630500                    EPPR0   FIT$+4,,AUTO
         4 000066   000020 631400 xsym               EPPR1   B_VECTNIL+16
         4 000067   000000 701000 xent               TSX1    XUR$ERRCNVRT
         4 000070   000000 011000                    NOP     0

      173     3435    1           RECOVERY_CODE.SEV#=%SEV_FESNAP#;

   3435  4 000071   000216 236000 1                  LDQ     RECOVERY_CODE
         4 000072   000010 376000 5                  ANQ     8
         4 000073   000003 276007                    ORQ     3,DL
         4 000074   000216 756000 1                  STQ     RECOVERY_CODE

      174     3436    1           CALL M$SCREECH (FPT_SCREECH) ALTRET(CREATION_TROUBLE);
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:21   

   3436  4 000075   000000 630400 3                  EPPR0   FPT_SCREECH
         4 000076   400013 713400                    CLIMB   alt,+11
         4 000077   401000 401760                    pmme    nvectors=3
         4 000100   000246 702000 4                  TSX2    BAD_NODE

      175     3437    1           CALL KFD$LOGSCREECH(RECOVERY_CODE,FEP#,DUMP_NAME);

   3437  4 000101   000011 236000 5                  LDQ     9
         4 000102   200412 756100                    STQ     FIT$+6,,AUTO
         4 000103   200003 236100                    LDQ     @FEP#,,AUTO
         4 000104   000007 235000 5                  LDA     7
         4 000105   200410 757100                    STAQ    FIT$+4,,AUTO
         4 000106   200410 630500                    EPPR0   FIT$+4,,AUTO
         4 000107   000021 631400 xsym               EPPR1   B_VECTNIL+17
         4 000110   000000 701000 xent               TSX1    KFD$LOGSCREECH
         4 000111   000000 011000                    NOP     0

      176     3438        /**/
      177     3439        /*  Prepare to embellish host dump with FEP information.  */
      178     3440        /**/
      179     3441    2           CALL OPENDUMP WHENALTRETURN DO;

   3441  4 000112   000251 701000 4                  TSX1    OPENDUMP
         4 000113   000115 702000 4                  TSX2    s:3442
         4 000114   000120 710000 4                  TRA     s:3445

      180     3442    2              CALL CLEANUP;

   3442  4 000115   000416 701000 4                  TSX1    CLEANUP
         4 000116   000000 011000                    NOP     0

      181     3443    2              ALTRETURN;

   3443  4 000117   000000 702200 xent               TSX2  ! X66_AALT

      182     3444    2              END;
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:22   
      183     3445    1           CALL KFF$SAVE_DFNAME(FEP#,DUMP_NAME);

   3445  4 000120   000011 236000 5                  LDQ     9
         4 000121   200003 235100                    LDA     @FEP#,,AUTO
         4 000122   200410 757100                    STAQ    FIT$+4,,AUTO
         4 000123   200410 630500                    EPPR0   FIT$+4,,AUTO
         4 000124   000020 631400 xsym               EPPR1   B_VECTNIL+16
         4 000125   000000 701000 xent               TSX1    KFF$SAVE_DFNAME
         4 000126   000000 011000                    NOP     0

      184     3446        /**/
      185     3447    1           WRDUMP.BUF_=VECTOR(RECOVERY_BUFFER);

   3447  4 000127   000012 235000 5                  LDA     10
         4 000130   200410 452500                    STP2    FIT$+4,,AUTO
         4 000131   200410 236100                    LDQ     FIT$+4,,AUTO
         4 000132   000013 036003                    ADLQ    11,DU
         4 000133   000176 757000 1                  STAQ    WRDUMP+4

      186     3448    1           NODEKEY.K(0)=KF_NODEIDX;

   3448  4 000134   000230 236000 1                  LDQ     KF_NODEIDX
         4 000135   000022 736000                    QLS     18
         4 000136   000206 552020 1                  STBQ    NODEKEY,'20'O

      187     3449    1           CALL M$WRITE(WRDUMP);           /* WRITE RECOVERY BUFFER */

   3449  4 000137   000172 630400 1                  EPPR0   WRDUMP
         4 000140   040001 713400                    CLIMB   write
         4 000141   401400 401760                    pmme    nvectors=4

      188     3450        /**/
      189     3451        %EJECT;
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:23   
      190     3452        /**/
      191     3453        /*  Dump the pages of FEP memory indicated by the bit map.  */
      192     3454        /**/
      193     3455    1           STARTED = %NO#;

   3455  4 000142   200007 450100                    STZ     STARTED,,AUTO

      194     3456    2           DO MAP_IDX = 0 TO %GI_BITMAP_SIZE-1;

   3456  4 000143   200010 450100                    STZ     MAP_IDX,,AUTO
         4 000144   000216 710000 4                  TRA     s:3473+1

      195     3457    2              PAGE = MAP_IDX * %GI_PGS_PER_BIT;

   3457  4 000145   200010 235100                    LDA     MAP_IDX,,AUTO
         4 000146   000002 735000                    ALS     2
         4 000147   200011 755100                    STA     PAGE,,AUTO

      196     3458    2              IF DUMPMAP(MAP_IDX) AND NOT STARTED

   3458  4 000150   200010 236100                    LDQ     MAP_IDX,,AUTO
         4 000151   000153 605000 4                  TPL     s:3458+3
         4 000152   000044 036003                    ADLQ    36,DU
         4 000153   000000 066506                    CMPB    filb='0'B
         4 000154   200221 000001                    BDSC    DUMPMAP,Q,AUTO           by=0,bit=0,n=1
         4 000155   000002 000022 xsym               BDSC    B_VECTNIL+2              by=0,bit=0,n=18
         4 000156   000164 600000 4                  TZE     s:3464
         4 000157   200007 234100                    SZN     STARTED,,AUTO
         4 000160   000164 604000 4                  TMI     s:3464

      197     3459    2              THEN                         /* Start of a dump chunk              */
      198     3460    3              DO;

      199     3461    3                 STARTED = %YES#;

   3461  4 000161   400000 236003                    LDQ     -131072,DU
         4 000162   200007 756100                    STQ     STARTED,,AUTO
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:24   

      200     3462    3                 LOW_PAGE = PAGE;

   3462  4 000163   200012 755100                    STA     LOW_PAGE,,AUTO

      201     3463    3                 END;

      202     3464    2              IF STARTED AND NOT DUMPMAP(MAP_IDX)

   3464  4 000164   200007 234100                    SZN     STARTED,,AUTO
         4 000165   000215 605000 4                  TPL     s:3473
         4 000166   200010 236100                    LDQ     MAP_IDX,,AUTO
         4 000167   000171 605000 4                  TPL     s:3464+5
         4 000170   000044 036003                    ADLQ    36,DU
         4 000171   000000 066506                    CMPB    filb='0'B
         4 000172   200221 000001                    BDSC    DUMPMAP,Q,AUTO           by=0,bit=0,n=1
         4 000173   000002 000022 xsym               BDSC    B_VECTNIL+2              by=0,bit=0,n=18
         4 000174   000215 601000 4                  TNZ     s:3473

      203     3465    2              THEN                         /* End of a dump chunk                */
      204     3466    3              DO;

      205     3467    3                 STARTED = %NO#;

   3467  4 000175   200007 450100                    STZ     STARTED,,AUTO

      206     3468    3                 CALL KFD$DUMPSEG (LOW_PAGE,

   3468  4 000176   200011 236100                    LDQ     PAGE,,AUTO
         4 000177   200012 136100                    SBLQ    LOW_PAGE,,AUTO
         4 000200   200410 756100                    STQ     FIT$+4,,AUTO
         4 000201   200003 236100                    LDQ     @FEP#,,AUTO
         4 000202   200415 756100                    STQ     FIT$+9,,AUTO
         4 000203   200004 630500                    EPPR0   M$DUMPFILE#,,AUTO
         4 000204   200414 450500                    STP0    FIT$+8,,AUTO
         4 000205   200410 631500                    EPPR1   FIT$+4,,AUTO
         4 000206   200413 451500                    STP1    FIT$+7,,AUTO
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:25   
         4 000207   200012 633500                    EPPR3   LOW_PAGE,,AUTO
         4 000210   200412 453500                    STP3    FIT$+6,,AUTO
         4 000211   200412 630500                    EPPR0   FIT$+6,,AUTO
         4 000212   000022 631400 xsym               EPPR1   B_VECTNIL+18
         4 000213   000000 701000 xent               TSX1    KFD$DUMPSEG
         4 000214   000246 702000 4                  TSX2    BAD_NODE

      207     3469    3                   PAGE - LOW_PAGE,
      208     3470    3                   M$DUMPFILE#,
      209     3471    3                   FEP#) ALTRET(FEPERR);
      210     3472    3                 END;

      211     3473    2              END;

   3473  4 000215   200010 054100                    AOS     MAP_IDX,,AUTO
         4 000216   200010 235100                    LDA     MAP_IDX,,AUTO
         4 000217   007777 115007                    CMPA    4095,DL
         4 000220   000145 604400 4                  TMOZ    s:3457

      212     3474        /**/
      213     3475    1           IF STARTED

   3475  4 000221   200007 234100                    SZN     STARTED,,AUTO
         4 000222   000243 605000 4                  TPL     s:3485

      214     3476    1           THEN                            /* Finish off prior chunk             */
      215     3477    1              CALL KFD$DUMPSEG (LOW_PAGE,

   3477  4 000223   200011 236100                    LDQ     PAGE,,AUTO
         4 000224   200012 136100                    SBLQ    LOW_PAGE,,AUTO
         4 000225   000004 036007                    ADLQ    4,DL
         4 000226   200410 756100                    STQ     FIT$+4,,AUTO
         4 000227   200003 236100                    LDQ     @FEP#,,AUTO
         4 000230   200415 756100                    STQ     FIT$+9,,AUTO
         4 000231   200004 630500                    EPPR0   M$DUMPFILE#,,AUTO
         4 000232   200414 450500                    STP0    FIT$+8,,AUTO
         4 000233   200410 631500                    EPPR1   FIT$+4,,AUTO
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:26   
         4 000234   200413 451500                    STP1    FIT$+7,,AUTO
         4 000235   200012 633500                    EPPR3   LOW_PAGE,,AUTO
         4 000236   200412 453500                    STP3    FIT$+6,,AUTO
         4 000237   200412 630500                    EPPR0   FIT$+6,,AUTO
         4 000240   000022 631400 xsym               EPPR1   B_VECTNIL+18
         4 000241   000000 701000 xent               TSX1    KFD$DUMPSEG
         4 000242   000246 702000 4                  TSX2    BAD_NODE

      216     3478    1                PAGE+%GI_PGS_PER_BIT - LOW_PAGE,
      217     3479    1                M$DUMPFILE#,
      218     3480    1                FEP#) ALTRET(FEPERR);
      219     3481        %EJECT;
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:27   
      220     3482        /**/
      221     3483        /*  It's all over.  */
      222     3484        /**/
      223     3485    1           CALL CLEANUP;

   3485  4 000243   000416 701000 4                  TSX1    CLEANUP
         4 000244   000000 011000                    NOP     0

      224     3486    1           RETURN;

   3486  4 000245   000000 702200 xent               TSX2  ! X66_ARET

   3475  4 000246                       BAD_NODE     null
   3475  4 000246                       CREATION_TR* null
   3475  4 000246                       FEPERR       null
      225     3487        /**/
      226     3488    1   BAD_NODE: ;                             /* NODENAME doesn't map into FEP      */
      227     3489    1   CREATION_TROUBLE: ;                     /* Trouble creating/initializing dump */
      228     3490    1   FEPERR: ;                               /* Trouble dumping FEP memory         */
      229     3491    1           CALL CLEANUP;

   3491  4 000246   000416 701000 4                  TSX1    CLEANUP
         4 000247   000000 011000                    NOP     0

      230     3492    1           ALTRETURN;

   3492  4 000250   000000 702200 xent               TSX2  ! X66_AALT

      231     3493        %EJECT;
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:28   
      232     3494
      233     3495    1   OPENDUMP: PROC ALTRET;

   3495  4 000251   200406 741300       OPENDUMP     STX1  ! FIT$+2,,AUTO

      234     3496
      235     3497    2           CALL M$GDP (FPT_GDP);

   3497  4 000252   000010 630400 1                  EPPR0   FPT_GDP
         4 000253   030003 713400                    CLIMB   12291
         4 000254   400400 401760                    pmme    nvectors=2

      236     3498    2           FPT_OPEN_DUMP.FPARAM_ = GDP_;

   3498  4 000255   000006 237000 1                  LDAQ    GDP_
         4 000256   000054 757000 1                  STAQ    FPT_OPEN_DUMP+24

      237     3499    3   TRYOPN: CALL M$OPEN(FPT_OPEN_DUMP) WHENALTRETURN DO;

   3499  4 000257   000024 630400 1     TRYOPN       EPPR0   FPT_OPEN_DUMP
         4 000260   450000 713400                    CLIMB   alt,open
         4 000261   410400 401760                    pmme    nvectors=18
         4 000262   000264 702000 4                  TSX2    s:3500
         4 000263   000302 710000 4                  TRA     s:3504

      238     3500    3              IF B$ALT.ERR.CODE~=%E$FILEBUSY AND B$ALT.ERR.CODE~=%E$NOFILE THEN
              3500                       ALTRETURN;

   3500  4 000264   000000 470400 xsym               LDP0    B$TCB$
         4 000265   000000 471500                    LDP1    0,,PR0
         4 000266   100102 236100                    LDQ     66,,PR1
         4 000267   377770 376007                    ANQ     131064,DL
         4 000270   001550 116007                    CMPQ    872,DL
         4 000271   000276 600000 4                  TZE     s:3501
         4 000272   001610 116007                    CMPQ    904,DL
         4 000273   000276 600000 4                  TZE     s:3501

PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:29   
   3500  4 000274   200406 221300                    LDX1  ! FIT$+2,,AUTO
         4 000275   000000 702211                    TSX2  ! 0,X1

      239     3501    3              CALL M$WAIT(WAIT10);

   3501  4 000276   000210 630400 1                  EPPR0   WAIT10
         4 000277   020006 713400                    CLIMB   8198
         4 000300   400400 401760                    pmme    nvectors=2

      240     3502    3              GOTO TRYOPN;

   3502  4 000301   000257 710000 4                  TRA     TRYOPN

      241     3503    3              END;
      242     3504    2           GOT_ACS = '0'B;

   3504  4 000302   200403 450100                    STZ     GOT_ACS,,AUTO

      243     3505    2           FIT$ = VBASE(GDP_);

   3505  4 000303   000007 236000 1                  LDQ     GDP_+1
         4 000304   200404 756100                    STQ     FIT$,,AUTO

      244     3506    3           CALL XSF$LOCCODT (FIT$,10) WHENRETURN DO;

   3506  4 000305   000013 236000 5                  LDQ     11
         4 000306   200411 756100                    STQ     FIT$+5,,AUTO
         4 000307   200404 630500                    EPPR0   FIT$,,AUTO
         4 000310   200410 450500                    STP0    FIT$+4,,AUTO
         4 000311   200410 630500                    EPPR0   FIT$+4,,AUTO
         4 000312   000020 631400 xsym               EPPR1   B_VECTNIL+16
         4 000313   000000 701000 xent               TSX1    XSF$LOCCODT
         4 000314   000327 702000 4                  TSX2    s:3510

      245     3507    3              DUMP_ATTR.Q.X.VEHICLE# = FIT$->CODE10.ACSVEH.T;

   3507  4 000315   200404 470500                    LDP0    FIT$,,AUTO
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:30   
         4 000316   000100 101500                    MRL     fill='000'O
         4 000317   000000 400001                    ADSC9   0,,PR0                   cn=2,n=1
         4 000320   200410 000002                    ADSC9   FIT$+4,,AUTO             cn=0,n=2
         4 000321   200410 220100                    LDX0    FIT$+4,,AUTO
         4 000322   040000 100540                    MLR     fill='040'O
         4 000323   000000 600010                    ADSC9   0,,PR0                   cn=3,n=*X0
         4 000324   000001 600020 1                  ADSC9   DUMP_ATTR+1              cn=3,n=16

      246     3508    3              GOT_ACS = '1'B;

   3508  4 000325   400000 236003                    LDQ     -131072,DU
         4 000326   200403 756100                    STQ     GOT_ACS,,AUTO

      247     3509    3              END;

      248     3510    2           SUBSTR(DUMP_ATTR.Q.X.VEHICLE#,12,1)='(';

   3510  4 000327   000050 236007                    LDQ     40,DL
         4 000330   000004 552004 1                  STBQ    DUMP_ATTR+4,'04'O

      249     3511    2           SUBSTR(DUMP_ATTR.Q.X.VEHICLE#,15,1)=')';

   3511  4 000331   051000 236007                    LDQ     20992,DL
         4 000332   000005 552010 1                  STBQ    DUMP_ATTR+5,'10'O

      250     3512    2           CALL BINCHAR(SUBSTR(DUMP_ATTR.Q.X.VEHICLE#,13,2),FEP#);

   3512  4 000333   200003 470500                    LDP0    @FEP#,,AUTO
         4 000334   000000 235100                    LDA     0,,PR0
         4 000335   000044 773000                    LRL     36
         4 000336   200410 757100                    STAQ    FIT$+4,,AUTO
         4 000337   000000 301500                    BTD
         4 000340   200410 000010                    NDSC9   FIT$+4,,AUTO             cn=0,s=lsgnf,sf=0,n=8
         4 000341   000005 030002 1                  NDSC9   DUMP_ATTR+5              cn=0,s=nosgn,sf=0,n=2

      251     3513    2           CALL M$FDP (FPT_FDP);

PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:31   
   3513  4 000342   000016 630400 1                  EPPR0   FPT_FDP
         4 000343   030004 713400                    CLIMB   12292
         4 000344   400400 401760                    pmme    nvectors=2

      252     3514    2           NODEKEY.K='0'B;

   3514  4 000345   000000 100400                    MLR     fill='000'O
         4 000346   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         4 000347   000206 200007 1                  ADSC9   NODEKEY                  cn=1,n=7

      253     3515    3           CALL M$READ(RDDUMP) WHENALTRETURN DO;

   3515  4 000350   000154 630400 1                  EPPR0   RDDUMP
         4 000351   440000 713400                    CLIMB   alt,read
         4 000352   401400 401760                    pmme    nvectors=4
         4 000353   000355 702000 4                  TSX2    s:3516
         4 000354   000357 710000 4                  TRA     s:3518

      254     3516    3              ALTRETURN;              /* CLEANUP will close dumpfile if needed */

   3516  4 000355   200406 221300                    LDX1  ! FIT$+2,,AUTO
         4 000356   000000 702211                    TSX2  ! 0,X1

      255     3517    3              END;
      256     3518    2           NODEDIR.N = NODEDIR.N + 1;

   3518  4 000357   000231 235000 1                  LDA     NODEDIR
         4 000360   000001 035007                    ADLA    1,DL
         4 000361   000231 755000 1                  STA     NODEDIR

      257     3519    2           KF_NODEIDX=NODEDIR.N;

   3519  4 000362   000230 755000 1                  STA     KF_NODEIDX

      258     3520    2           CALL BINCHAR(NODEDIR.NODE.NODENAME(KF_NODEIDX),FEP#);

   3520  4 000363   000230 236000 1                  LDQ     KF_NODEIDX
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:32   
         4 000364   000014 402007                    MPY     12,DL
         4 000365   200003 470500                    LDP0    @FEP#,,AUTO
         4 000366   000000 235100                    LDA     0,,PR0
         4 000367   200410 756100                    STQ     FIT$+4,,AUTO
         4 000370   000044 773000                    LRL     36
         4 000371   200412 757100                    STAQ    FIT$+6,,AUTO
         4 000372   200410 235100                    LDA     FIT$+4,,AUTO
         4 000373   000005 301500                    BTD
         4 000374   200412 000010                    NDSC9   FIT$+6,,AUTO             cn=0,s=lsgnf,sf=0,n=8
         4 000375   000232 030010 1                  NDSC9   NODEDIR+1,A              cn=0,s=nosgn,sf=0,n=8

      259     3521    2           NODEDIR.NODE.TYPE(KF_NODEIDX)=%R_FEPNODE#;

   3521  4 000376   000230 236000 1                  LDQ     KF_NODEIDX
         4 000377   000003 402007                    MPY     3,DL
         4 000400   000000 620006                    EAX0    0,QL
         4 000401   000234 236006 1                  LDQ     NODEDIR+3,QL
         4 000402   000032 376000 xsym               ANQ     B_VECTNIL+26
         4 000403   002000 276003                    ORQ     1024,DU
         4 000404   000234 756010 1                  STQ     NODEDIR+3,X0

      260     3522    2           WRDUMP.BUF_=VECTOR(NODEDIR);

   3522  4 000405   000014 237000 5                  LDAQ    12
         4 000406   000176 757000 1                  STAQ    WRDUMP+4

      261     3523    3           CALL M$WRITE(WRDUMP) WHENALTRETURN DO; END;

   3523  4 000407   000172 630400 1                  EPPR0   WRDUMP
         4 000410   440001 713400                    CLIMB   alt,write
         4 000411   401400 401760                    pmme    nvectors=4
         4 000412   000414 702000 4                  TSX2    s:3524
         4 000413   000414 710000 4                  TRA     s:3524

      262     3524    2           RETURN;

   3524  4 000414   200406 221300                    LDX1  ! FIT$+2,,AUTO
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:33   
         4 000415   000001 702211                    TSX2  ! 1,X1

      263     3525
      264     3526    2   END OPENDUMP;
      265     3527
      266     3528        %EJECT;
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:34   
      267     3529    1   CLEANUP: PROC;

   3529  4 000416   200406 741300       CLEANUP      STX1  ! FIT$+2,,AUTO

      268     3530        /**/
      269     3531    2           IF M$DUMPFILE$ -> F$DCB.FCD#

   3531  4 000417   200005 470500                    LDP0    M$DUMPFILE$,,AUTO
         4 000420   000031 236100                    LDQ     25,,PR0
         4 000421   020000 316007                    CANQ    8192,DL
         4 000422   000443 600000 4                  TZE     s:3544

      270     3532    3           THEN DO;

      271     3533    4              IF GOT_ACS THEN DO;

   3533  4 000423   200403 234100                    SZN     GOT_ACS,,AUTO
         4 000424   000432 605000 4                  TPL     s:3538

      272     3534    4                 FPT_CLOSE_DUMP.ACSVEH_ = VECTOR(DUMP_ATTR);

   3534  4 000425   000016 237000 5                  LDAQ    14
         4 000426   000132 757000 1                  STAQ    FPT_CLOSE_DUMP+12

      273     3535    4                 FPT_CLOSE_DUMP.V.OPER.CHGATT# = '1'B;

   3535  4 000427   400000 236007                    LDQ     -131072,DL
         4 000430   000150 256000 1                  ORSQ    FPT_CLOSE_DUMP+26

      274     3536    4                 END;

   3536  4 000431   000436 710000 4                  TRA     s:3541

      275     3537    4              ELSE DO;

      276     3538    4                 FPT_CLOSE_DUMP.ACSVEH_ = VECTOR(NIL);

PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:35   
   3538  4 000432   000020 237000 5                  LDAQ    16
         4 000433   000132 757000 1                  STAQ    FPT_CLOSE_DUMP+12

      277     3539    4                 FPT_CLOSE_DUMP.V.OPER.CHGATT# = '0'B;

   3539  4 000434   000022 236000 5                  LDQ     18
         4 000435   000150 356000 1                  ANSQ    FPT_CLOSE_DUMP+26

      278     3540    4                 END;

      279     3541    4              CALL M$CLOSE (FPT_CLOSE_DUMP) WHENALTRETURN DO; END;

   3541  4 000436   000116 630400 1                  EPPR0   FPT_CLOSE_DUMP
         4 000437   450001 713400                    CLIMB   alt,close
         4 000440   406000 401760                    pmme    nvectors=13
         4 000441   000443 702000 4                  TSX2    s:3544
         4 000442   000443 710000 4                  TRA     s:3544

      280     3542    3              END;

      281     3543        /**/
      282     3544    2           RETURN;

   3544  4 000443   200406 221300                    LDX1  ! FIT$+2,,AUTO
         4 000444   000001 702211                    TSX2  ! 1,X1
      283     3545    2   END CLEANUP;
      284     3546        /**/
      285     3547    1   END KFD$FEDUMP;
      286     3548        %EOD;

PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:36   
--  Include file information  --

   FM$FIT.:E05TOU  is referenced.
   EL$TABLES.:E05TOU  is referenced.
   K_SCODE_C.:E05TOU  is referenced.
   KI_SUBS_C.:E05TOU  is referenced.
   IR_DATA_M.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure KFD$FEDUMP.
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:37   

 **** Variables and constants ****

  ****  Section 001  Data  KFD$FEDUMP

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(207)   r     1 DUMP_ATTR                220-0-0/c STRC(288)   r     1 DUMP_NAME
   116-0-0/d STRC(1080)  r     1 FPT_CLOSE_DUMP            16-0-0/d STRC(216)   r     1 FPT_FDP
    10-0-0/d STRC(216)   r     1 FPT_GDP                   24-0-0/d STRC(2088)  r     1 FPT_OPEN_DUMP
     6-0-0/d VECT        r     1 GDP_                     230-0-0/w SBIN        r     1 KF_NODEIDX
   231-0-0/w STRC(1224)  r     1 NODEDIR                  206-0-0/w STRC(72)    r     1 NODEKEY
   154-0-0/d STRC(504)   r     1 RDDUMP                   216-0-0/d STRC(72)    r     1 RECOVERY_CODE
   210-0-0/d STRC(216)   r     1 WAIT10                   172-0-0/d STRC(432)   r     1 WRDUMP

  ****  Section 003 RoData KFD$FEDUMP

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     6-0-0/c STRC(72)    r     1 DUMP_ACCT                  0-0-0/d STRC(216)   r     1 FPT_SCREECH
    10-0-0/w STRC        r     1 NODUMP_CODE               11-0-0/c STRC(99)    r     1 NODUMP_NAME

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @FEP#                    221-0-0/b BIT         r     1 DUMPMAP(0:4095)
    *0-0-0/w UBIN        r     1 FEP#                     404-0-0/w PTR         r     1 FIT$
   403-0-0/w BIT         r     1 GOT_ACS                   12-0-0/w SBIN        r     1 LOW_PAGE
     4-0-0/w SBIN        r     1 M$DUMPFILE#                5-0-0/w PTR         r     1 M$DUMPFILE$
    10-0-0/w SBIN        r     1 MAP_IDX                   11-0-0/w SBIN        r     1 PAGE
    13-0-0/w STRC(4824)  r     1 RECOVERY_BUFFER            7-0-0/b BIT         r     1 STARTED

  ****  SYMREF variables  ****

PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:38   
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$TCB$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/w STRC(144)   r     1 B$TCB
     0-0-0/c ASTR(27)    r     1 CODE10                     0-0-0/d ASTR(3528)  r     1 F$DCB
     0-0-0N  NULL        r     1 M$DUMPFILE


   Procedure KFD$FEDUMP requires 293 words for executable code.
   Procedure KFD$FEDUMP requires 270 words of local(AUTO) storage.
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:39   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:40   
          MINI XREF LISTING

B$ALT.CODE
      3395**DCL      3395--REDEF    3396--REDEF    3396--REDEF
B$ALT.ERR.CODE
      3397**DCL      3500>>IF       3500>>IF
B$ALT.ERR.ERR#
      3397**DCL      3397--REDEF
B$ALT.EVID
      3396**DCL      3396--REDEF    3396--REDEF
B$TCB.ALT$
      3391**DCL      3500>>IF       3500>>IF
B$TCB$
      2868**DCL      3500>>IF       3500>>IF
BAD_NODE
      3475**LABEL    3414--GOTO
CLEANUP
      3529**PROC     3442--CALL     3485--CALL     3491--CALL
CODE10.ACSVEH.C
      2831**DCL      2831--IMP-SIZ  3507>>ASSIGN
CODE10.ACSVEH.T
      2831**DCL      3507>>ASSIGN
CREATION_TROUBLE
      3475**LABEL    3436--CALLALT
DUMPMAP
      2794**DCL      3428--CALL     3458>>IF       3464>>IF
DUMP_ACCT
      2900**DCL      2982--DCLINIT
DUMP_ATTR
      2807**DCL      3534--ASSIGN
DUMP_ATTR.Q
      2808**DCL      2807--DCLINIT
DUMP_ATTR.Q.X.VEHICLE#
      2825**DCL      3507<<ASSIGN   3510<<ASSIGN   3511<<ASSIGN   3512<<CALLBLT
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:41   
DUMP_NAME
      3310**DCL      2885--DCLINIT  2978--DCLINIT  3437<>CALL     3445<>CALL
F$DCB.ACTPOS
      3366**DCL      3366--REDEF
F$DCB.ARS#
      3340**DCL      3340--REDEF
F$DCB.ATTR
      3359**DCL      3360--REDEF
F$DCB.BORROW
      3374**DCL      3374--REDEF    3374--REDEF    3374--REDEF
F$DCB.DCBNAME.L
      3388**DCL      3388--IMP-SIZ
F$DCB.EOMCHAR#
      3344**DCL      3344--REDEF
F$DCB.FCD#
      3353**DCL      3531>>IF
F$DCB.FLDID
      3369**DCL      3369--REDEF
F$DCB.FORM$
      3363**DCL      3363--REDEF
F$DCB.FSECT
      3379**DCL      3379--REDEF
F$DCB.FSN#
      3356**DCL      3356--REDEF    3356--REDEF    3357--REDEF
F$DCB.HEADER$
      3362**DCL      3362--REDEF
F$DCB.IXTNSIZE#
      3360**DCL      3360--REDEF
F$DCB.LASTSTA$
      3349**DCL      3349--REDEF
F$DCB.LVL
      3375**DCL      3375--REDEF
F$DCB.NAME#.C
      3350**DCL      3350--REDEF
F$DCB.NOEOF
      3372**DCL      3372--REDEF
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:42   
F$DCB.NRECS#
      3361**DCL      3361--REDEF
F$DCB.NRECX
      3380**DCL      3380--REDEF
F$DCB.OHDR
      3372**DCL      3372--REDEF
F$DCB.ORG#
      3355**DCL      3355--REDEF
F$DCB.PRECNO
      3378**DCL      3378--REDEF
F$DCB.RCSZ
      3384**DCL      3384--REDEF
F$DCB.RES#
      3351**DCL      3351--REDEF
F$DCB.SETX
      3363**DCL      3363--REDEF
F$DCB.TAB$
      3363**DCL      3363--REDEF
F$DCB.TDA
      3377**DCL      3378--REDEF
F$DCB.WSN#
      3351**DCL      3351--REDEF
FEP#
        17**DCL         8--PROC     3412>>IF       3412>>IF       3418<>CALL     3422<>CALL     3437<>CALL
      3445<>CALL     3468<>CALL     3477<>CALL     3512>>CALLBLT  3520>>CALLBLT
FEPERR
      3475**LABEL    3468--CALLALT  3477--CALLALT
FIT$
      2828**DCL      3505<<ASSIGN   3506<>CALL     3507>>ASSIGN   3507>>ASSIGN
FPT_CLOSE_DUMP
      3048**DCL      3541<>CALL
FPT_CLOSE_DUMP.ACSVEH_
      3051**DCL      3534<<ASSIGN   3538<<ASSIGN
FPT_CLOSE_DUMP.SN_
      3048**DCL      3048--REDEF
FPT_CLOSE_DUMP.UTL_
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:43   
      3049**DCL      3049--REDEF
FPT_CLOSE_DUMP.V
      3053**DCL      3048--DCLINIT
FPT_CLOSE_DUMP.V.EXPIRE#
      3063**DCL      3063--REDEF
FPT_CLOSE_DUMP.V.OPER.CHGATT#
      3054**DCL      3535<<ASSIGN   3539<<ASSIGN
FPT_CLOSE_DUMP.V.TYPE#
      3061**DCL      3061--REDEF
FPT_CLOSE_DUMP.V.XTNSIZE#
      3058**DCL      3058--REDEF    3060--REDEF
FPT_FDP
      2860**DCL      3513<>CALL
FPT_FDP.V
      2860**DCL      2860--DCLINIT
FPT_GDP
      2846**DCL      3497<>CALL
FPT_GDP.V
      2846**DCL      2846--DCLINIT
FPT_OPEN_DUMP
      2977**DCL      3499<>CALL
FPT_OPEN_DUMP.ACSVEH_
      2979**DCL      2980--REDEF
FPT_OPEN_DUMP.ALTKEYS_
      2985**DCL      2986--REDEF    2986--REDEF
FPT_OPEN_DUMP.FPARAM_
      2982**DCL      3498<<ASSIGN
FPT_OPEN_DUMP.HDR_
      2984**DCL      2985--REDEF
FPT_OPEN_DUMP.TAB_
      2983**DCL      2984--REDEF
FPT_OPEN_DUMP.UHL_
      2977**DCL      2978--REDEF    2978--REDEF
FPT_OPEN_DUMP.V
      2986**DCL      2977--DCLINIT
FPT_OPEN_DUMP.V.FSN#
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:44   
      3017**DCL      3017--REDEF    3017--REDEF
FPT_OPEN_DUMP.WSN_
      2983**DCL      2983--REDEF
FPT_SCREECH
      2884**DCL      3436<>CALL
GDP_
      2834**DCL      2846--DCLINIT  3498>>ASSIGN   3505>>ASSIGN
GOT_ACS
      2827**DCL      3504<<ASSIGN   3508<<ASSIGN   3533>>IF
KFD$DUMPSEG
      2743**DCL-ENT  3468--CALL     3477--CALL
KFD$GETMEM
      2744**DCL-ENT  3418--CALL
KFD$LOGSCREECH
      2745**DCL-ENT  3422--CALL     3437--CALL
KFF$SAVE_DFNAME
      2746**DCL-ENT  3445--CALL
KFS$PACKMSG
      2747**DCL-ENT  3428--CALL
KF_NODEIDX
      3312**DCL      3448>>ASSIGN   3519<<ASSIGN   3520>>CALLBLT  3521>>ASSIGN
LOW_PAGE
      2759**DCL      3462<<ASSIGN   3468<>CALL     3468>>CALL     3477<>CALL     3477>>CALL
M$CLOSE
      1157**DCL-ENT  3541--CALL
M$DUMPFILE
      2866**DCL      3407>>ASSIGN
M$DUMPFILE#
      2753**DCL      3407<<ASSIGN   3408--ASSIGN   3468<>CALL     3477<>CALL
M$DUMPFILE$
      2754**DCL      3408<<ASSIGN   3531>>IF
M$FDP
      1193**DCL-ENT  3513--CALL
M$GDP
      1193**DCL-ENT  3497--CALL
M$OPEN
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:45   
      1157**DCL-ENT  3499--CALL
M$READ
      1158**DCL-ENT  3515--CALL
M$SCREECH
      1171**DCL-ENT  3436--CALL
M$WAIT
      1215**DCL-ENT  3501--CALL
M$WRITE
      1158**DCL-ENT  3449--CALL     3523--CALL
MAP_IDX
      2757**DCL      3456<<DOINDEX  3457>>ASSIGN   3458>>IF       3464>>IF
NODEDIR
      3326**DCL      3090--DCLINIT  3091--DCLINIT  3131--DCLINIT  3132--DCLINIT  3522--ASSIGN
NODEDIR.N
      3326**DCL      3518<<ASSIGN   3518>>ASSIGN   3519>>ASSIGN
NODEDIR.NODE.NODENAME
      3326**DCL      3520<<CALLBLT
NODEDIR.NODE.TYPE
      3327**DCL      3521<<ASSIGN
NODEKEY
      3144**DCL      3088--DCLINIT  3089--DCLINIT  3130--DCLINIT
NODEKEY.K
      3146**DCL      3448<<ASSIGN   3514<<ASSIGN
NODUMP_CODE
      3244**DCL      3422<>CALL
NODUMP_NAME
      3277**DCL      3422<>CALL
OPENDUMP
      3495**PROC     3441--CALL
PAGE
      2758**DCL      3457<<ASSIGN   3462>>ASSIGN   3468>>CALL     3477>>CALL
RDDUMP
      3088**DCL      3515<>CALL
RDDUMP.STATION_
      3091**DCL      3092--REDEF
RDDUMP.V
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:46   
      3092**DCL      3088--DCLINIT
RDDUMP.V.DVBYTE.REREAD#
      3103**DCL      3103--REDEF
RDDUMP.V.INDX#
      3101**DCL      3101--REDEF
RECOVERY_BUFFER
      2774**DCL      3418<>CALL     3418--CALL     3447--ASSIGN
RECOVERY_BUFFER.DUMPMAP
      2779**DCL      3428--CALL
RECOVERY_BUFFER.SCODE.ERRCODE
      2790**DCL      3434<>CALL
RECOVERY_CODE
      3185**DCL      2884--DCLINIT  3434<>CALL     3437<>CALL
RECOVERY_CODE.SEV#
      3212**DCL      3435<<ASSIGN
STARTED
      2756**DCL      3455<<ASSIGN   3458>>IF       3461<<ASSIGN   3464>>IF       3467<<ASSIGN   3475>>IF
TRYOPN IN PROCEDURE OPENDUMP
      3499**LABEL    3502--GOTO
WAIT10
      3159**DCL      3501<>CALL
WAIT10.V
      3160**DCL      3159--DCLINIT
WRDUMP
      3130**DCL      3449<>CALL     3523<>CALL
WRDUMP.BUF_
      3130**DCL      3447<<ASSIGN   3522<<ASSIGN
WRDUMP.STATION_
      3132**DCL      3132--REDEF
WRDUMP.V
      3133**DCL      3130--DCLINIT
WRDUMP.V.DVBYTE.VFC#
      3139**DCL      3139--REDEF
XSF$LOCCODT
      2749**DCL-ENT  3506--CALL
XUR$ERRCNVRT
PL6.E3A0      #001=KFD$FEDUMP File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:47   
      2748**DCL-ENT  3434--CALL

PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:48   
      287        1        /*T***********************************************************/
      288        2        /*T*                                                         */
      289        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      290        4        /*T*                                                         */
      291        5        /*T***********************************************************/
      292        6        KFD$DUMPSEG: PROC(FIRSTPP,NUMPP,DCB#,FEP#) ALTRET;
      293        7        /**/
      294        8        /*  Parameters  */
      295        9        /**/
      296       10    1   DCL FIRSTPP UBIN;
      297       11    1   DCL NUMPP UBIN;
      298       12    1   DCL DCB# UBIN;
      299       13    1   DCL FEP# UBIN;
      300       14        /**/
      301       15        /* Includes */
      302       16        /**/
      303       17        %INCLUDE CP_6;
      304       98        /**/
      305       99        /* Auto */
      306      100        /**/
      307      101    1   DCL DUMPBUFFER(0:1024) UBIN;
      308      102    1   DCL PGS_PER_BUF UBIN;
      309      103    1   DCL PGS UBIN;
      310      104    1   DCL I UBIN;
      311      105    1   DCL PAGE# UBIN;
      312      106    1   DCL LASTPP1 UBIN;                       /* LAST PAGE + 1 */
      313      107        /**/
      314      108        /* Based */
      315      109        /**/
      316      110    1   DCL L6PAGE(0:255) UBIN HALF HALIGNED BASED;
      317      111        /**/
      318      112        /* Static */
      319      113        /**/
      320      114    1   DCL 1 DFKEY STATIC,
      321      115    1         2 L UBIN BYTE CALIGNED INIT(7),
      322      116    1         2 NODE UBIN BYTE CALIGNED INIT(0),
      323      117    1         2 TYPE UBIN BYTE CALIGNED INIT(1),
PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:49   
      324      118    1         2 STYPE UBIN BYTE CALIGNED INIT(0),
      325      119    1         2 USR# UBIN BYTE CALIGNED INIT(0),
      326      120    1         2 PAGE# UBIN(27) CALIGNED INIT(0);
      327      121    1   DCL 1 DUMP_RSLT STATIC DALIGNED,
      328      122    1         2 ERR UBIN,
      329      123    1         2 ARS UBIN;
      330      124    1   DCL KF_NODEIDX SBIN SYMREF;
      331      125        /**/
      332      126        /* FPTs */
      333      127        /**/
      334      128        %FPT_FECTL (FPTN = FEDUMP,RESULTS = DUMP_RSLT);
      335      143        %FPT_WRITE (FPTN = WRTDUMP,KEY = DFKEY);
      336      174        /**/
      337      175        /**/
      338      176        %EJECT;
PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:50   
      339      177        /**/
      340      178    1           FEDUMP.BUF_ = VECTOR(DUMPBUFFER);
      341      179    1           FEDUMP.V.FEP# = FEP#;
      342      180    1           DFKEY.NODE=KF_NODEIDX;
      343      181        /**/
      344      182    1           WRTDUMP.V.DCB# = DCB#;
      345      183        /**/
      346      184    1           PGS_PER_BUF = SIZEC(DUMPBUFFER)/512;
      347      185    1           LASTPP1 = FIRSTPP+NUMPP;
      348      186        /**/
      349      187    1           PAGE# = FIRSTPP;
      350      188    2           DO WHILE(PAGE#<LASTPP1);
      351      189    2              PGS = MINIMUM(PGS_PER_BUF,LASTPP1-PAGE#);
      352      190    2              FEDUMP.BUF_.BOUND = PGS*512+4;
      353      191    2              FEDUMP.V.DMPSTART# = PAGE#*512;
      354      192    3              CALL M$FEDUMP(FEDUMP) WHENALTRETURN DO; ALTRETURN; END;
      355      193    2              PGS = DUMP_RSLT.ARS*4/512;
      356      194    3              DO I = 0 TO PGS-1;
      357      195    3                 WRTDUMP.BUF_ = VECTOR(PINCRC(ADDR(DUMPBUFFER),I*512)->L6PAGE);
      358      196    3                 DFKEY.PAGE# = PAGE#+I;
      359      197    4                 CALL M$WRITE(WRTDUMP) WHENALTRETURN DO; ALTRETURN; END;
      360      198    3                 END;
      361      199    2              PAGE# = PAGE#+PGS;
      362      200    2              END;
      363      201    1   END KFD$DUMPSEG;
      364      202        %EOD;

PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:51   
--  Include file information  --

   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure KFD$DUMPSEG.

   Procedure KFD$DUMPSEG requires 85 words for executable code.
   Procedure KFD$DUMPSEG requires 1040 words of local(AUTO) storage.

PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:52   

 Object Unit name= KFD$DUMPSEG                                File name= KFD$FEDUMP.:E05TOU
 UTS= JUL 30 '97 00:20:48.60 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none    26     32  KFD$DUMPSEG
    2   Proc  even  none    85    125  KFD$DUMPSEG
    3  RoData even  none     2      2  KFD$DUMPSEG

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes    yes     yes      Std        4  KFD$DUMPSEG

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_4
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  KF_NODEIDX                            B_VECTNIL
PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:53   

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:54   


      287        1        /*T***********************************************************/
      288        2        /*T*                                                         */
      289        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      290        4        /*T*                                                         */
      291        5        /*T***********************************************************/
      292        6        KFD$DUMPSEG: PROC(FIRSTPP,NUMPP,DCB#,FEP#) ALTRET;

      6  2 000000   000000 700200 xent  KFD$DUMPSEG  TSX0  ! X66_AUTO_4
         2 000001   002020 000004                    ZERO    1040,4

      293        7        /**/
      294        8        /*  Parameters  */
      295        9        /**/
      296       10    1   DCL FIRSTPP UBIN;
      297       11    1   DCL NUMPP UBIN;
      298       12    1   DCL DCB# UBIN;
      299       13    1   DCL FEP# UBIN;
      300       14        /**/
      301       15        /* Includes */
      302       16        /**/
      303       17        %INCLUDE CP_6;
      304       98        /**/
      305       99        /* Auto */
      306      100        /**/
      307      101    1   DCL DUMPBUFFER(0:1024) UBIN;
      308      102    1   DCL PGS_PER_BUF UBIN;
      309      103    1   DCL PGS UBIN;
      310      104    1   DCL I UBIN;
      311      105    1   DCL PAGE# UBIN;
      312      106    1   DCL LASTPP1 UBIN;                       /* LAST PAGE + 1 */
      313      107        /**/
      314      108        /* Based */
      315      109        /**/
      316      110    1   DCL L6PAGE(0:255) UBIN HALF HALIGNED BASED;
      317      111        /**/
      318      112        /* Static */
PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:55   
      319      113        /**/
      320      114    1   DCL 1 DFKEY STATIC,
      321      115    1         2 L UBIN BYTE CALIGNED INIT(7),
      322      116    1         2 NODE UBIN BYTE CALIGNED INIT(0),
      323      117    1         2 TYPE UBIN BYTE CALIGNED INIT(1),
      324      118    1         2 STYPE UBIN BYTE CALIGNED INIT(0),
      325      119    1         2 USR# UBIN BYTE CALIGNED INIT(0),
      326      120    1         2 PAGE# UBIN(27) CALIGNED INIT(0);
      327      121    1   DCL 1 DUMP_RSLT STATIC DALIGNED,
      328      122    1         2 ERR UBIN,
      329      123    1         2 ARS UBIN;
      330      124    1   DCL KF_NODEIDX SBIN SYMREF;
      331      125        /**/
      332      126        /* FPTs */
      333      127        /**/
      334      128        %FPT_FECTL (FPTN = FEDUMP,RESULTS = DUMP_RSLT);
      335      143        %FPT_WRITE (FPTN = WRTDUMP,KEY = DFKEY);
      336      174        /**/
      337      175        /**/
      338      176        %EJECT;
PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:56   
      339      177        /**/
      340      178    1           FEDUMP.BUF_ = VECTOR(DUMPBUFFER);

    178  2 000002   000000 235000 3                  LDA     0
         2 000003   202016 452500                    STP2    LASTPP1+2,,AUTO
         2 000004   202016 236100                    LDQ     LASTPP1+2,,AUTO
         2 000005   000007 036003                    ADLQ    7,DU
         2 000006   000006 757000 1                  STAQ    FEDUMP+2

      341      179    1           FEDUMP.V.FEP# = FEP#;

    179  2 000007   200006 470500                    LDP0    @FEP#,,AUTO
         2 000010   000000 235100                    LDA     0,,PR0
         2 000011   000013 755000 1                  STA     FEDUMP+7

      342      180    1           DFKEY.NODE=KF_NODEIDX;

    180  2 000012   000000 236000 xsym               LDQ     KF_NODEIDX
         2 000013   000022 736000                    QLS     18
         2 000014   000000 552020 1                  STBQ    DFKEY,'20'O

      343      181        /**/
      344      182    1           WRTDUMP.V.DCB# = DCB#;

    182  2 000015   200005 471500                    LDP1    @DCB#,,AUTO
         2 000016   100000 720100                    LXL0    0,,PR1
         2 000017   000026 740000 1                  STX0    WRTDUMP+8

      345      183        /**/
      346      184    1           PGS_PER_BUF = SIZEC(DUMPBUFFER)/512;

    184  2 000020   000010 236007                    LDQ     8,DL
         2 000021   202010 756100                    STQ     PGS_PER_BUF,,AUTO

      347      185    1           LASTPP1 = FIRSTPP+NUMPP;

    185  2 000022   200003 473500                    LDP3    @FIRSTPP,,AUTO
PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:57   
         2 000023   200004 474500                    LDP4    @NUMPP,,AUTO
         2 000024   300000 236100                    LDQ     0,,PR3
         2 000025   400000 036100                    ADLQ    0,,PR4
         2 000026   202014 756100                    STQ     LASTPP1,,AUTO

      348      186        /**/
      349      187    1           PAGE# = FIRSTPP;

    187  2 000027   300000 235100                    LDA     0,,PR3
         2 000030   202013 755100                    STA     PAGE#,,AUTO

      350      188    2           DO WHILE(PAGE#<LASTPP1);

    188  2 000031   202013 116100                    CMPQ    PAGE#,,AUTO
         2 000032   000124 602000 2                  TNC     s:201
         2 000033   000124 600000 2                  TZE     s:201

      351      189    2              PGS = MINIMUM(PGS_PER_BUF,LASTPP1-PAGE#);

    189  2 000034   202014 236100                    LDQ     LASTPP1,,AUTO
         2 000035   202013 136100                    SBLQ    PAGE#,,AUTO
         2 000036   000043 604000 2                  TMI     s:189+7
         2 000037   202010 116100                    CMPQ    PGS_PER_BUF,,AUTO
         2 000040   000043 602000 2                  TNC     s:189+7
         2 000041   000043 600000 2                  TZE     s:189+7
         2 000042   202010 236100                    LDQ     PGS_PER_BUF,,AUTO
         2 000043   202011 756100                    STQ     PGS,,AUTO

      352      190    2              FEDUMP.BUF_.BOUND = PGS*512+4;

    190  2 000044   000011 736000                    QLS     9
         2 000045   000004 036007                    ADLQ    4,DL
         2 000046   000020 736000                    QLS     16
         2 000047   000006 676000 1                  ERQ     FEDUMP+2
         2 000050   000034 376000 xsym               ANQ     B_VECTNIL+28
         2 000051   000006 656000 1                  ERSQ    FEDUMP+2

PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:58   
      353      191    2              FEDUMP.V.DMPSTART# = PAGE#*512;

    191  2 000052   202013 235100                    LDA     PAGE#,,AUTO
         2 000053   000011 735000                    ALS     9
         2 000054   000012 755000 1                  STA     FEDUMP+6

      354      192    3              CALL M$FEDUMP(FEDUMP) WHENALTRETURN DO; ALTRETURN; END;

    192  2 000055   000004 630400 1                  EPPR0   FEDUMP
         2 000056   560016 713400                    CLIMB   alt,+57358
         2 000057   401000 401760                    pmme    nvectors=3
         2 000060   000062 702000 2                  TSX2    s:192+5
         2 000061   000063 710000 2                  TRA     s:193

    192  2 000062   000000 702200 xent               TSX2  ! X66_AALT

      355      193    2              PGS = DUMP_RSLT.ARS*4/512;

    193  2 000063   000003 236000 1                  LDQ     DUMP_RSLT+1
         2 000064   000002 736000                    QLS     2
         2 000065   000011 772000                    QRL     9
         2 000066   202011 756100                    STQ     PGS,,AUTO

      356      194    3              DO I = 0 TO PGS-1;

    194  2 000067   202012 450100                    STZ     I,,AUTO
         2 000070   000114 710000 2                  TRA     s:198+3

      357      195    3                 WRTDUMP.BUF_ = VECTOR(PINCRC(ADDR(DUMPBUFFER),I*512)->L6PAGE);

    195  2 000071   000001 235000 3                  LDA     1
         2 000072   202016 452500                    STP2    LASTPP1+2,,AUTO
         2 000073   202012 236100                    LDQ     I,,AUTO
         2 000074   000031 736000                    QLS     25
         2 000075   000007 036003                    ADLQ    7,DU
         2 000076   202016 036100                    ADLQ    LASTPP1+2,,AUTO
         2 000077   000022 757000 1                  STAQ    WRTDUMP+4
PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:59   

      358      196    3                 DFKEY.PAGE# = PAGE#+I;

    196  2 000100   202013 236100                    LDQ     PAGE#,,AUTO
         2 000101   202012 036100                    ADLQ    I,,AUTO
         2 000102   000001 552034 1                  STBQ    DFKEY+1,'34'O

      359      197    4                 CALL M$WRITE(WRTDUMP) WHENALTRETURN DO; ALTRETURN; END;

    197  2 000103   000016 630400 1                  EPPR0   WRTDUMP
         2 000104   440001 713400                    CLIMB   alt,write
         2 000105   401400 401760                    pmme    nvectors=4
         2 000106   000110 702000 2                  TSX2    s:197+5
         2 000107   000111 710000 2                  TRA     s:198

    197  2 000110   000000 702200 xent               TSX2  ! X66_AALT

      360      198    3                 END;

    198  2 000111   202012 235100                    LDA     I,,AUTO
         2 000112   000001 035007                    ADLA    1,DL
         2 000113   202012 755100                    STA     I,,AUTO
         2 000114   202012 236100                    LDQ     I,,AUTO
         2 000115   202011 116100                    CMPQ    PGS,,AUTO
         2 000116   000071 602000 2                  TNC     s:195

      361      199    2              PAGE# = PAGE#+PGS;

    199  2 000117   202013 236100                    LDQ     PAGE#,,AUTO
         2 000120   202011 036100                    ADLQ    PGS,,AUTO
         2 000121   202013 756100                    STQ     PAGE#,,AUTO

      362      200    2              END;

    200  2 000122   202014 116100                    CMPQ    LASTPP1,,AUTO
         2 000123   000034 602000 2                  TNC     s:189

PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:60   
      363      201    1   END KFD$DUMPSEG;

    201  2 000124   000000 702200 xent               TSX2  ! X66_ARET
      364      202        %EOD;

PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:61   
--  Include file information  --

   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure KFD$DUMPSEG.
PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:62   

 **** Variables and constants ****

  ****  Section 001  Data  KFD$DUMPSEG

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(72)    r     1 DFKEY                      2-0-0/d STRC(72)    r     1 DUMP_RSLT
     4-0-0/d STRC(360)   r     1 FEDUMP                    16-0-0/d STRC(432)   r     1 WRTDUMP

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     5-0-0/w PTR         r     1 @DCB#                      6-0-0/w PTR         r     1 @FEP#
     3-0-0/w PTR         r     1 @FIRSTPP                   4-0-0/w PTR         r     1 @NUMPP
    *0-0-0/w UBIN        r     1 DCB#
     7-0-0/w UBIN        r     1 DUMPBUFFER(0:1024)
    *0-0-0/w UBIN        r     1 FEP#                      *0-0-0/w UBIN        r     1 FIRSTPP
  2012-0-0/w UBIN        r     1 I                       2014-0-0/w UBIN        r     1 LASTPP1
    *0-0-0/w UBIN        r     1 NUMPP                   2013-0-0/w UBIN        r     1 PAGE#
  2011-0-0/w UBIN        r     1 PGS                     2010-0-0/w UBIN        r     1 PGS_PER_BUF

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r     1 KF_NODEIDX

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/h UBIN(18)    r     1 L6PAGE(0:255)
PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:63   


   Procedure KFD$DUMPSEG requires 85 words for executable code.
   Procedure KFD$DUMPSEG requires 1040 words of local(AUTO) storage.
PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:64   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:65   
          MINI XREF LISTING

DCB#
        12**DCL         6--PROC      182>>ASSIGN
DFKEY
       114**DCL       160--DCLINIT
DFKEY.NODE
       116**DCL       180<<ASSIGN
DFKEY.PAGE#
       120**DCL       196<<ASSIGN
DUMPBUFFER
       101**DCL       178--ASSIGN    184--ASSIGN    195--ASSIGN
DUMP_RSLT
       121**DCL       138--DCLINIT
DUMP_RSLT.ARS
       123**DCL       193>>ASSIGN
FEDUMP
       137**DCL       192<>CALL
FEDUMP.BUF_
       137**DCL       178<<ASSIGN
FEDUMP.BUF_.BOUND
       137**DCL       190<<ASSIGN
FEDUMP.V
       138**DCL       137--DCLINIT
FEDUMP.V.DMPSTART#
       138**DCL       139--REDEF     191<<ASSIGN
FEDUMP.V.FEP#
       139**DCL       179<<ASSIGN
FEP#
        13**DCL         6--PROC      179>>ASSIGN
FIRSTPP
        10**DCL         6--PROC      185>>ASSIGN    187>>ASSIGN
I
       104**DCL       194<<DOINDEX   195>>ASSIGN    196>>ASSIGN
PL6.E3A0      #002=KFD$DUMPSEG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:20 Page:66   
KF_NODEIDX
       124**DCL       180>>ASSIGN
L6PAGE
       110**DCL       195--ASSIGN
LASTPP1
       106**DCL       185<<ASSIGN    188>>DOWHILE   189>>ASSIGN
M$FEDUMP
        54**DCL-ENT   192--CALL
M$WRITE
        27**DCL-ENT   197--CALL
NUMPP
        11**DCL         6--PROC      185>>ASSIGN
PAGE#
       105**DCL       187<<ASSIGN    188>>DOWHILE   189>>ASSIGN    191>>ASSIGN    196>>ASSIGN    199<<ASSIGN
       199>>ASSIGN
PGS
       103**DCL       189<<ASSIGN    190>>ASSIGN    193<<ASSIGN    194>>DOINDEX   199>>ASSIGN
PGS_PER_BUF
       102**DCL       184<<ASSIGN    189>>ASSIGN
WRTDUMP
       160**DCL       197<>CALL
WRTDUMP.BUF_
       160**DCL       195<<ASSIGN
WRTDUMP.STATION_
       162**DCL       162--REDEF
WRTDUMP.V
       163**DCL       160--DCLINIT
WRTDUMP.V.DCB#
       163**DCL       182<<ASSIGN
WRTDUMP.V.DVBYTE.VFC#
       169**DCL       169--REDEF

PL6.E3A0      #003=KFD$GETMEM File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:67   
      365        1        /*T***********************************************************/
      366        2        /*T*                                                         */
      367        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      368        4        /*T*                                                         */
      369        5        /*T***********************************************************/
      370        6        KFD$GETMEM: PROC(BUFFER,L6_WORD_LOC,L6_WORDS_LEN,FEP#) ALTRET;
      371        7        /*D* NAME: KFD$GETMEM
      372        8             CALL: CALL KFD$GETMEM (BUFFER,L6_WORD_LOC,
      373        9                                    L6_WORDS_LEN,FEP#) ALTRET(ERR_LOC);
      374       10             DESCRIPTION:  This routine is used in the course of dumping
      375       11                           a local FEP.  It is used to slurp SMALL
      376       12                           chunks of memory out of random locations.
      377       13        */
      378       14        /**/
      379       15        /*  Parameters  */
      380       16        /**/
      381       17    1   DCL BUFFER CHAR(BUFF_CSIZE);
      382       18    1   DCL L6_WORD_LOC SBIN;
      383       19    1   DCL L6_WORDS_LEN SBIN;
      384       20    1   DCL FEP# UBIN;
      385       21        /**/
      386       22        /* Includes */
      387       23        /**/
      388       24        %INCLUDE CP_6;
      389      105        /**/
      390      106        /* Auto */
      391      107        /**/
      392      108    1   DCL BUFF_CSIZE SBIN;
      393      109    1   DCL DUMPBUFFER CHAR(1024);
      394      110    1   DCL DUMP_BASE_BYTE SBIN;
      395      111    1   DCL DUMP_OFFSET_BYTES SBIN;
      396      112    1   DCL L6_BYTE_LOC SBIN;
      397      113        /**/
      398      114        /*  Static  */
      399      115        /**/
      400      116    1   DCL 1 DUMP_RSLT STATIC DALIGNED,
      401      117    1         2 ERR UBIN,
PL6.E3A0      #003=KFD$GETMEM File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:68   
      402      118    1         2 ARS UBIN;
      403      119        /**/
      404      120        /* FPTs */
      405      121        /**/
      406      122        %FPT_FECTL (FPTN = FEDUMP,RESULTS = DUMP_RSLT);
      407      137        /**/
      408      138        %EJECT;
PL6.E3A0      #003=KFD$GETMEM File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:69   
      409      139        /**/
      410      140        /*  Reconcile parameters.  */
      411      141        /**/
      412      142    1           BUFF_CSIZE = L6_WORDS_LEN * 2;
      413      143    1           L6_BYTE_LOC = L6_WORD_LOC * 2;
      414      144        /**/
      415      145        /*  M$FEDUMP PMME only starts on PAGE boundary.  */
      416      146        /**/
      417      147    1           DUMP_BASE_BYTE = L6_BYTE_LOC / 512;
      418      148    1           DUMP_BASE_BYTE = DUMP_BASE_BYTE * 512;
      419      149    1           DUMP_OFFSET_BYTES = L6_BYTE_LOC - DUMP_BASE_BYTE;
      420      150        /**/
      421      151        /*  We will dump into a buffer, starting on a page boundary in the FEP.       */
      422      152        /*  The buffer must be large enough to hold:                                  */
      423      153        /*      o the data we want                                                    */
      424      154        /*      o the extra date necessary to start on a page boundary                */
      425      155        /*      o some pad bytes since the PMME trashes the last 2 L6 words           */
      426      156        /**/
      427      157    1           FEDUMP.BUF_ = VECTOR(DUMPBUFFER);
      428      158    1           FEDUMP.BUF_.BOUND = BUFF_CSIZE + DUMP_OFFSET_BYTES + 4;
      429      159        /**/
      430      160    1           FEDUMP.V.DMPSTART# = DUMP_BASE_BYTE;
      431      161    1           FEDUMP.V.FEP# = FEP#;
      432      162        /**/
      433      163    1           CALL M$FEDUMP(FEDUMP) ALTRET(RIVER_CITY);
      434      164    1           BUFFER = SUBSTR(DUMPBUFFER,DUMP_OFFSET_BYTES);
      435      165        /**/
      436      166    1           RETURN;
      437      167        /**/
      438      168    1   RIVER_CITY: ;                           /* Trouble                            */
      439      169    1           ALTRETURN;
      440      170        /**/
      441      171    1   END KFD$GETMEM;
      442      172        %EOD;

PL6.E3A0      #003=KFD$GETMEM File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:70   
--  Include file information  --

   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure KFD$GETMEM.

   Procedure KFD$GETMEM requires 51 words for executable code.
   Procedure KFD$GETMEM requires 270 words of local(AUTO) storage.

PL6.E3A0      #003=KFD$GETMEM File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:71   

 Object Unit name= KFD$GETMEM                                 File name= KFD$FEDUMP.:E05TOU
 UTS= JUL 30 '97 00:20:55.16 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none    12     14  KFD$GETMEM
    2   Proc  even  none    51     63  KFD$GETMEM
    3  RoData even  none     1      1  KFD$GETMEM

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes    yes     yes      Std        4  KFD$GETMEM

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_4
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  B_VECTNIL
PL6.E3A0      #003=KFD$GETMEM File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:72   

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #003=KFD$GETMEM File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:73   


      365        1        /*T***********************************************************/
      366        2        /*T*                                                         */
      367        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      368        4        /*T*                                                         */
      369        5        /*T***********************************************************/
      370        6        KFD$GETMEM: PROC(BUFFER,L6_WORD_LOC,L6_WORDS_LEN,FEP#) ALTRET;

      6  2 000000   000000 700200 xent  KFD$GETMEM   TSX0  ! X66_AUTO_4
         2 000001   000416 000004                    ZERO    270,4

      371        7        /*D* NAME: KFD$GETMEM
      372        8             CALL: CALL KFD$GETMEM (BUFFER,L6_WORD_LOC,
      373        9                                    L6_WORDS_LEN,FEP#) ALTRET(ERR_LOC);
      374       10             DESCRIPTION:  This routine is used in the course of dumping
      375       11                           a local FEP.  It is used to slurp SMALL
      376       12                           chunks of memory out of random locations.
      377       13        */
      378       14        /**/
      379       15        /*  Parameters  */
      380       16        /**/
      381       17    1   DCL BUFFER CHAR(BUFF_CSIZE);
      382       18    1   DCL L6_WORD_LOC SBIN;
      383       19    1   DCL L6_WORDS_LEN SBIN;
      384       20    1   DCL FEP# UBIN;
      385       21        /**/
      386       22        /* Includes */
      387       23        /**/
      388       24        %INCLUDE CP_6;
      389      105        /**/
      390      106        /* Auto */
      391      107        /**/
      392      108    1   DCL BUFF_CSIZE SBIN;
      393      109    1   DCL DUMPBUFFER CHAR(1024);
      394      110    1   DCL DUMP_BASE_BYTE SBIN;
      395      111    1   DCL DUMP_OFFSET_BYTES SBIN;
      396      112    1   DCL L6_BYTE_LOC SBIN;
PL6.E3A0      #003=KFD$GETMEM File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:74   
      397      113        /**/
      398      114        /*  Static  */
      399      115        /**/
      400      116    1   DCL 1 DUMP_RSLT STATIC DALIGNED,
      401      117    1         2 ERR UBIN,
      402      118    1         2 ARS UBIN;
      403      119        /**/
      404      120        /* FPTs */
      405      121        /**/
      406      122        %FPT_FECTL (FPTN = FEDUMP,RESULTS = DUMP_RSLT);
      407      137        /**/
      408      138        %EJECT;
PL6.E3A0      #003=KFD$GETMEM File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:75   
      409      139        /**/
      410      140        /*  Reconcile parameters.  */
      411      141        /**/
      412      142    1           BUFF_CSIZE = L6_WORDS_LEN * 2;

    142  2 000002   200005 470500                    LDP0    @L6_WORDS_LEN,,AUTO
         2 000003   000000 235100                    LDA     0,,PR0
         2 000004   000001 735000                    ALS     1
         2 000005   200007 755100                    STA     BUFF_CSIZE,,AUTO

      413      143    1           L6_BYTE_LOC = L6_WORD_LOC * 2;

    143  2 000006   200004 471500                    LDP1    @L6_WORD_LOC,,AUTO
         2 000007   100000 235100                    LDA     0,,PR1
         2 000010   000001 735000                    ALS     1
         2 000011   200412 755100                    STA     L6_BYTE_LOC,,AUTO

      414      144        /**/
      415      145        /*  M$FEDUMP PMME only starts on PAGE boundary.  */
      416      146        /**/
      417      147    1           DUMP_BASE_BYTE = L6_BYTE_LOC / 512;

    147  2 000012   200412 236100                    LDQ     L6_BYTE_LOC,,AUTO
         2 000013   001000 506007                    DIV     512,DL
         2 000014   200410 756100                    STQ     DUMP_BASE_BYTE,,AUTO

      418      148    1           DUMP_BASE_BYTE = DUMP_BASE_BYTE * 512;

    148  2 000015   200410 235100                    LDA     DUMP_BASE_BYTE,,AUTO
         2 000016   000011 735000                    ALS     9
         2 000017   200410 755100                    STA     DUMP_BASE_BYTE,,AUTO

      419      149    1           DUMP_OFFSET_BYTES = L6_BYTE_LOC - DUMP_BASE_BYTE;

    149  2 000020   200412 236100                    LDQ     L6_BYTE_LOC,,AUTO
         2 000021   200410 136100                    SBLQ    DUMP_BASE_BYTE,,AUTO
         2 000022   200411 756100                    STQ     DUMP_OFFSET_BYTES,,AUTO
PL6.E3A0      #003=KFD$GETMEM File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:76   

      420      150        /**/
      421      151        /*  We will dump into a buffer, starting on a page boundary in the FEP.       */
      422      152        /*  The buffer must be large enough to hold:                                  */
      423      153        /*      o the data we want                                                    */
      424      154        /*      o the extra date necessary to start on a page boundary                */
      425      155        /*      o some pad bytes since the PMME trashes the last 2 L6 words           */
      426      156        /**/
      427      157    1           FEDUMP.BUF_ = VECTOR(DUMPBUFFER);

    157  2 000023   000000 235000 3                  LDA     0
         2 000024   200414 452500                    STP2    L6_BYTE_LOC+2,,AUTO
         2 000025   200414 236100                    LDQ     L6_BYTE_LOC+2,,AUTO
         2 000026   000010 036003                    ADLQ    8,DU
         2 000027   000004 757000 1                  STAQ    FEDUMP+2

      428      158    1           FEDUMP.BUF_.BOUND = BUFF_CSIZE + DUMP_OFFSET_BYTES + 4;

    158  2 000030   200007 236100                    LDQ     BUFF_CSIZE,,AUTO
         2 000031   200411 036100                    ADLQ    DUMP_OFFSET_BYTES,,AUTO
         2 000032   000004 036007                    ADLQ    4,DL
         2 000033   000020 736000                    QLS     16
         2 000034   000004 676000 1                  ERQ     FEDUMP+2
         2 000035   000034 376000 xsym               ANQ     B_VECTNIL+28
         2 000036   000004 656000 1                  ERSQ    FEDUMP+2

      429      159        /**/
      430      160    1           FEDUMP.V.DMPSTART# = DUMP_BASE_BYTE;

    160  2 000037   200410 235100                    LDA     DUMP_BASE_BYTE,,AUTO
         2 000040   000010 755000 1                  STA     FEDUMP+6

      431      161    1           FEDUMP.V.FEP# = FEP#;

    161  2 000041   200006 473500                    LDP3    @FEP#,,AUTO
         2 000042   300000 235100                    LDA     0,,PR3
         2 000043   000011 755000 1                  STA     FEDUMP+7
PL6.E3A0      #003=KFD$GETMEM File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:77   

      432      162        /**/
      433      163    1           CALL M$FEDUMP(FEDUMP) ALTRET(RIVER_CITY);

    163  2 000044   000002 630400 1                  EPPR0   FEDUMP
         2 000045   560016 713400                    CLIMB   alt,+57358
         2 000046   401000 401760                    pmme    nvectors=3
         2 000047   000062 702000 2                  TSX2    RIVER_CITY

      434      164    1           BUFFER = SUBSTR(DUMPBUFFER,DUMP_OFFSET_BYTES);

    164  2 000050   200411 720100                    LXL0    DUMP_OFFSET_BYTES,,AUTO
         2 000051   775777 620010                    EAX0    -1025,X0
         2 000052   777777 660003                    ERX0    -1,DU
         2 000053   200411 235100                    LDA     DUMP_OFFSET_BYTES,,AUTO
         2 000054   200003 470500                    LDP0    @BUFFER,,AUTO
         2 000055   200007 721100                    LXL1    BUFF_CSIZE,,AUTO
         2 000056   040140 100545                    MLR     fill='040'O
         2 000057   200010 000010                    ADSC9   DUMPBUFFER,A,AUTO        cn=0,n=*X0
         2 000060   000000 000011                    ADSC9   0,,PR0                   cn=0,n=*X1

      435      165        /**/
      436      166    1           RETURN;

    166  2 000061   000000 702200 xent               TSX2  ! X66_ARET

    164  2 000062                       RIVER_CITY   null
      437      167        /**/
      438      168    1   RIVER_CITY: ;                           /* Trouble                            */
      439      169    1           ALTRETURN;

    169  2 000062   000000 702200 xent               TSX2  ! X66_AALT
      440      170        /**/
      441      171    1   END KFD$GETMEM;
      442      172        %EOD;

PL6.E3A0      #003=KFD$GETMEM File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:78   
--  Include file information  --

   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure KFD$GETMEM.
PL6.E3A0      #003=KFD$GETMEM File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:79   

 **** Variables and constants ****

  ****  Section 001  Data  KFD$GETMEM

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(72)    r     1 DUMP_RSLT                  2-0-0/d STRC(360)   r     1 FEDUMP

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @BUFFER                    6-0-0/w PTR         r     1 @FEP#
     5-0-0/w PTR         r     1 @L6_WORDS_LEN              4-0-0/w PTR         r     1 @L6_WORD_LOC
    *0-0-0/c ACHR        r     1 BUFFER                     7-0-0/w SBIN        r     1 BUFF_CSIZE
    10-0-0/c CHAR(1024)  r     1 DUMPBUFFER               410-0-0/w SBIN        r     1 DUMP_BASE_BYTE
   411-0-0/w SBIN        r     1 DUMP_OFFSET_BYTES         *0-0-0/w UBIN        r     1 FEP#
   412-0-0/w SBIN        r     1 L6_BYTE_LOC               *0-0-0/w SBIN        r     1 L6_WORDS_LEN
    *0-0-0/w SBIN        r     1 L6_WORD_LOC


   Procedure KFD$GETMEM requires 51 words for executable code.
   Procedure KFD$GETMEM requires 270 words of local(AUTO) storage.
PL6.E3A0      #003=KFD$GETMEM File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:80   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=KFD$GETMEM File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:81   
          MINI XREF LISTING

BUFFER
        17**DCL         6--PROC      164<<ASSIGN
BUFF_CSIZE
       108**DCL        17--IMP-SIZ   142<<ASSIGN    158>>ASSIGN    164>>ASSIGN
DUMPBUFFER
       109**DCL       157--ASSIGN    164>>ASSIGN
DUMP_BASE_BYTE
       110**DCL       147<<ASSIGN    148<<ASSIGN    148>>ASSIGN    149>>ASSIGN    160>>ASSIGN
DUMP_OFFSET_BYTES
       111**DCL       149<<ASSIGN    158>>ASSIGN    164>>ASSIGN
DUMP_RSLT
       116**DCL       132--DCLINIT
FEDUMP
       131**DCL       163<>CALL
FEDUMP.BUF_
       131**DCL       157<<ASSIGN
FEDUMP.BUF_.BOUND
       131**DCL       158<<ASSIGN
FEDUMP.V
       132**DCL       131--DCLINIT
FEDUMP.V.DMPSTART#
       132**DCL       133--REDEF     160<<ASSIGN
FEDUMP.V.FEP#
       133**DCL       161<<ASSIGN
FEP#
        20**DCL         6--PROC      161>>ASSIGN
L6_BYTE_LOC
       112**DCL       143<<ASSIGN    147>>ASSIGN    149>>ASSIGN
L6_WORDS_LEN
        19**DCL         6--PROC      142>>ASSIGN
L6_WORD_LOC
        18**DCL         6--PROC      143>>ASSIGN
PL6.E3A0      #003=KFD$GETMEM File=KFD$FEDUMP.:E05TSI                            WED 07/30/97 00:20 Page:82   
M$FEDUMP
        61**DCL-ENT   163--CALL
RIVER_CITY
       164**LABEL     163--CALLALT

PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:83   
      443        1        /*T***********************************************************/
      444        2        /*T*                                                         */
      445        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      446        4        /*T*                                                         */
      447        5        /*T***********************************************************/
      448        6        KFD$MLCPDUMP: PROC(FEP#,DATASEG,DFNAME);
      449        7        /**/
      450        8        /*D*    NAME:  KFD$MLCPDUMP
      451        9                PURPOSE:  Writes the dump of MLCP RAM to a dump file.
      452       10                DESCRIPTION:
      453       11                The MLCP data is returned from the front end boot operation
      454       12                into the data segment that contained the boot image.  The
      455       13                DATASEG parameter to KFD$MLCPDUMP is a vector frameing that
      456       14                data segment.  The data segment that contains a header with
      457       15                a tag indicating the MLCP dump has been taken and the size
      458       16                of the dump information in bytes.  The header is followed
      459       17                by the dump information for each channel.  The dump
      460       18                information is variable length, consisting of the channel
      461       19                number, size of dump in bytes and the dumped data.
      462       20        */
      463       21        /**/
      464       22    1   DCL FEP# UBIN;
      465       23    1   DCL DATASEG VECTOR;
      466       24    1   DCL 1 DFNAME CALIGNED,
      467       25    1         2 L UBIN BYTE CALIGNED,
      468       26    1         2 C CHAR(DFNAME.L);
      469       27        /**/
      470       28    1   DCL KFS$PACKMSG ENTRY(3);
      471       29        /**/
      472       30        %INCLUDE GI_DATA_M;
      473       58        %INCLUDE CP_6;
      474      139        %INCLUDE B_ERRORS_C;
      475     1266        %INCLUDE IR_DATA_M;
      476     1430        /**/
      477     1431    1   DCL DATA$ PTR;
      478     1432    1   DCL DATASIZE SBIN;
      479     1433    1   DCL DSZ UBIN(32);
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:84   
      480     1434    1   DCL CHANNEL UBIN(32);
      481     1435        /**/
      482     1436        %GI$MLCPDMP_HDR (FPTN=GI$MLCPDMP_HDR,STCLASS="BASED(DATA$)");
      483     1439        %GI$MLCPDMP (FPTN=GI$MLCPDMP,STCLASS="BASED(DATA$)",DSIZE=DSZ);
      484     1442        /**/
      485     1443        %RV_DFKEY (NAME=DFKEY);
      486     1461        %RV_DFSUBS;
      487     1488        /**/
      488     1489    1   DCL M$DUMPFILE DCB;
      489     1490    1   DCL KF_NODEIDX UBIN SYMREF;
      490     1491        /**/
      491     1492        %FPT_OPEN (DCB=M$DUMPFILE,ASN=FILE,FUN=UPDATE,
      492     1493                   ACCT=SYSTAC_ACCT,TYPE='  ');
      493     1602        %VLP_ACCT (FPTN=SYSTAC_ACCT,ACCT=':SYSTAC');
      494     1615        %FPT_CLOSE (DISP=SAVE,DCB=M$DUMPFILE,RELG=YES,STCLASS=CONSTANT);
      495     1657        %FPT_WAIT (FPTN=WAIT10,UNITS=10);
      496     1671        %FPT_WRITE (DCB=M$DUMPFILE,KEY=DFKEY);
      497     1702        /**/
      498     1703        %B$TCB;
      499     1706        %B$ALT;
      500     1714    1   DCL B$TCB$ PTR SYMREF;
      501     1715        %SUB B$ALT=B$TCB$->B$TCB.ALT$->B$ALT;
      502     1716        /**/
      503     1717        %EJECT;
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:85   
      504     1718        /**/
      505     1719    1           IF DATASEG=VECTOR(NIL) THEN RETURN;
      506     1720    1           DATA$=PINCRW(VBASE(DATASEG),1);
      507     1721    1           IF GI$MLCPDMP_HDR.MLCP~='MLCP' THEN RETURN;
      508     1722    1           CALL KFS$PACKMSG(ADDR(GI$MLCPDMP_HDR.SIZE),ADDR(DSZ),4);
      509     1723    1           DATASIZE=DSZ-SIZEC(GI$MLCPDMP_HDR);
      510     1724    1           DATA$=PINCRC(DATA$,SIZEC(GI$MLCPDMP_HDR));
      511     1725        /**/
      512     1726    1           FPT_OPEN.NAME_=VECTOR(DFNAME);
      513     1727    2           CALL M$OPEN(FPT_OPEN) WHENALTRETURN DO;
      514     1728    3              IF B$ALT.ERR.CODE~=%E$FILEBUSY THEN DO;
      515     1729    3                 CALL PMMEERR;
      516     1730    3                 RETURN;
      517     1731    3                 END;
      518     1732    3              ELSE DO;
      519     1733    3                 CALL M$SENV;
      520     1734    3                 CALL M$WAIT(WAIT10);
      521     1735    3                 CALL M$RETRYS;
      522     1736    3                 END;
      523     1737    2              END;
      524     1738    1           DFKEY='007'O;
      525     1739    1           DFKEY.K.NODEIDX=KF_NODEIDX;
      526     1740    1           DFKEY.K.TYP=%R_MLCP#;
      527     1741        /**/
      528     1742    2           DO WHILE(DATASIZE>0);
      529     1743    2              CALL KFS$PACKMSG(ADDR(GI$MLCPDMP.CHAN),ADDR(CHANNEL),4);
      530     1744    2              CALL KFS$PACKMSG(ADDR(GI$MLCPDMP.SIZE),ADDR(DSZ),4);
      531     1745    2              DFKEY.K.VP#=CHANNEL;
      532     1746    2              FPT_WRITE.BUF_=VECTOR(GI$MLCPDMP.DATA);
      533     1747    3              CALL M$WRITE(FPT_WRITE) WHENALTRETURN DO;
      534     1748    3                 CALL PMMEERR;
      535     1749    3                 DATASIZE=0;
      536     1750    3                 END;
      537     1751    2              DATA$=PINCRC(DATA$,SIZEC(GI$MLCPDMP));
      538     1752    2              DATASIZE=DATASIZE-SIZEC(GI$MLCPDMP);
      539     1753    2              END;
      540     1754    2           CALL M$CLOSE(FPT_CLOSE) WHENALTRETURN DO; END;
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:86   
      541     1755    1           RETURN;
      542     1756        /**/
      543     1757    1   PMMEERR: PROC;
      544     1758        /**/
      545     1759    2           RETURN;
      546     1760        /**/
      547     1761    2   END PMMEERR;
      548     1762        /**/
      549     1763    1   END KFD$MLCPDUMP;
      550     1764        %EOD;

PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:87   
--  Include file information  --

   IR_DATA_M.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   GI_DATA_M.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure KFD$MLCPDUMP.

   Procedure KFD$MLCPDUMP requires 148 words for executable code.
   Procedure KFD$MLCPDUMP requires 18 words of local(AUTO) storage.

PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:88   

 Object Unit name= KFD$MLCPDUMP                               File name= KFD$FEDUMP.:E05TOU
 UTS= JUL 30 '97 00:20:59.96 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none    80    120  KFD$MLCPDUMP
    2   DCB   even  none     0      0  M$DUMPFILE
    3  RoData even  UTS     31     37  KFD$MLCPDUMP
    4   Proc  even  none   148    224  KFD$MLCPDUMP
    5  RoData even  none     3      3  KFD$MLCPDUMP

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     4      0   yes            yes      Std        3  KFD$MLCPDUMP

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       3 KFS$PACKMSG
                       nStd      0 X66_AUTO_3
                       nStd      0 X66_ARET
                       Std       0 B_CONSPOOL_D
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:89   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  M$DUMPFILE                            KF_NODEIDX
     B$TCB$                                B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:90   


      443        1        /*T***********************************************************/
      444        2        /*T*                                                         */
      445        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      446        4        /*T*                                                         */
      447        5        /*T***********************************************************/
      448        6        KFD$MLCPDUMP: PROC(FEP#,DATASEG,DFNAME);

      6  4 000000   000000 700200 xent  KFD$MLCPDUMP TSX0  ! X66_AUTO_3
         4 000001   000022 000003                    ZERO    18,3

      449        7        /**/
      450        8        /*D*    NAME:  KFD$MLCPDUMP
      451        9                PURPOSE:  Writes the dump of MLCP RAM to a dump file.
      452       10                DESCRIPTION:
      453       11                The MLCP data is returned from the front end boot operation
      454       12                into the data segment that contained the boot image.  The
      455       13                DATASEG parameter to KFD$MLCPDUMP is a vector frameing that
      456       14                data segment.  The data segment that contains a header with
      457       15                a tag indicating the MLCP dump has been taken and the size
      458       16                of the dump information in bytes.  The header is followed
      459       17                by the dump information for each channel.  The dump
      460       18                information is variable length, consisting of the channel
      461       19                number, size of dump in bytes and the dumped data.
      462       20        */
      463       21        /**/
      464       22    1   DCL FEP# UBIN;
      465       23    1   DCL DATASEG VECTOR;
      466       24    1   DCL 1 DFNAME CALIGNED,
      467       25    1         2 L UBIN BYTE CALIGNED,
      468       26    1         2 C CHAR(DFNAME.L);
      469       27        /**/
      470       28    1   DCL KFS$PACKMSG ENTRY(3);
      471       29        /**/
      472       30        %INCLUDE GI_DATA_M;
      473       58        %INCLUDE CP_6;
      474      139        %INCLUDE B_ERRORS_C;
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:91   
      475     1266        %INCLUDE IR_DATA_M;
      476     1430        /**/
      477     1431    1   DCL DATA$ PTR;
      478     1432    1   DCL DATASIZE SBIN;
      479     1433    1   DCL DSZ UBIN(32);
      480     1434    1   DCL CHANNEL UBIN(32);
      481     1435        /**/
      482     1436        %GI$MLCPDMP_HDR (FPTN=GI$MLCPDMP_HDR,STCLASS="BASED(DATA$)");
      483     1439        %GI$MLCPDMP (FPTN=GI$MLCPDMP,STCLASS="BASED(DATA$)",DSIZE=DSZ);
      484     1442        /**/
      485     1443        %RV_DFKEY (NAME=DFKEY);
      486     1461        %RV_DFSUBS;
      487     1488        /**/
      488     1489    1   DCL M$DUMPFILE DCB;
      489     1490    1   DCL KF_NODEIDX UBIN SYMREF;
      490     1491        /**/
      491     1492        %FPT_OPEN (DCB=M$DUMPFILE,ASN=FILE,FUN=UPDATE,
      492     1493                   ACCT=SYSTAC_ACCT,TYPE='  ');
      493     1602        %VLP_ACCT (FPTN=SYSTAC_ACCT,ACCT=':SYSTAC');
      494     1615        %FPT_CLOSE (DISP=SAVE,DCB=M$DUMPFILE,RELG=YES,STCLASS=CONSTANT);
      495     1657        %FPT_WAIT (FPTN=WAIT10,UNITS=10);
      496     1671        %FPT_WRITE (DCB=M$DUMPFILE,KEY=DFKEY);
      497     1702        /**/
      498     1703        %B$TCB;
      499     1706        %B$ALT;
      500     1714    1   DCL B$TCB$ PTR SYMREF;
      501     1715        %SUB B$ALT=B$TCB$->B$TCB.ALT$->B$ALT;
      502     1716        /**/
      503     1717        %EJECT;
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:92   
      504     1718        /**/
      505     1719    1           IF DATASEG=VECTOR(NIL) THEN RETURN;

   1719  4 000002   200004 470500                    LDP0    @DATASEG,,AUTO
         4 000003   000000 237100                    LDAQ    0,,PR0
         4 000004   000000 117000 5                  CMPAQ   0
         4 000005   000007 601000 4                  TNZ     s:1720

   1719  4 000006   000000 702200 xent               TSX2  ! X66_ARET

      506     1720    1           DATA$=PINCRW(VBASE(DATASEG),1);

   1720  4 000007   000001 236100                    LDQ     1,,PR0
         4 000010   000001 036003                    ADLQ    1,DU
         4 000011   200006 756100                    STQ     DATA$,,AUTO

      507     1721    1           IF GI$MLCPDMP_HDR.MLCP~='MLCP' THEN RETURN;

   1721  4 000012   200006 471500                    LDP1    DATA$,,AUTO
         4 000013   040000 106500                    CMPC    fill='040'O
         4 000014   100000 000004                    ADSC9   0,,PR1                   cn=0,n=4
         4 000015   000036 000004 3                  ADSC9   FPT_CLOSE+30             cn=0,n=4
         4 000016   000020 600000 4                  TZE     s:1722

   1721  4 000017   000000 702200 xent               TSX2  ! X66_ARET

      508     1722    1           CALL KFS$PACKMSG(ADDR(GI$MLCPDMP_HDR.SIZE),ADDR(DSZ),4);

   1722  4 000020   000001 036003                    ADLQ    1,DU
         4 000021   200014 756100                    STQ     CHANNEL+3,,AUTO
         4 000022   200010 633500                    EPPR3   DSZ,,AUTO
         4 000023   200015 453500                    STP3    CHANNEL+4,,AUTO
         4 000024   000002 236000 5                  LDQ     2
         4 000025   200020 756100                    STQ     CHANNEL+7,,AUTO
         4 000026   200015 634500                    EPPR4   CHANNEL+4,,AUTO
         4 000027   200017 454500                    STP4    CHANNEL+6,,AUTO
         4 000030   200014 635500                    EPPR5   CHANNEL+3,,AUTO
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:93   
         4 000031   200016 455500                    STP5    CHANNEL+5,,AUTO
         4 000032   200016 630500                    EPPR0   CHANNEL+5,,AUTO
         4 000033   000021 631400 xsym               EPPR1   B_VECTNIL+17
         4 000034   000000 701000 xent               TSX1    KFS$PACKMSG
         4 000035   000000 011000                    NOP     0

      509     1723    1           DATASIZE=DSZ-SIZEC(GI$MLCPDMP_HDR);

   1723  4 000036   200010 236100                    LDQ     DSZ,,AUTO
         4 000037   000004 772000                    QRL     4
         4 000040   000010 136007                    SBLQ    8,DL
         4 000041   200007 756100                    STQ     DATASIZE,,AUTO

      510     1724    1           DATA$=PINCRC(DATA$,SIZEC(GI$MLCPDMP_HDR));

   1724  4 000042   200006 236100                    LDQ     DATA$,,AUTO
         4 000043   000002 036003                    ADLQ    2,DU
         4 000044   200006 756100                    STQ     DATA$,,AUTO

      511     1725        /**/
      512     1726    1           FPT_OPEN.NAME_=VECTOR(DFNAME);

   1726  4 000045   200005 470500                    LDP0    @DFNAME,,AUTO
         4 000046   000100 101500                    MRL     fill='000'O
         4 000047   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         4 000050   200014 000002                    ADSC9   CHANNEL+3,,AUTO          cn=0,n=2
         4 000051   200014 220100                    LDX0    CHANNEL+3,,AUTO
         4 000052   000001 621010                    EAX1    1,X0
         4 000053   000000 635011                    EAA     0,X1
         4 000054   000002 771000                    ARL     2
         4 000055   000140 135007                    SBLA    96,DL
         4 000056   200005 236100                    LDQ     @DFNAME,,AUTO
         4 000057   000010 757000 1                  STAQ    FPT_OPEN+6

      513     1727    2           CALL M$OPEN(FPT_OPEN) WHENALTRETURN DO;

   1727  4 000060   000002 630400 1                  EPPR0   FPT_OPEN
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:94   
         4 000061   450000 713400                    CLIMB   alt,open
         4 000062   410400 401760                    pmme    nvectors=18
         4 000063   000065 702000 4                  TSX2    s:1728
         4 000064   000105 710000 4                  TRA     s:1738

      514     1728    3              IF B$ALT.ERR.CODE~=%E$FILEBUSY THEN DO;

   1728  4 000065   000000 470400 xsym               LDP0    B$TCB$
         4 000066   000000 471500                    LDP1    0,,PR0
         4 000067   100102 236100                    LDQ     66,,PR1
         4 000070   377770 376007                    ANQ     131064,DL
         4 000071   001550 116007                    CMPQ    872,DL
         4 000072   000076 600000 4                  TZE     s:1733

      515     1729    3                 CALL PMMEERR;

   1729  4 000073   000222 701000 4                  TSX1    PMMEERR
         4 000074   000000 011000                    NOP     0

      516     1730    3                 RETURN;

   1730  4 000075   000000 702200 xent               TSX2  ! X66_ARET

      517     1731    3                 END;
      518     1732    3              ELSE DO;

      519     1733    3                 CALL M$SENV;

   1733  4 000076   010011 713400                    CLIMB   4105
         4 000077   000000 401760                    pmme    nvectors=0

      520     1734    3                 CALL M$WAIT(WAIT10);

   1734  4 000100   000076 630400 1                  EPPR0   WAIT10
         4 000101   020006 713400                    CLIMB   8198
         4 000102   400400 401760                    pmme    nvectors=2

PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:95   
      521     1735    3                 CALL M$RETRYS;

   1735  4 000103   010015 713400                    CLIMB   4109
         4 000104   000000 401760                    pmme    nvectors=0

      522     1736    3                 END;

      523     1737    2              END;

      524     1738    1           DFKEY='007'O;

   1738  4 000105   007000 235003                    LDA     3584,DU
         4 000106   000000 236003                    LDQ     0,DU
         4 000107   000000 757000 1                  STAQ    DFKEY

      525     1739    1           DFKEY.K.NODEIDX=KF_NODEIDX;

   1739  4 000110   000000 236000 xsym               LDQ     KF_NODEIDX
         4 000111   000022 736000                    QLS     18
         4 000112   000000 552020 1                  STBQ    DFKEY,'20'O

      526     1740    1           DFKEY.K.TYP=%R_MLCP#;

   1740  4 000113   006000 236007                    LDQ     3072,DL
         4 000114   000000 552010 1                  STBQ    DFKEY,'10'O

      527     1741        /**/
      528     1742    2           DO WHILE(DATASIZE>0);

   1742  4 000115   200007 235100                    LDA     DATASIZE,,AUTO
         4 000116   000214 604400 4                  TMOZ    s:1754

      529     1743    2              CALL KFS$PACKMSG(ADDR(GI$MLCPDMP.CHAN),ADDR(CHANNEL),4);

   1743  4 000117   200006 236100                    LDQ     DATA$,,AUTO
         4 000120   200014 756100                    STQ     CHANNEL+3,,AUTO
         4 000121   200011 630500                    EPPR0   CHANNEL,,AUTO
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:96   
         4 000122   200015 450500                    STP0    CHANNEL+4,,AUTO
         4 000123   000002 236000 5                  LDQ     2
         4 000124   200020 756100                    STQ     CHANNEL+7,,AUTO
         4 000125   200015 631500                    EPPR1   CHANNEL+4,,AUTO
         4 000126   200017 451500                    STP1    CHANNEL+6,,AUTO
         4 000127   200014 633500                    EPPR3   CHANNEL+3,,AUTO
         4 000130   200016 453500                    STP3    CHANNEL+5,,AUTO
         4 000131   200016 630500                    EPPR0   CHANNEL+5,,AUTO
         4 000132   000021 631400 xsym               EPPR1   B_VECTNIL+17
         4 000133   000000 701000 xent               TSX1    KFS$PACKMSG
         4 000134   000000 011000                    NOP     0

      530     1744    2              CALL KFS$PACKMSG(ADDR(GI$MLCPDMP.SIZE),ADDR(DSZ),4);

   1744  4 000135   200006 236100                    LDQ     DATA$,,AUTO
         4 000136   000001 036003                    ADLQ    1,DU
         4 000137   200014 756100                    STQ     CHANNEL+3,,AUTO
         4 000140   200010 630500                    EPPR0   DSZ,,AUTO
         4 000141   200015 450500                    STP0    CHANNEL+4,,AUTO
         4 000142   000002 236000 5                  LDQ     2
         4 000143   200020 756100                    STQ     CHANNEL+7,,AUTO
         4 000144   200015 631500                    EPPR1   CHANNEL+4,,AUTO
         4 000145   200017 451500                    STP1    CHANNEL+6,,AUTO
         4 000146   200014 633500                    EPPR3   CHANNEL+3,,AUTO
         4 000147   200016 453500                    STP3    CHANNEL+5,,AUTO
         4 000150   200016 630500                    EPPR0   CHANNEL+5,,AUTO
         4 000151   000021 631400 xsym               EPPR1   B_VECTNIL+17
         4 000152   000000 701000 xent               TSX1    KFS$PACKMSG
         4 000153   000000 011000                    NOP     0

      531     1745    2              DFKEY.K.VP#=CHANNEL;

   1745  4 000154   200011 236100                    LDQ     CHANNEL,,AUTO
         4 000155   000004 772000                    QRL     4
         4 000156   000001 552034 1                  STBQ    DFKEY+1,'34'O

      532     1746    2              FPT_WRITE.BUF_=VECTOR(GI$MLCPDMP.DATA);
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:97   

   1746  4 000157   200010 236100                    LDQ     DSZ,,AUTO
         4 000160   000004 772000                    QRL     4
         4 000161   000064 737000                    LLS     52
         4 000162   000140 135007                    SBLA    96,DL
         4 000163   200006 236100                    LDQ     DATA$,,AUTO
         4 000164   000002 036003                    ADLQ    2,DU
         4 000165   000110 757000 1                  STAQ    FPT_WRITE+4

      533     1747    3              CALL M$WRITE(FPT_WRITE) WHENALTRETURN DO;

   1747  4 000166   000104 630400 1                  EPPR0   FPT_WRITE
         4 000167   440001 713400                    CLIMB   alt,write
         4 000170   401400 401760                    pmme    nvectors=4
         4 000171   000173 702000 4                  TSX2    s:1748
         4 000172   000176 710000 4                  TRA     s:1751

      534     1748    3                 CALL PMMEERR;

   1748  4 000173   000222 701000 4                  TSX1    PMMEERR
         4 000174   000000 011000                    NOP     0

      535     1749    3                 DATASIZE=0;

   1749  4 000175   200007 450100                    STZ     DATASIZE,,AUTO

      536     1750    3                 END;

      537     1751    2              DATA$=PINCRC(DATA$,SIZEC(GI$MLCPDMP));

   1751  4 000176   200010 236100                    LDQ     DSZ,,AUTO
         4 000177   000004 772000                    QRL     4
         4 000200   000010 620006                    EAX0    8,QL
         4 000201   000000 636010                    EAQ     0,X0
         4 000202   000002 772000                    QRL     2
         4 000203   200006 036100                    ADLQ    DATA$,,AUTO
         4 000204   200006 756100                    STQ     DATA$,,AUTO
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:98   

      538     1752    2              DATASIZE=DATASIZE-SIZEC(GI$MLCPDMP);

   1752  4 000205   000000 635010                    EAA     0,X0
         4 000206   000022 771000                    ARL     18
         4 000207   200014 755100                    STA     CHANNEL+3,,AUTO
         4 000210   200007 236100                    LDQ     DATASIZE,,AUTO
         4 000211   200014 136100                    SBLQ    CHANNEL+3,,AUTO
         4 000212   200007 756100                    STQ     DATASIZE,,AUTO

      539     1753    2              END;

   1753  4 000213   000117 605400 4                  TPNZ    s:1743

      540     1754    2           CALL M$CLOSE(FPT_CLOSE) WHENALTRETURN DO; END;

   1754  4 000214   000000 630400 3                  EPPR0   FPT_CLOSE
         4 000215   450001 713400                    CLIMB   alt,close
         4 000216   406000 401760                    pmme    nvectors=13
         4 000217   000221 702000 4                  TSX2    s:1755
         4 000220   000221 710000 4                  TRA     s:1755

      541     1755    1           RETURN;

   1755  4 000221   000000 702200 xent               TSX2  ! X66_ARET

      542     1756        /**/
      543     1757    1   PMMEERR: PROC;

   1757  4 000222   200012 741300       PMMEERR      STX1  ! CHANNEL+1,,AUTO

      544     1758        /**/
      545     1759    2           RETURN;

   1759  4 000223   000001 702211                    TSX2  ! 1,X1
      546     1760        /**/
      547     1761    2   END PMMEERR;
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:99   
      548     1762        /**/
      549     1763    1   END KFD$MLCPDUMP;
      550     1764        %EOD;

PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:100  
--  Include file information  --

   IR_DATA_M.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   GI_DATA_M.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure KFD$MLCPDUMP.
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:101  

 **** Variables and constants ****

  ****  Section 001  Data  KFD$MLCPDUMP

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(72)    r     1 DFKEY                      2-0-0/d STRC(2088)  r     1 FPT_OPEN
   104-0-0/d STRC(432)   r     1 FPT_WRITE                 74-0-0/c STRC(72)    r     1 SYSTAC_ACCT
    76-0-0/d STRC(216)   r     1 WAIT10

  ****  Section 003 RoData KFD$MLCPDUMP

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(1080)  r     1 FPT_CLOSE

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @DATASEG                   5-0-0/w PTR         r     1 @DFNAME
     3-0-0/w PTR         r     1 @FEP#                     11-0-0/w UBIN(32)    r     1 CHANNEL
     6-0-0/w PTR         r     1 DATA$                     *0-0-0/d VECT        r     1 DATASEG
     7-0-0/w SBIN        r     1 DATASIZE                  *0-0-0/c ASTR(9)     r     1 DFNAME
    10-0-0/w UBIN(32)    r     1 DSZ                       *0-0-0/w UBIN        r     1 FEP#

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$TCB$                     0-0-0/w UBIN        r     1 KF_NODEIDX

  ****  BASED and DCB variables  ****
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:102  

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/w STRC(144)   r     1 B$TCB
     0-0-0/c ASTR(72)    r     1 GI$MLCPDMP                 0-0-0/c STRC(72)    r     1 GI$MLCPDMP_HDR
     0-0-0N  NULL        r     1 M$DUMPFILE


   Procedure KFD$MLCPDUMP requires 148 words for executable code.
   Procedure KFD$MLCPDUMP requires 18 words of local(AUTO) storage.
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:103  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:104  
          MINI XREF LISTING

B$ALT.CODE
      1708**DCL      1708--REDEF    1709--REDEF    1709--REDEF
B$ALT.ERR.CODE
      1710**DCL      1728>>IF
B$ALT.ERR.ERR#
      1710**DCL      1710--REDEF
B$ALT.EVID
      1709**DCL      1709--REDEF    1709--REDEF
B$TCB.ALT$
      1704**DCL      1728>>IF
B$TCB$
      1714**DCL      1728>>IF
CHANNEL
      1434**DCL      1743--CALL     1745>>ASSIGN
DATA$
      1431**DCL      1437--IMP-PTR  1440--IMP-PTR  1720<<ASSIGN   1721>>IF       1722>>CALL     1724<<ASSIGN
      1724>>ASSIGN   1743>>CALL     1744>>CALL     1746>>ASSIGN   1751<<ASSIGN   1751>>ASSIGN
DATASEG
        23**DCL         6--PROC     1719>>IF       1720>>ASSIGN
DATASIZE
      1432**DCL      1723<<ASSIGN   1742>>DOWHILE  1749<<ASSIGN   1752<<ASSIGN   1752>>ASSIGN
DFKEY
      1454**DCL      1688--DCLINIT  1738<<ASSIGN
DFKEY.K.NODEIDX
      1458**DCL      1739<<ASSIGN
DFKEY.K.TYP
      1458**DCL      1740<<ASSIGN
DFKEY.K.VP#
      1459**DCL      1745<<ASSIGN
DFNAME
        24**DCL         6--PROC     1726--ASSIGN
DFNAME.L
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:105  
        25**DCL        26--IMP-SIZ  1726>>ASSIGN
DSZ
      1433**DCL      1440--IMP-SIZ  1722--CALL     1723>>ASSIGN   1744--CALL     1746>>ASSIGN   1751>>ASSIGN
      1752>>ASSIGN
FEP#
        22**DCL         6--PROC
FPT_CLOSE
      1638**DCL      1754<>CALL
FPT_CLOSE.SN_
      1638**DCL      1638--REDEF
FPT_CLOSE.UTL_
      1639**DCL      1639--REDEF
FPT_CLOSE.V
      1643**DCL      1638--DCLINIT
FPT_CLOSE.V.EXPIRE#
      1653**DCL      1653--REDEF
FPT_CLOSE.V.TYPE#
      1651**DCL      1651--REDEF
FPT_CLOSE.V.XTNSIZE#
      1648**DCL      1648--REDEF    1650--REDEF
FPT_OPEN
      1558**DCL      1727<>CALL
FPT_OPEN.ACSVEH_
      1560**DCL      1561--REDEF
FPT_OPEN.ALTKEYS_
      1566**DCL      1567--REDEF    1567--REDEF
FPT_OPEN.HDR_
      1565**DCL      1566--REDEF
FPT_OPEN.NAME_
      1559**DCL      1726<<ASSIGN
FPT_OPEN.TAB_
      1564**DCL      1565--REDEF
FPT_OPEN.UHL_
      1558**DCL      1559--REDEF    1559--REDEF
FPT_OPEN.V
      1567**DCL      1558--DCLINIT
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:106  
FPT_OPEN.V.FSN#
      1598**DCL      1598--REDEF    1598--REDEF
FPT_OPEN.WSN_
      1564**DCL      1564--REDEF
FPT_WRITE
      1688**DCL      1747<>CALL
FPT_WRITE.BUF_
      1688**DCL      1746<<ASSIGN
FPT_WRITE.STATION_
      1690**DCL      1690--REDEF
FPT_WRITE.V
      1691**DCL      1688--DCLINIT
FPT_WRITE.V.DVBYTE.VFC#
      1697**DCL      1697--REDEF
GI$MLCPDMP
      1440**DCL      1751--ASSIGN   1752--ASSIGN
GI$MLCPDMP.CHAN
      1440**DCL      1743--CALL
GI$MLCPDMP.DATA
      1440**DCL      1746--ASSIGN
GI$MLCPDMP.SIZE
      1440**DCL      1744--CALL
GI$MLCPDMP_HDR
      1437**DCL      1723--ASSIGN   1724--ASSIGN
GI$MLCPDMP_HDR.MLCP
      1437**DCL      1721>>IF
GI$MLCPDMP_HDR.SIZE
      1437**DCL      1722--CALL
KFS$PACKMSG
        28**DCL-ENT  1722--CALL     1743--CALL     1744--CALL
KF_NODEIDX
      1490**DCL      1739>>ASSIGN
M$CLOSE
        67**DCL-ENT  1754--CALL
M$OPEN
        67**DCL-ENT  1727--CALL
PL6.E3A0      #004=KFD$MLCPDUMP File=KFD$FEDUMP.:E05TSI                          WED 07/30/97 00:20 Page:107  
M$RETRYS
       124**DCL-ENT  1735--CALL
M$SENV
       123**DCL-ENT  1733--CALL
M$WAIT
       125**DCL-ENT  1734--CALL
M$WRITE
        68**DCL-ENT  1747--CALL
PMMEERR
      1757**PROC     1729--CALL     1748--CALL
SYSTAC_ACCT
      1613**DCL      1563--DCLINIT
WAIT10
      1668**DCL      1734<>CALL
WAIT10.V
      1669**DCL      1668--DCLINIT

PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:108  
      551        1        /*T***********************************************************/
      552        2        /*T*                                                         */
      553        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      554        4        /*T*                                                         */
      555        5        /*T***********************************************************/
      556        6        /*F*   Name: KFD$DUMPMSG
      557        7               Call: CALL KFD$DUMPMSG(dumpmsg);
      558        8               Purpose:
      559        9                  This routine is called from KFC$CSCGMSG when a dump message comes
      560       10               in from a FEP.  The type code in the message may be one of the
      561       11               following codes:
      562       12
      563       13                  GI_DUMP_RQST - Request to send a dump.  The request will be granted
      564       14                                 after any previous dump requests have been finished.
      565       15                                 This message contains the informational part of the
      566       16                                 recovery buffer from whence the screech code is
      567       17                                 obtained.  It is acknowleged by GI_DUMP_GRANT.
      568       18
      569       19                  GI_DUMP_RVBUF - This message contains the entire recovery buffer to
      570       20                                  be written to the dump file.  The message is
      571       21                                  acknowleged by GI_DUMP_ACK.
      572       22
      573       23                  GI_DUMP_PAGE - This message contains a memory page to be written to
      574       24                                 the dump file.  It is acknowleged by GI_DUMP_ACK.
      575       25
      576       26                  GI_DUMP_EOD - This message indicates the dump is complete.  It is
      577       27                                not acknowleged.
      578       28
      579       29        */
      580       30
      581       31        KFD$DUMPMSG: PROC(DUMPMSG);
      582       32
      583       33        %INCLUDE CP_6;
      584      114        %INCLUDE CP_6_SUBS;
      585      654        %INCLUDE B_ERRORS_C;
      586     1781        %INCLUDE KL_MACRO_C;
      587     5133        %INCLUDE IR_DATA_M;
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:109  
      588     5297        %INCLUDE FM$FIT;
      589     5518
      590     5519        %RV_DFSUBS;
      591     5546        %GI_RCVR_EQU;
      592     5558
      593     5559        %KL_DUMPMSG (FPTN=DUMPMSG,STCLASS=PARAM,DSIZE=DATASIZE);
      594     5600    1   DCL XUR$ERRCNVRT ENTRY(2);
      595     5601    1   DCL KFD$WRT_NA ENTRY(2) ALTRET;
      596     5602    1   DCL KFD$LOGSCREECH ENTRY(3);
      597     5603    1   DCL XSF$LOCCODT ENTRY(2) ALTRET;
      598     5604
      599     5605    1   DCL M$RDUMP DCB;
      600     5606
      601     5607        %VLP_ATTR (FPTN=DUMP_ATTR);
      602     5621        %VLP_ACSVEH (FPTN=X,VEHICLE='FCG-M12345-0[NN]',LAST=";");
      603     5638    1   DCL GOT_ACS BIT(1) ALIGNED;
      604     5639    1   DCL FIT$ PTR;
      605     5640        %CODE10;
      606     5644
      607     5645    1   DCL GDP_ VECTOR STATIC;
      608     5646        %FPT_GDP (PAGES=1,RESULTS=GDP_);
      609     5660        %FPT_FDP (PAGES=1);
      610     5674
      611     5675        %FPT_OPEN (FPTN=FPT_OPN_DUMP,
      612     5676                  DCB=M$RDUMP,
      613     5677                  NAME=DUMP_NAME,
      614     5678                  ACCT=DUMP_ACCT,
      615     5679                  ASN=FILE,
      616     5680                  ORG=KEYED,
      617     5681                   FUN = UPDATE,
      618     5682                  SHARE=NONE,
      619     5683                  IXTNSIZE=20,
      620     5684                  XTNSIZE=20,
      621     5685                   STCLASS = STATIC);
      622     5794        %VLP_NAME (FPTN=DUMP_NAME,
      623     5795                  LEN=31,
      624     5796                  STCLASS=STATIC);
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:110  
      625     5823        %VLP_ACCT (FPTN=DUMP_ACCT,
      626     5824                  ACCT=':SYSTAC',
      627     5825                  STCLASS=CONSTANT);
      628     5838        %FPT_CLOSE (FPTN=FPT_CLS_DUMP,
      629     5839                   DCB=M$RDUMP,
      630     5840                   DISP=SAVE,
      631     5841                   RELG=YES,
      632     5842                    STCLASS = STATIC);
      633     5884        %FPT_READ (FPTN=RDDUMP,
      634     5885                  DCB=M$RDUMP,
      635     5886                  BUF=NODEDIR,
      636     5887                  KEY=DFKEY,
      637     5888                  KEYS=YES);
      638     5927        %FPT_WRITE (FPTN=WRDUMP,
      639     5928                   DCB=M$RDUMP,
      640     5929                   KEY=DFKEY);
      641     5960        %FPT_WAIT (FPTN=WAIT1,
      642     5961                   UNITS=1);
      643     5975        %FPT_SCREECH (FPTN=FPT_SCREECH,
      644     5976                      SCODE=RECOVERY_CODE,
      645     5977                      SCREECHID=DUMP_NAME,
      646     5978                      STCLASS=CONSTANT);
      647     5992
      648     5993        %EQU TBLSLOTS=16;
      649     5994    1   DCL 1 DUMPTBL(0:%TBLSLOTS) STATIC ALIGNED,
      650     5995    1         2 FEX SBIN WORD INIT(-1*0),
      651     5996    1         2 SCODE BIT(36) INIT('0'B*0);
      652     5997    1   DCL CURSLOTX SBIN STATIC INIT(-1);
      653     5998    1   DCL SLOTX UBIN;
      654     5999
      655     6000    1   DCL 1 DFKEY STATIC,
      656     6001    1         2 L UBIN BYTE CALIGNED INIT(SIZEC(DFKEY.K)),
      657     6002    1         2 K,
      658     6003    1           3 NODE UBIN BYTE CALIGNED INIT(0),
      659     6004    1           3 TYPE UBIN BYTE CALIGNED INIT(0),
      660     6005    1           3 STYPE UBIN BYTE CALIGNED INIT(0),
      661     6006    1           3 USR# UBIN BYTE CALIGNED INIT(0),
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:111  
      662     6007    1           3 PAGE# UBIN(27) CALIGNED INIT(0);
      663     6008
      664     6009        %VLP_SCODE (FPTN=RECOVERY_CODE,
      665     6010                   FCG=KF,
      666     6011                   MID=D,
      667     6012                   MON=NO,
      668     6013                   CODE=0,
      669     6014                   LDCTS=YES,
      670     6015                   CWSPT=YES,
      671     6016                   CGDATA=YES,
      672     6017                   STCLASS=STATIC);
      673     6078        %RV_NODEDIR (FPTN=NODEDIR,
      674     6079                    STCLASS=STATIC,
      675     6080                    N=10);
      676     6097    1   DCL NODEIDX UBIN STATIC;
      677     6098
      678     6099        %RV_FEP_BUFF (FPTN=RVBINFO,STCLASS="BASED(RVB$)",BITMAP=NO);
      679     6132
      680     6133        %KL_DUMPMSG (FPTN=REPLY,
      681     6134                    STCLASS=AUTO,
      682     6135                    DSIZE=1);
      683     6176
      684     6177    1   DCL FEX UBIN;
      685     6178    1   DCL RVB$ PTR;
      686     6179    1   DCL DATASIZE UBIN;
      687     6180    1   DCL PAGENO UBIN;
      688     6181
      689     6182    1   DCL B$TCB$ PTR SYMREF;
      690     6183        %F$DCB;
      691     6240        %B$TCB;
      692     6243        %B$ALT;
      693     6251        %SUB B$ALT=B$TCB$->B$TCB.ALT$->B$ALT;
      694     6252
      695     6253        %EJECT;
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:112  
      696     6254
      697     6255    1           CALL PACK(DUMPMSG.DATASIZE,DATASIZE,2);
      698     6256    1           SLOTX=CURSLOTX;
      699     6257
      700     6258    2           DO CASE(DUMPMSG.TYPE);
      701     6259    2            CASE(%GI_DUMP_RQST);
      702     6260    2              CALL PACK(DUMPMSG.FEX,FEX,2);
      703     6261    3              CALL FINDSLOT(FEX,SLOTX) WHENRETURN DO;
      704     6262    3                 RVB$=ADDR(DUMPMSG.DATA);
      705     6263    3                 CALL XUR$ERRCNVRT(RVBINFO.SCODE,DUMPTBL.SCODE(SLOTX));
      706     6264    3                 END;
      707     6265    2              IF CURSLOTX=-1 OR CURSLOTX=SLOTX THEN CALL STARTDUMP;
      708     6266    2            CASE(%GI_DUMP_RVBUF);
      709     6267    2              DFKEY.K.NODE=NODEIDX;
      710     6268    2              WRDUMP.BUF_=VECTOR(DUMPMSG.DATA);
      711     6269    3              CALL M$WRITE(WRDUMP) WHENALTRETURN DO; END;
      712     6270    2              CALL SENDREPLY(%GI_DUMP_ACK);
      713     6271    2            CASE(%GI_DUMP_PAGE);
      714     6272    2              DFKEY.K.NODE=NODEIDX;
      715     6273    2              DFKEY.K.TYPE=%R_LRMEM#;
      716     6274    2              CALL PACK(DUMPMSG.RPN,PAGENO,2);
      717     6275    2              DFKEY.K.PAGE#=PAGENO;
      718     6276    2              CALL PACK(DUMPMSG.DATASIZE,DATASIZE,2);
      719     6277    2              WRDUMP.BUF_=VECTOR(DUMPMSG.DATA);
      720     6278    3              CALL M$WRITE(WRDUMP) WHENALTRETURN DO; END;
      721     6279    2              CALL SENDREPLY(%GI_DUMP_ACK);
      722     6280    2            CASE(%GI_DUMP_EOD);
      723     6281    2              CALL STARTDUMP;
      724     6282    2            CASE(%GI_DUMP_ABORT);
      725     6283    2              FEX=DUMPMSG.FEX;
      726     6284    3              CALL FINDSLOT(FEX,SLOTX) WHENRETURN DO;
      727     6285    3                 DUMPTBL.FEX(SLOTX)=-1;
      728     6286    4                 IF SLOTX=CURSLOTX THEN DO;
      729     6287    4                    CURSLOTX=-1;
      730     6288    4                    CALL STARTDUMP;
      731     6289    4                    END;
      732     6290    3                 END;
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:113  
      733     6291    2              RETURN;
      734     6292    2            END;
      735     6293
      736     6294    1           RETURN;
      737     6295
      738     6296        %EJECT;
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:114  
      739     6297
      740     6298    1   STARTDUMP: PROC;
      741     6299
      742     6300    2   DCL I UBIN;
      743     6301
      744     6302    3           IF DCBADDR(DCBNUM(M$RDUMP))->F$DCB.FCD# THEN DO;
      745     6303    4              IF GOT_ACS THEN DO;
      746     6304    4                 FPT_CLS_DUMP.ACSVEH_ = VECTOR(DUMP_ATTR);
      747     6305    4                 FPT_CLS_DUMP.V.OPER.CHGATT# = '1'B;
      748     6306    4                 END;
      749     6307    4              ELSE DO;
      750     6308    4                 FPT_CLS_DUMP.ACSVEH_ = VECTOR(NIL);
      751     6309    4                 FPT_CLS_DUMP.V.OPER.CHGATT# = '0'B;
      752     6310    4                 END;
      753     6311    4              CALL M$CLOSE (FPT_CLS_DUMP) WHENALTRETURN DO; END;
      754     6312    3              END;
      755     6313    3           IF CURSLOTX~=-1 THEN DO;
      756     6314    3              DUMPTBL.FEX(CURSLOTX)=-1;
      757     6315    3              CURSLOTX=-1;
      758     6316    3              END;
      759     6317
      760     6318    3           DO I=0 TO %TBLSLOTS;
      761     6319    3              IF DUMPTBL.FEX(I)~=-1 THEN EXIT;
      762     6320    3              END;
      763     6321    3           IF I<=%TBLSLOTS THEN DO;
      764     6322    3              CURSLOTX=I;
      765     6323    3              CALL SETCODE(DUMPTBL.SCODE(I),RECOVERY_CODE);
      766     6324    3              CALL M$SCREECH(FPT_SCREECH);
      767     6325    3              CALL KFD$LOGSCREECH(RECOVERY_CODE,DUMPTBL.FEX(I),DUMP_NAME);
      768     6326    3              CALL M$GDP (FPT_GDP);
      769     6327    3              FPT_OPN_DUMP.FPARAM_ = GDP_;
      770     6328    4              CALL M$OPEN(FPT_OPN_DUMP) WHENALTRETURN DO;
      771     6329    5                 IF B$ALT.ERR.CODE=%E$FILEBUSY OR B$ALT.ERR.CODE=%E$NOFILE THEN DO;
      772     6330    5                    CALL M$SENV;
      773     6331    5                    CALL M$WAIT(WAIT1);
      774     6332    5                    CALL M$RETRYS;
      775     6333    5                    END;
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:115  
      776     6334    5                 ELSE DO;
      777     6335    5                    CURSLOTX=-1;
      778     6336    5                    DUMPTBL.FEX(I)=-1;
      779     6337    5                    RETURN;
      780     6338    5                    END;
      781     6339    4                 END;
      782     6340    3              GOT_ACS = '0'B;
      783     6341    3              FIT$ = VBASE(GDP_);
      784     6342    4              CALL XSF$LOCCODT (FIT$,10) WHENRETURN DO;
      785     6343    4                 DUMP_ATTR.Q.X.VEHICLE# = FIT$->CODE10.ACSVEH.T;
      786     6344    4                 GOT_ACS = '1'B;
      787     6345    4                 END;
      788     6346    3              SUBSTR(DUMP_ATTR.Q.X.VEHICLE#,12,1)='(';
      789     6347    3              SUBSTR(DUMP_ATTR.Q.X.VEHICLE#,15,1)=')';
      790     6348    3              CALL BINCHAR(SUBSTR(DUMP_ATTR.Q.X.VEHICLE#,13,2), DUMPTBL.FEX(I));
      791     6349    3              CALL M$FDP (FPT_FDP);
      792     6350
      793     6351    3              DFKEY.K='0'B;
      794     6352    3              NODEDIR.N=1;                 /* Just to initit in case read fails */
      795     6353    4              CALL M$READ (RDDUMP) WHENALTRETURN DO; END;
      796     6354    3              NODEDIR.N = NODEDIR.N + 1;
      797     6355    3              NODEIDX = NODEDIR.N;
      798     6356    3              CALL BINCHAR(NODEDIR.NODE.NODENAME(NODEIDX),DUMPTBL.FEX(CURSLOTX));
      799     6357    3              NODEDIR.NODE.TYPE(NODEIDX)=%R_FEPNODE#;
      800     6358    3              WRDUMP.BUF_=VECTOR(NODEDIR);
      801     6359    4              CALL M$WRITE(WRDUMP) WHENALTRETURN DO; END;
      802     6360    3              CALL SENDREPLY(%GI_DUMP_GRANT);
      803     6361    3              END;
      804     6362
      805     6363    2           RETURN;
      806     6364
      807     6365    2   END STARTDUMP;
      808     6366
      809     6367        %EJECT;
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:116  
      810     6368
      811     6369    1   FINDSLOT: PROC(FEX,SLOTX) ALTRET;
      812     6370
      813     6371    2   DCL FEX UBIN;
      814     6372    2   DCL SLOTX UBIN;
      815     6373    2   DCL X SBIN;
      816     6374
      817     6375    3           DO X=0 TO %TBLSLOTS;
      818     6376    4              IF DUMPTBL.FEX(X)=FEX THEN DO;
      819     6377    4                 SLOTX=X;
      820     6378    4                 RETURN;
      821     6379    4                 END;
      822     6380    3              END;
      823     6381    3           DO X=0 TO %TBLSLOTS;
      824     6382    4              IF DUMPTBL.FEX(X)=-1 THEN DO;
      825     6383    4                 DUMPTBL.FEX(X)=FEX;
      826     6384    4                 DUMPTBL.SCODE(X)='0'B;
      827     6385    4                 SLOTX=X;
      828     6386    4                 RETURN;
      829     6387    4                 END;
      830     6388    3              END;
      831     6389    2           ALTRETURN;
      832     6390
      833     6391    2   END FINDSLOT;
      834     6392
      835     6393        %EJECT;
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:117  
      836     6394
      837     6395    1   SETCODE: PROC(SRC,DEST);
      838     6396
      839     6397        %VLP_ERRCODE (FPTN=SRC,STCLASS=PARAM);
      840     6442        %VLP_ERRCODE (FPTN=DEST,STCLASS=PARAM);
      841     6487
      842     6488    2           DEST=SRC;
      843     6489    2           DEST.SEV=%SEV_FESNAP#;
      844     6490
      845     6491    2           RETURN;
      846     6492
      847     6493    2   END SETCODE;
      848     6494
      849     6495        %EJECT;
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:118  
      850     6496
      851     6497    1   SENDREPLY: PROC(TYPECODE);
      852     6498
      853     6499    2   DCL TYPECODE UBIN;
      854     6500
      855     6501    2           REPLY.TYPE=TYPECODE;
      856     6502    2           CALL UNPACK(DUMPTBL.FEX(SLOTX),REPLY.FEX,2);
      857     6503    2           CALL UNPACK(1,REPLY.DATASIZE,2);
      858     6504    2           CALL UNPACK(PAGENO,REPLY.RPN,2);
      859     6505    2           CALL KFD$WRT_NA(REPLY,1);
      860     6506    2           RETURN;
      861     6507
      862     6508    2   END SENDREPLY;
      863     6509
      864     6510    1   PACK:   PROC(SRC,DEST,BYTES);
      865     6511
      866     6512    2   DCL SRC(0:4) UBIN BYTE CALIGNED;
      867     6513    2   DCL DEST UBIN;
      868     6514    2   DCL BYTES UBIN;
      869     6515    2   DCL I SBIN;
      870     6516
      871     6517    2           DEST=0;
      872     6518    3           DO I=0 TO BYTES-1;
      873     6519    3              DEST=DEST*256+SRC(I);
      874     6520    3              END;
      875     6521    2           RETURN;
      876     6522
      877     6523    2   END PACK;
      878     6524
      879     6525    1   UNPACK: PROC(SRC,DEST,BYTES);
      880     6526
      881     6527    2   DCL SRC UBIN;
      882     6528    2   DCL DEST(0:3) UBIN BYTE CALIGNED;
      883     6529    2   DCL BYTES UBIN;
      884     6530    2   DCL I SBIN;
      885     6531    2   DCL TEMP UBIN;
      886     6532
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:119  
      887     6533    2           TEMP=SRC;
      888     6534    3           DO I=BYTES-1 DOWNTO 0;
      889     6535    3              DEST(I)=MOD(TEMP,256);
      890     6536    3              TEMP=TEMP/256;
      891     6537    3              END;
      892     6538    2           RETURN;
      893     6539
      894     6540    2   END UNPACK;
      895     6541
      896     6542    1   END KFD$DUMPMSG;
      897     6543        %EOD;

PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:120  
--  Include file information  --

   FM$FIT.:E05TOU  is referenced.
   IR_DATA_M.:E05TOU  is referenced.
   KL_MACRO_C.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure KFD$DUMPMSG.

   Procedure KFD$DUMPMSG requires 474 words for executable code.
   Procedure KFD$DUMPMSG requires 30 words of local(AUTO) storage.

PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:121  

 Object Unit name= KFD$DUMPMSG                                File name= KFD$FEDUMP.:E05TOU
 UTS= JUL 30 '97 00:21:14.88 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   DCB   even  none     0      0  M$RDUMP
    2   Data  even  none   223    337  KFD$DUMPMSG
    3  RoData even  UTS      8     10  KFD$DUMPMSG
    4   Proc  even  none   474    732  KFD$DUMPMSG
    5  RoData even  none    22     26  KFD$DUMPMSG

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     4      0   yes            yes      Std        1  KFD$DUMPMSG

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       2 XUR$ERRCNVRT
         yes           Std       3 KFD$LOGSCREECH
 yes     yes           Std       2 XSF$LOCCODT
 yes     yes           Std       2 KFD$WRT_NA
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:122  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  M$RDUMP                               B$TCB$
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:123  


      551        1        /*T***********************************************************/
      552        2        /*T*                                                         */
      553        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      554        4        /*T*                                                         */
      555        5        /*T***********************************************************/
      556        6        /*F*   Name: KFD$DUMPMSG
      557        7               Call: CALL KFD$DUMPMSG(dumpmsg);
      558        8               Purpose:
      559        9                  This routine is called from KFC$CSCGMSG when a dump message comes
      560       10               in from a FEP.  The type code in the message may be one of the
      561       11               following codes:
      562       12
      563       13                  GI_DUMP_RQST - Request to send a dump.  The request will be granted
      564       14                                 after any previous dump requests have been finished.
      565       15                                 This message contains the informational part of the
      566       16                                 recovery buffer from whence the screech code is
      567       17                                 obtained.  It is acknowleged by GI_DUMP_GRANT.
      568       18
      569       19                  GI_DUMP_RVBUF - This message contains the entire recovery buffer to
      570       20                                  be written to the dump file.  The message is
      571       21                                  acknowleged by GI_DUMP_ACK.
      572       22
      573       23                  GI_DUMP_PAGE - This message contains a memory page to be written to
      574       24                                 the dump file.  It is acknowleged by GI_DUMP_ACK.
      575       25
      576       26                  GI_DUMP_EOD - This message indicates the dump is complete.  It is
      577       27                                not acknowleged.
      578       28
      579       29        */
      580       30
      581       31        KFD$DUMPMSG: PROC(DUMPMSG);

     31  4 000000   000000 700200 xent  KFD$DUMPMSG  TSX0  ! X66_AUTO_1
         4 000001   000036 000001                    ZERO    30,1

      582       32
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:124  
      583       33        %INCLUDE CP_6;
      584      114        %INCLUDE CP_6_SUBS;
      585      654        %INCLUDE B_ERRORS_C;
      586     1781        %INCLUDE KL_MACRO_C;
      587     5133        %INCLUDE IR_DATA_M;
      588     5297        %INCLUDE FM$FIT;
      589     5518
      590     5519        %RV_DFSUBS;
      591     5546        %GI_RCVR_EQU;
      592     5558
      593     5559        %KL_DUMPMSG (FPTN=DUMPMSG,STCLASS=PARAM,DSIZE=DATASIZE);
      594     5600    1   DCL XUR$ERRCNVRT ENTRY(2);
      595     5601    1   DCL KFD$WRT_NA ENTRY(2) ALTRET;
      596     5602    1   DCL KFD$LOGSCREECH ENTRY(3);
      597     5603    1   DCL XSF$LOCCODT ENTRY(2) ALTRET;
      598     5604
      599     5605    1   DCL M$RDUMP DCB;
      600     5606
      601     5607        %VLP_ATTR (FPTN=DUMP_ATTR);
      602     5621        %VLP_ACSVEH (FPTN=X,VEHICLE='FCG-M12345-0[NN]',LAST=";");
      603     5638    1   DCL GOT_ACS BIT(1) ALIGNED;
      604     5639    1   DCL FIT$ PTR;
      605     5640        %CODE10;
      606     5644
      607     5645    1   DCL GDP_ VECTOR STATIC;
      608     5646        %FPT_GDP (PAGES=1,RESULTS=GDP_);
      609     5660        %FPT_FDP (PAGES=1);
      610     5674
      611     5675        %FPT_OPEN (FPTN=FPT_OPN_DUMP,
      612     5676                  DCB=M$RDUMP,
      613     5677                  NAME=DUMP_NAME,
      614     5678                  ACCT=DUMP_ACCT,
      615     5679                  ASN=FILE,
      616     5680                  ORG=KEYED,
      617     5681                   FUN = UPDATE,
      618     5682                  SHARE=NONE,
      619     5683                  IXTNSIZE=20,
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:125  
      620     5684                  XTNSIZE=20,
      621     5685                   STCLASS = STATIC);
      622     5794        %VLP_NAME (FPTN=DUMP_NAME,
      623     5795                  LEN=31,
      624     5796                  STCLASS=STATIC);
      625     5823        %VLP_ACCT (FPTN=DUMP_ACCT,
      626     5824                  ACCT=':SYSTAC',
      627     5825                  STCLASS=CONSTANT);
      628     5838        %FPT_CLOSE (FPTN=FPT_CLS_DUMP,
      629     5839                   DCB=M$RDUMP,
      630     5840                   DISP=SAVE,
      631     5841                   RELG=YES,
      632     5842                    STCLASS = STATIC);
      633     5884        %FPT_READ (FPTN=RDDUMP,
      634     5885                  DCB=M$RDUMP,
      635     5886                  BUF=NODEDIR,
      636     5887                  KEY=DFKEY,
      637     5888                  KEYS=YES);
      638     5927        %FPT_WRITE (FPTN=WRDUMP,
      639     5928                   DCB=M$RDUMP,
      640     5929                   KEY=DFKEY);
      641     5960        %FPT_WAIT (FPTN=WAIT1,
      642     5961                   UNITS=1);
      643     5975        %FPT_SCREECH (FPTN=FPT_SCREECH,
      644     5976                      SCODE=RECOVERY_CODE,
      645     5977                      SCREECHID=DUMP_NAME,
      646     5978                      STCLASS=CONSTANT);
      647     5992
      648     5993        %EQU TBLSLOTS=16;
      649     5994    1   DCL 1 DUMPTBL(0:%TBLSLOTS) STATIC ALIGNED,
      650     5995    1         2 FEX SBIN WORD INIT(-1*0),
      651     5996    1         2 SCODE BIT(36) INIT('0'B*0);
      652     5997    1   DCL CURSLOTX SBIN STATIC INIT(-1);
      653     5998    1   DCL SLOTX UBIN;
      654     5999
      655     6000    1   DCL 1 DFKEY STATIC,
      656     6001    1         2 L UBIN BYTE CALIGNED INIT(SIZEC(DFKEY.K)),
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:126  
      657     6002    1         2 K,
      658     6003    1           3 NODE UBIN BYTE CALIGNED INIT(0),
      659     6004    1           3 TYPE UBIN BYTE CALIGNED INIT(0),
      660     6005    1           3 STYPE UBIN BYTE CALIGNED INIT(0),
      661     6006    1           3 USR# UBIN BYTE CALIGNED INIT(0),
      662     6007    1           3 PAGE# UBIN(27) CALIGNED INIT(0);
      663     6008
      664     6009        %VLP_SCODE (FPTN=RECOVERY_CODE,
      665     6010                   FCG=KF,
      666     6011                   MID=D,
      667     6012                   MON=NO,
      668     6013                   CODE=0,
      669     6014                   LDCTS=YES,
      670     6015                   CWSPT=YES,
      671     6016                   CGDATA=YES,
      672     6017                   STCLASS=STATIC);
      673     6078        %RV_NODEDIR (FPTN=NODEDIR,
      674     6079                    STCLASS=STATIC,
      675     6080                    N=10);
      676     6097    1   DCL NODEIDX UBIN STATIC;
      677     6098
      678     6099        %RV_FEP_BUFF (FPTN=RVBINFO,STCLASS="BASED(RVB$)",BITMAP=NO);
      679     6132
      680     6133        %KL_DUMPMSG (FPTN=REPLY,
      681     6134                    STCLASS=AUTO,
      682     6135                    DSIZE=1);
      683     6176
      684     6177    1   DCL FEX UBIN;
      685     6178    1   DCL RVB$ PTR;
      686     6179    1   DCL DATASIZE UBIN;
      687     6180    1   DCL PAGENO UBIN;
      688     6181
      689     6182    1   DCL B$TCB$ PTR SYMREF;
      690     6183        %F$DCB;
      691     6240        %B$TCB;
      692     6243        %B$ALT;
      693     6251        %SUB B$ALT=B$TCB$->B$TCB.ALT$->B$ALT;
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:127  
      694     6252
      695     6253        %EJECT;
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:128  
      696     6254
      697     6255    1           CALL PACK(DUMPMSG.DATASIZE,DATASIZE,2);

   6255  4 000002   000000 236000 5                  LDQ     0
         4 000003   200023 756100                    STQ     @DEST+1,,AUTO
         4 000004   200015 630500                    EPPR0   DATASIZE,,AUTO
         4 000005   200022 450500                    STP0    @SRC+1,,AUTO
         4 000006   200003 236100                    LDQ     @DUMPMSG,,AUTO
         4 000007   000002 036003                    ADLQ    2,DU
         4 000010   200021 756100                    STQ     PAGENO+3,,AUTO
         4 000011   000651 701000 4                  TSX1    PACK
         4 000012   000000 011000                    NOP     0

      698     6256    1           SLOTX=CURSLOTX;

   6256  4 000013   000266 235000 2                  LDA     CURSLOTX
         4 000014   200006 755100                    STA     SLOTX,,AUTO

      699     6257
      700     6258    2           DO CASE(DUMPMSG.TYPE);

   6258  4 000015   200003 470500                    LDP0    @DUMPMSG,,AUTO
         4 000016   000001 236100                    LDQ     1,,PR0
         4 000017   000033 772000                    QRL     27
         4 000020   000010 116007                    CMPQ    8,DL
         4 000021   000023 602006 4                  TNC     s:6258+6,QL
         4 000022   000227 710000 4                  TRA     s:6294
         4 000023   000227 710000 4                  TRA     s:6294
         4 000024   000033 710000 4                  TRA     s:6260
         4 000025   000227 710000 4                  TRA     s:6294
         4 000026   000102 710000 4                  TRA     s:6267
         4 000027   000125 710000 4                  TRA     s:6272
         4 000030   000227 710000 4                  TRA     s:6294
         4 000031   000176 710000 4                  TRA     s:6281
         4 000032   000201 710000 4                  TRA     s:6283

      701     6259    2            CASE(%GI_DUMP_RQST);
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:129  

      702     6260    2              CALL PACK(DUMPMSG.FEX,FEX,2);

   6260  4 000033   000000 236000 5                  LDQ     0
         4 000034   200023 756100                    STQ     @DEST+1,,AUTO
         4 000035   200013 631500                    EPPR1   FEX,,AUTO
         4 000036   200022 451500                    STP1    @SRC+1,,AUTO
         4 000037   200003 236100                    LDQ     @DUMPMSG,,AUTO
         4 000040   000001 036000 5                  ADLQ    1
         4 000041   200021 756100                    STQ     PAGENO+3,,AUTO
         4 000042   000651 701000 4                  TSX1    PACK
         4 000043   000000 011000                    NOP     0

      703     6261    3              CALL FINDSLOT(FEX,SLOTX) WHENRETURN DO;

   6261  4 000044   200006 630500                    EPPR0   SLOTX,,AUTO
         4 000045   200022 450500                    STP0    @SRC+1,,AUTO
         4 000046   200013 631500                    EPPR1   FEX,,AUTO
         4 000047   200021 451500                    STP1    PAGENO+3,,AUTO
         4 000050   000510 701000 4                  TSX1    FINDSLOT
         4 000051   000070 702000 4                  TSX2    s:6265

      704     6262    3                 RVB$=ADDR(DUMPMSG.DATA);

   6262  4 000052   200003 236100                    LDQ     @DUMPMSG,,AUTO
         4 000053   000003 036003                    ADLQ    3,DU
         4 000054   200014 756100                    STQ     RVB$,,AUTO

      705     6263    3                 CALL XUR$ERRCNVRT(RVBINFO.SCODE,DUMPTBL.SCODE(SLOTX));

   6263  4 000055   200006 236100                    LDQ     SLOTX,,AUTO
         4 000056   000023 736000                    QLS     19
         4 000057   000002 036000 5                  ADLQ    2
         4 000060   200033 756100                    STQ     TEMP+2,,AUTO
         4 000061   200014 236100                    LDQ     RVB$,,AUTO
         4 000062   000002 036003                    ADLQ    2,DU
         4 000063   200032 756100                    STQ     TEMP+1,,AUTO
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:130  
         4 000064   200032 630500                    EPPR0   TEMP+1,,AUTO
         4 000065   000020 631400 xsym               EPPR1   B_VECTNIL+16
         4 000066   000000 701000 xent               TSX1    XUR$ERRCNVRT
         4 000067   000000 011000                    NOP     0

      706     6264    3                 END;

      707     6265    2              IF CURSLOTX=-1 OR CURSLOTX=SLOTX THEN CALL STARTDUMP;

   6265  4 000070   000266 235000 2                  LDA     CURSLOTX
         4 000071   000027 115000 xsym               CMPA    B_VECTNIL+23
         4 000072   000077 600000 4                  TZE     s:6265+7
         4 000073   000266 236000 2                  LDQ     CURSLOTX
         4 000074   000227 604000 4                  TMI     s:6294
         4 000075   200006 116100                    CMPQ    SLOTX,,AUTO
         4 000076   000227 601000 4                  TNZ     s:6294

   6265  4 000077   000230 701000 4                  TSX1    STARTDUMP
         4 000100   000000 011000                    NOP     0
         4 000101   000227 710000 4                  TRA     s:6294

      708     6266    2            CASE(%GI_DUMP_RVBUF);

      709     6267    2              DFKEY.K.NODE=NODEIDX;

   6267  4 000102   000336 236000 2                  LDQ     NODEIDX
         4 000103   000022 736000                    QLS     18
         4 000104   000267 552020 2                  STBQ    DFKEY,'20'O

      710     6268    2              WRDUMP.BUF_=VECTOR(DUMPMSG.DATA);

   6268  4 000105   200015 236100                    LDQ     DATASIZE,,AUTO
         4 000106   000064 737000                    LLS     52
         4 000107   000140 135007                    SBLA    96,DL
         4 000110   200003 236100                    LDQ     @DUMPMSG,,AUTO
         4 000111   000003 036003                    ADLQ    3,DU
         4 000112   000206 757000 2                  STAQ    WRDUMP+4
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:131  

      711     6269    3              CALL M$WRITE(WRDUMP) WHENALTRETURN DO; END;

   6269  4 000113   000202 630400 2                  EPPR0   WRDUMP
         4 000114   440001 713400                    CLIMB   alt,write
         4 000115   401400 401760                    pmme    nvectors=4
         4 000116   000120 702000 4                  TSX2    s:6270
         4 000117   000120 710000 4                  TRA     s:6270

      712     6270    2              CALL SENDREPLY(%GI_DUMP_ACK);

   6270  4 000120   000003 236000 5                  LDQ     3
         4 000121   200023 756100                    STQ     @DEST+1,,AUTO
         4 000122   000574 701000 4                  TSX1    SENDREPLY
         4 000123   000000 011000                    NOP     0
         4 000124   000227 710000 4                  TRA     s:6294

      713     6271    2            CASE(%GI_DUMP_PAGE);

      714     6272    2              DFKEY.K.NODE=NODEIDX;

   6272  4 000125   000336 236000 2                  LDQ     NODEIDX
         4 000126   000022 736000                    QLS     18
         4 000127   000267 552020 2                  STBQ    DFKEY,'20'O

      715     6273    2              DFKEY.K.TYPE=%R_LRMEM#;

   6273  4 000130   001000 236007                    LDQ     512,DL
         4 000131   000267 552010 2                  STBQ    DFKEY,'10'O

      716     6274    2              CALL PACK(DUMPMSG.RPN,PAGENO,2);

   6274  4 000132   000000 236000 5                  LDQ     0
         4 000133   200023 756100                    STQ     @DEST+1,,AUTO
         4 000134   200016 631500                    EPPR1   PAGENO,,AUTO
         4 000135   200022 451500                    STP1    @SRC+1,,AUTO
         4 000136   200003 236100                    LDQ     @DUMPMSG,,AUTO
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:132  
         4 000137   000004 036000 5                  ADLQ    4
         4 000140   200021 756100                    STQ     PAGENO+3,,AUTO
         4 000141   000651 701000 4                  TSX1    PACK
         4 000142   000000 011000                    NOP     0

      717     6275    2              DFKEY.K.PAGE#=PAGENO;

   6275  4 000143   200016 236100                    LDQ     PAGENO,,AUTO
         4 000144   000270 552034 2                  STBQ    DFKEY+1,'34'O

      718     6276    2              CALL PACK(DUMPMSG.DATASIZE,DATASIZE,2);

   6276  4 000145   000000 236000 5                  LDQ     0
         4 000146   200023 756100                    STQ     @DEST+1,,AUTO
         4 000147   200015 630500                    EPPR0   DATASIZE,,AUTO
         4 000150   200022 450500                    STP0    @SRC+1,,AUTO
         4 000151   200003 236100                    LDQ     @DUMPMSG,,AUTO
         4 000152   000002 036003                    ADLQ    2,DU
         4 000153   200021 756100                    STQ     PAGENO+3,,AUTO
         4 000154   000651 701000 4                  TSX1    PACK
         4 000155   000000 011000                    NOP     0

      719     6277    2              WRDUMP.BUF_=VECTOR(DUMPMSG.DATA);

   6277  4 000156   200015 235100                    LDA     DATASIZE,,AUTO
         4 000157   000020 735000                    ALS     16
         4 000160   000140 135007                    SBLA    96,DL
         4 000161   200003 236100                    LDQ     @DUMPMSG,,AUTO
         4 000162   000003 036003                    ADLQ    3,DU
         4 000163   000206 757000 2                  STAQ    WRDUMP+4

      720     6278    3              CALL M$WRITE(WRDUMP) WHENALTRETURN DO; END;

   6278  4 000164   000202 630400 2                  EPPR0   WRDUMP
         4 000165   440001 713400                    CLIMB   alt,write
         4 000166   401400 401760                    pmme    nvectors=4
         4 000167   000171 702000 4                  TSX2    s:6279
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:133  
         4 000170   000171 710000 4                  TRA     s:6279

      721     6279    2              CALL SENDREPLY(%GI_DUMP_ACK);

   6279  4 000171   000003 236000 5                  LDQ     3
         4 000172   200023 756100                    STQ     @DEST+1,,AUTO
         4 000173   000574 701000 4                  TSX1    SENDREPLY
         4 000174   000000 011000                    NOP     0
         4 000175   000227 710000 4                  TRA     s:6294

      722     6280    2            CASE(%GI_DUMP_EOD);

      723     6281    2              CALL STARTDUMP;

   6281  4 000176   000230 701000 4                  TSX1    STARTDUMP
         4 000177   000000 011000                    NOP     0
         4 000200   000227 710000 4                  TRA     s:6294

      724     6282    2            CASE(%GI_DUMP_ABORT);

      725     6283    2              FEX=DUMPMSG.FEX;

   6283  4 000201   000001 236100                    LDQ     1,,PR0
         4 000202   777777 376007                    ANQ     -1,DL
         4 000203   200013 756100                    STQ     FEX,,AUTO

      726     6284    3              CALL FINDSLOT(FEX,SLOTX) WHENRETURN DO;

   6284  4 000204   200006 631500                    EPPR1   SLOTX,,AUTO
         4 000205   200022 451500                    STP1    @SRC+1,,AUTO
         4 000206   200013 633500                    EPPR3   FEX,,AUTO
         4 000207   200021 453500                    STP3    PAGENO+3,,AUTO
         4 000210   000510 701000 4                  TSX1    FINDSLOT
         4 000211   000226 702000 4                  TSX2    s:6291

      727     6285    3                 DUMPTBL.FEX(SLOTX)=-1;

PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:134  
   6285  4 000212   200006 235100                    LDA     SLOTX,,AUTO
         4 000213   000001 735000                    ALS     1
         4 000214   000001 336007                    LCQ     1,DL
         4 000215   000224 756005 2                  STQ     DUMPTBL,AL

      728     6286    4                 IF SLOTX=CURSLOTX THEN DO;

   6286  4 000216   200006 236100                    LDQ     SLOTX,,AUTO
         4 000217   000226 604000 4                  TMI     s:6291
         4 000220   000266 116000 2                  CMPQ    CURSLOTX
         4 000221   000226 601000 4                  TNZ     s:6291

      729     6287    4                    CURSLOTX=-1;

   6287  4 000222   000001 335007                    LCA     1,DL
         4 000223   000266 755000 2                  STA     CURSLOTX

      730     6288    4                    CALL STARTDUMP;

   6288  4 000224   000230 701000 4                  TSX1    STARTDUMP
         4 000225   000000 011000                    NOP     0

      731     6289    4                    END;

      732     6290    3                 END;

      733     6291    2              RETURN;

   6291  4 000226   000000 702200 xent               TSX2  ! X66_ARET

      734     6292    2            END;

      735     6293
      736     6294    1           RETURN;

   6294  4 000227   000000 702200 xent               TSX2  ! X66_ARET

PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:135  
      737     6295
      738     6296        %EJECT;
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:136  
      739     6297
      740     6298    1   STARTDUMP: PROC;

   6298  4 000230   200020 741300       STARTDUMP    STX1  ! PAGENO+2,,AUTO

      741     6299
      742     6300    2   DCL I UBIN;
      743     6301
      744     6302    3           IF DCBADDR(DCBNUM(M$RDUMP))->F$DCB.FCD# THEN DO;

   6302  4 000231   000000 236007 xsym               LDQ     M$RDUMP,DL
         4 000232   000005 470400 5                  LDP0    5
         4 000233   000000 471500                    LDP1    0,,PR0
         4 000234   100000 473506                    LDP3    0,QL,PR1
         4 000235   300031 236100                    LDQ     25,,PR3
         4 000236   020000 316007                    CANQ    8192,DL
         4 000237   000260 600000 4                  TZE     s:6313

      745     6303    4              IF GOT_ACS THEN DO;

   6303  4 000240   200004 234100                    SZN     GOT_ACS,,AUTO
         4 000241   000247 605000 4                  TPL     s:6308

      746     6304    4                 FPT_CLS_DUMP.ACSVEH_ = VECTOR(DUMP_ATTR);

   6304  4 000242   000006 237000 5                  LDAQ    6
         4 000243   000142 757000 2                  STAQ    FPT_CLS_DUMP+12

      747     6305    4                 FPT_CLS_DUMP.V.OPER.CHGATT# = '1'B;

   6305  4 000244   400000 236007                    LDQ     -131072,DL
         4 000245   000160 256000 2                  ORSQ    FPT_CLS_DUMP+26

      748     6306    4                 END;

   6306  4 000246   000253 710000 4                  TRA     s:6311

PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:137  
      749     6307    4              ELSE DO;

      750     6308    4                 FPT_CLS_DUMP.ACSVEH_ = VECTOR(NIL);

   6308  4 000247   000010 237000 5                  LDAQ    8
         4 000250   000142 757000 2                  STAQ    FPT_CLS_DUMP+12

      751     6309    4                 FPT_CLS_DUMP.V.OPER.CHGATT# = '0'B;

   6309  4 000251   000012 236000 5                  LDQ     10
         4 000252   000160 356000 2                  ANSQ    FPT_CLS_DUMP+26

      752     6310    4                 END;

      753     6311    4              CALL M$CLOSE (FPT_CLS_DUMP) WHENALTRETURN DO; END;

   6311  4 000253   000126 630400 2                  EPPR0   FPT_CLS_DUMP
         4 000254   450001 713400                    CLIMB   alt,close
         4 000255   406000 401760                    pmme    nvectors=13
         4 000256   000260 702000 4                  TSX2    s:6313
         4 000257   000260 710000 4                  TRA     s:6313

      754     6312    3              END;

      755     6313    3           IF CURSLOTX~=-1 THEN DO;

   6313  4 000260   000266 235000 2                  LDA     CURSLOTX
         4 000261   000027 115000 xsym               CMPA    B_VECTNIL+23
         4 000262   000267 600000 4                  TZE     s:6318

      756     6314    3              DUMPTBL.FEX(CURSLOTX)=-1;

   6314  4 000263   000001 735000                    ALS     1
         4 000264   000001 336007                    LCQ     1,DL
         4 000265   000224 756005 2                  STQ     DUMPTBL,AL

      757     6315    3              CURSLOTX=-1;
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:138  

   6315  4 000266   000266 756000 2                  STQ     CURSLOTX

      758     6316    3              END;

      759     6317
      760     6318    3           DO I=0 TO %TBLSLOTS;

   6318  4 000267   200021 450100                    STZ     I,,AUTO

      761     6319    3              IF DUMPTBL.FEX(I)~=-1 THEN EXIT;

   6319  4 000270   200021 235100                    LDA     I,,AUTO
         4 000271   000001 735000                    ALS     1
         4 000272   000224 235005 2                  LDA     DUMPTBL,AL
         4 000273   000027 115000 xsym               CMPA    B_VECTNIL+23
         4 000274   000302 601000 4                  TNZ     s:6321

      762     6320    3              END;

   6320  4 000275   200021 235100                    LDA     I,,AUTO
         4 000276   000001 035007                    ADLA    1,DL
         4 000277   200021 755100                    STA     I,,AUTO
         4 000300   000021 115007                    CMPA    17,DL
         4 000301   000270 602000 4                  TNC     s:6319

      763     6321    3           IF I<=%TBLSLOTS THEN DO;

   6321  4 000302   200021 235100                    LDA     I,,AUTO
         4 000303   000021 115007                    CMPA    17,DL
         4 000304   000506 603000 4                  TRC     s:6363

      764     6322    3              CURSLOTX=I;

   6322  4 000305   000266 755000 2                  STA     CURSLOTX

      765     6323    3              CALL SETCODE(DUMPTBL.SCODE(I),RECOVERY_CODE);
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:139  

   6323  4 000306   000013 236000 5                  LDQ     11
         4 000307   200024 756100                    STQ     @BYTES+1,,AUTO
         4 000310   200021 236100                    LDQ     I,,AUTO
         4 000311   000023 736000                    QLS     19
         4 000312   000002 036000 5                  ADLQ    2
         4 000313   200023 756100                    STQ     @DEST+1,,AUTO
         4 000314   000562 701000 4                  TSX1    SETCODE
         4 000315   000000 011000                    NOP     0

      766     6324    3              CALL M$SCREECH(FPT_SCREECH);

   6324  4 000316   000002 630400 3                  EPPR0   FPT_SCREECH
         4 000317   000013 713400                    CLIMB   11
         4 000320   401000 401760                    pmme    nvectors=3

      767     6325    3              CALL KFD$LOGSCREECH(RECOVERY_CODE,DUMPTBL.FEX(I),DUMP_NAME);

   6325  4 000321   000014 236000 5                  LDQ     12
         4 000322   200034 756100                    STQ     TEMP+3,,AUTO
         4 000323   200021 236100                    LDQ     I,,AUTO
         4 000324   000023 736000                    QLS     19
         4 000325   000015 036000 5                  ADLQ    13
         4 000326   000013 235000 5                  LDA     11
         4 000327   200032 757100                    STAQ    TEMP+1,,AUTO
         4 000330   200032 630500                    EPPR0   TEMP+1,,AUTO
         4 000331   000021 631400 xsym               EPPR1   B_VECTNIL+17
         4 000332   000000 701000 xent               TSX1    KFD$LOGSCREECH
         4 000333   000000 011000                    NOP     0

      768     6326    3              CALL M$GDP (FPT_GDP);

   6326  4 000334   000010 630400 2                  EPPR0   FPT_GDP
         4 000335   030003 713400                    CLIMB   12291
         4 000336   400400 401760                    pmme    nvectors=2

      769     6327    3              FPT_OPN_DUMP.FPARAM_ = GDP_;
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:140  

   6327  4 000337   000006 237000 2                  LDAQ    GDP_
         4 000340   000054 757000 2                  STAQ    FPT_OPN_DUMP+24

      770     6328    4              CALL M$OPEN(FPT_OPN_DUMP) WHENALTRETURN DO;

   6328  4 000341   000024 630400 2                  EPPR0   FPT_OPN_DUMP
         4 000342   450000 713400                    CLIMB   alt,open
         4 000343   410400 401760                    pmme    nvectors=18
         4 000344   000346 702000 4                  TSX2    s:6329
         4 000345   000376 710000 4                  TRA     s:6340

      771     6329    5                 IF B$ALT.ERR.CODE=%E$FILEBUSY OR B$ALT.ERR.CODE=%E$NOFILE THEN DO;

   6329  4 000346   000000 470400 xsym               LDP0    B$TCB$
         4 000347   000000 471500                    LDP1    0,,PR0
         4 000350   100102 236100                    LDQ     66,,PR1
         4 000351   377770 376007                    ANQ     131064,DL
         4 000352   001550 116007                    CMPQ    872,DL
         4 000353   000356 600000 4                  TZE     s:6330
         4 000354   001610 116007                    CMPQ    904,DL
         4 000355   000366 601000 4                  TNZ     s:6335

      772     6330    5                    CALL M$SENV;

   6330  4 000356   010011 713400                    CLIMB   4105
         4 000357   000000 401760                    pmme    nvectors=0

      773     6331    5                    CALL M$WAIT(WAIT1);

   6331  4 000360   000216 630400 2                  EPPR0   WAIT1
         4 000361   020006 713400                    CLIMB   8198
         4 000362   400400 401760                    pmme    nvectors=2

      774     6332    5                    CALL M$RETRYS;

   6332  4 000363   010015 713400                    CLIMB   4109
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:141  
         4 000364   000000 401760                    pmme    nvectors=0

      775     6333    5                    END;

   6333  4 000365   000376 710000 4                  TRA     s:6340

      776     6334    5                 ELSE DO;

      777     6335    5                    CURSLOTX=-1;

   6335  4 000366   000001 335007                    LCA     1,DL
         4 000367   000266 755000 2                  STA     CURSLOTX

      778     6336    5                    DUMPTBL.FEX(I)=-1;

   6336  4 000370   200021 235100                    LDA     I,,AUTO
         4 000371   000001 735000                    ALS     1
         4 000372   000001 336007                    LCQ     1,DL
         4 000373   000224 756005 2                  STQ     DUMPTBL,AL

      779     6337    5                    RETURN;

   6337  4 000374   200020 221300                    LDX1  ! PAGENO+2,,AUTO
         4 000375   000001 702211                    TSX2  ! 1,X1

      780     6338    5                    END;
      781     6339    4                 END;
      782     6340    3              GOT_ACS = '0'B;

   6340  4 000376   200004 450100                    STZ     GOT_ACS,,AUTO

      783     6341    3              FIT$ = VBASE(GDP_);

   6341  4 000377   000007 236000 2                  LDQ     GDP_+1
         4 000400   200005 756100                    STQ     FIT$,,AUTO

      784     6342    4              CALL XSF$LOCCODT (FIT$,10) WHENRETURN DO;
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:142  

   6342  4 000401   000016 236000 5                  LDQ     14
         4 000402   200033 756100                    STQ     TEMP+2,,AUTO
         4 000403   200005 630500                    EPPR0   FIT$,,AUTO
         4 000404   200032 450500                    STP0    TEMP+1,,AUTO
         4 000405   200032 630500                    EPPR0   TEMP+1,,AUTO
         4 000406   000020 631400 xsym               EPPR1   B_VECTNIL+16
         4 000407   000000 701000 xent               TSX1    XSF$LOCCODT
         4 000410   000423 702000 4                  TSX2    s:6346

      785     6343    4                 DUMP_ATTR.Q.X.VEHICLE# = FIT$->CODE10.ACSVEH.T;

   6343  4 000411   200005 470500                    LDP0    FIT$,,AUTO
         4 000412   000100 101500                    MRL     fill='000'O
         4 000413   000000 400001                    ADSC9   0,,PR0                   cn=2,n=1
         4 000414   200032 000002                    ADSC9   TEMP+1,,AUTO             cn=0,n=2
         4 000415   200032 220100                    LDX0    TEMP+1,,AUTO
         4 000416   040000 100540                    MLR     fill='040'O
         4 000417   000000 600010                    ADSC9   0,,PR0                   cn=3,n=*X0
         4 000420   000001 600020 2                  ADSC9   DUMP_ATTR+1              cn=3,n=16

      786     6344    4                 GOT_ACS = '1'B;

   6344  4 000421   400000 236003                    LDQ     -131072,DU
         4 000422   200004 756100                    STQ     GOT_ACS,,AUTO

      787     6345    4                 END;

      788     6346    3              SUBSTR(DUMP_ATTR.Q.X.VEHICLE#,12,1)='(';

   6346  4 000423   000050 236007                    LDQ     40,DL
         4 000424   000004 552004 2                  STBQ    DUMP_ATTR+4,'04'O

      789     6347    3              SUBSTR(DUMP_ATTR.Q.X.VEHICLE#,15,1)=')';

   6347  4 000425   051000 236007                    LDQ     20992,DL
         4 000426   000005 552010 2                  STBQ    DUMP_ATTR+5,'10'O
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:143  

      790     6348    3              CALL BINCHAR(SUBSTR(DUMP_ATTR.Q.X.VEHICLE#,13,2), DUMPTBL.FEX(I));

   6348  4 000427   200021 235100                    LDA     I,,AUTO
         4 000430   000003 735000                    ALS     3
         4 000431   000000 301405                    BTD
         4 000432   000224 000004 2                  NDSC9   DUMPTBL,A                cn=0,s=lsgnf,sf=0,n=4
         4 000433   000005 030002 2                  NDSC9   DUMP_ATTR+5              cn=0,s=nosgn,sf=0,n=2

      791     6349    3              CALL M$FDP (FPT_FDP);

   6349  4 000434   000016 630400 2                  EPPR0   FPT_FDP
         4 000435   030004 713400                    CLIMB   12292
         4 000436   400400 401760                    pmme    nvectors=2

      792     6350
      793     6351    3              DFKEY.K='0'B;

   6351  4 000437   000000 100400                    MLR     fill='000'O
         4 000440   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         4 000441   000267 200007 2                  ADSC9   DFKEY                    cn=1,n=7

      794     6352    3              NODEDIR.N=1;                 /* Just to initit in case read fails */

   6352  4 000442   000001 235007                    LDA     1,DL
         4 000443   000274 755000 2                  STA     NODEDIR

      795     6353    4              CALL M$READ (RDDUMP) WHENALTRETURN DO; END;

   6353  4 000444   000164 630400 2                  EPPR0   RDDUMP
         4 000445   440000 713400                    CLIMB   alt,read
         4 000446   401400 401760                    pmme    nvectors=4
         4 000447   000451 702000 4                  TSX2    s:6354
         4 000450   000451 710000 4                  TRA     s:6354

      796     6354    3              NODEDIR.N = NODEDIR.N + 1;

PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:144  
   6354  4 000451   000274 235000 2                  LDA     NODEDIR
         4 000452   000001 035007                    ADLA    1,DL
         4 000453   000274 755000 2                  STA     NODEDIR

      797     6355    3              NODEIDX = NODEDIR.N;

   6355  4 000454   000336 755000 2                  STA     NODEIDX

      798     6356    3              CALL BINCHAR(NODEDIR.NODE.NODENAME(NODEIDX),DUMPTBL.FEX(CURSLOTX));

   6356  4 000455   000336 236000 2                  LDQ     NODEIDX
         4 000456   000014 402007                    MPY     12,DL
         4 000457   000266 235000 2                  LDA     CURSLOTX
         4 000460   000003 735000                    ALS     3
         4 000461   000006 301405                    BTD
         4 000462   000224 000004 2                  NDSC9   DUMPTBL,A                cn=0,s=lsgnf,sf=0,n=4
         4 000463   000275 030010 2                  NDSC9   NODEDIR+1,Q              cn=0,s=nosgn,sf=0,n=8

      799     6357    3              NODEDIR.NODE.TYPE(NODEIDX)=%R_FEPNODE#;

   6357  4 000464   000336 236000 2                  LDQ     NODEIDX
         4 000465   000003 402007                    MPY     3,DL
         4 000466   000000 620006                    EAX0    0,QL
         4 000467   000277 236006 2                  LDQ     NODEDIR+3,QL
         4 000470   000032 376000 xsym               ANQ     B_VECTNIL+26
         4 000471   002000 276003                    ORQ     1024,DU
         4 000472   000277 756010 2                  STQ     NODEDIR+3,X0

      800     6358    3              WRDUMP.BUF_=VECTOR(NODEDIR);

   6358  4 000473   000020 237000 5                  LDAQ    16
         4 000474   000206 757000 2                  STAQ    WRDUMP+4

      801     6359    4              CALL M$WRITE(WRDUMP) WHENALTRETURN DO; END;

   6359  4 000475   000202 630400 2                  EPPR0   WRDUMP
         4 000476   440001 713400                    CLIMB   alt,write
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:145  
         4 000477   401400 401760                    pmme    nvectors=4
         4 000500   000502 702000 4                  TSX2    s:6360
         4 000501   000502 710000 4                  TRA     s:6360

      802     6360    3              CALL SENDREPLY(%GI_DUMP_GRANT);

   6360  4 000502   000000 236000 5                  LDQ     0
         4 000503   200023 756100                    STQ     @DEST+1,,AUTO
         4 000504   000574 701000 4                  TSX1    SENDREPLY
         4 000505   000000 011000                    NOP     0

      803     6361    3              END;

      804     6362
      805     6363    2           RETURN;

   6363  4 000506   200020 221300                    LDX1  ! PAGENO+2,,AUTO
         4 000507   000001 702211                    TSX2  ! 1,X1

      806     6364
      807     6365    2   END STARTDUMP;
      808     6366
      809     6367        %EJECT;
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:146  
      810     6368
      811     6369    1   FINDSLOT: PROC(FEX,SLOTX) ALTRET;

   6369  4 000510   200020 741300       FINDSLOT     STX1  ! PAGENO+2,,AUTO

      812     6370
      813     6371    2   DCL FEX UBIN;
      814     6372    2   DCL SLOTX UBIN;
      815     6373    2   DCL X SBIN;
      816     6374
      817     6375    3           DO X=0 TO %TBLSLOTS;

   6375  4 000511   200023 450100                    STZ     X,,AUTO

      818     6376    4              IF DUMPTBL.FEX(X)=FEX THEN DO;

   6376  4 000512   200021 470500                    LDP0    @FEX,,AUTO
         4 000513   200023 235100                    LDA     X,,AUTO
         4 000514   000001 735000                    ALS     1
         4 000515   000224 236005 2                  LDQ     DUMPTBL,AL
         4 000516   000526 604000 4                  TMI     s:6380
         4 000517   000000 116100                    CMPQ    0,,PR0
         4 000520   000526 601000 4                  TNZ     s:6380

      819     6377    4                 SLOTX=X;

   6377  4 000521   200023 235100                    LDA     X,,AUTO
         4 000522   200022 471500                    LDP1    @SLOTX,,AUTO
         4 000523   100000 755100                    STA     0,,PR1

      820     6378    4                 RETURN;

   6378  4 000524   200020 221300                    LDX1  ! PAGENO+2,,AUTO
         4 000525   000001 702211                    TSX2  ! 1,X1

      821     6379    4                 END;
      822     6380    3              END;
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:147  

   6380  4 000526   200023 054100                    AOS     X,,AUTO
         4 000527   200023 235100                    LDA     X,,AUTO
         4 000530   000020 115007                    CMPA    16,DL
         4 000531   000512 604400 4                  TMOZ    s:6376

      823     6381    3           DO X=0 TO %TBLSLOTS;

   6381  4 000532   200023 450100                    STZ     X,,AUTO

      824     6382    4              IF DUMPTBL.FEX(X)=-1 THEN DO;

   6382  4 000533   200023 235100                    LDA     X,,AUTO
         4 000534   000001 735000                    ALS     1
         4 000535   000224 235005 2                  LDA     DUMPTBL,AL
         4 000536   000027 115000 xsym               CMPA    B_VECTNIL+23
         4 000537   000554 601000 4                  TNZ     s:6388

      825     6383    4                 DUMPTBL.FEX(X)=FEX;

   6383  4 000540   200023 235100                    LDA     X,,AUTO
         4 000541   000001 735000                    ALS     1
         4 000542   200021 470500                    LDP0    @FEX,,AUTO
         4 000543   000000 620005                    EAX0    0,AL
         4 000544   000000 235100                    LDA     0,,PR0
         4 000545   000224 755010 2                  STA     DUMPTBL,X0

      826     6384    4                 DUMPTBL.SCODE(X)='0'B;

   6384  4 000546   000225 450010 2                  STZ     DUMPTBL+1,X0

      827     6385    4                 SLOTX=X;

   6385  4 000547   200023 235100                    LDA     X,,AUTO
         4 000550   200022 471500                    LDP1    @SLOTX,,AUTO
         4 000551   100000 755100                    STA     0,,PR1

PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:148  
      828     6386    4                 RETURN;

   6386  4 000552   200020 221300                    LDX1  ! PAGENO+2,,AUTO
         4 000553   000001 702211                    TSX2  ! 1,X1

      829     6387    4                 END;
      830     6388    3              END;

   6388  4 000554   200023 054100                    AOS     X,,AUTO
         4 000555   200023 235100                    LDA     X,,AUTO
         4 000556   000020 115007                    CMPA    16,DL
         4 000557   000533 604400 4                  TMOZ    s:6382

      831     6389    2           ALTRETURN;

   6389  4 000560   200020 221300                    LDX1  ! PAGENO+2,,AUTO
         4 000561   000000 702211                    TSX2  ! 0,X1

      832     6390
      833     6391    2   END FINDSLOT;
      834     6392
      835     6393        %EJECT;
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:149  
      836     6394
      837     6395    1   SETCODE: PROC(SRC,DEST);

   6395  4 000562   200022 741300       SETCODE      STX1  ! @SLOTX,,AUTO

      838     6396
      839     6397        %VLP_ERRCODE (FPTN=SRC,STCLASS=PARAM);
      840     6442        %VLP_ERRCODE (FPTN=DEST,STCLASS=PARAM);
      841     6487
      842     6488    2           DEST=SRC;

   6488  4 000563   200023 470500                    LDP0    @SRC,,AUTO
         4 000564   000000 236100                    LDQ     0,,PR0
         4 000565   200024 471500                    LDP1    @DEST,,AUTO
         4 000566   100000 756100                    STQ     0,,PR1

      843     6489    2           DEST.SEV=%SEV_FESNAP#;

   6489  4 000567   000022 376000 5                  ANQ     18
         4 000570   000003 276007                    ORQ     3,DL
         4 000571   100000 756100                    STQ     0,,PR1

      844     6490
      845     6491    2           RETURN;

   6491  4 000572   200022 221300                    LDX1  ! @SLOTX,,AUTO
         4 000573   000001 702211                    TSX2  ! 1,X1

      846     6492
      847     6493    2   END SETCODE;
      848     6494
      849     6495        %EJECT;
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:150  
      850     6496
      851     6497    1   SENDREPLY: PROC(TYPECODE);

   6497  4 000574   200022 741300       SENDREPLY    STX1  ! @SLOTX,,AUTO

      852     6498
      853     6499    2   DCL TYPECODE UBIN;
      854     6500
      855     6501    2           REPLY.TYPE=TYPECODE;

   6501  4 000575   200023 470500                    LDP0    @TYPECODE,,AUTO
         4 000576   000000 236100                    LDQ     0,,PR0
         4 000577   000033 736000                    QLS     27
         4 000600   200010 552140                    STBQ    REPLY+1,'40'O,AUTO

      856     6502    2           CALL UNPACK(DUMPTBL.FEX(SLOTX),REPLY.FEX,2);

   6502  4 000601   000000 236000 5                  LDQ     0
         4 000602   200027 756100                    STQ     @DEST+1,,AUTO
         4 000603   200032 452500                    STP2    TEMP+1,,AUTO
         4 000604   200032 236100                    LDQ     TEMP+1,,AUTO
         4 000605   000023 036000 5                  ADLQ    19
         4 000606   200026 756100                    STQ     @SRC+1,,AUTO
         4 000607   200006 236100                    LDQ     SLOTX,,AUTO
         4 000610   000023 736000                    QLS     19
         4 000611   000015 036000 5                  ADLQ    13
         4 000612   200025 756100                    STQ     I+1,,AUTO
         4 000613   000700 701000 4                  TSX1    UNPACK
         4 000614   000000 011000                    NOP     0

      857     6503    2           CALL UNPACK(1,REPLY.DATASIZE,2);

   6503  4 000615   000000 236000 5                  LDQ     0
         4 000616   200027 756100                    STQ     @DEST+1,,AUTO
         4 000617   200011 630500                    EPPR0   REPLY+2,,AUTO
         4 000620   200026 450500                    STP0    @SRC+1,,AUTO
         4 000621   000024 236000 5                  LDQ     20
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:151  
         4 000622   200025 756100                    STQ     I+1,,AUTO
         4 000623   000700 701000 4                  TSX1    UNPACK
         4 000624   000000 011000                    NOP     0

      858     6504    2           CALL UNPACK(PAGENO,REPLY.RPN,2);

   6504  4 000625   000000 236000 5                  LDQ     0
         4 000626   200027 756100                    STQ     @DEST+1,,AUTO
         4 000627   200032 452500                    STP2    TEMP+1,,AUTO
         4 000630   200032 236100                    LDQ     TEMP+1,,AUTO
         4 000631   000025 036000 5                  ADLQ    21
         4 000632   200026 756100                    STQ     @SRC+1,,AUTO
         4 000633   200016 630500                    EPPR0   PAGENO,,AUTO
         4 000634   200025 450500                    STP0    I+1,,AUTO
         4 000635   000700 701000 4                  TSX1    UNPACK
         4 000636   000000 011000                    NOP     0

      859     6505    2           CALL KFD$WRT_NA(REPLY,1);

   6505  4 000637   000024 236000 5                  LDQ     20
         4 000640   200033 756100                    STQ     TEMP+2,,AUTO
         4 000641   200007 630500                    EPPR0   REPLY,,AUTO
         4 000642   200032 450500                    STP0    TEMP+1,,AUTO
         4 000643   200032 630500                    EPPR0   TEMP+1,,AUTO
         4 000644   000020 631400 xsym               EPPR1   B_VECTNIL+16
         4 000645   000000 701000 xent               TSX1    KFD$WRT_NA
         4 000646   000000 011000                    NOP     0

      860     6506    2           RETURN;

   6506  4 000647   200022 221300                    LDX1  ! @SLOTX,,AUTO
         4 000650   000001 702211                    TSX2  ! 1,X1

      861     6507
      862     6508    2   END SENDREPLY;
      863     6509
      864     6510    1   PACK:   PROC(SRC,DEST,BYTES);
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:152  

   6510  4 000651   200020 741300       PACK         STX1  ! PAGENO+2,,AUTO

      865     6511
      866     6512    2   DCL SRC(0:4) UBIN BYTE CALIGNED;
      867     6513    2   DCL DEST UBIN;
      868     6514    2   DCL BYTES UBIN;
      869     6515    2   DCL I SBIN;
      870     6516
      871     6517    2           DEST=0;

   6517  4 000652   200022 470500                    LDP0    @DEST,,AUTO
         4 000653   000000 450100                    STZ     0,,PR0

      872     6518    3           DO I=0 TO BYTES-1;

   6518  4 000654   200024 450100                    STZ     I,,AUTO
         4 000655   000671 710000 4                  TRA     s:6520+1

      873     6519    3              DEST=DEST*256+SRC(I);

   6519  4 000656   200021 470500                    LDP0    @SRC,,AUTO
         4 000657   200024 235100                    LDA     I,,AUTO
         4 000660   000100 101505                    MRL     fill='000'O
         4 000661   000000 000001                    ADSC9   0,A,PR0                  cn=0,n=1
         4 000662   200032 000004                    ADSC9   TEMP+1,,AUTO             cn=0,n=4
         4 000663   200022 471500                    LDP1    @DEST,,AUTO
         4 000664   100000 236100                    LDQ     0,,PR1
         4 000665   000010 736000                    QLS     8
         4 000666   200032 036100                    ADLQ    TEMP+1,,AUTO
         4 000667   100000 756100                    STQ     0,,PR1

      874     6520    3              END;

   6520  4 000670   200024 054100                    AOS     I,,AUTO
         4 000671   200023 470500                    LDP0    @BYTES,,AUTO
         4 000672   200024 236100                    LDQ     I,,AUTO
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:153  
         4 000673   000656 604000 4                  TMI     s:6519
         4 000674   000000 116100                    CMPQ    0,,PR0
         4 000675   000656 602000 4                  TNC     s:6519

      875     6521    2           RETURN;

   6521  4 000676   200020 221300                    LDX1  ! PAGENO+2,,AUTO
         4 000677   000001 702211                    TSX2  ! 1,X1

      876     6522
      877     6523    2   END PACK;
      878     6524
      879     6525    1   UNPACK: PROC(SRC,DEST,BYTES);

   6525  4 000700   200024 741300       UNPACK       STX1  ! I,,AUTO

      880     6526
      881     6527    2   DCL SRC UBIN;
      882     6528    2   DCL DEST(0:3) UBIN BYTE CALIGNED;
      883     6529    2   DCL BYTES UBIN;
      884     6530    2   DCL I SBIN;
      885     6531    2   DCL TEMP UBIN;
      886     6532
      887     6533    2           TEMP=SRC;

   6533  4 000701   200025 470500                    LDP0    @SRC,,AUTO
         4 000702   000000 235100                    LDA     0,,PR0
         4 000703   200031 755100                    STA     TEMP,,AUTO

      888     6534    3           DO I=BYTES-1 DOWNTO 0;

   6534  4 000704   200027 471500                    LDP1    @BYTES,,AUTO
         4 000705   100000 235100                    LDA     0,,PR1
         4 000706   000001 135007                    SBLA    1,DL
         4 000707   200030 755100                    STA     I,,AUTO
         4 000710   000726 710000 4                  TRA     s:6537+2

PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:154  
      889     6535    3              DEST(I)=MOD(TEMP,256);

   6535  4 000711   200031 236100                    LDQ     TEMP,,AUTO
         4 000712   000377 376007                    ANQ     255,DL
         4 000713   200032 756100                    STQ     TEMP+1,,AUTO
         4 000714   200026 470500                    LDP0    @DEST,,AUTO
         4 000715   200030 235100                    LDA     I,,AUTO
         4 000716   000105 101500                    MRL     fill='000'O
         4 000717   200032 000004                    ADSC9   TEMP+1,,AUTO             cn=0,n=4
         4 000720   000000 000001                    ADSC9   0,A,PR0                  cn=0,n=1

      890     6536    3              TEMP=TEMP/256;

   6536  4 000721   200031 236100                    LDQ     TEMP,,AUTO
         4 000722   000010 772000                    QRL     8
         4 000723   200031 756100                    STQ     TEMP,,AUTO

      891     6537    3              END;

   6537  4 000724   000001 336007                    LCQ     1,DL
         4 000725   200030 056100                    ASQ     I,,AUTO
         4 000726   200030 235100                    LDA     I,,AUTO
         4 000727   000711 605000 4                  TPL     s:6535

      892     6538    2           RETURN;

   6538  4 000730   200024 221300                    LDX1  ! I,,AUTO
         4 000731   000001 702211                    TSX2  ! 1,X1
      893     6539
      894     6540    2   END UNPACK;
      895     6541
      896     6542    1   END KFD$DUMPMSG;
      897     6543        %EOD;

PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:155  
--  Include file information  --

   FM$FIT.:E05TOU  is referenced.
   IR_DATA_M.:E05TOU  is referenced.
   KL_MACRO_C.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure KFD$DUMPMSG.
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:156  

 **** Variables and constants ****

  ****  Section 002  Data  KFD$DUMPMSG

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

   266-0-0/w SBIN        r     1 CURSLOTX                 267-0-0/c STRC(72)    r     1 DFKEY
   224-0-0/w STRC(72)    r     1 DUMPTBL(0:16)              0-0-0/w STRC(207)   r     1 DUMP_ATTR
   116-0-0/c STRC(288)   r     1 DUMP_NAME                126-0-0/d STRC(1080)  r     1 FPT_CLS_DUMP
    16-0-0/d STRC(216)   r     1 FPT_FDP                   10-0-0/d STRC(216)   r     1 FPT_GDP
    24-0-0/d STRC(2088)  r     1 FPT_OPN_DUMP               6-0-0/d VECT        r     1 GDP_
   274-0-0/w STRC(1224)  r     1 NODEDIR                  336-0-0/w UBIN        r     1 NODEIDX
   164-0-0/d STRC(504)   r     1 RDDUMP                   272-0-0/d STRC(72)    r     1 RECOVERY_CODE
   216-0-0/d STRC(216)   r     1 WAIT1                    202-0-0/d STRC(432)   r     1 WRDUMP

  ****  Section 003 RoData KFD$DUMPMSG

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(72)    r     1 DUMP_ACCT                  2-0-0/d STRC(216)   r     1 FPT_SCREECH

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    23-0-0/w PTR         r     1 @BYTES                    27-0-0/w PTR         r     1 @BYTES
    24-0-0/w PTR         r     1 @DEST                     22-0-0/w PTR         r     1 @DEST
    26-0-0/w PTR         r     1 @DEST                      3-0-0/w PTR         r     1 @DUMPMSG
    21-0-0/w PTR         r     1 @FEX                      22-0-0/w PTR         r     1 @SLOTX
    23-0-0/w PTR         r     1 @SRC                      21-0-0/w PTR         r     1 @SRC
    25-0-0/w PTR         r     1 @SRC                      23-0-0/w PTR         r     1 @TYPECODE
    *0-0-0/w UBIN        r     1 BYTES                     *0-0-0/w UBIN        r     1 BYTES
    15-0-0/w UBIN        r     1 DATASIZE                  *0-0-0/w STRC        r     1 DEST
    *0-0-0/w UBIN        r     1 DEST                      *0-0-0/c UBIN(9)     r     1 DEST(0:3)
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:157  
    *0-0-0/w ASTR(108)   r     1 DUMPMSG                   13-0-0/w UBIN        r     1 FEX
    *0-0-0/w UBIN        r     1 FEX                        5-0-0/w PTR         r     1 FIT$
     4-0-0/w BIT         r     1 GOT_ACS                   21-0-0/w UBIN        r     1 I
    24-0-0/w SBIN        r     1 I                         30-0-0/w SBIN        r     1 I
    16-0-0/w UBIN        r     1 PAGENO                     7-0-0/w STRC(117)   r     1 REPLY
    14-0-0/w PTR         r     1 RVB$                       6-0-0/w UBIN        r     1 SLOTX
    *0-0-0/w UBIN        r     1 SLOTX                     *0-0-0/w STRC        r     1 SRC
    *0-0-0/c UBIN(9)     r     1 SRC(0:4)                  *0-0-0/w UBIN        r     1 SRC
    31-0-0/w UBIN        r     1 TEMP                      *0-0-0/w UBIN        r     1 TYPECODE
    23-0-0/w SBIN        r     1 X

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$TCB$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/w STRC(144)   r     1 B$TCB
     0-0-0/c ASTR(27)    r     1 CODE10                     0-0-0/d ASTR(3528)  r     1 F$DCB
     0-0-0N  NULL        r     1 M$RDUMP                    0-0-0/w STRC(216)   r     1 RVBINFO


   Procedure KFD$DUMPMSG requires 474 words for executable code.
   Procedure KFD$DUMPMSG requires 30 words of local(AUTO) storage.
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:158  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:159  
          MINI XREF LISTING

B$ALT.CODE
      6245**DCL      6245--REDEF    6246--REDEF    6246--REDEF
B$ALT.ERR.CODE
      6247**DCL      6329>>IF       6329>>IF
B$ALT.ERR.ERR#
      6247**DCL      6247--REDEF
B$ALT.EVID
      6246**DCL      6246--REDEF    6246--REDEF
B$TCB.ALT$
      6241**DCL      6329>>IF       6329>>IF
B$TCB$
      6182**DCL      6329>>IF       6329>>IF
BYTES IN PROCEDURE PACK
      6514**DCL      6510--PROC     6518>>DOINDEX
BYTES IN PROCEDURE UNPACK
      6529**DCL      6525--PROC     6534>>DOINDEX
CODE10.ACSVEH.C
      5642**DCL      5642--IMP-SIZ  6343>>ASSIGN
CODE10.ACSVEH.T
      5642**DCL      6343>>ASSIGN
CURSLOTX
      5997**DCL      6256>>ASSIGN   6265>>IF       6265>>IF       6286>>IF       6287<<ASSIGN   6313>>IF
      6314>>ASSIGN   6315<<ASSIGN   6322<<ASSIGN   6335<<ASSIGN   6356>>CALLBLT
DATASIZE
      6179**DCL      5598--IMP-SIZ  6255<>CALL     6268>>ASSIGN   6276<>CALL     6277>>ASSIGN
DEST IN PROCEDURE PACK
      6513**DCL      6510--PROC     6517<<ASSIGN   6519<<ASSIGN   6519>>ASSIGN
DEST IN PROCEDURE SETCODE
      6454**DCL      6395--PROC     6488<<ASSIGN
DEST.SEV IN PROCEDURE SETCODE
      6484**DCL      6489<<ASSIGN
DEST IN PROCEDURE UNPACK
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:160  
      6528**DCL      6525--PROC     6535<<ASSIGN
DFKEY
      6000**DCL      5905--DCLINIT  5906--DCLINIT  5946--DCLINIT
DFKEY.K
      6002**DCL      6001--DCLINIT  6351<<ASSIGN
DFKEY.K.NODE
      6003**DCL      6267<<ASSIGN   6272<<ASSIGN
DFKEY.K.PAGE#
      6007**DCL      6275<<ASSIGN
DFKEY.K.TYPE
      6004**DCL      6273<<ASSIGN
DUMPMSG
      5579**DCL        31--PROC
DUMPMSG.DATA
      5598**DCL      6262--ASSIGN   6268--ASSIGN   6277--ASSIGN
DUMPMSG.DATASIZE
      5596**DCL      6255<>CALL     6276<>CALL
DUMPMSG.FEX
      5595**DCL      6260<>CALL     6283>>ASSIGN
DUMPMSG.RPN
      5597**DCL      6274<>CALL
DUMPMSG.TYPE
      5591**DCL      6258>>DOCASE
DUMPTBL.FEX
      5995**DCL      6285<<ASSIGN   6314<<ASSIGN   6319>>IF       6325<>CALL     6336<<ASSIGN   6348>>CALLBLT
      6356>>CALLBLT  6376>>IF       6382>>IF       6383<<ASSIGN   6502<>CALL
DUMPTBL.SCODE
      5996**DCL      6263<>CALL     6323<>CALL     6384<<ASSIGN
DUMP_ACCT
      5836**DCL      5755--DCLINIT
DUMP_ATTR
      5618**DCL      6304--ASSIGN
DUMP_ATTR.Q
      5619**DCL      5618--DCLINIT
DUMP_ATTR.Q.X.VEHICLE#
      5636**DCL      6343<<ASSIGN   6346<<ASSIGN   6347<<ASSIGN   6348<<CALLBLT
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:161  
DUMP_NAME
      5821**DCL      5751--DCLINIT  5990--DCLINIT  6325<>CALL
F$DCB.ACTPOS
      6216**DCL      6216--REDEF
F$DCB.ARS#
      6190**DCL      6190--REDEF
F$DCB.ATTR
      6209**DCL      6210--REDEF
F$DCB.BORROW
      6224**DCL      6224--REDEF    6224--REDEF    6224--REDEF
F$DCB.DCBNAME.L
      6238**DCL      6238--IMP-SIZ
F$DCB.EOMCHAR#
      6194**DCL      6194--REDEF
F$DCB.FCD#
      6203**DCL      6302>>IF
F$DCB.FLDID
      6219**DCL      6219--REDEF
F$DCB.FORM$
      6213**DCL      6213--REDEF
F$DCB.FSECT
      6229**DCL      6229--REDEF
F$DCB.FSN#
      6206**DCL      6206--REDEF    6206--REDEF    6207--REDEF
F$DCB.HEADER$
      6212**DCL      6212--REDEF
F$DCB.IXTNSIZE#
      6210**DCL      6210--REDEF
F$DCB.LASTSTA$
      6199**DCL      6199--REDEF
F$DCB.LVL
      6225**DCL      6225--REDEF
F$DCB.NAME#.C
      6200**DCL      6200--REDEF
F$DCB.NOEOF
      6222**DCL      6222--REDEF
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:162  
F$DCB.NRECS#
      6211**DCL      6211--REDEF
F$DCB.NRECX
      6230**DCL      6230--REDEF
F$DCB.OHDR
      6222**DCL      6222--REDEF
F$DCB.ORG#
      6205**DCL      6205--REDEF
F$DCB.PRECNO
      6228**DCL      6228--REDEF
F$DCB.RCSZ
      6234**DCL      6234--REDEF
F$DCB.RES#
      6201**DCL      6201--REDEF
F$DCB.SETX
      6213**DCL      6213--REDEF
F$DCB.TAB$
      6213**DCL      6213--REDEF
F$DCB.TDA
      6227**DCL      6228--REDEF
F$DCB.WSN#
      6201**DCL      6201--REDEF
FEX
      6177**DCL      6260<>CALL     6261<>CALL     6283<<ASSIGN   6284<>CALL
FEX IN PROCEDURE FINDSLOT
      6371**DCL      6369--PROC     6376>>IF       6383>>ASSIGN
FINDSLOT
      6369**PROC     6261--CALL     6284--CALL
FIT$
      5639**DCL      6341<<ASSIGN   6342<>CALL     6343>>ASSIGN   6343>>ASSIGN
FPT_CLS_DUMP
      5865**DCL      6311<>CALL
FPT_CLS_DUMP.ACSVEH_
      5868**DCL      6304<<ASSIGN   6308<<ASSIGN
FPT_CLS_DUMP.SN_
      5865**DCL      5865--REDEF
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:163  
FPT_CLS_DUMP.UTL_
      5866**DCL      5866--REDEF
FPT_CLS_DUMP.V
      5870**DCL      5865--DCLINIT
FPT_CLS_DUMP.V.EXPIRE#
      5880**DCL      5880--REDEF
FPT_CLS_DUMP.V.OPER.CHGATT#
      5871**DCL      6305<<ASSIGN   6309<<ASSIGN
FPT_CLS_DUMP.V.TYPE#
      5878**DCL      5878--REDEF
FPT_CLS_DUMP.V.XTNSIZE#
      5875**DCL      5875--REDEF    5877--REDEF
FPT_FDP
      5671**DCL      6349<>CALL
FPT_FDP.V
      5671**DCL      5671--DCLINIT
FPT_GDP
      5657**DCL      6326<>CALL
FPT_GDP.V
      5657**DCL      5657--DCLINIT
FPT_OPN_DUMP
      5750**DCL      6328<>CALL
FPT_OPN_DUMP.ACSVEH_
      5752**DCL      5753--REDEF
FPT_OPN_DUMP.ALTKEYS_
      5758**DCL      5759--REDEF    5759--REDEF
FPT_OPN_DUMP.FPARAM_
      5755**DCL      6327<<ASSIGN
FPT_OPN_DUMP.HDR_
      5757**DCL      5758--REDEF
FPT_OPN_DUMP.TAB_
      5756**DCL      5757--REDEF
FPT_OPN_DUMP.UHL_
      5750**DCL      5751--REDEF    5751--REDEF
FPT_OPN_DUMP.V
      5759**DCL      5750--DCLINIT
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:164  
FPT_OPN_DUMP.V.FSN#
      5790**DCL      5790--REDEF    5790--REDEF
FPT_OPN_DUMP.WSN_
      5756**DCL      5756--REDEF
FPT_SCREECH
      5989**DCL      6324<>CALL
GDP_
      5645**DCL      5657--DCLINIT  6327>>ASSIGN   6341>>ASSIGN
GOT_ACS
      5638**DCL      6303>>IF       6340<<ASSIGN   6344<<ASSIGN
I IN PROCEDURE PACK
      6515**DCL      6518<<DOINDEX  6519>>ASSIGN
I IN PROCEDURE STARTDUMP
      6300**DCL      6318<<DOINDEX  6319>>IF       6321>>IF       6322>>ASSIGN   6323>>CALL     6325>>CALL
      6336>>ASSIGN   6348>>CALLBLT
I IN PROCEDURE UNPACK
      6530**DCL      6534<<DOINDEX  6535>>ASSIGN
KFD$LOGSCREECH
      5602**DCL-ENT  6325--CALL
KFD$WRT_NA
      5601**DCL-ENT  6505--CALL
M$CLOSE
        42**DCL-ENT  6311--CALL
M$FDP
        78**DCL-ENT  6349--CALL
M$GDP
        78**DCL-ENT  6326--CALL
M$OPEN
        42**DCL-ENT  6328--CALL
M$RDUMP
      5605**DCL      6302--IF
M$READ
        43**DCL-ENT  6353--CALL
M$RETRYS
        99**DCL-ENT  6332--CALL
M$SCREECH
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:165  
        56**DCL-ENT  6324--CALL
M$SENV
        98**DCL-ENT  6330--CALL
M$WAIT
       100**DCL-ENT  6331--CALL
M$WRITE
        43**DCL-ENT  6269--CALL     6278--CALL     6359--CALL
NODEDIR
      6093**DCL      5907--DCLINIT  5908--DCLINIT  6358--ASSIGN
NODEDIR.N
      6093**DCL      6352<<ASSIGN   6354<<ASSIGN   6354>>ASSIGN   6355>>ASSIGN
NODEDIR.NODE.NODENAME
      6093**DCL      6356<<CALLBLT
NODEDIR.NODE.TYPE
      6094**DCL      6357<<ASSIGN
NODEIDX
      6097**DCL      6267>>ASSIGN   6272>>ASSIGN   6355<<ASSIGN   6356>>CALLBLT  6357>>ASSIGN
PACK
      6510**PROC     6255--CALL     6260--CALL     6274--CALL     6276--CALL
PAGENO
      6180**DCL      6274<>CALL     6275>>ASSIGN   6504<>CALL
RDDUMP
      5905**DCL      6353<>CALL
RDDUMP.STATION_
      5908**DCL      5909--REDEF
RDDUMP.V
      5909**DCL      5905--DCLINIT
RDDUMP.V.DVBYTE.REREAD#
      5920**DCL      5920--REDEF
RDDUMP.V.INDX#
      5918**DCL      5918--REDEF
RECOVERY_CODE
      6032**DCL      5989--DCLINIT  6323<>CALL     6325<>CALL
REPLY
      6155**DCL      6505<>CALL
REPLY.DATASIZE
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:166  
      6172**DCL      6503<>CALL
REPLY.FEX
      6171**DCL      6502<>CALL
REPLY.RPN
      6173**DCL      6504<>CALL
REPLY.TYPE
      6167**DCL      6501<<ASSIGN
RVB$
      6178**DCL      6112--IMP-PTR  6262<<ASSIGN   6263>>CALL
RVBINFO.SCODE
      6128**DCL      6263<>CALL
SENDREPLY
      6497**PROC     6270--CALL     6279--CALL     6360--CALL
SETCODE
      6395**PROC     6323--CALL
SLOTX
      5998**DCL      6256<<ASSIGN   6261<>CALL     6263>>CALL     6265>>IF       6284<>CALL     6285>>ASSIGN
      6286>>IF       6502>>CALL
SLOTX IN PROCEDURE FINDSLOT
      6372**DCL      6369--PROC     6377<<ASSIGN   6385<<ASSIGN
SRC IN PROCEDURE PACK
      6512**DCL      6510--PROC     6519>>ASSIGN
SRC IN PROCEDURE SETCODE
      6409**DCL      6395--PROC     6488>>ASSIGN
SRC IN PROCEDURE UNPACK
      6527**DCL      6525--PROC     6533>>ASSIGN
STARTDUMP
      6298**PROC     6265--CALL     6281--CALL     6288--CALL
TEMP IN PROCEDURE UNPACK
      6531**DCL      6533<<ASSIGN   6535>>ASSIGN   6536<<ASSIGN   6536>>ASSIGN
TYPECODE IN PROCEDURE SENDREPLY
      6499**DCL      6497--PROC     6501>>ASSIGN
UNPACK
      6525**PROC     6502--CALL     6503--CALL     6504--CALL
WAIT1
      5972**DCL      6331<>CALL
PL6.E3A0      #005=KFD$DUMPMSG File=KFD$FEDUMP.:E05TSI                           WED 07/30/97 00:21 Page:167  
WAIT1.V
      5973**DCL      5972--DCLINIT
WRDUMP
      5946**DCL      6269<>CALL     6278<>CALL     6359<>CALL
WRDUMP.BUF_
      5946**DCL      6268<<ASSIGN   6277<<ASSIGN   6358<<ASSIGN
WRDUMP.STATION_
      5948**DCL      5948--REDEF
WRDUMP.V
      5949**DCL      5946--DCLINIT
WRDUMP.V.DVBYTE.VFC#
      5955**DCL      5955--REDEF
X IN PROCEDURE FINDSLOT
      6373**DCL      6375<<DOINDEX  6376>>IF       6377>>ASSIGN   6381<<DOINDEX  6382>>IF       6383>>ASSIGN
      6384>>ASSIGN   6385>>ASSIGN
XSF$LOCCODT
      5603**DCL-ENT  6342--CALL
XUR$ERRCNVRT
      5600**DCL-ENT  6263--CALL

PL6.E3A0      #006=KFD$LOGSCREECH File=KFD$FEDUMP.:E05TSI                        WED 07/30/97 00:21 Page:168  
      898        1        /*T***********************************************************/
      899        2        /*T*                                                         */
      900        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      901        4        /*T*                                                         */
      902        5        /*T***********************************************************/
      903        6        KFD$LOGSCREECH: PROC(SCODE,FEX,DUMPNAME);
      904        7
      905        8        %INCLUDE CP_6;
      906       89        %INCLUDE EL$TABLES;
      907      412        %INCLUDE EL_SUBS_C;
      908      496
      909      497    1   DCL SCODE BIT(36) ALIGNED;
      910      498    1   DCL FEX UBIN;
      911      499    1   DCL 1 DUMPNAME CALIGNED,
      912      500    1         2 L UBIN BYTE CALIGNED,
      913      501    1         2 * CHAR(3),
      914      502    1         2 MONID CHAR(4),
      915      503    1         2 SEQ CHAR(3);
      916      504        %FPT_WRSYSLOG (FPTN=FPT_WRSYSLOG,
      917      505                       FILENUM=ERRLOG,SIZE="SIZEW(EL$SCREECH)",TYPE=EL_SCREECH);
      918      520        %EL$SCREECH (NAME=EL$SCREECH,STCLASS=AUTO);
      919      526
      920      527    1           EL$SCREECH='0'B;
      921      528    1           EL$SCREECH.SCODE=SCODE;
      922      529    1           EL$SCREECH.MONID=DUMPNAME.MONID;
      923      530    1           CALL CHARBIN(EL$SCREECH.SCOUNT,DUMPNAME.SEQ);
      924      531    1           EL$SCREECH.SNAPU#=FEX;
      925      532    1           IF DUMPNAME.MONID='NONE' THEN EL$SCREECH.DUMP=1;
      926      533    1           FPT_WRSYSLOG.ENTRY_=VECTOR(EL$SCREECH);
      927      534    2           CALL M$WRSYSLOG(FPT_WRSYSLOG) WHENALTRETURN DO; END;
      928      535
      929      536    1           RETURN;
      930      537
      931      538    1   END KFD$LOGSCREECH;

PL6.E3A0      #006=KFD$LOGSCREECH File=KFD$FEDUMP.:E05TSI                        WED 07/30/97 00:21 Page:169  
--  Include file information  --

   EL_SUBS_C.:E05TOU  is referenced.
   EL$TABLES.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure KFD$LOGSCREECH.

   Procedure KFD$LOGSCREECH requires 38 words for executable code.
   Procedure KFD$LOGSCREECH requires 22 words of local(AUTO) storage.

    No errors detected in file KFD$FEDUMP.:E05TSI    .

PL6.E3A0      #006=KFD$LOGSCREECH File=KFD$FEDUMP.:E05TSI                        WED 07/30/97 00:21 Page:170  

 Object Unit name= KFD$LOGSCREECH                             File name= KFD$FEDUMP.:E05TOU
 UTS= JUL 30 '97 00:21:48.84 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none     8     10  KFD$LOGSCREECH
    2  RoData even  UTS      1      1  KFD$LOGSCREECH
    3   Proc  even  none    38     46  KFD$LOGSCREECH
    4  RoData even  none     1      1  KFD$LOGSCREECH

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes            yes      Std        3  KFD$LOGSCREECH

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_3
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  B_VECTNIL
PL6.E3A0      #006=KFD$LOGSCREECH File=KFD$FEDUMP.:E05TSI                        WED 07/30/97 00:21 Page:171  

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #006=KFD$LOGSCREECH File=KFD$FEDUMP.:E05TSI                        WED 07/30/97 00:21 Page:172  


      898        1        /*T***********************************************************/
      899        2        /*T*                                                         */
      900        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      901        4        /*T*                                                         */
      902        5        /*T***********************************************************/
      903        6        KFD$LOGSCREECH: PROC(SCODE,FEX,DUMPNAME);

      6  3 000000   000000 700200 xent  KFD$LOGSCRE* TSX0  ! X66_AUTO_3
         3 000001   000026 000003                    ZERO    22,3

      904        7
      905        8        %INCLUDE CP_6;
      906       89        %INCLUDE EL$TABLES;
      907      412        %INCLUDE EL_SUBS_C;
      908      496
      909      497    1   DCL SCODE BIT(36) ALIGNED;
      910      498    1   DCL FEX UBIN;
      911      499    1   DCL 1 DUMPNAME CALIGNED,
      912      500    1         2 L UBIN BYTE CALIGNED,
      913      501    1         2 * CHAR(3),
      914      502    1         2 MONID CHAR(4),
      915      503    1         2 SEQ CHAR(3);
      916      504        %FPT_WRSYSLOG (FPTN=FPT_WRSYSLOG,
      917      505                       FILENUM=ERRLOG,SIZE="SIZEW(EL$SCREECH)",TYPE=EL_SCREECH);
      918      520        %EL$SCREECH (NAME=EL$SCREECH,STCLASS=AUTO);
      919      526
      920      527    1           EL$SCREECH='0'B;

    527  3 000002   000100 100400                    MLR     fill='000'O
         3 000003   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         3 000004   200006 000064                    ADSC9   EL$SCREECH,,AUTO         cn=0,n=52

      921      528    1           EL$SCREECH.SCODE=SCODE;

    528  3 000005   200003 470500                    LDP0    @SCODE,,AUTO
         3 000006   000000 235100                    LDA     0,,PR0
PL6.E3A0      #006=KFD$LOGSCREECH File=KFD$FEDUMP.:E05TSI                        WED 07/30/97 00:21 Page:173  
         3 000007   000000 236003                    LDQ     0,DU
         3 000010   200006 757100                    STAQ    EL$SCREECH,,AUTO

      922      529    1           EL$SCREECH.MONID=DUMPNAME.MONID;

    529  3 000011   200005 471500                    LDP1    @DUMPNAME,,AUTO
         3 000012   040100 100500                    MLR     fill='040'O
         3 000013   100001 000004                    ADSC9   1,,PR1                   cn=0,n=4
         3 000014   200011 000004                    ADSC9   EL$SCREECH+3,,AUTO       cn=0,n=4

      923      530    1           CALL CHARBIN(EL$SCREECH.SCOUNT,DUMPNAME.SEQ);

    530  3 000015   000100 305500                    DTB
         3 000016   100002 030003                    NDSC9   2,,PR1                   cn=0,s=nosgn,sf=0,n=3
         3 000017   200024 000010                    NDSC9   EL$SCREECH+14,,AUTO      cn=0,s=lsgnf,sf=0,n=8
         3 000020   200025 235100                    LDA     EL$SCREECH+15,,AUTO
         3 000021   200012 755100                    STA     EL$SCREECH+4,,AUTO

      924      531    1           EL$SCREECH.SNAPU#=FEX;

    531  3 000022   200004 473500                    LDP3    @FEX,,AUTO
         3 000023   300000 235100                    LDA     0,,PR3
         3 000024   200010 755100                    STA     EL$SCREECH+2,,AUTO

      925      532    1           IF DUMPNAME.MONID='NONE' THEN EL$SCREECH.DUMP=1;

    532  3 000025   040000 106500                    CMPC    fill='040'O
         3 000026   100001 000004                    ADSC9   1,,PR1                   cn=0,n=4
         3 000027   000000 000004 2                  ADSC9   0                        cn=0,n=4
         3 000030   000033 601000 3                  TNZ     s:533

    532  3 000031   000001 235007                    LDA     1,DL
         3 000032   200013 755100                    STA     EL$SCREECH+5,,AUTO

      926      533    1           FPT_WRSYSLOG.ENTRY_=VECTOR(EL$SCREECH);

    533  3 000033   000000 235000 4                  LDA     0
PL6.E3A0      #006=KFD$LOGSCREECH File=KFD$FEDUMP.:E05TSI                        WED 07/30/97 00:21 Page:174  
         3 000034   200024 452500                    STP2    EL$SCREECH+14,,AUTO
         3 000035   200024 236100                    LDQ     EL$SCREECH+14,,AUTO
         3 000036   000006 036003                    ADLQ    6,DU
         3 000037   000002 757000 1                  STAQ    FPT_WRSYSLOG+2

      927      534    2           CALL M$WRSYSLOG(FPT_WRSYSLOG) WHENALTRETURN DO; END;

    534  3 000040   000000 630400 1                  EPPR0   FPT_WRSYSLOG
         3 000041   470001 713400                    CLIMB   alt,+28673
         3 000042   400400 401760                    pmme    nvectors=2
         3 000043   000045 702000 3                  TSX2    s:536
         3 000044   000045 710000 3                  TRA     s:536

      928      535
      929      536    1           RETURN;

    536  3 000045   000000 702200 xent               TSX2  ! X66_ARET
      930      537
      931      538    1   END KFD$LOGSCREECH;

PL6.E3A0      #006=KFD$LOGSCREECH File=KFD$FEDUMP.:E05TSI                        WED 07/30/97 00:21 Page:175  
--  Include file information  --

   EL_SUBS_C.:E05TOU  is referenced.
   EL$TABLES.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure KFD$LOGSCREECH.
PL6.E3A0      #006=KFD$LOGSCREECH File=KFD$FEDUMP.:E05TSI                        WED 07/30/97 00:21 Page:176  

 **** Variables and constants ****

  ****  Section 001  Data  KFD$LOGSCREECH

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(288)   r     1 FPT_WRSYSLOG

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     5-0-0/w PTR         r     1 @DUMPNAME                  4-0-0/w PTR         r     1 @FEX
     3-0-0/w PTR         r     1 @SCODE                    *0-0-0/c STRC(99)    r     1 DUMPNAME
     6-0-0/d STRC(468)   r     1 EL$SCREECH                *0-0-0/w UBIN        r     1 FEX
    *0-0-0/w BIT         r     1 SCODE


   Procedure KFD$LOGSCREECH requires 38 words for executable code.
   Procedure KFD$LOGSCREECH requires 22 words of local(AUTO) storage.

    No errors detected in file KFD$FEDUMP.:E05TSI    .
PL6.E3A0      #006=KFD$LOGSCREECH File=KFD$FEDUMP.:E05TSI                        WED 07/30/97 00:21 Page:177  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #006=KFD$LOGSCREECH File=KFD$FEDUMP.:E05TSI                        WED 07/30/97 00:21 Page:178  
          MINI XREF LISTING

DUMPNAME
       499**DCL         6--PROC
DUMPNAME.MONID
       502**DCL       529>>ASSIGN    532>>IF
DUMPNAME.SEQ
       503**DCL       530>>CALLBLT
EL$SCREECH
       521**DCL       518--DCLINIT   527<<ASSIGN    533--ASSIGN
EL$SCREECH.DUMP
       522**DCL       532<<ASSIGN
EL$SCREECH.MONID
       522**DCL       529<<ASSIGN
EL$SCREECH.SCODE
       521**DCL       528<<ASSIGN
EL$SCREECH.SCOUNT
       522**DCL       530<<CALLBLT
EL$SCREECH.SNAPU#
       521**DCL       531<<ASSIGN
FEX
       498**DCL         6--PROC      531>>ASSIGN
FPT_WRSYSLOG
       516**DCL       534<>CALL
FPT_WRSYSLOG.ENTRY_
       516**DCL       533<<ASSIGN
FPT_WRSYSLOG.V
       516**DCL       516--DCLINIT
M$WRSYSLOG
        66**DCL-ENT   534--CALL
SCODE
       497**DCL         6--PROC      528>>ASSIGN
