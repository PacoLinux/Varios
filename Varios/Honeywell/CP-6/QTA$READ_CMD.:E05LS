VERSION E05

PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:1    
        1        1        /*M* QTA$READ_CMD - Read a command and process it */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* IND=2, DCI=4, CSU=2, ECU=4, DTI=2, CTI=4, AND */
        8        8        QTA$READ_CMD:
        9        9                PROC;
       10       10
       11       11        %INCLUDE Q_PAGE_C;
       12       43        %SET LISTEXP = '1'B;
       13       44        %PAGE(ARG="Includes");

                61        /***************************************************************************
                62         *                                                                         *
                63         *                                  Includes                               *
                64         *                                                                         *
                65         ***************************************************************************/

       14       69        %INCLUDE QT_DATA_R;
       15       83        %INCLUDE QT_SUBS_C;
       16      167        %INCLUDE QT_PERR_C;
       17      218        %INCLUDE Q_ERRCODE_C;
       18      241        %INCLUDE XU_MACRO_C;
       19     3347        %PAGE(ARG="Externally defined routines");

              3364    1   /***************************************************************************
              3365    1    *                                                                         *
              3366    1    *                        Externally defined routines                      *
              3367    1    *                                                                         *
              3368    1    ***************************************************************************/

       20     3372    1   DCL QTB$COPY ENTRY;
       21     3373    1   DCL QTB$CREMOD_E ENTRY;
       22     3374    1   DCL QTB$CREMOD_F ENTRY;
       23     3375    1   DCL QTB$DELETE ENTRY;
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:2    
       24     3376    1   DCL QTB$HELP ENTRY;
       25     3377    1   DCL QTB$LIST ENTRY;
       26     3378    1   DCL QTB$QUIT ENTRY;
       27     3379    1   DCL QTB$REDOIT ENTRY;
       28     3380    1   DCL QTB$SELECT ENTRY;
       29     3381        %INCLUDE XUR_ENTRY;
       30     3413        %PAGE(ARG="Symrefs");

              3430    1   /***************************************************************************
              3431    1    *                                                                         *
              3432    1    *                                  Symrefs                                *
              3433    1    *                                                                         *
              3434    1    ***************************************************************************/

       31     3438    1   DCL QT_NODES0 UBIN WORD SYMREF;
       32     3439        %PAGE(ARG="Based");

              3456    1   /***************************************************************************
              3457    1    *                                                                         *
              3458    1    *                                   Based                                 *
              3459    1    *                                                                         *
              3460    1    ***************************************************************************/

       33     3464        %PARSE$SYM(STCLASS=BASED);
       34     3502        %PARSE$OUT(STCLASS=BASED);
       35     3547        %P_PCB(NAME=P$PCB, STCLASS="BASED(QT_GLOBAL.P$PCB$)");
       36     3746        %PAGE(ARG="DCBs");

              3763    1   /***************************************************************************
              3764    1    *                                                                         *
              3765    1    *                                    DCBs                                 *
              3766    1    *                                                                         *
              3767    1    ***************************************************************************/

       37     3771    1   DCL M$LO DCB;
       38     3772        %PAGE(ARG="Constants");

PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:3    
              3789    1   /***************************************************************************
              3790    1    *                                                                         *
              3791    1    *                                 Constants                               *
              3792    1    *                                                                         *
              3793    1    ***************************************************************************/

       39     3797    1   DCL CMD_PROMPT CHAR(0) CONSTANT INIT('CMD? ');
       40     3798    1   DCL CMD_PROMPT_V BIT(72) CONSTANT INIT(VECTOR(CMD_PROMPT));
       41     3799        %PAGE(ARG="Auto");

              3816    1   /***************************************************************************
              3817    1    *                                                                         *
              3818    1    *                                    Auto                                 *
              3819    1    *                                                                         *
              3820    1    ***************************************************************************/

       42     3824    1   DCL CPOS UBIN WORD;
       43     3825        %PAGE(ARG="Error codes", PAGE=YES);

PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:4    
              3842    1   /***************************************************************************
              3843    1    *                                                                         *
              3844    1    *                                Error codes                              *
              3845    1    *                                                                         *
              3846    1    ***************************************************************************/

       44     3850        %ERRCODE(NAME=CODE_TNS, CODE#=%E$TNS, FCG#=%FCG_QT, MID#=%MID_A);
       45     3857        %ERRCODE(NAME=CODE_SYN, CODE#=%E$SYN, FCG#=%FCG_QT, MID#=%MID_A);
       46     3864        /*E*       ERROR: QTA-E$TNS-C
       47     3865
       48     3866                 MESSAGE: You must SELECT a TRADER file before using
       49     3867                          this command.
       50     3868             DESCRIPTION: A TRADER file must be selected to perform any
       51     3869                          one of the CREATE, MODIFY or LIST...commands
       52     3870        */
       53     3871        /*E*       ERROR: QTA-E$SYN-C
       54     3872
       55     3873                 MESSAGE: Syntax error
       56     3874             DESCRIPTION: Syntax error
       57     3875        */
       58     3876        %PAGE(ARG="QTA$READ_CMD", PAGE=YES);

PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:5    
              3893    1   /***************************************************************************
              3894    1    *                                                                         *
              3895    1    *                                QTA$READ_CMD                             *
              3896    1    *                                                                         *
              3897    1    ***************************************************************************/

       59     3901    2           DO WHILE('1'B);
       60     3902
       61     3903    2             IF QT_GLOBAL.XCON THEN
       62     3904    3               DO;
       63     3905    3                 GOTO RET;
       64     3906    3               END;
       65     3907
       66     3908    2             QT_GLOBAL.BREAK = '0'B;
       67     3909    2             QT_GLOBAL.FIRST_READ = '1'B;
       68     3910
       69     3911    2             CALL XUR$GETCMD(QT_NODES0, QT_CMDBLK.OUT$, CMD_PROMPT_V) ALTRET(PARSE_ERR)
              3911                      ;
       70     3912    2             CALL XUR$ECHOIF(DCBNUM(M$LO));
       71     3913
       72     3914    2             QT_CMDBLK.CODE = QT_CMDBLK.OUT$ -> OUT$BLK.CODE;
       73     3915    2             QT_CMDBLK.TEXT$ = P$PCB.TEXT$;
       74     3916    2             QT_CMDBLK.ARS = P$PCB.NCHARS;
       75     3917
       76     3918    2             IF NOT QT_GLOBAL.FILE_SELECTED AND
       77     3919    2                 NOT(QT_CMDBLK.CODE = 1 /* NULL */ OR
       78     3920    2                 QT_CMDBLK.CODE = 8 /* END */ OR
       79     3921    2                 QT_CMDBLK.CODE = 9 /* HELP */ OR
       80     3922    2                 QT_CMDBLK.CODE = 16 /* QUIT */ OR
       81     3923    2                 QT_CMDBLK.CODE = 14 /* QUEST */ OR
       82     3924    2                 QT_CMDBLK.CODE = 15 /* DBL_QUEST */ OR
       83     3925    2                 QT_CMDBLK.CODE = 24 /* SELECT */) THEN
       84     3926    3               DO;
       85     3927    3                 QT_CMDBLK.MINOR_ERR = CODE_TNS;
       86     3928    3                 CALL XUR$ERRMSG(CODE_TNS);
       87     3929    3                 GOTO LOOP;
       88     3930    3               END;
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:6    
       89     3931
       90     3932    2             IF NOT(QT_CMDBLK.CODE = 14 /* QUEST */ OR
       91     3933    2                 QT_CMDBLK.CODE = 15 /* DBL_QUEST */) THEN
       92     3934    3               DO;
       93     3935    3                 QT_CMDBLK.MINOR_ERR = '0'B;
       94     3936    3               END;
       95     3937
       96     3938    3             DO CASE(QT_CMDBLK.CODE);
       97     3939    3               CASE(1 /* NULL */);
       98     3940
       99     3941    3               CASE(4 /* COPY_ENTRY */, 5 /* COPY_FORM */);
      100     3942    3                 CALL QTB$COPY;
      101     3943
      102     3944    3               CASE(2 /* CREATE_ENTRY */, 12 /* MODIFY_ENTRY */);
      103     3945    3                 CALL QTB$CREMOD_E;
      104     3946
      105     3947    3               CASE(3 /* CREATE_FORM */, 13 /* MODIFY_FORM */);
      106     3948    3                 CALL QTB$CREMOD_F;
      107     3949
      108     3950    3               CASE(6 /* DELETE_ENTRY */, 7 /* DELETE_FORM */);
      109     3951    3                 CALL QTB$DELETE;
      110     3952
      111     3953    3               CASE(9 /* HELP */, 14 /* QUEST */, 15 /* DBL_QUEST */);
      112     3954    3                 CALL QTB$HELP;
      113     3955
      114     3956    3               CASE(10 /* LIST_ENTRY */, 11 /* LIST_FORM */);
      115     3957    3                 CALL QTB$LIST;
      116     3958
      117     3959    3               CASE(8 /* END */, 16 /* QUIT */);
      118     3960    3                 CALL QTB$QUIT;
      119     3961
      120     3962    3               CASE(17 /* REDOIT */);
      121     3963    3                 CALL QTB$REDOIT;
      122     3964
      123     3965    3               CASE(24 /* SELECT */);
      124     3966    3                 CALL QTB$SELECT;
      125     3967
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:7    
      126     3968    3             END /* CASE */;
      127     3969
      128     3970    3             DO WHILE('0'B);
      129     3971
      130     3972    3   PARSE_ERR:
      131     3973    3               IF QT_CMDBLK.ERR.MON THEN
      132     3974    4                 DO;
      133     3975    4                   GOTO RET;
      134     3976    4                 END;
      135     3977
      136     3978    3               CPOS = P$PCB.HI_CHAR;
      137     3979    3               CALL XUR$ERRPTR(CPOS, QT_GLOBAL.M$DO#);
      138     3980    3               QT_CMDBLK.MINOR_ERR = CODE_SYN;
      139     3981    3               CALL XUR$ERRMSG(CODE_SYN);
      140     3982    3             END /* NEVER */;
      141     3983
      142     3984    2   LOOP:
      143     3985    2           END /* WHILE */;
      144     3986
      145     3987    1   RET:
      146     3988    1           RETURN;
      147     3989
      148     3990    1   END QTA$READ_CMD;

PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:8    
--  Include file information  --

   XUR_ENTRY.:E05TOU  cannot be made into a system file and is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
   Q_ERRCODE_C.:E05TOU  is referenced.
   QT_PERR_C.:E05TOU  is referenced.
   QT_SUBS_C.:E05TOU  is referenced.
   QT_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   Q_PAGE_C.:E05TOU  is referenced.
      No diagnostics issued in procedure QTA$READ_CMD.

   Procedure QTA$READ_CMD requires 146 words for executable code.
   Procedure QTA$READ_CMD requires 6 words of local(AUTO) storage.

    No errors detected in file QTA$READ_CMD.:E05TSI    .

PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:9    

 Object Unit name= QTA$READ_CMD                               File name= QTA$READ_CMD.:E05TOU
 UTS= JUL 30 '97 05:45:24.96 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$LO
    1  RoData even  UTS      6      6  QTA$READ_CMD
    2   Proc  even  none   146    222  QTA$READ_CMD
    3  RoData even  none     6      6  QTA$READ_CMD

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes            yes      Std        0  QTA$READ_CMD
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:10   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       6 XUR$GETCMD
         yes           Std       0 QTB$CREMOD_F
         yes           Std       0 QTB$REDOIT
 yes     yes           Std       1 XUR$ECHOIF
         yes           Std       0 QTB$CREMOD_E
         yes           Std       0 QTB$LIST
         yes           Std       0 QTB$SELECT
 yes     yes           Std       7 XUR$ERRMSG
         yes           Std       0 QTB$COPY
         yes           Std       0 QTB$DELETE
         yes           Std       0 QTB$QUIT
         yes           Std       0 QTB$HELP
 yes     yes           Std       2 XUR$ERRPTR
                       nStd      0 X66_AUTO_0
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     QT_GLOBAL                             QT_CMDBLK                             QT_NODES0
     M$LO                                  B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:11   


        1        1        /*M* QTA$READ_CMD - Read a command and process it */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* IND=2, DCI=4, CSU=2, ECU=4, DTI=2, CTI=4, AND */
        8        8        QTA$READ_CMD:
        9        9                PROC;

      9  2 000000   000000 700200 xent  QTA$READ_CMD TSX0  ! X66_AUTO_0
         2 000001   000006 000000                    ZERO    6,0

       10       10
       11       11        %INCLUDE Q_PAGE_C;
       12       43        %SET LISTEXP = '1'B;
       13       44        %PAGE(ARG="Includes");

                61        /***************************************************************************
                62         *                                                                         *
                63         *                                  Includes                               *
                64         *                                                                         *
                65         ***************************************************************************/

       14       69        %INCLUDE QT_DATA_R;
       15       83        %INCLUDE QT_SUBS_C;
       16      167        %INCLUDE QT_PERR_C;
       17      218        %INCLUDE Q_ERRCODE_C;
       18      241        %INCLUDE XU_MACRO_C;
       19     3347        %PAGE(ARG="Externally defined routines");

              3364    1   /***************************************************************************
              3365    1    *                                                                         *
              3366    1    *                        Externally defined routines                      *
              3367    1    *                                                                         *
              3368    1    ***************************************************************************/
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:12   

       20     3372    1   DCL QTB$COPY ENTRY;
       21     3373    1   DCL QTB$CREMOD_E ENTRY;
       22     3374    1   DCL QTB$CREMOD_F ENTRY;
       23     3375    1   DCL QTB$DELETE ENTRY;
       24     3376    1   DCL QTB$HELP ENTRY;
       25     3377    1   DCL QTB$LIST ENTRY;
       26     3378    1   DCL QTB$QUIT ENTRY;
       27     3379    1   DCL QTB$REDOIT ENTRY;
       28     3380    1   DCL QTB$SELECT ENTRY;
       29     3381        %INCLUDE XUR_ENTRY;
       30     3413        %PAGE(ARG="Symrefs");

              3430    1   /***************************************************************************
              3431    1    *                                                                         *
              3432    1    *                                  Symrefs                                *
              3433    1    *                                                                         *
              3434    1    ***************************************************************************/

       31     3438    1   DCL QT_NODES0 UBIN WORD SYMREF;
       32     3439        %PAGE(ARG="Based");

              3456    1   /***************************************************************************
              3457    1    *                                                                         *
              3458    1    *                                   Based                                 *
              3459    1    *                                                                         *
              3460    1    ***************************************************************************/

       33     3464        %PARSE$SYM(STCLASS=BASED);
       34     3502        %PARSE$OUT(STCLASS=BASED);
       35     3547        %P_PCB(NAME=P$PCB, STCLASS="BASED(QT_GLOBAL.P$PCB$)");
       36     3746        %PAGE(ARG="DCBs");

              3763    1   /***************************************************************************
              3764    1    *                                                                         *
              3765    1    *                                    DCBs                                 *
              3766    1    *                                                                         *
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:13   
              3767    1    ***************************************************************************/

       37     3771    1   DCL M$LO DCB;
       38     3772        %PAGE(ARG="Constants");

              3789    1   /***************************************************************************
              3790    1    *                                                                         *
              3791    1    *                                 Constants                               *
              3792    1    *                                                                         *
              3793    1    ***************************************************************************/

       39     3797    1   DCL CMD_PROMPT CHAR(0) CONSTANT INIT('CMD? ');
       40     3798    1   DCL CMD_PROMPT_V BIT(72) CONSTANT INIT(VECTOR(CMD_PROMPT));
       41     3799        %PAGE(ARG="Auto");

              3816    1   /***************************************************************************
              3817    1    *                                                                         *
              3818    1    *                                    Auto                                 *
              3819    1    *                                                                         *
              3820    1    ***************************************************************************/

       42     3824    1   DCL CPOS UBIN WORD;
       43     3825        %PAGE(ARG="Error codes", PAGE=YES);

PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:14   
              3842    1   /***************************************************************************
              3843    1    *                                                                         *
              3844    1    *                                Error codes                              *
              3845    1    *                                                                         *
              3846    1    ***************************************************************************/

       44     3850        %ERRCODE(NAME=CODE_TNS, CODE#=%E$TNS, FCG#=%FCG_QT, MID#=%MID_A);
       45     3857        %ERRCODE(NAME=CODE_SYN, CODE#=%E$SYN, FCG#=%FCG_QT, MID#=%MID_A);
       46     3864        /*E*       ERROR: QTA-E$TNS-C
       47     3865
       48     3866                 MESSAGE: You must SELECT a TRADER file before using
       49     3867                          this command.
       50     3868             DESCRIPTION: A TRADER file must be selected to perform any
       51     3869                          one of the CREATE, MODIFY or LIST...commands
       52     3870        */
       53     3871        /*E*       ERROR: QTA-E$SYN-C
       54     3872
       55     3873                 MESSAGE: Syntax error
       56     3874             DESCRIPTION: Syntax error
       57     3875        */
       58     3876        %PAGE(ARG="QTA$READ_CMD", PAGE=YES);

PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:15   
              3893    1   /***************************************************************************
              3894    1    *                                                                         *
              3895    1    *                                QTA$READ_CMD                             *
              3896    1    *                                                                         *
              3897    1    ***************************************************************************/

       59     3901    2           DO WHILE('1'B);

       60     3902
       61     3903    2             IF QT_GLOBAL.XCON THEN

   3903  2 000002   000001 234000 xsym               SZN     QT_GLOBAL+1
         2 000003   000005 605000 2                  TPL     s:3908

       62     3904    3               DO;

       63     3905    3                 GOTO RET;

   3905  2 000004   000221 710000 2                  TRA     RET

       64     3906    3               END;
       65     3907
       66     3908    2             QT_GLOBAL.BREAK = '0'B;

   3908  2 000005   000003 450000 xsym               STZ     QT_GLOBAL+3

       67     3909    2             QT_GLOBAL.FIRST_READ = '1'B;

   3909  2 000006   400000 236003                    LDQ     -131072,DU
         2 000007   000002 756000 xsym               STQ     QT_GLOBAL+2

       68     3910
       69     3911    2            CALL XUR$GETCMD(QT_NODES0, QT_CMDBLK.OUT$, CMD_PROMPT_V) ALTRET(PARSE_ERR)
              3911                      ;

   3911  2 000010   000000 630400 3                  EPPR0   0
         2 000011   000021 631400 xsym               EPPR1   B_VECTNIL+17
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:16   
         2 000012   000000 701000 xent               TSX1    XUR$GETCMD
         2 000013   000173 702000 2                  TSX2    PARSE_ERR

       70     3912    2             CALL XUR$ECHOIF(DCBNUM(M$LO));

   3912  2 000014   000000 236007 xsym               LDQ     M$LO,DL
         2 000015   200004 756100                    STQ     CPOS+1,,AUTO
         2 000016   200004 630500                    EPPR0   CPOS+1,,AUTO
         2 000017   200005 450500                    STP0    CPOS+2,,AUTO
         2 000020   200005 630500                    EPPR0   CPOS+2,,AUTO
         2 000021   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000022   000000 701000 xent               TSX1    XUR$ECHOIF
         2 000023   000000 011000                    NOP     0

       71     3913
       72     3914    2             QT_CMDBLK.CODE = QT_CMDBLK.OUT$ -> OUT$BLK.CODE;

   3914  2 000024   000004 470400 xsym               LDP0    QT_CMDBLK+4
         2 000025   000000 236100                    LDQ     0,,PR0
         2 000026   777777 376007                    ANQ     -1,DL
         2 000027   000005 756000 xsym               STQ     QT_CMDBLK+5

       73     3915    2             QT_CMDBLK.TEXT$ = P$PCB.TEXT$;

   3915  2 000030   000027 471400 xsym               LDP1    QT_GLOBAL+23
         2 000031   100000 236100                    LDQ     0,,PR1
         2 000032   000003 756000 xsym               STQ     QT_CMDBLK+3

       74     3916    2             QT_CMDBLK.ARS = P$PCB.NCHARS;

   3916  2 000033   100011 235100                    LDA     9,,PR1
         2 000034   000006 755000 xsym               STA     QT_CMDBLK+6

       75     3917
       76     3918    2             IF NOT QT_GLOBAL.FILE_SELECTED AND

   3918  2 000035   000000 234000 xsym               SZN     QT_GLOBAL
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:17   
         2 000036   000065 604000 2                  TMI     s:3932
         2 000037   000005 235000 xsym               LDA     QT_CMDBLK+5
         2 000040   000001 115007                    CMPA    1,DL
         2 000041   000065 600000 2                  TZE     s:3932
         2 000042   000010 115007                    CMPA    8,DL
         2 000043   000065 600000 2                  TZE     s:3932
         2 000044   000011 115007                    CMPA    9,DL
         2 000045   000065 600000 2                  TZE     s:3932
         2 000046   000020 115007                    CMPA    16,DL
         2 000047   000065 600000 2                  TZE     s:3932
         2 000050   000016 115007                    CMPA    14,DL
         2 000051   000065 600000 2                  TZE     s:3932
         2 000052   000017 115007                    CMPA    15,DL
         2 000053   000065 600000 2                  TZE     s:3932
         2 000054   000030 115007                    CMPA    24,DL
         2 000055   000065 600000 2                  TZE     s:3932

       77     3919    2                 NOT(QT_CMDBLK.CODE = 1 /* NULL */ OR
       78     3920    2                 QT_CMDBLK.CODE = 8 /* END */ OR
       79     3921    2                 QT_CMDBLK.CODE = 9 /* HELP */ OR
       80     3922    2                 QT_CMDBLK.CODE = 16 /* QUIT */ OR
       81     3923    2                 QT_CMDBLK.CODE = 14 /* QUEST */ OR
       82     3924    2                 QT_CMDBLK.CODE = 15 /* DBL_QUEST */ OR
       83     3925    2                 QT_CMDBLK.CODE = 24 /* SELECT */) THEN
       84     3926    3               DO;

       85     3927    3                 QT_CMDBLK.MINOR_ERR = CODE_TNS;

   3927  2 000056   000004 236000 1                  LDQ     CODE_TNS
         2 000057   000001 756000 xsym               STQ     QT_CMDBLK+1

       86     3928    3                 CALL XUR$ERRMSG(CODE_TNS);

   3928  2 000060   000003 630400 3                  EPPR0   3
         2 000061   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000062   000000 701000 xent               TSX1    XUR$ERRMSG
         2 000063   000000 011000                    NOP     0
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:18   

       87     3929    3                 GOTO LOOP;

   3929  2 000064   000220 710000 2                  TRA     LOOP

       88     3930    3               END;
       89     3931
       90     3932    2             IF NOT(QT_CMDBLK.CODE = 14 /* QUEST */ OR

   3932  2 000065   000005 235000 xsym               LDA     QT_CMDBLK+5
         2 000066   000016 115007                    CMPA    14,DL
         2 000067   000073 600000 2                  TZE     s:3938
         2 000070   000017 115007                    CMPA    15,DL
         2 000071   000073 600000 2                  TZE     s:3938

       91     3933    2                 QT_CMDBLK.CODE = 15 /* DBL_QUEST */) THEN
       92     3934    3               DO;

       93     3935    3                 QT_CMDBLK.MINOR_ERR = '0'B;

   3935  2 000072   000001 450000 xsym               STZ     QT_CMDBLK+1

       94     3936    3               END;

       95     3937
       96     3938    3             DO CASE(QT_CMDBLK.CODE);

   3938  2 000073   000031 115007                    CMPA    25,DL
         2 000074   000076 602005 2                  TNC     s:3938+3,AL
         2 000075   000172 710000 2                  TRA     s:3970
         2 000076   000172 710000 2                  TRA     s:3970
         2 000077   000172 710000 2                  TRA     s:3970
         2 000100   000133 710000 2                  TRA     s:3945
         2 000101   000137 710000 2                  TRA     s:3948
         2 000102   000127 710000 2                  TRA     s:3942
         2 000103   000127 710000 2                  TRA     s:3942
         2 000104   000143 710000 2                  TRA     s:3951
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:19   
         2 000105   000143 710000 2                  TRA     s:3951
         2 000106   000157 710000 2                  TRA     s:3960
         2 000107   000147 710000 2                  TRA     s:3954
         2 000110   000153 710000 2                  TRA     s:3957
         2 000111   000153 710000 2                  TRA     s:3957
         2 000112   000133 710000 2                  TRA     s:3945
         2 000113   000137 710000 2                  TRA     s:3948
         2 000114   000147 710000 2                  TRA     s:3954
         2 000115   000147 710000 2                  TRA     s:3954
         2 000116   000157 710000 2                  TRA     s:3960
         2 000117   000163 710000 2                  TRA     s:3963
         2 000120   000172 710000 2                  TRA     s:3970
         2 000121   000172 710000 2                  TRA     s:3970
         2 000122   000172 710000 2                  TRA     s:3970
         2 000123   000172 710000 2                  TRA     s:3970
         2 000124   000172 710000 2                  TRA     s:3970
         2 000125   000172 710000 2                  TRA     s:3970
         2 000126   000167 710000 2                  TRA     s:3966

       97     3939    3               CASE(1 /* NULL */);

       98     3940
       99     3941    3               CASE(4 /* COPY_ENTRY */, 5 /* COPY_FORM */);

      100     3942    3                 CALL QTB$COPY;

   3942  2 000127   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000130   000000 701000 xent               TSX1    QTB$COPY
         2 000131   000000 011000                    NOP     0
         2 000132   000172 710000 2                  TRA     s:3970

      101     3943
      102     3944    3               CASE(2 /* CREATE_ENTRY */, 12 /* MODIFY_ENTRY */);

      103     3945    3                 CALL QTB$CREMOD_E;

   3945  2 000133   000002 631400 xsym               EPPR1   B_VECTNIL+2
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:20   
         2 000134   000000 701000 xent               TSX1    QTB$CREMOD_E
         2 000135   000000 011000                    NOP     0
         2 000136   000172 710000 2                  TRA     s:3970

      104     3946
      105     3947    3               CASE(3 /* CREATE_FORM */, 13 /* MODIFY_FORM */);

      106     3948    3                 CALL QTB$CREMOD_F;

   3948  2 000137   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000140   000000 701000 xent               TSX1    QTB$CREMOD_F
         2 000141   000000 011000                    NOP     0
         2 000142   000172 710000 2                  TRA     s:3970

      107     3949
      108     3950    3               CASE(6 /* DELETE_ENTRY */, 7 /* DELETE_FORM */);

      109     3951    3                 CALL QTB$DELETE;

   3951  2 000143   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000144   000000 701000 xent               TSX1    QTB$DELETE
         2 000145   000000 011000                    NOP     0
         2 000146   000172 710000 2                  TRA     s:3970

      110     3952
      111     3953    3               CASE(9 /* HELP */, 14 /* QUEST */, 15 /* DBL_QUEST */);

      112     3954    3                 CALL QTB$HELP;

   3954  2 000147   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000150   000000 701000 xent               TSX1    QTB$HELP
         2 000151   000000 011000                    NOP     0
         2 000152   000172 710000 2                  TRA     s:3970

      113     3955
      114     3956    3               CASE(10 /* LIST_ENTRY */, 11 /* LIST_FORM */);

PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:21   
      115     3957    3                 CALL QTB$LIST;

   3957  2 000153   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000154   000000 701000 xent               TSX1    QTB$LIST
         2 000155   000000 011000                    NOP     0
         2 000156   000172 710000 2                  TRA     s:3970

      116     3958
      117     3959    3               CASE(8 /* END */, 16 /* QUIT */);

      118     3960    3                 CALL QTB$QUIT;

   3960  2 000157   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000160   000000 701000 xent               TSX1    QTB$QUIT
         2 000161   000000 011000                    NOP     0
         2 000162   000172 710000 2                  TRA     s:3970

      119     3961
      120     3962    3               CASE(17 /* REDOIT */);

      121     3963    3                 CALL QTB$REDOIT;

   3963  2 000163   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000164   000000 701000 xent               TSX1    QTB$REDOIT
         2 000165   000000 011000                    NOP     0
         2 000166   000172 710000 2                  TRA     s:3970

      122     3964
      123     3965    3               CASE(24 /* SELECT */);

      124     3966    3                 CALL QTB$SELECT;

   3966  2 000167   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000170   000000 701000 xent               TSX1    QTB$SELECT
         2 000171   000000 011000                    NOP     0

      125     3967
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:22   
      126     3968    3             END /* CASE */;

      127     3969
      128     3970    3             DO WHILE('0'B);

   3970  2 000172   000220 710000 2                  TRA     LOOP

      129     3971
      130     3972    3   PARSE_ERR:
      131     3973    3               IF QT_CMDBLK.ERR.MON THEN

   3973  2 000173   000004 236000 xsym  PARSE_ERR    LDQ     QT_CMDBLK+4
         2 000174   400000 316007                    CANQ    -131072,DL
         2 000175   000177 600000 2                  TZE     s:3978

      132     3974    4                 DO;

      133     3975    4                   GOTO RET;

   3975  2 000176   000221 710000 2                  TRA     RET

      134     3976    4                 END;
      135     3977
      136     3978    3               CPOS = P$PCB.HI_CHAR;

   3978  2 000177   000027 470400 xsym               LDP0    QT_GLOBAL+23
         2 000200   000012 235100                    LDA     10,,PR0
         2 000201   200003 755100                    STA     CPOS,,AUTO

      137     3979    3               CALL XUR$ERRPTR(CPOS, QT_GLOBAL.M$DO#);

   3979  2 000202   000004 236000 3                  LDQ     4
         2 000203   200005 756100                    STQ     CPOS+2,,AUTO
         2 000204   200003 631500                    EPPR1   CPOS,,AUTO
         2 000205   200004 451500                    STP1    CPOS+1,,AUTO
         2 000206   200004 630500                    EPPR0   CPOS+1,,AUTO
         2 000207   000020 631400 xsym               EPPR1   B_VECTNIL+16
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:23   
         2 000210   000000 701000 xent               TSX1    XUR$ERRPTR
         2 000211   000000 011000                    NOP     0

      138     3980    3               QT_CMDBLK.MINOR_ERR = CODE_SYN;

   3980  2 000212   000005 236000 1                  LDQ     CODE_SYN
         2 000213   000001 756000 xsym               STQ     QT_CMDBLK+1

      139     3981    3               CALL XUR$ERRMSG(CODE_SYN);

   3981  2 000214   000005 630400 3                  EPPR0   5
         2 000215   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000216   000000 701000 xent               TSX1    XUR$ERRMSG
         2 000217   000000 011000                    NOP     0

      140     3982    3             END /* NEVER */;

      141     3983
      142     3984    2   LOOP:
      143     3985    2           END /* WHILE */;

   3985  2 000220   000002 710000 2     LOOP         TRA     s:3903

      144     3986
      145     3987    1   RET:
      146     3988    1           RETURN;

   3988  2 000221   000000 702200 xent  RET          TSX2  ! X66_ARET
      147     3989
      148     3990    1   END QTA$READ_CMD;

PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:24   
--  Include file information  --

   XUR_ENTRY.:E05TOU  cannot be made into a system file and is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
   Q_ERRCODE_C.:E05TOU  is referenced.
   QT_PERR_C.:E05TOU  is referenced.
   QT_SUBS_C.:E05TOU  is referenced.
   QT_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   Q_PAGE_C.:E05TOU  is referenced.
      No diagnostics issued in procedure QTA$READ_CMD.
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:25   

 **** Variables and constants ****

  ****  Section 001 RoData QTA$READ_CMD

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(5)     r     1 CMD_PROMPT                 2-0-0/b BIT (72)    r     1 CMD_PROMPT_V
     5-0-0/b STRC        r     1 CODE_SYN                   4-0-0/b STRC        r     1 CODE_TNS

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w UBIN        r     1 CPOS

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(261)   r     1 QT_CMDBLK                  0-0-0/w STRC(1872)  r     1 QT_GLOBAL
     0-0-0/w UBIN        r     1 QT_NODES0

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0N  NULL        r     1 M$LO                       0-0-0/w STRC(144)   r     1 OUT$BLK
     0-0-0/w ASTR(153)   r     1 OUT$SYM                    0-0-0/w STRC(504)   r     1 P$PCB


   Procedure QTA$READ_CMD requires 146 words for executable code.
   Procedure QTA$READ_CMD requires 6 words of local(AUTO) storage.
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:26   

    No errors detected in file QTA$READ_CMD.:E05TSI    .
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:27   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:28   
          MINI XREF LISTING

CMD_PROMPT
      3797**DCL      3798--DCLINIT
CMD_PROMPT_V
      3798**DCL      3911<>CALL
CODE_SYN
      3858**DCL      3980>>ASSIGN   3981<>CALL
CODE_TNS
      3851**DCL      3927>>ASSIGN   3928<>CALL
CPOS
      3824**DCL      3978<<ASSIGN   3979<>CALL
LOOP
      3985**LABEL    3929--GOTO
M$LO
      3771**DCL      3912<>CALL
OUT$BLK.CODE
      3516**DCL      3914>>ASSIGN
OUT$SYM.COUNT
      3494**DCL      3497--IMP-SIZ
P$PCB.HI_CHAR
      3716**DCL      3978>>ASSIGN
P$PCB.NCHARS
      3712**DCL      3916>>ASSIGN
P$PCB.TEXT$
      3566**DCL      3915>>ASSIGN
PARSE_ERR
      3973**LABEL    3911--CALLALT
QTB$COPY
      3372**DCL-ENT  3942--CALL
QTB$CREMOD_E
      3373**DCL-ENT  3945--CALL
QTB$CREMOD_F
      3374**DCL-ENT  3948--CALL
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:29   
QTB$DELETE
      3375**DCL-ENT  3951--CALL
QTB$HELP
      3376**DCL-ENT  3954--CALL
QTB$LIST
      3377**DCL-ENT  3957--CALL
QTB$QUIT
      3378**DCL-ENT  3960--CALL
QTB$REDOIT
      3379**DCL-ENT  3963--CALL
QTB$SELECT
      3380**DCL-ENT  3966--CALL
QT_CMDBLK.ARS
        81**DCL      3916<<ASSIGN
QT_CMDBLK.CODE
        81**DCL      3914<<ASSIGN   3918>>IF       3918>>IF       3918>>IF       3918>>IF       3918>>IF
      3918>>IF       3918>>IF       3932>>IF       3932>>IF       3938>>DOCASE
QT_CMDBLK.ERR.MON
        81**DCL      3973>>IF
QT_CMDBLK.MINOR_ERR
        80**DCL      3927<<ASSIGN   3935<<ASSIGN   3980<<ASSIGN
QT_CMDBLK.OUT$
        80**DCL        81--REDEF    3911<>CALL     3914>>ASSIGN
QT_CMDBLK.TEXT$
        80**DCL      3915<<ASSIGN
QT_GLOBAL.BREAK
        77**DCL      3908<<ASSIGN
QT_GLOBAL.FILE_SELECTED
        77**DCL      3918>>IF
QT_GLOBAL.FIRST_READ
        77**DCL      3909<<ASSIGN
QT_GLOBAL.M$DO#
        79**DCL      3979<>CALL
QT_GLOBAL.P$PCB$
        78**DCL      3565--IMP-PTR  3915>>ASSIGN   3916>>ASSIGN   3978>>ASSIGN
QT_GLOBAL.XCON
PL6.E3A0      #001=QTA$READ_CMD File=QTA$READ_CMD.:E05TSI                        WED 07/30/97 05:45 Page:30   
        77**DCL      3903>>IF
QT_NODES0
      3438**DCL      3911<>CALL
RET
      3988**LABEL    3905--GOTO     3975--GOTO
XUR$ECHOIF
      3390**DCL-ENT  3912--CALL
XUR$ERRMSG
      3396**DCL-ENT  3928--CALL     3981--CALL
XUR$ERRPTR
      3389**DCL-ENT  3979--CALL
XUR$GETCMD
      3388**DCL-ENT  3911--CALL
