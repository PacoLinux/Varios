
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:1    
        1        1        /*M*     ZIG$DDS2            I-D-S/II  DBACS DIRECTIVE READER */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*P*
        8        8        NAME:    ZIG$DDS2
        9        9        PURPOSE: TO GET A LINE FOR THE PARSER OF DBACS DIRECTIVES
       10       10                 AND STORE THEM IN A BUFFER
       11       11            CALLING PROGRAMS         SUBROUTINE NAMES
       12       12            ----------------         ----------------
       13       13                 ZIG$DDS1                 DRIV
       14       14                 ZIG$DDS3                 SET_FLAGS
       15       15        */
       16       16        ZIG$DDS2:
       17       17            PROC ;
       18       18    1   DCL RDWORD BIT (1) EXT;
       19       19    1   DCL ZIG$DDS5 ENTRY;
       20       20    1   DCL REC CHAR (80) EXT;
       21       21    1   DCL REC1 CHAR (80) EXT;
       22       22    1   DCL EOFFLG UBIN (36) EXT;
       23       23    1   DCL LINE_COUNT UBIN (36) EXT;
       24       24    1   DCL SAVESW BIT (1) EXT;
       25       25    1   DCL SRC CHAR (80) EXT;
       26       26    1   DCL ZIG$DDER ENTRY (1);
       27       27    1   DCL NUM_CHAR_READ UBIN (36) EXT;
       28       28    1   DCL I UBIN (36);
       29       29    1   DCL LINE CHAR (4000) INIT (' ') EXT;
       30       30    1   DCL FLAG BIT (1);
       31       31    1   DCL LAST_COUNT UBIN (36) SYMREF;
       32       32    1   DCL LINE_NUM CHAR (4) EXT;
       33       33    1   DCL K UBIN (36);
       34       34    1   DCL PUT_OUT_LINE ENTRY (2);
       35       35    1   DCL M$SI DCB;
       36       36    1   DCL INIT1 BIT (1);
       37       37    1   DCL NEW_LINE BIT (1) EXT INIT ('1'B);
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:2    
       38       38         %EJECT;
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:3    
       39       39         %INCLUDE XU_MACRO_C;
       40     3145         %INCLUDE ZI_ERRORS_SUBS;
       41     3665         %INCLUDE ZIG_GENERAL;
       42     3773         %P$PCB(NAME=PCB_DBACS, STCLASS = "SYMREF");
       43     3974         %EJECT;
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:4    
       44     3975    1       INIT1 = '1'B;
       45     3976    2       DO WHILE ((REC=' ' | INIT1) & EOFFLG = 0 &(NEW_LINE | INIT1));
       46     3977        /*********
       47     3978                 Skip black lines.
       48     3979                 Savesw indicates that we have a line that needs to
       49     3980                 be printed out at this point before the read is done.
       50     3981        ********/
       51     3982    2           IF SAVESW
       52     3983    3           THEN DO;
       53     3984    3               CALL PUT_OUT_LINE(LINE_COUNT,REC);
       54     3985    3               LINE_COUNT = LINE_COUNT + 1;
       55     3986    3               END;
       56     3987    2           SAVESW = '1'B;
       57     3988    2           IF RDWORD THEN
       58     3989    2               CALL ZIG$DDS5 /* Get a record */;
       59     3990    2           INIT1 = '0'B;
       60     3991    2           RDWORD = '1'B;
       61     3992    2           END;
       62     3993        /*****
       63     3994                 Find then number of characters read in the last
       64     3995                 read done by exread.
       65     3996        ******/
       66     3997    1       REC1 = REC;
       67     3998    1       IF LINE = ' ' THEN PCB_DBACS.NCHARS = 0;
       68     3999    1       IF (PCB_DBACS.NCHARS=0 & (SUBSTR(REC1,0,4)='END ' |
       69     4000    1          SUBSTR(REC1,0,2) = 'E ' | SUBSTR(REC1,0,2) = 'X ' |
       70     4001    1          SUBSTR(REC1,0,2) = 'Q ' | SUBSTR(REC1,0,5) = 'QUIT ')
       71     4002    1          & NUM_CHAR_READ < 7)
       72     4003    2       THEN DO;
       73     4004        /*******
       74     4005                 If the user is a the start of a command and he wants
       75     4006                 to stop dbacs he types in 'E' or 'END' or 'Q' or 'QUIT'
       76     4007                 or 'X' to stop the processor.
       77     4008        *******/
       78     4009    2           EOFFLG = 1;
       79     4010    2           RETURN;
       80     4011    2           END;
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:5    
       81     4012    1       LAST_COUNT = PCB_DBACS.NCHARS;
       82     4013    1       I = NUM_CHAR_READ ;
       83     4014    1       FLAG = '0'B;
       84     4015        /*********
       85     4016        	scan from back of record to find the first non
       86     4017        	blank CHARACTER.(FIND the end of the record).
       87     4018        **********/
       88     4019    1       CALL SEARCHR(I,K,SEARCHR_NB,REC1);
       89     4020    1       CALL XLATE(REC1,Q2_PERCENT,REC1);
       90     4021    1       CALL INSERT(LINE,PCB_DBACS.NCHARS,I+1,SUBSTR(REC1,0,I+1));
       91     4022    1       PCB_DBACS.NCHARS = PCB_DBACS.NCHARS + I + 1;
       92     4023        /********
       93     4024        	don't add a ';' if this is the end of the directive or in the
       94     4025            help directive if we have a ids.
       95     4026        *********/
       96     4027    1       IF (I>2)
       97     4028    1       THEN IF (SUBSTR(REC1,I-3,4) = ' END'|(SUBSTR(REC1,0,3)='END'&
       98     4029    1              NUM_CHAR_READ=3)|(SUBSTR(REC1,0,4)='HELP')|(SUBSTR(REC1,0,1)='?'))
       99     4030    1           THEN FLAG = '1'B;
      100     4031    1       IF ((SUBSTR(REC1,I,1) ~= ';') & (~FLAG))
      101     4032    2       THEN DO;
      102     4033    2           CALL INSERT(LINE,PCB_DBACS.NCHARS,3,' #;');
      103     4034    2           PCB_DBACS.NCHARS = PCB_DBACS.NCHARS + 3;
      104     4035    2           END;
      105     4036        /*********
      106     4037        	replace all '"' with '%' so that X$PARSE doesn't
      107     4038        	think that what is in '"' is a comment and skips
      108     4039        	over it.
      109     4040        *********/
      110     4041    1   END ZIG$DDS2;

PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:6    
--  Include file information  --

   ZIG_GENERAL.:ZIC0TOU  cannot be made into a system file and is referenced.
   ZI_ERRORS_SUBS.:ZIC0TOU  is referenced.
   XU_MACRO_C.:LIB_E05  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure ZIG$DDS2.

   Procedure ZIG$DDS2 requires 224 words for executable code.
   Procedure ZIG$DDS2 requires 20 words of local(AUTO) storage.

    No errors detected in file ZIG$DDS2.:ZIC0TSI    .

PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:7    

 Object Unit name= ZIG$DDS2                                   File name= ZIG$DDS2.:ZIC0TOU
 UTS= SEP 05 '97 11:48:18.12 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  LblCom even  none     1      1  RDWORD
    1  LblCom even  none    20     24  REC
    2  LblCom even  none    20     24  REC1
    3  LblCom even  none     1      1  EOFFLG
    4  LblCom even  none     1      1  LINE_COUNT
    5  LblCom even  none     1      1  SAVESW
    6  LblCom even  none    20     24  SRC
    7  LblCom even  none     1      1  NUM_CHAR_READ
    8  LblCom even  none  1000   1750  LINE
    9  LblCom even  none     1      1  LINE_NUM
   10   DCB   even  none     0      0  M$SI
   11  LblCom even  none     1      1  NEW_LINE
   12  LblCom even  none     1      1  NUM_ERROR_MSG
   13  LblCom even  none     1      1  NUM_WARN_MSG
   14  LblCom even  none     1      1  ALLOCATE_END
   15  LblCom even  none     2      2  SUBSCHEMA_KEY
   16  LblCom even  none     1      1  BUFFER$
   17  LblCom even  none     1      1  ERROR_IO
   18  LblCom even  none     1      1  BUFFER_LEN
   19  LblCom even  none     2      2  UWA_KEY
   20  LblCom even  none     1      1  NEXT_UWA_SECOND_HALF
   21  LblCom even  none     2      2  RVA_KEY
   22  LblCom even  none     2      2  IA__KEY
   23  LblCom even  none     1      1  NEXT_RVA_SECOND_HALF
   24  LblCom even  none    32     40  SEARCHR_NB
   25  LblCom even  none    32     40  SEM_COM
   26  LblCom even  none    32     40  DMCL_XLATE
   27  LblCom even  none    32     40  Q2_PERCENT
   28  RoData even  UTS      9     11  ZIG$DDS2
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:8    
   29   Proc  even  none   224    340  ZIG$DDS2
   30  RoData even  none     7      7  ZIG$DDS2

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
    29      0   yes            yes      Std        0  ZIG$DDS2

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       2 PUT_OUT_LINE
         yes           Std       0 ZIG$DDS5
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     LAST_COUNT                            M$SI                                  PCB_DBACS

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:9    


        1        1        /*M*     ZIG$DDS2            I-D-S/II  DBACS DIRECTIVE READER */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*P*
        8        8        NAME:    ZIG$DDS2
        9        9        PURPOSE: TO GET A LINE FOR THE PARSER OF DBACS DIRECTIVES
       10       10                 AND STORE THEM IN A BUFFER
       11       11            CALLING PROGRAMS         SUBROUTINE NAMES
       12       12            ----------------         ----------------
       13       13                 ZIG$DDS1                 DRIV
       14       14                 ZIG$DDS3                 SET_FLAGS
       15       15        */
       16       16        ZIG$DDS2:
       17       17            PROC ;

     17 29 000000   000000 700200 xent  ZIG$DDS2     TSX0  ! X66_AUTO_0
        29 000001   000024 000000                    ZERO    20,0

       18       18    1   DCL RDWORD BIT (1) EXT;
       19       19    1   DCL ZIG$DDS5 ENTRY;
       20       20    1   DCL REC CHAR (80) EXT;
       21       21    1   DCL REC1 CHAR (80) EXT;
       22       22    1   DCL EOFFLG UBIN (36) EXT;
       23       23    1   DCL LINE_COUNT UBIN (36) EXT;
       24       24    1   DCL SAVESW BIT (1) EXT;
       25       25    1   DCL SRC CHAR (80) EXT;
       26       26    1   DCL ZIG$DDER ENTRY (1);
       27       27    1   DCL NUM_CHAR_READ UBIN (36) EXT;
       28       28    1   DCL I UBIN (36);
       29       29    1   DCL LINE CHAR (4000) INIT (' ') EXT;
       30       30    1   DCL FLAG BIT (1);
       31       31    1   DCL LAST_COUNT UBIN (36) SYMREF;
       32       32    1   DCL LINE_NUM CHAR (4) EXT;
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:10   
       33       33    1   DCL K UBIN (36);
       34       34    1   DCL PUT_OUT_LINE ENTRY (2);
       35       35    1   DCL M$SI DCB;
       36       36    1   DCL INIT1 BIT (1);
       37       37    1   DCL NEW_LINE BIT (1) EXT INIT ('1'B);
       38       38         %EJECT;
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:11   
       39       39         %INCLUDE XU_MACRO_C;
       40     3145         %INCLUDE ZI_ERRORS_SUBS;
       41     3665         %INCLUDE ZIG_GENERAL;
       42     3773         %P$PCB(NAME=PCB_DBACS, STCLASS = "SYMREF");
       43     3974         %EJECT;
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:12   
       44     3975    1       INIT1 = '1'B;

   3975 29 000002   400000 236003                    LDQ     -131072,DU
        29 000003   200006 756100                    STQ     INIT1,,AUTO

       45     3976    2       DO WHILE ((REC=' ' | INIT1) & EOFFLG = 0 &(NEW_LINE | INIT1));

   3976 29 000004   000030 710000 29                 TRA     s:3992

       46     3977        /*********
       47     3978                 Skip black lines.
       48     3979                 Savesw indicates that we have a line that needs to
       49     3980                 be printed out at this point before the read is done.
       50     3981        ********/
       51     3982    2           IF SAVESW

   3982 29 000005   000000 234000 5                  SZN     SAVESW
        29 000006   000016 605000 29                 TPL     s:3987

       52     3983    3           THEN DO;

       53     3984    3               CALL PUT_OUT_LINE(LINE_COUNT,REC);

   3984 29 000007   000001 630400 30                 EPPR0   1
        29 000010   000000 631400 30                 EPPR1   0
        29 000011   000000 701000 xent               TSX1    PUT_OUT_LINE
        29 000012   000000 011000                    NOP     0

       54     3985    3               LINE_COUNT = LINE_COUNT + 1;

   3985 29 000013   000000 235000 4                  LDA     LINE_COUNT
        29 000014   000001 035007                    ADLA    1,DL
        29 000015   000000 755000 4                  STA     LINE_COUNT

       55     3986    3               END;

       56     3987    2           SAVESW = '1'B;
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:13   

   3987 29 000016   400000 236003                    LDQ     -131072,DU
        29 000017   000000 756000 5                  STQ     SAVESW

       57     3988    2           IF RDWORD THEN

   3988 29 000020   000000 234000 0                  SZN     RDWORD
        29 000021   000025 605000 29                 TPL     s:3990

       58     3989    2               CALL ZIG$DDS5 /* Get a record */;

   3989 29 000022   000003 631400 30                 EPPR1   3
        29 000023   000000 701000 xent               TSX1    ZIG$DDS5
        29 000024   000000 011000                    NOP     0

       59     3990    2           INIT1 = '0'B;

   3990 29 000025   200006 450100                    STZ     INIT1,,AUTO

       60     3991    2           RDWORD = '1'B;

   3991 29 000026   400000 236003                    LDQ     -131072,DU
        29 000027   000000 756000 0                  STQ     RDWORD

       61     3992    2           END;

   3992 29 000030   400000 220003                    LDX0    -131072,DU
        29 000031   040000 106400                    CMPC    fill='040'O
        29 000032   000000 000120 1                  ADSC9   REC                      cn=0,n=80
        29 000033   000004 000001 30                 ADSC9   4                        cn=0,n=1
        29 000034   000036 600000 29                 TZE     s:3992+6
        29 000035   000000 220003                    LDX0    0,DU
        29 000036   200006 236100                    LDQ     INIT1,,AUTO
        29 000037   400000 376003                    ANQ     -131072,DU
        29 000040   200010 756100                    STQ     INIT1+2,,AUTO
        29 000041   000000 636010                    EAQ     0,X0
        29 000042   200010 276100                    ORQ     INIT1+2,,AUTO
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:14   
        29 000043   400000 220003                    LDX0    -131072,DU
        29 000044   000000 235000 3                  LDA     EOFFLG
        29 000045   000047 600000 29                 TZE     s:3992+15
        29 000046   000000 220003                    LDX0    0,DU
        29 000047   200011 756100                    STQ     INIT1+3,,AUTO
        29 000050   000000 636010                    EAQ     0,X0
        29 000051   200012 756100                    STQ     INIT1+4,,AUTO
        29 000052   200011 236100                    LDQ     INIT1+3,,AUTO
        29 000053   200012 376100                    ANQ     INIT1+4,,AUTO
        29 000054   200013 756100                    STQ     INIT1+5,,AUTO
        29 000055   200006 236100                    LDQ     INIT1,,AUTO
        29 000056   400000 376003                    ANQ     -131072,DU
        29 000057   200014 756100                    STQ     INIT1+6,,AUTO
        29 000060   000000 236000 11                 LDQ     NEW_LINE
        29 000061   400000 376003                    ANQ     -131072,DU
        29 000062   200014 276100                    ORQ     INIT1+6,,AUTO
        29 000063   200013 376100                    ANQ     INIT1+5,,AUTO
        29 000064   000005 601000 29                 TNZ     s:3982

       62     3993        /*****
       63     3994                 Find then number of characters read in the last
       64     3995                 read done by exread.
       65     3996        ******/
       66     3997    1       REC1 = REC;

   3997 29 000065   040000 100400                    MLR     fill='040'O
        29 000066   000000 000120 1                  ADSC9   REC                      cn=0,n=80
        29 000067   000000 000120 2                  ADSC9   REC1                     cn=0,n=80

       67     3998    1       IF LINE = ' ' THEN PCB_DBACS.NCHARS = 0;

   3998 29 000070   040000 106400                    CMPC    fill='040'O
        29 000071   000000 007640 8                  ADSC9   LINE                     cn=0,n=4000
        29 000072   000004 000001 30                 ADSC9   4                        cn=0,n=1
        29 000073   000075 601000 29                 TNZ     s:3999

   3998 29 000074   000011 450000 xsym               STZ     PCB_DBACS+9
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:15   

       68     3999    1       IF (PCB_DBACS.NCHARS=0 & (SUBSTR(REC1,0,4)='END ' |

   3999 29 000075   400000 220003                    LDX0    -131072,DU
        29 000076   000000 236000 2                  LDQ     REC1
        29 000077   000000 116000 28                 CMPQ    0
        29 000100   000102 600000 29                 TZE     s:3999+5
        29 000101   000000 220003                    LDX0    0,DU
        29 000102   400000 221003                    LDX1    -131072,DU
        29 000103   000000 222000 2                  LDX2    REC1
        29 000104   000001 102000 28                 CMPX2   1
        29 000105   000107 600000 29                 TZE     s:3999+10
        29 000106   000000 221003                    LDX1    0,DU
        29 000107   000000 636011                    EAQ     0,X1
        29 000110   200010 756100                    STQ     INIT1+2,,AUTO
        29 000111   000000 636010                    EAQ     0,X0
        29 000112   200010 276100                    ORQ     INIT1+2,,AUTO
        29 000113   400000 220003                    LDX0    -131072,DU
        29 000114   000002 102000 28                 CMPX2   2
        29 000115   000117 600000 29                 TZE     s:3999+18
        29 000116   000000 220003                    LDX0    0,DU
        29 000117   200011 756100                    STQ     INIT1+3,,AUTO
        29 000120   000000 636010                    EAQ     0,X0
        29 000121   200012 756100                    STQ     INIT1+4,,AUTO
        29 000122   200011 236100                    LDQ     INIT1+3,,AUTO
        29 000123   200012 276100                    ORQ     INIT1+4,,AUTO
        29 000124   400000 220003                    LDX0    -131072,DU
        29 000125   000003 102000 28                 CMPX2   3
        29 000126   000130 600000 29                 TZE     s:3999+27
        29 000127   000000 220003                    LDX0    0,DU
        29 000130   200013 756100                    STQ     INIT1+5,,AUTO
        29 000131   000000 636010                    EAQ     0,X0
        29 000132   200014 756100                    STQ     INIT1+6,,AUTO
        29 000133   200013 236100                    LDQ     INIT1+5,,AUTO
        29 000134   200014 276100                    ORQ     INIT1+6,,AUTO
        29 000135   400000 220003                    LDX0    -131072,DU
        29 000136   040000 106400                    CMPC    fill='040'O
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:16   
        29 000137   000000 000005 2                  ADSC9   REC1                     cn=0,n=5
        29 000140   000004 000005 28                 ADSC9   4                        cn=0,n=5
        29 000141   000143 600000 29                 TZE     s:3999+38
        29 000142   000000 220003                    LDX0    0,DU
        29 000143   200015 756100                    STQ     INIT1+7,,AUTO
        29 000144   000000 636010                    EAQ     0,X0
        29 000145   200016 756100                    STQ     INIT1+8,,AUTO
        29 000146   200015 236100                    LDQ     INIT1+7,,AUTO
        29 000147   200016 276100                    ORQ     INIT1+8,,AUTO
        29 000150   400000 220003                    LDX0    -131072,DU
        29 000151   000011 235000 xsym               LDA     PCB_DBACS+9
        29 000152   000154 600000 29                 TZE     s:3999+47
        29 000153   000000 220003                    LDX0    0,DU
        29 000154   200017 756100                    STQ     INIT1+9,,AUTO
        29 000155   000000 636010                    EAQ     0,X0
        29 000156   200020 756100                    STQ     INIT1+10,,AUTO
        29 000157   200017 236100                    LDQ     INIT1+9,,AUTO
        29 000160   200020 376100                    ANQ     INIT1+10,,AUTO
        29 000161   400000 220003                    LDX0    -131072,DU
        29 000162   000000 235000 7                  LDA     NUM_CHAR_READ
        29 000163   000007 115007                    CMPA    7,DL
        29 000164   000166 602000 29                 TNC     s:3999+57
        29 000165   000000 220003                    LDX0    0,DU
        29 000166   200021 756100                    STQ     INIT1+11,,AUTO
        29 000167   000000 636010                    EAQ     0,X0
        29 000170   200022 756100                    STQ     INIT1+12,,AUTO
        29 000171   200021 236100                    LDQ     INIT1+11,,AUTO
        29 000172   200022 376100                    ANQ     INIT1+12,,AUTO
        29 000173   000177 600000 29                 TZE     s:4012

       69     4000    1          SUBSTR(REC1,0,2) = 'E ' | SUBSTR(REC1,0,2) = 'X ' |
       70     4001    1          SUBSTR(REC1,0,2) = 'Q ' | SUBSTR(REC1,0,5) = 'QUIT ')
       71     4002    1          & NUM_CHAR_READ < 7)
       72     4003    2       THEN DO;

       73     4004        /*******
       74     4005                 If the user is a the start of a command and he wants
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:17   
       75     4006                 to stop dbacs he types in 'E' or 'END' or 'Q' or 'QUIT'
       76     4007                 or 'X' to stop the processor.
       77     4008        *******/
       78     4009    2           EOFFLG = 1;

   4009 29 000174   000001 236007                    LDQ     1,DL
        29 000175   000000 756000 3                  STQ     EOFFLG

       79     4010    2           RETURN;

   4010 29 000176   000000 702200 xent               TSX2  ! X66_ARET

       80     4011    2           END;
       81     4012    1       LAST_COUNT = PCB_DBACS.NCHARS;

   4012 29 000177   000011 236000 xsym               LDQ     PCB_DBACS+9
        29 000200   000000 756000 xsym               STQ     LAST_COUNT

       82     4013    1       I = NUM_CHAR_READ ;

   4013 29 000201   200003 755100                    STA     I,,AUTO

       83     4014    1       FLAG = '0'B;

   4014 29 000202   200004 450100                    STZ     FLAG,,AUTO

       84     4015        /*********
       85     4016        	scan from back of record to find the first non
       86     4017        	blank CHARACTER.(FIND the end of the record).
       87     4018        **********/
       88     4019    1       CALL SEARCHR(I,K,SEARCHR_NB,REC1);

   4019 29 000203   000000 165400                    TCTR
        29 000204   000000 000120 2                  ADSC9   REC1                     cn=0,n=80
        29 000205   000000 000000 24                 ARG     SEARCHR_NB
        29 000206   200003 000100                    ARG     I,,AUTO
        29 000207   200003 235100                    LDA     I,,AUTO
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:18   
        29 000210   000033 771000                    ARL     27
        29 000211   200005 755100                    STA     K,,AUTO
        29 000212   200003 551140                    STBA    I,'40'O,AUTO
        29 000213   000216 606400 29                 TTN     s:4020
        29 000214   000117 236007                    LDQ     79,DL
        29 000215   200003 156100                    SSQ     I,,AUTO

       89     4020    1       CALL XLATE(REC1,Q2_PERCENT,REC1);

   4020 29 000216   040000 160400                    MVT     fill='040'O
        29 000217   000000 000120 2                  ADSC9   REC1                     cn=0,n=80
        29 000220   000000 000120 2                  ADSC9   REC1                     cn=0,n=80
        29 000221   000000 000000 27                 ARG     Q2_PERCENT

       90     4021    1       CALL INSERT(LINE,PCB_DBACS.NCHARS,I+1,SUBSTR(REC1,0,I+1));

   4021 29 000222   200003 720100                    LXL0    I,,AUTO
        29 000223   000001 621010                    EAX1    1,X0
        29 000224   000011 236000 xsym               LDQ     PCB_DBACS+9
        29 000225   040046 100440                    MLR     fill='040'O
        29 000226   000000 000011 2                  ADSC9   REC1                     cn=0,n=*X1
        29 000227   000000 000011 8                  ADSC9   LINE,Q                   cn=0,n=*X1

       91     4022    1       PCB_DBACS.NCHARS = PCB_DBACS.NCHARS + I + 1;

   4022 29 000230   200003 036100                    ADLQ    I,,AUTO
        29 000231   000001 036007                    ADLQ    1,DL
        29 000232   000011 756000 xsym               STQ     PCB_DBACS+9

       92     4023        /********
       93     4024        	don't add a ';' if this is the end of the directive or in the
       94     4025            help directive if we have a ids.
       95     4026        *********/
       96     4027    1       IF (I>2)

   4027 29 000233   200003 235100                    LDA     I,,AUTO
        29 000234   000003 115007                    CMPA    3,DL
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:19   
        29 000235   000314 602000 29                 TNC     s:4031

       97     4028    1       THEN IF (SUBSTR(REC1,I-3,4) = ' END'|(SUBSTR(REC1,0,3)='END'&

   4028 29 000236   400000 222003                    LDX2    -131072,DU
        29 000237   000000 236000 2                  LDQ     REC1
        29 000240   000000 676000 28                 ERQ     0
        29 000241   000005 376000 30                 ANQ     5
        29 000242   000244 600000 29                 TZE     s:4028+6
        29 000243   000000 222003                    LDX2    0,DU
        29 000244   400000 223003                    LDX3    -131072,DU
        29 000245   000000 236000 7                  LDQ     NUM_CHAR_READ
        29 000246   000003 116007                    CMPQ    3,DL
        29 000247   000251 600000 29                 TZE     s:4028+11
        29 000250   000000 223003                    LDX3    0,DU
        29 000251   000000 636013                    EAQ     0,X3
        29 000252   200010 756100                    STQ     INIT1+2,,AUTO
        29 000253   000000 636012                    EAQ     0,X2
        29 000254   200010 376100                    ANQ     INIT1+2,,AUTO
        29 000255   400000 222003                    LDX2    -131072,DU
        29 000256   040000 106405                    CMPC    fill='040'O
        29 000257   777777 200004 2                  ADSC9   REC1-1,A                 cn=1,n=4
        29 000260   000006 000004 28                 ADSC9   6                        cn=0,n=4
        29 000261   000263 600000 29                 TZE     s:4028+21
        29 000262   000000 222003                    LDX2    0,DU
        29 000263   200011 756100                    STQ     INIT1+3,,AUTO
        29 000264   000000 636012                    EAQ     0,X2
        29 000265   200012 756100                    STQ     INIT1+4,,AUTO
        29 000266   200011 236100                    LDQ     INIT1+3,,AUTO
        29 000267   200012 276100                    ORQ     INIT1+4,,AUTO
        29 000270   400000 222003                    LDX2    -131072,DU
        29 000271   200013 756100                    STQ     INIT1+5,,AUTO
        29 000272   000000 236000 2                  LDQ     REC1
        29 000273   000007 116000 28                 CMPQ    7
        29 000274   000276 600000 29                 TZE     s:4028+32
        29 000275   000000 222003                    LDX2    0,DU
        29 000276   000000 636012                    EAQ     0,X2
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:20   
        29 000277   200013 276100                    ORQ     INIT1+5,,AUTO
        29 000300   400000 222003                    LDX2    -131072,DU
        29 000301   200014 756100                    STQ     INIT1+6,,AUTO
        29 000302   000000 236000 2                  LDQ     REC1
        29 000303   777000 376003                    ANQ     -512,DU
        29 000304   077000 116003                    CMPQ    32256,DU
        29 000305   000307 600000 29                 TZE     s:4028+41
        29 000306   000000 222003                    LDX2    0,DU
        29 000307   000000 636012                    EAQ     0,X2
        29 000310   200014 276100                    ORQ     INIT1+6,,AUTO
        29 000311   000314 600000 29                 TZE     s:4031

       98     4029    1              NUM_CHAR_READ=3)|(SUBSTR(REC1,0,4)='HELP')|(SUBSTR(REC1,0,1)='?'))
       99     4030    1           THEN FLAG = '1'B;

   4030 29 000312   400000 236003                    LDQ     -131072,DU
        29 000313   200004 756100                    STQ     FLAG,,AUTO

      100     4031    1       IF ((SUBSTR(REC1,I,1) ~= ';') & (~FLAG))

   4031 29 000314   400000 222003                    LDX2    -131072,DU
        29 000315   040000 106405                    CMPC    fill='040'O
        29 000316   000000 000001 2                  ADSC9   REC1,A                   cn=0,n=1
        29 000317   000006 000001 30                 ADSC9   6                        cn=0,n=1
        29 000320   000322 601000 29                 TNZ     s:4031+6
        29 000321   000000 222003                    LDX2    0,DU
        29 000322   200004 236100                    LDQ     FLAG,,AUTO
        29 000323   400000 376003                    ANQ     -131072,DU
        29 000324   400000 676003                    ERQ     -131072,DU
        29 000325   200010 756100                    STQ     INIT1+2,,AUTO
        29 000326   000000 636012                    EAQ     0,X2
        29 000327   200010 376100                    ANQ     INIT1+2,,AUTO
        29 000330   000337 600000 29                 TZE     s:4041

      101     4032    2       THEN DO;

      102     4033    2           CALL INSERT(LINE,PCB_DBACS.NCHARS,3,' #;');
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:21   

   4033 29 000331   000011 236000 xsym               LDQ     PCB_DBACS+9
        29 000332   040006 100400                    MLR     fill='040'O
        29 000333   000010 000003 28                 ADSC9   8                        cn=0,n=3
        29 000334   000000 000003 8                  ADSC9   LINE,Q                   cn=0,n=3

      103     4034    2           PCB_DBACS.NCHARS = PCB_DBACS.NCHARS + 3;

   4034 29 000335   000003 036007                    ADLQ    3,DL
        29 000336   000011 756000 xsym               STQ     PCB_DBACS+9

      104     4035    2           END;

      105     4036        /*********
      106     4037        	replace all '"' with '%' so that X$PARSE doesn't
      107     4038        	think that what is in '"' is a comment and skips
      108     4039        	over it.
      109     4040        *********/
      110     4041    1   END ZIG$DDS2;

   4041 29 000337   000000 702200 xent               TSX2  ! X66_ARET

REC
 Sect OctLoc
   1     000   ****** ******   ****** ******   ****** ******   ****** ******    ................

REC1
 Sect OctLoc
   2     000   ****** ******   ****** ******   ****** ******   ****** ******    ................

SRC
 Sect OctLoc
   6     000   ****** ******   ****** ******   ****** ******   ****** ******    ................

LINE
 Sect OctLoc
   8     000   040040 040040   040040 040040   040040 040040   040040 040040
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:22   
   8    1744*  040040 040040   040040 040040   040040 040040   040040 040040

NEW_LINE
 Sect OctLoc
  11     000   4***** ******                                                    ....

UWA_KEY
 Sect OctLoc
  19     000   007125 127101   ****** ******                                    .UWA....

RVA_KEY
 Sect OctLoc
  21     000   007122 126101   ****** ******                                    .RVA....

IA__KEY
 Sect OctLoc
  22     000   007111 101137   ****** ******                                    .IA_....

SEARCHR_NB
 Sect OctLoc
  24     000   001001 001001   001001 001001   001001 001001   001001 001001    ................
  24     010*  000001 001001   001001 001001   001001 001001   001001 001001    ................
  24     014   001001 001001   001001 001001   001001 001001   001001 001001    ................
  24     034*  001001 001001   001001 001001   001001 001001   001001 001001    ................

SEM_COM
 Sect OctLoc
  25     000   000001 002003   004005 006007   010011 012013   014015 016017    ................
  25     004   020021 022023   024025 026027   030031 032033   034035 036037    ................
  25     010   040041 042043   044045 046047   050051 052053   054055 056057     !"#$%&'()*+,-./
  25     014   060061 062063   064065 066067   070071 072040   074075 076077    0123456789: <=>?
  25     020   100101 102103   104105 106107   110111 112113   114115 116117    @ABCDEFGHIJKLMNO
  25     024   120121 122123   124125 126127   130131 132133   134135 136137    PQRSTUVWXYZ[\]^_
  25     030   140141 142143   144145 146147   150151 152153   154155 156157    `abcdefghijklmno
  25     034   160161 162163   164165 166167   170171 172173   174175 176177    pqrstuvwxyz{|}~.

DMCL_XLATE
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:23   
 Sect OctLoc
  26     000   000001 002003   004005 006007   010011 012013   014015 016017    ................
  26     004   020021 022023   024025 026027   030031 032033   034035 036037    ................
  26     010   040041 041043   044045 046047   050051 052053   054055 136057     !!#$%&'()*+,-^/
  26     014   060061 062063   064065 066067   070071 072040   074075 076077    0123456789: <=>?
  26     020   100101 102103   104105 106107   110111 112113   114115 116117    @ABCDEFGHIJKLMNO
  26     024   120121 122123   124125 126127   130131 132133   134135 136137    PQRSTUVWXYZ[\]^_
  26     030   140141 142143   144145 146147   150151 152153   154155 156157    `abcdefghijklmno
  26     034   160161 162163   164165 166167   170171 172173   174175 176177    pqrstuvwxyz{|}~.

Q2_PERCENT
 Sect OctLoc
  27     000   000001 002003   004005 006007   010011 012013   014015 016017    ................
  27     004   020021 022023   024025 026027   030031 032033   034035 036037    ................
  27     010   040041 045043   044045 046047   050051 052053   054055 056057     !%#$%&'()*+,-./
  27     014   060061 062063   064065 066067   070071 072073   074075 076077    0123456789:;<=>?
  27     020   100101 102103   104105 106107   110111 112113   114115 116117    @ABCDEFGHIJKLMNO
  27     024   120121 122123   124125 126127   130131 132133   134135 136137    PQRSTUVWXYZ[\]^_
  27     030   140141 142143   144145 146147   150151 152153   154155 156157    `abcdefghijklmno
  27     034   160161 162163   164165 166167   170171 172173   174175 176177    pqrstuvwxyz{|}~.

(unnamed)
 Sect OctLoc
  28     000   105116 104040   105040 040040   130040 040040   121040 040040    END E   X   Q
  28     004   121125 111124   040040 040040   040105 116104   110105 114120    QUIT     ENDHELP
  28     010   040043 073040                                                     #;

(unnamed)
 Sect OctLoc
  30     000   000002 000000   000000 006000   000000 006000   000000 000000    ................
  30     004   040040 040040   777777 777000   073040 040040                        ....;

PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:24   
--  Include file information  --

   ZIG_GENERAL.:ZIC0TOU  cannot be made into a system file and is referenced.
   ZI_ERRORS_SUBS.:ZIC0TOU  is referenced.
   XU_MACRO_C.:LIB_E05  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure ZIG$DDS2.

   Procedure ZIG$DDS2 requires 224 words for executable code.
   Procedure ZIG$DDS2 requires 20 words of local(AUTO) storage.

    No errors detected in file ZIG$DDS2.:ZIC0TSI    .
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:25   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:26   
          MINI XREF LISTING

EOFFLG
        22**DCL      3976>>DOWHILE  4009<<ASSIGN
FLAG
        30**DCL      4014<<ASSIGN   4030<<ASSIGN   4031>>IF
I
        28**DCL      4013<<ASSIGN   4019<<CALLBLT  4021>>CALLBLT  4021>>CALLBLT  4022>>ASSIGN   4027>>IF
      4028>>IF       4031>>IF
INIT1
        36**DCL      3975<<ASSIGN   3976>>DOWHILE  3976>>DOWHILE  3990<<ASSIGN
K
        33**DCL      4019<<CALLBLT
LAST_COUNT
        31**DCL      4012<<ASSIGN
LINE
        29**DCL      3998>>IF       4021<<CALLBLT  4033<<CALLBLT
LINE_COUNT
        23**DCL      3984<>CALL     3985<<ASSIGN   3985>>ASSIGN
NEW_LINE
        37**DCL      3976>>DOWHILE
NUM_CHAR_READ
        27**DCL      3999>>IF       4013>>ASSIGN   4028>>IF
PCB_DBACS.NCHARS
      3939**DCL      3998<<ASSIGN   3999>>IF       4012>>ASSIGN   4021>>CALLBLT  4022<<ASSIGN   4022>>ASSIGN
      4033>>CALLBLT  4034<<ASSIGN   4034>>ASSIGN
PUT_OUT_LINE
        34**DCL-ENT  3984--CALL
Q2_PERCENT
      3762**DCL      4020>>CALLBLT
RDWORD
        18**DCL      3988>>IF       3991<<ASSIGN
REC
        20**DCL      3976>>DOWHILE  3984<>CALL     3997>>ASSIGN
PL6.E3A0      #001=ZIG$DDS2 File=ZIG$DDS2.:ZIC0TSI                               FRI 09/05/97 11:48 Page:27   
REC1
        21**DCL      3997<<ASSIGN   3999>>IF       3999>>IF       3999>>IF       3999>>IF       3999>>IF
      4019>>CALLBLT  4020<<CALLBLT  4020>>CALLBLT  4021>>CALLBLT  4028>>IF       4028>>IF       4028>>IF
      4028>>IF       4031>>IF
SAVESW
        24**DCL      3982>>IF       3987<<ASSIGN
SEARCHR_NB
      3740**DCL      4019>>CALLBLT
SUBSCHEMA_KEY
      3713**DCL      3714--REDEF
ZIG$DDS5
        19**DCL-ENT  3989--CALL
