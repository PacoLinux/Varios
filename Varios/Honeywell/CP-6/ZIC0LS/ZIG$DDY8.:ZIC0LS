
PL6.E3A0      #001=UOPEN File=ZIG$DDY8.:ZIC0TSI                                  FRI 09/05/97 11:56 Page:1    
        1        1        /*M*         UOPEN IDS/II DBACS OPEN WORK FILES 781117 */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*P*
        8        8        NAME:        UOPEN
        9        9        PURPOSE:     OPEN F$W2, F$W3 AND F$W5 WORK FILES.
       10       10        ARGUMENTS:   FC-> FILE CODE.
       11       11                     USAGE-> INPUT OR OUTPUT.
       12       12        CALLING PROGRAMS:
       13       13                     MAIN FUNCTION        CALLING MODULES
       14       14                     -------------        ---------------
       15       15                     DICTIONARY           DDX8
       16       16                     DIRECTIVE PROCESSOR  DDS3
       17       17                     DROOT                DDP4
       18       18                     LOCKS                DDY1
       19       19                     PURGE                DDS6
       20       20                     SROOT                DDA1
       21       21                     XROOT                DDX1
       22       22        */
       23       23        UOPEN: PROC (FC,USAGE);
       24       24        /* Input arguments   */
       25       25    1   DCL FC CHAR (2) ALIGNED;
       26       26    1   DCL USAGE UBIN (36);
       27       27    1   DCL UFF_SEQ_FILE_CODE (0:2) CHAR (2) STATIC SYMDEF
       28       28    1    INIT ('2*','3*','5*') ALIGNED;
       29       29    1   DCL ABORT ENTRY;
       30       30    1   DCL F$W2 DCB;
       31       31    1   DCL F$W3 DCB;
       32       32    1   DCL F$W5 DCB;
       33       33        %INCLUDE CP_6;
       34      114        %INCLUDE CP_6_SUBS;
       35      654        %FPT_OPEN (FPTN=OPEN_FPT,ORG=CONSEC,CTG=YES,NAME=FNAME,ASN=FILE);
       36      763        %VLP_NAME(FPTN=FNAME);
       37      790    1       IF FC = UFF_SEQ_FILE_CODE(0) THEN /* Set dcb # to */
PL6.E3A0      #001=UOPEN File=ZIG$DDY8.:ZIC0TSI                                  FRI 09/05/97 11:56 Page:2    
       38      791    2       DO;
       39      792    2           OPEN_FPT.V.DCB# = DCBNUM (F$W2); /* F$W2 or F$W3 or F$W5 */
       40      793    2           FNAME.NAME# = '*IDS2-TEMPORARY-FILE-2*';
       41      794    2           END;
       42      795    1       ELSE
       43      796    1           IF FC = UFF_SEQ_FILE_CODE(1) THEN /* Depending upon the file code */
       44      797    2           DO;
       45      798    2               OPEN_FPT.V.DCB# = DCBNUM (F$W3);
       46      799    2               FNAME.NAME# = '*IDS2-TEMPORARY-FILE-3*';
       47      800    2               END;
       48      801    1           ELSE
       49      802    1               IF FC = UFF_SEQ_FILE_CODE(2) THEN
       50      803    2               DO;
       51      804    2                   OPEN_FPT.V.DCB# = DCBNUM (F$W5);
       52      805    2                   FNAME.NAME# = '*IDS2-TEMPORARY-FILE-5*';
       53      806    2                   END;
       54      807    1               ELSE
       55      808    1                   CALL ABORT;
       56      809    1       IF USAGE = 0 THEN /* Set fun to create */
       57      810    1           OPEN_FPT.V.FUN# = %IN#; /* Or in depending upon usage */
       58      811    1       ELSE
       59      812    1           OPEN_FPT.V.FUN# = %CREATE#;
       60      813    1       CALL M$OPEN (OPEN_FPT) ALTRET (ERR1);
       61      814    1       RETURN;
       62      815    1   ERR1:
       63      816    1       RETURN;
       64      817    1   END;
       65      818        %EOD;

PL6.E3A0      #001=UOPEN File=ZIG$DDY8.:ZIC0TSI                                  FRI 09/05/97 11:56 Page:3    
--  Include file information  --

   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure UOPEN.

   Procedure UOPEN requires 48 words for executable code.
   Procedure UOPEN requires 6 words of local(AUTO) storage.

PL6.E3A0      #001=UOPEN File=ZIG$DDY8.:ZIC0TSI                                  FRI 09/05/97 11:56 Page:4    

 Object Unit name= UOPEN                                      File name= ZIG$DDY8.:ZIC0TOU
 UTS= SEP 05 '97 11:56:03.76 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none    70    106  UOPEN
    1   DCB   even  none     0      0  F$W2
    2   DCB   even  none     0      0  F$W3
    3   DCB   even  none     0      0  F$W5
    4   DCB   even  none     0      0  M$UC
    5  RoData even  UTS     18     22  UOPEN
    6   Proc  even  none    48     60  UOPEN
    7  RoData even  none     1      1  UOPEN

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     6      0   yes            yes      Std        2  UOPEN

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      0  UFF_SEQ_FILE_CODE

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       0 ABORT
                       nStd      0 X66_AUTO_2
                       nStd      0 X66_ARET
PL6.E3A0      #001=UOPEN File=ZIG$DDY8.:ZIC0TSI                                  FRI 09/05/97 11:56 Page:5    

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     F$W2                                  F$W3                                  F$W5
     M$UC

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #001=UOPEN File=ZIG$DDY8.:ZIC0TSI                                  FRI 09/05/97 11:56 Page:6    


        1        1        /*M*         UOPEN IDS/II DBACS OPEN WORK FILES 781117 */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*P*
        8        8        NAME:        UOPEN
        9        9        PURPOSE:     OPEN F$W2, F$W3 AND F$W5 WORK FILES.
       10       10        ARGUMENTS:   FC-> FILE CODE.
       11       11                     USAGE-> INPUT OR OUTPUT.
       12       12        CALLING PROGRAMS:
       13       13                     MAIN FUNCTION        CALLING MODULES
       14       14                     -------------        ---------------
       15       15                     DICTIONARY           DDX8
       16       16                     DIRECTIVE PROCESSOR  DDS3
       17       17                     DROOT                DDP4
       18       18                     LOCKS                DDY1
       19       19                     PURGE                DDS6
       20       20                     SROOT                DDA1
       21       21                     XROOT                DDX1
       22       22        */
       23       23        UOPEN: PROC (FC,USAGE);

     23  6 000000   000000 700200 xent  UOPEN        TSX0  ! X66_AUTO_2
         6 000001   000006 000002                    ZERO    6,2

       24       24        /* Input arguments   */
       25       25    1   DCL FC CHAR (2) ALIGNED;
       26       26    1   DCL USAGE UBIN (36);
       27       27    1   DCL UFF_SEQ_FILE_CODE (0:2) CHAR (2) STATIC SYMDEF
       28       28    1    INIT ('2*','3*','5*') ALIGNED;
       29       29    1   DCL ABORT ENTRY;
       30       30    1   DCL F$W2 DCB;
       31       31    1   DCL F$W3 DCB;
       32       32    1   DCL F$W5 DCB;
PL6.E3A0      #001=UOPEN File=ZIG$DDY8.:ZIC0TSI                                  FRI 09/05/97 11:56 Page:7    
       33       33        %INCLUDE CP_6;
       34      114        %INCLUDE CP_6_SUBS;
       35      654        %FPT_OPEN (FPTN=OPEN_FPT,ORG=CONSEC,CTG=YES,NAME=FNAME,ASN=FILE);
       36      763        %VLP_NAME(FPTN=FNAME);
       37      790    1       IF FC = UFF_SEQ_FILE_CODE(0) THEN /* Set dcb # to */

    790  6 000002   200003 470500                    LDP0    @FC,,AUTO
         6 000003   000000 220100                    LDX0    0,,PR0
         6 000004   000000 100000 0                  CMPX0   UFF_SEQ_FILE_CODE
         6 000005   000015 601000 6                  TNZ     s:796

       38      791    2       DO;

       39      792    2           OPEN_FPT.V.DCB# = DCBNUM (F$W2); /* F$W2 or F$W3 or F$W5 */

    792  6 000006   000000 236007 xsym               LDQ     F$W2,DL
         6 000007   000000 621006                    EAX1    0,QL
         6 000010   000050 741000 0                  STX1    OPEN_FPT+36

       40      793    2           FNAME.NAME# = '*IDS2-TEMPORARY-FILE-2*';

    793  6 000011   040000 100400                    MLR     fill='040'O
         6 000012   000000 000027 5                  ADSC9   0                        cn=0,n=23
         6 000013   000076 200037 0                  ADSC9   FNAME                    cn=1,n=31

       41      794    2           END;

    794  6 000014   000042 710000 6                  TRA     s:809

       42      795    1       ELSE
       43      796    1           IF FC = UFF_SEQ_FILE_CODE(1) THEN /* Depending upon the file code */

    796  6 000015   000001 100000 0                  CMPX0   UFF_SEQ_FILE_CODE+1
         6 000016   000026 601000 6                  TNZ     s:802

       44      797    2           DO;

PL6.E3A0      #001=UOPEN File=ZIG$DDY8.:ZIC0TSI                                  FRI 09/05/97 11:56 Page:8    
       45      798    2               OPEN_FPT.V.DCB# = DCBNUM (F$W3);

    798  6 000017   000000 236007 xsym               LDQ     F$W3,DL
         6 000020   000000 621006                    EAX1    0,QL
         6 000021   000050 741000 0                  STX1    OPEN_FPT+36

       46      799    2               FNAME.NAME# = '*IDS2-TEMPORARY-FILE-3*';

    799  6 000022   040000 100400                    MLR     fill='040'O
         6 000023   000006 000027 5                  ADSC9   6                        cn=0,n=23
         6 000024   000076 200037 0                  ADSC9   FNAME                    cn=1,n=31

       47      800    2               END;

    800  6 000025   000042 710000 6                  TRA     s:809

       48      801    1           ELSE
       49      802    1               IF FC = UFF_SEQ_FILE_CODE(2) THEN

    802  6 000026   000002 100000 0                  CMPX0   UFF_SEQ_FILE_CODE+2
         6 000027   000037 601000 6                  TNZ     s:808

       50      803    2               DO;

       51      804    2                   OPEN_FPT.V.DCB# = DCBNUM (F$W5);

    804  6 000030   000000 236007 xsym               LDQ     F$W5,DL
         6 000031   000000 621006                    EAX1    0,QL
         6 000032   000050 741000 0                  STX1    OPEN_FPT+36

       52      805    2                   FNAME.NAME# = '*IDS2-TEMPORARY-FILE-5*';

    805  6 000033   040000 100400                    MLR     fill='040'O
         6 000034   000014 000027 5                  ADSC9   12                       cn=0,n=23
         6 000035   000076 200037 0                  ADSC9   FNAME                    cn=1,n=31

       53      806    2                   END;
PL6.E3A0      #001=UOPEN File=ZIG$DDY8.:ZIC0TSI                                  FRI 09/05/97 11:56 Page:9    

    806  6 000036   000042 710000 6                  TRA     s:809

       54      807    1               ELSE
       55      808    1                   CALL ABORT;

    808  6 000037   000000 631400 7                  EPPR1   0
         6 000040   000000 701000 xent               TSX1    ABORT
         6 000041   000000 011000                    NOP     0

       56      809    1       IF USAGE = 0 THEN /* Set fun to create */

    809  6 000042   200004 470500                    LDP0    @USAGE,,AUTO
         6 000043   000000 235100                    LDA     0,,PR0
         6 000044   000050 601000 6                  TNZ     s:812

       57      810    1           OPEN_FPT.V.FUN# = %IN#; /* Or in depending upon usage */

    810  6 000045   002000 236007                    LDQ     1024,DL
         6 000046   000051 552010 0                  STBQ    OPEN_FPT+37,'10'O
         6 000047   000052 710000 6                  TRA     s:813

       58      811    1       ELSE
       59      812    1           OPEN_FPT.V.FUN# = %CREATE#;

    812  6 000050   003000 236007                    LDQ     1536,DL
         6 000051   000051 552010 0                  STBQ    OPEN_FPT+37,'10'O

       60      813    1       CALL M$OPEN (OPEN_FPT) ALTRET (ERR1);

    813  6 000052   000004 630400 0                  EPPR0   OPEN_FPT
         6 000053   450000 713400                    CLIMB   alt,open
         6 000054   410400 401760                    pmme    nvectors=18
         6 000055   000057 702000 6                  TSX2    ERR1

       61      814    1       RETURN;

PL6.E3A0      #001=UOPEN File=ZIG$DDY8.:ZIC0TSI                                  FRI 09/05/97 11:56 Page:10   
    814  6 000056   000000 702200 xent               TSX2  ! X66_ARET

       62      815    1   ERR1:
       63      816    1       RETURN;

    816  6 000057   000000 702200 xent  ERR1         TSX2  ! X66_ARET

UFF_SEQ_FILE_CODE
 Sect OctLoc
   0     000   062052 040040   063052 040040   065052 040040                    2*  3*  5*

OPEN_FPT
 Sect OctLoc
   0     004   000025 777640   000050 006000   000000 177640   000000 006014    .....(..........
   0     010   000000 177640   000000 006014   000007 777640   000076 006000    .............>..
   0     014   000000 177640   000000 006014   000000 177640   000000 006014    ................
   0     050*  000000 000102   000000 000001   252525 001000   000040 252520    ...B......... ..
   0     054   000040 040040   000000 000000   000000 777777   000000 000000    .   ............
   0     060   000000 000000   000000 000000   000000 000000   000000 000000    ................
   0     064   251000 622000   000000 000000   000000 000000   111250 000000    ............I...
   0     070   040040 040040   000000 000000   000000 000000   000000 000000        ............
   0     074   000000 000000   ****** ******                                    ........

FNAME
 Sect OctLoc
   0     076   037040 040040   040040 040040   040040 040040   040040 040040    .
   0     102   040040 040040   040040 040040   040040 040040   040040 040040

(unnamed)
 Sect OctLoc
   5     000   052111 104123   062055 124105   115120 117122   101122 131055    *IDS2-TEMPORARY-
   5     004   106111 114105   055062 052040   052111 104123   062055 124105    FILE-2* *IDS2-TE
   5     010   115120 117122   101122 131055   106111 114105   055063 052040    MPORARY-FILE-3*
   5     014   052111 104123   062055 124105   115120 117122   101122 131055    *IDS2-TEMPORARY-
   5     020   106111 114105   055065 052040                                    FILE-5*

(unnamed)
PL6.E3A0      #001=UOPEN File=ZIG$DDY8.:ZIC0TSI                                  FRI 09/05/97 11:56 Page:11   
 Sect OctLoc
   7     000   000000 000000                                                    ....
       64      817    1   END;
       65      818        %EOD;

PL6.E3A0      #001=UOPEN File=ZIG$DDY8.:ZIC0TSI                                  FRI 09/05/97 11:56 Page:12   
--  Include file information  --

   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure UOPEN.

   Procedure UOPEN requires 48 words for executable code.
   Procedure UOPEN requires 6 words of local(AUTO) storage.
PL6.E3A0      #001=UOPEN File=ZIG$DDY8.:ZIC0TSI                                  FRI 09/05/97 11:56 Page:13   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=UOPEN File=ZIG$DDY8.:ZIC0TSI                                  FRI 09/05/97 11:56 Page:14   
          MINI XREF LISTING

ABORT
        29**DCL-ENT   808--CALL
ERR1
       816**LABEL     813--CALLALT
F$W2
        30**DCL       792>>ASSIGN
F$W3
        31**DCL       798>>ASSIGN
F$W5
        32**DCL       804>>ASSIGN
FC
        25**DCL        23--PROC      790>>IF        796>>IF        802>>IF
FNAME
       788**DCL       720--DCLINIT
FNAME.NAME#
       788**DCL       793<<ASSIGN    799<<ASSIGN    805<<ASSIGN
M$OPEN
        42**DCL-ENT   813--CALL
OPEN_FPT
       719**DCL       813<>CALL
OPEN_FPT.ACSVEH_
       721**DCL       722--REDEF
OPEN_FPT.ALTKEYS_
       727**DCL       728--REDEF     728--REDEF
OPEN_FPT.HDR_
       726**DCL       727--REDEF
OPEN_FPT.TAB_
       725**DCL       726--REDEF
OPEN_FPT.UHL_
       719**DCL       720--REDEF     720--REDEF
OPEN_FPT.V
       728**DCL       719--DCLINIT
PL6.E3A0      #001=UOPEN File=ZIG$DDY8.:ZIC0TSI                                  FRI 09/05/97 11:56 Page:15   
OPEN_FPT.V.DCB#
       728**DCL       792<<ASSIGN    798<<ASSIGN    804<<ASSIGN
OPEN_FPT.V.FSN#
       759**DCL       759--REDEF     759--REDEF
OPEN_FPT.V.FUN#
       738**DCL       810<<ASSIGN    812<<ASSIGN
OPEN_FPT.WSN_
       725**DCL       725--REDEF
UFF_SEQ_FILE_CODE
        27**DCL       790>>IF        796>>IF        802>>IF
USAGE
        26**DCL        23--PROC      809>>IF

PL6.E3A0      #002=UPUT File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:16   
       66        1        /*M*         UPUT  IDS/II DBACS WRITE WORK FILES 781117 */
       67        2        /*T***********************************************************/
       68        3        /*T*                                                         */
       69        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       70        5        /*T*                                                         */
       71        6        /*T***********************************************************/
       72        7        /*P*
       73        8        NAME:        UPUT
       74        9        PURPOSE:     WRITE F$W2, F$W3 AND F$W5 WORK FILES.
       75       10        ARGUMENTS:   FC-> FILE CODE.
       76       11                     BUF_PTR-> BUFFER POINTER TO CALLER'S BUFFER.
       77       12                     BUF_SIZE-> SIZE OF BUFFER.
       78       13        CALLING PROGRAMS:
       79       14                     MAIN FUNCTION          CALLING MODULES
       80       15                     -------------          ---------------
       81       16                     DIRECTIVE PROCESSOR    DDS3
       82       17                     DROOT                  DDF3
       83       18                     SCHEMA  DDL TRANSLATOR DDB9
       84       19                     SCHEMA DMCL TRANSLATOR DDB9
       85       20                     SROOT                  DDF3
       86       21        */
       87       22        UPUT: PROC (FC,BUF_PTR,BUF_SIZE);
       88       23        /*  Input arguments  */
       89       24    1   DCL FC CHAR (2) ALIGNED;
       90       25    1   DCL BUF_PTR PTR;
       91       26    1   DCL BUF_SIZE UBIN (36);
       92       27    1   DCL UFF_SEQ_FILE_CODE (0:2) CHAR (2) SYMREF ALIGNED;
       93       28    1   DCL TEMP_PTR PTR STATIC;
       94       29    1   DCL 1 TEMP_PTRX REDEF TEMP_PTR ALIGNED,
       95       30    1         2 * BIT (24) UNAL, /*  Pointer value */
       96       31    1         2 SEGID BIT (12) UNAL; /* Seg id */
       97       32    1   DCL ABORT ENTRY;
       98       33    1   DCL F$W2 DCB;
       99       34    1   DCL F$W3 DCB;
      100       35    1   DCL F$W5 DCB;
      101       36        %INCLUDE CP_6;
      102      117        %INCLUDE CP_6_SUBS;
PL6.E3A0      #002=UPUT File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:17   
      103      657        %INCLUDE B_SEGIDS_C;
      104     1196        %FPT_WRITE (FPTN=WRITE_FPT);
      105     1227    1       IF FC = UFF_SEQ_FILE_CODE(0) THEN
      106     1228    1           WRITE_FPT.V.DCB# = DCBNUM (F$W2);
      107     1229    1       ELSE
      108     1230    1           IF FC = UFF_SEQ_FILE_CODE(1) THEN
      109     1231    1               WRITE_FPT.V.DCB# = DCBNUM (F$W3);
      110     1232    1           ELSE
      111     1233    1               IF FC = UFF_SEQ_FILE_CODE (2) THEN
      112     1234    1                   WRITE_FPT.V.DCB# = DCBNUM (F$W5);
      113     1235    1               ELSE
      114     1236    1                   CALL ABORT;
      115     1237    1       WRITE_FPT.BUF_.BOUND = BUF_SIZE * 4 - 1; /* Length *4 - 1 */
      116     1238    1       TEMP_PTR = BUF_PTR;
      117     1239    1       TEMP_PTRX.SEGID = %ISSID;
      118     1240    1       WRITE_FPT.BUF_.BUF$ = TEMP_PTR;
      119     1241    1       CALL M$WRITE (WRITE_FPT) ALTRET (ERR1);
      120     1242    1       RETURN;
      121     1243    1   ERR1:
      122     1244    1       RETURN; /* To be expanded later */
      123     1245    1   END;
      124     1246        %EOD;

PL6.E3A0      #002=UPUT File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:18   
--  Include file information  --

   B_SEGIDS_C.:LIB_E05  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure UPUT.

   Procedure UPUT requires 46 words for executable code.
   Procedure UPUT requires 6 words of local(AUTO) storage.

PL6.E3A0      #002=UPUT File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:19   

 Object Unit name= UPUT                                       File name= ZIG$DDY8.:ZIC0TOU
 UTS= SEP 05 '97 11:56:09.48 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none    14     16  UPUT
    1   DCB   even  none     0      0  F$W2
    2   DCB   even  none     0      0  F$W3
    3   DCB   even  none     0      0  F$W5
    4   DCB   even  none     0      0  M$UC
    5   Proc  even  none    46     56  UPUT
    6  RoData even  none     2      2  UPUT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     5      0   yes            yes      Std        3  UPUT

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       0 ABORT
                       nStd      0 X66_AUTO_3
                       nStd      0 X66_ARET
PL6.E3A0      #002=UPUT File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:20   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     UFF_SEQ_FILE_CODE                     F$W2                                  F$W3
     F$W5                                  M$UC

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #002=UPUT File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:21   


       66        1        /*M*         UPUT  IDS/II DBACS WRITE WORK FILES 781117 */
       67        2        /*T***********************************************************/
       68        3        /*T*                                                         */
       69        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       70        5        /*T*                                                         */
       71        6        /*T***********************************************************/
       72        7        /*P*
       73        8        NAME:        UPUT
       74        9        PURPOSE:     WRITE F$W2, F$W3 AND F$W5 WORK FILES.
       75       10        ARGUMENTS:   FC-> FILE CODE.
       76       11                     BUF_PTR-> BUFFER POINTER TO CALLER'S BUFFER.
       77       12                     BUF_SIZE-> SIZE OF BUFFER.
       78       13        CALLING PROGRAMS:
       79       14                     MAIN FUNCTION          CALLING MODULES
       80       15                     -------------          ---------------
       81       16                     DIRECTIVE PROCESSOR    DDS3
       82       17                     DROOT                  DDF3
       83       18                     SCHEMA  DDL TRANSLATOR DDB9
       84       19                     SCHEMA DMCL TRANSLATOR DDB9
       85       20                     SROOT                  DDF3
       86       21        */
       87       22        UPUT: PROC (FC,BUF_PTR,BUF_SIZE);

     22  5 000000   000000 700200 xent  UPUT         TSX0  ! X66_AUTO_3
         5 000001   000006 000003                    ZERO    6,3

       88       23        /*  Input arguments  */
       89       24    1   DCL FC CHAR (2) ALIGNED;
       90       25    1   DCL BUF_PTR PTR;
       91       26    1   DCL BUF_SIZE UBIN (36);
       92       27    1   DCL UFF_SEQ_FILE_CODE (0:2) CHAR (2) SYMREF ALIGNED;
       93       28    1   DCL TEMP_PTR PTR STATIC;
       94       29    1   DCL 1 TEMP_PTRX REDEF TEMP_PTR ALIGNED,
       95       30    1         2 * BIT (24) UNAL, /*  Pointer value */
       96       31    1         2 SEGID BIT (12) UNAL; /* Seg id */
       97       32    1   DCL ABORT ENTRY;
PL6.E3A0      #002=UPUT File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:22   
       98       33    1   DCL F$W2 DCB;
       99       34    1   DCL F$W3 DCB;
      100       35    1   DCL F$W5 DCB;
      101       36        %INCLUDE CP_6;
      102      117        %INCLUDE CP_6_SUBS;
      103      657        %INCLUDE B_SEGIDS_C;
      104     1196        %FPT_WRITE (FPTN=WRITE_FPT);
      105     1227    1       IF FC = UFF_SEQ_FILE_CODE(0) THEN

   1227  5 000002   200003 470500                    LDP0    @FC,,AUTO
         5 000003   000000 220100                    LDX0    0,,PR0
         5 000004   000000 100000 xsym               CMPX0   UFF_SEQ_FILE_CODE
         5 000005   000012 601000 5                  TNZ     s:1230

      106     1228    1           WRITE_FPT.V.DCB# = DCBNUM (F$W2);

   1228  5 000006   000000 236007 xsym               LDQ     F$W2,DL
         5 000007   000000 621006                    EAX1    0,QL
         5 000010   000012 741000 0                  STX1    WRITE_FPT+8
         5 000011   000031 710000 5                  TRA     s:1237

      107     1229    1       ELSE
      108     1230    1           IF FC = UFF_SEQ_FILE_CODE(1) THEN

   1230  5 000012   000001 100000 xsym               CMPX0   UFF_SEQ_FILE_CODE+1
         5 000013   000020 601000 5                  TNZ     s:1233

      109     1231    1               WRITE_FPT.V.DCB# = DCBNUM (F$W3);

   1231  5 000014   000000 236007 xsym               LDQ     F$W3,DL
         5 000015   000000 621006                    EAX1    0,QL
         5 000016   000012 741000 0                  STX1    WRITE_FPT+8
         5 000017   000031 710000 5                  TRA     s:1237

      110     1232    1           ELSE
      111     1233    1               IF FC = UFF_SEQ_FILE_CODE (2) THEN

PL6.E3A0      #002=UPUT File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:23   
   1233  5 000020   000002 100000 xsym               CMPX0   UFF_SEQ_FILE_CODE+2
         5 000021   000026 601000 5                  TNZ     s:1236

      112     1234    1                   WRITE_FPT.V.DCB# = DCBNUM (F$W5);

   1234  5 000022   000000 236007 xsym               LDQ     F$W5,DL
         5 000023   000000 621006                    EAX1    0,QL
         5 000024   000012 741000 0                  STX1    WRITE_FPT+8
         5 000025   000031 710000 5                  TRA     s:1237

      113     1235    1               ELSE
      114     1236    1                   CALL ABORT;

   1236  5 000026   000000 631400 6                  EPPR1   0
         5 000027   000000 701000 xent               TSX1    ABORT
         5 000030   000000 011000                    NOP     0

      115     1237    1       WRITE_FPT.BUF_.BOUND = BUF_SIZE * 4 - 1; /* Length *4 - 1 */

   1237  5 000031   200005 470500                    LDP0    @BUF_SIZE,,AUTO
         5 000032   000000 236100                    LDQ     0,,PR0
         5 000033   000002 736000                    QLS     2
         5 000034   000001 136007                    SBLQ    1,DL
         5 000035   000020 736000                    QLS     16
         5 000036   000006 676000 0                  ERQ     WRITE_FPT+4
         5 000037   000001 376000 6                  ANQ     1
         5 000040   000006 656000 0                  ERSQ    WRITE_FPT+4

      116     1238    1       TEMP_PTR = BUF_PTR;

   1238  5 000041   200004 471500                    LDP1    @BUF_PTR,,AUTO
         5 000042   100000 236100                    LDQ     0,,PR1
         5 000043   000000 756000 0                  STQ     TEMP_PTR

      117     1239    1       TEMP_PTRX.SEGID = %ISSID;

   1239  5 000044   006000 236007                    LDQ     3072,DL
PL6.E3A0      #002=UPUT File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:24   
         5 000045   000000 752003 0                  STCQ    TEMP_PTR,'03'O

      118     1240    1       WRITE_FPT.BUF_.BUF$ = TEMP_PTR;

   1240  5 000046   000000 236000 0                  LDQ     TEMP_PTR
         5 000047   000007 756000 0                  STQ     WRITE_FPT+5

      119     1241    1       CALL M$WRITE (WRITE_FPT) ALTRET (ERR1);

   1241  5 000050   000002 630400 0                  EPPR0   WRITE_FPT
         5 000051   440001 713400                    CLIMB   alt,write
         5 000052   401400 401760                    pmme    nvectors=4
         5 000053   000055 702000 5                  TSX2    ERR1

      120     1242    1       RETURN;

   1242  5 000054   000000 702200 xent               TSX2  ! X66_ARET

      121     1243    1   ERR1:
      122     1244    1       RETURN; /* To be expanded later */

   1244  5 000055   000000 702200 xent  ERR1         TSX2  ! X66_ARET

WRITE_FPT
 Sect OctLoc
   0     002   000003 777640   000012 006000   000000 177640   000000 006014    ................
   0     006   000000 177640   000000 006014   000000 177640   000000 006014    ................
   0     012   000000 400400   000000 000000   000000 000000   000000 000000    ................

(unnamed)
 Sect OctLoc
   6     000   000000 000000   777777 600000                                    ........
      123     1245    1   END;
      124     1246        %EOD;

PL6.E3A0      #002=UPUT File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:25   
--  Include file information  --

   B_SEGIDS_C.:LIB_E05  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure UPUT.

   Procedure UPUT requires 46 words for executable code.
   Procedure UPUT requires 6 words of local(AUTO) storage.
PL6.E3A0      #002=UPUT File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:26   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=UPUT File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:27   
          MINI XREF LISTING

ABORT
        32**DCL-ENT  1236--CALL
BUF_PTR
        25**DCL        22--PROC     1238>>ASSIGN
BUF_SIZE
        26**DCL        22--PROC     1237>>ASSIGN
ERR1
      1244**LABEL    1241--CALLALT
F$W2
        33**DCL      1228>>ASSIGN
F$W3
        34**DCL      1231>>ASSIGN
F$W5
        35**DCL      1234>>ASSIGN
FC
        24**DCL        22--PROC     1227>>IF       1230>>IF       1233>>IF
M$WRITE
        46**DCL-ENT  1241--CALL
TEMP_PTR
        28**DCL        29--REDEF    1238<<ASSIGN   1240>>ASSIGN
TEMP_PTRX.SEGID
        31**DCL      1239<<ASSIGN
UFF_SEQ_FILE_CODE
        27**DCL      1227>>IF       1230>>IF       1233>>IF
WRITE_FPT
      1213**DCL      1241<>CALL
WRITE_FPT.BUF_.BOUND
      1213**DCL      1237<<ASSIGN
WRITE_FPT.BUF_.BUF$
      1215**DCL      1240<<ASSIGN
WRITE_FPT.STATION_
      1215**DCL      1215--REDEF
PL6.E3A0      #002=UPUT File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:28   
WRITE_FPT.V
      1216**DCL      1213--DCLINIT
WRITE_FPT.V.DCB#
      1216**DCL      1228<<ASSIGN   1231<<ASSIGN   1234<<ASSIGN
WRITE_FPT.V.DVBYTE.VFC#
      1222**DCL      1222--REDEF

PL6.E3A0      #003=UGET File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:29   
      125        1        /*M*         UGET  IDS/II DBACS READ WORK FILES 781117 */
      126        2        /*T***********************************************************/
      127        3        /*T*                                                         */
      128        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      129        5        /*T*                                                         */
      130        6        /*T***********************************************************/
      131        7        /*P*
      132        8        NAME:        UGET
      133        9        PURPOSE:     READ F$W2, F$W3 AND F$W5 WORK FILES.
      134       10        ARGUMENTS:   FC-> FILE CODE (INPUT).
      135       11                     BUF_PTR-> BUFFER POINTER TO INPUT BUFFER (RETURNED).
      136       12                     EOF-> FLAG TO INDICATE IF EOF REACHED (RETURNED).
      137       13                     BUF_SIZE-> SIZE OF BUFFER (RETURNED).
      138       14        CALLING PROGRAMS:
      139       15                     MAIN FUNCTION        CALLING MODULES
      140       16                     -------------        ---------------
      141       17                     DICTIONARY           DDX8
      142       18                     DROOT                DDP4
      143       19                     PURGE                DDS6
      144       20                     SCHEMA DD TRANSLATOR DDC1
      145       21                     WORK FILE READER     DDF4
      146       22        */
      147       23        UGET: PROC (FC,BUF_PTR,EOF,BUF_SIZE);
      148       24        /*  Input arguments  */
      149       25    1   DCL FC CHAR (2) ALIGNED;
      150       26    1   DCL BUF_PTR PTR;
      151       27    1   DCL EOF UBIN (36);
      152       28    1   DCL BUF_SIZE UBIN (36);
      153       29        /*
      154       30                 Local data
      155       31        */
      156       32    1   DCL UFF_SEQ_FILE_CODE (0:2) CHAR (2) SYMREF ALIGNED;
      157       33    1   DCL 1 BUFFER STATIC ALIGNED,
      158       34    1         2 * (0:127) UBIN WORD;
      159       35    1   DCL ABORT ENTRY;
      160       36    1   DCL F$W2 DCB;
      161       37    1   DCL F$W3 DCB;
PL6.E3A0      #003=UGET File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:30   
      162       38    1   DCL F$W5 DCB;
      163       39        %INCLUDE CP_6;
      164      120        %INCLUDE CP_6_SUBS;
      165      660        %F$DCB;
      166      717        %FPT_READ (FPTN=READ_FPT,BUF=BUFFER);
      167      756    1       IF FC = UFF_SEQ_FILE_CODE(0) THEN
      168      757    1           READ_FPT.V.DCB# = DCBNUM (F$W2);
      169      758    1       ELSE
      170      759    1           IF FC = UFF_SEQ_FILE_CODE(1) THEN
      171      760    1               READ_FPT.V.DCB# = DCBNUM (F$W3);
      172      761    1           ELSE
      173      762    1               IF FC = UFF_SEQ_FILE_CODE (2) THEN
      174      763    1                   READ_FPT.V.DCB# = DCBNUM (F$W5);
      175      764    1               ELSE
      176      765    1                   CALL ABORT;
      177      766    1       BUFFER = BINBIT(0,36);
      178      767    1       CALL M$READ (READ_FPT) ALTRET (ERR1);
      179      768    1       BUF_PTR = ADDR(BUFFER);
      180      769    1       BUF_SIZE = (DCBADDR(READ_FPT.V.DCB#)->F$DCB.ARS#)/4;
      181      770    1       EOF = 0;
      182      771    1       RETURN;
      183      772    1   ERR1:
      184      773    1       EOF = 1; /* Check this later */
      185      774    1       RETURN; /* To be expanded later */
      186      775    1   END;
      187      776        %EOD;

PL6.E3A0      #003=UGET File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:31   
--  Include file information  --

   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure UGET.

   Procedure UGET requires 52 words for executable code.
   Procedure UGET requires 10 words of local(AUTO) storage.

PL6.E3A0      #003=UGET File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:32   

 Object Unit name= UGET                                       File name= ZIG$DDY8.:ZIC0TOU
 UTS= SEP 05 '97 11:56:14.28 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none   142    216  UGET
    1   DCB   even  none     0      0  F$W2
    2   DCB   even  none     0      0  F$W3
    3   DCB   even  none     0      0  F$W5
    4   DCB   even  none     0      0  M$UC
    5   Proc  even  none    52     64  UGET
    6  RoData even  none     3      3  UGET

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     5      0   yes            yes      Std        4  UGET

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       0 ABORT
                       nStd      0 X66_AUTO_4
                       nStd      0 X66_ARET
PL6.E3A0      #003=UGET File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:33   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     UFF_SEQ_FILE_CODE                     F$W2                                  F$W3
     F$W5                                  M$UC

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #003=UGET File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:34   


      125        1        /*M*         UGET  IDS/II DBACS READ WORK FILES 781117 */
      126        2        /*T***********************************************************/
      127        3        /*T*                                                         */
      128        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      129        5        /*T*                                                         */
      130        6        /*T***********************************************************/
      131        7        /*P*
      132        8        NAME:        UGET
      133        9        PURPOSE:     READ F$W2, F$W3 AND F$W5 WORK FILES.
      134       10        ARGUMENTS:   FC-> FILE CODE (INPUT).
      135       11                     BUF_PTR-> BUFFER POINTER TO INPUT BUFFER (RETURNED).
      136       12                     EOF-> FLAG TO INDICATE IF EOF REACHED (RETURNED).
      137       13                     BUF_SIZE-> SIZE OF BUFFER (RETURNED).
      138       14        CALLING PROGRAMS:
      139       15                     MAIN FUNCTION        CALLING MODULES
      140       16                     -------------        ---------------
      141       17                     DICTIONARY           DDX8
      142       18                     DROOT                DDP4
      143       19                     PURGE                DDS6
      144       20                     SCHEMA DD TRANSLATOR DDC1
      145       21                     WORK FILE READER     DDF4
      146       22        */
      147       23        UGET: PROC (FC,BUF_PTR,EOF,BUF_SIZE);

     23  5 000000   000000 700200 xent  UGET         TSX0  ! X66_AUTO_4
         5 000001   000012 000004                    ZERO    10,4

      148       24        /*  Input arguments  */
      149       25    1   DCL FC CHAR (2) ALIGNED;
      150       26    1   DCL BUF_PTR PTR;
      151       27    1   DCL EOF UBIN (36);
      152       28    1   DCL BUF_SIZE UBIN (36);
      153       29        /*
      154       30                 Local data
      155       31        */
      156       32    1   DCL UFF_SEQ_FILE_CODE (0:2) CHAR (2) SYMREF ALIGNED;
PL6.E3A0      #003=UGET File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:35   
      157       33    1   DCL 1 BUFFER STATIC ALIGNED,
      158       34    1         2 * (0:127) UBIN WORD;
      159       35    1   DCL ABORT ENTRY;
      160       36    1   DCL F$W2 DCB;
      161       37    1   DCL F$W3 DCB;
      162       38    1   DCL F$W5 DCB;
      163       39        %INCLUDE CP_6;
      164      120        %INCLUDE CP_6_SUBS;
      165      660        %F$DCB;
      166      717        %FPT_READ (FPTN=READ_FPT,BUF=BUFFER);
      167      756    1       IF FC = UFF_SEQ_FILE_CODE(0) THEN

    756  5 000002   200003 470500                    LDP0    @FC,,AUTO
         5 000003   000000 220100                    LDX0    0,,PR0
         5 000004   000000 100000 xsym               CMPX0   UFF_SEQ_FILE_CODE
         5 000005   000012 601000 5                  TNZ     s:759

      168      757    1           READ_FPT.V.DCB# = DCBNUM (F$W2);

    757  5 000006   000000 236007 xsym               LDQ     F$W2,DL
         5 000007   000000 621006                    EAX1    0,QL
         5 000010   000210 741000 0                  STX1    READ_FPT+8
         5 000011   000031 710000 5                  TRA     s:766

      169      758    1       ELSE
      170      759    1           IF FC = UFF_SEQ_FILE_CODE(1) THEN

    759  5 000012   000001 100000 xsym               CMPX0   UFF_SEQ_FILE_CODE+1
         5 000013   000020 601000 5                  TNZ     s:762

      171      760    1               READ_FPT.V.DCB# = DCBNUM (F$W3);

    760  5 000014   000000 236007 xsym               LDQ     F$W3,DL
         5 000015   000000 621006                    EAX1    0,QL
         5 000016   000210 741000 0                  STX1    READ_FPT+8
         5 000017   000031 710000 5                  TRA     s:766

PL6.E3A0      #003=UGET File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:36   
      172      761    1           ELSE
      173      762    1               IF FC = UFF_SEQ_FILE_CODE (2) THEN

    762  5 000020   000002 100000 xsym               CMPX0   UFF_SEQ_FILE_CODE+2
         5 000021   000026 601000 5                  TNZ     s:765

      174      763    1                   READ_FPT.V.DCB# = DCBNUM (F$W5);

    763  5 000022   000000 236007 xsym               LDQ     F$W5,DL
         5 000023   000000 621006                    EAX1    0,QL
         5 000024   000210 741000 0                  STX1    READ_FPT+8
         5 000025   000031 710000 5                  TRA     s:766

      175      764    1               ELSE
      176      765    1                   CALL ABORT;

    765  5 000026   000000 631400 6                  EPPR1   0
         5 000027   000000 701000 xent               TSX1    ABORT
         5 000030   000000 011000                    NOP     0

      177      766    1       BUFFER = BINBIT(0,36);

    766  5 000031   000000 236003                    LDQ     0,DU
         5 000032   200010 756100                    STQ     @BUF_SIZE+2,,AUTO
         5 000033   000000 100500                    MLR     fill='000'O
         5 000034   200010 000004                    ADSC9   @BUF_SIZE+2,,AUTO        cn=0,n=4
         5 000035   000000 001000 0                  ADSC9   BUFFER                   cn=0,n=512

      178      767    1       CALL M$READ (READ_FPT) ALTRET (ERR1);

    767  5 000036   000200 630400 0                  EPPR0   READ_FPT
         5 000037   440000 713400                    CLIMB   alt,read
         5 000040   401400 401760                    pmme    nvectors=4
         5 000041   000060 702000 5                  TSX2    ERR1

      179      768    1       BUF_PTR = ADDR(BUFFER);

PL6.E3A0      #003=UGET File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:37   
    768  5 000042   000001 236000 6                  LDQ     1
         5 000043   200004 470500                    LDP0    @BUF_PTR,,AUTO
         5 000044   000000 756100                    STQ     0,,PR0

      180      769    1       BUF_SIZE = (DCBADDR(READ_FPT.V.DCB#)->F$DCB.ARS#)/4;

    769  5 000045   000002 471400 6                  LDP1    2
         5 000046   100000 473500                    LDP3    0,,PR1
         5 000047   000210 220000 0                  LDX0    READ_FPT+8
         5 000050   300000 474510                    LDP4    0,X0,PR3
         5 000051   400000 236100                    LDQ     0,,PR4
         5 000052   000004 506007                    DIV     4,DL
         5 000053   200006 475500                    LDP5    @BUF_SIZE,,AUTO
         5 000054   500000 756100                    STQ     0,,PR5

      181      770    1       EOF = 0;

    770  5 000055   200005 474500                    LDP4    @EOF,,AUTO
         5 000056   400000 450100                    STZ     0,,PR4

      182      771    1       RETURN;

    771  5 000057   000000 702200 xent               TSX2  ! X66_ARET

      183      772    1   ERR1:
      184      773    1       EOF = 1; /* Check this later */

    773  5 000060   000001 235007       ERR1         LDA     1,DL
         5 000061   200005 470500                    LDP0    @EOF,,AUTO
         5 000062   000000 755100                    STA     0,,PR0

      185      774    1       RETURN; /* To be expanded later */

    774  5 000063   000000 702200 xent               TSX2  ! X66_ARET

BUFFER
 Sect OctLoc
PL6.E3A0      #003=UGET File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:38   
   0     000   ****** ******   ****** ******   ****** ******   ****** ******    ................

READ_FPT
 Sect OctLoc
   0     200   000005 777640   000210 006000   000000 177640   000000 006014    ................
   0     204   000177 777640   000000 006000   000000 177640   000000 006014    ................
   0     210   000000 400000   000000 000000   000000 000000   000000 000000    ................
   0     214   000000 000000   000000 000000                                    ........

(unnamed)
 Sect OctLoc
   6     000   000000 000000   000000 006000   000000 006003                    ............
      186      775    1   END;
      187      776        %EOD;

PL6.E3A0      #003=UGET File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:39   
--  Include file information  --

   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure UGET.

   Procedure UGET requires 52 words for executable code.
   Procedure UGET requires 10 words of local(AUTO) storage.
PL6.E3A0      #003=UGET File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:40   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=UGET File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:41   
          MINI XREF LISTING

ABORT
        35**DCL-ENT   765--CALL
BUFFER
        33**DCL       736--DCLINIT   737--DCLINIT   766<<ASSIGN    768--ASSIGN
BUF_PTR
        26**DCL        23--PROC      768<<ASSIGN
BUF_SIZE
        28**DCL        23--PROC      769<<ASSIGN
EOF
        27**DCL        23--PROC      770<<ASSIGN    773<<ASSIGN
ERR1
       773**LABEL     767--CALLALT
F$DCB.ACTPOS
       693**DCL       693--REDEF
F$DCB.ARS#
       667**DCL       667--REDEF     769>>ASSIGN
F$DCB.ATTR
       686**DCL       687--REDEF
F$DCB.BORROW
       701**DCL       701--REDEF     701--REDEF     701--REDEF
F$DCB.DCBNAME.L
       715**DCL       715--IMP-SIZ
F$DCB.EOMCHAR#
       671**DCL       671--REDEF
F$DCB.FLDID
       696**DCL       696--REDEF
F$DCB.FORM$
       690**DCL       690--REDEF
F$DCB.FSECT
       706**DCL       706--REDEF
F$DCB.FSN#
       683**DCL       683--REDEF     683--REDEF     684--REDEF
PL6.E3A0      #003=UGET File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:42   
F$DCB.HEADER$
       689**DCL       689--REDEF
F$DCB.IXTNSIZE#
       687**DCL       687--REDEF
F$DCB.LASTSTA$
       676**DCL       676--REDEF
F$DCB.LVL
       702**DCL       702--REDEF
F$DCB.NAME#.C
       677**DCL       677--REDEF
F$DCB.NOEOF
       699**DCL       699--REDEF
F$DCB.NRECS#
       688**DCL       688--REDEF
F$DCB.NRECX
       707**DCL       707--REDEF
F$DCB.OHDR
       699**DCL       699--REDEF
F$DCB.ORG#
       682**DCL       682--REDEF
F$DCB.PRECNO
       705**DCL       705--REDEF
F$DCB.RCSZ
       711**DCL       711--REDEF
F$DCB.RES#
       678**DCL       678--REDEF
F$DCB.SETX
       690**DCL       690--REDEF
F$DCB.TAB$
       690**DCL       690--REDEF
F$DCB.TDA
       704**DCL       705--REDEF
F$DCB.WSN#
       678**DCL       678--REDEF
F$W2
        36**DCL       757>>ASSIGN
PL6.E3A0      #003=UGET File=ZIG$DDY8.:ZIC0TSI                                   FRI 09/05/97 11:56 Page:43   
F$W3
        37**DCL       760>>ASSIGN
F$W5
        38**DCL       763>>ASSIGN
FC
        25**DCL        23--PROC      756>>IF        759>>IF        762>>IF
M$READ
        49**DCL-ENT   767--CALL
READ_FPT
       734**DCL       767<>CALL
READ_FPT.STATION_
       737**DCL       738--REDEF
READ_FPT.V
       738**DCL       734--DCLINIT
READ_FPT.V.DCB#
       738**DCL       757<<ASSIGN    760<<ASSIGN    763<<ASSIGN    769--ASSIGN
READ_FPT.V.DVBYTE.REREAD#
       749**DCL       749--REDEF
READ_FPT.V.INDX#
       747**DCL       747--REDEF
UFF_SEQ_FILE_CODE
        32**DCL       756>>IF        759>>IF        762>>IF

PL6.E3A0      #004=UCLOSE File=ZIG$DDY8.:ZIC0TSI                                 FRI 09/05/97 11:56 Page:44   
      188        1        /*M*         UCLOSE IDS/II DBACS CLOSE WORK FILES 781117 */
      189        2        /*T***********************************************************/
      190        3        /*T*                                                         */
      191        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      192        5        /*T*                                                         */
      193        6        /*T***********************************************************/
      194        7        /*P*
      195        8        NAME:        UCLOSE
      196        9        PURPOSE:     CLOSE F$W2, F$W3 AND F$W5 WORK FILES.
      197       10        ARGUMENTS:   FC-> FILE CODE.
      198       11        CALLING PROGRAMS:
      199       12                     MAIN FUNCTION        CALLING MODULES
      200       13                     -------------        ---------------
      201       14                     DICTIONARY           DDX8
      202       15                     DIRECTIVE PROCESSOR  DDS3
      203       16                     DROOT                DDP4
      204       17                     LOCKS                DDY1
      205       18                     PURGE                DDS6
      206       19                     SROOT                DDA1
      207       20                     XROOT                DDX1
      208       21        */
      209       22        UCLOSE: PROC (FC);
      210       23        /* Input arguments  */
      211       24    1   DCL FC CHAR (2);
      212       25    1   DCL UFF_SEQ_FILE_CODE (0:2) CHAR (2) SYMREF ALIGNED;
      213       26    1   DCL ABORT ENTRY;
      214       27    1   DCL F$W2 DCB;
      215       28    1   DCL F$W3 DCB;
      216       29    1   DCL F$W5 DCB;
      217       30        %INCLUDE CP_6;
      218      111        %FPT_CLOSE (FPTN=CLOSE_FPT,DISP=SAVE);
      219      153    1       IF FC = UFF_SEQ_FILE_CODE(0) THEN /* Get dcb # depending upon fc */
      220      154    1           CLOSE_FPT.V.DCB# = DCBNUM (F$W2);
      221      155    1       ELSE
      222      156    1           IF FC = UFF_SEQ_FILE_CODE(1) THEN
      223      157    1               CLOSE_FPT.V.DCB# = DCBNUM (F$W3);
      224      158    1           ELSE
PL6.E3A0      #004=UCLOSE File=ZIG$DDY8.:ZIC0TSI                                 FRI 09/05/97 11:56 Page:45   
      225      159    1               IF FC = UFF_SEQ_FILE_CODE(2) THEN
      226      160    1                   CLOSE_FPT.V.DCB# = DCBNUM (F$W5);
      227      161    1               ELSE
      228      162    1                   CALL ABORT;
      229      163    1       CALL M$CLOSE (CLOSE_FPT) ALTRET (ERR1);
      230      164    1       RETURN;
      231      165    1   ERR1:
      232      166    1       RETURN;
      233      167    1   END;

PL6.E3A0      #004=UCLOSE File=ZIG$DDY8.:ZIC0TSI                                 FRI 09/05/97 11:56 Page:46   
--  Include file information  --

   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure UCLOSE.

   Procedure UCLOSE requires 36 words for executable code.
   Procedure UCLOSE requires 4 words of local(AUTO) storage.

    No errors detected in file ZIG$DDY8.:ZIC0TSI    .

PL6.E3A0      #004=UCLOSE File=ZIG$DDY8.:ZIC0TSI                                 FRI 09/05/97 11:56 Page:47   

 Object Unit name= UCLOSE                                     File name= ZIG$DDY8.:ZIC0TOU
 UTS= SEP 05 '97 11:56:20.48 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  F$W2
    1   DCB   even  none     0      0  F$W3
    2   DCB   even  none     0      0  F$W5
    3   DCB   even  none     0      0  M$UC
    4   Data  even  none    30     36  UCLOSE
    5   Proc  even  none    36     44  UCLOSE
    6  RoData even  none     1      1  UCLOSE

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     5      0   yes            yes      Std        1  UCLOSE

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       0 ABORT
                       nStd      0 X66_AUTO_1
                       nStd      0 X66_ARET
PL6.E3A0      #004=UCLOSE File=ZIG$DDY8.:ZIC0TSI                                 FRI 09/05/97 11:56 Page:48   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     UFF_SEQ_FILE_CODE                     F$W2                                  F$W3
     F$W5                                  M$UC

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #004=UCLOSE File=ZIG$DDY8.:ZIC0TSI                                 FRI 09/05/97 11:56 Page:49   


      188        1        /*M*         UCLOSE IDS/II DBACS CLOSE WORK FILES 781117 */
      189        2        /*T***********************************************************/
      190        3        /*T*                                                         */
      191        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      192        5        /*T*                                                         */
      193        6        /*T***********************************************************/
      194        7        /*P*
      195        8        NAME:        UCLOSE
      196        9        PURPOSE:     CLOSE F$W2, F$W3 AND F$W5 WORK FILES.
      197       10        ARGUMENTS:   FC-> FILE CODE.
      198       11        CALLING PROGRAMS:
      199       12                     MAIN FUNCTION        CALLING MODULES
      200       13                     -------------        ---------------
      201       14                     DICTIONARY           DDX8
      202       15                     DIRECTIVE PROCESSOR  DDS3
      203       16                     DROOT                DDP4
      204       17                     LOCKS                DDY1
      205       18                     PURGE                DDS6
      206       19                     SROOT                DDA1
      207       20                     XROOT                DDX1
      208       21        */
      209       22        UCLOSE: PROC (FC);

     22  5 000000   000000 700200 xent  UCLOSE       TSX0  ! X66_AUTO_1
         5 000001   000004 000001                    ZERO    4,1

      210       23        /* Input arguments  */
      211       24    1   DCL FC CHAR (2);
      212       25    1   DCL UFF_SEQ_FILE_CODE (0:2) CHAR (2) SYMREF ALIGNED;
      213       26    1   DCL ABORT ENTRY;
      214       27    1   DCL F$W2 DCB;
      215       28    1   DCL F$W3 DCB;
      216       29    1   DCL F$W5 DCB;
      217       30        %INCLUDE CP_6;
      218      111        %FPT_CLOSE (FPTN=CLOSE_FPT,DISP=SAVE);
      219      153    1       IF FC = UFF_SEQ_FILE_CODE(0) THEN /* Get dcb # depending upon fc */
PL6.E3A0      #004=UCLOSE File=ZIG$DDY8.:ZIC0TSI                                 FRI 09/05/97 11:56 Page:50   

    153  5 000002   200003 470500                    LDP0    @FC,,AUTO
         5 000003   040000 106500                    CMPC    fill='040'O
         5 000004   000000 000002                    ADSC9   0,,PR0                   cn=0,n=2
         5 000005   000000 000002 xsym               ADSC9   UFF_SEQ_FILE_CODE        cn=0,n=2
         5 000006   000013 601000 5                  TNZ     s:156

      220      154    1           CLOSE_FPT.V.DCB# = DCBNUM (F$W2);

    154  5 000007   000000 236007 xsym               LDQ     F$W2,DL
         5 000010   000000 620006                    EAX0    0,QL
         5 000011   000032 740000 4                  STX0    CLOSE_FPT+26
         5 000012   000036 710000 5                  TRA     s:163

      221      155    1       ELSE
      222      156    1           IF FC = UFF_SEQ_FILE_CODE(1) THEN

    156  5 000013   040000 106500                    CMPC    fill='040'O
         5 000014   000000 000002                    ADSC9   0,,PR0                   cn=0,n=2
         5 000015   000001 000002 xsym               ADSC9   UFF_SEQ_FILE_CODE+1      cn=0,n=2
         5 000016   000023 601000 5                  TNZ     s:159

      223      157    1               CLOSE_FPT.V.DCB# = DCBNUM (F$W3);

    157  5 000017   000000 236007 xsym               LDQ     F$W3,DL
         5 000020   000000 620006                    EAX0    0,QL
         5 000021   000032 740000 4                  STX0    CLOSE_FPT+26
         5 000022   000036 710000 5                  TRA     s:163

      224      158    1           ELSE
      225      159    1               IF FC = UFF_SEQ_FILE_CODE(2) THEN

    159  5 000023   040000 106500                    CMPC    fill='040'O
         5 000024   000000 000002                    ADSC9   0,,PR0                   cn=0,n=2
         5 000025   000002 000002 xsym               ADSC9   UFF_SEQ_FILE_CODE+2      cn=0,n=2
         5 000026   000033 601000 5                  TNZ     s:162

PL6.E3A0      #004=UCLOSE File=ZIG$DDY8.:ZIC0TSI                                 FRI 09/05/97 11:56 Page:51   
      226      160    1                   CLOSE_FPT.V.DCB# = DCBNUM (F$W5);

    160  5 000027   000000 236007 xsym               LDQ     F$W5,DL
         5 000030   000000 620006                    EAX0    0,QL
         5 000031   000032 740000 4                  STX0    CLOSE_FPT+26
         5 000032   000036 710000 5                  TRA     s:163

      227      161    1               ELSE
      228      162    1                   CALL ABORT;

    162  5 000033   000000 631400 6                  EPPR1   0
         5 000034   000000 701000 xent               TSX1    ABORT
         5 000035   000000 011000                    NOP     0

      229      163    1       CALL M$CLOSE (CLOSE_FPT) ALTRET (ERR1);

    163  5 000036   000000 630400 4                  EPPR0   CLOSE_FPT
         5 000037   450001 713400                    CLIMB   alt,close
         5 000040   406000 401760                    pmme    nvectors=13
         5 000041   000043 702000 5                  TSX2    ERR1

      230      164    1       RETURN;

    164  5 000042   000000 702200 xent               TSX2  ! X66_ARET

      231      165    1   ERR1:
      232      166    1       RETURN;

    166  5 000043   000000 702200 xent  ERR1         TSX2  ! X66_ARET

CLOSE_FPT
 Sect OctLoc
   4     000   000003 777640   000032 006000   000000 177640   000000 006014    ................
   4     004   000000 177640   000000 006014   000000 177640   000000 006014    ................
   4     030*  000000 177640   000000 006014   000000 000002   000000 000040    ...............
   4     034   000220 000000   000000 000000                                    ........

PL6.E3A0      #004=UCLOSE File=ZIG$DDY8.:ZIC0TSI                                 FRI 09/05/97 11:56 Page:52   
(unnamed)
 Sect OctLoc
   6     000   000000 000000                                                    ....
      233      167    1   END;

PL6.E3A0      #004=UCLOSE File=ZIG$DDY8.:ZIC0TSI                                 FRI 09/05/97 11:56 Page:53   
--  Include file information  --

   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure UCLOSE.

   Procedure UCLOSE requires 36 words for executable code.
   Procedure UCLOSE requires 4 words of local(AUTO) storage.

    No errors detected in file ZIG$DDY8.:ZIC0TSI    .
PL6.E3A0      #004=UCLOSE File=ZIG$DDY8.:ZIC0TSI                                 FRI 09/05/97 11:56 Page:54   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #004=UCLOSE File=ZIG$DDY8.:ZIC0TSI                                 FRI 09/05/97 11:56 Page:55   
          MINI XREF LISTING

ABORT
        26**DCL-ENT   162--CALL
CLOSE_FPT
       134**DCL       163<>CALL
CLOSE_FPT.SN_
       134**DCL       134--REDEF
CLOSE_FPT.UTL_
       135**DCL       135--REDEF
CLOSE_FPT.V
       139**DCL       134--DCLINIT
CLOSE_FPT.V.DCB#
       140**DCL       154<<ASSIGN    157<<ASSIGN    160<<ASSIGN
CLOSE_FPT.V.EXPIRE#
       149**DCL       149--REDEF
CLOSE_FPT.V.TYPE#
       147**DCL       147--REDEF
CLOSE_FPT.V.XTNSIZE#
       144**DCL       144--REDEF     146--REDEF
ERR1
       166**LABEL     163--CALLALT
F$W2
        27**DCL       154>>ASSIGN
F$W3
        28**DCL       157>>ASSIGN
F$W5
        29**DCL       160>>ASSIGN
FC
        24**DCL        22--PROC      153>>IF        156>>IF        159>>IF
M$CLOSE
        39**DCL-ENT   163--CALL
UFF_SEQ_FILE_CODE
        25**DCL       153>>IF        156>>IF        159>>IF
