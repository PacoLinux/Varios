
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:1    
        1        1        /*M*  ZIU$GETDYN       IDSII    GET DYNAMIC SEGIMENT               */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        ZIU$GETDYN: PROC(PTR$,TBLTYP) ALTRET;
        8        8    1   DCL PTR$ PTR;
        9        9    1   DCL EXPSZ REDEF PTR$ SBIN WORD;
       10       10    1   DCL TBLTYP SBIN;
       11       11    1   DCL BUFS# REDEF TBLTYP SBIN;
       12       12    1   DCL NBUFS UBIN WORD STATIC SYMDEF ALIGNED INIT(32);
       13       13    1   DCL XBUFS UBIN WORD STATIC SYMDEF ALIGNED INIT(0);
       14       14    1   DCL NBUFS# UBIN WORD STATIC ALIGNED;
       15       15    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
       16       16
       17       17         %INCLUDE CP_6;
       18       98         %INCLUDE CP_6_SUBS;
       19      638         %INCLUDE ZI_ERRORS_SUBS;
       20     1158         %INCLUDE ZI_GLOBAL_DBUTIL;
       21     1336         %SYS_FUNC;
       22     1428         %MISC_DCLS;
       23     1481         %INCLUDE ZI_DBU_ROLL;
       24     1565         %ROLL_LIST;
       25     1624         %ROLL_SUBS;
       26     1643         %FPT_GDP(RESULTS=BUFFERS); /* TRY TO GET 80 PAGES */
       27     1657         %FPT_FDP(PAGES=1,RESULTS=BUFFERS); /* GIVE AWAY EXTRA PAGE */
       28     1671         %VLP_PSEUDO(N=8); /* AREA TO RECEIVE RES INFO */
       29     1687         %FPT_RESCTL(PSEUDO=VLP_PSEUDO);
       30     1704         %FPT_GDS(SEGSIZE=1024);
       31     1720         %VLP_VECTOR(FPTN=DCBLST);
       32     1735         %VLP_VECTOR(FPTN=FIDLST);
       33     1750         %VLP_VECTOR(FPTN=BUFFERS);
       34     1765         %VLP_VECTOR(FPTN=MSTRTBL);
       35     1780         %VLP_VECTOR(FPTN=REPTBL);
       36     1795         %FPT_FDS(FPTN=FDS,
       37     1796         RESULTS=FREE_DYN);
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:2    
       38     1811         %VLP_VECTOR(FPTN=FREE_DYN);
       39     1826
       40     1827         %SUB MSTRTBL# = 2;
       41     1828         %SUB SETTBL# = 3;
       42     1829         %SUB RECTBL# = 4;
       43     1830         %SUB REPTBL# = 5;
       44     1831
       45     1832        /**/
       46     1833        /**/
       47     1834    1   GETBUFFERS: ENTRY ALTRET;
       48     1835
       49     1836    1       CALL M$DISPRES(FPT_RESCTL); /* GET RES MEM=? */
       50     1837    1       IF VLP_PSEUDO.MEMORY# < 256 THEN
       51     1838    1           FPT_GDP.V.PAGES# = 32;
       52     1839    1       ELSE
       53     1840    1           FPT_GDP.V.PAGES# = 64;
       54     1841    1       CALL M$GDP(FPT_GDP) ALTRET(NO_SUPRISE);
       55     1842    1   NO_SUPRISE: /* CAUSE WE DIDNT SET UPPER BOUND */
       56     1843    1       I_O_BUF$ = BUFFERS.PTR$;
       57     1844    1       NBUFS = (BUFFERS.W1.VSIZE# + 1) / 4096; /* PAGES GOT */
       58     1845    1       IF NBUFS < 32 THEN /* WE NEED AT LEAST 32 K */
       59     1846    2       DO;
       60     1847         /*E* ERROR: ZIU-DBU#INSUFMEM-C
       61     1848                       MESSAGE: Insufficient memory for allocating I/O buffers. */
       62     1849    2           ERRCODESF.ERR# = DBU#INSUFMEM;
       63     1850    2           MSGCODE = ERRCODE_RDEF;
       64     1851    2           ERRFLGSF = 4;
       65     1852    2           CALL SYS_FUNC_ERRMSG;
       66     1853    2           ALTRETURN;
       67     1854    2           END;
       68     1855    1       IF (NBUFS/2)*2 < NBUFS THEN /* WE WANTS ONLY EVEN # OF BUFS */
       69     1856    2       DO;
       70     1857    2           NBUFS = NBUFS - 1;
       71     1858    2           CALL M$FDP(FPT_FDP); /* GIVE UP EXTRA ONES */
       72     1859    2           END;
       73     1860    1       NBUFS = NBUFS/2;
       74     1861    1       XBUFS = NBUFS; /* Buffers used for read ahead */
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:3    
       75     1862    1       RETURN;
       76     1863        %EJECT;
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:4    
       77     1864    1   SET_BUFS: ENTRY(PTR$,TBLTYP /* Redefined as num of bufs */);
       78     1865
       79     1866    1       FPT_FDP.V.PAGES# = 0;
       80     1867    1       CALL M$FDP(FPT_FDP); /*  FRAME THE CURRENT DYNAMIC SPACE */
       81     1868    1       NBUFS# = (BUFFERS.W1.VSIZE# + 1) / 4096;
       82     1869    1       NBUFS = NBUFS#/2;
       83     1870    1       XBUFS = NBUFS;
       84     1871
       85     1872    1       IF BUFS# = NBUFS# THEN
       86     1873    1           RETURN;
       87     1874
       88     1875    1       IF BUFS# > NBUFS# THEN
       89     1876    2       DO; /* Get additional buffers */
       90     1877    2           FPT_GDP.V.PAGES# = BUFS# - NBUFS#;
       91     1878    2           CALL M$GDP(FPT_GDP);
       92     1879    2           END;
       93     1880    2       ELSE DO; /* Free extra buffer space */
       94     1881    2           FPT_FDP.V.PAGES# = NBUFS# - BUFS#;
       95     1882    2           CALL M$FDP(FPT_FDP) ALTRET(NXTLINE);
       96     1883    2           END;
       97     1884
       98     1885    1       NBUFS = (BUFFERS.W1.VSIZE# + 1)/4096;
       99     1886    1       NBUFS = NBUFS/2;
      100     1887    1       XBUFS = NBUFS;
      101     1888    1   NXTLINE:
      102     1889    1       RETURN;
      103     1890        %EJECT;
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:5    
      104     1891
      105     1892    1   CREATE_TBL_SEG: ENTRY(PTR$,TBLTYP) ALTRET;
      106     1893    2       DO CASE(TBLTYP);
      107     1894    2       CASE(DCBLST#,SETTBL#);
      108     1895    2           FPT_GDS.RESULTS_ = VECTOR(DCBLST);
      109     1896    2           DCBLST.PTR$ = ADDR(NIL);
      110     1897    2           CALL M$GDS(FPT_GDS) ALTRET(NO_SPACE);
      111     1898    2           PTR$ = DCBLST.PTR$;
      112     1899    2       CASE(FIDLST#,RECTBL#);
      113     1900    2           FPT_GDS.RESULTS_ = VECTOR(FIDLST);
      114     1901    2           FIDLST.PTR$ = ADDR(NIL);
      115     1902    2           CALL M$GDS(FPT_GDS) ALTRET(NO_SPACE);
      116     1903    2           PTR$ = FIDLST.PTR$;
      117     1904    2       CASE(MSTRTBL#);
      118     1905    2           FPT_GDS.RESULTS_ = VECTOR(MSTRTBL);
      119     1906    2           MSTRTBL.PTR$ = ADDR(NIL);
      120     1907    2           CALL M$GDS(FPT_GDS) ALTRET(NO_SPACE);
      121     1908    2           PTR$ = MSTRTBL.PTR$;
      122     1909    2       CASE(REPTBL#);
      123     1910    2           FPT_GDS.RESULTS_ = VECTOR(REPTBL);
      124     1911    2           REPTBL.PTR$ = ADDR(NIL);
      125     1912    2           CALL M$GDS(FPT_GDS) ALTRET(NO_SPACE);
      126     1913    2           PTR$ = REPTBL.PTR$;
      127     1914    2           END;
      128     1915    1       RETURN;
      129     1916
      130     1917    1   EXPAND_TBL_SEG: ENTRY(PTR$,TBLTYP) ALTRET;
      131     1918    2       DO CASE(TBLTYP);
      132     1919    2       CASE(DCBLST#,SETTBL#);
      133     1920    2           FPT_GDS.RESULTS_ = VECTOR(DCBLST);
      134     1921    2       CASE(FIDLST#,RECTBL#);
      135     1922    2           FPT_GDS.RESULTS_ = VECTOR(FIDLST);
      136     1923    2       CASE(MSTRTBL#);
      137     1924    2           FPT_GDS.RESULTS_ = VECTOR(MSTRTBL);
      138     1925    2       CASE(REPTBL#);
      139     1926    2           FPT_GDS.RESULTS_ = VECTOR(REPTBL);
      140     1927    2           FPT_GDS.V.SEGSIZE# = EXPSZ * 1024;
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:6    
      141     1928    2           END;
      142     1929    1       CALL M$GDS(FPT_GDS) ALTRET(NO_SPACE);
      143     1930    1       FPT_GDS.V.SEGSIZE# = 1024;
      144     1931    1       RETURN;
      145     1932    1   FREE_TBL: ENTRY(PTR$,TBLTYP) ALTRET;
      146     1933
      147     1934    2       DO CASE(TBLTYP);
      148     1935    2       CASE(REPTBL#);
      149     1936    2           FDS.RESULTS_ = VECTOR(REPTBL);
      150     1937    2           FDS.V.SEGSIZE# = (REPTBL.W1.VSIZE# + 1)/4;
      151     1938    2           CALL M$FDS(FDS);
      152     1939    2           END;
      153     1940    1       RETURN;
      154     1941        /**/
      155     1942    1   FREE_DYN_MEM: ENTRY ALTRET;
      156     1943    1       FDS.RESULTS_ = VECTOR(FIDLST);
      157     1944    1       FDS.V.SEGSIZE# = (FIDLST.W1.VSIZE#+1)/4; /* SET # WRDS TO RELEASE */
      158     1945    1       CALL M$FDS(FDS);
      159     1946    1       FDS.RESULTS_ = VECTOR(DCBLST);
      160     1947    1       FDS.V.SEGSIZE# = (DCBLST.W1.VSIZE#+1)/4;
      161     1948    1       CALL M$FDS(FDS);
      162     1949    1       FDS.RESULTS_ = VECTOR(MSTRTBL);
      163     1950    1       FDS.V.SEGSIZE# = (MSTRTBL.W1.VSIZE#+1)/4;
      164     1951    1       CALL M$FDS(FDS);
      165     1952
      166     1953    1       RETURN;
      167     1954
      168     1955        /**/
      169     1956    1   NO_SPACE:
      170     1957         /*E* ERROR: ZIU-DBU#NOMEM-C
      171     1958              MESSAGE: Memory limit exceeded building %U1 list table. */
      172     1959    1       ERR_INSERT.CNT(0) = 3;
      173     1960    1       IF TBLTYP = DCBLST# THEN
      174     1961    1           ERR_INSERT.TEXT(0) = 'DCB';
      175     1962    1       ELSE
      176     1963    1           IF TBLTYP = FIDLST# THEN
      177     1964    1               ERR_INSERT.TEXT(0) = 'FID';
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:7    
      178     1965    1           ELSE
      179     1966    1               ERR_INSERT.TEXT(0) = ' ? ';
      180     1967    1       ERRCODESF.ERR# = DBU#NOMEM;
      181     1968    1       MSGCODE = ERRCODE_RDEF;
      182     1969    1       CALL SYS_FUNC_ERRMSG;
      183     1970    1       ALTRETURN;
      184     1971    1   END ZIU$GETDYN;

PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:8    
--  Include file information  --

   ZI_DBU_ROLL.:ZIC0TOU  is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   ZI_ERRORS_SUBS.:ZIC0TOU  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure ZIU$GETDYN.

   Procedure ZIU$GETDYN requires 283 words for executable code.
   Procedure ZIU$GETDYN requires 6 words of local(AUTO) storage.

    No errors detected in file ZIU$GETDYN.:ZIC0TSI    .

PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:9    

 Object Unit name= ZIU$GETDYN                                 File name= ZIU$GETDYN.:ZIC0TOU
 UTS= SEP 05 '97 13:15:38.08 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none    90    132  ZIU$GETDYN
    1   DCB   even  none     0      0  M$UC
    2   DCB   even  none     0      0  M$LO
    3  RoData even  UTS      3      3  ZIU$GETDYN
    4   Proc  even  none   283    433  ZIU$GETDYN
    5  RoData even  none    12     14  ZIU$GETDYN

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     4      0   yes    yes     yes      Std        2  ZIU$GETDYN
     4      3          yes     yes      Std        0  GETBUFFERS
     4     67          yes     yes      Std        2  SET_BUFS
     4    146          yes     yes      Std        2  CREATE_TBL_SEG
     4    243          yes     yes      Std        2  EXPAND_TBL_SEG
     4    307          yes     yes      Std        2  FREE_TBL
     4    334          yes     yes      Std        0  FREE_DYN_MEM

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      0  NBUFS                              0      1  XBUFS
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:10   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       0 SYS_FUNC_ERRMSG
                       nStd      0 X66_AUTO_2
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  BLKLSF                                KEYLSF
     KEYXSF                                DCBSF                                 ORGSF
     KEYSF                                 KEYVSF                                ACSSF
     NOTIMESF                              FUNSF                                 ASNSF
     TESTSF                                XTENSIZESF                            DISPSF
     WAITSF                                VFCSF                                 FULLSF
     BKUPSF                                BUFLNSF                               BUFSF
     SOURCESF                              DESTSF                                DATESF
     TIMESF                                UTSSF                                 DAYSF
     TSTAMPSF                              ENCRP_SEEDSF                          ERRCODESF
     MSGCODE                               INCL_ERR                              ERR_INSERT
     FIDSF_RD                              ACNT                                  EXISTSF
     SHARESF                               DCBNMSF                               KEYRSF
     NO_KEYSF                              REASGNSF                              CARRY_ATTRIBUTESF
     SUBMESSF                              SPKY_OPNSF                            POSSF
     ERRFLGSF                              MERGESF                               FSA_FLAG
     RELGSF                                UNUSED                                HELPCODE
     COUNTSF                               INDEXSF                               GAP
     PSNSF                                 ACNTSF                                KEY_SHADWSF
     REC$                                  RB                                    RE
     IE                                    IB                                    CNT
     ICNT                                  RCNT                                  SCNT
     FIRST_SET                             RETCNT                                DMPCNT
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:11   
     KCNT                                  ACNT_IDX                              I
     J                                     K                                     X
     STEPCC                                I_O_BUF$                              OUT_INDX
     I_O_SIZE                              REC_DATA_LN                           M$LO
     B$TCB$                                B$ROS$                                B$JIT$
     KEYFID                                I_O_KEY                               RESTART
     BREAK_FLAG                            ICHKSUM                               ITMCNT
     GAP1                                  FID$                                  DCBLIST$
     USER$                                 FID_INDXS$                            FID_INDXS
     NXT_AVIL_FIDSLOT                      NXT_AVIL_DCBSLOT                      LAST_UNUSED_DCBSLOT
     USER                                  NO                                    FIRST
     LAST                                  MAX_DCBINDX                           MAX_FIDINDX
     FIDX                                  DCBX                                  BRK_ROLL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:12   


        1        1        /*M*  ZIU$GETDYN       IDSII    GET DYNAMIC SEGIMENT               */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        ZIU$GETDYN: PROC(PTR$,TBLTYP) ALTRET;

      7  4 000000   000000 700200 xent  ZIU$GETDYN   TSX0  ! X66_AUTO_2
         4 000001   000006 000002                    ZERO    6,2
         4 000002   000005 710000 4                  TRA     s:1836

        8        8    1   DCL PTR$ PTR;
        9        9    1   DCL EXPSZ REDEF PTR$ SBIN WORD;
       10       10    1   DCL TBLTYP SBIN;
       11       11    1   DCL BUFS# REDEF TBLTYP SBIN;
       12       12    1   DCL NBUFS UBIN WORD STATIC SYMDEF ALIGNED INIT(32);
       13       13    1   DCL XBUFS UBIN WORD STATIC SYMDEF ALIGNED INIT(0);
       14       14    1   DCL NBUFS# UBIN WORD STATIC ALIGNED;
       15       15    1   DCL SYS_FUNC_ERRMSG ENTRY ALTRET;
       16       16
       17       17         %INCLUDE CP_6;
       18       98         %INCLUDE CP_6_SUBS;
       19      638         %INCLUDE ZI_ERRORS_SUBS;
       20     1158         %INCLUDE ZI_GLOBAL_DBUTIL;
       21     1336         %SYS_FUNC;
       22     1428         %MISC_DCLS;
       23     1481         %INCLUDE ZI_DBU_ROLL;
       24     1565         %ROLL_LIST;
       25     1624         %ROLL_SUBS;
       26     1643         %FPT_GDP(RESULTS=BUFFERS); /* TRY TO GET 80 PAGES */
       27     1657         %FPT_FDP(PAGES=1,RESULTS=BUFFERS); /* GIVE AWAY EXTRA PAGE */
       28     1671         %VLP_PSEUDO(N=8); /* AREA TO RECEIVE RES INFO */
       29     1687         %FPT_RESCTL(PSEUDO=VLP_PSEUDO);
       30     1704         %FPT_GDS(SEGSIZE=1024);
       31     1720         %VLP_VECTOR(FPTN=DCBLST);
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:13   
       32     1735         %VLP_VECTOR(FPTN=FIDLST);
       33     1750         %VLP_VECTOR(FPTN=BUFFERS);
       34     1765         %VLP_VECTOR(FPTN=MSTRTBL);
       35     1780         %VLP_VECTOR(FPTN=REPTBL);
       36     1795         %FPT_FDS(FPTN=FDS,
       37     1796         RESULTS=FREE_DYN);
       38     1811         %VLP_VECTOR(FPTN=FREE_DYN);
       39     1826
       40     1827         %SUB MSTRTBL# = 2;
       41     1828         %SUB SETTBL# = 3;
       42     1829         %SUB RECTBL# = 4;
       43     1830         %SUB REPTBL# = 5;
       44     1831
       45     1832        /**/
       46     1833        /**/
       47     1834    1   GETBUFFERS: ENTRY ALTRET;

   1834  4 000003   000000 700200 xent  GETBUFFERS   TSX0  ! X66_AUTO_2
         4 000004   000006 000002                    ZERO    6,2

       48     1835
       49     1836    1       CALL M$DISPRES(FPT_RESCTL); /* GET RES MEM=? */

   1836  4 000005   000060 630400 0                  EPPR0   FPT_RESCTL
         4 000006   150002 713400                    CLIMB   53250
         4 000007   402400 401760                    pmme    nvectors=6

       50     1837    1       IF VLP_PSEUDO.MEMORY# < 256 THEN

   1837  4 000010   000022 220000 0                  LDX0    VLP_PSEUDO+2
         4 000011   000400 100003                    CMPX0   256,DU
         4 000012   000016 603000 4                  TRC     s:1840

       51     1838    1           FPT_GDP.V.PAGES# = 32;

   1838  4 000013   000040 235007                    LDA     32,DL
         4 000014   000010 755000 0                  STA     FPT_GDP+4
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:14   
         4 000015   000020 710000 4                  TRA     s:1841

       52     1839    1       ELSE
       53     1840    1           FPT_GDP.V.PAGES# = 64;

   1840  4 000016   000100 235007                    LDA     64,DL
         4 000017   000010 755000 0                  STA     FPT_GDP+4

       54     1841    1       CALL M$GDP(FPT_GDP) ALTRET(NO_SUPRISE);

   1841  4 000020   000004 630400 0                  EPPR0   FPT_GDP
         4 000021   430003 713400                    CLIMB   alt,+12291
         4 000022   400400 401760                    pmme    nvectors=2
         4 000023   000024 702000 4                  TSX2    NO_SUPRISE

       55     1842    1   NO_SUPRISE: /* CAUSE WE DIDNT SET UPPER BOUND */
       56     1843    1       I_O_BUF$ = BUFFERS.PTR$;

   1843  4 000024   000115 236000 0     NO_SUPRISE   LDQ     BUFFERS+1
         4 000025   000000 756000 xsym               STQ     I_O_BUF$

       57     1844    1       NBUFS = (BUFFERS.W1.VSIZE# + 1) / 4096; /* PAGES GOT */

   1844  4 000026   000114 236000 0                  LDQ     BUFFERS
         4 000027   000020 772000                    QRL     16
         4 000030   000001 036007                    ADLQ    1,DL
         4 000031   000014 772000                    QRL     12
         4 000032   000000 756000 0                  STQ     NBUFS

       58     1845    1       IF NBUFS < 32 THEN /* WE NEED AT LEAST 32 K */

   1845  4 000033   000040 116007                    CMPQ    32,DL
         4 000034   000050 603000 4                  TRC     s:1855

       59     1846    2       DO;

       60     1847         /*E* ERROR: ZIU-DBU#INSUFMEM-C
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:15   
       61     1848                       MESSAGE: Insufficient memory for allocating I/O buffers. */
       62     1849    2           ERRCODESF.ERR# = DBU#INSUFMEM;

   1849  4 000035   000000 236000 xsym               LDQ     ERRCODESF
         4 000036   000000 376000 5                  ANQ     0
         4 000037   215300 276007                    ORQ     72384,DL
         4 000040   000000 756000 xsym               STQ     ERRCODESF

       63     1850    2           MSGCODE = ERRCODE_RDEF;

   1850  4 000041   000000 756000 xsym               STQ     MSGCODE

       64     1851    2           ERRFLGSF = 4;

   1851  4 000042   004000 236003                    LDQ     2048,DU
         4 000043   000000 756000 xsym               STQ     ERRFLGSF

       65     1852    2           CALL SYS_FUNC_ERRMSG;

   1852  4 000044   000001 631400 5                  EPPR1   1
         4 000045   000000 701000 xent               TSX1    SYS_FUNC_ERRMSG
         4 000046   000000 011000                    NOP     0

       66     1853    2           ALTRETURN;

   1853  4 000047   000000 702200 xent               TSX2  ! X66_AALT

       67     1854    2           END;
       68     1855    1       IF (NBUFS/2)*2 < NBUFS THEN /* WE WANTS ONLY EVEN # OF BUFS */

   1855  4 000050   000001 772000                    QRL     1
         4 000051   000001 736000                    QLS     1
         4 000052   000000 116000 0                  CMPQ    NBUFS
         4 000053   000062 603000 4                  TRC     s:1860

       69     1856    2       DO;

PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:16   
       70     1857    2           NBUFS = NBUFS - 1;

   1857  4 000054   000000 235000 0                  LDA     NBUFS
         4 000055   000001 135007                    SBLA    1,DL
         4 000056   000000 755000 0                  STA     NBUFS

       71     1858    2           CALL M$FDP(FPT_FDP); /* GIVE UP EXTRA ONES */

   1858  4 000057   000012 630400 0                  EPPR0   FPT_FDP
         4 000060   030004 713400                    CLIMB   12292
         4 000061   400400 401760                    pmme    nvectors=2

       72     1859    2           END;

       73     1860    1       NBUFS = NBUFS/2;

   1860  4 000062   000000 236000 0                  LDQ     NBUFS
         4 000063   000001 772000                    QRL     1
         4 000064   000000 756000 0                  STQ     NBUFS

       74     1861    1       XBUFS = NBUFS; /* Buffers used for read ahead */

   1861  4 000065   000001 756000 0                  STQ     XBUFS

       75     1862    1       RETURN;

   1862  4 000066   000000 702200 xent               TSX2  ! X66_ARET

       76     1863        %EJECT;
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:17   
       77     1864    1   SET_BUFS: ENTRY(PTR$,TBLTYP /* Redefined as num of bufs */);

   1864  4 000067   000000 700200 xent  SET_BUFS     TSX0  ! X66_AUTO_2
         4 000070   000006 000002                    ZERO    6,2

       78     1865
       79     1866    1       FPT_FDP.V.PAGES# = 0;

   1866  4 000071   000016 450000 0                  STZ     FPT_FDP+4

       80     1867    1       CALL M$FDP(FPT_FDP); /*  FRAME THE CURRENT DYNAMIC SPACE */

   1867  4 000072   000012 630400 0                  EPPR0   FPT_FDP
         4 000073   030004 713400                    CLIMB   12292
         4 000074   400400 401760                    pmme    nvectors=2

       81     1868    1       NBUFS# = (BUFFERS.W1.VSIZE# + 1) / 4096;

   1868  4 000075   000114 236000 0                  LDQ     BUFFERS
         4 000076   000020 772000                    QRL     16
         4 000077   000001 036007                    ADLQ    1,DL
         4 000100   000014 772000                    QRL     12
         4 000101   000002 756000 0                  STQ     NBUFS#

       82     1869    1       NBUFS = NBUFS#/2;

   1869  4 000102   000001 772000                    QRL     1
         4 000103   000000 756000 0                  STQ     NBUFS

       83     1870    1       XBUFS = NBUFS;

   1870  4 000104   000001 756000 0                  STQ     XBUFS

       84     1871
       85     1872    1       IF BUFS# = NBUFS# THEN

   1872  4 000105   200004 470500                    LDP0    @TBLTYP,,AUTO
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:18   
         4 000106   000000 236100                    LDQ     0,,PR0
         4 000107   000113 604000 4                  TMI     s:1875
         4 000110   000002 116000 0                  CMPQ    NBUFS#
         4 000111   000113 601000 4                  TNZ     s:1875

       86     1873    1           RETURN;

   1873  4 000112   000000 702200 xent               TSX2  ! X66_ARET

       87     1874
       88     1875    1       IF BUFS# > NBUFS# THEN

   1875  4 000113   000000 116003                    CMPQ    0,DU
         4 000114   000126 604000 4                  TMI     s:1881
         4 000115   000002 116000 0                  CMPQ    NBUFS#
         4 000116   000126 602000 4                  TNC     s:1881
         4 000117   000126 600000 4                  TZE     s:1881

       89     1876    2       DO; /* Get additional buffers */

       90     1877    2           FPT_GDP.V.PAGES# = BUFS# - NBUFS#;

   1877  4 000120   000002 136000 0                  SBLQ    NBUFS#
         4 000121   000010 756000 0                  STQ     FPT_GDP+4

       91     1878    2           CALL M$GDP(FPT_GDP);

   1878  4 000122   000004 630400 0                  EPPR0   FPT_GDP
         4 000123   030003 713400                    CLIMB   12291
         4 000124   400400 401760                    pmme    nvectors=2

       92     1879    2           END;

   1879  4 000125   000135 710000 4                  TRA     s:1885

       93     1880    2       ELSE DO; /* Free extra buffer space */

PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:19   
       94     1881    2           FPT_FDP.V.PAGES# = NBUFS# - BUFS#;

   1881  4 000126   000002 236000 0                  LDQ     NBUFS#
         4 000127   000000 136100                    SBLQ    0,,PR0
         4 000130   000016 756000 0                  STQ     FPT_FDP+4

       95     1882    2           CALL M$FDP(FPT_FDP) ALTRET(NXTLINE);

   1882  4 000131   000012 630400 0                  EPPR0   FPT_FDP
         4 000132   430004 713400                    CLIMB   alt,+12292
         4 000133   400400 401760                    pmme    nvectors=2
         4 000134   000145 702000 4                  TSX2    NXTLINE

       96     1883    2           END;

       97     1884
       98     1885    1       NBUFS = (BUFFERS.W1.VSIZE# + 1)/4096;

   1885  4 000135   000114 236000 0                  LDQ     BUFFERS
         4 000136   000020 772000                    QRL     16
         4 000137   000001 036007                    ADLQ    1,DL
         4 000140   000014 772000                    QRL     12
         4 000141   000000 756000 0                  STQ     NBUFS

       99     1886    1       NBUFS = NBUFS/2;

   1886  4 000142   000001 772000                    QRL     1
         4 000143   000000 756000 0                  STQ     NBUFS

      100     1887    1       XBUFS = NBUFS;

   1887  4 000144   000001 756000 0                  STQ     XBUFS

      101     1888    1   NXTLINE:
      102     1889    1       RETURN;

   1889  4 000145   000000 702200 xent  NXTLINE      TSX2  ! X66_ARET
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:20   

      103     1890        %EJECT;
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:21   
      104     1891
      105     1892    1   CREATE_TBL_SEG: ENTRY(PTR$,TBLTYP) ALTRET;

   1892  4 000146   000000 700200 xent  CREATE_TBL_* TSX0  ! X66_AUTO_2
         4 000147   000006 000002                    ZERO    6,2

      106     1893    2       DO CASE(TBLTYP);

   1893  4 000150   200004 470500                    LDP0    @TBLTYP,,AUTO
         4 000151   000000 235100                    LDA     0,,PR0
         4 000152   000006 115007                    CMPA    6,DL
         4 000153   000155 602005 4                  TNC     s:1893+5,AL
         4 000154   000242 710000 4                  TRA     s:1915
         4 000155   000163 710000 4                  TRA     s:1895
         4 000156   000177 710000 4                  TRA     s:1900
         4 000157   000213 710000 4                  TRA     s:1905
         4 000160   000163 710000 4                  TRA     s:1895
         4 000161   000177 710000 4                  TRA     s:1900
         4 000162   000227 710000 4                  TRA     s:1910

      107     1894    2       CASE(DCBLST#,SETTBL#);

      108     1895    2           FPT_GDS.RESULTS_ = VECTOR(DCBLST);

   1895  4 000163   000002 237000 5                  LDAQ    2
         4 000164   000104 757000 0                  STAQ    FPT_GDS+2

      109     1896    2           DCBLST.PTR$ = ADDR(NIL);

   1896  4 000165   000004 236000 5                  LDQ     4
         4 000166   000111 756000 0                  STQ     DCBLST+1

      110     1897    2           CALL M$GDS(FPT_GDS) ALTRET(NO_SPACE);

   1897  4 000167   000102 630400 0                  EPPR0   FPT_GDS
         4 000170   430001 713400                    CLIMB   alt,gds
         4 000171   400400 401760                    pmme    nvectors=2
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:22   
         4 000172   000400 702000 4                  TSX2    NO_SPACE

      111     1898    2           PTR$ = DCBLST.PTR$;

   1898  4 000173   000111 236000 0                  LDQ     DCBLST+1
         4 000174   200003 470500                    LDP0    @PTR$,,AUTO
         4 000175   000000 756100                    STQ     0,,PR0
         4 000176   000242 710000 4                  TRA     s:1915

      112     1899    2       CASE(FIDLST#,RECTBL#);

      113     1900    2           FPT_GDS.RESULTS_ = VECTOR(FIDLST);

   1900  4 000177   000006 237000 5                  LDAQ    6
         4 000200   000104 757000 0                  STAQ    FPT_GDS+2

      114     1901    2           FIDLST.PTR$ = ADDR(NIL);

   1901  4 000201   000004 236000 5                  LDQ     4
         4 000202   000113 756000 0                  STQ     FIDLST+1

      115     1902    2           CALL M$GDS(FPT_GDS) ALTRET(NO_SPACE);

   1902  4 000203   000102 630400 0                  EPPR0   FPT_GDS
         4 000204   430001 713400                    CLIMB   alt,gds
         4 000205   400400 401760                    pmme    nvectors=2
         4 000206   000400 702000 4                  TSX2    NO_SPACE

      116     1903    2           PTR$ = FIDLST.PTR$;

   1903  4 000207   000113 236000 0                  LDQ     FIDLST+1
         4 000210   200003 470500                    LDP0    @PTR$,,AUTO
         4 000211   000000 756100                    STQ     0,,PR0
         4 000212   000242 710000 4                  TRA     s:1915

      117     1904    2       CASE(MSTRTBL#);

PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:23   
      118     1905    2           FPT_GDS.RESULTS_ = VECTOR(MSTRTBL);

   1905  4 000213   000010 237000 5                  LDAQ    8
         4 000214   000104 757000 0                  STAQ    FPT_GDS+2

      119     1906    2           MSTRTBL.PTR$ = ADDR(NIL);

   1906  4 000215   000004 236000 5                  LDQ     4
         4 000216   000117 756000 0                  STQ     MSTRTBL+1

      120     1907    2           CALL M$GDS(FPT_GDS) ALTRET(NO_SPACE);

   1907  4 000217   000102 630400 0                  EPPR0   FPT_GDS
         4 000220   430001 713400                    CLIMB   alt,gds
         4 000221   400400 401760                    pmme    nvectors=2
         4 000222   000400 702000 4                  TSX2    NO_SPACE

      121     1908    2           PTR$ = MSTRTBL.PTR$;

   1908  4 000223   000117 236000 0                  LDQ     MSTRTBL+1
         4 000224   200003 470500                    LDP0    @PTR$,,AUTO
         4 000225   000000 756100                    STQ     0,,PR0
         4 000226   000242 710000 4                  TRA     s:1915

      122     1909    2       CASE(REPTBL#);

      123     1910    2           FPT_GDS.RESULTS_ = VECTOR(REPTBL);

   1910  4 000227   000012 237000 5                  LDAQ    10
         4 000230   000104 757000 0                  STAQ    FPT_GDS+2

      124     1911    2           REPTBL.PTR$ = ADDR(NIL);

   1911  4 000231   000004 236000 5                  LDQ     4
         4 000232   000121 756000 0                  STQ     REPTBL+1

      125     1912    2           CALL M$GDS(FPT_GDS) ALTRET(NO_SPACE);
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:24   

   1912  4 000233   000102 630400 0                  EPPR0   FPT_GDS
         4 000234   430001 713400                    CLIMB   alt,gds
         4 000235   400400 401760                    pmme    nvectors=2
         4 000236   000400 702000 4                  TSX2    NO_SPACE

      126     1913    2           PTR$ = REPTBL.PTR$;

   1913  4 000237   000121 236000 0                  LDQ     REPTBL+1
         4 000240   200003 470500                    LDP0    @PTR$,,AUTO
         4 000241   000000 756100                    STQ     0,,PR0

      127     1914    2           END;

      128     1915    1       RETURN;

   1915  4 000242   000000 702200 xent               TSX2  ! X66_ARET

      129     1916
      130     1917    1   EXPAND_TBL_SEG: ENTRY(PTR$,TBLTYP) ALTRET;

   1917  4 000243   000000 700200 xent  EXPAND_TBL_* TSX0  ! X66_AUTO_2
         4 000244   000006 000002                    ZERO    6,2

      131     1918    2       DO CASE(TBLTYP);

   1918  4 000245   200004 470500                    LDP0    @TBLTYP,,AUTO
         4 000246   000000 235100                    LDA     0,,PR0
         4 000247   000006 115007                    CMPA    6,DL
         4 000250   000252 602005 4                  TNC     s:1918+5,AL
         4 000251   000300 710000 4                  TRA     s:1929
         4 000252   000260 710000 4                  TRA     s:1920
         4 000253   000263 710000 4                  TRA     s:1922
         4 000254   000266 710000 4                  TRA     s:1924
         4 000255   000260 710000 4                  TRA     s:1920
         4 000256   000263 710000 4                  TRA     s:1922
         4 000257   000271 710000 4                  TRA     s:1926
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:25   

      132     1919    2       CASE(DCBLST#,SETTBL#);

      133     1920    2           FPT_GDS.RESULTS_ = VECTOR(DCBLST);

   1920  4 000260   000002 237000 5                  LDAQ    2
         4 000261   000104 757000 0                  STAQ    FPT_GDS+2
         4 000262   000300 710000 4                  TRA     s:1929

      134     1921    2       CASE(FIDLST#,RECTBL#);

      135     1922    2           FPT_GDS.RESULTS_ = VECTOR(FIDLST);

   1922  4 000263   000006 237000 5                  LDAQ    6
         4 000264   000104 757000 0                  STAQ    FPT_GDS+2
         4 000265   000300 710000 4                  TRA     s:1929

      136     1923    2       CASE(MSTRTBL#);

      137     1924    2           FPT_GDS.RESULTS_ = VECTOR(MSTRTBL);

   1924  4 000266   000010 237000 5                  LDAQ    8
         4 000267   000104 757000 0                  STAQ    FPT_GDS+2
         4 000270   000300 710000 4                  TRA     s:1929

      138     1925    2       CASE(REPTBL#);

      139     1926    2           FPT_GDS.RESULTS_ = VECTOR(REPTBL);

   1926  4 000271   000012 237000 5                  LDAQ    10
         4 000272   000104 757000 0                  STAQ    FPT_GDS+2

      140     1927    2           FPT_GDS.V.SEGSIZE# = EXPSZ * 1024;

   1927  4 000273   200003 471500                    LDP1    @PTR$,,AUTO
         4 000274   100000 235100                    LDA     0,,PR1
         4 000275   000012 735000                    ALS     10
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:26   
         4 000276   000000 620005                    EAX0    0,AL
         4 000277   000106 440000 0                  SXL0    FPT_GDS+4

      141     1928    2           END;

      142     1929    1       CALL M$GDS(FPT_GDS) ALTRET(NO_SPACE);

   1929  4 000300   000102 630400 0                  EPPR0   FPT_GDS
         4 000301   430001 713400                    CLIMB   alt,gds
         4 000302   400400 401760                    pmme    nvectors=2
         4 000303   000400 702000 4                  TSX2    NO_SPACE

      143     1930    1       FPT_GDS.V.SEGSIZE# = 1024;

   1930  4 000304   002000 220003                    LDX0    1024,DU
         4 000305   000106 440000 0                  SXL0    FPT_GDS+4

      144     1931    1       RETURN;

   1931  4 000306   000000 702200 xent               TSX2  ! X66_ARET

      145     1932    1   FREE_TBL: ENTRY(PTR$,TBLTYP) ALTRET;

   1932  4 000307   000000 700200 xent  FREE_TBL     TSX0  ! X66_AUTO_2
         4 000310   000006 000002                    ZERO    6,2

      146     1933
      147     1934    2       DO CASE(TBLTYP);

   1934  4 000311   200004 470500                    LDP0    @TBLTYP,,AUTO
         4 000312   000000 235100                    LDA     0,,PR0
         4 000313   000005 135007                    SBLA    5,DL
         4 000314   000001 115007                    CMPA    1,DL
         4 000315   000317 602005 4                  TNC     s:1934+6,AL
         4 000316   000333 710000 4                  TRA     s:1940
         4 000317   000320 710000 4                  TRA     s:1936

PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:27   
      148     1935    2       CASE(REPTBL#);

      149     1936    2           FDS.RESULTS_ = VECTOR(REPTBL);

   1936  4 000320   000012 237000 5                  LDAQ    10
         4 000321   000124 757000 0                  STAQ    FDS+2

      150     1937    2           FDS.V.SEGSIZE# = (REPTBL.W1.VSIZE# + 1)/4;

   1937  4 000322   000120 236000 0                  LDQ     REPTBL
         4 000323   000020 772000                    QRL     16
         4 000324   000001 036007                    ADLQ    1,DL
         4 000325   000002 772000                    QRL     2
         4 000326   000000 620006                    EAX0    0,QL
         4 000327   000126 440000 0                  SXL0    FDS+4

      151     1938    2           CALL M$FDS(FDS);

   1938  4 000330   000122 630400 0                  EPPR0   FDS
         4 000331   030002 713400                    CLIMB   fds
         4 000332   400400 401760                    pmme    nvectors=2

      152     1939    2           END;

      153     1940    1       RETURN;

   1940  4 000333   000000 702200 xent               TSX2  ! X66_ARET

      154     1941        /**/
      155     1942    1   FREE_DYN_MEM: ENTRY ALTRET;

   1942  4 000334   000000 700200 xent  FREE_DYN_MEM TSX0  ! X66_AUTO_2
         4 000335   000006 000002                    ZERO    6,2

      156     1943    1       FDS.RESULTS_ = VECTOR(FIDLST);

   1943  4 000336   000006 237000 5                  LDAQ    6
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:28   
         4 000337   000124 757000 0                  STAQ    FDS+2

      157     1944    1       FDS.V.SEGSIZE# = (FIDLST.W1.VSIZE#+1)/4; /* SET # WRDS TO RELEASE */

   1944  4 000340   000112 236000 0                  LDQ     FIDLST
         4 000341   000020 772000                    QRL     16
         4 000342   000001 036007                    ADLQ    1,DL
         4 000343   000002 772000                    QRL     2
         4 000344   000000 620006                    EAX0    0,QL
         4 000345   000126 440000 0                  SXL0    FDS+4

      158     1945    1       CALL M$FDS(FDS);

   1945  4 000346   000122 630400 0                  EPPR0   FDS
         4 000347   030002 713400                    CLIMB   fds
         4 000350   400400 401760                    pmme    nvectors=2

      159     1946    1       FDS.RESULTS_ = VECTOR(DCBLST);

   1946  4 000351   000002 237000 5                  LDAQ    2
         4 000352   000124 757000 0                  STAQ    FDS+2

      160     1947    1       FDS.V.SEGSIZE# = (DCBLST.W1.VSIZE#+1)/4;

   1947  4 000353   000110 236000 0                  LDQ     DCBLST
         4 000354   000020 772000                    QRL     16
         4 000355   000001 036007                    ADLQ    1,DL
         4 000356   000002 772000                    QRL     2
         4 000357   000000 620006                    EAX0    0,QL
         4 000360   000126 440000 0                  SXL0    FDS+4

      161     1948    1       CALL M$FDS(FDS);

   1948  4 000361   000122 630400 0                  EPPR0   FDS
         4 000362   030002 713400                    CLIMB   fds
         4 000363   400400 401760                    pmme    nvectors=2

PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:29   
      162     1949    1       FDS.RESULTS_ = VECTOR(MSTRTBL);

   1949  4 000364   000010 237000 5                  LDAQ    8
         4 000365   000124 757000 0                  STAQ    FDS+2

      163     1950    1       FDS.V.SEGSIZE# = (MSTRTBL.W1.VSIZE#+1)/4;

   1950  4 000366   000116 236000 0                  LDQ     MSTRTBL
         4 000367   000020 772000                    QRL     16
         4 000370   000001 036007                    ADLQ    1,DL
         4 000371   000002 772000                    QRL     2
         4 000372   000000 620006                    EAX0    0,QL
         4 000373   000126 440000 0                  SXL0    FDS+4

      164     1951    1       CALL M$FDS(FDS);

   1951  4 000374   000122 630400 0                  EPPR0   FDS
         4 000375   030002 713400                    CLIMB   fds
         4 000376   400400 401760                    pmme    nvectors=2

      165     1952
      166     1953    1       RETURN;

   1953  4 000377   000000 702200 xent               TSX2  ! X66_ARET

      167     1954
      168     1955        /**/
      169     1956    1   NO_SPACE:
      170     1957         /*E* ERROR: ZIU-DBU#NOMEM-C
      171     1958              MESSAGE: Memory limit exceeded building %U1 list table. */
      172     1959    1       ERR_INSERT.CNT(0) = 3;

   1959  4 000400   003000 236003       NO_SPACE     LDQ     1536,DU
         4 000401   000000 552040 xsym               STBQ    ERR_INSERT,'40'O

      173     1960    1       IF TBLTYP = DCBLST# THEN

PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:30   
   1960  4 000402   200004 470500                    LDP0    @TBLTYP,,AUTO
         4 000403   000000 235100                    LDA     0,,PR0
         4 000404   000411 601000 4                  TNZ     s:1963

      174     1961    1           ERR_INSERT.TEXT(0) = 'DCB';

   1961  4 000405   040000 100400                    MLR     fill='040'O
         4 000406   000000 000003 3                  ADSC9   0                        cn=0,n=3
         4 000407   000000 200036 xsym               ADSC9   ERR_INSERT               cn=1,n=30
         4 000410   000422 710000 4                  TRA     s:1967

      175     1962    1       ELSE
      176     1963    1           IF TBLTYP = FIDLST# THEN

   1963  4 000411   000001 115007                    CMPA    1,DL
         4 000412   000417 601000 4                  TNZ     s:1966

      177     1964    1               ERR_INSERT.TEXT(0) = 'FID';

   1964  4 000413   040000 100400                    MLR     fill='040'O
         4 000414   000001 000003 3                  ADSC9   1                        cn=0,n=3
         4 000415   000000 200036 xsym               ADSC9   ERR_INSERT               cn=1,n=30
         4 000416   000422 710000 4                  TRA     s:1967

      178     1965    1           ELSE
      179     1966    1               ERR_INSERT.TEXT(0) = ' ? ';

   1966  4 000417   040000 100400                    MLR     fill='040'O
         4 000420   000002 000003 3                  ADSC9   2                        cn=0,n=3
         4 000421   000000 200036 xsym               ADSC9   ERR_INSERT               cn=1,n=30

      180     1967    1       ERRCODESF.ERR# = DBU#NOMEM;

   1967  4 000422   000000 236000 xsym               LDQ     ERRCODESF
         4 000423   000000 376000 5                  ANQ     0
         4 000424   214710 276007                    ORQ     72136,DL
         4 000425   000000 756000 xsym               STQ     ERRCODESF
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:31   

      181     1968    1       MSGCODE = ERRCODE_RDEF;

   1968  4 000426   000000 756000 xsym               STQ     MSGCODE

      182     1969    1       CALL SYS_FUNC_ERRMSG;

   1969  4 000427   000001 631400 5                  EPPR1   1
         4 000430   000000 701000 xent               TSX1    SYS_FUNC_ERRMSG
         4 000431   000000 011000                    NOP     0

      183     1970    1       ALTRETURN;

   1970  4 000432   000000 702200 xent               TSX2  ! X66_AALT

NBUFS
 Sect OctLoc
   0     000   000000 000040                                                    ...

XBUFS
 Sect OctLoc
   0     001   000000 000000                                                    ....

FPT_GDP
 Sect OctLoc
   0     004   000001 777640   000010 006000   000001 777640   000114 006000    .............L..
   0     010   000000 000000   ****** ******                                    ........

FPT_FDP
 Sect OctLoc
   0     012   000001 777640   000016 006000   000001 777640   000114 006000    .............L..
   0     016   000000 000001   ****** ******                                    ........

VLP_PSEUDO
 Sect OctLoc
   0     020   000000 000010   000000 000000   000000 000000   000000 000000    ................
   0     024   040040 040040   040040 040040   001000 000000   040040 040040            ....
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:32   
   0     030   040040 040040   000000 000000   040040 040040   040040 040040        ....
   0     034   000000 000000   040040 040040   040040 040040   000000 000000    ....        ....
   0     040   040040 040040   040040 040040   000000 000000   040040 040040            ....
   0     044   040040 040040   000000 000000   040040 040040   040040 040040        ....
   0     050   000000 000000   040040 040040   040040 040040   000000 000000    ....        ....
   0     054   040040 040040   040040 040040   000000 000000                            ....

FPT_RESCTL
 Sect OctLoc
   0     060   000005 777640   000074 006000   000037 777640   000020 006000    .....<..........
   0     064   000000 177640   000000 006014   000000 177640   000000 006014    ................
   0     074*  000000 000000   000000 000000   000000 000000   000000 000000    ................
   0     100   000000 000000   000000 000000                                    ........

FPT_GDS
 Sect OctLoc
   0     102   000001 777640   000106 006000   000000 177640   000000 006014    .....F..........
   0     106   000600 002000   ****** ******                                    ........

DCBLST
 Sect OctLoc
   0     110   000000 177640   000000 006014                                    ........

FIDLST
 Sect OctLoc
   0     112   000000 177640   000000 006014                                    ........

BUFFERS
 Sect OctLoc
   0     114   000000 177640   000000 006014                                    ........

MSTRTBL
 Sect OctLoc
   0     116   000000 177640   000000 006014                                    ........

REPTBL
 Sect OctLoc
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:33   
   0     120   000000 177640   000000 006014                                    ........

FDS
 Sect OctLoc
   0     122   000001 777640   000126 006000   000001 777640   000130 006000    .....V.......X..
   0     126   000000 000000   ****** ******                                    ........

FREE_DYN
 Sect OctLoc
   0     130   000000 177640   000000 006014                                    ........

(unnamed)
 Sect OctLoc
   3     000   104103 102040   106111 104040   040077 040040                    DCB FID  ?

(unnamed)
 Sect OctLoc
   5     000   777777 400007   000000 000000   000001 777640   000110 006000    .............H..
   5     004   000000 006014   000000 000000   000001 777640   000112 006000    .............J..
   5     010   000001 777640   000116 006000   000001 777640   000120 006000    .....N.......P..
      184     1971    1   END ZIU$GETDYN;

PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:34   
--  Include file information  --

   ZI_DBU_ROLL.:ZIC0TOU  is referenced.
   ZI_GLOBAL_DBUTIL.:ZIC0TOU  is referenced.
   ZI_ERRORS_SUBS.:ZIC0TOU  is referenced.
   CP_6_SUBS.:LIB_E05  is referenced.
   CP_6.:LIB_E05  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure ZIU$GETDYN.

   Procedure ZIU$GETDYN requires 283 words for executable code.
   Procedure ZIU$GETDYN requires 6 words of local(AUTO) storage.

    No errors detected in file ZIU$GETDYN.:ZIC0TSI    .
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:35   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:36   
          MINI XREF LISTING

BUFFERS
      1761**DCL      1654--DCLINIT  1668--DCLINIT
BUFFERS.PTR$
      1763**DCL      1843>>ASSIGN
BUFFERS.W1.VSIZE#
      1761**DCL      1844>>ASSIGN   1868>>ASSIGN   1885>>ASSIGN
BUFFERS.W2
      1762**DCL      1763--REDEF
BUFS#
        11**DCL      1872>>IF       1875>>IF       1877>>ASSIGN   1881>>ASSIGN
COUNTSF
      1417**DCL      1418--REDEF
DCBLIST$
      1573**DCL      1596--IMP-PTR
DCBLST
      1731**DCL      1895--ASSIGN   1920--ASSIGN   1946--ASSIGN
DCBLST.PTR$
      1733**DCL      1896<<ASSIGN   1898>>ASSIGN
DCBLST.W1.VSIZE#
      1731**DCL      1947>>ASSIGN
DCBLST.W2
      1732**DCL      1733--REDEF
ENCRP_SEEDSF
      1375**DCL      1376--REDEF
ERRCODESF
      1377**DCL      1382--REDEF
ERRCODESF.ERR#
      1380**DCL      1849<<ASSIGN   1967<<ASSIGN
ERRCODE_RDEF
      1382**DCL      1850>>ASSIGN   1968>>ASSIGN
ERRFLGSF
      1406**DCL      1851<<ASSIGN
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:37   
ERR_INSERT.CNT
      1391**DCL      1959<<ASSIGN
ERR_INSERT.TEXT
      1392**DCL      1961<<ASSIGN   1964<<ASSIGN   1966<<ASSIGN
EXPSZ
         9**DCL      1927>>ASSIGN
FDS
      1807**DCL      1938<>CALL     1945<>CALL     1948<>CALL     1951<>CALL
FDS.RESULTS_
      1807**DCL      1936<<ASSIGN   1943<<ASSIGN   1946<<ASSIGN   1949<<ASSIGN
FDS.V
      1807**DCL      1807--DCLINIT
FDS.V.SEGSIZE#
      1809**DCL      1937<<ASSIGN   1944<<ASSIGN   1947<<ASSIGN   1950<<ASSIGN
FID$
      1572**DCL      1576--IMP-PTR
FIDLIST.CRPT
      1585**DCL      1586--REDEF
FIDLST
      1746**DCL      1900--ASSIGN   1922--ASSIGN   1943--ASSIGN
FIDLST.PTR$
      1748**DCL      1901<<ASSIGN   1903>>ASSIGN
FIDLST.W1.VSIZE#
      1746**DCL      1944>>ASSIGN
FIDLST.W2
      1747**DCL      1748--REDEF
FIDSF_RD
      1393**DCL      1394--REDEF
FPT_FDP
      1668**DCL      1858<>CALL     1867<>CALL     1882<>CALL
FPT_FDP.V
      1668**DCL      1668--DCLINIT
FPT_FDP.V.PAGES#
      1669**DCL      1866<<ASSIGN   1881<<ASSIGN
FPT_GDP
      1654**DCL      1841<>CALL     1878<>CALL
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:38   
FPT_GDP.V
      1654**DCL      1654--DCLINIT
FPT_GDP.V.PAGES#
      1655**DCL      1838<<ASSIGN   1840<<ASSIGN   1877<<ASSIGN
FPT_GDS
      1715**DCL      1897<>CALL     1902<>CALL     1907<>CALL     1912<>CALL     1929<>CALL
FPT_GDS.RESULTS_
      1715**DCL      1895<<ASSIGN   1900<<ASSIGN   1905<<ASSIGN   1910<<ASSIGN   1920<<ASSIGN   1922<<ASSIGN
      1924<<ASSIGN   1926<<ASSIGN
FPT_GDS.V
      1715**DCL      1715--DCLINIT
FPT_GDS.V.SEGSIZE#
      1718**DCL      1927<<ASSIGN   1930<<ASSIGN
FPT_RESCTL
      1698**DCL      1836<>CALL
FPT_RESCTL.V
      1700**DCL      1698--DCLINIT
FREE_DYN
      1822**DCL      1807--DCLINIT
FREE_DYN.W2
      1823**DCL      1824--REDEF
HELPCODE
      1411**DCL      1416--REDEF
ICHKSUM
      1476**DCL      1477--REDEF
I_O_BUF$
      1454**DCL      1455--IMP-PTR  1843<<ASSIGN
KEYVSF
      1349**DCL      1354--REDEF
KEYVSF.WD_ONE
      1351**DCL      1352--REDEF
M$DISPRES
        33**DCL-ENT  1836--CALL
M$FDP
        62**DCL-ENT  1858--CALL     1867--CALL     1882--CALL
M$FDS
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:39   
        61**DCL-ENT  1938--CALL     1945--CALL     1948--CALL     1951--CALL
M$GDP
        62**DCL-ENT  1841--CALL     1878--CALL
M$GDS
        61**DCL-ENT  1897--CALL     1902--CALL     1907--CALL     1912--CALL     1929--CALL
MSGCODE
      1383**DCL      1384--REDEF    1850<<ASSIGN   1968<<ASSIGN
MSTRTBL
      1776**DCL      1905--ASSIGN   1924--ASSIGN   1949--ASSIGN
MSTRTBL.PTR$
      1778**DCL      1906<<ASSIGN   1908>>ASSIGN
MSTRTBL.W1.VSIZE#
      1776**DCL      1950>>ASSIGN
MSTRTBL.W2
      1777**DCL      1778--REDEF
NBUFS
        12**DCL      1844<<ASSIGN   1845>>IF       1855>>IF       1855>>IF       1857<<ASSIGN   1857>>ASSIGN
      1860<<ASSIGN   1860>>ASSIGN   1861>>ASSIGN   1869<<ASSIGN   1870>>ASSIGN   1885<<ASSIGN   1886<<ASSIGN
      1886>>ASSIGN   1887>>ASSIGN
NBUFS#
        14**DCL      1868<<ASSIGN   1869>>ASSIGN   1872>>IF       1875>>IF       1877>>ASSIGN   1881>>ASSIGN
NO_SPACE
      1959**LABEL    1897--CALLALT  1902--CALLALT  1907--CALLALT  1912--CALLALT  1929--CALLALT
NO_SUPRISE
      1843**LABEL    1841--CALLALT
NXTLINE
      1889**LABEL    1882--CALLALT
PTR$
         8**DCL         7--PROC        9--REDEF    1864--ENTRY    1892--ENTRY    1898<<ASSIGN   1903<<ASSIGN
      1908<<ASSIGN   1913<<ASSIGN   1917--ENTRY    1932--ENTRY
REC$
      1435**DCL      1458--IMP-PTR
REC_DATA_LN
      1463**DCL      1462--IMP-SIZ
REPTBL
      1791**DCL      1910--ASSIGN   1926--ASSIGN   1936--ASSIGN
PL6.E3A0      #001=ZIU$GETDYN File=ZIU$GETDYN.:ZIC0TSI                           FRI 09/05/97 13:15 Page:40   
REPTBL.PTR$
      1793**DCL      1911<<ASSIGN   1913>>ASSIGN
REPTBL.W1.VSIZE#
      1791**DCL      1937>>ASSIGN
REPTBL.W2
      1792**DCL      1793--REDEF
SYS_FUNC_ERRMSG
        15**DCL-ENT  1852--CALL     1969--CALL
TBLTYP
        10**DCL         7--PROC       11--REDEF    1864--ENTRY    1892--ENTRY    1893>>DOCASE   1917--ENTRY
      1918>>DOCASE   1932--ENTRY    1934>>DOCASE   1960>>IF       1963>>IF
VLP_PSEUDO
      1682**DCL      1698--DCLINIT
VLP_PSEUDO.MEMORY#
      1682**DCL      1837>>IF
XBUFS
        13**DCL      1861<<ASSIGN   1870<<ASSIGN   1887<<ASSIGN
