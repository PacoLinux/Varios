VERSION E05

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:1    
        1        1        /*M* ELF - ERROR LOG FILE GHOST  */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DMR,PLM=5,IND=5,CTI=5,SDI=5,MCL=10,CSI=0,ECI=0 */
        8        8        ELF: PROC MAIN;
        9        9        /*******************************************************************
       10       10         *                          INCLUDE FILES                          *
       11       11         *******************************************************************/
       12       12        %INCLUDE CP_6;
       13       93        %INCLUDE CP_6_SUBS;
       14      633        %INCLUDE B$ROSEG;
       15      696        %INCLUDE B_ERRORS_C;
       16     1823        %INCLUDE B_SEGIDS_C;
       17     2362        %INCLUDE B$JIT;
       18     2652        %INCLUDE F$DCB;
       19     2701        %INCLUDE I_SUBS_C;
       20     2725        %INCLUDE EL$TABLES;
       21     3048        %INCLUDE EL_MACRO_C;
       22     3217        %INCLUDE EL_DATA_C;
       23     3229        %INCLUDE EL_SUBS_C;
       24     3313        %INCLUDE N_FC_C;
       25     3350        %INCLUDE NI$TABLES;
       26     3566        %INCLUDE NI_DATA_C;
       27     3679        %INCLUDE OC_MESSHD_C;
       28     3732        %INCLUDE OC_SUBS_C;
       29     4463        %INCLUDE IT_SUBS_C;
       30     4730        %INCLUDE FM$CFU;
       31     4775        %INCLUDE ES_CNTRL_R;
       32     4787        %INCLUDE XUD_UTS_M;
       33     4869        /*******************************************************************
       34     4870         *                           ENTRY POINTS                          *
       35     4871         *******************************************************************/
       36     4872    1   DCL AZC$ACCTNG ENTRY(2) ALTRET;
       37     4873    1   DCL AZC$INIT ENTRY ALTRET;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:2    
       38     4874    1   DCL ELF$EXIT ENTRY ASYNC;
       39     4875    1   DCL ELF$EVENT ENTRY ASYNC;
       40     4876    1   DCL ELF$CONS_ERR ENTRY(1);
       41     4877    1   DCL ELT$THRESH ENTRY(1);
       42     4878    1   DCL ELT$INIT ENTRY;
       43     4879    1   DCL ELT$SETTHRESH ENTRY(1);
       44     4880        /*******************************************************************
       45     4881         *                            LOCAL SUBS                           *
       46     4882         *******************************************************************/
       47     4883        %SUB SECS_PER_MIN     = 60;
       48     4884        %SUB NEVER            = "WHILE('0'B)";
       49     4885        %SUB FOREVER          = "WHILE('1'B)";
       50     4886        %SUB SPECFILES        = 3/*SPECFILES*/;
       51     4887        /********************************************************************
       52     4888         *                              SYMDEFS                             *
       53     4889         ********************************************************************/
       54     4890        %EL$BUF (NAME=LOGBUF,STCLASS="STATIC SYMDEF");
       55     4893    1   DCL EL_NO_THRESHOLDING REMEMBER STATIC SYMDEF;
       56     4894    1   DCL NWIO_TYC BIT(36) ALIGNED STATIC SYMDEF;
       57     4895    1   DCL CGREAD_ERR      BIT(36) ALIGNED STATIC SYMDEF;
       58     4896    1   DCL CGREAD_STATE    UBIN WORD STATIC SYMDEF;
       59     4897             /* State of CSCG read: 0 = no read
       60     4898                                    1 = read pending
       61     4899                                    2 = read complete
       62     4900                                    3 = error on read */
       63     4901    1   DCL EL_ZAPFLG       UBIN WORD STATIC SYMDEF INIT(0);
       64     4902    1   DCL EL_SNAPFLG      BIT(1) ALIGNED STATIC SYMDEF INIT('0'B);
       65     4903    1   DCL EL_POLL_IN_PROGRESS BIT(1) ALIGNED STATIC SYMDEF INIT('0'B);
       66     4904        /*******************************************************************
       67     4905         *                              SYMREFS                            *
       68     4906         *******************************************************************/
       69     4907    1   DCL B$ROS$          PTR SYMREF;
       70     4908    1   DCL B$DS3$          PTR SYMREF;
       71     4909    1   DCL B$TCB$          PTR SYMREF;
       72     4910    1   DCL B$JIT$          PTR SYMREF;
       73     4911    1   DCL EL_THRESHOLD    BIT(1) ALIGNED SYMREF;
       74     4912        /*******************************************************************
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:3    
       75     4913         *                           CONSTANT DATA                         *
       76     4914         *******************************************************************/
       77     4915    1   DCL EL_BADFILE      CHAR(0) CONSTANT INIT(
       78     4916    1       'ELF UNABLE TO OPEN FILE - RENAMED WITH ''-:BAD'' APPENDED');
       79     4917    1   DCL ES_BADFILE      CHAR(0) CONSTANT INIT(
       80     4918    1       'ELF UNABLE TO OPEN SECLOG FILE - RENAMED WITH ''-:BAD'' APPENDED');
       81     4919    1   DCL ERRLOG_BUSY     CHAR(0) CONSTANT INIT(
       82     4920    1       'ELF UNABLE TO OPEN FILE - BUSY');
       83     4921    1   DCL SECLOG_BUSY     CHAR(0) CONSTANT INIT(
       84     4922    1       'ELF UNABLE TO OPEN SECLOG FILE - BUSY');
       85     4923    1   DCL EL_EXCEED_SPACE CHAR(0) CONSTANT INIT(':SYSTAC disk space exceeded');
       86     4924    1   DCL ES_EXCEED_SPACE CHAR(0) CONSTANT INIT(':SYS disk space exceeded');
       87     4925    1   DCL ES_FORCED_TURNOVER CHAR(0) CONSTANT INIT(
       88     4926    1       ':SECLOG size limit reached - automatic turnover performed');
       89     4927    1   DCL TOOBIG          CHAR(0) CONSTANT INIT(
       90     4928    1       'You''re too big to be an elf!');
       91     4929        %FPT_READ (FPTN=FPT_READCSCG,
       92     4930                STCLASS=CONSTANT,
       93     4931                DCB=F$CSCG,
       94     4932                BUF=EL_TERM,
       95     4933                WAIT=NO,
       96     4934                EVENT=1);
       97     4973        %FPT_WRITE (FPTN=FPT_WRCSCGFI,
       98     4974                STCLASS=CONSTANT,
       99     4975                DCB=F$CSCG,
      100     4976                BUF=EL_FIBFR,
      101     4977                STATION=VLP_KEYINSTA);
      102     5008        %FPT_WRITE (FPTN=FPT_TOOBIG,
      103     5009                STCLASS=CONSTANT,
      104     5010                DCB=M$DO,
      105     5011                BUF=TOOBIG);
      106     5042        %FPT_EVENT (FPTN = FPT_EVENT,
      107     5043                STCLASS=CONSTANT,
      108     5044                UENTRY=ELF$EVENT);
      109     5058        /*******************************************************************
      110     5059         *                           STATIC DATA                           *
      111     5060         *******************************************************************/
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:4    
      112     5061    1   DCL 1 T             STATIC,
      113     5062    1            2 C        UBIN BYTE UNAL,
      114     5063    1            2 L        CHAR(25) UNAL;
      115     5064    1   DCL T$              PTR STATIC INIT(ADDR(T));
      116     5065    1   DCL RSLT(0:1)       UBIN STATIC;
      117     5066    1   DCL ERRCODE         BIT(36) ALIGNED STATIC;
      118     5067    1   DCL ERRBUF          CHAR(120) ALIGNED STATIC;
      119     5068    1   DCL EL_TERM         CHAR(140) ALIGNED STATIC;
      120     5069    1   DCL ELAN_CMD        CHAR(13) ALIGNED STATIC INIT('ELAN(REBUILD)');
      121     5070        %OC_MESSHD_W (NAME=EL_FIBFR,
      122     5071              STCLASS=STATIC,
      123     5072              ATR=M_SYS,
      124     5073              MSG=FILEIC_MSG#,
      125     5074              NPARMS=7);
      126     5087    1        2 * UBIN(9) UNAL INIT(4),          /* CODE                               */
      127     5088    1             2 * UBIN(9) UNAL INIT(4),     /* REASON                             */
      128     5089    1             2 * UBIN(9) UNAL INIT(4),     /* ACTION                             */
      129     5090    1             2 * UBIN(9) UNAL INIT(4),     /* SYSID                              */
      130     5091    1             2 * UBIN(9) UNAL INIT(6),     /* SN                                 */
      131     5092    1             2 * UBIN(9) UNAL INIT(8),     /* ACCT                               */
      132     5093    1             2 * UBIN(9) UNAL INIT(31),    /* NAME                               */
      133     5094    1             2 CODE UBIN UNAL,
      134     5095    1             2 REASON UBIN UNAL,
      135     5096    1             2 ACTION UBIN UNAL,
      136     5097    1             2 SISID UBIN UNAL,
      137     5098    1             2 SN CHAR(6) UNAL,
      138     5099    1             2 ACCT CHAR(8) UNAL,
      139     5100    1             2 NAM CHAR(31) UNAL;
      140     5101    1   DCL NAMELEN         UBIN STATIC;
      141     5102    1   DCL CURUTS          UBIN WORD STATIC;
      142     5103    1   DCL STATS_INTERVAL UBIN STATIC INIT(180000); /* 30 MINS */
      143     5104    1   DCL SQH$ PTR STATIC INIT(ADDR(NIL));
      144     5105    1   DCL 1 SQHPTR REDEF SQH$,
      145     5106    1            2 OFFSET UBIN(18) UNAL,
      146     5107    1            2 * BIT(6) UNAL,
      147     5108    1            2 SEGID BIT(12) UNAL;
      148     5109    1   DCL DQH$ PTR STATIC INIT(ADDR(NIL));
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:5    
      149     5110    1   DCL 1 DQHPTR REDEF DQH$,
      150     5111    1            2 OFFSET UBIN(18) UNAL,
      151     5112    1            2 * BIT(6) UNAL,
      152     5113    1            2 SEGID BIT(12) UNAL;
      153     5114    1   DCL DCT$            PTR STATIC INIT(ADDR(NIL));
      154     5115    1   DCL 1 DCTPTR        REDEF DCT$,
      155     5116    1            2 OFFSET   UBIN(18) UNAL,
      156     5117    1            2 *        BIT(6) UNAL,
      157     5118    1            2 SEGID    BIT(12) UNAL;
      158     5119    1   DCL TEMP$           PTR STATIC INIT(ADDR(NIL));
      159     5120    1   DCL 1 TEMPPTR       REDEF TEMP$,
      160     5121    1            2 OFFSET   UBIN(18) UNAL,
      161     5122    1            2 *        BIT(6) UNAL,
      162     5123    1            2 SEGID    BIT(12) UNAL;
      163     5124    1   DCL N$DCT$$         PTR STATIC INIT(ADDR(NIL));
      164     5125    1   DCL 1 N$DCT$PTR     REDEF N$DCT$$,
      165     5126    1            2 OFFSET   UBIN(18) UNAL,
      166     5127    1            2 *        BIT(6) UNAL,
      167     5128    1            2 SEGID    BIT(12) UNAL;
      168     5129    1   DCL 1 DEVBUF        STATIC DALIGNED,
      169     5130    1            2 DCWLIST(0:3) BIT(36) UNAL,
      170     5131    1            2 STATS(0:15) UBIN,
      171     5132    1            2 ZERO(0:299) UBIN;
      172     5133    1   DCL 1 DP_BUFINIT STATIC DALIGNED,
      173     5134    1            2 DCWLIST(0:3) BIT(36) INIT('260100720000'O,
      174     5135    1                                   '000004000010'O,
      175     5136    1                                   '160100700000'O,
      176     5137    1                                   '000014000010'O);
      177     5138    1   DCL 1 MT_BUFINIT STATIC DALIGNED,
      178     5139    1            2 DCWLIST(0:3) BIT(36) INIT('260100720000'O,
      179     5140    1                                   '000004000004'O,
      180     5141    1                                   '160100700000'O,
      181     5142    1                                   '000014000004'O);
      182     5143    1   DCL 1 MDS_BUFINIT STATIC DALIGNED,
      183     5144    1            2 DCWLIST(0:3) BIT(36) INIT('160100700000'O,
      184     5145    1                                   '000004000013'O,
      185     5146    1                                   '000000000000'O,
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:6    
      186     5147    1                                   '000000000000'O);
      187     5148    1   DCL 1 IPC_BUFINIT STATIC DALIGNED,
      188     5149    1            2 DCWLIST(0:3) BIT(36) INIT('700000724002'O,
      189     5150    1                                   '000004000001'O,
      190     5151    1                                   '060000704001'O,
      191     5152    1                                   '000005000042'O);
      192     5153    1   DCL 1 DAU_BUFINIT STATIC DALIGNED,
      193     5154    1            2 DCWLIST(0:3) BIT(36) INIT('160000700000'O,
      194     5155    1                                   '000004000472'O,
      195     5156    1                                   '000000000000'O,
      196     5157    1                                   '000000000000'O);
      197     5158        %EL$MPCSTATS (STCLASS=STATIC);
      198     5161        %EL$DEVSTATS (STCLASS=STATIC);
      199     5164    1   DCL 1 FILETAB(0:SPECFILES) STATIC,
      200     5165    1            2 FPT$     PTR INIT(ADDR(NIL), /* Unused                             */
      201     5166    1                            ADDR(OPERLOG), /* :ERRLOG                            */
      202     5167    1                                ADDR(NIL), /* Reserved for ACCTNG                */
      203     5168    1                           ADDR(OPSECLOG)),/* :SECLOG                            */
      204     5169    1            2 DCB#     UBIN INIT(0,DCBNUM(F$ERRLOG),0,DCBNUM(F$SECLOG));
      205     5170    1   DCL SECLOGSIZE$     PTR STATIC INIT(ADDR(NIL));
      206     5171    1   DCL 1 SECLOGSIZEPTR REDEF SECLOGSIZE$,
      207     5172    1            2 OFFSET   UBIN(18) UNAL,
      208     5173    1            2 *        BIT(6) UNAL,
      209     5174    1            2 SEGID    BIT(12) UNAL;
      210     5175    1   DCL 1 VLP_ERRLOG    ALIGNED STATIC,
      211     5176    1            2 L        UBIN BYTE UNAL INIT(15),
      212     5177    1            2 ERRLOG   CHAR(7) UNAL INIT(':ERRLOG'),
      213     5178    1            2 YY       CHAR(2) UNAL INIT('00'),
      214     5179    1            2 D        CHAR(6) UNAL INIT('??????');
      215     5180    1   DCL 1 VLP_SECLOG    ALIGNED STATIC,
      216     5181    1            2 L        UBIN BYTE UNAL INIT(15),
      217     5182    1            2 SECLOG   CHAR(7) UNAL INIT(':SECLOG'),
      218     5183    1            2 YY       CHAR(2) UNAL INIT('00'),
      219     5184    1            2 D        CHAR(6) UNAL INIT('??????');
      220     5185    1   DCL 1 MISCNAME      STATIC,
      221     5186    1            2 CNT      UBIN BYTE UNAL INIT(6),
      222     5187    1            2 ELF      CHAR(4) INIT(':ELF'),
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:7    
      223     5188    1            2 N        CHAR(2) INIT('NN');
      224     5189    1   DCL GET_DCB#        UBIN HALF STATIC UNAL;
      225     5190    1   DCL 1 LOSTERR       STATIC ALIGNED,
      226     5191    1            2 TYPE     UBIN(9) UNAL INIT(EL_LOST),
      227     5192    1            2 *        BIT(9) INIT('0'B),
      228     5193    1            2 SIZE     UBIN(9) UNAL INIT(5),
      229     5194    1            2 UTS      UBIN(36) UNAL INIT(0),
      230     5195    1            2 CNTR     UBIN(9) UNAL INIT(0),
      231     5196    1            2 SITE_ID  CHAR(6) UNAL INIT(' '),
      232     5197    1            2 *        BIT(18) UNAL INIT('0'B),
      233     5198    1            2 LOST     UBIN(18) UNAL INIT(0),
      234     5199    1            2 FILE     UBIN(18) UNAL INIT(1),
      235     5200    1            2 COUNT    UBIN INIT(0);       /* count of records lost              */
      236     5201    1   DCL ES_SEQUENCE_NUM UBIN HALF ALIGNED STATIC INIT(0);
      237     5202                                           /* Security log record sequence number     */
      238     5203    1   DCL EL_DEVSTATS BIT(1) ALIGNED STATIC SYMDEF INIT('1'B);
      239     5204    1   DCL EL_MPCSTATS BIT(1) ALIGNED STATIC SYMDEF INIT('1'B);
      240     5205        %FPT_WAIT (UNITS=60);
      241     5219        %FPT_TIME (FPTN=EL_TIME,SOURCE=UTS,DEST=ANS,DATE="VLP_ERRLOG.D");
      242     5238        %FPT_TIME (FPTN=ELL_TIME,SOURCE=CLOCK,DEST=ANS,DATE="VLP_ERRLOG.D");
      243     5257        %FPT_TIME (FPTN=ES_TIME,SOURCE=UTS,DEST=ANS,DATE="VLP_SECLOG.D");
      244     5276        %FPT_KEYIN (RESULTS=RSLT);
      245     5295        %FPT_WRITE (FPTN=TELL_KEYIN,
      246     5296                DCB=F$CSCG,
      247     5297                BUF=ZAP_MESSHD,
      248     5298                STATION=VLP_KEYINSTA);
      249     5329        %OC_MESSHD_W (NAME=ZAP_MESSHD,FUNC=ZAP,DELIM=";");
      250     5342        %VLP_STATION (FPTN=VLP_KEYINSTA,STATION='KEYIN');
      251     5369        %FPT_SAD (FPTN=SEE_TIGR,
      252     5370                USERSID=%SPCL1SID,
      253     5371                MONSID=%TIGRSID);
      254     5386        %FPT_SAD (FPTN=SEE_CFUS,
      255     5387                USERSID=%SPCL2SID,
      256     5388                MONSID=%DS1SID);
      257     5403        %FPT_SAD (FPTN=SEE_MONIS,
      258     5404                USERSID=%SPCL3SID,
      259     5405                MONSID=%ISSID);
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:8    
      260     5420        %FPT_MONINFO (MONPTRS=MONPTRS);
      261     5435        %VLR_MONPTRS (FPTN=MONPTRS);
      262     5450        %FPT_IOQ (FPTN=DEV_IOQ,BPMIR=YES,
      263     5451                DCB=M$MPC,
      264     5452                BUF=DEVBUF,
      265     5453                FC=%N_DCWLIST);
      266     5471        %FPT_TIME (FPTN=CUR_UTS,
      267     5472                SOURCE=CLOCK,
      268     5473                TSTAMP=CURUTS,
      269     5474                DEST=UTS);
      270     5493        %FPT_WRSYSLOG (FPTN=WRITE_DEVSTATS,
      271     5494                ENTRY=EL$DEVSTATS,
      272     5495                TYPE=EL_DEVSTAT,
      273     5496                SIZE="SIZEW(EL$DEVSTATS)");
      274     5511        %FPT_WRSYSLOG (FPTN=WRITE_MPCSTATS,
      275     5512                ENTRY=EL$MPCSTATS,
      276     5513                TYPE=EL_MPCSTAT,
      277     5514                SIZE="SIZEW(EL$MPCSTATS)");
      278     5529        %FPT_ERRMSG (CODE=ERRCODE,BUF=ERRBUF,SUBMESS=YES,OUTDCB1=M$DO);
      279     5556        %FPT_XCON (UENTRY=ELF$EXIT);
      280     5570        %FPT_RDSYSLOG (BUF=LOGBUF);
      281     5583        %FPT_OPEN (FPTN=OPERLOG,
      282     5584                NAME=VLP_ERRLOG,
      283     5585                ACCT=VLP_SYSTAC,
      284     5586                DCB=F$ERRLOG,
      285     5587                ACSVEH=VLP_ELAN_,
      286     5588                EXIST=OLDFILE,
      287     5589                CTG=YES,
      288     5590                SHARE=IN,
      289     5591                FUN=CREATE,
      290     5592                XTNSIZE=20,
      291     5593                IXTNSIZE=20,
      292     5594                ASN=FILE,
      293     5595                ORG=INDEXED,
      294     5596                ACS=DIRECT,
      295     5597                KEYX=3,
      296     5598                KEYL=5,
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:9    
      297     5599                DISP=NAMED);
      298     5708        %FPT_OPEN (FPTN=OPSECLOG,
      299     5709                NAME=VLP_SECLOG,
      300     5710                ACCT=VLP_SYSACCT,
      301     5711                DCB=F$SECLOG,
      302     5712                EXIST=OLDFILE,
      303     5713                CTG=YES,
      304     5714                SHARE=IN,
      305     5715                FUN=CREATE,
      306     5716                XTNSIZE=20,
      307     5717                IXTNSIZE=20,
      308     5718                ASN=FILE,
      309     5719                ORG=INDEXED,
      310     5720                ACS=DIRECT,
      311     5721                KEYX=3,
      312     5722                KEYL=5,
      313     5723                DISP=NAMED);
      314     5832        %VLP_ACCT (FPTN=VLP_SYSACCT,
      315     5833                ACCT=':SYS');
      316     5846        %VLP_ACCT (FPTN=VLP_SYSTAC,
      317     5847                ACCT=':SYSTAC');
      318     5860        %FPT_TIME (FPTN=ERR_TIME, SOURCE=CLOCK, DEST=ANS, TIME=ERR_NAME.T, DATE=ERR_NAME.D);
      319     5879    1   DCL 1 ERR_NAME STATIC,
      320     5880    1            2 * UBIN BYTE UNAL INIT(23),
      321     5881    1            2 FILE CHAR(7),
      322     5882    1            2 YY CHAR(2),
      323     5883    1            2 D CHAR(6),
      324     5884    1            2 T CHAR(8);
      325     5885        %FPT_CLOSE (FPTN=ERR_CLOSE,DISP=SAVE, CHGATT=YES, NAME=ERR_NAME,RELG=YES);
      326     5927    1   DCL EL_RENAME_ON_ERR BIT(1) ALIGNED;
      327     5928        %FPT_OPEN  (FPTN=OPACCTNG,
      328     5929                    NAME=VLP_ACCTNG,
      329     5930                    ACCT=VLP_SYSACCT,
      330     5931                    DCB=F$ACCTNG,
      331     5932                    FUN=UPDATE,
      332     5933                    ASN=FILE,
      333     5934                    ORG=CONSEC,
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:10   
      334     5935                    ACS=JRNL);
      335     6044        %VLP_NAME (FPTN=VLP_ACCTNG,
      336     6045                   NAME=':ACCTLG');
      337     6072        %VLP_ATTR (FPTN=VLP_ELAN_);
      338     6086        %VLP_ACSVEH (READ=YES,
      339     6087                VEHICLE='ELAN?',
      340     6088                LAST=";");
      341     6105        %FPT_OPEN (FPTN=OPCOMAC,
      342     6106                NAME=VLP_COMAC,
      343     6107                ACCT=VLP_SYSACCT,
      344     6108                DCB=F$COMAC,
      345     6109                ASN=FILE,
      346     6110                ORG=KEYED,
      347     6111                ACS=DIRECT,
      348     6112                DISP=NAMED,
      349     6113                FUN=CREATE,
      350     6114                EXIST=NEWFILE,
      351     6115                SHARE=ALL,
      352     6116                CTG=YES);
      353     6225        %VLP_NAME (FPTN=VLP_COMAC,
      354     6226                NAME=':COMAC');
      355     6253        %FPT_OPEN (FPTN=OPCSCG,
      356     6254                NAME=VLP_CSCG,
      357     6255                ACCT=VLP_SYSACCT,
      358     6256                DCB=F$CSCG,
      359     6257                ASN=COMGROUP,
      360     6258                FUN=UPDATE,
      361     6259                SETSTA=VLP_ELFNM);
      362     6368        %VLP_NAME (FPTN=VLP_CSCG,
      363     6369                NAME='CSCG');
      364     6396        %VLP_SETSTA (FPTN=VLP_ELFNM,
      365     6397                WAS=YES,
      366     6398                MYSTATION='ELF',
      367     6399                OSTATION='KEYIN');
      368     6427        %FPT_OPEN (FPTN=OPMISC,
      369     6428                NAME=MISCNAME,
      370     6429                ACCT=VLP_SYSACCT,
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:11   
      371     6430                EXIST=OLDFILE,
      372     6431                CTG=YES,
      373     6432                SHARE=IN,
      374     6433                FUN=CREATE,
      375     6434                ASN=FILE,
      376     6435                ORG=CONSEC,
      377     6436                DISP=NAMED);
      378     6545        %FPT_GJOB (FPTN=START_ELAN,
      379     6546                SLEAZE=YES,
      380     6547                CCBUF=ELAN_CMD,
      381     6548                NAME=VLP_ELAN);
      382     6565        %VLP_NAME (FPTN=VLP_ELAN,
      383     6566                NAME='ELAN');
      384     6593        %FPT_MONINFO (FPTN=BOOTFLAG,
      385     6594                MONINFO=MONINFO);
      386     6609        %VLR_MONINFO (FPTN=MONINFO);
      387     6627        %FPT_GETDCB (DCBNUM=GET_DCB#);
      388     6642        %FPT_RELDCB;
      389     6656        %FPT_TRUNC;
      390     6670        %FPT_WRITE(WAIT=YES,
      391     6671                ONEWKEY=YES);
      392     6702        %FPT_CLOSE (DISP=SAVE);
      393     6744        %FPT_OPEN (FPTN=OPEN_ELF_DATA_UPD,
      394     6745                DCB=M$ELF_DATA,
      395     6746                NAME=VLP_ELF_DATA,
      396     6747                ACCT=VLP_SYSACCT,
      397     6748                FUN=UPDATE,
      398     6749                SHARE=IN,
      399     6750                ORG=RANDOM,
      400     6751                ACS=DS3,
      401     6752                ASN=FILE,
      402     6753                CTG=YES);
      403     6862        %VLP_NAME (FPTN=VLP_ELF_DATA,
      404     6863                NAME='ELF_DATA');
      405     6890        /*******************************************************************
      406     6891         *                               AUTO                              *
      407     6892         *******************************************************************/
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:12   
      408     6893    1   DCL P$             PTR;
      409     6894    1   DCL F$ERRLOG$      PTR;
      410     6895    1   DCL F$SECLOG$      PTR;
      411     6896    1   DCL PTR$           PTR;
      412     6897    1   DCL STATS$         PTR;
      413     6898    1   DCL IPC$           PTR;
      414     6899    1   DCL DEV$           PTR;
      415     6900    1   DCL MPC$           PTR;
      416     6901    1   DCL I$             PTR;
      417     6902    1   DCL TP$            PTR;
      418     6903    1   DCL BUF_TEMP$      PTR;
      419     6904    1   DCL EL_LASTTIME    UBIN(36);
      420     6905    1   DCL ES_LASTTIME    UBIN(36);
      421     6906    1   DCL EL_LASTDAY     SBIN;
      422     6907    1   DCL ES_LASTDAY     SBIN;
      423     6908    1   DCL EL_NXTCNTR     UBIN(36);
      424     6909    1   DCL ES_NXTCNTR     UBIN(36);
      425     6910    1   DCL SIZE4          UBIN(36);
      426     6911    1   DCL TEMP_VEC       BIT(72) DALIGNED;
      427     6912    1   DCL 1 TEMP_VEC1    REDEF TEMP_VEC,
      428     6913    1            2 BOUND   UBIN(20) UNAL,
      429     6914    1            2 *       BIT(16),
      430     6915    1            2 PTR$    PTR;
      431     6916    1   DCL NXTWD          UBIN(36);
      432     6917    1   DCL TEMP           UBIN(36);
      433     6918    1   DCL 1 TEMP_WORD UBIN;
      434     6919    1   DCL 1 TEMP_HALF(0:1) REDEF TEMP_WORD UBIN(18) UNAL;
      435     6920    1   DCL F#             UBIN;
      436     6921    1   DCL 1 RECVEC       DALIGNED,
      437     6922    1            2 BOUND   UBIN(20) UNAL,
      438     6923    1            2 *       BIT(16),
      439     6924    1            2 PTR$    PTR;
      440     6925    1   DCL SUSPENDED      BIT(1) ALIGNED;
      441     6926    1   DCL FIRST_TIME     BIT(1) ALIGNED;
      442     6927    1   DCL MAXDCTX        SBIN WORD;
      443     6928    1   DCL DCTX           UBIN WORD;
      444     6929    1   DCL SUBSYSTEM_DCTX UBIN WORD;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:13   
      445     6930    1   DCL MPC_NUM UBIN;
      446     6931    1   DCL LAST_DEVSTATS  UBIN WORD;
      447     6932    1   DCL NUM_CNTRS SBIN;
      448     6933    1   DCL 1 ASCII_WORD UBIN;
      449     6934    1   DCL 1 ASCII_FMT(0:3) REDEF ASCII_WORD,
      450     6935    1            2 * UBIN(1) UNAL,
      451     6936    1            2 BYT UBIN(8) UNAL;
      452     6937    1   DCL 1 ASCII_HF_WD(0:1) REDEF ASCII_WORD UBIN(18) UNAL;
      453     6938    1   DCL IOQ_FLAG       BIT(1) ALIGNED;
      454     6939    1   DCL MPC_BUSY       BIT(1) ALIGNED;
      455     6940    1   DCL I              UBIN;
      456     6941    1   DCL J              UBIN;
      457     6942    1   DCL K              UBIN;
      458     6943    1   DCL MDS_STATS_WORD UBIN;
      459     6944    1   DCL MDS_STATS_HFWD(0:1) REDEF MDS_STATS_WORD UBIN(18) UNAL;
      460     6945    1   DCL TUC_BUF        CHAR(8);
      461     6946    1   DCL DC_BUF         CHAR(8);
      462     6947    1   DCL MPCPTR_BUF     CHAR(4);
      463     6948    1   DCL M500_BUF1      CHAR(4);
      464     6949    1   DCL M500_BUF2      CHAR(4);
      465     6950    1   DCL FW_TYPE  CHAR(4) UNAL;
      466     6951    1   DCL MPC_NAME CHAR(8) UNAL;
      467     6952    1   DCL TEMP_BUF       CHAR(2);
      468     6953    1   DCL BUF_TEMP(0:1)  BIT(8);
      469     6954    1   DCL MPCSTATS_BUF   CHAR(12);
      470     6955    1   DCL 1 MPCSTATS_BF(0:11) REDEF MPCSTATS_BUF,
      471     6956    1            2 *       BIT(1),
      472     6957    1            2 B       BIT(8);
      473     6958    1   DCL TC_MPCPTR_ADDR UBIN WORD;
      474     6959    1   DCL TC_TBL_ADDR    UBIN WORD;
      475     6960    1   DCL DEVINDX        UBIN;
      476     6961    1   DCL NUMDEVS        SBIN;
      477     6962    1   DCL DEVNAME(0:200) CHAR(8);
      478     6963    1   DCL DCBTAB(0:99)   UBIN BYTE UNAL;
      479     6964    1   DCL CFU$           PTR;
      480     6965    1   DCL 1 CFUPTR       REDEF CFU$,
      481     6966    1            2 OFFSET  UBIN(18) UNAL,
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:14   
      482     6967    1            2 *       BIT(6) UNAL,
      483     6968    1            2 SEGID   BIT(12) UNAL;
      484     6969    1   DCL OPEN$ PTR;
      485     6970    1   DCL TEMP_UTS UBIN;
      486     6971        /*******************************************************************
      487     6972         *                               DCBS                              *
      488     6973         *******************************************************************/
      489     6974    1   DCL M$ELF_DATA DCB;
      490     6975    1   DCL M$DO       DCB;
      491     6976    1   DCL M$MPC      DCB;
      492     6977    1   DCL F$ACCTNG DCB;
      493     6978    1   DCL F$ERRLOG   DCB;
      494     6979    1   DCL F$SECLOG   DCB;
      495     6980    1   DCL F$COMAC    DCB;
      496     6981    1   DCL F$CSCG     DCB;
      497     6982        /*******************************************************************
      498     6983         *                          BASED STORAGE                          *
      499     6984         *******************************************************************/
      500     6985        %B$TCB;
      501     6988        %B$ALT;
      502     6996        %EL$TERM;
      503     7002    1   DCL 1 STATS_CNTRS(0:15) UBIN(18) BASED(STATS$) UNAL;
      504     7003    1   DCL 1 MDS_STATS_CNTRS(0:10) UBIN BASED(STATS$) ALIGNED;
      505     7004    1   DCL 1 IPC_STATS_CNTRS(0:33) UBIN BASED(STATS$) ALIGNED;
      506     7005    1   DCL 1 IPC_IMU_TRANSACTIONS BASED(IPC$) ALIGNED,
      507     7006    1            2 LO_ORDER(0:3) UBIN(18) UNAL,
      508     7007    1            2 HI_ORDER(0:3) UBIN(18) UNAL;
      509     7008    1   DCL 1 IPC_IMU_WD_TRANSFERS BASED(IPC$) ALIGNED,
      510     7009    1            2 LO_ORDER(0:3) UBIN(18) UNAL,
      511     7010    1            2 HI_ORDER(0:3) UBIN(18) UNAL;
      512     7011    1   DCL MOVEBASE        CHAR(SIZE4) BASED;
      513     7012    1   DCL 1 TEXTCBASE     BASED,
      514     7013    1            2 L        UBIN BYTE UNAL,
      515     7014    1            2 C        CHAR(TEXTCBASE.L) UNAL;
      516     7015    1   DCL 1 TEMP_NAME     BASED(T$),
      517     7016    1            2 L        UBIN BYTE UNAL,
      518     7017    1            2 C        CHAR(TEMP_NAME.L) UNAL;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:15   
      519     7018    1   DCL MOVENAMELEN     CHAR(NAMELEN) BASED;
      520     7019    1   DCL NI$DCT$ (0:0)   PTR BASED(N$DCT$$);
      521     7020    1   DCL IOM$(0:7)       PTR BASED(B$DS3$);
      522     7021    1   DCL 1 IOM           BASED(I$) ALIGNED,
      523     7022    1            2 ERR_RATE UBIN,
      524     7023    1            2 NUM_ENTRIES UBIN HALF UNAL,
      525     7024    1            2 THRESH   UBIN HALF UNAL,
      526     7025    1            2 THRESH_RATE UBIN,
      527     7026    1            2 CHAN$    PTR;
      528     7027    1   DCL 1 CHAN(0:0)     BASED ALIGNED,
      529     7028    1            2 ERR_RATE UBIN,
      530     7029    1            2 NUM_ENTRIES UBIN HALF UNAL,
      531     7030    1            2 THRESH   UBIN HALF UNAL,
      532     7031    1            2 THRESH_RATE UBIN,
      533     7032    1            2 DEV$     PTR,
      534     7033    1            2 MPC$     PTR;
      535     7034    1   DCL 1 MPC           BASED(MPC$) ALIGNED,
      536     7035    1            2 ERR_RATE UBIN,
      537     7036    1            2 NUM_ENTRIES UBIN HALF UNAL,
      538     7037    1            2 THRESH   UBIN HALF UNAL,
      539     7038    1            2 THRESH_RATE UBIN,
      540     7039    1            2 DEVNM    CHAR(8);
      541     7040    1   DCL 1 DEV           BASED(DEV$) ALIGNED,
      542     7041    1            2 ERR_RATE UBIN,
      543     7042    1            2 NUM_ENTRIES UBIN HALF UNAL,
      544     7043    1            2 THRESH   UBIN HALF UNAL,
      545     7044    1            2 THRESH_RATE UBIN,
      546     7045    1            2 DEVNM    CHAR(8),
      547     7046    1            2 DEVNUM   UBIN,
      548     7047    1            2 STATS(0:9) UBIN;
      549     7048    1   DCL 1 TEMP_BF(0:1)  BASED(TP$) UNAL,
      550     7049    1            2 *        BIT(1),
      551     7050    1            2 B        BIT(8);
      552     7051    1   DCL BF_TEMP         BIT(16) BASED(BUF_TEMP$) UNAL;
      553     7052    1   DCL 1 EXTST_BYTE7 UBIN(8) UNAL;
      554     7053    1   DCL 1 SENSE_BYTE7 REDEF EXTST_BYTE7,
      555     7054    1            2 FMT UBIN(4) UNAL,
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:16   
      556     7055    1            2 CHAN UBIN(4) UNAL;
      557     7056        %EL$ENTRY  (NAME=HDR,INFOSZ=SIZE4,STCLASS="BASED(P$)");
      558     7060        %EL$FILERR (STCLASS="BASED(TEMP$)");
      559     7067        %EL$IOERR(STCLASS="BASED(TEMP$)");
      560     7077        %NI$DCT    (NAME=DCT,STCLASS="BASED(DCT$)");
      561     7125        %NI$SQH    (NAME=SQH, STCLASS="BASED(SQH$)");
      562     7138        %NI$DQH    (NAME=DQH, STCLASS="BASED(DQH$)");
      563     7161        %FPT_OPEN  (FPTN=FPTBASE,STCLASS="BASED DALIGNED");
      564     7270        %FM$CFU;
      565     7276    1   DCL SECLOGSIZE      UBIN WORD BASED(SECLOGSIZE$);
      566     7277        %XUD$UTS_ENTRIES;
      567     7309        %XUD_UTS_EQU;
      568     7320        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:17   
      569     7321    2        IF B$JIT.MODE ~= %M_GHOST# THEN DO;
      570     7322    2             CALL M$WRITE(FPT_TOOBIG);
      571     7323    2             CALL M$EXIT;
      572     7324    2           END;
      573     7325    1        EL_SNAPFLG = '0'B;                 /* RESET FLAG */
      574     7326    1        TP$ = ADDR(TEMP_BUF);
      575     7327    1        BUF_TEMP$ = ADDR(BUF_TEMP);
      576     7328    1        CALL M$MONINFO(BOOTFLAG);
      577     7329    1        REMEMBER NO_THRESH IN EL_NO_THRESHOLDING;
      578     7330    1   NO_THRESH: ;
      579     7331    1        CALL ELT$INIT;
      580     7332    1        CALL STARTUP;
      581     7333    1        CALL MOVETOFILE;
      582     7334    1        CALL M$TIME(CUR_UTS);
      583     7335    1        CALL XUD$UTS_DIFF_SEC(LAST_DEVSTATS,CURUTS,0);
      584     7336    1        LAST_DEVSTATS = LAST_DEVSTATS/1800;
      585     7337    1        CALL XUD$UTS_ADJ_25TH(LAST_DEVSTATS,0,LAST_DEVSTATS*30*%UTS_25TH_MIN#);
      586     7338        /* MAIN LOOP */
      587     7339    2        DO FOREVER;
      588     7340    2             CALL SLEEP;
      589     7341    2             CALL MOVETOFILE;
      590     7342    2             CALL M$TIME(CUR_UTS);
      591     7343    2             CALL XUD$UTS_DIFF_SEC(TEMP_UTS,CURUTS,0);
      592     7344    2             TEMP_UTS = TEMP_UTS/1800;
      593     7345    2             CALL XUD$UTS_ADJ_25TH(TEMP_UTS,0,TEMP_UTS*30*%UTS_25TH_MIN#);
      594     7346    2             IF TEMP_UTS ~= LAST_DEVSTATS
      595     7347    2             THEN CALL PROCESS_STATISTICS;
      596     7348    3             DO CASE(CGREAD_STATE);
      597     7349    3             CASE(2);                      /* read complete                      */
      598     7350    3                CGREAD_STATE = 0;
      599     7351    3                CALL KEYIN_EVENT;
      600     7352    3             CASE(3);                      /* error on READ                      */
      601     7353    3                CGREAD_STATE = 0;
      602     7354    3                CALL ELF$CONS_ERR(CGREAD_ERR);
      603     7355    3             END;
      604     7356    2           END;
      605     7357        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:18   
      606     7358    1   STARTUP: PROC;
      607     7359    2        F$ERRLOG$=DCBADDR(DCBNUM(F$ERRLOG));
      608     7360    2        F$SECLOG$=DCBADDR(DCBNUM(F$SECLOG));
      609     7361    2        CGREAD_STATE = 0;                  /* no read                            */
      610     7362    2        EL_LASTTIME=0;
      611     7363    2        ES_LASTTIME=0;
      612     7364    2        EL_LASTDAY=-1;
      613     7365    2        ES_LASTDAY=-1;
      614     7366    2        EL_NXTCNTR=0;
      615     7367    2        ES_NXTCNTR=0;
      616     7368    2        EL_RENAME_ON_ERR = '1'B;
      617     7369    2        DCBTAB='0'B;
      618     7370    2        SUSPENDED='0'B;
      619     7371    2        FIRST_TIME = '1'B;
      620     7372    2        CALL M$SAD(SEE_TIGR);
      621     7373    2        CALL M$SAD(SEE_MONIS);
      622     7374    2        SECLOGSIZE$ = ADDR(EL_SECLOGSIZE);
      623     7375    2        SECLOGSIZEPTR.SEGID = %SPCL3SID;
      624     7376    2        CALL M$MONINFO(FPT_MONINFO);
      625     7377    2        N$DCT$$ = MONPTRS.N$DCT$$;
      626     7378    2        N$DCT$PTR.SEGID = %SPCL1SID;
      627     7379    2        MAXDCTX = 0;
      628     7380    3        DO UNTIL (TEMPPTR.SEGID ~= %TIGRSID);
      629     7381    3             MAXDCTX = MAXDCTX + 1;
      630     7382    3             TEMP$ = NI$DCT$(MAXDCTX);
      631     7383    3           END;                            /* DO WHILE                           */
      632     7384    2        MAXDCTX = MAXDCTX - 1;
      633     7385    2        RECVEC=VECTOR(LOGBUF);
      634     7386    2        CALL M$XCON(FPT_XCON);
      635     7387    2        CALL M$EVENT(FPT_EVENT) ALTRET(OPNALT);
      636     7388    2        CALL M$OPEN(OPCSCG) ALTRET(OPNALT);
      637     7389    2        CALL M$OPEN (OPACCTNG)
      638     7390    3        WHENALTRETURN DO;
      639     7391    3             CALL ELF$CONS_ERR;
      640     7392    3           END;
      641     7393    2        IF EL_SNAPFLG
      642     7394    3        THEN DO;                           /* SNAP HAS OCCURRED */
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:19   
      643     7395    3             OPCOMAC.V.EXIST# = %OLDFILE#;
      644     7396    3             OPCOMAC.V.FUN# = %UPDATE#;
      645     7397    3             EL_SNAPFLG = '0'B;            /* RESET FLAG */
      646     7398    3           END;
      647     7399    3        ELSE DO;
      648     7400    3             OPCOMAC.V.EXIST# = %NEWFILE#;
      649     7401    3             OPCOMAC.V.FUN# = %CREATE#;
      650     7402    3           END;
      651     7403    2        CALL M$OPEN(OPCOMAC) ALTRET(OPNALT2);
      652     7404    3        DO NEVER;
      653     7405    3   OPNALT2:  CALL ELF$CONS_ERR;
      654     7406    3             OPCOMAC.V.EXIST#=%NEWFILE#;
      655     7407    3             OPCOMAC.V.FUN# = %CREATE#;
      656     7408    3             CALL M$OPEN(OPCOMAC) ALTRET(OPNALT);
      657     7409    3           END;
      658     7410    3        IF NOT DCBADDR(DCBNUM(M$ELF_DATA))->F$DCB.FCD THEN DO;
      659     7411    3             CALL M$OPEN(OPEN_ELF_DATA_UPD) ALTRET(OPNALT3);
      660     7412    3             EL_THRESHOLD = '1'B;
      661     7413    3           END;                            /* IF NOT FCD                         */
      662     7414    3        DO NEVER;
      663     7415    3   OPNALT3:  EL_THRESHOLD = '0'B;
      664     7416    3           END;                            /* DO NEVER                           */
      665     7417    2        CALL AZC$INIT;
      666     7418    2        RETURN;
      667     7419    2   OPNALT: CALL ABORT_ELF;
      668     7420    2   END STARTUP;
      669     7421        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:20   
      670     7422    1   SLEEP: PROC;
      671     7423    2        CALL M$TIME(CUR_UTS);
      672     7424    2        FPT_WAIT.V.UNITS# = 5 * SECS_PER_MIN;
      673     7425    2        IF CGREAD_STATE=0                  /* no read                            */
      674     7426    3        THEN DO;
      675     7427    3             CALL M$READ(FPT_READCSCG) ALTRET(RD_ERR);
      676     7428    4             DO INHIBIT;
      677     7429    4                  IF CGREAD_STATE=0
      678     7430    4                  THEN
      679     7431    4                       CGREAD_STATE = 1;   /* read pending                       */
      680     7432    4                END;
      681     7433    3           END;
      682     7434    3        DO NEVER;
      683     7435    3   RD_ERR:   IF B$TCB$->B$TCB.ALT$->B$ALT.ERR.CODE~=%E$DACTR
      684     7436    4             THEN DO;
      685     7437    4                  CALL ELF$CONS_ERR;
      686     7438    4                END;
      687     7439    3           END;
      688     7440    3        DO INHIBIT;
      689     7441    3             IF CGREAD_STATE<2        /* Don't wait on read complete or error    */
      690     7442    3             THEN
      691     7443    3                  CALL M$WAIT(FPT_WAIT);
      692     7444    3           END;
      693     7445    2        RETURN;
      694     7446    2   END SLEEP;
      695     7447        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:21   
      696     7448    1   MOVETOFILE: PROC;
      697     7449    3        DO FOREVER;
      698     7450    4             IF SUSPENDED THEN DO;
      699     7451    4                  SUSPENDED='0'B;
      700     7452    4                END;
      701     7453    4             ELSE DO;
      702     7454    4                  CALL M$RDSYSLOG(FPT_RDSYSLOG) ALTRET(NOBUFS);
      703     7455    4                  TEMP=1;
      704     7456    4                  NXTWD=0;
      705     7457    4                END;
      706     7458    4             DO WHILE (TEMP<=LOGBUF.COUNT);
      707     7459    4                  P$=ADDR(LOGBUF.INFO(NXTWD));
      708     7460    4                  SIZE4=P$->HDR.SIZE*4-HDRCHARS#;
      709     7461    4                  RECVEC=VECTOR(HDR);
      710     7462    5                  DO CASE(HDR.FILE);
      711     7463    5                  CASE(1/*ERRLOG*/);
      712     7464    5                     IF HDR.UTS=EL_LASTTIME THEN
      713     7465    5                          EL_NXTCNTR=EL_NXTCNTR+1;
      714     7466    5                     ELSE EL_NXTCNTR=0;
      715     7467    5                     EL_LASTTIME=HDR.UTS;
      716     7468    5                     HDR.CNTR=EL_NXTCNTR;
      717     7469    6                     IF HDR.TYPE=EL_THRESHSET THEN DO;
      718     7470    6                          CALL ELT$SETTHRESH(PINCRC(P$,HDRCHARS#)->HDR);
      719     7471    6                          GOTO NEXT;
      720     7472    6                        END;               /* IF HDR.TYPE = EL_THRESHSET         */
      721     7473    6                     IF HDR.TYPE = EL_IOERR THEN DO;
      722     7474    6                          TEMP$ = PINCRC(P$, HDRCHARS#);
      723     7475    6                          EXTST_BYTE7 = EL$IOERR.EXTST(7);
      724     7476    6                          IF ( (SUBSTR(EL$IOERR.MODEL,0,6)='MSU338' OR
              7476                                   /* CHECK FOR FIPS DISCS */
      725     7477    6                               SUBSTR(EL$IOERR.MODEL,0,6)='MSU339')
      726     7478    6                               AND (EL$IOERR.STATUS.MAJOR = BITBIN('12'O) AND
      727     7479    6                               EL$IOERR.STATUS.MINOR = '13'O)
      728     7480    6                               AND (SENSE_BYTE7.FMT = 6) )
      729     7481    6                          THEN GOTO NEXT;
      730     7482    6                          CALL ELT$THRESH(PINCRC(P$, HDRCHARS#) -> HDR);
      731     7483    6                        END;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:22   
      732     7484    6                     IF HDR.TYPE=EL_FI THEN DO;
      733     7485    6                          TEMP$=PINCRC(P$,HDRCHARS#);
      734     7486    7                          IF NOT EL$FILERR.NOSEND THEN DO;
      735     7487    7                               EL_FIBFR.CODE=EL$FILERR.CODE;
      736     7488    7                               EL_FIBFR.REASON=EL$FILERR.REASON;
      737     7489    7                               EL_FIBFR.ACTION=EL$FILERR.ACTION;
      738     7490    7                               EL_FIBFR.SISID=EL$FILERR.SYSID;
      739     7491    7                               EL_FIBFR.ACCT=EL$FILERR.ACCT;
      740     7492    7                               EL_FIBFR.SN=EL$FILERR.SN;
      741     7493    7                               NAMELEN=EL$FILERR.FNAME.L;
      742     7494    7                               EL_FIBFR.NAM=ADDR(EL$FILERR.FNAME.C)->MOVENAMELEN;
      743     7495    7                               CALL M$WRITE (FPT_WRCSCGFI) ALTRET(WRFIERR);
      744     7496    7   WRFIERR:                    ;
      745     7497    7                             END;
      746     7498    6                        END;
      747     7499    5                     CALL XUD$UTS_DIFF_SEC(TEMP_UTS, EL_LASTTIME, 0);
      748     7500    5                     TEMP_UTS = TEMP_UTS/86400;
      749     7501    6                     IF TEMP_UTS~=EL_LASTDAY THEN DO;
      750     7502    7                          IF F$ERRLOG$->F$DCB.FCD THEN DO;
      751     7503    7                               FPT_CLOSE.V.DCB#=DCBNUM(F$ERRLOG);
      752     7504    7                               FPT_CLOSE.V.OPER.RELG# = '1'B;
      753     7505    7                               CALL M$CLOSE(FPT_CLOSE);
      754     7506    7                             END;
      755     7507    6                          EL_TIME.TSTAMP_=VECTOR(EL_LASTTIME);
      756     7508    6                          CALL M$TIME(EL_TIME);
      757     7509    6                          IF ASCBIN(SUBSTR(VLP_ERRLOG.D,0,1)) < 55 THEN
      758     7510    6                               CALL CONCAT(VLP_ERRLOG.YY,'20');
      759     7511    6                          ELSE
      760     7512    6                               CALL CONCAT(VLP_ERRLOG.YY,'19');
      761     7513    6                          CALL XUD$UTS_DIFF_SEC(EL_LASTDAY,EL_LASTTIME,0);
      762     7514    6                          EL_LASTDAY = EL_LASTDAY/86400;
      763     7515    6                          IF NOT FIRST_TIME AND EL_ZAPFLG = 0
      764     7516    6                          THEN CALL M$GJOB(START_ELAN) ALTRET(KEEP_GOING);
      765     7517    6                          ELSE FIRST_TIME = '0'B;
      766     7518    6                        END;
      767     7519    5                  CASE(2/*COMMUNICATIONS ACCOUNTING*/);
      768     7520    5                     CALL AZC$ACCTNG(RECVEC,EL_ACCTNG) ALTRET(WRITE_ERR);
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:23   
      769     7521    5                     GOTO COM_CONT;
      770     7522    5                  CASE(3/*SECLOG*/);
      771     7523    5                     IF HDR.UTS=ES_LASTTIME THEN
      772     7524    5                          ES_NXTCNTR=ES_NXTCNTR+1;
      773     7525    5                     ELSE ES_NXTCNTR=0;
      774     7526    5                     ES_LASTTIME=HDR.UTS;
      775     7527    5                     HDR.CNTR=ES_NXTCNTR;
      776     7528    5                     HDR.SEQ_NUM=ES_SEQUENCE_NUM;
      777     7529    5                     CALL XUD$UTS_DIFF_SEC(TEMP_UTS, ES_LASTTIME, 0);
      778     7530    5                     TEMP_UTS = TEMP_UTS/86400;
      779     7531    6                     IF TEMP_UTS~=ES_LASTDAY THEN DO;
      780     7532    7                          IF F$SECLOG$->F$DCB.FCD THEN DO;
      781     7533    7                               FPT_CLOSE.V.DCB#=DCBNUM(F$SECLOG);
      782     7534    7                               FPT_CLOSE.V.OPER.RELG#='1'B;
      783     7535    7                               CALL M$CLOSE(FPT_CLOSE);
      784     7536    7                             END;
      785     7537    6                          ES_TIME.TSTAMP_=VECTOR(ES_LASTTIME);
      786     7538    6                          CALL M$TIME(ES_TIME);
      787     7539    6                          IF ASCBIN(SUBSTR(VLP_SECLOG.D,0,1)) < 55 THEN
      788     7540    6                               CALL CONCAT(VLP_SECLOG.YY,'20');
      789     7541    6                          ELSE
      790     7542    6                               CALL CONCAT(VLP_SECLOG.YY,'19');
      791     7543    6                          CALL XUD$UTS_DIFF_SEC(ES_LASTDAY,ES_LASTTIME,0);
      792     7544    6                          ES_LASTDAY = ES_LASTDAY/86400;
      793     7545    6                        END;
      794     7546    5                  END;
      795     7547    4   KEEP_GOING:
      796     7548    4                  F# = HDR.FILE;
      797     7549    4                  CALL OPENFILE(F#) ALTRET(SUSPEND);
      798     7550    5                  IF F# = EL_SEC THEN DO;
      799     7551    5                       CALL M$SAD(SEE_CFUS);
      800     7552    5                       CFU$ = DCBADDR(DCBTAB(F#))->F$DCB.CFU$;
      801     7553    6                       IF CFU$ ~= ADDR(NIL) THEN DO;
      802     7554    6                            CFUPTR.SEGID = %SPCL2SID;
      803     7555    7                            IF CFU$->FM$CFU.UGRANS >= SECLOGSIZE THEN DO;
      804     7556    7                                 FPT_KEYIN.MESS_ = VECTOR (ES_FORCED_TURNOVER);
      805     7557    7                                 GOTO SECLOG_TURNOVER;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:24   
      806     7558    7                               END;
      807     7559    6                          END;
      808     7560    5                     END;
      809     7561    4   WRITE_REC:     FPT_WRITE.BUF_=RECVEC;
      810     7562    4                  CALL M$WRITE(FPT_WRITE) ALTRET(WRITE_ERR);
      811     7563    4                  EL_RENAME_ON_ERR = '1'B;
      812     7564    4                  IF F#=EL_SEC THEN
      813     7565    4                       ES_SEQUENCE_NUM=ES_SEQUENCE_NUM+1;
      814     7566    5   COM_CONT:      IF HDR.LOST+LOSTERR.COUNT>0 THEN DO;
      815     7567    5                       LOSTERR.UTS=HDR.UTS;
      816     7568    5                       LOSTERR.SITE_ID=HDR.SITE_ID;
      817     7569    5                       LOSTERR.COUNT=LOSTERR.COUNT+HDR.LOST;
      818     7570    5                       IF LOSTERR.UTS=EL_LASTTIME THEN EL_NXTCNTR=EL_NXTCNTR+1;
      819     7571    5                       ELSE EL_NXTCNTR=0;
      820     7572    5                       EL_LASTTIME=LOSTERR.UTS;
      821     7573    5                       CALL M$TIME(ELL_TIME);/* fills in date for VLP_ERRLOG*/
      822     7574    5                       IF ASCBIN(SUBSTR(VLP_ERRLOG.D,0,1)) < 55 THEN
      823     7575    5                            CALL CONCAT(VLP_ERRLOG.YY,'20');
      824     7576    5                       ELSE
      825     7577    5                            CALL CONCAT(VLP_ERRLOG.YY,'19');
      826     7578    5                       LOSTERR.CNTR=EL_NXTCNTR;
      827     7579    5                       FPT_WRITE.BUF_=VECTOR(LOSTERR);
      828     7580    5                       CALL OPENFILE(1) ALTRET(ITS_NOT_WORTH_THE_TROUBLE);
      829     7581    5                       CALL M$WRITE(FPT_WRITE) ALTRET(WRITE_ERR);
      830     7582    5                       LOSTERR.COUNT=0;
      831     7583    5   ITS_NOT_WORTH_THE_TROUBLE: ;
      832     7584    5                     END;
      833     7585    5                  DO NEVER;
      834     7586    5   WRITE_ERR:          CALL ELF$CONS_ERR;
      835     7587    6                       IF EL_RENAME_ON_ERR THEN DO;
      836     7588    6                            EL_RENAME_ON_ERR = '0'B;
      837     7589    6   SECLOG_TURNOVER:         FPT_CLOSE.V.DCB# = FILETAB.DCB#(F#);
      838     7590    6                            CALL M$CLOSE (FPT_CLOSE);
      839     7591    6                            OPEN$ = FILETAB.FPT$(F#);
      840     7592    6                            OPEN$->FPTBASE.V.SHARE# = %NONE#;
      841     7593    6                            CALL M$OPEN (OPEN$->FPTBASE)
      842     7594    7                            WHENRETURN DO;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:25   
      843     7595    7                                 CALL M$TIME (ERR_TIME);
      844     7596    7                                 IF ASCBIN(SUBSTR(ERR_NAME.D,0,1)) < 55 THEN
      845     7597    7                                      CALL CONCAT(ERR_NAME.YY,'20');
      846     7598    7                                 ELSE
      847     7599    7                                      CALL CONCAT(ERR_NAME.YY,'19');
      848     7600    7                                 IF F#=EL_SEC THEN ERR_NAME.FILE=':SECLOG';
      849     7601    7                                 ELSE ERR_NAME.FILE = ':ERRLOG';
      850     7602    7                                 ERR_CLOSE.V.DCB# =FILETAB.DCB#(F#);
      851     7603    7                                 CALL M$CLOSE (ERR_CLOSE) ALTRET (SUSPEND);
      852     7604    7                                 IF EL_RENAME_ON_ERR THEN /* MUST BE SECLOG TURNOVER */
      853     7605    7                                      CALL M$KEYIN (FPT_KEYIN);
      854     7606    7                               END;
      855     7607    7                            WHENALTRETURN DO;
              7607                                     /* SOMEBODY ELSE HAS FILE OPEN RIGHT NOW */
      856     7608    7                                 IF NOT EL_RENAME_ON_ERR THEN GOTO SUSPEND;
      857     7609    7                               END;
      858     7610    6                            OPEN$->FPTBASE.V.SHARE# = %IN#;
      859     7611    6                            CALL OPENFILE(F#) ALTRET(SUSPEND);
      860     7612    6                            GOTO WRITE_REC;
      861     7613    6                          END;
      862     7614    5                       LOSTERR.COUNT=LOSTERR.COUNT+1;
      863     7615    5                     END;
      864     7616    4   NEXT:          NXTWD=NXTWD+P$->HDR.SIZE;
      865     7617    4                  TEMP=TEMP+1;
      866     7618    4                END;                       /* DO TEMP                            */
      867     7619    3           END;                            /* DO FOREVER                         */
      868     7620    2   NOBUFS:
      869     7621    2        CALL CLOSE_DCBS;
      870     7622    2        RETURN;
      871     7623    2   SUSPEND:
      872     7624    2        CALL CLOSE_DCBS;
      873     7625    2        SUSPENDED='1'B;
      874     7626    2        RETURN;
      875     7627    2   END MOVETOFILE;
      876     7628        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:26   
      877     7629    1   KEYIN_EVENT: PROC;
      878     7630    3        IF ADDR(EL_TERM)->EL$TERM.KEYIN~=KEY_ZAP# THEN DO;
      879     7631    3             RECVEC = VECTOR(EL_TERM);
      880     7632    3             CALL AZC$ACCTNG(RECVEC,EL_TERMKEYIN) ALTRET(BAD);
      881     7633    3           END;
      882     7634    3        ELSE DO;
      883     7635    3             EL_ZAPFLG=1;
      884     7636    3             CALL MOVETOFILE;
      885     7637    3   KEEP_GOING:
      886     7638    4             DO TEMP=%M$1STDCB# TO B$ROS$->B$ROSEG.NUMDCBS;
      887     7639    4                  IF DCBADDR(TEMP)~=ADDR(NIL) AND TEMP ~= DCBNUM(F$CSCG) THEN
      888     7640    5                       IF DCBADDR(TEMP)->F$DCB.FCD THEN DO;
      889     7641    5                            FPT_CLOSE.V.DCB#=TEMP;
      890     7642    5                            CALL M$CLOSE(FPT_CLOSE) ALTRET(L1);
      891     7643    5   L1:                    END;
      892     7644    4                END;
      893     7645    4             CALL M$WRITE(TELL_KEYIN) WHENALTRETURN DO; END;
      894     7646    3             FPT_CLOSE.V.DCB# = DCBNUM(F$CSCG);
      895     7647    4             CALL M$CLOSE(FPT_CLOSE) WHENALTRETURN DO; END;
      896     7648    3             FPT_WAIT.V.UNITS#=9999;
      897     7649    4             DO FOREVER;
      898     7650    4                  CALL M$WAIT(FPT_WAIT);
      899     7651    4                END;
      900     7652    3           END;
      901     7653    2        RETURN;
      902     7654    2   BAD: CALL ABORT_ELF;
      903     7655    2   END KEYIN_EVENT;
      904     7656        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:27   
      905     7657    1   ABORT_ELF: PROC;
      906     7658    2        CALL CLOSE_DCBS;
      907     7659    2        ERRCODE=B$TCB$->B$TCB.ALT$->B$ALT.ERR;
      908     7660    2        FPT_ERRMSG.V.DCB#=B$TCB$->B$TCB.ALT$->B$ALT.DCB#;
      909     7661    2        CALL M$ERRMSG(FPT_ERRMSG);
      910     7662    2        CALL M$XXX;
      911     7663    2   END ABORT_ELF;
      912     7664        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:28   
      913     7665    1   OPENFILE: PROC(FILE#) ALTRET;
      914     7666    2   DCL FILE# UBIN;
      915     7667        /**/
      916     7668    2   TRY_AGAIN: ;
      917     7669    3        IF FILE#<=SPECFILES THEN DO;
      918     7670    3             OPEN$=FILETAB.FPT$(FILE#);
      919     7671    3             DCBTAB(FILE#)=FILETAB.DCB#(FILE#);
      920     7672    3           END;
      921     7673    3        ELSE DO;
      922     7674    3             CALL BINCHAR(MISCNAME.N,FILE#);
      923     7675    4             IF DCBTAB(FILE#)=0 THEN DO;
      924     7676    4                  CALL M$GETDCB(FPT_GETDCB) ALTRET(GET_DCB_ALT);
      925     7677    4                  DCBTAB(FILE#)=GET_DCB#;
      926     7678    4                END;
      927     7679    3             OPMISC.V.DCB#=DCBTAB(FILE#);
      928     7680    3             OPEN$=ADDR(OPMISC);
      929     7681    3           END;
      930     7682    2        IF NOT DCBADDR(DCBTAB(FILE#))->F$DCB.FCD THEN
      931     7683    2             CALL M$OPEN(OPEN$->FPTBASE) ALTRET(OPN_ERR);
      932     7684    2        FPT_WRITE.V.DCB#=DCBTAB(FILE#);
      933     7685    2        RETURN;
      934     7686    2   OPN_ERR:
      935     7687    3        IF B$TCB$->B$TCB.ALT$->B$ALT.ERR.CODE=%E$FILEBUSY THEN DO;
      936     7688    3             IF FILE#=EL_SEC
      937     7689    3             THEN FPT_KEYIN.MESS_=VECTOR(SECLOG_BUSY);
      938     7690    3             ELSE FPT_KEYIN.MESS_=VECTOR(ERRLOG_BUSY);
      939     7691    3             CALL M$KEYIN(FPT_KEYIN);
      940     7692    3             ALTRETURN;
      941     7693    3           END;
      942     7694    2        IF B$TCB$->B$TCB.ALT$->B$ALT.ERR.CODE=%E$ACGRANS OR
      943     7695    3             B$TCB$->B$TCB.ALT$->B$ALT.ERR.CODE=%E$PSGRANS THEN DO;
      944     7696    3             IF FILE#=EL_SEC
      945     7697    3             THEN FPT_KEYIN.MESS_=VECTOR(ES_EXCEED_SPACE);
      946     7698    3             ELSE FPT_KEYIN.MESS_=VECTOR(EL_EXCEED_SPACE);
      947     7699    3             CALL M$KEYIN(FPT_KEYIN);
      948     7700    3             ALTRETURN;
      949     7701    3           END;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:29   
      950     7702    2        OPEN$->FPTBASE.V.FUN# = %UPDATE#;
      951     7703    2        CALL M$OPEN(OPEN$->FPTBASE) ALTRET(OPN_ERR1);
      952     7704    2        TEMP_VEC = OPEN$->FPTBASE.NAME_;
      953     7705    2        TEMP_NAME = TEMP_VEC1.PTR$->TEXTCBASE;
      954     7706    2        TEMP_NAME.L = TEMP_NAME.L + 5;
      955     7707    2        CALL INSERT(TEMP_NAME.C,TEMP_NAME.L-5,5,'-:BAD');
      956     7708    2        FPT_CLOSE.V.DCB# = DCBTAB(FILE#);
      957     7709    2        FPT_CLOSE.V.OPER.RELG# = '1'B;
      958     7710    2        FPT_CLOSE.NAME_ = VECTOR(TEMP_NAME);
      959     7711    2        CALL M$CLOSE(FPT_CLOSE);
      960     7712    2        OPEN$->FPTBASE.V.FUN# = %CREATE#;
      961     7713    2        FPT_CLOSE.NAME_ = VECTOR(NIL);
      962     7714    2        IF FILE#=EL_SEC
      963     7715    2        THEN FPT_KEYIN.MESS_=VECTOR(ES_BADFILE);
      964     7716    2        ELSE FPT_KEYIN.MESS_ = VECTOR(EL_BADFILE);
      965     7717    2        CALL M$KEYIN(FPT_KEYIN);
      966     7718    2        GOTO TRY_AGAIN;
      967     7719    2   OPN_ERR1:
      968     7720    2        OPEN$->FPTBASE.V.FUN# = %CREATE#;
      969     7721    2        OPEN$->FPTBASE.V.EXIST# = %NEWFILE#;
      970     7722    2        CALL M$OPEN(OPEN$->FPTBASE) ALTRET(ABRT) ;
      971     7723    2        OPEN$->FPTBASE.V.EXIST# = %OLDFILE#;
      972     7724    2        FPT_WRITE.V.DCB# = DCBTAB(FILE#);
      973     7725    2        RETURN;
      974     7726    2   GET_DCB_ALT:
      975     7727    3        IF B$TCB$->B$TCB.ALT$->B$ALT.ERR.CODE=%E$NOSLOTS THEN DO;
      976     7728    3             CALL RELEASE_DCBS;
      977     7729    3             GOTO TRY_AGAIN;
      978     7730    3           END;
      979     7731    2   ABRT: CALL ABORT_ELF;
      980     7732    2   END OPENFILE;
      981     7733        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:30   
      982     7734    1   CLOSE_DCBS: PROC;
      983     7735    2   DCL RELFLG BIT(1) ALIGNED;
      984     7736    2   DCL I UBIN;
      985     7737    2        RELFLG='0'B;
      986     7738    2        GOTO CLOSE;
      987     7739    2   RELEASE_DCBS: ENTRY;
      988     7740    2        RELFLG='1'B;
      989     7741    2   CLOSE: ;
      990     7742    3        DO I=1 TO 99;
      991     7743    4             IF DCBTAB(I)~=0 THEN DO;
      992     7744    4                  FPT_CLOSE.V.DCB#=DCBTAB(I);
      993     7745    4                  FPT_CLOSE.V.OPER.RELG# = '0'B;
      994     7746    4                  FPT_RELDCB.V.DCB#=DCBTAB(I);
      995     7747    4                  FPT_TRUNC.V.DCB#=DCBTAB(I);
      996     7748    5                  IF DCBADDR(DCBTAB(I))->F$DCB.FCD THEN DO;
      997     7749    5                       IF I>SPECFILES
      998     7750    5                       THEN
      999     7751    6                            CALL M$CLOSE(FPT_CLOSE) WHENALTRETURN DO; END;
     1000     7752    5                       ELSE
     1001     7753    6                            CALL M$TRUNC (FPT_TRUNC) WHENALTRETURN DO; END;
     1002     7754    5                     END;
     1003     7755    5                  IF I>SPECFILES AND RELFLG THEN DO;
     1004     7756    6                       CALL M$RELDCB(FPT_RELDCB) WHENALTRETURN DO; END;
     1005     7757    5                       DCBTAB(I) = 0;
     1006     7758    5                     END;
     1007     7759    4                END;
     1008     7760    3           END;
     1009     7761    2        FPT_TRUNC.V.DCB# = DCBNUM(F$COMAC);
     1010     7762    3        CALL M$TRUNC (FPT_TRUNC) WHENALTRETURN DO; END;
     1011     7763    2   END CLOSE_DCBS;
     1012     7764        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:31   
     1013     7765    1   PROCESS_STATISTICS: PROC;
     1014     7766    2        IF NOT EL_DEVSTATS THEN RETURN;
     1015     7767    2        CALL M$TIME(CUR_UTS);
     1016     7768    2        CALL XUD$UTS_DIFF_SEC(LAST_DEVSTATS,CURUTS,0);
     1017     7769    2        LAST_DEVSTATS = LAST_DEVSTATS/1800;
     1018     7770    2        CALL XUD$UTS_ADJ_25TH(LAST_DEVSTATS,0,LAST_DEVSTATS*30*%UTS_25TH_MIN#);
     1019     7771    2        DCTX = 1;
     1020     7772    3        DO WHILE (DCTX <= MAXDCTX);
     1021     7773    3             DCT$ = NI$DCT$(DCTX);
     1022     7774    3             DCTPTR.SEGID = %SPCL1SID;
     1023     7775    3             IF DCT.TYPE = %DV_MPC THEN
     1024     7776    4             DO;
     1025     7777    4                  SQH$ = DCT.SQH$;
     1026     7778    4                  SQHPTR.SEGID = %SPCL1SID;
     1027     7779    5                  DO MPC_NUM = 0 TO %N_MPCSPERSQH - 1;
     1028     7780    5                       IF SQH.MPC$(MPC_NUM) ~= ADDR(NIL)
     1029     7781    6                       THEN DO;
     1030     7782    6                            DCT$ = SQH.MPC$(MPC_NUM);
     1031     7783    6                            DCTPTR.SEGID = %SPCL1SID;
     1032     7784    6                            IF NOT DCT.STATUS.DOWN
     1033     7785    6                                 AND NOT ( DCT.MPC.FWNAME = 'D388' OR
     1034     7786    6                                 DCT.MPC.FWNAME = 'IFDK' OR
     1035     7787    6                                 DCT.MPC.FWNAME = 'M460' OR
     1036     7788    6                                 DCT.MPC.FWNAME = 'IFTP')
     1037     7789    6                                 AND ( DCT.STATUS.TND = 0 )
     1038     7790    7                            THEN DO;
     1039     7791    7                                 MPC_NAME = DCT.DEVNM;
     1040     7792    7                                 FW_TYPE = DCT.MPC.FWNAME;
     1041     7793    7                                 DQH$ = DCT.DQH$;
     1042     7794    7                                 DQHPTR.SEGID = %SPCL1SID;
     1043     7795    7                                 IF NOT DQH.STATUS.DOWN
     1044     7796    7                                      AND NOT DQH.CHANSTATE
     1045     7797    8                                 THEN DO;
     1046     7798    8                                      DEV_IOQ.V.CHAN# = DQH.IOCHAN.CHANNEL;
     1047     7799    8                                      DEV_IOQ.V.IOM# = DQH.IOCHAN.IOM;
     1048     7800    8                                      CALL MPCSTATS;
     1049     7801    8                                      DO SUBSYSTEM_DCTX = SQH.FDCT TO
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:32   
     1050     7802    9                                           (SQH.FDCT + SQH.NDCT - 1);
     1051     7803    9                                           DCT$ = NI$DCT$(SUBSYSTEM_DCTX);
     1052     7804    9                                           DCTPTR.SEGID = %SPCL1SID;
     1053     7805    9                                           IF (DCT.TYPE ~= %DV_MPC) AND NOT DCT.STATUS.
              7805                                                    DOWN
     1054     7806    9                                           THEN CALL DEVSTATS;
     1055     7807    9                                         END; /* DO SUBSYSTEM_DCTX */
     1056     7808    8                                    END;   /* NOT DQH.STATUS.DOWN */
     1057     7809    7                               END;
     1058     7810    6                          END;             /* SQH.MPC$(MPC_NUM) ~= ADDR(NIL) */
     1059     7811    5                     END;                  /* DO MPC_NUM */
     1060     7812    4                  DCTX = SQH.FDCT + SQH.NDCT;
     1061     7813    4                END;                       /* DCT.TYPE = %DV_MPC */
     1062     7814    3             ELSE DCTX = DCTX + 1;
     1063     7815    3           END;                            /* DO WHILE */
     1064     7816    2        RETURN;
     1065     7817    2   END PROCESS_STATISTICS;
     1066     7818        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:33   
     1067     7819    1   DEVSTATS: PROC;
     1068     7820    2        STATS$ = ADDR(DEVBUF.STATS);
     1069     7821    2        IOQ_FLAG = '0'B;
     1070     7822    3        DO CASE(DCT.TYPE);
     1071     7823    3        CASE(%DV_MT);
     1072     7824    3           IF FW_TYPE = 'M601' OR FW_TYPE = 'M610'
     1073     7825    3                OR FW_TYPE = 'TPUR'
     1074     7826    4           THEN DO;
     1075     7827    4                IOQ_FLAG = '1'B;
     1076     7828    4                DEVBUF.DCWLIST = MT_BUFINIT;
     1077     7829    4                NUM_CNTRS = 8;
     1078     7830    4              END;
     1079     7831    3        CASE(%DV_DP);
     1080     7832    3           IF (FW_TYPE = 'M191' OR FW_TYPE = 'D500' /* MPC OR DAU */
     1081     7833    3                OR FW_TYPE = 'MSP8')
     1082     7834    4           THEN DO;
     1083     7835    4                IOQ_FLAG = '1'B;
     1084     7836    4                DEVBUF.DCWLIST = DP_BUFINIT;
     1085     7837    4                NUM_CNTRS = 16;
     1086     7838    4              END;
     1087     7839    3           IF FW_TYPE = 'IIDK'             /* MDS DISCS */
     1088     7840    4           THEN DO;
     1089     7841    4                IOQ_FLAG = '1'B;
     1090     7842    4                DEVBUF.DCWLIST = MDS_BUFINIT;
     1091     7843    4                NUM_CNTRS = 11;
     1092     7844    4              END;
     1093     7845    3        END;                               /* DO CASE DCT.TYPE */
     1094     7846    2        IF IOQ_FLAG THEN
     1095     7847    3        DO;
     1096     7848    4             DO I = 0 TO 15;
     1097     7849    4                  DEVBUF.STATS(I) = 0;     /* CLEAR COUNTERS */
     1098     7850    4                END;
     1099     7851    4             DO I = 0 TO 29;
     1100     7852    4                  DEVBUF.ZERO(I) = 0;
     1101     7853    4                END;
     1102     7854    3             DEV_IOQ.V.DLA.DCTX# = SUBSYSTEM_DCTX;
     1103     7855    3             DEV_IOQ.V.WAIT# = '0'B;       /* SET WAIT = NO */
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:34   
     1104     7856    3             DEV_IOQ.V.EVENT# = 99;
     1105     7857    3             EL_POLL_IN_PROGRESS = '1'B;
     1106     7858    3             CALL M$IOQ(DEV_IOQ) ALTRET(DEVSTATS_EXIT); /* READ STATISTICS COUNTERS */
     1107     7859    3             FPT_WAIT.V.UNITS# = SECS_PER_MIN;
     1108     7860    3             CALL M$WAIT(FPT_WAIT);
     1109     7861    4             DO WHILE (EL_POLL_IN_PROGRESS);
     1110     7862    4                  CALL MOVETOFILE;
     1111     7863    5                  DO CASE(CGREAD_STATE);
     1112     7864    5                  CASE(2);
     1113     7865    5                     CGREAD_STATE = 0;
     1114     7866    5                     CALL KEYIN_EVENT;
     1115     7867    5                  CASE(3);
     1116     7868    5                     CGREAD_STATE = 0;
     1117     7869    5                     CALL ELF$CONS_ERR(CGREAD_ERR);
     1118     7870    5                  END;                     /* DO CASE */
     1119     7871    4                  CALL SLEEP;
     1120     7872    4                END;                       /* DO WHILE */
     1121     7873    3             CALL MOVETOFILE;
     1122     7874    3             IF NWIO_TYC&~%TYC_EGV
     1123     7875    3             THEN GOTO DEVSTATS_EXIT;
     1124     7876    3             IF DEVBUF.STATS = '0'B
     1125     7877    3             THEN GOTO DEVSTATS_EXIT;
     1126     7878    3             EL$DEVSTATS = '0'B;
     1127     7879    3             EL$DEVSTATS.DEVNM = DCT.DEVNM;
     1128     7880    3             EL$DEVSTATS.MPCNAME = MPC_NAME;
     1129     7881    3             EL$DEVSTATS.FW_NAME = FW_TYPE;
     1130     7882    3             IF FW_TYPE = 'IIDK'           /* MDS DISCS */
     1131     7883    4             THEN DO;
     1132     7884    5                  DO K = 0 TO 1;
     1133     7885    5                       CALL REFMT_WORD(MDS_STATS_CNTRS(K));
     1134     7886    5                       EL$DEVSTATS.STATISTICS(K) = MDS_STATS_CNTRS(K);
     1135     7887    5                     END;
     1136     7888    5                  DO K = 2 TO 3;
     1137     7889    5                       CALL REFMT_HALF(MDS_STATS_CNTRS(K));
     1138     7890    5                       EL$DEVSTATS.STATISTICS(K) = MDS_STATS_CNTRS(K);
     1139     7891    5                     END;
     1140     7892    5                  DO K = 4 TO NUM_CNTRS - 1;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:35   
     1141     7893    5                       CALL REFMT_WORD(MDS_STATS_CNTRS(K));
     1142     7894    5                       EL$DEVSTATS.STATISTICS(K) = MDS_STATS_CNTRS(K);
     1143     7895    5                     END;
     1144     7896    4                END;                       /* FW_TYPE = IIDK */
     1145     7897    4             ELSE DO K = 0 TO NUM_CNTRS - 1; /* MPC DISCS & TAPES */
     1146     7898    4                  EL$DEVSTATS.STATISTICS(K) = STATS_CNTRS(K);
     1147     7899    4                END;
     1148     7900    3             CALL M$WRSYSLOG(WRITE_DEVSTATS);
     1149     7901    3           END;                            /* IF IOQFLAG */
     1150     7902    2   DEVSTATS_EXIT:
     1151     7903    2        RETURN;
     1152     7904    2   END DEVSTATS;
     1153     7905        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:36   
     1154     7906        /********************************************************************
     1155     7907        *                DEVICE STATISTICS COUNTERS                         *
     1156     7908        *                  ( RETURNED BY M$IOQ )                            *
     1157     7909        * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
     1158     7910        *                       MPC/TPUR TAPES                             *
     1159     7911        * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
     1160     7912        *  WORD 0    RECORDS READ (BITS 0-17)
     1161     7913        *            RECORDS WRITTEN (BITS 18-35)                           *
     1162     7914        *       1    RECORDS WITH WRITE ERRORS (BITS 0-17)                  *
     1163     7915        *            RECORDS WITH READ ERRORS (BITS 18-35)                  *
     1164     7916        *       2    TRANSFER TIMING ERRORS (BITS 0-17)                     *
     1165     7917        *            MARGINAL RECORDS (BITS 18-35)                          *
     1166     7918        *       3    P.E. RECORDS WITH SINGLE TRACK CORRECT (BITS 0-17)     *
     1167     7919        *            MTC READ COUNT (BITS 18-35)                            *
     1168     7920        *                                                                   *
     1169     7921        * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
     1170     7922        *                        MPC/DAU DISCS                              *
     1171     7923        * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
     1172     7924        *  WORD 0    MOVEMENT SEEKS (BITS 0-17)                             *
     1173     7925        *            DATA SECTORS WRITTEN (BITS 18-35)                      *
     1174     7926        *       1    DATA SECTORS READ (BITS 0-17)                          *
     1175     7927        *            DATA TRANSFER COMMANDS EXECUTED (BITS 18-35)           *
     1176     7928        *       2    SEEK INCOMPLETES (BITS 0-17)                           *
     1177     7929        *            HEADER VERIFICATION ERRORS (BITS 18-35)                *
     1178     7930        *       3    TRANSFER TIMING ERRORS (BITS 0-17)                     *
     1179     7931        *            DATA CHECK CHARACTER ALERTS (BITS 18-35)               *
     1180     7932        *       4    COUNT CHECK CHARACTER ALERTS (BITS 0-17)               *
     1181     7933        *            DLI PARITY ERRORS (BITS 18-35)                         *
     1182     7934        *       5    ALTERNATE TRACKS PROCESSED (BITS 0-17)                 *
     1183     7935        *            EDAC CORRECTABLE ERRORS (BITS 18-35)                   *
     1184     7936        *       6    EDAC UNCORRECTABLE ERRORS (BITS 0-17)                  *
     1185     7937        *            POSITION OFFSET RETRYS/LATENCY (BITS 18-35)            *
     1186     7938        *       7    DATA CORRECTIONS INITIATED/ RECORD RETRIES (BITS 0-17) *
     1187     7939        *            SEARCH ALERTS (BITS 18-35)                             *
     1188     7940        *                                                                   */
     1189     7941        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:37   
     1190     7942        /* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -*
     1191     7943        *                  MDS DISCS (ASCII FORMAT)                         *
     1192     7944        * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
     1193     7945        *  WORD 0    NUMBER OF BYTES READ (BITS 0-35)                       *
     1194     7946        *       1    NUMBER OF BYTES WRITTEN (BITS 0-35)                    *
     1195     7947        *       2    NUMBER OF SEEKS PERFORMED (BITS 0-17)                  *
     1196     7948        *            NUMBER OF SEEK ERRORS (BITS 18-35)                     *
     1197     7949        *       3    NUMBER OF DATA CHECKS CORRECTED (BITS 0-17)            *
     1198     7950        *            NUMBER OF DATA CHECKS UNCORRECTED (BITS 18-35)         *
     1199     7951        *       4    NUMBER OF SEEKS (BITS 0-35)                            *
     1200     7952        *       5    NUMBER OF SEEK/READS (BITS 0-35)                       *
     1201     7953        *       6    NUMBER OF SECTORS READ (BITS 0-35)                     *
     1202     7954        *       7    NUMBER OF SEEK/WRITES (BITS 0-35)                      *
     1203     7955        *       8    NUMBER OF SECTORS WRITTEN (BITS 0-35)                  *
     1204     7956        *       9    NUMBER OF RETRIES (BITS 0-35)                          *
     1205     7957        *      10    NUMBER OF LATENCIES LOST (BITS 0-35)                   *
     1206     7958        *                                                                   *
     1207     7959        ********************************************************************/
     1208     7960        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:38   
     1209     7961    1   MPCSTATS: PROC;
     1210     7962    2        IF NOT EL_MPCSTATS THEN RETURN;
     1211     7963    2        STATS$ = ADDR(DEVBUF.STATS);
     1212     7964    2        IOQ_FLAG = '0'B;
     1213     7965    3        DO SELECT(DCT.MPC.FWNAME);
     1214     7966    3             SELECT('IPR5', 'NONE');       /* IPC/EURC UNIT RECORD CONTROLLER */
     1215     7967    3             IOQ_FLAG = '1'B;
     1216     7968    3             DEVBUF.DCWLIST = IPC_BUFINIT;
     1217     7969    3             NUM_CNTRS = 34;
     1218     7970    3             STATS$ = PINCRW( STATS$, 1);
     1219     7971    3             SELECT('MSP8');               /* DAU DISC CONTROLLER */
     1220     7972    3             IOQ_FLAG = '0'B;              /* DAU STATS NOT CURRENTLY IMPL */
     1221     7973    3             DEVBUF.DCWLIST = DAU_BUFINIT;
     1222     7974    3             NUM_CNTRS = 314;
     1223     7975    3           END;                            /* DO SELECT */
     1224     7976    2        IF IOQ_FLAG THEN
     1225     7977    3        DO;
     1226     7978    4             DO I = 0 TO 15;
     1227     7979    4                  DEVBUF.STATS(I) = 0;     /* CLEAR COUNTERS */
     1228     7980    4                END;
     1229     7981    4             DO I = 0 TO 299;
     1230     7982    4                  DEVBUF.ZERO(I) = 0;
     1231     7983    4                END;
     1232     7984    3             DEV_IOQ.V.DLA.DCTX# = DCT.DCTX; /* DCTX OF CONTROLLER */
     1233     7985    3             DEV_IOQ.V.WAIT# = '0'B;       /* SET WAIT = NO */
     1234     7986    3             DEV_IOQ.V.EVENT# = 99;
     1235     7987    3             EL_POLL_IN_PROGRESS = '1'B;
     1236     7988    3             CALL M$IOQ(DEV_IOQ) ALTRET(MPCSTATS_EXIT);
     1237     7989    3             FPT_WAIT.V.UNITS# = SECS_PER_MIN;
     1238     7990    3             CALL M$WAIT(FPT_WAIT);
     1239     7991    4             DO WHILE ( EL_POLL_IN_PROGRESS );
     1240     7992    4                  CALL MOVETOFILE;
     1241     7993    5                  DO CASE (CGREAD_STATE);
     1242     7994    5                  CASE (2);
     1243     7995    5                     CGREAD_STATE = 0;
     1244     7996    5                     CALL KEYIN_EVENT;
     1245     7997    5                  CASE (3);
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:39   
     1246     7998    5                     CGREAD_STATE = 0;
     1247     7999    5                     CALL ELF$CONS_ERR(CGREAD_ERR);
     1248     8000    5                  END;                     /* DO CASE */
     1249     8001    4                  CALL SLEEP;
     1250     8002    4                END;                       /* DO WHILE */
     1251     8003    3             CALL MOVETOFILE;
     1252     8004    3             IF NWIO_TYC&~%TYC_EGV
     1253     8005    3             THEN GOTO MPCSTATS_EXIT;
     1254     8006    3             EL$MPCSTATS = '0'B;
     1255     8007    3             EL$MPCSTATS.MPCNAME = DCT.DEVNM;
     1256     8008    3             EL$MPCSTATS.FWNAME = DCT.MPC.FWNAME;
     1257     8009    4             DO SELECT(DCT.MPC.FWNAME);
     1258     8010    4                  SELECT('IPR5','NONE');   /* FOR IPC AND EURC*/
     1259     8011    5                  DO I = 0 TO 15;          /* CONVERT FROM ASCII FMT */
     1260     8012    5                       CALL REFMT_HALF(IPC_STATS_CNTRS(I));
     1261     8013    5                       EL$MPCSTATS.STATS(I) = IPC_STATS_CNTRS(I);
     1262     8014    5                     END;
     1263     8015    4                  IPC$ = ADDR(IPC_STATS_CNTRS(16));
     1264     8016    5                  DO I = 0 TO 3;
     1265     8017    5                       TEMP_HALF(0) = IPC_IMU_TRANSACTIONS.HI_ORDER(I);
     1266     8018    5                       TEMP_HALF(1) = IPC_IMU_TRANSACTIONS.LO_ORDER(I);
     1267     8019    5                       CALL REFMT_WORD(TEMP_WORD);
     1268     8020    5                       EL$MPCSTATS.STATS(I + 16) = TEMP_WORD;
     1269     8021    5                     END;
     1270     8022    4                  IPC$ = ADDR(IPC_STATS_CNTRS(20));
     1271     8023    5                  DO I = 0 TO 3;
     1272     8024    5                       TEMP_HALF(0) = IPC_IMU_WD_TRANSFERS.HI_ORDER(I);
     1273     8025    5                       TEMP_HALF(1) = IPC_IMU_WD_TRANSFERS.LO_ORDER(I);
     1274     8026    5                       CALL REFMT_WORD(TEMP_WORD);
     1275     8027    5                       EL$MPCSTATS.STATS(I + 20) = TEMP_WORD;
     1276     8028    5                     END;
     1277     8029    5                  DO I = 24 TO 29;
     1278     8030    5                       CALL REFMT_HALF(IPC_STATS_CNTRS(I));
     1279     8031    5                       EL$MPCSTATS.STATS(I) = IPC_STATS_CNTRS(I);
     1280     8032    5                     END;
     1281     8033    4                  ASCII_WORD = IPC_STATS_CNTRS(30);
     1282     8034    4                  TEMP_HALF(1) = ASCII_HF_WD(0);
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:40   
     1283     8035    4                  TEMP_HALF(0) = ASCII_HF_WD(1);
     1284     8036    4                  CALL REFMT_WORD(TEMP_WORD);
     1285     8037    4                  EL$MPCSTATS.STATS(30) = TEMP_WORD/60;
     1286     8038    4                  CALL REFMT_HALF(IPC_STATS_CNTRS(31));
     1287     8039    5                  DO I = 31 TO NUM_CNTRS - 1;
     1288     8040    5                       EL$MPCSTATS.STATS(I) = IPC_STATS_CNTRS(I);
     1289     8041    5                     END;
     1290     8042    4                  SELECT('MSP8');          /* FOR DAU DISC CONTROLLER */
     1291     8043    4                END;                       /* DO SELECT */
     1292     8044    3             CALL M$WRSYSLOG(WRITE_MPCSTATS);
     1293     8045    3           END;                            /* IF IOQ_FLAG */
     1294     8046    2   MPCSTATS_EXIT:
     1295     8047    2        RETURN;
     1296     8048    2   END MPCSTATS;
     1297     8049        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:41   
     1298     8050        /*********************************************************************
     1299     8051        *                 MPC STATISTICS COUNTERS                            *
     1300     8052        *                  ( RETURNED BY M$IOQ )                             *
     1301     8053        * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -*
     1302     8054        *             IPC-UR/EURC CONTROLLER (ASCII FORMAT)                  *
     1303     8055        * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -*
     1304     8056        *  WORDS 0,1     RECEIVER ERRORS(0:3)  (18 BITS/COUNTER)             *
     1305     8057        *        2,3     TRANSMITTER ERRORS(0:3)  (18 BITS/COUNTER)          *
     1306     8058        *        4,5     CARDS PUNCHED(0:3)  (18 BITS/COUNTER)               *
     1307     8059        *        6,7     CARDS READ(0:3)  (18 BITS/COUNTER)                  *
     1308     8060        *        8,9     FRAMES RECEIVED OVER LINK(0:3)  (18 BITS/COUNTER)   *
     1309     8061        *        10,11   FRAMES TRANSMITTED OVER LINK(0:3) (18 BITS/COUNTER) *
     1310     8062        *        12,13   TOTAL CONNECT PCWs(0:3)  (18 BITS/COUNTER)          *
     1311     8063        *        14,15   PCWs ON IMU INTERFACE(0:3)  (18 BITS/COUNTER)       *
     1312     8064        *        16,17   TRANSACTIONS ON IMU INTERFACE(0:3)  (18 BITS/CNTR)  *
     1313     8065        *        18,19   64K TRANSACTIONS ON IMU INTERFACE(0:3) (18 BITS/CTR)*
     1314     8066        *        20,21   WORD TRANSFERS ON IMU INTERFACE(0:3)  (18 BITS/CNTR)*
     1315     8067        *        22,23   64K WRD TRANSFERS ON IMU INTERFACE(0:3)             *
     1316     8068        *        24,25   LINES PRINTED(0:3)  (18 BITS/COUNTER)               *
     1317     8069        *        26,27   RETRANSMISSIONS(0:3)  (18 BITS/COUNTER)             *
     1318     8070        *        28,29   NUMBER OF BOTTOM OF PAGES(0:3)  (18 BITS/COUNTER)   *
     1319     8071        *        30      UPTIME CLOCK (18 BITS)                              *
     1320     8072        *                UPTIME 64K CLOCK (18 BITS)                          *
     1321     8073        *        31      LOST INTERRUPT COUNT (18 BITS)                      *
     1322     8074        *                UNSOLICITED FRAMES (18 BITS)                        *
     1323     8075        *        32,33   PROM REVISION(0:7)  (1 BYTE/COUNTER)                *
     1324     8076        *                                                                    *
     1325     8077        ********************************************************************/
     1326     8078        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:42   
     1327     8079    1   SIXTEEN: PROC (CHAR_2);
     1328     8080        /**/
     1329     8081    2   DCL CHAR_2 CHAR(2);
     1330     8082        /**/
     1331     8083    2        TEMP_BUF = CHAR_2;
     1332     8084    2        BUF_TEMP(0) = TEMP_BF(0);
     1333     8085    2        BUF_TEMP(1) = TEMP_BF(1);
     1334     8086    2   END SIXTEEN;
     1335     8087        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:43   
     1336     8088    1   REFMT_WORD: PROC(WORD1);
     1337     8089        /**/
     1338     8090    2   DCL 1 WORD1 UBIN;
     1339     8091    2   DCL 1 WORD2 REDEF WORD1,
     1340     8092    2            2 * UBIN(4) UNAL,
     1341     8093    2            2 BYT0 UBIN(8) UNAL,
     1342     8094    2            2 BYT1 UBIN(8) UNAL,
     1343     8095    2            2 BYT2 UBIN(8) UNAL,
     1344     8096    2            2 BYT3 UBIN(8) UNAL;
     1345     8097
     1346     8098    2        ASCII_WORD = WORD1;           /* CONVERT WORD FROM ASCII TO BINARY FMT */
     1347     8099    2        WORD1 = 0;
     1348     8100    2        WORD2.BYT0 = ASCII_FMT.BYT(0);
     1349     8101    2        WORD2.BYT1 = ASCII_FMT.BYT(1);
     1350     8102    2        WORD2.BYT2 = ASCII_FMT.BYT(2);
     1351     8103    2        WORD2.BYT3 = ASCII_FMT.BYT(3);
     1352     8104    2        RETURN;
     1353     8105    2   END REFMT_WORD;
     1354     8106        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:44   
     1355     8107    1   REFMT_HALF: PROC(WORD3);      /* CONVERT ASCII WORD INTO 2 BINARY HALF WORDS */
     1356     8108    2   DCL 1 WORD3 UBIN;
     1357     8109    2   DCL 1 HALF_WD(0:1) REDEF WORD3,
     1358     8110    2            2 * UBIN(2) UNAL,
     1359     8111    2            2 BYT0 UBIN(8) UNAL,
     1360     8112    2            2 BYT1 UBIN(8) UNAL;
     1361     8113    2        ASCII_WORD = WORD3;
     1362     8114    2        WORD3 = 0;
     1363     8115    2        HALF_WD.BYT0(0) = ASCII_FMT.BYT(0);
     1364     8116    2        HALF_WD.BYT1(0) = ASCII_FMT.BYT(1);
     1365     8117    2        HALF_WD.BYT0(1) = ASCII_FMT.BYT(2);
     1366     8118    2        HALF_WD.BYT1(1) = ASCII_FMT.BYT(3);
     1367     8119    2        RETURN;
     1368     8120    2   END REFMT_HALF;
     1369     8121    1   END ELF;
     1370     8122        %EOD;

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:45   
--  Include file information  --

   XUD_UTS_M.:E05TOU  is referenced.
   ES_CNTRL_R.:E05TOU  cannot be made into a system file and is referenced.
   FM$CFU.:E05TOU  is referenced.
   IT_SUBS_C.:E05TOU  is referenced.
   OC_SUBS_C.:E05TOU  is referenced.
   OC_MESSHD_C.:E05TOU  is referenced.
   NI_DATA_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N_FC_C.:E05TOU  is referenced.
   EL_SUBS_C.:E05TOU  is referenced.
   EL_DATA_C.:E05TOU  is referenced.
   EL_MACRO_C.:E05TOU  is referenced.
   EL$TABLES.:E05TOU  is referenced.
   I_SUBS_C.:E05TOU  is referenced.
   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   B$ROSEG.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure ELF.

   Procedure ELF requires 1851 words for executable code.
   Procedure ELF requires 516 words of local(AUTO) storage.

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:46   

 Object Unit name= ELF                                        File name= ELF$MAIN.:E05TOU
 UTS= JUL 29 '97 15:18:09.64 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none  2345   4451  ELF
    2  RoData even  UTS    151    227  ELF
    3   DCB   even  none     0      0  M$ELF_DATA
    4   DCB   even  none     0      0  M$DO
    5   DCB   even  none     0      0  M$MPC
    6   DCB   even  none     0      0  F$ACCTNG
    7   DCB   even  none     0      0  F$ERRLOG
    8   DCB   even  none     0      0  F$SECLOG
    9   DCB   even  none     0      0  F$COMAC
   10   DCB   even  none     0      0  F$CSCG
   11   Proc  even  none  1851   3473  ELF
   12  RoData even  none    40     50  ELF

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
    11      0   yes            yes      Main       0  ELF
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:47   

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    1      0  LOGBUF                             1   2000  EL_NO_THRESHOLDING
    1   2002  NWIO_TYC                           1   2003  CGREAD_ERR
    1   2004  CGREAD_STATE                       1   2005  EL_ZAPFLG
    1   2006  EL_SNAPFLG                         1   2007  EL_POLL_IN_PROGRESS
    1   3037  EL_DEVSTATS                        1   3040  EL_MPCSTATS

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes          Async      0 ELF$EVENT
 yes     yes           Std       3 XUD$UTS_DIFF_SEC
 yes     yes           Std       3 XUD$UTS_ADJ_25TH
         yes           Std       1 ELF$CONS_ERR
         yes          Async      0 ELF$EXIT
         yes           Std       0 ELT$INIT
 yes     yes           Std       0 AZC$INIT
         yes           Std       1 ELT$SETTHRESH
         yes           Std       1 ELT$THRESH
 yes     yes           Std       2 AZC$ACCTNG
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_MAUTO
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:48   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  EL_SECLOGSIZE                         B$ROS$
     B$DS3$                                B$TCB$                                B$JIT$
     EL_THRESHOLD                          M$ELF_DATA                            M$DO
     M$MPC                                 F$ACCTNG                              F$ERRLOG
     F$SECLOG                              F$COMAC                               F$CSCG
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:49   


        1        1        /*M* ELF - ERROR LOG FILE GHOST  */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DMR,PLM=5,IND=5,CTI=5,SDI=5,MCL=10,CSI=0,ECI=0 */
        8        8        ELF: PROC MAIN;

      8 11 000000   000000 700200 xent  ELF          TSX0  ! X66_MAUTO
        11 000001   001004 000000                    ZERO    516,0

        9        9        /*******************************************************************
       10       10         *                          INCLUDE FILES                          *
       11       11         *******************************************************************/
       12       12        %INCLUDE CP_6;
       13       93        %INCLUDE CP_6_SUBS;
       14      633        %INCLUDE B$ROSEG;
       15      696        %INCLUDE B_ERRORS_C;
       16     1823        %INCLUDE B_SEGIDS_C;
       17     2362        %INCLUDE B$JIT;
       18     2652        %INCLUDE F$DCB;
       19     2701        %INCLUDE I_SUBS_C;
       20     2725        %INCLUDE EL$TABLES;
       21     3048        %INCLUDE EL_MACRO_C;
       22     3217        %INCLUDE EL_DATA_C;
       23     3229        %INCLUDE EL_SUBS_C;
       24     3313        %INCLUDE N_FC_C;
       25     3350        %INCLUDE NI$TABLES;
       26     3566        %INCLUDE NI_DATA_C;
       27     3679        %INCLUDE OC_MESSHD_C;
       28     3732        %INCLUDE OC_SUBS_C;
       29     4463        %INCLUDE IT_SUBS_C;
       30     4730        %INCLUDE FM$CFU;
       31     4775        %INCLUDE ES_CNTRL_R;
       32     4787        %INCLUDE XUD_UTS_M;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:50   
       33     4869        /*******************************************************************
       34     4870         *                           ENTRY POINTS                          *
       35     4871         *******************************************************************/
       36     4872    1   DCL AZC$ACCTNG ENTRY(2) ALTRET;
       37     4873    1   DCL AZC$INIT ENTRY ALTRET;
       38     4874    1   DCL ELF$EXIT ENTRY ASYNC;
       39     4875    1   DCL ELF$EVENT ENTRY ASYNC;
       40     4876    1   DCL ELF$CONS_ERR ENTRY(1);
       41     4877    1   DCL ELT$THRESH ENTRY(1);
       42     4878    1   DCL ELT$INIT ENTRY;
       43     4879    1   DCL ELT$SETTHRESH ENTRY(1);
       44     4880        /*******************************************************************
       45     4881         *                            LOCAL SUBS                           *
       46     4882         *******************************************************************/
       47     4883        %SUB SECS_PER_MIN     = 60;
       48     4884        %SUB NEVER            = "WHILE('0'B)";
       49     4885        %SUB FOREVER          = "WHILE('1'B)";
       50     4886        %SUB SPECFILES        = 3/*SPECFILES*/;
       51     4887        /********************************************************************
       52     4888         *                              SYMDEFS                             *
       53     4889         ********************************************************************/
       54     4890        %EL$BUF (NAME=LOGBUF,STCLASS="STATIC SYMDEF");
       55     4893    1   DCL EL_NO_THRESHOLDING REMEMBER STATIC SYMDEF;
       56     4894    1   DCL NWIO_TYC BIT(36) ALIGNED STATIC SYMDEF;
       57     4895    1   DCL CGREAD_ERR      BIT(36) ALIGNED STATIC SYMDEF;
       58     4896    1   DCL CGREAD_STATE    UBIN WORD STATIC SYMDEF;
       59     4897             /* State of CSCG read: 0 = no read
       60     4898                                    1 = read pending
       61     4899                                    2 = read complete
       62     4900                                    3 = error on read */
       63     4901    1   DCL EL_ZAPFLG       UBIN WORD STATIC SYMDEF INIT(0);
       64     4902    1   DCL EL_SNAPFLG      BIT(1) ALIGNED STATIC SYMDEF INIT('0'B);
       65     4903    1   DCL EL_POLL_IN_PROGRESS BIT(1) ALIGNED STATIC SYMDEF INIT('0'B);
       66     4904        /*******************************************************************
       67     4905         *                              SYMREFS                            *
       68     4906         *******************************************************************/
       69     4907    1   DCL B$ROS$          PTR SYMREF;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:51   
       70     4908    1   DCL B$DS3$          PTR SYMREF;
       71     4909    1   DCL B$TCB$          PTR SYMREF;
       72     4910    1   DCL B$JIT$          PTR SYMREF;
       73     4911    1   DCL EL_THRESHOLD    BIT(1) ALIGNED SYMREF;
       74     4912        /*******************************************************************
       75     4913         *                           CONSTANT DATA                         *
       76     4914         *******************************************************************/
       77     4915    1   DCL EL_BADFILE      CHAR(0) CONSTANT INIT(
       78     4916    1       'ELF UNABLE TO OPEN FILE - RENAMED WITH ''-:BAD'' APPENDED');
       79     4917    1   DCL ES_BADFILE      CHAR(0) CONSTANT INIT(
       80     4918    1       'ELF UNABLE TO OPEN SECLOG FILE - RENAMED WITH ''-:BAD'' APPENDED');
       81     4919    1   DCL ERRLOG_BUSY     CHAR(0) CONSTANT INIT(
       82     4920    1       'ELF UNABLE TO OPEN FILE - BUSY');
       83     4921    1   DCL SECLOG_BUSY     CHAR(0) CONSTANT INIT(
       84     4922    1       'ELF UNABLE TO OPEN SECLOG FILE - BUSY');
       85     4923    1   DCL EL_EXCEED_SPACE CHAR(0) CONSTANT INIT(':SYSTAC disk space exceeded');
       86     4924    1   DCL ES_EXCEED_SPACE CHAR(0) CONSTANT INIT(':SYS disk space exceeded');
       87     4925    1   DCL ES_FORCED_TURNOVER CHAR(0) CONSTANT INIT(
       88     4926    1       ':SECLOG size limit reached - automatic turnover performed');
       89     4927    1   DCL TOOBIG          CHAR(0) CONSTANT INIT(
       90     4928    1       'You''re too big to be an elf!');
       91     4929        %FPT_READ (FPTN=FPT_READCSCG,
       92     4930                STCLASS=CONSTANT,
       93     4931                DCB=F$CSCG,
       94     4932                BUF=EL_TERM,
       95     4933                WAIT=NO,
       96     4934                EVENT=1);
       97     4973        %FPT_WRITE (FPTN=FPT_WRCSCGFI,
       98     4974                STCLASS=CONSTANT,
       99     4975                DCB=F$CSCG,
      100     4976                BUF=EL_FIBFR,
      101     4977                STATION=VLP_KEYINSTA);
      102     5008        %FPT_WRITE (FPTN=FPT_TOOBIG,
      103     5009                STCLASS=CONSTANT,
      104     5010                DCB=M$DO,
      105     5011                BUF=TOOBIG);
      106     5042        %FPT_EVENT (FPTN = FPT_EVENT,
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:52   
      107     5043                STCLASS=CONSTANT,
      108     5044                UENTRY=ELF$EVENT);
      109     5058        /*******************************************************************
      110     5059         *                           STATIC DATA                           *
      111     5060         *******************************************************************/
      112     5061    1   DCL 1 T             STATIC,
      113     5062    1            2 C        UBIN BYTE UNAL,
      114     5063    1            2 L        CHAR(25) UNAL;
      115     5064    1   DCL T$              PTR STATIC INIT(ADDR(T));
      116     5065    1   DCL RSLT(0:1)       UBIN STATIC;
      117     5066    1   DCL ERRCODE         BIT(36) ALIGNED STATIC;
      118     5067    1   DCL ERRBUF          CHAR(120) ALIGNED STATIC;
      119     5068    1   DCL EL_TERM         CHAR(140) ALIGNED STATIC;
      120     5069    1   DCL ELAN_CMD        CHAR(13) ALIGNED STATIC INIT('ELAN(REBUILD)');
      121     5070        %OC_MESSHD_W (NAME=EL_FIBFR,
      122     5071              STCLASS=STATIC,
      123     5072              ATR=M_SYS,
      124     5073              MSG=FILEIC_MSG#,
      125     5074              NPARMS=7);
      126     5087    1        2 * UBIN(9) UNAL INIT(4),          /* CODE                               */
      127     5088    1             2 * UBIN(9) UNAL INIT(4),     /* REASON                             */
      128     5089    1             2 * UBIN(9) UNAL INIT(4),     /* ACTION                             */
      129     5090    1             2 * UBIN(9) UNAL INIT(4),     /* SYSID                              */
      130     5091    1             2 * UBIN(9) UNAL INIT(6),     /* SN                                 */
      131     5092    1             2 * UBIN(9) UNAL INIT(8),     /* ACCT                               */
      132     5093    1             2 * UBIN(9) UNAL INIT(31),    /* NAME                               */
      133     5094    1             2 CODE UBIN UNAL,
      134     5095    1             2 REASON UBIN UNAL,
      135     5096    1             2 ACTION UBIN UNAL,
      136     5097    1             2 SISID UBIN UNAL,
      137     5098    1             2 SN CHAR(6) UNAL,
      138     5099    1             2 ACCT CHAR(8) UNAL,
      139     5100    1             2 NAM CHAR(31) UNAL;
      140     5101    1   DCL NAMELEN         UBIN STATIC;
      141     5102    1   DCL CURUTS          UBIN WORD STATIC;
      142     5103    1   DCL STATS_INTERVAL UBIN STATIC INIT(180000); /* 30 MINS */
      143     5104    1   DCL SQH$ PTR STATIC INIT(ADDR(NIL));
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:53   
      144     5105    1   DCL 1 SQHPTR REDEF SQH$,
      145     5106    1            2 OFFSET UBIN(18) UNAL,
      146     5107    1            2 * BIT(6) UNAL,
      147     5108    1            2 SEGID BIT(12) UNAL;
      148     5109    1   DCL DQH$ PTR STATIC INIT(ADDR(NIL));
      149     5110    1   DCL 1 DQHPTR REDEF DQH$,
      150     5111    1            2 OFFSET UBIN(18) UNAL,
      151     5112    1            2 * BIT(6) UNAL,
      152     5113    1            2 SEGID BIT(12) UNAL;
      153     5114    1   DCL DCT$            PTR STATIC INIT(ADDR(NIL));
      154     5115    1   DCL 1 DCTPTR        REDEF DCT$,
      155     5116    1            2 OFFSET   UBIN(18) UNAL,
      156     5117    1            2 *        BIT(6) UNAL,
      157     5118    1            2 SEGID    BIT(12) UNAL;
      158     5119    1   DCL TEMP$           PTR STATIC INIT(ADDR(NIL));
      159     5120    1   DCL 1 TEMPPTR       REDEF TEMP$,
      160     5121    1            2 OFFSET   UBIN(18) UNAL,
      161     5122    1            2 *        BIT(6) UNAL,
      162     5123    1            2 SEGID    BIT(12) UNAL;
      163     5124    1   DCL N$DCT$$         PTR STATIC INIT(ADDR(NIL));
      164     5125    1   DCL 1 N$DCT$PTR     REDEF N$DCT$$,
      165     5126    1            2 OFFSET   UBIN(18) UNAL,
      166     5127    1            2 *        BIT(6) UNAL,
      167     5128    1            2 SEGID    BIT(12) UNAL;
      168     5129    1   DCL 1 DEVBUF        STATIC DALIGNED,
      169     5130    1            2 DCWLIST(0:3) BIT(36) UNAL,
      170     5131    1            2 STATS(0:15) UBIN,
      171     5132    1            2 ZERO(0:299) UBIN;
      172     5133    1   DCL 1 DP_BUFINIT STATIC DALIGNED,
      173     5134    1            2 DCWLIST(0:3) BIT(36) INIT('260100720000'O,
      174     5135    1                                   '000004000010'O,
      175     5136    1                                   '160100700000'O,
      176     5137    1                                   '000014000010'O);
      177     5138    1   DCL 1 MT_BUFINIT STATIC DALIGNED,
      178     5139    1            2 DCWLIST(0:3) BIT(36) INIT('260100720000'O,
      179     5140    1                                   '000004000004'O,
      180     5141    1                                   '160100700000'O,
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:54   
      181     5142    1                                   '000014000004'O);
      182     5143    1   DCL 1 MDS_BUFINIT STATIC DALIGNED,
      183     5144    1            2 DCWLIST(0:3) BIT(36) INIT('160100700000'O,
      184     5145    1                                   '000004000013'O,
      185     5146    1                                   '000000000000'O,
      186     5147    1                                   '000000000000'O);
      187     5148    1   DCL 1 IPC_BUFINIT STATIC DALIGNED,
      188     5149    1            2 DCWLIST(0:3) BIT(36) INIT('700000724002'O,
      189     5150    1                                   '000004000001'O,
      190     5151    1                                   '060000704001'O,
      191     5152    1                                   '000005000042'O);
      192     5153    1   DCL 1 DAU_BUFINIT STATIC DALIGNED,
      193     5154    1            2 DCWLIST(0:3) BIT(36) INIT('160000700000'O,
      194     5155    1                                   '000004000472'O,
      195     5156    1                                   '000000000000'O,
      196     5157    1                                   '000000000000'O);
      197     5158        %EL$MPCSTATS (STCLASS=STATIC);
      198     5161        %EL$DEVSTATS (STCLASS=STATIC);
      199     5164    1   DCL 1 FILETAB(0:SPECFILES) STATIC,
      200     5165    1            2 FPT$     PTR INIT(ADDR(NIL), /* Unused                             */
      201     5166    1                            ADDR(OPERLOG), /* :ERRLOG                            */
      202     5167    1                                ADDR(NIL), /* Reserved for ACCTNG                */
      203     5168    1                           ADDR(OPSECLOG)),/* :SECLOG                            */
      204     5169    1            2 DCB#     UBIN INIT(0,DCBNUM(F$ERRLOG),0,DCBNUM(F$SECLOG));
      205     5170    1   DCL SECLOGSIZE$     PTR STATIC INIT(ADDR(NIL));
      206     5171    1   DCL 1 SECLOGSIZEPTR REDEF SECLOGSIZE$,
      207     5172    1            2 OFFSET   UBIN(18) UNAL,
      208     5173    1            2 *        BIT(6) UNAL,
      209     5174    1            2 SEGID    BIT(12) UNAL;
      210     5175    1   DCL 1 VLP_ERRLOG    ALIGNED STATIC,
      211     5176    1            2 L        UBIN BYTE UNAL INIT(15),
      212     5177    1            2 ERRLOG   CHAR(7) UNAL INIT(':ERRLOG'),
      213     5178    1            2 YY       CHAR(2) UNAL INIT('00'),
      214     5179    1            2 D        CHAR(6) UNAL INIT('??????');
      215     5180    1   DCL 1 VLP_SECLOG    ALIGNED STATIC,
      216     5181    1            2 L        UBIN BYTE UNAL INIT(15),
      217     5182    1            2 SECLOG   CHAR(7) UNAL INIT(':SECLOG'),
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:55   
      218     5183    1            2 YY       CHAR(2) UNAL INIT('00'),
      219     5184    1            2 D        CHAR(6) UNAL INIT('??????');
      220     5185    1   DCL 1 MISCNAME      STATIC,
      221     5186    1            2 CNT      UBIN BYTE UNAL INIT(6),
      222     5187    1            2 ELF      CHAR(4) INIT(':ELF'),
      223     5188    1            2 N        CHAR(2) INIT('NN');
      224     5189    1   DCL GET_DCB#        UBIN HALF STATIC UNAL;
      225     5190    1   DCL 1 LOSTERR       STATIC ALIGNED,
      226     5191    1            2 TYPE     UBIN(9) UNAL INIT(EL_LOST),
      227     5192    1            2 *        BIT(9) INIT('0'B),
      228     5193    1            2 SIZE     UBIN(9) UNAL INIT(5),
      229     5194    1            2 UTS      UBIN(36) UNAL INIT(0),
      230     5195    1            2 CNTR     UBIN(9) UNAL INIT(0),
      231     5196    1            2 SITE_ID  CHAR(6) UNAL INIT(' '),
      232     5197    1            2 *        BIT(18) UNAL INIT('0'B),
      233     5198    1            2 LOST     UBIN(18) UNAL INIT(0),
      234     5199    1            2 FILE     UBIN(18) UNAL INIT(1),
      235     5200    1            2 COUNT    UBIN INIT(0);       /* count of records lost              */
      236     5201    1   DCL ES_SEQUENCE_NUM UBIN HALF ALIGNED STATIC INIT(0);
      237     5202                                           /* Security log record sequence number     */
      238     5203    1   DCL EL_DEVSTATS BIT(1) ALIGNED STATIC SYMDEF INIT('1'B);
      239     5204    1   DCL EL_MPCSTATS BIT(1) ALIGNED STATIC SYMDEF INIT('1'B);
      240     5205        %FPT_WAIT (UNITS=60);
      241     5219        %FPT_TIME (FPTN=EL_TIME,SOURCE=UTS,DEST=ANS,DATE="VLP_ERRLOG.D");
      242     5238        %FPT_TIME (FPTN=ELL_TIME,SOURCE=CLOCK,DEST=ANS,DATE="VLP_ERRLOG.D");
      243     5257        %FPT_TIME (FPTN=ES_TIME,SOURCE=UTS,DEST=ANS,DATE="VLP_SECLOG.D");
      244     5276        %FPT_KEYIN (RESULTS=RSLT);
      245     5295        %FPT_WRITE (FPTN=TELL_KEYIN,
      246     5296                DCB=F$CSCG,
      247     5297                BUF=ZAP_MESSHD,
      248     5298                STATION=VLP_KEYINSTA);
      249     5329        %OC_MESSHD_W (NAME=ZAP_MESSHD,FUNC=ZAP,DELIM=";");
      250     5342        %VLP_STATION (FPTN=VLP_KEYINSTA,STATION='KEYIN');
      251     5369        %FPT_SAD (FPTN=SEE_TIGR,
      252     5370                USERSID=%SPCL1SID,
      253     5371                MONSID=%TIGRSID);
      254     5386        %FPT_SAD (FPTN=SEE_CFUS,
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:56   
      255     5387                USERSID=%SPCL2SID,
      256     5388                MONSID=%DS1SID);
      257     5403        %FPT_SAD (FPTN=SEE_MONIS,
      258     5404                USERSID=%SPCL3SID,
      259     5405                MONSID=%ISSID);
      260     5420        %FPT_MONINFO (MONPTRS=MONPTRS);
      261     5435        %VLR_MONPTRS (FPTN=MONPTRS);
      262     5450        %FPT_IOQ (FPTN=DEV_IOQ,BPMIR=YES,
      263     5451                DCB=M$MPC,
      264     5452                BUF=DEVBUF,
      265     5453                FC=%N_DCWLIST);
      266     5471        %FPT_TIME (FPTN=CUR_UTS,
      267     5472                SOURCE=CLOCK,
      268     5473                TSTAMP=CURUTS,
      269     5474                DEST=UTS);
      270     5493        %FPT_WRSYSLOG (FPTN=WRITE_DEVSTATS,
      271     5494                ENTRY=EL$DEVSTATS,
      272     5495                TYPE=EL_DEVSTAT,
      273     5496                SIZE="SIZEW(EL$DEVSTATS)");
      274     5511        %FPT_WRSYSLOG (FPTN=WRITE_MPCSTATS,
      275     5512                ENTRY=EL$MPCSTATS,
      276     5513                TYPE=EL_MPCSTAT,
      277     5514                SIZE="SIZEW(EL$MPCSTATS)");
      278     5529        %FPT_ERRMSG (CODE=ERRCODE,BUF=ERRBUF,SUBMESS=YES,OUTDCB1=M$DO);
      279     5556        %FPT_XCON (UENTRY=ELF$EXIT);
      280     5570        %FPT_RDSYSLOG (BUF=LOGBUF);
      281     5583        %FPT_OPEN (FPTN=OPERLOG,
      282     5584                NAME=VLP_ERRLOG,
      283     5585                ACCT=VLP_SYSTAC,
      284     5586                DCB=F$ERRLOG,
      285     5587                ACSVEH=VLP_ELAN_,
      286     5588                EXIST=OLDFILE,
      287     5589                CTG=YES,
      288     5590                SHARE=IN,
      289     5591                FUN=CREATE,
      290     5592                XTNSIZE=20,
      291     5593                IXTNSIZE=20,
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:57   
      292     5594                ASN=FILE,
      293     5595                ORG=INDEXED,
      294     5596                ACS=DIRECT,
      295     5597                KEYX=3,
      296     5598                KEYL=5,
      297     5599                DISP=NAMED);
      298     5708        %FPT_OPEN (FPTN=OPSECLOG,
      299     5709                NAME=VLP_SECLOG,
      300     5710                ACCT=VLP_SYSACCT,
      301     5711                DCB=F$SECLOG,
      302     5712                EXIST=OLDFILE,
      303     5713                CTG=YES,
      304     5714                SHARE=IN,
      305     5715                FUN=CREATE,
      306     5716                XTNSIZE=20,
      307     5717                IXTNSIZE=20,
      308     5718                ASN=FILE,
      309     5719                ORG=INDEXED,
      310     5720                ACS=DIRECT,
      311     5721                KEYX=3,
      312     5722                KEYL=5,
      313     5723                DISP=NAMED);
      314     5832        %VLP_ACCT (FPTN=VLP_SYSACCT,
      315     5833                ACCT=':SYS');
      316     5846        %VLP_ACCT (FPTN=VLP_SYSTAC,
      317     5847                ACCT=':SYSTAC');
      318     5860       %FPT_TIME (FPTN=ERR_TIME, SOURCE=CLOCK, DEST=ANS, TIME=ERR_NAME.T, DATE=ERR_NAME.D);
      319     5879    1   DCL 1 ERR_NAME STATIC,
      320     5880    1            2 * UBIN BYTE UNAL INIT(23),
      321     5881    1            2 FILE CHAR(7),
      322     5882    1            2 YY CHAR(2),
      323     5883    1            2 D CHAR(6),
      324     5884    1            2 T CHAR(8);
      325     5885        %FPT_CLOSE (FPTN=ERR_CLOSE,DISP=SAVE, CHGATT=YES, NAME=ERR_NAME,RELG=YES);
      326     5927    1   DCL EL_RENAME_ON_ERR BIT(1) ALIGNED;
      327     5928        %FPT_OPEN  (FPTN=OPACCTNG,
      328     5929                    NAME=VLP_ACCTNG,
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:58   
      329     5930                    ACCT=VLP_SYSACCT,
      330     5931                    DCB=F$ACCTNG,
      331     5932                    FUN=UPDATE,
      332     5933                    ASN=FILE,
      333     5934                    ORG=CONSEC,
      334     5935                    ACS=JRNL);
      335     6044        %VLP_NAME (FPTN=VLP_ACCTNG,
      336     6045                   NAME=':ACCTLG');
      337     6072        %VLP_ATTR (FPTN=VLP_ELAN_);
      338     6086        %VLP_ACSVEH (READ=YES,
      339     6087                VEHICLE='ELAN?',
      340     6088                LAST=";");
      341     6105        %FPT_OPEN (FPTN=OPCOMAC,
      342     6106                NAME=VLP_COMAC,
      343     6107                ACCT=VLP_SYSACCT,
      344     6108                DCB=F$COMAC,
      345     6109                ASN=FILE,
      346     6110                ORG=KEYED,
      347     6111                ACS=DIRECT,
      348     6112                DISP=NAMED,
      349     6113                FUN=CREATE,
      350     6114                EXIST=NEWFILE,
      351     6115                SHARE=ALL,
      352     6116                CTG=YES);
      353     6225        %VLP_NAME (FPTN=VLP_COMAC,
      354     6226                NAME=':COMAC');
      355     6253        %FPT_OPEN (FPTN=OPCSCG,
      356     6254                NAME=VLP_CSCG,
      357     6255                ACCT=VLP_SYSACCT,
      358     6256                DCB=F$CSCG,
      359     6257                ASN=COMGROUP,
      360     6258                FUN=UPDATE,
      361     6259                SETSTA=VLP_ELFNM);
      362     6368        %VLP_NAME (FPTN=VLP_CSCG,
      363     6369                NAME='CSCG');
      364     6396        %VLP_SETSTA (FPTN=VLP_ELFNM,
      365     6397                WAS=YES,
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:59   
      366     6398                MYSTATION='ELF',
      367     6399                OSTATION='KEYIN');
      368     6427        %FPT_OPEN (FPTN=OPMISC,
      369     6428                NAME=MISCNAME,
      370     6429                ACCT=VLP_SYSACCT,
      371     6430                EXIST=OLDFILE,
      372     6431                CTG=YES,
      373     6432                SHARE=IN,
      374     6433                FUN=CREATE,
      375     6434                ASN=FILE,
      376     6435                ORG=CONSEC,
      377     6436                DISP=NAMED);
      378     6545        %FPT_GJOB (FPTN=START_ELAN,
      379     6546                SLEAZE=YES,
      380     6547                CCBUF=ELAN_CMD,
      381     6548                NAME=VLP_ELAN);
      382     6565        %VLP_NAME (FPTN=VLP_ELAN,
      383     6566                NAME='ELAN');
      384     6593        %FPT_MONINFO (FPTN=BOOTFLAG,
      385     6594                MONINFO=MONINFO);
      386     6609        %VLR_MONINFO (FPTN=MONINFO);
      387     6627        %FPT_GETDCB (DCBNUM=GET_DCB#);
      388     6642        %FPT_RELDCB;
      389     6656        %FPT_TRUNC;
      390     6670        %FPT_WRITE(WAIT=YES,
      391     6671                ONEWKEY=YES);
      392     6702        %FPT_CLOSE (DISP=SAVE);
      393     6744        %FPT_OPEN (FPTN=OPEN_ELF_DATA_UPD,
      394     6745                DCB=M$ELF_DATA,
      395     6746                NAME=VLP_ELF_DATA,
      396     6747                ACCT=VLP_SYSACCT,
      397     6748                FUN=UPDATE,
      398     6749                SHARE=IN,
      399     6750                ORG=RANDOM,
      400     6751                ACS=DS3,
      401     6752                ASN=FILE,
      402     6753                CTG=YES);
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:60   
      403     6862        %VLP_NAME (FPTN=VLP_ELF_DATA,
      404     6863                NAME='ELF_DATA');
      405     6890        /*******************************************************************
      406     6891         *                               AUTO                              *
      407     6892         *******************************************************************/
      408     6893    1   DCL P$             PTR;
      409     6894    1   DCL F$ERRLOG$      PTR;
      410     6895    1   DCL F$SECLOG$      PTR;
      411     6896    1   DCL PTR$           PTR;
      412     6897    1   DCL STATS$         PTR;
      413     6898    1   DCL IPC$           PTR;
      414     6899    1   DCL DEV$           PTR;
      415     6900    1   DCL MPC$           PTR;
      416     6901    1   DCL I$             PTR;
      417     6902    1   DCL TP$            PTR;
      418     6903    1   DCL BUF_TEMP$      PTR;
      419     6904    1   DCL EL_LASTTIME    UBIN(36);
      420     6905    1   DCL ES_LASTTIME    UBIN(36);
      421     6906    1   DCL EL_LASTDAY     SBIN;
      422     6907    1   DCL ES_LASTDAY     SBIN;
      423     6908    1   DCL EL_NXTCNTR     UBIN(36);
      424     6909    1   DCL ES_NXTCNTR     UBIN(36);
      425     6910    1   DCL SIZE4          UBIN(36);
      426     6911    1   DCL TEMP_VEC       BIT(72) DALIGNED;
      427     6912    1   DCL 1 TEMP_VEC1    REDEF TEMP_VEC,
      428     6913    1            2 BOUND   UBIN(20) UNAL,
      429     6914    1            2 *       BIT(16),
      430     6915    1            2 PTR$    PTR;
      431     6916    1   DCL NXTWD          UBIN(36);
      432     6917    1   DCL TEMP           UBIN(36);
      433     6918    1   DCL 1 TEMP_WORD UBIN;
      434     6919    1   DCL 1 TEMP_HALF(0:1) REDEF TEMP_WORD UBIN(18) UNAL;
      435     6920    1   DCL F#             UBIN;
      436     6921    1   DCL 1 RECVEC       DALIGNED,
      437     6922    1            2 BOUND   UBIN(20) UNAL,
      438     6923    1            2 *       BIT(16),
      439     6924    1            2 PTR$    PTR;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:61   
      440     6925    1   DCL SUSPENDED      BIT(1) ALIGNED;
      441     6926    1   DCL FIRST_TIME     BIT(1) ALIGNED;
      442     6927    1   DCL MAXDCTX        SBIN WORD;
      443     6928    1   DCL DCTX           UBIN WORD;
      444     6929    1   DCL SUBSYSTEM_DCTX UBIN WORD;
      445     6930    1   DCL MPC_NUM UBIN;
      446     6931    1   DCL LAST_DEVSTATS  UBIN WORD;
      447     6932    1   DCL NUM_CNTRS SBIN;
      448     6933    1   DCL 1 ASCII_WORD UBIN;
      449     6934    1   DCL 1 ASCII_FMT(0:3) REDEF ASCII_WORD,
      450     6935    1            2 * UBIN(1) UNAL,
      451     6936    1            2 BYT UBIN(8) UNAL;
      452     6937    1   DCL 1 ASCII_HF_WD(0:1) REDEF ASCII_WORD UBIN(18) UNAL;
      453     6938    1   DCL IOQ_FLAG       BIT(1) ALIGNED;
      454     6939    1   DCL MPC_BUSY       BIT(1) ALIGNED;
      455     6940    1   DCL I              UBIN;
      456     6941    1   DCL J              UBIN;
      457     6942    1   DCL K              UBIN;
      458     6943    1   DCL MDS_STATS_WORD UBIN;
      459     6944    1   DCL MDS_STATS_HFWD(0:1) REDEF MDS_STATS_WORD UBIN(18) UNAL;
      460     6945    1   DCL TUC_BUF        CHAR(8);
      461     6946    1   DCL DC_BUF         CHAR(8);
      462     6947    1   DCL MPCPTR_BUF     CHAR(4);
      463     6948    1   DCL M500_BUF1      CHAR(4);
      464     6949    1   DCL M500_BUF2      CHAR(4);
      465     6950    1   DCL FW_TYPE  CHAR(4) UNAL;
      466     6951    1   DCL MPC_NAME CHAR(8) UNAL;
      467     6952    1   DCL TEMP_BUF       CHAR(2);
      468     6953    1   DCL BUF_TEMP(0:1)  BIT(8);
      469     6954    1   DCL MPCSTATS_BUF   CHAR(12);
      470     6955    1   DCL 1 MPCSTATS_BF(0:11) REDEF MPCSTATS_BUF,
      471     6956    1            2 *       BIT(1),
      472     6957    1            2 B       BIT(8);
      473     6958    1   DCL TC_MPCPTR_ADDR UBIN WORD;
      474     6959    1   DCL TC_TBL_ADDR    UBIN WORD;
      475     6960    1   DCL DEVINDX        UBIN;
      476     6961    1   DCL NUMDEVS        SBIN;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:62   
      477     6962    1   DCL DEVNAME(0:200) CHAR(8);
      478     6963    1   DCL DCBTAB(0:99)   UBIN BYTE UNAL;
      479     6964    1   DCL CFU$           PTR;
      480     6965    1   DCL 1 CFUPTR       REDEF CFU$,
      481     6966    1            2 OFFSET  UBIN(18) UNAL,
      482     6967    1            2 *       BIT(6) UNAL,
      483     6968    1            2 SEGID   BIT(12) UNAL;
      484     6969    1   DCL OPEN$ PTR;
      485     6970    1   DCL TEMP_UTS UBIN;
      486     6971        /*******************************************************************
      487     6972         *                               DCBS                              *
      488     6973         *******************************************************************/
      489     6974    1   DCL M$ELF_DATA DCB;
      490     6975    1   DCL M$DO       DCB;
      491     6976    1   DCL M$MPC      DCB;
      492     6977    1   DCL F$ACCTNG DCB;
      493     6978    1   DCL F$ERRLOG   DCB;
      494     6979    1   DCL F$SECLOG   DCB;
      495     6980    1   DCL F$COMAC    DCB;
      496     6981    1   DCL F$CSCG     DCB;
      497     6982        /*******************************************************************
      498     6983         *                          BASED STORAGE                          *
      499     6984         *******************************************************************/
      500     6985        %B$TCB;
      501     6988        %B$ALT;
      502     6996        %EL$TERM;
      503     7002    1   DCL 1 STATS_CNTRS(0:15) UBIN(18) BASED(STATS$) UNAL;
      504     7003    1   DCL 1 MDS_STATS_CNTRS(0:10) UBIN BASED(STATS$) ALIGNED;
      505     7004    1   DCL 1 IPC_STATS_CNTRS(0:33) UBIN BASED(STATS$) ALIGNED;
      506     7005    1   DCL 1 IPC_IMU_TRANSACTIONS BASED(IPC$) ALIGNED,
      507     7006    1            2 LO_ORDER(0:3) UBIN(18) UNAL,
      508     7007    1            2 HI_ORDER(0:3) UBIN(18) UNAL;
      509     7008    1   DCL 1 IPC_IMU_WD_TRANSFERS BASED(IPC$) ALIGNED,
      510     7009    1            2 LO_ORDER(0:3) UBIN(18) UNAL,
      511     7010    1            2 HI_ORDER(0:3) UBIN(18) UNAL;
      512     7011    1   DCL MOVEBASE        CHAR(SIZE4) BASED;
      513     7012    1   DCL 1 TEXTCBASE     BASED,
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:63   
      514     7013    1            2 L        UBIN BYTE UNAL,
      515     7014    1            2 C        CHAR(TEXTCBASE.L) UNAL;
      516     7015    1   DCL 1 TEMP_NAME     BASED(T$),
      517     7016    1            2 L        UBIN BYTE UNAL,
      518     7017    1            2 C        CHAR(TEMP_NAME.L) UNAL;
      519     7018    1   DCL MOVENAMELEN     CHAR(NAMELEN) BASED;
      520     7019    1   DCL NI$DCT$ (0:0)   PTR BASED(N$DCT$$);
      521     7020    1   DCL IOM$(0:7)       PTR BASED(B$DS3$);
      522     7021    1   DCL 1 IOM           BASED(I$) ALIGNED,
      523     7022    1            2 ERR_RATE UBIN,
      524     7023    1            2 NUM_ENTRIES UBIN HALF UNAL,
      525     7024    1            2 THRESH   UBIN HALF UNAL,
      526     7025    1            2 THRESH_RATE UBIN,
      527     7026    1            2 CHAN$    PTR;
      528     7027    1   DCL 1 CHAN(0:0)     BASED ALIGNED,
      529     7028    1            2 ERR_RATE UBIN,
      530     7029    1            2 NUM_ENTRIES UBIN HALF UNAL,
      531     7030    1            2 THRESH   UBIN HALF UNAL,
      532     7031    1            2 THRESH_RATE UBIN,
      533     7032    1            2 DEV$     PTR,
      534     7033    1            2 MPC$     PTR;
      535     7034    1   DCL 1 MPC           BASED(MPC$) ALIGNED,
      536     7035    1            2 ERR_RATE UBIN,
      537     7036    1            2 NUM_ENTRIES UBIN HALF UNAL,
      538     7037    1            2 THRESH   UBIN HALF UNAL,
      539     7038    1            2 THRESH_RATE UBIN,
      540     7039    1            2 DEVNM    CHAR(8);
      541     7040    1   DCL 1 DEV           BASED(DEV$) ALIGNED,
      542     7041    1            2 ERR_RATE UBIN,
      543     7042    1            2 NUM_ENTRIES UBIN HALF UNAL,
      544     7043    1            2 THRESH   UBIN HALF UNAL,
      545     7044    1            2 THRESH_RATE UBIN,
      546     7045    1            2 DEVNM    CHAR(8),
      547     7046    1            2 DEVNUM   UBIN,
      548     7047    1            2 STATS(0:9) UBIN;
      549     7048    1   DCL 1 TEMP_BF(0:1)  BASED(TP$) UNAL,
      550     7049    1            2 *        BIT(1),
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:64   
      551     7050    1            2 B        BIT(8);
      552     7051    1   DCL BF_TEMP         BIT(16) BASED(BUF_TEMP$) UNAL;
      553     7052    1   DCL 1 EXTST_BYTE7 UBIN(8) UNAL;
      554     7053    1   DCL 1 SENSE_BYTE7 REDEF EXTST_BYTE7,
      555     7054    1            2 FMT UBIN(4) UNAL,
      556     7055    1            2 CHAN UBIN(4) UNAL;
      557     7056        %EL$ENTRY  (NAME=HDR,INFOSZ=SIZE4,STCLASS="BASED(P$)");
      558     7060        %EL$FILERR (STCLASS="BASED(TEMP$)");
      559     7067        %EL$IOERR(STCLASS="BASED(TEMP$)");
      560     7077        %NI$DCT    (NAME=DCT,STCLASS="BASED(DCT$)");
      561     7125        %NI$SQH    (NAME=SQH, STCLASS="BASED(SQH$)");
      562     7138        %NI$DQH    (NAME=DQH, STCLASS="BASED(DQH$)");
      563     7161        %FPT_OPEN  (FPTN=FPTBASE,STCLASS="BASED DALIGNED");
      564     7270        %FM$CFU;
      565     7276    1   DCL SECLOGSIZE      UBIN WORD BASED(SECLOGSIZE$);
      566     7277        %XUD$UTS_ENTRIES;
      567     7309        %XUD_UTS_EQU;
      568     7320        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:65   
      569     7321    2        IF B$JIT.MODE ~= %M_GHOST# THEN DO;

   7321 11 000002   000000 470400 xsym               LDP0    B$JIT$
        11 000003   000000 236100                    LDQ     0,,PR0
        11 000004   740000 376003                    ANQ     -16384,DU
        11 000005   100000 116003                    CMPQ    32768,DU
        11 000006   000014 600000 11                 TZE     s:7325

      570     7322    2             CALL M$WRITE(FPT_TOOBIG);

   7322 11 000007   000156 630400 2                  EPPR0   FPT_TOOBIG
        11 000010   040001 713400                    CLIMB   write
        11 000011   401400 401760                    pmme    nvectors=4

      571     7323    2             CALL M$EXIT;

   7323 11 000012   000001 713400                    CLIMB   exit
        11 000013   000000 401760                    pmme    nvectors=0

      572     7324    2           END;

      573     7325    1        EL_SNAPFLG = '0'B;                 /* RESET FLAG */

   7325 11 000014   002006 450000 1                  STZ     EL_SNAPFLG

      574     7326    1        TP$ = ADDR(TEMP_BUF);

   7326 11 000015   200067 630500                    EPPR0   TEMP_BUF,,AUTO
        11 000016   200015 450500                    STP0    TP$,,AUTO

      575     7327    1        BUF_TEMP$ = ADDR(BUF_TEMP);

   7327 11 000017   200070 631500                    EPPR1   BUF_TEMP,,AUTO
        11 000020   200016 451500                    STP1    BUF_TEMP$,,AUTO

      576     7328    1        CALL M$MONINFO(BOOTFLAG);

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:66   
   7328 11 000021   004226 630400 1                  EPPR0   BOOTFLAG
        11 000022   020023 713400                    CLIMB   8211
        11 000023   402400 401760                    pmme    nvectors=6

      577     7329    1        REMEMBER NO_THRESH IN EL_NO_THRESHOLDING;

   7329 11 000024   000027 635000 11                 EAA     NO_THRESH
        11 000025   002000 452400 1                  STP2    EL_NO_THRESHOLDING
        11 000026   002001 755000 1                  STA     EL_NO_THRESHOLDING+1

   7327 11 000027                       NO_THRESH    null
      578     7330    1   NO_THRESH: ;
      579     7331    1        CALL ELT$INIT;

   7331 11 000027   000002 631400 xsym               EPPR1   B_VECTNIL+2
        11 000030   000000 701000 xent               TSX1    ELT$INIT
        11 000031   000000 011000                    NOP     0

      580     7332    1        CALL STARTUP;

   7332 11 000032   000163 701000 11                 TSX1    STARTUP
        11 000033   000000 011000                    NOP     0

      581     7333    1        CALL MOVETOFILE;

   7333 11 000034   000425 701000 11                 TSX1    MOVETOFILE
        11 000035   000000 011000                    NOP     0

      582     7334    1        CALL M$TIME(CUR_UTS);

   7334 11 000036   003242 630400 1                  EPPR0   CUR_UTS
        11 000037   020004 713400                    CLIMB   8196
        11 000040   402000 401760                    pmme    nvectors=5

      583     7335    1        CALL XUD$UTS_DIFF_SEC(LAST_DEVSTATS,CURUTS,0);

   7335 11 000041   000000 236000 12                 LDQ     0
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:67   
        11 000042   201002 756100                    STQ     I+4,,AUTO
        11 000043   000001 236000 12                 LDQ     1
        11 000044   201001 756100                    STQ     I+3,,AUTO
        11 000045   200044 630500                    EPPR0   LAST_DEVSTATS,,AUTO
        11 000046   201000 450500                    STP0    I+2,,AUTO
        11 000047   201000 630500                    EPPR0   I+2,,AUTO
        11 000050   000021 631400 xsym               EPPR1   B_VECTNIL+17
        11 000051   000000 701000 xent               TSX1    XUD$UTS_DIFF_SEC
        11 000052   000000 011000                    NOP     0

      584     7336    1        LAST_DEVSTATS = LAST_DEVSTATS/1800;

   7336 11 000053   200044 236100                    LDQ     LAST_DEVSTATS,,AUTO
        11 000054   000001 772000                    QRL     1
        11 000055   001604 506007                    DIV     900,DL
        11 000056   200044 756100                    STQ     LAST_DEVSTATS,,AUTO

      585     7337    1        CALL XUD$UTS_ADJ_25TH(LAST_DEVSTATS,0,LAST_DEVSTATS*30*%UTS_25TH_MIN#);

   7337 11 000057   127710 402007                    MPY     45000,DL
        11 000060   201000 756100                    STQ     I+2,,AUTO
        11 000061   201000 630500                    EPPR0   I+2,,AUTO
        11 000062   201003 450500                    STP0    I+5,,AUTO
        11 000063   000000 236000 12                 LDQ     0
        11 000064   201002 756100                    STQ     I+4,,AUTO
        11 000065   200044 631500                    EPPR1   LAST_DEVSTATS,,AUTO
        11 000066   201001 451500                    STP1    I+3,,AUTO
        11 000067   201001 630500                    EPPR0   I+3,,AUTO
        11 000070   000021 631400 xsym               EPPR1   B_VECTNIL+17
        11 000071   000000 701000 xent               TSX1    XUD$UTS_ADJ_25TH
        11 000072   000000 011000                    NOP     0

      586     7338        /* MAIN LOOP */
      587     7339    2        DO FOREVER;

      588     7340    2             CALL SLEEP;

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:68   
   7340 11 000073   000363 701000 11                 TSX1    SLEEP
        11 000074   000000 011000                    NOP     0

      589     7341    2             CALL MOVETOFILE;

   7341 11 000075   000425 701000 11                 TSX1    MOVETOFILE
        11 000076   000000 011000                    NOP     0

      590     7342    2             CALL M$TIME(CUR_UTS);

   7342 11 000077   003242 630400 1                  EPPR0   CUR_UTS
        11 000100   020004 713400                    CLIMB   8196
        11 000101   402000 401760                    pmme    nvectors=5

      591     7343    2             CALL XUD$UTS_DIFF_SEC(TEMP_UTS,CURUTS,0);

   7343 11 000102   000000 236000 12                 LDQ     0
        11 000103   201002 756100                    STQ     I+4,,AUTO
        11 000104   000001 236000 12                 LDQ     1
        11 000105   201001 756100                    STQ     I+3,,AUTO
        11 000106   200755 630500                    EPPR0   TEMP_UTS,,AUTO
        11 000107   201000 450500                    STP0    I+2,,AUTO
        11 000110   201000 630500                    EPPR0   I+2,,AUTO
        11 000111   000021 631400 xsym               EPPR1   B_VECTNIL+17
        11 000112   000000 701000 xent               TSX1    XUD$UTS_DIFF_SEC
        11 000113   000000 011000                    NOP     0

      592     7344    2             TEMP_UTS = TEMP_UTS/1800;

   7344 11 000114   200755 236100                    LDQ     TEMP_UTS,,AUTO
        11 000115   000001 772000                    QRL     1
        11 000116   001604 506007                    DIV     900,DL
        11 000117   200755 756100                    STQ     TEMP_UTS,,AUTO

      593     7345    2             CALL XUD$UTS_ADJ_25TH(TEMP_UTS,0,TEMP_UTS*30*%UTS_25TH_MIN#);

   7345 11 000120   127710 402007                    MPY     45000,DL
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:69   
        11 000121   201000 756100                    STQ     I+2,,AUTO
        11 000122   201000 630500                    EPPR0   I+2,,AUTO
        11 000123   201003 450500                    STP0    I+5,,AUTO
        11 000124   000000 236000 12                 LDQ     0
        11 000125   201002 756100                    STQ     I+4,,AUTO
        11 000126   200755 631500                    EPPR1   TEMP_UTS,,AUTO
        11 000127   201001 451500                    STP1    I+3,,AUTO
        11 000130   201001 630500                    EPPR0   I+3,,AUTO
        11 000131   000021 631400 xsym               EPPR1   B_VECTNIL+17
        11 000132   000000 701000 xent               TSX1    XUD$UTS_ADJ_25TH
        11 000133   000000 011000                    NOP     0

      594     7346    2             IF TEMP_UTS ~= LAST_DEVSTATS

   7346 11 000134   200755 236100                    LDQ     TEMP_UTS,,AUTO
        11 000135   200044 116100                    CMPQ    LAST_DEVSTATS,,AUTO
        11 000136   000141 600000 11                 TZE     s:7348

      595     7347    2             THEN CALL PROCESS_STATISTICS;

   7347 11 000137   002212 701000 11                 TSX1    PROCESS_STATISTICS
        11 000140   000000 011000                    NOP     0

      596     7348    3             DO CASE(CGREAD_STATE);

   7348 11 000141   002004 235000 1                  LDA     CGREAD_STATE
        11 000142   000004 115007                    CMPA    4,DL
        11 000143   000145 602005 11                 TNC     s:7348+4,AL
        11 000144   000073 710000 11                 TRA     s:7340
        11 000145   000162 710000 11                 TRA     s:7356
        11 000146   000162 710000 11                 TRA     s:7356
        11 000147   000151 710000 11                 TRA     s:7350
        11 000150   000155 710000 11                 TRA     s:7353

      597     7349    3             CASE(2);                      /* read complete                      */

      598     7350    3                CGREAD_STATE = 0;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:70   

   7350 11 000151   002004 450000 1                  STZ     CGREAD_STATE

      599     7351    3                CALL KEYIN_EVENT;

   7351 11 000152   001410 701000 11                 TSX1    KEYIN_EVENT
        11 000153   000000 011000                    NOP     0
        11 000154   000073 710000 11                 TRA     s:7340

      600     7352    3             CASE(3);                      /* error on READ                      */

      601     7353    3                CGREAD_STATE = 0;

   7353 11 000155   002004 450000 1                  STZ     CGREAD_STATE

      602     7354    3                CALL ELF$CONS_ERR(CGREAD_ERR);

   7354 11 000156   000002 630400 12                 EPPR0   2
        11 000157   000017 631400 xsym               EPPR1   B_VECTNIL+15
        11 000160   000000 701000 xent               TSX1    ELF$CONS_ERR
        11 000161   000000 011000                    NOP     0

      603     7355    3             END;

      604     7356    2           END;

   7356 11 000162   000073 710000 11                 TRA     s:7340

      605     7357        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:71   
      606     7358    1   STARTUP: PROC;

   7358 11 000163   200760 741300       STARTUP      STX1  ! EXTST_BYTE7+2,,AUTO

      607     7359    2        F$ERRLOG$=DCBADDR(DCBNUM(F$ERRLOG));

   7359 11 000164   000000 236007 xsym               LDQ     F$ERRLOG,DL
        11 000165   000003 470400 12                 LDP0    3
        11 000166   000000 471500                    LDP1    0,,PR0
        11 000167   100000 236106                    LDQ     0,QL,PR1
        11 000170   200005 756100                    STQ     F$ERRLOG$,,AUTO

      608     7360    2        F$SECLOG$=DCBADDR(DCBNUM(F$SECLOG));

   7360 11 000171   000000 236007 xsym               LDQ     F$SECLOG,DL
        11 000172   100000 236106                    LDQ     0,QL,PR1
        11 000173   200006 756100                    STQ     F$SECLOG$,,AUTO

      609     7361    2        CGREAD_STATE = 0;                  /* no read                            */

   7361 11 000174   002004 450000 1                  STZ     CGREAD_STATE

      610     7362    2        EL_LASTTIME=0;

   7362 11 000175   200017 450100                    STZ     EL_LASTTIME,,AUTO

      611     7363    2        ES_LASTTIME=0;

   7363 11 000176   200020 450100                    STZ     ES_LASTTIME,,AUTO

      612     7364    2        EL_LASTDAY=-1;

   7364 11 000177   000001 335007                    LCA     1,DL
        11 000200   200021 755100                    STA     EL_LASTDAY,,AUTO

      613     7365    2        ES_LASTDAY=-1;

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:72   
   7365 11 000201   200022 755100                    STA     ES_LASTDAY,,AUTO

      614     7366    2        EL_NXTCNTR=0;

   7366 11 000202   200023 450100                    STZ     EL_NXTCNTR,,AUTO

      615     7367    2        ES_NXTCNTR=0;

   7367 11 000203   200024 450100                    STZ     ES_NXTCNTR,,AUTO

      616     7368    2        EL_RENAME_ON_ERR = '1'B;

   7368 11 000204   400000 236003                    LDQ     -131072,DU
        11 000205   200003 756100                    STQ     EL_RENAME_ON_ERR,,AUTO

      617     7369    2        DCBTAB='0'B;

   7369 11 000206   000100 100400                    MLR     fill='000'O
        11 000207   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
        11 000210   200722 000144                    ADSC9   DCBTAB,,AUTO             cn=0,n=100

      618     7370    2        SUSPENDED='0'B;

   7370 11 000211   200036 450100                    STZ     SUSPENDED,,AUTO

      619     7371    2        FIRST_TIME = '1'B;

   7371 11 000212   200037 756100                    STQ     FIRST_TIME,,AUTO

      620     7372    2        CALL M$SAD(SEE_TIGR);

   7372 11 000213   003164 630400 1                  EPPR0   SEE_TIGR
        11 000214   030015 713400                    CLIMB   12301
        11 000215   400000 401760                    pmme    nvectors=1

      621     7373    2        CALL M$SAD(SEE_MONIS);

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:73   
   7373 11 000216   003174 630400 1                  EPPR0   SEE_MONIS
        11 000217   030015 713400                    CLIMB   12301
        11 000220   400000 401760                    pmme    nvectors=1

      622     7374    2        SECLOGSIZE$ = ADDR(EL_SECLOGSIZE);

   7374 11 000221   000004 236000 12                 LDQ     4
        11 000222   003014 756000 1                  STQ     SECLOGSIZE$

      623     7375    2        SECLOGSIZEPTR.SEGID = %SPCL3SID;

   7375 11 000223   006023 236007                    LDQ     3091,DL
        11 000224   003014 752003 1                  STCQ    SECLOGSIZE$,'03'O

      624     7376    2        CALL M$MONINFO(FPT_MONINFO);

   7376 11 000225   003200 630400 1                  EPPR0   FPT_MONINFO
        11 000226   020023 713400                    CLIMB   8211
        11 000227   402400 401760                    pmme    nvectors=6

      625     7377    2        N$DCT$$ = MONPTRS.N$DCT$$;

   7377 11 000230   003214 236000 1                  LDQ     MONPTRS
        11 000231   002165 756000 1                  STQ     N$DCT$$

      626     7378    2        N$DCT$PTR.SEGID = %SPCL1SID;

   7378 11 000232   006021 236007                    LDQ     3089,DL
        11 000233   002165 752003 1                  STCQ    N$DCT$$,'03'O

      627     7379    2        MAXDCTX = 0;

   7379 11 000234   200040 450100                    STZ     MAXDCTX,,AUTO

      628     7380    3        DO UNTIL (TEMPPTR.SEGID ~= %TIGRSID);

      629     7381    3             MAXDCTX = MAXDCTX + 1;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:74   

   7381 11 000235   200040 054100                    AOS     MAXDCTX,,AUTO

      630     7382    3             TEMP$ = NI$DCT$(MAXDCTX);

   7382 11 000236   002165 470400 1                  LDP0    N$DCT$$
        11 000237   200040 720100                    LXL0    MAXDCTX,,AUTO
        11 000240   000000 236110                    LDQ     0,X0,PR0
        11 000241   002164 756000 1                  STQ     TEMP$

      631     7383    3           END;                            /* DO WHILE                           */

   7383 11 000242   002164 236000 1                  LDQ     TEMP$
        11 000243   007777 376007                    ANQ     4095,DL
        11 000244   006123 116007                    CMPQ    3155,DL
        11 000245   000235 600000 11                 TZE     s:7381

      632     7384    2        MAXDCTX = MAXDCTX - 1;

   7384 11 000246   000001 336007                    LCQ     1,DL
        11 000247   200040 056100                    ASQ     MAXDCTX,,AUTO

      633     7385    2        RECVEC=VECTOR(LOGBUF);

   7385 11 000250   000006 237000 12                 LDAQ    6
        11 000251   200034 757100                    STAQ    RECVEC,,AUTO

      634     7386    2        CALL M$XCON(FPT_XCON);

   7386 11 000252   003330 630400 1                  EPPR0   FPT_XCON
        11 000253   010003 713400                    CLIMB   4099
        11 000254   400400 401760                    pmme    nvectors=2

      635     7387    2        CALL M$EVENT(FPT_EVENT) ALTRET(OPNALT);

   7387 11 000255   000172 630400 2                  EPPR0   FPT_EVENT
        11 000256   410001 713400                    CLIMB   alt,+4097
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:75   
        11 000257   400000 401760                    pmme    nvectors=1
        11 000260   000357 702000 11                 TSX2    OPNALT

      636     7388    2        CALL M$OPEN(OPCSCG) ALTRET(OPNALT);

   7388 11 000261   004004 630400 1                  EPPR0   OPCSCG
        11 000262   450000 713400                    CLIMB   alt,open
        11 000263   410400 401760                    pmme    nvectors=18
        11 000264   000357 702000 11                 TSX2    OPNALT

      637     7389    2        CALL M$OPEN (OPACCTNG)

   7389 11 000265   003610 630400 1                  EPPR0   OPACCTNG
        11 000266   450000 713400                    CLIMB   alt,open
        11 000267   410400 401760                    pmme    nvectors=18
        11 000270   000272 702000 11                 TSX2    s:7391
        11 000271   000275 710000 11                 TRA     s:7393

      638     7390    3        WHENALTRETURN DO;

      639     7391    3             CALL ELF$CONS_ERR;

   7391 11 000272   000002 631400 xsym               EPPR1   B_VECTNIL+2
        11 000273   000000 701000 xent               TSX1    ELF$CONS_ERR
        11 000274   000000 011000                    NOP     0

      640     7392    3           END;

      641     7393    2        IF EL_SNAPFLG

   7393 11 000275   002006 234000 1                  SZN     EL_SNAPFLG
        11 000276   000307 605000 11                 TPL     s:7400

      642     7394    3        THEN DO;                           /* SNAP HAS OCCURRED */

      643     7395    3             OPCOMAC.V.EXIST# = %OLDFILE#;

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:76   
   7395 11 000277   003754 236000 1                  LDQ     OPCOMAC+36
        11 000300   000010 376000 12                 ANQ     8
        11 000301   000400 276007                    ORQ     256,DL
        11 000302   003754 756000 1                  STQ     OPCOMAC+36

      644     7396    3             OPCOMAC.V.FUN# = %UPDATE#;

   7396 11 000303   001000 236007                    LDQ     512,DL
        11 000304   003755 552010 1                  STBQ    OPCOMAC+37,'10'O

      645     7397    3             EL_SNAPFLG = '0'B;            /* RESET FLAG */

   7397 11 000305   002006 450000 1                  STZ     EL_SNAPFLG

      646     7398    3           END;

   7398 11 000306   000313 710000 11                 TRA     s:7403

      647     7399    3        ELSE DO;

      648     7400    3             OPCOMAC.V.EXIST# = %NEWFILE#;

   7400 11 000307   000600 236007                    LDQ     384,DL
        11 000310   003754 256000 1                  ORSQ    OPCOMAC+36

      649     7401    3             OPCOMAC.V.FUN# = %CREATE#;

   7401 11 000311   003000 236007                    LDQ     1536,DL
        11 000312   003755 552010 1                  STBQ    OPCOMAC+37,'10'O

      650     7402    3           END;

      651     7403    2        CALL M$OPEN(OPCOMAC) ALTRET(OPNALT2);

   7403 11 000313   003710 630400 1                  EPPR0   OPCOMAC
        11 000314   450000 713400                    CLIMB   alt,open
        11 000315   410400 401760                    pmme    nvectors=18
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:77   
        11 000316   000320 702000 11                 TSX2    OPNALT2

      652     7404    3        DO NEVER;

   7404 11 000317   000333 710000 11                 TRA     s:7410

      653     7405    3   OPNALT2:  CALL ELF$CONS_ERR;

   7405 11 000320   000002 631400 xsym  OPNALT2      EPPR1   B_VECTNIL+2
        11 000321   000000 701000 xent               TSX1    ELF$CONS_ERR
        11 000322   000000 011000                    NOP     0

      654     7406    3             OPCOMAC.V.EXIST#=%NEWFILE#;

   7406 11 000323   000600 236007                    LDQ     384,DL
        11 000324   003754 256000 1                  ORSQ    OPCOMAC+36

      655     7407    3             OPCOMAC.V.FUN# = %CREATE#;

   7407 11 000325   003000 236007                    LDQ     1536,DL
        11 000326   003755 552010 1                  STBQ    OPCOMAC+37,'10'O

      656     7408    3             CALL M$OPEN(OPCOMAC) ALTRET(OPNALT);

   7408 11 000327   003710 630400 1                  EPPR0   OPCOMAC
        11 000330   450000 713400                    CLIMB   alt,open
        11 000331   410400 401760                    pmme    nvectors=18
        11 000332   000357 702000 11                 TSX2    OPNALT

      657     7409    3           END;

      658     7410    3        IF NOT DCBADDR(DCBNUM(M$ELF_DATA))->F$DCB.FCD THEN DO;

   7410 11 000333   000000 236007 xsym               LDQ     M$ELF_DATA,DL
        11 000334   000003 470400 12                 LDP0    3
        11 000335   000000 471500                    LDP1    0,,PR0
        11 000336   100000 473506                    LDP3    0,QL,PR1
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:78   
        11 000337   300031 236100                    LDQ     25,,PR3
        11 000340   020000 316007                    CANQ    8192,DL
        11 000341   000350 601000 11                 TNZ     s:7414

      659     7411    3             CALL M$OPEN(OPEN_ELF_DATA_UPD) ALTRET(OPNALT3);

   7411 11 000342   004354 630400 1                  EPPR0   OPEN_ELF_DATA_UPD
        11 000343   450000 713400                    CLIMB   alt,open
        11 000344   410400 401760                    pmme    nvectors=18
        11 000345   000351 702000 11                 TSX2    OPNALT3

      660     7412    3             EL_THRESHOLD = '1'B;

   7412 11 000346   400000 236003                    LDQ     -131072,DU
        11 000347   000000 756000 xsym               STQ     EL_THRESHOLD

      661     7413    3           END;                            /* IF NOT FCD                         */

      662     7414    3        DO NEVER;

   7414 11 000350   000352 710000 11                 TRA     s:7417

      663     7415    3   OPNALT3:  EL_THRESHOLD = '0'B;

   7415 11 000351   000000 450000 xsym  OPNALT3      STZ     EL_THRESHOLD

      664     7416    3           END;                            /* DO NEVER                           */

      665     7417    2        CALL AZC$INIT;

   7417 11 000352   000002 631400 xsym               EPPR1   B_VECTNIL+2
        11 000353   000000 701000 xent               TSX1    AZC$INIT
        11 000354   000000 011000                    NOP     0

      666     7418    2        RETURN;

   7418 11 000355   200760 221300                    LDX1  ! EXTST_BYTE7+2,,AUTO
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:79   
        11 000356   000001 702211                    TSX2  ! 1,X1

      667     7419    2   OPNALT: CALL ABORT_ELF;

   7419 11 000357   001521 701000 11    OPNALT       TSX1    ABORT_ELF
        11 000360   000000 011000                    NOP     0

      668     7420    2   END STARTUP;

   7420 11 000361   200760 221300                    LDX1  ! EXTST_BYTE7+2,,AUTO
        11 000362   000001 702211                    TSX2  ! 1,X1

      669     7421        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:80   
      670     7422    1   SLEEP: PROC;

   7422 11 000363   200764 741300       SLEEP        STX1  ! @CHAR_2+3,,AUTO

      671     7423    2        CALL M$TIME(CUR_UTS);

   7423 11 000364   003242 630400 1                  EPPR0   CUR_UTS
        11 000365   020004 713400                    CLIMB   8196
        11 000366   402000 401760                    pmme    nvectors=5

      672     7424    2        FPT_WAIT.V.UNITS# = 5 * SECS_PER_MIN;

   7424 11 000367   000454 235007                    LDA     300,DL
        11 000370   003046 755000 1                  STA     FPT_WAIT+4

      673     7425    2        IF CGREAD_STATE=0                  /* no read                            */

   7425 11 000371   002004 236000 1                  LDQ     CGREAD_STATE
        11 000372   000403 601000 11                 TNZ     s:7434

      674     7426    3        THEN DO;

      675     7427    3             CALL M$READ(FPT_READCSCG) ALTRET(RD_ERR);

   7427 11 000373   000124 630400 2                  EPPR0   FPT_READCSCG
        11 000374   440000 713400                    CLIMB   alt,read
        11 000375   401400 401760                    pmme    nvectors=4
        11 000376   000404 702000 11                 TSX2    RD_ERR

      676     7428    4             DO INHIBIT;

      677     7429    4                  IF CGREAD_STATE=0

   7429 11 000377   002004 235200 1                  LDA   ! CGREAD_STATE
        11 000400   000403 601200 11                 TNZ   ! s:7434

      678     7430    4                  THEN
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:81   
      679     7431    4                       CGREAD_STATE = 1;   /* read pending                       */

   7431 11 000401   000001 236207                    LDQ   ! 1,DL
        11 000402   002004 756200 1                  STQ   ! CGREAD_STATE

      680     7432    4                END;

      681     7433    3           END;

      682     7434    3        DO NEVER;

   7434 11 000403   000415 710000 11                 TRA     s:7441

      683     7435    3   RD_ERR:   IF B$TCB$->B$TCB.ALT$->B$ALT.ERR.CODE~=%E$DACTR

   7435 11 000404   000000 470400 xsym  RD_ERR       LDP0    B$TCB$
        11 000405   000000 471500                    LDP1    0,,PR0
        11 000406   100102 236100                    LDQ     66,,PR1
        11 000407   377770 376007                    ANQ     131064,DL
        11 000410   000150 116007                    CMPQ    104,DL
        11 000411   000415 600000 11                 TZE     s:7441

      684     7436    4             THEN DO;

      685     7437    4                  CALL ELF$CONS_ERR;

   7437 11 000412   000002 631400 xsym               EPPR1   B_VECTNIL+2
        11 000413   000000 701000 xent               TSX1    ELF$CONS_ERR
        11 000414   000000 011000                    NOP     0

      686     7438    4                END;

      687     7439    3           END;

      688     7440    3        DO INHIBIT;

      689     7441    3             IF CGREAD_STATE<2        /* Don't wait on read complete or error    */
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:82   

   7441 11 000415   002004 235200 1                  LDA   ! CGREAD_STATE
        11 000416   000002 115207                    CMPA  ! 2,DL
        11 000417   000423 603200 11                 TRC   ! s:7445

      690     7442    3             THEN
      691     7443    3                  CALL M$WAIT(FPT_WAIT);

   7443 11 000420   003042 630600 1                  EPPR0 ! FPT_WAIT
        11 000421   020006 713600                    CLIMB ! 8198
        11 000422   400400 401760                    pmme    nvectors=2

      692     7444    3           END;

      693     7445    2        RETURN;

   7445 11 000423   200764 221300                    LDX1  ! @CHAR_2+3,,AUTO
        11 000424   000001 702211                    TSX2  ! 1,X1

      694     7446    2   END SLEEP;
      695     7447        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:83   
      696     7448    1   MOVETOFILE: PROC;

   7448 11 000425   200766 741300       MOVETOFILE   STX1  ! @WORD3+1,,AUTO

      697     7449    3        DO FOREVER;

      698     7450    4             IF SUSPENDED THEN DO;

   7450 11 000426   200036 234100                    SZN     SUSPENDED,,AUTO
        11 000427   000432 605000 11                 TPL     s:7454

      699     7451    4                  SUSPENDED='0'B;

   7451 11 000430   200036 450100                    STZ     SUSPENDED,,AUTO

      700     7452    4                END;

   7452 11 000431   000441 710000 11                 TRA     s:7458

      701     7453    4             ELSE DO;

      702     7454    4                  CALL M$RDSYSLOG(FPT_RDSYSLOG) ALTRET(NOBUFS);

   7454 11 000432   003336 630400 1                  EPPR0   FPT_RDSYSLOG
        11 000433   470000 713400                    CLIMB   alt,+28672
        11 000434   400000 401760                    pmme    nvectors=1
        11 000435   001376 702000 11                 TSX2    NOBUFS

      703     7455    4                  TEMP=1;

   7455 11 000436   000001 235007                    LDA     1,DL
        11 000437   200031 755100                    STA     TEMP,,AUTO

      704     7456    4                  NXTWD=0;

   7456 11 000440   200030 450100                    STZ     NXTWD,,AUTO

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:84   
      705     7457    4                END;

      706     7458    4             DO WHILE (TEMP<=LOGBUF.COUNT);

   7458 11 000441   000001 236000 1                  LDQ     LOGBUF+1
        11 000442   000033 772000                    QRL     27
        11 000443   200031 116100                    CMPQ    TEMP,,AUTO
        11 000444   000426 602000 11                 TNC     s:7450

      707     7459    4                  P$=ADDR(LOGBUF.INFO(NXTWD));

   7459 11 000445   200030 720100                    LXL0    NXTWD,,AUTO
        11 000446   000002 630410 1                  EPPR0   LOGBUF+2,X0
        11 000447   200004 450500                    STP0    P$,,AUTO

      708     7460    4                  SIZE4=P$->HDR.SIZE*4-HDRCHARS#;

   7460 11 000450   000000 236100                    LDQ     0,,PR0
        11 000451   000007 772000                    QRL     7
        11 000452   000011 376000 12                 ANQ     9
        11 000453   000024 136007                    SBLQ    20,DL
        11 000454   200025 756100                    STQ     SIZE4,,AUTO

      709     7461    4                  RECVEC=VECTOR(HDR);

   7461 11 000455   200025 235100                    LDA     SIZE4,,AUTO
        11 000456   000020 735000                    ALS     16
        11 000457   000012 035000 12                 ADLA    10
        11 000460   200004 236100                    LDQ     P$,,AUTO
        11 000461   200034 757100                    STAQ    RECVEC,,AUTO

      710     7462    5                  DO CASE(HDR.FILE);

   7462 11 000462   000004 721100                    LXL1    4,,PR0
        11 000463   000004 101003                    CMPX1   4,DU
        11 000464   000466 602011 11                 TNC     s:7462+4,X1
        11 000465   001076 710000 11                 TRA     KEEP_GOING
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:85   
        11 000466   001076 710000 11                 TRA     KEEP_GOING
        11 000467   000472 710000 11                 TRA     s:7464
        11 000470   000751 710000 11                 TRA     s:7520
        11 000471   000762 710000 11                 TRA     s:7523

      711     7463    5                  CASE(1/*ERRLOG*/);

      712     7464    5                     IF HDR.UTS=EL_LASTTIME THEN

   7464 11 000472   000000 235100                    LDA     0,,PR0
        11 000473   000001 236100                    LDQ     1,,PR0
        11 000474   000011 773000                    LRL     9
        11 000475   200017 116100                    CMPQ    EL_LASTTIME,,AUTO
        11 000476   000503 601000 11                 TNZ     s:7466

      713     7465    5                          EL_NXTCNTR=EL_NXTCNTR+1;

   7465 11 000477   200023 235100                    LDA     EL_NXTCNTR,,AUTO
        11 000500   000001 035007                    ADLA    1,DL
        11 000501   200023 755100                    STA     EL_NXTCNTR,,AUTO
        11 000502   000504 710000 11                 TRA     s:7467

      714     7466    5                     ELSE EL_NXTCNTR=0;

   7466 11 000503   200023 450100                    STZ     EL_NXTCNTR,,AUTO

      715     7467    5                     EL_LASTTIME=HDR.UTS;

   7467 11 000504   200017 756100                    STQ     EL_LASTTIME,,AUTO

      716     7468    5                     HDR.CNTR=EL_NXTCNTR;

   7468 11 000505   200023 236100                    LDQ     EL_NXTCNTR,,AUTO
        11 000506   000001 552104                    STBQ    1,'04'O,PR0

      717     7469    6                     IF HDR.TYPE=EL_THRESHSET THEN DO;

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:86   
   7469 11 000507   000000 236100                    LDQ     0,,PR0
        11 000510   777000 376003                    ANQ     -512,DU
        11 000511   622000 116003                    CMPQ    -56320,DU
        11 000512   000523 601000 11                 TNZ     s:7473

      718     7470    6                          CALL ELT$SETTHRESH(PINCRC(P$,HDRCHARS#)->HDR);

   7470 11 000513   200004 236100                    LDQ     P$,,AUTO
        11 000514   000005 036003                    ADLQ    5,DU
        11 000515   201000 756100                    STQ     I+2,,AUTO
        11 000516   201000 630500                    EPPR0   I+2,,AUTO
        11 000517   000017 631400 xsym               EPPR1   B_VECTNIL+15
        11 000520   000000 701000 xent               TSX1    ELT$SETTHRESH
        11 000521   000000 011000                    NOP     0

      719     7471    6                          GOTO NEXT;

   7471 11 000522   001360 710000 11                 TRA     NEXT

      720     7472    6                        END;               /* IF HDR.TYPE = EL_THRESHSET         */
      721     7473    6                     IF HDR.TYPE = EL_IOERR THEN DO;

   7473 11 000523   311000 116003                    CMPQ    102912,DU
        11 000524   000571 601000 11                 TNZ     s:7484

      722     7474    6                          TEMP$ = PINCRC(P$, HDRCHARS#);

   7474 11 000525   200004 236100                    LDQ     P$,,AUTO
        11 000526   000005 036003                    ADLQ    5,DU
        11 000527   002164 756000 1                  STQ     TEMP$

      723     7475    6                          EXTST_BYTE7 = EL$IOERR.EXTST(7);

   7475 11 000530   002164 471400 1                  LDP1    TEMP$
        11 000531   100014 236100                    LDQ     12,,PR1
        11 000532   000024 736000                    QLS     20
        11 000533   200756 676100                    ERQ     EXTST_BYTE7,,AUTO
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:87   
        11 000534   776000 376003                    ANQ     -1024,DU
        11 000535   200756 656100                    ERSQ    EXTST_BYTE7,,AUTO

      724     7476    6                          IF ( (SUBSTR(EL$IOERR.MODEL,0,6)='MSU338' OR
              7476                                   /* CHECK FOR FIPS DISCS */

   7476 11 000536   040000 106500                    CMPC    fill='040'O
        11 000537   100030 000006                    ADSC9   24,,PR1                  cn=0,n=6
        11 000540   000176 000006 2                  ADSC9   FPT_EVENT+4              cn=0,n=6
        11 000541   000546 600000 11                 TZE     s:7476+8
        11 000542   040000 106500                    CMPC    fill='040'O
        11 000543   100030 000006                    ADSC9   24,,PR1                  cn=0,n=6
        11 000544   000200 000006 2                  ADSC9   FPT_EVENT+6              cn=0,n=6
        11 000545   000562 601000 11                 TNZ     s:7482
        11 000546   100001 236100                    LDQ     1,,PR1
        11 000547   170000 376003                    ANQ     61440,DU
        11 000550   120000 116003                    CMPQ    40960,DU
        11 000551   000562 601000 11                 TNZ     s:7482
        11 000552   100001 236100                    LDQ     1,,PR1
        11 000553   007700 376003                    ANQ     4032,DU
        11 000554   001300 116003                    CMPQ    704,DU
        11 000555   000562 601000 11                 TNZ     s:7482
        11 000556   200756 236100                    LDQ     EXTST_BYTE7,,AUTO
        11 000557   740000 376003                    ANQ     -16384,DU
        11 000560   300000 116003                    CMPQ    98304,DU
        11 000561   001360 600000 11                 TZE     NEXT

      725     7477    6                               SUBSTR(EL$IOERR.MODEL,0,6)='MSU339')
      726     7478    6                               AND (EL$IOERR.STATUS.MAJOR = BITBIN('12'O) AND
      727     7479    6                               EL$IOERR.STATUS.MINOR = '13'O)
      728     7480    6                               AND (SENSE_BYTE7.FMT = 6) )
      729     7481    6                          THEN GOTO NEXT;
      730     7482    6                          CALL ELT$THRESH(PINCRC(P$, HDRCHARS#) -> HDR);

   7482 11 000562   200004 236100                    LDQ     P$,,AUTO
        11 000563   000005 036003                    ADLQ    5,DU
        11 000564   201000 756100                    STQ     I+2,,AUTO
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:88   
        11 000565   201000 630500                    EPPR0   I+2,,AUTO
        11 000566   000017 631400 xsym               EPPR1   B_VECTNIL+15
        11 000567   000000 701000 xent               TSX1    ELT$THRESH
        11 000570   000000 011000                    NOP     0

      731     7483    6                        END;

      732     7484    6                     IF HDR.TYPE=EL_FI THEN DO;

   7484 11 000571   200004 470500                    LDP0    P$,,AUTO
        11 000572   000000 236100                    LDQ     0,,PR0
        11 000573   777000 376003                    ANQ     -512,DU
        11 000574   456000 116003                    CMPQ    -107520,DU
        11 000575   000641 601000 11                 TNZ     WRFIERR

      733     7485    6                          TEMP$=PINCRC(P$,HDRCHARS#);

   7485 11 000576   200004 236100                    LDQ     P$,,AUTO
        11 000577   000005 036003                    ADLQ    5,DU
        11 000600   002164 756000 1                  STQ     TEMP$

      734     7486    7                          IF NOT EL$FILERR.NOSEND THEN DO;

   7486 11 000601   002164 471400 1                  LDP1    TEMP$
        11 000602   100001 234100                    SZN     1,,PR1
        11 000603   000641 604000 11                 TMI     WRFIERR

      735     7487    7                               EL_FIBFR.CODE=EL$FILERR.CODE;

   7487 11 000604   000000 101500                    MRL     fill='000'O
        11 000605   100000 000001                    ADSC9   0,,PR1                   cn=0,n=1
        11 000606   002136 600004 1                  ADSC9   EL_FIBFR+6               cn=3,n=4

      736     7488    7                               EL_FIBFR.REASON=EL$FILERR.REASON;

   7488 11 000607   000000 101500                    MRL     fill='000'O
        11 000610   100000 200001                    ADSC9   0,,PR1                   cn=1,n=1
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:89   
        11 000611   002137 600004 1                  ADSC9   EL_FIBFR+7               cn=3,n=4

      737     7489    7                               EL_FIBFR.ACTION=EL$FILERR.ACTION;

   7489 11 000612   000000 101500                    MRL     fill='000'O
        11 000613   100000 400001                    ADSC9   0,,PR1                   cn=2,n=1
        11 000614   002140 600004 1                  ADSC9   EL_FIBFR+8               cn=3,n=4

      738     7490    7                               EL_FIBFR.SISID=EL$FILERR.SYSID;

   7490 11 000615   000000 101500                    MRL     fill='000'O
        11 000616   100013 400002                    ADSC9   11,,PR1                  cn=2,n=2
        11 000617   002141 600004 1                  ADSC9   EL_FIBFR+9               cn=3,n=4

      739     7491    7                               EL_FIBFR.ACCT=EL$FILERR.ACCT;

   7491 11 000620   040000 100500                    MLR     fill='040'O
        11 000621   100023 000010                    ADSC9   19,,PR1                  cn=0,n=8
        11 000622   002144 200010 1                  ADSC9   EL_FIBFR+12              cn=1,n=8

      740     7492    7                               EL_FIBFR.SN=EL$FILERR.SN;

   7492 11 000623   040000 100500                    MLR     fill='040'O
        11 000624   100021 000006                    ADSC9   17,,PR1                  cn=0,n=6
        11 000625   002142 600006 1                  ADSC9   EL_FIBFR+10              cn=3,n=6

      741     7493    7                               NAMELEN=EL$FILERR.FNAME.L;

   7493 11 000626   100025 236100                    LDQ     21,,PR1
        11 000627   000033 772000                    QRL     27
        11 000630   002156 756000 1                  STQ     NAMELEN

      742     7494    7                               EL_FIBFR.NAM=ADDR(EL$FILERR.FNAME.C)->MOVENAMELEN;

   7494 11 000631   000000 620006                    EAX0    0,QL
        11 000632   040000 100540                    MLR     fill='040'O
        11 000633   100025 200010                    ADSC9   21,,PR1                  cn=1,n=*X0
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:90   
        11 000634   002146 200037 1                  ADSC9   EL_FIBFR+14              cn=1,n=31

      743     7495    7                               CALL M$WRITE (FPT_WRCSCGFI) ALTRET(WRFIERR);

   7495 11 000635   000142 630400 2                  EPPR0   FPT_WRCSCGFI
        11 000636   440001 713400                    CLIMB   alt,write
        11 000637   401400 401760                    pmme    nvectors=4
        11 000640   000641 702000 11                 TSX2    WRFIERR

   7494 11 000641                       WRFIERR      null
      744     7496    7   WRFIERR:                    ;
      745     7497    7                             END;

      746     7498    6                        END;

      747     7499    5                     CALL XUD$UTS_DIFF_SEC(TEMP_UTS, EL_LASTTIME, 0);

   7499 11 000641   000000 236000 12                 LDQ     0
        11 000642   201002 756100                    STQ     I+4,,AUTO
        11 000643   200017 630500                    EPPR0   EL_LASTTIME,,AUTO
        11 000644   201001 450500                    STP0    I+3,,AUTO
        11 000645   200755 631500                    EPPR1   TEMP_UTS,,AUTO
        11 000646   201000 451500                    STP1    I+2,,AUTO
        11 000647   201000 630500                    EPPR0   I+2,,AUTO
        11 000650   000021 631400 xsym               EPPR1   B_VECTNIL+17
        11 000651   000000 701000 xent               TSX1    XUD$UTS_DIFF_SEC
        11 000652   000000 011000                    NOP     0

      748     7500    5                     TEMP_UTS = TEMP_UTS/86400;

   7500 11 000653   200755 236100                    LDQ     TEMP_UTS,,AUTO
        11 000654   000001 772000                    QRL     1
        11 000655   124300 506007                    DIV     43200,DL
        11 000656   200755 756100                    STQ     TEMP_UTS,,AUTO

      749     7501    6                     IF TEMP_UTS~=EL_LASTDAY THEN DO;

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:91   
   7501 11 000657   000000 116003                    CMPQ    0,DU
        11 000660   000663 604000 11                 TMI     s:7502
        11 000661   200021 116100                    CMPQ    EL_LASTDAY,,AUTO
        11 000662   001076 600000 11                 TZE     KEEP_GOING

      750     7502    7                          IF F$ERRLOG$->F$DCB.FCD THEN DO;

   7502 11 000663   200005 470500                    LDP0    F$ERRLOG$,,AUTO
        11 000664   000031 236100                    LDQ     25,,PR0
        11 000665   020000 316007                    CANQ    8192,DL
        11 000666   000677 600000 11                 TZE     s:7507

      751     7503    7                               FPT_CLOSE.V.DCB#=DCBNUM(F$ERRLOG);

   7503 11 000667   000000 236007 xsym               LDQ     F$ERRLOG,DL
        11 000670   000000 620006                    EAX0    0,QL
        11 000671   004350 740000 1                  STX0    FPT_CLOSE+26

      752     7504    7                               FPT_CLOSE.V.OPER.RELG# = '1'B;

   7504 11 000672   200000 236007                    LDQ     65536,DL
        11 000673   004350 256000 1                  ORSQ    FPT_CLOSE+26

      753     7505    7                               CALL M$CLOSE(FPT_CLOSE);

   7505 11 000674   004316 630400 1                  EPPR0   FPT_CLOSE
        11 000675   050001 713400                    CLIMB   close
        11 000676   406000 401760                    pmme    nvectors=13

      754     7506    7                             END;

      755     7507    6                          EL_TIME.TSTAMP_=VECTOR(EL_LASTTIME);

   7507 11 000677   777640 235007                    LDA     -96,DL
        11 000700   201000 452500                    STP2    I+2,,AUTO
        11 000701   201000 236100                    LDQ     I+2,,AUTO
        11 000702   000017 036003                    ADLQ    15,DU
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:92   
        11 000703   003060 757000 1                  STAQ    EL_TIME+8

      756     7508    6                          CALL M$TIME(EL_TIME);

   7508 11 000704   003050 630400 1                  EPPR0   EL_TIME
        11 000705   020004 713400                    CLIMB   8196
        11 000706   402000 401760                    pmme    nvectors=5

      757     7509    6                          IF ASCBIN(SUBSTR(VLP_ERRLOG.D,0,1)) < 55 THEN

   7509 11 000707   003017 236000 1                  LDQ     VLP_ERRLOG+2
        11 000710   000011 772000                    QRL     9
        11 000711   000777 376007                    ANQ     511,DL
        11 000712   000067 116007                    CMPQ    55,DL
        11 000713   000717 603000 11                 TRC     s:7512

      758     7510    6                               CALL CONCAT(VLP_ERRLOG.YY,'20');

   7510 11 000714   000202 220000 2                  LDX0    FPT_EVENT+8
        11 000715   003017 740000 1                  STX0    VLP_ERRLOG+2
        11 000716   000721 710000 11                 TRA     s:7513

      759     7511    6                          ELSE
      760     7512    6                               CALL CONCAT(VLP_ERRLOG.YY,'19');

   7512 11 000717   000203 220000 2                  LDX0    FPT_EVENT+9
        11 000720   003017 740000 1                  STX0    VLP_ERRLOG+2

      761     7513    6                          CALL XUD$UTS_DIFF_SEC(EL_LASTDAY,EL_LASTTIME,0);

   7513 11 000721   000000 236000 12                 LDQ     0
        11 000722   201002 756100                    STQ     I+4,,AUTO
        11 000723   200017 630500                    EPPR0   EL_LASTTIME,,AUTO
        11 000724   201001 450500                    STP0    I+3,,AUTO
        11 000725   200021 631500                    EPPR1   EL_LASTDAY,,AUTO
        11 000726   201000 451500                    STP1    I+2,,AUTO
        11 000727   201000 630500                    EPPR0   I+2,,AUTO
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:93   
        11 000730   000021 631400 xsym               EPPR1   B_VECTNIL+17
        11 000731   000000 701000 xent               TSX1    XUD$UTS_DIFF_SEC
        11 000732   000000 011000                    NOP     0

      762     7514    6                          EL_LASTDAY = EL_LASTDAY/86400;

   7514 11 000733   200021 236100                    LDQ     EL_LASTDAY,,AUTO
        11 000734   250600 506007                    DIV     86400,DL
        11 000735   200021 756100                    STQ     EL_LASTDAY,,AUTO

      763     7515    6                          IF NOT FIRST_TIME AND EL_ZAPFLG = 0

   7515 11 000736   200037 234100                    SZN     FIRST_TIME,,AUTO
        11 000737   000747 604000 11                 TMI     s:7517
        11 000740   002005 235000 1                  LDA     EL_ZAPFLG
        11 000741   000747 601000 11                 TNZ     s:7517

      764     7516    6                          THEN CALL M$GJOB(START_ELAN) ALTRET(KEEP_GOING);

   7516 11 000742   004206 630400 1                  EPPR0   START_ELAN
        11 000743   420022 713400                    CLIMB   alt,+8210
        11 000744   402400 401760                    pmme    nvectors=6
        11 000745   001076 702000 11                 TSX2    KEEP_GOING
        11 000746   001076 710000 11                 TRA     KEEP_GOING

      765     7517    6                          ELSE FIRST_TIME = '0'B;

   7517 11 000747   200037 450100                    STZ     FIRST_TIME,,AUTO

      766     7518    6                        END;

   7518 11 000750   001076 710000 11                 TRA     KEEP_GOING

      767     7519    5                  CASE(2/*COMMUNICATIONS ACCOUNTING*/);

      768     7520    5                     CALL AZC$ACCTNG(RECVEC,EL_ACCTNG) ALTRET(WRITE_ERR);

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:94   
   7520 11 000751   000013 236000 12                 LDQ     11
        11 000752   201001 756100                    STQ     I+3,,AUTO
        11 000753   200034 631500                    EPPR1   RECVEC,,AUTO
        11 000754   201000 451500                    STP1    I+2,,AUTO
        11 000755   201000 630500                    EPPR0   I+2,,AUTO
        11 000756   000020 631400 xsym               EPPR1   B_VECTNIL+16
        11 000757   000000 701000 xent               TSX1    AZC$ACCTNG
        11 000760   001246 702000 11                 TSX2    WRITE_ERR

      769     7521    5                     GOTO COM_CONT;

   7521 11 000761   001161 710000 11                 TRA     COM_CONT

      770     7522    5                  CASE(3/*SECLOG*/);

      771     7523    5                     IF HDR.UTS=ES_LASTTIME THEN

   7523 11 000762   000000 235100                    LDA     0,,PR0
        11 000763   000001 236100                    LDQ     1,,PR0
        11 000764   000011 773000                    LRL     9
        11 000765   200020 116100                    CMPQ    ES_LASTTIME,,AUTO
        11 000766   000773 601000 11                 TNZ     s:7525

      772     7524    5                          ES_NXTCNTR=ES_NXTCNTR+1;

   7524 11 000767   200024 235100                    LDA     ES_NXTCNTR,,AUTO
        11 000770   000001 035007                    ADLA    1,DL
        11 000771   200024 755100                    STA     ES_NXTCNTR,,AUTO
        11 000772   000774 710000 11                 TRA     s:7526

      773     7525    5                     ELSE ES_NXTCNTR=0;

   7525 11 000773   200024 450100                    STZ     ES_NXTCNTR,,AUTO

      774     7526    5                     ES_LASTTIME=HDR.UTS;

   7526 11 000774   200020 756100                    STQ     ES_LASTTIME,,AUTO
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:95   

      775     7527    5                     HDR.CNTR=ES_NXTCNTR;

   7527 11 000775   200024 236100                    LDQ     ES_NXTCNTR,,AUTO
        11 000776   000001 552104                    STBQ    1,'04'O,PR0

      776     7528    5                     HDR.SEQ_NUM=ES_SEQUENCE_NUM;

   7528 11 000777   003036 221000 1                  LDX1    ES_SEQUENCE_NUM
        11 001000   000003 441100                    SXL1    3,,PR0

      777     7529    5                     CALL XUD$UTS_DIFF_SEC(TEMP_UTS, ES_LASTTIME, 0);

   7529 11 001001   000000 236000 12                 LDQ     0
        11 001002   201002 756100                    STQ     I+4,,AUTO
        11 001003   200020 631500                    EPPR1   ES_LASTTIME,,AUTO
        11 001004   201001 451500                    STP1    I+3,,AUTO
        11 001005   200755 633500                    EPPR3   TEMP_UTS,,AUTO
        11 001006   201000 453500                    STP3    I+2,,AUTO
        11 001007   201000 630500                    EPPR0   I+2,,AUTO
        11 001010   000021 631400 xsym               EPPR1   B_VECTNIL+17
        11 001011   000000 701000 xent               TSX1    XUD$UTS_DIFF_SEC
        11 001012   000000 011000                    NOP     0

      778     7530    5                     TEMP_UTS = TEMP_UTS/86400;

   7530 11 001013   200755 236100                    LDQ     TEMP_UTS,,AUTO
        11 001014   000001 772000                    QRL     1
        11 001015   124300 506007                    DIV     43200,DL
        11 001016   200755 756100                    STQ     TEMP_UTS,,AUTO

      779     7531    6                     IF TEMP_UTS~=ES_LASTDAY THEN DO;

   7531 11 001017   000000 116003                    CMPQ    0,DU
        11 001020   001023 604000 11                 TMI     s:7532
        11 001021   200022 116100                    CMPQ    ES_LASTDAY,,AUTO
        11 001022   001076 600000 11                 TZE     KEEP_GOING
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:96   

      780     7532    7                          IF F$SECLOG$->F$DCB.FCD THEN DO;

   7532 11 001023   200006 470500                    LDP0    F$SECLOG$,,AUTO
        11 001024   000031 236100                    LDQ     25,,PR0
        11 001025   020000 316007                    CANQ    8192,DL
        11 001026   001037 600000 11                 TZE     s:7537

      781     7533    7                               FPT_CLOSE.V.DCB#=DCBNUM(F$SECLOG);

   7533 11 001027   000000 236007 xsym               LDQ     F$SECLOG,DL
        11 001030   000000 620006                    EAX0    0,QL
        11 001031   004350 740000 1                  STX0    FPT_CLOSE+26

      782     7534    7                               FPT_CLOSE.V.OPER.RELG#='1'B;

   7534 11 001032   200000 236007                    LDQ     65536,DL
        11 001033   004350 256000 1                  ORSQ    FPT_CLOSE+26

      783     7535    7                               CALL M$CLOSE(FPT_CLOSE);

   7535 11 001034   004316 630400 1                  EPPR0   FPT_CLOSE
        11 001035   050001 713400                    CLIMB   close
        11 001036   406000 401760                    pmme    nvectors=13

      784     7536    7                             END;

      785     7537    6                          ES_TIME.TSTAMP_=VECTOR(ES_LASTTIME);

   7537 11 001037   777640 235007                    LDA     -96,DL
        11 001040   201000 452500                    STP2    I+2,,AUTO
        11 001041   201000 236100                    LDQ     I+2,,AUTO
        11 001042   000020 036003                    ADLQ    16,DU
        11 001043   003110 757000 1                  STAQ    ES_TIME+8

      786     7538    6                          CALL M$TIME(ES_TIME);

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:97   
   7538 11 001044   003100 630400 1                  EPPR0   ES_TIME
        11 001045   020004 713400                    CLIMB   8196
        11 001046   402000 401760                    pmme    nvectors=5

      787     7539    6                          IF ASCBIN(SUBSTR(VLP_SECLOG.D,0,1)) < 55 THEN

   7539 11 001047   003023 236000 1                  LDQ     VLP_SECLOG+2
        11 001050   000011 772000                    QRL     9
        11 001051   000777 376007                    ANQ     511,DL
        11 001052   000067 116007                    CMPQ    55,DL
        11 001053   001057 603000 11                 TRC     s:7542

      788     7540    6                               CALL CONCAT(VLP_SECLOG.YY,'20');

   7540 11 001054   000202 220000 2                  LDX0    FPT_EVENT+8
        11 001055   003023 740000 1                  STX0    VLP_SECLOG+2
        11 001056   001061 710000 11                 TRA     s:7543

      789     7541    6                          ELSE
      790     7542    6                               CALL CONCAT(VLP_SECLOG.YY,'19');

   7542 11 001057   000203 220000 2                  LDX0    FPT_EVENT+9
        11 001060   003023 740000 1                  STX0    VLP_SECLOG+2

      791     7543    6                          CALL XUD$UTS_DIFF_SEC(ES_LASTDAY,ES_LASTTIME,0);

   7543 11 001061   000000 236000 12                 LDQ     0
        11 001062   201002 756100                    STQ     I+4,,AUTO
        11 001063   200020 630500                    EPPR0   ES_LASTTIME,,AUTO
        11 001064   201001 450500                    STP0    I+3,,AUTO
        11 001065   200022 631500                    EPPR1   ES_LASTDAY,,AUTO
        11 001066   201000 451500                    STP1    I+2,,AUTO
        11 001067   201000 630500                    EPPR0   I+2,,AUTO
        11 001070   000021 631400 xsym               EPPR1   B_VECTNIL+17
        11 001071   000000 701000 xent               TSX1    XUD$UTS_DIFF_SEC
        11 001072   000000 011000                    NOP     0

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:98   
      792     7544    6                          ES_LASTDAY = ES_LASTDAY/86400;

   7544 11 001073   200022 236100                    LDQ     ES_LASTDAY,,AUTO
        11 001074   250600 506007                    DIV     86400,DL
        11 001075   200022 756100                    STQ     ES_LASTDAY,,AUTO

      793     7545    6                        END;

      794     7546    5                  END;

      795     7547    4   KEEP_GOING:
      796     7548    4                  F# = HDR.FILE;

   7548 11 001076   200004 470500       KEEP_GOING   LDP0    P$,,AUTO
        11 001077   000004 236100                    LDQ     4,,PR0
        11 001100   777777 376007                    ANQ     -1,DL
        11 001101   200033 756100                    STQ     F#,,AUTO

      797     7549    4                  CALL OPENFILE(F#) ALTRET(SUSPEND);

   7549 11 001102   200033 631500                    EPPR1   F#,,AUTO
        11 001103   200771 451500                    STP1    @WORD3+4,,AUTO
        11 001104   001542 701000 11                 TSX1    OPENFILE
        11 001105   001402 702000 11                 TSX2    SUSPEND

      798     7550    5                  IF F# = EL_SEC THEN DO;

   7550 11 001106   200033 235100                    LDA     F#,,AUTO
        11 001107   000003 115007                    CMPA    3,DL
        11 001110   001143 601000 11                 TNZ     WRITE_REC

      799     7551    5                       CALL M$SAD(SEE_CFUS);

   7551 11 001111   003170 630400 1                  EPPR0   SEE_CFUS
        11 001112   030015 713400                    CLIMB   12301
        11 001113   400000 401760                    pmme    nvectors=1

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:99   
      800     7552    5                       CFU$ = DCBADDR(DCBTAB(F#))->F$DCB.CFU$;

   7552 11 001114   000003 470400 12                 LDP0    3
        11 001115   000000 471500                    LDP1    0,,PR0
        11 001116   200033 235100                    LDA     F#,,AUTO
        11 001117   000100 101505                    MRL     fill='000'O
        11 001120   200722 000001                    ADSC9   DCBTAB,A,AUTO            cn=0,n=1
        11 001121   201000 000002                    ADSC9   I+2,,AUTO                cn=0,n=2
        11 001122   201000 220100                    LDX0    I+2,,AUTO
        11 001123   100000 473510                    LDP3    0,X0,PR1
        11 001124   300066 236100                    LDQ     54,,PR3
        11 001125   200753 756100                    STQ     CFU$,,AUTO

      801     7553    6                       IF CFU$ ~= ADDR(NIL) THEN DO;

   7553 11 001126   000001 116000 xsym               CMPQ    B_VECTNIL+1
        11 001127   001143 600000 11                 TZE     WRITE_REC

      802     7554    6                            CFUPTR.SEGID = %SPCL2SID;

   7554 11 001130   006022 236007                    LDQ     3090,DL
        11 001131   200753 752103                    STCQ    CFU$,'03'O,AUTO

      803     7555    7                            IF CFU$->FM$CFU.UGRANS >= SECLOGSIZE THEN DO;

   7555 11 001132   003014 473400 1                  LDP3    SECLOGSIZE$
        11 001133   200753 474500                    LDP4    CFU$,,AUTO
        11 001134   400004 236100                    LDQ     4,,PR4
        11 001135   000032 376000 xsym               ANQ     B_VECTNIL+26
        11 001136   300000 116100                    CMPQ    0,,PR3
        11 001137   001143 602000 11                 TNC     WRITE_REC

      804     7556    7                                 FPT_KEYIN.MESS_ = VECTOR (ES_FORCED_TURNOVER);

   7556 11 001140   000014 237000 12                 LDAQ    12
        11 001141   003116 757000 1                  STAQ    FPT_KEYIN+2

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:100  
      805     7557    7                                 GOTO SECLOG_TURNOVER;

   7557 11 001142   001254 710000 11                 TRA     SECLOG_TURNOVER

      806     7558    7                               END;
      807     7559    6                          END;
      808     7560    5                     END;
      809     7561    4   WRITE_REC:     FPT_WRITE.BUF_=RECVEC;

   7561 11 001143   200034 237100       WRITE_REC    LDAQ    RECVEC,,AUTO
        11 001144   004306 757000 1                  STAQ    FPT_WRITE+4

      810     7562    4                  CALL M$WRITE(FPT_WRITE) ALTRET(WRITE_ERR);

   7562 11 001145   004302 630400 1                  EPPR0   FPT_WRITE
        11 001146   440001 713400                    CLIMB   alt,write
        11 001147   401400 401760                    pmme    nvectors=4
        11 001150   001246 702000 11                 TSX2    WRITE_ERR

      811     7563    4                  EL_RENAME_ON_ERR = '1'B;

   7563 11 001151   400000 236003                    LDQ     -131072,DU
        11 001152   200003 756100                    STQ     EL_RENAME_ON_ERR,,AUTO

      812     7564    4                  IF F#=EL_SEC THEN

   7564 11 001153   200033 235100                    LDA     F#,,AUTO
        11 001154   000003 115007                    CMPA    3,DL
        11 001155   001161 601000 11                 TNZ     COM_CONT

      813     7565    4                       ES_SEQUENCE_NUM=ES_SEQUENCE_NUM+1;

   7565 11 001156   003036 220000 1                  LDX0    ES_SEQUENCE_NUM
        11 001157   000001 621010                    EAX1    1,X0
        11 001160   003036 741000 1                  STX1    ES_SEQUENCE_NUM

      814     7566    5   COM_CONT:      IF HDR.LOST+LOSTERR.COUNT>0 THEN DO;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:101  

   7566 11 001161   200004 470500       COM_CONT     LDP0    P$,,AUTO
        11 001162   000004 236100                    LDQ     4,,PR0
        11 001163   000022 772000                    QRL     18
        11 001164   003035 036000 1                  ADLQ    LOSTERR+5
        11 001165   001245 600000 11                 TZE     ITS_NOT_WORTH_THE_TROUBLE

      815     7567    5                       LOSTERR.UTS=HDR.UTS;

   7567 11 001166   000000 100500                    MLR     fill='000'O
        11 001167   000000 600004                    ADSC9   0,,PR0                   cn=3,n=4
        11 001170   003030 600004 1                  ADSC9   LOSTERR                  cn=3,n=4

      816     7568    5                       LOSTERR.SITE_ID=HDR.SITE_ID;

   7568 11 001171   040000 100500                    MLR     fill='040'O
        11 001172   000002 000006                    ADSC9   2,,PR0                   cn=0,n=6
        11 001173   003032 000006 1                  ADSC9   LOSTERR+2                cn=0,n=6

      817     7569    5                       LOSTERR.COUNT=LOSTERR.COUNT+HDR.LOST;

   7569 11 001174   000004 236100                    LDQ     4,,PR0
        11 001175   000022 772000                    QRL     18
        11 001176   003035 036000 1                  ADLQ    LOSTERR+5
        11 001177   003035 756000 1                  STQ     LOSTERR+5

      818     7570    5                       IF LOSTERR.UTS=EL_LASTTIME THEN EL_NXTCNTR=EL_NXTCNTR+1;

   7570 11 001200   003030 235000 1                  LDA     LOSTERR
        11 001201   003031 236000 1                  LDQ     LOSTERR+1
        11 001202   000011 773000                    LRL     9
        11 001203   200017 116100                    CMPQ    EL_LASTTIME,,AUTO
        11 001204   001211 601000 11                 TNZ     s:7571

   7570 11 001205   200023 235100                    LDA     EL_NXTCNTR,,AUTO
        11 001206   000001 035007                    ADLA    1,DL
        11 001207   200023 755100                    STA     EL_NXTCNTR,,AUTO
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:102  
        11 001210   001212 710000 11                 TRA     s:7572

      819     7571    5                       ELSE EL_NXTCNTR=0;

   7571 11 001211   200023 450100                    STZ     EL_NXTCNTR,,AUTO

      820     7572    5                       EL_LASTTIME=LOSTERR.UTS;

   7572 11 001212   200017 756100                    STQ     EL_LASTTIME,,AUTO

      821     7573    5                       CALL M$TIME(ELL_TIME);/* fills in date for VLP_ERRLOG*/

   7573 11 001213   003064 630400 1                  EPPR0   ELL_TIME
        11 001214   020004 713400                    CLIMB   8196
        11 001215   402000 401760                    pmme    nvectors=5

      822     7574    5                       IF ASCBIN(SUBSTR(VLP_ERRLOG.D,0,1)) < 55 THEN

   7574 11 001216   003017 236000 1                  LDQ     VLP_ERRLOG+2
        11 001217   000011 772000                    QRL     9
        11 001220   000777 376007                    ANQ     511,DL
        11 001221   000067 116007                    CMPQ    55,DL
        11 001222   001226 603000 11                 TRC     s:7577

      823     7575    5                            CALL CONCAT(VLP_ERRLOG.YY,'20');

   7575 11 001223   000202 220000 2                  LDX0    FPT_EVENT+8
        11 001224   003017 740000 1                  STX0    VLP_ERRLOG+2
        11 001225   001230 710000 11                 TRA     s:7578

      824     7576    5                       ELSE
      825     7577    5                            CALL CONCAT(VLP_ERRLOG.YY,'19');

   7577 11 001226   000203 220000 2                  LDX0    FPT_EVENT+9
        11 001227   003017 740000 1                  STX0    VLP_ERRLOG+2

      826     7578    5                       LOSTERR.CNTR=EL_NXTCNTR;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:103  

   7578 11 001230   200023 236100                    LDQ     EL_NXTCNTR,,AUTO
        11 001231   003031 552004 1                  STBQ    LOSTERR+1,'04'O

      827     7579    5                       FPT_WRITE.BUF_=VECTOR(LOSTERR);

   7579 11 001232   000016 237000 12                 LDAQ    14
        11 001233   004306 757000 1                  STAQ    FPT_WRITE+4

      828     7580    5                       CALL OPENFILE(1) ALTRET(ITS_NOT_WORTH_THE_TROUBLE);

   7580 11 001234   000020 236000 12                 LDQ     16
        11 001235   200771 756100                    STQ     @WORD3+4,,AUTO
        11 001236   001542 701000 11                 TSX1    OPENFILE
        11 001237   001245 702000 11                 TSX2    ITS_NOT_WORTH_THE_TROUBLE

      829     7581    5                       CALL M$WRITE(FPT_WRITE) ALTRET(WRITE_ERR);

   7581 11 001240   004302 630400 1                  EPPR0   FPT_WRITE
        11 001241   440001 713400                    CLIMB   alt,write
        11 001242   401400 401760                    pmme    nvectors=4
        11 001243   001246 702000 11                 TSX2    WRITE_ERR

      830     7582    5                       LOSTERR.COUNT=0;

   7582 11 001244   003035 450000 1                  STZ     LOSTERR+5

   7582 11 001245                       ITS_NOT_WOR* null
      831     7583    5   ITS_NOT_WORTH_THE_TROUBLE: ;
      832     7584    5                     END;

      833     7585    5                  DO NEVER;

   7585 11 001245   001360 710000 11                 TRA     NEXT

      834     7586    5   WRITE_ERR:          CALL ELF$CONS_ERR;

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:104  
   7586 11 001246   000002 631400 xsym  WRITE_ERR    EPPR1   B_VECTNIL+2
        11 001247   000000 701000 xent               TSX1    ELF$CONS_ERR
        11 001250   000000 011000                    NOP     0

      835     7587    6                       IF EL_RENAME_ON_ERR THEN DO;

   7587 11 001251   200003 234100                    SZN     EL_RENAME_ON_ERR,,AUTO
        11 001252   001355 605000 11                 TPL     s:7614

      836     7588    6                            EL_RENAME_ON_ERR = '0'B;

   7588 11 001253   200003 450100                    STZ     EL_RENAME_ON_ERR,,AUTO

      837     7589    6   SECLOG_TURNOVER:         FPT_CLOSE.V.DCB# = FILETAB.DCB#(F#);

   7589 11 001254   200033 235100       SECLOG_TURN* LDA     F#,,AUTO
        11 001255   000001 735000                    ALS     1
        11 001256   003005 720005 1                  LXL0    FILETAB+1,AL
        11 001257   004350 740000 1                  STX0    FPT_CLOSE+26

      838     7590    6                            CALL M$CLOSE (FPT_CLOSE);

   7590 11 001260   004316 630400 1                  EPPR0   FPT_CLOSE
        11 001261   050001 713400                    CLIMB   close
        11 001262   406000 401760                    pmme    nvectors=13

      839     7591    6                            OPEN$ = FILETAB.FPT$(F#);

   7591 11 001263   200033 235100                    LDA     F#,,AUTO
        11 001264   000001 735000                    ALS     1
        11 001265   003004 236005 1                  LDQ     FILETAB,AL
        11 001266   200754 756100                    STQ     OPEN$,,AUTO

      840     7592    6                            OPEN$->FPTBASE.V.SHARE# = %NONE#;

   7592 11 001267   200754 470500                    LDP0    OPEN$,,AUTO
        11 001270   000030 236007                    LDQ     24,DL
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:105  
        11 001271   000044 256100                    ORSQ    36,,PR0

      841     7593    6                            CALL M$OPEN (OPEN$->FPTBASE)

   7593 11 001272   450000 713400                    CLIMB   alt,open
        11 001273   410400 401760                    pmme    nvectors=18
        11 001274   001341 702000 11                 TSX2    s:7608

      842     7594    7                            WHENRETURN DO;

      843     7595    7                                 CALL M$TIME (ERR_TIME);

   7595 11 001275   003530 630400 1                  EPPR0   ERR_TIME
        11 001276   020004 713400                    CLIMB   8196
        11 001277   402000 401760                    pmme    nvectors=5

      844     7596    7                                 IF ASCBIN(SUBSTR(ERR_NAME.D,0,1)) < 55 THEN

   7596 11 001300   003546 236000 1                  LDQ     ERR_NAME+2
        11 001301   000011 772000                    QRL     9
        11 001302   000777 376007                    ANQ     511,DL
        11 001303   000067 116007                    CMPQ    55,DL
        11 001304   001310 603000 11                 TRC     s:7599

      845     7597    7                                      CALL CONCAT(ERR_NAME.YY,'20');

   7597 11 001305   000202 220000 2                  LDX0    FPT_EVENT+8
        11 001306   003546 740000 1                  STX0    ERR_NAME+2
        11 001307   001312 710000 11                 TRA     s:7600

      846     7598    7                                 ELSE
      847     7599    7                                      CALL CONCAT(ERR_NAME.YY,'19');

   7599 11 001310   000203 220000 2                  LDX0    FPT_EVENT+9
        11 001311   003546 740000 1                  STX0    ERR_NAME+2

      848     7600    7                                 IF F#=EL_SEC THEN ERR_NAME.FILE=':SECLOG';
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:106  

   7600 11 001312   200033 235100                    LDA     F#,,AUTO
        11 001313   000003 115007                    CMPA    3,DL
        11 001314   001321 601000 11                 TNZ     s:7601

   7600 11 001315   040000 100400                    MLR     fill='040'O
        11 001316   000204 000007 2                  ADSC9   FPT_EVENT+10             cn=0,n=7
        11 001317   003544 200007 1                  ADSC9   ERR_NAME                 cn=1,n=7
        11 001320   001324 710000 11                 TRA     s:7602

      849     7601    7                                 ELSE ERR_NAME.FILE = ':ERRLOG';

   7601 11 001321   040000 100400                    MLR     fill='040'O
        11 001322   000206 000007 2                  ADSC9   FPT_EVENT+12             cn=0,n=7
        11 001323   003544 200007 1                  ADSC9   ERR_NAME                 cn=1,n=7

      850     7602    7                                 ERR_CLOSE.V.DCB# =FILETAB.DCB#(F#);

   7602 11 001324   000001 735000                    ALS     1
        11 001325   003005 721005 1                  LXL1    FILETAB+1,AL
        11 001326   003604 741000 1                  STX1    ERR_CLOSE+26

      851     7603    7                                 CALL M$CLOSE (ERR_CLOSE) ALTRET (SUSPEND);

   7603 11 001327   003552 630400 1                  EPPR0   ERR_CLOSE
        11 001330   450001 713400                    CLIMB   alt,close
        11 001331   406000 401760                    pmme    nvectors=13
        11 001332   001402 702000 11                 TSX2    SUSPEND

      852     7604    7                                IF EL_RENAME_ON_ERR THEN /* MUST BE SECLOG TURNOVER */

   7604 11 001333   200003 234100                    SZN     EL_RENAME_ON_ERR,,AUTO
        11 001334   001340 605000 11                 TPL     s:7606

      853     7605    7                                      CALL M$KEYIN (FPT_KEYIN);

   7605 11 001335   003114 630400 1                  EPPR0   FPT_KEYIN
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:107  
        11 001336   120000 713400                    CLIMB   40960
        11 001337   401400 401760                    pmme    nvectors=4

      854     7606    7                               END;

   7606 11 001340   001343 710000 11                 TRA     s:7610

      855     7607    7                            WHENALTRETURN DO;
              7607                                     /* SOMEBODY ELSE HAS FILE OPEN RIGHT NOW */

      856     7608    7                                 IF NOT EL_RENAME_ON_ERR THEN GOTO SUSPEND;

   7608 11 001341   200003 234100                    SZN     EL_RENAME_ON_ERR,,AUTO
        11 001342   001402 605000 11                 TPL     SUSPEND

      857     7609    7                               END;

      858     7610    6                            OPEN$->FPTBASE.V.SHARE# = %IN#;

   7610 11 001343   200754 470500                    LDP0    OPEN$,,AUTO
        11 001344   000044 236100                    LDQ     36,,PR0
        11 001345   000021 376000 12                 ANQ     17
        11 001346   000020 276007                    ORQ     16,DL
        11 001347   000044 756100                    STQ     36,,PR0

      859     7611    6                            CALL OPENFILE(F#) ALTRET(SUSPEND);

   7611 11 001350   200033 631500                    EPPR1   F#,,AUTO
        11 001351   200771 451500                    STP1    @WORD3+4,,AUTO
        11 001352   001542 701000 11                 TSX1    OPENFILE
        11 001353   001402 702000 11                 TSX2    SUSPEND

      860     7612    6                            GOTO WRITE_REC;

   7612 11 001354   001143 710000 11                 TRA     WRITE_REC

      861     7613    6                          END;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:108  
      862     7614    5                       LOSTERR.COUNT=LOSTERR.COUNT+1;

   7614 11 001355   003035 235000 1                  LDA     LOSTERR+5
        11 001356   000001 035007                    ADLA    1,DL
        11 001357   003035 755000 1                  STA     LOSTERR+5

      863     7615    5                     END;

      864     7616    4   NEXT:          NXTWD=NXTWD+P$->HDR.SIZE;

   7616 11 001360   200004 470500       NEXT         LDP0    P$,,AUTO
        11 001361   000000 236100                    LDQ     0,,PR0
        11 001362   000011 772000                    QRL     9
        11 001363   777777 376007                    ANQ     -1,DL
        11 001364   200030 036100                    ADLQ    NXTWD,,AUTO
        11 001365   200030 756100                    STQ     NXTWD,,AUTO

      865     7617    4                  TEMP=TEMP+1;

   7617 11 001366   200031 235100                    LDA     TEMP,,AUTO
        11 001367   000001 035007                    ADLA    1,DL
        11 001370   200031 755100                    STA     TEMP,,AUTO

      866     7618    4                END;                       /* DO TEMP                            */

   7618 11 001371   000001 236000 1                  LDQ     LOGBUF+1
        11 001372   000033 772000                    QRL     27
        11 001373   200031 116100                    CMPQ    TEMP,,AUTO
        11 001374   000445 603000 11                 TRC     s:7459

      867     7619    3           END;                            /* DO FOREVER                         */

   7619 11 001375   000426 710000 11                 TRA     s:7450

      868     7620    2   NOBUFS:
      869     7621    2        CALL CLOSE_DCBS;

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:109  
   7621 11 001376   002075 701000 11    NOBUFS       TSX1    CLOSE_DCBS
        11 001377   000000 011000                    NOP     0

      870     7622    2        RETURN;

   7622 11 001400   200766 221300                    LDX1  ! @WORD3+1,,AUTO
        11 001401   000001 702211                    TSX2  ! 1,X1

      871     7623    2   SUSPEND:
      872     7624    2        CALL CLOSE_DCBS;

   7624 11 001402   002075 701000 11    SUSPEND      TSX1    CLOSE_DCBS
        11 001403   000000 011000                    NOP     0

      873     7625    2        SUSPENDED='1'B;

   7625 11 001404   400000 236003                    LDQ     -131072,DU
        11 001405   200036 756100                    STQ     SUSPENDED,,AUTO

      874     7626    2        RETURN;

   7626 11 001406   200766 221300                    LDX1  ! @WORD3+1,,AUTO
        11 001407   000001 702211                    TSX2  ! 1,X1

      875     7627    2   END MOVETOFILE;
      876     7628        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:110  
      877     7629    1   KEYIN_EVENT: PROC;

   7629 11 001410   200764 741300       KEYIN_EVENT  STX1  ! @CHAR_2+3,,AUTO

      878     7630    3        IF ADDR(EL_TERM)->EL$TERM.KEYIN~=KEY_ZAP# THEN DO;

   7630 11 001411   002061 220000 1                  LDX0    EL_TERM
        11 001412   000067 100003                    CMPX0   55,DU
        11 001413   001427 600000 11                 TZE     s:7635

      879     7631    3             RECVEC = VECTOR(EL_TERM);

   7631 11 001414   000022 237000 12                 LDAQ    18
        11 001415   200034 757100                    STAQ    RECVEC,,AUTO

      880     7632    3             CALL AZC$ACCTNG(RECVEC,EL_TERMKEYIN) ALTRET(BAD);

   7632 11 001416   000020 236000 12                 LDQ     16
        11 001417   201001 756100                    STQ     I+3,,AUTO
        11 001420   200034 630500                    EPPR0   RECVEC,,AUTO
        11 001421   201000 450500                    STP0    I+2,,AUTO
        11 001422   201000 630500                    EPPR0   I+2,,AUTO
        11 001423   000020 631400 xsym               EPPR1   B_VECTNIL+16
        11 001424   000000 701000 xent               TSX1    AZC$ACCTNG
        11 001425   001515 702000 11                 TSX2    BAD

      881     7633    3           END;

   7633 11 001426   001513 710000 11                 TRA     s:7653

      882     7634    3        ELSE DO;

      883     7635    3             EL_ZAPFLG=1;

   7635 11 001427   000001 235007                    LDA     1,DL
        11 001430   002005 755000 1                  STA     EL_ZAPFLG

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:111  
      884     7636    3             CALL MOVETOFILE;

   7636 11 001431   000425 701000 11                 TSX1    MOVETOFILE
        11 001432   000000 011000                    NOP     0

      885     7637    3   KEEP_GOING:
      886     7638    4             DO TEMP=%M$1STDCB# TO B$ROS$->B$ROSEG.NUMDCBS;

   7638 11 001433   000012 235007       KEEP_GOING   LDA     10,DL
        11 001434   200031 755100                    STA     TEMP,,AUTO
        11 001435   001463 710000 11                 TRA     L1+3

      887     7639    4                  IF DCBADDR(TEMP)~=ADDR(NIL) AND TEMP ~= DCBNUM(F$CSCG) THEN

   7639 11 001436   000003 470400 12                 LDP0    3
        11 001437   000000 471500                    LDP1    0,,PR0
        11 001440   200031 720100                    LXL0    TEMP,,AUTO
        11 001441   100000 236110                    LDQ     0,X0,PR1
        11 001442   000001 116000 xsym               CMPQ    B_VECTNIL+1
        11 001443   001460 600000 11                 TZE     L1
        11 001444   000000 236007 xsym               LDQ     F$CSCG,DL
        11 001445   200031 116100                    CMPQ    TEMP,,AUTO
        11 001446   001460 600000 11                 TZE     L1

      888     7640    5                       IF DCBADDR(TEMP)->F$DCB.FCD THEN DO;

   7640 11 001447   100000 473510                    LDP3    0,X0,PR1
        11 001450   300031 236100                    LDQ     25,,PR3
        11 001451   020000 316007                    CANQ    8192,DL
        11 001452   001460 600000 11                 TZE     L1

      889     7641    5                            FPT_CLOSE.V.DCB#=TEMP;

   7641 11 001453   004350 740000 1                  STX0    FPT_CLOSE+26

      890     7642    5                            CALL M$CLOSE(FPT_CLOSE) ALTRET(L1);

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:112  
   7642 11 001454   004316 630400 1                  EPPR0   FPT_CLOSE
        11 001455   450001 713400                    CLIMB   alt,close
        11 001456   406000 401760                    pmme    nvectors=13
        11 001457   001460 702000 11                 TSX2    L1

      891     7643    5   L1:                    END;

   7643 11 001460                       L1           null
      892     7644    4                END;

   7644 11 001460   200031 235100                    LDA     TEMP,,AUTO
        11 001461   000001 035007                    ADLA    1,DL
        11 001462   200031 755100                    STA     TEMP,,AUTO
        11 001463   000000 470400 xsym               LDP0    B$ROS$
        11 001464   000002 236100                    LDQ     2,,PR0
        11 001465   000022 772000                    QRL     18
        11 001466   200031 116100                    CMPQ    TEMP,,AUTO
        11 001467   001436 603000 11                 TRC     s:7639

      893     7645    4             CALL M$WRITE(TELL_KEYIN) WHENALTRETURN DO; END;

   7645 11 001470   003132 630400 1                  EPPR0   TELL_KEYIN
        11 001471   440001 713400                    CLIMB   alt,write
        11 001472   401400 401760                    pmme    nvectors=4
        11 001473   001475 702000 11                 TSX2    s:7646
        11 001474   001475 710000 11                 TRA     s:7646

      894     7646    3             FPT_CLOSE.V.DCB# = DCBNUM(F$CSCG);

   7646 11 001475   000000 236007 xsym               LDQ     F$CSCG,DL
        11 001476   000000 620006                    EAX0    0,QL
        11 001477   004350 740000 1                  STX0    FPT_CLOSE+26

      895     7647    4             CALL M$CLOSE(FPT_CLOSE) WHENALTRETURN DO; END;

   7647 11 001500   004316 630400 1                  EPPR0   FPT_CLOSE
        11 001501   450001 713400                    CLIMB   alt,close
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:113  
        11 001502   406000 401760                    pmme    nvectors=13
        11 001503   001505 702000 11                 TSX2    s:7648
        11 001504   001505 710000 11                 TRA     s:7648

      896     7648    3             FPT_WAIT.V.UNITS#=9999;

   7648 11 001505   023417 235007                    LDA     9999,DL
        11 001506   003046 755000 1                  STA     FPT_WAIT+4

      897     7649    4             DO FOREVER;

      898     7650    4                  CALL M$WAIT(FPT_WAIT);

   7650 11 001507   003042 630400 1                  EPPR0   FPT_WAIT
        11 001510   020006 713400                    CLIMB   8198
        11 001511   400400 401760                    pmme    nvectors=2

      899     7651    4                END;

   7651 11 001512   001507 710000 11                 TRA     s:7650

      900     7652    3           END;
      901     7653    2        RETURN;

   7653 11 001513   200764 221300                    LDX1  ! @CHAR_2+3,,AUTO
        11 001514   000001 702211                    TSX2  ! 1,X1

      902     7654    2   BAD: CALL ABORT_ELF;

   7654 11 001515   001521 701000 11    BAD          TSX1    ABORT_ELF
        11 001516   000000 011000                    NOP     0

      903     7655    2   END KEYIN_EVENT;

   7655 11 001517   200764 221300                    LDX1  ! @CHAR_2+3,,AUTO
        11 001520   000001 702211                    TSX2  ! 1,X1

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:114  
      904     7656        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:115  
      905     7657    1   ABORT_ELF: PROC;

   7657 11 001521   200772 741300       ABORT_ELF    STX1  ! @FILE#+1,,AUTO

      906     7658    2        CALL CLOSE_DCBS;

   7658 11 001522   002075 701000 11                 TSX1    CLOSE_DCBS
        11 001523   000000 011000                    NOP     0

      907     7659    2        ERRCODE=B$TCB$->B$TCB.ALT$->B$ALT.ERR;

   7659 11 001524   000000 470400 xsym               LDP0    B$TCB$
        11 001525   000000 471500                    LDP1    0,,PR0
        11 001526   100102 236100                    LDQ     66,,PR1
        11 001527   002022 756000 1                  STQ     ERRCODE

      908     7660    2        FPT_ERRMSG.V.DCB#=B$TCB$->B$TCB.ALT$->B$ALT.DCB#;

   7660 11 001530   000000 471500                    LDP1    0,,PR0
        11 001531   100101 720100                    LXL0    65,,PR1
        11 001532   003324 740000 1                  STX0    FPT_ERRMSG+22

      909     7661    2        CALL M$ERRMSG(FPT_ERRMSG);

   7661 11 001533   003276 630400 1                  EPPR0   FPT_ERRMSG
        11 001534   020000 713400                    CLIMB   8192
        11 001535   405000 401760                    pmme    nvectors=11

      910     7662    2        CALL M$XXX;

   7662 11 001536   000003 713400                    CLIMB   3
        11 001537   000000 401760                    pmme    nvectors=0

      911     7663    2   END ABORT_ELF;

   7663 11 001540   200772 221300                    LDX1  ! @FILE#+1,,AUTO
        11 001541   000001 702211                    TSX2  ! 1,X1
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:116  

      912     7664        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:117  
      913     7665    1   OPENFILE: PROC(FILE#) ALTRET;

   7665 11 001542   200770 741300       OPENFILE     STX1  ! @WORD3+3,,AUTO

   7665 11 001543                       TRY_AGAIN    null
      914     7666    2   DCL FILE# UBIN;
      915     7667        /**/
      916     7668    2   TRY_AGAIN: ;
      917     7669    3        IF FILE#<=SPECFILES THEN DO;

   7669 11 001543   200771 470500                    LDP0    @FILE#,,AUTO
        11 001544   000000 235100                    LDA     0,,PR0
        11 001545   000004 115007                    CMPA    4,DL
        11 001546   001562 603000 11                 TRC     s:7674

      918     7670    3             OPEN$=FILETAB.FPT$(FILE#);

   7670 11 001547   000000 720100                    LXL0    0,,PR0
        11 001550   000000 636010                    EAQ     0,X0
        11 001551   000021 772000                    QRL     17
        11 001552   003004 236006 1                  LDQ     FILETAB,QL
        11 001553   200754 756100                    STQ     OPEN$,,AUTO

      919     7671    3             DCBTAB(FILE#)=FILETAB.DCB#(FILE#);

   7671 11 001554   000000 636010                    EAQ     0,X0
        11 001555   000017 772000                    QRL     15
        11 001556   000105 101406                    MRL     fill='000'O
        11 001557   003005 000004 1                  ADSC9   FILETAB+1,Q              cn=0,n=4
        11 001560   200722 000001                    ADSC9   DCBTAB,A,AUTO            cn=0,n=1

      920     7672    3           END;

   7672 11 001561   001615 710000 11                 TRA     s:7682

      921     7673    3        ELSE DO;

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:118  
      922     7674    3             CALL BINCHAR(MISCNAME.N,FILE#);

   7674 11 001562   000044 773000                    LRL     36
        11 001563   201000 757100                    STAQ    I+2,,AUTO
        11 001564   000000 301500                    BTD
        11 001565   201000 000010                    NDSC9   I+2,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        11 001566   003026 230002 1                  NDSC9   MISCNAME+1               cn=1,s=nosgn,sf=0,n=2

      923     7675    4             IF DCBTAB(FILE#)=0 THEN DO;

   7675 11 001567   000000 235100                    LDA     0,,PR0
        11 001570   000100 101505                    MRL     fill='000'O
        11 001571   200722 000001                    ADSC9   DCBTAB,A,AUTO            cn=0,n=1
        11 001572   201000 000004                    ADSC9   I+2,,AUTO                cn=0,n=4
        11 001573   201000 236100                    LDQ     I+2,,AUTO
        11 001574   000000 116003                    CMPQ    0,DU
        11 001575   001607 601000 11                 TNZ     s:7679

      924     7676    4                  CALL M$GETDCB(FPT_GETDCB) ALTRET(GET_DCB_ALT);

   7676 11 001576   004262 630400 1                  EPPR0   FPT_GETDCB
        11 001577   460002 713400                    CLIMB   alt,+24578
        11 001600   401000 401760                    pmme    nvectors=3
        11 001601   002060 702000 11                 TSX2    GET_DCB_ALT

      925     7677    4                  DCBTAB(FILE#)=GET_DCB#;

   7677 11 001602   200771 470500                    LDP0    @FILE#,,AUTO
        11 001603   000000 235100                    LDA     0,,PR0
        11 001604   000105 101400                    MRL     fill='000'O
        11 001605   003027 000002 1                  ADSC9   GET_DCB#                 cn=0,n=2
        11 001606   200722 000001                    ADSC9   DCBTAB,A,AUTO            cn=0,n=1

      926     7678    4                END;

      927     7679    3             OPMISC.V.DCB#=DCBTAB(FILE#);

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:119  
   7679 11 001607   000000 235100                    LDA     0,,PR0
        11 001610   000000 101505                    MRL     fill='000'O
        11 001611   200722 000001                    ADSC9   DCBTAB,A,AUTO            cn=0,n=1
        11 001612   004160 000002 1                  ADSC9   OPMISC+36                cn=0,n=2

      928     7680    3             OPEN$=ADDR(OPMISC);

   7680 11 001613   000024 236000 12                 LDQ     20
        11 001614   200754 756100                    STQ     OPEN$,,AUTO

      929     7681    3           END;

      930     7682    2        IF NOT DCBADDR(DCBTAB(FILE#))->F$DCB.FCD THEN

   7682 11 001615   000000 235100                    LDA     0,,PR0
        11 001616   000003 471400 12                 LDP1    3
        11 001617   100000 473500                    LDP3    0,,PR1
        11 001620   000100 101505                    MRL     fill='000'O
        11 001621   200722 000001                    ADSC9   DCBTAB,A,AUTO            cn=0,n=1
        11 001622   201000 000002                    ADSC9   I+2,,AUTO                cn=0,n=2
        11 001623   201000 220100                    LDX0    I+2,,AUTO
        11 001624   300000 474510                    LDP4    0,X0,PR3
        11 001625   400031 236100                    LDQ     25,,PR4
        11 001626   020000 316007                    CANQ    8192,DL
        11 001627   001634 601000 11                 TNZ     s:7684

      931     7683    2             CALL M$OPEN(OPEN$->FPTBASE) ALTRET(OPN_ERR);

   7683 11 001630   200754 470500                    LDP0    OPEN$,,AUTO
        11 001631   450000 713400                    CLIMB   alt,open
        11 001632   410400 401760                    pmme    nvectors=18
        11 001633   001643 702000 11                 TSX2    OPN_ERR

      932     7684    2        FPT_WRITE.V.DCB#=DCBTAB(FILE#);

   7684 11 001634   200771 470500                    LDP0    @FILE#,,AUTO
        11 001635   000000 235100                    LDA     0,,PR0
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:120  
        11 001636   000000 101505                    MRL     fill='000'O
        11 001637   200722 000001                    ADSC9   DCBTAB,A,AUTO            cn=0,n=1
        11 001640   004312 000002 1                  ADSC9   FPT_WRITE+8              cn=0,n=2

      933     7685    2        RETURN;

   7685 11 001641   200770 221300                    LDX1  ! @WORD3+3,,AUTO
        11 001642   000001 702211                    TSX2  ! 1,X1

      934     7686    2   OPN_ERR:
      935     7687    3        IF B$TCB$->B$TCB.ALT$->B$ALT.ERR.CODE=%E$FILEBUSY THEN DO;

   7687 11 001643   000000 470400 xsym  OPN_ERR      LDP0    B$TCB$
        11 001644   000000 471500                    LDP1    0,,PR0
        11 001645   100102 236100                    LDQ     66,,PR1
        11 001646   377770 376007                    ANQ     131064,DL
        11 001647   001550 116007                    CMPQ    872,DL
        11 001650   001667 601000 11                 TNZ     s:7694

      936     7688    3             IF FILE#=EL_SEC

   7688 11 001651   200771 473500                    LDP3    @FILE#,,AUTO
        11 001652   300000 235100                    LDA     0,,PR3
        11 001653   000003 115007                    CMPA    3,DL
        11 001654   001660 601000 11                 TNZ     s:7690

      937     7689    3             THEN FPT_KEYIN.MESS_=VECTOR(SECLOG_BUSY);

   7689 11 001655   000026 237000 12                 LDAQ    22
        11 001656   003116 757000 1                  STAQ    FPT_KEYIN+2
        11 001657   001662 710000 11                 TRA     s:7691

      938     7690    3             ELSE FPT_KEYIN.MESS_=VECTOR(ERRLOG_BUSY);

   7690 11 001660   000030 237000 12                 LDAQ    24
        11 001661   003116 757000 1                  STAQ    FPT_KEYIN+2

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:121  
      939     7691    3             CALL M$KEYIN(FPT_KEYIN);

   7691 11 001662   003114 630400 1                  EPPR0   FPT_KEYIN
        11 001663   120000 713400                    CLIMB   40960
        11 001664   401400 401760                    pmme    nvectors=4

      940     7692    3             ALTRETURN;

   7692 11 001665   200770 221300                    LDX1  ! @WORD3+3,,AUTO
        11 001666   000000 702211                    TSX2  ! 0,X1

      941     7693    3           END;
      942     7694    2        IF B$TCB$->B$TCB.ALT$->B$ALT.ERR.CODE=%E$ACGRANS OR

   7694 11 001667   002160 116007                    CMPQ    1136,DL
        11 001670   001673 600000 11                 TZE     s:7696
        11 001671   002140 116007                    CMPQ    1120,DL
        11 001672   001711 601000 11                 TNZ     s:7702

      943     7695    3             B$TCB$->B$TCB.ALT$->B$ALT.ERR.CODE=%E$PSGRANS THEN DO;

      944     7696    3             IF FILE#=EL_SEC

   7696 11 001673   200771 473500                    LDP3    @FILE#,,AUTO
        11 001674   300000 235100                    LDA     0,,PR3
        11 001675   000003 115007                    CMPA    3,DL
        11 001676   001702 601000 11                 TNZ     s:7698

      945     7697    3             THEN FPT_KEYIN.MESS_=VECTOR(ES_EXCEED_SPACE);

   7697 11 001677   000032 237000 12                 LDAQ    26
        11 001700   003116 757000 1                  STAQ    FPT_KEYIN+2
        11 001701   001704 710000 11                 TRA     s:7699

      946     7698    3             ELSE FPT_KEYIN.MESS_=VECTOR(EL_EXCEED_SPACE);

   7698 11 001702   000034 237000 12                 LDAQ    28
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:122  
        11 001703   003116 757000 1                  STAQ    FPT_KEYIN+2

      947     7699    3             CALL M$KEYIN(FPT_KEYIN);

   7699 11 001704   003114 630400 1                  EPPR0   FPT_KEYIN
        11 001705   120000 713400                    CLIMB   40960
        11 001706   401400 401760                    pmme    nvectors=4

      948     7700    3             ALTRETURN;

   7700 11 001707   200770 221300                    LDX1  ! @WORD3+3,,AUTO
        11 001710   000000 702211                    TSX2  ! 0,X1

      949     7701    3           END;
      950     7702    2        OPEN$->FPTBASE.V.FUN# = %UPDATE#;

   7702 11 001711   200754 473500                    LDP3    OPEN$,,AUTO
        11 001712   001000 236007                    LDQ     512,DL
        11 001713   300045 552110                    STBQ    37,'10'O,PR3

      951     7703    2        CALL M$OPEN(OPEN$->FPTBASE) ALTRET(OPN_ERR1);

   7703 11 001714   300000 630500                    EPPR0   0,,PR3
        11 001715   450000 713400                    CLIMB   alt,open
        11 001716   410400 401760                    pmme    nvectors=18
        11 001717   002034 702000 11                 TSX2    OPN_ERR1

      952     7704    2        TEMP_VEC = OPEN$->FPTBASE.NAME_;

   7704 11 001720   200754 470500                    LDP0    OPEN$,,AUTO
        11 001721   000006 237100                    LDAQ    6,,PR0
        11 001722   200026 757100                    STAQ    TEMP_VEC,,AUTO

      953     7705    2        TEMP_NAME = TEMP_VEC1.PTR$->TEXTCBASE;

   7705 11 001723   002017 471400 1                  LDP1    T$
        11 001724   000100 101500                    MRL     fill='000'O
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:123  
        11 001725   100000 000001                    ADSC9   0,,PR1                   cn=0,n=1
        11 001726   201000 000002                    ADSC9   I+2,,AUTO                cn=0,n=2
        11 001727   201000 220100                    LDX0    I+2,,AUTO
        11 001730   000001 621010                    EAX1    1,X0
        11 001731   200027 473500                    LDP3    TEMP_VEC+1,,AUTO
        11 001732   000100 101500                    MRL     fill='000'O
        11 001733   300000 000001                    ADSC9   0,,PR3                   cn=0,n=1
        11 001734   201001 000002                    ADSC9   I+3,,AUTO                cn=0,n=2
        11 001735   201001 222100                    LDX2    I+3,,AUTO
        11 001736   000001 623012                    EAX3    1,X2
        11 001737   000140 100540                    MLR     fill='000'O
        11 001740   300000 000013                    ADSC9   0,,PR3                   cn=0,n=*X3
        11 001741   100000 000011                    ADSC9   0,,PR1                   cn=0,n=*X1

      954     7706    2        TEMP_NAME.L = TEMP_NAME.L + 5;

   7706 11 001742   000100 101500                    MRL     fill='000'O
        11 001743   100000 000001                    ADSC9   0,,PR1                   cn=0,n=1
        11 001744   201001 000004                    ADSC9   I+3,,AUTO                cn=0,n=4
        11 001745   201001 236100                    LDQ     I+3,,AUTO
        11 001746   000005 036007                    ADLQ    5,DL
        11 001747   201000 756100                    STQ     I+2,,AUTO
        11 001750   000100 101500                    MRL     fill='000'O
        11 001751   201000 000004                    ADSC9   I+2,,AUTO                cn=0,n=4
        11 001752   100000 000001                    ADSC9   0,,PR1                   cn=0,n=1

      955     7707    2        CALL INSERT(TEMP_NAME.C,TEMP_NAME.L-5,5,'-:BAD');

   7707 11 001753   000100 101500                    MRL     fill='000'O
        11 001754   100000 000001                    ADSC9   0,,PR1                   cn=0,n=1
        11 001755   201000 000002                    ADSC9   I+2,,AUTO                cn=0,n=2
        11 001756   201000 220100                    LDX0    I+2,,AUTO
        11 001757   000100 101500                    MRL     fill='000'O
        11 001760   100000 000001                    ADSC9   0,,PR1                   cn=0,n=1
        11 001761   201001 000004                    ADSC9   I+3,,AUTO                cn=0,n=4
        11 001762   201001 236100                    LDQ     I+3,,AUTO
        11 001763   040106 100400                    MLR     fill='040'O
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:124  
        11 001764   000210 000005 2                  ADSC9   FPT_EVENT+14             cn=0,n=5
        11 001765   177777 000005                    ADSC9   -1,Q,PR1                 cn=0,n=5

      956     7708    2        FPT_CLOSE.V.DCB# = DCBTAB(FILE#);

   7708 11 001766   200771 474500                    LDP4    @FILE#,,AUTO
        11 001767   400000 235100                    LDA     0,,PR4
        11 001770   000000 101505                    MRL     fill='000'O
        11 001771   200722 000001                    ADSC9   DCBTAB,A,AUTO            cn=0,n=1
        11 001772   004350 000002 1                  ADSC9   FPT_CLOSE+26             cn=0,n=2

      957     7709    2        FPT_CLOSE.V.OPER.RELG# = '1'B;

   7709 11 001773   200000 236007                    LDQ     65536,DL
        11 001774   004350 256000 1                  ORSQ    FPT_CLOSE+26

      958     7710    2        FPT_CLOSE.NAME_ = VECTOR(TEMP_NAME);

   7710 11 001775   000100 101500                    MRL     fill='000'O
        11 001776   100000 000001                    ADSC9   0,,PR1                   cn=0,n=1
        11 001777   201000 000002                    ADSC9   I+2,,AUTO                cn=0,n=2
        11 002000   201000 220100                    LDX0    I+2,,AUTO
        11 002001   000001 621010                    EAX1    1,X0
        11 002002   000000 635011                    EAA     0,X1
        11 002003   000002 771000                    ARL     2
        11 002004   000140 135007                    SBLA    96,DL
        11 002005   002017 236000 1                  LDQ     T$
        11 002006   004324 757000 1                  STAQ    FPT_CLOSE+6

      959     7711    2        CALL M$CLOSE(FPT_CLOSE);

   7711 11 002007   004316 630400 1                  EPPR0   FPT_CLOSE
        11 002010   050001 713400                    CLIMB   close
        11 002011   406000 401760                    pmme    nvectors=13

      960     7712    2        OPEN$->FPTBASE.V.FUN# = %CREATE#;

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:125  
   7712 11 002012   200754 470500                    LDP0    OPEN$,,AUTO
        11 002013   003000 236007                    LDQ     1536,DL
        11 002014   000045 552110                    STBQ    37,'10'O,PR0

      961     7713    2        FPT_CLOSE.NAME_ = VECTOR(NIL);

   7713 11 002015   000036 237000 12                 LDAQ    30
        11 002016   004324 757000 1                  STAQ    FPT_CLOSE+6

      962     7714    2        IF FILE#=EL_SEC

   7714 11 002017   200771 471500                    LDP1    @FILE#,,AUTO
        11 002020   100000 235100                    LDA     0,,PR1
        11 002021   000003 115007                    CMPA    3,DL
        11 002022   002026 601000 11                 TNZ     s:7716

      963     7715    2        THEN FPT_KEYIN.MESS_=VECTOR(ES_BADFILE);

   7715 11 002023   000040 237000 12                 LDAQ    32
        11 002024   003116 757000 1                  STAQ    FPT_KEYIN+2
        11 002025   002030 710000 11                 TRA     s:7717

      964     7716    2        ELSE FPT_KEYIN.MESS_ = VECTOR(EL_BADFILE);

   7716 11 002026   000042 237000 12                 LDAQ    34
        11 002027   003116 757000 1                  STAQ    FPT_KEYIN+2

      965     7717    2        CALL M$KEYIN(FPT_KEYIN);

   7717 11 002030   003114 630400 1                  EPPR0   FPT_KEYIN
        11 002031   120000 713400                    CLIMB   40960
        11 002032   401400 401760                    pmme    nvectors=4

      966     7718    2        GOTO TRY_AGAIN;

   7718 11 002033   001543 710000 11                 TRA     TRY_AGAIN

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:126  
      967     7719    2   OPN_ERR1:
      968     7720    2        OPEN$->FPTBASE.V.FUN# = %CREATE#;

   7720 11 002034   200754 470500       OPN_ERR1     LDP0    OPEN$,,AUTO
        11 002035   003000 236007                    LDQ     1536,DL
        11 002036   000045 552110                    STBQ    37,'10'O,PR0

      969     7721    2        OPEN$->FPTBASE.V.EXIST# = %NEWFILE#;

   7721 11 002037   000600 236007                    LDQ     384,DL
        11 002040   000044 256100                    ORSQ    36,,PR0

      970     7722    2        CALL M$OPEN(OPEN$->FPTBASE) ALTRET(ABRT) ;

   7722 11 002041   450000 713400                    CLIMB   alt,open
        11 002042   410400 401760                    pmme    nvectors=18
        11 002043   002071 702000 11                 TSX2    ABRT

      971     7723    2        OPEN$->FPTBASE.V.EXIST# = %OLDFILE#;

   7723 11 002044   200754 470500                    LDP0    OPEN$,,AUTO
        11 002045   000044 236100                    LDQ     36,,PR0
        11 002046   000010 376000 12                 ANQ     8
        11 002047   000400 276007                    ORQ     256,DL
        11 002050   000044 756100                    STQ     36,,PR0

      972     7724    2        FPT_WRITE.V.DCB# = DCBTAB(FILE#);

   7724 11 002051   200771 471500                    LDP1    @FILE#,,AUTO
        11 002052   100000 235100                    LDA     0,,PR1
        11 002053   000000 101505                    MRL     fill='000'O
        11 002054   200722 000001                    ADSC9   DCBTAB,A,AUTO            cn=0,n=1
        11 002055   004312 000002 1                  ADSC9   FPT_WRITE+8              cn=0,n=2

      973     7725    2        RETURN;

   7725 11 002056   200770 221300                    LDX1  ! @WORD3+3,,AUTO
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:127  
        11 002057   000001 702211                    TSX2  ! 1,X1

      974     7726    2   GET_DCB_ALT:
      975     7727    3        IF B$TCB$->B$TCB.ALT$->B$ALT.ERR.CODE=%E$NOSLOTS THEN DO;

   7727 11 002060   000000 470400 xsym  GET_DCB_ALT  LDP0    B$TCB$
        11 002061   000000 471500                    LDP1    0,,PR0
        11 002062   100102 236100                    LDQ     66,,PR1
        11 002063   377770 376007                    ANQ     131064,DL
        11 002064   001500 116007                    CMPQ    832,DL
        11 002065   002071 601000 11                 TNZ     ABRT

      976     7728    3             CALL RELEASE_DCBS;

   7728 11 002066   002100 701000 11                 TSX1    RELEASE_DCBS
        11 002067   000000 011000                    NOP     0

      977     7729    3             GOTO TRY_AGAIN;

   7729 11 002070   001543 710000 11                 TRA     TRY_AGAIN

      978     7730    3           END;
      979     7731    2   ABRT: CALL ABORT_ELF;

   7731 11 002071   001521 701000 11    ABRT         TSX1    ABORT_ELF
        11 002072   000000 011000                    NOP     0

      980     7732    2   END OPENFILE;

   7732 11 002073   200770 221300                    LDX1  ! @WORD3+3,,AUTO
        11 002074   000001 702211                    TSX2  ! 1,X1

      981     7733        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:128  
      982     7734    1   CLOSE_DCBS: PROC;

   7734 11 002075   200774 741300       CLOSE_DCBS   STX1  ! @FILE#+3,,AUTO

      983     7735    2   DCL RELFLG BIT(1) ALIGNED;
      984     7736    2   DCL I UBIN;
      985     7737    2        RELFLG='0'B;

   7737 11 002076   200775 450100                    STZ     RELFLG,,AUTO

      986     7738    2        GOTO CLOSE;

   7738 11 002077   002103 710000 11                 TRA     CLOSE

      987     7739    2   RELEASE_DCBS: ENTRY;

   7739 11 002100   200774 741300       RELEASE_DCBS STX1  ! @FILE#+3,,AUTO

      988     7740    2        RELFLG='1'B;

   7740 11 002101   400000 236003                    LDQ     -131072,DU
        11 002102   200775 756100                    STQ     RELFLG,,AUTO

   7740 11 002103                       CLOSE        null
      989     7741    2   CLOSE: ;
      990     7742    3        DO I=1 TO 99;

   7742 11 002103   000001 235007                    LDA     1,DL
        11 002104   200776 755100                    STA     I,,AUTO

      991     7743    4             IF DCBTAB(I)~=0 THEN DO;

   7743 11 002105   200776 235100                    LDA     I,,AUTO
        11 002106   000100 101505                    MRL     fill='000'O
        11 002107   200722 000001                    ADSC9   DCBTAB,A,AUTO            cn=0,n=1
        11 002110   201000 000004                    ADSC9   I+2,,AUTO                cn=0,n=4
        11 002111   201000 236100                    LDQ     I+2,,AUTO
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:129  
        11 002112   000000 116003                    CMPQ    0,DU
        11 002113   002174 600000 11                 TZE     s:7760

      992     7744    4                  FPT_CLOSE.V.DCB#=DCBTAB(I);

   7744 11 002114   000000 101505                    MRL     fill='000'O
        11 002115   200722 000001                    ADSC9   DCBTAB,A,AUTO            cn=0,n=1
        11 002116   004350 000002 1                  ADSC9   FPT_CLOSE+26             cn=0,n=2

      993     7745    4                  FPT_CLOSE.V.OPER.RELG# = '0'B;

   7745 11 002117   000044 236000 12                 LDQ     36
        11 002120   004350 356000 1                  ANSQ    FPT_CLOSE+26

      994     7746    4                  FPT_RELDCB.V.DCB#=DCBTAB(I);

   7746 11 002121   000000 101505                    MRL     fill='000'O
        11 002122   200722 000001                    ADSC9   DCBTAB,A,AUTO            cn=0,n=1
        11 002123   004274 000002 1                  ADSC9   FPT_RELDCB+2             cn=0,n=2

      995     7747    4                  FPT_TRUNC.V.DCB#=DCBTAB(I);

   7747 11 002124   000000 101505                    MRL     fill='000'O
        11 002125   200722 000001                    ADSC9   DCBTAB,A,AUTO            cn=0,n=1
        11 002126   004300 000002 1                  ADSC9   FPT_TRUNC+2              cn=0,n=2

      996     7748    5                  IF DCBADDR(DCBTAB(I))->F$DCB.FCD THEN DO;

   7748 11 002127   000003 470400 12                 LDP0    3
        11 002130   000000 471500                    LDP1    0,,PR0
        11 002131   000100 101505                    MRL     fill='000'O
        11 002132   200722 000001                    ADSC9   DCBTAB,A,AUTO            cn=0,n=1
        11 002133   201000 000002                    ADSC9   I+2,,AUTO                cn=0,n=2
        11 002134   201000 220100                    LDX0    I+2,,AUTO
        11 002135   100000 473510                    LDP3    0,X0,PR1
        11 002136   300031 236100                    LDQ     25,,PR3
        11 002137   020000 316007                    CANQ    8192,DL
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:130  
        11 002140   002156 600000 11                 TZE     s:7755

      997     7749    5                       IF I>SPECFILES

   7749 11 002141   000004 115007                    CMPA    4,DL
        11 002142   002151 602000 11                 TNC     s:7753

      998     7750    5                       THEN
      999     7751    6                            CALL M$CLOSE(FPT_CLOSE) WHENALTRETURN DO; END;

   7751 11 002143   004316 630400 1                  EPPR0   FPT_CLOSE
        11 002144   450001 713400                    CLIMB   alt,close
        11 002145   406000 401760                    pmme    nvectors=13
        11 002146   002150 702000 11                 TSX2    s:7751+5
        11 002147   002150 710000 11                 TRA     s:7751+5

   7751 11 002150   002156 710000 11                 TRA     s:7755

     1000     7752    5                       ELSE
     1001     7753    6                            CALL M$TRUNC (FPT_TRUNC) WHENALTRETURN DO; END;

   7753 11 002151   004276 630400 1                  EPPR0   FPT_TRUNC
        11 002152   450003 713400                    CLIMB   alt,+20483
        11 002153   400000 401760                    pmme    nvectors=1
        11 002154   002156 702000 11                 TSX2    s:7755
        11 002155   002156 710000 11                 TRA     s:7755

     1002     7754    5                     END;

     1003     7755    5                  IF I>SPECFILES AND RELFLG THEN DO;

   7755 11 002156   200776 235100                    LDA     I,,AUTO
        11 002157   000004 115007                    CMPA    4,DL
        11 002160   002174 602000 11                 TNC     s:7760
        11 002161   200775 234100                    SZN     RELFLG,,AUTO
        11 002162   002174 605000 11                 TPL     s:7760

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:131  
     1004     7756    6                       CALL M$RELDCB(FPT_RELDCB) WHENALTRETURN DO; END;

   7756 11 002163   004272 630400 1                  EPPR0   FPT_RELDCB
        11 002164   460003 713400                    CLIMB   alt,+24579
        11 002165   400000 401760                    pmme    nvectors=1
        11 002166   002170 702000 11                 TSX2    s:7757
        11 002167   002170 710000 11                 TRA     s:7757

     1005     7757    5                       DCBTAB(I) = 0;

   7757 11 002170   200776 235100                    LDA     I,,AUTO
        11 002171   000105 101400                    MRL     fill='000'O
        11 002172   000002 000004 xsym               ADSC9   B_VECTNIL+2              cn=0,n=4
        11 002173   200722 000001                    ADSC9   DCBTAB,A,AUTO            cn=0,n=1

     1006     7758    5                     END;

     1007     7759    4                END;

     1008     7760    3           END;

   7760 11 002174   000001 035007                    ADLA    1,DL
        11 002175   200776 755100                    STA     I,,AUTO
        11 002176   000144 115007                    CMPA    100,DL
        11 002177   002105 602000 11                 TNC     s:7743

     1009     7761    2        FPT_TRUNC.V.DCB# = DCBNUM(F$COMAC);

   7761 11 002200   000000 236007 xsym               LDQ     F$COMAC,DL
        11 002201   000000 620006                    EAX0    0,QL
        11 002202   004300 740000 1                  STX0    FPT_TRUNC+2

     1010     7762    3        CALL M$TRUNC (FPT_TRUNC) WHENALTRETURN DO; END;

   7762 11 002203   004276 630400 1                  EPPR0   FPT_TRUNC
        11 002204   450003 713400                    CLIMB   alt,+20483
        11 002205   400000 401760                    pmme    nvectors=1
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:132  
        11 002206   002210 702000 11                 TSX2    s:7763
        11 002207   002210 710000 11                 TRA     s:7763

     1011     7763    2   END CLOSE_DCBS;

   7763 11 002210   200774 221300                    LDX1  ! @FILE#+3,,AUTO
        11 002211   000001 702211                    TSX2  ! 1,X1

     1012     7764        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:133  
     1013     7765    1   PROCESS_STATISTICS: PROC;

   7765 11 002212   200760 741300       PROCESS_STA* STX1  ! EXTST_BYTE7+2,,AUTO

     1014     7766    2        IF NOT EL_DEVSTATS THEN RETURN;

   7766 11 002213   003037 234000 1                  SZN     EL_DEVSTATS
        11 002214   002216 604000 11                 TMI     s:7767

   7766 11 002215   000001 702211                    TSX2  ! 1,X1

     1015     7767    2        CALL M$TIME(CUR_UTS);

   7767 11 002216   003242 630400 1                  EPPR0   CUR_UTS
        11 002217   020004 713400                    CLIMB   8196
        11 002220   402000 401760                    pmme    nvectors=5

     1016     7768    2        CALL XUD$UTS_DIFF_SEC(LAST_DEVSTATS,CURUTS,0);

   7768 11 002221   000000 236000 12                 LDQ     0
        11 002222   201002 756100                    STQ     I+4,,AUTO
        11 002223   000001 236000 12                 LDQ     1
        11 002224   201001 756100                    STQ     I+3,,AUTO
        11 002225   200044 630500                    EPPR0   LAST_DEVSTATS,,AUTO
        11 002226   201000 450500                    STP0    I+2,,AUTO
        11 002227   201000 630500                    EPPR0   I+2,,AUTO
        11 002230   000021 631400 xsym               EPPR1   B_VECTNIL+17
        11 002231   000000 701000 xent               TSX1    XUD$UTS_DIFF_SEC
        11 002232   000000 011000                    NOP     0

     1017     7769    2        LAST_DEVSTATS = LAST_DEVSTATS/1800;

   7769 11 002233   200044 236100                    LDQ     LAST_DEVSTATS,,AUTO
        11 002234   000001 772000                    QRL     1
        11 002235   001604 506007                    DIV     900,DL
        11 002236   200044 756100                    STQ     LAST_DEVSTATS,,AUTO

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:134  
     1018     7770    2        CALL XUD$UTS_ADJ_25TH(LAST_DEVSTATS,0,LAST_DEVSTATS*30*%UTS_25TH_MIN#);

   7770 11 002237   127710 402007                    MPY     45000,DL
        11 002240   201000 756100                    STQ     I+2,,AUTO
        11 002241   201000 630500                    EPPR0   I+2,,AUTO
        11 002242   201003 450500                    STP0    I+5,,AUTO
        11 002243   000000 236000 12                 LDQ     0
        11 002244   201002 756100                    STQ     I+4,,AUTO
        11 002245   200044 631500                    EPPR1   LAST_DEVSTATS,,AUTO
        11 002246   201001 451500                    STP1    I+3,,AUTO
        11 002247   201001 630500                    EPPR0   I+3,,AUTO
        11 002250   000021 631400 xsym               EPPR1   B_VECTNIL+17
        11 002251   000000 701000 xent               TSX1    XUD$UTS_ADJ_25TH
        11 002252   000000 011000                    NOP     0

     1019     7771    2        DCTX = 1;

   7771 11 002253   000001 235007                    LDA     1,DL
        11 002254   200041 755100                    STA     DCTX,,AUTO

     1020     7772    3        DO WHILE (DCTX <= MAXDCTX);

   7772 11 002255   200041 236100                    LDQ     DCTX,,AUTO
        11 002256   002451 604000 11                 TMI     s:7816
        11 002257   200040 116100                    CMPQ    MAXDCTX,,AUTO
        11 002260   002451 605400 11                 TPNZ    s:7816

     1021     7773    3             DCT$ = NI$DCT$(DCTX);

   7773 11 002261   002165 470400 1                  LDP0    N$DCT$$
        11 002262   200041 720100                    LXL0    DCTX,,AUTO
        11 002263   000000 236110                    LDQ     0,X0,PR0
        11 002264   002163 756000 1                  STQ     DCT$

     1022     7774    3             DCTPTR.SEGID = %SPCL1SID;

   7774 11 002265   006021 236007                    LDQ     3089,DL
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:135  
        11 002266   002163 752003 1                  STCQ    DCT$,'03'O

     1023     7775    3             IF DCT.TYPE = %DV_MPC THEN

   7775 11 002267   002163 471400 1                  LDP1    DCT$
        11 002270   100007 236100                    LDQ     7,,PR1
        11 002271   007700 376007                    ANQ     4032,DL
        11 002272   000700 116007                    CMPQ    448,DL
        11 002273   002442 601000 11                 TNZ     s:7814

     1024     7776    4             DO;

     1025     7777    4                  SQH$ = DCT.SQH$;

   7777 11 002274   100022 236100                    LDQ     18,,PR1
        11 002275   002161 756000 1                  STQ     SQH$

     1026     7778    4                  SQHPTR.SEGID = %SPCL1SID;

   7778 11 002276   006021 236007                    LDQ     3089,DL
        11 002277   002161 752003 1                  STCQ    SQH$,'03'O

     1027     7779    5                  DO MPC_NUM = 0 TO %N_MPCSPERSQH - 1;

   7779 11 002300   200043 450100                    STZ     MPC_NUM,,AUTO
        11 002301   002426 710000 11                 TRA     s:7811+3

     1028     7780    5                       IF SQH.MPC$(MPC_NUM) ~= ADDR(NIL)

   7780 11 002302   002161 470400 1                  LDP0    SQH$
        11 002303   200043 720100                    LXL0    MPC_NUM,,AUTO
        11 002304   000005 236110                    LDQ     5,X0,PR0
        11 002305   000001 116000 xsym               CMPQ    B_VECTNIL+1
        11 002306   002423 600000 11                 TZE     s:7811

     1029     7781    6                       THEN DO;

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:136  
     1030     7782    6                            DCT$ = SQH.MPC$(MPC_NUM);

   7782 11 002307   002163 756000 1                  STQ     DCT$

     1031     7783    6                            DCTPTR.SEGID = %SPCL1SID;

   7783 11 002310   006021 236007                    LDQ     3089,DL
        11 002311   002163 752003 1                  STCQ    DCT$,'03'O

     1032     7784    6                            IF NOT DCT.STATUS.DOWN

   7784 11 002312   002163 471400 1                  LDP1    DCT$
        11 002313   100027 234100                    SZN     23,,PR1
        11 002314   002423 604000 11                 TMI     s:7811
        11 002315   100041 236100                    LDQ     33,,PR1
        11 002316   000212 116000 2                  CMPQ    FPT_EVENT+16
        11 002317   002423 600000 11                 TZE     s:7811
        11 002320   000213 116000 2                  CMPQ    FPT_EVENT+17
        11 002321   002423 600000 11                 TZE     s:7811
        11 002322   000214 116000 2                  CMPQ    FPT_EVENT+18
        11 002323   002423 600000 11                 TZE     s:7811
        11 002324   000215 116000 2                  CMPQ    FPT_EVENT+19
        11 002325   002423 600000 11                 TZE     s:7811
        11 002326   100027 236100                    LDQ     23,,PR1
        11 002327   170000 316003                    CANQ    61440,DU
        11 002330   002423 601000 11                 TNZ     s:7811

     1033     7785    6                                 AND NOT ( DCT.MPC.FWNAME = 'D388' OR
     1034     7786    6                                 DCT.MPC.FWNAME = 'IFDK' OR
     1035     7787    6                                 DCT.MPC.FWNAME = 'M460' OR
     1036     7788    6                                 DCT.MPC.FWNAME = 'IFTP')
     1037     7789    6                                 AND ( DCT.STATUS.TND = 0 )
     1038     7790    7                            THEN DO;

     1039     7791    7                                 MPC_NAME = DCT.DEVNM;

   7791 11 002331   040100 100500                    MLR     fill='040'O
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:137  
        11 002332   100002 000010                    ADSC9   2,,PR1                   cn=0,n=8
        11 002333   200065 000010                    ADSC9   MPC_NAME,,AUTO           cn=0,n=8

     1040     7792    7                                 FW_TYPE = DCT.MPC.FWNAME;

   7792 11 002334   100041 236100                    LDQ     33,,PR1
        11 002335   200064 756100                    STQ     FW_TYPE,,AUTO

     1041     7793    7                                 DQH$ = DCT.DQH$;

   7793 11 002336   100023 236100                    LDQ     19,,PR1
        11 002337   002162 756000 1                  STQ     DQH$

     1042     7794    7                                 DQHPTR.SEGID = %SPCL1SID;

   7794 11 002340   006021 236007                    LDQ     3089,DL
        11 002341   002162 752003 1                  STCQ    DQH$,'03'O

     1043     7795    7                                 IF NOT DQH.STATUS.DOWN

   7795 11 002342   002162 473400 1                  LDP3    DQH$
        11 002343   300001 236100                    LDQ     1,,PR3
        11 002344   200000 316003                    CANQ    65536,DU
        11 002345   002423 601000 11                 TNZ     s:7811
        11 002346   300020 236100                    LDQ     16,,PR3
        11 002347   740000 316003                    CANQ    -16384,DU
        11 002350   002423 601000 11                 TNZ     s:7811

     1044     7796    7                                      AND NOT DQH.CHANSTATE
     1045     7797    8                                 THEN DO;

     1046     7798    8                                      DEV_IOQ.V.CHAN# = DQH.IOCHAN.CHANNEL;

   7798 11 002351   300001 236100                    LDQ     1,,PR3
        11 002352   000177 376003                    ANQ     127,DU
        11 002353   003241 552020 1                  STBQ    DEV_IOQ+7,'20'O

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:138  
     1047     7799    8                                      DEV_IOQ.V.IOM# = DQH.IOCHAN.IOM;

   7799 11 002354   300001 236100                    LDQ     1,,PR3
        11 002355   000600 376003                    ANQ     384,DU
        11 002356   000002 736000                    QLS     2
        11 002357   003241 552040 1                  STBQ    DEV_IOQ+7,'40'O

     1048     7800    8                                      CALL MPCSTATS;

   7800 11 002360   003006 701000 11                 TSX1    MPCSTATS
        11 002361   000000 011000                    NOP     0

     1049     7801    8                                      DO SUBSYSTEM_DCTX = SQH.FDCT TO

   7801 11 002362   002161 470400 1                  LDP0    SQH$
        11 002363   000002 236100                    LDQ     2,,PR0
        11 002364   000022 772000                    QRL     18
        11 002365   200042 756100                    STQ     SUBSYSTEM_DCTX,,AUTO
        11 002366   002411 710000 11                 TRA     s:7807+3

     1050     7802    9                                           (SQH.FDCT + SQH.NDCT - 1);
     1051     7803    9                                           DCT$ = NI$DCT$(SUBSYSTEM_DCTX);

   7803 11 002367   002165 470400 1                  LDP0    N$DCT$$
        11 002370   200042 720100                    LXL0    SUBSYSTEM_DCTX,,AUTO
        11 002371   000000 236110                    LDQ     0,X0,PR0
        11 002372   002163 756000 1                  STQ     DCT$

     1052     7804    9                                           DCTPTR.SEGID = %SPCL1SID;

   7804 11 002373   006021 236007                    LDQ     3089,DL
        11 002374   002163 752003 1                  STCQ    DCT$,'03'O

     1053     7805    9                                          IF (DCT.TYPE ~= %DV_MPC) AND NOT DCT.STATUS.
              7805                                                    DOWN

   7805 11 002375   002163 471400 1                  LDP1    DCT$
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:139  
        11 002376   100007 236100                    LDQ     7,,PR1
        11 002377   007700 376007                    ANQ     4032,DL
        11 002400   000700 116007                    CMPQ    448,DL
        11 002401   002406 600000 11                 TZE     s:7807
        11 002402   100027 234100                    SZN     23,,PR1
        11 002403   002406 604000 11                 TMI     s:7807

     1054     7806    9                                           THEN CALL DEVSTATS;

   7806 11 002404   002453 701000 11                 TSX1    DEVSTATS
        11 002405   000000 011000                    NOP     0

     1055     7807    9                                         END; /* DO SUBSYSTEM_DCTX */

   7807 11 002406   200042 235100                    LDA     SUBSYSTEM_DCTX,,AUTO
        11 002407   000001 035007                    ADLA    1,DL
        11 002410   200042 755100                    STA     SUBSYSTEM_DCTX,,AUTO
        11 002411   002161 470400 1                  LDP0    SQH$
        11 002412   000002 236100                    LDQ     2,,PR0
        11 002413   777777 376007                    ANQ     -1,DL
        11 002414   201000 756100                    STQ     I+2,,AUTO
        11 002415   000002 236100                    LDQ     2,,PR0
        11 002416   000022 772000                    QRL     18
        11 002417   201000 036100                    ADLQ    I+2,,AUTO
        11 002420   200042 116100                    CMPQ    SUBSYSTEM_DCTX,,AUTO
        11 002421   002423 600000 11                 TZE     s:7811
        11 002422   002367 603000 11                 TRC     s:7803

     1056     7808    8                                    END;   /* NOT DQH.STATUS.DOWN */

     1057     7809    7                               END;

     1058     7810    6                          END;             /* SQH.MPC$(MPC_NUM) ~= ADDR(NIL) */

     1059     7811    5                     END;                  /* DO MPC_NUM */

   7811 11 002423   200043 235100                    LDA     MPC_NUM,,AUTO
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:140  
        11 002424   000001 035007                    ADLA    1,DL
        11 002425   200043 755100                    STA     MPC_NUM,,AUTO
        11 002426   200043 235100                    LDA     MPC_NUM,,AUTO
        11 002427   000002 115007                    CMPA    2,DL
        11 002430   002302 602000 11                 TNC     s:7780

     1060     7812    4                  DCTX = SQH.FDCT + SQH.NDCT;

   7812 11 002431   002161 470400 1                  LDP0    SQH$
        11 002432   000002 236100                    LDQ     2,,PR0
        11 002433   777777 376007                    ANQ     -1,DL
        11 002434   201000 756100                    STQ     I+2,,AUTO
        11 002435   000002 236100                    LDQ     2,,PR0
        11 002436   000022 772000                    QRL     18
        11 002437   201000 036100                    ADLQ    I+2,,AUTO
        11 002440   200041 756100                    STQ     DCTX,,AUTO

     1061     7813    4                END;                       /* DCT.TYPE = %DV_MPC */

   7813 11 002441   002445 710000 11                 TRA     s:7815

     1062     7814    3             ELSE DCTX = DCTX + 1;

   7814 11 002442   200041 235100                    LDA     DCTX,,AUTO
        11 002443   000001 035007                    ADLA    1,DL
        11 002444   200041 755100                    STA     DCTX,,AUTO

     1063     7815    3           END;                            /* DO WHILE */

   7815 11 002445   200041 236100                    LDQ     DCTX,,AUTO
        11 002446   002451 604000 11                 TMI     s:7816
        11 002447   200040 116100                    CMPQ    MAXDCTX,,AUTO
        11 002450   002261 604400 11                 TMOZ    s:7773

     1064     7816    2        RETURN;

   7816 11 002451   200760 221300                    LDX1  ! EXTST_BYTE7+2,,AUTO
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:141  
        11 002452   000001 702211                    TSX2  ! 1,X1

     1065     7817    2   END PROCESS_STATISTICS;
     1066     7818        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:142  
     1067     7819    1   DEVSTATS: PROC;

   7819 11 002453   200762 741300       DEVSTATS     STX1  ! @CHAR_2+1,,AUTO

     1068     7820    2        STATS$ = ADDR(DEVBUF.STATS);

   7820 11 002454   000045 236000 12                 LDQ     37
        11 002455   200010 756100                    STQ     STATS$,,AUTO

     1069     7821    2        IOQ_FLAG = '0'B;

   7821 11 002456   200047 450100                    STZ     IOQ_FLAG,,AUTO

     1070     7822    3        DO CASE(DCT.TYPE);

   7822 11 002457   002163 470400 1                  LDP0    DCT$
        11 002460   000007 236100                    LDQ     7,,PR0
        11 002461   000006 772000                    QRL     6
        11 002462   000077 376007                    ANQ     63,DL
        11 002463   000004 136007                    SBLQ    4,DL
        11 002464   000003 116007                    CMPQ    3,DL
        11 002465   002467 602006 11                 TNC     s:7822+8,QL
        11 002466   002541 710000 11                 TRA     s:7846
        11 002467   002472 710000 11                 TRA     s:7824
        11 002470   002541 710000 11                 TRA     s:7846
        11 002471   002511 710000 11                 TRA     s:7832

     1071     7823    3        CASE(%DV_MT);

     1072     7824    3           IF FW_TYPE = 'M601' OR FW_TYPE = 'M610'

   7824 11 002472   200064 236100                    LDQ     FW_TYPE,,AUTO
        11 002473   000216 116000 2                  CMPQ    FPT_EVENT+20
        11 002474   002501 600000 11                 TZE     s:7827
        11 002475   000217 116000 2                  CMPQ    FPT_EVENT+21
        11 002476   002501 600000 11                 TZE     s:7827
        11 002477   000220 116000 2                  CMPQ    FPT_EVENT+22
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:143  
        11 002500   002541 601000 11                 TNZ     s:7846

     1073     7825    3                OR FW_TYPE = 'TPUR'
     1074     7826    4           THEN DO;

     1075     7827    4                IOQ_FLAG = '1'B;

   7827 11 002501   400000 236003                    LDQ     -131072,DU
        11 002502   200047 756100                    STQ     IOQ_FLAG,,AUTO

     1076     7828    4                DEVBUF.DCWLIST = MT_BUFINIT;

   7828 11 002503   000000 100400                    MLR     fill='000'O
        11 002504   002672 000020 1                  ADSC9   MT_BUFINIT               cn=0,n=16
        11 002505   002166 000020 1                  ADSC9   DEVBUF                   cn=0,n=16

     1077     7829    4                NUM_CNTRS = 8;

   7829 11 002506   000010 235007                    LDA     8,DL
        11 002507   200045 755100                    STA     NUM_CNTRS,,AUTO

     1078     7830    4              END;

   7830 11 002510   002541 710000 11                 TRA     s:7846

     1079     7831    3        CASE(%DV_DP);

     1080     7832    3           IF (FW_TYPE = 'M191' OR FW_TYPE = 'D500' /* MPC OR DAU */

   7832 11 002511   200064 236100                    LDQ     FW_TYPE,,AUTO
        11 002512   000221 116000 2                  CMPQ    FPT_EVENT+23
        11 002513   002520 600000 11                 TZE     s:7835
        11 002514   000222 116000 2                  CMPQ    FPT_EVENT+24
        11 002515   002520 600000 11                 TZE     s:7835
        11 002516   000223 116000 2                  CMPQ    FPT_EVENT+25
        11 002517   002527 601000 11                 TNZ     s:7839

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:144  
     1081     7833    3                OR FW_TYPE = 'MSP8')
     1082     7834    4           THEN DO;

     1083     7835    4                IOQ_FLAG = '1'B;

   7835 11 002520   400000 236003                    LDQ     -131072,DU
        11 002521   200047 756100                    STQ     IOQ_FLAG,,AUTO

     1084     7836    4                DEVBUF.DCWLIST = DP_BUFINIT;

   7836 11 002522   000000 100400                    MLR     fill='000'O
        11 002523   002666 000020 1                  ADSC9   DP_BUFINIT               cn=0,n=16
        11 002524   002166 000020 1                  ADSC9   DEVBUF                   cn=0,n=16

     1085     7837    4                NUM_CNTRS = 16;

   7837 11 002525   000020 235007                    LDA     16,DL
        11 002526   200045 755100                    STA     NUM_CNTRS,,AUTO

     1086     7838    4              END;

     1087     7839    3           IF FW_TYPE = 'IIDK'             /* MDS DISCS */

   7839 11 002527   200064 236100                    LDQ     FW_TYPE,,AUTO
        11 002530   000224 116000 2                  CMPQ    FPT_EVENT+26
        11 002531   002541 601000 11                 TNZ     s:7846

     1088     7840    4           THEN DO;

     1089     7841    4                IOQ_FLAG = '1'B;

   7841 11 002532   400000 236003                    LDQ     -131072,DU
        11 002533   200047 756100                    STQ     IOQ_FLAG,,AUTO

     1090     7842    4                DEVBUF.DCWLIST = MDS_BUFINIT;

   7842 11 002534   000000 100400                    MLR     fill='000'O
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:145  
        11 002535   002676 000020 1                  ADSC9   MDS_BUFINIT              cn=0,n=16
        11 002536   002166 000020 1                  ADSC9   DEVBUF                   cn=0,n=16

     1091     7843    4                NUM_CNTRS = 11;

   7843 11 002537   000013 235007                    LDA     11,DL
        11 002540   200045 755100                    STA     NUM_CNTRS,,AUTO

     1092     7844    4              END;

     1093     7845    3        END;                               /* DO CASE DCT.TYPE */

     1094     7846    2        IF IOQ_FLAG THEN

   7846 11 002541   200047 234100                    SZN     IOQ_FLAG,,AUTO
        11 002542   003004 605000 11                 TPL     DEVSTATS_EXIT

     1095     7847    3        DO;

     1096     7848    4             DO I = 0 TO 15;

   7848 11 002543   200051 450100                    STZ     I,,AUTO

     1097     7849    4                  DEVBUF.STATS(I) = 0;     /* CLEAR COUNTERS */

   7849 11 002544   200051 720100                    LXL0    I,,AUTO
        11 002545   002172 450010 1                  STZ     DEVBUF+4,X0

     1098     7850    4                END;

   7850 11 002546   200051 235100                    LDA     I,,AUTO
        11 002547   000001 035007                    ADLA    1,DL
        11 002550   200051 755100                    STA     I,,AUTO
        11 002551   000020 115007                    CMPA    16,DL
        11 002552   002544 602000 11                 TNC     s:7849

     1099     7851    4             DO I = 0 TO 29;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:146  

   7851 11 002553   200051 450100                    STZ     I,,AUTO

     1100     7852    4                  DEVBUF.ZERO(I) = 0;

   7852 11 002554   200051 720100                    LXL0    I,,AUTO
        11 002555   002212 450010 1                  STZ     DEVBUF+20,X0

     1101     7853    4                END;

   7853 11 002556   200051 235100                    LDA     I,,AUTO
        11 002557   000001 035007                    ADLA    1,DL
        11 002560   200051 755100                    STA     I,,AUTO
        11 002561   000036 115007                    CMPA    30,DL
        11 002562   002554 602000 11                 TNC     s:7852

     1102     7854    3             DEV_IOQ.V.DLA.DCTX# = SUBSYSTEM_DCTX;

   7854 11 002563   200042 236100                    LDQ     SUBSYSTEM_DCTX,,AUTO
        11 002564   000025 736000                    QLS     21
        11 002565   003237 676000 1                  ERQ     DEV_IOQ+5
        11 002566   777770 376003                    ANQ     -8,DU
        11 002567   003237 656000 1                  ERSQ    DEV_IOQ+5

     1103     7855    3             DEV_IOQ.V.WAIT# = '0'B;       /* SET WAIT = NO */

   7855 11 002570   000046 236000 12                 LDQ     38
        11 002571   003236 356000 1                  ANSQ    DEV_IOQ+4

     1104     7856    3             DEV_IOQ.V.EVENT# = 99;

   7856 11 002572   000143 235007                    LDA     99,DL
        11 002573   003240 755000 1                  STA     DEV_IOQ+6

     1105     7857    3             EL_POLL_IN_PROGRESS = '1'B;

   7857 11 002574   400000 236003                    LDQ     -131072,DU
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:147  
        11 002575   002007 756000 1                  STQ     EL_POLL_IN_PROGRESS

     1106     7858    3             CALL M$IOQ(DEV_IOQ) ALTRET(DEVSTATS_EXIT); /* READ STATISTICS COUNTERS */

   7858 11 002576   003232 630400 1                  EPPR0   DEV_IOQ
        11 002577   470006 713400                    CLIMB   alt,+28678
        11 002600   400400 401760                    pmme    nvectors=2
        11 002601   003004 702000 11                 TSX2    DEVSTATS_EXIT

     1107     7859    3             FPT_WAIT.V.UNITS# = SECS_PER_MIN;

   7859 11 002602   000074 235007                    LDA     60,DL
        11 002603   003046 755000 1                  STA     FPT_WAIT+4

     1108     7860    3             CALL M$WAIT(FPT_WAIT);

   7860 11 002604   003042 630400 1                  EPPR0   FPT_WAIT
        11 002605   020006 713400                    CLIMB   8198
        11 002606   400400 401760                    pmme    nvectors=2

     1109     7861    4             DO WHILE (EL_POLL_IN_PROGRESS);

   7861 11 002607   002007 234000 1                  SZN     EL_POLL_IN_PROGRESS
        11 002610   002640 605000 11                 TPL     s:7873

     1110     7862    4                  CALL MOVETOFILE;

   7862 11 002611   000425 701000 11                 TSX1    MOVETOFILE
        11 002612   000000 011000                    NOP     0

     1111     7863    5                  DO CASE(CGREAD_STATE);

   7863 11 002613   002004 235000 1                  LDA     CGREAD_STATE
        11 002614   000004 115007                    CMPA    4,DL
        11 002615   002617 602005 11                 TNC     s:7863+4,AL
        11 002616   002634 710000 11                 TRA     s:7871
        11 002617   002634 710000 11                 TRA     s:7871
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:148  
        11 002620   002634 710000 11                 TRA     s:7871
        11 002621   002623 710000 11                 TRA     s:7865
        11 002622   002627 710000 11                 TRA     s:7868

     1112     7864    5                  CASE(2);

     1113     7865    5                     CGREAD_STATE = 0;

   7865 11 002623   002004 450000 1                  STZ     CGREAD_STATE

     1114     7866    5                     CALL KEYIN_EVENT;

   7866 11 002624   001410 701000 11                 TSX1    KEYIN_EVENT
        11 002625   000000 011000                    NOP     0
        11 002626   002634 710000 11                 TRA     s:7871

     1115     7867    5                  CASE(3);

     1116     7868    5                     CGREAD_STATE = 0;

   7868 11 002627   002004 450000 1                  STZ     CGREAD_STATE

     1117     7869    5                     CALL ELF$CONS_ERR(CGREAD_ERR);

   7869 11 002630   000002 630400 12                 EPPR0   2
        11 002631   000017 631400 xsym               EPPR1   B_VECTNIL+15
        11 002632   000000 701000 xent               TSX1    ELF$CONS_ERR
        11 002633   000000 011000                    NOP     0

     1118     7870    5                  END;                     /* DO CASE */

     1119     7871    4                  CALL SLEEP;

   7871 11 002634   000363 701000 11                 TSX1    SLEEP
        11 002635   000000 011000                    NOP     0

     1120     7872    4                END;                       /* DO WHILE */
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:149  

   7872 11 002636   002007 234000 1                  SZN     EL_POLL_IN_PROGRESS
        11 002637   002611 604000 11                 TMI     s:7862

     1121     7873    3             CALL MOVETOFILE;

   7873 11 002640   000425 701000 11                 TSX1    MOVETOFILE
        11 002641   000000 011000                    NOP     0

     1122     7874    3             IF NWIO_TYC&~%TYC_EGV

   7874 11 002642   000030 236000 xsym               LDQ     B_VECTNIL+24
        11 002643   000027 676000 xsym               ERQ     B_VECTNIL+23
        11 002644   002002 376000 1                  ANQ     NWIO_TYC
        11 002645   003004 601000 11                 TNZ     DEVSTATS_EXIT

     1123     7875    3             THEN GOTO DEVSTATS_EXIT;
     1124     7876    3             IF DEVBUF.STATS = '0'B

   7876 11 002646   000000 106400                    CMPC    fill='000'O
        11 002647   002172 000100 1                  ADSC9   DEVBUF+4                 cn=0,n=64
        11 002650   000002 000002 xsym               ADSC9   B_VECTNIL+2              cn=0,n=2
        11 002651   003004 600000 11                 TZE     DEVSTATS_EXIT

     1125     7877    3             THEN GOTO DEVSTATS_EXIT;
     1126     7878    3             EL$DEVSTATS = '0'B;

   7878 11 002652   000000 100400                    MLR     fill='000'O
        11 002653   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
        11 002654   002757 000124 1                  ADSC9   EL$DEVSTATS              cn=0,n=84

     1127     7879    3             EL$DEVSTATS.DEVNM = DCT.DEVNM;

   7879 11 002655   002163 470400 1                  LDP0    DCT$
        11 002656   040000 100500                    MLR     fill='040'O
        11 002657   000002 000010                    ADSC9   2,,PR0                   cn=0,n=8
        11 002660   002757 000010 1                  ADSC9   EL$DEVSTATS              cn=0,n=8
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:150  

     1128     7880    3             EL$DEVSTATS.MPCNAME = MPC_NAME;

   7880 11 002661   040000 100500                    MLR     fill='040'O
        11 002662   200065 000010                    ADSC9   MPC_NAME,,AUTO           cn=0,n=8
        11 002663   002761 000010 1                  ADSC9   EL$DEVSTATS+2            cn=0,n=8

     1129     7881    3             EL$DEVSTATS.FW_NAME = FW_TYPE;

   7881 11 002664   200064 236100                    LDQ     FW_TYPE,,AUTO
        11 002665   002763 756000 1                  STQ     EL$DEVSTATS+4

     1130     7882    3             IF FW_TYPE = 'IIDK'           /* MDS DISCS */

   7882 11 002666   000224 116000 2                  CMPQ    FPT_EVENT+26
        11 002667   002756 601000 11                 TNZ     s:7897

     1131     7883    4             THEN DO;

     1132     7884    5                  DO K = 0 TO 1;

   7884 11 002670   200053 450100                    STZ     K,,AUTO

     1133     7885    5                       CALL REFMT_WORD(MDS_STATS_CNTRS(K));

   7885 11 002671   200053 236100                    LDQ     K,,AUTO
        11 002672   000022 736000                    QLS     18
        11 002673   200010 036100                    ADLQ    STATS$,,AUTO
        11 002674   200765 756100                    STQ     @CHAR_2+4,,AUTO
        11 002675   003410 701000 11                 TSX1    REFMT_WORD
        11 002676   000000 011000                    NOP     0

     1134     7886    5                       EL$DEVSTATS.STATISTICS(K) = MDS_STATS_CNTRS(K);

   7886 11 002677   200010 470500                    LDP0    STATS$,,AUTO
        11 002700   200053 720100                    LXL0    K,,AUTO
        11 002701   000000 235110                    LDA     0,X0,PR0
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:151  
        11 002702   002764 755010 1                  STA     EL$DEVSTATS+5,X0

     1135     7887    5                     END;

   7887 11 002703   200053 236100                    LDQ     K,,AUTO
        11 002704   000001 036007                    ADLQ    1,DL
        11 002705   200053 756100                    STQ     K,,AUTO
        11 002706   000002 116007                    CMPQ    2,DL
        11 002707   002671 602000 11                 TNC     s:7885

     1136     7888    5                  DO K = 2 TO 3;

   7888 11 002710   000002 235007                    LDA     2,DL
        11 002711   200053 755100                    STA     K,,AUTO

     1137     7889    5                       CALL REFMT_HALF(MDS_STATS_CNTRS(K));

   7889 11 002712   200053 236100                    LDQ     K,,AUTO
        11 002713   000022 736000                    QLS     18
        11 002714   200010 036100                    ADLQ    STATS$,,AUTO
        11 002715   200765 756100                    STQ     @CHAR_2+4,,AUTO
        11 002716   003442 701000 11                 TSX1    REFMT_HALF
        11 002717   000000 011000                    NOP     0

     1138     7890    5                       EL$DEVSTATS.STATISTICS(K) = MDS_STATS_CNTRS(K);

   7890 11 002720   200010 470500                    LDP0    STATS$,,AUTO
        11 002721   200053 720100                    LXL0    K,,AUTO
        11 002722   000000 235110                    LDA     0,X0,PR0
        11 002723   002764 755010 1                  STA     EL$DEVSTATS+5,X0

     1139     7891    5                     END;

   7891 11 002724   200053 236100                    LDQ     K,,AUTO
        11 002725   000001 036007                    ADLQ    1,DL
        11 002726   200053 756100                    STQ     K,,AUTO
        11 002727   000004 116007                    CMPQ    4,DL
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:152  
        11 002730   002712 602000 11                 TNC     s:7889

     1140     7892    5                  DO K = 4 TO NUM_CNTRS - 1;

   7892 11 002731   000004 235007                    LDA     4,DL
        11 002732   200053 755100                    STA     K,,AUTO
        11 002733   002751 710000 11                 TRA     s:7895+3

     1141     7893    5                       CALL REFMT_WORD(MDS_STATS_CNTRS(K));

   7893 11 002734   200053 236100                    LDQ     K,,AUTO
        11 002735   000022 736000                    QLS     18
        11 002736   200010 036100                    ADLQ    STATS$,,AUTO
        11 002737   200765 756100                    STQ     @CHAR_2+4,,AUTO
        11 002740   003410 701000 11                 TSX1    REFMT_WORD
        11 002741   000000 011000                    NOP     0

     1142     7894    5                       EL$DEVSTATS.STATISTICS(K) = MDS_STATS_CNTRS(K);

   7894 11 002742   200010 470500                    LDP0    STATS$,,AUTO
        11 002743   200053 720100                    LXL0    K,,AUTO
        11 002744   000000 235110                    LDA     0,X0,PR0
        11 002745   002764 755010 1                  STA     EL$DEVSTATS+5,X0

     1143     7895    5                     END;

   7895 11 002746   200053 236100                    LDQ     K,,AUTO
        11 002747   000001 036007                    ADLQ    1,DL
        11 002750   200053 756100                    STQ     K,,AUTO
        11 002751   200053 236100                    LDQ     K,,AUTO
        11 002752   002755 604000 11                 TMI     s:7896
        11 002753   200045 116100                    CMPQ    NUM_CNTRS,,AUTO
        11 002754   002734 604000 11                 TMI     s:7893

     1144     7896    4                END;                       /* FW_TYPE = IIDK */

   7896 11 002755   003001 710000 11                 TRA     s:7900
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:153  

     1145     7897    4             ELSE DO K = 0 TO NUM_CNTRS - 1; /* MPC DISCS & TAPES */

   7897 11 002756   200053 450100                    STZ     K,,AUTO
        11 002757   002775 710000 11                 TRA     s:7899+3

     1146     7898    4                  EL$DEVSTATS.STATISTICS(K) = STATS_CNTRS(K);

   7898 11 002760   200053 236100                    LDQ     K,,AUTO
        11 002761   000022 402007                    MPY     18,DL
        11 002762   201000 756100                    STQ     I+2,,AUTO
        11 002763   200053 236100                    LDQ     K,,AUTO
        11 002764   000044 402007                    MPY     36,DL
        11 002765   200010 470500                    LDP0    STATS$,,AUTO
        11 002766   201000 235100                    LDA     I+2,,AUTO
        11 002767   003006 061505                    CSR     bolr='003'O
        11 002770   000000 000022                    BDSC    0,A,PR0                  by=0,bit=0,n=18
        11 002771   002764 000044 1                  BDSC    EL$DEVSTATS+5,Q          by=0,bit=0,n=36

     1147     7899    4                END;

   7899 11 002772   200053 235100                    LDA     K,,AUTO
        11 002773   000001 035007                    ADLA    1,DL
        11 002774   200053 755100                    STA     K,,AUTO
        11 002775   200053 236100                    LDQ     K,,AUTO
        11 002776   003001 604000 11                 TMI     s:7900
        11 002777   200045 116100                    CMPQ    NUM_CNTRS,,AUTO
        11 003000   002760 604000 11                 TMI     s:7898

     1148     7900    3             CALL M$WRSYSLOG(WRITE_DEVSTATS);

   7900 11 003001   003256 630400 1                  EPPR0   WRITE_DEVSTATS
        11 003002   070001 713400                    CLIMB   28673
        11 003003   400400 401760                    pmme    nvectors=2

     1149     7901    3           END;                            /* IF IOQFLAG */

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:154  
     1150     7902    2   DEVSTATS_EXIT:
     1151     7903    2        RETURN;

   7903 11 003004   200762 221300       DEVSTATS_EX* LDX1  ! @CHAR_2+1,,AUTO
        11 003005   000001 702211                    TSX2  ! 1,X1

     1152     7904    2   END DEVSTATS;
     1153     7905        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:155  
     1154     7906        /********************************************************************
     1155     7907        *                DEVICE STATISTICS COUNTERS                         *
     1156     7908        *                  ( RETURNED BY M$IOQ )                            *
     1157     7909        * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
     1158     7910        *                       MPC/TPUR TAPES                             *
     1159     7911        * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
     1160     7912        *  WORD 0    RECORDS READ (BITS 0-17)
     1161     7913        *            RECORDS WRITTEN (BITS 18-35)                           *
     1162     7914        *       1    RECORDS WITH WRITE ERRORS (BITS 0-17)                  *
     1163     7915        *            RECORDS WITH READ ERRORS (BITS 18-35)                  *
     1164     7916        *       2    TRANSFER TIMING ERRORS (BITS 0-17)                     *
     1165     7917        *            MARGINAL RECORDS (BITS 18-35)                          *
     1166     7918        *       3    P.E. RECORDS WITH SINGLE TRACK CORRECT (BITS 0-17)     *
     1167     7919        *            MTC READ COUNT (BITS 18-35)                            *
     1168     7920        *                                                                   *
     1169     7921        * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
     1170     7922        *                        MPC/DAU DISCS                              *
     1171     7923        * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
     1172     7924        *  WORD 0    MOVEMENT SEEKS (BITS 0-17)                             *
     1173     7925        *            DATA SECTORS WRITTEN (BITS 18-35)                      *
     1174     7926        *       1    DATA SECTORS READ (BITS 0-17)                          *
     1175     7927        *            DATA TRANSFER COMMANDS EXECUTED (BITS 18-35)           *
     1176     7928        *       2    SEEK INCOMPLETES (BITS 0-17)                           *
     1177     7929        *            HEADER VERIFICATION ERRORS (BITS 18-35)                *
     1178     7930        *       3    TRANSFER TIMING ERRORS (BITS 0-17)                     *
     1179     7931        *            DATA CHECK CHARACTER ALERTS (BITS 18-35)               *
     1180     7932        *       4    COUNT CHECK CHARACTER ALERTS (BITS 0-17)               *
     1181     7933        *            DLI PARITY ERRORS (BITS 18-35)                         *
     1182     7934        *       5    ALTERNATE TRACKS PROCESSED (BITS 0-17)                 *
     1183     7935        *            EDAC CORRECTABLE ERRORS (BITS 18-35)                   *
     1184     7936        *       6    EDAC UNCORRECTABLE ERRORS (BITS 0-17)                  *
     1185     7937        *            POSITION OFFSET RETRYS/LATENCY (BITS 18-35)            *
     1186     7938        *       7    DATA CORRECTIONS INITIATED/ RECORD RETRIES (BITS 0-17) *
     1187     7939        *            SEARCH ALERTS (BITS 18-35)                             *
     1188     7940        *                                                                   */
     1189     7941        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:156  
     1190     7942        /* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -*
     1191     7943        *                  MDS DISCS (ASCII FORMAT)                         *
     1192     7944        * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
     1193     7945        *  WORD 0    NUMBER OF BYTES READ (BITS 0-35)                       *
     1194     7946        *       1    NUMBER OF BYTES WRITTEN (BITS 0-35)                    *
     1195     7947        *       2    NUMBER OF SEEKS PERFORMED (BITS 0-17)                  *
     1196     7948        *            NUMBER OF SEEK ERRORS (BITS 18-35)                     *
     1197     7949        *       3    NUMBER OF DATA CHECKS CORRECTED (BITS 0-17)            *
     1198     7950        *            NUMBER OF DATA CHECKS UNCORRECTED (BITS 18-35)         *
     1199     7951        *       4    NUMBER OF SEEKS (BITS 0-35)                            *
     1200     7952        *       5    NUMBER OF SEEK/READS (BITS 0-35)                       *
     1201     7953        *       6    NUMBER OF SECTORS READ (BITS 0-35)                     *
     1202     7954        *       7    NUMBER OF SEEK/WRITES (BITS 0-35)                      *
     1203     7955        *       8    NUMBER OF SECTORS WRITTEN (BITS 0-35)                  *
     1204     7956        *       9    NUMBER OF RETRIES (BITS 0-35)                          *
     1205     7957        *      10    NUMBER OF LATENCIES LOST (BITS 0-35)                   *
     1206     7958        *                                                                   *
     1207     7959        ********************************************************************/
     1208     7960        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:157  
     1209     7961    1   MPCSTATS: PROC;

   7961 11 003006   200762 741300       MPCSTATS     STX1  ! @CHAR_2+1,,AUTO

     1210     7962    2        IF NOT EL_MPCSTATS THEN RETURN;

   7962 11 003007   003040 234000 1                  SZN     EL_MPCSTATS
        11 003010   003012 604000 11                 TMI     s:7963

   7962 11 003011   000001 702211                    TSX2  ! 1,X1

     1211     7963    2        STATS$ = ADDR(DEVBUF.STATS);

   7963 11 003012   000045 236000 12                 LDQ     37
        11 003013   200010 756100                    STQ     STATS$,,AUTO

     1212     7964    2        IOQ_FLAG = '0'B;

   7964 11 003014   200047 450100                    STZ     IOQ_FLAG,,AUTO

     1213     7965    3        DO SELECT(DCT.MPC.FWNAME);

   7965 11 003015   002163 470400 1                  LDP0    DCT$
        11 003016   000041 236100                    LDQ     33,,PR0
        11 003017   000223 116000 2                  CMPQ    FPT_EVENT+25
        11 003020   003025 602000 11                 TNC     s:7965+8
        11 003021   003043 600000 11                 TZE     s:7972
        11 003022   000225 116000 2                  CMPQ    FPT_EVENT+27
        11 003023   003051 601000 11                 TNZ     s:7976
        11 003024   003030 710000 11                 TRA     s:7967
        11 003025   000226 116000 2                  CMPQ    FPT_EVENT+28
        11 003026   003051 601000 11                 TNZ     s:7976
        11 003027   003030 710000 11                 TRA     s:7967

     1214     7966    3             SELECT('IPR5', 'NONE');       /* IPC/EURC UNIT RECORD CONTROLLER */

     1215     7967    3             IOQ_FLAG = '1'B;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:158  

   7967 11 003030   400000 236003                    LDQ     -131072,DU
        11 003031   200047 756100                    STQ     IOQ_FLAG,,AUTO

     1216     7968    3             DEVBUF.DCWLIST = IPC_BUFINIT;

   7968 11 003032   000000 100400                    MLR     fill='000'O
        11 003033   002702 000020 1                  ADSC9   IPC_BUFINIT              cn=0,n=16
        11 003034   002166 000020 1                  ADSC9   DEVBUF                   cn=0,n=16

     1217     7969    3             NUM_CNTRS = 34;

   7969 11 003035   000042 235007                    LDA     34,DL
        11 003036   200045 755100                    STA     NUM_CNTRS,,AUTO

     1218     7970    3             STATS$ = PINCRW( STATS$, 1);

   7970 11 003037   200010 236100                    LDQ     STATS$,,AUTO
        11 003040   000001 036003                    ADLQ    1,DU
        11 003041   200010 756100                    STQ     STATS$,,AUTO
        11 003042   003051 710000 11                 TRA     s:7976

     1219     7971    3             SELECT('MSP8');               /* DAU DISC CONTROLLER */

     1220     7972    3             IOQ_FLAG = '0'B;              /* DAU STATS NOT CURRENTLY IMPL */

   7972 11 003043   200047 450100                    STZ     IOQ_FLAG,,AUTO

     1221     7973    3             DEVBUF.DCWLIST = DAU_BUFINIT;

   7973 11 003044   000000 100400                    MLR     fill='000'O
        11 003045   002706 000020 1                  ADSC9   DAU_BUFINIT              cn=0,n=16
        11 003046   002166 000020 1                  ADSC9   DEVBUF                   cn=0,n=16

     1222     7974    3             NUM_CNTRS = 314;

   7974 11 003047   000472 235007                    LDA     314,DL
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:159  
        11 003050   200045 755100                    STA     NUM_CNTRS,,AUTO

     1223     7975    3           END;                            /* DO SELECT */

     1224     7976    2        IF IOQ_FLAG THEN

   7976 11 003051   200047 234100                    SZN     IOQ_FLAG,,AUTO
        11 003052   003371 605000 11                 TPL     MPCSTATS_EXIT

     1225     7977    3        DO;

     1226     7978    4             DO I = 0 TO 15;

   7978 11 003053   200051 450100                    STZ     I,,AUTO

     1227     7979    4                  DEVBUF.STATS(I) = 0;     /* CLEAR COUNTERS */

   7979 11 003054   200051 720100                    LXL0    I,,AUTO
        11 003055   002172 450010 1                  STZ     DEVBUF+4,X0

     1228     7980    4                END;

   7980 11 003056   200051 235100                    LDA     I,,AUTO
        11 003057   000001 035007                    ADLA    1,DL
        11 003060   200051 755100                    STA     I,,AUTO
        11 003061   000020 115007                    CMPA    16,DL
        11 003062   003054 602000 11                 TNC     s:7979

     1229     7981    4             DO I = 0 TO 299;

   7981 11 003063   200051 450100                    STZ     I,,AUTO

     1230     7982    4                  DEVBUF.ZERO(I) = 0;

   7982 11 003064   200051 720100                    LXL0    I,,AUTO
        11 003065   002212 450010 1                  STZ     DEVBUF+20,X0

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:160  
     1231     7983    4                END;

   7983 11 003066   200051 235100                    LDA     I,,AUTO
        11 003067   000001 035007                    ADLA    1,DL
        11 003070   200051 755100                    STA     I,,AUTO
        11 003071   000454 115007                    CMPA    300,DL
        11 003072   003064 602000 11                 TNC     s:7982

     1232     7984    3             DEV_IOQ.V.DLA.DCTX# = DCT.DCTX; /* DCTX OF CONTROLLER */

   7984 11 003073   002163 470400 1                  LDP0    DCT$
        11 003074   000006 236100                    LDQ     6,,PR0
        11 003075   003237 676000 1                  ERQ     DEV_IOQ+5
        11 003076   777770 376003                    ANQ     -8,DU
        11 003077   003237 656000 1                  ERSQ    DEV_IOQ+5

     1233     7985    3             DEV_IOQ.V.WAIT# = '0'B;       /* SET WAIT = NO */

   7985 11 003100   000046 236000 12                 LDQ     38
        11 003101   003236 356000 1                  ANSQ    DEV_IOQ+4

     1234     7986    3             DEV_IOQ.V.EVENT# = 99;

   7986 11 003102   000143 235007                    LDA     99,DL
        11 003103   003240 755000 1                  STA     DEV_IOQ+6

     1235     7987    3             EL_POLL_IN_PROGRESS = '1'B;

   7987 11 003104   400000 236003                    LDQ     -131072,DU
        11 003105   002007 756000 1                  STQ     EL_POLL_IN_PROGRESS

     1236     7988    3             CALL M$IOQ(DEV_IOQ) ALTRET(MPCSTATS_EXIT);

   7988 11 003106   003232 630400 1                  EPPR0   DEV_IOQ
        11 003107   470006 713400                    CLIMB   alt,+28678
        11 003110   400400 401760                    pmme    nvectors=2
        11 003111   003371 702000 11                 TSX2    MPCSTATS_EXIT
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:161  

     1237     7989    3             FPT_WAIT.V.UNITS# = SECS_PER_MIN;

   7989 11 003112   000074 235007                    LDA     60,DL
        11 003113   003046 755000 1                  STA     FPT_WAIT+4

     1238     7990    3             CALL M$WAIT(FPT_WAIT);

   7990 11 003114   003042 630400 1                  EPPR0   FPT_WAIT
        11 003115   020006 713400                    CLIMB   8198
        11 003116   400400 401760                    pmme    nvectors=2

     1239     7991    4             DO WHILE ( EL_POLL_IN_PROGRESS );

   7991 11 003117   002007 234000 1                  SZN     EL_POLL_IN_PROGRESS
        11 003120   003150 605000 11                 TPL     s:8003

     1240     7992    4                  CALL MOVETOFILE;

   7992 11 003121   000425 701000 11                 TSX1    MOVETOFILE
        11 003122   000000 011000                    NOP     0

     1241     7993    5                  DO CASE (CGREAD_STATE);

   7993 11 003123   002004 235000 1                  LDA     CGREAD_STATE
        11 003124   000004 115007                    CMPA    4,DL
        11 003125   003127 602005 11                 TNC     s:7993+4,AL
        11 003126   003144 710000 11                 TRA     s:8001
        11 003127   003144 710000 11                 TRA     s:8001
        11 003130   003144 710000 11                 TRA     s:8001
        11 003131   003133 710000 11                 TRA     s:7995
        11 003132   003137 710000 11                 TRA     s:7998

     1242     7994    5                  CASE (2);

     1243     7995    5                     CGREAD_STATE = 0;

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:162  
   7995 11 003133   002004 450000 1                  STZ     CGREAD_STATE

     1244     7996    5                     CALL KEYIN_EVENT;

   7996 11 003134   001410 701000 11                 TSX1    KEYIN_EVENT
        11 003135   000000 011000                    NOP     0
        11 003136   003144 710000 11                 TRA     s:8001

     1245     7997    5                  CASE (3);

     1246     7998    5                     CGREAD_STATE = 0;

   7998 11 003137   002004 450000 1                  STZ     CGREAD_STATE

     1247     7999    5                     CALL ELF$CONS_ERR(CGREAD_ERR);

   7999 11 003140   000002 630400 12                 EPPR0   2
        11 003141   000017 631400 xsym               EPPR1   B_VECTNIL+15
        11 003142   000000 701000 xent               TSX1    ELF$CONS_ERR
        11 003143   000000 011000                    NOP     0

     1248     8000    5                  END;                     /* DO CASE */

     1249     8001    4                  CALL SLEEP;

   8001 11 003144   000363 701000 11                 TSX1    SLEEP
        11 003145   000000 011000                    NOP     0

     1250     8002    4                END;                       /* DO WHILE */

   8002 11 003146   002007 234000 1                  SZN     EL_POLL_IN_PROGRESS
        11 003147   003121 604000 11                 TMI     s:7992

     1251     8003    3             CALL MOVETOFILE;

   8003 11 003150   000425 701000 11                 TSX1    MOVETOFILE
        11 003151   000000 011000                    NOP     0
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:163  

     1252     8004    3             IF NWIO_TYC&~%TYC_EGV

   8004 11 003152   000030 236000 xsym               LDQ     B_VECTNIL+24
        11 003153   000027 676000 xsym               ERQ     B_VECTNIL+23
        11 003154   002002 376000 1                  ANQ     NWIO_TYC
        11 003155   003371 601000 11                 TNZ     MPCSTATS_EXIT

     1253     8005    3             THEN GOTO MPCSTATS_EXIT;
     1254     8006    3             EL$MPCSTATS = '0'B;

   8006 11 003156   000000 100400                    MLR     fill='000'O
        11 003157   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
        11 003160   002712 000224 1                  ADSC9   EL$MPCSTATS              cn=0,n=148

     1255     8007    3             EL$MPCSTATS.MPCNAME = DCT.DEVNM;

   8007 11 003161   002163 470400 1                  LDP0    DCT$
        11 003162   040000 100500                    MLR     fill='040'O
        11 003163   000002 000010                    ADSC9   2,,PR0                   cn=0,n=8
        11 003164   002712 000010 1                  ADSC9   EL$MPCSTATS              cn=0,n=8

     1256     8008    3             EL$MPCSTATS.FWNAME = DCT.MPC.FWNAME;

   8008 11 003165   000041 236100                    LDQ     33,,PR0
        11 003166   002714 756000 1                  STQ     EL$MPCSTATS+2

     1257     8009    4             DO SELECT(DCT.MPC.FWNAME);

   8009 11 003167   000041 236100                    LDQ     33,,PR0
        11 003170   000223 116000 2                  CMPQ    FPT_EVENT+25
        11 003171   003176 602000 11                 TNC     s:8009+7
        11 003172   003366 600000 11                 TZE     s:8044
        11 003173   000225 116000 2                  CMPQ    FPT_EVENT+27
        11 003174   003366 601000 11                 TNZ     s:8044
        11 003175   003201 710000 11                 TRA     s:8011
        11 003176   000226 116000 2                  CMPQ    FPT_EVENT+28
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:164  
        11 003177   003366 601000 11                 TNZ     s:8044
        11 003200   003201 710000 11                 TRA     s:8011

     1258     8010    4                  SELECT('IPR5','NONE');   /* FOR IPC AND EURC*/

     1259     8011    5                  DO I = 0 TO 15;          /* CONVERT FROM ASCII FMT */

   8011 11 003201   200051 450100                    STZ     I,,AUTO

     1260     8012    5                       CALL REFMT_HALF(IPC_STATS_CNTRS(I));

   8012 11 003202   200051 236100                    LDQ     I,,AUTO
        11 003203   000022 736000                    QLS     18
        11 003204   200010 036100                    ADLQ    STATS$,,AUTO
        11 003205   200765 756100                    STQ     @CHAR_2+4,,AUTO
        11 003206   003442 701000 11                 TSX1    REFMT_HALF
        11 003207   000000 011000                    NOP     0

     1261     8013    5                       EL$MPCSTATS.STATS(I) = IPC_STATS_CNTRS(I);

   8013 11 003210   200010 470500                    LDP0    STATS$,,AUTO
        11 003211   200051 720100                    LXL0    I,,AUTO
        11 003212   000000 235110                    LDA     0,X0,PR0
        11 003213   002715 755010 1                  STA     EL$MPCSTATS+3,X0

     1262     8014    5                     END;

   8014 11 003214   200051 236100                    LDQ     I,,AUTO
        11 003215   000001 036007                    ADLQ    1,DL
        11 003216   200051 756100                    STQ     I,,AUTO
        11 003217   000020 116007                    CMPQ    16,DL
        11 003220   003202 602000 11                 TNC     s:8012

     1263     8015    4                  IPC$ = ADDR(IPC_STATS_CNTRS(16));

   8015 11 003221   200010 236100                    LDQ     STATS$,,AUTO
        11 003222   000020 036003                    ADLQ    16,DU
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:165  
        11 003223   200011 756100                    STQ     IPC$,,AUTO

     1264     8016    5                  DO I = 0 TO 3;

   8016 11 003224   200051 450100                    STZ     I,,AUTO

     1265     8017    5                       TEMP_HALF(0) = IPC_IMU_TRANSACTIONS.HI_ORDER(I);

   8017 11 003225   200051 235100                    LDA     I,,AUTO
        11 003226   000001 735000                    ALS     1
        11 003227   200011 470500                    LDP0    IPC$,,AUTO
        11 003230   000100 100505                    MLR     fill='000'O
        11 003231   000002 000002                    ADSC9   2,A,PR0                  cn=0,n=2
        11 003232   200032 000002                    ADSC9   TEMP_WORD,,AUTO          cn=0,n=2

     1266     8018    5                       TEMP_HALF(1) = IPC_IMU_TRANSACTIONS.LO_ORDER(I);

   8018 11 003233   000100 100505                    MLR     fill='000'O
        11 003234   000000 000002                    ADSC9   0,A,PR0                  cn=0,n=2
        11 003235   200032 400002                    ADSC9   TEMP_WORD,,AUTO          cn=2,n=2

     1267     8019    5                       CALL REFMT_WORD(TEMP_WORD);

   8019 11 003236   200032 631500                    EPPR1   TEMP_WORD,,AUTO
        11 003237   200765 451500                    STP1    @CHAR_2+4,,AUTO
        11 003240   003410 701000 11                 TSX1    REFMT_WORD
        11 003241   000000 011000                    NOP     0

     1268     8020    5                       EL$MPCSTATS.STATS(I + 16) = TEMP_WORD;

   8020 11 003242   200051 720100                    LXL0    I,,AUTO
        11 003243   200032 235100                    LDA     TEMP_WORD,,AUTO
        11 003244   002735 755010 1                  STA     EL$MPCSTATS+19,X0

     1269     8021    5                     END;

   8021 11 003245   200051 236100                    LDQ     I,,AUTO
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:166  
        11 003246   000001 036007                    ADLQ    1,DL
        11 003247   200051 756100                    STQ     I,,AUTO
        11 003250   000004 116007                    CMPQ    4,DL
        11 003251   003225 602000 11                 TNC     s:8017

     1270     8022    4                  IPC$ = ADDR(IPC_STATS_CNTRS(20));

   8022 11 003252   200010 236100                    LDQ     STATS$,,AUTO
        11 003253   000024 036003                    ADLQ    20,DU
        11 003254   200011 756100                    STQ     IPC$,,AUTO

     1271     8023    5                  DO I = 0 TO 3;

   8023 11 003255   200051 450100                    STZ     I,,AUTO

     1272     8024    5                       TEMP_HALF(0) = IPC_IMU_WD_TRANSFERS.HI_ORDER(I);

   8024 11 003256   200051 235100                    LDA     I,,AUTO
        11 003257   000001 735000                    ALS     1
        11 003260   200011 470500                    LDP0    IPC$,,AUTO
        11 003261   000100 100505                    MLR     fill='000'O
        11 003262   000002 000002                    ADSC9   2,A,PR0                  cn=0,n=2
        11 003263   200032 000002                    ADSC9   TEMP_WORD,,AUTO          cn=0,n=2

     1273     8025    5                       TEMP_HALF(1) = IPC_IMU_WD_TRANSFERS.LO_ORDER(I);

   8025 11 003264   000100 100505                    MLR     fill='000'O
        11 003265   000000 000002                    ADSC9   0,A,PR0                  cn=0,n=2
        11 003266   200032 400002                    ADSC9   TEMP_WORD,,AUTO          cn=2,n=2

     1274     8026    5                       CALL REFMT_WORD(TEMP_WORD);

   8026 11 003267   200032 631500                    EPPR1   TEMP_WORD,,AUTO
        11 003270   200765 451500                    STP1    @CHAR_2+4,,AUTO
        11 003271   003410 701000 11                 TSX1    REFMT_WORD
        11 003272   000000 011000                    NOP     0

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:167  
     1275     8027    5                       EL$MPCSTATS.STATS(I + 20) = TEMP_WORD;

   8027 11 003273   200051 720100                    LXL0    I,,AUTO
        11 003274   200032 235100                    LDA     TEMP_WORD,,AUTO
        11 003275   002741 755010 1                  STA     EL$MPCSTATS+23,X0

     1276     8028    5                     END;

   8028 11 003276   200051 236100                    LDQ     I,,AUTO
        11 003277   000001 036007                    ADLQ    1,DL
        11 003300   200051 756100                    STQ     I,,AUTO
        11 003301   000004 116007                    CMPQ    4,DL
        11 003302   003256 602000 11                 TNC     s:8024

     1277     8029    5                  DO I = 24 TO 29;

   8029 11 003303   000030 235007                    LDA     24,DL
        11 003304   200051 755100                    STA     I,,AUTO

     1278     8030    5                       CALL REFMT_HALF(IPC_STATS_CNTRS(I));

   8030 11 003305   200051 236100                    LDQ     I,,AUTO
        11 003306   000022 736000                    QLS     18
        11 003307   200010 036100                    ADLQ    STATS$,,AUTO
        11 003310   200765 756100                    STQ     @CHAR_2+4,,AUTO
        11 003311   003442 701000 11                 TSX1    REFMT_HALF
        11 003312   000000 011000                    NOP     0

     1279     8031    5                       EL$MPCSTATS.STATS(I) = IPC_STATS_CNTRS(I);

   8031 11 003313   200010 470500                    LDP0    STATS$,,AUTO
        11 003314   200051 720100                    LXL0    I,,AUTO
        11 003315   000000 235110                    LDA     0,X0,PR0
        11 003316   002715 755010 1                  STA     EL$MPCSTATS+3,X0

     1280     8032    5                     END;

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:168  
   8032 11 003317   200051 236100                    LDQ     I,,AUTO
        11 003320   000001 036007                    ADLQ    1,DL
        11 003321   200051 756100                    STQ     I,,AUTO
        11 003322   000036 116007                    CMPQ    30,DL
        11 003323   003305 602000 11                 TNC     s:8030

     1281     8033    4                  ASCII_WORD = IPC_STATS_CNTRS(30);

   8033 11 003324   000036 235100                    LDA     30,,PR0
        11 003325   200046 755100                    STA     ASCII_WORD,,AUTO

     1282     8034    4                  TEMP_HALF(1) = ASCII_HF_WD(0);

   8034 11 003326   200046 220100                    LDX0    ASCII_WORD,,AUTO
        11 003327   200032 440100                    SXL0    TEMP_WORD,,AUTO

     1283     8035    4                  TEMP_HALF(0) = ASCII_HF_WD(1);

   8035 11 003330   200046 721100                    LXL1    ASCII_WORD,,AUTO
        11 003331   200032 741100                    STX1    TEMP_WORD,,AUTO

     1284     8036    4                  CALL REFMT_WORD(TEMP_WORD);

   8036 11 003332   200032 631500                    EPPR1   TEMP_WORD,,AUTO
        11 003333   200765 451500                    STP1    @CHAR_2+4,,AUTO
        11 003334   003410 701000 11                 TSX1    REFMT_WORD
        11 003335   000000 011000                    NOP     0

     1285     8037    4                  EL$MPCSTATS.STATS(30) = TEMP_WORD/60;

   8037 11 003336   200032 236100                    LDQ     TEMP_WORD,,AUTO
        11 003337   000001 772000                    QRL     1
        11 003340   000036 506007                    DIV     30,DL
        11 003341   002753 756000 1                  STQ     EL$MPCSTATS+33

     1286     8038    4                  CALL REFMT_HALF(IPC_STATS_CNTRS(31));

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:169  
   8038 11 003342   200010 236100                    LDQ     STATS$,,AUTO
        11 003343   000037 036003                    ADLQ    31,DU
        11 003344   200765 756100                    STQ     @CHAR_2+4,,AUTO
        11 003345   003442 701000 11                 TSX1    REFMT_HALF
        11 003346   000000 011000                    NOP     0

     1287     8039    5                  DO I = 31 TO NUM_CNTRS - 1;

   8039 11 003347   000037 235007                    LDA     31,DL
        11 003350   200051 755100                    STA     I,,AUTO
        11 003351   003361 710000 11                 TRA     s:8041+3

     1288     8040    5                       EL$MPCSTATS.STATS(I) = IPC_STATS_CNTRS(I);

   8040 11 003352   200010 470500                    LDP0    STATS$,,AUTO
        11 003353   200051 720100                    LXL0    I,,AUTO
        11 003354   000000 235110                    LDA     0,X0,PR0
        11 003355   002715 755010 1                  STA     EL$MPCSTATS+3,X0

     1289     8041    5                     END;

   8041 11 003356   200051 236100                    LDQ     I,,AUTO
        11 003357   000001 036007                    ADLQ    1,DL
        11 003360   200051 756100                    STQ     I,,AUTO
        11 003361   200051 236100                    LDQ     I,,AUTO
        11 003362   003365 604000 11                 TMI     s:8041+7
        11 003363   200045 116100                    CMPQ    NUM_CNTRS,,AUTO
        11 003364   003352 604000 11                 TMI     s:8040
        11 003365   003366 710000 11                 TRA     s:8044

     1290     8042    4                  SELECT('MSP8');          /* FOR DAU DISC CONTROLLER */

     1291     8043    4                END;                       /* DO SELECT */

     1292     8044    3             CALL M$WRSYSLOG(WRITE_MPCSTATS);

   8044 11 003366   003266 630400 1                  EPPR0   WRITE_MPCSTATS
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:170  
        11 003367   070001 713400                    CLIMB   28673
        11 003370   400400 401760                    pmme    nvectors=2

     1293     8045    3           END;                            /* IF IOQ_FLAG */

     1294     8046    2   MPCSTATS_EXIT:
     1295     8047    2        RETURN;

   8047 11 003371   200762 221300       MPCSTATS_EX* LDX1  ! @CHAR_2+1,,AUTO
        11 003372   000001 702211                    TSX2  ! 1,X1

     1296     8048    2   END MPCSTATS;
     1297     8049        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:171  
     1298     8050        /*********************************************************************
     1299     8051        *                 MPC STATISTICS COUNTERS                            *
     1300     8052        *                  ( RETURNED BY M$IOQ )                             *
     1301     8053        * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -*
     1302     8054        *             IPC-UR/EURC CONTROLLER (ASCII FORMAT)                  *
     1303     8055        * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -*
     1304     8056        *  WORDS 0,1     RECEIVER ERRORS(0:3)  (18 BITS/COUNTER)             *
     1305     8057        *        2,3     TRANSMITTER ERRORS(0:3)  (18 BITS/COUNTER)          *
     1306     8058        *        4,5     CARDS PUNCHED(0:3)  (18 BITS/COUNTER)               *
     1307     8059        *        6,7     CARDS READ(0:3)  (18 BITS/COUNTER)                  *
     1308     8060        *        8,9     FRAMES RECEIVED OVER LINK(0:3)  (18 BITS/COUNTER)   *
     1309     8061        *        10,11   FRAMES TRANSMITTED OVER LINK(0:3) (18 BITS/COUNTER) *
     1310     8062        *        12,13   TOTAL CONNECT PCWs(0:3)  (18 BITS/COUNTER)          *
     1311     8063        *        14,15   PCWs ON IMU INTERFACE(0:3)  (18 BITS/COUNTER)       *
     1312     8064        *        16,17   TRANSACTIONS ON IMU INTERFACE(0:3)  (18 BITS/CNTR)  *
     1313     8065        *        18,19   64K TRANSACTIONS ON IMU INTERFACE(0:3) (18 BITS/CTR)*
     1314     8066        *        20,21   WORD TRANSFERS ON IMU INTERFACE(0:3)  (18 BITS/CNTR)*
     1315     8067        *        22,23   64K WRD TRANSFERS ON IMU INTERFACE(0:3)             *
     1316     8068        *        24,25   LINES PRINTED(0:3)  (18 BITS/COUNTER)               *
     1317     8069        *        26,27   RETRANSMISSIONS(0:3)  (18 BITS/COUNTER)             *
     1318     8070        *        28,29   NUMBER OF BOTTOM OF PAGES(0:3)  (18 BITS/COUNTER)   *
     1319     8071        *        30      UPTIME CLOCK (18 BITS)                              *
     1320     8072        *                UPTIME 64K CLOCK (18 BITS)                          *
     1321     8073        *        31      LOST INTERRUPT COUNT (18 BITS)                      *
     1322     8074        *                UNSOLICITED FRAMES (18 BITS)                        *
     1323     8075        *        32,33   PROM REVISION(0:7)  (1 BYTE/COUNTER)                *
     1324     8076        *                                                                    *
     1325     8077        ********************************************************************/
     1326     8078        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:172  
     1327     8079    1   SIXTEEN: PROC (CHAR_2);

   8079 11 003373   200760 741300       SIXTEEN      STX1  ! EXTST_BYTE7+2,,AUTO

     1328     8080        /**/
     1329     8081    2   DCL CHAR_2 CHAR(2);
     1330     8082        /**/
     1331     8083    2        TEMP_BUF = CHAR_2;

   8083 11 003374   200761 470500                    LDP0    @CHAR_2,,AUTO
        11 003375   040100 100500                    MLR     fill='040'O
        11 003376   000000 000002                    ADSC9   0,,PR0                   cn=0,n=2
        11 003377   200067 000002                    ADSC9   TEMP_BUF,,AUTO           cn=0,n=2

     1332     8084    2        BUF_TEMP(0) = TEMP_BF(0);

   8084 11 003400   200015 471500                    LDP1    TP$,,AUTO
        11 003401   003100 060500                    CSL     bolr='003'O
        11 003402   100000 000010                    BDSC    0,,PR1                   by=0,bit=0,n=8
        11 003403   200070 000010                    BDSC    BUF_TEMP,,AUTO           by=0,bit=0,n=8

     1333     8085    2        BUF_TEMP(1) = TEMP_BF(1);

   8085 11 003404   003100 060500                    CSL     bolr='003'O
        11 003405   100000 200010                    BDSC    0,,PR1                   by=1,bit=0,n=8
        11 003406   200070 100010                    BDSC    BUF_TEMP,,AUTO           by=0,bit=8,n=8

     1334     8086    2   END SIXTEEN;

   8086 11 003407   000001 702211                    TSX2  ! 1,X1

     1335     8087        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:173  
     1336     8088    1   REFMT_WORD: PROC(WORD1);

   8088 11 003410   200764 741300       REFMT_WORD   STX1  ! @CHAR_2+3,,AUTO

     1337     8089        /**/
     1338     8090    2   DCL 1 WORD1 UBIN;
     1339     8091    2   DCL 1 WORD2 REDEF WORD1,
     1340     8092    2            2 * UBIN(4) UNAL,
     1341     8093    2            2 BYT0 UBIN(8) UNAL,
     1342     8094    2            2 BYT1 UBIN(8) UNAL,
     1343     8095    2            2 BYT2 UBIN(8) UNAL,
     1344     8096    2            2 BYT3 UBIN(8) UNAL;
     1345     8097
     1346     8098    2        ASCII_WORD = WORD1;           /* CONVERT WORD FROM ASCII TO BINARY FMT */

   8098 11 003411   200765 470500                    LDP0    @WORD1,,AUTO
        11 003412   000000 235100                    LDA     0,,PR0
        11 003413   200046 755100                    STA     ASCII_WORD,,AUTO

     1347     8099    2        WORD1 = 0;

   8099 11 003414   000000 450100                    STZ     0,,PR0

     1348     8100    2        WORD2.BYT0 = ASCII_FMT.BYT(0);

   8100 11 003415   200046 236100                    LDQ     ASCII_WORD,,AUTO
        11 003416   000003 772000                    QRL     3
        11 003417   000000 676100                    ERQ     0,,PR0
        11 003420   037700 376003                    ANQ     16320,DU
        11 003421   000000 656100                    ERSQ    0,,PR0

     1349     8101    2        WORD2.BYT1 = ASCII_FMT.BYT(1);

   8101 11 003422   200046 236100                    LDQ     ASCII_WORD,,AUTO
        11 003423   000002 772000                    QRL     2
        11 003424   000000 676100                    ERQ     0,,PR0
        11 003425   000047 376000 12                 ANQ     39
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:174  
        11 003426   000000 656100                    ERSQ    0,,PR0

     1350     8102    2        WORD2.BYT2 = ASCII_FMT.BYT(2);

   8102 11 003427   200046 236100                    LDQ     ASCII_WORD,,AUTO
        11 003430   000001 772000                    QRL     1
        11 003431   000000 676100                    ERQ     0,,PR0
        11 003432   177400 376007                    ANQ     65280,DL
        11 003433   000000 656100                    ERSQ    0,,PR0

     1351     8103    2        WORD2.BYT3 = ASCII_FMT.BYT(3);

   8103 11 003434   200046 236100                    LDQ     ASCII_WORD,,AUTO
        11 003435   000000 676100                    ERQ     0,,PR0
        11 003436   000377 376007                    ANQ     255,DL
        11 003437   000000 656100                    ERSQ    0,,PR0

     1352     8104    2        RETURN;

   8104 11 003440   200764 221300                    LDX1  ! @CHAR_2+3,,AUTO
        11 003441   000001 702211                    TSX2  ! 1,X1

     1353     8105    2   END REFMT_WORD;
     1354     8106        %EJECT;
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:175  
     1355     8107    1   REFMT_HALF: PROC(WORD3);      /* CONVERT ASCII WORD INTO 2 BINARY HALF WORDS */

   8107 11 003442   200764 741300       REFMT_HALF   STX1  ! @CHAR_2+3,,AUTO

     1356     8108    2   DCL 1 WORD3 UBIN;
     1357     8109    2   DCL 1 HALF_WD(0:1) REDEF WORD3,
     1358     8110    2            2 * UBIN(2) UNAL,
     1359     8111    2            2 BYT0 UBIN(8) UNAL,
     1360     8112    2            2 BYT1 UBIN(8) UNAL;
     1361     8113    2        ASCII_WORD = WORD3;

   8113 11 003443   200765 470500                    LDP0    @WORD3,,AUTO
        11 003444   000000 235100                    LDA     0,,PR0
        11 003445   200046 755100                    STA     ASCII_WORD,,AUTO

     1362     8114    2        WORD3 = 0;

   8114 11 003446   000000 450100                    STZ     0,,PR0

     1363     8115    2        HALF_WD.BYT0(0) = ASCII_FMT.BYT(0);

   8115 11 003447   200046 236100                    LDQ     ASCII_WORD,,AUTO
        11 003450   000001 772000                    QRL     1
        11 003451   000000 676100                    ERQ     0,,PR0
        11 003452   177400 376003                    ANQ     65280,DU
        11 003453   000000 656100                    ERSQ    0,,PR0

     1364     8116    2        HALF_WD.BYT1(0) = ASCII_FMT.BYT(1);

   8116 11 003454   200046 236100                    LDQ     ASCII_WORD,,AUTO
        11 003455   000000 676100                    ERQ     0,,PR0
        11 003456   000377 376003                    ANQ     255,DU
        11 003457   000000 656100                    ERSQ    0,,PR0

     1365     8117    2        HALF_WD.BYT0(1) = ASCII_FMT.BYT(2);

   8117 11 003460   200046 236100                    LDQ     ASCII_WORD,,AUTO
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:176  
        11 003461   000001 772000                    QRL     1
        11 003462   000000 676100                    ERQ     0,,PR0
        11 003463   177400 376007                    ANQ     65280,DL
        11 003464   000000 656100                    ERSQ    0,,PR0

     1366     8118    2        HALF_WD.BYT1(1) = ASCII_FMT.BYT(3);

   8118 11 003465   200046 236100                    LDQ     ASCII_WORD,,AUTO
        11 003466   000000 676100                    ERQ     0,,PR0
        11 003467   000377 376007                    ANQ     255,DL
        11 003470   000000 656100                    ERSQ    0,,PR0

     1367     8119    2        RETURN;

   8119 11 003471   200764 221300                    LDX1  ! @CHAR_2+3,,AUTO
        11 003472   000001 702211                    TSX2  ! 1,X1
     1368     8120    2   END REFMT_HALF;
     1369     8121    1   END ELF;
     1370     8122        %EOD;

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:177  
--  Include file information  --

   XUD_UTS_M.:E05TOU  is referenced.
   ES_CNTRL_R.:E05TOU  cannot be made into a system file and is referenced.
   FM$CFU.:E05TOU  is referenced.
   IT_SUBS_C.:E05TOU  is referenced.
   OC_SUBS_C.:E05TOU  is referenced.
   OC_MESSHD_C.:E05TOU  is referenced.
   NI_DATA_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N_FC_C.:E05TOU  is referenced.
   EL_SUBS_C.:E05TOU  is referenced.
   EL_DATA_C.:E05TOU  is referenced.
   EL_MACRO_C.:E05TOU  is referenced.
   EL$TABLES.:E05TOU  is referenced.
   I_SUBS_C.:E05TOU  is referenced.
   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   B$ROSEG.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure ELF.
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:178  

 **** Variables and constants ****

  ****  Section 001  Data  ELF

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

  4226-0-0/d STRC(432)   r     1 BOOTFLAG                2003-0-0/w BIT         r     1 CGREAD_ERR
  2004-0-0/w UBIN        r     1 CGREAD_STATE            2157-0-0/w UBIN        r     1 CURUTS
  3242-0-0/d STRC(432)   r     1 CUR_UTS                 2706-0-0/d STRC(144)   r     1 DAU_BUFINIT
  2163-0-0/w PTR         r     1 DCT$                    2163-0-0/w STRC        r     1 DCTPTR
  2166-0-0/d STRC(11520) r     1 DEVBUF                  3232-0-0/d STRC(288)   r     1 DEV_IOQ
  2666-0-0/d STRC(144)   r     1 DP_BUFINIT              2162-0-0/w PTR         r     1 DQH$
  2162-0-0/w STRC        r     1 DQHPTR                  2757-0-0/w STRC(756)   r     1 EL$DEVSTATS
  2712-0-0/w STRC(1332)  r     1 EL$MPCSTATS             2124-0-0/w CHAR(13)    r     1 ELAN_CMD
  3064-0-0/d STRC(432)   r     1 ELL_TIME                3037-0-0/w BIT         r     1 EL_DEVSTATS
  2130-0-0/c STRC(792)   r     1 EL_FIBFR                3040-0-0/w BIT         r     1 EL_MPCSTATS
  2000-0-0/d REMB        r     1 EL_NO_THRESHOLDING      2007-0-0/w BIT         r     1 EL_POLL_IN_PROGRESS
  2006-0-0/w BIT         r     1 EL_SNAPFLG              2061-0-0/w CHAR(140)   r     1 EL_TERM
  3050-0-0/d STRC(432)   r     1 EL_TIME                 2005-0-0/w UBIN        r     1 EL_ZAPFLG
  2023-0-0/w CHAR(120)   r     1 ERRBUF                  2022-0-0/w BIT         r     1 ERRCODE
  3552-0-0/d STRC(1080)  r     1 ERR_CLOSE               3544-0-0/c STRC(216)   r     1 ERR_NAME
  3530-0-0/d STRC(432)   r     1 ERR_TIME                3036-0-0/w UBIN(18)    r     1 ES_SEQUENCE_NUM
  3100-0-0/d STRC(432)   r     1 ES_TIME
  3004-0-0/w STRC(72)    r     1 FILETAB(0:3)
  4316-0-0/d STRC(1080)  r     1 FPT_CLOSE               3276-0-0/d STRC(936)   r     1 FPT_ERRMSG
  4262-0-0/d STRC(288)   r     1 FPT_GETDCB              3114-0-0/d STRC(504)   r     1 FPT_KEYIN
  3200-0-0/d STRC(432)   r     1 FPT_MONINFO             3336-0-0/d STRC(72)    r     1 FPT_RDSYSLOG
  4272-0-0/d STRC(144)   r     1 FPT_RELDCB              4276-0-0/d STRC(144)   r     1 FPT_TRUNC
  3042-0-0/d STRC(216)   r     1 FPT_WAIT                4302-0-0/d STRC(432)   r     1 FPT_WRITE
  3330-0-0/d STRC(216)   r     1 FPT_XCON                3027-0-0/b UBIN(18)    r     1 GET_DCB#
  2702-0-0/d STRC(144)   r     1 IPC_BUFINIT                0-0-0/w STRC(36864) r     1 LOGBUF
  3030-0-0/w STRC(216)   r     1 LOSTERR                 2676-0-0/d STRC(144)   r     1 MDS_BUFINIT
  3025-0-0/c STRC(63)    r     1 MISCNAME                4242-0-0/d STRC(540)   r     1 MONINFO
  3214-0-0/d STRC(468)   r     1 MONPTRS                 2672-0-0/d STRC(144)   r     1 MT_BUFINIT
  2165-0-0/w PTR         r     1 N$DCT$$                 2165-0-0/w STRC        r     1 N$DCT$PTR
  2156-0-0/w UBIN        r     1 NAMELEN                 2002-0-0/w BIT         r     1 NWIO_TYC
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:179  
  3610-0-0/d STRC(2088)  r     1 OPACCTNG                3710-0-0/d STRC(2088)  r     1 OPCOMAC
  4004-0-0/d STRC(2088)  r     1 OPCSCG                  4354-0-0/d STRC(2088)  r     1 OPEN_ELF_DATA_UPD
  3340-0-0/d STRC(2088)  r     1 OPERLOG                 4114-0-0/d STRC(2088)  r     1 OPMISC
  3432-0-0/d STRC(2088)  r     1 OPSECLOG                2020-0-0/w UBIN        r     1 RSLT(0:1)
  3014-0-0/w PTR         r     1 SECLOGSIZE$             3014-0-0/w STRC        r     1 SECLOGSIZEPTR
  3170-0-0/d STRC(144)   r     1 SEE_CFUS                3174-0-0/d STRC(144)   r     1 SEE_MONIS
  3164-0-0/d STRC(144)   r     1 SEE_TIGR                2161-0-0/w PTR         r     1 SQH$
  2161-0-0/w STRC        r     1 SQHPTR                  4206-0-0/d STRC(504)   r     1 START_ELAN
  2010-0-0/c STRC(234)   r     1 T                       2017-0-0/w PTR         r     1 T$
  3132-0-0/d STRC(432)   r     1 TELL_KEYIN              2164-0-0/w PTR         r     1 TEMP$
  2164-0-0/w STRC        r     1 TEMPPTR                 3702-0-0/c STRC(72)    r     1 VLP_ACCTNG
  4002-0-0/c STRC(63)    r     1 VLP_COMAC               4076-0-0/c STRC(45)    r     1 VLP_CSCG
  4224-0-0/c STRC(45)    r     1 VLP_ELAN                3704-0-0/w STRC(108)   r     1 VLP_ELAN_
  4100-0-0/w STRC(432)   r     1 VLP_ELFNM               4446-0-0/c STRC(81)    r     1 VLP_ELF_DATA
  3015-0-0/w STRC(144)   r     1 VLP_ERRLOG              3153-0-0/w STRC(288)   r     1 VLP_KEYINSTA
  3021-0-0/w STRC(144)   r     1 VLP_SECLOG              3524-0-0/c STRC(72)    r     1 VLP_SYSACCT
  3526-0-0/c STRC(72)    r     1 VLP_SYSTAC              3256-0-0/d STRC(288)   r     1 WRITE_DEVSTATS
  3266-0-0/d STRC(288)   r     1 WRITE_MPCSTATS          3146-0-0/c STRC(180)   r     1 ZAP_MESSHD

  ****  Section 002 RoData ELF

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(55)    r     1 EL_BADFILE                60-0-0/c CHAR(27)    r     1 EL_EXCEED_SPACE
    36-0-0/c CHAR(30)    r     1 ERRLOG_BUSY               16-0-0/c CHAR(62)    r     1 ES_BADFILE
    67-0-0/c CHAR(24)    r     1 ES_EXCEED_SPACE           75-0-0/c CHAR(57)    r     1 ES_FORCED_TURNOVER
   172-0-0/d STRC(144)   r     1 FPT_EVENT                124-0-0/d STRC(504)   r     1 FPT_READCSCG
   156-0-0/d STRC(432)   r     1 FPT_TOOBIG               142-0-0/d STRC(432)   r     1 FPT_WRCSCGFI
    46-0-0/c CHAR(37)    r     1 SECLOG_BUSY              114-0-0/c CHAR(28)    r     1 TOOBIG

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

   761-0-0/w PTR         r     1 @CHAR_2                  771-0-0/w PTR         r     1 @FILE#
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:180  
   765-0-0/w PTR         r     1 @WORD1                   765-0-0/w PTR         r     1 @WORD3
    46-0-0/w STRC(9)     r     1 ASCII_FMT(0:3)
    46-0-0/w UBIN(18)    r     1 ASCII_HF_WD(0:1)
    46-0-0/w UBIN        r     1 ASCII_WORD
    70-0-0/b BIT (8)     r     1 BUF_TEMP(0:1)
    16-0-0/w PTR         r     1 BUF_TEMP$                753-0-0/w PTR         r     1 CFU$
   753-0-0/w STRC        r     1 CFUPTR                    *0-0-0/c CHAR(2)     r     1 CHAR_2
   722-0-0/b UBIN(9)     r     1 DCBTAB(0:99)              41-0-0/w UBIN        r     1 DCTX
    12-0-0/w PTR         r     1 DEV$                      21-0-0/w SBIN        r     1 EL_LASTDAY
    17-0-0/w UBIN        r     1 EL_LASTTIME               23-0-0/w UBIN        r     1 EL_NXTCNTR
     3-0-0/w BIT         r     1 EL_RENAME_ON_ERR          22-0-0/w SBIN        r     1 ES_LASTDAY
    20-0-0/w UBIN        r     1 ES_LASTTIME               24-0-0/w UBIN        r     1 ES_NXTCNTR
   756-0-0/b UBIN(8)     r     1 EXTST_BYTE7               33-0-0/w UBIN        r     1 F#
     5-0-0/w PTR         r     1 F$ERRLOG$                  6-0-0/w PTR         r     1 F$SECLOG$
    *0-0-0/w UBIN        r     1 FILE#                     37-0-0/w BIT         r     1 FIRST_TIME
    64-0-0/c CHAR(4)     r     1 FW_TYPE
    *0-0-0/w STRC(18)    r     1 HALF_WD(0:1)
    51-0-0/w UBIN        r     1 I                        776-0-0/w UBIN        r     1 I
    14-0-0/w PTR         r     1 I$                        47-0-0/w BIT         r     1 IOQ_FLAG
    11-0-0/w PTR         r     1 IPC$                      53-0-0/w UBIN        r     1 K
    44-0-0/w UBIN        r     1 LAST_DEVSTATS             40-0-0/w SBIN        r     1 MAXDCTX
    13-0-0/w PTR         r     1 MPC$                      65-0-0/c CHAR(8)     r     1 MPC_NAME
    43-0-0/w UBIN        r     1 MPC_NUM                   45-0-0/w SBIN        r     1 NUM_CNTRS
    30-0-0/w UBIN        r     1 NXTWD                    754-0-0/w PTR         r     1 OPEN$
     4-0-0/w PTR         r     1 P$                        34-0-0/d STRC(72)    r     1 RECVEC
   775-0-0/w BIT         r     1 RELFLG                   756-0-0/b STRC(8)     r     1 SENSE_BYTE7
    25-0-0/w UBIN        r     1 SIZE4                     10-0-0/w PTR         r     1 STATS$
    42-0-0/w UBIN        r     1 SUBSYSTEM_DCTX            36-0-0/w BIT         r     1 SUSPENDED
    31-0-0/w UBIN        r     1 TEMP                      67-0-0/c CHAR(2)     r     1 TEMP_BUF
    32-0-0/w UBIN(18)    r     1 TEMP_HALF(0:1)
   755-0-0/w UBIN        r     1 TEMP_UTS                  26-0-0/d BIT (72)    r     1 TEMP_VEC
    26-0-0/d STRC(72)    r     1 TEMP_VEC1                 32-0-0/w UBIN        r     1 TEMP_WORD
    15-0-0/w PTR         r     1 TP$                       *0-0-0/w UBIN        r     1 WORD1
    *0-0-0/w STRC        r     1 WORD2                     *0-0-0/w UBIN        r     1 WORD3

  ****  SYMREF variables  ****

PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:181  
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$DS3$                     0-0-0/w PTR         r     1 B$JIT$
     0-0-0/w PTR         r     1 B$ROS$                     0-0-0/w PTR         r     1 B$TCB$
     0-0-0/w UBIN        r     1 EL_SECLOGSIZE              0-0-0/w BIT         r     1 EL_THRESHOLD

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/d STRC(8856)  r     1 B$JIT
     0-0-0/d STRC(3024)  r     1 B$ROSEG                    0-0-0/w STRC(144)   r     1 B$TCB
     0-0-0/w STRC(1332)  r     1 DCT                        0-0-0/w STRC(648)   r     1 DQH
     0-0-0/w STRC(1044)  r     1 EL$FILERR                  0-0-0/w STRC(1080)  r     1 EL$IOERR
     0-0-0/w STRC(108)   r     1 EL$TERM                    0-0-0N  NULL        r     1 F$ACCTNG
     0-0-0N  NULL        r     1 F$COMAC                    0-0-0N  NULL        r     1 F$CSCG
     0-0-0/d ASTR(3528)  r     1 F$DCB                      0-0-0N  NULL        r     1 F$ERRLOG
     0-0-0N  NULL        r     1 F$SECLOG                   0-0-0/w STRC(288)   r     1 FM$CFU
     0-0-0/d STRC(2088)  r     1 FPTBASE                    0-0-0/w ASTR(180)   r     1 HDR
     0-0-0/w STRC(144)   r     1 IPC_IMU_TRANSACTIONS       0-0-0/w STRC(144)   r     1 IPC_IMU_WD_TRANSFERS
     0-0-0/w UBIN        r     1 IPC_STATS_CNTRS(0:33)
     0-0-0N  NULL        r     1 M$DO                       0-0-0N  NULL        r     1 M$ELF_DATA
     0-0-0N  NULL        r     1 M$MPC
     0-0-0/w UBIN        r     1 MDS_STATS_CNTRS(0:10)
     0-0-0/c ACHR        r     1 MOVENAMELEN
     0-0-0/w PTR         r     1 NI$DCT$(0:0)
     0-0-0/w UBIN        r     1 SECLOGSIZE                 0-0-0/w STRC(252)   r     1 SQH
     0-0-0/b UBIN(18)    r     1 STATS_CNTRS(0:15)
     0-0-0/b STRC(9)     r     1 TEMP_BF(0:1)
     0-0-0/c ASTR(9)     r     1 TEMP_NAME                  0-0-0/c ASTR(9)     r     1 TEXTCBASE


   Procedure ELF requires 1851 words for executable code.
   Procedure ELF requires 516 words of local(AUTO) storage.
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:182  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:183  
          MINI XREF LISTING

ABORT_ELF
      7657**PROC     7419--CALL     7654--CALL     7731--CALL
ABRT IN PROCEDURE OPENFILE
      7731**LABEL    7722--CALLALT
ASCII_FMT.BYT
      6936**DCL      8100>>ASSIGN   8101>>ASSIGN   8102>>ASSIGN   8103>>ASSIGN   8115>>ASSIGN   8116>>ASSIGN
      8117>>ASSIGN   8118>>ASSIGN
ASCII_HF_WD
      6937**DCL      8034>>ASSIGN   8035>>ASSIGN
ASCII_WORD
      6933**DCL      6934--REDEF    6937--REDEF    8033<<ASSIGN   8098<<ASSIGN   8113<<ASSIGN
AZC$ACCTNG
      4872**DCL-ENT  7520--CALL     7632--CALL
AZC$INIT
      4873**DCL-ENT  7417--CALL
B$ALT.CODE
      6990**DCL      6990--REDEF    6991--REDEF    6991--REDEF
B$ALT.DCB#
      6991**DCL      7660>>ASSIGN
B$ALT.ERR
      6991**DCL      7659>>ASSIGN
B$ALT.ERR.CODE
      6992**DCL      7435>>IF       7687>>IF       7694>>IF       7694>>IF       7727>>IF
B$ALT.ERR.ERR#
      6992**DCL      6992--REDEF
B$ALT.EVID
      6991**DCL      6991--REDEF    6991--REDEF
B$DS3$
      4908**DCL      7020--IMP-PTR
B$JIT.CPFLAGS1.SLEAZE
      2470**DCL      2470--REDEF
B$JIT.ERR.MID
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:184  
      2377**DCL      2377--REDEF
B$JIT.JRESPEAK
      2538**DCL      2539--REDEF
B$JIT.MODE
      2371**DCL      7321>>IF
B$JIT.ORIGINATOR_PORT.FROM_CR
      2647**DCL      2647--REDEF    2648--REDEF
B$JIT.PNR
      2551**DCL      2551--REDEF
B$JIT.TSLINE
      2645**DCL      2646--REDEF
B$JIT$
      4910**DCL      2371--IMP-PTR  7321>>IF
B$ROS$
      4907**DCL      7638>>DOINDEX
B$ROSEG.NUMDCBS
       646**DCL      7638>>DOINDEX
B$TCB.ALT$
      6986**DCL      7435>>IF       7659>>ASSIGN   7660>>ASSIGN   7687>>IF       7694>>IF       7694>>IF
      7727>>IF
B$TCB$
      4909**DCL      7435>>IF       7659>>ASSIGN   7660>>ASSIGN   7687>>IF       7694>>IF       7694>>IF
      7727>>IF
BAD IN PROCEDURE KEYIN_EVENT
      7654**LABEL    7632--CALLALT
BOOTFLAG
      6605**DCL      7328<>CALL
BUF_TEMP
      6953**DCL      7327--ASSIGN   8084<<ASSIGN   8085<<ASSIGN
BUF_TEMP$
      6903**DCL      7051--IMP-PTR  7327<<ASSIGN
CFU$
      6964**DCL      6965--REDEF    7552<<ASSIGN   7553>>IF       7555>>IF
CFUPTR.SEGID
      6968**DCL      7554<<ASSIGN
CGREAD_ERR
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:185  
      4895**DCL      7354<>CALL     7869<>CALL     7999<>CALL
CGREAD_STATE
      4896**DCL      7348>>DOCASE   7350<<ASSIGN   7353<<ASSIGN   7361<<ASSIGN   7425>>IF       7429>>IF
      7431<<ASSIGN   7441>>IF       7863>>DOCASE   7865<<ASSIGN   7868<<ASSIGN   7993>>DOCASE   7995<<ASSIGN
      7998<<ASSIGN
CHAR_2 IN PROCEDURE SIXTEEN
      8081**DCL      8079--PROC     8083>>ASSIGN
CLOSE IN PROCEDURE CLOSE_DCBS
      7740**LABEL    7738--GOTO
CLOSE_DCBS
      7734**PROC     7621--CALL     7624--CALL     7658--CALL
COM_CONT IN PROCEDURE MOVETOFILE
      7566**LABEL    7521--GOTO
CURUTS
      5102**DCL      5489--DCLINIT  7335<>CALL     7343<>CALL     7768<>CALL
CUR_UTS
      5485**DCL      7334<>CALL     7342<>CALL     7423<>CALL     7767<>CALL
CUR_UTS.V
      5489**DCL      5485--DCLINIT
DAU_BUFINIT
      5153**DCL      7973>>ASSIGN
DCBTAB
      6963**DCL      7369<<ASSIGN   7552--ASSIGN   7671<<ASSIGN   7675>>IF       7677<<ASSIGN   7679>>ASSIGN
      7682--IF       7684>>ASSIGN   7708>>ASSIGN   7724>>ASSIGN   7743>>IF       7744>>ASSIGN   7746>>ASSIGN
      7747>>ASSIGN   7748--IF       7757<<ASSIGN
DCT.DCTX
      7087**DCL      7984>>ASSIGN
DCT.DEVNM
      7086**DCL      7791>>ASSIGN   7879>>ASSIGN   8007>>ASSIGN
DCT.DP
      7106**DCL      7113--REDEF    7116--REDEF    7117--REDEF    7119--REDEF    7119--REDEF    7120--REDEF
      7121--REDEF    7121--REDEF
DCT.DQH$
      7102**DCL      7793>>ASSIGN
DCT.MPC.FWNAME
      7116**DCL      7784>>IF       7784>>IF       7784>>IF       7784>>IF       7792>>ASSIGN   7965>>DOSELCT
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:186  
      8008>>ASSIGN   8009>>DOSELCT
DCT.MPC.IOCHANX
      7114**DCL      7114--REDEF
DCT.SQH$
      7101**DCL      7777>>ASSIGN
DCT.STATUS.DOWN
      7103**DCL      7784>>IF       7805>>IF
DCT.STATUS.TND
      7104**DCL      7784>>IF
DCT.TYPE
      7096**DCL      7775>>IF       7805>>IF       7822>>DOCASE
DCT$
      5114**DCL      5115--REDEF    7086--IMP-PTR  7773<<ASSIGN   7775>>IF       7777>>ASSIGN   7782<<ASSIGN
      7784>>IF       7784>>IF       7784>>IF       7784>>IF       7784>>IF       7784>>IF       7791>>ASSIGN
      7792>>ASSIGN   7793>>ASSIGN   7803<<ASSIGN   7805>>IF       7805>>IF       7822>>DOCASE   7879>>ASSIGN
      7965>>DOSELCT  7984>>ASSIGN   8007>>ASSIGN   8008>>ASSIGN   8009>>DOSELCT
DCTPTR.SEGID
      5118**DCL      7774<<ASSIGN   7783<<ASSIGN   7804<<ASSIGN
DCTX
      6928**DCL      7771<<ASSIGN   7772>>DOWHILE  7773>>ASSIGN   7812<<ASSIGN   7814<<ASSIGN   7814>>ASSIGN
DEV$
      6899**DCL      7040--IMP-PTR
DEVBUF
      5129**DCL      5464--DCLINIT  5465--DCLINIT
DEVBUF.DCWLIST
      5130**DCL      7828<<ASSIGN   7836<<ASSIGN   7842<<ASSIGN   7968<<ASSIGN   7973<<ASSIGN
DEVBUF.STATS
      5131**DCL      7820--ASSIGN   7849<<ASSIGN   7876>>IF       7963--ASSIGN   7979<<ASSIGN
DEVBUF.ZERO
      5132**DCL      7852<<ASSIGN   7982<<ASSIGN
DEVSTATS
      7819**PROC     7806--CALL
DEVSTATS_EXIT IN PROCEDURE DEVSTATS
      7903**LABEL    7858--CALLALT  7875--GOTO     7877--GOTO
DEV_IOQ
      5464**DCL      7858<>CALL     7988<>CALL
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:187  
DEV_IOQ.V
      5466**DCL      5464--DCLINIT
DEV_IOQ.V.CHAN#
      5469**DCL      7798<<ASSIGN
DEV_IOQ.V.DLA.DCTX#
      5468**DCL      7854<<ASSIGN   7984<<ASSIGN
DEV_IOQ.V.EVENT#
      5468**DCL      7856<<ASSIGN   7986<<ASSIGN
DEV_IOQ.V.IOM#
      5469**DCL      7799<<ASSIGN
DEV_IOQ.V.WAIT#
      5466**DCL      7855<<ASSIGN   7985<<ASSIGN
DP_BUFINIT
      5133**DCL      7836>>ASSIGN
DQH.CHANSTATE
      7155**DCL      7795>>IF
DQH.IOCHAN.CHANNEL
      7150**DCL      7798>>ASSIGN
DQH.IOCHAN.IOM
      7150**DCL      7799>>ASSIGN
DQH.IOCHANX
      7149**DCL      7150--REDEF
DQH.MBX$
      7158**DCL      7159--REDEF
DQH.STATUS.DOWN
      7147**DCL      7795>>IF
DQH$
      5109**DCL      5110--REDEF    7147--IMP-PTR  7793<<ASSIGN   7795>>IF       7795>>IF       7798>>ASSIGN
      7799>>ASSIGN
DQHPTR.SEGID
      5113**DCL      7794<<ASSIGN
EL$DEVSTATS
      5162**DCL      5507--DCLINIT  5509--DCLINIT  7878<<ASSIGN
EL$DEVSTATS.DEVNM
      5162**DCL      7879<<ASSIGN
EL$DEVSTATS.FW_NAME
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:188  
      5162**DCL      7881<<ASSIGN
EL$DEVSTATS.MPCNAME
      5162**DCL      7880<<ASSIGN
EL$DEVSTATS.STATISTICS
      5162**DCL      7886<<ASSIGN   7890<<ASSIGN   7894<<ASSIGN   7898<<ASSIGN
EL$FILERR.ACCT
      7065**DCL      7491>>ASSIGN
EL$FILERR.ACTION
      7061**DCL      7489>>ASSIGN
EL$FILERR.CODE
      7061**DCL      7487>>ASSIGN
EL$FILERR.FNAME.C
      7065**DCL      7494--ASSIGN
EL$FILERR.FNAME.L
      7065**DCL      7493>>ASSIGN
EL$FILERR.NOSEND
      7061**DCL      7486>>IF
EL$FILERR.REASON
      7061**DCL      7488>>ASSIGN
EL$FILERR.SN
      7064**DCL      7492>>ASSIGN
EL$FILERR.SYSID
      7064**DCL      7490>>ASSIGN
EL$IOERR.EXTST
      7072**DCL      7475>>ASSIGN
EL$IOERR.MODEL
      7074**DCL      7476>>IF       7476>>IF
EL$IOERR.SEEK
      7072**DCL      7073--REDEF
EL$IOERR.STATUS
      7068**DCL      7069--REDEF
EL$IOERR.STATUS.MAJOR
      7068**DCL      7476>>IF
EL$IOERR.STATUS.MINOR
      7068**DCL      7476>>IF
EL$MPCSTATS
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:189  
      5159**DCL      5525--DCLINIT  5527--DCLINIT  8006<<ASSIGN
EL$MPCSTATS.FWNAME
      5159**DCL      8008<<ASSIGN
EL$MPCSTATS.MPCNAME
      5159**DCL      8007<<ASSIGN
EL$MPCSTATS.STATS
      5159**DCL      8013<<ASSIGN   8020<<ASSIGN   8027<<ASSIGN   8031<<ASSIGN   8037<<ASSIGN   8040<<ASSIGN
EL$TERM.KEYIN
      6998**DCL      7630>>IF
ELAN_CMD
      5069**DCL      6560--DCLINIT
ELF$CONS_ERR
      4876**DCL-ENT  7354--CALL     7391--CALL     7405--CALL     7437--CALL     7586--CALL     7869--CALL
      7999--CALL
ELF$EVENT
      4875**DCL-ENT  5055--DCLINIT
ELF$EXIT
      4874**DCL-ENT  5568--DCLINIT
ELL_TIME
      5249**DCL      7573<>CALL
ELL_TIME.V
      5253**DCL      5249--DCLINIT
ELT$INIT
      4878**DCL-ENT  7331--CALL
ELT$SETTHRESH
      4879**DCL-ENT  7470--CALL
ELT$THRESH
      4877**DCL-ENT  7482--CALL
EL_BADFILE
      4915**DCL      7716--ASSIGN
EL_DEVSTATS
      5203**DCL      7766>>IF
EL_EXCEED_SPACE
      4923**DCL      7698--ASSIGN
EL_FIBFR
      5075**DCL      4995--DCLINIT  4996--DCLINIT
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:190  
EL_FIBFR.ACCT
      5099**DCL      7491<<ASSIGN
EL_FIBFR.ACTION
      5096**DCL      7489<<ASSIGN
EL_FIBFR.CODE
      5094**DCL      7487<<ASSIGN
EL_FIBFR.FLAGS
      5082**DCL      5083--REDEF
EL_FIBFR.MSGID
      5078**DCL      5079--REDEF
EL_FIBFR.NAM
      5100**DCL      7494<<ASSIGN
EL_FIBFR.REASON
      5095**DCL      7488<<ASSIGN
EL_FIBFR.SISID
      5097**DCL      7490<<ASSIGN
EL_FIBFR.SN
      5098**DCL      7492<<ASSIGN
EL_LASTDAY
      6906**DCL      7364<<ASSIGN   7501>>IF       7513<>CALL     7514<<ASSIGN   7514>>ASSIGN
EL_LASTTIME
      6904**DCL      7362<<ASSIGN   7464>>IF       7467<<ASSIGN   7499<>CALL     7507--ASSIGN   7513<>CALL
      7570>>IF       7572<<ASSIGN
EL_MPCSTATS
      5204**DCL      7962>>IF
EL_NO_THRESHOLDING
      4893**DCL      7329<<REMEMBR
EL_NXTCNTR
      6908**DCL      7366<<ASSIGN   7465<<ASSIGN   7465>>ASSIGN   7466<<ASSIGN   7468>>ASSIGN   7570<<ASSIGN
      7570>>ASSIGN   7571<<ASSIGN   7578>>ASSIGN
EL_POLL_IN_PROGRESS
      4903**DCL      7857<<ASSIGN   7861>>DOWHILE  7987<<ASSIGN   7991>>DOWHILE
EL_RENAME_ON_ERR
      5927**DCL      7368<<ASSIGN   7563<<ASSIGN   7587>>IF       7588<<ASSIGN   7604>>IF       7608>>IF
EL_SECLOGSIZE
      4786**DCL      7374--ASSIGN
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:191  
EL_SNAPFLG
      4902**DCL      7325<<ASSIGN   7393>>IF       7397<<ASSIGN
EL_TERM
      5068**DCL      4953--DCLINIT  4954--DCLINIT  7630--IF       7631--ASSIGN
EL_THRESHOLD
      4911**DCL      7412<<ASSIGN   7415<<ASSIGN
EL_TIME
      5230**DCL      7508<>CALL
EL_TIME.TSTAMP_
      5233**DCL      7507<<ASSIGN
EL_TIME.V
      5234**DCL      5230--DCLINIT
EL_ZAPFLG
      4901**DCL      7515>>IF       7635<<ASSIGN
ERRBUF
      5067**DCL      5541--DCLINIT
ERRCODE
      5066**DCL      5540--DCLINIT  7659<<ASSIGN
ERRLOG_BUSY
      4919**DCL      7690--ASSIGN
ERR_CLOSE
      5908**DCL      7603<>CALL
ERR_CLOSE.SN_
      5908**DCL      5908--REDEF
ERR_CLOSE.UTL_
      5909**DCL      5909--REDEF
ERR_CLOSE.V
      5913**DCL      5908--DCLINIT
ERR_CLOSE.V.DCB#
      5914**DCL      7602<<ASSIGN
ERR_CLOSE.V.EXPIRE#
      5923**DCL      5923--REDEF
ERR_CLOSE.V.TYPE#
      5921**DCL      5921--REDEF
ERR_CLOSE.V.XTNSIZE#
      5918**DCL      5918--REDEF    5920--REDEF
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:192  
ERR_NAME
      5879**DCL      5910--DCLINIT
ERR_NAME.D
      5883**DCL      5871--DCLINIT  5872--DCLINIT  7596>>IF
ERR_NAME.FILE
      5881**DCL      7600<<ASSIGN   7601<<ASSIGN
ERR_NAME.T
      5884**DCL      5873--DCLINIT  5874--DCLINIT
ERR_NAME.YY
      5882**DCL      7597<<CALLBLT  7599<<CALLBLT
ERR_TIME
      5871**DCL      7595<>CALL
ERR_TIME.V
      5875**DCL      5871--DCLINIT
ES_BADFILE
      4917**DCL      7715--ASSIGN
ES_EXCEED_SPACE
      4924**DCL      7697--ASSIGN
ES_FORCED_TURNOVER
      4925**DCL      7556--ASSIGN
ES_LASTDAY
      6907**DCL      7365<<ASSIGN   7531>>IF       7543<>CALL     7544<<ASSIGN   7544>>ASSIGN
ES_LASTTIME
      6905**DCL      7363<<ASSIGN   7523>>IF       7526<<ASSIGN   7529<>CALL     7537--ASSIGN   7543<>CALL
ES_NXTCNTR
      6909**DCL      7367<<ASSIGN   7524<<ASSIGN   7524>>ASSIGN   7525<<ASSIGN   7527>>ASSIGN
ES_SEQUENCE_NUM
      5201**DCL      7528>>ASSIGN   7565<<ASSIGN   7565>>ASSIGN
ES_TIME
      5268**DCL      7538<>CALL
ES_TIME.TSTAMP_
      5271**DCL      7537<<ASSIGN
ES_TIME.V
      5272**DCL      5268--DCLINIT
EXTST_BYTE7
      7052**DCL      7053--REDEF    7475<<ASSIGN
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:193  
F#
      6920**DCL      7548<<ASSIGN   7549<>CALL     7550>>IF       7552>>ASSIGN   7564>>IF       7589>>ASSIGN
      7591>>ASSIGN   7600>>IF       7602>>ASSIGN   7611<>CALL
F$COMAC
      6980**DCL      7761>>ASSIGN
F$CSCG
      6981**DCL      7639>>IF       7646>>ASSIGN
F$DCB.ACTPOS
      2678**DCL      2678--REDEF
F$DCB.ARS
      2653**DCL      2653--REDEF
F$DCB.ATTR
      2671**DCL      2672--REDEF
F$DCB.BORROW
      2686**DCL      2686--REDEF    2686--REDEF    2686--REDEF
F$DCB.CFU$
      2687**DCL      7552>>ASSIGN
F$DCB.DCBNAME.L
      2700**DCL      2700--IMP-SIZ
F$DCB.EOMCHAR
      2657**DCL      2657--REDEF
F$DCB.FCD
      2666**DCL      7410>>IF       7502>>IF       7532>>IF       7640>>IF       7682>>IF       7748>>IF
F$DCB.FLDID
      2681**DCL      2681--REDEF
F$DCB.FORM$
      2675**DCL      2675--REDEF
F$DCB.FSECT
      2691**DCL      2691--REDEF
F$DCB.FSN
      2668**DCL      2668--REDEF    2668--REDEF    2669--REDEF
F$DCB.HEADER$
      2674**DCL      2674--REDEF
F$DCB.IXTNSIZE
      2672**DCL      2672--REDEF
F$DCB.LASTSTA$
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:194  
      2662**DCL      2662--REDEF
F$DCB.LVL
      2687**DCL      2687--REDEF
F$DCB.NAME.C
      2662**DCL      2662--REDEF
F$DCB.NOEOF
      2683**DCL      2683--REDEF
F$DCB.NRECS
      2673**DCL      2673--REDEF
F$DCB.NRECX
      2692**DCL      2692--REDEF
F$DCB.OHDR
      2684**DCL      2684--REDEF
F$DCB.ORG
      2667**DCL      2667--REDEF
F$DCB.PRECNO
      2690**DCL      2690--REDEF
F$DCB.RCSZ
      2695**DCL      2695--REDEF
F$DCB.RES
      2663**DCL      2663--REDEF
F$DCB.SETX
      2675**DCL      2675--REDEF
F$DCB.TAB$
      2674**DCL      2675--REDEF
F$DCB.TDA
      2689**DCL      2689--REDEF
F$DCB.WSN
      2664**DCL      2664--REDEF
F$ERRLOG
      6978**DCL      7359--ASSIGN   7503>>ASSIGN
F$ERRLOG$
      6894**DCL      7359<<ASSIGN   7502>>IF
F$SECLOG
      6979**DCL      7360--ASSIGN   7533>>ASSIGN
F$SECLOG$
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:195  
      6895**DCL      7360<<ASSIGN   7532>>IF
FILE# IN PROCEDURE OPENFILE
      7666**DCL      7665--PROC     7669>>IF       7670>>ASSIGN   7671>>ASSIGN   7671>>ASSIGN   7674>>CALLBLT
      7675>>IF       7677>>ASSIGN   7679>>ASSIGN   7682>>IF       7684>>ASSIGN   7688>>IF       7696>>IF
      7708>>ASSIGN   7714>>IF       7724>>ASSIGN
FILETAB.DCB#
      5169**DCL      7589>>ASSIGN   7602>>ASSIGN   7671>>ASSIGN
FILETAB.FPT$
      5165**DCL      7591>>ASSIGN   7670>>ASSIGN
FIRST_TIME
      6926**DCL      7371<<ASSIGN   7515>>IF       7517<<ASSIGN
FM$CFU.ACCTX
      7272**DCL      7272--REDEF
FM$CFU.UGRANS
      7273**DCL      7555>>IF
FPTBASE
      7226**DCL      7593<>CALL     7683<>CALL     7703<>CALL     7722<>CALL
FPTBASE.ACSVEH_
      7228**DCL      7229--REDEF
FPTBASE.ALTKEYS_
      7234**DCL      7235--REDEF    7235--REDEF
FPTBASE.HDR_
      7233**DCL      7234--REDEF
FPTBASE.NAME_
      7227**DCL      7704>>ASSIGN
FPTBASE.TAB_
      7232**DCL      7233--REDEF
FPTBASE.UHL_
      7226**DCL      7227--REDEF    7227--REDEF
FPTBASE.V.EXIST#
      7239**DCL      7721<<ASSIGN   7723<<ASSIGN
FPTBASE.V.FSN#
      7266**DCL      7266--REDEF    7266--REDEF
FPTBASE.V.FUN#
      7245**DCL      7702<<ASSIGN   7712<<ASSIGN   7720<<ASSIGN
FPTBASE.V.SHARE#
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:196  
      7240**DCL      7592<<ASSIGN   7610<<ASSIGN
FPTBASE.WSN_
      7232**DCL      7232--REDEF
FPT_CLOSE
      6725**DCL      7505<>CALL     7535<>CALL     7590<>CALL     7642<>CALL     7647<>CALL     7711<>CALL
      7751<>CALL
FPT_CLOSE.NAME_
      6726**DCL      7710<<ASSIGN   7713<<ASSIGN
FPT_CLOSE.SN_
      6725**DCL      6725--REDEF
FPT_CLOSE.UTL_
      6726**DCL      6726--REDEF
FPT_CLOSE.V
      6730**DCL      6725--DCLINIT
FPT_CLOSE.V.DCB#
      6731**DCL      7503<<ASSIGN   7533<<ASSIGN   7589<<ASSIGN   7641<<ASSIGN   7646<<ASSIGN   7708<<ASSIGN
      7744<<ASSIGN
FPT_CLOSE.V.EXPIRE#
      6740**DCL      6740--REDEF
FPT_CLOSE.V.OPER.RELG#
      6731**DCL      7504<<ASSIGN   7534<<ASSIGN   7709<<ASSIGN   7745<<ASSIGN
FPT_CLOSE.V.TYPE#
      6738**DCL      6738--REDEF
FPT_CLOSE.V.XTNSIZE#
      6735**DCL      6735--REDEF    6737--REDEF
FPT_ERRMSG
      5540**DCL      7661<>CALL
FPT_ERRMSG.V
      5544**DCL      5540--DCLINIT
FPT_ERRMSG.V.DCB#
      5544**DCL      7660<<ASSIGN
FPT_EVENT
      5055**DCL      7387<>CALL
FPT_EVENT.V
      5055**DCL      5055--DCLINIT
FPT_GETDCB
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:197  
      6638**DCL      7676<>CALL
FPT_GETDCB.V
      6639**DCL      6638--DCLINIT
FPT_KEYIN
      5287**DCL      7605<>CALL     7691<>CALL     7699<>CALL     7717<>CALL
FPT_KEYIN.MESS_
      5287**DCL      7556<<ASSIGN   7689<<ASSIGN   7690<<ASSIGN   7697<<ASSIGN   7698<<ASSIGN   7715<<ASSIGN
      7716<<ASSIGN
FPT_KEYIN.V
      5290**DCL      5287--DCLINIT
FPT_MONINFO
      5431**DCL      7376<>CALL
FPT_RDSYSLOG
      5581**DCL      7454<>CALL
FPT_READCSCG
      4951**DCL      7427<>CALL
FPT_READCSCG.STATION_
      4954**DCL      4955--REDEF
FPT_READCSCG.V
      4955**DCL      4951--DCLINIT
FPT_READCSCG.V.DVBYTE.REREAD#
      4966**DCL      4966--REDEF
FPT_READCSCG.V.INDX#
      4964**DCL      4964--REDEF
FPT_RELDCB
      6653**DCL      7756<>CALL
FPT_RELDCB.V
      6653**DCL      6653--DCLINIT
FPT_RELDCB.V.DCB#
      6653**DCL      7746<<ASSIGN
FPT_TOOBIG
      5028**DCL      7322<>CALL
FPT_TOOBIG.STATION_
      5030**DCL      5030--REDEF
FPT_TOOBIG.V
      5031**DCL      5028--DCLINIT
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:198  
FPT_TOOBIG.V.DVBYTE.VFC#
      5037**DCL      5037--REDEF
FPT_TRUNC
      6667**DCL      7753<>CALL     7762<>CALL
FPT_TRUNC.V
      6667**DCL      6667--DCLINIT
FPT_TRUNC.V.DCB#
      6667**DCL      7747<<ASSIGN   7761<<ASSIGN
FPT_WAIT
      5216**DCL      7443<>CALL     7650<>CALL     7860<>CALL     7990<>CALL
FPT_WAIT.V
      5217**DCL      5216--DCLINIT
FPT_WAIT.V.UNITS#
      5217**DCL      7424<<ASSIGN   7648<<ASSIGN   7859<<ASSIGN   7989<<ASSIGN
FPT_WRCSCGFI
      4994**DCL      7495<>CALL
FPT_WRCSCGFI.STATION_
      4996**DCL      4996--REDEF
FPT_WRCSCGFI.V
      4997**DCL      4994--DCLINIT
FPT_WRCSCGFI.V.DVBYTE.VFC#
      5003**DCL      5003--REDEF
FPT_WRITE
      6688**DCL      7562<>CALL     7581<>CALL
FPT_WRITE.BUF_
      6688**DCL      7561<<ASSIGN   7579<<ASSIGN
FPT_WRITE.STATION_
      6690**DCL      6690--REDEF
FPT_WRITE.V
      6691**DCL      6688--DCLINIT
FPT_WRITE.V.DCB#
      6691**DCL      7684<<ASSIGN   7724<<ASSIGN
FPT_WRITE.V.DVBYTE.VFC#
      6697**DCL      6697--REDEF
FPT_XCON
      5567**DCL      7386<>CALL
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:199  
FPT_XCON.V
      5568**DCL      5567--DCLINIT
FW_TYPE
      6950**DCL      7792<<ASSIGN   7824>>IF       7824>>IF       7824>>IF       7832>>IF       7832>>IF
      7832>>IF       7839>>IF       7881>>ASSIGN   7882>>IF
GET_DCB#
      5189**DCL      6639--DCLINIT  7677>>ASSIGN
GET_DCB_ALT IN PROCEDURE OPENFILE
      7727**LABEL    7676--CALLALT
HALF_WD.BYT0 IN PROCEDURE REFMT_HALF
      8111**DCL      8115<<ASSIGN   8117<<ASSIGN
HALF_WD.BYT1 IN PROCEDURE REFMT_HALF
      8112**DCL      8116<<ASSIGN   8118<<ASSIGN
HDR
      7057**DCL      7461--ASSIGN   7470<>CALL     7482<>CALL
HDR.CNTR
      7057**DCL      7468<<ASSIGN   7527<<ASSIGN
HDR.FILE
      7058**DCL      7462>>DOCASE   7548>>ASSIGN
HDR.LOST
      7058**DCL      7566>>IF       7569>>ASSIGN
HDR.SEQ_NUM
      7058**DCL      7528<<ASSIGN
HDR.SITE_ID
      7057**DCL      7568>>ASSIGN
HDR.SIZE
      7057**DCL      7460>>ASSIGN   7616>>ASSIGN
HDR.TYPE
      7057**DCL      7057--REDEF    7469>>IF       7473>>IF       7484>>IF
HDR.UTS
      7057**DCL      7464>>IF       7467>>ASSIGN   7523>>IF       7526>>ASSIGN   7567>>ASSIGN
I
      6940**DCL      7848<<DOINDEX  7849>>ASSIGN   7851<<DOINDEX  7852>>ASSIGN   7978<<DOINDEX  7979>>ASSIGN
      7981<<DOINDEX  7982>>ASSIGN   8011<<DOINDEX  8012>>CALL     8013>>ASSIGN   8013>>ASSIGN   8016<<DOINDEX
      8017>>ASSIGN   8018>>ASSIGN   8020>>ASSIGN   8023<<DOINDEX  8024>>ASSIGN   8025>>ASSIGN   8027>>ASSIGN
      8029<<DOINDEX  8030>>CALL     8031>>ASSIGN   8031>>ASSIGN   8039<<DOINDEX  8040>>ASSIGN   8040>>ASSIGN
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:200  
I IN PROCEDURE CLOSE_DCBS
      7736**DCL      7742<<DOINDEX  7743>>IF       7744>>ASSIGN   7746>>ASSIGN   7747>>ASSIGN   7748>>IF
      7749>>IF       7755>>IF       7757>>ASSIGN
I$
      6901**DCL      7021--IMP-PTR
IOQ_FLAG
      6938**DCL      7821<<ASSIGN   7827<<ASSIGN   7835<<ASSIGN   7841<<ASSIGN   7846>>IF       7964<<ASSIGN
      7967<<ASSIGN   7972<<ASSIGN   7976>>IF
IPC$
      6898**DCL      7005--IMP-PTR  7008--IMP-PTR  8015<<ASSIGN   8017>>ASSIGN   8018>>ASSIGN   8022<<ASSIGN
      8024>>ASSIGN   8025>>ASSIGN
IPC_BUFINIT
      5148**DCL      7968>>ASSIGN
IPC_IMU_TRANSACTIONS.HI_ORDER
      7007**DCL      8017>>ASSIGN
IPC_IMU_TRANSACTIONS.LO_ORDER
      7006**DCL      8018>>ASSIGN
IPC_IMU_WD_TRANSFERS.HI_ORDER
      7010**DCL      8024>>ASSIGN
IPC_IMU_WD_TRANSFERS.LO_ORDER
      7009**DCL      8025>>ASSIGN
IPC_STATS_CNTRS
      7004**DCL      8012<>CALL     8013>>ASSIGN   8015--ASSIGN   8022--ASSIGN   8030<>CALL     8031>>ASSIGN
      8033>>ASSIGN   8038<>CALL     8040>>ASSIGN
ITS_NOT_WORTH_THE_TROUBLE IN PROCEDURE MOVETOFILE
      7582**LABEL    7580--CALLALT
K
      6942**DCL      7884<<DOINDEX  7885>>CALL     7886>>ASSIGN   7886>>ASSIGN   7888<<DOINDEX  7889>>CALL
      7890>>ASSIGN   7890>>ASSIGN   7892<<DOINDEX  7893>>CALL     7894>>ASSIGN   7894>>ASSIGN   7897<<DOINDEX
      7898>>ASSIGN   7898>>ASSIGN
KEEP_GOING IN PROCEDURE MOVETOFILE
      7548**LABEL    7516--CALLALT
KEYIN_EVENT
      7629**PROC     7351--CALL     7866--CALL     7996--CALL
L1 IN PROCEDURE KEYIN_EVENT
      7643**LABEL    7642--CALLALT
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:201  
LAST_DEVSTATS
      6931**DCL      7335<>CALL     7336<<ASSIGN   7336>>ASSIGN   7337<>CALL     7337>>CALL     7346>>IF
      7768<>CALL     7769<<ASSIGN   7769>>ASSIGN   7770<>CALL     7770>>CALL
LOGBUF
      4891**DCL      5581--DCLINIT  7385--ASSIGN
LOGBUF.COUNT
      4891**DCL      7458>>DOWHILE
LOGBUF.INFO
      4891**DCL      7459--ASSIGN
LOSTERR
      5190**DCL      7579--ASSIGN
LOSTERR.CNTR
      5195**DCL      7578<<ASSIGN
LOSTERR.COUNT
      5200**DCL      7566>>IF       7569<<ASSIGN   7569>>ASSIGN   7582<<ASSIGN   7614<<ASSIGN   7614>>ASSIGN
LOSTERR.SITE_ID
      5196**DCL      7568<<ASSIGN
LOSTERR.UTS
      5194**DCL      7567<<ASSIGN   7570>>IF       7572>>ASSIGN
M$CLOSE
        21**DCL-ENT  7505--CALL     7535--CALL     7590--CALL     7603--CALL     7642--CALL     7647--CALL
      7711--CALL     7751--CALL
M$ELF_DATA
      6974**DCL      7410--IF
M$ERRMSG
        84**DCL-ENT  7661--CALL
M$EVENT
        76**DCL-ENT  7387--CALL
M$EXIT
        33**DCL-ENT  7323--CALL
M$GETDCB
        27**DCL-ENT  7676--CALL
M$GJOB
        86**DCL-ENT  7516--CALL
M$IOQ
        72**DCL-ENT  7858--CALL     7988--CALL
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:202  
M$KEYIN
        26**DCL-ENT  7605--CALL     7691--CALL     7699--CALL     7717--CALL
M$MONINFO
        89**DCL-ENT  7328--CALL     7376--CALL
M$OPEN
        21**DCL-ENT  7388--CALL     7389--CALL     7403--CALL     7408--CALL     7411--CALL     7593--CALL
      7683--CALL     7703--CALL     7722--CALL
M$RDSYSLOG
        70**DCL-ENT  7454--CALL
M$READ
        22**DCL-ENT  7427--CALL
M$RELDCB
        27**DCL-ENT  7756--CALL
M$SAD
        60**DCL-ENT  7372--CALL     7373--CALL     7551--CALL
M$TIME
        88**DCL-ENT  7334--CALL     7342--CALL     7423--CALL     7508--CALL     7538--CALL     7573--CALL
      7595--CALL     7767--CALL
M$TRUNC
        22**DCL-ENT  7753--CALL     7762--CALL
M$WAIT
        79**DCL-ENT  7443--CALL     7650--CALL     7860--CALL     7990--CALL
M$WRITE
        22**DCL-ENT  7322--CALL     7495--CALL     7562--CALL     7581--CALL     7645--CALL
M$WRSYSLOG
        70**DCL-ENT  7900--CALL     8044--CALL
M$XCON
        76**DCL-ENT  7386--CALL
M$XXX
        33**DCL-ENT  7662--CALL
MAXDCTX
      6927**DCL      7379<<ASSIGN   7381<<ASSIGN   7381>>ASSIGN   7382>>ASSIGN   7384<<ASSIGN   7384>>ASSIGN
      7772>>DOWHILE
MDS_BUFINIT
      5143**DCL      7842>>ASSIGN
MDS_STATS_CNTRS
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:203  
      7003**DCL      7885<>CALL     7886>>ASSIGN   7889<>CALL     7890>>ASSIGN   7893<>CALL     7894>>ASSIGN
MDS_STATS_WORD
      6943**DCL      6944--REDEF
MISCNAME
      5185**DCL      6502--DCLINIT
MISCNAME.N
      5188**DCL      7674<<CALLBLT
MONINFO
      6620**DCL      6605--DCLINIT
MONPTRS
      5446**DCL      5432--DCLINIT
MONPTRS.N$DCT$$
      5446**DCL      7377>>ASSIGN
MOVENAMELEN
      7018**DCL      7494>>ASSIGN
MOVETOFILE
      7448**PROC     7333--CALL     7341--CALL     7636--CALL     7862--CALL     7873--CALL     7992--CALL
      8003--CALL
MPC$
      6900**DCL      7034--IMP-PTR
MPCSTATS
      7961**PROC     7800--CALL
MPCSTATS_BUF
      6954**DCL      6955--REDEF
MPCSTATS_EXIT IN PROCEDURE MPCSTATS
      8047**LABEL    7988--CALLALT  8005--GOTO
MPC_NAME
      6951**DCL      7791<<ASSIGN   7880>>ASSIGN
MPC_NUM
      6930**DCL      7779<<DOINDEX  7780>>IF       7782>>ASSIGN
MT_BUFINIT
      5138**DCL      7828>>ASSIGN
N$DCT$$
      5124**DCL      5125--REDEF    7019--IMP-PTR  7377<<ASSIGN   7382>>ASSIGN   7773>>ASSIGN   7803>>ASSIGN
N$DCT$PTR.SEGID
      5128**DCL      7378<<ASSIGN
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:204  
NAMELEN
      5101**DCL      7018--IMP-SIZ  7493<<ASSIGN   7494>>ASSIGN
NEXT IN PROCEDURE MOVETOFILE
      7616**LABEL    7471--GOTO     7481--GOTO
NI$DCT$
      7019**DCL      7382>>ASSIGN   7773>>ASSIGN   7803>>ASSIGN
NOBUFS IN PROCEDURE MOVETOFILE
      7621**LABEL    7454--CALLALT
NO_THRESH
      7327**LABEL    7329--REMEMBR
NUM_CNTRS
      6932**DCL      7829<<ASSIGN   7837<<ASSIGN   7843<<ASSIGN   7892>>DOINDEX  7897>>DOINDEX  7969<<ASSIGN
      7974<<ASSIGN   8039>>DOINDEX
NWIO_TYC
      4894**DCL      7874>>IF       8004>>IF
NXTWD
      6916**DCL      7456<<ASSIGN   7459>>ASSIGN   7616<<ASSIGN   7616>>ASSIGN
OPACCTNG
      6000**DCL      7389<>CALL
OPACCTNG.ACSVEH_
      6002**DCL      6003--REDEF
OPACCTNG.ALTKEYS_
      6008**DCL      6009--REDEF    6009--REDEF
OPACCTNG.HDR_
      6007**DCL      6008--REDEF
OPACCTNG.TAB_
      6006**DCL      6007--REDEF
OPACCTNG.UHL_
      6000**DCL      6001--REDEF    6001--REDEF
OPACCTNG.V
      6009**DCL      6000--DCLINIT
OPACCTNG.V.FSN#
      6040**DCL      6040--REDEF    6040--REDEF
OPACCTNG.WSN_
      6006**DCL      6006--REDEF
OPCOMAC
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:205  
      6181**DCL      7403<>CALL     7408<>CALL
OPCOMAC.ACSVEH_
      6183**DCL      6184--REDEF
OPCOMAC.ALTKEYS_
      6189**DCL      6190--REDEF    6190--REDEF
OPCOMAC.HDR_
      6188**DCL      6189--REDEF
OPCOMAC.TAB_
      6187**DCL      6188--REDEF
OPCOMAC.UHL_
      6181**DCL      6182--REDEF    6182--REDEF
OPCOMAC.V
      6190**DCL      6181--DCLINIT
OPCOMAC.V.EXIST#
      6194**DCL      7395<<ASSIGN   7400<<ASSIGN   7406<<ASSIGN
OPCOMAC.V.FSN#
      6221**DCL      6221--REDEF    6221--REDEF
OPCOMAC.V.FUN#
      6200**DCL      7396<<ASSIGN   7401<<ASSIGN   7407<<ASSIGN
OPCOMAC.WSN_
      6187**DCL      6187--REDEF
OPCSCG
      6324**DCL      7388<>CALL
OPCSCG.ACSVEH_
      6326**DCL      6327--REDEF
OPCSCG.ALTKEYS_
      6332**DCL      6333--REDEF    6333--REDEF
OPCSCG.HDR_
      6331**DCL      6332--REDEF
OPCSCG.TAB_
      6330**DCL      6331--REDEF
OPCSCG.UHL_
      6324**DCL      6325--REDEF    6325--REDEF
OPCSCG.V
      6333**DCL      6324--DCLINIT
OPCSCG.V.FSN#
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:206  
      6364**DCL      6364--REDEF    6364--REDEF
OPCSCG.WSN_
      6330**DCL      6330--REDEF
OPEN$
      6969**DCL      7591<<ASSIGN   7592>>ASSIGN   7593>>CALL     7610>>ASSIGN   7670<<ASSIGN   7680<<ASSIGN
      7683>>CALL     7702>>ASSIGN   7703>>CALL     7704>>ASSIGN   7712>>ASSIGN   7720>>ASSIGN   7721>>ASSIGN
      7722>>CALL     7723>>ASSIGN
OPENFILE
      7665**PROC     7549--CALL     7580--CALL     7611--CALL
OPEN_ELF_DATA_UPD
      6818**DCL      7411<>CALL
OPEN_ELF_DATA_UPD.ACSVEH_
      6820**DCL      6821--REDEF
OPEN_ELF_DATA_UPD.ALTKEYS_
      6826**DCL      6827--REDEF    6827--REDEF
OPEN_ELF_DATA_UPD.HDR_
      6825**DCL      6826--REDEF
OPEN_ELF_DATA_UPD.TAB_
      6824**DCL      6825--REDEF
OPEN_ELF_DATA_UPD.UHL_
      6818**DCL      6819--REDEF    6819--REDEF
OPEN_ELF_DATA_UPD.V
      6827**DCL      6818--DCLINIT
OPEN_ELF_DATA_UPD.V.FSN#
      6858**DCL      6858--REDEF    6858--REDEF
OPEN_ELF_DATA_UPD.WSN_
      6824**DCL      6824--REDEF
OPERLOG
      5664**DCL      5166--DCLINIT
OPERLOG.ACSVEH_
      5666**DCL      5667--REDEF
OPERLOG.ALTKEYS_
      5672**DCL      5673--REDEF    5673--REDEF
OPERLOG.HDR_
      5671**DCL      5672--REDEF
OPERLOG.TAB_
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:207  
      5670**DCL      5671--REDEF
OPERLOG.UHL_
      5664**DCL      5665--REDEF    5665--REDEF
OPERLOG.V
      5673**DCL      5664--DCLINIT
OPERLOG.V.FSN#
      5704**DCL      5704--REDEF    5704--REDEF
OPERLOG.WSN_
      5670**DCL      5670--REDEF
OPMISC
      6501**DCL      7680--ASSIGN
OPMISC.ACSVEH_
      6503**DCL      6504--REDEF
OPMISC.ALTKEYS_
      6509**DCL      6510--REDEF    6510--REDEF
OPMISC.HDR_
      6508**DCL      6509--REDEF
OPMISC.TAB_
      6507**DCL      6508--REDEF
OPMISC.UHL_
      6501**DCL      6502--REDEF    6502--REDEF
OPMISC.V
      6510**DCL      6501--DCLINIT
OPMISC.V.DCB#
      6510**DCL      7679<<ASSIGN
OPMISC.V.FSN#
      6541**DCL      6541--REDEF    6541--REDEF
OPMISC.WSN_
      6507**DCL      6507--REDEF
OPNALT IN PROCEDURE STARTUP
      7419**LABEL    7387--CALLALT  7388--CALLALT  7408--CALLALT
OPNALT2 IN PROCEDURE STARTUP
      7405**LABEL    7403--CALLALT
OPNALT3 IN PROCEDURE STARTUP
      7415**LABEL    7411--CALLALT
OPN_ERR IN PROCEDURE OPENFILE
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:208  
      7687**LABEL    7683--CALLALT
OPN_ERR1 IN PROCEDURE OPENFILE
      7720**LABEL    7703--CALLALT
OPSECLOG
      5788**DCL      5168--DCLINIT
OPSECLOG.ACSVEH_
      5790**DCL      5791--REDEF
OPSECLOG.ALTKEYS_
      5796**DCL      5797--REDEF    5797--REDEF
OPSECLOG.HDR_
      5795**DCL      5796--REDEF
OPSECLOG.TAB_
      5794**DCL      5795--REDEF
OPSECLOG.UHL_
      5788**DCL      5789--REDEF    5789--REDEF
OPSECLOG.V
      5797**DCL      5788--DCLINIT
OPSECLOG.V.FSN#
      5828**DCL      5828--REDEF    5828--REDEF
OPSECLOG.WSN_
      5794**DCL      5794--REDEF
P$
      6893**DCL      7057--IMP-PTR  7459<<ASSIGN   7460>>ASSIGN   7461>>ASSIGN   7462>>DOCASE   7464>>IF
      7467>>ASSIGN   7468>>ASSIGN   7469>>IF       7470>>CALL     7473>>IF       7474>>ASSIGN   7482>>CALL
      7484>>IF       7485>>ASSIGN   7523>>IF       7526>>ASSIGN   7527>>ASSIGN   7528>>ASSIGN   7548>>ASSIGN
      7566>>IF       7567>>ASSIGN   7568>>ASSIGN   7569>>ASSIGN   7616>>ASSIGN
PROCESS_STATISTICS
      7765**PROC     7347--CALL
RD_ERR IN PROCEDURE SLEEP
      7435**LABEL    7427--CALLALT
RECVEC
      6921**DCL      7385<<ASSIGN   7461<<ASSIGN   7520<>CALL     7561>>ASSIGN   7631<<ASSIGN   7632<>CALL
REFMT_HALF
      8107**PROC     7889--CALL     8012--CALL     8030--CALL     8038--CALL
REFMT_WORD
      8088**PROC     7885--CALL     7893--CALL     8019--CALL     8026--CALL     8036--CALL
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:209  
RELEASE_DCBS IN PROCEDURE CLOSE_DCBS
      7739**ENTRY    7728--CALL
RELFLG IN PROCEDURE CLOSE_DCBS
      7735**DCL      7737<<ASSIGN   7740<<ASSIGN   7755>>IF
RSLT
      5065**DCL      5290--DCLINIT
SECLOGSIZE
      7276**DCL      7555>>IF
SECLOGSIZE$
      5170**DCL      5171--REDEF    7276--IMP-PTR  7374<<ASSIGN   7555>>IF
SECLOGSIZEPTR.SEGID
      5174**DCL      7375<<ASSIGN
SECLOG_BUSY
      4921**DCL      7689--ASSIGN
SECLOG_TURNOVER IN PROCEDURE MOVETOFILE
      7589**LABEL    7557--GOTO
SEE_CFUS
      5399**DCL      7551<>CALL
SEE_CFUS.V
      5399**DCL      5399--DCLINIT
SEE_MONIS
      5416**DCL      7373<>CALL
SEE_MONIS.V
      5416**DCL      5416--DCLINIT
SEE_TIGR
      5382**DCL      7372<>CALL
SEE_TIGR.V
      5382**DCL      5382--DCLINIT
SENSE_BYTE7.FMT
      7054**DCL      7476>>IF
SIZE4
      6910**DCL      7011--IMP-SIZ  7058--IMP-SIZ  7460<<ASSIGN   7461>>ASSIGN   7470>>CALL     7482>>CALL
SLEEP
      7422**PROC     7340--CALL     7871--CALL     8001--CALL
SQH.DOOR
      7134**DCL      7134--REDEF
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:210  
SQH.FDCT
      7134**DCL      7801>>DOINDEX  7801>>DOINDEX  7812>>ASSIGN
SQH.MPC$
      7136**DCL      7780>>IF       7782>>ASSIGN
SQH.NDCT
      7135**DCL      7801>>DOINDEX  7812>>ASSIGN
SQH$
      5104**DCL      5105--REDEF    7134--IMP-PTR  7777<<ASSIGN   7780>>IF       7782>>ASSIGN   7801>>DOINDEX
      7801>>DOINDEX  7801>>DOINDEX  7812>>ASSIGN   7812>>ASSIGN
SQHPTR.SEGID
      5108**DCL      7778<<ASSIGN
STARTUP
      7358**PROC     7332--CALL
START_ELAN
      6559**DCL      7516<>CALL
START_ELAN.V
      6561**DCL      6559--DCLINIT
STATS$
      6897**DCL      7002--IMP-PTR  7003--IMP-PTR  7004--IMP-PTR  7820<<ASSIGN   7885>>CALL     7886>>ASSIGN
      7889>>CALL     7890>>ASSIGN   7893>>CALL     7894>>ASSIGN   7898>>ASSIGN   7963<<ASSIGN   7970<<ASSIGN
      7970>>ASSIGN   8012>>CALL     8013>>ASSIGN   8015>>ASSIGN   8022>>ASSIGN   8030>>CALL     8031>>ASSIGN
      8033>>ASSIGN   8038>>CALL     8040>>ASSIGN
STATS_CNTRS
      7002**DCL      7898>>ASSIGN
SUBSYSTEM_DCTX
      6929**DCL      7801<<DOINDEX  7803>>ASSIGN   7854>>ASSIGN
SUSPEND IN PROCEDURE MOVETOFILE
      7624**LABEL    7549--CALLALT  7603--CALLALT  7608--GOTO     7611--CALLALT
SUSPENDED
      6925**DCL      7370<<ASSIGN   7450>>IF       7451<<ASSIGN   7625<<ASSIGN
T
      5061**DCL      5064--DCLINIT
T$
      5064**DCL      7015--IMP-PTR  7705>>ASSIGN   7705>>ASSIGN   7706>>ASSIGN   7706>>ASSIGN   7707>>CALLBLT
      7707>>CALLBLT  7707>>CALLBLT  7710>>ASSIGN   7710>>ASSIGN
TELL_KEYIN
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:211  
      5315**DCL      7645<>CALL
TELL_KEYIN.STATION_
      5317**DCL      5317--REDEF
TELL_KEYIN.V
      5318**DCL      5315--DCLINIT
TELL_KEYIN.V.DVBYTE.VFC#
      5324**DCL      5324--REDEF
TEMP
      6917**DCL      7455<<ASSIGN   7458>>DOWHILE  7617<<ASSIGN   7617>>ASSIGN   7638<<DOINDEX  7639--IF
      7639>>IF       7640--IF       7641>>ASSIGN
TEMP$
      5119**DCL      5120--REDEF    7061--IMP-PTR  7068--IMP-PTR  7382<<ASSIGN   7474<<ASSIGN   7475>>ASSIGN
      7476>>IF       7476>>IF       7476>>IF       7476>>IF       7485<<ASSIGN   7486>>IF       7487>>ASSIGN
      7488>>ASSIGN   7489>>ASSIGN   7490>>ASSIGN   7491>>ASSIGN   7492>>ASSIGN   7493>>ASSIGN   7494>>ASSIGN
TEMPPTR.SEGID
      5123**DCL      7380>>DOUNTIL
TEMP_BF
      7048**DCL      8084>>ASSIGN   8085>>ASSIGN
TEMP_BUF
      6952**DCL      7326--ASSIGN   8083<<ASSIGN
TEMP_HALF
      6919**DCL      8017<<ASSIGN   8018<<ASSIGN   8024<<ASSIGN   8025<<ASSIGN   8034<<ASSIGN   8035<<ASSIGN
TEMP_NAME
      7015**DCL      7705<<ASSIGN   7710--ASSIGN
TEMP_NAME.C
      7017**DCL      7707<<CALLBLT
TEMP_NAME.L
      7016**DCL      7017--IMP-SIZ  7705>>ASSIGN   7706<<ASSIGN   7706>>ASSIGN   7707>>CALLBLT  7707>>CALLBLT
      7710>>ASSIGN
TEMP_UTS
      6970**DCL      7343<>CALL     7344<<ASSIGN   7344>>ASSIGN   7345<>CALL     7345>>CALL     7346>>IF
      7499<>CALL     7500<<ASSIGN   7500>>ASSIGN   7501>>IF       7529<>CALL     7530<<ASSIGN   7530>>ASSIGN
      7531>>IF
TEMP_VEC
      6911**DCL      6912--REDEF    7704<<ASSIGN
TEMP_VEC1.PTR$
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:212  
      6915**DCL      7705>>ASSIGN   7705>>ASSIGN
TEMP_WORD
      6918**DCL      6919--REDEF    8019<>CALL     8020>>ASSIGN   8026<>CALL     8027>>ASSIGN   8036<>CALL
      8037>>ASSIGN
TEXTCBASE
      7012**DCL      7705>>ASSIGN
TEXTCBASE.L
      7013**DCL      7014--IMP-SIZ  7705>>ASSIGN
TOOBIG
      4927**DCL      5029--DCLINIT  5030--DCLINIT
TP$
      6902**DCL      7048--IMP-PTR  7326<<ASSIGN   8084>>ASSIGN   8085>>ASSIGN
TRY_AGAIN IN PROCEDURE OPENFILE
      7665**LABEL    7718--GOTO     7729--GOTO
VLP_ACCTNG
      6070**DCL      6001--DCLINIT
VLP_COMAC
      6251**DCL      6182--DCLINIT
VLP_CSCG
      6394**DCL      6325--DCLINIT
VLP_ELAN
      6591**DCL      6560--DCLINIT
VLP_ELAN_
      6083**DCL      5667--DCLINIT
VLP_ELAN_.Q
      6084**DCL      6083--DCLINIT
VLP_ELFNM
      6411**DCL      6325--DCLINIT
VLP_ELF_DATA
      6888**DCL      6819--DCLINIT
VLP_ERRLOG
      5175**DCL      5665--DCLINIT
VLP_ERRLOG.D
      5179**DCL      5230--DCLINIT  5231--DCLINIT  5249--DCLINIT  5250--DCLINIT  7509>>IF       7574>>IF
VLP_ERRLOG.YY
      5178**DCL      7510<<CALLBLT  7512<<CALLBLT  7575<<CALLBLT  7577<<CALLBLT
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:213  
VLP_KEYINSTA
      5354**DCL      4996--DCLINIT  5317--DCLINIT
VLP_KEYINSTA.MSGIDXT
      5364**DCL      5367--REDEF
VLP_SECLOG
      5180**DCL      5789--DCLINIT
VLP_SECLOG.D
      5184**DCL      5268--DCLINIT  5269--DCLINIT  7539>>IF
VLP_SECLOG.YY
      5183**DCL      7540<<CALLBLT  7542<<CALLBLT
VLP_SYSACCT
      5844**DCL      5793--DCLINIT  6005--DCLINIT  6186--DCLINIT  6329--DCLINIT  6506--DCLINIT  6823--DCLINIT
VLP_SYSTAC
      5858**DCL      5669--DCLINIT
WORD1 IN PROCEDURE REFMT_WORD
      8090**DCL      8088--PROC     8091--REDEF    8098>>ASSIGN   8099<<ASSIGN
WORD2.BYT0 IN PROCEDURE REFMT_WORD
      8093**DCL      8100<<ASSIGN
WORD2.BYT1 IN PROCEDURE REFMT_WORD
      8094**DCL      8101<<ASSIGN
WORD2.BYT2 IN PROCEDURE REFMT_WORD
      8095**DCL      8102<<ASSIGN
WORD2.BYT3 IN PROCEDURE REFMT_WORD
      8096**DCL      8103<<ASSIGN
WORD3 IN PROCEDURE REFMT_HALF
      8108**DCL      8107--PROC     8109--REDEF    8113>>ASSIGN   8114<<ASSIGN
WRFIERR IN PROCEDURE MOVETOFILE
      7494**LABEL    7495--CALLALT
WRITE_DEVSTATS
      5507**DCL      7900<>CALL
WRITE_DEVSTATS.V
      5507**DCL      5507--DCLINIT
WRITE_ERR IN PROCEDURE MOVETOFILE
      7586**LABEL    7520--CALLALT  7562--CALLALT  7581--CALLALT
WRITE_MPCSTATS
      5525**DCL      8044<>CALL
PL6.E3A0      #001=ELF File=ELF$MAIN.:E05TSI                                     TUE 07/29/97 15:18 Page:214  
WRITE_MPCSTATS.V
      5525**DCL      5525--DCLINIT
WRITE_REC IN PROCEDURE MOVETOFILE
      7561**LABEL    7612--GOTO
XUD$UTS_ADJ_25TH
      7302**DCL-ENT  7337--CALL     7345--CALL     7770--CALL
XUD$UTS_DIFF_SEC
      7284**DCL-ENT  7335--CALL     7343--CALL     7499--CALL     7513--CALL     7529--CALL     7543--CALL
      7768--CALL
ZAP_MESSHD
      5330**DCL      5316--DCLINIT  5317--DCLINIT
ZAP_MESSHD.FLAGS
      5337**DCL      5338--REDEF
ZAP_MESSHD.MSGID
      5333**DCL      5334--REDEF

PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:215  
     1371        1        /*T***********************************************************/
     1372        2        /*T*                                                         */
     1373        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1374        4        /*T*                                                         */
     1375        5        /*T***********************************************************/
     1376        6        ELF$EXIT: PROC ASYNC;
     1377        7        /**/
     1378        8        %INCLUDE CP_6;
     1379       89        %INCLUDE NI_SCODE_C;
     1380      107        %INCLUDE CP_6_SUBS;
     1381      647        %INCLUDE B$ROSEG;
     1382      710    1   DCL B$ROS$ PTR SYMREF;
     1383      711        %F$DCB;
     1384      768    1   DCL B$TCB$ PTR SYMREF;
     1385      769        %FPT_SCREECH (FPTN=ELF_SNAP,
     1386      770                      JERR=VLP_ERRCODE,
     1387      771                      SCODE=SC_ELF);
     1388      785        %VLP_ERRCODE;
     1389      830        %VLP_SCODE (FPTN=SC_ELF,
     1390      831               FCG=EL,
     1391      832                MID=F,
     1392      833               MON=NO,
     1393      834               CODE=%S$ELFABORT,
     1394      835               SEV=SEV_SNAP,
     1395      836               CUSR=YES,
     1396      837               DDSEG=YES,
     1397      838               FMBUF=YES,
     1398      839               ROSEG=YES,
     1399      840               ISEG=YES);
     1400      901        %FPT_LDTRC (NAME=ELF,ACCT=VLP_SYS);
     1401      919        %VLP_NAME (FPTN=ELF,NAME='ELF');
     1402      946        %VLP_ACCT (FPTN=VLP_SYS,ACCT=':SYS');
     1403      959        %FPT_WAIT (UNITS=120);
     1404      973    1   DCL ABORT_MESS CHAR(0) CONSTANT INIT('ELF ABORT');
     1405      974    1   DCL KEY_RESULT BIT(72) STATIC DALIGNED;
     1406      975    1   DCL I UBIN;
     1407      976        %FPT_KEYIN (MESS=ABORT_MESS,RESULTS=KEY_RESULT);
PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:216  
     1408      995        %FPT_XCON;
     1409     1009        %FPT_CLOSE(DISP=SAVE);
     1410     1051    1   DCL EL_THRESHOLD    BIT(1) ALIGNED SYMREF;
     1411     1052    1   DCL EL_SNAPFLG      BIT(1) ALIGNED SYMREF;
     1412     1053    1   DCL EL_NO_THRESHOLDING REMEMBER SYMREF;
     1413     1054        %EJECT;
PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:217  
     1414     1055    1        IF NOT EL_THRESHOLD
     1415     1056    1        THEN CALL M$XCON(FPT_XCON) ALTRET(L1);
     1416     1057    1   L1:  CALL M$KEYIN(FPT_KEYIN) ALTRET(L2);
     1417     1058    1   L2:  CALL M$SCREECH(ELF_SNAP) ALTRET(L3);
     1418     1059                /*S* SCREECH_CODE: ELF-S$ELFABORT
     1419     1060                      TYPE:    SNAP
     1420     1061                      MESSAGE: ELF ABORT   */
     1421     1062    1        EL_SNAPFLG = '1'B;            /* SET FLAG INDICATING A SNAP HAS OCCURRED */
     1422     1063    2   L3:  DO I = %M$1STDCB# TO B$ROS$->B$ROSEG.NUMDCBS;
     1423     1064    2             IF DCBADDR(I)~=ADDR(NIL) THEN
     1424     1065    3                  IF DCBADDR(I)->F$DCB.FCD# THEN DO;
     1425     1066    3                       FPT_CLOSE.V.DCB#=I;
     1426     1067    3                       CALL M$CLOSE(FPT_CLOSE) ALTRET(L6);
     1427     1068    3   L6:               END;
     1428     1069    2           END;                            /* DO I                               */
     1429     1070    2        IF NOT EL_THRESHOLD THEN DO;
     1430     1071    2             CALL M$WAIT(FPT_WAIT);
     1431     1072    2             CALL M$LDTRC(FPT_LDTRC);
     1432     1073    2           END;
     1433     1074    1        CALL M$CLRSTK;
     1434     1075    1        UNWIND TO EL_NO_THRESHOLDING;
     1435     1076    1   END ELF$EXIT;
     1436     1077        %EOD;

PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:218  
--  Include file information  --

   B$ROSEG.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   NI_SCODE_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure ELF$EXIT.

   Procedure ELF$EXIT requires 57 words for executable code.
   Procedure ELF$EXIT requires 4 words of local(AUTO) storage.

PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:219  

 Object Unit name= ELF$EXIT                                   File name= ELF$MAIN.:E05TOU
 UTS= JUL 29 '97 15:19:22.92 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none    88    130  ELF$EXIT
    2  RoData even  UTS      3      3  ELF$EXIT
    3   Proc  even  none    57     71  ELF$EXIT
    4  RoData even  none     1      1  ELF$EXIT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes            yes     Async       0  ELF$EXIT

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AAUTO
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AAUNWIND

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  B$ROS$                                EL_THRESHOLD
     EL_SNAPFLG                            EL_NO_THRESHOLDING                    B_VECTNIL
PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:220  

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:221  


     1371        1        /*T***********************************************************/
     1372        2        /*T*                                                         */
     1373        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1374        4        /*T*                                                         */
     1375        5        /*T***********************************************************/
     1376        6        ELF$EXIT: PROC ASYNC;

      6  3 000000   000000 700200 xent  ELF$EXIT     TSX0  ! X66_AAUTO
         3 000001   000004 000000                    ZERO    4,0

     1377        7        /**/
     1378        8        %INCLUDE CP_6;
     1379       89        %INCLUDE NI_SCODE_C;
     1380      107        %INCLUDE CP_6_SUBS;
     1381      647        %INCLUDE B$ROSEG;
     1382      710    1   DCL B$ROS$ PTR SYMREF;
     1383      711        %F$DCB;
     1384      768    1   DCL B$TCB$ PTR SYMREF;
     1385      769        %FPT_SCREECH (FPTN=ELF_SNAP,
     1386      770                      JERR=VLP_ERRCODE,
     1387      771                      SCODE=SC_ELF);
     1388      785        %VLP_ERRCODE;
     1389      830        %VLP_SCODE (FPTN=SC_ELF,
     1390      831               FCG=EL,
     1391      832                MID=F,
     1392      833               MON=NO,
     1393      834               CODE=%S$ELFABORT,
     1394      835               SEV=SEV_SNAP,
     1395      836               CUSR=YES,
     1396      837               DDSEG=YES,
     1397      838               FMBUF=YES,
     1398      839               ROSEG=YES,
     1399      840               ISEG=YES);
     1400      901        %FPT_LDTRC (NAME=ELF,ACCT=VLP_SYS);
     1401      919        %VLP_NAME (FPTN=ELF,NAME='ELF');
     1402      946        %VLP_ACCT (FPTN=VLP_SYS,ACCT=':SYS');
PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:222  
     1403      959        %FPT_WAIT (UNITS=120);
     1404      973    1   DCL ABORT_MESS CHAR(0) CONSTANT INIT('ELF ABORT');
     1405      974    1   DCL KEY_RESULT BIT(72) STATIC DALIGNED;
     1406      975    1   DCL I UBIN;
     1407      976        %FPT_KEYIN (MESS=ABORT_MESS,RESULTS=KEY_RESULT);
     1408      995        %FPT_XCON;
     1409     1009        %FPT_CLOSE(DISP=SAVE);
     1410     1051    1   DCL EL_THRESHOLD    BIT(1) ALIGNED SYMREF;
     1411     1052    1   DCL EL_SNAPFLG      BIT(1) ALIGNED SYMREF;
     1412     1053    1   DCL EL_NO_THRESHOLDING REMEMBER SYMREF;
     1413     1054        %EJECT;
PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:223  
     1414     1055    1        IF NOT EL_THRESHOLD

   1055  3 000002   000000 234000 xsym               SZN     EL_THRESHOLD
         3 000003   000010 604000 3                  TMI     L1

     1415     1056    1        THEN CALL M$XCON(FPT_XCON) ALTRET(L1);

   1056  3 000004   000064 630400 1                  EPPR0   FPT_XCON
         3 000005   410003 713400                    CLIMB   alt,+4099
         3 000006   400400 401760                    pmme    nvectors=2
         3 000007   000010 702000 3                  TSX2    L1

     1416     1057    1   L1:  CALL M$KEYIN(FPT_KEYIN) ALTRET(L2);

   1057  3 000010   000046 630400 1     L1           EPPR0   FPT_KEYIN
         3 000011   520000 713400                    CLIMB   alt,+40960
         3 000012   401400 401760                    pmme    nvectors=4
         3 000013   000014 702000 3                  TSX2    L2

     1417     1058    1   L2:  CALL M$SCREECH(ELF_SNAP) ALTRET(L3);

   1058  3 000014   000000 630400 1     L2           EPPR0   ELF_SNAP
         3 000015   400013 713400                    CLIMB   alt,+11
         3 000016   401000 401760                    pmme    nvectors=3
         3 000017   000022 702000 3                  TSX2    L3

     1418     1059                /*S* SCREECH_CODE: ELF-S$ELFABORT
     1419     1060                      TYPE:    SNAP
     1420     1061                      MESSAGE: ELF ABORT   */
     1421     1062    1        EL_SNAPFLG = '1'B;            /* SET FLAG INDICATING A SNAP HAS OCCURRED */

   1062  3 000020   400000 236003                    LDQ     -131072,DU
         3 000021   000000 756000 xsym               STQ     EL_SNAPFLG

     1422     1063    2   L3:  DO I = %M$1STDCB# TO B$ROS$->B$ROSEG.NUMDCBS;

   1063  3 000022   000012 235007       L3           LDA     10,DL
PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:224  
         3 000023   200003 755100                    STA     I,,AUTO
         3 000024   000047 710000 3                  TRA     L6+3

     1423     1064    2             IF DCBADDR(I)~=ADDR(NIL) THEN

   1064  3 000025   000000 470400 4                  LDP0    0
         3 000026   000000 471500                    LDP1    0,,PR0
         3 000027   200003 720100                    LXL0    I,,AUTO
         3 000030   100000 236110                    LDQ     0,X0,PR1
         3 000031   000001 116000 xsym               CMPQ    B_VECTNIL+1
         3 000032   000044 600000 3                  TZE     L6

     1424     1065    3                  IF DCBADDR(I)->F$DCB.FCD# THEN DO;

   1065  3 000033   100000 473510                    LDP3    0,X0,PR1
         3 000034   300031 236100                    LDQ     25,,PR3
         3 000035   020000 316007                    CANQ    8192,DL
         3 000036   000044 600000 3                  TZE     L6

     1425     1066    3                       FPT_CLOSE.V.DCB#=I;

   1066  3 000037   000124 740000 1                  STX0    FPT_CLOSE+26

     1426     1067    3                       CALL M$CLOSE(FPT_CLOSE) ALTRET(L6);

   1067  3 000040   000072 630400 1                  EPPR0   FPT_CLOSE
         3 000041   450001 713400                    CLIMB   alt,close
         3 000042   406000 401760                    pmme    nvectors=13
         3 000043   000044 702000 3                  TSX2    L6

     1427     1068    3   L6:               END;

   1068  3 000044                       L6           null
     1428     1069    2           END;                            /* DO I                               */

   1069  3 000044   200003 235100                    LDA     I,,AUTO
         3 000045   000001 035007                    ADLA    1,DL
PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:225  
         3 000046   200003 755100                    STA     I,,AUTO
         3 000047   000000 470400 xsym               LDP0    B$ROS$
         3 000050   000002 236100                    LDQ     2,,PR0
         3 000051   000022 772000                    QRL     18
         3 000052   200003 116100                    CMPQ    I,,AUTO
         3 000053   000025 603000 3                  TRC     s:1064

     1429     1070    2        IF NOT EL_THRESHOLD THEN DO;

   1070  3 000054   000000 234000 xsym               SZN     EL_THRESHOLD
         3 000055   000064 604000 3                  TMI     s:1074

     1430     1071    2             CALL M$WAIT(FPT_WAIT);

   1071  3 000056   000036 630400 1                  EPPR0   FPT_WAIT
         3 000057   020006 713400                    CLIMB   8198
         3 000060   400400 401760                    pmme    nvectors=2

     1431     1072    2             CALL M$LDTRC(FPT_LDTRC);

   1072  3 000061   000012 630400 1                  EPPR0   FPT_LDTRC
         3 000062   000006 713400                    CLIMB   6
         3 000063   403000 401760                    pmme    nvectors=7

     1432     1073    2           END;

     1433     1074    1        CALL M$CLRSTK;

   1074  3 000064   010013 713400                    CLIMB   4107
         3 000065   000000 401760                    pmme    nvectors=0

     1434     1075    1        UNWIND TO EL_NO_THRESHOLDING;

   1075  3 000066   000000 237200 xsym               LDAQ  ! EL_NO_THRESHOLDING
         3 000067   000000 700200 xent               TSX0  ! X66_AAUNWIND
         3 000070   000000 000200                    ZERO    0,128
     1435     1076    1   END ELF$EXIT;
PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:226  
     1436     1077        %EOD;

PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:227  
--  Include file information  --

   B$ROSEG.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   NI_SCODE_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure ELF$EXIT.
PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:228  

 **** Variables and constants ****

  ****  Section 001  Data  ELF$EXIT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    32-0-0/c STRC        r     1 ELF                        0-0-0/d STRC(216)   r     1 ELF_SNAP
    72-0-0/d STRC(1080)  r     1 FPT_CLOSE                 46-0-0/d STRC(504)   r     1 FPT_KEYIN
    12-0-0/d STRC(576)   r     1 FPT_LDTRC                 36-0-0/d STRC(216)   r     1 FPT_WAIT
    64-0-0/d STRC(216)   r     1 FPT_XCON                  44-0-0/d BIT (72)    r     1 KEY_RESULT
    10-0-0/d STRC(72)    r     1 SC_ELF                     6-0-0/w STRC        r     1 VLP_ERRCODE
    33-0-0/c STRC(72)    r     1 VLP_SYS

  ****  Section 002 RoData ELF$EXIT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(9)     r     1 ABORT_MESS

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w UBIN        r     1 I

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$ROS$                     0-0-0/d REMB        r     1 EL_NO_THRESHOLDING
     0-0-0/w BIT         r     1 EL_SNAPFLG                 0-0-0/w BIT         r     1 EL_THRESHOLD

  ****  BASED and DCB variables  ****
PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:229  

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(3024)  r     1 B$ROSEG                    0-0-0/d ASTR(3528)  r     1 F$DCB


   Procedure ELF$EXIT requires 57 words for executable code.
   Procedure ELF$EXIT requires 4 words of local(AUTO) storage.
PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:230  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:231  
          MINI XREF LISTING

ABORT_MESS
       973**DCL       987--DCLINIT   988--DCLINIT
B$ROS$
       710**DCL      1063>>DOINDEX
B$ROSEG.NUMDCBS
       660**DCL      1063>>DOINDEX
ELF
       944**DCL       914--DCLINIT
ELF_SNAP
       782**DCL      1058<>CALL
EL_NO_THRESHOLDING
      1053**DCL      1075>>UNWIND
EL_SNAPFLG
      1052**DCL      1062<<ASSIGN
EL_THRESHOLD
      1051**DCL      1055>>IF       1070>>IF
F$DCB.ACTPOS
       744**DCL       744--REDEF
F$DCB.ARS#
       718**DCL       718--REDEF
F$DCB.ATTR
       737**DCL       738--REDEF
F$DCB.BORROW
       752**DCL       752--REDEF     752--REDEF     752--REDEF
F$DCB.DCBNAME.L
       766**DCL       766--IMP-SIZ
F$DCB.EOMCHAR#
       722**DCL       722--REDEF
F$DCB.FCD#
       731**DCL      1065>>IF
F$DCB.FLDID
       747**DCL       747--REDEF
PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:232  
F$DCB.FORM$
       741**DCL       741--REDEF
F$DCB.FSECT
       757**DCL       757--REDEF
F$DCB.FSN#
       734**DCL       734--REDEF     734--REDEF     735--REDEF
F$DCB.HEADER$
       740**DCL       740--REDEF
F$DCB.IXTNSIZE#
       738**DCL       738--REDEF
F$DCB.LASTSTA$
       727**DCL       727--REDEF
F$DCB.LVL
       753**DCL       753--REDEF
F$DCB.NAME#.C
       728**DCL       728--REDEF
F$DCB.NOEOF
       750**DCL       750--REDEF
F$DCB.NRECS#
       739**DCL       739--REDEF
F$DCB.NRECX
       758**DCL       758--REDEF
F$DCB.OHDR
       750**DCL       750--REDEF
F$DCB.ORG#
       733**DCL       733--REDEF
F$DCB.PRECNO
       756**DCL       756--REDEF
F$DCB.RCSZ
       762**DCL       762--REDEF
F$DCB.RES#
       729**DCL       729--REDEF
F$DCB.SETX
       741**DCL       741--REDEF
F$DCB.TAB$
       741**DCL       741--REDEF
PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:233  
F$DCB.TDA
       755**DCL       756--REDEF
F$DCB.WSN#
       729**DCL       729--REDEF
FPT_CLOSE
      1032**DCL      1067<>CALL
FPT_CLOSE.SN_
      1032**DCL      1032--REDEF
FPT_CLOSE.UTL_
      1033**DCL      1033--REDEF
FPT_CLOSE.V
      1037**DCL      1032--DCLINIT
FPT_CLOSE.V.DCB#
      1038**DCL      1066<<ASSIGN
FPT_CLOSE.V.EXPIRE#
      1047**DCL      1047--REDEF
FPT_CLOSE.V.TYPE#
      1045**DCL      1045--REDEF
FPT_CLOSE.V.XTNSIZE#
      1042**DCL      1042--REDEF    1044--REDEF
FPT_KEYIN
       987**DCL      1057<>CALL
FPT_KEYIN.V
       990**DCL       987--DCLINIT
FPT_LDTRC
       914**DCL      1072<>CALL
FPT_LDTRC.V
       916**DCL       916--DCLINIT
FPT_WAIT
       970**DCL      1071<>CALL
FPT_WAIT.V
       971**DCL       970--DCLINIT
FPT_XCON
      1006**DCL      1056<>CALL
FPT_XCON.V
      1007**DCL      1006--DCLINIT
PL6.E3A0      #002=ELF$EXIT File=ELF$MAIN.:E05TSI                                TUE 07/29/97 15:19 Page:234  
I
       975**DCL      1063<<DOINDEX  1064--IF       1065--IF       1066>>ASSIGN
KEY_RESULT
       974**DCL       990--DCLINIT
L1
      1057**LABEL    1056--CALLALT
L2
      1058**LABEL    1057--CALLALT
L3
      1063**LABEL    1058--CALLALT
L6
      1068**LABEL    1067--CALLALT
M$CLOSE
        17**DCL-ENT  1067--CALL
M$CLRSTK
        75**DCL-ENT  1074--CALL
M$KEYIN
        22**DCL-ENT  1057--CALL
M$LDTRC
        30**DCL-ENT  1072--CALL
M$SCREECH
        31**DCL-ENT  1058--CALL
M$WAIT
        75**DCL-ENT  1071--CALL
M$XCON
        72**DCL-ENT  1056--CALL
SC_ELF
       855**DCL       782--DCLINIT
VLP_ERRCODE
       797**DCL       782--DCLINIT
VLP_SYS
       957**DCL       914--DCLINIT

PL6.E3A0      #003=ELF$CONS_ERR File=ELF$MAIN.:E05TSI                            TUE 07/29/97 15:19 Page:235  
     1437        1        /*T***********************************************************/
     1438        2        /*T*                                                         */
     1439        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1440        4        /*T*                                                         */
     1441        5        /*T***********************************************************/
     1442        6        ELF$CONS_ERR: PROC(ERRCODE);
     1443        7        /*D* NAME: ELF$CONS_ERR
     1444        8             CALL: CALL ELF$CONS_ERR(ERRCODE);
     1445        9                    where ERRCODE is optional and is the error code.
     1446       10                    If ERRCODE is missing, the error from the TCB is used.
     1447       11             DESCRIPTION: This procedure puts out a message to the SYS console
     1448       12                    saying 'ELF SEZ: error message' for the error of interest */
     1449       13    1   DCL ERRCODE BIT(36) ALIGNED;
     1450       14        %INCLUDE CP_6;
     1451       95        %INCLUDE OC_MESSHD_C;
     1452      148        %INCLUDE OC_SUBS_C;
     1453      879        %B$TCB;
     1454      882        %B$ALT;
     1455      890    1   DCL B$TCB$ PTR SYMREF;
     1456      891    1   DCL F$CSCG DCB;
     1457      892    1   DCL ERRBUF CHAR(120) STATIC;
     1458      893    1   DCL ERR BIT(36) STATIC;
     1459      894        %FPT_ERRMSG(FPTN = FPT_ERRMSG,STCLASS = STATIC,
     1460      895                CODE = ERR,
     1461      896                BUF = ERRBUF,
     1462      897                RESULTS = VLR_ERRMSG);
     1463      924        %VLR_ERRMSG(FPTN = VLR_ERRMSG,STCLASS = STATIC);
     1464      946        %OC_MESSHD_W(NAME = OCMESSHD,STCLASS = STATIC,
     1465      947                ATR = M_SYS,
     1466      948                MSG = EL_ELFSEZ#,
     1467      949                NPARMS = 1,
     1468      950                FUNC = WR);
     1469      963    1        2 LEN UBIN BYTE UNAL INIT(119),
     1470      964    1             2 BUF CHAR(120);
     1471      965        %FPT_WRITE(FPTN = FPT_WRCSCG,STCLASS = CONSTANT,
     1472      966                DCB = F$CSCG,
     1473      967                BUF = OCMESSHD);
PL6.E3A0      #003=ELF$CONS_ERR File=ELF$MAIN.:E05TSI                            TUE 07/29/97 15:19 Page:236  
     1474      998        /**
     1475      999         **
     1476     1000         **/
     1477     1001    1        IF ADDR(ERRCODE)=ADDR(NIL)
     1478     1002    2        THEN DO;                           /* Use the TCB frame                  */
     1479     1003    2             ERR = B$TCB$->B$TCB.ALT$->B$ALT.ERR;
     1480     1004    2             FPT_ERRMSG.V.DCB# = B$TCB$->B$TCB.ALT$->B$ALT.DCB#;
     1481     1005    2           END;
     1482     1006    2        ELSE DO;
     1483     1007    2             ERR = ERRCODE;
     1484     1008    2             FPT_ERRMSG.V.DCB# = DCBNUM(NIL);
     1485     1009    2           END;
     1486     1010    1        CALL M$ERRMSG(FPT_ERRMSG) ALTRET(NO_MSG);
     1487     1011    1        OCMESSHD.BUF = ERRBUF;
     1488     1012    1        CALL M$WRITE(FPT_WRCSCG) ALTRET(NO_MSG);
     1489     1013    1   NO_MSG:
     1490     1014    1        RETURN;
     1491     1015    1   END ELF$CONS_ERR;
     1492     1016        %EOD;

PL6.E3A0      #003=ELF$CONS_ERR File=ELF$MAIN.:E05TSI                            TUE 07/29/97 15:19 Page:237  
--  Include file information  --

   OC_SUBS_C.:E05TOU  is referenced.
   OC_MESSHD_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure ELF$CONS_ERR.

   Procedure ELF$CONS_ERR requires 30 words for executable code.
   Procedure ELF$CONS_ERR requires 4 words of local(AUTO) storage.

PL6.E3A0      #003=ELF$CONS_ERR File=ELF$MAIN.:E05TSI                            TUE 07/29/97 15:19 Page:238  

 Object Unit name= ELF$CONS_ERR                               File name= ELF$MAIN.:E05TOU
 UTS= JUL 29 '97 15:19:32.88 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   DCB   even  none     0      0  F$CSCG
    2   Data  even  none    98    142  ELF$CONS_ERR
    3  RoData even  UTS     12     14  ELF$CONS_ERR
    4   Proc  even  none    30     36  ELF$CONS_ERR

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     4      0   yes            yes      Std        1  ELF$CONS_ERR

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  B$TCB$                                F$CSCG
     B_VECTNIL
PL6.E3A0      #003=ELF$CONS_ERR File=ELF$MAIN.:E05TSI                            TUE 07/29/97 15:19 Page:239  

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #003=ELF$CONS_ERR File=ELF$MAIN.:E05TSI                            TUE 07/29/97 15:19 Page:240  


     1437        1        /*T***********************************************************/
     1438        2        /*T*                                                         */
     1439        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1440        4        /*T*                                                         */
     1441        5        /*T***********************************************************/
     1442        6        ELF$CONS_ERR: PROC(ERRCODE);

      6  4 000000   000000 700200 xent  ELF$CONS_ERR TSX0  ! X66_AUTO_1
         4 000001   000004 000001                    ZERO    4,1

     1443        7        /*D* NAME: ELF$CONS_ERR
     1444        8             CALL: CALL ELF$CONS_ERR(ERRCODE);
     1445        9                    where ERRCODE is optional and is the error code.
     1446       10                    If ERRCODE is missing, the error from the TCB is used.
     1447       11             DESCRIPTION: This procedure puts out a message to the SYS console
     1448       12                    saying 'ELF SEZ: error message' for the error of interest */
     1449       13    1   DCL ERRCODE BIT(36) ALIGNED;
     1450       14        %INCLUDE CP_6;
     1451       95        %INCLUDE OC_MESSHD_C;
     1452      148        %INCLUDE OC_SUBS_C;
     1453      879        %B$TCB;
     1454      882        %B$ALT;
     1455      890    1   DCL B$TCB$ PTR SYMREF;
     1456      891    1   DCL F$CSCG DCB;
     1457      892    1   DCL ERRBUF CHAR(120) STATIC;
     1458      893    1   DCL ERR BIT(36) STATIC;
     1459      894        %FPT_ERRMSG(FPTN = FPT_ERRMSG,STCLASS = STATIC,
     1460      895                CODE = ERR,
     1461      896                BUF = ERRBUF,
     1462      897                RESULTS = VLR_ERRMSG);
     1463      924        %VLR_ERRMSG(FPTN = VLR_ERRMSG,STCLASS = STATIC);
     1464      946        %OC_MESSHD_W(NAME = OCMESSHD,STCLASS = STATIC,
     1465      947                ATR = M_SYS,
     1466      948                MSG = EL_ELFSEZ#,
     1467      949                NPARMS = 1,
     1468      950                FUNC = WR);
PL6.E3A0      #003=ELF$CONS_ERR File=ELF$MAIN.:E05TSI                            TUE 07/29/97 15:19 Page:241  
     1469      963    1        2 LEN UBIN BYTE UNAL INIT(119),
     1470      964    1             2 BUF CHAR(120);
     1471      965        %FPT_WRITE(FPTN = FPT_WRCSCG,STCLASS = CONSTANT,
     1472      966                DCB = F$CSCG,
     1473      967                BUF = OCMESSHD);
     1474      998        /**
     1475      999         **
     1476     1000         **/
     1477     1001    1        IF ADDR(ERRCODE)=ADDR(NIL)

   1001  4 000002   200003 236100                    LDQ     @ERRCODE,,AUTO
         4 000003   000001 116000 xsym               CMPQ    B_VECTNIL+1
         4 000004   000015 601000 4                  TNZ     s:1007

     1478     1002    2        THEN DO;                           /* Use the TCB frame                  */

     1479     1003    2             ERR = B$TCB$->B$TCB.ALT$->B$ALT.ERR;

   1003  4 000005   000000 470400 xsym               LDP0    B$TCB$
         4 000006   000000 471500                    LDP1    0,,PR0
         4 000007   100102 236100                    LDQ     66,,PR1
         4 000010   000036 756000 2                  STQ     ERR

     1480     1004    2             FPT_ERRMSG.V.DCB# = B$TCB$->B$TCB.ALT$->B$ALT.DCB#;

   1004  4 000011   000000 471500                    LDP1    0,,PR0
         4 000012   100101 720100                    LXL0    65,,PR1
         4 000013   000066 740000 2                  STX0    FPT_ERRMSG+22

     1481     1005    2           END;

   1005  4 000014   000022 710000 4                  TRA     s:1010

     1482     1006    2        ELSE DO;

     1483     1007    2             ERR = ERRCODE;

PL6.E3A0      #003=ELF$CONS_ERR File=ELF$MAIN.:E05TSI                            TUE 07/29/97 15:19 Page:242  
   1007  4 000015   200003 470500                    LDP0    @ERRCODE,,AUTO
         4 000016   000000 236100                    LDQ     0,,PR0
         4 000017   000036 756000 2                  STQ     ERR

     1484     1008    2             FPT_ERRMSG.V.DCB# = DCBNUM(NIL);

   1008  4 000020   000000 220003                    LDX0    0,DU
         4 000021   000066 740000 2                  STX0    FPT_ERRMSG+22

     1485     1009    2           END;

     1486     1010    1        CALL M$ERRMSG(FPT_ERRMSG) ALTRET(NO_MSG);

   1010  4 000022   000040 630400 2                  EPPR0   FPT_ERRMSG
         4 000023   420000 713400                    CLIMB   alt,+8192
         4 000024   405000 401760                    pmme    nvectors=11
         4 000025   000035 702000 4                  TSX2    NO_MSG

     1487     1011    1        OCMESSHD.BUF = ERRBUF;

   1011  4 000026   040000 100400                    MLR     fill='040'O
         4 000027   000000 000170 2                  ADSC9   ERRBUF                   cn=0,n=120
         4 000030   000103 200170 2                  ADSC9   OCMESSHD+5               cn=1,n=120

     1488     1012    1        CALL M$WRITE(FPT_WRCSCG) ALTRET(NO_MSG);

   1012  4 000031   000000 630400 3                  EPPR0   FPT_WRCSCG
         4 000032   440001 713400                    CLIMB   alt,write
         4 000033   401400 401760                    pmme    nvectors=4
         4 000034   000035 702000 4                  TSX2    NO_MSG

     1489     1013    1   NO_MSG:
     1490     1014    1        RETURN;

   1014  4 000035   000000 702200 xent  NO_MSG       TSX2  ! X66_ARET
     1491     1015    1   END ELF$CONS_ERR;
     1492     1016        %EOD;
PL6.E3A0      #003=ELF$CONS_ERR File=ELF$MAIN.:E05TSI                            TUE 07/29/97 15:19 Page:243  

PL6.E3A0      #003=ELF$CONS_ERR File=ELF$MAIN.:E05TSI                            TUE 07/29/97 15:19 Page:244  
--  Include file information  --

   OC_SUBS_C.:E05TOU  is referenced.
   OC_MESSHD_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure ELF$CONS_ERR.
PL6.E3A0      #003=ELF$CONS_ERR File=ELF$MAIN.:E05TSI                            TUE 07/29/97 15:19 Page:245  

 **** Variables and constants ****

  ****  Section 002  Data  ELF$CONS_ERR

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    36-0-0/b BIT         r     1 ERR                        0-0-0/c CHAR(120)   r     1 ERRBUF
    40-0-0/d STRC(936)   r     1 FPT_ERRMSG                76-0-0/c STRC(1269)  r     1 OCMESSHD
    72-0-0/d STRC(144)   r     1 VLR_ERRMSG

  ****  Section 003 RoData ELF$CONS_ERR

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(432)   r     1 FPT_WRCSCG

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @ERRCODE                  *0-0-0/w BIT         r     1 ERRCODE

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$TCB$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

PL6.E3A0      #003=ELF$CONS_ERR File=ELF$MAIN.:E05TSI                            TUE 07/29/97 15:19 Page:246  
     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/w STRC(144)   r     1 B$TCB
     0-0-0N  NULL        r     1 F$CSCG


   Procedure ELF$CONS_ERR requires 30 words for executable code.
   Procedure ELF$CONS_ERR requires 4 words of local(AUTO) storage.
PL6.E3A0      #003=ELF$CONS_ERR File=ELF$MAIN.:E05TSI                            TUE 07/29/97 15:19 Page:247  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=ELF$CONS_ERR File=ELF$MAIN.:E05TSI                            TUE 07/29/97 15:19 Page:248  
          MINI XREF LISTING

B$ALT.CODE
       884**DCL       884--REDEF     885--REDEF     885--REDEF
B$ALT.DCB#
       885**DCL      1004>>ASSIGN
B$ALT.ERR
       885**DCL      1003>>ASSIGN
B$ALT.ERR.ERR#
       886**DCL       886--REDEF
B$ALT.EVID
       885**DCL       885--REDEF     885--REDEF
B$TCB.ALT$
       880**DCL      1003>>ASSIGN   1004>>ASSIGN
B$TCB$
       890**DCL      1003>>ASSIGN   1004>>ASSIGN
ERR
       893**DCL       908--DCLINIT  1003<<ASSIGN   1007<<ASSIGN
ERRBUF
       892**DCL       909--DCLINIT  1011>>ASSIGN
ERRCODE
        13**DCL         6--PROC     1001--IF       1007>>ASSIGN
FPT_ERRMSG
       908**DCL      1010<>CALL
FPT_ERRMSG.V
       912**DCL       908--DCLINIT
FPT_ERRMSG.V.DCB#
       912**DCL      1004<<ASSIGN   1008<<ASSIGN
FPT_WRCSCG
       984**DCL      1012<>CALL
FPT_WRCSCG.STATION_
       986**DCL       986--REDEF
FPT_WRCSCG.V
       987**DCL       984--DCLINIT
PL6.E3A0      #003=ELF$CONS_ERR File=ELF$MAIN.:E05TSI                            TUE 07/29/97 15:19 Page:249  
FPT_WRCSCG.V.DVBYTE.VFC#
       993**DCL       993--REDEF
M$ERRMSG
        86**DCL-ENT  1010--CALL
M$WRITE
        24**DCL-ENT  1012--CALL
NO_MSG
      1014**LABEL    1010--CALLALT  1012--CALLALT
OCMESSHD
       951**DCL       985--DCLINIT   986--DCLINIT
OCMESSHD.BUF
       964**DCL      1011<<ASSIGN
OCMESSHD.FLAGS
       958**DCL       959--REDEF
OCMESSHD.MSGID
       954**DCL       955--REDEF
VLR_ERRMSG
       935**DCL       912--DCLINIT

PL6.E3A0      #004=ELF$EVENT File=ELF$MAIN.:E05TSI                               TUE 07/29/97 15:19 Page:250  
     1493        1        /*T***********************************************************/
     1494        2        /*T*                                                         */
     1495        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1496        4        /*T*                                                         */
     1497        5        /*T***********************************************************/
     1498        6        ELF$EVENT: PROC ASYNC;
     1499        7        /*D* NAME: ELF$EVENT
     1500        8             CALL: Asynchronous entry set up via an M$EVENT call.
     1501        9             DESCRIPTION: Handles events for ELF. These include:
     1502       10                    1) No-wait IO complete event on CSCG
     1503       11        */
     1504       12        %INCLUDE CP_6;
     1505       93    1   DCL CGREAD_ERR BIT(36) SYMREF;
     1506       94    1   DCL NWIO_TYC BIT(36) SYMREF;
     1507       95    1   DCL CGREAD_STATE UBIN SYMREF;
     1508       96    1   DCL EL_POLL_IN_PROGRESS BIT(1) ALIGNED SYMREF;
     1509       97    1   DCL B$TCB$ PTR SYMREF;
     1510       98        %B$TCB;
     1511      101        %B$NWIO;
     1512      186        /**
     1513      187         **
     1514      188         **/
     1515      189    1        IF B$TCB$ -> B$TCB.STK$ -> B$NWIO.EVID = 99
     1516      190    2        THEN DO;
     1517      191    2             EL_POLL_IN_PROGRESS = '0'B;
     1518      192    2             NWIO_TYC = B$TCB$ -> B$TCB.STK$ -> B$NWIO.TYC;
     1519      193    2             RETURN;
     1520      194    2           END;
     1521      195    1        IF B$TCB$->B$TCB.STK$->B$NWIO.ERR.CODE=0
     1522      196    1        THEN
     1523      197    1             CGREAD_STATE = 2;             /* Read complete                      */
     1524      198    2        ELSE DO;
     1525      199    2             CGREAD_STATE = 3;             /* Read error                         */
     1526      200    2             CGREAD_ERR = B$TCB$->B$TCB.STK$->B$NWIO.ERR;
     1527      201    2           END;
     1528      202    1        RETURN;
     1529      203    1   END ELF$EVENT;
PL6.E3A0      #004=ELF$EVENT File=ELF$MAIN.:E05TSI                               TUE 07/29/97 15:19 Page:251  

PL6.E3A0      #004=ELF$EVENT File=ELF$MAIN.:E05TSI                               TUE 07/29/97 15:19 Page:252  
--  Include file information  --

   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure ELF$EVENT.

   Procedure ELF$EVENT requires 21 words for executable code.
   Procedure ELF$EVENT requires 4 words of local(AUTO) storage.

    No errors detected in file ELF$MAIN.:E05TSI    .

PL6.E3A0      #004=ELF$EVENT File=ELF$MAIN.:E05TSI                               TUE 07/29/97 15:19 Page:253  

 Object Unit name= ELF$EVENT                                  File name= ELF$MAIN.:E05TOU
 UTS= JUL 29 '97 15:19:39.40 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Proc  even  none    21     25  ELF$EVENT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes            yes     Async       0  ELF$EVENT

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AAUTO
                       nStd      0 X66_AARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  CGREAD_ERR                            NWIO_TYC
     CGREAD_STATE                          EL_POLL_IN_PROGRESS                   B$TCB$
PL6.E3A0      #004=ELF$EVENT File=ELF$MAIN.:E05TSI                               TUE 07/29/97 15:19 Page:254  


     1493        1        /*T***********************************************************/
     1494        2        /*T*                                                         */
     1495        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1496        4        /*T*                                                         */
     1497        5        /*T***********************************************************/
     1498        6        ELF$EVENT: PROC ASYNC;

      6  1 000000   000000 700200 xent  ELF$EVENT    TSX0  ! X66_AAUTO
         1 000001   000004 000000                    ZERO    4,0

     1499        7        /*D* NAME: ELF$EVENT
     1500        8             CALL: Asynchronous entry set up via an M$EVENT call.
     1501        9             DESCRIPTION: Handles events for ELF. These include:
     1502       10                    1) No-wait IO complete event on CSCG
     1503       11        */
     1504       12        %INCLUDE CP_6;
     1505       93    1   DCL CGREAD_ERR BIT(36) SYMREF;
     1506       94    1   DCL NWIO_TYC BIT(36) SYMREF;
     1507       95    1   DCL CGREAD_STATE UBIN SYMREF;
     1508       96    1   DCL EL_POLL_IN_PROGRESS BIT(1) ALIGNED SYMREF;
     1509       97    1   DCL B$TCB$ PTR SYMREF;
     1510       98        %B$TCB;
     1511      101        %B$NWIO;
     1512      186        /**
     1513      187         **
     1514      188         **/
     1515      189    1        IF B$TCB$ -> B$TCB.STK$ -> B$NWIO.EVID = 99

    189  1 000002   000000 470400 xsym               LDP0    B$TCB$
         1 000003   000001 471500                    LDP1    1,,PR0
         1 000004   100101 235100                    LDA     65,,PR1
         1 000005   000143 115007                    CMPA    99,DL
         1 000006   000013 601000 1                  TNZ     s:195

     1516      190    2        THEN DO;

PL6.E3A0      #004=ELF$EVENT File=ELF$MAIN.:E05TSI                               TUE 07/29/97 15:19 Page:255  
     1517      191    2             EL_POLL_IN_PROGRESS = '0'B;

    191  1 000007   000000 450000 xsym               STZ     EL_POLL_IN_PROGRESS

     1518      192    2             NWIO_TYC = B$TCB$ -> B$TCB.STK$ -> B$NWIO.TYC;

    192  1 000010   100104 236100                    LDQ     68,,PR1
         1 000011   000000 756000 xsym               STQ     NWIO_TYC

     1519      193    2             RETURN;

    193  1 000012   000000 702200 xent               TSX2  ! X66_AARET

     1520      194    2           END;
     1521      195    1        IF B$TCB$->B$TCB.STK$->B$NWIO.ERR.CODE=0

    195  1 000013   100102 236100                    LDQ     66,,PR1
         1 000014   377770 316007                    CANQ    131064,DL
         1 000015   000021 601000 1                  TNZ     s:199

     1522      196    1        THEN
     1523      197    1             CGREAD_STATE = 2;             /* Read complete                      */

    197  1 000016   000002 235007                    LDA     2,DL
         1 000017   000000 755000 xsym               STA     CGREAD_STATE
         1 000020   000024 710000 1                  TRA     s:202

     1524      198    2        ELSE DO;

     1525      199    2             CGREAD_STATE = 3;             /* Read error                         */

    199  1 000021   000003 235007                    LDA     3,DL
         1 000022   000000 755000 xsym               STA     CGREAD_STATE

     1526      200    2             CGREAD_ERR = B$TCB$->B$TCB.STK$->B$NWIO.ERR;

    200  1 000023   000000 756000 xsym               STQ     CGREAD_ERR
PL6.E3A0      #004=ELF$EVENT File=ELF$MAIN.:E05TSI                               TUE 07/29/97 15:19 Page:256  

     1527      201    2           END;

     1528      202    1        RETURN;

    202  1 000024   000000 702200 xent               TSX2  ! X66_AARET
     1529      203    1   END ELF$EVENT;

PL6.E3A0      #004=ELF$EVENT File=ELF$MAIN.:E05TSI                               TUE 07/29/97 15:19 Page:257  
--  Include file information  --

   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure ELF$EVENT.
PL6.E3A0      #004=ELF$EVENT File=ELF$MAIN.:E05TSI                               TUE 07/29/97 15:19 Page:258  

 **** Variables and constants ****

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$TCB$                     0-0-0/b BIT         r     1 CGREAD_ERR
     0-0-0/w UBIN        r     1 CGREAD_STATE               0-0-0/w BIT         r     1 EL_POLL_IN_PROGRESS
     0-0-0/b BIT         r     1 NWIO_TYC

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2880)  r     1 B$NWIO                     0-0-0/w STRC(144)   r     1 B$TCB


   Procedure ELF$EVENT requires 21 words for executable code.
   Procedure ELF$EVENT requires 4 words of local(AUTO) storage.

    No errors detected in file ELF$MAIN.:E05TSI    .
PL6.E3A0      #004=ELF$EVENT File=ELF$MAIN.:E05TSI                               TUE 07/29/97 15:19 Page:259  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #004=ELF$EVENT File=ELF$MAIN.:E05TSI                               TUE 07/29/97 15:19 Page:260  
          MINI XREF LISTING

B$NWIO.CGPARM.MSGIDXT
       135**DCL       138--REDEF
B$NWIO.CODE
       104**DCL       104--REDEF     105--REDEF     105--REDEF
B$NWIO.ERR
       105**DCL       200>>ASSIGN
B$NWIO.ERR.CODE
       106**DCL       195>>IF
B$NWIO.ERR.ERR#
       106**DCL       106--REDEF
B$NWIO.EVID
       105**DCL       105--REDEF     105--REDEF     189>>IF
B$NWIO.TYC
       111**DCL       192>>ASSIGN
B$TCB.STK$
        99**DCL       189>>IF        192>>ASSIGN    195>>IF        200>>ASSIGN
B$TCB$
        97**DCL       189>>IF        192>>ASSIGN    195>>IF        200>>ASSIGN
CGREAD_ERR
        93**DCL       200<<ASSIGN
CGREAD_STATE
        95**DCL       197<<ASSIGN    199<<ASSIGN
EL_POLL_IN_PROGRESS
        96**DCL       191<<ASSIGN
NWIO_TYC
        94**DCL       192<<ASSIGN
