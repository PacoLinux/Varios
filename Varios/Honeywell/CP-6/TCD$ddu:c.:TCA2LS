VERSION A02


CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=1  
        1         1             /*M*     ddu        -    dib display utility.  Displays structures from
        2         2              *                     dib dump files as well as running system.
        3         3              *                     in theory this should be the same program call
        4         4              *                     by nodeadmin to dump memory when acting as an
        5         5              *                     anlz_fprg.
        6         6              */
        7         7             /*T***********************************************************/
        8         8             /*T*                                                         */
        9         9             /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       10        10             /*T*                                                         */
       11        11             /*T***********************************************************/
       12        12             /*X*   DDA*/
       13        13             #include <fcntl.h>
       14        14             #include <stdlib.h>
       15        15             #include <stdio.h>
       16        16             #include <string.h>
       17        17             #include <time.h>
       18        18             #include <setjmp.h>
       19        19             #include <memory.h>
       20        20             #include <signal.h>
       21        21             #include "TCD$ddu:h"
       22        22
       23        23             #define CP6PATH "/dev/dib/CP6"
       24        24             #define CP6LOAD "/dev/dib/load"
       25        25             #define NODEADMIN "/usr/bin/nodeadmin"
       26        26             /* define addresses in DIB RAM relative to 0xffe00000          */
       27        27             #ifdef CTLREG
       28        28             #undef CTLREG
       29        29             #define CTLREG 0x40240
       30        30             #endif
       31        31             #define FIFO   0x40280
       32        32             #define NBYTES 16
       33        33             #define DIB_BASE 0x51f00000
       34        34             #define DIB_MASK 0x000fffff
       35        35             #define DIB_Q  0x51f20000
       36        36             #define CQ 0xf20000
       37        37             #define SPACE 0x20
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=2  
       38        38             #define TILDE 0x7e
       39        39             #define CR 0xa
       40        40             #define BYTESPERLINE 16
       41        41             #define DIBRU "dibbrd.dib"
       42        42             #define DIBPATH "/etc/netbin/dibbrd.dib"
       43        43             #define UNIXPATH "/dev/kmem"
       44        44
       45        45             #define GJA_SMEM_ADDR 0x700000
       46        46
       47        47
       48        48             /*     kernel - dib communication area                         */
       49        49
       50        50             struct ipc {
       51        51    1               long entry;             /* board rununit entry point            */
       52        52    1               /*struct knh_qhdr **/ int qhdr;  /* pointer to dib queue structure
                                 */
       53        53    1               char *rfu;              /* unused                               */
       54        54    1               /*struct kn_ldct **/ int ldct;   /* pointer to ldct array
                                 */
       55        55    1               long ipc_flag;          /* = 0 CP-6 connection down             */
       56        56    1                                       /* = 1 CP-6 connection up               */
       57        57    1               long host_node;         /* host node number                     */
       58        58    1               long fep_node;          /* our node number                      */
       59        59    1               char fep_nm[12];        /* fep name string                      */
       60        60    1               struct {                /* last screech code sent to CP6        */
       61        61    2                       unsigned a1 : 5;
       62        62    2                       unsigned a2 : 5;
       63        63    2                       unsigned mid: 5;
       64        64    2                       unsigned mon: 1;
       65        65    2                       unsigned err: 13;
       66        66    2                       unsigned sev: 3;
       67        67    2               } scode;
       68        68    1               long hststt;            /* host state                           */
       69        69    1               }ipc;
       70        70
       71        71             struct kn_ldct devldct;
       72        72             struct rcv_proc dduproc;
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=3  
       73        73             struct knh_qhdr qhdr;
       74        74             struct kj_ctx dib_ctx;
       75        75
       76        76             int dibfd,kmemfd,fulldct,dibctx,traceaddr,messcnt,messaddr,qhdrflg,procflg;
       77        77             int rawdump,rawaddr,rawbound;
       78        78             int i,ldctsave,dibaddr,ldctaddr,ldctcnt,actldcts;
       79        79             int interactive;
       80        80             char *messc;
       81        81             static char path[64];
       82        82             extern int ALTRT,optind,opterr;
       83        83             extern char DMPVRS[6];
       84        84             extern char *optarg;
       85        85             char readbuf[80],savebuf[80];
       86        86             int savebufsiz;
       87        87             char op,prevop;
       88        88             void sigint(int);
       89        89             jmp_buf env;
       90        90
       91        91             char *strolp;     /* results of strtol functions              */
       92        92
       93        93             main (argc,argv)
       94        94             int argc;
       95        95             char *argv[];
       96        96
       97        97             {
       98        98    1
       99        99    1         int nargs;
      100       100    1
      101       101    1        fulldct = qhdrflg = dibctx = rawdump = messaddr = 0;
      102       102    1        path[0] = traceaddr = actldcts = interactive = procflg = 0;
      103       103    1        if (argc < 2) {
      104       104    2               options();
      105       105    2               exit(EXIT_FAILURE);
      106       106    2        }
      107       107    1        DAM_INIT();
      108       108    1        nargs = 1;
      109       109    1        while ((i = getopt(argc,argv,"pif:chm:ald:sPIF:CHM:ALD:S?")) != EOF)
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=4  
      110       110    1               {
      111       111    2               nargs++;
      112       112    2               switch(i)
      113       113    2                       {
      114       114    3                       case 'a':
      115       115    3                       case 'A':
      116       116    3                               dibctx = 1;
      117       117    3                               actldcts = 1;
      118       118    3                               qhdrflg = 2;
      119       119    3                               procflg = 1;
      120       120    3                               break;
      121       121    3                       case 'c':
      122       122    3                       case 'C':
      123       123    3                               dibctx = 1;
      124       124    3                               break;
      125       125    3                       case 'l':
      126       126    3                       case 'L':
      127       127    3                               actldcts = 1;
      128       128    3                               break;
      129       129    3                       case 'i':
      130       130    3                       case 'I':
      131       131    3        /*
      132       132    3         *                     interactive mode.
      133       133    3         */
      134       134    3                               interactive=1;
      135       135    3                               break;
      136       136    3                       case 'f':
      137       137    3                       case 'F':
      138       138    3                               nargs++;
      139       139    3                               if (strlen(optarg)>sizeof(path))
      140       140    3                                       printf("error on f option. path too long\n");
      141       141    3                               else
      142       142    3                                       strcpy(path,optarg);
      143       143    3                               break;
      144       144    3                       case 's':
      145       145    3                       case 'S':
      146       146    3                               actldcts = 1;
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=5  
      147       147    3                               fulldct = 1;
      148       148    3                               break;
      149       149    3                       case 'H':
      150       150    3                               ++qhdrflg;
      151       151    3                       case 'h':
      152       152    3                               ++qhdrflg;
      153       153    3                               break;
      154       154    3                       case 'm':
      155       155    3                       case 'M':
      156       156    3                               messc = strtok(optarg,",");
      157       157    3                               messaddr = strtol(messc,&strolp,16);
      158       158    3                               if (messaddr == 0) {
      159       159    4                                       qhdrflg = 2;
      160       160    4                                       break;
      161       161    4                                       }
      162       162    3                               messc = strtok((char *)0," ");
      163       163    3                               if (messc) messcnt = strtol(messc,&strolp,16);
      164       164    3                               break;
      165       165    3                       case 't':
      166       166    3                       case 'T':
      167       167    3                               if ((traceaddr = strtol(optarg,((char**)0),16)) == 0)
      168       168    3                                       traceaddr = 1;
      169       169    3                               break;
      170       170    3                       case 'd':
      171       171    3                       case 'D':
      172       172    3                               rawdump = 1;
      173       173    3                               messc = strtok(optarg,",");
      174       174    3                               rawaddr = strtol(messc,&strolp,16);
      175       175    3                               messc = strtok((char *)0," ");
      176       176    3                               if (messc) rawbound = strtol(messc,&strolp,16);
      177       177    3                               break;
      178       178    3                       case 'p':
      179       179    3                       case 'P':
      180       180    3                               procflg = 1;
      181       181    3                               break;
      182       182    3                       case '?':
      183       183    3                       default:
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=6  
      184       184    3                               options();
      185       185    3                               exit(EXIT_FAILURE);
      186       186    3                               break;
      187       187    3                        }
      188       188    2               }
      189       189    1        /*
      190       190    1         *     open to the dib dump file
      191       191    1         */
      192       192    1               dibfd = -1;
      193       193    1               if (path[0] == 0 || (dibfd = dibopen (path)) < 0) {
      194       194    2                       actldcts = fulldct = rawdump = traceaddr = procflg = 0;
      195       195    2                       messaddr = qhdrflg = dibctx = 0;
      196       196    2                       }
      197       197    1               else {
      198       198    2                       getipc();
      199       199    2                       ipcdata(&ipc);
      200       200    2                       getqhdr();
      201       201    2                       }
      202       202    1               if (actldcts || fulldct)
      203       203    1                       doldcts();
      204       204    1               if (procflg)
      205       205    1                       doprocs();
      206       206    1
      207       207    1               if (qhdrflg)  /* display the qhdr if mess was specified too */
      208       208    1                       qdata(&qhdr);
      209       209    1
      210       210    1               if (dibctx)
      211       211    1                       dodibctx();
      212       212    1
      213       213    1               if (messaddr)
      214       214    1                       {
      215       215    2                       messhdr("cq");
      216       216    2                       messdata(dibfd,messaddr,messcnt);
      217       217    2                       }
      218       218    1               if (rawdump)
      219       219    1                       rawdumpdata(dibfd,rawaddr,rawbound);
      220       220    1               if (traceaddr)
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=7  
      221       221    1                       tracedump(dibfd,traceaddr);
      222       222    1               if (interactive)
      223       223    1                       {
      224       224    2                       setjmp(env);
      225       225    2                       signal(SIGINT,sigint);
      226       226    2                       sigsetmask(0);
      227       227    2                       prevop = SPACE;
      228       228    2                       while (1)
      229       229    2                               {
      230       230    3                               printf ("ddu>");
      231       231    3                               fflush(stdout);
      232       232    3                               if ((i = read (/*fileno(stdin)*/0,readbuf,80)) < 0)
      233       233    3                                        {
      234       234    4                                       perror ("ddu: read error");
      235       235    4                                       exit(EXIT_FAILURE);
      236       236    4                                       }
      237       237    3                               readbuf[i-1] = 0;
      238       238    3                               op = readbuf[0];
      239       239    3                               while (readbuf[1]==' ') memcpy(readbuf+1,readbuf+2,--i)
                               ;
      240       240    3                               if (op == '.')
      241       241    3                                       {
      242       242    4                                       op = prevop;
      243       243    4                                       memcpy(readbuf,savebuf,sizeof(readbuf));
      244       244    4                                       i = savebufsiz;
      245       245    4                                       }
      246       246    3                               else
      247       247    3                                       {
      248       248    4                                       prevop = op;
      249       249    4                                       memcpy(savebuf,readbuf,sizeof(readbuf));
      250       250    4                                       savebufsiz = i;
      251       251    4                                       }
      252       252    3                               switch(op|0x20)
      253       253    3                                       {
      254       254    4                                       case 'a':
      255       255    4                                               if (dibfd < 0) break;
      256       256    4                                               dodibctx();
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=8  
      257       257    4                                               doldcts();
      258       258    4                                               doprocs();
      259       259    4                                               getqhdr();
      260       260    4                                               qhdrflg = 2;
      261       261    4                                               qdata(&qhdr);
      262       262    4                                               break;
      263       263    4                                       case 'c':
      264       264    4                                               dodibctx();
      265       265    4                                               break;
      266       266    4                                       case 'l':
      267       267    4                                               actldcts = 1;
      268       268    4                                               doldcts();
      269       269    4                                               actldcts = 0;
      270       270    4                                               break;
      271       271    4                                       case 's':
      272       272    4                                               actldcts = 1;
      273       273    4                                               fulldct = 1;
      274       274    4                                               doldcts();
      275       275    4                                               actldcts = fulldct = 0;
      276       276    4                                               break;
      277       277    4                                       case 'p':
      278       278    4                                               doprocs();
      279       279    4                                               break;
      280       280    4                                       case 'f':
      281       281    4                                               fileopt(i);
      282       282    4                                               break;
      283       283    4                                       case 'h':
      284       284    4                                               if (getqhdr() < 0) break;
      285       285    4                                               qhdrflg = 4-op/32;
      286       286    4                                               qdata(&qhdr);
      287       287    4                                               break;
      288       288    4                                       case 'm':
      289       289    4                                               if (i==2) {
      290       290    5                                                        if (getqhdr() < 0) break;
      291       291    5                                                        qdata(&qhdr);
      292       292    5                                                        break;
      293       293    5                                                        }
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=9  
      294       294    4                                               messc = strtok(&readbuf[1],",");
      295       295    4                                               messaddr = strtol(messc,&strolp,16);
      296       296    4                                               messc = strtok((char *)0," ");
      297       297    4                                               if (messc) messcnt = strtol(messc,&stro
                               lp,16);
      298       298    4                                               messhdr("cq");
      299       299    4                                               messdata(dibfd,messaddr,messcnt);
      300       300    4                                               break;
      301       301    4                                       case 't':
      302       302    4                                               traceaddr = strtol(&readbuf[1],&strolp,
                               16);
      303       303    4                                               tracedump(dibfd,traceaddr);
      304       304    4                                               break;
      305       305    4                                       case 'd':
      306       306    4                                               messc = strtok(&readbuf[1],",");
      307       307    4                                               rawaddr = strtol(&readbuf[1],&strolp,16
                               );
      308       308    4                                               messc = strtok((char *)0," ");
      309       309    4                                               if (messc) rawbound = strtol(messc,&str
                               olp,16);
      310       310    4                                               rawdumpdata(dibfd,rawaddr,rawbound);
      311       311    4                                               break;
      312       312    4                                       case 'q':
      313       313    4                                       case 'x':
      314       314    4                                       case 'e':
      315       315    4                                               exit(EXIT_SUCCESS);
      316       316    4                                               break;
      317       317    4                                       case '?':
      318       318    4                                               options1();
      319       319    4                                               break;
      320       320    4                                       case '!':
      321       321    4                                               system(readbuf+1);
      322       322    4                                               break;
      323       323    4                                       case 0:
      324       324    4                                       case ' ':
      325       325    4                                               break;
      326       326    4                                       default:
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=10 
      327       327    4                                               printf("ddu: unknown command - type ?\n
                               ");
      328       328    4                                               break;
      329       329    4                                       }
      330       330    3                               }
      331       331    2                       }
      332       332    1        }
      333       333              
      334       335
      335       336             fileopt(i)
      336       337             int i;
      337       338             {
      338       339    1               if (--i > sizeof(path))
      339       340    1                       printf("error on f option. path %s is too long.",readbuf+1);
      340       341    1               else
      341       342    1                       {
      342       343    2                       strncpy(path,readbuf+1,i);
      343       344    2                       if ((dibfd= dibopen(path)) >= 0)
      344       345    2                               {
      345       346    3                               getipc();
      346       347    3                               ipcdata(&ipc);
      347       348    3                               }
      348       349    2                       }
      349       350    1               }
      350       351              
      351       353              
      352       355
      353       356             /*
      354       357              *             ldcthdr - part 1 of 3 of the ldct display.
      355       358              *                     header only.
      356       359              */
      357       360
      358       361             ldcthdr()
      359       362
      360       363             {
      361       364    1        printf("\n");
      362       365    1        printf("           LDCTS\n");
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=11 
      363       366    1        printf("                   ____rlcid____\n");
      364       367    1        printf("  #  state lck gen node gen ldct    pproc  fd      *fp waitcnt  wu\n")
                               ;
      365       368    1        printf("---  ----- --- --- ---- --- ----  -------  --  ------- -------  --\n")
                               ;
      366       369    1        }
      367       370
      368       371             /*
      369       372              *             ldctdata1 - part 1 of 3 of the ldct data display.
      370       373              */
      371       374
      372       375             ldctdata1(ldct_)
      373       376
      374       377             struct kn_ldct *ldct_;
      375       378             {
      376       379    1        static char *state[] = {
      377       380    2        "Null  ", "OWC   ", "Active", "WIAFR ", "WTAFR ", "DTCHD ", "Term  ", "WTAFL "
                               ,
      378       381    2                "DTWFC "};
      379       382    1        printf("%3d %5s %#3x %3d  %3d %3d %4d %#8x %3d %#8x     %3d %3d\n",
      380       383    1               pk4((*ldct_).ldctx),
      381       384    1               state[(*ldct_).state],
      382       385    1               (*ldct_).lck,
      383       386    1               (unsigned char)((*ldct_).generation),
      384       387    1               (*ldct_).rlcid.node,
      385       388    1               (unsigned int)((*ldct_).rlcid.generation),
      386       389    1               pk2((*ldct_).rlcid.ldctx),
      387       390    1               pk4((*ldct_).procp),
      388       391    1               pk4((*ldct_).fd),
      389       392    1               pk4((*ldct_).fp),
      390       393    1               pk4((*ldct_).wait_count),
      391       394    1               pk4((*ldct_).wu)
      392       395    1             );
      393       396    1        }
      394       397
      395       398              
      396       400             /*
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=12 
      397       401              *             ldcthdr2 -
      398       402              */
      399       403             ldcthdr2()
      400       404
      401       405             {
      402       406    1        printf("\n");
      403       407    1        printf("  # reason rescode   selprc q'd\n");
      404       408    1        printf("--- ------ -------  ------- ---\n");
      405       409    1        }
      406       410
      407       411
      408       412             /*
      409       413              *             ldctdata2 -
      410       414              */
      411       415
      412       416
      413       417             ldctdata2(ldct_)
      414       418             struct kn_ldct *ldct_;
      415       419             {
      416       420    1
      417       421    1        printf("%3d   %4d    %4d %#8x   %1d\n",
      418       422    1               pk4((*ldct_).ldctx),
      419       423    1               pk4((*ldct_).reason),
      420       424    1               pk4((*ldct_).rescode),
      421       425    1               pk4((*ldct_).selproc),
      422       426    1               (*ldct_).queued);
      423       427    1        }
      424       428
      425       429             /*
      426       430              *             ldcthdr3 -
      427       431              */
      428       432
      429       433
      430       434             ldcthdr3()
      431       435
      432       436             {
      433       437    1        printf("\n");
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=13 
      434       438    1        printf("#   rcrbytsiz nmbrcr nmbbyt ounmbbyt ounmbrcr ourcrbytsiz\n");
      435       439    1        printf("--- --------- ------ ------ -------- -------- -----------\n");
      436       440    1        }
      437       441
      438       442
      439       443             /*
      440       444              *             ldctdata3 -
      441       445              */
      442       446
      443       447             #ifdef xxx
      444       448   *S*
      445       449   *S*
      446       450   *S*       ldctdata3(ldct_)
      447       451   *S*       struct kn_ldct *ldct_;
      448       452   *S*       {
      449       453   *S*
      450       454   *S*       printf("%-3d      %4d   %4d  %5d    %5d     %4d        %4d\n",
      451       455   *S*              (*ldct_).ldctx,
      452       456   *S*              (*ldct_).rcrbytsiz,
      453       457   *S*              (*ldct_).nmbrcr,
      454       458   *S*              (*ldct_).nmbbyt,
      455       459   *S*              (*ldct_).ounmbbyt,
      456       460   *S*              (*ldct_).ounmbrcr,
      457       461   *S*              (*ldct_).ourcrbytsiz);
      458       462   *S*       }
      459       463   *S*
      460       464   *S*       #endif
      461       465
      462       466              
      463       468
      464       469             /*
      465       470              *             ipcdata - interprocess communication area.
      466       471              */
      467       472
      468       473             ipcdata(ipc_)
      469       474             struct ipc *ipc_;
      470       475
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=14 
      471       476             {
      472       477    1        static char *ipcstate[] = {"down","  up"};
      473       478    1
      474       479    1        printf("\n");
      475       480    1        printf("             KERNEL <-> DIB COMMUNICATION AREA\n");
      476       481    1        printf("             ---------------------------------\n");
      477       482    1        printf("     entry     qhdr     ldct ipcflag host fep  cp6 fep name\n");
      478       483    1        printf("     -----     ----     ---- ------- ---- ---  --- --------\n");
      479       484    1        printf("%#8x %#8x %#8x  %6s %4d %3d %4s %s      \n",
      480       485    1               (*ipc_).entry,
      481       486    1               (*ipc_).qhdr,
      482       487    1               (*ipc_).ldct,
      483       488    1               ipcstate[(*ipc_).ipc_flag],
      484       489    1               (*ipc_).host_node,
      485       490    1               (*ipc_).fep_node,
      486       491    1               ipcstate[(*ipc_).hststt],
      487       492    1               (*ipc_).fep_nm);
      488       493    1        if ((*ipc_).scode.err != 0) {
      489       494    2               printf("     last screech scode\n");
      490       495    2               printf("     ------------------\n");
      491       496    2               printf("     %c%c%c-%d-%d\n",
      492       497    2                       (*ipc_).scode.a1+64,
      493       498    2                       (*ipc_).scode.a2+64,
      494       499    2                       (*ipc_).scode.mid+64,
      495       500    2                       (*ipc_).scode.err,
      496       501    2                       (*ipc_).scode.sev);
      497       502    2               }
      498       503    1        }
      499       504
      500       505
      501       506             /*
      502       507              *             fetchdibdat - fetches the specified area of dib data
      503       508              *                             from /dev/dib/CP6.  returns a pointer
      504       509              *                             to the data in buf_.
      505       510              */
      506       511
      507       512             fetchdibdat(fd,buf_,siz,dibaddr)
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=15 
      508       513
      509       514             int fd,siz,dibaddr;
      510       515             char *buf_;
      511       516
      512       517             {
      513       518    1        int ars;
      514       519    1              if (fd<0) return -1;
      515       520    1              dibaddr &= DIB_MASK;
      516       521    1              DBM_GETMEM(&dibaddr,buf_,&siz,&ars);
      517       522    1              if (ars != siz)
      518       523    1                       {
      519       524    2                       perror ("ddu: can't read dibdata");
      520       525    2                       return -1;
      521       526    2                       }
      522       527    1        }
      523       528
      524       529
      525       530             /*
      526       531              *             dibctxdata - display dib context.
      527       532              */
      528       533
      529       534
      530       535             dibctxdata(ctx_)
      531       536
      532       537             struct kj_ctx *ctx_;
      533       538
      534       539             {
      535       540    1
      536       541    1        int i,opcodex;
      537       542    1
      538       543    1        static char *mode[] = {
      539       544    2               "Bin  ",
      540       545    2               "Ascii"};
      541       546    1
      542       547    1        static char *state[] = {
      543       548    2               "        ",
      544       549    2               "Masked  ",
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=16 
      545       550    2               "Init   ",
      546       551    2               "Running ",
      547       552    2               "Recovery"};
      548       553    1
      549       554    1        static char *cf[] = {
      550       555    2               "None    ",
      551       556    2               "Init    ",
      552       557    2               "Read OCQ",
      553       558    2               "Read ICQ",
      554       559    2               "        ",
      555       560    2               "Data    ",
      556       561    2               "Boot    "};
      557       562    1
      558       563    1        static char *opcode[] = {
      559       564    2               "           ",
      560       565    2               "Disconnect ",
      561       566    2               "Datal6->l66",
      562       567    2               "Datal66->l6",
      563       568    2               "Read&clear ",
      564       569    2               "Jump       ",
      565       570    2               "Nop        ",
      566       571    2               "Int l66    "};
      567       572    1
      568       573    1
      569       574    1        printf("\ndib context                            \n");
      570       575    1        printf("state    c_f     host fep qos    flags\n");
      571       576    1        printf("%7s %8s %3d %3d %3d %#8x\n",
      572       577    1              state[pk4((*ctx_).state)],
      573       578    1              cf[pk4((*ctx_).current_function)],
      574       579    1              (*ctx_).host_node,
      575       580    1              (*ctx_).fep_node,
      576       581    1              (*ctx_).qos,
      577       582    1              pk4((*ctx_).flags));
      578       583    1
      579       584    1        printf("\n     icq:\n");
      580       585    1        printf("     iptr       rptr       size     offset        buf   new_rptr\n");
      581       586    1        printf("     ----       ----       ----     ------        ---   --------\n");
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=17 
      582       587    1        printf(" %#8x   %#8x   %#8x   %#8x   %#8x   %#8x\n",
      583       588    1                   pk4((*ctx_).icq.iptr),
      584       589    1                   pk4((*ctx_).icq.rptr),
      585       590    1                   pk4((*ctx_).icq.size),
      586       591    1                   pk4((*ctx_).icq.offset),
      587       592    1                   pk4((*ctx_).icq.buf),
      588       593    1                   pk4((*ctx_).icq.new_rptr));
      589       594    1
      590       595    1        printf("\n     ocq:\n");
      591       596    1        printf("     iptr       rptr       size     offset        buf      flags     r
                               dsize\n");
      592       597    1        printf("     ----       ----       ----     ------        ---      -----     -
                               -----\n");
      593       598    1        printf(" %#8x   %#8x   %#8x   %#8x   %#8x   %#8x   %#8x\n",
      594       599    1                   pk4((*ctx_).ocq.iptr),
      595       600    1                   pk4((*ctx_).ocq.rptr),
      596       601    1                   pk4((*ctx_).ocq.size),
      597       602    1                   pk4((*ctx_).ocq.offset),
      598       603    1                   pk4((*ctx_).ocq.buf),
      599       604    1                   pk4((*ctx_).ocq.flags),
      600       605    1                   pk4((*ctx_).ocq.rdsize));
      601       606    1
      602       607    1        printf("\n     ibuf:                                       flags:\n");
      603       608    1        printf("      buf       size      csize                  ioip    status1\n");
      604       609    1        printf("      ---       ----      -----                  ----    -------\n");
      605       610    1        printf(" %#8x   %#8x   %#8x              %#8x   %#8x\n",
      606       611    1                   pk4((*ctx_).ibuf.buf),
      607       612    1                   pk4((*ctx_).ibuf.size),
      608       613    1                   pk4((*ctx_).ibuf.csize),
      609       614    1                   pk4((*ctx_).ioip),pk4((*ctx_).status1));
      610       615    1
      611       616    1        printf("\nioclist\n");
      612       617    1        printf("opcode      mode  tally    l66a     l6a \n");
      613       618    1        printf("------      ----  -----    ----     --- \n");
      614       619    1        for (i = 0;i<20;i++)
      615       620    1               {
      616       621    2               switch (pk2((*ctx_).ptr_dcw[i].op))
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=18 
      617       622    2                       {
      618       623    3                       case DISCONNECTINT:
      619       624    3                               opcodex = 1;
      620       625    3                               break;
      621       626    3                       case DATAL6_L66:
      622       627    3                               opcodex = 2;
      623       628    3                               break;
      624       629    3                       case DATAL66_L6:
      625       630    3                               opcodex = 3;
      626       631    3                               break;
      627       632    3                       case READCLR_OR:
      628       633    3                               opcodex = 4;
      629       634    3                               break;
      630       635    3                       case JUMP:
      631       636    3                               opcodex = 5;
      632       637    3                               break;
      633       638    3                       case NOP:
      634       639    3                               opcodex = 6;
      635       640    3                               break;
      636       641    3                       case INTL66:
      637       642    3                               opcodex = 7;
      638       643    3                               break;
      639       644    3                       default:
      640       645    3                               opcodex = 0;
      641       646    3                               break;
      642       647    3                       }
      643       648    2               printf("%11s %5s%6d  %#6x  %#6x\n",
      644       649    2                       opcode[opcodex],
      645       650    2                       mode[pk2((*ctx_).ptr_dcw[i].mode)],
      646       651    2                       pk4((*ctx_).ptr_dcw[i].tally),
      647       652    2                       pk4((*ctx_).ptr_dcw[i].l66a),
      648       653    2                       pk4((*ctx_).ptr_dcw[i].l6a));
      649       654    2               }
      650       655    1
      651       656    1        printf("\n  pcw[0]   pcw[1]\n");
      652       657    1        printf("  %8.8x %8.8x \n",pk4((*ctx_).pcw[0]),pk4((*ctx_).pcw[1]));
      653       658    1        }
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=19 
      654       659              
      655       661
      656       662
      657       663             /*
      658       664              *             getqhdr -
      659       665              */
      660       666
      661       667
      662       668             getqhdr()
      663       669             {
      664       670    1        if (fetchdibdat(dibfd,&qhdr,sizeof(qhdr),DIB_Q-DIB_BASE)<0)
      665       671    1               {
      666       672    2               printf("can't fetch dib Q header\n");
      667       673    2               dibctx = qhdrflg = 0;  /* dont do these if can't read q header*/
      668       674    2               return -1;
      669       675    2               }
      670       676    1              qhdr.rcq.iptr = pk4(qhdr.rcq.iptr);
      671       677    1              qhdr.rcq.rptr = pk4(qhdr.rcq.rptr);
      672       678    1              qhdr.scq.iptr = pk4(qhdr.scq.iptr);
      673       679    1              qhdr.scq.rptr = pk4(qhdr.scq.rptr);
      674       680    1              qhdr.rcq.sz = pk4(qhdr.rcq.sz);
      675       681    1              qhdr.scq.sz = pk4(qhdr.scq.sz);
      676       682    1              qhdr.rcq.offset = pk4(qhdr.rcq.offset);
      677       683    1              qhdr.scq.offset = pk4(qhdr.scq.offset);
      678       684    1              qhdr.scq.brdrptr = pk4(qhdr.scq.brdrptr);
      679       685    1              qhdr.scrfrm = pk4(qhdr.scrfrm);
      680       686    1              qhdr.ctx_offset = pk4(qhdr.ctx_offset);
      681       687    1              qhdr.ctx_sz = pk4(qhdr.ctx_sz);
      682       688    1              qhdr.ctx_wu = pk4(qhdr.ctx_wu);
      683       689    1              qhdr.msgs_scq = pk4(qhdr.msgs_scq);
      684       690    1              qhdr.mbc_scq = pk4(qhdr.mbc_scq);
      685       691    1              qhdr.msgs_rcq = pk4(qhdr.msgs_rcq);
      686       692    1              qhdr.mbc_rcq = pk4(qhdr.mbc_rcq);
      687       693    1              qhdr.wrap_rcq = pk4(qhdr.wrap_rcq);
      688       694    1              qhdr.wrap_scq = pk4(qhdr.wrap_scq);
      689       695    1              qhdr.last_rcqptr = pk4(qhdr.last_rcqptr);
      690       696    1              qhdr.last_scqptr = pk4(qhdr.last_scqptr);
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=20 
      691       697    1              return 0;
      692       698    1        }
      693       699
      694       700
      695       701             /*
      696       702              *             qdata -
      697       703              */
      698       704
      699       705
      700       706             qdata(qhdr)
      701       707
      702       708             struct knh_qhdr *qhdr;
      703       709
      704       710             {
      705       711    1
      706       712    1        if (qhdrflg == 0) goto msgdump;
      707       713    1
      708       714    1        printf("\n               DIB Q context \n");
      709       715    1        printf("    rcq                                 scq\n");
      710       716    1        printf("    iptr     rptr       sz   offset     iptr     rptr       sz   offse
                               t   brdptr\n");
      711       717    1        printf("    ----     ----       --   ------     ----     ----       --   -----
                               -   ------\n");
      712       718    1        printf("%#8x %#8x %#8x %#8x %#8x %#8x %#8x %#8x %#8x\n",
      713       719    1               qhdr->rcq.iptr+CQ+qhdr->rcq.offset,
      714       720    1               qhdr->rcq.rptr+CQ+qhdr->rcq.offset,
      715       721    1               qhdr->rcq.sz,
      716       722    1               qhdr->rcq.offset,
      717       723    1               qhdr->scq.iptr+CQ+qhdr->scq.offset,
      718       724    1               qhdr->scq.rptr+CQ+qhdr->scq.offset,
      719       725    1               qhdr->scq.sz,
      720       726    1               qhdr->scq.offset,
      721       727    1               qhdr->scq.brdrptr);
      722       728    1
      723       729    1        printf("\n");
      724       730    1        printf("  scrfrm ctx_offset ctx_sz   ctx_wu\n");
      725       731    1        printf("  ------ ---------- ------   ------\n");
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=21 
      726       732    1        printf("%#8x %#8x %#8x %8d\n",
      727       733    1              qhdr->scrfrm,
      728       734    1              qhdr->ctx_offset,
      729       735    1              qhdr->ctx_sz,
      730       736    1              qhdr->ctx_wu);
      731       737    1
      732       738    1        printf("\n");
      733       739    1        printf("     scq stats                        rcq stats\n");
      734       740    1        printf("     #msgs  #msgbytes      #wrap      #msgs  #msgbytes      #wrap\n");

      735       741    1        printf("     -----  ---------      -----      -----  ---------      -----\n");

      736       742    1        printf("%10d %10d %10d %10d %10d %10d\n",
      737       743    1               qhdr->msgs_scq,
      738       744    1               qhdr->mbc_scq,
      739       745    1               qhdr->wrap_scq,
      740       746    1               qhdr->msgs_rcq,
      741       747    1               qhdr->mbc_rcq,
      742       748    1               qhdr->wrap_rcq);
      743       749    1
      744       750    1        printf("\n");
      745       751    1        printf("  last      last      time\n");
      746       752    1        printf("  rcqptr   scqptr     free function           time   timecntr\n");
      747       753    1        printf("  ------   ------     ---- --------           ----   --------\n");
      748       754    1        printf("%#8x %#8x        %1x       %2d %.14s %10d\n",
      749       755    1               qhdr->last_rcqptr,
      750       756    1               qhdr->last_scqptr,
      751       757    1               qhdr->timemsg.mess.free,
      752       758    1               qhdr->timemsg.mess.function,
      753       759    1               qhdr->timemsg.time,
      754       760    1               qhdr->timectr);
      755       761    1
      756       762    1               if (--qhdrflg == 0) return 0;
      757       763    1        msgdump: ;
      758       764    1               if (qhdr->rcq.iptr != qhdr->rcq.rptr)
      759       765    1                       {
      760       766    2                       printf("\n");
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=22 
      761       767    2                       messhdr("rcq");
      762       768    2                       messaddr = qhdr->rcq.rptr+CQ+qhdr->rcq.offset; /* start */
      763       769    2                       messcnt = qhdr->rcq.iptr+CQ+qhdr->rcq.offset; /* end */
      764       770    2                       qhdrflg = qhdr->rcq.sz+CQ+qhdr->rcq.offset-sizeof(struct knh_me
                               ss);
      765       771    2                       if (messaddr<messcnt) qhdrflg = 0;
      766       772    2                       while (messaddr<messcnt || messaddr<qhdrflg)
      767       773    2                               {
      768       774    3                               messaddr = messdata(dibfd,messaddr,1);
      769       775    3                               if (qhdrflg && messaddr>=qhdrflg)
      770       776    3                                       {
      771       777    4                                       messaddr = qhdr->rcq.offset+CQ;
      772       778    4                                       qhdrflg = 0;
      773       779    4                                       }
      774       780    3                               if (messaddr==0) break;
      775       781    3                               }
      776       782    2                       }
      777       783    1
      778       784    1               if (qhdr->scq.iptr != qhdr->scq.rptr)
      779       785    1                       {
      780       786    2                       printf("\n");
      781       787    2                       messhdr("scq");
      782       788    2                       messaddr = qhdr->scq.rptr+CQ+qhdr->scq.offset; /* start */
      783       789    2                       messcnt = qhdr->scq.iptr+CQ+qhdr->scq.offset; /* end */
      784       790    2                       qhdrflg = qhdr->scq.sz+CQ+qhdr->scq.offset-sizeof(struct knh_me
                               ss);
      785       791    2                       if (messaddr<messcnt) qhdrflg = 0;
      786       792    2                       while (messaddr<messcnt || messaddr<qhdrflg)
      787       793    2                               {
      788       794    3                               messaddr = messdata(dibfd,messaddr,1);
      789       795    3                               if (qhdrflg && messaddr>=qhdrflg)
      790       796    3                                       {
      791       797    4                                       messaddr = qhdr->scq.offset+CQ;
      792       798    4                                       qhdrflg = 0;
      793       799    4                                       }
      794       800    3                               if (messaddr==0) break;
      795       801    3                               }
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=23 
      796       802    2                       }
      797       803    1               qhdrflg = messaddr = 0;
      798       804    1        }
      799       805
      800       806
      801       807             /*
      802       808              *             messhdr -
      803       809              */
      804       810
      805       811
      806       812             messhdr(cq)
      807       813             char *cq;
      808       814             {
      809       815    1        printf("       DIB %s dump  \n",cq);
      810       816    1        printf("location f msgsz ldctx type     data...\n");
      811       817    1        printf("-------- - ----- ----- ----     ----   \n");
      812       818    1        }
      813       819
      814       820
      815       821             /*
      816       822              *             messdata - attempts to decode the dib message Q's down
      817       823              *                     to the session header from the address specified.
      818       824              */
      819       825
      820       826
      821       827             messdata(dibfd,messaddr,messcnt)
      822       828
      823       829             int dibfd,messaddr,messcnt;
      824       830
      825       831             {
      826       832    1        int j;
      827       833    1        static char *type[] = {
      828       834    2               "data    ",
      829       835    2               "init    ",
      830       836    2               "init_ack",
      831       837    2               "term    ",
      832       838    2               "unknown "};
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=24 
      833       839    1
      834       840    1
      835       841    1        struct {
      836       842    2               struct knh_mess mess;
      837       843    2               struct qdp_snhdr snhdr;
      838       844    2               unsigned char data[20];
      839       845    2               }amessage;
      840       846    1
      841       847    1        if (!messcnt)
      842       848    1               messcnt = 1;
      843       849    1        while (messcnt--)
      844       850    1               {
      845       851    2               if (fetchdibdat(dibfd,&amessage,sizeof(amessage),messaddr&DIB_MASK) < 0
                               )
      846       852    2                       {
      847       853    3                       printf("can't fetch mess data\n");
      848       854    3                       return 0;
      849       855    3                       }
      850       856    2               if (amessage.mess.function == KN_FCN_DATA)
      851       857    2                       {
      852       858    3                       if (abs(amessage.snhdr.type) > K_SQDP_TERM)
      853       859    3                               amessage.snhdr.type = K_SQDP_TERM + 1;
      854       860    3                       printf("%#8x %1x %5d %5d %8s 0x",
      855       861    3                               messaddr,
      856       862    3                               amessage.mess.free,
      857       863    3                               pk2(amessage.mess.msgsz),
      858       864    3                               amessage.snhdr.ldct,
      859       865    3                               type[abs(amessage.snhdr.type)]);
      860       866    3                       for (j = 0; j < 16;j+=2)
      861       867    3                             printf("%02x%02x ",amessage.data[j],amessage.data[j+1]);
      862       868    3                       printf ("\n");
      863       869    3                       }
      864       870    2               else if (amessage.mess.msgsz != 14)
      865       871    2                       {
      866       872    3                       printf("%#8x %1x             %8s\n",
      867       873    3                               messaddr,
      868       874    3                               amessage.mess.free,
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=25 
      869       875    3                               "nop     ");
      870       876    3                       messcnt = 0;
      871       877    3                       }
      872       878    2                else printf("%#8x %1x %5d %5d %8s   %.14s\n",
      873       879    2                       messaddr,
      874       880    2                       amessage.mess.free,
      875       881    2                       abs(amessage.mess.msgsz),
      876       882    2                       0,
      877       883    2                       "time    ",
      878       884    2                       &amessage.snhdr);
      879       885    2
      880       886    2               messaddr += ((pk2(amessage.mess.msgsz) + sizeof(struct knh_mess) +3)/4)
                               *4;
      881       887    2               }
      882       888    1        return messaddr;
      883       889    1        }
      884       890
      885       891             /*
      886       892              *             tracedump - dump stack frames starting at specified
      887       893              *                      address.  Stop when address reaches f20000.
      888       894              */
      889       895
      890       896             tracedump (fd,fp)
      891       897             int fd;             /* dump file descriptor */
      892       898             int fp;             /* starting frame pointer */
      893       899             {
      894       900    1        int nxtfp;
      895       901    1
      896       902    1              if (fp<10) {
      897       903    2                   if (getqhdr() < 0) return;
      898       904    2                   fp = qhdr.scrfrm;
      899       905    2                   }
      900       906    1              if (fd >= 0) rawdumpdata (fd,fp-0x80,0x88);
      901       907    1              while (fp < 0xf20000) {
      902       908    2                   if (fetchdibdat(fd,&nxtfp,sizeof(nxtfp),fp) < 0) {
      903       909    3                         printf ("tracedump: cant read dump data\n");
      904       910    3                         return;
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=26 
      905       911    3                   }
      906       912    2                   nxtfp = pk4(nxtfp);
      907       913    2                    if ((nxtfp > 0xf1fff8) || (nxtfp < fp))
      908       914    2                          nxtfp = 0xf1fff8;
      909       915    2                    if (nxtfp == fp)
      910       916    2                          return;
      911       917    2                   rawdumpdata (fd,fp+8,nxtfp-fp);
      912       918    2                   fp = nxtfp;
      913       919    2              }
      914       920    1        }
      915       921              
      916       923
      917       924
      918       925             /*
      919       926              *             rawdumpdata - dumps the data from dib message Q's from
      920       927              *                     from the address specified, for the number of
      921       928              *                     bytes specified.  Bytes are in hex.
      922       929              */
      923       930
      924       931
      925       932             rawdumpdata(fd,addr,bound)
      926       933
      927       934             int fd,addr,bound;
      928       935
      929       936             {
      930       937    1
      931       938    1        unsigned char  data[16],tdata[16];
      932       939    1        char *data_,*tdata_;
      933       940    1        int linecnt,i,skipped;
      934       941    1
      935       942    1        printf("\nlocation  data\n");
      936       943    1        printf("--------  ----\n");
      937       944    1        if (bound==0) bound = 1;
      938       945    1        linecnt = (bound+(sizeof(data)-1))/sizeof(data);
      939       946    1        skipped = 0;
      940       947    1        data_ = (char *)&data[0];
      941       948    1        tdata_ = (char *)&tdata[0];
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=27 
      942       949    1        /* if only one line then tdata was never set use data*/
      943       950    1        if (linecnt==1)
      944       951    1               {
      945       952    2               if (fetchdibdat(fd,data,sizeof(data),addr)<0)
      946       953    2                       {
      947       954    3                       printf("can't fetch dib memory for raw dump\n");
      948       955    3                       }
      949       956    2               else
      950       957    2                       {
      951       958    3                       printf("%#8x ",addr);
      952       959    3                       printdata(data,sizeof(data));
      953       960    3                       }
      954       961    2               return;
      955       962    2               }
      956       963    1        for (i = 0;i < linecnt-1;i++)
      957       964    1               {
      958       965    2               if (fetchdibdat(fd,data,sizeof(data),addr)<0)
      959       966    2                       {
      960       967    3                       printf("can't fetch dib memory for raw dump\n");
      961       968    3                       return;
      962       969    3                       }
      963       970    2               if (fetchdibdat(fd,tdata,sizeof(tdata),addr+sizeof(data))<0)
      964       971    2                       {
      965       972    3                       printf("%#8x ",addr);
      966       973    3                       printdata(data,sizeof(data)/2);
      967       974    3                       return;
      968       975    3                       }
      969       976    2               if ((skipped)&&(memcmp(data_,tdata_,sizeof(tdata))!=0))
      970       977    2                       {
      971       978    3        /*
      972       979    3         *             the lines were equal, but aren't anymore. increment the
      973       980    3         *             address move to the next buffer reset skipped so that
      974       981    3         *             we print the next line.
      975       982    3         */
      976       983    3                       skipped = 0;
      977       984    3                       addr += sizeof(data);
      978       985    3                       continue;
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=28 
      979       986    3                       }
      980       987    2               if ((memcmp(data_,tdata_,sizeof(tdata))==0) &&(skipped))
      981       988    2                       {
      982       989    3        /*
      983       990    3         *             the lines are equal and we are already skipping.
      984       991    3         */
      985       992    3                       addr += sizeof(data);
      986       993    3                       continue;
      987       994    3                       }
      988       995    2               if (memcmp(data_,tdata_,sizeof(tdata))==0)
      989       996    2                       {
      990       997    3                       skipped++;
      991       998    3                       printf("%#8x* ",addr);
      992       999    3                       }
      993      1000    2               else
      994      1001    2                       printf("%#8x  ",addr);
      995      1002    2
      996      1003    2               printdata(data,sizeof(data));
      997      1004    2               addr += sizeof(data);
      998      1005    2               }
      999      1006    1        printf("%#8x  ",addr);
     1000      1007    1        printdata(tdata,(bound-(linecnt-1)*sizeof(tdata)));
     1001      1008    1        }
     1002      1009
     1003      1010
     1004      1011             printdata(buf,size)
     1005      1012
     1006      1013             /*
     1007      1014              *             buf - pointer to data.
     1008      1015              *             size - number of bytes to be printed.
     1009      1016              */
     1010      1017             unsigned char *buf;
     1011      1018             int size;
     1012      1019
     1013      1020             {
     1014      1021    1
     1015      1022    1        int i;
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=29 
     1016      1023    1        unsigned char *cbuf;
     1017      1024    1
     1018      1025    1
     1019      1026    1        for (i = 0;i<size;i+=2)
     1020      1027    1               printf("%02x%02x ",*(buf+i),*(buf+i+1));
     1021      1028    1        for (i=size;i<BYTESPERLINE;i+=2)
     1022      1029    1               printf("     ");
     1023      1030    1        printf("   ");
     1024      1031    1        cbuf = (unsigned char *)buf;
     1025      1032    1        for (i=0;i<(size);i++)
     1026      1033    1               {
     1027      1034    2               if ((*cbuf < SPACE) || (*cbuf > TILDE))
     1028      1035    2                       printf(".");
     1029      1036    2               else
     1030      1037    2                       printf("%c",*cbuf);
     1031      1038    2               cbuf++;
     1032      1039    2               }
     1033      1040    1        printf("\n");
     1034      1041    1        }
     1035      1042              
     1036      1044
     1037      1045             /*
     1038      1046              *             getipc - fetch the interprocess table from the dib.
     1039      1047              */
     1040      1048
     1041      1049
     1042      1050             getipc()
     1043      1051
     1044      1052             {
     1045      1053    1        int *s = (int *)(&ipc.scode);
     1046      1054    1        int xx;
     1047      1055    1
     1048      1056    1        dibaddr = 1000; /* read beyond page zero to set DB_CURPP in DBM$READ*/
     1049      1057    1        if (fetchdibdat(dibfd,&ipc,sizeof(ipc),dibaddr) < 0)
     1050      1058    1               {
     1051      1059    2               printf("can't get ipc data\n");
     1052      1060    2               exit(EXIT_FAILURE);
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=30 
     1053      1061    2               }
     1054      1062    1        dibaddr = 0;  /* really 0x51f00000 */
     1055      1063    1        if (fetchdibdat(dibfd,&ipc,sizeof(ipc),dibaddr) < 0)
     1056      1064    1               {
     1057      1065    2               printf("can't get ipc data\n");
     1058      1066    2               exit(EXIT_FAILURE);
     1059      1067    2               }
     1060      1068    1              ipc.entry = pk4(ipc.entry);
     1061      1069    1              xx = pk4(ipc.qhdr);
     1062      1070    1              ipc.qhdr = xx;
     1063      1071    1              xx = pk4(ipc.ldct);
     1064      1072    1              ipc.ldct = xx;
     1065      1073    1              ipc.ipc_flag = pk4(ipc.ipc_flag);
     1066      1074    1              ipc.host_node = pk4(ipc.host_node);
     1067      1075    1              ipc.fep_node = pk4(ipc.fep_node);
     1068      1076    1              *s = pk4(ipc.scode);
     1069      1077    1              ipc.hststt = pk4(ipc.hststt);
     1070      1078    1        }
     1071      1079
     1072      1080
     1073      1081
     1074      1082             /*
     1075      1083              *             dodibctx - fetch the context area from the dib.
     1076      1084              */
     1077      1085
     1078      1086
     1079      1087             dodibctx()
     1080      1088
     1081      1089             {
     1082      1090    1        dibaddr = (DIB_Q+qhdr.ctx_offset)-DIB_BASE;
     1083      1091    1        if (fetchdibdat(dibfd,&dib_ctx,sizeof(dib_ctx),dibaddr) < 0)
     1084      1092    1               {
     1085      1093    2               printf("can't fetch dib ctx data\n");
     1086      1094    2               }
     1087      1095    1        else
     1088      1096    1               dibctxdata(&dib_ctx);
     1089      1097    1        }
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=31 
     1090      1098
     1091      1099             char stat_table_txt[9][8] = {"null","sleep","onproc","run","idle","zombie","st
                               op","xbrk","trans"};
     1092      1100              
     1093      1102             doprocs()
     1094      1103
     1095      1104             {
     1096      1105    1        int procaddr;
     1097      1106    1        if (fetchdibdat(dibfd,&ldctaddr,sizeof(ldctaddr),ipc.ldct) < 0)
     1098      1107    1               {
     1099      1108    2               printf("can't fetch ipc.ldct\n");
     1100      1109    2               return 0;
     1101      1110    2               }
     1102      1111    1        ldctaddr = pk4(ldctaddr);
     1103      1112    1        procaddr = ldctaddr + N_LDCTS*(sizeof(devldct)-2) + sizeof(dduproc);
     1104      1113    1        ldctaddr += sizeof(struct kn_ldct)-2;
     1105      1114    1        ldctcnt = 1;
     1106      1115    1        printf("\n                       Processor Data\n");
     1107      1116    1        printf("ldct      stat    uid    pid   ppid    wchan   w2chan  alarm   swap\n"
                               );
     1108      1117    1        printf("----      ----    ---    ---   ----    -----   ------  -----   ----\n"
                               );
     1109      1118    1        while (ldctcnt < N_LDCTS)
     1110      1119    1               {
     1111      1120    2               if (fetchdibdat(dibfd,&devldct,sizeof(struct kn_ldct),ldctaddr)<0)
     1112      1121    2                       {
     1113      1122    3                       printf("can't get ldct data\n");
     1114      1123    3                       return (0);
     1115      1124    3                       }
     1116      1125    2               if (devldct.procp)
     1117      1126    2                       {
     1118      1127    3                       fetchdibdat(dibfd,&dduproc,sizeof(dduproc),procaddr);
     1119      1128    3                       printf("%4.4d%10s%7d%7d%7d%9x%9x%7d%7d\n",
     1120      1129    3                               ldctcnt,
     1121      1130    3                               stat_table_txt[dduproc.p_stat%9],
     1122      1131    3                               pk2(dduproc.p_uid),
     1123      1132    3                               pk2(dduproc.p_pid),
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=32 
     1124      1133    3                               pk2(dduproc.p_ppid),
     1125      1134    3                               pk4(dduproc.p_wchan),
     1126      1135    3                               pk4(dduproc.p_w2chan),
     1127      1136    3                               pk4(dduproc.p_clktim),
     1128      1137    3                               pk2(dduproc.p_size));
     1129      1138    3                       }
     1130      1139    2               ldctcnt++;
     1131      1140    2               ldctaddr += sizeof(struct kn_ldct)-2;/*move to next ldct*/
     1132      1141    2               procaddr += sizeof(dduproc);/*move to next ldct*/
     1133      1142    2               }  /* while ldctcnt < */
     1134      1143    1        }
     1135      1144
     1136      1145             /*
     1137      1146              *             doldcts - fetch the ldcts from the dib memory.
     1138      1147              */
     1139      1148
     1140      1149
     1141      1150             doldcts()
     1142      1151
     1143      1152             {
     1144      1153    1        if (fetchdibdat(dibfd,&ldctsave,sizeof(ldctsave),ipc.ldct) < 0)
     1145      1154    1               {
     1146      1155    2               printf("can't fetch ipc.ldct\n");
     1147      1156    2               return 0;
     1148      1157    2               }
     1149      1158    1
     1150      1159    1        ldctaddr = pk4(ldctsave);
     1151      1160    1        ldctaddr += sizeof(struct kn_ldct)-2;
     1152      1161    1        ldctcnt = 1;
     1153      1162    1        ldcthdr();
     1154      1163    1        while (ldctcnt < N_LDCTS)
     1155      1164    1               {
     1156      1165    2               if (fetchdibdat(dibfd,&devldct,sizeof(struct kn_ldct),
     1157      1166    2                       ldctaddr)<0)
     1158      1167    2                       {
     1159      1168    3                       printf("can't get ldct data\n");
     1160      1169    3                       return 0;
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=33 
     1161      1170    3                       }
     1162      1171    2               if ((devldct.state != KN_ST_NULL) ||
     1163      1172    2                   (fulldct && devldct.procp))
     1164      1173    2                       ldctdata1(&devldct);
     1165      1174    2               ldctcnt++;
     1166      1175    2               ldctaddr += sizeof(struct kn_ldct)-2;/*move to next ldct*/
     1167      1176    2               }  /* while ldctcnt < */
     1168      1177    1        ldctcnt = 1;
     1169      1178    1        ldcthdr2();
     1170      1179    1        ldctaddr = pk4(ldctsave);
     1171      1180    1        ldctaddr += sizeof(struct kn_ldct)-2;
     1172      1181    1        while (ldctcnt < N_LDCTS)
     1173      1182    1               {
     1174      1183    2               if (fetchdibdat(dibfd,&devldct,sizeof(struct kn_ldct),
     1175      1184    2                       ldctaddr)<0)
     1176      1185    2                       {
     1177      1186    3                       printf("can't get ldct data\n");
     1178      1187    3                       return 0;
     1179      1188    3                       }
     1180      1189    2               if ((devldct.state != KN_ST_NULL) ||
     1181      1190    2                   (fulldct && devldct.procp))
     1182      1191    2                       ldctdata2(&devldct);
     1183      1192    2               ldctcnt++;
     1184      1193    2               ldctaddr += sizeof(struct kn_ldct)-2;/*move to next ldct*/
     1185      1194    2               }  /* while ldctcnt < */
     1186      1195    1        #ifdef xxx
     1187      1196   *S*       ldctcnt = 1;
     1188      1197   *S*       ldcthdr3();
     1189      1198   *S*       ldctaddr = pk4(ldctsave);
     1190      1199   *S*       ldctaddr += sizeof(struct kn_ldct)-2;
     1191      1200   *S*       while (ldctcnt < N_LDCTS)
     1192      1201   *S*              {
     1193      1202   *S*              if (fetchdibdat(dibfd,&devldct,sizeof(struct kn_ldct),
     1194      1203   *S*                      ldctaddr)<0)
     1195      1204   *S*                      {
     1196      1205   *S*                      printf("can't get ldct data\n");
     1197      1206   *S*                      return 0;
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=34 
     1198      1207   *S*                      }
     1199      1208   *S*              if ((devldct.state != KN_ST_NULL) ||
     1200      1209   *S*                  (fulldct && devldct.procp))
     1201      1210   *S*                      ldctdata3(&devldct);
     1202      1211   *S*              ldctcnt++;
     1203      1212   *S*              ldctaddr += sizeof(struct kn_ldct)-2;
     1204      1213   *S*              }  /* while ldctcnt < */
     1205      1214   *S*       #endif
     1206      1215    1        }
     1207      1216              
     1208      1218             /*
     1209      1219              *             options - for those of us who can't remember the options.
     1210      1220              */
     1211      1221
     1212      1222
     1213      1223             options()
     1214      1224
     1215      1225             {
     1216      1226    1        printf("\nlegal options: [-ialdhsmc] -f file\n");
     1217      1227    1        printf("-f fid where fid is a dump file to be examined.\n");
     1218      1228    1        printf("   fid value may be a full name of a dump file or the\n");
     1219      1229    1        printf("   four digit boot id and sequence number of a dump\n");
     1220      1230    1        printf("   file in either :SYSTAC OR SYSTAC2.\n");
     1221      1231    1        printf("-h displays dib cq headers only.\n");
     1222      1232    1        printf("-m displays dib cq headers and messages.\n");
     1223      1233    1        printf("-l displays ldcts not in state null\n\n");
     1224      1234    1        printf("-s displays complete ldct table.\n");
     1225      1235    1        printf("-p displays process table info.\n");
     1226      1236    1        printf("-c displays dib Q context area\n");
     1227      1237    1        printf("-a displays everything except null ldcts\n");
     1228      1238    1        printf("-t dumps stack frames starting at crash stack top\n");
     1229      1239    1        printf("-i interactive mode\n");
     1230      1240    1        printf("-dfnnnnn,m dumps '0xm' bytes in hex format\n");
     1231      1241    1        printf("-mf2nnnn,m dumps '0xm' messages from the cq\n");
     1232      1242    1        printf("-tfnnnnn   dumps stack frames starting at 0xfnnnnn\n");
     1233      1243    1        }
     1234      1244             /*
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=35 
     1235      1245              *             options1 - for those of us who can't remember the options.
     1236      1246              */
     1237      1247
     1238      1248
     1239      1249             options1()
     1240      1250
     1241      1251             {
     1242      1252    1        printf("\nlegal commands(from interactive mode): \n");
     1243      1253    1        printf("a              displays everything except null ldcts\n");
     1244      1254    1        printf("c              displays dib Q context area\n");
     1245      1255    1        printf("dxxxxx,m       dumps '0xm' bytes in hex format\n");
     1246      1256    1        printf("ffilename      select dib dump file\n");
     1247      1257    1        printf("               filename may be n or p to get next file\n");
     1248      1258    1        printf("h              display dib cq headers only.\n");
     1249      1259    1        printf("l              display active ldcts \n");
     1250      1260    1        printf("m or H         display cq headers and messages\n");
     1251      1261    1        printf("mf2xxxx,m      dump '0xm' messages from the cq\n");
     1252      1262    1        printf("p              display process table info\n");
     1253      1263    1        printf("q, x, or e     quit\n");
     1254      1264    1        printf("s              display all ldcts in use and released.\n");
     1255      1265    1        printf("t              dump stack frames starting a crash stack top\n");
     1256      1266    1        printf(".              repeat last command\n");
     1257      1267    1        printf("!cmd           shell command\n");
     1258      1268    1        }
     1259      1269
     1260      1270             /*
     1261      1271              *    dibopen - open dib dumpfile
     1262      1272             */
     1263      1273
     1264      1274             dibopen (fid)
     1265      1275             char *fid;
     1266      1276             {
     1267      1277    1
     1268      1278    1
     1269      1279    1        char p[64];
     1270      1280    1        char *pp;
     1271      1281    1
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=36 
     1272      1282    1              strcpy(&p[1],fid);
     1273      1283    1              pp = p;
     1274      1284    1              p[0] = strlen(fid);
     1275      1285    1              if (p[2] == 0)
     1276      1286    1                    if ((p[1]|0x20) == 'n') p[0] = 0;
     1277      1287    1                    else if ((p[1]|0x20) == 'p') p[0] = 511;
     1278      1288    1              DAM_DUMPFILE(&pp);  /* try what he called with */
     1279      1289    1              if (!ALTRT)
     1280      1290    1                    return 0;
     1281      1291    1              strcpy(&p[1],DMPVRS);
     1282      1292    1              strcat (&p[1],fid);
     1283      1293    1              p[0] = strlen(&p[1]);
     1284      1294    1              DAM_DUMPFILE(&pp);  /* try current version name */
     1285      1295    1              if (!ALTRT)
     1286      1296    1                    return 0;
     1287      1297    1              if (strchr(fid,'.')) {
     1288      1298    2                    printf ("Can't open %s\n",fid);
     1289      1299    2                    DAM_ERR();
     1290      1300    2                    return -1;   /* can't find it in the specified account*/
     1291      1301    2              }
     1292      1302    1              strcpy(&p[1],fid); /* no account given, try :SYSTAC */
     1293      1303    1              strcat(p,".:SYSTAC");
     1294      1304    1              p[0] = strlen(&p[1]);
     1295      1305    1              DAM_DUMPFILE(&pp);  /* try xxxx.:SYSTAC    */
     1296      1306    1              if (!ALTRT)
     1297      1307    1                    return 0;
     1298      1308    1              strcpy(&p[1],DMPVRS);
     1299      1309    1              strcat (p,fid);
     1300      1310    1              strcat(p,".:SYSTAC");
     1301      1311    1              p[0] = strlen(&p[1]);
     1302      1312    1              DAM_DUMPFILE(&pp);
     1303      1313    1              if (!ALTRT)
     1304      1314    1                    return 0;
     1305      1315    1              printf ("Can't open %s in :SYSTAC\n",fid);
     1306      1316    1              DAM_ERR();
     1307      1317    1              return -1;
     1308      1318    1        }
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=37 
     1309      1319             /* pk4 - pack 4 eight of nine bit bytes into an int */
     1310      1320
     1311      1321             int pk4(j)
     1312      1322             int j;
     1313      1323             {
     1314      1324    1              j += j&0777;
     1315      1325    1              j += j&0777777;
     1316      1326    1              j += j&0777777777;
     1317      1327    1              return j/8;
     1318      1328    1        }
     1319      1329             /* pk2 - pack 2 eight of nine bit bytes into an int */
     1320      1330
     1321      1331             int pk2(j)
     1322      1332             int   j;
     1323      1333             {
     1324      1334    1              return ((j&255)+j)/2;
     1325      1335    1        }
     1326      1336             void sigint()
     1327      1337             {
     1328      1338    1              printf("\nbreak!  \n");
     1329      1339    1              longjmp (env,1);
     1330      1340    1        }
---  Include file information  ---

   fcntl:h.:LIBRARY. is referenced
   stdlib:h.:LIBRARY. is referenced
   stdio:h.:LIBRARY. is referenced
   string:h.:LIBRARY. is referenced
   time:h.:LIBRARY. is referenced
   setjmp:h.:LIBRARY. is referenced
   memory:h.:LIBRARY. is referenced
   signal:h.:LIBRARY. is referenced
   TCD$ddu:h.:TCA2TOU. is referenced

No diagnostics were issued in the file TCD$ddu:c.:TCA2TSI

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=38 

 Object Unit name= main                                       File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:12:54.20 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero   804   1444  main
    1   Data  even  zero     0      0
    2  RoData even  none    85    125

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  main
     0      4          yes              Std        0  main#main
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=39 

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_2
 yes                   Std       0 __XBI_CSTARTUP
 yes                   Std       0 _GET_UNSHARED_DATA
                       Std       0 options
         yes           Std       1 exit
                       Std       0 DAM_INIT
         yes           Std       3 getopt
                       Std       0 printf
         yes           Std       2 strtok
         yes           Std       3 strtol
                       Std       0 dibopen
                       Std       0 getipc
                       Std       0 ipcdata
                       Std       0 getqhdr
                       Std       0 doldcts
                       Std       0 doprocs
                       Std       0 qdata
                       Std       0 dodibctx
                       Std       0 messhdr
                       Std       0 messdata
                       Std       0 rawdumpdata
                       Std       0 tracedump
         yes           Std       1 _setjmp
         yes           Std       2 signal
         yes           Std       1 sigsetmask
         yes           Std       1 fflush
         yes           Std       3 read
         yes           Std       1 perror
                       Std       0 fileopt
                       Std       0 options1
         yes           Std       1 system
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=40 
                       Std       0 _XBI_MARET
 yes                   Std       0 sigint

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd
     __LIB$COM$VECTOR__

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=41 


        1         1             /*M*     ddu        -    dib display utility.  Displays structures from  
        2         2              *                     dib dump files as well as running system.  
        3         3              *                     in theory this should be the same program call  
        4         4              *                     by nodeadmin to dump memory when acting as an  
        5         5              *                     anlz_fprg.  
        6         6              */  
        7         7             /*T***********************************************************/  
        8         8             /*T*                                                         */  
        9         9             /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */  
       10        10             /*T*                                                         */  
       11        11             /*T***********************************************************/  
       12        12             /*X*   DDA*/  
       13        13             #include <fcntl.h>  
       14        14             #include <stdlib.h>  
       15        15             #include <stdio.h>  
       16        16             #include <string.h>  
       17        17             #include <time.h>  
       18        18             #include <setjmp.h>  
       19        19             #include <memory.h>  
       20        20             #include <signal.h>  
       21        21             #include "TCD$ddu:h"  
       22        22                
       23        23             #define CP6PATH "/dev/dib/CP6"  
       24        24             #define CP6LOAD "/dev/dib/load"  
       25        25             #define NODEADMIN "/usr/bin/nodeadmin"  
       26        26             /* define addresses in DIB RAM relative to 0xffe00000          */  
       27        27             #ifdef CTLREG  
       28        28             #undef CTLREG  
       29        29             #define CTLREG 0x40240  
       30        30             #endif  
       31        31             #define FIFO   0x40280  
       32        32             #define NBYTES 16  
       33        33             #define DIB_BASE 0x51f00000  
       34        34             #define DIB_MASK 0x000fffff  
       35        35             #define DIB_Q  0x51f20000  
       36        36             #define CQ 0xf20000  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=42 
       37        37             #define SPACE 0x20  
       38        38             #define TILDE 0x7e  
       39        39             #define CR 0xa  
       40        40             #define BYTESPERLINE 16  
       41        41             #define DIBRU "dibbrd.dib"  
       42        42             #define DIBPATH "/etc/netbin/dibbrd.dib"  
       43        43             #define UNIXPATH "/dev/kmem"  
       44        44                
       45        45             #define GJA_SMEM_ADDR 0x700000  
       46        46                
       47        47                
       48        48             /*     kernel - dib communication area                         */  
       49        49                
       50        50             struct ipc {  
       51        51    1               long entry;             /* board rununit entry point            */  
       52        52    1               /*struct knh_qhdr **/ int qhdr;  /* pointer to dib queue structure    
       53        53    1               char *rfu;              /* unused                               */  
       54        54    1               /*struct kn_ldct **/ int ldct;   /* pointer to ldct array             
       55        55    1               long ipc_flag;          /* = 0 CP-6 connection down             */  
       56        56    1                                       /* = 1 CP-6 connection up               */  
       57        57    1               long host_node;         /* host node number                     */  
       58        58    1               long fep_node;          /* our node number                      */  
       59        59    1               char fep_nm[12];        /* fep name string                      */  
       60        60    1               struct {                /* last screech code sent to CP6        */  
       61        61    2                       unsigned a1 : 5;  
       62        62    2                       unsigned a2 : 5;  
       63        63    2                       unsigned mid: 5;  
       64        64    2                       unsigned mon: 1;  
       65        65    2                       unsigned err: 13;  
       66        66    2                       unsigned sev: 3;  
       67        67    2               } scode;  
       68        68    1               long hststt;            /* host state                           */  
       69        69    1               }ipc;  
       70        70                
       71        71             struct kn_ldct devldct;  
       72        72             struct rcv_proc dduproc;  
       73        73             struct knh_qhdr qhdr;  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=43 
       74        74             struct kj_ctx dib_ctx;  
       75        75                
       76        76             int dibfd,kmemfd,fulldct,dibctx,traceaddr,messcnt,messaddr,qhdrflg,procflg;  
       77        77             int rawdump,rawaddr,rawbound;  
       78        78             int i,ldctsave,dibaddr,ldctaddr,ldctcnt,actldcts;  
       79        79             int interactive;  
       80        80             char *messc;  
       81        81             static char path[64];  
       82        82             extern int ALTRT,optind,opterr;  
       83        83             extern char DMPVRS[6];  
       84        84             extern char *optarg;  
       85        85             char readbuf[80],savebuf[80];  
       86        86             int savebufsiz;  
       87        87             char op,prevop;  
       88        88             void sigint(int);  
       89        89             jmp_buf env;  
       90        90                
       91        91             char *strolp;     /* results of strtol functions              */  
       92        92                
       93        93             main (argc,argv)  
       94        94             int argc;  

     94  0 000000   000000 700000 xent  main         TSX0    _XBC_AUTO_2
         0 000001   000036 000002                    ZERO    30,2
         0 000002   000005 710004                    TRA     s:101,IC
         0 000003   000000 000000                    ZERO    0,0

      0  0 000004   000000 637400 xsym  main#main    EPPR7   __LIB$COM$VECTOR__
         0 000005   000000 700000 xent               TSX0    __XBI_CSTARTUP
         0 000006   000036 000002                    ZERO    30,2

       95        95             char *argv[];  
       96        96                
       97        97             {  
       98        98    1           
       99        99    1         int nargs;  
      100       100    1           
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=44 
      101       101    1        fulldct = qhdrflg = dibctx = rawdump = messaddr = 0;  

    101  0 000007   000000 450000 xsym               STZ     messaddr
         0 000010   000000 236000 xsym               LDQ     messaddr
         0 000011   000000 756000 xsym               STQ     rawdump
         0 000012   000000 236000 xsym               LDQ     messaddr
         0 000013   000000 756000 xsym               STQ     dibctx
         0 000014   000000 236000 xsym               LDQ     dibctx
         0 000015   000000 756000 xsym               STQ     qhdrflg
         0 000016   000000 236000 xsym               LDQ     dibctx
         0 000017   000000 756000 xsym               STQ     fulldct

      102       102    1        path[0] = traceaddr = actldcts = interactive = procflg = 0;  

    102  0 000020   000000 450000 xsym               STZ     procflg
         0 000021   000000 236000 xsym               LDQ     procflg
         0 000022   000000 756000 xsym               STQ     interactive
         0 000023   000000 236000 xsym               LDQ     procflg
         0 000024   000000 756000 xsym               STQ     actldcts
         0 000025   000000 236000 xsym               LDQ     actldcts
         0 000026   000000 756000 xsym               STQ     traceaddr
         0 000027   000000 236000 xsym               LDQ     actldcts
         0 000030   200016 756100                    STQ     nargs+1,,AUTO
         0 000031   000000 100500                    MLR     fill='000'O
         0 000032   200016 600001                    ADSC9   nargs+1,,AUTO            cn=3,n=1
         0 000033   000146 000001 xsym               ADSC9   sigint#s+102             cn=0,n=1

      103       103    1        if (argc < 2) {  

    103  0 000034   200004 236100                    LDQ     argc,,AUTO
         0 000035   000002 116007                    CMPQ    2,DL
         0 000036   000050 605000 0                  TPL     s:107

      104       104    2               options();  

    104  0 000037   001413 631400 0                  EPPR1   s:332+2
         0 000040   000000 701000 xent               TSX1    options
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=45 
         0 000041   000000 236007                    LDQ     0,DL

      105       105    2               exit(EXIT_FAILURE);  

    105  0 000042   000007 236007                    LDQ     7,DL
         0 000043   200014 756100                    STQ     argv+7,,AUTO
         0 000044   200014 630500                    EPPR0   argv+7,,AUTO
         0 000045   001414 631400 0                  EPPR1   s:332+3
         0 000046   000000 701000 xent               TSX1    exit
         0 000047   000000 236007                    LDQ     0,DL

      106       106    2        }  
      107       107    1        DAM_INIT();  

    107  0 000050   001413 631400 0                  EPPR1   s:332+2
         0 000051   000000 701000 xent               TSX1    DAM_INIT
         0 000052   000000 236007                    LDQ     0,DL

      108       108    1        nargs = 1;  

    108  0 000053   000001 236007                    LDQ     1,DL
         0 000054   200015 756100                    STQ     nargs,,AUTO

      109       109    1        while ((i = getopt(argc,argv,"pif:chm:ald:sPIF:CHM:ALD:S?")) != EOF)  

    109  0 000055   200004 236100                    LDQ     argc,,AUTO
         0 000056   200012 756100                    STQ     argv+5,,AUTO
         0 000057   200005 236100                    LDQ     argv,,AUTO
         0 000060   200013 756100                    STQ     argv+6,,AUTO
         0 000061   001415 236000 0                  LDQ     s:332+4
         0 000062   200014 756100                    STQ     argv+7,,AUTO
         0 000063   200012 630500                    EPPR0   argv+5,,AUTO
         0 000064   001416 631400 0                  EPPR1   s:332+5
         0 000065   000000 701000 xent               TSX1    getopt
         0 000066   000000 236007                    LDQ     0,DL
         0 000067   000000 756000 xsym               STQ     i
         0 000070   000000 236000 xsym               LDQ     i
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=46 
         0 000071   001417 116000 0                  CMPQ    s:332+6
         0 000072   000435 600000 0                  TZE     s:192

      110       110    1               {  
      111       111    2               nargs++;  

    111  0 000073   200015 054100                    AOS     nargs,,AUTO

      112       112    2               switch(i)  

    112  0 000074   000000 236000 xsym               LDQ     i
         0 000075   200016 756100                    STQ     nargs+1,,AUTO
         0 000076   000410 710000 0                  TRA     s:186+1

      113       113    2                       {  
      114       114    3                       case 'a':  
      115       115    3                       case 'A':  
      116       116    3                               dibctx = 1;  

    116  0 000077   000001 236007                    LDQ     1,DL
         0 000100   000000 756000 xsym               STQ     dibctx

      117       117    3                               actldcts = 1;  

    117  0 000101   000001 236007                    LDQ     1,DL
         0 000102   000000 756000 xsym               STQ     actldcts

      118       118    3                               qhdrflg = 2;  

    118  0 000103   000002 236007                    LDQ     2,DL
         0 000104   000000 756000 xsym               STQ     qhdrflg

      119       119    3                               procflg = 1;  

    119  0 000105   000001 236007                    LDQ     1,DL
         0 000106   000000 756000 xsym               STQ     procflg

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=47 
      120       120    3                               break;  

    120  0 000107   000055 710000 0                  TRA     s:109

      121       121    3                       case 'c':  
      122       122    3                       case 'C':  
      123       123    3                               dibctx = 1;  

    123  0 000110   000001 236007                    LDQ     1,DL
         0 000111   000000 756000 xsym               STQ     dibctx

      124       124    3                               break;  

    124  0 000112   000055 710000 0                  TRA     s:109

      125       125    3                       case 'l':  
      126       126    3                       case 'L':  
      127       127    3                               actldcts = 1;  

    127  0 000113   000001 236007                    LDQ     1,DL
         0 000114   000000 756000 xsym               STQ     actldcts

      128       128    3                               break;  

    128  0 000115   000055 710000 0                  TRA     s:109

      129       129    3                       case 'i':  
      130       130    3                       case 'I':  
      131       131    3        /*  
      132       132    3         *                     interactive mode.  
      133       133    3         */  
      134       134    3                               interactive=1;  

    134  0 000116   000001 236007                    LDQ     1,DL
         0 000117   000000 756000 xsym               STQ     interactive

      135       135    3                               break;  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=48 

    135  0 000120   000055 710000 0                  TRA     s:109

      136       136    3                       case 'f':  
      137       137    3                       case 'F':  
      138       138    3                               nargs++;  

    138  0 000121   200015 054100                    AOS     nargs,,AUTO

      139       139    3                               if (strlen(optarg)>sizeof(path))  

    139  0 000122   000000 473400 xsym               LDP3    optarg
         0 000123   200017 453500                    STP3    nargs+2,,AUTO
         0 000124   200017 235100                    LDA     nargs+2,,AUTO
         0 000125   000020 771000                    ARL     16
         0 000126   007777 375007                    ANA     4095,DL
         0 000127   007777 675007                    ERA     4095,DL
         0 000130   000001 035007                    ADLA    1,DL
         0 000131   000000 236007                    LDQ     0,DL
         0 000132   000003 124540                    SCM     mask='000'O
         0 000133   300000 000005                    ADSC9   0,,PR3                   cn=0,n=*A
         0 000134   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000135   200020 000100                    ARG     nargs+3,,AUTO
         0 000136   300000 500505                    A9BD    0,AL,PR3
         0 000137   010000 235007                    LDA     4096,DL
         0 000140   200020 036100                    ADLQ    nargs+3,,AUTO
         0 000141   777771 606404                    TTN     s:139+8,IC
         0 000142   200017 756100                    STQ     nargs+2,,AUTO
         0 000143   200017 236100                    LDQ     nargs+2,,AUTO
         0 000144   000100 116007                    CMPQ    64,DL
         0 000145   000155 604400 0                  TMOZ    s:142

      140       140    3                                      printf("error on f option. path too long\n");  

    140  0 000146   001420 236000 0                  LDQ     s:332+7
         0 000147   200013 756100                    STQ     argv+6,,AUTO
         0 000150   200013 630500                    EPPR0   argv+6,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=49 
         0 000151   001414 631400 0                  EPPR1   s:332+3
         0 000152   000000 701000 xent               TSX1    printf
         0 000153   000000 236007                    LDQ     0,DL
         0 000154   000203 710000 0                  TRA     s:143

      141       141    3                               else  
      142       142    3                                       strcpy(path,optarg);  

    142  0 000155   000146 633400 xsym               EPPR3   sigint#s+102
         0 000156   000000 474400 xsym               LDP4    optarg
         0 000157   200020 454500                    STP4    nargs+3,,AUTO
         0 000160   200020 235100                    LDA     nargs+3,,AUTO
         0 000161   000020 771000                    ARL     16
         0 000162   007777 375007                    ANA     4095,DL
         0 000163   007777 675007                    ERA     4095,DL
         0 000164   000001 035007                    ADLA    1,DL
         0 000165   000000 236007                    LDQ     0,DL
         0 000166   000003 124540                    SCM     mask='000'O
         0 000167   400000 000005                    ADSC9   0,,PR4                   cn=0,n=*A
         0 000170   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000171   200021 000100                    ARG     nargs+4,,AUTO
         0 000172   400000 500505                    A9BD    0,AL,PR4
         0 000173   010000 235007                    LDA     4096,DL
         0 000174   200021 036100                    ADLQ    nargs+4,,AUTO
         0 000175   777771 606404                    TTN     s:142+9,IC
         0 000176   200020 474500                    LDP4    nargs+3,,AUTO
         0 000177   000001 036007                    ADLQ    1,DL
         0 000200   000140 100540                    MLR     fill='000'O
         0 000201   400000 000006                    ADSC9   0,,PR4                   cn=0,n=*Q
         0 000202   300000 000006                    ADSC9   0,,PR3                   cn=0,n=*Q

      143       143    3                               break;  

    143  0 000203   000055 710000 0                  TRA     s:109

      144       144    3                       case 's':  
      145       145    3                       case 'S':  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=50 
      146       146    3                               actldcts = 1;  

    146  0 000204   000001 236007                    LDQ     1,DL
         0 000205   000000 756000 xsym               STQ     actldcts

      147       147    3                               fulldct = 1;  

    147  0 000206   000001 236007                    LDQ     1,DL
         0 000207   000000 756000 xsym               STQ     fulldct

      148       148    3                               break;  

    148  0 000210   000055 710000 0                  TRA     s:109

      149       149    3                       case 'H':  
      150       150    3                               ++qhdrflg;  

    150  0 000211   000000 054000 xsym               AOS     qhdrflg

      151       151    3                       case 'h':  
      152       152    3                               ++qhdrflg;  

    152  0 000212   000000 054000 xsym               AOS     qhdrflg

      153       153    3                               break;  

    153  0 000213   000055 710000 0                  TRA     s:109

      154       154    3                       case 'm':  
      155       155    3                       case 'M':  
      156       156    3                               messc = strtok(optarg,",");  

    156  0 000214   000000 236000 xsym               LDQ     optarg
         0 000215   200010 756100                    STQ     argv+3,,AUTO
         0 000216   001421 236000 0                  LDQ     s:332+8
         0 000217   200011 756100                    STQ     argv+4,,AUTO
         0 000220   200010 630500                    EPPR0   argv+3,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=51 
         0 000221   001422 631400 0                  EPPR1   s:332+9
         0 000222   000000 701000 xent               TSX1    strtok
         0 000223   000000 236007                    LDQ     0,DL
         0 000224   000000 756000 xsym               STQ     messc

      157       157    3                               messaddr = strtol(messc,&strolp,16);  

    157  0 000225   000000 236000 xsym               LDQ     messc
         0 000226   200007 756100                    STQ     argv+2,,AUTO
         0 000227   001423 236000 0                  LDQ     s:332+10
         0 000230   200010 756100                    STQ     argv+3,,AUTO
         0 000231   000020 236007                    LDQ     16,DL
         0 000232   200011 756100                    STQ     argv+4,,AUTO
         0 000233   200007 630500                    EPPR0   argv+2,,AUTO
         0 000234   001416 631400 0                  EPPR1   s:332+5
         0 000235   000000 701000 xent               TSX1    strtol
         0 000236   000000 236007                    LDQ     0,DL
         0 000237   000000 756000 xsym               STQ     messaddr

      158       158    3                               if (messaddr == 0) {  

    158  0 000240   000000 234000 xsym               SZN     messaddr
         0 000241   000245 601000 0                  TNZ     s:162

      159       159    4                                       qhdrflg = 2;  

    159  0 000242   000002 236007                    LDQ     2,DL
         0 000243   000000 756000 xsym               STQ     qhdrflg

      160       160    4                                       break;  

    160  0 000244   000055 710000 0                  TRA     s:109

      161       161    4                                       }  
      162       162    3                               messc = strtok((char *)0," ");  

    162  0 000245   006014 236007                    LDQ     3084,DL
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=52 
         0 000246   200010 756100                    STQ     argv+3,,AUTO
         0 000247   001424 236000 0                  LDQ     s:332+11
         0 000250   200011 756100                    STQ     argv+4,,AUTO
         0 000251   200010 630500                    EPPR0   argv+3,,AUTO
         0 000252   001422 631400 0                  EPPR1   s:332+9
         0 000253   000000 701000 xent               TSX1    strtok
         0 000254   000000 236007                    LDQ     0,DL
         0 000255   000000 756000 xsym               STQ     messc

      163       163    3                               if (messc) messcnt = strtol(messc,&strolp,16);  

    163  0 000256   000000 236000 xsym               LDQ     messc
         0 000257   006014 116007                    CMPQ    3084,DL
         0 000260   000274 600000 0                  TZE     s:164

    163  0 000261   000000 236000 xsym               LDQ     messc
         0 000262   200007 756100                    STQ     argv+2,,AUTO
         0 000263   001423 236000 0                  LDQ     s:332+10
         0 000264   200010 756100                    STQ     argv+3,,AUTO
         0 000265   000020 236007                    LDQ     16,DL
         0 000266   200011 756100                    STQ     argv+4,,AUTO
         0 000267   200007 630500                    EPPR0   argv+2,,AUTO
         0 000270   001416 631400 0                  EPPR1   s:332+5
         0 000271   000000 701000 xent               TSX1    strtol
         0 000272   000000 236007                    LDQ     0,DL
         0 000273   000000 756000 xsym               STQ     messcnt

      164       164    3                               break;  

    164  0 000274   000055 710000 0                  TRA     s:109

      165       165    3                       case 't':  
      166       166    3                       case 'T':  
      167       167    3                              if ((traceaddr = strtol(optarg,((char**)0),16)) == 0)  

    167  0 000275   000000 236000 xsym               LDQ     optarg
         0 000276   200007 756100                    STQ     argv+2,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=53 
         0 000277   006014 236007                    LDQ     3084,DL
         0 000300   200010 756100                    STQ     argv+3,,AUTO
         0 000301   000020 236007                    LDQ     16,DL
         0 000302   200011 756100                    STQ     argv+4,,AUTO
         0 000303   200007 630500                    EPPR0   argv+2,,AUTO
         0 000304   001416 631400 0                  EPPR1   s:332+5
         0 000305   000000 701000 xent               TSX1    strtol
         0 000306   000000 236007                    LDQ     0,DL
         0 000307   000000 756000 xsym               STQ     traceaddr
         0 000310   000000 234000 xsym               SZN     traceaddr
         0 000311   000314 601000 0                  TNZ     s:169

      168       168    3                                       traceaddr = 1;  

    168  0 000312   000001 236007                    LDQ     1,DL
         0 000313   000000 756000 xsym               STQ     traceaddr

      169       169    3                               break;  

    169  0 000314   000055 710000 0                  TRA     s:109

      170       170    3                       case 'd':  
      171       171    3                       case 'D':  
      172       172    3                               rawdump = 1;  

    172  0 000315   000001 236007                    LDQ     1,DL
         0 000316   000000 756000 xsym               STQ     rawdump

      173       173    3                               messc = strtok(optarg,",");  

    173  0 000317   000000 236000 xsym               LDQ     optarg
         0 000320   200010 756100                    STQ     argv+3,,AUTO
         0 000321   001421 236000 0                  LDQ     s:332+8
         0 000322   200011 756100                    STQ     argv+4,,AUTO
         0 000323   200010 630500                    EPPR0   argv+3,,AUTO
         0 000324   001422 631400 0                  EPPR1   s:332+9
         0 000325   000000 701000 xent               TSX1    strtok
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=54 
         0 000326   000000 236007                    LDQ     0,DL
         0 000327   000000 756000 xsym               STQ     messc

      174       174    3                               rawaddr = strtol(messc,&strolp,16);  

    174  0 000330   000000 236000 xsym               LDQ     messc
         0 000331   200007 756100                    STQ     argv+2,,AUTO
         0 000332   001423 236000 0                  LDQ     s:332+10
         0 000333   200010 756100                    STQ     argv+3,,AUTO
         0 000334   000020 236007                    LDQ     16,DL
         0 000335   200011 756100                    STQ     argv+4,,AUTO
         0 000336   200007 630500                    EPPR0   argv+2,,AUTO
         0 000337   001416 631400 0                  EPPR1   s:332+5
         0 000340   000000 701000 xent               TSX1    strtol
         0 000341   000000 236007                    LDQ     0,DL
         0 000342   000000 756000 xsym               STQ     rawaddr

      175       175    3                               messc = strtok((char *)0," ");  

    175  0 000343   006014 236007                    LDQ     3084,DL
         0 000344   200010 756100                    STQ     argv+3,,AUTO
         0 000345   001424 236000 0                  LDQ     s:332+11
         0 000346   200011 756100                    STQ     argv+4,,AUTO
         0 000347   200010 630500                    EPPR0   argv+3,,AUTO
         0 000350   001422 631400 0                  EPPR1   s:332+9
         0 000351   000000 701000 xent               TSX1    strtok
         0 000352   000000 236007                    LDQ     0,DL
         0 000353   000000 756000 xsym               STQ     messc

      176       176    3                               if (messc) rawbound = strtol(messc,&strolp,16);  

    176  0 000354   000000 236000 xsym               LDQ     messc
         0 000355   006014 116007                    CMPQ    3084,DL
         0 000356   000372 600000 0                  TZE     s:177

    176  0 000357   000000 236000 xsym               LDQ     messc
         0 000360   200007 756100                    STQ     argv+2,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=55 
         0 000361   001423 236000 0                  LDQ     s:332+10
         0 000362   200010 756100                    STQ     argv+3,,AUTO
         0 000363   000020 236007                    LDQ     16,DL
         0 000364   200011 756100                    STQ     argv+4,,AUTO
         0 000365   200007 630500                    EPPR0   argv+2,,AUTO
         0 000366   001416 631400 0                  EPPR1   s:332+5
         0 000367   000000 701000 xent               TSX1    strtol
         0 000370   000000 236007                    LDQ     0,DL
         0 000371   000000 756000 xsym               STQ     rawbound

      177       177    3                               break;  

    177  0 000372   000055 710000 0                  TRA     s:109

      178       178    3                       case 'p':  
      179       179    3                       case 'P':  
      180       180    3                               procflg = 1;  

    180  0 000373   000001 236007                    LDQ     1,DL
         0 000374   000000 756000 xsym               STQ     procflg

      181       181    3                               break;  

    181  0 000375   000055 710000 0                  TRA     s:109

      182       182    3                       case '?':  
      183       183    3                       default:  
      184       184    3                               options();  

    184  0 000376   001413 631400 0                  EPPR1   s:332+2
         0 000377   000000 701000 xent               TSX1    options
         0 000400   000000 236007                    LDQ     0,DL

      185       185    3                               exit(EXIT_FAILURE);  

    185  0 000401   000007 236007                    LDQ     7,DL
         0 000402   200011 756100                    STQ     argv+4,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=56 
         0 000403   200011 630500                    EPPR0   argv+4,,AUTO
         0 000404   001414 631400 0                  EPPR1   s:332+3
         0 000405   000000 701000 xent               TSX1    exit
         0 000406   000000 236007                    LDQ     0,DL

      186       186    3                               break;  

    186  0 000407   000055 710000 0                  TRA     s:109
         0 000410   200016 235100                    LDA     nargs+1,,AUTO
         0 000411   001425 236000 0                  LDQ     s:332+12
         0 000412   200020 756100                    STQ     nargs+3,,AUTO
         0 000413   000001 236000 2                  LDQ     1
         0 000414   000001 736000                    QLS     1
         0 000415   200021 756100                    STQ     nargs+4,,AUTO
         0 000416   200020 036100                    ADLQ    nargs+3,,AUTO
         0 000417   000001 732000                    QRS     1
         0 000420   001425 376000 0                  ANQ     s:332+12
         0 000421   200020 116100                    CMPQ    nargs+3,,AUTO
         0 000422   000011 600004                    TZE     s:186+20,IC
         0 000423   000002 115006 2                  CMPA    2,QL
         0 000424   777771 604004                    TMI     s:186+6,IC
         0 000425   000003 605404                    TPNZ    s:186+17,IC
         0 000426   000003 235006 2                  LDA     3,QL
         0 000427   000000 710001                    TRA     0,AU
         0 000430   200020 756100                    STQ     nargs+3,,AUTO
         0 000431   200021 036100                    ADLQ    nargs+4,,AUTO
         0 000432   777765 710004                    TRA     s:186+8,IC
         0 000433   000000 235000 2                  LDA     0
         0 000434   000000 710001                    TRA     0,AU

      187       187    3                        }  
      188       188    2               }  
      189       189    1        /*  
      190       190    1         *     open to the dib dump file  
      191       191    1         */  
      192       192    1               dibfd = -1;  

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=57 
    192  0 000435   001417 236000 0                  LDQ     s:332+6
         0 000436   000000 756000 xsym               STQ     dibfd

      193       193    1               if (path[0] == 0 || (dibfd = dibopen (path)) < 0) {  

    193  0 000437   000146 236000 xsym               LDQ     sigint#s+102
         0 000440   000033 772000                    QRL     27
         0 000441   000000 036007                    ADLQ    0,DL
         0 000442   000454 600000 0                  TZE     s:194
         0 000443   001426 236000 0                  LDQ     s:332+13
         0 000444   200014 756100                    STQ     argv+7,,AUTO
         0 000445   200014 630500                    EPPR0   argv+7,,AUTO
         0 000446   001414 631400 0                  EPPR1   s:332+3
         0 000447   000000 701000 xent               TSX1    dibopen
         0 000450   000000 236007                    LDQ     0,DL
         0 000451   000000 756000 xsym               STQ     dibfd
         0 000452   000000 234000 xsym               SZN     dibfd
         0 000453   000473 605000 0                  TPL     s:198

      194       194    2                       actldcts = fulldct = rawdump = traceaddr = procflg = 0;  

    194  0 000454   000000 450000 xsym               STZ     procflg
         0 000455   000000 236000 xsym               LDQ     procflg
         0 000456   000000 756000 xsym               STQ     traceaddr
         0 000457   000000 236000 xsym               LDQ     procflg
         0 000460   000000 756000 xsym               STQ     rawdump
         0 000461   000000 236000 xsym               LDQ     rawdump
         0 000462   000000 756000 xsym               STQ     fulldct
         0 000463   000000 236000 xsym               LDQ     rawdump
         0 000464   000000 756000 xsym               STQ     actldcts

      195       195    2                       messaddr = qhdrflg = dibctx = 0;  

    195  0 000465   000000 450000 xsym               STZ     dibctx
         0 000466   000000 236000 xsym               LDQ     dibctx
         0 000467   000000 756000 xsym               STQ     qhdrflg
         0 000470   000000 236000 xsym               LDQ     dibctx
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=58 
         0 000471   000000 756000 xsym               STQ     messaddr
         0 000472   000507 710000 0                  TRA     s:202

      196       196    2                       }  
      197       197    1               else {  
      198       198    2                       getipc();  

    198  0 000473   001413 631400 0                  EPPR1   s:332+2
         0 000474   000000 701000 xent               TSX1    getipc
         0 000475   000000 236007                    LDQ     0,DL

      199       199    2                       ipcdata(&ipc);  

    199  0 000476   001427 236000 0                  LDQ     s:332+14
         0 000477   200014 756100                    STQ     argv+7,,AUTO
         0 000500   200014 630500                    EPPR0   argv+7,,AUTO
         0 000501   001414 631400 0                  EPPR1   s:332+3
         0 000502   000000 701000 xent               TSX1    ipcdata
         0 000503   000000 236007                    LDQ     0,DL

      200       200    2                       getqhdr();  

    200  0 000504   001413 631400 0                  EPPR1   s:332+2
         0 000505   000000 701000 xent               TSX1    getqhdr
         0 000506   000000 236007                    LDQ     0,DL

      201       201    2                       }  
      202       202    1               if (actldcts || fulldct)  

    202  0 000507   000000 234000 xsym               SZN     actldcts
         0 000510   000513 601000 0                  TNZ     s:203
         0 000511   000000 234000 xsym               SZN     fulldct
         0 000512   000516 600000 0                  TZE     s:204

      203       203    1                       doldcts();  

    203  0 000513   001413 631400 0                  EPPR1   s:332+2
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=59 
         0 000514   000000 701000 xent               TSX1    doldcts
         0 000515   000000 236007                    LDQ     0,DL

      204       204    1               if (procflg)  

    204  0 000516   000000 234000 xsym               SZN     procflg
         0 000517   000523 600000 0                  TZE     s:207

      205       205    1                       doprocs();  

    205  0 000520   001413 631400 0                  EPPR1   s:332+2
         0 000521   000000 701000 xent               TSX1    doprocs
         0 000522   000000 236007                    LDQ     0,DL

      206       206    1           
      207       207    1               if (qhdrflg)  /* display the qhdr if mess was specified too */  

    207  0 000523   000000 234000 xsym               SZN     qhdrflg
         0 000524   000533 600000 0                  TZE     s:210

      208       208    1                       qdata(&qhdr);  

    208  0 000525   001430 236000 0                  LDQ     s:332+15
         0 000526   200014 756100                    STQ     argv+7,,AUTO
         0 000527   200014 630500                    EPPR0   argv+7,,AUTO
         0 000530   001414 631400 0                  EPPR1   s:332+3
         0 000531   000000 701000 xent               TSX1    qdata
         0 000532   000000 236007                    LDQ     0,DL

      209       209    1           
      210       210    1               if (dibctx)  

    210  0 000533   000000 234000 xsym               SZN     dibctx
         0 000534   000540 600000 0                  TZE     s:213

      211       211    1                       dodibctx();  

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=60 
    211  0 000535   001413 631400 0                  EPPR1   s:332+2
         0 000536   000000 701000 xent               TSX1    dodibctx
         0 000537   000000 236007                    LDQ     0,DL

      212       212    1           
      213       213    1               if (messaddr)  

    213  0 000540   000000 234000 xsym               SZN     messaddr
         0 000541   000562 600000 0                  TZE     s:218

      214       214    1                       {  
      215       215    2                       messhdr("cq");  

    215  0 000542   001431 236000 0                  LDQ     s:332+16
         0 000543   200014 756100                    STQ     argv+7,,AUTO
         0 000544   200014 630500                    EPPR0   argv+7,,AUTO
         0 000545   001414 631400 0                  EPPR1   s:332+3
         0 000546   000000 701000 xent               TSX1    messhdr
         0 000547   000000 236007                    LDQ     0,DL

      216       216    2                       messdata(dibfd,messaddr,messcnt);  

    216  0 000550   000000 236000 xsym               LDQ     dibfd
         0 000551   200012 756100                    STQ     argv+5,,AUTO
         0 000552   000000 236000 xsym               LDQ     messaddr
         0 000553   200013 756100                    STQ     argv+6,,AUTO
         0 000554   000000 236000 xsym               LDQ     messcnt
         0 000555   200014 756100                    STQ     argv+7,,AUTO
         0 000556   200012 630500                    EPPR0   argv+5,,AUTO
         0 000557   001416 631400 0                  EPPR1   s:332+5
         0 000560   000000 701000 xent               TSX1    messdata
         0 000561   000000 236007                    LDQ     0,DL

      217       217    2                       }  
      218       218    1               if (rawdump)  

    218  0 000562   000000 234000 xsym               SZN     rawdump
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=61 
         0 000563   000576 600000 0                  TZE     s:220

      219       219    1                       rawdumpdata(dibfd,rawaddr,rawbound);  

    219  0 000564   000000 236000 xsym               LDQ     dibfd
         0 000565   200012 756100                    STQ     argv+5,,AUTO
         0 000566   000000 236000 xsym               LDQ     rawaddr
         0 000567   200013 756100                    STQ     argv+6,,AUTO
         0 000570   000000 236000 xsym               LDQ     rawbound
         0 000571   200014 756100                    STQ     argv+7,,AUTO
         0 000572   200012 630500                    EPPR0   argv+5,,AUTO
         0 000573   001416 631400 0                  EPPR1   s:332+5
         0 000574   000000 701000 xent               TSX1    rawdumpdata
         0 000575   000000 236007                    LDQ     0,DL

      220       220    1               if (traceaddr)  

    220  0 000576   000000 234000 xsym               SZN     traceaddr
         0 000577   000610 600000 0                  TZE     s:222

      221       221    1                       tracedump(dibfd,traceaddr);  

    221  0 000600   000000 236000 xsym               LDQ     dibfd
         0 000601   200013 756100                    STQ     argv+6,,AUTO
         0 000602   000000 236000 xsym               LDQ     traceaddr
         0 000603   200014 756100                    STQ     argv+7,,AUTO
         0 000604   200013 630500                    EPPR0   argv+6,,AUTO
         0 000605   001422 631400 0                  EPPR1   s:332+9
         0 000606   000000 701000 xent               TSX1    tracedump
         0 000607   000000 236007                    LDQ     0,DL

      222       222    1               if (interactive)  

    222  0 000610   000000 234000 xsym               SZN     interactive
         0 000611   001411 600000 0                  TZE     s:332

      223       223    1                       {  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=62 
      224       224    2                       setjmp(env);  

    224  0 000612   001432 236000 0                  LDQ     s:332+17
         0 000613   200014 756100                    STQ     argv+7,,AUTO
         0 000614   200014 630500                    EPPR0   argv+7,,AUTO
         0 000615   001414 631400 0                  EPPR1   s:332+3
         0 000616   000000 701000 xent               TSX1    _setjmp
         0 000617   000000 236007                    LDQ     0,DL

      225       225    2                       signal(SIGINT,sigint);  

    225  0 000620   000004 236007                    LDQ     4,DL
         0 000621   200013 756100                    STQ     argv+6,,AUTO
         0 000622   001433 236000 0                  LDQ     s:332+18
         0 000623   200014 756100                    STQ     argv+7,,AUTO
         0 000624   200013 630500                    EPPR0   argv+6,,AUTO
         0 000625   001422 631400 0                  EPPR1   s:332+9
         0 000626   000000 701000 xent               TSX1    signal
         0 000627   000000 236007                    LDQ     0,DL

      226       226    2                       sigsetmask(0);  

    226  0 000630   200014 450100                    STZ     argv+7,,AUTO
         0 000631   200014 630500                    EPPR0   argv+7,,AUTO
         0 000632   001414 631400 0                  EPPR1   s:332+3
         0 000633   000000 701000 xent               TSX1    sigsetmask
         0 000634   000000 236007                    LDQ     0,DL

      227       227    2                       prevop = SPACE;  

    227  0 000635   000000 100400                    MLR     fill='000'O
         0 000636   001434 600001 0                  ADSC9   s:332+19                 cn=3,n=1
         0 000637   000000 000001 xsym               ADSC9   prevop                   cn=0,n=1

      228       228    2                       while (1)  
      229       229    2                               {  
      230       230    3                               printf ("ddu>");  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=63 

    230  0 000640   001435 236000 0                  LDQ     s:332+20
         0 000641   200014 756100                    STQ     argv+7,,AUTO
         0 000642   200014 630500                    EPPR0   argv+7,,AUTO
         0 000643   001414 631400 0                  EPPR1   s:332+3
         0 000644   000000 701000 xent               TSX1    printf
         0 000645   000000 236007                    LDQ     0,DL

      231       231    3                               fflush(stdout);  

    231  0 000646   001436 236000 0                  LDQ     s:332+21
         0 000647   200014 756100                    STQ     argv+7,,AUTO
         0 000650   200014 630500                    EPPR0   argv+7,,AUTO
         0 000651   001414 631400 0                  EPPR1   s:332+3
         0 000652   000000 701000 xent               TSX1    fflush
         0 000653   000000 236007                    LDQ     0,DL

      232       232    3                               if ((i = read (/*fileno(stdin)*/0,readbuf,80)) < 0)  

    232  0 000654   200012 450100                    STZ     argv+5,,AUTO
         0 000655   001437 236000 0                  LDQ     s:332+22
         0 000656   200013 756100                    STQ     argv+6,,AUTO
         0 000657   000120 236007                    LDQ     80,DL
         0 000660   200014 756100                    STQ     argv+7,,AUTO
         0 000661   200012 630500                    EPPR0   argv+5,,AUTO
         0 000662   001416 631400 0                  EPPR1   s:332+5
         0 000663   000000 701000 xent               TSX1    read
         0 000664   000000 236007                    LDQ     0,DL
         0 000665   000000 756000 xsym               STQ     i
         0 000666   000000 234000 xsym               SZN     i
         0 000667   000704 605000 0                  TPL     s:237

      233       233    3                                        {  
      234       234    4                                       perror ("ddu: read error");  

    234  0 000670   001440 236000 0                  LDQ     s:332+23
         0 000671   200014 756100                    STQ     argv+7,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=64 
         0 000672   200014 630500                    EPPR0   argv+7,,AUTO
         0 000673   001414 631400 0                  EPPR1   s:332+3
         0 000674   000000 701000 xent               TSX1    perror
         0 000675   000000 236007                    LDQ     0,DL

      235       235    4                                       exit(EXIT_FAILURE);  

    235  0 000676   000007 236007                    LDQ     7,DL
         0 000677   200014 756100                    STQ     argv+7,,AUTO
         0 000700   200014 630500                    EPPR0   argv+7,,AUTO
         0 000701   001414 631400 0                  EPPR1   s:332+3
         0 000702   000000 701000 xent               TSX1    exit
         0 000703   000000 236007                    LDQ     0,DL

      236       236    4                                       }  
      237       237    3                               readbuf[i-1] = 0;  

    237  0 000704   000000 236000 xsym               LDQ     i
         0 000705   000001 136007                    SBLQ    1,DL
         0 000706   000006 100400                    MLR     fill='000'O
         0 000707   001413 600001 0                  ADSC9   s:332+2                  cn=3,n=1
         0 000710   000000 000001 xsym               ADSC9   readbuf,Q                cn=0,n=1

      238       238    3                               op = readbuf[0];  

    238  0 000711   000000 100400                    MLR     fill='000'O
         0 000712   000000 000001 xsym               ADSC9   readbuf                  cn=0,n=1
         0 000713   000000 000001 xsym               ADSC9   op                       cn=0,n=1

      239       239    3                            while (readbuf[1]==' ') memcpy(readbuf+1,readbuf+2,--i)  

    239  0 000714   000000 236000 xsym               LDQ     readbuf
         0 000715   000022 772000                    QRL     18
         0 000716   000777 376007                    ANQ     511,DL
         0 000717   000040 116007                    CMPQ    32,DL
         0 000720   000733 601000 0                  TNZ     s:240

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=65 
    239  0 000721   000001 336007                    LCQ     1,DL
         0 000722   000000 056000 xsym               ASQ     i
         0 000723   000000 633400 xsym               EPPR3   readbuf
         0 000724   000001 720007                    LXL0    1,DL
         0 000725   300000 500510                    A9BD    0,X0,PR3
         0 000726   000000 236000 xsym               LDQ     i
         0 000727   000140 100440                    MLR     fill='000'O
         0 000730   000000 400006 xsym               ADSC9   readbuf                  cn=2,n=*Q
         0 000731   300000 000006                    ADSC9   0,,PR3                   cn=0,n=*Q
         0 000732   000714 710000 0                  TRA     s:239

      240       240    3                               if (op == '.')  

    240  0 000733   000000 236000 xsym               LDQ     op
         0 000734   000033 772000                    QRL     27
         0 000735   000056 116007                    CMPQ    46,DL
         0 000736   000751 601000 0                  TNZ     s:248

      241       241    3                                       {  
      242       242    4                                       op = prevop;  

    242  0 000737   000000 100400                    MLR     fill='000'O
         0 000740   000000 000001 xsym               ADSC9   prevop                   cn=0,n=1
         0 000741   000000 000001 xsym               ADSC9   op                       cn=0,n=1

      243       243    4                                       memcpy(readbuf,savebuf,sizeof(readbuf));  

    243  0 000742   000000 633400 xsym               EPPR3   readbuf
         0 000743   000100 100400                    MLR     fill='000'O
         0 000744   000000 000120 xsym               ADSC9   savebuf                  cn=0,n=80
         0 000745   300000 000120                    ADSC9   0,,PR3                   cn=0,n=80

      244       244    4                                       i = savebufsiz;  

    244  0 000746   000000 236000 xsym               LDQ     savebufsiz
         0 000747   000000 756000 xsym               STQ     i
         0 000750   000762 710000 0                  TRA     s:252
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=66 

      245       245    4                                       }  
      246       246    3                               else  
      247       247    3                                       {  
      248       248    4                                       prevop = op;  

    248  0 000751   000000 100400                    MLR     fill='000'O
         0 000752   000000 000001 xsym               ADSC9   op                       cn=0,n=1
         0 000753   000000 000001 xsym               ADSC9   prevop                   cn=0,n=1

      249       249    4                                       memcpy(savebuf,readbuf,sizeof(readbuf));  

    249  0 000754   000000 633400 xsym               EPPR3   savebuf
         0 000755   000100 100400                    MLR     fill='000'O
         0 000756   000000 000120 xsym               ADSC9   readbuf                  cn=0,n=80
         0 000757   300000 000120                    ADSC9   0,,PR3                   cn=0,n=80

      250       250    4                                       savebufsiz = i;  

    250  0 000760   000000 236000 xsym               LDQ     i
         0 000761   000000 756000 xsym               STQ     savebufsiz

      251       251    4                                       }  
      252       252    3                               switch(op|0x20)  

    252  0 000762   000000 236000 xsym               LDQ     op
         0 000763   000033 772000                    QRL     27
         0 000764   000040 276007                    ORQ     32,DL
         0 000765   200020 756100                    STQ     nargs+3,,AUTO
         0 000766   001364 710000 0                  TRA     s:328+1

      253       253    3                                       {  
      254       254    4                                       case 'a':  
      255       255    4                                               if (dibfd < 0) break;  

    255  0 000767   000000 234000 xsym               SZN     dibfd
         0 000770   000772 605000 0                  TPL     s:256
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=67 

    255  0 000771   000640 710000 0                  TRA     s:230

      256       256    4                                               dodibctx();  

    256  0 000772   001413 631400 0                  EPPR1   s:332+2
         0 000773   000000 701000 xent               TSX1    dodibctx
         0 000774   000000 236007                    LDQ     0,DL

      257       257    4                                               doldcts();  

    257  0 000775   001413 631400 0                  EPPR1   s:332+2
         0 000776   000000 701000 xent               TSX1    doldcts
         0 000777   000000 236007                    LDQ     0,DL

      258       258    4                                               doprocs();  

    258  0 001000   001413 631400 0                  EPPR1   s:332+2
         0 001001   000000 701000 xent               TSX1    doprocs
         0 001002   000000 236007                    LDQ     0,DL

      259       259    4                                               getqhdr();  

    259  0 001003   001413 631400 0                  EPPR1   s:332+2
         0 001004   000000 701000 xent               TSX1    getqhdr
         0 001005   000000 236007                    LDQ     0,DL

      260       260    4                                               qhdrflg = 2;  

    260  0 001006   000002 236007                    LDQ     2,DL
         0 001007   000000 756000 xsym               STQ     qhdrflg

      261       261    4                                               qdata(&qhdr);  

    261  0 001010   001430 236000 0                  LDQ     s:332+15
         0 001011   200011 756100                    STQ     argv+4,,AUTO
         0 001012   200011 630500                    EPPR0   argv+4,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=68 
         0 001013   001414 631400 0                  EPPR1   s:332+3
         0 001014   000000 701000 xent               TSX1    qdata
         0 001015   000000 236007                    LDQ     0,DL

      262       262    4                                               break;  

    262  0 001016   000640 710000 0                  TRA     s:230

      263       263    4                                       case 'c':  
      264       264    4                                               dodibctx();  

    264  0 001017   001413 631400 0                  EPPR1   s:332+2
         0 001020   000000 701000 xent               TSX1    dodibctx
         0 001021   000000 236007                    LDQ     0,DL

      265       265    4                                               break;  

    265  0 001022   000640 710000 0                  TRA     s:230

      266       266    4                                       case 'l':  
      267       267    4                                               actldcts = 1;  

    267  0 001023   000001 236007                    LDQ     1,DL
         0 001024   000000 756000 xsym               STQ     actldcts

      268       268    4                                               doldcts();  

    268  0 001025   001413 631400 0                  EPPR1   s:332+2
         0 001026   000000 701000 xent               TSX1    doldcts
         0 001027   000000 236007                    LDQ     0,DL

      269       269    4                                               actldcts = 0;  

    269  0 001030   000000 450000 xsym               STZ     actldcts

      270       270    4                                               break;  

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=69 
    270  0 001031   000640 710000 0                  TRA     s:230

      271       271    4                                       case 's':  
      272       272    4                                               actldcts = 1;  

    272  0 001032   000001 236007                    LDQ     1,DL
         0 001033   000000 756000 xsym               STQ     actldcts

      273       273    4                                               fulldct = 1;  

    273  0 001034   000001 236007                    LDQ     1,DL
         0 001035   000000 756000 xsym               STQ     fulldct

      274       274    4                                               doldcts();  

    274  0 001036   001413 631400 0                  EPPR1   s:332+2
         0 001037   000000 701000 xent               TSX1    doldcts
         0 001040   000000 236007                    LDQ     0,DL

      275       275    4                                               actldcts = fulldct = 0;  

    275  0 001041   000000 450000 xsym               STZ     fulldct
         0 001042   000000 236000 xsym               LDQ     fulldct
         0 001043   000000 756000 xsym               STQ     actldcts

      276       276    4                                               break;  

    276  0 001044   000640 710000 0                  TRA     s:230

      277       277    4                                       case 'p':  
      278       278    4                                               doprocs();  

    278  0 001045   001413 631400 0                  EPPR1   s:332+2
         0 001046   000000 701000 xent               TSX1    doprocs
         0 001047   000000 236007                    LDQ     0,DL

      279       279    4                                               break;  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=70 

    279  0 001050   000640 710000 0                  TRA     s:230

      280       280    4                                       case 'f':  
      281       281    4                                               fileopt(i);  

    281  0 001051   000000 236000 xsym               LDQ     i
         0 001052   200011 756100                    STQ     argv+4,,AUTO
         0 001053   200011 630500                    EPPR0   argv+4,,AUTO
         0 001054   001414 631400 0                  EPPR1   s:332+3
         0 001055   000000 701000 xent               TSX1    fileopt
         0 001056   000000 236007                    LDQ     0,DL

      282       282    4                                               break;  

    282  0 001057   000640 710000 0                  TRA     s:230

      283       283    4                                       case 'h':  
      284       284    4                                               if (getqhdr() < 0) break;  

    284  0 001060   001413 631400 0                  EPPR1   s:332+2
         0 001061   000000 701000 xent               TSX1    getqhdr
         0 001062   000000 236007                    LDQ     0,DL
         0 001063   200021 756100                    STQ     nargs+4,,AUTO
         0 001064   200021 234100                    SZN     nargs+4,,AUTO
         0 001065   001067 605000 0                  TPL     s:285

    284  0 001066   000640 710000 0                  TRA     s:230

      285       285    4                                               qhdrflg = 4-op/32;  

    285  0 001067   000000 236000 xsym               LDQ     op
         0 001070   000033 772000                    QRL     27
         0 001071   000040 506007                    DIV     32,DL
         0 001072   000000 533000                    NEGL    0
         0 001073   000004 076007                    ADQ     4,DL
         0 001074   000000 756000 xsym               STQ     qhdrflg
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=71 

      286       286    4                                               qdata(&qhdr);  

    286  0 001075   001430 236000 0                  LDQ     s:332+15
         0 001076   200011 756100                    STQ     argv+4,,AUTO
         0 001077   200011 630500                    EPPR0   argv+4,,AUTO
         0 001100   001414 631400 0                  EPPR1   s:332+3
         0 001101   000000 701000 xent               TSX1    qdata
         0 001102   000000 236007                    LDQ     0,DL

      287       287    4                                               break;  

    287  0 001103   000640 710000 0                  TRA     s:230

      288       288    4                                       case 'm':  
      289       289    4                                               if (i==2) {  

    289  0 001104   000000 236000 xsym               LDQ     i
         0 001105   000002 116007                    CMPQ    2,DL
         0 001106   001125 601000 0                  TNZ     s:294

      290       290    5                                                        if (getqhdr() < 0) break;  

    290  0 001107   001413 631400 0                  EPPR1   s:332+2
         0 001110   000000 701000 xent               TSX1    getqhdr
         0 001111   000000 236007                    LDQ     0,DL
         0 001112   200022 756100                    STQ     nargs+5,,AUTO
         0 001113   200022 234100                    SZN     nargs+5,,AUTO
         0 001114   001116 605000 0                  TPL     s:291

    290  0 001115   000640 710000 0                  TRA     s:230

      291       291    5                                                        qdata(&qhdr);  

    291  0 001116   001430 236000 0                  LDQ     s:332+15
         0 001117   200011 756100                    STQ     argv+4,,AUTO
         0 001120   200011 630500                    EPPR0   argv+4,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=72 
         0 001121   001414 631400 0                  EPPR1   s:332+3
         0 001122   000000 701000 xent               TSX1    qdata
         0 001123   000000 236007                    LDQ     0,DL

      292       292    5                                                        break;  

    292  0 001124   000640 710000 0                  TRA     s:230

      293       293    5                                                        }  
      294       294    4                                               messc = strtok(&readbuf[1],",");  

    294  0 001125   001441 236000 0                  LDQ     s:332+24
         0 001126   200010 756100                    STQ     argv+3,,AUTO
         0 001127   001421 236000 0                  LDQ     s:332+8
         0 001130   200011 756100                    STQ     argv+4,,AUTO
         0 001131   200010 630500                    EPPR0   argv+3,,AUTO
         0 001132   001422 631400 0                  EPPR1   s:332+9
         0 001133   000000 701000 xent               TSX1    strtok
         0 001134   000000 236007                    LDQ     0,DL
         0 001135   000000 756000 xsym               STQ     messc

      295       295    4                                               messaddr = strtol(messc,&strolp,16);  

    295  0 001136   000000 236000 xsym               LDQ     messc
         0 001137   200007 756100                    STQ     argv+2,,AUTO
         0 001140   001423 236000 0                  LDQ     s:332+10
         0 001141   200010 756100                    STQ     argv+3,,AUTO
         0 001142   000020 236007                    LDQ     16,DL
         0 001143   200011 756100                    STQ     argv+4,,AUTO
         0 001144   200007 630500                    EPPR0   argv+2,,AUTO
         0 001145   001416 631400 0                  EPPR1   s:332+5
         0 001146   000000 701000 xent               TSX1    strtol
         0 001147   000000 236007                    LDQ     0,DL
         0 001150   000000 756000 xsym               STQ     messaddr

      296       296    4                                               messc = strtok((char *)0," ");  

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=73 
    296  0 001151   006014 236007                    LDQ     3084,DL
         0 001152   200010 756100                    STQ     argv+3,,AUTO
         0 001153   001424 236000 0                  LDQ     s:332+11
         0 001154   200011 756100                    STQ     argv+4,,AUTO
         0 001155   200010 630500                    EPPR0   argv+3,,AUTO
         0 001156   001422 631400 0                  EPPR1   s:332+9
         0 001157   000000 701000 xent               TSX1    strtok
         0 001160   000000 236007                    LDQ     0,DL
         0 001161   000000 756000 xsym               STQ     messc

      297       297    4                                            if (messc) messcnt = strtol(messc,&stro  

    297  0 001162   000000 236000 xsym               LDQ     messc
         0 001163   006014 116007                    CMPQ    3084,DL
         0 001164   001200 600000 0                  TZE     s:298

    297  0 001165   000000 236000 xsym               LDQ     messc
         0 001166   200007 756100                    STQ     argv+2,,AUTO
         0 001167   001423 236000 0                  LDQ     s:332+10
         0 001170   200010 756100                    STQ     argv+3,,AUTO
         0 001171   000020 236007                    LDQ     16,DL
         0 001172   200011 756100                    STQ     argv+4,,AUTO
         0 001173   200007 630500                    EPPR0   argv+2,,AUTO
         0 001174   001416 631400 0                  EPPR1   s:332+5
         0 001175   000000 701000 xent               TSX1    strtol
         0 001176   000000 236007                    LDQ     0,DL
         0 001177   000000 756000 xsym               STQ     messcnt

      298       298    4                                               messhdr("cq");  

    298  0 001200   001431 236000 0                  LDQ     s:332+16
         0 001201   200011 756100                    STQ     argv+4,,AUTO
         0 001202   200011 630500                    EPPR0   argv+4,,AUTO
         0 001203   001414 631400 0                  EPPR1   s:332+3
         0 001204   000000 701000 xent               TSX1    messhdr
         0 001205   000000 236007                    LDQ     0,DL

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=74 
      299       299    4                                               messdata(dibfd,messaddr,messcnt);  

    299  0 001206   000000 236000 xsym               LDQ     dibfd
         0 001207   200007 756100                    STQ     argv+2,,AUTO
         0 001210   000000 236000 xsym               LDQ     messaddr
         0 001211   200010 756100                    STQ     argv+3,,AUTO
         0 001212   000000 236000 xsym               LDQ     messcnt
         0 001213   200011 756100                    STQ     argv+4,,AUTO
         0 001214   200007 630500                    EPPR0   argv+2,,AUTO
         0 001215   001416 631400 0                  EPPR1   s:332+5
         0 001216   000000 701000 xent               TSX1    messdata
         0 001217   000000 236007                    LDQ     0,DL

      300       300    4                                               break;  

    300  0 001220   000640 710000 0                  TRA     s:230

      301       301    4                                       case 't':  
      302       302    4                                            traceaddr = strtol(&readbuf[1],&strolp,  

    302  0 001221   001441 236000 0                  LDQ     s:332+24
         0 001222   200007 756100                    STQ     argv+2,,AUTO
         0 001223   001423 236000 0                  LDQ     s:332+10
         0 001224   200010 756100                    STQ     argv+3,,AUTO
         0 001225   000020 236007                    LDQ     16,DL
         0 001226   200011 756100                    STQ     argv+4,,AUTO
         0 001227   200007 630500                    EPPR0   argv+2,,AUTO
         0 001230   001416 631400 0                  EPPR1   s:332+5
         0 001231   000000 701000 xent               TSX1    strtol
         0 001232   000000 236007                    LDQ     0,DL
         0 001233   000000 756000 xsym               STQ     traceaddr

      303       303    4                                               tracedump(dibfd,traceaddr);  

    303  0 001234   000000 236000 xsym               LDQ     dibfd
         0 001235   200010 756100                    STQ     argv+3,,AUTO
         0 001236   000000 236000 xsym               LDQ     traceaddr
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=75 
         0 001237   200011 756100                    STQ     argv+4,,AUTO
         0 001240   200010 630500                    EPPR0   argv+3,,AUTO
         0 001241   001422 631400 0                  EPPR1   s:332+9
         0 001242   000000 701000 xent               TSX1    tracedump
         0 001243   000000 236007                    LDQ     0,DL

      304       304    4                                               break;  

    304  0 001244   000640 710000 0                  TRA     s:230

      305       305    4                                       case 'd':  
      306       306    4                                               messc = strtok(&readbuf[1],",");  

    306  0 001245   001441 236000 0                  LDQ     s:332+24
         0 001246   200010 756100                    STQ     argv+3,,AUTO
         0 001247   001421 236000 0                  LDQ     s:332+8
         0 001250   200011 756100                    STQ     argv+4,,AUTO
         0 001251   200010 630500                    EPPR0   argv+3,,AUTO
         0 001252   001422 631400 0                  EPPR1   s:332+9
         0 001253   000000 701000 xent               TSX1    strtok
         0 001254   000000 236007                    LDQ     0,DL
         0 001255   000000 756000 xsym               STQ     messc

      307       307    4                                            rawaddr = strtol(&readbuf[1],&strolp,16  

    307  0 001256   001441 236000 0                  LDQ     s:332+24
         0 001257   200007 756100                    STQ     argv+2,,AUTO
         0 001260   001423 236000 0                  LDQ     s:332+10
         0 001261   200010 756100                    STQ     argv+3,,AUTO
         0 001262   000020 236007                    LDQ     16,DL
         0 001263   200011 756100                    STQ     argv+4,,AUTO
         0 001264   200007 630500                    EPPR0   argv+2,,AUTO
         0 001265   001416 631400 0                  EPPR1   s:332+5
         0 001266   000000 701000 xent               TSX1    strtol
         0 001267   000000 236007                    LDQ     0,DL
         0 001270   000000 756000 xsym               STQ     rawaddr

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=76 
      308       308    4                                               messc = strtok((char *)0," ");  

    308  0 001271   006014 236007                    LDQ     3084,DL
         0 001272   200010 756100                    STQ     argv+3,,AUTO
         0 001273   001424 236000 0                  LDQ     s:332+11
         0 001274   200011 756100                    STQ     argv+4,,AUTO
         0 001275   200010 630500                    EPPR0   argv+3,,AUTO
         0 001276   001422 631400 0                  EPPR1   s:332+9
         0 001277   000000 701000 xent               TSX1    strtok
         0 001300   000000 236007                    LDQ     0,DL
         0 001301   000000 756000 xsym               STQ     messc

      309       309    4                                            if (messc) rawbound = strtol(messc,&str  

    309  0 001302   000000 236000 xsym               LDQ     messc
         0 001303   006014 116007                    CMPQ    3084,DL
         0 001304   001320 600000 0                  TZE     s:310

    309  0 001305   000000 236000 xsym               LDQ     messc
         0 001306   200007 756100                    STQ     argv+2,,AUTO
         0 001307   001423 236000 0                  LDQ     s:332+10
         0 001310   200010 756100                    STQ     argv+3,,AUTO
         0 001311   000020 236007                    LDQ     16,DL
         0 001312   200011 756100                    STQ     argv+4,,AUTO
         0 001313   200007 630500                    EPPR0   argv+2,,AUTO
         0 001314   001416 631400 0                  EPPR1   s:332+5
         0 001315   000000 701000 xent               TSX1    strtol
         0 001316   000000 236007                    LDQ     0,DL
         0 001317   000000 756000 xsym               STQ     rawbound

      310       310    4                                               rawdumpdata(dibfd,rawaddr,rawbound);  

    310  0 001320   000000 236000 xsym               LDQ     dibfd
         0 001321   200007 756100                    STQ     argv+2,,AUTO
         0 001322   000000 236000 xsym               LDQ     rawaddr
         0 001323   200010 756100                    STQ     argv+3,,AUTO
         0 001324   000000 236000 xsym               LDQ     rawbound
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=77 
         0 001325   200011 756100                    STQ     argv+4,,AUTO
         0 001326   200007 630500                    EPPR0   argv+2,,AUTO
         0 001327   001416 631400 0                  EPPR1   s:332+5
         0 001330   000000 701000 xent               TSX1    rawdumpdata
         0 001331   000000 236007                    LDQ     0,DL

      311       311    4                                               break;  

    311  0 001332   000640 710000 0                  TRA     s:230

      312       312    4                                       case 'q':  
      313       313    4                                       case 'x':  
      314       314    4                                       case 'e':  
      315       315    4                                               exit(EXIT_SUCCESS);  

    315  0 001333   200011 450100                    STZ     argv+4,,AUTO
         0 001334   200011 630500                    EPPR0   argv+4,,AUTO
         0 001335   001414 631400 0                  EPPR1   s:332+3
         0 001336   000000 701000 xent               TSX1    exit
         0 001337   000000 236007                    LDQ     0,DL

      316       316    4                                               break;  

    316  0 001340   000640 710000 0                  TRA     s:230

      317       317    4                                       case '?':  
      318       318    4                                               options1();  

    318  0 001341   001413 631400 0                  EPPR1   s:332+2
         0 001342   000000 701000 xent               TSX1    options1
         0 001343   000000 236007                    LDQ     0,DL

      319       319    4                                               break;  

    319  0 001344   000640 710000 0                  TRA     s:230

      320       320    4                                       case '!':  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=78 
      321       321    4                                               system(readbuf+1);  

    321  0 001345   001441 236000 0                  LDQ     s:332+24
         0 001346   200011 756100                    STQ     argv+4,,AUTO
         0 001347   200011 630500                    EPPR0   argv+4,,AUTO
         0 001350   001414 631400 0                  EPPR1   s:332+3
         0 001351   000000 701000 xent               TSX1    system
         0 001352   000000 236007                    LDQ     0,DL

      322       322    4                                               break;  

    322  0 001353   000640 710000 0                  TRA     s:230

      323       323    4                                       case 0:  
      324       324    4                                       case ' ':  
      325       325    4                                               break;  

    325  0 001354   000640 710000 0                  TRA     s:230

      326       326    4                                       default:  
      327       327    4                                            printf("ddu: unknown command - type ?\n  

    327  0 001355   001442 236000 0                  LDQ     s:332+25
         0 001356   200011 756100                    STQ     argv+4,,AUTO
         0 001357   200011 630500                    EPPR0   argv+4,,AUTO
         0 001360   001414 631400 0                  EPPR1   s:332+3
         0 001361   000000 701000 xent               TSX1    printf
         0 001362   000000 236007                    LDQ     0,DL

      328       328    4                                               break;  

    328  0 001363   000640 710000 0                  TRA     s:230
         0 001364   200020 235100                    LDA     nargs+3,,AUTO
         0 001365   001425 236000 0                  LDQ     s:332+12
         0 001366   200023 756100                    STQ     nargs+6,,AUTO
         0 001367   000061 236000 2                  LDQ     49
         0 001370   000001 736000                    QLS     1
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=79 
         0 001371   200024 756100                    STQ     nargs+7,,AUTO
         0 001372   200023 036100                    ADLQ    nargs+6,,AUTO
         0 001373   000001 732000                    QRS     1
         0 001374   001425 376000 0                  ANQ     s:332+12
         0 001375   200023 116100                    CMPQ    nargs+6,,AUTO
         0 001376   000011 600004                    TZE     s:328+20,IC
         0 001377   000062 115006 2                  CMPA    50,QL
         0 001400   777771 604004                    TMI     s:328+6,IC
         0 001401   000003 605404                    TPNZ    s:328+17,IC
         0 001402   000063 235006 2                  LDA     51,QL
         0 001403   000000 710001                    TRA     0,AU
         0 001404   200023 756100                    STQ     nargs+6,,AUTO
         0 001405   200024 036100                    ADLQ    nargs+7,,AUTO
         0 001406   777765 710004                    TRA     s:328+8,IC
         0 001407   000060 235000 2                  LDA     48
         0 001410   000000 710001                    TRA     0,AU

      329       329    4                                       }  
      330       330    3                               }  
      331       331    2                       }  
      332       332    1        }  

    332  0 001411   000000 236007                    LDQ     0,DL
         0 001412   000000 702000 xent               TSX2    _XBI_MARET
         0 001413   000000 000000                    ZERO    0,0
         0 001414   000001 000000                    ZERO    1,0
         0 001415   002272 000000 xsym               ZERO    sigint#c+1210,0
         0 001416   000003 000000                    ZERO    3,0
         0 001417   777777 777777                    ZERO    -1,-1
         0 001420   001760 000000 xsym               ZERO    sigint#c+1008,0
         0 001421   002520 000000 xsym               ZERO    sigint#c+1360,0
         0 001422   000002 000000                    ZERO    2,0
         0 001423   000000 000000 xsym               ZERO    strolp0,0
         0 001424   002517 000000 xsym               ZERO    sigint#c+1359,0
         0 001425   777777 777776                    ZERO    -1,-2
         0 001426   000146 000000 xsym               ZERO    sigint#s+102,0
         0 001427   000000 000000 xsym               ZERO    ipc0,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=80 
         0 001430   000000 000000 xsym               ZERO    qhdr0,0
         0 001431   002516 000000 xsym               ZERO    sigint#c+1358,0
         0 001432   000000 000000 xsym               ZERO    env0,0
         0 001433   000000 000000 xent               ZERO    sigint0,0
         0 001434   000000 000040                    ZERO    0,32
         0 001435   002511 000000 xsym               ZERO    sigint#c+1353,0
         0 001436   000060 000000 xsym               ZERO    _iostd+48,0
         0 001437   000000 000000 xsym               ZERO    readbuf0,0
         0 001440   002266 000000 xsym               ZERO    sigint#c+1206,0
         0 001441   000000 200000 xsym               CNAX0   readbuf
         0 001442   002256 000000 xsym               ZERO    sigint#c+1198,0

(unnamed)
 Sect OctLoc
   2     000   000376 006000   000000 000027   000000 000077   000376 006000    ...........?....
   2     004   000000 000101   000077 006000   000000 000103   000110 006000    ...A.?.....C.H..
   2     010   000000 000104   000315 006000   000000 000106   000121 006000    ...D.......F.Q..
   2     014   000000 000110   000211 006000   000000 000111   000116 006000    ...H.......I.N..
   2     020   000000 000114   000113 006000   000000 000115   000214 006000    ...L.K.....M....
   2     024   000000 000120   000373 006000   000000 000123   000204 006000    ...P.......S....
   2     030   000000 000124   000275 006000   000000 000141   000077 006000    ...T.......a.?..
   2     034   000000 000143   000110 006000   000000 000144   000315 006000    ...c.H.....d....
   2     040   000000 000146   000121 006000   000000 000150   000212 006000    ...f.Q.....h....
   2     044   000000 000151   000116 006000   000000 000154   000113 006000    ...i.N.....l.K..
   2     050   000000 000155   000214 006000   000000 000160   000373 006000    ...m.......p....
   2     054   000000 000163   000204 006000   000000 000164   000275 006000    ...s.......t....
   2     060   001355 006000   000000 000021   000000 000000   001354 006000    ................
   2     064   000000 000040   001354 006000   000000 000041   001345 006000    ... .......!....
   2     070   000000 000077   001341 006000   000000 000141   000767 006000    ...?.......a....
   2     074   000000 000143   001017 006000   000000 000144   001245 006000    ...c.......d....
   2     100   000000 000145   001333 006000   000000 000146   001051 006000    ...e.......f.)..
   2     104   000000 000150   001060 006000   000000 000154   001023 006000    ...h.0.....l....
   2     110   000000 000155   001104 006000   000000 000160   001045 006000    ...m.D.....p.%..
   2     114   000000 000161   001333 006000   000000 000163   001032 006000    ...q.......s....
   2     120   000000 000164   001221 006000   000000 000170   001333 006000    ...t.......x....
   2     124   0***** ******                                                    ....
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=81 

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0    94-   332    164   470     0      0  y        0   1 main
                                  0      4    y      0     main#main
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=82 

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

    54 Assign    48 Call      23 If         2 DoWhil     2 DoCase    32 Exit
     1 Initlz     1 Proc       1 EndPrc

 # major stmts=  129 Code/major= 6.23 # stmts=  164 Code/stmt= 4.90  Point total=101.0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=83 

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr              4-0-0/w SBIN        r,m   1 argc
     5-0-0/w PTR         r,m   1 argv                      15-0-0/w SBIN        r,m   1 nargs

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=84 

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=85 

 Object Unit name= fileopt                                    File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:13:35.60 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero    54     66  fileopt
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  fileopt

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_1
                       Std       0 printf
         yes           Std       3 strncpy
                       Std       0 dibopen
                       Std       0 getipc
                       Std       0 ipcdata
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=86 

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=87 


      334       335                
      335       336             fileopt(i)  
      336       337             int i;  

    337  0 000000   000000 700000 xent  fileopt      TSX0    _XBC_AUTO_1
         0 000001   000022 000001                    ZERO    18,1

      337       338             {  
      338       339    1               if (--i > sizeof(path))  

    339  0 000002   000001 336007                    LCQ     1,DL
         0 000003   200004 056100                    ASQ     i,,AUTO
         0 000004   200004 236100                    LDQ     i,,AUTO
         0 000005   000100 116007                    CMPQ    64,DL
         0 000006   000020 604400 0                  TMOZ    s:343

      339       340    1                       printf("error on f option. path %s is too long.",readbuf+1);  

    340  0 000007   000055 236000 0                  LDQ     s:347+7
         0 000010   200010 756100                    STQ     i+4,,AUTO
         0 000011   000056 236000 0                  LDQ     s:347+8
         0 000012   200011 756100                    STQ     i+5,,AUTO
         0 000013   200010 630500                    EPPR0   i+4,,AUTO
         0 000014   000057 631400 0                  EPPR1   s:347+9
         0 000015   000000 701000 xent               TSX1    printf
         0 000016   000000 236007                    LDQ     0,DL
         0 000017   000054 710000 0                  TRA     s:347+6

      340       341    1               else  
      341       342    1                       {  
      342       343    2                       strncpy(path,readbuf+1,i);  

    343  0 000020   000060 236000 0                  LDQ     s:347+10
         0 000021   200007 756100                    STQ     i+3,,AUTO
         0 000022   000056 236000 0                  LDQ     s:347+8
         0 000023   200010 756100                    STQ     i+4,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=88 
         0 000024   200004 236100                    LDQ     i,,AUTO
         0 000025   200011 756100                    STQ     i+5,,AUTO
         0 000026   200007 630500                    EPPR0   i+3,,AUTO
         0 000027   000061 631400 0                  EPPR1   s:347+11
         0 000030   000000 701000 xent               TSX1    strncpy
         0 000031   000000 236007                    LDQ     0,DL

      343       344    2                       if ((dibfd= dibopen(path)) >= 0)  

    344  0 000032   000060 236000 0                  LDQ     s:347+10
         0 000033   200011 756100                    STQ     i+5,,AUTO
         0 000034   200011 630500                    EPPR0   i+5,,AUTO
         0 000035   000062 631400 0                  EPPR1   s:347+12
         0 000036   000000 701000 xent               TSX1    dibopen
         0 000037   000000 236007                    LDQ     0,DL
         0 000040   000000 756000 xsym               STQ     dibfd
         0 000041   000000 234000 xsym               SZN     dibfd
         0 000042   000054 604000 0                  TMI     s:347+6

      344       345    2                               {  
      345       346    3                               getipc();  

    346  0 000043   000063 631400 0                  EPPR1   s:347+13
         0 000044   000000 701000 xent               TSX1    getipc
         0 000045   000000 236007                    LDQ     0,DL

      346       347    3                               ipcdata(&ipc);  

    347  0 000046   000064 236000 0                  LDQ     s:347+14
         0 000047   200011 756100                    STQ     i+5,,AUTO
         0 000050   200011 630500                    EPPR0   i+5,,AUTO
         0 000051   000062 631400 0                  EPPR1   s:347+12
         0 000052   000000 701000 xent               TSX1    ipcdata
         0 000053   000000 236007                    LDQ     0,DL
         0 000054   000000 702000 xent               TSX2    _XBC_FARET
         0 000055   001746 000000 xsym               ZERO    sigint#c+998,0
         0 000056   000000 200000 xsym               CNAX0   readbuf
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=89 
         0 000057   000002 000000                    ZERO    2,0
         0 000060   000146 000000 xsym               ZERO    sigint#s+102,0
         0 000061   000003 000000                    ZERO    3,0
         0 000062   000001 000000                    ZERO    1,0
         0 000063   000000 000000                    ZERO    0,0
         0 000064   000000 000000 xsym               ZERO    ipc0,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=90 

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0   337-   350      7   467     0      0  y        0   1 fileopt
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=91 

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     4 Call       2 If         1 Proc

 # major stmts=    6 Code/major= 9.00 # stmts=    7 Code/stmt= 7.71  Point total= 88.4
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=92 

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr              4-0-0/w SBIN        r,m   1 i

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 interactive                0-0-0/c STRC(432)   r,m   1 ipc
     0-0-0/w SBIN        r,m   1 kmemfd                     0-0-0/w SBIN        r,m   1 ldctaddr
     0-0-0/w SBIN        r,m   1 ldctcnt                    0-0-0/w SBIN        r,m   1 ldctsave
     0-0-0/w SBIN        r,m   1 messaddr                   0-0-0/w PTR         r,m   1 messc
     0-0-0/w SBIN        r,m   1 messcnt                   26-0-0/c CHAR        r,m   1 op
     0-0-0/w PTR         r,m   1 optarg                   146-0-0/c CHAR        r,m   1 path(0:63)
     0-0-0/c CHAR        r,m   1 prevop                     0-0-0/w SBIN        r,m   1 procflg
     1-0-0/c STRC(1116)  r,m   1 qhdr                       0-0-0/w SBIN        r,m   1 qhdrflg
     0-0-0/w SBIN        r,m   1 rawaddr                    0-0-0/w SBIN        r,m   1 rawbound
     0-0-0/w SBIN        r,m   1 rawdump                    0-0-0/c CHAR        r,m   1 readbuf(0:79)
     0-0-0/c CHAR        r,m   1 savebuf(0:79)              0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=93 
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=94 

 Object Unit name= ldcthdr                                    File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:13:41.68 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero    40     50  ldcthdr
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  ldcthdr

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_0
                       Std       0 printf
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=95 

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=96 


      348       349    2                       }  
      349       350    1               }  
      350       351                
      351       353                
      352       355                
      353       356             /*  
      354       357              *             ldcthdr - part 1 of 3 of the ldct display.  
      355       358              *                     header only.  
      356       359              */  
      357       360                
      358       361             ldcthdr()  
      359       362                
      360       363             {  

    363  0 000000   000000 700000 xent  ldcthdr      TSX0    _XBC_AUTO_0
         0 000001   000016 000000                    ZERO    14,0

      361       364    1        printf("\n");  

    364  0 000002   000041 236000 0                  LDQ     s:368+7
         0 000003   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000004   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000005   000042 631400 0                  EPPR1   s:368+8
         0 000006   000000 701000 xent               TSX1    printf
         0 000007   000000 236007                    LDQ     0,DL

      362       365    1        printf("           LDCTS\n");  

    365  0 000010   000043 236000 0                  LDQ     s:368+9
         0 000011   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000012   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000013   000042 631400 0                  EPPR1   s:368+8
         0 000014   000000 701000 xent               TSX1    printf
         0 000015   000000 236007                    LDQ     0,DL

      363       366    1        printf("                   ____rlcid____\n");  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=97 

    366  0 000016   000044 236000 0                  LDQ     s:368+10
         0 000017   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000020   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000021   000042 631400 0                  EPPR1   s:368+8
         0 000022   000000 701000 xent               TSX1    printf
         0 000023   000000 236007                    LDQ     0,DL

      364       367    1        printf("  #  state lck gen node gen ldct    pproc  fd    *fp waitcnt wu\n")  

    367  0 000024   000045 236000 0                  LDQ     s:368+11
         0 000025   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000026   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000027   000042 631400 0                  EPPR1   s:368+8
         0 000030   000000 701000 xent               TSX1    printf
         0 000031   000000 236007                    LDQ     0,DL

      365       368    1        printf("---  ----- --- --- ---- --- ----  ------- -- ------- ------- --\n")  

    368  0 000032   000046 236000 0                  LDQ     s:368+12
         0 000033   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000034   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000035   000042 631400 0                  EPPR1   s:368+8
         0 000036   000000 701000 xent               TSX1    printf
         0 000037   000000 236007                    LDQ     0,DL
         0 000040   000000 702000 xent               TSX2    _XBC_FARET
         0 000041   002515 000000 xsym               ZERO    sigint#c+1357,0
         0 000042   000001 000000                    ZERO    1,0
         0 000043   002251 000000 xsym               ZERO    sigint#c+1193,0
         0 000044   001735 000000 xsym               ZERO    sigint#c+989,0
         0 000045   000355 000000 xsym               ZERO    sigint#c+237,0
         0 000046   000334 000000 xsym               ZERO    sigint#c+220,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=98 

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0   363-   369      6   467     0      0  y        0   1 ldcthdr
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=99 

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     5 Call       1 Proc

 # major stmts=    5 Code/major= 8.00 # stmts=    6 Code/stmt= 6.66  Point total= 87.5
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=100

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=101
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=102

 Object Unit name= ldctdata1                                  File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:13:47.24 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero   100    144  ldctdata1
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  ldctdata1

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_1
                       Std       0 pk4
                       Std       0 pk2
                       Std       0 printf
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=103

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=104


      367       370                
      368       371             /*  
      369       372              *             ldctdata1 - part 1 of 3 of the ldct data display.  
      370       373              */  
      371       374                
      372       375             ldctdata1(ldct_)  
      373       376                
      374       377             struct kn_ldct *ldct_;  

    377  0 000000   000000 700000 xent  ldctdata1    TSX0    _XBC_AUTO_1
         0 000001   000036 000001                    ZERO    30,1

      375       378             {  
      376       379    1        static char *state[] = {  
      377       380    2        "Null  ", "OWC ", "Active", "WIAFR ", "WTAFR ", "DTCHD ", "Term ", "WTAFL "  
      378       381    2                "DTWFC "};  
      379       382    1        printf("%3d %5s %#3x %3d  %3d %3d %4d %#8x %3d %#8x     %3d %3d\n",  

    382  0 000002   000140 236000 0                  LDQ     s:382+94
         0 000003   200007 756100                    STQ     ldct_+3,,AUTO
         0 000004   200004 473500                    LDP3    ldct_,,AUTO
         0 000005   300001 236100                    LDQ     1,,PR3
         0 000006   200006 756100                    STQ     ldct_+2,,AUTO
         0 000007   200006 630500                    EPPR0   ldct_+2,,AUTO
         0 000010   000141 631400 0                  EPPR1   s:382+95
         0 000011   000000 701000 xent               TSX1    pk4
         0 000012   000000 236007                    LDQ     0,DL
         0 000013   200010 756100                    STQ     ldct_+4,,AUTO
         0 000014   200004 473500                    LDP3    ldct_,,AUTO
         0 000015   000100 100500                    MLR     fill='000'O
         0 000016   300000 000001                    ADSC9   0,,PR3                   cn=0,n=1
         0 000017   200024 600001                    ADSC9   ldct_+16,,AUTO           cn=3,n=1
         0 000020   200024 236100                    LDQ     ldct_+16,,AUTO
         0 000021   000777 376007                    ANQ     511,DL
         0 000022   000000 622006                    EAX2    0,QL
         0 000023   000000 236012 xsym               LDQ     sigint#s,X2
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=105
         0 000024   200011 756100                    STQ     ldct_+5,,AUTO
         0 000025   000100 100500                    MLR     fill='000'O
         0 000026   300000 200001                    ADSC9   0,,PR3                   cn=1,n=1
         0 000027   200024 600001                    ADSC9   ldct_+16,,AUTO           cn=3,n=1
         0 000030   200024 236100                    LDQ     ldct_+16,,AUTO
         0 000031   000777 376007                    ANQ     511,DL
         0 000032   200012 756100                    STQ     ldct_+6,,AUTO
         0 000033   000100 100500                    MLR     fill='000'O
         0 000034   300000 400001                    ADSC9   0,,PR3                   cn=2,n=1
         0 000035   200024 600001                    ADSC9   ldct_+16,,AUTO           cn=3,n=1
         0 000036   200024 236100                    LDQ     ldct_+16,,AUTO
         0 000037   000777 376007                    ANQ     511,DL
         0 000040   000777 376007                    ANQ     511,DL
         0 000041   200013 756100                    STQ     ldct_+7,,AUTO
         0 000042   300002 236100                    LDQ     2,,PR3
         0 000043   000033 772000                    QRL     27
         0 000044   000777 376007                    ANQ     511,DL
         0 000045   200014 756100                    STQ     ldct_+8,,AUTO
         0 000046   300002 236100                    LDQ     2,,PR3
         0 000047   000022 772000                    QRL     18
         0 000050   000777 376007                    ANQ     511,DL
         0 000051   200015 756100                    STQ     ldct_+9,,AUTO
         0 000052   300002 236100                    LDQ     2,,PR3
         0 000053   000000 772000                    QRL     0
         0 000054   777777 376007                    ANQ     -1,DL
         0 000055   200006 756100                    STQ     ldct_+2,,AUTO
         0 000056   200006 630500                    EPPR0   ldct_+2,,AUTO
         0 000057   000141 631400 0                  EPPR1   s:382+95
         0 000060   000000 701000 xent               TSX1    pk2
         0 000061   000000 236007                    LDQ     0,DL
         0 000062   200016 756100                    STQ     ldct_+10,,AUTO
         0 000063   200004 473500                    LDP3    ldct_,,AUTO
         0 000064   300003 236100                    LDQ     3,,PR3
         0 000065   200006 756100                    STQ     ldct_+2,,AUTO
         0 000066   200006 630500                    EPPR0   ldct_+2,,AUTO
         0 000067   000141 631400 0                  EPPR1   s:382+95
         0 000070   000000 701000 xent               TSX1    pk4
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=106
         0 000071   000000 236007                    LDQ     0,DL
         0 000072   200017 756100                    STQ     ldct_+11,,AUTO
         0 000073   200004 473500                    LDP3    ldct_,,AUTO
         0 000074   300004 236100                    LDQ     4,,PR3
         0 000075   200006 756100                    STQ     ldct_+2,,AUTO
         0 000076   200006 630500                    EPPR0   ldct_+2,,AUTO
         0 000077   000141 631400 0                  EPPR1   s:382+95
         0 000100   000000 701000 xent               TSX1    pk4
         0 000101   000000 236007                    LDQ     0,DL
         0 000102   200020 756100                    STQ     ldct_+12,,AUTO
         0 000103   200004 473500                    LDP3    ldct_,,AUTO
         0 000104   300005 236100                    LDQ     5,,PR3
         0 000105   200006 756100                    STQ     ldct_+2,,AUTO
         0 000106   200006 630500                    EPPR0   ldct_+2,,AUTO
         0 000107   000141 631400 0                  EPPR1   s:382+95
         0 000110   000000 701000 xent               TSX1    pk4
         0 000111   000000 236007                    LDQ     0,DL
         0 000112   200021 756100                    STQ     ldct_+13,,AUTO
         0 000113   200004 473500                    LDP3    ldct_,,AUTO
         0 000114   300006 236100                    LDQ     6,,PR3
         0 000115   200006 756100                    STQ     ldct_+2,,AUTO
         0 000116   200006 630500                    EPPR0   ldct_+2,,AUTO
         0 000117   000141 631400 0                  EPPR1   s:382+95
         0 000120   000000 701000 xent               TSX1    pk4
         0 000121   000000 236007                    LDQ     0,DL
         0 000122   200022 756100                    STQ     ldct_+14,,AUTO
         0 000123   200004 473500                    LDP3    ldct_,,AUTO
         0 000124   300007 236100                    LDQ     7,,PR3
         0 000125   200006 756100                    STQ     ldct_+2,,AUTO
         0 000126   200006 630500                    EPPR0   ldct_+2,,AUTO
         0 000127   000141 631400 0                  EPPR1   s:382+95
         0 000130   000000 701000 xent               TSX1    pk4
         0 000131   000000 236007                    LDQ     0,DL
         0 000132   200023 756100                    STQ     ldct_+15,,AUTO
         0 000133   200007 630500                    EPPR0   ldct_+3,,AUTO
         0 000134   000142 631400 0                  EPPR1   s:382+96
         0 000135   000000 701000 xent               TSX1    printf
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=107
         0 000136   000000 236007                    LDQ     0,DL
         0 000137   000000 702000 xent               TSX2    _XBC_FARET
         0 000140   001716 000000 xsym               ZERO    sigint#c+974,0
         0 000141   000001 000000                    ZERO    1,0
         0 000142   000015 000000                    ZERO    13,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=108

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0   377-   396      2   470     0      0  y        0   1 ldctdata1
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=109

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     1 Call       1 Proc

 # major stmts=    1 Code/major=  .00 # stmts=    2 Code/stmt=50.00  Point total= 89.6
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=110

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr              4-0-0/w PTR         r,m   1 ldct_

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 state(0:8)                 0-0-0/w PTR         r,m   1 state(0:8)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=111

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=112

 Object Unit name= ldcthdr2                                   File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:13:52.36 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero    26     32  ldcthdr2
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  ldcthdr2

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_0
                       Std       0 printf
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=113

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=114


      381       384    1               state[(*ldct_).state],  
      382       385    1               (*ldct_).lck,  
      383       386    1               (unsigned char)((*ldct_).generation),  
      384       387    1               (*ldct_).rlcid.node,  
      385       388    1               (unsigned int)((*ldct_).rlcid.generation),  
      386       389    1               pk2((*ldct_).rlcid.ldctx),  
      387       390    1               pk4((*ldct_).procp),  
      388       391    1               pk4((*ldct_).fd),  
      389       392    1               pk4((*ldct_).fp),  
      390       393    1               pk4((*ldct_).wait_count),  
      391       394    1               pk4((*ldct_).wu)  
      392       395    1             );  
      393       396    1        }  
      394       397                
      395       398                
      396       400             /*  
      397       401              *             ldcthdr2 -  
      398       402              */  
      399       403             ldcthdr2()  
      400       404                
      401       405             {  

    405  0 000000   000000 700000 xent  ldcthdr2     TSX0    _XBC_AUTO_0
         0 000001   000016 000000                    ZERO    14,0

      402       406    1        printf("\n");  

    406  0 000002   000025 236000 0                  LDQ     s:408+7
         0 000003   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000004   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000005   000026 631400 0                  EPPR1   s:408+8
         0 000006   000000 701000 xent               TSX1    printf
         0 000007   000000 236007                    LDQ     0,DL

      403       407    1        printf("  # reason rescode   selprc q'd\n");  

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=115
    407  0 000010   000027 236000 0                  LDQ     s:408+9
         0 000011   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000012   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000013   000026 631400 0                  EPPR1   s:408+8
         0 000014   000000 701000 xent               TSX1    printf
         0 000015   000000 236007                    LDQ     0,DL

      404       408    1        printf("--- ------ -------  ------- ---\n");  

    408  0 000016   000030 236000 0                  LDQ     s:408+10
         0 000017   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000020   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000021   000026 631400 0                  EPPR1   s:408+8
         0 000022   000000 701000 xent               TSX1    printf
         0 000023   000000 236007                    LDQ     0,DL
         0 000024   000000 702000 xent               TSX2    _XBC_FARET
         0 000025   002515 000000 xsym               ZERO    sigint#c+1357,0
         0 000026   000001 000000                    ZERO    1,0
         0 000027   001705 000000 xsym               ZERO    sigint#c+965,0
         0 000030   001674 000000 xsym               ZERO    sigint#c+956,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=116

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0   405-   409      4   467     0      0  y        0   1 ldcthdr2
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=117

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     3 Call       1 Proc

 # major stmts=    3 Code/major= 8.66 # stmts=    4 Code/stmt= 6.50  Point total= 87.1
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=118

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=119
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=120

 Object Unit name= ldctdata2                                  File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:13:58.44 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero    50     62  ldctdata2
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  ldctdata2

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_1
                       Std       0 pk4
                       Std       0 printf
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=121

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=122


      406       410                
      407       411                
      408       412             /*  
      409       413              *             ldctdata2 -  
      410       414              */  
      411       415                
      412       416                
      413       417             ldctdata2(ldct_)  
      414       418             struct kn_ldct *ldct_;  

    418  0 000000   000000 700000 xent  ldctdata2    TSX0    _XBC_AUTO_1
         0 000001   000026 000001                    ZERO    22,1

      415       419             {  
      416       420    1           
      417       421    1        printf("%3d   %4d    %4d %#8x   %1d\n",  

    421  0 000002   000056 236000 0                  LDQ     s:421+44
         0 000003   200010 756100                    STQ     ldct_+4,,AUTO
         0 000004   200004 473500                    LDP3    ldct_,,AUTO
         0 000005   300001 236100                    LDQ     1,,PR3
         0 000006   200007 756100                    STQ     ldct_+3,,AUTO
         0 000007   200007 630500                    EPPR0   ldct_+3,,AUTO
         0 000010   000057 631400 0                  EPPR1   s:421+45
         0 000011   000000 701000 xent               TSX1    pk4
         0 000012   000000 236007                    LDQ     0,DL
         0 000013   200011 756100                    STQ     ldct_+5,,AUTO
         0 000014   200004 473500                    LDP3    ldct_,,AUTO
         0 000015   300010 236100                    LDQ     8,,PR3
         0 000016   200007 756100                    STQ     ldct_+3,,AUTO
         0 000017   200007 630500                    EPPR0   ldct_+3,,AUTO
         0 000020   000057 631400 0                  EPPR1   s:421+45
         0 000021   000000 701000 xent               TSX1    pk4
         0 000022   000000 236007                    LDQ     0,DL
         0 000023   200012 756100                    STQ     ldct_+6,,AUTO
         0 000024   200004 473500                    LDP3    ldct_,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=123
         0 000025   300011 236100                    LDQ     9,,PR3
         0 000026   200007 756100                    STQ     ldct_+3,,AUTO
         0 000027   200007 630500                    EPPR0   ldct_+3,,AUTO
         0 000030   000057 631400 0                  EPPR1   s:421+45
         0 000031   000000 701000 xent               TSX1    pk4
         0 000032   000000 236007                    LDQ     0,DL
         0 000033   200013 756100                    STQ     ldct_+7,,AUTO
         0 000034   200004 473500                    LDP3    ldct_,,AUTO
         0 000035   300012 236100                    LDQ     10,,PR3
         0 000036   200007 756100                    STQ     ldct_+3,,AUTO
         0 000037   200007 630500                    EPPR0   ldct_+3,,AUTO
         0 000040   000057 631400 0                  EPPR1   s:421+45
         0 000041   000000 701000 xent               TSX1    pk4
         0 000042   000000 236007                    LDQ     0,DL
         0 000043   200014 756100                    STQ     ldct_+8,,AUTO
         0 000044   200004 473500                    LDP3    ldct_,,AUTO
         0 000045   300013 236100                    LDQ     11,,PR3
         0 000046   000043 772000                    QRL     35
         0 000047   000001 376007                    ANQ     1,DL
         0 000050   200015 756100                    STQ     ldct_+9,,AUTO
         0 000051   200010 630500                    EPPR0   ldct_+4,,AUTO
         0 000052   000060 631400 0                  EPPR1   s:421+46
         0 000053   000000 701000 xent               TSX1    printf
         0 000054   000000 236007                    LDQ     0,DL
         0 000055   000000 702000 xent               TSX2    _XBC_FARET
         0 000056   002241 000000 xsym               ZERO    sigint#c+1185,0
         0 000057   000001 000000                    ZERO    1,0
         0 000060   000006 000000                    ZERO    6,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=124

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0   418-   427      2   468     0      0  y        0   1 ldctdata2
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=125

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     1 Call       1 Proc

 # major stmts=    1 Code/major=50.00 # stmts=    2 Code/stmt=25.00  Point total= 45.9
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=126

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr              4-0-0/w PTR         r,m   1 ldct_

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=127
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=128

 Object Unit name= ldcthdr3                                   File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:14:03.56 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero    26     32  ldcthdr3
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  ldcthdr3

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_0
                       Std       0 printf
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=129

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=130


      419       423    1               pk4((*ldct_).reason),  
      420       424    1               pk4((*ldct_).rescode),  
      421       425    1               pk4((*ldct_).selproc),  
      422       426    1               (*ldct_).queued);  
      423       427    1        }  
      424       428                
      425       429             /*  
      426       430              *             ldcthdr3 -  
      427       431              */  
      428       432                
      429       433                
      430       434             ldcthdr3()  
      431       435                
      432       436             {  

    436  0 000000   000000 700000 xent  ldcthdr3     TSX0    _XBC_AUTO_0
         0 000001   000016 000000                    ZERO    14,0

      433       437    1        printf("\n");  

    437  0 000002   000025 236000 0                  LDQ     s:439+7
         0 000003   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000004   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000005   000026 631400 0                  EPPR1   s:439+8
         0 000006   000000 701000 xent               TSX1    printf
         0 000007   000000 236007                    LDQ     0,DL

      434       438    1        printf("#   rcrbytsiz nmbrcr nmbbyt ounmbbyt ounmbrcr ourcrbytsiz\n");  

    438  0 000010   000027 236000 0                  LDQ     s:439+9
         0 000011   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000012   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000013   000026 631400 0                  EPPR1   s:439+8
         0 000014   000000 701000 xent               TSX1    printf
         0 000015   000000 236007                    LDQ     0,DL

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=131
      435       439    1        printf("--- --------- ------ ------ -------- -------- -----------\n");  

    439  0 000016   000030 236000 0                  LDQ     s:439+10
         0 000017   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000020   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000021   000026 631400 0                  EPPR1   s:439+8
         0 000022   000000 701000 xent               TSX1    printf
         0 000023   000000 236007                    LDQ     0,DL
         0 000024   000000 702000 xent               TSX2    _XBC_FARET
         0 000025   002515 000000 xsym               ZERO    sigint#c+1357,0
         0 000026   000001 000000                    ZERO    1,0
         0 000027   001655 000000 xsym               ZERO    sigint#c+941,0
         0 000030   001636 000000 xsym               ZERO    sigint#c+926,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=132

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0   436-   440      4   467     0      0  y        0   1 ldcthdr3
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=133

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     3 Call       1 Proc

 # major stmts=    3 Code/major= 8.66 # stmts=    4 Code/stmt= 6.50  Point total= 87.1
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=134

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=135
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=136

 Object Unit name= ipcdata                                    File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:14:08.80 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero   118    166  ipcdata
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  ipcdata

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_1
                       Std       0 printf
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=137

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=138


      437       441                
      438       442                
      439       443             /*  
      440       444              *             ldctdata3 -  
      441       445              */  
      442       446                
      443       447             #ifdef xxx  
      444       448   -1           
      445       449   -1           
      446       450   -1        ldctdata3(ldct_)  
      447       451   -1        struct kn_ldct *ldct_;  
      448       452   -1        {  
      449       453   -1           
      450       454   -1        printf("%-3d      %4d   %4d  %5d    %5d     %4d        %4d\n",  
      451       455   -1               (*ldct_).ldctx,  
      452       456   -1               (*ldct_).rcrbytsiz,  
      453       457   -1               (*ldct_).nmbrcr,  
      454       458   -1               (*ldct_).nmbbyt,  
      455       459   -1               (*ldct_).ounmbbyt,  
      456       460   -1               (*ldct_).ounmbrcr,  
      457       461   -1               (*ldct_).ourcrbytsiz);  
      458       462   -1        }  
      459       463   -1           
      460       464   -1        #endif  
      461       465                
      462       466                
      463       468                
      464       469             /*  
      465       470              *             ipcdata - interprocess communication area.  
      466       471              */  
      467       472                
      468       473             ipcdata(ipc_)  
      469       474             struct ipc *ipc_;  

    474  0 000000   000000 700000 xent  ipcdata      TSX0    _XBC_AUTO_1
         0 000001   000030 000001                    ZERO    24,1
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=139

      470       475                
      471       476             {  
      472       477    1        static char *ipcstate[] = {"down","  up"};  
      473       478    1           
      474       479    1        printf("\n");  

    479  0 000002   000151 236000 0                  LDQ     s:496+31
         0 000003   200017 756100                    STQ     ipc_+11,,AUTO
         0 000004   200017 630500                    EPPR0   ipc_+11,,AUTO
         0 000005   000152 631400 0                  EPPR1   s:496+32
         0 000006   000000 701000 xent               TSX1    printf
         0 000007   000000 236007                    LDQ     0,DL

      475       480    1        printf("             KERNEL <-> DIB COMMUNICATION AREA\n");  

    480  0 000010   000153 236000 0                  LDQ     s:496+33
         0 000011   200017 756100                    STQ     ipc_+11,,AUTO
         0 000012   200017 630500                    EPPR0   ipc_+11,,AUTO
         0 000013   000152 631400 0                  EPPR1   s:496+32
         0 000014   000000 701000 xent               TSX1    printf
         0 000015   000000 236007                    LDQ     0,DL

      476       481    1        printf("             ---------------------------------\n");  

    481  0 000016   000154 236000 0                  LDQ     s:496+34
         0 000017   200017 756100                    STQ     ipc_+11,,AUTO
         0 000020   200017 630500                    EPPR0   ipc_+11,,AUTO
         0 000021   000152 631400 0                  EPPR1   s:496+32
         0 000022   000000 701000 xent               TSX1    printf
         0 000023   000000 236007                    LDQ     0,DL

      477       482    1        printf("     entry     qhdr     ldct ipcflag host fep  cp6 fep name\n");  

    482  0 000024   000155 236000 0                  LDQ     s:496+35
         0 000025   200017 756100                    STQ     ipc_+11,,AUTO
         0 000026   200017 630500                    EPPR0   ipc_+11,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=140
         0 000027   000152 631400 0                  EPPR1   s:496+32
         0 000030   000000 701000 xent               TSX1    printf
         0 000031   000000 236007                    LDQ     0,DL

      478       483    1        printf("     -----     ----     ---- ------- ---- ---  --- --------\n");  

    483  0 000032   000156 236000 0                  LDQ     s:496+36
         0 000033   200017 756100                    STQ     ipc_+11,,AUTO
         0 000034   200017 630500                    EPPR0   ipc_+11,,AUTO
         0 000035   000152 631400 0                  EPPR1   s:496+32
         0 000036   000000 701000 xent               TSX1    printf
         0 000037   000000 236007                    LDQ     0,DL

      479       484    1        printf("%#8x %#8x %#8x  %6s %4d %3d %4s %s      \n",  

    484  0 000040   000157 236000 0                  LDQ     s:496+37
         0 000041   200007 756100                    STQ     ipc_+3,,AUTO
         0 000042   200004 473500                    LDP3    ipc_,,AUTO
         0 000043   300000 236100                    LDQ     0,,PR3
         0 000044   200010 756100                    STQ     ipc_+4,,AUTO
         0 000045   300001 236100                    LDQ     1,,PR3
         0 000046   200011 756100                    STQ     ipc_+5,,AUTO
         0 000047   300003 236100                    LDQ     3,,PR3
         0 000050   200012 756100                    STQ     ipc_+6,,AUTO
         0 000051   300004 722100                    LXL2    4,,PR3
         0 000052   000011 236012 xsym               LDQ     sigint#s+9,X2
         0 000053   200013 756100                    STQ     ipc_+7,,AUTO
         0 000054   300005 236100                    LDQ     5,,PR3
         0 000055   200014 756100                    STQ     ipc_+8,,AUTO
         0 000056   300006 236100                    LDQ     6,,PR3
         0 000057   200015 756100                    STQ     ipc_+9,,AUTO
         0 000060   300013 722100                    LXL2    11,,PR3
         0 000061   000011 236012 xsym               LDQ     sigint#s+9,X2
         0 000062   200016 756100                    STQ     ipc_+10,,AUTO
         0 000063   300007 630500                    EPPR0   7,,PR3
         0 000064   200017 450500                    STP0    ipc_+11,,AUTO
         0 000065   200007 630500                    EPPR0   ipc_+3,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=141
         0 000066   000160 631400 0                  EPPR1   s:496+38
         0 000067   000000 701000 xent               TSX1    printf
         0 000070   000000 236007                    LDQ     0,DL

      480       485    1               (*ipc_).entry,  
      481       486    1               (*ipc_).qhdr,  
      482       487    1               (*ipc_).ldct,  
      483       488    1               ipcstate[(*ipc_).ipc_flag],  
      484       489    1               (*ipc_).host_node,  
      485       490    1               (*ipc_).fep_node,  
      486       491    1               ipcstate[(*ipc_).hststt],  
      487       492    1               (*ipc_).fep_nm);  
      488       493    1        if ((*ipc_).scode.err != 0) {  

    493  0 000071   200004 473500                    LDP3    ipc_,,AUTO
         0 000072   300012 236100                    LDQ     10,,PR3
         0 000073   000007 772000                    QRL     7
         0 000074   017777 376007                    ANQ     8191,DL
         0 000075   000150 600000 0                  TZE     s:496+30

      489       494    2               printf("     last screech scode\n");  

    494  0 000076   000161 236000 0                  LDQ     s:496+39
         0 000077   200017 756100                    STQ     ipc_+11,,AUTO
         0 000100   200017 630500                    EPPR0   ipc_+11,,AUTO
         0 000101   000152 631400 0                  EPPR1   s:496+32
         0 000102   000000 701000 xent               TSX1    printf
         0 000103   000000 236007                    LDQ     0,DL

      490       495    2               printf("     ------------------\n");  

    495  0 000104   000162 236000 0                  LDQ     s:496+40
         0 000105   200017 756100                    STQ     ipc_+11,,AUTO
         0 000106   200017 630500                    EPPR0   ipc_+11,,AUTO
         0 000107   000152 631400 0                  EPPR1   s:496+32
         0 000110   000000 701000 xent               TSX1    printf
         0 000111   000000 236007                    LDQ     0,DL
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=142

      491       496    2               printf("     %c%c%c-%d-%d\n",  

    496  0 000112   000163 236000 0                  LDQ     s:496+41
         0 000113   200012 756100                    STQ     ipc_+6,,AUTO
         0 000114   200004 473500                    LDP3    ipc_,,AUTO
         0 000115   300012 236100                    LDQ     10,,PR3
         0 000116   000037 772000                    QRL     31
         0 000117   000037 376007                    ANQ     31,DL
         0 000120   000100 036007                    ADLQ    64,DL
         0 000121   200013 756100                    STQ     ipc_+7,,AUTO
         0 000122   300012 236100                    LDQ     10,,PR3
         0 000123   000032 772000                    QRL     26
         0 000124   000037 376007                    ANQ     31,DL
         0 000125   000100 036007                    ADLQ    64,DL
         0 000126   200014 756100                    STQ     ipc_+8,,AUTO
         0 000127   300012 236100                    LDQ     10,,PR3
         0 000130   000025 772000                    QRL     21
         0 000131   000037 376007                    ANQ     31,DL
         0 000132   000100 036007                    ADLQ    64,DL
         0 000133   200015 756100                    STQ     ipc_+9,,AUTO
         0 000134   300012 236100                    LDQ     10,,PR3
         0 000135   000007 772000                    QRL     7
         0 000136   017777 376007                    ANQ     8191,DL
         0 000137   200016 756100                    STQ     ipc_+10,,AUTO
         0 000140   300012 236100                    LDQ     10,,PR3
         0 000141   000004 772000                    QRL     4
         0 000142   000007 376007                    ANQ     7,DL
         0 000143   200017 756100                    STQ     ipc_+11,,AUTO
         0 000144   200012 630500                    EPPR0   ipc_+6,,AUTO
         0 000145   000164 631400 0                  EPPR1   s:496+42
         0 000146   000000 701000 xent               TSX1    printf
         0 000147   000000 236007                    LDQ     0,DL
         0 000150   000000 702000 xent               TSX2    _XBC_FARET
         0 000151   002515 000000 xsym               ZERO    sigint#c+1357,0
         0 000152   000001 000000                    ZERO    1,0
         0 000153   001622 000000 xsym               ZERO    sigint#c+914,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=143
         0 000154   001606 000000 xsym               ZERO    sigint#c+902,0
         0 000155   001566 000000 xsym               ZERO    sigint#c+886,0
         0 000156   001546 000000 xsym               ZERO    sigint#c+870,0
         0 000157   001533 000000 xsym               ZERO    sigint#c+859,0
         0 000160   000011 000000                    ZERO    9,0
         0 000161   002232 000000 xsym               ZERO    sigint#c+1178,0
         0 000162   002223 000000 xsym               ZERO    sigint#c+1171,0
         0 000163   002216 000000 xsym               ZERO    sigint#c+1166,0
         0 000164   000006 000000                    ZERO    6,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=144

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0   474-   503     11   470     0      0  y        0   1 ipcdata
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=145

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     9 Call       1 If         1 Proc

 # major stmts=   10 Code/major=11.80 # stmts=   11 Code/stmt=10.72  Point total= 84.2
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=146

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr              4-0-0/w PTR         r,m   1 ipc_

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc
    11-0-0/w PTR         r,m   1 ipcstate(0:1)
    11-0-0/w PTR         r,m   1 ipcstate(0:1)
     0-0-0/w SBIN        r,m   1 kmemfd                     0-0-0/w SBIN        r,m   1 ldctaddr
     0-0-0/w SBIN        r,m   1 ldctcnt                    0-0-0/w SBIN        r,m   1 ldctsave
     0-0-0/w SBIN        r,m   1 messaddr                   0-0-0/w PTR         r,m   1 messc
     0-0-0/w SBIN        r,m   1 messcnt                   26-0-0/c CHAR        r,m   1 op
     0-0-0/w PTR         r,m   1 optarg                   146-0-0/c CHAR        r,m   1 path(0:63)
     0-0-0/c CHAR        r,m   1 prevop                     0-0-0/w SBIN        r,m   1 procflg
     1-0-0/c STRC(1116)  r,m   1 qhdr                       0-0-0/w SBIN        r,m   1 qhdrflg
     0-0-0/w SBIN        r,m   1 rawaddr                    0-0-0/w SBIN        r,m   1 rawbound
     0-0-0/w SBIN        r,m   1 rawdump                    0-0-0/c CHAR        r,m   1 readbuf(0:79)
     0-0-0/c CHAR        r,m   1 savebuf(0:79)              0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=147
  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=148

 Object Unit name= fetchdibdat                                File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:14:16.28 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero    42     52  fetchdibdat
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  fetchdibdat

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_4
                       Std       0 DBM_GETMEM
         yes           Std       1 perror
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=149

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=150


      493       498    2                       (*ipc_).scode.a2+64,  
      494       499    2                       (*ipc_).scode.mid+64,  
      495       500    2                       (*ipc_).scode.err,  
      496       501    2                       (*ipc_).scode.sev);  
      497       502    2               }  
      498       503    1        }  
      499       504                
      500       505                
      501       506             /*  
      502       507              *             fetchdibdat - fetches the specified area of dib data  
      503       508              *                             from /dev/dib/CP6.  returns a pointer  
      504       509              *                             to the data in buf_.  
      505       510              */  
      506       511                
      507       512             fetchdibdat(fd,buf_,siz,dibaddr)  
      508       513                
      509       514             int fd,siz,dibaddr;  

    514  0 000000   000000 700000 xent  fetchdibdat  TSX0    _XBC_AUTO_4
         0 000001   000026 000004                    ZERO    22,4

      510       515             char *buf_;  
      511       516                
      512       517             {  
      513       518    1        int ars;  
      514       519    1              if (fd<0) return -1;  

    519  0 000002   200004 234100                    SZN     fd,,AUTO
         0 000003   000007 605000 0                  TPL     s:520

    519  0 000004   000044 236000 0                  LDQ     s:527+2
         0 000005   200015 756100                    STQ     ars,,AUTO
         0 000006   000042 710000 0                  TRA     s:527

      515       520    1              dibaddr &= DIB_MASK;  

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=151
    520  0 000007   000045 236000 0                  LDQ     s:527+3
         0 000010   200007 356100                    ANSQ    dibaddr,,AUTO

      516       521    1              DBM_GETMEM(&dibaddr,buf_,&siz,&ars);  

    521  0 000011   200007 630500                    EPPR0   dibaddr,,AUTO
         0 000012   200011 450500                    STP0    dibaddr+2,,AUTO
         0 000013   200005 236100                    LDQ     buf_,,AUTO
         0 000014   200012 756100                    STQ     dibaddr+3,,AUTO
         0 000015   200006 630500                    EPPR0   siz,,AUTO
         0 000016   200013 450500                    STP0    dibaddr+4,,AUTO
         0 000017   200015 630500                    EPPR0   ars,,AUTO
         0 000020   200014 450500                    STP0    dibaddr+5,,AUTO
         0 000021   200011 630500                    EPPR0   dibaddr+2,,AUTO
         0 000022   000046 631400 0                  EPPR1   s:527+4
         0 000023   000000 701000 xent               TSX1    DBM_GETMEM
         0 000024   000000 236007                    LDQ     0,DL

      517       522    1              if (ars != siz)  

    522  0 000025   200015 236100                    LDQ     ars,,AUTO
         0 000026   200006 116100                    CMPQ    siz,,AUTO
         0 000027   000041 600000 0                  TZE     s:525+3

      518       523    1                       {  
      519       524    2                       perror ("ddu: can't read dibdata");  

    524  0 000030   000047 236000 0                  LDQ     s:527+5
         0 000031   200014 756100                    STQ     dibaddr+5,,AUTO
         0 000032   200014 630500                    EPPR0   dibaddr+5,,AUTO
         0 000033   000050 631400 0                  EPPR1   s:527+6
         0 000034   000000 701000 xent               TSX1    perror
         0 000035   000000 236007                    LDQ     0,DL

      520       525    2                       return -1;  

    525  0 000036   000044 236000 0                  LDQ     s:527+2
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=152
         0 000037   200015 756100                    STQ     ars,,AUTO
         0 000040   000042 710000 0                  TRA     s:527
         0 000041   000000 702000 xent               TSX2    _XBC_FARET

      521       526    2                       }  
      522       527    1        }  

    527  0 000042   200015 236100                    LDQ     ars,,AUTO
         0 000043   000000 702000 xent               TSX2    _XBC_FARET
         0 000044   777777 777777                    ZERO    -1,-1
         0 000045   000003 777777                    ZERO    3,-1
         0 000046   000004 000000                    ZERO    4,0
         0 000047   002210 000000 xsym               ZERO    sigint#c+1160,0
         0 000050   000001 000000                    ZERO    1,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=153

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0   514-   527      9   471     0      0  y        0   1 fetchdibdat
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=154

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     1 Assign     2 Call       2 If         2 Return     1 Proc       1 EndPrc


 # major stmts=    7 Code/major= 6.00 # stmts=    9 Code/stmt= 4.66  Point total= 90.3
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=155

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr             15-0-0/w SBIN        r,m   1 ars
     5-0-0/w PTR         r,m   1 buf_                       7-0-0/w SBIN        r,m   1 dibaddr
     4-0-0/w SBIN        r,m   1 fd                         6-0-0/w SBIN        r,m   1 siz

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibctx
     0-0-0/w SBIN        r,m   1 dibfd                      0-0-0/w SBIN        r,m   1 env(0:1)
     0-0-0/w SBIN        r,m   1 fulldct                    0-0-0/w SBIN        r,m   1 i
     0-0-0/w SBIN        r,m   1 interactive                0-0-0/c STRC(432)   r,m   1 ipc
     0-0-0/w SBIN        r,m   1 kmemfd                     0-0-0/w SBIN        r,m   1 ldctaddr
     0-0-0/w SBIN        r,m   1 ldctcnt                    0-0-0/w SBIN        r,m   1 ldctsave
     0-0-0/w SBIN        r,m   1 messaddr                   0-0-0/w PTR         r,m   1 messc
     0-0-0/w SBIN        r,m   1 messcnt                   26-0-0/c CHAR        r,m   1 op
     0-0-0/w PTR         r,m   1 optarg                   146-0-0/c CHAR        r,m   1 path(0:63)
     0-0-0/c CHAR        r,m   1 prevop                     0-0-0/w SBIN        r,m   1 procflg
     1-0-0/c STRC(1116)  r,m   1 qhdr                       0-0-0/w SBIN        r,m   1 qhdrflg
     0-0-0/w SBIN        r,m   1 rawaddr                    0-0-0/w SBIN        r,m   1 rawbound
     0-0-0/w SBIN        r,m   1 rawdump                    0-0-0/c CHAR        r,m   1 readbuf(0:79)
     0-0-0/c CHAR        r,m   1 savebuf(0:79)              0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=156

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=157

 Object Unit name= dibctxdata                                 File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:14:22.44 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero   478    736  dibctxdata
    1   Data  even  zero     0      0
    2  RoData even  none    17     21

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  dibctxdata

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_1
                       Std       0 printf
                       Std       0 pk4
                       Std       0 pk2
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=158

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=159


      524       529                
      525       530             /*  
      526       531              *             dibctxdata - display dib context.  
      527       532              */  
      528       533                
      529       534                
      530       535             dibctxdata(ctx_)  
      531       536                
      532       537             struct kj_ctx *ctx_;  

    537  0 000000   000000 700000 xent  dibctxdata   TSX0    _XBC_AUTO_1
         0 000001   000036 000001                    ZERO    30,1

      533       538                
      534       539             {  
      535       540    1           
      536       541    1        int i,opcodex;  
      537       542    1           
      538       543    1        static char *mode[] = {  
      539       544    2               "Bin  ",  
      540       545    2               "Ascii"};  
      541       546    1           
      542       547    1        static char *state[] = {  
      543       548    2               "        ",  
      544       549    2               "Masked  ",  
      545       550    2               "Init   ",  
      546       551    2               "Running ",  
      547       552    2               "Recovery"};  
      548       553    1           
      549       554    1        static char *cf[] = {  
      550       555    2               "None    ",  
      551       556    2               "Init    ",  
      552       557    2               "Read OCQ",  
      553       558    2               "Read ICQ",  
      554       559    2               "        ",  
      555       560    2               "Data    ",  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=160
      556       561    2               "Boot    "};  
      557       562    1           
      558       563    1        static char *opcode[] = {  
      559       564    2               "           ",  
      560       565    2               "Disconnect ",  
      561       566    2               "Datal6->l66",  
      562       567    2               "Datal66->l6",  
      563       568    2               "Read&clear ",  
      564       569    2               "Jump       ",  
      565       570    2               "Nop        ",  
      566       571    2               "Int l66    "};  
      567       572    1           
      568       573    1           
      569       574    1        printf("\ndib context                            \n");  

    574  0 000002   000702 236000 0                  LDQ     s:657+23
         0 000003   200017 756100                    STQ     ctx_+11,,AUTO
         0 000004   200017 630500                    EPPR0   ctx_+11,,AUTO
         0 000005   000703 631400 0                  EPPR1   s:657+24
         0 000006   000000 701000 xent               TSX1    printf
         0 000007   000000 236007                    LDQ     0,DL

      570       575    1        printf("state    c_f     host fep qos    flags\n");  

    575  0 000010   000704 236000 0                  LDQ     s:657+25
         0 000011   200017 756100                    STQ     ctx_+11,,AUTO
         0 000012   200017 630500                    EPPR0   ctx_+11,,AUTO
         0 000013   000703 631400 0                  EPPR1   s:657+24
         0 000014   000000 701000 xent               TSX1    printf
         0 000015   000000 236007                    LDQ     0,DL

      571       576    1        printf("%7s %8s %3d %3d %3d %#8x\n",  

    576  0 000016   000705 236000 0                  LDQ     s:657+26
         0 000017   200011 756100                    STQ     ctx_+5,,AUTO
         0 000020   200004 473500                    LDP3    ctx_,,AUTO
         0 000021   300000 236100                    LDQ     0,,PR3
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=161
         0 000022   200010 756100                    STQ     ctx_+4,,AUTO
         0 000023   200010 630500                    EPPR0   ctx_+4,,AUTO
         0 000024   000703 631400 0                  EPPR1   s:657+24
         0 000025   000000 701000 xent               TSX1    pk4
         0 000026   000000 236007                    LDQ     0,DL
         0 000027   000000 622006                    EAX2    0,QL
         0 000030   000015 236012 xsym               LDQ     sigint#s+13,X2
         0 000031   200012 756100                    STQ     ctx_+6,,AUTO
         0 000032   200004 473500                    LDP3    ctx_,,AUTO
         0 000033   300001 236100                    LDQ     1,,PR3
         0 000034   200010 756100                    STQ     ctx_+4,,AUTO
         0 000035   200010 630500                    EPPR0   ctx_+4,,AUTO
         0 000036   000703 631400 0                  EPPR1   s:657+24
         0 000037   000000 701000 xent               TSX1    pk4
         0 000040   000000 236007                    LDQ     0,DL
         0 000041   000000 622006                    EAX2    0,QL
         0 000042   000022 236012 xsym               LDQ     sigint#s+18,X2
         0 000043   200013 756100                    STQ     ctx_+7,,AUTO
         0 000044   200004 473500                    LDP3    ctx_,,AUTO
         0 000045   000100 100500                    MLR     fill='000'O
         0 000046   300002 000001                    ADSC9   2,,PR3                   cn=0,n=1
         0 000047   200022 600001                    ADSC9   i+1,,AUTO                cn=3,n=1
         0 000050   200022 236100                    LDQ     i+1,,AUTO
         0 000051   000777 376007                    ANQ     511,DL
         0 000052   200014 756100                    STQ     ctx_+8,,AUTO
         0 000053   000100 100500                    MLR     fill='000'O
         0 000054   300002 200001                    ADSC9   2,,PR3                   cn=1,n=1
         0 000055   200022 600001                    ADSC9   i+1,,AUTO                cn=3,n=1
         0 000056   200022 236100                    LDQ     i+1,,AUTO
         0 000057   000777 376007                    ANQ     511,DL
         0 000060   200015 756100                    STQ     ctx_+9,,AUTO
         0 000061   000100 100500                    MLR     fill='000'O
         0 000062   300002 400001                    ADSC9   2,,PR3                   cn=2,n=1
         0 000063   200022 600001                    ADSC9   i+1,,AUTO                cn=3,n=1
         0 000064   200022 236100                    LDQ     i+1,,AUTO
         0 000065   000777 376007                    ANQ     511,DL
         0 000066   200016 756100                    STQ     ctx_+10,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=162
         0 000067   300003 236100                    LDQ     3,,PR3
         0 000070   200010 756100                    STQ     ctx_+4,,AUTO
         0 000071   200010 630500                    EPPR0   ctx_+4,,AUTO
         0 000072   000703 631400 0                  EPPR1   s:657+24
         0 000073   000000 701000 xent               TSX1    pk4
         0 000074   000000 236007                    LDQ     0,DL
         0 000075   200017 756100                    STQ     ctx_+11,,AUTO
         0 000076   200011 630500                    EPPR0   ctx_+5,,AUTO
         0 000077   000706 631400 0                  EPPR1   s:657+27
         0 000100   000000 701000 xent               TSX1    printf
         0 000101   000000 236007                    LDQ     0,DL

      572       577    1              state[pk4((*ctx_).state)],  
      573       578    1              cf[pk4((*ctx_).current_function)],  
      574       579    1              (*ctx_).host_node,  
      575       580    1              (*ctx_).fep_node,  
      576       581    1              (*ctx_).qos,  
      577       582    1              pk4((*ctx_).flags));  
      578       583    1           
      579       584    1        printf("\n     icq:\n");  

    584  0 000102   000707 236000 0                  LDQ     s:657+28
         0 000103   200017 756100                    STQ     ctx_+11,,AUTO
         0 000104   200017 630500                    EPPR0   ctx_+11,,AUTO
         0 000105   000703 631400 0                  EPPR1   s:657+24
         0 000106   000000 701000 xent               TSX1    printf
         0 000107   000000 236007                    LDQ     0,DL

      580       585    1        printf("     iptr       rptr       size     offset        buf new_rptr\n");  

    585  0 000110   000710 236000 0                  LDQ     s:657+29
         0 000111   200017 756100                    STQ     ctx_+11,,AUTO
         0 000112   200017 630500                    EPPR0   ctx_+11,,AUTO
         0 000113   000703 631400 0                  EPPR1   s:657+24
         0 000114   000000 701000 xent               TSX1    printf
         0 000115   000000 236007                    LDQ     0,DL

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=163
      581       586    1        printf("     ----       ----       ----     ------        --- --------\n");  

    586  0 000116   000711 236000 0                  LDQ     s:657+30
         0 000117   200017 756100                    STQ     ctx_+11,,AUTO
         0 000120   200017 630500                    EPPR0   ctx_+11,,AUTO
         0 000121   000703 631400 0                  EPPR1   s:657+24
         0 000122   000000 701000 xent               TSX1    printf
         0 000123   000000 236007                    LDQ     0,DL

      582       587    1        printf(" %#8x   %#8x   %#8x   %#8x   %#8x   %#8x\n",  

    587  0 000124   000712 236000 0                  LDQ     s:657+31
         0 000125   200011 756100                    STQ     ctx_+5,,AUTO
         0 000126   200004 473500                    LDP3    ctx_,,AUTO
         0 000127   300004 236100                    LDQ     4,,PR3
         0 000130   200010 756100                    STQ     ctx_+4,,AUTO
         0 000131   200010 630500                    EPPR0   ctx_+4,,AUTO
         0 000132   000703 631400 0                  EPPR1   s:657+24
         0 000133   000000 701000 xent               TSX1    pk4
         0 000134   000000 236007                    LDQ     0,DL
         0 000135   200012 756100                    STQ     ctx_+6,,AUTO
         0 000136   200004 473500                    LDP3    ctx_,,AUTO
         0 000137   300005 236100                    LDQ     5,,PR3
         0 000140   200010 756100                    STQ     ctx_+4,,AUTO
         0 000141   200010 630500                    EPPR0   ctx_+4,,AUTO
         0 000142   000703 631400 0                  EPPR1   s:657+24
         0 000143   000000 701000 xent               TSX1    pk4
         0 000144   000000 236007                    LDQ     0,DL
         0 000145   200013 756100                    STQ     ctx_+7,,AUTO
         0 000146   200004 473500                    LDP3    ctx_,,AUTO
         0 000147   300006 236100                    LDQ     6,,PR3
         0 000150   200010 756100                    STQ     ctx_+4,,AUTO
         0 000151   200010 630500                    EPPR0   ctx_+4,,AUTO
         0 000152   000703 631400 0                  EPPR1   s:657+24
         0 000153   000000 701000 xent               TSX1    pk4
         0 000154   000000 236007                    LDQ     0,DL
         0 000155   200014 756100                    STQ     ctx_+8,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=164
         0 000156   200004 473500                    LDP3    ctx_,,AUTO
         0 000157   300007 236100                    LDQ     7,,PR3
         0 000160   200010 756100                    STQ     ctx_+4,,AUTO
         0 000161   200010 630500                    EPPR0   ctx_+4,,AUTO
         0 000162   000703 631400 0                  EPPR1   s:657+24
         0 000163   000000 701000 xent               TSX1    pk4
         0 000164   000000 236007                    LDQ     0,DL
         0 000165   200015 756100                    STQ     ctx_+9,,AUTO
         0 000166   200004 473500                    LDP3    ctx_,,AUTO
         0 000167   300010 236100                    LDQ     8,,PR3
         0 000170   200010 756100                    STQ     ctx_+4,,AUTO
         0 000171   200010 630500                    EPPR0   ctx_+4,,AUTO
         0 000172   000703 631400 0                  EPPR1   s:657+24
         0 000173   000000 701000 xent               TSX1    pk4
         0 000174   000000 236007                    LDQ     0,DL
         0 000175   200016 756100                    STQ     ctx_+10,,AUTO
         0 000176   200004 473500                    LDP3    ctx_,,AUTO
         0 000177   300011 236100                    LDQ     9,,PR3
         0 000200   200010 756100                    STQ     ctx_+4,,AUTO
         0 000201   200010 630500                    EPPR0   ctx_+4,,AUTO
         0 000202   000703 631400 0                  EPPR1   s:657+24
         0 000203   000000 701000 xent               TSX1    pk4
         0 000204   000000 236007                    LDQ     0,DL
         0 000205   200017 756100                    STQ     ctx_+11,,AUTO
         0 000206   200011 630500                    EPPR0   ctx_+5,,AUTO
         0 000207   000706 631400 0                  EPPR1   s:657+27
         0 000210   000000 701000 xent               TSX1    printf
         0 000211   000000 236007                    LDQ     0,DL

      583       588    1                   pk4((*ctx_).icq.iptr),  
      584       589    1                   pk4((*ctx_).icq.rptr),  
      585       590    1                   pk4((*ctx_).icq.size),  
      586       591    1                   pk4((*ctx_).icq.offset),  
      587       592    1                   pk4((*ctx_).icq.buf),  
      588       593    1                   pk4((*ctx_).icq.new_rptr));  
      589       594    1           
      590       595    1        printf("\n     ocq:\n");  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=165

    595  0 000212   000713 236000 0                  LDQ     s:657+32
         0 000213   200017 756100                    STQ     ctx_+11,,AUTO
         0 000214   200017 630500                    EPPR0   ctx_+11,,AUTO
         0 000215   000703 631400 0                  EPPR1   s:657+24
         0 000216   000000 701000 xent               TSX1    printf
         0 000217   000000 236007                    LDQ     0,DL

      591       596    1        printf("     iptr       rptr       size     offset        buf      flags  r  

    596  0 000220   000714 236000 0                  LDQ     s:657+33
         0 000221   200017 756100                    STQ     ctx_+11,,AUTO
         0 000222   200017 630500                    EPPR0   ctx_+11,,AUTO
         0 000223   000703 631400 0                  EPPR1   s:657+24
         0 000224   000000 701000 xent               TSX1    printf
         0 000225   000000 236007                    LDQ     0,DL

      592       597    1        printf("     ----       ----       ----     ------        ---      -----  -  

    597  0 000226   000715 236000 0                  LDQ     s:657+34
         0 000227   200017 756100                    STQ     ctx_+11,,AUTO
         0 000230   200017 630500                    EPPR0   ctx_+11,,AUTO
         0 000231   000703 631400 0                  EPPR1   s:657+24
         0 000232   000000 701000 xent               TSX1    printf
         0 000233   000000 236007                    LDQ     0,DL

      593       598    1        printf(" %#8x   %#8x   %#8x   %#8x   %#8x   %#8x   %#8x\n",  

    598  0 000234   000716 236000 0                  LDQ     s:657+35
         0 000235   200010 756100                    STQ     ctx_+4,,AUTO
         0 000236   200004 473500                    LDP3    ctx_,,AUTO
         0 000237   300012 236100                    LDQ     10,,PR3
         0 000240   200007 756100                    STQ     ctx_+3,,AUTO
         0 000241   200007 630500                    EPPR0   ctx_+3,,AUTO
         0 000242   000703 631400 0                  EPPR1   s:657+24
         0 000243   000000 701000 xent               TSX1    pk4
         0 000244   000000 236007                    LDQ     0,DL
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=166
         0 000245   200011 756100                    STQ     ctx_+5,,AUTO
         0 000246   200004 473500                    LDP3    ctx_,,AUTO
         0 000247   300013 236100                    LDQ     11,,PR3
         0 000250   200007 756100                    STQ     ctx_+3,,AUTO
         0 000251   200007 630500                    EPPR0   ctx_+3,,AUTO
         0 000252   000703 631400 0                  EPPR1   s:657+24
         0 000253   000000 701000 xent               TSX1    pk4
         0 000254   000000 236007                    LDQ     0,DL
         0 000255   200012 756100                    STQ     ctx_+6,,AUTO
         0 000256   200004 473500                    LDP3    ctx_,,AUTO
         0 000257   300014 236100                    LDQ     12,,PR3
         0 000260   200007 756100                    STQ     ctx_+3,,AUTO
         0 000261   200007 630500                    EPPR0   ctx_+3,,AUTO
         0 000262   000703 631400 0                  EPPR1   s:657+24
         0 000263   000000 701000 xent               TSX1    pk4
         0 000264   000000 236007                    LDQ     0,DL
         0 000265   200013 756100                    STQ     ctx_+7,,AUTO
         0 000266   200004 473500                    LDP3    ctx_,,AUTO
         0 000267   300015 236100                    LDQ     13,,PR3
         0 000270   200007 756100                    STQ     ctx_+3,,AUTO
         0 000271   200007 630500                    EPPR0   ctx_+3,,AUTO
         0 000272   000703 631400 0                  EPPR1   s:657+24
         0 000273   000000 701000 xent               TSX1    pk4
         0 000274   000000 236007                    LDQ     0,DL
         0 000275   200014 756100                    STQ     ctx_+8,,AUTO
         0 000276   200004 473500                    LDP3    ctx_,,AUTO
         0 000277   300020 236100                    LDQ     16,,PR3
         0 000300   200007 756100                    STQ     ctx_+3,,AUTO
         0 000301   200007 630500                    EPPR0   ctx_+3,,AUTO
         0 000302   000703 631400 0                  EPPR1   s:657+24
         0 000303   000000 701000 xent               TSX1    pk4
         0 000304   000000 236007                    LDQ     0,DL
         0 000305   200015 756100                    STQ     ctx_+9,,AUTO
         0 000306   200004 473500                    LDP3    ctx_,,AUTO
         0 000307   300016 236100                    LDQ     14,,PR3
         0 000310   200007 756100                    STQ     ctx_+3,,AUTO
         0 000311   200007 630500                    EPPR0   ctx_+3,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=167
         0 000312   000703 631400 0                  EPPR1   s:657+24
         0 000313   000000 701000 xent               TSX1    pk4
         0 000314   000000 236007                    LDQ     0,DL
         0 000315   200016 756100                    STQ     ctx_+10,,AUTO
         0 000316   200004 473500                    LDP3    ctx_,,AUTO
         0 000317   300017 236100                    LDQ     15,,PR3
         0 000320   200007 756100                    STQ     ctx_+3,,AUTO
         0 000321   200007 630500                    EPPR0   ctx_+3,,AUTO
         0 000322   000703 631400 0                  EPPR1   s:657+24
         0 000323   000000 701000 xent               TSX1    pk4
         0 000324   000000 236007                    LDQ     0,DL
         0 000325   200017 756100                    STQ     ctx_+11,,AUTO
         0 000326   200010 630500                    EPPR0   ctx_+4,,AUTO
         0 000327   000717 631400 0                  EPPR1   s:657+36
         0 000330   000000 701000 xent               TSX1    printf
         0 000331   000000 236007                    LDQ     0,DL

      594       599    1                   pk4((*ctx_).ocq.iptr),  
      595       600    1                   pk4((*ctx_).ocq.rptr),  
      596       601    1                   pk4((*ctx_).ocq.size),  
      597       602    1                   pk4((*ctx_).ocq.offset),  
      598       603    1                   pk4((*ctx_).ocq.buf),  
      599       604    1                   pk4((*ctx_).ocq.flags),  
      600       605    1                   pk4((*ctx_).ocq.rdsize));  
      601       606    1           
      602       607    1        printf("\n     ibuf:                                       flags:\n");  

    607  0 000332   000720 236000 0                  LDQ     s:657+37
         0 000333   200017 756100                    STQ     ctx_+11,,AUTO
         0 000334   200017 630500                    EPPR0   ctx_+11,,AUTO
         0 000335   000703 631400 0                  EPPR1   s:657+24
         0 000336   000000 701000 xent               TSX1    printf
         0 000337   000000 236007                    LDQ     0,DL

      603       608    1        printf("      buf       size      csize                  ioip  status1\n");  

    608  0 000340   000721 236000 0                  LDQ     s:657+38
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=168
         0 000341   200017 756100                    STQ     ctx_+11,,AUTO
         0 000342   200017 630500                    EPPR0   ctx_+11,,AUTO
         0 000343   000703 631400 0                  EPPR1   s:657+24
         0 000344   000000 701000 xent               TSX1    printf
         0 000345   000000 236007                    LDQ     0,DL

      604       609    1        printf("      ---       ----      -----                  ----  -------\n");  

    609  0 000346   000722 236000 0                  LDQ     s:657+39
         0 000347   200017 756100                    STQ     ctx_+11,,AUTO
         0 000350   200017 630500                    EPPR0   ctx_+11,,AUTO
         0 000351   000703 631400 0                  EPPR1   s:657+24
         0 000352   000000 701000 xent               TSX1    printf
         0 000353   000000 236007                    LDQ     0,DL

      605       610    1        printf(" %#8x   %#8x   %#8x              %#8x   %#8x\n",  

    610  0 000354   000723 236000 0                  LDQ     s:657+40
         0 000355   200012 756100                    STQ     ctx_+6,,AUTO
         0 000356   200004 473500                    LDP3    ctx_,,AUTO
         0 000357   300021 236100                    LDQ     17,,PR3
         0 000360   200011 756100                    STQ     ctx_+5,,AUTO
         0 000361   200011 630500                    EPPR0   ctx_+5,,AUTO
         0 000362   000703 631400 0                  EPPR1   s:657+24
         0 000363   000000 701000 xent               TSX1    pk4
         0 000364   000000 236007                    LDQ     0,DL
         0 000365   200013 756100                    STQ     ctx_+7,,AUTO
         0 000366   200004 473500                    LDP3    ctx_,,AUTO
         0 000367   300022 236100                    LDQ     18,,PR3
         0 000370   200011 756100                    STQ     ctx_+5,,AUTO
         0 000371   200011 630500                    EPPR0   ctx_+5,,AUTO
         0 000372   000703 631400 0                  EPPR1   s:657+24
         0 000373   000000 701000 xent               TSX1    pk4
         0 000374   000000 236007                    LDQ     0,DL
         0 000375   200014 756100                    STQ     ctx_+8,,AUTO
         0 000376   200004 473500                    LDP3    ctx_,,AUTO
         0 000377   300023 236100                    LDQ     19,,PR3
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=169
         0 000400   200011 756100                    STQ     ctx_+5,,AUTO
         0 000401   200011 630500                    EPPR0   ctx_+5,,AUTO
         0 000402   000703 631400 0                  EPPR1   s:657+24
         0 000403   000000 701000 xent               TSX1    pk4
         0 000404   000000 236007                    LDQ     0,DL
         0 000405   200015 756100                    STQ     ctx_+9,,AUTO
         0 000406   200004 473500                    LDP3    ctx_,,AUTO
         0 000407   300024 236100                    LDQ     20,,PR3
         0 000410   200011 756100                    STQ     ctx_+5,,AUTO
         0 000411   200011 630500                    EPPR0   ctx_+5,,AUTO
         0 000412   000703 631400 0                  EPPR1   s:657+24
         0 000413   000000 701000 xent               TSX1    pk4
         0 000414   000000 236007                    LDQ     0,DL
         0 000415   200016 756100                    STQ     ctx_+10,,AUTO
         0 000416   200004 473500                    LDP3    ctx_,,AUTO
         0 000417   300025 236100                    LDQ     21,,PR3
         0 000420   200011 756100                    STQ     ctx_+5,,AUTO
         0 000421   200011 630500                    EPPR0   ctx_+5,,AUTO
         0 000422   000703 631400 0                  EPPR1   s:657+24
         0 000423   000000 701000 xent               TSX1    pk4
         0 000424   000000 236007                    LDQ     0,DL
         0 000425   200017 756100                    STQ     ctx_+11,,AUTO
         0 000426   200012 630500                    EPPR0   ctx_+6,,AUTO
         0 000427   000724 631400 0                  EPPR1   s:657+41
         0 000430   000000 701000 xent               TSX1    printf
         0 000431   000000 236007                    LDQ     0,DL

      606       611    1                   pk4((*ctx_).ibuf.buf),  
      607       612    1                   pk4((*ctx_).ibuf.size),  
      608       613    1                   pk4((*ctx_).ibuf.csize),  
      609       614    1                   pk4((*ctx_).ioip),pk4((*ctx_).status1));  
      610       615    1           
      611       616    1        printf("\nioclist\n");  

    616  0 000432   000725 236000 0                  LDQ     s:657+42
         0 000433   200017 756100                    STQ     ctx_+11,,AUTO
         0 000434   200017 630500                    EPPR0   ctx_+11,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=170
         0 000435   000703 631400 0                  EPPR1   s:657+24
         0 000436   000000 701000 xent               TSX1    printf
         0 000437   000000 236007                    LDQ     0,DL

      612       617    1        printf("opcode      mode  tally    l66a     l6a \n");  

    617  0 000440   000726 236000 0                  LDQ     s:657+43
         0 000441   200017 756100                    STQ     ctx_+11,,AUTO
         0 000442   200017 630500                    EPPR0   ctx_+11,,AUTO
         0 000443   000703 631400 0                  EPPR1   s:657+24
         0 000444   000000 701000 xent               TSX1    printf
         0 000445   000000 236007                    LDQ     0,DL

      613       618    1        printf("------      ----  -----    ----     --- \n");  

    618  0 000446   000727 236000 0                  LDQ     s:657+44
         0 000447   200017 756100                    STQ     ctx_+11,,AUTO
         0 000450   200017 630500                    EPPR0   ctx_+11,,AUTO
         0 000451   000703 631400 0                  EPPR1   s:657+24
         0 000452   000000 701000 xent               TSX1    printf
         0 000453   000000 236007                    LDQ     0,DL

      614       619    1        for (i = 0;i<20;i++)  

    619  0 000454   200021 450100                    STZ     i,,AUTO

    619  0 000455   200021 236100                    LDQ     i,,AUTO
         0 000456   000024 116007                    CMPQ    20,DL
         0 000457   000645 605000 0                  TPL     s:656

      615       620    1               {  
      616       621    2               switch (pk2((*ctx_).ptr_dcw[i].op))  

    621  0 000460   200004 473500                    LDP3    ctx_,,AUTO
         0 000461   200021 236100                    LDQ     i,,AUTO
         0 000462   000002 736000                    QLS     2
         0 000463   000000 622006                    EAX2    0,QL
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=171
         0 000464   300026 236112                    LDQ     22,X2,PR3
         0 000465   000022 772000                    QRL     18
         0 000466   777777 376007                    ANQ     -1,DL
         0 000467   200017 756100                    STQ     ctx_+11,,AUTO
         0 000470   200017 630500                    EPPR0   ctx_+11,,AUTO
         0 000471   000703 631400 0                  EPPR1   s:657+24
         0 000472   000000 701000 xent               TSX1    pk2
         0 000473   000000 236007                    LDQ     0,DL
         0 000474   200022 756100                    STQ     i+1,,AUTO
         0 000475   000525 710000 0                  TRA     s:646+1

      617       622    2                       {  
      618       623    3                       case DISCONNECTINT:  
      619       624    3                               opcodex = 1;  

    624  0 000476   000001 236007                    LDQ     1,DL
         0 000477   200020 756100                    STQ     opcodex,,AUTO

      620       625    3                               break;  

    625  0 000500   000552 710000 0                  TRA     s:648

      621       626    3                       case DATAL6_L66:  
      622       627    3                               opcodex = 2;  

    627  0 000501   000002 236007                    LDQ     2,DL
         0 000502   200020 756100                    STQ     opcodex,,AUTO

      623       628    3                               break;  

    628  0 000503   000552 710000 0                  TRA     s:648

      624       629    3                       case DATAL66_L6:  
      625       630    3                               opcodex = 3;  

    630  0 000504   000003 236007                    LDQ     3,DL
         0 000505   200020 756100                    STQ     opcodex,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=172

      626       631    3                               break;  

    631  0 000506   000552 710000 0                  TRA     s:648

      627       632    3                       case READCLR_OR:  
      628       633    3                               opcodex = 4;  

    633  0 000507   000004 236007                    LDQ     4,DL
         0 000510   200020 756100                    STQ     opcodex,,AUTO

      629       634    3                               break;  

    634  0 000511   000552 710000 0                  TRA     s:648

      630       635    3                       case JUMP:  
      631       636    3                               opcodex = 5;  

    636  0 000512   000005 236007                    LDQ     5,DL
         0 000513   200020 756100                    STQ     opcodex,,AUTO

      632       637    3                               break;  

    637  0 000514   000552 710000 0                  TRA     s:648

      633       638    3                       case NOP:  
      634       639    3                               opcodex = 6;  

    639  0 000515   000006 236007                    LDQ     6,DL
         0 000516   200020 756100                    STQ     opcodex,,AUTO

      635       640    3                               break;  

    640  0 000517   000552 710000 0                  TRA     s:648

      636       641    3                       case INTL66:  
      637       642    3                               opcodex = 7;  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=173

    642  0 000520   000007 236007                    LDQ     7,DL
         0 000521   200020 756100                    STQ     opcodex,,AUTO

      638       643    3                               break;  

    643  0 000522   000552 710000 0                  TRA     s:648

      639       644    3                       default:  
      640       645    3                               opcodex = 0;  

    645  0 000523   200020 450100                    STZ     opcodex,,AUTO

      641       646    3                               break;  

    646  0 000524   000552 710000 0                  TRA     s:648
         0 000525   200022 235100                    LDA     i+1,,AUTO
         0 000526   000730 236000 0                  LDQ     s:657+45
         0 000527   200023 756100                    STQ     i+2,,AUTO
         0 000530   000001 236000 2                  LDQ     1
         0 000531   000001 736000                    QLS     1
         0 000532   200024 756100                    STQ     i+3,,AUTO
         0 000533   200023 036100                    ADLQ    i+2,,AUTO
         0 000534   000001 732000                    QRS     1
         0 000535   000730 376000 0                  ANQ     s:657+45
         0 000536   200023 116100                    CMPQ    i+2,,AUTO
         0 000537   000011 600004                    TZE     s:646+20,IC
         0 000540   000002 115006 2                  CMPA    2,QL
         0 000541   777771 604004                    TMI     s:646+6,IC
         0 000542   000003 605404                    TPNZ    s:646+17,IC
         0 000543   000003 235006 2                  LDA     3,QL
         0 000544   000000 710001                    TRA     0,AU
         0 000545   200023 756100                    STQ     i+2,,AUTO
         0 000546   200024 036100                    ADLQ    i+3,,AUTO
         0 000547   777765 710004                    TRA     s:646+8,IC
         0 000550   000000 235000 2                  LDA     0
         0 000551   000000 710001                    TRA     0,AU
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=174

      642       647    3                       }  
      643       648    2               printf("%11s %5s%6d  %#6x  %#6x\n",  

    648  0 000552   000731 236000 0                  LDQ     s:657+46
         0 000553   200012 756100                    STQ     ctx_+6,,AUTO
         0 000554   200020 722100                    LXL2    opcodex,,AUTO
         0 000555   000031 236012 xsym               LDQ     sigint#s+25,X2
         0 000556   200013 756100                    STQ     ctx_+7,,AUTO
         0 000557   200004 473500                    LDP3    ctx_,,AUTO
         0 000560   200021 236100                    LDQ     i,,AUTO
         0 000561   000002 736000                    QLS     2
         0 000562   000000 622006                    EAX2    0,QL
         0 000563   300026 236112                    LDQ     22,X2,PR3
         0 000564   000000 772000                    QRL     0
         0 000565   777777 376007                    ANQ     -1,DL
         0 000566   200011 756100                    STQ     ctx_+5,,AUTO
         0 000567   200011 630500                    EPPR0   ctx_+5,,AUTO
         0 000570   000703 631400 0                  EPPR1   s:657+24
         0 000571   000000 701000 xent               TSX1    pk2
         0 000572   000000 236007                    LDQ     0,DL
         0 000573   000000 622006                    EAX2    0,QL
         0 000574   000013 236012 xsym               LDQ     sigint#s+11,X2
         0 000575   200014 756100                    STQ     ctx_+8,,AUTO
         0 000576   200004 473500                    LDP3    ctx_,,AUTO
         0 000577   200021 236100                    LDQ     i,,AUTO
         0 000600   000002 736000                    QLS     2
         0 000601   000000 622006                    EAX2    0,QL
         0 000602   300027 236112                    LDQ     23,X2,PR3
         0 000603   200011 756100                    STQ     ctx_+5,,AUTO
         0 000604   200011 630500                    EPPR0   ctx_+5,,AUTO
         0 000605   000703 631400 0                  EPPR1   s:657+24
         0 000606   000000 701000 xent               TSX1    pk4
         0 000607   000000 236007                    LDQ     0,DL
         0 000610   200015 756100                    STQ     ctx_+9,,AUTO
         0 000611   200004 473500                    LDP3    ctx_,,AUTO
         0 000612   200021 236100                    LDQ     i,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=175
         0 000613   000002 736000                    QLS     2
         0 000614   000000 622006                    EAX2    0,QL
         0 000615   300030 236112                    LDQ     24,X2,PR3
         0 000616   200011 756100                    STQ     ctx_+5,,AUTO
         0 000617   200011 630500                    EPPR0   ctx_+5,,AUTO
         0 000620   000703 631400 0                  EPPR1   s:657+24
         0 000621   000000 701000 xent               TSX1    pk4
         0 000622   000000 236007                    LDQ     0,DL
         0 000623   200016 756100                    STQ     ctx_+10,,AUTO
         0 000624   200004 473500                    LDP3    ctx_,,AUTO
         0 000625   200021 236100                    LDQ     i,,AUTO
         0 000626   000002 736000                    QLS     2
         0 000627   000000 622006                    EAX2    0,QL
         0 000630   300031 236112                    LDQ     25,X2,PR3
         0 000631   200011 756100                    STQ     ctx_+5,,AUTO
         0 000632   200011 630500                    EPPR0   ctx_+5,,AUTO
         0 000633   000703 631400 0                  EPPR1   s:657+24
         0 000634   000000 701000 xent               TSX1    pk4
         0 000635   000000 236007                    LDQ     0,DL
         0 000636   200017 756100                    STQ     ctx_+11,,AUTO
         0 000637   200012 630500                    EPPR0   ctx_+6,,AUTO
         0 000640   000724 631400 0                  EPPR1   s:657+41
         0 000641   000000 701000 xent               TSX1    printf
         0 000642   000000 236007                    LDQ     0,DL

      644       649    2                       opcode[opcodex],  

    649  0 000643   200021 054100                    AOS     i,,AUTO
         0 000644   000455 710000 0                  TRA     s:619+1

      645       650    2                       mode[pk2((*ctx_).ptr_dcw[i].mode)],  
      646       651    2                       pk4((*ctx_).ptr_dcw[i].tally),  
      647       652    2                       pk4((*ctx_).ptr_dcw[i].l66a),  
      648       653    2                       pk4((*ctx_).ptr_dcw[i].l6a));  
      649       654    2               }  
      650       655    1           
      651       656    1        printf("\n  pcw[0]   pcw[1]\n");  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=176

    656  0 000645   000732 236000 0                  LDQ     s:657+47
         0 000646   200017 756100                    STQ     ctx_+11,,AUTO
         0 000647   200017 630500                    EPPR0   ctx_+11,,AUTO
         0 000650   000703 631400 0                  EPPR1   s:657+24
         0 000651   000000 701000 xent               TSX1    printf
         0 000652   000000 236007                    LDQ     0,DL

      652       657    1        printf("  %8.8x %8.8x \n",pk4((*ctx_).pcw[0]),pk4((*ctx_).pcw[1]));  

    657  0 000653   000733 236000 0                  LDQ     s:657+48
         0 000654   200015 756100                    STQ     ctx_+9,,AUTO
         0 000655   200004 473500                    LDP3    ctx_,,AUTO
         0 000656   300146 236100                    LDQ     102,,PR3
         0 000657   200014 756100                    STQ     ctx_+8,,AUTO
         0 000660   200014 630500                    EPPR0   ctx_+8,,AUTO
         0 000661   000703 631400 0                  EPPR1   s:657+24
         0 000662   000000 701000 xent               TSX1    pk4
         0 000663   000000 236007                    LDQ     0,DL
         0 000664   200016 756100                    STQ     ctx_+10,,AUTO
         0 000665   200004 473500                    LDP3    ctx_,,AUTO
         0 000666   300147 236100                    LDQ     103,,PR3
         0 000667   200014 756100                    STQ     ctx_+8,,AUTO
         0 000670   200014 630500                    EPPR0   ctx_+8,,AUTO
         0 000671   000703 631400 0                  EPPR1   s:657+24
         0 000672   000000 701000 xent               TSX1    pk4
         0 000673   000000 236007                    LDQ     0,DL
         0 000674   200017 756100                    STQ     ctx_+11,,AUTO
         0 000675   200015 630500                    EPPR0   ctx_+9,,AUTO
         0 000676   000734 631400 0                  EPPR1   s:657+49
         0 000677   000000 701000 xent               TSX1    printf
         0 000700   000000 236007                    LDQ     0,DL
         0 000701   000000 702000 xent               TSX2    _XBC_FARET
         0 000702   001520 000000 xsym               ZERO    sigint#c+848,0
         0 000703   000001 000000                    ZERO    1,0
         0 000704   001506 000000 xsym               ZERO    sigint#c+838,0
         0 000705   002201 000000 xsym               ZERO    sigint#c+1153,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=177
         0 000706   000007 000000                    ZERO    7,0
         0 000707   002351 000000 xsym               ZERO    sigint#c+1257,0
         0 000710   000313 000000 xsym               ZERO    sigint#c+203,0
         0 000711   000272 000000 xsym               ZERO    sigint#c+186,0
         0 000712   001473 000000 xsym               ZERO    sigint#c+827,0
         0 000713   002346 000000 xsym               ZERO    sigint#c+1254,0
         0 000714   000246 000000 xsym               ZERO    sigint#c+166,0
         0 000715   000222 000000 xsym               ZERO    sigint#c+146,0
         0 000716   001456 000000 xsym               ZERO    sigint#c+814,0
         0 000717   000010 000000                    ZERO    8,0
         0 000720   001437 000000 xsym               ZERO    sigint#c+799,0
         0 000721   000201 000000 xsym               ZERO    sigint#c+129,0
         0 000722   000160 000000 xsym               ZERO    sigint#c+112,0
         0 000723   001423 000000 xsym               ZERO    sigint#c+787,0
         0 000724   000006 000000                    ZERO    6,0
         0 000725   002343 000000 xsym               ZERO    sigint#c+1251,0
         0 000726   001410 000000 xsym               ZERO    sigint#c+776,0
         0 000727   001375 000000 xsym               ZERO    sigint#c+765,0
         0 000730   777777 777776                    ZERO    -1,-2
         0 000731   002172 000000 xsym               ZERO    sigint#c+1146,0
         0 000732   002165 000000 xsym               ZERO    sigint#c+1141,0
         0 000733   002161 000000 xsym               ZERO    sigint#c+1137,0
         0 000734   000003 000000                    ZERO    3,0

(unnamed)
 Sect OctLoc
   2     000   000523 006000   000000 000007   000000 000000   000515 006000    ................
   2     004   000000 000001   000512 006000   000000 000002   000476 006000    ................
   2     010   000000 000030   000520 006000   000000 000060   000504 006000    ...........0....
   2     014   000000 000064   000507 006000   000000 000070   000501 006000    ...4.......8....
   2     020   0***** ******                                                    ....
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=178

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0   537-   658     42   477     0      0  y        0   1 dibctxdata
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=179

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     8 Assign    21 Call       2 DoIndx     1 DoCase     8 Exit       1 EndInd
     1 Proc

 # major stmts=   32 Code/major=14.93 # stmts=   42 Code/stmt=11.38  Point total= 78.9
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=180

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr              4-0-0/w PTR         r,m   1 ctx_
    21-0-0/w SBIN        r,m   1 i                         20-0-0/w SBIN        r,m   1 opcodex

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
    22-0-0/w PTR         r,m   1 cf(0:6)                   22-0-0/w PTR         r,m   1 cf(0:6)
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 interactive                0-0-0/c STRC(432)   r,m   1 ipc
     0-0-0/w SBIN        r,m   1 kmemfd                     0-0-0/w SBIN        r,m   1 ldctaddr
     0-0-0/w SBIN        r,m   1 ldctcnt                    0-0-0/w SBIN        r,m   1 ldctsave
     0-0-0/w SBIN        r,m   1 messaddr                   0-0-0/w PTR         r,m   1 messc
     0-0-0/w SBIN        r,m   1 messcnt                   13-0-0/w PTR         r,m   1 mode(0:1)
    13-0-0/w PTR         r,m   1 mode(0:1)                 26-0-0/c CHAR        r,m   1 op
    31-0-0/w PTR         r,m   1 opcode(0:7)               31-0-0/w PTR         r,m   1 opcode(0:7)
     0-0-0/w PTR         r,m   1 optarg                   146-0-0/c CHAR        r,m   1 path(0:63)
     0-0-0/c CHAR        r,m   1 prevop                     0-0-0/w SBIN        r,m   1 procflg
     1-0-0/c STRC(1116)  r,m   1 qhdr                       0-0-0/w SBIN        r,m   1 qhdrflg
     0-0-0/w SBIN        r,m   1 rawaddr                    0-0-0/w SBIN        r,m   1 rawbound
     0-0-0/w SBIN        r,m   1 rawdump                    0-0-0/c CHAR        r,m   1 readbuf(0:79)
     0-0-0/c CHAR        r,m   1 savebuf(0:79)              0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
    15-0-0/w PTR         r,m   1 state(0:4)                15-0-0/w PTR         r,m   1 state(0:4)
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=181
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=182

 Object Unit name= getqhdr                                    File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:14:39.56 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero   185    271  getqhdr
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  getqhdr

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_0
                       Std       0 fetchdibdat
                       Std       0 printf
                       Std       0 pk4
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=183

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=184


      654       659                
      655       661                
      656       662                
      657       663             /*  
      658       664              *             getqhdr -  
      659       665              */  
      660       666                
      661       667                
      662       668             getqhdr()  
      663       669             {  

    669  0 000000   000000 700000 xent  getqhdr      TSX0    _XBC_AUTO_0
         0 000001   000022 000000                    ZERO    18,0

      664       670    1        if (fetchdibdat(dibfd,&qhdr,sizeof(qhdr),DIB_Q-DIB_BASE)<0)  

    670  0 000002   000000 236000 xsym               LDQ     dibfd
         0 000003   200004 756100                    STQ     __varyarg_ptr+1,,AUTO
         0 000004   000263 236000 0                  LDQ     s:698+2
         0 000005   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000006   000174 236007                    LDQ     124,DL
         0 000007   200006 756100                    STQ     __varyarg_ptr+3,,AUTO
         0 000010   400000 236007                    LDQ     -131072,DL
         0 000011   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000012   200004 630500                    EPPR0   __varyarg_ptr+1,,AUTO
         0 000013   000264 631400 0                  EPPR1   s:698+3
         0 000014   000000 701000 xent               TSX1    fetchdibdat
         0 000015   000000 236007                    LDQ     0,DL
         0 000016   200010 756100                    STQ     __varyarg_ptr+5,,AUTO
         0 000017   200010 234100                    SZN     __varyarg_ptr+5,,AUTO
         0 000020   000035 605000 0                  TPL     s:676

      665       671    1               {  
      666       672    2               printf("can't fetch dib Q header\n");  

    672  0 000021   000265 236000 0                  LDQ     s:698+4
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=185
         0 000022   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000023   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000024   000266 631400 0                  EPPR1   s:698+5
         0 000025   000000 701000 xent               TSX1    printf
         0 000026   000000 236007                    LDQ     0,DL

      667       673    2               dibctx = qhdrflg = 0;  /* dont do these if can't read q header*/  

    673  0 000027   000000 450000 xsym               STZ     qhdrflg
         0 000030   000000 236000 xsym               LDQ     qhdrflg
         0 000031   000000 756000 xsym               STQ     dibctx

      668       674    2               return -1;  

    674  0 000032   000267 236000 0                  LDQ     s:698+6
         0 000033   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000034   000261 710000 0                  TRA     s:698

      669       675    2               }  
      670       676    1              qhdr.rcq.iptr = pk4(qhdr.rcq.iptr);  

    676  0 000035   000000 236000 xsym               LDQ     qhdr
         0 000036   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000037   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000040   000266 631400 0                  EPPR1   s:698+5
         0 000041   000000 701000 xent               TSX1    pk4
         0 000042   000000 236007                    LDQ     0,DL
         0 000043   000000 756000 xsym               STQ     qhdr

      671       677    1              qhdr.rcq.rptr = pk4(qhdr.rcq.rptr);  

    677  0 000044   000001 236000 xsym               LDQ     qhdr+1
         0 000045   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000046   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000047   000266 631400 0                  EPPR1   s:698+5
         0 000050   000000 701000 xent               TSX1    pk4
         0 000051   000000 236007                    LDQ     0,DL
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=186
         0 000052   000001 756000 xsym               STQ     qhdr+1

      672       678    1              qhdr.scq.iptr = pk4(qhdr.scq.iptr);  

    678  0 000053   000004 236000 xsym               LDQ     qhdr+4
         0 000054   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000055   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000056   000266 631400 0                  EPPR1   s:698+5
         0 000057   000000 701000 xent               TSX1    pk4
         0 000060   000000 236007                    LDQ     0,DL
         0 000061   000004 756000 xsym               STQ     qhdr+4

      673       679    1              qhdr.scq.rptr = pk4(qhdr.scq.rptr);  

    679  0 000062   000005 236000 xsym               LDQ     qhdr+5
         0 000063   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000064   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000065   000266 631400 0                  EPPR1   s:698+5
         0 000066   000000 701000 xent               TSX1    pk4
         0 000067   000000 236007                    LDQ     0,DL
         0 000070   000005 756000 xsym               STQ     qhdr+5

      674       680    1              qhdr.rcq.sz = pk4(qhdr.rcq.sz);  

    680  0 000071   000002 236000 xsym               LDQ     qhdr+2
         0 000072   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000073   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000074   000266 631400 0                  EPPR1   s:698+5
         0 000075   000000 701000 xent               TSX1    pk4
         0 000076   000000 236007                    LDQ     0,DL
         0 000077   000002 756000 xsym               STQ     qhdr+2

      675       681    1              qhdr.scq.sz = pk4(qhdr.scq.sz);  

    681  0 000100   000006 236000 xsym               LDQ     qhdr+6
         0 000101   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000102   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=187
         0 000103   000266 631400 0                  EPPR1   s:698+5
         0 000104   000000 701000 xent               TSX1    pk4
         0 000105   000000 236007                    LDQ     0,DL
         0 000106   000006 756000 xsym               STQ     qhdr+6

      676       682    1              qhdr.rcq.offset = pk4(qhdr.rcq.offset);  

    682  0 000107   000003 236000 xsym               LDQ     qhdr+3
         0 000110   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000111   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000112   000266 631400 0                  EPPR1   s:698+5
         0 000113   000000 701000 xent               TSX1    pk4
         0 000114   000000 236007                    LDQ     0,DL
         0 000115   000003 756000 xsym               STQ     qhdr+3

      677       683    1              qhdr.scq.offset = pk4(qhdr.scq.offset);  

    683  0 000116   000007 236000 xsym               LDQ     qhdr+7
         0 000117   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000120   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000121   000266 631400 0                  EPPR1   s:698+5
         0 000122   000000 701000 xent               TSX1    pk4
         0 000123   000000 236007                    LDQ     0,DL
         0 000124   000007 756000 xsym               STQ     qhdr+7

      678       684    1              qhdr.scq.brdrptr = pk4(qhdr.scq.brdrptr);  

    684  0 000125   000010 236000 xsym               LDQ     qhdr+8
         0 000126   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000127   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000130   000266 631400 0                  EPPR1   s:698+5
         0 000131   000000 701000 xent               TSX1    pk4
         0 000132   000000 236007                    LDQ     0,DL
         0 000133   000010 756000 xsym               STQ     qhdr+8

      679       685    1              qhdr.scrfrm = pk4(qhdr.scrfrm);  

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=188
    685  0 000134   000012 236000 xsym               LDQ     qhdr+10
         0 000135   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000136   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000137   000266 631400 0                  EPPR1   s:698+5
         0 000140   000000 701000 xent               TSX1    pk4
         0 000141   000000 236007                    LDQ     0,DL
         0 000142   000012 756000 xsym               STQ     qhdr+10

      680       686    1              qhdr.ctx_offset = pk4(qhdr.ctx_offset);  

    686  0 000143   000013 236000 xsym               LDQ     qhdr+11
         0 000144   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000145   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000146   000266 631400 0                  EPPR1   s:698+5
         0 000147   000000 701000 xent               TSX1    pk4
         0 000150   000000 236007                    LDQ     0,DL
         0 000151   000013 756000 xsym               STQ     qhdr+11

      681       687    1              qhdr.ctx_sz = pk4(qhdr.ctx_sz);  

    687  0 000152   000014 236000 xsym               LDQ     qhdr+12
         0 000153   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000154   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000155   000266 631400 0                  EPPR1   s:698+5
         0 000156   000000 701000 xent               TSX1    pk4
         0 000157   000000 236007                    LDQ     0,DL
         0 000160   000014 756000 xsym               STQ     qhdr+12

      682       688    1              qhdr.ctx_wu = pk4(qhdr.ctx_wu);  

    688  0 000161   000015 236000 xsym               LDQ     qhdr+13
         0 000162   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000163   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000164   000266 631400 0                  EPPR1   s:698+5
         0 000165   000000 701000 xent               TSX1    pk4
         0 000166   000000 236007                    LDQ     0,DL
         0 000167   000015 756000 xsym               STQ     qhdr+13
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=189

      683       689    1              qhdr.msgs_scq = pk4(qhdr.msgs_scq);  

    689  0 000170   000016 236000 xsym               LDQ     qhdr+14
         0 000171   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000172   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000173   000266 631400 0                  EPPR1   s:698+5
         0 000174   000000 701000 xent               TSX1    pk4
         0 000175   000000 236007                    LDQ     0,DL
         0 000176   000016 756000 xsym               STQ     qhdr+14

      684       690    1              qhdr.mbc_scq = pk4(qhdr.mbc_scq);  

    690  0 000177   000017 236000 xsym               LDQ     qhdr+15
         0 000200   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000201   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000202   000266 631400 0                  EPPR1   s:698+5
         0 000203   000000 701000 xent               TSX1    pk4
         0 000204   000000 236007                    LDQ     0,DL
         0 000205   000017 756000 xsym               STQ     qhdr+15

      685       691    1              qhdr.msgs_rcq = pk4(qhdr.msgs_rcq);  

    691  0 000206   000021 236000 xsym               LDQ     qhdr+17
         0 000207   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000210   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000211   000266 631400 0                  EPPR1   s:698+5
         0 000212   000000 701000 xent               TSX1    pk4
         0 000213   000000 236007                    LDQ     0,DL
         0 000214   000021 756000 xsym               STQ     qhdr+17

      686       692    1              qhdr.mbc_rcq = pk4(qhdr.mbc_rcq);  

    692  0 000215   000022 236000 xsym               LDQ     qhdr+18
         0 000216   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000217   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000220   000266 631400 0                  EPPR1   s:698+5
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=190
         0 000221   000000 701000 xent               TSX1    pk4
         0 000222   000000 236007                    LDQ     0,DL
         0 000223   000022 756000 xsym               STQ     qhdr+18

      687       693    1              qhdr.wrap_rcq = pk4(qhdr.wrap_rcq);  

    693  0 000224   000023 236000 xsym               LDQ     qhdr+19
         0 000225   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000226   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000227   000266 631400 0                  EPPR1   s:698+5
         0 000230   000000 701000 xent               TSX1    pk4
         0 000231   000000 236007                    LDQ     0,DL
         0 000232   000023 756000 xsym               STQ     qhdr+19

      688       694    1              qhdr.wrap_scq = pk4(qhdr.wrap_scq);  

    694  0 000233   000020 236000 xsym               LDQ     qhdr+16
         0 000234   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000235   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000236   000266 631400 0                  EPPR1   s:698+5
         0 000237   000000 701000 xent               TSX1    pk4
         0 000240   000000 236007                    LDQ     0,DL
         0 000241   000020 756000 xsym               STQ     qhdr+16

      689       695    1              qhdr.last_rcqptr = pk4(qhdr.last_rcqptr);  

    695  0 000242   000024 236000 xsym               LDQ     qhdr+20
         0 000243   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000244   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000245   000266 631400 0                  EPPR1   s:698+5
         0 000246   000000 701000 xent               TSX1    pk4
         0 000247   000000 236007                    LDQ     0,DL
         0 000250   000024 756000 xsym               STQ     qhdr+20

      690       696    1              qhdr.last_scqptr = pk4(qhdr.last_scqptr);  

    696  0 000251   000025 236000 xsym               LDQ     qhdr+21
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=191
         0 000252   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000253   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000254   000266 631400 0                  EPPR1   s:698+5
         0 000255   000000 701000 xent               TSX1    pk4
         0 000256   000000 236007                    LDQ     0,DL
         0 000257   000025 756000 xsym               STQ     qhdr+21

      691       697    1              return 0;  

    697  0 000260   200007 450100                    STZ     __varyarg_ptr+4,,AUTO

      692       698    1        }  

    698  0 000261   200007 236100                    LDQ     __varyarg_ptr+4,,AUTO
         0 000262   000000 702000 xent               TSX2    _XBC_FARET
         0 000263   000000 000000 xsym               ZERO    qhdr0,0
         0 000264   000004 000000                    ZERO    4,0
         0 000265   002152 000000 xsym               ZERO    sigint#c+1130,0
         0 000266   000001 000000                    ZERO    1,0
         0 000267   777777 777777                    ZERO    -1,-1
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=192

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0   669-   698     28   467     0      0  y        0   1 getqhdr
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=193

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

    22 Assign     1 Call       1 If         2 Return     1 Proc       1 EndPrc


 # major stmts=   26 Code/major= 7.11 # stmts=   28 Code/stmt= 6.60  Point total= 86.3
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=194

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=195
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=196

 Object Unit name= qdata                                      File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:14:49.12 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero   354    542  qdata
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  qdata

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_1
                       Std       0 printf
                       Std       0 messhdr
                       Std       0 messdata
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=197

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=198


      694       700                
      695       701             /*  
      696       702              *             qdata -  
      697       703              */  
      698       704                
      699       705                
      700       706             qdata(qhdr)  
      701       707                
      702       708             struct knh_qhdr *qhdr;  

    708  0 000000   000000 700000 xent  qdata        TSX0    _XBC_AUTO_1
         0 000001   000030 000001                    ZERO    24,1

      703       709                
      704       710             {  
      705       711    1           
      706       712    1        if (qhdrflg == 0) goto msgdump;  

    712  0 000002   000000 234000 xsym               SZN     qhdrflg
         0 000003   000005 601000 0                  TNZ     s:714

    712  0 000004   000300 710000 0                  TRA     msgdump

      707       713    1           
      708       714    1        printf("\n               DIB Q context \n");  

    714  0 000005   000510 236000 0                  LDQ     s:804+2
         0 000006   200017 756100                    STQ     qhdr+11,,AUTO
         0 000007   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000010   000511 631400 0                  EPPR1   s:804+3
         0 000011   000000 701000 xent               TSX1    printf
         0 000012   000000 236007                    LDQ     0,DL

      709       715    1        printf("    rcq                                 scq\n");  

    715  0 000013   000512 236000 0                  LDQ     s:804+4
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=199
         0 000014   200017 756100                    STQ     qhdr+11,,AUTO
         0 000015   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000016   000511 631400 0                  EPPR1   s:804+3
         0 000017   000000 701000 xent               TSX1    printf
         0 000020   000000 236007                    LDQ     0,DL

      710       716    1        printf("    iptr     rptr       sz   offset     iptr     rptr      sz offse  

    716  0 000021   000513 236000 0                  LDQ     s:804+5
         0 000022   200017 756100                    STQ     qhdr+11,,AUTO
         0 000023   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000024   000511 631400 0                  EPPR1   s:804+3
         0 000025   000000 701000 xent               TSX1    printf
         0 000026   000000 236007                    LDQ     0,DL

      711       717    1        printf("    ----     ----       --   ------     ----     ----      -- -----  

    717  0 000027   000514 236000 0                  LDQ     s:804+6
         0 000030   200017 756100                    STQ     qhdr+11,,AUTO
         0 000031   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000032   000511 631400 0                  EPPR1   s:804+3
         0 000033   000000 701000 xent               TSX1    printf
         0 000034   000000 236007                    LDQ     0,DL

      712       718    1        printf("%#8x %#8x %#8x %#8x %#8x %#8x %#8x %#8x %#8x\n",  

    718  0 000035   000515 236000 0                  LDQ     s:804+7
         0 000036   200006 756100                    STQ     qhdr+2,,AUTO
         0 000037   200004 473500                    LDP3    qhdr,,AUTO
         0 000040   200004 474500                    LDP4    qhdr,,AUTO
         0 000041   400000 236100                    LDQ     0,,PR4
         0 000042   000516 076000 0                  ADQ     s:804+8
         0 000043   300003 076100                    ADQ     3,,PR3
         0 000044   200007 756100                    STQ     qhdr+3,,AUTO
         0 000045   400001 236100                    LDQ     1,,PR4
         0 000046   000516 076000 0                  ADQ     s:804+8
         0 000047   300003 076100                    ADQ     3,,PR3
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=200
         0 000050   200010 756100                    STQ     qhdr+4,,AUTO
         0 000051   300002 236100                    LDQ     2,,PR3
         0 000052   200011 756100                    STQ     qhdr+5,,AUTO
         0 000053   300003 236100                    LDQ     3,,PR3
         0 000054   200012 756100                    STQ     qhdr+6,,AUTO
         0 000055   400004 236100                    LDQ     4,,PR4
         0 000056   000516 076000 0                  ADQ     s:804+8
         0 000057   300007 076100                    ADQ     7,,PR3
         0 000060   200013 756100                    STQ     qhdr+7,,AUTO
         0 000061   400005 236100                    LDQ     5,,PR4
         0 000062   000516 076000 0                  ADQ     s:804+8
         0 000063   300007 076100                    ADQ     7,,PR3
         0 000064   200014 756100                    STQ     qhdr+8,,AUTO
         0 000065   300006 236100                    LDQ     6,,PR3
         0 000066   200015 756100                    STQ     qhdr+9,,AUTO
         0 000067   300007 236100                    LDQ     7,,PR3
         0 000070   200016 756100                    STQ     qhdr+10,,AUTO
         0 000071   300010 236100                    LDQ     8,,PR3
         0 000072   200017 756100                    STQ     qhdr+11,,AUTO
         0 000073   200006 630500                    EPPR0   qhdr+2,,AUTO
         0 000074   000517 631400 0                  EPPR1   s:804+9
         0 000075   000000 701000 xent               TSX1    printf
         0 000076   000000 236007                    LDQ     0,DL

      713       719    1               qhdr->rcq.iptr+CQ+qhdr->rcq.offset,  
      714       720    1               qhdr->rcq.rptr+CQ+qhdr->rcq.offset,  
      715       721    1               qhdr->rcq.sz,  
      716       722    1               qhdr->rcq.offset,  
      717       723    1               qhdr->scq.iptr+CQ+qhdr->scq.offset,  
      718       724    1               qhdr->scq.rptr+CQ+qhdr->scq.offset,  
      719       725    1               qhdr->scq.sz,  
      720       726    1               qhdr->scq.offset,  
      721       727    1               qhdr->scq.brdrptr);  
      722       728    1           
      723       729    1        printf("\n");  

    729  0 000077   000520 236000 0                  LDQ     s:804+10
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=201
         0 000100   200017 756100                    STQ     qhdr+11,,AUTO
         0 000101   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000102   000511 631400 0                  EPPR1   s:804+3
         0 000103   000000 701000 xent               TSX1    printf
         0 000104   000000 236007                    LDQ     0,DL

      724       730    1        printf("  scrfrm ctx_offset ctx_sz   ctx_wu\n");  

    730  0 000105   000521 236000 0                  LDQ     s:804+11
         0 000106   200017 756100                    STQ     qhdr+11,,AUTO
         0 000107   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000110   000511 631400 0                  EPPR1   s:804+3
         0 000111   000000 701000 xent               TSX1    printf
         0 000112   000000 236007                    LDQ     0,DL

      725       731    1        printf("  ------ ---------- ------   ------\n");  

    731  0 000113   000522 236000 0                  LDQ     s:804+12
         0 000114   200017 756100                    STQ     qhdr+11,,AUTO
         0 000115   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000116   000511 631400 0                  EPPR1   s:804+3
         0 000117   000000 701000 xent               TSX1    printf
         0 000120   000000 236007                    LDQ     0,DL

      726       732    1        printf("%#8x %#8x %#8x %8d\n",  

    732  0 000121   000523 236000 0                  LDQ     s:804+13
         0 000122   200013 756100                    STQ     qhdr+7,,AUTO
         0 000123   200004 473500                    LDP3    qhdr,,AUTO
         0 000124   300012 236100                    LDQ     10,,PR3
         0 000125   200014 756100                    STQ     qhdr+8,,AUTO
         0 000126   300013 236100                    LDQ     11,,PR3
         0 000127   200015 756100                    STQ     qhdr+9,,AUTO
         0 000130   300014 236100                    LDQ     12,,PR3
         0 000131   200016 756100                    STQ     qhdr+10,,AUTO
         0 000132   300015 236100                    LDQ     13,,PR3
         0 000133   200017 756100                    STQ     qhdr+11,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=202
         0 000134   200013 630500                    EPPR0   qhdr+7,,AUTO
         0 000135   000524 631400 0                  EPPR1   s:804+14
         0 000136   000000 701000 xent               TSX1    printf
         0 000137   000000 236007                    LDQ     0,DL

      727       733    1              qhdr->scrfrm,  
      728       734    1              qhdr->ctx_offset,  
      729       735    1              qhdr->ctx_sz,  
      730       736    1              qhdr->ctx_wu);  
      731       737    1           
      732       738    1        printf("\n");  

    738  0 000140   000520 236000 0                  LDQ     s:804+10
         0 000141   200017 756100                    STQ     qhdr+11,,AUTO
         0 000142   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000143   000511 631400 0                  EPPR1   s:804+3
         0 000144   000000 701000 xent               TSX1    printf
         0 000145   000000 236007                    LDQ     0,DL

      733       739    1        printf("     scq stats                        rcq stats\n");  

    739  0 000146   000525 236000 0                  LDQ     s:804+15
         0 000147   200017 756100                    STQ     qhdr+11,,AUTO
         0 000150   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000151   000511 631400 0                  EPPR1   s:804+3
         0 000152   000000 701000 xent               TSX1    printf
         0 000153   000000 236007                    LDQ     0,DL

      734       740    1        printf("     #msgs  #msgbytes      #wrap      #msgs  #msgbytes   #wrap\n");  

    740  0 000154   000526 236000 0                  LDQ     s:804+16
         0 000155   200017 756100                    STQ     qhdr+11,,AUTO
         0 000156   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000157   000511 631400 0                  EPPR1   s:804+3
         0 000160   000000 701000 xent               TSX1    printf
         0 000161   000000 236007                    LDQ     0,DL

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=203
      735       741    1        printf("     -----  ---------      -----      -----  ---------   -----\n");  

    741  0 000162   000527 236000 0                  LDQ     s:804+17
         0 000163   200017 756100                    STQ     qhdr+11,,AUTO
         0 000164   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000165   000511 631400 0                  EPPR1   s:804+3
         0 000166   000000 701000 xent               TSX1    printf
         0 000167   000000 236007                    LDQ     0,DL

      736       742    1        printf("%10d %10d %10d %10d %10d %10d\n",  

    742  0 000170   000530 236000 0                  LDQ     s:804+18
         0 000171   200011 756100                    STQ     qhdr+5,,AUTO
         0 000172   200004 473500                    LDP3    qhdr,,AUTO
         0 000173   300016 236100                    LDQ     14,,PR3
         0 000174   200012 756100                    STQ     qhdr+6,,AUTO
         0 000175   300017 236100                    LDQ     15,,PR3
         0 000176   200013 756100                    STQ     qhdr+7,,AUTO
         0 000177   300020 236100                    LDQ     16,,PR3
         0 000200   200014 756100                    STQ     qhdr+8,,AUTO
         0 000201   300021 236100                    LDQ     17,,PR3
         0 000202   200015 756100                    STQ     qhdr+9,,AUTO
         0 000203   300022 236100                    LDQ     18,,PR3
         0 000204   200016 756100                    STQ     qhdr+10,,AUTO
         0 000205   300023 236100                    LDQ     19,,PR3
         0 000206   200017 756100                    STQ     qhdr+11,,AUTO
         0 000207   200011 630500                    EPPR0   qhdr+5,,AUTO
         0 000210   000531 631400 0                  EPPR1   s:804+19
         0 000211   000000 701000 xent               TSX1    printf
         0 000212   000000 236007                    LDQ     0,DL

      737       743    1               qhdr->msgs_scq,  
      738       744    1               qhdr->mbc_scq,  
      739       745    1               qhdr->wrap_scq,  
      740       746    1               qhdr->msgs_rcq,  
      741       747    1               qhdr->mbc_rcq,  
      742       748    1               qhdr->wrap_rcq);  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=204
      743       749    1           
      744       750    1        printf("\n");  

    750  0 000213   000520 236000 0                  LDQ     s:804+10
         0 000214   200017 756100                    STQ     qhdr+11,,AUTO
         0 000215   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000216   000511 631400 0                  EPPR1   s:804+3
         0 000217   000000 701000 xent               TSX1    printf
         0 000220   000000 236007                    LDQ     0,DL

      745       751    1        printf("  last      last      time\n");  

    751  0 000221   000532 236000 0                  LDQ     s:804+20
         0 000222   200017 756100                    STQ     qhdr+11,,AUTO
         0 000223   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000224   000511 631400 0                  EPPR1   s:804+3
         0 000225   000000 701000 xent               TSX1    printf
         0 000226   000000 236007                    LDQ     0,DL

      746       752    1        printf("  rcqptr   scqptr     free function           time   timecntr\n");  

    752  0 000227   000533 236000 0                  LDQ     s:804+21
         0 000230   200017 756100                    STQ     qhdr+11,,AUTO
         0 000231   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000232   000511 631400 0                  EPPR1   s:804+3
         0 000233   000000 701000 xent               TSX1    printf
         0 000234   000000 236007                    LDQ     0,DL

      747       753    1        printf("  ------   ------     ---- --------           ----   --------\n");  

    753  0 000235   000534 236000 0                  LDQ     s:804+22
         0 000236   200017 756100                    STQ     qhdr+11,,AUTO
         0 000237   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000240   000511 631400 0                  EPPR1   s:804+3
         0 000241   000000 701000 xent               TSX1    printf
         0 000242   000000 236007                    LDQ     0,DL

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=205
      748       754    1        printf("%#8x %#8x        %1x       %2d %.14s %10d\n",  

    754  0 000243   000535 236000 0                  LDQ     s:804+23
         0 000244   200011 756100                    STQ     qhdr+5,,AUTO
         0 000245   200004 473500                    LDP3    qhdr,,AUTO
         0 000246   300024 236100                    LDQ     20,,PR3
         0 000247   200012 756100                    STQ     qhdr+6,,AUTO
         0 000250   300025 236100                    LDQ     21,,PR3
         0 000251   200013 756100                    STQ     qhdr+7,,AUTO
         0 000252   300026 236100                    LDQ     22,,PR3
         0 000253   000042 772000                    QRL     34
         0 000254   000001 376007                    ANQ     1,DL
         0 000255   200014 756100                    STQ     qhdr+8,,AUTO
         0 000256   300026 236100                    LDQ     22,,PR3
         0 000257   000022 772000                    QRL     18
         0 000260   177777 376007                    ANQ     65535,DL
         0 000261   200015 756100                    STQ     qhdr+9,,AUTO
         0 000262   300032 630500                    EPPR0   26,,PR3
         0 000263   200016 450500                    STP0    qhdr+10,,AUTO
         0 000264   300036 236100                    LDQ     30,,PR3
         0 000265   200017 756100                    STQ     qhdr+11,,AUTO
         0 000266   200011 630500                    EPPR0   qhdr+5,,AUTO
         0 000267   000531 631400 0                  EPPR1   s:804+19
         0 000270   000000 701000 xent               TSX1    printf
         0 000271   000000 236007                    LDQ     0,DL

      749       755    1               qhdr->last_rcqptr,  
      750       756    1               qhdr->last_scqptr,  
      751       757    1               qhdr->timemsg.mess.free,  
      752       758    1               qhdr->timemsg.mess.function,  
      753       759    1               qhdr->timemsg.time,  
      754       760    1               qhdr->timectr);  
      755       761    1           
      756       762    1               if (--qhdrflg == 0) return 0;  

    762  0 000272   000001 336007                    LCQ     1,DL
         0 000273   000000 056000 xsym               ASQ     qhdrflg
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=206
         0 000274   000000 234000 xsym               SZN     qhdrflg
         0 000275   000300 601000 0                  TNZ     msgdump

    762  0 000276   200017 450100                    STZ     qhdr+11,,AUTO
         0 000277   000506 710000 0                  TRA     s:804

      757       763    1        msgdump: ;  
      758       764    1               if (qhdr->rcq.iptr != qhdr->rcq.rptr)  

    764  0 000300   200004 473500       msgdump      LDP3    qhdr,,AUTO
         0 000301   200004 474500                    LDP4    qhdr,,AUTO
         0 000302   400000 236100                    LDQ     0,,PR4
         0 000303   300001 116100                    CMPQ    1,,PR3
         0 000304   000401 600000 0                  TZE     s:784

      759       765    1                       {  
      760       766    2                       printf("\n");  

    766  0 000305   000520 236000 0                  LDQ     s:804+10
         0 000306   200017 756100                    STQ     qhdr+11,,AUTO
         0 000307   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000310   000511 631400 0                  EPPR1   s:804+3
         0 000311   000000 701000 xent               TSX1    printf
         0 000312   000000 236007                    LDQ     0,DL

      761       767    2                       messhdr("rcq");  

    767  0 000313   000536 236000 0                  LDQ     s:804+24
         0 000314   200017 756100                    STQ     qhdr+11,,AUTO
         0 000315   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000316   000511 631400 0                  EPPR1   s:804+3
         0 000317   000000 701000 xent               TSX1    messhdr
         0 000320   000000 236007                    LDQ     0,DL

      762       768    2                       messaddr = qhdr->rcq.rptr+CQ+qhdr->rcq.offset; /* start */  

    768  0 000321   200004 473500                    LDP3    qhdr,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=207
         0 000322   200004 474500                    LDP4    qhdr,,AUTO
         0 000323   400001 236100                    LDQ     1,,PR4
         0 000324   000516 076000 0                  ADQ     s:804+8
         0 000325   300003 076100                    ADQ     3,,PR3
         0 000326   000000 756000 xsym               STQ     messaddr

      763       769    2                       messcnt = qhdr->rcq.iptr+CQ+qhdr->rcq.offset; /* end */  

    769  0 000327   400000 236100                    LDQ     0,,PR4
         0 000330   000516 076000 0                  ADQ     s:804+8
         0 000331   300003 076100                    ADQ     3,,PR3
         0 000332   000000 756000 xsym               STQ     messcnt

      764       770    2                    qhdrflg = qhdr->rcq.sz+CQ+qhdr->rcq.offset-sizeof(struct knh_me  

    770  0 000333   400002 236100                    LDQ     2,,PR4
         0 000334   000516 076000 0                  ADQ     s:804+8
         0 000335   300003 076100                    ADQ     3,,PR3
         0 000336   000020 176007                    SBQ     16,DL
         0 000337   000000 756000 xsym               STQ     qhdrflg

      765       771    2                       if (messaddr<messcnt) qhdrflg = 0;  

    771  0 000340   000000 236000 xsym               LDQ     messaddr
         0 000341   000000 116000 xsym               CMPQ    messcnt
         0 000342   000344 605000 0                  TPL     s:772

    771  0 000343   000000 450000 xsym               STZ     qhdrflg

      766       772    2                       while (messaddr<messcnt || messaddr<qhdrflg)  

    772  0 000344   000000 236000 xsym               LDQ     messaddr
         0 000345   000000 116000 xsym               CMPQ    messcnt
         0 000346   000352 604000 0                  TMI     s:774
         0 000347   000000 236000 xsym               LDQ     messaddr
         0 000350   000000 116000 xsym               CMPQ    qhdrflg
         0 000351   000401 605000 0                  TPL     s:784
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=208

      767       773    2                               {  
      768       774    3                               messaddr = messdata(dibfd,messaddr,1);  

    774  0 000352   000000 236000 xsym               LDQ     dibfd
         0 000353   200015 756100                    STQ     qhdr+9,,AUTO
         0 000354   000000 236000 xsym               LDQ     messaddr
         0 000355   200016 756100                    STQ     qhdr+10,,AUTO
         0 000356   000001 236007                    LDQ     1,DL
         0 000357   200017 756100                    STQ     qhdr+11,,AUTO
         0 000360   200015 630500                    EPPR0   qhdr+9,,AUTO
         0 000361   000537 631400 0                  EPPR1   s:804+25
         0 000362   000000 701000 xent               TSX1    messdata
         0 000363   000000 236007                    LDQ     0,DL
         0 000364   000000 756000 xsym               STQ     messaddr

      769       775    3                               if (qhdrflg && messaddr>=qhdrflg)  

    775  0 000365   000000 234000 xsym               SZN     qhdrflg
         0 000366   000377 600000 0                  TZE     s:780
         0 000367   000000 236000 xsym               LDQ     messaddr
         0 000370   000000 116000 xsym               CMPQ    qhdrflg
         0 000371   000377 604000 0                  TMI     s:780

      770       776    3                                       {  
      771       777    4                                       messaddr = qhdr->rcq.offset+CQ;  

    777  0 000372   200004 473500                    LDP3    qhdr,,AUTO
         0 000373   300003 236100                    LDQ     3,,PR3
         0 000374   000516 076000 0                  ADQ     s:804+8
         0 000375   000000 756000 xsym               STQ     messaddr

      772       778    4                                       qhdrflg = 0;  

    778  0 000376   000000 450000 xsym               STZ     qhdrflg

      773       779    4                                       }  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=209
      774       780    3                               if (messaddr==0) break;  

    780  0 000377   000000 234000 xsym               SZN     messaddr
         0 000400   000344 601000 0                  TNZ     s:772

      775       781    3                               }  
      776       782    2                       }  
      777       783    1           
      778       784    1               if (qhdr->scq.iptr != qhdr->scq.rptr)  

    784  0 000401   200004 473500                    LDP3    qhdr,,AUTO
         0 000402   200004 474500                    LDP4    qhdr,,AUTO
         0 000403   400004 236100                    LDQ     4,,PR4
         0 000404   300005 116100                    CMPQ    5,,PR3
         0 000405   000502 600000 0                  TZE     s:803

      779       785    1                       {  
      780       786    2                       printf("\n");  

    786  0 000406   000520 236000 0                  LDQ     s:804+10
         0 000407   200017 756100                    STQ     qhdr+11,,AUTO
         0 000410   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000411   000511 631400 0                  EPPR1   s:804+3
         0 000412   000000 701000 xent               TSX1    printf
         0 000413   000000 236007                    LDQ     0,DL

      781       787    2                       messhdr("scq");  

    787  0 000414   000540 236000 0                  LDQ     s:804+26
         0 000415   200017 756100                    STQ     qhdr+11,,AUTO
         0 000416   200017 630500                    EPPR0   qhdr+11,,AUTO
         0 000417   000511 631400 0                  EPPR1   s:804+3
         0 000420   000000 701000 xent               TSX1    messhdr
         0 000421   000000 236007                    LDQ     0,DL

      782       788    2                       messaddr = qhdr->scq.rptr+CQ+qhdr->scq.offset; /* start */  

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=210
    788  0 000422   200004 473500                    LDP3    qhdr,,AUTO
         0 000423   200004 474500                    LDP4    qhdr,,AUTO
         0 000424   400005 236100                    LDQ     5,,PR4
         0 000425   000516 076000 0                  ADQ     s:804+8
         0 000426   300007 076100                    ADQ     7,,PR3
         0 000427   000000 756000 xsym               STQ     messaddr

      783       789    2                       messcnt = qhdr->scq.iptr+CQ+qhdr->scq.offset; /* end */  

    789  0 000430   400004 236100                    LDQ     4,,PR4
         0 000431   000516 076000 0                  ADQ     s:804+8
         0 000432   300007 076100                    ADQ     7,,PR3
         0 000433   000000 756000 xsym               STQ     messcnt

      784       790    2                    qhdrflg = qhdr->scq.sz+CQ+qhdr->scq.offset-sizeof(struct knh_me  

    790  0 000434   400006 236100                    LDQ     6,,PR4
         0 000435   000516 076000 0                  ADQ     s:804+8
         0 000436   300007 076100                    ADQ     7,,PR3
         0 000437   000020 176007                    SBQ     16,DL
         0 000440   000000 756000 xsym               STQ     qhdrflg

      785       791    2                       if (messaddr<messcnt) qhdrflg = 0;  

    791  0 000441   000000 236000 xsym               LDQ     messaddr
         0 000442   000000 116000 xsym               CMPQ    messcnt
         0 000443   000445 605000 0                  TPL     s:792

    791  0 000444   000000 450000 xsym               STZ     qhdrflg

      786       792    2                       while (messaddr<messcnt || messaddr<qhdrflg)  

    792  0 000445   000000 236000 xsym               LDQ     messaddr
         0 000446   000000 116000 xsym               CMPQ    messcnt
         0 000447   000453 604000 0                  TMI     s:794
         0 000450   000000 236000 xsym               LDQ     messaddr
         0 000451   000000 116000 xsym               CMPQ    qhdrflg
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=211
         0 000452   000502 605000 0                  TPL     s:803

      787       793    2                               {  
      788       794    3                               messaddr = messdata(dibfd,messaddr,1);  

    794  0 000453   000000 236000 xsym               LDQ     dibfd
         0 000454   200015 756100                    STQ     qhdr+9,,AUTO
         0 000455   000000 236000 xsym               LDQ     messaddr
         0 000456   200016 756100                    STQ     qhdr+10,,AUTO
         0 000457   000001 236007                    LDQ     1,DL
         0 000460   200017 756100                    STQ     qhdr+11,,AUTO
         0 000461   200015 630500                    EPPR0   qhdr+9,,AUTO
         0 000462   000537 631400 0                  EPPR1   s:804+25
         0 000463   000000 701000 xent               TSX1    messdata
         0 000464   000000 236007                    LDQ     0,DL
         0 000465   000000 756000 xsym               STQ     messaddr

      789       795    3                               if (qhdrflg && messaddr>=qhdrflg)  

    795  0 000466   000000 234000 xsym               SZN     qhdrflg
         0 000467   000500 600000 0                  TZE     s:800
         0 000470   000000 236000 xsym               LDQ     messaddr
         0 000471   000000 116000 xsym               CMPQ    qhdrflg
         0 000472   000500 604000 0                  TMI     s:800

      790       796    3                                       {  
      791       797    4                                       messaddr = qhdr->scq.offset+CQ;  

    797  0 000473   200004 473500                    LDP3    qhdr,,AUTO
         0 000474   300007 236100                    LDQ     7,,PR3
         0 000475   000516 076000 0                  ADQ     s:804+8
         0 000476   000000 756000 xsym               STQ     messaddr

      792       798    4                                       qhdrflg = 0;  

    798  0 000477   000000 450000 xsym               STZ     qhdrflg

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=212
      793       799    4                                       }  
      794       800    3                               if (messaddr==0) break;  

    800  0 000500   000000 234000 xsym               SZN     messaddr
         0 000501   000445 601000 0                  TNZ     s:792

      795       801    3                               }  
      796       802    2                       }  
      797       803    1               qhdrflg = messaddr = 0;  

    803  0 000502   000000 450000 xsym               STZ     messaddr
         0 000503   000000 236000 xsym               LDQ     messaddr
         0 000504   000000 756000 xsym               STQ     qhdrflg
         0 000505   000000 702000 xent               TSX2    _XBC_FARET

      798       804    1        }  

    804  0 000506   200017 236100                    LDQ     qhdr+11,,AUTO
         0 000507   000000 702000 xent               TSX2    _XBC_FARET
         0 000510   001365 000000 xsym               ZERO    sigint#c+757,0
         0 000511   000001 000000                    ZERO    1,0
         0 000512   001351 000000 xsym               ZERO    sigint#c+745,0
         0 000513   000133 000000 xsym               ZERO    sigint#c+91,0
         0 000514   000106 000000 xsym               ZERO    sigint#c+70,0
         0 000515   001335 000000 xsym               ZERO    sigint#c+733,0
         0 000516   000074 400000                    ZERO    60,-131072
         0 000517   000012 000000                    ZERO    10,0
         0 000520   002515 000000 xsym               ZERO    sigint#c+1357,0
         0 000521   001323 000000 xsym               ZERO    sigint#c+723,0
         0 000522   001311 000000 xsym               ZERO    sigint#c+713,0
         0 000523   002145 000000 xsym               ZERO    sigint#c+1125,0
         0 000524   000005 000000                    ZERO    5,0
         0 000525   001274 000000 xsym               ZERO    sigint#c+700,0
         0 000526   000065 000000 xsym               ZERO    sigint#c+53,0
         0 000527   000044 000000 xsym               ZERO    sigint#c+36,0
         0 000530   002135 000000 xsym               ZERO    sigint#c+1117,0
         0 000531   000007 000000                    ZERO    7,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=213
         0 000532   002126 000000 xsym               ZERO    sigint#c+1110,0
         0 000533   001254 000000 xsym               ZERO    sigint#c+684,0
         0 000534   001234 000000 xsym               ZERO    sigint#c+668,0
         0 000535   001221 000000 xsym               ZERO    sigint#c+657,0
         0 000536   002456 000000 xsym               ZERO    sigint#c+1326,0
         0 000537   000003 000000                    ZERO    3,0
         0 000540   002455 000000 xsym               ZERO    sigint#c+1325,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=214

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0   708-   804     56   467     0      0  y        0   1 qdata
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=215

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label

             764   0    300 If      0 msgdump

  **** Statement type totals  ****

    15 Assign    23 Call      10 If         1 GoTo       1 Return     2 DoWhil
     2 Exit       1 Proc       1 EndPrc     1 Labels

 # major stmts=   52 Code/major= 6.80 # stmts=   56 Code/stmt= 6.32  Point total= 97.0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=216

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr              4-0-0/w PTR         r,m   1 qhdr

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    0-0-0/w SBIN        r,m   1 qhdrflg
     0-0-0/w SBIN        r,m   1 rawaddr                    0-0-0/w SBIN        r,m   1 rawbound
     0-0-0/w SBIN        r,m   1 rawdump                    0-0-0/c CHAR        r,m   1 readbuf(0:79)
     0-0-0/c CHAR        r,m   1 savebuf(0:79)              0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=217
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=218

 Object Unit name= messhdr                                    File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:15:03.44 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero    29     35  messhdr
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  messhdr

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_1
                       Std       0 printf
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=219

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=220


      800       806                
      801       807             /*  
      802       808              *             messhdr -  
      803       809              */  
      804       810                
      805       811                
      806       812             messhdr(cq)  
      807       813             char *cq;  

    813  0 000000   000000 700000 xent  messhdr      TSX0    _XBC_AUTO_1
         0 000001   000020 000001                    ZERO    16,1

      808       814             {  
      809       815    1        printf("       DIB %s dump  \n",cq);  

    815  0 000002   000027 236000 0                  LDQ     s:817+7
         0 000003   200006 756100                    STQ     cq+2,,AUTO
         0 000004   200004 236100                    LDQ     cq,,AUTO
         0 000005   200007 756100                    STQ     cq+3,,AUTO
         0 000006   200006 630500                    EPPR0   cq+2,,AUTO
         0 000007   000030 631400 0                  EPPR1   s:817+8
         0 000010   000000 701000 xent               TSX1    printf
         0 000011   000000 236007                    LDQ     0,DL

      810       816    1        printf("location f msgsz ldctx type     data...\n");  

    816  0 000012   000031 236000 0                  LDQ     s:817+9
         0 000013   200007 756100                    STQ     cq+3,,AUTO
         0 000014   200007 630500                    EPPR0   cq+3,,AUTO
         0 000015   000032 631400 0                  EPPR1   s:817+10
         0 000016   000000 701000 xent               TSX1    printf
         0 000017   000000 236007                    LDQ     0,DL

      811       817    1        printf("-------- - ----- ----- ----     ----   \n");  

    817  0 000020   000033 236000 0                  LDQ     s:817+11
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=221
         0 000021   200007 756100                    STQ     cq+3,,AUTO
         0 000022   200007 630500                    EPPR0   cq+3,,AUTO
         0 000023   000032 631400 0                  EPPR1   s:817+10
         0 000024   000000 701000 xent               TSX1    printf
         0 000025   000000 236007                    LDQ     0,DL
         0 000026   000000 702000 xent               TSX2    _XBC_FARET
         0 000027   002120 000000 xsym               ZERO    sigint#c+1104,0
         0 000030   000002 000000                    ZERO    2,0
         0 000031   001206 000000 xsym               ZERO    sigint#c+646,0
         0 000032   000001 000000                    ZERO    1,0
         0 000033   001173 000000 xsym               ZERO    sigint#c+635,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=222

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0   813-   818      4   468     0      0  y        0   1 messhdr
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=223

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     3 Call       1 Proc

 # major stmts=    3 Code/major= 9.66 # stmts=    4 Code/stmt= 7.25  Point total= 86.1
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=224

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr              4-0-0/w PTR         r,m   1 cq

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=225
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=226

 Object Unit name= messdata                                   File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:15:09.44 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero   214    326  messdata
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  messdata

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_3
                       Std       0 fetchdibdat
                       Std       0 printf
         yes           Std       1 abs
                       Std       0 pk2
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=227

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=228


      813       819                
      814       820                
      815       821             /*  
      816       822              *             messdata - attempts to decode the dib message Q's down  
      817       823              *                     to the session header from the address specified.  
      818       824              */  
      819       825                
      820       826                
      821       827             messdata(dibfd,messaddr,messcnt)  
      822       828                
      823       829             int dibfd,messaddr,messcnt;  

    829  0 000000   000000 700000 xent  messdata     TSX0    _XBC_AUTO_3
         0 000001   000050 000003                    ZERO    40,3

      824       830                
      825       831             {  
      826       832    1        int j;  
      827       833    1        static char *type[] = {  
      828       834    2               "data    ",  
      829       835    2               "init    ",  
      830       836    2               "init_ack",  
      831       837    2               "term    ",  
      832       838    2               "unknown "};  
      833       839    1           
      834       840    1           
      835       841    1        struct {  
      836       842    2               struct knh_mess mess;  
      837       843    2               struct qdp_snhdr snhdr;  
      838       844    2               unsigned char data[20];  
      839       845    2               }amessage;  
      840       846    1           
      841       847    1        if (!messcnt)  

    847  0 000002   200006 234100                    SZN     messcnt,,AUTO
         0 000003   000006 601000 0                  TNZ     s:849
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=229

      842       848    1               messcnt = 1;  

    848  0 000004   000001 236007                    LDQ     1,DL
         0 000005   200006 756100                    STQ     messcnt,,AUTO

      843       849    1        while (messcnt--)  

    849  0 000006   200006 236100                    LDQ     messcnt,,AUTO
         0 000007   200034 756100                    STQ     j+1,,AUTO
         0 000010   000001 336007                    LCQ     1,DL
         0 000011   200006 056100                    ASQ     messcnt,,AUTO
         0 000012   200034 234100                    SZN     j+1,,AUTO
         0 000013   000302 600000 0                  TZE     s:888

      844       850    1               {  
      845       851    2            if (fetchdibdat(dibfd,&amessage,sizeof(amessage),messaddr&DIB_MASK) < 0  

    851  0 000014   200004 236100                    LDQ     dibfd,,AUTO
         0 000015   200014 756100                    STQ     messcnt+6,,AUTO
         0 000016   200020 630500                    EPPR0   amessage,,AUTO
         0 000017   200015 450500                    STP0    messcnt+7,,AUTO
         0 000020   000054 236007                    LDQ     44,DL
         0 000021   200016 756100                    STQ     messcnt+8,,AUTO
         0 000022   000306 236000 0                  LDQ     s:889+2
         0 000023   200005 376100                    ANQ     messaddr,,AUTO
         0 000024   200017 756100                    STQ     messcnt+9,,AUTO
         0 000025   200014 630500                    EPPR0   messcnt+6,,AUTO
         0 000026   000307 631400 0                  EPPR1   s:889+3
         0 000027   000000 701000 xent               TSX1    fetchdibdat
         0 000030   000000 236007                    LDQ     0,DL
         0 000031   200035 756100                    STQ     j+2,,AUTO
         0 000032   200035 234100                    SZN     j+2,,AUTO
         0 000033   000044 605000 0                  TPL     s:856

      846       852    2                       {  
      847       853    3                       printf("can't fetch mess data\n");  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=230

    853  0 000034   000310 236000 0                  LDQ     s:889+4
         0 000035   200017 756100                    STQ     messcnt+9,,AUTO
         0 000036   200017 630500                    EPPR0   messcnt+9,,AUTO
         0 000037   000311 631400 0                  EPPR1   s:889+5
         0 000040   000000 701000 xent               TSX1    printf
         0 000041   000000 236007                    LDQ     0,DL

      848       854    3                       return 0;  

    854  0 000042   200033 450100                    STZ     j,,AUTO
         0 000043   000304 710000 0                  TRA     s:889

      849       855    3                       }  
      850       856    2               if (amessage.mess.function == KN_FCN_DATA)  

    856  0 000044   200020 236100                    LDQ     amessage,,AUTO
         0 000045   000022 772000                    QRL     18
         0 000046   177777 376007                    ANQ     65535,DL
         0 000047   000005 116007                    CMPQ    5,DL
         0 000050   000203 601000 0                  TNZ     s:870

      851       857    2                       {  
      852       858    3                       if (abs(amessage.snhdr.type) > K_SQDP_TERM)  

    858  0 000051   200025 236100                    LDQ     amessage+5,,AUTO
         0 000052   000000 772000                    QRL     0
         0 000053   177777 376007                    ANQ     65535,DL
         0 000054   200017 756100                    STQ     messcnt+9,,AUTO
         0 000055   200017 630500                    EPPR0   messcnt+9,,AUTO
         0 000056   000311 631400 0                  EPPR1   s:889+5
         0 000057   000000 701000 xent               TSX1    abs
         0 000060   000000 236007                    LDQ     0,DL
         0 000061   200036 756100                    STQ     j+3,,AUTO
         0 000062   200036 236100                    LDQ     j+3,,AUTO
         0 000063   000003 116007                    CMPQ    3,DL
         0 000064   000074 604400 0                  TMOZ    s:860
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=231

      853       859    3                               amessage.snhdr.type = K_SQDP_TERM + 1;  

    859  0 000065   000312 236000 0                  LDQ     s:889+6
         0 000066   200025 376100                    ANQ     amessage+5,,AUTO
         0 000067   200037 756100                    STQ     j+4,,AUTO
         0 000070   000004 236007                    LDQ     4,DL
         0 000071   000000 736000                    QLS     0
         0 000072   200037 276100                    ORQ     j+4,,AUTO
         0 000073   200025 756100                    STQ     amessage+5,,AUTO

      854       860    3                       printf("%#8x %1x %5d %5d %8s 0x",  

    860  0 000074   000313 236000 0                  LDQ     s:889+7
         0 000075   200012 756100                    STQ     messcnt+4,,AUTO
         0 000076   200005 236100                    LDQ     messaddr,,AUTO
         0 000077   200013 756100                    STQ     messcnt+5,,AUTO
         0 000100   200020 236100                    LDQ     amessage,,AUTO
         0 000101   000042 772000                    QRL     34
         0 000102   000001 376007                    ANQ     1,DL
         0 000103   200014 756100                    STQ     messcnt+6,,AUTO
         0 000104   200023 236100                    LDQ     amessage+3,,AUTO
         0 000105   000000 772000                    QRL     0
         0 000106   777777 376007                    ANQ     -1,DL
         0 000107   200011 756100                    STQ     messcnt+3,,AUTO
         0 000110   200011 630500                    EPPR0   messcnt+3,,AUTO
         0 000111   000311 631400 0                  EPPR1   s:889+5
         0 000112   000000 701000 xent               TSX1    pk2
         0 000113   000000 236007                    LDQ     0,DL
         0 000114   200015 756100                    STQ     messcnt+7,,AUTO
         0 000115   200025 236100                    LDQ     amessage+5,,AUTO
         0 000116   000022 772000                    QRL     18
         0 000117   777777 376007                    ANQ     -1,DL
         0 000120   200016 756100                    STQ     messcnt+8,,AUTO
         0 000121   200025 236100                    LDQ     amessage+5,,AUTO
         0 000122   000000 772000                    QRL     0
         0 000123   177777 376007                    ANQ     65535,DL
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=232
         0 000124   200011 756100                    STQ     messcnt+3,,AUTO
         0 000125   200011 630500                    EPPR0   messcnt+3,,AUTO
         0 000126   000311 631400 0                  EPPR1   s:889+5
         0 000127   000000 701000 xent               TSX1    abs
         0 000130   000000 236007                    LDQ     0,DL
         0 000131   000000 622006                    EAX2    0,QL
         0 000132   000041 236012 xsym               LDQ     sigint#s+33,X2
         0 000133   200017 756100                    STQ     messcnt+9,,AUTO
         0 000134   200012 630500                    EPPR0   messcnt+4,,AUTO
         0 000135   000314 631400 0                  EPPR1   s:889+8
         0 000136   000000 701000 xent               TSX1    printf
         0 000137   000000 236007                    LDQ     0,DL

      855       861    3                               messaddr,  
      856       862    3                               amessage.mess.free,  
      857       863    3                               pk2(amessage.mess.msgsz),  
      858       864    3                               amessage.snhdr.ldct,  
      859       865    3                               type[abs(amessage.snhdr.type)]);  
      860       866    3                       for (j = 0; j < 16;j+=2)  

    866  0 000140   200033 450100                    STZ     j,,AUTO

    866  0 000141   200033 236100                    LDQ     j,,AUTO
         0 000142   000020 116007                    CMPQ    16,DL
         0 000143   000174 605000 0                  TPL     s:868+3

      861       867    3                           printf("%02x%02x ",amessage.data[j],amessage.data[j+1]);  

    867  0 000144   000315 236000 0                  LDQ     s:889+9
         0 000145   200015 756100                    STQ     messcnt+7,,AUTO
         0 000146   200033 236100                    LDQ     j,,AUTO
         0 000147   000100 100506                    MLR     fill='000'O
         0 000150   200026 000001                    ADSC9   amessage+6,Q,AUTO        cn=0,n=1
         0 000151   200037 600001                    ADSC9   j+4,,AUTO                cn=3,n=1
         0 000152   200037 236100                    LDQ     j+4,,AUTO
         0 000153   000777 376007                    ANQ     511,DL
         0 000154   200016 756100                    STQ     messcnt+8,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=233
         0 000155   200033 236100                    LDQ     j,,AUTO
         0 000156   000001 036007                    ADLQ    1,DL
         0 000157   000100 100506                    MLR     fill='000'O
         0 000160   200026 000001                    ADSC9   amessage+6,Q,AUTO        cn=0,n=1
         0 000161   200037 600001                    ADSC9   j+4,,AUTO                cn=3,n=1
         0 000162   200037 236100                    LDQ     j+4,,AUTO
         0 000163   000777 376007                    ANQ     511,DL
         0 000164   200017 756100                    STQ     messcnt+9,,AUTO
         0 000165   200015 630500                    EPPR0   messcnt+7,,AUTO
         0 000166   000316 631400 0                  EPPR1   s:889+10
         0 000167   000000 701000 xent               TSX1    printf
         0 000170   000000 236007                    LDQ     0,DL

      862       868    3                       printf ("\n");  

    868  0 000171   000002 236007                    LDQ     2,DL
         0 000172   200033 056100                    ASQ     j,,AUTO
         0 000173   000141 710000 0                  TRA     s:866+1

    868  0 000174   000317 236000 0                  LDQ     s:889+11
         0 000175   200017 756100                    STQ     messcnt+9,,AUTO
         0 000176   200017 630500                    EPPR0   messcnt+9,,AUTO
         0 000177   000311 631400 0                  EPPR1   s:889+5
         0 000200   000000 701000 xent               TSX1    printf
         0 000201   000000 236007                    LDQ     0,DL
         0 000202   000262 710000 0                  TRA     s:886

      863       869    3                       }  
      864       870    2               else if (amessage.mess.msgsz != 14)  

    870  0 000203   200023 236100                    LDQ     amessage+3,,AUTO
         0 000204   000000 772000                    QRL     0
         0 000205   777777 376007                    ANQ     -1,DL
         0 000206   000016 116007                    CMPQ    14,DL
         0 000207   000230 600000 0                  TZE     s:878

      865       871    2                       {  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=234
      866       872    3                       printf("%#8x %1x             %8s\n",  

    872  0 000210   000320 236000 0                  LDQ     s:889+12
         0 000211   200014 756100                    STQ     messcnt+6,,AUTO
         0 000212   200005 236100                    LDQ     messaddr,,AUTO
         0 000213   200015 756100                    STQ     messcnt+7,,AUTO
         0 000214   200020 236100                    LDQ     amessage,,AUTO
         0 000215   000042 772000                    QRL     34
         0 000216   000001 376007                    ANQ     1,DL
         0 000217   200016 756100                    STQ     messcnt+8,,AUTO
         0 000220   000321 236000 0                  LDQ     s:889+13
         0 000221   200017 756100                    STQ     messcnt+9,,AUTO
         0 000222   200014 630500                    EPPR0   messcnt+6,,AUTO
         0 000223   000307 631400 0                  EPPR1   s:889+3
         0 000224   000000 701000 xent               TSX1    printf
         0 000225   000000 236007                    LDQ     0,DL

      867       873    3                               messaddr,  
      868       874    3                               amessage.mess.free,  
      869       875    3                               "nop     ");  
      870       876    3                       messcnt = 0;  

    876  0 000226   200006 450100                    STZ     messcnt,,AUTO
         0 000227   000262 710000 0                  TRA     s:886

      871       877    3                       }  
      872       878    2                else printf("%#8x %1x %5d %5d %8s   %.14s\n",  

    878  0 000230   000322 236000 0                  LDQ     s:889+14
         0 000231   200011 756100                    STQ     messcnt+3,,AUTO
         0 000232   200005 236100                    LDQ     messaddr,,AUTO
         0 000233   200012 756100                    STQ     messcnt+4,,AUTO
         0 000234   200020 236100                    LDQ     amessage,,AUTO
         0 000235   000042 772000                    QRL     34
         0 000236   000001 376007                    ANQ     1,DL
         0 000237   200013 756100                    STQ     messcnt+5,,AUTO
         0 000240   200023 236100                    LDQ     amessage+3,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=235
         0 000241   000000 772000                    QRL     0
         0 000242   777777 376007                    ANQ     -1,DL
         0 000243   200010 756100                    STQ     messcnt+2,,AUTO
         0 000244   200010 630500                    EPPR0   messcnt+2,,AUTO
         0 000245   000311 631400 0                  EPPR1   s:889+5
         0 000246   000000 701000 xent               TSX1    abs
         0 000247   000000 236007                    LDQ     0,DL
         0 000250   200014 756100                    STQ     messcnt+6,,AUTO
         0 000251   200015 450100                    STZ     messcnt+7,,AUTO
         0 000252   000323 236000 0                  LDQ     s:889+15
         0 000253   200016 756100                    STQ     messcnt+8,,AUTO
         0 000254   200024 630500                    EPPR0   amessage+4,,AUTO
         0 000255   200017 450500                    STP0    messcnt+9,,AUTO
         0 000256   200011 630500                    EPPR0   messcnt+3,,AUTO
         0 000257   000324 631400 0                  EPPR1   s:889+16
         0 000260   000000 701000 xent               TSX1    printf
         0 000261   000000 236007                    LDQ     0,DL

      873       879    2                       messaddr,  
      874       880    2                       amessage.mess.free,  
      875       881    2                       abs(amessage.mess.msgsz),  
      876       882    2                       0,  
      877       883    2                       "time    ",  
      878       884    2                       &amessage.snhdr);  
      879       885    2           
      880       886    2            messaddr += ((pk2(amessage.mess.msgsz) + sizeof(struct knh_mess) +3)/4)  

    886  0 000262   200023 236100                    LDQ     amessage+3,,AUTO
         0 000263   000000 772000                    QRL     0
         0 000264   777777 376007                    ANQ     -1,DL
         0 000265   200017 756100                    STQ     messcnt+9,,AUTO
         0 000266   200005 236100                    LDQ     messaddr,,AUTO
         0 000267   200037 756100                    STQ     j+4,,AUTO
         0 000270   200017 630500                    EPPR0   messcnt+9,,AUTO
         0 000271   000311 631400 0                  EPPR1   s:889+5
         0 000272   000000 701000 xent               TSX1    pk2
         0 000273   000000 236007                    LDQ     0,DL
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=236
         0 000274   000023 076007                    ADQ     19,DL
         0 000275   000004 506007                    DIV     4,DL
         0 000276   000002 736000                    QLS     2
         0 000277   200037 076100                    ADQ     j+4,,AUTO
         0 000300   200005 756100                    STQ     messaddr,,AUTO
         0 000301   000006 710000 0                  TRA     s:849

      881       887    2               }  
      882       888    1        return messaddr;  

    888  0 000302   200005 236100                    LDQ     messaddr,,AUTO
         0 000303   200033 756100                    STQ     j,,AUTO

      883       889    1        }  

    889  0 000304   200033 236100                    LDQ     j,,AUTO
         0 000305   000000 702000 xent               TSX2    _XBC_FARET
         0 000306   000003 777777                    ZERO    3,-1
         0 000307   000004 000000                    ZERO    4,0
         0 000310   002112 000000 xsym               ZERO    sigint#c+1098,0
         0 000311   000001 000000                    ZERO    1,0
         0 000312   777777 600000                    TZE     -1
         0 000313   002104 000000 xsym               ZERO    sigint#c+1092,0
         0 000314   000006 000000                    ZERO    6,0
         0 000315   002321 000000 xsym               ZERO    sigint#c+1233,0
         0 000316   000003 000000                    ZERO    3,0
         0 000317   002515 000000 xsym               ZERO    sigint#c+1357,0
         0 000320   002075 000000 xsym               ZERO    sigint#c+1085,0
         0 000321   002316 000000 xsym               ZERO    sigint#c+1230,0
         0 000322   002065 000000 xsym               ZERO    sigint#c+1077,0
         0 000323   002313 000000 xsym               ZERO    sigint#c+1227,0
         0 000324   000007 000000                    ZERO    7,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=237

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0   829-   889     23   491     0      0  y        0   1 messdata
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=238

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     4 Assign     6 Call       5 If         2 Return     2 DoIndx     1 DoWhil
     1 EndInd     1 Proc       1 EndPrc

 # major stmts=   20 Code/major=10.70 # stmts=   23 Code/stmt= 9.30  Point total= 88.3
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=239

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr             20-0-0/c STRC(396)   r,m   1 amessage
     4-0-0/w SBIN        r,m   1 dibfd                     33-0-0/w SBIN        r,m   1 j
     5-0-0/w SBIN        r,m   1 messaddr                   6-0-0/w SBIN        r,m   1 messcnt

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 env(0:1)
     0-0-0/w SBIN        r,m   1 fulldct                    0-0-0/w SBIN        r,m   1 i
     0-0-0/w SBIN        r,m   1 interactive                0-0-0/c STRC(432)   r,m   1 ipc
     0-0-0/w SBIN        r,m   1 kmemfd                     0-0-0/w SBIN        r,m   1 ldctaddr
     0-0-0/w SBIN        r,m   1 ldctcnt                    0-0-0/w SBIN        r,m   1 ldctsave
     0-0-0/w PTR         r,m   1 messc                     26-0-0/c CHAR        r,m   1 op
     0-0-0/w PTR         r,m   1 optarg                   146-0-0/c CHAR        r,m   1 path(0:63)
     0-0-0/c CHAR        r,m   1 prevop                     0-0-0/w SBIN        r,m   1 procflg
     1-0-0/c STRC(1116)  r,m   1 qhdr                       0-0-0/w SBIN        r,m   1 qhdrflg
     0-0-0/w SBIN        r,m   1 rawaddr                    0-0-0/w SBIN        r,m   1 rawbound
     0-0-0/w SBIN        r,m   1 rawdump                    0-0-0/c CHAR        r,m   1 readbuf(0:79)
     0-0-0/c CHAR        r,m   1 savebuf(0:79)              0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr
    41-0-0/w PTR         r,m   1 type(0:4)                 41-0-0/w PTR         r,m   1 type(0:4)

  ****  BASED and DCB variables  ****
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=240

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=241

 Object Unit name= tracedump                                  File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:15:23.16 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero    95    137  tracedump
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  tracedump

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_2
                       Std       0 getqhdr
                       Std       0 _XBC_FARET
                       Std       0 rawdumpdata
                       Std       0 fetchdibdat
                       Std       0 printf
                       Std       0 pk4
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=242

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=243


      885       891             /*  
      886       892              *             tracedump - dump stack frames starting at specified  
      887       893              *                      address.  Stop when address reaches f20000.  
      888       894              */  
      889       895                
      890       896             tracedump (fd,fp)  
      891       897             int fd;             /* dump file descriptor */  

    897  0 000000   000000 700000 xent  tracedump    TSX0    _XBC_AUTO_2
         0 000001   000026 000002                    ZERO    22,2

      892       898             int fp;             /* starting frame pointer */  
      893       899             {  
      894       900    1        int nxtfp;  
      895       901    1           
      896       902    1              if (fp<10) {  

    902  0 000002   200005 236100                    LDQ     fp,,AUTO
         0 000003   000012 116007                    CMPQ    10,DL
         0 000004   000016 605000 0                  TPL     s:906

      897       903    2                   if (getqhdr() < 0) return;  

    903  0 000005   000127 631400 0                  EPPR1   s:918+4
         0 000006   000000 701000 xent               TSX1    getqhdr
         0 000007   000000 236007                    LDQ     0,DL
         0 000010   200014 756100                    STQ     nxtfp+1,,AUTO
         0 000011   200014 234100                    SZN     nxtfp+1,,AUTO
         0 000012   000014 605000 0                  TPL     s:904
         0 000013   000000 702000 xent               TSX2    _XBC_FARET

      898       904    2                   fp = qhdr.scrfrm;  

    904  0 000014   000012 236000 xsym               LDQ     qhdr+10
         0 000015   200005 756100                    STQ     fp,,AUTO

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=244
      899       905    2                   }  
      900       906    1              if (fd >= 0) rawdumpdata (fd,fp-0x80,0x88);  

    906  0 000016   200004 234100                    SZN     fd,,AUTO
         0 000017   000033 604000 0                  TMI     s:907

    906  0 000020   200004 236100                    LDQ     fd,,AUTO
         0 000021   200010 756100                    STQ     fp+3,,AUTO
         0 000022   200005 236100                    LDQ     fp,,AUTO
         0 000023   000200 176007                    SBQ     128,DL
         0 000024   200011 756100                    STQ     fp+4,,AUTO
         0 000025   000210 236007                    LDQ     136,DL
         0 000026   200012 756100                    STQ     fp+5,,AUTO
         0 000027   200010 630500                    EPPR0   fp+3,,AUTO
         0 000030   000130 631400 0                  EPPR1   s:918+5
         0 000031   000000 701000 xent               TSX1    rawdumpdata
         0 000032   000000 236007                    LDQ     0,DL

      901       907    1              while (fp < 0xf20000) {  

    907  0 000033   200005 236100                    LDQ     fp,,AUTO
         0 000034   000131 116000 0                  CMPQ    s:918+6
         0 000035   000126 605000 0                  TPL     s:918+3

      902       908    2                   if (fetchdibdat(fd,&nxtfp,sizeof(nxtfp),fp) < 0) {  

    908  0 000036   200004 236100                    LDQ     fd,,AUTO
         0 000037   200007 756100                    STQ     fp+2,,AUTO
         0 000040   200013 630500                    EPPR0   nxtfp,,AUTO
         0 000041   200010 450500                    STP0    fp+3,,AUTO
         0 000042   000004 236007                    LDQ     4,DL
         0 000043   200011 756100                    STQ     fp+4,,AUTO
         0 000044   200005 236100                    LDQ     fp,,AUTO
         0 000045   200012 756100                    STQ     fp+5,,AUTO
         0 000046   200007 630500                    EPPR0   fp+2,,AUTO
         0 000047   000132 631400 0                  EPPR1   s:918+7
         0 000050   000000 701000 xent               TSX1    fetchdibdat
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=245
         0 000051   000000 236007                    LDQ     0,DL
         0 000052   200015 756100                    STQ     nxtfp+2,,AUTO
         0 000053   200015 234100                    SZN     nxtfp+2,,AUTO
         0 000054   000064 605000 0                  TPL     s:912

      903       909    3                         printf ("tracedump: cant read dump data\n");  

    909  0 000055   000133 236000 0                  LDQ     s:918+8
         0 000056   200012 756100                    STQ     fp+5,,AUTO
         0 000057   200012 630500                    EPPR0   fp+5,,AUTO
         0 000060   000134 631400 0                  EPPR1   s:918+9
         0 000061   000000 701000 xent               TSX1    printf
         0 000062   000000 236007                    LDQ     0,DL
         0 000063   000000 702000 xent               TSX2    _XBC_FARET

      904       910    3                         return;  
      905       911    3                   }  
      906       912    2                   nxtfp = pk4(nxtfp);  

    912  0 000064   200013 236100                    LDQ     nxtfp,,AUTO
         0 000065   200012 756100                    STQ     fp+5,,AUTO
         0 000066   200012 630500                    EPPR0   fp+5,,AUTO
         0 000067   000134 631400 0                  EPPR1   s:918+9
         0 000070   000000 701000 xent               TSX1    pk4
         0 000071   000000 236007                    LDQ     0,DL
         0 000072   200013 756100                    STQ     nxtfp,,AUTO

      907       913    2                    if ((nxtfp > 0xf1fff8) || (nxtfp < fp))  

    913  0 000073   200013 236100                    LDQ     nxtfp,,AUTO
         0 000074   000135 116000 0                  CMPQ    s:918+10
         0 000075   000101 605400 0                  TPNZ    s:914
         0 000076   200013 236100                    LDQ     nxtfp,,AUTO
         0 000077   200005 116100                    CMPQ    fp,,AUTO
         0 000100   000103 605000 0                  TPL     s:915

      908       914    2                          nxtfp = 0xf1fff8;  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=246

    914  0 000101   000135 236000 0                  LDQ     s:918+10
         0 000102   200013 756100                    STQ     nxtfp,,AUTO

      909       915    2                    if (nxtfp == fp)  

    915  0 000103   200013 236100                    LDQ     nxtfp,,AUTO
         0 000104   200005 116100                    CMPQ    fp,,AUTO
         0 000105   000107 601000 0                  TNZ     s:917
         0 000106   000000 702000 xent               TSX2    _XBC_FARET

      910       916    2                          return;  
      911       917    2                   rawdumpdata (fd,fp+8,nxtfp-fp);  

    917  0 000107   200004 236100                    LDQ     fd,,AUTO
         0 000110   200010 756100                    STQ     fp+3,,AUTO
         0 000111   000010 236007                    LDQ     8,DL
         0 000112   200005 076100                    ADQ     fp,,AUTO
         0 000113   200011 756100                    STQ     fp+4,,AUTO
         0 000114   200013 236100                    LDQ     nxtfp,,AUTO
         0 000115   200005 176100                    SBQ     fp,,AUTO
         0 000116   200012 756100                    STQ     fp+5,,AUTO
         0 000117   200010 630500                    EPPR0   fp+3,,AUTO
         0 000120   000130 631400 0                  EPPR1   s:918+5
         0 000121   000000 701000 xent               TSX1    rawdumpdata
         0 000122   000000 236007                    LDQ     0,DL

      912       918    2                   fp = nxtfp;  

    918  0 000123   200013 236100                    LDQ     nxtfp,,AUTO
         0 000124   200005 756100                    STQ     fp,,AUTO
         0 000125   000033 710000 0                  TRA     s:907
         0 000126   000000 702000 xent               TSX2    _XBC_FARET
         0 000127   000000 000000                    ZERO    0,0
         0 000130   000003 000000                    ZERO    3,0
         0 000131   000074 400000                    ZERO    60,-131072
         0 000132   000004 000000                    ZERO    4,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=247
         0 000133   001163 000000 xsym               ZERO    sigint#c+627,0
         0 000134   000001 000000                    ZERO    1,0
         0 000135   000074 377770                    ZERO    60,131064
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=248

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0   897-   920     15   490     0      0  y        0   1 tracedump
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=249

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     4 Assign     3 Call       6 If         1 DoWhil     1 Proc

 # major stmts=   14 Code/major= 6.78 # stmts=   15 Code/stmt= 6.33  Point total= 96.9
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=250

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr              4-0-0/w SBIN        r,m   1 fd
     5-0-0/w SBIN        r,m   1 fp                        13-0-0/w SBIN        r,m   1 nxtfp

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=251

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=252

 Object Unit name= rawdumpdata                                File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:15:32.04 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero   240    360  rawdumpdata
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  rawdumpdata

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_3
                       Std       0 printf
                       Std       0 fetchdibdat
                       Std       0 printdata
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=253

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd
     __INDTBL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=254


      914       920    1        }  
      915       921                
      916       923                
      917       924                
      918       925             /*  
      919       926              *             rawdumpdata - dumps the data from dib message Q's from  
      920       927              *                     from the address specified, for the number of  
      921       928              *                     bytes specified.  Bytes are in hex.  
      922       929              */  
      923       930                
      924       931                
      925       932             rawdumpdata(fd,addr,bound)  
      926       933                
      927       934             int fd,addr,bound;  

    934  0 000000   000000 700000 xent  rawdumpdata  TSX0    _XBC_AUTO_3
         0 000001   000056 000003                    ZERO    46,3

      928       935                
      929       936             {  
      930       937    1           
      931       938    1        unsigned char  data[16],tdata[16];  
      932       939    1        char *data_,*tdata_;  
      933       940    1        int linecnt,i,skipped;  
      934       941    1           
      935       942    1        printf("\nlocation  data\n");  

    942  0 000002   000346 236000 0                  LDQ     s:1007+13
         0 000003   200022 756100                    STQ     bound+12,,AUTO
         0 000004   200022 630500                    EPPR0   bound+12,,AUTO
         0 000005   000347 631400 0                  EPPR1   s:1007+14
         0 000006   000000 701000 xent               TSX1    printf
         0 000007   000000 236007                    LDQ     0,DL

      936       943    1        printf("--------  ----\n");  

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=255
    943  0 000010   000350 236000 0                  LDQ     s:1007+15
         0 000011   200022 756100                    STQ     bound+12,,AUTO
         0 000012   200022 630500                    EPPR0   bound+12,,AUTO
         0 000013   000347 631400 0                  EPPR1   s:1007+14
         0 000014   000000 701000 xent               TSX1    printf
         0 000015   000000 236007                    LDQ     0,DL

      937       944    1        if (bound==0) bound = 1;  

    944  0 000016   200006 234100                    SZN     bound,,AUTO
         0 000017   000022 601000 0                  TNZ     s:945

    944  0 000020   000001 236007                    LDQ     1,DL
         0 000021   200006 756100                    STQ     bound,,AUTO

      938       945    1        linecnt = (bound+(sizeof(data)-1))/sizeof(data);  

    945  0 000022   200006 236100                    LDQ     bound,,AUTO
         0 000023   000017 076007                    ADQ     15,DL
         0 000024   000020 506007                    DIV     16,DL
         0 000025   200025 756100                    STQ     linecnt,,AUTO

      939       946    1        skipped = 0;  

    946  0 000026   200023 450100                    STZ     skipped,,AUTO

      940       947    1        data_ = (char *)&data[0];  

    947  0 000027   200034 630500                    EPPR0   data,,AUTO
         0 000030   200027 450500                    STP0    data_,,AUTO

      941       948    1        tdata_ = (char *)&tdata[0];  

    948  0 000031   200030 630500                    EPPR0   tdata,,AUTO
         0 000032   200026 450500                    STP0    tdata_,,AUTO

      942       949    1        /* if only one line then tdata was never set use data*/  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=256
      943       950    1        if (linecnt==1)  

    950  0 000033   200025 236100                    LDQ     linecnt,,AUTO
         0 000034   000001 116007                    CMPQ    1,DL
         0 000035   000105 601000 0                  TNZ     s:963

      944       951    1               {  
      945       952    2               if (fetchdibdat(fd,data,sizeof(data),addr)<0)  

    952  0 000036   200004 236100                    LDQ     fd,,AUTO
         0 000037   200017 756100                    STQ     bound+9,,AUTO
         0 000040   200034 630500                    EPPR0   data,,AUTO
         0 000041   200020 450500                    STP0    bound+10,,AUTO
         0 000042   000020 236007                    LDQ     16,DL
         0 000043   200021 756100                    STQ     bound+11,,AUTO
         0 000044   200005 236100                    LDQ     addr,,AUTO
         0 000045   200022 756100                    STQ     bound+12,,AUTO
         0 000046   200017 630500                    EPPR0   bound+9,,AUTO
         0 000047   000351 631400 0                  EPPR1   s:1007+16
         0 000050   000000 701000 xent               TSX1    fetchdibdat
         0 000051   000000 236007                    LDQ     0,DL
         0 000052   200040 756100                    STQ     data+4,,AUTO
         0 000053   200040 234100                    SZN     data+4,,AUTO
         0 000054   000064 605000 0                  TPL     s:958

      946       953    2                       {  
      947       954    3                       printf("can't fetch dib memory for raw dump\n");  

    954  0 000055   000352 236000 0                  LDQ     s:1007+17
         0 000056   200022 756100                    STQ     bound+12,,AUTO
         0 000057   200022 630500                    EPPR0   bound+12,,AUTO
         0 000060   000347 631400 0                  EPPR1   s:1007+14
         0 000061   000000 701000 xent               TSX1    printf
         0 000062   000000 236007                    LDQ     0,DL
         0 000063   000104 710000 0                  TRA     s:959+8

      948       955    3                       }  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=257
      949       956    2               else  
      950       957    2                       {  
      951       958    3                       printf("%#8x ",addr);  

    958  0 000064   000353 236000 0                  LDQ     s:1007+18
         0 000065   200021 756100                    STQ     bound+11,,AUTO
         0 000066   200005 236100                    LDQ     addr,,AUTO
         0 000067   200022 756100                    STQ     bound+12,,AUTO
         0 000070   200021 630500                    EPPR0   bound+11,,AUTO
         0 000071   000354 631400 0                  EPPR1   s:1007+19
         0 000072   000000 701000 xent               TSX1    printf
         0 000073   000000 236007                    LDQ     0,DL

      952       959    3                       printdata(data,sizeof(data));  

    959  0 000074   200034 630500                    EPPR0   data,,AUTO
         0 000075   200021 450500                    STP0    bound+11,,AUTO
         0 000076   000020 236007                    LDQ     16,DL
         0 000077   200022 756100                    STQ     bound+12,,AUTO
         0 000100   200021 630500                    EPPR0   bound+11,,AUTO
         0 000101   000354 631400 0                  EPPR1   s:1007+19
         0 000102   000000 701000 xent               TSX1    printdata
         0 000103   000000 236007                    LDQ     0,DL
         0 000104   000000 702000 xent               TSX2    _XBC_FARET

      953       960    3                       }  
      954       961    2               return;  
      955       962    2               }  
      956       963    1        for (i = 0;i < linecnt-1;i++)  

    963  0 000105   200024 450100                    STZ     i,,AUTO

    963  0 000106   200025 236100                    LDQ     linecnt,,AUTO
         0 000107   000001 136007                    SBLQ    1,DL
         0 000110   200024 116100                    CMPQ    i,,AUTO
         0 000111   000321 604400 0                  TMOZ    s:1006

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=258
      957       964    1               {  
      958       965    2               if (fetchdibdat(fd,data,sizeof(data),addr)<0)  

    965  0 000112   200004 236100                    LDQ     fd,,AUTO
         0 000113   200017 756100                    STQ     bound+9,,AUTO
         0 000114   200034 630500                    EPPR0   data,,AUTO
         0 000115   200020 450500                    STP0    bound+10,,AUTO
         0 000116   000020 236007                    LDQ     16,DL
         0 000117   200021 756100                    STQ     bound+11,,AUTO
         0 000120   200005 236100                    LDQ     addr,,AUTO
         0 000121   200022 756100                    STQ     bound+12,,AUTO
         0 000122   200017 630500                    EPPR0   bound+9,,AUTO
         0 000123   000351 631400 0                  EPPR1   s:1007+16
         0 000124   000000 701000 xent               TSX1    fetchdibdat
         0 000125   000000 236007                    LDQ     0,DL
         0 000126   200041 756100                    STQ     data+5,,AUTO
         0 000127   200041 234100                    SZN     data+5,,AUTO
         0 000130   000140 605000 0                  TPL     s:970

      959       966    2                       {  
      960       967    3                       printf("can't fetch dib memory for raw dump\n");  

    967  0 000131   000352 236000 0                  LDQ     s:1007+17
         0 000132   200022 756100                    STQ     bound+12,,AUTO
         0 000133   200022 630500                    EPPR0   bound+12,,AUTO
         0 000134   000347 631400 0                  EPPR1   s:1007+14
         0 000135   000000 701000 xent               TSX1    printf
         0 000136   000000 236007                    LDQ     0,DL
         0 000137   000000 702000 xent               TSX2    _XBC_FARET

      961       968    3                       return;  
      962       969    3                       }  
      963       970    2               if (fetchdibdat(fd,tdata,sizeof(tdata),addr+sizeof(data))<0)  

    970  0 000140   200004 236100                    LDQ     fd,,AUTO
         0 000141   200017 756100                    STQ     bound+9,,AUTO
         0 000142   200030 630500                    EPPR0   tdata,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=259
         0 000143   200020 450500                    STP0    bound+10,,AUTO
         0 000144   000020 236007                    LDQ     16,DL
         0 000145   200021 756100                    STQ     bound+11,,AUTO
         0 000146   000020 236007                    LDQ     16,DL
         0 000147   200005 076100                    ADQ     addr,,AUTO
         0 000150   200022 756100                    STQ     bound+12,,AUTO
         0 000151   200017 630500                    EPPR0   bound+9,,AUTO
         0 000152   000351 631400 0                  EPPR1   s:1007+16
         0 000153   000000 701000 xent               TSX1    fetchdibdat
         0 000154   000000 236007                    LDQ     0,DL
         0 000155   200042 756100                    STQ     data+6,,AUTO
         0 000156   200042 234100                    SZN     data+6,,AUTO
         0 000157   000201 605000 0                  TPL     s:976

      964       971    2                       {  
      965       972    3                       printf("%#8x ",addr);  

    972  0 000160   000353 236000 0                  LDQ     s:1007+18
         0 000161   200021 756100                    STQ     bound+11,,AUTO
         0 000162   200005 236100                    LDQ     addr,,AUTO
         0 000163   200022 756100                    STQ     bound+12,,AUTO
         0 000164   200021 630500                    EPPR0   bound+11,,AUTO
         0 000165   000354 631400 0                  EPPR1   s:1007+19
         0 000166   000000 701000 xent               TSX1    printf
         0 000167   000000 236007                    LDQ     0,DL

      966       973    3                       printdata(data,sizeof(data)/2);  

    973  0 000170   200034 630500                    EPPR0   data,,AUTO
         0 000171   200021 450500                    STP0    bound+11,,AUTO
         0 000172   000010 236007                    LDQ     8,DL
         0 000173   200022 756100                    STQ     bound+12,,AUTO
         0 000174   200021 630500                    EPPR0   bound+11,,AUTO
         0 000175   000354 631400 0                  EPPR1   s:1007+19
         0 000176   000000 701000 xent               TSX1    printdata
         0 000177   000000 236007                    LDQ     0,DL
         0 000200   000000 702000 xent               TSX2    _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=260

      967       974    3                       return;  
      968       975    3                       }  
      969       976    2               if ((skipped)&&(memcmp(data_,tdata_,sizeof(tdata))!=0))  

    976  0 000201   200023 234100                    SZN     skipped,,AUTO
         0 000202   000224 600000 0                  TZE     s:987
         0 000203   200027 473500                    LDP3    data_,,AUTO
         0 000204   200026 474500                    LDP4    tdata_,,AUTO
         0 000205   000100 106500                    CMPC    fill='000'O
         0 000206   300000 000020                    ADSC9   0,,PR3                   cn=0,n=16
         0 000207   400000 000020                    ADSC9   0,,PR4                   cn=0,n=16
         0 000210   200043 754100                    STI     data+7,,AUTO
         0 000211   200043 236100                    LDQ     data+7,,AUTO
         0 000212   000017 772000                    QRL     15
         0 000213   000007 376007                    ANQ     7,DL
         0 000214   000020 236006 xsym               LDQ     __INDTBL+16,QL
         0 000215   200043 756100                    STQ     data+7,,AUTO
         0 000216   200043 234100                    SZN     data+7,,AUTO
         0 000217   000224 600000 0                  TZE     s:987

      970       977    2                       {  
      971       978    3        /*  
      972       979    3         *             the lines were equal, but aren't anymore. increment the  
      973       980    3         *             address move to the next buffer reset skipped so that  
      974       981    3         *             we print the next line.  
      975       982    3         */  
      976       983    3                       skipped = 0;  

    983  0 000220   200023 450100                    STZ     skipped,,AUTO

      977       984    3                       addr += sizeof(data);  

    984  0 000221   000020 236007                    LDQ     16,DL
         0 000222   200005 056100                    ASQ     addr,,AUTO

      978       985    3                       continue;  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=261

    985  0 000223   000317 710000 0                  TRA     s:1005

      979       986    3                       }  
      980       987    2               if ((memcmp(data_,tdata_,sizeof(tdata))==0) &&(skipped))  

    987  0 000224   200027 473500                    LDP3    data_,,AUTO
         0 000225   200026 474500                    LDP4    tdata_,,AUTO
         0 000226   000100 106500                    CMPC    fill='000'O
         0 000227   300000 000020                    ADSC9   0,,PR3                   cn=0,n=16
         0 000230   400000 000020                    ADSC9   0,,PR4                   cn=0,n=16
         0 000231   200044 754100                    STI     data+8,,AUTO
         0 000232   200044 236100                    LDQ     data+8,,AUTO
         0 000233   000017 772000                    QRL     15
         0 000234   000007 376007                    ANQ     7,DL
         0 000235   000020 236006 xsym               LDQ     __INDTBL+16,QL
         0 000236   200044 756100                    STQ     data+8,,AUTO
         0 000237   200044 234100                    SZN     data+8,,AUTO
         0 000240   000246 601000 0                  TNZ     s:995
         0 000241   200023 234100                    SZN     skipped,,AUTO
         0 000242   000246 600000 0                  TZE     s:995

      981       988    2                       {  
      982       989    3        /*  
      983       990    3         *             the lines are equal and we are already skipping.  
      984       991    3         */  
      985       992    3                       addr += sizeof(data);  

    992  0 000243   000020 236007                    LDQ     16,DL
         0 000244   200005 056100                    ASQ     addr,,AUTO

      986       993    3                       continue;  

    993  0 000245   000317 710000 0                  TRA     s:1005

      987       994    3                       }  
      988       995    2               if (memcmp(data_,tdata_,sizeof(tdata))==0)  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=262

    995  0 000246   200027 473500                    LDP3    data_,,AUTO
         0 000247   200026 474500                    LDP4    tdata_,,AUTO
         0 000250   000100 106500                    CMPC    fill='000'O
         0 000251   300000 000020                    ADSC9   0,,PR3                   cn=0,n=16
         0 000252   400000 000020                    ADSC9   0,,PR4                   cn=0,n=16
         0 000253   200045 754100                    STI     data+9,,AUTO
         0 000254   200045 236100                    LDQ     data+9,,AUTO
         0 000255   000017 772000                    QRL     15
         0 000256   000007 376007                    ANQ     7,DL
         0 000257   000020 236006 xsym               LDQ     __INDTBL+16,QL
         0 000260   200045 756100                    STQ     data+9,,AUTO
         0 000261   200045 234100                    SZN     data+9,,AUTO
         0 000262   000275 601000 0                  TNZ     s:1001

      989       996    2                       {  
      990       997    3                       skipped++;  

    997  0 000263   200023 054100                    AOS     skipped,,AUTO

      991       998    3                       printf("%#8x* ",addr);  

    998  0 000264   000355 236000 0                  LDQ     s:1007+20
         0 000265   200010 756100                    STQ     bound+2,,AUTO
         0 000266   200005 236100                    LDQ     addr,,AUTO
         0 000267   200011 756100                    STQ     bound+3,,AUTO
         0 000270   200010 630500                    EPPR0   bound+2,,AUTO
         0 000271   000354 631400 0                  EPPR1   s:1007+19
         0 000272   000000 701000 xent               TSX1    printf
         0 000273   000000 236007                    LDQ     0,DL
         0 000274   000305 710000 0                  TRA     s:1003

      992       999    3                       }  
      993      1000    2               else  
      994      1001    2                       printf("%#8x  ",addr);  

   1001  0 000275   000356 236000 0                  LDQ     s:1007+21
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=263
         0 000276   200010 756100                    STQ     bound+2,,AUTO
         0 000277   200005 236100                    LDQ     addr,,AUTO
         0 000300   200011 756100                    STQ     bound+3,,AUTO
         0 000301   200010 630500                    EPPR0   bound+2,,AUTO
         0 000302   000354 631400 0                  EPPR1   s:1007+19
         0 000303   000000 701000 xent               TSX1    printf
         0 000304   000000 236007                    LDQ     0,DL

      995      1002    2           
      996      1003    2               printdata(data,sizeof(data));  

   1003  0 000305   200034 630500                    EPPR0   data,,AUTO
         0 000306   200010 450500                    STP0    bound+2,,AUTO
         0 000307   000020 236007                    LDQ     16,DL
         0 000310   200011 756100                    STQ     bound+3,,AUTO
         0 000311   200010 630500                    EPPR0   bound+2,,AUTO
         0 000312   000354 631400 0                  EPPR1   s:1007+19
         0 000313   000000 701000 xent               TSX1    printdata
         0 000314   000000 236007                    LDQ     0,DL

      997      1004    2               addr += sizeof(data);  

   1004  0 000315   000020 236007                    LDQ     16,DL
         0 000316   200005 056100                    ASQ     addr,,AUTO

      998      1005    2               }  

   1005  0 000317   200024 054100                    AOS     i,,AUTO
         0 000320   000106 710000 0                  TRA     s:963+1

      999      1006    1        printf("%#8x  ",addr);  

   1006  0 000321   000356 236000 0                  LDQ     s:1007+21
         0 000322   200021 756100                    STQ     bound+11,,AUTO
         0 000323   200005 236100                    LDQ     addr,,AUTO
         0 000324   200022 756100                    STQ     bound+12,,AUTO
         0 000325   200021 630500                    EPPR0   bound+11,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=264
         0 000326   000354 631400 0                  EPPR1   s:1007+19
         0 000327   000000 701000 xent               TSX1    printf
         0 000330   000000 236007                    LDQ     0,DL

     1000      1007    1        printdata(tdata,(bound-(linecnt-1)*sizeof(tdata)));  

   1007  0 000331   200030 630500                    EPPR0   tdata,,AUTO
         0 000332   200021 450500                    STP0    bound+11,,AUTO
         0 000333   200025 236100                    LDQ     linecnt,,AUTO
         0 000334   000004 736000                    QLS     4
         0 000335   000020 176007                    SBQ     16,DL
         0 000336   000000 533000                    NEGL    0
         0 000337   200006 076100                    ADQ     bound,,AUTO
         0 000340   200022 756100                    STQ     bound+12,,AUTO
         0 000341   200021 630500                    EPPR0   bound+11,,AUTO
         0 000342   000354 631400 0                  EPPR1   s:1007+19
         0 000343   000000 701000 xent               TSX1    printdata
         0 000344   000000 236007                    LDQ     0,DL
         0 000345   000000 702000 xent               TSX2    _XBC_FARET
         0 000346   002060 000000 xsym               ZERO    sigint#c+1072,0
         0 000347   000001 000000                    ZERO    1,0
         0 000350   002054 000000 xsym               ZERO    sigint#c+1068,0
         0 000351   000004 000000                    ZERO    4,0
         0 000352   001151 000000 xsym               ZERO    sigint#c+617,0
         0 000353   002453 000000 xsym               ZERO    sigint#c+1323,0
         0 000354   000002 000000                    ZERO    2,0
         0 000355   002451 000000 xsym               ZERO    sigint#c+1321,0
         0 000356   002447 000000 xsym               ZERO    sigint#c+1319,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=265

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0   934-  1008     37   496     0      0  y        0   1 rawdumpdata
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=266

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

    10 Assign    13 Call       8 If         2 Stop       2 DoIndx     1 EndInd
     1 Proc

 # major stmts=   35 Code/major= 6.85 # stmts=   37 Code/stmt= 6.48  Point total= 91.7
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=267

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr              5-0-0/w SBIN        r,m   1 addr
     6-0-0/w SBIN        r,m   1 bound                     34-0-0/c CHAR        r,m   1 data(0:15)
    27-0-0/w PTR         r,m   1 data_                      4-0-0/w SBIN        r,m   1 fd
    24-0-0/w SBIN        r,m   1 i                         25-0-0/w SBIN        r,m   1 linecnt
    23-0-0/w SBIN        r,m   1 skipped                   30-0-0/c CHAR        r,m   1 tdata(0:15)
    26-0-0/w PTR         r,m   1 tdata_

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 interactive                0-0-0/c STRC(432)   r,m   1 ipc
     0-0-0/w SBIN        r,m   1 kmemfd                     0-0-0/w SBIN        r,m   1 ldctaddr
     0-0-0/w SBIN        r,m   1 ldctcnt                    0-0-0/w SBIN        r,m   1 ldctsave
     0-0-0/w SBIN        r,m   1 messaddr                   0-0-0/w PTR         r,m   1 messc
     0-0-0/w SBIN        r,m   1 messcnt                   26-0-0/c CHAR        r,m   1 op
     0-0-0/w PTR         r,m   1 optarg                   146-0-0/c CHAR        r,m   1 path(0:63)
     0-0-0/c CHAR        r,m   1 prevop                     0-0-0/w SBIN        r,m   1 procflg
     1-0-0/c STRC(1116)  r,m   1 qhdr                       0-0-0/w SBIN        r,m   1 qhdrflg
     0-0-0/w SBIN        r,m   1 rawaddr                    0-0-0/w SBIN        r,m   1 rawbound
     0-0-0/w SBIN        r,m   1 rawdump                    0-0-0/c CHAR        r,m   1 readbuf(0:79)
     0-0-0/c CHAR        r,m   1 savebuf(0:79)              0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=268
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=269

 Object Unit name= printdata                                  File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:15:44.64 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero   115    163  printdata
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  printdata

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_2
                       Std       0 printf
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=270

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=271


     1002      1009                
     1003      1010                
     1004      1011             printdata(buf,size)  
     1005      1012                
     1006      1013             /*  
     1007      1014              *             buf - pointer to data.  
     1008      1015              *             size - number of bytes to be printed.  
     1009      1016              */  
     1010      1017             unsigned char *buf;  

   1017  0 000000   000000 700000 xent  printdata    TSX0    _XBC_AUTO_2
         0 000001   000026 000002                    ZERO    22,2

     1011      1018             int size;  
     1012      1019                
     1013      1020             {  
     1014      1021    1           
     1015      1022    1        int i;  
     1016      1023    1        unsigned char *cbuf;  
     1017      1024    1           
     1018      1025    1           
     1019      1026    1        for (i = 0;i<size;i+=2)  

   1026  0 000002   200013 450100                    STZ     i,,AUTO

   1026  0 000003   200013 236100                    LDQ     i,,AUTO
         0 000004   200005 116100                    CMPQ    size,,AUTO
         0 000005   000036 605000 0                  TPL     s:1028+3

     1020      1027    1               printf("%02x%02x ",*(buf+i),*(buf+i+1));  

   1027  0 000006   000150 236000 0                  LDQ     s:1040+7
         0 000007   200007 756100                    STQ     size+2,,AUTO
         0 000010   200004 473500                    LDP3    buf,,AUTO
         0 000011   200013 236100                    LDQ     i,,AUTO
         0 000012   000100 100506                    MLR     fill='000'O
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=272
         0 000013   300000 000001                    ADSC9   0,Q,PR3                  cn=0,n=1
         0 000014   200014 600001                    ADSC9   i+1,,AUTO                cn=3,n=1
         0 000015   200014 236100                    LDQ     i+1,,AUTO
         0 000016   000777 376007                    ANQ     511,DL
         0 000017   200010 756100                    STQ     size+3,,AUTO
         0 000020   200013 236100                    LDQ     i,,AUTO
         0 000021   000100 100506                    MLR     fill='000'O
         0 000022   300000 200001                    ADSC9   0,Q,PR3                  cn=1,n=1
         0 000023   200014 600001                    ADSC9   i+1,,AUTO                cn=3,n=1
         0 000024   200014 236100                    LDQ     i+1,,AUTO
         0 000025   000777 376007                    ANQ     511,DL
         0 000026   200011 756100                    STQ     size+4,,AUTO
         0 000027   200007 630500                    EPPR0   size+2,,AUTO
         0 000030   000151 631400 0                  EPPR1   s:1040+8
         0 000031   000000 701000 xent               TSX1    printf
         0 000032   000000 236007                    LDQ     0,DL

     1021      1028    1        for (i=size;i<BYTESPERLINE;i+=2)  

   1028  0 000033   000002 236007                    LDQ     2,DL
         0 000034   200013 056100                    ASQ     i,,AUTO
         0 000035   000003 710000 0                  TRA     s:1026+1

   1028  0 000036   200005 236100                    LDQ     size,,AUTO
         0 000037   200013 756100                    STQ     i,,AUTO

   1028  0 000040   200013 236100                    LDQ     i,,AUTO
         0 000041   000020 116007                    CMPQ    16,DL
         0 000042   000054 605000 0                  TPL     s:1030+3

     1022      1029    1               printf("     ");  

   1029  0 000043   000152 236000 0                  LDQ     s:1040+9
         0 000044   200011 756100                    STQ     size+4,,AUTO
         0 000045   200011 630500                    EPPR0   size+4,,AUTO
         0 000046   000153 631400 0                  EPPR1   s:1040+10
         0 000047   000000 701000 xent               TSX1    printf
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=273
         0 000050   000000 236007                    LDQ     0,DL

     1023      1030    1        printf("   ");  

   1030  0 000051   000002 236007                    LDQ     2,DL
         0 000052   200013 056100                    ASQ     i,,AUTO
         0 000053   000040 710000 0                  TRA     s:1028+5

   1030  0 000054   000154 236000 0                  LDQ     s:1040+11
         0 000055   200011 756100                    STQ     size+4,,AUTO
         0 000056   200011 630500                    EPPR0   size+4,,AUTO
         0 000057   000153 631400 0                  EPPR1   s:1040+10
         0 000060   000000 701000 xent               TSX1    printf
         0 000061   000000 236007                    LDQ     0,DL

     1024      1031    1        cbuf = (unsigned char *)buf;  

   1031  0 000062   200004 236100                    LDQ     buf,,AUTO
         0 000063   200012 756100                    STQ     cbuf,,AUTO

     1025      1032    1        for (i=0;i<(size);i++)  

   1032  0 000064   200013 450100                    STZ     i,,AUTO

   1032  0 000065   200013 236100                    LDQ     i,,AUTO
         0 000066   200005 116100                    CMPQ    size,,AUTO
         0 000067   000141 605000 0                  TPL     s:1040

     1026      1033    1               {  
     1027      1034    2               if ((*cbuf < SPACE) || (*cbuf > TILDE))  

   1034  0 000070   200012 473500                    LDP3    cbuf,,AUTO
         0 000071   000100 100500                    MLR     fill='000'O
         0 000072   300000 000001                    ADSC9   0,,PR3                   cn=0,n=1
         0 000073   200014 600001                    ADSC9   i+1,,AUTO                cn=3,n=1
         0 000074   200014 236100                    LDQ     i+1,,AUTO
         0 000075   000777 376007                    ANQ     511,DL
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=274
         0 000076   000040 116007                    CMPQ    32,DL
         0 000077   000110 604000 0                  TMI     s:1035
         0 000100   200012 473500                    LDP3    cbuf,,AUTO
         0 000101   000100 100500                    MLR     fill='000'O
         0 000102   300000 000001                    ADSC9   0,,PR3                   cn=0,n=1
         0 000103   200014 600001                    ADSC9   i+1,,AUTO                cn=3,n=1
         0 000104   200014 236100                    LDQ     i+1,,AUTO
         0 000105   000777 376007                    ANQ     511,DL
         0 000106   000176 116007                    CMPQ    126,DL
         0 000107   000117 604400 0                  TMOZ    s:1037

     1028      1035    2                       printf(".");  

   1035  0 000110   000155 236000 0                  LDQ     s:1040+12
         0 000111   200011 756100                    STQ     size+4,,AUTO
         0 000112   200011 630500                    EPPR0   size+4,,AUTO
         0 000113   000153 631400 0                  EPPR1   s:1040+10
         0 000114   000000 701000 xent               TSX1    printf
         0 000115   000000 236007                    LDQ     0,DL
         0 000116   000134 710000 0                  TRA     s:1038

     1029      1036    2               else  
     1030      1037    2                       printf("%c",*cbuf);  

   1037  0 000117   000156 236000 0                  LDQ     s:1040+13
         0 000120   200010 756100                    STQ     size+3,,AUTO
         0 000121   200012 473500                    LDP3    cbuf,,AUTO
         0 000122   000100 100500                    MLR     fill='000'O
         0 000123   300000 000001                    ADSC9   0,,PR3                   cn=0,n=1
         0 000124   200014 600001                    ADSC9   i+1,,AUTO                cn=3,n=1
         0 000125   200014 236100                    LDQ     i+1,,AUTO
         0 000126   000777 376007                    ANQ     511,DL
         0 000127   200011 756100                    STQ     size+4,,AUTO
         0 000130   200010 630500                    EPPR0   size+3,,AUTO
         0 000131   000157 631400 0                  EPPR1   s:1040+14
         0 000132   000000 701000 xent               TSX1    printf
         0 000133   000000 236007                    LDQ     0,DL
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=275

     1031      1038    2               cbuf++;  

   1038  0 000134   000160 236000 0                  LDQ     s:1040+15
         0 000135   200012 036100                    ADLQ    cbuf,,AUTO
         0 000136   200012 756100                    STQ     cbuf,,AUTO

     1032      1039    2               }  

   1039  0 000137   200013 054100                    AOS     i,,AUTO
         0 000140   000065 710000 0                  TRA     s:1032+1

     1033      1040    1        printf("\n");  

   1040  0 000141   000161 236000 0                  LDQ     s:1040+16
         0 000142   200011 756100                    STQ     size+4,,AUTO
         0 000143   200011 630500                    EPPR0   size+4,,AUTO
         0 000144   000153 631400 0                  EPPR1   s:1040+10
         0 000145   000000 701000 xent               TSX1    printf
         0 000146   000000 236007                    LDQ     0,DL
         0 000147   000000 702000 xent               TSX2    _XBC_FARET
         0 000150   002321 000000 xsym               ZERO    sigint#c+1233,0
         0 000151   000003 000000                    ZERO    3,0
         0 000152   002445 000000 xsym               ZERO    sigint#c+1317,0
         0 000153   000001 000000                    ZERO    1,0
         0 000154   002444 000000 xsym               ZERO    sigint#c+1316,0
         0 000155   002514 000000 xsym               ZERO    sigint#c+1356,0
         0 000156   002513 000000 xsym               ZERO    sigint#c+1355,0
         0 000157   000002 000000                    ZERO    2,0
         0 000160   000000 200000                    CNAX0   0
         0 000161   002515 000000 xsym               ZERO    sigint#c+1357,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=276

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0  1017-  1041     19   490     0      0  y        0   1 printdata
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=277

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     2 Assign     6 Call       1 If         5 DoIndx     4 EndInd     1 Proc


 # major stmts=   14 Code/major= 8.21 # stmts=   19 Code/stmt= 6.05  Point total= 82.4
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=278

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr              4-0-0/w PTR         r,m   1 buf
    12-0-0/w PTR         r,m   1 cbuf                      13-0-0/w SBIN        r,m   1 i
     5-0-0/w SBIN        r,m   1 size

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 interactive                0-0-0/c STRC(432)   r,m   1 ipc
     0-0-0/w SBIN        r,m   1 kmemfd                     0-0-0/w SBIN        r,m   1 ldctaddr
     0-0-0/w SBIN        r,m   1 ldctcnt                    0-0-0/w SBIN        r,m   1 ldctsave
     0-0-0/w SBIN        r,m   1 messaddr                   0-0-0/w PTR         r,m   1 messc
     0-0-0/w SBIN        r,m   1 messcnt                   26-0-0/c CHAR        r,m   1 op
     0-0-0/w PTR         r,m   1 optarg                   146-0-0/c CHAR        r,m   1 path(0:63)
     0-0-0/c CHAR        r,m   1 prevop                     0-0-0/w SBIN        r,m   1 procflg
     1-0-0/c STRC(1116)  r,m   1 qhdr                       0-0-0/w SBIN        r,m   1 qhdrflg
     0-0-0/w SBIN        r,m   1 rawaddr                    0-0-0/w SBIN        r,m   1 rawbound
     0-0-0/w SBIN        r,m   1 rawdump                    0-0-0/c CHAR        r,m   1 readbuf(0:79)
     0-0-0/c CHAR        r,m   1 savebuf(0:79)              0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=279

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=280

 Object Unit name= getipc                                     File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:15:53.36 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero   129    201  getipc
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  getipc

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_0
                       Std       0 fetchdibdat
                       Std       0 printf
         yes           Std       1 exit
                       Std       0 pk4
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=281

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=282


     1035      1042                
     1036      1044                
     1037      1045             /*  
     1038      1046              *             getipc - fetch the interprocess table from the dib.  
     1039      1047              */  
     1040      1048                
     1041      1049                
     1042      1050             getipc()  
     1043      1051                
     1044      1052             {  

   1052  0 000000   000000 700000 xent  getipc       TSX0    _XBC_AUTO_0
         0 000001   000024 000000                    ZERO    20,0

     1045      1053    1        int *s = (int *)(&ipc.scode);  

   1053  0 000002   000173 236000 0                  LDQ     s:1077+8
         0 000003   200011 756100                    STQ     s,,AUTO

     1046      1054    1        int xx;  
     1047      1055    1           
     1048      1056    1        dibaddr = 1000; /* read beyond page zero to set DB_CURPP in DBM$READ*/  

   1056  0 000004   001750 236007                    LDQ     1000,DL
         0 000005   000000 756000 xsym               STQ     dibaddr

     1049      1057    1        if (fetchdibdat(dibfd,&ipc,sizeof(ipc),dibaddr) < 0)  

   1057  0 000006   000000 236000 xsym               LDQ     dibfd
         0 000007   200004 756100                    STQ     __varyarg_ptr+1,,AUTO
         0 000010   000174 236000 0                  LDQ     s:1077+9
         0 000011   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000012   000060 236007                    LDQ     48,DL
         0 000013   200006 756100                    STQ     __varyarg_ptr+3,,AUTO
         0 000014   000000 236000 xsym               LDQ     dibaddr
         0 000015   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=283
         0 000016   200004 630500                    EPPR0   __varyarg_ptr+1,,AUTO
         0 000017   000175 631400 0                  EPPR1   s:1077+10
         0 000020   000000 701000 xent               TSX1    fetchdibdat
         0 000021   000000 236007                    LDQ     0,DL
         0 000022   200012 756100                    STQ     s+1,,AUTO
         0 000023   200012 234100                    SZN     s+1,,AUTO
         0 000024   000041 605000 0                  TPL     s:1062

     1050      1058    1               {  
     1051      1059    2               printf("can't get ipc data\n");  

   1059  0 000025   000176 236000 0                  LDQ     s:1077+11
         0 000026   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000027   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000030   000177 631400 0                  EPPR1   s:1077+12
         0 000031   000000 701000 xent               TSX1    printf
         0 000032   000000 236007                    LDQ     0,DL

     1052      1060    2               exit(EXIT_FAILURE);  

   1060  0 000033   000007 236007                    LDQ     7,DL
         0 000034   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000035   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000036   000177 631400 0                  EPPR1   s:1077+12
         0 000037   000000 701000 xent               TSX1    exit
         0 000040   000000 236007                    LDQ     0,DL

     1053      1061    2               }  
     1054      1062    1        dibaddr = 0;  /* really 0x51f00000 */  

   1062  0 000041   000000 450000 xsym               STZ     dibaddr

     1055      1063    1        if (fetchdibdat(dibfd,&ipc,sizeof(ipc),dibaddr) < 0)  

   1063  0 000042   000000 236000 xsym               LDQ     dibfd
         0 000043   200004 756100                    STQ     __varyarg_ptr+1,,AUTO
         0 000044   000174 236000 0                  LDQ     s:1077+9
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=284
         0 000045   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000046   000060 236007                    LDQ     48,DL
         0 000047   200006 756100                    STQ     __varyarg_ptr+3,,AUTO
         0 000050   000000 236000 xsym               LDQ     dibaddr
         0 000051   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000052   200004 630500                    EPPR0   __varyarg_ptr+1,,AUTO
         0 000053   000175 631400 0                  EPPR1   s:1077+10
         0 000054   000000 701000 xent               TSX1    fetchdibdat
         0 000055   000000 236007                    LDQ     0,DL
         0 000056   200013 756100                    STQ     s+2,,AUTO
         0 000057   200013 234100                    SZN     s+2,,AUTO
         0 000060   000075 605000 0                  TPL     s:1068

     1056      1064    1               {  
     1057      1065    2               printf("can't get ipc data\n");  

   1065  0 000061   000176 236000 0                  LDQ     s:1077+11
         0 000062   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000063   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000064   000177 631400 0                  EPPR1   s:1077+12
         0 000065   000000 701000 xent               TSX1    printf
         0 000066   000000 236007                    LDQ     0,DL

     1058      1066    2               exit(EXIT_FAILURE);  

   1066  0 000067   000007 236007                    LDQ     7,DL
         0 000070   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000071   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000072   000177 631400 0                  EPPR1   s:1077+12
         0 000073   000000 701000 xent               TSX1    exit
         0 000074   000000 236007                    LDQ     0,DL

     1059      1067    2               }  
     1060      1068    1              ipc.entry = pk4(ipc.entry);  

   1068  0 000075   000000 236000 xsym               LDQ     ipc
         0 000076   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=285
         0 000077   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000100   000177 631400 0                  EPPR1   s:1077+12
         0 000101   000000 701000 xent               TSX1    pk4
         0 000102   000000 236007                    LDQ     0,DL
         0 000103   000000 756000 xsym               STQ     ipc

     1061      1069    1              xx = pk4(ipc.qhdr);  

   1069  0 000104   000001 236000 xsym               LDQ     ipc+1
         0 000105   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000106   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000107   000177 631400 0                  EPPR1   s:1077+12
         0 000110   000000 701000 xent               TSX1    pk4
         0 000111   000000 236007                    LDQ     0,DL
         0 000112   200010 756100                    STQ     xx,,AUTO

     1062      1070    1              ipc.qhdr = xx;  

   1070  0 000113   200010 236100                    LDQ     xx,,AUTO
         0 000114   000001 756000 xsym               STQ     ipc+1

     1063      1071    1              xx = pk4(ipc.ldct);  

   1071  0 000115   000003 236000 xsym               LDQ     ipc+3
         0 000116   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000117   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000120   000177 631400 0                  EPPR1   s:1077+12
         0 000121   000000 701000 xent               TSX1    pk4
         0 000122   000000 236007                    LDQ     0,DL
         0 000123   200010 756100                    STQ     xx,,AUTO

     1064      1072    1              ipc.ldct = xx;  

   1072  0 000124   200010 236100                    LDQ     xx,,AUTO
         0 000125   000003 756000 xsym               STQ     ipc+3

     1065      1073    1              ipc.ipc_flag = pk4(ipc.ipc_flag);  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=286

   1073  0 000126   000004 236000 xsym               LDQ     ipc+4
         0 000127   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000130   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000131   000177 631400 0                  EPPR1   s:1077+12
         0 000132   000000 701000 xent               TSX1    pk4
         0 000133   000000 236007                    LDQ     0,DL
         0 000134   000004 756000 xsym               STQ     ipc+4

     1066      1074    1              ipc.host_node = pk4(ipc.host_node);  

   1074  0 000135   000005 236000 xsym               LDQ     ipc+5
         0 000136   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000137   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000140   000177 631400 0                  EPPR1   s:1077+12
         0 000141   000000 701000 xent               TSX1    pk4
         0 000142   000000 236007                    LDQ     0,DL
         0 000143   000005 756000 xsym               STQ     ipc+5

     1067      1075    1              ipc.fep_node = pk4(ipc.fep_node);  

   1075  0 000144   000006 236000 xsym               LDQ     ipc+6
         0 000145   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000146   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000147   000177 631400 0                  EPPR1   s:1077+12
         0 000150   000000 701000 xent               TSX1    pk4
         0 000151   000000 236007                    LDQ     0,DL
         0 000152   000006 756000 xsym               STQ     ipc+6

     1068      1076    1              *s = pk4(ipc.scode);  

   1076  0 000153   000012 236000 xsym               LDQ     ipc+10
         0 000154   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000155   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000156   000177 631400 0                  EPPR1   s:1077+12
         0 000157   000000 701000 xent               TSX1    pk4
         0 000160   000000 236007                    LDQ     0,DL
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=287
         0 000161   200011 473500                    LDP3    s,,AUTO
         0 000162   300000 756100                    STQ     0,,PR3

     1069      1077    1              ipc.hststt = pk4(ipc.hststt);  

   1077  0 000163   000013 236000 xsym               LDQ     ipc+11
         0 000164   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000165   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000166   000177 631400 0                  EPPR1   s:1077+12
         0 000167   000000 701000 xent               TSX1    pk4
         0 000170   000000 236007                    LDQ     0,DL
         0 000171   000013 756000 xsym               STQ     ipc+11
         0 000172   000000 702000 xent               TSX2    _XBC_FARET
         0 000173   000012 000000 xsym               ZERO    ipc+10,0
         0 000174   000000 000000 xsym               ZERO    ipc0,0
         0 000175   000004 000000                    ZERO    4,0
         0 000176   002047 000000 xsym               ZERO    sigint#c+1063,0
         0 000177   000001 000000                    ZERO    1,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=288

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0  1052-  1078     20   489     0      0  y        0   1 getipc
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=289

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

    12 Assign     4 Call       2 If         1 Initlz     1 Proc

 # major stmts=   18 Code/major= 7.16 # stmts=   20 Code/stmt= 6.45  Point total= 89.1
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=290

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr             11-0-0/w PTR         r,m   1 s
    10-0-0/w SBIN        r,m   1 xx

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=291

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=292

 Object Unit name= dodibctx                                   File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:16:02.16 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero    39     47  dodibctx
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  dodibctx

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_0
                       Std       0 fetchdibdat
                       Std       0 printf
                       Std       0 dibctxdata
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=293

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=294


     1071      1079                
     1072      1080                
     1073      1081                
     1074      1082             /*  
     1075      1083              *             dodibctx - fetch the context area from the dib.  
     1076      1084              */  
     1077      1085                
     1078      1086                
     1079      1087             dodibctx()  
     1080      1088                
     1081      1089             {  

   1089  0 000000   000000 700000 xent  dodibctx     TSX0    _XBC_AUTO_0
         0 000001   000022 000000                    ZERO    18,0

     1082      1090    1        dibaddr = (DIB_Q+qhdr.ctx_offset)-DIB_BASE;  

   1090  0 000002   000013 236000 xsym               LDQ     qhdr+11
         0 000003   400000 076007                    ADQ     -131072,DL
         0 000004   000000 756000 xsym               STQ     dibaddr

     1083      1091    1        if (fetchdibdat(dibfd,&dib_ctx,sizeof(dib_ctx),dibaddr) < 0)  

   1091  0 000005   000000 236000 xsym               LDQ     dibfd
         0 000006   200004 756100                    STQ     __varyarg_ptr+1,,AUTO
         0 000007   000042 236000 0                  LDQ     s:1096+7
         0 000010   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000011   002030 236007                    LDQ     1048,DL
         0 000012   200006 756100                    STQ     __varyarg_ptr+3,,AUTO
         0 000013   000000 236000 xsym               LDQ     dibaddr
         0 000014   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000015   200004 630500                    EPPR0   __varyarg_ptr+1,,AUTO
         0 000016   000043 631400 0                  EPPR1   s:1096+8
         0 000017   000000 701000 xent               TSX1    fetchdibdat
         0 000020   000000 236007                    LDQ     0,DL
         0 000021   200010 756100                    STQ     __varyarg_ptr+5,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=295
         0 000022   200010 234100                    SZN     __varyarg_ptr+5,,AUTO
         0 000023   000033 605000 0                  TPL     s:1096

     1084      1092    1               {  
     1085      1093    2               printf("can't fetch dib ctx data\n");  

   1093  0 000024   000044 236000 0                  LDQ     s:1096+9
         0 000025   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000026   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000027   000045 631400 0                  EPPR1   s:1096+10
         0 000030   000000 701000 xent               TSX1    printf
         0 000031   000000 236007                    LDQ     0,DL
         0 000032   000041 710000 0                  TRA     s:1096+6

     1086      1094    2               }  
     1087      1095    1        else  
     1088      1096    1               dibctxdata(&dib_ctx);  

   1096  0 000033   000042 236000 0                  LDQ     s:1096+7
         0 000034   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000035   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000036   000045 631400 0                  EPPR1   s:1096+10
         0 000037   000000 701000 xent               TSX1    dibctxdata
         0 000040   000000 236007                    LDQ     0,DL
         0 000041   000000 702000 xent               TSX2    _XBC_FARET
         0 000042   000000 000000 xsym               ZERO    dib_ctx0,0
         0 000043   000004 000000                    ZERO    4,0
         0 000044   002040 000000 xsym               ZERO    sigint#c+1056,0
         0 000045   000001 000000                    ZERO    1,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=296

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0  1089-  1097      5   487     0      0  y        0   1 dodibctx
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=297

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     1 Assign     2 Call       1 If         1 Proc

 # major stmts=    4 Code/major= 9.75 # stmts=    5 Code/stmt= 7.80  Point total= 86.9
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=298

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=299
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=300

 Object Unit name= doprocs                                    File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:16:07.80 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero   212    324  doprocs
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  doprocs

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_0
                       Std       0 fetchdibdat
                       Std       0 printf
                       Std       0 pk4
                       Std       0 pk2
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=301

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=302


     1090      1098                
     1091      1099          char stat_table_txt[9][8] = {"null","sleep","onproc","run","idle","zombie","st  
     1092      1100                
     1093      1102             doprocs()  
     1094      1103                
     1095      1104             {  

   1104  0 000000   000000 700000 xent  doprocs      TSX0    _XBC_AUTO_0
         0 000001   000032 000000                    ZERO    26,0

     1096      1105    1        int procaddr;  
     1097      1106    1        if (fetchdibdat(dibfd,&ldctaddr,sizeof(ldctaddr),ipc.ldct) < 0)  

   1106  0 000002   000000 236000 xsym               LDQ     dibfd
         0 000003   200013 756100                    STQ     __varyarg_ptr+8,,AUTO
         0 000004   000306 236000 0                  LDQ     s:1143+2
         0 000005   200014 756100                    STQ     __varyarg_ptr+9,,AUTO
         0 000006   000004 236007                    LDQ     4,DL
         0 000007   200015 756100                    STQ     __varyarg_ptr+10,,AUTO
         0 000010   000003 236000 xsym               LDQ     ipc+3
         0 000011   200016 756100                    STQ     __varyarg_ptr+11,,AUTO
         0 000012   200013 630500                    EPPR0   __varyarg_ptr+8,,AUTO
         0 000013   000307 631400 0                  EPPR1   s:1143+3
         0 000014   000000 701000 xent               TSX1    fetchdibdat
         0 000015   000000 236007                    LDQ     0,DL
         0 000016   200020 756100                    STQ     procaddr+1,,AUTO
         0 000017   200020 234100                    SZN     procaddr+1,,AUTO
         0 000020   000031 605000 0                  TPL     s:1111

     1098      1107    1               {  
     1099      1108    2               printf("can't fetch ipc.ldct\n");  

   1108  0 000021   000310 236000 0                  LDQ     s:1143+4
         0 000022   200016 756100                    STQ     __varyarg_ptr+11,,AUTO
         0 000023   200016 630500                    EPPR0   __varyarg_ptr+11,,AUTO
         0 000024   000311 631400 0                  EPPR1   s:1143+5
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=303
         0 000025   000000 701000 xent               TSX1    printf
         0 000026   000000 236007                    LDQ     0,DL

     1100      1109    2               return 0;  

   1109  0 000027   200017 450100                    STZ     procaddr,,AUTO
         0 000030   000304 710000 0                  TRA     s:1143

     1101      1110    2               }  
     1102      1111    1        ldctaddr = pk4(ldctaddr);  

   1111  0 000031   000000 236000 xsym               LDQ     ldctaddr
         0 000032   200016 756100                    STQ     __varyarg_ptr+11,,AUTO
         0 000033   200016 630500                    EPPR0   __varyarg_ptr+11,,AUTO
         0 000034   000311 631400 0                  EPPR1   s:1143+5
         0 000035   000000 701000 xent               TSX1    pk4
         0 000036   000000 236007                    LDQ     0,DL
         0 000037   000000 756000 xsym               STQ     ldctaddr

     1103      1112    1        procaddr = ldctaddr + N_LDCTS*(sizeof(devldct)-2) + sizeof(dduproc);  

   1112  0 000040   000000 236000 xsym               LDQ     ldctaddr
         0 000041   011030 076007                    ADQ     4632,DL
         0 000042   200017 756100                    STQ     procaddr,,AUTO

     1104      1113    1        ldctaddr += sizeof(struct kn_ldct)-2;  

   1113  0 000043   000056 236007                    LDQ     46,DL
         0 000044   000000 056000 xsym               ASQ     ldctaddr

     1105      1114    1        ldctcnt = 1;  

   1114  0 000045   000001 236007                    LDQ     1,DL
         0 000046   000000 756000 xsym               STQ     ldctcnt

     1106      1115    1        printf("\n                       Processor Data\n");  

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=304
   1115  0 000047   000312 236000 0                  LDQ     s:1143+6
         0 000050   200016 756100                    STQ     __varyarg_ptr+11,,AUTO
         0 000051   200016 630500                    EPPR0   __varyarg_ptr+11,,AUTO
         0 000052   000311 631400 0                  EPPR1   s:1143+5
         0 000053   000000 701000 xent               TSX1    printf
         0 000054   000000 236007                    LDQ     0,DL

     1107      1116    1        printf("ldct      stat    uid    pid   ppid    wchan   w2chan alarm swap\n"  

   1116  0 000055   000313 236000 0                  LDQ     s:1143+7
         0 000056   200016 756100                    STQ     __varyarg_ptr+11,,AUTO
         0 000057   200016 630500                    EPPR0   __varyarg_ptr+11,,AUTO
         0 000060   000311 631400 0                  EPPR1   s:1143+5
         0 000061   000000 701000 xent               TSX1    printf
         0 000062   000000 236007                    LDQ     0,DL

     1108      1117    1        printf("----      ----    ---    ---   ----    -----   ------ ----- ----\n"  

   1117  0 000063   000314 236000 0                  LDQ     s:1143+8
         0 000064   200016 756100                    STQ     __varyarg_ptr+11,,AUTO
         0 000065   200016 630500                    EPPR0   __varyarg_ptr+11,,AUTO
         0 000066   000311 631400 0                  EPPR1   s:1143+5
         0 000067   000000 701000 xent               TSX1    printf
         0 000070   000000 236007                    LDQ     0,DL

     1109      1118    1        while (ldctcnt < N_LDCTS)  

   1118  0 000071   000000 236000 xsym               LDQ     ldctcnt
         0 000072   000144 116007                    CMPQ    100,DL
         0 000073   000303 605000 0                  TPL     s:1141+3

     1110      1119    1               {  
     1111      1120    2               if (fetchdibdat(dibfd,&devldct,sizeof(struct kn_ldct),ldctaddr)<0)  

   1120  0 000074   000000 236000 xsym               LDQ     dibfd
         0 000075   200013 756100                    STQ     __varyarg_ptr+8,,AUTO
         0 000076   000315 236000 0                  LDQ     s:1143+9
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=305
         0 000077   200014 756100                    STQ     __varyarg_ptr+9,,AUTO
         0 000100   000060 236007                    LDQ     48,DL
         0 000101   200015 756100                    STQ     __varyarg_ptr+10,,AUTO
         0 000102   000000 236000 xsym               LDQ     ldctaddr
         0 000103   200016 756100                    STQ     __varyarg_ptr+11,,AUTO
         0 000104   200013 630500                    EPPR0   __varyarg_ptr+8,,AUTO
         0 000105   000307 631400 0                  EPPR1   s:1143+3
         0 000106   000000 701000 xent               TSX1    fetchdibdat
         0 000107   000000 236007                    LDQ     0,DL
         0 000110   200021 756100                    STQ     procaddr+2,,AUTO
         0 000111   200021 234100                    SZN     procaddr+2,,AUTO
         0 000112   000123 605000 0                  TPL     s:1125

     1112      1121    2                       {  
     1113      1122    3                       printf("can't get ldct data\n");  

   1122  0 000113   000316 236000 0                  LDQ     s:1143+10
         0 000114   200016 756100                    STQ     __varyarg_ptr+11,,AUTO
         0 000115   200016 630500                    EPPR0   __varyarg_ptr+11,,AUTO
         0 000116   000311 631400 0                  EPPR1   s:1143+5
         0 000117   000000 701000 xent               TSX1    printf
         0 000120   000000 236007                    LDQ     0,DL

     1114      1123    3                       return (0);  

   1123  0 000121   200017 450100                    STZ     procaddr,,AUTO
         0 000122   000304 710000 0                  TRA     s:1143

     1115      1124    3                       }  
     1116      1125    2               if (devldct.procp)  

   1125  0 000123   000003 234000 xsym               SZN     devldct+3
         0 000124   000275 600000 0                  TZE     s:1139

     1117      1126    2                       {  
     1118      1127    3                       fetchdibdat(dibfd,&dduproc,sizeof(dduproc),procaddr);  

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=306
   1127  0 000125   000000 236000 xsym               LDQ     dibfd
         0 000126   200013 756100                    STQ     __varyarg_ptr+8,,AUTO
         0 000127   000317 236000 0                  LDQ     s:1143+11
         0 000130   200014 756100                    STQ     __varyarg_ptr+9,,AUTO
         0 000131   000040 236007                    LDQ     32,DL
         0 000132   200015 756100                    STQ     __varyarg_ptr+10,,AUTO
         0 000133   200017 236100                    LDQ     procaddr,,AUTO
         0 000134   200016 756100                    STQ     __varyarg_ptr+11,,AUTO
         0 000135   200013 630500                    EPPR0   __varyarg_ptr+8,,AUTO
         0 000136   000307 631400 0                  EPPR1   s:1143+3
         0 000137   000000 701000 xent               TSX1    fetchdibdat
         0 000140   000000 236007                    LDQ     0,DL

     1119      1128    3                       printf("%4.4d%10s%7d%7d%7d%9x%9x%7d%7d\n",  

   1128  0 000141   000320 236000 0                  LDQ     s:1143+12
         0 000142   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000143   000000 236000 xsym               LDQ     ldctcnt
         0 000144   200006 756100                    STQ     __varyarg_ptr+3,,AUTO
         0 000145   000000 236000 xsym               LDQ     dduproc
         0 000146   000022 772000                    QRL     18
         0 000147   000777 376007                    ANQ     511,DL
         0 000150   000015 605004                    TPL     s:1128+20,IC
         0 000151   000011 235007                    LDA     9,DL
         0 000152   000007 604004                    TMI     s:1128+16,IC
         0 000153   000001 115007                    CMPA    1,DL
         0 000154   000014 600004                    TZE     s:1128+23,IC
         0 000155   000000 235007                    LDA     0,DL
         0 000156   000001 737000                    LLS     1
         0 000157   000011 507007                    DVF     9,DL
         0 000160   000014 710004                    TRA     s:1128+27,IC
         0 000161   000011 116007                    CMPQ    9,DL
         0 000162   000012 602004                    TNC     s:1128+27,IC
         0 000163   000011 136007                    SBLQ    9,DL
         0 000164   000010 710004                    TRA     s:1128+27,IC
         0 000165   000011 235007                    LDA     9,DL
         0 000166   000004 605004                    TPL     s:1128+25,IC
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=307
         0 000167   000005 604004                    TMI     s:1128+27,IC
         0 000170   000000 236007                    LDQ     0,DL
         0 000171   000003 710004                    TRA     s:1128+27,IC
         0 000172   000011 506007                    DIV     9,DL
         0 000173   000044 733000                    LRS     36
         0 000174   000001 736000                    QLS     1
         0 000175   000022 736000                    QLS     18
         0 000176   000321 036000 0                  ADLQ    s:1143+13
         0 000177   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000200   000000 236000 xsym               LDQ     dduproc
         0 000201   000000 772000                    QRL     0
         0 000202   777777 376007                    ANQ     -1,DL
         0 000203   200004 756100                    STQ     __varyarg_ptr+1,,AUTO
         0 000204   200004 630500                    EPPR0   __varyarg_ptr+1,,AUTO
         0 000205   000311 631400 0                  EPPR1   s:1143+5
         0 000206   000000 701000 xent               TSX1    pk2
         0 000207   000000 236007                    LDQ     0,DL
         0 000210   200010 756100                    STQ     __varyarg_ptr+5,,AUTO
         0 000211   000001 236000 xsym               LDQ     dduproc+1
         0 000212   000022 772000                    QRL     18
         0 000213   777777 376007                    ANQ     -1,DL
         0 000214   200004 756100                    STQ     __varyarg_ptr+1,,AUTO
         0 000215   200004 630500                    EPPR0   __varyarg_ptr+1,,AUTO
         0 000216   000311 631400 0                  EPPR1   s:1143+5
         0 000217   000000 701000 xent               TSX1    pk2
         0 000220   000000 236007                    LDQ     0,DL
         0 000221   200011 756100                    STQ     __varyarg_ptr+6,,AUTO
         0 000222   000001 236000 xsym               LDQ     dduproc+1
         0 000223   000000 772000                    QRL     0
         0 000224   777777 376007                    ANQ     -1,DL
         0 000225   200004 756100                    STQ     __varyarg_ptr+1,,AUTO
         0 000226   200004 630500                    EPPR0   __varyarg_ptr+1,,AUTO
         0 000227   000311 631400 0                  EPPR1   s:1143+5
         0 000230   000000 701000 xent               TSX1    pk2
         0 000231   000000 236007                    LDQ     0,DL
         0 000232   200012 756100                    STQ     __varyarg_ptr+7,,AUTO
         0 000233   000003 236000 xsym               LDQ     dduproc+3
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=308
         0 000234   200004 756100                    STQ     __varyarg_ptr+1,,AUTO
         0 000235   200004 630500                    EPPR0   __varyarg_ptr+1,,AUTO
         0 000236   000311 631400 0                  EPPR1   s:1143+5
         0 000237   000000 701000 xent               TSX1    pk4
         0 000240   000000 236007                    LDQ     0,DL
         0 000241   200013 756100                    STQ     __varyarg_ptr+8,,AUTO
         0 000242   000004 236000 xsym               LDQ     dduproc+4
         0 000243   200004 756100                    STQ     __varyarg_ptr+1,,AUTO
         0 000244   200004 630500                    EPPR0   __varyarg_ptr+1,,AUTO
         0 000245   000311 631400 0                  EPPR1   s:1143+5
         0 000246   000000 701000 xent               TSX1    pk4
         0 000247   000000 236007                    LDQ     0,DL
         0 000250   200014 756100                    STQ     __varyarg_ptr+9,,AUTO
         0 000251   000005 236000 xsym               LDQ     dduproc+5
         0 000252   200004 756100                    STQ     __varyarg_ptr+1,,AUTO
         0 000253   200004 630500                    EPPR0   __varyarg_ptr+1,,AUTO
         0 000254   000311 631400 0                  EPPR1   s:1143+5
         0 000255   000000 701000 xent               TSX1    pk4
         0 000256   000000 236007                    LDQ     0,DL
         0 000257   200015 756100                    STQ     __varyarg_ptr+10,,AUTO
         0 000260   000006 236000 xsym               LDQ     dduproc+6
         0 000261   000022 772000                    QRL     18
         0 000262   777777 376007                    ANQ     -1,DL
         0 000263   200004 756100                    STQ     __varyarg_ptr+1,,AUTO
         0 000264   200004 630500                    EPPR0   __varyarg_ptr+1,,AUTO
         0 000265   000311 631400 0                  EPPR1   s:1143+5
         0 000266   000000 701000 xent               TSX1    pk2
         0 000267   000000 236007                    LDQ     0,DL
         0 000270   200016 756100                    STQ     __varyarg_ptr+11,,AUTO
         0 000271   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000272   000322 631400 0                  EPPR1   s:1143+14
         0 000273   000000 701000 xent               TSX1    printf
         0 000274   000000 236007                    LDQ     0,DL

     1120      1129    3                               ldctcnt,  
     1121      1130    3                               stat_table_txt[dduproc.p_stat%9],  
     1122      1131    3                               pk2(dduproc.p_uid),  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=309
     1123      1132    3                               pk2(dduproc.p_pid),  
     1124      1133    3                               pk2(dduproc.p_ppid),  
     1125      1134    3                               pk4(dduproc.p_wchan),  
     1126      1135    3                               pk4(dduproc.p_w2chan),  
     1127      1136    3                               pk4(dduproc.p_clktim),  
     1128      1137    3                               pk2(dduproc.p_size));  
     1129      1138    3                       }  
     1130      1139    2               ldctcnt++;  

   1139  0 000275   000000 054000 xsym               AOS     ldctcnt

     1131      1140    2               ldctaddr += sizeof(struct kn_ldct)-2;/*move to next ldct*/  

   1140  0 000276   000056 236007                    LDQ     46,DL
         0 000277   000000 056000 xsym               ASQ     ldctaddr

     1132      1141    2               procaddr += sizeof(dduproc);/*move to next ldct*/  

   1141  0 000300   000040 236007                    LDQ     32,DL
         0 000301   200017 056100                    ASQ     procaddr,,AUTO
         0 000302   000071 710000 0                  TRA     s:1118
         0 000303   000000 702000 xent               TSX2    _XBC_FARET

     1133      1142    2               }  /* while ldctcnt < */  
     1134      1143    1        }  

   1143  0 000304   200017 236100                    LDQ     procaddr,,AUTO
         0 000305   000000 702000 xent               TSX2    _XBC_FARET
         0 000306   000000 000000 xsym               ZERO    ldctaddr0,0
         0 000307   000004 000000                    ZERO    4,0
         0 000310   002032 000000 xsym               ZERO    sigint#c+1050,0
         0 000311   000001 000000                    ZERO    1,0
         0 000312   001137 000000 xsym               ZERO    sigint#c+607,0
         0 000313   000022 000000 xsym               ZERO    sigint#c+18,0
         0 000314   000000 000000 xsym               ZERO    sigint#c0,0
         0 000315   000000 000000 xsym               ZERO    devldct0,0
         0 000316   002024 000000 xsym               ZERO    sigint#c+1044,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=310
         0 000317   000000 000000 xsym               ZERO    dduproc0,0
         0 000320   001127 000000 xsym               ZERO    sigint#c+599,0
         0 000321   000000 000000 xsym               ZERO    stat_table_txt0,0
         0 000322   000012 000000                    ZERO    10,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=311

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0  1104-  1143     22   488     0      0  y        0   1 doprocs
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=312

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     7 Assign     7 Call       3 If         2 Return     1 DoWhil     1 Proc
     1 EndPrc

 # major stmts=   20 Code/major=10.60 # stmts=   22 Code/stmt= 9.63  Point total= 88.4
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=313

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr             17-0-0/w SBIN        r,m   1 procaddr

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=314
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=315

 Object Unit name= doldcts                                    File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:16:20.36 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero   152    230  doldcts
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  doldcts

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_0
                       Std       0 fetchdibdat
                       Std       0 printf
                       Std       0 pk4
                       Std       0 ldcthdr
                       Std       0 ldctdata1
                       Std       0 ldcthdr2
                       Std       0 ldctdata2
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=316

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=317


     1136      1145             /*  
     1137      1146              *             doldcts - fetch the ldcts from the dib memory.  
     1138      1147              */  
     1139      1148                
     1140      1149                
     1141      1150             doldcts()  
     1142      1151                
     1143      1152             {  

   1152  0 000000   000000 700000 xent  doldcts      TSX0    _XBC_AUTO_0
         0 000001   000024 000000                    ZERO    20,0

     1144      1153    1        if (fetchdibdat(dibfd,&ldctsave,sizeof(ldctsave),ipc.ldct) < 0)  

   1153  0 000002   000000 236000 xsym               LDQ     dibfd
         0 000003   200004 756100                    STQ     __varyarg_ptr+1,,AUTO
         0 000004   000220 236000 0                  LDQ     s:1215+2
         0 000005   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000006   000004 236007                    LDQ     4,DL
         0 000007   200006 756100                    STQ     __varyarg_ptr+3,,AUTO
         0 000010   000003 236000 xsym               LDQ     ipc+3
         0 000011   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000012   200004 630500                    EPPR0   __varyarg_ptr+1,,AUTO
         0 000013   000221 631400 0                  EPPR1   s:1215+3
         0 000014   000000 701000 xent               TSX1    fetchdibdat
         0 000015   000000 236007                    LDQ     0,DL
         0 000016   200010 756100                    STQ     __varyarg_ptr+5,,AUTO
         0 000017   200010 234100                    SZN     __varyarg_ptr+5,,AUTO
         0 000020   000031 605000 0                  TPL     s:1159

     1145      1154    1               {  
     1146      1155    2               printf("can't fetch ipc.ldct\n");  

   1155  0 000021   000222 236000 0                  LDQ     s:1215+4
         0 000022   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000023   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=318
         0 000024   000223 631400 0                  EPPR1   s:1215+5
         0 000025   000000 701000 xent               TSX1    printf
         0 000026   000000 236007                    LDQ     0,DL

     1147      1156    2               return 0;  

   1156  0 000027   200007 450100                    STZ     __varyarg_ptr+4,,AUTO
         0 000030   000216 710000 0                  TRA     s:1215

     1148      1157    2               }  
     1149      1158    1           
     1150      1159    1        ldctaddr = pk4(ldctsave);  

   1159  0 000031   000000 236000 xsym               LDQ     ldctsave
         0 000032   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000033   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000034   000223 631400 0                  EPPR1   s:1215+5
         0 000035   000000 701000 xent               TSX1    pk4
         0 000036   000000 236007                    LDQ     0,DL
         0 000037   000000 756000 xsym               STQ     ldctaddr

     1151      1160    1        ldctaddr += sizeof(struct kn_ldct)-2;  

   1160  0 000040   000056 236007                    LDQ     46,DL
         0 000041   000000 056000 xsym               ASQ     ldctaddr

     1152      1161    1        ldctcnt = 1;  

   1161  0 000042   000001 236007                    LDQ     1,DL
         0 000043   000000 756000 xsym               STQ     ldctcnt

     1153      1162    1        ldcthdr();  

   1162  0 000044   000224 631400 0                  EPPR1   s:1215+6
         0 000045   000000 701000 xent               TSX1    ldcthdr
         0 000046   000000 236007                    LDQ     0,DL

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=319
     1154      1163    1        while (ldctcnt < N_LDCTS)  

   1163  0 000047   000000 236000 xsym               LDQ     ldctcnt
         0 000050   000144 116007                    CMPQ    100,DL
         0 000051   000123 605000 0                  TPL     s:1177

     1155      1164    1               {  
     1156      1165    2               if (fetchdibdat(dibfd,&devldct,sizeof(struct kn_ldct),  
     1157      1166    2                       ldctaddr)<0)  

   1166  0 000052   000000 236000 xsym               LDQ     dibfd
         0 000053   200004 756100                    STQ     __varyarg_ptr+1,,AUTO
         0 000054   000225 236000 0                  LDQ     s:1215+7
         0 000055   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000056   000060 236007                    LDQ     48,DL
         0 000057   200006 756100                    STQ     __varyarg_ptr+3,,AUTO
         0 000060   000000 236000 xsym               LDQ     ldctaddr
         0 000061   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000062   200004 630500                    EPPR0   __varyarg_ptr+1,,AUTO
         0 000063   000221 631400 0                  EPPR1   s:1215+3
         0 000064   000000 701000 xent               TSX1    fetchdibdat
         0 000065   000000 236007                    LDQ     0,DL
         0 000066   200011 756100                    STQ     __varyarg_ptr+6,,AUTO
         0 000067   200011 234100                    SZN     __varyarg_ptr+6,,AUTO
         0 000070   000101 605000 0                  TPL     s:1172

     1158      1167    2                       {  
     1159      1168    3                       printf("can't get ldct data\n");  

   1168  0 000071   000226 236000 0                  LDQ     s:1215+8
         0 000072   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000073   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000074   000223 631400 0                  EPPR1   s:1215+5
         0 000075   000000 701000 xent               TSX1    printf
         0 000076   000000 236007                    LDQ     0,DL

     1160      1169    3                       return 0;  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=320

   1169  0 000077   200007 450100                    STZ     __varyarg_ptr+4,,AUTO
         0 000100   000216 710000 0                  TRA     s:1215

     1161      1170    3                       }  
     1162      1171    2               if ((devldct.state != KN_ST_NULL) ||  
     1163      1172    2                   (fulldct && devldct.procp))  

   1172  0 000101   000000 236000 xsym               LDQ     devldct
         0 000102   000033 772000                    QRL     27
         0 000103   000000 036007                    ADLQ    0,DL
         0 000104   000111 601000 0                  TNZ     s:1173
         0 000105   000000 234000 xsym               SZN     fulldct
         0 000106   000117 600000 0                  TZE     s:1174
         0 000107   000003 234000 xsym               SZN     devldct+3
         0 000110   000117 600000 0                  TZE     s:1174

     1164      1173    2                       ldctdata1(&devldct);  

   1173  0 000111   000225 236000 0                  LDQ     s:1215+7
         0 000112   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000113   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000114   000223 631400 0                  EPPR1   s:1215+5
         0 000115   000000 701000 xent               TSX1    ldctdata1
         0 000116   000000 236007                    LDQ     0,DL

     1165      1174    2               ldctcnt++;  

   1174  0 000117   000000 054000 xsym               AOS     ldctcnt

     1166      1175    2               ldctaddr += sizeof(struct kn_ldct)-2;/*move to next ldct*/  

   1175  0 000120   000056 236007                    LDQ     46,DL
         0 000121   000000 056000 xsym               ASQ     ldctaddr
         0 000122   000047 710000 0                  TRA     s:1163

     1167      1176    2               }  /* while ldctcnt < */  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=321
     1168      1177    1        ldctcnt = 1;  

   1177  0 000123   000001 236007                    LDQ     1,DL
         0 000124   000000 756000 xsym               STQ     ldctcnt

     1169      1178    1        ldcthdr2();  

   1178  0 000125   000224 631400 0                  EPPR1   s:1215+6
         0 000126   000000 701000 xent               TSX1    ldcthdr2
         0 000127   000000 236007                    LDQ     0,DL

     1170      1179    1        ldctaddr = pk4(ldctsave);  

   1179  0 000130   000000 236000 xsym               LDQ     ldctsave
         0 000131   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000132   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000133   000223 631400 0                  EPPR1   s:1215+5
         0 000134   000000 701000 xent               TSX1    pk4
         0 000135   000000 236007                    LDQ     0,DL
         0 000136   000000 756000 xsym               STQ     ldctaddr

     1171      1180    1        ldctaddr += sizeof(struct kn_ldct)-2;  

   1180  0 000137   000056 236007                    LDQ     46,DL
         0 000140   000000 056000 xsym               ASQ     ldctaddr

     1172      1181    1        while (ldctcnt < N_LDCTS)  

   1181  0 000141   000000 236000 xsym               LDQ     ldctcnt
         0 000142   000144 116007                    CMPQ    100,DL
         0 000143   000215 605000 0                  TPL     s:1193+3

     1173      1182    1               {  
     1174      1183    2               if (fetchdibdat(dibfd,&devldct,sizeof(struct kn_ldct),  
     1175      1184    2                       ldctaddr)<0)  

   1184  0 000144   000000 236000 xsym               LDQ     dibfd
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=322
         0 000145   200004 756100                    STQ     __varyarg_ptr+1,,AUTO
         0 000146   000225 236000 0                  LDQ     s:1215+7
         0 000147   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000150   000060 236007                    LDQ     48,DL
         0 000151   200006 756100                    STQ     __varyarg_ptr+3,,AUTO
         0 000152   000000 236000 xsym               LDQ     ldctaddr
         0 000153   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000154   200004 630500                    EPPR0   __varyarg_ptr+1,,AUTO
         0 000155   000221 631400 0                  EPPR1   s:1215+3
         0 000156   000000 701000 xent               TSX1    fetchdibdat
         0 000157   000000 236007                    LDQ     0,DL
         0 000160   200012 756100                    STQ     __varyarg_ptr+7,,AUTO
         0 000161   200012 234100                    SZN     __varyarg_ptr+7,,AUTO
         0 000162   000173 605000 0                  TPL     s:1190

     1176      1185    2                       {  
     1177      1186    3                       printf("can't get ldct data\n");  

   1186  0 000163   000226 236000 0                  LDQ     s:1215+8
         0 000164   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000165   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000166   000223 631400 0                  EPPR1   s:1215+5
         0 000167   000000 701000 xent               TSX1    printf
         0 000170   000000 236007                    LDQ     0,DL

     1178      1187    3                       return 0;  

   1187  0 000171   200007 450100                    STZ     __varyarg_ptr+4,,AUTO
         0 000172   000216 710000 0                  TRA     s:1215

     1179      1188    3                       }  
     1180      1189    2               if ((devldct.state != KN_ST_NULL) ||  
     1181      1190    2                   (fulldct && devldct.procp))  

   1190  0 000173   000000 236000 xsym               LDQ     devldct
         0 000174   000033 772000                    QRL     27
         0 000175   000000 036007                    ADLQ    0,DL
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=323
         0 000176   000203 601000 0                  TNZ     s:1191
         0 000177   000000 234000 xsym               SZN     fulldct
         0 000200   000211 600000 0                  TZE     s:1192
         0 000201   000003 234000 xsym               SZN     devldct+3
         0 000202   000211 600000 0                  TZE     s:1192

     1182      1191    2                       ldctdata2(&devldct);  

   1191  0 000203   000225 236000 0                  LDQ     s:1215+7
         0 000204   200007 756100                    STQ     __varyarg_ptr+4,,AUTO
         0 000205   200007 630500                    EPPR0   __varyarg_ptr+4,,AUTO
         0 000206   000223 631400 0                  EPPR1   s:1215+5
         0 000207   000000 701000 xent               TSX1    ldctdata2
         0 000210   000000 236007                    LDQ     0,DL

     1183      1192    2               ldctcnt++;  

   1192  0 000211   000000 054000 xsym               AOS     ldctcnt

     1184      1193    2               ldctaddr += sizeof(struct kn_ldct)-2;/*move to next ldct*/  

   1193  0 000212   000056 236007                    LDQ     46,DL
         0 000213   000000 056000 xsym               ASQ     ldctaddr
         0 000214   000141 710000 0                  TRA     s:1181
         0 000215   000000 702000 xent               TSX2    _XBC_FARET

     1185      1194    2               }  /* while ldctcnt < */  
     1186      1195    1        #ifdef xxx  
     1187      1196   -2        ldctcnt = 1;  
     1188      1197   -2        ldcthdr3();  
     1189      1198   -2        ldctaddr = pk4(ldctsave);  
     1190      1199   -2        ldctaddr += sizeof(struct kn_ldct)-2;  
     1191      1200   -2        while (ldctcnt < N_LDCTS)  
     1192      1201   -2               {  
     1193      1202   -2               if (fetchdibdat(dibfd,&devldct,sizeof(struct kn_ldct),  
     1194      1203   -2                       ldctaddr)<0)  
     1195      1204   -2                       {  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=324
     1196      1205   -2                       printf("can't get ldct data\n");  
     1197      1206   -2                       return 0;  
     1198      1207   -2                       }  
     1199      1208   -2               if ((devldct.state != KN_ST_NULL) ||  
     1200      1209   -2                   (fulldct && devldct.procp))  
     1201      1210   -2                       ldctdata3(&devldct);  
     1202      1211   -2               ldctcnt++;  
     1203      1212   -2               ldctaddr += sizeof(struct kn_ldct)-2;  
     1204      1213   -2               }  /* while ldctcnt < */  
     1205      1214   -2        #endif  
     1206      1215    1        }  

   1215  0 000216   200007 236100                    LDQ     __varyarg_ptr+4,,AUTO
         0 000217   000000 702000 xent               TSX2    _XBC_FARET
         0 000220   000000 000000 xsym               ZERO    ldctsave0,0
         0 000221   000004 000000                    ZERO    4,0
         0 000222   002032 000000 xsym               ZERO    sigint#c+1050,0
         0 000223   000001 000000                    ZERO    1,0
         0 000224   000000 000000                    ZERO    0,0
         0 000225   000000 000000 xsym               ZERO    devldct0,0
         0 000226   002024 000000 xsym               ZERO    sigint#c+1044,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=325

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0  1152-  1215     29   487     0      0  y        0   1 doldcts
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=326

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

    10 Assign     7 Call       5 If         3 Return     2 DoWhil     1 Proc
     1 EndPrc

 # major stmts=   27 Code/major= 5.62 # stmts=   29 Code/stmt= 5.24  Point total= 97.7
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=327

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=328
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=329

 Object Unit name= options                                    File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:16:30.72 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero   124    174  options
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  options

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_0
                       Std       0 printf
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=330

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=331


     1208      1218             /*  
     1209      1219              *             options - for those of us who can't remember the options.  
     1210      1220              */  
     1211      1221                
     1212      1222                
     1213      1223             options()  
     1214      1224                
     1215      1225             {  

   1225  0 000000   000000 700000 xent  options      TSX0    _XBC_AUTO_0
         0 000001   000016 000000                    ZERO    14,0

     1216      1226    1        printf("\nlegal options: [-ialdhsmc] -f file\n");  

   1226  0 000002   000151 236000 0                  LDQ     s:1242+7
         0 000003   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000004   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000005   000152 631400 0                  EPPR1   s:1242+8
         0 000006   000000 701000 xent               TSX1    printf
         0 000007   000000 236007                    LDQ     0,DL

     1217      1227    1        printf("-f fid where fid is a dump file to be examined.\n");  

   1227  0 000010   000153 236000 0                  LDQ     s:1242+9
         0 000011   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000012   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000013   000152 631400 0                  EPPR1   s:1242+8
         0 000014   000000 701000 xent               TSX1    printf
         0 000015   000000 236007                    LDQ     0,DL

     1218      1228    1        printf("   fid value may be a full name of a dump file or the\n");  

   1228  0 000016   000154 236000 0                  LDQ     s:1242+10
         0 000017   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000020   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000021   000152 631400 0                  EPPR1   s:1242+8
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=332
         0 000022   000000 701000 xent               TSX1    printf
         0 000023   000000 236007                    LDQ     0,DL

     1219      1229    1        printf("   four digit boot id and sequence number of a dump\n");  

   1229  0 000024   000155 236000 0                  LDQ     s:1242+11
         0 000025   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000026   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000027   000152 631400 0                  EPPR1   s:1242+8
         0 000030   000000 701000 xent               TSX1    printf
         0 000031   000000 236007                    LDQ     0,DL

     1220      1230    1        printf("   file in either :SYSTAC OR SYSTAC2.\n");  

   1230  0 000032   000156 236000 0                  LDQ     s:1242+12
         0 000033   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000034   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000035   000152 631400 0                  EPPR1   s:1242+8
         0 000036   000000 701000 xent               TSX1    printf
         0 000037   000000 236007                    LDQ     0,DL

     1221      1231    1        printf("-h displays dib cq headers only.\n");  

   1231  0 000040   000157 236000 0                  LDQ     s:1242+13
         0 000041   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000042   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000043   000152 631400 0                  EPPR1   s:1242+8
         0 000044   000000 701000 xent               TSX1    printf
         0 000045   000000 236007                    LDQ     0,DL

     1222      1232    1        printf("-m displays dib cq headers and messages.\n");  

   1232  0 000046   000160 236000 0                  LDQ     s:1242+14
         0 000047   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000050   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000051   000152 631400 0                  EPPR1   s:1242+8
         0 000052   000000 701000 xent               TSX1    printf
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=333
         0 000053   000000 236007                    LDQ     0,DL

     1223      1233    1        printf("-l displays ldcts not in state null\n\n");  

   1233  0 000054   000161 236000 0                  LDQ     s:1242+15
         0 000055   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000056   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000057   000152 631400 0                  EPPR1   s:1242+8
         0 000060   000000 701000 xent               TSX1    printf
         0 000061   000000 236007                    LDQ     0,DL

     1224      1234    1        printf("-s displays complete ldct table.\n");  

   1234  0 000062   000162 236000 0                  LDQ     s:1242+16
         0 000063   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000064   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000065   000152 631400 0                  EPPR1   s:1242+8
         0 000066   000000 701000 xent               TSX1    printf
         0 000067   000000 236007                    LDQ     0,DL

     1225      1235    1        printf("-p displays process table info.\n");  

   1235  0 000070   000163 236000 0                  LDQ     s:1242+17
         0 000071   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000072   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000073   000152 631400 0                  EPPR1   s:1242+8
         0 000074   000000 701000 xent               TSX1    printf
         0 000075   000000 236007                    LDQ     0,DL

     1226      1236    1        printf("-c displays dib Q context area\n");  

   1236  0 000076   000164 236000 0                  LDQ     s:1242+18
         0 000077   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000100   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000101   000152 631400 0                  EPPR1   s:1242+8
         0 000102   000000 701000 xent               TSX1    printf
         0 000103   000000 236007                    LDQ     0,DL
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=334

     1227      1237    1        printf("-a displays everything except null ldcts\n");  

   1237  0 000104   000165 236000 0                  LDQ     s:1242+19
         0 000105   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000106   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000107   000152 631400 0                  EPPR1   s:1242+8
         0 000110   000000 701000 xent               TSX1    printf
         0 000111   000000 236007                    LDQ     0,DL

     1228      1238    1        printf("-t dumps stack frames starting at crash stack top\n");  

   1238  0 000112   000166 236000 0                  LDQ     s:1242+20
         0 000113   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000114   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000115   000152 631400 0                  EPPR1   s:1242+8
         0 000116   000000 701000 xent               TSX1    printf
         0 000117   000000 236007                    LDQ     0,DL

     1229      1239    1        printf("-i interactive mode\n");  

   1239  0 000120   000167 236000 0                  LDQ     s:1242+21
         0 000121   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000122   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000123   000152 631400 0                  EPPR1   s:1242+8
         0 000124   000000 701000 xent               TSX1    printf
         0 000125   000000 236007                    LDQ     0,DL

     1230      1240    1        printf("-dfnnnnn,m dumps '0xm' bytes in hex format\n");  

   1240  0 000126   000170 236000 0                  LDQ     s:1242+22
         0 000127   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000130   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000131   000152 631400 0                  EPPR1   s:1242+8
         0 000132   000000 701000 xent               TSX1    printf
         0 000133   000000 236007                    LDQ     0,DL

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=335
     1231      1241    1        printf("-mf2nnnn,m dumps '0xm' messages from the cq\n");  

   1241  0 000134   000171 236000 0                  LDQ     s:1242+23
         0 000135   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000136   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000137   000152 631400 0                  EPPR1   s:1242+8
         0 000140   000000 701000 xent               TSX1    printf
         0 000141   000000 236007                    LDQ     0,DL

     1232      1242    1        printf("-tfnnnnn   dumps stack frames starting at 0xfnnnnn\n");  

   1242  0 000142   000172 236000 0                  LDQ     s:1242+24
         0 000143   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000144   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000145   000152 631400 0                  EPPR1   s:1242+8
         0 000146   000000 701000 xent               TSX1    printf
         0 000147   000000 236007                    LDQ     0,DL
         0 000150   000000 702000 xent               TSX2    _XBC_FARET
         0 000151   001115 000000 xsym               ZERO    sigint#c+589,0
         0 000152   000001 000000                    ZERO    1,0
         0 000153   001100 000000 xsym               ZERO    sigint#c+576,0
         0 000154   001062 000000 xsym               ZERO    sigint#c+562,0
         0 000155   001044 000000 xsym               ZERO    sigint#c+548,0
         0 000156   001032 000000 xsym               ZERO    sigint#c+538,0
         0 000157   001021 000000 xsym               ZERO    sigint#c+529,0
         0 000160   001006 000000 xsym               ZERO    sigint#c+518,0
         0 000161   000774 000000 xsym               ZERO    sigint#c+508,0
         0 000162   000763 000000 xsym               ZERO    sigint#c+499,0
         0 000163   000752 000000 xsym               ZERO    sigint#c+490,0
         0 000164   000742 000000 xsym               ZERO    sigint#c+482,0
         0 000165   000727 000000 xsym               ZERO    sigint#c+471,0
         0 000166   000712 000000 xsym               ZERO    sigint#c+458,0
         0 000167   002016 000000 xsym               ZERO    sigint#c+1038,0
         0 000170   000677 000000 xsym               ZERO    sigint#c+447,0
         0 000171   000663 000000 xsym               ZERO    sigint#c+435,0
         0 000172   000646 000000 xsym               ZERO    sigint#c+422,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=336

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0  1225-  1243     18   487     0      0  y        0   1 options
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=337

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

    17 Call       1 Proc

 # major stmts=   17 Code/major= 7.29 # stmts=   18 Code/stmt= 6.88  Point total= 87.1
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=338

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=339
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=340

 Object Unit name= options1                                   File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:16:41.28 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero   117    165  options1
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  options1

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_0
                       Std       0 printf
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=341

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=342


     1234      1244             /*  
     1235      1245              *             options1 - for those of us who can't remember the options.  
     1236      1246              */  
     1237      1247                
     1238      1248                
     1239      1249             options1()  
     1240      1250                
     1241      1251             {  

   1251  0 000000   000000 700000 xent  options1     TSX0    _XBC_AUTO_0
         0 000001   000016 000000                    ZERO    14,0

     1242      1252    1        printf("\nlegal commands(from interactive mode): \n");  

   1252  0 000002   000143 236000 0                  LDQ     s:1267+7
         0 000003   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000004   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000005   000144 631400 0                  EPPR1   s:1267+8
         0 000006   000000 701000 xent               TSX1    printf
         0 000007   000000 236007                    LDQ     0,DL

     1243      1253    1        printf("a              displays everything except null ldcts\n");  

   1253  0 000010   000145 236000 0                  LDQ     s:1267+9
         0 000011   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000012   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000013   000144 631400 0                  EPPR1   s:1267+8
         0 000014   000000 701000 xent               TSX1    printf
         0 000015   000000 236007                    LDQ     0,DL

     1244      1254    1        printf("c              displays dib Q context area\n");  

   1254  0 000016   000146 236000 0                  LDQ     s:1267+10
         0 000017   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000020   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000021   000144 631400 0                  EPPR1   s:1267+8
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=343
         0 000022   000000 701000 xent               TSX1    printf
         0 000023   000000 236007                    LDQ     0,DL

     1245      1255    1        printf("dxxxxx,m       dumps '0xm' bytes in hex format\n");  

   1255  0 000024   000147 236000 0                  LDQ     s:1267+11
         0 000025   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000026   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000027   000144 631400 0                  EPPR1   s:1267+8
         0 000030   000000 701000 xent               TSX1    printf
         0 000031   000000 236007                    LDQ     0,DL

     1246      1256    1        printf("ffilename      select dib dump file\n");  

   1256  0 000032   000150 236000 0                  LDQ     s:1267+12
         0 000033   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000034   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000035   000144 631400 0                  EPPR1   s:1267+8
         0 000036   000000 701000 xent               TSX1    printf
         0 000037   000000 236007                    LDQ     0,DL

     1247      1257    1        printf("               filename may be n or p to get next file\n");  

   1257  0 000040   000151 236000 0                  LDQ     s:1267+13
         0 000041   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000042   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000043   000144 631400 0                  EPPR1   s:1267+8
         0 000044   000000 701000 xent               TSX1    printf
         0 000045   000000 236007                    LDQ     0,DL

     1248      1258    1        printf("h              display dib cq headers only.\n");  

   1258  0 000046   000152 236000 0                  LDQ     s:1267+14
         0 000047   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000050   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000051   000144 631400 0                  EPPR1   s:1267+8
         0 000052   000000 701000 xent               TSX1    printf
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=344
         0 000053   000000 236007                    LDQ     0,DL

     1249      1259    1        printf("l              display active ldcts \n");  

   1259  0 000054   000153 236000 0                  LDQ     s:1267+15
         0 000055   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000056   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000057   000144 631400 0                  EPPR1   s:1267+8
         0 000060   000000 701000 xent               TSX1    printf
         0 000061   000000 236007                    LDQ     0,DL

     1250      1260    1        printf("m or H         display cq headers and messages\n");  

   1260  0 000062   000154 236000 0                  LDQ     s:1267+16
         0 000063   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000064   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000065   000144 631400 0                  EPPR1   s:1267+8
         0 000066   000000 701000 xent               TSX1    printf
         0 000067   000000 236007                    LDQ     0,DL

     1251      1261    1        printf("mf2xxxx,m      dump '0xm' messages from the cq\n");  

   1261  0 000070   000155 236000 0                  LDQ     s:1267+17
         0 000071   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000072   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000073   000144 631400 0                  EPPR1   s:1267+8
         0 000074   000000 701000 xent               TSX1    printf
         0 000075   000000 236007                    LDQ     0,DL

     1252      1262    1        printf("p              display process table info\n");  

   1262  0 000076   000156 236000 0                  LDQ     s:1267+18
         0 000077   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000100   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000101   000144 631400 0                  EPPR1   s:1267+8
         0 000102   000000 701000 xent               TSX1    printf
         0 000103   000000 236007                    LDQ     0,DL
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=345

     1253      1263    1        printf("q, x, or e     quit\n");  

   1263  0 000104   000157 236000 0                  LDQ     s:1267+19
         0 000105   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000106   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000107   000144 631400 0                  EPPR1   s:1267+8
         0 000110   000000 701000 xent               TSX1    printf
         0 000111   000000 236007                    LDQ     0,DL

     1254      1264    1        printf("s              display all ldcts in use and released.\n");  

   1264  0 000112   000160 236000 0                  LDQ     s:1267+20
         0 000113   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000114   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000115   000144 631400 0                  EPPR1   s:1267+8
         0 000116   000000 701000 xent               TSX1    printf
         0 000117   000000 236007                    LDQ     0,DL

     1255      1265    1        printf("t              dump stack frames starting a crash stack top\n");  

   1265  0 000120   000161 236000 0                  LDQ     s:1267+21
         0 000121   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000122   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000123   000144 631400 0                  EPPR1   s:1267+8
         0 000124   000000 701000 xent               TSX1    printf
         0 000125   000000 236007                    LDQ     0,DL

     1256      1266    1        printf(".              repeat last command\n");  

   1266  0 000126   000162 236000 0                  LDQ     s:1267+22
         0 000127   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000130   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000131   000144 631400 0                  EPPR1   s:1267+8
         0 000132   000000 701000 xent               TSX1    printf
         0 000133   000000 236007                    LDQ     0,DL

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=346
     1257      1267    1        printf("!cmd           shell command\n");  

   1267  0 000134   000163 236000 0                  LDQ     s:1267+23
         0 000135   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000136   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000137   000144 631400 0                  EPPR1   s:1267+8
         0 000140   000000 701000 xent               TSX1    printf
         0 000141   000000 236007                    LDQ     0,DL
         0 000142   000000 702000 xent               TSX2    _XBC_FARET
         0 000143   000633 000000 xsym               ZERO    sigint#c+411,0
         0 000144   000001 000000                    ZERO    1,0
         0 000145   000615 000000 xsym               ZERO    sigint#c+397,0
         0 000146   000602 000000 xsym               ZERO    sigint#c+386,0
         0 000147   000566 000000 xsym               ZERO    sigint#c+374,0
         0 000150   000554 000000 xsym               ZERO    sigint#c+364,0
         0 000151   000536 000000 xsym               ZERO    sigint#c+350,0
         0 000152   000522 000000 xsym               ZERO    sigint#c+338,0
         0 000153   000510 000000 xsym               ZERO    sigint#c+328,0
         0 000154   000474 000000 xsym               ZERO    sigint#c+316,0
         0 000155   000460 000000 xsym               ZERO    sigint#c+304,0
         0 000156   000445 000000 xsym               ZERO    sigint#c+293,0
         0 000157   002010 000000 xsym               ZERO    sigint#c+1032,0
         0 000160   000427 000000 xsym               ZERO    sigint#c+279,0
         0 000161   000407 000000 xsym               ZERO    sigint#c+263,0
         0 000162   000376 000000 xsym               ZERO    sigint#c+254,0
         0 000163   002000 000000 xsym               ZERO    sigint#c+1024,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=347

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0  1251-  1268     17   487     0      0  y        0   1 options1
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=348

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

    16 Call       1 Proc

 # major stmts=   16 Code/major= 7.31 # stmts=   17 Code/stmt= 6.88  Point total= 87.1
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=349

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=350
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=351

 Object Unit name= dibopen                                    File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:16:51.32 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero   480    740  dibopen
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  dibopen

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_1
                       Std       0 DAM_DUMPFILE
                       Std       0 printf
                       Std       0 DAM_ERR
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=352

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=353


     1259      1269                
     1260      1270             /*  
     1261      1271              *    dibopen - open dib dumpfile  
     1262      1272             */  
     1263      1273                
     1264      1274             dibopen (fid)  
     1265      1275             char *fid;  

   1275  0 000000   000000 700000 xent  dibopen      TSX0    _XBC_AUTO_1
         0 000001   000076 000001                    ZERO    62,1

     1266      1276             {  
     1267      1277    1           
     1268      1278    1           
     1269      1279    1        char p[64];  
     1270      1280    1        char *pp;  
     1271      1281    1           
     1272      1282    1              strcpy(&p[1],fid);  

   1282  0 000002   200040 633500                    EPPR3   p,,AUTO
         0 000003   000001 720007                    LXL0    1,DL
         0 000004   300000 500510                    A9BD    0,X0,PR3
         0 000005   200004 474500                    LDP4    fid,,AUTO
         0 000006   200060 454500                    STP4    p+16,,AUTO
         0 000007   200060 235100                    LDA     p+16,,AUTO
         0 000010   000020 771000                    ARL     16
         0 000011   007777 375007                    ANA     4095,DL
         0 000012   007777 675007                    ERA     4095,DL
         0 000013   000001 035007                    ADLA    1,DL
         0 000014   000000 236007                    LDQ     0,DL
         0 000015   000003 124540                    SCM     mask='000'O
         0 000016   400000 000005                    ADSC9   0,,PR4                   cn=0,n=*A
         0 000017   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000020   200061 000100                    ARG     p+17,,AUTO
         0 000021   400000 500505                    A9BD    0,AL,PR4
         0 000022   010000 235007                    LDA     4096,DL
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=354
         0 000023   200061 036100                    ADLQ    p+17,,AUTO
         0 000024   777771 606404                    TTN     s:1282+11,IC
         0 000025   200060 474500                    LDP4    p+16,,AUTO
         0 000026   000001 036007                    ADLQ    1,DL
         0 000027   000140 100540                    MLR     fill='000'O
         0 000030   400000 000006                    ADSC9   0,,PR4                   cn=0,n=*Q
         0 000031   300000 000006                    ADSC9   0,,PR3                   cn=0,n=*Q

     1273      1283    1              pp = p;  

   1283  0 000032   200040 630500                    EPPR0   p,,AUTO
         0 000033   200037 450500                    STP0    pp,,AUTO

     1274      1284    1              p[0] = strlen(fid);  

   1284  0 000034   200004 473500                    LDP3    fid,,AUTO
         0 000035   200060 453500                    STP3    p+16,,AUTO
         0 000036   200060 235100                    LDA     p+16,,AUTO
         0 000037   000020 771000                    ARL     16
         0 000040   007777 375007                    ANA     4095,DL
         0 000041   007777 675007                    ERA     4095,DL
         0 000042   000001 035007                    ADLA    1,DL
         0 000043   000000 236007                    LDQ     0,DL
         0 000044   000003 124540                    SCM     mask='000'O
         0 000045   300000 000005                    ADSC9   0,,PR3                   cn=0,n=*A
         0 000046   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000047   200061 000100                    ARG     p+17,,AUTO
         0 000050   300000 500505                    A9BD    0,AL,PR3
         0 000051   010000 235007                    LDA     4096,DL
         0 000052   200061 036100                    ADLQ    p+17,,AUTO
         0 000053   777771 606404                    TTN     s:1284+8,IC
         0 000054   200060 756100                    STQ     p+16,,AUTO
         0 000055   000100 100500                    MLR     fill='000'O
         0 000056   200060 600001                    ADSC9   p+16,,AUTO               cn=3,n=1
         0 000057   200040 000001                    ADSC9   p,,AUTO                  cn=0,n=1

     1275      1285    1              if (p[2] == 0)  
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=355

   1285  0 000060   200040 236100                    LDQ     p,,AUTO
         0 000061   000011 772000                    QRL     9
         0 000062   000777 376007                    ANQ     511,DL
         0 000063   000000 036007                    ADLQ    0,DL
         0 000064   000110 601000 0                  TNZ     s:1288

     1276      1286    1                    if ((p[1]|0x20) == 'n') p[0] = 0;  

   1286  0 000065   200040 236100                    LDQ     p,,AUTO
         0 000066   000022 772000                    QRL     18
         0 000067   000777 376007                    ANQ     511,DL
         0 000070   000040 276007                    ORQ     32,DL
         0 000071   000156 116007                    CMPQ    110,DL
         0 000072   000077 601000 0                  TNZ     s:1287

   1286  0 000073   000100 100400                    MLR     fill='000'O
         0 000074   000730 600001 0                  ADSC9   s:1318+2                 cn=3,n=1
         0 000075   200040 000001                    ADSC9   p,,AUTO                  cn=0,n=1
         0 000076   000110 710000 0                  TRA     s:1288

     1277      1287    1                    else if ((p[1]|0x20) == 'p') p[0] = 511;  

   1287  0 000077   200040 236100                    LDQ     p,,AUTO
         0 000100   000022 772000                    QRL     18
         0 000101   000777 376007                    ANQ     511,DL
         0 000102   000040 276007                    ORQ     32,DL
         0 000103   000160 116007                    CMPQ    112,DL
         0 000104   000110 601000 0                  TNZ     s:1288

   1287  0 000105   000100 100400                    MLR     fill='000'O
         0 000106   000731 600001 0                  ADSC9   s:1318+3                 cn=3,n=1
         0 000107   200040 000001                    ADSC9   p,,AUTO                  cn=0,n=1

     1278      1288    1              DAM_DUMPFILE(&pp);  /* try what he called with */  

   1288  0 000110   200037 630500                    EPPR0   pp,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=356
         0 000111   200033 450500                    STP0    fid+23,,AUTO
         0 000112   200033 630500                    EPPR0   fid+23,,AUTO
         0 000113   000732 631400 0                  EPPR1   s:1318+4
         0 000114   000000 701000 xent               TSX1    DAM_DUMPFILE
         0 000115   000000 236007                    LDQ     0,DL

     1279      1289    1              if (!ALTRT)  

   1289  0 000116   000000 234000 xsym               SZN     ALTRT
         0 000117   000122 601000 0                  TNZ     s:1291

     1280      1290    1                    return 0;  

   1290  0 000120   200057 450100                    STZ     p+15,,AUTO
         0 000121   000726 710000 0                  TRA     s:1318

     1281      1291    1              strcpy(&p[1],DMPVRS);  

   1291  0 000122   200040 633500                    EPPR3   p,,AUTO
         0 000123   000001 720007                    LXL0    1,DL
         0 000124   300000 500510                    A9BD    0,X0,PR3
         0 000125   000000 634400 xsym               EPPR4   DMPVRS
         0 000126   200060 454500                    STP4    p+16,,AUTO
         0 000127   200060 235100                    LDA     p+16,,AUTO
         0 000130   000020 771000                    ARL     16
         0 000131   007777 375007                    ANA     4095,DL
         0 000132   007777 675007                    ERA     4095,DL
         0 000133   000001 035007                    ADLA    1,DL
         0 000134   000000 236007                    LDQ     0,DL
         0 000135   000003 124540                    SCM     mask='000'O
         0 000136   400000 000005                    ADSC9   0,,PR4                   cn=0,n=*A
         0 000137   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000140   200061 000100                    ARG     p+17,,AUTO
         0 000141   400000 500505                    A9BD    0,AL,PR4
         0 000142   010000 235007                    LDA     4096,DL
         0 000143   200061 036100                    ADLQ    p+17,,AUTO
         0 000144   777771 606404                    TTN     s:1291+11,IC
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=357
         0 000145   200060 474500                    LDP4    p+16,,AUTO
         0 000146   000001 036007                    ADLQ    1,DL
         0 000147   000140 100540                    MLR     fill='000'O
         0 000150   400000 000006                    ADSC9   0,,PR4                   cn=0,n=*Q
         0 000151   300000 000006                    ADSC9   0,,PR3                   cn=0,n=*Q

     1282      1292    1              strcat (&p[1],fid);  

   1292  0 000152   200004 473500                    LDP3    fid,,AUTO
         0 000153   200060 453500                    STP3    p+16,,AUTO
         0 000154   200060 235100                    LDA     p+16,,AUTO
         0 000155   000020 771000                    ARL     16
         0 000156   007777 375007                    ANA     4095,DL
         0 000157   007777 675007                    ERA     4095,DL
         0 000160   000001 035007                    ADLA    1,DL
         0 000161   000000 236007                    LDQ     0,DL
         0 000162   000003 124540                    SCM     mask='000'O
         0 000163   300000 000005                    ADSC9   0,,PR3                   cn=0,n=*A
         0 000164   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000165   200061 000100                    ARG     p+17,,AUTO
         0 000166   300000 500505                    A9BD    0,AL,PR3
         0 000167   010000 235007                    LDA     4096,DL
         0 000170   200061 036100                    ADLQ    p+17,,AUTO
         0 000171   777771 606404                    TTN     s:1292+8,IC
         0 000172   200062 756100                    STQ     p+18,,AUTO
         0 000173   200040 634500                    EPPR4   p,,AUTO
         0 000174   000001 720007                    LXL0    1,DL
         0 000175   400000 500510                    A9BD    0,X0,PR4
         0 000176   200063 454500                    STP4    p+19,,AUTO
         0 000177   200063 235100                    LDA     p+19,,AUTO
         0 000200   000020 771000                    ARL     16
         0 000201   007777 375007                    ANA     4095,DL
         0 000202   007777 675007                    ERA     4095,DL
         0 000203   000001 035007                    ADLA    1,DL
         0 000204   000000 236007                    LDQ     0,DL
         0 000205   000003 124540                    SCM     mask='000'O
         0 000206   400000 000005                    ADSC9   0,,PR4                   cn=0,n=*A
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=358
         0 000207   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000210   200064 000100                    ARG     p+20,,AUTO
         0 000211   400000 500505                    A9BD    0,AL,PR4
         0 000212   010000 235007                    LDA     4096,DL
         0 000213   200064 036100                    ADLQ    p+20,,AUTO
         0 000214   777771 606404                    TTN     s:1292+27,IC
         0 000215   200063 474500                    LDP4    p+19,,AUTO
         0 000216   200060 473500                    LDP3    p+16,,AUTO
         0 000217   200062 235100                    LDA     p+18,,AUTO
         0 000220   000001 035007                    ADLA    1,DL
         0 000221   000146 100540                    MLR     fill='000'O
         0 000222   300000 000005                    ADSC9   0,,PR3                   cn=0,n=*A
         0 000223   400000 000005                    ADSC9   0,Q,PR4                  cn=0,n=*A

     1283      1293    1              p[0] = strlen(&p[1]);  

   1293  0 000224   200040 633500                    EPPR3   p,,AUTO
         0 000225   000001 720007                    LXL0    1,DL
         0 000226   300000 500510                    A9BD    0,X0,PR3
         0 000227   200060 453500                    STP3    p+16,,AUTO
         0 000230   200060 235100                    LDA     p+16,,AUTO
         0 000231   000020 771000                    ARL     16
         0 000232   007777 375007                    ANA     4095,DL
         0 000233   007777 675007                    ERA     4095,DL
         0 000234   000001 035007                    ADLA    1,DL
         0 000235   000000 236007                    LDQ     0,DL
         0 000236   000003 124540                    SCM     mask='000'O
         0 000237   300000 000005                    ADSC9   0,,PR3                   cn=0,n=*A
         0 000240   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000241   200061 000100                    ARG     p+17,,AUTO
         0 000242   300000 500505                    A9BD    0,AL,PR3
         0 000243   010000 235007                    LDA     4096,DL
         0 000244   200061 036100                    ADLQ    p+17,,AUTO
         0 000245   777771 606404                    TTN     s:1293+10,IC
         0 000246   200060 756100                    STQ     p+16,,AUTO
         0 000247   000100 100500                    MLR     fill='000'O
         0 000250   200060 600001                    ADSC9   p+16,,AUTO               cn=3,n=1
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=359
         0 000251   200040 000001                    ADSC9   p,,AUTO                  cn=0,n=1

     1284      1294    1              DAM_DUMPFILE(&pp);  /* try current version name */  

   1294  0 000252   200037 630500                    EPPR0   pp,,AUTO
         0 000253   200026 450500                    STP0    fid+18,,AUTO
         0 000254   200026 630500                    EPPR0   fid+18,,AUTO
         0 000255   000732 631400 0                  EPPR1   s:1318+4
         0 000256   000000 701000 xent               TSX1    DAM_DUMPFILE
         0 000257   000000 236007                    LDQ     0,DL

     1285      1295    1              if (!ALTRT)  

   1295  0 000260   000000 234000 xsym               SZN     ALTRT
         0 000261   000264 601000 0                  TNZ     s:1297

     1286      1296    1                    return 0;  

   1296  0 000262   200057 450100                    STZ     p+15,,AUTO
         0 000263   000726 710000 0                  TRA     s:1318

     1287      1297    1              if (strchr(fid,'.')) {  

   1297  0 000264   200004 473500                    LDP3    fid,,AUTO
         0 000265   200060 453500                    STP3    p+16,,AUTO
         0 000266   200060 235100                    LDA     p+16,,AUTO
         0 000267   000020 771000                    ARL     16
         0 000270   007777 375007                    ANA     4095,DL
         0 000271   007777 675007                    ERA     4095,DL
         0 000272   000001 035007                    ADLA    1,DL
         0 000273   000000 236007                    LDQ     0,DL
         0 000274   000003 124540                    SCM     mask='000'O
         0 000275   300000 000005                    ADSC9   0,,PR3                   cn=0,n=*A
         0 000276   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000277   200061 000100                    ARG     p+17,,AUTO
         0 000300   300000 500505                    A9BD    0,AL,PR3
         0 000301   010000 235007                    LDA     4096,DL
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=360
         0 000302   200061 036100                    ADLQ    p+17,,AUTO
         0 000303   777771 606404                    TTN     s:1297+8,IC
         0 000304   200060 473500                    LDP3    p+16,,AUTO
         0 000305   000001 036007                    ADLQ    1,DL
         0 000306   000003 124540                    SCM     mask='000'O
         0 000307   300000 000006                    ADSC9   0,,PR3                   cn=0,n=*Q
         0 000310   056000 000001                    ADSC9   23552,?                  cn=0,n=1
         0 000311   200062 000100                    ARG     p+18,,AUTO
         0 000312   000004 606404                    TTN     s:1297+26,IC
         0 000313   200062 236100                    LDQ     p+18,,AUTO
         0 000314   300000 500506                    A9BD    0,QL,PR3
         0 000315   000002 710004                    TRA     s:1297+27,IC
         0 000316   006014 473407                    LDP3    3084,DL
         0 000317   200060 453500                    STP3    p+16,,AUTO
         0 000320   200060 236100                    LDQ     p+16,,AUTO
         0 000321   006014 116007                    CMPQ    3084,DL
         0 000322   000341 600000 0                  TZE     s:1302

     1288      1298    2                    printf ("Can't open %s\n",fid);  

   1298  0 000323   000733 236000 0                  LDQ     s:1318+5
         0 000324   200023 756100                    STQ     fid+15,,AUTO
         0 000325   200004 236100                    LDQ     fid,,AUTO
         0 000326   200024 756100                    STQ     fid+16,,AUTO
         0 000327   200023 630500                    EPPR0   fid+15,,AUTO
         0 000330   000734 631400 0                  EPPR1   s:1318+6
         0 000331   000000 701000 xent               TSX1    printf
         0 000332   000000 236007                    LDQ     0,DL

     1289      1299    2                    DAM_ERR();  

   1299  0 000333   000730 631400 0                  EPPR1   s:1318+2
         0 000334   000000 701000 xent               TSX1    DAM_ERR
         0 000335   000000 236007                    LDQ     0,DL

     1290      1300    2                    return -1;   /* can't find it in the specified account*/  

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=361
   1300  0 000336   000735 236000 0                  LDQ     s:1318+7
         0 000337   200057 756100                    STQ     p+15,,AUTO
         0 000340   000726 710000 0                  TRA     s:1318

     1291      1301    2              }  
     1292      1302    1              strcpy(&p[1],fid); /* no account given, try :SYSTAC */  

   1302  0 000341   200040 633500                    EPPR3   p,,AUTO
         0 000342   000001 720007                    LXL0    1,DL
         0 000343   300000 500510                    A9BD    0,X0,PR3
         0 000344   200004 474500                    LDP4    fid,,AUTO
         0 000345   200061 454500                    STP4    p+17,,AUTO
         0 000346   200061 235100                    LDA     p+17,,AUTO
         0 000347   000020 771000                    ARL     16
         0 000350   007777 375007                    ANA     4095,DL
         0 000351   007777 675007                    ERA     4095,DL
         0 000352   000001 035007                    ADLA    1,DL
         0 000353   000000 236007                    LDQ     0,DL
         0 000354   000003 124540                    SCM     mask='000'O
         0 000355   400000 000005                    ADSC9   0,,PR4                   cn=0,n=*A
         0 000356   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000357   200062 000100                    ARG     p+18,,AUTO
         0 000360   400000 500505                    A9BD    0,AL,PR4
         0 000361   010000 235007                    LDA     4096,DL
         0 000362   200062 036100                    ADLQ    p+18,,AUTO
         0 000363   777771 606404                    TTN     s:1302+11,IC
         0 000364   200061 474500                    LDP4    p+17,,AUTO
         0 000365   000001 036007                    ADLQ    1,DL
         0 000366   000140 100540                    MLR     fill='000'O
         0 000367   400000 000006                    ADSC9   0,,PR4                   cn=0,n=*Q
         0 000370   300000 000006                    ADSC9   0,,PR3                   cn=0,n=*Q

     1293      1303    1              strcat(p,".:SYSTAC");  

   1303  0 000371   002304 633400 xsym               EPPR3   sigint#c+1220
         0 000372   200061 453500                    STP3    p+17,,AUTO
         0 000373   200061 235100                    LDA     p+17,,AUTO
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=362
         0 000374   000020 771000                    ARL     16
         0 000375   007777 375007                    ANA     4095,DL
         0 000376   007777 675007                    ERA     4095,DL
         0 000377   000001 035007                    ADLA    1,DL
         0 000400   000000 236007                    LDQ     0,DL
         0 000401   000003 124540                    SCM     mask='000'O
         0 000402   300000 000005                    ADSC9   0,,PR3                   cn=0,n=*A
         0 000403   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000404   200062 000100                    ARG     p+18,,AUTO
         0 000405   300000 500505                    A9BD    0,AL,PR3
         0 000406   010000 235007                    LDA     4096,DL
         0 000407   200062 036100                    ADLQ    p+18,,AUTO
         0 000410   777771 606404                    TTN     s:1303+8,IC
         0 000411   200063 756100                    STQ     p+19,,AUTO
         0 000412   200040 634500                    EPPR4   p,,AUTO
         0 000413   200064 454500                    STP4    p+20,,AUTO
         0 000414   200064 235100                    LDA     p+20,,AUTO
         0 000415   000020 771000                    ARL     16
         0 000416   007777 375007                    ANA     4095,DL
         0 000417   007777 675007                    ERA     4095,DL
         0 000420   000001 035007                    ADLA    1,DL
         0 000421   000000 236007                    LDQ     0,DL
         0 000422   000003 124540                    SCM     mask='000'O
         0 000423   400000 000005                    ADSC9   0,,PR4                   cn=0,n=*A
         0 000424   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000425   200065 000100                    ARG     p+21,,AUTO
         0 000426   400000 500505                    A9BD    0,AL,PR4
         0 000427   010000 235007                    LDA     4096,DL
         0 000430   200065 036100                    ADLQ    p+21,,AUTO
         0 000431   777771 606404                    TTN     s:1303+25,IC
         0 000432   200064 474500                    LDP4    p+20,,AUTO
         0 000433   200061 473500                    LDP3    p+17,,AUTO
         0 000434   200063 235100                    LDA     p+19,,AUTO
         0 000435   000001 035007                    ADLA    1,DL
         0 000436   000146 100540                    MLR     fill='000'O
         0 000437   300000 000005                    ADSC9   0,,PR3                   cn=0,n=*A
         0 000440   400000 000005                    ADSC9   0,Q,PR4                  cn=0,n=*A
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=363

     1294      1304    1              p[0] = strlen(&p[1]);  

   1304  0 000441   200040 633500                    EPPR3   p,,AUTO
         0 000442   000001 720007                    LXL0    1,DL
         0 000443   300000 500510                    A9BD    0,X0,PR3
         0 000444   200061 453500                    STP3    p+17,,AUTO
         0 000445   200061 235100                    LDA     p+17,,AUTO
         0 000446   000020 771000                    ARL     16
         0 000447   007777 375007                    ANA     4095,DL
         0 000450   007777 675007                    ERA     4095,DL
         0 000451   000001 035007                    ADLA    1,DL
         0 000452   000000 236007                    LDQ     0,DL
         0 000453   000003 124540                    SCM     mask='000'O
         0 000454   300000 000005                    ADSC9   0,,PR3                   cn=0,n=*A
         0 000455   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000456   200062 000100                    ARG     p+18,,AUTO
         0 000457   300000 500505                    A9BD    0,AL,PR3
         0 000460   010000 235007                    LDA     4096,DL
         0 000461   200062 036100                    ADLQ    p+18,,AUTO
         0 000462   777771 606404                    TTN     s:1304+10,IC
         0 000463   200061 756100                    STQ     p+17,,AUTO
         0 000464   000100 100500                    MLR     fill='000'O
         0 000465   200061 600001                    ADSC9   p+17,,AUTO               cn=3,n=1
         0 000466   200040 000001                    ADSC9   p,,AUTO                  cn=0,n=1

     1295      1305    1              DAM_DUMPFILE(&pp);  /* try xxxx.:SYSTAC    */  

   1305  0 000467   200037 630500                    EPPR0   pp,,AUTO
         0 000470   200017 450500                    STP0    fid+11,,AUTO
         0 000471   200017 630500                    EPPR0   fid+11,,AUTO
         0 000472   000732 631400 0                  EPPR1   s:1318+4
         0 000473   000000 701000 xent               TSX1    DAM_DUMPFILE
         0 000474   000000 236007                    LDQ     0,DL

     1296      1306    1              if (!ALTRT)  

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=364
   1306  0 000475   000000 234000 xsym               SZN     ALTRT
         0 000476   000501 601000 0                  TNZ     s:1308

     1297      1307    1                    return 0;  

   1307  0 000477   200057 450100                    STZ     p+15,,AUTO
         0 000500   000726 710000 0                  TRA     s:1318

     1298      1308    1              strcpy(&p[1],DMPVRS);  

   1308  0 000501   200040 633500                    EPPR3   p,,AUTO
         0 000502   000001 720007                    LXL0    1,DL
         0 000503   300000 500510                    A9BD    0,X0,PR3
         0 000504   000000 634400 xsym               EPPR4   DMPVRS
         0 000505   200061 454500                    STP4    p+17,,AUTO
         0 000506   200061 235100                    LDA     p+17,,AUTO
         0 000507   000020 771000                    ARL     16
         0 000510   007777 375007                    ANA     4095,DL
         0 000511   007777 675007                    ERA     4095,DL
         0 000512   000001 035007                    ADLA    1,DL
         0 000513   000000 236007                    LDQ     0,DL
         0 000514   000003 124540                    SCM     mask='000'O
         0 000515   400000 000005                    ADSC9   0,,PR4                   cn=0,n=*A
         0 000516   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000517   200062 000100                    ARG     p+18,,AUTO
         0 000520   400000 500505                    A9BD    0,AL,PR4
         0 000521   010000 235007                    LDA     4096,DL
         0 000522   200062 036100                    ADLQ    p+18,,AUTO
         0 000523   777771 606404                    TTN     s:1308+11,IC
         0 000524   200061 474500                    LDP4    p+17,,AUTO
         0 000525   000001 036007                    ADLQ    1,DL
         0 000526   000140 100540                    MLR     fill='000'O
         0 000527   400000 000006                    ADSC9   0,,PR4                   cn=0,n=*Q
         0 000530   300000 000006                    ADSC9   0,,PR3                   cn=0,n=*Q

     1299      1309    1              strcat (p,fid);  

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=365
   1309  0 000531   200004 473500                    LDP3    fid,,AUTO
         0 000532   200061 453500                    STP3    p+17,,AUTO
         0 000533   200061 235100                    LDA     p+17,,AUTO
         0 000534   000020 771000                    ARL     16
         0 000535   007777 375007                    ANA     4095,DL
         0 000536   007777 675007                    ERA     4095,DL
         0 000537   000001 035007                    ADLA    1,DL
         0 000540   000000 236007                    LDQ     0,DL
         0 000541   000003 124540                    SCM     mask='000'O
         0 000542   300000 000005                    ADSC9   0,,PR3                   cn=0,n=*A
         0 000543   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000544   200062 000100                    ARG     p+18,,AUTO
         0 000545   300000 500505                    A9BD    0,AL,PR3
         0 000546   010000 235007                    LDA     4096,DL
         0 000547   200062 036100                    ADLQ    p+18,,AUTO
         0 000550   777771 606404                    TTN     s:1309+8,IC
         0 000551   200063 756100                    STQ     p+19,,AUTO
         0 000552   200040 634500                    EPPR4   p,,AUTO
         0 000553   200064 454500                    STP4    p+20,,AUTO
         0 000554   200064 235100                    LDA     p+20,,AUTO
         0 000555   000020 771000                    ARL     16
         0 000556   007777 375007                    ANA     4095,DL
         0 000557   007777 675007                    ERA     4095,DL
         0 000560   000001 035007                    ADLA    1,DL
         0 000561   000000 236007                    LDQ     0,DL
         0 000562   000003 124540                    SCM     mask='000'O
         0 000563   400000 000005                    ADSC9   0,,PR4                   cn=0,n=*A
         0 000564   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000565   200065 000100                    ARG     p+21,,AUTO
         0 000566   400000 500505                    A9BD    0,AL,PR4
         0 000567   010000 235007                    LDA     4096,DL
         0 000570   200065 036100                    ADLQ    p+21,,AUTO
         0 000571   777771 606404                    TTN     s:1309+25,IC
         0 000572   200064 474500                    LDP4    p+20,,AUTO
         0 000573   200061 473500                    LDP3    p+17,,AUTO
         0 000574   200063 235100                    LDA     p+19,,AUTO
         0 000575   000001 035007                    ADLA    1,DL
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=366
         0 000576   000146 100540                    MLR     fill='000'O
         0 000577   300000 000005                    ADSC9   0,,PR3                   cn=0,n=*A
         0 000600   400000 000005                    ADSC9   0,Q,PR4                  cn=0,n=*A

     1300      1310    1              strcat(p,".:SYSTAC");  

   1310  0 000601   002304 633400 xsym               EPPR3   sigint#c+1220
         0 000602   200061 453500                    STP3    p+17,,AUTO
         0 000603   200061 235100                    LDA     p+17,,AUTO
         0 000604   000020 771000                    ARL     16
         0 000605   007777 375007                    ANA     4095,DL
         0 000606   007777 675007                    ERA     4095,DL
         0 000607   000001 035007                    ADLA    1,DL
         0 000610   000000 236007                    LDQ     0,DL
         0 000611   000003 124540                    SCM     mask='000'O
         0 000612   300000 000005                    ADSC9   0,,PR3                   cn=0,n=*A
         0 000613   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000614   200062 000100                    ARG     p+18,,AUTO
         0 000615   300000 500505                    A9BD    0,AL,PR3
         0 000616   010000 235007                    LDA     4096,DL
         0 000617   200062 036100                    ADLQ    p+18,,AUTO
         0 000620   777771 606404                    TTN     s:1310+8,IC
         0 000621   200063 756100                    STQ     p+19,,AUTO
         0 000622   200040 634500                    EPPR4   p,,AUTO
         0 000623   200064 454500                    STP4    p+20,,AUTO
         0 000624   200064 235100                    LDA     p+20,,AUTO
         0 000625   000020 771000                    ARL     16
         0 000626   007777 375007                    ANA     4095,DL
         0 000627   007777 675007                    ERA     4095,DL
         0 000630   000001 035007                    ADLA    1,DL
         0 000631   000000 236007                    LDQ     0,DL
         0 000632   000003 124540                    SCM     mask='000'O
         0 000633   400000 000005                    ADSC9   0,,PR4                   cn=0,n=*A
         0 000634   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000635   200065 000100                    ARG     p+21,,AUTO
         0 000636   400000 500505                    A9BD    0,AL,PR4
         0 000637   010000 235007                    LDA     4096,DL
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=367
         0 000640   200065 036100                    ADLQ    p+21,,AUTO
         0 000641   777771 606404                    TTN     s:1310+25,IC
         0 000642   200064 474500                    LDP4    p+20,,AUTO
         0 000643   200061 473500                    LDP3    p+17,,AUTO
         0 000644   200063 235100                    LDA     p+19,,AUTO
         0 000645   000001 035007                    ADLA    1,DL
         0 000646   000146 100540                    MLR     fill='000'O
         0 000647   300000 000005                    ADSC9   0,,PR3                   cn=0,n=*A
         0 000650   400000 000005                    ADSC9   0,Q,PR4                  cn=0,n=*A

     1301      1311    1              p[0] = strlen(&p[1]);  

   1311  0 000651   200040 633500                    EPPR3   p,,AUTO
         0 000652   000001 720007                    LXL0    1,DL
         0 000653   300000 500510                    A9BD    0,X0,PR3
         0 000654   200061 453500                    STP3    p+17,,AUTO
         0 000655   200061 235100                    LDA     p+17,,AUTO
         0 000656   000020 771000                    ARL     16
         0 000657   007777 375007                    ANA     4095,DL
         0 000660   007777 675007                    ERA     4095,DL
         0 000661   000001 035007                    ADLA    1,DL
         0 000662   000000 236007                    LDQ     0,DL
         0 000663   000003 124540                    SCM     mask='000'O
         0 000664   300000 000005                    ADSC9   0,,PR3                   cn=0,n=*A
         0 000665   000000 000000                    ADSC9   0,?                      cn=0,n=0
         0 000666   200062 000100                    ARG     p+18,,AUTO
         0 000667   300000 500505                    A9BD    0,AL,PR3
         0 000670   010000 235007                    LDA     4096,DL
         0 000671   200062 036100                    ADLQ    p+18,,AUTO
         0 000672   777771 606404                    TTN     s:1311+10,IC
         0 000673   200061 756100                    STQ     p+17,,AUTO
         0 000674   000100 100500                    MLR     fill='000'O
         0 000675   200061 600001                    ADSC9   p+17,,AUTO               cn=3,n=1
         0 000676   200040 000001                    ADSC9   p,,AUTO                  cn=0,n=1

     1302      1312    1              DAM_DUMPFILE(&pp);  

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=368
   1312  0 000677   200037 630500                    EPPR0   pp,,AUTO
         0 000700   200010 450500                    STP0    fid+4,,AUTO
         0 000701   200010 630500                    EPPR0   fid+4,,AUTO
         0 000702   000732 631400 0                  EPPR1   s:1318+4
         0 000703   000000 701000 xent               TSX1    DAM_DUMPFILE
         0 000704   000000 236007                    LDQ     0,DL

     1303      1313    1              if (!ALTRT)  

   1313  0 000705   000000 234000 xsym               SZN     ALTRT
         0 000706   000711 601000 0                  TNZ     s:1315

     1304      1314    1                    return 0;  

   1314  0 000707   200057 450100                    STZ     p+15,,AUTO
         0 000710   000726 710000 0                  TRA     s:1318

     1305      1315    1              printf ("Can't open %s in :SYSTAC\n",fid);  

   1315  0 000711   000736 236000 0                  LDQ     s:1318+8
         0 000712   200007 756100                    STQ     fid+3,,AUTO
         0 000713   200004 236100                    LDQ     fid,,AUTO
         0 000714   200010 756100                    STQ     fid+4,,AUTO
         0 000715   200007 630500                    EPPR0   fid+3,,AUTO
         0 000716   000734 631400 0                  EPPR1   s:1318+6
         0 000717   000000 701000 xent               TSX1    printf
         0 000720   000000 236007                    LDQ     0,DL

     1306      1316    1              DAM_ERR();  

   1316  0 000721   000730 631400 0                  EPPR1   s:1318+2
         0 000722   000000 701000 xent               TSX1    DAM_ERR
         0 000723   000000 236007                    LDQ     0,DL

     1307      1317    1              return -1;  

   1317  0 000724   000735 236000 0                  LDQ     s:1318+7
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=369
         0 000725   200057 756100                    STQ     p+15,,AUTO

     1308      1318    1        }  

   1318  0 000726   200057 236100                    LDQ     p+15,,AUTO
         0 000727   000000 702000 xent               TSX2    _XBC_FARET
         0 000730   000000 000000                    ZERO    0,0
         0 000731   000000 000777                    ZERO    0,511
         0 000732   000001 000000                    ZERO    1,0
         0 000733   002307 000000 xsym               ZERO    sigint#c+1223,0
         0 000734   000002 000000                    ZERO    2,0
         0 000735   777777 777777                    ZERO    -1,-1
         0 000736   001771 000000 xsym               ZERO    sigint#c+1017,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=370

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0  1275-  1318     39   490     0      0  y        0   1 dibopen
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=371

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     7 Assign    16 Call       8 If         6 Return     1 Proc       1 EndPrc


 # major stmts=   37 Code/major=12.97 # stmts=   39 Code/stmt=12.30  Point total= 86.4
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=372

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr              4-0-0/w PTR         r,m   1 fid
    40-0-0/c CHAR        r,m   1 p(0:63)                   37-0-0/w PTR         r,m   1 pp

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=373

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=374

 Object Unit name= pk4                                        File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:17:07.12 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero    18     22  pk4
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  pk4

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_1
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=375

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=376


     1310      1320                
     1311      1321             int pk4(j)  
     1312      1322             int j;  

   1322  0 000000   000000 700000 xent  pk4          TSX0    _XBC_AUTO_1
         0 000001   000020 000001                    ZERO    16,1

     1313      1323             {  
     1314      1324    1              j += j&0777;  

   1324  0 000002   000777 236007                    LDQ     511,DL
         0 000003   200004 376100                    ANQ     j,,AUTO
         0 000004   200004 056100                    ASQ     j,,AUTO

     1315      1325    1              j += j&0777777;  

   1325  0 000005   777777 236007                    LDQ     -1,DL
         0 000006   200004 376100                    ANQ     j,,AUTO
         0 000007   200004 056100                    ASQ     j,,AUTO

     1316      1326    1              j += j&0777777777;  

   1326  0 000010   000020 236000 0                  LDQ     s:1328+2
         0 000011   200004 376100                    ANQ     j,,AUTO
         0 000012   200004 056100                    ASQ     j,,AUTO

     1317      1327    1              return j/8;  

   1327  0 000013   200004 236100                    LDQ     j,,AUTO
         0 000014   000010 506007                    DIV     8,DL
         0 000015   200007 756100                    STQ     j+3,,AUTO

     1318      1328    1        }  

   1328  0 000016   200007 236100                    LDQ     j+3,,AUTO
         0 000017   000000 702000 xent               TSX2    _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=377
         0 000020   000777 777777                    ZERO    511,-1
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=378

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0  1322-  1328      6   488     0      0  y        0   1 pk4
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=379

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     3 Assign     1 Return     1 Proc       1 EndPrc

 # major stmts=    4 Code/major= 4.50 # stmts=    6 Code/stmt= 3.00  Point total= 90.1
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=380

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr              4-0-0/w SBIN        r,m   1 j

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=381
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=382

 Object Unit name= pk2                                        File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:17:11.88 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero    10     12  pk2
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes                     Std        0  pk2

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_1
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=383

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=384


     1320      1330                
     1321      1331             int pk2(j)  
     1322      1332             int   j;  

   1332  0 000000   000000 700000 xent  pk2          TSX0    _XBC_AUTO_1
         0 000001   000020 000001                    ZERO    16,1

     1323      1333             {  
     1324      1334    1              return ((j&255)+j)/2;  

   1334  0 000002   000377 236007                    LDQ     255,DL
         0 000003   200004 376100                    ANQ     j,,AUTO
         0 000004   200004 076100                    ADQ     j,,AUTO
         0 000005   000002 506007                    DIV     2,DL
         0 000006   200007 756100                    STQ     j+3,,AUTO

     1325      1335    1        }  

   1335  0 000007   200007 236100                    LDQ     j+3,,AUTO
         0 000010   000000 702000 xent               TSX2    _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=385

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0  1332-  1335      3   488     0      0  y        0   1 pk2
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=386

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     1 Return     1 Proc       1 EndPrc

 # major stmts=    1 Code/major=10.00 # stmts=    3 Code/stmt= 3.33  Point total= 84.9
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=387

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr              4-0-0/w SBIN        r,m   1 j

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=388
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=389

 Object Unit name= sigint                                     File name= TCD$ddu:c.:TCA2TOU
 UTS= NOV 16 '97 14:17:16.04 SUN                              Compiler= C/C00            Sev=      00
 SharedLib= :SHARED_C                                         Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  8     zero    22     26  sigint
    1   Data  even  zero     0      0
    2  RoData even  none     0      0

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes      Std        1  sigint

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes                   Std       0 _sigint#f#
                       Std       0 _XBC_AUTO_0
                       Std       0 printf
         yes           Std       2 longjmp
                       Std       0 _XBC_FARET
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=390

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    sigint#c                              sigint#s                              stat_table_txt
     strolp                                env                                   prevop
     op                                    savebufsiz                            savebuf
     readbuf                               optarg                                DMPVRS
     ALTRT                                 messc                                 interactive
     actldcts                              ldctcnt                               ldctaddr
     dibaddr                               ldctsave                              i
     rawbound                              rawaddr                               rawdump
     procflg                               qhdrflg                               messaddr
     messcnt                               traceaddr                             dibctx
     fulldct                               kmemfd                                dibfd
     dib_ctx                               qhdr                                  dduproc
     devldct                               ipc                                   _iostd

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=391


     1327      1337             {  

   1337  0 000000   000000 700000 xent  sigint       TSX0    _XBC_AUTO_0
         0 000001   000016 000000                    ZERO    14,0

     1328      1338    1              printf("\nbreak!  \n");  

   1338  0 000002   000021 236000 0                  LDQ     s:1339+9
         0 000003   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000004   200005 630500                    EPPR0   __varyarg_ptr+2,,AUTO
         0 000005   000022 631400 0                  EPPR1   s:1339+10
         0 000006   000000 701000 xent               TSX1    printf
         0 000007   000000 236007                    LDQ     0,DL

     1329      1339    1              longjmp (env,1);  

   1339  0 000010   000023 236000 0                  LDQ     s:1339+11
         0 000011   200004 756100                    STQ     __varyarg_ptr+1,,AUTO
         0 000012   000001 236007                    LDQ     1,DL
         0 000013   200005 756100                    STQ     __varyarg_ptr+2,,AUTO
         0 000014   200004 630500                    EPPR0   __varyarg_ptr+1,,AUTO
         0 000015   000024 631400 0                  EPPR1   s:1339+12
         0 000016   000000 701000 xent               TSX1    longjmp
         0 000017   000000 236007                    LDQ     0,DL
         0 000020   000000 702000 xent               TSX2    _XBC_FARET
         0 000021   002301 000000 xsym               ZERO    sigint#c+1217,0
         0 000022   000001 000000                    ZERO    1,0
         0 000023   000000 000000 xsym               ZERO    env0,0
         0 000024   000002 000000                    ZERO    2,0
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=392

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0  1337-  1340      3   487     0      0  y   y    1   1 sigint
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=393

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label



  **** Statement type totals  ****

     2 Call       1 Proc

 # major stmts=    2 Code/major=11.00 # stmts=    3 Code/stmt= 7.33  Point total= 84.8
CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=394

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r,m   1 __varyarg_ptr

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r,m   1 ALTRT                      0-0-0/c CHAR        r,m   1 DMPVRS(0:5)
     0-0-0/c STRC(1728)  r,m   1 _iostd(0:3)                0-0-0/w SBIN        r,m   1 actldcts
     0-0-0/c STRC(288)   r,m   1 dduproc                    0-0-0/c STRC(432)   r,m   1 devldct
     0-0-0/c STRC(9432)  r,m   1 dib_ctx                    0-0-0/w SBIN        r,m   1 dibaddr
     0-0-0/w SBIN        r,m   1 dibctx                     0-0-0/w SBIN        r,m   1 dibfd
     0-0-0/w SBIN        r,m   1 env(0:1)                   0-0-0/w SBIN        r,m   1 fulldct
     0-0-0/w SBIN        r,m   1 i                          0-0-0/w SBIN        r,m   1 interactive
     0-0-0/c STRC(432)   r,m   1 ipc                        0-0-0/w SBIN        r,m   1 kmemfd
     0-0-0/w SBIN        r,m   1 ldctaddr                   0-0-0/w SBIN        r,m   1 ldctcnt
     0-0-0/w SBIN        r,m   1 ldctsave                   0-0-0/w SBIN        r,m   1 messaddr
     0-0-0/w PTR         r,m   1 messc                      0-0-0/w SBIN        r,m   1 messcnt
    26-0-0/c CHAR        r,m   1 op                         0-0-0/w PTR         r,m   1 optarg
   146-0-0/c CHAR        r,m   1 path(0:63)                 0-0-0/c CHAR        r,m   1 prevop
     0-0-0/w SBIN        r,m   1 procflg                    1-0-0/c STRC(1116)  r,m   1 qhdr
     0-0-0/w SBIN        r,m   1 qhdrflg                    0-0-0/w SBIN        r,m   1 rawaddr
     0-0-0/w SBIN        r,m   1 rawbound                   0-0-0/w SBIN        r,m   1 rawdump
     0-0-0/c CHAR        r,m   1 readbuf(0:79)              0-0-0/c CHAR        r,m   1 savebuf(0:79)
     0-0-0/w SBIN        r,m   1 savebufsiz
     0-0-0/c CHAR        r,m   1 stat_table_txt(d=2,e=72)
     0-0-0/w PTR         r,m   1 strolp                     0-0-0/w SBIN        r,m   1 traceaddr

  ****  BASED and DCB variables  ****

CC.C03    File=TCD$ddu:c.:TCA2TSI                                                   Sun Nov 16 1997  Page=395
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1728)  r,m   1 s__FILE#                   0-0-0/c STRC(432)   r,m   1 s_ipc#
     0-0-0/c STRC(9432)  r,m   1 s_kj_ctx#                  0-0-0/c STRC(432)   r,m   1 s_kn_ldct#
     0-0-0/c STRC(1116)  r,m   1 s_knh_qhdr#

