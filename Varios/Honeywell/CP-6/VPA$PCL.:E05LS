VERSION E05

PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:1    
        1        1        /*M* VPA$PCL Top level for PCL processor                                      */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DTI=1,THI=1  */
        8        8        /* Next available error code = 5   */
        9        9        /*F* NAME: VPA$PCL
       10       10             PURPOSE: To drive the PCL processor.
       11       11             DESCRIPTION: This is the top level for PCL. It gets the command,
       12       12                          parses it, and calls an appropriate procedure to handle
       13       13                          said command.
       14       14             REFERENCE: Architecture file section 17.7 document 256
       15       15        */
       16       16        PCL:    PROC MAIN;
       17       17        /*D* NAME: PCL
       18       18             CALL: !PCL
       19       19             ENVIRONMENT: User service processor.
       20       20        */
       21       21        /**/
       22       22        /*  INCLUDE FILES  */
       23       23        /**/
       24       24        %INCLUDE VP_DATA_R;
       25     7011        %INCLUDE XU_PERR_C;
       26     7202        %INCLUDE F$DCB;
       27     7251        %INCLUDE B$JIT;
       28     7541        %INCLUDE B_ERRORS_C;
       29     8668        /**/
       30     8669        /*  BASED  */
       31     8670        /**/
       32     8671        %PARSE$OUT(STCLASS=BASED);
       33     8716        /**/
       34     8717        /*  CONSTANT  */
       35     8718        /**/
       36     8719        %FPT_CLOSE(FPTN = FPT_CLOSE_ME,
       37     8720                   DISP = SAVE,
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:2    
       38     8721                   DCB  = M$ME,
       39     8722                   STCLASS = CONSTANT);
       40     8764    1   DCL PROMPT_1 CHAR(1) CONSTANT INIT('<');
       41     8765    1   DCL LONG_PROMPT CHAR(4) CONSTANT INIT('PCL<');
       42     8766    1   DCL PROMPT_DEL CHAR(2) CONSTANT INIT(' ?');
       43     8767        /**/
       44     8768        /*  ENTRY DCLS  */
       45     8769        /**/
       46     8770        %VP_ENTRIES;
       47     8978        %INCLUDE XUG_ENTRY;
       48     9009        /**/
       49     9010        /*  STATIC DATA  */
       50     9011        /**/
       51     9012        %FPT_WRITE(FPTN = FPT_WRITE_CARET,
       52     9013                   STCLASS = STATIC,
       53     9014                   DCB = M$ME,
       54     9015                   BUF = PARSE_IN_BUF);
       55     9046        %FPT_TRAP(FPTN = FPT_TRAP,
       56     9047                  STCLASS = STATIC,
       57     9048                  ARITHMETIC = VPL$TRAP,
       58     9049                  DIVIDE_CHECK = TRAP,
       59     9050                  OVERFLOW = TRAP,
       60     9051                  ERRORS = VPL$TRAP,
       61     9052                  IPR = TRAP,
       62     9053                  LOCKUP = TRAP,
       63     9054                  MEMORY = TRAP,
       64     9055                  MISSING_PAGE = TRAP,
       65     9056                  MISSING_SEG = TRAP,
       66     9057                  SECURITY_1 = TRAP,
       67     9058                  SECURITY_2 = TRAP,
       68     9059                  PMME = VPL$TRAP,
       69     9060                  PROGRAMMED = VPL$TRAP,
       70     9061                  DERAIL = TRAP,
       71     9062                  FAULT_TAG = TRAP);
       72     9085        %FPT_EXIT (FPTN = FPT_EXIT,
       73     9086                   CODE = ERR_CODE,
       74     9087                   STCLASS = STATIC);
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:3    
       75     9102        %FPT_ERR (FPTN = FPT_ERR,
       76     9103                   CODE = ERR_CODE,
       77     9104                   STCLASS = STATIC);
       78     9119        %FPT_XXX (FPTN = FPT_XXX,
       79     9120                   CODE = ERR_CODE,
       80     9121                   STCLASS = STATIC);
       81     9136    1   DCL I SBIN WORD STATIC;                 /* Handy counter for scratch use      */
       82     9137    1   DCL CODE UBIN WORD;
       83     9138    1   DCL SAVE_ERR_CODE BIT(36);
       84     9139        /**/
       85     9140    1           REMEMBER USER_FATAL_L IN ABORT_PCL;
       86     9141    1           REMEMBER ABORT_PCL_L IN TRAP_PCL;
       87     9142    1           REMEMBER ABORT_PCL_L IN ABORT_STEP;
       88     9143    1           REMEMBER ABORT_PCL_L IN ABORT_CMD;
       89     9144    1           CALL M$TRAP (FPT_TRAP);
       90     9145    1           ERR_FLG = '0'B;
       91     9146    1           CALL VPD$INITIALIZE;
       92     9147    1           REMEMBER NEXT_CMD IN ABORT_CMD;
       93     9148    1           REMEMBER NEXT_CMD IN ABORT_STEP;
       94     9149    1           IF ERR_FLG
       95     9150    1            THEN
       96     9151    1              GOTO PARSE_ALT;
       97     9152    2   COMMAND_LOOP: DO WHILE('1'B);           /* LOOP FOREVER                       */
       98     9153    2              REMEMBER NEXT_CMD IN ABORT_STEP;
       99     9154    2              REMEMBER NEXT_CMD IN ABORT_CMD;
      100     9155    2              BREAK_MESSAGE_REPORTER = ENTADDR(NIL);
      101     9156    2              ERR_FLG = '0'B;
      102     9157    2              IF PRE_PARSED
      103     9158    2               THEN
      104     9159    2                 PRE_PARSED = %NO#;
      105     9160    3               ELSE DO;
      106     9161    3                  IF B$JIT.JUNK & %JJ_UDELTA#
      107     9162    3                   THEN                    /* We're under DELTA, clarify prompt  */
      108     9163    3                     FPT_PROMPT.PROMPT_ = VECTOR(LONG_PROMPT);
      109     9164    3                   ELSE                    /* Not DELTA, short prompt is OK      */
      110     9165    3                     FPT_PROMPT.PROMPT_ = VECTOR(PROMPT_1);
      111     9166    3                  CALL M$PROMPT(FPT_PROMPT);
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:4    
      112     9167    3                  GETCMD.PROMPT_ = FPT_PROMPT.PROMPT_;
      113     9168    3                  IF READ_FILE
      114     9169    3                   THEN
      115     9170    3                     GETCMD.INDCB# = M$READFILE#;
      116     9171    3                   ELSE
      117     9172    3                     GETCMD.INDCB# = M$SI#;
      118     9173    3                  CALL XUG$CLRENABLE (GETCMD);
      119     9174    3                  IF COMMAND_STUFFED
      120     9175    4                   THEN DO;
      121     9176    4                      COMMAND_STUFFED = %NO#;
      122     9177    4                      CALL XUG$GETCMD (GETCMD) ALTRET (PARSE_ALT);
      123     9178    4                      END;
      124     9179    4                   ELSE DO;
      125     9180    4                      GETCMD.TEXT_ = VECTOR(NIL);
      126     9181    4                      CALL XUG$GETCMD (GETCMD) ALTRET (PARSE_ALT);
      127     9182    4                      END;
      128     9183    3                  PCB.OUT$ = GETCMD.OUT$;
      129     9184    3                  END;
      130     9185    2              OLD_BREAKS = 0;
      131     9186    2              BREAKS = 0;
      132     9187    2              SORTING_INPUT = '0'B;
      133     9188    2              CMD_MASK = '0'B;
      134     9189    2              CMD_MASK(PCB.OUT$->OUT$BLK.CODE) = '1'B;
      135     9190    2              CALL VPD$INIT_COMMANDS;
      136     9191        %EJECT;
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:5    
      137     9192    2              CODE = PCB.OUT$ -> OUT$BLK.CODE;
      138     9193    3   DO_CMD:    DO CASE(CODE);
      139     9194    3               CASE(1);
      140     9195    3                 CALL VPE$COPY;
      141     9196    3               CASE(2);
      142     9197    3                 CALL VPE$COPYALL;
      143     9198    3               CASE(3);
      144     9199    3                 CALL VPE$COPYSTD;
      145     9200    3               CASE(4);                    /* SEVERITY                           */
      146     9201    4                 DO I = 0 TO PCB.OUT$ -> OUT$BLK.NSUBLKS -1;
      147     9202    5                    DO CASE(PCB.OUT$ -> OUT$BLK.SUBLK$(I) -> OUT$BLK.CODE);
      148     9203    5                     CASE(1);              /* ABORT                              */
      149     9204    5                       ERROR_SEVERITY = 1;
      150     9205    5                     CASE(2);              /* CONTINUE                           */
      151     9206    5                       ERROR_SEVERITY = 2;
      152     9207    5                     CASE(3);              /* ERROR                              */
      153     9208    5                       ERROR_SEVERITY = 3;
      154     9209    5                     CASE(4);              /* NSTEPCC                            */
      155     9210    5                       HIGHEST_SEVERITY = -1;
      156     9211    5                     CASE(5);              /* STEPCC                             */
      157     9212    5                       HIGHEST_SEVERITY = 0;
      158     9213    5                     END;                  /* END DO CASE                        */
      159     9214    4                    END;                   /* END DO I                           */
      160     9215    3               CASE(5);                    /* DELETE                             */
      161     9216    3                 FPT_PROMPT.PROMPT_ = VECTOR(PROMPT_DEL);
      162     9217    3                 CALL M$PROMPT(FPT_PROMPT);
      163     9218    3                 CALL VPI$DELETE;
      164     9219    3               CASE(6);
      165     9220    3                 ;                         /* NULL INPUT                         */
      166     9221    3               CASE(7);
      167     9222    3                 CALL VPI$DELETESTD;
      168     9223    3               CASE(8);                    /* DELREC                             */
      169     9224    3                 CALL VPK$DELREC;
      170     9225    3               CASE(9);
      171     9226    3                 CALL VPH$LIST;
      172     9227    3               CASE(10);
      173     9228    3                 CALL VPH$LISTSTD;
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:6    
      174     9229    3               CASE(11);
      175     9230    3                 CALL VPH$REVIEW;
      176     9231    3               CASE(25);
      177     9232    3                 CALL VPH$REVIEWSTD;
      178     9233    3               CASE(12);
      179     9234    3                 CALL VPK$MODIFY;
      180     9235    3               CASE(13);
      181     9236    3                 CALL VPJ$MOUNT(0);        /* MOUNT                              */
      182     9237    3               CASE(14);
      183     9238    3                 CALL VPJ$SPF;
      184     9239    3               CASE(15);
      185     9240    3                 CALL VPJ$SPR;
      186     9241    3               CASE(16);
      187     9242    3                 CALL VPJ$SPE;
      188     9243    3               CASE(17);
      189     9244    3                 CALL VPJ$MOUNT(1);        /* REWIND                             */
      190     9245    3               CASE(18);
      191     9246    3                 CALL VPJ$MOUNT(2);        /* REMOVE                             */
      192     9247    3               CASE(29);
      193     9248    3                 CALL VPJ$MOUNT(3);        /* RELEASE                            */
      194     9249    3               CASE(19);
      195     9250    3                 CALL VPJ$WEOF;
      196     9251    3               CASE(20);
      197     9252    3                 CALL VPK$TX;
      198     9253    3               CASE(22);                   /* ERRORS                             */
      199     9254    3                 ERR_SAVE_REL = PCB.OUT$->OUT$BLK.SUBLK$(0)->OUT$BLK.CODE;
      200     9255    3               CASE(24);                   /* END                                */
      201     9256    3   END_CMD:      IF M$ME$->F$DCB.FCD
      202     9257    3                  THEN
      203     9258    3                    CALL M$CLOSE(FPT_CLOSE_ME);
      204     9259    3                 IF HIGHEST_SEVERITY ~= -1
      205     9260    3                  THEN                     /* STEPCC set requested               */
      206     9261    3                    FPT_EXIT.V.STEPCC# = HIGHEST_SEVERITY;
      207     9262    3                  ELSE                     /* STEPCC not requested               */
      208     9263    3                    FPT_EXIT.V.STEPCC# = 0;
      209     9264    3                 ERR_CODE.SEV = ERR_CODE.SEV +1; /* Bump so IBEX won't repeat    */
      210     9265    3                 CALL M$EXIT (FPT_EXIT);
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:7    
      211     9266    3               CASE(28);                   /* SCAN                               */
      212     9267    3                 CALL VPJ$SCAN;
      213     9268    3               CASE(34);                   /* STATUS                             */
      214     9269    3                 CALL VPK$STATUS;
      215     9270    3               CASE(35);                   /* READ                               */
      216     9271    3                 CALL VPK$READ;
      217     9272    3               CASE(37);                   /* LINK                               */
      218     9273    3                 CALL VPK$LINK;
      219     9274    3               CASE(38);                   /* 'PCL' invocation                   */
      220     9275    3                 CALL VPK$PCL_INVOCATION;
      221     9276    3               END;                        /* END CASE                           */
      222     9277        %EJECT;
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:8    
      223     9278    3              DO WHILE('0'B);
      224     9279    3   PARSE_ALT:    ;                         /* Let's hope ECHO was on             */
      225     9280    3                 PCB.ERROR = GETCMD.ERR#;
      226     9281    3                 IF PCB.ERROR.MON
      227     9282    4                  THEN DO;
      228     9283    4                     IF PCB.ERROR.CODE = %E$EOF
      229     9284    5                      THEN DO;
      230     9285    5                         IF ONE_TIME = 0 AND READ_FILE
      231     9286    6                          THEN DO;
      232     9287    6                             CALL M$CLOSE(FPT_CLOSE_READ); /* Quit READing there */
      233     9288    6                             READ_FILE = '0'B; /* READ command no longer active  */
      234     9289    6                             GOTO COMMAND_LOOP;
      235     9290    6                             END;
      236     9291    6                          ELSE DO;
      237     9292    6                             CODE = 24;    /* Fake up an END command             */
      238     9293    6                             GOTO DO_CMD;  /* Terminate PCL                      */
      239     9294    6                             END;
      240     9295    5                         END;
      241     9296    5                      ELSE DO;
      242     9297    5                         IF M$SI$ -> F$DCB.DDEV.IC /* Input came from a terminal */
      243     9298    5                          THEN
      244     9299    5                            CALL VPL$ERR_PROC (3,0,,GETCMD.ERR#); /* Abort command */
      245     9300    5                          ELSE
      246     9301    5                            CALL VPL$ERR_PROC (4,0,,GETCMD.ERR#); /* Report and die */
      247     9302    5                         END;
      248     9303    4                     END;
      249     9304    3                  ELSE
      250     9305    3                    IF PCB.ERROR.CODE = %E$SYNERR
      251     9306    3                      AND GETCMD.TEXT_ ~= VECTOR(NIL)
      252     9307    3                     THEN
      253     9308    4                     DO;
      254     9309    4                        ERR_CODE = PCB.ERROR;
      255     9310    4                        CALL VPL$ERR_SEV_HANDLER(1);
      256     9311    4                        END;
      257     9312    3                     ELSE
      258     9313    3                       CALL VPL$ERR_PROC(3,0,,GETCMD.ERR#);
      259     9314    3                 END;
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:9    
      260     9315    2   NEXT_CMD:
      261     9316    2              CALL VPF$SORT_FID (5);       /* close the sort file, if open       */
      262     9317    2              IF M$EI$ -> F$DCB.FCD
      263     9318    3               THEN DO;
      264     9319    3                  FPT_CLOSE_EI.V.NOMARKS#='1'B;
      265     9320    3                  CALL M$CLOSE (FPT_CLOSE_EI); /* close M$EI if left open by break */
      266     9321    3                  FPT_CLOSE_EI.V.NOMARKS#='0'B;
      267     9322    3                  END;
      268     9323
      269     9324    2              IF ONE_TIME = 1 AND NOT READ_FILE
      270     9325    2               THEN
      271     9326    2                 GOTO END_CMD;
      272     9327    2              END;
      273     9328        %EJECT;
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:10   
      274     9329    1   USER_FATAL_L:
      275     9330    1           IF M$EO$->F$DCB.FCD | M$EO1$->F$DCB.FCD
      276     9331    1            THEN
      277     9332    1              CALL VPD$CLOSE_OUT(1);       /* Close any open output file         */
      278     9333                                                /* with error                         */
      279     9334    1           IF M$ME$->F$DCB.FCD
      280     9335    1            THEN
      281     9336    1              CALL M$CLOSE(FPT_CLOSE_ME);
      282     9337    1           SAVE_ERR_CODE = ERR_CODE;       /* Save code so IBEX will know        */
      283     9338    1           CALL VPL$ERR_PROC(0,1,'01'O);
      284     9339        /*E*   ERROR: VPA-00001
      285     9340             MESSAGE: FATAL USER ERROR
      286     9341        */
      287     9342    1           IF HIGHEST_SEVERITY ~= -1
      288     9343    1            THEN                           /* STEPCC set requested               */
      289     9344    1              FPT_ERR.V.STEPCC# = HIGHEST_SEVERITY;
      290     9345    1            ELSE                           /* STEPCC not requested               */
      291     9346    1              FPT_ERR.V.STEPCC# = 0;
      292     9347    1           ERR_CODE = SAVE_ERR_CODE;
      293     9348    1           ERR_CODE.SEV = ERR_CODE.SEV +1; /* Bump so IBEX won't repeat the msg. */
      294     9349    1           CALL M$ERR (FPT_ERR);
      295     9350        %EJECT;
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:11   
      296     9351    1   ABORT_PCL_L:
      297     9352    1           IF M$EO$->F$DCB.FCD | M$EO1$->F$DCB.FCD
      298     9353    1            THEN
      299     9354    1              CALL VPD$CLOSE_OUT(1);       /* Close any open output file         */
      300     9355                                                /* with error                         */
      301     9356    1           IF M$ME$->F$DCB.FCD
      302     9357    1            THEN
      303     9358    1              CALL M$CLOSE (FPT_CLOSE_ME);
      304     9359    1           SAVE_ERR_CODE = ERR_CODE;       /* SAVE CODE FOR IBEX                 */
      305     9360    1           CALL VPL$ERR_PROC(0,4,'01'O);
      306     9361        /*E*   ERROR: VPA-00004
      307     9362             MESSAGE: *******************
      308     9363                      **** PCL ABORT ****
      309     9364                      *******************
      310     9365        */
      311     9366    1           IF HIGHEST_SEVERITY ~= -1
      312     9367    1            THEN                           /* STEPCC set requested               */
      313     9368    1              FPT_XXX.V.STEPCC# = HIGHEST_SEVERITY;
      314     9369    1            ELSE                           /* STEPCC not requested               */
      315     9370    1              FPT_XXX.V.STEPCC# = 0;
      316     9371    1           ERR_CODE = SAVE_ERR_CODE;
      317     9372    1           ERR_CODE.SEV = ERR_CODE.SEV +1; /* Bump so IBEX won't repeat the msg. */
      318     9373    1           CALL M$XXX (FPT_XXX);
      319     9374    1   END PCL;

PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:12   
--  Include file information  --

   XUG_ENTRY.:E05TOU  cannot be made into a system file and is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   XU_PERR_C.:E05TOU  is referenced.
   B_MICROPS_C.:E05TOU  is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
   VP_MACRO_C.:E05TOU  is referenced.
   XS_MACRO_C.:E05TOU  is referenced.
   VP_PERR_C.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   VP_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure PCL.

   Procedure PCL requires 506 words for executable code.
   Procedure PCL requires 10 words of local(AUTO) storage.

    No errors detected in file VPA$PCL.:E05TSI    .

PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:13   

 Object Unit name= PCL                                        File name= VPA$PCL.:E05TOU
 UTS= JUL 30 '97 07:18:09.52 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   DCB   even  none     0      0  M$EI
    2   DCB   even  none     0      0  M$EO
    3   DCB   even  none     0      0  M$EO1
    4   DCB   even  none     0      0  M$ME
    5   DCB   even  none     0      0  M$SI
    6   DCB   even  none     0      0  M$READFILE
    7   DCB   even  none     0      0  M$DO
    8   DCB   even  none     0      0  M$STD1
    9   DCB   even  none     0      0  M$SORT1
   10  RoData even  UTS     33     41  PCL
   11   Data  even  none    41     51  PCL
   12   Proc  even  none   506    772  PCL
   13  RoData even  none    29     35  PCL

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
    12      0   yes            yes      Main       0  PCL
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:14   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes          Async      0 VPL$TRAP
         yes           Std       0 VPD$INITIALIZE
         yes           Std       0 VPE$COPY
         yes           Std       8 VPL$ERR_PROC
         yes           Std       0 VPH$LIST
         yes           Std       0 VPH$REVIEWSTD
         yes           Std       0 VPK$PCL_INVOCATION
         yes           Std       0 VPJ$SPE
         yes           Std       1 VPD$CLOSE_OUT
         yes           Std       0 VPD$INIT_COMMANDS
         yes           Std       0 VPK$MODIFY
         yes           Std       2 VPF$SORT_FID
         yes           Std       0 VPK$DELREC
         yes           Std       1 XUG$CLRENABLE
         yes           Std       0 VPI$DELETESTD
         yes           Std       0 VPH$LISTSTD
         yes           Std       1 VPJ$MOUNT
         yes           Std       0 VPK$LINK
         yes           Std       0 VPH$REVIEW
         yes           Std       0 VPJ$SCAN
         yes           Std       0 VPK$STATUS
         yes           Std       0 VPK$READ
 yes     yes           Std       1 XUG$GETCMD
         yes           Std       0 VPE$COPYALL
         yes           Std       0 VPE$COPYSTD
         yes           Std       0 VPI$DELETE
         yes           Std       0 VPJ$SPF
         yes           Std       8 VPL$ERR_SEV_HANDLER
         yes           Std       0 VPJ$SPR
         yes           Std       0 VPJ$WEOF
         yes           Std       0 VPK$TX
                       nStd      0 X66_MAUTO
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:15   
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_MARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  PARSE_IN_BUF                          COMMAND_STUFFED
     PRE_PARSED                            READ_FILE                             PCB
     GETCMD                                ERR_FLG                               ERROR_SEVERITY
     HIGHEST_SEVERITY                      ABORT_STEP                            ABORT_CMD
     ABORT_PCL                             TRAP_PCL                              ERR_CODE
     ERR_SAVE_REL                          BREAK_LOC                             BREAKS
     OLD_BREAKS                            BREAK_MESSAGE_REPORTER                SORTING_INPUT
     CMD_MASK                              SPEC_BUF                              ONE_TIME
     IN_RES                                M$EI                                  M$EI$
     M$EO                                  M$EO$                                 M$EO1
     M$EO1$                                M$ME                                  M$ME$
     M$SI                                  M$SI$                                 M$SI#
     M$READFILE                            M$READFILE#                           M$DO
     M$STD1                                M$SORT1                               B$JIT$
     FPT_PROMPT                            FPT_CLOSE_EI                     r    FPT_CLOSE_READ
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:16   


        1        1        /*M* VPA$PCL Top level for PCL processor                                      */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DTI=1,THI=1  */
        8        8        /* Next available error code = 5   */
        9        9        /*F* NAME: VPA$PCL
       10       10             PURPOSE: To drive the PCL processor.
       11       11             DESCRIPTION: This is the top level for PCL. It gets the command,
       12       12                          parses it, and calls an appropriate procedure to handle
       13       13                          said command.
       14       14             REFERENCE: Architecture file section 17.7 document 256
       15       15        */
       16       16        PCL:    PROC MAIN;

     16 12 000000   000000 700200 xent  PCL          TSX0  ! X66_MAUTO
        12 000001   000012 000000                    ZERO    10,0

       17       17        /*D* NAME: PCL
       18       18             CALL: !PCL
       19       19             ENVIRONMENT: User service processor.
       20       20        */
       21       21        /**/
       22       22        /*  INCLUDE FILES  */
       23       23        /**/
       24       24        %INCLUDE VP_DATA_R;
       25     7011        %INCLUDE XU_PERR_C;
       26     7202        %INCLUDE F$DCB;
       27     7251        %INCLUDE B$JIT;
       28     7541        %INCLUDE B_ERRORS_C;
       29     8668        /**/
       30     8669        /*  BASED  */
       31     8670        /**/
       32     8671        %PARSE$OUT(STCLASS=BASED);
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:17   
       33     8716        /**/
       34     8717        /*  CONSTANT  */
       35     8718        /**/
       36     8719        %FPT_CLOSE(FPTN = FPT_CLOSE_ME,
       37     8720                   DISP = SAVE,
       38     8721                   DCB  = M$ME,
       39     8722                   STCLASS = CONSTANT);
       40     8764    1   DCL PROMPT_1 CHAR(1) CONSTANT INIT('<');
       41     8765    1   DCL LONG_PROMPT CHAR(4) CONSTANT INIT('PCL<');
       42     8766    1   DCL PROMPT_DEL CHAR(2) CONSTANT INIT(' ?');
       43     8767        /**/
       44     8768        /*  ENTRY DCLS  */
       45     8769        /**/
       46     8770        %VP_ENTRIES;
       47     8978        %INCLUDE XUG_ENTRY;
       48     9009        /**/
       49     9010        /*  STATIC DATA  */
       50     9011        /**/
       51     9012        %FPT_WRITE(FPTN = FPT_WRITE_CARET,
       52     9013                   STCLASS = STATIC,
       53     9014                   DCB = M$ME,
       54     9015                   BUF = PARSE_IN_BUF);
       55     9046        %FPT_TRAP(FPTN = FPT_TRAP,
       56     9047                  STCLASS = STATIC,
       57     9048                  ARITHMETIC = VPL$TRAP,
       58     9049                  DIVIDE_CHECK = TRAP,
       59     9050                  OVERFLOW = TRAP,
       60     9051                  ERRORS = VPL$TRAP,
       61     9052                  IPR = TRAP,
       62     9053                  LOCKUP = TRAP,
       63     9054                  MEMORY = TRAP,
       64     9055                  MISSING_PAGE = TRAP,
       65     9056                  MISSING_SEG = TRAP,
       66     9057                  SECURITY_1 = TRAP,
       67     9058                  SECURITY_2 = TRAP,
       68     9059                  PMME = VPL$TRAP,
       69     9060                  PROGRAMMED = VPL$TRAP,
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:18   
       70     9061                  DERAIL = TRAP,
       71     9062                  FAULT_TAG = TRAP);
       72     9085        %FPT_EXIT (FPTN = FPT_EXIT,
       73     9086                   CODE = ERR_CODE,
       74     9087                   STCLASS = STATIC);
       75     9102        %FPT_ERR (FPTN = FPT_ERR,
       76     9103                   CODE = ERR_CODE,
       77     9104                   STCLASS = STATIC);
       78     9119        %FPT_XXX (FPTN = FPT_XXX,
       79     9120                   CODE = ERR_CODE,
       80     9121                   STCLASS = STATIC);
       81     9136    1   DCL I SBIN WORD STATIC;                 /* Handy counter for scratch use      */
       82     9137    1   DCL CODE UBIN WORD;
       83     9138    1   DCL SAVE_ERR_CODE BIT(36);
       84     9139        /**/
       85     9140    1           REMEMBER USER_FATAL_L IN ABORT_PCL;

   9140 12 000002   000631 635000 12                 EAA     USER_FATAL_L
        12 000003   000000 452400 xsym               STP2    ABORT_PCL
        12 000004   000001 755000 xsym               STA     ABORT_PCL+1

       86     9141    1           REMEMBER ABORT_PCL_L IN TRAP_PCL;

   9141 12 000005   000711 635000 12                 EAA     ABORT_PCL_L
        12 000006   000000 452400 xsym               STP2    TRAP_PCL
        12 000007   000001 755000 xsym               STA     TRAP_PCL+1

       87     9142    1           REMEMBER ABORT_PCL_L IN ABORT_STEP;

   9142 12 000010   000711 635000 12                 EAA     ABORT_PCL_L
        12 000011   000000 452400 xsym               STP2    ABORT_STEP
        12 000012   000001 755000 xsym               STA     ABORT_STEP+1

       88     9143    1           REMEMBER ABORT_PCL_L IN ABORT_CMD;

   9143 12 000013   000711 635000 12                 EAA     ABORT_PCL_L
        12 000014   000000 452400 xsym               STP2    ABORT_CMD
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:19   
        12 000015   000001 755000 xsym               STA     ABORT_CMD+1

       89     9144    1           CALL M$TRAP (FPT_TRAP);

   9144 12 000016   000014 630400 11                 EPPR0   FPT_TRAP
        12 000017   010004 713400                    CLIMB   4100
        12 000020   400400 401760                    pmme    nvectors=2

       90     9145    1           ERR_FLG = '0'B;

   9145 12 000021   000000 450000 xsym               STZ     ERR_FLG

       91     9146    1           CALL VPD$INITIALIZE;

   9146 12 000022   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000023   000000 701000 xent               TSX1    VPD$INITIALIZE
        12 000024   000000 011000                    NOP     0

       92     9147    1           REMEMBER NEXT_CMD IN ABORT_CMD;

   9147 12 000025   000604 635000 12                 EAA     NEXT_CMD
        12 000026   000000 452400 xsym               STP2    ABORT_CMD
        12 000027   000001 755000 xsym               STA     ABORT_CMD+1

       93     9148    1           REMEMBER NEXT_CMD IN ABORT_STEP;

   9148 12 000030   000604 635000 12                 EAA     NEXT_CMD
        12 000031   000000 452400 xsym               STP2    ABORT_STEP
        12 000032   000001 755000 xsym               STA     ABORT_STEP+1

       94     9149    1           IF ERR_FLG

   9149 12 000033   000000 234000 xsym               SZN     ERR_FLG
        12 000034   000501 604000 12                 TMI     PARSE_ALT

       95     9150    1            THEN
       96     9151    1              GOTO PARSE_ALT;
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:20   
       97     9152    2   COMMAND_LOOP: DO WHILE('1'B);           /* LOOP FOREVER                       */

   9152 12 000035                       COMMAND_LOOP null
       98     9153    2              REMEMBER NEXT_CMD IN ABORT_STEP;

   9153 12 000035   000604 635000 12                 EAA     NEXT_CMD
        12 000036   000000 452400 xsym               STP2    ABORT_STEP
        12 000037   000001 755000 xsym               STA     ABORT_STEP+1

       99     9154    2              REMEMBER NEXT_CMD IN ABORT_CMD;

   9154 12 000040   000604 635000 12                 EAA     NEXT_CMD
        12 000041   000000 452400 xsym               STP2    ABORT_CMD
        12 000042   000001 755000 xsym               STA     ABORT_CMD+1

      100     9155    2              BREAK_MESSAGE_REPORTER = ENTADDR(NIL);

   9155 12 000043   000002 236000 xsym               LDQ     B_VECTNIL+2
        12 000044   000000 756000 xsym               STQ     BREAK_MESSAGE_REPORTER

      101     9156    2              ERR_FLG = '0'B;

   9156 12 000045   000000 450000 xsym               STZ     ERR_FLG

      102     9157    2              IF PRE_PARSED

   9157 12 000046   000000 234000 xsym               SZN     PRE_PARSED
        12 000047   000052 605000 12                 TPL     s:9161

      103     9158    2               THEN
      104     9159    2                 PRE_PARSED = %NO#;

   9159 12 000050   000000 450000 xsym               STZ     PRE_PARSED
        12 000051   000124 710000 12                 TRA     s:9185

      105     9160    3               ELSE DO;

PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:21   
      106     9161    3                  IF B$JIT.JUNK & %JJ_UDELTA#

   9161 12 000052   000000 470400 xsym               LDP0    B$JIT$
        12 000053   000315 220100                    LDX0    205,,PR0
        12 000054   200000 360003                    ANX0    65536,DU
        12 000055   000061 600000 12                 TZE     s:9165

      107     9162    3                   THEN                    /* We're under DELTA, clarify prompt  */
      108     9163    3                     FPT_PROMPT.PROMPT_ = VECTOR(LONG_PROMPT);

   9163 12 000056   000000 237000 13                 LDAQ    0
        12 000057   000004 757000 xsym               STAQ    FPT_PROMPT+4
        12 000060   000063 710000 12                 TRA     s:9166

      109     9164    3                   ELSE                    /* Not DELTA, short prompt is OK      */
      110     9165    3                     FPT_PROMPT.PROMPT_ = VECTOR(PROMPT_1);

   9165 12 000061   000002 237000 13                 LDAQ    2
        12 000062   000004 757000 xsym               STAQ    FPT_PROMPT+4

      111     9166    3                  CALL M$PROMPT(FPT_PROMPT);

   9166 12 000063   000000 630400 xsym               EPPR0   FPT_PROMPT
        12 000064   160002 713400                    CLIMB   57346
        12 000065   401000 401760                    pmme    nvectors=3

      112     9167    3                  GETCMD.PROMPT_ = FPT_PROMPT.PROMPT_;

   9167 12 000066   000004 237000 xsym               LDAQ    FPT_PROMPT+4
        12 000067   000025 755000 xsym               STA     GETCMD+21
        12 000070   000026 756000 xsym               STQ     GETCMD+22

      113     9168    3                  IF READ_FILE

   9168 12 000071   000000 234000 xsym               SZN     READ_FILE
        12 000072   000076 605000 12                 TPL     s:9172

PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:22   
      114     9169    3                   THEN
      115     9170    3                     GETCMD.INDCB# = M$READFILE#;

   9170 12 000073   000000 235000 xsym               LDA     M$READFILE#
        12 000074   000012 755000 xsym               STA     GETCMD+10
        12 000075   000100 710000 12                 TRA     s:9173

      116     9171    3                   ELSE
      117     9172    3                     GETCMD.INDCB# = M$SI#;

   9172 12 000076   000000 235000 xsym               LDA     M$SI#
        12 000077   000012 755000 xsym               STA     GETCMD+10

      118     9173    3                  CALL XUG$CLRENABLE (GETCMD);

   9173 12 000100   000004 630400 13                 EPPR0   4
        12 000101   000017 631400 xsym               EPPR1   B_VECTNIL+15
        12 000102   000000 701000 xent               TSX1    XUG$CLRENABLE
        12 000103   000000 011000                    NOP     0

      119     9174    3                  IF COMMAND_STUFFED

   9174 12 000104   000000 234000 xsym               SZN     COMMAND_STUFFED
        12 000105   000114 605000 12                 TPL     s:9180

      120     9175    4                   THEN DO;

      121     9176    4                      COMMAND_STUFFED = %NO#;

   9176 12 000106   000000 450000 xsym               STZ     COMMAND_STUFFED

      122     9177    4                      CALL XUG$GETCMD (GETCMD) ALTRET (PARSE_ALT);

   9177 12 000107   000004 630400 13                 EPPR0   4
        12 000110   000017 631400 xsym               EPPR1   B_VECTNIL+15
        12 000111   000000 701000 xent               TSX1    XUG$GETCMD
        12 000112   000501 702000 12                 TSX2    PARSE_ALT
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:23   

      123     9178    4                      END;

   9178 12 000113   000122 710000 12                 TRA     s:9183

      124     9179    4                   ELSE DO;

      125     9180    4                      GETCMD.TEXT_ = VECTOR(NIL);

   9180 12 000114   000006 237000 13                 LDAQ    6
        12 000115   000034 757000 xsym               STAQ    GETCMD+28

      126     9181    4                      CALL XUG$GETCMD (GETCMD) ALTRET (PARSE_ALT);

   9181 12 000116   000004 630400 13                 EPPR0   4
        12 000117   000017 631400 xsym               EPPR1   B_VECTNIL+15
        12 000120   000000 701000 xent               TSX1    XUG$GETCMD
        12 000121   000501 702000 12                 TSX2    PARSE_ALT

      127     9182    4                      END;

      128     9183    3                  PCB.OUT$ = GETCMD.OUT$;

   9183 12 000122   000001 236000 xsym               LDQ     GETCMD+1
        12 000123   000003 756000 xsym               STQ     PCB+3

      129     9184    3                  END;

      130     9185    2              OLD_BREAKS = 0;

   9185 12 000124   000000 450000 xsym               STZ     OLD_BREAKS

      131     9186    2              BREAKS = 0;

   9186 12 000125   000000 450000 xsym               STZ     BREAKS

      132     9187    2              SORTING_INPUT = '0'B;
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:24   

   9187 12 000126   000000 450000 xsym               STZ     SORTING_INPUT

      133     9188    2              CMD_MASK = '0'B;

   9188 12 000127   000000 450000 xsym               STZ     CMD_MASK
        12 000130   000001 450000 xsym               STZ     CMD_MASK+1

      134     9189    2              CMD_MASK(PCB.OUT$->OUT$BLK.CODE) = '1'B;

   9189 12 000131   000003 470400 xsym               LDP0    PCB+3
        12 000132   000000 236100                    LDQ     0,,PR0
        12 000133   777777 376007                    ANQ     -1,DL
        12 000134   003006 060400                    CSL     bolr='003'O
        12 000135   000030 000001 xsym               BDSC    B_VECTNIL+24             by=0,bit=0,n=1
        12 000136   000000 000001 xsym               BDSC    CMD_MASK,Q               by=0,bit=0,n=1

      135     9190    2              CALL VPD$INIT_COMMANDS;

   9190 12 000137   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000140   000000 701000 xent               TSX1    VPD$INIT_COMMANDS
        12 000141   000000 011000                    NOP     0

      136     9191        %EJECT;
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:25   
      137     9192    2              CODE = PCB.OUT$ -> OUT$BLK.CODE;

   9192 12 000142   000003 470400 xsym               LDP0    PCB+3
        12 000143   000000 236100                    LDQ     0,,PR0
        12 000144   777777 376007                    ANQ     -1,DL
        12 000145   200003 756100                    STQ     CODE,,AUTO

      138     9193    3   DO_CMD:    DO CASE(CODE);

   9193 12 000146   200003 235100       DO_CMD       LDA     CODE,,AUTO
        12 000147   000047 115007                    CMPA    39,DL
        12 000150   000152 602005 12                 TNC     DO_CMD+4,AL
        12 000151   000500 710000 12                 TRA     s:9278
        12 000152   000500 710000 12                 TRA     s:9278
        12 000153   000221 710000 12                 TRA     s:9195
        12 000154   000225 710000 12                 TRA     s:9197
        12 000155   000231 710000 12                 TRA     s:9199
        12 000156   000235 710000 12                 TRA     s:9201
        12 000157   000300 710000 12                 TRA     s:9216
        12 000160   000500 710000 12                 TRA     s:9278
        12 000161   000311 710000 12                 TRA     s:9222
        12 000162   000315 710000 12                 TRA     s:9224
        12 000163   000321 710000 12                 TRA     s:9226
        12 000164   000325 710000 12                 TRA     s:9228
        12 000165   000331 710000 12                 TRA     s:9230
        12 000166   000341 710000 12                 TRA     s:9234
        12 000167   000345 710000 12                 TRA     s:9236
        12 000170   000352 710000 12                 TRA     s:9238
        12 000171   000356 710000 12                 TRA     s:9240
        12 000172   000362 710000 12                 TRA     s:9242
        12 000173   000366 710000 12                 TRA     s:9244
        12 000174   000373 710000 12                 TRA     s:9246
        12 000175   000405 710000 12                 TRA     s:9250
        12 000176   000411 710000 12                 TRA     s:9252
        12 000177   000500 710000 12                 TRA     s:9278
        12 000200   000415 710000 12                 TRA     s:9254
        12 000201   000500 710000 12                 TRA     s:9278
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:26   
        12 000202   000423 710000 12                 TRA     END_CMD
        12 000203   000335 710000 12                 TRA     s:9232
        12 000204   000500 710000 12                 TRA     s:9278
        12 000205   000500 710000 12                 TRA     s:9278
        12 000206   000455 710000 12                 TRA     s:9267
        12 000207   000400 710000 12                 TRA     s:9248
        12 000210   000500 710000 12                 TRA     s:9278
        12 000211   000500 710000 12                 TRA     s:9278
        12 000212   000500 710000 12                 TRA     s:9278
        12 000213   000500 710000 12                 TRA     s:9278
        12 000214   000461 710000 12                 TRA     s:9269
        12 000215   000465 710000 12                 TRA     s:9271
        12 000216   000500 710000 12                 TRA     s:9278
        12 000217   000471 710000 12                 TRA     s:9273
        12 000220   000475 710000 12                 TRA     s:9275

      139     9194    3               CASE(1);

      140     9195    3                 CALL VPE$COPY;

   9195 12 000221   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000222   000000 701000 xent               TSX1    VPE$COPY
        12 000223   000000 011000                    NOP     0
        12 000224   000500 710000 12                 TRA     s:9278

      141     9196    3               CASE(2);

      142     9197    3                 CALL VPE$COPYALL;

   9197 12 000225   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000226   000000 701000 xent               TSX1    VPE$COPYALL
        12 000227   000000 011000                    NOP     0
        12 000230   000500 710000 12                 TRA     s:9278

      143     9198    3               CASE(3);

      144     9199    3                 CALL VPE$COPYSTD;
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:27   

   9199 12 000231   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000232   000000 701000 xent               TSX1    VPE$COPYSTD
        12 000233   000000 011000                    NOP     0
        12 000234   000500 710000 12                 TRA     s:9278

      145     9200    3               CASE(4);                    /* SEVERITY                           */

      146     9201    4                 DO I = 0 TO PCB.OUT$ -> OUT$BLK.NSUBLKS -1;

   9201 12 000235   000050 450000 11                 STZ     I
        12 000236   000272 710000 12                 TRA     s:9214+1

      147     9202    5                    DO CASE(PCB.OUT$ -> OUT$BLK.SUBLK$(I) -> OUT$BLK.CODE);

   9202 12 000237   000003 470400 xsym               LDP0    PCB+3
        12 000240   000050 720000 11                 LXL0    I
        12 000241   000003 471510                    LDP1    3,X0,PR0
        12 000242   100000 721100                    LXL1    0,,PR1
        12 000243   000006 101003                    CMPX1   6,DU
        12 000244   000246 602011 12                 TNC     s:9202+7,X1
        12 000245   000271 710000 12                 TRA     s:9214
        12 000246   000271 710000 12                 TRA     s:9214
        12 000247   000254 710000 12                 TRA     s:9204
        12 000250   000257 710000 12                 TRA     s:9206
        12 000251   000262 710000 12                 TRA     s:9208
        12 000252   000265 710000 12                 TRA     s:9210
        12 000253   000270 710000 12                 TRA     s:9212

      148     9203    5                     CASE(1);              /* ABORT                              */

      149     9204    5                       ERROR_SEVERITY = 1;

   9204 12 000254   000001 235007                    LDA     1,DL
        12 000255   000000 755000 xsym               STA     ERROR_SEVERITY
        12 000256   000271 710000 12                 TRA     s:9214

PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:28   
      150     9205    5                     CASE(2);              /* CONTINUE                           */

      151     9206    5                       ERROR_SEVERITY = 2;

   9206 12 000257   000002 235007                    LDA     2,DL
        12 000260   000000 755000 xsym               STA     ERROR_SEVERITY
        12 000261   000271 710000 12                 TRA     s:9214

      152     9207    5                     CASE(3);              /* ERROR                              */

      153     9208    5                       ERROR_SEVERITY = 3;

   9208 12 000262   000003 235007                    LDA     3,DL
        12 000263   000000 755000 xsym               STA     ERROR_SEVERITY
        12 000264   000271 710000 12                 TRA     s:9214

      154     9209    5                     CASE(4);              /* NSTEPCC                            */

      155     9210    5                       HIGHEST_SEVERITY = -1;

   9210 12 000265   000001 335007                    LCA     1,DL
        12 000266   000000 755000 xsym               STA     HIGHEST_SEVERITY
        12 000267   000271 710000 12                 TRA     s:9214

      156     9211    5                     CASE(5);              /* STEPCC                             */

      157     9212    5                       HIGHEST_SEVERITY = 0;

   9212 12 000270   000000 450000 xsym               STZ     HIGHEST_SEVERITY

      158     9213    5                     END;                  /* END DO CASE                        */

      159     9214    4                    END;                   /* END DO I                           */

   9214 12 000271   000050 054000 11                 AOS     I
        12 000272   000003 470400 xsym               LDP0    PCB+3
        12 000273   000001 236100                    LDQ     1,,PR0
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:29   
        12 000274   000022 772000                    QRL     18
        12 000275   000050 116000 11                 CMPQ    I
        12 000276   000237 605400 12                 TPNZ    s:9202
        12 000277   000500 710000 12                 TRA     s:9278

      160     9215    3               CASE(5);                    /* DELETE                             */

      161     9216    3                 FPT_PROMPT.PROMPT_ = VECTOR(PROMPT_DEL);

   9216 12 000300   000010 237000 13                 LDAQ    8
        12 000301   000004 757000 xsym               STAQ    FPT_PROMPT+4

      162     9217    3                 CALL M$PROMPT(FPT_PROMPT);

   9217 12 000302   000000 630400 xsym               EPPR0   FPT_PROMPT
        12 000303   160002 713400                    CLIMB   57346
        12 000304   401000 401760                    pmme    nvectors=3

      163     9218    3                 CALL VPI$DELETE;

   9218 12 000305   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000306   000000 701000 xent               TSX1    VPI$DELETE
        12 000307   000000 011000                    NOP     0
        12 000310   000500 710000 12                 TRA     s:9278

      164     9219    3               CASE(6);

      165     9220    3                 ;                         /* NULL INPUT                         */
      166     9221    3               CASE(7);

      167     9222    3                 CALL VPI$DELETESTD;

   9222 12 000311   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000312   000000 701000 xent               TSX1    VPI$DELETESTD
        12 000313   000000 011000                    NOP     0
        12 000314   000500 710000 12                 TRA     s:9278

PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:30   
      168     9223    3               CASE(8);                    /* DELREC                             */

      169     9224    3                 CALL VPK$DELREC;

   9224 12 000315   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000316   000000 701000 xent               TSX1    VPK$DELREC
        12 000317   000000 011000                    NOP     0
        12 000320   000500 710000 12                 TRA     s:9278

      170     9225    3               CASE(9);

      171     9226    3                 CALL VPH$LIST;

   9226 12 000321   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000322   000000 701000 xent               TSX1    VPH$LIST
        12 000323   000000 011000                    NOP     0
        12 000324   000500 710000 12                 TRA     s:9278

      172     9227    3               CASE(10);

      173     9228    3                 CALL VPH$LISTSTD;

   9228 12 000325   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000326   000000 701000 xent               TSX1    VPH$LISTSTD
        12 000327   000000 011000                    NOP     0
        12 000330   000500 710000 12                 TRA     s:9278

      174     9229    3               CASE(11);

      175     9230    3                 CALL VPH$REVIEW;

   9230 12 000331   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000332   000000 701000 xent               TSX1    VPH$REVIEW
        12 000333   000000 011000                    NOP     0
        12 000334   000500 710000 12                 TRA     s:9278

      176     9231    3               CASE(25);
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:31   

      177     9232    3                 CALL VPH$REVIEWSTD;

   9232 12 000335   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000336   000000 701000 xent               TSX1    VPH$REVIEWSTD
        12 000337   000000 011000                    NOP     0
        12 000340   000500 710000 12                 TRA     s:9278

      178     9233    3               CASE(12);

      179     9234    3                 CALL VPK$MODIFY;

   9234 12 000341   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000342   000000 701000 xent               TSX1    VPK$MODIFY
        12 000343   000000 011000                    NOP     0
        12 000344   000500 710000 12                 TRA     s:9278

      180     9235    3               CASE(13);

      181     9236    3                 CALL VPJ$MOUNT(0);        /* MOUNT                              */

   9236 12 000345   000012 630400 13                 EPPR0   10
        12 000346   000017 631400 xsym               EPPR1   B_VECTNIL+15
        12 000347   000000 701000 xent               TSX1    VPJ$MOUNT
        12 000350   000000 011000                    NOP     0
        12 000351   000500 710000 12                 TRA     s:9278

      182     9237    3               CASE(14);

      183     9238    3                 CALL VPJ$SPF;

   9238 12 000352   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000353   000000 701000 xent               TSX1    VPJ$SPF
        12 000354   000000 011000                    NOP     0
        12 000355   000500 710000 12                 TRA     s:9278

      184     9239    3               CASE(15);
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:32   

      185     9240    3                 CALL VPJ$SPR;

   9240 12 000356   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000357   000000 701000 xent               TSX1    VPJ$SPR
        12 000360   000000 011000                    NOP     0
        12 000361   000500 710000 12                 TRA     s:9278

      186     9241    3               CASE(16);

      187     9242    3                 CALL VPJ$SPE;

   9242 12 000362   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000363   000000 701000 xent               TSX1    VPJ$SPE
        12 000364   000000 011000                    NOP     0
        12 000365   000500 710000 12                 TRA     s:9278

      188     9243    3               CASE(17);

      189     9244    3                 CALL VPJ$MOUNT(1);        /* REWIND                             */

   9244 12 000366   000013 630400 13                 EPPR0   11
        12 000367   000017 631400 xsym               EPPR1   B_VECTNIL+15
        12 000370   000000 701000 xent               TSX1    VPJ$MOUNT
        12 000371   000000 011000                    NOP     0
        12 000372   000500 710000 12                 TRA     s:9278

      190     9245    3               CASE(18);

      191     9246    3                 CALL VPJ$MOUNT(2);        /* REMOVE                             */

   9246 12 000373   000014 630400 13                 EPPR0   12
        12 000374   000017 631400 xsym               EPPR1   B_VECTNIL+15
        12 000375   000000 701000 xent               TSX1    VPJ$MOUNT
        12 000376   000000 011000                    NOP     0
        12 000377   000500 710000 12                 TRA     s:9278

PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:33   
      192     9247    3               CASE(29);

      193     9248    3                 CALL VPJ$MOUNT(3);        /* RELEASE                            */

   9248 12 000400   000015 630400 13                 EPPR0   13
        12 000401   000017 631400 xsym               EPPR1   B_VECTNIL+15
        12 000402   000000 701000 xent               TSX1    VPJ$MOUNT
        12 000403   000000 011000                    NOP     0
        12 000404   000500 710000 12                 TRA     s:9278

      194     9249    3               CASE(19);

      195     9250    3                 CALL VPJ$WEOF;

   9250 12 000405   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000406   000000 701000 xent               TSX1    VPJ$WEOF
        12 000407   000000 011000                    NOP     0
        12 000410   000500 710000 12                 TRA     s:9278

      196     9251    3               CASE(20);

      197     9252    3                 CALL VPK$TX;

   9252 12 000411   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000412   000000 701000 xent               TSX1    VPK$TX
        12 000413   000000 011000                    NOP     0
        12 000414   000500 710000 12                 TRA     s:9278

      198     9253    3               CASE(22);                   /* ERRORS                             */

      199     9254    3                 ERR_SAVE_REL = PCB.OUT$->OUT$BLK.SUBLK$(0)->OUT$BLK.CODE;

   9254 12 000415   000003 470400 xsym               LDP0    PCB+3
        12 000416   000003 471500                    LDP1    3,,PR0
        12 000417   100000 236100                    LDQ     0,,PR1
        12 000420   777777 376007                    ANQ     -1,DL
        12 000421   000000 756000 xsym               STQ     ERR_SAVE_REL
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:34   
        12 000422   000500 710000 12                 TRA     s:9278

      200     9255    3               CASE(24);                   /* END                                */

      201     9256    3   END_CMD:      IF M$ME$->F$DCB.FCD

   9256 12 000423   000000 470400 xsym  END_CMD      LDP0    M$ME$
        12 000424   000031 236100                    LDQ     25,,PR0
        12 000425   020000 316007                    CANQ    8192,DL
        12 000426   000432 600000 12                 TZE     s:9259

      202     9257    3                  THEN
      203     9258    3                    CALL M$CLOSE(FPT_CLOSE_ME);

   9258 12 000427   000000 630400 10                 EPPR0   FPT_CLOSE_ME
        12 000430   050001 713400                    CLIMB   close
        12 000431   406000 401760                    pmme    nvectors=13

      204     9259    3                 IF HIGHEST_SEVERITY ~= -1

   9259 12 000432   000000 235000 xsym               LDA     HIGHEST_SEVERITY
        12 000433   000027 115000 xsym               CMPA    B_VECTNIL+23
        12 000434   000441 600000 12                 TZE     s:9263

      205     9260    3                  THEN                     /* STEPCC set requested               */
      206     9261    3                    FPT_EXIT.V.STEPCC# = HIGHEST_SEVERITY;

   9261 12 000435   000000 236000 xsym               LDQ     HIGHEST_SEVERITY
        12 000436   000033 736000                    QLS     27
        12 000437   000032 552040 11                 STBQ    FPT_EXIT+4,'40'O
        12 000440   000443 710000 12                 TRA     s:9264

      207     9262    3                  ELSE                     /* STEPCC not requested               */
      208     9263    3                    FPT_EXIT.V.STEPCC# = 0;

   9263 12 000441   000000 236003                    LDQ     0,DU
        12 000442   000032 552040 11                 STBQ    FPT_EXIT+4,'40'O
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:35   

      209     9264    3                 ERR_CODE.SEV = ERR_CODE.SEV +1; /* Bump so IBEX won't repeat    */

   9264 12 000443   000000 236000 xsym               LDQ     ERR_CODE
        12 000444   000007 376007                    ANQ     7,DL
        12 000445   000001 036007                    ADLQ    1,DL
        12 000446   000000 676000 xsym               ERQ     ERR_CODE
        12 000447   000007 376007                    ANQ     7,DL
        12 000450   000000 656000 xsym               ERSQ    ERR_CODE

      210     9265    3                 CALL M$EXIT (FPT_EXIT);

   9265 12 000451   000026 630400 11                 EPPR0   FPT_EXIT
        12 000452   000001 713400                    CLIMB   exit
        12 000453   400400 401760                    pmme    nvectors=2
        12 000454   000500 710000 12                 TRA     s:9278

      211     9266    3               CASE(28);                   /* SCAN                               */

      212     9267    3                 CALL VPJ$SCAN;

   9267 12 000455   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000456   000000 701000 xent               TSX1    VPJ$SCAN
        12 000457   000000 011000                    NOP     0
        12 000460   000500 710000 12                 TRA     s:9278

      213     9268    3               CASE(34);                   /* STATUS                             */

      214     9269    3                 CALL VPK$STATUS;

   9269 12 000461   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000462   000000 701000 xent               TSX1    VPK$STATUS
        12 000463   000000 011000                    NOP     0
        12 000464   000500 710000 12                 TRA     s:9278

      215     9270    3               CASE(35);                   /* READ                               */

PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:36   
      216     9271    3                 CALL VPK$READ;

   9271 12 000465   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000466   000000 701000 xent               TSX1    VPK$READ
        12 000467   000000 011000                    NOP     0
        12 000470   000500 710000 12                 TRA     s:9278

      217     9272    3               CASE(37);                   /* LINK                               */

      218     9273    3                 CALL VPK$LINK;

   9273 12 000471   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000472   000000 701000 xent               TSX1    VPK$LINK
        12 000473   000000 011000                    NOP     0
        12 000474   000500 710000 12                 TRA     s:9278

      219     9274    3               CASE(38);                   /* 'PCL' invocation                   */

      220     9275    3                 CALL VPK$PCL_INVOCATION;

   9275 12 000475   000002 631400 xsym               EPPR1   B_VECTNIL+2
        12 000476   000000 701000 xent               TSX1    VPK$PCL_INVOCATION
        12 000477   000000 011000                    NOP     0

      221     9276    3               END;                        /* END CASE                           */

      222     9277        %EJECT;
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:37   
      223     9278    3              DO WHILE('0'B);

   9278 12 000500   000604 710000 12                 TRA     NEXT_CMD

   9274 12 000501                       PARSE_ALT    null
      224     9279    3   PARSE_ALT:    ;                         /* Let's hope ECHO was on             */
      225     9280    3                 PCB.ERROR = GETCMD.ERR#;

   9280 12 000501   000001 236000 xsym               LDQ     GETCMD+1
        12 000502   000006 756000 xsym               STQ     PCB+6

      226     9281    3                 IF PCB.ERROR.MON

   9281 12 000503   400000 316007                    CANQ    -131072,DL
        12 000504   000555 600000 12                 TZE     s:9305

      227     9282    4                  THEN DO;

      228     9283    4                     IF PCB.ERROR.CODE = %E$EOF

   9283 12 000505   000006 236000 xsym               LDQ     PCB+6
        12 000506   377770 376007                    ANQ     131064,DL
        12 000507   000060 116007                    CMPQ    48,DL
        12 000510   000525 601000 12                 TNZ     s:9297

      229     9284    5                      THEN DO;

      230     9285    5                         IF ONE_TIME = 0 AND READ_FILE

   9285 12 000511   000000 235000 xsym               LDA     ONE_TIME
        12 000512   000522 601000 12                 TNZ     s:9292
        12 000513   000000 234000 xsym               SZN     READ_FILE
        12 000514   000522 605000 12                 TPL     s:9292

      231     9286    6                          THEN DO;

      232     9287    6                             CALL M$CLOSE(FPT_CLOSE_READ); /* Quit READing there */
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:38   

   9287 12 000515   000000 630400 xsym               EPPR0   FPT_CLOSE_READ
        12 000516   050001 713400                    CLIMB   close
        12 000517   406000 401760                    pmme    nvectors=13

      233     9288    6                             READ_FILE = '0'B; /* READ command no longer active  */

   9288 12 000520   000000 450000 xsym               STZ     READ_FILE

      234     9289    6                             GOTO COMMAND_LOOP;

   9289 12 000521   000035 710000 12                 TRA     COMMAND_LOOP

      235     9290    6                             END;
      236     9291    6                          ELSE DO;

      237     9292    6                             CODE = 24;    /* Fake up an END command             */

   9292 12 000522   000030 235007                    LDA     24,DL
        12 000523   200003 755100                    STA     CODE,,AUTO

      238     9293    6                             GOTO DO_CMD;  /* Terminate PCL                      */

   9293 12 000524   000146 710000 12                 TRA     DO_CMD

      239     9294    6                             END;
      240     9295    5                         END;
      241     9296    5                      ELSE DO;

      242     9297    5                         IF M$SI$ -> F$DCB.DDEV.IC /* Input came from a terminal */

   9297 12 000525   000000 470400 xsym               LDP0    M$SI$
        12 000526   000004 236100                    LDQ     4,,PR0
        12 000527   100000 316007                    CANQ    32768,DL
        12 000530   000543 600000 12                 TZE     s:9301

      243     9298    5                          THEN
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:39   
      244     9299    5                            CALL VPL$ERR_PROC (3,0,,GETCMD.ERR#); /* Abort command */

   9299 12 000531   000016 236000 13                 LDQ     14
        12 000532   000001 235000 xsym               LDA     B_VECTNIL+1
        12 000533   200010 757100                    STAQ    SAVE_ERR_CODE+4,,AUTO
        12 000534   000020 237000 13                 LDAQ    16
        12 000535   200006 757100                    STAQ    SAVE_ERR_CODE+2,,AUTO
        12 000536   200006 630500                    EPPR0   SAVE_ERR_CODE+2,,AUTO
        12 000537   000022 631400 xsym               EPPR1   B_VECTNIL+18
        12 000540   000000 701000 xent               TSX1    VPL$ERR_PROC
        12 000541   000000 011000                    NOP     0
        12 000542   000604 710000 12                 TRA     NEXT_CMD

      245     9300    5                          ELSE
      246     9301    5                            CALL VPL$ERR_PROC (4,0,,GETCMD.ERR#); /* Report and die */

   9301 12 000543   000016 236000 13                 LDQ     14
        12 000544   000001 235000 xsym               LDA     B_VECTNIL+1
        12 000545   200010 757100                    STAQ    SAVE_ERR_CODE+4,,AUTO
        12 000546   000022 237000 13                 LDAQ    18
        12 000547   200006 757100                    STAQ    SAVE_ERR_CODE+2,,AUTO
        12 000550   200006 630500                    EPPR0   SAVE_ERR_CODE+2,,AUTO
        12 000551   000022 631400 xsym               EPPR1   B_VECTNIL+18
        12 000552   000000 701000 xent               TSX1    VPL$ERR_PROC
        12 000553   000000 011000                    NOP     0

      247     9302    5                         END;

      248     9303    4                     END;

   9303 12 000554   000604 710000 12                 TRA     NEXT_CMD

      249     9304    3                  ELSE
      250     9305    3                    IF PCB.ERROR.CODE = %E$SYNERR

   9305 12 000555   000006 236000 xsym               LDQ     PCB+6
        12 000556   377770 376007                    ANQ     131064,DL
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:40   
        12 000557   000010 116007                    CMPQ    8,DL
        12 000560   000573 601000 12                 TNZ     s:9313
        12 000561   000034 237000 xsym               LDAQ    GETCMD+28
        12 000562   000006 117000 13                 CMPAQ   6
        12 000563   000573 600000 12                 TZE     s:9313

      251     9306    3                      AND GETCMD.TEXT_ ~= VECTOR(NIL)
      252     9307    3                     THEN
      253     9308    4                     DO;

      254     9309    4                        ERR_CODE = PCB.ERROR;

   9309 12 000564   000006 236000 xsym               LDQ     PCB+6
        12 000565   000000 756000 xsym               STQ     ERR_CODE

      255     9310    4                        CALL VPL$ERR_SEV_HANDLER(1);

   9310 12 000566   000013 630400 13                 EPPR0   11
        12 000567   000017 631400 xsym               EPPR1   B_VECTNIL+15
        12 000570   000000 701000 xent               TSX1    VPL$ERR_SEV_HANDLER
        12 000571   000000 011000                    NOP     0

      256     9311    4                        END;

   9311 12 000572   000604 710000 12                 TRA     NEXT_CMD

      257     9312    3                     ELSE
      258     9313    3                       CALL VPL$ERR_PROC(3,0,,GETCMD.ERR#);

   9313 12 000573   000016 236000 13                 LDQ     14
        12 000574   000001 235000 xsym               LDA     B_VECTNIL+1
        12 000575   200010 757100                    STAQ    SAVE_ERR_CODE+4,,AUTO
        12 000576   000020 237000 13                 LDAQ    16
        12 000577   200006 757100                    STAQ    SAVE_ERR_CODE+2,,AUTO
        12 000600   200006 630500                    EPPR0   SAVE_ERR_CODE+2,,AUTO
        12 000601   000022 631400 xsym               EPPR1   B_VECTNIL+18
        12 000602   000000 701000 xent               TSX1    VPL$ERR_PROC
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:41   
        12 000603   000000 011000                    NOP     0

      259     9314    3                 END;

      260     9315    2   NEXT_CMD:
      261     9316    2              CALL VPF$SORT_FID (5);       /* close the sort file, if open       */

   9316 12 000604   000024 630400 13    NEXT_CMD     EPPR0   20
        12 000605   000017 631400 xsym               EPPR1   B_VECTNIL+15
        12 000606   000000 701000 xent               TSX1    VPF$SORT_FID
        12 000607   000000 011000                    NOP     0

      262     9317    2              IF M$EI$ -> F$DCB.FCD

   9317 12 000610   000000 470400 xsym               LDP0    M$EI$
        12 000611   000031 236100                    LDQ     25,,PR0
        12 000612   020000 316007                    CANQ    8192,DL
        12 000613   000623 600000 12                 TZE     s:9324

      263     9318    3               THEN DO;

      264     9319    3                  FPT_CLOSE_EI.V.NOMARKS#='1'B;

   9319 12 000614   000100 236003                    LDQ     64,DU
        12 000615   000034 256000 xsym               ORSQ    FPT_CLOSE_EI+28

      265     9320    3                  CALL M$CLOSE (FPT_CLOSE_EI); /* close M$EI if left open by break */

   9320 12 000616   000000 630400 xsym               EPPR0   FPT_CLOSE_EI
        12 000617   050001 713400                    CLIMB   close
        12 000620   406000 401760                    pmme    nvectors=13

      266     9321    3                  FPT_CLOSE_EI.V.NOMARKS#='0'B;

   9321 12 000621   000025 236000 13                 LDQ     21
        12 000622   000034 356000 xsym               ANSQ    FPT_CLOSE_EI+28

PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:42   
      267     9322    3                  END;

      268     9323
      269     9324    2              IF ONE_TIME = 1 AND NOT READ_FILE

   9324 12 000623   000000 235000 xsym               LDA     ONE_TIME
        12 000624   000001 115007                    CMPA    1,DL
        12 000625   000630 601000 12                 TNZ     s:9327
        12 000626   000000 234000 xsym               SZN     READ_FILE
        12 000627   000423 605000 12                 TPL     END_CMD

      270     9325    2               THEN
      271     9326    2                 GOTO END_CMD;
      272     9327    2              END;

   9327 12 000630   000035 710000 12                 TRA     COMMAND_LOOP

      273     9328        %EJECT;
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:43   
      274     9329    1   USER_FATAL_L:
      275     9330    1           IF M$EO$->F$DCB.FCD | M$EO1$->F$DCB.FCD

   9330 12 000631   000000 470400 xsym  USER_FATAL_L LDP0    M$EO1$
        12 000632   000031 236100                    LDQ     25,,PR0
        12 000633   000026 736000                    QLS     22
        12 000634   400000 376003                    ANQ     -131072,DU
        12 000635   200006 756100                    STQ     SAVE_ERR_CODE+2,,AUTO
        12 000636   000000 471400 xsym               LDP1    M$EO$
        12 000637   100031 236100                    LDQ     25,,PR1
        12 000640   000026 736000                    QLS     22
        12 000641   400000 376003                    ANQ     -131072,DU
        12 000642   200006 276100                    ORQ     SAVE_ERR_CODE+2,,AUTO
        12 000643   000650 600000 12                 TZE     s:9334

      276     9331    1            THEN
      277     9332    1              CALL VPD$CLOSE_OUT(1);       /* Close any open output file         */

   9332 12 000644   000013 630400 13                 EPPR0   11
        12 000645   000017 631400 xsym               EPPR1   B_VECTNIL+15
        12 000646   000000 701000 xent               TSX1    VPD$CLOSE_OUT
        12 000647   000000 011000                    NOP     0

      278     9333                                                /* with error                         */
      279     9334    1           IF M$ME$->F$DCB.FCD

   9334 12 000650   000000 470400 xsym               LDP0    M$ME$
        12 000651   000031 236100                    LDQ     25,,PR0
        12 000652   020000 316007                    CANQ    8192,DL
        12 000653   000657 600000 12                 TZE     s:9337

      280     9335    1            THEN
      281     9336    1              CALL M$CLOSE(FPT_CLOSE_ME);

   9336 12 000654   000000 630400 10                 EPPR0   FPT_CLOSE_ME
        12 000655   050001 713400                    CLIMB   close
        12 000656   406000 401760                    pmme    nvectors=13
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:44   

      282     9337    1           SAVE_ERR_CODE = ERR_CODE;       /* Save code so IBEX will know        */

   9337 12 000657   000000 236000 xsym               LDQ     ERR_CODE
        12 000660   200004 756100                    STQ     SAVE_ERR_CODE,,AUTO

      283     9338    1           CALL VPL$ERR_PROC(0,1,'01'O);

   9338 12 000661   000027 630400 13                 EPPR0   23
        12 000662   000021 631400 xsym               EPPR1   B_VECTNIL+17
        12 000663   000000 701000 xent               TSX1    VPL$ERR_PROC
        12 000664   000000 011000                    NOP     0

      284     9339        /*E*   ERROR: VPA-00001
      285     9340             MESSAGE: FATAL USER ERROR
      286     9341        */
      287     9342    1           IF HIGHEST_SEVERITY ~= -1

   9342 12 000665   000000 235000 xsym               LDA     HIGHEST_SEVERITY
        12 000666   000027 115000 xsym               CMPA    B_VECTNIL+23
        12 000667   000674 600000 12                 TZE     s:9346

      288     9343    1            THEN                           /* STEPCC set requested               */
      289     9344    1              FPT_ERR.V.STEPCC# = HIGHEST_SEVERITY;

   9344 12 000670   000000 236000 xsym               LDQ     HIGHEST_SEVERITY
        12 000671   000033 736000                    QLS     27
        12 000672   000040 552040 11                 STBQ    FPT_ERR+4,'40'O
        12 000673   000676 710000 12                 TRA     s:9347

      290     9345    1            ELSE                           /* STEPCC not requested               */
      291     9346    1              FPT_ERR.V.STEPCC# = 0;

   9346 12 000674   000000 236003                    LDQ     0,DU
        12 000675   000040 552040 11                 STBQ    FPT_ERR+4,'40'O

      292     9347    1           ERR_CODE = SAVE_ERR_CODE;
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:45   

   9347 12 000676   200004 236100                    LDQ     SAVE_ERR_CODE,,AUTO
        12 000677   000000 756000 xsym               STQ     ERR_CODE

      293     9348    1           ERR_CODE.SEV = ERR_CODE.SEV +1; /* Bump so IBEX won't repeat the msg. */

   9348 12 000700   000000 236000 xsym               LDQ     ERR_CODE
        12 000701   000007 376007                    ANQ     7,DL
        12 000702   000001 036007                    ADLQ    1,DL
        12 000703   000000 676000 xsym               ERQ     ERR_CODE
        12 000704   000007 376007                    ANQ     7,DL
        12 000705   000000 656000 xsym               ERSQ    ERR_CODE

      294     9349    1           CALL M$ERR (FPT_ERR);

   9349 12 000706   000034 630400 11                 EPPR0   FPT_ERR
        12 000707   000002 713400                    CLIMB   err
        12 000710   400400 401760                    pmme    nvectors=2

      295     9350        %EJECT;
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:46   
      296     9351    1   ABORT_PCL_L:
      297     9352    1           IF M$EO$->F$DCB.FCD | M$EO1$->F$DCB.FCD

   9352 12 000711   000000 470400 xsym  ABORT_PCL_L  LDP0    M$EO1$
        12 000712   000031 236100                    LDQ     25,,PR0
        12 000713   000026 736000                    QLS     22
        12 000714   400000 376003                    ANQ     -131072,DU
        12 000715   200006 756100                    STQ     SAVE_ERR_CODE+2,,AUTO
        12 000716   000000 471400 xsym               LDP1    M$EO$
        12 000717   100031 236100                    LDQ     25,,PR1
        12 000720   000026 736000                    QLS     22
        12 000721   400000 376003                    ANQ     -131072,DU
        12 000722   200006 276100                    ORQ     SAVE_ERR_CODE+2,,AUTO
        12 000723   000730 600000 12                 TZE     s:9356

      298     9353    1            THEN
      299     9354    1              CALL VPD$CLOSE_OUT(1);       /* Close any open output file         */

   9354 12 000724   000013 630400 13                 EPPR0   11
        12 000725   000017 631400 xsym               EPPR1   B_VECTNIL+15
        12 000726   000000 701000 xent               TSX1    VPD$CLOSE_OUT
        12 000727   000000 011000                    NOP     0

      300     9355                                                /* with error                         */
      301     9356    1           IF M$ME$->F$DCB.FCD

   9356 12 000730   000000 470400 xsym               LDP0    M$ME$
        12 000731   000031 236100                    LDQ     25,,PR0
        12 000732   020000 316007                    CANQ    8192,DL
        12 000733   000737 600000 12                 TZE     s:9359

      302     9357    1            THEN
      303     9358    1              CALL M$CLOSE (FPT_CLOSE_ME);

   9358 12 000734   000000 630400 10                 EPPR0   FPT_CLOSE_ME
        12 000735   050001 713400                    CLIMB   close
        12 000736   406000 401760                    pmme    nvectors=13
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:47   

      304     9359    1           SAVE_ERR_CODE = ERR_CODE;       /* SAVE CODE FOR IBEX                 */

   9359 12 000737   000000 236000 xsym               LDQ     ERR_CODE
        12 000740   200004 756100                    STQ     SAVE_ERR_CODE,,AUTO

      305     9360    1           CALL VPL$ERR_PROC(0,4,'01'O);

   9360 12 000741   000032 630400 13                 EPPR0   26
        12 000742   000021 631400 xsym               EPPR1   B_VECTNIL+17
        12 000743   000000 701000 xent               TSX1    VPL$ERR_PROC
        12 000744   000000 011000                    NOP     0

      306     9361        /*E*   ERROR: VPA-00004
      307     9362             MESSAGE: *******************
      308     9363                      **** PCL ABORT ****
      309     9364                      *******************
      310     9365        */
      311     9366    1           IF HIGHEST_SEVERITY ~= -1

   9366 12 000745   000000 235000 xsym               LDA     HIGHEST_SEVERITY
        12 000746   000027 115000 xsym               CMPA    B_VECTNIL+23
        12 000747   000754 600000 12                 TZE     s:9370

      312     9367    1            THEN                           /* STEPCC set requested               */
      313     9368    1              FPT_XXX.V.STEPCC# = HIGHEST_SEVERITY;

   9368 12 000750   000000 236000 xsym               LDQ     HIGHEST_SEVERITY
        12 000751   000033 736000                    QLS     27
        12 000752   000046 552040 11                 STBQ    FPT_XXX+4,'40'O
        12 000753   000756 710000 12                 TRA     s:9371

      314     9369    1            ELSE                           /* STEPCC not requested               */
      315     9370    1              FPT_XXX.V.STEPCC# = 0;

   9370 12 000754   000000 236003                    LDQ     0,DU
        12 000755   000046 552040 11                 STBQ    FPT_XXX+4,'40'O
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:48   

      316     9371    1           ERR_CODE = SAVE_ERR_CODE;

   9371 12 000756   200004 236100                    LDQ     SAVE_ERR_CODE,,AUTO
        12 000757   000000 756000 xsym               STQ     ERR_CODE

      317     9372    1           ERR_CODE.SEV = ERR_CODE.SEV +1; /* Bump so IBEX won't repeat the msg. */

   9372 12 000760   000000 236000 xsym               LDQ     ERR_CODE
        12 000761   000007 376007                    ANQ     7,DL
        12 000762   000001 036007                    ADLQ    1,DL
        12 000763   000000 676000 xsym               ERQ     ERR_CODE
        12 000764   000007 376007                    ANQ     7,DL
        12 000765   000000 656000 xsym               ERSQ    ERR_CODE

      318     9373    1           CALL M$XXX (FPT_XXX);

   9373 12 000766   000042 630400 11                 EPPR0   FPT_XXX
        12 000767   000003 713400                    CLIMB   3
        12 000770   400400 401760                    pmme    nvectors=2

      319     9374    1   END PCL;

   9374 12 000771   000000 702200 xent               TSX2  ! X66_MARET

PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:49   
--  Include file information  --

   XUG_ENTRY.:E05TOU  cannot be made into a system file and is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   XU_PERR_C.:E05TOU  is referenced.
   B_MICROPS_C.:E05TOU  is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
   VP_MACRO_C.:E05TOU  is referenced.
   XS_MACRO_C.:E05TOU  is referenced.
   VP_PERR_C.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   VP_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure PCL.
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:50   

 **** Variables and constants ****

  ****  Section 010 RoData PCL

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(1080)  r     1 FPT_CLOSE_ME              37-0-0/c CHAR(4)     r     1 LONG_PROMPT
    36-0-0/c CHAR        r     1 PROMPT_1                  40-0-0/c CHAR(2)     r     1 PROMPT_DEL

  ****  Section 011  Data  PCL

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    34-0-0/d STRC(216)   r     1 FPT_ERR                   26-0-0/d STRC(216)   r     1 FPT_EXIT
    14-0-0/d STRC(360)   r     1 FPT_TRAP                   0-0-0/d STRC(432)   r     1 FPT_WRITE_CARET
    42-0-0/d STRC(216)   r     1 FPT_XXX                   50-0-0/w SBIN        r     1 I

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w UBIN        r     1 CODE                       4-0-0/b BIT         r     1 SAVE_ERR_CODE

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d REMB        r     1 ABORT_CMD                  0-0-0/d REMB        r     1 ABORT_PCL
     0-0-0/d REMB        r     1 ABORT_STEP                 0-0-0/w PTR         r     1 B$JIT$
     0-0-0/w SBIN        r     1 BREAKS
     0-0-0/w EPTR        r     1 BREAK_MESSAGE_REPORTER
     0-0-0/b BIT         r     1 CMD_MASK(0:71)
     0-0-0/b BIT         r     1 COMMAND_STUFFED            0-0-0/w SBIN        r     1 ERROR_SEVERITY
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:51   
     0-0-0/b STRC        r     1 ERR_CODE                   0-0-0/w BIT         r     1 ERR_FLG
     0-0-0/w SBIN        r     1 ERR_SAVE_REL               0-0-0/d STRC(1080)  r     1 FPT_CLOSE_EI
     0-0-0/d STRC(1080)  r     1 FPT_CLOSE_READ             0-0-0/d STRC(360)   r     1 FPT_PROMPT
     0-0-0/d STRC(1512)  r     1 GETCMD                     0-0-0/w SBIN        r     1 HIGHEST_SEVERITY
     0-0-0/w PTR         r     1 M$EI$                      0-0-0/w PTR         r     1 M$EO$
     0-0-0/w PTR         r     1 M$EO1$                     0-0-0/w PTR         r     1 M$ME$
     0-0-0/w SBIN        r     1 M$READFILE#                0-0-0/w SBIN        r     1 M$SI#
     0-0-0/w PTR         r     1 M$SI$                      0-0-0/w SBIN        r     1 OLD_BREAKS
     0-0-0/w SBIN        r     1 ONE_TIME                   0-0-0/c CHAR(1024)  r     1 PARSE_IN_BUF
     0-0-0/w STRC(504)   r     1 PCB                        0-0-0/b BIT         r     1 PRE_PARSED
     0-0-0/b BIT         r     1 READ_FILE                  0-0-0/b BIT         r     1 SORTING_INPUT
     0-0-0/d REMB        r     1 TRAP_PCL

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(8856)  r     1 B$JIT                      0-0-0/d ASTR(3528)  r     1 F$DCB
     0-0-0N  NULL        r     1 M$ME                       0-0-0/w STRC(144)   r     1 OUT$BLK


   Procedure PCL requires 506 words for executable code.
   Procedure PCL requires 10 words of local(AUTO) storage.

    No errors detected in file VPA$PCL.:E05TSI    .
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:52   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:53   
          MINI XREF LISTING

ABORT_CMD
      5196**DCL      9143<<REMEMBR  9147<<REMEMBR  9154<<REMEMBR
ABORT_PCL
      5196**DCL      9140<<REMEMBR
ABORT_PCL_L
      9352**LABEL    9141--REMEMBR  9142--REMEMBR  9143--REMEMBR
ABORT_STEP
      5195**DCL      9142<<REMEMBR  9148<<REMEMBR  9153<<REMEMBR
B$JIT.CPFLAGS1.SLEAZE
      7359**DCL      7359--REDEF
B$JIT.ERR.MID
      7266**DCL      7266--REDEF
B$JIT.JRESPEAK
      7427**DCL      7428--REDEF
B$JIT.JUNK
      7465**DCL      9161>>IF
B$JIT.ORIGINATOR_PORT.FROM_CR
      7536**DCL      7536--REDEF    7537--REDEF
B$JIT.PNR
      7440**DCL      7440--REDEF
B$JIT.TSLINE
      7534**DCL      7535--REDEF
B$JIT$
      5996**DCL      7260--IMP-PTR  9161>>IF
BREAKS
      5231**DCL      9186<<ASSIGN
BREAK_LOC
      5231**DCL      5231--REDEF
BREAK_MESSAGE_REPORTER
      5232**DCL      9155<<ASSIGN
CMD_MASK
      5233**DCL      9188<<ASSIGN   9189<<ASSIGN
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:54   
CODE
      9137**DCL      9192<<ASSIGN   9193>>DOCASE   9292<<ASSIGN
COMMAND_LOOP
      9152**LABEL    9289--GOTO
COMMAND_STUFFED
      4566**DCL      9174>>IF       9176<<ASSIGN
DEF_ICB.FID.STRING
      5829**DCL      5830--REDEF
DEV_ICB.FID.STRING
      5715**DCL      5716--REDEF
DO_CMD
      9193**LABEL    9293--GOTO
EI_KEY.KEY
      5927**DCL      5927--REDEF    5927--REDEF    5927--REDEF
END_CMD
      9256**LABEL    9326--GOTO
EO_OCB.TYPE
      5427**DCL      5428--REDEF
ERROR_SEVERITY
      5194**DCL      9204<<ASSIGN   9206<<ASSIGN   9208<<ASSIGN
ERR_CODE
      5197**DCL      9098--DCLINIT  9115--DCLINIT  9132--DCLINIT  9309<<ASSIGN   9337>>ASSIGN   9347<<ASSIGN
      9359>>ASSIGN   9371<<ASSIGN
ERR_CODE.SEV
      5197**DCL      9264<<ASSIGN   9264>>ASSIGN   9348<<ASSIGN   9348>>ASSIGN   9372<<ASSIGN   9372>>ASSIGN
ERR_FLG
      5194**DCL      9145<<ASSIGN   9149>>IF       9156<<ASSIGN
ERR_SAVE_REL
      5226**DCL      9254<<ASSIGN
F$DCB.ACTPOS
      7228**DCL      7228--REDEF
F$DCB.ARS
      7203**DCL      7203--REDEF
F$DCB.ATTR
      7221**DCL      7222--REDEF
F$DCB.BORROW
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:55   
      7236**DCL      7236--REDEF    7236--REDEF    7236--REDEF
F$DCB.DCBNAME.L
      7250**DCL      7250--IMP-SIZ
F$DCB.DDEV.IC
      7209**DCL      9297>>IF
F$DCB.EOMCHAR
      7207**DCL      7207--REDEF
F$DCB.FCD
      7216**DCL      9256>>IF       9317>>IF       9330>>IF       9330>>IF       9334>>IF       9352>>IF
      9352>>IF       9356>>IF
F$DCB.FLDID
      7231**DCL      7231--REDEF
F$DCB.FORM$
      7225**DCL      7225--REDEF
F$DCB.FSECT
      7241**DCL      7241--REDEF
F$DCB.FSN
      7218**DCL      7218--REDEF    7218--REDEF    7219--REDEF
F$DCB.HEADER$
      7224**DCL      7224--REDEF
F$DCB.IXTNSIZE
      7222**DCL      7222--REDEF
F$DCB.LASTSTA$
      7212**DCL      7212--REDEF
F$DCB.LVL
      7237**DCL      7237--REDEF
F$DCB.NAME.C
      7212**DCL      7212--REDEF
F$DCB.NOEOF
      7233**DCL      7233--REDEF
F$DCB.NRECS
      7223**DCL      7223--REDEF
F$DCB.NRECX
      7242**DCL      7242--REDEF
F$DCB.OHDR
      7234**DCL      7234--REDEF
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:56   
F$DCB.ORG
      7217**DCL      7217--REDEF
F$DCB.PRECNO
      7240**DCL      7240--REDEF
F$DCB.RCSZ
      7245**DCL      7245--REDEF
F$DCB.RES
      7213**DCL      7213--REDEF
F$DCB.SETX
      7225**DCL      7225--REDEF
F$DCB.TAB$
      7224**DCL      7225--REDEF
F$DCB.TDA
      7239**DCL      7239--REDEF
F$DCB.WSN
      7214**DCL      7214--REDEF
FPT_CLOSE_EI
      6768**DCL      9320<>CALL
FPT_CLOSE_EI.SN_
      6768**DCL      6768--REDEF
FPT_CLOSE_EI.UTL_
      6769**DCL      6769--REDEF
FPT_CLOSE_EI.V.EXPIRE#
      6783**DCL      6783--REDEF
FPT_CLOSE_EI.V.NOMARKS#
      6782**DCL      9319<<ASSIGN   9321<<ASSIGN
FPT_CLOSE_EI.V.TYPE#
      6781**DCL      6781--REDEF
FPT_CLOSE_EI.V.XTNSIZE#
      6778**DCL      6778--REDEF    6780--REDEF
FPT_CLOSE_ME
      8745**DCL      9258<>CALL     9336<>CALL     9358<>CALL
FPT_CLOSE_ME.SN_
      8745**DCL      8745--REDEF
FPT_CLOSE_ME.UTL_
      8746**DCL      8746--REDEF
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:57   
FPT_CLOSE_ME.V
      8750**DCL      8745--DCLINIT
FPT_CLOSE_ME.V.EXPIRE#
      8760**DCL      8760--REDEF
FPT_CLOSE_ME.V.TYPE#
      8758**DCL      8758--REDEF
FPT_CLOSE_ME.V.XTNSIZE#
      8755**DCL      8755--REDEF    8757--REDEF
FPT_CLOSE_PTL.SN_
      6894**DCL      6894--REDEF
FPT_CLOSE_PTL.UTL_
      6895**DCL      6895--REDEF
FPT_CLOSE_PTL.V.EXPIRE#
      6909**DCL      6909--REDEF
FPT_CLOSE_PTL.V.TYPE#
      6907**DCL      6907--REDEF
FPT_CLOSE_PTL.V.XTNSIZE#
      6904**DCL      6904--REDEF    6906--REDEF
FPT_CLOSE_READ
      6810**DCL      9287<>CALL
FPT_CLOSE_READ.SN_
      6810**DCL      6810--REDEF
FPT_CLOSE_READ.UTL_
      6811**DCL      6811--REDEF
FPT_CLOSE_READ.V.EXPIRE#
      6825**DCL      6825--REDEF
FPT_CLOSE_READ.V.TYPE#
      6823**DCL      6823--REDEF
FPT_CLOSE_READ.V.XTNSIZE#
      6820**DCL      6820--REDEF    6822--REDEF
FPT_CLOSE_SI.SN_
      6978**DCL      6978--REDEF
FPT_CLOSE_SI.UTL_
      6979**DCL      6979--REDEF
FPT_CLOSE_SI.V.EXPIRE#
      6993**DCL      6993--REDEF
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:58   
FPT_CLOSE_SI.V.TYPE#
      6991**DCL      6991--REDEF
FPT_CLOSE_SI.V.XTNSIZE#
      6988**DCL      6988--REDEF    6990--REDEF
FPT_CLOSE_STD.SN_
      6936**DCL      6936--REDEF
FPT_CLOSE_STD.UTL_
      6937**DCL      6937--REDEF
FPT_CLOSE_STD.V.EXPIRE#
      6951**DCL      6951--REDEF
FPT_CLOSE_STD.V.TYPE#
      6949**DCL      6949--REDEF
FPT_CLOSE_STD.V.XTNSIZE#
      6946**DCL      6946--REDEF    6948--REDEF
FPT_CLSEI_FT.SN_
      6852**DCL      6852--REDEF
FPT_CLSEI_FT.UTL_
      6853**DCL      6853--REDEF
FPT_CLSEI_FT.V.EXPIRE#
      6867**DCL      6867--REDEF
FPT_CLSEI_FT.V.TYPE#
      6865**DCL      6865--REDEF
FPT_CLSEI_FT.V.XTNSIZE#
      6862**DCL      6862--REDEF    6864--REDEF
FPT_ERR
      9115**DCL      9349<>CALL
FPT_ERR.V
      9115**DCL      9115--DCLINIT
FPT_ERR.V.STEPCC#
      9116**DCL      9116--REDEF    9344<<ASSIGN   9346<<ASSIGN
FPT_EXIT
      9098**DCL      9265<>CALL
FPT_EXIT.V
      9098**DCL      9098--DCLINIT
FPT_EXIT.V.STEPCC#
      9099**DCL      9099--REDEF    9261<<ASSIGN   9263<<ASSIGN
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:59   
FPT_OPEN_EI.ACSVEH_
      6423**DCL      6424--REDEF
FPT_OPEN_EI.ALTKEYS_
      6429**DCL      6430--REDEF    6430--REDEF
FPT_OPEN_EI.HDR_
      6428**DCL      6429--REDEF
FPT_OPEN_EI.TAB_
      6427**DCL      6428--REDEF
FPT_OPEN_EI.UHL_
      6421**DCL      6422--REDEF    6422--REDEF
FPT_OPEN_EI.V.FSN#
      6461**DCL      6461--REDEF    6461--REDEF
FPT_OPEN_EI.WSN_
      6427**DCL      6427--REDEF
FPT_OPEN_EI_SAVE.ACSVEH_
      6532**DCL      6533--REDEF
FPT_OPEN_EI_SAVE.ALTKEYS_
      6538**DCL      6539--REDEF    6539--REDEF
FPT_OPEN_EI_SAVE.HDR_
      6537**DCL      6538--REDEF
FPT_OPEN_EI_SAVE.TAB_
      6536**DCL      6537--REDEF
FPT_OPEN_EI_SAVE.UHL_
      6530**DCL      6531--REDEF    6531--REDEF
FPT_OPEN_EI_SAVE.V.FSN#
      6570**DCL      6570--REDEF    6570--REDEF
FPT_OPEN_EI_SAVE.WSN_
      6536**DCL      6536--REDEF
FPT_OPEN_OUT.ACSVEH_
      6314**DCL      6315--REDEF
FPT_OPEN_OUT.ALTKEYS_
      6320**DCL      6321--REDEF    6321--REDEF
FPT_OPEN_OUT.HDR_
      6319**DCL      6320--REDEF
FPT_OPEN_OUT.TAB_
      6318**DCL      6319--REDEF
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:60   
FPT_OPEN_OUT.UHL_
      6312**DCL      6313--REDEF    6313--REDEF
FPT_OPEN_OUT.V.FSN#
      6352**DCL      6352--REDEF    6352--REDEF
FPT_OPEN_OUT.WSN_
      6318**DCL      6318--REDEF
FPT_OPEN_OUT_SAVE.ACSVEH_
      6205**DCL      6206--REDEF
FPT_OPEN_OUT_SAVE.ALTKEYS_
      6211**DCL      6212--REDEF    6212--REDEF
FPT_OPEN_OUT_SAVE.HDR_
      6210**DCL      6211--REDEF
FPT_OPEN_OUT_SAVE.TAB_
      6209**DCL      6210--REDEF
FPT_OPEN_OUT_SAVE.UHL_
      6203**DCL      6204--REDEF    6204--REDEF
FPT_OPEN_OUT_SAVE.V.FSN#
      6243**DCL      6243--REDEF    6243--REDEF
FPT_OPEN_OUT_SAVE.WSN_
      6209**DCL      6209--REDEF
FPT_PROMPT
      6076**DCL      9166<>CALL     9217<>CALL
FPT_PROMPT.PROMPT_
      6082**DCL      9163<<ASSIGN   9165<<ASSIGN   9167>>ASSIGN   9216<<ASSIGN
FPT_READ_STD.STATION_
      6633**DCL      6634--REDEF
FPT_READ_STD.V.DVBYTE.REREAD#
      6645**DCL      6645--REDEF
FPT_READ_STD.V.INDX#
      6643**DCL      6643--REDEF
FPT_READ_UC.STATION_
      6594**DCL      6595--REDEF
FPT_READ_UC.V.DVBYTE.REREAD#
      6606**DCL      6606--REDEF
FPT_READ_UC.V.INDX#
      6604**DCL      6604--REDEF
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:61   
FPT_TRAP
      9073**DCL      9144<>CALL
FPT_TRAP.V
      9073**DCL      9073--DCLINIT
FPT_WRITE_CARET.STATION_
      9034**DCL      9034--REDEF
FPT_WRITE_CARET.V
      9035**DCL      9032--DCLINIT
FPT_WRITE_CARET.V.DVBYTE.VFC#
      9041**DCL      9041--REDEF
FPT_WRITE_ME.STATION_
      6702**DCL      6702--REDEF
FPT_WRITE_ME.V.DVBYTE.VFC#
      6709**DCL      6709--REDEF
FPT_WRITE_OUT.STATION_
      6733**DCL      6733--REDEF
FPT_WRITE_OUT.V.DVBYTE.VFC#
      6740**DCL      6740--REDEF
FPT_WRITE_UC.STATION_
      6671**DCL      6671--REDEF
FPT_WRITE_UC.V.DVBYTE.VFC#
      6678**DCL      6678--REDEF
FPT_XXX
      9132**DCL      9373<>CALL
FPT_XXX.V
      9132**DCL      9132--DCLINIT
FPT_XXX.V.STEPCC#
      9133**DCL      9133--REDEF    9368<<ASSIGN   9370<<ASSIGN
FROM_SN.SN
      5577**DCL      5578--REDEF
GETCMD
      4779**DCL      9173<>CALL     9177<>CALL     9181<>CALL
GETCMD.ERR#
      4790**DCL      9280>>ASSIGN   9299<>CALL     9301<>CALL     9313<>CALL
GETCMD.INDCB#
      4950**DCL      9170<<ASSIGN   9172<<ASSIGN
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:62   
GETCMD.OUT$
      4784**DCL      4790--REDEF    9183>>ASSIGN
GETCMD.PROMPT_
      4988**DCL      9167<<ASSIGN
GETCMD.TEXT_
      5042**DCL      9180<<ASSIGN   9305>>IF
HIGHEST_SEVERITY
      5194**DCL      9210<<ASSIGN   9212<<ASSIGN   9259>>IF       9261>>ASSIGN   9342>>IF       9344>>ASSIGN
      9366>>IF       9368>>ASSIGN
I
      9136**DCL      9201<<DOINDEX  9202>>DOCASE
ICB.FID.STRING
      5601**DCL      5602--REDEF
IFSFA_PARAM.EOMCHAR#
      5956**DCL      5957--REDEF
IFSFA_PARAM.SIG1
      5950**DCL      5950--REDEF
IFSFA_PARAM.SIG2
      5950**DCL      5951--REDEF
IN_RES
      5523**DCL      5523--REDEF
IN_SN.SN
      5539**DCL      5540--REDEF
LONG_PROMPT
      8765**DCL      9163--ASSIGN
M$CLOSE
        41**DCL-ENT  9258--CALL     9287--CALL     9320--CALL     9336--CALL     9358--CALL
M$EI$
      5992**DCL      9317>>IF
M$EO$
      5992**DCL      9330>>IF       9352>>IF
M$EO1$
      5993**DCL      9330>>IF       9352>>IF
M$ERR
        53**DCL-ENT  9349--CALL
M$EXIT
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:63   
        53**DCL-ENT  9265--CALL
M$ME$
      5993**DCL      9256>>IF       9334>>IF       9356>>IF
M$PROMPT
        65**DCL-ENT  9166--CALL     9217--CALL
M$READFILE#
      5994**DCL      9170>>ASSIGN
M$SI#
      5994**DCL      9172>>ASSIGN
M$SI$
      5993**DCL      9297>>IF
M$TRAP
        95**DCL-ENT  9144--CALL
M$XXX
        53**DCL-ENT  9373--CALL
NEXT_CMD
      9316**LABEL    9147--REMEMBR  9148--REMEMBR  9153--REMEMBR  9154--REMEMBR
OCB.TYPE
      5285**DCL      5286--REDEF
OFSFA_PARAM.EOMCHAR#
      5986**DCL      5987--REDEF
OFSFA_PARAM.SIG1
      5980**DCL      5980--REDEF
OFSFA_PARAM.SIG2
      5980**DCL      5981--REDEF
OLD_BREAKS
      5232**DCL      9185<<ASSIGN
ONE_TIME
      5236**DCL      9285>>IF       9324>>IF
OUT$BLK.CODE
      8685**DCL      9189>>ASSIGN   9192>>ASSIGN   9202>>DOCASE   9254>>ASSIGN
OUT$BLK.NSUBLKS
      8689**DCL      9201>>DOINDEX
OUT$BLK.SUBLK$
      8710**DCL      9202>>DOCASE   9254>>ASSIGN
OUT_SN.SN
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:64   
      5557**DCL      5558--REDEF
PARSE_ALT
      9274**LABEL    9151--GOTO     9177--CALLALT  9181--CALLALT
PARSE_IN_BUF
      4565**DCL      9033--DCLINIT  9034--DCLINIT
PCB.ERROR
      4689**DCL      9280<<ASSIGN   9309>>ASSIGN
PCB.ERROR.CODE
      4697**DCL      9283>>IF       9305>>IF
PCB.ERROR.MON
      4696**DCL      9281>>IF
PCB.OUT$
      4598**DCL      9183<<ASSIGN   9189>>ASSIGN   9192>>ASSIGN   9201>>DOINDEX  9202>>DOCASE   9254>>ASSIGN
PRE_PARSED
      4566**DCL      9157>>IF       9159<<ASSIGN
PROMPT_1
      8764**DCL      9165--ASSIGN
PROMPT_DEL
      8766**DCL      9216--ASSIGN
READ_FILE
      4566**DCL      9168>>IF       9285>>IF       9288<<ASSIGN   9324>>IF
SAVE_ERR_CODE
      9138**DCL      9337<<ASSIGN   9347>>ASSIGN   9359<<ASSIGN   9371>>ASSIGN
SORTING_INPUT
      5233**DCL      9187<<ASSIGN
SPEC_BUF
      5235**DCL      5235--REDEF
TRAP_PCL
      5196**DCL      9141<<REMEMBR
USER_FATAL_L
      9330**LABEL    9140--REMEMBR
VPD$CLOSE_OUT
      8795**DCL-ENT  9332--CALL     9354--CALL
VPD$INITIALIZE
      8836**DCL-ENT  9146--CALL
VPD$INIT_COMMANDS
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:65   
      8975**DCL-ENT  9190--CALL
VPE$COPY
      8861**DCL-ENT  9195--CALL
VPE$COPYALL
      8864**DCL-ENT  9197--CALL
VPE$COPYSTD
      8865**DCL-ENT  9199--CALL
VPF$SORT_FID
      8966**DCL-ENT  9316--CALL
VPH$LIST
      8902**DCL-ENT  9226--CALL
VPH$LISTSTD
      8903**DCL-ENT  9228--CALL
VPH$REVIEW
      8904**DCL-ENT  9230--CALL
VPH$REVIEWSTD
      8905**DCL-ENT  9232--CALL
VPI$DELETE
      8908**DCL-ENT  9218--CALL
VPI$DELETESTD
      8909**DCL-ENT  9222--CALL
VPJ$MOUNT
      8915**DCL-ENT  9236--CALL     9244--CALL     9246--CALL     9248--CALL
VPJ$SCAN
      8918**DCL-ENT  9267--CALL
VPJ$SPE
      8921**DCL-ENT  9242--CALL
VPJ$SPF
      8922**DCL-ENT  9238--CALL
VPJ$SPR
      8923**DCL-ENT  9240--CALL
VPJ$WEOF
      8926**DCL-ENT  9250--CALL
VPK$DELREC
      8929**DCL-ENT  9224--CALL
VPK$LINK
PL6.E3A0      #001=PCL File=VPA$PCL.:E05TSI                                      WED 07/30/97 07:18 Page:66   
      8932**DCL-ENT  9273--CALL
VPK$MODIFY
      8935**DCL-ENT  9234--CALL
VPK$PCL_INVOCATION
      8938**DCL-ENT  9275--CALL
VPK$READ
      8941**DCL-ENT  9271--CALL
VPK$STATUS
      8944**DCL-ENT  9269--CALL
VPK$TX
      8947**DCL-ENT  9252--CALL
VPL$ERR_PROC
      8952**DCL-ENT  9299--CALL     9301--CALL     9313--CALL     9338--CALL     9360--CALL
VPL$ERR_SEV_HANDLER
      8953**DCL-ENT  9310--CALL
VPL$TRAP
      8960**DCL-ENT  9074--DCLINIT  9074--DCLINIT  9075--DCLINIT  9075--DCLINIT
XUG$CLRENABLE
      8998**DCL-ENT  9173--CALL
XUG$GETCMD
      8985**DCL-ENT  9177--CALL     9181--CALL
