VERSION A06

PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:1    
        1        1        /*T***********************************************************/
        2        2        /*T*                                                         */
        3        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        4        4        /*T*                                                         */
        5        5        /*T***********************************************************/
        6        6        /*-----*/
        7        7          Z9DM$READY_SSCHEMA: PROC (SCHEMA$, SUB_SCHEMA$, PRIVACY$)   ALTRET;
        8        8        /*-----*/
        9        9        /*I*
       10       10             NAME: READY_SSCHEMA
       11       11             PURPOSE:  Makes the subschema file ready.
       12       12
       13       13             CALL:  Call READY_SSCHEMA;
       14       14
       15       15
       16       16             PARAMETERS:
       17       17                    None.
       18       18             DATA:  Uses  PRIVACY$, SCHEMA$, and SUB_SCHEMA$.
       19       19
       20       20             DESCRIPTION:   The subschema file is found and opened.  If
       21       21                            the file is not present or the subschma has not
       22       22                            been validated, an ALTRETURN is invoked and
       23       23                            compilation is ended.  If the subschema is valid,
       24       24                            a new compile record is written to the file.  It
       25       25                            contains the UTS time, program id, subschema validation
       26       26                            time.  This record has a type of 1000.
       27       27        */
       28       28        %SET PHASE = 1;
       29       29        %INCLUDE Z8A_DEFC;
       30       97        %INCLUDE Z8A_SUPP_MAC;
       31     2497        %INCLUDE Z8A_SYS_FILE;
       32     8772        %INCLUDE Z8E_DML;
       33     8892        %INCLUDE Z8A_ERR_NUMS;
       34     9656        %EQU EMPTY = 0;
       35     9657        %INCLUDE Z8A_COMCOM;
       36    10307        %INCLUDE Z8E_STACKS;
       37    12573        %INCLUDE Z8E_O1COM;
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:2    
       38    13334        %INCLUDE Z8A_DNT;
       39    13555
       40    13556
       41    13557    1          DCL 1 BLOCK_CU  STATIC,
       42    13558    1                  2 NUM_CHAR  UBIN(9) UNAL INIT(3),
       43    13559    1                  2 NUMBER    UBIN(27) UNAL;
       44    13560
       45    13561    1          DCL 1 FILE_NAME STATIC,
       46    13562    1                  2 NUM_CHAR  UBIN(9) UNAL INIT(0),
       47    13563    1                  2 SUBSCH_NAME CHAR(30) UNAL;
       48    13564
       49    13565    1          DCL 1 BLOCK STATIC,
       50    13566    1                  2 NUM_CHAR  UBIN(9) UNAL INIT(3),
       51    13567    1                  2 NUMBER    UBIN(27) UNAL;
       52    13568
       53    13569    1          DCL RECORD_NUMBER   SBIN WORD STATIC;
       54    13570    1          DCL CURRENT_COMP_UNIT$ PTR STATIC;
       55    13571    1          DCL NEW_COMP_UNIT_B(0:63) SBIN STATIC;
       56    13572    1           DCL LOCK            CHAR(12);
       57    13573
       58    13574    1          DCL 1 NEW_COMP_UNIT   BASED(CURRENT_COMP_UNIT$),
       59    13575    1                  2 NEXT_CU   SBIN WORD,          /*V* 0 */
       60    13576    1                  2 * (0:1)             SBIN  WORD,   /*V* 1 */
       61    13577    1                  2 TYPE      SBIN WORD,          /*V* 3 */
       62    13578    1                  2 PROG_ID   CHAR(32),           /*V* 4-11 */
       63    13579    1                  2 AUTH      CHAR(32),           /*V* 12-19 */
       64    13580    1                  2 CDATE     CHAR(4),            /*V* 20 */
       65    13581    1                  2 COMP_TIME SBIN WORD,          /*V* 21 */
       66    13582    1                  2 SCDATE    CHAR(4),            /*V* 22 */
       67    13583    1                  2 SUB_COMP_TIME  SBIN WORD;     /*V* 23 */
       68    13584
       69    13585    1          DCL  X_NUMBER    SBIN WORD  STATIC;
       70    13586    1           DCL  1  CONTROL_SEG   EXT,
       71    13587    1                  2  VALIDATION_STATUS SBIN WORD UNAL, /*V* 0 */
       72    13588    1                  2  TRANSLATE_STATUS  SBIN WORD UNAL, /*V* 1 */
       73    13589    1                  2  *                 SBIN WORD UNAL, /*V* 2 */
       74    13590    1                  2  TOKEN_TYPE        SBIN WORD UNAL, /*V* 3 */
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:3    
       75    13591    1                  2 UWA                 SBIN  WORD,   /*V* 4 */
       76    13592    1                  2 *                   SBIN  WORD,   /*V* 5 */
       77    13593    1                  2 DATE                SBIN  WORD,   /*V* 6 */
       78    13594    1                  2 TIME                SBIN  WORD,   /*V* 7 */
       79    13595    1                  2 * (0:7)             SBIN  WORD,   /*V* 8-15 */
       80    13596    1                  2 SCH_NAME            CHAR(32),     /*V* 16-23 */
       81    13597    1                  2 SUB_NAME            CHAR(32),     /*V* 24-31 */
       82    13598    1                  2 SECOND_RECORD       SBIN  WORD,   /*V* 32 */
       83    13599    1                  2 * (0:8)             SBIN  WORD,   /*V* 33-41 */
       84    13600    1                  2 TDATE               SBIN WORD,    /*V* 42    */
       85    13601    1                  2 TTIME               SBIN WORD,    /*V* 43    */
       86    13602    1                  2 * (0:8)             SBIN  WORD,   /*V* 44-52 */
       87    13603    1                  2 LOCK                CHAR(12),     /*V* 53-55 */
       88    13604    1                  2 * (0:1)             SBIN  WORD,   /*V* 56-57 */
       89    13605    1                  2 NEXT_AV             SBIN  WORD,   /*V* 58 */
       90    13606    1                  2 FIRST_COMP          SBIN  WORD,   /*V* 59 */
       91    13607    1                  2 FIRST_NAME_SEG      SBIN  WORD,   /*V* 60 */
       92    13608    1                  2 *                   SBIN  WORD,   /*V* 61 */
       93    13609    1                  2 FIRST_NAME_SEGEXT   SBIN  WORD,   /*V* 62 */
       94    13610    1                  2 FIRST_INTER         SBIN  WORD;   /*V* 63 */
       95    13611    1   DCL  DCB_NUMBER    UBIN(18) EXT;
       96    13612    1   DCL  SUB_SCHEMA$   PTR;
       97    13613    1   DCL  SCHEMA$       PTR;
       98    13614    1   DCL  PRIVACY$      PTR;
       99    13615
      100    13616    1   DCL Z8AE$ERROR                  ENTRY(12);
      101    13617
      102    13618    1   DCL I  SBIN(18);
      103    13619         %EJECT;
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:4    
      104    13620
      105    13621        %F$DCB;
      106    13678        %FPT_READ(FPTN=READF,KEYS=YES,KEY=BLOCK,BUF=CONTROL_SEG);
      107    13717        %FPT_READ(FPTN=READCU,KEYS=YES,KEY=BLOCK_CU,BUF=NEW_COMP_UNIT_B);
      108    13756        %FPT_WRITE(FPTN=WRITEF,KEY=BLOCK,BUF=CONTROL_SEG);
      109    13787        %FPT_WRITE(FPTN=WRITECU,KEY=BLOCK_CU,BUF=NEW_COMP_UNIT_B);
      110    13818        %FPT_GETDCB(FPTN=GETF,DCBNUM=X_NUMBER,MERGE=YES,DCBNAME=FILE_NAME);
      111    13833        %FPT_OPEN(FPTN=OPENF,ASN=FILE,FUN=UPDATE,SHARE=ALL,
      112    13834                               ORG=KEYED,ACS=DIRECT);
      113    13943        %VLP_NAME(FPTN=PIST,NAME='HIST');
      114    13970        %FPT_ENQ(FPTN=MENQ,WAIT=YES,WAIT_TIME=-1,SHARE=NONE,RNAME=PIST);
      115    13988        %FPT_DEQ(FPTN=MDEQ,RNAME=PIST,RELRES=NO);
      116    14005        %FPT_CLOSE(FPTN=CLOSEF);
      117    14047
      118    14048        /*----*/
      119    14049    1     READ :  PROC;
      120    14050        /*----*/
      121    14051
      122    14052    2      DCL REMAINDER UBIN(18);
      123    14053
      124    14054    2   I = RECORD_NUMBER/2;
      125    14055    2   REMAINDER = RECORD_NUMBER - I * 2;
      126    14056    2   IF I ~= BLOCK_CU.NUMBER  THEN
      127    14057    3     DO;
      128    14058    3      BLOCK_CU.NUMBER = I;
      129    14059    3      CALL M$READ(READCU)
      130    14060    3        WHENALTRETURN
      131    14061    4        DO;
      132    14062    5          DO I = 0 TO 63;
      133    14063    5              NEW_COMP_UNIT_B(I) = 0;
      134    14064    5          END;
      135    14065    4          CURRENT_COMP_UNIT$ = ADDR(NEW_COMP_UNIT_B);
      136    14066    4          RETURN;
      137    14067    4        END;
      138    14068    3     END;
      139    14069    2   IF REMAINDER = 0 THEN
      140    14070    2      CURRENT_COMP_UNIT$ = ADDR(NEW_COMP_UNIT_B);
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:5    
      141    14071    2   ELSE
      142    14072    2      CURRENT_COMP_UNIT$ = PINCRW(ADDR(NEW_COMP_UNIT_B),32);
      143    14073
      144    14074    2   END READ;
      145    14075         %EJECT;
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:6    
      146    14076        /*----------*/
      147    14077    1     CLOSE_FILE: PROC ALTRET;
      148    14078        /*----------*/
      149    14079
      150    14080    2   CALL M$DEQ(MDEQ);
      151    14081    2   CALL M$CLOSE(CLOSEF);
      152    14082
      153    14083    2   END CLOSE_FILE;
      154    14084
      155    14085        /*--------*/
      156    14086    1     WRITE_CU : PROC ALTRET;
      157    14087        /*--------*/
      158    14088
      159    14089    2   CALL M$WRITE(WRITECU)
      160    14090    2     WHENALTRETURN
      161    14091    3     DO;
      162    14092    3       ALTRETURN;
      163    14093    3     END;
      164    14094
      165    14095    2   END WRITE_CU;
      166    14096         %EJECT;
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:7    
      167    14097    1   FILE_NAME.NUM_CHAR = SUB_SCHEMA$ -> LX_ITEM.DNT$->DNT.TEXT.LENGTH;
      168    14098    1   FILE_NAME.SUBSCH_NAME = SUBSTR(SUB_SCHEMA$ -> LX_ITEM.DNT$->DNT.TEXT.NAME, 0,
      169    14099    1                                  SUB_SCHEMA$ -> LX_ITEM.DNT$ -> DNT.TEXT.LENGTH);
      170    14100
      171    14101    1   CALL M$GETDCB(GETF)
      172    14102    1     WHENALTRETURN
      173    14103    2     DO;
      174    14104    2      CALL Z8AE$ERROR(%E$SUB_SCHEMA_NOT_PRESENT,SUB_SCHEMA$ -> LX_ITEM.LINE,SUB_SCHEMA$
             14104               -> LX_ITEM.COLUMN,SUB_SCHEMA$ -> LX_ITEM.DNT$);
      175    14105    2      ALTRETURN;
      176    14106    2     END;
      177    14107
      178    14108    1   DCB_NUMBER    = X_NUMBER;
      179    14109    1   OPENF.V.DCB#  = DCB_NUMBER;
      180    14110    1   MENQ.V.DCB#   = DCB_NUMBER;
      181    14111    1   MDEQ.V.DCB#   = DCB_NUMBER;
      182    14112    1   CLOSEF.V.DCB# = DCB_NUMBER;
      183    14113
      184    14114    1   IF COMCOM.OB.N6UPD THEN
      185    14115    1     OPENF.V.FUN# = %IN#;
      186    14116
      187    14117    1   CALL M$OPEN(OPENF)
      188    14118    1     WHENALTRETURN
      189    14119    2     DO;
      190    14120    2      OPENF.NAME_ = VECTOR(FILE_NAME);
      191    14121    2      CALL M$OPEN(OPENF)
      192    14122    2        WHENALTRETURN
      193    14123    3        DO;
      194    14124    3          CALL Z8AE$ERROR(%E$SUB_SCHEMA_NOT_PRESENT,
      195    14125    3                          SUB_SCHEMA$ -> LX_ITEM.LINE,
      196    14126    3                          SUB_SCHEMA$ -> LX_ITEM.COLUMN,
      197    14127    3                          SUB_SCHEMA$ -> LX_ITEM.DNT$);
      198    14128    3          ALTRETURN;
      199    14129    3      END;
      200    14130    2     END;
      201    14131
      202    14132    1   CALL M$ENQ(MENQ)
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:8    
      203    14133    1     WHENALTRETURN
      204    14134    2     DO;
      205    14135    2      CALL Z8AE$ERROR(%E$SUB_SCHEMA_NOT_PRESENT,
      206    14136    2                      SUB_SCHEMA$ -> LX_ITEM.LINE,
      207    14137    2                      SUB_SCHEMA$ -> LX_ITEM.COLUMN,
      208    14138    2                      SUB_SCHEMA$ -> LX_ITEM.DNT$);
      209    14139    2      CALL M$CLOSE(CLOSEF);
      210    14140    2      ALTRETURN;
      211    14141    2     END;
      212    14142
      213    14143    1   READF.V.DCB#   = DCB_NUMBER;
      214    14144    1   READCU.V.DCB#  = DCB_NUMBER;
      215    14145    1   WRITEF.V.DCB#  = DCB_NUMBER;
      216    14146    1   WRITECU.V.DCB# = DCB_NUMBER;
      217    14147    1   BLOCK.NUMBER   = 0;
      218    14148
      219    14149    1   CALL M$READ(READF)
      220    14150    1     WHENALTRETURN
      221    14151    2     DO;
      222    14152    2      CALL Z8AE$ERROR(%E$ERROR_READING_SUB_SCHEMA,
      223    14153    2                      SUB_SCHEMA$ -> LX_ITEM.LINE,
      224    14154    2                      SUB_SCHEMA$ -> LX_ITEM.COLUMN,
      225    14155    2                      SUB_SCHEMA$ -> LX_ITEM.DNT$);
      226    14156    2      ALTRETURN;
      227    14157    2     END;
      228    14158
      229    14159    1   IF CONTROL_SEG.VALIDATION_STATUS ~= 30 THEN
      230    14160    2     DO;
      231    14161    2      CALL Z8AE$ERROR(%E$SUB_SCHEMA_NOT_TRANSLATED,SUB_SCHEMA$->LX_ITEM.LINE,
             14161               SUB_SCHEMA$ -> LX_ITEM.COLUMN,SUB_SCHEMA$ -> LX_ITEM.DNT$);
      232    14162    2      ALTRETURN;
      233    14163    2     END;
      234    14164
      235    14165    1   IF  SCHEMA$ -> LX_ITEM.DNT$->DNT.TEXT.NAME ~= CONTROL_SEG.SCH_NAME  THEN
      236    14166    2     DO;
      237    14167    2      CALL Z8AE$ERROR(%E$SCHEMA_NOT_KNOWN,,, SCHEMA$ -> LX_ITEM.DNT$);
      238    14168    2      ALTRETURN;
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:9    
      239    14169    2     END;
      240    14170
      241    14171    1   IF SUB_SCHEMA$ -> LX_ITEM.DNT$->DNT.TEXT.NAME ~= CONTROL_SEG.SUB_NAME THEN
      242    14172    2     DO;
      243    14173    2      CALL Z8AE$ERROR(%E$SUB_SCHEMA_NOT_KNOWN,
      244    14174    2                      SUB_SCHEMA$ -> LX_ITEM.LINE,
      245    14175    2                      SUB_SCHEMA$ -> LX_ITEM.COLUMN,
      246    14176    2                      SUB_SCHEMA$ -> LX_ITEM.DNT$);
      247    14177    2      ALTRETURN;
      248    14178    2     END;
      249    14179
      250    14180    1   IF CONTROL_SEG.LOCK ~= ' ' THEN
      251    14181    2     DO;
      252    14182    2       IF PRIVACY$ -> LX_ITEM.SYMBOL = %EMPTY         THEN
      253    14183    3         DO;
      254    14184    3           CALL Z8AE$ERROR(%E$PRIVACY_KEY_MISSING,
      255    14185    3                           SUB_SCHEMA$ -> LX_ITEM.LINE,
      256    14186    3                           SUB_SCHEMA$ -> LX_ITEM.COLUMN,
      257    14187    3                           SUB_SCHEMA$ -> LX_ITEM.DNT$);
      258    14188    3           ALTRETURN;
      259    14189    3         END;
      260    14190
      261    14191    2       LOCK = SUBSTR(PRIVACY$ -> LX_ITEM.DNT$ -> DNT.TEXT.NAME, 1,
      262    14192    2                     PRIVACY$ -> LX_ITEM.DNT$ -> DNT.TEXT.LENGTH -2);
      263    14193
      264    14194    2      IF LOCK ~= CONTROL_SEG.LOCK THEN
      265    14195    3        DO;
      266    14196    3          CALL Z8AE$ERROR(%E$PRIVACY_KEY_NO_MATCH,
      267    14197    3                          PRIVACY$ -> LX_ITEM.LINE,
      268    14198    3                          PRIVACY$ -> LX_ITEM.COLUMN,
      269    14199    3                          PRIVACY$ -> LX_ITEM.DNT$,
      270    14200    3                          SUB_SCHEMA$ -> LX_ITEM.DNT$);
      271    14201    3          ALTRETURN;
      272    14202    3        END;
      273    14203    2     END;
      274    14204
      275    14205    1   IF COMCOM.OB.N6UPD THEN
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:10   
      276    14206    1     RETURN; /* Do not update subschema */
      277    14207
      278    14208    1   BLOCK_CU.NUMBER = 0;
      279    14209    1   IF CONTROL_SEG.FIRST_COMP = 0 THEN
      280    14210    2     DO;
      281    14211    2      CONTROL_SEG.FIRST_COMP = CONTROL_SEG.NEXT_AV;
      282    14212    2      RECORD_NUMBER = CONTROL_SEG.NEXT_AV;
      283    14213    2      CONTROL_SEG.NEXT_AV = CONTROL_SEG.NEXT_AV + 1;
      284    14214
      285    14215    2      CALL M$WRITE(WRITEF)
      286    14216    2        WHENALTRETURN
      287    14217    3        DO;
      288    14218    3          CALL Z8AE$ERROR(%E$WRITE_ERROR);
      289    14219    3          CALL CLOSE_FILE;
      290    14220    3          ALTRETURN;
      291    14221    3        END;
      292    14222
      293    14223    2      CALL READ;
      294    14224    2      NEW_COMP_UNIT.NEXT_CU = 0;
      295    14225    2      NEW_COMP_UNIT.TYPE = 1000;
      296    14226    2      NEW_COMP_UNIT.PROG_ID = O1COM.PROG_ID_DNT$->DNT.TEXT.NAME;
      297    14227    2      IF COMCOM.AUTHOR$ ~= ADDR(NIL)    THEN
      298    14228    2        NEW_COMP_UNIT.AUTH = COMCOM.AUTHOR$ -> DNT.TEXT.NAME;
      299    14229    2      NEW_COMP_UNIT.COMP_TIME = COMCOM.COMPILE.UTS;
      300    14230    2      NEW_COMP_UNIT.SUB_COMP_TIME = CONTROL_SEG.TTIME;
      301    14231
      302    14232    2      CALL WRITE_CU
      303    14233    2        WHENALTRETURN
      304    14234    3        DO;
      305    14235    3          CALL Z8AE$ERROR(%E$WRITE_ERROR);
      306    14236    3          CALL CLOSE_FILE;
      307    14237    3          ALTRETURN;
      308    14238    3        END;
      309    14239
      310    14240    2      CALL M$DEQ(MDEQ);
      311    14241
      312    14242    2      RETURN;
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:11   
      313    14243    2     END;
      314    14244    1   ELSE
      315    14245    2     DO;
      316    14246    2      RECORD_NUMBER = CONTROL_SEG.FIRST_COMP;
      317    14247
      318    14248    3      DO UNTIL ( NEW_COMP_UNIT.NEXT_CU <= 0 );
      319    14249    3          CALL READ;
      320    14250    3          IF NEW_COMP_UNIT.PROG_ID = O1COM.PROG_ID_DNT$->DNT.TEXT.NAME  THEN
      321    14251    4            DO;
      322    14252    4              NEW_COMP_UNIT.COMP_TIME = COMCOM.COMPILE.UTS;
      323    14253    4              NEW_COMP_UNIT.SUB_COMP_TIME = CONTROL_SEG.TTIME;
      324    14254    4              CALL WRITE_CU
      325    14255    4                WHENALTRETURN
      326    14256    5                DO;
      327    14257    5                  CALL Z8AE$ERROR(%E$WRITE_ERROR);
      328    14258    5                  CALL CLOSE_FILE;
      329    14259    5                  ALTRETURN;
      330    14260    5                END;
      331    14261    4              CALL M$DEQ(MDEQ);
      332    14262
      333    14263    4              RETURN;
      334    14264    4            END;
      335    14265    3          RECORD_NUMBER = NEW_COMP_UNIT.NEXT_CU;
      336    14266    3      END;
      337    14267
      338    14268    2      NEW_COMP_UNIT.NEXT_CU = CONTROL_SEG.NEXT_AV;
      339    14269    2      RECORD_NUMBER = CONTROL_SEG.NEXT_AV;
      340    14270    2      CALL WRITE_CU
      341    14271    2        WHENALTRETURN
      342    14272    3        DO;
      343    14273    3          CALL Z8AE$ERROR(%E$WRITE_ERROR);
      344    14274    3          CALL CLOSE_FILE;
      345    14275    3          ALTRETURN;
      346    14276    3        END;
      347    14277    2      CALL READ;
      348    14278    2      NEW_COMP_UNIT.NEXT_CU = 0;
      349    14279    2      NEW_COMP_UNIT.TYPE = 1000;
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:12   
      350    14280    2      NEW_COMP_UNIT.PROG_ID = O1COM.PROG_ID_DNT$->DNT.TEXT.NAME;
      351    14281    2      IF COMCOM.AUTHOR$ ~= ADDR(NIL)    THEN
      352    14282    2        NEW_COMP_UNIT.AUTH = COMCOM.AUTHOR$ -> DNT.TEXT.NAME;
      353    14283    2      NEW_COMP_UNIT.COMP_TIME = COMCOM.COMPILE.UTS;
      354    14284    2      NEW_COMP_UNIT.SUB_COMP_TIME = CONTROL_SEG.TTIME;
      355    14285    2      CALL WRITE_CU
      356    14286    2        WHENALTRETURN
      357    14287    3        DO;
      358    14288    3          CALL Z8AE$ERROR(%E$WRITE_ERROR);
      359    14289    3          CALL CLOSE_FILE;
      360    14290    3          ALTRETURN;
      361    14291    3        END;
      362    14292
      363    14293    2       CONTROL_SEG.NEXT_AV = CONTROL_SEG.NEXT_AV + 1;
      364    14294    2       CALL M$WRITE(WRITEF)
      365    14295    2         WHENALTRETURN
      366    14296    3         DO;
      367    14297    3           CALL Z8AE$ERROR(%E$WRITE_ERROR);
      368    14298    3           CALL CLOSE_FILE;
      369    14299    3           ALTRETURN;
      370    14300    3          END;
      371    14301
      372    14302    2      CALL M$DEQ(MDEQ);
      373    14303
      374    14304    2      RETURN;
      375    14305    2     END;
      376    14306
      377    14307         %EJECT;
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:13   
      378    14308    1   END Z9DM$READY_SSCHEMA;
      379    14309         %EOD;

PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:14   
--  Include file information  --

   Z8A_DNT.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8E_O1COM.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8A_LEX_SYMB.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8E_STACKS.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8A_COMCOM.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8A_ERR_NUMS.:Z8A6TOU  is referenced.
   Z8E_DML.:Z8A6TOU  is referenced.
   CP_6_SUBS.:LIB_E04  is referenced.
   CP_6_C.:LIB_E04  is referenced.
   CP_6.:LIB_E04  cannot be made into a system file and is referenced.
   Z9A_FLAGS.:Z8A6TOU  is referenced.
   Z8A_SYS_FILE.:Z8A6TOU  is referenced.
   X8A_COM_MACS.:X8A6TOU  is referenced.
   Z8A_NAMES.:Z8A6TOU  is referenced.
   Z8A_SUPP_MAC.:Z8A6TOU  is referenced.
   Z8A_DEFC.:Z8A6TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure Z9DM$READY_SSCHEMA.

   Procedure Z9DM$READY_SSCHEMA requires 447 words for executable code.
   Procedure Z9DM$READY_SSCHEMA requires 18 words of local(AUTO) storage.

PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:15   

 Object Unit name= Z9DM$READY_SSCHEMA                         File name= Z9DM.:Z8A6TOU
 UTS= AUG 09 '97 13:42:19.72 SAT                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  LblCom even  none     1      1  ITERATION
    1   DCB   even  none     0      0  M$UC
    2  LblCom even  none    90    132  LEX_SYMBOL
    3  LblCom even  none     1      1  CURRENT_LEX_SYMBOL$
    4  LblCom even  none    90    132  TEMP_LEX_SYMBOL
    5  LblCom even  none    90    132  TEMP_LEX_SYMBOL2
    6  LblCom even  none     1      1  DNT$
    7  LblCom even  none     5      5  DNT_
    8  LblCom even  none     1      1  DNT_BUCKET_NUMBER
    9  LblCom even  none     1      1  DNT_OF_1$
   10   Data  even  none   246    366  Z9DM$READY_SSCHEMA
   11  LblCom even  none    64    100  CONTROL_SEG
   12  LblCom even  none     1      1  DCB_NUMBER
   13   Proc  even  none   447    677  Z9DM$READY_SSCHEMA
   14  RoData even  none    28     34  Z9DM$READY_SSCHEMA

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
    13      0   yes    yes     yes      Std        3  Z9DM$READY_SSCHEMA
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:16   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std      12 Z8AE$ERROR
                       nStd      0 X66_AUTO_3
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  COMCOM                                O1COM
     HIER_STK_PTR                          HIER_STK                              PAGE_FORMAT
     REP_STK_PTR                           REP_STK

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:17   


        1        1        /*T***********************************************************/
        2        2        /*T*                                                         */
        3        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        4        4        /*T*                                                         */
        5        5        /*T***********************************************************/
        6        6        /*-----*/
        7        7          Z9DM$READY_SSCHEMA: PROC (SCHEMA$, SUB_SCHEMA$, PRIVACY$)   ALTRET;

      7 13 000000   000000 700200 xent  Z9DM$READY_* TSX0  ! X66_AUTO_3
        13 000001   000022 000003                    ZERO    18,3
        13 000002   000105 710000 13                 TRA     s:14097

        8        8        /*-----*/
        9        9        /*I*
       10       10             NAME: READY_SSCHEMA
       11       11             PURPOSE:  Makes the subschema file ready.
       12       12
       13       13             CALL:  Call READY_SSCHEMA;
       14       14
       15       15
       16       16             PARAMETERS:
       17       17                    None.
       18       18             DATA:  Uses  PRIVACY$, SCHEMA$, and SUB_SCHEMA$.
       19       19
       20       20             DESCRIPTION:   The subschema file is found and opened.  If
       21       21                            the file is not present or the subschma has not
       22       22                            been validated, an ALTRETURN is invoked and
       23       23                            compilation is ended.  If the subschema is valid,
       24       24                            a new compile record is written to the file.  It
       25       25                            contains the UTS time, program id, subschema validation
       26       26                            time.  This record has a type of 1000.
       27       27        */
       28       28        %SET PHASE = 1;
       29       29        %INCLUDE Z8A_DEFC;
       30       97        %INCLUDE Z8A_SUPP_MAC;
       31     2497        %INCLUDE Z8A_SYS_FILE;
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:18   
       32     8772        %INCLUDE Z8E_DML;
       33     8892        %INCLUDE Z8A_ERR_NUMS;
       34     9656        %EQU EMPTY = 0;
       35     9657        %INCLUDE Z8A_COMCOM;
       36    10307        %INCLUDE Z8E_STACKS;
       37    12573        %INCLUDE Z8E_O1COM;
       38    13334        %INCLUDE Z8A_DNT;
       39    13555
       40    13556
       41    13557    1          DCL 1 BLOCK_CU  STATIC,
       42    13558    1                  2 NUM_CHAR  UBIN(9) UNAL INIT(3),
       43    13559    1                  2 NUMBER    UBIN(27) UNAL;
       44    13560
       45    13561    1          DCL 1 FILE_NAME STATIC,
       46    13562    1                  2 NUM_CHAR  UBIN(9) UNAL INIT(0),
       47    13563    1                  2 SUBSCH_NAME CHAR(30) UNAL;
       48    13564
       49    13565    1          DCL 1 BLOCK STATIC,
       50    13566    1                  2 NUM_CHAR  UBIN(9) UNAL INIT(3),
       51    13567    1                  2 NUMBER    UBIN(27) UNAL;
       52    13568
       53    13569    1          DCL RECORD_NUMBER   SBIN WORD STATIC;
       54    13570    1          DCL CURRENT_COMP_UNIT$ PTR STATIC;
       55    13571    1          DCL NEW_COMP_UNIT_B(0:63) SBIN STATIC;
       56    13572    1           DCL LOCK            CHAR(12);
       57    13573
       58    13574    1          DCL 1 NEW_COMP_UNIT   BASED(CURRENT_COMP_UNIT$),
       59    13575    1                  2 NEXT_CU   SBIN WORD,          /*V* 0 */
       60    13576    1                  2 * (0:1)             SBIN  WORD,   /*V* 1 */
       61    13577    1                  2 TYPE      SBIN WORD,          /*V* 3 */
       62    13578    1                  2 PROG_ID   CHAR(32),           /*V* 4-11 */
       63    13579    1                  2 AUTH      CHAR(32),           /*V* 12-19 */
       64    13580    1                  2 CDATE     CHAR(4),            /*V* 20 */
       65    13581    1                  2 COMP_TIME SBIN WORD,          /*V* 21 */
       66    13582    1                  2 SCDATE    CHAR(4),            /*V* 22 */
       67    13583    1                  2 SUB_COMP_TIME  SBIN WORD;     /*V* 23 */
       68    13584
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:19   
       69    13585    1          DCL  X_NUMBER    SBIN WORD  STATIC;
       70    13586    1           DCL  1  CONTROL_SEG   EXT,
       71    13587    1                  2  VALIDATION_STATUS SBIN WORD UNAL, /*V* 0 */
       72    13588    1                  2  TRANSLATE_STATUS  SBIN WORD UNAL, /*V* 1 */
       73    13589    1                  2  *                 SBIN WORD UNAL, /*V* 2 */
       74    13590    1                  2  TOKEN_TYPE        SBIN WORD UNAL, /*V* 3 */
       75    13591    1                  2 UWA                 SBIN  WORD,   /*V* 4 */
       76    13592    1                  2 *                   SBIN  WORD,   /*V* 5 */
       77    13593    1                  2 DATE                SBIN  WORD,   /*V* 6 */
       78    13594    1                  2 TIME                SBIN  WORD,   /*V* 7 */
       79    13595    1                  2 * (0:7)             SBIN  WORD,   /*V* 8-15 */
       80    13596    1                  2 SCH_NAME            CHAR(32),     /*V* 16-23 */
       81    13597    1                  2 SUB_NAME            CHAR(32),     /*V* 24-31 */
       82    13598    1                  2 SECOND_RECORD       SBIN  WORD,   /*V* 32 */
       83    13599    1                  2 * (0:8)             SBIN  WORD,   /*V* 33-41 */
       84    13600    1                  2 TDATE               SBIN WORD,    /*V* 42    */
       85    13601    1                  2 TTIME               SBIN WORD,    /*V* 43    */
       86    13602    1                  2 * (0:8)             SBIN  WORD,   /*V* 44-52 */
       87    13603    1                  2 LOCK                CHAR(12),     /*V* 53-55 */
       88    13604    1                  2 * (0:1)             SBIN  WORD,   /*V* 56-57 */
       89    13605    1                  2 NEXT_AV             SBIN  WORD,   /*V* 58 */
       90    13606    1                  2 FIRST_COMP          SBIN  WORD,   /*V* 59 */
       91    13607    1                  2 FIRST_NAME_SEG      SBIN  WORD,   /*V* 60 */
       92    13608    1                  2 *                   SBIN  WORD,   /*V* 61 */
       93    13609    1                  2 FIRST_NAME_SEGEXT   SBIN  WORD,   /*V* 62 */
       94    13610    1                  2 FIRST_INTER         SBIN  WORD;   /*V* 63 */
       95    13611    1   DCL  DCB_NUMBER    UBIN(18) EXT;
       96    13612    1   DCL  SUB_SCHEMA$   PTR;
       97    13613    1   DCL  SCHEMA$       PTR;
       98    13614    1   DCL  PRIVACY$      PTR;
       99    13615
      100    13616    1   DCL Z8AE$ERROR                  ENTRY(12);
      101    13617
      102    13618    1   DCL I  SBIN(18);
      103    13619         %EJECT;
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:20   
      104    13620
      105    13621        %F$DCB;
      106    13678        %FPT_READ(FPTN=READF,KEYS=YES,KEY=BLOCK,BUF=CONTROL_SEG);
      107    13717        %FPT_READ(FPTN=READCU,KEYS=YES,KEY=BLOCK_CU,BUF=NEW_COMP_UNIT_B);
      108    13756        %FPT_WRITE(FPTN=WRITEF,KEY=BLOCK,BUF=CONTROL_SEG);
      109    13787        %FPT_WRITE(FPTN=WRITECU,KEY=BLOCK_CU,BUF=NEW_COMP_UNIT_B);
      110    13818        %FPT_GETDCB(FPTN=GETF,DCBNUM=X_NUMBER,MERGE=YES,DCBNAME=FILE_NAME);
      111    13833        %FPT_OPEN(FPTN=OPENF,ASN=FILE,FUN=UPDATE,SHARE=ALL,
      112    13834                               ORG=KEYED,ACS=DIRECT);
      113    13943        %VLP_NAME(FPTN=PIST,NAME='HIST');
      114    13970        %FPT_ENQ(FPTN=MENQ,WAIT=YES,WAIT_TIME=-1,SHARE=NONE,RNAME=PIST);
      115    13988        %FPT_DEQ(FPTN=MDEQ,RNAME=PIST,RELRES=NO);
      116    14005        %FPT_CLOSE(FPTN=CLOSEF);
      117    14047
      118    14048        /*----*/
      119    14049    1     READ :  PROC;

  14049 13 000003   200012 741300       READ         STX1  ! I+1,,AUTO

      120    14050        /*----*/
      121    14051
      122    14052    2      DCL REMAINDER UBIN(18);
      123    14053
      124    14054    2   I = RECORD_NUMBER/2;

  14054 13 000004   000012 236000 10                 LDQ     RECORD_NUMBER
        13 000005   000002 506007                    DIV     2,DL
        13 000006   000000 620006                    EAX0    0,QL
        13 000007   200011 740100                    STX0    I,,AUTO

      125    14055    2   REMAINDER = RECORD_NUMBER - I * 2;

  14055 13 000010   200011 236100                    LDQ     I,,AUTO
        13 000011   777777 376003                    ANQ     -1,DU
        13 000012   000021 732000                    QRS     17
        13 000013   000000 676000 14                 ERQ     0
        13 000014   000001 036007                    ADLQ    1,DL
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:21   
        13 000015   000012 036000 10                 ADLQ    RECORD_NUMBER
        13 000016   000000 622006                    EAX2    0,QL
        13 000017   200013 742100                    STX2    REMAINDER,,AUTO

      126    14056    2   IF I ~= BLOCK_CU.NUMBER  THEN

  14056 13 000020   000000 236000 10                 LDQ     BLOCK_CU
        13 000021   000001 376000 14                 ANQ     1
        13 000022   200014 756100                    STQ     REMAINDER+1,,AUTO
        13 000023   200011 236100                    LDQ     I,,AUTO
        13 000024   000022 732000                    QRS     18
        13 000025   200014 116100                    CMPQ    REMAINDER+1,,AUTO
        13 000026   000051 600000 13                 TZE     s:14069

      127    14057    3     DO;

      128    14058    3      BLOCK_CU.NUMBER = I;

  14058 13 000027   000000 552034 10                 STBQ    BLOCK_CU,'34'O

      129    14059    3      CALL M$READ(READCU)

  14059 13 000030   000134 630400 10                 EPPR0   READCU
        13 000031   440000 713400                    CLIMB   alt,read
        13 000032   401400 401760                    pmme    nvectors=4
        13 000033   000035 702000 13                 TSX2    s:14062
        13 000034   000051 710000 13                 TRA     s:14069

      130    14060    3        WHENALTRETURN
      131    14061    4        DO;

      132    14062    5          DO I = 0 TO 63;

  14062 13 000035   000000 220003                    LDX0    0,DU
        13 000036   200011 740100                    STX0    I,,AUTO

      133    14063    5              NEW_COMP_UNIT_B(I) = 0;
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:22   

  14063 13 000037   200011 220100                    LDX0    I,,AUTO
        13 000040   000014 450010 10                 STZ     NEW_COMP_UNIT_B,X0

      134    14064    5          END;

  14064 13 000041   000001 621010                    EAX1    1,X0
        13 000042   200011 741100                    STX1    I,,AUTO
        13 000043   000077 101003                    CMPX1   63,DU
        13 000044   000037 604400 13                 TMOZ    s:14063

      135    14065    4          CURRENT_COMP_UNIT$ = ADDR(NEW_COMP_UNIT_B);

  14065 13 000045   000002 236000 14                 LDQ     2
        13 000046   000013 756000 10                 STQ     CURRENT_COMP_UNIT$

      136    14066    4          RETURN;

  14066 13 000047   200012 221300                    LDX1  ! I+1,,AUTO
        13 000050   000001 702211                    TSX2  ! 1,X1

      137    14067    4        END;
      138    14068    3     END;

      139    14069    2   IF REMAINDER = 0 THEN

  14069 13 000051   200013 220100                    LDX0    REMAINDER,,AUTO
        13 000052   000056 601000 13                 TNZ     s:14072

      140    14070    2      CURRENT_COMP_UNIT$ = ADDR(NEW_COMP_UNIT_B);

  14070 13 000053   000002 236000 14                 LDQ     2
        13 000054   000013 756000 10                 STQ     CURRENT_COMP_UNIT$
        13 000055   000060 710000 13                 TRA     s:14074

      141    14071    2   ELSE
      142    14072    2      CURRENT_COMP_UNIT$ = PINCRW(ADDR(NEW_COMP_UNIT_B),32);
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:23   

  14072 13 000056   000003 236000 14                 LDQ     3
        13 000057   000013 756000 10                 STQ     CURRENT_COMP_UNIT$

      143    14073
      144    14074    2   END READ;

  14074 13 000060   200012 221300                    LDX1  ! I+1,,AUTO
        13 000061   000001 702211                    TSX2  ! 1,X1

      145    14075         %EJECT;
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:24   
      146    14076        /*----------*/
      147    14077    1     CLOSE_FILE: PROC ALTRET;

  14077 13 000062   200012 741300       CLOSE_FILE   STX1  ! I+1,,AUTO

      148    14078        /*----------*/
      149    14079
      150    14080    2   CALL M$DEQ(MDEQ);

  14080 13 000063   000320 630400 10                 EPPR0   MDEQ
        13 000064   020003 713400                    CLIMB   8195
        13 000065   401000 401760                    pmme    nvectors=3

      151    14081    2   CALL M$CLOSE(CLOSEF);

  14081 13 000066   000330 630400 10                 EPPR0   CLOSEF
        13 000067   050001 713400                    CLIMB   close
        13 000070   406000 401760                    pmme    nvectors=13

      152    14082
      153    14083    2   END CLOSE_FILE;

  14083 13 000071   200012 221300                    LDX1  ! I+1,,AUTO
        13 000072   000001 702211                    TSX2  ! 1,X1

      154    14084
      155    14085        /*--------*/
      156    14086    1     WRITE_CU : PROC ALTRET;

  14086 13 000073   200012 741300       WRITE_CU     STX1  ! I+1,,AUTO

      157    14087        /*--------*/
      158    14088
      159    14089    2   CALL M$WRITE(WRITECU)

  14089 13 000074   000166 630400 10                 EPPR0   WRITECU
        13 000075   440001 713400                    CLIMB   alt,write
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:25   
        13 000076   401400 401760                    pmme    nvectors=4
        13 000077   000101 702000 13                 TSX2    s:14092
        13 000100   000103 710000 13                 TRA     s:14095

      160    14090    2     WHENALTRETURN
      161    14091    3     DO;

      162    14092    3       ALTRETURN;

  14092 13 000101   200012 221300                    LDX1  ! I+1,,AUTO
        13 000102   000000 702211                    TSX2  ! 0,X1

      163    14093    3     END;
      164    14094
      165    14095    2   END WRITE_CU;

  14095 13 000103   200012 221300                    LDX1  ! I+1,,AUTO
        13 000104   000001 702211                    TSX2  ! 1,X1

      166    14096         %EJECT;
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:26   
      167    14097    1   FILE_NAME.NUM_CHAR = SUB_SCHEMA$ -> LX_ITEM.DNT$->DNT.TEXT.LENGTH;

  14097 13 000105   200004 470500                    LDP0    @SUB_SCHEMA$,,AUTO
        13 000106   000000 471500                    LDP1    0,,PR0
        13 000107   100002 473500                    LDP3    2,,PR1
        13 000110   300004 236100                    LDQ     4,,PR3
        13 000111   000011 736000                    QLS     9
        13 000112   000001 552040 10                 STBQ    FILE_NAME,'40'O

      168    14098    1   FILE_NAME.SUBSCH_NAME = SUBSTR(SUB_SCHEMA$ -> LX_ITEM.DNT$->DNT.TEXT.NAME, 0,

  14098 13 000113   000000 471500                    LDP1    0,,PR0
        13 000114   100002 473500                    LDP3    2,,PR1
        13 000115   300004 220100                    LDX0    4,,PR3
        13 000116   040000 100540                    MLR     fill='040'O
        13 000117   300004 400010                    ADSC9   4,,PR3                   cn=2,n=*X0
        13 000120   000001 200036 10                 ADSC9   FILE_NAME                cn=1,n=30

      169    14099    1                                  SUB_SCHEMA$ -> LX_ITEM.DNT$ -> DNT.TEXT.LENGTH);
      170    14100
      171    14101    1   CALL M$GETDCB(GETF)

  14101 13 000121   000202 630400 10                 EPPR0   GETF
        13 000122   460002 713400                    CLIMB   alt,+24578
        13 000123   401000 401760                    pmme    nvectors=3
        13 000124   000126 702000 13                 TSX2    s:14104
        13 000125   000145 710000 13                 TRA     s:14108

      172    14102    1     WHENALTRETURN
      173    14103    2     DO;

      174    14104    2     CALL Z8AE$ERROR(%E$SUB_SCHEMA_NOT_PRESENT,SUB_SCHEMA$ -> LX_ITEM.LINE,SUB_SCHEMA$
             14104               -> LX_ITEM.COLUMN,SUB_SCHEMA$ -> LX_ITEM.DNT$);

  14104 13 000126   200004 470500                    LDP0    @SUB_SCHEMA$,,AUTO
        13 000127   000000 471500                    LDP1    0,,PR0
        13 000130   100002 633500                    EPPR3   2,,PR1
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:27   
        13 000131   200017 453500                    STP3    REMAINDER+4,,AUTO
        13 000132   100006 634500                    EPPR4   6,,PR1
        13 000133   200016 454500                    STP4    REMAINDER+3,,AUTO
        13 000134   100005 635500                    EPPR5   5,,PR1
        13 000135   200015 455500                    STP5    REMAINDER+2,,AUTO
        13 000136   000006 236000 14                 LDQ     6
        13 000137   200014 756100                    STQ     REMAINDER+1,,AUTO
        13 000140   200014 630500                    EPPR0   REMAINDER+1,,AUTO
        13 000141   000004 631400 14                 EPPR1   4
        13 000142   000000 701000 xent               TSX1    Z8AE$ERROR
        13 000143   000000 011000                    NOP     0

      175    14105    2      ALTRETURN;

  14105 13 000144   000000 702200 xent               TSX2  ! X66_AALT

      176    14106    2     END;
      177    14107
      178    14108    1   DCB_NUMBER    = X_NUMBER;

  14108 13 000145   000114 720000 10                 LXL0    X_NUMBER
        13 000146   000000 740000 12                 STX0    DCB_NUMBER

      179    14109    1   OPENF.V.DCB#  = DCB_NUMBER;

  14109 13 000147   000256 740000 10                 STX0    OPENF+36

      180    14110    1   MENQ.V.DCB#   = DCB_NUMBER;

  14110 13 000150   000314 740000 10                 STX0    MENQ+6

      181    14111    1   MDEQ.V.DCB#   = DCB_NUMBER;

  14111 13 000151   000326 740000 10                 STX0    MDEQ+6

      182    14112    1   CLOSEF.V.DCB# = DCB_NUMBER;

PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:28   
  14112 13 000152   000362 740000 10                 STX0    CLOSEF+26

      183    14113
      184    14114    1   IF COMCOM.OB.N6UPD THEN

  14114 13 000153   000117 234000 xsym               SZN     COMCOM+79
        13 000154   000157 605000 13                 TPL     s:14117

      185    14115    1     OPENF.V.FUN# = %IN#;

  14115 13 000155   002000 236007                    LDQ     1024,DL
        13 000156   000257 552010 10                 STBQ    OPENF+37,'10'O

      186    14116
      187    14117    1   CALL M$OPEN(OPENF)

  14117 13 000157   000212 630400 10                 EPPR0   OPENF
        13 000160   450000 713400                    CLIMB   alt,open
        13 000161   410400 401760                    pmme    nvectors=18
        13 000162   000164 702000 13                 TSX2    s:14120
        13 000163   000212 710000 13                 TRA     s:14132

      188    14118    1     WHENALTRETURN
      189    14119    2     DO;

      190    14120    2      OPENF.NAME_ = VECTOR(FILE_NAME);

  14120 13 000164   000010 237000 14                 LDAQ    8
        13 000165   000220 757000 10                 STAQ    OPENF+6

      191    14121    2      CALL M$OPEN(OPENF)

  14121 13 000166   000212 630400 10                 EPPR0   OPENF
        13 000167   450000 713400                    CLIMB   alt,open
        13 000170   410400 401760                    pmme    nvectors=18
        13 000171   000173 702000 13                 TSX2    s:14124
        13 000172   000212 710000 13                 TRA     s:14132
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:29   

      192    14122    2        WHENALTRETURN
      193    14123    3        DO;

      194    14124    3          CALL Z8AE$ERROR(%E$SUB_SCHEMA_NOT_PRESENT,

  14124 13 000173   200004 470500                    LDP0    @SUB_SCHEMA$,,AUTO
        13 000174   000000 471500                    LDP1    0,,PR0
        13 000175   100002 633500                    EPPR3   2,,PR1
        13 000176   200017 453500                    STP3    REMAINDER+4,,AUTO
        13 000177   100006 634500                    EPPR4   6,,PR1
        13 000200   200016 454500                    STP4    REMAINDER+3,,AUTO
        13 000201   100005 635500                    EPPR5   5,,PR1
        13 000202   200015 455500                    STP5    REMAINDER+2,,AUTO
        13 000203   000006 236000 14                 LDQ     6
        13 000204   200014 756100                    STQ     REMAINDER+1,,AUTO
        13 000205   200014 630500                    EPPR0   REMAINDER+1,,AUTO
        13 000206   000004 631400 14                 EPPR1   4
        13 000207   000000 701000 xent               TSX1    Z8AE$ERROR
        13 000210   000000 011000                    NOP     0

      195    14125    3                          SUB_SCHEMA$ -> LX_ITEM.LINE,
      196    14126    3                          SUB_SCHEMA$ -> LX_ITEM.COLUMN,
      197    14127    3                          SUB_SCHEMA$ -> LX_ITEM.DNT$);
      198    14128    3          ALTRETURN;

  14128 13 000211   000000 702200 xent               TSX2  ! X66_AALT

      199    14129    3      END;
      200    14130    2     END;

      201    14131
      202    14132    1   CALL M$ENQ(MENQ)

  14132 13 000212   000306 630400 10                 EPPR0   MENQ
        13 000213   420002 713400                    CLIMB   alt,+8194
        13 000214   401000 401760                    pmme    nvectors=3
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:30   
        13 000215   000217 702000 13                 TSX2    s:14135
        13 000216   000241 710000 13                 TRA     s:14143

      203    14133    1     WHENALTRETURN
      204    14134    2     DO;

      205    14135    2      CALL Z8AE$ERROR(%E$SUB_SCHEMA_NOT_PRESENT,

  14135 13 000217   200004 470500                    LDP0    @SUB_SCHEMA$,,AUTO
        13 000220   000000 471500                    LDP1    0,,PR0
        13 000221   100002 633500                    EPPR3   2,,PR1
        13 000222   200017 453500                    STP3    REMAINDER+4,,AUTO
        13 000223   100006 634500                    EPPR4   6,,PR1
        13 000224   200016 454500                    STP4    REMAINDER+3,,AUTO
        13 000225   100005 635500                    EPPR5   5,,PR1
        13 000226   200015 455500                    STP5    REMAINDER+2,,AUTO
        13 000227   000006 236000 14                 LDQ     6
        13 000230   200014 756100                    STQ     REMAINDER+1,,AUTO
        13 000231   200014 630500                    EPPR0   REMAINDER+1,,AUTO
        13 000232   000004 631400 14                 EPPR1   4
        13 000233   000000 701000 xent               TSX1    Z8AE$ERROR
        13 000234   000000 011000                    NOP     0

      206    14136    2                      SUB_SCHEMA$ -> LX_ITEM.LINE,
      207    14137    2                      SUB_SCHEMA$ -> LX_ITEM.COLUMN,
      208    14138    2                      SUB_SCHEMA$ -> LX_ITEM.DNT$);
      209    14139    2      CALL M$CLOSE(CLOSEF);

  14139 13 000235   000330 630400 10                 EPPR0   CLOSEF
        13 000236   050001 713400                    CLIMB   close
        13 000237   406000 401760                    pmme    nvectors=13

      210    14140    2      ALTRETURN;

  14140 13 000240   000000 702200 xent               TSX2  ! X66_AALT

      211    14141    2     END;
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:31   
      212    14142
      213    14143    1   READF.V.DCB#   = DCB_NUMBER;

  14143 13 000241   000000 220000 12                 LDX0    DCB_NUMBER
        13 000242   000126 740000 10                 STX0    READF+8

      214    14144    1   READCU.V.DCB#  = DCB_NUMBER;

  14144 13 000243   000144 740000 10                 STX0    READCU+8

      215    14145    1   WRITEF.V.DCB#  = DCB_NUMBER;

  14145 13 000244   000162 740000 10                 STX0    WRITEF+8

      216    14146    1   WRITECU.V.DCB# = DCB_NUMBER;

  14146 13 000245   000176 740000 10                 STX0    WRITECU+8

      217    14147    1   BLOCK.NUMBER   = 0;

  14147 13 000246   000000 236003                    LDQ     0,DU
        13 000247   000011 552034 10                 STBQ    BLOCK,'34'O

      218    14148
      219    14149    1   CALL M$READ(READF)

  14149 13 000250   000116 630400 10                 EPPR0   READF
        13 000251   440000 713400                    CLIMB   alt,read
        13 000252   401400 401760                    pmme    nvectors=4
        13 000253   000255 702000 13                 TSX2    s:14152
        13 000254   000274 710000 13                 TRA     s:14159

      220    14150    1     WHENALTRETURN
      221    14151    2     DO;

      222    14152    2      CALL Z8AE$ERROR(%E$ERROR_READING_SUB_SCHEMA,

PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:32   
  14152 13 000255   200004 470500                    LDP0    @SUB_SCHEMA$,,AUTO
        13 000256   000000 471500                    LDP1    0,,PR0
        13 000257   100002 633500                    EPPR3   2,,PR1
        13 000260   200017 453500                    STP3    REMAINDER+4,,AUTO
        13 000261   100006 634500                    EPPR4   6,,PR1
        13 000262   200016 454500                    STP4    REMAINDER+3,,AUTO
        13 000263   100005 635500                    EPPR5   5,,PR1
        13 000264   200015 455500                    STP5    REMAINDER+2,,AUTO
        13 000265   000013 236000 14                 LDQ     11
        13 000266   200014 756100                    STQ     REMAINDER+1,,AUTO
        13 000267   200014 630500                    EPPR0   REMAINDER+1,,AUTO
        13 000270   000004 631400 14                 EPPR1   4
        13 000271   000000 701000 xent               TSX1    Z8AE$ERROR
        13 000272   000000 011000                    NOP     0

      223    14153    2                      SUB_SCHEMA$ -> LX_ITEM.LINE,
      224    14154    2                      SUB_SCHEMA$ -> LX_ITEM.COLUMN,
      225    14155    2                      SUB_SCHEMA$ -> LX_ITEM.DNT$);
      226    14156    2      ALTRETURN;

  14156 13 000273   000000 702200 xent               TSX2  ! X66_AALT

      227    14157    2     END;
      228    14158
      229    14159    1   IF CONTROL_SEG.VALIDATION_STATUS ~= 30 THEN

  14159 13 000274   000000 235000 11                 LDA     CONTROL_SEG
        13 000275   000036 115007                    CMPA    30,DL
        13 000276   000316 600000 13                 TZE     s:14165

      230    14160    2     DO;

      231    14161    2      CALL Z8AE$ERROR(%E$SUB_SCHEMA_NOT_TRANSLATED,SUB_SCHEMA$->LX_ITEM.LINE,
             14161               SUB_SCHEMA$ -> LX_ITEM.COLUMN,SUB_SCHEMA$ -> LX_ITEM.DNT$);

  14161 13 000277   200004 470500                    LDP0    @SUB_SCHEMA$,,AUTO
        13 000300   000000 471500                    LDP1    0,,PR0
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:33   
        13 000301   100002 633500                    EPPR3   2,,PR1
        13 000302   200017 453500                    STP3    REMAINDER+4,,AUTO
        13 000303   100006 634500                    EPPR4   6,,PR1
        13 000304   200016 454500                    STP4    REMAINDER+3,,AUTO
        13 000305   100005 635500                    EPPR5   5,,PR1
        13 000306   200015 455500                    STP5    REMAINDER+2,,AUTO
        13 000307   000015 236000 14                 LDQ     13
        13 000310   200014 756100                    STQ     REMAINDER+1,,AUTO
        13 000311   200014 630500                    EPPR0   REMAINDER+1,,AUTO
        13 000312   000004 631400 14                 EPPR1   4
        13 000313   000000 701000 xent               TSX1    Z8AE$ERROR
        13 000314   000000 011000                    NOP     0

      232    14162    2      ALTRETURN;

  14162 13 000315   000000 702200 xent               TSX2  ! X66_AALT

      233    14163    2     END;
      234    14164
      235    14165    1   IF  SCHEMA$ -> LX_ITEM.DNT$->DNT.TEXT.NAME ~= CONTROL_SEG.SCH_NAME  THEN

  14165 13 000316   200003 470500                    LDP0    @SCHEMA$,,AUTO
        13 000317   000000 471500                    LDP1    0,,PR0
        13 000320   100002 473500                    LDP3    2,,PR1
        13 000321   300004 220100                    LDX0    4,,PR3
        13 000322   040000 106540                    CMPC    fill='040'O
        13 000323   300004 400010                    ADSC9   4,,PR3                   cn=2,n=*X0
        13 000324   000020 000040 11                 ADSC9   CONTROL_SEG+16           cn=0,n=32
        13 000325   000341 600000 13                 TZE     s:14171

      236    14166    2     DO;

      237    14167    2      CALL Z8AE$ERROR(%E$SCHEMA_NOT_KNOWN,,, SCHEMA$ -> LX_ITEM.DNT$);

  14167 13 000326   100002 634500                    EPPR4   2,,PR1
        13 000327   200017 454500                    STP4    REMAINDER+4,,AUTO
        13 000330   000017 236000 14                 LDQ     15
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:34   
        13 000331   200016 756100                    STQ     REMAINDER+3,,AUTO
        13 000332   000020 235000 14                 LDA     16
        13 000333   200014 757100                    STAQ    REMAINDER+1,,AUTO
        13 000334   200014 630500                    EPPR0   REMAINDER+1,,AUTO
        13 000335   000004 631400 14                 EPPR1   4
        13 000336   000000 701000 xent               TSX1    Z8AE$ERROR
        13 000337   000000 011000                    NOP     0

      238    14168    2      ALTRETURN;

  14168 13 000340   000000 702200 xent               TSX2  ! X66_AALT

      239    14169    2     END;
      240    14170
      241    14171    1   IF SUB_SCHEMA$ -> LX_ITEM.DNT$->DNT.TEXT.NAME ~= CONTROL_SEG.SUB_NAME THEN

  14171 13 000341   200004 474500                    LDP4    @SUB_SCHEMA$,,AUTO
        13 000342   400000 475500                    LDP5    0,,PR4
        13 000343   500002 476500                    LDP6    2,,PR5
        13 000344   600004 221100                    LDX1    4,,PR6
        13 000345   040000 106540                    CMPC    fill='040'O
        13 000346   600004 400011                    ADSC9   4,,PR6                   cn=2,n=*X1
        13 000347   000030 000040 11                 ADSC9   CONTROL_SEG+24           cn=0,n=32
        13 000350   000366 600000 13                 TZE     s:14180

      242    14172    2     DO;

      243    14173    2      CALL Z8AE$ERROR(%E$SUB_SCHEMA_NOT_KNOWN,

  14173 13 000351   500002 637500                    EPPR7   2,,PR5
        13 000352   200017 457500                    STP7    REMAINDER+4,,AUTO
        13 000353   500006 631500                    EPPR1   6,,PR5
        13 000354   200016 451500                    STP1    REMAINDER+3,,AUTO
        13 000355   500005 633500                    EPPR3   5,,PR5
        13 000356   200015 453500                    STP3    REMAINDER+2,,AUTO
        13 000357   000022 236000 14                 LDQ     18
        13 000360   200014 756100                    STQ     REMAINDER+1,,AUTO
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:35   
        13 000361   200014 630500                    EPPR0   REMAINDER+1,,AUTO
        13 000362   000004 631400 14                 EPPR1   4
        13 000363   000000 701000 xent               TSX1    Z8AE$ERROR
        13 000364   000000 011000                    NOP     0

      244    14174    2                      SUB_SCHEMA$ -> LX_ITEM.LINE,
      245    14175    2                      SUB_SCHEMA$ -> LX_ITEM.COLUMN,
      246    14176    2                      SUB_SCHEMA$ -> LX_ITEM.DNT$);
      247    14177    2      ALTRETURN;

  14177 13 000365   000000 702200 xent               TSX2  ! X66_AALT

      248    14178    2     END;
      249    14179
      250    14180    1   IF CONTROL_SEG.LOCK ~= ' ' THEN

  14180 13 000366   040000 106400                    CMPC    fill='040'O
        13 000367   000065 000014 11                 ADSC9   CONTROL_SEG+53           cn=0,n=12
        13 000370   000023 000001 14                 ADSC9   19                       cn=0,n=1
        13 000371   000444 600000 13                 TZE     s:14205

      251    14181    2     DO;

      252    14182    2       IF PRIVACY$ -> LX_ITEM.SYMBOL = %EMPTY         THEN

  14182 13 000372   200005 477500                    LDP7    @PRIVACY$,,AUTO
        13 000373   700000 470500                    LDP0    0,,PR7
        13 000374   000003 235100                    LDA     3,,PR0
        13 000375   000413 601000 13                 TNZ     s:14191

      253    14183    3         DO;

      254    14184    3           CALL Z8AE$ERROR(%E$PRIVACY_KEY_MISSING,

  14184 13 000376   500002 631500                    EPPR1   2,,PR5
        13 000377   200017 451500                    STP1    REMAINDER+4,,AUTO
        13 000400   500006 630500                    EPPR0   6,,PR5
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:36   
        13 000401   200016 450500                    STP0    REMAINDER+3,,AUTO
        13 000402   500005 633500                    EPPR3   5,,PR5
        13 000403   200015 453500                    STP3    REMAINDER+2,,AUTO
        13 000404   000025 236000 14                 LDQ     21
        13 000405   200014 756100                    STQ     REMAINDER+1,,AUTO
        13 000406   200014 630500                    EPPR0   REMAINDER+1,,AUTO
        13 000407   000004 631400 14                 EPPR1   4
        13 000410   000000 701000 xent               TSX1    Z8AE$ERROR
        13 000411   000000 011000                    NOP     0

      255    14185    3                           SUB_SCHEMA$ -> LX_ITEM.LINE,
      256    14186    3                           SUB_SCHEMA$ -> LX_ITEM.COLUMN,
      257    14187    3                           SUB_SCHEMA$ -> LX_ITEM.DNT$);
      258    14188    3           ALTRETURN;

  14188 13 000412   000000 702200 xent               TSX2  ! X66_AALT

      259    14189    3         END;
      260    14190
      261    14191    2       LOCK = SUBSTR(PRIVACY$ -> LX_ITEM.DNT$ -> DNT.TEXT.NAME, 1,

  14191 13 000413   000002 471500                    LDP1    2,,PR0
        13 000414   100004 220100                    LDX0    4,,PR1
        13 000415   777776 622010                    EAX2    -2,X0
        13 000416   040100 100540                    MLR     fill='040'O
        13 000417   100004 600012                    ADSC9   4,,PR1                   cn=3,n=*X2
        13 000420   200006 000014                    ADSC9   LOCK,,AUTO               cn=0,n=12

      262    14192    2                     PRIVACY$ -> LX_ITEM.DNT$ -> DNT.TEXT.LENGTH -2);
      263    14193
      264    14194    2      IF LOCK ~= CONTROL_SEG.LOCK THEN

  14194 13 000421   040000 106500                    CMPC    fill='040'O
        13 000422   200006 000014                    ADSC9   LOCK,,AUTO               cn=0,n=12
        13 000423   000065 000014 11                 ADSC9   CONTROL_SEG+53           cn=0,n=12
        13 000424   000444 600000 13                 TZE     s:14205

PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:37   
      265    14195    3        DO;

      266    14196    3          CALL Z8AE$ERROR(%E$PRIVACY_KEY_NO_MATCH,

  14196 13 000425   500002 633500                    EPPR3   2,,PR5
        13 000426   200020 453500                    STP3    REMAINDER+5,,AUTO
        13 000427   000002 631500                    EPPR1   2,,PR0
        13 000430   200017 451500                    STP1    REMAINDER+4,,AUTO
        13 000431   000006 635500                    EPPR5   6,,PR0
        13 000432   200016 455500                    STP5    REMAINDER+3,,AUTO
        13 000433   000005 636500                    EPPR6   5,,PR0
        13 000434   200015 456500                    STP6    REMAINDER+2,,AUTO
        13 000435   000030 236000 14                 LDQ     24
        13 000436   200014 756100                    STQ     REMAINDER+1,,AUTO
        13 000437   200014 630500                    EPPR0   REMAINDER+1,,AUTO
        13 000440   000026 631400 14                 EPPR1   22
        13 000441   000000 701000 xent               TSX1    Z8AE$ERROR
        13 000442   000000 011000                    NOP     0

      267    14197    3                          PRIVACY$ -> LX_ITEM.LINE,
      268    14198    3                          PRIVACY$ -> LX_ITEM.COLUMN,
      269    14199    3                          PRIVACY$ -> LX_ITEM.DNT$,
      270    14200    3                          SUB_SCHEMA$ -> LX_ITEM.DNT$);
      271    14201    3          ALTRETURN;

  14201 13 000443   000000 702200 xent               TSX2  ! X66_AALT

      272    14202    3        END;
      273    14203    2     END;
      274    14204
      275    14205    1   IF COMCOM.OB.N6UPD THEN

  14205 13 000444   000117 234000 xsym               SZN     COMCOM+79
        13 000445   000447 605000 13                 TPL     s:14208

      276    14206    1     RETURN; /* Do not update subschema */

PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:38   
  14206 13 000446   000000 702200 xent               TSX2  ! X66_ARET

      277    14207
      278    14208    1   BLOCK_CU.NUMBER = 0;

  14208 13 000447   000000 236003                    LDQ     0,DU
        13 000450   000000 552034 10                 STBQ    BLOCK_CU,'34'O

      279    14209    1   IF CONTROL_SEG.FIRST_COMP = 0 THEN

  14209 13 000451   000073 235000 11                 LDA     CONTROL_SEG+59
        13 000452   000540 601000 13                 TNZ     s:14246

      280    14210    2     DO;

      281    14211    2      CONTROL_SEG.FIRST_COMP = CONTROL_SEG.NEXT_AV;

  14211 13 000453   000072 235000 11                 LDA     CONTROL_SEG+58
        13 000454   000073 755000 11                 STA     CONTROL_SEG+59

      282    14212    2      RECORD_NUMBER = CONTROL_SEG.NEXT_AV;

  14212 13 000455   000012 755000 10                 STA     RECORD_NUMBER

      283    14213    2      CONTROL_SEG.NEXT_AV = CONTROL_SEG.NEXT_AV + 1;

  14213 13 000456   000072 054000 11                 AOS     CONTROL_SEG+58

      284    14214
      285    14215    2      CALL M$WRITE(WRITEF)

  14215 13 000457   000152 630400 10                 EPPR0   WRITEF
        13 000460   440001 713400                    CLIMB   alt,write
        13 000461   401400 401760                    pmme    nvectors=4
        13 000462   000464 702000 13                 TSX2    s:14218
        13 000463   000473 710000 13                 TRA     s:14223

PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:39   
      286    14216    2        WHENALTRETURN
      287    14217    3        DO;

      288    14218    3          CALL Z8AE$ERROR(%E$WRITE_ERROR);

  14218 13 000464   000033 630400 14                 EPPR0   27
        13 000465   000031 631400 14                 EPPR1   25
        13 000466   000000 701000 xent               TSX1    Z8AE$ERROR
        13 000467   000000 011000                    NOP     0

      289    14219    3          CALL CLOSE_FILE;

  14219 13 000470   000062 701000 13                 TSX1    CLOSE_FILE
        13 000471   000000 011000                    NOP     0

      290    14220    3          ALTRETURN;

  14220 13 000472   000000 702200 xent               TSX2  ! X66_AALT

      291    14221    3        END;
      292    14222
      293    14223    2      CALL READ;

  14223 13 000473   000003 701000 13                 TSX1    READ
        13 000474   000000 011000                    NOP     0

      294    14224    2      NEW_COMP_UNIT.NEXT_CU = 0;

  14224 13 000475   000013 470400 10                 LDP0    CURRENT_COMP_UNIT$
        13 000476   000000 450100                    STZ     0,,PR0

      295    14225    2      NEW_COMP_UNIT.TYPE = 1000;

  14225 13 000477   001750 235007                    LDA     1000,DL
        13 000500   000003 755100                    STA     3,,PR0

      296    14226    2      NEW_COMP_UNIT.PROG_ID = O1COM.PROG_ID_DNT$->DNT.TEXT.NAME;
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:40   

  14226 13 000501   000110 471400 xsym               LDP1    O1COM+72
        13 000502   100004 220100                    LDX0    4,,PR1
        13 000503   040100 100540                    MLR     fill='040'O
        13 000504   100004 400010                    ADSC9   4,,PR1                   cn=2,n=*X0
        13 000505   000004 000040                    ADSC9   4,,PR0                   cn=0,n=32

      297    14227    2      IF COMCOM.AUTHOR$ ~= ADDR(NIL)    THEN

  14227 13 000506   000505 236000 xsym               LDQ     COMCOM+325
        13 000507   000017 116000 14                 CMPQ    15
        13 000510   000516 600000 13                 TZE     s:14229

      298    14228    2        NEW_COMP_UNIT.AUTH = COMCOM.AUTHOR$ -> DNT.TEXT.NAME;

  14228 13 000511   000505 471400 xsym               LDP1    COMCOM+325
        13 000512   100004 220100                    LDX0    4,,PR1
        13 000513   040100 100540                    MLR     fill='040'O
        13 000514   100004 400010                    ADSC9   4,,PR1                   cn=2,n=*X0
        13 000515   000014 000040                    ADSC9   12,,PR0                  cn=0,n=32

      299    14229    2      NEW_COMP_UNIT.COMP_TIME = COMCOM.COMPILE.UTS;

  14229 13 000516   000137 236000 xsym               LDQ     COMCOM+95
        13 000517   000025 756100                    STQ     21,,PR0

      300    14230    2      NEW_COMP_UNIT.SUB_COMP_TIME = CONTROL_SEG.TTIME;

  14230 13 000520   000053 235000 11                 LDA     CONTROL_SEG+43
        13 000521   000027 755100                    STA     23,,PR0

      301    14231
      302    14232    2      CALL WRITE_CU

  14232 13 000522   000073 701000 13                 TSX1    WRITE_CU
        13 000523   000525 702000 13                 TSX2    s:14235
        13 000524   000534 710000 13                 TRA     s:14240
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:41   

      303    14233    2        WHENALTRETURN
      304    14234    3        DO;

      305    14235    3          CALL Z8AE$ERROR(%E$WRITE_ERROR);

  14235 13 000525   000033 630400 14                 EPPR0   27
        13 000526   000031 631400 14                 EPPR1   25
        13 000527   000000 701000 xent               TSX1    Z8AE$ERROR
        13 000530   000000 011000                    NOP     0

      306    14236    3          CALL CLOSE_FILE;

  14236 13 000531   000062 701000 13                 TSX1    CLOSE_FILE
        13 000532   000000 011000                    NOP     0

      307    14237    3          ALTRETURN;

  14237 13 000533   000000 702200 xent               TSX2  ! X66_AALT

      308    14238    3        END;
      309    14239
      310    14240    2      CALL M$DEQ(MDEQ);

  14240 13 000534   000320 630400 10                 EPPR0   MDEQ
        13 000535   020003 713400                    CLIMB   8195
        13 000536   401000 401760                    pmme    nvectors=3

      311    14241
      312    14242    2      RETURN;

  14242 13 000537   000000 702200 xent               TSX2  ! X66_ARET

      313    14243    2     END;
      314    14244    1   ELSE
      315    14245    2     DO;

PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:42   
      316    14246    2      RECORD_NUMBER = CONTROL_SEG.FIRST_COMP;

  14246 13 000540   000012 755000 10                 STA     RECORD_NUMBER

      317    14247
      318    14248    3      DO UNTIL ( NEW_COMP_UNIT.NEXT_CU <= 0 );

      319    14249    3          CALL READ;

  14249 13 000541   000003 701000 13                 TSX1    READ
        13 000542   000000 011000                    NOP     0

      320    14250    3          IF NEW_COMP_UNIT.PROG_ID = O1COM.PROG_ID_DNT$->DNT.TEXT.NAME  THEN

  14250 13 000543   000110 470400 xsym               LDP0    O1COM+72
        13 000544   000004 220100                    LDX0    4,,PR0
        13 000545   000013 471400 10                 LDP1    CURRENT_COMP_UNIT$
        13 000546   040140 106500                    CMPC    fill='040'O
        13 000547   100004 000040                    ADSC9   4,,PR1                   cn=0,n=32
        13 000550   000004 400010                    ADSC9   4,,PR0                   cn=2,n=*X0
        13 000551   000574 601000 13                 TNZ     s:14265

      321    14251    4            DO;

      322    14252    4              NEW_COMP_UNIT.COMP_TIME = COMCOM.COMPILE.UTS;

  14252 13 000552   000137 235000 xsym               LDA     COMCOM+95
        13 000553   100025 755100                    STA     21,,PR1

      323    14253    4              NEW_COMP_UNIT.SUB_COMP_TIME = CONTROL_SEG.TTIME;

  14253 13 000554   000053 236000 11                 LDQ     CONTROL_SEG+43
        13 000555   100027 756100                    STQ     23,,PR1

      324    14254    4              CALL WRITE_CU

  14254 13 000556   000073 701000 13                 TSX1    WRITE_CU
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:43   
        13 000557   000561 702000 13                 TSX2    s:14257
        13 000560   000570 710000 13                 TRA     s:14261

      325    14255    4                WHENALTRETURN
      326    14256    5                DO;

      327    14257    5                  CALL Z8AE$ERROR(%E$WRITE_ERROR);

  14257 13 000561   000033 630400 14                 EPPR0   27
        13 000562   000031 631400 14                 EPPR1   25
        13 000563   000000 701000 xent               TSX1    Z8AE$ERROR
        13 000564   000000 011000                    NOP     0

      328    14258    5                  CALL CLOSE_FILE;

  14258 13 000565   000062 701000 13                 TSX1    CLOSE_FILE
        13 000566   000000 011000                    NOP     0

      329    14259    5                  ALTRETURN;

  14259 13 000567   000000 702200 xent               TSX2  ! X66_AALT

      330    14260    5                END;
      331    14261    4              CALL M$DEQ(MDEQ);

  14261 13 000570   000320 630400 10                 EPPR0   MDEQ
        13 000571   020003 713400                    CLIMB   8195
        13 000572   401000 401760                    pmme    nvectors=3

      332    14262
      333    14263    4              RETURN;

  14263 13 000573   000000 702200 xent               TSX2  ! X66_ARET

      334    14264    4            END;
      335    14265    3          RECORD_NUMBER = NEW_COMP_UNIT.NEXT_CU;

PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:44   
  14265 13 000574   100000 235100                    LDA     0,,PR1
        13 000575   000012 755000 10                 STA     RECORD_NUMBER

      336    14266    3      END;

  14266 13 000576   000541 605400 13                 TPNZ    s:14249

      337    14267
      338    14268    2      NEW_COMP_UNIT.NEXT_CU = CONTROL_SEG.NEXT_AV;

  14268 13 000577   000072 236000 11                 LDQ     CONTROL_SEG+58
        13 000600   100000 756100                    STQ     0,,PR1

      339    14269    2      RECORD_NUMBER = CONTROL_SEG.NEXT_AV;

  14269 13 000601   000072 235000 11                 LDA     CONTROL_SEG+58
        13 000602   000012 755000 10                 STA     RECORD_NUMBER

      340    14270    2      CALL WRITE_CU

  14270 13 000603   000073 701000 13                 TSX1    WRITE_CU
        13 000604   000606 702000 13                 TSX2    s:14273
        13 000605   000615 710000 13                 TRA     s:14277

      341    14271    2        WHENALTRETURN
      342    14272    3        DO;

      343    14273    3          CALL Z8AE$ERROR(%E$WRITE_ERROR);

  14273 13 000606   000033 630400 14                 EPPR0   27
        13 000607   000031 631400 14                 EPPR1   25
        13 000610   000000 701000 xent               TSX1    Z8AE$ERROR
        13 000611   000000 011000                    NOP     0

      344    14274    3          CALL CLOSE_FILE;

  14274 13 000612   000062 701000 13                 TSX1    CLOSE_FILE
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:45   
        13 000613   000000 011000                    NOP     0

      345    14275    3          ALTRETURN;

  14275 13 000614   000000 702200 xent               TSX2  ! X66_AALT

      346    14276    3        END;
      347    14277    2      CALL READ;

  14277 13 000615   000003 701000 13                 TSX1    READ
        13 000616   000000 011000                    NOP     0

      348    14278    2      NEW_COMP_UNIT.NEXT_CU = 0;

  14278 13 000617   000013 470400 10                 LDP0    CURRENT_COMP_UNIT$
        13 000620   000000 450100                    STZ     0,,PR0

      349    14279    2      NEW_COMP_UNIT.TYPE = 1000;

  14279 13 000621   001750 235007                    LDA     1000,DL
        13 000622   000003 755100                    STA     3,,PR0

      350    14280    2      NEW_COMP_UNIT.PROG_ID = O1COM.PROG_ID_DNT$->DNT.TEXT.NAME;

  14280 13 000623   000110 471400 xsym               LDP1    O1COM+72
        13 000624   100004 220100                    LDX0    4,,PR1
        13 000625   040100 100540                    MLR     fill='040'O
        13 000626   100004 400010                    ADSC9   4,,PR1                   cn=2,n=*X0
        13 000627   000004 000040                    ADSC9   4,,PR0                   cn=0,n=32

      351    14281    2      IF COMCOM.AUTHOR$ ~= ADDR(NIL)    THEN

  14281 13 000630   000505 236000 xsym               LDQ     COMCOM+325
        13 000631   000017 116000 14                 CMPQ    15
        13 000632   000640 600000 13                 TZE     s:14283

      352    14282    2        NEW_COMP_UNIT.AUTH = COMCOM.AUTHOR$ -> DNT.TEXT.NAME;
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:46   

  14282 13 000633   000505 471400 xsym               LDP1    COMCOM+325
        13 000634   100004 220100                    LDX0    4,,PR1
        13 000635   040100 100540                    MLR     fill='040'O
        13 000636   100004 400010                    ADSC9   4,,PR1                   cn=2,n=*X0
        13 000637   000014 000040                    ADSC9   12,,PR0                  cn=0,n=32

      353    14283    2      NEW_COMP_UNIT.COMP_TIME = COMCOM.COMPILE.UTS;

  14283 13 000640   000137 236000 xsym               LDQ     COMCOM+95
        13 000641   000025 756100                    STQ     21,,PR0

      354    14284    2      NEW_COMP_UNIT.SUB_COMP_TIME = CONTROL_SEG.TTIME;

  14284 13 000642   000053 235000 11                 LDA     CONTROL_SEG+43
        13 000643   000027 755100                    STA     23,,PR0

      355    14285    2      CALL WRITE_CU

  14285 13 000644   000073 701000 13                 TSX1    WRITE_CU
        13 000645   000647 702000 13                 TSX2    s:14288
        13 000646   000656 710000 13                 TRA     s:14293

      356    14286    2        WHENALTRETURN
      357    14287    3        DO;

      358    14288    3          CALL Z8AE$ERROR(%E$WRITE_ERROR);

  14288 13 000647   000033 630400 14                 EPPR0   27
        13 000650   000031 631400 14                 EPPR1   25
        13 000651   000000 701000 xent               TSX1    Z8AE$ERROR
        13 000652   000000 011000                    NOP     0

      359    14289    3          CALL CLOSE_FILE;

  14289 13 000653   000062 701000 13                 TSX1    CLOSE_FILE
        13 000654   000000 011000                    NOP     0
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:47   

      360    14290    3          ALTRETURN;

  14290 13 000655   000000 702200 xent               TSX2  ! X66_AALT

      361    14291    3        END;
      362    14292
      363    14293    2       CONTROL_SEG.NEXT_AV = CONTROL_SEG.NEXT_AV + 1;

  14293 13 000656   000072 054000 11                 AOS     CONTROL_SEG+58

      364    14294    2       CALL M$WRITE(WRITEF)

  14294 13 000657   000152 630400 10                 EPPR0   WRITEF
        13 000660   440001 713400                    CLIMB   alt,write
        13 000661   401400 401760                    pmme    nvectors=4
        13 000662   000664 702000 13                 TSX2    s:14297
        13 000663   000673 710000 13                 TRA     s:14302

      365    14295    2         WHENALTRETURN
      366    14296    3         DO;

      367    14297    3           CALL Z8AE$ERROR(%E$WRITE_ERROR);

  14297 13 000664   000033 630400 14                 EPPR0   27
        13 000665   000031 631400 14                 EPPR1   25
        13 000666   000000 701000 xent               TSX1    Z8AE$ERROR
        13 000667   000000 011000                    NOP     0

      368    14298    3           CALL CLOSE_FILE;

  14298 13 000670   000062 701000 13                 TSX1    CLOSE_FILE
        13 000671   000000 011000                    NOP     0

      369    14299    3           ALTRETURN;

  14299 13 000672   000000 702200 xent               TSX2  ! X66_AALT
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:48   

      370    14300    3          END;
      371    14301
      372    14302    2      CALL M$DEQ(MDEQ);

  14302 13 000673   000320 630400 10                 EPPR0   MDEQ
        13 000674   020003 713400                    CLIMB   8195
        13 000675   401000 401760                    pmme    nvectors=3

      373    14303
      374    14304    2      RETURN;

  14304 13 000676   000000 702200 xent               TSX2  ! X66_ARET
      375    14305    2     END;
      376    14306
      377    14307         %EJECT;
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:49   
      378    14308    1   END Z9DM$READY_SSCHEMA;
      379    14309         %EOD;

PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:50   
--  Include file information  --

   Z8A_DNT.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8E_O1COM.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8A_LEX_SYMB.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8E_STACKS.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8A_COMCOM.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8A_ERR_NUMS.:Z8A6TOU  is referenced.
   Z8E_DML.:Z8A6TOU  is referenced.
   CP_6_SUBS.:LIB_E04  is referenced.
   CP_6_C.:LIB_E04  is referenced.
   CP_6.:LIB_E04  cannot be made into a system file and is referenced.
   Z9A_FLAGS.:Z8A6TOU  is referenced.
   Z8A_SYS_FILE.:Z8A6TOU  is referenced.
   X8A_COM_MACS.:X8A6TOU  is referenced.
   Z8A_NAMES.:Z8A6TOU  is referenced.
   Z8A_SUPP_MAC.:Z8A6TOU  is referenced.
   Z8A_DEFC.:Z8A6TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure Z9DM$READY_SSCHEMA.
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:51   

 **** Variables and constants ****

  ****  Section 000 LblCom ITERATION

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 ITERATION

  ****  Section 002 LblCom LEX_SYMBOL

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(3240)  r     1 LEX_SYMBOL                 0-0-0/w STRC(3240)        1 LEX_SYMBOL_WORDS

  ****  Section 003 LblCom CURRENT_LEX_SYMBOL$

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 CURRENT_LEX_SYMBOL$

  ****  Section 004 LblCom TEMP_LEX_SYMBOL

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(3240)        1 TEMP_LEX_SYMBOL

  ****  Section 005 LblCom TEMP_LEX_SYMBOL2

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(3240)        1 TEMP_LEX_SYMBOL2

PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:52   
  ****  Section 006 LblCom DNT$

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 DNT$

  ****  Section 007 LblCom DNT_

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(180)         1 DNT_

  ****  Section 008 LblCom DNT_BUCKET_NUMBER

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN              1 DNT_BUCKET_NUMBER

  ****  Section 009 LblCom DNT_OF_1$

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR               1 DNT_OF_1$

  ****  Section 010  Data  Z9DM$READY_SSCHEMA

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    11-0-0/b STRC        r     1 BLOCK                      0-0-0/b STRC        r     1 BLOCK_CU
   330-0-0/d STRC(1080)  r     1 CLOSEF                    13-0-0/w PTR         r     1 CURRENT_COMP_UNIT$
     1-0-0/c STRC(279)   r     1 FILE_NAME                202-0-0/d STRC(288)   r     1 GETF
   320-0-0/d STRC(288)   r     1 MDEQ                     306-0-0/d STRC(360)   r     1 MENQ
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:53   
    14-0-0/w SBIN        r     1 NEW_COMP_UNIT_B(0:63)
   212-0-0/d STRC(2088)  r     1 OPENF                    304-0-0/c STRC(45)    r     1 PIST
   134-0-0/d STRC(504)   r     1 READCU                   116-0-0/d STRC(504)   r     1 READF
    12-0-0/w SBIN        r     1 RECORD_NUMBER            166-0-0/d STRC(432)   r     1 WRITECU
   152-0-0/d STRC(432)   r     1 WRITEF                   114-0-0/w SBIN        r     1 X_NUMBER

  ****  Section 011 LblCom CONTROL_SEG

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2304)  r     1 CONTROL_SEG

  ****  Section 012 LblCom DCB_NUMBER

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN(18)    r     1 DCB_NUMBER

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     5-0-0/w PTR         r     1 @PRIVACY$                  3-0-0/w PTR         r     1 @SCHEMA$
     4-0-0/w PTR         r     1 @SUB_SCHEMA$              11-0-0/w SBIN(18)    r     1 I
     6-0-0/c CHAR(12)    r     1 LOCK                      *0-0-0/w PTR         r     1 PRIVACY$
    13-0-0/w UBIN(18)    r     1 REMAINDER                 *0-0-0/w PTR         r     1 SCHEMA$
    *0-0-0/w PTR         r     1 SUB_SCHEMA$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(13248) r     1 COMCOM
PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:54   
     0-0-0/w STRC(180)         1 HIER_STK(0:50)
     0-0-0/w SBIN              1 HIER_STK_PTR               0-0-0/d STRC(11580) r     1 O1COM
     0-0-0/w STRC(144)         1 PAGE_FORMAT                0-0-0/w STRC(153)         1 REP_STK(0:50)
     0-0-0/w SBIN              1 REP_STK_PTR

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(288)         1 ADD_STMT                   0-0-0/w ASTR(324)   r     1 BASED_LEX_SYMBOL
     0-0-0/w STRC(360)         1 BASED_LEX_SYMBOL_WORDS
     0-0-0/w STRC(288)         1 BINARY_OP                  0-0-0/w STRC(288)         1 CALL_STMT
     0-0-0/w CHAR(4096)        1 CHARS                      0-0-0/w STRC(288)         1 COMPUTE_STMT
     0-0-0/w STRC(72)          1 CONT                       0-0-0/w STRC(288)         1 DEFERED_IDENTIFIER
     0-0-0/w STRC(252)         1 DEFERED_ID_TREE            0-0-0/w STRC(288)         1 DEFERED_QUAL_ID
     0-0-0/w STRC(288)         1 DEFERED_SUM_CLAUSE
     0-0-0/w STRC(288)         1 DEFERED_SUM_CLAUSE_LIST
     0-0-0/w STRC(288)         1 DELETE_STMT                0-0-0/w STRC(288)         1 DIVIDE_STMT
     0-0-0/w ASTR(180)   r     1 DNT                        0-0-0/d ASTR(3528)  r     1 F$DCB
     0-0-0/w STRC(288)         1 ILS_LIST                   0-0-0/w STRC(288)         1 INSPECT_1_STMT
     0-0-0/w STRC(288)         1 INSPECT_2_STMT             0-0-0/w STRC(288)         1 INSPECT_4_STMT
     0-0-0/w STRC(288)         1 LA_ITEM                    0-0-0/w STRC(504)         1 LX_CD_INPUT
     0-0-0/w STRC(324)         1 LX_CD_I_O                  0-0-0/w STRC(396)         1 LX_CD_OUTPUT
     0-0-0/w STRC(288)         1 LX_ETT_ITEM                0-0-0/w STRC(288)   r     1 LX_ITEM
     0-0-0/w STRC(288)         1 LX_LARGE                   0-0-0/w STRC(288)         1 LX_LIST
     0-0-0/w STRC(1224)        1 LX_REC_DECL                0-0-0/w STRC(864)         1 LX_REPORT_REC
     0-0-0/w STRC(288)         1 LX_TERMINAL                0-0-0N  NULL        r     1 M$UC
     0-0-0/w STRC(288)         1 MULTIPLY_STMT              0-0-0/w STRC(864)   r     1 NEW_COMP_UNIT
     0-0-0/w STRC(36864)       1 PAGE                       0-0-0/w STRC(288)         1 READ_STMT
     0-0-0/w STRC(288)         1 REWRITE_STMT               0-0-0/w STRC(288)         1 START_STMT
     0-0-0/w STRC(252)         1 STRING_STMT                0-0-0/w STRC(288)         1 SUBTRACT_STMT
     0-0-0/w STRC(288)         1 UNARY_OP                   0-0-0/w STRC(288)         1 UNSTRING_STMT
     0-0-0/w STRC(288)         1 WRITE_STMT

PL6.E3A0      #001=Z9DM$READY_SSCHEMA File=Z9DM.:Z8A6TSI                         SAT 08/09/97 13:42 Page:55   

   Procedure Z9DM$READY_SSCHEMA requires 447 words for executable code.
   Procedure Z9DM$READY_SSCHEMA requires 18 words of local(AUTO) storage.

PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:56   
      380        1        /*T***********************************************************/
      381        2        /*T*                                                         */
      382        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      383        4        /*T*                                                         */
      384        5        /*T***********************************************************/
      385        6        /*--------------*/
      386        7        Z9DM$GET_SUB_SCHEMA: PROC(RETURN_PTR$, HEAD$);
      387        8        /*--------------*/
      388        9        /*I*
      389       10             NAME: GET_SUB_SCHEMA
      390       11             PURPOSE:
      391       12                   Return desired records from subschema file.
      392       13             CALL:
      393       14                   Call GET_SUB_SCHEMA;
      394       15
      395       16             PARAMETERS:
      396       17                   None.
      397       18             DATA:
      398       19
      399       20             DESCRIPTION:  Returns type 9, 31, 32, and 33 records.
      400       21                           Inserts the type 6 records into the extended
      401       22                           source file if the IDSLIST option is specified.
      402       23        */
      403       24        %SET PHASE = 1;
      404       25        %INCLUDE Z8A_DEFC;
      405       93        %INCLUDE Z8A_SUPP_MAC;
      406     2493        %INCLUDE Z8A_SYS_FILE;
      407     8768        %INCLUDE Z8E_DML;
      408     8888        %INCLUDE Z8A_ERR_NUMS;
      409     9652        %EQU EMPTY = 0;
      410     9653        %INCLUDE Z8A_COMCOM;
      411    10303        %INCLUDE Z8E_STACKS;
      412    12569        %INCLUDE Z8E_O1COM;
      413    13330        %INCLUDE Z8E_HEAP;
      414    13386        %INCLUDE Z8E_BUFFERS;
      415    13576        %INCLUDE Z8E_REPLACE;
      416    13879
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:57   
      417    13880
      418    13881        %FPT_READ(FPTN = READF, KEYS = YES, KEY = BLOCK, BUF = CONTROL_SEG);
      419    13920        %FPT_CLOSE(FPTN=CLOSEF);
      420    13962        %B$TCB;
      421    13965        %B$ALT;
      422    13973
      423    13974    1          DCL RETURN_PTR$    PTR;
      424    13975    1          DCL Z9AE$ISSUE_SYSTEM_ERROR   ENTRY(2);
      425    13976    1          DCL B$TCB$   PTR  SYMREF;
      426    13977
      427    13978    1   DCL  DCB_NUMBER    UBIN(18) EXT;
      428    13979    1          DCL  P$          PTR;
      429    13980    1          DCL  DML_STATE   SBIN STATIC INIT(0);
      430    13981    1          DCL  FIRST_E     SBIN STATIC;
      431    13982    1          DCL  IDS_BUF$    PTR;
      432    13983    1          DCL  HEAD$       PTR;
      433    13984    1          DCL  SAVE_HEAD$  PTR  STATIC;
      434    13985    1          DCL  LAST_HEAD$  PTR  STATIC;
      435    13986    1          DCL  RECORD_NUMBER  SBIN  STATIC;
      436    13987    1          DCL  ISN         SBIN STATIC;
      437    13988    1          DCL  ISN_INC     SBIN STATIC;
      438    13989    1          DCL  ESN_NUMBER  CHAR(10);
      439    13990    1          DCL  01   ESN        REDEF ESN_NUMBER,
      440    13991    1                  02  NUMBER   CHAR(5) UNAL,
      441    13992    1                  02  FILL     CHAR(5) UNAL;
      442    13993    1          DCL  1  BLOCK    STATIC,
      443    13994    1                  2 NUMBER_CHAR  UBIN(9) UNAL INIT(3),
      444    13995    1                  2 NUMBER       UBIN(27) UNAL INIT(0);
      445    13996
      446    13997    1          DCL END_SUBSCHEMA   CHAR(4) BASED(P$);
      447    13998    1          DCL TRANSLATE_WORD_TABLE(0:33) SBIN  WORD  BASED(P$);
      448    13999    1           DCL POSITION        UBIN;
      449    14000    1            DCL  1  CONTROL_SEG   EXT,
      450    14001    1                  2  VALIDATION_STATUS SBIN WORD UNAL, /*V* 0 */
      451    14002    1                  2  * (0:1)           SBIN WORD UNAL, /*V* 1 */
      452    14003    1                  2  TOKEN_TYPE        SBIN WORD UNAL, /*V* 3 */
      453    14004    1                  2 UWA                 SBIN  WORD,   /*V* 4 */
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:58   
      454    14005    1                  2 *                   SBIN  WORD,   /*V* 5 */
      455    14006    1                  2 DATE                SBIN  WORD,   /*V* 6 */
      456    14007    1                  2 TIME                SBIN  WORD,   /*V* 7 */
      457    14008    1                  2 * (0:7)             SBIN  WORD,   /*V* 8-15 */
      458    14009    1                  2 SCH_NAME            CHAR(32),     /*V* 16-23 */
      459    14010    1                  2 SUB_NAME            CHAR(32),     /*V* 24-31 */
      460    14011    1                  2 SECOND_RECORD       SBIN  WORD,   /*V* 32 */
      461    14012    1                  2 * (0:8)             SBIN  WORD,   /*V* 33-41 */
      462    14013    1                  2 TDATE               SBIN WORD,    /*V* 42    */
      463    14014    1                  2 TTIME               SBIN WORD,    /*V* 43    */
      464    14015    1                  2 * (0:8)             SBIN  WORD,   /*V* 44-52 */
      465    14016    1                  2 LOCK                CHAR(12),     /*V* 53-55 */
      466    14017    1                  2 * (0:1)             SBIN  WORD,   /*V* 56-57 */
      467    14018    1                  2 NEXT_AV             SBIN  WORD,   /*V* 58 */
      468    14019    1                  2 FIRST_COMP          SBIN  WORD,   /*V* 59 */
      469    14020    1                  2 FIRST_NAME_SEG      SBIN  WORD,   /*V* 60 */
      470    14021    1                  2 *                   SBIN  WORD,   /*V* 61 */
      471    14022    1                  2 FIRST_NAME_SEGEXT   SBIN  WORD,   /*V* 62 */
      472    14023    1                  2 FIRST_INTER         SBIN  WORD;   /*V* 63 */
      473    14024    1   DCL 01 TOKEN_6      BASED(P$),
      474    14025    1         02 * (0:1)    UBIN WORD UNAL,
      475    14026    1         02 COLUMN     UBIN WORD UNAL,
      476    14027    1         02 * (0:2)    UBIN WORD UNAL,
      477    14028    1         02 LINE       CHAR(80) UNAL,
      478    14029    1         02 * (0:4)    UBIN WORD UNAL;
      479    14030        %EJECT;
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:59   
      480    14031    1   LOOP:
      481    14032    2      DO FOREVER;
      482    14033
      483    14034    3          DO CASE (DML_STATE);
      484    14035
      485    14036    3              CASE ( 0 );
      486    14037
      487    14038    3                  BLOCK.NUMBER = 0;
      488    14039    3                  FIRST_E = CONTROL_SEG.FIRST_NAME_SEGEXT;
      489    14040    3                  READF.V.DCB# = DCB_NUMBER;
      490    14041    3                  DML_STATE = 1;
      491    14042    3                  P$ = ADDR(CONTROL_SEG);
      492    14043    3                  CONTROL_SEG.DATE = CONTROL_SEG.TDATE;
      493    14044    3                  CONTROL_SEG.TIME = CONTROL_SEG.TTIME;
      494    14045
      495    14046
      496    14047    3              CASE ( 1 );
      497    14048
      498    14049    3                  DML_STATE = 2;
      499    14050    3                  RECORD_NUMBER = CONTROL_SEG.FIRST_NAME_SEG;
      500    14051    3                  CALL READ(P$);
      501    14052    3                  IF P$ -> END_SUBSCHEMA = %END_SUBSCHEMA_VALUE THEN
      502    14053    4                    DO;
      503    14054    4                      RECORD_NUMBER = FIRST_E;
      504    14055    4                      DML_STATE = 3;
      505    14056    4                      CALL READ(P$);
      506    14057    4                    END;
      507    14058    3                  ISN = HEAD$ -> FILL_BUFFER.ISN;
      508    14059    3                  SAVE_HEAD$ = HEAD$ -> FILL_BUFFER.NEXT$;
      509    14060    3                  LAST_HEAD$ = HEAD$;
      510    14061    3                  ISN_INC = 0;
      511    14062    3                  ESN.FILL = '.000-';
      512    14063
      513    14064
      514    14065    3               CASE ( 2 );
      515    14066
      516    14067    3                    RECORD_NUMBER = RECORD_NUMBER + 1;
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:60   
      517    14068    3                    CALL READ(P$);
      518    14069    3                    IF P$->END_SUBSCHEMA = %END_SUBSCHEMA_VALUE THEN
      519    14070    4                      DO;
      520    14071    4                        RECORD_NUMBER = FIRST_E;
      521    14072    4                        DML_STATE = 3;
      522    14073    4                        CALL READ(P$);
      523    14074    4                      END;
      524    14075
      525    14076    3               CASE ( 3 );
      526    14077
      527    14078    3                    RECORD_NUMBER = RECORD_NUMBER + 1;
      528    14079    3                    CALL READ(P$);
      529    14080
      530    14081
      531    14082    3          END;      /*   CASE  DML_STATE    */
      532    14083
      533    14084    2          IF P$ ->END_SUBSCHEMA = %END_SUBSCHEMA_VALUE  THEN
      534    14085    3            DO;
      535    14086    3              RETURN_PTR$ = ADDR(NIL);
      536    14087    3              CLOSEF.V.DCB# = DCB_NUMBER;
      537    14088    3              CALL M$CLOSE(CLOSEF);
      538    14089    3              LAST_HEAD$ -> FILL_BUFFER.NEXT$ = SAVE_HEAD$;
      539    14090    3              CALL ADJUST_ISN;
      540    14091    3              RETURN;
      541    14092    3            END;
      542    14093
      543    14094    2          IF  P$ ->TRANSLATE_WORD_TABLE(3) = %TYPE_6       THEN
      544    14095    3            DO;
      545    14096    3               ISN_INC = ISN_INC + 1;
      546    14097    3               ISN = ISN + 1;
      547    14098
      548    14099    3               IF COMCOM.OB.IDSLIST      THEN
      549    14100    4                 DO;
      550    14101
      551    14102    4                   CALL BINCHAR(ESN.NUMBER, ISN_INC);
      552    14103
      553    14104    4                   POSITION = 0;
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:61   
      554    14105    5                   DO WHILE POSITION <= 4;
      555    14106    5                       IF SUBSTR(ESN.NUMBER,POSITION,1) = '0'   THEN
      556    14107    5                           SUBSTR(ESN.NUMBER,POSITION,1) = ' ';
      557    14108    5                       ELSE
      558    14109    5                           POSITION = 5;
      559    14110
      560    14111    5                       POSITION = POSITION + 1;
      561    14112    5                   END;
      562    14113
      563    14114                        %NEW_HEAP(@POINTER = IDS_BUF$,
      564    14115                                  @SIZE = %MAX_INPUT_BUFFER_LEN);
      565    14120    4                   IDS_BUF$ -> FILL_BUFFER.COLUMN = P$ -> TOKEN_6.COLUMN;
      566    14121    4                   IDS_BUF$ -> FILL_BUFFER.ESN = ESN_NUMBER;
      567    14122    4                   IDS_BUF$ -> FILL_BUFFER.ISN = ISN;
      568    14123    4                   IDS_BUF$ -> FILL_BUFFER.FLAGS = FALSE;
      569    14124    4                   IDS_BUF$ -> FILL_BUFFER.LINE_TYPE.IDS_LINE = %TRUE;
      570    14125    4                   IDS_BUF$ -> FILL_BUFFER.STRIPPED_LINE_LENGTH = 80;
      571    14126    4                   IDS_BUF$ -> FILL_BUFFER.LINE_LENGTH = 80;
      572    14127    4                   IDS_BUF$ -> FILL_BUFFER.SOURCE_LINE = P$ -> TOKEN_6.LINE;
      573    14128
      574    14129    4                   LAST_HEAD$ -> FILL_BUFFER.NEXT$ = IDS_BUF$;
      575    14130    4                   LAST_HEAD$ = IDS_BUF$;
      576    14131    4                 END;
      577    14132    3            END;
      578    14133
      579    14134
      580    14135    2          IF  P$ -> TRANSLATE_WORD_TABLE(3)  ~= %TYPE_6    THEN
      581    14136    3            DO;
      582    14137    3              RETURN_PTR$ = P$;
      583    14138    3              RETURN;
      584    14139    3            END;
      585    14140
      586    14141    2      END LOOP;
      587    14142         %EJECT;
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:62   
      588    14143        /*----------*/
      589    14144    1     ADJUST_ISN :  PROC ;
      590    14145        /*----------*/
      591    14146        /*I*
      592    14147             NAME: ADJUST_ISN
      593    14148             PURPOSE: adjust the internal sequence numbers for lines that
      594    14149                      already been brought in.
      595    14150             CALL: Call ADJUST_ISN
      596    14151
      597    14152
      598    14153             PARAMETERS:
      599    14154                    None.
      600    14155             DATA:
      601    14156
      602    14157             DESCRIPTION:  Corrects the ISN for lines after the subschema
      603    14158                           section that have been read in.
      604    14159        */
      605    14160        %EJECT;
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:63   
      606    14161
      607    14162    2       DCL T$      PTR;
      608    14163
      609    14164    2       LAST_HEAD$ -> FILL_BUFFER.LINE_TYPE.DB_LINE = TRUE;
      610    14165
      611    14166    3       DO WHILE SAVE_HEAD$ ~= ADDR(NIL)    AND
      612    14167    3                SAVE_HEAD$ ~= CURRENT_BUFFER$;
      613    14168
      614    14169    3           SAVE_HEAD$ -> FILL_BUFFER.ISN = SAVE_HEAD$ -> FILL_BUFFER.ISN + ISN_INC;
      615    14170    3           SAVE_HEAD$ = SAVE_HEAD$ -> FILL_BUFFER.NEXT$;
      616    14171    3       END;
      617    14172
      618    14173    2       IF SAVE_HEAD$ = CURRENT_BUFFER$      THEN
      619    14174    3         DO;
      620    14175    3           EXPANDED_ISN = EXPANDED_ISN + ISN_INC;
      621    14176    3           SAVE_HEAD$ -> FILL_BUFFER.ISN = SAVE_HEAD$ -> FILL_BUFFER.ISN + ISN_INC;
      622    14177    3           BUFFER.ISN = SAVE_HEAD$ -> FILL_BUFFER.ISN;
      623    14178    3         END;
      624    14179
      625    14180            /*V* Adjust tokens previously scanned */
      626    14181
      627    14182    2       T$ = LEX_SYMBOL_QUEUE$;
      628    14183    3       DO WHILE T$ ~= ADDR(NIL);
      629    14184    3           T$ -> BASED_LEX_SYMBOL.LINE = T$ -> BASED_LEX_SYMBOL.LINE + ISN_INC;
      630    14185    3           T$ -> BASED_LEX_SYMBOL.END_LINE = T$ -> BASED_LEX_SYMBOL.END_LINE + ISN_INC;
      631    14186    3           T$ = T$ -> BASED_LEX_SYMBOL.NEXT$;
      632    14187    3       END;
      633    14188
      634    14189    2   END ADJUST_ISN;
      635    14190        %EJECT;
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:64   
      636    14191        /*----*/
      637    14192    1     READ :  PROC(P$);
      638    14193        /*----*/
      639    14194
      640    14195    2          DCL   P$  PTR;
      641    14196    2          DCL   I   SBIN;
      642    14197    2          DCL   REMAINDER  UBIN(18);
      643    14198
      644    14199
      645    14200    2          I = RECORD_NUMBER/2;
      646    14201    2          REMAINDER = RECORD_NUMBER - (I * 2);
      647    14202
      648    14203    2          IF I ~= BLOCK.NUMBER   THEN
      649    14204    3            DO;
      650    14205    3              BLOCK.NUMBER = I;
      651    14206    3              CALL M$READ(READF)
      652    14207    3                  WHENALTRETURN
      653    14208    4                  DO;
      654    14209    4                     CALL Z9AE$ISSUE_SYSTEM_ERROR(B$TCB$->B$TCB.ALT$->B$ALT.ERR,
      655    14210    4                                                          ADDR(NIL));
      656    14211    4                  END;
      657    14212    3            END;
      658    14213
      659    14214    2          IF REMAINDER = 0  THEN
      660    14215    2              P$ = ADDR(CONTROL_SEG);
      661    14216    2          ELSE
      662    14217    2              P$ = ADDR(CONTROL_SEG.SECOND_RECORD);
      663    14218
      664    14219    2          RETURN;
      665    14220
      666    14221    2       END;                 /*V*  END READ    */
      667    14222
      668    14223    1   END Z9DM$GET_SUB_SCHEMA;

PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:65   
--  Include file information  --

   Z8E_REPLACE.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8E_BUFFERS.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8E_HEAP.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8E_O1COM.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8A_LEX_SYMB.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8E_STACKS.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8A_COMCOM.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8A_ERR_NUMS.:Z8A6TOU  is referenced.
   Z8E_DML.:Z8A6TOU  is referenced.
   CP_6_SUBS.:LIB_E04  is referenced.
   CP_6_C.:LIB_E04  is referenced.
   CP_6.:LIB_E04  cannot be made into a system file and is referenced.
   Z9A_FLAGS.:Z8A6TOU  is referenced.
   Z8A_SYS_FILE.:Z8A6TOU  is referenced.
   X8A_COM_MACS.:X8A6TOU  is referenced.
   Z8A_NAMES.:Z8A6TOU  is referenced.
   Z8A_SUPP_MAC.:Z8A6TOU  is referenced.
   Z8A_DEFC.:Z8A6TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure Z9DM$GET_SUB_SCHEMA.

   Procedure Z9DM$GET_SUB_SCHEMA requires 264 words for executable code.
   Procedure Z9DM$GET_SUB_SCHEMA requires 20 words of local(AUTO) storage.

    No errors detected in file Z9DM.:Z8A6TSI    .

PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:66   

 Object Unit name= Z9DM$GET_SUB_SCHEMA                        File name= Z9DM.:Z8A6TOU
 UTS= AUG 09 '97 13:44:20.64 SAT                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  LblCom even  none     1      1  ITERATION
    1   DCB   even  none     0      0  M$UC
    2  LblCom even  none    90    132  LEX_SYMBOL
    3  LblCom even  none     1      1  CURRENT_LEX_SYMBOL$
    4  LblCom even  none    90    132  TEMP_LEX_SYMBOL
    5  LblCom even  none    90    132  TEMP_LEX_SYMBOL2
    6  LblCom even  none     1      1  HEAP$
    7  LblCom even  none     1      1  SCANNER_STATE
    8  LblCom even  none     1      1  CURRENT_BUFFER$
    9  LblCom even  none     1      1  LOOKAHEAD_BUFFER$
   10  LblCom even  none     1      1  CURRENT_LINE_LEVEL
   11  LblCom even  none     1      1  LINE_LIST$
   12  LblCom even  none     7      7  BUFFER
   13  LblCom even  none     1      1  ORIGINAL_ISN
   14  LblCom even  none     1      1  EXPANDED_ISN
   15  LblCom even  none     1      1  ISN_FOR_EXP_SRC
   16  LblCom even  none     1      1  CURRENT_SYMBOL_LEVEL
   17  LblCom even  none     1      1  REPLACE_ACTIVE
   18  LblCom even  none     1      1  IGNORE_COPY_REPLACE
   19  LblCom even  none     1      1  COPY_DEBUG_LEVEL
   20  LblCom even  none     4      4  REPLACE_LIST
   21  LblCom even  none     1      1  LEX_SYMBOL_QUEUE$
   22   Data  even  none    52     64  Z9DM$GET_SUB_SCHEMA
   23  LblCom even  none     1      1  DCB_NUMBER
   24  LblCom even  none    64    100  CONTROL_SEG
   25  RoData even  UTS      3      3  Z9DM$GET_SUB_SCHEMA
   26   Proc  even  none   264    410  Z9DM$GET_SUB_SCHEMA
   27  RoData even  none    10     12  Z9DM$GET_SUB_SCHEMA
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:67   

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
    26      0   yes            yes      Std        2  Z9DM$GET_SUB_SCHEMA

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       2 Z8ED$NEW_HEAP
         yes           Std       2 Z9AE$ISSUE_SYSTEM_ERROR
                       nStd      0 X66_AUTO_2
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  COMCOM                                O1COM
     HIER_STK_PTR                          HIER_STK                              PAGE_FORMAT
     REP_STK_PTR                           REP_STK                               B$TCB$

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:68   


      380        1        /*T***********************************************************/
      381        2        /*T*                                                         */
      382        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      383        4        /*T*                                                         */
      384        5        /*T***********************************************************/
      385        6        /*--------------*/
      386        7        Z9DM$GET_SUB_SCHEMA: PROC(RETURN_PTR$, HEAD$);

      7 26 000000   000000 700200 xent  Z9DM$GET_SU* TSX0  ! X66_AUTO_2
        26 000001   000024 000002                    ZERO    20,2

      387        8        /*--------------*/
      388        9        /*I*
      389       10             NAME: GET_SUB_SCHEMA
      390       11             PURPOSE:
      391       12                   Return desired records from subschema file.
      392       13             CALL:
      393       14                   Call GET_SUB_SCHEMA;
      394       15
      395       16             PARAMETERS:
      396       17                   None.
      397       18             DATA:
      398       19
      399       20             DESCRIPTION:  Returns type 9, 31, 32, and 33 records.
      400       21                           Inserts the type 6 records into the extended
      401       22                           source file if the IDSLIST option is specified.
      402       23        */
      403       24        %SET PHASE = 1;
      404       25        %INCLUDE Z8A_DEFC;
      405       93        %INCLUDE Z8A_SUPP_MAC;
      406     2493        %INCLUDE Z8A_SYS_FILE;
      407     8768        %INCLUDE Z8E_DML;
      408     8888        %INCLUDE Z8A_ERR_NUMS;
      409     9652        %EQU EMPTY = 0;
      410     9653        %INCLUDE Z8A_COMCOM;
      411    10303        %INCLUDE Z8E_STACKS;
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:69   
      412    12569        %INCLUDE Z8E_O1COM;
      413    13330        %INCLUDE Z8E_HEAP;
      414    13386        %INCLUDE Z8E_BUFFERS;
      415    13576        %INCLUDE Z8E_REPLACE;
      416    13879
      417    13880
      418    13881        %FPT_READ(FPTN = READF, KEYS = YES, KEY = BLOCK, BUF = CONTROL_SEG);
      419    13920        %FPT_CLOSE(FPTN=CLOSEF);
      420    13962        %B$TCB;
      421    13965        %B$ALT;
      422    13973
      423    13974    1          DCL RETURN_PTR$    PTR;
      424    13975    1          DCL Z9AE$ISSUE_SYSTEM_ERROR   ENTRY(2);
      425    13976    1          DCL B$TCB$   PTR  SYMREF;
      426    13977
      427    13978    1   DCL  DCB_NUMBER    UBIN(18) EXT;
      428    13979    1          DCL  P$          PTR;
      429    13980    1          DCL  DML_STATE   SBIN STATIC INIT(0);
      430    13981    1          DCL  FIRST_E     SBIN STATIC;
      431    13982    1          DCL  IDS_BUF$    PTR;
      432    13983    1          DCL  HEAD$       PTR;
      433    13984    1          DCL  SAVE_HEAD$  PTR  STATIC;
      434    13985    1          DCL  LAST_HEAD$  PTR  STATIC;
      435    13986    1          DCL  RECORD_NUMBER  SBIN  STATIC;
      436    13987    1          DCL  ISN         SBIN STATIC;
      437    13988    1          DCL  ISN_INC     SBIN STATIC;
      438    13989    1          DCL  ESN_NUMBER  CHAR(10);
      439    13990    1          DCL  01   ESN        REDEF ESN_NUMBER,
      440    13991    1                  02  NUMBER   CHAR(5) UNAL,
      441    13992    1                  02  FILL     CHAR(5) UNAL;
      442    13993    1          DCL  1  BLOCK    STATIC,
      443    13994    1                  2 NUMBER_CHAR  UBIN(9) UNAL INIT(3),
      444    13995    1                  2 NUMBER       UBIN(27) UNAL INIT(0);
      445    13996
      446    13997    1          DCL END_SUBSCHEMA   CHAR(4) BASED(P$);
      447    13998    1          DCL TRANSLATE_WORD_TABLE(0:33) SBIN  WORD  BASED(P$);
      448    13999    1           DCL POSITION        UBIN;
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:70   
      449    14000    1            DCL  1  CONTROL_SEG   EXT,
      450    14001    1                  2  VALIDATION_STATUS SBIN WORD UNAL, /*V* 0 */
      451    14002    1                  2  * (0:1)           SBIN WORD UNAL, /*V* 1 */
      452    14003    1                  2  TOKEN_TYPE        SBIN WORD UNAL, /*V* 3 */
      453    14004    1                  2 UWA                 SBIN  WORD,   /*V* 4 */
      454    14005    1                  2 *                   SBIN  WORD,   /*V* 5 */
      455    14006    1                  2 DATE                SBIN  WORD,   /*V* 6 */
      456    14007    1                  2 TIME                SBIN  WORD,   /*V* 7 */
      457    14008    1                  2 * (0:7)             SBIN  WORD,   /*V* 8-15 */
      458    14009    1                  2 SCH_NAME            CHAR(32),     /*V* 16-23 */
      459    14010    1                  2 SUB_NAME            CHAR(32),     /*V* 24-31 */
      460    14011    1                  2 SECOND_RECORD       SBIN  WORD,   /*V* 32 */
      461    14012    1                  2 * (0:8)             SBIN  WORD,   /*V* 33-41 */
      462    14013    1                  2 TDATE               SBIN WORD,    /*V* 42    */
      463    14014    1                  2 TTIME               SBIN WORD,    /*V* 43    */
      464    14015    1                  2 * (0:8)             SBIN  WORD,   /*V* 44-52 */
      465    14016    1                  2 LOCK                CHAR(12),     /*V* 53-55 */
      466    14017    1                  2 * (0:1)             SBIN  WORD,   /*V* 56-57 */
      467    14018    1                  2 NEXT_AV             SBIN  WORD,   /*V* 58 */
      468    14019    1                  2 FIRST_COMP          SBIN  WORD,   /*V* 59 */
      469    14020    1                  2 FIRST_NAME_SEG      SBIN  WORD,   /*V* 60 */
      470    14021    1                  2 *                   SBIN  WORD,   /*V* 61 */
      471    14022    1                  2 FIRST_NAME_SEGEXT   SBIN  WORD,   /*V* 62 */
      472    14023    1                  2 FIRST_INTER         SBIN  WORD;   /*V* 63 */
      473    14024    1   DCL 01 TOKEN_6      BASED(P$),
      474    14025    1         02 * (0:1)    UBIN WORD UNAL,
      475    14026    1         02 COLUMN     UBIN WORD UNAL,
      476    14027    1         02 * (0:2)    UBIN WORD UNAL,
      477    14028    1         02 LINE       CHAR(80) UNAL,
      478    14029    1         02 * (0:4)    UBIN WORD UNAL;
      479    14030        %EJECT;
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:71   
      480    14031    1   LOOP:
      481    14032    2      DO FOREVER;

  14032 26 000002                       LOOP         null
      482    14033
      483    14034    3          DO CASE (DML_STATE);

  14034 26 000002   000054 235000 22                 LDA     DML_STATE
        26 000003   000004 115007                    CMPA    4,DL
        26 000004   000006 602005 26                 TNC     LOOP+4,AL
        26 000005   000123 710000 26                 TRA     s:14084
        26 000006   000012 710000 26                 TRA     s:14038
        26 000007   000031 710000 26                 TRA     s:14049
        26 000010   000073 710000 26                 TRA     s:14067
        26 000011   000116 710000 26                 TRA     s:14078

      484    14035
      485    14036    3              CASE ( 0 );

      486    14037
      487    14038    3                  BLOCK.NUMBER = 0;

  14038 26 000012   000000 236003                    LDQ     0,DU
        26 000013   000063 552034 22                 STBQ    BLOCK,'34'O

      488    14039    3                  FIRST_E = CONTROL_SEG.FIRST_NAME_SEGEXT;

  14039 26 000014   000076 235000 24                 LDA     CONTROL_SEG+62
        26 000015   000055 755000 22                 STA     FIRST_E

      489    14040    3                  READF.V.DCB# = DCB_NUMBER;

  14040 26 000016   000000 220000 23                 LDX0    DCB_NUMBER
        26 000017   000010 740000 22                 STX0    READF+8

      490    14041    3                  DML_STATE = 1;

PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:72   
  14041 26 000020   000001 235007                    LDA     1,DL
        26 000021   000054 755000 22                 STA     DML_STATE

      491    14042    3                  P$ = ADDR(CONTROL_SEG);

  14042 26 000022   000000 236000 27                 LDQ     0
        26 000023   200005 756100                    STQ     P$,,AUTO

      492    14043    3                  CONTROL_SEG.DATE = CONTROL_SEG.TDATE;

  14043 26 000024   000052 235000 24                 LDA     CONTROL_SEG+42
        26 000025   000006 755000 24                 STA     CONTROL_SEG+6

      493    14044    3                  CONTROL_SEG.TIME = CONTROL_SEG.TTIME;

  14044 26 000026   000053 235000 24                 LDA     CONTROL_SEG+43
        26 000027   000007 755000 24                 STA     CONTROL_SEG+7
        26 000030   000123 710000 26                 TRA     s:14084

      494    14045
      495    14046
      496    14047    3              CASE ( 1 );

      497    14048
      498    14049    3                  DML_STATE = 2;

  14049 26 000031   000002 236007                    LDQ     2,DL
        26 000032   000054 756000 22                 STQ     DML_STATE

      499    14050    3                  RECORD_NUMBER = CONTROL_SEG.FIRST_NAME_SEG;

  14050 26 000033   000074 235000 24                 LDA     CONTROL_SEG+60
        26 000034   000060 755000 22                 STA     RECORD_NUMBER

      500    14051    3                  CALL READ(P$);

  14051 26 000035   200005 630500                    EPPR0   P$,,AUTO
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:73   
        26 000036   200015 450500                    STP0    POSITION+3,,AUTO
        26 000037   000334 701000 26                 TSX1    READ
        26 000040   000000 011000                    NOP     0

      501    14052    3                  IF P$ -> END_SUBSCHEMA = %END_SUBSCHEMA_VALUE THEN

  14052 26 000041   200005 470500                    LDP0    P$,,AUTO
        26 000042   040000 106500                    CMPC    fill='040'O
        26 000043   000000 000004                    ADSC9   0,,PR0                   cn=0,n=4
        26 000044   000000 000004 25                 ADSC9   0                        cn=0,n=4
        26 000045   000056 601000 26                 TNZ     s:14058

      502    14053    4                    DO;

      503    14054    4                      RECORD_NUMBER = FIRST_E;

  14054 26 000046   000055 235000 22                 LDA     FIRST_E
        26 000047   000060 755000 22                 STA     RECORD_NUMBER

      504    14055    4                      DML_STATE = 3;

  14055 26 000050   000003 236007                    LDQ     3,DL
        26 000051   000054 756000 22                 STQ     DML_STATE

      505    14056    4                      CALL READ(P$);

  14056 26 000052   200005 631500                    EPPR1   P$,,AUTO
        26 000053   200015 451500                    STP1    POSITION+3,,AUTO
        26 000054   000334 701000 26                 TSX1    READ
        26 000055   000000 011000                    NOP     0

      506    14057    4                    END;

      507    14058    3                  ISN = HEAD$ -> FILL_BUFFER.ISN;

  14058 26 000056   200004 470500                    LDP0    @HEAD$,,AUTO
        26 000057   000000 471500                    LDP1    0,,PR0
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:74   
        26 000060   100004 235100                    LDA     4,,PR1
        26 000061   000061 755000 22                 STA     ISN

      508    14059    3                  SAVE_HEAD$ = HEAD$ -> FILL_BUFFER.NEXT$;

  14059 26 000062   100002 236100                    LDQ     2,,PR1
        26 000063   000056 756000 22                 STQ     SAVE_HEAD$

      509    14060    3                  LAST_HEAD$ = HEAD$;

  14060 26 000064   000000 236100                    LDQ     0,,PR0
        26 000065   000057 756000 22                 STQ     LAST_HEAD$

      510    14061    3                  ISN_INC = 0;

  14061 26 000066   000062 450000 22                 STZ     ISN_INC

      511    14062    3                  ESN.FILL = '.000-';

  14062 26 000067   040100 100400                    MLR     fill='040'O
        26 000070   000001 000005 25                 ADSC9   1                        cn=0,n=5
        26 000071   200010 200005                    ADSC9   ESN_NUMBER+1,,AUTO       cn=1,n=5
        26 000072   000123 710000 26                 TRA     s:14084

      512    14063
      513    14064
      514    14065    3               CASE ( 2 );

      515    14066
      516    14067    3                    RECORD_NUMBER = RECORD_NUMBER + 1;

  14067 26 000073   000060 054000 22                 AOS     RECORD_NUMBER

      517    14068    3                    CALL READ(P$);

  14068 26 000074   200005 630500                    EPPR0   P$,,AUTO
        26 000075   200015 450500                    STP0    POSITION+3,,AUTO
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:75   
        26 000076   000334 701000 26                 TSX1    READ
        26 000077   000000 011000                    NOP     0

      518    14069    3                    IF P$->END_SUBSCHEMA = %END_SUBSCHEMA_VALUE THEN

  14069 26 000100   200005 470500                    LDP0    P$,,AUTO
        26 000101   040000 106500                    CMPC    fill='040'O
        26 000102   000000 000004                    ADSC9   0,,PR0                   cn=0,n=4
        26 000103   000000 000004 25                 ADSC9   0                        cn=0,n=4
        26 000104   000123 601000 26                 TNZ     s:14084

      519    14070    4                      DO;

      520    14071    4                        RECORD_NUMBER = FIRST_E;

  14071 26 000105   000055 235000 22                 LDA     FIRST_E
        26 000106   000060 755000 22                 STA     RECORD_NUMBER

      521    14072    4                        DML_STATE = 3;

  14072 26 000107   000003 236007                    LDQ     3,DL
        26 000110   000054 756000 22                 STQ     DML_STATE

      522    14073    4                        CALL READ(P$);

  14073 26 000111   200005 631500                    EPPR1   P$,,AUTO
        26 000112   200015 451500                    STP1    POSITION+3,,AUTO
        26 000113   000334 701000 26                 TSX1    READ
        26 000114   000000 011000                    NOP     0

      523    14074    4                      END;

  14074 26 000115   000123 710000 26                 TRA     s:14084

      524    14075
      525    14076    3               CASE ( 3 );

PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:76   
      526    14077
      527    14078    3                    RECORD_NUMBER = RECORD_NUMBER + 1;

  14078 26 000116   000060 054000 22                 AOS     RECORD_NUMBER

      528    14079    3                    CALL READ(P$);

  14079 26 000117   200005 630500                    EPPR0   P$,,AUTO
        26 000120   200015 450500                    STP0    POSITION+3,,AUTO
        26 000121   000334 701000 26                 TSX1    READ
        26 000122   000000 011000                    NOP     0

      529    14080
      530    14081
      531    14082    3          END;      /*   CASE  DML_STATE    */

      532    14083
      533    14084    2          IF P$ ->END_SUBSCHEMA = %END_SUBSCHEMA_VALUE  THEN

  14084 26 000123   200005 470500                    LDP0    P$,,AUTO
        26 000124   040000 106500                    CMPC    fill='040'O
        26 000125   000000 000004                    ADSC9   0,,PR0                   cn=0,n=4
        26 000126   000000 000004 25                 ADSC9   0                        cn=0,n=4
        26 000127   000146 601000 26                 TNZ     s:14094

      534    14085    3            DO;

      535    14086    3              RETURN_PTR$ = ADDR(NIL);

  14086 26 000130   000001 236000 27                 LDQ     1
        26 000131   200003 471500                    LDP1    @RETURN_PTR$,,AUTO
        26 000132   100000 756100                    STQ     0,,PR1

      536    14087    3              CLOSEF.V.DCB# = DCB_NUMBER;

  14087 26 000133   000000 220000 23                 LDX0    DCB_NUMBER
        26 000134   000050 740000 22                 STX0    CLOSEF+26
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:77   

      537    14088    3              CALL M$CLOSE(CLOSEF);

  14088 26 000135   000016 630400 22                 EPPR0   CLOSEF
        26 000136   050001 713400                    CLIMB   close
        26 000137   406000 401760                    pmme    nvectors=13

      538    14089    3              LAST_HEAD$ -> FILL_BUFFER.NEXT$ = SAVE_HEAD$;

  14089 26 000140   000056 236000 22                 LDQ     SAVE_HEAD$
        26 000141   000057 470400 22                 LDP0    LAST_HEAD$
        26 000142   000002 756100                    STQ     2,,PR0

      539    14090    3              CALL ADJUST_ISN;

  14090 26 000143   000262 701000 26                 TSX1    ADJUST_ISN
        26 000144   000000 011000                    NOP     0

      540    14091    3              RETURN;

  14091 26 000145   000000 702200 xent               TSX2  ! X66_ARET

      541    14092    3            END;
      542    14093
      543    14094    2          IF  P$ ->TRANSLATE_WORD_TABLE(3) = %TYPE_6       THEN

  14094 26 000146   000003 235100                    LDA     3,,PR0
        26 000147   000006 115007                    CMPA    6,DL
        26 000150   000252 601000 26                 TNZ     s:14135

      544    14095    3            DO;

      545    14096    3               ISN_INC = ISN_INC + 1;

  14096 26 000151   000062 054000 22                 AOS     ISN_INC

      546    14097    3               ISN = ISN + 1;
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:78   

  14097 26 000152   000061 054000 22                 AOS     ISN

      547    14098
      548    14099    3               IF COMCOM.OB.IDSLIST      THEN

  14099 26 000153   000033 234000 xsym               SZN     COMCOM+27
        26 000154   000252 605000 26                 TPL     s:14135

      549    14100    4                 DO;

      550    14101
      551    14102    4                   CALL BINCHAR(ESN.NUMBER, ISN_INC);

  14102 26 000155   000100 301400                    BTD
        26 000156   000062 000004 22                 NDSC9   ISN_INC                  cn=0,s=lsgnf,sf=0,n=4
        26 000157   200007 030005                    NDSC9   ESN_NUMBER,,AUTO         cn=0,s=nosgn,sf=0,n=5

      552    14103
      553    14104    4                   POSITION = 0;

  14104 26 000160   200012 450100                    STZ     POSITION,,AUTO

      554    14105    5                   DO WHILE POSITION <= 4;

  14105 26 000161   200012 236100                    LDQ     POSITION,,AUTO
        26 000162   000005 116007                    CMPQ    5,DL
        26 000163   000204 603000 26                 TRC     s:14117

      555    14106    5                       IF SUBSTR(ESN.NUMBER,POSITION,1) = '0'   THEN

  14106 26 000164   200012 235100                    LDA     POSITION,,AUTO
        26 000165   040000 106505                    CMPC    fill='040'O
        26 000166   200007 000001                    ADSC9   ESN_NUMBER,A,AUTO        cn=0,n=1
        26 000167   000002 000001 27                 ADSC9   2                        cn=0,n=1
        26 000170   000175 601000 26                 TNZ     s:14109

PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:79   
      556    14107    5                           SUBSTR(ESN.NUMBER,POSITION,1) = ' ';

  14107 26 000171   040105 100400                    MLR     fill='040'O
        26 000172   000003 000001 27                 ADSC9   3                        cn=0,n=1
        26 000173   200007 000001                    ADSC9   ESN_NUMBER,A,AUTO        cn=0,n=1
        26 000174   000177 710000 26                 TRA     s:14111

      557    14108    5                       ELSE
      558    14109    5                           POSITION = 5;

  14109 26 000175   000005 236007                    LDQ     5,DL
        26 000176   200012 756100                    STQ     POSITION,,AUTO

      559    14110
      560    14111    5                       POSITION = POSITION + 1;

  14111 26 000177   200012 235100                    LDA     POSITION,,AUTO
        26 000200   000001 035007                    ADLA    1,DL
        26 000201   200012 755100                    STA     POSITION,,AUTO

      561    14112    5                   END;

  14112 26 000202   000005 115007                    CMPA    5,DL
        26 000203   000164 602000 26                 TNC     s:14106

      562    14113
      563    14114                        %NEW_HEAP(@POINTER = IDS_BUF$,
      564    14115                                  @SIZE = %MAX_INPUT_BUFFER_LEN);

  14117 26 000204   000006 236000 27                 LDQ     6
        26 000205   200021 756100                    STQ     REMAINDER+2,,AUTO
        26 000206   200006 630500                    EPPR0   IDS_BUF$,,AUTO
        26 000207   200020 450500                    STP0    REMAINDER+1,,AUTO
        26 000210   200020 630500                    EPPR0   REMAINDER+1,,AUTO
        26 000211   000004 631400 27                 EPPR1   4
        26 000212   000000 701000 xent               TSX1    Z8ED$NEW_HEAP
        26 000213   000000 011000                    NOP     0
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:80   

      565    14120    4                   IDS_BUF$ -> FILL_BUFFER.COLUMN = P$ -> TOKEN_6.COLUMN;

  14120 26 000214   200005 470500                    LDP0    P$,,AUTO
        26 000215   200006 471500                    LDP1    IDS_BUF$,,AUTO
        26 000216   000100 100500                    MLR     fill='000'O
        26 000217   000002 000004                    ADSC9   2,,PR0                   cn=0,n=4
        26 000220   100000 000004                    ADSC9   0,,PR1                   cn=0,n=4

      566    14121    4                   IDS_BUF$ -> FILL_BUFFER.ESN = ESN_NUMBER;

  14121 26 000221   200006 470500                    LDP0    IDS_BUF$,,AUTO
        26 000222   040100 100500                    MLR     fill='040'O
        26 000223   200007 000012                    ADSC9   ESN_NUMBER,,AUTO         cn=0,n=10
        26 000224   000005 000012                    ADSC9   5,,PR0                   cn=0,n=10

      567    14122    4                   IDS_BUF$ -> FILL_BUFFER.ISN = ISN;

  14122 26 000225   200006 470500                    LDP0    IDS_BUF$,,AUTO
        26 000226   000061 235000 22                 LDA     ISN
        26 000227   000004 755100                    STA     4,,PR0

      568    14123    4                   IDS_BUF$ -> FILL_BUFFER.FLAGS = FALSE;

  14123 26 000230   200006 470500                    LDP0    IDS_BUF$,,AUTO
        26 000231   000011 450100                    STZ     9,,PR0

      569    14124    4                   IDS_BUF$ -> FILL_BUFFER.LINE_TYPE.IDS_LINE = %TRUE;

  14124 26 000232   040000 236003                    LDQ     16384,DU
        26 000233   000011 256100                    ORSQ    9,,PR0

      570    14125    4                   IDS_BUF$ -> FILL_BUFFER.STRIPPED_LINE_LENGTH = 80;

  14125 26 000234   000120 235007                    LDA     80,DL
        26 000235   000003 755100                    STA     3,,PR0

PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:81   
      571    14126    4                   IDS_BUF$ -> FILL_BUFFER.LINE_LENGTH = 80;

  14126 26 000236   200006 470500                    LDP0    IDS_BUF$,,AUTO
        26 000237   000012 755100                    STA     10,,PR0

      572    14127    4                   IDS_BUF$ -> FILL_BUFFER.SOURCE_LINE = P$ -> TOKEN_6.LINE;

  14127 26 000240   000012 720100                    LXL0    10,,PR0
        26 000241   200005 471500                    LDP1    P$,,AUTO
        26 000242   040140 100500                    MLR     fill='040'O
        26 000243   100006 000120                    ADSC9   6,,PR1                   cn=0,n=80
        26 000244   000013 000010                    ADSC9   11,,PR0                  cn=0,n=*X0

      573    14128
      574    14129    4                   LAST_HEAD$ -> FILL_BUFFER.NEXT$ = IDS_BUF$;

  14129 26 000245   200006 236100                    LDQ     IDS_BUF$,,AUTO
        26 000246   000057 473400 22                 LDP3    LAST_HEAD$
        26 000247   300002 756100                    STQ     2,,PR3

      575    14130    4                   LAST_HEAD$ = IDS_BUF$;

  14130 26 000250   200006 236100                    LDQ     IDS_BUF$,,AUTO
        26 000251   000057 756000 22                 STQ     LAST_HEAD$

      576    14131    4                 END;

      577    14132    3            END;

      578    14133
      579    14134
      580    14135    2          IF  P$ -> TRANSLATE_WORD_TABLE(3)  ~= %TYPE_6    THEN

  14135 26 000252   200005 470500                    LDP0    P$,,AUTO
        26 000253   000003 235100                    LDA     3,,PR0
        26 000254   000006 115007                    CMPA    6,DL
        26 000255   000002 600000 26                 TZE     LOOP
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:82   

      581    14136    3            DO;

      582    14137    3              RETURN_PTR$ = P$;

  14137 26 000256   200005 236100                    LDQ     P$,,AUTO
        26 000257   200003 471500                    LDP1    @RETURN_PTR$,,AUTO
        26 000260   100000 756100                    STQ     0,,PR1

      583    14138    3              RETURN;

  14138 26 000261   000000 702200 xent               TSX2  ! X66_ARET

      584    14139    3            END;
      585    14140
      586    14141    2      END LOOP;

      587    14142         %EJECT;
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:83   
      588    14143        /*----------*/
      589    14144    1     ADJUST_ISN :  PROC ;

  14144 26 000262   200014 741300       ADJUST_ISN   STX1  ! POSITION+2,,AUTO

      590    14145        /*----------*/
      591    14146        /*I*
      592    14147             NAME: ADJUST_ISN
      593    14148             PURPOSE: adjust the internal sequence numbers for lines that
      594    14149                      already been brought in.
      595    14150             CALL: Call ADJUST_ISN
      596    14151
      597    14152
      598    14153             PARAMETERS:
      599    14154                    None.
      600    14155             DATA:
      601    14156
      602    14157             DESCRIPTION:  Corrects the ISN for lines after the subschema
      603    14158                           section that have been read in.
      604    14159        */
      605    14160        %EJECT;
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:84   
      606    14161
      607    14162    2       DCL T$      PTR;
      608    14163
      609    14164    2       LAST_HEAD$ -> FILL_BUFFER.LINE_TYPE.DB_LINE = TRUE;

  14164 26 000263   000057 470400 22                 LDP0    LAST_HEAD$
        26 000264   000020 236003                    LDQ     16,DU
        26 000265   000011 256100                    ORSQ    9,,PR0

      610    14165
      611    14166    3       DO WHILE SAVE_HEAD$ ~= ADDR(NIL)    AND

  14166 26 000266   000275 710000 26                 TRA     s:14171

      612    14167    3                SAVE_HEAD$ ~= CURRENT_BUFFER$;
      613    14168
      614    14169    3           SAVE_HEAD$ -> FILL_BUFFER.ISN = SAVE_HEAD$ -> FILL_BUFFER.ISN + ISN_INC;

  14169 26 000267   000056 470400 22                 LDP0    SAVE_HEAD$
        26 000270   000004 236100                    LDQ     4,,PR0
        26 000271   000062 036000 22                 ADLQ    ISN_INC
        26 000272   000004 756100                    STQ     4,,PR0

      615    14170    3           SAVE_HEAD$ = SAVE_HEAD$ -> FILL_BUFFER.NEXT$;

  14170 26 000273   000002 236100                    LDQ     2,,PR0
        26 000274   000056 756000 22                 STQ     SAVE_HEAD$

      616    14171    3       END;

  14171 26 000275   000056 236000 22                 LDQ     SAVE_HEAD$
        26 000276   000001 116000 27                 CMPQ    1
        26 000277   000302 600000 26                 TZE     s:14173
        26 000300   000000 116000 8                  CMPQ    CURRENT_BUFFER$
        26 000301   000267 601000 26                 TNZ     s:14169

      617    14172
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:85   
      618    14173    2       IF SAVE_HEAD$ = CURRENT_BUFFER$      THEN

  14173 26 000302   000000 116000 8                  CMPQ    CURRENT_BUFFER$
        26 000303   000314 601000 26                 TNZ     s:14182

      619    14174    3         DO;

      620    14175    3           EXPANDED_ISN = EXPANDED_ISN + ISN_INC;

  14175 26 000304   000000 236000 14                 LDQ     EXPANDED_ISN
        26 000305   000062 036000 22                 ADLQ    ISN_INC
        26 000306   000000 756000 14                 STQ     EXPANDED_ISN

      621    14176    3           SAVE_HEAD$ -> FILL_BUFFER.ISN = SAVE_HEAD$ -> FILL_BUFFER.ISN + ISN_INC;

  14176 26 000307   000056 470400 22                 LDP0    SAVE_HEAD$
        26 000310   000004 236100                    LDQ     4,,PR0
        26 000311   000062 036000 22                 ADLQ    ISN_INC
        26 000312   000004 756100                    STQ     4,,PR0

      622    14177    3           BUFFER.ISN = SAVE_HEAD$ -> FILL_BUFFER.ISN;

  14177 26 000313   000002 756000 12                 STQ     BUFFER+2

      623    14178    3         END;

      624    14179
      625    14180            /*V* Adjust tokens previously scanned */
      626    14181
      627    14182    2       T$ = LEX_SYMBOL_QUEUE$;

  14182 26 000314   000000 236000 21                 LDQ     LEX_SYMBOL_QUEUE$
        26 000315   200015 756100                    STQ     T$,,AUTO

      628    14183    3       DO WHILE T$ ~= ADDR(NIL);

  14183 26 000316   000330 710000 26                 TRA     s:14187
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:86   

      629    14184    3           T$ -> BASED_LEX_SYMBOL.LINE = T$ -> BASED_LEX_SYMBOL.LINE + ISN_INC;

  14184 26 000317   200015 470500                    LDP0    T$,,AUTO
        26 000320   000004 236100                    LDQ     4,,PR0
        26 000321   000062 036000 22                 ADLQ    ISN_INC
        26 000322   000004 756100                    STQ     4,,PR0

      630    14185    3          T$ -> BASED_LEX_SYMBOL.END_LINE = T$ -> BASED_LEX_SYMBOL.END_LINE + ISN_INC;

  14185 26 000323   000006 236100                    LDQ     6,,PR0
        26 000324   000062 036000 22                 ADLQ    ISN_INC
        26 000325   000006 756100                    STQ     6,,PR0

      631    14186    3           T$ = T$ -> BASED_LEX_SYMBOL.NEXT$;

  14186 26 000326   000000 236100                    LDQ     0,,PR0
        26 000327   200015 756100                    STQ     T$,,AUTO

      632    14187    3       END;

  14187 26 000330   000001 116000 27                 CMPQ    1
        26 000331   000317 601000 26                 TNZ     s:14184

      633    14188
      634    14189    2   END ADJUST_ISN;

  14189 26 000332   200014 221300                    LDX1  ! POSITION+2,,AUTO
        26 000333   000001 702211                    TSX2  ! 1,X1

      635    14190        %EJECT;
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:87   
      636    14191        /*----*/
      637    14192    1     READ :  PROC(P$);

  14192 26 000334   200014 741300       READ         STX1  ! POSITION+2,,AUTO

      638    14193        /*----*/
      639    14194
      640    14195    2          DCL   P$  PTR;
      641    14196    2          DCL   I   SBIN;
      642    14197    2          DCL   REMAINDER  UBIN(18);
      643    14198
      644    14199
      645    14200    2          I = RECORD_NUMBER/2;

  14200 26 000335   000060 236000 22                 LDQ     RECORD_NUMBER
        26 000336   000002 506007                    DIV     2,DL
        26 000337   200016 756100                    STQ     I,,AUTO

      646    14201    2          REMAINDER = RECORD_NUMBER - (I * 2);

  14201 26 000340   000001 736000                    QLS     1
        26 000341   000007 676000 27                 ERQ     7
        26 000342   000001 036007                    ADLQ    1,DL
        26 000343   000060 036000 22                 ADLQ    RECORD_NUMBER
        26 000344   000000 620006                    EAX0    0,QL
        26 000345   200017 740100                    STX0    REMAINDER,,AUTO

      647    14202
      648    14203    2          IF I ~= BLOCK.NUMBER   THEN

  14203 26 000346   000063 236000 22                 LDQ     BLOCK
        26 000347   000010 376000 27                 ANQ     8
        26 000350   200016 116100                    CMPQ    I,,AUTO
        26 000351   000375 600000 26                 TZE     s:14214

      649    14204    3            DO;

PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:88   
      650    14205    3              BLOCK.NUMBER = I;

  14205 26 000352   200016 236100                    LDQ     I,,AUTO
        26 000353   000063 552034 22                 STBQ    BLOCK,'34'O

      651    14206    3              CALL M$READ(READF)

  14206 26 000354   000000 630400 22                 EPPR0   READF
        26 000355   440000 713400                    CLIMB   alt,read
        26 000356   401400 401760                    pmme    nvectors=4
        26 000357   000361 702000 26                 TSX2    s:14209
        26 000360   000375 710000 26                 TRA     s:14214

      652    14207    3                  WHENALTRETURN
      653    14208    4                  DO;

      654    14209    4                     CALL Z9AE$ISSUE_SYSTEM_ERROR(B$TCB$->B$TCB.ALT$->B$ALT.ERR,

  14209 26 000361   000000 470400 xsym               LDP0    B$TCB$
        26 000362   000000 471500                    LDP1    0,,PR0
        26 000363   000001 236000 27                 LDQ     1
        26 000364   200020 756100                    STQ     REMAINDER+1,,AUTO
        26 000365   200020 633500                    EPPR3   REMAINDER+1,,AUTO
        26 000366   200023 453500                    STP3    REMAINDER+4,,AUTO
        26 000367   100102 634500                    EPPR4   66,,PR1
        26 000370   200022 454500                    STP4    REMAINDER+3,,AUTO
        26 000371   200022 630500                    EPPR0   REMAINDER+3,,AUTO
        26 000372   000004 631400 27                 EPPR1   4
        26 000373   000000 701000 xent               TSX1    Z9AE$ISSUE_SYSTEM_ERROR
        26 000374   000000 011000                    NOP     0

      655    14210    4                                                          ADDR(NIL));
      656    14211    4                  END;

      657    14212    3            END;

      658    14213
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:89   
      659    14214    2          IF REMAINDER = 0  THEN

  14214 26 000375   200017 220100                    LDX0    REMAINDER,,AUTO
        26 000376   000403 601000 26                 TNZ     s:14217

      660    14215    2              P$ = ADDR(CONTROL_SEG);

  14215 26 000377   000000 236000 27                 LDQ     0
        26 000400   200015 470500                    LDP0    @P$,,AUTO
        26 000401   000000 756100                    STQ     0,,PR0
        26 000402   000406 710000 26                 TRA     s:14219

      661    14216    2          ELSE
      662    14217    2              P$ = ADDR(CONTROL_SEG.SECOND_RECORD);

  14217 26 000403   000011 236000 27                 LDQ     9
        26 000404   200015 470500                    LDP0    @P$,,AUTO
        26 000405   000000 756100                    STQ     0,,PR0

      663    14218
      664    14219    2          RETURN;

  14219 26 000406   200014 221300                    LDX1  ! POSITION+2,,AUTO
        26 000407   000001 702211                    TSX2  ! 1,X1
      665    14220
      666    14221    2       END;                 /*V*  END READ    */
      667    14222
      668    14223    1   END Z9DM$GET_SUB_SCHEMA;

PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:90   
--  Include file information  --

   Z8E_REPLACE.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8E_BUFFERS.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8E_HEAP.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8E_O1COM.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8A_LEX_SYMB.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8E_STACKS.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8A_COMCOM.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8A_ERR_NUMS.:Z8A6TOU  is referenced.
   Z8E_DML.:Z8A6TOU  is referenced.
   CP_6_SUBS.:LIB_E04  is referenced.
   CP_6_C.:LIB_E04  is referenced.
   CP_6.:LIB_E04  cannot be made into a system file and is referenced.
   Z9A_FLAGS.:Z8A6TOU  is referenced.
   Z8A_SYS_FILE.:Z8A6TOU  is referenced.
   X8A_COM_MACS.:X8A6TOU  is referenced.
   Z8A_NAMES.:Z8A6TOU  is referenced.
   Z8A_SUPP_MAC.:Z8A6TOU  is referenced.
   Z8A_DEFC.:Z8A6TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure Z9DM$GET_SUB_SCHEMA.
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:91   

 **** Variables and constants ****

  ****  Section 000 LblCom ITERATION

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 ITERATION

  ****  Section 002 LblCom LEX_SYMBOL

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(3240)  r     1 LEX_SYMBOL                 0-0-0/w STRC(3240)        1 LEX_SYMBOL_WORDS

  ****  Section 003 LblCom CURRENT_LEX_SYMBOL$

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 CURRENT_LEX_SYMBOL$

  ****  Section 004 LblCom TEMP_LEX_SYMBOL

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(3240)        1 TEMP_LEX_SYMBOL

  ****  Section 005 LblCom TEMP_LEX_SYMBOL2

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(3240)        1 TEMP_LEX_SYMBOL2

PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:92   
  ****  Section 006 LblCom HEAP$

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR               1 HEAP$

  ****  Section 007 LblCom SCANNER_STATE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 SCANNER_STATE

  ****  Section 008 LblCom CURRENT_BUFFER$

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 CURRENT_BUFFER$

  ****  Section 009 LblCom LOOKAHEAD_BUFFER$

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 LOOKAHEAD_BUFFER$

  ****  Section 010 LblCom CURRENT_LINE_LEVEL

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 CURRENT_LINE_LEVEL

  ****  Section 011 LblCom LINE_LIST$

PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:93   
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR               1 LINE_LIST$

  ****  Section 012 LblCom BUFFER

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(252)   r     1 BUFFER

  ****  Section 013 LblCom ORIGINAL_ISN

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 ORIGINAL_ISN

  ****  Section 014 LblCom EXPANDED_ISN

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r     1 EXPANDED_ISN

  ****  Section 015 LblCom ISN_FOR_EXP_SRC

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 ISN_FOR_EXP_SRC

  ****  Section 016 LblCom CURRENT_SYMBOL_LEVEL

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:94   

     0-0-0/w SBIN              1 CURRENT_SYMBOL_LEVEL

  ****  Section 017 LblCom REPLACE_ACTIVE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/b BIT               1 REPLACE_ACTIVE

  ****  Section 018 LblCom IGNORE_COPY_REPLACE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/b BIT               1 IGNORE_COPY_REPLACE

  ****  Section 019 LblCom COPY_DEBUG_LEVEL

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 COPY_DEBUG_LEVEL

  ****  Section 020 LblCom REPLACE_LIST

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(144)         1 REPLACE_LIST

  ****  Section 021 LblCom LEX_SYMBOL_QUEUE$

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 LEX_SYMBOL_QUEUE$
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:95   

  ****  Section 022  Data  Z9DM$GET_SUB_SCHEMA

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    63-0-0/b STRC        r     1 BLOCK                     16-0-0/d STRC(1080)  r     1 CLOSEF
    54-0-0/w SBIN        r     1 DML_STATE                 55-0-0/w SBIN        r     1 FIRST_E
    61-0-0/w SBIN        r     1 ISN                       62-0-0/w SBIN        r     1 ISN_INC
    57-0-0/w PTR         r     1 LAST_HEAD$                 0-0-0/d STRC(504)   r     1 READF
    60-0-0/w SBIN        r     1 RECORD_NUMBER             56-0-0/w PTR         r     1 SAVE_HEAD$

  ****  Section 023 LblCom DCB_NUMBER

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN(18)    r     1 DCB_NUMBER

  ****  Section 024 LblCom CONTROL_SEG

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2304)  r     1 CONTROL_SEG

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @HEAD$                    15-0-0/w PTR         r     1 @P$
     3-0-0/w PTR         r     1 @RETURN_PTR$               7-0-0/c STRC(90)    r     1 ESN
     7-0-0/c CHAR(10)    r     1 ESN_NUMBER                *0-0-0/w PTR         r     1 HEAD$
    16-0-0/w SBIN        r     1 I                          6-0-0/w PTR         r     1 IDS_BUF$
     5-0-0/w PTR         r     1 P$                        *0-0-0/w PTR         r     1 P$
    12-0-0/w UBIN        r     1 POSITION                  17-0-0/w UBIN(18)    r     1 REMAINDER
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:96   
    *0-0-0/w PTR         r     1 RETURN_PTR$               15-0-0/w PTR         r     1 T$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$TCB$                     0-0-0/d STRC(13248) r     1 COMCOM
     0-0-0/w STRC(180)         1 HIER_STK(0:50)
     0-0-0/w SBIN              1 HIER_STK_PTR               0-0-0/d STRC(11580)       1 O1COM
     0-0-0/w STRC(144)         1 PAGE_FORMAT                0-0-0/w STRC(153)         1 REP_STK(0:50)
     0-0-0/w SBIN              1 REP_STK_PTR

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(288)         1 ADD_STMT                   0-0-0/w STRC(2448)  r     1 B$ALT
     0-0-0/w STRC(144)   r     1 B$TCB                      0-0-0/w ASTR(324)   r     1 BASED_LEX_SYMBOL
     0-0-0/w STRC(360)         1 BASED_LEX_SYMBOL_WORDS
     0-0-0/w STRC(288)         1 BINARY_OP                  0-0-0/c ACHR              1 BUFFER_LINE
     0-0-0/w STRC(288)         1 CALL_STMT                  0-0-0/w CHAR(4096)        1 CHARS
     0-0-0/w STRC(288)         1 COMPUTE_STMT               0-0-0/w STRC(72)          1 CONT
     0-0-0/w STRC(288)         1 DEFERED_IDENTIFIER         0-0-0/w STRC(252)         1 DEFERED_ID_TREE
     0-0-0/w STRC(288)         1 DEFERED_QUAL_ID            0-0-0/w STRC(288)         1 DEFERED_SUM_CLAUSE
     0-0-0/w STRC(288)         1 DEFERED_SUM_CLAUSE_LIST
     0-0-0/w STRC(288)         1 DELETE_STMT                0-0-0/w STRC(288)         1 DIVIDE_STMT
     0-0-0/c CHAR(4)     r     1 END_SUBSCHEMA              0-0-0/w ASTR(396)   r     1 EXP_SRC_BUFF
     0-0-0/w ASTR(396)   r     1 FILL_BUFFER                0-0-0/w STRC(288)         1 ILS_LIST
     0-0-0/w STRC(288)         1 INSPECT_1_STMT             0-0-0/w STRC(288)         1 INSPECT_2_STMT
     0-0-0/w STRC(288)         1 INSPECT_4_STMT             0-0-0/w STRC(288)         1 LA_ITEM
     0-0-0/w STRC(504)         1 LX_CD_INPUT                0-0-0/w STRC(324)         1 LX_CD_I_O
     0-0-0/w STRC(396)         1 LX_CD_OUTPUT               0-0-0/w STRC(288)         1 LX_ETT_ITEM
     0-0-0/w STRC(288)         1 LX_ITEM                    0-0-0/w STRC(288)         1 LX_LARGE
     0-0-0/w STRC(288)         1 LX_LIST                    0-0-0/w STRC(1224)        1 LX_REC_DECL
     0-0-0/w STRC(864)         1 LX_REPORT_REC              0-0-0/w STRC(288)         1 LX_TERMINAL
PL6.E3A0      #002=Z9DM$GET_SUB_SCHEMA File=Z9DM.:Z8A6TSI                        SAT 08/09/97 13:44 Page:97   
     0-0-0N  NULL        r     1 M$UC                       0-0-0/w STRC(288)         1 MULTIPLY_STMT
     0-0-0/w STRC(36864)       1 PAGE                       0-0-0/w STRC(288)         1 READ_STMT
     0-0-0/w STRC(252)         1 REPLACE_ITEM               0-0-0/w STRC(288)         1 REWRITE_STMT
     0-0-0/w STRC(288)         1 START_STMT                 0-0-0/w STRC(252)         1 STRING_STMT
     0-0-0/w STRC(288)         1 SUBTRACT_STMT              0-0-0/c STRC(1116)  r     1 TOKEN_6
     0-0-0/w SBIN        r     1 TRANSLATE_WORD_TABLE(0:33)
     0-0-0/w STRC(288)         1 UNARY_OP                   0-0-0/w STRC(288)         1 UNSTRING_STMT
     0-0-0/w STRC(288)         1 WRITE_STMT


   Procedure Z9DM$GET_SUB_SCHEMA requires 264 words for executable code.
   Procedure Z9DM$GET_SUB_SCHEMA requires 20 words of local(AUTO) storage.

    No errors detected in file Z9DM.:Z8A6TSI    .
