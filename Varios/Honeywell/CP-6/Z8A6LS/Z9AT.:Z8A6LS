VERSION A06

PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:1    
        1        1        /*M* Z9AT -- Wrapup and setup for wrapup routines */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7
        8        8
        9        9        /*P*
       10       10               NAME: Z9AT
       11       11
       12       12             AUTHOR: Glenn & Heath
       13       13
       14       14            PURPOSE: Z9AT$START -- Setup error recovery and break control.
       15       15                     Z9AT$BREAK -- Handle BREAK.
       16       16                     Z9AT$ABORT -- Wrapup after compiler abort.
       17       17                     Z9AT$TERMINATOR -- Terminate compile.
       18       18
       19       19        */
       20       20
       21       21        %EJECT;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:2    
       22       22        Z9AT$TERMINATOR: PROC;
       23       23
       24       24        %EQU PHASE=6;
       25       25        %INCLUDE Z8A_DEFC;
       26       93        %INCLUDE Z8A_COMCOM;
       27      743        %INCLUDE Z8E_STACKS;
       28     3009        %INCLUDE Z8E_O1COM;
       29     3770        %INCLUDE Z8A_ERR_NUMS;
       30     4534        %INCLUDE Z8A_SYS_FILE;
       31    10809
       32    10810    1   DCL   B$EXCFR$               PTR ;
       33    10811    1   DCL   B$TCB$                 PTR SYMREF ;
       34    10812
       35    10813    1   DCL   J                      SBIN WORD ;
       36    10814    1   DCL   SAVED_LINE             SBIN WORD ;
       37    10815    1   DCL   SAVED_PHASE            SBIN WORD ;
       38    10816    1   DCL   Z8AA$POSITION_ES_OUT   ENTRY ALTRET ;
       39    10817        /*#25001*/
       40    10818    1   DCL   Z8AA$CLOSE_SOURCE_FILE ENTRY ALTRET;
       41    10819    1   DCL   Z8AE$ERROR             ENTRY (12) ;
       42    10820    1   DCL   Z8IA                   ENTRY ;
       43    10821    1   DCL   Z8JS$START_TREEWALKER         ENTRY ;
       44    10822    1   DCL   Z8JT$TABLE_DUMP        ENTRY ;
       45    10823    1   DCL   Z9AL$DUMP_LINE         ENTRY (1) ;
       46    10824    1   DCL   Z9AL$WRITE_TERMINAL    ENTRY ;
       47    10825    1   DCL   Z9AR$FREE_DYNAMIC_SEGMENT ENTRY ALTRET;
       48    10826
       49    10827    1   DCL   Z9AT$BREAK             ENTRY ASYNC ;
       50    10828
       51    10829    1   DCL   Z9AC$CLOSE_LO          ENTRY ;
       52    10830    1   DCL   ZERO                   BIT (1) ;
       53    10831
       54    10832
       55    10833    1   DCL 1 DELTA_CMD              STATIC,
       56    10834    1       2 *                      CHAR (0) INIT ('M '),
       57    10835    1       2 LOC                    CHAR (6) INIT ('      '),
       58    10836    1       2 *                      CHAR (0) INIT ('\I') ;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:3    
       59    10837
       60    10838
       61    10839    1   DCL   OBUF                   CHAR (120) EXT ;
       62    10840
       63    10841    1   DCL 1 LINE                   REDEF OBUF,
       64    10842    1       2 P                      CHAR ( 9), /* PHASE# =        */
       65    10843    1       2 PHASE                  CHAR (1),
       66    10844    1       2 R                      CHAR (10), /* , RECNO =       */
       67    10845    1       2 RECNO                  CHAR (5),
       68    10846    1       2 D                      CHAR (10), /* , #DIAG =       */
       69    10847    1       2 DIAG                   CHAR ( 3),
       70    10848    1       2 C                      CHAR (17), /* , CUR SEVERITY = */
       71    10849    1       2 CUR                    CHAR ( 1),
       72    10850    1       2 *                      CHAR (64) ;
       73    10851
       74    10852
       75    10853        %FPT_TRMPRG (RSTBRK = YES) ;
       76    10882        %FPT_EXIT (STEPCC = ABORT);
       77    10897        %FPT_INT (UENTRY = Z9AT$BREAK) ;
       78    10911
       79    10912        %FPT_TRAP (PROGRAMMED = Z9AT$ABORT, ARITHMETIC = Z9AT$ABORT,
       80    10913                   ERRORS = Z9AT$ABORT, HISTORY_REGS = NO,
       81    10914                   DIVIDE_CHECK=TRAP, OVERFLOW=TRAP, COMMAND=TRAP,
       82    10915                   IPR=TRAP, LOCKUP=TRAP, MEMORY=TRAP,
       83    10916                   MISSING_PAGE=TRAP, MISSING_SEG=TRAP, SECURITY_1=TRAP,
       84    10917                   SECURITY_2=TRAP) ;
       85    10940
       86    10941        %FPT_TRAP (FPTN = FPT_UNTRAP, DIVIDE_CHECK=ABORT,
       87    10942                   OVERFLOW=ABORT, COMMAND=ABORT, IPR=ABORT,
       88    10943                   LOCKUP=ABORT, MEMORY=ABORT, MISSING_PAGE=ABORT,
       89    10944                   MISSING_SEG=ABORT, SECURITY_1=ABORT, SECURITY_2=ABORT,
       90    10945                   PMME = Z9AT$ABORT2) ;
       91    10968
       92    10969        %FPT_ALIB (FPTN = TO_DELTA, CMD = DELTA_CMD,
       93    10970                   LIBNAME = DELTA, RETRN = YES,
       94    10971                   STCLASS = CONSTANT) ;
       95    10988
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:4    
       96    10989        %VLP_NAME (FPTN = DELTA, NAME = 'DELTA', STCLASS = CONSTANT) ;
       97    11016
       98    11017        %VLP_REGS ;
       99    11032        %VLP_PTRS ;
      100    11046
      101    11047        %B$TCB (STCLASS = "BASED(B$TCB$)") ;
      102    11050        %B$EXCFR (STCLASS = "BASED (B$EXCFR$)") ;
      103    11068
      104    11069        %EJECT;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:5    
      105    11070        /*D*       NAME: Z9AT$TERMINATOR
      106    11071
      107    11072                   CALL: CALL Z9AT$TERMINATOR ;
      108    11073
      109    11074              INTERFACE: Calls WRAPUP (an internal proc).
      110    11075                         M$EXIT -- Exit to operating system.
      111    11076
      112    11077            DESCRIPTION: Calls WRAPUP and M$EXIT (STEPCC = 6).
      113    11078
      114    11079        */
      115    11080
      116    11081    1          IF COMCOM.CURRENT.PHASE = 1 THEN
      117    11082    2            DO;
      118    11083                   /* Phase 1 must close the listing files for PH 5 */
      119    11084    2              CALL Z8AA$CLOSE_SOURCE_FILE;
      120    11085    2              CALL Z8AA$POSITION_ES_OUT;
      121    11086    2            END;
      122    11087
      123    11088    1          CALL WRAPUP ;
      124    11089
      125    11090    1          IF COMCOM.TREE_LINE ~= ' '
      126    11091    2          OR COMCOM.OB.IT = '1'B THEN DO ;
      127    11092    2            COMCOM.CURRENT.PHASE = 6 ;
      128    11093    2            CALL Z8JS$START_TREEWALKER ;
      129    11094    2          END ;
      130    11095
      131    11096    1          CALL Z9AC$CLOSE_LO ;
      132    11097    1          CALL M$EXIT (FPT_EXIT) ;
      133    11098
      134    11099        %EJECT;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:6    
      135    11100        /*D*   NAME: WRAPUP (An internal proc of Z9AT)
      136    11101
      137    11102               CALL: CALL WRAPUP ;
      138    11103
      139    11104          INTERFACE: Z8IA -- The Annotator (Phase 5).
      140    11105                     Z9AR -- Free Dynamic Segment (I.L. Table Space).
      141    11106                     Z9AC -- Close "LO" file.
      142    11107
      143    11108        DESCRIPTION: SYSTEM DEPENDENT --> CP6.
      144    11109                     PROVIDE GRACEFUL TERMINATION OF THE COMPILER
      145    11110                     UPON RECOGNITION OF AN UNRECOVERABLE COMPILER ERROR.
      146    11111                     CALL THE ANNOTATOR TO DO WHAT IT CAN WITH WHAT IT'S GOT.
      147    11112                     FREE ALL DYNAMIC MEMORY USED AND CLOSE THE LISTING FILE.
      148    11113
      149    11114        */
      150    11115
      151    11116    1   WRAPUP: PROC  ; /* Called by Z9AT$TERMINATOR & Z9AT$ABORT */
      152    11117
      153    11118    2          IF COMCOM.OB.ABDUMP
      154    11119    2          THEN CALL Z8JT$TABLE_DUMP ;
      155    11120
      156    11121    3          IF COMCOM.CURRENT.PHASE < 5 THEN DO ;
      157    11122    3            SAVED_LINE = COMCOM.CURRENT.LINE ; /* Phase 5 changes LINE */
      158    11123    3            IF COMCOM.CURRENT.PHASE < 2 THEN
      159    11124    3              COMCOM.LINES.SOURCE = COMCOM.CURRENT.LINE;
      160    11125    3            SAVED_PHASE = COMCOM.CURRENT.PHASE ;
      161    11126    3            COMCOM.CURRENT.PHASE = 5 ;
      162    11127    3            COMCOM.OB.DECK = FALSE;    /*#32168*/
      163    11128    3            CALL Z8IA ; /* Phase 5 */
      164    11129    3            COMCOM.CURRENT.LINE = SAVED_LINE ;
      165    11130    3            COMCOM.CURRENT.PHASE = SAVED_PHASE ;
      166    11131    3          END ;
      167    11132
      168    11133    2          RETURN ;
      169    11134    2   END WRAPUP;
      170    11135        %EJECT;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:7    
      171    11136        /*D*       NAME: Z9AT$START
      172    11137
      173    11138                   CALL: CALL Z9AT$START ;
      174    11139
      175    11140              INTERFACE: M$INT -- Set BREAK control.
      176    11141                         M$TRAP - Set Wrapup control.
      177    11142
      178    11143            DESCRIPTION: Called by Z8AM for system dependent initialization,
      179    11144                         this routine sets Z9AT$ABORT as the wrapup entry
      180    11145                         point, and Z9AT$BREAK as the entry point when the
      181    11146                         BREAK key is used.
      182    11147
      183    11148        */
      184    11149
      185    11150    1   Z9AT$START: ENTRY ;
      186    11151
      187    11152    1          CALL CONCAT( OBUF, 'COBOL85 Version ' ,%VERSION, '  here on ');
      188    11153    1          SUBSTR (OBUF, 29, 8) = COMCOM.COMPILE.DATE ;
      189    11154    1          CALL Z9AL$WRITE_TERMINAL ;
      190    11155
      191    11156    1          CALL M$INT (FPT_INT) ;
      192    11157
      193    11158    1          CALL M$TRAP (FPT_TRAP)
      194    11159    2          WHENALTRETURN DO ; /* Unsuccessful Call */
      195    11160    2            OBUF = 'Compiler Problem -- M$TRAP Alt-Return' ;
      196    11161    2            CALL Z9AL$WRITE_TERMINAL ;
      197    11162    2          END ;
      198    11163
      199    11164    1          RETURN ;
      200    11165
      201    11166        %EJECT;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:8    
      202    11167        /*D*       NAME: Z9AT$ABORT
      203    11168
      204    11169                   CALL: Called by operating system when compiler aborts.
      205    11170
      206    11171              INTERFACE: Z8AE$ERROR -- Issues an ERR item.
      207    11172                         M$WRITE -- Writes a record.
      208    11173                         DUMP_STATS -- Writes compiler stats to DO file.
      209    11174                         WRAPUP -- Wraps up compile.
      210    11175                         M$TRAP -- Disable abort trap.
      211    11176                         Z8JS$START_TREEWALKER -- Tree Dumper.
      212    11177
      213    11178            DESCRIPTION: This routine issues the error message, "Compiler
      214    11179                         abort" at the line that the compiler was working
      215    11180                         on at the time of the abort; then gives control
      216    11181                         to Z9AT$TERMINATOR. A CASE statement on the phase
      217    11182                         in execution at the time of the abort is executed
      218    11183                         so that tailored information can be dumped to aid
      219    11184                         in determining the cause of the abort.
      220    11185
      221    11186        */
      222    11187
      223    11188    1   Z9AT$ABORT: ENTRY ;
      224    11189
      225    11190    1          B$EXCFR$ = B$TCB$ -> B$TCB.STK$ ;
      226    11191    1          VLP_REGS = B$EXCFR$ -> B$EXCFR.REGS ;
      227    11192    1          VLP_PTRS = B$EXCFR$ -> B$EXCFR.PRS ;
      228    11193
      229    11194    2          IF COMCOM.CURRENT.PHASE ~= 6 THEN DO ;
      230    11195
      231    11196    2            CALL M$TRAP (FPT_UNTRAP) ; /* Disable Traps */
      232    11197
      233    11198    2            OBUF = '<<<<<< COMPILER ABORT !!! >>>>>>' ;
      234    11199    2            CALL Z9AL$WRITE_TERMINAL ;
      235    11200
      236    11201    2            CALL BINCHAR (DELTA_CMD.LOC, B$TCB$->B$TCB.STK$->B$EXCFR.IC) ;
      237    11202    2            CALL M$ALIB (TO_DELTA)
      238    11203    3            WHENALTRETURN DO ;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:9    
      239    11204    3              OBUF = 'Not enough memory to wrapup, up MEM or use VIRTUAL opt.';
      240    11205    3              CALL Z9AL$WRITE_TERMINAL ;
      241    11206    3              CALL M$ERR ;
      242    11207    3            END ;
      243    11208
      244    11209    2            CALL M$CLRSTK ;
      245    11210
      246    11211    2            OBUF = ' ' ;
      247    11212    2            CALL Z9AL$WRITE_TERMINAL ;
      248    11213
      249    11214    3            DO CASE (COMCOM.CURRENT.PHASE) ;
      250    11215    3              CASE (1) ;
      251    11216    3                CALL Z8AA$CLOSE_SOURCE_FILE  ;
      252    11217    3                CALL Z8AA$POSITION_ES_OUT;
      253    11218    3              CASE (2) ;
      254    11219    3              CASE (3) ;
      255    11220    3              CASE (4) ;
      256    11221    3              CASE (5) ;
      257    11222    3              CASE (0) ;
      258    11223    3            END /* Case of Phase */ ;
      259    11224
      260    11225    2            CALL Z8AE$ERROR (%E$COMPILER_ABORT) ;
      261    11226    2            CALL DUMP_STATS ;
      262    11227    2            CALL WRAPUP ;
      263    11228
      264    11229    2            IF  COMCOM.TREE_LINE ~= ' '
      265    11230    3            OR  COMCOM.OB.IT = '1'B THEN DO ;
      266    11231    3              COMCOM.CURRENT.PHASE = 6 ;
      267    11232    3              CALL Z8JS$START_TREEWALKER ;
      268    11233    3            END /* TREE_LINE ~= blanks or IT is on */ ;
      269    11234
      270    11235    2            CALL Z9AC$CLOSE_LO ;
      271    11236    2            CALL Z9AR$FREE_DYNAMIC_SEGMENT ;
      272    11237
      273    11238    2            CALL M$XXX ; /* Abort, Set STEPCC = 6 */
      274    11239
      275    11240    2          END ; /* Not Phase 6 */
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:10   
      276    11241
      277    11242        %EJECT;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:11   
      278    11243        /*D*       NAME: Z9AT$ABORT2
      279    11244
      280    11245                   CALL: Called by IBEX on ALTRET within wrapup.
      281    11246
      282    11247            DESCRIPTION: This should never happen.
      283    11248
      284    11249        */
      285    11250
      286    11251    1   Z9AT$ABORT2: ENTRY ;
      287    11252
      288    11253    1          OBUF = 'Compiler Problem -- M$ Alt-Return in Wrapup' ;
      289    11254    1          CALL Z9AL$WRITE_TERMINAL ;
      290    11255    1          CALL M$XXX ; /* Abort, Set STEPCC = 6 */
      291    11256
      292    11257        %EJECT ;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:12   
      293    11258        /*D*       NAME: DUMP_STATS (Z9AT internal proc).
      294    11259
      295    11260                   CALL: CALL DUMP_STATS ;
      296    11261
      297    11262              INTERFACE: M$WRITE -- Writes a record.
      298    11263
      299    11264            DESCRIPTION: Write the current compiler stats to the "ME"
      300    11265                         file: Phase#, Record#, #Diagnostics, Maximum
      301    11266                         Diagnostic Severity.
      302    11267
      303    11268        */
      304    11269
      305    11270    1   DUMP_STATS: ENTRY ; /* CALLED BY Z9AT$BREAK & Z9AT$ABORT */
      306    11271
      307    11272
      308    11273    1          OBUF = ' ' ;
      309    11274    1          LINE.P = 'Phase# = ' ;
      310    11275    1          LINE.R = ', RecNo = ' ;
      311    11276    1          LINE.D = ', #Diag = ' ;
      312    11277    1          LINE.C = ', Cur Severity = ' ;
      313    11278
      314    11279    1          CALL BINCHAR (LINE.PHASE, COMCOM.CURRENT.PHASE) ;
      315    11280
      316    11281    1          CALL BINCHAR (LINE.RECNO, COMCOM.CURRENT.LINE) ;
      317    11282
      318    11283               /* Blank when zero, a la PIC ZZZZ9 */
      319    11284
      320    11285    1          ZERO = '1'B ;
      321    11286    2          DO J = 0 TO 3 ;
      322    11287    3            IF ZERO THEN DO ;
      323    11288    3              IF SUBSTR (LINE.RECNO, J, 1) = '0'
      324    11289    3              THEN SUBSTR (LINE.RECNO, J, 1) = ' ' ;
      325    11290    3              ELSE ZERO = '0'B ;
      326    11291    3            END ;
      327    11292    2          END ;
      328    11293
      329    11294    1          CALL BINCHAR (LINE.DIAG, COMCOM.NO_OF_ERRORS) ;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:13   
      330    11295
      331    11296               /* Blank when zero, a la PIC ZZ9 */
      332    11297
      333    11298    1          ZERO = '1'B ;
      334    11299    2          DO J = 0 TO 1 ;
      335    11300    3            IF ZERO THEN DO ;
      336    11301    3              IF SUBSTR (LINE.DIAG, J, 1) = '0'
      337    11302    3              THEN SUBSTR (LINE.DIAG, J, 1) = ' ' ;
      338    11303    3              ELSE ZERO = '0'B ;
      339    11304    3            END ;
      340    11305    2          END ;
      341    11306
      342    11307    1          CALL BINCHAR (LINE.CUR, COMCOM.MAX_ERROR / 100) ;
      343    11308
      344    11309    1          CALL Z9AL$WRITE_TERMINAL ;
      345    11310
      346    11311    1          RETURN ;
      347    11312
      348    11313    1   END Z9AT$TERMINATOR;
      349    11314
      350    11315        %EOD ;

PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:14   
--  Include file information  --

   CP_6_SUBS.:LIB_E04  is referenced.
   CP_6_C.:LIB_E04  is referenced.
   CP_6.:LIB_E04  cannot be made into a system file and is referenced.
   Z9A_FLAGS.:Z8A6TOU  is referenced.
   Z8A_SYS_FILE.:Z8A6TOU  is referenced.
   Z8A_ERR_NUMS.:Z8A6TOU  is referenced.
   Z8E_O1COM.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8A_LEX_SYMB.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8E_STACKS.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8A_COMCOM.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8A_DEFC.:Z8A6TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure Z9AT$TERMINATOR.

   Procedure Z9AT$TERMINATOR requires 275 words for executable code.
   Procedure Z9AT$TERMINATOR requires 12 words of local(AUTO) storage.

PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:15   

 Object Unit name= Z9AT$TERMINATOR                            File name= Z9AT.:Z8A6TOU
 UTS= AUG 09 '97 13:40:53.40 SAT                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  LblCom even  none     1      1  ITERATION
    1  LblCom even  none    90    132  LEX_SYMBOL
    2  LblCom even  none     1      1  CURRENT_LEX_SYMBOL$
    3  LblCom even  none    90    132  TEMP_LEX_SYMBOL
    4  LblCom even  none    90    132  TEMP_LEX_SYMBOL2
    5   DCB   even  none     0      0  M$UC
    6   Data  even  none    58     72  Z9AT$TERMINATOR
    7  LblCom even  none    30     36  OBUF
    8  RoData even  UTS     77    115  Z9AT$TERMINATOR
    9   Proc  even  none   275    423  Z9AT$TERMINATOR
   10  RoData even  none     7      7  Z9AT$TERMINATOR

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     9      0   yes            yes      Std        0  Z9AT$TERMINATOR
     9     74                  yes      Std        0  Z9AT$START
     9    133                  yes      Std        0  Z9AT$ABORT
     9    273                  yes      Std        0  Z9AT$ABORT2
     9    306                  yes      Std        0  DUMP_STATS
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:16   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes          Async      0 Z9AT$BREAK
         yes           Std      12 Z8AE$ERROR
 yes     yes           Std       0 Z8AA$CLOSE_SOURCE_FILE
         yes           Std       0 Z9AC$CLOSE_LO
 yes     yes           Std       0 Z8AA$POSITION_ES_OUT
         yes           Std       0 Z9AL$WRITE_TERMINAL
         yes           Std       0 Z8JS$START_TREEWALKER
 yes     yes           Std       0 Z9AR$FREE_DYNAMIC_SEGMENT
         yes           Std       0 Z8JT$TABLE_DUMP
         yes           Std       0 Z8IA
         yes           Std       0 Z9AT$ABORT
         yes           Std       0 Z9AT$ABORT2
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     COMCOM                                O1COM                                 HIER_STK_PTR
     HIER_STK                              PAGE_FORMAT                           REP_STK_PTR
     REP_STK                               M$UC                                  B$TCB$

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:17   


        1        1        /*M* Z9AT -- Wrapup and setup for wrapup routines */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7
        8        8
        9        9        /*P*
       10       10               NAME: Z9AT
       11       11
       12       12             AUTHOR: Glenn & Heath
       13       13
       14       14            PURPOSE: Z9AT$START -- Setup error recovery and break control.
       15       15                     Z9AT$BREAK -- Handle BREAK.
       16       16                     Z9AT$ABORT -- Wrapup after compiler abort.
       17       17                     Z9AT$TERMINATOR -- Terminate compile.
       18       18
       19       19        */
       20       20
       21       21        %EJECT;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:18   
       22       22        Z9AT$TERMINATOR: PROC;

     22  9 000000   000000 700200 xent  Z9AT$TERMIN* TSX0  ! X66_AUTO_0
         9 000001   000014 000000                    ZERO    12,0

       23       23
       24       24        %EQU PHASE=6;
       25       25        %INCLUDE Z8A_DEFC;
       26       93        %INCLUDE Z8A_COMCOM;
       27      743        %INCLUDE Z8E_STACKS;
       28     3009        %INCLUDE Z8E_O1COM;
       29     3770        %INCLUDE Z8A_ERR_NUMS;
       30     4534        %INCLUDE Z8A_SYS_FILE;
       31    10809
       32    10810    1   DCL   B$EXCFR$               PTR ;
       33    10811    1   DCL   B$TCB$                 PTR SYMREF ;
       34    10812
       35    10813    1   DCL   J                      SBIN WORD ;
       36    10814    1   DCL   SAVED_LINE             SBIN WORD ;
       37    10815    1   DCL   SAVED_PHASE            SBIN WORD ;
       38    10816    1   DCL   Z8AA$POSITION_ES_OUT   ENTRY ALTRET ;
       39    10817        /*#25001*/
       40    10818    1   DCL   Z8AA$CLOSE_SOURCE_FILE ENTRY ALTRET;
       41    10819    1   DCL   Z8AE$ERROR             ENTRY (12) ;
       42    10820    1   DCL   Z8IA                   ENTRY ;
       43    10821    1   DCL   Z8JS$START_TREEWALKER         ENTRY ;
       44    10822    1   DCL   Z8JT$TABLE_DUMP        ENTRY ;
       45    10823    1   DCL   Z9AL$DUMP_LINE         ENTRY (1) ;
       46    10824    1   DCL   Z9AL$WRITE_TERMINAL    ENTRY ;
       47    10825    1   DCL   Z9AR$FREE_DYNAMIC_SEGMENT ENTRY ALTRET;
       48    10826
       49    10827    1   DCL   Z9AT$BREAK             ENTRY ASYNC ;
       50    10828
       51    10829    1   DCL   Z9AC$CLOSE_LO          ENTRY ;
       52    10830    1   DCL   ZERO                   BIT (1) ;
       53    10831
       54    10832
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:19   
       55    10833    1   DCL 1 DELTA_CMD              STATIC,
       56    10834    1       2 *                      CHAR (0) INIT ('M '),
       57    10835    1       2 LOC                    CHAR (6) INIT ('      '),
       58    10836    1       2 *                      CHAR (0) INIT ('\I') ;
       59    10837
       60    10838
       61    10839    1   DCL   OBUF                   CHAR (120) EXT ;
       62    10840
       63    10841    1   DCL 1 LINE                   REDEF OBUF,
       64    10842    1       2 P                      CHAR ( 9), /* PHASE# =        */
       65    10843    1       2 PHASE                  CHAR (1),
       66    10844    1       2 R                      CHAR (10), /* , RECNO =       */
       67    10845    1       2 RECNO                  CHAR (5),
       68    10846    1       2 D                      CHAR (10), /* , #DIAG =       */
       69    10847    1       2 DIAG                   CHAR ( 3),
       70    10848    1       2 C                      CHAR (17), /* , CUR SEVERITY = */
       71    10849    1       2 CUR                    CHAR ( 1),
       72    10850    1       2 *                      CHAR (64) ;
       73    10851
       74    10852
       75    10853        %FPT_TRMPRG (RSTBRK = YES) ;
       76    10882        %FPT_EXIT (STEPCC = ABORT);
       77    10897        %FPT_INT (UENTRY = Z9AT$BREAK) ;
       78    10911
       79    10912        %FPT_TRAP (PROGRAMMED = Z9AT$ABORT, ARITHMETIC = Z9AT$ABORT,
       80    10913                   ERRORS = Z9AT$ABORT, HISTORY_REGS = NO,
       81    10914                   DIVIDE_CHECK=TRAP, OVERFLOW=TRAP, COMMAND=TRAP,
       82    10915                   IPR=TRAP, LOCKUP=TRAP, MEMORY=TRAP,
       83    10916                   MISSING_PAGE=TRAP, MISSING_SEG=TRAP, SECURITY_1=TRAP,
       84    10917                   SECURITY_2=TRAP) ;
       85    10940
       86    10941        %FPT_TRAP (FPTN = FPT_UNTRAP, DIVIDE_CHECK=ABORT,
       87    10942                   OVERFLOW=ABORT, COMMAND=ABORT, IPR=ABORT,
       88    10943                   LOCKUP=ABORT, MEMORY=ABORT, MISSING_PAGE=ABORT,
       89    10944                   MISSING_SEG=ABORT, SECURITY_1=ABORT, SECURITY_2=ABORT,
       90    10945                   PMME = Z9AT$ABORT2) ;
       91    10968
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:20   
       92    10969        %FPT_ALIB (FPTN = TO_DELTA, CMD = DELTA_CMD,
       93    10970                   LIBNAME = DELTA, RETRN = YES,
       94    10971                   STCLASS = CONSTANT) ;
       95    10988
       96    10989        %VLP_NAME (FPTN = DELTA, NAME = 'DELTA', STCLASS = CONSTANT) ;
       97    11016
       98    11017        %VLP_REGS ;
       99    11032        %VLP_PTRS ;
      100    11046
      101    11047        %B$TCB (STCLASS = "BASED(B$TCB$)") ;
      102    11050        %B$EXCFR (STCLASS = "BASED (B$EXCFR$)") ;
      103    11068
      104    11069        %EJECT;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:21   
      105    11070        /*D*       NAME: Z9AT$TERMINATOR
      106    11071
      107    11072                   CALL: CALL Z9AT$TERMINATOR ;
      108    11073
      109    11074              INTERFACE: Calls WRAPUP (an internal proc).
      110    11075                         M$EXIT -- Exit to operating system.
      111    11076
      112    11077            DESCRIPTION: Calls WRAPUP and M$EXIT (STEPCC = 6).
      113    11078
      114    11079        */
      115    11080
      116    11081    1          IF COMCOM.CURRENT.PHASE = 1 THEN

  11081  9 000002   000132 235000 xsym               LDA     COMCOM+90
         9 000003   000001 115007                    CMPA    1,DL
         9 000004   000013 601000 9                  TNZ     s:11088

      117    11082    2            DO;

      118    11083                   /* Phase 1 must close the listing files for PH 5 */
      119    11084    2              CALL Z8AA$CLOSE_SOURCE_FILE;

  11084  9 000005   000000 631400 10                 EPPR1   0
         9 000006   000000 701000 xent               TSX1    Z8AA$CLOSE_SOURCE_FILE
         9 000007   000000 011000                    NOP     0

      120    11085    2              CALL Z8AA$POSITION_ES_OUT;

  11085  9 000010   000000 631400 10                 EPPR1   0
         9 000011   000000 701000 xent               TSX1    Z8AA$POSITION_ES_OUT
         9 000012   000000 011000                    NOP     0

      121    11086    2            END;

      122    11087
      123    11088    1          CALL WRAPUP ;

PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:22   
  11088  9 000013   000037 701000 9                  TSX1    WRAPUP
         9 000014   000000 011000                    NOP     0

      124    11089
      125    11090    1          IF COMCOM.TREE_LINE ~= ' '

  11090  9 000015   040000 106400                    CMPC    fill='040'O
         9 000016   000376 000124 xsym               ADSC9   COMCOM+254               cn=0,n=84
         9 000017   000001 000001 10                 ADSC9   1                        cn=0,n=1
         9 000020   000023 601000 9                  TNZ     s:11092
         9 000021   000104 234000 xsym               SZN     COMCOM+68
         9 000022   000030 605000 9                  TPL     s:11096

      126    11091    2          OR COMCOM.OB.IT = '1'B THEN DO ;

      127    11092    2            COMCOM.CURRENT.PHASE = 6 ;

  11092  9 000023   000006 235007                    LDA     6,DL
         9 000024   000132 755000 xsym               STA     COMCOM+90

      128    11093    2            CALL Z8JS$START_TREEWALKER ;

  11093  9 000025   000000 631400 10                 EPPR1   0
         9 000026   000000 701000 xent               TSX1    Z8JS$START_TREEWALKER
         9 000027   000000 011000                    NOP     0

      129    11094    2          END ;

      130    11095
      131    11096    1          CALL Z9AC$CLOSE_LO ;

  11096  9 000030   000000 631400 10                 EPPR1   0
         9 000031   000000 701000 xent               TSX1    Z9AC$CLOSE_LO
         9 000032   000000 011000                    NOP     0

      132    11097    1          CALL M$EXIT (FPT_EXIT) ;

PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:23   
  11097  9 000033   000014 630400 6                  EPPR0   FPT_EXIT
         9 000034   000001 713400                    CLIMB   exit
         9 000035   400400 401760                    pmme    nvectors=2
         9 000036   000073 710000 9                  TRA     s:11133+2

      133    11098
      134    11099        %EJECT;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:24   
      135    11100        /*D*   NAME: WRAPUP (An internal proc of Z9AT)
      136    11101
      137    11102               CALL: CALL WRAPUP ;
      138    11103
      139    11104          INTERFACE: Z8IA -- The Annotator (Phase 5).
      140    11105                     Z9AR -- Free Dynamic Segment (I.L. Table Space).
      141    11106                     Z9AC -- Close "LO" file.
      142    11107
      143    11108        DESCRIPTION: SYSTEM DEPENDENT --> CP6.
      144    11109                     PROVIDE GRACEFUL TERMINATION OF THE COMPILER
      145    11110                     UPON RECOGNITION OF AN UNRECOVERABLE COMPILER ERROR.
      146    11111                     CALL THE ANNOTATOR TO DO WHAT IT CAN WITH WHAT IT'S GOT.
      147    11112                     FREE ALL DYNAMIC MEMORY USED AND CLOSE THE LISTING FILE.
      148    11113
      149    11114        */
      150    11115
      151    11116    1   WRAPUP: PROC  ; /* Called by Z9AT$TERMINATOR & Z9AT$ABORT */

  11116  9 000037   200010 741300       WRAPUP       STX1  ! ZERO+1,,AUTO

      152    11117
      153    11118    2          IF COMCOM.OB.ABDUMP

  11118  9 000040   000107 234000 xsym               SZN     COMCOM+71
         9 000041   000045 605000 9                  TPL     s:11121

      154    11119    2          THEN CALL Z8JT$TABLE_DUMP ;

  11119  9 000042   000000 631400 10                 EPPR1   0
         9 000043   000000 701000 xent               TSX1    Z8JT$TABLE_DUMP
         9 000044   000000 011000                    NOP     0

      155    11120
      156    11121    3          IF COMCOM.CURRENT.PHASE < 5 THEN DO ;

  11121  9 000045   000132 235000 xsym               LDA     COMCOM+90
         9 000046   000005 115007                    CMPA    5,DL
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:25   
         9 000047   000071 603000 9                  TRC     s:11133

      157    11122    3            SAVED_LINE = COMCOM.CURRENT.LINE ; /* Phase 5 changes LINE */

  11122  9 000050   000133 236000 xsym               LDQ     COMCOM+91
         9 000051   200005 756100                    STQ     SAVED_LINE,,AUTO

      158    11123    3            IF COMCOM.CURRENT.PHASE < 2 THEN

  11123  9 000052   000002 115007                    CMPA    2,DL
         9 000053   000055 603000 9                  TRC     s:11125

      159    11124    3              COMCOM.LINES.SOURCE = COMCOM.CURRENT.LINE;

  11124  9 000054   000131 756000 xsym               STQ     COMCOM+89

      160    11125    3            SAVED_PHASE = COMCOM.CURRENT.PHASE ;

  11125  9 000055   200006 755100                    STA     SAVED_PHASE,,AUTO

      161    11126    3            COMCOM.CURRENT.PHASE = 5 ;

  11126  9 000056   000005 235007                    LDA     5,DL
         9 000057   000132 755000 xsym               STA     COMCOM+90

      162    11127    3            COMCOM.OB.DECK = FALSE;    /*#32168*/

  11127  9 000060   000002 236000 10                 LDQ     2
         9 000061   000022 356000 xsym               ANSQ    COMCOM+18

      163    11128    3            CALL Z8IA ; /* Phase 5 */

  11128  9 000062   000000 631400 10                 EPPR1   0
         9 000063   000000 701000 xent               TSX1    Z8IA
         9 000064   000000 011000                    NOP     0

      164    11129    3            COMCOM.CURRENT.LINE = SAVED_LINE ;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:26   

  11129  9 000065   200005 235100                    LDA     SAVED_LINE,,AUTO
         9 000066   000133 755000 xsym               STA     COMCOM+91

      165    11130    3            COMCOM.CURRENT.PHASE = SAVED_PHASE ;

  11130  9 000067   200006 236100                    LDQ     SAVED_PHASE,,AUTO
         9 000070   000132 756000 xsym               STQ     COMCOM+90

      166    11131    3          END ;

      167    11132
      168    11133    2          RETURN ;

  11133  9 000071   200010 221300                    LDX1  ! ZERO+1,,AUTO
         9 000072   000001 702211                    TSX2  ! 1,X1
         9 000073   000076 710000 9                  TRA     s:11152

      169    11134    2   END WRAPUP;
      170    11135        %EJECT;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:27   
      171    11136        /*D*       NAME: Z9AT$START
      172    11137
      173    11138                   CALL: CALL Z9AT$START ;
      174    11139
      175    11140              INTERFACE: M$INT -- Set BREAK control.
      176    11141                         M$TRAP - Set Wrapup control.
      177    11142
      178    11143            DESCRIPTION: Called by Z8AM for system dependent initialization,
      179    11144                         this routine sets Z9AT$ABORT as the wrapup entry
      180    11145                         point, and Z9AT$BREAK as the entry point when the
      181    11146                         BREAK key is used.
      182    11147
      183    11148        */
      184    11149
      185    11150    1   Z9AT$START: ENTRY ;

  11150  9 000074   000000 700200 xent  Z9AT$START   TSX0  ! X66_AUTO_0
         9 000075   000014 000000                    ZERO    12,0

      186    11151
      187    11152    1          CALL CONCAT( OBUF, 'COBOL85 Version ' ,%VERSION, '  here on ');

  11152  9 000076   040000 100400                    MLR     fill='040'O
         9 000077   000014 000020 8                  ADSC9   DELTA+2                  cn=0,n=16
         9 000100   000000 000020 7                  ADSC9   OBUF                     cn=0,n=16
         9 000101   000020 236000 8                  LDQ     DELTA+6
         9 000102   000004 552070 7                  STBQ    OBUF+4,'70'O
         9 000103   040000 100400                    MLR     fill='040'O
         9 000104   000021 000012 8                  ADSC9   DELTA+7                  cn=0,n=10
         9 000105   000004 600145 7                  ADSC9   OBUF+4                   cn=3,n=101

      188    11153    1          SUBSTR (OBUF, 29, 8) = COMCOM.COMPILE.DATE ;

  11153  9 000106   040000 100400                    MLR     fill='040'O
         9 000107   000140 000010 xsym               ADSC9   COMCOM+96                cn=0,n=8
         9 000110   000007 200010 7                  ADSC9   OBUF+7                   cn=1,n=8

PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:28   
      189    11154    1          CALL Z9AL$WRITE_TERMINAL ;

  11154  9 000111   000000 631400 10                 EPPR1   0
         9 000112   000000 701000 xent               TSX1    Z9AL$WRITE_TERMINAL
         9 000113   000000 011000                    NOP     0

      190    11155
      191    11156    1          CALL M$INT (FPT_INT) ;

  11156  9 000114   000022 630400 6                  EPPR0   FPT_INT
         9 000115   010002 713400                    CLIMB   4098
         9 000116   400000 401760                    pmme    nvectors=1

      192    11157
      193    11158    1          CALL M$TRAP (FPT_TRAP)

  11158  9 000117   000026 630400 6                  EPPR0   FPT_TRAP
         9 000120   410004 713400                    CLIMB   alt,+4100
         9 000121   400400 401760                    pmme    nvectors=2
         9 000122   000124 702000 9                  TSX2    s:11160
         9 000123   000132 710000 9                  TRA     s:11164

      194    11159    2          WHENALTRETURN DO ; /* Unsuccessful Call */

      195    11160    2            OBUF = 'Compiler Problem -- M$TRAP Alt-Return' ;

  11160  9 000124   040000 100400                    MLR     fill='040'O
         9 000125   000024 000045 8                  ADSC9   DELTA+10                 cn=0,n=37
         9 000126   000000 000170 7                  ADSC9   OBUF                     cn=0,n=120

      196    11161    2            CALL Z9AL$WRITE_TERMINAL ;

  11161  9 000127   000000 631400 10                 EPPR1   0
         9 000130   000000 701000 xent               TSX1    Z9AL$WRITE_TERMINAL
         9 000131   000000 011000                    NOP     0

      197    11162    2          END ;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:29   

      198    11163
      199    11164    1          RETURN ;

  11164  9 000132   000000 702200 xent               TSX2  ! X66_ARET

      200    11165
      201    11166        %EJECT;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:30   
      202    11167        /*D*       NAME: Z9AT$ABORT
      203    11168
      204    11169                   CALL: Called by operating system when compiler aborts.
      205    11170
      206    11171              INTERFACE: Z8AE$ERROR -- Issues an ERR item.
      207    11172                         M$WRITE -- Writes a record.
      208    11173                         DUMP_STATS -- Writes compiler stats to DO file.
      209    11174                         WRAPUP -- Wraps up compile.
      210    11175                         M$TRAP -- Disable abort trap.
      211    11176                         Z8JS$START_TREEWALKER -- Tree Dumper.
      212    11177
      213    11178            DESCRIPTION: This routine issues the error message, "Compiler
      214    11179                         abort" at the line that the compiler was working
      215    11180                         on at the time of the abort; then gives control
      216    11181                         to Z9AT$TERMINATOR. A CASE statement on the phase
      217    11182                         in execution at the time of the abort is executed
      218    11183                         so that tailored information can be dumped to aid
      219    11184                         in determining the cause of the abort.
      220    11185
      221    11186        */
      222    11187
      223    11188    1   Z9AT$ABORT: ENTRY ;

  11188  9 000133   000000 700200 xent  Z9AT$ABORT   TSX0  ! X66_AUTO_0
         9 000134   000014 000000                    ZERO    12,0

      224    11189
      225    11190    1          B$EXCFR$ = B$TCB$ -> B$TCB.STK$ ;

  11190  9 000135   000000 470400 xsym               LDP0    B$TCB$
         9 000136   000001 236100                    LDQ     1,,PR0
         9 000137   200003 756100                    STQ     B$EXCFR$,,AUTO

      226    11191    1          VLP_REGS = B$EXCFR$ -> B$EXCFR.REGS ;

  11191  9 000140   200003 471500                    LDP1    B$EXCFR$,,AUTO
         9 000141   000000 100500                    MLR     fill='000'O
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:31   
         9 000142   100050 000034                    ADSC9   40,,PR1                  cn=0,n=28
         9 000143   000052 000034 6                  ADSC9   VLP_REGS                 cn=0,n=28

      227    11192    1          VLP_PTRS = B$EXCFR$ -> B$EXCFR.PRS ;

  11192  9 000144   000000 100500                    MLR     fill='000'O
         9 000145   100020 000040                    ADSC9   16,,PR1                  cn=0,n=32
         9 000146   000062 000040 6                  ADSC9   VLP_PTRS                 cn=0,n=32

      228    11193
      229    11194    2          IF COMCOM.CURRENT.PHASE ~= 6 THEN DO ;

  11194  9 000147   000132 235000 xsym               LDA     COMCOM+90
         9 000150   000006 115007                    CMPA    6,DL
         9 000151   000272 600000 9                  TZE     s:11240

      230    11195
      231    11196    2            CALL M$TRAP (FPT_UNTRAP) ; /* Disable Traps */

  11196  9 000152   000040 630400 6                  EPPR0   FPT_UNTRAP
         9 000153   010004 713400                    CLIMB   4100
         9 000154   400400 401760                    pmme    nvectors=2

      232    11197
      233    11198    2            OBUF = '<<<<<< COMPILER ABORT !!! >>>>>>' ;

  11198  9 000155   040000 100400                    MLR     fill='040'O
         9 000156   000036 000040 8                  ADSC9   DELTA+20                 cn=0,n=32
         9 000157   000000 000170 7                  ADSC9   OBUF                     cn=0,n=120

      234    11199    2            CALL Z9AL$WRITE_TERMINAL ;

  11199  9 000160   000000 631400 10                 EPPR1   0
         9 000161   000000 701000 xent               TSX1    Z9AL$WRITE_TERMINAL
         9 000162   000000 011000                    NOP     0

      235    11200
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:32   
      236    11201    2            CALL BINCHAR (DELTA_CMD.LOC, B$TCB$->B$TCB.STK$->B$EXCFR.IC) ;

  11201  9 000163   000000 470400 xsym               LDP0    B$TCB$
         9 000164   000001 471500                    LDP1    1,,PR0
         9 000165   100004 236100                    LDQ     4,,PR1
         9 000166   000022 772000                    QRL     18
         9 000167   000000 235003                    LDA     0,DU
         9 000170   200012 757100                    STAQ    ZERO+3,,AUTO
         9 000171   000000 301500                    BTD
         9 000172   200012 000010                    NDSC9   ZERO+3,,AUTO             cn=0,s=lsgnf,sf=0,n=8
         9 000173   000000 430006 6                  NDSC9   DELTA_CMD                cn=2,s=nosgn,sf=0,n=6

      237    11202    2            CALL M$ALIB (TO_DELTA)

  11202  9 000174   000000 630400 8                  EPPR0   TO_DELTA
         9 000175   400007 713400                    CLIMB   alt,+7
         9 000176   401400 401760                    pmme    nvectors=4
         9 000177   000201 702000 9                  TSX2    s:11204
         9 000200   000211 710000 9                  TRA     s:11209

      238    11203    3            WHENALTRETURN DO ;

      239    11204    3              OBUF = 'Not enough memory to wrapup, up MEM or use VIRTUAL opt.';

  11204  9 000201   040000 100400                    MLR     fill='040'O
         9 000202   000046 000067 8                  ADSC9   DELTA+28                 cn=0,n=55
         9 000203   000000 000170 7                  ADSC9   OBUF                     cn=0,n=120

      240    11205    3              CALL Z9AL$WRITE_TERMINAL ;

  11205  9 000204   000000 631400 10                 EPPR1   0
         9 000205   000000 701000 xent               TSX1    Z9AL$WRITE_TERMINAL
         9 000206   000000 011000                    NOP     0

      241    11206    3              CALL M$ERR ;

  11206  9 000207   000002 713400                    CLIMB   err
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:33   
         9 000210   000000 401760                    pmme    nvectors=0

      242    11207    3            END ;

      243    11208
      244    11209    2            CALL M$CLRSTK ;

  11209  9 000211   010013 713400                    CLIMB   4107
         9 000212   000000 401760                    pmme    nvectors=0

      245    11210
      246    11211    2            OBUF = ' ' ;

  11211  9 000213   040000 100400                    MLR     fill='040'O
         9 000214   000001 000001 10                 ADSC9   1                        cn=0,n=1
         9 000215   000000 000170 7                  ADSC9   OBUF                     cn=0,n=120

      247    11212    2            CALL Z9AL$WRITE_TERMINAL ;

  11212  9 000216   000000 631400 10                 EPPR1   0
         9 000217   000000 701000 xent               TSX1    Z9AL$WRITE_TERMINAL
         9 000220   000000 011000                    NOP     0

      248    11213
      249    11214    3            DO CASE (COMCOM.CURRENT.PHASE) ;

  11214  9 000221   000132 235000 xsym               LDA     COMCOM+90
         9 000222   000002 115007                    CMPA    2,DL
         9 000223   000225 602005 9                  TNC     s:11214+4,AL
         9 000224   000236 710000 9                  TRA     s:11225
         9 000225   000236 710000 9                  TRA     s:11225
         9 000226   000227 710000 9                  TRA     s:11216

      250    11215    3              CASE (1) ;

      251    11216    3                CALL Z8AA$CLOSE_SOURCE_FILE  ;

PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:34   
  11216  9 000227   000000 631400 10                 EPPR1   0
         9 000230   000000 701000 xent               TSX1    Z8AA$CLOSE_SOURCE_FILE
         9 000231   000000 011000                    NOP     0

      252    11217    3                CALL Z8AA$POSITION_ES_OUT;

  11217  9 000232   000000 631400 10                 EPPR1   0
         9 000233   000000 701000 xent               TSX1    Z8AA$POSITION_ES_OUT
         9 000234   000000 011000                    NOP     0
         9 000235   000236 710000 9                  TRA     s:11225

      253    11218    3              CASE (2) ;

      254    11219    3              CASE (3) ;

      255    11220    3              CASE (4) ;

      256    11221    3              CASE (5) ;

      257    11222    3              CASE (0) ;

      258    11223    3            END /* Case of Phase */ ;

      259    11224
      260    11225    2            CALL Z8AE$ERROR (%E$COMPILER_ABORT) ;

  11225  9 000236   000005 630400 10                 EPPR0   5
         9 000237   000003 631400 10                 EPPR1   3
         9 000240   000000 701000 xent               TSX1    Z8AE$ERROR
         9 000241   000000 011000                    NOP     0

      261    11226    2            CALL DUMP_STATS ;

  11226  9 000242   000000 631400 10                 EPPR1   0
         9 000243   000306 701000 9                  TSX1    s:11270
         9 000244   000000 011000                    NOP     0

PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:35   
      262    11227    2            CALL WRAPUP ;

  11227  9 000245   000037 701000 9                  TSX1    WRAPUP
         9 000246   000000 011000                    NOP     0

      263    11228
      264    11229    2            IF  COMCOM.TREE_LINE ~= ' '

  11229  9 000247   040000 106400                    CMPC    fill='040'O
         9 000250   000376 000124 xsym               ADSC9   COMCOM+254               cn=0,n=84
         9 000251   000001 000001 10                 ADSC9   1                        cn=0,n=1
         9 000252   000255 601000 9                  TNZ     s:11231
         9 000253   000104 234000 xsym               SZN     COMCOM+68
         9 000254   000262 605000 9                  TPL     s:11235

      265    11230    3            OR  COMCOM.OB.IT = '1'B THEN DO ;

      266    11231    3              COMCOM.CURRENT.PHASE = 6 ;

  11231  9 000255   000006 235007                    LDA     6,DL
         9 000256   000132 755000 xsym               STA     COMCOM+90

      267    11232    3              CALL Z8JS$START_TREEWALKER ;

  11232  9 000257   000000 631400 10                 EPPR1   0
         9 000260   000000 701000 xent               TSX1    Z8JS$START_TREEWALKER
         9 000261   000000 011000                    NOP     0

      268    11233    3            END /* TREE_LINE ~= blanks or IT is on */ ;

      269    11234
      270    11235    2            CALL Z9AC$CLOSE_LO ;

  11235  9 000262   000000 631400 10                 EPPR1   0
         9 000263   000000 701000 xent               TSX1    Z9AC$CLOSE_LO
         9 000264   000000 011000                    NOP     0

PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:36   
      271    11236    2            CALL Z9AR$FREE_DYNAMIC_SEGMENT ;

  11236  9 000265   000000 631400 10                 EPPR1   0
         9 000266   000000 701000 xent               TSX1    Z9AR$FREE_DYNAMIC_SEGMENT
         9 000267   000000 011000                    NOP     0

      272    11237
      273    11238    2            CALL M$XXX ; /* Abort, Set STEPCC = 6 */

  11238  9 000270   000003 713400                    CLIMB   3
         9 000271   000000 401760                    pmme    nvectors=0

      274    11239
      275    11240    2          END ; /* Not Phase 6 */

  11240  9 000272   000275 710000 9                  TRA     s:11253

      276    11241
      277    11242        %EJECT;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:37   
      278    11243        /*D*       NAME: Z9AT$ABORT2
      279    11244
      280    11245                   CALL: Called by IBEX on ALTRET within wrapup.
      281    11246
      282    11247            DESCRIPTION: This should never happen.
      283    11248
      284    11249        */
      285    11250
      286    11251    1   Z9AT$ABORT2: ENTRY ;

  11251  9 000273   000000 700200 xent  Z9AT$ABORT2  TSX0  ! X66_AUTO_0
         9 000274   000014 000000                    ZERO    12,0

      287    11252
      288    11253    1          OBUF = 'Compiler Problem -- M$ Alt-Return in Wrapup' ;

  11253  9 000275   040000 100400                    MLR     fill='040'O
         9 000276   000064 000053 8                  ADSC9   DELTA+42                 cn=0,n=43
         9 000277   000000 000170 7                  ADSC9   OBUF                     cn=0,n=120

      289    11254    1          CALL Z9AL$WRITE_TERMINAL ;

  11254  9 000300   000000 631400 10                 EPPR1   0
         9 000301   000000 701000 xent               TSX1    Z9AL$WRITE_TERMINAL
         9 000302   000000 011000                    NOP     0

      290    11255    1          CALL M$XXX ; /* Abort, Set STEPCC = 6 */

  11255  9 000303   000003 713400                    CLIMB   3
         9 000304   000000 401760                    pmme    nvectors=0
         9 000305   000310 710000 9                  TRA     s:11273

      291    11256
      292    11257        %EJECT ;
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:38   
      293    11258        /*D*       NAME: DUMP_STATS (Z9AT internal proc).
      294    11259
      295    11260                   CALL: CALL DUMP_STATS ;
      296    11261
      297    11262              INTERFACE: M$WRITE -- Writes a record.
      298    11263
      299    11264            DESCRIPTION: Write the current compiler stats to the "ME"
      300    11265                         file: Phase#, Record#, #Diagnostics, Maximum
      301    11266                         Diagnostic Severity.
      302    11267
      303    11268        */
      304    11269
      305    11270    1   DUMP_STATS: ENTRY ; /* CALLED BY Z9AT$BREAK & Z9AT$ABORT */

  11270  9 000306   000000 700200 xent  DUMP_STATS   TSX0  ! X66_AUTO_0
         9 000307   000014 000000                    ZERO    12,0

      306    11271
      307    11272
      308    11273    1          OBUF = ' ' ;

  11273  9 000310   040000 100400                    MLR     fill='040'O
         9 000311   000001 000001 10                 ADSC9   1                        cn=0,n=1
         9 000312   000000 000170 7                  ADSC9   OBUF                     cn=0,n=120

      309    11274    1          LINE.P = 'Phase# = ' ;

  11274  9 000313   040000 100400                    MLR     fill='040'O
         9 000314   000077 000011 8                  ADSC9   DELTA+53                 cn=0,n=9
         9 000315   000000 000011 7                  ADSC9   OBUF                     cn=0,n=9

      310    11275    1          LINE.R = ', RecNo = ' ;

  11275  9 000316   040000 100400                    MLR     fill='040'O
         9 000317   000102 000012 8                  ADSC9   DELTA+56                 cn=0,n=10
         9 000320   000002 400012 7                  ADSC9   OBUF+2                   cn=2,n=10

PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:39   
      311    11276    1          LINE.D = ', #Diag = ' ;

  11276  9 000321   040000 100400                    MLR     fill='040'O
         9 000322   000105 000012 8                  ADSC9   DELTA+59                 cn=0,n=10
         9 000323   000006 200012 7                  ADSC9   OBUF+6                   cn=1,n=10

      312    11277    1          LINE.C = ', Cur Severity = ' ;

  11277  9 000324   040000 100400                    MLR     fill='040'O
         9 000325   000110 000021 8                  ADSC9   DELTA+62                 cn=0,n=17
         9 000326   000011 400021 7                  ADSC9   OBUF+9                   cn=2,n=17

      313    11278
      314    11279    1          CALL BINCHAR (LINE.PHASE, COMCOM.CURRENT.PHASE) ;

  11279  9 000327   000132 235000 xsym               LDA     COMCOM+90
         9 000330   000044 773000                    LRL     36
         9 000331   200012 757100                    STAQ    ZERO+3,,AUTO
         9 000332   000000 301500                    BTD
         9 000333   200012 000010                    NDSC9   ZERO+3,,AUTO             cn=0,s=lsgnf,sf=0,n=8
         9 000334   000002 230001 7                  NDSC9   OBUF+2                   cn=1,s=nosgn,sf=0,n=1

      315    11280
      316    11281    1          CALL BINCHAR (LINE.RECNO, COMCOM.CURRENT.LINE) ;

  11281  9 000335   000000 301400                    BTD
         9 000336   000133 000004 xsym               NDSC9   COMCOM+91                cn=0,s=lsgnf,sf=0,n=4
         9 000337   000005 030005 7                  NDSC9   OBUF+5                   cn=0,s=nosgn,sf=0,n=5

      317    11282
      318    11283               /* Blank when zero, a la PIC ZZZZ9 */
      319    11284
      320    11285    1          ZERO = '1'B ;

  11285  9 000340   400000 236003                    LDQ     -131072,DU
         9 000341   200007 756100                    STQ     ZERO,,AUTO

PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:40   
      321    11286    2          DO J = 0 TO 3 ;

  11286  9 000342   200004 450100                    STZ     J,,AUTO

      322    11287    3            IF ZERO THEN DO ;

  11287  9 000343   200007 234100                    SZN     ZERO,,AUTO
         9 000344   000357 605000 9                  TPL     s:11292

      323    11288    3              IF SUBSTR (LINE.RECNO, J, 1) = '0'

  11288  9 000345   200004 235100                    LDA     J,,AUTO
         9 000346   040000 106405                    CMPC    fill='040'O
         9 000347   000005 000001 7                  ADSC9   OBUF+5,A                 cn=0,n=1
         9 000350   000006 000001 10                 ADSC9   6                        cn=0,n=1
         9 000351   000356 601000 9                  TNZ     s:11290

      324    11289    3              THEN SUBSTR (LINE.RECNO, J, 1) = ' ' ;

  11289  9 000352   040005 100400                    MLR     fill='040'O
         9 000353   000001 000001 10                 ADSC9   1                        cn=0,n=1
         9 000354   000005 000001 7                  ADSC9   OBUF+5,A                 cn=0,n=1
         9 000355   000357 710000 9                  TRA     s:11292

      325    11290    3              ELSE ZERO = '0'B ;

  11290  9 000356   200007 450100                    STZ     ZERO,,AUTO

      326    11291    3            END ;

      327    11292    2          END ;

  11292  9 000357   200004 054100                    AOS     J,,AUTO
         9 000360   200004 235100                    LDA     J,,AUTO
         9 000361   000003 115007                    CMPA    3,DL
         9 000362   000343 604400 9                  TMOZ    s:11287

PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:41   
      328    11293
      329    11294    1          CALL BINCHAR (LINE.DIAG, COMCOM.NO_OF_ERRORS) ;

  11294  9 000363   000000 301400                    BTD
         9 000364   000003 000004 xsym               NDSC9   COMCOM+3                 cn=0,s=lsgnf,sf=0,n=4
         9 000365   000010 630003 7                  NDSC9   OBUF+8                   cn=3,s=nosgn,sf=0,n=3

      330    11295
      331    11296               /* Blank when zero, a la PIC ZZ9 */
      332    11297
      333    11298    1          ZERO = '1'B ;

  11298  9 000366   400000 236003                    LDQ     -131072,DU
         9 000367   200007 756100                    STQ     ZERO,,AUTO

      334    11299    2          DO J = 0 TO 1 ;

  11299  9 000370   200004 450100                    STZ     J,,AUTO

      335    11300    3            IF ZERO THEN DO ;

  11300  9 000371   200007 234100                    SZN     ZERO,,AUTO
         9 000372   000405 605000 9                  TPL     s:11305

      336    11301    3              IF SUBSTR (LINE.DIAG, J, 1) = '0'

  11301  9 000373   200004 235100                    LDA     J,,AUTO
         9 000374   040000 106405                    CMPC    fill='040'O
         9 000375   000010 600001 7                  ADSC9   OBUF+8,A                 cn=3,n=1
         9 000376   000006 000001 10                 ADSC9   6                        cn=0,n=1
         9 000377   000404 601000 9                  TNZ     s:11303

      337    11302    3              THEN SUBSTR (LINE.DIAG, J, 1) = ' ' ;

  11302  9 000400   040005 100400                    MLR     fill='040'O
         9 000401   000001 000001 10                 ADSC9   1                        cn=0,n=1
         9 000402   000010 600001 7                  ADSC9   OBUF+8,A                 cn=3,n=1
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:42   
         9 000403   000405 710000 9                  TRA     s:11305

      338    11303    3              ELSE ZERO = '0'B ;

  11303  9 000404   200007 450100                    STZ     ZERO,,AUTO

      339    11304    3            END ;

      340    11305    2          END ;

  11305  9 000405   200004 054100                    AOS     J,,AUTO
         9 000406   200004 235100                    LDA     J,,AUTO
         9 000407   000001 115007                    CMPA    1,DL
         9 000410   000371 604400 9                  TMOZ    s:11300

      341    11306
      342    11307    1          CALL BINCHAR (LINE.CUR, COMCOM.MAX_ERROR / 100) ;

  11307  9 000411   000002 236000 xsym               LDQ     COMCOM+2
         9 000412   000144 506007                    DIV     100,DL
         9 000413   200012 756100                    STQ     ZERO+3,,AUTO
         9 000414   000000 301500                    BTD
         9 000415   200012 000004                    NDSC9   ZERO+3,,AUTO             cn=0,s=lsgnf,sf=0,n=4
         9 000416   000015 630001 7                  NDSC9   OBUF+13                  cn=3,s=nosgn,sf=0,n=1

      343    11308
      344    11309    1          CALL Z9AL$WRITE_TERMINAL ;

  11309  9 000417   000000 631400 10                 EPPR1   0
         9 000420   000000 701000 xent               TSX1    Z9AL$WRITE_TERMINAL
         9 000421   000000 011000                    NOP     0

      345    11310
      346    11311    1          RETURN ;

  11311  9 000422   000000 702200 xent               TSX2  ! X66_ARET
      347    11312
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:43   
      348    11313    1   END Z9AT$TERMINATOR;
      349    11314
      350    11315        %EOD ;

PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:44   
--  Include file information  --

   CP_6_SUBS.:LIB_E04  is referenced.
   CP_6_C.:LIB_E04  is referenced.
   CP_6.:LIB_E04  cannot be made into a system file and is referenced.
   Z9A_FLAGS.:Z8A6TOU  is referenced.
   Z8A_SYS_FILE.:Z8A6TOU  is referenced.
   Z8A_ERR_NUMS.:Z8A6TOU  is referenced.
   Z8E_O1COM.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8A_LEX_SYMB.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8E_STACKS.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8A_COMCOM.:Z8A6TOU  cannot be made into a system file and is referenced.
   Z8A_DEFC.:Z8A6TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure Z9AT$TERMINATOR.
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:45   

 **** Variables and constants ****

  ****  Section 000 LblCom ITERATION

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN              1 ITERATION

  ****  Section 001 LblCom LEX_SYMBOL

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(3240)  r     1 LEX_SYMBOL                 0-0-0/w STRC(3240)        1 LEX_SYMBOL_WORDS

  ****  Section 002 LblCom CURRENT_LEX_SYMBOL$

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 CURRENT_LEX_SYMBOL$

  ****  Section 003 LblCom TEMP_LEX_SYMBOL

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(3240)        1 TEMP_LEX_SYMBOL

  ****  Section 004 LblCom TEMP_LEX_SYMBOL2

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(3240)        1 TEMP_LEX_SYMBOL2

PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:46   
  ****  Section 006  Data  Z9AT$TERMINATOR

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(90)    r     1 DELTA_CMD                 14-0-0/d STRC(216)   r     1 FPT_EXIT
    22-0-0/d STRC(144)   r     1 FPT_INT                   26-0-0/d STRC(360)   r     1 FPT_TRAP
     4-0-0/d STRC(288)   r     1 FPT_TRMPRG                40-0-0/d STRC(360)   r     1 FPT_UNTRAP
    62-0-0/d STRC(288)   r     1 VLP_PTRS                  52-0-0/d STRC(252)   r     1 VLP_REGS

  ****  Section 007 LblCom OBUF

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1080)  r     1 LINE                       0-0-0/c CHAR(120)   r     1 OBUF

  ****  Section 008 RoData Z9AT$TERMINATOR

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    12-0-0/c STRC(54)    r     1 DELTA                      0-0-0/d STRC(360)   r     1 TO_DELTA

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 B$EXCFR$                   4-0-0/w SBIN        r     1 J
     5-0-0/w SBIN        r     1 SAVED_LINE                 6-0-0/w SBIN        r     1 SAVED_PHASE
     7-0-0/b BIT         r     1 ZERO

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name
PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:47   

     0-0-0/w PTR         r     1 B$TCB$                     0-0-0/d STRC(13248) r     1 COMCOM
     0-0-0/w STRC(180)         1 HIER_STK(0:50)
     0-0-0/w SBIN              1 HIER_STK_PTR               0-0-0/d STRC(11580)       1 O1COM
     0-0-0/w STRC(144)         1 PAGE_FORMAT                0-0-0/w STRC(153)         1 REP_STK(0:50)
     0-0-0/w SBIN              1 REP_STK_PTR

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(288)         1 ADD_STMT                   0-0-0/w STRC(2448)  r     1 B$EXCFR
     0-0-0/w STRC(144)   r     1 B$TCB                      0-0-0/w ASTR(324)   r     1 BASED_LEX_SYMBOL
     0-0-0/w STRC(360)         1 BASED_LEX_SYMBOL_WORDS
     0-0-0/w STRC(288)         1 BINARY_OP                  0-0-0/w STRC(288)         1 CALL_STMT
     0-0-0/w CHAR(4096)        1 CHARS                      0-0-0/w STRC(288)         1 COMPUTE_STMT
     0-0-0/w STRC(72)          1 CONT                       0-0-0/w STRC(288)         1 DEFERED_IDENTIFIER
     0-0-0/w STRC(252)         1 DEFERED_ID_TREE            0-0-0/w STRC(288)         1 DEFERED_QUAL_ID
     0-0-0/w STRC(288)         1 DEFERED_SUM_CLAUSE
     0-0-0/w STRC(288)         1 DEFERED_SUM_CLAUSE_LIST
     0-0-0/w STRC(288)         1 DELETE_STMT                0-0-0/w STRC(288)         1 DIVIDE_STMT
     0-0-0/w STRC(288)         1 ILS_LIST                   0-0-0/w STRC(288)         1 INSPECT_1_STMT
     0-0-0/w STRC(288)         1 INSPECT_2_STMT             0-0-0/w STRC(288)         1 INSPECT_4_STMT
     0-0-0/w STRC(288)         1 LA_ITEM                    0-0-0/w STRC(504)         1 LX_CD_INPUT
     0-0-0/w STRC(324)         1 LX_CD_I_O                  0-0-0/w STRC(396)         1 LX_CD_OUTPUT
     0-0-0/w STRC(288)         1 LX_ETT_ITEM                0-0-0/w STRC(288)         1 LX_ITEM
     0-0-0/w STRC(288)         1 LX_LARGE                   0-0-0/w STRC(288)         1 LX_LIST
     0-0-0/w STRC(1224)        1 LX_REC_DECL                0-0-0/w STRC(864)         1 LX_REPORT_REC
     0-0-0/w STRC(288)         1 LX_TERMINAL                0-0-0N  NULL        r     1 M$UC
     0-0-0/w STRC(288)         1 MULTIPLY_STMT              0-0-0/w STRC(36864)       1 PAGE
     0-0-0/w STRC(288)         1 READ_STMT                  0-0-0/w STRC(288)         1 REWRITE_STMT
     0-0-0/w STRC(288)         1 START_STMT                 0-0-0/w STRC(252)         1 STRING_STMT
     0-0-0/w STRC(288)         1 SUBTRACT_STMT              0-0-0/w STRC(288)         1 UNARY_OP
     0-0-0/w STRC(288)         1 UNSTRING_STMT              0-0-0/w STRC(288)         1 WRITE_STMT

PL6.E3A0      #001=Z9AT$TERMINATOR File=Z9AT.:Z8A6TSI                            SAT 08/09/97 13:40 Page:48   

   Procedure Z9AT$TERMINATOR requires 275 words for executable code.
   Procedure Z9AT$TERMINATOR requires 12 words of local(AUTO) storage.

PL6.E3A0      #002=Z9AT$BREAK File=Z9AT.:Z8A6TSI                                 SAT 08/09/97 13:42 Page:49   
      351        1        /*T***********************************************************/
      352        2        /*T*                                                         */
      353        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      354        4        /*T*                                                         */
      355        5        /*T***********************************************************/
      356        6        /*D*       NAME: Z9AT$BREAK
      357        7
      358        8                   CALL: Called by the system when the BREAK key is hit.
      359        9
      360       10              INTERFACE: DUMP_STATS -- Prints Phase#, RecNo, etc. to DO.
      361       11                         M$TRMPRG -- Resets BREAK count so we won't CNTRL-Y.
      362       12                         M$SENV -- Save environment.
      363       13                         M$RENV -- Restore environment.
      364       14
      365       15            DESCRIPTION: This routine prints the current state of the
      366       16                         compile (a la PL/6) whenever the BREAK key is hit.
      367       17
      368       18        */
      369       19
      370       20        Z9AT$BREAK: PROC ASYNC NOAUTO ;
      371       21
      372       22    1        DCL B$TCB$ PTR SYMREF ;
      373       23    1        DCL B$EXCFR$ PTR ;
      374       24    1        DCL DUMP_STATS ENTRY ;
      375       25    1        DCL BREAK_IN_PROGRESS BIT (1) ALIGNED STATIC INIT ('0'B) ;
      376       26
      377       27        %INCLUDE CP_6;
      378     5587        %INCLUDE CP_6_SUBS;
      379     6127
      380     6128        %FPT_TRMPRG (RSTBRK = YES) ;
      381     6157
      382     6158    2          DO INHIBIT ;
      383     6159    2            IF BREAK_IN_PROGRESS THEN RETURN ;
      384     6160    2            BREAK_IN_PROGRESS = '1'B ;
      385     6161    2          END ;
      386     6162
      387     6163    1          CALL M$SENV ALTRET (SKIP_IF_SENV_ERROR) ;
PL6.E3A0      #002=Z9AT$BREAK File=Z9AT.:Z8A6TSI                                 SAT 08/09/97 13:42 Page:50   
      388     6164    1          CALL DUMP_STATS ;
      389     6165    1          CALL M$TRMPRG (FPT_TRMPRG) ;
      390     6166    1          CALL M$RENV ALTRET (IGNORE_RENV_ERROR) ;
      391     6167    1   IGNORE_RENV_ERROR: ;
      392     6168    1   SKIP_IF_SENV_ERROR: ;
      393     6169
      394     6170    2          DO INHIBIT ;
      395     6171    2            BREAK_IN_PROGRESS = '0'B ;
      396     6172    2            RETURN ;
      397     6173    2          END ;
      398     6174
      399     6175    1   END Z9AT$BREAK ;

PL6.E3A0      #002=Z9AT$BREAK File=Z9AT.:Z8A6TSI                                 SAT 08/09/97 13:42 Page:51   
--  Include file information  --

   CP_6_SUBS.:LIB_E04  is referenced.
   CP_6_C.:LIB_E04  is referenced.
   CP_6.:LIB_E04  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure Z9AT$BREAK.

   Procedure Z9AT$BREAK requires 22 words for executable code.
   Procedure Z9AT$BREAK is declared NOAUTO and requires 12 words of local(STATIC) storage.

    No errors detected in file Z9AT.:Z8A6TSI    .

PL6.E3A0      #002=Z9AT$BREAK File=Z9AT.:Z8A6TSI                                 SAT 08/09/97 13:42 Page:52   

 Object Unit name= Z9AT$BREAK                                 File name= Z9AT.:Z8A6TOU
 UTS= AUG 09 '97 13:42:11.96 SAT                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none    12     14  Z9AT$BREAK
    1   DCB   even  none     0      0  M$UC
    2   Proc  even  none    22     26  Z9AT$BREAK
    3  RoData even  none     1      1  Z9AT$BREAK

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes            yes     Async       0  Z9AT$BREAK

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       0 DUMP_STATS
                       nStd      0 X66_ASTATIC
                       nStd      0 X66_ASRET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     B$TCB$                                M$UC
PL6.E3A0      #002=Z9AT$BREAK File=Z9AT.:Z8A6TSI                                 SAT 08/09/97 13:42 Page:53   

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #002=Z9AT$BREAK File=Z9AT.:Z8A6TSI                                 SAT 08/09/97 13:42 Page:54   


      351        1        /*T***********************************************************/
      352        2        /*T*                                                         */
      353        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      354        4        /*T*                                                         */
      355        5        /*T***********************************************************/
      356        6        /*D*       NAME: Z9AT$BREAK
      357        7
      358        8                   CALL: Called by the system when the BREAK key is hit.
      359        9
      360       10              INTERFACE: DUMP_STATS -- Prints Phase#, RecNo, etc. to DO.
      361       11                         M$TRMPRG -- Resets BREAK count so we won't CNTRL-Y.
      362       12                         M$SENV -- Save environment.
      363       13                         M$RENV -- Restore environment.
      364       14
      365       15            DESCRIPTION: This routine prints the current state of the
      366       16                         compile (a la PL/6) whenever the BREAK key is hit.
      367       17
      368       18        */
      369       19
      370       20        Z9AT$BREAK: PROC ASYNC NOAUTO ;

     20  2 000000   000000 700200 xent  Z9AT$BREAK   TSX0  ! X66_ASTATIC
         2 000001   000000 000000 0                  ZERO    0,0

      371       21
      372       22    1        DCL B$TCB$ PTR SYMREF ;
      373       23    1        DCL B$EXCFR$ PTR ;
      374       24    1        DCL DUMP_STATS ENTRY ;
      375       25    1        DCL BREAK_IN_PROGRESS BIT (1) ALIGNED STATIC INIT ('0'B) ;
      376       26
      377       27        %INCLUDE CP_6;
      378     5587        %INCLUDE CP_6_SUBS;
      379     6127
      380     6128        %FPT_TRMPRG (RSTBRK = YES) ;
      381     6157
      382     6158    2          DO INHIBIT ;
PL6.E3A0      #002=Z9AT$BREAK File=Z9AT.:Z8A6TSI                                 SAT 08/09/97 13:42 Page:55   

      383     6159    2            IF BREAK_IN_PROGRESS THEN RETURN ;

   6159  2 000002   000002 234200 0                  SZN   ! BREAK_IN_PROGRESS
         2 000003   000005 605200 2                  TPL   ! s:6160

   6159  2 000004   000000 702200 xent               TSX2  ! X66_ASRET

      384     6160    2            BREAK_IN_PROGRESS = '1'B ;

   6160  2 000005   400000 236203                    LDQ   ! -131072,DU
         2 000006   000002 756200 0                  STQ   ! BREAK_IN_PROGRESS

      385     6161    2          END ;

      386     6162
      387     6163    1          CALL M$SENV ALTRET (SKIP_IF_SENV_ERROR) ;

   6163  2 000007   410011 713400                    CLIMB   alt,+4105
         2 000010   000000 401760                    pmme    nvectors=0
         2 000011   000023 702000 2                  TSX2    IGNORE_RENV_ERROR

      388     6164    1          CALL DUMP_STATS ;

   6164  2 000012   000000 631400 3                  EPPR1   0
         2 000013   000000 701000 xent               TSX1    DUMP_STATS
         2 000014   000000 011000                    NOP     0

      389     6165    1          CALL M$TRMPRG (FPT_TRMPRG) ;

   6165  2 000015   000004 630400 0                  EPPR0   FPT_TRMPRG
         2 000016   160004 713400                    CLIMB   57348
         2 000017   400400 401760                    pmme    nvectors=2

      390     6166    1          CALL M$RENV ALTRET (IGNORE_RENV_ERROR) ;

   6166  2 000020   410016 713400                    CLIMB   alt,+4110
PL6.E3A0      #002=Z9AT$BREAK File=Z9AT.:Z8A6TSI                                 SAT 08/09/97 13:42 Page:56   
         2 000021   000000 401760                    pmme    nvectors=0
         2 000022   000023 702000 2                  TSX2    IGNORE_RENV_ERROR

   6160  2 000023                       IGNORE_RENV* null
   6160  2 000023                       SKIP_IF_SEN* null
      391     6167    1   IGNORE_RENV_ERROR: ;
      392     6168    1   SKIP_IF_SENV_ERROR: ;
      393     6169
      394     6170    2          DO INHIBIT ;

      395     6171    2            BREAK_IN_PROGRESS = '0'B ;

   6171  2 000023   000002 450200 0                  STZ   ! BREAK_IN_PROGRESS

      396     6172    2            RETURN ;

   6172  2 000024   000000 702200 xent               TSX2  ! X66_ASRET

      397     6173    2          END ;

      398     6174
      399     6175    1   END Z9AT$BREAK ;

   6175  2 000025   000000 702200 xent               TSX2  ! X66_ASRET

PL6.E3A0      #002=Z9AT$BREAK File=Z9AT.:Z8A6TSI                                 SAT 08/09/97 13:42 Page:57   
--  Include file information  --

   CP_6_SUBS.:LIB_E04  is referenced.
   CP_6_C.:LIB_E04  is referenced.
   CP_6.:LIB_E04  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure Z9AT$BREAK.
PL6.E3A0      #002=Z9AT$BREAK File=Z9AT.:Z8A6TSI                                 SAT 08/09/97 13:42 Page:58   

 **** Variables and constants ****

  ****  Section 000  Data  Z9AT$BREAK

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     1-0-0/w PTR               1 B$EXCFR$                   2-0-0/w BIT         r     1 BREAK_IN_PROGRESS
     4-0-0/d STRC(288)   r     1 FPT_TRMPRG

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR               1 B$TCB$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0N  NULL        r     1 M$UC


   Procedure Z9AT$BREAK requires 22 words for executable code.
   Procedure Z9AT$BREAK is declared NOAUTO and requires 12 words of local(STATIC) storage.

    No errors detected in file Z9AT.:Z8A6TSI    .
