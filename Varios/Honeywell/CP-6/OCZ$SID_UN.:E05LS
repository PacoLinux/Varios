VERSION E05

PL6.E3A0      #001=OCZ$SID_UN File=OCZ$SID_UN.:E05TSI                            WED 07/30/97 04:09 Page:1    
        1        1        /*M* OCZ$SID_UN  routine to return a user# given a sysid */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* */
        8        8        /*F* NAME:  OCZ$SID_UN
        9        9             PURPOSE:  To obtain the user number of a user
       10       10                       given his sysid.
       11       11             DESCRIPTION:  The user table is searched linearly
       12       12                           until an entry with the correct sysid
       13       13                           and a non-null state is found.  The
       14       14                           index of that entry is the desired
       15       15                           user number.
       16       16                                                                 */
       17       17        /*D* NAME:  OCZ$SID_UN
       18       18             CALL:  CALL OCZ$SID_UN (SID, UN, CADDR,WSN) ALTRET (<label>);
       19       19
       20       20                      where
       21       21
       22       22                        SID SBIN HALF UNAL -- sysid
       23       23                        UN UBIN WORD  -- user number (returned)
       24       24                        CADDR BIT(18) UNAL -- console address (optional)
       25       25                        WSN CHAR(8) -- WSN OF CONSOLE (OPTIONAL) ' ' MEANS SYSTEM
       26       26
       27       27                      are the parameters.
       28       28             DESCRIPTION:  The user table (B$USRT$ -> B$USER(n))
       29       29                           is searched linearly from 0 to
       30       30                           S_MUAIS until a user entry with
       31       31                           B$USER.SYSID=SID and B$USER.US~=SS_SNULL
       32       32                           is found.  UN is then set to the index
       33       33                           of that entry and the caller is RETURNed
       34       34                           to.  If WSN is passed, it is checked against
       35       35                           the WSN-OF-ORIGON of the user and if it does
       36       36                           not match an error message is writen and the
       37       37                           ALTRET is taken.
PL6.E3A0      #001=OCZ$SID_UN File=OCZ$SID_UN.:E05TSI                            WED 07/30/97 04:09 Page:2    
       38       38                           If, however, such an entry is not found,
       39       39                           the ALTRETURN is taken.  In this case if CADDR
       40       40                           was passed, an error message is sent to the console.
       41       41                                                                    */
       42       42        OCZ$SID_UN: PROC (SID,UN,CADDR,WSN) ALTRET;
       43       43    1   DCL SID SBIN HALF UNAL;
       44       44    1   DCL UN UBIN WORD;
       45       45    1   DCL CADDR BIT(18) UNAL;
       46       46    1   DCL WSN CHAR(8);
       47       47    1   DCL I UBIN WORD;
       48       48    1   DCL WCNT UBIN WORD;
       49       49    1   DCL VWSN CHAR(WCNT) BASED;
       50       50    1   DCL B_MUAIS UBIN WORD SYMREF;
       51       51    1   DCL OCI$MK_WR ENTRY(7);
       52       52        %INCLUDE B$USER;
       53      268        %B$USERREFS;
       54      272        %INCLUDE SS_SCHED_C;
       55      505        %INCLUDE OC_SUBS_C;
       56     1236        /**/
       57     1237        /**/
       58     1238        /*
       59     1239                     Begin main
       60     1240                                       */
       61     1241    1           IF ADDR(WSN)=ADDR(NIL) THEN WCNT=0;
       62     1242    1           ELSE IF WSN=' ' THEN WCNT=0;
       63     1243    1              ELSE CALL INDEX (WCNT,'?',WSN);
       64     1244    2           DO I = 0 TO B_MUAIS;            /* FOR ALL USERS                      */
       65     1245    2              IF B$USRT$ -> B$USER.SYSID (I) = SID THEN
       66     1246    2                 IF B$USRT$ -> B$USER.US (I) ~= %SS_SNULL THEN
       67     1247    3                 DO;
       68     1248    3                    UN = I;
       69     1249    4                    IF ADDR(WSN)->VWSN~=ADDR(B$USRT$->B$USER.WOO(I))->VWSN THEN DO;
       70     1250    4                       I=NURU_MSG#;
       71     1251    4                       GOTO MOUT;
       72     1252    4                       END;
       73     1253    3                    RETURN;
       74     1254    3                    END;
PL6.E3A0      #001=OCZ$SID_UN File=OCZ$SID_UN.:E05TSI                            WED 07/30/97 04:09 Page:3    
       75     1255    2              END;
       76     1256    1           I=NSID_MSG#;
       77     1257    1   MOUT:   ;
       78     1258    1           IF ADDR(CADDR)~=ADDR(NIL) THEN CALL OCI$MK_WR (CADDR,I,1,'002'O,SID);
       79     1259    1           ALTRETURN;
       80     1260    1   END OCZ$SID_UN;
       81     1261        /**/
       82     1262        /**/
       83     1263        %EOD;

PL6.E3A0      #001=OCZ$SID_UN File=OCZ$SID_UN.:E05TSI                            WED 07/30/97 04:09 Page:4    
--  Include file information  --

   OC_SUBS_C.:E05TOU  is referenced.
   SS_SCHED_C.:E05TOU  is referenced.
   B$USER.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure OCZ$SID_UN.

   Procedure OCZ$SID_UN requires 78 words for executable code.
   Procedure OCZ$SID_UN requires 16 words of local(AUTO) storage.

PL6.E3A0      #001=OCZ$SID_UN File=OCZ$SID_UN.:E05TSI                            WED 07/30/97 04:09 Page:5    

 Object Unit name= OCZ$SID_UN                                 File name= OCZ$SID_UN.:E05TOU
 UTS= JUL 30 '97 04:09:13.80 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none    78    116  OCZ$SID_UN
    1  RoData even  none     4      4  OCZ$SID_UN

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes    yes     yes      Std        4  OCZ$SID_UN

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       7 OCI$MK_WR
                       nStd      0 X66_AUTO_4
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     B_MUAIS                               B$USRT$                               B_VECTNIL
PL6.E3A0      #001=OCZ$SID_UN File=OCZ$SID_UN.:E05TSI                            WED 07/30/97 04:09 Page:6    

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #001=OCZ$SID_UN File=OCZ$SID_UN.:E05TSI                            WED 07/30/97 04:09 Page:7    


        1        1        /*M* OCZ$SID_UN  routine to return a user# given a sysid */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* */
        8        8        /*F* NAME:  OCZ$SID_UN
        9        9             PURPOSE:  To obtain the user number of a user
       10       10                       given his sysid.
       11       11             DESCRIPTION:  The user table is searched linearly
       12       12                           until an entry with the correct sysid
       13       13                           and a non-null state is found.  The
       14       14                           index of that entry is the desired
       15       15                           user number.
       16       16                                                                 */
       17       17        /*D* NAME:  OCZ$SID_UN
       18       18             CALL:  CALL OCZ$SID_UN (SID, UN, CADDR,WSN) ALTRET (<label>);
       19       19
       20       20                      where
       21       21
       22       22                        SID SBIN HALF UNAL -- sysid
       23       23                        UN UBIN WORD  -- user number (returned)
       24       24                        CADDR BIT(18) UNAL -- console address (optional)
       25       25                        WSN CHAR(8) -- WSN OF CONSOLE (OPTIONAL) ' ' MEANS SYSTEM
       26       26
       27       27                      are the parameters.
       28       28             DESCRIPTION:  The user table (B$USRT$ -> B$USER(n))
       29       29                           is searched linearly from 0 to
       30       30                           S_MUAIS until a user entry with
       31       31                           B$USER.SYSID=SID and B$USER.US~=SS_SNULL
       32       32                           is found.  UN is then set to the index
       33       33                           of that entry and the caller is RETURNed
       34       34                           to.  If WSN is passed, it is checked against
       35       35                           the WSN-OF-ORIGON of the user and if it does
       36       36                           not match an error message is writen and the
PL6.E3A0      #001=OCZ$SID_UN File=OCZ$SID_UN.:E05TSI                            WED 07/30/97 04:09 Page:8    
       37       37                           ALTRET is taken.
       38       38                           If, however, such an entry is not found,
       39       39                           the ALTRETURN is taken.  In this case if CADDR
       40       40                           was passed, an error message is sent to the console.
       41       41                                                                    */
       42       42        OCZ$SID_UN: PROC (SID,UN,CADDR,WSN) ALTRET;

     42  0 000000   000000 700200 xent  OCZ$SID_UN   TSX0  ! X66_AUTO_4
         0 000001   000020 000004                    ZERO    16,4

       43       43    1   DCL SID SBIN HALF UNAL;
       44       44    1   DCL UN UBIN WORD;
       45       45    1   DCL CADDR BIT(18) UNAL;
       46       46    1   DCL WSN CHAR(8);
       47       47    1   DCL I UBIN WORD;
       48       48    1   DCL WCNT UBIN WORD;
       49       49    1   DCL VWSN CHAR(WCNT) BASED;
       50       50    1   DCL B_MUAIS UBIN WORD SYMREF;
       51       51    1   DCL OCI$MK_WR ENTRY(7);
       52       52        %INCLUDE B$USER;
       53      268        %B$USERREFS;
       54      272        %INCLUDE SS_SCHED_C;
       55      505        %INCLUDE OC_SUBS_C;
       56     1236        /**/
       57     1237        /**/
       58     1238        /*
       59     1239                     Begin main
       60     1240                                       */
       61     1241    1           IF ADDR(WSN)=ADDR(NIL) THEN WCNT=0;

   1241  0 000002   200006 236100                    LDQ     @WSN,,AUTO
         0 000003   000001 116000 xsym               CMPQ    B_VECTNIL+1
         0 000004   000007 601000 0                  TNZ     s:1242

   1241  0 000005   200010 450100                    STZ     WCNT,,AUTO
         0 000006   000022 710000 0                  TRA     s:1244

PL6.E3A0      #001=OCZ$SID_UN File=OCZ$SID_UN.:E05TSI                            WED 07/30/97 04:09 Page:9    
       62     1242    1           ELSE IF WSN=' ' THEN WCNT=0;

   1242  0 000007   200006 470500                    LDP0    @WSN,,AUTO
         0 000010   040000 106500                    CMPC    fill='040'O
         0 000011   000000 000010                    ADSC9   0,,PR0                   cn=0,n=8
         0 000012   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
         0 000013   000016 601000 0                  TNZ     s:1243

   1242  0 000014   200010 450100                    STZ     WCNT,,AUTO
         0 000015   000022 710000 0                  TRA     s:1244

       63     1243    1              ELSE CALL INDEX (WCNT,'?',WSN);

   1243  0 000016   000000 124500                    SCM     mask='000'O
         0 000017   000000 000010                    ADSC9   0,,PR0                   cn=0,n=8
         0 000020   000000 000001 1                  ADSC9   0                        cn=0,n=1
         0 000021   200010 000100                    ARG     WCNT,,AUTO

       64     1244    2           DO I = 0 TO B_MUAIS;            /* FOR ALL USERS                      */

   1244  0 000022   200007 450100                    STZ     I,,AUTO
         0 000023   000071 710000 0                  TRA     s:1255+3

       65     1245    2              IF B$USRT$ -> B$USER.SYSID (I) = SID THEN

   1245  0 000024   200003 470500                    LDP0    @SID,,AUTO
         0 000025   003100 060500                    CSL     bolr='003'O
         0 000026   000000 000022                    BDSC    0,,PR0                   by=0,bit=0,n=18
         0 000027   200012 000044                    BDSC    WCNT+2,,AUTO             by=0,bit=0,n=36
         0 000030   200012 236100                    LDQ     WCNT+2,,AUTO
         0 000031   000022 732000                    QRS     18
         0 000032   200013 756100                    STQ     WCNT+3,,AUTO
         0 000033   200007 235100                    LDA     I,,AUTO
         0 000034   000004 735000                    ALS     4
         0 000035   000000 471400 xsym               LDP1    B$USRT$
         0 000036   100014 236105                    LDQ     12,AL,PR1
         0 000037   777777 376007                    ANQ     -1,DL
PL6.E3A0      #001=OCZ$SID_UN File=OCZ$SID_UN.:E05TSI                            WED 07/30/97 04:09 Page:10   
         0 000040   200013 116100                    CMPQ    WCNT+3,,AUTO
         0 000041   000066 601000 0                  TNZ     s:1255

       66     1246    2                 IF B$USRT$ -> B$USER.US (I) ~= %SS_SNULL THEN

   1246  0 000042   100011 236105                    LDQ     9,AL,PR1
         0 000043   770000 376003                    ANQ     -4096,DU
         0 000044   300000 116003                    CMPQ    98304,DU
         0 000045   000066 600000 0                  TZE     s:1255

       67     1247    3                 DO;

       68     1248    3                    UN = I;

   1248  0 000046   200004 473500                    LDP3    @UN,,AUTO
         0 000047   200007 235100                    LDA     I,,AUTO
         0 000050   300000 755100                    STA     0,,PR3

       69     1249    4                    IF ADDR(WSN)->VWSN~=ADDR(B$USRT$->B$USER.WOO(I))->VWSN THEN DO;

   1249  0 000051   200007 236100                    LDQ     I,,AUTO
         0 000052   000006 736000                    QLS     6
         0 000053   200006 471500                    LDP1    @WSN,,AUTO
         0 000054   200010 720100                    LXL0    WCNT,,AUTO
         0 000055   000000 474400 xsym               LDP4    B$USRT$
         0 000056   040146 106540                    CMPC    fill='040'O
         0 000057   100000 000010                    ADSC9   0,,PR1                   cn=0,n=*X0
         0 000060   400012 000010                    ADSC9   10,Q,PR4                 cn=0,n=*X0
         0 000061   000065 600000 0                  TZE     s:1253

       70     1250    4                       I=NURU_MSG#;

   1250  0 000062   000043 235007                    LDA     35,DL
         0 000063   200007 755100                    STA     I,,AUTO

       71     1251    4                       GOTO MOUT;

PL6.E3A0      #001=OCZ$SID_UN File=OCZ$SID_UN.:E05TSI                            WED 07/30/97 04:09 Page:11   
   1251  0 000064   000076 710000 0                  TRA     MOUT

       72     1252    4                       END;
       73     1253    3                    RETURN;

   1253  0 000065   000000 702200 xent               TSX2  ! X66_ARET

       74     1254    3                    END;
       75     1255    2              END;

   1255  0 000066   200007 236100                    LDQ     I,,AUTO
         0 000067   000001 036007                    ADLQ    1,DL
         0 000070   200007 756100                    STQ     I,,AUTO
         0 000071   000000 236000 xsym               LDQ     B_MUAIS
         0 000072   200007 116100                    CMPQ    I,,AUTO
         0 000073   000024 603000 0                  TRC     s:1245

       76     1256    1           I=NSID_MSG#;

   1256  0 000074   000046 235007                    LDA     38,DL
         0 000075   200007 755100                    STA     I,,AUTO

   1256  0 000076                       MOUT         null
       77     1257    1   MOUT:   ;
       78     1258    1           IF ADDR(CADDR)~=ADDR(NIL) THEN CALL OCI$MK_WR (CADDR,I,1,'002'O,SID);

   1258  0 000076   200005 236100                    LDQ     @CADDR,,AUTO
         0 000077   000001 116000 xsym               CMPQ    B_VECTNIL+1
         0 000100   000115 600000 0                  TZE     s:1259

   1258  0 000101   200003 236100                    LDQ     @SID,,AUTO
         0 000102   200016 756100                    STQ     WCNT+6,,AUTO
         0 000103   000002 237000 1                  LDAQ    2
         0 000104   200014 757100                    STAQ    WCNT+4,,AUTO
         0 000105   200007 630500                    EPPR0   I,,AUTO
         0 000106   200013 450500                    STP0    WCNT+3,,AUTO
         0 000107   200005 236100                    LDQ     @CADDR,,AUTO
PL6.E3A0      #001=OCZ$SID_UN File=OCZ$SID_UN.:E05TSI                            WED 07/30/97 04:09 Page:12   
         0 000110   200012 756100                    STQ     WCNT+2,,AUTO
         0 000111   200012 630500                    EPPR0   WCNT+2,,AUTO
         0 000112   000023 631400 xsym               EPPR1   B_VECTNIL+19
         0 000113   000000 701000 xent               TSX1    OCI$MK_WR
         0 000114   000000 011000                    NOP     0

       79     1259    1           ALTRETURN;

   1259  0 000115   000000 702200 xent               TSX2  ! X66_AALT

(unnamed)
 Sect OctLoc
   1     000   077040 040040   002000 000000   000003 006000   000001 006000    ?   ............
       80     1260    1   END OCZ$SID_UN;
       81     1261        /**/
       82     1262        /**/
       83     1263        %EOD;

PL6.E3A0      #001=OCZ$SID_UN File=OCZ$SID_UN.:E05TSI                            WED 07/30/97 04:09 Page:13   
--  Include file information  --

   OC_SUBS_C.:E05TOU  is referenced.
   SS_SCHED_C.:E05TOU  is referenced.
   B$USER.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure OCZ$SID_UN.
PL6.E3A0      #001=OCZ$SID_UN File=OCZ$SID_UN.:E05TSI                            WED 07/30/97 04:09 Page:14   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     5-0-0/w PTR         r     1 @CADDR                     3-0-0/w PTR         r     1 @SID
     4-0-0/w PTR         r     1 @UN                        6-0-0/w PTR         r     1 @WSN
    *0-0-0/b BIT (18)    r     1 CADDR                      7-0-0/w UBIN        r     1 I
    *0-0-0/b SBIN(18)    r     1 SID                       *0-0-0/w UBIN        r     1 UN
    10-0-0/w UBIN        r     1 WCNT                      *0-0-0/c CHAR(8)     r     1 WSN

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$USRT$                    0-0-0/w UBIN        r     1 B_MUAIS

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(576)   r     1 B$USER(0:0)                0-0-0/c ACHR        r     1 VWSN


   Procedure OCZ$SID_UN requires 78 words for executable code.
   Procedure OCZ$SID_UN requires 16 words of local(AUTO) storage.
PL6.E3A0      #001=OCZ$SID_UN File=OCZ$SID_UN.:E05TSI                            WED 07/30/97 04:09 Page:15   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=OCZ$SID_UN File=OCZ$SID_UN.:E05TSI                            WED 07/30/97 04:09 Page:16   
          MINI XREF LISTING

B$DO.ECCINFO
       203**DCL       204--REDEF
B$U.MISC
       182**DCL       183--REDEF
B$USER.MISC
       258**DCL       259--REDEF
B$USER.SYSID
       253**DCL      1245>>IF
B$USER.US
       245**DCL      1246>>IF
B$USER.WOO
       251**DCL      1249--IF
B$USRT$
       270**DCL      1245>>IF       1246>>IF       1249>>IF
B_MUAIS
        50**DCL      1244>>DOINDEX
CADDR
        45**DCL        42--PROC     1258--IF       1258<>CALL
I
        47**DCL      1244<<DOINDEX  1245>>IF       1246>>IF       1248>>ASSIGN   1249>>IF       1250<<ASSIGN
      1256<<ASSIGN   1258<>CALL
MOUT
      1256**LABEL    1251--GOTO
OCI$MK_WR
        51**DCL-ENT  1258--CALL
SID
        43**DCL        42--PROC     1245>>IF       1258<>CALL
UN
        44**DCL        42--PROC     1248<<ASSIGN
VWSN
        49**DCL      1249>>IF       1249>>IF
WCNT
PL6.E3A0      #001=OCZ$SID_UN File=OCZ$SID_UN.:E05TSI                            WED 07/30/97 04:09 Page:17   
        48**DCL        49--IMP-SIZ  1241<<ASSIGN   1242<<ASSIGN   1243<<CALLBLT  1249>>IF       1249>>IF
WSN
        46**DCL        42--PROC     1241--IF       1242>>IF       1243>>CALLBLT  1249--IF

PL6.E3A0      #002=OCZ$DEV_DCT File=OCZ$SID_UN.:E05TSI                           WED 07/30/97 04:09 Page:18   
       84        1        /*T***********************************************************/
       85        2        /*T*                                                         */
       86        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       87        4        /*T*                                                         */
       88        5        /*T***********************************************************/
       89        6        /**/
       90        7        /**/
       91        8        OCZ$DEV_DCT: PROC (DEV,DCTX,CADDR) ALTRET;
       92        9        /**/
       93       10        /*F* NAME:        OCI$DEV_DCT
       94       11             PURPOSE:     To return the DCT index for the provided device, if one
       95       12                          exists.
       96       13             DESCRIPTION: Searches through the list of DCTs (local devices) for the
       97       14                          given device name.  If the device is not found, routine
       98       15                          optionally writes a console error message and ALTRETs.
       99       16                          If the device is a remote device, it will not be found.
      100       17        */
      101       18        /**/
      102       19        %INCLUDE NI_DATA_R;
      103      456        %INCLUDE OC_SUBS_C;
      104     1187        /**/
      105     1188        %NI$DCT (NAME=DCT,STCLASS="BASED(DCT$)");
      106     1236        /**/
      107     1237    1   DCL NK_MXLOCAL UBIN SYMREF;
      108     1238        /**/
      109     1239    1   DCL DEV CHAR(8);
      110     1240    1   DCL DCTX UBIN WORD;
      111     1241    1   DCL CADDR BIT(18) UNAL;
      112     1242        /**/
      113     1243    1   DCL DCT$ PTR;
      114     1244    1   DCL I UBIN WORD;
      115     1245        /**/
      116     1246    1   DCL OCI$MK_WR ENTRY(7);
      117     1247        /**/
      118     1248        /**/
      119     1249    2           DO I=1 TO NK_MXLOCAL;
      120     1250    2              DCT$=N$DCT$(I);
PL6.E3A0      #002=OCZ$DEV_DCT File=OCZ$SID_UN.:E05TSI                           WED 07/30/97 04:09 Page:19   
      121     1251    3              IF DCT$~=ADDR(NIL) THEN DO;
      122     1252    4                 IF DCT.DEVNM=DEV THEN DO;
      123     1253    4                    DCTX=I;
      124     1254    4                    RETURN;
      125     1255    4                    END;
      126     1256    3                 END;
      127     1257    2              END;
      128     1258    1   BDEV:   ;
      129     1259    1           IF ADDR(CADDR)~=ADDR(NIL) THEN CALL OCI$MK_WR (CADDR,NDEV_MSG#,1,'004'O,DEV)
              1259                    ;
      130     1260    1           ALTRETURN;
      131     1261        /**/
      132     1262    1   END;
      133     1263        /**/
      134     1264        /**/

PL6.E3A0      #002=OCZ$DEV_DCT File=OCZ$SID_UN.:E05TSI                           WED 07/30/97 04:09 Page:20   
--  Include file information  --

   OC_SUBS_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure OCZ$DEV_DCT.

   Procedure OCZ$DEV_DCT requires 42 words for executable code.
   Procedure OCZ$DEV_DCT requires 14 words of local(AUTO) storage.

    No errors detected in file OCZ$SID_UN.:E05TSI    .

PL6.E3A0      #002=OCZ$DEV_DCT File=OCZ$SID_UN.:E05TSI                           WED 07/30/97 04:09 Page:21   

 Object Unit name= OCZ$DEV_DCT                                File name= OCZ$SID_UN.:E05TOU
 UTS= JUL 30 '97 04:09:23.28 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none    42     52  OCZ$DEV_DCT
    1  RoData even  none     5      5  OCZ$DEV_DCT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes    yes     yes      Std        3  OCZ$DEV_DCT

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       7 OCI$MK_WR
                       nStd      0 X66_AUTO_3
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     N$DCT$$                               N$FQ$                                 NI$FQ$
     NI$IBUF$                              NI$RP$                                NK_MXLOCAL
     B_VECTNIL
PL6.E3A0      #002=OCZ$DEV_DCT File=OCZ$SID_UN.:E05TSI                           WED 07/30/97 04:09 Page:22   

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #002=OCZ$DEV_DCT File=OCZ$SID_UN.:E05TSI                           WED 07/30/97 04:09 Page:23   


       84        1        /*T***********************************************************/
       85        2        /*T*                                                         */
       86        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       87        4        /*T*                                                         */
       88        5        /*T***********************************************************/
       89        6        /**/
       90        7        /**/
       91        8        OCZ$DEV_DCT: PROC (DEV,DCTX,CADDR) ALTRET;

      8  0 000000   000000 700200 xent  OCZ$DEV_DCT  TSX0  ! X66_AUTO_3
         0 000001   000016 000003                    ZERO    14,3

       92        9        /**/
       93       10        /*F* NAME:        OCI$DEV_DCT
       94       11             PURPOSE:     To return the DCT index for the provided device, if one
       95       12                          exists.
       96       13             DESCRIPTION: Searches through the list of DCTs (local devices) for the
       97       14                          given device name.  If the device is not found, routine
       98       15                          optionally writes a console error message and ALTRETs.
       99       16                          If the device is a remote device, it will not be found.
      100       17        */
      101       18        /**/
      102       19        %INCLUDE NI_DATA_R;
      103      456        %INCLUDE OC_SUBS_C;
      104     1187        /**/
      105     1188        %NI$DCT (NAME=DCT,STCLASS="BASED(DCT$)");
      106     1236        /**/
      107     1237    1   DCL NK_MXLOCAL UBIN SYMREF;
      108     1238        /**/
      109     1239    1   DCL DEV CHAR(8);
      110     1240    1   DCL DCTX UBIN WORD;
      111     1241    1   DCL CADDR BIT(18) UNAL;
      112     1242        /**/
      113     1243    1   DCL DCT$ PTR;
      114     1244    1   DCL I UBIN WORD;
      115     1245        /**/
PL6.E3A0      #002=OCZ$DEV_DCT File=OCZ$SID_UN.:E05TSI                           WED 07/30/97 04:09 Page:24   
      116     1246    1   DCL OCI$MK_WR ENTRY(7);
      117     1247        /**/
      118     1248        /**/
      119     1249    2           DO I=1 TO NK_MXLOCAL;

   1249  0 000002   000001 235007                    LDA     1,DL
         0 000003   200007 755100                    STA     I,,AUTO
         0 000004   000030 710000 0                  TRA     s:1257+3

      120     1250    2              DCT$=N$DCT$(I);

   1250  0 000005   000000 470400 xsym               LDP0    N$DCT$$
         0 000006   200007 720100                    LXL0    I,,AUTO
         0 000007   000000 236110                    LDQ     0,X0,PR0
         0 000010   200006 756100                    STQ     DCT$,,AUTO

      121     1251    3              IF DCT$~=ADDR(NIL) THEN DO;

   1251  0 000011   000001 116000 xsym               CMPQ    B_VECTNIL+1
         0 000012   000025 600000 0                  TZE     s:1257

      122     1252    4                 IF DCT.DEVNM=DEV THEN DO;

   1252  0 000013   200006 471500                    LDP1    DCT$,,AUTO
         0 000014   200003 473500                    LDP3    @DEV,,AUTO
         0 000015   040100 106500                    CMPC    fill='040'O
         0 000016   100002 000010                    ADSC9   2,,PR1                   cn=0,n=8
         0 000017   300000 000010                    ADSC9   0,,PR3                   cn=0,n=8
         0 000020   000025 601000 0                  TNZ     s:1257

      123     1253    4                    DCTX=I;

   1253  0 000021   200004 474500                    LDP4    @DCTX,,AUTO
         0 000022   200007 235100                    LDA     I,,AUTO
         0 000023   400000 755100                    STA     0,,PR4

      124     1254    4                    RETURN;
PL6.E3A0      #002=OCZ$DEV_DCT File=OCZ$SID_UN.:E05TSI                           WED 07/30/97 04:09 Page:25   

   1254  0 000024   000000 702200 xent               TSX2  ! X66_ARET

      125     1255    4                    END;
      126     1256    3                 END;
      127     1257    2              END;

   1257  0 000025   200007 235100                    LDA     I,,AUTO
         0 000026   000001 035007                    ADLA    1,DL
         0 000027   200007 755100                    STA     I,,AUTO
         0 000030   000000 236000 xsym               LDQ     NK_MXLOCAL
         0 000031   200007 116100                    CMPQ    I,,AUTO
         0 000032   000005 603000 0                  TRC     s:1250

   1249  0 000033                       BDEV         null
      128     1258    1   BDEV:   ;
      129     1259    1          IF ADDR(CADDR)~=ADDR(NIL) THEN CALL OCI$MK_WR (CADDR,NDEV_MSG#,1,'004'O,DEV)
              1259                    ;

   1259  0 000033   200005 236100                    LDQ     @CADDR,,AUTO
         0 000034   000001 116000 xsym               CMPQ    B_VECTNIL+1
         0 000035   000051 600000 0                  TZE     s:1260

   1259  0 000036   200003 236100                    LDQ     @DEV,,AUTO
         0 000037   200014 756100                    STQ     I+5,,AUTO
         0 000040   000002 237000 1                  LDAQ    2
         0 000041   200012 757100                    STAQ    I+3,,AUTO
         0 000042   000004 236000 1                  LDQ     4
         0 000043   200005 235100                    LDA     @CADDR,,AUTO
         0 000044   200010 757100                    STAQ    I+1,,AUTO
         0 000045   200010 630500                    EPPR0   I+1,,AUTO
         0 000046   000023 631400 xsym               EPPR1   B_VECTNIL+19
         0 000047   000000 701000 xent               TSX1    OCI$MK_WR
         0 000050   000000 011000                    NOP     0

      130     1260    1           ALTRETURN;

PL6.E3A0      #002=OCZ$DEV_DCT File=OCZ$SID_UN.:E05TSI                           WED 07/30/97 04:09 Page:26   
   1260  0 000051   000000 702200 xent               TSX2  ! X66_AALT

(unnamed)
 Sect OctLoc
   1     000   000000 000047   004000 000000   000003 006000   000001 006000    ...'............
   1     004   000000 006000                                                    ....
      131     1261        /**/
      132     1262    1   END;
      133     1263        /**/
      134     1264        /**/

PL6.E3A0      #002=OCZ$DEV_DCT File=OCZ$SID_UN.:E05TSI                           WED 07/30/97 04:09 Page:27   
--  Include file information  --

   OC_SUBS_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure OCZ$DEV_DCT.
PL6.E3A0      #002=OCZ$DEV_DCT File=OCZ$SID_UN.:E05TSI                           WED 07/30/97 04:09 Page:28   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     5-0-0/w PTR         r     1 @CADDR                     4-0-0/w PTR         r     1 @DCTX
     3-0-0/w PTR         r     1 @DEV                      *0-0-0/b BIT (18)    r     1 CADDR
     6-0-0/w PTR         r     1 DCT$                      *0-0-0/w UBIN        r     1 DCTX
    *0-0-0/c CHAR(8)     r     1 DEV                        7-0-0/w UBIN        r     1 I

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 N$DCT$$                    0-0-0/w PTR         r     1 N$FQ$
     0-0-0/w PTR         r     1 NI$FQ$                     0-0-0/w PTR         r     1 NI$IBUF$
     0-0-0/w PTR         r     1 NI$RP$                     0-0-0/w UBIN        r     1 NK_MXLOCAL

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(1332)  r     1 DCT                        0-0-0/w PTR         r     1 N$DCT$(0:0)


   Procedure OCZ$DEV_DCT requires 42 words for executable code.
   Procedure OCZ$DEV_DCT requires 14 words of local(AUTO) storage.

    No errors detected in file OCZ$SID_UN.:E05TSI    .
PL6.E3A0      #002=OCZ$DEV_DCT File=OCZ$SID_UN.:E05TSI                           WED 07/30/97 04:09 Page:29   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=OCZ$DEV_DCT File=OCZ$SID_UN.:E05TSI                           WED 07/30/97 04:09 Page:30   
          MINI XREF LISTING

CADDR
      1241**DCL         8--PROC     1259--IF       1259<>CALL
DCT.DEVNM
      1197**DCL      1252>>IF
DCT.DP
      1217**DCL      1224--REDEF    1227--REDEF    1228--REDEF    1230--REDEF    1230--REDEF    1231--REDEF
      1232--REDEF    1232--REDEF
DCT.MPC.IOCHANX
      1225**DCL      1225--REDEF
DCT$
      1243**DCL      1197--IMP-PTR  1250<<ASSIGN   1251>>IF       1252>>IF
DCTX
      1240**DCL         8--PROC     1253<<ASSIGN
DEV
      1239**DCL         8--PROC     1252>>IF       1259<>CALL
I
      1244**DCL      1249<<DOINDEX  1250>>ASSIGN   1253>>ASSIGN
N$DCT$
       451**DCL      1250>>ASSIGN
N$DCT$$
       317**DCL       451--IMP-PTR  1250>>ASSIGN
N$FQ$
       317**DCL       452--IMP-PTR
N$REQ_INIT.BUFADDR
       336**DCL       337--REDEF     337--REDEF
N$REQ_INIT.DLA.DRELADDR
       328**DCL       328--REDEF
N$REQ_INIT.DVE.EOMCHAR
       365**DCL       366--REDEF
N$REQ_INIT.EAINFO
       359**DCL       359--REDEF
N$REQ_INIT.EAINFOX
PL6.E3A0      #002=OCZ$DEV_DCT File=OCZ$SID_UN.:E05TSI                           WED 07/30/97 04:09 Page:31   
       359**DCL       360--REDEF
N$REQ_INIT.EVNTINFO
       360**DCL       360--REDEF
N$REQ_INIT.STATUS
       341**DCL       347--REDEF
NI$FQ$
       377**DCL       453--IMP-PTR
NI$IBUF$
       377**DCL       453--IMP-PTR
NI$IMXMBX_INIT.PAGED_BASE
       387**DCL       388--REDEF     388--REDEF
NI$IMXMBX_INIT.SIZE
       389**DCL       389--REDEF
NI$REQ_INIT.DCW
       411**DCL       414--REDEF
NI$REQ_INIT.DCW.TALLY
       412**DCL       412--REDEF
NI$REQ_INIT.IDCW.EXTA
       414**DCL       414--REDEF
NI$REQ_INIT.PCW
       416**DCL       420--REDEF
NI$REQ_INIT.SEEK
       421**DCL       422--REDEF     423--REDEF
NI$RP$
       425**DCL       455--IMP-PTR
NI_MBX_INIT.DCW.CONTROL.AE
       447**DCL       447--REDEF
NI_MBX_INIT.LPW.CONTROL.AE
       443**DCL       443--REDEF
NK_MXLOCAL
      1237**DCL      1249>>DOINDEX
OCI$MK_WR
      1246**DCL-ENT  1259--CALL
