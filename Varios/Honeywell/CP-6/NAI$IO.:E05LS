VERSION E05

PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:1    
        1        1        /*M* NAI$IO - I/O Module for array processor */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7
        8        8        NAI$WRITE: PROC (FPTCODE);
        9        9
       10       10        /*F*    NAME:  NAI$WRITE
       11       11                CALL:  CALL NAI$WRITE(FPTCODE);
       12       12                DESCRIPTION:  This routine is called for M$WRITEs through a DCB opened
       13       13                              to an array processor.
       14       14        */
       15       15
       16       16    1   DCL FPTCODE UBIN;
       17       17
       18       18        %INCLUDE F_FPTCODE_C;
       19       54        %INCLUDE F_FMTCODE_C;
       20       88        %INCLUDE F$CP6V_C;
       21      314        %INCLUDE F$DCB;
       22      363        %INCLUDE NI_DATA_R ;
       23      800        %INCLUDE NI_DEVCMD_C;
       24      983        %INCLUDE NI_DATA_C;
       25     1096        %INCLUDE N_FC_C;
       26     1133        %INCLUDE B$JIT;
       27     1736        %INCLUDE B_ERRORS_C;
       28     2863        %INCLUDE HF_DATA_R;
       29     2906
       30     2907    1   DCL FMF$TYC ENTRY(2);
       31     2908    1   DCL HFF$DSIZ ENTRY(2) ALTRET;
       32     2909    1   DCL HFF$WRITE1 ENTRY(1) ALTRET;
       33     2910    1   DCL NIM$CVTPTR ENTRY(3);
       34     2911    1   DCL NIO$QUE ENTRY(1) ALTRET;
       35     2912    1   DCL NIQ$GET ENTRY(1) ALTRET;
       36     2913    1   DCL NIQ$REL ENTRY(1);
       37     2914    1   DCL NIQ$GETS ENTRY(1) ALTRET;
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:2    
       38     2915    1   DCL UDB$PMMEXIT ENTRY;
       39     2916
       40     2917    1   DCL I UBIN;
       41     2918    1   DCL IOQ$ PTR;
       42     2919    1   DCL IOS$ PTR;
       43     2920    1   DCL DCT$ PTR;
       44     2921    1   DCL DCB$ PTR;
       45     2922    1   DCL IDCW$ PTR;
       46     2923    1   DCL MBX$ PTR;
       47     2924    1   DCL DCWX SBIN;
       48     2925    1   DCL DCWXWRAP SBIN;
       49     2926    1   DCL HCSRADDR UBIN;
       50     2927    1   DCL BUFADDR UBIN;
       51     2928    1   DCL PTP UBIN;
       52     2929    1   DCL 1 IDCW ALIGNED,
       53     2930    1         2 DC UBIN(6) UNAL,
       54     2931    1         2 DVN UBIN(6) UNAL,
       55     2932    1         2 EXTA UBIN(6) UNAL,
       56     2933    1         2 SVN UBIN(3) UNAL,
       57     2934    1         2 EC BIT(1),
       58     2935    1         2 CONT BIT(1),
       59     2936    1         2 SPLIT BIT(1),
       60     2937    1         2 DD# UBIN(12) UNAL;
       61     2938    1   DCL 1 TDCW ALIGNED,
       62     2939    1         2 WA UBIN(18) UNAL,
       63     2940    1         2 * UBIN(18) UNAL;
       64     2941    1   DCL 1 HCSR ALIGNED,
       65     2942    1         2 HCSRU,
       66     2943    1           3 * BIT(4),
       67     2944    1           3 CNTRL,
       68     2945    1             4 UNEXCC BIT(1),
       69     2946    1             4 UNEXHW BIT(1),
       70     2947    1           3 CMD UBIN(6) UNAL,
       71     2948    1           3 * BIT(8),
       72     2949    1           3 HIL BIT(8),
       73     2950    1           3 HIE BIT(8),
       74     2951    1         2 HCSR1,
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:3    
       75     2952    1           3 CHAN UBIN WORD;
       76     2953
       77     2954        %N$REQ (NAME=N$REQ,STCLASS="BASED(IOQ$)");
       78     3012        %NI$REQ (NAME=NI$REQ,STCLASS="BASED(IOS$)");
       79     3037        %NI$IMXMBX (NAME=NI$IMXMBX,STCLASS="BASED(MBX$)");
       80     3058        %NI$DCT (NAME=NI$DCT,STCLASS="BASED(DCT$)");
       81     3106    1   DCL 1 IDCWB ALIGNED BASED(IDCW$),
       82     3107    1         2 DC UBIN(6) UNAL,
       83     3108    1         2 DVN UBIN(6) UNAL,
       84     3109    1         2 EXTA UBIN(6) UNAL,
       85     3110    1         2 SVN UBIN(3) UNAL,
       86     3111    1         2 EC BIT(1),
       87     3112    1         2 CONT BIT(1),
       88     3113    1         2 SPLIT BIT(1),
       89     3114    1         2 DD# UBIN(12) UNAL;
       90     3115
       91     3116    1   DCL B$PS0$ PTR SYMREF READONLY;
       92     3117    1   DCL V$ REDEF B$PS0$ PTR;
       93     3118    1   DCL B$PS1$ PTR SYMREF READONLY;
       94     3119    1   DCL KEY$ REDEF B$PS1$ PTR;
       95     3120    1   DCL B$PS2$ PTR SYMREF READONLY;
       96     3121    1   DCL BUF$ REDEF B$PS2$ PTR;
       97     3122    1   DCL B$LOWMEM$ PTR SYMREF READONLY;
       98     3123    1   DCL B$JIT$ PTR SYMREF READONLY;
       99     3124
      100     3125    1   DCL 1 PKEY CALIGNED BASED(KEY$),
      101     3126    1         2 DC UBIN BYTE CALIGNED,
      102     3127    1         2 DD UBIN BYTE CALIGNED;
      103     3128
      104     3129    1   DCL 1 KEY CALIGNED,
      105     3130    1         2 DC UBIN BYTE CALIGNED,
      106     3131    1         2 DD UBIN BYTE CALIGNED;
      107     3132    1   DCL CHAR8 CHAR(8) BASED;
      108     3133    1   DCL CHAR8B BIT(72) CALIGNED BASED;
      109     3134
      110     3135        %FPT$WRITE_V (FPTN=WRITEV,BASED="BASED(V$)");
      111     3141
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:4    
      112     3142        %SUB F$DCB=DCB$->F$DCB;
      113     3143
      114     3144    1           DCB$=B$JIT.DCB$;
      115     3145    1           DCT$=N$DCT$(F$DCB.SETX);
      116     3146    2           IF FPTCODE~=FPTWRITE THEN DO;
      117     3147    2              CALL SETERR(%E$READ,2);
      118     3148        /*E*       ERROR:   NAI-E$READ-E
      119     3149                   MESSAGE: Only M$WRITE is allowed for a DCB opened to an array processor.
      120     3150        */
      121     3151    2              END;
      122     3152
      123     3153    1           CALL HFF$DSIZ(KEY$,I);
      124     3154    2           IF I~=SIZEC(KEY) THEN DO;
      125     3155    2              CALL SETERR(%E$BADKEY,2);
      126     3156        /*E*       ERROR:  NAI-E$BADKEY-E
      127     3157                   MESSAGE: Incorrect key length for M$WRITE to array processor.
      128     3158        */
      129     3159    2              END;
      130     3160    1           KEY=PKEY;
      131     3161
      132     3162    2           IF F$DCB.UBYTES>0 THEN DO;
      133     3163    2              CALL NIM$CVTPTR(F$DCB.UB$,BUFADDR,PTP);
      134     3164    2              END;
      135     3165    2           ELSE DO;
      136     3166    2              BUFADDR=0;
      137     3167    2              PTP=0;
      138     3168    2              END;
      139     3169
      140     3170    2           DO CASE(KEY.DC);
      141     3171    2            CASE(%AP_RDHCSR,%AP_RDDATA,%AP_SNSHISP,%AP_SNSERMSK);
      142     3172    3              CALL HFF$WRITE1(F$DCB.UB$) WHENALTRETURN DO;
      143     3173    3                 F$DCB.UBYTES=1;                              /* CAUSE E$MTRAP */
      144     3174    3                 END;
      145     3175    2              IF F$DCB.UBYTES=0 THEN F$DCB.UBYTES=1;
      146     3176    2            CASE(%AP_WRHCSR,%AP_WRDATA);
      147     3177    2              IF F$DCB.UBYTES=0 THEN F$DCB.UBYTES=1;
      148     3178    2            END;
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:5    
      149     3179
      150     3180    2           IF MOD(F$DCB.UBYTES,4)~=0 OR MOD(BUFADDR,4)~=0 THEN DO;
      151     3181    2              CALL SETERR(%E$MTRAP,2);
      152     3182        /*E*       ERROR:  NAI-E$MTRAP-E
      153     3183                   MESSAGE:  Incorrect buffer access or alignment.
      154     3184        */
      155     3185    2              END;
      156     3186
      157     3187    2           IF WRITEV.DVBYTE.CONT AND NOT F$DCB.CONT THEN DO;
      158     3188    3              IF KEY.DC~=%AP_WRHCSR THEN DO;
      159     3189    3                 CALL SETERR(%E$KEYORDER,2);
      160     3190        /*E*          ERROR:  NAI-E$KEYORDER-E
      161     3191                      MESSAGE:  The first in a string of continued M$WRITES to an array
      162     3192                                processor must be a WRITE HCSR.
      163     3193        */
      164     3194    3                 END;
      165     3195    3              IF F$DCB.UBYTES~=8 THEN DO;
      166     3196    3                 CALL SETERR(%E$LD,2);
      167     3197        /*E*          ERROR:  NAI-E$LD-E
      168     3198                      MESSAGE: The buffer for a WRITE HCSR command to an array processor
      169     3199                               must be exactly two words long.
      170     3200        */
      171     3201    3                 END;
      172     3202
      173     3203    2              F$DCB.PASS=F$DCB.UB$->CHAR8;
      174     3204    2              NI$DCT.AP.CONT.DC=KEY.DC;
      175     3205    2              NI$DCT.AP.CONT.DD=KEY.DD;
      176     3206    2              F$DCB.CONT='1'B;
      177     3207    2              F$DCB.TDSTAT='0'B;
      178     3208    2              RETURN;
      179     3209    2              END;
      180     3210
      181     3211    1           F$DCB.WAIT=BITBIN(WRITEV.WAIT | WRITEV.DVBYTE.CONT);
      182     3212    1           CALL GETQ;
      183     3213
      184     3214    2           IF NI$DCT.AP.CONT THEN DO;
      185     3215    2              DCWXWRAP=6;
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:6    
      186     3216    2              HCSR=ADDR(F$DCB.PASS)->CHAR8B;
      187     3217    2              NI$REQ.DCW(6)=HCSR.HCSRU;
      188     3218    2              NI$REQ.DCW(7)=HCSR.HCSR1;
      189     3219    2              HCSRADDR=POFFW(ADDR(NI$REQ.DCW(6)),B$LOWMEM$);
      190     3220    2              IDCW.DC=NI$DCT.AP.CONT.DC;
      191     3221    2              IDCW.DD#=NI$DCT.AP.CONT.DD;
      192     3222    2              CALL STOREDCW(IDCW);
      193     3223    2              CALL BLDDCW(HCSRADDR,2);
      194     3224    3              IF F$DCB.UBYTES~=0 THEN DO;
      195     3225    3                 TDCW='000000020001'O;
      196     3226    3                 TDCW.WA=POFFW(ADDR(NI$REQ.DCW(DCWX+1)),B$LOWMEM$);
      197     3227    3                 CALL STOREDCW(TDCW);
      198     3228    3                 END;
      199     3229    2              NI$DCT.AP.CONT='0'B;
      200     3230    2              END;
      201     3231    2           ELSE DO;
      202     3232    2              N$REQ.IOFLG.LPW23='1'B;
      203     3233    2              END;
      204     3234
      205     3235    1           IDCW.DC=KEY.DC;
      206     3236    1           IDCW.DD#=KEY.DD;
      207     3237    1           IDCW.SPLIT=WRITEV.DVBYTE.CONT;
      208     3238    1           CALL STOREDCW(IDCW);
      209     3239    1           IF F$DCB.UBYTES~=0 THEN
      210     3240    1              CALL BLDDCW(BUFADDR/4,F$DCB.UBYTES/4);
      211     3241    1           F$DCB.CONT=WRITEV.DVBYTE.CONT;
      212     3242    1           CALL NIO$QUE(N$REQ);
      213     3243    2           IF F$DCB.TYC.EGV(1) THEN DO;
      214     3244    2              CALL FMF$TYC(F$DCB.TYC(1),B$JIT.ERR);
      215     3245    2              CALL UDB$PMMEXIT;
      216     3246    2              END;
      217     3247    1           RETURN;
      218     3248
      219     3249    1   NAI$INIT: ENTRY;
      220     3250
      221     3251        /*F*    NAME:  NAI$INIT
      222     3252                CALL:  CALL NAI$INIT
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:7    
      223     3253                DESCRIPTION:  This routine is called when an array processor is opened
      224     3254                              to stop any left over processing and create an unprivleged
      225     3255                              user.
      226     3256        */
      227     3257
      228     3258    1           DCB$=B$JIT.DCB$;
      229     3259    1           F$DCB.WAIT=1;
      230     3260    1           CALL GETQ;
      231     3261    1           NI$DCT.AP.CONT='0'B;
      232     3262    1           DCWXWRAP=6;
      233     3263    1           N$REQ.DLA.DCTX=NI$DCT.AP.CDCTX;
      234     3264    1           HCSR='0'B;
      235     3265    1           HCSR.HCSRU.CNTRL.UNEXHW='1'B;
      236     3266    1           HCSR.HCSRU.CMD=%AP_HISP_SPRVUSR;
      237     3267    1           HCSR.HCSR1.CHAN=NI$DCT.AP.CHAN;
      238     3268    1           NI$REQ.DCW(6)=HCSR.HCSRU;
      239     3269    1           NI$REQ.DCW(7)=HCSR.HCSR1;
      240     3270    1           HCSRADDR=POFFW(ADDR(NI$REQ.DCW(6)),B$LOWMEM$);
      241     3271    1           IDCW.DC=%AP_TERMINATE;
      242     3272    1           CALL STOREDCW(IDCW);
      243     3273    1           CALL BLDDCW(HCSRADDR+1,1);
      244     3274    1           IDCW.DC=%AP_WRHCSR;
      245     3275    1           CALL STOREDCW(IDCW);
      246     3276    1           CALL BLDDCW(HCSRADDR,2);
      247     3277    1           IDCW.DC=%AP_RDHCSR;
      248     3278    1           CALL STOREDCW(IDCW);
      249     3279    1           CALL BLDDCW(HCSRADDR,2);
      250     3280    1           CALL NIO$QUE(N$REQ);
      251     3281    1           IF F$DCB.TYC.EGV(1) THEN
      252     3282    1              CALL FMF$TYC(F$DCB.TYC(1),B$JIT.ERR);
      253     3283    1           RETURN;
      254     3284
      255     3285    1   NAI$RESET: ENTRY;
      256     3286
      257     3287        /*F*    NAME:  NAI$RESET
      258     3288                CALL:  CALL NAI$RESET;
      259     3289                DESCRIPTION:  This routine is called when a DCB opened to an array processor
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:8    
      260     3290                              is closed.  It terminates any ongoing I/O.
      261     3291        */
      262     3292
      263     3293    1           DCB$=B$JIT.DCB$;
      264     3294    1           F$DCB.WAIT=1;
      265     3295    1           CALL GETQ;
      266     3296    1           NI$DCT.AP.CONT='0'B;
      267     3297    1           DCWXWRAP=5;
      268     3298    1           N$REQ.DLA.DCTX=NI$DCT.AP.CDCTX;
      269     3299    1           NI$REQ.DCW(5)=BINBIT(NI$DCT.AP.CHAN,36);
      270     3300    1           HCSRADDR=POFFW(ADDR(NI$REQ.DCW(5)),B$LOWMEM$);
      271     3301    1           IDCW.DC=%AP_TERMINATE;
      272     3302    1           CALL STOREDCW(IDCW);
      273     3303    1           CALL BLDDCW(HCSRADDR,1);
      274     3304    1           CALL NIO$QUE(N$REQ);
      275     3305    1           IF F$DCB.TYC.EGV(1) THEN
      276     3306    1              CALL FMF$TYC(F$DCB.TYC(1),B$JIT.ERR);
      277     3307    1           RETURN;
      278     3308
      279     3309    1   GETQ: PROC;
      280     3310
      281     3311    2           CALL NIQ$GET(IOQ$);
      282     3312    2           N$REQ.DLA.DCTX=F$DCB.SETX;
      283     3313    2           N$REQ.FC=%N_DCWLIST;
      284     3314    2           N$REQ.OPFLG=%(OP_USER|OP_CLR);
      285     3315    2           N$REQ.OPFLG.WAIT=BINBIT(F$DCB.WAIT,1);
      286     3316    2           N$REQ.NWIO=F$DCB.WAIT;
      287     3317    2           N$REQ.DCB$=DCB$;
      288     3318    2           N$REQ.COMP=%COMP_TD;
      289     3319    2           DCT$=N$DCT$(N$REQ.DLA.DCTX);
      290     3320    3           IF NOT N$REQ.IOFLG.IOS THEN DO;
      291     3321    3              CALL NIQ$GETS(IOS$);
      292     3322    3              N$REQ.IOS$=IOS$;
      293     3323    3              N$REQ.IOFLG.IOS='1'B;
      294     3324    3              END;
      295     3325    3           ELSE DO;
      296     3326    3              IOS$=N$REQ.IOS$;
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:9    
      297     3327    3              NI$REQ=NI$REQ_INIT;
      298     3328        /*N* ADD THIS CODE IF ARRAY PROCESSOR IS SUPPORTED ON THE IMX
      299     3329                   IF HW_IMX THEN DO;
      300     3330                      MBX$=PINCRW(IOS$,%IMX_MBX_OFFSET);
      301     3331                      NI$IMXMBX=NI$IMXMBX_INIT;
      302     3332                      END;
      303     3333        */
      304     3334    3              END;
      305     3335    3           IF F$DCB.UBYTES~=0 THEN DO;
      306     3336    3              N$REQ.BUFADDR=BUFADDR;
      307     3337        /*N* PTP IS MOD 1, NOT MOD 64, FOR RPM - NEED TO CHANGE THIS  */
      308     3338    3              N$REQ.PTP=PTP;
      309     3339        /*N* ADD THIS CODE IF ARRAY PROCESSOR IS SUPPORTED ON THE IMX
      310     3340                   IF NOT HW_IMX THEN
      311     3341        */
      312     3342    3                 NI$REQ.PCW.PTP=PTP;
      313     3343    3              END;
      314     3344    2           IDCW$=ADDR(NIL);
      315     3345    2           DCWX=0;
      316     3346    2           DCWXWRAP=SIZEW(NI$REQ.DCW);
      317     3347    2           IDCW='0001007'O;
      318     3348    2           IDCW.DC=%AP_NOP;
      319     3349    2           CALL STOREDCW(IDCW);
      320     3350    2           RETURN;
      321     3351
      322     3352    2   END GETQ;
      323     3353
      324     3354    1   STOREDCW: PROC(DCW);
      325     3355
      326     3356    2   DCL DCW BIT(36) ALIGNED;
      327     3357    2   DCL SAVEDCW BIT(36) ALIGNED;
      328     3358    2   DCL IOS1$ PTR;
      329     3359    2   DCL IOS2$ PTR;
      330     3360    2   DCL 1 IOS2 REDEF IOS2$,
      331     3361    2         2 WA UBIN(18) UNAL,
      332     3362    2         2 * BIT(18);
      333     3363    2   DCL X SBIN;
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:10   
      334     3364
      335     3365    3           IF DCWX=DCWXWRAP THEN DO;
      336     3366    3              X=DCWX-1;
      337     3367    3              SAVEDCW=NI$REQ.DCW(X);
      338     3368    3              CALL NIQ$GETS(IOS1$);
      339     3369    3              NI$REQ.FL$=IOS1$;
      340     3370    3              IOS2$=ADDR(IOS1$->NI$REQ.DCW);
      341     3371    3              NI$REQ.DCW(X)='000000020000'O;
      342     3372    3              NI$REQ.DCW.FWA(X)=IOS2.WA;
      343     3373    3              IF IDCW$=ADDR(NI$REQ.DCW(X)) THEN
      344     3374    3                 IDCW$=IOS2$;
      345     3375    3              IOS$=IOS1$;
      346     3376    3              NI$REQ.DCW(0)=SAVEDCW;
      347     3377    3              DCWX=1;
      348     3378    3              DCWXWRAP=SIZEW(NI$REQ.DCW);
      349     3379    3              END;
      350     3380    2           NI$REQ.DCW(DCWX)=DCW;
      351     3381    3           IF NI$REQ.IDCW.SVN(DCWX)=7 THEN DO;
      352     3382    3              IF IDCW$~=ADDR(NIL) THEN
      353     3383    3                 IDCWB.CONT='1'B;
      354     3384    3              IDCW$=ADDR(NI$REQ.DCW(DCWX));
      355     3385    3              END;
      356     3386    2           DCWX=DCWX+1;
      357     3387    2           RETURN;
      358     3388
      359     3389    2   END STOREDCW;
      360     3390
      361     3391    1   BLDDCW: PROC(F,S);
      362     3392
      363     3393    2   DCL F UBIN;
      364     3394    2   DCL S UBIN;
      365     3395    2   DCL FWA UBIN;
      366     3396    2   DCL SIZE SBIN;
      367     3397    2   DCL 1 DCW ALIGNED,
      368     3398    2         2 FWA UBIN(18) UNAL,
      369     3399    2         2 ICP UBIN(4) UNAL,
      370     3400    2         2 TYPE UBIN(2) UNAL,
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:11   
      371     3401    2         2 TALLY UBIN(12) UNAL;
      372     3402
      373     3403    2           FWA=F;
      374     3404    2           SIZE=S;
      375     3405    3           DO WHILE(SIZE>0);
      376     3406    4              IF SIZE<=4096 THEN DO;
      377     3407    4                 DCW='0'B;
      378     3408    4                 DCW.TALLY=SIZE;
      379     3409    4                 END;
      380     3410    4              ELSE DO;
      381     3411    4                 DCW='000000010000'O;
      382     3412    4                 END;
      383     3413    3              DCW.FWA=FWA;
      384     3414    3              CALL STOREDCW(DCW);
      385     3415    3              FWA=FWA+4096;
      386     3416    3              SIZE=SIZE-4096;
      387     3417    3              END;
      388     3418    2           RETURN;
      389     3419
      390     3420    2   END BLDDCW;
      391     3421
      392     3422    1   SETERR: PROC(CODE,SEV);
      393     3423
      394     3424    2   DCL CODE UBIN;
      395     3425    2   DCL SEV UBIN;
      396     3426
      397     3427    2           B$JIT.ERR='160111400000'O;
      398     3428    2           B$JIT.ERR.CODE=CODE;
      399     3429    2           B$JIT.ERR.SEV=SEV;
      400     3430    2           CALL UDB$PMMEXIT;
      401     3431
      402     3432    2   END SETERR;
      403     3433
      404     3434    1   END NAI$WRITE ;

PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:12   
--  Include file information  --

   HF_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   N_FC_C.:E05TOU  is referenced.
   NI_DATA_C.:E05TOU  is referenced.
   NI_DEVCMD_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   F$CP6V_C.:E05TOU  is referenced.
   F_FMTCODE_C.:E05TOU  is referenced.
   F_FPTCODE_C.:E05TOU  is referenced.
      No diagnostics issued in procedure NAI$WRITE.

   Procedure NAI$WRITE requires 666 words for executable code.
   Procedure NAI$WRITE requires 40 words of local(AUTO) storage.

    No errors detected in file NAI$IO.:E05TSI    .

PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:13   

 Object Unit name= NAI$WRITE                                  File name= NAI$IO.:E05TOU
 UTS= JUL 30 '97 03:25:47.76 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  RoData even  UTS      5      5  NAI$WRITE
    1   Proc  even  none   666   1232  NAI$WRITE
    2  RoData even  none    12     14  NAI$WRITE

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes            yes      Std        1  NAI$WRITE
     1    442                  yes      Std        0  NAI$INIT
     1    606                  yes      Std        0  NAI$RESET

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       2 HFF$DSIZ
 yes     yes           Std       1 HFF$WRITE1
 yes     yes           Std       1 NIO$QUE
         yes           Std       3 NIM$CVTPTR
         yes           Std       2 FMF$TYC
         yes           Std       0 UDB$PMMEXIT
 yes     yes           Std       1 NIQ$GET
 yes     yes           Std       1 NIQ$GETS
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:14   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     N$DCT$$                               N$FQ$                                 NI$FQ$
     NI$IBUF$                         r    NI$REQ_INIT                           NI$RP$
r    B$PS0$                           r    B$PS1$                           r    B$PS2$
r    B$LOWMEM$                        r    B$JIT$                                B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:15   


        1        1        /*M* NAI$IO - I/O Module for array processor */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7
        8        8        NAI$WRITE: PROC (FPTCODE);

      8  1 000000   000000 700200 xent  NAI$WRITE    TSX0  ! X66_AUTO_1
         1 000001   000050 000001                    ZERO    40,1

        9        9
       10       10        /*F*    NAME:  NAI$WRITE
       11       11                CALL:  CALL NAI$WRITE(FPTCODE);
       12       12                DESCRIPTION:  This routine is called for M$WRITEs through a DCB opened
       13       13                              to an array processor.
       14       14        */
       15       15
       16       16    1   DCL FPTCODE UBIN;
       17       17
       18       18        %INCLUDE F_FPTCODE_C;
       19       54        %INCLUDE F_FMTCODE_C;
       20       88        %INCLUDE F$CP6V_C;
       21      314        %INCLUDE F$DCB;
       22      363        %INCLUDE NI_DATA_R ;
       23      800        %INCLUDE NI_DEVCMD_C;
       24      983        %INCLUDE NI_DATA_C;
       25     1096        %INCLUDE N_FC_C;
       26     1133        %INCLUDE B$JIT;
       27     1736        %INCLUDE B_ERRORS_C;
       28     2863        %INCLUDE HF_DATA_R;
       29     2906
       30     2907    1   DCL FMF$TYC ENTRY(2);
       31     2908    1   DCL HFF$DSIZ ENTRY(2) ALTRET;
       32     2909    1   DCL HFF$WRITE1 ENTRY(1) ALTRET;
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:16   
       33     2910    1   DCL NIM$CVTPTR ENTRY(3);
       34     2911    1   DCL NIO$QUE ENTRY(1) ALTRET;
       35     2912    1   DCL NIQ$GET ENTRY(1) ALTRET;
       36     2913    1   DCL NIQ$REL ENTRY(1);
       37     2914    1   DCL NIQ$GETS ENTRY(1) ALTRET;
       38     2915    1   DCL UDB$PMMEXIT ENTRY;
       39     2916
       40     2917    1   DCL I UBIN;
       41     2918    1   DCL IOQ$ PTR;
       42     2919    1   DCL IOS$ PTR;
       43     2920    1   DCL DCT$ PTR;
       44     2921    1   DCL DCB$ PTR;
       45     2922    1   DCL IDCW$ PTR;
       46     2923    1   DCL MBX$ PTR;
       47     2924    1   DCL DCWX SBIN;
       48     2925    1   DCL DCWXWRAP SBIN;
       49     2926    1   DCL HCSRADDR UBIN;
       50     2927    1   DCL BUFADDR UBIN;
       51     2928    1   DCL PTP UBIN;
       52     2929    1   DCL 1 IDCW ALIGNED,
       53     2930    1         2 DC UBIN(6) UNAL,
       54     2931    1         2 DVN UBIN(6) UNAL,
       55     2932    1         2 EXTA UBIN(6) UNAL,
       56     2933    1         2 SVN UBIN(3) UNAL,
       57     2934    1         2 EC BIT(1),
       58     2935    1         2 CONT BIT(1),
       59     2936    1         2 SPLIT BIT(1),
       60     2937    1         2 DD# UBIN(12) UNAL;
       61     2938    1   DCL 1 TDCW ALIGNED,
       62     2939    1         2 WA UBIN(18) UNAL,
       63     2940    1         2 * UBIN(18) UNAL;
       64     2941    1   DCL 1 HCSR ALIGNED,
       65     2942    1         2 HCSRU,
       66     2943    1           3 * BIT(4),
       67     2944    1           3 CNTRL,
       68     2945    1             4 UNEXCC BIT(1),
       69     2946    1             4 UNEXHW BIT(1),
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:17   
       70     2947    1           3 CMD UBIN(6) UNAL,
       71     2948    1           3 * BIT(8),
       72     2949    1           3 HIL BIT(8),
       73     2950    1           3 HIE BIT(8),
       74     2951    1         2 HCSR1,
       75     2952    1           3 CHAN UBIN WORD;
       76     2953
       77     2954        %N$REQ (NAME=N$REQ,STCLASS="BASED(IOQ$)");
       78     3012        %NI$REQ (NAME=NI$REQ,STCLASS="BASED(IOS$)");
       79     3037        %NI$IMXMBX (NAME=NI$IMXMBX,STCLASS="BASED(MBX$)");
       80     3058        %NI$DCT (NAME=NI$DCT,STCLASS="BASED(DCT$)");
       81     3106    1   DCL 1 IDCWB ALIGNED BASED(IDCW$),
       82     3107    1         2 DC UBIN(6) UNAL,
       83     3108    1         2 DVN UBIN(6) UNAL,
       84     3109    1         2 EXTA UBIN(6) UNAL,
       85     3110    1         2 SVN UBIN(3) UNAL,
       86     3111    1         2 EC BIT(1),
       87     3112    1         2 CONT BIT(1),
       88     3113    1         2 SPLIT BIT(1),
       89     3114    1         2 DD# UBIN(12) UNAL;
       90     3115
       91     3116    1   DCL B$PS0$ PTR SYMREF READONLY;
       92     3117    1   DCL V$ REDEF B$PS0$ PTR;
       93     3118    1   DCL B$PS1$ PTR SYMREF READONLY;
       94     3119    1   DCL KEY$ REDEF B$PS1$ PTR;
       95     3120    1   DCL B$PS2$ PTR SYMREF READONLY;
       96     3121    1   DCL BUF$ REDEF B$PS2$ PTR;
       97     3122    1   DCL B$LOWMEM$ PTR SYMREF READONLY;
       98     3123    1   DCL B$JIT$ PTR SYMREF READONLY;
       99     3124
      100     3125    1   DCL 1 PKEY CALIGNED BASED(KEY$),
      101     3126    1         2 DC UBIN BYTE CALIGNED,
      102     3127    1         2 DD UBIN BYTE CALIGNED;
      103     3128
      104     3129    1   DCL 1 KEY CALIGNED,
      105     3130    1         2 DC UBIN BYTE CALIGNED,
      106     3131    1         2 DD UBIN BYTE CALIGNED;
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:18   
      107     3132    1   DCL CHAR8 CHAR(8) BASED;
      108     3133    1   DCL CHAR8B BIT(72) CALIGNED BASED;
      109     3134
      110     3135        %FPT$WRITE_V (FPTN=WRITEV,BASED="BASED(V$)");
      111     3141
      112     3142        %SUB F$DCB=DCB$->F$DCB;
      113     3143
      114     3144    1           DCB$=B$JIT.DCB$;

   3144  1 000002   000000 470400 xsym               LDP0    B$JIT$
         1 000003   000232 236100                    LDQ     154,,PR0
         1 000004   200010 756100                    STQ     DCB$,,AUTO

      115     3145    1           DCT$=N$DCT$(F$DCB.SETX);

   3145  1 000005   200010 471500                    LDP1    DCB$,,AUTO
         1 000006   100051 720100                    LXL0    41,,PR1
         1 000007   000000 473400 xsym               LDP3    N$DCT$$
         1 000010   300000 236110                    LDQ     0,X0,PR3
         1 000011   200007 756100                    STQ     DCT$,,AUTO

      116     3146    2           IF FPTCODE~=FPTWRITE THEN DO;

   3146  1 000012   200003 474500                    LDP4    @FPTCODE,,AUTO
         1 000013   400000 235100                    LDA     0,,PR4
         1 000014   000001 115007                    CMPA    1,DL
         1 000015   000024 600000 1                  TZE     s:3153

      117     3147    2              CALL SETERR(%E$READ,2);

   3147  1 000016   000001 236000 2                  LDQ     1
         1 000017   200030 756100                    STQ     @CODE+1,,AUTO
         1 000020   000002 236000 2                  LDQ     2
         1 000021   200027 756100                    STQ     KEY+3,,AUTO
         1 000022   001206 701000 1                  TSX1    SETERR
         1 000023   000000 011000                    NOP     0

PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:19   
      118     3148        /*E*       ERROR:   NAI-E$READ-E
      119     3149                   MESSAGE: Only M$WRITE is allowed for a DCB opened to an array processor.
      120     3150        */
      121     3151    2              END;

      122     3152
      123     3153    1           CALL HFF$DSIZ(KEY$,I);

   3153  1 000024   200004 630500                    EPPR0   I,,AUTO
         1 000025   200043 450500                    STP0    X+2,,AUTO
         1 000026   000003 236000 2                  LDQ     3
         1 000027   200042 756100                    STQ     X+1,,AUTO
         1 000030   200042 630500                    EPPR0   X+1,,AUTO
         1 000031   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000032   000000 701000 xent               TSX1    HFF$DSIZ
         1 000033   000000 011000                    NOP     0

      124     3154    2           IF I~=SIZEC(KEY) THEN DO;

   3154  1 000034   200004 235100                    LDA     I,,AUTO
         1 000035   000002 115007                    CMPA    2,DL
         1 000036   000045 600000 1                  TZE     s:3160

      125     3155    2              CALL SETERR(%E$BADKEY,2);

   3155  1 000037   000001 236000 2                  LDQ     1
         1 000040   200030 756100                    STQ     @CODE+1,,AUTO
         1 000041   000005 236000 2                  LDQ     5
         1 000042   200027 756100                    STQ     KEY+3,,AUTO
         1 000043   001206 701000 1                  TSX1    SETERR
         1 000044   000000 011000                    NOP     0

      126     3156        /*E*       ERROR:  NAI-E$BADKEY-E
      127     3157                   MESSAGE: Incorrect key length for M$WRITE to array processor.
      128     3158        */
      129     3159    2              END;

PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:20   
      130     3160    1           KEY=PKEY;

   3160  1 000045   000000 470400 xsym               LDP0    B$PS1$
         1 000046   000100 100500                    MLR     fill='000'O
         1 000047   000000 000002                    ADSC9   0,,PR0                   cn=0,n=2
         1 000050   200024 000002                    ADSC9   KEY,,AUTO                cn=0,n=2

      131     3161
      132     3162    2           IF F$DCB.UBYTES>0 THEN DO;

   3162  1 000051   200010 471500                    LDP1    DCB$,,AUTO
         1 000052   100076 235100                    LDA     62,,PR1
         1 000053   000070 600000 1                  TZE     s:3166

      133     3163    2              CALL NIM$CVTPTR(F$DCB.UB$,BUFADDR,PTP);

   3163  1 000054   200017 633500                    EPPR3   PTP,,AUTO
         1 000055   200044 453500                    STP3    X+3,,AUTO
         1 000056   200016 634500                    EPPR4   BUFADDR,,AUTO
         1 000057   200043 454500                    STP4    X+2,,AUTO
         1 000060   200010 236100                    LDQ     DCB$,,AUTO
         1 000061   000075 036003                    ADLQ    61,DU
         1 000062   200042 756100                    STQ     X+1,,AUTO
         1 000063   200042 630500                    EPPR0   X+1,,AUTO
         1 000064   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 000065   000000 701000 xent               TSX1    NIM$CVTPTR
         1 000066   000000 011000                    NOP     0

      134     3164    2              END;

   3164  1 000067   000072 710000 1                  TRA     s:3170

      135     3165    2           ELSE DO;

      136     3166    2              BUFADDR=0;

   3166  1 000070   200016 450100                    STZ     BUFADDR,,AUTO
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:21   

      137     3167    2              PTP=0;

   3167  1 000071   200017 450100                    STZ     PTP,,AUTO

      138     3168    2              END;

      139     3169
      140     3170    2           DO CASE(KEY.DC);

   3170  1 000072   200024 236100                    LDQ     KEY,,AUTO
         1 000073   000033 772000                    QRL     27
         1 000074   000010 116007                    CMPQ    8,DL
         1 000075   000077 602006 1                  TNC     s:3170+5,QL
         1 000076   000135 710000 1                  TRA     s:3180
         1 000077   000135 710000 1                  TRA     s:3180
         1 000100   000130 710000 1                  TRA     s:3177
         1 000101   000107 710000 1                  TRA     s:3172
         1 000102   000130 710000 1                  TRA     s:3177
         1 000103   000107 710000 1                  TRA     s:3172
         1 000104   000107 710000 1                  TRA     s:3172
         1 000105   000135 710000 1                  TRA     s:3180
         1 000106   000107 710000 1                  TRA     s:3172

      141     3171    2            CASE(%AP_RDHCSR,%AP_RDDATA,%AP_SNSHISP,%AP_SNSERMSK);

      142     3172    3              CALL HFF$WRITE1(F$DCB.UB$) WHENALTRETURN DO;

   3172  1 000107   200010 236100                    LDQ     DCB$,,AUTO
         1 000110   000075 036003                    ADLQ    61,DU
         1 000111   200042 756100                    STQ     X+1,,AUTO
         1 000112   200042 630500                    EPPR0   X+1,,AUTO
         1 000113   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000114   000000 701000 xent               TSX1    HFF$WRITE1
         1 000115   000117 702000 1                  TSX2    s:3173
         1 000116   000122 710000 1                  TRA     s:3175

PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:22   
      143     3173    3                 F$DCB.UBYTES=1;                              /* CAUSE E$MTRAP */

   3173  1 000117   000001 235007                    LDA     1,DL
         1 000120   200010 470500                    LDP0    DCB$,,AUTO
         1 000121   000076 755100                    STA     62,,PR0

      144     3174    3                 END;

      145     3175    2              IF F$DCB.UBYTES=0 THEN F$DCB.UBYTES=1;

   3175  1 000122   200010 470500                    LDP0    DCB$,,AUTO
         1 000123   000076 235100                    LDA     62,,PR0
         1 000124   000135 601000 1                  TNZ     s:3180

   3175  1 000125   000001 236007                    LDQ     1,DL
         1 000126   000076 756100                    STQ     62,,PR0
         1 000127   000135 710000 1                  TRA     s:3180

      146     3176    2            CASE(%AP_WRHCSR,%AP_WRDATA);

      147     3177    2              IF F$DCB.UBYTES=0 THEN F$DCB.UBYTES=1;

   3177  1 000130   200010 470500                    LDP0    DCB$,,AUTO
         1 000131   000076 235100                    LDA     62,,PR0
         1 000132   000135 601000 1                  TNZ     s:3180

   3177  1 000133   000001 235007                    LDA     1,DL
         1 000134   000076 755100                    STA     62,,PR0

      148     3178    2            END;

      149     3179
      150     3180    2           IF MOD(F$DCB.UBYTES,4)~=0 OR MOD(BUFADDR,4)~=0 THEN DO;

   3180  1 000135   200010 470500                    LDP0    DCB$,,AUTO
         1 000136   000076 236100                    LDQ     62,,PR0
         1 000137   000003 376007                    ANQ     3,DL
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:23   
         1 000140   000144 601000 1                  TNZ     s:3181
         1 000141   200016 236100                    LDQ     BUFADDR,,AUTO
         1 000142   000003 376007                    ANQ     3,DL
         1 000143   000152 600000 1                  TZE     s:3187

      151     3181    2              CALL SETERR(%E$MTRAP,2);

   3181  1 000144   000001 236000 2                  LDQ     1
         1 000145   200030 756100                    STQ     @CODE+1,,AUTO
         1 000146   000006 236000 2                  LDQ     6
         1 000147   200027 756100                    STQ     KEY+3,,AUTO
         1 000150   001206 701000 1                  TSX1    SETERR
         1 000151   000000 011000                    NOP     0

      152     3182        /*E*       ERROR:  NAI-E$MTRAP-E
      153     3183                   MESSAGE:  Incorrect buffer access or alignment.
      154     3184        */
      155     3185    2              END;

      156     3186
      157     3187    2           IF WRITEV.DVBYTE.CONT AND NOT F$DCB.CONT THEN DO;

   3187  1 000152   000000 470400 xsym               LDP0    B$PS0$
         1 000153   000003 430100                    FSZN    3,,PR0
         1 000154   000223 605000 1                  TPL     s:3211
         1 000155   200010 471500                    LDP1    DCB$,,AUTO
         1 000156   100064 236100                    LDQ     52,,PR1
         1 000157   000040 316007                    CANQ    32,DL
         1 000160   000223 601000 1                  TNZ     s:3211

      158     3188    3              IF KEY.DC~=%AP_WRHCSR THEN DO;

   3188  1 000161   200024 236100                    LDQ     KEY,,AUTO
         1 000162   777000 376003                    ANQ     -512,DU
         1 000163   001000 116003                    CMPQ    512,DU
         1 000164   000173 600000 1                  TZE     s:3195

PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:24   
      159     3189    3                 CALL SETERR(%E$KEYORDER,2);

   3189  1 000165   000001 236000 2                  LDQ     1
         1 000166   200030 756100                    STQ     @CODE+1,,AUTO
         1 000167   000010 236000 2                  LDQ     8
         1 000170   200027 756100                    STQ     KEY+3,,AUTO
         1 000171   001206 701000 1                  TSX1    SETERR
         1 000172   000000 011000                    NOP     0

      160     3190        /*E*          ERROR:  NAI-E$KEYORDER-E
      161     3191                      MESSAGE:  The first in a string of continued M$WRITES to an array
      162     3192                                processor must be a WRITE HCSR.
      163     3193        */
      164     3194    3                 END;

      165     3195    3              IF F$DCB.UBYTES~=8 THEN DO;

   3195  1 000173   200010 470500                    LDP0    DCB$,,AUTO
         1 000174   000076 235100                    LDA     62,,PR0
         1 000175   000010 115007                    CMPA    8,DL
         1 000176   000205 600000 1                  TZE     s:3203

      166     3196    3                 CALL SETERR(%E$LD,2);

   3196  1 000177   000001 236000 2                  LDQ     1
         1 000200   200030 756100                    STQ     @CODE+1,,AUTO
         1 000201   000011 236000 2                  LDQ     9
         1 000202   200027 756100                    STQ     KEY+3,,AUTO
         1 000203   001206 701000 1                  TSX1    SETERR
         1 000204   000000 011000                    NOP     0

      167     3197        /*E*          ERROR:  NAI-E$LD-E
      168     3198                      MESSAGE: The buffer for a WRITE HCSR command to an array processor
      169     3199                               must be exactly two words long.
      170     3200        */
      171     3201    3                 END;

PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:25   
      172     3202
      173     3203    2              F$DCB.PASS=F$DCB.UB$->CHAR8;

   3203  1 000205   200010 470500                    LDP0    DCB$,,AUTO
         1 000206   000075 471500                    LDP1    61,,PR0
         1 000207   040100 100500                    MLR     fill='040'O
         1 000210   100000 000010                    ADSC9   0,,PR1                   cn=0,n=8
         1 000211   000022 000010                    ADSC9   18,,PR0                  cn=0,n=8

      174     3204    2              NI$DCT.AP.CONT.DC=KEY.DC;

   3204  1 000212   200007 473500                    LDP3    DCT$,,AUTO
         1 000213   200024 236100                    LDQ     KEY,,AUTO
         1 000214   300037 552140                    STBQ    31,'40'O,PR3

      175     3205    2              NI$DCT.AP.CONT.DD=KEY.DD;

   3205  1 000215   300037 552120                    STBQ    31,'20'O,PR3

      176     3206    2              F$DCB.CONT='1'B;

   3206  1 000216   000040 236007                    LDQ     32,DL
         1 000217   000064 256100                    ORSQ    52,,PR0

      177     3207    2              F$DCB.TDSTAT='0'B;

   3207  1 000220   000027 450100                    STZ     23,,PR0
         1 000221   000030 450100                    STZ     24,,PR0

      178     3208    2              RETURN;

   3208  1 000222   000000 702200 xent               TSX2  ! X66_ARET

      179     3209    2              END;
      180     3210
      181     3211    1           F$DCB.WAIT=BITBIN(WRITEV.WAIT | WRITEV.DVBYTE.CONT);

PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:26   
   3211  1 000223   000003 236100                    LDQ     3,,PR0
         1 000224   000010 736000                    QLS     8
         1 000225   400000 376003                    ANQ     -131072,DU
         1 000226   200042 756100                    STQ     X+1,,AUTO
         1 000227   000000 236100                    LDQ     0,,PR0
         1 000230   000022 736000                    QLS     18
         1 000231   400000 376003                    ANQ     -131072,DU
         1 000232   200042 276100                    ORQ     X+1,,AUTO
         1 000233   000043 772000                    QRL     35
         1 000234   200010 471500                    LDP1    DCB$,,AUTO
         1 000235   000004 736000                    QLS     4
         1 000236   100064 676100                    ERQ     52,,PR1
         1 000237   000020 376007                    ANQ     16,DL
         1 000240   100064 656100                    ERSQ    52,,PR1

      182     3212    1           CALL GETQ;

   3212  1 000241   000704 701000 1                  TSX1    GETQ
         1 000242   000000 011000                    NOP     0

      183     3213
      184     3214    2           IF NI$DCT.AP.CONT THEN DO;

   3214  1 000243   200007 470500                    LDP0    DCT$,,AUTO
         1 000244   000037 220100                    LDX0    31,,PR0
         1 000245   000341 600000 1                  TZE     s:3232

      185     3215    2              DCWXWRAP=6;

   3215  1 000246   000006 235007                    LDA     6,DL
         1 000247   200014 755100                    STA     DCWXWRAP,,AUTO

      186     3216    2              HCSR=ADDR(F$DCB.PASS)->CHAR8B;

   3216  1 000250   200010 471500                    LDP1    DCB$,,AUTO
         1 000251   100022 237100                    LDAQ    18,,PR1
         1 000252   200022 757100                    STAQ    HCSR,,AUTO
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:27   

      187     3217    2              NI$REQ.DCW(6)=HCSR.HCSRU;

   3217  1 000253   200022 236100                    LDQ     HCSR,,AUTO
         1 000254   200006 473500                    LDP3    IOS$,,AUTO
         1 000255   300010 756100                    STQ     8,,PR3

      188     3218    2              NI$REQ.DCW(7)=HCSR.HCSR1;

   3218  1 000256   200023 236100                    LDQ     HCSR+1,,AUTO
         1 000257   300011 756100                    STQ     9,,PR3

      189     3219    2              HCSRADDR=POFFW(ADDR(NI$REQ.DCW(6)),B$LOWMEM$);

   3219  1 000260   200006 236100                    LDQ     IOS$,,AUTO
         1 000261   000010 036003                    ADLQ    8,DU
         1 000262   000022 772000                    QRL     18
         1 000263   000000 235000 xsym               LDA     B$LOWMEM$
         1 000264   000022 771000                    ARL     18
         1 000265   200042 755100                    STA     X+1,,AUTO
         1 000266   200042 136100                    SBLQ    X+1,,AUTO
         1 000267   200015 756100                    STQ     HCSRADDR,,AUTO

      190     3220    2              IDCW.DC=NI$DCT.AP.CONT.DC;

   3220  1 000270   000037 236100                    LDQ     31,,PR0
         1 000271   000003 736000                    QLS     3
         1 000272   200020 752140                    STCQ    IDCW,'40'O,AUTO

      191     3221    2              IDCW.DD#=NI$DCT.AP.CONT.DD;

   3221  1 000273   000037 236100                    LDQ     31,,PR0
         1 000274   000777 376003                    ANQ     511,DU
         1 000275   000022 772000                    QRL     18
         1 000276   200020 752103                    STCQ    IDCW,'03'O,AUTO

      192     3222    2              CALL STOREDCW(IDCW);
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:28   

   3222  1 000277   200020 634500                    EPPR4   IDCW,,AUTO
         1 000300   200035 454500                    STP4    DCW+2,,AUTO
         1 000301   001042 701000 1                  TSX1    STOREDCW
         1 000302   000000 011000                    NOP     0

      193     3223    2              CALL BLDDCW(HCSRADDR,2);

   3223  1 000303   000001 236000 2                  LDQ     1
         1 000304   200030 756100                    STQ     @CODE+1,,AUTO
         1 000305   200015 630500                    EPPR0   HCSRADDR,,AUTO
         1 000306   200027 450500                    STP0    KEY+3,,AUTO
         1 000307   001147 701000 1                  TSX1    BLDDCW
         1 000310   000000 011000                    NOP     0

      194     3224    3              IF F$DCB.UBYTES~=0 THEN DO;

   3224  1 000311   200010 470500                    LDP0    DCB$,,AUTO
         1 000312   000076 235100                    LDA     62,,PR0
         1 000313   000335 600000 1                  TZE     s:3229

      195     3225    3                 TDCW='000000020001'O;

   3225  1 000314   000000 236000 0                  LDQ     0
         1 000315   200021 756100                    STQ     TDCW,,AUTO

      196     3226    3                 TDCW.WA=POFFW(ADDR(NI$REQ.DCW(DCWX+1)),B$LOWMEM$);

   3226  1 000316   200013 236100                    LDQ     DCWX,,AUTO
         1 000317   000022 736000                    QLS     18
         1 000320   000003 036003                    ADLQ    3,DU
         1 000321   200006 036100                    ADLQ    IOS$,,AUTO
         1 000322   000022 772000                    QRL     18
         1 000323   000000 235000 xsym               LDA     B$LOWMEM$
         1 000324   000022 771000                    ARL     18
         1 000325   200042 755100                    STA     X+1,,AUTO
         1 000326   200042 136100                    SBLQ    X+1,,AUTO
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:29   
         1 000327   000000 620006                    EAX0    0,QL
         1 000330   200021 740100                    STX0    TDCW,,AUTO

      197     3227    3                 CALL STOREDCW(TDCW);

   3227  1 000331   200021 631500                    EPPR1   TDCW,,AUTO
         1 000332   200035 451500                    STP1    DCW+2,,AUTO
         1 000333   001042 701000 1                  TSX1    STOREDCW
         1 000334   000000 011000                    NOP     0

      198     3228    3                 END;

      199     3229    2              NI$DCT.AP.CONT='0'B;

   3229  1 000335   000000 220003                    LDX0    0,DU
         1 000336   200007 470500                    LDP0    DCT$,,AUTO
         1 000337   000037 740100                    STX0    31,,PR0

      200     3230    2              END;

   3230  1 000340   000344 710000 1                  TRA     s:3235

      201     3231    2           ELSE DO;

      202     3232    2              N$REQ.IOFLG.LPW23='1'B;

   3232  1 000341   200005 471500                    LDP1    IOQ$,,AUTO
         1 000342   020000 236007                    LDQ     8192,DL
         1 000343   100004 256100                    ORSQ    4,,PR1

      203     3233    2              END;

      204     3234
      205     3235    1           IDCW.DC=KEY.DC;

   3235  1 000344   200024 236100                    LDQ     KEY,,AUTO
         1 000345   000003 736000                    QLS     3
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:30   
         1 000346   200020 752140                    STCQ    IDCW,'40'O,AUTO

      206     3236    1           IDCW.DD#=KEY.DD;

   3236  1 000347   200024 236100                    LDQ     KEY,,AUTO
         1 000350   000777 376003                    ANQ     511,DU
         1 000351   000022 772000                    QRL     18
         1 000352   200020 752103                    STCQ    IDCW,'03'O,AUTO

      207     3237    1           IDCW.SPLIT=WRITEV.DVBYTE.CONT;

   3237  1 000353   000000 471400 xsym               LDP1    B$PS0$
         1 000354   100003 236100                    LDQ     3,,PR1
         1 000355   000017 772000                    QRL     15
         1 000356   200020 676100                    ERQ     IDCW,,AUTO
         1 000357   010000 376007                    ANQ     4096,DL
         1 000360   200020 656100                    ERSQ    IDCW,,AUTO

      208     3238    1           CALL STOREDCW(IDCW);

   3238  1 000361   200020 633500                    EPPR3   IDCW,,AUTO
         1 000362   200035 453500                    STP3    DCW+2,,AUTO
         1 000363   001042 701000 1                  TSX1    STOREDCW
         1 000364   000000 011000                    NOP     0

      209     3239    1           IF F$DCB.UBYTES~=0 THEN

   3239  1 000365   200010 470500                    LDP0    DCB$,,AUTO
         1 000366   000076 235100                    LDA     62,,PR0
         1 000367   000406 600000 1                  TZE     s:3241

      210     3240    1              CALL BLDDCW(BUFADDR/4,F$DCB.UBYTES/4);

   3240  1 000370   200016 236100                    LDQ     BUFADDR,,AUTO
         1 000371   000002 772000                    QRL     2
         1 000372   200042 756100                    STQ     X+1,,AUTO
         1 000373   000076 236100                    LDQ     62,,PR0
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:31   
         1 000374   000002 772000                    QRL     2
         1 000375   200042 235100                    LDA     X+1,,AUTO
         1 000376   200045 755100                    STA     X+4,,AUTO
         1 000377   200046 756100                    STQ     X+5,,AUTO
         1 000400   200046 631500                    EPPR1   X+5,,AUTO
         1 000401   200030 451500                    STP1    @CODE+1,,AUTO
         1 000402   200045 633500                    EPPR3   X+4,,AUTO
         1 000403   200027 453500                    STP3    KEY+3,,AUTO
         1 000404   001147 701000 1                  TSX1    BLDDCW
         1 000405   000000 011000                    NOP     0

      211     3241    1           F$DCB.CONT=WRITEV.DVBYTE.CONT;

   3241  1 000406   200010 470500                    LDP0    DCB$,,AUTO
         1 000407   000000 471400 xsym               LDP1    B$PS0$
         1 000410   100003 236100                    LDQ     3,,PR1
         1 000411   000026 772000                    QRL     22
         1 000412   000064 676100                    ERQ     52,,PR0
         1 000413   000040 376007                    ANQ     32,DL
         1 000414   000064 656100                    ERSQ    52,,PR0

      212     3242    1           CALL NIO$QUE(N$REQ);

   3242  1 000415   200005 630500                    EPPR0   IOQ$,,AUTO
         1 000416   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000417   000000 701000 xent               TSX1    NIO$QUE
         1 000420   000000 011000                    NOP     0

      213     3243    2           IF F$DCB.TYC.EGV(1) THEN DO;

   3243  1 000421   200010 470500                    LDP0    DCB$,,AUTO
         1 000422   000002 234100                    SZN     2,,PR0
         1 000423   000441 605000 1                  TPL     s:3247

      214     3244    2              CALL FMF$TYC(F$DCB.TYC(1),B$JIT.ERR);

   3244  1 000424   000000 236000 xsym               LDQ     B$JIT$
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:32   
         1 000425   000012 036003                    ADLQ    10,DU
         1 000426   200043 756100                    STQ     X+2,,AUTO
         1 000427   200010 236100                    LDQ     DCB$,,AUTO
         1 000430   000002 036003                    ADLQ    2,DU
         1 000431   200042 756100                    STQ     X+1,,AUTO
         1 000432   200042 630500                    EPPR0   X+1,,AUTO
         1 000433   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000434   000000 701000 xent               TSX1    FMF$TYC
         1 000435   000000 011000                    NOP     0

      215     3245    2              CALL UDB$PMMEXIT;

   3245  1 000436   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 000437   000000 701000 xent               TSX1    UDB$PMMEXIT
         1 000440   000000 011000                    NOP     0

      216     3246    2              END;

      217     3247    1           RETURN;

   3247  1 000441   000000 702200 xent               TSX2  ! X66_ARET

      218     3248
      219     3249    1   NAI$INIT: ENTRY;

   3249  1 000442   000000 700200 xent  NAI$INIT     TSX0  ! X66_AUTO_1
         1 000443   000050 000001                    ZERO    40,1

      220     3250
      221     3251        /*F*    NAME:  NAI$INIT
      222     3252                CALL:  CALL NAI$INIT
      223     3253                DESCRIPTION:  This routine is called when an array processor is opened
      224     3254                              to stop any left over processing and create an unprivleged
      225     3255                              user.
      226     3256        */
      227     3257
      228     3258    1           DCB$=B$JIT.DCB$;
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:33   

   3258  1 000444   000000 470400 xsym               LDP0    B$JIT$
         1 000445   000232 236100                    LDQ     154,,PR0
         1 000446   200010 756100                    STQ     DCB$,,AUTO

      229     3259    1           F$DCB.WAIT=1;

   3259  1 000447   200010 471500                    LDP1    DCB$,,AUTO
         1 000450   000020 236007                    LDQ     16,DL
         1 000451   100064 256100                    ORSQ    52,,PR1

      230     3260    1           CALL GETQ;

   3260  1 000452   000704 701000 1                  TSX1    GETQ
         1 000453   000000 011000                    NOP     0

      231     3261    1           NI$DCT.AP.CONT='0'B;

   3261  1 000454   000000 220003                    LDX0    0,DU
         1 000455   200007 470500                    LDP0    DCT$,,AUTO
         1 000456   000037 740100                    STX0    31,,PR0

      232     3262    1           DCWXWRAP=6;

   3262  1 000457   000006 235007                    LDA     6,DL
         1 000460   200014 755100                    STA     DCWXWRAP,,AUTO

      233     3263    1           N$REQ.DLA.DCTX=NI$DCT.AP.CDCTX;

   3263  1 000461   200005 471500                    LDP1    IOQ$,,AUTO
         1 000462   000036 236100                    LDQ     30,,PR0
         1 000463   000025 736000                    QLS     21
         1 000464   100001 676100                    ERQ     1,,PR1
         1 000465   777770 376003                    ANQ     -8,DU
         1 000466   100001 656100                    ERSQ    1,,PR1

      234     3264    1           HCSR='0'B;
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:34   

   3264  1 000467   000000 235003                    LDA     0,DU
         1 000470   000000 236003                    LDQ     0,DU
         1 000471   200022 757100                    STAQ    HCSR,,AUTO

      235     3265    1           HCSR.HCSRU.CNTRL.UNEXHW='1'B;

   3265  1 000472   010000 236003                    LDQ     4096,DU
         1 000473   200022 256100                    ORSQ    HCSR,,AUTO

      236     3266    1           HCSR.HCSRU.CMD=%AP_HISP_SPRVUSR;

   3266  1 000474   001300 236003                    LDQ     704,DU
         1 000475   200022 752120                    STCQ    HCSR,'20'O,AUTO

      237     3267    1           HCSR.HCSR1.CHAN=NI$DCT.AP.CHAN;

   3267  1 000476   000035 235100                    LDA     29,,PR0
         1 000477   200023 755100                    STA     HCSR+1,,AUTO

      238     3268    1           NI$REQ.DCW(6)=HCSR.HCSRU;

   3268  1 000500   200022 236100                    LDQ     HCSR,,AUTO
         1 000501   200006 471500                    LDP1    IOS$,,AUTO
         1 000502   100010 756100                    STQ     8,,PR1

      239     3269    1           NI$REQ.DCW(7)=HCSR.HCSR1;

   3269  1 000503   200023 236100                    LDQ     HCSR+1,,AUTO
         1 000504   100011 756100                    STQ     9,,PR1

      240     3270    1           HCSRADDR=POFFW(ADDR(NI$REQ.DCW(6)),B$LOWMEM$);

   3270  1 000505   200006 236100                    LDQ     IOS$,,AUTO
         1 000506   000010 036003                    ADLQ    8,DU
         1 000507   000022 772000                    QRL     18
         1 000510   000000 235000 xsym               LDA     B$LOWMEM$
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:35   
         1 000511   000022 771000                    ARL     18
         1 000512   200042 755100                    STA     X+1,,AUTO
         1 000513   200042 136100                    SBLQ    X+1,,AUTO
         1 000514   200015 756100                    STQ     HCSRADDR,,AUTO

      241     3271    1           IDCW.DC=%AP_TERMINATE;

   3271  1 000515   100000 236003                    LDQ     32768,DU
         1 000516   200020 752140                    STCQ    IDCW,'40'O,AUTO

      242     3272    1           CALL STOREDCW(IDCW);

   3272  1 000517   200020 633500                    EPPR3   IDCW,,AUTO
         1 000520   200035 453500                    STP3    DCW+2,,AUTO
         1 000521   001042 701000 1                  TSX1    STOREDCW
         1 000522   000000 011000                    NOP     0

      243     3273    1           CALL BLDDCW(HCSRADDR+1,1);

   3273  1 000523   200015 235100                    LDA     HCSRADDR,,AUTO
         1 000524   000001 035007                    ADLA    1,DL
         1 000525   200047 755100                    STA     X+6,,AUTO
         1 000526   000012 236000 2                  LDQ     10
         1 000527   200030 756100                    STQ     @CODE+1,,AUTO
         1 000530   200047 630500                    EPPR0   X+6,,AUTO
         1 000531   200027 450500                    STP0    KEY+3,,AUTO
         1 000532   001147 701000 1                  TSX1    BLDDCW
         1 000533   000000 011000                    NOP     0

      244     3274    1           IDCW.DC=%AP_WRHCSR;

   3274  1 000534   010000 236003                    LDQ     4096,DU
         1 000535   200020 752140                    STCQ    IDCW,'40'O,AUTO

      245     3275    1           CALL STOREDCW(IDCW);

   3275  1 000536   200020 630500                    EPPR0   IDCW,,AUTO
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:36   
         1 000537   200035 450500                    STP0    DCW+2,,AUTO
         1 000540   001042 701000 1                  TSX1    STOREDCW
         1 000541   000000 011000                    NOP     0

      246     3276    1           CALL BLDDCW(HCSRADDR,2);

   3276  1 000542   000001 236000 2                  LDQ     1
         1 000543   200030 756100                    STQ     @CODE+1,,AUTO
         1 000544   200015 630500                    EPPR0   HCSRADDR,,AUTO
         1 000545   200027 450500                    STP0    KEY+3,,AUTO
         1 000546   001147 701000 1                  TSX1    BLDDCW
         1 000547   000000 011000                    NOP     0

      247     3277    1           IDCW.DC=%AP_RDHCSR;

   3277  1 000550   020000 236003                    LDQ     8192,DU
         1 000551   200020 752140                    STCQ    IDCW,'40'O,AUTO

      248     3278    1           CALL STOREDCW(IDCW);

   3278  1 000552   200020 630500                    EPPR0   IDCW,,AUTO
         1 000553   200035 450500                    STP0    DCW+2,,AUTO
         1 000554   001042 701000 1                  TSX1    STOREDCW
         1 000555   000000 011000                    NOP     0

      249     3279    1           CALL BLDDCW(HCSRADDR,2);

   3279  1 000556   000001 236000 2                  LDQ     1
         1 000557   200030 756100                    STQ     @CODE+1,,AUTO
         1 000560   200015 630500                    EPPR0   HCSRADDR,,AUTO
         1 000561   200027 450500                    STP0    KEY+3,,AUTO
         1 000562   001147 701000 1                  TSX1    BLDDCW
         1 000563   000000 011000                    NOP     0

      250     3280    1           CALL NIO$QUE(N$REQ);

   3280  1 000564   200005 630500                    EPPR0   IOQ$,,AUTO
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:37   
         1 000565   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000566   000000 701000 xent               TSX1    NIO$QUE
         1 000567   000000 011000                    NOP     0

      251     3281    1           IF F$DCB.TYC.EGV(1) THEN

   3281  1 000570   200010 470500                    LDP0    DCB$,,AUTO
         1 000571   000002 234100                    SZN     2,,PR0
         1 000572   000605 605000 1                  TPL     s:3283

      252     3282    1              CALL FMF$TYC(F$DCB.TYC(1),B$JIT.ERR);

   3282  1 000573   000000 236000 xsym               LDQ     B$JIT$
         1 000574   000012 036003                    ADLQ    10,DU
         1 000575   200043 756100                    STQ     X+2,,AUTO
         1 000576   200010 236100                    LDQ     DCB$,,AUTO
         1 000577   000002 036003                    ADLQ    2,DU
         1 000600   200042 756100                    STQ     X+1,,AUTO
         1 000601   200042 630500                    EPPR0   X+1,,AUTO
         1 000602   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000603   000000 701000 xent               TSX1    FMF$TYC
         1 000604   000000 011000                    NOP     0

      253     3283    1           RETURN;

   3283  1 000605   000000 702200 xent               TSX2  ! X66_ARET

      254     3284
      255     3285    1   NAI$RESET: ENTRY;

   3285  1 000606   000000 700200 xent  NAI$RESET    TSX0  ! X66_AUTO_1
         1 000607   000050 000001                    ZERO    40,1

      256     3286
      257     3287        /*F*    NAME:  NAI$RESET
      258     3288                CALL:  CALL NAI$RESET;
      259     3289                DESCRIPTION: This routine is called when a DCB opened to an array processor
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:38   
      260     3290                              is closed.  It terminates any ongoing I/O.
      261     3291        */
      262     3292
      263     3293    1           DCB$=B$JIT.DCB$;

   3293  1 000610   000000 470400 xsym               LDP0    B$JIT$
         1 000611   000232 236100                    LDQ     154,,PR0
         1 000612   200010 756100                    STQ     DCB$,,AUTO

      264     3294    1           F$DCB.WAIT=1;

   3294  1 000613   200010 471500                    LDP1    DCB$,,AUTO
         1 000614   000020 236007                    LDQ     16,DL
         1 000615   100064 256100                    ORSQ    52,,PR1

      265     3295    1           CALL GETQ;

   3295  1 000616   000704 701000 1                  TSX1    GETQ
         1 000617   000000 011000                    NOP     0

      266     3296    1           NI$DCT.AP.CONT='0'B;

   3296  1 000620   000000 220003                    LDX0    0,DU
         1 000621   200007 470500                    LDP0    DCT$,,AUTO
         1 000622   000037 740100                    STX0    31,,PR0

      267     3297    1           DCWXWRAP=5;

   3297  1 000623   000005 235007                    LDA     5,DL
         1 000624   200014 755100                    STA     DCWXWRAP,,AUTO

      268     3298    1           N$REQ.DLA.DCTX=NI$DCT.AP.CDCTX;

   3298  1 000625   200005 471500                    LDP1    IOQ$,,AUTO
         1 000626   000036 236100                    LDQ     30,,PR0
         1 000627   000025 736000                    QLS     21
         1 000630   100001 676100                    ERQ     1,,PR1
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:39   
         1 000631   777770 376003                    ANQ     -8,DU
         1 000632   100001 656100                    ERSQ    1,,PR1

      269     3299    1           NI$REQ.DCW(5)=BINBIT(NI$DCT.AP.CHAN,36);

   3299  1 000633   000035 236100                    LDQ     29,,PR0
         1 000634   200006 471500                    LDP1    IOS$,,AUTO
         1 000635   100007 756100                    STQ     7,,PR1

      270     3300    1           HCSRADDR=POFFW(ADDR(NI$REQ.DCW(5)),B$LOWMEM$);

   3300  1 000636   200006 236100                    LDQ     IOS$,,AUTO
         1 000637   000007 036003                    ADLQ    7,DU
         1 000640   000022 772000                    QRL     18
         1 000641   000000 235000 xsym               LDA     B$LOWMEM$
         1 000642   000022 771000                    ARL     18
         1 000643   200042 755100                    STA     X+1,,AUTO
         1 000644   200042 136100                    SBLQ    X+1,,AUTO
         1 000645   200015 756100                    STQ     HCSRADDR,,AUTO

      271     3301    1           IDCW.DC=%AP_TERMINATE;

   3301  1 000646   100000 236003                    LDQ     32768,DU
         1 000647   200020 752140                    STCQ    IDCW,'40'O,AUTO

      272     3302    1           CALL STOREDCW(IDCW);

   3302  1 000650   200020 633500                    EPPR3   IDCW,,AUTO
         1 000651   200035 453500                    STP3    DCW+2,,AUTO
         1 000652   001042 701000 1                  TSX1    STOREDCW
         1 000653   000000 011000                    NOP     0

      273     3303    1           CALL BLDDCW(HCSRADDR,1);

   3303  1 000654   000012 236000 2                  LDQ     10
         1 000655   200030 756100                    STQ     @CODE+1,,AUTO
         1 000656   200015 630500                    EPPR0   HCSRADDR,,AUTO
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:40   
         1 000657   200027 450500                    STP0    KEY+3,,AUTO
         1 000660   001147 701000 1                  TSX1    BLDDCW
         1 000661   000000 011000                    NOP     0

      274     3304    1           CALL NIO$QUE(N$REQ);

   3304  1 000662   200005 630500                    EPPR0   IOQ$,,AUTO
         1 000663   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000664   000000 701000 xent               TSX1    NIO$QUE
         1 000665   000000 011000                    NOP     0

      275     3305    1           IF F$DCB.TYC.EGV(1) THEN

   3305  1 000666   200010 470500                    LDP0    DCB$,,AUTO
         1 000667   000002 234100                    SZN     2,,PR0
         1 000670   000703 605000 1                  TPL     s:3307

      276     3306    1              CALL FMF$TYC(F$DCB.TYC(1),B$JIT.ERR);

   3306  1 000671   000000 236000 xsym               LDQ     B$JIT$
         1 000672   000012 036003                    ADLQ    10,DU
         1 000673   200043 756100                    STQ     X+2,,AUTO
         1 000674   200010 236100                    LDQ     DCB$,,AUTO
         1 000675   000002 036003                    ADLQ    2,DU
         1 000676   200042 756100                    STQ     X+1,,AUTO
         1 000677   200042 630500                    EPPR0   X+1,,AUTO
         1 000700   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000701   000000 701000 xent               TSX1    FMF$TYC
         1 000702   000000 011000                    NOP     0

      277     3307    1           RETURN;

   3307  1 000703   000000 702200 xent               TSX2  ! X66_ARET

      278     3308
      279     3309    1   GETQ: PROC;

PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:41   
   3309  1 000704   200026 741300       GETQ         STX1  ! KEY+2,,AUTO

      280     3310
      281     3311    2           CALL NIQ$GET(IOQ$);

   3311  1 000705   200005 630500                    EPPR0   IOQ$,,AUTO
         1 000706   200042 450500                    STP0    X+1,,AUTO
         1 000707   200042 630500                    EPPR0   X+1,,AUTO
         1 000710   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000711   000000 701000 xent               TSX1    NIQ$GET
         1 000712   000000 011000                    NOP     0

      282     3312    2           N$REQ.DLA.DCTX=F$DCB.SETX;

   3312  1 000713   200005 470500                    LDP0    IOQ$,,AUTO
         1 000714   200010 471500                    LDP1    DCB$,,AUTO
         1 000715   100051 236100                    LDQ     41,,PR1
         1 000716   000025 736000                    QLS     21
         1 000717   000001 676100                    ERQ     1,,PR0
         1 000720   777770 376003                    ANQ     -8,DU
         1 000721   000001 656100                    ERSQ    1,,PR0

      283     3313    2           N$REQ.FC=%N_DCWLIST;

   3313  1 000722   200005 470500                    LDP0    IOQ$,,AUTO
         1 000723   000000 236003                    LDQ     0,DU
         1 000724   000003 552104                    STBQ    3,'04'O,PR0

      284     3314    2           N$REQ.OPFLG=%(OP_USER|OP_CLR);

   3314  1 000725   200005 470500                    LDP0    IOQ$,,AUTO
         1 000726   000401 236007                    LDQ     257,DL
         1 000727   000004 552104                    STBQ    4,'04'O,PR0

      285     3315    2           N$REQ.OPFLG.WAIT=BINBIT(F$DCB.WAIT,1);

   3315  1 000730   100064 236100                    LDQ     52,,PR1
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:42   
         1 000731   000004 772000                    QRL     4
         1 000732   000001 376007                    ANQ     1,DL
         1 000733   000043 736000                    QLS     35
         1 000734   200005 470500                    LDP0    IOQ$,,AUTO
         1 000735   000037 772000                    QRL     31
         1 000736   000004 676100                    ERQ     4,,PR0
         1 000737   000020 376007                    ANQ     16,DL
         1 000740   000004 656100                    ERSQ    4,,PR0

      286     3316    2           N$REQ.NWIO=F$DCB.WAIT;

   3316  1 000741   200005 470500                    LDP0    IOQ$,,AUTO
         1 000742   100064 236100                    LDQ     52,,PR1
         1 000743   000015 736000                    QLS     13
         1 000744   000031 676100                    ERQ     25,,PR0
         1 000745   400000 376007                    ANQ     -131072,DL
         1 000746   000031 656100                    ERSQ    25,,PR0

      287     3317    2           N$REQ.DCB$=DCB$;

   3317  1 000747   200010 236100                    LDQ     DCB$,,AUTO
         1 000750   000022 756100                    STQ     18,,PR0

      288     3318    2           N$REQ.COMP=%COMP_TD;

   3318  1 000751   000027 236100                    LDQ     23,,PR0
         1 000752   000013 376000 2                  ANQ     11
         1 000753   004000 276007                    ORQ     2048,DL
         1 000754   000027 756100                    STQ     23,,PR0

      289     3319    2           DCT$=N$DCT$(N$REQ.DLA.DCTX);

   3319  1 000755   000001 236100                    LDQ     1,,PR0
         1 000756   000025 772000                    QRL     21
         1 000757   000000 473400 xsym               LDP3    N$DCT$$
         1 000760   300000 236106                    LDQ     0,QL,PR3
         1 000761   200007 756100                    STQ     DCT$,,AUTO
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:43   

      290     3320    3           IF NOT N$REQ.IOFLG.IOS THEN DO;

   3320  1 000762   000004 236100                    LDQ     4,,PR0
         1 000763   040000 316007                    CANQ    16384,DL
         1 000764   001001 601000 1                  TNZ     s:3326

      291     3321    3              CALL NIQ$GETS(IOS$);

   3321  1 000765   200006 634500                    EPPR4   IOS$,,AUTO
         1 000766   200042 454500                    STP4    X+1,,AUTO
         1 000767   200042 630500                    EPPR0   X+1,,AUTO
         1 000770   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000771   000000 701000 xent               TSX1    NIQ$GETS
         1 000772   000000 011000                    NOP     0

      292     3322    3              N$REQ.IOS$=IOS$;

   3322  1 000773   200006 236100                    LDQ     IOS$,,AUTO
         1 000774   200005 470500                    LDP0    IOQ$,,AUTO
         1 000775   000012 756100                    STQ     10,,PR0

      293     3323    3              N$REQ.IOFLG.IOS='1'B;

   3323  1 000776   040000 236007                    LDQ     16384,DL
         1 000777   000004 256100                    ORSQ    4,,PR0

      294     3324    3              END;

   3324  1 001000   001007 710000 1                  TRA     s:3335

      295     3325    3           ELSE DO;

      296     3326    3              IOS$=N$REQ.IOS$;

   3326  1 001001   000012 236100                    LDQ     10,,PR0
         1 001002   200006 756100                    STQ     IOS$,,AUTO
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:44   

      297     3327    3              NI$REQ=NI$REQ_INIT;

   3327  1 001003   200006 474500                    LDP4    IOS$,,AUTO
         1 001004   000100 100400                    MLR     fill='000'O
         1 001005   000000 000070 xsym               ADSC9   NI$REQ_INIT              cn=0,n=56
         1 001006   400000 000070                    ADSC9   0,,PR4                   cn=0,n=56

      298     3328        /*N* ADD THIS CODE IF ARRAY PROCESSOR IS SUPPORTED ON THE IMX
      299     3329                   IF HW_IMX THEN DO;
      300     3330                      MBX$=PINCRW(IOS$,%IMX_MBX_OFFSET);
      301     3331                      NI$IMXMBX=NI$IMXMBX_INIT;
      302     3332                      END;
      303     3333        */
      304     3334    3              END;

      305     3335    3           IF F$DCB.UBYTES~=0 THEN DO;

   3335  1 001007   200010 470500                    LDP0    DCB$,,AUTO
         1 001010   000076 235100                    LDA     62,,PR0
         1 001011   001023 600000 1                  TZE     s:3344

      306     3336    3              N$REQ.BUFADDR=BUFADDR;

   3336  1 001012   200016 236100                    LDQ     BUFADDR,,AUTO
         1 001013   200005 471500                    LDP1    IOQ$,,AUTO
         1 001014   100006 756100                    STQ     6,,PR1

      307     3337        /*N* PTP IS MOD 1, NOT MOD 64, FOR RPM - NEED TO CHANGE THIS  */
      308     3338    3              N$REQ.PTP=PTP;

   3338  1 001015   200017 235100                    LDA     PTP,,AUTO
         1 001016   100007 755100                    STA     7,,PR1

      309     3339        /*N* ADD THIS CODE IF ARRAY PROCESSOR IS SUPPORTED ON THE IMX
      310     3340                   IF NOT HW_IMX THEN
      311     3341        */
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:45   
      312     3342    3                 NI$REQ.PCW.PTP=PTP;

   3342  1 001017   200006 473500                    LDP3    IOS$,,AUTO
         1 001020   200017 236100                    LDQ     PTP,,AUTO
         1 001021   000011 736000                    QLS     9
         1 001022   300013 552130                    STBQ    11,'30'O,PR3

      313     3343    3              END;

      314     3344    2           IDCW$=ADDR(NIL);

   3344  1 001023   000001 236000 xsym               LDQ     B_VECTNIL+1
         1 001024   200011 756100                    STQ     IDCW$,,AUTO

      315     3345    2           DCWX=0;

   3345  1 001025   200013 450100                    STZ     DCWX,,AUTO

      316     3346    2           DCWXWRAP=SIZEW(NI$REQ.DCW);

   3346  1 001026   000010 235007                    LDA     8,DL
         1 001027   200014 755100                    STA     DCWXWRAP,,AUTO

      317     3347    2           IDCW='0001007'O;

   3347  1 001030   000001 236000 0                  LDQ     1
         1 001031   200020 756100                    STQ     IDCW,,AUTO

      318     3348    2           IDCW.DC=%AP_NOP;

   3348  1 001032   000000 236003                    LDQ     0,DU
         1 001033   200020 752140                    STCQ    IDCW,'40'O,AUTO

      319     3349    2           CALL STOREDCW(IDCW);

   3349  1 001034   200020 631500                    EPPR1   IDCW,,AUTO
         1 001035   200035 451500                    STP1    DCW+2,,AUTO
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:46   
         1 001036   001042 701000 1                  TSX1    STOREDCW
         1 001037   000000 011000                    NOP     0

      320     3350    2           RETURN;

   3350  1 001040   200026 221300                    LDX1  ! KEY+2,,AUTO
         1 001041   000001 702211                    TSX2  ! 1,X1

      321     3351
      322     3352    2   END GETQ;
      323     3353
      324     3354    1   STOREDCW: PROC(DCW);

   3354  1 001042   200034 741300       STOREDCW     STX1  ! DCW+1,,AUTO

      325     3355
      326     3356    2   DCL DCW BIT(36) ALIGNED;
      327     3357    2   DCL SAVEDCW BIT(36) ALIGNED;
      328     3358    2   DCL IOS1$ PTR;
      329     3359    2   DCL IOS2$ PTR;
      330     3360    2   DCL 1 IOS2 REDEF IOS2$,
      331     3361    2         2 WA UBIN(18) UNAL,
      332     3362    2         2 * BIT(18);
      333     3363    2   DCL X SBIN;
      334     3364
      335     3365    3           IF DCWX=DCWXWRAP THEN DO;

   3365  1 001043   200013 236100                    LDQ     DCWX,,AUTO
         1 001044   200014 116100                    CMPQ    DCWXWRAP,,AUTO
         1 001045   001117 601000 1                  TNZ     s:3380

      336     3366    3              X=DCWX-1;

   3366  1 001046   000001 136007                    SBLQ    1,DL
         1 001047   200041 756100                    STQ     X,,AUTO

      337     3367    3              SAVEDCW=NI$REQ.DCW(X);
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:47   

   3367  1 001050   200006 470500                    LDP0    IOS$,,AUTO
         1 001051   000002 236106                    LDQ     2,QL,PR0
         1 001052   200036 756100                    STQ     SAVEDCW,,AUTO

      338     3368    3              CALL NIQ$GETS(IOS1$);

   3368  1 001053   200037 631500                    EPPR1   IOS1$,,AUTO
         1 001054   200042 451500                    STP1    X+1,,AUTO
         1 001055   200042 630500                    EPPR0   X+1,,AUTO
         1 001056   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 001057   000000 701000 xent               TSX1    NIQ$GETS
         1 001060   000000 011000                    NOP     0

      339     3369    3              NI$REQ.FL$=IOS1$;

   3369  1 001061   200037 236100                    LDQ     IOS1$,,AUTO
         1 001062   200006 470500                    LDP0    IOS$,,AUTO
         1 001063   000000 756100                    STQ     0,,PR0

      340     3370    3              IOS2$=ADDR(IOS1$->NI$REQ.DCW);

   3370  1 001064   200037 236100                    LDQ     IOS1$,,AUTO
         1 001065   000002 036003                    ADLQ    2,DU
         1 001066   200040 756100                    STQ     IOS2$,,AUTO

      341     3371    3              NI$REQ.DCW(X)='000000020000'O;

   3371  1 001067   000002 236000 0                  LDQ     2
         1 001070   200006 470500                    LDP0    IOS$,,AUTO
         1 001071   200041 720100                    LXL0    X,,AUTO
         1 001072   000002 756110                    STQ     2,X0,PR0

      342     3372    3              NI$REQ.DCW.FWA(X)=IOS2.WA;

   3372  1 001073   200040 221100                    LDX1    IOS2$,,AUTO
         1 001074   200006 470500                    LDP0    IOS$,,AUTO
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:48   
         1 001075   000002 741110                    STX1    2,X0,PR0

      343     3373    3              IF IDCW$=ADDR(NI$REQ.DCW(X)) THEN

   3373  1 001076   200041 236100                    LDQ     X,,AUTO
         1 001077   000022 736000                    QLS     18
         1 001100   000002 036003                    ADLQ    2,DU
         1 001101   200006 036100                    ADLQ    IOS$,,AUTO
         1 001102   200011 116100                    CMPQ    IDCW$,,AUTO
         1 001103   001106 601000 1                  TNZ     s:3375

      344     3374    3                 IDCW$=IOS2$;

   3374  1 001104   200040 236100                    LDQ     IOS2$,,AUTO
         1 001105   200011 756100                    STQ     IDCW$,,AUTO

      345     3375    3              IOS$=IOS1$;

   3375  1 001106   200037 236100                    LDQ     IOS1$,,AUTO
         1 001107   200006 756100                    STQ     IOS$,,AUTO

      346     3376    3              NI$REQ.DCW(0)=SAVEDCW;

   3376  1 001110   200036 236100                    LDQ     SAVEDCW,,AUTO
         1 001111   200006 470500                    LDP0    IOS$,,AUTO
         1 001112   000002 756100                    STQ     2,,PR0

      347     3377    3              DCWX=1;

   3377  1 001113   000001 235007                    LDA     1,DL
         1 001114   200013 755100                    STA     DCWX,,AUTO

      348     3378    3              DCWXWRAP=SIZEW(NI$REQ.DCW);

   3378  1 001115   000010 235007                    LDA     8,DL
         1 001116   200014 755100                    STA     DCWXWRAP,,AUTO

PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:49   
      349     3379    3              END;

      350     3380    2           NI$REQ.DCW(DCWX)=DCW;

   3380  1 001117   200035 470500                    LDP0    @DCW,,AUTO
         1 001120   000000 236100                    LDQ     0,,PR0
         1 001121   200006 471500                    LDP1    IOS$,,AUTO
         1 001122   200013 720100                    LXL0    DCWX,,AUTO
         1 001123   100002 756110                    STQ     2,X0,PR1

      351     3381    3           IF NI$REQ.IDCW.SVN(DCWX)=7 THEN DO;

   3381  1 001124   200006 471500                    LDP1    IOS$,,AUTO
         1 001125   100002 236110                    LDQ     2,X0,PR1
         1 001126   700000 376007                    ANQ     -32768,DL
         1 001127   700000 116007                    CMPQ    -32768,DL
         1 001130   001144 601000 1                  TNZ     s:3386

      352     3382    3              IF IDCW$~=ADDR(NIL) THEN

   3382  1 001131   200011 236100                    LDQ     IDCW$,,AUTO
         1 001132   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 001133   001137 600000 1                  TZE     s:3384

      353     3383    3                 IDCWB.CONT='1'B;

   3383  1 001134   200011 473500                    LDP3    IDCW$,,AUTO
         1 001135   020000 236007                    LDQ     8192,DL
         1 001136   300000 256100                    ORSQ    0,,PR3

      354     3384    3              IDCW$=ADDR(NI$REQ.DCW(DCWX));

   3384  1 001137   200013 236100                    LDQ     DCWX,,AUTO
         1 001140   000022 736000                    QLS     18
         1 001141   000002 036003                    ADLQ    2,DU
         1 001142   200006 036100                    ADLQ    IOS$,,AUTO
         1 001143   200011 756100                    STQ     IDCW$,,AUTO
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:50   

      355     3385    3              END;

      356     3386    2           DCWX=DCWX+1;

   3386  1 001144   200013 054100                    AOS     DCWX,,AUTO

      357     3387    2           RETURN;

   3387  1 001145   200034 221300                    LDX1  ! DCW+1,,AUTO
         1 001146   000001 702211                    TSX2  ! 1,X1

      358     3388
      359     3389    2   END STOREDCW;
      360     3390
      361     3391    1   BLDDCW: PROC(F,S);

   3391  1 001147   200026 741300       BLDDCW       STX1  ! KEY+2,,AUTO

      362     3392
      363     3393    2   DCL F UBIN;
      364     3394    2   DCL S UBIN;
      365     3395    2   DCL FWA UBIN;
      366     3396    2   DCL SIZE SBIN;
      367     3397    2   DCL 1 DCW ALIGNED,
      368     3398    2         2 FWA UBIN(18) UNAL,
      369     3399    2         2 ICP UBIN(4) UNAL,
      370     3400    2         2 TYPE UBIN(2) UNAL,
      371     3401    2         2 TALLY UBIN(12) UNAL;
      372     3402
      373     3403    2           FWA=F;

   3403  1 001150   200027 470500                    LDP0    @F,,AUTO
         1 001151   000000 235100                    LDA     0,,PR0
         1 001152   200031 755100                    STA     FWA,,AUTO

      374     3404    2           SIZE=S;
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:51   

   3404  1 001153   200030 471500                    LDP1    @S,,AUTO
         1 001154   100000 235100                    LDA     0,,PR1
         1 001155   200032 755100                    STA     SIZE,,AUTO

      375     3405    3           DO WHILE(SIZE>0);

   3405  1 001156   001204 604400 1                  TMOZ    s:3418

      376     3406    4              IF SIZE<=4096 THEN DO;

   3406  1 001157   200032 235100                    LDA     SIZE,,AUTO
         1 001160   010000 115007                    CMPA    4096,DL
         1 001161   001166 605400 1                  TPNZ    s:3411

      377     3407    4                 DCW='0'B;

   3407  1 001162   200033 450100                    STZ     DCW,,AUTO

      378     3408    4                 DCW.TALLY=SIZE;

   3408  1 001163   200032 236100                    LDQ     SIZE,,AUTO
         1 001164   200033 752103                    STCQ    DCW,'03'O,AUTO

      379     3409    4                 END;

   3409  1 001165   001170 710000 1                  TRA     s:3413

      380     3410    4              ELSE DO;

      381     3411    4                 DCW='000000010000'O;

   3411  1 001166   000003 236000 0                  LDQ     3
         1 001167   200033 756100                    STQ     DCW,,AUTO

      382     3412    4                 END;

PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:52   
      383     3413    3              DCW.FWA=FWA;

   3413  1 001170   200031 720100                    LXL0    FWA,,AUTO
         1 001171   200033 740100                    STX0    DCW,,AUTO

      384     3414    3              CALL STOREDCW(DCW);

   3414  1 001172   200033 630500                    EPPR0   DCW,,AUTO
         1 001173   200035 450500                    STP0    @DCW,,AUTO
         1 001174   001042 701000 1                  TSX1    STOREDCW
         1 001175   000000 011000                    NOP     0

      385     3415    3              FWA=FWA+4096;

   3415  1 001176   200031 235100                    LDA     FWA,,AUTO
         1 001177   010000 035007                    ADLA    4096,DL
         1 001200   200031 755100                    STA     FWA,,AUTO

      386     3416    3              SIZE=SIZE-4096;

   3416  1 001201   010000 336007                    LCQ     4096,DL
         1 001202   200032 056100                    ASQ     SIZE,,AUTO

      387     3417    3              END;

   3417  1 001203   001157 605400 1                  TPNZ    s:3406

      388     3418    2           RETURN;

   3418  1 001204   200026 221300                    LDX1  ! KEY+2,,AUTO
         1 001205   000001 702211                    TSX2  ! 1,X1

      389     3419
      390     3420    2   END BLDDCW;
      391     3421
      392     3422    1   SETERR: PROC(CODE,SEV);

PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:53   
   3422  1 001206   200026 741300       SETERR       STX1  ! KEY+2,,AUTO

      393     3423
      394     3424    2   DCL CODE UBIN;
      395     3425    2   DCL SEV UBIN;
      396     3426
      397     3427    2           B$JIT.ERR='160111400000'O;

   3427  1 001207   000004 236000 0                  LDQ     4
         1 001210   000000 470400 xsym               LDP0    B$JIT$
         1 001211   000012 756100                    STQ     10,,PR0

      398     3428    2           B$JIT.ERR.CODE=CODE;

   3428  1 001212   200027 471500                    LDP1    @CODE,,AUTO
         1 001213   100000 236100                    LDQ     0,,PR1
         1 001214   000003 736000                    QLS     3
         1 001215   000012 676100                    ERQ     10,,PR0
         1 001216   377770 376007                    ANQ     131064,DL
         1 001217   000012 656100                    ERSQ    10,,PR0

      399     3429    2           B$JIT.ERR.SEV=SEV;

   3429  1 001220   200030 473500                    LDP3    @SEV,,AUTO
         1 001221   300000 236100                    LDQ     0,,PR3
         1 001222   000012 676100                    ERQ     10,,PR0
         1 001223   000007 376007                    ANQ     7,DL
         1 001224   000012 656100                    ERSQ    10,,PR0

      400     3430    2           CALL UDB$PMMEXIT;

   3430  1 001225   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 001226   000000 701000 xent               TSX1    UDB$PMMEXIT
         1 001227   000000 011000                    NOP     0

      401     3431
      402     3432    2   END SETERR;
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:54   

   3432  1 001230   200026 221300                    LDX1  ! KEY+2,,AUTO
         1 001231   000001 702211                    TSX2  ! 1,X1

(unnamed)
 Sect OctLoc
   0     000   000000 020001   000100 700000   000000 020000   000000 010000    .....@..........
   0     004   160111 400000                                                    pI..

(unnamed)
 Sect OctLoc
   2     000   000000 000070   000004 006000   000000 006000   000000 006000    ...8............
   2     004   000000 000077   000004 006000   000015 006000   000000 000111    ...?...........I
   2     010   000007 006000   000011 006000   000003 006000   777777 600777    ................
      403     3433
      404     3434    1   END NAI$WRITE ;

PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:55   
--  Include file information  --

   HF_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   N_FC_C.:E05TOU  is referenced.
   NI_DATA_C.:E05TOU  is referenced.
   NI_DEVCMD_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   F$CP6V_C.:E05TOU  is referenced.
   F_FMTCODE_C.:E05TOU  is referenced.
   F_FPTCODE_C.:E05TOU  is referenced.
      No diagnostics issued in procedure NAI$WRITE.
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:56   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    27-0-0/w PTR         r     1 @CODE                     35-0-0/w PTR         r     1 @DCW
    27-0-0/w PTR         r     1 @F                         3-0-0/w PTR         r     1 @FPTCODE
    30-0-0/w PTR         r     1 @S                        30-0-0/w PTR         r     1 @SEV
    16-0-0/w UBIN        r     1 BUFADDR                   *0-0-0/w UBIN        r     1 CODE
    10-0-0/w PTR         r     1 DCB$                       7-0-0/w PTR         r     1 DCT$
    *0-0-0/w BIT         r     1 DCW                       33-0-0/w STRC        r     1 DCW
    13-0-0/w SBIN        r     1 DCWX                      14-0-0/w SBIN        r     1 DCWXWRAP
    *0-0-0/w UBIN        r     1 F                         *0-0-0/w UBIN        r     1 FPTCODE
    31-0-0/w UBIN        r     1 FWA                       22-0-0/w STRC(72)    r     1 HCSR
    15-0-0/w UBIN        r     1 HCSRADDR                   4-0-0/w UBIN        r     1 I
    20-0-0/w STRC        r     1 IDCW                      11-0-0/w PTR         r     1 IDCW$
     5-0-0/w PTR         r     1 IOQ$                       6-0-0/w PTR         r     1 IOS$
    37-0-0/w PTR         r     1 IOS1$                     40-0-0/w STRC        r     1 IOS2
    40-0-0/w PTR         r     1 IOS2$                     24-0-0/c STRC(18)    r     1 KEY
    12-0-0/w PTR         r     1 MBX$                      17-0-0/w UBIN        r     1 PTP
    *0-0-0/w UBIN        r     1 S                         36-0-0/w BIT         r     1 SAVEDCW
    *0-0-0/w UBIN        r     1 SEV                       32-0-0/w SBIN        r     1 SIZE
    21-0-0/w STRC        r     1 TDCW                      41-0-0/w SBIN        r     1 X

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$JIT$                     0-0-0/w PTR         r     1 B$LOWMEM$
     0-0-0/w PTR         r     1 B$PS0$                     0-0-0/w PTR         r     1 B$PS1$
     0-0-0/w PTR         r     1 KEY$                       0-0-0/w PTR         r     1 N$DCT$$
     0-0-0/w PTR         r     1 N$FQ$                      0-0-0/w PTR         r     1 NI$FQ$
     0-0-0/w PTR         r     1 NI$IBUF$                   0-0-0/d STRC(504)   r     1 NI$REQ_INIT
     0-0-0/w PTR         r     1 NI$RP$                     0-0-0/w PTR         r     1 V$
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:57   

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(8856)  r     1 B$JIT                      0-0-0/c CHAR(8)     r     1 CHAR8
     0-0-0/c BIT (72)    r     1 CHAR8B                     0-0-0/d ASTR(3528)  r     1 F$DCB
     0-0-0/w STRC        r     1 IDCWB                      0-0-0/w PTR         r     1 N$DCT$(0:0)
     0-0-0/d STRC(1080)  r     1 N$REQ                      0-0-0/w STRC(1332)  r     1 NI$DCT
     0-0-0/d STRC(504)   r     1 NI$REQ                     0-0-0/c STRC(18)    r     1 PKEY
     0-0-0/d STRC(144)   r     1 WRITEV


   Procedure NAI$WRITE requires 666 words for executable code.
   Procedure NAI$WRITE requires 40 words of local(AUTO) storage.

    No errors detected in file NAI$IO.:E05TSI    .
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:58   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:59   
          MINI XREF LISTING

B$JIT.CPFLAGS1.SLEAZE
      1554**DCL      1554--REDEF
B$JIT.DCB$
      1628**DCL      3144>>ASSIGN   3258>>ASSIGN   3293>>ASSIGN
B$JIT.ERR
      1460**DCL      3244<>CALL     3282<>CALL     3306<>CALL     3427<<ASSIGN
B$JIT.ERR.CODE
      1461**DCL      3428<<ASSIGN
B$JIT.ERR.MID
      1461**DCL      1461--REDEF
B$JIT.ERR.SEV
      1461**DCL      3429<<ASSIGN
B$JIT.JRESPEAK
      1622**DCL      1623--REDEF
B$JIT.ORIGINATOR_PORT.FROM_CR
      1731**DCL      1731--REDEF    1732--REDEF
B$JIT.PNR
      1635**DCL      1635--REDEF
B$JIT.TSLINE
      1729**DCL      1730--REDEF
B$JIT$
      3123**DCL      1455--IMP-PTR  3144>>ASSIGN   3244>>CALL     3258>>ASSIGN   3282>>CALL     3293>>ASSIGN
      3306>>CALL     3427>>ASSIGN   3428>>ASSIGN   3429>>ASSIGN
B$LOWMEM$
      3122**DCL      3219>>ASSIGN   3226>>ASSIGN   3270>>ASSIGN   3300>>ASSIGN
B$PS0$
      3116**DCL      3117--REDEF
B$PS1$
      3118**DCL      3119--REDEF
B$PS2$
      3120**DCL      3121--REDEF
BLDDCW
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:60   
      3391**PROC     3223--CALL     3240--CALL     3273--CALL     3276--CALL     3279--CALL     3303--CALL
BUFADDR
      2927**DCL      3163<>CALL     3166<<ASSIGN   3180>>IF       3240>>CALL     3336>>ASSIGN
CHAR8
      3132**DCL      3203>>ASSIGN
CHAR8B
      3133**DCL      3216>>ASSIGN
CODE IN PROCEDURE SETERR
      3424**DCL      3422--PROC     3428>>ASSIGN
DCB$
      2921**DCL      3144<<ASSIGN   3145>>ASSIGN   3162>>IF       3163>>CALL     3172>>CALL     3173>>ASSIGN
      3175>>IF       3175>>ASSIGN   3177>>IF       3177>>ASSIGN   3180>>IF       3187>>IF       3195>>IF
      3203>>ASSIGN   3203>>ASSIGN   3206>>ASSIGN   3207>>ASSIGN   3211>>ASSIGN   3216>>ASSIGN   3224>>IF
      3239>>IF       3240>>CALL     3241>>ASSIGN   3243>>IF       3244>>CALL     3258<<ASSIGN   3259>>ASSIGN
      3281>>IF       3282>>CALL     3293<<ASSIGN   3294>>ASSIGN   3305>>IF       3306>>CALL     3312>>ASSIGN
      3315>>ASSIGN   3316>>ASSIGN   3317>>ASSIGN   3335>>IF
DCT$
      2920**DCL      3067--IMP-PTR  3145<<ASSIGN   3204>>ASSIGN   3205>>ASSIGN   3214>>IF       3220>>ASSIGN
      3221>>ASSIGN   3229>>ASSIGN   3261>>ASSIGN   3263>>ASSIGN   3267>>ASSIGN   3296>>ASSIGN   3298>>ASSIGN
      3299>>ASSIGN   3319<<ASSIGN
DCW IN PROCEDURE BLDDCW
      3397**DCL      3407<<ASSIGN   3411<<ASSIGN   3414<>CALL
DCW.FWA IN PROCEDURE BLDDCW
      3398**DCL      3413<<ASSIGN
DCW.TALLY IN PROCEDURE BLDDCW
      3401**DCL      3408<<ASSIGN
DCW IN PROCEDURE STOREDCW
      3356**DCL      3354--PROC     3380>>ASSIGN
DCWX
      2924**DCL      3226>>ASSIGN   3345<<ASSIGN   3365>>IF       3366>>ASSIGN   3377<<ASSIGN   3380>>ASSIGN
      3381>>IF       3384>>ASSIGN   3386<<ASSIGN   3386>>ASSIGN
DCWXWRAP
      2925**DCL      3215<<ASSIGN   3262<<ASSIGN   3297<<ASSIGN   3346<<ASSIGN   3365>>IF       3378<<ASSIGN
F IN PROCEDURE BLDDCW
      3393**DCL      3391--PROC     3403>>ASSIGN
F$DCB.ACTPOS
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:61   
       340**DCL       340--REDEF
F$DCB.ARS
       315**DCL       315--REDEF
F$DCB.ATTR
       333**DCL       334--REDEF
F$DCB.BORROW
       348**DCL       348--REDEF     348--REDEF     348--REDEF
F$DCB.CONT
       347**DCL      3187>>IF       3206<<ASSIGN   3241<<ASSIGN
F$DCB.DCBNAME.L
       362**DCL       362--IMP-SIZ
F$DCB.EOMCHAR
       319**DCL       319--REDEF
F$DCB.FLDID
       343**DCL       343--REDEF
F$DCB.FORM$
       337**DCL       337--REDEF
F$DCB.FSECT
       353**DCL       353--REDEF
F$DCB.FSN
       330**DCL       330--REDEF     330--REDEF     331--REDEF
F$DCB.HEADER$
       336**DCL       336--REDEF
F$DCB.IXTNSIZE
       334**DCL       334--REDEF
F$DCB.LASTSTA$
       324**DCL       324--REDEF
F$DCB.LVL
       349**DCL       349--REDEF
F$DCB.NAME.C
       324**DCL       324--REDEF
F$DCB.NOEOF
       345**DCL       345--REDEF
F$DCB.NRECS
       335**DCL       335--REDEF
F$DCB.NRECX
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:62   
       354**DCL       354--REDEF
F$DCB.OHDR
       346**DCL       346--REDEF
F$DCB.ORG
       329**DCL       329--REDEF
F$DCB.PASS
       325**DCL      3203<<ASSIGN   3216--ASSIGN
F$DCB.PRECNO
       352**DCL       352--REDEF
F$DCB.RCSZ
       357**DCL       357--REDEF
F$DCB.RES
       325**DCL       325--REDEF
F$DCB.SETX
       337**DCL       337--REDEF    3145>>ASSIGN   3312>>ASSIGN
F$DCB.TAB$
       336**DCL       337--REDEF
F$DCB.TDA
       351**DCL       351--REDEF
F$DCB.TDSTAT
       326**DCL      3207<<ASSIGN
F$DCB.TYC
       315**DCL      3244<>CALL     3282<>CALL     3306<>CALL
F$DCB.TYC.EGV
       315**DCL      3243>>IF       3281>>IF       3305>>IF
F$DCB.UB$
       353**DCL      3163<>CALL     3172<>CALL     3203>>ASSIGN
F$DCB.UBYTES
       353**DCL      3162>>IF       3173<<ASSIGN   3175>>IF       3175<<ASSIGN   3177>>IF       3177<<ASSIGN
      3180>>IF       3195>>IF       3224>>IF       3239>>IF       3240>>CALL     3335>>IF
F$DCB.WAIT
       347**DCL      3211<<ASSIGN   3259<<ASSIGN   3294<<ASSIGN   3315>>ASSIGN   3316>>ASSIGN
F$DCB.WSN
       326**DCL       326--REDEF
FMF$TYC
      2907**DCL-ENT  3244--CALL     3282--CALL     3306--CALL
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:63   
FPTCODE
        16**DCL         8--PROC     3146>>IF
FWA IN PROCEDURE BLDDCW
      3395**DCL      3403<<ASSIGN   3413>>ASSIGN   3415<<ASSIGN   3415>>ASSIGN
GETQ
      3309**PROC     3212--CALL     3260--CALL     3295--CALL
HCSR
      2941**DCL      3216<<ASSIGN   3264<<ASSIGN
HCSR.HCSR1
      2951**DCL      3218>>ASSIGN   3269>>ASSIGN
HCSR.HCSR1.CHAN
      2952**DCL      3267<<ASSIGN
HCSR.HCSRU
      2942**DCL      3217>>ASSIGN   3268>>ASSIGN
HCSR.HCSRU.CMD
      2947**DCL      3266<<ASSIGN
HCSR.HCSRU.CNTRL.UNEXHW
      2946**DCL      3265<<ASSIGN
HCSRADDR
      2926**DCL      3219<<ASSIGN   3223<>CALL     3270<<ASSIGN   3273>>CALL     3276<>CALL     3279<>CALL
      3300<<ASSIGN   3303<>CALL
HFF$DSIZ
      2908**DCL-ENT  3153--CALL
HFF$WRITE1
      2909**DCL-ENT  3172--CALL
I
      2917**DCL      3153<>CALL     3154>>IF
IDCW
      2929**DCL      3222<>CALL     3238<>CALL     3272<>CALL     3275<>CALL     3278<>CALL     3302<>CALL
      3347<<ASSIGN   3349<>CALL
IDCW.DC
      2930**DCL      3220<<ASSIGN   3235<<ASSIGN   3271<<ASSIGN   3274<<ASSIGN   3277<<ASSIGN   3301<<ASSIGN
      3348<<ASSIGN
IDCW.DD#
      2937**DCL      3221<<ASSIGN   3236<<ASSIGN
IDCW.SPLIT
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:64   
      2936**DCL      3237<<ASSIGN
IDCW$
      2922**DCL      3106--IMP-PTR  3344<<ASSIGN   3373>>IF       3374<<ASSIGN   3382>>IF       3383>>ASSIGN
      3384<<ASSIGN
IDCWB.CONT
      3112**DCL      3383<<ASSIGN
IOQ$
      2918**DCL      2963--IMP-PTR  3232>>ASSIGN   3242>>CALL     3263>>ASSIGN   3280>>CALL     3298>>ASSIGN
      3304>>CALL     3311<>CALL     3312>>ASSIGN   3313>>ASSIGN   3314>>ASSIGN   3315>>ASSIGN   3316>>ASSIGN
      3317>>ASSIGN   3318>>ASSIGN   3319>>ASSIGN   3320>>IF       3322>>ASSIGN   3323>>ASSIGN   3326>>ASSIGN
      3336>>ASSIGN   3338>>ASSIGN
IOS$
      2919**DCL      3021--IMP-PTR  3217>>ASSIGN   3218>>ASSIGN   3219>>ASSIGN   3226>>ASSIGN   3268>>ASSIGN
      3269>>ASSIGN   3270>>ASSIGN   3299>>ASSIGN   3300>>ASSIGN   3321<>CALL     3322>>ASSIGN   3326<<ASSIGN
      3327>>ASSIGN   3342>>ASSIGN   3367>>ASSIGN   3369>>ASSIGN   3371>>ASSIGN   3372>>ASSIGN   3373>>IF
      3375<<ASSIGN   3376>>ASSIGN   3380>>ASSIGN   3381>>IF       3384>>ASSIGN
IOS1$ IN PROCEDURE STOREDCW
      3358**DCL      3368<>CALL     3369>>ASSIGN   3370>>ASSIGN   3375>>ASSIGN
IOS2.WA IN PROCEDURE STOREDCW
      3361**DCL      3372>>ASSIGN
IOS2$ IN PROCEDURE STOREDCW
      3359**DCL      3360--REDEF    3370<<ASSIGN   3374>>ASSIGN
KEY
      3129**DCL      3154--IF       3160<<ASSIGN
KEY.DC
      3130**DCL      3170>>DOCASE   3188>>IF       3204>>ASSIGN   3235>>ASSIGN
KEY.DD
      3131**DCL      3205>>ASSIGN   3236>>ASSIGN
KEY$
      3119**DCL      3125--IMP-PTR  3153<>CALL     3160>>ASSIGN
MBX$
      2923**DCL      3046--IMP-PTR
N$DCT$
       795**DCL      3145>>ASSIGN   3319>>ASSIGN
N$DCT$$
       661**DCL       795--IMP-PTR  3145>>ASSIGN   3319>>ASSIGN
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:65   
N$FQ$
       661**DCL       796--IMP-PTR
N$REQ
      2963**DCL      3242<>CALL     3280<>CALL     3304<>CALL
N$REQ.BUFADDR
      2972**DCL      2973--REDEF    2973--REDEF    3336<<ASSIGN
N$REQ.COMP
      2997**DCL      3318<<ASSIGN
N$REQ.DCB$
      2994**DCL      3317<<ASSIGN
N$REQ.DLA.DCTX
      2963**DCL      3263<<ASSIGN   3298<<ASSIGN   3312<<ASSIGN   3319>>ASSIGN
N$REQ.DLA.DRELADDR
      2964**DCL      2964--REDEF
N$REQ.DVE.EOMCHAR
      3001**DCL      3002--REDEF
N$REQ.EAINFO
      2995**DCL      2995--REDEF
N$REQ.EAINFOX
      2995**DCL      2996--REDEF
N$REQ.EVNTINFO
      2996**DCL      2996--REDEF
N$REQ.FC
      2966**DCL      3313<<ASSIGN
N$REQ.IOFLG.IOS
      2967**DCL      3320>>IF       3323<<ASSIGN
N$REQ.IOFLG.LPW23
      2967**DCL      3232<<ASSIGN
N$REQ.IOS$
      2976**DCL      3322<<ASSIGN   3326>>ASSIGN
N$REQ.NWIO
      3002**DCL      3316<<ASSIGN
N$REQ.OPFLG
      2969**DCL      3314<<ASSIGN
N$REQ.OPFLG.WAIT
      2970**DCL      3315<<ASSIGN
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:66   
N$REQ.PTP
      2974**DCL      3338<<ASSIGN
N$REQ.STATUS
      2977**DCL      2983--REDEF
N$REQ_INIT.BUFADDR
       680**DCL       681--REDEF     681--REDEF
N$REQ_INIT.DLA.DRELADDR
       672**DCL       672--REDEF
N$REQ_INIT.DVE.EOMCHAR
       709**DCL       710--REDEF
N$REQ_INIT.EAINFO
       703**DCL       703--REDEF
N$REQ_INIT.EAINFOX
       703**DCL       704--REDEF
N$REQ_INIT.EVNTINFO
       704**DCL       704--REDEF
N$REQ_INIT.STATUS
       685**DCL       691--REDEF
NI$DCT.AP.CDCTX
      3101**DCL      3263>>ASSIGN   3298>>ASSIGN
NI$DCT.AP.CHAN
      3101**DCL      3267>>ASSIGN   3299>>ASSIGN
NI$DCT.AP.CONT
      3101**DCL      3214>>IF       3229<<ASSIGN   3261<<ASSIGN   3296<<ASSIGN
NI$DCT.AP.CONT.DC
      3101**DCL      3204<<ASSIGN   3220>>ASSIGN
NI$DCT.AP.CONT.DD
      3101**DCL      3205<<ASSIGN   3221>>ASSIGN
NI$DCT.DP
      3087**DCL      3094--REDEF    3097--REDEF    3098--REDEF    3100--REDEF    3100--REDEF    3101--REDEF
      3102--REDEF    3102--REDEF
NI$DCT.MPC.IOCHANX
      3095**DCL      3095--REDEF
NI$FQ$
       721**DCL       797--IMP-PTR
NI$IBUF$
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:67   
       721**DCL       797--IMP-PTR
NI$IMXMBX.PAGED_BASE
      3046**DCL      3047--REDEF    3047--REDEF
NI$IMXMBX.SIZE
      3048**DCL      3048--REDEF
NI$IMXMBX_INIT.PAGED_BASE
       731**DCL       732--REDEF     732--REDEF
NI$IMXMBX_INIT.SIZE
       733**DCL       733--REDEF
NI$REQ
      3021**DCL      3327<<ASSIGN
NI$REQ.DCW
      3023**DCL      3026--REDEF    3217<<ASSIGN   3218<<ASSIGN   3219--ASSIGN   3226--ASSIGN   3268<<ASSIGN
      3269<<ASSIGN   3270--ASSIGN   3299<<ASSIGN   3300--ASSIGN   3346--ASSIGN   3367>>ASSIGN   3370--ASSIGN
      3371<<ASSIGN   3373--IF       3376<<ASSIGN   3378--ASSIGN   3380<<ASSIGN   3384--ASSIGN
NI$REQ.DCW.FWA
      3023**DCL      3372<<ASSIGN
NI$REQ.DCW.TALLY
      3024**DCL      3024--REDEF
NI$REQ.FL$
      3021**DCL      3369<<ASSIGN
NI$REQ.IDCW.EXTA
      3026**DCL      3026--REDEF
NI$REQ.IDCW.SVN
      3027**DCL      3381>>IF
NI$REQ.PCW
      3028**DCL      3032--REDEF
NI$REQ.PCW.PTP
      3032**DCL      3342<<ASSIGN
NI$REQ.SEEK
      3033**DCL      3034--REDEF    3035--REDEF
NI$REQ_INIT
       753**DCL      3327>>ASSIGN
NI$REQ_INIT.DCW
       755**DCL       758--REDEF
NI$REQ_INIT.DCW.TALLY
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:68   
       756**DCL       756--REDEF
NI$REQ_INIT.IDCW.EXTA
       758**DCL       758--REDEF
NI$REQ_INIT.PCW
       760**DCL       764--REDEF
NI$REQ_INIT.SEEK
       765**DCL       766--REDEF     767--REDEF
NI$RP$
       769**DCL       799--IMP-PTR
NIM$CVTPTR
      2910**DCL-ENT  3163--CALL
NIO$QUE
      2911**DCL-ENT  3242--CALL     3280--CALL     3304--CALL
NIQ$GET
      2912**DCL-ENT  3311--CALL
NIQ$GETS
      2914**DCL-ENT  3321--CALL     3368--CALL
NI_MBX_INIT.DCW.CONTROL.AE
       791**DCL       791--REDEF
NI_MBX_INIT.LPW.CONTROL.AE
       787**DCL       787--REDEF
PKEY
      3125**DCL      3160>>ASSIGN
PTP
      2928**DCL      3163<>CALL     3167<<ASSIGN   3338>>ASSIGN   3342>>ASSIGN
S IN PROCEDURE BLDDCW
      3394**DCL      3391--PROC     3404>>ASSIGN
SAVEDCW IN PROCEDURE STOREDCW
      3357**DCL      3367<<ASSIGN   3376>>ASSIGN
SETERR
      3422**PROC     3147--CALL     3155--CALL     3181--CALL     3189--CALL     3196--CALL
SEV IN PROCEDURE SETERR
      3425**DCL      3422--PROC     3429>>ASSIGN
SIZE IN PROCEDURE BLDDCW
      3396**DCL      3404<<ASSIGN   3405>>DOWHILE  3406>>IF       3408>>ASSIGN   3416<<ASSIGN   3416>>ASSIGN
STOREDCW
PL6.E3A0      #001=NAI$WRITE File=NAI$IO.:E05TSI                                 WED 07/30/97 03:25 Page:69   
      3354**PROC     3222--CALL     3227--CALL     3238--CALL     3272--CALL     3275--CALL     3278--CALL
      3302--CALL     3349--CALL     3414--CALL
TDCW
      2938**DCL      3225<<ASSIGN   3227<>CALL
TDCW.WA
      2939**DCL      3226<<ASSIGN
UDB$PMMEXIT
      2915**DCL-ENT  3245--CALL     3430--CALL
V$
      3117**DCL      3136--IMP-PTR  3187>>IF       3211>>ASSIGN   3211>>ASSIGN   3237>>ASSIGN   3241>>ASSIGN
WRITEV.DVBYTE.CONT
      3138**DCL      3187>>IF       3211>>ASSIGN   3237>>ASSIGN   3241>>ASSIGN
WRITEV.DVBYTE.VFC
      3138**DCL      3138--REDEF
WRITEV.WAIT
      3136**DCL      3211>>ASSIGN
X IN PROCEDURE STOREDCW
      3363**DCL      3366<<ASSIGN   3367>>ASSIGN   3371>>ASSIGN   3372>>ASSIGN   3373>>IF
