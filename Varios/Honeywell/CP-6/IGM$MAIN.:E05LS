VERSION E05

PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:1    
        1        1        /*M* IGM$MAIN GHOST1 MAIN MODULE           */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* PLM=3,IND=5,MEC,MOC,EXM=10,CLM=30,CRM=78 */
        8        8        /**/
        9        9        /**/
       10       10        IGM$MAIN: PROC MAIN;
       11       11        /**/
       12       12        /**/
       13       13        %INCLUDE CP_6;
       14       94        %INCLUDE B_SEGIDS_C;          /* SYSTEM SEGID DEFINITIONS                   */
       15      633        %INCLUDE M_INFO_C;
       16      773        %INCLUDE I_SUBS_C;
       17      797        %INCLUDE CP_6_SUBS;
       18     1337        %INCLUDE B_ERRORS_C;
       19     2464        %INCLUDE B$JIT;
       20     2754        %INCLUDE FOO_MAC_C;
       21     3502        %INCLUDE JM$STRUCT;
       22     4247        /**/
       23     4248        /**/
       24     4249    1   DCL IGS$SYSMAK ENTRY;
       25     4250    1   DCL IGT$TDFILE ENTRY;
       26     4251    1   DCL IGL$HLP ENTRY;
       27     4252    1   DCL IGJ$JOBSTATS ENTRY(2);
       28     4253    1   DCL IGN$SYSID ENTRY(1);
       29     4254    1   DCL IGG$GETFILES ENTRY(1);
       30     4255    1   DCL IGR$RECOVERY ENTRY;
       31     4256    1   DCL IGR$PATCHF ENTRY;
       32     4257        /**/
       33     4258    1   DCL M$CONFG DCB;
       34     4259        /**/
       35     4260    1   DCL IT_BOOTFLAG UBIN WORD SYMREF;
       36     4261    1   DCL B_CNTRL_LOW UBIN WORD SYMREF;
       37     4262    1   DCL B_CNTRL_HIGH UBIN WORD SYMREF;
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:2    
       38     4263    1   DCL PPUT_DESC DSCR STATIC SYMDEF;
       39     4264    1   DCL PPUT$ PTR STATIC SYMDEF INIT(ADDR(NIL));
       40     4265    1   DCL 1 PPUT_REDEF REDEF PPUT$,
       41     4266    1         2 *      BIT(24),
       42     4267    1         2 SID    BIT(12);
       43     4268    1   DCL JM_PT UBIN WORD SYMREF;   /* SYMREF TO GET ADDRESS                      */
       44     4269    1   DCL S_SYSID UBIN SYMREF;
       45     4270        /**/
       46     4271    1   DCL B$JIT$ PTR SYMREF;
       47     4272    1   DCL B$IS$ PTR SYMREF;
       48     4273    1   DCL IP_WSQ0PT BIT(1) ALIGNED STATIC SYMDEF;
       49     4274    1   DCL HW_WSQ0PT BIT(1) ALIGNED SYMREF;
       50     4275    1   DCL IP_PTB_UNITS UBIN WORD ALIGNED STATIC SYMDEF;
       51     4276    1   DCL HW_PTB_UNITS UBIN WORD ALIGNED SYMREF;
       52     4277        /**/
       53     4278    1   DCL ERRCODE BIT(36) SYMREF;
       54     4279    1   DCL 1 ERRBUF SYMREF,
       55     4280    1         2 CRLF BIT(36) UNAL,
       56     4281    1         2 TEXT CHAR(120) UNAL;
       57     4282    1   DCL ABIT BIT(1) BASED ALIGNED;
       58     4283        %JM_PART (FPTN=JM$PT,STCLASS=BASED);
       59     4338    1   DCL 1 B$PTR BASED ALIGNED,
       60     4339    1         2 OFFSET UBIN(24) UNAL,
       61     4340    1         2 SID BIT(12) UNAL;
       62     4341    1   DCL B$WORD UBIN WORD BASED ALIGNED;
       63     4342    1   DCL B$BIT BIT(1) BASED ALIGNED;
       64     4343    1   DCL IG_BOOTFLAG UBIN WORD STATIC SYMDEF;
       65     4344                                      /* Copy of IT_BOOTFLAG from Monitor Data      */
       66     4345    1   DCL TPTR$$ PTR CONSTANT INIT(ADDR(TPTR$));
       67     4346    1   DCL P$ PTR;
       68     4347    1   DCL PP UBIN;
       69     4348    1   DCL VP UBIN;
       70     4349    1   DCL PPUT_OFFSET UBIN;         /* Offset from begining of WSQ                */
       71     4350    1   DCL TPTR$ PTR STATIC;
       72     4351    1   DCL I UBIN WORD STATIC;
       73     4352    1   DCL PATCH (0:127) UBIN STATIC SYMDEF INIT(0*128);
       74     4353        /**/
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:3    
       75     4354    1   DCL 1 CNTRLKEY STATIC,
       76     4355    1         2 COUNT UBIN(9) UNAL INIT(3),
       77     4356    1         2 ONE UBIN(27) UNAL INIT(1000);
       78     4357        /**/
       79     4358        %FO_CITE(FPTN=FO_CITE,STCLASS=STATIC,TYP=GMSY);
       80     4417        /**/
       81     4418        %VLP_NAME (FPTN = CNTRLFILE,
       82     4419                 NAME = ':CNTRL',
       83     4420                 LEN = 6);
       84     4447        /**/
       85     4448        %VLP_ACCT (FPTN = SYSACCT,
       86     4449                 ACCT = ':SYS');
       87     4462        /**/
       88     4463        %FPT_SAD(FPTN=SEE_MONITOR,USERSID=%SPCL1SID,MONSID=%ISSID);
       89     4478        %FPT_SAD(FPTN=SEE_TIGR,USERSID=%SPCL2SID,MONSID=%TIGRSID);
       90     4493        %FPT_SAD(FPTN=SEE_PPUT,USERSID=%SPCL3SID,MONSID=%PPUTSID);
       91     4508        %FPT_SAD(FPTN=SEE_DVTS,USERSID=%SPCL5SID,MONSID=%DVTTBLSID);
       92     4523        %FPT_CVM (FPTN=PPUT_CVM);
       93     4539        /**/
       94     4540        %FPT_OPEN (FPTN = CNTRL_OPEN,
       95     4541                 DCB = M$CONFG,
       96     4542                 ASN = FILE,
       97     4543                 SCRUB = YES,
       98     4544                 DISP=NAMED,
       99     4545                 ACS = DIRECT,
      100     4546                 ORG = KEYED,
      101     4547                ACCESS=RDONLY,
      102     4548                ACSVEH=VEHICLE,
      103     4549                 NAME = CNTRLFILE,
      104     4550                 ACCT = SYSACCT);
      105     4659        /**/
      106     4660        %FPT_READ (FPTN = CNTRL_READ,
      107     4661                 DCB = M$CONFG,
      108     4662                 KEYS = YES,
      109     4663                 KEY = CNTRLKEY);
      110     4702        /**/
      111     4703        %FPT_WRITE (FPTN = CNTRL_WRITE,
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:4    
      112     4704                 DCB = M$CONFG,
      113     4705                 KEY = CNTRLKEY);
      114     4736        /**/
      115     4737        %FPT_CLOSE (FPTN = CNTRL_CLOSE,
      116     4738                 DCB = M$CONFG,
      117     4739                 DISP = SAVE);
      118     4781        /**/
      119     4782        %VLP_ATTR(FPTN = VEHICLE);
      120     4796        %VLP_ACSVEH(READ=YES,UPD=YES,VEHICLE='CONTROL',LAST=";");
      121     4813        /**/
      122     4814        %VLP_ATTR(FPTN = RDONLY);
      123     4828        %VLP_ACCESS(READ=YES,EXEC=YES,ACCT='ALL',LAST=";");
      124     4845        /**/
      125     4846        %FPT_ERRMSG (FPTN = ERRMSG_FPT,
      126     4847                     CODE = ERRCODE,
      127     4848                     BUF ="ERRBUF.TEXT",
      128     4849                     DCB = M$CONFG,
      129     4850                     SUBMESS = YES,
      130     4851                     FLAGLEV = 3);
      131     4878        /**/
      132     4879        %FPT_TEMPWROC (FPTN = WROC_FPT,
      133     4880                       BUFW = ERRBUF);
      134     4896        /**/
      135     4897        %FPT_LDTRC (FPTN=GET_RCVR2,
      136     4898                    STCLASS=CONSTANT,
      137     4899                    NAME=R2NAME,
      138     4900                    ACCT=R2ACCT);
      139     4918
      140     4919        %VLP_NAME (FPTN=R2NAME,
      141     4920                   STCLASS=CONSTANT,
      142     4921                   NAME='RCVR2');
      143     4948
      144     4949        %VLP_ACCT (FPTN=R2ACCT,
      145     4950                   STCLASS=CONSTANT,
      146     4951                   ACCT=':SYS');
      147     4964        /**/
      148     4965        %B$TCB;
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:5    
      149     4968        %B$ALT;
      150     4976    1   DCL B$TCB$ PTR SYMREF;
      151     4977        %SUB B$ALT=B$TCB$->B$TCB.ALT$->B$ALT;
      152     4978        %SUB SYSID_SPAN#=30000;  /* Minimum SYSID span for IGN$SYSID to get if able */
      153     4979        /**/
      154     4980    1   SYSMAK: ;                     /* COPY PO FILES / SETUP PROC TABLES          */
      155     4981    1      CALL M$SAD(SEE_PPUT);      /* GET PPUT DESCRIPTOR                        */
      156     4982        /* Make CVM PPUT into the IS, then point PPUT$ there */
      157     4983    1      PPUT_REDEF.SID = %SPCL3SID; /* Init pointer to PPUT window               */
      158     4984    1      PPUT_DESC = PTRDSCR(PPUT$); /* Put (real) PPUT desc in PPUT_DESC         */
      159     4985    1      PPUT_OFFSET = B$JIT.DDLL;
      160     4986    1      VP = PPUT_OFFSET - %ISEGLO;
      161     4987    2      DO I = DBASE(PPUT_DESC) TO DBASE(PPUT_DESC) + DBOUND(PPUT_DESC) BY 4096;
      162     4988    2           PP = I/4096;
      163     4989    2           PPUT_CVM.V.PPNO# = PP;
      164     4990    2           PPUT_CVM.V.VPNO# = VP;
      165     4991    2           PPUT_CVM.V.PHYSICAL#='0'B; /* PPNO is WSQ0 relative                 */
      166     4992    2           CALL M$CVM (PPUT_CVM);
      167     4993    2           VP = VP + 1;
      168     4994    2         END;
      169     4995    1      PPUT$ = PINCRW (B$IS$, (PPUT_OFFSET-%ISEGLO)*1024);
      170     4996    1      CALL M$SAD(SEE_MONITOR);   /* GET MONITOR ISR DESCRIPTOR                 */
      171     4997    1      CALL M$SAD(SEE_TIGR);      /* GET DESCRIPTOR OF TIGR-BUILT TBLS          */
      172     4998    1      CALL M$SAD(SEE_DVTS);      /* GET DVTS                                   */
      173     4999    1      TPTR$ = ADDR(HW_WSQ0PT);
      174     5000    1      TPTR$$->B$PTR.SID = %SPCL1SID;
      175     5001    1      IP_WSQ0PT=TPTR$->B$BIT;
      176     5002    1      TPTR$ = ADDR(HW_PTB_UNITS);
      177     5003    1      TPTR$$->B$PTR.SID = %SPCL1SID;
      178     5004    1      IP_PTB_UNITS=TPTR$->B$WORD;
      179     5005    1      TPTR$ = ADDR(IT_BOOTFLAG); /* HOW ARE WE COMING UP                       */
      180     5006    1      TPTR$$->B$PTR.SID = %SPCL1SID;
      181     5007    1      IG_BOOTFLAG=TPTR$->B$WORD;
      182     5008    1      CALL IGG$GETFILES(TPTR$->ABIT); /* GET PACKSET MOUNTED, FILES ON IT      */
      183     5009    1      CALL IGR$PATCHF;           /* Build the Patch File if Tape Boot          */
      184     5010    1      CALL IGS$SYSMAK;
      185     5011        /* Un-CVM PPUT */
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:6    
      186     5012    1      VP = PPUT_OFFSET - %ISEGLO;
      187     5013    1      PPUT_CVM.V.PPNO# = -1;
      188     5014    2      DO I = DBASE(PPUT_DESC) TO DBASE(PPUT_DESC)+DBOUND(PPUT_DESC) BY 4096;
      189     5015    2           PPUT_CVM.V.VPNO# = VP;
      190     5016    2           CALL M$CVM (PPUT_CVM);
      191     5017    2           VP = VP + 1;
      192     5018    2         END;
      193     5019    2      IF IG_BOOTFLAG < I_DISKBOOT THEN DO; /* NOT DB OR RECOVERY               */
      194     5020    2           CNTRL_OPEN.V.FUN# = %CREATE#;
      195     5021    2           CNTRL_OPEN.V.EXIST# = %ERROR#;
      196     5022    2           CALL M$OPEN(CNTRL_OPEN) ALTRET(CNTRL_ERR);
      197     5023    2           TPTR$ = ADDR(B_CNTRL_LOW);
      198     5024    2           TPTR$$->B$PTR.SID = %SPCL1SID;
      199     5025    2           CNTRL_WRITE.BUF_.BUF$ = TPTR$;
      200     5026    2           TPTR$ = ADDR(B_CNTRL_HIGH);
      201     5027    2           TPTR$$->B$PTR.SID = %SPCL1SID;
      202     5028    2           CNTRL_WRITE.BUF_.BOUND = POFFC(TPTR$,CNTRL_WRITE.BUF_.BUF$) - 1;
      203     5029    2           CALL M$WRITE(CNTRL_WRITE) ALTRET(CNTRL_ERR);
      204     5030    2           CALL M$CLOSE(CNTRL_CLOSE) ALTRET(CNTRL_ERR);
      205     5031    2           GOTO CNTRL_DONE;
      206     5032    2   CNTRL_ERR:
      207     5033    2           IF B$ALT.ERR.CODE ~= %E$CREATERR
      208     5034    2           THEN
      209     5035    3           DO;
      210     5036    3                ERRCODE = B$ALT.ERR;
      211     5037    3                CALL M$ERRMSG(ERRMSG_FPT) ALTRET(CNTRL_DONE);
      212     5038    3                CALL M$TEMPWROC (WROC_FPT);
      213     5039        /**/
      214     5040    3   CNTRL_DONE:  ;
      215     5041    3              END;               /* DO IF NOT CREATERR                         */
      216     5042    2           CALL IGT$TDFILE;      /* BUILD $:CONFIG - IF TAPE BOOT              */
      217     5043    2         END;
      218     5044        /**/
      219     5045    2      ELSE DO;                   /* READ FILE AFTER RECOVERY                   */
      220     5046    2           CNTRL_OPEN.V.FUN# = %IN#;
      221     5047    2           CALL M$OPEN(CNTRL_OPEN) ALTRET(CNTRL_ERR2);
      222     5048    2           TPTR$ = ADDR(B_CNTRL_LOW);
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:7    
      223     5049    2           TPTR$$->B$PTR.SID = %SPCL1SID;
      224     5050    2           CNTRL_READ.BUF_.BUF$ = TPTR$;
      225     5051    2           TPTR$ = ADDR(B_CNTRL_HIGH);
      226     5052    2           TPTR$$->B$PTR.SID = %SPCL1SID;
      227     5053    2           CNTRL_READ.BUF_.BOUND = POFFC(TPTR$,CNTRL_READ.BUF_.BUF$) - 1;
      228     5054    2           CALL M$READ(CNTRL_READ) ALTRET(CNTRL_ERR2);
      229     5055    2           CALL M$CLOSE(CNTRL_CLOSE) ALTRET(CNTRL_ERR2);
      230     5056    2           GOTO CNTRL_DONE2;
      231     5057    2   CNTRL_ERR2: ;
      232     5058    2           ERRCODE = B$ALT.ERR;
      233     5059    2           CALL M$ERRMSG(ERRMSG_FPT) ALTRET(CNTRL_DONE2);
      234     5060    2           CALL M$TEMPWROC (WROC_FPT);
      235     5061    2   CNTRL_DONE2: ;
      236     5062        /**/
      237     5063    2           TPTR$ = ADDR(JM_PT);  /* RESET PARTITION TABLES                     */
      238     5064    2           TPTR$$->B$PTR.SID = %SPCL1SID;
      239     5065    3           DO I = 0 TO 15;
      240     5066    3                P$ = PINCRW(TPTR$,SIZEW(JM$PT)*I);
      241     5067    3                P$ -> JM$PT.CUR = 0;
      242     5068    3                P$ -> JM$PT.TOT = 0;
      243     5069    3                P$ -> JM$PT.CPTOT = 0;
      244     5070    3                P$ -> JM$PT.JOB$ = ADDR(NIL);
      245     5071    3              END;
      246     5072    2           CALL IGR$RECOVERY;    /* Update acct JITs - release * files         */
      247     5073    2         END;
      248     5074        /**/
      249     5075    1      CALL IGJ$JOBSTATS;         /* Housekeep the :JOBSTATS file               */
      250     5076        /**/
      251     5077        /* Get a SYSID range and BOOTID for this boot */
      252     5078        /**/
      253     5079    1      TPTR$ = ADDR(S_SYSID);
      254     5080    1      TPTR$$->B$PTR.SID = %SPCL1SID;
      255     5081    1      FO_CITE.NXT = TPTR$->B$WORD;
      256     5082    1      FO_CITE.NUM = 0;
      257     5083    1      FO_CITE.SPAN = SYSID_SPAN#;
      258     5084    1      CALL IGN$SYSID(FO_CITE);
      259     5085        /**/
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:8    
      260     5086    1      IF IG_BOOTFLAG = I_RCVR_DUMPF
      261     5087    2      THEN DO;
      262     5088    2           B$JIT.UNAME='RCVR2';
      263     5089    2           B$JIT.CCBUF='RCVR1';
      264     5090    2           CALL M$LDTRC(GET_RCVR2) ALTRET(WOOPS);
      265     5091    2   WOOPS:  ;
      266     5092    2         END;
      267     5093    1      CALL IGL$HLP;
      268     5094    1   G1DONE: ;                     /*  HLP DOESNT RETURN                         */
      269     5095    1      GOTO G1DONE;
      270     5096        /**/
      271     5097    1   END;
      272     5098        /**/
      273     5099        /**/

PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:9    
--  Include file information  --

   JM$STRUCT.:E05TOU  is referenced.
   FOO_MAC_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   I_SUBS_C.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IGM$MAIN.

   Procedure IGM$MAIN requires 284 words for executable code.
   Procedure IGM$MAIN requires 10 words of local(AUTO) storage.

    No errors detected in file IGM$MAIN.:E05TSI    .

PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:10   

 Object Unit name= IGM$MAIN                                   File name= IGM$MAIN.:E05TOU
 UTS= JUL 29 '97 22:36:16.68 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   DCB   even  none     0      0  M$CONFG
    2   Data  even  none   324    504  IGM$MAIN
    3  RoData even  UTS     26     32  IGM$MAIN
    4   Proc  even  none   284    434  IGM$MAIN
    5  RoData even  none    10     12  IGM$MAIN

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     4      0   yes            yes      Main       0  IGM$MAIN

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    2      0  PPUT_DESC                          2      2  PPUT$
    2      3  IP_WSQ0PT                          2      4  IP_PTB_UNITS
    2      5  IG_BOOTFLAG                        2     10  PATCH
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:11   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       0 IGR$PATCHF
         yes           Std       1 IGG$GETFILES
         yes           Std       0 IGS$SYSMAK
         yes           Std       2 IGJ$JOBSTATS
         yes           Std       1 IGN$SYSID
         yes           Std       0 IGT$TDFILE
         yes           Std       0 IGR$RECOVERY
         yes           Std       0 IGL$HLP
                       nStd      0 X66_MAUTO
                       Std       0 B_CONSPOOL_D

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  M$CONFG                               IT_BOOTFLAG
     B_CNTRL_LOW                           B_CNTRL_HIGH                          JM_PT
     S_SYSID                               B$JIT$                                B$IS$
     HW_WSQ0PT                             HW_PTB_UNITS                          ERRCODE
     ERRBUF                                B$TCB$                                B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     NULLSID                               ISSID
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:12   


        1        1        /*M* IGM$MAIN GHOST1 MAIN MODULE           */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* PLM=3,IND=5,MEC,MOC,EXM=10,CLM=30,CRM=78 */
        8        8        /**/
        9        9        /**/
       10       10        IGM$MAIN: PROC MAIN;

     10  4 000000   000000 700200 xent  IGM$MAIN     TSX0  ! X66_MAUTO
         4 000001   000012 000000                    ZERO    10,0

       11       11        /**/
       12       12        /**/
       13       13        %INCLUDE CP_6;
       14       94        %INCLUDE B_SEGIDS_C;          /* SYSTEM SEGID DEFINITIONS                   */
       15      633        %INCLUDE M_INFO_C;
       16      773        %INCLUDE I_SUBS_C;
       17      797        %INCLUDE CP_6_SUBS;
       18     1337        %INCLUDE B_ERRORS_C;
       19     2464        %INCLUDE B$JIT;
       20     2754        %INCLUDE FOO_MAC_C;
       21     3502        %INCLUDE JM$STRUCT;
       22     4247        /**/
       23     4248        /**/
       24     4249    1   DCL IGS$SYSMAK ENTRY;
       25     4250    1   DCL IGT$TDFILE ENTRY;
       26     4251    1   DCL IGL$HLP ENTRY;
       27     4252    1   DCL IGJ$JOBSTATS ENTRY(2);
       28     4253    1   DCL IGN$SYSID ENTRY(1);
       29     4254    1   DCL IGG$GETFILES ENTRY(1);
       30     4255    1   DCL IGR$RECOVERY ENTRY;
       31     4256    1   DCL IGR$PATCHF ENTRY;
       32     4257        /**/
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:13   
       33     4258    1   DCL M$CONFG DCB;
       34     4259        /**/
       35     4260    1   DCL IT_BOOTFLAG UBIN WORD SYMREF;
       36     4261    1   DCL B_CNTRL_LOW UBIN WORD SYMREF;
       37     4262    1   DCL B_CNTRL_HIGH UBIN WORD SYMREF;
       38     4263    1   DCL PPUT_DESC DSCR STATIC SYMDEF;
       39     4264    1   DCL PPUT$ PTR STATIC SYMDEF INIT(ADDR(NIL));
       40     4265    1   DCL 1 PPUT_REDEF REDEF PPUT$,
       41     4266    1         2 *      BIT(24),
       42     4267    1         2 SID    BIT(12);
       43     4268    1   DCL JM_PT UBIN WORD SYMREF;   /* SYMREF TO GET ADDRESS                      */
       44     4269    1   DCL S_SYSID UBIN SYMREF;
       45     4270        /**/
       46     4271    1   DCL B$JIT$ PTR SYMREF;
       47     4272    1   DCL B$IS$ PTR SYMREF;
       48     4273    1   DCL IP_WSQ0PT BIT(1) ALIGNED STATIC SYMDEF;
       49     4274    1   DCL HW_WSQ0PT BIT(1) ALIGNED SYMREF;
       50     4275    1   DCL IP_PTB_UNITS UBIN WORD ALIGNED STATIC SYMDEF;
       51     4276    1   DCL HW_PTB_UNITS UBIN WORD ALIGNED SYMREF;
       52     4277        /**/
       53     4278    1   DCL ERRCODE BIT(36) SYMREF;
       54     4279    1   DCL 1 ERRBUF SYMREF,
       55     4280    1         2 CRLF BIT(36) UNAL,
       56     4281    1         2 TEXT CHAR(120) UNAL;
       57     4282    1   DCL ABIT BIT(1) BASED ALIGNED;
       58     4283        %JM_PART (FPTN=JM$PT,STCLASS=BASED);
       59     4338    1   DCL 1 B$PTR BASED ALIGNED,
       60     4339    1         2 OFFSET UBIN(24) UNAL,
       61     4340    1         2 SID BIT(12) UNAL;
       62     4341    1   DCL B$WORD UBIN WORD BASED ALIGNED;
       63     4342    1   DCL B$BIT BIT(1) BASED ALIGNED;
       64     4343    1   DCL IG_BOOTFLAG UBIN WORD STATIC SYMDEF;
       65     4344                                      /* Copy of IT_BOOTFLAG from Monitor Data      */
       66     4345    1   DCL TPTR$$ PTR CONSTANT INIT(ADDR(TPTR$));
       67     4346    1   DCL P$ PTR;
       68     4347    1   DCL PP UBIN;
       69     4348    1   DCL VP UBIN;
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:14   
       70     4349    1   DCL PPUT_OFFSET UBIN;         /* Offset from begining of WSQ                */
       71     4350    1   DCL TPTR$ PTR STATIC;
       72     4351    1   DCL I UBIN WORD STATIC;
       73     4352    1   DCL PATCH (0:127) UBIN STATIC SYMDEF INIT(0*128);
       74     4353        /**/
       75     4354    1   DCL 1 CNTRLKEY STATIC,
       76     4355    1         2 COUNT UBIN(9) UNAL INIT(3),
       77     4356    1         2 ONE UBIN(27) UNAL INIT(1000);
       78     4357        /**/
       79     4358        %FO_CITE(FPTN=FO_CITE,STCLASS=STATIC,TYP=GMSY);
       80     4417        /**/
       81     4418        %VLP_NAME (FPTN = CNTRLFILE,
       82     4419                 NAME = ':CNTRL',
       83     4420                 LEN = 6);
       84     4447        /**/
       85     4448        %VLP_ACCT (FPTN = SYSACCT,
       86     4449                 ACCT = ':SYS');
       87     4462        /**/
       88     4463        %FPT_SAD(FPTN=SEE_MONITOR,USERSID=%SPCL1SID,MONSID=%ISSID);
       89     4478        %FPT_SAD(FPTN=SEE_TIGR,USERSID=%SPCL2SID,MONSID=%TIGRSID);
       90     4493        %FPT_SAD(FPTN=SEE_PPUT,USERSID=%SPCL3SID,MONSID=%PPUTSID);
       91     4508        %FPT_SAD(FPTN=SEE_DVTS,USERSID=%SPCL5SID,MONSID=%DVTTBLSID);
       92     4523        %FPT_CVM (FPTN=PPUT_CVM);
       93     4539        /**/
       94     4540        %FPT_OPEN (FPTN = CNTRL_OPEN,
       95     4541                 DCB = M$CONFG,
       96     4542                 ASN = FILE,
       97     4543                 SCRUB = YES,
       98     4544                 DISP=NAMED,
       99     4545                 ACS = DIRECT,
      100     4546                 ORG = KEYED,
      101     4547                ACCESS=RDONLY,
      102     4548                ACSVEH=VEHICLE,
      103     4549                 NAME = CNTRLFILE,
      104     4550                 ACCT = SYSACCT);
      105     4659        /**/
      106     4660        %FPT_READ (FPTN = CNTRL_READ,
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:15   
      107     4661                 DCB = M$CONFG,
      108     4662                 KEYS = YES,
      109     4663                 KEY = CNTRLKEY);
      110     4702        /**/
      111     4703        %FPT_WRITE (FPTN = CNTRL_WRITE,
      112     4704                 DCB = M$CONFG,
      113     4705                 KEY = CNTRLKEY);
      114     4736        /**/
      115     4737        %FPT_CLOSE (FPTN = CNTRL_CLOSE,
      116     4738                 DCB = M$CONFG,
      117     4739                 DISP = SAVE);
      118     4781        /**/
      119     4782        %VLP_ATTR(FPTN = VEHICLE);
      120     4796        %VLP_ACSVEH(READ=YES,UPD=YES,VEHICLE='CONTROL',LAST=";");
      121     4813        /**/
      122     4814        %VLP_ATTR(FPTN = RDONLY);
      123     4828        %VLP_ACCESS(READ=YES,EXEC=YES,ACCT='ALL',LAST=";");
      124     4845        /**/
      125     4846        %FPT_ERRMSG (FPTN = ERRMSG_FPT,
      126     4847                     CODE = ERRCODE,
      127     4848                     BUF ="ERRBUF.TEXT",
      128     4849                     DCB = M$CONFG,
      129     4850                     SUBMESS = YES,
      130     4851                     FLAGLEV = 3);
      131     4878        /**/
      132     4879        %FPT_TEMPWROC (FPTN = WROC_FPT,
      133     4880                       BUFW = ERRBUF);
      134     4896        /**/
      135     4897        %FPT_LDTRC (FPTN=GET_RCVR2,
      136     4898                    STCLASS=CONSTANT,
      137     4899                    NAME=R2NAME,
      138     4900                    ACCT=R2ACCT);
      139     4918
      140     4919        %VLP_NAME (FPTN=R2NAME,
      141     4920                   STCLASS=CONSTANT,
      142     4921                   NAME='RCVR2');
      143     4948
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:16   
      144     4949        %VLP_ACCT (FPTN=R2ACCT,
      145     4950                   STCLASS=CONSTANT,
      146     4951                   ACCT=':SYS');
      147     4964        /**/
      148     4965        %B$TCB;
      149     4968        %B$ALT;
      150     4976    1   DCL B$TCB$ PTR SYMREF;

   4976  4 000002                       SYSMAK       null
      151     4977        %SUB B$ALT=B$TCB$->B$TCB.ALT$->B$ALT;
      152     4978        %SUB SYSID_SPAN#=30000;  /* Minimum SYSID span for IGN$SYSID to get if able */
      153     4979        /**/
      154     4980    1   SYSMAK: ;                     /* COPY PO FILES / SETUP PROC TABLES          */
      155     4981    1      CALL M$SAD(SEE_PPUT);      /* GET PPUT DESCRIPTOR                        */

   4981  4 000002   000232 630400 2                  EPPR0   SEE_PPUT
         4 000003   030015 713400                    CLIMB   12301
         4 000004   400000 401760                    pmme    nvectors=1

      156     4982        /* Make CVM PPUT into the IS, then point PPUT$ there */
      157     4983    1      PPUT_REDEF.SID = %SPCL3SID; /* Init pointer to PPUT window               */

   4983  4 000005   006023 236007                    LDQ     3091,DL
         4 000006   000002 752003 2                  STCQ    PPUT$,'03'O

      158     4984    1      PPUT_DESC = PTRDSCR(PPUT$); /* Put (real) PPUT desc in PPUT_DESC         */

   4984  4 000007   000002 470400 2                  LDP0    PPUT$
         4 000010   000000 050400 2                  STD0    PPUT_DESC

      159     4985    1      PPUT_OFFSET = B$JIT.DDLL;

   4985  4 000011   000000 470400 xsym               LDP0    B$JIT$
         4 000012   000200 236100                    LDQ     128,,PR0
         4 000013   000022 772000                    QRL     18
         4 000014   200006 756100                    STQ     PPUT_OFFSET,,AUTO

PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:17   
      160     4986    1      VP = PPUT_OFFSET - %ISEGLO;

   4986  4 000015   000100 136007                    SBLQ    64,DL
         4 000016   200005 756100                    STQ     VP,,AUTO

      161     4987    2      DO I = DBASE(PPUT_DESC) TO DBASE(PPUT_DESC) + DBOUND(PPUT_DESC) BY 4096;

   4987  4 000017   000001 235000 2                  LDA     PPUT_DESC+1
         4 000020   000007 755000 2                  STA     I
         4 000021   000043 710000 4                  TRA     s:4994+3

      162     4988    2           PP = I/4096;

   4988  4 000022   000007 236000 2                  LDQ     I
         4 000023   000014 772000                    QRL     12
         4 000024   200004 756100                    STQ     PP,,AUTO

      163     4989    2           PPUT_CVM.V.PPNO# = PP;

   4989  4 000025   000245 756000 2                  STQ     PPUT_CVM+3

      164     4990    2           PPUT_CVM.V.VPNO# = VP;

   4990  4 000026   200005 720100                    LXL0    VP,,AUTO
         4 000027   000246 440000 2                  SXL0    PPUT_CVM+4

      165     4991    2           PPUT_CVM.V.PHYSICAL#='0'B; /* PPNO is WSQ0 relative                 */

   4991  4 000030   000000 236000 5                  LDQ     0
         4 000031   000244 356000 2                  ANSQ    PPUT_CVM+2

      166     4992    2           CALL M$CVM (PPUT_CVM);

   4992  4 000032   000242 630400 2                  EPPR0   PPUT_CVM
         4 000033   030011 713400                    CLIMB   12297
         4 000034   400000 401760                    pmme    nvectors=1

PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:18   
      167     4993    2           VP = VP + 1;

   4993  4 000035   200005 235100                    LDA     VP,,AUTO
         4 000036   000001 035007                    ADLA    1,DL
         4 000037   200005 755100                    STA     VP,,AUTO

      168     4994    2         END;

   4994  4 000040   000007 236000 2                  LDQ     I
         4 000041   010000 036007                    ADLQ    4096,DL
         4 000042   000007 756000 2                  STQ     I
         4 000043   000000 236000 2                  LDQ     PPUT_DESC
         4 000044   000020 772000                    QRL     16
         4 000045   000001 036000 2                  ADLQ    PPUT_DESC+1
         4 000046   000007 116000 2                  CMPQ    I
         4 000047   000022 603000 4                  TRC     s:4988

      169     4995    1      PPUT$ = PINCRW (B$IS$, (PPUT_OFFSET-%ISEGLO)*1024);

   4995  4 000050   200006 236100                    LDQ     PPUT_OFFSET,,AUTO
         4 000051   000034 736000                    QLS     28
         4 000052   200000 136003                    SBLQ    65536,DU
         4 000053   000000 036000 xsym               ADLQ    B$IS$
         4 000054   000002 756000 2                  STQ     PPUT$

      170     4996    1      CALL M$SAD(SEE_MONITOR);   /* GET MONITOR ISR DESCRIPTOR                 */

   4996  4 000055   000222 630400 2                  EPPR0   SEE_MONITOR
         4 000056   030015 713400                    CLIMB   12301
         4 000057   400000 401760                    pmme    nvectors=1

      171     4997    1      CALL M$SAD(SEE_TIGR);      /* GET DESCRIPTOR OF TIGR-BUILT TBLS          */

   4997  4 000060   000226 630400 2                  EPPR0   SEE_TIGR
         4 000061   030015 713400                    CLIMB   12301
         4 000062   400000 401760                    pmme    nvectors=1

PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:19   
      172     4998    1      CALL M$SAD(SEE_DVTS);      /* GET DVTS                                   */

   4998  4 000063   000236 630400 2                  EPPR0   SEE_DVTS
         4 000064   030015 713400                    CLIMB   12301
         4 000065   400000 401760                    pmme    nvectors=1

      173     4999    1      TPTR$ = ADDR(HW_WSQ0PT);

   4999  4 000066   000001 236000 5                  LDQ     1
         4 000067   000006 756000 2                  STQ     TPTR$

      174     5000    1      TPTR$$->B$PTR.SID = %SPCL1SID;

   5000  4 000070   000000 470400 3                  LDP0    TPTR$$
         4 000071   006021 236007                    LDQ     3089,DL
         4 000072   000000 752103                    STCQ    0,'03'O,PR0

      175     5001    1      IP_WSQ0PT=TPTR$->B$BIT;

   5001  4 000073   000006 471400 2                  LDP1    TPTR$
         4 000074   100000 236100                    LDQ     0,,PR1
         4 000075   400000 376003                    ANQ     -131072,DU
         4 000076   000003 756000 2                  STQ     IP_WSQ0PT

      176     5002    1      TPTR$ = ADDR(HW_PTB_UNITS);

   5002  4 000077   000002 236000 5                  LDQ     2
         4 000100   000006 756000 2                  STQ     TPTR$

      177     5003    1      TPTR$$->B$PTR.SID = %SPCL1SID;

   5003  4 000101   006021 236007                    LDQ     3089,DL
         4 000102   000000 752103                    STCQ    0,'03'O,PR0

      178     5004    1      IP_PTB_UNITS=TPTR$->B$WORD;

   5004  4 000103   000006 471400 2                  LDP1    TPTR$
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:20   
         4 000104   100000 235100                    LDA     0,,PR1
         4 000105   000004 755000 2                  STA     IP_PTB_UNITS

      179     5005    1      TPTR$ = ADDR(IT_BOOTFLAG); /* HOW ARE WE COMING UP                       */

   5005  4 000106   000003 236000 5                  LDQ     3
         4 000107   000006 756000 2                  STQ     TPTR$

      180     5006    1      TPTR$$->B$PTR.SID = %SPCL1SID;

   5006  4 000110   006021 236007                    LDQ     3089,DL
         4 000111   000000 752103                    STCQ    0,'03'O,PR0

      181     5007    1      IG_BOOTFLAG=TPTR$->B$WORD;

   5007  4 000112   000006 471400 2                  LDP1    TPTR$
         4 000113   100000 235100                    LDA     0,,PR1
         4 000114   000005 755000 2                  STA     IG_BOOTFLAG

      182     5008    1      CALL IGG$GETFILES(TPTR$->ABIT); /* GET PACKSET MOUNTED, FILES ON IT      */

   5008  4 000115   000006 630400 2                  EPPR0   TPTR$
         4 000116   000017 631400 xsym               EPPR1   B_VECTNIL+15
         4 000117   000000 701000 xent               TSX1    IGG$GETFILES
         4 000120   000000 011000                    NOP     0

      183     5009    1      CALL IGR$PATCHF;           /* Build the Patch File if Tape Boot          */

   5009  4 000121   000002 631400 xsym               EPPR1   B_VECTNIL+2
         4 000122   000000 701000 xent               TSX1    IGR$PATCHF
         4 000123   000000 011000                    NOP     0

      184     5010    1      CALL IGS$SYSMAK;

   5010  4 000124   000002 631400 xsym               EPPR1   B_VECTNIL+2
         4 000125   000000 701000 xent               TSX1    IGS$SYSMAK
         4 000126   000000 011000                    NOP     0
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:21   

      185     5011        /* Un-CVM PPUT */
      186     5012    1      VP = PPUT_OFFSET - %ISEGLO;

   5012  4 000127   200006 235100                    LDA     PPUT_OFFSET,,AUTO
         4 000130   000100 135007                    SBLA    64,DL
         4 000131   200005 755100                    STA     VP,,AUTO

      187     5013    1      PPUT_CVM.V.PPNO# = -1;

   5013  4 000132   000001 336007                    LCQ     1,DL
         4 000133   000245 756000 2                  STQ     PPUT_CVM+3

      188     5014    2      DO I = DBASE(PPUT_DESC) TO DBASE(PPUT_DESC)+DBOUND(PPUT_DESC) BY 4096;

   5014  4 000134   000001 235000 2                  LDA     PPUT_DESC+1
         4 000135   000007 755000 2                  STA     I
         4 000136   000152 710000 4                  TRA     s:5018+3

      189     5015    2           PPUT_CVM.V.VPNO# = VP;

   5015  4 000137   200005 720100                    LXL0    VP,,AUTO
         4 000140   000246 440000 2                  SXL0    PPUT_CVM+4

      190     5016    2           CALL M$CVM (PPUT_CVM);

   5016  4 000141   000242 630400 2                  EPPR0   PPUT_CVM
         4 000142   030011 713400                    CLIMB   12297
         4 000143   400000 401760                    pmme    nvectors=1

      191     5017    2           VP = VP + 1;

   5017  4 000144   200005 235100                    LDA     VP,,AUTO
         4 000145   000001 035007                    ADLA    1,DL
         4 000146   200005 755100                    STA     VP,,AUTO

      192     5018    2         END;
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:22   

   5018  4 000147   000007 236000 2                  LDQ     I
         4 000150   010000 036007                    ADLQ    4096,DL
         4 000151   000007 756000 2                  STQ     I
         4 000152   000000 236000 2                  LDQ     PPUT_DESC
         4 000153   000020 772000                    QRL     16
         4 000154   000001 036000 2                  ADLQ    PPUT_DESC+1
         4 000155   000007 116000 2                  CMPQ    I
         4 000156   000137 603000 4                  TRC     s:5015

      193     5019    2      IF IG_BOOTFLAG < I_DISKBOOT THEN DO; /* NOT DB OR RECOVERY               */

   5019  4 000157   000005 235000 2                  LDA     IG_BOOTFLAG
         4 000160   000007 115007                    CMPA    7,DL
         4 000161   000256 603000 4                  TRC     s:5046

      194     5020    2           CNTRL_OPEN.V.FUN# = %CREATE#;

   5020  4 000162   003000 236007                    LDQ     1536,DL
         4 000163   000315 552010 2                  STBQ    CNTRL_OPEN+37,'10'O

      195     5021    2           CNTRL_OPEN.V.EXIST# = %ERROR#;

   5021  4 000164   000314 236000 2                  LDQ     CNTRL_OPEN+36
         4 000165   000004 376000 5                  ANQ     4
         4 000166   000200 276007                    ORQ     128,DL
         4 000167   000314 756000 2                  STQ     CNTRL_OPEN+36

      196     5022    2           CALL M$OPEN(CNTRL_OPEN) ALTRET(CNTRL_ERR);

   5022  4 000170   000250 630400 2                  EPPR0   CNTRL_OPEN
         4 000171   450000 713400                    CLIMB   alt,open
         4 000172   410400 401760                    pmme    nvectors=18
         4 000173   000233 702000 4                  TSX2    CNTRL_ERR

      197     5023    2           TPTR$ = ADDR(B_CNTRL_LOW);

PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:23   
   5023  4 000174   000005 236000 5                  LDQ     5
         4 000175   000006 756000 2                  STQ     TPTR$

      198     5024    2           TPTR$$->B$PTR.SID = %SPCL1SID;

   5024  4 000176   000000 470400 3                  LDP0    TPTR$$
         4 000177   006021 236007                    LDQ     3089,DL
         4 000200   000000 752103                    STCQ    0,'03'O,PR0

      199     5025    2           CNTRL_WRITE.BUF_.BUF$ = TPTR$;

   5025  4 000201   000006 236000 2                  LDQ     TPTR$
         4 000202   000365 756000 2                  STQ     CNTRL_WRITE+5

      200     5026    2           TPTR$ = ADDR(B_CNTRL_HIGH);

   5026  4 000203   000006 236000 5                  LDQ     6
         4 000204   000006 756000 2                  STQ     TPTR$

      201     5027    2           TPTR$$->B$PTR.SID = %SPCL1SID;

   5027  4 000205   006021 236007                    LDQ     3089,DL
         4 000206   000000 752103                    STCQ    0,'03'O,PR0

      202     5028    2           CNTRL_WRITE.BUF_.BOUND = POFFC(TPTR$,CNTRL_WRITE.BUF_.BUF$) - 1;

   5028  4 000207   000365 236000 2                  LDQ     CNTRL_WRITE+5
         4 000210   000020 772000                    QRL     16
         4 000211   200010 756100                    STQ     PPUT_OFFSET+2,,AUTO
         4 000212   000006 236000 2                  LDQ     TPTR$
         4 000213   000020 772000                    QRL     16
         4 000214   200010 136100                    SBLQ    PPUT_OFFSET+2,,AUTO
         4 000215   000001 136007                    SBLQ    1,DL
         4 000216   000020 736000                    QLS     16
         4 000217   000364 676000 2                  ERQ     CNTRL_WRITE+4
         4 000220   000034 376000 xsym               ANQ     B_VECTNIL+28
         4 000221   000364 656000 2                  ERSQ    CNTRL_WRITE+4
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:24   

      203     5029    2           CALL M$WRITE(CNTRL_WRITE) ALTRET(CNTRL_ERR);

   5029  4 000222   000360 630400 2                  EPPR0   CNTRL_WRITE
         4 000223   440001 713400                    CLIMB   alt,write
         4 000224   401400 401760                    pmme    nvectors=4
         4 000225   000233 702000 4                  TSX2    CNTRL_ERR

      204     5030    2           CALL M$CLOSE(CNTRL_CLOSE) ALTRET(CNTRL_ERR);

   5030  4 000226   000374 630400 2                  EPPR0   CNTRL_CLOSE
         4 000227   450001 713400                    CLIMB   alt,close
         4 000230   406000 401760                    pmme    nvectors=13
         4 000231   000233 702000 4                  TSX2    CNTRL_ERR

      205     5031    2           GOTO CNTRL_DONE;

   5031  4 000232   000252 710000 4                  TRA     CNTRL_DONE

      206     5032    2   CNTRL_ERR:
      207     5033    2           IF B$ALT.ERR.CODE ~= %E$CREATERR

   5033  4 000233   000000 470400 xsym  CNTRL_ERR    LDP0    B$TCB$
         4 000234   000000 471500                    LDP1    0,,PR0
         4 000235   100102 236100                    LDQ     66,,PR1
         4 000236   377770 376007                    ANQ     131064,DL
         4 000237   001560 116007                    CMPQ    880,DL
         4 000240   000252 600000 4                  TZE     CNTRL_DONE

      208     5034    2           THEN
      209     5035    3           DO;

      210     5036    3                ERRCODE = B$ALT.ERR;

   5036  4 000241   100102 236100                    LDQ     66,,PR1
         4 000242   000000 756000 xsym               STQ     ERRCODE

PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:25   
      211     5037    3                CALL M$ERRMSG(ERRMSG_FPT) ALTRET(CNTRL_DONE);

   5037  4 000243   000442 630400 2                  EPPR0   ERRMSG_FPT
         4 000244   420000 713400                    CLIMB   alt,+8192
         4 000245   405000 401760                    pmme    nvectors=11
         4 000246   000252 702000 4                  TSX2    CNTRL_DONE

      212     5038    3                CALL M$TEMPWROC (WROC_FPT);

   5038  4 000247   000474 630400 2                  EPPR0   WROC_FPT
         4 000250   110000 713400                    CLIMB   36864
         4 000251   401000 401760                    pmme    nvectors=3

   5036  4 000252                       CNTRL_DONE   null
      213     5039        /**/
      214     5040    3   CNTRL_DONE:  ;
      215     5041    3              END;               /* DO IF NOT CREATERR                         */

      216     5042    2           CALL IGT$TDFILE;      /* BUILD $:CONFIG - IF TAPE BOOT              */

   5042  4 000252   000002 631400 xsym               EPPR1   B_VECTNIL+2
         4 000253   000000 701000 xent               TSX1    IGT$TDFILE
         4 000254   000000 011000                    NOP     0

      217     5043    2         END;

   5043  4 000255   000370 710000 4                  TRA     s:5075

      218     5044        /**/
      219     5045    2      ELSE DO;                   /* READ FILE AFTER RECOVERY                   */

      220     5046    2           CNTRL_OPEN.V.FUN# = %IN#;

   5046  4 000256   002000 236007                    LDQ     1024,DL
         4 000257   000315 552010 2                  STBQ    CNTRL_OPEN+37,'10'O

      221     5047    2           CALL M$OPEN(CNTRL_OPEN) ALTRET(CNTRL_ERR2);
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:26   

   5047  4 000260   000250 630400 2                  EPPR0   CNTRL_OPEN
         4 000261   450000 713400                    CLIMB   alt,open
         4 000262   410400 401760                    pmme    nvectors=18
         4 000263   000323 702000 4                  TSX2    CNTRL_ERR2

      222     5048    2           TPTR$ = ADDR(B_CNTRL_LOW);

   5048  4 000264   000005 236000 5                  LDQ     5
         4 000265   000006 756000 2                  STQ     TPTR$

      223     5049    2           TPTR$$->B$PTR.SID = %SPCL1SID;

   5049  4 000266   000000 470400 3                  LDP0    TPTR$$
         4 000267   006021 236007                    LDQ     3089,DL
         4 000270   000000 752103                    STCQ    0,'03'O,PR0

      224     5050    2           CNTRL_READ.BUF_.BUF$ = TPTR$;

   5050  4 000271   000006 236000 2                  LDQ     TPTR$
         4 000272   000347 756000 2                  STQ     CNTRL_READ+5

      225     5051    2           TPTR$ = ADDR(B_CNTRL_HIGH);

   5051  4 000273   000006 236000 5                  LDQ     6
         4 000274   000006 756000 2                  STQ     TPTR$

      226     5052    2           TPTR$$->B$PTR.SID = %SPCL1SID;

   5052  4 000275   006021 236007                    LDQ     3089,DL
         4 000276   000000 752103                    STCQ    0,'03'O,PR0

      227     5053    2           CNTRL_READ.BUF_.BOUND = POFFC(TPTR$,CNTRL_READ.BUF_.BUF$) - 1;

   5053  4 000277   000347 236000 2                  LDQ     CNTRL_READ+5
         4 000300   000020 772000                    QRL     16
         4 000301   200010 756100                    STQ     PPUT_OFFSET+2,,AUTO
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:27   
         4 000302   000006 236000 2                  LDQ     TPTR$
         4 000303   000020 772000                    QRL     16
         4 000304   200010 136100                    SBLQ    PPUT_OFFSET+2,,AUTO
         4 000305   000001 136007                    SBLQ    1,DL
         4 000306   000020 736000                    QLS     16
         4 000307   000346 676000 2                  ERQ     CNTRL_READ+4
         4 000310   000034 376000 xsym               ANQ     B_VECTNIL+28
         4 000311   000346 656000 2                  ERSQ    CNTRL_READ+4

      228     5054    2           CALL M$READ(CNTRL_READ) ALTRET(CNTRL_ERR2);

   5054  4 000312   000342 630400 2                  EPPR0   CNTRL_READ
         4 000313   440000 713400                    CLIMB   alt,read
         4 000314   401400 401760                    pmme    nvectors=4
         4 000315   000323 702000 4                  TSX2    CNTRL_ERR2

      229     5055    2           CALL M$CLOSE(CNTRL_CLOSE) ALTRET(CNTRL_ERR2);

   5055  4 000316   000374 630400 2                  EPPR0   CNTRL_CLOSE
         4 000317   450001 713400                    CLIMB   alt,close
         4 000320   406000 401760                    pmme    nvectors=13
         4 000321   000323 702000 4                  TSX2    CNTRL_ERR2

      230     5056    2           GOTO CNTRL_DONE2;

   5056  4 000322   000336 710000 4                  TRA     CNTRL_DONE2

   5053  4 000323                       CNTRL_ERR2   null
      231     5057    2   CNTRL_ERR2: ;
      232     5058    2           ERRCODE = B$ALT.ERR;

   5058  4 000323   000000 470400 xsym               LDP0    B$TCB$
         4 000324   000000 471500                    LDP1    0,,PR0
         4 000325   100102 236100                    LDQ     66,,PR1
         4 000326   000000 756000 xsym               STQ     ERRCODE

      233     5059    2           CALL M$ERRMSG(ERRMSG_FPT) ALTRET(CNTRL_DONE2);
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:28   

   5059  4 000327   000442 630400 2                  EPPR0   ERRMSG_FPT
         4 000330   420000 713400                    CLIMB   alt,+8192
         4 000331   405000 401760                    pmme    nvectors=11
         4 000332   000336 702000 4                  TSX2    CNTRL_DONE2

      234     5060    2           CALL M$TEMPWROC (WROC_FPT);

   5060  4 000333   000474 630400 2                  EPPR0   WROC_FPT
         4 000334   110000 713400                    CLIMB   36864
         4 000335   401000 401760                    pmme    nvectors=3

   5058  4 000336                       CNTRL_DONE2  null
      235     5061    2   CNTRL_DONE2: ;
      236     5062        /**/
      237     5063    2           TPTR$ = ADDR(JM_PT);  /* RESET PARTITION TABLES                     */

   5063  4 000336   000007 236000 5                  LDQ     7
         4 000337   000006 756000 2                  STQ     TPTR$

      238     5064    2           TPTR$$->B$PTR.SID = %SPCL1SID;

   5064  4 000340   000000 470400 3                  LDP0    TPTR$$
         4 000341   006021 236007                    LDQ     3089,DL
         4 000342   000000 752103                    STCQ    0,'03'O,PR0

      239     5065    3           DO I = 0 TO 15;

   5065  4 000343   000007 450000 2                  STZ     I

      240     5066    3                P$ = PINCRW(TPTR$,SIZEW(JM$PT)*I);

   5066  4 000344   000007 236000 2                  LDQ     I
         4 000345   000023 402003                    MPY     19,DU
         4 000346   000006 036000 2                  ADLQ    TPTR$
         4 000347   200003 756100                    STQ     P$,,AUTO

PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:29   
      241     5067    3                P$ -> JM$PT.CUR = 0;

   5067  4 000350   200003 470500                    LDP0    P$,,AUTO
         4 000351   000000 236003                    LDQ     0,DU
         4 000352   000003 552120                    STBQ    3,'20'O,PR0

      242     5068    3                P$ -> JM$PT.TOT = 0;

   5068  4 000353   000000 220003                    LDX0    0,DU
         4 000354   000004 740100                    STX0    4,,PR0

      243     5069    3                P$ -> JM$PT.CPTOT = 0;

   5069  4 000355   000003 440100                    SXL0    3,,PR0

      244     5070    3                P$ -> JM$PT.JOB$ = ADDR(NIL);

   5070  4 000356   000001 236000 xsym               LDQ     B_VECTNIL+1
         4 000357   000006 756100                    STQ     6,,PR0

      245     5071    3              END;

   5071  4 000360   000007 235000 2                  LDA     I
         4 000361   000001 035007                    ADLA    1,DL
         4 000362   000007 755000 2                  STA     I
         4 000363   000020 115007                    CMPA    16,DL
         4 000364   000344 602000 4                  TNC     s:5066

      246     5072    2           CALL IGR$RECOVERY;    /* Update acct JITs - release * files         */

   5072  4 000365   000002 631400 xsym               EPPR1   B_VECTNIL+2
         4 000366   000000 701000 xent               TSX1    IGR$RECOVERY
         4 000367   000000 011000                    NOP     0

      247     5073    2         END;

      248     5074        /**/
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:30   
      249     5075    1      CALL IGJ$JOBSTATS;         /* Housekeep the :JOBSTATS file               */

   5075  4 000370   000002 631400 xsym               EPPR1   B_VECTNIL+2
         4 000371   000000 701000 xent               TSX1    IGJ$JOBSTATS
         4 000372   000000 011000                    NOP     0

      250     5076        /**/
      251     5077        /* Get a SYSID range and BOOTID for this boot */
      252     5078        /**/
      253     5079    1      TPTR$ = ADDR(S_SYSID);

   5079  4 000373   000010 236000 5                  LDQ     8
         4 000374   000006 756000 2                  STQ     TPTR$

      254     5080    1      TPTR$$->B$PTR.SID = %SPCL1SID;

   5080  4 000375   000000 470400 3                  LDP0    TPTR$$
         4 000376   006021 236007                    LDQ     3089,DL
         4 000377   000000 752103                    STCQ    0,'03'O,PR0

      255     5081    1      FO_CITE.NXT = TPTR$->B$WORD;

   5081  4 000400   000006 471400 2                  LDP1    TPTR$
         4 000401   100000 235100                    LDA     0,,PR1
         4 000402   000212 755000 2                  STA     FO_CITE+1

      256     5082    1      FO_CITE.NUM = 0;

   5082  4 000403   000213 450000 2                  STZ     FO_CITE+2

      257     5083    1      FO_CITE.SPAN = SYSID_SPAN#;

   5083  4 000404   072460 235007                    LDA     30000,DL
         4 000405   000214 755000 2                  STA     FO_CITE+3

      258     5084    1      CALL IGN$SYSID(FO_CITE);

PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:31   
   5084  4 000406   000011 630400 5                  EPPR0   9
         4 000407   000017 631400 xsym               EPPR1   B_VECTNIL+15
         4 000410   000000 701000 xent               TSX1    IGN$SYSID
         4 000411   000000 011000                    NOP     0

      259     5085        /**/
      260     5086    1      IF IG_BOOTFLAG = I_RCVR_DUMPF

   5086  4 000412   000005 235000 2                  LDA     IG_BOOTFLAG
         4 000413   000012 115007                    CMPA    10,DL
         4 000414   000430 601000 4                  TNZ     WOOPS

      261     5087    2      THEN DO;

      262     5088    2           B$JIT.UNAME='RCVR2';

   5088  4 000415   000000 470400 xsym               LDP0    B$JIT$
         4 000416   040100 100400                    MLR     fill='040'O
         4 000417   000026 000005 3                  ADSC9   R2ACCT+2                 cn=0,n=5
         4 000420   000003 000014                    ADSC9   3,,PR0                   cn=0,n=12

      263     5089    2           B$JIT.CCBUF='RCVR1';

   5089  4 000421   040100 100400                    MLR     fill='040'O
         4 000422   000030 000005 3                  ADSC9   R2ACCT+4                 cn=0,n=5
         4 000423   000033 000400                    ADSC9   27,,PR0                  cn=0,n=256

      264     5090    2           CALL M$LDTRC(GET_RCVR2) ALTRET(WOOPS);

   5090  4 000424   000002 630400 3                  EPPR0   GET_RCVR2
         4 000425   400006 713400                    CLIMB   alt,+6
         4 000426   403000 401760                    pmme    nvectors=7
         4 000427   000430 702000 4                  TSX2    WOOPS

   5089  4 000430                       WOOPS        null
      265     5091    2   WOOPS:  ;
      266     5092    2         END;
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:32   

      267     5093    1      CALL IGL$HLP;

   5093  4 000430   000002 631400 xsym               EPPR1   B_VECTNIL+2
         4 000431   000000 701000 xent               TSX1    IGL$HLP
         4 000432   000000 011000                    NOP     0

   5086  4 000433                       G1DONE       null
      268     5094    1   G1DONE: ;                     /*  HLP DOESNT RETURN                         */
      269     5095    1      GOTO G1DONE;

   5095  4 000433   000433 710000 4                  TRA     G1DONE
      270     5096        /**/
      271     5097    1   END;
      272     5098        /**/
      273     5099        /**/

PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:33   
--  Include file information  --

   JM$STRUCT.:E05TOU  is referenced.
   FOO_MAC_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   I_SUBS_C.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IGM$MAIN.
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:34   

 **** Variables and constants ****

  ****  Section 002  Data  IGM$MAIN

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

   215-0-0/c STRC(63)    r     1 CNTRLFILE                210-0-0/b STRC        r     1 CNTRLKEY
   374-0-0/d STRC(1080)  r     1 CNTRL_CLOSE              250-0-0/d STRC(2088)  r     1 CNTRL_OPEN
   342-0-0/d STRC(504)   r     1 CNTRL_READ               360-0-0/d STRC(432)   r     1 CNTRL_WRITE
   442-0-0/d STRC(936)   r     1 ERRMSG_FPT               211-0-0/w STRC(144)   r     1 FO_CITE
     7-0-0/w UBIN        r     1 I                          5-0-0/w UBIN        r     1 IG_BOOTFLAG
     4-0-0/w UBIN        r     1 IP_PTB_UNITS               3-0-0/w BIT         r     1 IP_WSQ0PT
     2-0-0/w PTR         r     1 PPUT$                    242-0-0/d STRC(216)   r     1 PPUT_CVM
     0-0-0/d DSCR        r     1 PPUT_DESC                  2-0-0/w STRC        r     1 PPUT_REDEF
   436-0-0/w STRC(126)   r     1 RDONLY                   236-0-0/d STRC(144)   r     1 SEE_DVTS
   222-0-0/d STRC(144)   r     1 SEE_MONITOR              232-0-0/d STRC(144)   r     1 SEE_PPUT
   226-0-0/d STRC(144)   r     1 SEE_TIGR                 217-0-0/c STRC(72)    r     1 SYSACCT
     6-0-0/w PTR         r     1 TPTR$                    432-0-0/w STRC(126)   r     1 VEHICLE
   474-0-0/d STRC(288)   r     1 WROC_FPT

  ****  Section 003 RoData IGM$MAIN

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     2-0-0/d STRC(576)   r     1 GET_RCVR2                 24-0-0/c STRC(72)    r     1 R2ACCT
    22-0-0/c STRC(54)    r     1 R2NAME                     0-0-0/w PTR         r     1 TPTR$$

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 P$                         4-0-0/w UBIN        r     1 PP
     6-0-0/w UBIN        r     1 PPUT_OFFSET                5-0-0/w UBIN        r     1 VP

PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:35   
  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$IS$                      0-0-0/w PTR         r     1 B$JIT$
     0-0-0/w PTR         r     1 B$TCB$                     0-0-0/w UBIN        r     1 B_CNTRL_HIGH
     0-0-0/w UBIN        r     1 B_CNTRL_LOW                0-0-0/c STRC(1116)  r     1 ERRBUF
     0-0-0/b BIT         r     1 ERRCODE                    0-0-0/w UBIN        r     1 HW_PTB_UNITS
     0-0-0/w BIT         r     1 HW_WSQ0PT                  0-0-0/w UBIN        r     1 IT_BOOTFLAG
     0-0-0/w UBIN        r     1 JM_PT                      0-0-0/w UBIN        r     1 S_SYSID

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w BIT         r     1 ABIT                       0-0-0/w STRC(2448)  r     1 B$ALT
     0-0-0/w BIT         r     1 B$BIT                      0-0-0/d STRC(8856)  r     1 B$JIT
     0-0-0/w STRC        r     1 B$PTR                      0-0-0/w STRC(144)   r     1 B$TCB
     0-0-0/w UBIN        r     1 B$WORD                     0-0-0/w STRC(684)   r     1 JM$PT
     0-0-0N  NULL        r     1 M$CONFG


   Procedure IGM$MAIN requires 284 words for executable code.
   Procedure IGM$MAIN requires 10 words of local(AUTO) storage.

    No errors detected in file IGM$MAIN.:E05TSI    .
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:36   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:37   
          MINI XREF LISTING

ABIT
      4282**DCL      5008<>CALL
B$ALT.CODE
      4970**DCL      4970--REDEF    4971--REDEF    4971--REDEF
B$ALT.ERR
      4971**DCL      5036>>ASSIGN   5058>>ASSIGN
B$ALT.ERR.CODE
      4972**DCL      5033>>IF
B$ALT.ERR.ERR#
      4972**DCL      4972--REDEF
B$ALT.EVID
      4971**DCL      4971--REDEF    4971--REDEF
B$BIT
      4342**DCL      5001>>ASSIGN
B$IS$
      4272**DCL      4995>>ASSIGN
B$JIT.CCBUF
      2566**DCL      5089<<ASSIGN
B$JIT.CPFLAGS1.SLEAZE
      2572**DCL      2572--REDEF
B$JIT.DDLL
      2636**DCL      4985>>ASSIGN
B$JIT.ERR.MID
      2479**DCL      2479--REDEF
B$JIT.JRESPEAK
      2640**DCL      2641--REDEF
B$JIT.ORIGINATOR_PORT.FROM_CR
      2749**DCL      2749--REDEF    2750--REDEF
B$JIT.PNR
      2653**DCL      2653--REDEF
B$JIT.TSLINE
      2747**DCL      2748--REDEF
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:38   
B$JIT.UNAME
      2478**DCL      5088<<ASSIGN
B$JIT$
      4271**DCL      2473--IMP-PTR  4985>>ASSIGN   5088>>ASSIGN   5089>>ASSIGN
B$PTR.SID
      4340**DCL      5000<<ASSIGN   5003<<ASSIGN   5006<<ASSIGN   5024<<ASSIGN   5027<<ASSIGN   5049<<ASSIGN
      5052<<ASSIGN   5064<<ASSIGN   5080<<ASSIGN
B$TCB.ALT$
      4966**DCL      5033>>IF       5036>>ASSIGN   5058>>ASSIGN
B$TCB$
      4976**DCL      5033>>IF       5036>>ASSIGN   5058>>ASSIGN
B$WORD
      4341**DCL      5004>>ASSIGN   5007>>ASSIGN   5081>>ASSIGN
B_CNTRL_HIGH
      4262**DCL      5026--ASSIGN   5051--ASSIGN
B_CNTRL_LOW
      4261**DCL      5023--ASSIGN   5048--ASSIGN
CNTRLFILE
      4445**DCL      4616--DCLINIT
CNTRLKEY
      4354**DCL      4680--DCLINIT  4681--DCLINIT  4722--DCLINIT
CNTRL_CLOSE
      4762**DCL      5030<>CALL     5055<>CALL
CNTRL_CLOSE.SN_
      4762**DCL      4762--REDEF
CNTRL_CLOSE.UTL_
      4763**DCL      4763--REDEF
CNTRL_CLOSE.V
      4767**DCL      4762--DCLINIT
CNTRL_CLOSE.V.EXPIRE#
      4777**DCL      4777--REDEF
CNTRL_CLOSE.V.TYPE#
      4775**DCL      4775--REDEF
CNTRL_CLOSE.V.XTNSIZE#
      4772**DCL      4772--REDEF    4774--REDEF
CNTRL_DONE
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:39   
      5036**LABEL    5031--GOTO     5037--CALLALT
CNTRL_DONE2
      5058**LABEL    5056--GOTO     5059--CALLALT
CNTRL_ERR
      5033**LABEL    5022--CALLALT  5029--CALLALT  5030--CALLALT
CNTRL_ERR2
      5053**LABEL    5047--CALLALT  5054--CALLALT  5055--CALLALT
CNTRL_OPEN
      4615**DCL      5022<>CALL     5047<>CALL
CNTRL_OPEN.ACSVEH_
      4617**DCL      4618--REDEF
CNTRL_OPEN.ALTKEYS_
      4623**DCL      4624--REDEF    4624--REDEF
CNTRL_OPEN.HDR_
      4622**DCL      4623--REDEF
CNTRL_OPEN.TAB_
      4621**DCL      4622--REDEF
CNTRL_OPEN.UHL_
      4615**DCL      4616--REDEF    4616--REDEF
CNTRL_OPEN.V
      4624**DCL      4615--DCLINIT
CNTRL_OPEN.V.EXIST#
      4628**DCL      5021<<ASSIGN
CNTRL_OPEN.V.FSN#
      4655**DCL      4655--REDEF    4655--REDEF
CNTRL_OPEN.V.FUN#
      4634**DCL      5020<<ASSIGN   5046<<ASSIGN
CNTRL_OPEN.WSN_
      4621**DCL      4621--REDEF
CNTRL_READ
      4680**DCL      5054<>CALL
CNTRL_READ.BUF_.BOUND
      4682**DCL      5053<<ASSIGN
CNTRL_READ.BUF_.BUF$
      4683**DCL      5050<<ASSIGN   5053>>ASSIGN
CNTRL_READ.STATION_
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:40   
      4683**DCL      4684--REDEF
CNTRL_READ.V
      4684**DCL      4680--DCLINIT
CNTRL_READ.V.DVBYTE.REREAD#
      4695**DCL      4695--REDEF
CNTRL_READ.V.INDX#
      4693**DCL      4693--REDEF
CNTRL_WRITE
      4722**DCL      5029<>CALL
CNTRL_WRITE.BUF_.BOUND
      4722**DCL      5028<<ASSIGN
CNTRL_WRITE.BUF_.BUF$
      4724**DCL      5025<<ASSIGN   5028>>ASSIGN
CNTRL_WRITE.STATION_
      4724**DCL      4724--REDEF
CNTRL_WRITE.V
      4725**DCL      4722--DCLINIT
CNTRL_WRITE.V.DVBYTE.VFC#
      4731**DCL      4731--REDEF
ERRBUF
      4279**DCL      4891--DCLINIT  4892--DCLINIT
ERRBUF.TEXT
      4281**DCL      4863--DCLINIT
ERRCODE
      4278**DCL      4862--DCLINIT  5036<<ASSIGN   5058<<ASSIGN
ERRMSG_FPT
      4862**DCL      5037<>CALL     5059<>CALL
ERRMSG_FPT.V
      4866**DCL      4862--DCLINIT
FO_CITE
      4372**DCL      5084<>CALL
FO_CITE.NUM
      4408**DCL      5082<<ASSIGN
FO_CITE.NXT
      4405**DCL      5081<<ASSIGN
FO_CITE.SPAN
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:41   
      4411**DCL      5083<<ASSIGN
G1DONE
      5086**LABEL    5095--GOTO
GET_RCVR2
      4913**DCL      5090<>CALL
GET_RCVR2.V
      4915**DCL      4915--DCLINIT
HW_PTB_UNITS
      4276**DCL      5002--ASSIGN
HW_WSQ0PT
      4274**DCL      4999--ASSIGN
I
      4351**DCL      4987<<DOINDEX  4988>>ASSIGN   5014<<DOINDEX  5065<<DOINDEX  5066>>ASSIGN
IGG$GETFILES
      4254**DCL-ENT  5008--CALL
IGJ$JOBSTATS
      4252**DCL-ENT  5075--CALL
IGL$HLP
      4251**DCL-ENT  5093--CALL
IGN$SYSID
      4253**DCL-ENT  5084--CALL
IGR$PATCHF
      4256**DCL-ENT  5009--CALL
IGR$RECOVERY
      4255**DCL-ENT  5072--CALL
IGS$SYSMAK
      4249**DCL-ENT  5010--CALL
IGT$TDFILE
      4250**DCL-ENT  5042--CALL
IG_BOOTFLAG
      4343**DCL      5007<<ASSIGN   5019>>IF       5086>>IF
IP_PTB_UNITS
      4275**DCL      5004<<ASSIGN
IP_WSQ0PT
      4273**DCL      5001<<ASSIGN
IT_BOOTFLAG
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:42   
      4260**DCL      5005--ASSIGN
JM$PT
      4298**DCL      5066--ASSIGN
JM$PT.CPTOT
      4313**DCL      5069<<ASSIGN
JM$PT.CUR
      4311**DCL      5067<<ASSIGN
JM$PT.JOB$
      4330**DCL      5070<<ASSIGN
JM$PT.TOT
      4316**DCL      5068<<ASSIGN
JM_PT
      4268**DCL      5063--ASSIGN
M$CLOSE
        22**DCL-ENT  5030--CALL     5055--CALL
M$CVM
        60**DCL-ENT  4992--CALL     5016--CALL
M$ERRMSG
        85**DCL-ENT  5037--CALL     5059--CALL
M$LDTRC
        35**DCL-ENT  5090--CALL
M$OPEN
        22**DCL-ENT  5022--CALL     5047--CALL
M$READ
        23**DCL-ENT  5054--CALL
M$SAD
        61**DCL-ENT  4981--CALL     4996--CALL     4997--CALL     4998--CALL
M$TEMPWROC
        66**DCL-ENT  5038--CALL     5060--CALL
M$WRITE
        23**DCL-ENT  5029--CALL
P$
      4346**DCL      5066<<ASSIGN   5067>>ASSIGN   5068>>ASSIGN   5069>>ASSIGN   5070>>ASSIGN
PP
      4347**DCL      4988<<ASSIGN   4989>>ASSIGN
PPUT$
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:43   
      4264**DCL      4265--REDEF    4984>>ASSIGN   4995<<ASSIGN
PPUT_CVM
      4534**DCL      4992<>CALL     5016<>CALL
PPUT_CVM.V
      4534**DCL      4534--DCLINIT
PPUT_CVM.V.PHYSICAL#
      4534**DCL      4991<<ASSIGN
PPUT_CVM.V.PPNO#
      4535**DCL      4989<<ASSIGN   5013<<ASSIGN
PPUT_CVM.V.VPNO#
      4536**DCL      4990<<ASSIGN   5015<<ASSIGN
PPUT_DESC
      4263**DCL      4984<<ASSIGN   4987>>DOINDEX  4987>>DOINDEX  4987>>DOINDEX  5014>>DOINDEX  5014>>DOINDEX
      5014>>DOINDEX
PPUT_OFFSET
      4349**DCL      4985<<ASSIGN   4986>>ASSIGN   4995>>ASSIGN   5012>>ASSIGN
PPUT_REDEF.SID
      4267**DCL      4983<<ASSIGN
R2ACCT
      4962**DCL      4913--DCLINIT
R2NAME
      4946**DCL      4913--DCLINIT
RDONLY
      4825**DCL      4617--DCLINIT
RDONLY.Q
      4826**DCL      4825--DCLINIT
SEE_DVTS
      4519**DCL      4998<>CALL
SEE_DVTS.V
      4519**DCL      4519--DCLINIT
SEE_MONITOR
      4474**DCL      4996<>CALL
SEE_MONITOR.V
      4474**DCL      4474--DCLINIT
SEE_PPUT
      4504**DCL      4981<>CALL
PL6.E3A0      #001=IGM$MAIN File=IGM$MAIN.:E05TSI                                TUE 07/29/97 22:36 Page:44   
SEE_PPUT.V
      4504**DCL      4504--DCLINIT
SEE_TIGR
      4489**DCL      4997<>CALL
SEE_TIGR.V
      4489**DCL      4489--DCLINIT
SYSACCT
      4460**DCL      4620--DCLINIT
S_SYSID
      4269**DCL      5079--ASSIGN
TPTR$
      4350**DCL      4345--DCLINIT  4999<<ASSIGN   5001>>ASSIGN   5002<<ASSIGN   5004>>ASSIGN   5005<<ASSIGN
      5007>>ASSIGN   5008>>CALL     5023<<ASSIGN   5025>>ASSIGN   5026<<ASSIGN   5028>>ASSIGN   5048<<ASSIGN
      5050>>ASSIGN   5051<<ASSIGN   5053>>ASSIGN   5063<<ASSIGN   5066>>ASSIGN   5079<<ASSIGN   5081>>ASSIGN
TPTR$$
      4345**DCL      5000>>ASSIGN   5003>>ASSIGN   5006>>ASSIGN   5024>>ASSIGN   5027>>ASSIGN   5049>>ASSIGN
      5052>>ASSIGN   5064>>ASSIGN   5080>>ASSIGN
VEHICLE
      4793**DCL      4618--DCLINIT
VEHICLE.Q
      4794**DCL      4793--DCLINIT
VP
      4348**DCL      4986<<ASSIGN   4990>>ASSIGN   4993<<ASSIGN   4993>>ASSIGN   5012<<ASSIGN   5015>>ASSIGN
      5017<<ASSIGN   5017>>ASSIGN
WOOPS
      5089**LABEL    5090--CALLALT
WROC_FPT
      4891**DCL      5038<>CALL     5060<>CALL
WROC_FPT.V
      4894**DCL      4891--DCLINIT
