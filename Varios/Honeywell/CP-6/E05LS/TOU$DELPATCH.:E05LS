VERSION E05

PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:1    
        1        1        /*M* TOU$DELPATCH     DEckfile Editor Routine DELETE PATCH Function */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7
        8        8        /*X* PLM=3,DCI=6,SQB=N,PRB=N,DTI=5,ENI=0,AND=Y,ECI=0,CSU=3,DIN=3,
        9        9             PRB=Y,CTI=8,CRM=109,CRT=1,NLB=N,NTB=Y,MCL=110 */
       10       10
       11       11        /*P*  NAME:        TOU$DELPATCH
       12       12              AUTHOR:      Scott S. Sheppard
       13       13              PURPOSE:     DEckfile Editor Routine DELETE PATCH Function
       14       14              DESCRIPTION: This program is called when the DELPATCH function
       15       15                           is  invoked  by the  CP-6 deckfile editor driver.
       16       16                           This program deletes  ALL  patches from an object
       17       17                           deck contained in the deckfile.
       18       18              REFERENCE:   CP-6 Release C0M0
       19       19              LAST UPDATE: 10/27/83
       20       20        */
       21       21
       22       22        /*F*  NAME:        TOU$DELPATCH
       23       23              DESCRIPTION: Procedure Nesting Hierarchy
       24       24
       25       25              TOU$DELPATCH: procedure
       26       26                 DP_INIT_DUP: procedure
       27       27                 DP_COMMAND_SETUP: procedure
       28       28                 DP_FIND_DECK: procedure ALTRET
       29       29                 DP_DELETE_PATCHES: procedure ALTRET
       30       30                    DP_CHECK_PATCHES_EXIST: procedure ALTRET
       31       31                    DP_REDUCE_TO_DKEND: procedure ALTRET
       32       32                    DP_SAVE_CHANGED_DECK: procedure ALTRET
       33       33                    DP_PRINT_PATCHED_DECK: procedure
       34       34        */
       35       35        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:2    
       36       36        TOU$DELPATCH: PROC ;
       37       37
       38       38        /* Include Files */
       39       39
       40       40           %INCLUDE TOU_DEER_M ;
       41     1451           %INCLUDE TOU_RQSTS_E ;
       42     1526           %INCLUDE TO_PERR_C ;
       43     2111           %INCLUDE XU_MACRO_C ;
       44     5217
       45     5218        /* Macros */
       46     5219
       47     5220           %DUP (STCLASS = SYMREF) ;
       48     5363           %BCD_B (STCLASS = "BASED (DUP.BCD_V.PTR$)") ;
       49     5375           %BCD_KEY (STCLASS = SYMREF) ;
       50     5389           %BINARY_KEY (STCLASS = SYMREF) ;
       51     5403           %OBJECT (STCLASS = SYMREF) ;
       52     5466           %OBJECT_KEY (STCLASS = SYMREF) ;
       53     5479           %OBJECT_REFLIST_KEY (STCLASS = SYMREF) ;
       54     5493           %OBJECT_SEARCH_KEY (STCLASS = SYMREF) ;
       55     5505
       56     5506        /* Variables */
       57     5507
       58     5508    1      DCL BCD#           UBIN WORD SYMREF ;
       59     5509    1      DCL BIN#           UBIN WORD SYMREF ;
       60     5510           %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:3    
       61     5511        /* External Entry Points */
       62     5512
       63     5513    1      DCL TOU$DU_SET_DF_FID              ENTRY ALTRET ;
       64     5514    1      DCL TOU$DU_OPEN_DF                 ENTRY ALTRET ;
       65     5515    1      DCL TOU$DU_CLOSE_DF                ENTRY ALTRET ;
       66     5516
       67     5517    1      DCL TOU$DU_USER_WRITE              ENTRY ALTRET ;
       68     5518    1      DCL TOU$DU_PRINTER_WRITE           ENTRY ALTRET ;
       69     5519    1      DCL TOU$DU_UPDATE_LOG              ENTRY ALTRET ;
       70     5520
       71     5521    1      DCL TOU$CHECKSUM                   ENTRY (4) ALTRET ;
       72     5522    1      DCL TOU$REFORM_DECK_CHECKSUM       ENTRY (4) ALTRET ;
       73     5523
       74     5524    1      DCL TOU$L_SHOW_DCB                 ENTRY ;
       75     5525
       76     5526    1      DCL TOU$DFU_DF_DL_DECK             ENTRY ALTRET ;
       77     5527    1      DCL TOU$DFU_DF_CHECK_FOR_KEY       ENTRY ALTRET ;
       78     5528    1      DCL TOU$DFU_DF_RD_BINARY           ENTRY ALTRET ;
       79     5529    1      DCL TOU$DFU_DF_RD_BCD_CARDS        ENTRY ALTRET ;
       80     5530    1      DCL TOU$DFU_DF_RD_OBJECT_REFLIST   ENTRY ALTRET ;
       81     5531    1      DCL TOU$DFU_DF_RD_LOG              ENTRY ALTRET ;
       82     5532    1      DCL TOU$DFU_DF_WR_OBJECT           ENTRY ALTRET ;
       83     5533    1      DCL TOU$DFU_DF_WR_BINARY           ENTRY ALTRET ;
       84     5534    1      DCL TOU$DFU_DF_WR_BCD_CARDS        ENTRY ALTRET ;
       85     5535    1      DCL TOU$DFU_DF_WR_OBJECT_REFLIST   ENTRY ALTRET ;
       86     5536    1      DCL TOU$DFU_DF_WR_LOG              ENTRY ALTRET ;
       87     5537           %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:4    
       88     5538        /* ********************
       89     5539           ********************
       90     5540           **  Main Program  **
       91     5541           ********************
       92     5542           ******************** */
       93     5543
       94     5544    1      CALL DP_INIT_DUP ;
       95     5545    1      CALL DP_COMMAND_SETUP ALTRET (ERROR_RETURN) ;
       96     5546    1      CALL TOU$L_SHOW_DCB ;
       97     5547
       98     5548    1      CALL TOU$DU_OPEN_DF ALTRET (ERROR_RETURN) ;
       99     5549    1      CALL DP_FIND_DECK ALTRET (ERROR_RETURN) ;
      100     5550    1      CALL DP_DELETE_PATCHES ALTRET (ERROR_RETURN) ;
      101     5551    1      CALL TOU$DU_CLOSE_DF ALTRET (ERROR_RETURN) ;
      102     5552
      103     5553        /* NORMAL_RETURN: */
      104     5554    1      DUP.MSG_CODE = %T$DP_SUCCESS;
      105     5555    1      CALL TOU$DU_USER_WRITE ;
      106     5556    1      RETURN ;
      107     5557
      108     5558    1   ERROR_RETURN:
      109     5559    1      CALL TOU$DU_CLOSE_DF ;
      110     5560    1      DUP.MSG_CODE = %T$DP_FAILURE;
      111     5561    1      CALL TOU$DU_USER_WRITE ;
      112     5562    1      RETURN ;
      113     5563
      114     5564        /* ********************
      115     5565           ********************
      116     5566           **  End Of  Main  **
      117     5567           ********************
      118     5568           ******************** */
      119     5569        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:5    
      120     5570        /*I*  NAME:        DP_INIT_DUP
      121     5571              AUTHOR:      Scott S. Sheppard
      122     5572              PURPOSE:     Initilization
      123     5573              INTERFACE:   None called.
      124     5574              INPUT:       Set of system equates.
      125     5575              OUTPUT:      DUP
      126     5576              DESCRIPTION: This procedure initializes variables to
      127     5577                           appropriate starting values.
      128     5578        */
      129     5579
      130     5580    1   DP_INIT_DUP: PROC ;
      131     5581
      132     5582        /* Code */
      133     5583
      134     5584    2      DUP.HDR_CODE = %H$DELPATCH ;
      135     5585    2      DUP.LINE_VFC = %SKIP_WRITE ;
      136     5586    2      DUP.FORCE_NEW_PAGE = %TRUE ;
      137     5587    2      DUP.DF.ENTERED = %FALSE ;
      138     5588    2      DUP.DF.OPEN_TYPE = %UPDATE_FILE ;
      139     5589    2      DUP.DF.REPORT_ERROR = %TRUE ;
      140     5590    2      DUP.DF.CLOSE_TYPE = %SAVE_FILE ;
      141     5591    2      RETURN ;
      142     5592
      143     5593    2   END DP_INIT_DUP ;
      144     5594        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:6    
      145     5595        /*I*  NAME:        DP_COMMAND_SETUP
      146     5596              AUTHOR:      Scott S. Sheppard
      147     5597              PURPOSE:     Sets up DELPATCH Command
      148     5598              INTERFACE:   TOU$DU_SET_DF_FID
      149     5599              INPUT:       DUP.CMD$ - pointer to the parse control block
      150     5600              OUTPUT:      DUP.DF.HOLD_AREA
      151     5601                           DUP.DF.HOLD_AREA_LGTH
      152     5602                           DUP.DF.ENTERED
      153     5603                           OBJECT_SEARCH_KEY
      154     5604              DESCRIPTION: This procedure sets up the  DELPATCH command from
      155     5605                           information entered by the user.    DUP.CMD$ is a
      156     5606                           pointer to a   parse control block  that contains
      157     5607                           the tokens entered by the user.
      158     5608                           COMMAND FORMS:
      159     5609              Case 1: DP <object key>
      160     5610              Case 2: DP <object key> FROM <deckfile fid>
      161     5611        */
      162     5612        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:7    
      163     5613    1   DP_COMMAND_SETUP: PROC ALTRET ;
      164     5614
      165     5615    2      DCL OUTBLK#                    UBIN WORD ALIGNED ;
      166     5616    2      DCL OUTBLK$                    PTR ALIGNED ;
      167     5617           %PARSE$OUT (STCLASS = BASED) ;
      168     5662           %PARSE$SYM (STCLASS = BASED) ;
      169     5700
      170     5701        /* Code */
      171     5702
      172     5703    3      DO OUTBLK# = 0 TO DUP.CMD$ -> OUT$BLK.NSUBLKS - 1 ;
      173     5704    3         OUTBLK$ = DUP.CMD$ -> OUT$BLK.SUBLK$(OUTBLK#) ;
      174     5705    4         DO CASE (OUTBLK$ -> OUT$BLK.CODE) ;
      175     5706    4            CASE (%OBJKEY) ;
      176     5707    4               OBJECT_SEARCH_KEY.DATA = OUTBLK$ -> OUT$SYM.TEXT ;
      177     5708    4            CASE (%DECKFILE_FID) ;
      178     5709    4               DUP.DF.ENTERED = %TRUE ;
      179     5710    4               DUP.HOLD_AREA = OUTBLK$ -> OUT$SYM.TEXT ;
      180     5711    4               DUP.HOLD_AREA_LGTH = OUTBLK$ -> OUT$SYM.COUNT ;
      181     5712    4               CALL TOU$DU_SET_DF_FID ALTRET (ERROR) ;
      182     5713    4         END /* CASE */ ;
      183     5714    3      END /* DO */ ;
      184     5715
      185     5716    2      IF DUP.DF.ENTERED
      186     5717    2      THEN /* FID set from DEER command */ ;
      187     5718    2      ELSE CALL TOU$DU_SET_DF_FID ALTRET (ERROR) ;
      188     5719    2      RETURN ;
      189     5720
      190     5721    2   ERROR:
      191     5722    2      ALTRETURN ;
      192     5723
      193     5724    2   END DP_COMMAND_SETUP ;
      194     5725        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:8    
      195     5726        /*I*  NAME:        DP_FIND_DECK
      196     5727              AUTHOR:      Scott S. Sheppard
      197     5728              PURPOSE:     Locates Object Deck
      198     5729              INTERFACE:   TOU$DFU_DF_CHECK_FOR_KEY
      199     5730                           TOU$DFU_DF_RD_BINARY
      200     5731                           TOU$DFU_DF_RD_BCD_CARDS
      201     5732                           TOU$DFU_DF_RD_OBJECT_REFLIST
      202     5733                           TOU$DU_USER_WRITE
      203     5734                           TOU$DFU_DF_RD_LOG
      204     5735              INPUT:       OBJECT_SEARCH_KEY
      205     5736                           OBJECT
      206     5737              OUTPUT:      OBJECT_KEY
      207     5738                           BINARY_KEY
      208     5739                           BIN#
      209     5740                           BCD_KEY
      210     5741                           BCD#
      211     5742                           DUP.MSG_CODE
      212     5743              DESCRIPTION: This procedure locates and reads all of the records
      213     5744                           of the object deck to be unpatched.
      214     5745        */
      215     5746        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:9    
      216     5747    1   DP_FIND_DECK: PROC ALTRET ;
      217     5748
      218     5749        /* Code */
      219     5750
      220     5751    2      OBJECT_KEY.DATA = OBJECT_SEARCH_KEY.DATA ;
      221     5752    2      CALL TOU$DFU_DF_CHECK_FOR_KEY ALTRET (NOT_FOUND) ;
      222     5753
      223     5754    2      BINARY_KEY.DECK# = OBJECT.DECK# ;
      224     5755    2      BIN# = OBJECT.BINARY_COUNT ;
      225     5756    2      CALL TOU$DFU_DF_RD_BINARY ALTRET (ERROR) ;
      226     5757
      227     5758    2      BCD_KEY.DECK# = OBJECT.DECK# ;
      228     5759    2      BCD# = OBJECT.TOTAL_COUNT - OBJECT.BINARY_COUNT - 1 ;
      229     5760    2      CALL TOU$DFU_DF_RD_BCD_CARDS ALTRET (ERROR) ;
      230     5761
      231     5762    2      OBJECT_REFLIST_KEY.DECK# = OBJECT.DECK# ;
      232     5763    2      CALL TOU$DFU_DF_RD_OBJECT_REFLIST ALTRET (ERROR) ;
      233     5764    2      CALL TOU$DFU_DF_RD_LOG ALTRET (ERROR) ;
      234     5765    2      RETURN ;
      235     5766
      236     5767    2   NOT_FOUND:
      237     5768    2      DUP.MSG_CODE = %E$DFD_NO_OBJ_IN_DF ;
      238     5769    2      CALL TOU$DU_USER_WRITE ;
      239     5770    2   ERROR:
      240     5771    2      ALTRETURN ;
      241     5772
      242     5773    2   END DP_FIND_DECK ;
      243     5774        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:10   
      244     5775        /*I*  NAME:        DP_DELETE_PATCHES
      245     5776              AUTHOR:      Scott S. Sheppard
      246     5777              PURPOSE:     Delpatch Deck Driver
      247     5778              INTERFACE:   DP_CHECK_PATCHES_EXIST
      248     5779                           DP_REDUCE_TO_DKEND
      249     5780                           DP_SAVE_CHANGED_DECK
      250     5781                           DP_PRINT_DELETED_PATCHES
      251     5782              INPUT:       No system data accessed.
      252     5783              OUTPUT:      DUP.BREAK_DISABLED
      253     5784              DESCRIPTION: This procedure is the driver which removes the patch
      254     5785                           cards from the object deck.
      255     5786        */
      256     5787
      257     5788    1   DP_DELETE_PATCHES: PROC ALTRET ;
      258     5789
      259     5790        /* Code */
      260     5791
      261     5792    2      CALL DP_CHECK_PATCHES_EXIST ALTRET (ERROR) ;
      262     5793    2      CALL DP_REDUCE_TO_DKEND ;
      263     5794
      264     5795    2      DUP.BREAK_DISABLED = %TRUE ;
      265     5796    2      CALL DP_SAVE_CHANGED_DECK ALTRET (ERROR) ;
      266     5797    2      CALL DP_PRINT_DELETED_PATCHES ;
      267     5798    2      DUP.BREAK_DISABLED = %FALSE ;
      268     5799    2      RETURN ;
      269     5800
      270     5801    2   ERROR:
      271     5802    2      DUP.BREAK_DISABLED = %FALSE ;
      272     5803    2      ALTRETURN ;
      273     5804
      274     5805    2   /* END DP_DELETE_PATCHES */ ;
      275     5806        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:11   
      276     5807        /*I*  NAME:        DP_CHECK_PATCHES_EXIST
      277     5808              AUTHOR:      Scott S. Sheppard
      278     5809              PURPOSE:     Checks that Patches Exist
      279     5810              INTERFACE:   TOU$DU_USER_WRITE
      280     5811              INPUT:       BCD#
      281     5812              OUTPUT:      DUP.MSG_CODE
      282     5813              DESCRIPTION: This procedure ensures that patch cards actually
      283     5814                           exist for the object deck.
      284     5815        */
      285     5816
      286     5817    2   DP_CHECK_PATCHES_EXIST: PROC ALTRET ;
      287     5818
      288     5819        /* Code */
      289     5820
      290     5821    3      IF BCD# > 1
      291     5822    3      THEN RETURN ;
      292     5823    4      ELSE DO ;
      293     5824    4              DUP.MSG_CODE = %E$DCPE_NO_PATCHES ;
      294     5825    4              CALL TOU$DU_USER_WRITE ;
      295     5826    4              ALTRETURN ;
      296     5827    4           END /* ELSE */ ;
      297     5828
      298     5829    3   END DP_CHECK_PATCHES_EXIST ;
      299     5830        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:12   
      300     5831        /*I*  NAME:        DP_REDUCE_TO_DKEND
      301     5832              AUTHOR:      Scott S. Sheppard
      302     5833              PURPOSE:     Adds $DKEND CARD
      303     5834              INTERFACE:   None Called.
      304     5835              INPUT:       BCD# - current number of BCD cards (all patches)
      305     5836                           DKEND - $DKEND card stored
      306     5837              OUTPUT:      BCD# - incremented by 1 to include the $DKEND
      307     5838                           BCD_B - $DKEND card added to the array
      308     5839              DESCRIPTION: This procedure reduces the list of BCD cards for the object
      309     5840                           deck to one card, the deck end card.
      310     5841        */
      311     5842
      312     5843    2   DP_REDUCE_TO_DKEND: PROC ;
      313     5844
      314     5845        /* Code */
      315     5846
      316     5847    3      BCD_B(0) = BCD_B(BCD# - 1) ;
      317     5848    3      BCD# = 1 ;
      318     5849    3      RETURN ;
      319     5850
      320     5851    3   END DP_REDUCE_TO_DKEND ;
      321     5852        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:13   
      322     5853        /*I*  NAME:        DP_SAVE_CHANGED_DECK
      323     5854              AUTHOR:      Scott S. Sheppard
      324     5855              PURPOSE:     Saves New Object Deck Records
      325     5856              INTERFACE:   TOU$CHECKSUM
      326     5857                           TOU$REFORM_DECK_CHECKSUM
      327     5858                           TOU$DU_UPDATE_LOG
      328     5859                           TOU$DFU_DF_DL_DECK
      329     5860                           TOU$DFU_DF_WR_OBJECT
      330     5861                           TOU$DFU_DF_WR_BINARY
      331     5862                           TOU$DFU_DF_WR_BCD_CARDS
      332     5863                           TOU$DFU_DF_WR_OBJECT_REFLIST
      333     5864                           TOU$DFU_DF_WR_LOG
      334     5865              INPUT:       OBJECT
      335     5866                           BCD#
      336     5867              OUTPUT:      Updated records written to the deckfile.
      337     5868              DESCRIPTION: This procedure deletes the old object deck and saves
      338     5869                           the new one in its place.
      339     5870        */
      340     5871        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:14   
      341     5872    2   DP_SAVE_CHANGED_DECK: PROC ALTRET ;
      342     5873
      343     5874        /* Code */
      344     5875
      345     5876    3      CALL TOU$DFU_DF_DL_DECK ALTRET (ERROR) ;
      346     5877    3      OBJECT.TOTAL_COUNT = OBJECT.BINARY_COUNT + BCD# + 1 ;
      347     5878    3      CALL TOU$REFORM_DECK_CHECKSUM (,,,) ;
      348     5879    3      CALL TOU$CHECKSUM (0, ADDR(OBJECT), 23, OBJECT.CHECKSUM) ;
      349     5880    3      CALL TOU$DFU_DF_WR_OBJECT ALTRET (ERROR) ;
      350     5881
      351     5882    3      CALL TOU$DFU_DF_WR_BINARY ALTRET (SYNC_ERROR) ;
      352     5883    3      CALL TOU$DFU_DF_WR_BCD_CARDS ALTRET (SYNC_ERROR) ;
      353     5884    3      CALL TOU$DFU_DF_WR_OBJECT_REFLIST ALTRET (SYNC_ERROR) ;
      354     5885
      355     5886    3      DUP.LOG.TYPE = %T$SF_DELPATCH ;
      356     5887    3      DUP.LOG.CATALOG = ' ' ;
      357     5888    3      DUP.LOG.DECK = OBJECT_KEY.DATA ;
      358     5889    3      CALL TOU$DU_UPDATE_LOG ALTRET (SYNC_ERROR) ;
      359     5890    3      CALL TOU$DFU_DF_WR_LOG ALTRET (SYNC_ERROR) ;
      360     5891    3      RETURN ;
      361     5892
      362     5893    3   ERROR:
      363     5894    3      ALTRETURN ;
      364     5895
      365     5896    3   SYNC_ERROR:
      366     5897    3      DUP.DF.CLOSE_TYPE = %DISCARD_FILE ;
      367     5898    3      DUP.MSG_CODE = %E$PSCD_BAD_DF ;
      368     5899    3      CALL TOU$DU_USER_WRITE ;
      369     5900    3      ALTRETURN ;
      370     5901
      371     5902    3   END DP_SAVE_CHANGED_DECK ;
      372     5903        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:15   
      373     5904        /*I*  NAME:        DP_PRINT_DELETED_PATCHES
      374     5905              AUTHOR:      Scott S. Sheppard
      375     5906              PURPOSE:     Prints Patched Deck line
      376     5907              INTERFACE:   TOU$DU_USER_WRITE
      377     5908                           TOU$DU_PRINTER_WRITE
      378     5909              INPUT:       T$DP_INFORM
      379     5910              OUTPUT:      DUP.MSG_CODE - integer message number
      380     5911              DESCRIPTION: This procedure notifies the user and logs to the
      381     5912                           edit listing that patches have been deleted.
      382     5913        */
      383     5914
      384     5915    2   DP_PRINT_DELETED_PATCHES: PROC ;
      385     5916
      386     5917        /* Code */
      387     5918
      388     5919    3      DUP.MSG_CODE = %T$DP_INFORM ;
      389     5920    3      CALL TOU$DU_USER_WRITE ;
      390     5921    3      CALL TOU$DU_PRINTER_WRITE ;
      391     5922    3      RETURN ;
      392     5923
      393     5924    3   END DP_PRINT_DELETED_PATCHES ;
      394     5925    2   END DP_DELETE_PATCHES ;
      395     5926    1   END TOU$DELPATCH ;

PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:16   
--  Include file information  --

   XU_MACRO_C.:E05TOU  is referenced.
   TO_PERR_C.:E05TOU  is referenced.
   TOU_RQSTS_E.:E05TOU  is referenced.
   TOU_DEER_M.:E05TOU  is referenced.
      No diagnostics issued in procedure TOU$DELPATCH.

   Procedure TOU$DELPATCH requires 272 words for executable code.
   Procedure TOU$DELPATCH requires 14 words of local(AUTO) storage.

    No errors detected in file TOU$DELPATCH.:E05TSI    .

PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:17   

 Object Unit name= TOU$DELPATCH                               File name= TOU$DELPATCH.:E05TOU
 UTS= JUL 30 '97 06:41:59.80 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none   272    420  TOU$DELPATCH
    1  RoData even  none     6      6  TOU$DELPATCH

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes      Std        0  TOU$DELPATCH

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       0 TOU$L_SHOW_DCB
 yes     yes           Std       0 TOU$DU_CLOSE_DF
 yes     yes           Std       0 TOU$DU_OPEN_DF
 yes     yes           Std       0 TOU$DU_USER_WRITE
 yes     yes           Std       0 TOU$DU_SET_DF_FID
 yes     yes           Std       0 TOU$DFU_DF_CHECK_FOR_KEY
 yes     yes           Std       0 TOU$DFU_DF_RD_BINARY
 yes     yes           Std       0 TOU$DFU_DF_RD_BCD_CARDS
 yes     yes           Std       0 TOU$DFU_DF_RD_OBJECT_REFLIST
 yes     yes           Std       0 TOU$DFU_DF_RD_LOG
 yes     yes           Std       0 TOU$DFU_DF_DL_DECK
 yes     yes           Std       4 TOU$REFORM_DECK_CHECKSUM
 yes     yes           Std       0 TOU$DFU_DF_WR_OBJECT
 yes     yes           Std       0 TOU$DFU_DF_WR_BCD_CARDS
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:18   
 yes     yes           Std       0 TOU$DFU_DF_WR_OBJECT_REFLIST
 yes     yes           Std       0 TOU$DFU_DF_WR_LOG
 yes     yes           Std       4 TOU$CHECKSUM
 yes     yes           Std       0 TOU$DFU_DF_WR_BINARY
 yes     yes           Std       0 TOU$DU_UPDATE_LOG
 yes     yes           Std       0 TOU$DU_PRINTER_WRITE
                       nStd      0 X66_AUTO_0
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     DUP                                   BCD_KEY                               BINARY_KEY
     OBJECT                                OBJECT_KEY                            OBJECT_REFLIST_KEY
     OBJECT_SEARCH_KEY                     BCD#                                  BIN#
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:19   


        1        1        /*M* TOU$DELPATCH     DEckfile Editor Routine DELETE PATCH Function */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7
        8        8        /*X* PLM=3,DCI=6,SQB=N,PRB=N,DTI=5,ENI=0,AND=Y,ECI=0,CSU=3,DIN=3,
        9        9             PRB=Y,CTI=8,CRM=109,CRT=1,NLB=N,NTB=Y,MCL=110 */
       10       10
       11       11        /*P*  NAME:        TOU$DELPATCH
       12       12              AUTHOR:      Scott S. Sheppard
       13       13              PURPOSE:     DEckfile Editor Routine DELETE PATCH Function
       14       14              DESCRIPTION: This program is called when the DELPATCH function
       15       15                           is  invoked  by the  CP-6 deckfile editor driver.
       16       16                           This program deletes  ALL  patches from an object
       17       17                           deck contained in the deckfile.
       18       18              REFERENCE:   CP-6 Release C0M0
       19       19              LAST UPDATE: 10/27/83
       20       20        */
       21       21
       22       22        /*F*  NAME:        TOU$DELPATCH
       23       23              DESCRIPTION: Procedure Nesting Hierarchy
       24       24
       25       25              TOU$DELPATCH: procedure
       26       26                 DP_INIT_DUP: procedure
       27       27                 DP_COMMAND_SETUP: procedure
       28       28                 DP_FIND_DECK: procedure ALTRET
       29       29                 DP_DELETE_PATCHES: procedure ALTRET
       30       30                    DP_CHECK_PATCHES_EXIST: procedure ALTRET
       31       31                    DP_REDUCE_TO_DKEND: procedure ALTRET
       32       32                    DP_SAVE_CHANGED_DECK: procedure ALTRET
       33       33                    DP_PRINT_PATCHED_DECK: procedure
       34       34        */
       35       35        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:20   
       36       36        TOU$DELPATCH: PROC ;

     36  0 000000   000000 700200 xent  TOU$DELPATCH TSX0  ! X66_AUTO_0
         0 000001   000016 000000                    ZERO    14,0

       37       37
       38       38        /* Include Files */
       39       39
       40       40           %INCLUDE TOU_DEER_M ;
       41     1451           %INCLUDE TOU_RQSTS_E ;
       42     1526           %INCLUDE TO_PERR_C ;
       43     2111           %INCLUDE XU_MACRO_C ;
       44     5217
       45     5218        /* Macros */
       46     5219
       47     5220           %DUP (STCLASS = SYMREF) ;
       48     5363           %BCD_B (STCLASS = "BASED (DUP.BCD_V.PTR$)") ;
       49     5375           %BCD_KEY (STCLASS = SYMREF) ;
       50     5389           %BINARY_KEY (STCLASS = SYMREF) ;
       51     5403           %OBJECT (STCLASS = SYMREF) ;
       52     5466           %OBJECT_KEY (STCLASS = SYMREF) ;
       53     5479           %OBJECT_REFLIST_KEY (STCLASS = SYMREF) ;
       54     5493           %OBJECT_SEARCH_KEY (STCLASS = SYMREF) ;
       55     5505
       56     5506        /* Variables */
       57     5507
       58     5508    1      DCL BCD#           UBIN WORD SYMREF ;
       59     5509    1      DCL BIN#           UBIN WORD SYMREF ;
       60     5510           %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:21   
       61     5511        /* External Entry Points */
       62     5512
       63     5513    1      DCL TOU$DU_SET_DF_FID              ENTRY ALTRET ;
       64     5514    1      DCL TOU$DU_OPEN_DF                 ENTRY ALTRET ;
       65     5515    1      DCL TOU$DU_CLOSE_DF                ENTRY ALTRET ;
       66     5516
       67     5517    1      DCL TOU$DU_USER_WRITE              ENTRY ALTRET ;
       68     5518    1      DCL TOU$DU_PRINTER_WRITE           ENTRY ALTRET ;
       69     5519    1      DCL TOU$DU_UPDATE_LOG              ENTRY ALTRET ;
       70     5520
       71     5521    1      DCL TOU$CHECKSUM                   ENTRY (4) ALTRET ;
       72     5522    1      DCL TOU$REFORM_DECK_CHECKSUM       ENTRY (4) ALTRET ;
       73     5523
       74     5524    1      DCL TOU$L_SHOW_DCB                 ENTRY ;
       75     5525
       76     5526    1      DCL TOU$DFU_DF_DL_DECK             ENTRY ALTRET ;
       77     5527    1      DCL TOU$DFU_DF_CHECK_FOR_KEY       ENTRY ALTRET ;
       78     5528    1      DCL TOU$DFU_DF_RD_BINARY           ENTRY ALTRET ;
       79     5529    1      DCL TOU$DFU_DF_RD_BCD_CARDS        ENTRY ALTRET ;
       80     5530    1      DCL TOU$DFU_DF_RD_OBJECT_REFLIST   ENTRY ALTRET ;
       81     5531    1      DCL TOU$DFU_DF_RD_LOG              ENTRY ALTRET ;
       82     5532    1      DCL TOU$DFU_DF_WR_OBJECT           ENTRY ALTRET ;
       83     5533    1      DCL TOU$DFU_DF_WR_BINARY           ENTRY ALTRET ;
       84     5534    1      DCL TOU$DFU_DF_WR_BCD_CARDS        ENTRY ALTRET ;
       85     5535    1      DCL TOU$DFU_DF_WR_OBJECT_REFLIST   ENTRY ALTRET ;
       86     5536    1      DCL TOU$DFU_DF_WR_LOG              ENTRY ALTRET ;
       87     5537           %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:22   
       88     5538        /* ********************
       89     5539           ********************
       90     5540           **  Main Program  **
       91     5541           ********************
       92     5542           ******************** */
       93     5543
       94     5544    1      CALL DP_INIT_DUP ;

   5544  0 000002   000042 701000 0                  TSX1    DP_INIT_DUP
         0 000003   000000 011000                    NOP     0

       95     5545    1      CALL DP_COMMAND_SETUP ALTRET (ERROR_RETURN) ;

   5545  0 000004   000061 701000 0                  TSX1    DP_COMMAND_SETUP
         0 000005   000031 702000 0                  TSX2    ERROR_RETURN

       96     5546    1      CALL TOU$L_SHOW_DCB ;

   5546  0 000006   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000007   000000 701000 xent               TSX1    TOU$L_SHOW_DCB
         0 000010   000000 011000                    NOP     0

       97     5547
       98     5548    1      CALL TOU$DU_OPEN_DF ALTRET (ERROR_RETURN) ;

   5548  0 000011   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000012   000000 701000 xent               TSX1    TOU$DU_OPEN_DF
         0 000013   000031 702000 0                  TSX2    ERROR_RETURN

       99     5549    1      CALL DP_FIND_DECK ALTRET (ERROR_RETURN) ;

   5549  0 000014   000154 701000 0                  TSX1    DP_FIND_DECK
         0 000015   000031 702000 0                  TSX2    ERROR_RETURN

      100     5550    1      CALL DP_DELETE_PATCHES ALTRET (ERROR_RETURN) ;

   5550  0 000016   000234 701000 0                  TSX1    DP_DELETE_PATCHES
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:23   
         0 000017   000031 702000 0                  TSX2    ERROR_RETURN

      101     5551    1      CALL TOU$DU_CLOSE_DF ALTRET (ERROR_RETURN) ;

   5551  0 000020   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000021   000000 701000 xent               TSX1    TOU$DU_CLOSE_DF
         0 000022   000031 702000 0                  TSX2    ERROR_RETURN

      102     5552
      103     5553        /* NORMAL_RETURN: */
      104     5554    1      DUP.MSG_CODE = %T$DP_SUCCESS;

   5554  0 000023   000214 235007                    LDA     140,DL
         0 000024   000020 755000 xsym               STA     DUP+16

      105     5555    1      CALL TOU$DU_USER_WRITE ;

   5555  0 000025   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000026   000000 701000 xent               TSX1    TOU$DU_USER_WRITE
         0 000027   000000 011000                    NOP     0

      106     5556    1      RETURN ;

   5556  0 000030   000000 702200 xent               TSX2  ! X66_ARET

      107     5557
      108     5558    1   ERROR_RETURN:
      109     5559    1      CALL TOU$DU_CLOSE_DF ;

   5559  0 000031   000002 631400 xsym  ERROR_RETURN EPPR1   B_VECTNIL+2
         0 000032   000000 701000 xent               TSX1    TOU$DU_CLOSE_DF
         0 000033   000000 011000                    NOP     0

      110     5560    1      DUP.MSG_CODE = %T$DP_FAILURE;

   5560  0 000034   000215 235007                    LDA     141,DL
         0 000035   000020 755000 xsym               STA     DUP+16
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:24   

      111     5561    1      CALL TOU$DU_USER_WRITE ;

   5561  0 000036   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000037   000000 701000 xent               TSX1    TOU$DU_USER_WRITE
         0 000040   000000 011000                    NOP     0

      112     5562    1      RETURN ;

   5562  0 000041   000000 702200 xent               TSX2  ! X66_ARET

      113     5563
      114     5564        /* ********************
      115     5565           ********************
      116     5566           **  End Of  Main  **
      117     5567           ********************
      118     5568           ******************** */
      119     5569        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:25   
      120     5570        /*I*  NAME:        DP_INIT_DUP
      121     5571              AUTHOR:      Scott S. Sheppard
      122     5572              PURPOSE:     Initilization
      123     5573              INTERFACE:   None called.
      124     5574              INPUT:       Set of system equates.
      125     5575              OUTPUT:      DUP
      126     5576              DESCRIPTION: This procedure initializes variables to
      127     5577                           appropriate starting values.
      128     5578        */
      129     5579
      130     5580    1   DP_INIT_DUP: PROC ;

   5580  0 000042   200004 741300       DP_INIT_DUP  STX1  ! 4,,AUTO

      131     5581
      132     5582        /* Code */
      133     5583
      134     5584    2      DUP.HDR_CODE = %H$DELPATCH ;

   5584  0 000043   001440 235007                    LDA     800,DL
         0 000044   000021 755000 xsym               STA     DUP+17

      135     5585    2      DUP.LINE_VFC = %SKIP_WRITE ;

   5585  0 000045   142000 236003                    LDQ     50176,DU
         0 000046   000026 756000 xsym               STQ     DUP+22

      136     5586    2      DUP.FORCE_NEW_PAGE = %TRUE ;

   5586  0 000047   400000 236003                    LDQ     -131072,DU
         0 000050   000056 756000 xsym               STQ     DUP+46

      137     5587    2      DUP.DF.ENTERED = %FALSE ;

   5587  0 000051   000031 236000 xsym               LDQ     B_VECTNIL+25
         0 000052   000104 356000 xsym               ANSQ    DUP+68

PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:26   
      138     5588    2      DUP.DF.OPEN_TYPE = %UPDATE_FILE ;

   5588  0 000053   000001 235007                    LDA     1,DL
         0 000054   000105 755000 xsym               STA     DUP+69

      139     5589    2      DUP.DF.REPORT_ERROR = %TRUE ;

   5589  0 000055   400000 236007                    LDQ     -131072,DL
         0 000056   000104 256000 xsym               ORSQ    DUP+68

      140     5590    2      DUP.DF.CLOSE_TYPE = %SAVE_FILE ;

   5590  0 000057   000106 450000 xsym               STZ     DUP+70

      141     5591    2      RETURN ;

   5591  0 000060   000001 702211                    TSX2  ! 1,X1

      142     5592
      143     5593    2   END DP_INIT_DUP ;
      144     5594        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:27   
      145     5595        /*I*  NAME:        DP_COMMAND_SETUP
      146     5596              AUTHOR:      Scott S. Sheppard
      147     5597              PURPOSE:     Sets up DELPATCH Command
      148     5598              INTERFACE:   TOU$DU_SET_DF_FID
      149     5599              INPUT:       DUP.CMD$ - pointer to the parse control block
      150     5600              OUTPUT:      DUP.DF.HOLD_AREA
      151     5601                           DUP.DF.HOLD_AREA_LGTH
      152     5602                           DUP.DF.ENTERED
      153     5603                           OBJECT_SEARCH_KEY
      154     5604              DESCRIPTION: This procedure sets up the  DELPATCH command from
      155     5605                           information entered by the user.    DUP.CMD$ is a
      156     5606                           pointer to a   parse control block  that contains
      157     5607                           the tokens entered by the user.
      158     5608                           COMMAND FORMS:
      159     5609              Case 1: DP <object key>
      160     5610              Case 2: DP <object key> FROM <deckfile fid>
      161     5611        */
      162     5612        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:28   
      163     5613    1   DP_COMMAND_SETUP: PROC ALTRET ;

   5613  0 000061   200004 741300       DP_COMMAND_* STX1  ! 4,,AUTO

      164     5614
      165     5615    2      DCL OUTBLK#                    UBIN WORD ALIGNED ;
      166     5616    2      DCL OUTBLK$                    PTR ALIGNED ;
      167     5617           %PARSE$OUT (STCLASS = BASED) ;
      168     5662           %PARSE$SYM (STCLASS = BASED) ;
      169     5700
      170     5701        /* Code */
      171     5702
      172     5703    3      DO OUTBLK# = 0 TO DUP.CMD$ -> OUT$BLK.NSUBLKS - 1 ;

   5703  0 000062   200005 450100                    STZ     OUTBLK#,,AUTO
         0 000063   000135 710000 0                  TRA     s:5714+3

      173     5704    3         OUTBLK$ = DUP.CMD$ -> OUT$BLK.SUBLK$(OUTBLK#) ;

   5704  0 000064   000017 470400 xsym               LDP0    DUP+15
         0 000065   200005 720100                    LXL0    OUTBLK#,,AUTO
         0 000066   000003 236110                    LDQ     3,X0,PR0
         0 000067   200006 756100                    STQ     OUTBLK$,,AUTO

      174     5705    4         DO CASE (OUTBLK$ -> OUT$BLK.CODE) ;

   5705  0 000070   200006 471500                    LDP1    OUTBLK$,,AUTO
         0 000071   100000 236100                    LDQ     0,,PR1
         0 000072   777777 376007                    ANQ     -1,DL
         0 000073   000004 136007                    SBLQ    4,DL
         0 000074   000006 116007                    CMPQ    6,DL
         0 000075   000077 602006 0                  TNC     s:5705+7,QL
         0 000076   000132 710000 0                  TRA     s:5714
         0 000077   000114 710000 0                  TRA     s:5709
         0 000100   000132 710000 0                  TRA     s:5714
         0 000101   000132 710000 0                  TRA     s:5714
         0 000102   000132 710000 0                  TRA     s:5714
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:29   
         0 000103   000132 710000 0                  TRA     s:5714
         0 000104   000105 710000 0                  TRA     s:5707

      175     5706    4            CASE (%OBJKEY) ;

      176     5707    4               OBJECT_SEARCH_KEY.DATA = OUTBLK$ -> OUT$SYM.TEXT ;

   5707  0 000105   100004 236100                    LDQ     4,,PR1
         0 000106   000033 772000                    QRL     27
         0 000107   000000 621006                    EAX1    0,QL
         0 000110   040000 100540                    MLR     fill='040'O
         0 000111   100004 200011                    ADSC9   4,,PR1                   cn=1,n=*X1
         0 000112   000000 000027 xsym               ADSC9   OBJECT_SEARCH_KEY        cn=0,n=23
         0 000113   000132 710000 0                  TRA     s:5714

      177     5708    4            CASE (%DECKFILE_FID) ;

      178     5709    4               DUP.DF.ENTERED = %TRUE ;

   5709  0 000114   400000 236003                    LDQ     -131072,DU
         0 000115   000104 256000 xsym               ORSQ    DUP+68

      179     5710    4               DUP.HOLD_AREA = OUTBLK$ -> OUT$SYM.TEXT ;

   5710  0 000116   100004 236100                    LDQ     4,,PR1
         0 000117   000033 772000                    QRL     27
         0 000120   000000 621006                    EAX1    0,QL
         0 000121   040000 100540                    MLR     fill='040'O
         0 000122   100004 200011                    ADSC9   4,,PR1                   cn=1,n=*X1
         0 000123   000142 000050 xsym               ADSC9   DUP+98                   cn=0,n=40

      180     5711    4               DUP.HOLD_AREA_LGTH = OUTBLK$ -> OUT$SYM.COUNT ;

   5711  0 000124   100004 236100                    LDQ     4,,PR1
         0 000125   000033 772000                    QRL     27
         0 000126   000154 756000 xsym               STQ     DUP+108

PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:30   
      181     5712    4               CALL TOU$DU_SET_DF_FID ALTRET (ERROR) ;

   5712  0 000127   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000130   000000 701000 xent               TSX1    TOU$DU_SET_DF_FID
         0 000131   000152 702000 0                  TSX2    ERROR

      182     5713    4         END /* CASE */ ;

      183     5714    3      END /* DO */ ;

   5714  0 000132   200005 235100                    LDA     OUTBLK#,,AUTO
         0 000133   000001 035007                    ADLA    1,DL
         0 000134   200005 755100                    STA     OUTBLK#,,AUTO
         0 000135   000017 470400 xsym               LDP0    DUP+15
         0 000136   000001 236100                    LDQ     1,,PR0
         0 000137   000022 772000                    QRL     18
         0 000140   200005 116100                    CMPQ    OUTBLK#,,AUTO
         0 000141   000143 600000 0                  TZE     s:5716
         0 000142   000064 603000 0                  TRC     s:5704

      184     5715
      185     5716    2      IF DUP.DF.ENTERED

   5716  0 000143   000104 234000 xsym               SZN     DUP+68
         0 000144   000150 604000 0                  TMI     s:5719

      186     5717    2      THEN /* FID set from DEER command */ ;
      187     5718    2      ELSE CALL TOU$DU_SET_DF_FID ALTRET (ERROR) ;

   5718  0 000145   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000146   000000 701000 xent               TSX1    TOU$DU_SET_DF_FID
         0 000147   000152 702000 0                  TSX2    ERROR

      188     5719    2      RETURN ;

   5719  0 000150   200004 221300                    LDX1  ! 4,,AUTO
         0 000151   000001 702211                    TSX2  ! 1,X1
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:31   

      189     5720
      190     5721    2   ERROR:
      191     5722    2      ALTRETURN ;

   5722  0 000152   200004 221300       ERROR        LDX1  ! 4,,AUTO
         0 000153   000000 702211                    TSX2  ! 0,X1

      192     5723
      193     5724    2   END DP_COMMAND_SETUP ;
      194     5725        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:32   
      195     5726        /*I*  NAME:        DP_FIND_DECK
      196     5727              AUTHOR:      Scott S. Sheppard
      197     5728              PURPOSE:     Locates Object Deck
      198     5729              INTERFACE:   TOU$DFU_DF_CHECK_FOR_KEY
      199     5730                           TOU$DFU_DF_RD_BINARY
      200     5731                           TOU$DFU_DF_RD_BCD_CARDS
      201     5732                           TOU$DFU_DF_RD_OBJECT_REFLIST
      202     5733                           TOU$DU_USER_WRITE
      203     5734                           TOU$DFU_DF_RD_LOG
      204     5735              INPUT:       OBJECT_SEARCH_KEY
      205     5736                           OBJECT
      206     5737              OUTPUT:      OBJECT_KEY
      207     5738                           BINARY_KEY
      208     5739                           BIN#
      209     5740                           BCD_KEY
      210     5741                           BCD#
      211     5742                           DUP.MSG_CODE
      212     5743              DESCRIPTION: This procedure locates and reads all of the records
      213     5744                           of the object deck to be unpatched.
      214     5745        */
      215     5746        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:33   
      216     5747    1   DP_FIND_DECK: PROC ALTRET ;

   5747  0 000154   200004 741300       DP_FIND_DECK STX1  ! 4,,AUTO

      217     5748
      218     5749        /* Code */
      219     5750
      220     5751    2      OBJECT_KEY.DATA = OBJECT_SEARCH_KEY.DATA ;

   5751  0 000155   040000 100400                    MLR     fill='040'O
         0 000156   000000 000027 xsym               ADSC9   OBJECT_SEARCH_KEY        cn=0,n=23
         0 000157   000000 200027 xsym               ADSC9   OBJECT_KEY               cn=1,n=23

      221     5752    2      CALL TOU$DFU_DF_CHECK_FOR_KEY ALTRET (NOT_FOUND) ;

   5752  0 000160   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000161   000000 701000 xent               TSX1    TOU$DFU_DF_CHECK_FOR_KEY
         0 000162   000225 702000 0                  TSX2    NOT_FOUND

      222     5753
      223     5754    2      BINARY_KEY.DECK# = OBJECT.DECK# ;

   5754  0 000163   000024 236000 xsym               LDQ     OBJECT+20
         0 000164   000011 772000                    QRL     9
         0 000165   000000 552030 xsym               STBQ    BINARY_KEY,'30'O

      224     5755    2      BIN# = OBJECT.BINARY_COUNT ;

   5755  0 000166   000024 236000 xsym               LDQ     OBJECT+20
         0 000167   777777 376007                    ANQ     -1,DL
         0 000170   000000 756000 xsym               STQ     BIN#

      225     5756    2      CALL TOU$DFU_DF_RD_BINARY ALTRET (ERROR) ;

   5756  0 000171   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000172   000000 701000 xent               TSX1    TOU$DFU_DF_RD_BINARY
         0 000173   000232 702000 0                  TSX2    ERROR
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:34   

      226     5757
      227     5758    2      BCD_KEY.DECK# = OBJECT.DECK# ;

   5758  0 000174   000024 236000 xsym               LDQ     OBJECT+20
         0 000175   000011 772000                    QRL     9
         0 000176   000000 552030 xsym               STBQ    BCD_KEY,'30'O

      228     5759    2      BCD# = OBJECT.TOTAL_COUNT - OBJECT.BINARY_COUNT - 1 ;

   5759  0 000177   000024 236000 xsym               LDQ     OBJECT+20
         0 000200   777777 376007                    ANQ     -1,DL
         0 000201   200010 756100                    STQ     OUTBLK$+2,,AUTO
         0 000202   000025 236000 xsym               LDQ     OBJECT+21
         0 000203   000022 772000                    QRL     18
         0 000204   200010 136100                    SBLQ    OUTBLK$+2,,AUTO
         0 000205   000001 136007                    SBLQ    1,DL
         0 000206   000000 756000 xsym               STQ     BCD#

      229     5760    2      CALL TOU$DFU_DF_RD_BCD_CARDS ALTRET (ERROR) ;

   5760  0 000207   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000210   000000 701000 xent               TSX1    TOU$DFU_DF_RD_BCD_CARDS
         0 000211   000232 702000 0                  TSX2    ERROR

      230     5761
      231     5762    2      OBJECT_REFLIST_KEY.DECK# = OBJECT.DECK# ;

   5762  0 000212   000024 236000 xsym               LDQ     OBJECT+20
         0 000213   000011 772000                    QRL     9
         0 000214   000000 552030 xsym               STBQ    OBJECT_REFLIST_KEY,'30'O

      232     5763    2      CALL TOU$DFU_DF_RD_OBJECT_REFLIST ALTRET (ERROR) ;

   5763  0 000215   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000216   000000 701000 xent               TSX1    TOU$DFU_DF_RD_OBJECT_REFLIST
         0 000217   000232 702000 0                  TSX2    ERROR
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:35   

      233     5764    2      CALL TOU$DFU_DF_RD_LOG ALTRET (ERROR) ;

   5764  0 000220   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000221   000000 701000 xent               TSX1    TOU$DFU_DF_RD_LOG
         0 000222   000232 702000 0                  TSX2    ERROR

      234     5765    2      RETURN ;

   5765  0 000223   200004 221300                    LDX1  ! 4,,AUTO
         0 000224   000001 702211                    TSX2  ! 1,X1

      235     5766
      236     5767    2   NOT_FOUND:
      237     5768    2      DUP.MSG_CODE = %E$DFD_NO_OBJ_IN_DF ;

   5768  0 000225   001010 235007       NOT_FOUND    LDA     520,DL
         0 000226   000020 755000 xsym               STA     DUP+16

      238     5769    2      CALL TOU$DU_USER_WRITE ;

   5769  0 000227   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000230   000000 701000 xent               TSX1    TOU$DU_USER_WRITE
         0 000231   000000 011000                    NOP     0

      239     5770    2   ERROR:
      240     5771    2      ALTRETURN ;

   5771  0 000232   200004 221300       ERROR        LDX1  ! 4,,AUTO
         0 000233   000000 702211                    TSX2  ! 0,X1

      241     5772
      242     5773    2   END DP_FIND_DECK ;
      243     5774        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:36   
      244     5775        /*I*  NAME:        DP_DELETE_PATCHES
      245     5776              AUTHOR:      Scott S. Sheppard
      246     5777              PURPOSE:     Delpatch Deck Driver
      247     5778              INTERFACE:   DP_CHECK_PATCHES_EXIST
      248     5779                           DP_REDUCE_TO_DKEND
      249     5780                           DP_SAVE_CHANGED_DECK
      250     5781                           DP_PRINT_DELETED_PATCHES
      251     5782              INPUT:       No system data accessed.
      252     5783              OUTPUT:      DUP.BREAK_DISABLED
      253     5784              DESCRIPTION: This procedure is the driver which removes the patch
      254     5785                           cards from the object deck.
      255     5786        */
      256     5787
      257     5788    1   DP_DELETE_PATCHES: PROC ALTRET ;

   5788  0 000234   200004 741300       DP_DELETE_P* STX1  ! 4,,AUTO

      258     5789
      259     5790        /* Code */
      260     5791
      261     5792    2      CALL DP_CHECK_PATCHES_EXIST ALTRET (ERROR) ;

   5792  0 000235   000257 701000 0                  TSX1    DP_CHECK_PATCHES_EXIST
         0 000236   000253 702000 0                  TSX2    ERROR

      262     5793    2      CALL DP_REDUCE_TO_DKEND ;

   5793  0 000237   000273 701000 0                  TSX1    DP_REDUCE_TO_DKEND
         0 000240   000000 011000                    NOP     0

      263     5794
      264     5795    2      DUP.BREAK_DISABLED = %TRUE ;

   5795  0 000241   000400 236003                    LDQ     256,DU
         0 000242   000155 256000 xsym               ORSQ    DUP+109

      265     5796    2      CALL DP_SAVE_CHANGED_DECK ALTRET (ERROR) ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:37   

   5796  0 000243   000306 701000 0                  TSX1    DP_SAVE_CHANGED_DECK
         0 000244   000253 702000 0                  TSX2    ERROR

      266     5797    2      CALL DP_PRINT_DELETED_PATCHES ;

   5797  0 000245   000405 701000 0                  TSX1    DP_PRINT_DELETED_PATCHES
         0 000246   000000 011000                    NOP     0

      267     5798    2      DUP.BREAK_DISABLED = %FALSE ;

   5798  0 000247   000000 236000 1                  LDQ     0
         0 000250   000155 356000 xsym               ANSQ    DUP+109

      268     5799    2      RETURN ;

   5799  0 000251   200004 221300                    LDX1  ! 4,,AUTO
         0 000252   000001 702211                    TSX2  ! 1,X1

      269     5800
      270     5801    2   ERROR:
      271     5802    2      DUP.BREAK_DISABLED = %FALSE ;

   5802  0 000253   000000 236000 1     ERROR        LDQ     0
         0 000254   000155 356000 xsym               ANSQ    DUP+109

      272     5803    2      ALTRETURN ;

   5803  0 000255   200004 221300                    LDX1  ! 4,,AUTO
         0 000256   000000 702211                    TSX2  ! 0,X1

      273     5804
      274     5805    2   /* END DP_DELETE_PATCHES */ ;
      275     5806        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:38   
      276     5807        /*I*  NAME:        DP_CHECK_PATCHES_EXIST
      277     5808              AUTHOR:      Scott S. Sheppard
      278     5809              PURPOSE:     Checks that Patches Exist
      279     5810              INTERFACE:   TOU$DU_USER_WRITE
      280     5811              INPUT:       BCD#
      281     5812              OUTPUT:      DUP.MSG_CODE
      282     5813              DESCRIPTION: This procedure ensures that patch cards actually
      283     5814                           exist for the object deck.
      284     5815        */
      285     5816
      286     5817    2   DP_CHECK_PATCHES_EXIST: PROC ALTRET ;

   5817  0 000257   200006 741300       DP_CHECK_PA* STX1  ! OUTBLK$,,AUTO

      287     5818
      288     5819        /* Code */
      289     5820
      290     5821    3      IF BCD# > 1

   5821  0 000260   000000 235000 xsym               LDA     BCD#
         0 000261   000002 115007                    CMPA    2,DL
         0 000262   000264 602000 0                  TNC     s:5824

      291     5822    3      THEN RETURN ;

   5822  0 000263   000001 702211                    TSX2  ! 1,X1

      292     5823    4      ELSE DO ;

      293     5824    4              DUP.MSG_CODE = %E$DCPE_NO_PATCHES ;

   5824  0 000264   001034 236007                    LDQ     540,DL
         0 000265   000020 756000 xsym               STQ     DUP+16

      294     5825    4              CALL TOU$DU_USER_WRITE ;

   5825  0 000266   000002 631400 xsym               EPPR1   B_VECTNIL+2
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:39   
         0 000267   000000 701000 xent               TSX1    TOU$DU_USER_WRITE
         0 000270   000000 011000                    NOP     0

      295     5826    4              ALTRETURN ;

   5826  0 000271   200006 221300                    LDX1  ! OUTBLK$,,AUTO
         0 000272   000000 702211                    TSX2  ! 0,X1

      296     5827    4           END /* ELSE */ ;
      297     5828
      298     5829    3   END DP_CHECK_PATCHES_EXIST ;
      299     5830        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:40   
      300     5831        /*I*  NAME:        DP_REDUCE_TO_DKEND
      301     5832              AUTHOR:      Scott S. Sheppard
      302     5833              PURPOSE:     Adds $DKEND CARD
      303     5834              INTERFACE:   None Called.
      304     5835              INPUT:       BCD# - current number of BCD cards (all patches)
      305     5836                           DKEND - $DKEND card stored
      306     5837              OUTPUT:      BCD# - incremented by 1 to include the $DKEND
      307     5838                           BCD_B - $DKEND card added to the array
      308     5839              DESCRIPTION: This procedure reduces the list of BCD cards for the object
      309     5840                           deck to one card, the deck end card.
      310     5841        */
      311     5842
      312     5843    2   DP_REDUCE_TO_DKEND: PROC ;

   5843  0 000273   200006 741300       DP_REDUCE_T* STX1  ! OUTBLK$,,AUTO

      313     5844
      314     5845        /* Code */
      315     5846
      316     5847    3      BCD_B(0) = BCD_B(BCD# - 1) ;

   5847  0 000274   000000 236000 xsym               LDQ     BCD#
         0 000275   000124 402007                    MPY     84,DL
         0 000276   000103 470400 xsym               LDP0    DUP+67
         0 000277   040100 100506                    MLR     fill='040'O
         0 000300   077753 000124                    ADSC9   -21,Q,PR0                cn=0,n=84
         0 000301   000000 000124                    ADSC9   0,,PR0                   cn=0,n=84

      317     5848    3      BCD# = 1 ;

   5848  0 000302   000001 235007                    LDA     1,DL
         0 000303   000000 755000 xsym               STA     BCD#

      318     5849    3      RETURN ;

   5849  0 000304   200006 221300                    LDX1  ! OUTBLK$,,AUTO
         0 000305   000001 702211                    TSX2  ! 1,X1
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:41   

      319     5850
      320     5851    3   END DP_REDUCE_TO_DKEND ;
      321     5852        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:42   
      322     5853        /*I*  NAME:        DP_SAVE_CHANGED_DECK
      323     5854              AUTHOR:      Scott S. Sheppard
      324     5855              PURPOSE:     Saves New Object Deck Records
      325     5856              INTERFACE:   TOU$CHECKSUM
      326     5857                           TOU$REFORM_DECK_CHECKSUM
      327     5858                           TOU$DU_UPDATE_LOG
      328     5859                           TOU$DFU_DF_DL_DECK
      329     5860                           TOU$DFU_DF_WR_OBJECT
      330     5861                           TOU$DFU_DF_WR_BINARY
      331     5862                           TOU$DFU_DF_WR_BCD_CARDS
      332     5863                           TOU$DFU_DF_WR_OBJECT_REFLIST
      333     5864                           TOU$DFU_DF_WR_LOG
      334     5865              INPUT:       OBJECT
      335     5866                           BCD#
      336     5867              OUTPUT:      Updated records written to the deckfile.
      337     5868              DESCRIPTION: This procedure deletes the old object deck and saves
      338     5869                           the new one in its place.
      339     5870        */
      340     5871        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:43   
      341     5872    2   DP_SAVE_CHANGED_DECK: PROC ALTRET ;

   5872  0 000306   200006 741300       DP_SAVE_CHA* STX1  ! OUTBLK$,,AUTO

      342     5873
      343     5874        /* Code */
      344     5875
      345     5876    3      CALL TOU$DFU_DF_DL_DECK ALTRET (ERROR) ;

   5876  0 000307   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000310   000000 701000 xent               TSX1    TOU$DFU_DF_DL_DECK
         0 000311   000372 702000 0                  TSX2    ERROR

      346     5877    3      OBJECT.TOTAL_COUNT = OBJECT.BINARY_COUNT + BCD# + 1 ;

   5877  0 000312   000024 236000 xsym               LDQ     OBJECT+20
         0 000313   777777 376007                    ANQ     -1,DL
         0 000314   000000 036000 xsym               ADLQ    BCD#
         0 000315   000001 620006                    EAX0    1,QL
         0 000316   000025 740000 xsym               STX0    OBJECT+21

      347     5878    3      CALL TOU$REFORM_DECK_CHECKSUM (,,,) ;

   5878  0 000317   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000320   000000 701000 xent               TSX1    TOU$REFORM_DECK_CHECKSUM
         0 000321   000000 011000                    NOP     0

      348     5879    3      CALL TOU$CHECKSUM (0, ADDR(OBJECT), 23, OBJECT.CHECKSUM) ;

   5879  0 000322   000001 236000 1                  LDQ     1
         0 000323   200010 756100                    STQ     OUTBLK$+2,,AUTO
         0 000324   000004 237000 1                  LDAQ    4
         0 000325   200014 757100                    STAQ    OUTBLK$+6,,AUTO
         0 000326   200010 630500                    EPPR0   OUTBLK$+2,,AUTO
         0 000327   200013 450500                    STP0    OUTBLK$+5,,AUTO
         0 000330   000003 236000 1                  LDQ     3
         0 000331   200012 756100                    STQ     OUTBLK$+4,,AUTO
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:44   
         0 000332   200012 630500                    EPPR0   OUTBLK$+4,,AUTO
         0 000333   000022 631400 xsym               EPPR1   B_VECTNIL+18
         0 000334   000000 701000 xent               TSX1    TOU$CHECKSUM
         0 000335   000000 011000                    NOP     0

      349     5880    3      CALL TOU$DFU_DF_WR_OBJECT ALTRET (ERROR) ;

   5880  0 000336   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000337   000000 701000 xent               TSX1    TOU$DFU_DF_WR_OBJECT
         0 000340   000372 702000 0                  TSX2    ERROR

      350     5881
      351     5882    3      CALL TOU$DFU_DF_WR_BINARY ALTRET (SYNC_ERROR) ;

   5882  0 000341   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000342   000000 701000 xent               TSX1    TOU$DFU_DF_WR_BINARY
         0 000343   000374 702000 0                  TSX2    SYNC_ERROR

      352     5883    3      CALL TOU$DFU_DF_WR_BCD_CARDS ALTRET (SYNC_ERROR) ;

   5883  0 000344   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000345   000000 701000 xent               TSX1    TOU$DFU_DF_WR_BCD_CARDS
         0 000346   000374 702000 0                  TSX2    SYNC_ERROR

      353     5884    3      CALL TOU$DFU_DF_WR_OBJECT_REFLIST ALTRET (SYNC_ERROR) ;

   5884  0 000347   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000350   000000 701000 xent               TSX1    TOU$DFU_DF_WR_OBJECT_REFLIST
         0 000351   000374 702000 0                  TSX2    SYNC_ERROR

      354     5885
      355     5886    3      DUP.LOG.TYPE = %T$SF_DELPATCH ;

   5886  0 000352   000117 235007                    LDA     79,DL
         0 000353   000122 755000 xsym               STA     DUP+82

      356     5887    3      DUP.LOG.CATALOG = ' ' ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:45   

   5887  0 000354   040000 100400                    MLR     fill='040'O
         0 000355   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
         0 000356   000123 000025 xsym               ADSC9   DUP+83                   cn=0,n=21

      357     5888    3      DUP.LOG.DECK = OBJECT_KEY.DATA ;

   5888  0 000357   040000 100400                    MLR     fill='040'O
         0 000360   000000 200027 xsym               ADSC9   OBJECT_KEY               cn=1,n=23
         0 000361   000130 200027 xsym               ADSC9   DUP+88                   cn=1,n=23

      358     5889    3      CALL TOU$DU_UPDATE_LOG ALTRET (SYNC_ERROR) ;

   5889  0 000362   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000363   000000 701000 xent               TSX1    TOU$DU_UPDATE_LOG
         0 000364   000374 702000 0                  TSX2    SYNC_ERROR

      359     5890    3      CALL TOU$DFU_DF_WR_LOG ALTRET (SYNC_ERROR) ;

   5890  0 000365   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000366   000000 701000 xent               TSX1    TOU$DFU_DF_WR_LOG
         0 000367   000374 702000 0                  TSX2    SYNC_ERROR

      360     5891    3      RETURN ;

   5891  0 000370   200006 221300                    LDX1  ! OUTBLK$,,AUTO
         0 000371   000001 702211                    TSX2  ! 1,X1

      361     5892
      362     5893    3   ERROR:
      363     5894    3      ALTRETURN ;

   5894  0 000372   200006 221300       ERROR        LDX1  ! OUTBLK$,,AUTO
         0 000373   000000 702211                    TSX2  ! 0,X1

      364     5895
      365     5896    3   SYNC_ERROR:
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:46   
      366     5897    3      DUP.DF.CLOSE_TYPE = %DISCARD_FILE ;

   5897  0 000374   000001 235007       SYNC_ERROR   LDA     1,DL
         0 000375   000106 755000 xsym               STA     DUP+70

      367     5898    3      DUP.MSG_CODE = %E$PSCD_BAD_DF ;

   5898  0 000376   001063 236007                    LDQ     563,DL
         0 000377   000020 756000 xsym               STQ     DUP+16

      368     5899    3      CALL TOU$DU_USER_WRITE ;

   5899  0 000400   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000401   000000 701000 xent               TSX1    TOU$DU_USER_WRITE
         0 000402   000000 011000                    NOP     0

      369     5900    3      ALTRETURN ;

   5900  0 000403   200006 221300                    LDX1  ! OUTBLK$,,AUTO
         0 000404   000000 702211                    TSX2  ! 0,X1

      370     5901
      371     5902    3   END DP_SAVE_CHANGED_DECK ;
      372     5903        %EJECT ;
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:47   
      373     5904        /*I*  NAME:        DP_PRINT_DELETED_PATCHES
      374     5905              AUTHOR:      Scott S. Sheppard
      375     5906              PURPOSE:     Prints Patched Deck line
      376     5907              INTERFACE:   TOU$DU_USER_WRITE
      377     5908                           TOU$DU_PRINTER_WRITE
      378     5909              INPUT:       T$DP_INFORM
      379     5910              OUTPUT:      DUP.MSG_CODE - integer message number
      380     5911              DESCRIPTION: This procedure notifies the user and logs to the
      381     5912                           edit listing that patches have been deleted.
      382     5913        */
      383     5914
      384     5915    2   DP_PRINT_DELETED_PATCHES: PROC ;

   5915  0 000405   200006 741300       DP_PRINT_DE* STX1  ! OUTBLK$,,AUTO

      385     5916
      386     5917        /* Code */
      387     5918
      388     5919    3      DUP.MSG_CODE = %T$DP_INFORM ;

   5919  0 000406   000216 235007                    LDA     142,DL
         0 000407   000020 755000 xsym               STA     DUP+16

      389     5920    3      CALL TOU$DU_USER_WRITE ;

   5920  0 000410   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000411   000000 701000 xent               TSX1    TOU$DU_USER_WRITE
         0 000412   000000 011000                    NOP     0

      390     5921    3      CALL TOU$DU_PRINTER_WRITE ;

   5921  0 000413   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000414   000000 701000 xent               TSX1    TOU$DU_PRINTER_WRITE
         0 000415   000000 011000                    NOP     0

      391     5922    3      RETURN ;

PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:48   
   5922  0 000416   200006 221300                    LDX1  ! OUTBLK$,,AUTO
         0 000417   000001 702211                    TSX2  ! 1,X1

(unnamed)
 Sect OctLoc
   1     000   777377 777777   000000 006000   000000 000027   000002 006000    ................
   1     004   000002 006000   000027 006000                                    ........
      392     5923
      393     5924    3   END DP_PRINT_DELETED_PATCHES ;
      394     5925    2   END DP_DELETE_PATCHES ;
      395     5926    1   END TOU$DELPATCH ;

PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:49   
--  Include file information  --

   XU_MACRO_C.:E05TOU  is referenced.
   TO_PERR_C.:E05TOU  is referenced.
   TOU_RQSTS_E.:E05TOU  is referenced.
   TOU_DEER_M.:E05TOU  is referenced.
      No diagnostics issued in procedure TOU$DELPATCH.
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:50   

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0    36-  5926    104    38     0      0  y   y    0   1 TOU$DELPATCH
  1  5580-  5593      9     0     0     42  y   y    0     2 DP_INIT_DUP
  2  5613-  5724     17     9     0     61  y y y    0     2 DP_COMMAND_SETUP
  3  5747-  5773     16     0     0    154  y y y    0     2 DP_FIND_DECK
  4  5788-  5925     47     0     0    234  y y y    0     2 DP_DELETE_PATCHES
  5  5817-  5829      7     0     0    257  y y y    0      3 DP_CHECK_PATCHES_EXIST
  6  5843-  5851      4     0     0    273  y   y    0      3 DP_REDUCE_TO_DKEND
  7  5872-  5902     20     0     0    306  y y y    0      3 DP_SAVE_CHANGED_DECK
  8  5915-  5924      5     0     0    405  y   y    0      3 DP_PRINT_DELETED_PATCHES
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:51   

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label

              36   0      0 Proc    0                              5544   0      2 Call    0
            5545   0      4 Call    0                              5546   0      6 Call    0
            5548   0     11 Call    0                              5549   0     14 Call    0
            5550   0     16 Call    0                              5551   0     20 Call    0
            5554   0     23 Assign  0                              5555   0     25 Call    0
            5556   0     30 Return  0                              5559   0     31 Call    0 ERROR_RETURN
            5560   0     34 Assign  0                              5561   0     36 Call    0
            5562   0     41 Return  0                              5580   0     42 Proc    1
            5584   0     43 Assign  1                              5585   0     45 Assign  1
            5586   0     47 Assign  1                              5587   0     51 Assign  1
            5588   0     53 Assign  1                              5589   0     55 Assign  1
            5590   0     57 Assign  1                              5591   0     60 Return  1
            5613   0     61 Proc    2                              5703   0     62 DoIndx  2
         $  5704   0     64 Assign  2                        $$$$  5705   0     70 DoCase  2
            5706   0    105 Case    2                           $  5707   0    105 Assign  2
            5708   0    114 Case    2                              5709   0    114 Assign  2
         $  5710   0    116 Assign  2                              5711   0    124 Assign  2
            5712   0    127 Call    2                              5713   0    132 EndCse  2
        $$  5714   0    132 EndInd  2                              5716   0    143 If      2
            5718   0    145 Call    2                              5719   0    150 Return  2
            5722   0    152 Altret  2 ERROR                        5747   0    154 Proc    3
            5751   0    155 Assign  3                              5752   0    160 Call    3
            5754   0    163 Assign  3                              5755   0    166 Assign  3
            5756   0    171 Call    3                              5758   0    174 Assign  3
         $  5759   0    177 Assign  3                              5760   0    207 Call    3
            5762   0    212 Assign  3                              5763   0    215 Call    3
            5764   0    220 Call    3                              5765   0    223 Return  3
            5768   0    225 Assign  3 NOT_FOUND                    5769   0    227 Call    3
            5771   0    232 Altret  3 ERROR                        5788   0    234 Proc    4
            5792   0    235 Call    4                              5793   0    237 Call    4
            5795   0    241 Assign  4                              5796   0    243 Call    4
            5797   0    245 Call    4                              5798   0    247 Assign  4
            5799   0    251 Return  4                              5802   0    253 Assign  4 ERROR
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:52   
            5803   0    255 Altret  4                              5792   0    257 Null    4
            5817   0    257 Proc    5                              5821   0    260 If      5
            5822   0    263 Return  5                              5823   0    264 Do      5
            5824   0    264 Assign  5                              5825   0    266 Call    5
            5826   0    271 Altret  5                              5843   0    273 Proc    6
       $$$  5847   0    274 Assign  6                              5848   0    302 Assign  6
            5849   0    304 Return  6                              5872   0    306 Proc    7
            5876   0    307 Call    7                              5877   0    312 Assign  7
            5878   0    317 Call    7                         $$$  5879   0    322 Call    7
            5880   0    336 Call    7                              5882   0    341 Call    7
            5883   0    344 Call    7                              5884   0    347 Call    7
            5886   0    352 Assign  7                              5887   0    354 Assign  7
            5888   0    357 Assign  7                              5889   0    362 Call    7
            5890   0    365 Call    7                              5891   0    370 Return  7
            5894   0    372 Altret  7 ERROR                        5897   0    374 Assign  7 SYNC_ERROR
            5898   0    376 Assign  7                              5899   0    400 Call    7
            5900   0    403 Altret  7                              5915   0    405 Proc    8
            5919   0    406 Assign  8                              5920   0    410 Call    8
            5921   0    413 Call    8                              5922   0    416 Return  8


  **** Statement type totals  ****

     1 Null      34 Assign    35 Call       2 If         2 Case      10 Return
     6 Altret     1 DoIndx     1 DoCase     1 Do         1 EndInd     1 EndCse
     9 Proc       7 Labels

 # major stmts=   89 Code/major= 3.05 # stmts=  104 Code/stmt= 2.61  Point total=101.0
 Cost/major stmt=  2.5 Cost/stmt=  2.1 Total cost=    222.9

   0-4  $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
   4-6  $$$$
   6-8  $
  8-10  $$
 10-12  $
 12-14
 14-16
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:53   
 16-18
 18-20
 20-22
 22-??
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:54   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     5-0-0/w UBIN        r     1 OUTBLK#                    6-0-0/w PTR         r     1 OUTBLK$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN        r     1 BCD#                       0-0-0/w UBIN        r     1 BIN#

  ****  Structures  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(45)    r     1 BCD_KEY
     0-1-0/b UBIN(18)    r         2 DECK#

     0-0-0/c STRC(45)    r     1 BINARY_KEY
     0-1-0/b UBIN(18)    r         2 DECK#

     0-0-0/d STRC(5220)  r     1 DUP
    17-0-0/w PTR         r         2 CMD$
    20-0-0/w UBIN        r         2 MSG_CODE
    21-0-0/w UBIN        r         2 HDR_CODE
    26-0-0/c CHAR        r         2 LINE_VFC
    56-0-0/c BIT         r         2 FORCE_NEW_PAGE
   102-0-0/d STRC(72)    r         2 BCD_V
   103-0-0/b PTR         r          3 PTR$
   104-0-0/w STRC(504)   r         2 DF
   104-0-0/c BIT         r          3 ENTERED
   104-2-0/c BIT         r          3 REPORT_ERROR
   105-0-0/w UBIN        r          3 OPEN_TYPE
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:55   
   106-0-0/w UBIN        r          3 CLOSE_TYPE
   122-0-0/w STRC(432)   r         2 LOG
   122-0-0/w UBIN        r          3 TYPE
   123-0-0/c CHAR(21)    r          3 CATALOG
   130-1-0/c CHAR(23)    r          3 DECK
   142-0-0/c CHAR(40)    r         2 HOLD_AREA
   154-0-0/w UBIN        r         2 HOLD_AREA_LGTH
   155-1-0/c BIT         r         2 BREAK_DISABLED

     0-0-0/w STRC(864)   r     1 OBJECT
    24-0-0/b UBIN(18)    r         2 DECK#
    24-2-0/b UBIN(18)    r         2 BINARY_COUNT
    25-0-0/b UBIN(18)    r         2 TOTAL_COUNT
    27-0-0/w UBIN        r         2 CHECKSUM

     0-0-0/w STRC(216)   r     1 OBJECT_KEY
     0-1-0/c CHAR(23)    r         2 DATA

     0-0-0/c STRC(45)    r     1 OBJECT_REFLIST_KEY
     0-1-0/b UBIN(18)    r         2 DECK#

     0-0-0/c STRC(207)   r     1 OBJECT_SEARCH_KEY
     0-0-0/c CHAR(23)    r         2 DATA


  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(84)    r     1 BCD_B(0:199)

  ****  Structures  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(144)   r     1 OUT$BLK
     0-2-0/h UBIN(18)    r         2 CODE
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:56   
     1-0-0/h UBIN(18)    r         2 NSUBLKS
     3-0-0/b PTR         r         2 SUBLK$(0:0)

     0-0-0/w ASTR(153)   r     1 OUT$SYM
     4-0-0/c UBIN(9)     r         2 COUNT
     4-1-0/c ACHR        r         2 TEXT



   Procedure TOU$DELPATCH requires 272 words for executable code.
   Procedure TOU$DELPATCH requires 14 words of local(AUTO) storage.

    No errors detected in file TOU$DELPATCH.:E05TSI    .
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:57   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:58   
          MINI XREF LISTING

BCD#
      5508**DCL      5759<<ASSIGN   5821>>IF       5847>>ASSIGN   5848<<ASSIGN   5877>>ASSIGN
BCD_B
      5372**DCL      5847<<ASSIGN   5847>>ASSIGN
BCD_KEY.DECK#
      5386**DCL      5758<<ASSIGN
BIN#
      5509**DCL      5755<<ASSIGN
BINARY_KEY.DECK#
      5400**DCL      5754<<ASSIGN
DP_CHECK_PATCHES_EXIST IN PROCEDURE DP_DELETE_PATCHES
      5817**PROC     5792--CALL
DP_COMMAND_SETUP
      5613**PROC     5545--CALL
DP_DELETE_PATCHES
      5788**PROC     5550--CALL
DP_FIND_DECK
      5747**PROC     5549--CALL
DP_INIT_DUP
      5580**PROC     5544--CALL
DP_PRINT_DELETED_PATCHES IN PROCEDURE DP_DELETE_PATCHES
      5915**PROC     5797--CALL
DP_REDUCE_TO_DKEND IN PROCEDURE DP_DELETE_PATCHES
      5843**PROC     5793--CALL
DP_SAVE_CHANGED_DECK IN PROCEDURE DP_DELETE_PATCHES
      5872**PROC     5796--CALL
DUP.BCD_V.PTR$
      5303**DCL      5372--IMP-PTR  5847>>ASSIGN   5847>>ASSIGN
DUP.BREAK_DISABLED
      5349**DCL      5795<<ASSIGN   5798<<ASSIGN   5802<<ASSIGN
DUP.CMD$
      5247**DCL      5703>>DOINDEX  5704>>ASSIGN
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:59   
DUP.DF.CLOSE_TYPE
      5315**DCL      5590<<ASSIGN   5897<<ASSIGN
DUP.DF.ENTERED
      5307**DCL      5587<<ASSIGN   5709<<ASSIGN   5716>>IF
DUP.DF.OPEN_TYPE
      5313**DCL      5588<<ASSIGN
DUP.DF.REPORT_ERROR
      5311**DCL      5589<<ASSIGN
DUP.FORCE_NEW_PAGE
      5271**DCL      5586<<ASSIGN
DUP.HDR_CODE
      5252**DCL      5584<<ASSIGN
DUP.HOLD_AREA
      5342**DCL      5710<<ASSIGN
DUP.HOLD_AREA_LGTH
      5344**DCL      5711<<ASSIGN
DUP.LINE_VFC
      5261**DCL      5585<<ASSIGN
DUP.LOG.CATALOG
      5325**DCL      5887<<ASSIGN
DUP.LOG.DECK
      5327**DCL      5888<<ASSIGN
DUP.LOG.TYPE
      5323**DCL      5886<<ASSIGN
DUP.LOG_V
      5329**DCL      5334--REDEF
DUP.MSG_CODE
      5250**DCL      5554<<ASSIGN   5560<<ASSIGN   5768<<ASSIGN   5824<<ASSIGN   5898<<ASSIGN   5919<<ASSIGN
ERROR IN PROCEDURE DP_COMMAND_SETUP
      5722**LABEL    5712--CALLALT  5718--CALLALT
ERROR IN PROCEDURE DP_DELETE_PATCHES
      5802**LABEL    5792--CALLALT  5796--CALLALT
ERROR IN PROCEDURE DP_FIND_DECK
      5771**LABEL    5756--CALLALT  5760--CALLALT  5763--CALLALT  5764--CALLALT
ERROR IN PROCEDURE DP_SAVE_CHANGED_DECK
      5894**LABEL    5876--CALLALT  5880--CALLALT
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:60   
ERROR_RETURN
      5559**LABEL    5545--CALLALT  5548--CALLALT  5549--CALLALT  5550--CALLALT  5551--CALLALT
NOT_FOUND IN PROCEDURE DP_FIND_DECK
      5768**LABEL    5752--CALLALT
OBJECT
      5412**DCL      5879--CALL
OBJECT.BCD
      5413**DCL      5435--REDEF    5458--REDEF
OBJECT.BINARY_COUNT
      5460**DCL      5755>>ASSIGN   5759>>ASSIGN   5877>>ASSIGN
OBJECT.CHECKSUM
      5464**DCL      5879<>CALL
OBJECT.DECK#
      5459**DCL      5754>>ASSIGN   5758>>ASSIGN   5762>>ASSIGN
OBJECT.NIO_BCD.X_OF_N
      5446**DCL      5451--REDEF
OBJECT.TOTAL_COUNT
      5461**DCL      5759>>ASSIGN   5877<<ASSIGN
OBJECT_KEY.DATA
      5477**DCL      5751<<ASSIGN   5888>>ASSIGN
OBJECT_REFLIST_KEY.DECK#
      5490**DCL      5762<<ASSIGN
OBJECT_SEARCH_KEY.DATA
      5503**DCL      5707<<ASSIGN   5751>>ASSIGN
OUT$BLK.CODE IN PROCEDURE DP_COMMAND_SETUP
      5631**DCL      5705>>DOCASE
OUT$BLK.NSUBLKS IN PROCEDURE DP_COMMAND_SETUP
      5635**DCL      5703>>DOINDEX
OUT$BLK.SUBLK$ IN PROCEDURE DP_COMMAND_SETUP
      5656**DCL      5704>>ASSIGN
OUT$SYM.COUNT IN PROCEDURE DP_COMMAND_SETUP
      5692**DCL      5695--IMP-SIZ  5707>>ASSIGN   5710>>ASSIGN   5711>>ASSIGN
OUT$SYM.TEXT IN PROCEDURE DP_COMMAND_SETUP
      5695**DCL      5707>>ASSIGN   5710>>ASSIGN
OUTBLK# IN PROCEDURE DP_COMMAND_SETUP
      5615**DCL      5703<<DOINDEX  5704>>ASSIGN
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:61   
OUTBLK$ IN PROCEDURE DP_COMMAND_SETUP
      5616**DCL      5704<<ASSIGN   5705>>DOCASE   5707>>ASSIGN   5707>>ASSIGN   5710>>ASSIGN   5710>>ASSIGN
      5711>>ASSIGN
SYNC_ERROR IN PROCEDURE DP_SAVE_CHANGED_DECK
      5897**LABEL    5882--CALLALT  5883--CALLALT  5884--CALLALT  5889--CALLALT  5890--CALLALT
TOU$CHECKSUM
      5521**DCL-ENT  5879--CALL
TOU$DFU_DF_CHECK_FOR_KEY
      5527**DCL-ENT  5752--CALL
TOU$DFU_DF_DL_DECK
      5526**DCL-ENT  5876--CALL
TOU$DFU_DF_RD_BCD_CARDS
      5529**DCL-ENT  5760--CALL
TOU$DFU_DF_RD_BINARY
      5528**DCL-ENT  5756--CALL
TOU$DFU_DF_RD_LOG
      5531**DCL-ENT  5764--CALL
TOU$DFU_DF_RD_OBJECT_REFLIST
      5530**DCL-ENT  5763--CALL
TOU$DFU_DF_WR_BCD_CARDS
      5534**DCL-ENT  5883--CALL
TOU$DFU_DF_WR_BINARY
      5533**DCL-ENT  5882--CALL
TOU$DFU_DF_WR_LOG
      5536**DCL-ENT  5890--CALL
TOU$DFU_DF_WR_OBJECT
      5532**DCL-ENT  5880--CALL
TOU$DFU_DF_WR_OBJECT_REFLIST
      5535**DCL-ENT  5884--CALL
TOU$DU_CLOSE_DF
      5515**DCL-ENT  5551--CALL     5559--CALL
TOU$DU_OPEN_DF
      5514**DCL-ENT  5548--CALL
TOU$DU_PRINTER_WRITE
      5518**DCL-ENT  5921--CALL
TOU$DU_SET_DF_FID
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:62   
      5513**DCL-ENT  5712--CALL     5718--CALL
TOU$DU_UPDATE_LOG
      5519**DCL-ENT  5889--CALL
TOU$DU_USER_WRITE
      5517**DCL-ENT  5555--CALL     5561--CALL     5769--CALL     5825--CALL     5899--CALL     5920--CALL
TOU$L_SHOW_DCB
      5524**DCL-ENT  5546--CALL
TOU$REFORM_DECK_CHECKSUM
      5522**DCL-ENT  5878--CALL
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:63   
              *** CROSS REFERENCE LISTING ***
    **     DENOTES     IDENTIFIER DEFINITION
    <<                 IDENTIFIER'S VALUE SET
    >>                 IDENTIFIER'S VALUE USED
    <>                 IDENTIFIER SET AND/OR USED
    --                 IDENTIFIER REFERENCED
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:64   
              FULL UREF LISTING

BCD_KEY
      5384**DCL
BCD_KEY.CARD#
      5387**DCL
BCD_KEY.SIZE
      5385**DCL
BINARY_KEY
      5398**DCL
BINARY_KEY.ENTRY#
      5401**DCL
BINARY_KEY.SIZE
      5399**DCL
DUP
      5229**DCL
DUP.BATCH_MODE
      5231**DCL
DUP.BCD_V
      5300**DCL
DUP.BINARY_V
      5295**DCL
DUP.BINARY_V.PTR$
      5298**DCL
DUP.BOTTOM_LINE#
      5267**DCL
DUP.BREAK_RETURN
      5351**DCL
DUP.BREAK_TERMINATE
      5347**DCL
DUP.CPU_TYPE
      5360**DCL
DUP.CURRENT_LINE#
      5265**DCL
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:65   
DUP.CURRENT_PAGE#
      5263**DCL
DUP.DF
      5306**DCL
DUP.DF.FID
      5317**DCL
DUP.DF.FID_LGTH
      5319**DCL
DUP.DF.NO_EXIST
      5309**DCL
DUP.DS_V
      5240**DCL
DUP.ERROR_IMAGE
      5269**DCL
DUP.FAULT_ERROR
      5235**DCL
DUP.IFAD
      5274**DCL
DUP.IFAD.CONFIG_TAB
      5283**DCL
DUP.IFAD.DEVICE_INPUT
      5279**DCL
DUP.IFAD.DRIVE_NUMBER
      5289**DCL
DUP.IFAD.ENTERED
      5277**DCL
DUP.IFAD.FID
      5291**DCL
DUP.IFAD.FID_LGTH
      5293**DCL
DUP.IFAD.IMU_NUMBER
      5287**DCL
DUP.IFAD.IMU_TAB
      5281**DCL
DUP.IFAD.ME_ALLOWED
      5275**DCL
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:66   
DUP.IFAD.NUM_VOLUMES
      5285**DCL
DUP.LOG
      5322**DCL
DUP.LOG_V.PTR$
      5332**DCL
DUP.LOG_V_
      5334**DCL
DUP.MSG_V
      5256**DCL
DUP.MSG_V.PTR$
      5259**DCL
DUP.NUM_LINES
      5254**DCL
DUP.NUM_WORDS
      5238**DCL
DUP.PROCESS_COMPLETE
      5233**DCL
DUP.RESPONSE
      5243**DCL
DUP.RESPONSE_LGTH
      5245**DCL
DUP.SITE_ID
      5358**DCL
DUP.SITE_NAME
      5353**DCL
DUP.SITE_NAME.LGTH
      5354**DCL
DUP.SITE_NAME.TEXT
      5356**DCL
DUP.TEMP
      5336**DCL
DUP.TEMP.CLOSE_TYPE
      5339**DCL
DUP.TEMP.OPEN_TYPE
      5337**DCL
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:67   
OBJECT.BCD.ASSEMBLER
      5430**DCL
OBJECT.BCD.CLASS
      5418**DCL
OBJECT.BCD.CONTROL
      5414**DCL
OBJECT.BCD.DATE
      5432**DCL
OBJECT.BCD.DONT_APPLY
      5419**DCL
OBJECT.BCD.DONT_APPLY.CP6
      5421**DCL
OBJECT.BCD.DONT_APPLY.DPS8000
      5424**DCL
OBJECT.BCD.DONT_APPLY.DPS90
      5423**DCL
OBJECT.BCD.FILENAME
      5428**DCL
OBJECT.BCD.GECALL
      5431**DCL
OBJECT.BCD.LBL
      5433**DCL
OBJECT.BCD.LIBRARY
      5416**DCL
OBJECT.BCD.LOAD_TYPE
      5417**DCL
OBJECT.BCD.MODEL
      5427**DCL
OBJECT.BCD.SEQ
      5434**DCL
OBJECT.BCD.TYPE
      5415**DCL
OBJECT.BCD_
      5458**DCL
OBJECT.DECK_CHECKSUM
      5463**DCL
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:68   
OBJECT.LOAD_SIZE
      5462**DCL
OBJECT.NIO_BCD
      5435**DCL
OBJECT.NIO_BCD.ASSEMBLER
      5452**DCL
OBJECT.NIO_BCD.CLASS
      5440**DCL
OBJECT.NIO_BCD.CONTROL
      5436**DCL
OBJECT.NIO_BCD.DATA
      5442**DCL
OBJECT.NIO_BCD.EQUIP_TYPE
      5444**DCL
OBJECT.NIO_BCD.FILE_NAME
      5445**DCL
OBJECT.NIO_BCD.LBL
      5456**DCL
OBJECT.NIO_BCD.LIBRARY
      5438**DCL
OBJECT.NIO_BCD.LOAD_TYPE
      5439**DCL
OBJECT.NIO_BCD.PRD_NUM_TAB
      5453**DCL
OBJECT.NIO_BCD.PRG_NUM_TAB
      5454**DCL
OBJECT.NIO_BCD.SEQ
      5457**DCL
OBJECT.NIO_BCD.TYPE
      5437**DCL
OBJECT.NIO_BCD.X_OF_N.N
      5450**DCL
OBJECT.NIO_BCD.X_OF_N.X
      5448**DCL
OBJECT.NIO_BCD.X_OF_N_
      5451**DCL
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:69   
OBJECT_KEY
      5475**DCL
OBJECT_KEY.SIZE
      5476**DCL
OBJECT_REFLIST_KEY
      5488**DCL
OBJECT_REFLIST_KEY.ENTRY#
      5491**DCL
OBJECT_REFLIST_KEY.SIZE
      5489**DCL
OBJECT_SEARCH_KEY
      5502**DCL
OUT$BLK IN PROCEDURE DP_COMMAND_SETUP
      5623**DCL
OUT$BLK.CPOS IN PROCEDURE DP_COMMAND_SETUP
      5649**DCL
OUT$BLK.NDTYPE IN PROCEDURE DP_COMMAND_SETUP
      5626**DCL
OUT$BLK.SCRITCH IN PROCEDURE DP_COMMAND_SETUP
      5639**DCL
OUT$BLK.TEMP IN PROCEDURE DP_COMMAND_SETUP
      5624**DCL
OUT$SYM IN PROCEDURE DP_COMMAND_SETUP
      5669**DCL
OUT$SYM.CODE IN PROCEDURE DP_COMMAND_SETUP
      5675**DCL
OUT$SYM.CPOS IN PROCEDURE DP_COMMAND_SETUP
      5684**DCL
OUT$SYM.NDTYPE IN PROCEDURE DP_COMMAND_SETUP
      5672**DCL
OUT$SYM.NSUBLKS IN PROCEDURE DP_COMMAND_SETUP
      5678**DCL
OUT$SYM.SCRITCH IN PROCEDURE DP_COMMAND_SETUP
      5681**DCL
OUT$SYM.TEMP IN PROCEDURE DP_COMMAND_SETUP
      5670**DCL
PL6.E3A0      #001=TOU$DELPATCH File=TOU$DELPATCH.:E05TSI                        WED 07/30/97 06:41 Page:70   
OUT$SYM.TEXTC$ IN PROCEDURE DP_COMMAND_SETUP
      5687**DCL
TOU$DELPATCH
        36**PROC
