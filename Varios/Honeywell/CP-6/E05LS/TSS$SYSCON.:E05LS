VERSION E05

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:1    
        1        1        /*M* TSS$SYSCON - MAIN DRIVER MODULE FOR THE PROCESSOR SYSCON */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*/
        8        8        TSS$SYSCON: PROC MAIN;
        9        9        /**/
       10       10        /*********************************************************************/
       11       11        /*   INCLUDE FILES   INCLUDE FILES   INCLUDE FILES   INCLUDE FILES   */
       12       12        /*********************************************************************/
       13       13        /**/
       14       14        %INCLUDE TS_SUBS_C;
       15       95        %INCLUDE IT_SUBS_C;
       16      362        %INCLUDE NI$TABLES ;
       17      578        %INCLUDE TS_PERR_C;
       18      661        %INCLUDE CP_6;
       19      742        %INCLUDE CP_6_SUBS;
       20     1282        %INCLUDE XU_MACRO_C;
       21     4388        %INCLUDE XU_PERR_C;
       22     4579        %INCLUDE TD$STRUCT;
       23     4680        %INCLUDE TH$HIST;
       24     4775        %INCLUDE EL_SUBS_C;
       25     4859        %INCLUDE EL$TABLES;
       26     5182        %INCLUDE B$JIT;
       27     5472        %INCLUDE B_ERRORS_C;
       28     6599        %INCLUDE B_STRINGS_C;
       29     6728        %INCLUDE B_SEGIDS_C;
       30     7267        %INCLUDE M_INFO_C;
       31     7407        /**/
       32     7408        %SUB YES = '1'B/*YES*/;
       33     7409        %SUB NO = '0'B/*NO*/;
       34     7410        %SUB TRUE = '1'B/*TRUE*/;
       35     7411        %SUB FALSE = '0'B/*FALSE*/;
       36     7412        /**/
       37     7413        /********************************************************************/
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:2    
       38     7414        /*   DCBS   DCBS   DCBS   DCBS   DCBS   DCBS   DCBS   DCBS   DCBS   */
       39     7415        /********************************************************************/
       40     7416        /**/
       41     7417    1   DCL M$SI DCB;                           /* COMMAND INPUT                      */
       42     7418    1   DCL M$LO DCB;                           /* OUTPUT TO USER                     */
       43     7419    1   DCL M$DO DCB;                           /* DIAGNOSTIC OUTPUT                  */
       44     7420    1   DCL M$CONF DCB;                       /* :CONFIG FILE I/O                   */
       45     7421    1   DCL M$ELF DCB;                          /* ELF_DATA SDS FILE                  */
       46     7422    1   DCL M$DEVHIST DCB;                    /* :DEVHIST FILE I/O */
       47     7423        /**/
       48     7424        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:3    
       49     7425        /********************************************************************/
       50     7426        /*   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   */
       51     7427        /********************************************************************/
       52     7428        /**/
       53     7429        %FPT_READ (FPTN = READ_CMD_FPT,
       54     7430                   DCB = M$SI);
       55     7469        /**/
       56     7470        %FPT_GDS(FPTN = GDS_FPT,
       57     7471                 RESULTS = DS_RESULTS,
       58     7472                 SEGSIZE = 4096);
       59     7488        /**/
       60     7489        %FPT_PROMPT(FPTN = PROMPT_FPT,
       61     7490                    PROMPT = SYSCON_PROMPT);
       62     7518        /**/
       63     7519        %FPT_OPEN(FPTN = OPEN_CONFIG,
       64     7520                  DCB = M$CONF,
       65     7521                  NAME = CONFIG_FILE,
       66     7522                  ACCT = SYSACCT,
       67     7523                  ASN = FILE,
       68     7524                  FUN = UPDATE,
       69     7525                  DISP = NAMED,
       70     7526                  ORG = KEYED,
       71     7527                  ACS = DIRECT);
       72     7636        /**/
       73     7637        %FPT_CLOSE(FPTN = CLOSE_CONFIG,
       74     7638                   DCB = M$CONF,
       75     7639                   DISP = SAVE);
       76     7681        /**/
       77     7682        %FPT_CLOSE    (FPTN = CLOSE_LO_FPT,
       78     7683                       DCB = M$LO,
       79     7684                       DISP = SAVE);
       80     7726        /**/
       81     7727        %FPT_READ(FPTN = READ_CONFIG,
       82     7728                  DCB = M$CONF,
       83     7729                  KEY = CONFIG_KEY,
       84     7730                  KEYS = YES);
       85     7769        /**/
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:4    
       86     7770        %FPT_OPEN (FPTN=OPEN_DEVHIST,
       87     7771                        FUN=UPDATE,
       88     7772                        ASN=FILE,
       89     7773                        DCB=M$DEVHIST,
       90     7774                        NAME=DEVHIST,
       91     7775                        ACCT=SYSTAC,
       92     7776                        DISP=NAMED,
       93     7777                        ORG=KEYED,
       94     7778                        ACS=DIRECT);
       95     7887        %FPT_READ (FPTN=READ_DEVHIST_HEAD,
       96     7888                   DCB=M$DEVHIST,
       97     7889                   KEYS=YES,
       98     7890                   KEY=HEAD_KEY,
       99     7891                   BUF=TH_HEAD);
      100     7930        %FPT_READ (FPTN=READ_DEVHIST_MAINT,
      101     7931                   DCB=M$DEVHIST,
      102     7932                   KEYS=YES,
      103     7933                   KEY=MAINT_KEY,
      104     7934                   BUF=TH_MAINT);
      105     7973        %FPT_WRITE (FPTN=WRITE_MAINT,
      106     7974                    DCB=M$DEVHIST,
      107     7975                    KEY=MAINT_KEY,
      108     7976                    BUF=TH_MAINT);
      109     8007        %FPT_CLOSE (FPTN=CLOSE_DEVHIST,
      110     8008                    DCB=M$DEVHIST,
      111     8009                    DISP=SAVE);
      112     8051        %VLP_NAME (FPTN=DEVHIST,
      113     8052                   NAME=':DEVHIST');
      114     8079        %VLP_NAME (FPTN=ELF_DATA,NAME='ELF_DATA');
      115     8106        %FPT_OPEN (FPTN=OPEN_ELF_DATA,
      116     8107                   NAME=ELF_DATA,
      117     8108                   ACCT=SYSACCT,
      118     8109                   ORG=RANDOM,
      119     8110                   ACS=DS3,
      120     8111                   ASN=FILE,
      121     8112                   FUN=IN,
      122     8113                   SHARE=ALL,
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:5    
      123     8114                   DCB=M$ELF);
      124     8223        %FPT_CLOSE (FPTN=CLOSE_ELF_DATA,
      125     8224                    DCB=M$ELF);
      126     8266        %FPT_TIME (FPTN=CUR_UTS,
      127     8267                   SOURCE=CLOCK,
      128     8268                   DEST=UTS,
      129     8269                   TSTAMP=CURUTS);
      130     8288        %FPT_EXIT (STCLASS="STATIC SYMDEF");
      131     8303        %VLP_ACCT (FPTN=SYSTAC,
      132     8304                   ACCT=':SYSTAC');
      133     8317        %FPT_WRSYSLOG (FPTN=TELL_ELF,
      134     8318                       ENTRY=EL$THRESHSET,
      135     8319                       FILENUM=1,  /* ERRLOG */
      136     8320                       SIZE="SIZEW(EL$THRESHSET)",
      137     8321                       TYPE=EL_THRESHSET);
      138     8336        %FPT_PRIV (PRIV='000002000101'O,
      139     8337                   AUTH=YES);
      140     8352        %FPT_PRIV (PRIV=%PPR_SYSCON#, PPRIV=YES,FPTN=PPRIV);
      141     8367        /**/
      142     8368        %FPT_WRITE(FPTN = WRITE_CONFIG,
      143     8369                   DCB = M$CONF,
      144     8370                   KEY = CONFIG_KEY);
      145     8401        /**/
      146     8402        %FPT_BADPP (FPTN = BADPP_FPT);
      147     8416        /**/
      148     8417        %FPT_GOODPP (FPTN = GOODPP_FPT);
      149     8431        /**/
      150     8432        %FPT_SAD (FPTN=SEE_PPUT_LS, MONSID=%PPUTSID, USERSID=%SPCL1SID);
      151     8447        %FPT_SAD (FPTN=SEE_MON_LS, MONSID=%PPUTSID, USERSID=%SPCL2SID);
      152     8462        %FPT_CVM (FPTN=PPUT_CVM);
      153     8478        /**/
      154     8479        %FPT_SYSCON (FPTN = SYSCON_FPT,
      155     8480                     RESULT = RESULTS);
      156     8497        %FPT_GBPL (FPTN=GET_PGLIST,
      157     8498                   PGLIST=PGLIST);
      158     8514        %VLP_PGLIST (FPTN=PGLIST,NPAGES=1);
      159     8528        %FPT_INT (UENTRY=XUR$BREAK,
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:6    
      160     8529                  STCLASS=CONSTANT);
      161     8543        /**/
      162     8544        %VLR_SITEINFO;
      163     8563        %VLR_MONINFO;
      164     8581        %FPT_MONINFO (SITEINFO=VLR_SITEINFO, MONINFO=VLR_MONINFO);
      165     8596        /**/
      166     8597        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:7    
      167     8598        /***************************************************************************/
      168     8599        /*   STATIC DATA   STATIC DATA   STATIC DATA   STATIC DATA   STATIC DATA   */
      169     8600        /***************************************************************************/
      170     8601        /**/
      171     8602    1   DCL M$SI$ PTR STATIC SYMDEF;
      172     8603    1   DCL BLK$ PTR STATIC SYMDEF;
      173     8604    1   DCL CMD$ PTR STATIC SYMDEF;
      174     8605    1   DCL CMD_BASE$ PTR STATIC SYMDEF;
      175     8606    1   DCL CMDTEXT$ PTR STATIC SYMDEF;
      176     8607    1   DCL CMDTEXT_BASE$ PTR STATIC SYMDEF;
      177     8608    1   DCL CONFIG$ PTR STATIC SYMDEF;
      178     8609        /**/
      179     8610    1   DCL I SBIN WORD STATIC SYMDEF;
      180     8611    1   DCL J SBIN WORD STATIC SYMDEF;
      181     8612    1   DCL K SBIN WORD STATIC SYMDEF;
      182     8613        /**/
      183     8614    1   DCL TS_CMD_READ REMEMBER STATIC SYMDEF DALIGNED;
      184     8615    1   DCL TS_PRINT_HEADING BIT(1) ALIGNED STATIC SYMDEF;
      185     8616    1   DCL TS_PRINT_THRESH_HEADING BIT(1) ALIGNED STATIC SYMDEF;
      186     8617    1   DCL TS_DPS90 BIT(1) ALIGNED STATIC SYMDEF;
      187     8618    1   DCL TS_COL_BAD BIT(1) ALIGNED STATIC SYMDEF;
      188     8619    1   DCL TS_FIRST UBIN STATIC SYMDEF;
      189     8620    1   DCL TS_LAST UBIN STATIC SYMDEF;
      190     8621    1   DCL CURUTS UBIN WORD STATIC;
      191     8622    1   DCL HIPAGE UBIN WORD STATIC INIT(0);
      192     8623    1   DCL LOPAGE UBIN WORD STATIC INIT(0);
      193     8624    1   DCL BAD BIT(1) STATIC INIT('0'B);
      194     8625    1   DCL 1 SUSPECT STATIC SYMDEF,
      195     8626    1         2 PREVIOUS BIT(1) INIT('0'B),
      196     8627    1         2 PRESENT  BIT(1) INIT('0'B);
      197     8628    1   DCL 1 RETURNOK REDEF SUSPECT,
      198     8629    1         2 PREVIOUS BIT(1),
      199     8630    1         2 PRESENT  BIT(1);
      200     8631    1   DCL TEMP36 UBIN(36) BASED;
      201     8632    1   DCL PPUT36 UBIN(36) STATIC;
      202     8633    1   DCL MM$ PTR STATIC;
      203     8634    1   DCL VP UBIN;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:8    
      204     8635    1   DCL PP UBIN;
      205     8636    1   DCL PPUT_DESC DSCR STATIC SYMDEF;
      206     8637    1   DCL PPUT_OFFSET UBIN;
      207     8638    1   DCL PPUT$ PTR STATIC SYMDEF INIT(ADDR(NIL));
      208     8639    1   DCL 1 PPUTPTR REDEF PPUT$,
      209     8640    1         2 OFFSET UBIN(18) UNAL,
      210     8641    1         2 * BIT(6) UNAL,
      211     8642    1         2 SEGID BIT(12) UNAL;
      212     8643        /**/
      213     8644    1   DCL THRESH UBIN WORD STATIC;
      214     8645    1   DCL FEPLEN UBIN WORD;
      215     8646    1   DCL IOM_NAME CHAR(4);
      216     8647    1   DCL IOM# UBIN;
      217     8648    1   DCL BUF_CNT UBIN;
      218     8649    1   DCL LEN UBIN;
      219     8650    1   DCL CHAN_BUF CHAR(2);
      220     8651    1   DCL LAST_CHAN UBIN;
      221     8652    1   DCL CHANS(0:15) UBIN;  /* 2 CM CHANS WITH 8 CHANS EACH */
      222     8653    1   DCL CHANS_FOUND UBIN;
      223     8654    1   DCL NUM_CHANS UBIN;
      224     8655    1   DCL RANGE_FLAG BIT(1);
      225     8656        %TD$HEAD (NAME=HEADREC,STCLASS=STATIC);
      226     8692        %TD$IOM (NAME=IOMREC,STCLASS=STATIC);
      227     8700        %TD$DEV (NAME=DEVREC,STCLASS=STATIC);
      228     8719    1   DCL PATH_BUF CHAR(132) STATIC INIT(' ');
      229     8720        /**/
      230     8721    1   DCL HEAD_KEY BIT(18) STATIC INIT('001000'O);
      231     8722    1   DCL MAINT_KEY BIT(18) STATIC INIT('001002'O);
      232     8723        /**/
      233     8724    1   DCL I$ PTR STATIC;
      234     8725    1   DCL CHAN$ PTR STATIC;
      235     8726    1   DCL MPC$ PTR STATIC;
      236     8727    1   DCL DEV$ PTR STATIC;
      237     8728        /**/
      238     8729    1   DCL NUMDEVS SBIN WORD STATIC;
      239     8730    1   DCL DEVNAME CHAR(8) STATIC INIT(' ');
      240     8731        %TD$HEAD (NAME=TH_HEAD,NUMDEV#=200,STCLASS=STATIC);
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:9    
      241     8767        %TH$MAINT (NAME=TH_MAINT,NUMDEV#=200,STCLASS=STATIC);
      242     8772        %EL$THRESHSET (STCLASS=STATIC);
      243     8776        /**/
      244     8777    1   DCL SYSCONERR BIT(36) ALIGNED STATIC;
      245     8778    1   DCL 1 ERR_CODE STATIC SYMDEF,
      246     8779    1         2 FCG_MID BIT(18) UNAL INIT('242323'O),
      247     8780    1         2 MON BIT(1) UNAL INIT('0'B),
      248     8781    1         2 ERR# UBIN(14) UNAL INIT(100),
      249     8782    1         2 SEV UBIN(3) UNAL INIT(0);
      250     8783    1   DCL LAST_CMD UBIN WORD STATIC SYMDEF INIT (0);
      251     8784        /**/
      252     8785    1   DCL ERR_BUF CHAR(120) STATIC SYMDEF;
      253     8786    1   DCL 1 TEXTC STATIC ALIGNED,
      254     8787    1         2 CNT UBIN BYTE UNAL,
      255     8788    1         2 TXT CHAR(132) UNAL;
      256     8789    1   DCL 1 CONFIG_KEY STATIC SYMDEF,
      257     8790    1         2 COUNT UBIN(9) UNAL,
      258     8791    1         2 TEXT CHAR(8) UNAL;
      259     8792        /**/
      260     8793    1   DCL 1 SUB_BUF_1 STATIC SYMDEF,
      261     8794    1         2 COUNT UBIN(9) UNAL,
      262     8795    1         2 TEXT CHAR(31) UNAL;
      263     8796    1   DCL 1 SUB_BUF_2 STATIC SYMDEF,
      264     8797    1         2 COUNT UBIN(9) UNAL,
      265     8798    1         2 TEXT CHAR(31) UNAL;
      266     8799    1   DCL 1 SUB_BUF_3 STATIC SYMDEF,
      267     8800    1         2 COUNT UBIN(9) UNAL,
      268     8801    1         2 TEXT CHAR(31) UNAL;
      269     8802    1   DCL 1 PART STATIC SYMDEF,
      270     8803    1         2 * UBIN(9) UNAL INIT(4),
      271     8804    1         2 T CHAR(4);
      272     8805    1   DCL SYSCON_HERE CHAR(28) STATIC INIT(' ');
      273     8806    1   DCL B_VERSION CHAR(1) SYMREF;
      274     8807    1   DCL 1 B$VERSIONB BASED,
      275     8808    1        2 C_ UBIN BYTE CALIGNED,
      276     8809    1        2 T_ CHAR(B$VERSIONB.C_) CALIGNED;
      277     8810    1   DCL SYSCON_HERE_VEC VECTOR CONSTANT INIT(VECTOR(SYSCON_HERE));
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:10   
      278     8811    1   DCL DEVNOTPART_FMT CHAR(0) CONSTANT INIT(
      279     8812    1   '%11LT   %2P%4LT   %3P%3LT%20P');
      280     8813    1   DCL DEVNOTPART_VEC VECTOR CONSTANT INIT(VECTOR(DEVNOTPART_FMT));
      281     8814    1   DCL DEVPART_FMT CHAR(0) CONSTANT INIT(
      282     8815    1   '%11LT   %2P%4LT   %3P%3LT%20P');
      283     8816    1   DCL DEVPART_VEC VECTOR CONSTANT INIT(VECTOR(DEVPART_FMT));
      284     8817    1   DCL CHANNOTPART_FMT CHAR(0) CONSTANT INIT(
      285     8818    1   'IOM%T,CHAN%2P%T  %3P%4LT   %4P%3LT%20P');
      286     8819    1   DCL CHANNOTPART_VEC VECTOR CONSTANT INIT(VECTOR(CHANNOTPART_FMT));
      287     8820    1   DCL CHANPART_FMT CHAR(0) CONSTANT INIT(
      288     8821    1   'IOM%T,CHAN%2P%T  %3P%4LT   %4P%3LT%20P');
      289     8822    1   DCL CHANPART_VEC VECTOR CONSTANT INIT(VECTOR(CHANPART_FMT));
      290     8823    1   DCL MPCNOTPART_FMT CHAR(0) CONSTANT INIT(
      291     8824    1   '%11LT   %2P%4LT   %3P%3LT%20P');
      292     8825    1   DCL MPCNOTPART_VEC VECTOR CONSTANT INIT(VECTOR(MPCNOTPART_FMT));
      293     8826    1   DCL MPCPART_FMT CHAR(0) CONSTANT INIT(
      294     8827    1   '%11LT   %2P%4LT   %3P%3LT%20P');
      295     8828    1   DCL MPCPART_VEC VECTOR CONSTANT INIT(VECTOR(MPCPART_FMT));
      296     8829    1   DCL DPNOTPART_FMT CHAR(0) CONSTANT INIT(
      297     8830    1   '%11LT   %2P%4LT   %3P%3LT    %4P%3LT%20P');
      298     8831    1   DCL DPNOTPART_VEC VECTOR CONSTANT INIT(VECTOR(DPNOTPART_FMT));
      299     8832    1   DCL DPPART_FMT CHAR(0) CONSTANT INIT(
      300     8833    1   '%11LT   %2P%4LT   %3P%3LT    %4P%3LT%20P');
      301     8834    1   DCL DPPART_VEC VECTOR CONSTANT INIT(VECTOR(DPPART_FMT));
      302     8835    1   DCL IOMPART_FMT CHAR(0) CONSTANT INIT(
      303     8836    1   '%11LT   %2P%4LT%20P');
      304     8837    1   DCL IOMPART_VEC VECTOR CONSTANT INIT(VECTOR(IOMPART_FMT));
      305     8838    1   DCL IOMNOPART_FMT CHAR(0) CONSTANT INIT(
      306     8839    1   '%11LT   %2P%4LT%20P');
      307     8840    1   DCL IOMNOPART_VEC VECTOR CONSTANT INIT(VECTOR(IOMNOPART_FMT));
      308     8841    1   DCL COMPREL_FMT CHAR(0) CONSTANT INIT(
      309     8842    1   '%4LT   released%20P');
      310     8843    1   DCL COMPREL_VEC VECTOR CONSTANT INIT(VECTOR(COMPREL_FMT));
      311     8844    1   DCL COMPNOREL_FMT CHAR(0) CONSTANT INIT(
      312     8845    1   '%4LT   not released%20P');
      313     8846    1   DCL COMPNOREL_VEC VECTOR CONSTANT INIT(VECTOR(COMPNOREL_FMT));
      314     8847    1   DCL IOMTHRESH_VEC VECTOR CONSTANT INIT(VECTOR(IOMTHRESH_FMT));
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:11   
      315     8848    1   DCL IOMTHRESH_FMT CHAR(0) CONSTANT INIT(
      316     8849    1   'IOM%D          %D%20P');
      317     8850    1   DCL DEVTHRESH_VEC VECTOR CONSTANT INIT(VECTOR(DEVTHRESH_FMT));
      318     8851    1   DCL DEVTHRESH_FMT CHAR(0) CONSTANT INIT(
      319     8852    1   '%11LA   %D%20P');
      320     8853    1   DCL CHANTHRESH_VEC VECTOR CONSTANT INIT(VECTOR(CHANTHRESH_FMT));
      321     8854    1   DCL CHANTHRESH_FMT CHAR(0) CONSTANT INIT(
      322     8855    1   'IOM%D,CHAN%3ZD  %D%20P');
      323     8856    1   DCL PAGEGOOD_FMT CHAR(0) CONSTANT INIT(
      324     8857    1   '  Pages %D-%D are good.%20P');
      325     8858    1   DCL PAGEGOOD_VEC VECTOR CONSTANT INIT(VECTOR(PAGEGOOD_FMT));
      326     8859    1   DCL PAGEBAD_FMT CHAR(0) CONSTANT INIT(
      327     8860    1   '  Pages %D-%D are bad.%20P');
      328     8861    1   DCL PAGEBAD_VEC VECTOR CONSTANT INIT(VECTOR(PAGEBAD_FMT));
      329     8862    1   DCL PAGE1GOOD_FMT CHAR(0) CONSTANT INIT(
      330     8863    1   '  Page %D is good.%20P');
      331     8864    1   DCL PAGE1GOOD_VEC VECTOR CONSTANT INIT(VECTOR(PAGE1GOOD_FMT));
      332     8865    1   DCL PAGE1BAD_FMT CHAR(0) CONSTANT INIT(
      333     8866    1   '  Page %D is bad.%20P');
      334     8867    1   DCL PAGE1BAD_VEC VECTOR CONSTANT INIT(VECTOR(PAGE1BAD_FMT));
      335     8868    1   DCL TEXTC_FMT CHAR(0) CONSTANT INIT('%T%10P');
      336     8869    1   DCL TEXTC_VEC VECTOR CONSTANT INIT(VECTOR(TEXTC_FMT));
      337     8870        /**/
      338     8871    1   DCL SYSCON_PROMPT CHAR(1) STATIC INIT('>');
      339     8872        /**/
      340     8873        %VLP_VECTOR(FPTN = DS_RESULTS);
      341     8888        /**/
      342     8889        %VLR_SYSCON (FPTN = RESULTS);
      343     8908        /**/
      344     8909        %VLP_NAME (FPTN = CONFIG_FILE,NAME = ':CONFIG',LEN = 7);
      345     8936        /**/
      346     8937        %VLP_ACCT (FPTN = SYSACCT,ACCT = ':SYS');
      347     8950        /**/
      348     8951        %P_PCB;
      349     9150        %PARSE$OUT (NAME=O$BLK);
      350     9195        %PARSE$SYM (NAME=O$SYM);
      351     9233        /**/
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:12   
      352     9234        %TD$MPC (NAME=MPC,STCLASS=STATIC);
      353     9256        /**/
      354     9257        %XUR_INIT(ABORT=TSS$BREAK,PCB=P_PCB,GOODCMD=YES,PASS=MODE);
      355     9356        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:13   
      356     9357        /**********************************************************************/
      357     9358        /*   BASED DATA   BASED DATA   BASED DATA   BASED DATA   BASED DATA   */
      358     9359        /**********************************************************************/
      359     9360        /**/
      360     9361        %M$DCB (DCBN = F$DCB);
      361     9435        /**/
      362     9436        %B$TCB;
      363     9439        %B$ALT;
      364     9447        /**/
      365     9448    1   DCL TS$CMDWD UBIN WORD BASED ALIGNED;
      366     9449        /**/
      367     9450    1   DCL 1 TS$DEV BASED ALIGNED,
      368     9451    1         2 SIZE UBIN HALF UNAL,
      369     9452    1         2 CODE UBIN HALF UNAL,
      370     9453    1         2 DEVNAME CHAR(8) UNAL,
      371     9454    1         2 NAME REDEF DEVNAME,
      372     9455    1           3 MNEM CHAR(2) UNAL,
      373     9456    1           3 NUM CHAR(2) UNAL,
      374     9457    1           3 TWSN CHAR(4) UNAL;
      375     9458        /**/
      376     9459    1   DCL 1 TS$MPC BASED ALIGNED,
      377     9460    1         2 SIZE UBIN HALF UNAL,
      378     9461    1         2 CODE UBIN HALF UNAL,
      379     9462    1         2 MPCNAME CHAR(8) UNAL,
      380     9463    1         2 NAME REDEF MPCNAME,
      381     9464    1           3 MNEM CHAR(2) UNAL,
      382     9465    1           3 NUM CHAR(2) UNAL,
      383     9466    1           3 TWSN CHAR(4) UNAL;
      384     9467        /**/
      385     9468    1   DCL 1 TS$IOM BASED ALIGNED,
      386     9469    1         2 SIZE UBIN HALF UNAL,
      387     9470    1         2 CODE UBIN HALF UNAL,
      388     9471    1         2 IOM UBIN WORD UNAL;
      389     9472    1   DCL 1 TS$CPU BASED ALIGNED,
      390     9473    1         2 SIZE UBIN HALF UNAL,
      391     9474    1         2 CODE UBIN HALF UNAL,
      392     9475    1         2 CPU UBIN WORD UNAL;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:14   
      393     9476    1   DCL 1 TS$SCU BASED ALIGNED,
      394     9477    1         2 SIZE UBIN HALF UNAL,
      395     9478    1         2 CODE UBIN HALF UNAL,
      396     9479    1         2 SCU UBIN WORD UNAL;
      397     9480    1   DCL 1 TS$CHAN BASED ALIGNED,
      398     9481    1         2 SIZE UBIN HALF UNAL,
      399     9482    1         2 CODE UBIN HALF UNAL,
      400     9483    1         2 IOM UBIN WORD UNAL,
      401     9484    1         2 LOCHAN UBIN WORD UNAL,
      402     9485    1         2 HICHAN UBIN WORD UNAL;
      403     9486        /**/
      404     9487    1   DCL 1 TS$FEP BASED ALIGNED,
      405     9488    1         2 SIZE UBIN HALF UNAL,
      406     9489    1         2 CODE UBIN HALF UNAL,
      407     9490    1         2 LEN UBIN HALF UNAL,
      408     9491    1         2 IOM UBIN HALF UNAL,
      409     9492    1         2 CHAN UBIN HALF UNAL,
      410     9493    1         2 FEP UBIN HALF UNAL;
      411     9494        /**/
      412     9495    1   DCL 1 TS$PAGES BASED ALIGNED,
      413     9496    1         2 SIZE UBIN HALF UNAL,
      414     9497    1         2 CODE UBIN HALF UNAL,
      415     9498    1         2 LOPAGE UBIN WORD UNAL,
      416     9499    1         2 HIPAGE UBIN WORD UNAL;
      417     9500        /**/
      418     9501        /* Based structures for handling THRESH commands - these must correspond with the ta
              9501        bles in ELF */
      419     9502    1   DCL IOM$(0:7) PTR BASED(B$DS3$);        /* SDS file in DS3                    */
      420     9503    1   DCL 1 IOM BASED(I$) ALIGNED,
      421     9504    1         2 ERR_RATE UBIN,
      422     9505    1         2 NUM_ENTRIES UBIN HALF UNAL,
      423     9506    1         2 THRESH UBIN HALF UNAL,
      424     9507    1         2 THRESH_RATE UBIN,
      425     9508    1         2 CHAN$ PTR;
      426     9509    1   DCL 1 CHAN(0:%(%N_MAXCHANS-1)) BASED(CHAN$) ALIGNED,
      427     9510    1         2 ERR_RATE UBIN,
      428     9511    1         2 NUM_ENTRIES UBIN HALF UNAL,
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:15   
      429     9512    1         2 THRESH UBIN HALF UNAL,
      430     9513    1         2 THRESH_RATE UBIN,
      431     9514    1         2 DEV$ PTR,
      432     9515    1         2 MPC$ PTR;
      433     9516    1   DCL 1 MPC1 BASED(MPC$) ALIGNED,
      434     9517    1         2 ERR_RATE UBIN,
      435     9518    1         2 NUM_ENTRIES UBIN HALF UNAL,
      436     9519    1         2 THRESH UBIN HALF UNAL,
      437     9520    1         2 THRESH_RATE UBIN,
      438     9521    1         2 DEVNM CHAR(8);
      439     9522    1   DCL 1 DEV BASED(DEV$) ALIGNED,
      440     9523    1         2 ERR_RATE UBIN,
      441     9524    1         2 NUM_ENTRIES UBIN HALF UNAL,
      442     9525    1         2 THRESH UBIN HALF UNAL,
      443     9526    1         2 THRESH_RATE UBIN,
      444     9527    1         2 DEVNM CHAR(8),
      445     9528    1         2 DEVNUM UBIN HALF UNAL;
      446     9529    1   DCL TS$TEXT CHAR(120) BASED;
      447     9530        /* The actual table is built in real.  B$PPUT$ references this     */
      448     9531        /* table, which is $LS78 of the monitor.  We map on to it to check */
      449     9532        /* status flags for partitioning/returning of Memory Pages.        */
      450     9533    1   DCL 1 MM$PPUT BASED(MM$) ALIGNED,
      451     9534    1         2 SUSPECT BIT(1) UNAL,
      452     9535    1         2 BAD BIT(1) UNAL,
      453     9536    1         2 IN_TEST BIT(1) UNAL,
      454     9537    1         2 FREE BIT(1) UNAL,
      455     9538    1         2 USER BIT(1) UNAL,
      456     9539    1         2 IO BIT(1) UNAL,
      457     9540    1         2 PRC BIT(1) UNAL,
      458     9541    1         2 STOLEN BIT(1) UNAL,
      459     9542    1         2 COMM BIT(1) UNAL,
      460     9543    1         2 USER# UBIN(9) CALIGNED,
      461     9544    1         2 PNUM REDEF USER# UBIN(9) CALIGNED,
      462     9545    1         2 PPNO UBIN(18) HALIGNED;
      463     9546    1   DCL B$ARRAY(0:0) SBIN WORD BASED;
      464     9547        /**/
      465     9548        %LIST;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:16   
      466     9549        %TD$IOM;
              9550    1   DCL 1 NAME STCLASS ALIGNED,
              9551    1         2 DEVNAME (0:127) CHAR(8) UNAL, /* %N_MAXCHANS-1 */
              9552    1         2 FLAGS(0:127) UNAL, /* %N_MAXCHANS-1 */
              9553    1           3 DOWN BIT(1) UNAL,
              9554    1           3 TDOK BIT(1) UNAL,
              9555    1         2 PORT# UBIN WORD ALIGNED;
      467     9557        %TD$MPC;
              9558    1   DCL 1 NAME STCLASS ALIGNED,
              9559    1         2 MODEL CHAR(8) UNAL,
              9560    1         2 IOCHAN(0:7),
              9561    1           3 PRESENCE BIT(1) UNAL,
              9562    1           3 * BIT(8) UNAL,
              9563    1           3 IOM UBIN BYTE UNAL,
              9564    1           3 LOCHAN UBIN BYTE UNAL,
              9565    1           3 HICHAN UBIN BYTE UNAL,
              9566    1         2 NUMDEVS UBIN HALF UNAL,
              9567    1         2 FLAGS UNAL,
              9568    1           3 DOWN BIT(1) UNAL,
              9569    1           3 TDOK BIT(1) UNAL,
              9570    1           3 * BIT(16) UNAL,
              9571    1        2 FWNAME CHAR(4) UNAL,
              9572    1        2 LPFWNAME CHAR(4) UNAL,
              9573    1        2 CRPFWNAME CHAR(4) UNAL,
              9574    1         2 FWREV ALIGNED,             /* FIRMWARE REVISION LEVEL */
              9575    1           3 LETTER CHAR(1) UNAL,     /* LETTER REVISION */
              9576    1           3 SUBREV CHAR(1) UNAL,     /* SUBREVISION - HEX CHAR */
              9577    1         2 DEVNAME(0:NUMDEV#) CHAR(8) UNAL;
      468     9579        %TD$DEV;
              9580    1   DCL 1 NAME STCLASS ALIGNED,
              9581    1         2 MODEL CHAR(8) UNAL,
              9582    1         2 FEATURE CHAR(8) UNAL,
              9583    1         2 MPCNAME(0:1) CHAR(8) UNAL,
              9584    1         2 IOCHAN,
              9585    1           3 * BIT(9) UNAL,
              9586    1           3 IOM UBIN BYTE UNAL,
              9587    1           3 CHAN UBIN BYTE UNAL,
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:17   
              9588    1           3 * BIT(9) UNAL,
              9589    1        2 FLAGS UNAL,
              9590    1           3 DOWN BIT(1) UNAL,
              9591    1           3 TDOK BIT(1) UNAL,
              9592    1           3 CHECKWRITE BIT(1) UNAL,
              9593    1           3 * BIT(15) UNAL,
              9594    1        2 ATTR BIT(18) UNAL,
              9595    1        2 DEVTYPE UBIN HALF UNAL,
              9596    1        2 DEVNUM UBIN HALF UNAL;
      469     9598        %TD$HEAD;
              9599    1   DCL 1 NAME STCLASS ALIGNED,
              9600    1         2 IOM_INDX UBIN HALF UNAL,        /* indx = 0, in TD$HEAD */
              9601    1         2 NUMIOMS UBIN HALF UNAL,
              9602    1         2 UNITMPC_INDX UBIN HALF UNAL,    /* indx = 1 (for ELAN) */
              9603    1         2 NUMUNITMPCS UBIN HALF UNAL,
              9604    1         2 TAPEMPC_INDX UBIN HALF UNAL,    /* indx = 2      "     */
              9605    1         2 NUMTAPEMPCS UBIN HALF UNAL,
              9606    1         2 DISKMPC_INDX UBIN HALF UNAL,    /* indx = 3      "     */
              9607    1         2 NUMDISKMPCS UBIN HALF UNAL,
              9608    1         2 APMPC_INDX UBIN HALF UNAL,      /* indx = 4      "     */
              9609    1         2 NUMAPMPCS UBIN HALF UNAL,
              9610    1         2 OPC_INDX UBIN HALF UNAL,        /* indx = 5 (for ELAN) */
              9611    1         2 NUMOPCS UBIN HALF UNAL,
              9612    1         2 FEP_INDX UBIN HALF UNAL,        /* this logically belongs after the   */
              9613    1         2 NUMFEPS UBIN HALF UNAL,         /* IOM_INDX, but has to be here for ELAN */
              9614    1         2 CONSOLE_INDX UBIN HALF UNAL,
              9615    1         2 NUMCONSOLES UBIN HALF UNAL,
              9616    1         2 LP_INDX UBIN HALF UNAL,
              9617    1         2 NUMLPS UBIN HALF UNAL,
              9618    1         2 CR_INDX UBIN HALF UNAL,
              9619    1         2 NUMCRS UBIN HALF UNAL,
              9620    1         2 CP_INDX UBIN HALF UNAL,
              9621    1         2 NUMCPS UBIN HALF UNAL,
              9622    1         2 DP_INDX UBIN HALF UNAL,
              9623    1         2 NUMDPS UBIN HALF UNAL,
              9624    1         2 MT_INDX UBIN HALF UNAL,
              9625    1         2 NUMMTS UBIN HALF UNAL,
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:18   
              9626    1         2 XX_INDX UBIN HALF UNAL,
              9627    1         2 NUMXXS UBIN HALF UNAL,
              9628    1         2 AP_INDX UBIN HALF UNAL,
              9629    1         2 NUMAPS UBIN HALF UNAL,
              9630    1         2 OD_INDX UBIN HALF UNAL,
              9631    1         2 NUMODS UBIN HALF UNAL,
              9632    1         2 DEVNAME(0:NUMDEV#) CHAR(8) UNAL;
      470     9634        %PLIST;
      471     9635        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:19   
      472     9636        /***********************************************************************/
      473     9637        /*    ENTRY DCLS   ENTRY DCLS   ENTRY DCLS   ENTRY DCLS   ENTRY DCLS   */
      474     9638        /**********************************************************************/
      475     9639        /**/
      476     9640    1   DCL X$PARSE ENTRY(1) ALTRET;
      477     9641        /**/
      478     9642    1   DCL TSC$CHECK ENTRY(1) ALTRET;
      479     9643    1   DCL TSE$ERROR ENTRY(2) ALTRET;
      480     9644    1   DCL TSW$WRITE ENTRY(5);
      481     9645    1   DCL TSS$BREAK ENTRY;
      482     9646    1   DCL XUR$BREAK ENTRY ASYNC;
      483     9647    1   DCL XUR$INIT ENTRY(3) ALTRET;
      484     9648    1   DCL XUR$GETCMD ENTRY(6) ALTRET;
      485     9649        /**/
      486     9650        /*****************************************************************/
      487     9651        /*   SYMREFS   SYMREFS   SYMREFS   SYMREFS   SYMREFS   SYMREFS   */
      488     9652        /*****************************************************************/
      489     9653        /**/
      490     9654    1   DCL B$JIT$ PTR SYMREF;
      491     9655    1   DCL B$TCB$ PTR SYMREF;
      492     9656    1   DCL B$DS3$ PTR SYMREF;
      493     9657    1   DCL B$IS$ PTR SYMREF;
      494     9658
      495     9659        /**/
      496     9660    1   DCL TSN_CMDS UBIN WORD SYMREF;
      497     9661    1   DCL TS_DIPART BIT(1) SYMREF;
      498     9662        /**/
      499     9663        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:20   
      500     9664        /*****************************************************************************/
      501     9665        /*   PROCEDURE   PROCEDURE   PROCEDURE   PROCEDURE   PROCEDURE   PROCEDURE   */
      502     9666        /*****************************************************************************/
      503     9667        /**/
      504     9668    1           M$SI$ = DCBADDR(DCBNUM(M$SI));
      505     9669        /**/
      506     9670                                                /* SET PRIVILIGES                     */
      507     9671    2           CALL M$SPRIV (PPRIV) WHENALTRETURN DO;
      508     9672    2               CALL M$RPRIV (FPT_PRIV) ALTRET (L1);
      509     9673    2   L1:         CALL M$SPRIV (FPT_PRIV) ALTRET (L2);
      510     9674    2   L2:         END;
      511     9675    1             CALL CONCAT(SYSCON_HERE,'SYSCON ',ADDR(B_VERSION)->B$VERSIONB.T_,' Here');
      512     9676    1           CALL TSW$WRITE(SYSCON_HERE_VEC);
      513     9677        /**/
      514     9678    1           CALL M$OPEN (OPEN_ELF_DATA);
      515     9679        /**/
      516     9680    1           DS_RESULTS = NO;
      517     9681    1           DS_RESULTS.W2.SEGID# = %DS4SID;
      518     9682    1           CALL M$GDS(GDS_FPT) ALTRET (NO_MEMORY); /* GET COMMAND TABLE AREA     */
      519     9683    1           CMD$ = DS_RESULTS.PTR$;
      520     9684    1           CMD_BASE$ = DS_RESULTS.PTR$;
      521     9685        /**/
      522     9686    1           DS_RESULTS = NO;
      523     9687    1           DS_RESULTS.W2.SEGID# = %DS5SID;
      524     9688    1           CALL M$GDS(GDS_FPT) ALTRET (NO_MEMORY); /* GET :CONFIG FILE BUFFER    */
      525     9689    1           CONFIG$ = DS_RESULTS.PTR$;
      526     9690    1           READ_CONFIG.BUF_ = DS_RESULTS;
      527     9691    1           WRITE_CONFIG.BUF_ = DS_RESULTS;
      528     9692        /**/
      529     9693    1           CALL M$PROMPT(PROMPT_FPT);
      530     9694        /**/
      531     9695    1           CALL XUR$INIT(XUR_INIT);
      532     9696    1           REMEMBER CMD_READ IN TS_CMD_READ;
      533     9697    1           CALL M$INT(FPT_INT);
      534     9698    1           CALL M$MONINFO (FPT_MONINFO);
      535     9699    1           TS_DPS90 =  (VLR_SITEINFO.CPU_TYPE# = %DPS90 | VLR_SITEINFO.CPU_TYPE# = %
              9699                    DPS90XA);
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:21   
      536     9700        /**/
      537     9701    1   CMD_READ:
      538     9702    1         TS_PRINT_HEADING = '0'B;
      539     9703    1         TS_PRINT_THRESH_HEADING = '0'B;
      540     9704    1           CALL XUR$GETCMD(TSN_CMDS,P_PCB.OUT$,VECTOR(SYSCON_PROMPT)) ALTRET(PARSE_ERR)
              9704                    ;
      541     9705        /**/
      542     9706    1           CALL TSC$CHECK(P_PCB) ALTRET(CMD_READ);
      543     9707        /**/
      544     9708    1           CMD$ = CMD_BASE$;
      545     9709    2           DO CASE (CMD$ -> TS$CMDWD);
      546     9710        /**/
      547     9711    2            CASE (TSS_PART);
      548     9712    2              CALL EXEC_PART;
      549     9713    2            CASE (TSS_RET);
      550     9714    2              CALL EXEC_RET;
      551     9715    2            CASE (TSS_DISP);
      552     9716    2              CALL EXEC_DISP;
      553     9717    2            CASE(TSS_THRESH);
      554     9718    2              CALL EXEC_THRESH;
      555     9719    2            CASE(TSS_SET);
      556     9720    2              CALL EXEC_SET;
      557     9721    2            CASE (TSS_END);
      558     9722    2              CALL EXEC_END;
      559     9723    2            CASE (TSS_REL);
      560     9724    2              CALL EXEC_REL;
      561     9725    2            END;
      562     9726    1           GOTO CMD_READ;
      563     9727        /**/
      564     9728    1   NO_MEMORY:
      565     9729    1           CALL TSE$ERROR(%E$T_NOMEMORY);
      566     9730    1           CALL M$EXIT (FPT_EXIT);
      567     9731        /**/
      568     9732        /*E*    ERROR:   TSS-E$T_NOMEMORY-0
      569     9733                MESSAGE: Unable to get memory necessary to run SYSCON - exiting.
      570     9734                DESCRIPTION: CANT GET NECESSARY DATA SEGMENT - FORGET IT */
      571     9735        /**/
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:22   
      572     9736    1   PARSE_ERR:
      573     9737        /**/
      574     9738    2           IF (P_PCB.ERROR.CODE = %E$SYNERR) THEN DO;
      575     9739    3              IF (LAST_CMD = 0) THEN DO;
      576     9740    3                 CALL TSE$ERROR(%E$T_BADCMD);
      577     9741    3                 END;
      578     9742        /**/
      579     9743        /*E*    ERROR: TSS-E$T_BADCMD-0
      580     9744                MESSAGE: Unknown command
      581     9745                MESSAGE1: Last command was not recognized by SYSCON
      582     9746                DESCRIPTION: BAD COMMAND VERB             */
      583     9747        /**/
      584     9748    3              ELSE DO;
      585     9749    3                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,0,2),P_PCB.HI_CHAR);
      586     9750    3                 SUB_BUF_1.COUNT = 2;
      587     9751    3                 CALL TSE$ERROR(%E$T_SYNTAX);
      588     9752    3                 END;
      589     9753        /**/
      590     9754        /*E*    ERROR:   TSS-E$T_SYNTAX-0
      591     9755                MESSAGE: Eh?
      592     9756                MESSAGE1: Syntax error at %U1
      593     9757                DESCRIPTION: BAD COMMAND SYNTAX           */
      594     9758        /**/
      595     9759    2              GOTO CMD_READ;
      596     9760    2              END;
      597     9761    2           ELSE DO;
      598     9762    2              CALL EXEC_END;
      599     9763    2              END;  /* ELSE */
      600     9764        /**/
      601     9765        %EJECT ;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:23   
      602     9766    1   CHNGAARD:     PROC ( PATH ) ;
      603     9767
      604     9768    2   DCL 1 PATH            BIT(1) ALIGNED PARAM ;
      605     9769
      606     9770    2   CALL BINCHAR ( SUBSTR(SUB_BUF_1.TEXT,0,1), RESULTS.BOOTINFO.OLDIOM# ) ;
      607     9771    2   SUBSTR(SUB_BUF_1.TEXT,1,1) = '-' ;
      608     9772    2   CALL BINCHAR ( SUBSTR(SUB_BUF_1.TEXT,2,3), RESULTS.BOOTINFO.OLDCHAN# ) ;
      609     9773    2   SUB_BUF_1.COUNT = 5 ;
      610     9774
      611     9775    2   CALL BINCHAR ( SUBSTR(SUB_BUF_2.TEXT,0,1), RESULTS.BOOTINFO.NEWIOM# ) ;
      612     9776    2   SUBSTR(SUB_BUF_2.TEXT,1,1) = '-' ;
      613     9777    2   CALL BINCHAR ( SUBSTR(SUB_BUF_2.TEXT,2,3), RESULTS.BOOTINFO.NEWCHAN# ) ;
      614     9778    2   SUB_BUF_2.COUNT = 5 ;
      615     9779
      616     9780    2   IF RESULTS.BOOTINFO.NEW# THEN
      617     9781    2       IF PATH THEN CALL TSE$ERROR ( %E$T_ALTPATH ) ;
      618     9782    2               ELSE CALL TSE$ERROR ( %E$T_ALTDEV  ) ;
      619     9783
      620     9784    2   ELSE IF RESULTS.BOOTINFO.OLD# THEN
      621     9785    2       IF PATH THEN CALL TSE$ERROR ( %E$T_NOALTPATH ) ;
      622     9786    2               ELSE CALL TSE$ERROR ( %E$T_NOALTDEV  ) ;
      623     9787
      624     9788    3   IF RESULTS.BOOTINFO.ERR# THEN DO ;
      625     9789    3       CALL TSE$ERROR ( %E$T_CHNGAARD ) ;
      626     9790    3       FPT_EXIT.V.STEPCC# = 6 ;
      627     9791    3       END ;
      628     9792
      629     9793    2   RETURN ;
      630     9794
      631     9795        /*E*  ERROR:    TSS-E$T_ALTPATH-0
      632     9796              MESSAGE:  Boot path %U1 changed to %U2
      633     9797              DESCRIPTION:  The channel being partitioned was one of the
      634     9798                            channels used during RECOVERY, XDELTA, and/or
      635     9799                            disk boots.  An alternate channel was found to
      636     9800                            replace this channel.  DP#CP-6'S was rewritten
      637     9801                            with this new channel information.  This new
      638     9802                            channel will be used by RECOVERY, XDELTA, and
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:24   
      639     9803                            disk boots.
      640     9804        */
      641     9805        /*E*  ERROR:    TSS-E$T_ALTDEV-0
      642     9806              MESSAGE:  Boot device %U1 changed to %U2
      643     9807              DESCRIPTION:  The device being partitioned was one of the
      644     9808                            devices used during RECOVERY, XDELTA, and/or
      645     9809                            disk boots.  An alternate device was found to
      646     9810                            replace this device.  DP#CP-6'S was rewritten
      647     9811                            with this new device information.  This new
      648     9812                            device will be used by RECOVERY, XDELTA, and
      649     9813                            disk boots.
      650     9814        */
      651     9815        /*E*  ERROR:    TSS-E$T_NOALTPATH-4
      652     9816              MESSAGE:  No alternate path found for boot path %U1.
      653     9817              DESCRIPTION:  The channel being partitioned was one of the
      654     9818                            channels used during RECOVERY, XDELTA, and/or
      655     9819                            disk boots.  No alternate channel was found to
      656     9820                            replace this channel.  DP#CP-6'S was not rewritten.
      657     9821                            This channel should not be used by RECOVERY,
      658     9822                            XDELTA, or disk boots until it is returned.
      659     9823        */
      660     9824        /*E*  ERROR:    TSS-E$T_NOALTDEV-4
      661     9825              MESSAGE:  No alternate device found for boot device %U1
      662     9826              DESCRIPTION:  The device being partitioned was one of the
      663     9827                            devices used during RECOVERY, XDELTA, and/or
      664     9828                            disk boots.  No alternate device was found to
      665     9829                            replace this device.  DP#CP-6'S was not rewritten.
      666     9830                            This device should not be used by RECOVERY,
      667     9831                            XDELTA, or disk boots until it is returned.
      668     9832        */
      669     9833        /*E*  ERROR:    TSS-E$T_CHNGAARD-6
      670     9834              MESSAGE:  Error rewriting DP#CP-6'S!  Do a Tape Boot ASAP!!
      671     9835              DESCRIPTION:  The component being partitioned was one of the
      672     9836                            componenets used during RECOVERY, XDELTA, and/or
      673     9837                            disk boots.  An alternate component was found to
      674     9838                            replace this component.  However, an IO error
      675     9839                            occurred while attempting to rewrite DP#CP-6'S.
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:25   
      676     9840                            Therefore, DP#CP-6'S may be corrupt!!  RECOVERY
      677     9841                            and/or disk boots may not work correctly!  ZAP!
      678     9842                            system and do a Reconfig Tape Boot (MXT) as soon
      679     9843                            as possible!!
      680     9844        */
      681     9845    2   END CHNGAARD ;
      682     9846        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:26   
      683     9847        /**/
      684     9848    1   EXEC_PART: PROC;
      685     9849        /**/
      686     9850    2           CMD$ = PINCRW(CMD$,SIZEW(TS$CMDWD));
      687     9851    2           SYSCON_FPT.V.FUNCTION# = %PARTITION#;
      688     9852        /**/
      689     9853    3           DO WHILE (CMD$ -> TS$DEV.CODE ~= 0);
      690     9854        /**/
      691     9855    4              DO CASE (CMD$ -> TS$DEV.CODE);
      692     9856        /**/
      693     9857    4               CASE (TSS_DEV);
      694     9858    4                 SYSCON_FPT.V.COMPONENT# = %DVC#;
      695     9859    4                 SYSCON_FPT.V.DEVNM# = CMD$ -> TS$DEV.DEVNAME;
      696     9860    4                 SUB_BUF_1.COUNT = SIZEC(TS$DEV.DEVNAME);
      697     9861    4                 SUB_BUF_1.TEXT = CMD$ -> TS$DEV.DEVNAME;
      698     9862        /**/
      699     9863    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (PART_ERR);
      700     9864        /**/
      701     9865    4                 CALL TSE$ERROR(%E$T_DEVPARTOK);
      702     9866    4                 IF RESULTS.BOOTINFO ~= '0'B THEN CALL CHNGAARD ( '0'B ) ;
      703     9867        /**/
      704     9868    4                 CONFIG_KEY.COUNT = SIZEC(TS$DEV.DEVNAME);
      705     9869    4                 CONFIG_KEY.TEXT = CMD$ -> TS$DEV.DEVNAME;
      706     9870    4                 CALL M$OPEN (OPEN_CONFIG) ALTRET (CONFIG_ERR);
      707     9871    4                 CALL M$READ (READ_CONFIG) ALTRET (CONFIG_ERR);
      708     9872    4                 CONFIG$ -> TD$DEV.FLAGS.DOWN = YES;
      709     9873    4                 WRITE_CONFIG.BUF_.BOUND = SIZEV(TD$DEV);
      710     9874    4                 CALL M$WRITE (WRITE_CONFIG) ALTRET (CONFIG_ERR);
      711     9875    4                 CALL M$CLOSE (CLOSE_CONFIG) ALTRET (CONFIG_ERR);
      712     9876        /**/
      713     9877        /*E*    ERROR: TSS-E$T_DEVPARTOK-0
      714     9878                MESSAGE: Device %U1 successfully partitioned
      715     9879                DESCRIPTION: THE SPECIFIED DEVICE NOW READY FOR T&D OR WHATEVER
      716     9880        */
      717     9881        /**/
      718     9882    4               CASE (TSS_MPC);
      719     9883    4                 SYSCON_FPT.V.COMPONENT# = %MPC#;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:27   
      720     9884    4                 SYSCON_FPT.V.DEVNM# = CMD$ -> TS$MPC.MPCNAME;
      721     9885    4                 SUB_BUF_1.COUNT = 4;
      722     9886    4                 SUB_BUF_1.TEXT = CMD$ -> TS$MPC.MPCNAME;
      723     9887        /**/
      724     9888    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (PART_ERR);
      725     9889        /**/
      726     9890    4                 CALL TSE$ERROR(%E$T_MPCPARTOK);
      727     9891    4                 IF RESULTS.BOOTINFO ~= '0'B THEN CALL CHNGAARD ( '0'B ) ;
      728     9892        /**/
      729     9893    4                 CONFIG_KEY.COUNT = SIZEC(TS$MPC.MPCNAME);
      730     9894    4                 CONFIG_KEY.TEXT = CMD$ -> TS$MPC.MPCNAME;
      731     9895    4                 CALL M$OPEN (OPEN_CONFIG) ALTRET (CONFIG_ERR);
      732     9896    4                 CALL M$READ (READ_CONFIG) ALTRET (CONFIG_ERR);
      733     9897    4                 CONFIG$ -> TD$MPC.FLAGS.DOWN = YES;
      734     9898    4                 WRITE_CONFIG.BUF_.BOUND = SIZEC(TD$MPC) +
      735     9899    4                   (SIZEC(TD$MPC.DEVNAME(0)) * (CONFIG$ -> TD$MPC.NUMDEVS-1)) - 1;
      736     9900    4                 CALL M$WRITE (WRITE_CONFIG) ALTRET (CONFIG_ERR);
      737     9901    4                 CALL M$CLOSE (CLOSE_CONFIG) ALTRET (CONFIG_ERR);
      738     9902        /**/
      739     9903        /*E*    ERROR: TSS-E$T_MPCPARTOK-0
      740     9904                MESSAGE: MPC %U1 successfully partitioned
      741     9905                DESCRIPTION: THE SPECIFIED MPC HAS BEEN PARTITIONED
      742     9906        */
      743     9907        /**/
      744     9908    4               CASE (TSS_FEP);
      745     9909    4                 SYSCON_FPT.V.COMPONENT# = %FEP##;
      746     9910    4                 SYSCON_FPT.V.CHAN# = CMD$ -> TS$FEP.FEP;
      747     9911    4                 SUB_BUF_1.COUNT = CMD$->TS$FEP.LEN + 3;
      748     9912    4                 SUB_BUF_1.TEXT = 'FEP';
      749     9913    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,CMD$->TS$FEP.LEN),CMD$ -> TS$FEP.
              9913                          FEP);
      750     9914        /**/
      751     9915    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (PART_ERR);
      752     9916        /**/
      753     9917    4                 CALL TSE$ERROR (%E$T_FEPPARTOK);
      754     9918        /**/
      755     9919    4                 CONFIG_KEY.COUNT = 4;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:28   
      756     9920    4                 CONFIG_KEY.TEXT = 'IOM';
      757     9921    4                 CALL BINCHAR(SUBSTR(CONFIG_KEY.TEXT,3,CMD$->TS$FEP.LEN),CMD$->TS$FEP.
              9921                          IOM);
      758     9922    4                 CALL M$OPEN(OPEN_CONFIG) ALTRET(CONFIG_ERR);
      759     9923    4                 CALL M$READ(READ_CONFIG) ALTRET(CONFIG_ERR);
      760     9924    4                 CONFIG$->TD$IOM.FLAGS.DOWN(CMD$->TS$FEP.CHAN) = YES;
      761     9925    4                 WRITE_CONFIG.BUF_.BOUND = SIZEV(TD$IOM);
      762     9926    4                 CALL M$WRITE(WRITE_CONFIG) ALTRET(CONFIG_ERR);
      763     9927    4                 CALL M$CLOSE(CLOSE_CONFIG) ALTRET(CONFIG_ERR);
      764     9928        /**/
      765     9929        /*E*    ERROR:   TSS-E$T_FEPPARTOK-0
      766     9930                MESSAGE: FEP %U1 successfully partitioned
      767     9931                DESCRIPTION: THE SPECIFIED FEP HAS BEEN PARTITIONED */
      768     9932        /**/
      769     9933    4               CASE (TSS_IOM);
      770     9934    4                 SYSCON_FPT.V.COMPONENT# = %IOM##;
      771     9935    4                 SYSCON_FPT.V.IOM# = CMD$ -> TS$IOM.IOM;
      772     9936    4                 SUB_BUF_1.COUNT = 5;
      773     9937    4                 SUB_BUF_1.TEXT = 'IOM#';
      774     9938    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,4,1),CMD$ -> TS$IOM.IOM);
      775     9939        /**/
      776     9940    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (PART_ERR);
      777     9941        /**/
      778     9942    4                 CALL TSE$ERROR (%E$T_IOMPARTOK);
      779     9943        /**/
      780     9944        /*E*    ERROR:   TSS-E$T_IOMPARTOK-0
      781     9945                MESSAGE: IOM %U1 successfully partitioned
      782     9946                DESCRIPTION: THE SPECIFIED IOM HAS BEEN PARTITIONED */
      783     9947        /**/
      784     9948    4               CASE (TSS_CHAN);
      785     9949    4                 SYSCON_FPT.V.COMPONENT# = %CHANNEL#;
      786     9950    5                 DO I = CMD$ -> TS$CHAN.LOCHAN TO CMD$ -> TS$CHAN.HICHAN;
      787     9951    5                    SYSCON_FPT.V.IOM# = CMD$ -> TS$CHAN.IOM;
      788     9952    5                    SYSCON_FPT.V.CHAN# = I;
      789     9953    5                    CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,0,1),CMD$ -> TS$CHAN.IOM);
      790     9954    5                    SUB_BUF_1.COUNT = 1;
      791     9955    5                    CALL BINCHAR(SUBSTR(SUB_BUF_2.TEXT,0,3),I);
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:29   
      792     9956    5                    SUB_BUF_2.COUNT = 3;
      793     9957        /**/
      794     9958    5                    CALL M$SYSCON (SYSCON_FPT) ALTRET (PART_ERR);
      795     9959        /**/
      796     9960    5                    CALL TSE$ERROR(%E$T_CHANPARTOK);
      797     9961    5                 IF RESULTS.BOOTINFO ~= '0'B THEN CALL CHNGAARD ( '1'B ) ;
      798     9962        /**/
      799     9963    5                    CONFIG_KEY.COUNT = 4;
      800     9964    5                    CONFIG_KEY.TEXT = 'IOM';
      801     9965    5                    CALL BINCHAR(SUBSTR(CONFIG_KEY.TEXT,3,1),
      802     9966    5                      CMD$ -> TS$CHAN.IOM);
      803     9967    5                    CALL M$OPEN (OPEN_CONFIG) ALTRET (CONFIG_ERR);
      804     9968    5                    CALL M$READ (READ_CONFIG) ALTRET (CONFIG_ERR);
      805     9969    5                    CONFIG$ -> TD$IOM.FLAGS.DOWN(I) = YES;
      806     9970    5                    WRITE_CONFIG.BUF_.BOUND = SIZEV(TD$IOM);
      807     9971    5                    CALL M$WRITE (WRITE_CONFIG) ALTRET (CONFIG_ERR);
      808     9972    5                    CALL M$CLOSE (CLOSE_CONFIG) ALTRET (CONFIG_ERR);
      809     9973    5                    END;
      810     9974        /**/
      811     9975        /*E*    ERROR: TSS-E$T_CHANPARTOK-0
      812     9976                MESSAGE: IOM%U1,CHAN%U2 successfully partitioned
      813     9977                DESCRIPTION: THE SPECIFIED CHANNEL HAS BEEN TAKEN OUT OF SERVICE */
      814     9978        /**/
      815     9979    4               CASE (TSS_PAGES);
      816     9980    4                 CALL M$SAD (SEE_PPUT_LS);      /* GET  PPUT DESCRIPTOR         */
      817     9981        /*     Make CVM PPUT into the IS, then point PPUT$ there  */
      818     9982    4                 PPUTPTR.SEGID = %SPCL1SID;     /* Init pointer to PPUT window  */
      819     9983    4                 PPUT_DESC = PTRDSCR(PPUT$);    /* put (real) PPUT desc in here */
      820     9984    4                 PPUT_OFFSET = B$JIT.DDLL;
      821     9985    4                 VP = PPUT_OFFSET - %ISEGLO;
      822     9986    5                 DO I = DBASE(PPUT_DESC) TO DBASE(PPUT_DESC) + DBOUND(PPUT_DESC) BY
              9986                          4096;
      823     9987    5                    PP = I/4096;
      824     9988    5                    PPUT_CVM.V.PPNO# = PP;
      825     9989    5                    PPUT_CVM.V.VPNO# = VP;
      826     9990    5                    PPUT_CVM.V.PHYSICAL# = '0'B;   /* PPNO is WSQ0 relative     */
      827     9991    5                      CALL M$CVM (PPUT_CVM);
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:30   
      828     9992    5                    VP = VP + 1;
      829     9993    5                    END;   /* DO I */
      830     9994        /**/
      831     9995    4                 PPUT$ = PINCRW (B$IS$, (PPUT_OFFSET - %ISEGLO)*1024);
      832     9996        /**/
      833     9997    4                 MM$ = ADDR(PPUT36);
      834     9998    4                 TS_FIRST = CMD$->TS$PAGES.LOPAGE;
      835     9999    4                 TS_LAST = TS_FIRST;
      836    10000    5                 DO I = CMD$ -> TS$PAGES.LOPAGE TO CMD$ -> TS$PAGES.HIPAGE;
      837    10001    5                    CALL STUFF_BUF (I,SUB_BUF_1);
      838    10002        /**/
      839    10003    5                    BADPP_FPT.V.PPNO# = I;
      840    10004    5                    CALL M$BADPP (BADPP_FPT) ALTRET (PART_ERR);
      841    10005        /**/
      842    10006    5                    PPUT36 = PINCRW(PPUT$, I) -> TEMP36;  /*get PPUT flag word  */
      843    10007        /**/
      844    10008    5                    IF I = CMD$->TS$PAGES.LOPAGE THEN
      845    10009    5                      IF MM$PPUT.SUSPECT THEN  SUSPECT.PREVIOUS = TRUE;
      846    10010    5                                         ELSE  SUSPECT.PREVIOUS = FALSE;
      847    10011        /**/
      848    10012    5                    IF MM$PPUT.SUSPECT THEN  SUSPECT.PRESENT = TRUE;
      849    10013    5                                       ELSE  SUSPECT.PRESENT = FALSE;
      850    10014        /**/
      851    10015    5                    IF SUSPECT.PRESENT THEN
      852    10016    6                       DO;
      853    10017    6                       IF  NOT SUSPECT.PREVIOUS THEN
      854    10018    7                          DO;
      855    10019    7                          SUSPECT.PREVIOUS = TRUE;
      856    10020    7                          CALL STUFF_BUF (TS_FIRST,SUB_BUF_1);
      857    10021    8                          IF TS_FIRST = TS_LAST THEN DO;
      858    10022    8                            CALL TSE$ERROR(%E$T_PAGEPARTOK);
      859    10023    8                            END;
      860    10024    8                          ELSE DO;
      861    10025    8                            CALL STUFF_BUF (TS_LAST,SUB_BUF_2);
      862    10026    8                            CALL TSE$ERROR(%E$T_PAGES_PARTOK);
      863    10027    8                            END;
      864    10028    7                          TS_FIRST = I;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:31   
      865    10029    7                          END;
      866    10030    6                       TS_LAST = I;
      867    10031    6                       END;
      868    10032    5                    ELSE      /* IF NOT SUSPECT.PRESENT DO THIS  */
      869    10033    6                       DO;
      870    10034    6                       IF  SUSPECT.PREVIOUS THEN
      871    10035    7                          DO;
      872    10036    7                          SUSPECT.PREVIOUS = FALSE;
      873    10037    7                          CALL STUFF_BUF (TS_FIRST,SUB_BUF_1);
      874    10038    8                          IF TS_FIRST = TS_LAST THEN DO;
      875    10039    8                            CALL TSE$ERROR(%E$T_PAGESUSPECT_OK);
      876    10040    8                            END;
      877    10041    8                          ELSE DO;
      878    10042    8                            CALL STUFF_BUF (TS_LAST,SUB_BUF_2);
      879    10043    8                            CALL TSE$ERROR(%E$T_PAGES_SUSPECTOK);
      880    10044    8                            END;
      881    10045    7                          TS_FIRST = I;
      882    10046    7                          END;
      883    10047    6                       TS_LAST = I;
      884    10048    6                       END;
      885    10049                         /* end IF */
      886    10050    5                    END;   /* DO I */
      887    10051        /**/
      888    10052    4                    CALL STUFF_BUF (TS_FIRST,SUB_BUF_1);
      889    10053    4                    CALL STUFF_BUF (TS_LAST,SUB_BUF_2);
      890    10054    4                    PPUT36 = PINCRW(PPUT$, TS_LAST) -> TEMP36;
      891    10055    4                    IF MM$PPUT.SUSPECT  THEN
      892    10056    4                       IF TS_FIRST = TS_LAST THEN
      893    10057    4                          CALL TSE$ERROR(%E$T_PAGESUSPECT_OK);
      894    10058    4                       ELSE
      895    10059    4                          CALL TSE$ERROR(%E$T_PAGES_SUSPECTOK);
      896    10060    4                    ELSE      /* LAST PAGE IS BAD (PARTITIONED)  */
      897    10061    4                       IF TS_FIRST = TS_LAST THEN
      898    10062    4                          CALL TSE$ERROR(%E$T_PAGEPARTOK);
      899    10063    4                       ELSE
      900    10064    4                          CALL TSE$ERROR(%E$T_PAGES_PARTOK);
      901    10065        /**/
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:32   
      902    10066        /* ** Un-CVM PPUT at this point ** */
      903    10067        /**/
      904    10068    4                  VP = PPUT_OFFSET - %ISEGLO;
      905    10069    4                  PPUT_CVM.V.PPNO# = -1;
      906    10070    5                  DO I = DBASE(PPUT_DESC) TO DBASE(PPUT_DESC) + DBOUND(PPUT_DESC) BY
             10070                           4096;
      907    10071    5                     PPUT_CVM.V.VPNO# = VP;
      908    10072    5                     CALL M$CVM (PPUT_CVM);
      909    10073    5                     VP = VP + 1;
      910    10074    5                     END;   /* DO I */
      911    10075        /**/
      912    10076        /**/
      913    10077        /*E*    ERROR: TSS-E$T_PAGEPARTOK-0
      914    10078                MESSAGE: Page %U1 successfully partitioned
      915    10079                DESCRIPTION: THE SPECIFIED PAGE HAS BEEN MARKED AS BAD
      916    10080        */
      917    10081        /**/
      918    10082        /*E*    ERROR: TSS-E$T_PAGES_PARTOK-0
      919    10083                MESSAGE: Pages %U1-%U2 successfully partitioned
      920    10084                DESCRIPTION: THE SPECIFIED PAGES HAVE BEEN MARKED AS BAD
      921    10085        */
      922    10086        /**/
      923    10087        /*E*    ERROR: TSS-E$T_PAGESUSPECT_OK-0
      924    10088                MESSAGE: Page %U1 marked as SUSPECT, will partition when released
      925    10089                DESCRIPTION: THE SPECIFIED PAGE HAS BEEN MARKED AS SUSPECT
      926    10090        */
      927    10091        /**/
      928    10092        /*E*    ERROR: TSS-E$T_PAGES_SUSPECTOK-0
      929    10093                MESSAGE: Pages %U1-%U2 marked as SUSPECT, will partition when released
      930    10094                DESCRIPTION: THE SPECIFIED PAGES HAVE BEEN MARKED AS SUSPECT
      931    10095        */
      932    10096        /**/
      933    10097        /**/
      934    10098    4               END;                        /* END CASE                           */
      935    10099        /**/
      936    10100    3   NEXT_PART:
      937    10101    3              CMD$ = PINCRW(CMD$,CMD$ -> TS$DEV.SIZE);
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:33   
      938    10102    3              END;
      939    10103    2           RETURN;
      940    10104        /**/
      941    10105    2   CONFIG_ERR:
      942    10106    2           IF DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#
      943    10107    2              THEN CALL M$CLOSE(CLOSE_CONFIG);
      944    10108    2           CALL TSE$ERROR (%E$T_PARTCONFIGERR);
      945    10109    2           GOTO NEXT_PART;
      946    10110        /**/
      947    10111        /*E*    ERROR:   TSS-E$T_PARTCONFIGERR-0
      948    10112                MESSAGE0: Unable to access :CONFIG file to save partitioned
      949    10113                          status of last component partitioned.
      950    10114                DESCRIPTION: UNABLE TO SAVE STATUS OF COMPONENT IN :CONFIG */
      951    10115        /**/
      952    10116        /**/
      953    10117    2   PART_ERR:
      954    10118    2         SYSCONERR = B$TCB$->B$TCB.ALT$->B$ALT.ERR;
      955    10119        /**/
      956    10120    3           DO CASE (CMD$ -> TS$DEV.CODE);
      957    10121    3            CASE (TSS_DEV);
      958    10122    3              I = %E$T_DEVPARTERR;
      959    10123    3            CASE (TSS_MPC);
      960    10124    3              I = %E$T_MPCPARTERR;
      961    10125    3            CASE (TSS_FEP);
      962    10126    3              I = %E$T_FEPPARTERR;
      963    10127    3            CASE (TSS_IOM);
      964    10128    3              I = %E$T_IOMPARTERR;
      965    10129    3            CASE (TSS_CHAN);
      966    10130    3              I = %E$T_CHANPARTERR;
      967    10131    3            CASE (TSS_PAGES);
      968    10132    3              I = %E$T_PAGEPARTERR;
      969    10133    3            END;
      970    10134    2           CALL TSE$ERROR(I);
      971    10135    2           CALL TSE$ERROR(0,SYSCONERR);  /* ERROR CODE FROM M$SYSCON           */
      972    10136    2           GOTO NEXT_PART;
      973    10137        /**/
      974    10138        /*E*    ERROR: TSS-E$T_DEVPARTERR-0
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:34   
      975    10139                MESSAGE: Unable to partition device %U1.
      976    10140                DESCRIPTION: CANT PARTITION THIS DEVICE   */
      977    10141        /**/
      978    10142        /*E*    ERROR: TSS-E$T_MPCPARTERR-0
      979    10143                MESSAGE: Unable to partition MPC %U1.
      980    10144                DESCRIPTION: CANT PARTITION THIS MPC   */
      981    10145        /**/
      982    10146        /*E*    ERROR: TSS-E$T_FEPPARTERR-0
      983    10147                MESSAGE: Unable to partition FEP %U1.
      984    10148                DESCRIPTION: CANT PARTITION THIS FEP   */
      985    10149        /**/
      986    10150        /*E*    ERROR: TSS-E$T_IOMPARTERR-0
      987    10151                MESSAGE: Unable to partition IOM %U1.
      988    10152                DESCRIPTION: CANT PARTITION THIS IOM   */
      989    10153        /**/
      990    10154        /*E*    ERROR: TSS-E$T_CHANPARTERR-0
      991    10155                MESSAGE: Unable to partition IOM%U1,CHAN%U2.
      992    10156                DESCRIPTION: UNABLE TO PARTITION THIS CHANNEL */
      993    10157        /**/
      994    10158        /*E*    ERROR: TSS-E$T_PAGEPARTERR-0
      995    10159                MESSAGE: Unable to partition Page %U1.
      996    10160                DESCRIPTION: CANT PARTITION THIS PAGE */
      997    10161        /**/
      998    10162    2   END EXEC_PART;
      999    10163        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:35   
     1000    10164        /**/
     1001    10165    1   STUFF_BUF:  PROC(VALUE,BUFFER);
     1002    10166        /**/
     1003    10167    2   DCL 1 BUFFER,
     1004    10168    2         2 COUNT UBIN(9) UNAL,
     1005    10169    2         2 TEXT CHAR(31) UNAL;
     1006    10170    2   DCL 1 SCRATCH,
     1007    10171    2         2 COUNT UBIN(9) UNAL,
     1008    10172    2         2 TEXT CHAR(31) UNAL;
     1009    10173    2   DCL VALUE UBIN WORD;
     1010    10174        /**/
     1011    10175    2                    CALL BINCHAR(SCRATCH.TEXT,VALUE);
     1012    10176    2                    J = 0;
     1013    10177    3                    DO WHILE (SUBSTR(SCRATCH.TEXT,J,1) = '0')  AND
     1014    10178    3                             (J < SIZEC(SCRATCH.TEXT)-1);
     1015    10179    3                       J = J+1;
     1016    10180    3                    END;
     1017    10181    2                    BUFFER.COUNT = SIZEC(SCRATCH.TEXT) - J;
     1018    10182    2                    CALL INSERT (BUFFER.TEXT,0,BUFFER.COUNT,
     1019    10183    2                      SUBSTR(SCRATCH.TEXT,J,BUFFER.COUNT));
     1020    10184        /**/
     1021    10185    2   END STUFF_BUF;
     1022    10186        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:36   
     1023    10187        /**/
     1024    10188    1   EXEC_RET: PROC;
     1025    10189        /**/
     1026    10190    2           CMD$ = PINCRW(CMD$,SIZEW(TS$CMDWD));
     1027    10191    2           SYSCON_FPT.V.FUNCTION# = %RETURN#;
     1028    10192        /**/
     1029    10193    3           DO WHILE (CMD$ -> TS$DEV.CODE ~= 0);
     1030    10194        /**/
     1031    10195    4              DO CASE (CMD$ -> TS$DEV.CODE);
     1032    10196        /**/
     1033    10197    4               CASE (TSS_DEV);
     1034    10198    4                 SYSCON_FPT.V.COMPONENT# = %DVC#;
     1035    10199    4                 SYSCON_FPT.V.DEVNM# = CMD$ -> TS$DEV.DEVNAME;
     1036    10200    4                 SUB_BUF_1.COUNT = SIZEC(TS$DEV.DEVNAME);
     1037    10201    4                 SUB_BUF_1.TEXT = CMD$ -> TS$DEV.DEVNAME;
     1038    10202        /**/
     1039    10203    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (RET_ERR);
     1040    10204        /**/
     1041    10205    4                 CALL TSE$ERROR(%E$T_DEVRETOK);
     1042    10206        /**/
     1043    10207    4                 CONFIG_KEY.COUNT = SIZEC(TS$DEV.DEVNAME);
     1044    10208    4                 CONFIG_KEY.TEXT = CMD$ -> TS$DEV.DEVNAME;
     1045    10209    4                 CALL M$OPEN (OPEN_CONFIG) ALTRET (CONFIG_ERR);
     1046    10210    4                 CALL M$READ (READ_CONFIG) ALTRET (CONFIG_ERR);
     1047    10211    4                 CONFIG$ -> TD$DEV.FLAGS.DOWN = NO;
     1048    10212    4                 WRITE_CONFIG.BUF_.BOUND = SIZEV(TD$DEV);
     1049    10213    4                 CALL M$WRITE (WRITE_CONFIG) ALTRET (CONFIG_ERR);
     1050    10214    4                 CALL M$CLOSE (CLOSE_CONFIG) ALTRET (CONFIG_ERR);
     1051    10215        /**/
     1052    10216        /*E*    ERROR: TSS-E$T_DEVRETOK-0
     1053    10217                MESSAGE: Device %U1 successfully returned
     1054    10218                DESCRIPTION: THE SPECIFIED DEVICE NOW RETURNED TO SYSTEM USE  */
     1055    10219        /**/
     1056    10220    4               CASE (TSS_MPC);
     1057    10221    4                 SYSCON_FPT.V.COMPONENT# = %MPC#;
     1058    10222    4                 SYSCON_FPT.V.DEVNM# = CMD$ -> TS$MPC.MPCNAME;
     1059    10223    4                 SUB_BUF_1.COUNT = 4;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:37   
     1060    10224    4                 SUB_BUF_1.TEXT = CMD$ -> TS$MPC.MPCNAME;
     1061    10225        /**/
     1062    10226    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (RET_ERR);
     1063    10227        /**/
     1064    10228    4                 CALL TSE$ERROR(%E$T_MPCRETOK);
     1065    10229        /**/
     1066    10230    4                 CONFIG_KEY.COUNT = SIZEC(TS$MPC.MPCNAME);
     1067    10231    4                 CONFIG_KEY.TEXT = CMD$ -> TS$MPC.MPCNAME;
     1068    10232    4                 CALL M$OPEN (OPEN_CONFIG) ALTRET (CONFIG_ERR);
     1069    10233    4                 CALL M$READ (READ_CONFIG) ALTRET (CONFIG_ERR);
     1070    10234    4                 CONFIG$ -> TD$MPC.FLAGS.DOWN = NO;
     1071    10235    4                 WRITE_CONFIG.BUF_.BOUND = SIZEC(TD$MPC) +
     1072    10236    4                   (SIZEC(TD$MPC.DEVNAME(0)) * (CONFIG$ -> TD$MPC.NUMDEVS-1)) - 1 ;
     1073    10237    4                 CALL M$WRITE (WRITE_CONFIG) ALTRET (CONFIG_ERR);
     1074    10238    4                 CALL M$CLOSE (CLOSE_CONFIG) ALTRET (CONFIG_ERR);
     1075    10239        /**/
     1076    10240        /*E*    ERROR: TSS-E$T_MPCRETOK-0
     1077    10241                MESSAGE: MPC %U1 successfully returned
     1078    10242                DESCRIPTION: THE SPECIFIED MPC HAS BEEN RETURNED */
     1079    10243        /**/
     1080    10244    4               CASE (TSS_FEP);
     1081    10245    4                 SYSCON_FPT.V.COMPONENT# = %FEP##;
     1082    10246    4                 SYSCON_FPT.V.CHAN# = CMD$ -> TS$FEP.FEP;
     1083    10247    4                 SUB_BUF_1.COUNT = CMD$->TS$FEP.LEN + 3;
     1084    10248    4                 SUB_BUF_1.TEXT = 'FEP';
     1085    10249    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,CMD$->TS$FEP.LEN),CMD$ -> TS$FEP.
             10249                          FEP);
     1086    10250        /**/
     1087    10251    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (RET_ERR);
     1088    10252        /**/
     1089    10253    4                 CALL TSE$ERROR (%E$T_FEPRETOK);
     1090    10254    4                 CONFIG_KEY.COUNT = 4;
     1091    10255    4                 CONFIG_KEY.TEXT = 'IOM';
     1092    10256    4                 CALL BINCHAR(SUBSTR(CONFIG_KEY.TEXT,3,CMD$->TS$FEP.LEN),CMD$->TS$FEP.
             10256                          IOM);
     1093    10257    4                 CALL M$OPEN(OPEN_CONFIG) ALTRET(CONFIG_ERR);
     1094    10258    4                 CALL M$READ(READ_CONFIG) ALTRET(CONFIG_ERR);
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:38   
     1095    10259    4                 CONFIG$->TD$IOM.FLAGS.DOWN(CMD$->TS$FEP.CHAN) = NO;
     1096    10260    4                 WRITE_CONFIG.BUF_.BOUND = SIZEV(TD$IOM);
     1097    10261    4                 CALL M$WRITE(WRITE_CONFIG) ALTRET(CONFIG_ERR);
     1098    10262    4                 CALL M$CLOSE(CLOSE_CONFIG) ALTRET(CONFIG_ERR);
     1099    10263        /*E*    ERROR:   TSS-E$T_FEPRETOK-0
     1100    10264                MESSAGE: FEP %U1 successfully returned
     1101    10265                DESCRIPTION: THE SPECIFIED FEP HAS BEEN RETURNED */
     1102    10266        /**/
     1103    10267    4               CASE (TSS_IOM);
     1104    10268    4                 SYSCON_FPT.V.COMPONENT# = %IOM##;
     1105    10269    4                 SYSCON_FPT.V.IOM# = CMD$ -> TS$IOM.IOM;
     1106    10270    4                 SUB_BUF_1.COUNT = 5;
     1107    10271    4                 SUB_BUF_1.TEXT = 'IOM#';
     1108    10272    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,4,1),CMD$ -> TS$IOM.IOM);
     1109    10273        /**/
     1110    10274    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (RET_ERR);
     1111    10275        /**/
     1112    10276    4                 CALL TSE$ERROR (%E$T_IOMRETOK);
     1113    10277        /*E*    ERROR:   TSS-E$T_IOMRETOK-0
     1114    10278                MESSAGE: IOM %U1 successfully returned
     1115    10279                DESCRIPTION: THE SPECIFIED IOM HAS BEEN RETURNED */
     1116    10280        /**/
     1117    10281    4               CASE (TSS_CHAN);
     1118    10282    4                 SYSCON_FPT.V.COMPONENT# = %CHANNEL#;
     1119    10283    5                 DO I = CMD$ -> TS$CHAN.LOCHAN TO CMD$ -> TS$CHAN.HICHAN;
     1120    10284    5                    SYSCON_FPT.V.IOM# = CMD$ -> TS$CHAN.IOM;
     1121    10285    5                    SYSCON_FPT.V.CHAN# = I;
     1122    10286    5                    CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,0,1),CMD$ -> TS$CHAN.IOM);
     1123    10287    5                    SUB_BUF_1.COUNT = 1;
     1124    10288    5                    CALL BINCHAR(SUBSTR(SUB_BUF_2.TEXT,0,3),I);
     1125    10289    5                    SUB_BUF_2.COUNT = 3;
     1126    10290        /**/
     1127    10291    5                    CALL M$SYSCON (SYSCON_FPT) ALTRET (RET_ERR);
     1128    10292        /**/
     1129    10293    5                    CALL TSE$ERROR(%E$T_CHANRETOK);
     1130    10294        /**/
     1131    10295    5                    CONFIG_KEY.COUNT = 4;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:39   
     1132    10296    5                    CONFIG_KEY.TEXT = 'IOM';
     1133    10297    5                    CALL BINCHAR(SUBSTR(CONFIG_KEY.TEXT,3,1),
     1134    10298    5                      CMD$ -> TS$CHAN.IOM);
     1135    10299    5                    CALL M$OPEN (OPEN_CONFIG) ALTRET (CONFIG_ERR);
     1136    10300    5                    CALL M$READ (READ_CONFIG) ALTRET (CONFIG_ERR);
     1137    10301    5                    CONFIG$ -> TD$IOM.FLAGS.DOWN(I) = NO;
     1138    10302    5                    WRITE_CONFIG.BUF_.BOUND = SIZEV(TD$IOM);
     1139    10303    5                    CALL M$WRITE (WRITE_CONFIG) ALTRET (CONFIG_ERR);
     1140    10304    5                    CALL M$CLOSE (CLOSE_CONFIG) ALTRET (CONFIG_ERR);
     1141    10305        /**/
     1142    10306    5                    END;
     1143    10307        /**/
     1144    10308        /*E*    ERROR: TSS-E$T_CHANRETOK-0
     1145    10309                MESSAGE: IOM%U1,CHAN%U2 successfully returned
     1146    10310                DESCRIPTION: THE SPECIFIED CHANNEL HAS BEEN RETURNED TO SERVICE */
     1147    10311        /**/
     1148    10312    4               CASE (TSS_PAGES);
     1149    10313    4                 TS_FIRST = CMD$->TS$PAGES.LOPAGE;
     1150    10314    5                 DO I = CMD$ -> TS$PAGES.LOPAGE TO CMD$ -> TS$PAGES.HIPAGE;
     1151    10315    5                    BADPP_FPT.V.PPNO# = I;
     1152    10316        /**/
     1153    10317    5                    CALL M$GOODPP (BADPP_FPT) ALTRET (PAGE_ERR);
     1154    10318        /**/
     1155    10319    5                    IF I = CMD$->TS$PAGES.LOPAGE THEN
     1156    10320    5                      RETURNOK.PREVIOUS = TRUE;
     1157    10321        /**/
     1158    10322    5                    IF  NOT RETURNOK.PREVIOUS THEN
     1159    10323    6                       DO;
     1160    10324    6                       RETURNOK.PREVIOUS = TRUE;
     1161    10325    6                       CALL STUFF_BUF (TS_FIRST,SUB_BUF_1);
     1162    10326    7                       IF TS_FIRST = TS_LAST THEN DO;
     1163    10327    7                         CALL TSE$ERROR(%E$T_NOTBADPP);
     1164    10328    7                         END;
     1165    10329    7                       ELSE DO;
     1166    10330    7                         CALL STUFF_BUF (TS_LAST,SUB_BUF_2);
     1167    10331    7                         CALL TSE$ERROR(%E$T_NOTBADPPS);
     1168    10332    7                         END;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:40   
     1169    10333    6                       TS_FIRST = I;
     1170    10334    6                       END;
     1171    10335    5                    TS_LAST = I;
     1172    10336        /**/
     1173    10337    6                    DO WHILE('0'B);        /* NEVER                              */
     1174    10338    6                 PAGE_ERR:
     1175    10339    6                       IF I = CMD$->TS$PAGES.LOPAGE THEN
     1176    10340    6                         RETURNOK.PREVIOUS = FALSE;
     1177    10341        /**/
     1178    10342    6                       IF B$TCB$->B$TCB.ALT$->B$ALT.ERR.CODE = %E$NOTBADPP
     1179    10343    7                          THEN DO;
     1180    10344    7                             IF  RETURNOK.PREVIOUS THEN
     1181    10345    8                                DO;
     1182    10346    8                                RETURNOK.PREVIOUS = FALSE;
     1183    10347    8                                CALL STUFF_BUF (TS_FIRST,SUB_BUF_1);
     1184    10348    9                                IF TS_FIRST = TS_LAST THEN DO;
     1185    10349    9                                  CALL TSE$ERROR(%E$T_PAGERETOK);
     1186    10350    9                                  END;
     1187    10351    9                                ELSE DO;
     1188    10352    9                                  CALL STUFF_BUF (TS_LAST,SUB_BUF_2);
     1189    10353    9                                  CALL TSE$ERROR(%E$T_PAGES_RETOK);
     1190    10354    9                                  END;
     1191    10355    8                                TS_FIRST = I;
     1192    10356    8                                END;
     1193    10357    7                             TS_LAST = I;
     1194    10358    7                             END;
     1195    10359    7                       ELSE DO;      /* JUMP OUT, UNEXPECTED ERROR  */
     1196    10360    7                          CALL STUFF_BUF (I,SUB_BUF_1);
     1197    10361    7                          GOTO RET_ERR;
     1198    10362    7                          END;
     1199    10363    6                    END;                   /* DO NEVER                           */
     1200    10364        /*E*    ERROR: TSS-E$T_NOTBADPP-0
     1201    10365                MESSAGE: Page %U1 is not a bad page.
     1202    10366                MESSAGE1: The specified page is already marked as good.
     1203    10367                DESCRIPTION: See message.           */
     1204    10368        /**/
     1205    10369        /*E*    ERROR: TSS-E$T_NOTBADPPS-0
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:41   
     1206    10370                MESSAGE: Pages %U1-%U2 are not bad pages.
     1207    10371                MESSAGE1: The specified pages are already marked as good.
     1208    10372                DESCRIPTION: See message.           */
     1209    10373    5                    END;    /*  DO I                                */
     1210    10374        /**/
     1211    10375    4                    CALL STUFF_BUF (TS_FIRST,SUB_BUF_1);
     1212    10376    4                    CALL STUFF_BUF (TS_LAST,SUB_BUF_2);
     1213    10377    4                    IF RETURNOK.PREVIOUS  THEN
     1214    10378    4                       IF TS_FIRST = TS_LAST THEN
     1215    10379    4                          CALL TSE$ERROR(%E$T_PAGERETOK);
     1216    10380    4                       ELSE
     1217    10381    4                          CALL TSE$ERROR(%E$T_PAGES_RETOK);
     1218    10382    4                    ELSE      /* LAST PAGE(S) WAS NOTBADPP          */
     1219    10383    4                       IF TS_FIRST = TS_LAST THEN
     1220    10384    4                          CALL TSE$ERROR(%E$T_NOTBADPP);
     1221    10385    4                       ELSE
     1222    10386    4                          CALL TSE$ERROR(%E$T_NOTBADPPS);
     1223    10387        /**/
     1224    10388        /*E*    ERROR: TSS-E$T_PAGERETOK-0
     1225    10389                MESSAGE: Page %U1 successfully returned
     1226    10390                DESCRIPTION: THE SPECIFIED PAGE HAS BEEN MARKED AS GOOD */
     1227    10391        /**/
     1228    10392        /*E*    ERROR: TSS-E$T_PAGES_RETOK-0
     1229    10393                MESSAGE: Pages %U1-%U2 successfully returned
     1230    10394                DESCRIPTION: THE SPECIFIED PAGES HAVE BEEN MARKED AS GOOD */
     1231    10395        /**/
     1232    10396    4               CASE (TSS_CPU);
     1233    10397    4                 SYSCON_FPT.V.COMPONENT# = %CPU##;
     1234    10398    4                 SYSCON_FPT.V.CPU# = CMD$->TS$CPU.CPU;
     1235    10399    4                 SUB_BUF_1.COUNT = 5;
     1236    10400    4                 SUB_BUF_1.TEXT = 'CPU#';
     1237    10401    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,4,1),CMD$->TS$CPU.CPU);
     1238    10402    4                 CALL M$SYSCON(SYSCON_FPT) ALTRET(RET_ERR);
     1239    10403    4                 CALL TSE$ERROR(%E$T_CPURETOK);
     1240    10404        /**/
     1241    10405        /*E*    ERROR: TSS-E$T_CPURETOK-0
     1242    10406                MESSAGE: CPU %U1 successfully returned.
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:42   
     1243    10407                DESCRIPTION: THE SPECIFIED IOM HAS BEEN RETURNED */
     1244    10408    4               CASE (TSS_SCU);
     1245    10409    4                 SYSCON_FPT.V.COMPONENT# = %SCU##;
     1246    10410    4                 SYSCON_FPT.V.SCU# = CMD$->TS$SCU.SCU;
     1247    10411    4                 SUB_BUF_1.COUNT = 5;
     1248    10412    4                 SUB_BUF_1.TEXT = 'SCU#';
     1249    10413    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,4,1),CMD$->TS$SCU.SCU);
     1250    10414    4                 CALL M$SYSCON(SYSCON_FPT) ALTRET(RET_ERR);
     1251    10415    4                 CALL TSE$ERROR(%E$T_SCURETOK);
     1252    10416        /**/
     1253    10417        /*E*    ERROR: TSS-E$T_SCURETOK-0
     1254    10418                MESSAGE: SCU %U1 successfully returned.
     1255    10419                DESCRIPTION: THE SPECIFIED IOM HAS BEEN RETURNED */
     1256    10420    4               END;                        /* END CASE                           */
     1257    10421    3   NEXT_RET:
     1258    10422    3              IF (CMD$->TS$DEV.CODE = TSS_DEV) OR
     1259    10423    3                 (CMD$->TS$DEV.CODE = TSS_MPC) OR
     1260    10424    4                 (CMD$->TS$DEV.CODE = TSS_FEP) THEN DO;
     1261    10425    4                 DEVNAME = SUB_BUF_1.TEXT;
     1262    10426    4                 IF NOT DCBADDR(DCBNUM(M$DEVHIST))->F$DCB.FCD#
     1263    10427    4                    THEN CALL M$OPEN(OPEN_DEVHIST) ALTRET(BAG_IT);
     1264    10428    4                 CALL M$READ(READ_DEVHIST_HEAD) ALTRET(BAG_IT);
     1265    10429    4                 CALL M$READ(READ_DEVHIST_MAINT) ALTRET(BAG_IT);
     1266    10430    4                 NUMDEVS = TH_HEAD.NUMIOMS +
     1267    10431    4                           TH_HEAD.NUMUNITMPCS + TH_HEAD.NUMDISKMPCS + TH_HEAD.
             10431                                    NUMTAPEMPCS +
     1268    10432    4                           TH_HEAD.NUMAPMPCS + TH_HEAD.NUMOPCS +
     1269    10433    4                           TH_HEAD.NUMFEPS + TH_HEAD.NUMCONSOLES +
     1270    10434    4                           TH_HEAD.NUMLPS + TH_HEAD.NUMCPS + TH_HEAD.NUMCRS +
     1271    10435    4                           TH_HEAD.NUMDPS + TH_HEAD.NUMMTS + TH_HEAD.NUMXXS +
     1272    10436    4                           TH_HEAD.NUMAPS + TH_HEAD.NUMODS;
     1273    10437    5                 DO I = 0 TO NUMDEVS - 1;
     1274    10438    6                    IF DEVNAME = TH_MAINT.DEVNAME(I) THEN DO;
     1275    10439    6                       CALL M$TIME(CUR_UTS);
     1276    10440    6                       TH_MAINT.UTS(I) = CURUTS;
     1277    10441    6                       GOTO FOUND_IT;
     1278    10442    6                       END;  /* IF */
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:43   
     1279    10443    5                    END;  /* DO I */
     1280    10444    4   FOUND_IT:     WRITE_MAINT.BUF_.BOUND = SIZEV(TH_MAINT) - ((201 - NUMDEVS) * 12);
     1281    10445    4                 CALL M$WRITE(WRITE_MAINT) ALTRET(BAG_IT);
     1282    10446    4       BAG_IT:   IF DCBADDR(DCBNUM(M$DEVHIST))->F$DCB.FCD#
     1283    10447    4                    THEN CALL M$CLOSE(CLOSE_DEVHIST) ALTRET(NEXT_RET);
     1284    10448    4                 END;  /* IF CODE = DEV|MPC|FEP */
     1285    10449        /**/
     1286    10450    3              CMD$ = PINCRW(CMD$,CMD$ -> TS$DEV.SIZE);
     1287    10451    3              END;
     1288    10452    2           RETURN;
     1289    10453        /**/
     1290    10454    2   CONFIG_ERR:
     1291    10455    2           IF DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#
     1292    10456    2              THEN CALL M$CLOSE(CLOSE_CONFIG);
     1293    10457    2           CALL TSE$ERROR (%E$T_RETCONFIGERR);
     1294    10458    2           GOTO NEXT_RET;
     1295    10459        /**/
     1296    10460        /*E*    ERROR:   TSS-E$T_RETCONFIGERR-0
     1297    10461                MESSAGE0: Unable to access :CONFIG file to save returned
     1298    10462                          status of last component returned.
     1299    10463                DESCRIPTION: UNABLE TO SAVE STATUS OF COMPONENT IN :CONFIG */
     1300    10464        /**/
     1301    10465        /**/
     1302    10466    2   RET_ERR:
     1303    10467    2           CALL TSE$ERROR(0);            /* ERROR CODE FROM M$SYSCON           */
     1304    10468        /**/
     1305    10469    3           DO CASE (CMD$ -> TS$DEV.CODE);
     1306    10470    3            CASE (TSS_DEV);
     1307    10471    3              I = %E$T_DEVRETERR;
     1308    10472    3            CASE (TSS_MPC);
     1309    10473    3              I = %E$T_MPCRETERR;
     1310    10474    3            CASE (TSS_FEP);
     1311    10475    3              I = %E$T_FEPRETERR;
     1312    10476    3            CASE (TSS_IOM);
     1313    10477    3              I = %E$T_IOMRETERR;
     1314    10478    3            CASE (TSS_CHAN);
     1315    10479    3              I = %E$T_CHANRETERR;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:44   
     1316    10480    3            CASE (TSS_PAGES);
     1317    10481    3              I = %E$T_PAGERETERR;
     1318    10482    3            CASE (TSS_CPU);
     1319    10483    3              I = %E$T_CPURETERR;
     1320    10484    3            CASE (TSS_SCU);
     1321    10485    3              I = %E$T_SCURETERR;
     1322    10486    3            END;
     1323    10487    2           CALL TSE$ERROR(I);
     1324    10488    2           GOTO NEXT_RET;
     1325    10489        /**/
     1326    10490        /*E*    ERROR: TSS-E$T_DEVRETERR-0
     1327    10491                MESSAGE: Unable to return device %U1.
     1328    10492                DESCRIPTION: CANT RETURN THIS DEVICE   */
     1329    10493        /**/
     1330    10494        /*E*    ERROR: TSS-E$T_MPCRETERR-0
     1331    10495                MESSAGE: Unable to return MPC %U1.
     1332    10496                DESCRIPTION: CANT RETURN THIS MPC   */
     1333    10497        /**/
     1334    10498        /*E*    ERROR: TSS-E$T_FEPRETERR-0
     1335    10499                MESSAGE: Unable to return FEP %U1.
     1336    10500                DESCRIPTION: CANT RETURN THIS FEP   */
     1337    10501        /**/
     1338    10502        /*E*    ERROR: TSS-E$T_IOMRETERR-0
     1339    10503                MESSAGE: Unable to return IOM %U1.
     1340    10504                DESCRIPTION: CANT RETURN THIS IOM   */
     1341    10505        /**/
     1342    10506        /*E*    ERROR: TSS-E$T_CHANRETERR-0
     1343    10507                MESSAGE: Unable to return IOM%U1,CHAN%U2.
     1344    10508                DESCRIPTION: UNABLE TO RETURN THIS CHANNEL */
     1345    10509        /**/
     1346    10510        /*E*    ERROR: TSS-E$T_PAGERETERR-0
     1347    10511                MESSAGE: Unable to return Page %U1.
     1348    10512                DESCRIPTION: CANT RETURN THIS PAGE */
     1349    10513        /**/
     1350    10514        /*E*    ERROR: TSS-E$T_CPURETERR-0
     1351    10515                MESSAGE: Unable to return CPU %U1.
     1352    10516                DESCRIPTION: CANT RETURN THIS CPU */
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:45   
     1353    10517        /**/
     1354    10518        /*E*    ERROR: TSS-E$T_SCURETERR-0
     1355    10519                MESSAGE: Unable to return SCU %U1.
     1356    10520                DESCRIPTION: CANT RETURN THIS SCU */
     1357    10521        /**/
     1358    10522    2   END EXEC_RET;
     1359    10523        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:46   
     1360    10524    1   EXEC_SET: PROC;
     1361    10525        /**/
     1362    10526    2        I = 0;
     1363    10527    2        CMD$ = PINCRW(CMD$,SIZEW(TS$CMDWD));
     1364    10528    2        SYSCON_FPT.V.FUNCTION# = %SETFLAG#;
     1365    10529    3        DO WHILE(CMD$->TS$DEV.CODE ~= 0);
     1366    10530    3           I = I + 1;
     1367    10531    3           BLK$ = P_PCB.OUT$->O$BLK.SUBLK$(I);
     1368    10532    4           DO CASE(CMD$->TS$DEV.CODE);
     1369    10533    4              CASE(TSS_DEV);
     1370    10534    4                 SUB_BUF_1.COUNT = 4;
     1371    10535    4                 SUB_BUF_1.TEXT = CMD$->TS$DEV.DEVNAME;
     1372    10536    4                 SYSCON_FPT.V.COMPONENT# = %DVC#;
     1373    10537    4                 SYSCON_FPT.V.DEVNM# = CMD$->TS$DEV.DEVNAME;
     1374    10538    4                 SYSCON_FPT.V.FLAGVAL# = BINBIT(BLK$->O$BLK.SUBLK$(BLK$->O$BLK.NSUBLKS-
             10538                          1)->O$BLK.CODE - 1,1);
     1375    10539    5                 DO J = 1 TO BLK$->O$BLK.NSUBLKS - 2;
     1376    10540    5                    SYSCON_FPT.V.FLAG# = BLK$->O$BLK.SUBLK$(J)->O$BLK.CODE;
     1377    10541    5                    CALL M$SYSCON(SYSCON_FPT) ALTRET(SYSCON_ERR);
     1378    10542    5                    IF NOT DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#
     1379    10543    5                       THEN CALL M$OPEN(OPEN_CONFIG) ALTRET(CONFIG_ERR);
     1380    10544    5                    CONFIG_KEY.COUNT = 8;
     1381    10545    5                    CONFIG_KEY.TEXT = SUB_BUF_1.TEXT;
     1382    10546    5                    CALL M$READ(READ_CONFIG) ALTRET(CONFIG_ERR);
     1383    10547    5                    IF BLK$->O$BLK.SUBLK$(J)->O$BLK.CODE = %TDOK#
     1384    10548    5                       THEN CONFIG$->TD$DEV.FLAGS.TDOK = SYSCON_FPT.V.FLAGVAL#;
     1385    10549    5                       ELSE CONFIG$->TD$DEV.FLAGS.CHECKWRITE = SYSCON_FPT.V.FLAGVAL#;
     1386    10550    6                    DO WHILE('0'B);  /* DO NEVER */
     1387    10551    6         SYSCON_ERR:   CALL TSE$ERROR(0);
     1388    10552    6                       CALL TSE$ERROR(%E$T_DEVSETERR);
     1389    10553    6                       END;  /* DO NEVER */
     1390    10554    5                    END;  /* DO J */
     1391    10555    4                 IF DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#
     1392    10556    4                    THEN CALL M$CLOSE(CLOSE_CONFIG) ALTRET(CONFIG_ERR);
     1393    10557    4              CASE(TSS_MPC);
     1394    10558    4                 SUB_BUF_1.COUNT = 4;
     1395    10559    4                 SUB_BUF_1.TEXT = CMD$->TS$MPC.MPCNAME;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:47   
     1396    10560    4                 SYSCON_FPT.V.COMPONENT# = %MPC#;
     1397    10561    4                 SYSCON_FPT.V.DEVNM# = CMD$->TS$MPC.MPCNAME;
     1398    10562    4                 SYSCON_FPT.V.FLAGVAL# = BINBIT(BLK$->O$BLK.SUBLK$(BLK$->O$BLK.NSUBLKS-
             10562                          1)->O$BLK.CODE - 1,1);
     1399    10563    5                 DO J = 1 TO BLK$->O$BLK.NSUBLKS - 2;
     1400    10564    5                    SYSCON_FPT.V.FLAG# = BLK$->O$BLK.SUBLK$(J)->O$BLK.CODE;
     1401    10565    5                    CALL M$SYSCON(SYSCON_FPT) ALTRET(SYSCON_ERR1);
     1402    10566    5                    IF NOT DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#
     1403    10567    5                       THEN CALL M$OPEN(OPEN_CONFIG) ALTRET(CONFIG_ERR);
     1404    10568    5                    CONFIG_KEY.COUNT = 8;
     1405    10569    5                    CONFIG_KEY.TEXT = SUB_BUF_1.TEXT;
     1406    10570    5                    CALL M$READ(READ_CONFIG) ALTRET(CONFIG_ERR);
     1407    10571    5                    IF BLK$->O$BLK.SUBLK$(J)->O$BLK.CODE = %TDOK#
     1408    10572    5                       THEN CONFIG$->TD$MPC.FLAGS.TDOK = SYSCON_FPT.V.FLAGVAL#;
     1409    10573    6                    DO WHILE('0'B);  /* DO NEVER */
     1410    10574    6         SYSCON_ERR1:   CALL TSE$ERROR(0);
     1411    10575    6                        CALL TSE$ERROR(%E$T_MPCSETERR);
     1412    10576    6                       END;  /* DO NEVER */
     1413    10577    5                    END;  /* DO J */
     1414    10578    4                 IF DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#
     1415    10579    4                    THEN CALL M$CLOSE(CLOSE_CONFIG) ALTRET(CONFIG_ERR);
     1416    10580    4              CASE(TSS_FEP);
     1417    10581    4                 SUB_BUF_1.COUNT = CMD$->TS$FEP.LEN;
     1418    10582    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,0,CMD$->TS$FEP.LEN),CMD$->TS$FEP.
             10582                          FEP);
     1419    10583    4                 SYSCON_FPT.V.COMPONENT# = %FEP##;
     1420    10584    4                 SYSCON_FPT.V.CHAN# = CMD$->TS$FEP.FEP;
     1421    10585    4                 SYSCON_FPT.V.FLAGVAL# = BINBIT(BLK$->O$BLK.SUBLK$(BLK$->O$BLK.NSUBLKS-
             10585                          1)->O$BLK.CODE - 1,1);
     1422    10586    5                 DO J = 1 TO BLK$->O$BLK.NSUBLKS - 2;
     1423    10587    5                    SYSCON_FPT.V.FLAG# = BLK$->O$BLK.SUBLK$(J)->O$BLK.CODE;
     1424    10588    5                    CALL M$SYSCON(SYSCON_FPT) ALTRET(SYSCON_ERR2);
     1425    10589    5                    IF NOT DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#
     1426    10590    5                       THEN CALL M$OPEN(OPEN_CONFIG) ALTRET(CONFIG_ERR);
     1427    10591    5                    CONFIG_KEY.COUNT = 4;
     1428    10592    5                    CONFIG_KEY.TEXT = 'IOM';
     1429    10593    5                    CALL BINCHAR(SUBSTR(CONFIG_KEY.TEXT,3,1),CMD$->TS$FEP.IOM);
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:48   
     1430    10594    5                    CALL M$READ(READ_CONFIG) ALTRET(CONFIG_ERR);
     1431    10595    5                    IF BLK$->O$BLK.SUBLK$(J)->O$BLK.CODE = %TDOK#
     1432    10596    5                       THEN CONFIG$->TD$IOM.FLAGS.TDOK(CMD$->TS$FEP.CHAN) = SYSCON_FPT.
             10596                                V.FLAGVAL#;
     1433    10597    6                    DO WHILE('0'B);  /* DO NEVER */
     1434    10598    6         SYSCON_ERR2:   CALL TSE$ERROR(0);
     1435    10599    6                        CALL TSE$ERROR(%E$T_FEPSETERR);
     1436    10600    6                       END;  /* DO NEVER */
     1437    10601    5                    END;  /* DO J */
     1438    10602    4                 IF DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#
     1439    10603    4                    THEN CALL M$CLOSE(CLOSE_CONFIG) ALTRET(CONFIG_ERR);
     1440    10604    4              CASE(TSS_CHAN);
     1441    10605    4                 SYSCON_FPT.V.COMPONENT# = %CHANNEL#;
     1442    10606    4                 SYSCON_FPT.V.IOM# = CMD$->TS$CHAN.IOM;
     1443    10607    5                 DO K = CMD$->TS$CHAN.LOCHAN TO CMD$->TS$CHAN.HICHAN;
     1444    10608    5                    SYSCON_FPT.V.CHAN# = K;
     1445    10609    5                    SUB_BUF_1.COUNT = 1;
     1446    10610    5                    CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,0,1),CMD$->TS$CHAN.IOM);
     1447    10611    5                    SUB_BUF_2.COUNT = 3;
     1448    10612    5                    CALL BINCHAR(SUBSTR(SUB_BUF_2.TEXT,0,3),K);
     1449    10613    5                    SYSCON_FPT.V.FLAGVAL# = BINBIT(BLK$->O$BLK.SUBLK$(BLK$->O$BLK.
             10613                             NSUBLKS-1)->O$BLK.CODE - 1,1);
     1450    10614    6                    DO J = 1 TO BLK$->O$BLK.NSUBLKS - 2;
     1451    10615    6                       SYSCON_FPT.V.FLAG# = BLK$->O$BLK.SUBLK$(J)->O$BLK.CODE;
     1452    10616    6                       CALL M$SYSCON(SYSCON_FPT) ALTRET(SYSCON_ERR3);
     1453    10617    6                       IF NOT DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#
     1454    10618    6                          THEN CALL M$OPEN(OPEN_CONFIG) ALTRET(CONFIG_ERR);
     1455    10619    6                       CONFIG_KEY.COUNT = 4;
     1456    10620    6                       CONFIG_KEY.TEXT = 'IOM';
     1457    10621    6                       CALL BINCHAR(SUBSTR(CONFIG_KEY.TEXT,3,1),CMD$->TS$CHAN.IOM);
     1458    10622    6                       CALL M$READ(READ_CONFIG) ALTRET(CONFIG_ERR);
     1459    10623    6                       IF BLK$->O$BLK.SUBLK$(J)->O$BLK.CODE = %TDOK#
     1460    10624    6                          THEN CONFIG$->TD$IOM.FLAGS.TDOK(K) = SYSCON_FPT.V.FLAGVAL#;
     1461    10625    7                       DO WHILE('0'B);  /* DO NEVER */
     1462    10626    7            SYSCON_ERR3:   CALL TSE$ERROR(0);
     1463    10627    7                           CALL TSE$ERROR(%E$T_CHANSETERR);
     1464    10628    7                          END;  /* DO NEVER */
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:49   
     1465    10629    6                       END;  /* DO J */
     1466    10630    5                    END;  /* DO K */
     1467    10631    4                 IF DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#
     1468    10632    4                    THEN CALL M$CLOSE(CLOSE_CONFIG) ALTRET(CONFIG_ERR);
     1469    10633    4              END;  /* DO CASE CODE */
     1470    10634    3   NEXT_SET:
     1471    10635    3           CMD$ = PINCRW(CMD$,CMD$->TS$DEV.SIZE);
     1472    10636    3           END;  /* DO WHILE */
     1473    10637    2        RETURN;
     1474    10638    2   CONFIG_ERR:
     1475    10639    2        IF DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#
     1476    10640    2           THEN CALL M$CLOSE(CLOSE_CONFIG);
     1477    10641    2        CALL TSE$ERROR(%E$T_SETCONFIGERR);
     1478    10642    2        GOTO NEXT_SET;
     1479    10643        /**/
     1480    10644        /*E*    ERROR:  TSS-E$T_SETCONFIGERR-0
     1481    10645                MESSAGE: Unable to access :CONFIG file to save flag value just set.
     1482    10646                         The flag will return to its old value after a recovery.
     1483    10647                DESCRIPTION: Unable to save SET command in :CONFIG */
     1484    10648        /*E*  ERROR:  TSS-E$T_DEVSETERR-0
     1485    10649              MESSAGE: Unable to set flag for device %U1.
     1486    10650              DESCRIPTION:  see message.       */
     1487    10651        /*E*  ERROR:  TSS-E$T_MPCSETERR-0
     1488    10652              MESSAGE: Unable to set flag for MPC %U1.
     1489    10653              DESCRIPTION:  SEE MESSAGE    */
     1490    10654        /*E*  ERROR:  TSS-E$T_FEPSETERR-0
     1491    10655              MESSAGE:  Unable to set flag for FEP%U1.
     1492    10656              DESCRIPTION:  SEE MESSAGE .      */
     1493    10657        /*E* ERROR:  TSS-E$T_CHANSETERR-0
     1494    10658             MESSAGE: Unable to set flag for IOM%U1,CHAN%U2.
     1495    10659             DESCRIPTION:  SEE MESSAGE          */
     1496    10660    2   END EXEC_SET;
     1497    10661        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:50   
     1498    10662        /**/
     1499    10663    1   EXEC_DISP: PROC;
     1500    10664        /**/
     1501    10665    2           TS_PRINT_HEADING = '1'B;
     1502    10666    2           CMD$ = PINCRW(CMD$,SIZEW(TS$CMDWD));
     1503    10667    2           SYSCON_FPT.V.FUNCTION# = %DISPLAY#;
     1504    10668        /**/
     1505    10669    3           DO WHILE (CMD$ -> TS$DEV.SIZE ~= 0); /* DISPLAY REQUESTED             */
     1506    10670    4              DO CASE (CMD$ -> TS$DEV.CODE);
     1507    10671    4               CASE (TSS_ALL,TSS_DIPART);
     1508    10672    4                  CONFIG_KEY.COUNT = 1;        /* READ HEAD RECORD                   */
     1509    10673    4                  CONFIG_KEY.TEXT = BINASC(0);
     1510    10674    4                  CALL M$OPEN (OPEN_CONFIG) ALTRET (CONFIG_ERR);
     1511    10675    4                  CALL M$READ (READ_CONFIG) ALTRET (CONFIG_ERR);
     1512    10676    4                  CALL M$CLOSE (CLOSE_CONFIG) ALTRET (CONFIG_ERR);
     1513    10677            /**/
     1514    10678    4                  SYSCON_FPT.V.COMPONENT# = %CHANNEL#; /* ALL CHANNELS               */
     1515    10679    5                  DO I = 0 TO CONFIG$ -> TD$HEAD.NUMIOMS - 1;
     1516    10680    5                     SYSCON_FPT.V.IOM# = I;
     1517    10681    5                     SUB_BUF_1.COUNT = 1;
     1518    10682    5                     CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,0,1),I);
     1519    10683            /**/
     1520    10684    6                     DO J = 8 TO %N_MAXCHANS-1;
     1521    10685    6                        SYSCON_FPT.V.CHAN# = J;
     1522    10686            /**/
     1523    10687    6                        CALL M$SYSCON (SYSCON_FPT) ALTRET (NEXTCHAN);
     1524    10688            /**/
     1525    10689    6                        SUB_BUF_2.COUNT = 3;
     1526    10690    6                        CALL BINCHAR(SUBSTR(SUB_BUF_2.TEXT,0,3),J);
     1527    10691    7                        IF RESULTS.TDOK# THEN DO;
     1528    10692    7                           SUB_BUF_3.COUNT = 3;
     1529    10693    7                           SUB_BUF_3.TEXT = 'Yes';
     1530    10694    7                           END;  /* IF */
     1531    10695    7                        ELSE DO;
     1532    10696    7                           SUB_BUF_3.COUNT = 2;
     1533    10697    7                           SUB_BUF_3.TEXT = 'No';
     1534    10698    7                           END;  /* ELSE */
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:51   
     1535    10699    6                        CALL FIX_PART;
     1536    10700    6                        IF RESULTS.PART#
     1537    10701    6                           THEN CALL TSW$WRITE(CHANPART_VEC,VECTOR(SUB_BUF_1),VECTOR(
             10701                                    SUB_BUF_2),
     1538    10702    6                                               VECTOR(PART),VECTOR(SUB_BUF_3));
     1539    10703    6                           ELSE
     1540    10704    6                        IF NOT TS_DIPART
     1541    10705    6                           THEN CALL TSW$WRITE(CHANNOTPART_VEC,VECTOR(SUB_BUF_1),VECTOR
             10705                                    (SUB_BUF_2),
     1542    10706    6                                               VECTOR(PART),VECTOR(SUB_BUF_3));
     1543    10707    6       NEXTCHAN:
     1544    10708    6                        END;
     1545    10709    5                     END;
     1546    10710    4                  SYSCON_FPT.V.COMPONENT# = %IOM##; /* DISPLAY ALL IOMS */
     1547    10711    5                  DO I = 0 TO CONFIG$->TD$HEAD.NUMIOMS - 1;
     1548    10712    5                     SYSCON_FPT.V.IOM# = I;
     1549    10713    5                     CALL M$SYSCON (SYSCON_FPT) WHENRETURN
     1550    10714    6                        DO;
     1551    10715    6                           SUB_BUF_1.COUNT = 4;
     1552    10716    6                           SUB_BUF_1.TEXT = 'IOM';
     1553    10717    6                           CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,1),I);
     1554    10718    6                           CALL FIX_PART;
     1555    10719    6                           IF RESULTS.PART# THEN
     1556    10720    6                              CALL TSW$WRITE (IOMPART_VEC,VECTOR(SUB_BUF_1),VECTOR(PART
             10720                                       ));
     1557    10721    6                           ELSE IF NOT TS_DIPART THEN
     1558    10722    6                              CALL TSW$WRITE (IOMNOPART_VEC,VECTOR(SUB_BUF_1),VECTOR(
             10722                                       PART));
     1559    10723    6                           END;
     1560    10724    5                     END;
     1561    10725            /**/
     1562    10726    4                  SYSCON_FPT.V.COMPONENT# = %FEP##; /* DISPLAY ALL FEPS              */
     1563    10727    4                  IF (CONFIG$ -> TD$HEAD.NUMFEPS ~= 0) THEN
     1564    10728    5                  DO I = 1 TO 255;
     1565    10729    5                     SYSCON_FPT.V.CHAN# = I;
     1566    10730            /**/
     1567    10731    5                     CALL M$SYSCON (SYSCON_FPT)
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:52   
     1568    10732    6                     WHENRETURN DO;
     1569    10733            /**/
     1570    10734    6                     IF I < 10 THEN FEPLEN = 1;
     1571    10735    6                        ELSE
     1572    10736    6                     IF I < 100 THEN FEPLEN = 2;
     1573    10737    6                        ELSE FEPLEN = 3;
     1574    10738    6                     SUB_BUF_1.COUNT = FEPLEN + 3;
     1575    10739    6                     SUB_BUF_1.TEXT = 'FEP';
     1576    10740    6                     CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,FEPLEN),I);
     1577    10741    7                     IF RESULTS.TDOK# THEN DO;
     1578    10742    7                        SUB_BUF_2.COUNT = 3;
     1579    10743    7                        SUB_BUF_2.TEXT = 'Yes';
     1580    10744    7                        END;  /* IF */
     1581    10745    7                     ELSE DO;
     1582    10746    7                        SUB_BUF_2.COUNT = 2;
     1583    10747    7                        SUB_BUF_2.TEXT = 'No';
     1584    10748    7                        END;  /* ELSE */
     1585    10749    6                     CALL FIX_PART;
     1586    10750    6                     IF RESULTS.PART#
     1587    10751    6                        THEN CALL TSW$WRITE(DEVPART_VEC,VECTOR(SUB_BUF_1),VECTOR(PART),
             10751                                 VECTOR(SUB_BUF_2));
     1588    10752    6                        ELSE
     1589    10753    6                     IF NOT TS_DIPART
     1590    10754    6                        THEN CALL TSW$WRITE(DEVNOTPART_VEC,VECTOR(SUB_BUF_1),VECTOR(
             10754                                 PART),VECTOR(SUB_BUF_2));
     1591    10755    6                     END;
     1592    10756    5                        END;
     1593    10757            /**/
     1594    10758    4                  SYSCON_FPT.V.COMPONENT# = %MPC#; /* DO ALL MPCS                    */
     1595    10759    4                  J = CONFIG$ -> TD$HEAD.NUMUNITMPCS +
     1596    10760    4                    CONFIG$ -> TD$HEAD.NUMTAPEMPCS +
     1597    10761    4                    CONFIG$ -> TD$HEAD.NUMDISKMPCS +
     1598    10762    4                    CONFIG$ -> TD$HEAD.NUMAPMPCS;  /* OPCS get displayed as FEPS */
     1599    10763            /**/
     1600    10764    4                  DO I = CONFIG$ -> TD$HEAD.UNITMPC_INDX TO
     1601    10765    5                       CONFIG$ -> TD$HEAD.UNITMPC_INDX + J -1;
     1602    10766    5                     SYSCON_FPT.V.DEVNM# = CONFIG$ -> TD$HEAD.DEVNAME(I);
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:53   
     1603    10767            /**/
     1604    10768    5                     CALL M$SYSCON (SYSCON_FPT) ALTRET (DISP_ERR);
     1605    10769            /**/
     1606    10770    5                     SUB_BUF_1.COUNT = 4;
     1607    10771    5                     SUB_BUF_1.TEXT = SYSCON_FPT.V.DEVNM#;
     1608    10772    6                     IF RESULTS.TDOK# THEN DO;
     1609    10773    6                        SUB_BUF_2.COUNT = 3;
     1610    10774    6                        SUB_BUF_2.TEXT = 'Yes';
     1611    10775    6                        END;  /* IF */
     1612    10776    6                     ELSE DO;
     1613    10777    6                        SUB_BUF_2.COUNT = 2;
     1614    10778    6                        SUB_BUF_2.TEXT = 'No';
     1615    10779    6                        END;  /* ELSE */
     1616    10780    5                     CALL FIX_PART;
     1617    10781    5                     IF RESULTS.PART#
     1618    10782    5                        THEN CALL TSW$WRITE(MPCPART_VEC,VECTOR(SUB_BUF_1),VECTOR(PART),
             10782                                 VECTOR(SUB_BUF_2));
     1619    10783    5                        ELSE
     1620    10784    5                     IF NOT TS_DIPART
     1621    10785    5                       THEN CALL TSW$WRITE(MPCNOTPART_VEC,VECTOR(SUB_BUF_1),VECTOR(PART
             10785                                ),VECTOR(SUB_BUF_2));
     1622    10786    5                     END;
     1623    10787            /**/
     1624    10788    4                  SYSCON_FPT.V.COMPONENT# = %DVC#; /* DO ALL DEVICES                 */
     1625    10789    4                  J = CONFIG$ -> TD$HEAD.NUMCONSOLES +
     1626    10790    4                    CONFIG$ -> TD$HEAD.NUMLPS +
     1627    10791    4                    CONFIG$ -> TD$HEAD.NUMCRS +
     1628    10792    4                    CONFIG$ -> TD$HEAD.NUMCPS +
     1629    10793    4                    CONFIG$ -> TD$HEAD.NUMDPS +
     1630    10794    4                    CONFIG$ -> TD$HEAD.NUMMTS +
     1631    10795    4                    CONFIG$ -> TD$HEAD.NUMXXS +
     1632    10796    4                    CONFIG$ -> TD$HEAD.NUMAPS +
     1633    10797    4                    CONFIG$ -> TD$HEAD.NUMODS;
     1634    10798            /**/
     1635    10799    4                  DO I = CONFIG$ -> TD$HEAD.CONSOLE_INDX TO
     1636    10800    5                       CONFIG$ -> TD$HEAD.CONSOLE_INDX + J - 1;
     1637    10801    5                     SYSCON_FPT.V.DEVNM# = CONFIG$ -> TD$HEAD.DEVNAME(I);
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:54   
     1638    10802            /**/
     1639    10803    5                     CALL M$SYSCON (SYSCON_FPT) ALTRET (DISP_ERR);
     1640    10804            /**/
     1641    10805    5                     SUB_BUF_1.COUNT = SIZEC(SYSCON_FPT.V.DEVNM#);
     1642    10806    5                     SUB_BUF_1.TEXT = SYSCON_FPT.V.DEVNM#;
     1643    10807    6                     IF RESULTS.TDOK# THEN DO;
     1644    10808    6                        SUB_BUF_2.COUNT = 3;
     1645    10809    6                        SUB_BUF_2.TEXT = 'Yes';
     1646    10810    6                        END;  /* IF */
     1647    10811    6                     ELSE DO;
     1648    10812    6                        SUB_BUF_2.COUNT = 2;
     1649    10813    6                        SUB_BUF_2.TEXT = 'No';
     1650    10814    6                        END;  /* ELSE */
     1651    10815    6                     IF SUBSTR(SUB_BUF_1.TEXT,0,2) = 'DP' THEN DO;
     1652    10816    7                        IF RESULTS.CHECKWRITE# THEN DO;
     1653    10817    7                           SUB_BUF_3.COUNT = 3;
     1654    10818    7                           SUB_BUF_3.TEXT = 'Yes';
     1655    10819    7                           END;  /* IF CHECKWRITE# */
     1656    10820    7                        ELSE DO;
     1657    10821    7                           SUB_BUF_3.COUNT = 2;
     1658    10822    7                           SUB_BUF_3.TEXT = 'No';
     1659    10823    7                           END;  /* ELSE */
     1660    10824    6                        END;  /* IF TEXT = 'DP' */
     1661    10825    6                     ELSE DO;
     1662    10826    6                        SUB_BUF_3.COUNT = 0;
     1663    10827    6                        SUB_BUF_3.TEXT = ' ';
     1664    10828    6                        END;  /* ELSE */
     1665    10829    5                     CALL FIX_PART;
     1666    10830    6                     IF RESULTS.PART# THEN DO;
     1667    10831    6                        IF SUBSTR(SUB_BUF_1.TEXT,0,2) = 'DP'
     1668    10832    6                           THEN CALL TSW$WRITE(DPPART_VEC,VECTOR(SUB_BUF_1),VECTOR(PART
             10832                                    ),
     1669    10833    6                                               VECTOR(SUB_BUF_2),VECTOR(SUB_BUF_3));
     1670    10834    6                           ELSE CALL TSW$WRITE(DEVPART_VEC,VECTOR(SUB_BUF_1),VECTOR(
             10834                                    PART),VECTOR(SUB_BUF_2));
     1671    10835    6                         END;  /* IF RESULTS.PART# */
     1672    10836    6                      ELSE DO;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:55   
     1673    10837    7                        IF NOT TS_DIPART THEN DO;
     1674    10838    7                           IF SUBSTR(SUB_BUF_1.TEXT,0,2) = 'DP'
     1675    10839    7                              THEN CALL TSW$WRITE(DPNOTPART_VEC,VECTOR(SUB_BUF_1),
             10839                                       VECTOR(PART),
     1676    10840    7                                                  VECTOR(SUB_BUF_2),VECTOR(SUB_BUF_3));
     1677    10841    7                              ELSE CALL TSW$WRITE(DEVNOTPART_VEC,VECTOR(SUB_BUF_1),
             10841                                       VECTOR(PART),VECTOR(SUB_BUF_2));
     1678    10842    7                           END;  /* IF NOT TS_DIPART */
     1679    10843    6                        END;  /* ELSE */
     1680    10844    5                     END;
     1681    10845    4                  IF NOT TS_DIPART THEN GOTO DO_REL;
     1682    10846    4               CASE(TSS_DIREL);
     1683    10847    4                 CONFIG_KEY.COUNT = 1;
     1684    10848    4                 CONFIG_KEY.TEXT = BINASC(0);
     1685    10849    4                 CALL M$OPEN(OPEN_CONFIG) ALTRET(CONFIG_ERR);
     1686    10850    4                 CALL M$READ(READ_CONFIG) ALTRET(CONFIG_ERR);
     1687    10851    4                 CALL M$CLOSE(CLOSE_CONFIG) ALTRET(CONFIG_ERR);
     1688    10852    4   DO_REL:
     1689    10853    4                 TS_PRINT_HEADING = '0'B;
     1690    10854    4                 SYSCON_FPT.V.COMPONENT# = %IOM##;
     1691    10855    5                 DO I = 0 TO CONFIG$->TD$HEAD.NUMIOMS - 1;
     1692    10856    5                    SYSCON_FPT.V.IOM# = I;
     1693    10857    6                    CALL M$SYSCON(SYSCON_FPT) WHENRETURN DO;
     1694    10858    7                       IF RESULTS.RELEASED# THEN DO;
     1695    10859    7                          SUB_BUF_1.COUNT = 4;
     1696    10860    7                          SUB_BUF_1.TEXT = 'IOM';
     1697    10861    7                          CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,1),I);
     1698    10862    7                          CALL TSW$WRITE(COMPREL_VEC,VECTOR(SUB_BUF_1));
     1699    10863    7                          END;
     1700    10864    6                       END;
     1701    10865    5                    END;
     1702    10866
     1703    10867    4                 SYSCON_FPT.V.COMPONENT# = %CPU##;
     1704    10868    5                 DO I = 0 TO 7;
     1705    10869    5                    SYSCON_FPT.V.CPU# = I;
     1706    10870    6                    CALL M$SYSCON(SYSCON_FPT) WHENRETURN DO;
     1707    10871    7                       IF RESULTS.RELEASED# THEN DO;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:56   
     1708    10872    7                          SUB_BUF_1.COUNT = 4;
     1709    10873    7                          SUB_BUF_1.TEXT = 'CPU';
     1710    10874    7                          CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,1),I);
     1711    10875    7                          CALL TSW$WRITE(COMPREL_VEC,VECTOR(SUB_BUF_1));
     1712    10876    7                          END;
     1713    10877    6                       END;
     1714    10878    5                   END;
     1715    10879    4                 SYSCON_FPT.V.COMPONENT# = %SCU##;
     1716    10880    5                 DO I = 0 TO 1;
     1717    10881    5                    SYSCON_FPT.V.SCU# = I;
     1718    10882    6                    CALL M$SYSCON(SYSCON_FPT) WHENRETURN DO;
     1719    10883    7                       IF RESULTS.RELEASED# THEN DO;
     1720    10884    7                          SUB_BUF_1.COUNT = 4;
     1721    10885    7                          SUB_BUF_1.TEXT = 'SCU';
     1722    10886    7                          CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,1),I);
     1723    10887    7                          CALL TSW$WRITE(COMPREL_VEC,VECTOR(SUB_BUF_1));
     1724    10888    7                          END;
     1725    10889    6                       END;
     1726    10890    5                    END;
     1727    10891    4               CASE(TSS_DIPATH);
     1728    10892    4                 TS_PRINT_HEADING = '0'B;
     1729    10893    4                 IOM_NAME = 'IOM';
     1730    10894    4                 CHANS_FOUND = 0;
     1731    10895    4                 PATH_BUF = CMD$->TS$DEV.DEVNAME;
     1732    10896    4                 BUF_CNT = 9;
     1733    10897    4                 CONFIG_KEY.COUNT = 1;
     1734    10898    4                 CONFIG_KEY.TEXT = BINASC(0);
     1735    10899    4                 CALL M$OPEN(OPEN_CONFIG) ALTRET(PATH_ERR);
     1736    10900    4                 CALL M$READ(READ_CONFIG) ALTRET(PATH_ERR);
     1737    10901    4                 HEADREC = READ_CONFIG.BUF_.BUF$->TD$HEAD;
     1738    10902    5                 DO IOM# = 0 TO HEADREC.NUMIOMS - 1;
     1739    10903    5                    CALL BINCHAR(SUBSTR(IOM_NAME,3,1),IOM#);
     1740    10904    5                    CONFIG_KEY.COUNT = 4;
     1741    10905    5                    CONFIG_KEY.TEXT = IOM_NAME;
     1742    10906    5                    CALL M$READ(READ_CONFIG) ALTRET(PATH_ERR);
     1743    10907    5                    IOMREC = READ_CONFIG.BUF_.BUF$->TD$IOM;
     1744    10908    5                    CALL FIND_CHANNEL(CMD$->TS$DEV.DEVNAME,NUM_CHANS,CHANS) ALTRET(
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:57   
             10908                             NO_CHANS);
     1745    10909    6                    IF CHANS_FOUND = 0 THEN DO;
     1746    10910    6                       CALL INSERT(PATH_BUF,BUF_CNT,6,'is on ');
     1747    10911    6                       BUF_CNT = BUF_CNT + 6;
     1748    10912    6                       END;  /* IF CHANS_FOUND = 0 */
     1749    10913    6                    ELSE DO;
     1750    10914    6                       CALL INSERT(PATH_BUF,BUF_CNT,1,' ');
     1751    10915    6                       BUF_CNT = BUF_CNT + 1;
     1752    10916    6                       END;  /* ELSE */
     1753    10917    5                    CHANS_FOUND = CHANS_FOUND + NUM_CHANS;
     1754    10918    5                    CALL INSERT(PATH_BUF,BUF_CNT,9,IOM_NAME,',CHAN');
     1755    10919    5                    BUF_CNT = BUF_CNT + 9;
     1756    10920    5                    RANGE_FLAG = '0'B;
     1757    10921    5                    CALL MY_BINCHAR(CHANS(0),CHAN_BUF,LEN);
     1758    10922    5                    CALL INSERT(PATH_BUF,BUF_CNT,LEN,CHAN_BUF);
     1759    10923    5                    BUF_CNT = BUF_CNT + LEN;
     1760    10924    5                    LAST_CHAN = CHANS(0);
     1761    10925    6                    DO J = 1 TO NUM_CHANS - 1;
     1762    10926    6                       IF CHANS(J) - 1 = LAST_CHAN
     1763    10927    6                          THEN RANGE_FLAG = '1'B;
     1764    10928    6                          ELSE
     1765    10929    7                          DO;
     1766    10930    7                             IF RANGE_FLAG
     1767    10931    7                                THEN
     1768    10932    8                                DO;
     1769    10933    8                                   RANGE_FLAG = '0'B;
     1770    10934    8                                   CALL INSERT(PATH_BUF,BUF_CNT,1,'-');
     1771    10935    8                                   BUF_CNT = BUF_CNT + 1;
     1772    10936    8                                   CALL MY_BINCHAR(LAST_CHAN,CHAN_BUF,LEN);
     1773    10937    8                                   CALL INSERT(PATH_BUF,BUF_CNT,LEN,CHAN_BUF);
     1774    10938    8                                   BUF_CNT = BUF_CNT + LEN;
     1775    10939    8                                END;           /* IF RANGE_FLAG                      */
     1776    10940    7                             CALL INSERT(PATH_BUF,BUF_CNT,1,',');
     1777    10941    7                             BUF_CNT = BUF_CNT + 1;
     1778    10942    7                             CALL MY_BINCHAR(CHANS(J),CHAN_BUF,LEN);
     1779    10943    7                             CALL INSERT(PATH_BUF,BUF_CNT,LEN,CHAN_BUF);
     1780    10944    7                             BUF_CNT = BUF_CNT + LEN;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:58   
     1781    10945    7                          END;                 /* IF CHANS(J) -1 = LAST_CHAN         */
     1782    10946    6                       LAST_CHAN = CHANS(J);
     1783    10947    6                    END;                       /* DO J                               */
     1784    10948    5                    IF RANGE_FLAG
     1785    10949    5                       THEN
     1786    10950    6                       DO;
     1787    10951    6                          CALL INSERT(PATH_BUF,BUF_CNT,1,'-');
     1788    10952    6                          BUF_CNT = BUF_CNT + 1;
     1789    10953    6                          CALL MY_BINCHAR(LAST_CHAN,CHAN_BUF,LEN);
     1790    10954    6                          CALL INSERT(PATH_BUF,BUF_CNT,LEN,CHAN_BUF);
     1791    10955    6                          BUF_CNT = BUF_CNT + LEN;
     1792    10956    6                       END;
     1793    10957    5   NO_CHANS:
     1794    10958    5                    END;  /* DO IOM# = 0 TO NUMIOMS */
     1795    10959    5                 IF CHANS_FOUND = 0 THEN DO;
     1796    10960    5                    CALL INSERT(PATH_BUF,BUF_CNT,21,': component not found');
     1797    10961    5                    BUF_CNT = BUF_CNT + 21;
     1798    10962    5                    END;  /* IF CHANS_FOUND = 0 */
     1799    10963    4                 TEXTC.TXT = PATH_BUF;
     1800    10964    4                 TEXTC.CNT = BUF_CNT;
     1801    10965    4                 CALL TSW$WRITE(TEXTC_VEC,VECTOR(TEXTC));
     1802    10966    5                 DO WHILE('0'B);  /* DO NEVER */
     1803    10967    5        PATH_ERR:   CALL TSE$ERROR(0);
     1804    10968    5                    CALL TSE$ERROR(%E$T_CANTDIPATH);
     1805    10969        /*E* ERROR: TSS-E$T_CANTDIPATH-0
     1806    10970             MESSAGE: Unable to access :CONFIG - cannot display path.
     1807    10971             DESCRIPTION: CANT FIND THE COMPONENTS */
     1808    10972    5                    END;  /* DO NEVER */
     1809    10973    4                 IF DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#
     1810    10974    4                    THEN CALL M$CLOSE(CLOSE_CONFIG);
     1811    10975        /**/
     1812    10976    4               CASE (TSS_DEV);
     1813    10977    4                 SYSCON_FPT.V.COMPONENT# = %DVC#;
     1814    10978    4                 SYSCON_FPT.V.DEVNM# = CMD$ -> TS$DEV.DEVNAME;
     1815    10979        /**/
     1816    10980    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (DISP_ERR);
     1817    10981        /**/
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:59   
     1818    10982    4                 SUB_BUF_1.COUNT = SIZEC(SYSCON_FPT.V.DEVNM#);
     1819    10983    4                 SUB_BUF_1.TEXT = SYSCON_FPT.V.DEVNM#;
     1820    10984    5                 IF RESULTS.TDOK# THEN DO;
     1821    10985    5                    SUB_BUF_2.COUNT = 3;
     1822    10986    5                    SUB_BUF_2.TEXT = 'Yes';
     1823    10987    5                    END;  /* IF */
     1824    10988    5                 ELSE DO;
     1825    10989    5                    SUB_BUF_2.COUNT = 2;
     1826    10990    5                    SUB_BUF_2.TEXT = 'No';
     1827    10991    5                    END;  /* ELSE */
     1828    10992    5                 IF SUBSTR(SUB_BUF_1.TEXT,0,2) = 'DP' THEN DO;
     1829    10993    6                    IF RESULTS.CHECKWRITE# THEN DO;
     1830    10994    6                       SUB_BUF_3.COUNT = 3;
     1831    10995    6                       SUB_BUF_3.TEXT = 'Yes';
     1832    10996    6                       END;  /* IF CHECKWRITE# */
     1833    10997    6                    ELSE DO;
     1834    10998    6                       SUB_BUF_3.COUNT = 2;
     1835    10999    6                       SUB_BUF_3.TEXT = 'No';
     1836    11000    6                       END;  /* ELSE */
     1837    11001    5                    END;  /* IF TEXT = 'DP' */
     1838    11002    5                 ELSE DO;
     1839    11003    5                    SUB_BUF_3.COUNT = 0;
     1840    11004    5                    SUB_BUF_3.TEXT = ' ';
     1841    11005    5                    END;  /* ELSE */
     1842    11006    4                 CALL FIX_PART;
     1843    11007    5                 IF (RESULTS.PART#) THEN DO;
     1844    11008    5                    IF SUBSTR(SUB_BUF_1.TEXT,0,2) = 'DP'
     1845    11009    5                       THEN CALL TSW$WRITE(DPPART_VEC,VECTOR(SUB_BUF_1),VECTOR(PART),
             11009                                VECTOR(SUB_BUF_2),VECTOR(SUB_BUF_3));
     1846    11010    5                       ELSE CALL TSW$WRITE(DEVPART_VEC,VECTOR(SUB_BUF_1),VECTOR(PART),
             11010                                VECTOR(SUB_BUF_2),VECTOR(SUB_BUF_3));
     1847    11011    5                    END;  /* IF RESULTS.PART# */
     1848    11012    5                 ELSE DO;
     1849    11013    5                    IF SUBSTR(SUB_BUF_1.TEXT,0,2) = 'DP'
     1850    11014    5                       THEN CALL TSW$WRITE(DPNOTPART_VEC,VECTOR(SUB_BUF_1),VECTOR(PART)
             11014                                ,VECTOR(SUB_BUF_2),VECTOR(SUB_BUF_3));
     1851    11015    5                       ELSE CALL TSW$WRITE(DEVNOTPART_VEC,VECTOR(SUB_BUF_1),VECTOR(PART
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:60   
             11015                                ),VECTOR(SUB_BUF_2),VECTOR(SUB_BUF_3));
     1852    11016    5                     END;  /* ELSE */
     1853    11017        /**/
     1854    11018    4               CASE (TSS_MPC);
     1855    11019    4                 SYSCON_FPT.V.COMPONENT# = %MPC#;
     1856    11020    4                 SYSCON_FPT.V.DEVNM# = CMD$ -> TS$MPC.MPCNAME;
     1857    11021        /**/
     1858    11022    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (DISP_ERR);
     1859    11023        /**/
     1860    11024    4                 SUB_BUF_1.COUNT = 4;
     1861    11025    4                 SUB_BUF_1.TEXT = SYSCON_FPT.V.DEVNM#;
     1862    11026    5                 IF RESULTS.TDOK# THEN DO;
     1863    11027    5                    SUB_BUF_2.COUNT = 3;
     1864    11028    5                    SUB_BUF_2.TEXT = 'Yes';
     1865    11029    5                    END;  /* IF */
     1866    11030    5                 ELSE DO;
     1867    11031    5                    SUB_BUF_2.COUNT = 2;
     1868    11032    5                    SUB_BUF_2.TEXT = 'No';
     1869    11033    5                    END;  /* ELSE */
     1870    11034    4                 CALL FIX_PART;
     1871    11035    4                 IF (RESULTS.PART#) THEN CALL TSW$WRITE(MPCPART_VEC,VECTOR(SUB_BUF_1),
             11035                          VECTOR(PART),VECTOR(SUB_BUF_2));
     1872    11036    4                                    ELSE CALL TSW$WRITE(MPCNOTPART_VEC,VECTOR(SUB_BUF_1
             11036                                             ),VECTOR(PART),VECTOR(SUB_BUF_2));
     1873    11037        /**/
     1874    11038    4               CASE (TSS_FEP);
     1875    11039    4                 SYSCON_FPT.V.COMPONENT# = %FEP##;
     1876    11040    4                 SYSCON_FPT.V.CHAN# = CMD$ -> TS$FEP.FEP;
     1877    11041        /**/
     1878    11042    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (DISP_ERR);
     1879    11043        /**/
     1880    11044    4                 SUB_BUF_1.COUNT = CMD$->TS$FEP.LEN + 3;
     1881    11045    4                 SUB_BUF_1.TEXT = 'FEP';
     1882    11046    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,CMD$->TS$FEP.LEN),CMD$ -> TS$FEP.
             11046                          FEP);
     1883    11047    5                 IF RESULTS.TDOK# THEN DO;
     1884    11048    5                    SUB_BUF_2.COUNT = 3;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:61   
     1885    11049    5                    SUB_BUF_2.TEXT = 'Yes';
     1886    11050    5                    END;  /* IF */
     1887    11051    5                 ELSE DO;
     1888    11052    5                    SUB_BUF_2.COUNT = 2;
     1889    11053    5                    SUB_BUF_2.TEXT = 'No';
     1890    11054    5                    END;  /* ELSE */
     1891    11055    4                 CALL FIX_PART;
     1892    11056    4                 IF (RESULTS.PART#) THEN CALL TSW$WRITE(DEVPART_VEC,VECTOR(SUB_BUF_1),
             11056                          VECTOR(PART),VECTOR(SUB_BUF_2));
     1893    11057    4                                    ELSE CALL TSW$WRITE(DEVNOTPART_VEC,VECTOR(SUB_BUF_1
             11057                                             ),VECTOR(PART),VECTOR(SUB_BUF_2));
     1894    11058        /**/
     1895    11059    4               CASE (TSS_IOM);
     1896    11060    4                 SYSCON_FPT.V.COMPONENT# = %IOM##;
     1897    11061    4                 SYSCON_FPT.V.IOM# = CMD$ -> TS$IOM.IOM;
     1898    11062        /**/
     1899    11063    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (DISP_ERR);
     1900    11064        /**/
     1901    11065    4                 SUB_BUF_1.COUNT = 4;
     1902    11066    4                 SUB_BUF_1.TEXT = 'IOM';
     1903    11067    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,1),CMD$ -> TS$IOM.IOM);
     1904    11068    5                 IF RESULTS.TDOK# THEN DO;
     1905    11069    5                    SUB_BUF_2.COUNT = 3;
     1906    11070    5                    SUB_BUF_2.TEXT = 'Yes';
     1907    11071    5                    END;  /* IF */
     1908    11072    5                 ELSE DO;
     1909    11073    5                    SUB_BUF_2.COUNT = 2;
     1910    11074    5                    SUB_BUF_2.TEXT = 'No';
     1911    11075    5                    END;  /* ELSE */
     1912    11076    4                 CALL FIX_PART;
     1913    11077    4                 IF (RESULTS.PART#) THEN CALL TSW$WRITE(IOMPART_VEC,VECTOR(SUB_BUF_1),
             11077                          VECTOR(PART));
     1914    11078    4                                    ELSE CALL TSW$WRITE(IOMNOPART_VEC,VECTOR(SUB_BUF_1)
             11078                                             ,VECTOR(PART));
     1915    11079        /**/
     1916    11080    4               CASE (TSS_CHAN);
     1917    11081    4                 SYSCON_FPT.V.COMPONENT# = %CHANNEL#;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:62   
     1918    11082    4                 SYSCON_FPT.V.IOM# = CMD$ -> TS$CHAN.IOM;
     1919    11083    4                 SUB_BUF_1.COUNT = 1;
     1920    11084    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,0,1),CMD$ -> TS$CHAN.IOM);
     1921    11085    5                 DO I = CMD$ -> TS$CHAN.LOCHAN TO CMD$ -> TS$CHAN.HICHAN;
     1922    11086    5                    SYSCON_FPT.V.CHAN# = I;
     1923    11087        /**/
     1924    11088    5                    CALL M$SYSCON (SYSCON_FPT) ALTRET (DISP_ERR);
     1925    11089        /**/
     1926    11090    5                    SUB_BUF_2.COUNT = 3;
     1927    11091    5                    CALL BINCHAR(SUBSTR(SUB_BUF_2.TEXT,0,3),I);
     1928    11092    6                    IF RESULTS.TDOK# THEN DO;
     1929    11093    6                       SUB_BUF_3.COUNT = 3;
     1930    11094    6                       SUB_BUF_3.TEXT = 'Yes';
     1931    11095    6                       END;  /* IF */
     1932    11096    6                    ELSE DO;
     1933    11097    6                       SUB_BUF_3.COUNT = 2;
     1934    11098    6                       SUB_BUF_3.TEXT = 'No';
     1935    11099    6                       END;  /* ELSE */
     1936    11100    5                    CALL FIX_PART;
     1937    11101    5                    IF (RESULTS.PART#) THEN CALL TSW$WRITE(CHANPART_VEC,VECTOR(
             11101                             SUB_BUF_1),VECTOR(SUB_BUF_2),
     1938    11102    5                                                           VECTOR(PART),VECTOR(
             11102                                                                    SUB_BUF_3));
     1939    11103    5                                       ELSE CALL TSW$WRITE(CHANNOTPART_VEC,VECTOR(
             11103                                                SUB_BUF_1),VECTOR(SUB_BUF_2),
     1940    11104    5                                                           VECTOR(PART),VECTOR(
             11104                                                                    SUB_BUF_3));
     1941    11105    5                    END;
     1942    11106        /**/
     1943    11107    4               CASE (TSS_PAGES);
     1944    11108    4                 TS_PRINT_HEADING = '0'B;
     1945    11109    4                 LOPAGE = CMD$ -> TS$PAGES.LOPAGE;
     1946    11110    4                 HIPAGE = CMD$ -> TS$PAGES.HIPAGE;
     1947    11111    4                 GET_PGLIST.V.MAXPGS# = 1;
     1948    11112    4                 GET_PGLIST.V.LOWPP# = LOPAGE;
     1949    11113    4                 GET_PGLIST.V.HIGHPP# = HIPAGE;
     1950    11114    4                 TS_LAST = MINIMUM(HIPAGE,VLR_MONINFO.PCORE#);
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:63   
     1951    11115    4                 TS_FIRST = LOPAGE;
     1952    11116    4                 IF LOPAGE > VLR_MONINFO.PCORE# THEN GOTO BADP;
     1953    11117    4                 IF HIPAGE=BITBIN('777777777777'O) THEN HIPAGE = VLR_MONINFO.PCORE#;
     1954    11118        /**/
     1955    11119    4                 CALL M$GBPL(GET_PGLIST);
     1956    11120    4                 IF  PGLIST.NPAGES# = 0  THEN
     1957    11121    5                    DO;
     1958    11122    5                    TS_COL_BAD = FALSE;
     1959    11123    5                    GOTO NO_BADPPS;
     1960    11124    5                    END;
     1961    11125    5                 DO I = LOPAGE TO MINIMUM(HIPAGE,VLR_MONINFO.PCORE#);
     1962    11126    5                    GET_PGLIST.V.LOWPP# = I;
     1963    11127    5                    GET_PGLIST.V.HIGHPP# = I;
     1964    11128    5                    CALL M$GBPL(GET_PGLIST);
     1965    11129    5                    IF I = LOPAGE THEN
     1966    11130    5                       IF PGLIST.NPAGES# ~= 0 THEN TS_COL_BAD = TRUE;
     1967    11131    5                                              ELSE TS_COL_BAD = FALSE;
     1968    11132    5                    IF PGLIST.NPAGES# ~= 0 THEN
     1969    11133    6                       DO;
     1970    11134    6                          IF NOT TS_COL_BAD THEN
     1971    11135    7                            DO;
     1972    11136    7                               TS_COL_BAD = TRUE;
     1973    11137    7                               IF TS_FIRST=TS_LAST THEN
     1974    11138    7                                  CALL TSW$WRITE (PAGE1GOOD_VEC,VECTOR(TS_FIRST));
     1975    11139    7                               ELSE
     1976    11140    7                                  CALL TSW$WRITE (PAGEGOOD_VEC,VECTOR(TS_FIRST),VECTOR(
             11140                                           TS_LAST));
     1977    11141    7                               TS_FIRST = I;
     1978    11142    7                               END;
     1979    11143    6                          TS_LAST = I;
     1980    11144    6                          END;
     1981    11145    5                    ELSE
     1982    11146    6                       DO;
     1983    11147    6                          IF TS_COL_BAD THEN
     1984    11148    7                             DO;
     1985    11149    7                                TS_COL_BAD = FALSE;
     1986    11150    7                                IF TS_FIRST=TS_LAST THEN
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:64   
     1987    11151    7                                   CALL TSW$WRITE (PAGE1BAD_VEC,VECTOR(TS_FIRST));
     1988    11152    7                                ELSE
     1989    11153    7                                   CALL TSW$WRITE (PAGEBAD_VEC,VECTOR(TS_FIRST),VECTOR(
             11153                                            TS_LAST));
     1990    11154    7                                TS_FIRST = I;
     1991    11155    7                                END;
     1992    11156    6                          TS_LAST = I;
     1993    11157    6                          END;
     1994    11158    5                    END;  /* DO I */
     1995    11159    4                    IF TS_COL_BAD THEN
     1996    11160    4                      IF TS_FIRST = TS_LAST THEN
     1997    11161    4                        CALL TSW$WRITE (PAGE1BAD_VEC,VECTOR(TS_FIRST));
     1998    11162    4                      ELSE
     1999    11163    4                        CALL TSW$WRITE (PAGEBAD_VEC,VECTOR(TS_FIRST),VECTOR(TS_LAST));
     2000    11164    4                    ELSE   /* the last page(s) was a good one        */
     2001    11165    4   NO_BADPPS:         IF TS_FIRST = TS_LAST THEN
     2002    11166    4                        CALL TSW$WRITE (PAGE1GOOD_VEC,VECTOR(TS_FIRST));
     2003    11167    4                      ELSE
     2004    11168    4                        CALL TSW$WRITE (PAGEGOOD_VEC,VECTOR(TS_FIRST),VECTOR(TS_LAST));
     2005    11169    4                    IF HIPAGE>VLR_MONINFO.PCORE#+1 THEN
     2006    11170    4   BADP:                CALL TSE$ERROR (%E$T_PAGEHIGH);
     2007    11171        /*E* ERROR: TSS-E$T_PAGEHIGH-0
     2008    11172           MESSAGE: One or more pages specified were outside the range of physical memory.
     2009    11173        */
     2010    11174    4               CASE (TSS_CPU);
     2011    11175    4                 SYSCON_FPT.V.COMPONENT# = %CPU##;
     2012    11176    4                 SYSCON_FPT.V.CPU# = CMD$ -> TS$CPU.CPU;
     2013    11177        /**/
     2014    11178    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (DISP_ERR);
     2015    11179        /**/
     2016    11180    4                 SUB_BUF_1.COUNT = 4;
     2017    11181    4                 SUB_BUF_1.TEXT = 'CPU';
     2018    11182    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,1),CMD$ -> TS$CPU.CPU);
     2019    11183    4                 IF (RESULTS.RELEASED#) THEN CALL TSW$WRITE(COMPREL_VEC,VECTOR(
             11183                          SUB_BUF_1));
     2020    11184    4                                    ELSE CALL TSW$WRITE(COMPNOREL_VEC,VECTOR(SUB_BUF_1)
             11184                                             );
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:65   
     2021    11185        /**/
     2022    11186    4               CASE (TSS_SCU);
     2023    11187    4                 SYSCON_FPT.V.COMPONENT# = %SCU##;
     2024    11188    4                 SYSCON_FPT.V.SCU# = CMD$ -> TS$SCU.SCU;
     2025    11189        /**/
     2026    11190    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (DISP_ERR);
     2027    11191        /**/
     2028    11192    4                 SUB_BUF_1.COUNT = 4;
     2029    11193    4                 SUB_BUF_1.TEXT = 'SCU';
     2030    11194    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,1),CMD$ -> TS$SCU.SCU);
     2031    11195    4                 IF (RESULTS.RELEASED#) THEN CALL TSW$WRITE(COMPREL_VEC,VECTOR(
             11195                          SUB_BUF_1));
     2032    11196    4                                    ELSE CALL TSW$WRITE(COMPNOREL_VEC,VECTOR(SUB_BUF_1)
             11196                                             );
     2033    11197
     2034    11198    4               END;
     2035    11199    3              CMD$ = PINCRW(CMD$,CMD$ -> TS$DEV.SIZE);
     2036    11200    3              END;
     2037    11201    2           RETURN;
     2038    11202        /**/
     2039    11203    2   CONFIG_ERR:
     2040    11204    2           IF DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#
     2041    11205    2              THEN CALL M$CLOSE(CLOSE_CONFIG);
     2042    11206    2           CALL TSE$ERROR(%E$T_DISPCONFIGERR);
     2043    11207    2           RETURN;
     2044    11208        /**/
     2045    11209        /*E*    ERROR: TSS-E$T_DISPCONFIGERR-0
     2046    11210                MESSAGE0: Unable to read :CONFIG file - cannot display ALL
     2047    11211                DESCRIPTION: CANT FIND THE COMPONENTS       */
     2048    11212        /**/
     2049    11213    2   DISP_ERR:
     2050    11214    2           CALL TSE$ERROR(0);
     2051    11215    2           RETURN;
     2052    11216        /**/
     2053    11217    2   FIX_PART: PROC;
     2054    11218        /**/
     2055    11219    3         PART.T='No';
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:66   
     2056    11220    3         IF RESULTS.PART# THEN PART.T='Yes';
     2057    11221    3         IF RESULTS.SYSCONPART# AND TS_DPS90 THEN PART.T='CP-6';
     2058    11222    3         IF RESULTS.MSOSPART# AND TS_DPS90 THEN PART.T='MSOS';
     2059    11223    3         IF RESULTS.SYSCONPART# AND RESULTS.MSOSPART# AND TS_DPS90 THEN PART.T='Both';
     2060    11224        /**/
     2061    11225    3   END FIX_PART;
     2062    11226        /**/
     2063    11227    2   END EXEC_DISP;
     2064    11228        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:67   
     2065    11229    1   FIND_CHANNEL: PROC(DEVNAME,NUM,CHANS) ALTRET;
     2066    11230        /**/
     2067    11231    2   DCL DEVNAME CHAR(8);
     2068    11232    2   DCL NUM UBIN WORD;
     2069    11233    2   DCL CHANS(0:15) UBIN WORD; /* 2 CM CHANS WITH 8 CHANS EACH */
     2070    11234        /**/
     2071    11235    2   DCL TEMP1 CHAR(8);
     2072    11236    2   DCL TEMP2 CHAR(8);
     2073    11237    2   DCL I UBIN;
     2074    11238        /**/
     2075    11239    2        NUM = 0;
     2076    11240    2        CHANS = '0'B;
     2077    11241    2        IF (SUBSTR(DEVNAME,0,2) = 'UC') OR
     2078    11242    2           (SUBSTR(DEVNAME,0,2) = 'TC') OR
     2079    11243    2           (SUBSTR(DEVNAME,0,2) = 'DC') OR
     2080    11244    2           (SUBSTR(DEVNAME,0,2) = 'SC') OR
     2081    11245    2           (SUBSTR(DEVNAME,0,2) = 'AC') OR
     2082    11246    3           (SUBSTR(DEVNAME,0,3) = 'FEP') THEN DO;
     2083    11247    3           TEMP1 = DEVNAME;
     2084    11248    3           TEMP2 = ' ';
     2085    11249    3           END;  /* IF IOM CONNECTED DEVICE */
     2086    11250    3        ELSE DO;
     2087    11251    3           CONFIG_KEY.COUNT = 8;
     2088    11252    3           CONFIG_KEY.TEXT = DEVNAME;
     2089    11253    3           CALL M$READ(READ_CONFIG) ALTRET(BAG_IT);
     2090    11254    3           DEVREC = READ_CONFIG.BUF_.BUF$->TD$DEV;
     2091    11255    3           IF (SUBSTR(DEVNAME,0,2) = 'MT') OR
     2092    11256    4              (SUBSTR(DEVNAME,0,2) = 'DP') THEN DO;
     2093    11257    4              TEMP1 = DEVREC.MPCNAME(0);
     2094    11258    4              IF SUBSTR(DEVREC.MPCNAME(0),0,2) = SUBSTR(DEVREC.MPCNAME(1),0,2)
     2095    11259    4                 THEN TEMP2 = DEVREC.MPCNAME(1);
     2096    11260    4                 ELSE TEMP2 = ' ';
     2097    11261    4              END;  /* IF MT OR DP */
     2098    11262    4           ELSE DO;  /* UNIT RECORD, AP, OR OD */
     2099    11263    5              IF DEVREC.IOCHAN.IOM = IOM# THEN DO;
     2100    11264    5                 CHANS(0) = DEVREC.IOCHAN.CHAN;
     2101    11265    5                 NUM = 1;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:68   
     2102    11266    5                 RETURN;
     2103    11267    5                 END;  /* IF IOM = IOM# */
     2104    11268    4              ELSE ALTRETURN;
     2105    11269    4              END;  /* ELSE UNIT RECORD */
     2106    11270    3           END;  /* ELSE PERIPHERAL DEVICE */
     2107    11271    3        DO I = 0 TO %N_MAXCHANS-1;  /* CHECK ALL CHANNELS OF CURRENT IOM */
     2108    11272    4           IF IOMREC.DEVNAME(I) = TEMP1 OR IOMREC.DEVNAME(I) = TEMP2 THEN DO;
     2109    11273    4              CHANS(NUM) = I;
     2110    11274    4              NUM = NUM + 1;
     2111    11275    4              END;  /* IF */
     2112    11276    3           END;  /* DO I */
     2113    11277    2        IF NUM = 0
     2114    11278    2           THEN ALTRETURN;
     2115    11279    2           ELSE RETURN;
     2116    11280    2   BAG_IT:
     2117    11281    2        ALTRETURN;
     2118    11282    2   END FIND_CHANNEL;
     2119    11283        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:69   
     2120    11284    1   MY_BINCHAR: PROC(NUM,CHAN,LEN);
     2121    11285        /**/
     2122    11286    2   DCL NUM UBIN WORD;
     2123    11287    2   DCL CHAN CHAR(2);
     2124    11288    2   DCL LEN UBIN;
     2125    11289        /**/
     2126    11290        /* LOCAL VARS */
     2127    11291    2   DCL CHAR1 CHAR(1);
     2128    11292    2   DCL CHAR2 CHAR(2);
     2129    11293        /**/
     2130    11294    2        IF NUM < 10
     2131    11295    2           THEN
     2132    11296    3           DO;
     2133    11297    3              CALL BINCHAR(CHAR1,NUM);
     2134    11298    3              CHAN = CHAR1;
     2135    11299    3              LEN = 1;
     2136    11300    3           END;
     2137    11301    2           ELSE
     2138    11302    3           DO;
     2139    11303    3              CALL BINCHAR(CHAR2,NUM);
     2140    11304    3              CHAN = CHAR2;
     2141    11305    3              LEN = 2;
     2142    11306    3           END;
     2143    11307    2        RETURN;
     2144    11308    2   END MY_BINCHAR;
     2145    11309        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:70   
     2146    11310        /**/
     2147    11311    1   EXEC_THRESH: PROC;
     2148    11312        /**/
     2149    11313    2         TS_PRINT_THRESH_HEADING = '1'B;
     2150    11314        /**/
     2151    11315    2        CMD$ = PINCRW(CMD$,SIZEW(TS$CMDWD));
     2152    11316    2        I = 1;
     2153    11317    3        DO WHILE(CMD$->TS$CMDWD ~= 0);
     2154    11318    3           BLK$ = P_PCB.OUT$->O$BLK.SUBLK$(I);
     2155    11319    4           IF BLK$->O$BLK.NSUBLKS = 1 THEN DO;
     2156    11320    4              CALL EXEC_DISP_THRESH;
     2157    11321    4              GOTO N;
     2158    11322    4              END;
     2159    11323    3           CALL CHARBIN(EL$THRESHSET.THRESH,BLK$->O$BLK.SUBLK$(1)->O$SYM.TEXT);
     2160    11324    3           EL$THRESHSET.CODE = CMD$->TS$DEV.CODE;
     2161    11325    4           DO CASE(CMD$->TS$DEV.CODE);
     2162    11326    4              CASE(TSS_IOM);
     2163    11327    4                 EL$THRESHSET.IOM.IOM# = CMD$->TS$IOM.IOM;
     2164    11328    4              CASE(TSS_MPC);
     2165    11329    4                 EL$THRESHSET.DEVNAME = CMD$->TS$MPC.MPCNAME;
     2166    11330    4              CASE(TSS_CHAN);
     2167    11331    4                 EL$THRESHSET.IOM.IOM# = CMD$->TS$CHAN.IOM;
     2168    11332    4                 EL$THRESHSET.IOM.LOCHAN = CMD$->TS$CHAN.LOCHAN;
     2169    11333    4                 EL$THRESHSET.IOM.HICHAN = CMD$->TS$CHAN.HICHAN;
     2170    11334    4              CASE(TSS_DEV);
     2171    11335    4                 IF SUBSTR(CMD$->TS$DEV.DEVNAME,0,2) = 'OD' THEN
     2172    11336    4                    GOTO THRESH_ERR;
     2173    11337    4                 EL$THRESHSET.DEVNAME = CMD$->TS$DEV.DEVNAME;
     2174    11338    4              END;  /* DO CASE */
     2175    11339    3           CALL M$WRSYSLOG(TELL_ELF) ALTRET(BAG_IT);
     2176    11340    3           I = I + 1;
     2177    11341    3   N:      CMD$ = PINCRW(CMD$,CMD$->TS$DEV.SIZE);
     2178    11342    3        END;                               /* DO WHILE                           */
     2179    11343    2        RETURN;
     2180    11344    2   BAG_IT:
     2181    11345    2        CALL TSE$ERROR(0);
     2182    11346    2   THRESH_ERR:
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:71   
     2183    11347    2        CALL TSE$ERROR(%E$T_BADELFDATA);
     2184    11348    2        RETURN;
     2185    11349        /*E* ERROR: TSS-E$T_BADELFDATA-0
     2186    11350             MESSAGE: Unable to execute THRESH command.
     2187    11351             DESCRIPTION: Cant write the errlog msg - so quit.  */
     2188    11352        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:72   
     2189    11353        /**/
     2190    11354    2   EXEC_DISP_THRESH: PROC;
     2191    11355        /**/
     2192    11356    4         DO CASE (CMD$->TS$DEV.CODE);
     2193    11357    4            CASE (TSS_IOM);
     2194    11358    4               I$ = IOM$(CMD$->TS$IOM.IOM);
     2195    11359    4               IF I$~=ADDR(NIL) THEN CALL TSW$WRITE (IOMTHRESH_VEC, VECTOR(CMD$->TS$IOM
             11359                        .IOM),VECTOR(IOM.THRESH_RATE));
     2196    11360    4             CASE(TSS_MPC);
     2197    11361    5               DO J = 0 TO 7;               /* ALL IOMS                           */
     2198    11362    5                  IF IOM$(J) ~= ADDR(NIL)
     2199    11363    5                  THEN
     2200    11364    6                  DO K = 0 TO %N_MAXCHANS-1;   /* CHECK ALL CHANNELS                 */
     2201    11365    6                     MPC$ = IOM$(J)->IOM.CHAN$->CHAN.MPC$(K);
     2202    11366    6                     IF MPC$ ~= ADDR(NIL)
     2203    11367    6                     THEN                   /* CHECK THIS MPC REC                 */
     2204    11368    7                     DO;
     2205    11369    8                        IF MPC1.DEVNM = CMD$->TS$MPC.MPCNAME THEN DO;
     2206    11370    8                           CALL TSW$WRITE (DEVTHRESH_VEC,VECTOR(MPC1.DEVNM),VECTOR(MPC1
             11370                                    .THRESH_RATE));
     2207    11371    8                           RETURN;
     2208    11372    8                           END;
     2209    11373    7                        END;                /* IF MPC$ ~= ADDR(NIL)               */
     2210    11374    6                     END;              /* DO K = 0 TO %N_MAXCHANS-1                  */
     2211    11375    5                  END;                      /* DO J = 0 TO 7                      */
     2212    11376    4             CASE(TSS_CHAN);
     2213    11377    4               I$ = IOM$(CMD$->TS$CHAN.IOM);
     2214    11378    4               IF I$=ADDR(NIL) THEN RETURN;
     2215    11379    4               CHAN$ = IOM.CHAN$;
     2216    11380    5               DO J = CMD$->TS$CHAN.LOCHAN TO CMD$->TS$CHAN.HICHAN;
     2217    11381    5                  CALL TSW$WRITE (CHANTHRESH_VEC,VECTOR(CMD$->TS$CHAN.IOM),VECTOR(J),
     2218    11382    5                                  VECTOR(CHAN.THRESH_RATE(J)));
     2219    11383    5                  END;
     2220    11384    4             CASE(TSS_DEV);
     2221    11385    5                IF SUBSTR(CMD$->TS$DEV.DEVNAME,0,2) = 'OD' THEN DO;
     2222    11386    5                   CALL TSE$ERROR(%E$T_BADELFDATA);
     2223    11387    5                   RETURN;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:73   
     2224    11388    5                   END;
     2225    11389    5               DO J = 0 TO 7;               /* ALL IOMS                           */
     2226    11390    5                  IF IOM$(J) ~= ADDR(NIL)
     2227    11391    5                  THEN
     2228    11392    6                  DO K = 0 TO %N_MAXCHANS-1;   /* CHECK ALL CHANNELS                 */
     2229    11393    6                     DEV$ = IOM$(J)->IOM.CHAN$->CHAN.DEV$(K);
     2230    11394    6                     IF DEV$ ~= ADDR(NIL)
     2231    11395    6                     THEN                   /* CHECK THIS DEV REC                 */
     2232    11396    7                     DO;
     2233    11397    8                        IF DEV.DEVNM = CMD$->TS$DEV.DEVNAME THEN DO;
     2234    11398    8                           CALL TSW$WRITE (DEVTHRESH_VEC, VECTOR(DEV.DEVNM),VECTOR(DEV.
             11398                                    THRESH_RATE));
     2235    11399    8                           RETURN;
     2236    11400    8                           END;
     2237    11401    7                        END;                /* IF DEV$ ~= ADDR(NIL)               */
     2238    11402    6                     END;              /* DO K = 0 TO %N_MAXCHANS-1                  */
     2239    11403    5                  END;                      /* DO J = 0 TO 7                      */
     2240    11404    4            END;
     2241    11405        /**/
     2242    11406    3   END EXEC_DISP_THRESH;
     2243    11407        /**/
     2244    11408    2   END EXEC_THRESH;
     2245    11409        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:74   
     2246    11410        /**/
     2247    11411    1   EXEC_END: PROC;
     2248    11412        /**/
     2249    11413    2           CALL M$CLOSE (CLOSE_LO_FPT);
     2250    11414    2           CALL M$CLOSE (CLOSE_ELF_DATA);
     2251    11415    2           CALL M$EXIT (FPT_EXIT);
     2252    11416    2   END;
     2253    11417        /**/
     2254    11418    1   EXEC_REL: PROC;
     2255    11419        /**/
     2256    11420    2           CMD$ = PINCRW(CMD$,SIZEW(TS$CMDWD));
     2257    11421    2           SYSCON_FPT.V.FUNCTION# = %RELEASE_SYSCON#;
     2258    11422    3           DO WHILE (CMD$->TS$DEV.CODE ~= 0);
     2259    11423    4              DO CASE (CMD$->TS$DEV.CODE);
     2260    11424    4               CASE (TSS_IOM);
     2261    11425    4                 SYSCON_FPT.V.COMPONENT# = %IOM##;
     2262    11426    4                 SYSCON_FPT.V.IOM# = CMD$->TS$IOM.IOM;
     2263    11427    4                 SUB_BUF_1.COUNT = 5;
     2264    11428    4                 SUB_BUF_1.TEXT = 'IOM#';
     2265    11429    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,4,1),CMD$->TS$IOM.IOM);
     2266    11430    4                 CALL M$SYSCON(SYSCON_FPT) ALTRET (REL_ERR);
     2267    11431    4                 CALL TSE$ERROR(%E$T_IOMRELOK);
     2268    11432        /**/
     2269    11433        /*E*    ERROR: TSS-E$T_IOMRELOK-0
     2270    11434                MESSAGE: IOM %U1 successfully released
     2271    11435                DESCRIPTION: THE SPECIFIED IOM HAS BEEN RELEASED */
     2272    11436    4               CASE (TSS_CPU);
     2273    11437    4                 SYSCON_FPT.V.COMPONENT# = %CPU##;
     2274    11438    4                 SYSCON_FPT.V.CPU# = CMD$->TS$CPU.CPU;
     2275    11439    4                 SUB_BUF_1.COUNT = 5;
     2276    11440    4                 SUB_BUF_1.TEXT = 'CPU#';
     2277    11441    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,4,1),CMD$->TS$CPU.CPU);
     2278    11442    4                 CALL M$SYSCON(SYSCON_FPT) ALTRET (REL_ERR);
     2279    11443    4                 CALL TSE$ERROR(%E$T_CPURELOK);
     2280    11444        /**/
     2281    11445        /*E*    ERROR: TSS-E$T_CPURELOK-0
     2282    11446                MESSAGE: CPU %U1 successfully released
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:75   
     2283    11447                DESCRIPTION: THE SPECIFIED CPU HAS BEEN RELEASED */
     2284    11448    4               CASE (TSS_SCU);
     2285    11449    4                 SYSCON_FPT.V.COMPONENT# = %SCU##;
     2286    11450    4                 SYSCON_FPT.V.SCU# = CMD$->TS$SCU.SCU;
     2287    11451    4                 SUB_BUF_1.COUNT = 5;
     2288    11452    4                 SUB_BUF_1.TEXT = 'SCU#';
     2289    11453    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,4,1),CMD$->TS$SCU.SCU);
     2290    11454    4                 CALL M$SYSCON(SYSCON_FPT) ALTRET (REL_ERR);
     2291    11455    4                 CALL TSE$ERROR(%E$T_SCURELOK);
     2292    11456        /**/
     2293    11457        /*E*    ERROR: TSS-E$T_SCURELOK-0
     2294    11458                MESSAGE: SCU %U1 successfully released
     2295    11459                DESCRIPTION: THE SPECIFIED SCU HAS BEEN RELEASED */
     2296    11460    4              END;
     2297    11461    3   NEXT_REL:
     2298    11462    3             CMD$ = PINCRW(CMD$,CMD$->TS$DEV.SIZE);
     2299    11463    3             END;
     2300    11464    2          RETURN;
     2301    11465    2   REL_ERR:
     2302    11466    2          SYSCONERR = B$TCB$->B$TCB.ALT$->B$ALT.ERR;
     2303    11467    3          DO CASE(CMD$->TS$DEV.CODE);
     2304    11468    3           CASE (TSS_IOM);
     2305    11469    3             I = %E$T_IOMRELERR;
     2306    11470    3           CASE (TSS_CPU);
     2307    11471    3             I = %E$T_CPURELERR;
     2308    11472    3           CASE (TSS_SCU);
     2309    11473    3             I = %E$T_SCURELERR;
     2310    11474    3          END;
     2311    11475    2          CALL TSE$ERROR(I);
     2312    11476    2          CALL TSE$ERROR(0,SYSCONERR);
     2313    11477    2          GOTO NEXT_REL;
     2314    11478        /*E*    ERROR: TSS-E$T_IOMRELERR-0
     2315    11479                MESSAGE: Unable to release IOM %U1
     2316    11480                DESCRIPTION: CANT RELEASE THIS IOM  */
     2317    11481        /*E*    ERROR: TSS-E$T_CPURELERR-0
     2318    11482                MESSAGE: Unable to release CPU %U1
     2319    11483                DESCRIPTION: CANT RELEASE THIS CPU  */
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:76   
     2320    11484        /*E*    ERROR: TSS-E$T_SCURELERR-0
     2321    11485                MESSAGE: Unable to release SCU %U1
     2322    11486                DESCRIPTION: CANT RELEASE THIS SCU  */
     2323    11487    2   END EXEC_REL;
     2324    11488        /**/
     2325    11489    1   END TSS$SYSCON;
     2326    11490        %EOD;

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:77   
--  Include file information  --

   M_INFO_C.:E05TOU  is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   EL$TABLES.:E05TOU  is referenced.
   EL_SUBS_C.:E05TOU  is referenced.
   TH$HIST.:E05TOU  is referenced.
   TD$STRUCT.:E05TOU  is referenced.
   XU_PERR_C.:E05TOU  is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   TS_PERR_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   IT_SUBS_C.:E05TOU  is referenced.
   TS_SUBS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure TSS$SYSCON.

   Procedure TSS$SYSCON requires 4115 words for executable code.
   Procedure TSS$SYSCON requires 76 words of local(AUTO) storage.

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:78   

 Object Unit name= TSS$SYSCON                                 File name= TSS$SYSCON.:E05TOU
 UTS= JUL 30 '97 06:53:53.20 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   DCB   even  none     0      0  M$SI
    2   DCB   even  none     0      0  M$LO
    3   DCB   even  none     0      0  M$DO
    4   DCB   even  none     0      0  M$CONF
    5   DCB   even  none     0      0  M$ELF
    6   DCB   even  none     0      0  M$DEVHIST
    7   Data  even  none  2136   4130  TSS$SYSCON
    8  RoData even  UTS    219    333  TSS$SYSCON
    9   DCB   even  none    98    142  F$DCB
   10   Proc  even  none  4115  10023  TSS$SYSCON
   11  RoData even  none   206    316  TSS$SYSCON

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
    10      0   yes            yes      Main       0  TSS$SYSCON
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:79   

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    7    614  FPT_EXIT                           7   1060  M$SI$
    7   1061  BLK$                               7   1062  CMD$
    7   1063  CMD_BASE$                          7   1064  CMDTEXT$
    7   1065  CMDTEXT_BASE$                      7   1066  CONFIG$
    7   1067  I                                  7   1070  J
    7   1071  K                                  7   1072  TS_CMD_READ
    7   1074  TS_PRINT_HEADING                   7   1075  TS_PRINT_THRESH_HEADING
    7   1076  TS_DPS90                           7   1077  TS_COL_BAD
    7   1100  TS_FIRST                           7   1101  TS_LAST
    7   1106  SUSPECT                            7   1112  PPUT_DESC
    7   1114  PPUT$                              7   3640  ERR_CODE
    7   3641  LAST_CMD                           7   3642  ERR_BUF
    7   3742  CONFIG_KEY                         7   3745  SUB_BUF_1
    7   3755  SUB_BUF_2                          7   3765  SUB_BUF_3
    7   3775  PART                               7   4020  P_PCB

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes          Async      0 XUR$BREAK
 yes     yes           Std       6 XUR$GETCMD
 yes     yes           Std       2 TSE$ERROR
         yes           Std       0 TSS$BREAK
 yes     yes           Std       2 XTX$ADAPT
         yes           Std       5 TSW$WRITE
 yes     yes           Std       1 TSC$CHECK
 yes     yes           Std       3 XUR$INIT
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_MAUTO
                       nStd      0 X66_MARET
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:80   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  M$SI                                  M$LO
     M$DO                                  M$CONF                                M$ELF
     M$DEVHIST                             B_VERSION                             F$DCB
     B$JIT$                                B$TCB$                                B$DS3$
     B$IS$                                 TSN_CMDS                              TS_DIPART
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:81   


        1        1        /*M* TSS$SYSCON - MAIN DRIVER MODULE FOR THE PROCESSOR SYSCON */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*/
        8        8        TSS$SYSCON: PROC MAIN;

      8 10 000000   000000 700200 xent  TSS$SYSCON   TSX0  ! X66_MAUTO
        10 000001   000114 000000                    ZERO    76,0

        9        9        /**/
       10       10        /*********************************************************************/
       11       11        /*   INCLUDE FILES   INCLUDE FILES   INCLUDE FILES   INCLUDE FILES   */
       12       12        /*********************************************************************/
       13       13        /**/
       14       14        %INCLUDE TS_SUBS_C;
       15       95        %INCLUDE IT_SUBS_C;
       16      362        %INCLUDE NI$TABLES ;
       17      578        %INCLUDE TS_PERR_C;
       18      661        %INCLUDE CP_6;
       19      742        %INCLUDE CP_6_SUBS;
       20     1282        %INCLUDE XU_MACRO_C;
       21     4388        %INCLUDE XU_PERR_C;
       22     4579        %INCLUDE TD$STRUCT;
       23     4680        %INCLUDE TH$HIST;
       24     4775        %INCLUDE EL_SUBS_C;
       25     4859        %INCLUDE EL$TABLES;
       26     5182        %INCLUDE B$JIT;
       27     5472        %INCLUDE B_ERRORS_C;
       28     6599        %INCLUDE B_STRINGS_C;
       29     6728        %INCLUDE B_SEGIDS_C;
       30     7267        %INCLUDE M_INFO_C;
       31     7407        /**/
       32     7408        %SUB YES = '1'B/*YES*/;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:82   
       33     7409        %SUB NO = '0'B/*NO*/;
       34     7410        %SUB TRUE = '1'B/*TRUE*/;
       35     7411        %SUB FALSE = '0'B/*FALSE*/;
       36     7412        /**/
       37     7413        /********************************************************************/
       38     7414        /*   DCBS   DCBS   DCBS   DCBS   DCBS   DCBS   DCBS   DCBS   DCBS   */
       39     7415        /********************************************************************/
       40     7416        /**/
       41     7417    1   DCL M$SI DCB;                           /* COMMAND INPUT                      */
       42     7418    1   DCL M$LO DCB;                           /* OUTPUT TO USER                     */
       43     7419    1   DCL M$DO DCB;                           /* DIAGNOSTIC OUTPUT                  */
       44     7420    1   DCL M$CONF DCB;                       /* :CONFIG FILE I/O                   */
       45     7421    1   DCL M$ELF DCB;                          /* ELF_DATA SDS FILE                  */
       46     7422    1   DCL M$DEVHIST DCB;                    /* :DEVHIST FILE I/O */
       47     7423        /**/
       48     7424        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:83   
       49     7425        /********************************************************************/
       50     7426        /*   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   */
       51     7427        /********************************************************************/
       52     7428        /**/
       53     7429        %FPT_READ (FPTN = READ_CMD_FPT,
       54     7430                   DCB = M$SI);
       55     7469        /**/
       56     7470        %FPT_GDS(FPTN = GDS_FPT,
       57     7471                 RESULTS = DS_RESULTS,
       58     7472                 SEGSIZE = 4096);
       59     7488        /**/
       60     7489        %FPT_PROMPT(FPTN = PROMPT_FPT,
       61     7490                    PROMPT = SYSCON_PROMPT);
       62     7518        /**/
       63     7519        %FPT_OPEN(FPTN = OPEN_CONFIG,
       64     7520                  DCB = M$CONF,
       65     7521                  NAME = CONFIG_FILE,
       66     7522                  ACCT = SYSACCT,
       67     7523                  ASN = FILE,
       68     7524                  FUN = UPDATE,
       69     7525                  DISP = NAMED,
       70     7526                  ORG = KEYED,
       71     7527                  ACS = DIRECT);
       72     7636        /**/
       73     7637        %FPT_CLOSE(FPTN = CLOSE_CONFIG,
       74     7638                   DCB = M$CONF,
       75     7639                   DISP = SAVE);
       76     7681        /**/
       77     7682        %FPT_CLOSE    (FPTN = CLOSE_LO_FPT,
       78     7683                       DCB = M$LO,
       79     7684                       DISP = SAVE);
       80     7726        /**/
       81     7727        %FPT_READ(FPTN = READ_CONFIG,
       82     7728                  DCB = M$CONF,
       83     7729                  KEY = CONFIG_KEY,
       84     7730                  KEYS = YES);
       85     7769        /**/
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:84   
       86     7770        %FPT_OPEN (FPTN=OPEN_DEVHIST,
       87     7771                        FUN=UPDATE,
       88     7772                        ASN=FILE,
       89     7773                        DCB=M$DEVHIST,
       90     7774                        NAME=DEVHIST,
       91     7775                        ACCT=SYSTAC,
       92     7776                        DISP=NAMED,
       93     7777                        ORG=KEYED,
       94     7778                        ACS=DIRECT);
       95     7887        %FPT_READ (FPTN=READ_DEVHIST_HEAD,
       96     7888                   DCB=M$DEVHIST,
       97     7889                   KEYS=YES,
       98     7890                   KEY=HEAD_KEY,
       99     7891                   BUF=TH_HEAD);
      100     7930        %FPT_READ (FPTN=READ_DEVHIST_MAINT,
      101     7931                   DCB=M$DEVHIST,
      102     7932                   KEYS=YES,
      103     7933                   KEY=MAINT_KEY,
      104     7934                   BUF=TH_MAINT);
      105     7973        %FPT_WRITE (FPTN=WRITE_MAINT,
      106     7974                    DCB=M$DEVHIST,
      107     7975                    KEY=MAINT_KEY,
      108     7976                    BUF=TH_MAINT);
      109     8007        %FPT_CLOSE (FPTN=CLOSE_DEVHIST,
      110     8008                    DCB=M$DEVHIST,
      111     8009                    DISP=SAVE);
      112     8051        %VLP_NAME (FPTN=DEVHIST,
      113     8052                   NAME=':DEVHIST');
      114     8079        %VLP_NAME (FPTN=ELF_DATA,NAME='ELF_DATA');
      115     8106        %FPT_OPEN (FPTN=OPEN_ELF_DATA,
      116     8107                   NAME=ELF_DATA,
      117     8108                   ACCT=SYSACCT,
      118     8109                   ORG=RANDOM,
      119     8110                   ACS=DS3,
      120     8111                   ASN=FILE,
      121     8112                   FUN=IN,
      122     8113                   SHARE=ALL,
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:85   
      123     8114                   DCB=M$ELF);
      124     8223        %FPT_CLOSE (FPTN=CLOSE_ELF_DATA,
      125     8224                    DCB=M$ELF);
      126     8266        %FPT_TIME (FPTN=CUR_UTS,
      127     8267                   SOURCE=CLOCK,
      128     8268                   DEST=UTS,
      129     8269                   TSTAMP=CURUTS);
      130     8288        %FPT_EXIT (STCLASS="STATIC SYMDEF");
      131     8303        %VLP_ACCT (FPTN=SYSTAC,
      132     8304                   ACCT=':SYSTAC');
      133     8317        %FPT_WRSYSLOG (FPTN=TELL_ELF,
      134     8318                       ENTRY=EL$THRESHSET,
      135     8319                       FILENUM=1,  /* ERRLOG */
      136     8320                       SIZE="SIZEW(EL$THRESHSET)",
      137     8321                       TYPE=EL_THRESHSET);
      138     8336        %FPT_PRIV (PRIV='000002000101'O,
      139     8337                   AUTH=YES);
      140     8352        %FPT_PRIV (PRIV=%PPR_SYSCON#, PPRIV=YES,FPTN=PPRIV);
      141     8367        /**/
      142     8368        %FPT_WRITE(FPTN = WRITE_CONFIG,
      143     8369                   DCB = M$CONF,
      144     8370                   KEY = CONFIG_KEY);
      145     8401        /**/
      146     8402        %FPT_BADPP (FPTN = BADPP_FPT);
      147     8416        /**/
      148     8417        %FPT_GOODPP (FPTN = GOODPP_FPT);
      149     8431        /**/
      150     8432        %FPT_SAD (FPTN=SEE_PPUT_LS, MONSID=%PPUTSID, USERSID=%SPCL1SID);
      151     8447        %FPT_SAD (FPTN=SEE_MON_LS, MONSID=%PPUTSID, USERSID=%SPCL2SID);
      152     8462        %FPT_CVM (FPTN=PPUT_CVM);
      153     8478        /**/
      154     8479        %FPT_SYSCON (FPTN = SYSCON_FPT,
      155     8480                     RESULT = RESULTS);
      156     8497        %FPT_GBPL (FPTN=GET_PGLIST,
      157     8498                   PGLIST=PGLIST);
      158     8514        %VLP_PGLIST (FPTN=PGLIST,NPAGES=1);
      159     8528        %FPT_INT (UENTRY=XUR$BREAK,
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:86   
      160     8529                  STCLASS=CONSTANT);
      161     8543        /**/
      162     8544        %VLR_SITEINFO;
      163     8563        %VLR_MONINFO;
      164     8581        %FPT_MONINFO (SITEINFO=VLR_SITEINFO, MONINFO=VLR_MONINFO);
      165     8596        /**/
      166     8597        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:87   
      167     8598        /***************************************************************************/
      168     8599        /*   STATIC DATA   STATIC DATA   STATIC DATA   STATIC DATA   STATIC DATA   */
      169     8600        /***************************************************************************/
      170     8601        /**/
      171     8602    1   DCL M$SI$ PTR STATIC SYMDEF;
      172     8603    1   DCL BLK$ PTR STATIC SYMDEF;
      173     8604    1   DCL CMD$ PTR STATIC SYMDEF;
      174     8605    1   DCL CMD_BASE$ PTR STATIC SYMDEF;
      175     8606    1   DCL CMDTEXT$ PTR STATIC SYMDEF;
      176     8607    1   DCL CMDTEXT_BASE$ PTR STATIC SYMDEF;
      177     8608    1   DCL CONFIG$ PTR STATIC SYMDEF;
      178     8609        /**/
      179     8610    1   DCL I SBIN WORD STATIC SYMDEF;
      180     8611    1   DCL J SBIN WORD STATIC SYMDEF;
      181     8612    1   DCL K SBIN WORD STATIC SYMDEF;
      182     8613        /**/
      183     8614    1   DCL TS_CMD_READ REMEMBER STATIC SYMDEF DALIGNED;
      184     8615    1   DCL TS_PRINT_HEADING BIT(1) ALIGNED STATIC SYMDEF;
      185     8616    1   DCL TS_PRINT_THRESH_HEADING BIT(1) ALIGNED STATIC SYMDEF;
      186     8617    1   DCL TS_DPS90 BIT(1) ALIGNED STATIC SYMDEF;
      187     8618    1   DCL TS_COL_BAD BIT(1) ALIGNED STATIC SYMDEF;
      188     8619    1   DCL TS_FIRST UBIN STATIC SYMDEF;
      189     8620    1   DCL TS_LAST UBIN STATIC SYMDEF;
      190     8621    1   DCL CURUTS UBIN WORD STATIC;
      191     8622    1   DCL HIPAGE UBIN WORD STATIC INIT(0);
      192     8623    1   DCL LOPAGE UBIN WORD STATIC INIT(0);
      193     8624    1   DCL BAD BIT(1) STATIC INIT('0'B);
      194     8625    1   DCL 1 SUSPECT STATIC SYMDEF,
      195     8626    1         2 PREVIOUS BIT(1) INIT('0'B),
      196     8627    1         2 PRESENT  BIT(1) INIT('0'B);
      197     8628    1   DCL 1 RETURNOK REDEF SUSPECT,
      198     8629    1         2 PREVIOUS BIT(1),
      199     8630    1         2 PRESENT  BIT(1);
      200     8631    1   DCL TEMP36 UBIN(36) BASED;
      201     8632    1   DCL PPUT36 UBIN(36) STATIC;
      202     8633    1   DCL MM$ PTR STATIC;
      203     8634    1   DCL VP UBIN;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:88   
      204     8635    1   DCL PP UBIN;
      205     8636    1   DCL PPUT_DESC DSCR STATIC SYMDEF;
      206     8637    1   DCL PPUT_OFFSET UBIN;
      207     8638    1   DCL PPUT$ PTR STATIC SYMDEF INIT(ADDR(NIL));
      208     8639    1   DCL 1 PPUTPTR REDEF PPUT$,
      209     8640    1         2 OFFSET UBIN(18) UNAL,
      210     8641    1         2 * BIT(6) UNAL,
      211     8642    1         2 SEGID BIT(12) UNAL;
      212     8643        /**/
      213     8644    1   DCL THRESH UBIN WORD STATIC;
      214     8645    1   DCL FEPLEN UBIN WORD;
      215     8646    1   DCL IOM_NAME CHAR(4);
      216     8647    1   DCL IOM# UBIN;
      217     8648    1   DCL BUF_CNT UBIN;
      218     8649    1   DCL LEN UBIN;
      219     8650    1   DCL CHAN_BUF CHAR(2);
      220     8651    1   DCL LAST_CHAN UBIN;
      221     8652    1   DCL CHANS(0:15) UBIN;  /* 2 CM CHANS WITH 8 CHANS EACH */
      222     8653    1   DCL CHANS_FOUND UBIN;
      223     8654    1   DCL NUM_CHANS UBIN;
      224     8655    1   DCL RANGE_FLAG BIT(1);
      225     8656        %TD$HEAD (NAME=HEADREC,STCLASS=STATIC);
      226     8692        %TD$IOM (NAME=IOMREC,STCLASS=STATIC);
      227     8700        %TD$DEV (NAME=DEVREC,STCLASS=STATIC);
      228     8719    1   DCL PATH_BUF CHAR(132) STATIC INIT(' ');
      229     8720        /**/
      230     8721    1   DCL HEAD_KEY BIT(18) STATIC INIT('001000'O);
      231     8722    1   DCL MAINT_KEY BIT(18) STATIC INIT('001002'O);
      232     8723        /**/
      233     8724    1   DCL I$ PTR STATIC;
      234     8725    1   DCL CHAN$ PTR STATIC;
      235     8726    1   DCL MPC$ PTR STATIC;
      236     8727    1   DCL DEV$ PTR STATIC;
      237     8728        /**/
      238     8729    1   DCL NUMDEVS SBIN WORD STATIC;
      239     8730    1   DCL DEVNAME CHAR(8) STATIC INIT(' ');
      240     8731        %TD$HEAD (NAME=TH_HEAD,NUMDEV#=200,STCLASS=STATIC);
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:89   
      241     8767        %TH$MAINT (NAME=TH_MAINT,NUMDEV#=200,STCLASS=STATIC);
      242     8772        %EL$THRESHSET (STCLASS=STATIC);
      243     8776        /**/
      244     8777    1   DCL SYSCONERR BIT(36) ALIGNED STATIC;
      245     8778    1   DCL 1 ERR_CODE STATIC SYMDEF,
      246     8779    1         2 FCG_MID BIT(18) UNAL INIT('242323'O),
      247     8780    1         2 MON BIT(1) UNAL INIT('0'B),
      248     8781    1         2 ERR# UBIN(14) UNAL INIT(100),
      249     8782    1         2 SEV UBIN(3) UNAL INIT(0);
      250     8783    1   DCL LAST_CMD UBIN WORD STATIC SYMDEF INIT (0);
      251     8784        /**/
      252     8785    1   DCL ERR_BUF CHAR(120) STATIC SYMDEF;
      253     8786    1   DCL 1 TEXTC STATIC ALIGNED,
      254     8787    1         2 CNT UBIN BYTE UNAL,
      255     8788    1         2 TXT CHAR(132) UNAL;
      256     8789    1   DCL 1 CONFIG_KEY STATIC SYMDEF,
      257     8790    1         2 COUNT UBIN(9) UNAL,
      258     8791    1         2 TEXT CHAR(8) UNAL;
      259     8792        /**/
      260     8793    1   DCL 1 SUB_BUF_1 STATIC SYMDEF,
      261     8794    1         2 COUNT UBIN(9) UNAL,
      262     8795    1         2 TEXT CHAR(31) UNAL;
      263     8796    1   DCL 1 SUB_BUF_2 STATIC SYMDEF,
      264     8797    1         2 COUNT UBIN(9) UNAL,
      265     8798    1         2 TEXT CHAR(31) UNAL;
      266     8799    1   DCL 1 SUB_BUF_3 STATIC SYMDEF,
      267     8800    1         2 COUNT UBIN(9) UNAL,
      268     8801    1         2 TEXT CHAR(31) UNAL;
      269     8802    1   DCL 1 PART STATIC SYMDEF,
      270     8803    1         2 * UBIN(9) UNAL INIT(4),
      271     8804    1         2 T CHAR(4);
      272     8805    1   DCL SYSCON_HERE CHAR(28) STATIC INIT(' ');
      273     8806    1   DCL B_VERSION CHAR(1) SYMREF;
      274     8807    1   DCL 1 B$VERSIONB BASED,
      275     8808    1        2 C_ UBIN BYTE CALIGNED,
      276     8809    1        2 T_ CHAR(B$VERSIONB.C_) CALIGNED;
      277     8810    1   DCL SYSCON_HERE_VEC VECTOR CONSTANT INIT(VECTOR(SYSCON_HERE));
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:90   
      278     8811    1   DCL DEVNOTPART_FMT CHAR(0) CONSTANT INIT(
      279     8812    1   '%11LT   %2P%4LT   %3P%3LT%20P');
      280     8813    1   DCL DEVNOTPART_VEC VECTOR CONSTANT INIT(VECTOR(DEVNOTPART_FMT));
      281     8814    1   DCL DEVPART_FMT CHAR(0) CONSTANT INIT(
      282     8815    1   '%11LT   %2P%4LT   %3P%3LT%20P');
      283     8816    1   DCL DEVPART_VEC VECTOR CONSTANT INIT(VECTOR(DEVPART_FMT));
      284     8817    1   DCL CHANNOTPART_FMT CHAR(0) CONSTANT INIT(
      285     8818    1   'IOM%T,CHAN%2P%T  %3P%4LT   %4P%3LT%20P');
      286     8819    1   DCL CHANNOTPART_VEC VECTOR CONSTANT INIT(VECTOR(CHANNOTPART_FMT));
      287     8820    1   DCL CHANPART_FMT CHAR(0) CONSTANT INIT(
      288     8821    1   'IOM%T,CHAN%2P%T  %3P%4LT   %4P%3LT%20P');
      289     8822    1   DCL CHANPART_VEC VECTOR CONSTANT INIT(VECTOR(CHANPART_FMT));
      290     8823    1   DCL MPCNOTPART_FMT CHAR(0) CONSTANT INIT(
      291     8824    1   '%11LT   %2P%4LT   %3P%3LT%20P');
      292     8825    1   DCL MPCNOTPART_VEC VECTOR CONSTANT INIT(VECTOR(MPCNOTPART_FMT));
      293     8826    1   DCL MPCPART_FMT CHAR(0) CONSTANT INIT(
      294     8827    1   '%11LT   %2P%4LT   %3P%3LT%20P');
      295     8828    1   DCL MPCPART_VEC VECTOR CONSTANT INIT(VECTOR(MPCPART_FMT));
      296     8829    1   DCL DPNOTPART_FMT CHAR(0) CONSTANT INIT(
      297     8830    1   '%11LT   %2P%4LT   %3P%3LT    %4P%3LT%20P');
      298     8831    1   DCL DPNOTPART_VEC VECTOR CONSTANT INIT(VECTOR(DPNOTPART_FMT));
      299     8832    1   DCL DPPART_FMT CHAR(0) CONSTANT INIT(
      300     8833    1   '%11LT   %2P%4LT   %3P%3LT    %4P%3LT%20P');
      301     8834    1   DCL DPPART_VEC VECTOR CONSTANT INIT(VECTOR(DPPART_FMT));
      302     8835    1   DCL IOMPART_FMT CHAR(0) CONSTANT INIT(
      303     8836    1   '%11LT   %2P%4LT%20P');
      304     8837    1   DCL IOMPART_VEC VECTOR CONSTANT INIT(VECTOR(IOMPART_FMT));
      305     8838    1   DCL IOMNOPART_FMT CHAR(0) CONSTANT INIT(
      306     8839    1   '%11LT   %2P%4LT%20P');
      307     8840    1   DCL IOMNOPART_VEC VECTOR CONSTANT INIT(VECTOR(IOMNOPART_FMT));
      308     8841    1   DCL COMPREL_FMT CHAR(0) CONSTANT INIT(
      309     8842    1   '%4LT   released%20P');
      310     8843    1   DCL COMPREL_VEC VECTOR CONSTANT INIT(VECTOR(COMPREL_FMT));
      311     8844    1   DCL COMPNOREL_FMT CHAR(0) CONSTANT INIT(
      312     8845    1   '%4LT   not released%20P');
      313     8846    1   DCL COMPNOREL_VEC VECTOR CONSTANT INIT(VECTOR(COMPNOREL_FMT));
      314     8847    1   DCL IOMTHRESH_VEC VECTOR CONSTANT INIT(VECTOR(IOMTHRESH_FMT));
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:91   
      315     8848    1   DCL IOMTHRESH_FMT CHAR(0) CONSTANT INIT(
      316     8849    1   'IOM%D          %D%20P');
      317     8850    1   DCL DEVTHRESH_VEC VECTOR CONSTANT INIT(VECTOR(DEVTHRESH_FMT));
      318     8851    1   DCL DEVTHRESH_FMT CHAR(0) CONSTANT INIT(
      319     8852    1   '%11LA   %D%20P');
      320     8853    1   DCL CHANTHRESH_VEC VECTOR CONSTANT INIT(VECTOR(CHANTHRESH_FMT));
      321     8854    1   DCL CHANTHRESH_FMT CHAR(0) CONSTANT INIT(
      322     8855    1   'IOM%D,CHAN%3ZD  %D%20P');
      323     8856    1   DCL PAGEGOOD_FMT CHAR(0) CONSTANT INIT(
      324     8857    1   '  Pages %D-%D are good.%20P');
      325     8858    1   DCL PAGEGOOD_VEC VECTOR CONSTANT INIT(VECTOR(PAGEGOOD_FMT));
      326     8859    1   DCL PAGEBAD_FMT CHAR(0) CONSTANT INIT(
      327     8860    1   '  Pages %D-%D are bad.%20P');
      328     8861    1   DCL PAGEBAD_VEC VECTOR CONSTANT INIT(VECTOR(PAGEBAD_FMT));
      329     8862    1   DCL PAGE1GOOD_FMT CHAR(0) CONSTANT INIT(
      330     8863    1   '  Page %D is good.%20P');
      331     8864    1   DCL PAGE1GOOD_VEC VECTOR CONSTANT INIT(VECTOR(PAGE1GOOD_FMT));
      332     8865    1   DCL PAGE1BAD_FMT CHAR(0) CONSTANT INIT(
      333     8866    1   '  Page %D is bad.%20P');
      334     8867    1   DCL PAGE1BAD_VEC VECTOR CONSTANT INIT(VECTOR(PAGE1BAD_FMT));
      335     8868    1   DCL TEXTC_FMT CHAR(0) CONSTANT INIT('%T%10P');
      336     8869    1   DCL TEXTC_VEC VECTOR CONSTANT INIT(VECTOR(TEXTC_FMT));
      337     8870        /**/
      338     8871    1   DCL SYSCON_PROMPT CHAR(1) STATIC INIT('>');
      339     8872        /**/
      340     8873        %VLP_VECTOR(FPTN = DS_RESULTS);
      341     8888        /**/
      342     8889        %VLR_SYSCON (FPTN = RESULTS);
      343     8908        /**/
      344     8909        %VLP_NAME (FPTN = CONFIG_FILE,NAME = ':CONFIG',LEN = 7);
      345     8936        /**/
      346     8937        %VLP_ACCT (FPTN = SYSACCT,ACCT = ':SYS');
      347     8950        /**/
      348     8951        %P_PCB;
      349     9150        %PARSE$OUT (NAME=O$BLK);
      350     9195        %PARSE$SYM (NAME=O$SYM);
      351     9233        /**/
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:92   
      352     9234        %TD$MPC (NAME=MPC,STCLASS=STATIC);
      353     9256        /**/
      354     9257        %XUR_INIT(ABORT=TSS$BREAK,PCB=P_PCB,GOODCMD=YES,PASS=MODE);
      355     9356        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:93   
      356     9357        /**********************************************************************/
      357     9358        /*   BASED DATA   BASED DATA   BASED DATA   BASED DATA   BASED DATA   */
      358     9359        /**********************************************************************/
      359     9360        /**/
      360     9361        %M$DCB (DCBN = F$DCB);
      361     9435        /**/
      362     9436        %B$TCB;
      363     9439        %B$ALT;
      364     9447        /**/
      365     9448    1   DCL TS$CMDWD UBIN WORD BASED ALIGNED;
      366     9449        /**/
      367     9450    1   DCL 1 TS$DEV BASED ALIGNED,
      368     9451    1         2 SIZE UBIN HALF UNAL,
      369     9452    1         2 CODE UBIN HALF UNAL,
      370     9453    1         2 DEVNAME CHAR(8) UNAL,
      371     9454    1         2 NAME REDEF DEVNAME,
      372     9455    1           3 MNEM CHAR(2) UNAL,
      373     9456    1           3 NUM CHAR(2) UNAL,
      374     9457    1           3 TWSN CHAR(4) UNAL;
      375     9458        /**/
      376     9459    1   DCL 1 TS$MPC BASED ALIGNED,
      377     9460    1         2 SIZE UBIN HALF UNAL,
      378     9461    1         2 CODE UBIN HALF UNAL,
      379     9462    1         2 MPCNAME CHAR(8) UNAL,
      380     9463    1         2 NAME REDEF MPCNAME,
      381     9464    1           3 MNEM CHAR(2) UNAL,
      382     9465    1           3 NUM CHAR(2) UNAL,
      383     9466    1           3 TWSN CHAR(4) UNAL;
      384     9467        /**/
      385     9468    1   DCL 1 TS$IOM BASED ALIGNED,
      386     9469    1         2 SIZE UBIN HALF UNAL,
      387     9470    1         2 CODE UBIN HALF UNAL,
      388     9471    1         2 IOM UBIN WORD UNAL;
      389     9472    1   DCL 1 TS$CPU BASED ALIGNED,
      390     9473    1         2 SIZE UBIN HALF UNAL,
      391     9474    1         2 CODE UBIN HALF UNAL,
      392     9475    1         2 CPU UBIN WORD UNAL;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:94   
      393     9476    1   DCL 1 TS$SCU BASED ALIGNED,
      394     9477    1         2 SIZE UBIN HALF UNAL,
      395     9478    1         2 CODE UBIN HALF UNAL,
      396     9479    1         2 SCU UBIN WORD UNAL;
      397     9480    1   DCL 1 TS$CHAN BASED ALIGNED,
      398     9481    1         2 SIZE UBIN HALF UNAL,
      399     9482    1         2 CODE UBIN HALF UNAL,
      400     9483    1         2 IOM UBIN WORD UNAL,
      401     9484    1         2 LOCHAN UBIN WORD UNAL,
      402     9485    1         2 HICHAN UBIN WORD UNAL;
      403     9486        /**/
      404     9487    1   DCL 1 TS$FEP BASED ALIGNED,
      405     9488    1         2 SIZE UBIN HALF UNAL,
      406     9489    1         2 CODE UBIN HALF UNAL,
      407     9490    1         2 LEN UBIN HALF UNAL,
      408     9491    1         2 IOM UBIN HALF UNAL,
      409     9492    1         2 CHAN UBIN HALF UNAL,
      410     9493    1         2 FEP UBIN HALF UNAL;
      411     9494        /**/
      412     9495    1   DCL 1 TS$PAGES BASED ALIGNED,
      413     9496    1         2 SIZE UBIN HALF UNAL,
      414     9497    1         2 CODE UBIN HALF UNAL,
      415     9498    1         2 LOPAGE UBIN WORD UNAL,
      416     9499    1         2 HIPAGE UBIN WORD UNAL;
      417     9500        /**/
      418     9501       /* Based structures for handling THRESH commands - these must correspond with the ta
              9501        bles in ELF */
      419     9502    1   DCL IOM$(0:7) PTR BASED(B$DS3$);        /* SDS file in DS3                    */
      420     9503    1   DCL 1 IOM BASED(I$) ALIGNED,
      421     9504    1         2 ERR_RATE UBIN,
      422     9505    1         2 NUM_ENTRIES UBIN HALF UNAL,
      423     9506    1         2 THRESH UBIN HALF UNAL,
      424     9507    1         2 THRESH_RATE UBIN,
      425     9508    1         2 CHAN$ PTR;
      426     9509    1   DCL 1 CHAN(0:%(%N_MAXCHANS-1)) BASED(CHAN$) ALIGNED,
      427     9510    1         2 ERR_RATE UBIN,
      428     9511    1         2 NUM_ENTRIES UBIN HALF UNAL,
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:95   
      429     9512    1         2 THRESH UBIN HALF UNAL,
      430     9513    1         2 THRESH_RATE UBIN,
      431     9514    1         2 DEV$ PTR,
      432     9515    1         2 MPC$ PTR;
      433     9516    1   DCL 1 MPC1 BASED(MPC$) ALIGNED,
      434     9517    1         2 ERR_RATE UBIN,
      435     9518    1         2 NUM_ENTRIES UBIN HALF UNAL,
      436     9519    1         2 THRESH UBIN HALF UNAL,
      437     9520    1         2 THRESH_RATE UBIN,
      438     9521    1         2 DEVNM CHAR(8);
      439     9522    1   DCL 1 DEV BASED(DEV$) ALIGNED,
      440     9523    1         2 ERR_RATE UBIN,
      441     9524    1         2 NUM_ENTRIES UBIN HALF UNAL,
      442     9525    1         2 THRESH UBIN HALF UNAL,
      443     9526    1         2 THRESH_RATE UBIN,
      444     9527    1         2 DEVNM CHAR(8),
      445     9528    1         2 DEVNUM UBIN HALF UNAL;
      446     9529    1   DCL TS$TEXT CHAR(120) BASED;
      447     9530        /* The actual table is built in real.  B$PPUT$ references this     */
      448     9531        /* table, which is $LS78 of the monitor.  We map on to it to check */
      449     9532        /* status flags for partitioning/returning of Memory Pages.        */
      450     9533    1   DCL 1 MM$PPUT BASED(MM$) ALIGNED,
      451     9534    1         2 SUSPECT BIT(1) UNAL,
      452     9535    1         2 BAD BIT(1) UNAL,
      453     9536    1         2 IN_TEST BIT(1) UNAL,
      454     9537    1         2 FREE BIT(1) UNAL,
      455     9538    1         2 USER BIT(1) UNAL,
      456     9539    1         2 IO BIT(1) UNAL,
      457     9540    1         2 PRC BIT(1) UNAL,
      458     9541    1         2 STOLEN BIT(1) UNAL,
      459     9542    1         2 COMM BIT(1) UNAL,
      460     9543    1         2 USER# UBIN(9) CALIGNED,
      461     9544    1         2 PNUM REDEF USER# UBIN(9) CALIGNED,
      462     9545    1         2 PPNO UBIN(18) HALIGNED;
      463     9546    1   DCL B$ARRAY(0:0) SBIN WORD BASED;
      464     9547        /**/
      465     9548        %LIST;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:96   
      466     9549        %TD$IOM;
              9550    1   DCL 1 NAME STCLASS ALIGNED,
              9551    1         2 DEVNAME (0:127) CHAR(8) UNAL, /* %N_MAXCHANS-1 */
              9552    1         2 FLAGS(0:127) UNAL, /* %N_MAXCHANS-1 */
              9553    1           3 DOWN BIT(1) UNAL,
              9554    1           3 TDOK BIT(1) UNAL,
              9555    1         2 PORT# UBIN WORD ALIGNED;
      467     9557        %TD$MPC;
              9558    1   DCL 1 NAME STCLASS ALIGNED,
              9559    1         2 MODEL CHAR(8) UNAL,
              9560    1         2 IOCHAN(0:7),
              9561    1           3 PRESENCE BIT(1) UNAL,
              9562    1           3 * BIT(8) UNAL,
              9563    1           3 IOM UBIN BYTE UNAL,
              9564    1           3 LOCHAN UBIN BYTE UNAL,
              9565    1           3 HICHAN UBIN BYTE UNAL,
              9566    1         2 NUMDEVS UBIN HALF UNAL,
              9567    1         2 FLAGS UNAL,
              9568    1           3 DOWN BIT(1) UNAL,
              9569    1           3 TDOK BIT(1) UNAL,
              9570    1           3 * BIT(16) UNAL,
              9571    1        2 FWNAME CHAR(4) UNAL,
              9572    1        2 LPFWNAME CHAR(4) UNAL,
              9573    1        2 CRPFWNAME CHAR(4) UNAL,
              9574    1         2 FWREV ALIGNED,             /* FIRMWARE REVISION LEVEL */
              9575    1           3 LETTER CHAR(1) UNAL,     /* LETTER REVISION */
              9576    1           3 SUBREV CHAR(1) UNAL,     /* SUBREVISION - HEX CHAR */
              9577    1         2 DEVNAME(0:NUMDEV#) CHAR(8) UNAL;
      468     9579        %TD$DEV;
              9580    1   DCL 1 NAME STCLASS ALIGNED,
              9581    1         2 MODEL CHAR(8) UNAL,
              9582    1         2 FEATURE CHAR(8) UNAL,
              9583    1         2 MPCNAME(0:1) CHAR(8) UNAL,
              9584    1         2 IOCHAN,
              9585    1           3 * BIT(9) UNAL,
              9586    1           3 IOM UBIN BYTE UNAL,
              9587    1           3 CHAN UBIN BYTE UNAL,
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:97   
              9588    1           3 * BIT(9) UNAL,
              9589    1        2 FLAGS UNAL,
              9590    1           3 DOWN BIT(1) UNAL,
              9591    1           3 TDOK BIT(1) UNAL,
              9592    1           3 CHECKWRITE BIT(1) UNAL,
              9593    1           3 * BIT(15) UNAL,
              9594    1        2 ATTR BIT(18) UNAL,
              9595    1        2 DEVTYPE UBIN HALF UNAL,
              9596    1        2 DEVNUM UBIN HALF UNAL;
      469     9598        %TD$HEAD;
              9599    1   DCL 1 NAME STCLASS ALIGNED,
              9600    1         2 IOM_INDX UBIN HALF UNAL,        /* indx = 0, in TD$HEAD */
              9601    1         2 NUMIOMS UBIN HALF UNAL,
              9602    1         2 UNITMPC_INDX UBIN HALF UNAL,    /* indx = 1 (for ELAN) */
              9603    1         2 NUMUNITMPCS UBIN HALF UNAL,
              9604    1         2 TAPEMPC_INDX UBIN HALF UNAL,    /* indx = 2      "     */
              9605    1         2 NUMTAPEMPCS UBIN HALF UNAL,
              9606    1         2 DISKMPC_INDX UBIN HALF UNAL,    /* indx = 3      "     */
              9607    1         2 NUMDISKMPCS UBIN HALF UNAL,
              9608    1         2 APMPC_INDX UBIN HALF UNAL,      /* indx = 4      "     */
              9609    1         2 NUMAPMPCS UBIN HALF UNAL,
              9610    1         2 OPC_INDX UBIN HALF UNAL,        /* indx = 5 (for ELAN) */
              9611    1         2 NUMOPCS UBIN HALF UNAL,
              9612    1         2 FEP_INDX UBIN HALF UNAL,        /* this logically belongs after the   */
              9613    1         2 NUMFEPS UBIN HALF UNAL,         /* IOM_INDX, but has to be here for ELAN */
              9614    1         2 CONSOLE_INDX UBIN HALF UNAL,
              9615    1         2 NUMCONSOLES UBIN HALF UNAL,
              9616    1         2 LP_INDX UBIN HALF UNAL,
              9617    1         2 NUMLPS UBIN HALF UNAL,
              9618    1         2 CR_INDX UBIN HALF UNAL,
              9619    1         2 NUMCRS UBIN HALF UNAL,
              9620    1         2 CP_INDX UBIN HALF UNAL,
              9621    1         2 NUMCPS UBIN HALF UNAL,
              9622    1         2 DP_INDX UBIN HALF UNAL,
              9623    1         2 NUMDPS UBIN HALF UNAL,
              9624    1         2 MT_INDX UBIN HALF UNAL,
              9625    1         2 NUMMTS UBIN HALF UNAL,
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:98   
              9626    1         2 XX_INDX UBIN HALF UNAL,
              9627    1         2 NUMXXS UBIN HALF UNAL,
              9628    1         2 AP_INDX UBIN HALF UNAL,
              9629    1         2 NUMAPS UBIN HALF UNAL,
              9630    1         2 OD_INDX UBIN HALF UNAL,
              9631    1         2 NUMODS UBIN HALF UNAL,
              9632    1         2 DEVNAME(0:NUMDEV#) CHAR(8) UNAL;
      470     9634        %PLIST;
      471     9635        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:99   
      472     9636        /***********************************************************************/
      473     9637        /*    ENTRY DCLS   ENTRY DCLS   ENTRY DCLS   ENTRY DCLS   ENTRY DCLS   */
      474     9638        /**********************************************************************/
      475     9639        /**/
      476     9640    1   DCL X$PARSE ENTRY(1) ALTRET;
      477     9641        /**/
      478     9642    1   DCL TSC$CHECK ENTRY(1) ALTRET;
      479     9643    1   DCL TSE$ERROR ENTRY(2) ALTRET;
      480     9644    1   DCL TSW$WRITE ENTRY(5);
      481     9645    1   DCL TSS$BREAK ENTRY;
      482     9646    1   DCL XUR$BREAK ENTRY ASYNC;
      483     9647    1   DCL XUR$INIT ENTRY(3) ALTRET;
      484     9648    1   DCL XUR$GETCMD ENTRY(6) ALTRET;
      485     9649        /**/
      486     9650        /*****************************************************************/
      487     9651        /*   SYMREFS   SYMREFS   SYMREFS   SYMREFS   SYMREFS   SYMREFS   */
      488     9652        /*****************************************************************/
      489     9653        /**/
      490     9654    1   DCL B$JIT$ PTR SYMREF;
      491     9655    1   DCL B$TCB$ PTR SYMREF;
      492     9656    1   DCL B$DS3$ PTR SYMREF;
      493     9657    1   DCL B$IS$ PTR SYMREF;
      494     9658
      495     9659        /**/
      496     9660    1   DCL TSN_CMDS UBIN WORD SYMREF;
      497     9661    1   DCL TS_DIPART BIT(1) SYMREF;
      498     9662        /**/
      499     9663        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:100  
      500     9664        /*****************************************************************************/
      501     9665        /*   PROCEDURE   PROCEDURE   PROCEDURE   PROCEDURE   PROCEDURE   PROCEDURE   */
      502     9666        /*****************************************************************************/
      503     9667        /**/
      504     9668    1           M$SI$ = DCBADDR(DCBNUM(M$SI));

   9668 10 000002   000000 236007 xsym               LDQ     M$SI,DL
        10 000003   000000 470400 11                 LDP0    0
        10 000004   000000 471500                    LDP1    0,,PR0
        10 000005   100000 236106                    LDQ     0,QL,PR1
        10 000006   001060 756000 7                  STQ     M$SI$

      505     9669        /**/
      506     9670                                                /* SET PRIVILIGES                     */
      507     9671    2           CALL M$SPRIV (PPRIV) WHENALTRETURN DO;

   9671 10 000007   000640 630400 7                  EPPR0   PPRIV
        10 000010   420012 713400                    CLIMB   alt,+8202
        10 000011   400000 401760                    pmme    nvectors=1
        10 000012   000014 702000 10                 TSX2    s:9672
        10 000013   000024 710000 10                 TRA     L2

      508     9672    2               CALL M$RPRIV (FPT_PRIV) ALTRET (L1);

   9672 10 000014   000634 630400 7                  EPPR0   FPT_PRIV
        10 000015   420013 713400                    CLIMB   alt,+8203
        10 000016   400000 401760                    pmme    nvectors=1
        10 000017   000020 702000 10                 TSX2    L1

      509     9673    2   L1:         CALL M$SPRIV (FPT_PRIV) ALTRET (L2);

   9673 10 000020   000634 630400 7     L1           EPPR0   FPT_PRIV
        10 000021   420012 713400                    CLIMB   alt,+8202
        10 000022   400000 401760                    pmme    nvectors=1
        10 000023   000024 702000 10                 TSX2    L2

      510     9674    2   L2:         END;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:101  

   9674 10 000024                       L2           null
      511     9675    1            CALL CONCAT(SYSCON_HERE,'SYSCON ',ADDR(B_VERSION)->B$VERSIONB.T_,' Here');

   9675 10 000024   000000 236000 xsym               LDQ     B_VERSION
        10 000025   000033 772000                    QRL     27
        10 000026   040000 100400                    MLR     fill='040'O
        10 000027   000274 000007 8                  ADSC9   TEXTC_VEC+2              cn=0,n=7
        10 000030   003777 000007 7                  ADSC9   SYSCON_HERE              cn=0,n=7
        10 000031   000000 620006                    EAX0    0,QL
        10 000032   040000 100440                    MLR     fill='040'O
        10 000033   000000 200010 xsym               ADSC9   B_VERSION                cn=1,n=*X0
        10 000034   004000 600025 7                  ADSC9   SYSCON_HERE+1            cn=3,n=21
        10 000035   000025 116007                    CMPQ    21,DL
        10 000036   000044 603000 10                 TRC     s:9676
        10 000037   777752 621006                    EAX1    -22,QL
        10 000040   777777 661003                    ERX1    -1,DU
        10 000041   040046 100400                    MLR     fill='040'O
        10 000042   000276 000005 8                  ADSC9   TEXTC_VEC+4              cn=0,n=5
        10 000043   004000 600011 7                  ADSC9   SYSCON_HERE+1,Q          cn=3,n=*X1

      512     9676    1           CALL TSW$WRITE(SYSCON_HERE_VEC);

   9676 10 000044   000001 630400 11                 EPPR0   1
        10 000045   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 000046   000000 701000 xent               TSX1    TSW$WRITE
        10 000047   000000 011000                    NOP     0

      513     9677        /**/
      514     9678    1           CALL M$OPEN (OPEN_ELF_DATA);

   9678 10 000050   000450 630400 7                  EPPR0   OPEN_ELF_DATA
        10 000051   050000 713400                    CLIMB   open
        10 000052   410400 401760                    pmme    nvectors=18

      515     9679        /**/
      516     9680    1           DS_RESULTS = NO;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:102  

   9680 10 000053   000000 235003                    LDA     0,DU
        10 000054   000000 236003                    LDQ     0,DU
        10 000055   004010 757000 7                  STAQ    DS_RESULTS

      517     9681    1           DS_RESULTS.W2.SEGID# = %DS4SID;

   9681 10 000056   006007 236007                    LDQ     3079,DL
        10 000057   004011 752003 7                  STCQ    DS_RESULTS+1,'03'O

      518     9682    1           CALL M$GDS(GDS_FPT) ALTRET (NO_MEMORY); /* GET COMMAND TABLE AREA     */

   9682 10 000060   000016 630400 7                  EPPR0   GDS_FPT
        10 000061   430001 713400                    CLIMB   alt,gds
        10 000062   400400 401760                    pmme    nvectors=2
        10 000063   000227 702000 10                 TSX2    NO_MEMORY

      519     9683    1           CMD$ = DS_RESULTS.PTR$;

   9683 10 000064   004011 236000 7                  LDQ     DS_RESULTS+1
        10 000065   001062 756000 7                  STQ     CMD$

      520     9684    1           CMD_BASE$ = DS_RESULTS.PTR$;

   9684 10 000066   001063 756000 7                  STQ     CMD_BASE$

      521     9685        /**/
      522     9686    1           DS_RESULTS = NO;

   9686 10 000067   000000 235003                    LDA     0,DU
        10 000070   000000 236003                    LDQ     0,DU
        10 000071   004010 757000 7                  STAQ    DS_RESULTS

      523     9687    1           DS_RESULTS.W2.SEGID# = %DS5SID;

   9687 10 000072   006010 236007                    LDQ     3080,DL
        10 000073   004011 752003 7                  STCQ    DS_RESULTS+1,'03'O
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:103  

      524     9688    1           CALL M$GDS(GDS_FPT) ALTRET (NO_MEMORY); /* GET :CONFIG FILE BUFFER    */

   9688 10 000074   000016 630400 7                  EPPR0   GDS_FPT
        10 000075   430001 713400                    CLIMB   alt,gds
        10 000076   400400 401760                    pmme    nvectors=2
        10 000077   000227 702000 10                 TSX2    NO_MEMORY

      525     9689    1           CONFIG$ = DS_RESULTS.PTR$;

   9689 10 000100   004011 236000 7                  LDQ     DS_RESULTS+1
        10 000101   001066 756000 7                  STQ     CONFIG$

      526     9690    1           READ_CONFIG.BUF_ = DS_RESULTS;

   9690 10 000102   004010 237000 7                  LDAQ    DS_RESULTS
        10 000103   000230 757000 7                  STAQ    READ_CONFIG+4

      527     9691    1           WRITE_CONFIG.BUF_ = DS_RESULTS;

   9691 10 000104   004010 237000 7                  LDAQ    DS_RESULTS
        10 000105   000650 757000 7                  STAQ    WRITE_CONFIG+4

      528     9692        /**/
      529     9693    1           CALL M$PROMPT(PROMPT_FPT);

   9693 10 000106   000024 630400 7                  EPPR0   PROMPT_FPT
        10 000107   160002 713400                    CLIMB   57346
        10 000110   401000 401760                    pmme    nvectors=3

      530     9694        /**/
      531     9695    1           CALL XUR$INIT(XUR_INIT);

   9695 10 000111   000002 630400 11                 EPPR0   2
        10 000112   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 000113   000000 701000 xent               TSX1    XUR$INIT
        10 000114   000000 011000                    NOP     0
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:104  

      532     9696    1           REMEMBER CMD_READ IN TS_CMD_READ;

   9696 10 000115   000145 635000 10                 EAA     CMD_READ
        10 000116   001072 452400 7                  STP2    TS_CMD_READ
        10 000117   001073 755000 7                  STA     TS_CMD_READ+1

      533     9697    1           CALL M$INT(FPT_INT);

   9697 10 000120   000000 630400 8                  EPPR0   FPT_INT
        10 000121   010002 713400                    CLIMB   4098
        10 000122   400000 401760                    pmme    nvectors=1

      534     9698    1           CALL M$MONINFO (FPT_MONINFO);

   9698 10 000123   001044 630400 7                  EPPR0   FPT_MONINFO
        10 000124   020023 713400                    CLIMB   8211
        10 000125   402400 401760                    pmme    nvectors=6

      535     9699    1           TS_DPS90 =  (VLR_SITEINFO.CPU_TYPE# = %DPS90 | VLR_SITEINFO.CPU_TYPE# = %
              9699                    DPS90XA);

   9699 10 000126   400000 220003                    LDX0    -131072,DU
        10 000127   001015 236000 7                  LDQ     VLR_SITEINFO+55
        10 000130   777000 376007                    ANQ     -512,DL
        10 000131   004000 116007                    CMPQ    2048,DL
        10 000132   000134 600000 10                 TZE     s:9699+6
        10 000133   000000 220003                    LDX0    0,DU
        10 000134   400000 221003                    LDX1    -131072,DU
        10 000135   005000 116007                    CMPQ    2560,DL
        10 000136   000140 600000 10                 TZE     s:9699+10
        10 000137   000000 221003                    LDX1    0,DU
        10 000140   000000 636011                    EAQ     0,X1
        10 000141   200056 756100                    STQ     I+4,,AUTO
        10 000142   000000 636010                    EAQ     0,X0
        10 000143   200056 276100                    ORQ     I+4,,AUTO
        10 000144   001076 756000 7                  STQ     TS_DPS90
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:105  

      536     9700        /**/
      537     9701    1   CMD_READ:
      538     9702    1         TS_PRINT_HEADING = '0'B;

   9702 10 000145   001074 450000 7     CMD_READ     STZ     TS_PRINT_HEADING

      539     9703    1         TS_PRINT_THRESH_HEADING = '0'B;

   9703 10 000146   001075 450000 7                  STZ     TS_PRINT_THRESH_HEADING

      540     9704    1          CALL XUR$GETCMD(TSN_CMDS,P_PCB.OUT$,VECTOR(SYSCON_PROMPT)) ALTRET(PARSE_ERR)
              9704                    ;

   9704 10 000147   000006 630400 11                 EPPR0   6
        10 000150   000021 631400 xsym               EPPR1   B_VECTNIL+17
        10 000151   000000 701000 xent               TSX1    XUR$GETCMD
        10 000152   000236 702000 10                 TSX2    PARSE_ERR

      541     9705        /**/
      542     9706    1           CALL TSC$CHECK(P_PCB) ALTRET(CMD_READ);

   9706 10 000153   000011 630400 11                 EPPR0   9
        10 000154   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 000155   000000 701000 xent               TSX1    TSC$CHECK
        10 000156   000145 702000 10                 TSX2    CMD_READ

      543     9707        /**/
      544     9708    1           CMD$ = CMD_BASE$;

   9708 10 000157   001063 236000 7                  LDQ     CMD_BASE$
        10 000160   001062 756000 7                  STQ     CMD$

      545     9709    2           DO CASE (CMD$ -> TS$CMDWD);

   9709 10 000161   001062 470400 7                  LDP0    CMD$
        10 000162   000000 235100                    LDA     0,,PR0
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:106  
        10 000163   000014 115007                    CMPA    12,DL
        10 000164   000166 602005 10                 TNC     s:9709+5,AL
        10 000165   000226 710000 10                 TRA     s:9726
        10 000166   000226 710000 10                 TRA     s:9726
        10 000167   000202 710000 10                 TRA     s:9712
        10 000170   000205 710000 10                 TRA     s:9714
        10 000171   000210 710000 10                 TRA     s:9716
        10 000172   000221 710000 10                 TRA     s:9722
        10 000173   000226 710000 10                 TRA     s:9726
        10 000174   000226 710000 10                 TRA     s:9726
        10 000175   000226 710000 10                 TRA     s:9726
        10 000176   000213 710000 10                 TRA     s:9718
        10 000177   000216 710000 10                 TRA     s:9720
        10 000200   000226 710000 10                 TRA     s:9726
        10 000201   000224 710000 10                 TRA     s:9724

      546     9710        /**/
      547     9711    2            CASE (TSS_PART);

      548     9712    2              CALL EXEC_PART;

   9712 10 000202   000412 701000 10                 TSX1    EXEC_PART
        10 000203   000000 011000                    NOP     0
        10 000204   000226 710000 10                 TRA     s:9726

      549     9713    2            CASE (TSS_RET);

      550     9714    2              CALL EXEC_RET;

   9714 10 000205   001634 701000 10                 TSX1    EXEC_RET
        10 000206   000000 011000                    NOP     0
        10 000207   000226 710000 10                 TRA     s:9726

      551     9715    2            CASE (TSS_DISP);

      552     9716    2              CALL EXEC_DISP;

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:107  
   9716 10 000210   004132 701000 10                 TSX1    EXEC_DISP
        10 000211   000000 011000                    NOP     0
        10 000212   000226 710000 10                 TRA     s:9726

      553     9717    2            CASE(TSS_THRESH);

      554     9718    2              CALL EXEC_THRESH;

   9718 10 000213   007113 701000 10                 TSX1    EXEC_THRESH
        10 000214   000000 011000                    NOP     0
        10 000215   000226 710000 10                 TRA     s:9726

      555     9719    2            CASE(TSS_SET);

      556     9720    2              CALL EXEC_SET;

   9720 10 000216   003176 701000 10                 TSX1    EXEC_SET
        10 000217   000000 011000                    NOP     0
        10 000220   000226 710000 10                 TRA     s:9726

      557     9721    2            CASE (TSS_END);

      558     9722    2              CALL EXEC_END;

   9722 10 000221   007572 701000 10                 TSX1    EXEC_END
        10 000222   000000 011000                    NOP     0
        10 000223   000226 710000 10                 TRA     s:9726

      559     9723    2            CASE (TSS_REL);

      560     9724    2              CALL EXEC_REL;

   9724 10 000224   007606 701000 10                 TSX1    EXEC_REL
        10 000225   000000 011000                    NOP     0

      561     9725    2            END;

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:108  
      562     9726    1           GOTO CMD_READ;

   9726 10 000226   000145 710000 10                 TRA     CMD_READ

      563     9727        /**/
      564     9728    1   NO_MEMORY:
      565     9729    1           CALL TSE$ERROR(%E$T_NOMEMORY);

   9729 10 000227   000013 630400 11    NO_MEMORY    EPPR0   11
        10 000230   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 000231   000000 701000 xent               TSX1    TSE$ERROR
        10 000232   000000 011000                    NOP     0

      566     9730    1           CALL M$EXIT (FPT_EXIT);

   9730 10 000233   000614 630400 7                  EPPR0   FPT_EXIT
        10 000234   000001 713400                    CLIMB   exit
        10 000235   400400 401760                    pmme    nvectors=2

      567     9731        /**/
      568     9732        /*E*    ERROR:   TSS-E$T_NOMEMORY-0
      569     9733                MESSAGE: Unable to get memory necessary to run SYSCON - exiting.
      570     9734                DESCRIPTION: CANT GET NECESSARY DATA SEGMENT - FORGET IT */
      571     9735        /**/
      572     9736    1   PARSE_ERR:
      573     9737        /**/
      574     9738    2           IF (P_PCB.ERROR.CODE = %E$SYNERR) THEN DO;

   9738 10 000236   004026 236000 7     PARSE_ERR    LDQ     P_PCB+6
        10 000237   377770 376007                    ANQ     131064,DL
        10 000240   000010 116007                    CMPQ    8,DL
        10 000241   000266 601000 10                 TNZ     s:9762

      575     9739    3              IF (LAST_CMD = 0) THEN DO;

   9739 10 000242   003641 235000 7                  LDA     LAST_CMD
        10 000243   000251 601000 10                 TNZ     s:9749
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:109  

      576     9740    3                 CALL TSE$ERROR(%E$T_BADCMD);

   9740 10 000244   000015 630400 11                 EPPR0   13
        10 000245   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 000246   000000 701000 xent               TSX1    TSE$ERROR
        10 000247   000000 011000                    NOP     0

      577     9741    3                 END;

   9741 10 000250   000265 710000 10                 TRA     s:9759

      578     9742        /**/
      579     9743        /*E*    ERROR: TSS-E$T_BADCMD-0
      580     9744                MESSAGE: Unknown command
      581     9745                MESSAGE1: Last command was not recognized by SYSCON
      582     9746                DESCRIPTION: BAD COMMAND VERB             */
      583     9747        /**/
      584     9748    3              ELSE DO;

      585     9749    3                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,0,2),P_PCB.HI_CHAR);

   9749 10 000251   004032 235000 7                  LDA     P_PCB+10
        10 000252   000044 773000                    LRL     36
        10 000253   200056 757100                    STAQ    I+4,,AUTO
        10 000254   000000 301500                    BTD
        10 000255   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 000256   003745 230002 7                  NDSC9   SUB_BUF_1                cn=1,s=nosgn,sf=0,n=2

      586     9750    3                 SUB_BUF_1.COUNT = 2;

   9750 10 000257   002000 236003                    LDQ     1024,DU
        10 000260   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

      587     9751    3                 CALL TSE$ERROR(%E$T_SYNTAX);

   9751 10 000261   000017 630400 11                 EPPR0   15
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:110  
        10 000262   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 000263   000000 701000 xent               TSX1    TSE$ERROR
        10 000264   000000 011000                    NOP     0

      588     9752    3                 END;

      589     9753        /**/
      590     9754        /*E*    ERROR:   TSS-E$T_SYNTAX-0
      591     9755                MESSAGE: Eh?
      592     9756                MESSAGE1: Syntax error at %U1
      593     9757                DESCRIPTION: BAD COMMAND SYNTAX           */
      594     9758        /**/
      595     9759    2              GOTO CMD_READ;

   9759 10 000265   000145 710000 10                 TRA     CMD_READ

      596     9760    2              END;
      597     9761    2           ELSE DO;

      598     9762    2              CALL EXEC_END;

   9762 10 000266   007572 701000 10                 TSX1    EXEC_END
        10 000267   000000 011000                    NOP     0

      599     9763    2              END;  /* ELSE */

   9763 10 000270   010022 710000 10                 TRA     s:11489

      600     9764        /**/
      601     9765        %EJECT ;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:111  
      602     9766    1   CHNGAARD:     PROC ( PATH ) ;

   9766 10 000271   200042 741300       CHNGAARD     STX1  ! RANGE_FLAG+3,,AUTO

      603     9767
      604     9768    2   DCL 1 PATH            BIT(1) ALIGNED PARAM ;
      605     9769
      606     9770    2   CALL BINCHAR ( SUBSTR(SUB_BUF_1.TEXT,0,1), RESULTS.BOOTINFO.OLDIOM# ) ;

   9770 10 000272   004013 236000 7                  LDQ     RESULTS+1
        10 000273   000042 772000                    QRL     34
        10 000274   000000 235003                    LDA     0,DU
        10 000275   200056 757100                    STAQ    I+4,,AUTO
        10 000276   000000 301500                    BTD
        10 000277   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 000300   003745 230001 7                  NDSC9   SUB_BUF_1                cn=1,s=nosgn,sf=0,n=1

      607     9771    2   SUBSTR(SUB_BUF_1.TEXT,1,1) = '-' ;

   9771 10 000301   055000 236007                    LDQ     23040,DL
        10 000302   003745 552010 7                  STBQ    SUB_BUF_1,'10'O

      608     9772    2   CALL BINCHAR ( SUBSTR(SUB_BUF_1.TEXT,2,3), RESULTS.BOOTINFO.OLDCHAN# ) ;

   9772 10 000303   004013 236000 7                  LDQ     RESULTS+1
        10 000304   000033 772000                    QRL     27
        10 000305   000177 376007                    ANQ     127,DL
        10 000306   000000 235003                    LDA     0,DU
        10 000307   200056 757100                    STAQ    I+4,,AUTO
        10 000310   000000 301500                    BTD
        10 000311   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 000312   003745 630003 7                  NDSC9   SUB_BUF_1                cn=3,s=nosgn,sf=0,n=3

      609     9773    2   SUB_BUF_1.COUNT = 5 ;

   9773 10 000313   005000 236003                    LDQ     2560,DU
        10 000314   003745 552040 7                  STBQ    SUB_BUF_1,'40'O
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:112  

      610     9774
      611     9775    2   CALL BINCHAR ( SUBSTR(SUB_BUF_2.TEXT,0,1), RESULTS.BOOTINFO.NEWIOM# ) ;

   9775 10 000315   004013 236000 7                  LDQ     RESULTS+1
        10 000316   000020 772000                    QRL     16
        10 000317   000003 376007                    ANQ     3,DL
        10 000320   000000 235003                    LDA     0,DU
        10 000321   200056 757100                    STAQ    I+4,,AUTO
        10 000322   000000 301500                    BTD
        10 000323   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 000324   003755 230001 7                  NDSC9   SUB_BUF_2                cn=1,s=nosgn,sf=0,n=1

      612     9776    2   SUBSTR(SUB_BUF_2.TEXT,1,1) = '-' ;

   9776 10 000325   055000 236007                    LDQ     23040,DL
        10 000326   003755 552010 7                  STBQ    SUB_BUF_2,'10'O

      613     9777    2   CALL BINCHAR ( SUBSTR(SUB_BUF_2.TEXT,2,3), RESULTS.BOOTINFO.NEWCHAN# ) ;

   9777 10 000327   004013 236000 7                  LDQ     RESULTS+1
        10 000330   000011 772000                    QRL     9
        10 000331   000177 376007                    ANQ     127,DL
        10 000332   000000 235003                    LDA     0,DU
        10 000333   200056 757100                    STAQ    I+4,,AUTO
        10 000334   000000 301500                    BTD
        10 000335   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 000336   003755 630003 7                  NDSC9   SUB_BUF_2                cn=3,s=nosgn,sf=0,n=3

      614     9778    2   SUB_BUF_2.COUNT = 5 ;

   9778 10 000337   005000 236003                    LDQ     2560,DU
        10 000340   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

      615     9779
      616     9780    2   IF RESULTS.BOOTINFO.NEW# THEN

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:113  
   9780 10 000341   004012 236000 7                  LDQ     RESULTS
        10 000342   000200 316007                    CANQ    128,DL
        10 000343   000361 600000 10                 TZE     s:9784

      617     9781    2       IF PATH THEN CALL TSE$ERROR ( %E$T_ALTPATH ) ;

   9781 10 000344   200043 470500                    LDP0    @PATH,,AUTO
        10 000345   000000 234100                    SZN     0,,PR0
        10 000346   000354 605000 10                 TPL     s:9782

   9781 10 000347   000021 630400 11                 EPPR0   17
        10 000350   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 000351   000000 701000 xent               TSX1    TSE$ERROR
        10 000352   000000 011000                    NOP     0
        10 000353   000377 710000 10                 TRA     s:9788

      618     9782    2               ELSE CALL TSE$ERROR ( %E$T_ALTDEV  ) ;

   9782 10 000354   000023 630400 11                 EPPR0   19
        10 000355   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 000356   000000 701000 xent               TSX1    TSE$ERROR
        10 000357   000000 011000                    NOP     0
        10 000360   000377 710000 10                 TRA     s:9788

      619     9783
      620     9784    2   ELSE IF RESULTS.BOOTINFO.OLD# THEN

   9784 10 000361   000400 316007                    CANQ    256,DL
        10 000362   000377 600000 10                 TZE     s:9788

      621     9785    2       IF PATH THEN CALL TSE$ERROR ( %E$T_NOALTPATH ) ;

   9785 10 000363   200043 470500                    LDP0    @PATH,,AUTO
        10 000364   000000 234100                    SZN     0,,PR0
        10 000365   000373 605000 10                 TPL     s:9786

   9785 10 000366   000025 630400 11                 EPPR0   21
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:114  
        10 000367   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 000370   000000 701000 xent               TSX1    TSE$ERROR
        10 000371   000000 011000                    NOP     0
        10 000372   000377 710000 10                 TRA     s:9788

      622     9786    2               ELSE CALL TSE$ERROR ( %E$T_NOALTDEV  ) ;

   9786 10 000373   000027 630400 11                 EPPR0   23
        10 000374   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 000375   000000 701000 xent               TSX1    TSE$ERROR
        10 000376   000000 011000                    NOP     0

      623     9787
      624     9788    3   IF RESULTS.BOOTINFO.ERR# THEN DO ;

   9788 10 000377   004012 236000 7                  LDQ     RESULTS
        10 000400   000100 316007                    CANQ    64,DL
        10 000401   000410 600000 10                 TZE     s:9793

      625     9789    3       CALL TSE$ERROR ( %E$T_CHNGAARD ) ;

   9789 10 000402   000031 630400 11                 EPPR0   25
        10 000403   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 000404   000000 701000 xent               TSX1    TSE$ERROR
        10 000405   000000 011000                    NOP     0

      626     9790    3       FPT_EXIT.V.STEPCC# = 6 ;

   9790 10 000406   006000 236003                    LDQ     3072,DU
        10 000407   000620 552040 7                  STBQ    FPT_EXIT+4,'40'O

      627     9791    3       END ;

      628     9792
      629     9793    2   RETURN ;

   9793 10 000410   200042 221300                    LDX1  ! RANGE_FLAG+3,,AUTO
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:115  
        10 000411   000001 702211                    TSX2  ! 1,X1

      630     9794
      631     9795        /*E*  ERROR:    TSS-E$T_ALTPATH-0
      632     9796              MESSAGE:  Boot path %U1 changed to %U2
      633     9797              DESCRIPTION:  The channel being partitioned was one of the
      634     9798                            channels used during RECOVERY, XDELTA, and/or
      635     9799                            disk boots.  An alternate channel was found to
      636     9800                            replace this channel.  DP#CP-6'S was rewritten
      637     9801                            with this new channel information.  This new
      638     9802                            channel will be used by RECOVERY, XDELTA, and
      639     9803                            disk boots.
      640     9804        */
      641     9805        /*E*  ERROR:    TSS-E$T_ALTDEV-0
      642     9806              MESSAGE:  Boot device %U1 changed to %U2
      643     9807              DESCRIPTION:  The device being partitioned was one of the
      644     9808                            devices used during RECOVERY, XDELTA, and/or
      645     9809                            disk boots.  An alternate device was found to
      646     9810                            replace this device.  DP#CP-6'S was rewritten
      647     9811                            with this new device information.  This new
      648     9812                            device will be used by RECOVERY, XDELTA, and
      649     9813                            disk boots.
      650     9814        */
      651     9815        /*E*  ERROR:    TSS-E$T_NOALTPATH-4
      652     9816              MESSAGE:  No alternate path found for boot path %U1.
      653     9817              DESCRIPTION:  The channel being partitioned was one of the
      654     9818                            channels used during RECOVERY, XDELTA, and/or
      655     9819                            disk boots.  No alternate channel was found to
      656     9820                            replace this channel.  DP#CP-6'S was not rewritten.
      657     9821                            This channel should not be used by RECOVERY,
      658     9822                            XDELTA, or disk boots until it is returned.
      659     9823        */
      660     9824        /*E*  ERROR:    TSS-E$T_NOALTDEV-4
      661     9825              MESSAGE:  No alternate device found for boot device %U1
      662     9826              DESCRIPTION:  The device being partitioned was one of the
      663     9827                            devices used during RECOVERY, XDELTA, and/or
      664     9828                            disk boots.  No alternate device was found to
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:116  
      665     9829                            replace this device.  DP#CP-6'S was not rewritten.
      666     9830                            This device should not be used by RECOVERY,
      667     9831                            XDELTA, or disk boots until it is returned.
      668     9832        */
      669     9833        /*E*  ERROR:    TSS-E$T_CHNGAARD-6
      670     9834              MESSAGE:  Error rewriting DP#CP-6'S!  Do a Tape Boot ASAP!!
      671     9835              DESCRIPTION:  The component being partitioned was one of the
      672     9836                            componenets used during RECOVERY, XDELTA, and/or
      673     9837                            disk boots.  An alternate component was found to
      674     9838                            replace this component.  However, an IO error
      675     9839                            occurred while attempting to rewrite DP#CP-6'S.
      676     9840                            Therefore, DP#CP-6'S may be corrupt!!  RECOVERY
      677     9841                            and/or disk boots may not work correctly!  ZAP!
      678     9842                            system and do a Reconfig Tape Boot (MXT) as soon
      679     9843                            as possible!!
      680     9844        */
      681     9845    2   END CHNGAARD ;
      682     9846        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:117  
      683     9847        /**/
      684     9848    1   EXEC_PART: PROC;

   9848 10 000412   200040 741300       EXEC_PART    STX1  ! RANGE_FLAG+1,,AUTO

      685     9849        /**/
      686     9850    2           CMD$ = PINCRW(CMD$,SIZEW(TS$CMDWD));

   9850 10 000413   001062 236000 7                  LDQ     CMD$
        10 000414   000001 036003                    ADLQ    1,DU
        10 000415   001062 756000 7                  STQ     CMD$

      687     9851    2           SYSCON_FPT.V.FUNCTION# = %PARTITION#;

   9851 10 000416   001000 236003                    LDQ     512,DU
        10 000417   000712 552040 7                  STBQ    SYSCON_FPT+4,'40'O

      688     9852        /**/
      689     9853    3           DO WHILE (CMD$ -> TS$DEV.CODE ~= 0);

   9853 10 000420   001062 470400 7                  LDP0    CMD$
        10 000421   000000 720100                    LXL0    0,,PR0
        10 000422   001472 600000 10                 TZE     s:10103

      690     9854        /**/
      691     9855    4              DO CASE (CMD$ -> TS$DEV.CODE);

   9855 10 000423   001062 470400 7                  LDP0    CMD$
        10 000424   000000 720100                    LXL0    0,,PR0
        10 000425   000007 100003                    CMPX0   7,DU
        10 000426   000430 602010 10                 TNC     s:9855+5,X0
        10 000427   001462 710000 10                 TRA     NEXT_PART
        10 000430   001462 710000 10                 TRA     NEXT_PART
        10 000431   000437 710000 10                 TRA     s:9858
        10 000432   000527 710000 10                 TRA     s:9883
        10 000433   000624 710000 10                 TRA     s:9909
        10 000434   000764 710000 10                 TRA     s:9949
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:118  
        10 000435   001113 710000 10                 TRA     s:9980
        10 000436   000733 710000 10                 TRA     s:9934

      692     9856        /**/
      693     9857    4               CASE (TSS_DEV);

      694     9858    4                 SYSCON_FPT.V.COMPONENT# = %DVC#;

   9858 10 000437   000002 236003                    LDQ     2,DU
        10 000440   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

      695     9859    4                 SYSCON_FPT.V.DEVNM# = CMD$ -> TS$DEV.DEVNAME;

   9859 10 000441   040000 100500                    MLR     fill='040'O
        10 000442   000001 000010                    ADSC9   1,,PR0                   cn=0,n=8
        10 000443   000713 000010 7                  ADSC9   SYSCON_FPT+5             cn=0,n=8

      696     9860    4                 SUB_BUF_1.COUNT = SIZEC(TS$DEV.DEVNAME);

   9860 10 000444   010000 236003                    LDQ     4096,DU
        10 000445   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

      697     9861    4                 SUB_BUF_1.TEXT = CMD$ -> TS$DEV.DEVNAME;

   9861 10 000446   040000 100500                    MLR     fill='040'O
        10 000447   000001 000010                    ADSC9   1,,PR0                   cn=0,n=8
        10 000450   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

      698     9862        /**/
      699     9863    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (PART_ERR);

   9863 10 000451   000706 630400 7                  EPPR0   SYSCON_FPT
        10 000452   470007 713400                    CLIMB   alt,+28679
        10 000453   400400 401760                    pmme    nvectors=2
        10 000454   001513 702000 10                 TSX2    PART_ERR

      700     9864        /**/
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:119  
      701     9865    4                 CALL TSE$ERROR(%E$T_DEVPARTOK);

   9865 10 000455   000033 630400 11                 EPPR0   27
        10 000456   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 000457   000000 701000 xent               TSX1    TSE$ERROR
        10 000460   000000 011000                    NOP     0

      702     9866    4                 IF RESULTS.BOOTINFO ~= '0'B THEN CALL CHNGAARD ( '0'B ) ;

   9866 10 000461   000000 106400                    CMPC    fill='000'O
        10 000462   004012 600005 7                  ADSC9   RESULTS                  cn=3,n=5
        10 000463   000002 000002 xsym               ADSC9   B_VECTNIL+2              cn=0,n=2
        10 000464   000471 600000 10                 TZE     s:9868

   9866 10 000465   000034 236000 11                 LDQ     28
        10 000466   200043 756100                    STQ     @PATH,,AUTO
        10 000467   000271 701000 10                 TSX1    CHNGAARD
        10 000470   000000 011000                    NOP     0

      703     9867        /**/
      704     9868    4                 CONFIG_KEY.COUNT = SIZEC(TS$DEV.DEVNAME);

   9868 10 000471   010000 236003                    LDQ     4096,DU
        10 000472   003742 552040 7                  STBQ    CONFIG_KEY,'40'O

      705     9869    4                 CONFIG_KEY.TEXT = CMD$ -> TS$DEV.DEVNAME;

   9869 10 000473   001062 470400 7                  LDP0    CMD$
        10 000474   040000 100500                    MLR     fill='040'O
        10 000475   000001 000010                    ADSC9   1,,PR0                   cn=0,n=8
        10 000476   003742 200010 7                  ADSC9   CONFIG_KEY               cn=1,n=8

      706     9870    4                 CALL M$OPEN (OPEN_CONFIG) ALTRET (CONFIG_ERR);

   9870 10 000477   000036 630400 7                  EPPR0   OPEN_CONFIG
        10 000500   450000 713400                    CLIMB   alt,open
        10 000501   410400 401760                    pmme    nvectors=18
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:120  
        10 000502   001474 702000 10                 TSX2    CONFIG_ERR

      707     9871    4                 CALL M$READ (READ_CONFIG) ALTRET (CONFIG_ERR);

   9871 10 000503   000224 630400 7                  EPPR0   READ_CONFIG
        10 000504   440000 713400                    CLIMB   alt,read
        10 000505   401400 401760                    pmme    nvectors=4
        10 000506   001474 702000 10                 TSX2    CONFIG_ERR

      708     9872    4                 CONFIG$ -> TD$DEV.FLAGS.DOWN = YES;

   9872 10 000507   001066 470400 7                  LDP0    CONFIG$
        10 000510   400000 236003                    LDQ     -131072,DU
        10 000511   000011 256100                    ORSQ    9,,PR0

      709     9873    4                 WRITE_CONFIG.BUF_.BOUND = SIZEV(TD$DEV);

   9873 10 000512   000650 236000 7                  LDQ     WRITE_CONFIG+4
        10 000513   177777 376007                    ANQ     65535,DL
        10 000514   000035 276000 11                 ORQ     29
        10 000515   000650 756000 7                  STQ     WRITE_CONFIG+4

      710     9874    4                 CALL M$WRITE (WRITE_CONFIG) ALTRET (CONFIG_ERR);

   9874 10 000516   000644 630400 7                  EPPR0   WRITE_CONFIG
        10 000517   440001 713400                    CLIMB   alt,write
        10 000520   401400 401760                    pmme    nvectors=4
        10 000521   001474 702000 10                 TSX2    CONFIG_ERR

      711     9875    4                 CALL M$CLOSE (CLOSE_CONFIG) ALTRET (CONFIG_ERR);

   9875 10 000522   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 000523   450001 713400                    CLIMB   alt,close
        10 000524   406000 401760                    pmme    nvectors=13
        10 000525   001474 702000 10                 TSX2    CONFIG_ERR
        10 000526   001462 710000 10                 TRA     NEXT_PART

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:121  
      712     9876        /**/
      713     9877        /*E*    ERROR: TSS-E$T_DEVPARTOK-0
      714     9878                MESSAGE: Device %U1 successfully partitioned
      715     9879                DESCRIPTION: THE SPECIFIED DEVICE NOW READY FOR T&D OR WHATEVER
      716     9880        */
      717     9881        /**/
      718     9882    4               CASE (TSS_MPC);

      719     9883    4                 SYSCON_FPT.V.COMPONENT# = %MPC#;

   9883 10 000527   000003 236003                    LDQ     3,DU
        10 000530   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

      720     9884    4                 SYSCON_FPT.V.DEVNM# = CMD$ -> TS$MPC.MPCNAME;

   9884 10 000531   040000 100500                    MLR     fill='040'O
        10 000532   000001 000010                    ADSC9   1,,PR0                   cn=0,n=8
        10 000533   000713 000010 7                  ADSC9   SYSCON_FPT+5             cn=0,n=8

      721     9885    4                 SUB_BUF_1.COUNT = 4;

   9885 10 000534   004000 236003                    LDQ     2048,DU
        10 000535   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

      722     9886    4                 SUB_BUF_1.TEXT = CMD$ -> TS$MPC.MPCNAME;

   9886 10 000536   040000 100500                    MLR     fill='040'O
        10 000537   000001 000010                    ADSC9   1,,PR0                   cn=0,n=8
        10 000540   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

      723     9887        /**/
      724     9888    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (PART_ERR);

   9888 10 000541   000706 630400 7                  EPPR0   SYSCON_FPT
        10 000542   470007 713400                    CLIMB   alt,+28679
        10 000543   400400 401760                    pmme    nvectors=2
        10 000544   001513 702000 10                 TSX2    PART_ERR
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:122  

      725     9889        /**/
      726     9890    4                 CALL TSE$ERROR(%E$T_MPCPARTOK);

   9890 10 000545   000037 630400 11                 EPPR0   31
        10 000546   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 000547   000000 701000 xent               TSX1    TSE$ERROR
        10 000550   000000 011000                    NOP     0

      727     9891    4                 IF RESULTS.BOOTINFO ~= '0'B THEN CALL CHNGAARD ( '0'B ) ;

   9891 10 000551   000000 106400                    CMPC    fill='000'O
        10 000552   004012 600005 7                  ADSC9   RESULTS                  cn=3,n=5
        10 000553   000002 000002 xsym               ADSC9   B_VECTNIL+2              cn=0,n=2
        10 000554   000561 600000 10                 TZE     s:9893

   9891 10 000555   000034 236000 11                 LDQ     28
        10 000556   200043 756100                    STQ     @PATH,,AUTO
        10 000557   000271 701000 10                 TSX1    CHNGAARD
        10 000560   000000 011000                    NOP     0

      728     9892        /**/
      729     9893    4                 CONFIG_KEY.COUNT = SIZEC(TS$MPC.MPCNAME);

   9893 10 000561   010000 236003                    LDQ     4096,DU
        10 000562   003742 552040 7                  STBQ    CONFIG_KEY,'40'O

      730     9894    4                 CONFIG_KEY.TEXT = CMD$ -> TS$MPC.MPCNAME;

   9894 10 000563   001062 470400 7                  LDP0    CMD$
        10 000564   040000 100500                    MLR     fill='040'O
        10 000565   000001 000010                    ADSC9   1,,PR0                   cn=0,n=8
        10 000566   003742 200010 7                  ADSC9   CONFIG_KEY               cn=1,n=8

      731     9895    4                 CALL M$OPEN (OPEN_CONFIG) ALTRET (CONFIG_ERR);

   9895 10 000567   000036 630400 7                  EPPR0   OPEN_CONFIG
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:123  
        10 000570   450000 713400                    CLIMB   alt,open
        10 000571   410400 401760                    pmme    nvectors=18
        10 000572   001474 702000 10                 TSX2    CONFIG_ERR

      732     9896    4                 CALL M$READ (READ_CONFIG) ALTRET (CONFIG_ERR);

   9896 10 000573   000224 630400 7                  EPPR0   READ_CONFIG
        10 000574   440000 713400                    CLIMB   alt,read
        10 000575   401400 401760                    pmme    nvectors=4
        10 000576   001474 702000 10                 TSX2    CONFIG_ERR

      733     9897    4                 CONFIG$ -> TD$MPC.FLAGS.DOWN = YES;

   9897 10 000577   001066 470400 7                  LDP0    CONFIG$
        10 000600   400000 236007                    LDQ     -131072,DL
        10 000601   000012 256100                    ORSQ    10,,PR0

      734     9898    4                 WRITE_CONFIG.BUF_.BOUND = SIZEC(TD$MPC) +

   9898 10 000602   001066 470400 7                  LDP0    CONFIG$
        10 000603   000012 236100                    LDQ     10,,PR0
        10 000604   000017 772000                    QRL     15
        10 000605   000040 376000 11                 ANQ     32
        10 000606   000073 036007                    ADLQ    59,DL
        10 000607   000020 736000                    QLS     16
        10 000610   000650 676000 7                  ERQ     WRITE_CONFIG+4
        10 000611   000034 376000 xsym               ANQ     B_VECTNIL+28
        10 000612   000650 656000 7                  ERSQ    WRITE_CONFIG+4

      735     9899    4                   (SIZEC(TD$MPC.DEVNAME(0)) * (CONFIG$ -> TD$MPC.NUMDEVS-1)) - 1;
      736     9900    4                 CALL M$WRITE (WRITE_CONFIG) ALTRET (CONFIG_ERR);

   9900 10 000613   000644 630400 7                  EPPR0   WRITE_CONFIG
        10 000614   440001 713400                    CLIMB   alt,write
        10 000615   401400 401760                    pmme    nvectors=4
        10 000616   001474 702000 10                 TSX2    CONFIG_ERR

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:124  
      737     9901    4                 CALL M$CLOSE (CLOSE_CONFIG) ALTRET (CONFIG_ERR);

   9901 10 000617   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 000620   450001 713400                    CLIMB   alt,close
        10 000621   406000 401760                    pmme    nvectors=13
        10 000622   001474 702000 10                 TSX2    CONFIG_ERR
        10 000623   001462 710000 10                 TRA     NEXT_PART

      738     9902        /**/
      739     9903        /*E*    ERROR: TSS-E$T_MPCPARTOK-0
      740     9904                MESSAGE: MPC %U1 successfully partitioned
      741     9905                DESCRIPTION: THE SPECIFIED MPC HAS BEEN PARTITIONED
      742     9906        */
      743     9907        /**/
      744     9908    4               CASE (TSS_FEP);

      745     9909    4                 SYSCON_FPT.V.COMPONENT# = %FEP##;

   9909 10 000624   000004 236003                    LDQ     4,DU
        10 000625   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

      746     9910    4                 SYSCON_FPT.V.CHAN# = CMD$ -> TS$FEP.FEP;

   9910 10 000626   000002 236100                    LDQ     2,,PR0
        10 000627   000712 552004 7                  STBQ    SYSCON_FPT+4,'04'O

      747     9911    4                 SUB_BUF_1.COUNT = CMD$->TS$FEP.LEN + 3;

   9911 10 000630   000001 236100                    LDQ     1,,PR0
        10 000631   000022 772000                    QRL     18
        10 000632   000003 036007                    ADLQ    3,DL
        10 000633   000033 736000                    QLS     27
        10 000634   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

      748     9912    4                 SUB_BUF_1.TEXT = 'FEP';

   9912 10 000635   040000 100400                    MLR     fill='040'O
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:125  
        10 000636   000300 000003 8                  ADSC9   TEXTC_VEC+6              cn=0,n=3
        10 000637   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

      749     9913    4                CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,CMD$->TS$FEP.LEN),CMD$ -> TS$FEP.
              9913                          FEP);

   9913 10 000640   000001 220100                    LDX0    1,,PR0
        10 000641   000002 236100                    LDQ     2,,PR0
        10 000642   777777 376007                    ANQ     -1,DL
        10 000643   000000 235003                    LDA     0,DU
        10 000644   200056 757100                    STAQ    I+4,,AUTO
        10 000645   000040 301500                    BTD
        10 000646   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 000647   003746 030010 7                  NDSC9   SUB_BUF_1+1              cn=0,s=nosgn,sf=0,n=*X0

      750     9914        /**/
      751     9915    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (PART_ERR);

   9915 10 000650   000706 630400 7                  EPPR0   SYSCON_FPT
        10 000651   470007 713400                    CLIMB   alt,+28679
        10 000652   400400 401760                    pmme    nvectors=2
        10 000653   001513 702000 10                 TSX2    PART_ERR

      752     9916        /**/
      753     9917    4                 CALL TSE$ERROR (%E$T_FEPPARTOK);

   9917 10 000654   000042 630400 11                 EPPR0   34
        10 000655   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 000656   000000 701000 xent               TSX1    TSE$ERROR
        10 000657   000000 011000                    NOP     0

      754     9918        /**/
      755     9919    4                 CONFIG_KEY.COUNT = 4;

   9919 10 000660   004000 236003                    LDQ     2048,DU
        10 000661   003742 552040 7                  STBQ    CONFIG_KEY,'40'O

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:126  
      756     9920    4                 CONFIG_KEY.TEXT = 'IOM';

   9920 10 000662   040000 100400                    MLR     fill='040'O
        10 000663   000301 000003 8                  ADSC9   TEXTC_VEC+7              cn=0,n=3
        10 000664   003742 200010 7                  ADSC9   CONFIG_KEY               cn=1,n=8

      757     9921    4                 CALL BINCHAR(SUBSTR(CONFIG_KEY.TEXT,3,CMD$->TS$FEP.LEN),CMD$->TS$FEP.
              9921                          IOM);

   9921 10 000665   001062 470400 7                  LDP0    CMD$
        10 000666   000001 220100                    LDX0    1,,PR0
        10 000667   000001 236100                    LDQ     1,,PR0
        10 000670   777777 376007                    ANQ     -1,DL
        10 000671   000000 235003                    LDA     0,DU
        10 000672   200056 757100                    STAQ    I+4,,AUTO
        10 000673   000040 301500                    BTD
        10 000674   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 000675   003743 030010 7                  NDSC9   CONFIG_KEY+1             cn=0,s=nosgn,sf=0,n=*X0

      758     9922    4                 CALL M$OPEN(OPEN_CONFIG) ALTRET(CONFIG_ERR);

   9922 10 000676   000036 630400 7                  EPPR0   OPEN_CONFIG
        10 000677   450000 713400                    CLIMB   alt,open
        10 000700   410400 401760                    pmme    nvectors=18
        10 000701   001474 702000 10                 TSX2    CONFIG_ERR

      759     9923    4                 CALL M$READ(READ_CONFIG) ALTRET(CONFIG_ERR);

   9923 10 000702   000224 630400 7                  EPPR0   READ_CONFIG
        10 000703   440000 713400                    CLIMB   alt,read
        10 000704   401400 401760                    pmme    nvectors=4
        10 000705   001474 702000 10                 TSX2    CONFIG_ERR

      760     9924    4                 CONFIG$->TD$IOM.FLAGS.DOWN(CMD$->TS$FEP.CHAN) = YES;

   9924 10 000706   001062 470400 7                  LDP0    CMD$
        10 000707   000002 236100                    LDQ     2,,PR0
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:127  
        10 000710   000021 772000                    QRL     17
        10 000711   000043 376000 11                 ANQ     35
        10 000712   001066 471400 7                  LDP1    CONFIG$
        10 000713   003106 060400                    CSL     bolr='003'O
        10 000714   000030 000001 xsym               BDSC    B_VECTNIL+24             by=0,bit=0,n=1
        10 000715   100400 000001                    BDSC    256,Q,PR1                by=0,bit=0,n=1

      761     9925    4                 WRITE_CONFIG.BUF_.BOUND = SIZEV(TD$IOM);

   9925 10 000716   000650 236000 7                  LDQ     WRITE_CONFIG+4
        10 000717   177777 376007                    ANQ     65535,DL
        10 000720   000044 276000 11                 ORQ     36
        10 000721   000650 756000 7                  STQ     WRITE_CONFIG+4

      762     9926    4                 CALL M$WRITE(WRITE_CONFIG) ALTRET(CONFIG_ERR);

   9926 10 000722   000644 630400 7                  EPPR0   WRITE_CONFIG
        10 000723   440001 713400                    CLIMB   alt,write
        10 000724   401400 401760                    pmme    nvectors=4
        10 000725   001474 702000 10                 TSX2    CONFIG_ERR

      763     9927    4                 CALL M$CLOSE(CLOSE_CONFIG) ALTRET(CONFIG_ERR);

   9927 10 000726   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 000727   450001 713400                    CLIMB   alt,close
        10 000730   406000 401760                    pmme    nvectors=13
        10 000731   001474 702000 10                 TSX2    CONFIG_ERR
        10 000732   001462 710000 10                 TRA     NEXT_PART

      764     9928        /**/
      765     9929        /*E*    ERROR:   TSS-E$T_FEPPARTOK-0
      766     9930                MESSAGE: FEP %U1 successfully partitioned
      767     9931                DESCRIPTION: THE SPECIFIED FEP HAS BEEN PARTITIONED */
      768     9932        /**/
      769     9933    4               CASE (TSS_IOM);

      770     9934    4                 SYSCON_FPT.V.COMPONENT# = %IOM##;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:128  

   9934 10 000733   000005 236003                    LDQ     5,DU
        10 000734   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

      771     9935    4                 SYSCON_FPT.V.IOM# = CMD$ -> TS$IOM.IOM;

   9935 10 000735   000001 236100                    LDQ     1,,PR0
        10 000736   000011 736000                    QLS     9
        10 000737   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

      772     9936    4                 SUB_BUF_1.COUNT = 5;

   9936 10 000740   005000 236003                    LDQ     2560,DU
        10 000741   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

      773     9937    4                 SUB_BUF_1.TEXT = 'IOM#';

   9937 10 000742   040000 100400                    MLR     fill='040'O
        10 000743   000302 000004 8                  ADSC9   TEXTC_VEC+8              cn=0,n=4
        10 000744   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

      774     9938    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,4,1),CMD$ -> TS$IOM.IOM);

   9938 10 000745   000001 235100                    LDA     1,,PR0
        10 000746   000044 773000                    LRL     36
        10 000747   200056 757100                    STAQ    I+4,,AUTO
        10 000750   000000 301500                    BTD
        10 000751   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 000752   003746 230001 7                  NDSC9   SUB_BUF_1+1              cn=1,s=nosgn,sf=0,n=1

      775     9939        /**/
      776     9940    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (PART_ERR);

   9940 10 000753   000706 630400 7                  EPPR0   SYSCON_FPT
        10 000754   470007 713400                    CLIMB   alt,+28679
        10 000755   400400 401760                    pmme    nvectors=2
        10 000756   001513 702000 10                 TSX2    PART_ERR
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:129  

      777     9941        /**/
      778     9942    4                 CALL TSE$ERROR (%E$T_IOMPARTOK);

   9942 10 000757   000046 630400 11                 EPPR0   38
        10 000760   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 000761   000000 701000 xent               TSX1    TSE$ERROR
        10 000762   000000 011000                    NOP     0
        10 000763   001462 710000 10                 TRA     NEXT_PART

      779     9943        /**/
      780     9944        /*E*    ERROR:   TSS-E$T_IOMPARTOK-0
      781     9945                MESSAGE: IOM %U1 successfully partitioned
      782     9946                DESCRIPTION: THE SPECIFIED IOM HAS BEEN PARTITIONED */
      783     9947        /**/
      784     9948    4               CASE (TSS_CHAN);

      785     9949    4                 SYSCON_FPT.V.COMPONENT# = %CHANNEL#;

   9949 10 000764   000001 236003                    LDQ     1,DU
        10 000765   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

      786     9950    5                 DO I = CMD$ -> TS$CHAN.LOCHAN TO CMD$ -> TS$CHAN.HICHAN;

   9950 10 000766   000002 235100                    LDA     2,,PR0
        10 000767   001067 755000 7                  STA     I
        10 000770   001105 710000 10                 TRA     s:9973+1

      787     9951    5                    SYSCON_FPT.V.IOM# = CMD$ -> TS$CHAN.IOM;

   9951 10 000771   001062 470400 7                  LDP0    CMD$
        10 000772   000001 236100                    LDQ     1,,PR0
        10 000773   000011 736000                    QLS     9
        10 000774   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

      788     9952    5                    SYSCON_FPT.V.CHAN# = I;

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:130  
   9952 10 000775   001067 236000 7                  LDQ     I
        10 000776   000712 552004 7                  STBQ    SYSCON_FPT+4,'04'O

      789     9953    5                    CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,0,1),CMD$ -> TS$CHAN.IOM);

   9953 10 000777   000001 235100                    LDA     1,,PR0
        10 001000   000044 773000                    LRL     36
        10 001001   200056 757100                    STAQ    I+4,,AUTO
        10 001002   000000 301500                    BTD
        10 001003   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 001004   003745 230001 7                  NDSC9   SUB_BUF_1                cn=1,s=nosgn,sf=0,n=1

      790     9954    5                    SUB_BUF_1.COUNT = 1;

   9954 10 001005   001000 236003                    LDQ     512,DU
        10 001006   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

      791     9955    5                    CALL BINCHAR(SUBSTR(SUB_BUF_2.TEXT,0,3),I);

   9955 10 001007   000000 301400                    BTD
        10 001010   001067 000004 7                  NDSC9   I                        cn=0,s=lsgnf,sf=0,n=4
        10 001011   003755 230003 7                  NDSC9   SUB_BUF_2                cn=1,s=nosgn,sf=0,n=3

      792     9956    5                    SUB_BUF_2.COUNT = 3;

   9956 10 001012   003000 236003                    LDQ     1536,DU
        10 001013   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

      793     9957        /**/
      794     9958    5                    CALL M$SYSCON (SYSCON_FPT) ALTRET (PART_ERR);

   9958 10 001014   000706 630400 7                  EPPR0   SYSCON_FPT
        10 001015   470007 713400                    CLIMB   alt,+28679
        10 001016   400400 401760                    pmme    nvectors=2
        10 001017   001513 702000 10                 TSX2    PART_ERR

      795     9959        /**/
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:131  
      796     9960    5                    CALL TSE$ERROR(%E$T_CHANPARTOK);

   9960 10 001020   000050 630400 11                 EPPR0   40
        10 001021   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 001022   000000 701000 xent               TSX1    TSE$ERROR
        10 001023   000000 011000                    NOP     0

      797     9961    5                 IF RESULTS.BOOTINFO ~= '0'B THEN CALL CHNGAARD ( '1'B ) ;

   9961 10 001024   000000 106400                    CMPC    fill='000'O
        10 001025   004012 600005 7                  ADSC9   RESULTS                  cn=3,n=5
        10 001026   000002 000002 xsym               ADSC9   B_VECTNIL+2              cn=0,n=2
        10 001027   001034 600000 10                 TZE     s:9963

   9961 10 001030   000051 236000 11                 LDQ     41
        10 001031   200043 756100                    STQ     @PATH,,AUTO
        10 001032   000271 701000 10                 TSX1    CHNGAARD
        10 001033   000000 011000                    NOP     0

      798     9962        /**/
      799     9963    5                    CONFIG_KEY.COUNT = 4;

   9963 10 001034   004000 236003                    LDQ     2048,DU
        10 001035   003742 552040 7                  STBQ    CONFIG_KEY,'40'O

      800     9964    5                    CONFIG_KEY.TEXT = 'IOM';

   9964 10 001036   040000 100400                    MLR     fill='040'O
        10 001037   000301 000003 8                  ADSC9   TEXTC_VEC+7              cn=0,n=3
        10 001040   003742 200010 7                  ADSC9   CONFIG_KEY               cn=1,n=8

      801     9965    5                    CALL BINCHAR(SUBSTR(CONFIG_KEY.TEXT,3,1),

   9965 10 001041   001062 470400 7                  LDP0    CMD$
        10 001042   000001 235100                    LDA     1,,PR0
        10 001043   000044 773000                    LRL     36
        10 001044   200056 757100                    STAQ    I+4,,AUTO
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:132  
        10 001045   000000 301500                    BTD
        10 001046   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 001047   003743 030001 7                  NDSC9   CONFIG_KEY+1             cn=0,s=nosgn,sf=0,n=1

      802     9966    5                      CMD$ -> TS$CHAN.IOM);
      803     9967    5                    CALL M$OPEN (OPEN_CONFIG) ALTRET (CONFIG_ERR);

   9967 10 001050   000036 630400 7                  EPPR0   OPEN_CONFIG
        10 001051   450000 713400                    CLIMB   alt,open
        10 001052   410400 401760                    pmme    nvectors=18
        10 001053   001474 702000 10                 TSX2    CONFIG_ERR

      804     9968    5                    CALL M$READ (READ_CONFIG) ALTRET (CONFIG_ERR);

   9968 10 001054   000224 630400 7                  EPPR0   READ_CONFIG
        10 001055   440000 713400                    CLIMB   alt,read
        10 001056   401400 401760                    pmme    nvectors=4
        10 001057   001474 702000 10                 TSX2    CONFIG_ERR

      805     9969    5                    CONFIG$ -> TD$IOM.FLAGS.DOWN(I) = YES;

   9969 10 001060   001067 235000 7                  LDA     I
        10 001061   000001 735000                    ALS     1
        10 001062   001064 605000 10                 TPL     s:9969+4
        10 001063   000044 035003                    ADLA    36,DU
        10 001064   001066 470400 7                  LDP0    CONFIG$
        10 001065   003105 060400                    CSL     bolr='003'O
        10 001066   000030 000001 xsym               BDSC    B_VECTNIL+24             by=0,bit=0,n=1
        10 001067   000400 000001                    BDSC    256,A,PR0                by=0,bit=0,n=1

      806     9970    5                    WRITE_CONFIG.BUF_.BOUND = SIZEV(TD$IOM);

   9970 10 001070   000650 236000 7                  LDQ     WRITE_CONFIG+4
        10 001071   177777 376007                    ANQ     65535,DL
        10 001072   000044 276000 11                 ORQ     36
        10 001073   000650 756000 7                  STQ     WRITE_CONFIG+4

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:133  
      807     9971    5                    CALL M$WRITE (WRITE_CONFIG) ALTRET (CONFIG_ERR);

   9971 10 001074   000644 630400 7                  EPPR0   WRITE_CONFIG
        10 001075   440001 713400                    CLIMB   alt,write
        10 001076   401400 401760                    pmme    nvectors=4
        10 001077   001474 702000 10                 TSX2    CONFIG_ERR

      808     9972    5                    CALL M$CLOSE (CLOSE_CONFIG) ALTRET (CONFIG_ERR);

   9972 10 001100   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 001101   450001 713400                    CLIMB   alt,close
        10 001102   406000 401760                    pmme    nvectors=13
        10 001103   001474 702000 10                 TSX2    CONFIG_ERR

      809     9973    5                    END;

   9973 10 001104   001067 054000 7                  AOS     I
        10 001105   001062 470400 7                  LDP0    CMD$
        10 001106   000003 236100                    LDQ     3,,PR0
        10 001107   000771 604000 10                 TMI     s:9951
        10 001110   001067 116000 7                  CMPQ    I
        10 001111   000771 605000 10                 TPL     s:9951
        10 001112   001462 710000 10                 TRA     NEXT_PART

      810     9974        /**/
      811     9975        /*E*    ERROR: TSS-E$T_CHANPARTOK-0
      812     9976                MESSAGE: IOM%U1,CHAN%U2 successfully partitioned
      813     9977                DESCRIPTION: THE SPECIFIED CHANNEL HAS BEEN TAKEN OUT OF SERVICE */
      814     9978        /**/
      815     9979    4               CASE (TSS_PAGES);

      816     9980    4                 CALL M$SAD (SEE_PPUT_LS);      /* GET  PPUT DESCRIPTOR         */

   9980 10 001113   000670 630400 7                  EPPR0   SEE_PPUT_LS
        10 001114   030015 713400                    CLIMB   12301
        10 001115   400000 401760                    pmme    nvectors=1

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:134  
      817     9981        /*     Make CVM PPUT into the IS, then point PPUT$ there  */
      818     9982    4                 PPUTPTR.SEGID = %SPCL1SID;     /* Init pointer to PPUT window  */

   9982 10 001116   006021 236007                    LDQ     3089,DL
        10 001117   001114 752003 7                  STCQ    PPUT$,'03'O

      819     9983    4                 PPUT_DESC = PTRDSCR(PPUT$);    /* put (real) PPUT desc in here */

   9983 10 001120   001114 470400 7                  LDP0    PPUT$
        10 001121   001112 050400 7                  STD0    PPUT_DESC

      820     9984    4                 PPUT_OFFSET = B$JIT.DDLL;

   9984 10 001122   000000 470400 xsym               LDP0    B$JIT$
        10 001123   000200 236100                    LDQ     128,,PR0
        10 001124   000022 772000                    QRL     18
        10 001125   200005 756100                    STQ     PPUT_OFFSET,,AUTO

      821     9985    4                 VP = PPUT_OFFSET - %ISEGLO;

   9985 10 001126   000100 136007                    SBLQ    64,DL
        10 001127   200003 756100                    STQ     VP,,AUTO

      822     9986    5                 DO I = DBASE(PPUT_DESC) TO DBASE(PPUT_DESC) + DBOUND(PPUT_DESC) BY
              9986                          4096;

   9986 10 001130   001113 235000 7                  LDA     PPUT_DESC+1
        10 001131   001067 755000 7                  STA     I
        10 001132   001153 710000 10                 TRA     s:9993+2

      823     9987    5                    PP = I/4096;

   9987 10 001133   001067 236000 7                  LDQ     I
        10 001134   010000 506007                    DIV     4096,DL
        10 001135   200004 756100                    STQ     PP,,AUTO

      824     9988    5                    PPUT_CVM.V.PPNO# = PP;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:135  

   9988 10 001136   000703 756000 7                  STQ     PPUT_CVM+3

      825     9989    5                    PPUT_CVM.V.VPNO# = VP;

   9989 10 001137   200003 720100                    LXL0    VP,,AUTO
        10 001140   000704 440000 7                  SXL0    PPUT_CVM+4

      826     9990    5                    PPUT_CVM.V.PHYSICAL# = '0'B;   /* PPNO is WSQ0 relative     */

   9990 10 001141   000052 236000 11                 LDQ     42
        10 001142   000702 356000 7                  ANSQ    PPUT_CVM+2

      827     9991    5                      CALL M$CVM (PPUT_CVM);

   9991 10 001143   000700 630400 7                  EPPR0   PPUT_CVM
        10 001144   030011 713400                    CLIMB   12297
        10 001145   400000 401760                    pmme    nvectors=1

      828     9992    5                    VP = VP + 1;

   9992 10 001146   200003 235100                    LDA     VP,,AUTO
        10 001147   000001 035007                    ADLA    1,DL
        10 001150   200003 755100                    STA     VP,,AUTO

      829     9993    5                    END;   /* DO I */

   9993 10 001151   010000 236007                    LDQ     4096,DL
        10 001152   001067 056000 7                  ASQ     I
        10 001153   001112 236000 7                  LDQ     PPUT_DESC
        10 001154   000020 772000                    QRL     16
        10 001155   001113 036000 7                  ADLQ    PPUT_DESC+1
        10 001156   001133 604000 10                 TMI     s:9987
        10 001157   001067 116000 7                  CMPQ    I
        10 001160   001133 605000 10                 TPL     s:9987

      830     9994        /**/
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:136  
      831     9995    4                 PPUT$ = PINCRW (B$IS$, (PPUT_OFFSET - %ISEGLO)*1024);

   9995 10 001161   200005 236100                    LDQ     PPUT_OFFSET,,AUTO
        10 001162   000034 736000                    QLS     28
        10 001163   200000 136003                    SBLQ    65536,DU
        10 001164   000000 036000 xsym               ADLQ    B$IS$
        10 001165   001114 756000 7                  STQ     PPUT$

      832     9996        /**/
      833     9997    4                 MM$ = ADDR(PPUT36);

   9997 10 001166   000053 236000 11                 LDQ     43
        10 001167   001110 756000 7                  STQ     MM$

      834     9998    4                 TS_FIRST = CMD$->TS$PAGES.LOPAGE;

   9998 10 001170   001062 470400 7                  LDP0    CMD$
        10 001171   000001 235100                    LDA     1,,PR0
        10 001172   001100 755000 7                  STA     TS_FIRST

      835     9999    4                 TS_LAST = TS_FIRST;

   9999 10 001173   001101 755000 7                  STA     TS_LAST

      836    10000    5                 DO I = CMD$ -> TS$PAGES.LOPAGE TO CMD$ -> TS$PAGES.HIPAGE;

  10000 10 001174   000001 235100                    LDA     1,,PR0
        10 001175   001067 755000 7                  STA     I
        10 001176   001351 710000 10                 TRA     s:10050+1

      837    10001    5                    CALL STUFF_BUF (I,SUB_BUF_1);

  10001 10 001177   000054 236000 11                 LDQ     44
        10 001200   200044 756100                    STQ     @NUM+1,,AUTO
        10 001201   000055 236000 11                 LDQ     45
        10 001202   200043 756100                    STQ     @PATH,,AUTO
        10 001203   001565 701000 10                 TSX1    STUFF_BUF
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:137  
        10 001204   000000 011000                    NOP     0

      838    10002        /**/
      839    10003    5                    BADPP_FPT.V.PPNO# = I;

  10003 10 001205   001067 235000 7                  LDA     I
        10 001206   000662 755000 7                  STA     BADPP_FPT+2

      840    10004    5                    CALL M$BADPP (BADPP_FPT) ALTRET (PART_ERR);

  10004 10 001207   000660 630400 7                  EPPR0   BADPP_FPT
        10 001210   430017 713400                    CLIMB   alt,+12303
        10 001211   400000 401760                    pmme    nvectors=1
        10 001212   001513 702000 10                 TSX2    PART_ERR

      841    10005        /**/
      842    10006    5                    PPUT36 = PINCRW(PPUT$, I) -> TEMP36;  /*get PPUT flag word  */

  10006 10 001213   001114 470400 7                  LDP0    PPUT$
        10 001214   001067 720000 7                  LXL0    I
        10 001215   000000 235110                    LDA     0,X0,PR0
        10 001216   001107 755000 7                  STA     PPUT36

      843    10007        /**/
      844    10008    5                    IF I = CMD$->TS$PAGES.LOPAGE THEN

  10008 10 001217   001062 471400 7                  LDP1    CMD$
        10 001220   001067 236000 7                  LDQ     I
        10 001221   001234 604000 10                 TMI     s:10012
        10 001222   100001 116100                    CMPQ    1,,PR1
        10 001223   001234 601000 10                 TNZ     s:10012

      845    10009    5                      IF MM$PPUT.SUSPECT THEN  SUSPECT.PREVIOUS = TRUE;

  10009 10 001224   001110 473400 7                  LDP3    MM$
        10 001225   300000 234100                    SZN     0,,PR3
        10 001226   001232 605000 10                 TPL     s:10010
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:138  

  10009 10 001227   400000 236003                    LDQ     -131072,DU
        10 001230   001106 256000 7                  ORSQ    SUSPECT
        10 001231   001234 710000 10                 TRA     s:10012

      846    10010    5                                         ELSE  SUSPECT.PREVIOUS = FALSE;

  10010 10 001232   000031 236000 xsym               LDQ     B_VECTNIL+25
        10 001233   001106 356000 7                  ANSQ    SUSPECT

      847    10011        /**/
      848    10012    5                    IF MM$PPUT.SUSPECT THEN  SUSPECT.PRESENT = TRUE;

  10012 10 001234   001110 473400 7                  LDP3    MM$
        10 001235   300000 234100                    SZN     0,,PR3
        10 001236   001242 605000 10                 TPL     s:10013

  10012 10 001237   200000 236003                    LDQ     65536,DU
        10 001240   001106 256000 7                  ORSQ    SUSPECT
        10 001241   001244 710000 10                 TRA     s:10015

      849    10013    5                                       ELSE  SUSPECT.PRESENT = FALSE;

  10013 10 001242   000052 236000 11                 LDQ     42
        10 001243   001106 356000 7                  ANSQ    SUSPECT

      850    10014        /**/
      851    10015    5                    IF SUSPECT.PRESENT THEN

  10015 10 001244   001106 236000 7                  LDQ     SUSPECT
        10 001245   200000 316003                    CANQ    65536,DU
        10 001246   001310 600000 10                 TZE     s:10034

      852    10016    6                       DO;

      853    10017    6                       IF  NOT SUSPECT.PREVIOUS THEN

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:139  
  10017 10 001247   001106 234000 7                  SZN     SUSPECT
        10 001250   001305 604000 10                 TMI     s:10030

      854    10018    7                          DO;

      855    10019    7                          SUSPECT.PREVIOUS = TRUE;

  10019 10 001251   400000 236003                    LDQ     -131072,DU
        10 001252   001106 256000 7                  ORSQ    SUSPECT

      856    10020    7                          CALL STUFF_BUF (TS_FIRST,SUB_BUF_1);

  10020 10 001253   000054 236000 11                 LDQ     44
        10 001254   200044 756100                    STQ     @NUM+1,,AUTO
        10 001255   000056 236000 11                 LDQ     46
        10 001256   200043 756100                    STQ     @PATH,,AUTO
        10 001257   001565 701000 10                 TSX1    STUFF_BUF
        10 001260   000000 011000                    NOP     0

      857    10021    8                          IF TS_FIRST = TS_LAST THEN DO;

  10021 10 001261   001100 236000 7                  LDQ     TS_FIRST
        10 001262   001101 116000 7                  CMPQ    TS_LAST
        10 001263   001271 601000 10                 TNZ     s:10025

      858    10022    8                            CALL TSE$ERROR(%E$T_PAGEPARTOK);

  10022 10 001264   000060 630400 11                 EPPR0   48
        10 001265   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 001266   000000 701000 xent               TSX1    TSE$ERROR
        10 001267   000000 011000                    NOP     0

      859    10023    8                            END;

  10023 10 001270   001303 710000 10                 TRA     s:10028

      860    10024    8                          ELSE DO;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:140  

      861    10025    8                            CALL STUFF_BUF (TS_LAST,SUB_BUF_2);

  10025 10 001271   000061 236000 11                 LDQ     49
        10 001272   200044 756100                    STQ     @NUM+1,,AUTO
        10 001273   000062 236000 11                 LDQ     50
        10 001274   200043 756100                    STQ     @PATH,,AUTO
        10 001275   001565 701000 10                 TSX1    STUFF_BUF
        10 001276   000000 011000                    NOP     0

      862    10026    8                            CALL TSE$ERROR(%E$T_PAGES_PARTOK);

  10026 10 001277   000064 630400 11                 EPPR0   52
        10 001300   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 001301   000000 701000 xent               TSX1    TSE$ERROR
        10 001302   000000 011000                    NOP     0

      863    10027    8                            END;

      864    10028    7                          TS_FIRST = I;

  10028 10 001303   001067 235000 7                  LDA     I
        10 001304   001100 755000 7                  STA     TS_FIRST

      865    10029    7                          END;

      866    10030    6                       TS_LAST = I;

  10030 10 001305   001067 235000 7                  LDA     I
        10 001306   001101 755000 7                  STA     TS_LAST

      867    10031    6                       END;

  10031 10 001307   001350 710000 10                 TRA     s:10050

      868    10032    5                    ELSE      /* IF NOT SUSPECT.PRESENT DO THIS  */
      869    10033    6                       DO;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:141  

      870    10034    6                       IF  SUSPECT.PREVIOUS THEN

  10034 10 001310   001106 234000 7                  SZN     SUSPECT
        10 001311   001346 605000 10                 TPL     s:10047

      871    10035    7                          DO;

      872    10036    7                          SUSPECT.PREVIOUS = FALSE;

  10036 10 001312   000031 236000 xsym               LDQ     B_VECTNIL+25
        10 001313   001106 356000 7                  ANSQ    SUSPECT

      873    10037    7                          CALL STUFF_BUF (TS_FIRST,SUB_BUF_1);

  10037 10 001314   000054 236000 11                 LDQ     44
        10 001315   200044 756100                    STQ     @NUM+1,,AUTO
        10 001316   000056 236000 11                 LDQ     46
        10 001317   200043 756100                    STQ     @PATH,,AUTO
        10 001320   001565 701000 10                 TSX1    STUFF_BUF
        10 001321   000000 011000                    NOP     0

      874    10038    8                          IF TS_FIRST = TS_LAST THEN DO;

  10038 10 001322   001100 236000 7                  LDQ     TS_FIRST
        10 001323   001101 116000 7                  CMPQ    TS_LAST
        10 001324   001332 601000 10                 TNZ     s:10042

      875    10039    8                            CALL TSE$ERROR(%E$T_PAGESUSPECT_OK);

  10039 10 001325   000066 630400 11                 EPPR0   54
        10 001326   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 001327   000000 701000 xent               TSX1    TSE$ERROR
        10 001330   000000 011000                    NOP     0

      876    10040    8                            END;

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:142  
  10040 10 001331   001344 710000 10                 TRA     s:10045

      877    10041    8                          ELSE DO;

      878    10042    8                            CALL STUFF_BUF (TS_LAST,SUB_BUF_2);

  10042 10 001332   000061 236000 11                 LDQ     49
        10 001333   200044 756100                    STQ     @NUM+1,,AUTO
        10 001334   000062 236000 11                 LDQ     50
        10 001335   200043 756100                    STQ     @PATH,,AUTO
        10 001336   001565 701000 10                 TSX1    STUFF_BUF
        10 001337   000000 011000                    NOP     0

      879    10043    8                            CALL TSE$ERROR(%E$T_PAGES_SUSPECTOK);

  10043 10 001340   000070 630400 11                 EPPR0   56
        10 001341   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 001342   000000 701000 xent               TSX1    TSE$ERROR
        10 001343   000000 011000                    NOP     0

      880    10044    8                            END;

      881    10045    7                          TS_FIRST = I;

  10045 10 001344   001067 235000 7                  LDA     I
        10 001345   001100 755000 7                  STA     TS_FIRST

      882    10046    7                          END;

      883    10047    6                       TS_LAST = I;

  10047 10 001346   001067 235000 7                  LDA     I
        10 001347   001101 755000 7                  STA     TS_LAST

      884    10048    6                       END;

      885    10049                         /* end IF */
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:143  
      886    10050    5                    END;   /* DO I */

  10050 10 001350   001067 054000 7                  AOS     I
        10 001351   001062 470400 7                  LDP0    CMD$
        10 001352   000002 236100                    LDQ     2,,PR0
        10 001353   001177 604000 10                 TMI     s:10001
        10 001354   001067 116000 7                  CMPQ    I
        10 001355   001177 605000 10                 TPL     s:10001

      887    10051        /**/
      888    10052    4                    CALL STUFF_BUF (TS_FIRST,SUB_BUF_1);

  10052 10 001356   000054 236000 11                 LDQ     44
        10 001357   200044 756100                    STQ     @NUM+1,,AUTO
        10 001360   000056 236000 11                 LDQ     46
        10 001361   200043 756100                    STQ     @PATH,,AUTO
        10 001362   001565 701000 10                 TSX1    STUFF_BUF
        10 001363   000000 011000                    NOP     0

      889    10053    4                    CALL STUFF_BUF (TS_LAST,SUB_BUF_2);

  10053 10 001364   000061 236000 11                 LDQ     49
        10 001365   200044 756100                    STQ     @NUM+1,,AUTO
        10 001366   000062 236000 11                 LDQ     50
        10 001367   200043 756100                    STQ     @PATH,,AUTO
        10 001370   001565 701000 10                 TSX1    STUFF_BUF
        10 001371   000000 011000                    NOP     0

      890    10054    4                    PPUT36 = PINCRW(PPUT$, TS_LAST) -> TEMP36;

  10054 10 001372   001114 470400 7                  LDP0    PPUT$
        10 001373   001101 720000 7                  LXL0    TS_LAST
        10 001374   000000 235110                    LDA     0,X0,PR0
        10 001375   001107 755000 7                  STA     PPUT36

      891    10055    4                    IF MM$PPUT.SUSPECT  THEN

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:144  
  10055 10 001376   001110 471400 7                  LDP1    MM$
        10 001377   100000 234100                    SZN     0,,PR1
        10 001400   001416 605000 10                 TPL     s:10061

      892    10056    4                       IF TS_FIRST = TS_LAST THEN

  10056 10 001401   001100 236000 7                  LDQ     TS_FIRST
        10 001402   001101 116000 7                  CMPQ    TS_LAST
        10 001403   001411 601000 10                 TNZ     s:10059

      893    10057    4                          CALL TSE$ERROR(%E$T_PAGESUSPECT_OK);

  10057 10 001404   000066 630400 11                 EPPR0   54
        10 001405   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 001406   000000 701000 xent               TSX1    TSE$ERROR
        10 001407   000000 011000                    NOP     0
        10 001410   001432 710000 10                 TRA     s:10068

      894    10058    4                       ELSE
      895    10059    4                          CALL TSE$ERROR(%E$T_PAGES_SUSPECTOK);

  10059 10 001411   000070 630400 11                 EPPR0   56
        10 001412   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 001413   000000 701000 xent               TSX1    TSE$ERROR
        10 001414   000000 011000                    NOP     0
        10 001415   001432 710000 10                 TRA     s:10068

      896    10060    4                    ELSE      /* LAST PAGE IS BAD (PARTITIONED)  */
      897    10061    4                       IF TS_FIRST = TS_LAST THEN

  10061 10 001416   001100 236000 7                  LDQ     TS_FIRST
        10 001417   001101 116000 7                  CMPQ    TS_LAST
        10 001420   001426 601000 10                 TNZ     s:10064

      898    10062    4                          CALL TSE$ERROR(%E$T_PAGEPARTOK);

  10062 10 001421   000060 630400 11                 EPPR0   48
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:145  
        10 001422   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 001423   000000 701000 xent               TSX1    TSE$ERROR
        10 001424   000000 011000                    NOP     0
        10 001425   001432 710000 10                 TRA     s:10068

      899    10063    4                       ELSE
      900    10064    4                          CALL TSE$ERROR(%E$T_PAGES_PARTOK);

  10064 10 001426   000064 630400 11                 EPPR0   52
        10 001427   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 001430   000000 701000 xent               TSX1    TSE$ERROR
        10 001431   000000 011000                    NOP     0

      901    10065        /**/
      902    10066        /* ** Un-CVM PPUT at this point ** */
      903    10067        /**/
      904    10068    4                  VP = PPUT_OFFSET - %ISEGLO;

  10068 10 001432   200005 235100                    LDA     PPUT_OFFSET,,AUTO
        10 001433   000100 135007                    SBLA    64,DL
        10 001434   200003 755100                    STA     VP,,AUTO

      905    10069    4                  PPUT_CVM.V.PPNO# = -1;

  10069 10 001435   000001 336007                    LCQ     1,DL
        10 001436   000703 756000 7                  STQ     PPUT_CVM+3

      906    10070    5                  DO I = DBASE(PPUT_DESC) TO DBASE(PPUT_DESC) + DBOUND(PPUT_DESC) BY
             10070                           4096;

  10070 10 001437   001113 235000 7                  LDA     PPUT_DESC+1
        10 001440   001067 755000 7                  STA     I
        10 001441   001454 710000 10                 TRA     s:10074+2

      907    10071    5                     PPUT_CVM.V.VPNO# = VP;

  10071 10 001442   200003 720100                    LXL0    VP,,AUTO
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:146  
        10 001443   000704 440000 7                  SXL0    PPUT_CVM+4

      908    10072    5                     CALL M$CVM (PPUT_CVM);

  10072 10 001444   000700 630400 7                  EPPR0   PPUT_CVM
        10 001445   030011 713400                    CLIMB   12297
        10 001446   400000 401760                    pmme    nvectors=1

      909    10073    5                     VP = VP + 1;

  10073 10 001447   200003 235100                    LDA     VP,,AUTO
        10 001450   000001 035007                    ADLA    1,DL
        10 001451   200003 755100                    STA     VP,,AUTO

      910    10074    5                     END;   /* DO I */

  10074 10 001452   010000 236007                    LDQ     4096,DL
        10 001453   001067 056000 7                  ASQ     I
        10 001454   001112 236000 7                  LDQ     PPUT_DESC
        10 001455   000020 772000                    QRL     16
        10 001456   001113 036000 7                  ADLQ    PPUT_DESC+1
        10 001457   001442 604000 10                 TMI     s:10071
        10 001460   001067 116000 7                  CMPQ    I
        10 001461   001442 605000 10                 TPL     s:10071

      911    10075        /**/
      912    10076        /**/
      913    10077        /*E*    ERROR: TSS-E$T_PAGEPARTOK-0
      914    10078                MESSAGE: Page %U1 successfully partitioned
      915    10079                DESCRIPTION: THE SPECIFIED PAGE HAS BEEN MARKED AS BAD
      916    10080        */
      917    10081        /**/
      918    10082        /*E*    ERROR: TSS-E$T_PAGES_PARTOK-0
      919    10083                MESSAGE: Pages %U1-%U2 successfully partitioned
      920    10084                DESCRIPTION: THE SPECIFIED PAGES HAVE BEEN MARKED AS BAD
      921    10085        */
      922    10086        /**/
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:147  
      923    10087        /*E*    ERROR: TSS-E$T_PAGESUSPECT_OK-0
      924    10088                MESSAGE: Page %U1 marked as SUSPECT, will partition when released
      925    10089                DESCRIPTION: THE SPECIFIED PAGE HAS BEEN MARKED AS SUSPECT
      926    10090        */
      927    10091        /**/
      928    10092        /*E*    ERROR: TSS-E$T_PAGES_SUSPECTOK-0
      929    10093                MESSAGE: Pages %U1-%U2 marked as SUSPECT, will partition when released
      930    10094                DESCRIPTION: THE SPECIFIED PAGES HAVE BEEN MARKED AS SUSPECT
      931    10095        */
      932    10096        /**/
      933    10097        /**/
      934    10098    4               END;                        /* END CASE                           */

      935    10099        /**/
      936    10100    3   NEXT_PART:
      937    10101    3              CMD$ = PINCRW(CMD$,CMD$ -> TS$DEV.SIZE);

  10101 10 001462   001062 470400 7     NEXT_PART    LDP0    CMD$
        10 001463   000000 220100                    LDX0    0,,PR0
        10 001464   000000 636010                    EAQ     0,X0
        10 001465   001062 036000 7                  ADLQ    CMD$
        10 001466   001062 756000 7                  STQ     CMD$

      938    10102    3              END;

  10102 10 001467   001062 470400 7                  LDP0    CMD$
        10 001470   000000 720100                    LXL0    0,,PR0
        10 001471   000423 601000 10                 TNZ     s:9855

      939    10103    2           RETURN;

  10103 10 001472   200040 221300                    LDX1  ! RANGE_FLAG+1,,AUTO
        10 001473   000001 702211                    TSX2  ! 1,X1

      940    10104        /**/
      941    10105    2   CONFIG_ERR:
      942    10106    2           IF DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:148  

  10106 10 001474   000000 236007 xsym  CONFIG_ERR   LDQ     M$CONF,DL
        10 001475   000000 470400 11                 LDP0    0
        10 001476   000000 471500                    LDP1    0,,PR0
        10 001477   100000 473506                    LDP3    0,QL,PR1
        10 001500   300031 236100                    LDQ     25,,PR3
        10 001501   020000 316007                    CANQ    8192,DL
        10 001502   001506 600000 10                 TZE     s:10108

      943    10107    2              THEN CALL M$CLOSE(CLOSE_CONFIG);

  10107 10 001503   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 001504   050001 713400                    CLIMB   close
        10 001505   406000 401760                    pmme    nvectors=13

      944    10108    2           CALL TSE$ERROR (%E$T_PARTCONFIGERR);

  10108 10 001506   000072 630400 11                 EPPR0   58
        10 001507   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 001510   000000 701000 xent               TSX1    TSE$ERROR
        10 001511   000000 011000                    NOP     0

      945    10109    2           GOTO NEXT_PART;

  10109 10 001512   001462 710000 10                 TRA     NEXT_PART

      946    10110        /**/
      947    10111        /*E*    ERROR:   TSS-E$T_PARTCONFIGERR-0
      948    10112                MESSAGE0: Unable to access :CONFIG file to save partitioned
      949    10113                          status of last component partitioned.
      950    10114                DESCRIPTION: UNABLE TO SAVE STATUS OF COMPONENT IN :CONFIG */
      951    10115        /**/
      952    10116        /**/
      953    10117    2   PART_ERR:
      954    10118    2         SYSCONERR = B$TCB$->B$TCB.ALT$->B$ALT.ERR;

  10118 10 001513   000000 470400 xsym  PART_ERR     LDP0    B$TCB$
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:149  
        10 001514   000000 471500                    LDP1    0,,PR0
        10 001515   100102 236100                    LDQ     66,,PR1
        10 001516   003637 756000 7                  STQ     SYSCONERR

      955    10119        /**/
      956    10120    3           DO CASE (CMD$ -> TS$DEV.CODE);

  10120 10 001517   001062 471400 7                  LDP1    CMD$
        10 001520   100000 720100                    LXL0    0,,PR1
        10 001521   000007 100003                    CMPX0   7,DU
        10 001522   001524 602010 10                 TNC     s:10120+5,X0
        10 001523   001554 710000 10                 TRA     s:10134
        10 001524   001554 710000 10                 TRA     s:10134
        10 001525   001533 710000 10                 TRA     s:10122
        10 001526   001536 710000 10                 TRA     s:10124
        10 001527   001541 710000 10                 TRA     s:10126
        10 001530   001547 710000 10                 TRA     s:10130
        10 001531   001552 710000 10                 TRA     s:10132
        10 001532   001544 710000 10                 TRA     s:10128

      957    10121    3            CASE (TSS_DEV);

      958    10122    3              I = %E$T_DEVPARTERR;

  10122 10 001533   000354 235007                    LDA     236,DL
        10 001534   001067 755000 7                  STA     I
        10 001535   001554 710000 10                 TRA     s:10134

      959    10123    3            CASE (TSS_MPC);

      960    10124    3              I = %E$T_MPCPARTERR;

  10124 10 001536   000355 235007                    LDA     237,DL
        10 001537   001067 755000 7                  STA     I
        10 001540   001554 710000 10                 TRA     s:10134

      961    10125    3            CASE (TSS_FEP);
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:150  

      962    10126    3              I = %E$T_FEPPARTERR;

  10126 10 001541   000356 235007                    LDA     238,DL
        10 001542   001067 755000 7                  STA     I
        10 001543   001554 710000 10                 TRA     s:10134

      963    10127    3            CASE (TSS_IOM);

      964    10128    3              I = %E$T_IOMPARTERR;

  10128 10 001544   000400 235007                    LDA     256,DL
        10 001545   001067 755000 7                  STA     I
        10 001546   001554 710000 10                 TRA     s:10134

      965    10129    3            CASE (TSS_CHAN);

      966    10130    3              I = %E$T_CHANPARTERR;

  10130 10 001547   000357 235007                    LDA     239,DL
        10 001550   001067 755000 7                  STA     I
        10 001551   001554 710000 10                 TRA     s:10134

      967    10131    3            CASE (TSS_PAGES);

      968    10132    3              I = %E$T_PAGEPARTERR;

  10132 10 001552   000360 235007                    LDA     240,DL
        10 001553   001067 755000 7                  STA     I

      969    10133    3            END;

      970    10134    2           CALL TSE$ERROR(I);

  10134 10 001554   000055 630400 11                 EPPR0   45
        10 001555   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 001556   000000 701000 xent               TSX1    TSE$ERROR
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:151  
        10 001557   000000 011000                    NOP     0

      971    10135    2           CALL TSE$ERROR(0,SYSCONERR);  /* ERROR CODE FROM M$SYSCON           */

  10135 10 001560   000073 630400 11                 EPPR0   59
        10 001561   000020 631400 xsym               EPPR1   B_VECTNIL+16
        10 001562   000000 701000 xent               TSX1    TSE$ERROR
        10 001563   000000 011000                    NOP     0

      972    10136    2           GOTO NEXT_PART;

  10136 10 001564   001462 710000 10                 TRA     NEXT_PART

      973    10137        /**/
      974    10138        /*E*    ERROR: TSS-E$T_DEVPARTERR-0
      975    10139                MESSAGE: Unable to partition device %U1.
      976    10140                DESCRIPTION: CANT PARTITION THIS DEVICE   */
      977    10141        /**/
      978    10142        /*E*    ERROR: TSS-E$T_MPCPARTERR-0
      979    10143                MESSAGE: Unable to partition MPC %U1.
      980    10144                DESCRIPTION: CANT PARTITION THIS MPC   */
      981    10145        /**/
      982    10146        /*E*    ERROR: TSS-E$T_FEPPARTERR-0
      983    10147                MESSAGE: Unable to partition FEP %U1.
      984    10148                DESCRIPTION: CANT PARTITION THIS FEP   */
      985    10149        /**/
      986    10150        /*E*    ERROR: TSS-E$T_IOMPARTERR-0
      987    10151                MESSAGE: Unable to partition IOM %U1.
      988    10152                DESCRIPTION: CANT PARTITION THIS IOM   */
      989    10153        /**/
      990    10154        /*E*    ERROR: TSS-E$T_CHANPARTERR-0
      991    10155                MESSAGE: Unable to partition IOM%U1,CHAN%U2.
      992    10156                DESCRIPTION: UNABLE TO PARTITION THIS CHANNEL */
      993    10157        /**/
      994    10158        /*E*    ERROR: TSS-E$T_PAGEPARTERR-0
      995    10159                MESSAGE: Unable to partition Page %U1.
      996    10160                DESCRIPTION: CANT PARTITION THIS PAGE */
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:152  
      997    10161        /**/
      998    10162    2   END EXEC_PART;
      999    10163        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:153  
     1000    10164        /**/
     1001    10165    1   STUFF_BUF:  PROC(VALUE,BUFFER);

  10165 10 001565   200042 741300       STUFF_BUF    STX1  ! RANGE_FLAG+3,,AUTO

     1002    10166        /**/
     1003    10167    2   DCL 1 BUFFER,
     1004    10168    2         2 COUNT UBIN(9) UNAL,
     1005    10169    2         2 TEXT CHAR(31) UNAL;
     1006    10170    2   DCL 1 SCRATCH,
     1007    10171    2         2 COUNT UBIN(9) UNAL,
     1008    10172    2         2 TEXT CHAR(31) UNAL;
     1009    10173    2   DCL VALUE UBIN WORD;
     1010    10174        /**/
     1011    10175    2                    CALL BINCHAR(SCRATCH.TEXT,VALUE);

  10175 10 001566   200043 470500                    LDP0    @VALUE,,AUTO
        10 001567   000000 235100                    LDA     0,,PR0
        10 001570   000044 773000                    LRL     36
        10 001571   200056 757100                    STAQ    I+4,,AUTO
        10 001572   000100 301500                    BTD
        10 001573   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 001574   200045 230037                    NDSC9   SCRATCH,,AUTO            cn=1,s=nosgn,sf=0,n=31

     1012    10176    2                    J = 0;

  10176 10 001575   001070 450000 7                  STZ     J

     1013    10177    3                    DO WHILE (SUBSTR(SCRATCH.TEXT,J,1) = '0')  AND

  10177 10 001576   001600 710000 10                 TRA     s:10180

     1014    10178    3                             (J < SIZEC(SCRATCH.TEXT)-1);
     1015    10179    3                       J = J+1;

  10179 10 001577   001070 054000 7                  AOS     J

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:154  
     1016    10180    3                    END;

  10180 10 001600   001070 235000 7                  LDA     J
        10 001601   040000 106505                    CMPC    fill='040'O
        10 001602   200045 200001                    ADSC9   SCRATCH,A,AUTO           cn=1,n=1
        10 001603   000075 000001 11                 ADSC9   61                       cn=0,n=1
        10 001604   001607 601000 10                 TNZ     s:10181
        10 001605   000036 115007                    CMPA    30,DL
        10 001606   001577 604000 10                 TMI     s:10179

     1017    10181    2                    BUFFER.COUNT = SIZEC(SCRATCH.TEXT) - J;

  10181 10 001607   000037 236007                    LDQ     31,DL
        10 001610   001070 136000 7                  SBLQ    J
        10 001611   200056 756100                    STQ     I+4,,AUTO
        10 001612   200044 470500                    LDP0    @BUFFER,,AUTO
        10 001613   000100 101500                    MRL     fill='000'O
        10 001614   200056 000004                    ADSC9   I+4,,AUTO                cn=0,n=4
        10 001615   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1

     1018    10182    2                    CALL INSERT (BUFFER.TEXT,0,BUFFER.COUNT,

  10182 10 001616   000100 101500                    MRL     fill='000'O
        10 001617   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
        10 001620   200056 000002                    ADSC9   I+4,,AUTO                cn=0,n=2
        10 001621   200056 220100                    LDX0    I+4,,AUTO
        10 001622   000100 101500                    MRL     fill='000'O
        10 001623   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
        10 001624   200057 000002                    ADSC9   I+5,,AUTO                cn=0,n=2
        10 001625   200057 221100                    LDX1    I+5,,AUTO
        10 001626   001070 235000 7                  LDA     J
        10 001627   040140 100545                    MLR     fill='040'O
        10 001630   200045 200010                    ADSC9   SCRATCH,A,AUTO           cn=1,n=*X0
        10 001631   000000 200011                    ADSC9   0,,PR0                   cn=1,n=*X1

     1019    10183    2                      SUBSTR(SCRATCH.TEXT,J,BUFFER.COUNT));
     1020    10184        /**/
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:155  
     1021    10185    2   END STUFF_BUF;

  10185 10 001632   200042 221300                    LDX1  ! RANGE_FLAG+3,,AUTO
        10 001633   000001 702211                    TSX2  ! 1,X1

     1022    10186        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:156  
     1023    10187        /**/
     1024    10188    1   EXEC_RET: PROC;

  10188 10 001634   200040 741300       EXEC_RET     STX1  ! RANGE_FLAG+1,,AUTO

     1025    10189        /**/
     1026    10190    2           CMD$ = PINCRW(CMD$,SIZEW(TS$CMDWD));

  10190 10 001635   001062 236000 7                  LDQ     CMD$
        10 001636   000001 036003                    ADLQ    1,DU
        10 001637   001062 756000 7                  STQ     CMD$

     1027    10191    2           SYSCON_FPT.V.FUNCTION# = %RETURN#;

  10191 10 001640   002000 236003                    LDQ     1024,DU
        10 001641   000712 552040 7                  STBQ    SYSCON_FPT+4,'40'O

     1028    10192        /**/
     1029    10193    3           DO WHILE (CMD$ -> TS$DEV.CODE ~= 0);

  10193 10 001642   001062 470400 7                  LDP0    CMD$
        10 001643   000000 720100                    LXL0    0,,PR0
        10 001644   003074 600000 10                 TZE     s:10452

     1030    10194        /**/
     1031    10195    4              DO CASE (CMD$ -> TS$DEV.CODE);

  10195 10 001645   001062 470400 7                  LDP0    CMD$
        10 001646   000000 720100                    LXL0    0,,PR0
        10 001647   000014 100003                    CMPX0   12,DU
        10 001650   001652 602010 10                 TNC     s:10195+5,X0
        10 001651   002621 710000 10                 TRA     NEXT_RET
        10 001652   002621 710000 10                 TRA     NEXT_RET
        10 001653   001666 710000 10                 TRA     s:10198
        10 001654   001746 710000 10                 TRA     s:10221
        10 001655   002033 710000 10                 TRA     s:10245
        10 001656   002173 710000 10                 TRA     s:10282
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:157  
        10 001657   002312 710000 10                 TRA     s:10313
        10 001660   002142 710000 10                 TRA     s:10268
        10 001661   002621 710000 10                 TRA     NEXT_RET
        10 001662   002621 710000 10                 TRA     NEXT_RET
        10 001663   002621 710000 10                 TRA     NEXT_RET
        10 001664   002540 710000 10                 TRA     s:10397
        10 001665   002571 710000 10                 TRA     s:10409

     1032    10196        /**/
     1033    10197    4               CASE (TSS_DEV);

     1034    10198    4                 SYSCON_FPT.V.COMPONENT# = %DVC#;

  10198 10 001666   000002 236003                    LDQ     2,DU
        10 001667   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1035    10199    4                 SYSCON_FPT.V.DEVNM# = CMD$ -> TS$DEV.DEVNAME;

  10199 10 001670   040000 100500                    MLR     fill='040'O
        10 001671   000001 000010                    ADSC9   1,,PR0                   cn=0,n=8
        10 001672   000713 000010 7                  ADSC9   SYSCON_FPT+5             cn=0,n=8

     1036    10200    4                 SUB_BUF_1.COUNT = SIZEC(TS$DEV.DEVNAME);

  10200 10 001673   010000 236003                    LDQ     4096,DU
        10 001674   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1037    10201    4                 SUB_BUF_1.TEXT = CMD$ -> TS$DEV.DEVNAME;

  10201 10 001675   040000 100500                    MLR     fill='040'O
        10 001676   000001 000010                    ADSC9   1,,PR0                   cn=0,n=8
        10 001677   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     1038    10202        /**/
     1039    10203    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (RET_ERR);

  10203 10 001700   000706 630400 7                  EPPR0   SYSCON_FPT
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:158  
        10 001701   470007 713400                    CLIMB   alt,+28679
        10 001702   400400 401760                    pmme    nvectors=2
        10 001703   003115 702000 10                 TSX2    RET_ERR

     1040    10204        /**/
     1041    10205    4                 CALL TSE$ERROR(%E$T_DEVRETOK);

  10205 10 001704   000077 630400 11                 EPPR0   63
        10 001705   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 001706   000000 701000 xent               TSX1    TSE$ERROR
        10 001707   000000 011000                    NOP     0

     1042    10206        /**/
     1043    10207    4                 CONFIG_KEY.COUNT = SIZEC(TS$DEV.DEVNAME);

  10207 10 001710   010000 236003                    LDQ     4096,DU
        10 001711   003742 552040 7                  STBQ    CONFIG_KEY,'40'O

     1044    10208    4                 CONFIG_KEY.TEXT = CMD$ -> TS$DEV.DEVNAME;

  10208 10 001712   001062 470400 7                  LDP0    CMD$
        10 001713   040000 100500                    MLR     fill='040'O
        10 001714   000001 000010                    ADSC9   1,,PR0                   cn=0,n=8
        10 001715   003742 200010 7                  ADSC9   CONFIG_KEY               cn=1,n=8

     1045    10209    4                 CALL M$OPEN (OPEN_CONFIG) ALTRET (CONFIG_ERR);

  10209 10 001716   000036 630400 7                  EPPR0   OPEN_CONFIG
        10 001717   450000 713400                    CLIMB   alt,open
        10 001720   410400 401760                    pmme    nvectors=18
        10 001721   003076 702000 10                 TSX2    CONFIG_ERR

     1046    10210    4                 CALL M$READ (READ_CONFIG) ALTRET (CONFIG_ERR);

  10210 10 001722   000224 630400 7                  EPPR0   READ_CONFIG
        10 001723   440000 713400                    CLIMB   alt,read
        10 001724   401400 401760                    pmme    nvectors=4
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:159  
        10 001725   003076 702000 10                 TSX2    CONFIG_ERR

     1047    10211    4                 CONFIG$ -> TD$DEV.FLAGS.DOWN = NO;

  10211 10 001726   001066 470400 7                  LDP0    CONFIG$
        10 001727   000031 236000 xsym               LDQ     B_VECTNIL+25
        10 001730   000011 356100                    ANSQ    9,,PR0

     1048    10212    4                 WRITE_CONFIG.BUF_.BOUND = SIZEV(TD$DEV);

  10212 10 001731   000650 236000 7                  LDQ     WRITE_CONFIG+4
        10 001732   177777 376007                    ANQ     65535,DL
        10 001733   000035 276000 11                 ORQ     29
        10 001734   000650 756000 7                  STQ     WRITE_CONFIG+4

     1049    10213    4                 CALL M$WRITE (WRITE_CONFIG) ALTRET (CONFIG_ERR);

  10213 10 001735   000644 630400 7                  EPPR0   WRITE_CONFIG
        10 001736   440001 713400                    CLIMB   alt,write
        10 001737   401400 401760                    pmme    nvectors=4
        10 001740   003076 702000 10                 TSX2    CONFIG_ERR

     1050    10214    4                 CALL M$CLOSE (CLOSE_CONFIG) ALTRET (CONFIG_ERR);

  10214 10 001741   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 001742   450001 713400                    CLIMB   alt,close
        10 001743   406000 401760                    pmme    nvectors=13
        10 001744   003076 702000 10                 TSX2    CONFIG_ERR
        10 001745   002621 710000 10                 TRA     NEXT_RET

     1051    10215        /**/
     1052    10216        /*E*    ERROR: TSS-E$T_DEVRETOK-0
     1053    10217                MESSAGE: Device %U1 successfully returned
     1054    10218                DESCRIPTION: THE SPECIFIED DEVICE NOW RETURNED TO SYSTEM USE  */
     1055    10219        /**/
     1056    10220    4               CASE (TSS_MPC);

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:160  
     1057    10221    4                 SYSCON_FPT.V.COMPONENT# = %MPC#;

  10221 10 001746   000003 236003                    LDQ     3,DU
        10 001747   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1058    10222    4                 SYSCON_FPT.V.DEVNM# = CMD$ -> TS$MPC.MPCNAME;

  10222 10 001750   040000 100500                    MLR     fill='040'O
        10 001751   000001 000010                    ADSC9   1,,PR0                   cn=0,n=8
        10 001752   000713 000010 7                  ADSC9   SYSCON_FPT+5             cn=0,n=8

     1059    10223    4                 SUB_BUF_1.COUNT = 4;

  10223 10 001753   004000 236003                    LDQ     2048,DU
        10 001754   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1060    10224    4                 SUB_BUF_1.TEXT = CMD$ -> TS$MPC.MPCNAME;

  10224 10 001755   040000 100500                    MLR     fill='040'O
        10 001756   000001 000010                    ADSC9   1,,PR0                   cn=0,n=8
        10 001757   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     1061    10225        /**/
     1062    10226    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (RET_ERR);

  10226 10 001760   000706 630400 7                  EPPR0   SYSCON_FPT
        10 001761   470007 713400                    CLIMB   alt,+28679
        10 001762   400400 401760                    pmme    nvectors=2
        10 001763   003115 702000 10                 TSX2    RET_ERR

     1063    10227        /**/
     1064    10228    4                 CALL TSE$ERROR(%E$T_MPCRETOK);

  10228 10 001764   000101 630400 11                 EPPR0   65
        10 001765   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 001766   000000 701000 xent               TSX1    TSE$ERROR
        10 001767   000000 011000                    NOP     0
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:161  

     1065    10229        /**/
     1066    10230    4                 CONFIG_KEY.COUNT = SIZEC(TS$MPC.MPCNAME);

  10230 10 001770   010000 236003                    LDQ     4096,DU
        10 001771   003742 552040 7                  STBQ    CONFIG_KEY,'40'O

     1067    10231    4                 CONFIG_KEY.TEXT = CMD$ -> TS$MPC.MPCNAME;

  10231 10 001772   001062 470400 7                  LDP0    CMD$
        10 001773   040000 100500                    MLR     fill='040'O
        10 001774   000001 000010                    ADSC9   1,,PR0                   cn=0,n=8
        10 001775   003742 200010 7                  ADSC9   CONFIG_KEY               cn=1,n=8

     1068    10232    4                 CALL M$OPEN (OPEN_CONFIG) ALTRET (CONFIG_ERR);

  10232 10 001776   000036 630400 7                  EPPR0   OPEN_CONFIG
        10 001777   450000 713400                    CLIMB   alt,open
        10 002000   410400 401760                    pmme    nvectors=18
        10 002001   003076 702000 10                 TSX2    CONFIG_ERR

     1069    10233    4                 CALL M$READ (READ_CONFIG) ALTRET (CONFIG_ERR);

  10233 10 002002   000224 630400 7                  EPPR0   READ_CONFIG
        10 002003   440000 713400                    CLIMB   alt,read
        10 002004   401400 401760                    pmme    nvectors=4
        10 002005   003076 702000 10                 TSX2    CONFIG_ERR

     1070    10234    4                 CONFIG$ -> TD$MPC.FLAGS.DOWN = NO;

  10234 10 002006   001066 470400 7                  LDP0    CONFIG$
        10 002007   000102 236000 11                 LDQ     66
        10 002010   000012 356100                    ANSQ    10,,PR0

     1071    10235    4                 WRITE_CONFIG.BUF_.BOUND = SIZEC(TD$MPC) +

  10235 10 002011   001066 470400 7                  LDP0    CONFIG$
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:162  
        10 002012   000012 236100                    LDQ     10,,PR0
        10 002013   000017 772000                    QRL     15
        10 002014   000040 376000 11                 ANQ     32
        10 002015   000073 036007                    ADLQ    59,DL
        10 002016   000020 736000                    QLS     16
        10 002017   000650 676000 7                  ERQ     WRITE_CONFIG+4
        10 002020   000034 376000 xsym               ANQ     B_VECTNIL+28
        10 002021   000650 656000 7                  ERSQ    WRITE_CONFIG+4

     1072    10236    4                   (SIZEC(TD$MPC.DEVNAME(0)) * (CONFIG$ -> TD$MPC.NUMDEVS-1)) - 1 ;
     1073    10237    4                 CALL M$WRITE (WRITE_CONFIG) ALTRET (CONFIG_ERR);

  10237 10 002022   000644 630400 7                  EPPR0   WRITE_CONFIG
        10 002023   440001 713400                    CLIMB   alt,write
        10 002024   401400 401760                    pmme    nvectors=4
        10 002025   003076 702000 10                 TSX2    CONFIG_ERR

     1074    10238    4                 CALL M$CLOSE (CLOSE_CONFIG) ALTRET (CONFIG_ERR);

  10238 10 002026   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 002027   450001 713400                    CLIMB   alt,close
        10 002030   406000 401760                    pmme    nvectors=13
        10 002031   003076 702000 10                 TSX2    CONFIG_ERR
        10 002032   002621 710000 10                 TRA     NEXT_RET

     1075    10239        /**/
     1076    10240        /*E*    ERROR: TSS-E$T_MPCRETOK-0
     1077    10241                MESSAGE: MPC %U1 successfully returned
     1078    10242                DESCRIPTION: THE SPECIFIED MPC HAS BEEN RETURNED */
     1079    10243        /**/
     1080    10244    4               CASE (TSS_FEP);

     1081    10245    4                 SYSCON_FPT.V.COMPONENT# = %FEP##;

  10245 10 002033   000004 236003                    LDQ     4,DU
        10 002034   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:163  
     1082    10246    4                 SYSCON_FPT.V.CHAN# = CMD$ -> TS$FEP.FEP;

  10246 10 002035   000002 236100                    LDQ     2,,PR0
        10 002036   000712 552004 7                  STBQ    SYSCON_FPT+4,'04'O

     1083    10247    4                 SUB_BUF_1.COUNT = CMD$->TS$FEP.LEN + 3;

  10247 10 002037   000001 236100                    LDQ     1,,PR0
        10 002040   000022 772000                    QRL     18
        10 002041   000003 036007                    ADLQ    3,DL
        10 002042   000033 736000                    QLS     27
        10 002043   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1084    10248    4                 SUB_BUF_1.TEXT = 'FEP';

  10248 10 002044   040000 100400                    MLR     fill='040'O
        10 002045   000300 000003 8                  ADSC9   TEXTC_VEC+6              cn=0,n=3
        10 002046   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     1085    10249    4                CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,CMD$->TS$FEP.LEN),CMD$ -> TS$FEP.
             10249                          FEP);

  10249 10 002047   000001 220100                    LDX0    1,,PR0
        10 002050   000002 236100                    LDQ     2,,PR0
        10 002051   777777 376007                    ANQ     -1,DL
        10 002052   000000 235003                    LDA     0,DU
        10 002053   200056 757100                    STAQ    I+4,,AUTO
        10 002054   000040 301500                    BTD
        10 002055   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 002056   003746 030010 7                  NDSC9   SUB_BUF_1+1              cn=0,s=nosgn,sf=0,n=*X0

     1086    10250        /**/
     1087    10251    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (RET_ERR);

  10251 10 002057   000706 630400 7                  EPPR0   SYSCON_FPT
        10 002060   470007 713400                    CLIMB   alt,+28679
        10 002061   400400 401760                    pmme    nvectors=2
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:164  
        10 002062   003115 702000 10                 TSX2    RET_ERR

     1088    10252        /**/
     1089    10253    4                 CALL TSE$ERROR (%E$T_FEPRETOK);

  10253 10 002063   000104 630400 11                 EPPR0   68
        10 002064   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 002065   000000 701000 xent               TSX1    TSE$ERROR
        10 002066   000000 011000                    NOP     0

     1090    10254    4                 CONFIG_KEY.COUNT = 4;

  10254 10 002067   004000 236003                    LDQ     2048,DU
        10 002070   003742 552040 7                  STBQ    CONFIG_KEY,'40'O

     1091    10255    4                 CONFIG_KEY.TEXT = 'IOM';

  10255 10 002071   040000 100400                    MLR     fill='040'O
        10 002072   000301 000003 8                  ADSC9   TEXTC_VEC+7              cn=0,n=3
        10 002073   003742 200010 7                  ADSC9   CONFIG_KEY               cn=1,n=8

     1092    10256    4                 CALL BINCHAR(SUBSTR(CONFIG_KEY.TEXT,3,CMD$->TS$FEP.LEN),CMD$->TS$FEP.
             10256                          IOM);

  10256 10 002074   001062 470400 7                  LDP0    CMD$
        10 002075   000001 220100                    LDX0    1,,PR0
        10 002076   000001 236100                    LDQ     1,,PR0
        10 002077   777777 376007                    ANQ     -1,DL
        10 002100   000000 235003                    LDA     0,DU
        10 002101   200056 757100                    STAQ    I+4,,AUTO
        10 002102   000040 301500                    BTD
        10 002103   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 002104   003743 030010 7                  NDSC9   CONFIG_KEY+1             cn=0,s=nosgn,sf=0,n=*X0

     1093    10257    4                 CALL M$OPEN(OPEN_CONFIG) ALTRET(CONFIG_ERR);

  10257 10 002105   000036 630400 7                  EPPR0   OPEN_CONFIG
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:165  
        10 002106   450000 713400                    CLIMB   alt,open
        10 002107   410400 401760                    pmme    nvectors=18
        10 002110   003076 702000 10                 TSX2    CONFIG_ERR

     1094    10258    4                 CALL M$READ(READ_CONFIG) ALTRET(CONFIG_ERR);

  10258 10 002111   000224 630400 7                  EPPR0   READ_CONFIG
        10 002112   440000 713400                    CLIMB   alt,read
        10 002113   401400 401760                    pmme    nvectors=4
        10 002114   003076 702000 10                 TSX2    CONFIG_ERR

     1095    10259    4                 CONFIG$->TD$IOM.FLAGS.DOWN(CMD$->TS$FEP.CHAN) = NO;

  10259 10 002115   001062 470400 7                  LDP0    CMD$
        10 002116   000002 236100                    LDQ     2,,PR0
        10 002117   000021 772000                    QRL     17
        10 002120   000043 376000 11                 ANQ     35
        10 002121   001066 471400 7                  LDP1    CONFIG$
        10 002122   003106 060400                    CSL     bolr='003'O
        10 002123   000002 000001 xsym               BDSC    B_VECTNIL+2              by=0,bit=0,n=1
        10 002124   100400 000001                    BDSC    256,Q,PR1                by=0,bit=0,n=1

     1096    10260    4                 WRITE_CONFIG.BUF_.BOUND = SIZEV(TD$IOM);

  10260 10 002125   000650 236000 7                  LDQ     WRITE_CONFIG+4
        10 002126   177777 376007                    ANQ     65535,DL
        10 002127   000044 276000 11                 ORQ     36
        10 002130   000650 756000 7                  STQ     WRITE_CONFIG+4

     1097    10261    4                 CALL M$WRITE(WRITE_CONFIG) ALTRET(CONFIG_ERR);

  10261 10 002131   000644 630400 7                  EPPR0   WRITE_CONFIG
        10 002132   440001 713400                    CLIMB   alt,write
        10 002133   401400 401760                    pmme    nvectors=4
        10 002134   003076 702000 10                 TSX2    CONFIG_ERR

     1098    10262    4                 CALL M$CLOSE(CLOSE_CONFIG) ALTRET(CONFIG_ERR);
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:166  

  10262 10 002135   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 002136   450001 713400                    CLIMB   alt,close
        10 002137   406000 401760                    pmme    nvectors=13
        10 002140   003076 702000 10                 TSX2    CONFIG_ERR
        10 002141   002621 710000 10                 TRA     NEXT_RET

     1099    10263        /*E*    ERROR:   TSS-E$T_FEPRETOK-0
     1100    10264                MESSAGE: FEP %U1 successfully returned
     1101    10265                DESCRIPTION: THE SPECIFIED FEP HAS BEEN RETURNED */
     1102    10266        /**/
     1103    10267    4               CASE (TSS_IOM);

     1104    10268    4                 SYSCON_FPT.V.COMPONENT# = %IOM##;

  10268 10 002142   000005 236003                    LDQ     5,DU
        10 002143   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1105    10269    4                 SYSCON_FPT.V.IOM# = CMD$ -> TS$IOM.IOM;

  10269 10 002144   000001 236100                    LDQ     1,,PR0
        10 002145   000011 736000                    QLS     9
        10 002146   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

     1106    10270    4                 SUB_BUF_1.COUNT = 5;

  10270 10 002147   005000 236003                    LDQ     2560,DU
        10 002150   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1107    10271    4                 SUB_BUF_1.TEXT = 'IOM#';

  10271 10 002151   040000 100400                    MLR     fill='040'O
        10 002152   000302 000004 8                  ADSC9   TEXTC_VEC+8              cn=0,n=4
        10 002153   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     1108    10272    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,4,1),CMD$ -> TS$IOM.IOM);

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:167  
  10272 10 002154   000001 235100                    LDA     1,,PR0
        10 002155   000044 773000                    LRL     36
        10 002156   200056 757100                    STAQ    I+4,,AUTO
        10 002157   000000 301500                    BTD
        10 002160   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 002161   003746 230001 7                  NDSC9   SUB_BUF_1+1              cn=1,s=nosgn,sf=0,n=1

     1109    10273        /**/
     1110    10274    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (RET_ERR);

  10274 10 002162   000706 630400 7                  EPPR0   SYSCON_FPT
        10 002163   470007 713400                    CLIMB   alt,+28679
        10 002164   400400 401760                    pmme    nvectors=2
        10 002165   003115 702000 10                 TSX2    RET_ERR

     1111    10275        /**/
     1112    10276    4                 CALL TSE$ERROR (%E$T_IOMRETOK);

  10276 10 002166   000106 630400 11                 EPPR0   70
        10 002167   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 002170   000000 701000 xent               TSX1    TSE$ERROR
        10 002171   000000 011000                    NOP     0
        10 002172   002621 710000 10                 TRA     NEXT_RET

     1113    10277        /*E*    ERROR:   TSS-E$T_IOMRETOK-0
     1114    10278                MESSAGE: IOM %U1 successfully returned
     1115    10279                DESCRIPTION: THE SPECIFIED IOM HAS BEEN RETURNED */
     1116    10280        /**/
     1117    10281    4               CASE (TSS_CHAN);

     1118    10282    4                 SYSCON_FPT.V.COMPONENT# = %CHANNEL#;

  10282 10 002173   000001 236003                    LDQ     1,DU
        10 002174   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1119    10283    5                 DO I = CMD$ -> TS$CHAN.LOCHAN TO CMD$ -> TS$CHAN.HICHAN;

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:168  
  10283 10 002175   000002 235100                    LDA     2,,PR0
        10 002176   001067 755000 7                  STA     I
        10 002177   002304 710000 10                 TRA     s:10306+1

     1120    10284    5                    SYSCON_FPT.V.IOM# = CMD$ -> TS$CHAN.IOM;

  10284 10 002200   001062 470400 7                  LDP0    CMD$
        10 002201   000001 236100                    LDQ     1,,PR0
        10 002202   000011 736000                    QLS     9
        10 002203   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

     1121    10285    5                    SYSCON_FPT.V.CHAN# = I;

  10285 10 002204   001067 236000 7                  LDQ     I
        10 002205   000712 552004 7                  STBQ    SYSCON_FPT+4,'04'O

     1122    10286    5                    CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,0,1),CMD$ -> TS$CHAN.IOM);

  10286 10 002206   000001 235100                    LDA     1,,PR0
        10 002207   000044 773000                    LRL     36
        10 002210   200056 757100                    STAQ    I+4,,AUTO
        10 002211   000000 301500                    BTD
        10 002212   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 002213   003745 230001 7                  NDSC9   SUB_BUF_1                cn=1,s=nosgn,sf=0,n=1

     1123    10287    5                    SUB_BUF_1.COUNT = 1;

  10287 10 002214   001000 236003                    LDQ     512,DU
        10 002215   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1124    10288    5                    CALL BINCHAR(SUBSTR(SUB_BUF_2.TEXT,0,3),I);

  10288 10 002216   000000 301400                    BTD
        10 002217   001067 000004 7                  NDSC9   I                        cn=0,s=lsgnf,sf=0,n=4
        10 002220   003755 230003 7                  NDSC9   SUB_BUF_2                cn=1,s=nosgn,sf=0,n=3

     1125    10289    5                    SUB_BUF_2.COUNT = 3;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:169  

  10289 10 002221   003000 236003                    LDQ     1536,DU
        10 002222   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

     1126    10290        /**/
     1127    10291    5                    CALL M$SYSCON (SYSCON_FPT) ALTRET (RET_ERR);

  10291 10 002223   000706 630400 7                  EPPR0   SYSCON_FPT
        10 002224   470007 713400                    CLIMB   alt,+28679
        10 002225   400400 401760                    pmme    nvectors=2
        10 002226   003115 702000 10                 TSX2    RET_ERR

     1128    10292        /**/
     1129    10293    5                    CALL TSE$ERROR(%E$T_CHANRETOK);

  10293 10 002227   000110 630400 11                 EPPR0   72
        10 002230   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 002231   000000 701000 xent               TSX1    TSE$ERROR
        10 002232   000000 011000                    NOP     0

     1130    10294        /**/
     1131    10295    5                    CONFIG_KEY.COUNT = 4;

  10295 10 002233   004000 236003                    LDQ     2048,DU
        10 002234   003742 552040 7                  STBQ    CONFIG_KEY,'40'O

     1132    10296    5                    CONFIG_KEY.TEXT = 'IOM';

  10296 10 002235   040000 100400                    MLR     fill='040'O
        10 002236   000301 000003 8                  ADSC9   TEXTC_VEC+7              cn=0,n=3
        10 002237   003742 200010 7                  ADSC9   CONFIG_KEY               cn=1,n=8

     1133    10297    5                    CALL BINCHAR(SUBSTR(CONFIG_KEY.TEXT,3,1),

  10297 10 002240   001062 470400 7                  LDP0    CMD$
        10 002241   000001 235100                    LDA     1,,PR0
        10 002242   000044 773000                    LRL     36
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:170  
        10 002243   200056 757100                    STAQ    I+4,,AUTO
        10 002244   000000 301500                    BTD
        10 002245   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 002246   003743 030001 7                  NDSC9   CONFIG_KEY+1             cn=0,s=nosgn,sf=0,n=1

     1134    10298    5                      CMD$ -> TS$CHAN.IOM);
     1135    10299    5                    CALL M$OPEN (OPEN_CONFIG) ALTRET (CONFIG_ERR);

  10299 10 002247   000036 630400 7                  EPPR0   OPEN_CONFIG
        10 002250   450000 713400                    CLIMB   alt,open
        10 002251   410400 401760                    pmme    nvectors=18
        10 002252   003076 702000 10                 TSX2    CONFIG_ERR

     1136    10300    5                    CALL M$READ (READ_CONFIG) ALTRET (CONFIG_ERR);

  10300 10 002253   000224 630400 7                  EPPR0   READ_CONFIG
        10 002254   440000 713400                    CLIMB   alt,read
        10 002255   401400 401760                    pmme    nvectors=4
        10 002256   003076 702000 10                 TSX2    CONFIG_ERR

     1137    10301    5                    CONFIG$ -> TD$IOM.FLAGS.DOWN(I) = NO;

  10301 10 002257   001067 235000 7                  LDA     I
        10 002260   000001 735000                    ALS     1
        10 002261   002263 605000 10                 TPL     s:10301+4
        10 002262   000044 035003                    ADLA    36,DU
        10 002263   001066 470400 7                  LDP0    CONFIG$
        10 002264   003105 060400                    CSL     bolr='003'O
        10 002265   000002 000001 xsym               BDSC    B_VECTNIL+2              by=0,bit=0,n=1
        10 002266   000400 000001                    BDSC    256,A,PR0                by=0,bit=0,n=1

     1138    10302    5                    WRITE_CONFIG.BUF_.BOUND = SIZEV(TD$IOM);

  10302 10 002267   000650 236000 7                  LDQ     WRITE_CONFIG+4
        10 002270   177777 376007                    ANQ     65535,DL
        10 002271   000044 276000 11                 ORQ     36
        10 002272   000650 756000 7                  STQ     WRITE_CONFIG+4
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:171  

     1139    10303    5                    CALL M$WRITE (WRITE_CONFIG) ALTRET (CONFIG_ERR);

  10303 10 002273   000644 630400 7                  EPPR0   WRITE_CONFIG
        10 002274   440001 713400                    CLIMB   alt,write
        10 002275   401400 401760                    pmme    nvectors=4
        10 002276   003076 702000 10                 TSX2    CONFIG_ERR

     1140    10304    5                    CALL M$CLOSE (CLOSE_CONFIG) ALTRET (CONFIG_ERR);

  10304 10 002277   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 002300   450001 713400                    CLIMB   alt,close
        10 002301   406000 401760                    pmme    nvectors=13
        10 002302   003076 702000 10                 TSX2    CONFIG_ERR

     1141    10305        /**/
     1142    10306    5                    END;

  10306 10 002303   001067 054000 7                  AOS     I
        10 002304   001062 470400 7                  LDP0    CMD$
        10 002305   000003 236100                    LDQ     3,,PR0
        10 002306   002200 604000 10                 TMI     s:10284
        10 002307   001067 116000 7                  CMPQ    I
        10 002310   002200 605000 10                 TPL     s:10284
        10 002311   002621 710000 10                 TRA     NEXT_RET

     1143    10307        /**/
     1144    10308        /*E*    ERROR: TSS-E$T_CHANRETOK-0
     1145    10309                MESSAGE: IOM%U1,CHAN%U2 successfully returned
     1146    10310                DESCRIPTION: THE SPECIFIED CHANNEL HAS BEEN RETURNED TO SERVICE */
     1147    10311        /**/
     1148    10312    4               CASE (TSS_PAGES);

     1149    10313    4                 TS_FIRST = CMD$->TS$PAGES.LOPAGE;

  10313 10 002312   000001 235100                    LDA     1,,PR0
        10 002313   001100 755000 7                  STA     TS_FIRST
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:172  

     1150    10314    5                 DO I = CMD$ -> TS$PAGES.LOPAGE TO CMD$ -> TS$PAGES.HIPAGE;

  10314 10 002314   000001 235100                    LDA     1,,PR0
        10 002315   001067 755000 7                  STA     I
        10 002316   002463 710000 10                 TRA     s:10373+1

     1151    10315    5                    BADPP_FPT.V.PPNO# = I;

  10315 10 002317   001067 235000 7                  LDA     I
        10 002320   000662 755000 7                  STA     BADPP_FPT+2

     1152    10316        /**/
     1153    10317    5                    CALL M$GOODPP (BADPP_FPT) ALTRET (PAGE_ERR);

  10317 10 002321   000660 630400 7                  EPPR0   BADPP_FPT
        10 002322   430020 713400                    CLIMB   alt,+12304
        10 002323   400000 401760                    pmme    nvectors=1
        10 002324   002375 702000 10                 TSX2    PAGE_ERR

     1154    10318        /**/
     1155    10319    5                    IF I = CMD$->TS$PAGES.LOPAGE THEN

  10319 10 002325   001062 470400 7                  LDP0    CMD$
        10 002326   001067 236000 7                  LDQ     I
        10 002327   002334 604000 10                 TMI     s:10322
        10 002330   000001 116100                    CMPQ    1,,PR0
        10 002331   002334 601000 10                 TNZ     s:10322

     1156    10320    5                      RETURNOK.PREVIOUS = TRUE;

  10320 10 002332   400000 236003                    LDQ     -131072,DU
        10 002333   001106 256000 7                  ORSQ    SUSPECT

     1157    10321        /**/
     1158    10322    5                    IF  NOT RETURNOK.PREVIOUS THEN

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:173  
  10322 10 002334   001106 234000 7                  SZN     SUSPECT
        10 002335   002372 604000 10                 TMI     s:10335

     1159    10323    6                       DO;

     1160    10324    6                       RETURNOK.PREVIOUS = TRUE;

  10324 10 002336   400000 236003                    LDQ     -131072,DU
        10 002337   001106 256000 7                  ORSQ    SUSPECT

     1161    10325    6                       CALL STUFF_BUF (TS_FIRST,SUB_BUF_1);

  10325 10 002340   000054 236000 11                 LDQ     44
        10 002341   200044 756100                    STQ     @BUFFER,,AUTO
        10 002342   000056 236000 11                 LDQ     46
        10 002343   200043 756100                    STQ     @VALUE,,AUTO
        10 002344   001565 701000 10                 TSX1    STUFF_BUF
        10 002345   000000 011000                    NOP     0

     1162    10326    7                       IF TS_FIRST = TS_LAST THEN DO;

  10326 10 002346   001100 236000 7                  LDQ     TS_FIRST
        10 002347   001101 116000 7                  CMPQ    TS_LAST
        10 002350   002356 601000 10                 TNZ     s:10330

     1163    10327    7                         CALL TSE$ERROR(%E$T_NOTBADPP);

  10327 10 002351   000112 630400 11                 EPPR0   74
        10 002352   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 002353   000000 701000 xent               TSX1    TSE$ERROR
        10 002354   000000 011000                    NOP     0

     1164    10328    7                         END;

  10328 10 002355   002370 710000 10                 TRA     s:10333

     1165    10329    7                       ELSE DO;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:174  

     1166    10330    7                         CALL STUFF_BUF (TS_LAST,SUB_BUF_2);

  10330 10 002356   000061 236000 11                 LDQ     49
        10 002357   200044 756100                    STQ     @BUFFER,,AUTO
        10 002360   000062 236000 11                 LDQ     50
        10 002361   200043 756100                    STQ     @VALUE,,AUTO
        10 002362   001565 701000 10                 TSX1    STUFF_BUF
        10 002363   000000 011000                    NOP     0

     1167    10331    7                         CALL TSE$ERROR(%E$T_NOTBADPPS);

  10331 10 002364   000114 630400 11                 EPPR0   76
        10 002365   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 002366   000000 701000 xent               TSX1    TSE$ERROR
        10 002367   000000 011000                    NOP     0

     1168    10332    7                         END;

     1169    10333    6                       TS_FIRST = I;

  10333 10 002370   001067 235000 7                  LDA     I
        10 002371   001100 755000 7                  STA     TS_FIRST

     1170    10334    6                       END;

     1171    10335    5                    TS_LAST = I;

  10335 10 002372   001067 235000 7                  LDA     I
        10 002373   001101 755000 7                  STA     TS_LAST

     1172    10336        /**/
     1173    10337    6                    DO WHILE('0'B);        /* NEVER                              */

  10337 10 002374   002462 710000 10                 TRA     s:10373

     1174    10338    6                 PAGE_ERR:
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:175  
     1175    10339    6                       IF I = CMD$->TS$PAGES.LOPAGE THEN

  10339 10 002375   001062 470400 7     PAGE_ERR     LDP0    CMD$
        10 002376   001067 236000 7                  LDQ     I
        10 002377   002404 604000 10                 TMI     s:10342
        10 002400   000001 116100                    CMPQ    1,,PR0
        10 002401   002404 601000 10                 TNZ     s:10342

     1176    10340    6                         RETURNOK.PREVIOUS = FALSE;

  10340 10 002402   000031 236000 xsym               LDQ     B_VECTNIL+25
        10 002403   001106 356000 7                  ANSQ    SUSPECT

     1177    10341        /**/
     1178    10342    6                       IF B$TCB$->B$TCB.ALT$->B$ALT.ERR.CODE = %E$NOTBADPP

  10342 10 002404   000000 471400 xsym               LDP1    B$TCB$
        10 002405   100000 473500                    LDP3    0,,PR1
        10 002406   300102 236100                    LDQ     66,,PR3
        10 002407   377770 376007                    ANQ     131064,DL
        10 002410   012000 116007                    CMPQ    5120,DL
        10 002411   002453 601000 10                 TNZ     s:10360

     1179    10343    7                          THEN DO;

     1180    10344    7                             IF  RETURNOK.PREVIOUS THEN

  10344 10 002412   001106 234000 7                  SZN     SUSPECT
        10 002413   002450 605000 10                 TPL     s:10357

     1181    10345    8                                DO;

     1182    10346    8                                RETURNOK.PREVIOUS = FALSE;

  10346 10 002414   000031 236000 xsym               LDQ     B_VECTNIL+25
        10 002415   001106 356000 7                  ANSQ    SUSPECT

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:176  
     1183    10347    8                                CALL STUFF_BUF (TS_FIRST,SUB_BUF_1);

  10347 10 002416   000054 236000 11                 LDQ     44
        10 002417   200044 756100                    STQ     @BUFFER,,AUTO
        10 002420   000056 236000 11                 LDQ     46
        10 002421   200043 756100                    STQ     @VALUE,,AUTO
        10 002422   001565 701000 10                 TSX1    STUFF_BUF
        10 002423   000000 011000                    NOP     0

     1184    10348    9                                IF TS_FIRST = TS_LAST THEN DO;

  10348 10 002424   001100 236000 7                  LDQ     TS_FIRST
        10 002425   001101 116000 7                  CMPQ    TS_LAST
        10 002426   002434 601000 10                 TNZ     s:10352

     1185    10349    9                                  CALL TSE$ERROR(%E$T_PAGERETOK);

  10349 10 002427   000116 630400 11                 EPPR0   78
        10 002430   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 002431   000000 701000 xent               TSX1    TSE$ERROR
        10 002432   000000 011000                    NOP     0

     1186    10350    9                                  END;

  10350 10 002433   002446 710000 10                 TRA     s:10355

     1187    10351    9                                ELSE DO;

     1188    10352    9                                  CALL STUFF_BUF (TS_LAST,SUB_BUF_2);

  10352 10 002434   000061 236000 11                 LDQ     49
        10 002435   200044 756100                    STQ     @BUFFER,,AUTO
        10 002436   000062 236000 11                 LDQ     50
        10 002437   200043 756100                    STQ     @VALUE,,AUTO
        10 002440   001565 701000 10                 TSX1    STUFF_BUF
        10 002441   000000 011000                    NOP     0

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:177  
     1189    10353    9                                  CALL TSE$ERROR(%E$T_PAGES_RETOK);

  10353 10 002442   000120 630400 11                 EPPR0   80
        10 002443   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 002444   000000 701000 xent               TSX1    TSE$ERROR
        10 002445   000000 011000                    NOP     0

     1190    10354    9                                  END;

     1191    10355    8                                TS_FIRST = I;

  10355 10 002446   001067 235000 7                  LDA     I
        10 002447   001100 755000 7                  STA     TS_FIRST

     1192    10356    8                                END;

     1193    10357    7                             TS_LAST = I;

  10357 10 002450   001067 235000 7                  LDA     I
        10 002451   001101 755000 7                  STA     TS_LAST

     1194    10358    7                             END;

  10358 10 002452   002462 710000 10                 TRA     s:10373

     1195    10359    7                       ELSE DO;      /* JUMP OUT, UNEXPECTED ERROR  */

     1196    10360    7                          CALL STUFF_BUF (I,SUB_BUF_1);

  10360 10 002453   000054 236000 11                 LDQ     44
        10 002454   200044 756100                    STQ     @BUFFER,,AUTO
        10 002455   000055 236000 11                 LDQ     45
        10 002456   200043 756100                    STQ     @VALUE,,AUTO
        10 002457   001565 701000 10                 TSX1    STUFF_BUF
        10 002460   000000 011000                    NOP     0

     1197    10361    7                          GOTO RET_ERR;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:178  

  10361 10 002461   003115 710000 10                 TRA     RET_ERR

     1198    10362    7                          END;
     1199    10363    6                    END;                   /* DO NEVER                           */

     1200    10364        /*E*    ERROR: TSS-E$T_NOTBADPP-0
     1201    10365                MESSAGE: Page %U1 is not a bad page.
     1202    10366                MESSAGE1: The specified page is already marked as good.
     1203    10367                DESCRIPTION: See message.           */
     1204    10368        /**/
     1205    10369        /*E*    ERROR: TSS-E$T_NOTBADPPS-0
     1206    10370                MESSAGE: Pages %U1-%U2 are not bad pages.
     1207    10371                MESSAGE1: The specified pages are already marked as good.
     1208    10372                DESCRIPTION: See message.           */
     1209    10373    5                    END;    /*  DO I                                */

  10373 10 002462   001067 054000 7                  AOS     I
        10 002463   001062 470400 7                  LDP0    CMD$
        10 002464   000002 236100                    LDQ     2,,PR0
        10 002465   002317 604000 10                 TMI     s:10315
        10 002466   001067 116000 7                  CMPQ    I
        10 002467   002317 605000 10                 TPL     s:10315

     1210    10374        /**/
     1211    10375    4                    CALL STUFF_BUF (TS_FIRST,SUB_BUF_1);

  10375 10 002470   000054 236000 11                 LDQ     44
        10 002471   200044 756100                    STQ     @BUFFER,,AUTO
        10 002472   000056 236000 11                 LDQ     46
        10 002473   200043 756100                    STQ     @VALUE,,AUTO
        10 002474   001565 701000 10                 TSX1    STUFF_BUF
        10 002475   000000 011000                    NOP     0

     1212    10376    4                    CALL STUFF_BUF (TS_LAST,SUB_BUF_2);

  10376 10 002476   000061 236000 11                 LDQ     49
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:179  
        10 002477   200044 756100                    STQ     @BUFFER,,AUTO
        10 002500   000062 236000 11                 LDQ     50
        10 002501   200043 756100                    STQ     @VALUE,,AUTO
        10 002502   001565 701000 10                 TSX1    STUFF_BUF
        10 002503   000000 011000                    NOP     0

     1213    10377    4                    IF RETURNOK.PREVIOUS  THEN

  10377 10 002504   001106 234000 7                  SZN     SUSPECT
        10 002505   002523 605000 10                 TPL     s:10383

     1214    10378    4                       IF TS_FIRST = TS_LAST THEN

  10378 10 002506   001100 236000 7                  LDQ     TS_FIRST
        10 002507   001101 116000 7                  CMPQ    TS_LAST
        10 002510   002516 601000 10                 TNZ     s:10381

     1215    10379    4                          CALL TSE$ERROR(%E$T_PAGERETOK);

  10379 10 002511   000116 630400 11                 EPPR0   78
        10 002512   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 002513   000000 701000 xent               TSX1    TSE$ERROR
        10 002514   000000 011000                    NOP     0
        10 002515   002621 710000 10                 TRA     NEXT_RET

     1216    10380    4                       ELSE
     1217    10381    4                          CALL TSE$ERROR(%E$T_PAGES_RETOK);

  10381 10 002516   000120 630400 11                 EPPR0   80
        10 002517   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 002520   000000 701000 xent               TSX1    TSE$ERROR
        10 002521   000000 011000                    NOP     0
        10 002522   002621 710000 10                 TRA     NEXT_RET

     1218    10382    4                    ELSE      /* LAST PAGE(S) WAS NOTBADPP          */
     1219    10383    4                       IF TS_FIRST = TS_LAST THEN

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:180  
  10383 10 002523   001100 236000 7                  LDQ     TS_FIRST
        10 002524   001101 116000 7                  CMPQ    TS_LAST
        10 002525   002533 601000 10                 TNZ     s:10386

     1220    10384    4                          CALL TSE$ERROR(%E$T_NOTBADPP);

  10384 10 002526   000112 630400 11                 EPPR0   74
        10 002527   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 002530   000000 701000 xent               TSX1    TSE$ERROR
        10 002531   000000 011000                    NOP     0
        10 002532   002621 710000 10                 TRA     NEXT_RET

     1221    10385    4                       ELSE
     1222    10386    4                          CALL TSE$ERROR(%E$T_NOTBADPPS);

  10386 10 002533   000114 630400 11                 EPPR0   76
        10 002534   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 002535   000000 701000 xent               TSX1    TSE$ERROR
        10 002536   000000 011000                    NOP     0
        10 002537   002621 710000 10                 TRA     NEXT_RET

     1223    10387        /**/
     1224    10388        /*E*    ERROR: TSS-E$T_PAGERETOK-0
     1225    10389                MESSAGE: Page %U1 successfully returned
     1226    10390                DESCRIPTION: THE SPECIFIED PAGE HAS BEEN MARKED AS GOOD */
     1227    10391        /**/
     1228    10392        /*E*    ERROR: TSS-E$T_PAGES_RETOK-0
     1229    10393                MESSAGE: Pages %U1-%U2 successfully returned
     1230    10394                DESCRIPTION: THE SPECIFIED PAGES HAVE BEEN MARKED AS GOOD */
     1231    10395        /**/
     1232    10396    4               CASE (TSS_CPU);

     1233    10397    4                 SYSCON_FPT.V.COMPONENT# = %CPU##;

  10397 10 002540   000006 236003                    LDQ     6,DU
        10 002541   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:181  
     1234    10398    4                 SYSCON_FPT.V.CPU# = CMD$->TS$CPU.CPU;

  10398 10 002542   000001 236100                    LDQ     1,,PR0
        10 002543   000011 736000                    QLS     9
        10 002544   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

     1235    10399    4                 SUB_BUF_1.COUNT = 5;

  10399 10 002545   005000 236003                    LDQ     2560,DU
        10 002546   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1236    10400    4                 SUB_BUF_1.TEXT = 'CPU#';

  10400 10 002547   040000 100400                    MLR     fill='040'O
        10 002550   000303 000004 8                  ADSC9   TEXTC_VEC+9              cn=0,n=4
        10 002551   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     1237    10401    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,4,1),CMD$->TS$CPU.CPU);

  10401 10 002552   000001 235100                    LDA     1,,PR0
        10 002553   000044 773000                    LRL     36
        10 002554   200056 757100                    STAQ    I+4,,AUTO
        10 002555   000000 301500                    BTD
        10 002556   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 002557   003746 230001 7                  NDSC9   SUB_BUF_1+1              cn=1,s=nosgn,sf=0,n=1

     1238    10402    4                 CALL M$SYSCON(SYSCON_FPT) ALTRET(RET_ERR);

  10402 10 002560   000706 630400 7                  EPPR0   SYSCON_FPT
        10 002561   470007 713400                    CLIMB   alt,+28679
        10 002562   400400 401760                    pmme    nvectors=2
        10 002563   003115 702000 10                 TSX2    RET_ERR

     1239    10403    4                 CALL TSE$ERROR(%E$T_CPURETOK);

  10403 10 002564   000122 630400 11                 EPPR0   82
        10 002565   000017 631400 xsym               EPPR1   B_VECTNIL+15
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:182  
        10 002566   000000 701000 xent               TSX1    TSE$ERROR
        10 002567   000000 011000                    NOP     0
        10 002570   002621 710000 10                 TRA     NEXT_RET

     1240    10404        /**/
     1241    10405        /*E*    ERROR: TSS-E$T_CPURETOK-0
     1242    10406                MESSAGE: CPU %U1 successfully returned.
     1243    10407                DESCRIPTION: THE SPECIFIED IOM HAS BEEN RETURNED */
     1244    10408    4               CASE (TSS_SCU);

     1245    10409    4                 SYSCON_FPT.V.COMPONENT# = %SCU##;

  10409 10 002571   000007 236003                    LDQ     7,DU
        10 002572   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1246    10410    4                 SYSCON_FPT.V.SCU# = CMD$->TS$SCU.SCU;

  10410 10 002573   000001 236100                    LDQ     1,,PR0
        10 002574   000011 736000                    QLS     9
        10 002575   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

     1247    10411    4                 SUB_BUF_1.COUNT = 5;

  10411 10 002576   005000 236003                    LDQ     2560,DU
        10 002577   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1248    10412    4                 SUB_BUF_1.TEXT = 'SCU#';

  10412 10 002600   040000 100400                    MLR     fill='040'O
        10 002601   000304 000004 8                  ADSC9   TEXTC_VEC+10             cn=0,n=4
        10 002602   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     1249    10413    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,4,1),CMD$->TS$SCU.SCU);

  10413 10 002603   000001 235100                    LDA     1,,PR0
        10 002604   000044 773000                    LRL     36
        10 002605   200056 757100                    STAQ    I+4,,AUTO
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:183  
        10 002606   000000 301500                    BTD
        10 002607   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 002610   003746 230001 7                  NDSC9   SUB_BUF_1+1              cn=1,s=nosgn,sf=0,n=1

     1250    10414    4                 CALL M$SYSCON(SYSCON_FPT) ALTRET(RET_ERR);

  10414 10 002611   000706 630400 7                  EPPR0   SYSCON_FPT
        10 002612   470007 713400                    CLIMB   alt,+28679
        10 002613   400400 401760                    pmme    nvectors=2
        10 002614   003115 702000 10                 TSX2    RET_ERR

     1251    10415    4                 CALL TSE$ERROR(%E$T_SCURETOK);

  10415 10 002615   000124 630400 11                 EPPR0   84
        10 002616   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 002617   000000 701000 xent               TSX1    TSE$ERROR
        10 002620   000000 011000                    NOP     0

     1252    10416        /**/
     1253    10417        /*E*    ERROR: TSS-E$T_SCURETOK-0
     1254    10418                MESSAGE: SCU %U1 successfully returned.
     1255    10419                DESCRIPTION: THE SPECIFIED IOM HAS BEEN RETURNED */
     1256    10420    4               END;                        /* END CASE                           */

     1257    10421    3   NEXT_RET:
     1258    10422    3              IF (CMD$->TS$DEV.CODE = TSS_DEV) OR

  10422 10 002621   001062 470400 7     NEXT_RET     LDP0    CMD$
        10 002622   000000 720100                    LXL0    0,,PR0
        10 002623   000001 100003                    CMPX0   1,DU
        10 002624   002631 600000 10                 TZE     s:10425
        10 002625   000002 100003                    CMPX0   2,DU
        10 002626   002631 600000 10                 TZE     s:10425
        10 002627   000003 100003                    CMPX0   3,DU
        10 002630   003064 601000 10                 TNZ     s:10450

     1259    10423    3                 (CMD$->TS$DEV.CODE = TSS_MPC) OR
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:184  
     1260    10424    4                 (CMD$->TS$DEV.CODE = TSS_FEP) THEN DO;

     1261    10425    4                 DEVNAME = SUB_BUF_1.TEXT;

  10425 10 002631   040000 100400                    MLR     fill='040'O
        10 002632   003745 200010 7                  ADSC9   SUB_BUF_1                cn=1,n=8
        10 002633   001634 000010 7                  ADSC9   DEVNAME                  cn=0,n=8

     1262    10426    4                 IF NOT DCBADDR(DCBNUM(M$DEVHIST))->F$DCB.FCD#

  10426 10 002634   000000 236007 xsym               LDQ     M$DEVHIST,DL
        10 002635   000000 471400 11                 LDP1    0
        10 002636   100000 473500                    LDP3    0,,PR1
        10 002637   300000 474506                    LDP4    0,QL,PR3
        10 002640   400031 236100                    LDQ     25,,PR4
        10 002641   020000 316007                    CANQ    8192,DL
        10 002642   002647 601000 10                 TNZ     s:10428

     1263    10427    4                    THEN CALL M$OPEN(OPEN_DEVHIST) ALTRET(BAG_IT);

  10427 10 002643   000242 630400 7                  EPPR0   OPEN_DEVHIST
        10 002644   450000 713400                    CLIMB   alt,open
        10 002645   410400 401760                    pmme    nvectors=18
        10 002646   003051 702000 10                 TSX2    BAG_IT

     1264    10428    4                 CALL M$READ(READ_DEVHIST_HEAD) ALTRET(BAG_IT);

  10428 10 002647   000334 630400 7                  EPPR0   READ_DEVHIST_HEAD
        10 002650   440000 713400                    CLIMB   alt,read
        10 002651   401400 401760                    pmme    nvectors=4
        10 002652   003051 702000 10                 TSX2    BAG_IT

     1265    10429    4                 CALL M$READ(READ_DEVHIST_MAINT) ALTRET(BAG_IT);

  10429 10 002653   000352 630400 7                  EPPR0   READ_DEVHIST_MAINT
        10 002654   440000 713400                    CLIMB   alt,read
        10 002655   401400 401760                    pmme    nvectors=4
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:185  
        10 002656   003051 702000 10                 TSX2    BAG_IT

     1266    10430    4                 NUMDEVS = TH_HEAD.NUMIOMS +

  10430 10 002657   001637 236000 7                  LDQ     TH_HEAD+1
        10 002660   777777 376007                    ANQ     -1,DL
        10 002661   200056 756100                    STQ     I+4,,AUTO
        10 002662   001636 236000 7                  LDQ     TH_HEAD
        10 002663   777777 376007                    ANQ     -1,DL
        10 002664   200056 036100                    ADLQ    I+4,,AUTO
        10 002665   200057 756100                    STQ     I+5,,AUTO
        10 002666   001641 236000 7                  LDQ     TH_HEAD+3
        10 002667   777777 376007                    ANQ     -1,DL
        10 002670   200060 756100                    STQ     I+6,,AUTO
        10 002671   200057 236100                    LDQ     I+5,,AUTO
        10 002672   200060 036100                    ADLQ    I+6,,AUTO
        10 002673   200061 756100                    STQ     I+7,,AUTO
        10 002674   001640 236000 7                  LDQ     TH_HEAD+2
        10 002675   777777 376007                    ANQ     -1,DL
        10 002676   200062 756100                    STQ     I+8,,AUTO
        10 002677   200061 236100                    LDQ     I+7,,AUTO
        10 002700   200062 036100                    ADLQ    I+8,,AUTO
        10 002701   200063 756100                    STQ     I+9,,AUTO
        10 002702   001642 236000 7                  LDQ     TH_HEAD+4
        10 002703   777777 376007                    ANQ     -1,DL
        10 002704   200064 756100                    STQ     I+10,,AUTO
        10 002705   200063 236100                    LDQ     I+9,,AUTO
        10 002706   200064 036100                    ADLQ    I+10,,AUTO
        10 002707   200065 756100                    STQ     I+11,,AUTO
        10 002710   001643 236000 7                  LDQ     TH_HEAD+5
        10 002711   777777 376007                    ANQ     -1,DL
        10 002712   200066 756100                    STQ     I+12,,AUTO
        10 002713   200065 236100                    LDQ     I+11,,AUTO
        10 002714   200066 036100                    ADLQ    I+12,,AUTO
        10 002715   200067 756100                    STQ     I+13,,AUTO
        10 002716   001644 236000 7                  LDQ     TH_HEAD+6
        10 002717   777777 376007                    ANQ     -1,DL
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:186  
        10 002720   200070 756100                    STQ     I+14,,AUTO
        10 002721   200067 236100                    LDQ     I+13,,AUTO
        10 002722   200070 036100                    ADLQ    I+14,,AUTO
        10 002723   200071 756100                    STQ     I+15,,AUTO
        10 002724   001645 236000 7                  LDQ     TH_HEAD+7
        10 002725   777777 376007                    ANQ     -1,DL
        10 002726   200072 756100                    STQ     I+16,,AUTO
        10 002727   200071 236100                    LDQ     I+15,,AUTO
        10 002730   200072 036100                    ADLQ    I+16,,AUTO
        10 002731   200073 756100                    STQ     I+17,,AUTO
        10 002732   001646 236000 7                  LDQ     TH_HEAD+8
        10 002733   777777 376007                    ANQ     -1,DL
        10 002734   200074 756100                    STQ     I+18,,AUTO
        10 002735   200073 236100                    LDQ     I+17,,AUTO
        10 002736   200074 036100                    ADLQ    I+18,,AUTO
        10 002737   200075 756100                    STQ     I+19,,AUTO
        10 002740   001650 236000 7                  LDQ     TH_HEAD+10
        10 002741   777777 376007                    ANQ     -1,DL
        10 002742   200076 756100                    STQ     I+20,,AUTO
        10 002743   200075 236100                    LDQ     I+19,,AUTO
        10 002744   200076 036100                    ADLQ    I+20,,AUTO
        10 002745   200077 756100                    STQ     I+21,,AUTO
        10 002746   001647 236000 7                  LDQ     TH_HEAD+9
        10 002747   777777 376007                    ANQ     -1,DL
        10 002750   200100 756100                    STQ     I+22,,AUTO
        10 002751   200077 236100                    LDQ     I+21,,AUTO
        10 002752   200100 036100                    ADLQ    I+22,,AUTO
        10 002753   200101 756100                    STQ     I+23,,AUTO
        10 002754   001651 236000 7                  LDQ     TH_HEAD+11
        10 002755   777777 376007                    ANQ     -1,DL
        10 002756   200102 756100                    STQ     I+24,,AUTO
        10 002757   200101 236100                    LDQ     I+23,,AUTO
        10 002760   200102 036100                    ADLQ    I+24,,AUTO
        10 002761   200103 756100                    STQ     I+25,,AUTO
        10 002762   001652 236000 7                  LDQ     TH_HEAD+12
        10 002763   777777 376007                    ANQ     -1,DL
        10 002764   200104 756100                    STQ     I+26,,AUTO
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:187  
        10 002765   200103 236100                    LDQ     I+25,,AUTO
        10 002766   200104 036100                    ADLQ    I+26,,AUTO
        10 002767   200105 756100                    STQ     I+27,,AUTO
        10 002770   001653 236000 7                  LDQ     TH_HEAD+13
        10 002771   777777 376007                    ANQ     -1,DL
        10 002772   200106 756100                    STQ     I+28,,AUTO
        10 002773   200105 236100                    LDQ     I+27,,AUTO
        10 002774   200106 036100                    ADLQ    I+28,,AUTO
        10 002775   200107 756100                    STQ     I+29,,AUTO
        10 002776   001654 236000 7                  LDQ     TH_HEAD+14
        10 002777   777777 376007                    ANQ     -1,DL
        10 003000   200110 756100                    STQ     I+30,,AUTO
        10 003001   200107 236100                    LDQ     I+29,,AUTO
        10 003002   200110 036100                    ADLQ    I+30,,AUTO
        10 003003   200111 756100                    STQ     I+31,,AUTO
        10 003004   001655 236000 7                  LDQ     TH_HEAD+15
        10 003005   777777 376007                    ANQ     -1,DL
        10 003006   200112 756100                    STQ     I+32,,AUTO
        10 003007   200111 236100                    LDQ     I+31,,AUTO
        10 003010   200112 036100                    ADLQ    I+32,,AUTO
        10 003011   001633 756000 7                  STQ     NUMDEVS

     1267    10431    4                           TH_HEAD.NUMUNITMPCS + TH_HEAD.NUMDISKMPCS + TH_HEAD.
             10431                                    NUMTAPEMPCS +
     1268    10432    4                           TH_HEAD.NUMAPMPCS + TH_HEAD.NUMOPCS +
     1269    10433    4                           TH_HEAD.NUMFEPS + TH_HEAD.NUMCONSOLES +
     1270    10434    4                           TH_HEAD.NUMLPS + TH_HEAD.NUMCPS + TH_HEAD.NUMCRS +
     1271    10435    4                           TH_HEAD.NUMDPS + TH_HEAD.NUMMTS + TH_HEAD.NUMXXS +
     1272    10436    4                           TH_HEAD.NUMAPS + TH_HEAD.NUMODS;
     1273    10437    5                 DO I = 0 TO NUMDEVS - 1;

  10437 10 003012   001067 450000 7                  STZ     I
        10 003013   003033 710000 10                 TRA     s:10443+1

     1274    10438    6                    IF DEVNAME = TH_MAINT.DEVNAME(I) THEN DO;

  10438 10 003014   001067 236000 7                  LDQ     I
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:188  
        10 003015   000014 402007                    MPY     12,DL
        10 003016   040006 106400                    CMPC    fill='040'O
        10 003017   001634 000010 7                  ADSC9   DEVNAME                  cn=0,n=8
        10 003020   002500 000010 7                  ADSC9   TH_MAINT,Q               cn=0,n=8
        10 003021   003032 601000 10                 TNZ     s:10443

     1275    10439    6                       CALL M$TIME(CUR_UTS);

  10439 10 003022   000600 630400 7                  EPPR0   CUR_UTS
        10 003023   020004 713400                    CLIMB   8196
        10 003024   402000 401760                    pmme    nvectors=5

     1276    10440    6                       TH_MAINT.UTS(I) = CURUTS;

  10440 10 003025   001067 236000 7                  LDQ     I
        10 003026   000003 402007                    MPY     3,DL
        10 003027   001102 235000 7                  LDA     CURUTS
        10 003030   002502 755006 7                  STA     TH_MAINT+2,QL

     1277    10441    6                       GOTO FOUND_IT;

  10441 10 003031   003036 710000 10                 TRA     FOUND_IT

     1278    10442    6                       END;  /* IF */
     1279    10443    5                    END;  /* DO I */

  10443 10 003032   001067 054000 7                  AOS     I
        10 003033   001067 236000 7                  LDQ     I
        10 003034   001633 116000 7                  CMPQ    NUMDEVS
        10 003035   003014 604000 10                 TMI     s:10438

     1280    10444    4   FOUND_IT:     WRITE_MAINT.BUF_.BOUND = SIZEV(TH_MAINT) - ((201 - NUMDEVS) * 12);

  10444 10 003036   001633 236000 7     FOUND_IT     LDQ     NUMDEVS
        10 003037   000014 402007                    MPY     12,DL
        10 003040   000001 136007                    SBLQ    1,DL
        10 003041   000020 736000                    QLS     16
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:189  
        10 003042   000374 676000 7                  ERQ     WRITE_MAINT+4
        10 003043   000034 376000 xsym               ANQ     B_VECTNIL+28
        10 003044   000374 656000 7                  ERSQ    WRITE_MAINT+4

     1281    10445    4                 CALL M$WRITE(WRITE_MAINT) ALTRET(BAG_IT);

  10445 10 003045   000370 630400 7                  EPPR0   WRITE_MAINT
        10 003046   440001 713400                    CLIMB   alt,write
        10 003047   401400 401760                    pmme    nvectors=4
        10 003050   003051 702000 10                 TSX2    BAG_IT

     1282    10446    4       BAG_IT:   IF DCBADDR(DCBNUM(M$DEVHIST))->F$DCB.FCD#

  10446 10 003051   000000 236007 xsym  BAG_IT       LDQ     M$DEVHIST,DL
        10 003052   000000 470400 11                 LDP0    0
        10 003053   000000 471500                    LDP1    0,,PR0
        10 003054   100000 473506                    LDP3    0,QL,PR1
        10 003055   300031 236100                    LDQ     25,,PR3
        10 003056   020000 316007                    CANQ    8192,DL
        10 003057   003064 600000 10                 TZE     s:10450

     1283    10447    4                    THEN CALL M$CLOSE(CLOSE_DEVHIST) ALTRET(NEXT_RET);

  10447 10 003060   000404 630400 7                  EPPR0   CLOSE_DEVHIST
        10 003061   450001 713400                    CLIMB   alt,close
        10 003062   406000 401760                    pmme    nvectors=13
        10 003063   002621 702000 10                 TSX2    NEXT_RET

     1284    10448    4                 END;  /* IF CODE = DEV|MPC|FEP */

     1285    10449        /**/
     1286    10450    3              CMD$ = PINCRW(CMD$,CMD$ -> TS$DEV.SIZE);

  10450 10 003064   001062 470400 7                  LDP0    CMD$
        10 003065   000000 220100                    LDX0    0,,PR0
        10 003066   000000 636010                    EAQ     0,X0
        10 003067   001062 036000 7                  ADLQ    CMD$
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:190  
        10 003070   001062 756000 7                  STQ     CMD$

     1287    10451    3              END;

  10451 10 003071   001062 470400 7                  LDP0    CMD$
        10 003072   000000 720100                    LXL0    0,,PR0
        10 003073   001645 601000 10                 TNZ     s:10195

     1288    10452    2           RETURN;

  10452 10 003074   200040 221300                    LDX1  ! RANGE_FLAG+1,,AUTO
        10 003075   000001 702211                    TSX2  ! 1,X1

     1289    10453        /**/
     1290    10454    2   CONFIG_ERR:
     1291    10455    2           IF DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#

  10455 10 003076   000000 236007 xsym  CONFIG_ERR   LDQ     M$CONF,DL
        10 003077   000000 470400 11                 LDP0    0
        10 003100   000000 471500                    LDP1    0,,PR0
        10 003101   100000 473506                    LDP3    0,QL,PR1
        10 003102   300031 236100                    LDQ     25,,PR3
        10 003103   020000 316007                    CANQ    8192,DL
        10 003104   003110 600000 10                 TZE     s:10457

     1292    10456    2              THEN CALL M$CLOSE(CLOSE_CONFIG);

  10456 10 003105   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 003106   050001 713400                    CLIMB   close
        10 003107   406000 401760                    pmme    nvectors=13

     1293    10457    2           CALL TSE$ERROR (%E$T_RETCONFIGERR);

  10457 10 003110   000126 630400 11                 EPPR0   86
        10 003111   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 003112   000000 701000 xent               TSX1    TSE$ERROR
        10 003113   000000 011000                    NOP     0
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:191  

     1294    10458    2           GOTO NEXT_RET;

  10458 10 003114   002621 710000 10                 TRA     NEXT_RET

     1295    10459        /**/
     1296    10460        /*E*    ERROR:   TSS-E$T_RETCONFIGERR-0
     1297    10461                MESSAGE0: Unable to access :CONFIG file to save returned
     1298    10462                          status of last component returned.
     1299    10463                DESCRIPTION: UNABLE TO SAVE STATUS OF COMPONENT IN :CONFIG */
     1300    10464        /**/
     1301    10465        /**/
     1302    10466    2   RET_ERR:
     1303    10467    2           CALL TSE$ERROR(0);            /* ERROR CODE FROM M$SYSCON           */

  10467 10 003115   000034 630400 11    RET_ERR      EPPR0   28
        10 003116   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 003117   000000 701000 xent               TSX1    TSE$ERROR
        10 003120   000000 011000                    NOP     0

     1304    10468        /**/
     1305    10469    3           DO CASE (CMD$ -> TS$DEV.CODE);

  10469 10 003121   001062 470400 7                  LDP0    CMD$
        10 003122   000000 720100                    LXL0    0,,PR0
        10 003123   000014 100003                    CMPX0   12,DU
        10 003124   003126 602010 10                 TNC     s:10469+5,X0
        10 003125   003171 710000 10                 TRA     s:10487
        10 003126   003171 710000 10                 TRA     s:10487
        10 003127   003142 710000 10                 TRA     s:10471
        10 003130   003145 710000 10                 TRA     s:10473
        10 003131   003150 710000 10                 TRA     s:10475
        10 003132   003156 710000 10                 TRA     s:10479
        10 003133   003161 710000 10                 TRA     s:10481
        10 003134   003153 710000 10                 TRA     s:10477
        10 003135   003171 710000 10                 TRA     s:10487
        10 003136   003171 710000 10                 TRA     s:10487
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:192  
        10 003137   003171 710000 10                 TRA     s:10487
        10 003140   003164 710000 10                 TRA     s:10483
        10 003141   003167 710000 10                 TRA     s:10485

     1306    10470    3            CASE (TSS_DEV);

     1307    10471    3              I = %E$T_DEVRETERR;

  10471 10 003142   000361 235007                    LDA     241,DL
        10 003143   001067 755000 7                  STA     I
        10 003144   003171 710000 10                 TRA     s:10487

     1308    10472    3            CASE (TSS_MPC);

     1309    10473    3              I = %E$T_MPCRETERR;

  10473 10 003145   000362 235007                    LDA     242,DL
        10 003146   001067 755000 7                  STA     I
        10 003147   003171 710000 10                 TRA     s:10487

     1310    10474    3            CASE (TSS_FEP);

     1311    10475    3              I = %E$T_FEPRETERR;

  10475 10 003150   000363 235007                    LDA     243,DL
        10 003151   001067 755000 7                  STA     I
        10 003152   003171 710000 10                 TRA     s:10487

     1312    10476    3            CASE (TSS_IOM);

     1313    10477    3              I = %E$T_IOMRETERR;

  10477 10 003153   000402 235007                    LDA     258,DL
        10 003154   001067 755000 7                  STA     I
        10 003155   003171 710000 10                 TRA     s:10487

     1314    10478    3            CASE (TSS_CHAN);
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:193  

     1315    10479    3              I = %E$T_CHANRETERR;

  10479 10 003156   000364 235007                    LDA     244,DL
        10 003157   001067 755000 7                  STA     I
        10 003160   003171 710000 10                 TRA     s:10487

     1316    10480    3            CASE (TSS_PAGES);

     1317    10481    3              I = %E$T_PAGERETERR;

  10481 10 003161   000365 235007                    LDA     245,DL
        10 003162   001067 755000 7                  STA     I
        10 003163   003171 710000 10                 TRA     s:10487

     1318    10482    3            CASE (TSS_CPU);

     1319    10483    3              I = %E$T_CPURETERR;

  10483 10 003164   000414 235007                    LDA     268,DL
        10 003165   001067 755000 7                  STA     I
        10 003166   003171 710000 10                 TRA     s:10487

     1320    10484    3            CASE (TSS_SCU);

     1321    10485    3              I = %E$T_SCURETERR;

  10485 10 003167   000416 235007                    LDA     270,DL
        10 003170   001067 755000 7                  STA     I

     1322    10486    3            END;

     1323    10487    2           CALL TSE$ERROR(I);

  10487 10 003171   000055 630400 11                 EPPR0   45
        10 003172   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 003173   000000 701000 xent               TSX1    TSE$ERROR
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:194  
        10 003174   000000 011000                    NOP     0

     1324    10488    2           GOTO NEXT_RET;

  10488 10 003175   002621 710000 10                 TRA     NEXT_RET

     1325    10489        /**/
     1326    10490        /*E*    ERROR: TSS-E$T_DEVRETERR-0
     1327    10491                MESSAGE: Unable to return device %U1.
     1328    10492                DESCRIPTION: CANT RETURN THIS DEVICE   */
     1329    10493        /**/
     1330    10494        /*E*    ERROR: TSS-E$T_MPCRETERR-0
     1331    10495                MESSAGE: Unable to return MPC %U1.
     1332    10496                DESCRIPTION: CANT RETURN THIS MPC   */
     1333    10497        /**/
     1334    10498        /*E*    ERROR: TSS-E$T_FEPRETERR-0
     1335    10499                MESSAGE: Unable to return FEP %U1.
     1336    10500                DESCRIPTION: CANT RETURN THIS FEP   */
     1337    10501        /**/
     1338    10502        /*E*    ERROR: TSS-E$T_IOMRETERR-0
     1339    10503                MESSAGE: Unable to return IOM %U1.
     1340    10504                DESCRIPTION: CANT RETURN THIS IOM   */
     1341    10505        /**/
     1342    10506        /*E*    ERROR: TSS-E$T_CHANRETERR-0
     1343    10507                MESSAGE: Unable to return IOM%U1,CHAN%U2.
     1344    10508                DESCRIPTION: UNABLE TO RETURN THIS CHANNEL */
     1345    10509        /**/
     1346    10510        /*E*    ERROR: TSS-E$T_PAGERETERR-0
     1347    10511                MESSAGE: Unable to return Page %U1.
     1348    10512                DESCRIPTION: CANT RETURN THIS PAGE */
     1349    10513        /**/
     1350    10514        /*E*    ERROR: TSS-E$T_CPURETERR-0
     1351    10515                MESSAGE: Unable to return CPU %U1.
     1352    10516                DESCRIPTION: CANT RETURN THIS CPU */
     1353    10517        /**/
     1354    10518        /*E*    ERROR: TSS-E$T_SCURETERR-0
     1355    10519                MESSAGE: Unable to return SCU %U1.
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:195  
     1356    10520                DESCRIPTION: CANT RETURN THIS SCU */
     1357    10521        /**/
     1358    10522    2   END EXEC_RET;
     1359    10523        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:196  
     1360    10524    1   EXEC_SET: PROC;

  10524 10 003176   200040 741300       EXEC_SET     STX1  ! RANGE_FLAG+1,,AUTO

     1361    10525        /**/
     1362    10526    2        I = 0;

  10526 10 003177   001067 450000 7                  STZ     I

     1363    10527    2        CMD$ = PINCRW(CMD$,SIZEW(TS$CMDWD));

  10527 10 003200   001062 236000 7                  LDQ     CMD$
        10 003201   000001 036003                    ADLQ    1,DU
        10 003202   001062 756000 7                  STQ     CMD$

     1364    10528    2        SYSCON_FPT.V.FUNCTION# = %SETFLAG#;

  10528 10 003203   004000 236003                    LDQ     2048,DU
        10 003204   000712 552040 7                  STBQ    SYSCON_FPT+4,'40'O

     1365    10529    3        DO WHILE(CMD$->TS$DEV.CODE ~= 0);

  10529 10 003205   001062 470400 7                  LDP0    CMD$
        10 003206   000000 720100                    LXL0    0,,PR0
        10 003207   004111 600000 10                 TZE     s:10637

     1366    10530    3           I = I + 1;

  10530 10 003210   001067 054000 7                  AOS     I

     1367    10531    3           BLK$ = P_PCB.OUT$->O$BLK.SUBLK$(I);

  10531 10 003211   004023 470400 7                  LDP0    P_PCB+3
        10 003212   001067 720000 7                  LXL0    I
        10 003213   000003 236110                    LDQ     3,X0,PR0
        10 003214   001061 756000 7                  STQ     BLK$

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:197  
     1368    10532    4           DO CASE(CMD$->TS$DEV.CODE);

  10532 10 003215   001062 471400 7                  LDP1    CMD$
        10 003216   100000 721100                    LXL1    0,,PR1
        10 003217   000005 101003                    CMPX1   5,DU
        10 003220   003222 602011 10                 TNC     s:10532+5,X1
        10 003221   004101 710000 10                 TRA     NEXT_SET
        10 003222   004101 710000 10                 TRA     NEXT_SET
        10 003223   003227 710000 10                 TRA     s:10534
        10 003224   003374 710000 10                 TRA     s:10558
        10 003225   003532 710000 10                 TRA     s:10581
        10 003226   003707 710000 10                 TRA     s:10605

     1369    10533    4              CASE(TSS_DEV);

     1370    10534    4                 SUB_BUF_1.COUNT = 4;

  10534 10 003227   004000 236003                    LDQ     2048,DU
        10 003230   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1371    10535    4                 SUB_BUF_1.TEXT = CMD$->TS$DEV.DEVNAME;

  10535 10 003231   040000 100500                    MLR     fill='040'O
        10 003232   100001 000010                    ADSC9   1,,PR1                   cn=0,n=8
        10 003233   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     1372    10536    4                 SYSCON_FPT.V.COMPONENT# = %DVC#;

  10536 10 003234   000002 236003                    LDQ     2,DU
        10 003235   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1373    10537    4                 SYSCON_FPT.V.DEVNM# = CMD$->TS$DEV.DEVNAME;

  10537 10 003236   040000 100500                    MLR     fill='040'O
        10 003237   100001 000010                    ADSC9   1,,PR1                   cn=0,n=8
        10 003240   000713 000010 7                  ADSC9   SYSCON_FPT+5             cn=0,n=8

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:198  
     1374    10538    4                SYSCON_FPT.V.FLAGVAL# = BINBIT(BLK$->O$BLK.SUBLK$(BLK$->O$BLK.NSUBLKS-
             10538                          1)->O$BLK.CODE - 1,1);

  10538 10 003241   001061 473400 7                  LDP3    BLK$
        10 003242   300001 221100                    LDX1    1,,PR3
        10 003243   300002 474511                    LDP4    2,X1,PR3
        10 003244   400000 236100                    LDQ     0,,PR4
        10 003245   777777 376007                    ANQ     -1,DL
        10 003246   000001 136007                    SBLQ    1,DL
        10 003247   000043 736000                    QLS     35
        10 003250   000011 772000                    QRL     9
        10 003251   000715 676000 7                  ERQ     SYSCON_FPT+7
        10 003252   000400 376003                    ANQ     256,DU
        10 003253   000715 656000 7                  ERSQ    SYSCON_FPT+7

     1375    10539    5                 DO J = 1 TO BLK$->O$BLK.NSUBLKS - 2;

  10539 10 003254   000001 235007                    LDA     1,DL
        10 003255   001070 755000 7                  STA     J
        10 003256   003352 710000 10                 TRA     s:10554+1

     1376    10540    5                    SYSCON_FPT.V.FLAG# = BLK$->O$BLK.SUBLK$(J)->O$BLK.CODE;

  10540 10 003257   001061 470400 7                  LDP0    BLK$
        10 003260   001070 720000 7                  LXL0    J
        10 003261   000003 471510                    LDP1    3,X0,PR0
        10 003262   100000 236100                    LDQ     0,,PR1
        10 003263   000033 736000                    QLS     27
        10 003264   000715 552040 7                  STBQ    SYSCON_FPT+7,'40'O

     1377    10541    5                    CALL M$SYSCON(SYSCON_FPT) ALTRET(SYSCON_ERR);

  10541 10 003265   000706 630400 7                  EPPR0   SYSCON_FPT
        10 003266   470007 713400                    CLIMB   alt,+28679
        10 003267   400400 401760                    pmme    nvectors=2
        10 003270   003341 702000 10                 TSX2    SYSCON_ERR

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:199  
     1378    10542    5                    IF NOT DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#

  10542 10 003271   000000 236007 xsym               LDQ     M$CONF,DL
        10 003272   000000 470400 11                 LDP0    0
        10 003273   000000 471500                    LDP1    0,,PR0
        10 003274   100000 473506                    LDP3    0,QL,PR1
        10 003275   300031 236100                    LDQ     25,,PR3
        10 003276   020000 316007                    CANQ    8192,DL
        10 003277   003304 601000 10                 TNZ     s:10544

     1379    10543    5                       THEN CALL M$OPEN(OPEN_CONFIG) ALTRET(CONFIG_ERR);

  10543 10 003300   000036 630400 7                  EPPR0   OPEN_CONFIG
        10 003301   450000 713400                    CLIMB   alt,open
        10 003302   410400 401760                    pmme    nvectors=18
        10 003303   004113 702000 10                 TSX2    CONFIG_ERR

     1380    10544    5                    CONFIG_KEY.COUNT = 8;

  10544 10 003304   010000 236003                    LDQ     4096,DU
        10 003305   003742 552040 7                  STBQ    CONFIG_KEY,'40'O

     1381    10545    5                    CONFIG_KEY.TEXT = SUB_BUF_1.TEXT;

  10545 10 003306   040000 100400                    MLR     fill='040'O
        10 003307   003745 200010 7                  ADSC9   SUB_BUF_1                cn=1,n=8
        10 003310   003742 200010 7                  ADSC9   CONFIG_KEY               cn=1,n=8

     1382    10546    5                    CALL M$READ(READ_CONFIG) ALTRET(CONFIG_ERR);

  10546 10 003311   000224 630400 7                  EPPR0   READ_CONFIG
        10 003312   440000 713400                    CLIMB   alt,read
        10 003313   401400 401760                    pmme    nvectors=4
        10 003314   004113 702000 10                 TSX2    CONFIG_ERR

     1383    10547    5                    IF BLK$->O$BLK.SUBLK$(J)->O$BLK.CODE = %TDOK#

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:200  
  10547 10 003315   001061 470400 7                  LDP0    BLK$
        10 003316   001070 720000 7                  LXL0    J
        10 003317   000003 471510                    LDP1    3,X0,PR0
        10 003320   100000 721100                    LXL1    0,,PR1
        10 003321   000001 101003                    CMPX1   1,DU
        10 003322   003332 601000 10                 TNZ     s:10549

     1384    10548    5                       THEN CONFIG$->TD$DEV.FLAGS.TDOK = SYSCON_FPT.V.FLAGVAL#;

  10548 10 003323   001066 473400 7                  LDP3    CONFIG$
        10 003324   000715 236000 7                  LDQ     SYSCON_FPT+7
        10 003325   000010 736000                    QLS     8
        10 003326   300011 676100                    ERQ     9,,PR3
        10 003327   200000 376003                    ANQ     65536,DU
        10 003330   300011 656100                    ERSQ    9,,PR3
        10 003331   003340 710000 10                 TRA     s:10550

     1385    10549    5                       ELSE CONFIG$->TD$DEV.FLAGS.CHECKWRITE = SYSCON_FPT.V.FLAGVAL#;

  10549 10 003332   001066 473400 7                  LDP3    CONFIG$
        10 003333   000715 236000 7                  LDQ     SYSCON_FPT+7
        10 003334   000007 736000                    QLS     7
        10 003335   300011 676100                    ERQ     9,,PR3
        10 003336   100000 376003                    ANQ     32768,DU
        10 003337   300011 656100                    ERSQ    9,,PR3

     1386    10550    6                    DO WHILE('0'B);  /* DO NEVER */

  10550 10 003340   003351 710000 10                 TRA     s:10554

     1387    10551    6         SYSCON_ERR:   CALL TSE$ERROR(0);

  10551 10 003341   000034 630400 11    SYSCON_ERR   EPPR0   28
        10 003342   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 003343   000000 701000 xent               TSX1    TSE$ERROR
        10 003344   000000 011000                    NOP     0

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:201  
     1388    10552    6                       CALL TSE$ERROR(%E$T_DEVSETERR);

  10552 10 003345   000130 630400 11                 EPPR0   88
        10 003346   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 003347   000000 701000 xent               TSX1    TSE$ERROR
        10 003350   000000 011000                    NOP     0

     1389    10553    6                       END;  /* DO NEVER */

     1390    10554    5                    END;  /* DO J */

  10554 10 003351   001070 054000 7                  AOS     J
        10 003352   001061 470400 7                  LDP0    BLK$
        10 003353   000001 236100                    LDQ     1,,PR0
        10 003354   000022 772000                    QRL     18
        10 003355   000002 136007                    SBLQ    2,DL
        10 003356   001070 116000 7                  CMPQ    J
        10 003357   003257 605000 10                 TPL     s:10540

     1391    10555    4                 IF DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#

  10555 10 003360   000000 236007 xsym               LDQ     M$CONF,DL
        10 003361   000000 471400 11                 LDP1    0
        10 003362   100000 473500                    LDP3    0,,PR1
        10 003363   300000 474506                    LDP4    0,QL,PR3
        10 003364   400031 236100                    LDQ     25,,PR4
        10 003365   020000 316007                    CANQ    8192,DL
        10 003366   004101 600000 10                 TZE     NEXT_SET

     1392    10556    4                    THEN CALL M$CLOSE(CLOSE_CONFIG) ALTRET(CONFIG_ERR);

  10556 10 003367   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 003370   450001 713400                    CLIMB   alt,close
        10 003371   406000 401760                    pmme    nvectors=13
        10 003372   004113 702000 10                 TSX2    CONFIG_ERR
        10 003373   004101 710000 10                 TRA     NEXT_SET

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:202  
     1393    10557    4              CASE(TSS_MPC);

     1394    10558    4                 SUB_BUF_1.COUNT = 4;

  10558 10 003374   004000 236003                    LDQ     2048,DU
        10 003375   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1395    10559    4                 SUB_BUF_1.TEXT = CMD$->TS$MPC.MPCNAME;

  10559 10 003376   040000 100500                    MLR     fill='040'O
        10 003377   100001 000010                    ADSC9   1,,PR1                   cn=0,n=8
        10 003400   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     1396    10560    4                 SYSCON_FPT.V.COMPONENT# = %MPC#;

  10560 10 003401   000003 236003                    LDQ     3,DU
        10 003402   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1397    10561    4                 SYSCON_FPT.V.DEVNM# = CMD$->TS$MPC.MPCNAME;

  10561 10 003403   040000 100500                    MLR     fill='040'O
        10 003404   100001 000010                    ADSC9   1,,PR1                   cn=0,n=8
        10 003405   000713 000010 7                  ADSC9   SYSCON_FPT+5             cn=0,n=8

     1398    10562    4                SYSCON_FPT.V.FLAGVAL# = BINBIT(BLK$->O$BLK.SUBLK$(BLK$->O$BLK.NSUBLKS-
             10562                          1)->O$BLK.CODE - 1,1);

  10562 10 003406   001061 473400 7                  LDP3    BLK$
        10 003407   300001 221100                    LDX1    1,,PR3
        10 003410   300002 474511                    LDP4    2,X1,PR3
        10 003411   400000 236100                    LDQ     0,,PR4
        10 003412   777777 376007                    ANQ     -1,DL
        10 003413   000001 136007                    SBLQ    1,DL
        10 003414   000043 736000                    QLS     35
        10 003415   000011 772000                    QRL     9
        10 003416   000715 676000 7                  ERQ     SYSCON_FPT+7
        10 003417   000400 376003                    ANQ     256,DU
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:203  
        10 003420   000715 656000 7                  ERSQ    SYSCON_FPT+7

     1399    10563    5                 DO J = 1 TO BLK$->O$BLK.NSUBLKS - 2;

  10563 10 003421   000001 235007                    LDA     1,DL
        10 003422   001070 755000 7                  STA     J
        10 003423   003510 710000 10                 TRA     s:10577+1

     1400    10564    5                    SYSCON_FPT.V.FLAG# = BLK$->O$BLK.SUBLK$(J)->O$BLK.CODE;

  10564 10 003424   001061 470400 7                  LDP0    BLK$
        10 003425   001070 720000 7                  LXL0    J
        10 003426   000003 471510                    LDP1    3,X0,PR0
        10 003427   100000 236100                    LDQ     0,,PR1
        10 003430   000033 736000                    QLS     27
        10 003431   000715 552040 7                  STBQ    SYSCON_FPT+7,'40'O

     1401    10565    5                    CALL M$SYSCON(SYSCON_FPT) ALTRET(SYSCON_ERR1);

  10565 10 003432   000706 630400 7                  EPPR0   SYSCON_FPT
        10 003433   470007 713400                    CLIMB   alt,+28679
        10 003434   400400 401760                    pmme    nvectors=2
        10 003435   003477 702000 10                 TSX2    SYSCON_ERR1

     1402    10566    5                    IF NOT DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#

  10566 10 003436   000000 236007 xsym               LDQ     M$CONF,DL
        10 003437   000000 470400 11                 LDP0    0
        10 003440   000000 471500                    LDP1    0,,PR0
        10 003441   100000 473506                    LDP3    0,QL,PR1
        10 003442   300031 236100                    LDQ     25,,PR3
        10 003443   020000 316007                    CANQ    8192,DL
        10 003444   003451 601000 10                 TNZ     s:10568

     1403    10567    5                       THEN CALL M$OPEN(OPEN_CONFIG) ALTRET(CONFIG_ERR);

  10567 10 003445   000036 630400 7                  EPPR0   OPEN_CONFIG
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:204  
        10 003446   450000 713400                    CLIMB   alt,open
        10 003447   410400 401760                    pmme    nvectors=18
        10 003450   004113 702000 10                 TSX2    CONFIG_ERR

     1404    10568    5                    CONFIG_KEY.COUNT = 8;

  10568 10 003451   010000 236003                    LDQ     4096,DU
        10 003452   003742 552040 7                  STBQ    CONFIG_KEY,'40'O

     1405    10569    5                    CONFIG_KEY.TEXT = SUB_BUF_1.TEXT;

  10569 10 003453   040000 100400                    MLR     fill='040'O
        10 003454   003745 200010 7                  ADSC9   SUB_BUF_1                cn=1,n=8
        10 003455   003742 200010 7                  ADSC9   CONFIG_KEY               cn=1,n=8

     1406    10570    5                    CALL M$READ(READ_CONFIG) ALTRET(CONFIG_ERR);

  10570 10 003456   000224 630400 7                  EPPR0   READ_CONFIG
        10 003457   440000 713400                    CLIMB   alt,read
        10 003460   401400 401760                    pmme    nvectors=4
        10 003461   004113 702000 10                 TSX2    CONFIG_ERR

     1407    10571    5                    IF BLK$->O$BLK.SUBLK$(J)->O$BLK.CODE = %TDOK#

  10571 10 003462   001061 470400 7                  LDP0    BLK$
        10 003463   001070 720000 7                  LXL0    J
        10 003464   000003 471510                    LDP1    3,X0,PR0
        10 003465   100000 721100                    LXL1    0,,PR1
        10 003466   000001 101003                    CMPX1   1,DU
        10 003467   003476 601000 10                 TNZ     s:10573

     1408    10572    5                       THEN CONFIG$->TD$MPC.FLAGS.TDOK = SYSCON_FPT.V.FLAGVAL#;

  10572 10 003470   001066 473400 7                  LDP3    CONFIG$
        10 003471   000715 236000 7                  LDQ     SYSCON_FPT+7
        10 003472   000012 772000                    QRL     10
        10 003473   300012 676100                    ERQ     10,,PR3
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:205  
        10 003474   200000 376007                    ANQ     65536,DL
        10 003475   300012 656100                    ERSQ    10,,PR3

     1409    10573    6                    DO WHILE('0'B);  /* DO NEVER */

  10573 10 003476   003507 710000 10                 TRA     s:10577

     1410    10574    6         SYSCON_ERR1:   CALL TSE$ERROR(0);

  10574 10 003477   000034 630400 11    SYSCON_ERR1  EPPR0   28
        10 003500   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 003501   000000 701000 xent               TSX1    TSE$ERROR
        10 003502   000000 011000                    NOP     0

     1411    10575    6                        CALL TSE$ERROR(%E$T_MPCSETERR);

  10575 10 003503   000132 630400 11                 EPPR0   90
        10 003504   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 003505   000000 701000 xent               TSX1    TSE$ERROR
        10 003506   000000 011000                    NOP     0

     1412    10576    6                       END;  /* DO NEVER */

     1413    10577    5                    END;  /* DO J */

  10577 10 003507   001070 054000 7                  AOS     J
        10 003510   001061 470400 7                  LDP0    BLK$
        10 003511   000001 236100                    LDQ     1,,PR0
        10 003512   000022 772000                    QRL     18
        10 003513   000002 136007                    SBLQ    2,DL
        10 003514   001070 116000 7                  CMPQ    J
        10 003515   003424 605000 10                 TPL     s:10564

     1414    10578    4                 IF DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#

  10578 10 003516   000000 236007 xsym               LDQ     M$CONF,DL
        10 003517   000000 471400 11                 LDP1    0
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:206  
        10 003520   100000 473500                    LDP3    0,,PR1
        10 003521   300000 474506                    LDP4    0,QL,PR3
        10 003522   400031 236100                    LDQ     25,,PR4
        10 003523   020000 316007                    CANQ    8192,DL
        10 003524   004101 600000 10                 TZE     NEXT_SET

     1415    10579    4                    THEN CALL M$CLOSE(CLOSE_CONFIG) ALTRET(CONFIG_ERR);

  10579 10 003525   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 003526   450001 713400                    CLIMB   alt,close
        10 003527   406000 401760                    pmme    nvectors=13
        10 003530   004113 702000 10                 TSX2    CONFIG_ERR
        10 003531   004101 710000 10                 TRA     NEXT_SET

     1416    10580    4              CASE(TSS_FEP);

     1417    10581    4                 SUB_BUF_1.COUNT = CMD$->TS$FEP.LEN;

  10581 10 003532   100001 236100                    LDQ     1,,PR1
        10 003533   000011 736000                    QLS     9
        10 003534   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1418    10582    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,0,CMD$->TS$FEP.LEN),CMD$->TS$FEP.
             10582                          FEP);

  10582 10 003535   100001 221100                    LDX1    1,,PR1
        10 003536   100002 236100                    LDQ     2,,PR1
        10 003537   777777 376007                    ANQ     -1,DL
        10 003540   000000 235003                    LDA     0,DU
        10 003541   200056 757100                    STAQ    I+4,,AUTO
        10 003542   000040 301500                    BTD
        10 003543   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 003544   003745 230011 7                  NDSC9   SUB_BUF_1                cn=1,s=nosgn,sf=0,n=*X1

     1419    10583    4                 SYSCON_FPT.V.COMPONENT# = %FEP##;

  10583 10 003545   000004 236003                    LDQ     4,DU
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:207  
        10 003546   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1420    10584    4                 SYSCON_FPT.V.CHAN# = CMD$->TS$FEP.FEP;

  10584 10 003547   100002 236100                    LDQ     2,,PR1
        10 003550   000712 552004 7                  STBQ    SYSCON_FPT+4,'04'O

     1421    10585    4                SYSCON_FPT.V.FLAGVAL# = BINBIT(BLK$->O$BLK.SUBLK$(BLK$->O$BLK.NSUBLKS-
             10585                          1)->O$BLK.CODE - 1,1);

  10585 10 003551   001061 470400 7                  LDP0    BLK$
        10 003552   000001 221100                    LDX1    1,,PR0
        10 003553   000002 473511                    LDP3    2,X1,PR0
        10 003554   300000 236100                    LDQ     0,,PR3
        10 003555   777777 376007                    ANQ     -1,DL
        10 003556   000001 136007                    SBLQ    1,DL
        10 003557   000043 736000                    QLS     35
        10 003560   000011 772000                    QRL     9
        10 003561   000715 676000 7                  ERQ     SYSCON_FPT+7
        10 003562   000400 376003                    ANQ     256,DU
        10 003563   000715 656000 7                  ERSQ    SYSCON_FPT+7

     1422    10586    5                 DO J = 1 TO BLK$->O$BLK.NSUBLKS - 2;

  10586 10 003564   000001 236007                    LDQ     1,DL
        10 003565   001070 756000 7                  STQ     J
        10 003566   003665 710000 10                 TRA     s:10601+1

     1423    10587    5                    SYSCON_FPT.V.FLAG# = BLK$->O$BLK.SUBLK$(J)->O$BLK.CODE;

  10587 10 003567   001061 470400 7                  LDP0    BLK$
        10 003570   001070 720000 7                  LXL0    J
        10 003571   000003 471510                    LDP1    3,X0,PR0
        10 003572   100000 236100                    LDQ     0,,PR1
        10 003573   000033 736000                    QLS     27
        10 003574   000715 552040 7                  STBQ    SYSCON_FPT+7,'40'O

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:208  
     1424    10588    5                    CALL M$SYSCON(SYSCON_FPT) ALTRET(SYSCON_ERR2);

  10588 10 003575   000706 630400 7                  EPPR0   SYSCON_FPT
        10 003576   470007 713400                    CLIMB   alt,+28679
        10 003577   400400 401760                    pmme    nvectors=2
        10 003600   003654 702000 10                 TSX2    SYSCON_ERR2

     1425    10589    5                    IF NOT DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#

  10589 10 003601   000000 236007 xsym               LDQ     M$CONF,DL
        10 003602   000000 470400 11                 LDP0    0
        10 003603   000000 471500                    LDP1    0,,PR0
        10 003604   100000 473506                    LDP3    0,QL,PR1
        10 003605   300031 236100                    LDQ     25,,PR3
        10 003606   020000 316007                    CANQ    8192,DL
        10 003607   003614 601000 10                 TNZ     s:10591

     1426    10590    5                       THEN CALL M$OPEN(OPEN_CONFIG) ALTRET(CONFIG_ERR);

  10590 10 003610   000036 630400 7                  EPPR0   OPEN_CONFIG
        10 003611   450000 713400                    CLIMB   alt,open
        10 003612   410400 401760                    pmme    nvectors=18
        10 003613   004113 702000 10                 TSX2    CONFIG_ERR

     1427    10591    5                    CONFIG_KEY.COUNT = 4;

  10591 10 003614   004000 236003                    LDQ     2048,DU
        10 003615   003742 552040 7                  STBQ    CONFIG_KEY,'40'O

     1428    10592    5                    CONFIG_KEY.TEXT = 'IOM';

  10592 10 003616   040000 100400                    MLR     fill='040'O
        10 003617   000301 000003 8                  ADSC9   TEXTC_VEC+7              cn=0,n=3
        10 003620   003742 200010 7                  ADSC9   CONFIG_KEY               cn=1,n=8

     1429    10593    5                    CALL BINCHAR(SUBSTR(CONFIG_KEY.TEXT,3,1),CMD$->TS$FEP.IOM);

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:209  
  10593 10 003621   001062 470400 7                  LDP0    CMD$
        10 003622   000001 236100                    LDQ     1,,PR0
        10 003623   777777 376007                    ANQ     -1,DL
        10 003624   000000 235003                    LDA     0,DU
        10 003625   200056 757100                    STAQ    I+4,,AUTO
        10 003626   000000 301500                    BTD
        10 003627   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 003630   003743 030001 7                  NDSC9   CONFIG_KEY+1             cn=0,s=nosgn,sf=0,n=1

     1430    10594    5                    CALL M$READ(READ_CONFIG) ALTRET(CONFIG_ERR);

  10594 10 003631   000224 630400 7                  EPPR0   READ_CONFIG
        10 003632   440000 713400                    CLIMB   alt,read
        10 003633   401400 401760                    pmme    nvectors=4
        10 003634   004113 702000 10                 TSX2    CONFIG_ERR

     1431    10595    5                    IF BLK$->O$BLK.SUBLK$(J)->O$BLK.CODE = %TDOK#

  10595 10 003635   001061 470400 7                  LDP0    BLK$
        10 003636   001070 720000 7                  LXL0    J
        10 003637   000003 471510                    LDP1    3,X0,PR0
        10 003640   100000 721100                    LXL1    0,,PR1
        10 003641   000001 101003                    CMPX1   1,DU
        10 003642   003653 601000 10                 TNZ     s:10597

     1432    10596    5                      THEN CONFIG$->TD$IOM.FLAGS.TDOK(CMD$->TS$FEP.CHAN) = SYSCON_FPT.
             10596                                V.FLAGVAL#;

  10596 10 003643   001062 473400 7                  LDP3    CMD$
        10 003644   300002 236100                    LDQ     2,,PR3
        10 003645   000021 772000                    QRL     17
        10 003646   000043 376000 11                 ANQ     35
        10 003647   001066 474400 7                  LDP4    CONFIG$
        10 003650   003106 060400                    CSL     bolr='003'O
        10 003651   000715 200001 7                  BDSC    SYSCON_FPT+7             by=1,bit=0,n=1
        10 003652   400400 010001                    BDSC    256,Q,PR4                by=0,bit=1,n=1

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:210  
     1433    10597    6                    DO WHILE('0'B);  /* DO NEVER */

  10597 10 003653   003664 710000 10                 TRA     s:10601

     1434    10598    6         SYSCON_ERR2:   CALL TSE$ERROR(0);

  10598 10 003654   000034 630400 11    SYSCON_ERR2  EPPR0   28
        10 003655   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 003656   000000 701000 xent               TSX1    TSE$ERROR
        10 003657   000000 011000                    NOP     0

     1435    10599    6                        CALL TSE$ERROR(%E$T_FEPSETERR);

  10599 10 003660   000134 630400 11                 EPPR0   92
        10 003661   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 003662   000000 701000 xent               TSX1    TSE$ERROR
        10 003663   000000 011000                    NOP     0

     1436    10600    6                       END;  /* DO NEVER */

     1437    10601    5                    END;  /* DO J */

  10601 10 003664   001070 054000 7                  AOS     J
        10 003665   001061 470400 7                  LDP0    BLK$
        10 003666   000001 236100                    LDQ     1,,PR0
        10 003667   000022 772000                    QRL     18
        10 003670   000002 136007                    SBLQ    2,DL
        10 003671   001070 116000 7                  CMPQ    J
        10 003672   003567 605000 10                 TPL     s:10587

     1438    10602    4                 IF DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#

  10602 10 003673   000000 236007 xsym               LDQ     M$CONF,DL
        10 003674   000000 471400 11                 LDP1    0
        10 003675   100000 473500                    LDP3    0,,PR1
        10 003676   300000 474506                    LDP4    0,QL,PR3
        10 003677   400031 236100                    LDQ     25,,PR4
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:211  
        10 003700   020000 316007                    CANQ    8192,DL
        10 003701   004101 600000 10                 TZE     NEXT_SET

     1439    10603    4                    THEN CALL M$CLOSE(CLOSE_CONFIG) ALTRET(CONFIG_ERR);

  10603 10 003702   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 003703   450001 713400                    CLIMB   alt,close
        10 003704   406000 401760                    pmme    nvectors=13
        10 003705   004113 702000 10                 TSX2    CONFIG_ERR
        10 003706   004101 710000 10                 TRA     NEXT_SET

     1440    10604    4              CASE(TSS_CHAN);

     1441    10605    4                 SYSCON_FPT.V.COMPONENT# = %CHANNEL#;

  10605 10 003707   000001 236003                    LDQ     1,DU
        10 003710   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1442    10606    4                 SYSCON_FPT.V.IOM# = CMD$->TS$CHAN.IOM;

  10606 10 003711   100001 236100                    LDQ     1,,PR1
        10 003712   000011 736000                    QLS     9
        10 003713   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

     1443    10607    5                 DO K = CMD$->TS$CHAN.LOCHAN TO CMD$->TS$CHAN.HICHAN;

  10607 10 003714   100002 235100                    LDA     2,,PR1
        10 003715   001071 755000 7                  STA     K
        10 003716   004061 710000 10                 TRA     s:10630+1

     1444    10608    5                    SYSCON_FPT.V.CHAN# = K;

  10608 10 003717   001071 236000 7                  LDQ     K
        10 003720   000712 552004 7                  STBQ    SYSCON_FPT+4,'04'O

     1445    10609    5                    SUB_BUF_1.COUNT = 1;

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:212  
  10609 10 003721   001000 236003                    LDQ     512,DU
        10 003722   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1446    10610    5                    CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,0,1),CMD$->TS$CHAN.IOM);

  10610 10 003723   001062 470400 7                  LDP0    CMD$
        10 003724   000001 235100                    LDA     1,,PR0
        10 003725   000044 773000                    LRL     36
        10 003726   200056 757100                    STAQ    I+4,,AUTO
        10 003727   000000 301500                    BTD
        10 003730   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 003731   003745 230001 7                  NDSC9   SUB_BUF_1                cn=1,s=nosgn,sf=0,n=1

     1447    10611    5                    SUB_BUF_2.COUNT = 3;

  10611 10 003732   003000 236003                    LDQ     1536,DU
        10 003733   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

     1448    10612    5                    CALL BINCHAR(SUBSTR(SUB_BUF_2.TEXT,0,3),K);

  10612 10 003734   000000 301400                    BTD
        10 003735   001071 000004 7                  NDSC9   K                        cn=0,s=lsgnf,sf=0,n=4
        10 003736   003755 230003 7                  NDSC9   SUB_BUF_2                cn=1,s=nosgn,sf=0,n=3

     1449    10613    5                    SYSCON_FPT.V.FLAGVAL# = BINBIT(BLK$->O$BLK.SUBLK$(BLK$->O$BLK.
             10613                             NSUBLKS-1)->O$BLK.CODE - 1,1);

  10613 10 003737   001061 471400 7                  LDP1    BLK$
        10 003740   100001 220100                    LDX0    1,,PR1
        10 003741   100002 473510                    LDP3    2,X0,PR1
        10 003742   300000 236100                    LDQ     0,,PR3
        10 003743   777777 376007                    ANQ     -1,DL
        10 003744   000001 136007                    SBLQ    1,DL
        10 003745   000043 736000                    QLS     35
        10 003746   000011 772000                    QRL     9
        10 003747   000715 676000 7                  ERQ     SYSCON_FPT+7
        10 003750   000400 376003                    ANQ     256,DU
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:213  
        10 003751   000715 656000 7                  ERSQ    SYSCON_FPT+7

     1450    10614    6                    DO J = 1 TO BLK$->O$BLK.NSUBLKS - 2;

  10614 10 003752   000001 235007                    LDA     1,DL
        10 003753   001070 755000 7                  STA     J
        10 003754   004052 710000 10                 TRA     s:10629+1

     1451    10615    6                       SYSCON_FPT.V.FLAG# = BLK$->O$BLK.SUBLK$(J)->O$BLK.CODE;

  10615 10 003755   001061 470400 7                  LDP0    BLK$
        10 003756   001070 720000 7                  LXL0    J
        10 003757   000003 471510                    LDP1    3,X0,PR0
        10 003760   100000 236100                    LDQ     0,,PR1
        10 003761   000033 736000                    QLS     27
        10 003762   000715 552040 7                  STBQ    SYSCON_FPT+7,'40'O

     1452    10616    6                       CALL M$SYSCON(SYSCON_FPT) ALTRET(SYSCON_ERR3);

  10616 10 003763   000706 630400 7                  EPPR0   SYSCON_FPT
        10 003764   470007 713400                    CLIMB   alt,+28679
        10 003765   400400 401760                    pmme    nvectors=2
        10 003766   004041 702000 10                 TSX2    SYSCON_ERR3

     1453    10617    6                       IF NOT DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#

  10617 10 003767   000000 236007 xsym               LDQ     M$CONF,DL
        10 003770   000000 470400 11                 LDP0    0
        10 003771   000000 471500                    LDP1    0,,PR0
        10 003772   100000 473506                    LDP3    0,QL,PR1
        10 003773   300031 236100                    LDQ     25,,PR3
        10 003774   020000 316007                    CANQ    8192,DL
        10 003775   004002 601000 10                 TNZ     s:10619

     1454    10618    6                          THEN CALL M$OPEN(OPEN_CONFIG) ALTRET(CONFIG_ERR);

  10618 10 003776   000036 630400 7                  EPPR0   OPEN_CONFIG
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:214  
        10 003777   450000 713400                    CLIMB   alt,open
        10 004000   410400 401760                    pmme    nvectors=18
        10 004001   004113 702000 10                 TSX2    CONFIG_ERR

     1455    10619    6                       CONFIG_KEY.COUNT = 4;

  10619 10 004002   004000 236003                    LDQ     2048,DU
        10 004003   003742 552040 7                  STBQ    CONFIG_KEY,'40'O

     1456    10620    6                       CONFIG_KEY.TEXT = 'IOM';

  10620 10 004004   040000 100400                    MLR     fill='040'O
        10 004005   000301 000003 8                  ADSC9   TEXTC_VEC+7              cn=0,n=3
        10 004006   003742 200010 7                  ADSC9   CONFIG_KEY               cn=1,n=8

     1457    10621    6                       CALL BINCHAR(SUBSTR(CONFIG_KEY.TEXT,3,1),CMD$->TS$CHAN.IOM);

  10621 10 004007   001062 470400 7                  LDP0    CMD$
        10 004010   000001 235100                    LDA     1,,PR0
        10 004011   000044 773000                    LRL     36
        10 004012   200056 757100                    STAQ    I+4,,AUTO
        10 004013   000000 301500                    BTD
        10 004014   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 004015   003743 030001 7                  NDSC9   CONFIG_KEY+1             cn=0,s=nosgn,sf=0,n=1

     1458    10622    6                       CALL M$READ(READ_CONFIG) ALTRET(CONFIG_ERR);

  10622 10 004016   000224 630400 7                  EPPR0   READ_CONFIG
        10 004017   440000 713400                    CLIMB   alt,read
        10 004020   401400 401760                    pmme    nvectors=4
        10 004021   004113 702000 10                 TSX2    CONFIG_ERR

     1459    10623    6                       IF BLK$->O$BLK.SUBLK$(J)->O$BLK.CODE = %TDOK#

  10623 10 004022   001061 470400 7                  LDP0    BLK$
        10 004023   001070 720000 7                  LXL0    J
        10 004024   000003 471510                    LDP1    3,X0,PR0
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:215  
        10 004025   100000 721100                    LXL1    0,,PR1
        10 004026   000001 101003                    CMPX1   1,DU
        10 004027   004040 601000 10                 TNZ     s:10625

     1460    10624    6                          THEN CONFIG$->TD$IOM.FLAGS.TDOK(K) = SYSCON_FPT.V.FLAGVAL#;

  10624 10 004030   001071 235000 7                  LDA     K
        10 004031   000001 735000                    ALS     1
        10 004032   004034 605000 10                 TPL     s:10624+4
        10 004033   000044 035003                    ADLA    36,DU
        10 004034   001066 473400 7                  LDP3    CONFIG$
        10 004035   003105 060400                    CSL     bolr='003'O
        10 004036   000715 200001 7                  BDSC    SYSCON_FPT+7             by=1,bit=0,n=1
        10 004037   300400 010001                    BDSC    256,A,PR3                by=0,bit=1,n=1

     1461    10625    7                       DO WHILE('0'B);  /* DO NEVER */

  10625 10 004040   004051 710000 10                 TRA     s:10629

     1462    10626    7            SYSCON_ERR3:   CALL TSE$ERROR(0);

  10626 10 004041   000034 630400 11    SYSCON_ERR3  EPPR0   28
        10 004042   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 004043   000000 701000 xent               TSX1    TSE$ERROR
        10 004044   000000 011000                    NOP     0

     1463    10627    7                           CALL TSE$ERROR(%E$T_CHANSETERR);

  10627 10 004045   000136 630400 11                 EPPR0   94
        10 004046   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 004047   000000 701000 xent               TSX1    TSE$ERROR
        10 004050   000000 011000                    NOP     0

     1464    10628    7                          END;  /* DO NEVER */

     1465    10629    6                       END;  /* DO J */

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:216  
  10629 10 004051   001070 054000 7                  AOS     J
        10 004052   001061 470400 7                  LDP0    BLK$
        10 004053   000001 236100                    LDQ     1,,PR0
        10 004054   000022 772000                    QRL     18
        10 004055   000002 136007                    SBLQ    2,DL
        10 004056   001070 116000 7                  CMPQ    J
        10 004057   003755 605000 10                 TPL     s:10615

     1466    10630    5                    END;  /* DO K */

  10630 10 004060   001071 054000 7                  AOS     K
        10 004061   001062 470400 7                  LDP0    CMD$
        10 004062   000003 236100                    LDQ     3,,PR0
        10 004063   003717 604000 10                 TMI     s:10608
        10 004064   001071 116000 7                  CMPQ    K
        10 004065   003717 605000 10                 TPL     s:10608

     1467    10631    4                 IF DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#

  10631 10 004066   000000 236007 xsym               LDQ     M$CONF,DL
        10 004067   000000 471400 11                 LDP1    0
        10 004070   100000 473500                    LDP3    0,,PR1
        10 004071   300000 474506                    LDP4    0,QL,PR3
        10 004072   400031 236100                    LDQ     25,,PR4
        10 004073   020000 316007                    CANQ    8192,DL
        10 004074   004101 600000 10                 TZE     NEXT_SET

     1468    10632    4                    THEN CALL M$CLOSE(CLOSE_CONFIG) ALTRET(CONFIG_ERR);

  10632 10 004075   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 004076   450001 713400                    CLIMB   alt,close
        10 004077   406000 401760                    pmme    nvectors=13
        10 004100   004113 702000 10                 TSX2    CONFIG_ERR

     1469    10633    4              END;  /* DO CASE CODE */

     1470    10634    3   NEXT_SET:
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:217  
     1471    10635    3           CMD$ = PINCRW(CMD$,CMD$->TS$DEV.SIZE);

  10635 10 004101   001062 470400 7     NEXT_SET     LDP0    CMD$
        10 004102   000000 220100                    LDX0    0,,PR0
        10 004103   000000 636010                    EAQ     0,X0
        10 004104   001062 036000 7                  ADLQ    CMD$
        10 004105   001062 756000 7                  STQ     CMD$

     1472    10636    3           END;  /* DO WHILE */

  10636 10 004106   001062 470400 7                  LDP0    CMD$
        10 004107   000000 720100                    LXL0    0,,PR0
        10 004110   003210 601000 10                 TNZ     s:10530

     1473    10637    2        RETURN;

  10637 10 004111   200040 221300                    LDX1  ! RANGE_FLAG+1,,AUTO
        10 004112   000001 702211                    TSX2  ! 1,X1

     1474    10638    2   CONFIG_ERR:
     1475    10639    2        IF DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#

  10639 10 004113   000000 236007 xsym  CONFIG_ERR   LDQ     M$CONF,DL
        10 004114   000000 470400 11                 LDP0    0
        10 004115   000000 471500                    LDP1    0,,PR0
        10 004116   100000 473506                    LDP3    0,QL,PR1
        10 004117   300031 236100                    LDQ     25,,PR3
        10 004120   020000 316007                    CANQ    8192,DL
        10 004121   004125 600000 10                 TZE     s:10641

     1476    10640    2           THEN CALL M$CLOSE(CLOSE_CONFIG);

  10640 10 004122   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 004123   050001 713400                    CLIMB   close
        10 004124   406000 401760                    pmme    nvectors=13

     1477    10641    2        CALL TSE$ERROR(%E$T_SETCONFIGERR);
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:218  

  10641 10 004125   000140 630400 11                 EPPR0   96
        10 004126   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 004127   000000 701000 xent               TSX1    TSE$ERROR
        10 004130   000000 011000                    NOP     0

     1478    10642    2        GOTO NEXT_SET;

  10642 10 004131   004101 710000 10                 TRA     NEXT_SET

     1479    10643        /**/
     1480    10644        /*E*    ERROR:  TSS-E$T_SETCONFIGERR-0
     1481    10645                MESSAGE: Unable to access :CONFIG file to save flag value just set.
     1482    10646                         The flag will return to its old value after a recovery.
     1483    10647                DESCRIPTION: Unable to save SET command in :CONFIG */
     1484    10648        /*E*  ERROR:  TSS-E$T_DEVSETERR-0
     1485    10649              MESSAGE: Unable to set flag for device %U1.
     1486    10650              DESCRIPTION:  see message.       */
     1487    10651        /*E*  ERROR:  TSS-E$T_MPCSETERR-0
     1488    10652              MESSAGE: Unable to set flag for MPC %U1.
     1489    10653              DESCRIPTION:  SEE MESSAGE    */
     1490    10654        /*E*  ERROR:  TSS-E$T_FEPSETERR-0
     1491    10655              MESSAGE:  Unable to set flag for FEP%U1.
     1492    10656              DESCRIPTION:  SEE MESSAGE .      */
     1493    10657        /*E* ERROR:  TSS-E$T_CHANSETERR-0
     1494    10658             MESSAGE: Unable to set flag for IOM%U1,CHAN%U2.
     1495    10659             DESCRIPTION:  SEE MESSAGE          */
     1496    10660    2   END EXEC_SET;
     1497    10661        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:219  
     1498    10662        /**/
     1499    10663    1   EXEC_DISP: PROC;

  10663 10 004132   200040 741300       EXEC_DISP    STX1  ! RANGE_FLAG+1,,AUTO

     1500    10664        /**/
     1501    10665    2           TS_PRINT_HEADING = '1'B;

  10665 10 004133   400000 236003                    LDQ     -131072,DU
        10 004134   001074 756000 7                  STQ     TS_PRINT_HEADING

     1502    10666    2           CMD$ = PINCRW(CMD$,SIZEW(TS$CMDWD));

  10666 10 004135   001062 236000 7                  LDQ     CMD$
        10 004136   000001 036003                    ADLQ    1,DU
        10 004137   001062 756000 7                  STQ     CMD$

     1503    10667    2           SYSCON_FPT.V.FUNCTION# = %DISPLAY#;

  10667 10 004140   003000 236003                    LDQ     1536,DU
        10 004141   000712 552040 7                  STBQ    SYSCON_FPT+4,'40'O

     1504    10668        /**/
     1505    10669    3           DO WHILE (CMD$ -> TS$DEV.SIZE ~= 0); /* DISPLAY REQUESTED             */

  10669 10 004142   001062 470400 7                  LDP0    CMD$
        10 004143   000000 220100                    LDX0    0,,PR0
        10 004144   006562 600000 10                 TZE     s:11201

     1506    10670    4              DO CASE (CMD$ -> TS$DEV.CODE);

  10670 10 004145   001062 470400 7                  LDP0    CMD$
        10 004146   000000 720100                    LXL0    0,,PR0
        10 004147   000015 100003                    CMPX0   13,DU
        10 004150   004152 602010 10                 TNC     s:10670+5,X0
        10 004151   006552 710000 10                 TRA     s:11199
        10 004152   006552 710000 10                 TRA     s:11199
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:220  
        10 004153   005571 710000 10                 TRA     s:10977
        10 004154   005715 710000 10                 TRA     s:11019
        10 004155   005767 710000 10                 TRA     s:11039
        10 004156   006135 710000 10                 TRA     s:11081
        10 004157   006232 710000 10                 TRA     s:11108
        10 004160   006054 710000 10                 TRA     s:11060
        10 004161   004167 710000 10                 TRA     s:10672
        10 004162   004167 710000 10                 TRA     s:10672
        10 004163   005206 710000 10                 TRA     s:10892
        10 004164   006447 710000 10                 TRA     s:11175
        10 004165   006511 710000 10                 TRA     s:11187
        10 004166   005031 710000 10                 TRA     s:10847

     1507    10671    4               CASE (TSS_ALL,TSS_DIPART);

     1508    10672    4                  CONFIG_KEY.COUNT = 1;        /* READ HEAD RECORD                  */

  10672 10 004167   001000 236003                    LDQ     512,DU
        10 004170   003742 552040 7                  STBQ    CONFIG_KEY,'40'O

     1509    10673    4                  CONFIG_KEY.TEXT = BINASC(0);

  10673 10 004171   040000 100400                    MLR     fill='040'O
        10 004172   000141 000001 11                 ADSC9   97                       cn=0,n=1
        10 004173   003742 200010 7                  ADSC9   CONFIG_KEY               cn=1,n=8

     1510    10674    4                  CALL M$OPEN (OPEN_CONFIG) ALTRET (CONFIG_ERR);

  10674 10 004174   000036 630400 7                  EPPR0   OPEN_CONFIG
        10 004175   450000 713400                    CLIMB   alt,open
        10 004176   410400 401760                    pmme    nvectors=18
        10 004177   006564 702000 10                 TSX2    CONFIG_ERR

     1511    10675    4                  CALL M$READ (READ_CONFIG) ALTRET (CONFIG_ERR);

  10675 10 004200   000224 630400 7                  EPPR0   READ_CONFIG
        10 004201   440000 713400                    CLIMB   alt,read
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:221  
        10 004202   401400 401760                    pmme    nvectors=4
        10 004203   006564 702000 10                 TSX2    CONFIG_ERR

     1512    10676    4                  CALL M$CLOSE (CLOSE_CONFIG) ALTRET (CONFIG_ERR);

  10676 10 004204   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 004205   450001 713400                    CLIMB   alt,close
        10 004206   406000 401760                    pmme    nvectors=13
        10 004207   006564 702000 10                 TSX2    CONFIG_ERR

     1513    10677            /**/
     1514    10678    4                  SYSCON_FPT.V.COMPONENT# = %CHANNEL#; /* ALL CHANNELS              */

  10678 10 004210   000001 236003                    LDQ     1,DU
        10 004211   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1515    10679    5                  DO I = 0 TO CONFIG$ -> TD$HEAD.NUMIOMS - 1;

  10679 10 004212   001067 450000 7                  STZ     I
        10 004213   004304 710000 10                 TRA     s:10709+1

     1516    10680    5                     SYSCON_FPT.V.IOM# = I;

  10680 10 004214   001067 236000 7                  LDQ     I
        10 004215   000011 736000                    QLS     9
        10 004216   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

     1517    10681    5                     SUB_BUF_1.COUNT = 1;

  10681 10 004217   001000 236003                    LDQ     512,DU
        10 004220   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1518    10682    5                     CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,0,1),I);

  10682 10 004221   000000 301400                    BTD
        10 004222   001067 000004 7                  NDSC9   I                        cn=0,s=lsgnf,sf=0,n=4
        10 004223   003745 230001 7                  NDSC9   SUB_BUF_1                cn=1,s=nosgn,sf=0,n=1
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:222  

     1519    10683            /**/
     1520    10684    6                     DO J = 8 TO %N_MAXCHANS-1;

  10684 10 004224   000010 235007                    LDA     8,DL
        10 004225   001070 755000 7                  STA     J
        10 004226   004300 710000 10                 TRA     NEXTCHAN+1

     1521    10685    6                        SYSCON_FPT.V.CHAN# = J;

  10685 10 004227   001070 236000 7                  LDQ     J
        10 004230   000712 552004 7                  STBQ    SYSCON_FPT+4,'04'O

     1522    10686            /**/
     1523    10687    6                        CALL M$SYSCON (SYSCON_FPT) ALTRET (NEXTCHAN);

  10687 10 004231   000706 630400 7                  EPPR0   SYSCON_FPT
        10 004232   470007 713400                    CLIMB   alt,+28679
        10 004233   400400 401760                    pmme    nvectors=2
        10 004234   004277 702000 10                 TSX2    NEXTCHAN

     1524    10688            /**/
     1525    10689    6                        SUB_BUF_2.COUNT = 3;

  10689 10 004235   003000 236003                    LDQ     1536,DU
        10 004236   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

     1526    10690    6                        CALL BINCHAR(SUBSTR(SUB_BUF_2.TEXT,0,3),J);

  10690 10 004237   000000 301400                    BTD
        10 004240   001070 000004 7                  NDSC9   J                        cn=0,s=lsgnf,sf=0,n=4
        10 004241   003755 230003 7                  NDSC9   SUB_BUF_2                cn=1,s=nosgn,sf=0,n=3

     1527    10691    7                        IF RESULTS.TDOK# THEN DO;

  10691 10 004242   004012 236000 7                  LDQ     RESULTS
        10 004243   200000 316003                    CANQ    65536,DU
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:223  
        10 004244   004253 600000 10                 TZE     s:10696

     1528    10692    7                           SUB_BUF_3.COUNT = 3;

  10692 10 004245   003000 236003                    LDQ     1536,DU
        10 004246   003765 552040 7                  STBQ    SUB_BUF_3,'40'O

     1529    10693    7                           SUB_BUF_3.TEXT = 'Yes';

  10693 10 004247   040000 100400                    MLR     fill='040'O
        10 004250   000305 000003 8                  ADSC9   TEXTC_VEC+11             cn=0,n=3
        10 004251   003765 200037 7                  ADSC9   SUB_BUF_3                cn=1,n=31

     1530    10694    7                           END;  /* IF */

  10694 10 004252   004260 710000 10                 TRA     s:10699

     1531    10695    7                        ELSE DO;

     1532    10696    7                           SUB_BUF_3.COUNT = 2;

  10696 10 004253   002000 236003                    LDQ     1024,DU
        10 004254   003765 552040 7                  STBQ    SUB_BUF_3,'40'O

     1533    10697    7                           SUB_BUF_3.TEXT = 'No';

  10697 10 004255   040000 100400                    MLR     fill='040'O
        10 004256   000306 000002 8                  ADSC9   TEXTC_VEC+12             cn=0,n=2
        10 004257   003765 200037 7                  ADSC9   SUB_BUF_3                cn=1,n=31

     1534    10698    7                           END;  /* ELSE */

     1535    10699    6                        CALL FIX_PART;

  10699 10 004260   006612 701000 10                 TSX1    FIX_PART
        10 004261   000000 011000                    NOP     0

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:224  
     1536    10700    6                        IF RESULTS.PART#

  10700 10 004262   004012 234000 7                  SZN     RESULTS
        10 004263   004271 605000 10                 TPL     s:10704

     1537    10701    6                           THEN CALL TSW$WRITE(CHANPART_VEC,VECTOR(SUB_BUF_1),VECTOR(
             10701                                    SUB_BUF_2),

  10701 10 004264   000152 630400 11                 EPPR0   106
        10 004265   000023 631400 xsym               EPPR1   B_VECTNIL+19
        10 004266   000000 701000 xent               TSX1    TSW$WRITE
        10 004267   000000 011000                    NOP     0
        10 004270   004277 710000 10                 TRA     NEXTCHAN

     1538    10702    6                                               VECTOR(PART),VECTOR(SUB_BUF_3));
     1539    10703    6                           ELSE
     1540    10704    6                        IF NOT TS_DIPART

  10704 10 004271   000000 234000 xsym               SZN     TS_DIPART
        10 004272   004277 604000 10                 TMI     NEXTCHAN

     1541    10705    6                          THEN CALL TSW$WRITE(CHANNOTPART_VEC,VECTOR(SUB_BUF_1),VECTOR
             10705                                    (SUB_BUF_2),

  10705 10 004273   000157 630400 11                 EPPR0   111
        10 004274   000023 631400 xsym               EPPR1   B_VECTNIL+19
        10 004275   000000 701000 xent               TSX1    TSW$WRITE
        10 004276   000000 011000                    NOP     0

     1542    10706    6                                               VECTOR(PART),VECTOR(SUB_BUF_3));
     1543    10707    6       NEXTCHAN:
     1544    10708    6                        END;

  10708 10 004277   001070 054000 7     NEXTCHAN     AOS     J
        10 004300   001070 235000 7                  LDA     J
        10 004301   000177 115007                    CMPA    127,DL
        10 004302   004227 604400 10                 TMOZ    s:10685
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:225  

     1545    10709    5                     END;

  10709 10 004303   001067 054000 7                  AOS     I
        10 004304   001066 470400 7                  LDP0    CONFIG$
        10 004305   000000 236100                    LDQ     0,,PR0
        10 004306   777777 376007                    ANQ     -1,DL
        10 004307   001067 116000 7                  CMPQ    I
        10 004310   004214 605400 10                 TPNZ    s:10680

     1546    10710    4                  SYSCON_FPT.V.COMPONENT# = %IOM##; /* DISPLAY ALL IOMS */

  10710 10 004311   000005 236003                    LDQ     5,DU
        10 004312   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1547    10711    5                  DO I = 0 TO CONFIG$->TD$HEAD.NUMIOMS - 1;

  10711 10 004313   001067 450000 7                  STZ     I
        10 004314   004354 710000 10                 TRA     s:10724+1

     1548    10712    5                     SYSCON_FPT.V.IOM# = I;

  10712 10 004315   001067 236000 7                  LDQ     I
        10 004316   000011 736000                    QLS     9
        10 004317   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

     1549    10713    5                     CALL M$SYSCON (SYSCON_FPT) WHENRETURN

  10713 10 004320   000706 630400 7                  EPPR0   SYSCON_FPT
        10 004321   470007 713400                    CLIMB   alt,+28679
        10 004322   400400 401760                    pmme    nvectors=2
        10 004323   004353 702000 10                 TSX2    s:10724

     1550    10714    6                        DO;

     1551    10715    6                           SUB_BUF_1.COUNT = 4;

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:226  
  10715 10 004324   004000 236003                    LDQ     2048,DU
        10 004325   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1552    10716    6                           SUB_BUF_1.TEXT = 'IOM';

  10716 10 004326   040000 100400                    MLR     fill='040'O
        10 004327   000301 000003 8                  ADSC9   TEXTC_VEC+7              cn=0,n=3
        10 004330   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     1553    10717    6                           CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,1),I);

  10717 10 004331   000000 301400                    BTD
        10 004332   001067 000004 7                  NDSC9   I                        cn=0,s=lsgnf,sf=0,n=4
        10 004333   003746 030001 7                  NDSC9   SUB_BUF_1+1              cn=0,s=nosgn,sf=0,n=1

     1554    10718    6                           CALL FIX_PART;

  10718 10 004334   006612 701000 10                 TSX1    FIX_PART
        10 004335   000000 011000                    NOP     0

     1555    10719    6                           IF RESULTS.PART# THEN

  10719 10 004336   004012 234000 7                  SZN     RESULTS
        10 004337   004345 605000 10                 TPL     s:10721

     1556    10720    6                             CALL TSW$WRITE (IOMPART_VEC,VECTOR(SUB_BUF_1),VECTOR(PART
             10720                                       ));

  10720 10 004340   000164 630400 11                 EPPR0   116
        10 004341   000021 631400 xsym               EPPR1   B_VECTNIL+17
        10 004342   000000 701000 xent               TSX1    TSW$WRITE
        10 004343   000000 011000                    NOP     0
        10 004344   004353 710000 10                 TRA     s:10724

     1557    10721    6                           ELSE IF NOT TS_DIPART THEN

  10721 10 004345   000000 234000 xsym               SZN     TS_DIPART
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:227  
        10 004346   004353 604000 10                 TMI     s:10724

     1558    10722    6                              CALL TSW$WRITE (IOMNOPART_VEC,VECTOR(SUB_BUF_1),VECTOR(
             10722                                       PART));

  10722 10 004347   000167 630400 11                 EPPR0   119
        10 004350   000021 631400 xsym               EPPR1   B_VECTNIL+17
        10 004351   000000 701000 xent               TSX1    TSW$WRITE
        10 004352   000000 011000                    NOP     0

     1559    10723    6                           END;

     1560    10724    5                     END;

  10724 10 004353   001067 054000 7                  AOS     I
        10 004354   001066 470400 7                  LDP0    CONFIG$
        10 004355   000000 236100                    LDQ     0,,PR0
        10 004356   777777 376007                    ANQ     -1,DL
        10 004357   001067 116000 7                  CMPQ    I
        10 004360   004315 605400 10                 TPNZ    s:10712

     1561    10725            /**/
     1562    10726    4                  SYSCON_FPT.V.COMPONENT# = %FEP##; /* DISPLAY ALL FEPS             */

  10726 10 004361   000004 236003                    LDQ     4,DU
        10 004362   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1563    10727    4                  IF (CONFIG$ -> TD$HEAD.NUMFEPS ~= 0) THEN

  10727 10 004363   000006 720100                    LXL0    6,,PR0
        10 004364   004465 600000 10                 TZE     s:10758

     1564    10728    5                  DO I = 1 TO 255;

  10728 10 004365   000001 235007                    LDA     1,DL
        10 004366   001067 755000 7                  STA     I

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:228  
     1565    10729    5                     SYSCON_FPT.V.CHAN# = I;

  10729 10 004367   001067 236000 7                  LDQ     I
        10 004370   000712 552004 7                  STBQ    SYSCON_FPT+4,'04'O

     1566    10730            /**/
     1567    10731    5                     CALL M$SYSCON (SYSCON_FPT)

  10731 10 004371   000706 630400 7                  EPPR0   SYSCON_FPT
        10 004372   470007 713400                    CLIMB   alt,+28679
        10 004373   400400 401760                    pmme    nvectors=2
        10 004374   004461 702000 10                 TSX2    s:10756

     1568    10732    6                     WHENRETURN DO;

     1569    10733            /**/
     1570    10734    6                     IF I < 10 THEN FEPLEN = 1;

  10734 10 004375   001067 235000 7                  LDA     I
        10 004376   000012 115007                    CMPA    10,DL
        10 004377   004403 605000 10                 TPL     s:10736

  10734 10 004400   000001 236007                    LDQ     1,DL
        10 004401   200006 756100                    STQ     FEPLEN,,AUTO
        10 004402   004412 710000 10                 TRA     s:10738

     1571    10735    6                        ELSE
     1572    10736    6                     IF I < 100 THEN FEPLEN = 2;

  10736 10 004403   000144 115007                    CMPA    100,DL
        10 004404   004410 605000 10                 TPL     s:10737

  10736 10 004405   000002 236007                    LDQ     2,DL
        10 004406   200006 756100                    STQ     FEPLEN,,AUTO
        10 004407   004412 710000 10                 TRA     s:10738

     1573    10737    6                        ELSE FEPLEN = 3;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:229  

  10737 10 004410   000003 236007                    LDQ     3,DL
        10 004411   200006 756100                    STQ     FEPLEN,,AUTO

     1574    10738    6                     SUB_BUF_1.COUNT = FEPLEN + 3;

  10738 10 004412   000003 036007                    ADLQ    3,DL
        10 004413   000033 736000                    QLS     27
        10 004414   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1575    10739    6                     SUB_BUF_1.TEXT = 'FEP';

  10739 10 004415   040000 100400                    MLR     fill='040'O
        10 004416   000300 000003 8                  ADSC9   TEXTC_VEC+6              cn=0,n=3
        10 004417   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     1576    10740    6                     CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,FEPLEN),I);

  10740 10 004420   200006 720100                    LXL0    FEPLEN,,AUTO
        10 004421   000040 301400                    BTD
        10 004422   001067 000004 7                  NDSC9   I                        cn=0,s=lsgnf,sf=0,n=4
        10 004423   003746 030010 7                  NDSC9   SUB_BUF_1+1              cn=0,s=nosgn,sf=0,n=*X0

     1577    10741    7                     IF RESULTS.TDOK# THEN DO;

  10741 10 004424   004012 236000 7                  LDQ     RESULTS
        10 004425   200000 316003                    CANQ    65536,DU
        10 004426   004435 600000 10                 TZE     s:10746

     1578    10742    7                        SUB_BUF_2.COUNT = 3;

  10742 10 004427   003000 236003                    LDQ     1536,DU
        10 004430   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

     1579    10743    7                        SUB_BUF_2.TEXT = 'Yes';

  10743 10 004431   040000 100400                    MLR     fill='040'O
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:230  
        10 004432   000305 000003 8                  ADSC9   TEXTC_VEC+11             cn=0,n=3
        10 004433   003755 200037 7                  ADSC9   SUB_BUF_2                cn=1,n=31

     1580    10744    7                        END;  /* IF */

  10744 10 004434   004442 710000 10                 TRA     s:10749

     1581    10745    7                     ELSE DO;

     1582    10746    7                        SUB_BUF_2.COUNT = 2;

  10746 10 004435   002000 236003                    LDQ     1024,DU
        10 004436   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

     1583    10747    7                        SUB_BUF_2.TEXT = 'No';

  10747 10 004437   040000 100400                    MLR     fill='040'O
        10 004440   000306 000002 8                  ADSC9   TEXTC_VEC+12             cn=0,n=2
        10 004441   003755 200037 7                  ADSC9   SUB_BUF_2                cn=1,n=31

     1584    10748    7                        END;  /* ELSE */

     1585    10749    6                     CALL FIX_PART;

  10749 10 004442   006612 701000 10                 TSX1    FIX_PART
        10 004443   000000 011000                    NOP     0

     1586    10750    6                     IF RESULTS.PART#

  10750 10 004444   004012 234000 7                  SZN     RESULTS
        10 004445   004453 605000 10                 TPL     s:10753

     1587    10751    6                       THEN CALL TSW$WRITE(DEVPART_VEC,VECTOR(SUB_BUF_1),VECTOR(PART),
             10751                                 VECTOR(SUB_BUF_2));

  10751 10 004446   000172 630400 11                 EPPR0   122
        10 004447   000022 631400 xsym               EPPR1   B_VECTNIL+18
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:231  
        10 004450   000000 701000 xent               TSX1    TSW$WRITE
        10 004451   000000 011000                    NOP     0
        10 004452   004461 710000 10                 TRA     s:10756

     1588    10752    6                        ELSE
     1589    10753    6                     IF NOT TS_DIPART

  10753 10 004453   000000 234000 xsym               SZN     TS_DIPART
        10 004454   004461 604000 10                 TMI     s:10756

     1590    10754    6                        THEN CALL TSW$WRITE(DEVNOTPART_VEC,VECTOR(SUB_BUF_1),VECTOR(
             10754                                 PART),VECTOR(SUB_BUF_2));

  10754 10 004455   000176 630400 11                 EPPR0   126
        10 004456   000022 631400 xsym               EPPR1   B_VECTNIL+18
        10 004457   000000 701000 xent               TSX1    TSW$WRITE
        10 004460   000000 011000                    NOP     0

     1591    10755    6                     END;

     1592    10756    5                        END;

  10756 10 004461   001067 054000 7                  AOS     I
        10 004462   001067 235000 7                  LDA     I
        10 004463   000377 115007                    CMPA    255,DL
        10 004464   004367 604400 10                 TMOZ    s:10729

     1593    10757            /**/
     1594    10758    4                  SYSCON_FPT.V.COMPONENT# = %MPC#; /* DO ALL MPCS                   */

  10758 10 004465   000003 236003                    LDQ     3,DU
        10 004466   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1595    10759    4                  J = CONFIG$ -> TD$HEAD.NUMUNITMPCS +

  10759 10 004467   001066 470400 7                  LDP0    CONFIG$
        10 004470   000002 236100                    LDQ     2,,PR0
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:232  
        10 004471   777777 376007                    ANQ     -1,DL
        10 004472   200056 756100                    STQ     I+4,,AUTO
        10 004473   000001 236100                    LDQ     1,,PR0
        10 004474   777777 376007                    ANQ     -1,DL
        10 004475   200056 036100                    ADLQ    I+4,,AUTO
        10 004476   200057 756100                    STQ     I+5,,AUTO
        10 004477   000003 236100                    LDQ     3,,PR0
        10 004500   777777 376007                    ANQ     -1,DL
        10 004501   200060 756100                    STQ     I+6,,AUTO
        10 004502   200057 236100                    LDQ     I+5,,AUTO
        10 004503   200060 036100                    ADLQ    I+6,,AUTO
        10 004504   200061 756100                    STQ     I+7,,AUTO
        10 004505   000004 236100                    LDQ     4,,PR0
        10 004506   777777 376007                    ANQ     -1,DL
        10 004507   200062 756100                    STQ     I+8,,AUTO
        10 004510   200061 236100                    LDQ     I+7,,AUTO
        10 004511   200062 036100                    ADLQ    I+8,,AUTO
        10 004512   001070 756000 7                  STQ     J

     1596    10760    4                    CONFIG$ -> TD$HEAD.NUMTAPEMPCS +
     1597    10761    4                    CONFIG$ -> TD$HEAD.NUMDISKMPCS +
     1598    10762    4                    CONFIG$ -> TD$HEAD.NUMAPMPCS;  /* OPCS get displayed as FEPS */
     1599    10763            /**/
     1600    10764    4                  DO I = CONFIG$ -> TD$HEAD.UNITMPC_INDX TO

  10764 10 004513   000001 236100                    LDQ     1,,PR0
        10 004514   000022 772000                    QRL     18
        10 004515   001067 756000 7                  STQ     I
        10 004516   004574 710000 10                 TRA     s:10786+1

     1601    10765    5                       CONFIG$ -> TD$HEAD.UNITMPC_INDX + J -1;
     1602    10766    5                     SYSCON_FPT.V.DEVNM# = CONFIG$ -> TD$HEAD.DEVNAME(I);

  10766 10 004517   001067 235000 7                  LDA     I
        10 004520   000003 735000                    ALS     3
        10 004521   001066 470400 7                  LDP0    CONFIG$
        10 004522   040000 100505                    MLR     fill='040'O
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:233  
        10 004523   000020 000010                    ADSC9   16,A,PR0                 cn=0,n=8
        10 004524   000713 000010 7                  ADSC9   SYSCON_FPT+5             cn=0,n=8

     1603    10767            /**/
     1604    10768    5                     CALL M$SYSCON (SYSCON_FPT) ALTRET (DISP_ERR);

  10768 10 004525   000706 630400 7                  EPPR0   SYSCON_FPT
        10 004526   470007 713400                    CLIMB   alt,+28679
        10 004527   400400 401760                    pmme    nvectors=2
        10 004530   006604 702000 10                 TSX2    DISP_ERR

     1605    10769            /**/
     1606    10770    5                     SUB_BUF_1.COUNT = 4;

  10770 10 004531   004000 236003                    LDQ     2048,DU
        10 004532   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1607    10771    5                     SUB_BUF_1.TEXT = SYSCON_FPT.V.DEVNM#;

  10771 10 004533   040000 100400                    MLR     fill='040'O
        10 004534   000713 000010 7                  ADSC9   SYSCON_FPT+5             cn=0,n=8
        10 004535   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     1608    10772    6                     IF RESULTS.TDOK# THEN DO;

  10772 10 004536   004012 236000 7                  LDQ     RESULTS
        10 004537   200000 316003                    CANQ    65536,DU
        10 004540   004547 600000 10                 TZE     s:10777

     1609    10773    6                        SUB_BUF_2.COUNT = 3;

  10773 10 004541   003000 236003                    LDQ     1536,DU
        10 004542   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

     1610    10774    6                        SUB_BUF_2.TEXT = 'Yes';

  10774 10 004543   040000 100400                    MLR     fill='040'O
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:234  
        10 004544   000305 000003 8                  ADSC9   TEXTC_VEC+11             cn=0,n=3
        10 004545   003755 200037 7                  ADSC9   SUB_BUF_2                cn=1,n=31

     1611    10775    6                        END;  /* IF */

  10775 10 004546   004554 710000 10                 TRA     s:10780

     1612    10776    6                     ELSE DO;

     1613    10777    6                        SUB_BUF_2.COUNT = 2;

  10777 10 004547   002000 236003                    LDQ     1024,DU
        10 004550   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

     1614    10778    6                        SUB_BUF_2.TEXT = 'No';

  10778 10 004551   040000 100400                    MLR     fill='040'O
        10 004552   000306 000002 8                  ADSC9   TEXTC_VEC+12             cn=0,n=2
        10 004553   003755 200037 7                  ADSC9   SUB_BUF_2                cn=1,n=31

     1615    10779    6                        END;  /* ELSE */

     1616    10780    5                     CALL FIX_PART;

  10780 10 004554   006612 701000 10                 TSX1    FIX_PART
        10 004555   000000 011000                    NOP     0

     1617    10781    5                     IF RESULTS.PART#

  10781 10 004556   004012 234000 7                  SZN     RESULTS
        10 004557   004565 605000 10                 TPL     s:10784

     1618    10782    5                       THEN CALL TSW$WRITE(MPCPART_VEC,VECTOR(SUB_BUF_1),VECTOR(PART),
             10782                                 VECTOR(SUB_BUF_2));

  10782 10 004560   000202 630400 11                 EPPR0   130
        10 004561   000022 631400 xsym               EPPR1   B_VECTNIL+18
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:235  
        10 004562   000000 701000 xent               TSX1    TSW$WRITE
        10 004563   000000 011000                    NOP     0
        10 004564   004573 710000 10                 TRA     s:10786

     1619    10783    5                        ELSE
     1620    10784    5                     IF NOT TS_DIPART

  10784 10 004565   000000 234000 xsym               SZN     TS_DIPART
        10 004566   004573 604000 10                 TMI     s:10786

     1621    10785    5                      THEN CALL TSW$WRITE(MPCNOTPART_VEC,VECTOR(SUB_BUF_1),VECTOR(PART
             10785                                ),VECTOR(SUB_BUF_2));

  10785 10 004567   000206 630400 11                 EPPR0   134
        10 004570   000022 631400 xsym               EPPR1   B_VECTNIL+18
        10 004571   000000 701000 xent               TSX1    TSW$WRITE
        10 004572   000000 011000                    NOP     0

     1622    10786    5                     END;

  10786 10 004573   001067 054000 7                  AOS     I
        10 004574   001066 470400 7                  LDP0    CONFIG$
        10 004575   000001 236100                    LDQ     1,,PR0
        10 004576   000022 772000                    QRL     18
        10 004577   001070 036000 7                  ADLQ    J
        10 004600   001067 116000 7                  CMPQ    I
        10 004601   004517 605400 10                 TPNZ    s:10766

     1623    10787            /**/
     1624    10788    4                  SYSCON_FPT.V.COMPONENT# = %DVC#; /* DO ALL DEVICES                */

  10788 10 004602   000002 236003                    LDQ     2,DU
        10 004603   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1625    10789    4                  J = CONFIG$ -> TD$HEAD.NUMCONSOLES +

  10789 10 004604   000010 236100                    LDQ     8,,PR0
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:236  
        10 004605   777777 376007                    ANQ     -1,DL
        10 004606   200056 756100                    STQ     I+4,,AUTO
        10 004607   000007 236100                    LDQ     7,,PR0
        10 004610   777777 376007                    ANQ     -1,DL
        10 004611   200056 036100                    ADLQ    I+4,,AUTO
        10 004612   200057 756100                    STQ     I+5,,AUTO
        10 004613   000011 236100                    LDQ     9,,PR0
        10 004614   777777 376007                    ANQ     -1,DL
        10 004615   200060 756100                    STQ     I+6,,AUTO
        10 004616   200057 236100                    LDQ     I+5,,AUTO
        10 004617   200060 036100                    ADLQ    I+6,,AUTO
        10 004620   200061 756100                    STQ     I+7,,AUTO
        10 004621   000012 236100                    LDQ     10,,PR0
        10 004622   777777 376007                    ANQ     -1,DL
        10 004623   200062 756100                    STQ     I+8,,AUTO
        10 004624   200061 236100                    LDQ     I+7,,AUTO
        10 004625   200062 036100                    ADLQ    I+8,,AUTO
        10 004626   200063 756100                    STQ     I+9,,AUTO
        10 004627   000013 236100                    LDQ     11,,PR0
        10 004630   777777 376007                    ANQ     -1,DL
        10 004631   200064 756100                    STQ     I+10,,AUTO
        10 004632   200063 236100                    LDQ     I+9,,AUTO
        10 004633   200064 036100                    ADLQ    I+10,,AUTO
        10 004634   200065 756100                    STQ     I+11,,AUTO
        10 004635   000014 236100                    LDQ     12,,PR0
        10 004636   777777 376007                    ANQ     -1,DL
        10 004637   200066 756100                    STQ     I+12,,AUTO
        10 004640   200065 236100                    LDQ     I+11,,AUTO
        10 004641   200066 036100                    ADLQ    I+12,,AUTO
        10 004642   200067 756100                    STQ     I+13,,AUTO
        10 004643   000015 236100                    LDQ     13,,PR0
        10 004644   777777 376007                    ANQ     -1,DL
        10 004645   200070 756100                    STQ     I+14,,AUTO
        10 004646   200067 236100                    LDQ     I+13,,AUTO
        10 004647   200070 036100                    ADLQ    I+14,,AUTO
        10 004650   200071 756100                    STQ     I+15,,AUTO
        10 004651   000016 236100                    LDQ     14,,PR0
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:237  
        10 004652   777777 376007                    ANQ     -1,DL
        10 004653   200072 756100                    STQ     I+16,,AUTO
        10 004654   200071 236100                    LDQ     I+15,,AUTO
        10 004655   200072 036100                    ADLQ    I+16,,AUTO
        10 004656   200073 756100                    STQ     I+17,,AUTO
        10 004657   000017 236100                    LDQ     15,,PR0
        10 004660   777777 376007                    ANQ     -1,DL
        10 004661   200074 756100                    STQ     I+18,,AUTO
        10 004662   200073 236100                    LDQ     I+17,,AUTO
        10 004663   200074 036100                    ADLQ    I+18,,AUTO
        10 004664   001070 756000 7                  STQ     J

     1626    10790    4                    CONFIG$ -> TD$HEAD.NUMLPS +
     1627    10791    4                    CONFIG$ -> TD$HEAD.NUMCRS +
     1628    10792    4                    CONFIG$ -> TD$HEAD.NUMCPS +
     1629    10793    4                    CONFIG$ -> TD$HEAD.NUMDPS +
     1630    10794    4                    CONFIG$ -> TD$HEAD.NUMMTS +
     1631    10795    4                    CONFIG$ -> TD$HEAD.NUMXXS +
     1632    10796    4                    CONFIG$ -> TD$HEAD.NUMAPS +
     1633    10797    4                    CONFIG$ -> TD$HEAD.NUMODS;
     1634    10798            /**/
     1635    10799    4                  DO I = CONFIG$ -> TD$HEAD.CONSOLE_INDX TO

  10799 10 004665   000007 236100                    LDQ     7,,PR0
        10 004666   000022 772000                    QRL     18
        10 004667   001067 756000 7                  STQ     I
        10 004670   005020 710000 10                 TRA     s:10844+1

     1636    10800    5                       CONFIG$ -> TD$HEAD.CONSOLE_INDX + J - 1;
     1637    10801    5                     SYSCON_FPT.V.DEVNM# = CONFIG$ -> TD$HEAD.DEVNAME(I);

  10801 10 004671   001067 235000 7                  LDA     I
        10 004672   000003 735000                    ALS     3
        10 004673   001066 470400 7                  LDP0    CONFIG$
        10 004674   040000 100505                    MLR     fill='040'O
        10 004675   000020 000010                    ADSC9   16,A,PR0                 cn=0,n=8
        10 004676   000713 000010 7                  ADSC9   SYSCON_FPT+5             cn=0,n=8
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:238  

     1638    10802            /**/
     1639    10803    5                     CALL M$SYSCON (SYSCON_FPT) ALTRET (DISP_ERR);

  10803 10 004677   000706 630400 7                  EPPR0   SYSCON_FPT
        10 004700   470007 713400                    CLIMB   alt,+28679
        10 004701   400400 401760                    pmme    nvectors=2
        10 004702   006604 702000 10                 TSX2    DISP_ERR

     1640    10804            /**/
     1641    10805    5                     SUB_BUF_1.COUNT = SIZEC(SYSCON_FPT.V.DEVNM#);

  10805 10 004703   010000 236003                    LDQ     4096,DU
        10 004704   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1642    10806    5                     SUB_BUF_1.TEXT = SYSCON_FPT.V.DEVNM#;

  10806 10 004705   040000 100400                    MLR     fill='040'O
        10 004706   000713 000010 7                  ADSC9   SYSCON_FPT+5             cn=0,n=8
        10 004707   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     1643    10807    6                     IF RESULTS.TDOK# THEN DO;

  10807 10 004710   004012 236000 7                  LDQ     RESULTS
        10 004711   200000 316003                    CANQ    65536,DU
        10 004712   004721 600000 10                 TZE     s:10812

     1644    10808    6                        SUB_BUF_2.COUNT = 3;

  10808 10 004713   003000 236003                    LDQ     1536,DU
        10 004714   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

     1645    10809    6                        SUB_BUF_2.TEXT = 'Yes';

  10809 10 004715   040000 100400                    MLR     fill='040'O
        10 004716   000305 000003 8                  ADSC9   TEXTC_VEC+11             cn=0,n=3
        10 004717   003755 200037 7                  ADSC9   SUB_BUF_2                cn=1,n=31
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:239  

     1646    10810    6                        END;  /* IF */

  10810 10 004720   004726 710000 10                 TRA     s:10815

     1647    10811    6                     ELSE DO;

     1648    10812    6                        SUB_BUF_2.COUNT = 2;

  10812 10 004721   002000 236003                    LDQ     1024,DU
        10 004722   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

     1649    10813    6                        SUB_BUF_2.TEXT = 'No';

  10813 10 004723   040000 100400                    MLR     fill='040'O
        10 004724   000306 000002 8                  ADSC9   TEXTC_VEC+12             cn=0,n=2
        10 004725   003755 200037 7                  ADSC9   SUB_BUF_2                cn=1,n=31

     1650    10814    6                        END;  /* ELSE */

     1651    10815    6                     IF SUBSTR(SUB_BUF_1.TEXT,0,2) = 'DP' THEN DO;

  10815 10 004726   040000 106400                    CMPC    fill='040'O
        10 004727   003745 200002 7                  ADSC9   SUB_BUF_1                cn=1,n=2
        10 004730   000307 000002 8                  ADSC9   TEXTC_VEC+13             cn=0,n=2
        10 004731   004751 601000 10                 TNZ     s:10826

     1652    10816    7                        IF RESULTS.CHECKWRITE# THEN DO;

  10816 10 004732   004012 236000 7                  LDQ     RESULTS
        10 004733   100000 316003                    CANQ    32768,DU
        10 004734   004743 600000 10                 TZE     s:10821

     1653    10817    7                           SUB_BUF_3.COUNT = 3;

  10817 10 004735   003000 236003                    LDQ     1536,DU
        10 004736   003765 552040 7                  STBQ    SUB_BUF_3,'40'O
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:240  

     1654    10818    7                           SUB_BUF_3.TEXT = 'Yes';

  10818 10 004737   040000 100400                    MLR     fill='040'O
        10 004740   000305 000003 8                  ADSC9   TEXTC_VEC+11             cn=0,n=3
        10 004741   003765 200037 7                  ADSC9   SUB_BUF_3                cn=1,n=31

     1655    10819    7                           END;  /* IF CHECKWRITE# */

  10819 10 004742   004756 710000 10                 TRA     s:10829

     1656    10820    7                        ELSE DO;

     1657    10821    7                           SUB_BUF_3.COUNT = 2;

  10821 10 004743   002000 236003                    LDQ     1024,DU
        10 004744   003765 552040 7                  STBQ    SUB_BUF_3,'40'O

     1658    10822    7                           SUB_BUF_3.TEXT = 'No';

  10822 10 004745   040000 100400                    MLR     fill='040'O
        10 004746   000306 000002 8                  ADSC9   TEXTC_VEC+12             cn=0,n=2
        10 004747   003765 200037 7                  ADSC9   SUB_BUF_3                cn=1,n=31

     1659    10823    7                           END;  /* ELSE */

     1660    10824    6                        END;  /* IF TEXT = 'DP' */

  10824 10 004750   004756 710000 10                 TRA     s:10829

     1661    10825    6                     ELSE DO;

     1662    10826    6                        SUB_BUF_3.COUNT = 0;

  10826 10 004751   000000 236003                    LDQ     0,DU
        10 004752   003765 552040 7                  STBQ    SUB_BUF_3,'40'O

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:241  
     1663    10827    6                        SUB_BUF_3.TEXT = ' ';

  10827 10 004753   040000 100400                    MLR     fill='040'O
        10 004754   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
        10 004755   003765 200037 7                  ADSC9   SUB_BUF_3                cn=1,n=31

     1664    10828    6                        END;  /* ELSE */

     1665    10829    5                     CALL FIX_PART;

  10829 10 004756   006612 701000 10                 TSX1    FIX_PART
        10 004757   000000 011000                    NOP     0

     1666    10830    6                     IF RESULTS.PART# THEN DO;

  10830 10 004760   004012 234000 7                  SZN     RESULTS
        10 004761   005000 605000 10                 TPL     s:10837

     1667    10831    6                        IF SUBSTR(SUB_BUF_1.TEXT,0,2) = 'DP'

  10831 10 004762   040000 106400                    CMPC    fill='040'O
        10 004763   003745 200002 7                  ADSC9   SUB_BUF_1                cn=1,n=2
        10 004764   000307 000002 8                  ADSC9   TEXTC_VEC+13             cn=0,n=2
        10 004765   004773 601000 10                 TNZ     s:10834

     1668    10832    6                          THEN CALL TSW$WRITE(DPPART_VEC,VECTOR(SUB_BUF_1),VECTOR(PART
             10832                                    ),

  10832 10 004766   000212 630400 11                 EPPR0   138
        10 004767   000023 631400 xsym               EPPR1   B_VECTNIL+19
        10 004770   000000 701000 xent               TSX1    TSW$WRITE
        10 004771   000000 011000                    NOP     0
        10 004772   005017 710000 10                 TRA     s:10844

     1669    10833    6                                               VECTOR(SUB_BUF_2),VECTOR(SUB_BUF_3));
     1670    10834    6                           ELSE CALL TSW$WRITE(DEVPART_VEC,VECTOR(SUB_BUF_1),VECTOR(
             10834                                    PART),VECTOR(SUB_BUF_2));
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:242  

  10834 10 004773   000172 630400 11                 EPPR0   122
        10 004774   000022 631400 xsym               EPPR1   B_VECTNIL+18
        10 004775   000000 701000 xent               TSX1    TSW$WRITE
        10 004776   000000 011000                    NOP     0

     1671    10835    6                         END;  /* IF RESULTS.PART# */

  10835 10 004777   005017 710000 10                 TRA     s:10844

     1672    10836    6                      ELSE DO;

     1673    10837    7                        IF NOT TS_DIPART THEN DO;

  10837 10 005000   000000 234000 xsym               SZN     TS_DIPART
        10 005001   005017 604000 10                 TMI     s:10844

     1674    10838    7                           IF SUBSTR(SUB_BUF_1.TEXT,0,2) = 'DP'

  10838 10 005002   040000 106400                    CMPC    fill='040'O
        10 005003   003745 200002 7                  ADSC9   SUB_BUF_1                cn=1,n=2
        10 005004   000307 000002 8                  ADSC9   TEXTC_VEC+13             cn=0,n=2
        10 005005   005013 601000 10                 TNZ     s:10841

     1675    10839    7                              THEN CALL TSW$WRITE(DPNOTPART_VEC,VECTOR(SUB_BUF_1),
             10839                                       VECTOR(PART),

  10839 10 005006   000217 630400 11                 EPPR0   143
        10 005007   000023 631400 xsym               EPPR1   B_VECTNIL+19
        10 005010   000000 701000 xent               TSX1    TSW$WRITE
        10 005011   000000 011000                    NOP     0
        10 005012   005017 710000 10                 TRA     s:10844

     1676    10840    7                                                 VECTOR(SUB_BUF_2),VECTOR(SUB_BUF_3));
     1677    10841    7                              ELSE CALL TSW$WRITE(DEVNOTPART_VEC,VECTOR(SUB_BUF_1),
             10841                                       VECTOR(PART),VECTOR(SUB_BUF_2));

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:243  
  10841 10 005013   000176 630400 11                 EPPR0   126
        10 005014   000022 631400 xsym               EPPR1   B_VECTNIL+18
        10 005015   000000 701000 xent               TSX1    TSW$WRITE
        10 005016   000000 011000                    NOP     0

     1678    10842    7                           END;  /* IF NOT TS_DIPART */

     1679    10843    6                        END;  /* ELSE */

     1680    10844    5                     END;

  10844 10 005017   001067 054000 7                  AOS     I
        10 005020   001066 470400 7                  LDP0    CONFIG$
        10 005021   000007 236100                    LDQ     7,,PR0
        10 005022   000022 772000                    QRL     18
        10 005023   001070 036000 7                  ADLQ    J
        10 005024   001067 116000 7                  CMPQ    I
        10 005025   004671 605400 10                 TPNZ    s:10801

     1681    10845    4                  IF NOT TS_DIPART THEN GOTO DO_REL;

  10845 10 005026   000000 234000 xsym               SZN     TS_DIPART
        10 005027   005052 605000 10                 TPL     DO_REL
        10 005030   006552 710000 10                 TRA     s:11199

     1682    10846    4               CASE(TSS_DIREL);

     1683    10847    4                 CONFIG_KEY.COUNT = 1;

  10847 10 005031   001000 236003                    LDQ     512,DU
        10 005032   003742 552040 7                  STBQ    CONFIG_KEY,'40'O

     1684    10848    4                 CONFIG_KEY.TEXT = BINASC(0);

  10848 10 005033   040000 100400                    MLR     fill='040'O
        10 005034   000141 000001 11                 ADSC9   97                       cn=0,n=1
        10 005035   003742 200010 7                  ADSC9   CONFIG_KEY               cn=1,n=8
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:244  

     1685    10849    4                 CALL M$OPEN(OPEN_CONFIG) ALTRET(CONFIG_ERR);

  10849 10 005036   000036 630400 7                  EPPR0   OPEN_CONFIG
        10 005037   450000 713400                    CLIMB   alt,open
        10 005040   410400 401760                    pmme    nvectors=18
        10 005041   006564 702000 10                 TSX2    CONFIG_ERR

     1686    10850    4                 CALL M$READ(READ_CONFIG) ALTRET(CONFIG_ERR);

  10850 10 005042   000224 630400 7                  EPPR0   READ_CONFIG
        10 005043   440000 713400                    CLIMB   alt,read
        10 005044   401400 401760                    pmme    nvectors=4
        10 005045   006564 702000 10                 TSX2    CONFIG_ERR

     1687    10851    4                 CALL M$CLOSE(CLOSE_CONFIG) ALTRET(CONFIG_ERR);

  10851 10 005046   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 005047   450001 713400                    CLIMB   alt,close
        10 005050   406000 401760                    pmme    nvectors=13
        10 005051   006564 702000 10                 TSX2    CONFIG_ERR

     1688    10852    4   DO_REL:
     1689    10853    4                 TS_PRINT_HEADING = '0'B;

  10853 10 005052   001074 450000 7     DO_REL       STZ     TS_PRINT_HEADING

     1690    10854    4                 SYSCON_FPT.V.COMPONENT# = %IOM##;

  10854 10 005053   000005 236003                    LDQ     5,DU
        10 005054   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1691    10855    5                 DO I = 0 TO CONFIG$->TD$HEAD.NUMIOMS - 1;

  10855 10 005055   001067 450000 7                  STZ     I
        10 005056   005106 710000 10                 TRA     s:10865+1

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:245  
     1692    10856    5                    SYSCON_FPT.V.IOM# = I;

  10856 10 005057   001067 236000 7                  LDQ     I
        10 005060   000011 736000                    QLS     9
        10 005061   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

     1693    10857    6                    CALL M$SYSCON(SYSCON_FPT) WHENRETURN DO;

  10857 10 005062   000706 630400 7                  EPPR0   SYSCON_FPT
        10 005063   470007 713400                    CLIMB   alt,+28679
        10 005064   400400 401760                    pmme    nvectors=2
        10 005065   005105 702000 10                 TSX2    s:10865

     1694    10858    7                       IF RESULTS.RELEASED# THEN DO;

  10858 10 005066   004012 236000 7                  LDQ     RESULTS
        10 005067   040000 316003                    CANQ    16384,DU
        10 005070   005105 600000 10                 TZE     s:10865

     1695    10859    7                          SUB_BUF_1.COUNT = 4;

  10859 10 005071   004000 236003                    LDQ     2048,DU
        10 005072   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1696    10860    7                          SUB_BUF_1.TEXT = 'IOM';

  10860 10 005073   040000 100400                    MLR     fill='040'O
        10 005074   000301 000003 8                  ADSC9   TEXTC_VEC+7              cn=0,n=3
        10 005075   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     1697    10861    7                          CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,1),I);

  10861 10 005076   000000 301400                    BTD
        10 005077   001067 000004 7                  NDSC9   I                        cn=0,s=lsgnf,sf=0,n=4
        10 005100   003746 030001 7                  NDSC9   SUB_BUF_1+1              cn=0,s=nosgn,sf=0,n=1

     1698    10862    7                          CALL TSW$WRITE(COMPREL_VEC,VECTOR(SUB_BUF_1));
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:246  

  10862 10 005101   000224 630400 11                 EPPR0   148
        10 005102   000020 631400 xsym               EPPR1   B_VECTNIL+16
        10 005103   000000 701000 xent               TSX1    TSW$WRITE
        10 005104   000000 011000                    NOP     0

     1699    10863    7                          END;

     1700    10864    6                       END;

     1701    10865    5                    END;

  10865 10 005105   001067 054000 7                  AOS     I
        10 005106   001066 470400 7                  LDP0    CONFIG$
        10 005107   000000 236100                    LDQ     0,,PR0
        10 005110   777777 376007                    ANQ     -1,DL
        10 005111   001067 116000 7                  CMPQ    I
        10 005112   005057 605400 10                 TPNZ    s:10856

     1702    10866
     1703    10867    4                 SYSCON_FPT.V.COMPONENT# = %CPU##;

  10867 10 005113   000006 236003                    LDQ     6,DU
        10 005114   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1704    10868    5                 DO I = 0 TO 7;

  10868 10 005115   001067 450000 7                  STZ     I

     1705    10869    5                    SYSCON_FPT.V.CPU# = I;

  10869 10 005116   001067 236000 7                  LDQ     I
        10 005117   000011 736000                    QLS     9
        10 005120   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

     1706    10870    6                    CALL M$SYSCON(SYSCON_FPT) WHENRETURN DO;

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:247  
  10870 10 005121   000706 630400 7                  EPPR0   SYSCON_FPT
        10 005122   470007 713400                    CLIMB   alt,+28679
        10 005123   400400 401760                    pmme    nvectors=2
        10 005124   005144 702000 10                 TSX2    s:10878

     1707    10871    7                       IF RESULTS.RELEASED# THEN DO;

  10871 10 005125   004012 236000 7                  LDQ     RESULTS
        10 005126   040000 316003                    CANQ    16384,DU
        10 005127   005144 600000 10                 TZE     s:10878

     1708    10872    7                          SUB_BUF_1.COUNT = 4;

  10872 10 005130   004000 236003                    LDQ     2048,DU
        10 005131   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1709    10873    7                          SUB_BUF_1.TEXT = 'CPU';

  10873 10 005132   040000 100400                    MLR     fill='040'O
        10 005133   000303 000003 8                  ADSC9   TEXTC_VEC+9              cn=0,n=3
        10 005134   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     1710    10874    7                          CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,1),I);

  10874 10 005135   000000 301400                    BTD
        10 005136   001067 000004 7                  NDSC9   I                        cn=0,s=lsgnf,sf=0,n=4
        10 005137   003746 030001 7                  NDSC9   SUB_BUF_1+1              cn=0,s=nosgn,sf=0,n=1

     1711    10875    7                          CALL TSW$WRITE(COMPREL_VEC,VECTOR(SUB_BUF_1));

  10875 10 005140   000224 630400 11                 EPPR0   148
        10 005141   000020 631400 xsym               EPPR1   B_VECTNIL+16
        10 005142   000000 701000 xent               TSX1    TSW$WRITE
        10 005143   000000 011000                    NOP     0

     1712    10876    7                          END;

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:248  
     1713    10877    6                       END;

     1714    10878    5                   END;

  10878 10 005144   001067 054000 7                  AOS     I
        10 005145   001067 235000 7                  LDA     I
        10 005146   000007 115007                    CMPA    7,DL
        10 005147   005116 604400 10                 TMOZ    s:10869

     1715    10879    4                 SYSCON_FPT.V.COMPONENT# = %SCU##;

  10879 10 005150   000007 236003                    LDQ     7,DU
        10 005151   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1716    10880    5                 DO I = 0 TO 1;

  10880 10 005152   001067 450000 7                  STZ     I

     1717    10881    5                    SYSCON_FPT.V.SCU# = I;

  10881 10 005153   001067 236000 7                  LDQ     I
        10 005154   000011 736000                    QLS     9
        10 005155   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

     1718    10882    6                    CALL M$SYSCON(SYSCON_FPT) WHENRETURN DO;

  10882 10 005156   000706 630400 7                  EPPR0   SYSCON_FPT
        10 005157   470007 713400                    CLIMB   alt,+28679
        10 005160   400400 401760                    pmme    nvectors=2
        10 005161   005201 702000 10                 TSX2    s:10890

     1719    10883    7                       IF RESULTS.RELEASED# THEN DO;

  10883 10 005162   004012 236000 7                  LDQ     RESULTS
        10 005163   040000 316003                    CANQ    16384,DU
        10 005164   005201 600000 10                 TZE     s:10890

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:249  
     1720    10884    7                          SUB_BUF_1.COUNT = 4;

  10884 10 005165   004000 236003                    LDQ     2048,DU
        10 005166   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1721    10885    7                          SUB_BUF_1.TEXT = 'SCU';

  10885 10 005167   040000 100400                    MLR     fill='040'O
        10 005170   000304 000003 8                  ADSC9   TEXTC_VEC+10             cn=0,n=3
        10 005171   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     1722    10886    7                          CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,1),I);

  10886 10 005172   000000 301400                    BTD
        10 005173   001067 000004 7                  NDSC9   I                        cn=0,s=lsgnf,sf=0,n=4
        10 005174   003746 030001 7                  NDSC9   SUB_BUF_1+1              cn=0,s=nosgn,sf=0,n=1

     1723    10887    7                          CALL TSW$WRITE(COMPREL_VEC,VECTOR(SUB_BUF_1));

  10887 10 005175   000224 630400 11                 EPPR0   148
        10 005176   000020 631400 xsym               EPPR1   B_VECTNIL+16
        10 005177   000000 701000 xent               TSX1    TSW$WRITE
        10 005200   000000 011000                    NOP     0

     1724    10888    7                          END;

     1725    10889    6                       END;

     1726    10890    5                    END;

  10890 10 005201   001067 054000 7                  AOS     I
        10 005202   001067 235000 7                  LDA     I
        10 005203   000001 115007                    CMPA    1,DL
        10 005204   005153 604400 10                 TMOZ    s:10881
        10 005205   006552 710000 10                 TRA     s:11199

     1727    10891    4               CASE(TSS_DIPATH);
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:250  

     1728    10892    4                 TS_PRINT_HEADING = '0'B;

  10892 10 005206   001074 450000 7                  STZ     TS_PRINT_HEADING

     1729    10893    4                 IOM_NAME = 'IOM';

  10893 10 005207   000301 236000 8                  LDQ     TEXTC_VEC+7
        10 005210   000226 376000 11                 ANQ     150
        10 005211   000040 276007                    ORQ     32,DL
        10 005212   200007 756100                    STQ     IOM_NAME,,AUTO

     1730    10894    4                 CHANS_FOUND = 0;

  10894 10 005213   200035 450100                    STZ     CHANS_FOUND,,AUTO

     1731    10895    4                 PATH_BUF = CMD$->TS$DEV.DEVNAME;

  10895 10 005214   040000 100500                    MLR     fill='040'O
        10 005215   000001 000010                    ADSC9   1,,PR0                   cn=0,n=8
        10 005216   001564 000204 7                  ADSC9   PATH_BUF                 cn=0,n=132

     1732    10896    4                 BUF_CNT = 9;

  10896 10 005217   000011 235007                    LDA     9,DL
        10 005220   200011 755100                    STA     BUF_CNT,,AUTO

     1733    10897    4                 CONFIG_KEY.COUNT = 1;

  10897 10 005221   001000 236003                    LDQ     512,DU
        10 005222   003742 552040 7                  STBQ    CONFIG_KEY,'40'O

     1734    10898    4                 CONFIG_KEY.TEXT = BINASC(0);

  10898 10 005223   040000 100400                    MLR     fill='040'O
        10 005224   000141 000001 11                 ADSC9   97                       cn=0,n=1
        10 005225   003742 200010 7                  ADSC9   CONFIG_KEY               cn=1,n=8
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:251  

     1735    10899    4                 CALL M$OPEN(OPEN_CONFIG) ALTRET(PATH_ERR);

  10899 10 005226   000036 630400 7                  EPPR0   OPEN_CONFIG
        10 005227   450000 713400                    CLIMB   alt,open
        10 005230   410400 401760                    pmme    nvectors=18
        10 005231   005546 702000 10                 TSX2    PATH_ERR

     1736    10900    4                 CALL M$READ(READ_CONFIG) ALTRET(PATH_ERR);

  10900 10 005232   000224 630400 7                  EPPR0   READ_CONFIG
        10 005233   440000 713400                    CLIMB   alt,read
        10 005234   401400 401760                    pmme    nvectors=4
        10 005235   005546 702000 10                 TSX2    PATH_ERR

     1737    10901    4                 HEADREC = READ_CONFIG.BUF_.BUF$->TD$HEAD;

  10901 10 005236   000231 470400 7                  LDP0    READ_CONFIG+5
        10 005237   000000 100500                    MLR     fill='000'O
        10 005240   000000 000110                    ADSC9   0,,PR0                   cn=0,n=72
        10 005241   001116 000110 7                  ADSC9   HEADREC                  cn=0,n=72

     1738    10902    5                 DO IOM# = 0 TO HEADREC.NUMIOMS - 1;

  10902 10 005242   200010 450100                    STZ     IOM#,,AUTO
        10 005243   005516 710000 10                 TRA     NO_CHANS+3

     1739    10903    5                    CALL BINCHAR(SUBSTR(IOM_NAME,3,1),IOM#);

  10903 10 005244   200010 235100                    LDA     IOM#,,AUTO
        10 005245   000044 773000                    LRL     36
        10 005246   200056 757100                    STAQ    I+4,,AUTO
        10 005247   000100 301500                    BTD
        10 005250   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 005251   200007 630001                    NDSC9   IOM_NAME,,AUTO           cn=3,s=nosgn,sf=0,n=1

     1740    10904    5                    CONFIG_KEY.COUNT = 4;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:252  

  10904 10 005252   004000 236003                    LDQ     2048,DU
        10 005253   003742 552040 7                  STBQ    CONFIG_KEY,'40'O

     1741    10905    5                    CONFIG_KEY.TEXT = IOM_NAME;

  10905 10 005254   040000 100500                    MLR     fill='040'O
        10 005255   200007 000004                    ADSC9   IOM_NAME,,AUTO           cn=0,n=4
        10 005256   003742 200010 7                  ADSC9   CONFIG_KEY               cn=1,n=8

     1742    10906    5                    CALL M$READ(READ_CONFIG) ALTRET(PATH_ERR);

  10906 10 005257   000224 630400 7                  EPPR0   READ_CONFIG
        10 005260   440000 713400                    CLIMB   alt,read
        10 005261   401400 401760                    pmme    nvectors=4
        10 005262   005546 702000 10                 TSX2    PATH_ERR

     1743    10907    5                    IOMREC = READ_CONFIG.BUF_.BUF$->TD$IOM;

  10907 10 005263   000231 470400 7                  LDP0    READ_CONFIG+5
        10 005264   000000 100500                    MLR     fill='000'O
        10 005265   000000 002044                    ADSC9   0,,PR0                   cn=0,n=1060
        10 005266   001140 002044 7                  ADSC9   IOMREC                   cn=0,n=1060

     1744    10908    5                    CALL FIND_CHANNEL(CMD$->TS$DEV.DEVNAME,NUM_CHANS,CHANS) ALTRET(
             10908                             NO_CHANS);

  10908 10 005267   200015 631500                    EPPR1   CHANS,,AUTO
        10 005270   200045 451500                    STP1    SCRATCH,,AUTO
        10 005271   200036 633500                    EPPR3   NUM_CHANS,,AUTO
        10 005272   200044 453500                    STP3    @BUFFER,,AUTO
        10 005273   001062 236000 7                  LDQ     CMD$
        10 005274   000001 036003                    ADLQ    1,DU
        10 005275   200043 756100                    STQ     @VALUE,,AUTO
        10 005276   006654 701000 10                 TSX1    FIND_CHANNEL
        10 005277   005513 702000 10                 TSX2    NO_CHANS

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:253  
     1745    10909    6                    IF CHANS_FOUND = 0 THEN DO;

  10909 10 005300   200035 235100                    LDA     CHANS_FOUND,,AUTO
        10 005301   005311 601000 10                 TNZ     s:10914

     1746    10910    6                       CALL INSERT(PATH_BUF,BUF_CNT,6,'is on ');

  10910 10 005302   200011 236100                    LDQ     BUF_CNT,,AUTO
        10 005303   040006 100400                    MLR     fill='040'O
        10 005304   000310 000006 8                  ADSC9   TEXTC_VEC+14             cn=0,n=6
        10 005305   001564 000006 7                  ADSC9   PATH_BUF,Q               cn=0,n=6

     1747    10911    6                       BUF_CNT = BUF_CNT + 6;

  10911 10 005306   000006 036007                    ADLQ    6,DL
        10 005307   200011 756100                    STQ     BUF_CNT,,AUTO

     1748    10912    6                       END;  /* IF CHANS_FOUND = 0 */

  10912 10 005310   005317 710000 10                 TRA     s:10917

     1749    10913    6                    ELSE DO;

     1750    10914    6                       CALL INSERT(PATH_BUF,BUF_CNT,1,' ');

  10914 10 005311   200011 236100                    LDQ     BUF_CNT,,AUTO
        10 005312   040006 100400                    MLR     fill='040'O
        10 005313   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
        10 005314   001564 000001 7                  ADSC9   PATH_BUF,Q               cn=0,n=1

     1751    10915    6                       BUF_CNT = BUF_CNT + 1;

  10915 10 005315   000001 036007                    ADLQ    1,DL
        10 005316   200011 756100                    STQ     BUF_CNT,,AUTO

     1752    10916    6                       END;  /* ELSE */

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:254  
     1753    10917    5                    CHANS_FOUND = CHANS_FOUND + NUM_CHANS;

  10917 10 005317   200035 236100                    LDQ     CHANS_FOUND,,AUTO
        10 005320   200036 036100                    ADLQ    NUM_CHANS,,AUTO
        10 005321   200035 756100                    STQ     CHANS_FOUND,,AUTO

     1754    10918    5                    CALL INSERT(PATH_BUF,BUF_CNT,9,IOM_NAME,',CHAN');

  10918 10 005322   200011 235100                    LDA     BUF_CNT,,AUTO
        10 005323   040005 100500                    MLR     fill='040'O
        10 005324   200007 000004                    ADSC9   IOM_NAME,,AUTO           cn=0,n=4
        10 005325   001564 000004 7                  ADSC9   PATH_BUF,A               cn=0,n=4
        10 005326   040005 100400                    MLR     fill='040'O
        10 005327   000312 000005 8                  ADSC9   TEXTC_VEC+16             cn=0,n=5
        10 005330   001565 000005 7                  ADSC9   PATH_BUF+1,A             cn=0,n=5

     1755    10919    5                    BUF_CNT = BUF_CNT + 9;

  10919 10 005331   200011 235100                    LDA     BUF_CNT,,AUTO
        10 005332   000011 035007                    ADLA    9,DL
        10 005333   200011 755100                    STA     BUF_CNT,,AUTO

     1756    10920    5                    RANGE_FLAG = '0'B;

  10920 10 005334   200037 450100                    STZ     RANGE_FLAG,,AUTO

     1757    10921    5                    CALL MY_BINCHAR(CHANS(0),CHAN_BUF,LEN);

  10921 10 005335   200012 630500                    EPPR0   LEN,,AUTO
        10 005336   200045 450500                    STP0    SCRATCH,,AUTO
        10 005337   200013 631500                    EPPR1   CHAN_BUF,,AUTO
        10 005340   200044 451500                    STP1    @BUFFER,,AUTO
        10 005341   200015 633500                    EPPR3   CHANS,,AUTO
        10 005342   200043 453500                    STP3    @VALUE,,AUTO
        10 005343   007053 701000 10                 TSX1    MY_BINCHAR
        10 005344   000000 011000                    NOP     0

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:255  
     1758    10922    5                    CALL INSERT(PATH_BUF,BUF_CNT,LEN,CHAN_BUF);

  10922 10 005345   200012 720100                    LXL0    LEN,,AUTO
        10 005346   200011 235100                    LDA     BUF_CNT,,AUTO
        10 005347   040045 100500                    MLR     fill='040'O
        10 005350   200013 000002                    ADSC9   CHAN_BUF,,AUTO           cn=0,n=2
        10 005351   001564 000010 7                  ADSC9   PATH_BUF,A               cn=0,n=*X0

     1759    10923    5                    BUF_CNT = BUF_CNT + LEN;

  10923 10 005352   200011 236100                    LDQ     BUF_CNT,,AUTO
        10 005353   200012 036100                    ADLQ    LEN,,AUTO
        10 005354   200011 756100                    STQ     BUF_CNT,,AUTO

     1760    10924    5                    LAST_CHAN = CHANS(0);

  10924 10 005355   200015 235100                    LDA     CHANS,,AUTO
        10 005356   200014 755100                    STA     LAST_CHAN,,AUTO

     1761    10925    6                    DO J = 1 TO NUM_CHANS - 1;

  10925 10 005357   000001 235007                    LDA     1,DL
        10 005360   001070 755000 7                  STA     J
        10 005361   005457 710000 10                 TRA     s:10947+1

     1762    10926    6                       IF CHANS(J) - 1 = LAST_CHAN

  10926 10 005362   001070 720000 7                  LXL0    J
        10 005363   200015 236110                    LDQ     CHANS,X0,AUTO
        10 005364   000001 136007                    SBLQ    1,DL
        10 005365   005373 604000 10                 TMI     s:10930
        10 005366   200014 116100                    CMPQ    LAST_CHAN,,AUTO
        10 005367   005373 601000 10                 TNZ     s:10930

     1763    10927    6                          THEN RANGE_FLAG = '1'B;

  10927 10 005370   400000 236003                    LDQ     -131072,DU
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:256  
        10 005371   200037 756100                    STQ     RANGE_FLAG,,AUTO
        10 005372   005453 710000 10                 TRA     s:10946

     1764    10928    6                          ELSE
     1765    10929    7                          DO;

     1766    10930    7                             IF RANGE_FLAG

  10930 10 005373   200037 234100                    SZN     RANGE_FLAG,,AUTO
        10 005374   005424 605000 10                 TPL     s:10940

     1767    10931    7                                THEN
     1768    10932    8                                DO;

     1769    10933    8                                   RANGE_FLAG = '0'B;

  10933 10 005375   200037 450100                    STZ     RANGE_FLAG,,AUTO

     1770    10934    8                                   CALL INSERT(PATH_BUF,BUF_CNT,1,'-');

  10934 10 005376   200011 235100                    LDA     BUF_CNT,,AUTO
        10 005377   040005 100400                    MLR     fill='040'O
        10 005400   000227 000001 11                 ADSC9   151                      cn=0,n=1
        10 005401   001564 000001 7                  ADSC9   PATH_BUF,A               cn=0,n=1

     1771    10935    8                                   BUF_CNT = BUF_CNT + 1;

  10935 10 005402   000001 035007                    ADLA    1,DL
        10 005403   200011 755100                    STA     BUF_CNT,,AUTO

     1772    10936    8                                   CALL MY_BINCHAR(LAST_CHAN,CHAN_BUF,LEN);

  10936 10 005404   200012 630500                    EPPR0   LEN,,AUTO
        10 005405   200045 450500                    STP0    SCRATCH,,AUTO
        10 005406   200013 631500                    EPPR1   CHAN_BUF,,AUTO
        10 005407   200044 451500                    STP1    @BUFFER,,AUTO
        10 005410   200014 633500                    EPPR3   LAST_CHAN,,AUTO
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:257  
        10 005411   200043 453500                    STP3    @VALUE,,AUTO
        10 005412   007053 701000 10                 TSX1    MY_BINCHAR
        10 005413   000000 011000                    NOP     0

     1773    10937    8                                   CALL INSERT(PATH_BUF,BUF_CNT,LEN,CHAN_BUF);

  10937 10 005414   200012 720100                    LXL0    LEN,,AUTO
        10 005415   200011 235100                    LDA     BUF_CNT,,AUTO
        10 005416   040045 100500                    MLR     fill='040'O
        10 005417   200013 000002                    ADSC9   CHAN_BUF,,AUTO           cn=0,n=2
        10 005420   001564 000010 7                  ADSC9   PATH_BUF,A               cn=0,n=*X0

     1774    10938    8                                   BUF_CNT = BUF_CNT + LEN;

  10938 10 005421   200011 236100                    LDQ     BUF_CNT,,AUTO
        10 005422   200012 036100                    ADLQ    LEN,,AUTO
        10 005423   200011 756100                    STQ     BUF_CNT,,AUTO

     1775    10939    8                                END;           /* IF RANGE_FLAG                     */

     1776    10940    7                             CALL INSERT(PATH_BUF,BUF_CNT,1,',');

  10940 10 005424   200011 235100                    LDA     BUF_CNT,,AUTO
        10 005425   040005 100400                    MLR     fill='040'O
        10 005426   000230 000001 11                 ADSC9   152                      cn=0,n=1
        10 005427   001564 000001 7                  ADSC9   PATH_BUF,A               cn=0,n=1

     1777    10941    7                             BUF_CNT = BUF_CNT + 1;

  10941 10 005430   000001 035007                    ADLA    1,DL
        10 005431   200011 755100                    STA     BUF_CNT,,AUTO

     1778    10942    7                             CALL MY_BINCHAR(CHANS(J),CHAN_BUF,LEN);

  10942 10 005432   200012 630500                    EPPR0   LEN,,AUTO
        10 005433   200045 450500                    STP0    SCRATCH,,AUTO
        10 005434   200013 631500                    EPPR1   CHAN_BUF,,AUTO
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:258  
        10 005435   200044 451500                    STP1    @BUFFER,,AUTO
        10 005436   001070 720000 7                  LXL0    J
        10 005437   200015 633510                    EPPR3   CHANS,X0,AUTO
        10 005440   200043 453500                    STP3    @VALUE,,AUTO
        10 005441   007053 701000 10                 TSX1    MY_BINCHAR
        10 005442   000000 011000                    NOP     0

     1779    10943    7                             CALL INSERT(PATH_BUF,BUF_CNT,LEN,CHAN_BUF);

  10943 10 005443   200012 720100                    LXL0    LEN,,AUTO
        10 005444   200011 235100                    LDA     BUF_CNT,,AUTO
        10 005445   040045 100500                    MLR     fill='040'O
        10 005446   200013 000002                    ADSC9   CHAN_BUF,,AUTO           cn=0,n=2
        10 005447   001564 000010 7                  ADSC9   PATH_BUF,A               cn=0,n=*X0

     1780    10944    7                             BUF_CNT = BUF_CNT + LEN;

  10944 10 005450   200011 236100                    LDQ     BUF_CNT,,AUTO
        10 005451   200012 036100                    ADLQ    LEN,,AUTO
        10 005452   200011 756100                    STQ     BUF_CNT,,AUTO

     1781    10945    7                          END;                 /* IF CHANS(J) -1 = LAST_CHAN        */

     1782    10946    6                       LAST_CHAN = CHANS(J);

  10946 10 005453   001070 720000 7                  LXL0    J
        10 005454   200015 235110                    LDA     CHANS,X0,AUTO
        10 005455   200014 755100                    STA     LAST_CHAN,,AUTO

     1783    10947    6                    END;                       /* DO J                              */

  10947 10 005456   001070 054000 7                  AOS     J
        10 005457   001070 236000 7                  LDQ     J
        10 005460   005362 604000 10                 TMI     s:10926
        10 005461   200036 116100                    CMPQ    NUM_CHANS,,AUTO
        10 005462   005362 602000 10                 TNC     s:10926

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:259  
     1784    10948    5                    IF RANGE_FLAG

  10948 10 005463   200037 234100                    SZN     RANGE_FLAG,,AUTO
        10 005464   005513 605000 10                 TPL     NO_CHANS

     1785    10949    5                       THEN
     1786    10950    6                       DO;

     1787    10951    6                          CALL INSERT(PATH_BUF,BUF_CNT,1,'-');

  10951 10 005465   200011 235100                    LDA     BUF_CNT,,AUTO
        10 005466   040005 100400                    MLR     fill='040'O
        10 005467   000227 000001 11                 ADSC9   151                      cn=0,n=1
        10 005470   001564 000001 7                  ADSC9   PATH_BUF,A               cn=0,n=1

     1788    10952    6                          BUF_CNT = BUF_CNT + 1;

  10952 10 005471   000001 035007                    ADLA    1,DL
        10 005472   200011 755100                    STA     BUF_CNT,,AUTO

     1789    10953    6                          CALL MY_BINCHAR(LAST_CHAN,CHAN_BUF,LEN);

  10953 10 005473   200012 630500                    EPPR0   LEN,,AUTO
        10 005474   200045 450500                    STP0    SCRATCH,,AUTO
        10 005475   200013 631500                    EPPR1   CHAN_BUF,,AUTO
        10 005476   200044 451500                    STP1    @BUFFER,,AUTO
        10 005477   200014 633500                    EPPR3   LAST_CHAN,,AUTO
        10 005500   200043 453500                    STP3    @VALUE,,AUTO
        10 005501   007053 701000 10                 TSX1    MY_BINCHAR
        10 005502   000000 011000                    NOP     0

     1790    10954    6                          CALL INSERT(PATH_BUF,BUF_CNT,LEN,CHAN_BUF);

  10954 10 005503   200012 720100                    LXL0    LEN,,AUTO
        10 005504   200011 235100                    LDA     BUF_CNT,,AUTO
        10 005505   040045 100500                    MLR     fill='040'O
        10 005506   200013 000002                    ADSC9   CHAN_BUF,,AUTO           cn=0,n=2
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:260  
        10 005507   001564 000010 7                  ADSC9   PATH_BUF,A               cn=0,n=*X0

     1791    10955    6                          BUF_CNT = BUF_CNT + LEN;

  10955 10 005510   200011 236100                    LDQ     BUF_CNT,,AUTO
        10 005511   200012 036100                    ADLQ    LEN,,AUTO
        10 005512   200011 756100                    STQ     BUF_CNT,,AUTO

     1792    10956    6                       END;

     1793    10957    5   NO_CHANS:
     1794    10958    5                    END;  /* DO IOM# = 0 TO NUMIOMS */

  10958 10 005513   200010 235100       NO_CHANS     LDA     IOM#,,AUTO
        10 005514   000001 035007                    ADLA    1,DL
        10 005515   200010 755100                    STA     IOM#,,AUTO
        10 005516   001116 236000 7                  LDQ     HEADREC
        10 005517   777777 376007                    ANQ     -1,DL
        10 005520   200010 116100                    CMPQ    IOM#,,AUTO
        10 005521   005523 600000 10                 TZE     s:10959
        10 005522   005244 603000 10                 TRC     s:10903

     1795    10959    5                 IF CHANS_FOUND = 0 THEN DO;

  10959 10 005523   200035 235100                    LDA     CHANS_FOUND,,AUTO
        10 005524   005533 601000 10                 TNZ     s:10963

     1796    10960    5                    CALL INSERT(PATH_BUF,BUF_CNT,21,': component not found');

  10960 10 005525   200011 235100                    LDA     BUF_CNT,,AUTO
        10 005526   040005 100400                    MLR     fill='040'O
        10 005527   000314 000025 8                  ADSC9   TEXTC_VEC+18             cn=0,n=21
        10 005530   001564 000025 7                  ADSC9   PATH_BUF,A               cn=0,n=21

     1797    10961    5                    BUF_CNT = BUF_CNT + 21;

  10961 10 005531   000025 035007                    ADLA    21,DL
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:261  
        10 005532   200011 755100                    STA     BUF_CNT,,AUTO

     1798    10962    5                    END;  /* IF CHANS_FOUND = 0 */

     1799    10963    4                 TEXTC.TXT = PATH_BUF;

  10963 10 005533   040000 100400                    MLR     fill='040'O
        10 005534   001564 000204 7                  ADSC9   PATH_BUF                 cn=0,n=132
        10 005535   003700 200204 7                  ADSC9   TEXTC                    cn=1,n=132

     1800    10964    4                 TEXTC.CNT = BUF_CNT;

  10964 10 005536   200011 236100                    LDQ     BUF_CNT,,AUTO
        10 005537   000033 736000                    QLS     27
        10 005540   003700 552040 7                  STBQ    TEXTC,'40'O

     1801    10965    4                 CALL TSW$WRITE(TEXTC_VEC,VECTOR(TEXTC));

  10965 10 005541   000234 630400 11                 EPPR0   156
        10 005542   000020 631400 xsym               EPPR1   B_VECTNIL+16
        10 005543   000000 701000 xent               TSX1    TSW$WRITE
        10 005544   000000 011000                    NOP     0

     1802    10966    5                 DO WHILE('0'B);  /* DO NEVER */

  10966 10 005545   005556 710000 10                 TRA     s:10973

     1803    10967    5        PATH_ERR:   CALL TSE$ERROR(0);

  10967 10 005546   000034 630400 11    PATH_ERR     EPPR0   28
        10 005547   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 005550   000000 701000 xent               TSX1    TSE$ERROR
        10 005551   000000 011000                    NOP     0

     1804    10968    5                    CALL TSE$ERROR(%E$T_CANTDIPATH);

  10968 10 005552   000236 630400 11                 EPPR0   158
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:262  
        10 005553   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 005554   000000 701000 xent               TSX1    TSE$ERROR
        10 005555   000000 011000                    NOP     0

     1805    10969        /*E* ERROR: TSS-E$T_CANTDIPATH-0
     1806    10970             MESSAGE: Unable to access :CONFIG - cannot display path.
     1807    10971             DESCRIPTION: CANT FIND THE COMPONENTS */
     1808    10972    5                    END;  /* DO NEVER */

     1809    10973    4                 IF DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#

  10973 10 005556   000000 236007 xsym               LDQ     M$CONF,DL
        10 005557   000000 470400 11                 LDP0    0
        10 005560   000000 471500                    LDP1    0,,PR0
        10 005561   100000 473506                    LDP3    0,QL,PR1
        10 005562   300031 236100                    LDQ     25,,PR3
        10 005563   020000 316007                    CANQ    8192,DL
        10 005564   006552 600000 10                 TZE     s:11199

     1810    10974    4                    THEN CALL M$CLOSE(CLOSE_CONFIG);

  10974 10 005565   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 005566   050001 713400                    CLIMB   close
        10 005567   406000 401760                    pmme    nvectors=13
        10 005570   006552 710000 10                 TRA     s:11199

     1811    10975        /**/
     1812    10976    4               CASE (TSS_DEV);

     1813    10977    4                 SYSCON_FPT.V.COMPONENT# = %DVC#;

  10977 10 005571   000002 236003                    LDQ     2,DU
        10 005572   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1814    10978    4                 SYSCON_FPT.V.DEVNM# = CMD$ -> TS$DEV.DEVNAME;

  10978 10 005573   040000 100500                    MLR     fill='040'O
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:263  
        10 005574   000001 000010                    ADSC9   1,,PR0                   cn=0,n=8
        10 005575   000713 000010 7                  ADSC9   SYSCON_FPT+5             cn=0,n=8

     1815    10979        /**/
     1816    10980    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (DISP_ERR);

  10980 10 005576   000706 630400 7                  EPPR0   SYSCON_FPT
        10 005577   470007 713400                    CLIMB   alt,+28679
        10 005600   400400 401760                    pmme    nvectors=2
        10 005601   006604 702000 10                 TSX2    DISP_ERR

     1817    10981        /**/
     1818    10982    4                 SUB_BUF_1.COUNT = SIZEC(SYSCON_FPT.V.DEVNM#);

  10982 10 005602   010000 236003                    LDQ     4096,DU
        10 005603   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1819    10983    4                 SUB_BUF_1.TEXT = SYSCON_FPT.V.DEVNM#;

  10983 10 005604   040000 100400                    MLR     fill='040'O
        10 005605   000713 000010 7                  ADSC9   SYSCON_FPT+5             cn=0,n=8
        10 005606   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     1820    10984    5                 IF RESULTS.TDOK# THEN DO;

  10984 10 005607   004012 236000 7                  LDQ     RESULTS
        10 005610   200000 316003                    CANQ    65536,DU
        10 005611   005620 600000 10                 TZE     s:10989

     1821    10985    5                    SUB_BUF_2.COUNT = 3;

  10985 10 005612   003000 236003                    LDQ     1536,DU
        10 005613   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

     1822    10986    5                    SUB_BUF_2.TEXT = 'Yes';

  10986 10 005614   040000 100400                    MLR     fill='040'O
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:264  
        10 005615   000305 000003 8                  ADSC9   TEXTC_VEC+11             cn=0,n=3
        10 005616   003755 200037 7                  ADSC9   SUB_BUF_2                cn=1,n=31

     1823    10987    5                    END;  /* IF */

  10987 10 005617   005625 710000 10                 TRA     s:10992

     1824    10988    5                 ELSE DO;

     1825    10989    5                    SUB_BUF_2.COUNT = 2;

  10989 10 005620   002000 236003                    LDQ     1024,DU
        10 005621   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

     1826    10990    5                    SUB_BUF_2.TEXT = 'No';

  10990 10 005622   040000 100400                    MLR     fill='040'O
        10 005623   000306 000002 8                  ADSC9   TEXTC_VEC+12             cn=0,n=2
        10 005624   003755 200037 7                  ADSC9   SUB_BUF_2                cn=1,n=31

     1827    10991    5                    END;  /* ELSE */

     1828    10992    5                 IF SUBSTR(SUB_BUF_1.TEXT,0,2) = 'DP' THEN DO;

  10992 10 005625   040000 106400                    CMPC    fill='040'O
        10 005626   003745 200002 7                  ADSC9   SUB_BUF_1                cn=1,n=2
        10 005627   000307 000002 8                  ADSC9   TEXTC_VEC+13             cn=0,n=2
        10 005630   005650 601000 10                 TNZ     s:11003

     1829    10993    6                    IF RESULTS.CHECKWRITE# THEN DO;

  10993 10 005631   004012 236000 7                  LDQ     RESULTS
        10 005632   100000 316003                    CANQ    32768,DU
        10 005633   005642 600000 10                 TZE     s:10998

     1830    10994    6                       SUB_BUF_3.COUNT = 3;

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:265  
  10994 10 005634   003000 236003                    LDQ     1536,DU
        10 005635   003765 552040 7                  STBQ    SUB_BUF_3,'40'O

     1831    10995    6                       SUB_BUF_3.TEXT = 'Yes';

  10995 10 005636   040000 100400                    MLR     fill='040'O
        10 005637   000305 000003 8                  ADSC9   TEXTC_VEC+11             cn=0,n=3
        10 005640   003765 200037 7                  ADSC9   SUB_BUF_3                cn=1,n=31

     1832    10996    6                       END;  /* IF CHECKWRITE# */

  10996 10 005641   005655 710000 10                 TRA     s:11006

     1833    10997    6                    ELSE DO;

     1834    10998    6                       SUB_BUF_3.COUNT = 2;

  10998 10 005642   002000 236003                    LDQ     1024,DU
        10 005643   003765 552040 7                  STBQ    SUB_BUF_3,'40'O

     1835    10999    6                       SUB_BUF_3.TEXT = 'No';

  10999 10 005644   040000 100400                    MLR     fill='040'O
        10 005645   000306 000002 8                  ADSC9   TEXTC_VEC+12             cn=0,n=2
        10 005646   003765 200037 7                  ADSC9   SUB_BUF_3                cn=1,n=31

     1836    11000    6                       END;  /* ELSE */

     1837    11001    5                    END;  /* IF TEXT = 'DP' */

  11001 10 005647   005655 710000 10                 TRA     s:11006

     1838    11002    5                 ELSE DO;

     1839    11003    5                    SUB_BUF_3.COUNT = 0;

  11003 10 005650   000000 236003                    LDQ     0,DU
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:266  
        10 005651   003765 552040 7                  STBQ    SUB_BUF_3,'40'O

     1840    11004    5                    SUB_BUF_3.TEXT = ' ';

  11004 10 005652   040000 100400                    MLR     fill='040'O
        10 005653   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
        10 005654   003765 200037 7                  ADSC9   SUB_BUF_3                cn=1,n=31

     1841    11005    5                    END;  /* ELSE */

     1842    11006    4                 CALL FIX_PART;

  11006 10 005655   006612 701000 10                 TSX1    FIX_PART
        10 005656   000000 011000                    NOP     0

     1843    11007    5                 IF (RESULTS.PART#) THEN DO;

  11007 10 005657   004012 234000 7                  SZN     RESULTS
        10 005660   005677 605000 10                 TPL     s:11013

     1844    11008    5                    IF SUBSTR(SUB_BUF_1.TEXT,0,2) = 'DP'

  11008 10 005661   040000 106400                    CMPC    fill='040'O
        10 005662   003745 200002 7                  ADSC9   SUB_BUF_1                cn=1,n=2
        10 005663   000307 000002 8                  ADSC9   TEXTC_VEC+13             cn=0,n=2
        10 005664   005672 601000 10                 TNZ     s:11010

     1845    11009    5                       THEN CALL TSW$WRITE(DPPART_VEC,VECTOR(SUB_BUF_1),VECTOR(PART),
             11009                                VECTOR(SUB_BUF_2),VECTOR(SUB_BUF_3));

  11009 10 005665   000212 630400 11                 EPPR0   138
        10 005666   000023 631400 xsym               EPPR1   B_VECTNIL+19
        10 005667   000000 701000 xent               TSX1    TSW$WRITE
        10 005670   000000 011000                    NOP     0
        10 005671   006552 710000 10                 TRA     s:11199

     1846    11010    5                       ELSE CALL TSW$WRITE(DEVPART_VEC,VECTOR(SUB_BUF_1),VECTOR(PART),
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:267  
             11010                                VECTOR(SUB_BUF_2),VECTOR(SUB_BUF_3));

  11010 10 005672   000237 630400 11                 EPPR0   159
        10 005673   000023 631400 xsym               EPPR1   B_VECTNIL+19
        10 005674   000000 701000 xent               TSX1    TSW$WRITE
        10 005675   000000 011000                    NOP     0

     1847    11011    5                    END;  /* IF RESULTS.PART# */

  11011 10 005676   006552 710000 10                 TRA     s:11199

     1848    11012    5                 ELSE DO;

     1849    11013    5                    IF SUBSTR(SUB_BUF_1.TEXT,0,2) = 'DP'

  11013 10 005677   040000 106400                    CMPC    fill='040'O
        10 005700   003745 200002 7                  ADSC9   SUB_BUF_1                cn=1,n=2
        10 005701   000307 000002 8                  ADSC9   TEXTC_VEC+13             cn=0,n=2
        10 005702   005710 601000 10                 TNZ     s:11015

     1850    11014    5                      THEN CALL TSW$WRITE(DPNOTPART_VEC,VECTOR(SUB_BUF_1),VECTOR(PART)
             11014                                ,VECTOR(SUB_BUF_2),VECTOR(SUB_BUF_3));

  11014 10 005703   000217 630400 11                 EPPR0   143
        10 005704   000023 631400 xsym               EPPR1   B_VECTNIL+19
        10 005705   000000 701000 xent               TSX1    TSW$WRITE
        10 005706   000000 011000                    NOP     0
        10 005707   006552 710000 10                 TRA     s:11199

     1851    11015    5                      ELSE CALL TSW$WRITE(DEVNOTPART_VEC,VECTOR(SUB_BUF_1),VECTOR(PART
             11015                                ),VECTOR(SUB_BUF_2),VECTOR(SUB_BUF_3));

  11015 10 005710   000244 630400 11                 EPPR0   164
        10 005711   000023 631400 xsym               EPPR1   B_VECTNIL+19
        10 005712   000000 701000 xent               TSX1    TSW$WRITE
        10 005713   000000 011000                    NOP     0

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:268  
     1852    11016    5                     END;  /* ELSE */

  11016 10 005714   006552 710000 10                 TRA     s:11199

     1853    11017        /**/
     1854    11018    4               CASE (TSS_MPC);

     1855    11019    4                 SYSCON_FPT.V.COMPONENT# = %MPC#;

  11019 10 005715   000003 236003                    LDQ     3,DU
        10 005716   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1856    11020    4                 SYSCON_FPT.V.DEVNM# = CMD$ -> TS$MPC.MPCNAME;

  11020 10 005717   040000 100500                    MLR     fill='040'O
        10 005720   000001 000010                    ADSC9   1,,PR0                   cn=0,n=8
        10 005721   000713 000010 7                  ADSC9   SYSCON_FPT+5             cn=0,n=8

     1857    11021        /**/
     1858    11022    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (DISP_ERR);

  11022 10 005722   000706 630400 7                  EPPR0   SYSCON_FPT
        10 005723   470007 713400                    CLIMB   alt,+28679
        10 005724   400400 401760                    pmme    nvectors=2
        10 005725   006604 702000 10                 TSX2    DISP_ERR

     1859    11023        /**/
     1860    11024    4                 SUB_BUF_1.COUNT = 4;

  11024 10 005726   004000 236003                    LDQ     2048,DU
        10 005727   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1861    11025    4                 SUB_BUF_1.TEXT = SYSCON_FPT.V.DEVNM#;

  11025 10 005730   040000 100400                    MLR     fill='040'O
        10 005731   000713 000010 7                  ADSC9   SYSCON_FPT+5             cn=0,n=8
        10 005732   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:269  

     1862    11026    5                 IF RESULTS.TDOK# THEN DO;

  11026 10 005733   004012 236000 7                  LDQ     RESULTS
        10 005734   200000 316003                    CANQ    65536,DU
        10 005735   005744 600000 10                 TZE     s:11031

     1863    11027    5                    SUB_BUF_2.COUNT = 3;

  11027 10 005736   003000 236003                    LDQ     1536,DU
        10 005737   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

     1864    11028    5                    SUB_BUF_2.TEXT = 'Yes';

  11028 10 005740   040000 100400                    MLR     fill='040'O
        10 005741   000305 000003 8                  ADSC9   TEXTC_VEC+11             cn=0,n=3
        10 005742   003755 200037 7                  ADSC9   SUB_BUF_2                cn=1,n=31

     1865    11029    5                    END;  /* IF */

  11029 10 005743   005751 710000 10                 TRA     s:11034

     1866    11030    5                 ELSE DO;

     1867    11031    5                    SUB_BUF_2.COUNT = 2;

  11031 10 005744   002000 236003                    LDQ     1024,DU
        10 005745   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

     1868    11032    5                    SUB_BUF_2.TEXT = 'No';

  11032 10 005746   040000 100400                    MLR     fill='040'O
        10 005747   000306 000002 8                  ADSC9   TEXTC_VEC+12             cn=0,n=2
        10 005750   003755 200037 7                  ADSC9   SUB_BUF_2                cn=1,n=31

     1869    11033    5                    END;  /* ELSE */

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:270  
     1870    11034    4                 CALL FIX_PART;

  11034 10 005751   006612 701000 10                 TSX1    FIX_PART
        10 005752   000000 011000                    NOP     0

     1871    11035    4                 IF (RESULTS.PART#) THEN CALL TSW$WRITE(MPCPART_VEC,VECTOR(SUB_BUF_1),
             11035                          VECTOR(PART),VECTOR(SUB_BUF_2));

  11035 10 005753   004012 234000 7                  SZN     RESULTS
        10 005754   005762 605000 10                 TPL     s:11036

  11035 10 005755   000202 630400 11                 EPPR0   130
        10 005756   000022 631400 xsym               EPPR1   B_VECTNIL+18
        10 005757   000000 701000 xent               TSX1    TSW$WRITE
        10 005760   000000 011000                    NOP     0
        10 005761   006552 710000 10                 TRA     s:11199

     1872    11036    4                                   ELSE CALL TSW$WRITE(MPCNOTPART_VEC,VECTOR(SUB_BUF_1
             11036                                             ),VECTOR(PART),VECTOR(SUB_BUF_2));

  11036 10 005762   000206 630400 11                 EPPR0   134
        10 005763   000022 631400 xsym               EPPR1   B_VECTNIL+18
        10 005764   000000 701000 xent               TSX1    TSW$WRITE
        10 005765   000000 011000                    NOP     0
        10 005766   006552 710000 10                 TRA     s:11199

     1873    11037        /**/
     1874    11038    4               CASE (TSS_FEP);

     1875    11039    4                 SYSCON_FPT.V.COMPONENT# = %FEP##;

  11039 10 005767   000004 236003                    LDQ     4,DU
        10 005770   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1876    11040    4                 SYSCON_FPT.V.CHAN# = CMD$ -> TS$FEP.FEP;

  11040 10 005771   000002 236100                    LDQ     2,,PR0
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:271  
        10 005772   000712 552004 7                  STBQ    SYSCON_FPT+4,'04'O

     1877    11041        /**/
     1878    11042    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (DISP_ERR);

  11042 10 005773   000706 630400 7                  EPPR0   SYSCON_FPT
        10 005774   470007 713400                    CLIMB   alt,+28679
        10 005775   400400 401760                    pmme    nvectors=2
        10 005776   006604 702000 10                 TSX2    DISP_ERR

     1879    11043        /**/
     1880    11044    4                 SUB_BUF_1.COUNT = CMD$->TS$FEP.LEN + 3;

  11044 10 005777   001062 470400 7                  LDP0    CMD$
        10 006000   000001 236100                    LDQ     1,,PR0
        10 006001   000022 772000                    QRL     18
        10 006002   000003 036007                    ADLQ    3,DL
        10 006003   000033 736000                    QLS     27
        10 006004   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1881    11045    4                 SUB_BUF_1.TEXT = 'FEP';

  11045 10 006005   040000 100400                    MLR     fill='040'O
        10 006006   000300 000003 8                  ADSC9   TEXTC_VEC+6              cn=0,n=3
        10 006007   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     1882    11046    4                CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,CMD$->TS$FEP.LEN),CMD$ -> TS$FEP.
             11046                          FEP);

  11046 10 006010   000001 220100                    LDX0    1,,PR0
        10 006011   000002 236100                    LDQ     2,,PR0
        10 006012   777777 376007                    ANQ     -1,DL
        10 006013   000000 235003                    LDA     0,DU
        10 006014   200056 757100                    STAQ    I+4,,AUTO
        10 006015   000040 301500                    BTD
        10 006016   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 006017   003746 030010 7                  NDSC9   SUB_BUF_1+1              cn=0,s=nosgn,sf=0,n=*X0
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:272  

     1883    11047    5                 IF RESULTS.TDOK# THEN DO;

  11047 10 006020   004012 236000 7                  LDQ     RESULTS
        10 006021   200000 316003                    CANQ    65536,DU
        10 006022   006031 600000 10                 TZE     s:11052

     1884    11048    5                    SUB_BUF_2.COUNT = 3;

  11048 10 006023   003000 236003                    LDQ     1536,DU
        10 006024   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

     1885    11049    5                    SUB_BUF_2.TEXT = 'Yes';

  11049 10 006025   040000 100400                    MLR     fill='040'O
        10 006026   000305 000003 8                  ADSC9   TEXTC_VEC+11             cn=0,n=3
        10 006027   003755 200037 7                  ADSC9   SUB_BUF_2                cn=1,n=31

     1886    11050    5                    END;  /* IF */

  11050 10 006030   006036 710000 10                 TRA     s:11055

     1887    11051    5                 ELSE DO;

     1888    11052    5                    SUB_BUF_2.COUNT = 2;

  11052 10 006031   002000 236003                    LDQ     1024,DU
        10 006032   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

     1889    11053    5                    SUB_BUF_2.TEXT = 'No';

  11053 10 006033   040000 100400                    MLR     fill='040'O
        10 006034   000306 000002 8                  ADSC9   TEXTC_VEC+12             cn=0,n=2
        10 006035   003755 200037 7                  ADSC9   SUB_BUF_2                cn=1,n=31

     1890    11054    5                    END;  /* ELSE */

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:273  
     1891    11055    4                 CALL FIX_PART;

  11055 10 006036   006612 701000 10                 TSX1    FIX_PART
        10 006037   000000 011000                    NOP     0

     1892    11056    4                 IF (RESULTS.PART#) THEN CALL TSW$WRITE(DEVPART_VEC,VECTOR(SUB_BUF_1),
             11056                          VECTOR(PART),VECTOR(SUB_BUF_2));

  11056 10 006040   004012 234000 7                  SZN     RESULTS
        10 006041   006047 605000 10                 TPL     s:11057

  11056 10 006042   000172 630400 11                 EPPR0   122
        10 006043   000022 631400 xsym               EPPR1   B_VECTNIL+18
        10 006044   000000 701000 xent               TSX1    TSW$WRITE
        10 006045   000000 011000                    NOP     0
        10 006046   006552 710000 10                 TRA     s:11199

     1893    11057    4                                   ELSE CALL TSW$WRITE(DEVNOTPART_VEC,VECTOR(SUB_BUF_1
             11057                                             ),VECTOR(PART),VECTOR(SUB_BUF_2));

  11057 10 006047   000176 630400 11                 EPPR0   126
        10 006050   000022 631400 xsym               EPPR1   B_VECTNIL+18
        10 006051   000000 701000 xent               TSX1    TSW$WRITE
        10 006052   000000 011000                    NOP     0
        10 006053   006552 710000 10                 TRA     s:11199

     1894    11058        /**/
     1895    11059    4               CASE (TSS_IOM);

     1896    11060    4                 SYSCON_FPT.V.COMPONENT# = %IOM##;

  11060 10 006054   000005 236003                    LDQ     5,DU
        10 006055   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1897    11061    4                 SYSCON_FPT.V.IOM# = CMD$ -> TS$IOM.IOM;

  11061 10 006056   000001 236100                    LDQ     1,,PR0
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:274  
        10 006057   000011 736000                    QLS     9
        10 006060   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

     1898    11062        /**/
     1899    11063    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (DISP_ERR);

  11063 10 006061   000706 630400 7                  EPPR0   SYSCON_FPT
        10 006062   470007 713400                    CLIMB   alt,+28679
        10 006063   400400 401760                    pmme    nvectors=2
        10 006064   006604 702000 10                 TSX2    DISP_ERR

     1900    11064        /**/
     1901    11065    4                 SUB_BUF_1.COUNT = 4;

  11065 10 006065   004000 236003                    LDQ     2048,DU
        10 006066   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1902    11066    4                 SUB_BUF_1.TEXT = 'IOM';

  11066 10 006067   040000 100400                    MLR     fill='040'O
        10 006070   000301 000003 8                  ADSC9   TEXTC_VEC+7              cn=0,n=3
        10 006071   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     1903    11067    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,1),CMD$ -> TS$IOM.IOM);

  11067 10 006072   001062 470400 7                  LDP0    CMD$
        10 006073   000001 235100                    LDA     1,,PR0
        10 006074   000044 773000                    LRL     36
        10 006075   200056 757100                    STAQ    I+4,,AUTO
        10 006076   000000 301500                    BTD
        10 006077   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 006100   003746 030001 7                  NDSC9   SUB_BUF_1+1              cn=0,s=nosgn,sf=0,n=1

     1904    11068    5                 IF RESULTS.TDOK# THEN DO;

  11068 10 006101   004012 236000 7                  LDQ     RESULTS
        10 006102   200000 316003                    CANQ    65536,DU
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:275  
        10 006103   006112 600000 10                 TZE     s:11073

     1905    11069    5                    SUB_BUF_2.COUNT = 3;

  11069 10 006104   003000 236003                    LDQ     1536,DU
        10 006105   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

     1906    11070    5                    SUB_BUF_2.TEXT = 'Yes';

  11070 10 006106   040000 100400                    MLR     fill='040'O
        10 006107   000305 000003 8                  ADSC9   TEXTC_VEC+11             cn=0,n=3
        10 006110   003755 200037 7                  ADSC9   SUB_BUF_2                cn=1,n=31

     1907    11071    5                    END;  /* IF */

  11071 10 006111   006117 710000 10                 TRA     s:11076

     1908    11072    5                 ELSE DO;

     1909    11073    5                    SUB_BUF_2.COUNT = 2;

  11073 10 006112   002000 236003                    LDQ     1024,DU
        10 006113   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

     1910    11074    5                    SUB_BUF_2.TEXT = 'No';

  11074 10 006114   040000 100400                    MLR     fill='040'O
        10 006115   000306 000002 8                  ADSC9   TEXTC_VEC+12             cn=0,n=2
        10 006116   003755 200037 7                  ADSC9   SUB_BUF_2                cn=1,n=31

     1911    11075    5                    END;  /* ELSE */

     1912    11076    4                 CALL FIX_PART;

  11076 10 006117   006612 701000 10                 TSX1    FIX_PART
        10 006120   000000 011000                    NOP     0

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:276  
     1913    11077    4                 IF (RESULTS.PART#) THEN CALL TSW$WRITE(IOMPART_VEC,VECTOR(SUB_BUF_1),
             11077                          VECTOR(PART));

  11077 10 006121   004012 234000 7                  SZN     RESULTS
        10 006122   006130 605000 10                 TPL     s:11078

  11077 10 006123   000164 630400 11                 EPPR0   116
        10 006124   000021 631400 xsym               EPPR1   B_VECTNIL+17
        10 006125   000000 701000 xent               TSX1    TSW$WRITE
        10 006126   000000 011000                    NOP     0
        10 006127   006552 710000 10                 TRA     s:11199

     1914    11078    4                                   ELSE CALL TSW$WRITE(IOMNOPART_VEC,VECTOR(SUB_BUF_1)
             11078                                             ,VECTOR(PART));

  11078 10 006130   000167 630400 11                 EPPR0   119
        10 006131   000021 631400 xsym               EPPR1   B_VECTNIL+17
        10 006132   000000 701000 xent               TSX1    TSW$WRITE
        10 006133   000000 011000                    NOP     0
        10 006134   006552 710000 10                 TRA     s:11199

     1915    11079        /**/
     1916    11080    4               CASE (TSS_CHAN);

     1917    11081    4                 SYSCON_FPT.V.COMPONENT# = %CHANNEL#;

  11081 10 006135   000001 236003                    LDQ     1,DU
        10 006136   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     1918    11082    4                 SYSCON_FPT.V.IOM# = CMD$ -> TS$CHAN.IOM;

  11082 10 006137   000001 236100                    LDQ     1,,PR0
        10 006140   000011 736000                    QLS     9
        10 006141   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

     1919    11083    4                 SUB_BUF_1.COUNT = 1;

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:277  
  11083 10 006142   001000 236003                    LDQ     512,DU
        10 006143   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     1920    11084    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,0,1),CMD$ -> TS$CHAN.IOM);

  11084 10 006144   000001 235100                    LDA     1,,PR0
        10 006145   000044 773000                    LRL     36
        10 006146   200056 757100                    STAQ    I+4,,AUTO
        10 006147   000000 301500                    BTD
        10 006150   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 006151   003745 230001 7                  NDSC9   SUB_BUF_1                cn=1,s=nosgn,sf=0,n=1

     1921    11085    5                 DO I = CMD$ -> TS$CHAN.LOCHAN TO CMD$ -> TS$CHAN.HICHAN;

  11085 10 006152   000002 235100                    LDA     2,,PR0
        10 006153   001067 755000 7                  STA     I
        10 006154   006224 710000 10                 TRA     s:11105+1

     1922    11086    5                    SYSCON_FPT.V.CHAN# = I;

  11086 10 006155   001067 236000 7                  LDQ     I
        10 006156   000712 552004 7                  STBQ    SYSCON_FPT+4,'04'O

     1923    11087        /**/
     1924    11088    5                    CALL M$SYSCON (SYSCON_FPT) ALTRET (DISP_ERR);

  11088 10 006157   000706 630400 7                  EPPR0   SYSCON_FPT
        10 006160   470007 713400                    CLIMB   alt,+28679
        10 006161   400400 401760                    pmme    nvectors=2
        10 006162   006604 702000 10                 TSX2    DISP_ERR

     1925    11089        /**/
     1926    11090    5                    SUB_BUF_2.COUNT = 3;

  11090 10 006163   003000 236003                    LDQ     1536,DU
        10 006164   003755 552040 7                  STBQ    SUB_BUF_2,'40'O

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:278  
     1927    11091    5                    CALL BINCHAR(SUBSTR(SUB_BUF_2.TEXT,0,3),I);

  11091 10 006165   000000 301400                    BTD
        10 006166   001067 000004 7                  NDSC9   I                        cn=0,s=lsgnf,sf=0,n=4
        10 006167   003755 230003 7                  NDSC9   SUB_BUF_2                cn=1,s=nosgn,sf=0,n=3

     1928    11092    6                    IF RESULTS.TDOK# THEN DO;

  11092 10 006170   004012 236000 7                  LDQ     RESULTS
        10 006171   200000 316003                    CANQ    65536,DU
        10 006172   006201 600000 10                 TZE     s:11097

     1929    11093    6                       SUB_BUF_3.COUNT = 3;

  11093 10 006173   003000 236003                    LDQ     1536,DU
        10 006174   003765 552040 7                  STBQ    SUB_BUF_3,'40'O

     1930    11094    6                       SUB_BUF_3.TEXT = 'Yes';

  11094 10 006175   040000 100400                    MLR     fill='040'O
        10 006176   000305 000003 8                  ADSC9   TEXTC_VEC+11             cn=0,n=3
        10 006177   003765 200037 7                  ADSC9   SUB_BUF_3                cn=1,n=31

     1931    11095    6                       END;  /* IF */

  11095 10 006200   006206 710000 10                 TRA     s:11100

     1932    11096    6                    ELSE DO;

     1933    11097    6                       SUB_BUF_3.COUNT = 2;

  11097 10 006201   002000 236003                    LDQ     1024,DU
        10 006202   003765 552040 7                  STBQ    SUB_BUF_3,'40'O

     1934    11098    6                       SUB_BUF_3.TEXT = 'No';

  11098 10 006203   040000 100400                    MLR     fill='040'O
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:279  
        10 006204   000306 000002 8                  ADSC9   TEXTC_VEC+12             cn=0,n=2
        10 006205   003765 200037 7                  ADSC9   SUB_BUF_3                cn=1,n=31

     1935    11099    6                       END;  /* ELSE */

     1936    11100    5                    CALL FIX_PART;

  11100 10 006206   006612 701000 10                 TSX1    FIX_PART
        10 006207   000000 011000                    NOP     0

     1937    11101    5                    IF (RESULTS.PART#) THEN CALL TSW$WRITE(CHANPART_VEC,VECTOR(
             11101                             SUB_BUF_1),VECTOR(SUB_BUF_2),

  11101 10 006210   004012 234000 7                  SZN     RESULTS
        10 006211   006217 605000 10                 TPL     s:11103

  11101 10 006212   000152 630400 11                 EPPR0   106
        10 006213   000023 631400 xsym               EPPR1   B_VECTNIL+19
        10 006214   000000 701000 xent               TSX1    TSW$WRITE
        10 006215   000000 011000                    NOP     0
        10 006216   006223 710000 10                 TRA     s:11105

     1938    11102    5                                                           VECTOR(PART),VECTOR(
             11102                                                                    SUB_BUF_3));
     1939    11103    5                                       ELSE CALL TSW$WRITE(CHANNOTPART_VEC,VECTOR(
             11103                                                SUB_BUF_1),VECTOR(SUB_BUF_2),

  11103 10 006217   000157 630400 11                 EPPR0   111
        10 006220   000023 631400 xsym               EPPR1   B_VECTNIL+19
        10 006221   000000 701000 xent               TSX1    TSW$WRITE
        10 006222   000000 011000                    NOP     0

     1940    11104    5                                                           VECTOR(PART),VECTOR(
             11104                                                                    SUB_BUF_3));
     1941    11105    5                    END;

  11105 10 006223   001067 054000 7                  AOS     I
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:280  
        10 006224   001062 470400 7                  LDP0    CMD$
        10 006225   000003 236100                    LDQ     3,,PR0
        10 006226   006155 604000 10                 TMI     s:11086
        10 006227   001067 116000 7                  CMPQ    I
        10 006230   006155 605000 10                 TPL     s:11086
        10 006231   006552 710000 10                 TRA     s:11199

     1942    11106        /**/
     1943    11107    4               CASE (TSS_PAGES);

     1944    11108    4                 TS_PRINT_HEADING = '0'B;

  11108 10 006232   001074 450000 7                  STZ     TS_PRINT_HEADING

     1945    11109    4                 LOPAGE = CMD$ -> TS$PAGES.LOPAGE;

  11109 10 006233   000001 235100                    LDA     1,,PR0
        10 006234   001104 755000 7                  STA     LOPAGE

     1946    11110    4                 HIPAGE = CMD$ -> TS$PAGES.HIPAGE;

  11110 10 006235   000002 235100                    LDA     2,,PR0
        10 006236   001103 755000 7                  STA     HIPAGE

     1947    11111    4                 GET_PGLIST.V.MAXPGS# = 1;

  11111 10 006237   000001 236007                    LDQ     1,DL
        10 006240   000723 756000 7                  STQ     GET_PGLIST+5

     1948    11112    4                 GET_PGLIST.V.LOWPP# = LOPAGE;

  11112 10 006241   001104 720000 7                  LXL0    LOPAGE
        10 006242   000722 440000 7                  SXL0    GET_PGLIST+4

     1949    11113    4                 GET_PGLIST.V.HIGHPP# = HIPAGE;

  11113 10 006243   000000 621005                    EAX1    0,AL
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:281  
        10 006244   000722 741000 7                  STX1    GET_PGLIST+4

     1950    11114    4                 TS_LAST = MINIMUM(HIPAGE,VLR_MONINFO.PCORE#);

  11114 10 006245   001030 236000 7                  LDQ     VLR_MONINFO+4
        10 006246   001103 116000 7                  CMPQ    HIPAGE
        10 006247   006252 602000 10                 TNC     s:11114+5
        10 006250   006252 600000 10                 TZE     s:11114+5
        10 006251   001103 236000 7                  LDQ     HIPAGE
        10 006252   001101 756000 7                  STQ     TS_LAST

     1951    11115    4                 TS_FIRST = LOPAGE;

  11115 10 006253   001104 235000 7                  LDA     LOPAGE
        10 006254   001100 755000 7                  STA     TS_FIRST

     1952    11116    4                 IF LOPAGE > VLR_MONINFO.PCORE# THEN GOTO BADP;

  11116 10 006255   001030 236000 7                  LDQ     VLR_MONINFO+4
        10 006256   001104 116000 7                  CMPQ    LOPAGE
        10 006257   006442 602000 10                 TNC     BADP

     1953    11117    4                 IF HIPAGE=BITBIN('777777777777'O) THEN HIPAGE = VLR_MONINFO.PCORE#;

  11117 10 006260   001103 236000 7                  LDQ     HIPAGE
        10 006261   000027 116000 xsym               CMPQ    B_VECTNIL+23
        10 006262   006265 601000 10                 TNZ     s:11119

  11117 10 006263   001030 235000 7                  LDA     VLR_MONINFO+4
        10 006264   001103 755000 7                  STA     HIPAGE

     1954    11118        /**/
     1955    11119    4                 CALL M$GBPL(GET_PGLIST);

  11119 10 006265   000716 630400 7                  EPPR0   GET_PGLIST
        10 006266   030021 713400                    CLIMB   12305
        10 006267   400400 401760                    pmme    nvectors=2
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:282  

     1956    11120    4                 IF  PGLIST.NPAGES# = 0  THEN

  11120 10 006270   000724 220000 7                  LDX0    PGLIST
        10 006271   006274 601000 10                 TNZ     s:11125

     1957    11121    5                    DO;

     1958    11122    5                    TS_COL_BAD = FALSE;

  11122 10 006272   001077 450000 7                  STZ     TS_COL_BAD

     1959    11123    5                    GOTO NO_BADPPS;

  11123 10 006273   006422 710000 10                 TRA     NO_BADPPS

     1960    11124    5                    END;
     1961    11125    5                 DO I = LOPAGE TO MINIMUM(HIPAGE,VLR_MONINFO.PCORE#);

  11125 10 006274   001104 235000 7                  LDA     LOPAGE
        10 006275   001067 755000 7                  STA     I
        10 006276   006372 710000 10                 TRA     s:11158+1

     1962    11126    5                    GET_PGLIST.V.LOWPP# = I;

  11126 10 006277   001067 720000 7                  LXL0    I
        10 006300   000722 440000 7                  SXL0    GET_PGLIST+4

     1963    11127    5                    GET_PGLIST.V.HIGHPP# = I;

  11127 10 006301   000722 740000 7                  STX0    GET_PGLIST+4

     1964    11128    5                    CALL M$GBPL(GET_PGLIST);

  11128 10 006302   000716 630400 7                  EPPR0   GET_PGLIST
        10 006303   030021 713400                    CLIMB   12305
        10 006304   400400 401760                    pmme    nvectors=2
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:283  

     1965    11129    5                    IF I = LOPAGE THEN

  11129 10 006305   001067 236000 7                  LDQ     I
        10 006306   006317 604000 10                 TMI     s:11132
        10 006307   001104 116000 7                  CMPQ    LOPAGE
        10 006310   006317 601000 10                 TNZ     s:11132

     1966    11130    5                       IF PGLIST.NPAGES# ~= 0 THEN TS_COL_BAD = TRUE;

  11130 10 006311   000724 220000 7                  LDX0    PGLIST
        10 006312   006316 600000 10                 TZE     s:11131

  11130 10 006313   400000 236003                    LDQ     -131072,DU
        10 006314   001077 756000 7                  STQ     TS_COL_BAD
        10 006315   006317 710000 10                 TRA     s:11132

     1967    11131    5                                              ELSE TS_COL_BAD = FALSE;

  11131 10 006316   001077 450000 7                  STZ     TS_COL_BAD

     1968    11132    5                    IF PGLIST.NPAGES# ~= 0 THEN

  11132 10 006317   000724 220000 7                  LDX0    PGLIST
        10 006320   006346 600000 10                 TZE     s:11147

     1969    11133    6                       DO;

     1970    11134    6                          IF NOT TS_COL_BAD THEN

  11134 10 006321   001077 234000 7                  SZN     TS_COL_BAD
        10 006322   006343 604000 10                 TMI     s:11143

     1971    11135    7                            DO;

     1972    11136    7                               TS_COL_BAD = TRUE;

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:284  
  11136 10 006323   400000 236003                    LDQ     -131072,DU
        10 006324   001077 756000 7                  STQ     TS_COL_BAD

     1973    11137    7                               IF TS_FIRST=TS_LAST THEN

  11137 10 006325   001100 236000 7                  LDQ     TS_FIRST
        10 006326   001101 116000 7                  CMPQ    TS_LAST
        10 006327   006335 601000 10                 TNZ     s:11140

     1974    11138    7                                  CALL TSW$WRITE (PAGE1GOOD_VEC,VECTOR(TS_FIRST));

  11138 10 006330   000254 630400 11                 EPPR0   172
        10 006331   000020 631400 xsym               EPPR1   B_VECTNIL+16
        10 006332   000000 701000 xent               TSX1    TSW$WRITE
        10 006333   000000 011000                    NOP     0
        10 006334   006341 710000 10                 TRA     s:11141

     1975    11139    7                               ELSE
     1976    11140    7                                 CALL TSW$WRITE (PAGEGOOD_VEC,VECTOR(TS_FIRST),VECTOR(
             11140                                           TS_LAST));

  11140 10 006335   000260 630400 11                 EPPR0   176
        10 006336   000021 631400 xsym               EPPR1   B_VECTNIL+17
        10 006337   000000 701000 xent               TSX1    TSW$WRITE
        10 006340   000000 011000                    NOP     0

     1977    11141    7                               TS_FIRST = I;

  11141 10 006341   001067 235000 7                  LDA     I
        10 006342   001100 755000 7                  STA     TS_FIRST

     1978    11142    7                               END;

     1979    11143    6                          TS_LAST = I;

  11143 10 006343   001067 235000 7                  LDA     I
        10 006344   001101 755000 7                  STA     TS_LAST
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:285  

     1980    11144    6                          END;

  11144 10 006345   006371 710000 10                 TRA     s:11158

     1981    11145    5                    ELSE
     1982    11146    6                       DO;

     1983    11147    6                          IF TS_COL_BAD THEN

  11147 10 006346   001077 234000 7                  SZN     TS_COL_BAD
        10 006347   006367 605000 10                 TPL     s:11156

     1984    11148    7                             DO;

     1985    11149    7                                TS_COL_BAD = FALSE;

  11149 10 006350   001077 450000 7                  STZ     TS_COL_BAD

     1986    11150    7                                IF TS_FIRST=TS_LAST THEN

  11150 10 006351   001100 236000 7                  LDQ     TS_FIRST
        10 006352   001101 116000 7                  CMPQ    TS_LAST
        10 006353   006361 601000 10                 TNZ     s:11153

     1987    11151    7                                   CALL TSW$WRITE (PAGE1BAD_VEC,VECTOR(TS_FIRST));

  11151 10 006354   000263 630400 11                 EPPR0   179
        10 006355   000020 631400 xsym               EPPR1   B_VECTNIL+16
        10 006356   000000 701000 xent               TSX1    TSW$WRITE
        10 006357   000000 011000                    NOP     0
        10 006360   006365 710000 10                 TRA     s:11154

     1988    11152    7                                ELSE
     1989    11153    7                                  CALL TSW$WRITE (PAGEBAD_VEC,VECTOR(TS_FIRST),VECTOR(
             11153                                            TS_LAST));

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:286  
  11153 10 006361   000265 630400 11                 EPPR0   181
        10 006362   000021 631400 xsym               EPPR1   B_VECTNIL+17
        10 006363   000000 701000 xent               TSX1    TSW$WRITE
        10 006364   000000 011000                    NOP     0

     1990    11154    7                                TS_FIRST = I;

  11154 10 006365   001067 235000 7                  LDA     I
        10 006366   001100 755000 7                  STA     TS_FIRST

     1991    11155    7                                END;

     1992    11156    6                          TS_LAST = I;

  11156 10 006367   001067 235000 7                  LDA     I
        10 006370   001101 755000 7                  STA     TS_LAST

     1993    11157    6                          END;

     1994    11158    5                    END;  /* DO I */

  11158 10 006371   001067 054000 7                  AOS     I
        10 006372   001030 236000 7                  LDQ     VLR_MONINFO+4
        10 006373   001103 116000 7                  CMPQ    HIPAGE
        10 006374   006377 602000 10                 TNC     s:11158+6
        10 006375   006377 600000 10                 TZE     s:11158+6
        10 006376   001103 236000 7                  LDQ     HIPAGE
        10 006377   000000 116003                    CMPQ    0,DU
        10 006400   006277 604000 10                 TMI     s:11126
        10 006401   001067 116000 7                  CMPQ    I
        10 006402   006277 605000 10                 TPL     s:11126

     1995    11159    4                    IF TS_COL_BAD THEN

  11159 10 006403   001077 234000 7                  SZN     TS_COL_BAD
        10 006404   006422 605000 10                 TPL     NO_BADPPS

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:287  
     1996    11160    4                      IF TS_FIRST = TS_LAST THEN

  11160 10 006405   001100 236000 7                  LDQ     TS_FIRST
        10 006406   001101 116000 7                  CMPQ    TS_LAST
        10 006407   006415 601000 10                 TNZ     s:11163

     1997    11161    4                        CALL TSW$WRITE (PAGE1BAD_VEC,VECTOR(TS_FIRST));

  11161 10 006410   000263 630400 11                 EPPR0   179
        10 006411   000020 631400 xsym               EPPR1   B_VECTNIL+16
        10 006412   000000 701000 xent               TSX1    TSW$WRITE
        10 006413   000000 011000                    NOP     0
        10 006414   006436 710000 10                 TRA     s:11169

     1998    11162    4                      ELSE
     1999    11163    4                        CALL TSW$WRITE (PAGEBAD_VEC,VECTOR(TS_FIRST),VECTOR(TS_LAST));

  11163 10 006415   000265 630400 11                 EPPR0   181
        10 006416   000021 631400 xsym               EPPR1   B_VECTNIL+17
        10 006417   000000 701000 xent               TSX1    TSW$WRITE
        10 006420   000000 011000                    NOP     0
        10 006421   006436 710000 10                 TRA     s:11169

     2000    11164    4                    ELSE   /* the last page(s) was a good one        */
     2001    11165    4   NO_BADPPS:         IF TS_FIRST = TS_LAST THEN

  11165 10 006422   001100 236000 7     NO_BADPPS    LDQ     TS_FIRST
        10 006423   001101 116000 7                  CMPQ    TS_LAST
        10 006424   006432 601000 10                 TNZ     s:11168

     2002    11166    4                        CALL TSW$WRITE (PAGE1GOOD_VEC,VECTOR(TS_FIRST));

  11166 10 006425   000254 630400 11                 EPPR0   172
        10 006426   000020 631400 xsym               EPPR1   B_VECTNIL+16
        10 006427   000000 701000 xent               TSX1    TSW$WRITE
        10 006430   000000 011000                    NOP     0
        10 006431   006436 710000 10                 TRA     s:11169
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:288  

     2003    11167    4                      ELSE
     2004    11168    4                       CALL TSW$WRITE (PAGEGOOD_VEC,VECTOR(TS_FIRST),VECTOR(TS_LAST));

  11168 10 006432   000260 630400 11                 EPPR0   176
        10 006433   000021 631400 xsym               EPPR1   B_VECTNIL+17
        10 006434   000000 701000 xent               TSX1    TSW$WRITE
        10 006435   000000 011000                    NOP     0

     2005    11169    4                    IF HIPAGE>VLR_MONINFO.PCORE#+1 THEN

  11169 10 006436   001030 236000 7                  LDQ     VLR_MONINFO+4
        10 006437   000001 036007                    ADLQ    1,DL
        10 006440   001103 116000 7                  CMPQ    HIPAGE
        10 006441   006552 603000 10                 TRC     s:11199

     2006    11170    4   BADP:                CALL TSE$ERROR (%E$T_PAGEHIGH);

  11170 10 006442   000271 630400 11    BADP         EPPR0   185
        10 006443   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 006444   000000 701000 xent               TSX1    TSE$ERROR
        10 006445   000000 011000                    NOP     0
        10 006446   006552 710000 10                 TRA     s:11199

     2007    11171        /*E* ERROR: TSS-E$T_PAGEHIGH-0
     2008    11172           MESSAGE: One or more pages specified were outside the range of physical memory.
     2009    11173        */
     2010    11174    4               CASE (TSS_CPU);

     2011    11175    4                 SYSCON_FPT.V.COMPONENT# = %CPU##;

  11175 10 006447   000006 236003                    LDQ     6,DU
        10 006450   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     2012    11176    4                 SYSCON_FPT.V.CPU# = CMD$ -> TS$CPU.CPU;

  11176 10 006451   000001 236100                    LDQ     1,,PR0
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:289  
        10 006452   000011 736000                    QLS     9
        10 006453   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

     2013    11177        /**/
     2014    11178    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (DISP_ERR);

  11178 10 006454   000706 630400 7                  EPPR0   SYSCON_FPT
        10 006455   470007 713400                    CLIMB   alt,+28679
        10 006456   400400 401760                    pmme    nvectors=2
        10 006457   006604 702000 10                 TSX2    DISP_ERR

     2015    11179        /**/
     2016    11180    4                 SUB_BUF_1.COUNT = 4;

  11180 10 006460   004000 236003                    LDQ     2048,DU
        10 006461   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     2017    11181    4                 SUB_BUF_1.TEXT = 'CPU';

  11181 10 006462   040000 100400                    MLR     fill='040'O
        10 006463   000303 000003 8                  ADSC9   TEXTC_VEC+9              cn=0,n=3
        10 006464   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     2018    11182    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,1),CMD$ -> TS$CPU.CPU);

  11182 10 006465   001062 470400 7                  LDP0    CMD$
        10 006466   000001 235100                    LDA     1,,PR0
        10 006467   000044 773000                    LRL     36
        10 006470   200056 757100                    STAQ    I+4,,AUTO
        10 006471   000000 301500                    BTD
        10 006472   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 006473   003746 030001 7                  NDSC9   SUB_BUF_1+1              cn=0,s=nosgn,sf=0,n=1

     2019    11183    4                 IF (RESULTS.RELEASED#) THEN CALL TSW$WRITE(COMPREL_VEC,VECTOR(
             11183                          SUB_BUF_1));

  11183 10 006474   004012 236000 7                  LDQ     RESULTS
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:290  
        10 006475   040000 316003                    CANQ    16384,DU
        10 006476   006504 600000 10                 TZE     s:11184

  11183 10 006477   000224 630400 11                 EPPR0   148
        10 006500   000020 631400 xsym               EPPR1   B_VECTNIL+16
        10 006501   000000 701000 xent               TSX1    TSW$WRITE
        10 006502   000000 011000                    NOP     0
        10 006503   006552 710000 10                 TRA     s:11199

     2020    11184    4                                   ELSE CALL TSW$WRITE(COMPNOREL_VEC,VECTOR(SUB_BUF_1)
             11184                                             );

  11184 10 006504   000272 630400 11                 EPPR0   186
        10 006505   000020 631400 xsym               EPPR1   B_VECTNIL+16
        10 006506   000000 701000 xent               TSX1    TSW$WRITE
        10 006507   000000 011000                    NOP     0
        10 006510   006552 710000 10                 TRA     s:11199

     2021    11185        /**/
     2022    11186    4               CASE (TSS_SCU);

     2023    11187    4                 SYSCON_FPT.V.COMPONENT# = %SCU##;

  11187 10 006511   000007 236003                    LDQ     7,DU
        10 006512   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     2024    11188    4                 SYSCON_FPT.V.SCU# = CMD$ -> TS$SCU.SCU;

  11188 10 006513   000001 236100                    LDQ     1,,PR0
        10 006514   000011 736000                    QLS     9
        10 006515   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

     2025    11189        /**/
     2026    11190    4                 CALL M$SYSCON (SYSCON_FPT) ALTRET (DISP_ERR);

  11190 10 006516   000706 630400 7                  EPPR0   SYSCON_FPT
        10 006517   470007 713400                    CLIMB   alt,+28679
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:291  
        10 006520   400400 401760                    pmme    nvectors=2
        10 006521   006604 702000 10                 TSX2    DISP_ERR

     2027    11191        /**/
     2028    11192    4                 SUB_BUF_1.COUNT = 4;

  11192 10 006522   004000 236003                    LDQ     2048,DU
        10 006523   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     2029    11193    4                 SUB_BUF_1.TEXT = 'SCU';

  11193 10 006524   040000 100400                    MLR     fill='040'O
        10 006525   000304 000003 8                  ADSC9   TEXTC_VEC+10             cn=0,n=3
        10 006526   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     2030    11194    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,3,1),CMD$ -> TS$SCU.SCU);

  11194 10 006527   001062 470400 7                  LDP0    CMD$
        10 006530   000001 235100                    LDA     1,,PR0
        10 006531   000044 773000                    LRL     36
        10 006532   200056 757100                    STAQ    I+4,,AUTO
        10 006533   000000 301500                    BTD
        10 006534   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 006535   003746 030001 7                  NDSC9   SUB_BUF_1+1              cn=0,s=nosgn,sf=0,n=1

     2031    11195    4                 IF (RESULTS.RELEASED#) THEN CALL TSW$WRITE(COMPREL_VEC,VECTOR(
             11195                          SUB_BUF_1));

  11195 10 006536   004012 236000 7                  LDQ     RESULTS
        10 006537   040000 316003                    CANQ    16384,DU
        10 006540   006546 600000 10                 TZE     s:11196

  11195 10 006541   000224 630400 11                 EPPR0   148
        10 006542   000020 631400 xsym               EPPR1   B_VECTNIL+16
        10 006543   000000 701000 xent               TSX1    TSW$WRITE
        10 006544   000000 011000                    NOP     0
        10 006545   006552 710000 10                 TRA     s:11199
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:292  

     2032    11196    4                                   ELSE CALL TSW$WRITE(COMPNOREL_VEC,VECTOR(SUB_BUF_1)
             11196                                             );

  11196 10 006546   000272 630400 11                 EPPR0   186
        10 006547   000020 631400 xsym               EPPR1   B_VECTNIL+16
        10 006550   000000 701000 xent               TSX1    TSW$WRITE
        10 006551   000000 011000                    NOP     0

     2033    11197
     2034    11198    4               END;

     2035    11199    3              CMD$ = PINCRW(CMD$,CMD$ -> TS$DEV.SIZE);

  11199 10 006552   001062 470400 7                  LDP0    CMD$
        10 006553   000000 220100                    LDX0    0,,PR0
        10 006554   000000 636010                    EAQ     0,X0
        10 006555   001062 036000 7                  ADLQ    CMD$
        10 006556   001062 756000 7                  STQ     CMD$

     2036    11200    3              END;

  11200 10 006557   001062 470400 7                  LDP0    CMD$
        10 006560   000000 220100                    LDX0    0,,PR0
        10 006561   004145 601000 10                 TNZ     s:10670

     2037    11201    2           RETURN;

  11201 10 006562   200040 221300                    LDX1  ! RANGE_FLAG+1,,AUTO
        10 006563   000001 702211                    TSX2  ! 1,X1

     2038    11202        /**/
     2039    11203    2   CONFIG_ERR:
     2040    11204    2           IF DCBADDR(DCBNUM(M$CONF))->F$DCB.FCD#

  11204 10 006564   000000 236007 xsym  CONFIG_ERR   LDQ     M$CONF,DL
        10 006565   000000 470400 11                 LDP0    0
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:293  
        10 006566   000000 471500                    LDP1    0,,PR0
        10 006567   100000 473506                    LDP3    0,QL,PR1
        10 006570   300031 236100                    LDQ     25,,PR3
        10 006571   020000 316007                    CANQ    8192,DL
        10 006572   006576 600000 10                 TZE     s:11206

     2041    11205    2              THEN CALL M$CLOSE(CLOSE_CONFIG);

  11205 10 006573   000130 630400 7                  EPPR0   CLOSE_CONFIG
        10 006574   050001 713400                    CLIMB   close
        10 006575   406000 401760                    pmme    nvectors=13

     2042    11206    2           CALL TSE$ERROR(%E$T_DISPCONFIGERR);

  11206 10 006576   000275 630400 11                 EPPR0   189
        10 006577   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 006600   000000 701000 xent               TSX1    TSE$ERROR
        10 006601   000000 011000                    NOP     0

     2043    11207    2           RETURN;

  11207 10 006602   200040 221300                    LDX1  ! RANGE_FLAG+1,,AUTO
        10 006603   000001 702211                    TSX2  ! 1,X1

     2044    11208        /**/
     2045    11209        /*E*    ERROR: TSS-E$T_DISPCONFIGERR-0
     2046    11210                MESSAGE0: Unable to read :CONFIG file - cannot display ALL
     2047    11211                DESCRIPTION: CANT FIND THE COMPONENTS       */
     2048    11212        /**/
     2049    11213    2   DISP_ERR:
     2050    11214    2           CALL TSE$ERROR(0);

  11214 10 006604   000034 630400 11    DISP_ERR     EPPR0   28
        10 006605   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 006606   000000 701000 xent               TSX1    TSE$ERROR
        10 006607   000000 011000                    NOP     0

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:294  
     2051    11215    2           RETURN;

  11215 10 006610   200040 221300                    LDX1  ! RANGE_FLAG+1,,AUTO
        10 006611   000001 702211                    TSX2  ! 1,X1

     2052    11216        /**/
     2053    11217    2   FIX_PART: PROC;

  11217 10 006612   200042 741300       FIX_PART     STX1  ! RANGE_FLAG+3,,AUTO

     2054    11218        /**/
     2055    11219    3         PART.T='No';

  11219 10 006613   040000 100400                    MLR     fill='040'O
        10 006614   000306 000002 8                  ADSC9   TEXTC_VEC+12             cn=0,n=2
        10 006615   003775 200004 7                  ADSC9   PART                     cn=1,n=4

     2056    11220    3         IF RESULTS.PART# THEN PART.T='Yes';

  11220 10 006616   004012 234000 7                  SZN     RESULTS
        10 006617   006623 605000 10                 TPL     s:11221

  11220 10 006620   040000 100400                    MLR     fill='040'O
        10 006621   000305 000003 8                  ADSC9   TEXTC_VEC+11             cn=0,n=3
        10 006622   003775 200004 7                  ADSC9   PART                     cn=1,n=4

     2057    11221    3         IF RESULTS.SYSCONPART# AND TS_DPS90 THEN PART.T='CP-6';

  11221 10 006623   004012 236000 7                  LDQ     RESULTS
        10 006624   004000 316003                    CANQ    2048,DU
        10 006625   006633 600000 10                 TZE     s:11222
        10 006626   001076 234000 7                  SZN     TS_DPS90
        10 006627   006633 605000 10                 TPL     s:11222

  11221 10 006630   040000 100400                    MLR     fill='040'O
        10 006631   000322 000004 8                  ADSC9   TEXTC_VEC+24             cn=0,n=4
        10 006632   003775 200004 7                  ADSC9   PART                     cn=1,n=4
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:295  

     2058    11222    3         IF RESULTS.MSOSPART# AND TS_DPS90 THEN PART.T='MSOS';

  11222 10 006633   002000 316003                    CANQ    1024,DU
        10 006634   006642 600000 10                 TZE     s:11223
        10 006635   001076 234000 7                  SZN     TS_DPS90
        10 006636   006642 605000 10                 TPL     s:11223

  11222 10 006637   040000 100400                    MLR     fill='040'O
        10 006640   000323 000004 8                  ADSC9   TEXTC_VEC+25             cn=0,n=4
        10 006641   003775 200004 7                  ADSC9   PART                     cn=1,n=4

     2059    11223    3         IF RESULTS.SYSCONPART# AND RESULTS.MSOSPART# AND TS_DPS90 THEN PART.T='Both';

  11223 10 006642   004000 316003                    CANQ    2048,DU
        10 006643   006653 600000 10                 TZE     s:11225
        10 006644   002000 316003                    CANQ    1024,DU
        10 006645   006653 600000 10                 TZE     s:11225
        10 006646   001076 234000 7                  SZN     TS_DPS90
        10 006647   006653 605000 10                 TPL     s:11225

  11223 10 006650   040000 100400                    MLR     fill='040'O
        10 006651   000324 000004 8                  ADSC9   TEXTC_VEC+26             cn=0,n=4
        10 006652   003775 200004 7                  ADSC9   PART                     cn=1,n=4

     2060    11224        /**/
     2061    11225    3   END FIX_PART;

  11225 10 006653   000001 702211                    TSX2  ! 1,X1

     2062    11226        /**/
     2063    11227    2   END EXEC_DISP;
     2064    11228        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:296  
     2065    11229    1   FIND_CHANNEL: PROC(DEVNAME,NUM,CHANS) ALTRET;

  11229 10 006654   200042 741300       FIND_CHANNEL STX1  ! RANGE_FLAG+3,,AUTO

     2066    11230        /**/
     2067    11231    2   DCL DEVNAME CHAR(8);
     2068    11232    2   DCL NUM UBIN WORD;
     2069    11233    2   DCL CHANS(0:15) UBIN WORD; /* 2 CM CHANS WITH 8 CHANS EACH */
     2070    11234        /**/
     2071    11235    2   DCL TEMP1 CHAR(8);
     2072    11236    2   DCL TEMP2 CHAR(8);
     2073    11237    2   DCL I UBIN;
     2074    11238        /**/
     2075    11239    2        NUM = 0;

  11239 10 006655   200044 470500                    LDP0    @NUM,,AUTO
        10 006656   000000 450100                    STZ     0,,PR0

     2076    11240    2        CHANS = '0'B;

  11240 10 006657   200045 471500                    LDP1    @CHANS,,AUTO
        10 006660   000100 100400                    MLR     fill='000'O
        10 006661   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
        10 006662   100000 000100                    ADSC9   0,,PR1                   cn=0,n=64

     2077    11241    2        IF (SUBSTR(DEVNAME,0,2) = 'UC') OR

  11241 10 006663   200043 473500                    LDP3    @DEVNAME,,AUTO
        10 006664   040000 106500                    CMPC    fill='040'O
        10 006665   300000 000002                    ADSC9   0,,PR3                   cn=0,n=2
        10 006666   000325 000002 8                  ADSC9   TEXTC_VEC+27             cn=0,n=2
        10 006667   006714 600000 10                 TZE     s:11247
        10 006670   040000 106500                    CMPC    fill='040'O
        10 006671   300000 000002                    ADSC9   0,,PR3                   cn=0,n=2
        10 006672   000326 000002 8                  ADSC9   TEXTC_VEC+28             cn=0,n=2
        10 006673   006714 600000 10                 TZE     s:11247
        10 006674   040000 106500                    CMPC    fill='040'O
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:297  
        10 006675   300000 000002                    ADSC9   0,,PR3                   cn=0,n=2
        10 006676   000327 000002 8                  ADSC9   TEXTC_VEC+29             cn=0,n=2
        10 006677   006714 600000 10                 TZE     s:11247
        10 006700   040000 106500                    CMPC    fill='040'O
        10 006701   300000 000002                    ADSC9   0,,PR3                   cn=0,n=2
        10 006702   000304 000002 8                  ADSC9   TEXTC_VEC+10             cn=0,n=2
        10 006703   006714 600000 10                 TZE     s:11247
        10 006704   040000 106500                    CMPC    fill='040'O
        10 006705   300000 000002                    ADSC9   0,,PR3                   cn=0,n=2
        10 006706   000330 000002 8                  ADSC9   TEXTC_VEC+30             cn=0,n=2
        10 006707   006714 600000 10                 TZE     s:11247
        10 006710   040000 106500                    CMPC    fill='040'O
        10 006711   300000 000003                    ADSC9   0,,PR3                   cn=0,n=3
        10 006712   000300 000003 8                  ADSC9   TEXTC_VEC+6              cn=0,n=3
        10 006713   006723 601000 10                 TNZ     s:11251

     2078    11242    2           (SUBSTR(DEVNAME,0,2) = 'TC') OR
     2079    11243    2           (SUBSTR(DEVNAME,0,2) = 'DC') OR
     2080    11244    2           (SUBSTR(DEVNAME,0,2) = 'SC') OR
     2081    11245    2           (SUBSTR(DEVNAME,0,2) = 'AC') OR
     2082    11246    3           (SUBSTR(DEVNAME,0,3) = 'FEP') THEN DO;

     2083    11247    3           TEMP1 = DEVNAME;

  11247 10 006714   040100 100500                    MLR     fill='040'O
        10 006715   300000 000010                    ADSC9   0,,PR3                   cn=0,n=8
        10 006716   200046 000010                    ADSC9   TEMP1,,AUTO              cn=0,n=8

     2084    11248    3           TEMP2 = ' ';

  11248 10 006717   000035 235000 xsym               LDA     B_VECTNIL+29
        10 006720   000035 236000 xsym               LDQ     B_VECTNIL+29
        10 006721   200050 757100                    STAQ    TEMP2,,AUTO

     2085    11249    3           END;  /* IF IOM CONNECTED DEVICE */

  11249 10 006722   007010 710000 10                 TRA     s:11271
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:298  

     2086    11250    3        ELSE DO;

     2087    11251    3           CONFIG_KEY.COUNT = 8;

  11251 10 006723   010000 236003                    LDQ     4096,DU
        10 006724   003742 552040 7                  STBQ    CONFIG_KEY,'40'O

     2088    11252    3           CONFIG_KEY.TEXT = DEVNAME;

  11252 10 006725   040000 100500                    MLR     fill='040'O
        10 006726   300000 000010                    ADSC9   0,,PR3                   cn=0,n=8
        10 006727   003742 200010 7                  ADSC9   CONFIG_KEY               cn=1,n=8

     2089    11253    3           CALL M$READ(READ_CONFIG) ALTRET(BAG_IT);

  11253 10 006730   000224 630400 7                  EPPR0   READ_CONFIG
        10 006731   440000 713400                    CLIMB   alt,read
        10 006732   401400 401760                    pmme    nvectors=4
        10 006733   007051 702000 10                 TSX2    BAG_IT

     2090    11254    3           DEVREC = READ_CONFIG.BUF_.BUF$->TD$DEV;

  11254 10 006734   000231 470400 7                  LDP0    READ_CONFIG+5
        10 006735   000000 100500                    MLR     fill='000'O
        10 006736   000000 000054                    ADSC9   0,,PR0                   cn=0,n=44
        10 006737   001551 000054 7                  ADSC9   DEVREC                   cn=0,n=44

     2091    11255    3           IF (SUBSTR(DEVNAME,0,2) = 'MT') OR

  11255 10 006740   200043 471500                    LDP1    @DEVNAME,,AUTO
        10 006741   040000 106500                    CMPC    fill='040'O
        10 006742   100000 000002                    ADSC9   0,,PR1                   cn=0,n=2
        10 006743   000331 000002 8                  ADSC9   TEXTC_VEC+31             cn=0,n=2
        10 006744   006751 600000 10                 TZE     s:11257
        10 006745   040000 106500                    CMPC    fill='040'O
        10 006746   100000 000002                    ADSC9   0,,PR1                   cn=0,n=2
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:299  
        10 006747   000307 000002 8                  ADSC9   TEXTC_VEC+13             cn=0,n=2
        10 006750   006767 601000 10                 TNZ     s:11263

     2092    11256    4              (SUBSTR(DEVNAME,0,2) = 'DP') THEN DO;

     2093    11257    4              TEMP1 = DEVREC.MPCNAME(0);

  11257 10 006751   040100 100400                    MLR     fill='040'O
        10 006752   001555 000010 7                  ADSC9   DEVREC+4                 cn=0,n=8
        10 006753   200046 000010                    ADSC9   TEMP1,,AUTO              cn=0,n=8

     2094    11258    4              IF SUBSTR(DEVREC.MPCNAME(0),0,2) = SUBSTR(DEVREC.MPCNAME(1),0,2)

  11258 10 006754   001555 220000 7                  LDX0    DEVREC+4
        10 006755   001557 100000 7                  CMPX0   DEVREC+6
        10 006756   006763 601000 10                 TNZ     s:11260

     2095    11259    4                 THEN TEMP2 = DEVREC.MPCNAME(1);

  11259 10 006757   040100 100400                    MLR     fill='040'O
        10 006760   001557 000010 7                  ADSC9   DEVREC+6                 cn=0,n=8
        10 006761   200050 000010                    ADSC9   TEMP2,,AUTO              cn=0,n=8
        10 006762   007010 710000 10                 TRA     s:11271

     2096    11260    4                 ELSE TEMP2 = ' ';

  11260 10 006763   000035 235000 xsym               LDA     B_VECTNIL+29
        10 006764   000035 236000 xsym               LDQ     B_VECTNIL+29
        10 006765   200050 757100                    STAQ    TEMP2,,AUTO

     2097    11261    4              END;  /* IF MT OR DP */

  11261 10 006766   007010 710000 10                 TRA     s:11271

     2098    11262    4           ELSE DO;  /* UNIT RECORD, AP, OR OD */

     2099    11263    5              IF DEVREC.IOCHAN.IOM = IOM# THEN DO;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:300  

  11263 10 006767   001561 236000 7                  LDQ     DEVREC+8
        10 006770   000022 772000                    QRL     18
        10 006771   000777 376007                    ANQ     511,DL
        10 006772   200010 116100                    CMPQ    IOM#,,AUTO
        10 006773   007006 601000 10                 TNZ     s:11268

     2100    11264    5                 CHANS(0) = DEVREC.IOCHAN.CHAN;

  11264 10 006774   200045 473500                    LDP3    @CHANS,,AUTO
        10 006775   001561 236000 7                  LDQ     DEVREC+8
        10 006776   000011 772000                    QRL     9
        10 006777   000777 376007                    ANQ     511,DL
        10 007000   300000 756100                    STQ     0,,PR3

     2101    11265    5                 NUM = 1;

  11265 10 007001   000001 235007                    LDA     1,DL
        10 007002   200044 470500                    LDP0    @NUM,,AUTO
        10 007003   000000 755100                    STA     0,,PR0

     2102    11266    5                 RETURN;

  11266 10 007004   200042 221300                    LDX1  ! RANGE_FLAG+3,,AUTO
        10 007005   000001 702211                    TSX2  ! 1,X1

     2103    11267    5                 END;  /* IF IOM = IOM# */
     2104    11268    4              ELSE ALTRETURN;

  11268 10 007006   200042 221300                    LDX1  ! RANGE_FLAG+3,,AUTO
        10 007007   000000 702211                    TSX2  ! 0,X1

     2105    11269    4              END;  /* ELSE UNIT RECORD */
     2106    11270    3           END;  /* ELSE PERIPHERAL DEVICE */
     2107    11271    3        DO I = 0 TO %N_MAXCHANS-1;  /* CHECK ALL CHANNELS OF CURRENT IOM */

  11271 10 007010   200052 450100                    STZ     I,,AUTO
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:301  
        10 007011   007037 710000 10                 TRA     s:11276+3

     2108    11272    4           IF IOMREC.DEVNAME(I) = TEMP1 OR IOMREC.DEVNAME(I) = TEMP2 THEN DO;

  11272 10 007012   200052 235100                    LDA     I,,AUTO
        10 007013   000001 735000                    ALS     1
        10 007014   001140 237005 7                  LDAQ    IOMREC,AL
        10 007015   200046 117100                    CMPAQ   TEMP1,,AUTO
        10 007016   007024 600000 10                 TZE     s:11273
        10 007017   200052 235100                    LDA     I,,AUTO
        10 007020   000001 735000                    ALS     1
        10 007021   001140 237005 7                  LDAQ    IOMREC,AL
        10 007022   200050 117100                    CMPAQ   TEMP2,,AUTO
        10 007023   007034 601000 10                 TNZ     s:11276

     2109    11273    4              CHANS(NUM) = I;

  11273 10 007024   200044 470500                    LDP0    @NUM,,AUTO
        10 007025   000000 720100                    LXL0    0,,PR0
        10 007026   200045 471500                    LDP1    @CHANS,,AUTO
        10 007027   200052 235100                    LDA     I,,AUTO
        10 007030   100000 755110                    STA     0,X0,PR1

     2110    11274    4              NUM = NUM + 1;

  11274 10 007031   000000 235100                    LDA     0,,PR0
        10 007032   000001 035007                    ADLA    1,DL
        10 007033   000000 755100                    STA     0,,PR0

     2111    11275    4              END;  /* IF */

     2112    11276    3           END;  /* DO I */

  11276 10 007034   200052 235100                    LDA     I,,AUTO
        10 007035   000001 035007                    ADLA    1,DL
        10 007036   200052 755100                    STA     I,,AUTO
        10 007037   200052 235100                    LDA     I,,AUTO
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:302  
        10 007040   000200 115007                    CMPA    128,DL
        10 007041   007012 602000 10                 TNC     s:11272

     2113    11277    2        IF NUM = 0

  11277 10 007042   200044 470500                    LDP0    @NUM,,AUTO
        10 007043   000000 235100                    LDA     0,,PR0
        10 007044   007047 601000 10                 TNZ     s:11279

     2114    11278    2           THEN ALTRETURN;

  11278 10 007045   200042 221300                    LDX1  ! RANGE_FLAG+3,,AUTO
        10 007046   000000 702211                    TSX2  ! 0,X1

     2115    11279    2           ELSE RETURN;

  11279 10 007047   200042 221300                    LDX1  ! RANGE_FLAG+3,,AUTO
        10 007050   000001 702211                    TSX2  ! 1,X1

     2116    11280    2   BAG_IT:
     2117    11281    2        ALTRETURN;

  11281 10 007051   200042 221300       BAG_IT       LDX1  ! RANGE_FLAG+3,,AUTO
        10 007052   000000 702211                    TSX2  ! 0,X1

     2118    11282    2   END FIND_CHANNEL;
     2119    11283        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:303  
     2120    11284    1   MY_BINCHAR: PROC(NUM,CHAN,LEN);

  11284 10 007053   200042 741300       MY_BINCHAR   STX1  ! RANGE_FLAG+3,,AUTO

     2121    11285        /**/
     2122    11286    2   DCL NUM UBIN WORD;
     2123    11287    2   DCL CHAN CHAR(2);
     2124    11288    2   DCL LEN UBIN;
     2125    11289        /**/
     2126    11290        /* LOCAL VARS */
     2127    11291    2   DCL CHAR1 CHAR(1);
     2128    11292    2   DCL CHAR2 CHAR(2);
     2129    11293        /**/
     2130    11294    2        IF NUM < 10

  11294 10 007054   200043 470500                    LDP0    @NUM,,AUTO
        10 007055   000000 235100                    LDA     0,,PR0
        10 007056   000012 115007                    CMPA    10,DL
        10 007057   007075 603000 10                 TRC     s:11303

     2131    11295    2           THEN
     2132    11296    3           DO;

     2133    11297    3              CALL BINCHAR(CHAR1,NUM);

  11297 10 007060   000044 773000                    LRL     36
        10 007061   200056 757100                    STAQ    I+4,,AUTO
        10 007062   000100 301500                    BTD
        10 007063   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 007064   200046 030001                    NDSC9   CHAR1,,AUTO              cn=0,s=nosgn,sf=0,n=1

     2134    11298    3              CHAN = CHAR1;

  11298 10 007065   200044 471500                    LDP1    @CHAN,,AUTO
        10 007066   040100 100500                    MLR     fill='040'O
        10 007067   200046 000001                    ADSC9   CHAR1,,AUTO              cn=0,n=1
        10 007070   100000 000002                    ADSC9   0,,PR1                   cn=0,n=2
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:304  

     2135    11299    3              LEN = 1;

  11299 10 007071   000001 235007                    LDA     1,DL
        10 007072   200045 473500                    LDP3    @LEN,,AUTO
        10 007073   300000 755100                    STA     0,,PR3

     2136    11300    3           END;

  11300 10 007074   007111 710000 10                 TRA     s:11307

     2137    11301    2           ELSE
     2138    11302    3           DO;

     2139    11303    3              CALL BINCHAR(CHAR2,NUM);

  11303 10 007075   000044 773000                    LRL     36
        10 007076   200056 757100                    STAQ    I+4,,AUTO
        10 007077   000100 301500                    BTD
        10 007100   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 007101   200047 030002                    NDSC9   CHAR2,,AUTO              cn=0,s=nosgn,sf=0,n=2

     2140    11304    3              CHAN = CHAR2;

  11304 10 007102   200044 471500                    LDP1    @CHAN,,AUTO
        10 007103   040100 100500                    MLR     fill='040'O
        10 007104   200047 000002                    ADSC9   CHAR2,,AUTO              cn=0,n=2
        10 007105   100000 000002                    ADSC9   0,,PR1                   cn=0,n=2

     2141    11305    3              LEN = 2;

  11305 10 007106   000002 235007                    LDA     2,DL
        10 007107   200045 473500                    LDP3    @LEN,,AUTO
        10 007110   300000 755100                    STA     0,,PR3

     2142    11306    3           END;

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:305  
     2143    11307    2        RETURN;

  11307 10 007111   200042 221300                    LDX1  ! RANGE_FLAG+3,,AUTO
        10 007112   000001 702211                    TSX2  ! 1,X1

     2144    11308    2   END MY_BINCHAR;
     2145    11309        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:306  
     2146    11310        /**/
     2147    11311    1   EXEC_THRESH: PROC;

  11311 10 007113   200040 741300       EXEC_THRESH  STX1  ! RANGE_FLAG+1,,AUTO

     2148    11312        /**/
     2149    11313    2         TS_PRINT_THRESH_HEADING = '1'B;

  11313 10 007114   400000 236003                    LDQ     -131072,DU
        10 007115   001075 756000 7                  STQ     TS_PRINT_THRESH_HEADING

     2150    11314        /**/
     2151    11315    2        CMD$ = PINCRW(CMD$,SIZEW(TS$CMDWD));

  11315 10 007116   001062 236000 7                  LDQ     CMD$
        10 007117   000001 036003                    ADLQ    1,DU
        10 007120   001062 756000 7                  STQ     CMD$

     2152    11316    2        I = 1;

  11316 10 007121   000001 235007                    LDA     1,DL
        10 007122   001067 755000 7                  STA     I

     2153    11317    3        DO WHILE(CMD$->TS$CMDWD ~= 0);

  11317 10 007123   001062 470400 7                  LDP0    CMD$
        10 007124   000000 235100                    LDA     0,,PR0
        10 007125   007232 600000 10                 TZE     s:11343

     2154    11318    3           BLK$ = P_PCB.OUT$->O$BLK.SUBLK$(I);

  11318 10 007126   004023 470400 7                  LDP0    P_PCB+3
        10 007127   001067 720000 7                  LXL0    I
        10 007130   000003 236110                    LDQ     3,X0,PR0
        10 007131   001061 756000 7                  STQ     BLK$

     2155    11319    4           IF BLK$->O$BLK.NSUBLKS = 1 THEN DO;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:307  

  11319 10 007132   001061 471400 7                  LDP1    BLK$
        10 007133   100001 221100                    LDX1    1,,PR1
        10 007134   000001 101003                    CMPX1   1,DU
        10 007135   007141 601000 10                 TNZ     s:11323

     2156    11320    4              CALL EXEC_DISP_THRESH;

  11320 10 007136   007246 701000 10                 TSX1    EXEC_DISP_THRESH
        10 007137   000000 011000                    NOP     0

     2157    11321    4              GOTO N;

  11321 10 007140   007222 710000 10                 TRA     N

     2158    11322    4              END;
     2159    11323    3           CALL CHARBIN(EL$THRESHSET.THRESH,BLK$->O$BLK.SUBLK$(1)->O$SYM.TEXT);

  11323 10 007141   100004 473500                    LDP3    4,,PR1
        10 007142   300004 236100                    LDQ     4,,PR3
        10 007143   000033 772000                    QRL     27
        10 007144   000000 622006                    EAX2    0,QL
        10 007145   000100 305540                    DTB
        10 007146   300004 230012                    NDSC9   4,,PR3                   cn=1,s=nosgn,sf=0,n=*X2
        10 007147   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 007150   200057 235100                    LDA     I+5,,AUTO
        10 007151   003636 755000 7                  STA     EL$THRESHSET+3

     2160    11324    3           EL$THRESHSET.CODE = CMD$->TS$DEV.CODE;

  11324 10 007152   001062 473400 7                  LDP3    CMD$
        10 007153   300000 236100                    LDQ     0,,PR3
        10 007154   777777 376007                    ANQ     -1,DL
        10 007155   003633 756000 7                  STQ     EL$THRESHSET

     2161    11325    4           DO CASE(CMD$->TS$DEV.CODE);

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:308  
  11325 10 007156   300000 721100                    LXL1    0,,PR3
        10 007157   000007 101003                    CMPX1   7,DU
        10 007160   007162 602011 10                 TNC     s:11325+4,X1
        10 007161   007215 710000 10                 TRA     s:11339
        10 007162   007215 710000 10                 TRA     s:11339
        10 007163   007207 710000 10                 TRA     s:11335
        10 007164   007174 710000 10                 TRA     s:11329
        10 007165   007215 710000 10                 TRA     s:11339
        10 007166   007200 710000 10                 TRA     s:11331
        10 007167   007215 710000 10                 TRA     s:11339
        10 007170   007171 710000 10                 TRA     s:11327

     2162    11326    4              CASE(TSS_IOM);

     2163    11327    4                 EL$THRESHSET.IOM.IOM# = CMD$->TS$IOM.IOM;

  11327 10 007171   300001 235100                    LDA     1,,PR3
        10 007172   003634 755000 7                  STA     EL$THRESHSET+1
        10 007173   007215 710000 10                 TRA     s:11339

     2164    11328    4              CASE(TSS_MPC);

     2165    11329    4                 EL$THRESHSET.DEVNAME = CMD$->TS$MPC.MPCNAME;

  11329 10 007174   040000 100500                    MLR     fill='040'O
        10 007175   300001 000010                    ADSC9   1,,PR3                   cn=0,n=8
        10 007176   003634 000010 7                  ADSC9   EL$THRESHSET+1           cn=0,n=8
        10 007177   007215 710000 10                 TRA     s:11339

     2166    11330    4              CASE(TSS_CHAN);

     2167    11331    4                 EL$THRESHSET.IOM.IOM# = CMD$->TS$CHAN.IOM;

  11331 10 007200   300001 235100                    LDA     1,,PR3
        10 007201   003634 755000 7                  STA     EL$THRESHSET+1

     2168    11332    4                 EL$THRESHSET.IOM.LOCHAN = CMD$->TS$CHAN.LOCHAN;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:309  

  11332 10 007202   300002 721100                    LXL1    2,,PR3
        10 007203   003635 741000 7                  STX1    EL$THRESHSET+2

     2169    11333    4                 EL$THRESHSET.IOM.HICHAN = CMD$->TS$CHAN.HICHAN;

  11333 10 007204   300003 722100                    LXL2    3,,PR3
        10 007205   003635 442000 7                  SXL2    EL$THRESHSET+2
        10 007206   007215 710000 10                 TRA     s:11339

     2170    11334    4              CASE(TSS_DEV);

     2171    11335    4                 IF SUBSTR(CMD$->TS$DEV.DEVNAME,0,2) = 'OD' THEN

  11335 10 007207   300001 222100                    LDX2    1,,PR3
        10 007210   000332 102000 8                  CMPX2   TEXTC_VEC+32
        10 007211   007240 600000 10                 TZE     THRESH_ERR

     2172    11336    4                    GOTO THRESH_ERR;
     2173    11337    4                 EL$THRESHSET.DEVNAME = CMD$->TS$DEV.DEVNAME;

  11337 10 007212   040000 100500                    MLR     fill='040'O
        10 007213   300001 000010                    ADSC9   1,,PR3                   cn=0,n=8
        10 007214   003634 000010 7                  ADSC9   EL$THRESHSET+1           cn=0,n=8

     2174    11338    4              END;  /* DO CASE */

     2175    11339    3           CALL M$WRSYSLOG(TELL_ELF) ALTRET(BAG_IT);

  11339 10 007215   000624 630400 7                  EPPR0   TELL_ELF
        10 007216   470001 713400                    CLIMB   alt,+28673
        10 007217   400400 401760                    pmme    nvectors=2
        10 007220   007234 702000 10                 TSX2    BAG_IT

     2176    11340    3           I = I + 1;

  11340 10 007221   001067 054000 7                  AOS     I
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:310  

     2177    11341    3   N:      CMD$ = PINCRW(CMD$,CMD$->TS$DEV.SIZE);

  11341 10 007222   001062 470400 7     N            LDP0    CMD$
        10 007223   000000 220100                    LDX0    0,,PR0
        10 007224   000000 636010                    EAQ     0,X0
        10 007225   001062 036000 7                  ADLQ    CMD$
        10 007226   001062 756000 7                  STQ     CMD$

     2178    11342    3        END;                               /* DO WHILE                           */

  11342 10 007227   001062 470400 7                  LDP0    CMD$
        10 007230   000000 235100                    LDA     0,,PR0
        10 007231   007126 601000 10                 TNZ     s:11318

     2179    11343    2        RETURN;

  11343 10 007232   200040 221300                    LDX1  ! RANGE_FLAG+1,,AUTO
        10 007233   000001 702211                    TSX2  ! 1,X1

     2180    11344    2   BAG_IT:
     2181    11345    2        CALL TSE$ERROR(0);

  11345 10 007234   000034 630400 11    BAG_IT       EPPR0   28
        10 007235   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 007236   000000 701000 xent               TSX1    TSE$ERROR
        10 007237   000000 011000                    NOP     0

     2182    11346    2   THRESH_ERR:
     2183    11347    2        CALL TSE$ERROR(%E$T_BADELFDATA);

  11347 10 007240   000277 630400 11    THRESH_ERR   EPPR0   191
        10 007241   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 007242   000000 701000 xent               TSX1    TSE$ERROR
        10 007243   000000 011000                    NOP     0

     2184    11348    2        RETURN;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:311  

  11348 10 007244   200040 221300                    LDX1  ! RANGE_FLAG+1,,AUTO
        10 007245   000001 702211                    TSX2  ! 1,X1

     2185    11349        /*E* ERROR: TSS-E$T_BADELFDATA-0
     2186    11350             MESSAGE: Unable to execute THRESH command.
     2187    11351             DESCRIPTION: Cant write the errlog msg - so quit.  */
     2188    11352        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:312  
     2189    11353        /**/
     2190    11354    2   EXEC_DISP_THRESH: PROC;

  11354 10 007246   200042 741300       EXEC_DISP_T* STX1  ! RANGE_FLAG+3,,AUTO

     2191    11355        /**/
     2192    11356    4         DO CASE (CMD$->TS$DEV.CODE);

  11356 10 007247   001062 470400 7                  LDP0    CMD$
        10 007250   000000 720100                    LXL0    0,,PR0
        10 007251   000007 100003                    CMPX0   7,DU
        10 007252   007254 602010 10                 TNC     s:11356+5,X0
        10 007253   007570 710000 10                 TRA     s:11406
        10 007254   007570 710000 10                 TRA     s:11406
        10 007255   007470 710000 10                 TRA     s:11385
        10 007256   007320 710000 10                 TRA     s:11361
        10 007257   007570 710000 10                 TRA     s:11406
        10 007260   007410 710000 10                 TRA     s:11377
        10 007261   007570 710000 10                 TRA     s:11406
        10 007262   007263 710000 10                 TRA     s:11358

     2193    11357    4            CASE (TSS_IOM);

     2194    11358    4               I$ = IOM$(CMD$->TS$IOM.IOM);

  11358 10 007263   000001 722100                    LXL2    1,,PR0
        10 007264   000000 471400 xsym               LDP1    B$DS3$
        10 007265   100000 236112                    LDQ     0,X2,PR1
        10 007266   001627 756000 7                  STQ     I$

     2195    11359    4              IF I$~=ADDR(NIL) THEN CALL TSW$WRITE (IOMTHRESH_VEC, VECTOR(CMD$->TS$IOM
             11359                        .IOM),VECTOR(IOM.THRESH_RATE));

  11359 10 007267   000001 116000 xsym               CMPQ    B_VECTNIL+1
        10 007270   007570 600000 10                 TZE     s:11406

  11359 10 007271   777640 235007                    LDA     -96,DL
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:313  
        10 007272   001062 236000 7                  LDQ     CMD$
        10 007273   000001 036003                    ADLQ    1,DU
        10 007274   200056 757100                    STAQ    I+4,,AUTO
        10 007275   777640 235007                    LDA     -96,DL
        10 007276   001627 236000 7                  LDQ     I$
        10 007277   000002 036003                    ADLQ    2,DU
        10 007300   200062 757100                    STAQ    I+8,,AUTO
        10 007301   200056 237100                    LDAQ    I+4,,AUTO
        10 007302   200060 757100                    STAQ    I+6,,AUTO
        10 007303   200062 237100                    LDAQ    I+8,,AUTO
        10 007304   200064 757100                    STAQ    I+10,,AUTO
        10 007305   200064 633500                    EPPR3   I+10,,AUTO
        10 007306   200070 453500                    STP3    I+14,,AUTO
        10 007307   200060 634500                    EPPR4   I+6,,AUTO
        10 007310   200067 454500                    STP4    I+13,,AUTO
        10 007311   000300 236000 11                 LDQ     192
        10 007312   200066 756100                    STQ     I+12,,AUTO
        10 007313   200066 630500                    EPPR0   I+12,,AUTO
        10 007314   000021 631400 xsym               EPPR1   B_VECTNIL+17
        10 007315   000000 701000 xent               TSX1    TSW$WRITE
        10 007316   000000 011000                    NOP     0
        10 007317   007570 710000 10                 TRA     s:11406

     2196    11360    4             CASE(TSS_MPC);

     2197    11361    5               DO J = 0 TO 7;               /* ALL IOMS                           */

  11361 10 007320   001070 450000 7                  STZ     J

     2198    11362    5                  IF IOM$(J) ~= ADDR(NIL)

  11362 10 007321   000000 470400 xsym               LDP0    B$DS3$
        10 007322   001070 720000 7                  LXL0    J
        10 007323   000000 236110                    LDQ     0,X0,PR0
        10 007324   000001 116000 xsym               CMPQ    B_VECTNIL+1
        10 007325   007403 600000 10                 TZE     s:11375

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:314  
     2199    11363    5                  THEN
     2200    11364    6                  DO K = 0 TO %N_MAXCHANS-1;   /* CHECK ALL CHANNELS                */

  11364 10 007326   001071 450000 7                  STZ     K
        10 007327   007400 710000 10                 TRA     s:11374+1

     2201    11365    6                     MPC$ = IOM$(J)->IOM.CHAN$->CHAN.MPC$(K);

  11365 10 007330   000000 470400 xsym               LDP0    B$DS3$
        10 007331   001070 720000 7                  LXL0    J
        10 007332   000000 471510                    LDP1    0,X0,PR0
        10 007333   100003 473500                    LDP3    3,,PR1
        10 007334   001071 236000 7                  LDQ     K
        10 007335   000005 402007                    MPY     5,DL
        10 007336   300004 236106                    LDQ     4,QL,PR3
        10 007337   001631 756000 7                  STQ     MPC$

     2202    11366    6                     IF MPC$ ~= ADDR(NIL)

  11366 10 007340   000001 116000 xsym               CMPQ    B_VECTNIL+1
        10 007341   007377 600000 10                 TZE     s:11374

     2203    11367    6                     THEN                   /* CHECK THIS MPC REC                 */
     2204    11368    7                     DO;

     2205    11369    8                        IF MPC1.DEVNM = CMD$->TS$MPC.MPCNAME THEN DO;

  11369 10 007342   001631 474400 7                  LDP4    MPC$
        10 007343   001062 475400 7                  LDP5    CMD$
        10 007344   040100 106500                    CMPC    fill='040'O
        10 007345   400003 000010                    ADSC9   3,,PR4                   cn=0,n=8
        10 007346   500001 000010                    ADSC9   1,,PR5                   cn=0,n=8
        10 007347   007377 601000 10                 TNZ     s:11374

     2206    11370    8                          CALL TSW$WRITE (DEVTHRESH_VEC,VECTOR(MPC1.DEVNM),VECTOR(MPC1
             11370                                    .THRESH_RATE));

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:315  
  11370 10 007350   000301 235000 11                 LDA     193
        10 007351   000003 036003                    ADLQ    3,DU
        10 007352   200056 757100                    STAQ    I+4,,AUTO
        10 007353   777640 235007                    LDA     -96,DL
        10 007354   001631 236000 7                  LDQ     MPC$
        10 007355   000002 036003                    ADLQ    2,DU
        10 007356   200062 757100                    STAQ    I+8,,AUTO
        10 007357   200056 237100                    LDAQ    I+4,,AUTO
        10 007360   200060 757100                    STAQ    I+6,,AUTO
        10 007361   200062 237100                    LDAQ    I+8,,AUTO
        10 007362   200064 757100                    STAQ    I+10,,AUTO
        10 007363   200064 631500                    EPPR1   I+10,,AUTO
        10 007364   200070 451500                    STP1    I+14,,AUTO
        10 007365   200060 633500                    EPPR3   I+6,,AUTO
        10 007366   200067 453500                    STP3    I+13,,AUTO
        10 007367   000302 236000 11                 LDQ     194
        10 007370   200066 756100                    STQ     I+12,,AUTO
        10 007371   200066 630500                    EPPR0   I+12,,AUTO
        10 007372   000021 631400 xsym               EPPR1   B_VECTNIL+17
        10 007373   000000 701000 xent               TSX1    TSW$WRITE
        10 007374   000000 011000                    NOP     0

     2207    11371    8                           RETURN;

  11371 10 007375   200042 221300                    LDX1  ! RANGE_FLAG+3,,AUTO
        10 007376   000001 702211                    TSX2  ! 1,X1

     2208    11372    8                           END;
     2209    11373    7                        END;                /* IF MPC$ ~= ADDR(NIL)               */
     2210    11374    6                     END;              /* DO K = 0 TO %N_MAXCHANS-1                 */

  11374 10 007377   001071 054000 7                  AOS     K
        10 007400   001071 235000 7                  LDA     K
        10 007401   000177 115007                    CMPA    127,DL
        10 007402   007330 604400 10                 TMOZ    s:11365

     2211    11375    5                  END;                      /* DO J = 0 TO 7                      */
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:316  

  11375 10 007403   001070 054000 7                  AOS     J
        10 007404   001070 235000 7                  LDA     J
        10 007405   000007 115007                    CMPA    7,DL
        10 007406   007321 604400 10                 TMOZ    s:11362
        10 007407   007570 710000 10                 TRA     s:11406

     2212    11376    4             CASE(TSS_CHAN);

     2213    11377    4               I$ = IOM$(CMD$->TS$CHAN.IOM);

  11377 10 007410   000001 722100                    LXL2    1,,PR0
        10 007411   000000 471400 xsym               LDP1    B$DS3$
        10 007412   100000 236112                    LDQ     0,X2,PR1
        10 007413   001627 756000 7                  STQ     I$

     2214    11378    4               IF I$=ADDR(NIL) THEN RETURN;

  11378 10 007414   000001 116000 xsym               CMPQ    B_VECTNIL+1
        10 007415   007417 601000 10                 TNZ     s:11379

  11378 10 007416   000001 702211                    TSX2  ! 1,X1

     2215    11379    4               CHAN$ = IOM.CHAN$;

  11379 10 007417   001627 473400 7                  LDP3    I$
        10 007420   300003 236100                    LDQ     3,,PR3
        10 007421   001630 756000 7                  STQ     CHAN$

     2216    11380    5               DO J = CMD$->TS$CHAN.LOCHAN TO CMD$->TS$CHAN.HICHAN;

  11380 10 007422   000002 235100                    LDA     2,,PR0
        10 007423   001070 755000 7                  STA     J
        10 007424   007462 710000 10                 TRA     s:11383+1

     2217    11381    5                  CALL TSW$WRITE (CHANTHRESH_VEC,VECTOR(CMD$->TS$CHAN.IOM),VECTOR(J),

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:317  
  11381 10 007425   777640 235007                    LDA     -96,DL
        10 007426   001062 236000 7                  LDQ     CMD$
        10 007427   000001 036003                    ADLQ    1,DU
        10 007430   200056 757100                    STAQ    I+4,,AUTO
        10 007431   777640 235007                    LDA     -96,DL
        10 007432   001070 236000 7                  LDQ     J
        10 007433   200060 755100                    STA     I+6,,AUTO
        10 007434   000005 402003                    MPY     5,DU
        10 007435   000002 036003                    ADLQ    2,DU
        10 007436   001630 036000 7                  ADLQ    CHAN$
        10 007437   200060 235100                    LDA     I+6,,AUTO
        10 007440   200064 757100                    STAQ    I+10,,AUTO
        10 007441   200056 237100                    LDAQ    I+4,,AUTO
        10 007442   200062 757100                    STAQ    I+8,,AUTO
        10 007443   200064 237100                    LDAQ    I+10,,AUTO
        10 007444   200066 757100                    STAQ    I+12,,AUTO
        10 007445   200066 630500                    EPPR0   I+12,,AUTO
        10 007446   200073 450500                    STP0    I+17,,AUTO
        10 007447   000306 236000 11                 LDQ     198
        10 007450   200072 756100                    STQ     I+16,,AUTO
        10 007451   200062 631500                    EPPR1   I+8,,AUTO
        10 007452   200071 451500                    STP1    I+15,,AUTO
        10 007453   000307 236000 11                 LDQ     199
        10 007454   200070 756100                    STQ     I+14,,AUTO
        10 007455   200070 630500                    EPPR0   I+14,,AUTO
        10 007456   000022 631400 xsym               EPPR1   B_VECTNIL+18
        10 007457   000000 701000 xent               TSX1    TSW$WRITE
        10 007460   000000 011000                    NOP     0

     2218    11382    5                                  VECTOR(CHAN.THRESH_RATE(J)));
     2219    11383    5                  END;

  11383 10 007461   001070 054000 7                  AOS     J
        10 007462   001062 470400 7                  LDP0    CMD$
        10 007463   000003 236100                    LDQ     3,,PR0
        10 007464   007425 604000 10                 TMI     s:11381
        10 007465   001070 116000 7                  CMPQ    J
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:318  
        10 007466   007425 605000 10                 TPL     s:11381
        10 007467   007570 710000 10                 TRA     s:11406

     2220    11384    4             CASE(TSS_DEV);

     2221    11385    5                IF SUBSTR(CMD$->TS$DEV.DEVNAME,0,2) = 'OD' THEN DO;

  11385 10 007470   000001 222100                    LDX2    1,,PR0
        10 007471   000332 102000 8                  CMPX2   TEXTC_VEC+32
        10 007472   007501 601000 10                 TNZ     s:11389

     2222    11386    5                   CALL TSE$ERROR(%E$T_BADELFDATA);

  11386 10 007473   000277 630400 11                 EPPR0   191
        10 007474   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 007475   000000 701000 xent               TSX1    TSE$ERROR
        10 007476   000000 011000                    NOP     0

     2223    11387    5                   RETURN;

  11387 10 007477   200042 221300                    LDX1  ! RANGE_FLAG+3,,AUTO
        10 007500   000001 702211                    TSX2  ! 1,X1

     2224    11388    5                   END;
     2225    11389    5               DO J = 0 TO 7;               /* ALL IOMS                           */

  11389 10 007501   001070 450000 7                  STZ     J

     2226    11390    5                  IF IOM$(J) ~= ADDR(NIL)

  11390 10 007502   000000 470400 xsym               LDP0    B$DS3$
        10 007503   001070 720000 7                  LXL0    J
        10 007504   000000 236110                    LDQ     0,X0,PR0
        10 007505   000001 116000 xsym               CMPQ    B_VECTNIL+1
        10 007506   007564 600000 10                 TZE     s:11403

     2227    11391    5                  THEN
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:319  
     2228    11392    6                  DO K = 0 TO %N_MAXCHANS-1;   /* CHECK ALL CHANNELS                */

  11392 10 007507   001071 450000 7                  STZ     K
        10 007510   007561 710000 10                 TRA     s:11402+1

     2229    11393    6                     DEV$ = IOM$(J)->IOM.CHAN$->CHAN.DEV$(K);

  11393 10 007511   000000 470400 xsym               LDP0    B$DS3$
        10 007512   001070 720000 7                  LXL0    J
        10 007513   000000 471510                    LDP1    0,X0,PR0
        10 007514   100003 473500                    LDP3    3,,PR1
        10 007515   001071 236000 7                  LDQ     K
        10 007516   000005 402007                    MPY     5,DL
        10 007517   300003 236106                    LDQ     3,QL,PR3
        10 007520   001632 756000 7                  STQ     DEV$

     2230    11394    6                     IF DEV$ ~= ADDR(NIL)

  11394 10 007521   000001 116000 xsym               CMPQ    B_VECTNIL+1
        10 007522   007560 600000 10                 TZE     s:11402

     2231    11395    6                     THEN                   /* CHECK THIS DEV REC                 */
     2232    11396    7                     DO;

     2233    11397    8                        IF DEV.DEVNM = CMD$->TS$DEV.DEVNAME THEN DO;

  11397 10 007523   001632 474400 7                  LDP4    DEV$
        10 007524   001062 475400 7                  LDP5    CMD$
        10 007525   040100 106500                    CMPC    fill='040'O
        10 007526   400003 000010                    ADSC9   3,,PR4                   cn=0,n=8
        10 007527   500001 000010                    ADSC9   1,,PR5                   cn=0,n=8
        10 007530   007560 601000 10                 TNZ     s:11402

     2234    11398    8                          CALL TSW$WRITE (DEVTHRESH_VEC, VECTOR(DEV.DEVNM),VECTOR(DEV.
             11398                                    THRESH_RATE));

  11398 10 007531   000301 235000 11                 LDA     193
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:320  
        10 007532   000003 036003                    ADLQ    3,DU
        10 007533   200056 757100                    STAQ    I+4,,AUTO
        10 007534   777640 235007                    LDA     -96,DL
        10 007535   001632 236000 7                  LDQ     DEV$
        10 007536   000002 036003                    ADLQ    2,DU
        10 007537   200062 757100                    STAQ    I+8,,AUTO
        10 007540   200056 237100                    LDAQ    I+4,,AUTO
        10 007541   200060 757100                    STAQ    I+6,,AUTO
        10 007542   200062 237100                    LDAQ    I+8,,AUTO
        10 007543   200064 757100                    STAQ    I+10,,AUTO
        10 007544   200064 631500                    EPPR1   I+10,,AUTO
        10 007545   200070 451500                    STP1    I+14,,AUTO
        10 007546   200060 633500                    EPPR3   I+6,,AUTO
        10 007547   200067 453500                    STP3    I+13,,AUTO
        10 007550   000302 236000 11                 LDQ     194
        10 007551   200066 756100                    STQ     I+12,,AUTO
        10 007552   200066 630500                    EPPR0   I+12,,AUTO
        10 007553   000021 631400 xsym               EPPR1   B_VECTNIL+17
        10 007554   000000 701000 xent               TSX1    TSW$WRITE
        10 007555   000000 011000                    NOP     0

     2235    11399    8                           RETURN;

  11399 10 007556   200042 221300                    LDX1  ! RANGE_FLAG+3,,AUTO
        10 007557   000001 702211                    TSX2  ! 1,X1

     2236    11400    8                           END;
     2237    11401    7                        END;                /* IF DEV$ ~= ADDR(NIL)               */
     2238    11402    6                     END;              /* DO K = 0 TO %N_MAXCHANS-1                 */

  11402 10 007560   001071 054000 7                  AOS     K
        10 007561   001071 235000 7                  LDA     K
        10 007562   000177 115007                    CMPA    127,DL
        10 007563   007511 604400 10                 TMOZ    s:11393

     2239    11403    5                  END;                      /* DO J = 0 TO 7                      */

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:321  
  11403 10 007564   001070 054000 7                  AOS     J
        10 007565   001070 235000 7                  LDA     J
        10 007566   000007 115007                    CMPA    7,DL
        10 007567   007502 604400 10                 TMOZ    s:11390

     2240    11404    4            END;

     2241    11405        /**/
     2242    11406    3   END EXEC_DISP_THRESH;

  11406 10 007570   200042 221300                    LDX1  ! RANGE_FLAG+3,,AUTO
        10 007571   000001 702211                    TSX2  ! 1,X1

     2243    11407        /**/
     2244    11408    2   END EXEC_THRESH;
     2245    11409        %EJECT;
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:322  
     2246    11410        /**/
     2247    11411    1   EXEC_END: PROC;

  11411 10 007572   200040 741300       EXEC_END     STX1  ! RANGE_FLAG+1,,AUTO

     2248    11412        /**/
     2249    11413    2           CALL M$CLOSE (CLOSE_LO_FPT);

  11413 10 007573   000166 630400 7                  EPPR0   CLOSE_LO_FPT
        10 007574   050001 713400                    CLIMB   close
        10 007575   406000 401760                    pmme    nvectors=13

     2250    11414    2           CALL M$CLOSE (CLOSE_ELF_DATA);

  11414 10 007576   000542 630400 7                  EPPR0   CLOSE_ELF_DATA
        10 007577   050001 713400                    CLIMB   close
        10 007600   406000 401760                    pmme    nvectors=13

     2251    11415    2           CALL M$EXIT (FPT_EXIT);

  11415 10 007601   000614 630400 7                  EPPR0   FPT_EXIT
        10 007602   000001 713400                    CLIMB   exit
        10 007603   400400 401760                    pmme    nvectors=2

     2252    11416    2   END;

  11416 10 007604   200040 221300                    LDX1  ! RANGE_FLAG+1,,AUTO
        10 007605   000001 702211                    TSX2  ! 1,X1

     2253    11417        /**/
     2254    11418    1   EXEC_REL: PROC;

  11418 10 007606   200040 741300       EXEC_REL     STX1  ! RANGE_FLAG+1,,AUTO

     2255    11419        /**/
     2256    11420    2           CMD$ = PINCRW(CMD$,SIZEW(TS$CMDWD));

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:323  
  11420 10 007607   001062 236000 7                  LDQ     CMD$
        10 007610   000001 036003                    ADLQ    1,DU
        10 007611   001062 756000 7                  STQ     CMD$

     2257    11421    2           SYSCON_FPT.V.FUNCTION# = %RELEASE_SYSCON#;

  11421 10 007612   005000 236003                    LDQ     2560,DU
        10 007613   000712 552040 7                  STBQ    SYSCON_FPT+4,'40'O

     2258    11422    3           DO WHILE (CMD$->TS$DEV.CODE ~= 0);

  11422 10 007614   001062 470400 7                  LDP0    CMD$
        10 007615   000000 720100                    LXL0    0,,PR0
        10 007616   007756 600000 10                 TZE     s:11464

     2259    11423    4              DO CASE (CMD$->TS$DEV.CODE);

  11423 10 007617   001062 470400 7                  LDP0    CMD$
        10 007620   000000 236100                    LDQ     0,,PR0
        10 007621   777777 376007                    ANQ     -1,DL
        10 007622   000006 136007                    SBLQ    6,DL
        10 007623   000006 116007                    CMPQ    6,DL
        10 007624   007626 602006 10                 TNC     s:11423+7,QL
        10 007625   007746 710000 10                 TRA     NEXT_REL
        10 007626   007634 710000 10                 TRA     s:11425
        10 007627   007746 710000 10                 TRA     NEXT_REL
        10 007630   007746 710000 10                 TRA     NEXT_REL
        10 007631   007746 710000 10                 TRA     NEXT_REL
        10 007632   007665 710000 10                 TRA     s:11437
        10 007633   007716 710000 10                 TRA     s:11449

     2260    11424    4               CASE (TSS_IOM);

     2261    11425    4                 SYSCON_FPT.V.COMPONENT# = %IOM##;

  11425 10 007634   000005 236003                    LDQ     5,DU
        10 007635   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:324  

     2262    11426    4                 SYSCON_FPT.V.IOM# = CMD$->TS$IOM.IOM;

  11426 10 007636   000001 236100                    LDQ     1,,PR0
        10 007637   000011 736000                    QLS     9
        10 007640   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

     2263    11427    4                 SUB_BUF_1.COUNT = 5;

  11427 10 007641   005000 236003                    LDQ     2560,DU
        10 007642   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     2264    11428    4                 SUB_BUF_1.TEXT = 'IOM#';

  11428 10 007643   040000 100400                    MLR     fill='040'O
        10 007644   000302 000004 8                  ADSC9   TEXTC_VEC+8              cn=0,n=4
        10 007645   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     2265    11429    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,4,1),CMD$->TS$IOM.IOM);

  11429 10 007646   000001 235100                    LDA     1,,PR0
        10 007647   000044 773000                    LRL     36
        10 007650   200056 757100                    STAQ    I+4,,AUTO
        10 007651   000000 301500                    BTD
        10 007652   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 007653   003746 230001 7                  NDSC9   SUB_BUF_1+1              cn=1,s=nosgn,sf=0,n=1

     2266    11430    4                 CALL M$SYSCON(SYSCON_FPT) ALTRET (REL_ERR);

  11430 10 007654   000706 630400 7                  EPPR0   SYSCON_FPT
        10 007655   470007 713400                    CLIMB   alt,+28679
        10 007656   400400 401760                    pmme    nvectors=2
        10 007657   007760 702000 10                 TSX2    REL_ERR

     2267    11431    4                 CALL TSE$ERROR(%E$T_IOMRELOK);

  11431 10 007660   000311 630400 11                 EPPR0   201
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:325  
        10 007661   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 007662   000000 701000 xent               TSX1    TSE$ERROR
        10 007663   000000 011000                    NOP     0
        10 007664   007746 710000 10                 TRA     NEXT_REL

     2268    11432        /**/
     2269    11433        /*E*    ERROR: TSS-E$T_IOMRELOK-0
     2270    11434                MESSAGE: IOM %U1 successfully released
     2271    11435                DESCRIPTION: THE SPECIFIED IOM HAS BEEN RELEASED */
     2272    11436    4               CASE (TSS_CPU);

     2273    11437    4                 SYSCON_FPT.V.COMPONENT# = %CPU##;

  11437 10 007665   000006 236003                    LDQ     6,DU
        10 007666   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     2274    11438    4                 SYSCON_FPT.V.CPU# = CMD$->TS$CPU.CPU;

  11438 10 007667   000001 236100                    LDQ     1,,PR0
        10 007670   000011 736000                    QLS     9
        10 007671   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

     2275    11439    4                 SUB_BUF_1.COUNT = 5;

  11439 10 007672   005000 236003                    LDQ     2560,DU
        10 007673   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     2276    11440    4                 SUB_BUF_1.TEXT = 'CPU#';

  11440 10 007674   040000 100400                    MLR     fill='040'O
        10 007675   000303 000004 8                  ADSC9   TEXTC_VEC+9              cn=0,n=4
        10 007676   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     2277    11441    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,4,1),CMD$->TS$CPU.CPU);

  11441 10 007677   000001 235100                    LDA     1,,PR0
        10 007700   000044 773000                    LRL     36
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:326  
        10 007701   200056 757100                    STAQ    I+4,,AUTO
        10 007702   000000 301500                    BTD
        10 007703   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 007704   003746 230001 7                  NDSC9   SUB_BUF_1+1              cn=1,s=nosgn,sf=0,n=1

     2278    11442    4                 CALL M$SYSCON(SYSCON_FPT) ALTRET (REL_ERR);

  11442 10 007705   000706 630400 7                  EPPR0   SYSCON_FPT
        10 007706   470007 713400                    CLIMB   alt,+28679
        10 007707   400400 401760                    pmme    nvectors=2
        10 007710   007760 702000 10                 TSX2    REL_ERR

     2279    11443    4                 CALL TSE$ERROR(%E$T_CPURELOK);

  11443 10 007711   000313 630400 11                 EPPR0   203
        10 007712   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 007713   000000 701000 xent               TSX1    TSE$ERROR
        10 007714   000000 011000                    NOP     0
        10 007715   007746 710000 10                 TRA     NEXT_REL

     2280    11444        /**/
     2281    11445        /*E*    ERROR: TSS-E$T_CPURELOK-0
     2282    11446                MESSAGE: CPU %U1 successfully released
     2283    11447                DESCRIPTION: THE SPECIFIED CPU HAS BEEN RELEASED */
     2284    11448    4               CASE (TSS_SCU);

     2285    11449    4                 SYSCON_FPT.V.COMPONENT# = %SCU##;

  11449 10 007716   000007 236003                    LDQ     7,DU
        10 007717   000712 552020 7                  STBQ    SYSCON_FPT+4,'20'O

     2286    11450    4                 SYSCON_FPT.V.SCU# = CMD$->TS$SCU.SCU;

  11450 10 007720   000001 236100                    LDQ     1,,PR0
        10 007721   000011 736000                    QLS     9
        10 007722   000712 552010 7                  STBQ    SYSCON_FPT+4,'10'O

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:327  
     2287    11451    4                 SUB_BUF_1.COUNT = 5;

  11451 10 007723   005000 236003                    LDQ     2560,DU
        10 007724   003745 552040 7                  STBQ    SUB_BUF_1,'40'O

     2288    11452    4                 SUB_BUF_1.TEXT = 'SCU#';

  11452 10 007725   040000 100400                    MLR     fill='040'O
        10 007726   000304 000004 8                  ADSC9   TEXTC_VEC+10             cn=0,n=4
        10 007727   003745 200037 7                  ADSC9   SUB_BUF_1                cn=1,n=31

     2289    11453    4                 CALL BINCHAR(SUBSTR(SUB_BUF_1.TEXT,4,1),CMD$->TS$SCU.SCU);

  11453 10 007730   000001 235100                    LDA     1,,PR0
        10 007731   000044 773000                    LRL     36
        10 007732   200056 757100                    STAQ    I+4,,AUTO
        10 007733   000000 301500                    BTD
        10 007734   200056 000010                    NDSC9   I+4,,AUTO                cn=0,s=lsgnf,sf=0,n=8
        10 007735   003746 230001 7                  NDSC9   SUB_BUF_1+1              cn=1,s=nosgn,sf=0,n=1

     2290    11454    4                 CALL M$SYSCON(SYSCON_FPT) ALTRET (REL_ERR);

  11454 10 007736   000706 630400 7                  EPPR0   SYSCON_FPT
        10 007737   470007 713400                    CLIMB   alt,+28679
        10 007740   400400 401760                    pmme    nvectors=2
        10 007741   007760 702000 10                 TSX2    REL_ERR

     2291    11455    4                 CALL TSE$ERROR(%E$T_SCURELOK);

  11455 10 007742   000315 630400 11                 EPPR0   205
        10 007743   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 007744   000000 701000 xent               TSX1    TSE$ERROR
        10 007745   000000 011000                    NOP     0

     2292    11456        /**/
     2293    11457        /*E*    ERROR: TSS-E$T_SCURELOK-0
     2294    11458                MESSAGE: SCU %U1 successfully released
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:328  
     2295    11459                DESCRIPTION: THE SPECIFIED SCU HAS BEEN RELEASED */
     2296    11460    4              END;

     2297    11461    3   NEXT_REL:
     2298    11462    3             CMD$ = PINCRW(CMD$,CMD$->TS$DEV.SIZE);

  11462 10 007746   001062 470400 7     NEXT_REL     LDP0    CMD$
        10 007747   000000 220100                    LDX0    0,,PR0
        10 007750   000000 636010                    EAQ     0,X0
        10 007751   001062 036000 7                  ADLQ    CMD$
        10 007752   001062 756000 7                  STQ     CMD$

     2299    11463    3             END;

  11463 10 007753   001062 470400 7                  LDP0    CMD$
        10 007754   000000 720100                    LXL0    0,,PR0
        10 007755   007617 601000 10                 TNZ     s:11423

     2300    11464    2          RETURN;

  11464 10 007756   200040 221300                    LDX1  ! RANGE_FLAG+1,,AUTO
        10 007757   000001 702211                    TSX2  ! 1,X1

     2301    11465    2   REL_ERR:
     2302    11466    2          SYSCONERR = B$TCB$->B$TCB.ALT$->B$ALT.ERR;

  11466 10 007760   000000 470400 xsym  REL_ERR      LDP0    B$TCB$
        10 007761   000000 471500                    LDP1    0,,PR0
        10 007762   100102 236100                    LDQ     66,,PR1
        10 007763   003637 756000 7                  STQ     SYSCONERR

     2303    11467    3          DO CASE(CMD$->TS$DEV.CODE);

  11467 10 007764   001062 471400 7                  LDP1    CMD$
        10 007765   100000 236100                    LDQ     0,,PR1
        10 007766   777777 376007                    ANQ     -1,DL
        10 007767   000006 136007                    SBLQ    6,DL
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:329  
        10 007770   000006 116007                    CMPQ    6,DL
        10 007771   007773 602006 10                 TNC     s:11467+7,QL
        10 007772   010011 710000 10                 TRA     s:11475
        10 007773   010001 710000 10                 TRA     s:11469
        10 007774   010011 710000 10                 TRA     s:11475
        10 007775   010011 710000 10                 TRA     s:11475
        10 007776   010011 710000 10                 TRA     s:11475
        10 007777   010004 710000 10                 TRA     s:11471
        10 010000   010007 710000 10                 TRA     s:11473

     2304    11468    3           CASE (TSS_IOM);

     2305    11469    3             I = %E$T_IOMRELERR;

  11469 10 010001   000424 235007                    LDA     276,DL
        10 010002   001067 755000 7                  STA     I
        10 010003   010011 710000 10                 TRA     s:11475

     2306    11470    3           CASE (TSS_CPU);

     2307    11471    3             I = %E$T_CPURELERR;

  11471 10 010004   000420 235007                    LDA     272,DL
        10 010005   001067 755000 7                  STA     I
        10 010006   010011 710000 10                 TRA     s:11475

     2308    11472    3           CASE (TSS_SCU);

     2309    11473    3             I = %E$T_SCURELERR;

  11473 10 010007   000422 235007                    LDA     274,DL
        10 010010   001067 755000 7                  STA     I

     2310    11474    3          END;

     2311    11475    2          CALL TSE$ERROR(I);

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:330  
  11475 10 010011   000055 630400 11                 EPPR0   45
        10 010012   000017 631400 xsym               EPPR1   B_VECTNIL+15
        10 010013   000000 701000 xent               TSX1    TSE$ERROR
        10 010014   000000 011000                    NOP     0

     2312    11476    2          CALL TSE$ERROR(0,SYSCONERR);

  11476 10 010015   000073 630400 11                 EPPR0   59
        10 010016   000020 631400 xsym               EPPR1   B_VECTNIL+16
        10 010017   000000 701000 xent               TSX1    TSE$ERROR
        10 010020   000000 011000                    NOP     0

     2313    11477    2          GOTO NEXT_REL;

  11477 10 010021   007746 710000 10                 TRA     NEXT_REL

     2314    11478        /*E*    ERROR: TSS-E$T_IOMRELERR-0
     2315    11479                MESSAGE: Unable to release IOM %U1
     2316    11480                DESCRIPTION: CANT RELEASE THIS IOM  */
     2317    11481        /*E*    ERROR: TSS-E$T_CPURELERR-0
     2318    11482                MESSAGE: Unable to release CPU %U1
     2319    11483                DESCRIPTION: CANT RELEASE THIS CPU  */
     2320    11484        /*E*    ERROR: TSS-E$T_SCURELERR-0
     2321    11485                MESSAGE: Unable to release SCU %U1
     2322    11486                DESCRIPTION: CANT RELEASE THIS SCU  */
     2323    11487    2   END EXEC_REL;
     2324    11488        /**/
     2325    11489    1   END TSS$SYSCON;

  11489 10 010022   000000 702200 xent               TSX2  ! X66_MARET
     2326    11490        %EOD;

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:331  
--  Include file information  --

   M_INFO_C.:E05TOU  is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   EL$TABLES.:E05TOU  is referenced.
   EL_SUBS_C.:E05TOU  is referenced.
   TH$HIST.:E05TOU  is referenced.
   TD$STRUCT.:E05TOU  is referenced.
   XU_PERR_C.:E05TOU  is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   TS_PERR_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   IT_SUBS_C.:E05TOU  is referenced.
   TS_SUBS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure TSS$SYSCON.
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:332  

 **** Variables and constants ****

  ****  Section 007  Data  TSS$SYSCON

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

   660-0-0/d STRC(144)   r     1 BADPP_FPT               1061-0-0/w PTR         r     1 BLK$
  1630-0-0/w PTR         r     1 CHAN$                    130-0-0/d STRC(1080)  r     1 CLOSE_CONFIG
   404-0-0/d STRC(1080)  r     1 CLOSE_DEVHIST            542-0-0/d STRC(1080)  r     1 CLOSE_ELF_DATA
   166-0-0/d STRC(1080)  r     1 CLOSE_LO_FPT            1062-0-0/w PTR         r     1 CMD$
  1063-0-0/w PTR         r     1 CMD_BASE$               1066-0-0/w PTR         r     1 CONFIG$
  4014-0-0/c STRC(72)    r     1 CONFIG_FILE             3742-0-0/c STRC(81)    r     1 CONFIG_KEY
  1102-0-0/w UBIN        r     1 CURUTS                   600-0-0/d STRC(432)   r     1 CUR_UTS
  1632-0-0/w PTR         r     1 DEV$                     442-0-0/c STRC(81)    r     1 DEVHIST
  1634-0-0/c CHAR(8)     r     1 DEVNAME                 1551-0-0/w STRC(396)   r     1 DEVREC
  4010-0-0/d STRC(72)    r     1 DS_RESULTS              3633-0-0/w STRC(144)   r     1 EL$THRESHSET
   445-0-0/c STRC(81)    r     1 ELF_DATA                 614-0-0/d STRC(216)   r     1 FPT_EXIT
  1044-0-0/d STRC(432)   r     1 FPT_MONINFO              634-0-0/d STRC(144)   r     1 FPT_PRIV
    16-0-0/d STRC(216)   r     1 GDS_FPT                  716-0-0/d STRC(216)   r     1 GET_PGLIST
   664-0-0/d STRC(144)   r     1 GOODPP_FPT              1116-0-0/w STRC(648)   r     1 HEADREC
  1625-0-0/b BIT (18)    r     1 HEAD_KEY                1103-0-0/w UBIN        r     1 HIPAGE
  1067-0-0/w SBIN        r     1 I                       1627-0-0/w PTR         r     1 I$
  1140-0-0/w STRC(9540)  r     1 IOMREC                  1070-0-0/w SBIN        r     1 J
  1071-0-0/w SBIN        r     1 K                       3641-0-0/w UBIN        r     1 LAST_CMD
  1104-0-0/w UBIN        r     1 LOPAGE                  1060-0-0/w PTR         r     1 M$SI$
  1626-0-0/b BIT (18)    r     1 MAINT_KEY               1110-0-0/w PTR         r     1 MM$
  1631-0-0/w PTR         r     1 MPC$                    1633-0-0/w SBIN        r     1 NUMDEVS
    36-0-0/d STRC(2088)  r     1 OPEN_CONFIG              242-0-0/d STRC(2088)  r     1 OPEN_DEVHIST
   450-0-0/d STRC(2088)  r     1 OPEN_ELF_DATA           3775-0-0/c STRC(45)    r     1 PART
  1564-0-0/c CHAR(132)   r     1 PATH_BUF                 724-0-0/d STRC(54)    r     1 PGLIST
   640-0-0/d STRC(144)   r     1 PPRIV                   1114-0-0/w PTR         r     1 PPUT$
  1107-0-0/w UBIN        r     1 PPUT36                  1114-0-0/w STRC        r     1 PPUTPTR
   700-0-0/d STRC(216)   r     1 PPUT_CVM                1112-0-0/d DSCR        r     1 PPUT_DESC
    24-0-0/d STRC(360)   r     1 PROMPT_FPT              4020-0-0/w STRC(504)   r     1 P_PCB
     0-0-0/d STRC(504)   r     1 READ_CMD_FPT             224-0-0/d STRC(504)   r     1 READ_CONFIG
   334-0-0/d STRC(504)   r     1 READ_DEVHIST_HEAD        352-0-0/d STRC(504)   r     1 READ_DEVHIST_MAINT
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:333  
  4012-0-0/d STRC(72)    r     1 RESULTS                 1106-0-0/b STRC(2)     r     1 RETURNOK
   674-0-0/d STRC(144)   r     1 SEE_MON_LS               670-0-0/d STRC(144)   r     1 SEE_PPUT_LS
  3745-0-0/c STRC(288)   r     1 SUB_BUF_1               3755-0-0/c STRC(288)   r     1 SUB_BUF_2
  3765-0-0/c STRC(288)   r     1 SUB_BUF_3               1106-0-0/b STRC(2)     r     1 SUSPECT
  4016-0-0/c STRC(72)    r     1 SYSACCT                 3637-0-0/w BIT         r     1 SYSCONERR
   706-0-0/d STRC(288)   r     1 SYSCON_FPT              3777-0-0/c CHAR(28)    r     1 SYSCON_HERE
  4006-0-0/c CHAR        r     1 SYSCON_PROMPT            622-0-0/c STRC(72)    r     1 SYSTAC
   624-0-0/d STRC(288)   r     1 TELL_ELF                3700-0-0/w STRC(1197)  r     1 TEXTC
  1636-0-0/w STRC(15048) r     1 TH_HEAD                 2500-0-0/w STRC(108)   r     1 TH_MAINT(0:200)
  1072-0-0/d REMB        r     1 TS_CMD_READ             1077-0-0/w BIT         r     1 TS_COL_BAD
  1076-0-0/w BIT         r     1 TS_DPS90                1100-0-0/w UBIN        r     1 TS_FIRST
  1101-0-0/w UBIN        r     1 TS_LAST                 1074-0-0/w BIT         r     1 TS_PRINT_HEADING
  1075-0-0/w BIT         r     1 TS_PRINT_THRESH_HEADING
  1024-0-0/d STRC(540)   r     1 VLR_MONINFO              726-0-0/d STRC(2232)  r     1 VLR_SITEINFO
   644-0-0/d STRC(432)   r     1 WRITE_CONFIG             370-0-0/d STRC(432)   r     1 WRITE_MAINT
  4060-0-0/d STRC(1404)  r     1 XUR_INIT

  ****  Section 008 RoData TSS$SYSCON

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    32-0-0/c CHAR(38)    r     1 CHANNOTPART_FMT           44-0-0/d VECT        r     1 CHANNOTPART_VEC
    46-0-0/c CHAR(38)    r     1 CHANPART_FMT              60-0-0/d VECT        r     1 CHANPART_VEC
   216-0-0/c CHAR(22)    r     1 CHANTHRESH_FMT           214-0-0/d VECT        r     1 CHANTHRESH_VEC
   166-0-0/c CHAR(23)    r     1 COMPNOREL_FMT            174-0-0/d VECT        r     1 COMPNOREL_VEC
   156-0-0/c CHAR(19)    r     1 COMPREL_FMT              164-0-0/d VECT        r     1 COMPREL_VEC
     6-0-0/c CHAR(29)    r     1 DEVNOTPART_FMT            16-0-0/d VECT        r     1 DEVNOTPART_VEC
    20-0-0/c CHAR(29)    r     1 DEVPART_FMT               30-0-0/d VECT        r     1 DEVPART_VEC
   210-0-0/c CHAR(14)    r     1 DEVTHRESH_FMT            206-0-0/d VECT        r     1 DEVTHRESH_VEC
   106-0-0/c CHAR(40)    r     1 DPNOTPART_FMT            120-0-0/d VECT        r     1 DPNOTPART_VEC
   122-0-0/c CHAR(40)    r     1 DPPART_FMT               134-0-0/d VECT        r     1 DPPART_VEC
     0-0-0/d STRC(144)   r     1 FPT_INT                  146-0-0/c CHAR(19)    r     1 IOMNOPART_FMT
   154-0-0/d VECT        r     1 IOMNOPART_VEC            136-0-0/c CHAR(19)    r     1 IOMPART_FMT
   144-0-0/d VECT        r     1 IOMPART_VEC              200-0-0/c CHAR(21)    r     1 IOMTHRESH_FMT
   176-0-0/d VECT        r     1 IOMTHRESH_VEC             62-0-0/c CHAR(29)    r     1 MPCNOTPART_FMT
    72-0-0/d VECT        r     1 MPCNOTPART_VEC            74-0-0/c CHAR(29)    r     1 MPCPART_FMT
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:334  
   104-0-0/d VECT        r     1 MPCPART_VEC              260-0-0/c CHAR(21)    r     1 PAGE1BAD_FMT
   266-0-0/d VECT        r     1 PAGE1BAD_VEC             250-0-0/c CHAR(22)    r     1 PAGE1GOOD_FMT
   256-0-0/d VECT        r     1 PAGE1GOOD_VEC            236-0-0/c CHAR(26)    r     1 PAGEBAD_FMT
   246-0-0/d VECT        r     1 PAGEBAD_VEC              224-0-0/c CHAR(27)    r     1 PAGEGOOD_FMT
   234-0-0/d VECT        r     1 PAGEGOOD_VEC               4-0-0/d VECT        r     1 SYSCON_HERE_VEC
   270-0-0/c CHAR(6)     r     1 TEXTC_FMT                272-0-0/d VECT        r     1 TEXTC_VEC

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    44-0-0/w PTR         r     1 @BUFFER                   44-0-0/w PTR         r     1 @CHAN
    45-0-0/w PTR         r     1 @CHANS                    43-0-0/w PTR         r     1 @DEVNAME
    45-0-0/w PTR         r     1 @LEN                      44-0-0/w PTR         r     1 @NUM
    43-0-0/w PTR         r     1 @NUM                      43-0-0/w PTR         r     1 @PATH
    43-0-0/w PTR         r     1 @VALUE                    *0-0-0/c STRC(288)   r     1 BUFFER
    11-0-0/w UBIN        r     1 BUF_CNT                   *0-0-0/c CHAR(2)     r     1 CHAN
    15-0-0/w UBIN        r     1 CHANS(0:15)               *0-0-0/w UBIN        r     1 CHANS(0:15)
    35-0-0/w UBIN        r     1 CHANS_FOUND               13-0-0/c CHAR(2)     r     1 CHAN_BUF
    46-0-0/c CHAR        r     1 CHAR1                     47-0-0/c CHAR(2)     r     1 CHAR2
    *0-0-0/c CHAR(8)     r     1 DEVNAME                    6-0-0/w UBIN        r     1 FEPLEN
    52-0-0/w UBIN        r     1 I                         10-0-0/w UBIN        r     1 IOM#
     7-0-0/c CHAR(4)     r     1 IOM_NAME                  14-0-0/w UBIN        r     1 LAST_CHAN
    12-0-0/w UBIN        r     1 LEN                       *0-0-0/w UBIN        r     1 LEN
    *0-0-0/w UBIN        r     1 NUM                       *0-0-0/w UBIN        r     1 NUM
    36-0-0/w UBIN        r     1 NUM_CHANS                 *0-0-0/w BIT         r     1 PATH
     4-0-0/w UBIN        r     1 PP                         5-0-0/w UBIN        r     1 PPUT_OFFSET
    37-0-0/b BIT         r     1 RANGE_FLAG                45-0-0/c STRC(288)   r     1 SCRATCH
    46-0-0/c CHAR(8)     r     1 TEMP1                     50-0-0/c CHAR(8)     r     1 TEMP2
    *0-0-0/w UBIN        r     1 VALUE                      3-0-0/w UBIN        r     1 VP

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:335  
     0-0-0/w PTR         r     1 B$DS3$                     0-0-0/w PTR         r     1 B$IS$
     0-0-0/w PTR         r     1 B$JIT$                     0-0-0/w PTR         r     1 B$TCB$
     0-0-0/c CHAR        r     1 B_VERSION                  0-0-0/w UBIN        r     1 TSN_CMDS
     0-0-0/b BIT         r     1 TS_DIPART

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/d STRC(8856)  r     1 B$JIT
     0-0-0/w STRC(144)   r     1 B$TCB                      0-0-0/c ASTR(9)     r     1 B$VERSIONB
     0-0-0/w STRC(180)   r     1 CHAN(0:127)                0-0-0/w STRC(198)   r     1 DEV
     0-0-0/d ASTR(3528)  r     1 F$DCB                      0-0-0/w STRC(144)   r     1 IOM
     0-0-0/w PTR         r     1 IOM$(0:7)                  0-0-0N  NULL        r     1 M$CONF
     0-0-0N  NULL        r     1 M$DEVHIST                  0-0-0N  NULL        r     1 M$ELF
     0-0-0N  NULL        r     1 M$LO                       0-0-0N  NULL        r     1 M$SI
     0-0-0N  NULL        r     1 M$UC                       0-0-0/w STRC        r     1 MM$PPUT
     0-0-0/w STRC(180)   r     1 MPC1                       0-0-0/w STRC(144)   r     1 O$BLK
     0-0-0/w ASTR(153)   r     1 O$SYM                      0-0-0/w STRC(396)   r     1 TD$DEV
     0-0-0/w STRC(648)   r     1 TD$HEAD                    0-0-0/w STRC(9540)  r     1 TD$IOM
     0-0-0/w STRC(612)   r     1 TD$MPC                     0-0-0/w UBIN        r     1 TEMP36
     0-0-0/w STRC(144)   r     1 TS$CHAN                    0-0-0/w UBIN        r     1 TS$CMDWD
     0-0-0/w STRC(72)    r     1 TS$CPU                     0-0-0/w STRC(108)   r     1 TS$DEV
     0-0-0/w STRC(108)   r     1 TS$FEP                     0-0-0/w STRC(72)    r     1 TS$IOM
     0-0-0/w STRC(108)   r     1 TS$MPC                     0-0-0/w STRC(108)   r     1 TS$PAGES
     0-0-0/w STRC(72)    r     1 TS$SCU


   Procedure TSS$SYSCON requires 4115 words for executable code.
   Procedure TSS$SYSCON requires 76 words of local(AUTO) storage.
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:336  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:337  
          MINI XREF LISTING

B$ALT.CODE
      9441**DCL      9441--REDEF    9442--REDEF    9442--REDEF
B$ALT.ERR
      9442**DCL     10118>>ASSIGN  11466>>ASSIGN
B$ALT.ERR.CODE
      9443**DCL     10342>>IF
B$ALT.ERR.ERR#
      9443**DCL      9443--REDEF
B$ALT.EVID
      9442**DCL      9442--REDEF    9442--REDEF
B$DS3$
      9656**DCL      9502--IMP-PTR 11358>>ASSIGN  11362>>IF      11365>>ASSIGN  11377>>ASSIGN  11390>>IF
     11393>>ASSIGN
B$IS$
      9657**DCL      9995>>ASSIGN
B$JIT.CPFLAGS1.SLEAZE
      5290**DCL      5290--REDEF
B$JIT.DDLL
      5354**DCL      9984>>ASSIGN
B$JIT.ERR.MID
      5197**DCL      5197--REDEF
B$JIT.JRESPEAK
      5358**DCL      5359--REDEF
B$JIT.ORIGINATOR_PORT.FROM_CR
      5467**DCL      5467--REDEF    5468--REDEF
B$JIT.PNR
      5371**DCL      5371--REDEF
B$JIT.TSLINE
      5465**DCL      5466--REDEF
B$JIT$
      9654**DCL      5191--IMP-PTR  9984>>ASSIGN
B$TCB.ALT$
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:338  
      9437**DCL     10118>>ASSIGN  10342>>IF      11466>>ASSIGN
B$TCB$
      9655**DCL     10118>>ASSIGN  10342>>IF      11466>>ASSIGN
B$VERSIONB.C_
      8808**DCL      8809--IMP-SIZ  9675>>CALLBLT
B$VERSIONB.T_
      8809**DCL      9675>>CALLBLT
BADP IN PROCEDURE EXEC_DISP
     11170**LABEL   11116--GOTO
BADPP_FPT
      8413**DCL     10004<>CALL    10317<>CALL
BADPP_FPT.V
      8413**DCL      8413--DCLINIT
BADPP_FPT.V.PPNO#
      8413**DCL     10003<<ASSIGN  10315<<ASSIGN
BAG_IT IN PROCEDURE EXEC_RET
     10446**LABEL   10427--CALLALT 10428--CALLALT 10429--CALLALT 10445--CALLALT
BAG_IT IN PROCEDURE EXEC_THRESH
     11345**LABEL   11339--CALLALT
BAG_IT IN PROCEDURE FIND_CHANNEL
     11281**LABEL   11253--CALLALT
BLK$
      8603**DCL      9156--IMP-PTR  9202--IMP-PTR 10531<<ASSIGN  10538>>ASSIGN  10538>>ASSIGN  10539>>DOINDEX
     10540>>ASSIGN  10547>>IF      10562>>ASSIGN  10562>>ASSIGN  10563>>DOINDEX 10564>>ASSIGN  10571>>IF
     10585>>ASSIGN  10585>>ASSIGN  10586>>DOINDEX 10587>>ASSIGN  10595>>IF      10613>>ASSIGN  10613>>ASSIGN
     10614>>DOINDEX 10615>>ASSIGN  10623>>IF      11318<<ASSIGN  11319>>IF      11323>>CALLBLT 11323>>CALLBLT
BUFFER IN PROCEDURE STUFF_BUF
     10167**DCL     10165--PROC
BUFFER.COUNT IN PROCEDURE STUFF_BUF
     10168**DCL     10181<<ASSIGN  10182>>CALLBLT 10182>>CALLBLT
BUFFER.TEXT IN PROCEDURE STUFF_BUF
     10169**DCL     10182<<CALLBLT
BUF_CNT
      8648**DCL     10896<<ASSIGN  10910>>CALLBLT 10911<<ASSIGN  10911>>ASSIGN  10914>>CALLBLT 10915<<ASSIGN
     10915>>ASSIGN  10918>>CALLBLT 10919<<ASSIGN  10919>>ASSIGN  10922>>CALLBLT 10923<<ASSIGN  10923>>ASSIGN
     10934>>CALLBLT 10935<<ASSIGN  10935>>ASSIGN  10937>>CALLBLT 10938<<ASSIGN  10938>>ASSIGN  10940>>CALLBLT
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:339  
     10941<<ASSIGN  10941>>ASSIGN  10943>>CALLBLT 10944<<ASSIGN  10944>>ASSIGN  10951>>CALLBLT 10952<<ASSIGN
     10952>>ASSIGN  10954>>CALLBLT 10955<<ASSIGN  10955>>ASSIGN  10960>>CALLBLT 10961<<ASSIGN  10961>>ASSIGN
     10964>>ASSIGN
B_VERSION
      8806**DCL      9675--CALLBLT  9675--CALLBLT
CHAN.DEV$
      9514**DCL     11393>>ASSIGN
CHAN.MPC$
      9515**DCL     11365>>ASSIGN
CHAN.THRESH_RATE
      9513**DCL     11381--CALL
CHAN IN PROCEDURE MY_BINCHAR
     11287**DCL     11284--PROC    11298<<ASSIGN  11304<<ASSIGN
CHAN$
      8725**DCL      9509--IMP-PTR 11379<<ASSIGN  11381>>CALL
CHANNOTPART_FMT
      8817**DCL      8819--DCLINIT
CHANNOTPART_VEC
      8819**DCL     10705<>CALL    11103<>CALL
CHANPART_FMT
      8820**DCL      8822--DCLINIT
CHANPART_VEC
      8822**DCL     10701<>CALL    11101<>CALL
CHANS
      8652**DCL     10908<>CALL    10921<>CALL    10924>>ASSIGN  10926>>IF      10942<>CALL    10946>>ASSIGN
CHANS IN PROCEDURE FIND_CHANNEL
     11233**DCL     11229--PROC    11240<<ASSIGN  11264<<ASSIGN  11273<<ASSIGN
CHANS_FOUND
      8653**DCL     10894<<ASSIGN  10909>>IF      10917<<ASSIGN  10917>>ASSIGN  10959>>IF
CHANTHRESH_FMT
      8854**DCL      8853--DCLINIT
CHANTHRESH_VEC
      8853**DCL     11381<>CALL
CHAN_BUF
      8650**DCL     10921<>CALL    10922>>CALLBLT 10936<>CALL    10937>>CALLBLT 10942<>CALL    10943>>CALLBLT
     10953<>CALL    10954>>CALLBLT
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:340  
CHAR1 IN PROCEDURE MY_BINCHAR
     11291**DCL     11297<<CALLBLT 11298>>ASSIGN
CHAR2 IN PROCEDURE MY_BINCHAR
     11292**DCL     11303<<CALLBLT 11304>>ASSIGN
CHNGAARD
      9766**PROC     9866--CALL     9891--CALL     9961--CALL
CLOSE_CONFIG
      7662**DCL      9875<>CALL     9901<>CALL     9927<>CALL     9972<>CALL    10107<>CALL    10214<>CALL
     10238<>CALL    10262<>CALL    10304<>CALL    10456<>CALL    10556<>CALL    10579<>CALL    10603<>CALL
     10632<>CALL    10640<>CALL    10676<>CALL    10851<>CALL    10974<>CALL    11205<>CALL
CLOSE_CONFIG.SN_
      7662**DCL      7662--REDEF
CLOSE_CONFIG.UTL_
      7663**DCL      7663--REDEF
CLOSE_CONFIG.V
      7667**DCL      7662--DCLINIT
CLOSE_CONFIG.V.EXPIRE#
      7677**DCL      7677--REDEF
CLOSE_CONFIG.V.TYPE#
      7675**DCL      7675--REDEF
CLOSE_CONFIG.V.XTNSIZE#
      7672**DCL      7672--REDEF    7674--REDEF
CLOSE_DEVHIST
      8032**DCL     10447<>CALL
CLOSE_DEVHIST.SN_
      8032**DCL      8032--REDEF
CLOSE_DEVHIST.UTL_
      8033**DCL      8033--REDEF
CLOSE_DEVHIST.V
      8037**DCL      8032--DCLINIT
CLOSE_DEVHIST.V.EXPIRE#
      8047**DCL      8047--REDEF
CLOSE_DEVHIST.V.TYPE#
      8045**DCL      8045--REDEF
CLOSE_DEVHIST.V.XTNSIZE#
      8042**DCL      8042--REDEF    8044--REDEF
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:341  
CLOSE_ELF_DATA
      8247**DCL     11414<>CALL
CLOSE_ELF_DATA.SN_
      8247**DCL      8247--REDEF
CLOSE_ELF_DATA.UTL_
      8248**DCL      8248--REDEF
CLOSE_ELF_DATA.V
      8252**DCL      8247--DCLINIT
CLOSE_ELF_DATA.V.EXPIRE#
      8262**DCL      8262--REDEF
CLOSE_ELF_DATA.V.TYPE#
      8260**DCL      8260--REDEF
CLOSE_ELF_DATA.V.XTNSIZE#
      8257**DCL      8257--REDEF    8259--REDEF
CLOSE_LO_FPT
      7707**DCL     11413<>CALL
CLOSE_LO_FPT.SN_
      7707**DCL      7707--REDEF
CLOSE_LO_FPT.UTL_
      7708**DCL      7708--REDEF
CLOSE_LO_FPT.V
      7712**DCL      7707--DCLINIT
CLOSE_LO_FPT.V.EXPIRE#
      7722**DCL      7722--REDEF
CLOSE_LO_FPT.V.TYPE#
      7720**DCL      7720--REDEF
CLOSE_LO_FPT.V.XTNSIZE#
      7717**DCL      7717--REDEF    7719--REDEF
CMD$
      8604**DCL      9683<<ASSIGN   9708<<ASSIGN   9709>>DOCASE   9850<<ASSIGN   9850>>ASSIGN   9853>>DOWHILE
      9855>>DOCASE   9859>>ASSIGN   9861>>ASSIGN   9869>>ASSIGN   9884>>ASSIGN   9886>>ASSIGN   9894>>ASSIGN
      9910>>ASSIGN   9911>>ASSIGN   9913>>CALLBLT  9913>>CALLBLT  9921>>CALLBLT  9921>>CALLBLT  9924>>ASSIGN
      9935>>ASSIGN   9938>>CALLBLT  9950>>DOINDEX  9950>>DOINDEX  9951>>ASSIGN   9953>>CALLBLT  9965>>CALLBLT
      9998>>ASSIGN  10000>>DOINDEX 10000>>DOINDEX 10008>>IF      10101<<ASSIGN  10101>>ASSIGN  10101>>ASSIGN
     10120>>DOCASE  10190<<ASSIGN  10190>>ASSIGN  10193>>DOWHILE 10195>>DOCASE  10199>>ASSIGN  10201>>ASSIGN
     10208>>ASSIGN  10222>>ASSIGN  10224>>ASSIGN  10231>>ASSIGN  10246>>ASSIGN  10247>>ASSIGN  10249>>CALLBLT
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:342  
     10249>>CALLBLT 10256>>CALLBLT 10256>>CALLBLT 10259>>ASSIGN  10269>>ASSIGN  10272>>CALLBLT 10283>>DOINDEX
     10283>>DOINDEX 10284>>ASSIGN  10286>>CALLBLT 10297>>CALLBLT 10313>>ASSIGN  10314>>DOINDEX 10314>>DOINDEX
     10319>>IF      10339>>IF      10398>>ASSIGN  10401>>CALLBLT 10410>>ASSIGN  10413>>CALLBLT 10422>>IF
     10422>>IF      10422>>IF      10450<<ASSIGN  10450>>ASSIGN  10450>>ASSIGN  10469>>DOCASE  10527<<ASSIGN
     10527>>ASSIGN  10529>>DOWHILE 10532>>DOCASE  10535>>ASSIGN  10537>>ASSIGN  10559>>ASSIGN  10561>>ASSIGN
     10581>>ASSIGN  10582>>CALLBLT 10582>>CALLBLT 10584>>ASSIGN  10593>>CALLBLT 10596>>ASSIGN  10606>>ASSIGN
     10607>>DOINDEX 10607>>DOINDEX 10610>>CALLBLT 10621>>CALLBLT 10635<<ASSIGN  10635>>ASSIGN  10635>>ASSIGN
     10666<<ASSIGN  10666>>ASSIGN  10669>>DOWHILE 10670>>DOCASE  10895>>ASSIGN  10908>>CALL    10978>>ASSIGN
     11020>>ASSIGN  11040>>ASSIGN  11044>>ASSIGN  11046>>CALLBLT 11046>>CALLBLT 11061>>ASSIGN  11067>>CALLBLT
     11082>>ASSIGN  11084>>CALLBLT 11085>>DOINDEX 11085>>DOINDEX 11109>>ASSIGN  11110>>ASSIGN  11176>>ASSIGN
     11182>>CALLBLT 11188>>ASSIGN  11194>>CALLBLT 11199<<ASSIGN  11199>>ASSIGN  11199>>ASSIGN  11315<<ASSIGN
     11315>>ASSIGN  11317>>DOWHILE 11324>>ASSIGN  11325>>DOCASE  11327>>ASSIGN  11329>>ASSIGN  11331>>ASSIGN
     11332>>ASSIGN  11333>>ASSIGN  11335>>IF      11337>>ASSIGN  11341<<ASSIGN  11341>>ASSIGN  11341>>ASSIGN
     11356>>DOCASE  11358>>ASSIGN  11359>>CALL    11369>>IF      11377>>ASSIGN  11380>>DOINDEX 11380>>DOINDEX
     11381>>CALL    11385>>IF      11397>>IF      11420<<ASSIGN  11420>>ASSIGN  11422>>DOWHILE 11423>>DOCASE
     11426>>ASSIGN  11429>>CALLBLT 11438>>ASSIGN  11441>>CALLBLT 11450>>ASSIGN  11453>>CALLBLT 11462<<ASSIGN
     11462>>ASSIGN  11462>>ASSIGN  11467>>DOCASE
CMD_BASE$
      8605**DCL      9684<<ASSIGN   9708>>ASSIGN
CMD_READ
      9702**LABEL    9696--REMEMBR  9706--CALLALT  9726--GOTO     9759--GOTO
COMPNOREL_FMT
      8844**DCL      8846--DCLINIT
COMPNOREL_VEC
      8846**DCL     11184<>CALL    11196<>CALL
COMPREL_FMT
      8841**DCL      8843--DCLINIT
COMPREL_VEC
      8843**DCL     10862<>CALL    10875<>CALL    10887<>CALL    11183<>CALL    11195<>CALL
CONFIG$
      8608**DCL      9689<<ASSIGN   9872>>ASSIGN   9897>>ASSIGN   9898>>ASSIGN   9924>>ASSIGN   9969>>ASSIGN
     10211>>ASSIGN  10234>>ASSIGN  10235>>ASSIGN  10259>>ASSIGN  10301>>ASSIGN  10548>>ASSIGN  10549>>ASSIGN
     10572>>ASSIGN  10596>>ASSIGN  10624>>ASSIGN  10679>>DOINDEX 10711>>DOINDEX 10727>>IF      10759>>ASSIGN
     10759>>ASSIGN  10759>>ASSIGN  10759>>ASSIGN  10764>>DOINDEX 10764>>DOINDEX 10766>>ASSIGN  10789>>ASSIGN
     10789>>ASSIGN  10789>>ASSIGN  10789>>ASSIGN  10789>>ASSIGN  10789>>ASSIGN  10789>>ASSIGN  10789>>ASSIGN
     10789>>ASSIGN  10799>>DOINDEX 10799>>DOINDEX 10801>>ASSIGN  10855>>DOINDEX
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:343  
CONFIG_ERR IN PROCEDURE EXEC_DISP
     11204**LABEL   10674--CALLALT 10675--CALLALT 10676--CALLALT 10849--CALLALT 10850--CALLALT 10851--CALLALT
CONFIG_ERR IN PROCEDURE EXEC_PART
     10106**LABEL    9870--CALLALT  9871--CALLALT  9874--CALLALT  9875--CALLALT  9895--CALLALT  9896--CALLALT
      9900--CALLALT  9901--CALLALT  9922--CALLALT  9923--CALLALT  9926--CALLALT  9927--CALLALT  9967--CALLALT
      9968--CALLALT  9971--CALLALT  9972--CALLALT
CONFIG_ERR IN PROCEDURE EXEC_RET
     10455**LABEL   10209--CALLALT 10210--CALLALT 10213--CALLALT 10214--CALLALT 10232--CALLALT 10233--CALLALT
     10237--CALLALT 10238--CALLALT 10257--CALLALT 10258--CALLALT 10261--CALLALT 10262--CALLALT 10299--CALLALT
     10300--CALLALT 10303--CALLALT 10304--CALLALT
CONFIG_ERR IN PROCEDURE EXEC_SET
     10639**LABEL   10543--CALLALT 10546--CALLALT 10556--CALLALT 10567--CALLALT 10570--CALLALT 10579--CALLALT
     10590--CALLALT 10594--CALLALT 10603--CALLALT 10618--CALLALT 10622--CALLALT 10632--CALLALT
CONFIG_FILE
      8934**DCL      7593--DCLINIT
CONFIG_KEY
      8789**DCL      7747--DCLINIT  7748--DCLINIT  8387--DCLINIT
CONFIG_KEY.COUNT
      8790**DCL      9868<<ASSIGN   9893<<ASSIGN   9919<<ASSIGN   9963<<ASSIGN  10207<<ASSIGN  10230<<ASSIGN
     10254<<ASSIGN  10295<<ASSIGN  10544<<ASSIGN  10568<<ASSIGN  10591<<ASSIGN  10619<<ASSIGN  10672<<ASSIGN
     10847<<ASSIGN  10897<<ASSIGN  10904<<ASSIGN  11251<<ASSIGN
CONFIG_KEY.TEXT
      8791**DCL      9869<<ASSIGN   9894<<ASSIGN   9920<<ASSIGN   9921<<CALLBLT  9964<<ASSIGN   9965<<CALLBLT
     10208<<ASSIGN  10231<<ASSIGN  10255<<ASSIGN  10256<<CALLBLT 10296<<ASSIGN  10297<<CALLBLT 10545<<ASSIGN
     10569<<ASSIGN  10592<<ASSIGN  10593<<CALLBLT 10620<<ASSIGN  10621<<CALLBLT 10673<<ASSIGN  10848<<ASSIGN
     10898<<ASSIGN  10905<<ASSIGN  11252<<ASSIGN
CURUTS
      8621**DCL      8284--DCLINIT 10440>>ASSIGN
CUR_UTS
      8280**DCL     10439<>CALL
CUR_UTS.V
      8284**DCL      8280--DCLINIT
DEV.DEVNM
      9527**DCL     11397>>IF      11398--CALL
DEV.THRESH_RATE
      9526**DCL     11398--CALL
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:344  
DEV$
      8727**DCL      9522--IMP-PTR 11393<<ASSIGN  11394>>IF      11397>>IF      11398>>CALL    11398>>CALL
DEVHIST
      8077**DCL      7844--DCLINIT
DEVNAME
      8730**DCL     10425<<ASSIGN  10438>>IF
DEVNAME IN PROCEDURE FIND_CHANNEL
     11231**DCL     11229--PROC    11241>>IF      11241>>IF      11241>>IF      11241>>IF      11241>>IF
     11241>>IF      11247>>ASSIGN  11252>>ASSIGN  11255>>IF      11255>>IF
DEVNOTPART_FMT
      8811**DCL      8813--DCLINIT
DEVNOTPART_VEC
      8813**DCL     10754<>CALL    10841<>CALL    11015<>CALL    11057<>CALL
DEVPART_FMT
      8814**DCL      8816--DCLINIT
DEVPART_VEC
      8816**DCL     10751<>CALL    10834<>CALL    11010<>CALL    11056<>CALL
DEVREC
      8701**DCL     11254<<ASSIGN
DEVREC.IOCHAN.CHAN
      8708**DCL     11264>>ASSIGN
DEVREC.IOCHAN.IOM
      8707**DCL     11263>>IF
DEVREC.MPCNAME
      8704**DCL     11257>>ASSIGN  11258>>IF      11258>>IF      11259>>ASSIGN
DEVTHRESH_FMT
      8851**DCL      8850--DCLINIT
DEVTHRESH_VEC
      8850**DCL     11370<>CALL    11398<>CALL
DISP_ERR IN PROCEDURE EXEC_DISP
     11214**LABEL   10768--CALLALT 10803--CALLALT 10980--CALLALT 11022--CALLALT 11042--CALLALT 11063--CALLALT
     11088--CALLALT 11178--CALLALT 11190--CALLALT
DO_REL IN PROCEDURE EXEC_DISP
     10853**LABEL   10845--GOTO
DPNOTPART_FMT
      8829**DCL      8831--DCLINIT
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:345  
DPNOTPART_VEC
      8831**DCL     10839<>CALL    11014<>CALL
DPPART_FMT
      8832**DCL      8834--DCLINIT
DPPART_VEC
      8834**DCL     10832<>CALL    11009<>CALL
DS_RESULTS
      8884**DCL      7483--DCLINIT  9680<<ASSIGN   9686<<ASSIGN   9690>>ASSIGN   9691>>ASSIGN
DS_RESULTS.PTR$
      8886**DCL      9683>>ASSIGN   9684>>ASSIGN   9689>>ASSIGN
DS_RESULTS.W2
      8885**DCL      8886--REDEF
DS_RESULTS.W2.SEGID#
      8886**DCL      9681<<ASSIGN   9687<<ASSIGN
EL$THRESHSET
      8773**DCL      8332--DCLINIT  8334--DCLINIT
EL$THRESHSET.CODE
      8773**DCL     11324<<ASSIGN
EL$THRESHSET.DEVNAME
      8773**DCL      8773--REDEF   11329<<ASSIGN  11337<<ASSIGN
EL$THRESHSET.IOM.HICHAN
      8773**DCL     11333<<ASSIGN
EL$THRESHSET.IOM.IOM#
      8773**DCL     11327<<ASSIGN  11331<<ASSIGN
EL$THRESHSET.IOM.LOCHAN
      8773**DCL     11332<<ASSIGN
EL$THRESHSET.THRESH
      8774**DCL     11323<<CALLBLT
ELF_DATA
      8104**DCL      8180--DCLINIT
EXEC_DISP
     10663**PROC     9716--CALL
EXEC_DISP_THRESH IN PROCEDURE EXEC_THRESH
     11354**PROC    11320--CALL
EXEC_END
     11411**PROC     9722--CALL     9762--CALL
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:346  
EXEC_PART
      9848**PROC     9712--CALL
EXEC_REL
     11418**PROC     9724--CALL
EXEC_RET
     10188**PROC     9714--CALL
EXEC_SET
     10524**PROC     9720--CALL
EXEC_THRESH
     11311**PROC     9718--CALL
F$DCB.ACTPOS
      9403**DCL      9403--REDEF
F$DCB.ARS#
      9362**DCL      9362--REDEF
F$DCB.ATTR#
      9392**DCL      9392--REDEF    9394--REDEF
F$DCB.BORROW
      9414**DCL      9414--REDEF    9414--REDEF    9414--REDEF
F$DCB.DCBNAME.L
      9433**DCL      9433--IMP-SIZ
F$DCB.EOMCHAR#
      9369**DCL      9370--REDEF
F$DCB.FCD#
      9384**DCL     10106>>IF      10426>>IF      10446>>IF      10455>>IF      10542>>IF      10555>>IF
     10566>>IF      10578>>IF      10589>>IF      10602>>IF      10617>>IF      10631>>IF      10639>>IF
     10973>>IF      11204>>IF
F$DCB.FLDID
      9406**DCL      9407--REDEF
F$DCB.FORM$
      9398**DCL      9398--REDEF
F$DCB.FSECT
      9421**DCL      9421--REDEF
F$DCB.FSN#
      9388**DCL      9388--REDEF    9388--REDEF    9389--REDEF
F$DCB.HEADER$
      9397**DCL      9398--REDEF
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:347  
F$DCB.IXTNSIZE#
      9394**DCL      9395--REDEF
F$DCB.LASTSTA$
      9378**DCL      9378--REDEF
F$DCB.LVL
      9415**DCL      9415--REDEF
F$DCB.NAME#.C
      9378**DCL      9379--REDEF
F$DCB.NOEOF
      9410**DCL      9410--REDEF
F$DCB.NRECS#
      9395**DCL      9395--REDEF
F$DCB.NRECX
      9422**DCL      9422--REDEF
F$DCB.OHDR
      9411**DCL      9411--REDEF
F$DCB.ORG#
      9386**DCL      9387--REDEF
F$DCB.PRECNO
      9419**DCL      9419--REDEF
F$DCB.RCSZ
      9427**DCL      9427--REDEF
F$DCB.RES#
      9380**DCL      9380--REDEF
F$DCB.SETX
      9399**DCL      9399--REDEF
F$DCB.TAB$
      9398**DCL      9398--REDEF
F$DCB.TDA
      9418**DCL      9419--REDEF
F$DCB.WSN#
      9380**DCL      9381--REDEF
FEPLEN
      8645**DCL     10734<<ASSIGN  10736<<ASSIGN  10737<<ASSIGN  10738>>ASSIGN  10740>>CALLBLT
FIND_CHANNEL
     11229**PROC    10908--CALL
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:348  
FIX_PART IN PROCEDURE EXEC_DISP
     11217**PROC    10699--CALL    10718--CALL    10749--CALL    10780--CALL    10829--CALL    11006--CALL
     11034--CALL    11055--CALL    11076--CALL    11100--CALL
FOUND_IT IN PROCEDURE EXEC_RET
     10444**LABEL   10441--GOTO
FPT_EXIT
      8299**DCL      9730<>CALL    11415<>CALL
FPT_EXIT.V
      8299**DCL      8299--DCLINIT
FPT_EXIT.V.STEPCC#
      8300**DCL      8300--REDEF    9790<<ASSIGN
FPT_INT
      8540**DCL      9697<>CALL
FPT_INT.V
      8540**DCL      8540--DCLINIT
FPT_MONINFO
      8592**DCL      9698<>CALL
FPT_PRIV
      8348**DCL      9672<>CALL     9673<>CALL
FPT_PRIV.V
      8348**DCL      8348--DCLINIT
GDS_FPT
      7483**DCL      9682<>CALL     9688<>CALL
GDS_FPT.V
      7483**DCL      7483--DCLINIT
GET_PGLIST
      8509**DCL     11119<>CALL    11128<>CALL
GET_PGLIST.V
      8510**DCL      8509--DCLINIT
GET_PGLIST.V.HIGHPP#
      8510**DCL     11113<<ASSIGN  11127<<ASSIGN
GET_PGLIST.V.LOWPP#
      8511**DCL     11112<<ASSIGN  11126<<ASSIGN
GET_PGLIST.V.MAXPGS#
      8511**DCL     11111<<ASSIGN
GOODPP_FPT.V
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:349  
      8428**DCL      8428--DCLINIT
HEADREC
      8657**DCL     10901<<ASSIGN
HEADREC.NUMIOMS
      8659**DCL     10902>>DOINDEX
HEAD_KEY
      8721**DCL      7908--DCLINIT  7909--DCLINIT
HIPAGE
      8622**DCL     11110<<ASSIGN  11113>>ASSIGN  11114>>ASSIGN  11117>>IF      11117<<ASSIGN  11125>>DOINDEX
     11169>>IF
I
      8610**DCL      9950<<DOINDEX  9952>>ASSIGN   9955>>CALLBLT  9969>>ASSIGN   9986<<DOINDEX  9987>>ASSIGN
     10000<<DOINDEX 10001<>CALL    10003>>ASSIGN  10006>>ASSIGN  10008>>IF      10028>>ASSIGN  10030>>ASSIGN
     10045>>ASSIGN  10047>>ASSIGN  10070<<DOINDEX 10122<<ASSIGN  10124<<ASSIGN  10126<<ASSIGN  10128<<ASSIGN
     10130<<ASSIGN  10132<<ASSIGN  10134<>CALL    10283<<DOINDEX 10285>>ASSIGN  10288>>CALLBLT 10301>>ASSIGN
     10314<<DOINDEX 10315>>ASSIGN  10319>>IF      10333>>ASSIGN  10335>>ASSIGN  10339>>IF      10355>>ASSIGN
     10357>>ASSIGN  10360<>CALL    10437<<DOINDEX 10438>>IF      10440>>ASSIGN  10471<<ASSIGN  10473<<ASSIGN
     10475<<ASSIGN  10477<<ASSIGN  10479<<ASSIGN  10481<<ASSIGN  10483<<ASSIGN  10485<<ASSIGN  10487<>CALL
     10526<<ASSIGN  10530<<ASSIGN  10530>>ASSIGN  10531>>ASSIGN  10679<<DOINDEX 10680>>ASSIGN  10682>>CALLBLT
     10711<<DOINDEX 10712>>ASSIGN  10717>>CALLBLT 10728<<DOINDEX 10729>>ASSIGN  10734>>IF      10736>>IF
     10740>>CALLBLT 10764<<DOINDEX 10766>>ASSIGN  10799<<DOINDEX 10801>>ASSIGN  10855<<DOINDEX 10856>>ASSIGN
     10861>>CALLBLT 10868<<DOINDEX 10869>>ASSIGN  10874>>CALLBLT 10880<<DOINDEX 10881>>ASSIGN  10886>>CALLBLT
     11085<<DOINDEX 11086>>ASSIGN  11091>>CALLBLT 11125<<DOINDEX 11126>>ASSIGN  11127>>ASSIGN  11129>>IF
     11141>>ASSIGN  11143>>ASSIGN  11154>>ASSIGN  11156>>ASSIGN  11316<<ASSIGN  11318>>ASSIGN  11340<<ASSIGN
     11340>>ASSIGN  11469<<ASSIGN  11471<<ASSIGN  11473<<ASSIGN  11475<>CALL
I IN PROCEDURE FIND_CHANNEL
     11237**DCL     11271<<DOINDEX 11272>>IF      11272>>IF      11273>>ASSIGN
I$
      8724**DCL      9503--IMP-PTR 11358<<ASSIGN  11359>>IF      11359>>CALL    11377<<ASSIGN  11378>>IF
     11379>>ASSIGN
IOM.CHAN$
      9508**DCL     11365>>ASSIGN  11379>>ASSIGN  11393>>ASSIGN
IOM.THRESH_RATE
      9507**DCL     11359--CALL
IOM#
      8647**DCL     10902<<DOINDEX 10903>>CALLBLT 11263>>IF
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:350  
IOM$
      9502**DCL     11358>>ASSIGN  11362>>IF      11365>>ASSIGN  11377>>ASSIGN  11390>>IF      11393>>ASSIGN
IOMNOPART_FMT
      8838**DCL      8840--DCLINIT
IOMNOPART_VEC
      8840**DCL     10722<>CALL    11078<>CALL
IOMPART_FMT
      8835**DCL      8837--DCLINIT
IOMPART_VEC
      8837**DCL     10720<>CALL    11077<>CALL
IOMREC
      8693**DCL     10907<<ASSIGN
IOMREC.DEVNAME
      8694**DCL     11272>>IF      11272>>IF
IOMTHRESH_FMT
      8848**DCL      8847--DCLINIT
IOMTHRESH_VEC
      8847**DCL     11359<>CALL
IOM_NAME
      8646**DCL     10893<<ASSIGN  10903<<CALLBLT 10905>>ASSIGN  10918>>CALLBLT
J
      8611**DCL     10176<<ASSIGN  10177>>DOWHILE 10177>>DOWHILE 10179<<ASSIGN  10179>>ASSIGN  10181>>ASSIGN
     10182>>CALLBLT 10539<<DOINDEX 10540>>ASSIGN  10547>>IF      10563<<DOINDEX 10564>>ASSIGN  10571>>IF
     10586<<DOINDEX 10587>>ASSIGN  10595>>IF      10614<<DOINDEX 10615>>ASSIGN  10623>>IF      10684<<DOINDEX
     10685>>ASSIGN  10690>>CALLBLT 10759<<ASSIGN  10764>>DOINDEX 10789<<ASSIGN  10799>>DOINDEX 10925<<DOINDEX
     10926>>IF      10942>>CALL    10946>>ASSIGN  11361<<DOINDEX 11362>>IF      11365>>ASSIGN  11380<<DOINDEX
     11381--CALL    11381>>CALL    11389<<DOINDEX 11390>>IF      11393>>ASSIGN
K
      8612**DCL     10607<<DOINDEX 10608>>ASSIGN  10612>>CALLBLT 10624>>ASSIGN  11364<<DOINDEX 11365>>ASSIGN
     11392<<DOINDEX 11393>>ASSIGN
L1
      9673**LABEL    9672--CALLALT
L2
      9674**LABEL    9673--CALLALT
LAST_CHAN
      8651**DCL     10924<<ASSIGN  10926>>IF      10936<>CALL    10946<<ASSIGN  10953<>CALL
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:351  
LAST_CMD
      8783**DCL      9739>>IF
LEN
      8649**DCL     10921<>CALL    10922>>CALLBLT 10923>>ASSIGN  10936<>CALL    10937>>CALLBLT 10938>>ASSIGN
     10942<>CALL    10943>>CALLBLT 10944>>ASSIGN  10953<>CALL    10954>>CALLBLT 10955>>ASSIGN
LEN IN PROCEDURE MY_BINCHAR
     11288**DCL     11284--PROC    11299<<ASSIGN  11305<<ASSIGN
LOPAGE
      8623**DCL     11109<<ASSIGN  11112>>ASSIGN  11115>>ASSIGN  11116>>IF      11125>>DOINDEX 11129>>IF
M$BADPP
       710**DCL-ENT 10004--CALL
M$CLOSE
       670**DCL-ENT  9875--CALL     9901--CALL     9927--CALL     9972--CALL    10107--CALL    10214--CALL
     10238--CALL    10262--CALL    10304--CALL    10447--CALL    10456--CALL    10556--CALL    10579--CALL
     10603--CALL    10632--CALL    10640--CALL    10676--CALL    10851--CALL    10974--CALL    11205--CALL
     11413--CALL    11414--CALL
M$CONF
      7420**DCL     10106--IF      10455--IF      10542--IF      10555--IF      10566--IF      10578--IF
     10589--IF      10602--IF      10617--IF      10631--IF      10639--IF      10973--IF      11204--IF
M$CVM
       708**DCL-ENT  9991--CALL    10072--CALL
M$DEVHIST
      7422**DCL     10426--IF      10446--IF
M$EXIT
       682**DCL-ENT  9730--CALL    11415--CALL
M$GBPL
       711**DCL-ENT 11119--CALL    11128--CALL
M$GDS
       705**DCL-ENT  9682--CALL     9688--CALL
M$GOODPP
       710**DCL-ENT 10317--CALL
M$INT
       725**DCL-ENT  9697--CALL
M$MONINFO
       738**DCL-ENT  9698--CALL
M$OPEN
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:352  
       670**DCL-ENT  9678--CALL     9870--CALL     9895--CALL     9922--CALL     9967--CALL    10209--CALL
     10232--CALL    10257--CALL    10299--CALL    10427--CALL    10543--CALL    10567--CALL    10590--CALL
     10618--CALL    10674--CALL    10849--CALL    10899--CALL
M$PROMPT
       694**DCL-ENT  9693--CALL
M$READ
       671**DCL-ENT  9871--CALL     9896--CALL     9923--CALL     9968--CALL    10210--CALL    10233--CALL
     10258--CALL    10300--CALL    10428--CALL    10429--CALL    10546--CALL    10570--CALL    10594--CALL
     10622--CALL    10675--CALL    10850--CALL    10900--CALL    10906--CALL    11253--CALL
M$RPRIV
       729**DCL-ENT  9672--CALL
M$SAD
       709**DCL-ENT  9980--CALL
M$SI
      7417**DCL      9668--ASSIGN
M$SI$
      8602**DCL      9668<<ASSIGN
M$SPRIV
       729**DCL-ENT  9671--CALL     9673--CALL
M$SYSCON
       721**DCL-ENT  9863--CALL     9888--CALL     9915--CALL     9940--CALL     9958--CALL    10203--CALL
     10226--CALL    10251--CALL    10274--CALL    10291--CALL    10402--CALL    10414--CALL    10541--CALL
     10565--CALL    10588--CALL    10616--CALL    10687--CALL    10713--CALL    10731--CALL    10768--CALL
     10803--CALL    10857--CALL    10870--CALL    10882--CALL    10980--CALL    11022--CALL    11042--CALL
     11063--CALL    11088--CALL    11178--CALL    11190--CALL    11430--CALL    11442--CALL    11454--CALL
M$TIME
       737**DCL-ENT 10439--CALL
M$WRITE
       671**DCL-ENT  9874--CALL     9900--CALL     9926--CALL     9971--CALL    10213--CALL    10237--CALL
     10261--CALL    10303--CALL    10445--CALL
M$WRSYSLOG
       719**DCL-ENT 11339--CALL
MAINT_KEY
      8722**DCL      7951--DCLINIT  7952--DCLINIT  7993--DCLINIT
MM$
      8633**DCL      9533--IMP-PTR  9997<<ASSIGN  10009>>IF      10012>>IF      10055>>IF
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:353  
MM$PPUT.SUSPECT
      9534**DCL     10009>>IF      10012>>IF      10055>>IF
MM$PPUT.USER#
      9543**DCL      9544--REDEF
MPC$
      8726**DCL      9516--IMP-PTR 11365<<ASSIGN  11366>>IF      11369>>IF      11370>>CALL    11370>>CALL
MPC1.DEVNM
      9521**DCL     11369>>IF      11370--CALL
MPC1.THRESH_RATE
      9520**DCL     11370--CALL
MPCNOTPART_FMT
      8823**DCL      8825--DCLINIT
MPCNOTPART_VEC
      8825**DCL     10785<>CALL    11036<>CALL
MPCPART_FMT
      8826**DCL      8828--DCLINIT
MPCPART_VEC
      8828**DCL     10782<>CALL    11035<>CALL
MY_BINCHAR
     11284**PROC    10921--CALL    10936--CALL    10942--CALL    10953--CALL
N IN PROCEDURE EXEC_THRESH
     11341**LABEL   11321--GOTO
NEXTCHAN IN PROCEDURE EXEC_DISP
     10708**LABEL   10687--CALLALT
NEXT_PART IN PROCEDURE EXEC_PART
     10101**LABEL   10109--GOTO    10136--GOTO
NEXT_REL IN PROCEDURE EXEC_REL
     11462**LABEL   11477--GOTO
NEXT_RET IN PROCEDURE EXEC_RET
     10422**LABEL   10447--CALLALT 10458--GOTO    10488--GOTO
NEXT_SET IN PROCEDURE EXEC_SET
     10635**LABEL   10642--GOTO
NO_BADPPS IN PROCEDURE EXEC_DISP
     11165**LABEL   11123--GOTO
NO_CHANS IN PROCEDURE EXEC_DISP
     10958**LABEL   10908--CALLALT
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:354  
NO_MEMORY
      9729**LABEL    9682--CALLALT  9688--CALLALT
NUM IN PROCEDURE FIND_CHANNEL
     11232**DCL     11229--PROC    11239<<ASSIGN  11265<<ASSIGN  11273>>ASSIGN  11274<<ASSIGN  11274>>ASSIGN
     11277>>IF
NUM IN PROCEDURE MY_BINCHAR
     11286**DCL     11284--PROC    11294>>IF      11297>>CALLBLT 11303>>CALLBLT
NUMDEVS
      8729**DCL     10430<<ASSIGN  10437>>DOINDEX 10444>>ASSIGN
NUM_CHANS
      8654**DCL     10908<>CALL    10917>>ASSIGN  10925>>DOINDEX
O$BLK.CODE
      9164**DCL     10538>>ASSIGN  10540>>ASSIGN  10547>>IF      10562>>ASSIGN  10564>>ASSIGN  10571>>IF
     10585>>ASSIGN  10587>>ASSIGN  10595>>IF      10613>>ASSIGN  10615>>ASSIGN  10623>>IF
O$BLK.NSUBLKS
      9168**DCL     10538>>ASSIGN  10539>>DOINDEX 10562>>ASSIGN  10563>>DOINDEX 10585>>ASSIGN  10586>>DOINDEX
     10613>>ASSIGN  10614>>DOINDEX 11319>>IF
O$BLK.SUBLK$
      9189**DCL     10531>>ASSIGN  10538>>ASSIGN  10540>>ASSIGN  10547>>IF      10562>>ASSIGN  10564>>ASSIGN
     10571>>IF      10585>>ASSIGN  10587>>ASSIGN  10595>>IF      10613>>ASSIGN  10615>>ASSIGN  10623>>IF
     11318>>ASSIGN  11323>>CALLBLT 11323>>CALLBLT
O$SYM.COUNT
      9225**DCL      9228--IMP-SIZ 11323>>CALLBLT
O$SYM.TEXT
      9228**DCL     11323>>CALLBLT
OPEN_CONFIG
      7592**DCL      9870<>CALL     9895<>CALL     9922<>CALL     9967<>CALL    10209<>CALL    10232<>CALL
     10257<>CALL    10299<>CALL    10543<>CALL    10567<>CALL    10590<>CALL    10618<>CALL    10674<>CALL
     10849<>CALL    10899<>CALL
OPEN_CONFIG.ACSVEH_
      7594**DCL      7595--REDEF
OPEN_CONFIG.ALTKEYS_
      7600**DCL      7601--REDEF    7601--REDEF
OPEN_CONFIG.HDR_
      7599**DCL      7600--REDEF
OPEN_CONFIG.TAB_
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:355  
      7598**DCL      7599--REDEF
OPEN_CONFIG.UHL_
      7592**DCL      7593--REDEF    7593--REDEF
OPEN_CONFIG.V
      7601**DCL      7592--DCLINIT
OPEN_CONFIG.V.FSN#
      7632**DCL      7632--REDEF    7632--REDEF
OPEN_CONFIG.WSN_
      7598**DCL      7598--REDEF
OPEN_DEVHIST
      7843**DCL     10427<>CALL
OPEN_DEVHIST.ACSVEH_
      7845**DCL      7846--REDEF
OPEN_DEVHIST.ALTKEYS_
      7851**DCL      7852--REDEF    7852--REDEF
OPEN_DEVHIST.HDR_
      7850**DCL      7851--REDEF
OPEN_DEVHIST.TAB_
      7849**DCL      7850--REDEF
OPEN_DEVHIST.UHL_
      7843**DCL      7844--REDEF    7844--REDEF
OPEN_DEVHIST.V
      7852**DCL      7843--DCLINIT
OPEN_DEVHIST.V.FSN#
      7883**DCL      7883--REDEF    7883--REDEF
OPEN_DEVHIST.WSN_
      7849**DCL      7849--REDEF
OPEN_ELF_DATA
      8179**DCL      9678<>CALL
OPEN_ELF_DATA.ACSVEH_
      8181**DCL      8182--REDEF
OPEN_ELF_DATA.ALTKEYS_
      8187**DCL      8188--REDEF    8188--REDEF
OPEN_ELF_DATA.HDR_
      8186**DCL      8187--REDEF
OPEN_ELF_DATA.TAB_
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:356  
      8185**DCL      8186--REDEF
OPEN_ELF_DATA.UHL_
      8179**DCL      8180--REDEF    8180--REDEF
OPEN_ELF_DATA.V
      8188**DCL      8179--DCLINIT
OPEN_ELF_DATA.V.FSN#
      8219**DCL      8219--REDEF    8219--REDEF
OPEN_ELF_DATA.WSN_
      8185**DCL      8185--REDEF
PAGE1BAD_FMT
      8865**DCL      8867--DCLINIT
PAGE1BAD_VEC
      8867**DCL     11151<>CALL    11161<>CALL
PAGE1GOOD_FMT
      8862**DCL      8864--DCLINIT
PAGE1GOOD_VEC
      8864**DCL     11138<>CALL    11166<>CALL
PAGEBAD_FMT
      8859**DCL      8861--DCLINIT
PAGEBAD_VEC
      8861**DCL     11153<>CALL    11163<>CALL
PAGEGOOD_FMT
      8856**DCL      8858--DCLINIT
PAGEGOOD_VEC
      8858**DCL     11140<>CALL    11168<>CALL
PAGE_ERR IN PROCEDURE EXEC_RET
     10339**LABEL   10317--CALLALT
PARSE_ERR
      9738**LABEL    9704--CALLALT
PART
      8802**DCL     10701--CALL    10705--CALL    10720--CALL    10722--CALL    10751--CALL    10754--CALL
     10782--CALL    10785--CALL    10832--CALL    10834--CALL    10839--CALL    10841--CALL    11009--CALL
     11010--CALL    11014--CALL    11015--CALL    11035--CALL    11036--CALL    11056--CALL    11057--CALL
     11077--CALL    11078--CALL    11101--CALL    11103--CALL
PART.T
      8804**DCL     11219<<ASSIGN  11220<<ASSIGN  11221<<ASSIGN  11222<<ASSIGN  11223<<ASSIGN
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:357  
PART_ERR IN PROCEDURE EXEC_PART
     10118**LABEL    9863--CALLALT  9888--CALLALT  9915--CALLALT  9940--CALLALT  9958--CALLALT 10004--CALLALT
PATH IN PROCEDURE CHNGAARD
      9768**DCL      9766--PROC     9781>>IF       9785>>IF
PATH_BUF
      8719**DCL     10895<<ASSIGN  10910<<CALLBLT 10914<<CALLBLT 10918<<CALLBLT 10922<<CALLBLT 10934<<CALLBLT
     10937<<CALLBLT 10940<<CALLBLT 10943<<CALLBLT 10951<<CALLBLT 10954<<CALLBLT 10960<<CALLBLT 10963>>ASSIGN
PATH_ERR IN PROCEDURE EXEC_DISP
     10967**LABEL   10899--CALLALT 10900--CALLALT 10906--CALLALT
PGLIST
      8525**DCL      8509--DCLINIT  8510--DCLINIT
PGLIST.NPAGES#
      8525**DCL     11120>>IF      11130>>IF      11132>>IF
PP
      8635**DCL      9987<<ASSIGN   9988>>ASSIGN
PPRIV
      8363**DCL      9671<>CALL
PPRIV.V
      8363**DCL      8363--DCLINIT
PPUT$
      8638**DCL      8639--REDEF    9983>>ASSIGN   9995<<ASSIGN  10006>>ASSIGN  10054>>ASSIGN
PPUT36
      8632**DCL      9997--ASSIGN  10006<<ASSIGN  10054<<ASSIGN
PPUTPTR.SEGID
      8642**DCL      9982<<ASSIGN
PPUT_CVM
      8473**DCL      9991<>CALL    10072<>CALL
PPUT_CVM.V
      8473**DCL      8473--DCLINIT
PPUT_CVM.V.PHYSICAL#
      8473**DCL      9990<<ASSIGN
PPUT_CVM.V.PPNO#
      8474**DCL      9988<<ASSIGN  10069<<ASSIGN
PPUT_CVM.V.VPNO#
      8475**DCL      9989<<ASSIGN  10071<<ASSIGN
PPUT_DESC
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:358  
      8636**DCL      9983<<ASSIGN   9986>>DOINDEX  9986>>DOINDEX  9986>>DOINDEX 10070>>DOINDEX 10070>>DOINDEX
     10070>>DOINDEX
PPUT_OFFSET
      8637**DCL      9984<<ASSIGN   9985>>ASSIGN   9995>>ASSIGN  10068>>ASSIGN
PROMPT_FPT
      7506**DCL      9693<>CALL
PROMPT_FPT.V
      7514**DCL      7508--DCLINIT
P_PCB
      8969**DCL      9292--DCLINIT  9706<>CALL
P_PCB.ERROR.CODE
      9081**DCL      9738>>IF
P_PCB.HI_CHAR
      9120**DCL      9749>>CALLBLT
P_PCB.OUT$
      8982**DCL      9704<>CALL    10531>>ASSIGN  11318>>ASSIGN
RANGE_FLAG
      8655**DCL     10920<<ASSIGN  10927<<ASSIGN  10930>>IF      10933<<ASSIGN  10948>>IF
READ_CMD_FPT.STATION_
      7450**DCL      7451--REDEF
READ_CMD_FPT.V
      7451**DCL      7447--DCLINIT
READ_CMD_FPT.V.DVBYTE.REREAD#
      7462**DCL      7462--REDEF
READ_CMD_FPT.V.INDX#
      7460**DCL      7460--REDEF
READ_CONFIG
      7747**DCL      9871<>CALL     9896<>CALL     9923<>CALL     9968<>CALL    10210<>CALL    10233<>CALL
     10258<>CALL    10300<>CALL    10546<>CALL    10570<>CALL    10594<>CALL    10622<>CALL    10675<>CALL
     10850<>CALL    10900<>CALL    10906<>CALL    11253<>CALL
READ_CONFIG.BUF_
      7749**DCL      9690<<ASSIGN
READ_CONFIG.BUF_.BUF$
      7750**DCL     10901>>ASSIGN  10907>>ASSIGN  11254>>ASSIGN
READ_CONFIG.STATION_
      7750**DCL      7751--REDEF
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:359  
READ_CONFIG.V
      7751**DCL      7747--DCLINIT
READ_CONFIG.V.DVBYTE.REREAD#
      7762**DCL      7762--REDEF
READ_CONFIG.V.INDX#
      7760**DCL      7760--REDEF
READ_DEVHIST_HEAD
      7908**DCL     10428<>CALL
READ_DEVHIST_HEAD.STATION_
      7911**DCL      7912--REDEF
READ_DEVHIST_HEAD.V
      7912**DCL      7908--DCLINIT
READ_DEVHIST_HEAD.V.DVBYTE.REREAD#
      7923**DCL      7923--REDEF
READ_DEVHIST_HEAD.V.INDX#
      7921**DCL      7921--REDEF
READ_DEVHIST_MAINT
      7951**DCL     10429<>CALL
READ_DEVHIST_MAINT.STATION_
      7954**DCL      7955--REDEF
READ_DEVHIST_MAINT.V
      7955**DCL      7951--DCLINIT
READ_DEVHIST_MAINT.V.DVBYTE.REREAD#
      7966**DCL      7966--REDEF
READ_DEVHIST_MAINT.V.INDX#
      7964**DCL      7964--REDEF
REL_ERR IN PROCEDURE EXEC_REL
     11466**LABEL   11430--CALLALT 11442--CALLALT 11454--CALLALT
RESULTS
      8900**DCL      8491--DCLINIT
RESULTS.BOOTINFO
      8902**DCL      9866>>IF       9891>>IF       9961>>IF
RESULTS.BOOTINFO.ERR#
      8903**DCL      9788>>IF
RESULTS.BOOTINFO.NEW#
      8903**DCL      9780>>IF
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:360  
RESULTS.BOOTINFO.NEWCHAN#
      8905**DCL      9777>>CALLBLT
RESULTS.BOOTINFO.NEWIOM#
      8905**DCL      9775>>CALLBLT
RESULTS.BOOTINFO.OLD#
      8903**DCL      9784>>IF
RESULTS.BOOTINFO.OLDCHAN#
      8904**DCL      9772>>CALLBLT
RESULTS.BOOTINFO.OLDIOM#
      8904**DCL      9770>>CALLBLT
RESULTS.CHECKWRITE#
      8900**DCL     10816>>IF      10993>>IF
RESULTS.MSOSPART#
      8902**DCL     11222>>IF      11223>>IF
RESULTS.PART#
      8900**DCL     10700>>IF      10719>>IF      10750>>IF      10781>>IF      10830>>IF      11007>>IF
     11035>>IF      11056>>IF      11077>>IF      11101>>IF      11220>>IF
RESULTS.RELEASED#
      8901**DCL     10858>>IF      10871>>IF      10883>>IF      11183>>IF      11195>>IF
RESULTS.SYSCONPART#
      8901**DCL     11221>>IF      11223>>IF
RESULTS.TDOK#
      8900**DCL     10691>>IF      10741>>IF      10772>>IF      10807>>IF      10984>>IF      11026>>IF
     11047>>IF      11068>>IF      11092>>IF
RETURNOK.PREVIOUS
      8629**DCL     10320<<ASSIGN  10322>>IF      10324<<ASSIGN  10340<<ASSIGN  10344>>IF      10346<<ASSIGN
     10377>>IF
RET_ERR IN PROCEDURE EXEC_RET
     10467**LABEL   10203--CALLALT 10226--CALLALT 10251--CALLALT 10274--CALLALT 10291--CALLALT 10361--GOTO
     10402--CALLALT 10414--CALLALT
SCRATCH.TEXT IN PROCEDURE STUFF_BUF
     10172**DCL     10175<<CALLBLT 10177>>DOWHILE 10177--DOWHILE 10181--ASSIGN  10182>>CALLBLT
SEE_MON_LS.V
      8458**DCL      8458--DCLINIT
SEE_PPUT_LS
      8443**DCL      9980<>CALL
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:361  
SEE_PPUT_LS.V
      8443**DCL      8443--DCLINIT
STUFF_BUF
     10165**PROC    10001--CALL    10020--CALL    10025--CALL    10037--CALL    10042--CALL    10052--CALL
     10053--CALL    10325--CALL    10330--CALL    10347--CALL    10352--CALL    10360--CALL    10375--CALL
     10376--CALL
SUB_BUF_1
      8793**DCL     10001<>CALL    10020<>CALL    10037<>CALL    10052<>CALL    10325<>CALL    10347<>CALL
     10360<>CALL    10375<>CALL    10701--CALL    10705--CALL    10720--CALL    10722--CALL    10751--CALL
     10754--CALL    10782--CALL    10785--CALL    10832--CALL    10834--CALL    10839--CALL    10841--CALL
     10862--CALL    10875--CALL    10887--CALL    11009--CALL    11010--CALL    11014--CALL    11015--CALL
     11035--CALL    11036--CALL    11056--CALL    11057--CALL    11077--CALL    11078--CALL    11101--CALL
     11103--CALL    11183--CALL    11184--CALL    11195--CALL    11196--CALL
SUB_BUF_1.COUNT
      8794**DCL      9750<<ASSIGN   9773<<ASSIGN   9860<<ASSIGN   9885<<ASSIGN   9911<<ASSIGN   9936<<ASSIGN
      9954<<ASSIGN  10200<<ASSIGN  10223<<ASSIGN  10247<<ASSIGN  10270<<ASSIGN  10287<<ASSIGN  10399<<ASSIGN
     10411<<ASSIGN  10534<<ASSIGN  10558<<ASSIGN  10581<<ASSIGN  10609<<ASSIGN  10681<<ASSIGN  10715<<ASSIGN
     10738<<ASSIGN  10770<<ASSIGN  10805<<ASSIGN  10859<<ASSIGN  10872<<ASSIGN  10884<<ASSIGN  10982<<ASSIGN
     11024<<ASSIGN  11044<<ASSIGN  11065<<ASSIGN  11083<<ASSIGN  11180<<ASSIGN  11192<<ASSIGN  11427<<ASSIGN
     11439<<ASSIGN  11451<<ASSIGN
SUB_BUF_1.TEXT
      8795**DCL      9749<<CALLBLT  9770<<CALLBLT  9771<<ASSIGN   9772<<CALLBLT  9861<<ASSIGN   9886<<ASSIGN
      9912<<ASSIGN   9913<<CALLBLT  9937<<ASSIGN   9938<<CALLBLT  9953<<CALLBLT 10201<<ASSIGN  10224<<ASSIGN
     10248<<ASSIGN  10249<<CALLBLT 10271<<ASSIGN  10272<<CALLBLT 10286<<CALLBLT 10400<<ASSIGN  10401<<CALLBLT
     10412<<ASSIGN  10413<<CALLBLT 10425>>ASSIGN  10535<<ASSIGN  10545>>ASSIGN  10559<<ASSIGN  10569>>ASSIGN
     10582<<CALLBLT 10610<<CALLBLT 10682<<CALLBLT 10716<<ASSIGN  10717<<CALLBLT 10739<<ASSIGN  10740<<CALLBLT
     10771<<ASSIGN  10806<<ASSIGN  10815>>IF      10831>>IF      10838>>IF      10860<<ASSIGN  10861<<CALLBLT
     10873<<ASSIGN  10874<<CALLBLT 10885<<ASSIGN  10886<<CALLBLT 10983<<ASSIGN  10992>>IF      11008>>IF
     11013>>IF      11025<<ASSIGN  11045<<ASSIGN  11046<<CALLBLT 11066<<ASSIGN  11067<<CALLBLT 11084<<CALLBLT
     11181<<ASSIGN  11182<<CALLBLT 11193<<ASSIGN  11194<<CALLBLT 11428<<ASSIGN  11429<<CALLBLT 11440<<ASSIGN
     11441<<CALLBLT 11452<<ASSIGN  11453<<CALLBLT
SUB_BUF_2
      8796**DCL     10025<>CALL    10042<>CALL    10053<>CALL    10330<>CALL    10352<>CALL    10376<>CALL
     10701--CALL    10705--CALL    10751--CALL    10754--CALL    10782--CALL    10785--CALL    10832--CALL
     10834--CALL    10839--CALL    10841--CALL    11009--CALL    11010--CALL    11014--CALL    11015--CALL
     11035--CALL    11036--CALL    11056--CALL    11057--CALL    11101--CALL    11103--CALL
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:362  
SUB_BUF_2.COUNT
      8797**DCL      9778<<ASSIGN   9956<<ASSIGN  10289<<ASSIGN  10611<<ASSIGN  10689<<ASSIGN  10742<<ASSIGN
     10746<<ASSIGN  10773<<ASSIGN  10777<<ASSIGN  10808<<ASSIGN  10812<<ASSIGN  10985<<ASSIGN  10989<<ASSIGN
     11027<<ASSIGN  11031<<ASSIGN  11048<<ASSIGN  11052<<ASSIGN  11069<<ASSIGN  11073<<ASSIGN  11090<<ASSIGN
SUB_BUF_2.TEXT
      8798**DCL      9775<<CALLBLT  9776<<ASSIGN   9777<<CALLBLT  9955<<CALLBLT 10288<<CALLBLT 10612<<CALLBLT
     10690<<CALLBLT 10743<<ASSIGN  10747<<ASSIGN  10774<<ASSIGN  10778<<ASSIGN  10809<<ASSIGN  10813<<ASSIGN
     10986<<ASSIGN  10990<<ASSIGN  11028<<ASSIGN  11032<<ASSIGN  11049<<ASSIGN  11053<<ASSIGN  11070<<ASSIGN
     11074<<ASSIGN  11091<<CALLBLT
SUB_BUF_3
      8799**DCL     10701--CALL    10705--CALL    10832--CALL    10839--CALL    11009--CALL    11010--CALL
     11014--CALL    11015--CALL    11101--CALL    11103--CALL
SUB_BUF_3.COUNT
      8800**DCL     10692<<ASSIGN  10696<<ASSIGN  10817<<ASSIGN  10821<<ASSIGN  10826<<ASSIGN  10994<<ASSIGN
     10998<<ASSIGN  11003<<ASSIGN  11093<<ASSIGN  11097<<ASSIGN
SUB_BUF_3.TEXT
      8801**DCL     10693<<ASSIGN  10697<<ASSIGN  10818<<ASSIGN  10822<<ASSIGN  10827<<ASSIGN  10995<<ASSIGN
     10999<<ASSIGN  11004<<ASSIGN  11094<<ASSIGN  11098<<ASSIGN
SUSPECT
      8625**DCL      8628--REDEF
SUSPECT.PRESENT
      8627**DCL     10012<<ASSIGN  10013<<ASSIGN  10015>>IF
SUSPECT.PREVIOUS
      8626**DCL     10009<<ASSIGN  10010<<ASSIGN  10017>>IF      10019<<ASSIGN  10034>>IF      10036<<ASSIGN
SYSACCT
      8948**DCL      7597--DCLINIT  8184--DCLINIT
SYSCONERR
      8777**DCL     10118<<ASSIGN  10135<>CALL    11466<<ASSIGN  11476<>CALL
SYSCON_ERR IN PROCEDURE EXEC_SET
     10551**LABEL   10541--CALLALT
SYSCON_ERR1 IN PROCEDURE EXEC_SET
     10574**LABEL   10565--CALLALT
SYSCON_ERR2 IN PROCEDURE EXEC_SET
     10598**LABEL   10588--CALLALT
SYSCON_ERR3 IN PROCEDURE EXEC_SET
     10626**LABEL   10616--CALLALT
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:363  
SYSCON_FPT
      8491**DCL      9863<>CALL     9888<>CALL     9915<>CALL     9940<>CALL     9958<>CALL    10203<>CALL
     10226<>CALL    10251<>CALL    10274<>CALL    10291<>CALL    10402<>CALL    10414<>CALL    10541<>CALL
     10565<>CALL    10588<>CALL    10616<>CALL    10687<>CALL    10713<>CALL    10731<>CALL    10768<>CALL
     10803<>CALL    10857<>CALL    10870<>CALL    10882<>CALL    10980<>CALL    11022<>CALL    11042<>CALL
     11063<>CALL    11088<>CALL    11178<>CALL    11190<>CALL    11430<>CALL    11442<>CALL    11454<>CALL
SYSCON_FPT.V
      8491**DCL      8491--DCLINIT
SYSCON_FPT.V.CHAN#
      8493**DCL      9910<<ASSIGN   9952<<ASSIGN  10246<<ASSIGN  10285<<ASSIGN  10584<<ASSIGN  10608<<ASSIGN
     10685<<ASSIGN  10729<<ASSIGN  11040<<ASSIGN  11086<<ASSIGN
SYSCON_FPT.V.COMPONENT#
      8492**DCL      9858<<ASSIGN   9883<<ASSIGN   9909<<ASSIGN   9934<<ASSIGN   9949<<ASSIGN  10198<<ASSIGN
     10221<<ASSIGN  10245<<ASSIGN  10268<<ASSIGN  10282<<ASSIGN  10397<<ASSIGN  10409<<ASSIGN  10536<<ASSIGN
     10560<<ASSIGN  10583<<ASSIGN  10605<<ASSIGN  10678<<ASSIGN  10710<<ASSIGN  10726<<ASSIGN  10758<<ASSIGN
     10788<<ASSIGN  10854<<ASSIGN  10867<<ASSIGN  10879<<ASSIGN  10977<<ASSIGN  11019<<ASSIGN  11039<<ASSIGN
     11060<<ASSIGN  11081<<ASSIGN  11175<<ASSIGN  11187<<ASSIGN  11425<<ASSIGN  11437<<ASSIGN  11449<<ASSIGN
SYSCON_FPT.V.CPU#
      8493**DCL     10398<<ASSIGN  10869<<ASSIGN  11176<<ASSIGN  11438<<ASSIGN
SYSCON_FPT.V.DEVNM#
      8494**DCL      9859<<ASSIGN   9884<<ASSIGN  10199<<ASSIGN  10222<<ASSIGN  10537<<ASSIGN  10561<<ASSIGN
     10766<<ASSIGN  10771>>ASSIGN  10801<<ASSIGN  10805--ASSIGN  10806>>ASSIGN  10978<<ASSIGN  10982--ASSIGN
     10983>>ASSIGN  11020<<ASSIGN  11025>>ASSIGN
SYSCON_FPT.V.FLAG#
      8494**DCL     10540<<ASSIGN  10564<<ASSIGN  10587<<ASSIGN  10615<<ASSIGN
SYSCON_FPT.V.FLAGVAL#
      8495**DCL     10538<<ASSIGN  10548>>ASSIGN  10549>>ASSIGN  10562<<ASSIGN  10572>>ASSIGN  10585<<ASSIGN
     10596>>ASSIGN  10613<<ASSIGN  10624>>ASSIGN
SYSCON_FPT.V.FUNCTION#
      8492**DCL      9851<<ASSIGN  10191<<ASSIGN  10528<<ASSIGN  10667<<ASSIGN  11421<<ASSIGN
SYSCON_FPT.V.IOM#
      8492**DCL      8493--REDEF    8493--REDEF    9935<<ASSIGN   9951<<ASSIGN  10269<<ASSIGN  10284<<ASSIGN
     10606<<ASSIGN  10680<<ASSIGN  10712<<ASSIGN  10856<<ASSIGN  11061<<ASSIGN  11082<<ASSIGN  11426<<ASSIGN
SYSCON_FPT.V.SCU#
      8493**DCL     10410<<ASSIGN  10881<<ASSIGN  11188<<ASSIGN  11450<<ASSIGN
SYSCON_HERE
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:364  
      8805**DCL      8810--DCLINIT  9675<<CALLBLT
SYSCON_HERE_VEC
      8810**DCL      9676<>CALL
SYSCON_PROMPT
      8871**DCL      7512--DCLINIT  9704--CALL
SYSTAC
      8315**DCL      7848--DCLINIT
TD$DEV
      9580**DCL      9873--ASSIGN  10212--ASSIGN  11254>>ASSIGN
TD$DEV.FLAGS.CHECKWRITE
      9592**DCL     10549<<ASSIGN
TD$DEV.FLAGS.DOWN
      9590**DCL      9872<<ASSIGN  10211<<ASSIGN
TD$DEV.FLAGS.TDOK
      9591**DCL     10548<<ASSIGN
TD$HEAD
      9599**DCL     10901>>ASSIGN
TD$HEAD.CONSOLE_INDX
      9614**DCL     10799>>DOINDEX 10799>>DOINDEX
TD$HEAD.DEVNAME
      9632**DCL     10766>>ASSIGN  10801>>ASSIGN
TD$HEAD.NUMAPMPCS
      9609**DCL     10759>>ASSIGN
TD$HEAD.NUMAPS
      9629**DCL     10789>>ASSIGN
TD$HEAD.NUMCONSOLES
      9615**DCL     10789>>ASSIGN
TD$HEAD.NUMCPS
      9621**DCL     10789>>ASSIGN
TD$HEAD.NUMCRS
      9619**DCL     10789>>ASSIGN
TD$HEAD.NUMDISKMPCS
      9607**DCL     10759>>ASSIGN
TD$HEAD.NUMDPS
      9623**DCL     10789>>ASSIGN
TD$HEAD.NUMFEPS
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:365  
      9613**DCL     10727>>IF
TD$HEAD.NUMIOMS
      9601**DCL     10679>>DOINDEX 10711>>DOINDEX 10855>>DOINDEX
TD$HEAD.NUMLPS
      9617**DCL     10789>>ASSIGN
TD$HEAD.NUMMTS
      9625**DCL     10789>>ASSIGN
TD$HEAD.NUMODS
      9631**DCL     10789>>ASSIGN
TD$HEAD.NUMTAPEMPCS
      9605**DCL     10759>>ASSIGN
TD$HEAD.NUMUNITMPCS
      9603**DCL     10759>>ASSIGN
TD$HEAD.NUMXXS
      9627**DCL     10789>>ASSIGN
TD$HEAD.UNITMPC_INDX
      9602**DCL     10764>>DOINDEX 10764>>DOINDEX
TD$IOM
      9550**DCL      9925--ASSIGN   9970--ASSIGN  10260--ASSIGN  10302--ASSIGN  10907>>ASSIGN
TD$IOM.FLAGS.DOWN
      9553**DCL      9924<<ASSIGN   9969<<ASSIGN  10259<<ASSIGN  10301<<ASSIGN
TD$IOM.FLAGS.TDOK
      9554**DCL     10596<<ASSIGN  10624<<ASSIGN
TD$MPC
      9558**DCL      9898--ASSIGN  10235--ASSIGN
TD$MPC.DEVNAME
      9577**DCL      9898--ASSIGN  10235--ASSIGN
TD$MPC.FLAGS.DOWN
      9568**DCL      9897<<ASSIGN  10234<<ASSIGN
TD$MPC.FLAGS.TDOK
      9569**DCL     10572<<ASSIGN
TD$MPC.NUMDEVS
      9566**DCL      9898>>ASSIGN  10235>>ASSIGN
TELL_ELF
      8332**DCL     11339<>CALL
TELL_ELF.V
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:366  
      8332**DCL      8332--DCLINIT
TEMP1 IN PROCEDURE FIND_CHANNEL
     11235**DCL     11247<<ASSIGN  11257<<ASSIGN  11272>>IF
TEMP2 IN PROCEDURE FIND_CHANNEL
     11236**DCL     11248<<ASSIGN  11259<<ASSIGN  11260<<ASSIGN  11272>>IF
TEMP36
      8631**DCL     10006>>ASSIGN  10054>>ASSIGN
TEXTC
      8786**DCL     10965--CALL
TEXTC.CNT
      8787**DCL     10964<<ASSIGN
TEXTC.TXT
      8788**DCL     10963<<ASSIGN
TEXTC_FMT
      8868**DCL      8869--DCLINIT
TEXTC_VEC
      8869**DCL     10965<>CALL
THRESH_ERR IN PROCEDURE EXEC_THRESH
     11347**LABEL   11336--GOTO
TH_HEAD
      8732**DCL      7910--DCLINIT  7911--DCLINIT
TH_HEAD.NUMAPMPCS
      8742**DCL     10430>>ASSIGN
TH_HEAD.NUMAPS
      8762**DCL     10430>>ASSIGN
TH_HEAD.NUMCONSOLES
      8748**DCL     10430>>ASSIGN
TH_HEAD.NUMCPS
      8754**DCL     10430>>ASSIGN
TH_HEAD.NUMCRS
      8752**DCL     10430>>ASSIGN
TH_HEAD.NUMDISKMPCS
      8740**DCL     10430>>ASSIGN
TH_HEAD.NUMDPS
      8756**DCL     10430>>ASSIGN
TH_HEAD.NUMFEPS
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:367  
      8746**DCL     10430>>ASSIGN
TH_HEAD.NUMIOMS
      8734**DCL     10430>>ASSIGN
TH_HEAD.NUMLPS
      8750**DCL     10430>>ASSIGN
TH_HEAD.NUMMTS
      8758**DCL     10430>>ASSIGN
TH_HEAD.NUMODS
      8764**DCL     10430>>ASSIGN
TH_HEAD.NUMOPCS
      8744**DCL     10430>>ASSIGN
TH_HEAD.NUMTAPEMPCS
      8738**DCL     10430>>ASSIGN
TH_HEAD.NUMUNITMPCS
      8736**DCL     10430>>ASSIGN
TH_HEAD.NUMXXS
      8760**DCL     10430>>ASSIGN
TH_MAINT
      8768**DCL      7953--DCLINIT  7954--DCLINIT  7994--DCLINIT  7995--DCLINIT 10444--ASSIGN
TH_MAINT.DEVNAME
      8769**DCL     10438>>IF
TH_MAINT.UTS
      8770**DCL     10440<<ASSIGN
TS$CHAN.HICHAN
      9485**DCL      9950>>DOINDEX 10283>>DOINDEX 10607>>DOINDEX 11085>>DOINDEX 11333>>ASSIGN  11380>>DOINDEX
TS$CHAN.IOM
      9483**DCL      9951>>ASSIGN   9953>>CALLBLT  9965>>CALLBLT 10284>>ASSIGN  10286>>CALLBLT 10297>>CALLBLT
     10606>>ASSIGN  10610>>CALLBLT 10621>>CALLBLT 11082>>ASSIGN  11084>>CALLBLT 11331>>ASSIGN  11377>>ASSIGN
     11381--CALL
TS$CHAN.LOCHAN
      9484**DCL      9950>>DOINDEX 10283>>DOINDEX 10607>>DOINDEX 11085>>DOINDEX 11332>>ASSIGN  11380>>DOINDEX
TS$CMDWD
      9448**DCL      9709>>DOCASE   9850--ASSIGN  10190--ASSIGN  10527--ASSIGN  10666--ASSIGN  11315--ASSIGN
     11317>>DOWHILE 11420--ASSIGN
TS$CPU.CPU
      9475**DCL     10398>>ASSIGN  10401>>CALLBLT 11176>>ASSIGN  11182>>CALLBLT 11438>>ASSIGN  11441>>CALLBLT
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:368  
TS$DEV.CODE
      9452**DCL      9853>>DOWHILE  9855>>DOCASE  10120>>DOCASE  10193>>DOWHILE 10195>>DOCASE  10422>>IF
     10422>>IF      10422>>IF      10469>>DOCASE  10529>>DOWHILE 10532>>DOCASE  10670>>DOCASE  11324>>ASSIGN
     11325>>DOCASE  11356>>DOCASE  11422>>DOWHILE 11423>>DOCASE  11467>>DOCASE
TS$DEV.DEVNAME
      9453**DCL      9454--REDEF    9859>>ASSIGN   9860--ASSIGN   9861>>ASSIGN   9868--ASSIGN   9869>>ASSIGN
     10199>>ASSIGN  10200--ASSIGN  10201>>ASSIGN  10207--ASSIGN  10208>>ASSIGN  10535>>ASSIGN  10537>>ASSIGN
     10895>>ASSIGN  10908<>CALL    10978>>ASSIGN  11335>>IF      11337>>ASSIGN  11385>>IF      11397>>IF
TS$DEV.SIZE
      9451**DCL     10101>>ASSIGN  10450>>ASSIGN  10635>>ASSIGN  10669>>DOWHILE 11199>>ASSIGN  11341>>ASSIGN
     11462>>ASSIGN
TS$FEP.CHAN
      9492**DCL      9924>>ASSIGN  10259>>ASSIGN  10596>>ASSIGN
TS$FEP.FEP
      9493**DCL      9910>>ASSIGN   9913>>CALLBLT 10246>>ASSIGN  10249>>CALLBLT 10582>>CALLBLT 10584>>ASSIGN
     11040>>ASSIGN  11046>>CALLBLT
TS$FEP.IOM
      9491**DCL      9921>>CALLBLT 10256>>CALLBLT 10593>>CALLBLT
TS$FEP.LEN
      9490**DCL      9911>>ASSIGN   9913>>CALLBLT  9921>>CALLBLT 10247>>ASSIGN  10249>>CALLBLT 10256>>CALLBLT
     10581>>ASSIGN  10582>>CALLBLT 11044>>ASSIGN  11046>>CALLBLT
TS$IOM.IOM
      9471**DCL      9935>>ASSIGN   9938>>CALLBLT 10269>>ASSIGN  10272>>CALLBLT 11061>>ASSIGN  11067>>CALLBLT
     11327>>ASSIGN  11358>>ASSIGN  11359--CALL    11426>>ASSIGN  11429>>CALLBLT
TS$MPC.MPCNAME
      9462**DCL      9463--REDEF    9884>>ASSIGN   9886>>ASSIGN   9893--ASSIGN   9894>>ASSIGN  10222>>ASSIGN
     10224>>ASSIGN  10230--ASSIGN  10231>>ASSIGN  10559>>ASSIGN  10561>>ASSIGN  11020>>ASSIGN  11329>>ASSIGN
     11369>>IF
TS$PAGES.HIPAGE
      9499**DCL     10000>>DOINDEX 10314>>DOINDEX 11110>>ASSIGN
TS$PAGES.LOPAGE
      9498**DCL      9998>>ASSIGN  10000>>DOINDEX 10008>>IF      10313>>ASSIGN  10314>>DOINDEX 10319>>IF
     10339>>IF      11109>>ASSIGN
TS$SCU.SCU
      9479**DCL     10410>>ASSIGN  10413>>CALLBLT 11188>>ASSIGN  11194>>CALLBLT 11450>>ASSIGN  11453>>CALLBLT
TSC$CHECK
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:369  
      9642**DCL-ENT  9706--CALL
TSE$ERROR
      9643**DCL-ENT  9729--CALL     9740--CALL     9751--CALL     9781--CALL     9782--CALL     9785--CALL
      9786--CALL     9789--CALL     9865--CALL     9890--CALL     9917--CALL     9942--CALL     9960--CALL
     10022--CALL    10026--CALL    10039--CALL    10043--CALL    10057--CALL    10059--CALL    10062--CALL
     10064--CALL    10108--CALL    10134--CALL    10135--CALL    10205--CALL    10228--CALL    10253--CALL
     10276--CALL    10293--CALL    10327--CALL    10331--CALL    10349--CALL    10353--CALL    10379--CALL
     10381--CALL    10384--CALL    10386--CALL    10403--CALL    10415--CALL    10457--CALL    10467--CALL
     10487--CALL    10551--CALL    10552--CALL    10574--CALL    10575--CALL    10598--CALL    10599--CALL
     10626--CALL    10627--CALL    10641--CALL    10967--CALL    10968--CALL    11170--CALL    11206--CALL
     11214--CALL    11345--CALL    11347--CALL    11386--CALL    11431--CALL    11443--CALL    11455--CALL
     11475--CALL    11476--CALL
TSN_CMDS
      9660**DCL      9704<>CALL
TSS$BREAK
      9645**DCL-ENT  9289--DCLINIT
TSW$WRITE
      9644**DCL-ENT  9676--CALL    10701--CALL    10705--CALL    10720--CALL    10722--CALL    10751--CALL
     10754--CALL    10782--CALL    10785--CALL    10832--CALL    10834--CALL    10839--CALL    10841--CALL
     10862--CALL    10875--CALL    10887--CALL    10965--CALL    11009--CALL    11010--CALL    11014--CALL
     11015--CALL    11035--CALL    11036--CALL    11056--CALL    11057--CALL    11077--CALL    11078--CALL
     11101--CALL    11103--CALL    11138--CALL    11140--CALL    11151--CALL    11153--CALL    11161--CALL
     11163--CALL    11166--CALL    11168--CALL    11183--CALL    11184--CALL    11195--CALL    11196--CALL
     11359--CALL    11370--CALL    11381--CALL    11398--CALL
TS_CMD_READ
      8614**DCL      9696<<REMEMBR
TS_COL_BAD
      8618**DCL     11122<<ASSIGN  11130<<ASSIGN  11131<<ASSIGN  11134>>IF      11136<<ASSIGN  11147>>IF
     11149<<ASSIGN  11159>>IF
TS_DIPART
      9661**DCL     10704>>IF      10721>>IF      10753>>IF      10784>>IF      10837>>IF      10845>>IF
TS_DPS90
      8617**DCL      9699<<ASSIGN  11221>>IF      11222>>IF      11223>>IF
TS_FIRST
      8619**DCL      9998<<ASSIGN   9999>>ASSIGN  10020<>CALL    10021>>IF      10028<<ASSIGN  10037<>CALL
     10038>>IF      10045<<ASSIGN  10052<>CALL    10056>>IF      10061>>IF      10313<<ASSIGN  10325<>CALL
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:370  
     10326>>IF      10333<<ASSIGN  10347<>CALL    10348>>IF      10355<<ASSIGN  10375<>CALL    10378>>IF
     10383>>IF      11115<<ASSIGN  11137>>IF      11138--CALL    11140--CALL    11141<<ASSIGN  11150>>IF
     11151--CALL    11153--CALL    11154<<ASSIGN  11160>>IF      11161--CALL    11163--CALL    11165>>IF
     11166--CALL    11168--CALL
TS_LAST
      8620**DCL      9999<<ASSIGN  10021>>IF      10025<>CALL    10030<<ASSIGN  10038>>IF      10042<>CALL
     10047<<ASSIGN  10053<>CALL    10054>>ASSIGN  10056>>IF      10061>>IF      10326>>IF      10330<>CALL
     10335<<ASSIGN  10348>>IF      10352<>CALL    10357<<ASSIGN  10376<>CALL    10378>>IF      10383>>IF
     11114<<ASSIGN  11137>>IF      11140--CALL    11143<<ASSIGN  11150>>IF      11153--CALL    11156<<ASSIGN
     11160>>IF      11163--CALL    11165>>IF      11168--CALL
TS_PRINT_HEADING
      8615**DCL      9702<<ASSIGN  10665<<ASSIGN  10853<<ASSIGN  10892<<ASSIGN  11108<<ASSIGN
TS_PRINT_THRESH_HEADING
      8616**DCL      9703<<ASSIGN  11313<<ASSIGN
VALUE IN PROCEDURE STUFF_BUF
     10173**DCL     10165--PROC    10175>>CALLBLT
VLR_MONINFO
      8574**DCL      8592--DCLINIT
VLR_MONINFO.PCORE#
      8575**DCL     11114>>ASSIGN  11116>>IF      11117>>ASSIGN  11125>>DOINDEX 11169>>IF
VLR_SITEINFO
      8555**DCL      8592--DCLINIT
VLR_SITEINFO.CPU_TYPE#
      8559**DCL      9699>>ASSIGN   9699>>ASSIGN
VP
      8634**DCL      9985<<ASSIGN   9989>>ASSIGN   9992<<ASSIGN   9992>>ASSIGN  10068<<ASSIGN  10071>>ASSIGN
     10073<<ASSIGN  10073>>ASSIGN
WRITE_CONFIG
      8387**DCL      9874<>CALL     9900<>CALL     9926<>CALL     9971<>CALL    10213<>CALL    10237<>CALL
     10261<>CALL    10303<>CALL
WRITE_CONFIG.BUF_
      8387**DCL      9691<<ASSIGN
WRITE_CONFIG.BUF_.BOUND
      8387**DCL      9873<<ASSIGN   9898<<ASSIGN   9925<<ASSIGN   9970<<ASSIGN  10212<<ASSIGN  10235<<ASSIGN
     10260<<ASSIGN  10302<<ASSIGN
WRITE_CONFIG.STATION_
PL6.E3A0      #001=TSS$SYSCON File=TSS$SYSCON.:E05TSI                            WED 07/30/97 06:53 Page:371  
      8389**DCL      8389--REDEF
WRITE_CONFIG.V
      8390**DCL      8387--DCLINIT
WRITE_CONFIG.V.DVBYTE.VFC#
      8396**DCL      8396--REDEF
WRITE_MAINT
      7993**DCL     10445<>CALL
WRITE_MAINT.BUF_.BOUND
      7993**DCL     10444<<ASSIGN
WRITE_MAINT.STATION_
      7995**DCL      7995--REDEF
WRITE_MAINT.V
      7996**DCL      7993--DCLINIT
WRITE_MAINT.V.DVBYTE.VFC#
      8002**DCL      8002--REDEF
XTX$ADAPT
      9274**DCL-ENT  9353--DCLINIT
XUR$BREAK
      9646**DCL-ENT  8540--DCLINIT
XUR$GETCMD
      9648**DCL-ENT  9704--CALL
XUR$INIT
      9647**DCL-ENT  9695--CALL
XUR_INIT
      9279**DCL      9695<>CALL
XUR_INIT.WORKR_
      9293**DCL      9294--REDEF

PL6.E3A0      #002=TSS$BREAK File=TSS$SYSCON.:E05TSI                             WED 07/30/97 06:56 Page:372  
     2327        1        /*M* TSS$BREAK - BREAK CONTROL FOR SYSCON */
     2328        2        /*T***********************************************************/
     2329        3        /*T*                                                         */
     2330        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     2331        5        /*T*                                                         */
     2332        6        /*T***********************************************************/
     2333        7        TSS$BREAK: PROC;
     2334        8        /**/
     2335        9    1   DCL TS_CMD_READ REMEMBER SYMREF;
     2336       10        /**/
     2337       11    1        UNWIND TO TS_CMD_READ;
     2338       12    1   END TSS$BREAK;

PL6.E3A0      #002=TSS$BREAK File=TSS$SYSCON.:E05TSI                             WED 07/30/97 06:56 Page:373  
--  Include file information  --

   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure TSS$BREAK.

   Procedure TSS$BREAK requires 5 words for executable code.
   Procedure TSS$BREAK requires 4 words of local(AUTO) storage.

    No errors detected in file TSS$SYSCON.:E05TSI    .

PL6.E3A0      #002=TSS$BREAK File=TSS$SYSCON.:E05TSI                             WED 07/30/97 06:56 Page:374  

 Object Unit name= TSS$BREAK                                  File name= TSS$SYSCON.:E05TOU
 UTS= JUL 30 '97 06:56:24.36 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none     5      5  TSS$BREAK

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes      Std        0  TSS$BREAK

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_AUNWIND

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     TS_CMD_READ
PL6.E3A0      #002=TSS$BREAK File=TSS$SYSCON.:E05TSI                             WED 07/30/97 06:56 Page:375  


     2327        1        /*M* TSS$BREAK - BREAK CONTROL FOR SYSCON */
     2328        2        /*T***********************************************************/
     2329        3        /*T*                                                         */
     2330        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     2331        5        /*T*                                                         */
     2332        6        /*T***********************************************************/
     2333        7        TSS$BREAK: PROC;

      7  0 000000   000000 700200 xent  TSS$BREAK    TSX0  ! X66_AUTO_0
         0 000001   000004 000000                    ZERO    4,0

     2334        8        /**/
     2335        9    1   DCL TS_CMD_READ REMEMBER SYMREF;
     2336       10        /**/
     2337       11    1        UNWIND TO TS_CMD_READ;

     11  0 000002   000000 237200 xsym               LDAQ  ! TS_CMD_READ
         0 000003   000000 700200 xent               TSX0  ! X66_AUNWIND
         0 000004   000000 000200                    ZERO    0,128
     2338       12    1   END TSS$BREAK;

PL6.E3A0      #002=TSS$BREAK File=TSS$SYSCON.:E05TSI                             WED 07/30/97 06:56 Page:376  
--  Include file information  --

   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure TSS$BREAK.
PL6.E3A0      #002=TSS$BREAK File=TSS$SYSCON.:E05TSI                             WED 07/30/97 06:56 Page:377  

 **** Variables and constants ****

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d REMB        r     1 TS_CMD_READ


   Procedure TSS$BREAK requires 5 words for executable code.
   Procedure TSS$BREAK requires 4 words of local(AUTO) storage.

    No errors detected in file TSS$SYSCON.:E05TSI    .
PL6.E3A0      #002=TSS$BREAK File=TSS$SYSCON.:E05TSI                             WED 07/30/97 06:56 Page:378  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=TSS$BREAK File=TSS$SYSCON.:E05TSI                             WED 07/30/97 06:56 Page:379  
          MINI XREF LISTING

TS_CMD_READ
         9**DCL        11>>UNWIND
