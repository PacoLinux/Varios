VERSION E05

PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:1    
        1        1        /*M*     Allocate TIGR built unit record sub-system tables */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*/
        8        8        /**/
        9        9        /*P*     NAME:     ITU$UNIT
       10       10                 PURPOSE:  ITU$UNIT builds the tables for the devices in unit
       11       11                           record subsystems             */
       12       12        ITU$UNIT: PROC (PTR$)  ALTRET;
       13       13        /**/
       14       14        /*  PARAMETER  */
       15       15    1   DCL PTR$ PTR;                           /* PTR TO TIGR TABLE SPACE            */
       16       16        /**/
       17       17        /*  INCLUDE FILES */
       18       18        %INCLUDE CP_6_SUBS;
       19      558        %INCLUDE NI_DATA_R;
       20      995        %INCLUDE IT_ERROR_C;
       21     1078        %INCLUDE IT_SUBS_C;
       22     1345        %INCLUDE IT$UNITDEV;
       23     1383        %INCLUDE IT$CMDWD;
       24     1391        %INCLUDE IT$MPC;
       25     1425        %INCLUDE NK_SUBS;
       26     1450        %INCLUDE FR$RAT;
       27     1503        %FR$RAT;
       28     1543        %INCLUDE FR_SUBS;
       29     1611        %SUB YES = '1'B/*YES*/;
       30     1612        %SUB NO = '0'B/*NO*/;
       31     1613        /**/
       32     1614        /*  AUTOMATIC  */
       33     1615    1   DCL CMD$ PTR;
       34     1616    1   DCL SQH$ PTR;
       35     1617    1   DCL DQH$ PTR;
       36     1618    1   DCL DEV$ PTR;
       37     1619    1   DCL RAT$ PTR;
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:2    
       38     1620    1   DCL UNITMPC$ PTR;
       39     1621    1   DCL CHTX SBIN(36);
       40     1622    1   DCL CHX SBIN;
       41     1623    1   DCL I SBIN WORD;
       42     1624    1   DCL J SBIN(36);
       43     1625    1   DCL 1 DUPCHANERR_TEXT,
       44     1626    1         2 COUNT UBIN(9) UNAL,
       45     1627    1         2 CHANNEL CHAR(8) UNAL,
       46     1628    1         2 IOMTEXT CHAR(1) UNAL,
       47     1629    1         2 DASH CHAR(1) UNAL,
       48     1630    1         2 CHANTEXT CHAR(2) UNAL;
       49     1631        /**/
       50     1632    1   DCL MPCX SBIN;
       51     1633        /**/
       52     1634        /*  BASED  */
       53     1635        /**/
       54     1636    1   DCL IT$WORD(0:0) UBIN WORD BASED ALIGNED;
       55     1637        /**/
       56     1638        %NI$SQH;
       57     1651        %NI$CHT;
       58     1654        %NI$DQH;
       59     1677        %NI$DCT;
       60     1725        %NI$DVT;
       61     1732        %NI$IOSTAT;
       62     1741        %NI$IOM;
       63     1746        %NI$MBX;
       64     1765        /**/
       65     1766    1   DCL IT$PTR PTR BASED ALIGNED;
       66     1767        /**/
       67     1768        /*  ENTRY DECLARES */
       68     1769        /**/
       69     1770    1   DCL ITE$ERROR ENTRY(2);
       70     1771    1   DCL ITH$ALLOCATE ENTRY(2) ALTRET;
       71     1772    1   DCL ITH$SQH_INIT ENTRY(2) ALTRET;
       72     1773    1   DCL ITH$RAT_INIT ENTRY(2) ALTRET;
       73     1774    1   DCL ITH$DCT_INIT ENTRY(2) ALTRET;
       74     1775        /**/
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:3    
       75     1776        /*  SYMREFS  */
       76     1777        /**/
       77     1778    1   DCL B$REAL$ PTR SYMREF;
       78     1779    1   DCL B$DS5$ PTR SYMREF;                  /* COMMANDS                           */
       79     1780    1   DCL IT_GOTLP BIT(1) SYMREF;
       80     1781    1   DCL IT_CHAIN500(0:5) CHAR(40) ALIGNED SYMREF;
       81     1782        %NI$PARTITION (NAME=IT_PARTITION,STCLASS=SYMREF);
       82     1790        /**/
       83     1791        %INCLUDE NI_DATA_C;
       84     1904        %INCLUDE FR_DATA_R;
       85     1936        %INCLUDE HF_DATA_R;
       86     1979        %INCLUDE IT_IDATA_R;
       87     2096        /**/
       88     2097        %EJECT;
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:4    
       89     2098        /*D*     NAME:     ITU$UNIT
       90     2099                 PURPOSE:  To build the I/O system tables for the unit record
       91     2100                           devices.
       92     2101                 INPUT:    PTR$ - parameter - pointer to next available location
       93     2102                           in TIGR table area.
       94     2103                           Command table - Built in DS5 by ITC$CHECK_UNIT
       95     2104        *
       96     2105                 OUTPUT:   Initialized tables
       97     2106        *
       98     2107                 DESCRIPTION:  ITU$UNIT first initializes the SQH for this unit
       99     2108                           subsystem and builds the DCT entry for the MPC. Then
      100     2109                           the DQH tables are built and the channel tables
      101     2110                           (NI$CHT) pointed to them and a DCT entry made for every
      102     2111                           device.                       */
      103     2112        /**/
      104     2113    1           CMD$ = B$DS5$;
      105     2114    1           CMD$ = PINCRW ( CMD$,SIZEW(IT$CMDWD));
      106     2115        /**/
      107     2116    1           CALL ITH$SQH_INIT(PTR$,SQH$) ALTRET(ITU$UNIT_ERR);
      108     2117        /**/
      109     2118                /* BUILD MPC DCT */
      110     2119    1           CALL ITH$DCT_INIT(PTR$,DEV$) ALTRET(ITU$UNIT_ERR);
      111     2120    1           CHX = 0;
      112     2121        /**/
      113     2122    1           SQH$ -> NI$SQH.NDCT = SQH$ -> NI$SQH.NDCT + 1;
      114     2123    1           SQH$ -> NI$SQH.MPC$(0) = DEV$;
      115     2124        /**/
      116     2125    1           DEV$ -> NI$DCT.MPC.FW$ = ADDR(NIL);
      117     2126    1           DEV$ -> NI$DCT.DEVNM = CMD$ -> IT$MPC.MPCNAME;
      118     2127    1           DEV$ -> NI$DCT.DVT$ = NI$DVT$(CMD$ -> IT$MPC.MPCTYPE);
      119     2128    1           DEV$ -> NI$DCT.MODX = CMD$ -> IT$MPC.MODX;
      120     2129    2           DO SELECT (DEV$ -> NI$DCT.DVT$ -> NI$DVT.MODEL(DEV$ -> NI$DCT.MODX));
      121     2130    2              SELECT ('URP0600','URP8000');
      122     2131    2                DEV$ -> NI$DCT.CTYP = %C_MPC;
      123     2132    2              SELECT ('URPEURP','URP8011','URP8012','URP8013');
      124     2133    2                DEV$ -> NI$DCT.CTYP = %C_EURC;
      125     2134    2              SELECT ('URPIPCU','URP8600','URP8601','URP8602');
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:5    
      126     2135    2                DEV$ -> NI$DCT.CTYP = %C_IPC;
      127     2136    2              END; /* SELECT */
      128     2137    1           DEV$ -> NI$DCT.FX = CMD$ -> IT$MPC.FX;
      129     2138    1           DEV$ -> NI$DCT.TYPE = %DV_MPC;
      130     2139    1           DEV$ -> NI$DCT.SQH$ = SQH$;
      131     2140    1           DEV$ -> NI$DCT.DQH$ = PTR$;
      132     2141    1           DEV$ -> NI$DCT.DFLG.INPUT = YES;
      133     2142    1           DEV$ -> NI$DCT.DFLG.OUTPUT = YES;
      134     2143    1           DEV$ -> NI$DCT.DFLG.PSIA = YES;
      135     2144    1           DEV$->NI$DCT.MPC.TYPE=%DV_LP;
      136     2145    1           DEV$ -> NI$DCT.MPC.FWNAME = CMD$ -> IT$MPC.FWNAME;
      137     2146    1           DEV$ -> NI$DCT.MPC.LPNAME = CMD$ -> IT$MPC.LPFWNAME;
      138     2147    1           DEV$ -> NI$DCT.MPC.CRPNAME = CMD$ -> IT$MPC.CRPFWNAME;
      139     2148    1           IT_PARTITION.DEVICE(N_DCTXMAX) = CMD$ -> IT$MPC.FLAGS.DOWN;
      140     2149        /**/
      141     2150    1           UNITMPC$ = DEV$;
      142     2151    1           MPCX=N_DCTXMAX;
      143     2152        /**/
      144     2153    1           CMD$ = PINCRW(CMD$,SIZEW(IT$MPC));
      145     2154        /**/
      146     2155    2           DO WHILE (CMD$ -> IT$UNITDEV.CNTWD.TYPE ~= %ITS_ENDCMD);
      147     2156    3              DO J = 0 TO 1;               /* DO BOTH CHANNEL CONECTIONS         */
      148     2157    4                 IF (CMD$ -> IT$UNITDEV.IOMCHAN.IOM#(J) ~= -1) THEN DO;
      149     2158        /**/                                    /* THIS IOM CONNECTION IS THERE       */
      150     2159    4                    DQH$ = PTR$;
      151     2160    4                    CALL ITH$ALLOCATE(PTR$,SIZEW(NI$DQH)) ALTRET(ITU$UNIT_ERR);
      152     2161        /**/
      153     2162    4                    CHTX = ((CMD$ -> IT$UNITDEV.IOMCHAN.IOM#(J) * %N_MAXCHANS)
      154     2163    4                      + CMD$ -> IT$UNITDEV.IOMCHAN.CHAN(J));
      155     2164        /**/
      156     2165    5                    IF (NI$CHT$ -> NI$CHT.DQH$(CHTX) ~= ADDR(NIL)) THEN DO;
      157     2166    5                       DUPCHANERR_TEXT.COUNT = SIZEC(DUPCHANERR_TEXT) - 1;
      158     2167    5                       DUPCHANERR_TEXT.CHANNEL = 'CHANNEL ';
      159     2168    5                       CALL BINCHAR(DUPCHANERR_TEXT.IOMTEXT,CMD$ -> IT$UNITDEV.IOMCHAN.
              2168                                IOM#(J));
      160     2169    5                       DUPCHANERR_TEXT.DASH = '-';
      161     2170    5                       CALL BINCHAR(DUPCHANERR_TEXT.CHANTEXT,CMD$ -> IT$UNITDEV.IOMCHAN
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:6    
              2170                                .CHAN(J));
      162     2171    5                       CALL ITE$ERROR(%E$DUPCHAN,ADDR(DUPCHANERR_TEXT));
      163     2172    5                       END;
      164     2173        /**/
      165     2174    4                    NI$CHT$ -> NI$CHT.POSTER(CHTX) = NI$DVT$(CMD$ ->
      166     2175    4                      IT$UNITDEV.TYPE) -> NI$DVT.POSTER;
      167     2176    4                    NI$CHT$ -> NI$CHT.DQH$(CHTX) = DQH$;
      168     2177        /**/
      169     2178    4                    DQH$ -> NI$DQH = NI$DQH_C;   /* set to constant inited struct*/
      170     2179        /**/
      171     2180        /*               DQH$ -> NI$DQH.FL$ = ADDR(NIL)            */
      172     2181    4                    DQH$ -> NI$DQH.IOCHANX = CHTX;
      173     2182    4                    DQH$ -> NI$DQH.SQH$ = SQH$;
      174     2183        /*               DQH$ -> NI$DQH.IO$ = ADDR(NIL);           */
      175     2184    4                    DQH$ -> NI$DQH.MPC$ = UNITMPC$;
      176     2185    5                  IF HW_IMX THEN DO;
      177     2186        /*                DQH$ -> NI$DQH.MBX$ = ADDR(NIL);         */
      178     2187        /*                DQH$ -> NI$DQH.IOSTATUS$ = ADDR(NIL);    */
      179     2188    5                     END;
      180     2189    5                  ELSE DO;
      181     2190    5                     DQH$ -> NI$DQH.MBX$ = PINCRW (NI$IOM$(CMD$->IT$UNITDEV.IOMCHAN.
              2190                              IOM#(J))
      182     2191    5                       -> NI$IOM.MBX$, SIZEW(NI$MBX(0)) * CMD$->IT$UNITDEV.IOMCHAN.CHAN
              2191                                (J));
      183     2192    5                     DQH$ -> NI$DQH.IOSTATUS$ = NI$FQ$ -> NI$FQ.HD$;
              2192                              /* STATUS IN LOW REAL MEM */
      184     2193    6                     IF HW_IOP THEN DO;
      185     2194    6                        DQH$ -> NI$DQH.IOSTATUS$ -> NI$IOSTAT.AESDCW = %IOP_AESDCW_INIT
              2194                                 ;
      186     2195    6                        DQH$ -> NI$DQH.IOSTATUS$ -> NI$IOSTAT.AESDCW.ADDRESS =
      187     2196    6                          POFFW (ADDR (DQH$ -> NI$DQH.IOSTATUS$ -> NI$IOSTAT.EXTST),
              2196                                   B$REAL$);
      188     2197    6                        END;
      189     2198
      190     2199    5                     NI$FQ$ -> NI$FQ.HD$ = PINCRW(NI$FQ$ -> NI$FQ.HD$,SIZEW(NI$IOSTAT))
              2199                              ;
      191     2200    5                     END;
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:7    
      192     2201    4                    UNITMPC$->NI$DCT.MPC.IOCHANX(CHX)=CHTX;
      193     2202    4                    IT_PARTITION.IOCHAN(CHTX) = CMD$->IT$UNITDEV.FLAGS.DOWN;
      194     2203    4                    CHX=CHX+1;
      195     2204        /**/
      196     2205    4                    END;
      197     2206    3                 END;
      198     2207        /**/
      199     2208    2              SQH$ -> NI$SQH.NDCT = SQH$ -> NI$SQH.NDCT + 1;
      200     2209        /**/
      201     2210                   /* BUILD DCT ENTRY FOR DEVICE */
      202     2211    2              CALL ITH$DCT_INIT(PTR$,DEV$) ALTRET(ITU$UNIT_ERR);
      203     2212    2              DEV$ -> NI$DCT.DEVNM = CMD$ -> IT$UNITDEV.NAME;
      204     2213    2              DEV$ -> NI$DCT.DVT$ = NI$DVT$(CMD$ -> IT$UNITDEV.TYPE);
      205     2214    2              DEV$ -> NI$DCT.TYPE = DEV$ -> NI$DCT.DVT$ -> NI$DVT.TYPE;
      206     2215    2              DEV$ -> NI$DCT.MODX = CMD$ -> IT$UNITDEV.MODX;
      207     2216    2              DEV$ -> NI$DCT.FX = CMD$ -> IT$UNITDEV.FX;
      208     2217    2              DEV$ -> NI$DCT.DVN = 1;      /* DEVICE NUMBER ALWAYS ONE           */
      209     2218    2              DEV$ -> NI$DCT.SQH$ = SQH$;
      210     2219    2              DEV$ -> NI$DCT.DQH$ = DQH$;
      211     2220    2              DEV$ -> NI$DCT.DFLG.INPUT = CMD$ -> IT$UNITDEV.FLAGS.INPUT;
      212     2221    2              DEV$ -> NI$DCT.DFLG.OUTPUT = CMD$ -> IT$UNITDEV.FLAGS.OUTPUT;
      213     2222    2              DEV$ -> NI$DCT.DFLG.CM = CMD$ -> IT$UNITDEV.FLAGS.CM;
      214     2223    2              DEV$ -> NI$DCT.DFLG.SYMBIONT = CMD$ -> IT$UNITDEV.FLAGS.SYMBIONT;
      215     2224    2              DEV$ -> NI$DCT.DFLG.PSIA = CMD$ -> IT$UNITDEV.FLAGS.PSIA;
      216     2225    2              DEV$ -> NI$DCT.CTYP = UNITMPC$ -> NI$DCT.CTYP;
      217     2226        /**/
      218     2227    2              IT_PARTITION.DEVICE(N_DCTXMAX) = CMD$ -> IT$UNITDEV.FLAGS.DOWN;
      219     2228        /**/
      220     2229    3              IF DEV$ -> NI$DCT.DVT$ -> NI$DVT.TYPE = %DV_LP THEN DO;
      221     2230    3                 IT_GOTLP = YES;
      222     2231    3                 DEV$ -> NI$DCT.LP.CHAIN$ = PTR$;
      223     2232        /**/
      224     2233    3           I = CMD$ -> IT$UNITDEV.CHAINL;
      225     2234    3           CALL ITH$ALLOCATE(PTR$,I)
      226     2235    3              ALTRET(ITU$UNIT_ERR);
      227     2236        /**/
      228     2237    4                 DO I = 0 TO CMD$ -> IT$UNITDEV.CHAINL - 1;
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:8    
      229     2238    4                    DEV$ -> NI$DCT.LP.CHAIN$ -> IT$WORD(I) =
      230     2239    4                      CMD$ -> IT$UNITDEV.CHAIN$ -> IT$WORD(I);
      231     2240    4                    END;
      232     2241        /**/
      233     2242    3                 DEV$ -> NI$DCT.LP.VFC$ = PTR$;
      234     2243    3                 DEV$ -> NI$DCT.LP.VFCL = CMD$ -> IT$UNITDEV.VFCL;
      235     2244        /**/
      236     2245    3           CALL ITH$ALLOCATE(PTR$,%MAXVFCL) ALTRET(ITU$UNIT_ERR);
      237     2246        /**/
      238     2247    4                 DO I = 0 TO CMD$ -> IT$UNITDEV.VFCL - 1;
      239     2248    4                    DEV$ -> NI$DCT.LP.VFC$ -> IT$WORD(I) =
      240     2249    4                      CMD$ -> IT$UNITDEV.VFC$ -> IT$WORD(I);
      241     2250    4                    END;
      242     2251    3                 END;
      243     2252        /**/
      244     2253    2              CALL ITH$RAT_INIT(PTR$,RAT$) ALTRET(ITU$UNIT_ERR);
      245     2254    2              DEV$ -> NI$DCT.RAT$ = RAT$;
      246     2255    2              RAT$ -> FR$RAT.M1 = NI$DVT$(CMD$ -> IT$UNITDEV.TYPE) -> NI$DVT.ATTR;
      247     2256    2              IF (CMD$ -> IT$UNITDEV.CHAIN$ = ADDR(IT_CHAIN500)) THEN
      248     2257    2                 RAT$ -> FR$RAT.M1 = RAT$ -> FR$RAT.M1 & ~%ATTR_LOWERCASE#;
      249     2258    2              IF (CMD$ -> IT$UNITDEV.FLAGS.SYMBIONT) THEN
      250     2259    2                 RAT$ -> FR$RAT.FLG.SYMBIONT = YES;
      251     2260    2              RAT$ -> FR$RAT.TYP = CMD$ -> IT$UNITDEV.NM.MNEM;
      252     2261    2              RAT$ -> FR$RAT.REEL.SER = CMD$ -> IT$UNITDEV.FORMNAME;
      253     2262    2              IF (RAT$ -> FR$RAT.REEL.SER ~= ' ') THEN
      254     2263    2                 RAT$ -> FR$RAT.FLG.FORM = YES;
      255     2264    2              RAT$ -> FR$RAT.FLG.FORM = YES;
      256     2265    2              RAT$ -> FR$RAT.FLG.RUP = YES;
      257     2266        /**/
      258     2267    2              RAT$ = ADDR(FR$HD$(FR_NPOOL));
      259     2268    2              IF (RAT$ -> IT$PTR = ADDR(NIL)) THEN
      260     2269    2                 RAT$ -> IT$PTR = DEV$ -> NI$DCT.RAT$;
      261     2270    3              ELSE DO;
      262     2271    3                 RAT$ = FR$HD$(FR_NPOOL);
      263     2272    4                 DO WHILE (RAT$ -> FR$RAT.LNK$ ~= ADDR(NIL));
      264     2273    4                    RAT$ = RAT$ -> FR$RAT.LNK$;
      265     2274    4                    END;
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:9    
      266     2275    3                 RAT$ -> FR$RAT.LNK$ = DEV$ -> NI$DCT.RAT$;
      267     2276    3                 END;
      268     2277        /**/
      269     2278    2              FR_PRM$(0) -> FR$PR(FR_NPOOL) = FR_PRM$(0) -> FR$PR(FR_NPOOL) + 1;
      270     2279        /**/
      271     2280    2              CMD$ = PINCRW(CMD$,CMD$ -> IT$UNITDEV.CNTWD.OFFSET);
      272     2281    2              END;
      273     2282        /**/
      274     2283    1           RETURN;
      275     2284    1   ITU$UNIT_ERR:
      276     2285    1           ALTRETURN;
      277     2286    1   END;

PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:10   
--  Include file information  --

   IT_IDATA_R.:E05TOU  cannot be made into a system file and is referenced.
   HF_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   FR_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   NI_DATA_C.:E05TOU  is referenced.
   FR_SUBS.:E05TOU  is referenced.
   FR$RAT.:E05TOU  is referenced.
   NK_SUBS.:E05TOU  is referenced.
   IT$MPC.:E05TOU  cannot be made into a system file and is referenced.
   IT$CMDWD.:E05TOU  cannot be made into a system file and is referenced.
   IT$UNITDEV.:E05TOU  cannot be made into a system file and is referenced.
   IT_SUBS_C.:E05TOU  is referenced.
   IT_ERROR_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
      No diagnostics issued in procedure ITU$UNIT.

   Procedure ITU$UNIT requires 604 words for executable code.
   Procedure ITU$UNIT requires 24 words of local(AUTO) storage.

    No errors detected in file ITU$UNIT.:E05TSI    .

PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:11   

 Object Unit name= ITU$UNIT                                   File name= ITU$UNIT.:E05TOU
 UTS= JUL 29 '97 23:08:54.08 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  RoData even  UTS     22     26  ITU$UNIT
    1   Proc  even  none   604   1134  ITU$UNIT
    2  RoData even  none     9     11  ITU$UNIT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes    yes     yes      Std        1  ITU$UNIT

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       2 ITH$SQH_INIT
 yes     yes           Std       2 ITH$DCT_INIT
 yes     yes           Std       2 ITH$ALLOCATE
         yes           Std       2 ITE$ERROR
 yes     yes           Std       2 ITH$RAT_INIT
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AUTO_1
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:12   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     N$DCT$$                               N$FQ$                                 NI$CHT$
     NI$DVT$                               NI$FQ$                                NI$IBUF$
     NI$IOM$                               NI$RP$                                N_DCTXMAX
     B$REAL$                               B$DS5$                                IT_GOTLP
     IT_CHAIN500                           IT_PARTITION                          FR$HD$
     FR_PRM$                               HW_IOP                                HW_IMX
     NI$DQH_C                              B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:13   


        1        1        /*M*     Allocate TIGR built unit record sub-system tables */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*/
        8        8        /**/
        9        9        /*P*     NAME:     ITU$UNIT
       10       10                 PURPOSE:  ITU$UNIT builds the tables for the devices in unit
       11       11                           record subsystems             */
       12       12        ITU$UNIT: PROC (PTR$)  ALTRET;

     12  1 000000   000000 700200 xent  ITU$UNIT     TSX0  ! X66_AUTO_1
         1 000001   000030 000001                    ZERO    24,1

       13       13        /**/
       14       14        /*  PARAMETER  */
       15       15    1   DCL PTR$ PTR;                           /* PTR TO TIGR TABLE SPACE            */
       16       16        /**/
       17       17        /*  INCLUDE FILES */
       18       18        %INCLUDE CP_6_SUBS;
       19      558        %INCLUDE NI_DATA_R;
       20      995        %INCLUDE IT_ERROR_C;
       21     1078        %INCLUDE IT_SUBS_C;
       22     1345        %INCLUDE IT$UNITDEV;
       23     1383        %INCLUDE IT$CMDWD;
       24     1391        %INCLUDE IT$MPC;
       25     1425        %INCLUDE NK_SUBS;
       26     1450        %INCLUDE FR$RAT;
       27     1503        %FR$RAT;
       28     1543        %INCLUDE FR_SUBS;
       29     1611        %SUB YES = '1'B/*YES*/;
       30     1612        %SUB NO = '0'B/*NO*/;
       31     1613        /**/
       32     1614        /*  AUTOMATIC  */
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:14   
       33     1615    1   DCL CMD$ PTR;
       34     1616    1   DCL SQH$ PTR;
       35     1617    1   DCL DQH$ PTR;
       36     1618    1   DCL DEV$ PTR;
       37     1619    1   DCL RAT$ PTR;
       38     1620    1   DCL UNITMPC$ PTR;
       39     1621    1   DCL CHTX SBIN(36);
       40     1622    1   DCL CHX SBIN;
       41     1623    1   DCL I SBIN WORD;
       42     1624    1   DCL J SBIN(36);
       43     1625    1   DCL 1 DUPCHANERR_TEXT,
       44     1626    1         2 COUNT UBIN(9) UNAL,
       45     1627    1         2 CHANNEL CHAR(8) UNAL,
       46     1628    1         2 IOMTEXT CHAR(1) UNAL,
       47     1629    1         2 DASH CHAR(1) UNAL,
       48     1630    1         2 CHANTEXT CHAR(2) UNAL;
       49     1631        /**/
       50     1632    1   DCL MPCX SBIN;
       51     1633        /**/
       52     1634        /*  BASED  */
       53     1635        /**/
       54     1636    1   DCL IT$WORD(0:0) UBIN WORD BASED ALIGNED;
       55     1637        /**/
       56     1638        %NI$SQH;
       57     1651        %NI$CHT;
       58     1654        %NI$DQH;
       59     1677        %NI$DCT;
       60     1725        %NI$DVT;
       61     1732        %NI$IOSTAT;
       62     1741        %NI$IOM;
       63     1746        %NI$MBX;
       64     1765        /**/
       65     1766    1   DCL IT$PTR PTR BASED ALIGNED;
       66     1767        /**/
       67     1768        /*  ENTRY DECLARES */
       68     1769        /**/
       69     1770    1   DCL ITE$ERROR ENTRY(2);
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:15   
       70     1771    1   DCL ITH$ALLOCATE ENTRY(2) ALTRET;
       71     1772    1   DCL ITH$SQH_INIT ENTRY(2) ALTRET;
       72     1773    1   DCL ITH$RAT_INIT ENTRY(2) ALTRET;
       73     1774    1   DCL ITH$DCT_INIT ENTRY(2) ALTRET;
       74     1775        /**/
       75     1776        /*  SYMREFS  */
       76     1777        /**/
       77     1778    1   DCL B$REAL$ PTR SYMREF;
       78     1779    1   DCL B$DS5$ PTR SYMREF;                  /* COMMANDS                           */
       79     1780    1   DCL IT_GOTLP BIT(1) SYMREF;
       80     1781    1   DCL IT_CHAIN500(0:5) CHAR(40) ALIGNED SYMREF;
       81     1782        %NI$PARTITION (NAME=IT_PARTITION,STCLASS=SYMREF);
       82     1790        /**/
       83     1791        %INCLUDE NI_DATA_C;
       84     1904        %INCLUDE FR_DATA_R;
       85     1936        %INCLUDE HF_DATA_R;
       86     1979        %INCLUDE IT_IDATA_R;
       87     2096        /**/
       88     2097        %EJECT;
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:16   
       89     2098        /*D*     NAME:     ITU$UNIT
       90     2099                 PURPOSE:  To build the I/O system tables for the unit record
       91     2100                           devices.
       92     2101                 INPUT:    PTR$ - parameter - pointer to next available location
       93     2102                           in TIGR table area.
       94     2103                           Command table - Built in DS5 by ITC$CHECK_UNIT
       95     2104        *
       96     2105                 OUTPUT:   Initialized tables
       97     2106        *
       98     2107                 DESCRIPTION:  ITU$UNIT first initializes the SQH for this unit
       99     2108                           subsystem and builds the DCT entry for the MPC. Then
      100     2109                           the DQH tables are built and the channel tables
      101     2110                           (NI$CHT) pointed to them and a DCT entry made for every
      102     2111                           device.                       */
      103     2112        /**/
      104     2113    1           CMD$ = B$DS5$;

   2113  1 000002   000000 236000 xsym               LDQ     B$DS5$
         1 000003   200004 756100                    STQ     CMD$,,AUTO

      105     2114    1           CMD$ = PINCRW ( CMD$,SIZEW(IT$CMDWD));

   2114  1 000004   000001 036003                    ADLQ    1,DU
         1 000005   200004 756100                    STQ     CMD$,,AUTO

      106     2115        /**/
      107     2116    1           CALL ITH$SQH_INIT(PTR$,SQH$) ALTRET(ITU$UNIT_ERR);

   2116  1 000006   200005 630500                    EPPR0   SQH$,,AUTO
         1 000007   200025 450500                    STP0    MPCX+3,,AUTO
         1 000010   200003 236100                    LDQ     @PTR$,,AUTO
         1 000011   200024 756100                    STQ     MPCX+2,,AUTO
         1 000012   200024 630500                    EPPR0   MPCX+2,,AUTO
         1 000013   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000014   000000 701000 xent               TSX1    ITH$SQH_INIT
         1 000015   001133 702000 1                  TSX2    ITU$UNIT_ERR

PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:17   
      108     2117        /**/
      109     2118                /* BUILD MPC DCT */
      110     2119    1           CALL ITH$DCT_INIT(PTR$,DEV$) ALTRET(ITU$UNIT_ERR);

   2119  1 000016   200007 630500                    EPPR0   DEV$,,AUTO
         1 000017   200025 450500                    STP0    MPCX+3,,AUTO
         1 000020   200003 236100                    LDQ     @PTR$,,AUTO
         1 000021   200024 756100                    STQ     MPCX+2,,AUTO
         1 000022   200024 630500                    EPPR0   MPCX+2,,AUTO
         1 000023   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000024   000000 701000 xent               TSX1    ITH$DCT_INIT
         1 000025   001133 702000 1                  TSX2    ITU$UNIT_ERR

      111     2120    1           CHX = 0;

   2120  1 000026   200013 450100                    STZ     CHX,,AUTO

      112     2121        /**/
      113     2122    1           SQH$ -> NI$SQH.NDCT = SQH$ -> NI$SQH.NDCT + 1;

   2122  1 000027   200005 470500                    LDP0    SQH$,,AUTO
         1 000030   000002 720100                    LXL0    2,,PR0
         1 000031   000001 621010                    EAX1    1,X0
         1 000032   000002 441100                    SXL1    2,,PR0

      114     2123    1           SQH$ -> NI$SQH.MPC$(0) = DEV$;

   2123  1 000033   200007 236100                    LDQ     DEV$,,AUTO
         1 000034   200005 470500                    LDP0    SQH$,,AUTO
         1 000035   000005 756100                    STQ     5,,PR0

      115     2124        /**/
      116     2125    1           DEV$ -> NI$DCT.MPC.FW$ = ADDR(NIL);

   2125  1 000036   000001 236000 xsym               LDQ     B_VECTNIL+1
         1 000037   200007 470500                    LDP0    DEV$,,AUTO
         1 000040   000030 756100                    STQ     24,,PR0
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:18   

      117     2126    1           DEV$ -> NI$DCT.DEVNM = CMD$ -> IT$MPC.MPCNAME;

   2126  1 000041   200004 471500                    LDP1    CMD$,,AUTO
         1 000042   040100 100500                    MLR     fill='040'O
         1 000043   100002 400010                    ADSC9   2,,PR1                   cn=2,n=8
         1 000044   000002 000010                    ADSC9   2,,PR0                   cn=0,n=8

      118     2127    1           DEV$ -> NI$DCT.DVT$ = NI$DVT$(CMD$ -> IT$MPC.MPCTYPE);

   2127  1 000045   100001 220100                    LDX0    1,,PR1
         1 000046   000000 236010 xsym               LDQ     NI$DVT$,X0
         1 000047   200007 470500                    LDP0    DEV$,,AUTO
         1 000050   000024 756100                    STQ     20,,PR0

      119     2128    1           DEV$ -> NI$DCT.MODX = CMD$ -> IT$MPC.MODX;

   2128  1 000051   100001 236100                    LDQ     1,,PR1
         1 000052   000022 736000                    QLS     18
         1 000053   000007 752110                    STCQ    7,'10'O,PR0

      120     2129    2           DO SELECT (DEV$ -> NI$DCT.DVT$ -> NI$DVT.MODEL(DEV$ -> NI$DCT.MODX));

   2129  1 000054   200007 470500                    LDP0    DEV$,,AUTO
         1 000055   000024 473500                    LDP3    20,,PR0
         1 000056   000007 236100                    LDQ     7,,PR0
         1 000057   000021 772000                    QRL     17
         1 000060   000176 376007                    ANQ     126,DL
         1 000061   000000 620006                    EAX0    0,QL
         1 000062   000002 736000                    QLS     2
         1 000063   040000 106506                    CMPC    fill='040'O
         1 000064   300003 000010                    ADSC9   3,Q,PR3                  cn=0,n=8
         1 000065   000000 000007 0                  ADSC9   0                        cn=0,n=7
         1 000066   000167 602000 1                  TNC     s:2129+75
         1 000067   000000 635010                    EAA     0,X0
         1 000070   000020 771000                    ARL     16
         1 000071   040000 106505                    CMPC    fill='040'O
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:19   
         1 000072   300003 000010                    ADSC9   3,A,PR3                  cn=0,n=8
         1 000073   000000 000007 0                  ADSC9   0                        cn=0,n=7
         1 000074   000224 600000 1                  TZE     s:2133
         1 000075   000000 636010                    EAQ     0,X0
         1 000076   000020 772000                    QRL     16
         1 000077   040000 106506                    CMPC    fill='040'O
         1 000100   300003 000010                    ADSC9   3,Q,PR3                  cn=0,n=8
         1 000101   000002 000007 0                  ADSC9   2                        cn=0,n=7
         1 000102   000143 602000 1                  TNC     s:2129+55
         1 000103   000000 636010                    EAQ     0,X0
         1 000104   000020 772000                    QRL     16
         1 000105   040000 106506                    CMPC    fill='040'O
         1 000106   300003 000010                    ADSC9   3,Q,PR3                  cn=0,n=8
         1 000107   000002 000007 0                  ADSC9   2                        cn=0,n=7
         1 000110   000231 600000 1                  TZE     s:2135
         1 000111   000000 636010                    EAQ     0,X0
         1 000112   000020 772000                    QRL     16
         1 000113   040000 106506                    CMPC    fill='040'O
         1 000114   300003 000010                    ADSC9   3,Q,PR3                  cn=0,n=8
         1 000115   000004 000007 0                  ADSC9   4                        cn=0,n=7
         1 000116   000134 602000 1                  TNC     s:2129+48
         1 000117   000000 636010                    EAQ     0,X0
         1 000120   000020 772000                    QRL     16
         1 000121   040000 106506                    CMPC    fill='040'O
         1 000122   300003 000010                    ADSC9   3,Q,PR3                  cn=0,n=8
         1 000123   000004 000007 0                  ADSC9   4                        cn=0,n=7
         1 000124   000224 600000 1                  TZE     s:2133
         1 000125   000000 636010                    EAQ     0,X0
         1 000126   000020 772000                    QRL     16
         1 000127   040000 106506                    CMPC    fill='040'O
         1 000130   300003 000010                    ADSC9   3,Q,PR3                  cn=0,n=8
         1 000131   000006 000007 0                  ADSC9   6                        cn=0,n=7
         1 000132   000235 601000 1                  TNZ     s:2137
         1 000133   000231 710000 1                  TRA     s:2135
         1 000134   000000 636010                    EAQ     0,X0
         1 000135   000020 772000                    QRL     16
         1 000136   040000 106506                    CMPC    fill='040'O
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:20   
         1 000137   300003 000010                    ADSC9   3,Q,PR3                  cn=0,n=8
         1 000140   000010 000007 0                  ADSC9   8                        cn=0,n=7
         1 000141   000235 601000 1                  TNZ     s:2137
         1 000142   000231 710000 1                  TRA     s:2135
         1 000143   000000 636010                    EAQ     0,X0
         1 000144   000020 772000                    QRL     16
         1 000145   040000 106506                    CMPC    fill='040'O
         1 000146   300003 000010                    ADSC9   3,Q,PR3                  cn=0,n=8
         1 000147   000012 000007 0                  ADSC9   10                       cn=0,n=7
         1 000150   000160 602000 1                  TNC     s:2129+68
         1 000151   000000 636010                    EAQ     0,X0
         1 000152   000020 772000                    QRL     16
         1 000153   040000 106506                    CMPC    fill='040'O
         1 000154   300003 000010                    ADSC9   3,Q,PR3                  cn=0,n=8
         1 000155   000012 000007 0                  ADSC9   10                       cn=0,n=7
         1 000156   000231 600000 1                  TZE     s:2135
         1 000157   000235 710000 1                  TRA     s:2137
         1 000160   000000 636010                    EAQ     0,X0
         1 000161   000020 772000                    QRL     16
         1 000162   040000 106506                    CMPC    fill='040'O
         1 000163   300003 000010                    ADSC9   3,Q,PR3                  cn=0,n=8
         1 000164   000014 000007 0                  ADSC9   12                       cn=0,n=7
         1 000165   000235 601000 1                  TNZ     s:2137
         1 000166   000224 710000 1                  TRA     s:2133
         1 000167   000000 635010                    EAA     0,X0
         1 000170   000020 771000                    ARL     16
         1 000171   040000 106505                    CMPC    fill='040'O
         1 000172   300003 000010                    ADSC9   3,A,PR3                  cn=0,n=8
         1 000173   000016 000007 0                  ADSC9   14                       cn=0,n=7
         1 000174   000212 602000 1                  TNC     s:2129+94
         1 000175   000000 636010                    EAQ     0,X0
         1 000176   000020 772000                    QRL     16
         1 000177   040000 106506                    CMPC    fill='040'O
         1 000200   300003 000010                    ADSC9   3,Q,PR3                  cn=0,n=8
         1 000201   000016 000007 0                  ADSC9   14                       cn=0,n=7
         1 000202   000221 600000 1                  TZE     s:2131
         1 000203   000000 636010                    EAQ     0,X0
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:21   
         1 000204   000020 772000                    QRL     16
         1 000205   040000 106506                    CMPC    fill='040'O
         1 000206   300003 000010                    ADSC9   3,Q,PR3                  cn=0,n=8
         1 000207   000020 000007 0                  ADSC9   16                       cn=0,n=7
         1 000210   000235 601000 1                  TNZ     s:2137
         1 000211   000224 710000 1                  TRA     s:2133
         1 000212   000000 636010                    EAQ     0,X0
         1 000213   000020 772000                    QRL     16
         1 000214   040000 106506                    CMPC    fill='040'O
         1 000215   300003 000010                    ADSC9   3,Q,PR3                  cn=0,n=8
         1 000216   000022 000007 0                  ADSC9   18                       cn=0,n=7
         1 000217   000235 601000 1                  TNZ     s:2137
         1 000220   000221 710000 1                  TRA     s:2131

      121     2130    2              SELECT ('URP0600','URP8000');

      122     2131    2                DEV$ -> NI$DCT.CTYP = %C_MPC;

   2131  1 000221   000000 236000 2                  LDQ     0
         1 000222   000007 356100                    ANSQ    7,,PR0
         1 000223   000235 710000 1                  TRA     s:2137

      123     2132    2              SELECT ('URPEURP','URP8011','URP8012','URP8013');

      124     2133    2                DEV$ -> NI$DCT.CTYP = %C_EURC;

   2133  1 000224   000007 236100                    LDQ     7,,PR0
         1 000225   000000 376000 2                  ANQ     0
         1 000226   010000 276003                    ORQ     4096,DU
         1 000227   000007 756100                    STQ     7,,PR0
         1 000230   000235 710000 1                  TRA     s:2137

      125     2134    2              SELECT ('URPIPCU','URP8600','URP8601','URP8602');

      126     2135    2                DEV$ -> NI$DCT.CTYP = %C_IPC;

   2135  1 000231   000007 236100                    LDQ     7,,PR0
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:22   
         1 000232   000000 376000 2                  ANQ     0
         1 000233   020000 276003                    ORQ     8192,DU
         1 000234   000007 756100                    STQ     7,,PR0

      127     2136    2              END; /* SELECT */

      128     2137    1           DEV$ -> NI$DCT.FX = CMD$ -> IT$MPC.FX;

   2137  1 000235   200007 470500                    LDP0    DEV$,,AUTO
         1 000236   100002 236100                    LDQ     2,,PR1
         1 000237   000006 772000                    QRL     6
         1 000240   000007 752104                    STCQ    7,'04'O,PR0

      129     2138    1           DEV$ -> NI$DCT.TYPE = %DV_MPC;

   2138  1 000241   200007 470500                    LDP0    DEV$,,AUTO
         1 000242   000700 236007                    LDQ     448,DL
         1 000243   000007 752102                    STCQ    7,'02'O,PR0

      130     2139    1           DEV$ -> NI$DCT.SQH$ = SQH$;

   2139  1 000244   200005 236100                    LDQ     SQH$,,AUTO
         1 000245   200007 470500                    LDP0    DEV$,,AUTO
         1 000246   000022 756100                    STQ     18,,PR0

      131     2140    1           DEV$ -> NI$DCT.DQH$ = PTR$;

   2140  1 000247   200003 473500                    LDP3    @PTR$,,AUTO
         1 000250   300000 236100                    LDQ     0,,PR3
         1 000251   000023 756100                    STQ     19,,PR0

      132     2141    1           DEV$ -> NI$DCT.DFLG.INPUT = YES;

   2141  1 000252   400000 236007                    LDQ     -131072,DL
         1 000253   000006 256100                    ORSQ    6,,PR0

      133     2142    1           DEV$ -> NI$DCT.DFLG.OUTPUT = YES;
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:23   

   2142  1 000254   200007 470500                    LDP0    DEV$,,AUTO
         1 000255   200000 236007                    LDQ     65536,DL
         1 000256   000006 256100                    ORSQ    6,,PR0

      134     2143    1           DEV$ -> NI$DCT.DFLG.PSIA = YES;

   2143  1 000257   200007 470500                    LDP0    DEV$,,AUTO
         1 000260   010000 236007                    LDQ     4096,DL
         1 000261   000006 256100                    ORSQ    6,,PR0

      135     2144    1           DEV$->NI$DCT.MPC.TYPE=%DV_LP;

   2144  1 000262   200007 470500                    LDP0    DEV$,,AUTO
         1 000263   003000 236003                    LDQ     1536,DU
         1 000264   000035 552140                    STBQ    29,'40'O,PR0

      136     2145    1           DEV$ -> NI$DCT.MPC.FWNAME = CMD$ -> IT$MPC.FWNAME;

   2145  1 000265   100004 235100                    LDA     4,,PR1
         1 000266   100005 236100                    LDQ     5,,PR1
         1 000267   000022 773000                    LRL     18
         1 000270   000027 376000 xsym               ANQ     B_VECTNIL+23
         1 000271   000041 756100                    STQ     33,,PR0

      137     2146    1           DEV$ -> NI$DCT.MPC.LPNAME = CMD$ -> IT$MPC.LPFWNAME;

   2146  1 000272   100005 235100                    LDA     5,,PR1
         1 000273   100006 236100                    LDQ     6,,PR1
         1 000274   000022 773000                    LRL     18
         1 000275   000027 376000 xsym               ANQ     B_VECTNIL+23
         1 000276   000042 756100                    STQ     34,,PR0

      138     2147    1           DEV$ -> NI$DCT.MPC.CRPNAME = CMD$ -> IT$MPC.CRPFWNAME;

   2147  1 000277   100006 235100                    LDA     6,,PR1
         1 000300   100007 236100                    LDQ     7,,PR1
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:24   
         1 000301   000022 773000                    LRL     18
         1 000302   000027 376000 xsym               ANQ     B_VECTNIL+23
         1 000303   000043 756100                    STQ     35,,PR0

      139     2148    1           IT_PARTITION.DEVICE(N_DCTXMAX) = CMD$ -> IT$MPC.FLAGS.DOWN;

   2148  1 000304   000000 235000 xsym               LDA     N_DCTXMAX
         1 000305   000307 605000 1                  TPL     s:2148+3
         1 000306   000044 035003                    ADLA    36,DU
         1 000307   003005 060500                    CSL     bolr='003'O
         1 000310   100007 400001                    BDSC    7,,PR1                   by=2,bit=0,n=1
         1 000311   000000 000001 xsym               BDSC    IT_PARTITION,A           by=0,bit=0,n=1

      140     2149        /**/
      141     2150    1           UNITMPC$ = DEV$;

   2150  1 000312   200007 236100                    LDQ     DEV$,,AUTO
         1 000313   200011 756100                    STQ     UNITMPC$,,AUTO

      142     2151    1           MPCX=N_DCTXMAX;

   2151  1 000314   000000 235000 xsym               LDA     N_DCTXMAX
         1 000315   200022 755100                    STA     MPCX,,AUTO

      143     2152        /**/
      144     2153    1           CMD$ = PINCRW(CMD$,SIZEW(IT$MPC));

   2153  1 000316   200004 236100                    LDQ     CMD$,,AUTO
         1 000317   000021 036003                    ADLQ    17,DU
         1 000320   200004 756100                    STQ     CMD$,,AUTO

      145     2154        /**/
      146     2155    2           DO WHILE (CMD$ -> IT$UNITDEV.CNTWD.TYPE ~= %ITS_ENDCMD);

   2155  1 000321   200004 471500                    LDP1    CMD$,,AUTO
         1 000322   100000 236100                    LDQ     0,,PR1
         1 000323   000777 376007                    ANQ     511,DL
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:25   
         1 000324   000145 116007                    CMPQ    101,DL
         1 000325   001132 600000 1                  TZE     s:2283

      147     2156    3              DO J = 0 TO 1;               /* DO BOTH CHANNEL CONECTIONS         */

   2156  1 000326   200015 450100                    STZ     J,,AUTO

      148     2157    4                 IF (CMD$ -> IT$UNITDEV.IOMCHAN.IOM#(J) ~= -1) THEN DO;

   2157  1 000327   200004 470500                    LDP0    CMD$,,AUTO
         1 000330   200015 720100                    LXL0    J,,AUTO
         1 000331   000006 721110                    LXL1    6,X0,PR0
         1 000332   777777 101003                    CMPX1   -1,DU
         1 000333   000530 600000 1                  TZE     s:2206

      149     2158        /**/                                    /* THIS IOM CONNECTION IS THERE       */
      150     2159    4                    DQH$ = PTR$;

   2159  1 000334   200003 471500                    LDP1    @PTR$,,AUTO
         1 000335   100000 236100                    LDQ     0,,PR1
         1 000336   200006 756100                    STQ     DQH$,,AUTO

      151     2160    4                    CALL ITH$ALLOCATE(PTR$,SIZEW(NI$DQH)) ALTRET(ITU$UNIT_ERR);

   2160  1 000337   000002 236000 2                  LDQ     2
         1 000340   200003 235100                    LDA     @PTR$,,AUTO
         1 000341   200024 757100                    STAQ    MPCX+2,,AUTO
         1 000342   200024 630500                    EPPR0   MPCX+2,,AUTO
         1 000343   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000344   000000 701000 xent               TSX1    ITH$ALLOCATE
         1 000345   001133 702000 1                  TSX2    ITU$UNIT_ERR

      152     2161        /**/
      153     2162    4                    CHTX = ((CMD$ -> IT$UNITDEV.IOMCHAN.IOM#(J) * %N_MAXCHANS)

   2162  1 000346   200004 470500                    LDP0    CMD$,,AUTO
         1 000347   200015 720100                    LXL0    J,,AUTO
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:26   
         1 000350   000007 236110                    LDQ     7,X0,PR0
         1 000351   000022 772000                    QRL     18
         1 000352   200024 756100                    STQ     MPCX+2,,AUTO
         1 000353   000006 236110                    LDQ     6,X0,PR0
         1 000354   000022 736000                    QLS     18
         1 000355   000013 732000                    QRS     11
         1 000356   200024 036100                    ADLQ    MPCX+2,,AUTO
         1 000357   200012 756100                    STQ     CHTX,,AUTO

      154     2163    4                      + CMD$ -> IT$UNITDEV.IOMCHAN.CHAN(J));
      155     2164        /**/
      156     2165    5                    IF (NI$CHT$ -> NI$CHT.DQH$(CHTX) ~= ADDR(NIL)) THEN DO;

   2165  1 000360   200012 235100                    LDA     CHTX,,AUTO
         1 000361   000001 735000                    ALS     1
         1 000362   000000 471400 xsym               LDP1    NI$CHT$
         1 000363   100000 236105                    LDQ     0,AL,PR1
         1 000364   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000365   000423 600000 1                  TZE     s:2174

      157     2166    5                       DUPCHANERR_TEXT.COUNT = SIZEC(DUPCHANERR_TEXT) - 1;

   2166  1 000366   014000 236003                    LDQ     6144,DU
         1 000367   200016 552140                    STBQ    DUPCHANERR_TEXT,'40'O,AUTO

      158     2167    5                       DUPCHANERR_TEXT.CHANNEL = 'CHANNEL ';

   2167  1 000370   040100 100400                    MLR     fill='040'O
         1 000371   000024 000010 0                  ADSC9   20                       cn=0,n=8
         1 000372   200016 200010                    ADSC9   DUPCHANERR_TEXT,,AUTO    cn=1,n=8

      159     2168    5                      CALL BINCHAR(DUPCHANERR_TEXT.IOMTEXT,CMD$ -> IT$UNITDEV.IOMCHAN.
              2168                                IOM#(J));

   2168  1 000373   200015 235100                    LDA     J,,AUTO
         1 000374   000002 735000                    ALS     2
         1 000375   000100 301505                    BTD
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:27   
         1 000376   000006 400002                    NDSC9   6,A,PR0                  cn=2,s=lsgnf,sf=0,n=2
         1 000377   200020 230001                    NDSC9   DUPCHANERR_TEXT+2,,AUTO  cn=1,s=nosgn,sf=0,n=1

      160     2169    5                       DUPCHANERR_TEXT.DASH = '-';

   2169  1 000400   055000 236007                    LDQ     23040,DL
         1 000401   200020 552110                    STBQ    DUPCHANERR_TEXT+2,'10'O,AUTO

      161     2170    5                      CALL BINCHAR(DUPCHANERR_TEXT.CHANTEXT,CMD$ -> IT$UNITDEV.IOMCHAN
              2170                                .CHAN(J));

   2170  1 000402   000007 236110                    LDQ     7,X0,PR0
         1 000403   000022 772000                    QRL     18
         1 000404   000000 235003                    LDA     0,DU
         1 000405   200024 757100                    STAQ    MPCX+2,,AUTO
         1 000406   000100 301500                    BTD
         1 000407   200024 000010                    NDSC9   MPCX+2,,AUTO             cn=0,s=lsgnf,sf=0,n=8
         1 000410   200020 630002                    NDSC9   DUPCHANERR_TEXT+2,,AUTO  cn=3,s=nosgn,sf=0,n=2

      162     2171    5                       CALL ITE$ERROR(%E$DUPCHAN,ADDR(DUPCHANERR_TEXT));

   2171  1 000411   200016 633500                    EPPR3   DUPCHANERR_TEXT,,AUTO
         1 000412   200024 453500                    STP3    MPCX+2,,AUTO
         1 000413   200024 634500                    EPPR4   MPCX+2,,AUTO
         1 000414   200027 454500                    STP4    MPCX+5,,AUTO
         1 000415   000004 236000 2                  LDQ     4
         1 000416   200026 756100                    STQ     MPCX+4,,AUTO
         1 000417   200026 630500                    EPPR0   MPCX+4,,AUTO
         1 000420   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000421   000000 701000 xent               TSX1    ITE$ERROR
         1 000422   000000 011000                    NOP     0

      163     2172    5                       END;

      164     2173        /**/
      165     2174    4                    NI$CHT$ -> NI$CHT.POSTER(CHTX) = NI$DVT$(CMD$ ->

PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:28   
   2174  1 000423   200012 235100                    LDA     CHTX,,AUTO
         1 000424   000001 735000                    ALS     1
         1 000425   200004 470500                    LDP0    CMD$,,AUTO
         1 000426   000004 220100                    LDX0    4,,PR0
         1 000427   000777 360003                    ANX0    511,DU
         1 000430   000000 471410 xsym               LDP1    NI$DVT$,X0
         1 000431   100001 236100                    LDQ     1,,PR1
         1 000432   000000 473400 xsym               LDP3    NI$CHT$
         1 000433   300001 756105                    STQ     1,AL,PR3

      166     2175    4                      IT$UNITDEV.TYPE) -> NI$DVT.POSTER;
      167     2176    4                    NI$CHT$ -> NI$CHT.DQH$(CHTX) = DQH$;

   2176  1 000434   200006 236100                    LDQ     DQH$,,AUTO
         1 000435   000000 471400 xsym               LDP1    NI$CHT$
         1 000436   100000 756105                    STQ     0,AL,PR1

      168     2177        /**/
      169     2178    4                    DQH$ -> NI$DQH = NI$DQH_C;   /* set to constant inited struct*/

   2178  1 000437   200006 471500                    LDP1    DQH$,,AUTO
         1 000440   000100 100400                    MLR     fill='000'O
         1 000441   000000 000110 xsym               ADSC9   NI$DQH_C                 cn=0,n=72
         1 000442   100000 000110                    ADSC9   0,,PR1                   cn=0,n=72

      170     2179        /**/
      171     2180        /*               DQH$ -> NI$DQH.FL$ = ADDR(NIL)            */
      172     2181    4                    DQH$ -> NI$DQH.IOCHANX = CHTX;

   2181  1 000443   200012 236100                    LDQ     CHTX,,AUTO
         1 000444   000022 736000                    QLS     18
         1 000445   100001 552120                    STBQ    1,'20'O,PR1

      173     2182    4                    DQH$ -> NI$DQH.SQH$ = SQH$;

   2182  1 000446   200005 236100                    LDQ     SQH$,,AUTO
         1 000447   100013 756100                    STQ     11,,PR1
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:29   

      174     2183        /*               DQH$ -> NI$DQH.IO$ = ADDR(NIL);           */
      175     2184    4                    DQH$ -> NI$DQH.MPC$ = UNITMPC$;

   2184  1 000450   200011 236100                    LDQ     UNITMPC$,,AUTO
         1 000451   100015 756100                    STQ     13,,PR1

      176     2185    5                  IF HW_IMX THEN DO;

   2185  1 000452   000000 234000 xsym               SZN     HW_IMX
         1 000453   000455 605000 1                  TPL     s:2190

      177     2186        /*                DQH$ -> NI$DQH.MBX$ = ADDR(NIL);         */
      178     2187        /*                DQH$ -> NI$DQH.IOSTATUS$ = ADDR(NIL);    */
      179     2188    5                     END;

   2188  1 000454   000514 710000 1                  TRA     s:2201

      180     2189    5                  ELSE DO;

      181     2190    5                     DQH$ -> NI$DQH.MBX$ = PINCRW (NI$IOM$(CMD$->IT$UNITDEV.IOMCHAN.
              2190                              IOM#(J))

   2190  1 000455   200015 720100                    LXL0    J,,AUTO
         1 000456   000006 721110                    LXL1    6,X0,PR0
         1 000457   000000 473411 xsym               LDP3    NI$IOM$,X1
         1 000460   000007 221110                    LDX1    7,X0,PR0
         1 000461   300002 474500                    LDP4    2,,PR3
         1 000462   000000 635011                    EAA     0,X1
         1 000463   000020 771000                    ARL     16
         1 000464   400000 633505                    EPPR3   0,AL,PR4
         1 000465   100021 453500                    STP3    17,,PR1

      182     2191    5                      -> NI$IOM.MBX$, SIZEW(NI$MBX(0)) * CMD$->IT$UNITDEV.IOMCHAN.CHAN
              2191                                (J));
      183     2192    5                     DQH$ -> NI$DQH.IOSTATUS$ = NI$FQ$ -> NI$FQ.HD$;
              2192                              /* STATUS IN LOW REAL MEM */
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:30   

   2192  1 000466   000000 474400 xsym               LDP4    NI$FQ$
         1 000467   400002 236100                    LDQ     2,,PR4
         1 000470   100016 756100                    STQ     14,,PR1

      184     2193    6                     IF HW_IOP THEN DO;

   2193  1 000471   000000 234000 xsym               SZN     HW_IOP
         1 000472   000511 605000 1                  TPL     s:2199

      185     2194    6                       DQH$ -> NI$DQH.IOSTATUS$ -> NI$IOSTAT.AESDCW = %IOP_AESDCW_INIT
              2194                                 ;

   2194  1 000473   100016 475500                    LDP5    14,,PR1
         1 000474   000012 236000 xsym               LDQ     B_VECTNIL+10
         1 000475   500004 756100                    STQ     4,,PR5

      186     2195    6                        DQH$ -> NI$DQH.IOSTATUS$ -> NI$IOSTAT.AESDCW.ADDRESS =

   2195  1 000476   100016 473500                    LDP3    14,,PR1
         1 000477   200024 453500                    STP3    MPCX+2,,AUTO
         1 000500   200024 236100                    LDQ     MPCX+2,,AUTO
         1 000501   000010 036003                    ADLQ    8,DU
         1 000502   000022 772000                    QRL     18
         1 000503   000000 235000 xsym               LDA     B$REAL$
         1 000504   000022 771000                    ARL     18
         1 000505   200025 755100                    STA     MPCX+3,,AUTO
         1 000506   200025 136100                    SBLQ    MPCX+3,,AUTO
         1 000507   000000 621006                    EAX1    0,QL
         1 000510   300004 741100                    STX1    4,,PR3

      187     2196    6                          POFFW (ADDR (DQH$ -> NI$DQH.IOSTATUS$ -> NI$IOSTAT.EXTST),
              2196                                   B$REAL$);
      188     2197    6                        END;

      189     2198
      190     2199    5                    NI$FQ$ -> NI$FQ.HD$ = PINCRW(NI$FQ$ -> NI$FQ.HD$,SIZEW(NI$IOSTAT))
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:31   
              2199                              ;

   2199  1 000511   400002 236100                    LDQ     2,,PR4
         1 000512   000020 036003                    ADLQ    16,DU
         1 000513   400002 756100                    STQ     2,,PR4

      191     2200    5                     END;

      192     2201    4                    UNITMPC$->NI$DCT.MPC.IOCHANX(CHX)=CHTX;

   2201  1 000514   200011 473500                    LDP3    UNITMPC$,,AUTO
         1 000515   200013 235100                    LDA     CHX,,AUTO
         1 000516   000105 101500                    MRL     fill='000'O
         1 000517   200012 000004                    ADSC9   CHTX,,AUTO               cn=0,n=4
         1 000520   300031 000001                    ADSC9   25,A,PR3                 cn=0,n=1

      193     2202    4                    IT_PARTITION.IOCHAN(CHTX) = CMD$->IT$UNITDEV.FLAGS.DOWN;

   2202  1 000521   200012 236100                    LDQ     CHTX,,AUTO
         1 000522   000524 605000 1                  TPL     s:2202+3
         1 000523   000044 036003                    ADLQ    36,DU
         1 000524   003006 060500                    CSL     bolr='003'O
         1 000525   000001 030001                    BDSC    1,,PR0                   by=0,bit=3,n=1
         1 000526   000012 000001 xsym               BDSC    IT_PARTITION+10,Q        by=0,bit=0,n=1

      194     2203    4                    CHX=CHX+1;

   2203  1 000527   200013 054100                    AOS     CHX,,AUTO

      195     2204        /**/
      196     2205    4                    END;

      197     2206    3                 END;

   2206  1 000530   200015 054100                    AOS     J,,AUTO
         1 000531   200015 235100                    LDA     J,,AUTO
         1 000532   000001 115007                    CMPA    1,DL
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:32   
         1 000533   000327 604400 1                  TMOZ    s:2157

      198     2207        /**/
      199     2208    2              SQH$ -> NI$SQH.NDCT = SQH$ -> NI$SQH.NDCT + 1;

   2208  1 000534   200005 471500                    LDP1    SQH$,,AUTO
         1 000535   100002 720100                    LXL0    2,,PR1
         1 000536   000001 621010                    EAX1    1,X0
         1 000537   100002 441100                    SXL1    2,,PR1

      200     2209        /**/
      201     2210                   /* BUILD DCT ENTRY FOR DEVICE */
      202     2211    2              CALL ITH$DCT_INIT(PTR$,DEV$) ALTRET(ITU$UNIT_ERR);

   2211  1 000540   200007 631500                    EPPR1   DEV$,,AUTO
         1 000541   200025 451500                    STP1    MPCX+3,,AUTO
         1 000542   200003 236100                    LDQ     @PTR$,,AUTO
         1 000543   200024 756100                    STQ     MPCX+2,,AUTO
         1 000544   200024 630500                    EPPR0   MPCX+2,,AUTO
         1 000545   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000546   000000 701000 xent               TSX1    ITH$DCT_INIT
         1 000547   001133 702000 1                  TSX2    ITU$UNIT_ERR

      203     2212    2              DEV$ -> NI$DCT.DEVNM = CMD$ -> IT$UNITDEV.NAME;

   2212  1 000550   200004 470500                    LDP0    CMD$,,AUTO
         1 000551   200007 471500                    LDP1    DEV$,,AUTO
         1 000552   040100 100500                    MLR     fill='040'O
         1 000553   000002 000010                    ADSC9   2,,PR0                   cn=0,n=8
         1 000554   100002 000010                    ADSC9   2,,PR1                   cn=0,n=8

      204     2213    2              DEV$ -> NI$DCT.DVT$ = NI$DVT$(CMD$ -> IT$UNITDEV.TYPE);

   2213  1 000555   000004 220100                    LDX0    4,,PR0
         1 000556   000777 360003                    ANX0    511,DU
         1 000557   000000 236010 xsym               LDQ     NI$DVT$,X0
         1 000560   200007 471500                    LDP1    DEV$,,AUTO
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:33   
         1 000561   100024 756100                    STQ     20,,PR1

      205     2214    2              DEV$ -> NI$DCT.TYPE = DEV$ -> NI$DCT.DVT$ -> NI$DVT.TYPE;

   2214  1 000562   100024 473500                    LDP3    20,,PR1
         1 000563   300053 236100                    LDQ     43,,PR3
         1 000564   000025 772000                    QRL     21
         1 000565   100007 752102                    STCQ    7,'02'O,PR1

      206     2215    2              DEV$ -> NI$DCT.MODX = CMD$ -> IT$UNITDEV.MODX;

   2215  1 000566   200007 471500                    LDP1    DEV$,,AUTO
         1 000567   000004 236100                    LDQ     4,,PR0
         1 000570   000011 736000                    QLS     9
         1 000571   100007 752110                    STCQ    7,'10'O,PR1

      207     2216    2              DEV$ -> NI$DCT.FX = CMD$ -> IT$UNITDEV.FX;

   2216  1 000572   200007 471500                    LDP1    DEV$,,AUTO
         1 000573   000004 236100                    LDQ     4,,PR0
         1 000574   000014 736000                    QLS     12
         1 000575   100007 752104                    STCQ    7,'04'O,PR1

      208     2217    2              DEV$ -> NI$DCT.DVN = 1;      /* DEVICE NUMBER ALWAYS ONE           */

   2217  1 000576   200007 471500                    LDP1    DEV$,,AUTO
         1 000577   000100 236003                    LDQ     64,DU
         1 000600   100007 752120                    STCQ    7,'20'O,PR1

      209     2218    2              DEV$ -> NI$DCT.SQH$ = SQH$;

   2218  1 000601   200005 236100                    LDQ     SQH$,,AUTO
         1 000602   200007 471500                    LDP1    DEV$,,AUTO
         1 000603   100022 756100                    STQ     18,,PR1

      210     2219    2              DEV$ -> NI$DCT.DQH$ = DQH$;

PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:34   
   2219  1 000604   200006 236100                    LDQ     DQH$,,AUTO
         1 000605   100023 756100                    STQ     19,,PR1

      211     2220    2              DEV$ -> NI$DCT.DFLG.INPUT = CMD$ -> IT$UNITDEV.FLAGS.INPUT;

   2220  1 000606   000001 236100                    LDQ     1,,PR0
         1 000607   000022 772000                    QRL     18
         1 000610   100006 676100                    ERQ     6,,PR1
         1 000611   400000 376007                    ANQ     -131072,DL
         1 000612   100006 656100                    ERSQ    6,,PR1

      212     2221    2              DEV$ -> NI$DCT.DFLG.OUTPUT = CMD$ -> IT$UNITDEV.FLAGS.OUTPUT;

   2221  1 000613   200007 471500                    LDP1    DEV$,,AUTO
         1 000614   000001 236100                    LDQ     1,,PR0
         1 000615   000022 772000                    QRL     18
         1 000616   100006 676100                    ERQ     6,,PR1
         1 000617   200000 376007                    ANQ     65536,DL
         1 000620   100006 656100                    ERSQ    6,,PR1

      213     2222    2              DEV$ -> NI$DCT.DFLG.CM = CMD$ -> IT$UNITDEV.FLAGS.CM;

   2222  1 000621   200007 471500                    LDP1    DEV$,,AUTO
         1 000622   000001 236100                    LDQ     1,,PR0
         1 000623   000022 772000                    QRL     18
         1 000624   100006 676100                    ERQ     6,,PR1
         1 000625   100000 376007                    ANQ     32768,DL
         1 000626   100006 656100                    ERSQ    6,,PR1

      214     2223    2              DEV$ -> NI$DCT.DFLG.SYMBIONT = CMD$ -> IT$UNITDEV.FLAGS.SYMBIONT;

   2223  1 000627   200007 471500                    LDP1    DEV$,,AUTO
         1 000630   000001 236100                    LDQ     1,,PR0
         1 000631   000022 772000                    QRL     18
         1 000632   100006 676100                    ERQ     6,,PR1
         1 000633   020000 376007                    ANQ     8192,DL
         1 000634   100006 656100                    ERSQ    6,,PR1
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:35   

      215     2224    2              DEV$ -> NI$DCT.DFLG.PSIA = CMD$ -> IT$UNITDEV.FLAGS.PSIA;

   2224  1 000635   200007 471500                    LDP1    DEV$,,AUTO
         1 000636   000001 236100                    LDQ     1,,PR0
         1 000637   000022 772000                    QRL     18
         1 000640   100006 676100                    ERQ     6,,PR1
         1 000641   010000 376007                    ANQ     4096,DL
         1 000642   100006 656100                    ERSQ    6,,PR1

      216     2225    2              DEV$ -> NI$DCT.CTYP = UNITMPC$ -> NI$DCT.CTYP;

   2225  1 000643   200011 471500                    LDP1    UNITMPC$,,AUTO
         1 000644   200007 473500                    LDP3    DEV$,,AUTO
         1 000645   100007 236100                    LDQ     7,,PR1
         1 000646   300007 676100                    ERQ     7,,PR3
         1 000647   070000 376003                    ANQ     28672,DU
         1 000650   300007 656100                    ERSQ    7,,PR3

      217     2226        /**/
      218     2227    2              IT_PARTITION.DEVICE(N_DCTXMAX) = CMD$ -> IT$UNITDEV.FLAGS.DOWN;

   2227  1 000651   000000 235000 xsym               LDA     N_DCTXMAX
         1 000652   000654 605000 1                  TPL     s:2227+3
         1 000653   000044 035003                    ADLA    36,DU
         1 000654   003005 060500                    CSL     bolr='003'O
         1 000655   000001 030001                    BDSC    1,,PR0                   by=0,bit=3,n=1
         1 000656   000000 000001 xsym               BDSC    IT_PARTITION,A           by=0,bit=0,n=1

      219     2228        /**/
      220     2229    3              IF DEV$ -> NI$DCT.DVT$ -> NI$DVT.TYPE = %DV_LP THEN DO;

   2229  1 000657   200007 473500                    LDP3    DEV$,,AUTO
         1 000660   300024 474500                    LDP4    20,,PR3
         1 000661   400053 236100                    LDQ     43,,PR4
         1 000662   777000 376003                    ANQ     -512,DU
         1 000663   003000 116003                    CMPQ    1536,DU
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:36   
         1 000664   000777 601000 1                  TNZ     s:2253

      221     2230    3                 IT_GOTLP = YES;

   2230  1 000665   400000 236003                    LDQ     -131072,DU
         1 000666   000000 756000 xsym               STQ     IT_GOTLP

      222     2231    3                 DEV$ -> NI$DCT.LP.CHAIN$ = PTR$;

   2231  1 000667   200003 475500                    LDP5    @PTR$,,AUTO
         1 000670   500000 236100                    LDQ     0,,PR5
         1 000671   300032 756100                    STQ     26,,PR3

      223     2232        /**/
      224     2233    3           I = CMD$ -> IT$UNITDEV.CHAINL;

   2233  1 000672   000013 235100                    LDA     11,,PR0
         1 000673   000014 236100                    LDQ     12,,PR0
         1 000674   000022 773000                    LRL     18
         1 000675   200014 756100                    STQ     I,,AUTO

      225     2234    3           CALL ITH$ALLOCATE(PTR$,I)

   2234  1 000676   200014 636500                    EPPR6   I,,AUTO
         1 000677   200025 456500                    STP6    MPCX+3,,AUTO
         1 000700   200003 236100                    LDQ     @PTR$,,AUTO
         1 000701   200024 756100                    STQ     MPCX+2,,AUTO
         1 000702   200024 630500                    EPPR0   MPCX+2,,AUTO
         1 000703   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000704   000000 701000 xent               TSX1    ITH$ALLOCATE
         1 000705   001133 702000 1                  TSX2    ITU$UNIT_ERR

      226     2235    3              ALTRET(ITU$UNIT_ERR);
      227     2236        /**/
      228     2237    4                 DO I = 0 TO CMD$ -> IT$UNITDEV.CHAINL - 1;

   2237  1 000706   200014 450100                    STZ     I,,AUTO
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:37   
         1 000707   000723 710000 1                  TRA     s:2240+1

      229     2238    4                    DEV$ -> NI$DCT.LP.CHAIN$ -> IT$WORD(I) =

   2238  1 000710   200007 470500                    LDP0    DEV$,,AUTO
         1 000711   000032 471500                    LDP1    26,,PR0
         1 000712   200004 473500                    LDP3    CMD$,,AUTO
         1 000713   000100 100500                    MLR     fill='000'O
         1 000714   300012 400004                    ADSC9   10,,PR3                  cn=2,n=4
         1 000715   200024 000004                    ADSC9   MPCX+2,,AUTO             cn=0,n=4
         1 000716   200024 474500                    LDP4    MPCX+2,,AUTO
         1 000717   200014 720100                    LXL0    I,,AUTO
         1 000720   400000 235110                    LDA     0,X0,PR4
         1 000721   100000 755110                    STA     0,X0,PR1

      230     2239    4                      CMD$ -> IT$UNITDEV.CHAIN$ -> IT$WORD(I);
      231     2240    4                    END;

   2240  1 000722   200014 054100                    AOS     I,,AUTO
         1 000723   200004 470500                    LDP0    CMD$,,AUTO
         1 000724   000013 235100                    LDA     11,,PR0
         1 000725   000014 236100                    LDQ     12,,PR0
         1 000726   000022 773000                    LRL     18
         1 000727   000000 116003                    CMPQ    0,DU
         1 000730   000710 604000 1                  TMI     s:2238
         1 000731   200014 116100                    CMPQ    I,,AUTO
         1 000732   000710 605400 1                  TPNZ    s:2238

      232     2241        /**/
      233     2242    3                 DEV$ -> NI$DCT.LP.VFC$ = PTR$;

   2242  1 000733   200003 471500                    LDP1    @PTR$,,AUTO
         1 000734   100000 236100                    LDQ     0,,PR1
         1 000735   200007 473500                    LDP3    DEV$,,AUTO
         1 000736   300030 756100                    STQ     24,,PR3

      234     2243    3                 DEV$ -> NI$DCT.LP.VFCL = CMD$ -> IT$UNITDEV.VFCL;
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:38   

   2243  1 000737   000011 235100                    LDA     9,,PR0
         1 000740   000012 236100                    LDQ     10,,PR0
         1 000741   000022 773000                    LRL     18
         1 000742   300031 756100                    STQ     25,,PR3

      235     2244        /**/
      236     2245    3           CALL ITH$ALLOCATE(PTR$,%MAXVFCL) ALTRET(ITU$UNIT_ERR);

   2245  1 000743   000006 236000 2                  LDQ     6
         1 000744   200003 235100                    LDA     @PTR$,,AUTO
         1 000745   200024 757100                    STAQ    MPCX+2,,AUTO
         1 000746   200024 630500                    EPPR0   MPCX+2,,AUTO
         1 000747   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000750   000000 701000 xent               TSX1    ITH$ALLOCATE
         1 000751   001133 702000 1                  TSX2    ITU$UNIT_ERR

      237     2246        /**/
      238     2247    4                 DO I = 0 TO CMD$ -> IT$UNITDEV.VFCL - 1;

   2247  1 000752   200014 450100                    STZ     I,,AUTO
         1 000753   000767 710000 1                  TRA     s:2250+1

      239     2248    4                    DEV$ -> NI$DCT.LP.VFC$ -> IT$WORD(I) =

   2248  1 000754   200007 470500                    LDP0    DEV$,,AUTO
         1 000755   000030 471500                    LDP1    24,,PR0
         1 000756   200004 473500                    LDP3    CMD$,,AUTO
         1 000757   000100 100500                    MLR     fill='000'O
         1 000760   300010 400004                    ADSC9   8,,PR3                   cn=2,n=4
         1 000761   200024 000004                    ADSC9   MPCX+2,,AUTO             cn=0,n=4
         1 000762   200024 474500                    LDP4    MPCX+2,,AUTO
         1 000763   200014 720100                    LXL0    I,,AUTO
         1 000764   400000 235110                    LDA     0,X0,PR4
         1 000765   100000 755110                    STA     0,X0,PR1

      240     2249    4                      CMD$ -> IT$UNITDEV.VFC$ -> IT$WORD(I);
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:39   
      241     2250    4                    END;

   2250  1 000766   200014 054100                    AOS     I,,AUTO
         1 000767   200004 470500                    LDP0    CMD$,,AUTO
         1 000770   000011 235100                    LDA     9,,PR0
         1 000771   000012 236100                    LDQ     10,,PR0
         1 000772   000022 773000                    LRL     18
         1 000773   000000 116003                    CMPQ    0,DU
         1 000774   000754 604000 1                  TMI     s:2248
         1 000775   200014 116100                    CMPQ    I,,AUTO
         1 000776   000754 605400 1                  TPNZ    s:2248

      242     2251    3                 END;

      243     2252        /**/
      244     2253    2              CALL ITH$RAT_INIT(PTR$,RAT$) ALTRET(ITU$UNIT_ERR);

   2253  1 000777   200010 631500                    EPPR1   RAT$,,AUTO
         1 001000   200025 451500                    STP1    MPCX+3,,AUTO
         1 001001   200003 236100                    LDQ     @PTR$,,AUTO
         1 001002   200024 756100                    STQ     MPCX+2,,AUTO
         1 001003   200024 630500                    EPPR0   MPCX+2,,AUTO
         1 001004   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 001005   000000 701000 xent               TSX1    ITH$RAT_INIT
         1 001006   001133 702000 1                  TSX2    ITU$UNIT_ERR

      245     2254    2              DEV$ -> NI$DCT.RAT$ = RAT$;

   2254  1 001007   200010 236100                    LDQ     RAT$,,AUTO
         1 001010   200007 470500                    LDP0    DEV$,,AUTO
         1 001011   000005 756100                    STQ     5,,PR0

      246     2255    2              RAT$ -> FR$RAT.M1 = NI$DVT$(CMD$ -> IT$UNITDEV.TYPE) -> NI$DVT.ATTR;

   2255  1 001012   200004 470500                    LDP0    CMD$,,AUTO
         1 001013   000004 220100                    LDX0    4,,PR0
         1 001014   000777 360003                    ANX0    511,DU
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:40   
         1 001015   000000 471410 xsym               LDP1    NI$DVT$,X0
         1 001016   100056 721100                    LXL1    46,,PR1
         1 001017   200010 473500                    LDP3    RAT$,,AUTO
         1 001020   300006 741100                    STX1    6,,PR3

      247     2256    2              IF (CMD$ -> IT$UNITDEV.CHAIN$ = ADDR(IT_CHAIN500)) THEN

   2256  1 001021   000012 235100                    LDA     10,,PR0
         1 001022   000013 236100                    LDQ     11,,PR0
         1 001023   000022 773000                    LRL     18
         1 001024   000027 376000 xsym               ANQ     B_VECTNIL+23
         1 001025   000007 116000 2                  CMPQ    7
         1 001026   001033 601000 1                  TNZ     s:2258

      248     2257    2                 RAT$ -> FR$RAT.M1 = RAT$ -> FR$RAT.M1 & ~%ATTR_LOWERCASE#;

   2257  1 001027   200010 471500                    LDP1    RAT$,,AUTO
         1 001030   100006 220100                    LDX0    6,,PR1
         1 001031   777776 360003                    ANX0    -2,DU
         1 001032   100006 740100                    STX0    6,,PR1

      249     2258    2              IF (CMD$ -> IT$UNITDEV.FLAGS.SYMBIONT) THEN

   2258  1 001033   000001 236100                    LDQ     1,,PR0
         1 001034   020000 316003                    CANQ    8192,DU
         1 001035   001041 600000 1                  TZE     s:2260

      250     2259    2                 RAT$ -> FR$RAT.FLG.SYMBIONT = YES;

   2259  1 001036   200010 471500                    LDP1    RAT$,,AUTO
         1 001037   000001 236007                    LDQ     1,DL
         1 001040   100010 256100                    ORSQ    8,,PR1

      251     2260    2              RAT$ -> FR$RAT.TYP = CMD$ -> IT$UNITDEV.NM.MNEM;

   2260  1 001041   000002 220100                    LDX0    2,,PR0
         1 001042   200010 471500                    LDP1    RAT$,,AUTO
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:41   
         1 001043   100010 740100                    STX0    8,,PR1

      252     2261    2              RAT$ -> FR$RAT.REEL.SER = CMD$ -> IT$UNITDEV.FORMNAME;

   2261  1 001044   200010 471500                    LDP1    RAT$,,AUTO
         1 001045   040100 100500                    MLR     fill='040'O
         1 001046   000005 000006                    ADSC9   5,,PR0                   cn=0,n=6
         1 001047   100004 400006                    ADSC9   4,,PR1                   cn=2,n=6

      253     2262    2              IF (RAT$ -> FR$RAT.REEL.SER ~= ' ') THEN

   2262  1 001050   200010 471500                    LDP1    RAT$,,AUTO
         1 001051   040000 106500                    CMPC    fill='040'O
         1 001052   100004 400006                    ADSC9   4,,PR1                   cn=2,n=6
         1 001053   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
         1 001054   001057 600000 1                  TZE     s:2264

      254     2263    2                 RAT$ -> FR$RAT.FLG.FORM = YES;

   2263  1 001055   000010 236007                    LDQ     8,DL
         1 001056   100010 256100                    ORSQ    8,,PR1

      255     2264    2              RAT$ -> FR$RAT.FLG.FORM = YES;

   2264  1 001057   200010 471500                    LDP1    RAT$,,AUTO
         1 001060   000010 236007                    LDQ     8,DL
         1 001061   100010 256100                    ORSQ    8,,PR1

      256     2265    2              RAT$ -> FR$RAT.FLG.RUP = YES;

   2265  1 001062   200010 471500                    LDP1    RAT$,,AUTO
         1 001063   000004 236007                    LDQ     4,DL
         1 001064   100010 256100                    ORSQ    8,,PR1

      257     2266        /**/
      258     2267    2              RAT$ = ADDR(FR$HD$(FR_NPOOL));

PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:42   
   2267  1 001065   000010 236000 2                  LDQ     8
         1 001066   200010 756100                    STQ     RAT$,,AUTO

      259     2268    2              IF (RAT$ -> IT$PTR = ADDR(NIL)) THEN

   2268  1 001067   200010 471500                    LDP1    RAT$,,AUTO
         1 001070   100000 236100                    LDQ     0,,PR1
         1 001071   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 001072   001077 601000 1                  TNZ     s:2271

      260     2269    2                 RAT$ -> IT$PTR = DEV$ -> NI$DCT.RAT$;

   2269  1 001073   200007 473500                    LDP3    DEV$,,AUTO
         1 001074   300005 236100                    LDQ     5,,PR3
         1 001075   100000 756100                    STQ     0,,PR1
         1 001076   001114 710000 1                  TRA     s:2278

      261     2270    3              ELSE DO;

      262     2271    3                 RAT$ = FR$HD$(FR_NPOOL);

   2271  1 001077   000002 236000 xsym               LDQ     FR$HD$+2
         1 001100   200010 756100                    STQ     RAT$,,AUTO

      263     2272    4                 DO WHILE (RAT$ -> FR$RAT.LNK$ ~= ADDR(NIL));

   2272  1 001101   001105 710000 1                  TRA     s:2274

      264     2273    4                    RAT$ = RAT$ -> FR$RAT.LNK$;

   2273  1 001102   200010 470500                    LDP0    RAT$,,AUTO
         1 001103   000000 236100                    LDQ     0,,PR0
         1 001104   200010 756100                    STQ     RAT$,,AUTO

      265     2274    4                    END;

   2274  1 001105   200010 470500                    LDP0    RAT$,,AUTO
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:43   
         1 001106   000000 236100                    LDQ     0,,PR0
         1 001107   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 001110   001102 601000 1                  TNZ     s:2273

      266     2275    3                 RAT$ -> FR$RAT.LNK$ = DEV$ -> NI$DCT.RAT$;

   2275  1 001111   200007 471500                    LDP1    DEV$,,AUTO
         1 001112   100005 236100                    LDQ     5,,PR1
         1 001113   000000 756100                    STQ     0,,PR0

      267     2276    3                 END;

      268     2277        /**/
      269     2278    2              FR_PRM$(0) -> FR$PR(FR_NPOOL) = FR_PRM$(0) -> FR$PR(FR_NPOOL) + 1;

   2278  1 001114   000000 470400 xsym               LDP0    FR_PRM$
         1 001115   000002 054100                    AOS     2,,PR0

      270     2279        /**/
      271     2280    2              CMD$ = PINCRW(CMD$,CMD$ -> IT$UNITDEV.CNTWD.OFFSET);

   2280  1 001116   200004 471500                    LDP1    CMD$,,AUTO
         1 001117   100000 236100                    LDQ     0,,PR1
         1 001120   000011 772000                    QRL     9
         1 001121   000777 376007                    ANQ     511,DL
         1 001122   000022 736000                    QLS     18
         1 001123   200004 036100                    ADLQ    CMD$,,AUTO
         1 001124   200004 756100                    STQ     CMD$,,AUTO

      272     2281    2              END;

   2281  1 001125   200004 471500                    LDP1    CMD$,,AUTO
         1 001126   100000 236100                    LDQ     0,,PR1
         1 001127   000777 376007                    ANQ     511,DL
         1 001130   000145 116007                    CMPQ    101,DL
         1 001131   000326 601000 1                  TNZ     s:2156

PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:44   
      273     2282        /**/
      274     2283    1           RETURN;

   2283  1 001132   000000 702200 xent               TSX2  ! X66_ARET

      275     2284    1   ITU$UNIT_ERR:
      276     2285    1           ALTRETURN;

   2285  1 001133   000000 702200 xent  ITU$UNIT_ERR TSX2  ! X66_AALT

(unnamed)
 Sect OctLoc
   0     000   125122 120070   060061 062040   125122 120070   066060 061040    URP8012 URP8601
   0     004   125122 120105   125122 120040   125122 120111   120103 125040    URPEURP URPIPCU
   0     010   125122 120070   066060 062040   125122 120070   066060 060040    URP8602 URP8600
   0     014   125122 120070   060061 063040   125122 120070   060060 060040    URP8013 URP8000
   0     020   125122 120070   060061 061040   125122 120060   066060 060040    URP8011 URP0600
   0     024   103110 101116   116105 114040                                    CHANNEL

(unnamed)
 Sect OctLoc
   2     000   707777 777777   000000 000022   000001 006000   000000 000147    ...............g
   2     004   000003 006000   000000 000020   000005 006000   000000 006000    ................
   2     010   000002 006000                                                    ....
      277     2286    1   END;

PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:45   
--  Include file information  --

   IT_IDATA_R.:E05TOU  cannot be made into a system file and is referenced.
   HF_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   FR_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   NI_DATA_C.:E05TOU  is referenced.
   FR_SUBS.:E05TOU  is referenced.
   FR$RAT.:E05TOU  is referenced.
   NK_SUBS.:E05TOU  is referenced.
   IT$MPC.:E05TOU  cannot be made into a system file and is referenced.
   IT$CMDWD.:E05TOU  cannot be made into a system file and is referenced.
   IT$UNITDEV.:E05TOU  cannot be made into a system file and is referenced.
   IT_SUBS_C.:E05TOU  is referenced.
   IT_ERROR_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
      No diagnostics issued in procedure ITU$UNIT.
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:46   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @PTR$                     12-0-0/w SBIN        r     1 CHTX
    13-0-0/w SBIN        r     1 CHX                        4-0-0/w PTR         r     1 CMD$
     7-0-0/w PTR         r     1 DEV$                       6-0-0/w PTR         r     1 DQH$
    16-0-0/c STRC(117)   r     1 DUPCHANERR_TEXT           14-0-0/w SBIN        r     1 I
    15-0-0/w SBIN        r     1 J                         22-0-0/w SBIN        r     1 MPCX
    *0-0-0/w PTR         r     1 PTR$                      10-0-0/w PTR         r     1 RAT$
     5-0-0/w PTR         r     1 SQH$                      11-0-0/w PTR         r     1 UNITMPC$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$DS5$                     0-0-0/w PTR         r     1 B$REAL$
     0-0-0/w PTR         r     1 FR$HD$(0:3)
     0-0-0/w PTR         r     1 FR_PRM$(0:0)
     0-0-0/w BIT         r     1 HW_IMX                     0-0-0/w BIT         r     1 HW_IOP
     0-0-0/w CHAR(40)    r     1 IT_CHAIN500(0:5)
     0-0-0/b BIT         r     1 IT_GOTLP                   0-0-0/w STRC(1800)  r     1 IT_PARTITION
     0-0-0/w PTR         r     1 N$DCT$$                    0-0-0/w PTR         r     1 N$FQ$
     0-0-0/w PTR         r     1 NI$CHT$                    0-0-0/w STRC(648)   r     1 NI$DQH_C
     0-0-0/w PTR         r     1 NI$DVT$(0:49)              0-0-0/w PTR         r     1 NI$FQ$
     0-0-0/w PTR         r     1 NI$IBUF$
     0-0-0/w PTR         r     1 NI$IOM$(0:3)
     0-0-0/w PTR         r     1 NI$RP$                     0-0-0/w SBIN        r     1 N_DCTXMAX

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:47   

     0-0-0/w SBIN        r     1 FR$PR(0:0)                 0-0-0/w STRC(324)   r     1 FR$RAT
     0-0-0/w UBIN        r     1 IT$CMDWD                   0-0-0/w STRC(594)   r     1 IT$MPC
     0-0-0/w PTR         r     1 IT$PTR                     0-0-0/w STRC(450)   r     1 IT$UNITDEV
     0-0-0/w UBIN        r     1 IT$WORD(0:0)
     0-0-0/w STRC(72)    r     1 NI$CHT(0:127)              0-0-0/w STRC(1332)  r     1 NI$DCT
     0-0-0/w STRC(648)   r     1 NI$DQH                     0-0-0/w STRC(2844)  r     1 NI$DVT
     0-0-0/w STRC(144)   r     1 NI$FQ                      0-0-0/w STRC(252)   r     1 NI$IOM
     0-0-0/d STRC(576)   r     1 NI$IOSTAT                  0-0-0/d STRC(144)   r     1 NI$MBX(0:63)
     0-0-0/w STRC(252)   r     1 NI$SQH


   Procedure ITU$UNIT requires 604 words for executable code.
   Procedure ITU$UNIT requires 24 words of local(AUTO) storage.

    No errors detected in file ITU$UNIT.:E05TSI    .
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:48   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:49   
          MINI XREF LISTING

B$DS5$
      1779**DCL      2113>>ASSIGN
B$REAL$
      1778**DCL      2195>>ASSIGN
CHTX
      1621**DCL      2162<<ASSIGN   2165>>IF       2174>>ASSIGN   2176>>ASSIGN   2181>>ASSIGN   2201>>ASSIGN
      2202>>ASSIGN
CHX
      1622**DCL      2120<<ASSIGN   2201>>ASSIGN   2203<<ASSIGN   2203>>ASSIGN
CMD$
      1615**DCL      2113<<ASSIGN   2114<<ASSIGN   2114>>ASSIGN   2126>>ASSIGN   2127>>ASSIGN   2128>>ASSIGN
      2137>>ASSIGN   2145>>ASSIGN   2146>>ASSIGN   2147>>ASSIGN   2148>>ASSIGN   2153<<ASSIGN   2153>>ASSIGN
      2155>>DOWHILE  2157>>IF       2162>>ASSIGN   2162>>ASSIGN   2168>>CALLBLT  2170>>CALLBLT  2174>>ASSIGN
      2190>>ASSIGN   2190>>ASSIGN   2202>>ASSIGN   2212>>ASSIGN   2213>>ASSIGN   2215>>ASSIGN   2216>>ASSIGN
      2220>>ASSIGN   2221>>ASSIGN   2222>>ASSIGN   2223>>ASSIGN   2224>>ASSIGN   2227>>ASSIGN   2233>>ASSIGN
      2237>>DOINDEX  2238>>ASSIGN   2243>>ASSIGN   2247>>DOINDEX  2248>>ASSIGN   2255>>ASSIGN   2256>>IF
      2258>>IF       2260>>ASSIGN   2261>>ASSIGN   2280<<ASSIGN   2280>>ASSIGN   2280>>ASSIGN
DEV$
      1618**DCL      2119<>CALL     2123>>ASSIGN   2125>>ASSIGN   2126>>ASSIGN   2127>>ASSIGN   2128>>ASSIGN
      2129>>DOSELCT  2129>>DOSELCT  2131>>ASSIGN   2133>>ASSIGN   2135>>ASSIGN   2137>>ASSIGN   2138>>ASSIGN
      2139>>ASSIGN   2140>>ASSIGN   2141>>ASSIGN   2142>>ASSIGN   2143>>ASSIGN   2144>>ASSIGN   2145>>ASSIGN
      2146>>ASSIGN   2147>>ASSIGN   2150>>ASSIGN   2211<>CALL     2212>>ASSIGN   2213>>ASSIGN   2214>>ASSIGN
      2214>>ASSIGN   2215>>ASSIGN   2216>>ASSIGN   2217>>ASSIGN   2218>>ASSIGN   2219>>ASSIGN   2220>>ASSIGN
      2221>>ASSIGN   2222>>ASSIGN   2223>>ASSIGN   2224>>ASSIGN   2225>>ASSIGN   2229>>IF       2231>>ASSIGN
      2238>>ASSIGN   2242>>ASSIGN   2243>>ASSIGN   2248>>ASSIGN   2254>>ASSIGN   2269>>ASSIGN   2275>>ASSIGN
DQH$
      1617**DCL      2159<<ASSIGN   2176>>ASSIGN   2178>>ASSIGN   2181>>ASSIGN   2182>>ASSIGN   2184>>ASSIGN
      2190>>ASSIGN   2192>>ASSIGN   2194>>ASSIGN   2195>>ASSIGN   2195>>ASSIGN   2219>>ASSIGN
DUPCHANERR_TEXT
      1625**DCL      2166--ASSIGN   2171--CALL
DUPCHANERR_TEXT.CHANNEL
      1627**DCL      2167<<ASSIGN
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:50   
DUPCHANERR_TEXT.CHANTEXT
      1630**DCL      2170<<CALLBLT
DUPCHANERR_TEXT.COUNT
      1626**DCL      2166<<ASSIGN
DUPCHANERR_TEXT.DASH
      1629**DCL      2169<<ASSIGN
DUPCHANERR_TEXT.IOMTEXT
      1628**DCL      2168<<CALLBLT
FR$HD$
      1913**DCL      2267--ASSIGN   2271>>ASSIGN
FR$PR
      1919**DCL      2278<<ASSIGN   2278>>ASSIGN
FR$RAT.FLG.FORM
      1538**DCL      2263<<ASSIGN   2264<<ASSIGN
FR$RAT.FLG.RUP
      1539**DCL      2265<<ASSIGN
FR$RAT.FLG.SYMBIONT
      1541**DCL      2259<<ASSIGN
FR$RAT.LNK$
      1506**DCL      2272>>DOWHILE  2273>>ASSIGN   2275<<ASSIGN
FR$RAT.M1
      1527**DCL      2255<<ASSIGN   2257<<ASSIGN   2257>>ASSIGN
FR$RAT.REEL.SER
      1526**DCL      2261<<ASSIGN   2262>>IF
FR$RAT.TYP
      1529**DCL      2260<<ASSIGN
FR_PRM$
      1920**DCL      2278>>ASSIGN   2278>>ASSIGN
HW_IMX
      1978**DCL      2185>>IF
HW_IOP
      1975**DCL      2193>>IF
I
      1623**DCL      2233<<ASSIGN   2234<>CALL     2237<<DOINDEX  2238>>ASSIGN   2238>>ASSIGN   2247<<DOINDEX
      2248>>ASSIGN   2248>>ASSIGN
IT$CMDWD
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:51   
      1390**DCL      2114--ASSIGN
IT$MPC
      1399**DCL      2153--ASSIGN
IT$MPC.CRPFWNAME
      1414**DCL      2147>>ASSIGN
IT$MPC.FLAGS.DOWN
      1416**DCL      2148>>ASSIGN
IT$MPC.FWNAME
      1412**DCL      2145>>ASSIGN
IT$MPC.FX
      1406**DCL      2137>>ASSIGN
IT$MPC.LPFWNAME
      1413**DCL      2146>>ASSIGN
IT$MPC.MODX
      1405**DCL      2128>>ASSIGN
IT$MPC.MPCNAME
      1407**DCL      1408--REDEF    2126>>ASSIGN
IT$MPC.MPCTYPE
      1404**DCL      2127>>ASSIGN
IT$PTR
      1766**DCL      2268>>IF       2269<<ASSIGN
IT$UNITDEV.CHAIN$
      1381**DCL      2238>>ASSIGN   2256>>IF
IT$UNITDEV.CHAINL
      1382**DCL      2233>>ASSIGN   2237>>DOINDEX
IT$UNITDEV.CNTWD.OFFSET
      1355**DCL      2280>>ASSIGN
IT$UNITDEV.CNTWD.TYPE
      1356**DCL      2155>>DOWHILE
IT$UNITDEV.FLAGS.CM
      1360**DCL      2222>>ASSIGN
IT$UNITDEV.FLAGS.DOWN
      1361**DCL      2202>>ASSIGN   2227>>ASSIGN
IT$UNITDEV.FLAGS.INPUT
      1358**DCL      2220>>ASSIGN
IT$UNITDEV.FLAGS.OUTPUT
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:52   
      1359**DCL      2221>>ASSIGN
IT$UNITDEV.FLAGS.PSIA
      1363**DCL      2224>>ASSIGN
IT$UNITDEV.FLAGS.SYMBIONT
      1362**DCL      2223>>ASSIGN   2258>>IF
IT$UNITDEV.FORMNAME
      1375**DCL      2261>>ASSIGN
IT$UNITDEV.FX
      1374**DCL      2216>>ASSIGN
IT$UNITDEV.IOMCHAN.CHAN
      1378**DCL      2162>>ASSIGN   2170>>CALLBLT  2190>>ASSIGN
IT$UNITDEV.IOMCHAN.IOM#
      1377**DCL      2157>>IF       2162>>ASSIGN   2168>>CALLBLT  2190>>ASSIGN
IT$UNITDEV.MODX
      1373**DCL      2215>>ASSIGN
IT$UNITDEV.NAME
      1366**DCL      1367--REDEF    2212>>ASSIGN
IT$UNITDEV.NM.MNEM
      1368**DCL      2260>>ASSIGN
IT$UNITDEV.TYPE
      1372**DCL      2174>>ASSIGN   2213>>ASSIGN   2255>>ASSIGN
IT$UNITDEV.VFC$
      1379**DCL      2248>>ASSIGN
IT$UNITDEV.VFCL
      1380**DCL      2243>>ASSIGN   2247>>DOINDEX
IT$WORD
      1636**DCL      2238<<ASSIGN   2238>>ASSIGN   2248<<ASSIGN   2248>>ASSIGN
ITE$ERROR
      1770**DCL-ENT  2171--CALL
ITH$ALLOCATE
      1771**DCL-ENT  2160--CALL     2234--CALL     2245--CALL
ITH$DCT_INIT
      1774**DCL-ENT  2119--CALL     2211--CALL
ITH$RAT_INIT
      1773**DCL-ENT  2253--CALL
ITH$SQH_INIT
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:53   
      1772**DCL-ENT  2116--CALL
ITU$UNIT_ERR
      2285**LABEL    2116--CALLALT  2119--CALLALT  2160--CALLALT  2211--CALLALT  2234--CALLALT  2245--CALLALT
      2253--CALLALT
IT_CHAIN500
      1781**DCL      2256--IF
IT_GOTLP
      1780**DCL      2230<<ASSIGN
IT_PARTITION.DEVICE
      1788**DCL      2148<<ASSIGN   2227<<ASSIGN
IT_PARTITION.IOCHAN
      1788**DCL      2202<<ASSIGN
J
      1624**DCL      2156<<DOINDEX  2157>>IF       2162>>ASSIGN   2162>>ASSIGN   2168>>CALLBLT  2170>>CALLBLT
      2190>>ASSIGN   2190>>ASSIGN
MPCX
      1632**DCL      2151<<ASSIGN
N$DCT$$
       856**DCL       990--IMP-PTR
N$FQ$
       856**DCL       991--IMP-PTR
N$REQ_INIT.BUFADDR
       875**DCL       876--REDEF     876--REDEF
N$REQ_INIT.DLA.DRELADDR
       867**DCL       867--REDEF
N$REQ_INIT.DVE.EOMCHAR
       904**DCL       905--REDEF
N$REQ_INIT.EAINFO
       898**DCL       898--REDEF
N$REQ_INIT.EAINFOX
       898**DCL       899--REDEF
N$REQ_INIT.EVNTINFO
       899**DCL       899--REDEF
N$REQ_INIT.STATUS
       880**DCL       886--REDEF
NI$CHT.DQH$
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:54   
      1652**DCL      2165>>IF       2176<<ASSIGN
NI$CHT.POSTER
      1652**DCL      2174<<ASSIGN
NI$CHT$
       915**DCL      1652--IMP-PTR  2165>>IF       2174>>ASSIGN   2176>>ASSIGN
NI$DCT.CTYP
      1694**DCL      2131<<ASSIGN   2133<<ASSIGN   2135<<ASSIGN   2225<<ASSIGN   2225>>ASSIGN
NI$DCT.DEVNM
      1686**DCL      2126<<ASSIGN   2212<<ASSIGN
NI$DCT.DFLG.CM
      1689**DCL      2222<<ASSIGN
NI$DCT.DFLG.INPUT
      1688**DCL      2141<<ASSIGN   2220<<ASSIGN
NI$DCT.DFLG.OUTPUT
      1689**DCL      2142<<ASSIGN   2221<<ASSIGN
NI$DCT.DFLG.PSIA
      1690**DCL      2143<<ASSIGN   2224<<ASSIGN
NI$DCT.DFLG.SYMBIONT
      1690**DCL      2223<<ASSIGN
NI$DCT.DP
      1706**DCL      1713--REDEF    1716--REDEF    1717--REDEF    1719--REDEF    1719--REDEF    1720--REDEF
      1721--REDEF    1721--REDEF
NI$DCT.DQH$
      1702**DCL      2140<<ASSIGN   2219<<ASSIGN
NI$DCT.DVN
      1695**DCL      2217<<ASSIGN
NI$DCT.DVT$
      1702**DCL      2127<<ASSIGN   2129>>DOSELCT  2213<<ASSIGN   2214>>ASSIGN   2229>>IF
NI$DCT.FX
      1695**DCL      2137<<ASSIGN   2216<<ASSIGN
NI$DCT.LP.CHAIN$
      1716**DCL      2231<<ASSIGN   2238>>ASSIGN
NI$DCT.LP.VFC$
      1716**DCL      2242<<ASSIGN   2248>>ASSIGN
NI$DCT.LP.VFCL
      1716**DCL      2243<<ASSIGN
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:55   
NI$DCT.MODX
      1695**DCL      2128<<ASSIGN   2129>>DOSELCT  2215<<ASSIGN
NI$DCT.MPC.CRPNAME
      1716**DCL      2147<<ASSIGN
NI$DCT.MPC.FW$
      1714**DCL      2125<<ASSIGN
NI$DCT.MPC.FWNAME
      1716**DCL      2145<<ASSIGN
NI$DCT.MPC.IOCHANX
      1714**DCL      1714--REDEF    2201<<ASSIGN
NI$DCT.MPC.LPNAME
      1716**DCL      2146<<ASSIGN
NI$DCT.MPC.TYPE
      1714**DCL      2144<<ASSIGN
NI$DCT.RAT$
      1687**DCL      2254<<ASSIGN   2269>>ASSIGN   2275>>ASSIGN
NI$DCT.SQH$
      1701**DCL      2139<<ASSIGN   2218<<ASSIGN
NI$DCT.TYPE
      1696**DCL      2138<<ASSIGN   2214<<ASSIGN
NI$DCT_C.DP
      2026**DCL      2033--REDEF    2036--REDEF    2037--REDEF    2039--REDEF    2039--REDEF    2040--REDEF
      2041--REDEF    2041--REDEF
NI$DCT_C.MPC.IOCHANX
      2034**DCL      2034--REDEF
NI$DQH
      1663**DCL      2160--CALL     2178<<ASSIGN
NI$DQH.IOCHANX
      1665**DCL      1666--REDEF    2181<<ASSIGN
NI$DQH.IOSTATUS$
      1670**DCL      2192<<ASSIGN   2194>>ASSIGN   2195>>ASSIGN   2195>>ASSIGN
NI$DQH.MBX$
      1674**DCL      1675--REDEF    2190<<ASSIGN
NI$DQH.MPC$
      1670**DCL      2184<<ASSIGN
NI$DQH.SQH$
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:56   
      1669**DCL      2182<<ASSIGN
NI$DQH_C
      2054**DCL      2178>>ASSIGN
NI$DQH_C.IOCHANX
      2056**DCL      2057--REDEF
NI$DQH_C.MBX$
      2065**DCL      2066--REDEF
NI$DVT.ATTR
      1728**DCL      2255>>ASSIGN
NI$DVT.MODEL
      1726**DCL      2129>>DOSELCT
NI$DVT.MPC
      1728**DCL      1729--REDEF
NI$DVT.POSTER
      1726**DCL      2174>>ASSIGN
NI$DVT.TYPE
      1726**DCL      2214>>ASSIGN   2229>>IF
NI$DVT$
       915**DCL      2127>>ASSIGN   2174>>ASSIGN   2213>>ASSIGN   2255>>ASSIGN
NI$FQ.HD$
       992**DCL      2192>>ASSIGN   2199<<ASSIGN   2199>>ASSIGN
NI$FQ$
       916**DCL       992--IMP-PTR  2192>>ASSIGN   2199>>ASSIGN   2199>>ASSIGN
NI$IBUF$
       916**DCL       992--IMP-PTR
NI$IMXMBX_INIT.PAGED_BASE
       926**DCL       927--REDEF     927--REDEF
NI$IMXMBX_INIT.SIZE
       928**DCL       928--REDEF
NI$IOM.MBX$
      1742**DCL      2190>>ASSIGN
NI$IOM$
       938**DCL      2190>>ASSIGN
NI$IOSTAT
      1733**DCL      2199--ASSIGN
NI$IOSTAT.AESDCW
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:57   
      1738**DCL      1738--REDEF    2194<<ASSIGN
NI$IOSTAT.AESDCW.ADDRESS
      1738**DCL      2195<<ASSIGN
NI$IOSTAT.EXTST
      1739**DCL      2195--ASSIGN
NI$IOSTAT_C.AESDCW
      2092**DCL      2092--REDEF
NI$MBX
      1757**DCL      2190--ASSIGN
NI$MBX.DCW.CONTROL.AE
      1762**DCL      1762--REDEF
NI$MBX.LPW.CONTROL.AE
      1758**DCL      1758--REDEF
NI$REQ_INIT.DCW
       950**DCL       953--REDEF
NI$REQ_INIT.DCW.TALLY
       951**DCL       951--REDEF
NI$REQ_INIT.IDCW.EXTA
       953**DCL       953--REDEF
NI$REQ_INIT.PCW
       955**DCL       959--REDEF
NI$REQ_INIT.SEEK
       960**DCL       961--REDEF     962--REDEF
NI$RP$
       964**DCL       994--IMP-PTR
NI$SQH.DOOR
      1647**DCL      1647--REDEF
NI$SQH.MPC$
      1649**DCL      2123<<ASSIGN
NI$SQH.NDCT
      1648**DCL      2122<<ASSIGN   2122>>ASSIGN   2208<<ASSIGN   2208>>ASSIGN
NI$SQH_C.DOOR
      2077**DCL      2077--REDEF
NI_MBX_INIT.DCW.CONTROL.AE
       986**DCL       986--REDEF
NI_MBX_INIT.LPW.CONTROL.AE
PL6.E3A0      #001=ITU$UNIT File=ITU$UNIT.:E05TSI                                TUE 07/29/97 23:08 Page:58   
       982**DCL       982--REDEF
N_DCTXMAX
       964**DCL      2148>>ASSIGN   2151>>ASSIGN   2227>>ASSIGN
PTR$
        15**DCL        12--PROC     2116<>CALL     2119<>CALL     2140>>ASSIGN   2159>>ASSIGN   2160<>CALL
      2211<>CALL     2231>>ASSIGN   2234<>CALL     2242>>ASSIGN   2245<>CALL     2253<>CALL
RAT$
      1619**DCL      2253<>CALL     2254>>ASSIGN   2255>>ASSIGN   2257>>ASSIGN   2257>>ASSIGN   2259>>ASSIGN
      2260>>ASSIGN   2261>>ASSIGN   2262>>IF       2263>>ASSIGN   2264>>ASSIGN   2265>>ASSIGN   2267<<ASSIGN
      2268>>IF       2269>>ASSIGN   2271<<ASSIGN   2272>>DOWHILE  2273<<ASSIGN   2273>>ASSIGN   2275>>ASSIGN
SQH$
      1616**DCL      2116<>CALL     2122>>ASSIGN   2122>>ASSIGN   2123>>ASSIGN   2139>>ASSIGN   2182>>ASSIGN
      2208>>ASSIGN   2208>>ASSIGN   2218>>ASSIGN
UNITMPC$
      1620**DCL      2150<<ASSIGN   2184>>ASSIGN   2201>>ASSIGN   2225>>ASSIGN
