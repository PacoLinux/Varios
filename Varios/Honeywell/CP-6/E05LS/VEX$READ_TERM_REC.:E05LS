VERSION E05

PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:1    
        1        1        /*M*    VEX$READ_TERM_REC - READ EDIT INPUT FROM USER TERMINAL */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*/
        8        8        VEX$READ_TERM_REC: PROC(BUFFER,BUFSIZE,BUFCHAR) ALTRET;
        9        9        /**/
       10       10        /*F*     NAME:     VEX$READ_TERM_REC
       11       11                 PURPOSE:  TO READ A RECORD FROM THE USER INPUT DEVICE.    */
       12       12        /**/
       13       13        /*D*     NAME:     VEX$READ_TERM_REC
       14       14                 PARAMETERS: BUFFER - BUFFER FOR THE READ
       15       15                           BUFSIZE - SIZE OF THE RETURNED RECORD
       16       16                            BUFCHAR - PASSED SIZE OF BUFFER TO READ INTO
       17       17                           DCB OR DCB USED FOR READ COMMAND POINTED AT BY NUMBER
       18       18                           IN IN_DCBNUM BUFFER.  AN ERROR CAUSES AN ALTRETURN. IF
       19       19                           THE READ IS COMPLETED THEN BUFFER IS STRIPED OF TRAILING
       20       20                           CARRIAGE RETURN AND BLANK FILLED THROUGH ITS END.
       21       21                           BUFSIZE IS SET TO THE SIZE OF THE RECORD READ AND A
       22       22                           NORMAL RETURN IS MADE.                  */
       23       23        /**/
       24       24        /**********************************************************************/
       25       25        /*   PARAMETERS   PARAMETERS   PARAMETERS   PARAMETERS   PARAMETERS   */
       26       26        /**********************************************************************/
       27       27    1   DCL BUFFER CHAR(1024);
       28       28    1   DCL BUFSIZE UBIN(36);
       29       29    1   DCL BUFCHAR UBIN(36);
       30       30        /*********************************************************************/
       31       31        /*   INCLUDE FILES   INCLUDE FILES   INCLUDE FILES   INCLUDE FILES   */
       32       32        /*********************************************************************/
       33       33        %INCLUDE CP_6;
       34      114        %INCLUDE CP_6_SUBS;
       35      654        %INCLUDE F$DCB;
       36      703        %INCLUDE B$JIT;
       37      993        %INCLUDE B_ERRORS_C;
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:2    
       38     2120        %INCLUDE VE_PERR_C ;
       39     2337        /**/
       40     2338        %B$TCB;
       41     2341        %B$ALT;
       42     2349        /********************************************************************/
       43     2350        /*   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   */
       44     2351        /********************************************************************/
       45     2352        %FPT_READ     (FPTN = READ_TERM_FPT) ;
       46     2391        %FPT_WRITE    (FPTN = ECHO_FPT,
       47     2392                      DCB = M$ME);
       48     2423            %FPT_OPEN (FPTN=OPEN_SIME_FPT, STCLASS="SYMREF");
       49     2532        %FPT_CLOSE (FPTN = CLOSE_SIREAD_FPT, STCLASS = SYMREF );
       50     2574        %FPT_RELDCB ( FPTN = RELDCB_FPT,
       51     2575                      STCLASS = STATIC) ;
       52     2589        /*****************************************************************/
       53     2590        /*   SYMREFS   SYMREFS   SYMREFS   SYMREFS   SYMREFS   SYMREFS   */
       54     2591        /*****************************************************************/
       55     2592    1   DCL B$TCB$ PTR SYMREF;
       56     2593    1   DCL B$JIT$ PTR SYMREF;
       57     2594    1   DCL IN_DCBNUM UBIN WORD SYMREF ;
       58     2595    1   DCL SI_DCBNUM UBIN WORD SYMREF ;
       59     2596    1   DCL M$ME DCB;
       60     2597    1   DCL M$SI DCB;
       61     2598    1   DCL BLANKS CHAR(4) SYMREF;
       62     2599    1   DCL BREAK_ARS UBIN WORD SYMREF;
       63     2600        /**/
       64     2601    1   DCL VEX$ERROR ENTRY(2) ALTRET;
       65     2602        /*****************************************************************/
       66     2603        /*   AUTO   AUTO   AUTO   AUTO   AUTO   AUTO   AUTO   AUTO       */
       67     2604        /*****************************************************************/
       68     2605    1   DCL M$DCB$ PTR ;
       69     2606        /**/
       70     2607        /*****************************************************************************/
       71     2608        /*   PROCEDURE   PROCEDURE   PROCEDURE   PROCEDURE   PROCEDURE   PROCEDURE   */
       72     2609        /*****************************************************************************/
       73     2610    1   REREAD:
       74     2611    2           IF BREAK_ARS ~= 0 THEN DO;
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:3    
       75     2612    2             BUFSIZE = BREAK_ARS ;
       76     2613    2             BREAK_ARS = 0 ;
       77     2614    2             RETURN ;
       78     2615    2             END ;
       79     2616    1           READ_TERM_FPT.BUF_.BUF$ = ADDR(BUFFER);
       80     2617    1           READ_TERM_FPT.BUF_.BOUND = BUFCHAR-1;
       81     2618    1           READ_TERM_FPT.V.DCB# = IN_DCBNUM ;
       82     2619    1           M$DCB$ = DCBADDR(IN_DCBNUM) ;
       83     2620    1           CALL M$READ(READ_TERM_FPT) ALTRET (READ_TERM_ALT);
       84     2621    1           BUFSIZE = M$DCB$ -> F$DCB.ARS;
       85     2622    1           CALL INSERT (BUFFER,BUFSIZE,BUFCHAR-BUFSIZE,BLANKS); /* BLANK FILL        */
       86     2623        /**/
       87     2624    1           IF (B$JIT$ -> B$JIT.CPFLAGS1 & %CP_ECHO#)AND(BUFSIZE > 0)AND
       88     2625    2             ((M$DCB$ -> F$DCB.DDEV.XEQ)OR(M$DCB$ -> F$DCB.ASN = %FILE#)) THEN DO;
       89     2626    2              ECHO_FPT.BUF_.BOUND   = BUFSIZE - 1;
       90     2627    2              ECHO_FPT.BUF_.BUF$ = ADDR(BUFFER);
       91     2628    2              CALL M$WRITE (ECHO_FPT) ALTRET (READ_TERM_ALT);
       92     2629    2              END;
       93     2630        /**/
       94     2631    1           RETURN;
       95     2632    1   READ_TERM_ALT:
       96     2633    1           BUFSIZE = 0;
       97     2634    2           DO SELECT( B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR.ERR#) ;
       98     2635
       99     2636    2             SELECT (%E$IOERR , %E$DI) ;
      100     2637    2               IF B$JIT.MODE = %M_BATCH# OR M$DCB$ -> F$DCB.DDEV.XEQ
      101     2638    2                 THEN
      102     2639    3                   DO ;
      103     2640    3                     CALL VEX$ERROR(0,3) ;
      104     2641    3                     GOTO READ_TERM_ALTRETURN ;
      105     2642    3                   END ; /* THEN DO */
      106     2643    2               CALL VEX$ERROR(E$E_INPUTERR,3) ;
      107     2644    2               GOTO REREAD ;
      108     2645
      109     2646    2             SELECT(%E$EOF,%E$NOFILE,%E$FILEBUSY) ;
      110     2647    2               IF B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR.ERR# ~= %E$EOF
      111     2648    2                 THEN
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:4    
      112     2649    2                   CALL VEX$ERROR(0,3) ;
      113     2650    2               IF M$DCB$ -> F$DCB.ASN = %FILE#
      114     2651    2                 THEN
      115     2652    3                   DO ;
      116     2653    3                     CLOSE_SIREAD_FPT.V.DCB# = IN_DCBNUM ;
      117     2654    3                     CALL M$CLOSE(CLOSE_SIREAD_FPT) ALTRET (CLOSE_SIREAD_ERR) ;
      118     2655    3   CLOSE_SIREAD_ERR:
      119     2656    3                     IF IN_DCBNUM = SI_DCBNUM
      120     2657    3                       THEN CALL M$OPEN(OPEN_SIME_FPT) ALTRET(READ_TERM_ALT) ;
      121     2658    4                       ELSE DO ;
      122     2659    4                               RELDCB_FPT.V.DCB# = IN_DCBNUM ;
      123     2660    4                               CALL M$RELDCB(RELDCB_FPT) ALTRET(RELDCB_ERR) ;
      124     2661    4   RELDCB_ERR:
      125     2662    4                               IN_DCBNUM = SI_DCBNUM ;
      126     2663    4                               END ; /* ELSE DO */
      127     2664    3                     GOTO REREAD ;
      128     2665    3                   END ; /* THEN DO */
      129     2666
      130     2667    2             SELECT(ELSE) ;                /* Bad ERROR. */
      131     2668    2               CALL VEX$ERROR(0,3) ;
      132     2669
      133     2670    2           END ; /* DO SELECT */
      134     2671
      135     2672    1   READ_TERM_ALTRETURN:
      136     2673    1           ALTRETURN;
      137     2674    1   END;

PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:5    
--  Include file information  --

   VE_PERR_C.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure VEX$READ_TERM_REC.

   Procedure VEX$READ_TERM_REC requires 152 words for executable code.
   Procedure VEX$READ_TERM_REC requires 8 words of local(AUTO) storage.

    No errors detected in file VEX$READ_TERM_REC.:E05TSI    .

PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:6    

 Object Unit name= VEX$READ_TERM_REC                          File name= VEX$READ_TERM_REC.:E05TOU
 UTS= JUL 30 '97 07:15:39.80 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none    30     36  VEX$READ_TERM_REC
    2   DCB   even  none     0      0  M$ME
    3   DCB   even  none     0      0  M$SI
    4   Proc  even  none   152    230  VEX$READ_TERM_REC
    5  RoData even  none     6      6  VEX$READ_TERM_REC

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     4      0   yes    yes     yes      Std        3  VEX$READ_TERM_REC

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       2 VEX$ERROR
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AUTO_3
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:7    

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  OPEN_SIME_FPT                         CLOSE_SIREAD_FPT
     B$TCB$                                B$JIT$                                IN_DCBNUM
     SI_DCBNUM                             M$ME                                  M$SI
     BLANKS                                BREAK_ARS                             B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:8    


        1        1        /*M*    VEX$READ_TERM_REC - READ EDIT INPUT FROM USER TERMINAL */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*/
        8        8        VEX$READ_TERM_REC: PROC(BUFFER,BUFSIZE,BUFCHAR) ALTRET;

      8  4 000000   000000 700200 xent  VEX$READ_TE* TSX0  ! X66_AUTO_3
         4 000001   000010 000003                    ZERO    8,3

        9        9        /**/
       10       10        /*F*     NAME:     VEX$READ_TERM_REC
       11       11                 PURPOSE:  TO READ A RECORD FROM THE USER INPUT DEVICE.    */
       12       12        /**/
       13       13        /*D*     NAME:     VEX$READ_TERM_REC
       14       14                 PARAMETERS: BUFFER - BUFFER FOR THE READ
       15       15                           BUFSIZE - SIZE OF THE RETURNED RECORD
       16       16                            BUFCHAR - PASSED SIZE OF BUFFER TO READ INTO
       17       17                           DCB OR DCB USED FOR READ COMMAND POINTED AT BY NUMBER
       18       18                           IN IN_DCBNUM BUFFER.  AN ERROR CAUSES AN ALTRETURN. IF
       19       19                           THE READ IS COMPLETED THEN BUFFER IS STRIPED OF TRAILING
       20       20                           CARRIAGE RETURN AND BLANK FILLED THROUGH ITS END.
       21       21                           BUFSIZE IS SET TO THE SIZE OF THE RECORD READ AND A
       22       22                           NORMAL RETURN IS MADE.                  */
       23       23        /**/
       24       24        /**********************************************************************/
       25       25        /*   PARAMETERS   PARAMETERS   PARAMETERS   PARAMETERS   PARAMETERS   */
       26       26        /**********************************************************************/
       27       27    1   DCL BUFFER CHAR(1024);
       28       28    1   DCL BUFSIZE UBIN(36);
       29       29    1   DCL BUFCHAR UBIN(36);
       30       30        /*********************************************************************/
       31       31        /*   INCLUDE FILES   INCLUDE FILES   INCLUDE FILES   INCLUDE FILES   */
       32       32        /*********************************************************************/
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:9    
       33       33        %INCLUDE CP_6;
       34      114        %INCLUDE CP_6_SUBS;
       35      654        %INCLUDE F$DCB;
       36      703        %INCLUDE B$JIT;
       37      993        %INCLUDE B_ERRORS_C;
       38     2120        %INCLUDE VE_PERR_C ;
       39     2337        /**/
       40     2338        %B$TCB;
       41     2341        %B$ALT;
       42     2349        /********************************************************************/
       43     2350        /*   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   */
       44     2351        /********************************************************************/
       45     2352        %FPT_READ     (FPTN = READ_TERM_FPT) ;
       46     2391        %FPT_WRITE    (FPTN = ECHO_FPT,
       47     2392                      DCB = M$ME);
       48     2423            %FPT_OPEN (FPTN=OPEN_SIME_FPT, STCLASS="SYMREF");
       49     2532        %FPT_CLOSE (FPTN = CLOSE_SIREAD_FPT, STCLASS = SYMREF );
       50     2574        %FPT_RELDCB ( FPTN = RELDCB_FPT,
       51     2575                      STCLASS = STATIC) ;
       52     2589        /*****************************************************************/
       53     2590        /*   SYMREFS   SYMREFS   SYMREFS   SYMREFS   SYMREFS   SYMREFS   */
       54     2591        /*****************************************************************/
       55     2592    1   DCL B$TCB$ PTR SYMREF;
       56     2593    1   DCL B$JIT$ PTR SYMREF;
       57     2594    1   DCL IN_DCBNUM UBIN WORD SYMREF ;
       58     2595    1   DCL SI_DCBNUM UBIN WORD SYMREF ;
       59     2596    1   DCL M$ME DCB;
       60     2597    1   DCL M$SI DCB;
       61     2598    1   DCL BLANKS CHAR(4) SYMREF;
       62     2599    1   DCL BREAK_ARS UBIN WORD SYMREF;
       63     2600        /**/
       64     2601    1   DCL VEX$ERROR ENTRY(2) ALTRET;
       65     2602        /*****************************************************************/
       66     2603        /*   AUTO   AUTO   AUTO   AUTO   AUTO   AUTO   AUTO   AUTO       */
       67     2604        /*****************************************************************/
       68     2605    1   DCL M$DCB$ PTR ;
       69     2606        /**/
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:10   
       70     2607        /*****************************************************************************/
       71     2608        /*   PROCEDURE   PROCEDURE   PROCEDURE   PROCEDURE   PROCEDURE   PROCEDURE   */
       72     2609        /*****************************************************************************/
       73     2610    1   REREAD:
       74     2611    2           IF BREAK_ARS ~= 0 THEN DO;

   2611  4 000002   000000 235000 xsym  REREAD       LDA     BREAK_ARS
         4 000003   000010 600000 4                  TZE     s:2616

       75     2612    2             BUFSIZE = BREAK_ARS ;

   2612  4 000004   200004 470500                    LDP0    @BUFSIZE,,AUTO
         4 000005   000000 755100                    STA     0,,PR0

       76     2613    2             BREAK_ARS = 0 ;

   2613  4 000006   000000 450000 xsym               STZ     BREAK_ARS

       77     2614    2             RETURN ;

   2614  4 000007   000000 702200 xent               TSX2  ! X66_ARET

       78     2615    2             END ;
       79     2616    1           READ_TERM_FPT.BUF_.BUF$ = ADDR(BUFFER);

   2616  4 000010   200003 236100                    LDQ     @BUFFER,,AUTO
         4 000011   000005 756000 1                  STQ     READ_TERM_FPT+5

       80     2617    1           READ_TERM_FPT.BUF_.BOUND = BUFCHAR-1;

   2617  4 000012   200005 470500                    LDP0    @BUFCHAR,,AUTO
         4 000013   000000 236100                    LDQ     0,,PR0
         4 000014   000001 136007                    SBLQ    1,DL
         4 000015   000020 736000                    QLS     16
         4 000016   000004 676000 1                  ERQ     READ_TERM_FPT+4
         4 000017   000034 376000 xsym               ANQ     B_VECTNIL+28
         4 000020   000004 656000 1                  ERSQ    READ_TERM_FPT+4
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:11   

       81     2618    1           READ_TERM_FPT.V.DCB# = IN_DCBNUM ;

   2618  4 000021   000000 720000 xsym               LXL0    IN_DCBNUM
         4 000022   000010 740000 1                  STX0    READ_TERM_FPT+8

       82     2619    1           M$DCB$ = DCBADDR(IN_DCBNUM) ;

   2619  4 000023   000000 471400 5                  LDP1    0
         4 000024   100000 473500                    LDP3    0,,PR1
         4 000025   300000 236110                    LDQ     0,X0,PR3
         4 000026   200006 756100                    STQ     M$DCB$,,AUTO

       83     2620    1           CALL M$READ(READ_TERM_FPT) ALTRET (READ_TERM_ALT);

   2620  4 000027   000000 630400 1                  EPPR0   READ_TERM_FPT
         4 000030   440000 713400                    CLIMB   alt,read
         4 000031   401400 401760                    pmme    nvectors=4
         4 000032   000101 702000 4                  TSX2    READ_TERM_ALT

       84     2621    1           BUFSIZE = M$DCB$ -> F$DCB.ARS;

   2621  4 000033   200006 470500                    LDP0    M$DCB$,,AUTO
         4 000034   000000 235100                    LDA     0,,PR0
         4 000035   200004 471500                    LDP1    @BUFSIZE,,AUTO
         4 000036   100000 755100                    STA     0,,PR1

       85     2622    1           CALL INSERT (BUFFER,BUFSIZE,BUFCHAR-BUFSIZE,BLANKS); /* BLANK FILL       */

   2622  4 000037   200005 473500                    LDP3    @BUFCHAR,,AUTO
         4 000040   300000 236100                    LDQ     0,,PR3
         4 000041   100000 136100                    SBLQ    0,,PR1
         4 000042   200003 474500                    LDP4    @BUFFER,,AUTO
         4 000043   000000 620006                    EAX0    0,QL
         4 000044   040145 100400                    MLR     fill='040'O
         4 000045   000000 000004 xsym               ADSC9   BLANKS                   cn=0,n=4
         4 000046   400000 000010                    ADSC9   0,A,PR4                  cn=0,n=*X0
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:12   

       86     2623        /**/
       87     2624    1           IF (B$JIT$ -> B$JIT.CPFLAGS1 & %CP_ECHO#)AND(BUFSIZE > 0)AND

   2624  4 000047   000000 475400 xsym               LDP5    B$JIT$
         4 000050   500143 236100                    LDQ     99,,PR5
         4 000051   000012 376000 xsym               ANQ     B_VECTNIL+10
         4 000052   000100 600000 4                  TZE     s:2631
         4 000053   100000 235100                    LDA     0,,PR1
         4 000054   000100 600000 4                  TZE     s:2631
         4 000055   000004 236100                    LDQ     4,,PR0
         4 000056   040000 316007                    CANQ    16384,DL
         4 000057   000064 601000 4                  TNZ     s:2626
         4 000060   000032 236100                    LDQ     26,,PR0
         4 000061   777000 376007                    ANQ     -512,DL
         4 000062   001000 116007                    CMPQ    512,DL
         4 000063   000100 601000 4                  TNZ     s:2631

       88     2625    2             ((M$DCB$ -> F$DCB.DDEV.XEQ)OR(M$DCB$ -> F$DCB.ASN = %FILE#)) THEN DO;

       89     2626    2              ECHO_FPT.BUF_.BOUND   = BUFSIZE - 1;

   2626  4 000064   100000 236100                    LDQ     0,,PR1
         4 000065   000001 136007                    SBLQ    1,DL
         4 000066   000020 736000                    QLS     16
         4 000067   000022 676000 1                  ERQ     ECHO_FPT+4
         4 000070   000034 376000 xsym               ANQ     B_VECTNIL+28
         4 000071   000022 656000 1                  ERSQ    ECHO_FPT+4

       90     2627    2              ECHO_FPT.BUF_.BUF$ = ADDR(BUFFER);

   2627  4 000072   200003 236100                    LDQ     @BUFFER,,AUTO
         4 000073   000023 756000 1                  STQ     ECHO_FPT+5

       91     2628    2              CALL M$WRITE (ECHO_FPT) ALTRET (READ_TERM_ALT);

   2628  4 000074   000016 630400 1                  EPPR0   ECHO_FPT
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:13   
         4 000075   440001 713400                    CLIMB   alt,write
         4 000076   401400 401760                    pmme    nvectors=4
         4 000077   000101 702000 4                  TSX2    READ_TERM_ALT

       92     2629    2              END;

       93     2630        /**/
       94     2631    1           RETURN;

   2631  4 000100   000000 702200 xent               TSX2  ! X66_ARET

       95     2632    1   READ_TERM_ALT:
       96     2633    1           BUFSIZE = 0;

   2633  4 000101   200004 470500       READ_TERM_A* LDP0    @BUFSIZE,,AUTO
         4 000102   000000 450100                    STZ     0,,PR0

       97     2634    2           DO SELECT( B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR.ERR#) ;

   2634  4 000103   000000 471400 xsym               LDP1    B$TCB$
         4 000104   100000 473500                    LDP3    0,,PR1
         4 000105   300102 236100                    LDQ     66,,PR3
         4 000106   000003 772000                    QRL     3
         4 000107   037777 376007                    ANQ     16383,DL
         4 000110   000010 116007                    CMPQ    8,DL
         4 000111   000127 602000 4                  TNC     s:2634+20
         4 000112   000134 600000 4                  TZE     s:2637
         4 000113   000155 116007                    CMPQ    109,DL
         4 000114   000122 602000 4                  TNC     s:2634+15
         4 000115   000157 600000 4                  TZE     s:2647
         4 000116   000003 736000                    QLS     3
         4 000117   001610 116007                    CMPQ    904,DL
         4 000120   000223 601000 4                  TNZ     s:2668
         4 000121   000157 710000 4                  TRA     s:2647
         4 000122   300102 236100                    LDQ     66,,PR3
         4 000123   377770 376007                    ANQ     131064,DL
         4 000124   000110 116007                    CMPQ    72,DL
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:14   
         4 000125   000223 601000 4                  TNZ     s:2668
         4 000126   000134 710000 4                  TRA     s:2637
         4 000127   300102 236100                    LDQ     66,,PR3
         4 000130   377770 376007                    ANQ     131064,DL
         4 000131   000060 116007                    CMPQ    48,DL
         4 000132   000223 601000 4                  TNZ     s:2668
         4 000133   000157 710000 4                  TRA     s:2647

       98     2635
       99     2636    2             SELECT (%E$IOERR , %E$DI) ;

      100     2637    2               IF B$JIT.MODE = %M_BATCH# OR M$DCB$ -> F$DCB.DDEV.XEQ

   2637  4 000134   000000 474400 xsym               LDP4    B$JIT$
         4 000135   400000 236100                    LDQ     0,,PR4
         4 000136   740000 376003                    ANQ     -16384,DU
         4 000137   040000 116003                    CMPQ    16384,DU
         4 000140   000145 600000 4                  TZE     s:2640
         4 000141   200006 475500                    LDP5    M$DCB$,,AUTO
         4 000142   500004 236100                    LDQ     4,,PR5
         4 000143   040000 316007                    CANQ    16384,DL
         4 000144   000152 600000 4                  TZE     s:2643

      101     2638    2                 THEN
      102     2639    3                   DO ;

      103     2640    3                     CALL VEX$ERROR(0,3) ;

   2640  4 000145   000001 630400 5                  EPPR0   1
         4 000146   000020 631400 xsym               EPPR1   B_VECTNIL+16
         4 000147   000000 701000 xent               TSX1    VEX$ERROR
         4 000150   000000 011000                    NOP     0

      104     2641    3                     GOTO READ_TERM_ALTRETURN ;

   2641  4 000151   000227 710000 4                  TRA     READ_TERM_ALTRETURN

PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:15   
      105     2642    3                   END ; /* THEN DO */
      106     2643    2               CALL VEX$ERROR(E$E_INPUTERR,3) ;

   2643  4 000152   000004 630400 5                  EPPR0   4
         4 000153   000020 631400 xsym               EPPR1   B_VECTNIL+16
         4 000154   000000 701000 xent               TSX1    VEX$ERROR
         4 000155   000000 011000                    NOP     0

      107     2644    2               GOTO REREAD ;

   2644  4 000156   000002 710000 4                  TRA     REREAD

      108     2645
      109     2646    2             SELECT(%E$EOF,%E$NOFILE,%E$FILEBUSY) ;

      110     2647    2               IF B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR.ERR# ~= %E$EOF

   2647  4 000157   300102 236100                    LDQ     66,,PR3
         4 000160   377770 376007                    ANQ     131064,DL
         4 000161   000060 116007                    CMPQ    48,DL
         4 000162   000167 600000 4                  TZE     s:2650

      111     2648    2                 THEN
      112     2649    2                   CALL VEX$ERROR(0,3) ;

   2649  4 000163   000001 630400 5                  EPPR0   1
         4 000164   000020 631400 xsym               EPPR1   B_VECTNIL+16
         4 000165   000000 701000 xent               TSX1    VEX$ERROR
         4 000166   000000 011000                    NOP     0

      113     2650    2               IF M$DCB$ -> F$DCB.ASN = %FILE#

   2650  4 000167   200006 470500                    LDP0    M$DCB$,,AUTO
         4 000170   000032 236100                    LDQ     26,,PR0
         4 000171   777000 376007                    ANQ     -512,DL
         4 000172   001000 116007                    CMPQ    512,DL
         4 000173   000227 601000 4                  TNZ     READ_TERM_ALTRETURN
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:16   

      114     2651    2                 THEN
      115     2652    3                   DO ;

      116     2653    3                     CLOSE_SIREAD_FPT.V.DCB# = IN_DCBNUM ;

   2653  4 000174   000000 720000 xsym               LXL0    IN_DCBNUM
         4 000175   000032 740000 xsym               STX0    CLOSE_SIREAD_FPT+26

      117     2654    3                     CALL M$CLOSE(CLOSE_SIREAD_FPT) ALTRET (CLOSE_SIREAD_ERR) ;

   2654  4 000176   000000 630400 xsym               EPPR0   CLOSE_SIREAD_FPT
         4 000177   450001 713400                    CLIMB   alt,close
         4 000200   406000 401760                    pmme    nvectors=13
         4 000201   000202 702000 4                  TSX2    CLOSE_SIREAD_ERR

      118     2655    3   CLOSE_SIREAD_ERR:
      119     2656    3                     IF IN_DCBNUM = SI_DCBNUM

   2656  4 000202   000000 236000 xsym  CLOSE_SIREA* LDQ     IN_DCBNUM
         4 000203   000000 116000 xsym               CMPQ    SI_DCBNUM
         4 000204   000212 601000 4                  TNZ     s:2659

      120     2657    3                       THEN CALL M$OPEN(OPEN_SIME_FPT) ALTRET(READ_TERM_ALT) ;

   2657  4 000205   000000 630400 xsym               EPPR0   OPEN_SIME_FPT
         4 000206   450000 713400                    CLIMB   alt,open
         4 000207   410400 401760                    pmme    nvectors=18
         4 000210   000101 702000 4                  TSX2    READ_TERM_ALT
         4 000211   000222 710000 4                  TRA     s:2664

      121     2658    4                       ELSE DO ;

      122     2659    4                               RELDCB_FPT.V.DCB# = IN_DCBNUM ;

   2659  4 000212   000000 620006                    EAX0    0,QL
         4 000213   000034 740000 1                  STX0    RELDCB_FPT+2
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:17   

      123     2660    4                               CALL M$RELDCB(RELDCB_FPT) ALTRET(RELDCB_ERR) ;

   2660  4 000214   000032 630400 1                  EPPR0   RELDCB_FPT
         4 000215   460003 713400                    CLIMB   alt,+24579
         4 000216   400000 401760                    pmme    nvectors=1
         4 000217   000220 702000 4                  TSX2    RELDCB_ERR

      124     2661    4   RELDCB_ERR:
      125     2662    4                               IN_DCBNUM = SI_DCBNUM ;

   2662  4 000220   000000 235000 xsym  RELDCB_ERR   LDA     SI_DCBNUM
         4 000221   000000 755000 xsym               STA     IN_DCBNUM

      126     2663    4                               END ; /* ELSE DO */

      127     2664    3                     GOTO REREAD ;

   2664  4 000222   000002 710000 4                  TRA     REREAD

      128     2665    3                   END ; /* THEN DO */
      129     2666
      130     2667    2             SELECT(ELSE) ;                /* Bad ERROR. */

      131     2668    2               CALL VEX$ERROR(0,3) ;

   2668  4 000223   000001 630400 5                  EPPR0   1
         4 000224   000020 631400 xsym               EPPR1   B_VECTNIL+16
         4 000225   000000 701000 xent               TSX1    VEX$ERROR
         4 000226   000000 011000                    NOP     0

      132     2669
      133     2670    2           END ; /* DO SELECT */

      134     2671
      135     2672    1   READ_TERM_ALTRETURN:
      136     2673    1           ALTRETURN;
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:18   

   2673  4 000227   000000 702200 xent  READ_TERM_A* TSX2  ! X66_AALT
      137     2674    1   END;

PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:19   
--  Include file information  --

   VE_PERR_C.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure VEX$READ_TERM_REC.
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:20   

 **** Variables and constants ****

  ****  Section 001  Data  VEX$READ_TERM_REC

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    16-0-0/d STRC(432)   r     1 ECHO_FPT                   0-0-0/d STRC(504)   r     1 READ_TERM_FPT
    32-0-0/d STRC(144)   r     1 RELDCB_FPT

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     5-0-0/w PTR         r     1 @BUFCHAR                   3-0-0/w PTR         r     1 @BUFFER
     4-0-0/w PTR         r     1 @BUFSIZE                  *0-0-0/w UBIN        r     1 BUFCHAR
    *0-0-0/c CHAR(1024)  r     1 BUFFER                    *0-0-0/w UBIN        r     1 BUFSIZE
     6-0-0/w PTR         r     1 M$DCB$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$JIT$                     0-0-0/w PTR         r     1 B$TCB$
     0-0-0/c CHAR(4)     r     1 BLANKS                     0-0-0/w UBIN        r     1 BREAK_ARS
     0-0-0/d STRC(1080)  r     1 CLOSE_SIREAD_FPT           0-0-0/w UBIN        r     1 IN_DCBNUM
     0-0-0/d STRC(2088)  r     1 OPEN_SIME_FPT              0-0-0/w UBIN        r     1 SI_DCBNUM

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/d STRC(8856)  r     1 B$JIT
     0-0-0/w STRC(144)   r     1 B$TCB                      0-0-0/d ASTR(3528)  r     1 F$DCB
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:21   
     0-0-0N  NULL        r     1 M$ME


   Procedure VEX$READ_TERM_REC requires 152 words for executable code.
   Procedure VEX$READ_TERM_REC requires 8 words of local(AUTO) storage.

    No errors detected in file VEX$READ_TERM_REC.:E05TSI    .
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:22   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:23   
          MINI XREF LISTING

B$ALT.CODE
      2343**DCL      2343--REDEF    2344--REDEF    2344--REDEF
B$ALT.ERR.ERR#
      2345**DCL      2345--REDEF    2634>>DOSELCT  2647>>IF
B$ALT.EVID
      2344**DCL      2344--REDEF    2344--REDEF
B$JIT.CPFLAGS1
       806**DCL      2624>>IF
B$JIT.CPFLAGS1.SLEAZE
       811**DCL       811--REDEF
B$JIT.ERR.MID
       718**DCL       718--REDEF
B$JIT.JRESPEAK
       879**DCL       880--REDEF
B$JIT.MODE
       712**DCL      2637>>IF
B$JIT.ORIGINATOR_PORT.FROM_CR
       988**DCL       988--REDEF     989--REDEF
B$JIT.PNR
       892**DCL       892--REDEF
B$JIT.TSLINE
       986**DCL       987--REDEF
B$JIT$
      2593**DCL       712--IMP-PTR  2624>>IF       2637>>IF
B$TCB.ALT$
      2339**DCL      2634>>DOSELCT  2647>>IF
B$TCB$
      2592**DCL      2634>>DOSELCT  2647>>IF
BLANKS
      2598**DCL      2622>>CALLBLT
BREAK_ARS
      2599**DCL      2611>>IF       2612>>ASSIGN   2613<<ASSIGN
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:24   
BUFCHAR
        29**DCL         8--PROC     2617>>ASSIGN   2622>>CALLBLT
BUFFER
        27**DCL         8--PROC     2616--ASSIGN   2622<<CALLBLT  2627--ASSIGN
BUFSIZE
        28**DCL         8--PROC     2612<<ASSIGN   2621<<ASSIGN   2622>>CALLBLT  2622>>CALLBLT  2624>>IF
      2626>>ASSIGN   2633<<ASSIGN
CLOSE_SIREAD_ERR
      2656**LABEL    2654--CALLALT
CLOSE_SIREAD_FPT
      2555**DCL      2654<>CALL
CLOSE_SIREAD_FPT.SN_
      2555**DCL      2555--REDEF
CLOSE_SIREAD_FPT.UTL_
      2556**DCL      2556--REDEF
CLOSE_SIREAD_FPT.V.DCB#
      2561**DCL      2653<<ASSIGN
CLOSE_SIREAD_FPT.V.EXPIRE#
      2570**DCL      2570--REDEF
CLOSE_SIREAD_FPT.V.TYPE#
      2568**DCL      2568--REDEF
CLOSE_SIREAD_FPT.V.XTNSIZE#
      2565**DCL      2565--REDEF    2567--REDEF
ECHO_FPT
      2409**DCL      2628<>CALL
ECHO_FPT.BUF_.BOUND
      2409**DCL      2626<<ASSIGN
ECHO_FPT.BUF_.BUF$
      2411**DCL      2627<<ASSIGN
ECHO_FPT.STATION_
      2411**DCL      2411--REDEF
ECHO_FPT.V
      2412**DCL      2409--DCLINIT
ECHO_FPT.V.DVBYTE.VFC#
      2418**DCL      2418--REDEF
F$DCB.ACTPOS
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:25   
       680**DCL       680--REDEF
F$DCB.ARS
       655**DCL       655--REDEF    2621>>ASSIGN
F$DCB.ASN
       670**DCL      2624>>IF       2650>>IF
F$DCB.ATTR
       673**DCL       674--REDEF
F$DCB.BORROW
       688**DCL       688--REDEF     688--REDEF     688--REDEF
F$DCB.DCBNAME.L
       702**DCL       702--IMP-SIZ
F$DCB.DDEV.XEQ
       661**DCL      2624>>IF       2637>>IF
F$DCB.EOMCHAR
       659**DCL       659--REDEF
F$DCB.FLDID
       683**DCL       683--REDEF
F$DCB.FORM$
       677**DCL       677--REDEF
F$DCB.FSECT
       693**DCL       693--REDEF
F$DCB.FSN
       670**DCL       670--REDEF     670--REDEF     671--REDEF
F$DCB.HEADER$
       676**DCL       676--REDEF
F$DCB.IXTNSIZE
       674**DCL       674--REDEF
F$DCB.LASTSTA$
       664**DCL       664--REDEF
F$DCB.LVL
       689**DCL       689--REDEF
F$DCB.NAME.C
       664**DCL       664--REDEF
F$DCB.NOEOF
       685**DCL       685--REDEF
F$DCB.NRECS
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:26   
       675**DCL       675--REDEF
F$DCB.NRECX
       694**DCL       694--REDEF
F$DCB.OHDR
       686**DCL       686--REDEF
F$DCB.ORG
       669**DCL       669--REDEF
F$DCB.PRECNO
       692**DCL       692--REDEF
F$DCB.RCSZ
       697**DCL       697--REDEF
F$DCB.RES
       665**DCL       665--REDEF
F$DCB.SETX
       677**DCL       677--REDEF
F$DCB.TAB$
       676**DCL       677--REDEF
F$DCB.TDA
       691**DCL       691--REDEF
F$DCB.WSN
       666**DCL       666--REDEF
IN_DCBNUM
      2594**DCL      2618>>ASSIGN   2619--ASSIGN   2653>>ASSIGN   2656>>IF       2659>>ASSIGN   2662<<ASSIGN
M$CLOSE
        42**DCL-ENT  2654--CALL
M$DCB$
      2605**DCL      2619<<ASSIGN   2621>>ASSIGN   2624>>IF       2624>>IF       2637>>IF       2650>>IF
M$OPEN
        42**DCL-ENT  2657--CALL
M$READ
        43**DCL-ENT  2620--CALL
M$RELDCB
        48**DCL-ENT  2660--CALL
M$WRITE
        43**DCL-ENT  2628--CALL
OPEN_SIME_FPT
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:27   
      2488**DCL      2657<>CALL
OPEN_SIME_FPT.ACSVEH_
      2490**DCL      2491--REDEF
OPEN_SIME_FPT.ALTKEYS_
      2496**DCL      2497--REDEF    2497--REDEF
OPEN_SIME_FPT.HDR_
      2495**DCL      2496--REDEF
OPEN_SIME_FPT.TAB_
      2494**DCL      2495--REDEF
OPEN_SIME_FPT.UHL_
      2488**DCL      2489--REDEF    2489--REDEF
OPEN_SIME_FPT.V.FSN#
      2528**DCL      2528--REDEF    2528--REDEF
OPEN_SIME_FPT.WSN_
      2494**DCL      2494--REDEF
READ_TERM_ALT
      2633**LABEL    2620--CALLALT  2628--CALLALT  2657--CALLALT
READ_TERM_ALTRETURN
      2673**LABEL    2641--GOTO
READ_TERM_FPT
      2369**DCL      2620<>CALL
READ_TERM_FPT.BUF_.BOUND
      2371**DCL      2617<<ASSIGN
READ_TERM_FPT.BUF_.BUF$
      2372**DCL      2616<<ASSIGN
READ_TERM_FPT.STATION_
      2372**DCL      2373--REDEF
READ_TERM_FPT.V
      2373**DCL      2369--DCLINIT
READ_TERM_FPT.V.DCB#
      2373**DCL      2618<<ASSIGN
READ_TERM_FPT.V.DVBYTE.REREAD#
      2384**DCL      2384--REDEF
READ_TERM_FPT.V.INDX#
      2382**DCL      2382--REDEF
RELDCB_ERR
PL6.E3A0      #001=VEX$READ_TERM_REC File=VEX$READ_TERM_REC.:E05TSI              WED 07/30/97 07:15 Page:28   
      2662**LABEL    2660--CALLALT
RELDCB_FPT
      2586**DCL      2660<>CALL
RELDCB_FPT.V
      2586**DCL      2586--DCLINIT
RELDCB_FPT.V.DCB#
      2586**DCL      2659<<ASSIGN
REREAD
      2611**LABEL    2644--GOTO     2664--GOTO
SI_DCBNUM
      2595**DCL      2656>>IF       2662>>ASSIGN
VEX$ERROR
      2601**DCL-ENT  2640--CALL     2643--CALL     2649--CALL     2668--CALL
