VERSION E05

PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:1    
        1        1        /*M* IDO$OPEN - OPEN DCBS FOR DEF */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* */
        8        8        /**/
        9        9        IDO$OPENFILE: PROC (OPNTBL,DCB#,ERRCODE,FPAR) ALTRET;
       10       10        /**/
       11       11        %INCLUDE ID_DATA_C;
       12       72        %FIDBLK (NAME=OPNTBL,STCLASS="");
       13      124    1   DCL DCB# UBIN;
       14      125    1   DCL 1 ERRCODE UNAL,
       15      126    1         2 FCG BIT(18) UNAL,
       16      127    1         2 CODE UBIN(15) UNAL,
       17      128    1         2 SEV UBIN(3) UNAL;
       18      129    1   DCL FPAR BIT(72) UNAL;
       19      130        /**/
       20      131    1   DCL ID_BLOCKFLG BIT(1) SYMREF ALIGNED;
       21      132        /**/
       22      133        %INCLUDE CP_6;
       23      214        %INCLUDE CP_6_SUBS;
       24      754        %INCLUDE F$DCB;
       25      803        %FPT_OPEN;
       26      912        %FPT_CLOSE;
       27      954    1   DCL B$TCB$ PTR SYMREF;
       28      955        %B$TCB;
       29      958        %B$ALT;
       30      966        /**/
       31      967        /* BEGIN PROCEDURE */
       32      968        /**/
       33      969    2           IF DCBADDR(DCB#)->F$DCB.FCD THEN DO;
       34      970    2              FPT_CLOSE.V.DCB#=DCB#;
       35      971    2              CALL M$CLOSE(FPT_CLOSE);
       36      972    2              END;
       37      973    1           IF OPNTBL.RESULT.SNX THEN FPT_OPEN.SN_=VECTOR(OPNTBL.SNX);
PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:2    
       38      974    1           ELSE FPT_OPEN.SN_=VECTOR(ERASE);
       39      975    1           FPT_OPEN.NAME_=VECTOR(OPNTBL.FNAME);
       40      976    1           IF OPNTBL.RESULT.PASW THEN FPT_OPEN.PASS_=VECTOR(OPNTBL.PASW);
       41      977    1           ELSE FPT_OPEN.PASS_=VECTOR(ERASE);
       42      978    1           IF OPNTBL.RESULT.ACCN THEN FPT_OPEN.ACCT_=VECTOR(OPNTBL.ACCN);
       43      979    1           ELSE FPT_OPEN.ACCT_=VECTOR(ERASE);
       44      980    1           IF ADDR(FPAR)=ADDR(NIL) THEN FPT_OPEN.FPARAM_=VECTOR(NIL);
       45      981    1           ELSE FPT_OPEN.FPARAM_=FPAR;
       46      982    1           IF OPNTBL.RESULT.WSNX THEN FPT_OPEN.WSN_=VECTOR(OPNTBL.WSNX);
       47      983    1           ELSE FPT_OPEN.WSN_=VECTOR(ERASE);
       48      984    1           FPT_OPEN.V.DCB#=DCB#;
       49      985    1           FPT_OPEN.V.INITZ.SCRUB#=%YES#;
       50      986    1           FPT_OPEN.V.FUN#=%IN#;
       51      987    1           FPT_OPEN.V.ASN#=OPNTBL.ASNX;
       52      988    1           IF ID_BLOCKFLG THEN
       53      989    1              FPT_OPEN.V.ACS#=%BLOCK#;
       54      990    1           ELSE
       55      991    1              FPT_OPEN.V.ACS#=%SEQUEN#;
       56      992    1           CALL M$OPEN(FPT_OPEN) ALTRET(OPNERR);
       57      993    1           RETURN;
       58      994    1   OPNERR:
       59      995    1           ERRCODE=B$TCB$->B$TCB.ALT$->B$ALT.ERR;
       60      996    1           ALTRETURN;
       61      997    1   END IDO$OPENFILE;
       62      998        %EOD;

PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:3    
--  Include file information  --

   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   ID_DATA_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IDO$OPENFILE.

   Procedure IDO$OPENFILE requires 97 words for executable code.
   Procedure IDO$OPENFILE requires 8 words of local(AUTO) storage.

PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:4    

 Object Unit name= IDO$OPENFILE                               File name= IDO$OPEN.:E05TOU
 UTS= JUL 29 '97 22:30:25.76 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none    88    130  IDO$OPENFILE
    2   Proc  even  none    97    141  IDO$OPENFILE
    3  RoData even  none     8     10  IDO$OPENFILE

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes    yes     yes      Std        4  IDO$OPENFILE

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_4
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ID_BLOCKFLG                           M$UC                                  B$TCB$
     B_VECTNIL
PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:5    

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:6    


        1        1        /*M* IDO$OPEN - OPEN DCBS FOR DEF */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* */
        8        8        /**/
        9        9        IDO$OPENFILE: PROC (OPNTBL,DCB#,ERRCODE,FPAR) ALTRET;

      9  2 000000   000000 700200 xent  IDO$OPENFILE TSX0  ! X66_AUTO_4
         2 000001   000010 000004                    ZERO    8,4

       10       10        /**/
       11       11        %INCLUDE ID_DATA_C;
       12       72        %FIDBLK (NAME=OPNTBL,STCLASS="");
       13      124    1   DCL DCB# UBIN;
       14      125    1   DCL 1 ERRCODE UNAL,
       15      126    1         2 FCG BIT(18) UNAL,
       16      127    1         2 CODE UBIN(15) UNAL,
       17      128    1         2 SEV UBIN(3) UNAL;
       18      129    1   DCL FPAR BIT(72) UNAL;
       19      130        /**/
       20      131    1   DCL ID_BLOCKFLG BIT(1) SYMREF ALIGNED;
       21      132        /**/
       22      133        %INCLUDE CP_6;
       23      214        %INCLUDE CP_6_SUBS;
       24      754        %INCLUDE F$DCB;
       25      803        %FPT_OPEN;
       26      912        %FPT_CLOSE;
       27      954    1   DCL B$TCB$ PTR SYMREF;
       28      955        %B$TCB;
       29      958        %B$ALT;
       30      966        /**/
       31      967        /* BEGIN PROCEDURE */
       32      968        /**/
PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:7    
       33      969    2           IF DCBADDR(DCB#)->F$DCB.FCD THEN DO;

    969  2 000002   000000 470400 3                  LDP0    0
         2 000003   000000 471500                    LDP1    0,,PR0
         2 000004   200004 473500                    LDP3    @DCB#,,AUTO
         2 000005   300000 720100                    LXL0    0,,PR3
         2 000006   100000 474510                    LDP4    0,X0,PR1
         2 000007   400031 236100                    LDQ     25,,PR4
         2 000010   020000 316007                    CANQ    8192,DL
         2 000011   000016 600000 2                  TZE     s:973

       34      970    2              FPT_CLOSE.V.DCB#=DCB#;

    970  2 000012   000124 740000 1                  STX0    FPT_CLOSE+26

       35      971    2              CALL M$CLOSE(FPT_CLOSE);

    971  2 000013   000072 630400 1                  EPPR0   FPT_CLOSE
         2 000014   050001 713400                    CLIMB   close
         2 000015   406000 401760                    pmme    nvectors=13

       36      972    2              END;

       37      973    1           IF OPNTBL.RESULT.SNX THEN FPT_OPEN.SN_=VECTOR(OPNTBL.SNX);

    973  2 000016   200003 470500                    LDP0    @OPNTBL,,AUTO
         2 000017   000025 236100                    LDQ     21,,PR0
         2 000020   040000 316003                    CANQ    16384,DU
         2 000021   000027 600000 2                  TZE     s:974

    973  2 000022   000001 235000 3                  LDA     1
         2 000023   200003 236100                    LDQ     @OPNTBL,,AUTO
         2 000024   000015 036003                    ADLQ    13,DU
         2 000025   000002 757000 1                  STAQ    FPT_OPEN+2
         2 000026   000031 710000 2                  TRA     s:975

       38      974    1           ELSE FPT_OPEN.SN_=VECTOR(ERASE);
PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:8    

    974  2 000027   000002 237000 3                  LDAQ    2
         2 000030   000002 757000 1                  STAQ    FPT_OPEN+2

       39      975    1           FPT_OPEN.NAME_=VECTOR(OPNTBL.FNAME);

    975  2 000031   000004 235000 3                  LDA     4
         2 000032   200003 236100                    LDQ     @OPNTBL,,AUTO
         2 000033   000006 757000 1                  STAQ    FPT_OPEN+6

       40      976    1           IF OPNTBL.RESULT.PASW THEN FPT_OPEN.PASS_=VECTOR(OPNTBL.PASW);

    976  2 000034   000025 236100                    LDQ     21,,PR0
         2 000035   100000 316003                    CANQ    32768,DU
         2 000036   000044 600000 2                  TZE     s:977

    976  2 000037   000005 235000 3                  LDA     5
         2 000040   200003 236100                    LDQ     @OPNTBL,,AUTO
         2 000041   000012 036003                    ADLQ    10,DU
         2 000042   000010 757000 1                  STAQ    FPT_OPEN+8
         2 000043   000046 710000 2                  TRA     s:978

       41      977    1           ELSE FPT_OPEN.PASS_=VECTOR(ERASE);

    977  2 000044   000002 237000 3                  LDAQ    2
         2 000045   000010 757000 1                  STAQ    FPT_OPEN+8

       42      978    1           IF OPNTBL.RESULT.ACCN THEN FPT_OPEN.ACCT_=VECTOR(OPNTBL.ACCN);

    978  2 000046   000025 236100                    LDQ     21,,PR0
         2 000047   200000 316003                    CANQ    65536,DU
         2 000050   000056 600000 2                  TZE     s:979

    978  2 000051   000005 235000 3                  LDA     5
         2 000052   200003 236100                    LDQ     @OPNTBL,,AUTO
         2 000053   000010 036003                    ADLQ    8,DU
         2 000054   000024 757000 1                  STAQ    FPT_OPEN+20
PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:9    
         2 000055   000060 710000 2                  TRA     s:980

       43      979    1           ELSE FPT_OPEN.ACCT_=VECTOR(ERASE);

    979  2 000056   000002 237000 3                  LDAQ    2
         2 000057   000024 757000 1                  STAQ    FPT_OPEN+20

       44      980    1           IF ADDR(FPAR)=ADDR(NIL) THEN FPT_OPEN.FPARAM_=VECTOR(NIL);

    980  2 000060   200006 236100                    LDQ     @FPAR,,AUTO
         2 000061   000001 116000 xsym               CMPQ    B_VECTNIL+1
         2 000062   000066 601000 2                  TNZ     s:981

    980  2 000063   000006 237000 3                  LDAQ    6
         2 000064   000030 757000 1                  STAQ    FPT_OPEN+24
         2 000065   000072 710000 2                  TRA     s:982

       45      981    1           ELSE FPT_OPEN.FPARAM_=FPAR;

    981  2 000066   200006 471500                    LDP1    @FPAR,,AUTO
         2 000067   003000 060500                    CSL     bolr='003'O
         2 000070   100000 000110                    BDSC    0,,PR1                   by=0,bit=0,n=72
         2 000071   000030 000110 1                  BDSC    FPT_OPEN+24              by=0,bit=0,n=72

       46      982    1           IF OPNTBL.RESULT.WSNX THEN FPT_OPEN.WSN_=VECTOR(OPNTBL.WSNX);

    982  2 000072   000025 236100                    LDQ     21,,PR0
         2 000073   020000 316003                    CANQ    8192,DU
         2 000074   000102 600000 2                  TZE     s:983

    982  2 000075   000005 235000 3                  LDA     5
         2 000076   200003 236100                    LDQ     @OPNTBL,,AUTO
         2 000077   000023 036003                    ADLQ    19,DU
         2 000100   000032 757000 1                  STAQ    FPT_OPEN+26
         2 000101   000104 710000 2                  TRA     s:984

       47      983    1           ELSE FPT_OPEN.WSN_=VECTOR(ERASE);
PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:10   

    983  2 000102   000002 237000 3                  LDAQ    2
         2 000103   000032 757000 1                  STAQ    FPT_OPEN+26

       48      984    1           FPT_OPEN.V.DCB#=DCB#;

    984  2 000104   200004 471500                    LDP1    @DCB#,,AUTO
         2 000105   100000 720100                    LXL0    0,,PR1
         2 000106   000044 740000 1                  STX0    FPT_OPEN+36

       49      985    1           FPT_OPEN.V.INITZ.SCRUB#=%YES#;

    985  2 000107   400000 236007                    LDQ     -131072,DL
         2 000110   000044 256000 1                  ORSQ    FPT_OPEN+36

       50      986    1           FPT_OPEN.V.FUN#=%IN#;

    986  2 000111   002000 236007                    LDQ     1024,DL
         2 000112   000045 552010 1                  STBQ    FPT_OPEN+37,'10'O

       51      987    1           FPT_OPEN.V.ASN#=OPNTBL.ASNX;

    987  2 000113   000027 236100                    LDQ     23,,PR0
         2 000114   000033 772000                    QRL     27
         2 000115   000045 552004 1                  STBQ    FPT_OPEN+37,'04'O

       52      988    1           IF ID_BLOCKFLG THEN

    988  2 000116   000000 234000 xsym               SZN     ID_BLOCKFLG
         2 000117   000123 605000 2                  TPL     s:991

       53      989    1              FPT_OPEN.V.ACS#=%BLOCK#;

    989  2 000120   000003 236007                    LDQ     3,DL
         2 000121   000046 552004 1                  STBQ    FPT_OPEN+38,'04'O
         2 000122   000125 710000 2                  TRA     s:992

PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:11   
       54      990    1           ELSE
       55      991    1              FPT_OPEN.V.ACS#=%SEQUEN#;

    991  2 000123   000001 236007                    LDQ     1,DL
         2 000124   000046 552004 1                  STBQ    FPT_OPEN+38,'04'O

       56      992    1           CALL M$OPEN(FPT_OPEN) ALTRET(OPNERR);

    992  2 000125   000000 630400 1                  EPPR0   FPT_OPEN
         2 000126   450000 713400                    CLIMB   alt,open
         2 000127   410400 401760                    pmme    nvectors=18
         2 000130   000132 702000 2                  TSX2    OPNERR

       57      993    1           RETURN;

    993  2 000131   000000 702200 xent               TSX2  ! X66_ARET

       58      994    1   OPNERR:
       59      995    1           ERRCODE=B$TCB$->B$TCB.ALT$->B$ALT.ERR;

    995  2 000132   000000 470400 xsym  OPNERR       LDP0    B$TCB$
         2 000133   000000 471500                    LDP1    0,,PR0
         2 000134   200005 473500                    LDP3    @ERRCODE,,AUTO
         2 000135   003100 060500                    CSL     bolr='003'O
         2 000136   100102 000044                    BDSC    66,,PR1                  by=0,bit=0,n=36
         2 000137   300000 000044                    BDSC    0,,PR3                   by=0,bit=0,n=36

       60      996    1           ALTRETURN;

    996  2 000140   000000 702200 xent               TSX2  ! X66_AALT
       61      997    1   END IDO$OPENFILE;
       62      998        %EOD;

PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:12   
--  Include file information  --

   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   ID_DATA_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IDO$OPENFILE.
PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:13   

 **** Variables and constants ****

  ****  Section 001  Data  IDO$OPENFILE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    72-0-0/d STRC(1080)  r     1 FPT_CLOSE                  0-0-0/d STRC(2088)  r     1 FPT_OPEN

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @DCB#                      5-0-0/w PTR         r     1 @ERRCODE
     6-0-0/w PTR         r     1 @FPAR                      3-0-0/w PTR         r     1 @OPNTBL
    *0-0-0/w UBIN        r     1 DCB#                      *0-0-0/b STRC        r     1 ERRCODE
    *0-0-0/b BIT (72)    r     1 FPAR                      *0-0-0/w STRC(1188)  r     1 OPNTBL

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$TCB$                     0-0-0/w BIT         r     1 ID_BLOCKFLG

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/w STRC(144)   r     1 B$TCB
     0-0-0/d ASTR(3528)  r     1 F$DCB


   Procedure IDO$OPENFILE requires 97 words for executable code.
PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:14   
   Procedure IDO$OPENFILE requires 8 words of local(AUTO) storage.
PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:15   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:16   
          MINI XREF LISTING

B$ALT.CODE
       960**DCL       960--REDEF     961--REDEF     961--REDEF
B$ALT.ERR
       961**DCL       995>>ASSIGN
B$ALT.ERR.ERR#
       962**DCL       962--REDEF
B$ALT.EVID
       961**DCL       961--REDEF     961--REDEF
B$TCB.ALT$
       956**DCL       995>>ASSIGN
B$TCB$
       954**DCL       995>>ASSIGN
DCB#
       124**DCL         9--PROC      969--IF        970>>ASSIGN    984>>ASSIGN
ERRCODE
       125**DCL         9--PROC      995<<ASSIGN
F$DCB.ACTPOS
       780**DCL       780--REDEF
F$DCB.ARS
       755**DCL       755--REDEF
F$DCB.ATTR
       773**DCL       774--REDEF
F$DCB.BORROW
       788**DCL       788--REDEF     788--REDEF     788--REDEF
F$DCB.DCBNAME.L
       802**DCL       802--IMP-SIZ
F$DCB.EOMCHAR
       759**DCL       759--REDEF
F$DCB.FCD
       768**DCL       969>>IF
F$DCB.FLDID
       783**DCL       783--REDEF
PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:17   
F$DCB.FORM$
       777**DCL       777--REDEF
F$DCB.FSECT
       793**DCL       793--REDEF
F$DCB.FSN
       770**DCL       770--REDEF     770--REDEF     771--REDEF
F$DCB.HEADER$
       776**DCL       776--REDEF
F$DCB.IXTNSIZE
       774**DCL       774--REDEF
F$DCB.LASTSTA$
       764**DCL       764--REDEF
F$DCB.LVL
       789**DCL       789--REDEF
F$DCB.NAME.C
       764**DCL       764--REDEF
F$DCB.NOEOF
       785**DCL       785--REDEF
F$DCB.NRECS
       775**DCL       775--REDEF
F$DCB.NRECX
       794**DCL       794--REDEF
F$DCB.OHDR
       786**DCL       786--REDEF
F$DCB.ORG
       769**DCL       769--REDEF
F$DCB.PRECNO
       792**DCL       792--REDEF
F$DCB.RCSZ
       797**DCL       797--REDEF
F$DCB.RES
       765**DCL       765--REDEF
F$DCB.SETX
       777**DCL       777--REDEF
F$DCB.TAB$
       776**DCL       777--REDEF
PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:18   
F$DCB.TDA
       791**DCL       791--REDEF
F$DCB.WSN
       766**DCL       766--REDEF
FPAR
       129**DCL         9--PROC      980--IF        981>>ASSIGN
FPT_CLOSE
       935**DCL       971<>CALL
FPT_CLOSE.SN_
       935**DCL       935--REDEF
FPT_CLOSE.UTL_
       936**DCL       936--REDEF
FPT_CLOSE.V
       940**DCL       935--DCLINIT
FPT_CLOSE.V.DCB#
       941**DCL       970<<ASSIGN
FPT_CLOSE.V.EXPIRE#
       950**DCL       950--REDEF
FPT_CLOSE.V.TYPE#
       948**DCL       948--REDEF
FPT_CLOSE.V.XTNSIZE#
       945**DCL       945--REDEF     947--REDEF
FPT_OPEN
       868**DCL       992<>CALL
FPT_OPEN.ACCT_
       872**DCL       978<<ASSIGN    979<<ASSIGN
FPT_OPEN.ACSVEH_
       870**DCL       871--REDEF
FPT_OPEN.ALTKEYS_
       876**DCL       877--REDEF     877--REDEF
FPT_OPEN.FPARAM_
       873**DCL       980<<ASSIGN    981<<ASSIGN
FPT_OPEN.HDR_
       875**DCL       876--REDEF
FPT_OPEN.NAME_
       869**DCL       975<<ASSIGN
PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:19   
FPT_OPEN.PASS_
       870**DCL       976<<ASSIGN    977<<ASSIGN
FPT_OPEN.SN_
       868**DCL       973<<ASSIGN    974<<ASSIGN
FPT_OPEN.TAB_
       874**DCL       875--REDEF
FPT_OPEN.UHL_
       868**DCL       869--REDEF     869--REDEF
FPT_OPEN.V
       877**DCL       868--DCLINIT
FPT_OPEN.V.ACS#
       888**DCL       989<<ASSIGN    991<<ASSIGN
FPT_OPEN.V.ASN#
       887**DCL       987<<ASSIGN
FPT_OPEN.V.DCB#
       877**DCL       984<<ASSIGN
FPT_OPEN.V.FSN#
       908**DCL       908--REDEF     908--REDEF
FPT_OPEN.V.FUN#
       887**DCL       986<<ASSIGN
FPT_OPEN.V.INITZ.SCRUB#
       878**DCL       985<<ASSIGN
FPT_OPEN.WSN_
       874**DCL       874--REDEF     982<<ASSIGN    983<<ASSIGN
ID_BLOCKFLG
       131**DCL       988>>IF
M$CLOSE
       142**DCL-ENT   971--CALL
M$OPEN
       142**DCL-ENT   992--CALL
OPNERR
       995**LABEL     992--CALLALT
OPNTBL
        85**DCL         9--PROC
OPNTBL.ACCN
        92**DCL       978--ASSIGN
PL6.E3A0      #001=IDO$OPENFILE File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:30 Page:20   
OPNTBL.ASNX
       109**DCL       987>>ASSIGN
OPNTBL.FNAME
        89**DCL       975--ASSIGN
OPNTBL.PASW
        93**DCL       976--ASSIGN
OPNTBL.RESULT.ACCN
       101**DCL       978>>IF
OPNTBL.RESULT.PASW
       102**DCL       976>>IF
OPNTBL.RESULT.SNX
       103**DCL       973>>IF
OPNTBL.RESULT.WSNX
       104**DCL       982>>IF
OPNTBL.SNX
        95**DCL       973--ASSIGN
OPNTBL.WSNX
        98**DCL       982--ASSIGN

PL6.E3A0      #002=IDO$SETFIRST File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:21   
       63        1        /*T***********************************************************/
       64        2        /*T*                                                         */
       65        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       66        4        /*T*                                                         */
       67        5        /*T***********************************************************/
       68        6        /**/
       69        7        IDO$SETFIRST: PROC(DCB#,ACCNSPEC);
       70        8        /**/
       71        9    1   DCL DCB# UBIN;
       72       10    1   DCL 1 ACCNSPEC,
       73       11    1         2 FL$ PTR,
       74       12    1         2 ACCN CHAR(8),
       75       13    1         2 SN,
       76       14    1           3 CNT UBIN,
       77       15    1           3 TXT CHAR(6),
       78       16    1         2 ASN UBIN(18) UNAL;
       79       17        /**/
       80       18        %INCLUDE CP_6;
       81       99        %FPT_OPEN (SCRUB=YES,SETDCB=YES,ASN=FILE);
       82      208        %FPT_CLOSE (DISP=SAVE);
       83      250        %INCLUDE F$DCB;
       84      299        /**/
       85      300        /**/
       86      301        /**/
       87      302    2           IF DCBADDR(DCB#)->F$DCB.FCD THEN DO;
       88      303    2              FPT_CLOSE.V.DCB#=DCB#;
       89      304    2              CALL M$CLOSE(FPT_CLOSE);
       90      305    2              END;
       91      306    1           FPT_OPEN.V.DCB#=DCB#;
       92      307    1           FPT_OPEN.ACCT_=VECTOR(ACCNSPEC.ACCN);
       93      308    1           IF ACCNSPEC.SN.TXT=' ' THEN
       94      309    1              FPT_OPEN.SN_=VECTOR(ERASE);
       95      310    1           ELSE FPT_OPEN.SN_=VECTOR(ACCNSPEC.SN);
       96      311    1           FPT_OPEN.V.ASN#=ACCNSPEC.ASN;
       97      312    1           CALL M$OPEN(FPT_OPEN);
       98      313    1           RETURN;
       99      314    1   END IDO$SETFIRST;
PL6.E3A0      #002=IDO$SETFIRST File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:22   
      100      315        %EOD;

PL6.E3A0      #002=IDO$SETFIRST File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:23   
--  Include file information  --

   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IDO$SETFIRST.

   Procedure IDO$SETFIRST requires 40 words for executable code.
   Procedure IDO$SETFIRST requires 6 words of local(AUTO) storage.

PL6.E3A0      #002=IDO$SETFIRST File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:24   

 Object Unit name= IDO$SETFIRST                               File name= IDO$OPEN.:E05TOU
 UTS= JUL 29 '97 22:31:03.08 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none    88    130  IDO$SETFIRST
    2   Proc  even  none    40     50  IDO$SETFIRST
    3  RoData even  none     5      5  IDO$SETFIRST

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes            yes      Std        2  IDO$SETFIRST

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_2
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  B_VECTNIL
PL6.E3A0      #002=IDO$SETFIRST File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:25   

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #002=IDO$SETFIRST File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:26   


       63        1        /*T***********************************************************/
       64        2        /*T*                                                         */
       65        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       66        4        /*T*                                                         */
       67        5        /*T***********************************************************/
       68        6        /**/
       69        7        IDO$SETFIRST: PROC(DCB#,ACCNSPEC);

      7  2 000000   000000 700200 xent  IDO$SETFIRST TSX0  ! X66_AUTO_2
         2 000001   000006 000002                    ZERO    6,2

       70        8        /**/
       71        9    1   DCL DCB# UBIN;
       72       10    1   DCL 1 ACCNSPEC,
       73       11    1         2 FL$ PTR,
       74       12    1         2 ACCN CHAR(8),
       75       13    1         2 SN,
       76       14    1           3 CNT UBIN,
       77       15    1           3 TXT CHAR(6),
       78       16    1         2 ASN UBIN(18) UNAL;
       79       17        /**/
       80       18        %INCLUDE CP_6;
       81       99        %FPT_OPEN (SCRUB=YES,SETDCB=YES,ASN=FILE);
       82      208        %FPT_CLOSE (DISP=SAVE);
       83      250        %INCLUDE F$DCB;
       84      299        /**/
       85      300        /**/
       86      301        /**/
       87      302    2           IF DCBADDR(DCB#)->F$DCB.FCD THEN DO;

    302  2 000002   000000 470400 3                  LDP0    0
         2 000003   000000 471500                    LDP1    0,,PR0
         2 000004   200003 473500                    LDP3    @DCB#,,AUTO
         2 000005   300000 720100                    LXL0    0,,PR3
         2 000006   100000 474510                    LDP4    0,X0,PR1
         2 000007   400031 236100                    LDQ     25,,PR4
PL6.E3A0      #002=IDO$SETFIRST File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:27   
         2 000010   020000 316007                    CANQ    8192,DL
         2 000011   000016 600000 2                  TZE     s:306

       88      303    2              FPT_CLOSE.V.DCB#=DCB#;

    303  2 000012   000124 740000 1                  STX0    FPT_CLOSE+26

       89      304    2              CALL M$CLOSE(FPT_CLOSE);

    304  2 000013   000072 630400 1                  EPPR0   FPT_CLOSE
         2 000014   050001 713400                    CLIMB   close
         2 000015   406000 401760                    pmme    nvectors=13

       90      305    2              END;

       91      306    1           FPT_OPEN.V.DCB#=DCB#;

    306  2 000016   200003 470500                    LDP0    @DCB#,,AUTO
         2 000017   000000 720100                    LXL0    0,,PR0
         2 000020   000044 740000 1                  STX0    FPT_OPEN+36

       92      307    1           FPT_OPEN.ACCT_=VECTOR(ACCNSPEC.ACCN);

    307  2 000021   000001 235000 3                  LDA     1
         2 000022   200004 236100                    LDQ     @ACCNSPEC,,AUTO
         2 000023   000001 036003                    ADLQ    1,DU
         2 000024   000024 757000 1                  STAQ    FPT_OPEN+20

       93      308    1           IF ACCNSPEC.SN.TXT=' ' THEN

    308  2 000025   200004 471500                    LDP1    @ACCNSPEC,,AUTO
         2 000026   040000 106500                    CMPC    fill='040'O
         2 000027   100004 000006                    ADSC9   4,,PR1                   cn=0,n=6
         2 000030   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
         2 000031   000035 601000 2                  TNZ     s:310

       94      309    1              FPT_OPEN.SN_=VECTOR(ERASE);
PL6.E3A0      #002=IDO$SETFIRST File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:28   

    309  2 000032   000002 237000 3                  LDAQ    2
         2 000033   000002 757000 1                  STAQ    FPT_OPEN+2
         2 000034   000041 710000 2                  TRA     s:311

       95      310    1           ELSE FPT_OPEN.SN_=VECTOR(ACCNSPEC.SN);

    310  2 000035   000004 235000 3                  LDA     4
         2 000036   200004 236100                    LDQ     @ACCNSPEC,,AUTO
         2 000037   000003 036003                    ADLQ    3,DU
         2 000040   000002 757000 1                  STAQ    FPT_OPEN+2

       96      311    1           FPT_OPEN.V.ASN#=ACCNSPEC.ASN;

    311  2 000041   100006 236100                    LDQ     6,,PR1
         2 000042   000022 772000                    QRL     18
         2 000043   000045 552004 1                  STBQ    FPT_OPEN+37,'04'O

       97      312    1           CALL M$OPEN(FPT_OPEN);

    312  2 000044   000000 630400 1                  EPPR0   FPT_OPEN
         2 000045   050000 713400                    CLIMB   open
         2 000046   410400 401760                    pmme    nvectors=18

       98      313    1           RETURN;

    313  2 000047   000000 702200 xent               TSX2  ! X66_ARET
       99      314    1   END IDO$SETFIRST;
      100      315        %EOD;

PL6.E3A0      #002=IDO$SETFIRST File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:29   
--  Include file information  --

   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IDO$SETFIRST.
PL6.E3A0      #002=IDO$SETFIRST File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:30   

 **** Variables and constants ****

  ****  Section 001  Data  IDO$SETFIRST

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    72-0-0/d STRC(1080)  r     1 FPT_CLOSE                  0-0-0/d STRC(2088)  r     1 FPT_OPEN

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @ACCNSPEC                  3-0-0/w PTR         r     1 @DCB#
    *0-0-0/w STRC(234)   r     1 ACCNSPEC                  *0-0-0/w UBIN        r     1 DCB#

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d ASTR(3528)  r     1 F$DCB


   Procedure IDO$SETFIRST requires 40 words for executable code.
   Procedure IDO$SETFIRST requires 6 words of local(AUTO) storage.
PL6.E3A0      #002=IDO$SETFIRST File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:31   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=IDO$SETFIRST File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:32   
          MINI XREF LISTING

ACCNSPEC
        10**DCL         7--PROC
ACCNSPEC.ACCN
        12**DCL       307--ASSIGN
ACCNSPEC.ASN
        16**DCL       311>>ASSIGN
ACCNSPEC.SN
        13**DCL       310--ASSIGN
ACCNSPEC.SN.TXT
        15**DCL       308>>IF
DCB#
         9**DCL         7--PROC      302--IF        303>>ASSIGN    306>>ASSIGN
F$DCB.ACTPOS
       276**DCL       276--REDEF
F$DCB.ARS
       251**DCL       251--REDEF
F$DCB.ATTR
       269**DCL       270--REDEF
F$DCB.BORROW
       284**DCL       284--REDEF     284--REDEF     284--REDEF
F$DCB.DCBNAME.L
       298**DCL       298--IMP-SIZ
F$DCB.EOMCHAR
       255**DCL       255--REDEF
F$DCB.FCD
       264**DCL       302>>IF
F$DCB.FLDID
       279**DCL       279--REDEF
F$DCB.FORM$
       273**DCL       273--REDEF
F$DCB.FSECT
       289**DCL       289--REDEF
PL6.E3A0      #002=IDO$SETFIRST File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:33   
F$DCB.FSN
       266**DCL       266--REDEF     266--REDEF     267--REDEF
F$DCB.HEADER$
       272**DCL       272--REDEF
F$DCB.IXTNSIZE
       270**DCL       270--REDEF
F$DCB.LASTSTA$
       260**DCL       260--REDEF
F$DCB.LVL
       285**DCL       285--REDEF
F$DCB.NAME.C
       260**DCL       260--REDEF
F$DCB.NOEOF
       281**DCL       281--REDEF
F$DCB.NRECS
       271**DCL       271--REDEF
F$DCB.NRECX
       290**DCL       290--REDEF
F$DCB.OHDR
       282**DCL       282--REDEF
F$DCB.ORG
       265**DCL       265--REDEF
F$DCB.PRECNO
       288**DCL       288--REDEF
F$DCB.RCSZ
       293**DCL       293--REDEF
F$DCB.RES
       261**DCL       261--REDEF
F$DCB.SETX
       273**DCL       273--REDEF
F$DCB.TAB$
       272**DCL       273--REDEF
F$DCB.TDA
       287**DCL       287--REDEF
F$DCB.WSN
       262**DCL       262--REDEF
PL6.E3A0      #002=IDO$SETFIRST File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:34   
FPT_CLOSE
       231**DCL       304<>CALL
FPT_CLOSE.SN_
       231**DCL       231--REDEF
FPT_CLOSE.UTL_
       232**DCL       232--REDEF
FPT_CLOSE.V
       236**DCL       231--DCLINIT
FPT_CLOSE.V.DCB#
       237**DCL       303<<ASSIGN
FPT_CLOSE.V.EXPIRE#
       246**DCL       246--REDEF
FPT_CLOSE.V.TYPE#
       244**DCL       244--REDEF
FPT_CLOSE.V.XTNSIZE#
       241**DCL       241--REDEF     243--REDEF
FPT_OPEN
       164**DCL       312<>CALL
FPT_OPEN.ACCT_
       168**DCL       307<<ASSIGN
FPT_OPEN.ACSVEH_
       166**DCL       167--REDEF
FPT_OPEN.ALTKEYS_
       172**DCL       173--REDEF     173--REDEF
FPT_OPEN.HDR_
       171**DCL       172--REDEF
FPT_OPEN.SN_
       164**DCL       309<<ASSIGN    310<<ASSIGN
FPT_OPEN.TAB_
       170**DCL       171--REDEF
FPT_OPEN.UHL_
       164**DCL       165--REDEF     165--REDEF
FPT_OPEN.V
       173**DCL       164--DCLINIT
FPT_OPEN.V.ASN#
       183**DCL       311<<ASSIGN
PL6.E3A0      #002=IDO$SETFIRST File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:35   
FPT_OPEN.V.DCB#
       173**DCL       306<<ASSIGN
FPT_OPEN.V.FSN#
       204**DCL       204--REDEF     204--REDEF
FPT_OPEN.WSN_
       170**DCL       170--REDEF
M$CLOSE
        27**DCL-ENT   304--CALL
M$OPEN
        27**DCL-ENT   312--CALL

PL6.E3A0      #003=IDO$OPENNEXT File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:36   
      101        1        /*T***********************************************************/
      102        2        /*T*                                                         */
      103        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      104        4        /*T*                                                         */
      105        5        /*T***********************************************************/
      106        6        IDO$OPENNEXT: PROC(DCB#,FPAR) ALTRET;
      107        7        /**/
      108        8    1   DCL DCB# UBIN;
      109        9    1   DCL FPAR BIT(72) UNAL;
      110       10        /**/
      111       11        %INCLUDE F$DCB;
      112       60        %INCLUDE CP_6;
      113      141        %INCLUDE CP_6_SUBS;
      114      681        %FPT_OPEN (NXTF=YES,ASN=FILE,FUN=IN,SHARE=IN);
      115      790        %FPT_CLOSE (DISP=SAVE);
      116      832        %INCLUDE F_ERRORS_C;
      117     1072    1   DCL B$TCB$ PTR SYMREF;
      118     1073        %B$TCB;
      119     1076        %B$ALT;
      120     1084        /**/
      121     1085    1   DCL ID_BLOCKFLG BIT(1) SYMREF ALIGNED;
      122     1086        /**/
      123     1087        /**/
      124     1088    1           IF ID_BLOCKFLG THEN
      125     1089    1              FPT_OPEN.V.ACS#=%BLOCK#;
      126     1090    1           ELSE
      127     1091    1              FPT_OPEN.V.ACS#=%SEQUEN#;
      128     1092    1   TRY_AGAIN:
      129     1093    2           IF DCBADDR(DCB#)->F$DCB.FCD THEN DO;
      130     1094    2              FPT_CLOSE.V.DCB#=DCB#;
      131     1095    2              CALL M$CLOSE(FPT_CLOSE);
      132     1096    2              END;
      133     1097    1           FPT_OPEN.V.DCB#=DCB#;
      134     1098    1           FPT_OPEN.FPARAM_=FPAR;
      135     1099    1           CALL M$OPEN(FPT_OPEN) ALTRET(BAD_OPEN);
      136     1100    1           RETURN;
      137     1101    1   BAD_OPEN:
PL6.E3A0      #003=IDO$OPENNEXT File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:37   
      138     1102    1           IF B$TCB$->B$TCB.ALT$->B$ALT.ERR.CODE=%E$FDEOF THEN ALTRETURN;
      139     1103    1           GOTO TRY_AGAIN;
      140     1104    1   END IDO$OPENNEXT;

PL6.E3A0      #003=IDO$OPENNEXT File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:38   
--  Include file information  --

   F_ERRORS_C.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IDO$OPENNEXT.

   Procedure IDO$OPENNEXT requires 41 words for executable code.
   Procedure IDO$OPENNEXT requires 6 words of local(AUTO) storage.

    No errors detected in file IDO$OPEN.:E05TSI    .

PL6.E3A0      #003=IDO$OPENNEXT File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:39   

 Object Unit name= IDO$OPENNEXT                               File name= IDO$OPEN.:E05TOU
 UTS= JUL 29 '97 22:31:31.12 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none    88    130  IDO$OPENNEXT
    2   Proc  even  none    41     51  IDO$OPENNEXT
    3  RoData even  none     1      1  IDO$OPENNEXT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes    yes     yes      Std        2  IDO$OPENNEXT

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_2
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  B$TCB$                                ID_BLOCKFLG
PL6.E3A0      #003=IDO$OPENNEXT File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:40   

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #003=IDO$OPENNEXT File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:41   


      101        1        /*T***********************************************************/
      102        2        /*T*                                                         */
      103        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      104        4        /*T*                                                         */
      105        5        /*T***********************************************************/
      106        6        IDO$OPENNEXT: PROC(DCB#,FPAR) ALTRET;

      6  2 000000   000000 700200 xent  IDO$OPENNEXT TSX0  ! X66_AUTO_2
         2 000001   000006 000002                    ZERO    6,2

      107        7        /**/
      108        8    1   DCL DCB# UBIN;
      109        9    1   DCL FPAR BIT(72) UNAL;
      110       10        /**/
      111       11        %INCLUDE F$DCB;
      112       60        %INCLUDE CP_6;
      113      141        %INCLUDE CP_6_SUBS;
      114      681        %FPT_OPEN (NXTF=YES,ASN=FILE,FUN=IN,SHARE=IN);
      115      790        %FPT_CLOSE (DISP=SAVE);
      116      832        %INCLUDE F_ERRORS_C;
      117     1072    1   DCL B$TCB$ PTR SYMREF;
      118     1073        %B$TCB;
      119     1076        %B$ALT;
      120     1084        /**/
      121     1085    1   DCL ID_BLOCKFLG BIT(1) SYMREF ALIGNED;
      122     1086        /**/
      123     1087        /**/
      124     1088    1           IF ID_BLOCKFLG THEN

   1088  2 000002   000000 234000 xsym               SZN     ID_BLOCKFLG
         2 000003   000007 605000 2                  TPL     s:1091

      125     1089    1              FPT_OPEN.V.ACS#=%BLOCK#;

   1089  2 000004   000003 236007                    LDQ     3,DL
         2 000005   000046 552004 1                  STBQ    FPT_OPEN+38,'04'O
PL6.E3A0      #003=IDO$OPENNEXT File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:42   
         2 000006   000011 710000 2                  TRA     TRY_AGAIN

      126     1090    1           ELSE
      127     1091    1              FPT_OPEN.V.ACS#=%SEQUEN#;

   1091  2 000007   000001 236007                    LDQ     1,DL
         2 000010   000046 552004 1                  STBQ    FPT_OPEN+38,'04'O

      128     1092    1   TRY_AGAIN:
      129     1093    2           IF DCBADDR(DCB#)->F$DCB.FCD THEN DO;

   1093  2 000011   000000 470400 3     TRY_AGAIN    LDP0    0
         2 000012   000000 471500                    LDP1    0,,PR0
         2 000013   200003 473500                    LDP3    @DCB#,,AUTO
         2 000014   300000 720100                    LXL0    0,,PR3
         2 000015   100000 474510                    LDP4    0,X0,PR1
         2 000016   400031 236100                    LDQ     25,,PR4
         2 000017   020000 316007                    CANQ    8192,DL
         2 000020   000025 600000 2                  TZE     s:1097

      130     1094    2              FPT_CLOSE.V.DCB#=DCB#;

   1094  2 000021   000124 740000 1                  STX0    FPT_CLOSE+26

      131     1095    2              CALL M$CLOSE(FPT_CLOSE);

   1095  2 000022   000072 630400 1                  EPPR0   FPT_CLOSE
         2 000023   050001 713400                    CLIMB   close
         2 000024   406000 401760                    pmme    nvectors=13

      132     1096    2              END;

      133     1097    1           FPT_OPEN.V.DCB#=DCB#;

   1097  2 000025   200003 470500                    LDP0    @DCB#,,AUTO
         2 000026   000000 720100                    LXL0    0,,PR0
         2 000027   000044 740000 1                  STX0    FPT_OPEN+36
PL6.E3A0      #003=IDO$OPENNEXT File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:43   

      134     1098    1           FPT_OPEN.FPARAM_=FPAR;

   1098  2 000030   200004 471500                    LDP1    @FPAR,,AUTO
         2 000031   003000 060500                    CSL     bolr='003'O
         2 000032   100000 000110                    BDSC    0,,PR1                   by=0,bit=0,n=72
         2 000033   000030 000110 1                  BDSC    FPT_OPEN+24              by=0,bit=0,n=72

      135     1099    1           CALL M$OPEN(FPT_OPEN) ALTRET(BAD_OPEN);

   1099  2 000034   000000 630400 1                  EPPR0   FPT_OPEN
         2 000035   450000 713400                    CLIMB   alt,open
         2 000036   410400 401760                    pmme    nvectors=18
         2 000037   000041 702000 2                  TSX2    BAD_OPEN

      136     1100    1           RETURN;

   1100  2 000040   000000 702200 xent               TSX2  ! X66_ARET

      137     1101    1   BAD_OPEN:
      138     1102    1           IF B$TCB$->B$TCB.ALT$->B$ALT.ERR.CODE=%E$FDEOF THEN ALTRETURN;

   1102  2 000041   000000 470400 xsym  BAD_OPEN     LDP0    B$TCB$
         2 000042   000000 471500                    LDP1    0,,PR0
         2 000043   100102 236100                    LDQ     66,,PR1
         2 000044   377770 376007                    ANQ     131064,DL
         2 000045   001540 116007                    CMPQ    864,DL
         2 000046   000050 601000 2                  TNZ     s:1103

   1102  2 000047   000000 702200 xent               TSX2  ! X66_AALT

      139     1103    1           GOTO TRY_AGAIN;

   1103  2 000050   000011 710000 2                  TRA     TRY_AGAIN
      140     1104    1   END IDO$OPENNEXT;

PL6.E3A0      #003=IDO$OPENNEXT File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:44   
--  Include file information  --

   F_ERRORS_C.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IDO$OPENNEXT.
PL6.E3A0      #003=IDO$OPENNEXT File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:45   

 **** Variables and constants ****

  ****  Section 001  Data  IDO$OPENNEXT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    72-0-0/d STRC(1080)  r     1 FPT_CLOSE                  0-0-0/d STRC(2088)  r     1 FPT_OPEN

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @DCB#                      4-0-0/w PTR         r     1 @FPAR
    *0-0-0/w UBIN        r     1 DCB#                      *0-0-0/b BIT (72)    r     1 FPAR

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$TCB$                     0-0-0/w BIT         r     1 ID_BLOCKFLG

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/w STRC(144)   r     1 B$TCB
     0-0-0/d ASTR(3528)  r     1 F$DCB


   Procedure IDO$OPENNEXT requires 41 words for executable code.
   Procedure IDO$OPENNEXT requires 6 words of local(AUTO) storage.
PL6.E3A0      #003=IDO$OPENNEXT File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:46   

    No errors detected in file IDO$OPEN.:E05TSI    .
PL6.E3A0      #003=IDO$OPENNEXT File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:47   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=IDO$OPENNEXT File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:48   
          MINI XREF LISTING

B$ALT.CODE
      1078**DCL      1078--REDEF    1079--REDEF    1079--REDEF
B$ALT.ERR.CODE
      1080**DCL      1102>>IF
B$ALT.ERR.ERR#
      1080**DCL      1080--REDEF
B$ALT.EVID
      1079**DCL      1079--REDEF    1079--REDEF
B$TCB.ALT$
      1074**DCL      1102>>IF
B$TCB$
      1072**DCL      1102>>IF
BAD_OPEN
      1102**LABEL    1099--CALLALT
DCB#
         8**DCL         6--PROC     1093--IF       1094>>ASSIGN   1097>>ASSIGN
F$DCB.ACTPOS
        37**DCL        37--REDEF
F$DCB.ARS
        12**DCL        12--REDEF
F$DCB.ATTR
        30**DCL        31--REDEF
F$DCB.BORROW
        45**DCL        45--REDEF      45--REDEF      45--REDEF
F$DCB.DCBNAME.L
        59**DCL        59--IMP-SIZ
F$DCB.EOMCHAR
        16**DCL        16--REDEF
F$DCB.FCD
        25**DCL      1093>>IF
F$DCB.FLDID
        40**DCL        40--REDEF
PL6.E3A0      #003=IDO$OPENNEXT File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:49   
F$DCB.FORM$
        34**DCL        34--REDEF
F$DCB.FSECT
        50**DCL        50--REDEF
F$DCB.FSN
        27**DCL        27--REDEF      27--REDEF      28--REDEF
F$DCB.HEADER$
        33**DCL        33--REDEF
F$DCB.IXTNSIZE
        31**DCL        31--REDEF
F$DCB.LASTSTA$
        21**DCL        21--REDEF
F$DCB.LVL
        46**DCL        46--REDEF
F$DCB.NAME.C
        21**DCL        21--REDEF
F$DCB.NOEOF
        42**DCL        42--REDEF
F$DCB.NRECS
        32**DCL        32--REDEF
F$DCB.NRECX
        51**DCL        51--REDEF
F$DCB.OHDR
        43**DCL        43--REDEF
F$DCB.ORG
        26**DCL        26--REDEF
F$DCB.PRECNO
        49**DCL        49--REDEF
F$DCB.RCSZ
        54**DCL        54--REDEF
F$DCB.RES
        22**DCL        22--REDEF
F$DCB.SETX
        34**DCL        34--REDEF
F$DCB.TAB$
        33**DCL        34--REDEF
PL6.E3A0      #003=IDO$OPENNEXT File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:50   
F$DCB.TDA
        48**DCL        48--REDEF
F$DCB.WSN
        23**DCL        23--REDEF
FPAR
         9**DCL         6--PROC     1098>>ASSIGN
FPT_CLOSE
       813**DCL      1095<>CALL
FPT_CLOSE.SN_
       813**DCL       813--REDEF
FPT_CLOSE.UTL_
       814**DCL       814--REDEF
FPT_CLOSE.V
       818**DCL       813--DCLINIT
FPT_CLOSE.V.DCB#
       819**DCL      1094<<ASSIGN
FPT_CLOSE.V.EXPIRE#
       828**DCL       828--REDEF
FPT_CLOSE.V.TYPE#
       826**DCL       826--REDEF
FPT_CLOSE.V.XTNSIZE#
       823**DCL       823--REDEF     825--REDEF
FPT_OPEN
       746**DCL      1099<>CALL
FPT_OPEN.ACSVEH_
       748**DCL       749--REDEF
FPT_OPEN.ALTKEYS_
       754**DCL       755--REDEF     755--REDEF
FPT_OPEN.FPARAM_
       751**DCL      1098<<ASSIGN
FPT_OPEN.HDR_
       753**DCL       754--REDEF
FPT_OPEN.TAB_
       752**DCL       753--REDEF
FPT_OPEN.UHL_
       746**DCL       747--REDEF     747--REDEF
PL6.E3A0      #003=IDO$OPENNEXT File=IDO$OPEN.:E05TSI                            TUE 07/29/97 22:31 Page:51   
FPT_OPEN.V
       755**DCL       746--DCLINIT
FPT_OPEN.V.ACS#
       766**DCL      1089<<ASSIGN   1091<<ASSIGN
FPT_OPEN.V.DCB#
       755**DCL      1097<<ASSIGN
FPT_OPEN.V.FSN#
       786**DCL       786--REDEF     786--REDEF
FPT_OPEN.WSN_
       752**DCL       752--REDEF
ID_BLOCKFLG
      1085**DCL      1088>>IF
M$CLOSE
        69**DCL-ENT  1095--CALL
M$OPEN
        69**DCL-ENT  1099--CALL
TRY_AGAIN
      1093**LABEL    1103--GOTO
