VERSION E05

PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:1    
        1        1        /*M*     Allocate TIGR built array processor tables */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*/
        8        8        /**/
        9        9        /*P*     NAME:     ITA$AP
       10       10                 PURPOSE:  ITA$AP builds the tables for the array processors */
       11       11        /**/
       12       12        ITA$AP: PROC (PTR$)  ALTRET;
       13       13        /**/
       14       14        /*  PARAMETER  */
       15       15    1   DCL PTR$ PTR;                           /* PTR TO TIGR TABLE SPACE            */
       16       16        /**/
       17       17        /*  INCLUDE FILES */
       18       18        %INCLUDE CP_6_SUBS;
       19      558        %INCLUDE NI_DATA_R;
       20      995        %INCLUDE IT_ERROR_C;
       21     1078        %INCLUDE IT_SUBS_C;
       22     1345        %INCLUDE IT$APDEV;
       23     1374        %INCLUDE IT$CMDWD;
       24     1382        %INCLUDE IT$APC;
       25     1411        %INCLUDE NK_SUBS;
       26     1436        %INCLUDE FR$RAT;
       27     1489        %FR$RAT;
       28     1529        %INCLUDE FR_SUBS;
       29     1597        %SUB YES = '1'B/*YES*/;
       30     1598        %SUB NO = '0'B/*NO*/;
       31     1599        /**/
       32     1600        /*  AUTOMATIC  */
       33     1601    1   DCL CMD$ PTR;
       34     1602    1   DCL SQH$ PTR;
       35     1603    1   DCL DQH$ PTR;
       36     1604    1   DCL DEV$ PTR;
       37     1605    1   DCL RAT$ PTR;
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:2    
       38     1606    1   DCL APC$ PTR;
       39     1607    1   DCL CHTX UBIN(36);
       40     1608    1   DCL CHX UBIN;
       41     1609    1   DCL I UBIN WORD;
       42     1610    1   DCL J UBIN(36);
       43     1611    1   DCL 1 DUPCHANERR_TEXT,
       44     1612    1         2 COUNT UBIN(9) UNAL,
       45     1613    1         2 CHANNEL CHAR(8) UNAL,
       46     1614    1         2 IOMTEXT CHAR(1) UNAL,
       47     1615    1         2 DASH CHAR(1) UNAL,
       48     1616    1         2 CHANTEXT CHAR(2) UNAL;
       49     1617        /**/
       50     1618    1   DCL APCX UBIN;
       51     1619        /**/
       52     1620        /*  BASED  */
       53     1621        /**/
       54     1622    1   DCL IT$WORD(0:0) UBIN WORD BASED ALIGNED;
       55     1623        /**/
       56     1624        %NI$SQH;
       57     1637        %NI$CHT;
       58     1640        %NI$DQH;
       59     1663        %NI$DCT;
       60     1711        %NI$DVT;
       61     1718        %NI$IOSTAT;
       62     1727        %NI$IOM;
       63     1732        %NI$MBX;
       64     1751        /**/
       65     1752    1   DCL IT$PTR PTR BASED ALIGNED;
       66     1753        /**/
       67     1754        /*  ENTRY DECLARES */
       68     1755        /**/
       69     1756    1   DCL ITE$ERROR ENTRY(2);
       70     1757    1   DCL ITH$ALLOCATE ENTRY(2) ALTRET;
       71     1758    1   DCL ITH$SQH_INIT ENTRY(2) ALTRET;
       72     1759    1   DCL ITH$RAT_INIT ENTRY(2) ALTRET;
       73     1760    1   DCL ITH$DCT_INIT ENTRY(2) ALTRET;
       74     1761        /**/
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:3    
       75     1762        /*  SYMREFS  */
       76     1763        /**/
       77     1764    1   DCL B$DS5$ PTR SYMREF;                  /* COMMANDS                           */
       78     1765    1   DCL B$REAL$ PTR SYMREF;                 /* LOW REAL                           */
       79     1766        %NI$PARTITION (NAME=IT_PARTITION,STCLASS=SYMREF);
       80     1774        /**/
       81     1775        %INCLUDE NI_DATA_C;
       82     1888        %INCLUDE FR_DATA_R;
       83     1920        %INCLUDE HF_DATA_R;
       84     1963        %INCLUDE IT_IDATA_R;
       85     2080        /**/
       86     2081        %EJECT;
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:4    
       87     2082        /*D*     NAME:     ITA$AP
       88     2083                 PURPOSE:  To build the I/O system tables for the array processor
       89     2084                           devices.
       90     2085                 INPUT:    PTR$ - parameter - pointer to next available location
       91     2086                           in TIGR table area.
       92     2087                           Command table - Built in DS5 by ITC$CHECK_AP
       93     2088        *
       94     2089                 OUTPUT:   Initialized tables
       95     2090        *
       96     2091                 DESCRIPTION:  ITA$AP first initializes the SQH for this AP
       97     2092                           subsystem and builds the DCT entry for the APC. Then
       98     2093                           the DQH tables are built and the channel tables
       99     2094                           (NI$CHT) pointed to them and a DCT entry made for every
      100     2095                           device.                       */
      101     2096        /**/
      102     2097    1           CMD$ = B$DS5$;
      103     2098    1           CMD$ = PINCRW ( CMD$,SIZEW(IT$CMDWD));
      104     2099        /**/
      105     2100    1           CALL ITH$SQH_INIT(PTR$,SQH$) ALTRET(ITA$AP_ERR);
      106     2101        /**/
      107     2102    1           CHX = 0;
      108     2103    2           DO J = CMD$->IT$APC.LO_CHAN TO CMD$->IT$APC.HI_CHAN;
      109     2104
      110     2105    2              DQH$ = PTR$;
      111     2106    2              CALL ITH$ALLOCATE(PTR$,SIZEW(NI$DQH)) ALTRET(ITA$AP_ERR);
      112     2107
      113     2108    2              CHTX = (CMD$ -> IT$APDEV.IOM# * %N_MAXCHANS) + J;
      114     2109
      115     2110    3              IF (NI$CHT$ -> NI$CHT.DQH$(CHTX) ~= ADDR(NIL)) THEN DO;
      116     2111    3                 DUPCHANERR_TEXT.COUNT = SIZEC(DUPCHANERR_TEXT) - 1;
      117     2112    3                 DUPCHANERR_TEXT.CHANNEL = 'CHANNEL ';
      118     2113    3                 CALL BINCHAR(DUPCHANERR_TEXT.IOMTEXT,CMD$ -> IT$APDEV.IOM#);
      119     2114    3                 DUPCHANERR_TEXT.DASH = '-';
      120     2115    3                 CALL BINCHAR(DUPCHANERR_TEXT.CHANTEXT,J);
      121     2116    3                 CALL ITE$ERROR(%E$DUPCHAN,ADDR(DUPCHANERR_TEXT));
      122     2117    3                 END;
      123     2118
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:5    
      124     2119    2              NI$CHT$ -> NI$CHT.DQH$(CHTX) = DQH$;
      125     2120
      126     2121    2              DQH$ -> NI$DQH = NI$DQH_C;   /* SET UP DQH FOR THIS CHANNEL        */
      127     2122
      128     2123        /*         DQH$ -> NI$DQH.FL$ = ADDR(NIL);                                    */
      129     2124    2              DQH$ -> NI$DQH.IOCHANX = CHTX;
      130     2125    2              DQH$ -> NI$DQH.SQH$ = SQH$;
      131     2126        /*         DQH$ -> NI$DQH.IO$ = ADDR(NIL);                                    */
      132     2127    2              DQH$ -> NI$DQH.MPC$ = APC$;
      133     2128    3             IF HW_IMX THEN DO;
      134     2129        /*           DQH$ -> NI$DQH.MBX$ = ADDR(NIL);                                 */
      135     2130        /*           DQH$ -> NI$DQH.IOSTATUS$ = ADDR(NIL);                            */
      136     2131    3                END;
      137     2132    3             ELSE DO;
      138     2133    3                DQH$ -> NI$DQH.MBX$ = PINCRW (NI$IOM$(CMD$->IT$APDEV.IOM#) -> NI$IOM.
              2133                         MBX$,
      139     2134    3                  SIZEW(NI$MBX(0)) * J);
      140     2135    3                DQH$ -> NI$DQH.IOSTATUS$ = NI$FQ$ -> NI$FQ.HD$;
              2135                         /* STATUS IN LOW REAL MEM */
      141     2136    4                IF HW_IOP THEN DO;
              2136                         /* anyone that puts an FPS0164 on a DPS90 should be shot */
      142     2137    4                   DQH$ -> NI$DQH.IOSTATUS$ -> NI$IOSTAT.AESDCW = %IOP_AESDCW_INIT;
      143     2138    4                   DQH$ -> NI$DQH.IOSTATUS$ -> NI$IOSTAT.AESDCW.ADDRESS =
      144     2139    4                     POFFW (ADDR (DQH$ -> NI$DQH.IOSTATUS$ -> NI$IOSTAT.EXTST),B$REAL$)
              2139                              ;
      145     2140    4                   END;
      146     2141    3                NI$FQ$ -> NI$FQ.HD$ = PINCRW(NI$FQ$ -> NI$FQ.HD$,SIZEW(NI$IOSTAT));
      147     2142    3                END;
      148     2143    2              END;
      149     2144
      150     2145                /* BUILD APC DCT */
      151     2146    1           CALL ITH$DCT_INIT(PTR$,DEV$) ALTRET(ITA$AP_ERR);
      152     2147        /**/
      153     2148    1           SQH$ -> NI$SQH.NDCT = SQH$ -> NI$SQH.NDCT + 1;
      154     2149    1           SQH$ -> NI$SQH.MPC$(0) = DEV$;
      155     2150    1           APC$=DEV$;
      156     2151    1           APCX=N_DCTXMAX;
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:6    
      157     2152    1           CHTX = CMD$->IT$APC.IOM#*%N_MAXCHANS + CMD$ -> IT$APC.LO_CHAN;
      158     2153        /**/
      159     2154    1           DEV$ -> NI$DCT.MPC.FW$ = ADDR(NIL);
      160     2155    1           DEV$ -> NI$DCT.DEVNM = CMD$ -> IT$APC.APCNAME;
      161     2156    1           DEV$ -> NI$DCT.CTYP = %C_APC;
      162     2157    1           DEV$ -> NI$DCT.DVT$ = NI$DVT$(CMD$ -> IT$APC.APCTYPE);
      163     2158    1           DEV$ -> NI$DCT.MPC.FWNAME = DEV$ -> NI$DCT.DVT$ -> NI$DVT.MPC.FWNAME;
      164     2159    1           DEV$ -> NI$DCT.MODX = CMD$ -> IT$APC.MODX;
      165     2160    1           DEV$ -> NI$DCT.FX = CMD$ -> IT$APC.FX;
      166     2161    1           DEV$ -> NI$DCT.TYPE = %DV_MPC;
      167     2162    1           DEV$ -> NI$DCT.SQH$ = SQH$;
      168     2163    1           DEV$ -> NI$DCT.DQH$ = NI$CHT.DQH$(CHTX);
      169     2164    1           DEV$ -> NI$DCT.DQH$ -> NI$DQH.MPC$ = DEV$;
      170     2165    1           DEV$ -> NI$DCT.MPC.IOCHANX(CHX) = CHTX;
      171     2166    1           CHX = CHX + 1;
      172     2167    1           DEV$ -> NI$DCT.AP.CDCTX = APCX;
      173     2168    1           DEV$ -> NI$DCT.DFLG.INPUT = YES;
      174     2169    1           DEV$ -> NI$DCT.DFLG.OUTPUT = YES;
      175     2170    1           DEV$ -> NI$DCT.DFLG.PSIA = YES;
      176     2171    1           DEV$->NI$DCT.MPC.TYPE=%DV_AP;
      177     2172    1           IT_PARTITION.DEVICE(N_DCTXMAX) = CMD$ -> IT$APC.FLAGS.DOWN;
      178     2173    1           IT_PARTITION.IOCHAN(CHTX) = CMD$ -> IT$APC.FLAGS.DOWN;
      179     2174    1           NI$CHT$ -> NI$CHT.POSTER(CHTX) = DEV$ -> NI$DCT.DVT$ -> NI$DVT.POSTER;
      180     2175
      181     2176    1           APC$ = DEV$;
      182     2177    1           APCX=N_DCTXMAX;
      183     2178
      184     2179    1           CMD$ = PINCRW(CMD$,SIZEW(IT$APC));
      185     2180
      186     2181
      187     2182    2           DO WHILE(CMD$->IT$APDEV.CNTWD.TYPE ~= %ITS_ENDCMD);
      188     2183    2              SQH$ -> NI$SQH.NDCT = SQH$ -> NI$SQH.NDCT + 1;
      189     2184
      190     2185
      191     2186                   /* BUILD DCT ENTRY FOR DEVICE */
      192     2187    2              CALL ITH$DCT_INIT(PTR$,DEV$) ALTRET(ITA$AP_ERR);
      193     2188    2              CHTX = CMD$->IT$APDEV.IOM#*%N_MAXCHANS + CMD$->IT$APDEV.CHAN;
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:7    
      194     2189        /**/
      195     2190    2              DEV$ -> NI$DCT.DEVNM = CMD$ -> IT$APDEV.NAME;
      196     2191    2              DEV$ -> NI$DCT.DVT$ = NI$DVT$(CMD$ -> IT$APDEV.TYPE);
      197     2192    2              DEV$ -> NI$DCT.TYPE = DEV$ -> NI$DCT.DVT$ -> NI$DVT.TYPE;
      198     2193    2              DEV$ -> NI$DCT.MODX = CMD$ -> IT$APDEV.MODX;
      199     2194    2              DEV$ -> NI$DCT.FX = CMD$ -> IT$APDEV.FX;
      200     2195    2              DEV$ -> NI$DCT.DVN = 1;      /* DEVICE NUMBER ALWAYS ONE           */
      201     2196    2              DEV$ -> NI$DCT.SQH$ = SQH$;
      202     2197    2              DEV$ -> NI$DCT.DQH$ = NI$CHT.DQH$(CHTX);
      203     2198    2              DEV$ -> NI$DCT.AP.CHAN = CHX;
      204     2199    2              APC$ -> NI$DCT.MPC.IOCHANX(CHX) = CHTX;
      205     2200    2              CHX = CHX + 1;
      206     2201    2              DEV$ -> NI$DCT.DQH$ -> NI$DQH.MPC$ = APC$;
      207     2202    2              DEV$ -> NI$DCT.AP.CDCTX = APCX;
      208     2203    2              DEV$ -> NI$DCT.DFLG.PSIA = '1'B;
      209     2204    2              DEV$ -> NI$DCT.CTYP = APC$ -> NI$DCT.CTYP;
      210     2205        /**/
      211     2206    2              IT_PARTITION.DEVICE(N_DCTXMAX) = CMD$ -> IT$APDEV.FLAGS.DOWN;
      212     2207    2              IT_PARTITION.IOCHAN(CHTX) = CMD$ -> IT$APDEV.FLAGS.DOWN;
      213     2208    2              NI$CHT$ -> NI$CHT.POSTER(CHTX) = DEV$ -> NI$DCT.DVT$ -> NI$DVT.POSTER;
      214     2209        /**/
      215     2210        /**/
      216     2211        /**/
      217     2212    2              CALL ITH$RAT_INIT(PTR$,RAT$) ALTRET(ITA$AP_ERR);
      218     2213    2              DEV$ -> NI$DCT.RAT$ = RAT$;
      219     2214    2              RAT$ -> FR$RAT.M1 = CMD$ -> IT$APDEV.ATTR;
      220     2215    2              RAT$ -> FR$RAT.TYP = 'AP';
      221     2216        /**/
      222     2217    2              RAT$ = ADDR(FR$HD$(FR_NPOOL));
      223     2218    2              IF (RAT$ -> IT$PTR = ADDR(NIL)) THEN
      224     2219    2                 RAT$ -> IT$PTR = DEV$ -> NI$DCT.RAT$;
      225     2220    3              ELSE DO;
      226     2221    3                 RAT$ = FR$HD$(FR_NPOOL);
      227     2222    4                 DO WHILE (RAT$ -> FR$RAT.LNK$ ~= ADDR(NIL));
      228     2223    4                    RAT$ = RAT$ -> FR$RAT.LNK$;
      229     2224    4                    END;
      230     2225    3                 RAT$ -> FR$RAT.LNK$ = DEV$ -> NI$DCT.RAT$;
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:8    
      231     2226    3                 END;
      232     2227        /**/
      233     2228    2              FR_PRM$(0) -> FR$PR(FR_NPOOL) = FR_PRM$(0) -> FR$PR(FR_NPOOL) + 1;
      234     2229        /**/
      235     2230    2              CMD$ = PINCRW(CMD$,CMD$ -> IT$APDEV.CNTWD.OFFSET);
      236     2231    2              END;
      237     2232        /**/
      238     2233    1           RETURN;
      239     2234    1   ITA$AP_ERR:
      240     2235    1           ALTRETURN;
      241     2236    1   END;

PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:9    
--  Include file information  --

   IT_IDATA_R.:E05TOU  cannot be made into a system file and is referenced.
   HF_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   FR_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   NI_DATA_C.:E05TOU  is referenced.
   FR_SUBS.:E05TOU  is referenced.
   FR$RAT.:E05TOU  is referenced.
   NK_SUBS.:E05TOU  is referenced.
   IT$APC.:E05TOU  cannot be made into a system file and is referenced.
   IT$CMDWD.:E05TOU  cannot be made into a system file and is referenced.
   IT$APDEV.:E05TOU  cannot be made into a system file and is referenced.
   IT_SUBS_C.:E05TOU  is referenced.
   IT_ERROR_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
      No diagnostics issued in procedure ITA$AP.

   Procedure ITA$AP requires 386 words for executable code.
   Procedure ITA$AP requires 24 words of local(AUTO) storage.

    No errors detected in file ITA$AP.:E05TSI    .

PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:10   

 Object Unit name= ITA$AP                                     File name= ITA$AP.:E05TOU
 UTS= JUL 29 '97 22:58:23.68 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  RoData even  UTS      3      3  ITA$AP
    1   Proc  even  none   386    602  ITA$AP
    2  RoData even  none     8     10  ITA$AP

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes    yes     yes      Std        1  ITA$AP

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       2 ITH$SQH_INIT
 yes     yes           Std       2 ITH$ALLOCATE
         yes           Std       2 ITE$ERROR
 yes     yes           Std       2 ITH$RAT_INIT
 yes     yes           Std       2 ITH$DCT_INIT
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AUTO_1
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:11   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     N$DCT$$                               N$FQ$                                 NI$CHT$
     NI$DVT$                               NI$FQ$                                NI$IBUF$
     NI$IOM$                               NI$RP$                                N_DCTXMAX
     B$DS5$                                B$REAL$                               IT_PARTITION
     FR$HD$                                FR_PRM$                               HW_IOP
     HW_IMX                                NI$DQH_C                              B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:12   


        1        1        /*M*     Allocate TIGR built array processor tables */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*/
        8        8        /**/
        9        9        /*P*     NAME:     ITA$AP
       10       10                 PURPOSE:  ITA$AP builds the tables for the array processors */
       11       11        /**/
       12       12        ITA$AP: PROC (PTR$)  ALTRET;

     12  1 000000   000000 700200 xent  ITA$AP       TSX0  ! X66_AUTO_1
         1 000001   000030 000001                    ZERO    24,1

       13       13        /**/
       14       14        /*  PARAMETER  */
       15       15    1   DCL PTR$ PTR;                           /* PTR TO TIGR TABLE SPACE            */
       16       16        /**/
       17       17        /*  INCLUDE FILES */
       18       18        %INCLUDE CP_6_SUBS;
       19      558        %INCLUDE NI_DATA_R;
       20      995        %INCLUDE IT_ERROR_C;
       21     1078        %INCLUDE IT_SUBS_C;
       22     1345        %INCLUDE IT$APDEV;
       23     1374        %INCLUDE IT$CMDWD;
       24     1382        %INCLUDE IT$APC;
       25     1411        %INCLUDE NK_SUBS;
       26     1436        %INCLUDE FR$RAT;
       27     1489        %FR$RAT;
       28     1529        %INCLUDE FR_SUBS;
       29     1597        %SUB YES = '1'B/*YES*/;
       30     1598        %SUB NO = '0'B/*NO*/;
       31     1599        /**/
       32     1600        /*  AUTOMATIC  */
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:13   
       33     1601    1   DCL CMD$ PTR;
       34     1602    1   DCL SQH$ PTR;
       35     1603    1   DCL DQH$ PTR;
       36     1604    1   DCL DEV$ PTR;
       37     1605    1   DCL RAT$ PTR;
       38     1606    1   DCL APC$ PTR;
       39     1607    1   DCL CHTX UBIN(36);
       40     1608    1   DCL CHX UBIN;
       41     1609    1   DCL I UBIN WORD;
       42     1610    1   DCL J UBIN(36);
       43     1611    1   DCL 1 DUPCHANERR_TEXT,
       44     1612    1         2 COUNT UBIN(9) UNAL,
       45     1613    1         2 CHANNEL CHAR(8) UNAL,
       46     1614    1         2 IOMTEXT CHAR(1) UNAL,
       47     1615    1         2 DASH CHAR(1) UNAL,
       48     1616    1         2 CHANTEXT CHAR(2) UNAL;
       49     1617        /**/
       50     1618    1   DCL APCX UBIN;
       51     1619        /**/
       52     1620        /*  BASED  */
       53     1621        /**/
       54     1622    1   DCL IT$WORD(0:0) UBIN WORD BASED ALIGNED;
       55     1623        /**/
       56     1624        %NI$SQH;
       57     1637        %NI$CHT;
       58     1640        %NI$DQH;
       59     1663        %NI$DCT;
       60     1711        %NI$DVT;
       61     1718        %NI$IOSTAT;
       62     1727        %NI$IOM;
       63     1732        %NI$MBX;
       64     1751        /**/
       65     1752    1   DCL IT$PTR PTR BASED ALIGNED;
       66     1753        /**/
       67     1754        /*  ENTRY DECLARES */
       68     1755        /**/
       69     1756    1   DCL ITE$ERROR ENTRY(2);
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:14   
       70     1757    1   DCL ITH$ALLOCATE ENTRY(2) ALTRET;
       71     1758    1   DCL ITH$SQH_INIT ENTRY(2) ALTRET;
       72     1759    1   DCL ITH$RAT_INIT ENTRY(2) ALTRET;
       73     1760    1   DCL ITH$DCT_INIT ENTRY(2) ALTRET;
       74     1761        /**/
       75     1762        /*  SYMREFS  */
       76     1763        /**/
       77     1764    1   DCL B$DS5$ PTR SYMREF;                  /* COMMANDS                           */
       78     1765    1   DCL B$REAL$ PTR SYMREF;                 /* LOW REAL                           */
       79     1766        %NI$PARTITION (NAME=IT_PARTITION,STCLASS=SYMREF);
       80     1774        /**/
       81     1775        %INCLUDE NI_DATA_C;
       82     1888        %INCLUDE FR_DATA_R;
       83     1920        %INCLUDE HF_DATA_R;
       84     1963        %INCLUDE IT_IDATA_R;
       85     2080        /**/
       86     2081        %EJECT;
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:15   
       87     2082        /*D*     NAME:     ITA$AP
       88     2083                 PURPOSE:  To build the I/O system tables for the array processor
       89     2084                           devices.
       90     2085                 INPUT:    PTR$ - parameter - pointer to next available location
       91     2086                           in TIGR table area.
       92     2087                           Command table - Built in DS5 by ITC$CHECK_AP
       93     2088        *
       94     2089                 OUTPUT:   Initialized tables
       95     2090        *
       96     2091                 DESCRIPTION:  ITA$AP first initializes the SQH for this AP
       97     2092                           subsystem and builds the DCT entry for the APC. Then
       98     2093                           the DQH tables are built and the channel tables
       99     2094                           (NI$CHT) pointed to them and a DCT entry made for every
      100     2095                           device.                       */
      101     2096        /**/
      102     2097    1           CMD$ = B$DS5$;

   2097  1 000002   000000 236000 xsym               LDQ     B$DS5$
         1 000003   200004 756100                    STQ     CMD$,,AUTO

      103     2098    1           CMD$ = PINCRW ( CMD$,SIZEW(IT$CMDWD));

   2098  1 000004   000001 036003                    ADLQ    1,DU
         1 000005   200004 756100                    STQ     CMD$,,AUTO

      104     2099        /**/
      105     2100    1           CALL ITH$SQH_INIT(PTR$,SQH$) ALTRET(ITA$AP_ERR);

   2100  1 000006   200005 630500                    EPPR0   SQH$,,AUTO
         1 000007   200025 450500                    STP0    APCX+3,,AUTO
         1 000010   200003 236100                    LDQ     @PTR$,,AUTO
         1 000011   200024 756100                    STQ     APCX+2,,AUTO
         1 000012   200024 630500                    EPPR0   APCX+2,,AUTO
         1 000013   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000014   000000 701000 xent               TSX1    ITH$SQH_INIT
         1 000015   000601 702000 1                  TSX2    ITA$AP_ERR

PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:16   
      106     2101        /**/
      107     2102    1           CHX = 0;

   2102  1 000016   200013 450100                    STZ     CHX,,AUTO

      108     2103    2           DO J = CMD$->IT$APC.LO_CHAN TO CMD$->IT$APC.HI_CHAN;

   2103  1 000017   200004 470500                    LDP0    CMD$,,AUTO
         1 000020   000006 236100                    LDQ     6,,PR0
         1 000021   777777 376007                    ANQ     -1,DL
         1 000022   200015 756100                    STQ     J,,AUTO
         1 000023   000170 710000 1                  TRA     s:2143+3

      109     2104
      110     2105    2              DQH$ = PTR$;

   2105  1 000024   200003 470500                    LDP0    @PTR$,,AUTO
         1 000025   000000 236100                    LDQ     0,,PR0
         1 000026   200006 756100                    STQ     DQH$,,AUTO

      111     2106    2              CALL ITH$ALLOCATE(PTR$,SIZEW(NI$DQH)) ALTRET(ITA$AP_ERR);

   2106  1 000027   000001 236000 2                  LDQ     1
         1 000030   200003 235100                    LDA     @PTR$,,AUTO
         1 000031   200024 757100                    STAQ    APCX+2,,AUTO
         1 000032   200024 630500                    EPPR0   APCX+2,,AUTO
         1 000033   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000034   000000 701000 xent               TSX1    ITH$ALLOCATE
         1 000035   000601 702000 1                  TSX2    ITA$AP_ERR

      112     2107
      113     2108    2              CHTX = (CMD$ -> IT$APDEV.IOM# * %N_MAXCHANS) + J;

   2108  1 000036   200004 470500                    LDP0    CMD$,,AUTO
         1 000037   000006 236100                    LDQ     6,,PR0
         1 000040   000013 732000                    QRS     11
         1 000041   000002 376000 2                  ANQ     2
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:17   
         1 000042   200015 036100                    ADLQ    J,,AUTO
         1 000043   200012 756100                    STQ     CHTX,,AUTO

      114     2109
      115     2110    3              IF (NI$CHT$ -> NI$CHT.DQH$(CHTX) ~= ADDR(NIL)) THEN DO;

   2110  1 000044   200012 235100                    LDA     CHTX,,AUTO
         1 000045   000001 735000                    ALS     1
         1 000046   000000 471400 xsym               LDP1    NI$CHT$
         1 000047   100000 236105                    LDQ     0,AL,PR1
         1 000050   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000051   000104 600000 1                  TZE     s:2119

      116     2111    3                 DUPCHANERR_TEXT.COUNT = SIZEC(DUPCHANERR_TEXT) - 1;

   2111  1 000052   014000 236003                    LDQ     6144,DU
         1 000053   200016 552140                    STBQ    DUPCHANERR_TEXT,'40'O,AUTO

      117     2112    3                 DUPCHANERR_TEXT.CHANNEL = 'CHANNEL ';

   2112  1 000054   040100 100400                    MLR     fill='040'O
         1 000055   000000 000010 0                  ADSC9   0                        cn=0,n=8
         1 000056   200016 200010                    ADSC9   DUPCHANERR_TEXT,,AUTO    cn=1,n=8

      118     2113    3                 CALL BINCHAR(DUPCHANERR_TEXT.IOMTEXT,CMD$ -> IT$APDEV.IOM#);

   2113  1 000057   000100 301500                    BTD
         1 000060   000006 000002                    NDSC9   6,,PR0                   cn=0,s=lsgnf,sf=0,n=2
         1 000061   200020 230001                    NDSC9   DUPCHANERR_TEXT+2,,AUTO  cn=1,s=nosgn,sf=0,n=1

      119     2114    3                 DUPCHANERR_TEXT.DASH = '-';

   2114  1 000062   055000 236007                    LDQ     23040,DL
         1 000063   200020 552110                    STBQ    DUPCHANERR_TEXT+2,'10'O,AUTO

      120     2115    3                 CALL BINCHAR(DUPCHANERR_TEXT.CHANTEXT,J);

PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:18   
   2115  1 000064   200015 235100                    LDA     J,,AUTO
         1 000065   000044 773000                    LRL     36
         1 000066   200024 757100                    STAQ    APCX+2,,AUTO
         1 000067   000100 301500                    BTD
         1 000070   200024 000010                    NDSC9   APCX+2,,AUTO             cn=0,s=lsgnf,sf=0,n=8
         1 000071   200020 630002                    NDSC9   DUPCHANERR_TEXT+2,,AUTO  cn=3,s=nosgn,sf=0,n=2

      121     2116    3                 CALL ITE$ERROR(%E$DUPCHAN,ADDR(DUPCHANERR_TEXT));

   2116  1 000072   200016 633500                    EPPR3   DUPCHANERR_TEXT,,AUTO
         1 000073   200024 453500                    STP3    APCX+2,,AUTO
         1 000074   200024 634500                    EPPR4   APCX+2,,AUTO
         1 000075   200027 454500                    STP4    APCX+5,,AUTO
         1 000076   000004 236000 2                  LDQ     4
         1 000077   200026 756100                    STQ     APCX+4,,AUTO
         1 000100   200026 630500                    EPPR0   APCX+4,,AUTO
         1 000101   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000102   000000 701000 xent               TSX1    ITE$ERROR
         1 000103   000000 011000                    NOP     0

      122     2117    3                 END;

      123     2118
      124     2119    2              NI$CHT$ -> NI$CHT.DQH$(CHTX) = DQH$;

   2119  1 000104   200012 235100                    LDA     CHTX,,AUTO
         1 000105   000001 735000                    ALS     1
         1 000106   200006 236100                    LDQ     DQH$,,AUTO
         1 000107   000000 470400 xsym               LDP0    NI$CHT$
         1 000110   000000 756105                    STQ     0,AL,PR0

      125     2120
      126     2121    2              DQH$ -> NI$DQH = NI$DQH_C;   /* SET UP DQH FOR THIS CHANNEL        */

   2121  1 000111   200006 470500                    LDP0    DQH$,,AUTO
         1 000112   000100 100400                    MLR     fill='000'O
         1 000113   000000 000110 xsym               ADSC9   NI$DQH_C                 cn=0,n=72
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:19   
         1 000114   000000 000110                    ADSC9   0,,PR0                   cn=0,n=72

      127     2122
      128     2123        /*         DQH$ -> NI$DQH.FL$ = ADDR(NIL);                                    */
      129     2124    2              DQH$ -> NI$DQH.IOCHANX = CHTX;

   2124  1 000115   200012 236100                    LDQ     CHTX,,AUTO
         1 000116   000022 736000                    QLS     18
         1 000117   000001 552120                    STBQ    1,'20'O,PR0

      130     2125    2              DQH$ -> NI$DQH.SQH$ = SQH$;

   2125  1 000120   200005 236100                    LDQ     SQH$,,AUTO
         1 000121   000013 756100                    STQ     11,,PR0

      131     2126        /*         DQH$ -> NI$DQH.IO$ = ADDR(NIL);                                    */
      132     2127    2              DQH$ -> NI$DQH.MPC$ = APC$;

   2127  1 000122   200011 236100                    LDQ     APC$,,AUTO
         1 000123   000015 756100                    STQ     13,,PR0

      133     2128    3             IF HW_IMX THEN DO;

   2128  1 000124   000000 234000 xsym               SZN     HW_IMX
         1 000125   000127 605000 1                  TPL     s:2133

      134     2129        /*           DQH$ -> NI$DQH.MBX$ = ADDR(NIL);                                 */
      135     2130        /*           DQH$ -> NI$DQH.IOSTATUS$ = ADDR(NIL);                            */
      136     2131    3                END;

   2131  1 000126   000165 710000 1                  TRA     s:2143

      137     2132    3             ELSE DO;

      138     2133    3                DQH$ -> NI$DQH.MBX$ = PINCRW (NI$IOM$(CMD$->IT$APDEV.IOM#) -> NI$IOM.
              2133                         MBX$,

PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:20   
   2133  1 000127   200004 471500                    LDP1    CMD$,,AUTO
         1 000130   100006 220100                    LDX0    6,,PR1
         1 000131   000000 473410 xsym               LDP3    NI$IOM$,X0
         1 000132   300002 474500                    LDP4    2,,PR3
         1 000133   200015 235100                    LDA     J,,AUTO
         1 000134   000002 735000                    ALS     2
         1 000135   400000 633505                    EPPR3   0,AL,PR4
         1 000136   000021 453500                    STP3    17,,PR0

      139     2134    3                  SIZEW(NI$MBX(0)) * J);
      140     2135    3                DQH$ -> NI$DQH.IOSTATUS$ = NI$FQ$ -> NI$FQ.HD$;
              2135                         /* STATUS IN LOW REAL MEM */

   2135  1 000137   000000 474400 xsym               LDP4    NI$FQ$
         1 000140   400002 236100                    LDQ     2,,PR4
         1 000141   000016 756100                    STQ     14,,PR0

      141     2136    4                IF HW_IOP THEN DO;
              2136                         /* anyone that puts an FPS0164 on a DPS90 should be shot */

   2136  1 000142   000000 234000 xsym               SZN     HW_IOP
         1 000143   000162 605000 1                  TPL     s:2141

      142     2137    4                   DQH$ -> NI$DQH.IOSTATUS$ -> NI$IOSTAT.AESDCW = %IOP_AESDCW_INIT;

   2137  1 000144   000016 475500                    LDP5    14,,PR0
         1 000145   000012 236000 xsym               LDQ     B_VECTNIL+10
         1 000146   500004 756100                    STQ     4,,PR5

      143     2138    4                   DQH$ -> NI$DQH.IOSTATUS$ -> NI$IOSTAT.AESDCW.ADDRESS =

   2138  1 000147   000016 473500                    LDP3    14,,PR0
         1 000150   200024 453500                    STP3    APCX+2,,AUTO
         1 000151   200024 236100                    LDQ     APCX+2,,AUTO
         1 000152   000010 036003                    ADLQ    8,DU
         1 000153   000022 772000                    QRL     18
         1 000154   000000 235000 xsym               LDA     B$REAL$
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:21   
         1 000155   000022 771000                    ARL     18
         1 000156   200025 755100                    STA     APCX+3,,AUTO
         1 000157   200025 136100                    SBLQ    APCX+3,,AUTO
         1 000160   000000 620006                    EAX0    0,QL
         1 000161   300004 740100                    STX0    4,,PR3

      144     2139    4                    POFFW (ADDR (DQH$ -> NI$DQH.IOSTATUS$ -> NI$IOSTAT.EXTST),B$REAL$)
              2139                              ;
      145     2140    4                   END;

      146     2141    3                NI$FQ$ -> NI$FQ.HD$ = PINCRW(NI$FQ$ -> NI$FQ.HD$,SIZEW(NI$IOSTAT));

   2141  1 000162   400002 236100                    LDQ     2,,PR4
         1 000163   000020 036003                    ADLQ    16,DU
         1 000164   400002 756100                    STQ     2,,PR4

      147     2142    3                END;

      148     2143    2              END;

   2143  1 000165   200015 235100                    LDA     J,,AUTO
         1 000166   000001 035007                    ADLA    1,DL
         1 000167   200015 755100                    STA     J,,AUTO
         1 000170   200004 470500                    LDP0    CMD$,,AUTO
         1 000171   000007 236100                    LDQ     7,,PR0
         1 000172   000022 772000                    QRL     18
         1 000173   200015 116100                    CMPQ    J,,AUTO
         1 000174   000024 603000 1                  TRC     s:2105

      149     2144
      150     2145                /* BUILD APC DCT */
      151     2146    1           CALL ITH$DCT_INIT(PTR$,DEV$) ALTRET(ITA$AP_ERR);

   2146  1 000175   200007 631500                    EPPR1   DEV$,,AUTO
         1 000176   200025 451500                    STP1    APCX+3,,AUTO
         1 000177   200003 236100                    LDQ     @PTR$,,AUTO
         1 000200   200024 756100                    STQ     APCX+2,,AUTO
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:22   
         1 000201   200024 630500                    EPPR0   APCX+2,,AUTO
         1 000202   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000203   000000 701000 xent               TSX1    ITH$DCT_INIT
         1 000204   000601 702000 1                  TSX2    ITA$AP_ERR

      152     2147        /**/
      153     2148    1           SQH$ -> NI$SQH.NDCT = SQH$ -> NI$SQH.NDCT + 1;

   2148  1 000205   200005 470500                    LDP0    SQH$,,AUTO
         1 000206   000002 720100                    LXL0    2,,PR0
         1 000207   000001 621010                    EAX1    1,X0
         1 000210   000002 441100                    SXL1    2,,PR0

      154     2149    1           SQH$ -> NI$SQH.MPC$(0) = DEV$;

   2149  1 000211   200007 236100                    LDQ     DEV$,,AUTO
         1 000212   200005 470500                    LDP0    SQH$,,AUTO
         1 000213   000005 756100                    STQ     5,,PR0

      155     2150    1           APC$=DEV$;

   2150  1 000214   200007 236100                    LDQ     DEV$,,AUTO
         1 000215   200011 756100                    STQ     APC$,,AUTO

      156     2151    1           APCX=N_DCTXMAX;

   2151  1 000216   000000 235000 xsym               LDA     N_DCTXMAX
         1 000217   200022 755100                    STA     APCX,,AUTO

      157     2152    1           CHTX = CMD$->IT$APC.IOM#*%N_MAXCHANS + CMD$ -> IT$APC.LO_CHAN;

   2152  1 000220   200004 470500                    LDP0    CMD$,,AUTO
         1 000221   000006 236100                    LDQ     6,,PR0
         1 000222   777777 376007                    ANQ     -1,DL
         1 000223   200024 756100                    STQ     APCX+2,,AUTO
         1 000224   000006 236100                    LDQ     6,,PR0
         1 000225   000013 772000                    QRL     11
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:23   
         1 000226   000005 376000 2                  ANQ     5
         1 000227   200024 036100                    ADLQ    APCX+2,,AUTO
         1 000230   200012 756100                    STQ     CHTX,,AUTO

      158     2153        /**/
      159     2154    1           DEV$ -> NI$DCT.MPC.FW$ = ADDR(NIL);

   2154  1 000231   000001 236000 xsym               LDQ     B_VECTNIL+1
         1 000232   200007 471500                    LDP1    DEV$,,AUTO
         1 000233   100030 756100                    STQ     24,,PR1

      160     2155    1           DEV$ -> NI$DCT.DEVNM = CMD$ -> IT$APC.APCNAME;

   2155  1 000234   040100 100500                    MLR     fill='040'O
         1 000235   000003 000010                    ADSC9   3,,PR0                   cn=0,n=8
         1 000236   100002 000010                    ADSC9   2,,PR1                   cn=0,n=8

      161     2156    1           DEV$ -> NI$DCT.CTYP = %C_APC;

   2156  1 000237   200007 471500                    LDP1    DEV$,,AUTO
         1 000240   100007 236100                    LDQ     7,,PR1
         1 000241   000006 376000 2                  ANQ     6
         1 000242   030000 276003                    ORQ     12288,DU
         1 000243   100007 756100                    STQ     7,,PR1

      162     2157    1           DEV$ -> NI$DCT.DVT$ = NI$DVT$(CMD$ -> IT$APC.APCTYPE);

   2157  1 000244   000001 220100                    LDX0    1,,PR0
         1 000245   000000 236010 xsym               LDQ     NI$DVT$,X0
         1 000246   200007 471500                    LDP1    DEV$,,AUTO
         1 000247   100024 756100                    STQ     20,,PR1

      163     2158    1           DEV$ -> NI$DCT.MPC.FWNAME = DEV$ -> NI$DCT.DVT$ -> NI$DVT.MPC.FWNAME;

   2158  1 000250   100024 473500                    LDP3    20,,PR1
         1 000251   300057 236100                    LDQ     47,,PR3
         1 000252   100041 756100                    STQ     33,,PR1
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:24   

      164     2159    1           DEV$ -> NI$DCT.MODX = CMD$ -> IT$APC.MODX;

   2159  1 000253   000001 236100                    LDQ     1,,PR0
         1 000254   000022 736000                    QLS     18
         1 000255   100007 752110                    STCQ    7,'10'O,PR1

      165     2160    1           DEV$ -> NI$DCT.FX = CMD$ -> IT$APC.FX;

   2160  1 000256   200007 471500                    LDP1    DEV$,,AUTO
         1 000257   000002 236100                    LDQ     2,,PR0
         1 000260   000006 772000                    QRL     6
         1 000261   100007 752104                    STCQ    7,'04'O,PR1

      166     2161    1           DEV$ -> NI$DCT.TYPE = %DV_MPC;

   2161  1 000262   200007 471500                    LDP1    DEV$,,AUTO
         1 000263   000700 236007                    LDQ     448,DL
         1 000264   100007 752102                    STCQ    7,'02'O,PR1

      167     2162    1           DEV$ -> NI$DCT.SQH$ = SQH$;

   2162  1 000265   200005 236100                    LDQ     SQH$,,AUTO
         1 000266   200007 471500                    LDP1    DEV$,,AUTO
         1 000267   100022 756100                    STQ     18,,PR1

      168     2163    1           DEV$ -> NI$DCT.DQH$ = NI$CHT.DQH$(CHTX);

   2163  1 000270   200012 235100                    LDA     CHTX,,AUTO
         1 000271   000001 735000                    ALS     1
         1 000272   000000 473400 xsym               LDP3    NI$CHT$
         1 000273   300000 236105                    LDQ     0,AL,PR3
         1 000274   100023 756100                    STQ     19,,PR1

      169     2164    1           DEV$ -> NI$DCT.DQH$ -> NI$DQH.MPC$ = DEV$;

   2164  1 000275   100023 474500                    LDP4    19,,PR1
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:25   
         1 000276   200007 236100                    LDQ     DEV$,,AUTO
         1 000277   400015 756100                    STQ     13,,PR4

      170     2165    1           DEV$ -> NI$DCT.MPC.IOCHANX(CHX) = CHTX;

   2165  1 000300   200013 235100                    LDA     CHX,,AUTO
         1 000301   000105 101500                    MRL     fill='000'O
         1 000302   200012 000004                    ADSC9   CHTX,,AUTO               cn=0,n=4
         1 000303   100031 000001                    ADSC9   25,A,PR1                 cn=0,n=1

      171     2166    1           CHX = CHX + 1;

   2166  1 000304   000001 035007                    ADLA    1,DL
         1 000305   200013 755100                    STA     CHX,,AUTO

      172     2167    1           DEV$ -> NI$DCT.AP.CDCTX = APCX;

   2167  1 000306   200007 471500                    LDP1    DEV$,,AUTO
         1 000307   200022 236100                    LDQ     APCX,,AUTO
         1 000310   100036 756100                    STQ     30,,PR1

      173     2168    1           DEV$ -> NI$DCT.DFLG.INPUT = YES;

   2168  1 000311   400000 236007                    LDQ     -131072,DL
         1 000312   100006 256100                    ORSQ    6,,PR1

      174     2169    1           DEV$ -> NI$DCT.DFLG.OUTPUT = YES;

   2169  1 000313   200007 471500                    LDP1    DEV$,,AUTO
         1 000314   200000 236007                    LDQ     65536,DL
         1 000315   100006 256100                    ORSQ    6,,PR1

      175     2170    1           DEV$ -> NI$DCT.DFLG.PSIA = YES;

   2170  1 000316   200007 471500                    LDP1    DEV$,,AUTO
         1 000317   010000 236007                    LDQ     4096,DL
         1 000320   100006 256100                    ORSQ    6,,PR1
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:26   

      176     2171    1           DEV$->NI$DCT.MPC.TYPE=%DV_AP;

   2171  1 000321   200007 471500                    LDP1    DEV$,,AUTO
         1 000322   010000 236003                    LDQ     4096,DU
         1 000323   100035 552140                    STBQ    29,'40'O,PR1

      177     2172    1           IT_PARTITION.DEVICE(N_DCTXMAX) = CMD$ -> IT$APC.FLAGS.DOWN;

   2172  1 000324   000000 235000 xsym               LDA     N_DCTXMAX
         1 000325   000327 605000 1                  TPL     s:2172+3
         1 000326   000044 035003                    ADLA    36,DU
         1 000327   003005 060500                    CSL     bolr='003'O
         1 000330   000005 000001                    BDSC    5,,PR0                   by=0,bit=0,n=1
         1 000331   000000 000001 xsym               BDSC    IT_PARTITION,A           by=0,bit=0,n=1

      178     2173    1           IT_PARTITION.IOCHAN(CHTX) = CMD$ -> IT$APC.FLAGS.DOWN;

   2173  1 000332   200012 235100                    LDA     CHTX,,AUTO
         1 000333   003005 060500                    CSL     bolr='003'O
         1 000334   000005 000001                    BDSC    5,,PR0                   by=0,bit=0,n=1
         1 000335   000012 000001 xsym               BDSC    IT_PARTITION+10,A        by=0,bit=0,n=1

      179     2174    1           NI$CHT$ -> NI$CHT.POSTER(CHTX) = DEV$ -> NI$DCT.DVT$ -> NI$DVT.POSTER;

   2174  1 000336   000001 735000                    ALS     1
         1 000337   100024 473500                    LDP3    20,,PR1
         1 000340   300001 236100                    LDQ     1,,PR3
         1 000341   000000 474400 xsym               LDP4    NI$CHT$
         1 000342   400001 756105                    STQ     1,AL,PR4

      180     2175
      181     2176    1           APC$ = DEV$;

   2176  1 000343   200007 236100                    LDQ     DEV$,,AUTO
         1 000344   200011 756100                    STQ     APC$,,AUTO

PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:27   
      182     2177    1           APCX=N_DCTXMAX;

   2177  1 000345   000000 235000 xsym               LDA     N_DCTXMAX
         1 000346   200022 755100                    STA     APCX,,AUTO

      183     2178
      184     2179    1           CMD$ = PINCRW(CMD$,SIZEW(IT$APC));

   2179  1 000347   200004 236100                    LDQ     CMD$,,AUTO
         1 000350   000010 036003                    ADLQ    8,DU
         1 000351   200004 756100                    STQ     CMD$,,AUTO

      185     2180
      186     2181
      187     2182    2           DO WHILE(CMD$->IT$APDEV.CNTWD.TYPE ~= %ITS_ENDCMD);

   2182  1 000352   200004 470500                    LDP0    CMD$,,AUTO
         1 000353   000000 236100                    LDQ     0,,PR0
         1 000354   000777 376007                    ANQ     511,DL
         1 000355   000145 116007                    CMPQ    101,DL
         1 000356   000600 600000 1                  TZE     s:2233

      188     2183    2              SQH$ -> NI$SQH.NDCT = SQH$ -> NI$SQH.NDCT + 1;

   2183  1 000357   200005 470500                    LDP0    SQH$,,AUTO
         1 000360   000002 720100                    LXL0    2,,PR0
         1 000361   000001 621010                    EAX1    1,X0
         1 000362   000002 441100                    SXL1    2,,PR0

      189     2184
      190     2185
      191     2186                   /* BUILD DCT ENTRY FOR DEVICE */
      192     2187    2              CALL ITH$DCT_INIT(PTR$,DEV$) ALTRET(ITA$AP_ERR);

   2187  1 000363   200007 630500                    EPPR0   DEV$,,AUTO
         1 000364   200025 450500                    STP0    APCX+3,,AUTO
         1 000365   200003 236100                    LDQ     @PTR$,,AUTO
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:28   
         1 000366   200024 756100                    STQ     APCX+2,,AUTO
         1 000367   200024 630500                    EPPR0   APCX+2,,AUTO
         1 000370   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000371   000000 701000 xent               TSX1    ITH$DCT_INIT
         1 000372   000601 702000 1                  TSX2    ITA$AP_ERR

      193     2188    2              CHTX = CMD$->IT$APDEV.IOM#*%N_MAXCHANS + CMD$->IT$APDEV.CHAN;

   2188  1 000373   200004 470500                    LDP0    CMD$,,AUTO
         1 000374   000006 236100                    LDQ     6,,PR0
         1 000375   777777 376007                    ANQ     -1,DL
         1 000376   200024 756100                    STQ     APCX+2,,AUTO
         1 000377   000006 236100                    LDQ     6,,PR0
         1 000400   000013 732000                    QRS     11
         1 000401   000002 376000 2                  ANQ     2
         1 000402   200024 036100                    ADLQ    APCX+2,,AUTO
         1 000403   200012 756100                    STQ     CHTX,,AUTO

      194     2189        /**/
      195     2190    2              DEV$ -> NI$DCT.DEVNM = CMD$ -> IT$APDEV.NAME;

   2190  1 000404   200007 471500                    LDP1    DEV$,,AUTO
         1 000405   040100 100500                    MLR     fill='040'O
         1 000406   000002 000010                    ADSC9   2,,PR0                   cn=0,n=8
         1 000407   100002 000010                    ADSC9   2,,PR1                   cn=0,n=8

      196     2191    2              DEV$ -> NI$DCT.DVT$ = NI$DVT$(CMD$ -> IT$APDEV.TYPE);

   2191  1 000410   000004 236100                    LDQ     4,,PR0
         1 000411   000033 772000                    QRL     27
         1 000412   000000 236006 xsym               LDQ     NI$DVT$,QL
         1 000413   200007 471500                    LDP1    DEV$,,AUTO
         1 000414   100024 756100                    STQ     20,,PR1

      197     2192    2              DEV$ -> NI$DCT.TYPE = DEV$ -> NI$DCT.DVT$ -> NI$DVT.TYPE;

   2192  1 000415   100024 473500                    LDP3    20,,PR1
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:29   
         1 000416   300053 236100                    LDQ     43,,PR3
         1 000417   000025 772000                    QRL     21
         1 000420   100007 752102                    STCQ    7,'02'O,PR1

      198     2193    2              DEV$ -> NI$DCT.MODX = CMD$ -> IT$APDEV.MODX;

   2193  1 000421   200007 471500                    LDP1    DEV$,,AUTO
         1 000422   000004 236100                    LDQ     4,,PR0
         1 000423   100007 752110                    STCQ    7,'10'O,PR1

      199     2194    2              DEV$ -> NI$DCT.FX = CMD$ -> IT$APDEV.FX;

   2194  1 000424   200007 471500                    LDP1    DEV$,,AUTO
         1 000425   000004 236100                    LDQ     4,,PR0
         1 000426   000003 736000                    QLS     3
         1 000427   100007 752104                    STCQ    7,'04'O,PR1

      200     2195    2              DEV$ -> NI$DCT.DVN = 1;      /* DEVICE NUMBER ALWAYS ONE           */

   2195  1 000430   200007 471500                    LDP1    DEV$,,AUTO
         1 000431   000100 236003                    LDQ     64,DU
         1 000432   100007 752120                    STCQ    7,'20'O,PR1

      201     2196    2              DEV$ -> NI$DCT.SQH$ = SQH$;

   2196  1 000433   200005 236100                    LDQ     SQH$,,AUTO
         1 000434   200007 471500                    LDP1    DEV$,,AUTO
         1 000435   100022 756100                    STQ     18,,PR1

      202     2197    2              DEV$ -> NI$DCT.DQH$ = NI$CHT.DQH$(CHTX);

   2197  1 000436   200012 235100                    LDA     CHTX,,AUTO
         1 000437   000001 735000                    ALS     1
         1 000440   000000 473400 xsym               LDP3    NI$CHT$
         1 000441   300000 236105                    LDQ     0,AL,PR3
         1 000442   100023 756100                    STQ     19,,PR1

PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:30   
      203     2198    2              DEV$ -> NI$DCT.AP.CHAN = CHX;

   2198  1 000443   200013 235100                    LDA     CHX,,AUTO
         1 000444   100035 755100                    STA     29,,PR1

      204     2199    2              APC$ -> NI$DCT.MPC.IOCHANX(CHX) = CHTX;

   2199  1 000445   200011 474500                    LDP4    APC$,,AUTO
         1 000446   000105 101500                    MRL     fill='000'O
         1 000447   200012 000004                    ADSC9   CHTX,,AUTO               cn=0,n=4
         1 000450   400031 000001                    ADSC9   25,A,PR4                 cn=0,n=1

      205     2200    2              CHX = CHX + 1;

   2200  1 000451   000001 035007                    ADLA    1,DL
         1 000452   200013 755100                    STA     CHX,,AUTO

      206     2201    2              DEV$ -> NI$DCT.DQH$ -> NI$DQH.MPC$ = APC$;

   2201  1 000453   200007 471500                    LDP1    DEV$,,AUTO
         1 000454   100023 473500                    LDP3    19,,PR1
         1 000455   200011 236100                    LDQ     APC$,,AUTO
         1 000456   300015 756100                    STQ     13,,PR3

      207     2202    2              DEV$ -> NI$DCT.AP.CDCTX = APCX;

   2202  1 000457   200022 235100                    LDA     APCX,,AUTO
         1 000460   100036 755100                    STA     30,,PR1

      208     2203    2              DEV$ -> NI$DCT.DFLG.PSIA = '1'B;

   2203  1 000461   010000 236007                    LDQ     4096,DL
         1 000462   100006 256100                    ORSQ    6,,PR1

      209     2204    2              DEV$ -> NI$DCT.CTYP = APC$ -> NI$DCT.CTYP;

   2204  1 000463   200007 471500                    LDP1    DEV$,,AUTO
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:31   
         1 000464   400007 236100                    LDQ     7,,PR4
         1 000465   100007 676100                    ERQ     7,,PR1
         1 000466   070000 376003                    ANQ     28672,DU
         1 000467   100007 656100                    ERSQ    7,,PR1

      210     2205        /**/
      211     2206    2              IT_PARTITION.DEVICE(N_DCTXMAX) = CMD$ -> IT$APDEV.FLAGS.DOWN;

   2206  1 000470   000000 236000 xsym               LDQ     N_DCTXMAX
         1 000471   000473 605000 1                  TPL     s:2206+3
         1 000472   000044 036003                    ADLQ    36,DU
         1 000473   003006 060500                    CSL     bolr='003'O
         1 000474   000001 000001                    BDSC    1,,PR0                   by=0,bit=0,n=1
         1 000475   000000 000001 xsym               BDSC    IT_PARTITION,Q           by=0,bit=0,n=1

      212     2207    2              IT_PARTITION.IOCHAN(CHTX) = CMD$ -> IT$APDEV.FLAGS.DOWN;

   2207  1 000476   200012 236100                    LDQ     CHTX,,AUTO
         1 000477   003006 060500                    CSL     bolr='003'O
         1 000500   000001 000001                    BDSC    1,,PR0                   by=0,bit=0,n=1
         1 000501   000012 000001 xsym               BDSC    IT_PARTITION+10,Q        by=0,bit=0,n=1

      213     2208    2              NI$CHT$ -> NI$CHT.POSTER(CHTX) = DEV$ -> NI$DCT.DVT$ -> NI$DVT.POSTER;

   2208  1 000502   200012 235100                    LDA     CHTX,,AUTO
         1 000503   000001 735000                    ALS     1
         1 000504   200007 471500                    LDP1    DEV$,,AUTO
         1 000505   100024 473500                    LDP3    20,,PR1
         1 000506   300001 236100                    LDQ     1,,PR3
         1 000507   000000 475400 xsym               LDP5    NI$CHT$
         1 000510   500001 756105                    STQ     1,AL,PR5

      214     2209        /**/
      215     2210        /**/
      216     2211        /**/
      217     2212    2              CALL ITH$RAT_INIT(PTR$,RAT$) ALTRET(ITA$AP_ERR);

PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:32   
   2212  1 000511   200010 631500                    EPPR1   RAT$,,AUTO
         1 000512   200025 451500                    STP1    APCX+3,,AUTO
         1 000513   200003 236100                    LDQ     @PTR$,,AUTO
         1 000514   200024 756100                    STQ     APCX+2,,AUTO
         1 000515   200024 630500                    EPPR0   APCX+2,,AUTO
         1 000516   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000517   000000 701000 xent               TSX1    ITH$RAT_INIT
         1 000520   000601 702000 1                  TSX2    ITA$AP_ERR

      218     2213    2              DEV$ -> NI$DCT.RAT$ = RAT$;

   2213  1 000521   200010 236100                    LDQ     RAT$,,AUTO
         1 000522   200007 470500                    LDP0    DEV$,,AUTO
         1 000523   000005 756100                    STQ     5,,PR0

      219     2214    2              RAT$ -> FR$RAT.M1 = CMD$ -> IT$APDEV.ATTR;

   2214  1 000524   200004 470500                    LDP0    CMD$,,AUTO
         1 000525   000005 220100                    LDX0    5,,PR0
         1 000526   200010 471500                    LDP1    RAT$,,AUTO
         1 000527   100006 740100                    STX0    6,,PR1

      220     2215    2              RAT$ -> FR$RAT.TYP = 'AP';

   2215  1 000530   000002 220000 0                  LDX0    2
         1 000531   200010 471500                    LDP1    RAT$,,AUTO
         1 000532   100010 740100                    STX0    8,,PR1

      221     2216        /**/
      222     2217    2              RAT$ = ADDR(FR$HD$(FR_NPOOL));

   2217  1 000533   000007 236000 2                  LDQ     7
         1 000534   200010 756100                    STQ     RAT$,,AUTO

      223     2218    2              IF (RAT$ -> IT$PTR = ADDR(NIL)) THEN

   2218  1 000535   200010 471500                    LDP1    RAT$,,AUTO
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:33   
         1 000536   100000 236100                    LDQ     0,,PR1
         1 000537   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000540   000545 601000 1                  TNZ     s:2221

      224     2219    2                 RAT$ -> IT$PTR = DEV$ -> NI$DCT.RAT$;

   2219  1 000541   200007 473500                    LDP3    DEV$,,AUTO
         1 000542   300005 236100                    LDQ     5,,PR3
         1 000543   100000 756100                    STQ     0,,PR1
         1 000544   000562 710000 1                  TRA     s:2228

      225     2220    3              ELSE DO;

      226     2221    3                 RAT$ = FR$HD$(FR_NPOOL);

   2221  1 000545   000002 236000 xsym               LDQ     FR$HD$+2
         1 000546   200010 756100                    STQ     RAT$,,AUTO

      227     2222    4                 DO WHILE (RAT$ -> FR$RAT.LNK$ ~= ADDR(NIL));

   2222  1 000547   000553 710000 1                  TRA     s:2224

      228     2223    4                    RAT$ = RAT$ -> FR$RAT.LNK$;

   2223  1 000550   200010 470500                    LDP0    RAT$,,AUTO
         1 000551   000000 236100                    LDQ     0,,PR0
         1 000552   200010 756100                    STQ     RAT$,,AUTO

      229     2224    4                    END;

   2224  1 000553   200010 470500                    LDP0    RAT$,,AUTO
         1 000554   000000 236100                    LDQ     0,,PR0
         1 000555   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000556   000550 601000 1                  TNZ     s:2223

      230     2225    3                 RAT$ -> FR$RAT.LNK$ = DEV$ -> NI$DCT.RAT$;

PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:34   
   2225  1 000557   200007 471500                    LDP1    DEV$,,AUTO
         1 000560   100005 236100                    LDQ     5,,PR1
         1 000561   000000 756100                    STQ     0,,PR0

      231     2226    3                 END;

      232     2227        /**/
      233     2228    2              FR_PRM$(0) -> FR$PR(FR_NPOOL) = FR_PRM$(0) -> FR$PR(FR_NPOOL) + 1;

   2228  1 000562   000000 470400 xsym               LDP0    FR_PRM$
         1 000563   000002 054100                    AOS     2,,PR0

      234     2229        /**/
      235     2230    2              CMD$ = PINCRW(CMD$,CMD$ -> IT$APDEV.CNTWD.OFFSET);

   2230  1 000564   200004 471500                    LDP1    CMD$,,AUTO
         1 000565   100000 236100                    LDQ     0,,PR1
         1 000566   000011 772000                    QRL     9
         1 000567   000777 376007                    ANQ     511,DL
         1 000570   000022 736000                    QLS     18
         1 000571   200004 036100                    ADLQ    CMD$,,AUTO
         1 000572   200004 756100                    STQ     CMD$,,AUTO

      236     2231    2              END;

   2231  1 000573   200004 471500                    LDP1    CMD$,,AUTO
         1 000574   100000 236100                    LDQ     0,,PR1
         1 000575   000777 376007                    ANQ     511,DL
         1 000576   000145 116007                    CMPQ    101,DL
         1 000577   000357 601000 1                  TNZ     s:2183

      237     2232        /**/
      238     2233    1           RETURN;

   2233  1 000600   000000 702200 xent               TSX2  ! X66_ARET

      239     2234    1   ITA$AP_ERR:
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:35   
      240     2235    1           ALTRETURN;

   2235  1 000601   000000 702200 xent  ITA$AP_ERR   TSX2  ! X66_AALT

(unnamed)
 Sect OctLoc
   0     000   103110 101116   116105 114040   101120 040040                    CHANNEL AP

(unnamed)
 Sect OctLoc
   2     000   000000 000022   000000 006000   777777 777600   000000 000147    ...............g
   2     004   000003 006000   000177 777600   707777 777777   000002 006000    ................
      241     2236    1   END;

PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:36   
--  Include file information  --

   IT_IDATA_R.:E05TOU  cannot be made into a system file and is referenced.
   HF_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   FR_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   NI_DATA_C.:E05TOU  is referenced.
   FR_SUBS.:E05TOU  is referenced.
   FR$RAT.:E05TOU  is referenced.
   NK_SUBS.:E05TOU  is referenced.
   IT$APC.:E05TOU  cannot be made into a system file and is referenced.
   IT$CMDWD.:E05TOU  cannot be made into a system file and is referenced.
   IT$APDEV.:E05TOU  cannot be made into a system file and is referenced.
   IT_SUBS_C.:E05TOU  is referenced.
   IT_ERROR_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
      No diagnostics issued in procedure ITA$AP.
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:37   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @PTR$                     11-0-0/w PTR         r     1 APC$
    22-0-0/w UBIN        r     1 APCX                      12-0-0/w UBIN        r     1 CHTX
    13-0-0/w UBIN        r     1 CHX                        4-0-0/w PTR         r     1 CMD$
     7-0-0/w PTR         r     1 DEV$                       6-0-0/w PTR         r     1 DQH$
    16-0-0/c STRC(117)   r     1 DUPCHANERR_TEXT           15-0-0/w UBIN        r     1 J
    *0-0-0/w PTR         r     1 PTR$                      10-0-0/w PTR         r     1 RAT$
     5-0-0/w PTR         r     1 SQH$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$DS5$                     0-0-0/w PTR         r     1 B$REAL$
     0-0-0/w PTR         r     1 FR$HD$(0:3)
     0-0-0/w PTR         r     1 FR_PRM$(0:0)
     0-0-0/w BIT         r     1 HW_IMX                     0-0-0/w BIT         r     1 HW_IOP
     0-0-0/w STRC(1800)  r     1 IT_PARTITION               0-0-0/w PTR         r     1 N$DCT$$
     0-0-0/w PTR         r     1 N$FQ$                      0-0-0/w PTR         r     1 NI$CHT$
     0-0-0/w STRC(648)   r     1 NI$DQH_C                   0-0-0/w PTR         r     1 NI$DVT$(0:49)
     0-0-0/w PTR         r     1 NI$FQ$                     0-0-0/w PTR         r     1 NI$IBUF$
     0-0-0/w PTR         r     1 NI$IOM$(0:3)
     0-0-0/w PTR         r     1 NI$RP$                     0-0-0/w SBIN        r     1 N_DCTXMAX

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r     1 FR$PR(0:0)                 0-0-0/w STRC(324)   r     1 FR$RAT
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:38   
     0-0-0/w STRC(288)   r     1 IT$APC                     0-0-0/w STRC(252)   r     1 IT$APDEV
     0-0-0/w UBIN        r     1 IT$CMDWD                   0-0-0/w PTR         r     1 IT$PTR
     0-0-0/w STRC(72)    r     1 NI$CHT(0:127)              0-0-0/w STRC(1332)  r     1 NI$DCT
     0-0-0/w STRC(648)   r     1 NI$DQH                     0-0-0/w STRC(2844)  r     1 NI$DVT
     0-0-0/w STRC(144)   r     1 NI$FQ                      0-0-0/w STRC(252)   r     1 NI$IOM
     0-0-0/d STRC(576)   r     1 NI$IOSTAT                  0-0-0/d STRC(144)   r     1 NI$MBX(0:63)
     0-0-0/w STRC(252)   r     1 NI$SQH


   Procedure ITA$AP requires 386 words for executable code.
   Procedure ITA$AP requires 24 words of local(AUTO) storage.

    No errors detected in file ITA$AP.:E05TSI    .
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:39   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:40   
          MINI XREF LISTING

APC$
      1606**DCL      2127>>ASSIGN   2150<<ASSIGN   2176<<ASSIGN   2199>>ASSIGN   2201>>ASSIGN   2204>>ASSIGN
APCX
      1618**DCL      2151<<ASSIGN   2167>>ASSIGN   2177<<ASSIGN   2202>>ASSIGN
B$DS5$
      1764**DCL      2097>>ASSIGN
B$REAL$
      1765**DCL      2138>>ASSIGN
CHTX
      1607**DCL      2108<<ASSIGN   2110>>IF       2119>>ASSIGN   2124>>ASSIGN   2152<<ASSIGN   2163>>ASSIGN
      2165>>ASSIGN   2173>>ASSIGN   2174>>ASSIGN   2188<<ASSIGN   2197>>ASSIGN   2199>>ASSIGN   2207>>ASSIGN
      2208>>ASSIGN
CHX
      1608**DCL      2102<<ASSIGN   2165>>ASSIGN   2166<<ASSIGN   2166>>ASSIGN   2198>>ASSIGN   2199>>ASSIGN
      2200<<ASSIGN   2200>>ASSIGN
CMD$
      1601**DCL      2097<<ASSIGN   2098<<ASSIGN   2098>>ASSIGN   2103>>DOINDEX  2103>>DOINDEX  2108>>ASSIGN
      2113>>CALLBLT  2133>>ASSIGN   2152>>ASSIGN   2152>>ASSIGN   2155>>ASSIGN   2157>>ASSIGN   2159>>ASSIGN
      2160>>ASSIGN   2172>>ASSIGN   2173>>ASSIGN   2179<<ASSIGN   2179>>ASSIGN   2182>>DOWHILE  2188>>ASSIGN
      2188>>ASSIGN   2190>>ASSIGN   2191>>ASSIGN   2193>>ASSIGN   2194>>ASSIGN   2206>>ASSIGN   2207>>ASSIGN
      2214>>ASSIGN   2230<<ASSIGN   2230>>ASSIGN   2230>>ASSIGN
DEV$
      1604**DCL      2146<>CALL     2149>>ASSIGN   2150>>ASSIGN   2154>>ASSIGN   2155>>ASSIGN   2156>>ASSIGN
      2157>>ASSIGN   2158>>ASSIGN   2158>>ASSIGN   2159>>ASSIGN   2160>>ASSIGN   2161>>ASSIGN   2162>>ASSIGN
      2163>>ASSIGN   2164>>ASSIGN   2164>>ASSIGN   2165>>ASSIGN   2167>>ASSIGN   2168>>ASSIGN   2169>>ASSIGN
      2170>>ASSIGN   2171>>ASSIGN   2174>>ASSIGN   2176>>ASSIGN   2187<>CALL     2190>>ASSIGN   2191>>ASSIGN
      2192>>ASSIGN   2192>>ASSIGN   2193>>ASSIGN   2194>>ASSIGN   2195>>ASSIGN   2196>>ASSIGN   2197>>ASSIGN
      2198>>ASSIGN   2201>>ASSIGN   2202>>ASSIGN   2203>>ASSIGN   2204>>ASSIGN   2208>>ASSIGN   2213>>ASSIGN
      2219>>ASSIGN   2225>>ASSIGN
DQH$
      1603**DCL      2105<<ASSIGN   2119>>ASSIGN   2121>>ASSIGN   2124>>ASSIGN   2125>>ASSIGN   2127>>ASSIGN
      2133>>ASSIGN   2135>>ASSIGN   2137>>ASSIGN   2138>>ASSIGN   2138>>ASSIGN
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:41   
DUPCHANERR_TEXT
      1611**DCL      2111--ASSIGN   2116--CALL
DUPCHANERR_TEXT.CHANNEL
      1613**DCL      2112<<ASSIGN
DUPCHANERR_TEXT.CHANTEXT
      1616**DCL      2115<<CALLBLT
DUPCHANERR_TEXT.COUNT
      1612**DCL      2111<<ASSIGN
DUPCHANERR_TEXT.DASH
      1615**DCL      2114<<ASSIGN
DUPCHANERR_TEXT.IOMTEXT
      1614**DCL      2113<<CALLBLT
FR$HD$
      1897**DCL      2217--ASSIGN   2221>>ASSIGN
FR$PR
      1903**DCL      2228<<ASSIGN   2228>>ASSIGN
FR$RAT.LNK$
      1492**DCL      2222>>DOWHILE  2223>>ASSIGN   2225<<ASSIGN
FR$RAT.M1
      1513**DCL      2214<<ASSIGN
FR$RAT.TYP
      1515**DCL      2215<<ASSIGN
FR_PRM$
      1904**DCL      2228>>ASSIGN   2228>>ASSIGN
HW_IMX
      1962**DCL      2128>>IF
HW_IOP
      1959**DCL      2136>>IF
IT$APC
      1390**DCL      2179--ASSIGN
IT$APC.APCNAME
      1399**DCL      1400--REDEF    2155>>ASSIGN
IT$APC.APCTYPE
      1395**DCL      2157>>ASSIGN
IT$APC.FLAGS.DOWN
      1405**DCL      2172>>ASSIGN   2173>>ASSIGN
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:42   
IT$APC.FX
      1397**DCL      2160>>ASSIGN
IT$APC.HI_CHAN
      1409**DCL      2103>>DOINDEX
IT$APC.IOM#
      1407**DCL      2152>>ASSIGN
IT$APC.LO_CHAN
      1408**DCL      2103>>DOINDEX  2152>>ASSIGN
IT$APC.MODX
      1396**DCL      2159>>ASSIGN
IT$APDEV.ATTR
      1370**DCL      2214>>ASSIGN
IT$APDEV.CHAN
      1373**DCL      2188>>ASSIGN
IT$APDEV.CNTWD.OFFSET
      1355**DCL      2230>>ASSIGN
IT$APDEV.CNTWD.TYPE
      1356**DCL      2182>>DOWHILE
IT$APDEV.FLAGS.DOWN
      1358**DCL      2206>>ASSIGN   2207>>ASSIGN
IT$APDEV.FX
      1368**DCL      2194>>ASSIGN
IT$APDEV.IOM#
      1372**DCL      2108>>ASSIGN   2113>>CALLBLT  2133>>ASSIGN   2188>>ASSIGN
IT$APDEV.MODX
      1367**DCL      2193>>ASSIGN
IT$APDEV.NAME
      1361**DCL      1362--REDEF    2190>>ASSIGN
IT$APDEV.TYPE
      1366**DCL      2191>>ASSIGN
IT$CMDWD
      1381**DCL      2098--ASSIGN
IT$PTR
      1752**DCL      2218>>IF       2219<<ASSIGN
ITA$AP_ERR
      2235**LABEL    2100--CALLALT  2106--CALLALT  2146--CALLALT  2187--CALLALT  2212--CALLALT
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:43   
ITE$ERROR
      1756**DCL-ENT  2116--CALL
ITH$ALLOCATE
      1757**DCL-ENT  2106--CALL
ITH$DCT_INIT
      1760**DCL-ENT  2146--CALL     2187--CALL
ITH$RAT_INIT
      1759**DCL-ENT  2212--CALL
ITH$SQH_INIT
      1758**DCL-ENT  2100--CALL
IT_PARTITION.DEVICE
      1772**DCL      2172<<ASSIGN   2206<<ASSIGN
IT_PARTITION.IOCHAN
      1772**DCL      2173<<ASSIGN   2207<<ASSIGN
J
      1610**DCL      2103<<DOINDEX  2108>>ASSIGN   2115>>CALLBLT  2133>>ASSIGN
N$DCT$$
       856**DCL       990--IMP-PTR
N$FQ$
       856**DCL       991--IMP-PTR
N$REQ_INIT.BUFADDR
       875**DCL       876--REDEF     876--REDEF
N$REQ_INIT.DLA.DRELADDR
       867**DCL       867--REDEF
N$REQ_INIT.DVE.EOMCHAR
       904**DCL       905--REDEF
N$REQ_INIT.EAINFO
       898**DCL       898--REDEF
N$REQ_INIT.EAINFOX
       898**DCL       899--REDEF
N$REQ_INIT.EVNTINFO
       899**DCL       899--REDEF
N$REQ_INIT.STATUS
       880**DCL       886--REDEF
NI$CHT.DQH$
      1638**DCL      2110>>IF       2119<<ASSIGN   2163>>ASSIGN   2197>>ASSIGN
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:44   
NI$CHT.POSTER
      1638**DCL      2174<<ASSIGN   2208<<ASSIGN
NI$CHT$
       915**DCL      1638--IMP-PTR  2110>>IF       2119>>ASSIGN   2163>>ASSIGN   2174>>ASSIGN   2197>>ASSIGN
      2208>>ASSIGN
NI$DCT.AP.CDCTX
      1706**DCL      2167<<ASSIGN   2202<<ASSIGN
NI$DCT.AP.CHAN
      1706**DCL      2198<<ASSIGN
NI$DCT.CTYP
      1680**DCL      2156<<ASSIGN   2204<<ASSIGN   2204>>ASSIGN
NI$DCT.DEVNM
      1672**DCL      2155<<ASSIGN   2190<<ASSIGN
NI$DCT.DFLG.INPUT
      1674**DCL      2168<<ASSIGN
NI$DCT.DFLG.OUTPUT
      1675**DCL      2169<<ASSIGN
NI$DCT.DFLG.PSIA
      1676**DCL      2170<<ASSIGN   2203<<ASSIGN
NI$DCT.DP
      1692**DCL      1699--REDEF    1702--REDEF    1703--REDEF    1705--REDEF    1705--REDEF    1706--REDEF
      1707--REDEF    1707--REDEF
NI$DCT.DQH$
      1688**DCL      2163<<ASSIGN   2164>>ASSIGN   2197<<ASSIGN   2201>>ASSIGN
NI$DCT.DVN
      1681**DCL      2195<<ASSIGN
NI$DCT.DVT$
      1688**DCL      2157<<ASSIGN   2158>>ASSIGN   2174>>ASSIGN   2191<<ASSIGN   2192>>ASSIGN   2208>>ASSIGN
NI$DCT.FX
      1681**DCL      2160<<ASSIGN   2194<<ASSIGN
NI$DCT.MODX
      1681**DCL      2159<<ASSIGN   2193<<ASSIGN
NI$DCT.MPC.FW$
      1700**DCL      2154<<ASSIGN
NI$DCT.MPC.FWNAME
      1702**DCL      2158<<ASSIGN
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:45   
NI$DCT.MPC.IOCHANX
      1700**DCL      1700--REDEF    2165<<ASSIGN   2199<<ASSIGN
NI$DCT.MPC.TYPE
      1700**DCL      2171<<ASSIGN
NI$DCT.RAT$
      1673**DCL      2213<<ASSIGN   2219>>ASSIGN   2225>>ASSIGN
NI$DCT.SQH$
      1687**DCL      2162<<ASSIGN   2196<<ASSIGN
NI$DCT.TYPE
      1682**DCL      2161<<ASSIGN   2192<<ASSIGN
NI$DCT_C.DP
      2010**DCL      2017--REDEF    2020--REDEF    2021--REDEF    2023--REDEF    2023--REDEF    2024--REDEF
      2025--REDEF    2025--REDEF
NI$DCT_C.MPC.IOCHANX
      2018**DCL      2018--REDEF
NI$DQH
      1649**DCL      2106--CALL     2121<<ASSIGN
NI$DQH.IOCHANX
      1651**DCL      1652--REDEF    2124<<ASSIGN
NI$DQH.IOSTATUS$
      1656**DCL      2135<<ASSIGN   2137>>ASSIGN   2138>>ASSIGN   2138>>ASSIGN
NI$DQH.MBX$
      1660**DCL      1661--REDEF    2133<<ASSIGN
NI$DQH.MPC$
      1656**DCL      2127<<ASSIGN   2164<<ASSIGN   2201<<ASSIGN
NI$DQH.SQH$
      1655**DCL      2125<<ASSIGN
NI$DQH_C
      2038**DCL      2121>>ASSIGN
NI$DQH_C.IOCHANX
      2040**DCL      2041--REDEF
NI$DQH_C.MBX$
      2049**DCL      2050--REDEF
NI$DVT.MPC
      1714**DCL      1715--REDEF
NI$DVT.MPC.FWNAME
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:46   
      1714**DCL      2158>>ASSIGN
NI$DVT.POSTER
      1712**DCL      2174>>ASSIGN   2208>>ASSIGN
NI$DVT.TYPE
      1712**DCL      2192>>ASSIGN
NI$DVT$
       915**DCL      2157>>ASSIGN   2191>>ASSIGN
NI$FQ.HD$
       992**DCL      2135>>ASSIGN   2141<<ASSIGN   2141>>ASSIGN
NI$FQ$
       916**DCL       992--IMP-PTR  2135>>ASSIGN   2141>>ASSIGN   2141>>ASSIGN
NI$IBUF$
       916**DCL       992--IMP-PTR
NI$IMXMBX_INIT.PAGED_BASE
       926**DCL       927--REDEF     927--REDEF
NI$IMXMBX_INIT.SIZE
       928**DCL       928--REDEF
NI$IOM.MBX$
      1728**DCL      2133>>ASSIGN
NI$IOM$
       938**DCL      2133>>ASSIGN
NI$IOSTAT
      1719**DCL      2141--ASSIGN
NI$IOSTAT.AESDCW
      1724**DCL      1724--REDEF    2137<<ASSIGN
NI$IOSTAT.AESDCW.ADDRESS
      1724**DCL      2138<<ASSIGN
NI$IOSTAT.EXTST
      1725**DCL      2138--ASSIGN
NI$IOSTAT_C.AESDCW
      2076**DCL      2076--REDEF
NI$MBX
      1743**DCL      2133--ASSIGN
NI$MBX.DCW.CONTROL.AE
      1748**DCL      1748--REDEF
NI$MBX.LPW.CONTROL.AE
PL6.E3A0      #001=ITA$AP File=ITA$AP.:E05TSI                                    TUE 07/29/97 22:58 Page:47   
      1744**DCL      1744--REDEF
NI$REQ_INIT.DCW
       950**DCL       953--REDEF
NI$REQ_INIT.DCW.TALLY
       951**DCL       951--REDEF
NI$REQ_INIT.IDCW.EXTA
       953**DCL       953--REDEF
NI$REQ_INIT.PCW
       955**DCL       959--REDEF
NI$REQ_INIT.SEEK
       960**DCL       961--REDEF     962--REDEF
NI$RP$
       964**DCL       994--IMP-PTR
NI$SQH.DOOR
      1633**DCL      1633--REDEF
NI$SQH.MPC$
      1635**DCL      2149<<ASSIGN
NI$SQH.NDCT
      1634**DCL      2148<<ASSIGN   2148>>ASSIGN   2183<<ASSIGN   2183>>ASSIGN
NI$SQH_C.DOOR
      2061**DCL      2061--REDEF
NI_MBX_INIT.DCW.CONTROL.AE
       986**DCL       986--REDEF
NI_MBX_INIT.LPW.CONTROL.AE
       982**DCL       982--REDEF
N_DCTXMAX
       964**DCL      2151>>ASSIGN   2172>>ASSIGN   2177>>ASSIGN   2206>>ASSIGN
PTR$
        15**DCL        12--PROC     2100<>CALL     2105>>ASSIGN   2106<>CALL     2146<>CALL     2187<>CALL
      2212<>CALL
RAT$
      1605**DCL      2212<>CALL     2213>>ASSIGN   2214>>ASSIGN   2215>>ASSIGN   2217<<ASSIGN   2218>>IF
      2219>>ASSIGN   2221<<ASSIGN   2222>>DOWHILE  2223<<ASSIGN   2223>>ASSIGN   2225>>ASSIGN
SQH$
      1602**DCL      2100<>CALL     2125>>ASSIGN   2148>>ASSIGN   2148>>ASSIGN   2149>>ASSIGN   2162>>ASSIGN
      2183>>ASSIGN   2183>>ASSIGN   2196>>ASSIGN
