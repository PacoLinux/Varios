VERSION E05

PL6.E3A0      #001=GHE$ERRLOG File=GHE$ERRLOG.:E05TSI                            TUE 07/29/97 21:33 Page:1    
        1        1        /*M* GHE$ERRLOG - Error logging */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        GHE$ERRLOG: PROC (ERRCODE,VALUES,MSG,SIZE,USER) ALTRET;
        8        8
        9        9        %INCLUDE LCP_6;
       10      200        %INCLUDE KL_MACRO_C;
       11     3552        %INCLUDE KL_AFCN_C;
       12     3653
       13     3654        /* Parameters */
       14     3655    1   DCL VALUES(0:3) UBIN;                   /* The values that are to be stored   */
       15     3656    1   DCL ERRCODE BIT(32) ALIGNED;            /* The error code                     */
       16     3657    1   DCL MSG CHAR(SIZE);                     /* The optional buffer                */
       17     3658    1   DCL SIZE UBIN;                          /* The size of the buffer             */
       18     3659    1   DCL USER BIT(1) ALIGNED;                /* True if we can reg                 */
       19     3660
       20     3661        /* Auto */
       21     3662        %KL_SYSLOG (FPTN=SYSLOG,STCLASS=AUTO,LAST=",");
       22     3686        %KL_ERRLOG (FPTN=ERRLOG,STCLASS=AUTO,LVL=2,LAST=",");
       23     3794    1         3 MSG CHAR(200) CALIGNED;
       24     3795    1   DCL TOTAL_SIZE UBIN;
       25     3796
       26     3797        /* Entry references */
       27     3798    1   DCL GHI$UTS ENTRY(1);
       28     3799    1   DCL KNB$WRITE ENTRY(4) ALTRET;
       29     3800    1   DCL KNB$GETRESP ENTRY(4) ALTRET;
       30     3801
       31     3802        %EJECT;
PL6.E3A0      #001=GHE$ERRLOG File=GHE$ERRLOG.:E05TSI                            TUE 07/29/97 21:33 Page:2    
       32     3803    1           SYSLOG.FCN = IGA_SYSLOG;
       33     3804    1           SYSLOG.FILENUM = 1;
       34     3805    1           SYSLOG.ERRLOG.ERRCODE = ERRCODE;
       35     3806    1           SYSLOG.ERRLOG.VALUES = VALUES;
       36     3807    1           SYSLOG.ERRLOG.TERMID = '0'B;
       37     3808    1           SYSLOG.ERRLOG.DATA_SIZE = SIZE;
       38     3809    1           CALL GHI$UTS(SYSLOG.ERRLOG.UTS);
       39     3810    1           IF SIZE > 0
       40     3811    1           THEN
       41     3812    1              SYSLOG.ERRLOG.MSG = MSG;
       42     3813    1           TOTAL_SIZE = SIZEC(SYSLOG)-SIZEC(SYSLOG.ERRLOG.MSG)+SIZE;
       43     3814    1           IF USER
       44     3815    1           THEN
       45     3816    1              CALL KNB$GETRESP(ADDR(SYSLOG),TOTAL_SIZE);
       46     3817    1           ELSE
       47     3818    1              CALL KNB$WRITE(ADDR(SYSLOG),TOTAL_SIZE)
       48     3819    2              WHENALTRETURN DO;
       49     3820    2                 ALTRETURN;
       50     3821    2                 END;
       51     3822    1           RETURN;
       52     3823
       53     3824    1   END GHE$ERRLOG;
       54     3825        %EOD;

PL6.E3A0      #001=GHE$ERRLOG File=GHE$ERRLOG.:E05TSI                            TUE 07/29/97 21:33 Page:3    
--  Include file information  --

   KL_AFCN_C.:E05TOU  is referenced.
   KL_MACRO_C.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is referenced.
   KI_CP6.:E05TOU  was found in the system file and is referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure GHE$ERRLOG.

   Procedure GHE$ERRLOG requires 141 words for executable code.
   Procedure GHE$ERRLOG requires 140 words of local(AUTO) storage.

PL6.E3A0      #001=GHE$ERRLOG File=GHE$ERRLOG.:E05TSI                            TUE 07/29/97 21:33 Page:4    

 Object Unit name= GHE$ERRLOG                                 File name= GHE$ERRLOG.:E05TOU
 UTS= JUL 29 '97 21:33:29.40 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0   Proc  even  none   141     8D  GHE$ERRLOG

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     0      0   yes    yes     yes      Std        5  GHE$ERRLOG

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       1 GHI$UTS
 yes     yes           Std       4 KNB$GETRESP
 yes     yes           Std       4 KNB$WRITE
                       nStd      0 X6A_AUTO_N
                       nStd      0 X6C_ALR
                       nStd      0 X6A_AALT
                       nStd      0 X6A_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    G$ROS$
PL6.E3A0      #001=GHE$ERRLOG File=GHE$ERRLOG.:E05TSI                            TUE 07/29/97 21:33 Page:5    


        1        1        /*M* GHE$ERRLOG - Error logging */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        GHE$ERRLOG: PROC (ERRCODE,VALUES,MSG,SIZE,USER) ALTRET;

      7   0 000000  D380 0000 0000  xent GHE$ERRLOG      LNJ,B5   X6A_AUTO_N
          0 000003       008C 0005                       DC       140,5

        8        8
        9        9        %INCLUDE LCP_6;
       10      200        %INCLUDE KL_MACRO_C;
       11     3552        %INCLUDE KL_AFCN_C;
       12     3653
       13     3654        /* Parameters */
       14     3655    1   DCL VALUES(0:3) UBIN;                   /* The values that are to be stored   */
       15     3656    1   DCL ERRCODE BIT(32) ALIGNED;            /* The error code                     */
       16     3657    1   DCL MSG CHAR(SIZE);                     /* The optional buffer                */
       17     3658    1   DCL SIZE UBIN;                          /* The size of the buffer             */
       18     3659    1   DCL USER BIT(1) ALIGNED;                /* True if we can reg                 */
       19     3660
       20     3661        /* Auto */
       21     3662        %KL_SYSLOG (FPTN=SYSLOG,STCLASS=AUTO,LAST=",");
       22     3686        %KL_ERRLOG (FPTN=ERRLOG,STCLASS=AUTO,LVL=2,LAST=",");
       23     3794    1         3 MSG CHAR(200) CALIGNED;
       24     3795    1   DCL TOTAL_SIZE UBIN;
       25     3796
       26     3797        /* Entry references */
       27     3798    1   DCL GHI$UTS ENTRY(1);
       28     3799    1   DCL KNB$WRITE ENTRY(4) ALTRET;
       29     3800    1   DCL KNB$GETRESP ENTRY(4) ALTRET;
       30     3801
       31     3802        %EJECT;
PL6.E3A0      #001=GHE$ERRLOG File=GHE$ERRLOG.:E05TSI                            TUE 07/29/97 21:33 Page:6    
       32     3803    1           SYSLOG.FCN = IGA_SYSLOG;

   3803   0 000005  6C27                                 LDV,R6   39
          0 000006  E7C7 000E                            STH,R6   SYSLOG,AUTO

       33     3804    1           SYSLOG.FILENUM = 1;

   3804   0 000008  5C01                                 LDV,R5   1
          0 000009  DAC7 000F                            SRM,R5,'00FF'X    SYSLOG+1,AUTO
          0 00000B       00FF

       34     3805    1           SYSLOG.ERRLOG.ERRCODE = ERRCODE;

   3805   0 00000C  ECC7 0004                            LDB,B6   @ERRCODE,AUTO
          0 00000E  8C86                                 LDI      ,B6
          0 00000F  8D47 0010                            SDI      SYSLOG+2,AUTO

       35     3806    1           SYSLOG.ERRLOG.VALUES = VALUES;

   3806   0 000011  ACC7 0006                            LDB,B2   @VALUES,AUTO
          0 000013  2C00                                 LDV,R2   0
          0 000014  6C08                                 LDV,R6   8
          0 000015  BB87                                 LAB,B3   ,AUTO
          0 000016  3C38                                 LDV,R3   56
          0 000017  0008                                 MMM

       36     3807    1           SYSLOG.ERRLOG.TERMID = '0'B;

   3807   0 000018  5C10                                 LDV,R5   16
          0 000019  0021                                 ALR      ;
          0 00001A       4178 0000                                ALPHANUM('0000'X,IMO,,1),;
          0 00001C       4007 0014                                ALPHANUM(SYSLOG+6,AUTO,,R5,FILL)

       37     3808    1           SYSLOG.ERRLOG.DATA_SIZE = SIZE;

   3808   0 00001E  DCC7 000A                            LDB,B5   @SIZE,AUTO
          0 000020  437F                                 CSYNC    s:3808+1,SPREL
PL6.E3A0      #001=GHE$ERRLOG File=GHE$ERRLOG.:E05TSI                            TUE 07/29/97 21:33 Page:7    
          0 000021  E805                                 LDR,R6   ,B5
          0 000022  E7C7 0020                            STH,R6   SYSLOG+18,AUTO

       38     3809    1           CALL GHI$UTS(SYSLOG.ERRLOG.UTS);

   3809   0 000024  CBC7 0012                            LAB,B4   SYSLOG+4,AUTO
          0 000026  CFC7 0086                            STB,B4   TOTAL_SIZE+1,AUTO
          0 000028  BBC7 0086                            LAB,B3   TOTAL_SIZE+1,AUTO
          0 00002A  CBF0 0100                            LAB,B4   256,IMO
          0 00002C  E380 0000 0000  xent                 LNJ,B6   GHI$UTS
          0 00002F       0001                            DC       s:3810,PREL

       39     3810    1           IF SIZE > 0

   3810   0 000030  ECC7 000A                            LDB,B6   @SIZE,AUTO
          0 000032  E806                                 LDR,R6   ,B6
          0 000033  6901 001C                            BEZ,R6   s:3813,PREL

       40     3811    1           THEN
       41     3812    1              SYSLOG.ERRLOG.MSG = MSG;

   3812   0 000035  8CC7 0008                            LDI      @MSG,AUTO
          0 000037  B856                                 LDR,R3   R6
          0 000038  E570 7FFF                            AND,R6   32767,IMO
          0 00003A  8D47 0086                            SDI      TOTAL_SIZE+1,AUTO
          0 00003C  DCC7 0086                            LDB,B5   TOTAL_SIZE+1,AUTO
          0 00003E  304F                                 SOR,R3   15
          0 00003F  D806                                 LDR,R5   ,B6
          0 000040  BF47 0088                            STR,R3   TOTAL_SIZE+3,AUTO
          0 000042  DF47 0089                            STR,R5   TOTAL_SIZE+4,AUTO
          0 000044  DFC7 008A                            STB,B5   TOTAL_SIZE+5,AUTO
          0 000046  AB85                                 LAB,B2   ,B5
          0 000047  A853                                 LDR,R2   R3
          0 000048  E855                                 LDR,R6   R5
          0 000049  BB87                                 LAB,B3   ,AUTO
          0 00004A  3C41                                 LDV,R3   65
          0 00004B  F870 00C8                            LDR,R7   200,IMO
PL6.E3A0      #001=GHE$ERRLOG File=GHE$ERRLOG.:E05TSI                            TUE 07/29/97 21:33 Page:8    
          0 00004D  D380 0000 0000  xent                 LNJ,B5   X6C_ALR

       42     3813    1           TOTAL_SIZE = SIZEC(SYSLOG)-SIZEC(SYSLOG.ERRLOG.MSG)+SIZE;

   3813   0 000050  ECC7 000A                            LDB,B6   @SIZE,AUTO
          0 000052  E806                                 LDR,R6   ,B6
          0 000053  6E26                                 ADV,R6   38
          0 000054  EF47 0085                            STR,R6   TOTAL_SIZE,AUTO

       43     3814    1           IF USER

   3814   0 000056  DCC7 000C                            LDB,B5   @USER,AUTO
          0 000058  8985                                 CMZ      ,B5
          0 000059  0881 0017                            BAGE     s:3818,PREL

       44     3815    1           THEN
       45     3816    1              CALL KNB$GETRESP(ADDR(SYSLOG),TOTAL_SIZE);

   3816   0 00005B  CBC7 000E                            LAB,B4   SYSLOG,AUTO
          0 00005D  CFC7 0086                            STB,B4   TOTAL_SIZE+1,AUTO
          0 00005F  BBC7 0085                            LAB,B3   TOTAL_SIZE,AUTO
          0 000061  BFC7 008A                            STB,B3   TOTAL_SIZE+5,AUTO
          0 000063  ABC7 0086                            LAB,B2   TOTAL_SIZE+1,AUTO
          0 000065  AFC7 0088                            STB,B2   TOTAL_SIZE+3,AUTO
          0 000067  BBC7 0088                            LAB,B3   TOTAL_SIZE+3,AUTO
          0 000069  CBF0 0200                            LAB,B4   512,IMO
          0 00006B  E380 0000 0000  xent                 LNJ,B6   KNB$GETRESP
          0 00006E       0001                            DC       s:3816+20,PREL
          0 00006F  0F81 001A                            B        s:3822,PREL

       46     3817    1           ELSE
       47     3818    1              CALL KNB$WRITE(ADDR(SYSLOG),TOTAL_SIZE)

   3818   0 000071  CBC7 000E                            LAB,B4   SYSLOG,AUTO
          0 000073  CFC7 0086                            STB,B4   TOTAL_SIZE+1,AUTO
          0 000075  BBC7 0085                            LAB,B3   TOTAL_SIZE,AUTO
          0 000077  BFC7 008A                            STB,B3   TOTAL_SIZE+5,AUTO
PL6.E3A0      #001=GHE$ERRLOG File=GHE$ERRLOG.:E05TSI                            TUE 07/29/97 21:33 Page:9    
          0 000079  ABC7 0086                            LAB,B2   TOTAL_SIZE+1,AUTO
          0 00007B  AFC7 0088                            STB,B2   TOTAL_SIZE+3,AUTO
          0 00007D  BBC7 0088                            LAB,B3   TOTAL_SIZE+3,AUTO
          0 00007F  CBF0 0200                            LAB,B4   512,IMO
          0 000081  E380 0000 0000  xent                 LNJ,B6   KNB$WRITE
          0 000084       0003                            DC       s:3820,PREL
          0 000085  0F81 0004                            B        s:3822,PREL

       48     3819    2              WHENALTRETURN DO;

       49     3820    2                 ALTRETURN;

   3820   0 000087  C380 0000 0000  xent                 LNJ,B4   X6A_AALT

       50     3821    2                 END;
       51     3822    1           RETURN;

   3822   0 00008A  C380 0000 0000  xent                 LNJ,B4   X6A_ARET
       52     3823
       53     3824    1   END GHE$ERRLOG;
       54     3825        %EOD;

PL6.E3A0      #001=GHE$ERRLOG File=GHE$ERRLOG.:E05TSI                            TUE 07/29/97 21:33 Page:10   
--  Include file information  --

   KL_AFCN_C.:E05TOU  is referenced.
   KL_MACRO_C.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is referenced.
   KI_CP6.:E05TOU  was found in the system file and is referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure GHE$ERRLOG.
PL6.E3A0      #001=GHE$ERRLOG File=GHE$ERRLOG.:E05TSI                            TUE 07/29/97 21:33 Page:11   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @ERRCODE                   8-0-0/w PTR         r     1 @MSG
     A-0-0/w PTR         r     1 @SIZE                      C-0-0/w PTR         r     1 @USER
     6-0-0/w PTR         r     1 @VALUES                   *0-0-0/w BIT (32)    r     1 ERRCODE
    *0-0-0/c ACHR        r     1 MSG                       *0-0-0/w UBIN(16)    r     1 SIZE
     E-0-0/w STRC(1904)  r     1 SYSLOG                    85-0-0/w UBIN(16)    r     1 TOTAL_SIZE
    *0-0-0/w BIT         r     1 USER                      *0-0-0/w UBIN(16)    r     1 VALUES(0:3)


   Procedure GHE$ERRLOG requires 141 words for executable code.
   Procedure GHE$ERRLOG requires 140 words of local(AUTO) storage.
PL6.E3A0      #001=GHE$ERRLOG File=GHE$ERRLOG.:E05TSI                            TUE 07/29/97 21:33 Page:12   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=GHE$ERRLOG File=GHE$ERRLOG.:E05TSI                            TUE 07/29/97 21:33 Page:13   
          MINI XREF LISTING

ERRCODE
      3656**DCL         7--PROC     3805>>ASSIGN
GHI$UTS
      3798**DCL-ENT  3809--CALL
KNB$GETRESP
      3800**DCL-ENT  3816--CALL
KNB$WRITE
      3799**DCL-ENT  3818--CALL
MSG
      3657**DCL         7--PROC     3812>>ASSIGN
SIZE
      3658**DCL         7--PROC     3657--IMP-SIZ  3808>>ASSIGN   3810>>IF       3812>>ASSIGN   3813>>ASSIGN
SYSLOG
      3677**DCL      3813--ASSIGN   3816--CALL     3818--CALL
SYSLOG.ERRLOG.DATA_SIZE
      3792**DCL      3808<<ASSIGN
SYSLOG.ERRLOG.ERRCODE
      3723**DCL      3805<<ASSIGN
SYSLOG.ERRLOG.MSG
      3794**DCL      3812<<ASSIGN   3813--ASSIGN
SYSLOG.ERRLOG.TERMID
      3774**DCL      3807<<ASSIGN
SYSLOG.ERRLOG.TERMID.TERM
      3776**DCL      3785--REDEF
SYSLOG.ERRLOG.UTS
      3754**DCL      3809<>CALL
SYSLOG.ERRLOG.VALUES
      3788**DCL      3806<<ASSIGN
SYSLOG.FCN
      3678**DCL      3803<<ASSIGN
SYSLOG.FILENUM
      3681**DCL      3804<<ASSIGN
PL6.E3A0      #001=GHE$ERRLOG File=GHE$ERRLOG.:E05TSI                            TUE 07/29/97 21:33 Page:14   
TOTAL_SIZE
      3795**DCL      3813<<ASSIGN   3816<>CALL     3818<>CALL
USER
      3659**DCL         7--PROC     3814>>IF
VALUES
      3655**DCL         7--PROC     3806>>ASSIGN

PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:15   
       55        1        /*T***********************************************************/
       56        2        /*T*                                                         */
       57        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       58        4        /*T*                                                         */
       59        5        /*T***********************************************************/
       60        6        GHE$TIME: PROC;
       61        7
       62        8        /* GHE$TIME is called initially from KUB$ACTION after
       63        9           NETCON has send a IGA_INIT_DONE message to BABOON.
       64       10        */
       65       11
       66       12        /* Includes */
       67       13        %INCLUDE LCP_6;
       68      204        %INCLUDE B_ERRORS_C;
       69     1331        %INCLUDE GH_SCHD_M;
       70     1475
       71     1476        /* Auto */
       72     1477    1   DCL VALUES(0:3) UBIN;
       73     1478
       74     1479        /* Static */
       75     1480    1   DCL GHE_CORRECTABLE_ERRORS UBIN STATIC SYMDEF;
       76     1481        %GH$TMR_BLK (FPTN=GHE_TIMR, STCLASS=STATIC, INTERVAL=120, PROC$=GHE$TIME);
       77     1504
       78     1505        /* Symref */
       79     1506    1   DCL G$LOW_MEM$ PTR SYMREF;
       80     1507    1   DCL G$ISA_PFS$ PTR SYMREF;
       81     1508
       82     1509        /* Based */
       83     1510        %G$LOW_MEM (STCLASS="BASED(G$LOW_MEM$)");
       84     1559    1   DCL 1 G$ISA_PFS BASED(G$ISA_PFS$) ALIGNED,
       85     1560    1      2 DEV BIT(16); /* I'd use G$ISA, but the pointer points to the DEV word */
       86     1561
       87     1562        /* Error codes */
       88     1563        %VLP_ERRCODE
       89     1564           (FPTN=ERR_PARITY,FCG=GH,MID=E,MON='1'B,ERR#=%E$PRTY,STCLASS=CONSTANT);
       90     1610        %VLP_ERRCODE
       91     1611           (FPTN=ERR_HARDWARE,FCG=GH,MID=E,MON='1'B,ERR#=%E$HARDWARE,STCLASS=CONSTANT);
PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:16   
       92     1657        /*E* ERROR: GHE-E$PRTY
       93     1658             MESSAGE: Correctable memory errors detected.
       94     1659                      VALUE(0) counts the correctable errors in the last minute.
       95     1660             Remarks: The EDAC memory controller is capable of correcting single
       96     1661                      bit errors when accessing memory.  It increments a word in
       97     1662                      low memory whenever it does so.  Once per minute, LCP6 logs
       98     1663                      and zeroes this counter if it has been incremented.
       99     1664         */
      100     1665        /* Entry references */
      101     1666    1   DCL AMINUTE UBIN CONSTANT INIT(120);
      102     1667    1   DCL GHE$ERRLOG ENTRY(5) ALTRET;
      103     1668    1   DCL GHS$SET_TMR ENTRY(1) ;
      104     1669
      105     1670        %EJECT;
PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:17   
      106     1671    1           IF G$LOW_MEM.MEM_ERR_CNT ~= GHE_CORRECTABLE_ERRORS
      107     1672    2           THEN DO;
      108     1673    2              VALUES(0) = G$LOW_MEM.MEM_ERR_CNT - GHE_CORRECTABLE_ERRORS;
      109     1674    2              VALUES(1) = G$LOW_MEM.MEM_ERR_CNT;
      110     1675    2              VALUES(2) = 0;
      111     1676    2              VALUES(3) = 0;
      112     1677    2              CALL GHE$ERRLOG(ERR_PARITY,VALUES,,0,'0'B)
      113     1678    3              WHENRETURN DO;
      114     1679    3                 GHE_CORRECTABLE_ERRORS = G$LOW_MEM.MEM_ERR_CNT;
      115     1680    3                 END;
      116     1681    2              END;
      117     1682    2           IF G$ISA_PFS.DEV THEN DO;
      118     1683    2              VALUES(0) = BITBIN(G$ISA_PFS.DEV);
      119     1684    2              VALUES(1) = 0;
      120     1685    2              VALUES(2) = 0;
      121     1686    2              VALUES(3) = 0;
      122     1687        /*E* ERROR: GHE-E$HARDWARE
      123     1688             MESSAGE: Interrupt at level 0 detected.
      124     1689                      VALUE(0) shows the interrupting channel.
      125     1690             Remarks: A normally operating channel cannot interrupt at level
      126     1691                      zero, since the interrupt level is configurable, and
      127     1692                      a value of zero means that interrupts are not to be used.
      128     1693                      Therefore, when a channel does interrupt at level zero,
      129     1694                      it almost always indicates a hardware problem.
      130     1695        */
      131     1696    2              CALL GHE$ERRLOG(ERR_HARDWARE,VALUES,,0,'0'B)
      132     1697    3              WHENRETURN DO;
      133     1698    3                 G$ISA_PFS.DEV = '0'B;
      134     1699    3                 END;
      135     1700    2              END;
      136     1701    1           CALL GHS$SET_TMR (GHE_TIMR);
      137     1702
      138     1703    1           RETURN;
      139     1704
      140     1705    1   END GHE$TIME;

PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:18   
--  Include file information  --

   GH_SCHD_M.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is referenced.
   KI_CP6.:E05TOU  was found in the system file and is referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure GHE$TIME.

   Procedure GHE$TIME requires 129 words for executable code.
   Procedure GHE$TIME requires 18 words of local(AUTO) storage.

    No errors detected in file GHE$ERRLOG.:E05TSI    .

PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:19   

 Object Unit name= GHE$TIME                                   File name= GHE$ERRLOG.:E05TOU
 UTS= JUL 29 '97 21:33:43.84 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0   Data  even  none    11      B  GHE$TIME
    1  RoData even  UTS      5      5  GHE$TIME
    2   Proc  even  none   129     81  GHE$TIME
    3  RoData even  none     2      2  GHE$TIME

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     2      0   yes            yes      Std        0  GHE$TIME

  ****  Data defs  ****

 Sect HexLoc  Name                           Sect HexLoc  Name
    0      0  GHE_CORRECTABLE_ERRORS

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       5 GHE$ERRLOG
         yes           Std       1 GHS$SET_TMR
         yes           Std       0 GHE$TIME
                       nStd      0 X6A_AUTO_0
                       nStd      0 X6A_ARET
PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:20   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     G$LOW_MEM$                            G$ISA_PFS$                       r    G$ROS$
PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:21   


       55        1        /*T***********************************************************/
       56        2        /*T*                                                         */
       57        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       58        4        /*T*                                                         */
       59        5        /*T***********************************************************/
       60        6        GHE$TIME: PROC;

      6   2 000000  D380 0000 0000  xent GHE$TIME        LNJ,B5   X6A_AUTO_0
          2 000003       0012 0000                       DC       18,0

       61        7
       62        8        /* GHE$TIME is called initially from KUB$ACTION after
       63        9           NETCON has send a IGA_INIT_DONE message to BABOON.
       64       10        */
       65       11
       66       12        /* Includes */
       67       13        %INCLUDE LCP_6;
       68      204        %INCLUDE B_ERRORS_C;
       69     1331        %INCLUDE GH_SCHD_M;
       70     1475
       71     1476        /* Auto */
       72     1477    1   DCL VALUES(0:3) UBIN;
       73     1478
       74     1479        /* Static */
       75     1480    1   DCL GHE_CORRECTABLE_ERRORS UBIN STATIC SYMDEF;
       76     1481        %GH$TMR_BLK (FPTN=GHE_TIMR, STCLASS=STATIC, INTERVAL=120, PROC$=GHE$TIME);
       77     1504
       78     1505        /* Symref */
       79     1506    1   DCL G$LOW_MEM$ PTR SYMREF;
       80     1507    1   DCL G$ISA_PFS$ PTR SYMREF;
       81     1508
       82     1509        /* Based */
       83     1510        %G$LOW_MEM (STCLASS="BASED(G$LOW_MEM$)");
       84     1559    1   DCL 1 G$ISA_PFS BASED(G$ISA_PFS$) ALIGNED,
       85     1560    1      2 DEV BIT(16); /* I'd use G$ISA, but the pointer points to the DEV word */
       86     1561
PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:22   
       87     1562        /* Error codes */
       88     1563        %VLP_ERRCODE
       89     1564           (FPTN=ERR_PARITY,FCG=GH,MID=E,MON='1'B,ERR#=%E$PRTY,STCLASS=CONSTANT);
       90     1610        %VLP_ERRCODE
       91     1611           (FPTN=ERR_HARDWARE,FCG=GH,MID=E,MON='1'B,ERR#=%E$HARDWARE,STCLASS=CONSTANT);
       92     1657        /*E* ERROR: GHE-E$PRTY
       93     1658             MESSAGE: Correctable memory errors detected.
       94     1659                      VALUE(0) counts the correctable errors in the last minute.
       95     1660             Remarks: The EDAC memory controller is capable of correcting single
       96     1661                      bit errors when accessing memory.  It increments a word in
       97     1662                      low memory whenever it does so.  Once per minute, LCP6 logs
       98     1663                      and zeroes this counter if it has been incremented.
       99     1664         */
      100     1665        /* Entry references */
      101     1666    1   DCL AMINUTE UBIN CONSTANT INIT(120);
      102     1667    1   DCL GHE$ERRLOG ENTRY(5) ALTRET;
      103     1668    1   DCL GHS$SET_TMR ENTRY(1) ;
      104     1669
      105     1670        %EJECT;
PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:23   
      106     1671    1           IF G$LOW_MEM.MEM_ERR_CNT ~= GHE_CORRECTABLE_ERRORS

   1671   2 000005  EC80 0000 0000  xsym                 LDB,B6   G$LOW_MEM$
          2 000008  E846 001F                            LDR,R6   31,B6
          2 00000A  6801 0006                            BLZ,R6   s:1673,PREL
          2 00000C  E900 0000 0000  00                   CMR,R6   GHE_CORRECTABLE_ERRORS
          2 00000F  0901 0034                            BE       s:1682,PREL

      107     1672    2           THEN DO;

      108     1673    2              VALUES(0) = G$LOW_MEM.MEM_ERR_CNT - GHE_CORRECTABLE_ERRORS;

   1673   2 000011  E200 0000 0000  00                   SUB,R6   GHE_CORRECTABLE_ERRORS
          2 000014  EF47 0004                            STR,R6   VALUES,AUTO

      109     1674    2              VALUES(1) = G$LOW_MEM.MEM_ERR_CNT;

   1674   2 000016  D846 001F                            LDR,R5   31,B6
          2 000018  DF47 0005                            STR,R5   VALUES+1,AUTO

      110     1675    2              VALUES(2) = 0;

   1675   2 00001A  8747 0006                            CL       VALUES+2,AUTO

      111     1676    2              VALUES(3) = 0;

   1676   2 00001C  8747 0007                            CL       VALUES+3,AUTO

      112     1677    2              CALL GHE$ERRLOG(ERR_PARITY,VALUES,,0,'0'B)

   1677   2 00001E  DBF0 0000                            LAB,B5   0,IMO
          2 000020  CBF0 0000                            LAB,B4   0,IMO
          2 000022  CFC7 0010                            STB,B4   VALUES+12,AUTO
          2 000024  DFC7 000E                            STB,B5   VALUES+10,AUTO
          2 000026  BB80 0000 0000                       LAB,B3   0
          2 000029  BFC7 000C                            STB,B3   VALUES+8,AUTO
          2 00002B  ABC7 0004                            LAB,B2   VALUES,AUTO
PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:24   
          2 00002D  AFC7 000A                            STB,B2   VALUES+6,AUTO
          2 00002F  9B80 0000 0000  01                   LAB,B1   ERR_PARITY
          2 000032  9FC7 0008                            STB,B1   VALUES+4,AUTO
          2 000034  BBC7 0008                            LAB,B3   VALUES+4,AUTO
          2 000036  CBF0 0500                            LAB,B4   1280,IMO
          2 000038  E380 0000 0000  xent                 LNJ,B6   GHE$ERRLOG
          2 00003B       0009                            DC       s:1682,PREL

      113     1678    3              WHENRETURN DO;

      114     1679    3                 GHE_CORRECTABLE_ERRORS = G$LOW_MEM.MEM_ERR_CNT;

   1679   2 00003C  EC80 0000 0000  xsym                 LDB,B6   G$LOW_MEM$
          2 00003F  E846 001F                            LDR,R6   31,B6
          2 000041  EF00 0000 0000  00                   STR,R6   GHE_CORRECTABLE_ERRORS

      115     1680    3                 END;

      116     1681    2              END;

      117     1682    2           IF G$ISA_PFS.DEV THEN DO;

   1682   2 000044  EC80 0000 0000  xsym                 LDB,B6   G$ISA_PFS$
          2 000047  E806                                 LDR,R6   ,B6
          2 000048  6901 002C                            BEZ,R6   s:1701,PREL

      118     1683    2              VALUES(0) = BITBIN(G$ISA_PFS.DEV);

   1683   2 00004A  D806                                 LDR,R5   ,B6
          2 00004B  DF47 0004                            STR,R5   VALUES,AUTO

      119     1684    2              VALUES(1) = 0;

   1684   2 00004D  8747 0005                            CL       VALUES+1,AUTO

      120     1685    2              VALUES(2) = 0;

PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:25   
   1685   2 00004F  8747 0006                            CL       VALUES+2,AUTO

      121     1686    2              VALUES(3) = 0;

   1686   2 000051  8747 0007                            CL       VALUES+3,AUTO

      122     1687        /*E* ERROR: GHE-E$HARDWARE
      123     1688             MESSAGE: Interrupt at level 0 detected.
      124     1689                      VALUE(0) shows the interrupting channel.
      125     1690             Remarks: A normally operating channel cannot interrupt at level
      126     1691                      zero, since the interrupt level is configurable, and
      127     1692                      a value of zero means that interrupts are not to be used.
      128     1693                      Therefore, when a channel does interrupt at level zero,
      129     1694                      it almost always indicates a hardware problem.
      130     1695        */
      131     1696    2              CALL GHE$ERRLOG(ERR_HARDWARE,VALUES,,0,'0'B)

   1696   2 000053  DBF0 0000                            LAB,B5   0,IMO
          2 000055  CBF0 0000                            LAB,B4   0,IMO
          2 000057  CFC7 0010                            STB,B4   VALUES+12,AUTO
          2 000059  DFC7 000E                            STB,B5   VALUES+10,AUTO
          2 00005B  BB80 0000 0000                       LAB,B3   0
          2 00005E  BFC7 000C                            STB,B3   VALUES+8,AUTO
          2 000060  ABC7 0004                            LAB,B2   VALUES,AUTO
          2 000062  AFC7 000A                            STB,B2   VALUES+6,AUTO
          2 000064  9B80 0000 0002  01                   LAB,B1   ERR_HARDWARE
          2 000067  9FC7 0008                            STB,B1   VALUES+4,AUTO
          2 000069  BBC7 0008                            LAB,B3   VALUES+4,AUTO
          2 00006B  CBF0 0500                            LAB,B4   1280,IMO
          2 00006D  E380 0000 0000  xent                 LNJ,B6   GHE$ERRLOG
          2 000070       0005                            DC       s:1701,PREL

      132     1697    3              WHENRETURN DO;

      133     1698    3                 G$ISA_PFS.DEV = '0'B;

   1698   2 000071  EC80 0000 0000  xsym                 LDB,B6   G$ISA_PFS$
PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:26   
          2 000074  8706                                 CL       ,B6

      134     1699    3                 END;

      135     1700    2              END;

      136     1701    1           CALL GHS$SET_TMR (GHE_TIMR);

   1701   2 000075  BB80 0000 0000  03                   LAB,B3   0
          2 000078  CBF0 0100                            LAB,B4   256,IMO
          2 00007A  E380 0000 0000  xent                 LNJ,B6   GHS$SET_TMR
          2 00007D       0001                            DC       s:1703,PREL

      137     1702
      138     1703    1           RETURN;

   1703   2 00007E  C380 0000 0000  xent                 LNJ,B4   X6A_ARET
      139     1704
      140     1705    1   END GHE$TIME;

PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:27   
--  Include file information  --

   GH_SCHD_M.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is referenced.
   KI_CP6.:E05TOU  was found in the system file and is referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure GHE$TIME.
PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:28   

 **** Variables and constants ****

  ****  Section 000  Data  GHE$TIME

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN(16)    r     1 GHE_CORRECTABLE_ERRORS
     1-0-0/w STRC(160)   r     1 GHE_TIMR

  ****  Section 001 RoData GHE$TIME

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     2-0-0/w STRC(32)    r     1 ERR_HARDWARE               0-0-0/w STRC(32)    r     1 ERR_PARITY

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w UBIN(16)    r     1 VALUES(0:3)

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 G$ISA_PFS$                 0-0-0/w PTR         r     1 G$LOW_MEM$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(16)    r     1 G$ISA_PFS                  0-0-0/w STRC(4096)  r     1 G$LOW_MEM
PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:29   


   Procedure GHE$TIME requires 129 words for executable code.
   Procedure GHE$TIME requires 18 words of local(AUTO) storage.

    No errors detected in file GHE$ERRLOG.:E05TSI    .
PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:30   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:31   
          MINI XREF LISTING

ERR_HARDWARE
      1625**DCL      1696<>CALL
ERR_PARITY
      1578**DCL      1677<>CALL
G$ISA_PFS.DEV
      1560**DCL      1682>>IF       1683>>ASSIGN   1698<<ASSIGN
G$ISA_PFS$
      1507**DCL      1559--IMP-PTR  1682>>IF       1683>>ASSIGN   1698>>ASSIGN
G$LOW_MEM.IV.IL$
      1552**DCL      1552--REDEF
G$LOW_MEM.IV.INT.I#00$
      1552**DCL      1552--REDEF
G$LOW_MEM.IV.INT.I#01$
      1552**DCL      1552--REDEF
G$LOW_MEM.IV.INT.I#02$
      1553**DCL      1553--REDEF
G$LOW_MEM.IV.INT.I#03$
      1553**DCL      1553--REDEF
G$LOW_MEM.IV.INT.I#04$
      1553**DCL      1554--REDEF
G$LOW_MEM.IV.INT.I#05$
      1554**DCL      1554--REDEF
G$LOW_MEM.IV.INT.I#61$
      1555**DCL      1555--REDEF
G$LOW_MEM.IV.INT.I#62$
      1555**DCL      1555--REDEF
G$LOW_MEM.IV.INT.I#63$
      1555**DCL      1555--REDEF
G$LOW_MEM.MEM_ERR_CNT
      1517**DCL      1671>>IF       1673>>ASSIGN   1674>>ASSIGN   1679>>ASSIGN
G$LOW_MEM.TV.T#01$
      1540**DCL      1540--REDEF
PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:32   
G$LOW_MEM.TV.T#02$
      1540**DCL      1540--REDEF
G$LOW_MEM.TV.T#03$
      1539**DCL      1539--REDEF
G$LOW_MEM.TV.T#05$
      1539**DCL      1539--REDEF
G$LOW_MEM.TV.T#06$
      1538**DCL      1538--REDEF
G$LOW_MEM.TV.T#07$
      1538**DCL      1538--REDEF
G$LOW_MEM.TV.T#08$
      1537**DCL      1538--REDEF
G$LOW_MEM.TV.T#09$
      1537**DCL      1537--REDEF
G$LOW_MEM.TV.T#10$
      1537**DCL      1537--REDEF
G$LOW_MEM.TV.T#12$
      1536**DCL      1536--REDEF
G$LOW_MEM.TV.T#13$
      1536**DCL      1536--REDEF
G$LOW_MEM.TV.T#14$
      1535**DCL      1535--REDEF
G$LOW_MEM.TV.T#15$
      1535**DCL      1535--REDEF
G$LOW_MEM.TV.T#16$
      1534**DCL      1535--REDEF
G$LOW_MEM.TV.T#17$
      1534**DCL      1534--REDEF
G$LOW_MEM.TV.T#19$
      1533**DCL      1534--REDEF
G$LOW_MEM.TV.T#20$
      1533**DCL      1533--REDEF
G$LOW_MEM.TV.T#21$
      1533**DCL      1533--REDEF
G$LOW_MEM.TV.T#22$
      1532**DCL      1532--REDEF
PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:33   
G$LOW_MEM.TV.T#23$
      1532**DCL      1532--REDEF
G$LOW_MEM.TV.T#24$
      1531**DCL      1532--REDEF
G$LOW_MEM.TV.T#25$
      1531**DCL      1531--REDEF
G$LOW_MEM.TV.T#26$
      1531**DCL      1531--REDEF
G$LOW_MEM.TV.T#27$
      1530**DCL      1530--REDEF
G$LOW_MEM.TV.T#28$
      1530**DCL      1530--REDEF
G$LOW_MEM.TV.T#29$
      1529**DCL      1530--REDEF
G$LOW_MEM.TV.T#30$
      1529**DCL      1529--REDEF
G$LOW_MEM.TV.T#31$
      1529**DCL      1529--REDEF
G$LOW_MEM.TV.T#32$
      1528**DCL      1528--REDEF
G$LOW_MEM.TV.T#33$
      1528**DCL      1528--REDEF
G$LOW_MEM$
      1506**DCL      1515--IMP-PTR  1671>>IF       1673>>ASSIGN   1674>>ASSIGN   1679>>ASSIGN
GHE$ERRLOG
      1667**DCL-ENT  1677--CALL     1696--CALL
GHE$TIME
         6**PROC     1499--DCLINIT
GHE_CORRECTABLE_ERRORS
      1480**DCL      1671>>IF       1673>>ASSIGN   1679<<ASSIGN
GHE_TIMR
      1495**DCL      1701<>CALL
GHE_TIMR.ARG
      1499**DCL      1500--REDEF
GHS$SET_TMR
      1668**DCL-ENT  1701--CALL
PL6.E3A0      #002=GHE$TIME File=GHE$ERRLOG.:E05TSI                              TUE 07/29/97 21:33 Page:34   
VALUES
      1477**DCL      1673<<ASSIGN   1674<<ASSIGN   1675<<ASSIGN   1676<<ASSIGN   1677<>CALL     1683<<ASSIGN
      1684<<ASSIGN   1685<<ASSIGN   1686<<ASSIGN   1696<>CALL
