VERSION E05

PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:1    
        1        1        /*M*     Initializes IOM and mailbox tables */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /**/
        8        8        /*X*/
        9        9        /*P*     NAME:     ITI$IOM
       10       10                 PURPOSE:  ITI$IOM builds and initializes the channel and mailbox
       11       11                           tables for each IOM.          */
       12       12        ITI$IOM: PROC(PTR$)  ALTRET;
       13       13        /**/
       14       14    1   DCL PTR$ PTR;                           /* POINTER TO TIGR TABLE SPACE        */
       15       15        /**/
       16       16        /* INCLUDE FILES */
       17       17        /**/
       18       18        %INCLUDE IT$CMDWD;
       19       26        %INCLUDE IT$IOM;
       20       37        %INCLUDE IT_SUBS_C;
       21      304        %INCLUDE NI_DATA_R;
       22      741        %NI$PARTITION (NAME=IT_PARTITION, STCLASS=SYMREF);
       23      749        %SUB YES = '1'B/*YES*/;
       24      750        %SUB NO = '0'B/*NO*/;
       25      751        /**/
       26      752        /**/
       27      753        /* AUTOMATIC */
       28      754        /**/
       29      755    1   DCL CMD$ PTR;
       30      756    1   DCL IOM$ PTR;
       31      757    1   DCL I UBIN(36);
       32      758    1   DCL J UBIN(36);
       33      759        /**/
       34      760        /*  BASED  */
       35      761        %NI$IOM;
       36      766        %NI$MBX;
       37      785        /**/
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:2    
       38      786        /*  ENTRY DECLARES  */
       39      787        /**/
       40      788    1   DCL ITH$ALLOCATE ENTRY(2) ALTRET;
       41      789        /**/
       42      790        /*  SYMREFS */
       43      791    1   DCL B$DS5$ PTR SYMREF;                  /* COMMANDS                           */
       44      792    1   DCL B$REAL$ PTR SYMREF;
       45      793        %LIST;
       46      794        %INCLUDE HF_DATA_R;
        1+     795        /*M* HF_DATA_R */
        2+     796        /*M* HF_DATA_D - STATIC DATA FOR FAULT HANDLER AND MEMORY EDAC SCAN */
        3+     797        /*T***********************************************************/
        4+     798        /*T*                                                         */
        5+     799        /*T* Copyright (c) Bull HN Information Systems Inc., 1994    */
        6+     800        /*T*                                                         */
        7+     801        /*T***********************************************************/
        8+     802    1   DCL H_FLTCNT(0:22)SBIN SYMREF;DCL H_CPUGATE BIT(72)SYMREF DALIGNED;DCL 1 H_CNNCTMLBX
               802            (0:7)SYMREF,2 * BIT(30),2 RELIEF BIT(1),2 CLEAR
        9+     803    1   BIT(1),2 MAKE BIT(1),2 TIME BIT(1),2 SCR BIT(1),2 PAUSE BIT(1);DCL H_TIME SYMREF
               803            UBIN;DCL H_XDELTA UBIN SYMREF;DCL H_INTMASK BIT(72)
       10+     804    1   SYMREF DALIGNED;DCL H_ENMASK BIT(72)DALIGNED SYMREF;DCL H_DSMASK BIT(72)DALIGNED
               804            SYMREF;DCL 1 H_STOREUNIT(0:15)SYMREF,2 PORT# UBIN
       11+     805    1   (2)UNAL,2 STORE_UNIT# UBIN(2)UNAL,2 * BIT(8),2 FIRST_ADDR UBIN(24)UNAL;DCL H_MAXSU#
               805            UBIN WORD SYMREF;DCL H_MEMOK BIT(1)ALIGNED
       12+     806    1   SYMREF;DCL H_S1000_FLG BIT(1)ALIGNED SYMREF;DCL H_RPM_FLG BIT(1)ALIGNED SYMREF;DCL 1
               806            H_S1000_CONFIG SYMREF,2 REG(0:35)BIT(1);DCL
       13+     807    1   H_RLF_GATE BIT(36)ALIGNED SYMREF;DCL H_FAIL_PORT UBIN ALIGNED SYMREF;DCL H_FAIL_NUM
               807            UBIN ALIGNED SYMREF;DCL H_FAIL_PARK BIT(1)
       14+     808    1   ALIGNED SYMREF;DCL H_RELIEF BIT(1)ALIGNED SYMREF;DCL H_NURSE UBIN ALIGNED SYMREF;DCL
               808            H_NURSE_PARK BIT(1)ALIGNED SYMREF;DCL 1
       15+     809    1   H_CPU_CONFIG(0:3)SYMREF,2 PORT_ASSIGN UBIN(3)UNAL,2 PORT_ENABLE BIT(1),2 INITIALIZE
               809            BIT(1),2 INTERLACE BIT(1),2 SIZE UBIN(3)UNAL;DCL
       16+     810    1   1 H_SCU_CONFIG(0:3)SYMREF DALIGNED,2 MASK_A BIT(9),2 SIZE UBIN(3)UNAL,2 ON_LINE BIT(
               810            4),2 PORT# UBIN(4)UNAL,2 * BIT(1),2 MODE BIT(1),
       17+     811    1   2 NONEXIST_ADDR UBIN(8)UNAL,2 INTERLACE BIT(1),2 LOWER_STORE BIT(1),2
               811            PORT_MASK_LOWER BIT(4),2 MASK_B BIT(9),2 * BIT(12),2
       18+     812    1   CYCLIC_PRIORITY BIT(7),2 * BIT(4),2 PORT_MASK_UPPER BIT(4);DCL H_SCU_BF(0:3)UBIN
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:3    
               812            WORD SYMREF;DCL H_CPU_BF(0:3)UBIN WORD SYMREF;DCL
       19+     813    1   H_PORT_FIRST_ADDR(0:3)UBIN WORD SYMREF;DCL H_MAXPORT# SBIN WORD SYMREF;DCL
               813            H_PORTMASK BIT(72)SYMREF DALIGNED;DCL H_CODE UBIN WORD
       20+     814    1   SYMREF;DCL H_SYSID UBIN WORD SYMREF;DCL H_MODE UBIN WORD SYMREF;DCL H_PORT# UBIN
               814            WORD SYMREF;DCL H_SPROC# UBIN WORD SYMREF;DCL
       21+     815    1   H_SNAP SBIN WORD SYMREF;DCL H_SAVE_SS UBIN WORD SYMREF;DCL H_MAKE_IN_PROGRESS BIT(1)
               815            SYMREF;DCL H_MIXED_MP SBIN SYMREF READONLY;DCL
       22+     816    1   H_MIXED_INT(0:6)SBIN SYMREF;DCL H_MIXED_TRO(0:6)SBIN SYMREF;DCL H_MIXED_FLT(0:6)SBIN
               816            SYMREF;DCL H_MIXED_SSX(0:2)SBIN SYMREF;DCL
       23+     817    1   H_MIXED_SSS(0:2)SBIN SYMREF;DCL H_MIXED_RMIR(0:2)SBIN SYMREF;DCL H_DUMMY UBIN SYMREF
               817            ;DCL H_RSW1(0:7)BIT(36)SYMREF ALIGNED;DCL H_RSW2
       24+     818    1   (0:7)BIT(36)SYMREF ALIGNED;DCL H_HRMODE(0:6)BIT(36)SYMREF READONLY ALIGNED;DCL
               818            H_HRMODE_MASK(0:6)BIT(36)SYMREF READONLY ALIGNED;DCL
       25+     819    1   H_LUFREG(0:6)BIT(36)SYMREF ALIGNED;DCL H_LUFREG_MASK(0:6)BIT(36)SYMREF READONLY
               819            ALIGNED;DCL H_RELOAD_CACHE UBIN WORD SYMREF;DCL
       26+     820    1   H_RELOAD_MODE UBIN WORD SYMREF;DCL 1 H_CNCTEVX SBIN SYMREF;DCL 1 H_CNCTEVBF(0:15)BIT
               820            (72)SYMREF DALIGNED;DCL H_CNCTEVGATE BIT(72)
       27+     821    1   SYMREF DALIGNED;DCL 1 H_EDACHIST(0:63)SYMREF,2 SYND BIT(18),2 CT UBIN(18)UNAL;DCL
               821            H_EDACUTS(0:63)UBIN WORD SYMREF;DCL H_FLTREG_MASK
       28+     822    1   (0:6)BIT(36)SYMREF READONLY ALIGNED;DCL H_EXTFLTREG_MASK(0:6)BIT(36)SYMREF READONLY
               822            ALIGNED;DCL H_FLTREG(0:5)UBIN SYMREF;DCL
       29+     823    1   H_PERF_DATA(0:63)UBIN BYTE CALIGNED SYMREF READONLY;DCL 1 H_DPS8000_CPU_CONF_REG
               823            DALIGNED SYMREF,2 * BIT(1),2 PORT_A_ENABLED BIT(1),
       30+     824    1   2 PORT_B_ENABLED BIT(1),2 PORT_A_INIT BIT(1),2 PORT_B_INIT BIT(1),2 ADDRESS_SPLIT
               824            UBIN(4)UNAL,2 * BIT(63);DCL 1
       31+     825    1   H_DPS8000_SCU_CONF_REG DALIGNED SYMREF,2 * BIT(28),2 PORTS(0:7)BIT(1),2 * BIT(36);
               825            DCL 1 H_DPS8000_SCU_INFO(0:1)SYMREF ALIGNED,2
       32+     826    1   LOWER_BOUND UBIN HALF UNAL,2 UPPER_BOUND UBIN HALF UNAL,2 PAGES UBIN HALF UNAL,2
               826            SCU_STATUS,3 NOT_CONFIG BIT(1),3 REL_BIT BIT(1),3
       33+     827    1   REL_IN_PROGRESS BIT(1),3 RET_IN_PROGRESS BIT(1),3 LOW_MEM BIT(1),3 * BIT(13);DCL
               827            H_DPS8000_CI_TABLE(0:3)UBIN SYMREF;DCL
       34+     828    1   H_DPS8000_CONFIG_NAME CHAR(12)SYMREF;DCL 1 H_RPM_CONNECT_TABLE DALIGNED SYMREF,2
               828            ENTRI(0:23)UNAL,3 PORT# UBIN(3)UNAL,3 VALID BIT(1),
       35+     829    1   3 MBZ BIT(1),3 * BIT(1),3 IMXID UBIN(2)UNAL,3 SYSID UBIN(4)UNAL;DCL H_MAX_PERF UBIN
               829            WORD SYMREF READONLY;DCL H_PERF(0:7)UBIN WORD
       36+     830    1   SYMREF;DCL EPU_MASK(0:3)BIT(36)ALIGNED SYMREF;DCL H_TIME_CORR BIT(72)DALIGNED SYMREF
               830            ;DCL HW_PERF(0:6)UBIN WORD SYMREF READONLY;DCL
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:4    
       37+     831    1   HW_PERF_SUB(0:6)UBIN WORD SYMREF READONLY;DCL HW_TYPE UBIN WORD SYMREF;DCL
               831            HW_PTB_UNITS SBIN WORD SYMREF;DCL HW_IOPTP_UNITS SBIN
       38+     832    1   WORD SYMREF;DCL HW_WSQ0PT BIT(1)ALIGNED SYMREF;DCL HW_LOAD_FW BIT(1)ALIGNED SYMREF;
               832            DCL HW_TIME_LEGAL BIT(1)ALIGNED SYMREF;DCL
       39+     833    1   HW_SECT_PT BIT(1)ALIGNED SYMREF;DCL HW_FRAG_PT BIT(1)ALIGNED SYMREF;DCL HW_IOP BIT(1
               833            )ALIGNED SYMREF;DCL HW_EXT_STATUS BIT(1)ALIGNED
       40+     834    1   SYMREF;DCL HW_SMART_CACHE BIT(1)ALIGNED SYMREF;DCL HW_ES BIT(1)ALIGNED SYMREF;DCL
               834            HW_EI BIT(1)ALIGNED SYMREF;DCL HW_PROG_SCU BIT(1)
       41+     835    1   ALIGNED SYMREF;DCL HW_EDAC BIT(1)ALIGNED SYMREF;DCL HW_FLTIC_OK BIT(1)ALIGNED SYMREF
               835            ;DCL HW_NORM_CLOCK BIT(1)ALIGNED SYMREF;DCL
       42+     836    1   HW_CHANS UBIN WORD ALIGNED SYMREF;DCL HW_IMX BIT(1)ALIGNED SYMREF;
       47      837        %PLIST;
       48      838        /**/
       49      839        %EJECT;
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:5    
       50      840        /*D*     NAME:     ITI$IOM
       51      841                 PURPOSE:  ITI$IOM builds and initializes tables which depend
       52      842                           on the number of IOMs, e.g. channel tables and
       53      843                           mailboxes.
       54      844        *
       55      845                 INPUT:    PTR$ - pointer to next available location in TIGR table
       56      846                                  area - parameter
       57      847                           Command table - built in DS5 by ITC$CHECK_IOM
       58      848        *
       59      849                 OUTPUT:   Initialized tables
       60      850        *
       61      851                 DESCRIPTION:  ITI$IOM initializes NI_IOMS,NI_CHANS and NI$FQ,
       62      852                           then builds the NI$IOM and NI$CHT tables in the TIGR
       63      853                           table area, The mailboxes are then built in low real
       64      854                           memory.                       */
       65      855        /**/
       66      856    1           CMD$ = B$DS5$;
       67      857        /**/
       68      858    1           CMD$ = PINCRW (CMD$,SIZEW(IT$CMDWD));
       69      859        /**/
       70      860    1           NI_IOMS = NI_IOMS + 1;
       71      861        /**/
       72      862    1           IOM$ = PTR$;
       73      863    1           CALL ITH$ALLOCATE(PTR$,SIZEW(NI$IOM)) ALTRET(ITI$IOM_ERR);
       74      864        /**/
       75      865    1           NI$IOM$(NI_IOMS-1) = IOM$;
       76      866        /**/
       77      867    1           IOM$ -> NI$IOM = NO;
       78      868    1           IOM$ -> NI$IOM.GATE = YES;
       79      869    1         IF HW_IMX THEN
       80      870    1            IOM$->NI$IOM.MBX$ = ADDR(NIL);
       81      871    1         ELSE
       82      872    1            IOM$ -> NI$IOM.MBX$ = PINCRW(B$REAL$,BITBIN(%MBX_BASE) +
       83      873    1             ((NI_IOMS-1) * BITBIN(%MBX_OFFSET)));
       84      874    1           IOM$ -> NI$IOM.IOM# = NI_IOMS-1;
       85      875    1           IOM$ -> NI$IOM.ADDRESS = CMD$ -> IT$IOM.PORT#;
       86      876    1           IT_PARTITION.IOCHAN((NI_IOMS-1)*%N_MAXCHANS) = CMD$->IT$IOM.DOWN#;
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:6    
       87      877        /**/
       88      878    2         IF H_RPM_FLG THEN DO; /* Set up connect table */
       89      879    2            H_RPM_CONNECT_TABLE.ENTRI.PORT#(NI_IOMS-1) = CMD$->IT$IOM.PORT#;
       90      880    2            RETURN; /* Thats all for an IMX */
       91      881    2            END;
       92      882        /**/
       93      883    2           DO J = 0 TO HW_CHANS + 5;      /* CLEAR MBXS AND BUFFS               */
       94      884    2              IOM$ -> NI$IOM.MBX$ -> NI$MBX(J) = NO;
       95      885    2              END;
       96      886        /**/
       97      887    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.LPW.ADDRESS(1) = BITBIN(%MBX_BASE) +
       98      888    1             ((NI_IOMS-1) * BITBIN(%MBX_OFFSET)) + 6;
       99      889    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.LPW.CONTROL(1) = '04'O;
      100      890                                                /* SET UP FAULT   CHANNEL             */
      101      891    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.LPW.ADDRESS(6) = BITBIN(%MBX_BASE) +
      102      892    1             ((NI_IOMS-1) * BITBIN(%MBX_OFFSET)) + 26;
      103      893    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.LPW.CONTROL(6) = '04'O;
      104      894                                                /* SET UP SPECIAL INTERRUPT CHAN      */
      105      895        /**/
      106      896    1           IOM$ -> NI$IOM.FLTBUF = BITBIN(%MBX_BASE) +
      107      897    1             ((NI_IOMS-1) * BITBIN(%MBX_OFFSET)) +
      108      898    1             (SIZEW(NI$MBX(0)) * HW_CHANS);
      109      899    1           IOM$ -> NI$IOM.SPECBUF = BITBIN(%MBX_BASE) +
      110      900    1             ((NI_IOMS-1) * BITBIN(%MBX_OFFSET)) +
      111      901    1             (SIZEW(NI$MBX(0)) * HW_CHANS) +
      112      902    1             %FLTBUF_SIZE;
      113      903        /**/
      114      904    2           DO J = IOM$ -> NI$IOM.FLTBUF TO IOM$ -> NI$IOM.FLTBUF + %FLTBUF_SIZE-1;
      115      905    2              PINCRW ( B$REAL$,J) -> NI$MBX.LPW(0) = '400000000000'O;
      116      906    2              END;
      117      907        /**/
      118      908    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.DCW.ADDRESS(1) = IOM$ -> NI$IOM.FLTBUF;
      119      909    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.DCW.TALLY(1) = 4;
      120      910        /**/
      121      911    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.SCW(1) =
      122      912    1             IOM$ -> NI$IOM.MBX$ -> NI$MBX.DCW(1);
      123      913        /**/
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:7    
      124      914    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.DCW.ADDRESS(6) = IOM$ -> NI$IOM.SPECBUF;
      125      915    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.DCW.TALLY(6) = 11;
      126      916        /**/
      127      917    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.SCW(6) =
      128      918    1             IOM$ -> NI$IOM.MBX$ -> NI$MBX.DCW(6);
      129      919        /**/
      130      920    1           RETURN;
      131      921    1   ITI$IOM_ERR:
      132      922    1           ALTRETURN;
      133      923    1   END;

PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:8    
--  Include file information  --

   HF_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   IT_SUBS_C.:E05TOU  is referenced.
   IT$IOM.:E05TOU  cannot be made into a system file and is referenced.
   IT$CMDWD.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure ITI$IOM.

   Procedure ITI$IOM requires 148 words for executable code.
   Procedure ITI$IOM requires 10 words of local(AUTO) storage.

    No errors detected in file ITI$IOM.:E05TSI    .

PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:9    

 Object Unit name= ITI$IOM                                    File name= ITI$IOM.:E05TOU
 UTS= JUL 29 '97 23:04:43.64 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none   148    224  ITI$IOM
    1  RoData even  none     1      1  ITI$IOM

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes    yes     yes      Std        1  ITI$IOM

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       2 ITH$ALLOCATE
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AUTO_1
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:10   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     N$DCT$$                               N$FQ$                                 NI$FQ$
     NI$IBUF$                              NI$IOM$                               NI$RP$
     NI_IOMS                               IT_PARTITION                          B$DS5$
     B$REAL$                               H_RPM_FLG                             H_RPM_CONNECT_TABLE
     HW_CHANS                              HW_IMX                                B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:11   


        1        1        /*M*     Initializes IOM and mailbox tables */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /**/
        8        8        /*X*/
        9        9        /*P*     NAME:     ITI$IOM
       10       10                 PURPOSE:  ITI$IOM builds and initializes the channel and mailbox
       11       11                           tables for each IOM.          */
       12       12        ITI$IOM: PROC(PTR$)  ALTRET;

     12  0 000000   000000 700200 xent  ITI$IOM      TSX0  ! X66_AUTO_1
         0 000001   000012 000001                    ZERO    10,1

       13       13        /**/
       14       14    1   DCL PTR$ PTR;                           /* POINTER TO TIGR TABLE SPACE        */
       15       15        /**/
       16       16        /* INCLUDE FILES */
       17       17        /**/
       18       18        %INCLUDE IT$CMDWD;
       19       26        %INCLUDE IT$IOM;
       20       37        %INCLUDE IT_SUBS_C;
       21      304        %INCLUDE NI_DATA_R;
       22      741        %NI$PARTITION (NAME=IT_PARTITION, STCLASS=SYMREF);
       23      749        %SUB YES = '1'B/*YES*/;
       24      750        %SUB NO = '0'B/*NO*/;
       25      751        /**/
       26      752        /**/
       27      753        /* AUTOMATIC */
       28      754        /**/
       29      755    1   DCL CMD$ PTR;
       30      756    1   DCL IOM$ PTR;
       31      757    1   DCL I UBIN(36);
       32      758    1   DCL J UBIN(36);
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:12   
       33      759        /**/
       34      760        /*  BASED  */
       35      761        %NI$IOM;
       36      766        %NI$MBX;
       37      785        /**/
       38      786        /*  ENTRY DECLARES  */
       39      787        /**/
       40      788    1   DCL ITH$ALLOCATE ENTRY(2) ALTRET;
       41      789        /**/
       42      790        /*  SYMREFS */
       43      791    1   DCL B$DS5$ PTR SYMREF;                  /* COMMANDS                           */
       44      792    1   DCL B$REAL$ PTR SYMREF;
       45      793        %LIST;
       46      794        %INCLUDE HF_DATA_R;
        1+     795        /*M* HF_DATA_R */
        2+     796        /*M* HF_DATA_D - STATIC DATA FOR FAULT HANDLER AND MEMORY EDAC SCAN */
        3+     797        /*T***********************************************************/
        4+     798        /*T*                                                         */
        5+     799        /*T* Copyright (c) Bull HN Information Systems Inc., 1994    */
        6+     800        /*T*                                                         */
        7+     801        /*T***********************************************************/
        8+     802    1  DCL H_FLTCNT(0:22)SBIN SYMREF;DCL H_CPUGATE BIT(72)SYMREF DALIGNED;DCL 1 H_CNNCTMLBX
               802            (0:7)SYMREF,2 * BIT(30),2 RELIEF BIT(1),2 CLEAR
        9+     803    1   BIT(1),2 MAKE BIT(1),2 TIME BIT(1),2 SCR BIT(1),2 PAUSE BIT(1);DCL H_TIME SYMREF
               803            UBIN;DCL H_XDELTA UBIN SYMREF;DCL H_INTMASK BIT(72)
       10+     804    1   SYMREF DALIGNED;DCL H_ENMASK BIT(72)DALIGNED SYMREF;DCL H_DSMASK BIT(72)DALIGNED
               804            SYMREF;DCL 1 H_STOREUNIT(0:15)SYMREF,2 PORT# UBIN
       11+     805    1   (2)UNAL,2 STORE_UNIT# UBIN(2)UNAL,2 * BIT(8),2 FIRST_ADDR UBIN(24)UNAL;DCL H_MAXSU#
               805            UBIN WORD SYMREF;DCL H_MEMOK BIT(1)ALIGNED
       12+     806    1  SYMREF;DCL H_S1000_FLG BIT(1)ALIGNED SYMREF;DCL H_RPM_FLG BIT(1)ALIGNED SYMREF;DCL 1
               806            H_S1000_CONFIG SYMREF,2 REG(0:35)BIT(1);DCL
       13+     807    1   H_RLF_GATE BIT(36)ALIGNED SYMREF;DCL H_FAIL_PORT UBIN ALIGNED SYMREF;DCL H_FAIL_NUM
               807            UBIN ALIGNED SYMREF;DCL H_FAIL_PARK BIT(1)
       14+     808    1  ALIGNED SYMREF;DCL H_RELIEF BIT(1)ALIGNED SYMREF;DCL H_NURSE UBIN ALIGNED SYMREF;DCL
               808            H_NURSE_PARK BIT(1)ALIGNED SYMREF;DCL 1
       15+     809    1   H_CPU_CONFIG(0:3)SYMREF,2 PORT_ASSIGN UBIN(3)UNAL,2 PORT_ENABLE BIT(1),2 INITIALIZE
               809            BIT(1),2 INTERLACE BIT(1),2 SIZE UBIN(3)UNAL;DCL
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:13   
       16+     810    1  1 H_SCU_CONFIG(0:3)SYMREF DALIGNED,2 MASK_A BIT(9),2 SIZE UBIN(3)UNAL,2 ON_LINE BIT(
               810            4),2 PORT# UBIN(4)UNAL,2 * BIT(1),2 MODE BIT(1),
       17+     811    1   2 NONEXIST_ADDR UBIN(8)UNAL,2 INTERLACE BIT(1),2 LOWER_STORE BIT(1),2
               811            PORT_MASK_LOWER BIT(4),2 MASK_B BIT(9),2 * BIT(12),2
       18+     812    1   CYCLIC_PRIORITY BIT(7),2 * BIT(4),2 PORT_MASK_UPPER BIT(4);DCL H_SCU_BF(0:3)UBIN
               812            WORD SYMREF;DCL H_CPU_BF(0:3)UBIN WORD SYMREF;DCL
       19+     813    1   H_PORT_FIRST_ADDR(0:3)UBIN WORD SYMREF;DCL H_MAXPORT# SBIN WORD SYMREF;DCL
               813            H_PORTMASK BIT(72)SYMREF DALIGNED;DCL H_CODE UBIN WORD
       20+     814    1   SYMREF;DCL H_SYSID UBIN WORD SYMREF;DCL H_MODE UBIN WORD SYMREF;DCL H_PORT# UBIN
               814            WORD SYMREF;DCL H_SPROC# UBIN WORD SYMREF;DCL
       21+     815    1  H_SNAP SBIN WORD SYMREF;DCL H_SAVE_SS UBIN WORD SYMREF;DCL H_MAKE_IN_PROGRESS BIT(1)
               815            SYMREF;DCL H_MIXED_MP SBIN SYMREF READONLY;DCL
       22+     816    1  H_MIXED_INT(0:6)SBIN SYMREF;DCL H_MIXED_TRO(0:6)SBIN SYMREF;DCL H_MIXED_FLT(0:6)SBIN
               816            SYMREF;DCL H_MIXED_SSX(0:2)SBIN SYMREF;DCL
       23+     817    1  H_MIXED_SSS(0:2)SBIN SYMREF;DCL H_MIXED_RMIR(0:2)SBIN SYMREF;DCL H_DUMMY UBIN SYMREF
               817            ;DCL H_RSW1(0:7)BIT(36)SYMREF ALIGNED;DCL H_RSW2
       24+     818    1   (0:7)BIT(36)SYMREF ALIGNED;DCL H_HRMODE(0:6)BIT(36)SYMREF READONLY ALIGNED;DCL
               818            H_HRMODE_MASK(0:6)BIT(36)SYMREF READONLY ALIGNED;DCL
       25+     819    1   H_LUFREG(0:6)BIT(36)SYMREF ALIGNED;DCL H_LUFREG_MASK(0:6)BIT(36)SYMREF READONLY
               819            ALIGNED;DCL H_RELOAD_CACHE UBIN WORD SYMREF;DCL
       26+     820    1  H_RELOAD_MODE UBIN WORD SYMREF;DCL 1 H_CNCTEVX SBIN SYMREF;DCL 1 H_CNCTEVBF(0:15)BIT
               820            (72)SYMREF DALIGNED;DCL H_CNCTEVGATE BIT(72)
       27+     821    1   SYMREF DALIGNED;DCL 1 H_EDACHIST(0:63)SYMREF,2 SYND BIT(18),2 CT UBIN(18)UNAL;DCL
               821            H_EDACUTS(0:63)UBIN WORD SYMREF;DCL H_FLTREG_MASK
       28+     822    1   (0:6)BIT(36)SYMREF READONLY ALIGNED;DCL H_EXTFLTREG_MASK(0:6)BIT(36)SYMREF READONLY
               822            ALIGNED;DCL H_FLTREG(0:5)UBIN SYMREF;DCL
       29+     823    1   H_PERF_DATA(0:63)UBIN BYTE CALIGNED SYMREF READONLY;DCL 1 H_DPS8000_CPU_CONF_REG
               823            DALIGNED SYMREF,2 * BIT(1),2 PORT_A_ENABLED BIT(1),
       30+     824    1   2 PORT_B_ENABLED BIT(1),2 PORT_A_INIT BIT(1),2 PORT_B_INIT BIT(1),2 ADDRESS_SPLIT
               824            UBIN(4)UNAL,2 * BIT(63);DCL 1
       31+     825    1   H_DPS8000_SCU_CONF_REG DALIGNED SYMREF,2 * BIT(28),2 PORTS(0:7)BIT(1),2 * BIT(36);
               825            DCL 1 H_DPS8000_SCU_INFO(0:1)SYMREF ALIGNED,2
       32+     826    1   LOWER_BOUND UBIN HALF UNAL,2 UPPER_BOUND UBIN HALF UNAL,2 PAGES UBIN HALF UNAL,2
               826            SCU_STATUS,3 NOT_CONFIG BIT(1),3 REL_BIT BIT(1),3
       33+     827    1   REL_IN_PROGRESS BIT(1),3 RET_IN_PROGRESS BIT(1),3 LOW_MEM BIT(1),3 * BIT(13);DCL
               827            H_DPS8000_CI_TABLE(0:3)UBIN SYMREF;DCL
       34+     828    1   H_DPS8000_CONFIG_NAME CHAR(12)SYMREF;DCL 1 H_RPM_CONNECT_TABLE DALIGNED SYMREF,2
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:14   
               828            ENTRI(0:23)UNAL,3 PORT# UBIN(3)UNAL,3 VALID BIT(1),
       35+     829    1   3 MBZ BIT(1),3 * BIT(1),3 IMXID UBIN(2)UNAL,3 SYSID UBIN(4)UNAL;DCL H_MAX_PERF UBIN
               829            WORD SYMREF READONLY;DCL H_PERF(0:7)UBIN WORD
       36+     830    1  SYMREF;DCL EPU_MASK(0:3)BIT(36)ALIGNED SYMREF;DCL H_TIME_CORR BIT(72)DALIGNED SYMREF
               830            ;DCL HW_PERF(0:6)UBIN WORD SYMREF READONLY;DCL
       37+     831    1   HW_PERF_SUB(0:6)UBIN WORD SYMREF READONLY;DCL HW_TYPE UBIN WORD SYMREF;DCL
               831            HW_PTB_UNITS SBIN WORD SYMREF;DCL HW_IOPTP_UNITS SBIN
       38+     832    1   WORD SYMREF;DCL HW_WSQ0PT BIT(1)ALIGNED SYMREF;DCL HW_LOAD_FW BIT(1)ALIGNED SYMREF;
               832            DCL HW_TIME_LEGAL BIT(1)ALIGNED SYMREF;DCL
       39+     833    1  HW_SECT_PT BIT(1)ALIGNED SYMREF;DCL HW_FRAG_PT BIT(1)ALIGNED SYMREF;DCL HW_IOP BIT(1
               833            )ALIGNED SYMREF;DCL HW_EXT_STATUS BIT(1)ALIGNED
       40+     834    1   SYMREF;DCL HW_SMART_CACHE BIT(1)ALIGNED SYMREF;DCL HW_ES BIT(1)ALIGNED SYMREF;DCL
               834            HW_EI BIT(1)ALIGNED SYMREF;DCL HW_PROG_SCU BIT(1)
       41+     835    1  ALIGNED SYMREF;DCL HW_EDAC BIT(1)ALIGNED SYMREF;DCL HW_FLTIC_OK BIT(1)ALIGNED SYMREF
               835            ;DCL HW_NORM_CLOCK BIT(1)ALIGNED SYMREF;DCL
       42+     836    1   HW_CHANS UBIN WORD ALIGNED SYMREF;DCL HW_IMX BIT(1)ALIGNED SYMREF;
       47      837        %PLIST;
       48      838        /**/
       49      839        %EJECT;
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:15   
       50      840        /*D*     NAME:     ITI$IOM
       51      841                 PURPOSE:  ITI$IOM builds and initializes tables which depend
       52      842                           on the number of IOMs, e.g. channel tables and
       53      843                           mailboxes.
       54      844        *
       55      845                 INPUT:    PTR$ - pointer to next available location in TIGR table
       56      846                                  area - parameter
       57      847                           Command table - built in DS5 by ITC$CHECK_IOM
       58      848        *
       59      849                 OUTPUT:   Initialized tables
       60      850        *
       61      851                 DESCRIPTION:  ITI$IOM initializes NI_IOMS,NI_CHANS and NI$FQ,
       62      852                           then builds the NI$IOM and NI$CHT tables in the TIGR
       63      853                           table area, The mailboxes are then built in low real
       64      854                           memory.                       */
       65      855        /**/
       66      856    1           CMD$ = B$DS5$;

    856  0 000002   000000 236000 xsym               LDQ     B$DS5$
         0 000003   200004 756100                    STQ     CMD$,,AUTO

       67      857        /**/
       68      858    1           CMD$ = PINCRW (CMD$,SIZEW(IT$CMDWD));

    858  0 000004   000001 036003                    ADLQ    1,DU
         0 000005   200004 756100                    STQ     CMD$,,AUTO

       69      859        /**/
       70      860    1           NI_IOMS = NI_IOMS + 1;

    860  0 000006   000000 054000 xsym               AOS     NI_IOMS

       71      861        /**/
       72      862    1           IOM$ = PTR$;

    862  0 000007   200003 470500                    LDP0    @PTR$,,AUTO
         0 000010   000000 236100                    LDQ     0,,PR0
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:16   
         0 000011   200005 756100                    STQ     IOM$,,AUTO

       73      863    1           CALL ITH$ALLOCATE(PTR$,SIZEW(NI$IOM)) ALTRET(ITI$IOM_ERR);

    863  0 000012   000000 236000 1                  LDQ     0
         0 000013   200003 235100                    LDA     @PTR$,,AUTO
         0 000014   200010 757100                    STAQ    J+1,,AUTO
         0 000015   200010 630500                    EPPR0   J+1,,AUTO
         0 000016   000020 631400 xsym               EPPR1   B_VECTNIL+16
         0 000017   000000 701000 xent               TSX1    ITH$ALLOCATE
         0 000020   000223 702000 0                  TSX2    ITI$IOM_ERR

       74      864        /**/
       75      865    1           NI$IOM$(NI_IOMS-1) = IOM$;

    865  0 000021   200005 236100                    LDQ     IOM$,,AUTO
         0 000022   000000 720000 xsym               LXL0    NI_IOMS
         0 000023   777777 756010 xsym               STQ     NI$IOM$-1,X0

       76      866        /**/
       77      867    1           IOM$ -> NI$IOM = NO;

    867  0 000024   200005 470500                    LDP0    IOM$,,AUTO
         0 000025   000100 100400                    MLR     fill='000'O
         0 000026   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         0 000027   000000 000034                    ADSC9   0,,PR0                   cn=0,n=28

       78      868    1           IOM$ -> NI$IOM.GATE = YES;

    868  0 000030   400000 235003                    LDA     -131072,DU
         0 000031   000000 236003                    LDQ     0,DU
         0 000032   000000 755100                    STA     0,,PR0
         0 000033   000001 756100                    STQ     1,,PR0

       79      869    1         IF HW_IMX THEN

    869  0 000034   000000 234000 xsym               SZN     HW_IMX
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:17   
         0 000035   000041 605000 0                  TPL     s:872

       80      870    1            IOM$->NI$IOM.MBX$ = ADDR(NIL);

    870  0 000036   000001 236000 xsym               LDQ     B_VECTNIL+1
         0 000037   000002 756100                    STQ     2,,PR0
         0 000040   000046 710000 0                  TRA     s:874

       81      871    1         ELSE
       82      872    1            IOM$ -> NI$IOM.MBX$ = PINCRW(B$REAL$,BITBIN(%MBX_BASE) +

    872  0 000041   000000 236000 xsym               LDQ     NI_IOMS
         0 000042   001400 402003                    MPY     768,DU
         0 000043   001400 036003                    ADLQ    768,DU
         0 000044   000000 036000 xsym               ADLQ    B$REAL$
         0 000045   000002 756100                    STQ     2,,PR0

       83      873    1             ((NI_IOMS-1) * BITBIN(%MBX_OFFSET)));
       84      874    1           IOM$ -> NI$IOM.IOM# = NI_IOMS-1;

    874  0 000046   000000 236000 xsym               LDQ     NI_IOMS
         0 000047   000001 136007                    SBLQ    1,DL
         0 000050   000030 736000                    QLS     24
         0 000051   000003 676100                    ERQ     3,,PR0
         0 000052   000700 376003                    ANQ     448,DU
         0 000053   000003 656100                    ERSQ    3,,PR0

       85      875    1           IOM$ -> NI$IOM.ADDRESS = CMD$ -> IT$IOM.PORT#;

    875  0 000054   200004 471500                    LDP1    CMD$,,AUTO
         0 000055   100000 236100                    LDQ     0,,PR1
         0 000056   000003 676100                    ERQ     3,,PR0
         0 000057   000007 376007                    ANQ     7,DL
         0 000060   000003 656100                    ERSQ    3,,PR0

       86      876    1           IT_PARTITION.IOCHAN((NI_IOMS-1)*%N_MAXCHANS) = CMD$->IT$IOM.DOWN#;

PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:18   
    876  0 000061   000000 235000 xsym               LDA     NI_IOMS
         0 000062   000007 735000                    ALS     7
         0 000063   000065 605000 0                  TPL     s:876+4
         0 000064   000044 035003                    ADLA    36,DU
         0 000065   003005 060500                    CSL     bolr='003'O
         0 000066   100001 000001                    BDSC    1,,PR1                   by=0,bit=0,n=1
         0 000067   000006 270001 xsym               BDSC    IT_PARTITION+6,A         by=1,bit=7,n=1

       87      877        /**/
       88      878    2         IF H_RPM_FLG THEN DO; /* Set up connect table */

    878  0 000070   000000 234000 xsym               SZN     H_RPM_FLG
         0 000071   000103 605000 0                  TPL     s:883

       89      879    2            H_RPM_CONNECT_TABLE.ENTRI.PORT#(NI_IOMS-1) = CMD$->IT$IOM.PORT#;

    879  0 000072   000000 236000 xsym               LDQ     NI_IOMS
         0 000073   000014 402007                    MPY     12,DL
         0 000074   000000 116003                    CMPQ    0,DU
         0 000075   000077 605000 0                  TPL     s:879+5
         0 000076   000044 036003                    ADLQ    36,DU
         0 000077   003006 061500                    CSR     bolr='003'O
         0 000100   100000 000044                    BDSC    0,,PR1                   by=0,bit=0,n=36
         0 000101   777777 460003 xsym               BDSC    H_RPM_CONNECT_TABLE-1,Q  by=2,bit=6,n=3

       90      880    2            RETURN; /* Thats all for an IMX */

    880  0 000102   000000 702200 xent               TSX2  ! X66_ARET

       91      881    2            END;
       92      882        /**/
       93      883    2           DO J = 0 TO HW_CHANS + 5;      /* CLEAR MBXS AND BUFFS               */

    883  0 000103   200007 450100                    STZ     J,,AUTO
         0 000104   000117 710000 0                  TRA     s:885+3

       94      884    2              IOM$ -> NI$IOM.MBX$ -> NI$MBX(J) = NO;
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:19   

    884  0 000105   200005 470500                    LDP0    IOM$,,AUTO
         0 000106   000002 471500                    LDP1    2,,PR0
         0 000107   200007 235100                    LDA     J,,AUTO
         0 000110   000004 735000                    ALS     4
         0 000111   000105 100400                    MLR     fill='000'O
         0 000112   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         0 000113   100000 000020                    ADSC9   0,A,PR1                  cn=0,n=16

       95      885    2              END;

    885  0 000114   200007 236100                    LDQ     J,,AUTO
         0 000115   000001 036007                    ADLQ    1,DL
         0 000116   200007 756100                    STQ     J,,AUTO
         0 000117   000000 236000 xsym               LDQ     HW_CHANS
         0 000120   000005 036007                    ADLQ    5,DL
         0 000121   200007 116100                    CMPQ    J,,AUTO
         0 000122   000105 603000 0                  TRC     s:884

       96      886        /**/
       97      887    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.LPW.ADDRESS(1) = BITBIN(%MBX_BASE) +

    887  0 000123   000002 471500                    LDP1    2,,PR0
         0 000124   000000 236000 xsym               LDQ     NI_IOMS
         0 000125   001400 402007                    MPY     768,DL
         0 000126   001406 620006                    EAX0    774,QL
         0 000127   100004 740100                    STX0    4,,PR1

       98      888    1             ((NI_IOMS-1) * BITBIN(%MBX_OFFSET)) + 6;
       99      889    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.LPW.CONTROL(1) = '04'O;

    889  0 000130   000002 471500                    LDP1    2,,PR0
         0 000131   040000 236007                    LDQ     16384,DL
         0 000132   100004 752104                    STCQ    4,'04'O,PR1

      100      890                                                /* SET UP FAULT   CHANNEL             */
      101      891    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.LPW.ADDRESS(6) = BITBIN(%MBX_BASE) +
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:20   

    891  0 000133   000002 471500                    LDP1    2,,PR0
         0 000134   000000 236000 xsym               LDQ     NI_IOMS
         0 000135   001400 402007                    MPY     768,DL
         0 000136   001432 621006                    EAX1    794,QL
         0 000137   100030 741100                    STX1    24,,PR1

      102      892    1             ((NI_IOMS-1) * BITBIN(%MBX_OFFSET)) + 26;
      103      893    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.LPW.CONTROL(6) = '04'O;

    893  0 000140   000002 471500                    LDP1    2,,PR0
         0 000141   040000 236007                    LDQ     16384,DL
         0 000142   100030 752104                    STCQ    24,'04'O,PR1

      104      894                                                /* SET UP SPECIAL INTERRUPT CHAN      */
      105      895        /**/
      106      896    1           IOM$ -> NI$IOM.FLTBUF = BITBIN(%MBX_BASE) +

    896  0 000143   000000 236000 xsym               LDQ     NI_IOMS
         0 000144   000300 402007                    MPY     192,DL
         0 000145   000000 036000 xsym               ADLQ    HW_CHANS
         0 000146   000002 736000                    QLS     2
         0 000147   001400 622006                    EAX2    768,QL
         0 000150   000004 742100                    STX2    4,,PR0

      107      897    1             ((NI_IOMS-1) * BITBIN(%MBX_OFFSET)) +
      108      898    1             (SIZEW(NI$MBX(0)) * HW_CHANS);
      109      899    1           IOM$ -> NI$IOM.SPECBUF = BITBIN(%MBX_BASE) +

    899  0 000151   000000 236000 xsym               LDQ     NI_IOMS
         0 000152   000300 402007                    MPY     192,DL
         0 000153   000000 036000 xsym               ADLQ    HW_CHANS
         0 000154   000002 736000                    QLS     2
         0 000155   001404 623006                    EAX3    772,QL
         0 000156   000004 443100                    SXL3    4,,PR0

      110      900    1             ((NI_IOMS-1) * BITBIN(%MBX_OFFSET)) +
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:21   
      111      901    1             (SIZEW(NI$MBX(0)) * HW_CHANS) +
      112      902    1             %FLTBUF_SIZE;
      113      903        /**/
      114      904    2           DO J = IOM$ -> NI$IOM.FLTBUF TO IOM$ -> NI$IOM.FLTBUF + %FLTBUF_SIZE-1;

    904  0 000157   000004 236100                    LDQ     4,,PR0
         0 000160   000022 772000                    QRL     18
         0 000161   200007 756100                    STQ     J,,AUTO
         0 000162   000172 710000 0                  TRA     s:906+3

      115      905    2              PINCRW ( B$REAL$,J) -> NI$MBX.LPW(0) = '400000000000'O;

    905  0 000163   000030 236000 xsym               LDQ     B_VECTNIL+24
         0 000164   000000 470400 xsym               LDP0    B$REAL$
         0 000165   200007 720100                    LXL0    J,,AUTO
         0 000166   000000 756110                    STQ     0,X0,PR0

      116      906    2              END;

    906  0 000167   200007 235100                    LDA     J,,AUTO
         0 000170   000001 035007                    ADLA    1,DL
         0 000171   200007 755100                    STA     J,,AUTO
         0 000172   200005 470500                    LDP0    IOM$,,AUTO
         0 000173   000004 236100                    LDQ     4,,PR0
         0 000174   000022 772000                    QRL     18
         0 000175   000003 036007                    ADLQ    3,DL
         0 000176   200007 116100                    CMPQ    J,,AUTO
         0 000177   000163 603000 0                  TRC     s:905

      117      907        /**/
      118      908    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.DCW.ADDRESS(1) = IOM$ -> NI$IOM.FLTBUF;

    908  0 000200   000002 471500                    LDP1    2,,PR0
         0 000201   000004 220100                    LDX0    4,,PR0
         0 000202   100007 740100                    STX0    7,,PR1

      119      909    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.DCW.TALLY(1) = 4;
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:22   

    909  0 000203   000002 471500                    LDP1    2,,PR0
         0 000204   000004 236007                    LDQ     4,DL
         0 000205   100007 752103                    STCQ    7,'03'O,PR1

      120      910        /**/
      121      911    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.SCW(1) =

    911  0 000206   000002 471500                    LDP1    2,,PR0
         0 000207   100007 236100                    LDQ     7,,PR1
         0 000210   100006 756100                    STQ     6,,PR1

      122      912    1             IOM$ -> NI$IOM.MBX$ -> NI$MBX.DCW(1);
      123      913        /**/
      124      914    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.DCW.ADDRESS(6) = IOM$ -> NI$IOM.SPECBUF;

    914  0 000211   000002 471500                    LDP1    2,,PR0
         0 000212   000004 720100                    LXL0    4,,PR0
         0 000213   100033 740100                    STX0    27,,PR1

      125      915    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.DCW.TALLY(6) = 11;

    915  0 000214   000002 471500                    LDP1    2,,PR0
         0 000215   000013 236007                    LDQ     11,DL
         0 000216   100033 752103                    STCQ    27,'03'O,PR1

      126      916        /**/
      127      917    1           IOM$ -> NI$IOM.MBX$ -> NI$MBX.SCW(6) =

    917  0 000217   000002 471500                    LDP1    2,,PR0
         0 000220   100033 236100                    LDQ     27,,PR1
         0 000221   100032 756100                    STQ     26,,PR1

      128      918    1             IOM$ -> NI$IOM.MBX$ -> NI$MBX.DCW(6);
      129      919        /**/
      130      920    1           RETURN;

PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:23   
    920  0 000222   000000 702200 xent               TSX2  ! X66_ARET

      131      921    1   ITI$IOM_ERR:
      132      922    1           ALTRETURN;

    922  0 000223   000000 702200 xent  ITI$IOM_ERR  TSX2  ! X66_AALT

(unnamed)
 Sect OctLoc
   1     000   000011 006000                                                    ....
      133      923    1   END;

PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:24   
--  Include file information  --

   HF_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   IT_SUBS_C.:E05TOU  is referenced.
   IT$IOM.:E05TOU  cannot be made into a system file and is referenced.
   IT$CMDWD.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure ITI$IOM.
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:25   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @PTR$                      4-0-0/w PTR         r     1 CMD$
     5-0-0/w PTR         r     1 IOM$                       7-0-0/w UBIN        r     1 J
    *0-0-0/w PTR         r     1 PTR$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$DS5$                     0-0-0/w PTR         r     1 B$REAL$
     0-0-0/w UBIN        r     1 HW_CHANS                   0-0-0/w BIT         r     1 HW_IMX
     0-0-0/d STRC(288)   r     1 H_RPM_CONNECT_TABLE        0-0-0/w BIT         r     1 H_RPM_FLG
     0-0-0/w STRC(1800)  r     1 IT_PARTITION               0-0-0/w PTR         r     1 N$DCT$$
     0-0-0/w PTR         r     1 N$FQ$                      0-0-0/w PTR         r     1 NI$FQ$
     0-0-0/w PTR         r     1 NI$IBUF$
     0-0-0/w PTR         r     1 NI$IOM$(0:3)
     0-0-0/w PTR         r     1 NI$RP$                     0-0-0/w SBIN        r     1 NI_IOMS

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN        r     1 IT$CMDWD                   0-0-0/w STRC(72)    r     1 IT$IOM
     0-0-0/w STRC(252)   r     1 NI$IOM                     0-0-0/d STRC(144)   r     1 NI$MBX(0:63)


   Procedure ITI$IOM requires 148 words for executable code.
   Procedure ITI$IOM requires 10 words of local(AUTO) storage.
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:26   

    No errors detected in file ITI$IOM.:E05TSI    .
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:27   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:28   
          MINI XREF LISTING

B$DS5$
       791**DCL       856>>ASSIGN
B$REAL$
       792**DCL       872>>ASSIGN    905>>ASSIGN
CMD$
       755**DCL       856<<ASSIGN    858<<ASSIGN    858>>ASSIGN    875>>ASSIGN    876>>ASSIGN    879>>ASSIGN
HW_CHANS
       835**DCL       883>>DOINDEX   896>>ASSIGN    899>>ASSIGN
HW_IMX
       836**DCL       869>>IF
H_RPM_CONNECT_TABLE.ENTRI.PORT#
       828**DCL       879<<ASSIGN
H_RPM_FLG
       806**DCL       878>>IF
IOM$
       756**DCL       862<<ASSIGN    865>>ASSIGN    867>>ASSIGN    868>>ASSIGN    870>>ASSIGN    872>>ASSIGN
       874>>ASSIGN    875>>ASSIGN    884>>ASSIGN    887>>ASSIGN    889>>ASSIGN    891>>ASSIGN    893>>ASSIGN
       896>>ASSIGN    899>>ASSIGN    904>>DOINDEX   904>>DOINDEX   908>>ASSIGN    908>>ASSIGN    909>>ASSIGN
       911>>ASSIGN    911>>ASSIGN    914>>ASSIGN    914>>ASSIGN    915>>ASSIGN    917>>ASSIGN    917>>ASSIGN
IT$CMDWD
        25**DCL       858--ASSIGN
IT$IOM.DOWN#
        36**DCL       876>>ASSIGN
IT$IOM.PORT#
        35**DCL       875>>ASSIGN    879>>ASSIGN
ITH$ALLOCATE
       788**DCL-ENT   863--CALL
ITI$IOM_ERR
       922**LABEL     863--CALLALT
IT_PARTITION.IOCHAN
       747**DCL       876<<ASSIGN
J
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:29   
       758**DCL       883<<DOINDEX   884>>ASSIGN    904<<DOINDEX   905>>ASSIGN
N$DCT$$
       602**DCL       736--IMP-PTR
N$FQ$
       602**DCL       737--IMP-PTR
N$REQ_INIT.BUFADDR
       621**DCL       622--REDEF     622--REDEF
N$REQ_INIT.DLA.DRELADDR
       613**DCL       613--REDEF
N$REQ_INIT.DVE.EOMCHAR
       650**DCL       651--REDEF
N$REQ_INIT.EAINFO
       644**DCL       644--REDEF
N$REQ_INIT.EAINFOX
       644**DCL       645--REDEF
N$REQ_INIT.EVNTINFO
       645**DCL       645--REDEF
N$REQ_INIT.STATUS
       626**DCL       632--REDEF
NI$FQ$
       662**DCL       738--IMP-PTR
NI$IBUF$
       662**DCL       738--IMP-PTR
NI$IMXMBX_INIT.PAGED_BASE
       672**DCL       673--REDEF     673--REDEF
NI$IMXMBX_INIT.SIZE
       674**DCL       674--REDEF
NI$IOM
       762**DCL       863--CALL      867<<ASSIGN
NI$IOM.ADDRESS
       763**DCL       875<<ASSIGN
NI$IOM.FLTBUF
       763**DCL       896<<ASSIGN    904>>DOINDEX   904>>DOINDEX   908>>ASSIGN
NI$IOM.GATE
       762**DCL       868<<ASSIGN
NI$IOM.IOM#
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:30   
       762**DCL       874<<ASSIGN
NI$IOM.MBX$
       762**DCL       870<<ASSIGN    872<<ASSIGN    884>>ASSIGN    887>>ASSIGN    889>>ASSIGN    891>>ASSIGN
       893>>ASSIGN    908>>ASSIGN    909>>ASSIGN    911>>ASSIGN    911>>ASSIGN    914>>ASSIGN    915>>ASSIGN
       917>>ASSIGN    917>>ASSIGN
NI$IOM.SPECBUF
       764**DCL       899<<ASSIGN    914>>ASSIGN
NI$IOM$
       684**DCL       865<<ASSIGN
NI$MBX
       777**DCL       884<<ASSIGN    896--ASSIGN    899--ASSIGN
NI$MBX.DCW
       781**DCL       911>>ASSIGN    917>>ASSIGN
NI$MBX.DCW.ADDRESS
       781**DCL       908<<ASSIGN    914<<ASSIGN
NI$MBX.DCW.CONTROL.AE
       782**DCL       782--REDEF
NI$MBX.DCW.TALLY
       783**DCL       909<<ASSIGN    915<<ASSIGN
NI$MBX.LPW
       777**DCL       905<<ASSIGN
NI$MBX.LPW.ADDRESS
       777**DCL       887<<ASSIGN    891<<ASSIGN
NI$MBX.LPW.CONTROL
       777**DCL       889<<ASSIGN    893<<ASSIGN
NI$MBX.LPW.CONTROL.AE
       778**DCL       778--REDEF
NI$MBX.SCW
       780**DCL       911<<ASSIGN    917<<ASSIGN
NI$REQ_INIT.DCW
       696**DCL       699--REDEF
NI$REQ_INIT.DCW.TALLY
       697**DCL       697--REDEF
NI$REQ_INIT.IDCW.EXTA
       699**DCL       699--REDEF
NI$REQ_INIT.PCW
PL6.E3A0      #001=ITI$IOM File=ITI$IOM.:E05TSI                                  TUE 07/29/97 23:04 Page:31   
       701**DCL       705--REDEF
NI$REQ_INIT.SEEK
       706**DCL       707--REDEF     708--REDEF
NI$RP$
       710**DCL       740--IMP-PTR
NI_IOMS
       714**DCL       860<<ASSIGN    860>>ASSIGN    865>>ASSIGN    872>>ASSIGN    874>>ASSIGN    876>>ASSIGN
       879>>ASSIGN    887>>ASSIGN    891>>ASSIGN    896>>ASSIGN    899>>ASSIGN
NI_MBX_INIT.DCW.CONTROL.AE
       732**DCL       732--REDEF
NI_MBX_INIT.LPW.CONTROL.AE
       728**DCL       728--REDEF
PTR$
        14**DCL        12--PROC      862>>ASSIGN    863<>CALL
