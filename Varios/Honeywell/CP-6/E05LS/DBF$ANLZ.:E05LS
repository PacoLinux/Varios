VERSION E05

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:1    
        1        1        /*M* DBF$ANLZ - ANLZ FPRG */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DMR */
        8        8
        9        9        DBF$ANLZ: PROC MAIN;
       10       10
       11       11        /*D*   NAME:  DBF$ANLZ
       12       12               DESCRIPTION:
       13       13                  DBF$ANLZ is run on the FEP to give ANLZ access to the
       14       14               memory of a running FEP.
       15       15        */
       16       16
       17       17        %INCLUDE LCP_6;
       18     4296        %INCLUDE G$BOBCAT_M;
       19     4316        %INCLUDE DB_PERR_C;
       20     4334        %INCLUDE DB_MACRO_M;
       21     4365        %INCLUDE GH_HARDWARE_M;
       22     4463        %INCLUDE GH_SCHD_M;
       23     4607        %INCLUDE GH_SCHD_E;
       24     4703        %INCLUDE GH_IOFNC_E;
       25     4772        %INCLUDE GM_VIRTUAL_E;
       26     4982        %INCLUDE G_JIT_M;
       27     5247        %INCLUDE KH$IO;
       28     5494        %INCLUDE KH$CHN;
       29     5616
       30     5617    1   DCL DBF$TRAP ENTRY ASYNC;
       31     5618    1   DCL DBF$XCON ENTRY ASYNC;
       32     5619    1   DCL KHI$IO_INPLCTBYT ENTRY(2) ALTRET;
       33     5620    1   DCL KHI$SLAVE ENTRY;
       34     5621    1   DCL GHH$LEV ENTRY(1);
       35     5622
       36     5623        %DB$MAP_EQUS;
       37     5633        %G$JIT_E;
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:2    
       38     5695
       39     5696    1   DCL M$HOST DCB;
       40     5697
       41     5698        %FPT_OPEN (DCB=M$HOST,
       42     5699                  ASN=DEVICE,
       43     5700                  RES='HO');
       44     5728        %FPT_READ (DCB=M$HOST,
       45     5729                  BUF=REQUEST,
       46     5730                  WAIT=YES);
       47     5756        %FPT_WRITE (DCB=M$HOST,BP=YES);
       48     5780
       49     5781        %FPT_SPRIV (FPTN=SET_SPCLMM,
       50     5782                    PRIV=SPCLMM,
       51     5783                    AUTH=YES,PRC=YES);
       52     5806    1   DCL SPCLMM BIT(32) CONSTANT INIT(%G_PR_SPCLMM#);
       53     5807        %FPT_SPRIV (FPTN=SET_MSYS,
       54     5808                    PRIV=MSYS,
       55     5809                    AUTH=YES,PRC=NO);
       56     5832    1   DCL MSYS BIT(32) CONSTANT INIT(%G_PR_MSYS#);
       57     5833        %FPT_CVM (USERSEG=USEG,
       58     5834                 FROMSEG=FSEG,
       59     5835                 PAGES=256);
       60     5859        %FPT_GDS (FPTN=FPT_GDS,PAGES=256,RESULTS=CACHESEG) ;
       61     5883        %FPT_FDS (FPTN=FPT_FDS,PAGES=256,RESULTS=CACHESEG) ;
       62     5905        %VLP_SEGMENT (FPTN=USEG,PAGES=256);
       63     5926        %VLP_SEGMENT (FPTN=FSEG,PAGES=256);
       64     5947        %VLP_SEGMENT (FPTN=CACHESEG,PAGES=256) ;
       65     5968        %GH_LEV (FPTN=LEV_INHIB,TYPE=INHIBIT,LEVEL=4);
       66     5990        %GH_LEV (FPTN=LEV_SUSPEND,TYPE=SUSPEND);
       67     6012
       68     6013        %FPT_TRAP (FPTN=FPT_TRAP,
       69     6014                   NTC=TRAPCOND);
       70     6029        %VLP_TRAP_CONDITIONS (FPTN=TRAPCOND,
       71     6030                              TRAP$=DBF$TRAP,
       72     6031                              MCL=G_ENT_TRAP#,
       73     6032                              MEM_PROT=G_ENT_TRAP#,
       74     6033                              INT_UR=G_ENT_TRAP#,
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:3    
       75     6034                              PROG_ERR=G_ENT_TRAP#,
       76     6035                              EXT_UR=G_ENT_TRAP#);
       77     6191
       78     6192        %FPT_XCON (XCON$=DBF$XCON);
       79     6232        %FPT_RUE (FPTN=FPT_RUE);
       80     6255        %FPT_WAIT ( FPTN = WAIT1 , UTYPE = SEC , UNITS = SEC1 ) ;
       81     6279    1   DCL SEC1 UBIN STATIC INIT ( 1 ) ;
       82     6280
       83     6281    1   DCL MSGBUF CHAR(300) STATIC;
       84     6282    1   DCL MSGBUF$ PTR CONSTANT INIT(ADDR(MSGBUF));
       85     6283    1   DCL SVUSR UBIN STATIC INIT(0) ;
       86     6284    1   DCL SVPGS UBIN STATIC INIT(0) ;
       87     6285    1   DCL SVDOMAIN UBIN STATIC INIT(0) ;
       88     6286    1   DCL SVBASE$ PTR STATIC INIT(ADDR(NIL)) ;
       89     6287    1   DCL SVTOP$ PTR STATIC INIT(ADDR(NIL)) ;
       90     6288    1   DCL USECACHE UBIN BYTE;
       91     6289    1   DCL CACHEIT UBIN BYTE;
       92     6290    1   DCL CACHEPGS UBIN WORD;
       93     6291    1   DCL PG(0:255) UBIN BASED ALIGNED ;
       94     6292
       95     6293    1   DCL MUAIS UBIN;
       96     6294    1   DCL USRT$ PTR;
       97     6295    1   DCL L6ADR UBIN(32);
       98     6296    1   DCL SEGOFFSET UBIN;
       99     6297    1   DCL DOM UBIN;
      100     6298    1   DCL SYSID SBIN;
      101     6299    1   DCL SIZE UBIN;
      102     6300    1   DCL I UBIN;
      103     6301    1   DCL MEM$ PTR;
      104     6302    1   DCL TMP$ PTR;
      105     6303    1   DCL CBSIZE UBIN;
      106     6304    1   DCL CBASE CHAR(CBSIZE) BASED(MEM$);
      107     6305
      108     6306    1   DCL CHT$ PTR;
      109     6307    1   DCL LOCHAN UBIN;
      110     6308    1   DCL HICHAN UBIN;
      111     6309    1   DCL CHN$ PTR;
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:4    
      112     6310        %KH$CHN (NAME=KH$CHN,STCLASS="BASED(CHN$)");
      113     6434        %KH$IO (FPTN=KH$IO,STCLASS=STATIC,FNC=%GH#IO_INPLCTBYT);
      114     6548
      115     6549    1   DCL NEEDREPLY BIT(1);
      116     6550        %VLP_ERRCODE (FPTN=DB_ERROR,STCLASS="STATIC SYMDEF");
      117     6596    1   DCL DB_TRAPRETURN REMEMBER STATIC SYMDEF;
      118     6597
      119     6598    1   DCL G$DS3$ PTR SYMREF READONLY;
      120     6599    1   DCL G$DS4$ PTR SYMREF READONLY;
      121     6600    1   DCL G$ISR3$ PTR SYMREF READONLY ;
      122     6601    1   DCL G$BOBCATPTR UBIN(32) CONSTANT INIT(%GM_BOBCAT_BASE);
      123     6602    1   DCL G$BOBCAT$ REDEF G$BOBCATPTR PTR;
      124     6603    1   DCL G$TCB$ PTR SYMREF READONLY;
      125     6604    1   DCL NILPTR UBIN(32) CONSTANT INIT(0);
      126     6605    1   DCL NIL$ REDEF NILPTR PTR;
      127     6606
      128     6607        %DB$MAP_REQUEST (FPTN=REQUEST,STCLASS=STATIC);
      129     6611        %DB$MAP_REPLY (FPTN=REPLY,STCLASS="BASED(MSGBUF$)",DATASIZE=ARS);
      130     6666
      131     6667        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS="BASED(G$DS4$)");
      132     6680        %G$USER (FPTN="G$USER(0:0)",STCLASS="BASED(USRT$)");
      133     6691
      134     6692        %G$TCB;
      135     6713        %G$EXCFR (FPTN=G$ALT);
      136     7095        %SUB G$ALT=G$TCB$->G$TCB.ALT$->G$ALT;
      137     7096
      138     7097        %VLP_ERRCODE (FPTN=NOUSER,FCG=DB,MID=F,ERR#=%E$DB_NO_USER);
      139     7143        %VLP_ERRCODE (FPTN=BADCHAN,FCG=DB,MID=F,ERR#=%E$DB_BAD_CHAN);
      140     7189        %VLP_ERRCODE (FPTN=IONAK,FCG=DB,MID=F,ERR#=%E$DB_IONAK);
      141     7235        %VLP_ERRCODE (FPTN=NOSEG,FCG=DB,MID=F,ERR#=%E$DB_NOSEG);
      142     7281
      143     7282        %G$ASDT (STCLASS="BASED(G$DS3$)");
      144     7311
      145     7312        %EQU K4=1024*4;
      146     7313        %EQU K64=1024*64;
      147     7314
      148     7315        %SUB FOREVER="WHILE('1'B)";
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:5    
      149     7316
      150     7317        %EJECT;
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:6    
      151     7318
      152     7319    1           DB_ERROR = '0'B;
      153     7320    2           CALL M$SPRIV(SET_SPCLMM) WHENALTRETURN DO; END;
      154     7321        /* OPEN PATH TO HOST */
      155     7322
      156     7323    1           CALL M$OPEN(FPT_OPEN);
      157     7324
      158     7325    1           CALL M$XCON(FPT_XCON);
      159     7326
      160     7327        /* MAP ON TO BOBCAT DATA */
      161     7328
      162     7329    1           USEG.BASE$=G$DS4$;
      163     7330    1           FSEG.BASE$=G$BOBCAT$;
      164     7331    2           CALL M$CVM(FPT_CVM) WHENRETURN DO;
      165     7332    2              MUAIS=G$BOBCAT.MUIS;
      166     7333    2              USRT$=G$BOBCAT.USRT$;
      167     7334    2              LOCHAN=G$BOBCAT.CHNLOW;
      168     7335    2              HICHAN=G$BOBCAT.CHNHI;
      169     7336    2              CHT$=PINCRW(G$BOBCAT.CHNLOW$,-LOCHAN*SIZEW(KH$CHN));
      170     7337    2              END;
      171     7338    2           WHENALTRETURN DO;
      172     7339    2              DB_ERROR = G$ALT.TRLR.ERR;
      173     7340    2              END;
      174     7341
      175     7342    1           USEG.BASE$=G$DS3$;
      176     7343    1           REMEMBER TRAP_RETURN IN DB_TRAPRETURN;
      177     7344    1           CALL M$TRAP(FPT_TRAP);
      178     7345    1           NEEDREPLY='0'B;
      179     7346
      180     7347    1   TRAP_RETURN:
      181     7348    2           IF NEEDREPLY THEN DO;
      182     7349    2              REPLY.ERROR=DB_ERROR;
      183     7350    2              DB_ERROR = '0'B;
      184     7351    2              REPLY.CONT=0;
      185     7352    2              CALL SENDREPLY;
      186     7353    2              END;
      187     7354
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:7    
      188     7355    2           DO FOREVER;
      189     7356
      190     7357    3              CALL M$READ(FPT_READ) WHENRETURN DO;
      191     7358    3                 NEEDREPLY='1'B;
      192     7359    3                 IF DB_ERROR THEN GOTO TRAP_RETURN;
      193     7360    4                 DO CASE(REQUEST.DOMAYN);
      194     7361    4                  CASE(%DB#DOMAIN_LCT);
      195     7362    4                    CALL GETLCTS;
      196     7363    4                  CASE(%DB#DOMAIN_RUE);
      197     7364    4                    CALL RUE;
      198     7365    4                  CASE(ELSE);
      199     7366    4                    CALL MAP;
      200     7367    4                  END;
      201     7368    3                 NEEDREPLY='0'B;
      202     7369    3                 END;
      203     7370    3              WHENALTRETURN DO;
      204     7371    3                 CALL M$XXX;
      205     7372    3                 END;
      206     7373
      207     7374    2              END;
      208     7375
      209     7376        %EJECT;
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:8    
      210     7377
      211     7378    1   MAP:    PROC;
      212     7379
      213     7380    2           L6ADR=REQUEST.L6ADR;
      214     7381    3           IF L6ADR>%K64 THEN DO;
      215     7382    3              SEGOFFSET=MOD(L6ADR,%K64);
      216     7383    3              END;
      217     7384    3           ELSE DO;
      218     7385    3              SEGOFFSET=MOD(L6ADR,%K4);
      219     7386    3              END;
      220     7387    2           DOM=REQUEST.DOMAYN;
      221     7388    2           SYSID=REQUEST.SYSID;
      222     7389    2           SIZE=REQUEST.SIZE;
      223     7390    2           USECACHE = REQUEST.USECACHE ;
      224     7391    2           CACHEIT = REQUEST.CACHEIT ;
      225     7392    2           CACHEPGS = REQUEST.CACHEPGS ;
      226     7393
      227     7394    3           IF DOM=%DB#DOMAIN_MONUSR THEN DO;
      228     7395    3              IF SYSID=0 THEN
      229     7396    3                 DOM=%DB#DOMAIN_MON;
      230     7397    3              ELSE
      231     7398    3                 DOM=%DB#DOMAIN_USR;
      232     7399    3              END;
      233     7400
      234     7401    3           DO CASE(DOM);
      235     7402    3            CASE(%DB#DOMAIN_MON);
      236     7403    3              FPT_CVM.V.TYPE=%G_CVM_MON#;
      237     7404    3            CASE(%DB#DOMAIN_MCL);
      238     7405                                                /* ERROR                              */
      239     7406    3            CASE(%DB#DOMAIN_USR);
      240     7407    3              FPT_CVM.V.TYPE=%G_CVM_USER#;
      241     7408    4              IF SYSID<0 THEN DO;
      242     7409    4                 FPT_CVM.V.USERID=-SYSID;
      243     7410    4                 END;
      244     7411    4              ELSE DO;
      245     7412    5                 DO I=1 TO MUAIS;
      246     7413    5                    IF G$USER.SYSID(I)=SYSID THEN EXIT;
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:9    
      247     7414    5                    END;
      248     7415    4                 FPT_CVM.V.USERID=I;
      249     7416    4                 END;
      250     7417    4              IF FPT_CVM.V.USERID>MUAIS OR G$USER.US(FPT_CVM.V.USERID)=%GH_NULL THEN DO
              7417                       ;
      251     7418    4                 REPLY='0'B;
      252     7419    4                 REPLY.ERROR=NOUSER;
      253     7420        /*E*          ERROR:  DBF-E$DB_NO_USER
      254     7421                      MESSAGE:  No such user.
      255     7422        */
      256     7423    4                 CALL SENDREPLY;
      257     7424    4                 RETURN;
      258     7425    4                 END;
      259     7426    3            CASE(%DB#DOMAIN_REAL);
      260     7427    3              FPT_CVM.V.TYPE=%G_CVM_PHYSICAL#;
      261     7428    3              SEGOFFSET=MOD(L6ADR,256);
      262     7429    3              FSEG.PAGES=L6ADR/256;
      263     7430    3            CASE(%DB#DOMAIN_ASDT);
      264     7431    3              FPT_CVM.V.TYPE=%G_CVM_PHYSICAL#;
      265     7432    3              FSEG.PAGES=REQUEST.SYSID/256;
      266     7433    3              CALL M$CVM(FPT_CVM) ALTRET(NOSEG);
      267     7434    3              TMP$=PINCRW(G$DS3$,MOD(REQUEST.SYSID,256));
      268     7435    3              I=L6ADR/%K4;
      269     7436    3              IF I>15 THEN I=I/16+15;
      270     7437    4              IF NOT G$ASDT.DESC.V(I) THEN DO;
      271     7438        /*E*          ERROR: DBF-E$DB_NOSEG
      272     7439                      MESSAGE:  Address not available
      273     7440        */
      274     7441    4   NOSEG:        REPLY='0'B;
      275     7442    4                 REPLY.ERROR=NOSEG;
      276     7443    4                 CALL SENDREPLY;
      277     7444    4                 RETURN;
      278     7445    4                 END;
      279     7446    3              IF (SIZE/2+SEGOFFSET-1)>G$ASDT.DESC.SIZE(I)*256
      280     7447    3              THEN SIZE=2*((G$ASDT.DESC.SIZE(I)+1)*256-SEGOFFSET);
      281     7448    3              FSEG.PAGES=G$ASDT.DESC.BASE(I);
      282     7449    3            END;
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:10   
      283     7450
      284     7451    2           IF FPT_CVM.V.TYPE~=%G_CVM_PHYSICAL#
      285     7452    3           THEN DO ;
      286     7453    3              FSEG.BASE$=PINCRW(NIL$,L6ADR-SEGOFFSET);
      287     7454    3              IF CACHEIT=1 THEN
      288     7455    3                 FSEG.PAGES = CACHEPGS ;
      289     7456    3              END ;
      290     7457    2           TMP$ = PINCRW(NIL$,L6ADR) ;
      291     7458    2           IF USECACHE=1 AND CACHEIT=0 AND SVUSR = I AND SVDOMAIN = DOM AND
      292     7459    2             SVPGS > 0 AND
      293     7460    2             TMP$ >= SVBASE$ AND PINCRW(TMP$,SIZE) < SVTOP$ THEN ;
      294     7461    3           ELSE DO ;
      295     7462    4              IF SVPGS > 0 THEN DO ;
      296     7463    4                 CACHESEG.BASE$ = G$ISR3$ ;
      297     7464    4                 FPT_FDS.V.PAGES = SVPGS ;
      298     7465    4                 CALL M$FDS ( FPT_FDS ) ;
      299     7466    4                 SVPGS = 0 ;
      300     7467    4                 END ;
      301     7468    4              CALL M$CVM(FPT_CVM) WHENALTRETURN DO;
      302     7469    4                 REPLY='0'B;
      303     7470    4                 REPLY.ERROR=G$ALT.TRLR.ERR;
      304     7471    4                 CALL SENDREPLY;
      305     7472    4                 RETURN;
      306     7473    4                 END;
      307     7474    4              IF CACHEIT=1 THEN DO ;
      308     7475    4                 SVBASE$ = PINCRW(NIL$,L6ADR-SEGOFFSET) ;
      309     7476    4                 SVDOMAIN = DOM ;
      310     7477    4                 SVUSR = I ;
      311     7478    4                 SVPGS = USEG.PAGES ;
      312     7479    4                 FPT_GDS.V.PAGES = SVPGS ;
      313     7480    4                 CACHESEG.BASE$ = G$ISR3$ ;
      314     7481    5                 CALL M$GDS ( FPT_GDS ) WHENRETURN DO ;
      315     7482    5                    CALL M$WAIT ( WAIT1 ) ;
      316     7483    5                    TMP$ = G$DS3$ ;
      317     7484    5                    MEM$ = G$ISR3$ ;
      318     7485    5                    CALL M$SYS;
      319     7486    5                    CALL GHH$LEV ( LEV_INHIB ) ;
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:11   
      320     7487    6                    DO I = 0 TO SVPGS-1 ;
      321     7488    6                       PINCRW(MEM$,256*I)->PG = PINCRW(TMP$,256*I)->PG ;
      322     7489    6                       END ;
      323     7490    5                    CALL GHH$LEV ( LEV_SUSPEND ) ;
      324     7491    5                    USECACHE = 1 ;
      325     7492    5                    CALL KHI$SLAVE;
      326     7493    5                    SVTOP$ = PINCRW(SVBASE$,USEG.PAGES*256) ;
      327     7494    5                    END ;
      328     7495    5                 WHENALTRETURN DO ;
      329     7496    5                    USECACHE = 0 ;
      330     7497    5                    SVUSR = 0 ;
      331     7498    5                    SVPGS = 0 ;
      332     7499    5                    SVBASE$ = ADDR(NIL) ;
      333     7500    5                    SVDOMAIN = 0 ;
      334     7501    5                    END ;
      335     7502    4                 END ;
      336     7503    3              END;
      337     7504    2           IF USECACHE=1 AND SVPGS>0 THEN
      338     7505    2              MEM$ = PINCRW(G$ISR3$,SEGOFFSET);
      339     7506    2           ELSE
      340     7507    2              MEM$ = PINCRW(G$DS3$,SEGOFFSET);
      341     7508    2           IF (SIZE/2+SEGOFFSET+255)/256>USEG.PAGES
      342     7509    2           THEN SIZE=2*(USEG.PAGES*256-SEGOFFSET);
      343     7510
      344     7511    3           IF SIZE=0 THEN DO;         /* HAVE TO SEND SOMETHING, HOST IS WAITING */
      345     7512    3              REPLY = '0'B;
      346     7513    3              CALL SENDREPLY;
      347     7514    3              END;
      348     7515
      349     7516    3           DO WHILE(SIZE>0);
      350     7517    3              CBSIZE=MINIMUM(SIZE,256);
      351     7518    3              REPLY.ARS=CBSIZE;
      352     7519    3              REPLY.L6ADR=L6ADR;
      353     7520    3              L6ADR=L6ADR+CBSIZE/2;
      354     7521    3              SIZE=SIZE-CBSIZE;
      355     7522    3              IF SIZE=0 THEN
      356     7523    3                 REPLY.CONT=0;
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:12   
      357     7524    3              ELSE
      358     7525    3                 REPLY.CONT=1;
      359     7526    3              REPLY.ERROR='0'B;
      360     7527    3              REPLY.DATA=CBASE;
      361     7528    3              MEM$=PINCRW(MEM$,CBSIZE/2);
      362     7529    3              CALL SENDREPLY;
      363     7530    3              END;
      364     7531    2           RETURN;
      365     7532
      366     7533    2   END MAP;
      367     7534
      368     7535        %EJECT;
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:13   
      369     7536    1   RUE:    PROC;
      370     7537
      371     7538    2           REPLY.ARS = 0;
      372     7539    2           REPLY = '0'B;
      373     7540    2           FPT_RUE.V.EVENT = REQUEST.L6ADR;
      374     7541    3           IF REQUEST.SYSID < 0 THEN DO;
      375     7542    3              I = -REQUEST.SYSID;
      376     7543    3              IF I > MUAIS THEN
      377     7544    3                 I = 32767;
      378     7545    3              ELSE
      379     7546    3                 I = G$USER.SYSID(I);
      380     7547    3              FPT_RUE.V.USER = I;
      381     7548    3              END;
      382     7549    2           ELSE
      383     7550    2              FPT_RUE.V.USER = REQUEST.SYSID;
      384     7551    3           CALL M$SPRIV(SET_MSYS) WHENALTRETURN DO; END;
      385     7552    3           CALL M$RUE(FPT_RUE) WHENALTRETURN DO;
      386     7553    3              REPLY.ERROR = G$ALT.TRLR.ERR;
      387     7554    3              END;
      388     7555    3           CALL M$SPRIV(SET_SPCLMM) WHENALTRETURN DO; END;
      389     7556    2           CALL SENDREPLY;
      390     7557
      391     7558    2   END RUE;
      392     7559
      393     7560    1   GETLCTS: PROC;
      394     7561
      395     7562    2   DCL CHAN UBIN;
      396     7563    2   DCL LCTADR UBIN;
      397     7564
      398     7565    2           CHAN=REQUEST.L6ADR;
      399     7566    2           REPLY='0'B;
      400     7567    2           REPLY.L6ADR=CHAN;
      401     7568    2           LCTADR=0;
      402     7569    2           CHN$=PINCRW(CHT$,SIZEW(KH$CHN)*(CHAN/128));
      403     7570
      404     7571    3           IF CHAN<LOCHAN OR CHAN>HICHAN THEN DO;
      405     7572    3              REPLY.ERROR=BADCHAN;
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:14   
      406     7573
      407     7574        /*E*       ERROR:  DBF-E$DB_BAD_CHAN;
      408     7575                   MESSAGE: Illicit channel number.
      409     7576        */
      410     7577
      411     7578    3              END;
      412     7579    3           ELSE DO;
      413     7580    4              IF KH$CHN.DVCID = '2408'X THEN DO;
      414     7581                      /*
      415     7582                         dont do coupler channels.  It doesn't work
      416     7583                      */
      417     7584    4                 GOTO IONAK;
      418     7585    4                 END;
      419     7586    3              CALL M$SYS;
      420     7587    4              DO WHILE(LCTADR<REQUEST.SIZE);
      421     7588    4                 KH$IO.LCTBYT.ADR=LCTADR;
      422     7589    5                 CALL KHI$IO_INPLCTBYT(KH$CHN,KH$IO) WHENRETURN DO;
      423     7590    5                    REPLY.ARS=REPLY.ARS+1;
      424     7591    5                    SUBSTR(REPLY.DATA,LCTADR,1)=BINASC(KH$IO.LCTBYT.DAT);
      425     7592    5                    LCTADR=LCTADR+1;
      426     7593    5                    END;
      427     7594    5                 WHENALTRETURN DO;
      428     7595    5                    LCTADR=REQUEST.SIZE;
      429     7596    5   IONAK:
      430     7597    5                    REPLY.ERROR=IONAK;
      431     7598
      432     7599        /*E*             ERROR:  DBF-E$DB_IONAK
      433     7600                         MESSAGE: IO NAK trying to read LCT byte.
      434     7601        */
      435     7602
      436     7603    5                    END;
      437     7604    4                 END;
      438     7605    3              CALL KHI$SLAVE;
      439     7606    3              END;
      440     7607    2           CALL SENDREPLY;
      441     7608    2           RETURN;
      442     7609
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:15   
      443     7610    2   END GETLCTS;
      444     7611
      445     7612    1   SENDREPLY: PROC;
      446     7613
      447     7614    2           FPT_WRITE.BUF_=VECTOR(REPLY);
      448     7615    2           CALL M$WRITE(FPT_WRITE);
      449     7616    2           RETURN;
      450     7617
      451     7618    2   END SENDREPLY;
      452     7619    1   END DBF$ANLZ;
      453     7620        %EOD;

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:16   
--  Include file information  --

   KH$CHN.:E05TOU  is referenced.
   KH$IO.:E05TOU  is referenced.
   G_JIT_M.:E05TOU  is referenced.
   GM_VIRTUAL_E.:E05TOU  is referenced.
   GH_IOFNC_E.:E05TOU  is referenced.
   GH_SCHD_E.:E05TOU  is referenced.
   GH_SCHD_M.:E05TOU  is referenced.
   GH_HARDWARE_M.:E05TOU  is referenced.
   DB_MACRO_M.:E05TOU  is referenced.
   DB_PERR_C.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  is referenced.
   GT_LCP6_M.:E05TOU  is referenced.
   KI_CP6.:E05TOU  is referenced.
   GF_LCP6_M.:E05TOU  is referenced.
   GM_LCP6_M.:E05TOU  is referenced.
   GU_LCP6_M.:E05TOU  is referenced.
   GJ_LCP6_M.:E05TOU  is referenced.
   GH_LCP6_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBF$ANLZ.

   Procedure DBF$ANLZ requires 1442 words for executable code.
   Procedure DBF$ANLZ requires 56 words of local(AUTO) storage.

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:17   

 Object Unit name= DBF$ANLZ                                   File name= DBF$ANLZ.:E05TOU
 UTS= JUL 29 '97 13:12:41.60 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0   DCB   even  none     0      0  M$HOST
    1   Data  even  none   365    16D  DBF$ANLZ
    2  RoData even  UTS     10      A  DBF$ANLZ
    3   Proc  even  none  1442    5A2  DBF$ANLZ
    4  RoData even  none     6      6  DBF$ANLZ

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     3      0   yes            yes      Main       0  DBF$ANLZ

  ****  Data defs  ****

 Sect HexLoc  Name                           Sect HexLoc  Name
    1    158  DB_ERROR                           1    15A  DB_TRAPRETURN
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:18   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes          Async      0 DBF$TRAP
         yes          Async      0 DBF$XCON
         yes           Std       1 GHH$LEV
         yes           Std       0 KHI$SLAVE
 yes     yes           Std       2 KHI$IO_INPLCTBYT
                       nStd      0 X6A_MAUTO
                       nStd      0 X6C_ALRZ
                       nStd      0 X6B_BLR
                       nStd      0 X6C_ALR

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$HOST                           r    G$DS3$                           r    G$DS4$
r    G$ISR3$                          r    G$TCB$                           r    G$ROS$
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:19   


        1        1        /*M* DBF$ANLZ - ANLZ FPRG */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DMR */
        8        8
        9        9        DBF$ANLZ: PROC MAIN;

      9   3 000000  D380 0000 0000  xent DBF$ANLZ        LNJ,B5   X6A_MAUTO
          3 000003       0038 0000                       DC       56,0

       10       10
       11       11        /*D*   NAME:  DBF$ANLZ
       12       12               DESCRIPTION:
       13       13                  DBF$ANLZ is run on the FEP to give ANLZ access to the
       14       14               memory of a running FEP.
       15       15        */
       16       16
       17       17        %INCLUDE LCP_6;
       18     4296        %INCLUDE G$BOBCAT_M;
       19     4316        %INCLUDE DB_PERR_C;
       20     4334        %INCLUDE DB_MACRO_M;
       21     4365        %INCLUDE GH_HARDWARE_M;
       22     4463        %INCLUDE GH_SCHD_M;
       23     4607        %INCLUDE GH_SCHD_E;
       24     4703        %INCLUDE GH_IOFNC_E;
       25     4772        %INCLUDE GM_VIRTUAL_E;
       26     4982        %INCLUDE G_JIT_M;
       27     5247        %INCLUDE KH$IO;
       28     5494        %INCLUDE KH$CHN;
       29     5616
       30     5617    1   DCL DBF$TRAP ENTRY ASYNC;
       31     5618    1   DCL DBF$XCON ENTRY ASYNC;
       32     5619    1   DCL KHI$IO_INPLCTBYT ENTRY(2) ALTRET;
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:20   
       33     5620    1   DCL KHI$SLAVE ENTRY;
       34     5621    1   DCL GHH$LEV ENTRY(1);
       35     5622
       36     5623        %DB$MAP_EQUS;
       37     5633        %G$JIT_E;
       38     5695
       39     5696    1   DCL M$HOST DCB;
       40     5697
       41     5698        %FPT_OPEN (DCB=M$HOST,
       42     5699                  ASN=DEVICE,
       43     5700                  RES='HO');
       44     5728        %FPT_READ (DCB=M$HOST,
       45     5729                  BUF=REQUEST,
       46     5730                  WAIT=YES);
       47     5756        %FPT_WRITE (DCB=M$HOST,BP=YES);
       48     5780
       49     5781        %FPT_SPRIV (FPTN=SET_SPCLMM,
       50     5782                    PRIV=SPCLMM,
       51     5783                    AUTH=YES,PRC=YES);
       52     5806    1   DCL SPCLMM BIT(32) CONSTANT INIT(%G_PR_SPCLMM#);
       53     5807        %FPT_SPRIV (FPTN=SET_MSYS,
       54     5808                    PRIV=MSYS,
       55     5809                    AUTH=YES,PRC=NO);
       56     5832    1   DCL MSYS BIT(32) CONSTANT INIT(%G_PR_MSYS#);
       57     5833        %FPT_CVM (USERSEG=USEG,
       58     5834                 FROMSEG=FSEG,
       59     5835                 PAGES=256);
       60     5859        %FPT_GDS (FPTN=FPT_GDS,PAGES=256,RESULTS=CACHESEG) ;
       61     5883        %FPT_FDS (FPTN=FPT_FDS,PAGES=256,RESULTS=CACHESEG) ;
       62     5905        %VLP_SEGMENT (FPTN=USEG,PAGES=256);
       63     5926        %VLP_SEGMENT (FPTN=FSEG,PAGES=256);
       64     5947        %VLP_SEGMENT (FPTN=CACHESEG,PAGES=256) ;
       65     5968        %GH_LEV (FPTN=LEV_INHIB,TYPE=INHIBIT,LEVEL=4);
       66     5990        %GH_LEV (FPTN=LEV_SUSPEND,TYPE=SUSPEND);
       67     6012
       68     6013        %FPT_TRAP (FPTN=FPT_TRAP,
       69     6014                   NTC=TRAPCOND);
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:21   
       70     6029        %VLP_TRAP_CONDITIONS (FPTN=TRAPCOND,
       71     6030                              TRAP$=DBF$TRAP,
       72     6031                              MCL=G_ENT_TRAP#,
       73     6032                              MEM_PROT=G_ENT_TRAP#,
       74     6033                              INT_UR=G_ENT_TRAP#,
       75     6034                              PROG_ERR=G_ENT_TRAP#,
       76     6035                              EXT_UR=G_ENT_TRAP#);
       77     6191
       78     6192        %FPT_XCON (XCON$=DBF$XCON);
       79     6232        %FPT_RUE (FPTN=FPT_RUE);
       80     6255        %FPT_WAIT ( FPTN = WAIT1 , UTYPE = SEC , UNITS = SEC1 ) ;
       81     6279    1   DCL SEC1 UBIN STATIC INIT ( 1 ) ;
       82     6280
       83     6281    1   DCL MSGBUF CHAR(300) STATIC;
       84     6282    1   DCL MSGBUF$ PTR CONSTANT INIT(ADDR(MSGBUF));
       85     6283    1   DCL SVUSR UBIN STATIC INIT(0) ;
       86     6284    1   DCL SVPGS UBIN STATIC INIT(0) ;
       87     6285    1   DCL SVDOMAIN UBIN STATIC INIT(0) ;
       88     6286    1   DCL SVBASE$ PTR STATIC INIT(ADDR(NIL)) ;
       89     6287    1   DCL SVTOP$ PTR STATIC INIT(ADDR(NIL)) ;
       90     6288    1   DCL USECACHE UBIN BYTE;
       91     6289    1   DCL CACHEIT UBIN BYTE;
       92     6290    1   DCL CACHEPGS UBIN WORD;
       93     6291    1   DCL PG(0:255) UBIN BASED ALIGNED ;
       94     6292
       95     6293    1   DCL MUAIS UBIN;
       96     6294    1   DCL USRT$ PTR;
       97     6295    1   DCL L6ADR UBIN(32);
       98     6296    1   DCL SEGOFFSET UBIN;
       99     6297    1   DCL DOM UBIN;
      100     6298    1   DCL SYSID SBIN;
      101     6299    1   DCL SIZE UBIN;
      102     6300    1   DCL I UBIN;
      103     6301    1   DCL MEM$ PTR;
      104     6302    1   DCL TMP$ PTR;
      105     6303    1   DCL CBSIZE UBIN;
      106     6304    1   DCL CBASE CHAR(CBSIZE) BASED(MEM$);
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:22   
      107     6305
      108     6306    1   DCL CHT$ PTR;
      109     6307    1   DCL LOCHAN UBIN;
      110     6308    1   DCL HICHAN UBIN;
      111     6309    1   DCL CHN$ PTR;
      112     6310        %KH$CHN (NAME=KH$CHN,STCLASS="BASED(CHN$)");
      113     6434        %KH$IO (FPTN=KH$IO,STCLASS=STATIC,FNC=%GH#IO_INPLCTBYT);
      114     6548
      115     6549    1   DCL NEEDREPLY BIT(1);
      116     6550        %VLP_ERRCODE (FPTN=DB_ERROR,STCLASS="STATIC SYMDEF");
      117     6596    1   DCL DB_TRAPRETURN REMEMBER STATIC SYMDEF;
      118     6597
      119     6598    1   DCL G$DS3$ PTR SYMREF READONLY;
      120     6599    1   DCL G$DS4$ PTR SYMREF READONLY;
      121     6600    1   DCL G$ISR3$ PTR SYMREF READONLY ;
      122     6601    1   DCL G$BOBCATPTR UBIN(32) CONSTANT INIT(%GM_BOBCAT_BASE);
      123     6602    1   DCL G$BOBCAT$ REDEF G$BOBCATPTR PTR;
      124     6603    1   DCL G$TCB$ PTR SYMREF READONLY;
      125     6604    1   DCL NILPTR UBIN(32) CONSTANT INIT(0);
      126     6605    1   DCL NIL$ REDEF NILPTR PTR;
      127     6606
      128     6607        %DB$MAP_REQUEST (FPTN=REQUEST,STCLASS=STATIC);
      129     6611        %DB$MAP_REPLY (FPTN=REPLY,STCLASS="BASED(MSGBUF$)",DATASIZE=ARS);
      130     6666
      131     6667        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS="BASED(G$DS4$)");
      132     6680        %G$USER (FPTN="G$USER(0:0)",STCLASS="BASED(USRT$)");
      133     6691
      134     6692        %G$TCB;
      135     6713        %G$EXCFR (FPTN=G$ALT);
      136     7095        %SUB G$ALT=G$TCB$->G$TCB.ALT$->G$ALT;
      137     7096
      138     7097        %VLP_ERRCODE (FPTN=NOUSER,FCG=DB,MID=F,ERR#=%E$DB_NO_USER);
      139     7143        %VLP_ERRCODE (FPTN=BADCHAN,FCG=DB,MID=F,ERR#=%E$DB_BAD_CHAN);
      140     7189        %VLP_ERRCODE (FPTN=IONAK,FCG=DB,MID=F,ERR#=%E$DB_IONAK);
      141     7235        %VLP_ERRCODE (FPTN=NOSEG,FCG=DB,MID=F,ERR#=%E$DB_NOSEG);
      142     7281
      143     7282        %G$ASDT (STCLASS="BASED(G$DS3$)");
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:23   
      144     7311
      145     7312        %EQU K4=1024*4;
      146     7313        %EQU K64=1024*64;
      147     7314
      148     7315        %SUB FOREVER="WHILE('1'B)";
      149     7316
      150     7317        %EJECT;
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:24   
      151     7318
      152     7319    1           DB_ERROR = '0'B;

   7319   3 000005  8700 0000 0158  01                   CL       DB_ERROR
          3 000008  8700 0000 0159  01                   CL       DB_ERROR+1

      153     7320    2           CALL M$SPRIV(SET_SPCLMM) WHENALTRETURN DO; END;

   7320   3 00000B  BB80 0000 0053  01                   LAB,B3   SET_SPCLMM
          3 00000E  B870 0CD0                            LDR,R3   3280,IMO
          3 000010  0001                                 MCL
          3 000011       0003                            DC       s:7323,PREL
          3 000012  0F81 0001                            B        s:7323,PREL

      154     7321        /* OPEN PATH TO HOST */
      155     7322
      156     7323    1           CALL M$OPEN(FPT_OPEN);

   7323   3 000014  BB80 0000 0000  01                   LAB,B3   FPT_OPEN
          3 000017  B870 3540                            LDR,R3   13632,IMO
          3 000019  0001                                 MCL
          3 00001A       0000                            DC       s:7323+6,PREL

      157     7324
      158     7325    1           CALL M$XCON(FPT_XCON);

   7325   3 00001B  BB80 0000 00A0  01                   LAB,B3   FPT_XCON
          3 00001E  B870 08C2                            LDR,R3   2242,IMO
          3 000020  0001                                 MCL
          3 000021       0000                            DC       s:7325+6,PREL

      159     7326
      160     7327        /* MAP ON TO BOBCAT DATA */
      161     7328
      162     7329    1           USEG.BASE$=G$DS4$;

   7329   3 000022  EC80 0000 0000  xsym                 LDB,B6   G$DS4$
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:25   
          3 000025  EF80 0000 0083  01                   STB,B6   USEG

      163     7330    1           FSEG.BASE$=G$BOBCAT$;

   7330   3 000028  DC80 0000 0006  02                   LDB,B5   G$BOBCATPTR
          3 00002B  DF80 0000 0086  01                   STB,B5   FSEG

      164     7331    2           CALL M$CVM(FPT_CVM) WHENRETURN DO;

   7331   3 00002E  BB80 0000 0067  01                   LAB,B3   FPT_CVM
          3 000031  B870 0D08                            LDR,R3   3336,IMO
          3 000033  0001                                 MCL
          3 000034       0026                            DC       s:7339,PREL

      165     7332    2              MUAIS=G$BOBCAT.MUIS;

   7332   3 000035  EC80 0000 0000  xsym                 LDB,B6   G$DS4$
          3 000038  E846 000A                            LDR,R6   10,B6
          3 00003A  EF47 0007                            STR,R6   MUAIS,AUTO

      166     7333    2              USRT$=G$BOBCAT.USRT$;

   7333   3 00003C  DCC6 0018                            LDB,B5   24,B6
          3 00003E  DFC7 0008                            STB,B5   USRT$,AUTO

      167     7334    2              LOCHAN=G$BOBCAT.CHNLOW;

   7334   3 000040  D846 0034                            LDR,R5   52,B6
          3 000042  DF47 0018                            STR,R5   LOCHAN,AUTO

      168     7335    2              HICHAN=G$BOBCAT.CHNHI;

   7335   3 000044  C846 0035                            LDR,R4   53,B6
          3 000046  CF47 0019                            STR,R4   HICHAN,AUTO

      169     7336    2              CHT$=PINCRW(G$BOBCAT.CHNLOW$,-LOCHAN*SIZEW(KH$CHN));

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:26   
   7336   3 000048  CCC6 0038                            LDB,B4   56,B6
          3 00004A  CFC7 0024                            STB,B4   LCTADR+3,AUTO
          3 00004C  F855                                 LDR,R7   R5
          3 00004D  6C00                                 LDV,R6   0
          3 00004E  7085                                 DOL,R7   5
          3 00004F  8656                                 CPL      R6
          3 000050  8657                                 CPL      R7
          3 000051  8470 0000 0001                       AID      1,IMO
          3 000054  8447 0024                            AID      LCTADR+3,AUTO
          3 000056  8D47 0016                            SDI      CHT$,AUTO

      170     7337    2              END;

   7337   3 000058  0F81 000A                            B        s:7342,PREL

      171     7338    2           WHENALTRETURN DO;

      172     7339    2              DB_ERROR = G$ALT.TRLR.ERR;

   7339   3 00005A  EC80 0000 0000  xsym                 LDB,B6   G$TCB$
          3 00005D  DC86                                 LDB,B5   ,B6
          3 00005E  8CC5 002B                            LDI      43,B5
          3 000060  8D00 0000 0158  01                   SDI      DB_ERROR

      173     7340    2              END;

      174     7341
      175     7342    1           USEG.BASE$=G$DS3$;

   7342   3 000063  EC80 0000 0000  xsym                 LDB,B6   G$DS3$
          3 000066  EF80 0000 0083  01                   STB,B6   USEG

      176     7343    1           REMEMBER TRAP_RETURN IN DB_TRAPRETURN;

   7343   3 000069  DBC0 0010                            LAB,B5   s:7348,PREL
          3 00006B  FF80 0000 015A  01                   STB,B7   DB_TRAPRETURN
          3 00006E  DF80 0000 015C  01                   STB,B5   DB_TRAPRETURN+2
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:27   

      177     7344    1           CALL M$TRAP(FPT_TRAP);

   7344   3 000071  BB80 0000 008E  01                   LAB,B3   FPT_TRAP
          3 000074  B870 08C3                            LDR,R3   2243,IMO
          3 000076  0001                                 MCL
          3 000077       0000                            DC       s:7344+6,PREL

      178     7345    1           NEEDREPLY='0'B;

   7345   3 000078  8747 001C                            CL       NEEDREPLY,AUTO

      179     7346
      180     7347    1   TRAP_RETURN:
      181     7348    2           IF NEEDREPLY THEN DO;

   7348   3 00007A  89C7 001C            TRAP_RETURN     CMZ      NEEDREPLY,AUTO
          3 00007C  0881 0015                            BAGE     s:7357,PREL

      182     7349    2              REPLY.ERROR=DB_ERROR;

   7349   3 00007E  8C80 0000 0158  01                   LDI      DB_ERROR
          3 000081  EC80 0000 0004  02                   LDB,B6   MSGBUF$
          3 000084  8D46 0002                            SDI      2,B6

      183     7350    2              DB_ERROR = '0'B;

   7350   3 000086  8700 0000 0158  01                   CL       DB_ERROR
          3 000089  8700 0000 0159  01                   CL       DB_ERROR+1

      184     7351    2              REPLY.CONT=0;

   7351   3 00008C  8846 0001                            LBF,'00FF'X       1,B6
   7351   3 00008E       00FF

      185     7352    2              CALL SENDREPLY;

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:28   
   7352   3 00008F  E3C0 04EE                            LNJ,B6   s:0,PREL
          3 000091       0001                            DC       s:7357,PREL

      186     7353    2              END;

      187     7354
      188     7355    2           DO FOREVER;

      189     7356
      190     7357    3              CALL M$READ(FPT_READ) WHENRETURN DO;

   7357   3 000092  BB80 0000 002F  01                   LAB,B3   FPT_READ
          3 000095  B870 1542                            LDR,R3   5442,IMO
          3 000097  0001                                 MCL
          3 000098       0033                            DC       s:7371,PREL

      191     7358    3                 NEEDREPLY='1'B;

   7358   3 000099  8947 001C                            LBT,'8000'X       NEEDREPLY,AUTO
   7358   3 00009B       8000

      192     7359    3                 IF DB_ERROR THEN GOTO TRAP_RETURN;

   7359   3 00009C  EB80 0000 0000  01                   LAB,B6   FPT_OPEN
          3 00009F  DB80 0000 0000  04                   LAB,B5   0
          3 0000A2  5C01                                 LDV,R5   1
          3 0000A3  0022                                 ACM      ;
          3 0000A4       4406 0158                                ALPHANUM(344,B6,,4,FILL),;
          3 0000A6       4005 0000                                ALPHANUM(0,B5,,R5,FILL)
          3 0000A8  5352                                 CBNE     s:7348,SPREL

      193     7360    4                 DO CASE(REQUEST.DOMAYN);

   7360   3 0000A9  B800 0000 015F  01                   LDR,R3   REQUEST+1
          3 0000AC  B570 00FF                            AND,R3   255,IMO
          3 0000AE  3EFA                                 ADV,R3   -6
          3 0000AF  3D02                                 CMV,R3   2
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:29   
          3 0000B0  0281 0013                            BGE      s:7366,PREL
          3 0000B2  A830 0000 00B8  03                   LDR,R2   s:7360+15,R3
          3 0000B5  83A0 0000 00BA  03                   JMP      s:7362,R2
          3 0000B8       0000                            DC       s:7362,PREL
          3 0000B9       0005                            DC       s:7364,PREL

      194     7361    4                  CASE(%DB#DOMAIN_LCT);

      195     7362    4                    CALL GETLCTS;

   7362   3 0000BA  E3C0 0411                            LNJ,B6   s:0,PREL
          3 0000BC       0001                            DC       s:7362+3,PREL
          3 0000BD  0F81 0009                            B        s:7368,PREL

      196     7363    4                  CASE(%DB#DOMAIN_RUE);

      197     7364    4                    CALL RUE;

   7364   3 0000BF  E3C0 037B                            LNJ,B6   s:0,PREL
          3 0000C1       0001                            DC       s:7364+3,PREL
          3 0000C2  0F81 0004                            B        s:7368,PREL

      198     7365    4                  CASE(ELSE);

      199     7366    4                    CALL MAP;

   7366   3 0000C4  E3C0 000B                            LNJ,B6   s:0,PREL
          3 0000C6       0001                            DC       s:7368,PREL

      200     7367    4                  END;

      201     7368    3                 NEEDREPLY='0'B;

   7368   3 0000C7  8747 001C                            CL       NEEDREPLY,AUTO

      202     7369    3                 END;

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:30   
   7369   3 0000C9  0F81 0005                            B        s:7374,PREL

      203     7370    3              WHENALTRETURN DO;

      204     7371    3                 CALL M$XXX;

   7371   3 0000CB  B870 0082                            LDR,R3   130,IMO
          3 0000CD  0001                                 MCL
          3 0000CE       0000                            DC       s:7371+3,PREL

      205     7372    3                 END;

      206     7373
      207     7374    2              END;

   7374   3 0000CF  0FC3                                 B        s:7357,SPREL

      208     7375
      209     7376        %EJECT;
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:31   
      210     7377
      211     7378    1   MAP:    PROC;

   7378   3 0000D0  EFC7 001E            MAP             STB,B6   NEEDREPLY+2,AUTO

      212     7379
      213     7380    2           L6ADR=REQUEST.L6ADR;

   7380   3 0000D2  8C80 0000 015E  01                   LDI      REQUEST
          3 0000D5  70C8                                 DOR,R7   8
          3 0000D6  8D47 000A                            SDI      L6ADR,AUTO

      214     7381    3           IF L6ADR>%K64 THEN DO;

   7381   3 0000D8  84F0 0001 0000                       SID      65536,IMO
          3 0000DB  0681 000E                            BCF      s:7385,PREL
          3 0000DD  6981 0003                            BNEZ,R6  s:7382,PREL
          3 0000DF  7901 000A                            BEZ,R7   s:7385,PREL

      215     7382    3              SEGOFFSET=MOD(L6ADR,%K64);

   7382   3 0000E1  8CC7 000A                            LDI      L6ADR,AUTO
          3 0000E3  E857                                 LDR,R6   R7
          3 0000E4  E570 FFFF                            AND,R6   -1,IMO
          3 0000E6  EF47 000C                            STR,R6   SEGOFFSET,AUTO

      216     7383    3              END;

   7383   3 0000E8  0F81 0008                            B        s:7387,PREL

      217     7384    3           ELSE DO;

      218     7385    3              SEGOFFSET=MOD(L6ADR,%K4);

   7385   3 0000EA  8CC7 000A                            LDI      L6ADR,AUTO
          3 0000EC  E857                                 LDR,R6   R7
          3 0000ED  E570 0FFF                            AND,R6   4095,IMO
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:32   
          3 0000EF  EF47 000C                            STR,R6   SEGOFFSET,AUTO

      219     7386    3              END;

      220     7387    2           DOM=REQUEST.DOMAYN;

   7387   3 0000F1  D800 0000 015F  01                   LDR,R5   REQUEST+1
          3 0000F4  D570 00FF                            AND,R5   255,IMO
          3 0000F6  DF47 000D                            STR,R5   DOM,AUTO

      221     7388    2           SYSID=REQUEST.SYSID;

   7388   3 0000F8  C800 0000 0161  01                   LDR,R4   REQUEST+3
          3 0000FB  CF47 000E                            STR,R4   SYSID,AUTO

      222     7389    2           SIZE=REQUEST.SIZE;

   7389   3 0000FD  B800 0000 0162  01                   LDR,R3   REQUEST+4
          3 000100  BF47 000F                            STR,R3   SIZE,AUTO

      223     7390    2           USECACHE = REQUEST.USECACHE ;

   7390   3 000102  A280 0000 0163  01                   LLH,R2   REQUEST+5
          3 000105  A7C7 0004                            STH,R2   USECACHE,AUTO

      224     7391    2           CACHEIT = REQUEST.CACHEIT ;

   7391   3 000107  9800 0000 0163  01                   LDR,R1   REQUEST+5
          3 00010A  9570 00FF                            AND,R1   255,IMO
          3 00010C  97C7 0005                            STH,R1   CACHEIT,AUTO

      225     7392    2           CACHEPGS = REQUEST.CACHEPGS ;

   7392   3 00010E  E800 0000 0164  01                   LDR,R6   REQUEST+6
          3 000111  EF47 0006                            STR,R6   CACHEPGS,AUTO

      226     7393
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:33   
      227     7394    3           IF DOM=%DB#DOMAIN_MONUSR THEN DO;

   7394   3 000113  5981 000B                            BNEZ,R5  s:7401,PREL

      228     7395    3              IF SYSID=0 THEN

   7395   3 000115  4981 0006                            BNEZ,R4  s:7398,PREL

      229     7396    3                 DOM=%DB#DOMAIN_MON;

   7396   3 000117  5C01                                 LDV,R5   1
          3 000118  DF47 000D                            STR,R5   DOM,AUTO
          3 00011A  0F81 0004                            B        s:7401,PREL

      230     7397    3              ELSE
      231     7398    3                 DOM=%DB#DOMAIN_USR;

   7398   3 00011C  5C03                                 LDV,R5   3
          3 00011D  DF47 000D                            STR,R5   DOM,AUTO

      232     7399    3              END;

      233     7400
      234     7401    3           DO CASE(DOM);

   7401   3 00011F  B855                                 LDR,R3   R5
          3 000120  3D06                                 CMV,R3   6
          3 000121  0281 011C                            BGE      s:7451,PREL
          3 000123  A830 0000 0129  03                   LDR,R2   s:7401+10,R3
          3 000126  83A0 0000 012F  03                   JMP      s:7403,R2
          3 000129       010F                            DC       s:7451,PREL
          3 00012A       0000                            DC       s:7403,PREL
          3 00012B       010F                            DC       s:7451,PREL
          3 00012C       0005                            DC       s:7407,PREL
          3 00012D       0064                            DC       s:7427,PREL
          3 00012E       0078                            DC       s:7431,PREL

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:34   
      235     7402    3            CASE(%DB#DOMAIN_MON);

      236     7403    3              FPT_CVM.V.TYPE=%G_CVM_MON#;

   7403   3 00012F  8780 0000 0071  01                   CLH      FPT_CVM+10
          3 000132  0F81 010B                            B        s:7451,PREL

      237     7404    3            CASE(%DB#DOMAIN_MCL);

      238     7405                                                /* ERROR                              */
      239     7406    3            CASE(%DB#DOMAIN_USR);

      240     7407    3              FPT_CVM.V.TYPE=%G_CVM_USER#;

   7407   3 000134  6C01                                 LDV,R6   1
          3 000135  E780 0000 0071  01                   STH,R6   FPT_CVM+10

      241     7408    4              IF SYSID<0 THEN DO;

   7408   3 000138  4881 0008                            BGEZ,R4  s:7412,PREL

      242     7409    4                 FPT_CVM.V.USERID=-SYSID;

   7409   3 00013A  8254                                 NEG      R4
          3 00013B  CA80 0000 0071  01                   SRM,R4,'00FF'X    FPT_CVM+10
          3 00013E       00FF

      243     7410    4                 END;

   7410   3 00013F  0F81 001F                            B        s:7417,PREL

      244     7411    4              ELSE DO;

      245     7412    5                 DO I=1 TO MUAIS;

   7412   3 000141  EF47 0010                            STR,R6   I,AUTO
          3 000143  0F81 0010                            B        s:7414+2,PREL
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:35   

      246     7413    5                    IF G$USER.SYSID(I)=SYSID THEN EXIT;

   7413   3 000145  ECC7 0008                            LDB,B6   USRT$,AUTO
          3 000147  B847 0010                            LDR,R3   I,AUTO
          3 000149  3F18                                 MLV,R3   24
          3 00014A  3E13                                 ADV,R3   19
          3 00014B  E836                                 LDR,R6   ,B6,R3
          3 00014C  6801 0005                            BLZ,R6   s:7414,PREL
          3 00014E  E947 000E                            CMR,R6   SYSID,AUTO
          3 000150  0901 0008                            BE       s:7415,PREL

      247     7414    5                    END;

   7414   3 000152  8AC7 0010                            INC      I,AUTO
          3 000154  E847 0010                            LDR,R6   I,AUTO
          3 000156  E947 0007                            CMR,R6   MUAIS,AUTO
          3 000158  03ED                                 BLE      s:7413,SPREL

      248     7415    4                 FPT_CVM.V.USERID=I;

   7415   3 000159  E847 0010                            LDR,R6   I,AUTO
          3 00015B  EA80 0000 0071  01                   SRM,R6,'00FF'X    FPT_CVM+10
          3 00015E       00FF

      249     7416    4                 END;

      250     7417    4             IF FPT_CVM.V.USERID>MUAIS OR G$USER.US(FPT_CVM.V.USERID)=%GH_NULL THEN DO
              7417                       ;

   7417   3 00015F  E800 0000 0071  01                   LDR,R6   FPT_CVM+10
          3 000162  E570 00FF                            AND,R6   255,IMO
          3 000164  E947 0007                            CMR,R6   MUAIS,AUTO
          3 000166  0301 000A                            BG       s:7418,PREL
          3 000168  B856                                 LDR,R3   R6
          3 000169  ECC7 0008                            LDB,B6   USRT$,AUTO
          3 00016B  3F18                                 MLV,R3   24
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:36   
          3 00016C  3E02                                 ADV,R3   2
          3 00016D  D836                                 LDR,R5   ,B6,R3
          3 00016E  5D1F                                 CMV,R5   31
          3 00016F  0981 00CE                            BNE      s:7451,PREL

      251     7418    4                 REPLY='0'B;

   7418   3 000171  EC80 0000 0004  02                   LDB,B6   MSGBUF$
          3 000174  D846 0004                            LDR,R5   4,B6
          3 000176  DF47 0024                            STR,R5   LCTADR+3,AUTO
          3 000178  AB80 0000 0000  04                   LAB,B2   0
          3 00017B  2C00                                 LDV,R2   0
          3 00017C  6C01                                 LDV,R6   1
          3 00017D  BB86                                 LAB,B3   ,B6
          3 00017E  3C00                                 LDV,R3   0
          3 00017F  F855                                 LDR,R7   R5
          3 000180  7E0A                                 ADV,R7   10
          3 000181  D380 0000 0000  xent                 LNJ,B5   X6C_ALRZ

      252     7419    4                 REPLY.ERROR=NOUSER;

   7419   3 000184  8C80 0000 0165  01                   LDI      NOUSER
          3 000187  EC80 0000 0004  02                   LDB,B6   MSGBUF$
          3 00018A  8D46 0002                            SDI      2,B6

      253     7420        /*E*          ERROR:  DBF-E$DB_NO_USER
      254     7421                      MESSAGE:  No such user.
      255     7422        */
      256     7423    4                 CALL SENDREPLY;

   7423   3 00018C  E3C0 03F1                            LNJ,B6   s:0,PREL
          3 00018E       0001                            DC       s:7424,PREL

      257     7424    4                 RETURN;

   7424   3 00018F  ECC7 001E                            LDB,B6   NEEDREPLY+2,AUTO
          3 000191  C3C6 0001                            LNJ,B4   1,B6
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:37   

      258     7425    4                 END;
      259     7426    3            CASE(%DB#DOMAIN_REAL);

      260     7427    3              FPT_CVM.V.TYPE=%G_CVM_PHYSICAL#;

   7427   3 000193  6C02                                 LDV,R6   2
          3 000194  E780 0000 0071  01                   STH,R6   FPT_CVM+10

      261     7428    3              SEGOFFSET=MOD(L6ADR,256);

   7428   3 000197  8CC7 000A                            LDI      L6ADR,AUTO
          3 000199  E857                                 LDR,R6   R7
          3 00019A  E570 00FF                            AND,R6   255,IMO
          3 00019C  EF47 000C                            STR,R6   SEGOFFSET,AUTO

      262     7429    3              FSEG.PAGES=L6ADR/256;

   7429   3 00019E  8CC7 000A                            LDI      L6ADR,AUTO
          3 0001A0  70C8                                 DOR,R7   8
          3 0001A1  E857                                 LDR,R6   R7
          3 0001A2  EF00 0000 0088  01                   STR,R6   FSEG+2
          3 0001A5  0F81 0098                            B        s:7451,PREL

      263     7430    3            CASE(%DB#DOMAIN_ASDT);

      264     7431    3              FPT_CVM.V.TYPE=%G_CVM_PHYSICAL#;

   7431   3 0001A7  6C02                                 LDV,R6   2
          3 0001A8  E780 0000 0071  01                   STH,R6   FPT_CVM+10

      265     7432    3              FSEG.PAGES=REQUEST.SYSID/256;

   7432   3 0001AB  8C80 0000 0160  01                   LDI      REQUEST+2
          3 0001AE  82D7                                 LB,'00FF'X        R7
          3 0001AF       00FF
          3 0001B0  70E8                                 DAR,R7   8
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:38   
          3 0001B1  6881 0006                            BGEZ,R6  s:7432+13,PREL
          3 0001B3  0581 0004                            BBF      s:7432+13,PREL
          3 0001B5  8470 0000 0001                       AID      1,IMO
          3 0001B8  E857                                 LDR,R6   R7
          3 0001B9  EF00 0000 0088  01                   STR,R6   FSEG+2

      266     7433    3              CALL M$CVM(FPT_CVM) ALTRET(NOSEG);

   7433   3 0001BC  BB80 0000 0067  01                   LAB,B3   FPT_CVM
          3 0001BF  B870 0D08                            LDR,R3   3336,IMO
          3 0001C1  0001                                 MCL
          3 0001C2       003A                            DC       s:7441,PREL

      267     7434    3              TMP$=PINCRW(G$DS3$,MOD(REQUEST.SYSID,256));

   7434   3 0001C3  EB80 0000 0000  04                   LAB,B6   0
          3 0001C6  0027                                 CBD      ;
          3 0001C7       0206 0001                                BINARY(1,B6,,2),;
          3 0001C9       4C07 0024                                UNPACKED(LCTADR+3,AUTO,,12,LEADING)
          3 0001CB  EB80 0000 0000  01                   LAB,B6   FPT_OPEN
          3 0001CE  0027                                 CBD      ;
          3 0001CF       0406 0160                                BINARY(352,B6,,4),;
          3 0001D1       4C07 002A                                UNPACKED(LCTADR+9,AUTO,,12,LEADING)
          3 0001D3  002B                                 DDV      ;
          3 0001D4       4C07 0024                                UNPACKED(LCTADR+3,AUTO,,12,LEADING),;
          3 0001D6       4C07 002A                                UNPACKED(LCTADR+9,AUTO,,12,LEADING),;
          3 0001D8       4C07 0030                                UNPACKED(LCTADR+15,AUTO,,12,LEADING)
          3 0001DA  002A                                 CDB      ;
          3 0001DB       4C07 002A                                UNPACKED(LCTADR+9,AUTO,,12,LEADING),;
          3 0001DD       0407 0036                                BINARY(LCTADR+21,AUTO,,4)
          3 0001DF  8C80 0000 0000  xsym                 LDI      G$DS3$
          3 0001E2  437F                                 CSYNC    s:7434+30,SPREL
          3 0001E3  8447 0036                            AID      LCTADR+21,AUTO
          3 0001E5  8D47 0013                            SDI      TMP$,AUTO

      268     7435    3              I=L6ADR/%K4;

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:39   
   7435   3 0001E7  8CC7 000A                            LDI      L6ADR,AUTO
          3 0001E9  70CC                                 DOR,R7   12
          3 0001EA  E857                                 LDR,R6   R7
          3 0001EB  EF47 0010                            STR,R6   I,AUTO

      269     7436    3              IF I>15 THEN I=I/16+15;

   7436   3 0001ED  6D0F                                 CMV,R6   15
          3 0001EE  0381 0005                            BLE      s:7437,PREL

   7436   3 0001F0  6044                                 SOR,R6   4
          3 0001F1  6E0F                                 ADV,R6   15
          3 0001F2  EF47 0010                            STR,R6   I,AUTO

      270     7437    4              IF NOT G$ASDT.DESC.V(I) THEN DO;

   7437   3 0001F4  EC80 0000 0000  xsym                 LDB,B6   G$DS3$
          3 0001F7  B856                                 LDR,R3   R6
          3 0001F8  3001                                 SOL,R3   1
          3 0001F9  89B6                                 CMZ      ,B6,R3
          3 0001FA  0801 0024                            BAL      s:7446,PREL

      271     7438        /*E*          ERROR: DBF-E$DB_NOSEG
      272     7439                      MESSAGE:  Address not available
      273     7440        */
      274     7441    4   NOSEG:        REPLY='0'B;

   7441   3 0001FC  EC80 0000 0004  02   NOSEG           LDB,B6   MSGBUF$
          3 0001FF  E846 0004                            LDR,R6   4,B6
          3 000201  EF47 0024                            STR,R6   LCTADR+3,AUTO
          3 000203  AB80 0000 0000  04                   LAB,B2   0
          3 000206  2C00                                 LDV,R2   0
          3 000207  6C01                                 LDV,R6   1
          3 000208  BB86                                 LAB,B3   ,B6
          3 000209  3C00                                 LDV,R3   0
          3 00020A  F847 0024                            LDR,R7   LCTADR+3,AUTO
          3 00020C  7E0A                                 ADV,R7   10
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:40   
          3 00020D  D380 0000 0000  xent                 LNJ,B5   X6C_ALRZ

      275     7442    4                 REPLY.ERROR=NOSEG;

   7442   3 000210  8C80 0000 016B  01                   LDI      NOSEG
          3 000213  EC80 0000 0004  02                   LDB,B6   MSGBUF$
          3 000216  8D46 0002                            SDI      2,B6

      276     7443    4                 CALL SENDREPLY;

   7443   3 000218  E3C0 0365                            LNJ,B6   s:0,PREL
          3 00021A       0001                            DC       s:7444,PREL

      277     7444    4                 RETURN;

   7444   3 00021B  ECC7 001E                            LDB,B6   NEEDREPLY+2,AUTO
          3 00021D  C3C6 0001                            LNJ,B4   1,B6

      278     7445    4                 END;
      279     7446    3              IF (SIZE/2+SEGOFFSET-1)>G$ASDT.DESC.SIZE(I)*256

   7446   3 00021F  D847 000F                            LDR,R5   SIZE,AUTO
          3 000221  5041                                 SOR,R5   1
          3 000222  DA47 000C                            ADD,R5   SEGOFFSET,AUTO
          3 000224  5EFF                                 ADV,R5   -1
          3 000225  3E01                                 ADV,R3   1
          3 000226  C836                                 LDR,R4   ,B6,R3
          3 000227  4008                                 SOL,R4   8
          3 000228  D954                                 CMR,R5   R4
          3 000229  0A81 000C                            BALE     s:7448,PREL

      280     7447    3              THEN SIZE=2*((G$ASDT.DESC.SIZE(I)+1)*256-SEGOFFSET);

   7447   3 00022B  D836                                 LDR,R5   ,B6,R3
          3 00022C  5008                                 SOL,R5   8
          3 00022D  8255                                 NEG      R5
          3 00022E  DA47 000C                            ADD,R5   SEGOFFSET,AUTO
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:41   
          3 000230  5001                                 SOL,R5   1
          3 000231  8255                                 NEG      R5
          3 000232  DA70 0200                            ADD,R5   512,IMO
          3 000234  DF47 000F                            STR,R5   SIZE,AUTO

      281     7448    3              FSEG.PAGES=G$ASDT.DESC.BASE(I);

   7448   3 000236  A856                                 LDR,R2   R6
          3 000237  2001                                 SOL,R2   1
          3 000238  D826                                 LDR,R5   ,B6,R2
          3 000239  D570 7FFF                            AND,R5   32767,IMO
          3 00023B  DF00 0000 0088  01                   STR,R5   FSEG+2

      282     7449    3            END;

      283     7450
      284     7451    2           IF FPT_CVM.V.TYPE~=%G_CVM_PHYSICAL#

   7451   3 00023E  E280 0000 0071  01                   LLH,R6   FPT_CVM+10
          3 000241  6D02                                 CMV,R6   2
          3 000242  0901 001B                            BE       s:7457,PREL

      285     7452    3           THEN DO ;

      286     7453    3              FSEG.BASE$=PINCRW(NIL$,L6ADR-SEGOFFSET);

   7453   3 000244  F847 000C                            LDR,R7   SEGOFFSET,AUTO
          3 000246  6C00                                 LDV,R6   0
          3 000247  84C7 000A                            SID      L6ADR,AUTO
          3 000249  8480 0000 0008  02                   SID      NILPTR
          3 00024C  8656                                 CPL      R6
          3 00024D  8657                                 CPL      R7
          3 00024E  8470 0000 0001                       AID      1,IMO
          3 000251  8D00 0000 0086  01                   SDI      FSEG

      287     7454    3              IF CACHEIT=1 THEN

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:42   
   7454   3 000254  D2C7 0005                            LLH,R5   CACHEIT,AUTO
          3 000256  5D01                                 CMV,R5   1
          3 000257  0981 0006                            BNE      s:7457,PREL

      288     7455    3                 FSEG.PAGES = CACHEPGS ;

   7455   3 000259  C847 0006                            LDR,R4   CACHEPGS,AUTO
          3 00025B  CF00 0000 0088  01                   STR,R4   FSEG+2

      289     7456    3              END ;

      290     7457    2           TMP$ = PINCRW(NIL$,L6ADR) ;

   7457   3 00025E  8C80 0000 0008  02                   LDI      NILPTR
          3 000261  8447 000A                            AID      L6ADR,AUTO
          3 000263  8D47 0013                            SDI      TMP$,AUTO

      291     7458    2           IF USECACHE=1 AND CACHEIT=0 AND SVUSR = I AND SVDOMAIN = DOM AND

   7458   3 000265  D2C7 0004                            LLH,R5   USECACHE,AUTO
          3 000267  5D01                                 CMV,R5   1
          3 000268  0981 002D                            BNE      s:7462,PREL
          3 00026A  C2C7 0005                            LLH,R4   CACHEIT,AUTO
          3 00026C  4981 0029                            BNEZ,R4  s:7462,PREL
          3 00026E  B800 0000 014F  01                   LDR,R3   SVUSR
          3 000271  B947 0010                            CMR,R3   I,AUTO
          3 000273  0981 0022                            BNE      s:7462,PREL
          3 000275  A800 0000 0151  01                   LDR,R2   SVDOMAIN
          3 000278  A947 000D                            CMR,R2   DOM,AUTO
          3 00027A  0981 001B                            BNE      s:7462,PREL
          3 00027C  9800 0000 0150  01                   LDR,R1   SVPGS
          3 00027F  1901 0016                            BEZ,R1   s:7462,PREL
          3 000281  ECC7 0013                            LDB,B6   TMP$,AUTO
          3 000283  ED80 0000 0152  01                   CMB,B6   SVBASE$
          3 000286  0201 000F                            BL       s:7462,PREL
          3 000288  F847 000F                            LDR,R7   SIZE,AUTO
          3 00028A  6C00                                 LDV,R6   0
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:43   
          3 00028B  8447 0013                            AID      TMP$,AUTO
          3 00028D  8D47 0024                            SDI      LCTADR+3,AUTO
          3 00028F  DCC7 0024                            LDB,B5   LCTADR+3,AUTO
          3 000291  DD80 0000 0154  01                   CMB,B5   SVTOP$
          3 000294  0201 00EF                            BL       s:7504,PREL

      292     7459    2             SVPGS > 0 AND
      293     7460    2             TMP$ >= SVBASE$ AND PINCRW(TMP$,SIZE) < SVTOP$ THEN ;
      294     7461    3           ELSE DO ;

      295     7462    4              IF SVPGS > 0 THEN DO ;

   7462   3 000296  E800 0000 0150  01                   LDR,R6   SVPGS
          3 000299  6901 0014                            BEZ,R6   s:7468,PREL

      296     7463    4                 CACHESEG.BASE$ = G$ISR3$ ;

   7463   3 00029B  EC80 0000 0000  xsym                 LDB,B6   G$ISR3$
          3 00029E  EF80 0000 0089  01                   STB,B6   CACHESEG

      297     7464    4                 FPT_FDS.V.PAGES = SVPGS ;

   7464   3 0002A1  EF00 0000 0081  01                   STR,R6   FPT_FDS+6

      298     7465    4                 CALL M$FDS ( FPT_FDS ) ;

   7465   3 0002A4  BB80 0000 007B  01                   LAB,B3   FPT_FDS
          3 0002A7  B870 0903                            LDR,R3   2307,IMO
          3 0002A9  0001                                 MCL
          3 0002AA       0000                            DC       s:7465+6,PREL

      299     7466    4                 SVPGS = 0 ;

   7466   3 0002AB  8700 0000 0150  01                   CL       SVPGS

      300     7467    4                 END ;

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:44   
      301     7468    4              CALL M$CVM(FPT_CVM) WHENALTRETURN DO;

   7468   3 0002AE  BB80 0000 0067  01                   LAB,B3   FPT_CVM
          3 0002B1  B870 0D08                            LDR,R3   3336,IMO
          3 0002B3  0001                                 MCL
          3 0002B4       0003                            DC       s:7469,PREL
          3 0002B5  0F81 0027                            B        s:7474,PREL

      302     7469    4                 REPLY='0'B;

   7469   3 0002B7  EC80 0000 0004  02                   LDB,B6   MSGBUF$
          3 0002BA  E846 0004                            LDR,R6   4,B6
          3 0002BC  EF47 0024                            STR,R6   LCTADR+3,AUTO
          3 0002BE  AB80 0000 0000  04                   LAB,B2   0
          3 0002C1  2C00                                 LDV,R2   0
          3 0002C2  6C01                                 LDV,R6   1
          3 0002C3  BB86                                 LAB,B3   ,B6
          3 0002C4  3C00                                 LDV,R3   0
          3 0002C5  F847 0024                            LDR,R7   LCTADR+3,AUTO
          3 0002C7  7E0A                                 ADV,R7   10
          3 0002C8  D380 0000 0000  xent                 LNJ,B5   X6C_ALRZ

      303     7470    4                 REPLY.ERROR=G$ALT.TRLR.ERR;

   7470   3 0002CB  EC80 0000 0000  xsym                 LDB,B6   G$TCB$
          3 0002CE  DC86                                 LDB,B5   ,B6
          3 0002CF  8CC5 002B                            LDI      43,B5
          3 0002D1  CC80 0000 0004  02                   LDB,B4   MSGBUF$
          3 0002D4  8D44 0002                            SDI      2,B4

      304     7471    4                 CALL SENDREPLY;

   7471   3 0002D6  E3C0 02A7                            LNJ,B6   s:0,PREL
          3 0002D8       0001                            DC       s:7472,PREL

      305     7472    4                 RETURN;

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:45   
   7472   3 0002D9  ECC7 001E                            LDB,B6   NEEDREPLY+2,AUTO
          3 0002DB  C3C6 0001                            LNJ,B4   1,B6

      306     7473    4                 END;
      307     7474    4              IF CACHEIT=1 THEN DO ;

   7474   3 0002DD  E2C7 0005                            LLH,R6   CACHEIT,AUTO
          3 0002DF  6D01                                 CMV,R6   1
          3 0002E0  0981 00A3                            BNE      s:7504,PREL

      308     7475    4                 SVBASE$ = PINCRW(NIL$,L6ADR-SEGOFFSET) ;

   7475   3 0002E2  F847 000C                            LDR,R7   SEGOFFSET,AUTO
          3 0002E4  6C00                                 LDV,R6   0
          3 0002E5  84C7 000A                            SID      L6ADR,AUTO
          3 0002E7  8480 0000 0008  02                   SID      NILPTR
          3 0002EA  8656                                 CPL      R6
          3 0002EB  8657                                 CPL      R7
          3 0002EC  8470 0000 0001                       AID      1,IMO
          3 0002EF  8D00 0000 0152  01                   SDI      SVBASE$

      309     7476    4                 SVDOMAIN = DOM ;

   7476   3 0002F2  D847 000D                            LDR,R5   DOM,AUTO
          3 0002F4  DF00 0000 0151  01                   STR,R5   SVDOMAIN

      310     7477    4                 SVUSR = I ;

   7477   3 0002F7  C847 0010                            LDR,R4   I,AUTO
          3 0002F9  CF00 0000 014F  01                   STR,R4   SVUSR

      311     7478    4                 SVPGS = USEG.PAGES ;

   7478   3 0002FC  B800 0000 0085  01                   LDR,R3   USEG+2
          3 0002FF  BF00 0000 0150  01                   STR,R3   SVPGS

      312     7479    4                 FPT_GDS.V.PAGES = SVPGS ;
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:46   

   7479   3 000302  BF00 0000 0079  01                   STR,R3   FPT_GDS+6

      313     7480    4                 CACHESEG.BASE$ = G$ISR3$ ;

   7480   3 000305  EC80 0000 0000  xsym                 LDB,B6   G$ISR3$
          3 000308  EF80 0000 0089  01                   STB,B6   CACHESEG

      314     7481    5                 CALL M$GDS ( FPT_GDS ) WHENRETURN DO ;

   7481   3 00030B  BB80 0000 0073  01                   LAB,B3   FPT_GDS
          3 00030E  B870 0902                            LDR,R3   2306,IMO
          3 000310  0001                                 MCL
          3 000311       0062                            DC       s:7496,PREL

      315     7482    5                    CALL M$WAIT ( WAIT1 ) ;

   7482   3 000312  BB80 0000 00AE  01                   LAB,B3   WAIT1
          3 000315  B870 0CC5                            LDR,R3   3269,IMO
          3 000317  0001                                 MCL
          3 000318       0000                            DC       s:7482+6,PREL

      316     7483    5                    TMP$ = G$DS3$ ;

   7483   3 000319  EC80 0000 0000  xsym                 LDB,B6   G$DS3$
          3 00031C  EFC7 0013                            STB,B6   TMP$,AUTO

      317     7484    5                    MEM$ = G$ISR3$ ;

   7484   3 00031E  DC80 0000 0000  xsym                 LDB,B5   G$ISR3$
          3 000321  DFC7 0011                            STB,B5   MEM$,AUTO

      318     7485    5                    CALL M$SYS;

   7485   3 000323  3C43                                 LDV,R3   67
          3 000324  0001                                 MCL
          3 000325       0000                            DC       s:7485+2,PREL
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:47   

      319     7486    5                    CALL GHH$LEV ( LEV_INHIB ) ;

   7486   3 000326  BB80 0000 0002  04                   LAB,B3   +2
          3 000329  CBF0 0100                            LAB,B4   256,IMO
          3 00032B  E380 0000 0000  xent                 LNJ,B6   GHH$LEV
          3 00032E       0001                            DC       s:7487,PREL

      320     7487    6                    DO I = 0 TO SVPGS-1 ;

   7487   3 00032F  8747 0010                            CL       I,AUTO
          3 000331  0F81 001C                            B        s:7489+2,PREL

      321     7488    6                       PINCRW(MEM$,256*I)->PG = PINCRW(TMP$,256*I)->PG ;

   7488   3 000333  F847 0010                            LDR,R7   I,AUTO
          3 000335  6C00                                 LDV,R6   0
          3 000336  7088                                 DOL,R7   8
          3 000337  8447 0011                            AID      MEM$,AUTO
          3 000339  8D47 0024                            SDI      LCTADR+3,AUTO
          3 00033B  F847 0010                            LDR,R7   I,AUTO
          3 00033D  6C00                                 LDV,R6   0
          3 00033E  7088                                 DOL,R7   8
          3 00033F  8447 0013                            AID      TMP$,AUTO
          3 000341  8D47 0026                            SDI      LCTADR+5,AUTO
          3 000343  ACC7 0026                            LDB,B2   LCTADR+5,AUTO
          3 000345  2C00                                 LDV,R2   0
          3 000346  E870 0200                            LDR,R6   512,IMO
          3 000348  BCC7 0024                            LDB,B3   LCTADR+3,AUTO
          3 00034A  3C00                                 LDV,R3   0
          3 00034B  0008                                 MMM

      322     7489    6                       END ;

   7489   3 00034C  8AC7 0010                            INC      I,AUTO
          3 00034E  E847 0010                            LDR,R6   I,AUTO
          3 000350  E900 0000 0150  01                   CMR,R6   SVPGS
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:48   
          3 000353  0260                                 BL       s:7488,SPREL

      323     7490    5                    CALL GHH$LEV ( LEV_SUSPEND ) ;

   7490   3 000354  BB80 0000 0004  04                   LAB,B3   +4
          3 000357  CBF0 0100                            LAB,B4   256,IMO
          3 000359  E380 0000 0000  xent                 LNJ,B6   GHH$LEV
          3 00035C       0001                            DC       s:7491,PREL

      324     7491    5                    USECACHE = 1 ;

   7491   3 00035D  6C01                                 LDV,R6   1
          3 00035E  E7C7 0004                            STH,R6   USECACHE,AUTO

      325     7492    5                    CALL KHI$SLAVE;

   7492   3 000360  CBF0 0000                            LAB,B4   0,IMO
          3 000362  E380 0000 0000  xent                 LNJ,B6   KHI$SLAVE
          3 000365       0001                            DC       s:7493,PREL

      326     7493    5                    SVTOP$ = PINCRW(SVBASE$,USEG.PAGES*256) ;

   7493   3 000366  F800 0000 0085  01                   LDR,R7   USEG+2
          3 000369  6C00                                 LDV,R6   0
          3 00036A  7088                                 DOL,R7   8
          3 00036B  8400 0000 0152  01                   AID      SVBASE$
          3 00036E  8D00 0000 0154  01                   SDI      SVTOP$

      327     7494    5                    END ;

   7494   3 000371  0F81 0012                            B        s:7504,PREL

      328     7495    5                 WHENALTRETURN DO ;

      329     7496    5                    USECACHE = 0 ;

   7496   3 000373  87C7 0004                            CLH      USECACHE,AUTO
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:49   

      330     7497    5                    SVUSR = 0 ;

   7497   3 000375  8700 0000 014F  01                   CL       SVUSR

      331     7498    5                    SVPGS = 0 ;

   7498   3 000378  8700 0000 0150  01                   CL       SVPGS

      332     7499    5                    SVBASE$ = ADDR(NIL) ;

   7499   3 00037B  EB80 0000 0000                       LAB,B6   0
          3 00037E  EF80 0000 0152  01                   STB,B6   SVBASE$

      333     7500    5                    SVDOMAIN = 0 ;

   7500   3 000381  8700 0000 0151  01                   CL       SVDOMAIN

      334     7501    5                    END ;

      335     7502    4                 END ;

      336     7503    3              END;

      337     7504    2           IF USECACHE=1 AND SVPGS>0 THEN

   7504   3 000384  E2C7 0004                            LLH,R6   USECACHE,AUTO
          3 000386  6D01                                 CMV,R6   1
          3 000387  0981 0010                            BNE      s:7507,PREL
          3 000389  D800 0000 0150  01                   LDR,R5   SVPGS
          3 00038C  5901 000B                            BEZ,R5   s:7507,PREL

      338     7505    2              MEM$ = PINCRW(G$ISR3$,SEGOFFSET);

   7505   3 00038E  F847 000C                            LDR,R7   SEGOFFSET,AUTO
          3 000390  6C00                                 LDV,R6   0
          3 000391  8400 0000 0000  xsym                 AID      G$ISR3$
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:50   
          3 000394  8D47 0011                            SDI      MEM$,AUTO
          3 000396  0F81 0009                            B        s:7508,PREL

      339     7506    2           ELSE
      340     7507    2              MEM$ = PINCRW(G$DS3$,SEGOFFSET);

   7507   3 000398  F847 000C                            LDR,R7   SEGOFFSET,AUTO
          3 00039A  6C00                                 LDV,R6   0
          3 00039B  8400 0000 0000  xsym                 AID      G$DS3$
          3 00039E  8D47 0011                            SDI      MEM$,AUTO

      341     7508    2           IF (SIZE/2+SEGOFFSET+255)/256>USEG.PAGES

   7508   3 0003A0  D847 000F                            LDR,R5   SIZE,AUTO
          3 0003A2  5041                                 SOR,R5   1
          3 0003A3  DA47 000C                            ADD,R5   SEGOFFSET,AUTO
          3 0003A5  DA70 00FF                            ADD,R5   255,IMO
          3 0003A7  5048                                 SOR,R5   8
          3 0003A8  D900 0000 0085  01                   CMR,R5   USEG+2
          3 0003AB  0381 000C                            BLE      s:7511,PREL

      342     7509    2           THEN SIZE=2*(USEG.PAGES*256-SEGOFFSET);

   7509   3 0003AD  D800 0000 0085  01                   LDR,R5   USEG+2
          3 0003B0  5008                                 SOL,R5   8
          3 0003B1  8255                                 NEG      R5
          3 0003B2  DA47 000C                            ADD,R5   SEGOFFSET,AUTO
          3 0003B4  5001                                 SOL,R5   1
          3 0003B5  8255                                 NEG      R5
          3 0003B6  DF47 000F                            STR,R5   SIZE,AUTO

      343     7510
      344     7511    3           IF SIZE=0 THEN DO;         /* HAVE TO SEND SOMETHING, HOST IS WAITING */

   7511   3 0003B8  D847 000F                            LDR,R5   SIZE,AUTO
          3 0003BA  5981 0017                            BNEZ,R5  s:7516,PREL

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:51   
      345     7512    3              REPLY = '0'B;

   7512   3 0003BC  EC80 0000 0004  02                   LDB,B6   MSGBUF$
          3 0003BF  C846 0004                            LDR,R4   4,B6
          3 0003C1  CF47 0024                            STR,R4   LCTADR+3,AUTO
          3 0003C3  AB80 0000 0000  04                   LAB,B2   0
          3 0003C6  2C00                                 LDV,R2   0
          3 0003C7  6C01                                 LDV,R6   1
          3 0003C8  BB86                                 LAB,B3   ,B6
          3 0003C9  3C00                                 LDV,R3   0
          3 0003CA  F854                                 LDR,R7   R4
          3 0003CB  7E0A                                 ADV,R7   10
          3 0003CC  D380 0000 0000  xent                 LNJ,B5   X6C_ALRZ

      346     7513    3              CALL SENDREPLY;

   7513   3 0003CF  E3C0 01AE                            LNJ,B6   s:0,PREL
          3 0003D1       0001                            DC       s:7516,PREL

      347     7514    3              END;

      348     7515
      349     7516    3           DO WHILE(SIZE>0);

   7516   3 0003D2  E847 000F                            LDR,R6   SIZE,AUTO
          3 0003D4  6901 0062                            BEZ,R6   s:7531,PREL

      350     7517    3              CBSIZE=MINIMUM(SIZE,256);

   7517   3 0003D6  E870 0100                            LDR,R6   256,IMO
          3 0003D8  E947 000F                            CMR,R6   SIZE,AUTO
          3 0003DA  0381 0003                            BLE      s:7517+8,PREL
          3 0003DC  E847 000F                            LDR,R6   SIZE,AUTO
          3 0003DE  EF47 0015                            STR,R6   CBSIZE,AUTO

      351     7518    3              REPLY.ARS=CBSIZE;

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:52   
   7518   3 0003E0  EC80 0000 0004  02                   LDB,B6   MSGBUF$
          3 0003E3  EF46 0004                            STR,R6   4,B6

      352     7519    3              REPLY.L6ADR=L6ADR;

   7519   3 0003E5  8CC7 000A                            LDI      L6ADR,AUTO
          3 0003E7  7088                                 DOL,R7   8
          3 0003E8  8D47 0024                            SDI      LCTADR+3,AUTO
          3 0003EA  ABC7 0024                            LAB,B2   LCTADR+3,AUTO
          3 0003EC  2C00                                 LDV,R2   0
          3 0003ED  6C20                                 LDV,R6   32
          3 0003EE  BB86                                 LAB,B3   ,B6
          3 0003EF  3C00                                 LDV,R3   0
          3 0003F0  7C18                                 LDV,R7   24
          3 0003F1  D380 0000 0000  xent                 LNJ,B5   X6B_BLR

      353     7520    3              L6ADR=L6ADR+CBSIZE/2;

   7520   3 0003F4  E847 0015                            LDR,R6   CBSIZE,AUTO
          3 0003F6  6041                                 SOR,R6   1
          3 0003F7  F856                                 LDR,R7   R6
          3 0003F8  6C00                                 LDV,R6   0
          3 0003F9  8447 000A                            AID      L6ADR,AUTO
          3 0003FB  8D47 000A                            SDI      L6ADR,AUTO

      354     7521    3              SIZE=SIZE-CBSIZE;

   7521   3 0003FD  D847 000F                            LDR,R5   SIZE,AUTO
          3 0003FF  D247 0015                            SUB,R5   CBSIZE,AUTO
          3 000401  DF47 000F                            STR,R5   SIZE,AUTO

      355     7522    3              IF SIZE=0 THEN

   7522   3 000403  5981 0009                            BNEZ,R5  s:7525,PREL

      356     7523    3                 REPLY.CONT=0;

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:53   
   7523   3 000405  EC80 0000 0004  02                   LDB,B6   MSGBUF$
          3 000408  8846 0001                            LBF,'00FF'X       1,B6
          3 00040A       00FF
          3 00040B  0F81 0008                            B        s:7526,PREL

      357     7524    3              ELSE
      358     7525    3                 REPLY.CONT=1;

   7525   3 00040D  4C01                                 LDV,R4   1
          3 00040E  EC80 0000 0004  02                   LDB,B6   MSGBUF$
          3 000411  CAC6 0001                            SRM,R4,'00FF'X    1,B6
          3 000413       00FF

      359     7526    3              REPLY.ERROR='0'B;

   7526   3 000414  8746 0002                            CL       2,B6
          3 000416  8746 0003                            CL       3,B6

      360     7527    3              REPLY.DATA=CBASE;

   7527   3 000418  C846 0004                            LDR,R4   4,B6
          3 00041A  CF47 0024                            STR,R4   LCTADR+3,AUTO
          3 00041C  ACC7 0011                            LDB,B2   MEM$,AUTO
          3 00041E  2C00                                 LDV,R2   0
          3 00041F  E847 0015                            LDR,R6   CBSIZE,AUTO
          3 000421  BB86                                 LAB,B3   ,B6
          3 000422  3C0A                                 LDV,R3   10
          3 000423  F854                                 LDR,R7   R4
          3 000424  D380 0000 0000  xent                 LNJ,B5   X6C_ALR

      361     7528    3              MEM$=PINCRW(MEM$,CBSIZE/2);

   7528   3 000427  E847 0015                            LDR,R6   CBSIZE,AUTO
          3 000429  6041                                 SOR,R6   1
          3 00042A  F856                                 LDR,R7   R6
          3 00042B  6C00                                 LDV,R6   0
          3 00042C  8447 0011                            AID      MEM$,AUTO
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:54   
          3 00042E  8D47 0011                            SDI      MEM$,AUTO

      362     7529    3              CALL SENDREPLY;

   7529   3 000430  E3C0 014D                            LNJ,B6   s:0,PREL
          3 000432       0001                            DC       s:7530,PREL

      363     7530    3              END;

   7530   3 000433  E847 000F                            LDR,R6   SIZE,AUTO
          3 000435  6981 FFA0                            BNEZ,R6  s:7517,PREL

      364     7531    2           RETURN;

   7531   3 000437  ECC7 001E                            LDB,B6   NEEDREPLY+2,AUTO
          3 000439  C3C6 0001                            LNJ,B4   1,B6

      365     7532
      366     7533    2   END MAP;
      367     7534
      368     7535        %EJECT;
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:55   
      369     7536    1   RUE:    PROC;

   7536   3 00043B  EFC7 001E            RUE             STB,B6   NEEDREPLY+2,AUTO

      370     7537
      371     7538    2           REPLY.ARS = 0;

   7538   3 00043D  DC80 0000 0004  02                   LDB,B5   MSGBUF$
          3 000440  8745 0004                            CL       4,B5

      372     7539    2           REPLY = '0'B;

   7539   3 000442  E845 0004                            LDR,R6   4,B5
          3 000444  EF47 0024                            STR,R6   LCTADR+3,AUTO
          3 000446  AB80 0000 0000  04                   LAB,B2   0
          3 000449  2C00                                 LDV,R2   0
          3 00044A  6C01                                 LDV,R6   1
          3 00044B  BB85                                 LAB,B3   ,B5
          3 00044C  3C00                                 LDV,R3   0
          3 00044D  F847 0024                            LDR,R7   LCTADR+3,AUTO
          3 00044F  7E0A                                 ADV,R7   10
          3 000450  D380 0000 0000  xent                 LNJ,B5   X6C_ALRZ

      373     7540    2           FPT_RUE.V.EVENT = REQUEST.L6ADR;

   7540   3 000453  EB80 0000 0000  01                   LAB,B6   FPT_OPEN
          3 000456  5C02                                 LDV,R5   2
          3 000457  0021                                 ALR      ;
          3 000458       C206 015E                                ALPHANUM(350,B6,1,2),;
          3 00045A       4007 0026                                ALPHANUM(LCTADR+5,AUTO,,R5,FILL)
          3 00045C  437F                                 CSYNC    s:7540+8,SPREL
          3 00045D  F847 0026                            LDR,R7   LCTADR+5,AUTO
          3 00045F  6C00                                 LDV,R6   0
          3 000460  7098                                 DOL,R7   24
          3 000461  8D47 0024                            SDI      LCTADR+3,AUTO
          3 000463  ABC7 0024                            LAB,B2   LCTADR+3,AUTO
          3 000465  2C00                                 LDV,R2   0
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:56   
          3 000466  6C20                                 LDV,R6   32
          3 000467  BB80 0000 00AC  01                   LAB,B3   FPT_RUE+4
          3 00046A  3C00                                 LDV,R3   0
          3 00046B  7C08                                 LDV,R7   8
          3 00046C  D380 0000 0000  xent                 LNJ,B5   X6B_BLR

      374     7541    3           IF REQUEST.SYSID < 0 THEN DO;

   7541   3 00046F  8C80 0000 0160  01                   LDI      REQUEST+2
          3 000472  84F0 0000 0000                       SID      0,IMO
          3 000475  6881 0023                            BGEZ,R6  s:7550,PREL

      375     7542    3              I = -REQUEST.SYSID;

   7542   3 000477  8C80 0000 0160  01                   LDI      REQUEST+2
          3 00047A  8656                                 CPL      R6
          3 00047B  8657                                 CPL      R7
          3 00047C  8470 0000 0001                       AID      1,IMO
          3 00047F  E857                                 LDR,R6   R7
          3 000480  EF47 0010                            STR,R6   I,AUTO

      376     7543    3              IF I > MUAIS THEN

   7543   3 000482  E947 0007                            CMR,R6   MUAIS,AUTO
          3 000484  0381 0007                            BLE      s:7546,PREL

      377     7544    3                 I = 32767;

   7544   3 000486  E870 7FFF                            LDR,R6   32767,IMO
          3 000488  EF47 0010                            STR,R6   I,AUTO
          3 00048A  0F81 0009                            B        s:7547,PREL

      378     7545    3              ELSE
      379     7546    3                 I = G$USER.SYSID(I);

   7546   3 00048C  ECC7 0008                            LDB,B6   USRT$,AUTO
          3 00048E  B856                                 LDR,R3   R6
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:57   
          3 00048F  3F18                                 MLV,R3   24
          3 000490  3E13                                 ADV,R3   19
          3 000491  E836                                 LDR,R6   ,B6,R3
          3 000492  EF47 0010                            STR,R6   I,AUTO

      380     7547    3              FPT_RUE.V.USER = I;

   7547   3 000494  EF00 0000 00AB  01                   STR,R6   FPT_RUE+3

      381     7548    3              END;

   7548   3 000497  0F81 0007                            B        s:7551,PREL

      382     7549    2           ELSE
      383     7550    2              FPT_RUE.V.USER = REQUEST.SYSID;

   7550   3 000499  E800 0000 0161  01                   LDR,R6   REQUEST+3
          3 00049C  EF00 0000 00AB  01                   STR,R6   FPT_RUE+3

      384     7551    3           CALL M$SPRIV(SET_MSYS) WHENALTRETURN DO; END;

   7551   3 00049F  BB80 0000 005D  01                   LAB,B3   SET_MSYS
          3 0004A2  B870 0CD0                            LDR,R3   3280,IMO
          3 0004A4  0001                                 MCL
          3 0004A5       0003                            DC       s:7552,PREL
          3 0004A6  0F81 0001                            B        s:7552,PREL

      385     7552    3           CALL M$RUE(FPT_RUE) WHENALTRETURN DO;

   7552   3 0004A8  BB80 0000 00A8  01                   LAB,B3   FPT_RUE
          3 0004AB  B870 04D7                            LDR,R3   1239,IMO
          3 0004AD  0001                                 MCL
          3 0004AE       0003                            DC       s:7553,PREL
          3 0004AF  0F81 000C                            B        s:7555,PREL

      386     7553    3              REPLY.ERROR = G$ALT.TRLR.ERR;

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:58   
   7553   3 0004B1  EC80 0000 0000  xsym                 LDB,B6   G$TCB$
          3 0004B4  DC86                                 LDB,B5   ,B6
          3 0004B5  8CC5 002B                            LDI      43,B5
          3 0004B7  CC80 0000 0004  02                   LDB,B4   MSGBUF$
          3 0004BA  8D44 0002                            SDI      2,B4

      387     7554    3              END;

      388     7555    3           CALL M$SPRIV(SET_SPCLMM) WHENALTRETURN DO; END;

   7555   3 0004BC  BB80 0000 0053  01                   LAB,B3   SET_SPCLMM
          3 0004BF  B870 0CD0                            LDR,R3   3280,IMO
          3 0004C1  0001                                 MCL
          3 0004C2       0003                            DC       s:7556,PREL
          3 0004C3  0F81 0001                            B        s:7556,PREL

      389     7556    2           CALL SENDREPLY;

   7556   3 0004C5  E3C0 00B8                            LNJ,B6   s:0,PREL
          3 0004C7       0001                            DC       s:7558,PREL

      390     7557
      391     7558    2   END RUE;

   7558   3 0004C8  ECC7 001E                            LDB,B6   NEEDREPLY+2,AUTO
          3 0004CA  C3C6 0001                            LNJ,B4   1,B6

      392     7559
      393     7560    1   GETLCTS: PROC;

   7560   3 0004CC  EFC7 001E            GETLCTS         STB,B6   NEEDREPLY+2,AUTO

      394     7561
      395     7562    2   DCL CHAN UBIN;
      396     7563    2   DCL LCTADR UBIN;
      397     7564
      398     7565    2           CHAN=REQUEST.L6ADR;
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:59   

   7565   3 0004CE  DB80 0000 0000  01                   LAB,B5   FPT_OPEN
          3 0004D1  5C02                                 LDV,R5   2
          3 0004D2  0021                                 ALR      ;
          3 0004D3       C205 015E                                ALPHANUM(350,B5,1,2),;
          3 0004D5       4007 0024                                ALPHANUM(LCTADR+3,AUTO,,R5,FILL)
          3 0004D7  437F                                 CSYNC    s:7565+8,SPREL
          3 0004D8  E847 0024                            LDR,R6   LCTADR+3,AUTO
          3 0004DA  EF47 0020                            STR,R6   CHAN,AUTO

      399     7566    2           REPLY='0'B;

   7566   3 0004DC  DC80 0000 0004  02                   LDB,B5   MSGBUF$
          3 0004DF  C845 0004                            LDR,R4   4,B5
          3 0004E1  CF47 0024                            STR,R4   LCTADR+3,AUTO
          3 0004E3  AB80 0000 0000  04                   LAB,B2   0
          3 0004E6  2C00                                 LDV,R2   0
          3 0004E7  6C01                                 LDV,R6   1
          3 0004E8  BB85                                 LAB,B3   ,B5
          3 0004E9  3C00                                 LDV,R3   0
          3 0004EA  F854                                 LDR,R7   R4
          3 0004EB  7E0A                                 ADV,R7   10
          3 0004EC  D380 0000 0000  xent                 LNJ,B5   X6C_ALRZ

      400     7567    2           REPLY.L6ADR=CHAN;

   7567   3 0004EF  F847 0020                            LDR,R7   CHAN,AUTO
          3 0004F1  6C00                                 LDV,R6   0
          3 0004F2  7088                                 DOL,R7   8
          3 0004F3  8D47 0024                            SDI      LCTADR+3,AUTO
          3 0004F5  ABC7 0024                            LAB,B2   LCTADR+3,AUTO
          3 0004F7  2C00                                 LDV,R2   0
          3 0004F8  6C20                                 LDV,R6   32
          3 0004F9  BC80 0000 0004  02                   LDB,B3   MSGBUF$
          3 0004FC  3C00                                 LDV,R3   0
          3 0004FD  7C18                                 LDV,R7   24
          3 0004FE  D380 0000 0000  xent                 LNJ,B5   X6B_BLR
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:60   

      401     7568    2           LCTADR=0;

   7568   3 000501  8747 0021                            CL       LCTADR,AUTO

      402     7569    2           CHN$=PINCRW(CHT$,SIZEW(KH$CHN)*(CHAN/128));

   7569   3 000503  E847 0020                            LDR,R6   CHAN,AUTO
          3 000505  6047                                 SOR,R6   7
          3 000506  F856                                 LDR,R7   R6
          3 000507  6C00                                 LDV,R6   0
          3 000508  7085                                 DOL,R7   5
          3 000509  8447 0016                            AID      CHT$,AUTO
          3 00050B  8D47 001A                            SDI      CHN$,AUTO

      403     7570
      404     7571    3           IF CHAN<LOCHAN OR CHAN>HICHAN THEN DO;

   7571   3 00050D  D847 0020                            LDR,R5   CHAN,AUTO
          3 00050F  D947 0018                            CMR,R5   LOCHAN,AUTO
          3 000511  0201 0005                            BL       s:7572,PREL
          3 000513  D947 0019                            CMR,R5   HICHAN,AUTO
          3 000515  0381 000B                            BLE      s:7580,PREL

      405     7572    3              REPLY.ERROR=BADCHAN;

   7572   3 000517  8C80 0000 0167  01                   LDI      BADCHAN
          3 00051A  EC80 0000 0004  02                   LDB,B6   MSGBUF$
          3 00051D  8D46 0002                            SDI      2,B6

      406     7573
      407     7574        /*E*       ERROR:  DBF-E$DB_BAD_CHAN;
      408     7575                   MESSAGE: Illicit channel number.
      409     7576        */
      410     7577
      411     7578    3              END;

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:61   
   7578   3 00051F  0F81 0057                            B        s:7607,PREL

      412     7579    3           ELSE DO;

      413     7580    4              IF KH$CHN.DVCID = '2408'X THEN DO;

   7580   3 000521  ECC7 001A                            LDB,B6   CHN$,AUTO
          3 000523  C846 0002                            LDR,R4   2,B6
          3 000525  C970 2408                            CMR,R4   9224,IMO
          3 000527  0981 0003                            BNE      s:7586,PREL

      414     7581                      /*
      415     7582                         dont do coupler channels.  It doesn't work
      416     7583                      */
      417     7584    4                 GOTO IONAK;

   7584   3 000529  0F81 0039                            B        s:7597,PREL

      418     7585    4                 END;
      419     7586    3              CALL M$SYS;

   7586   3 00052B  3C43                                 LDV,R3   67
          3 00052C  0001                                 MCL
          3 00052D       0000                            DC       s:7586+2,PREL

      420     7587    4              DO WHILE(LCTADR<REQUEST.SIZE);

   7587   3 00052E  E847 0021                            LDR,R6   LCTADR,AUTO
          3 000530  E900 0000 0162  01                   CMR,R6   REQUEST+4
          3 000533  0281 003D                            BGE      s:7605,PREL

      421     7588    4                 KH$IO.LCTBYT.ADR=LCTADR;

   7588   3 000535  E847 0021                            LDR,R6   LCTADR,AUTO
          3 000537  EA80 0000 0157  01                   SRM,R6,'00FF'X    KH$IO+1
          3 00053A       00FF

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:62   
      422     7589    5                 CALL KHI$IO_INPLCTBYT(KH$CHN,KH$IO) WHENRETURN DO;

   7589   3 00053B  EB80 0000 0156  01                   LAB,B6   KH$IO
          3 00053E  EFC7 0026                            STB,B6   LCTADR+5,AUTO
          3 000540  DCC7 001A                            LDB,B5   CHN$,AUTO
          3 000542  DFC7 0024                            STB,B5   LCTADR+3,AUTO
          3 000544  BBC7 0024                            LAB,B3   LCTADR+3,AUTO
          3 000546  CBF0 0200                            LAB,B4   512,IMO
          3 000548  E380 0000 0000  xent                 LNJ,B6   KHI$IO_INPLCTBYT
          3 00054B       0013                            DC       s:7595,PREL

      423     7590    5                    REPLY.ARS=REPLY.ARS+1;

   7590   3 00054C  EC80 0000 0004  02                   LDB,B6   MSGBUF$
          3 00054F  8AC6 0004                            INC      4,B6

      424     7591    5                    SUBSTR(REPLY.DATA,LCTADR,1)=BINASC(KH$IO.LCTBYT.DAT);

   7591   3 000551  E846 0004                            LDR,R6   4,B6
          3 000553  D080 0000 0157  01                   LDH,R5   KH$IO+1
          3 000556  B847 0021                            LDR,R3   LCTADR,AUTO
          3 000558  3E0A                                 ADV,R3   10
          3 000559  D7B6                                 STH,R5   ,B6,R3

      425     7592    5                    LCTADR=LCTADR+1;

   7592   3 00055A  8AC7 0021                            INC      LCTADR,AUTO

      426     7593    5                    END;

   7593   3 00055C  0F81 000E                            B        s:7604,PREL

      427     7594    5                 WHENALTRETURN DO;

      428     7595    5                    LCTADR=REQUEST.SIZE;

   7595   3 00055E  E800 0000 0162  01                   LDR,R6   REQUEST+4
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:63   
          3 000561  EF47 0021                            STR,R6   LCTADR,AUTO

      429     7596    5   IONAK:
      430     7597    5                    REPLY.ERROR=IONAK;

   7597   3 000563  8C80 0000 0169  01   IONAK           LDI      IONAK
          3 000566  EC80 0000 0004  02                   LDB,B6   MSGBUF$
          3 000569  8D46 0002                            SDI      2,B6

      431     7598
      432     7599        /*E*             ERROR:  DBF-E$DB_IONAK
      433     7600                         MESSAGE: IO NAK trying to read LCT byte.
      434     7601        */
      435     7602
      436     7603    5                    END;

      437     7604    4                 END;

   7604   3 00056B  E847 0021                            LDR,R6   LCTADR,AUTO
          3 00056D  E900 0000 0162  01                   CMR,R6   REQUEST+4
          3 000570  0245                                 BL       s:7588,SPREL

      438     7605    3              CALL KHI$SLAVE;

   7605   3 000571  CBF0 0000                            LAB,B4   0,IMO
          3 000573  E380 0000 0000  xent                 LNJ,B6   KHI$SLAVE
          3 000576       0001                            DC       s:7607,PREL

      439     7606    3              END;

      440     7607    2           CALL SENDREPLY;

   7607   3 000577  E3C0 0006                            LNJ,B6   s:0,PREL
          3 000579       0001                            DC       s:7608,PREL

      441     7608    2           RETURN;

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:64   
   7608   3 00057A  ECC7 001E                            LDB,B6   NEEDREPLY+2,AUTO
          3 00057C  C3C6 0001                            LNJ,B4   1,B6

      442     7609
      443     7610    2   END GETLCTS;
      444     7611
      445     7612    1   SENDREPLY: PROC;

   7612   3 00057E  EFC7 0022            SENDREPLY       STB,B6   LCTADR+1,AUTO

      446     7613
      447     7614    2           FPT_WRITE.BUF_=VECTOR(REPLY);

   7614   3 000580  DC80 0000 0004  02                   LDB,B5   MSGBUF$
          3 000583  E845 0004                            LDR,R6   4,B5
          3 000585  DFC7 0025                            STB,B5   LCTADR+4,AUTO
          3 000587  6003                                 SOL,R6   3
          3 000588  6E5F                                 ADV,R6   95
          3 000589  6044                                 SOR,R6   4
          3 00058A  6001                                 SOL,R6   1
          3 00058B  6EFF                                 ADV,R6   -1
          3 00058C  EF47 0024                            STR,R6   LCTADR+3,AUTO
          3 00058E  ABC7 0024                            LAB,B2   LCTADR+3,AUTO
          3 000590  2C00                                 LDV,R2   0
          3 000591  6C06                                 LDV,R6   6
          3 000592  BB80 0000 0047  01                   LAB,B3   FPT_WRITE+6
          3 000595  3C00                                 LDV,R3   0
          3 000596  0008                                 MMM

      448     7615    2           CALL M$WRITE(FPT_WRITE);

   7615   3 000597  BB80 0000 0041  01                   LAB,B3   FPT_WRITE
          3 00059A  B870 1543                            LDR,R3   5443,IMO
          3 00059C  0001                                 MCL
          3 00059D       0000                            DC       s:7615+6,PREL

      449     7616    2           RETURN;
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:65   

   7616   3 00059E  ECC7 0022                            LDB,B6   LCTADR+1,AUTO
          3 0005A0  C3C6 0001                            LNJ,B4   1,B6
      450     7617
      451     7618    2   END SENDREPLY;
      452     7619    1   END DBF$ANLZ;
      453     7620        %EOD;

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:66   
--  Include file information  --

   KH$CHN.:E05TOU  is referenced.
   KH$IO.:E05TOU  is referenced.
   G_JIT_M.:E05TOU  is referenced.
   GM_VIRTUAL_E.:E05TOU  is referenced.
   GH_IOFNC_E.:E05TOU  is referenced.
   GH_SCHD_E.:E05TOU  is referenced.
   GH_SCHD_M.:E05TOU  is referenced.
   GH_HARDWARE_M.:E05TOU  is referenced.
   DB_MACRO_M.:E05TOU  is referenced.
   DB_PERR_C.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  is referenced.
   GT_LCP6_M.:E05TOU  is referenced.
   KI_CP6.:E05TOU  is referenced.
   GF_LCP6_M.:E05TOU  is referenced.
   GM_LCP6_M.:E05TOU  is referenced.
   GU_LCP6_M.:E05TOU  is referenced.
   GJ_LCP6_M.:E05TOU  is referenced.
   GH_LCP6_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBF$ANLZ.
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:67   

 **** Variables and constants ****

  ****  Section 001  Data  DBF$ANLZ

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

   167-0-0/w STRC(32)    r     1 BADCHAN                   89-0-0/w STRC(48)    r     1 CACHESEG
   158-0-0/w STRC(32)    r     1 DB_ERROR                 15A-0-0/d REMB        r     1 DB_TRAPRETURN
    67-0-0/w STRC(192)   r     1 FPT_CVM                   7B-0-0/w STRC(128)   r     1 FPT_FDS
    73-0-0/w STRC(128)   r     1 FPT_GDS                    0-0-0/w STRC(752)   r     1 FPT_OPEN
    2F-0-0/w STRC(288)   r     1 FPT_READ                  A8-0-0/d STRC(80)    r     1 FPT_RUE
    8E-0-0/w STRC(96)    r     1 FPT_TRAP                  41-0-0/w STRC(288)   r     1 FPT_WRITE
    A0-0-0/w STRC(128)   r     1 FPT_XCON                  86-0-0/w STRC(48)    r     1 FSEG
   169-0-0/w STRC(32)    r     1 IONAK                    156-0-0/w STRC(32)    r     1 KH$IO
    8C-0-0/w STRC(16)    r     1 LEV_INHIB                 8D-0-0/w STRC(16)    r     1 LEV_SUSPEND
    B9-0-0/c CHAR(300)   r     1 MSGBUF                   16B-0-0/w STRC(32)    r     1 NOSEG
   165-0-0/w STRC(32)    r     1 NOUSER                   15E-0-0/w STRC(112)   r     1 REQUEST
    B8-0-0/w UBIN(16)    r     1 SEC1                      5D-0-0/w STRC(160)   r     1 SET_MSYS
    53-0-0/w STRC(160)   r     1 SET_SPCLMM               152-0-0/w PTR         r     1 SVBASE$
   151-0-0/w UBIN(16)    r     1 SVDOMAIN                 150-0-0/w UBIN(16)    r     1 SVPGS
   154-0-0/w PTR         r     1 SVTOP$                   14F-0-0/w UBIN(16)    r     1 SVUSR
    94-0-0/w STRC(192)   r     1 TRAPCOND                  83-0-0/w STRC(48)    r     1 USEG
    AE-0-0/w STRC(160)   r     1 WAIT1

  ****  Section 002 RoData DBF$ANLZ

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     6-0-0/w PTR         r     1 G$BOBCAT$                  6-0-0/w UBIN(32)    r     1 G$BOBCATPTR
     4-0-0/w PTR         r     1 MSGBUF$                    2-0-0/b BIT (32)    r     1 MSYS
     8-0-0/w PTR         r     1 NIL$                       8-0-0/w UBIN(32)    r     1 NILPTR
     0-0-0/b BIT (32)    r     1 SPCLMM

  ****  Auto variables  ****

PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:68   
  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     5-0-0/w UBIN(8)     r     1 CACHEIT                    6-0-0/w UBIN(16)    r     1 CACHEPGS
    15-0-0/w UBIN(16)    r     1 CBSIZE                    20-0-0/w UBIN(16)    r     1 CHAN
    1A-0-0/w PTR         r     1 CHN$                      16-0-0/w PTR         r     1 CHT$
     D-0-0/w UBIN(16)    r     1 DOM                       19-0-0/w UBIN(16)    r     1 HICHAN
    10-0-0/w UBIN(16)    r     1 I                          A-0-0/w UBIN(32)    r     1 L6ADR
    21-0-0/w UBIN(16)    r     1 LCTADR                    18-0-0/w UBIN(16)    r     1 LOCHAN
    11-0-0/w PTR         r     1 MEM$                       7-0-0/w UBIN(16)    r     1 MUAIS
    1C-0-0/b BIT         r     1 NEEDREPLY                  C-0-0/w UBIN(16)    r     1 SEGOFFSET
     F-0-0/w UBIN(16)    r     1 SIZE                       E-0-0/w SBIN(16)    r     1 SYSID
    13-0-0/w PTR         r     1 TMP$                       4-0-0/w UBIN(8)     r     1 USECACHE
     8-0-0/w PTR         r     1 USRT$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 G$DS3$                     0-0-0/w PTR         r     1 G$DS4$
     0-0-0/w PTR         r     1 G$ISR3$                    0-0-0/w PTR         r     1 G$TCB$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c ACHR        r     1 CBASE                      0-0-0/w STRC(736)   r     1 G$ALT
     0-0-0/w STRC(32)    r     1 G$ASDT(0:30)               0-0-0/w STRC(1696)  r     1 G$BOBCAT
     0-0-0/w STRC(96)    r     1 G$TCB                      0-0-0/w STRC(384)   r     1 G$USER(0:0)
     0-0-0/w STRC(512)   r     1 KH$CHN                     0-0-0N  NULL        r     1 M$HOST
     0-0-0/w UBIN(16)    r     1 PG(0:255)                  0-0-0/w ASTR(80)    r     1 REPLY


   Procedure DBF$ANLZ requires 1442 words for executable code.
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:69   
   Procedure DBF$ANLZ requires 56 words of local(AUTO) storage.
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:70   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:71   
          MINI XREF LISTING

BADCHAN
      7157**DCL      7572>>ASSIGN
CACHEIT
      6289**DCL      7391<<ASSIGN   7454>>IF       7458>>IF       7474>>IF
CACHEPGS
      6290**DCL      7392<<ASSIGN   7455>>ASSIGN
CACHESEG
      5961**DCL      5875--DCLINIT  5899--DCLINIT
CACHESEG.BASE
      5965**DCL      5965--REDEF
CACHESEG.BASE$
      5965**DCL      7463<<ASSIGN   7480<<ASSIGN
CBASE
      6304**DCL      7527>>ASSIGN
CBSIZE
      6303**DCL      6304--IMP-SIZ  7517<<ASSIGN   7518>>ASSIGN   7520>>ASSIGN   7521>>ASSIGN   7527>>ASSIGN
      7528>>ASSIGN
CHAN IN PROCEDURE GETLCTS
      7562**DCL      7565<<ASSIGN   7567>>ASSIGN   7569>>ASSIGN   7571>>IF       7571>>IF
CHN$
      6309**DCL      6325--IMP-PTR  7569<<ASSIGN   7580>>IF       7589>>CALL
CHT$
      6306**DCL      7336<<ASSIGN   7569>>ASSIGN
DBF$TRAP
      5617**DCL-ENT  6048--DCLINIT
DBF$XCON
      5618**DCL-ENT  6229--DCLINIT
DB_ERROR
      6564**DCL      7319<<ASSIGN   7339<<ASSIGN   7349>>ASSIGN   7350<<ASSIGN   7359>>IF
DB_TRAPRETURN
      6596**DCL      7343<<REMEMBR
DOM
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:72   
      6297**DCL      7387<<ASSIGN   7394>>IF       7396<<ASSIGN   7398<<ASSIGN   7401>>DOCASE   7458>>IF
      7476>>ASSIGN
FPT_CVM
      5848**DCL      7331<>CALL     7433<>CALL     7468<>CALL
FPT_CVM.V
      5852**DCL      5851--DCLINIT
FPT_CVM.V.TYPE
      5856**DCL      7403<<ASSIGN   7407<<ASSIGN   7427<<ASSIGN   7431<<ASSIGN   7451>>IF
FPT_CVM.V.USERID
      5856**DCL      7409<<ASSIGN   7415<<ASSIGN   7417>>IF       7417>>IF
FPT_FDS
      5896**DCL      7465<>CALL
FPT_FDS.V
      5899**DCL      5899--DCLINIT
FPT_FDS.V.PAGES
      5903**DCL      7464<<ASSIGN
FPT_GDS
      5872**DCL      7481<>CALL
FPT_GDS.V
      5875**DCL      5875--DCLINIT
FPT_GDS.V.PAGES
      5879**DCL      7479<<ASSIGN
FPT_OPEN
      5713**DCL      7323<>CALL
FPT_OPEN.V
      5721**DCL      5715--DCLINIT
FPT_READ
      5743**DCL      7357<>CALL
FPT_READ.V
      5748**DCL      5745--DCLINIT
FPT_RUE
      6245**DCL      7552<>CALL
FPT_RUE.V
      6247**DCL      6247--DCLINIT
FPT_RUE.V.EVENT
      6252**DCL      7540<<ASSIGN
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:73   
FPT_RUE.V.USER
      6252**DCL      7547<<ASSIGN   7550<<ASSIGN
FPT_TRAP
      6027**DCL      7344<>CALL
FPT_WRITE
      5769**DCL      7615<>CALL
FPT_WRITE.BUF_
      5771**DCL      7614<<ASSIGN
FPT_WRITE.V
      5774**DCL      5771--DCLINIT
FPT_XCON
      6214**DCL      7325<>CALL
FPT_XCON.V
      6227**DCL      6218--DCLINIT
FPT_XCON.V_
      6218**DCL      6218--REDEF
FSEG
      5940**DCL      5851--DCLINIT
FSEG.BASE
      5944**DCL      5944--REDEF
FSEG.BASE$
      5944**DCL      7330<<ASSIGN   7453<<ASSIGN
FSEG.PAGES
      5944**DCL      7429<<ASSIGN   7432<<ASSIGN   7448<<ASSIGN   7455<<ASSIGN
G$ALT.P$$
      6782**DCL      6782--REDEF    6782--REDEF
G$ALT.PREVSZ
      6732**DCL      6732--REDEF
G$ALT.TRLR.ERR
      7062**DCL      7339>>ASSIGN   7470>>ASSIGN   7553>>ASSIGN
G$ALT.TRLR.EVID
      7019**DCL      7037--REDEF    7045--REDEF    7045--REDEF
G$ALT.TRLR.SUBC
      6996**DCL      6996--REDEF    7014--REDEF    7018--REDEF    7018--REDEF
G$ASDT.DESC.BASE
      7306**DCL      7448>>ASSIGN
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:74   
G$ASDT.DESC.SIZE
      7308**DCL      7446>>IF       7447>>ASSIGN
G$ASDT.DESC.V
      7306**DCL      7437>>IF
G$BOBCAT.CHNHI
      6674**DCL      7335>>ASSIGN
G$BOBCAT.CHNLOW
      6674**DCL      7334>>ASSIGN
G$BOBCAT.CHNLOW$
      6675**DCL      7336>>ASSIGN
G$BOBCAT.MUIS
      6669**DCL      7332>>ASSIGN
G$BOBCAT.USRT$
      6671**DCL      7333>>ASSIGN
G$BOBCAT$
      6602**DCL      7330>>ASSIGN
G$BOBCATPTR
      6601**DCL      6602--REDEF
G$DS3$
      6598**DCL      7287--IMP-PTR  7342>>ASSIGN   7434>>ASSIGN   7437>>IF       7446>>IF       7447>>ASSIGN
      7448>>ASSIGN   7483>>ASSIGN   7507>>ASSIGN
G$DS4$
      6599**DCL      6668--IMP-PTR  7329>>ASSIGN   7332>>ASSIGN   7333>>ASSIGN   7334>>ASSIGN   7335>>ASSIGN
      7336>>ASSIGN
G$ISR3$
      6600**DCL      7463>>ASSIGN   7480>>ASSIGN   7484>>ASSIGN   7505>>ASSIGN
G$TCB.ALT$
      6710**DCL      7339>>ASSIGN   7470>>ASSIGN   7553>>ASSIGN
G$TCB$
      6603**DCL      7339>>ASSIGN   7470>>ASSIGN   7553>>ASSIGN
G$USER.MISC
      6686**DCL      6686--REDEF
G$USER.SYSID
      6689**DCL      7413>>IF       7546>>ASSIGN
G$USER.US
      6686**DCL      7417>>IF
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:75   
GETLCTS
      7560**PROC     7362--CALL
GHH$LEV
      5621**DCL-ENT  7486--CALL     7490--CALL
HICHAN
      6308**DCL      7335<<ASSIGN   7571>>IF
I
      6300**DCL      7412<<DOINDEX  7413>>IF       7415>>ASSIGN   7435<<ASSIGN   7436>>IF       7436<<ASSIGN
      7436>>ASSIGN   7437>>IF       7446>>IF       7447>>ASSIGN   7448>>ASSIGN   7458>>IF       7477>>ASSIGN
      7487<<DOINDEX  7488>>ASSIGN   7488>>ASSIGN   7542<<ASSIGN   7543>>IF       7544<<ASSIGN   7546<<ASSIGN
      7546>>ASSIGN   7547>>ASSIGN
IONAK
      7203**DCL      7597>>ASSIGN
IONAK IN PROCEDURE GETLCTS
      7597**LABEL    7584--GOTO
KH$CHN
      6325**DCL      7336--ASSIGN   7569--ASSIGN   7589<>CALL
KH$CHN.DVCID
      6351**DCL      7580>>IF
KH$CHN.TERMID.TERM
      6421**DCL      6430--REDEF
KH$IO
      6446**DCL      7589<>CALL
KH$IO.LCTBYT.ADR
      6462**DCL      7588<<ASSIGN
KH$IO.LCTBYT.DAT
      6462**DCL      7591>>ASSIGN
KHI$IO_INPLCTBYT
      5619**DCL-ENT  7589--CALL
KHI$SLAVE
      5620**DCL-ENT  7492--CALL     7605--CALL
L6ADR
      6295**DCL      7380<<ASSIGN   7381>>IF       7382>>ASSIGN   7385>>ASSIGN   7428>>ASSIGN   7429>>ASSIGN
      7435>>ASSIGN   7453>>ASSIGN   7457>>ASSIGN   7475>>ASSIGN   7519>>ASSIGN   7520<<ASSIGN   7520>>ASSIGN
LCTADR IN PROCEDURE GETLCTS
      7563**DCL      7568<<ASSIGN   7587>>DOWHILE  7588>>ASSIGN   7591>>ASSIGN   7592<<ASSIGN   7592>>ASSIGN
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:76   
      7595<<ASSIGN
LEV_INHIB
      5987**DCL      7486<>CALL
LEV_SUSPEND
      6009**DCL      7490<>CALL
LOCHAN
      6307**DCL      7334<<ASSIGN   7336>>ASSIGN   7571>>IF
M$CVM
      4274**DCL-ENT  7331--CALL     7433--CALL     7468--CALL
M$FDS
      4272**DCL-ENT  7465--CALL
M$GDS
      4272**DCL-ENT  7481--CALL
M$OPEN
      4277**DCL-ENT  7323--CALL
M$READ
      4277**DCL-ENT  7357--CALL
M$RUE
      4268**DCL-ENT  7552--CALL
M$SPRIV
      4266**DCL-ENT  7320--CALL     7551--CALL     7555--CALL
M$SYS
      4252**DCL-ENT  7485--CALL     7586--CALL
M$TRAP
      4261**DCL-ENT  7344--CALL
M$WAIT
      4261**DCL-ENT  7482--CALL
M$WRITE
      4278**DCL-ENT  7615--CALL
M$XCON
      4260**DCL-ENT  7325--CALL
M$XXX
      4255**DCL-ENT  7371--CALL
MAP
      7378**PROC     7366--CALL
MEM$
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:77   
      6301**DCL      6304--IMP-PTR  7484<<ASSIGN   7488>>ASSIGN   7505<<ASSIGN   7507<<ASSIGN   7527>>ASSIGN
      7528<<ASSIGN   7528>>ASSIGN
MSGBUF
      6281**DCL      6282--DCLINIT
MSGBUF$
      6282**DCL      6617--IMP-PTR  7349>>ASSIGN   7351>>ASSIGN   7418>>ASSIGN   7418>>ASSIGN   7419>>ASSIGN
      7441>>ASSIGN   7441>>ASSIGN   7442>>ASSIGN   7469>>ASSIGN   7469>>ASSIGN   7470>>ASSIGN   7512>>ASSIGN
      7512>>ASSIGN   7518>>ASSIGN   7519>>ASSIGN   7523>>ASSIGN   7525>>ASSIGN   7526>>ASSIGN   7527>>ASSIGN
      7527>>ASSIGN   7538>>ASSIGN   7539>>ASSIGN   7539>>ASSIGN   7553>>ASSIGN   7566>>ASSIGN   7566>>ASSIGN
      7567>>ASSIGN   7572>>ASSIGN   7590>>ASSIGN   7590>>ASSIGN   7591>>ASSIGN   7591>>ASSIGN   7597>>ASSIGN
      7614>>ASSIGN   7614>>ASSIGN
MSYS
      5832**DCL      5824--DCLINIT
MUAIS
      6293**DCL      7332<<ASSIGN   7412>>DOINDEX  7417>>IF       7543>>IF
NEEDREPLY
      6549**DCL      7345<<ASSIGN   7348>>IF       7358<<ASSIGN   7368<<ASSIGN
NIL$
      6605**DCL      7453>>ASSIGN   7457>>ASSIGN   7475>>ASSIGN
NILPTR
      6604**DCL      6605--REDEF
NOSEG
      7249**DCL      7442>>ASSIGN
NOSEG IN PROCEDURE MAP
      7441**LABEL    7433--CALLALT
NOUSER
      7111**DCL      7419>>ASSIGN
PG
      6291**DCL      7488<<ASSIGN   7488>>ASSIGN
REPLY
      6617**DCL      7418<<ASSIGN   7441<<ASSIGN   7469<<ASSIGN   7512<<ASSIGN   7539<<ASSIGN   7566<<ASSIGN
      7614--ASSIGN
REPLY.ARS
      6664**DCL      6664--IMP-SIZ  7418>>ASSIGN   7441>>ASSIGN   7469>>ASSIGN   7512>>ASSIGN   7518<<ASSIGN
      7527>>ASSIGN   7538<<ASSIGN   7539>>ASSIGN   7566>>ASSIGN   7590<<ASSIGN   7590>>ASSIGN   7591>>ASSIGN
      7614>>ASSIGN
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:78   
REPLY.CONT
      6617**DCL      7351<<ASSIGN   7523<<ASSIGN   7525<<ASSIGN
REPLY.DATA
      6664**DCL      7527<<ASSIGN   7591<<ASSIGN
REPLY.ERROR
      6634**DCL      7349<<ASSIGN   7419<<ASSIGN   7442<<ASSIGN   7470<<ASSIGN   7526<<ASSIGN   7553<<ASSIGN
      7572<<ASSIGN   7597<<ASSIGN
REPLY.L6ADR
      6617**DCL      7519<<ASSIGN   7567<<ASSIGN
REQUEST
      6608**DCL      5745--DCLINIT
REQUEST.CACHEIT
      6609**DCL      7391>>ASSIGN
REQUEST.CACHEPGS
      6609**DCL      7392>>ASSIGN
REQUEST.DOMAYN
      6608**DCL      7360>>DOCASE   7387>>ASSIGN
REQUEST.L6ADR
      6608**DCL      7380>>ASSIGN   7540>>ASSIGN   7565>>ASSIGN
REQUEST.SIZE
      6608**DCL      7389>>ASSIGN   7587>>DOWHILE  7595>>ASSIGN
REQUEST.SYSID
      6608**DCL      7388>>ASSIGN   7432>>ASSIGN   7434>>ASSIGN   7541>>IF       7542>>ASSIGN   7550>>ASSIGN
REQUEST.USECACHE
      6608**DCL      7390>>ASSIGN
RUE
      7536**PROC     7364--CALL
SEC1
      6279**DCL      6271--DCLINIT
SEGOFFSET
      6296**DCL      7382<<ASSIGN   7385<<ASSIGN   7428<<ASSIGN   7446>>IF       7447>>ASSIGN   7453>>ASSIGN
      7475>>ASSIGN   7505>>ASSIGN   7507>>ASSIGN   7508>>IF       7509>>ASSIGN
SENDREPLY
      7612**PROC     7352--CALL     7423--CALL     7443--CALL     7471--CALL     7513--CALL     7529--CALL
      7556--CALL     7607--CALL
SET_MSYS
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:79   
      5822**DCL      7551<>CALL
SET_MSYS.V
      5824**DCL      5824--DCLINIT
SET_SPCLMM
      5796**DCL      7320<>CALL     7555<>CALL
SET_SPCLMM.V
      5798**DCL      5798--DCLINIT
SIZE
      6299**DCL      7389<<ASSIGN   7446>>IF       7447<<ASSIGN   7458>>IF       7508>>IF       7509<<ASSIGN
      7511>>IF       7516>>DOWHILE  7517>>ASSIGN   7521<<ASSIGN   7521>>ASSIGN   7522>>IF
SPCLMM
      5806**DCL      5798--DCLINIT
SVBASE$
      6286**DCL      7458>>IF       7475<<ASSIGN   7493>>ASSIGN   7499<<ASSIGN
SVDOMAIN
      6285**DCL      7458>>IF       7476<<ASSIGN   7500<<ASSIGN
SVPGS
      6284**DCL      7458>>IF       7462>>IF       7464>>ASSIGN   7466<<ASSIGN   7478<<ASSIGN   7479>>ASSIGN
      7487>>DOINDEX  7498<<ASSIGN   7504>>IF
SVTOP$
      6287**DCL      7458>>IF       7493<<ASSIGN
SVUSR
      6283**DCL      7458>>IF       7477<<ASSIGN   7497<<ASSIGN
SYSID
      6298**DCL      7388<<ASSIGN   7395>>IF       7408>>IF       7409>>ASSIGN   7413>>IF
TMP$
      6302**DCL      7434<<ASSIGN   7457<<ASSIGN   7458>>IF       7458>>IF       7483<<ASSIGN   7488>>ASSIGN
TRAPCOND
      6048**DCL      6027--DCLINIT
TRAP_RETURN
      7348**LABEL    7343--REMEMBR  7359--GOTO
USECACHE
      6288**DCL      7390<<ASSIGN   7458>>IF       7491<<ASSIGN   7496<<ASSIGN   7504>>IF
USEG
      5919**DCL      5851--DCLINIT
USEG.BASE
PL6.E3A0      #001=DBF$ANLZ File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:12 Page:80   
      5923**DCL      5923--REDEF
USEG.BASE$
      5923**DCL      7329<<ASSIGN   7342<<ASSIGN
USEG.PAGES
      5923**DCL      7478>>ASSIGN   7493>>ASSIGN   7508>>IF       7509>>ASSIGN
USRT$
      6294**DCL      6685--IMP-PTR  7333<<ASSIGN   7413>>IF       7417>>IF       7546>>ASSIGN
WAIT1
      6268**DCL      7482<>CALL
WAIT1.V
      6272**DCL      6271--DCLINIT

PL6.E3A0      #002=DBF$TRAP File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:13 Page:81   
      454        1        /*T***********************************************************/
      455        2        /*T*                                                         */
      456        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      457        4        /*T*                                                         */
      458        5        /*T***********************************************************/
      459        6        DBF$TRAP: PROC ASYNC;
      460        7
      461        8        %INCLUDE LCP_6;
      462     4287
      463     4288    1   DCL G$TCB$ PTR SYMREF;
      464     4289        %G$TCB (FPTN=G$TCB,STCLASS="BASED(G$TCB$)");
      465     4310        %G$EXCFR (FPTN=G$EXCFR,STCLASS=BASED);
      466     4692        %SUB G$EXCFR=G$TCB.STK$->G$EXCFR;
      467     4693
      468     4694        %VLP_ERRCODE (FPTN=DB_ERROR,STCLASS=SYMREF);
      469     4740    1   DCL DB_TRAPRETURN REMEMBER SYMREF;
      470     4741
      471     4742    1           DB_ERROR=G$EXCFR.TRLR.ERR;
      472     4743    1           CALL M$CLRSTK;
      473     4744    1           UNWIND TO DB_TRAPRETURN;
      474     4745
      475     4746    1   END DBF$TRAP;
      476     4747        %EOD;

PL6.E3A0      #002=DBF$TRAP File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:13 Page:82   
--  Include file information  --

   G_LCP6_E.:E05TOU  is referenced.
   GT_LCP6_M.:E05TOU  is referenced.
   KI_CP6.:E05TOU  is referenced.
   GF_LCP6_M.:E05TOU  is referenced.
   GM_LCP6_M.:E05TOU  is referenced.
   GU_LCP6_M.:E05TOU  is referenced.
   GJ_LCP6_M.:E05TOU  is referenced.
   GH_LCP6_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBF$TRAP.

   Procedure DBF$TRAP requires 25 words for executable code.
   Procedure DBF$TRAP requires 4 words of local(AUTO) storage.

PL6.E3A0      #002=DBF$TRAP File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:13 Page:83   

 Object Unit name= DBF$TRAP                                   File name= DBF$ANLZ.:E05TOU
 UTS= JUL 29 '97 13:13:06.76 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0   Proc  even  none    25     19  DBF$TRAP

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes     Async       0  DBF$TRAP

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X6A_AAUTO
                       nStd      0 X6A_AAUNWIND

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     G$TCB$                                DB_ERROR                              DB_TRAPRETURN
r    G$ROS$
PL6.E3A0      #002=DBF$TRAP File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:13 Page:84   


      454        1        /*T***********************************************************/
      455        2        /*T*                                                         */
      456        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      457        4        /*T*                                                         */
      458        5        /*T***********************************************************/
      459        6        DBF$TRAP: PROC ASYNC;

      6   0 000000  D380 0000 0000  xent DBF$TRAP        LNJ,B5   X6A_AAUTO
          0 000003       0004 0000                       DC       4,0

      460        7
      461        8        %INCLUDE LCP_6;
      462     4287
      463     4288    1   DCL G$TCB$ PTR SYMREF;
      464     4289        %G$TCB (FPTN=G$TCB,STCLASS="BASED(G$TCB$)");
      465     4310        %G$EXCFR (FPTN=G$EXCFR,STCLASS=BASED);
      466     4692        %SUB G$EXCFR=G$TCB.STK$->G$EXCFR;
      467     4693
      468     4694        %VLP_ERRCODE (FPTN=DB_ERROR,STCLASS=SYMREF);
      469     4740    1   DCL DB_TRAPRETURN REMEMBER SYMREF;
      470     4741
      471     4742    1           DB_ERROR=G$EXCFR.TRLR.ERR;

   4742   0 000005  EC80 0000 0000  xsym                 LDB,B6   G$TCB$
          0 000008  DCC6 0002                            LDB,B5   2,B6
          0 00000A  8CC5 002B                            LDI      43,B5
          0 00000C  8D00 0000 0000  xsym                 SDI      DB_ERROR

      472     4743    1           CALL M$CLRSTK;

   4743   0 00000F  B870 00CD                            LDR,R3   205,IMO
          0 000011  0001                                 MCL
          0 000012       0000                            DC       s:4743+3,PREL

      473     4744    1           UNWIND TO DB_TRAPRETURN;

PL6.E3A0      #002=DBF$TRAP File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:13 Page:85   
   4744   0 000013  BB80 0000 0000  xsym                 LAB,B3   DB_TRAPRETURN
          0 000016  C380 0000 0000  xent                 LNJ,B4   X6A_AAUNWIND
      474     4745
      475     4746    1   END DBF$TRAP;
      476     4747        %EOD;

PL6.E3A0      #002=DBF$TRAP File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:13 Page:86   
--  Include file information  --

   G_LCP6_E.:E05TOU  is referenced.
   GT_LCP6_M.:E05TOU  is referenced.
   KI_CP6.:E05TOU  is referenced.
   GF_LCP6_M.:E05TOU  is referenced.
   GM_LCP6_M.:E05TOU  is referenced.
   GU_LCP6_M.:E05TOU  is referenced.
   GJ_LCP6_M.:E05TOU  is referenced.
   GH_LCP6_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBF$TRAP.
PL6.E3A0      #002=DBF$TRAP File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:13 Page:87   

 **** Variables and constants ****

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(32)    r     1 DB_ERROR                   0-0-0/d REMB        r     1 DB_TRAPRETURN
     0-0-0/w PTR         r     1 G$TCB$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(736)   r     1 G$EXCFR                    0-0-0/w STRC(96)    r     1 G$TCB


   Procedure DBF$TRAP requires 25 words for executable code.
   Procedure DBF$TRAP requires 4 words of local(AUTO) storage.
PL6.E3A0      #002=DBF$TRAP File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:13 Page:88   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=DBF$TRAP File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:13 Page:89   
          MINI XREF LISTING

DB_ERROR
      4708**DCL      4742<<ASSIGN
DB_TRAPRETURN
      4740**DCL      4744>>UNWIND
G$EXCFR.P$$
      4379**DCL      4379--REDEF    4379--REDEF
G$EXCFR.PREVSZ
      4329**DCL      4329--REDEF
G$EXCFR.TRLR.ERR
      4659**DCL      4742>>ASSIGN
G$EXCFR.TRLR.EVID
      4616**DCL      4634--REDEF    4642--REDEF    4642--REDEF
G$EXCFR.TRLR.SUBC
      4593**DCL      4593--REDEF    4611--REDEF    4615--REDEF    4615--REDEF
G$TCB.STK$
      4307**DCL      4742>>ASSIGN
G$TCB$
      4288**DCL      4303--IMP-PTR  4742>>ASSIGN
M$CLRSTK
      4256**DCL-ENT  4743--CALL

PL6.E3A0      #003=DBF$XCON File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:13 Page:90   
      477        1        /*T***********************************************************/
      478        2        /*T*                                                         */
      479        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      480        4        /*T*                                                         */
      481        5        /*T***********************************************************/
      482        6        DBF$XCON: PROC ASYNC;
      483        7
      484        8        %INCLUDE LCP_6;
      485     4287
      486     4288        %FPT_CVM (USERSEG=USEG,FROMSEG=FSEG,PAGES=0);
      487     4312        %VLP_SEGMENT (FPTN=USEG);
      488     4333        %VLP_SEGMENT (FPTN=FSEG);
      489     4354
      490     4355    1   DCL G$DS3$ PTR SYMREF;
      491     4356    1   DCL G$DS4$ PTR SYMREF;
      492     4357
      493     4358    1           USEG.BASE$=G$DS3$;
      494     4359    2           CALL M$CVM(FPT_CVM) WHENRETURN DO; END;
      495     4360    1           USEG.BASE$=G$DS4$;
      496     4361    2           CALL M$CVM(FPT_CVM) WHENRETURN DO; END;
      497     4362    1           CALL M$EXIT;
      498     4363
      499     4364    1   END DBF$XCON;

PL6.E3A0      #003=DBF$XCON File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:13 Page:91   
--  Include file information  --

   G_LCP6_E.:E05TOU  is referenced.
   GT_LCP6_M.:E05TOU  is referenced.
   KI_CP6.:E05TOU  is referenced.
   GF_LCP6_M.:E05TOU  is referenced.
   GM_LCP6_M.:E05TOU  is referenced.
   GU_LCP6_M.:E05TOU  is referenced.
   GJ_LCP6_M.:E05TOU  is referenced.
   GH_LCP6_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBF$XCON.

   Procedure DBF$XCON requires 38 words for executable code.
   Procedure DBF$XCON requires 4 words of local(AUTO) storage.

    No errors detected in file DBF$ANLZ.:E05TSI    .

PL6.E3A0      #003=DBF$XCON File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:13 Page:92   

 Object Unit name= DBF$XCON                                   File name= DBF$ANLZ.:E05TOU
 UTS= JUL 29 '97 13:13:14.36 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0   Data  even  none    18     12  DBF$XCON
    1   Proc  even  none    38     26  DBF$XCON

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     1      0   yes            yes     Async       0  DBF$XCON

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X6A_AAUTO
                       nStd      0 X6A_AARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     G$DS3$                                G$DS4$                           r    G$ROS$
PL6.E3A0      #003=DBF$XCON File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:13 Page:93   


      477        1        /*T***********************************************************/
      478        2        /*T*                                                         */
      479        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      480        4        /*T*                                                         */
      481        5        /*T***********************************************************/
      482        6        DBF$XCON: PROC ASYNC;

      6   1 000000  D380 0000 0000  xent DBF$XCON        LNJ,B5   X6A_AAUTO
          1 000003       0004 0000                       DC       4,0

      483        7
      484        8        %INCLUDE LCP_6;
      485     4287
      486     4288        %FPT_CVM (USERSEG=USEG,FROMSEG=FSEG,PAGES=0);
      487     4312        %VLP_SEGMENT (FPTN=USEG);
      488     4333        %VLP_SEGMENT (FPTN=FSEG);
      489     4354
      490     4355    1   DCL G$DS3$ PTR SYMREF;
      491     4356    1   DCL G$DS4$ PTR SYMREF;
      492     4357
      493     4358    1           USEG.BASE$=G$DS3$;

   4358   1 000005  EC80 0000 0000  xsym                 LDB,B6   G$DS3$
          1 000008  EF80 0000 000C  00                   STB,B6   USEG

      494     4359    2           CALL M$CVM(FPT_CVM) WHENRETURN DO; END;

   4359   1 00000B  BB80 0000 0000  00                   LAB,B3   FPT_CVM
          1 00000E  B870 0D08                            LDR,R3   3336,IMO
          1 000010  0001                                 MCL
          1 000011       0001                            DC       s:4360,PREL

      495     4360    1           USEG.BASE$=G$DS4$;

   4360   1 000012  EC80 0000 0000  xsym                 LDB,B6   G$DS4$
          1 000015  EF80 0000 000C  00                   STB,B6   USEG
PL6.E3A0      #003=DBF$XCON File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:13 Page:94   

      496     4361    2           CALL M$CVM(FPT_CVM) WHENRETURN DO; END;

   4361   1 000018  BB80 0000 0000  00                   LAB,B3   FPT_CVM
          1 00001B  B870 0D08                            LDR,R3   3336,IMO
          1 00001D  0001                                 MCL
          1 00001E       0001                            DC       s:4362,PREL

      497     4362    1           CALL M$EXIT;

   4362   1 00001F  B870 0080                            LDR,R3   128,IMO
          1 000021  0001                                 MCL
          1 000022       0000                            DC       s:4362+3,PREL

      498     4363
      499     4364    1   END DBF$XCON;

   4364   1 000023  C380 0000 0000  xent                 LNJ,B4   X6A_AARET

PL6.E3A0      #003=DBF$XCON File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:13 Page:95   
--  Include file information  --

   G_LCP6_E.:E05TOU  is referenced.
   GT_LCP6_M.:E05TOU  is referenced.
   KI_CP6.:E05TOU  is referenced.
   GF_LCP6_M.:E05TOU  is referenced.
   GM_LCP6_M.:E05TOU  is referenced.
   GU_LCP6_M.:E05TOU  is referenced.
   GJ_LCP6_M.:E05TOU  is referenced.
   GH_LCP6_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBF$XCON.
PL6.E3A0      #003=DBF$XCON File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:13 Page:96   

 **** Variables and constants ****

  ****  Section 000  Data  DBF$XCON

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(192)   r     1 FPT_CVM                    F-0-0/w STRC(48)    r     1 FSEG
     C-0-0/w STRC(48)    r     1 USEG

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 G$DS3$                     0-0-0/w PTR         r     1 G$DS4$


   Procedure DBF$XCON requires 38 words for executable code.
   Procedure DBF$XCON requires 4 words of local(AUTO) storage.

    No errors detected in file DBF$ANLZ.:E05TSI    .
PL6.E3A0      #003=DBF$XCON File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:13 Page:97   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=DBF$XCON File=DBF$ANLZ.:E05TSI                                TUE 07/29/97 13:13 Page:98   
          MINI XREF LISTING

FPT_CVM
      4301**DCL      4359<>CALL     4361<>CALL
FPT_CVM.V
      4305**DCL      4304--DCLINIT
FSEG
      4347**DCL      4304--DCLINIT
FSEG.BASE
      4351**DCL      4351--REDEF
G$DS3$
      4355**DCL      4358>>ASSIGN
G$DS4$
      4356**DCL      4360>>ASSIGN
M$CVM
      4265**DCL-ENT  4359--CALL     4361--CALL
M$EXIT
      4246**DCL-ENT  4362--CALL
USEG
      4326**DCL      4304--DCLINIT
USEG.BASE
      4330**DCL      4330--REDEF
USEG.BASE$
      4330**DCL      4358<<ASSIGN   4360<<ASSIGN
