VERSION E05

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:1    
        1        1        /*M* QQB$KILL - Perform  KILL command */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* IND=2, DCI=4, CSU=2, ECU=4, DTI=2, CTI=4, AND */
        8        8        QQB$KILL:
        9        9                PROC;
       10       10
       11       11        %INCLUDE Q_PAGE_C;
       12       43        %SET LISTEXP = '1'B;
       13       44        %PAGE(ARG="Includes");

                61        /***************************************************************************
                62         *                                                                         *
                63         *                                  Includes                               *
                64         *                                                                         *
                65         ***************************************************************************/

       14       69        %INCLUDE CP_6;
       15      150        %INCLUDE CP_6_SUBS;
       16      690        %INCLUDE B$JIT;
       17      980        %INCLUDE B_ERRORS_C;
       18     2107        %INCLUDE XU_MACRO_C;
       19     5213        %INCLUDE QQ_MACROS_C;
       20     5638        %INCLUDE QQ_DATA_R;
       21     5884        %INCLUDE QQ_SUBS_C;
       22     6076        %INCLUDE QQ_PERR_C;
       23     6237        %INCLUDE Q_ERRCODE_C;
       24     6260        %INCLUDE SS_SCHED_C;
       25     6493        %PAGE(ARG="Externally defined routines");

              6510    1   /***************************************************************************
              6511    1    *                                                                         *
              6512    1    *                        Externally defined routines                      *
              6513    1    *                                                                         *
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:2    
              6514    1    ***************************************************************************/

       26     6518    1   DCL QQC$BLDMSG ENTRY(1);
       27     6519    1   DCL QQC$BLDMSG_BLK ENTRY(1);
       28     6520    1   DCL QQC$CONVERT_NUM ENTRY(3);
       29     6521    1   DCL QQC$SCREECH ENTRY;
       30     6522    1   DCL QQC$WILD_COMP ENTRY(2) ALTRET;
       31     6523        %PAGE(ARG="Symrefs");

              6540    1   /***************************************************************************
              6541    1    *                                                                         *
              6542    1    *                                  Symrefs                                *
              6543    1    *                                                                         *
              6544    1    ***************************************************************************/

       32     6548    1   DCL B$TCB$ PTR SYMREF;
       33     6549    1   DCL B$JIT$ PTR SYMREF;
       34     6550        %PAGE(ARG="DCBs");

              6567    1   /***************************************************************************
              6568    1    *                                                                         *
              6569    1    *                                    DCBs                                 *
              6570    1    *                                                                         *
              6571    1    ***************************************************************************/

       35     6575    1   DCL M$CG DCB;
       36     6576        %PAGE(ARG="Based");

              6593    1   /***************************************************************************
              6594    1    *                                                                         *
              6595    1    *                                   Based                                 *
              6596    1    *                                                                         *
              6597    1    ***************************************************************************/

       37     6601        %B$TCB;
       38     6604        %B$ALT;
       39     6612        %TP$STATION;
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:3    
       40     6685        %TPU$INFO;
       41     6714        %PARSE$SYM(STCLASS=BASED);
       42     6752        %PARSE$OUT(STCLASS=BASED);
       43     6797        %PAGE(ARG="Static");

              6814    1   /***************************************************************************
              6815    1    *                                                                         *
              6816    1    *                                   Static                                *
              6817    1    *                                                                         *
              6818    1    ***************************************************************************/

       44     6822    1   DCL STATION CHAR(8) STATIC;
       45     6823        %PAGE(ARG="Auto");

              6840    1   /***************************************************************************
              6841    1    *                                                                         *
              6842    1    *                                    Auto                                 *
              6843    1    *                                                                         *
              6844    1    ***************************************************************************/

       46     6848    1   DCL NEXT$ PTR;
       47     6849    1   DCL ITEM$ PTR;
       48     6850
       49     6851    1   DCL I SBIN WORD;
       50     6852    1   DCL TYPE SBIN WORD;
       51     6853    1   DCL COUNT SBIN WORD;
       52     6854    1   DCL SIZE SBIN WORD;
       53     6855    1   DCL SYSID SBIN WORD;
       54     6856
       55     6857    1   DCL ITEM CHAR(8);
       56     6858
       57     6859    1   DCL NOW_FLAG BIT(1) ALIGNED;
       58     6860
       59     6861        %MSGBLK;
       60     6951        %VLP_NAME(FPTN=TEXTC_NUM, STCLASS=AUTO, LEN=4);
       61     6978        %PAGE(ARG="Error codes", PAGE=YES);

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:4    
              6995    1   /***************************************************************************
              6996    1    *                                                                         *
              6997    1    *                                Error codes                              *
              6998    1    *                                                                         *
              6999    1    ***************************************************************************/

       62     7003        %ERRCODE(NAME=CODE_DDIED, CODE#=%E$DDIED, FCG#=%FCG_QQ, MID#=%MID_B);
       63     7010        %ERRCODE(NAME=CODE_SDIED, CODE#=%E$SDIED, FCG#=%FCG_QQ, MID#=%MID_B);
       64     7017        /*E*       ERROR: QQB-E$DDIED-C
       65     7018
       66     7019                 MESSAGE: %U1 DCB(s) died
       67     7020             DESCRIPTION: The number of fatalities from a  KILL  command
       68     7021        */
       69     7022        /*E*       ERROR: QQB-E$SDIED-C
       70     7023                 MESSAGE: %U1 STATION(s) died
       71     7024             DESCRIPTION: The number of fatalities from  KILL  command
       72     7025        */
       73     7026        %PAGE(ARG="FPTs", PAGE=YES);

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:5    
              7043    1   /***************************************************************************
              7044    1    *                                                                         *
              7045    1    *                                    FPTs                                 *
              7046    1    *                                                                         *
              7047    1    ***************************************************************************/

       74     7051        %FPT_ACTIVATE(FPTN=FPT_DEACTIVATE, DCB=M$CG, STATION=STATION, DISCONNECT=YES,
       75     7052        ABTREAD=%TYC_EOF, ABTET=YES);
       76     7075
       77     7076        %FPT_RUE(EVENT=%SS_ABRT);
       78     7090        %PAGE(ARG="QQB$KILL", PAGE=YES);

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:6    
              7107    1   /***************************************************************************
              7108    1    *                                                                         *
              7109    1    *                                  QQB$KILL                               *
              7110    1    *                                                                         *
              7111    1    ***************************************************************************/

       79     7115    1           TYPE = QQ_CMDBLK.OUT$ -> OUT$BLK.SUBLK$(0) -> OUT$SYM.CODE;
       80     7116    1           ITEM$ = QQ_CMDBLK.OUT$ -> OUT$BLK.SUBLK$(1);
       81     7117    1           ITEM = ITEM$ -> OUT$SYM.TEXT;
       82     7118
       83     7119    1           COUNT = 0;
       84     7120
       85     7121    1           NOW_FLAG = '0'B;
       86     7122    1           IF QQ_CMDBLK.OUT$ -> OUT$BLK.NSUBLKS = 3 THEN
       87     7123    2             DO;
       88     7124    2               NOW_FLAG = '1'B;
       89     7125    2             END;
       90     7126
       91     7127    1           IF TYPE = 1 /* OPT_STATION */ THEN
       92     7128    2             DO;
       93     7129    2               CALL KILL_STATION;
       94     7130    2             END;
       95     7131    1           ELSE
       96     7132    2             DO;
       97     7133    2               CALL KILL_DCB;
       98     7134    2             END;
       99     7135
      100     7136    1           CALL QQC$BLDMSG_BLK(MSGBLK);
      101     7137    1           CALL QQC$CONVERT_NUM(COUNT, SIZE, ADDR(TEXTC_NUM.NAME#));
      102     7138    1           TEXTC_NUM.L# = SIZE;
      103     7139    1           MSGBLK.ERRINFO.FIELD1(0) = VECTOR(TEXTC_NUM);
      104     7140    1           CALL QQC$BLDMSG(MSGBLK);
      105     7141
      106     7142    1           RETURN;
      107     7143                %PAGE(ARG="KILL_STATION", PAGE=YES);

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:7    
              7160    1   /***************************************************************************
              7161    1    *                                                                         *
              7162    1    *                                KILL_STATION                             *
              7163    1    *                                                                         *
              7164    1    ***************************************************************************/

      108     7168    1   KILL_STATION:
      109     7169    1           PROC;
      110     7170
      111     7171    2           QQ_CMDBLK.MINOR_ERR = CODE_SDIED;
      112     7172
      113     7173    3           DO I = 1 TO QQ_GLOBAL.STATION_CNT;
      114     7174    3             S$ = PINCRW(QQ_GLOBAL.STATION$, (I - 1) * SIZEW(TP$STATION));
      115     7175
      116     7176    3             CALL QQC$WILD_COMP(ITEM, TP$STATION.ID) ALTRET(LOOP);
      117     7177    3             STATION = TP$STATION.ID;
      118     7178
      119     7179    3             CALL M$DEACTIVATE(FPT_DEACTIVATE) ALTRET(DEACTIVATE_ERR);
      120     7180    3             COUNT = COUNT + 1;
      121     7181    3             TP$STATION.FLAGS.DISCONNECT = '1'B;
      122     7182
      123     7183    4             DO WHILE('0'B);
      124     7184
      125     7185    4   DEACTIVATE_ERR:
      126     7186    4               IF B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR.CODE ~= 1154 /* E$CGAFNS */ THEN
      127     7187    5                 DO;
      128     7188    5                   GOTO MON_ERR;
      129     7189    5                 END;
      130     7190    4             END /* NEVER */;
      131     7191
      132     7192    3   LOOP:
      133     7193    3           END;
      134     7194
      135     7195    2           RETURN;
      136     7196
      137     7197    2   MON_ERR:
      138     7198    2           QQ_GLOBAL.ERR = B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR;
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:8    
      139     7199    2           CALL QQC$SCREECH;
      140     7200
      141     7201    2   END KILL_STATION;
      142     7202                %PAGE(ARG="KILL_DCB", PAGE=YES);

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:9    
              7219    2   /***************************************************************************
              7220    2    *                                                                         *
              7221    2    *                                  KILL_DCB                               *
              7222    2    *                                                                         *
              7223    2    ***************************************************************************/

      143     7227    1   KILL_DCB:
      144     7228    1           PROC;
      145     7229
      146     7230    2           QQ_CMDBLK.MINOR_ERR = CODE_DDIED;
      147     7231
      148     7232    2           IF ITEM$ -> OUT$SYM.CODE = 2 /* OPT_SYSID */ THEN
      149     7233    3             DO;
      150     7234    3               CALL CHARBIN(SYSID, ITEM$ -> OUT$SYM.TEXT);
      151     7235    3             END;
      152     7236
      153     7237    2           NEXT$ = QQ_GLOBAL.TPU$;
      154     7238
      155     7239    3           DO WHILE('1'B);
      156     7240    3             NEXT$ = NEXT$ -> TPU$INFO.FLINK$;
      157     7241    3             IF NEXT$ -> TPU$INFO.FLINK$ = ADDR(NIL) THEN
      158     7242    4               DO;
      159     7243    4                 GOTO RET;
      160     7244    4               END;
      161     7245
      162     7246    3             STATION = NEXT$ -> TPU$INFO.STATION;
      163     7247
      164     7248    4             DO CASE(ITEM$ -> OUT$SYM.CODE);
      165     7249    4               CASE(1 /* OPT_STATION */);
      166     7250    4                 CALL QQC$WILD_COMP(ITEM, NEXT$ -> TPU$INFO.STATION) ALTRET(LOOP);
      167     7251
      168     7252    4               CASE(2 /* OPT_SYSID */);
      169     7253    4                 IF SYSID ~= NEXT$ -> TPU$INFO.SYSID THEN
      170     7254    5                   DO;
      171     7255    5                     GOTO LOOP;
      172     7256    5                   END;
      173     7257
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:10   
      174     7258    4             END /* CASE */;
      175     7259
      176     7260    3             IF NOW_FLAG THEN
      177     7261    4               DO;
      178     7262    4                 FPT_RUE.V.USER# = NEXT$ -> TPU$INFO.SYSID;
      179     7263    4                 CALL M$RUE(FPT_RUE) ALTRET(MON_ERR);
      180     7264    4               END;
      181     7265    3             ELSE
      182     7266    4               DO;
      183     7267    4                 CALL M$ACTIVATE(FPT_DEACTIVATE) ALTRET(ACTIVATE_ERR);
      184     7268    4               END;
      185     7269
      186     7270    3             COUNT = COUNT + 1;
      187     7271    3             NEXT$ -> TPU$INFO.FLAGS.DISCONNECT = '1'B;
      188     7272
      189     7273    4             DO WHILE('0'B);
      190     7274
      191     7275    4   ACTIVATE_ERR:
      192     7276    4               IF B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR.CODE ~= 1154 /* E$CGAFNS */ THEN
      193     7277    5                 DO;
      194     7278    5                   GOTO MON_ERR;
      195     7279    5                 END;
      196     7280    4             END /* NEVER */;
      197     7281
      198     7282    3   LOOP:
      199     7283    3           END;
      200     7284
      201     7285    2   RET:
      202     7286    2           RETURN;
      203     7287
      204     7288    2   MON_ERR:
      205     7289    2           QQ_GLOBAL.ERR = B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR;
      206     7290    2           CALL QQC$SCREECH;
      207     7291
      208     7292    2   END KILL_DCB;
      209     7293    1   END QQB$KILL;

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:11   
--  Include file information  --

   SS_SCHED_C.:E05TOU  is referenced.
   Q_ERRCODE_C.:E05TOU  is referenced.
   QQ_PERR_C.:E05TOU  is referenced.
   QQ_SUBS_C.:E05TOU  is referenced.
   QQ_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   QQ_MACROS_C.:E05TOU  is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   Q_PAGE_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure QQB$KILL.

   Procedure QQB$KILL requires 208 words for executable code.
   Procedure QQB$KILL requires 46 words of local(AUTO) storage.

    No errors detected in file QQB$KILL.:E05TSI    .

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:12   

 Object Unit name= QQB$KILL                                   File name= QQB$KILL.:E05TOU
 UTS= JUL 30 '97 05:31:33.16 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   DCB   even  none     0      0  M$CG
    2   Data  even  none    22     26  QQB$KILL
    3  RoData even  UTS      2      2  QQB$KILL
    4   Proc  even  none   208    320  QQB$KILL
    5  RoData even  none     2      2  QQB$KILL

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     4      0   yes            yes      Std        0  QQB$KILL

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       1 QQC$BLDMSG_BLK
         yes           Std       1 QQC$BLDMSG
         yes           Std       3 QQC$CONVERT_NUM
 yes     yes           Std       2 QQC$WILD_COMP
         yes           Std       0 QQC$SCREECH
                       nStd      0 X66_AUTO_0
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:13   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  QQ_CMDBLK                             QQ_GLOBAL
     B$TCB$                                B$JIT$                                M$CG
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:14   


        1        1        /*M* QQB$KILL - Perform  KILL command */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* IND=2, DCI=4, CSU=2, ECU=4, DTI=2, CTI=4, AND */
        8        8        QQB$KILL:
        9        9                PROC;

      9  4 000000   000000 700200 xent  QQB$KILL     TSX0  ! X66_AUTO_0
         4 000001   000056 000000                    ZERO    46,0

       10       10
       11       11        %INCLUDE Q_PAGE_C;
       12       43        %SET LISTEXP = '1'B;
       13       44        %PAGE(ARG="Includes");

                61        /***************************************************************************
                62         *                                                                         *
                63         *                                  Includes                               *
                64         *                                                                         *
                65         ***************************************************************************/

       14       69        %INCLUDE CP_6;
       15      150        %INCLUDE CP_6_SUBS;
       16      690        %INCLUDE B$JIT;
       17      980        %INCLUDE B_ERRORS_C;
       18     2107        %INCLUDE XU_MACRO_C;
       19     5213        %INCLUDE QQ_MACROS_C;
       20     5638        %INCLUDE QQ_DATA_R;
       21     5884        %INCLUDE QQ_SUBS_C;
       22     6076        %INCLUDE QQ_PERR_C;
       23     6237        %INCLUDE Q_ERRCODE_C;
       24     6260        %INCLUDE SS_SCHED_C;
       25     6493        %PAGE(ARG="Externally defined routines");
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:15   

              6510    1   /***************************************************************************
              6511    1    *                                                                         *
              6512    1    *                        Externally defined routines                      *
              6513    1    *                                                                         *
              6514    1    ***************************************************************************/

       26     6518    1   DCL QQC$BLDMSG ENTRY(1);
       27     6519    1   DCL QQC$BLDMSG_BLK ENTRY(1);
       28     6520    1   DCL QQC$CONVERT_NUM ENTRY(3);
       29     6521    1   DCL QQC$SCREECH ENTRY;
       30     6522    1   DCL QQC$WILD_COMP ENTRY(2) ALTRET;
       31     6523        %PAGE(ARG="Symrefs");

              6540    1   /***************************************************************************
              6541    1    *                                                                         *
              6542    1    *                                  Symrefs                                *
              6543    1    *                                                                         *
              6544    1    ***************************************************************************/

       32     6548    1   DCL B$TCB$ PTR SYMREF;
       33     6549    1   DCL B$JIT$ PTR SYMREF;
       34     6550        %PAGE(ARG="DCBs");

              6567    1   /***************************************************************************
              6568    1    *                                                                         *
              6569    1    *                                    DCBs                                 *
              6570    1    *                                                                         *
              6571    1    ***************************************************************************/

       35     6575    1   DCL M$CG DCB;
       36     6576        %PAGE(ARG="Based");

              6593    1   /***************************************************************************
              6594    1    *                                                                         *
              6595    1    *                                   Based                                 *
              6596    1    *                                                                         *
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:16   
              6597    1    ***************************************************************************/

       37     6601        %B$TCB;
       38     6604        %B$ALT;
       39     6612        %TP$STATION;
       40     6685        %TPU$INFO;
       41     6714        %PARSE$SYM(STCLASS=BASED);
       42     6752        %PARSE$OUT(STCLASS=BASED);
       43     6797        %PAGE(ARG="Static");

              6814    1   /***************************************************************************
              6815    1    *                                                                         *
              6816    1    *                                   Static                                *
              6817    1    *                                                                         *
              6818    1    ***************************************************************************/

       44     6822    1   DCL STATION CHAR(8) STATIC;
       45     6823        %PAGE(ARG="Auto");

              6840    1   /***************************************************************************
              6841    1    *                                                                         *
              6842    1    *                                    Auto                                 *
              6843    1    *                                                                         *
              6844    1    ***************************************************************************/

       46     6848    1   DCL NEXT$ PTR;
       47     6849    1   DCL ITEM$ PTR;
       48     6850
       49     6851    1   DCL I SBIN WORD;
       50     6852    1   DCL TYPE SBIN WORD;
       51     6853    1   DCL COUNT SBIN WORD;
       52     6854    1   DCL SIZE SBIN WORD;
       53     6855    1   DCL SYSID SBIN WORD;
       54     6856
       55     6857    1   DCL ITEM CHAR(8);
       56     6858
       57     6859    1   DCL NOW_FLAG BIT(1) ALIGNED;
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:17   
       58     6860
       59     6861        %MSGBLK;
       60     6951        %VLP_NAME(FPTN=TEXTC_NUM, STCLASS=AUTO, LEN=4);
       61     6978        %PAGE(ARG="Error codes", PAGE=YES);

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:18   
              6995    1   /***************************************************************************
              6996    1    *                                                                         *
              6997    1    *                                Error codes                              *
              6998    1    *                                                                         *
              6999    1    ***************************************************************************/

       62     7003        %ERRCODE(NAME=CODE_DDIED, CODE#=%E$DDIED, FCG#=%FCG_QQ, MID#=%MID_B);
       63     7010        %ERRCODE(NAME=CODE_SDIED, CODE#=%E$SDIED, FCG#=%FCG_QQ, MID#=%MID_B);
       64     7017        /*E*       ERROR: QQB-E$DDIED-C
       65     7018
       66     7019                 MESSAGE: %U1 DCB(s) died
       67     7020             DESCRIPTION: The number of fatalities from a  KILL  command
       68     7021        */
       69     7022        /*E*       ERROR: QQB-E$SDIED-C
       70     7023                 MESSAGE: %U1 STATION(s) died
       71     7024             DESCRIPTION: The number of fatalities from  KILL  command
       72     7025        */
       73     7026        %PAGE(ARG="FPTs", PAGE=YES);

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:19   
              7043    1   /***************************************************************************
              7044    1    *                                                                         *
              7045    1    *                                    FPTs                                 *
              7046    1    *                                                                         *
              7047    1    ***************************************************************************/

       74     7051        %FPT_ACTIVATE(FPTN=FPT_DEACTIVATE, DCB=M$CG, STATION=STATION, DISCONNECT=YES,
       75     7052        ABTREAD=%TYC_EOF, ABTET=YES);
       76     7075
       77     7076        %FPT_RUE(EVENT=%SS_ABRT);
       78     7090        %PAGE(ARG="QQB$KILL", PAGE=YES);

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:20   
              7107    1   /***************************************************************************
              7108    1    *                                                                         *
              7109    1    *                                  QQB$KILL                               *
              7110    1    *                                                                         *
              7111    1    ***************************************************************************/

       79     7115    1           TYPE = QQ_CMDBLK.OUT$ -> OUT$BLK.SUBLK$(0) -> OUT$SYM.CODE;

   7115  4 000002   000005 470400 xsym               LDP0    QQ_CMDBLK+5
         4 000003   000003 471500                    LDP1    3,,PR0
         4 000004   100000 236100                    LDQ     0,,PR1
         4 000005   777777 376007                    ANQ     -1,DL
         4 000006   200010 756100                    STQ     TYPE,,AUTO

       80     7116    1           ITEM$ = QQ_CMDBLK.OUT$ -> OUT$BLK.SUBLK$(1);

   7116  4 000007   000004 236100                    LDQ     4,,PR0
         4 000010   200006 756100                    STQ     ITEM$,,AUTO

       81     7117    1           ITEM = ITEM$ -> OUT$SYM.TEXT;

   7117  4 000011   200006 473500                    LDP3    ITEM$,,AUTO
         4 000012   300004 236100                    LDQ     4,,PR3
         4 000013   000033 772000                    QRL     27
         4 000014   000000 620006                    EAX0    0,QL
         4 000015   040100 100540                    MLR     fill='040'O
         4 000016   300004 200010                    ADSC9   4,,PR3                   cn=1,n=*X0
         4 000017   200014 000010                    ADSC9   ITEM,,AUTO               cn=0,n=8

       82     7118
       83     7119    1           COUNT = 0;

   7119  4 000020   200011 450100                    STZ     COUNT,,AUTO

       84     7120
       85     7121    1           NOW_FLAG = '0'B;

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:21   
   7121  4 000021   200016 450100                    STZ     NOW_FLAG,,AUTO

       86     7122    1           IF QQ_CMDBLK.OUT$ -> OUT$BLK.NSUBLKS = 3 THEN

   7122  4 000022   000001 220100                    LDX0    1,,PR0
         4 000023   000003 100003                    CMPX0   3,DU
         4 000024   000027 601000 4                  TNZ     s:7127

       87     7123    2             DO;

       88     7124    2               NOW_FLAG = '1'B;

   7124  4 000025   400000 236003                    LDQ     -131072,DU
         4 000026   200016 756100                    STQ     NOW_FLAG,,AUTO

       89     7125    2             END;

       90     7126
       91     7127    1           IF TYPE = 1 /* OPT_STATION */ THEN

   7127  4 000027   200010 235100                    LDA     TYPE,,AUTO
         4 000030   000001 115007                    CMPA    1,DL
         4 000031   000035 601000 4                  TNZ     s:7133

       92     7128    2             DO;

       93     7129    2               CALL KILL_STATION;

   7129  4 000032   000105 701000 4                  TSX1    KILL_STATION
         4 000033   000000 011000                    NOP     0

       94     7130    2             END;

   7130  4 000034   000037 710000 4                  TRA     s:7136

       95     7131    1           ELSE
       96     7132    2             DO;
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:22   

       97     7133    2               CALL KILL_DCB;

   7133  4 000035   000171 701000 4                  TSX1    KILL_DCB
         4 000036   000000 011000                    NOP     0

       98     7134    2             END;

       99     7135
      100     7136    1           CALL QQC$BLDMSG_BLK(MSGBLK);

   7136  4 000037   200017 630500                    EPPR0   MSGBLK,,AUTO
         4 000040   200050 450500                    STP0    TEXTC_NUM+4,,AUTO
         4 000041   200050 630500                    EPPR0   TEXTC_NUM+4,,AUTO
         4 000042   000017 631400 xsym               EPPR1   B_VECTNIL+15
         4 000043   000000 701000 xent               TSX1    QQC$BLDMSG_BLK
         4 000044   000000 011000                    NOP     0

      101     7137    1           CALL QQC$CONVERT_NUM(COUNT, SIZE, ADDR(TEXTC_NUM.NAME#));

   7137  4 000045   200051 452500                    STP2    TEXTC_NUM+5,,AUTO
         4 000046   200051 236100                    LDQ     TEXTC_NUM+5,,AUTO
         4 000047   000000 036000 5                  ADLQ    0
         4 000050   200050 756100                    STQ     TEXTC_NUM+4,,AUTO
         4 000051   200050 630500                    EPPR0   TEXTC_NUM+4,,AUTO
         4 000052   200054 450500                    STP0    TEXTC_NUM+8,,AUTO
         4 000053   200012 631500                    EPPR1   SIZE,,AUTO
         4 000054   200053 451500                    STP1    TEXTC_NUM+7,,AUTO
         4 000055   200011 633500                    EPPR3   COUNT,,AUTO
         4 000056   200052 453500                    STP3    TEXTC_NUM+6,,AUTO
         4 000057   200052 630500                    EPPR0   TEXTC_NUM+6,,AUTO
         4 000060   000021 631400 xsym               EPPR1   B_VECTNIL+17
         4 000061   000000 701000 xent               TSX1    QQC$CONVERT_NUM
         4 000062   000000 011000                    NOP     0

      102     7138    1           TEXTC_NUM.L# = SIZE;

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:23   
   7138  4 000063   200012 236100                    LDQ     SIZE,,AUTO
         4 000064   000033 736000                    QLS     27
         4 000065   200044 552140                    STBQ    TEXTC_NUM,'40'O,AUTO

      103     7139    1           MSGBLK.ERRINFO.FIELD1(0) = VECTOR(TEXTC_NUM);

   7139  4 000066   000001 235000 5                  LDA     1
         4 000067   200050 452500                    STP2    TEXTC_NUM+4,,AUTO
         4 000070   200050 236100                    LDQ     TEXTC_NUM+4,,AUTO
         4 000071   000044 036003                    ADLQ    36,DU
         4 000072   200052 757100                    STAQ    TEXTC_NUM+6,,AUTO
         4 000073   000100 100500                    MLR     fill='000'O
         4 000074   200052 000010                    ADSC9   TEXTC_NUM+6,,AUTO        cn=0,n=8
         4 000075   200026 200010                    ADSC9   MSGBLK+7,,AUTO           cn=1,n=8

      104     7140    1           CALL QQC$BLDMSG(MSGBLK);

   7140  4 000076   200017 630500                    EPPR0   MSGBLK,,AUTO
         4 000077   200050 450500                    STP0    TEXTC_NUM+4,,AUTO
         4 000100   200050 630500                    EPPR0   TEXTC_NUM+4,,AUTO
         4 000101   000017 631400 xsym               EPPR1   B_VECTNIL+15
         4 000102   000000 701000 xent               TSX1    QQC$BLDMSG
         4 000103   000000 011000                    NOP     0

      105     7141
      106     7142    1           RETURN;

   7142  4 000104   000000 702200 xent               TSX2  ! X66_ARET

      107     7143                %PAGE(ARG="KILL_STATION", PAGE=YES);

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:24   
              7160    1   /***************************************************************************
              7161    1    *                                                                         *
              7162    1    *                                KILL_STATION                             *
              7163    1    *                                                                         *
              7164    1    ***************************************************************************/

      108     7168    1   KILL_STATION:

   7168  4 000105   200046 741300       KILL_STATION STX1  ! TEXTC_NUM+2,,AUTO

      109     7169    1           PROC;
      110     7170
      111     7171    2           QQ_CMDBLK.MINOR_ERR = CODE_SDIED;

   7171  4 000106   000001 236000 3                  LDQ     CODE_SDIED
         4 000107   000001 756000 xsym               STQ     QQ_CMDBLK+1

      112     7172
      113     7173    3           DO I = 1 TO QQ_GLOBAL.STATION_CNT;

   7173  4 000110   000001 235007                    LDA     1,DL
         4 000111   200007 755100                    STA     I,,AUTO
         4 000112   000154 710000 4                  TRA     LOOP+1

      114     7174    3             S$ = PINCRW(QQ_GLOBAL.STATION$, (I - 1) * SIZEW(TP$STATION));

   7174  4 000113   200007 236100                    LDQ     I,,AUTO
         4 000114   000032 402003                    MPY     26,DU
         4 000115   000032 136003                    SBLQ    26,DU
         4 000116   000151 036000 xsym               ADLQ    QQ_GLOBAL+105
         4 000117   200003 756100                    STQ     S$,,AUTO

      115     7175
      116     7176    3             CALL QQC$WILD_COMP(ITEM, TP$STATION.ID) ALTRET(LOOP);

   7176  4 000120   200051 756100                    STQ     TEXTC_NUM+5,,AUTO
         4 000121   200014 630500                    EPPR0   ITEM,,AUTO
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:25   
         4 000122   200050 450500                    STP0    TEXTC_NUM+4,,AUTO
         4 000123   200050 630500                    EPPR0   TEXTC_NUM+4,,AUTO
         4 000124   000020 631400 xsym               EPPR1   B_VECTNIL+16
         4 000125   000000 701000 xent               TSX1    QQC$WILD_COMP
         4 000126   000153 702000 4                  TSX2    LOOP

      117     7177    3             STATION = TP$STATION.ID;

   7177  4 000127   200003 470500                    LDP0    S$,,AUTO
         4 000130   040000 100500                    MLR     fill='040'O
         4 000131   000000 000010                    ADSC9   0,,PR0                   cn=0,n=8
         4 000132   000000 000010 2                  ADSC9   STATION                  cn=0,n=8

      118     7178
      119     7179    3             CALL M$DEACTIVATE(FPT_DEACTIVATE) ALTRET(DEACTIVATE_ERR);

   7179  4 000133   000002 630400 2                  EPPR0   FPT_DEACTIVATE
         4 000134   500001 713400                    CLIMB   alt,+32769
         4 000135   401400 401760                    pmme    nvectors=4
         4 000136   000144 702000 4                  TSX2    DEACTIVATE_ERR

      120     7180    3             COUNT = COUNT + 1;

   7180  4 000137   200011 054100                    AOS     COUNT,,AUTO

      121     7181    3             TP$STATION.FLAGS.DISCONNECT = '1'B;

   7181  4 000140   200003 470500                    LDP0    S$,,AUTO
         4 000141   020000 236003                    LDQ     8192,DU
         4 000142   000022 256100                    ORSQ    18,,PR0

      122     7182
      123     7183    4             DO WHILE('0'B);

   7183  4 000143   000153 710000 4                  TRA     LOOP

      124     7184
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:26   
      125     7185    4   DEACTIVATE_ERR:
      126     7186    4               IF B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR.CODE ~= 1154 /* E$CGAFNS */ THEN

   7186  4 000144   000000 470400 xsym  DEACTIVATE_* LDP0    B$TCB$
         4 000145   000000 471500                    LDP1    0,,PR0
         4 000146   100102 236100                    LDQ     66,,PR1
         4 000147   377770 376007                    ANQ     131064,DL
         4 000150   022020 116007                    CMPQ    9232,DL
         4 000151   000153 600000 4                  TZE     LOOP

      127     7187    5                 DO;

      128     7188    5                   GOTO MON_ERR;

   7188  4 000152   000162 710000 4                  TRA     MON_ERR

      129     7189    5                 END;
      130     7190    4             END /* NEVER */;

      131     7191
      132     7192    3   LOOP:
      133     7193    3           END;

   7193  4 000153   200007 054100       LOOP         AOS     I,,AUTO
         4 000154   000032 236000 xsym               LDQ     QQ_GLOBAL+26
         4 000155   000113 604000 4                  TMI     s:7174
         4 000156   200007 116100                    CMPQ    I,,AUTO
         4 000157   000113 605000 4                  TPL     s:7174

      134     7194
      135     7195    2           RETURN;

   7195  4 000160   200046 221300                    LDX1  ! TEXTC_NUM+2,,AUTO
         4 000161   000001 702211                    TSX2  ! 1,X1

      136     7196
      137     7197    2   MON_ERR:
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:27   
      138     7198    2           QQ_GLOBAL.ERR = B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR;

   7198  4 000162   100102 236100       MON_ERR      LDQ     66,,PR1
         4 000163   000000 756000 xsym               STQ     QQ_GLOBAL

      139     7199    2           CALL QQC$SCREECH;

   7199  4 000164   000002 631400 xsym               EPPR1   B_VECTNIL+2
         4 000165   000000 701000 xent               TSX1    QQC$SCREECH
         4 000166   000000 011000                    NOP     0

      140     7200
      141     7201    2   END KILL_STATION;

   7201  4 000167   200046 221300                    LDX1  ! TEXTC_NUM+2,,AUTO
         4 000170   000001 702211                    TSX2  ! 1,X1

      142     7202                %PAGE(ARG="KILL_DCB", PAGE=YES);

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:28   
              7219    2   /***************************************************************************
              7220    2    *                                                                         *
              7221    2    *                                  KILL_DCB                               *
              7222    2    *                                                                         *
              7223    2    ***************************************************************************/

      143     7227    1   KILL_DCB:

   7227  4 000171   200046 741300       KILL_DCB     STX1  ! TEXTC_NUM+2,,AUTO

      144     7228    1           PROC;
      145     7229
      146     7230    2           QQ_CMDBLK.MINOR_ERR = CODE_DDIED;

   7230  4 000172   000000 236000 3                  LDQ     CODE_DDIED
         4 000173   000001 756000 xsym               STQ     QQ_CMDBLK+1

      147     7231
      148     7232    2           IF ITEM$ -> OUT$SYM.CODE = 2 /* OPT_SYSID */ THEN

   7232  4 000174   200006 470500                    LDP0    ITEM$,,AUTO
         4 000175   000000 720100                    LXL0    0,,PR0
         4 000176   000002 100003                    CMPX0   2,DU
         4 000177   000206 601000 4                  TNZ     s:7237

      149     7233    3             DO;

      150     7234    3               CALL CHARBIN(SYSID, ITEM$ -> OUT$SYM.TEXT);

   7234  4 000200   000004 236100                    LDQ     4,,PR0
         4 000201   000033 772000                    QRL     27
         4 000202   000000 622006                    EAX2    0,QL
         4 000203   000100 305540                    DTB
         4 000204   000004 230012                    NDSC9   4,,PR0                   cn=1,s=nosgn,sf=0,n=*X2
         4 000205   200013 000004                    NDSC9   SYSID,,AUTO              cn=0,s=lsgnf,sf=0,n=4

      151     7235    3             END;
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:29   

      152     7236
      153     7237    2           NEXT$ = QQ_GLOBAL.TPU$;

   7237  4 000206   000155 236000 xsym               LDQ     QQ_GLOBAL+109
         4 000207   200005 756100                    STQ     NEXT$,,AUTO

      154     7238
      155     7239    3           DO WHILE('1'B);

      156     7240    3             NEXT$ = NEXT$ -> TPU$INFO.FLINK$;

   7240  4 000210   200005 470500                    LDP0    NEXT$,,AUTO
         4 000211   000001 236100                    LDQ     1,,PR0
         4 000212   200005 756100                    STQ     NEXT$,,AUTO

      157     7241    3             IF NEXT$ -> TPU$INFO.FLINK$ = ADDR(NIL) THEN

   7241  4 000213   200005 470500                    LDP0    NEXT$,,AUTO
         4 000214   000001 236100                    LDQ     1,,PR0
         4 000215   000001 116000 xsym               CMPQ    B_VECTNIL+1
         4 000216   000220 601000 4                  TNZ     s:7246

      158     7242    4               DO;

      159     7243    4                 GOTO RET;

   7243  4 000217   000305 710000 4                  TRA     RET

      160     7244    4               END;
      161     7245
      162     7246    3             STATION = NEXT$ -> TPU$INFO.STATION;

   7246  4 000220   040000 100500                    MLR     fill='040'O
         4 000221   000004 000010                    ADSC9   4,,PR0                   cn=0,n=8
         4 000222   000000 000010 2                  ADSC9   STATION                  cn=0,n=8

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:30   
      163     7247
      164     7248    4             DO CASE(ITEM$ -> OUT$SYM.CODE);

   7248  4 000223   200006 471500                    LDP1    ITEM$,,AUTO
         4 000224   100000 720100                    LXL0    0,,PR1
         4 000225   000003 100003                    CMPX0   3,DU
         4 000226   000230 602010 4                  TNC     s:7248+5,X0
         4 000227   000252 710000 4                  TRA     s:7260
         4 000230   000252 710000 4                  TRA     s:7260
         4 000231   000233 710000 4                  TRA     s:7250
         4 000232   000245 710000 4                  TRA     s:7253

      165     7249    4               CASE(1 /* OPT_STATION */);

      166     7250    4                 CALL QQC$WILD_COMP(ITEM, NEXT$ -> TPU$INFO.STATION) ALTRET(LOOP);

   7250  4 000233   200005 236100                    LDQ     NEXT$,,AUTO
         4 000234   000004 036003                    ADLQ    4,DU
         4 000235   200051 756100                    STQ     TEXTC_NUM+5,,AUTO
         4 000236   200014 633500                    EPPR3   ITEM,,AUTO
         4 000237   200050 453500                    STP3    TEXTC_NUM+4,,AUTO
         4 000240   200050 630500                    EPPR0   TEXTC_NUM+4,,AUTO
         4 000241   000020 631400 xsym               EPPR1   B_VECTNIL+16
         4 000242   000000 701000 xent               TSX1    QQC$WILD_COMP
         4 000243   000304 702000 4                  TSX2    LOOP
         4 000244   000252 710000 4                  TRA     s:7260

      167     7251
      168     7252    4               CASE(2 /* OPT_SYSID */);

      169     7253    4                 IF SYSID ~= NEXT$ -> TPU$INFO.SYSID THEN

   7253  4 000245   200013 236100                    LDQ     SYSID,,AUTO
         4 000246   000251 604000 4                  TMI     s:7255
         4 000247   000002 116100                    CMPQ    2,,PR0
         4 000250   000252 600000 4                  TZE     s:7260

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:31   
      170     7254    5                   DO;

      171     7255    5                     GOTO LOOP;

   7255  4 000251   000304 710000 4                  TRA     LOOP

      172     7256    5                   END;
      173     7257
      174     7258    4             END /* CASE */;

      175     7259
      176     7260    3             IF NOW_FLAG THEN

   7260  4 000252   200016 234100                    SZN     NOW_FLAG,,AUTO
         4 000253   000264 605000 4                  TPL     s:7267

      177     7261    4               DO;

      178     7262    4                 FPT_RUE.V.USER# = NEXT$ -> TPU$INFO.SYSID;

   7262  4 000254   200005 470500                    LDP0    NEXT$,,AUTO
         4 000255   000002 720100                    LXL0    2,,PR0
         4 000256   000024 740000 2                  STX0    FPT_RUE+2

      179     7263    4                 CALL M$RUE(FPT_RUE) ALTRET(MON_ERR);

   7263  4 000257   000022 630400 2                  EPPR0   FPT_RUE
         4 000260   420020 713400                    CLIMB   alt,+8208
         4 000261   400000 401760                    pmme    nvectors=1
         4 000262   000307 702000 4                  TSX2    MON_ERR

      180     7264    4               END;

   7264  4 000263   000270 710000 4                  TRA     s:7270

      181     7265    3             ELSE
      182     7266    4               DO;
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:32   

      183     7267    4                 CALL M$ACTIVATE(FPT_DEACTIVATE) ALTRET(ACTIVATE_ERR);

   7267  4 000264   000002 630400 2                  EPPR0   FPT_DEACTIVATE
         4 000265   500000 713400                    CLIMB   alt,+32768
         4 000266   401400 401760                    pmme    nvectors=4
         4 000267   000275 702000 4                  TSX2    ACTIVATE_ERR

      184     7268    4               END;

      185     7269
      186     7270    3             COUNT = COUNT + 1;

   7270  4 000270   200011 054100                    AOS     COUNT,,AUTO

      187     7271    3             NEXT$ -> TPU$INFO.FLAGS.DISCONNECT = '1'B;

   7271  4 000271   200005 470500                    LDP0    NEXT$,,AUTO
         4 000272   200000 236003                    LDQ     65536,DU
         4 000273   000011 256100                    ORSQ    9,,PR0

      188     7272
      189     7273    4             DO WHILE('0'B);

   7273  4 000274   000304 710000 4                  TRA     LOOP

      190     7274
      191     7275    4   ACTIVATE_ERR:
      192     7276    4               IF B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR.CODE ~= 1154 /* E$CGAFNS */ THEN

   7276  4 000275   000000 470400 xsym  ACTIVATE_ERR LDP0    B$TCB$
         4 000276   000000 471500                    LDP1    0,,PR0
         4 000277   100102 236100                    LDQ     66,,PR1
         4 000300   377770 376007                    ANQ     131064,DL
         4 000301   022020 116007                    CMPQ    9232,DL
         4 000302   000304 600000 4                  TZE     LOOP

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:33   
      193     7277    5                 DO;

      194     7278    5                   GOTO MON_ERR;

   7278  4 000303   000307 710000 4                  TRA     MON_ERR

      195     7279    5                 END;
      196     7280    4             END /* NEVER */;

      197     7281
      198     7282    3   LOOP:
      199     7283    3           END;

   7283  4 000304   000210 710000 4     LOOP         TRA     s:7240

      200     7284
      201     7285    2   RET:
      202     7286    2           RETURN;

   7286  4 000305   200046 221300       RET          LDX1  ! TEXTC_NUM+2,,AUTO
         4 000306   000001 702211                    TSX2  ! 1,X1

      203     7287
      204     7288    2   MON_ERR:
      205     7289    2           QQ_GLOBAL.ERR = B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR;

   7289  4 000307   000000 470400 xsym  MON_ERR      LDP0    B$TCB$
         4 000310   000000 471500                    LDP1    0,,PR0
         4 000311   100102 236100                    LDQ     66,,PR1
         4 000312   000000 756000 xsym               STQ     QQ_GLOBAL

      206     7290    2           CALL QQC$SCREECH;

   7290  4 000313   000002 631400 xsym               EPPR1   B_VECTNIL+2
         4 000314   000000 701000 xent               TSX1    QQC$SCREECH
         4 000315   000000 011000                    NOP     0

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:34   
      207     7291
      208     7292    2   END KILL_DCB;

   7292  4 000316   200046 221300                    LDX1  ! TEXTC_NUM+2,,AUTO
         4 000317   000001 702211                    TSX2  ! 1,X1
      209     7293    1   END QQB$KILL;

PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:35   
--  Include file information  --

   SS_SCHED_C.:E05TOU  is referenced.
   Q_ERRCODE_C.:E05TOU  is referenced.
   QQ_PERR_C.:E05TOU  is referenced.
   QQ_SUBS_C.:E05TOU  is referenced.
   QQ_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   QQ_MACROS_C.:E05TOU  is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   Q_PAGE_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure QQB$KILL.
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:36   

 **** Variables and constants ****

  ****  Section 002  Data  QQB$KILL

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     2-0-0/d STRC(576)   r     1 FPT_DEACTIVATE            22-0-0/d STRC(144)   r     1 FPT_RUE
     0-0-0/c CHAR(8)     r     1 STATION

  ****  Section 003 RoData QQB$KILL

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/b STRC        r     1 CODE_DDIED                 1-0-0/b STRC        r     1 CODE_SDIED

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    11-0-0/w SBIN        r     1 COUNT                      7-0-0/w SBIN        r     1 I
    14-0-0/c CHAR(8)     r     1 ITEM                       6-0-0/w PTR         r     1 ITEM$
    17-0-0/w STRC(738)   r     1 MSGBLK                     5-0-0/w PTR         r     1 NEXT$
    16-0-0/w BIT         r     1 NOW_FLAG                   3-0-0/w PTR         r     1 S$
    12-0-0/w SBIN        r     1 SIZE                      13-0-0/w SBIN        r     1 SYSID
     4-0-0/w PTR         r     1 T$                        44-0-0/c STRC(45)    r     1 TEXTC_NUM
    10-0-0/w SBIN        r     1 TYPE

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$JIT$                     0-0-0/w PTR         r     1 B$TCB$
     0-0-0/w STRC(315)   r     1 QQ_CMDBLK                  0-0-0/d STRC(9090)  r     1 QQ_GLOBAL
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:37   

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/w STRC(144)   r     1 B$TCB
     0-0-0N  NULL        r     1 M$CG                       0-0-0/w STRC(144)   r     1 OUT$BLK
     0-0-0/w ASTR(153)   r     1 OUT$SYM                    0-0-0/w STRC(909)   r     1 TP$STATION
     0-0-0/w STRC(361)   r     1 TPU$INFO


   Procedure QQB$KILL requires 208 words for executable code.
   Procedure QQB$KILL requires 46 words of local(AUTO) storage.

    No errors detected in file QQB$KILL.:E05TSI    .
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:38   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:39   
          MINI XREF LISTING

ACTIVATE_ERR IN PROCEDURE KILL_DCB
      7276**LABEL    7267--CALLALT
B$ALT.CODE
      6606**DCL      6606--REDEF    6607--REDEF    6607--REDEF
B$ALT.ERR
      6607**DCL      7198>>ASSIGN   7289>>ASSIGN
B$ALT.ERR.CODE
      6608**DCL      7186>>IF       7276>>IF
B$ALT.ERR.ERR#
      6608**DCL      6608--REDEF
B$ALT.EVID
      6607**DCL      6607--REDEF    6607--REDEF
B$JIT.CPFLAGS1.SLEAZE
       798**DCL       798--REDEF
B$JIT.ERR.MID
       705**DCL       705--REDEF
B$JIT.JRESPEAK
       866**DCL       867--REDEF
B$JIT.ORIGINATOR_PORT.FROM_CR
       975**DCL       975--REDEF     976--REDEF
B$JIT.PNR
       879**DCL       879--REDEF
B$JIT.TSLINE
       973**DCL       974--REDEF
B$JIT$
      6549**DCL       699--IMP-PTR
B$TCB.ALT$
      6602**DCL      7186>>IF       7198>>ASSIGN   7276>>IF       7289>>ASSIGN
B$TCB$
      6548**DCL      7186>>IF       7198>>ASSIGN   7276>>IF       7289>>ASSIGN
CODE_DDIED
      7004**DCL      7230>>ASSIGN
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:40   
CODE_SDIED
      7011**DCL      7171>>ASSIGN
COUNT
      6853**DCL      7119<<ASSIGN   7137<>CALL     7180<<ASSIGN   7180>>ASSIGN   7270<<ASSIGN   7270>>ASSIGN
DEACTIVATE_ERR IN PROCEDURE KILL_STATION
      7186**LABEL    7179--CALLALT
FPT_DEACTIVATE
      7063**DCL      7179<>CALL     7267<>CALL
FPT_DEACTIVATE.V
      7064**DCL      7063--DCLINIT
FPT_DEACTIVATE.V.DVBYTE.REREAD#
      7066**DCL      7066--REDEF
FPT_RUE
      7087**DCL      7263<>CALL
FPT_RUE.V
      7087**DCL      7087--DCLINIT
FPT_RUE.V.USER#
      7087**DCL      7262<<ASSIGN
I
      6851**DCL      7173<<DOINDEX  7174>>ASSIGN
ITEM
      6857**DCL      7117<<ASSIGN   7176<>CALL     7250<>CALL
ITEM$
      6849**DCL      7116<<ASSIGN   7117>>ASSIGN   7117>>ASSIGN   7232>>IF       7234>>CALLBLT  7234>>CALLBLT
      7248>>DOCASE
KILL_DCB
      7228**PROC     7133--CALL
KILL_STATION
      7169**PROC     7129--CALL
LOOP IN PROCEDURE KILL_DCB
      7283**LABEL    7250--CALLALT  7255--GOTO
LOOP IN PROCEDURE KILL_STATION
      7193**LABEL    7176--CALLALT
M$ACTIVATE
        98**DCL-ENT  7267--CALL
M$DEACTIVATE
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:41   
        98**DCL-ENT  7179--CALL
M$RUE
       144**DCL-ENT  7263--CALL
MON_ERR IN PROCEDURE KILL_DCB
      7289**LABEL    7263--CALLALT  7278--GOTO
MON_ERR IN PROCEDURE KILL_STATION
      7198**LABEL    7188--GOTO
MSGBLK
      6862**DCL      7136<>CALL     7140<>CALL
MSGBLK.ERRINFO.FIELD1
      6944**DCL      7139<<ASSIGN
NEXT$
      6848**DCL      7237<<ASSIGN   7240<<ASSIGN   7240>>ASSIGN   7241>>IF       7246>>ASSIGN   7250>>CALL
      7253>>IF       7262>>ASSIGN   7271>>ASSIGN
NOW_FLAG
      6859**DCL      7121<<ASSIGN   7124<<ASSIGN   7260>>IF
OUT$BLK.NSUBLKS
      6770**DCL      7122>>IF
OUT$BLK.SUBLK$
      6791**DCL      7115>>ASSIGN   7116>>ASSIGN
OUT$SYM.CODE
      6727**DCL      7115>>ASSIGN   7232>>IF       7248>>DOCASE
OUT$SYM.COUNT
      6744**DCL      6747--IMP-SIZ  7117>>ASSIGN   7234>>CALLBLT
OUT$SYM.TEXT
      6747**DCL      7117>>ASSIGN   7234>>CALLBLT
QQC$BLDMSG
      6518**DCL-ENT  7140--CALL
QQC$BLDMSG_BLK
      6519**DCL-ENT  7136--CALL
QQC$CONVERT_NUM
      6520**DCL-ENT  7137--CALL
QQC$SCREECH
      6521**DCL-ENT  7199--CALL     7290--CALL
QQC$WILD_COMP
      6522**DCL-ENT  7176--CALL     7250--CALL
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:42   
QQ_CMDBLK.MINOR_ERR
      5647**DCL      7171<<ASSIGN   7230<<ASSIGN
QQ_CMDBLK.OUT$
      5647**DCL      7115>>ASSIGN   7116>>ASSIGN   7122>>IF
QQ_GLOBAL.DS1$_BITS
      5658**DCL      5658--REDEF
QQ_GLOBAL.DS2$_BITS
      5658**DCL      5659--REDEF
QQ_GLOBAL.DS3$_BITS
      5659**DCL      5659--REDEF
QQ_GLOBAL.DS4$_BITS
      5659**DCL      5660--REDEF
QQ_GLOBAL.ERR
      5648**DCL      7198<<ASSIGN   7289<<ASSIGN
QQ_GLOBAL.STATION$
      5659**DCL      7174>>ASSIGN
QQ_GLOBAL.STATION_CNT
      5653**DCL      7173>>DOINDEX
QQ_GLOBAL.TPU$
      5660**DCL      7237>>ASSIGN
RET IN PROCEDURE KILL_DCB
      7286**LABEL    7243--GOTO
S$
      6624**DCL      6626--IMP-PTR  7174<<ASSIGN   7176>>CALL     7177>>ASSIGN   7181>>ASSIGN
SIZE
      6854**DCL      7137<>CALL     7138>>ASSIGN
STATION
      6822**DCL      7063--DCLINIT  7177<<ASSIGN   7246<<ASSIGN
SYSID
      6855**DCL      7234<<CALLBLT  7253>>IF
T$
      6686**DCL      6687--IMP-PTR
TEXTC_NUM
      6976**DCL      7139--ASSIGN
TEXTC_NUM.L#
      6976**DCL      7138<<ASSIGN
PL6.E3A0      #001=QQB$KILL File=QQB$KILL.:E05TSI                                WED 07/30/97 05:31 Page:43   
TEXTC_NUM.NAME#
      6976**DCL      7137--CALL
TP$STATION
      6626**DCL      7174--ASSIGN
TP$STATION.FLAGS.DISCONNECT
      6662**DCL      7181<<ASSIGN
TP$STATION.ID
      6627**DCL      7176<>CALL     7177>>ASSIGN
TPU$INFO.FLAGS.DISCONNECT
      6706**DCL      7271<<ASSIGN
TPU$INFO.FLINK$
      6690**DCL      7240>>ASSIGN   7241>>IF
TPU$INFO.STATION
      6696**DCL      7246>>ASSIGN   7250<>CALL
TPU$INFO.SYSID
      6692**DCL      7253>>IF       7262>>ASSIGN
TYPE
      6852**DCL      7115<<ASSIGN   7127>>IF
