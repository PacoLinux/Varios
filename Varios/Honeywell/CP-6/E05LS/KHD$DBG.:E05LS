VERSION E05

PL6.E3A0      #001=KHD$SCREECH File=KHD$DBG.:E05TSI                              WED 07/30/97 00:28 Page:1    
        1        1        /*M* KHD$DBG Handler Debug/diagnostic routines */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*F* NAME: KHD$SCREECH - Screech the FEP
        8        8
        9        9        The KHD$SCREECH routine will cause the handler to screech.
       10       10        It is to be used to cause a dump to be taken and the FEP
       11       11        to re-booted when an unrecoverable situation has occurred.
       12       12
       13       13        Note that the handler must have the FEP SCREECH privilege active to
       14       14        use KHD$SCREECH.  Please refer to the description of M$SPRIV
       15       15        in the CP-6 FEP Monitor Services Reference Manual (CE66) for
       16       16        information on setting active privileges.
       17       17
       18       18        The form of the call for this service is:
       19       19
       20       20        .fif
       21       21           CALL KHD$SCREECH(vlp_scode);
       22       22        .fin
       23       23
       24       24        where:
       25       25        */
       26       26
       27       27        /*K* vlp_scode -
       28       28        is the structure used by the M$SCREECH monitor service.
       29       29        The VLP_SCODE macro should be used to generate this structure.
       30       30        Please refer to the CP-6 FEP Monitor Services Reference Manual
       31       31        (CE66) for details.
       32       32        */
       33       33        KHD$SCREECH: PROC(PRM_SCODE);
       34       34        %INCLUDE LCP_6;
       35     4313        %VLP_SCODE (FPTN=PRM_SCODE, STCLASS=PARAM);
       36     4374    1      CALL M$SCREECH (PRM_SCODE);
       37     4375    1           RETURN;
PL6.E3A0      #001=KHD$SCREECH File=KHD$DBG.:E05TSI                              WED 07/30/97 00:28 Page:2    
       38     4376    1   END;
       39     4377        %EOD;

PL6.E3A0      #001=KHD$SCREECH File=KHD$DBG.:E05TSI                              WED 07/30/97 00:28 Page:3    
--  Include file information  --

   G_LCP6_E.:E05TOU  is referenced.
   GT_LCP6_M.:E05TOU  is referenced.
   KI_CP6.:E05TOU  is referenced.
   GF_LCP6_M.:E05TOU  is referenced.
   GM_LCP6_M.:E05TOU  is referenced.
   GU_LCP6_M.:E05TOU  is referenced.
   GJ_LCP6_M.:E05TOU  is referenced.
   GH_LCP6_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure KHD$SCREECH.

   Procedure KHD$SCREECH requires 14 words for executable code.
   Procedure KHD$SCREECH requires 6 words of local(AUTO) storage.

PL6.E3A0      #001=KHD$SCREECH File=KHD$DBG.:E05TSI                              WED 07/30/97 00:28 Page:4    

 Object Unit name= KHD$SCREECH                                File name= KHD$DBG.:E05TOU
 UTS= JUL 30 '97 00:28:10.72 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0   Proc  even  none    14      E  KHD$SCREECH

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes      Std        1  KHD$SCREECH

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X6A_AUTO_1
                       nStd      0 X6A_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    G$ROS$
PL6.E3A0      #001=KHD$SCREECH File=KHD$DBG.:E05TSI                              WED 07/30/97 00:28 Page:5    


        1        1        /*M* KHD$DBG Handler Debug/diagnostic routines */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*F* NAME: KHD$SCREECH - Screech the FEP
        8        8
        9        9        The KHD$SCREECH routine will cause the handler to screech.
       10       10        It is to be used to cause a dump to be taken and the FEP
       11       11        to re-booted when an unrecoverable situation has occurred.
       12       12
       13       13        Note that the handler must have the FEP SCREECH privilege active to
       14       14        use KHD$SCREECH.  Please refer to the description of M$SPRIV
       15       15        in the CP-6 FEP Monitor Services Reference Manual (CE66) for
       16       16        information on setting active privileges.
       17       17
       18       18        The form of the call for this service is:
       19       19
       20       20        .fif
       21       21           CALL KHD$SCREECH(vlp_scode);
       22       22        .fin
       23       23
       24       24        where:
       25       25        */
       26       26
       27       27        /*K* vlp_scode -
       28       28        is the structure used by the M$SCREECH monitor service.
       29       29        The VLP_SCODE macro should be used to generate this structure.
       30       30        Please refer to the CP-6 FEP Monitor Services Reference Manual
       31       31        (CE66) for details.
       32       32        */
       33       33        KHD$SCREECH: PROC(PRM_SCODE);

     33   0 000000  D380 0000 0000  xent KHD$SCREECH     LNJ,B5   X6A_AUTO_1
          0 000003       0006 0001                       DC       6,1
PL6.E3A0      #001=KHD$SCREECH File=KHD$DBG.:E05TSI                              WED 07/30/97 00:28 Page:6    

       34       34        %INCLUDE LCP_6;
       35     4313        %VLP_SCODE (FPTN=PRM_SCODE, STCLASS=PARAM);
       36     4374    1      CALL M$SCREECH (PRM_SCODE);

   4374   0 000005  BCC7 0004                            LDB,B3   @PRM_SCODE,AUTO
          0 000007  B870 0485                            LDR,R3   1157,IMO
          0 000009  0001                                 MCL
          0 00000A       0000                            DC       s:4374+5,PREL

       37     4375    1           RETURN;

   4375   0 00000B  C380 0000 0000  xent                 LNJ,B4   X6A_ARET
       38     4376    1   END;
       39     4377        %EOD;

PL6.E3A0      #001=KHD$SCREECH File=KHD$DBG.:E05TSI                              WED 07/30/97 00:28 Page:7    
--  Include file information  --

   G_LCP6_E.:E05TOU  is referenced.
   GT_LCP6_M.:E05TOU  is referenced.
   KI_CP6.:E05TOU  is referenced.
   GF_LCP6_M.:E05TOU  is referenced.
   GM_LCP6_M.:E05TOU  is referenced.
   GU_LCP6_M.:E05TOU  is referenced.
   GJ_LCP6_M.:E05TOU  is referenced.
   GH_LCP6_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure KHD$SCREECH.
PL6.E3A0      #001=KHD$SCREECH File=KHD$DBG.:E05TSI                              WED 07/30/97 00:28 Page:8    

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @PRM_SCODE                *0-0-0/w STRC(48)    r     1 PRM_SCODE


   Procedure KHD$SCREECH requires 14 words for executable code.
   Procedure KHD$SCREECH requires 6 words of local(AUTO) storage.
PL6.E3A0      #001=KHD$SCREECH File=KHD$DBG.:E05TSI                              WED 07/30/97 00:28 Page:9    
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=KHD$SCREECH File=KHD$DBG.:E05TSI                              WED 07/30/97 00:28 Page:10   
          MINI XREF LISTING

M$SCREECH
      4274**DCL-ENT  4374--CALL
PRM_SCODE
      4340**DCL        33--PROC     4374<>CALL

PL6.E3A0      #002=KHD$ERRLOG File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:11   
       40        1        /*T***********************************************************/
       41        2        /*T*                                                         */
       42        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       43        4        /*T*                                                         */
       44        5        /*T***********************************************************/
       45        6        /*F* NAME: KHD$ERRLOG - Write Error Log Entry for Terminal
       46        7
       47        8        The KHD$ERRLOG routines provide an interface to
       48        9        the KHA$ERRLOG routine.  These routines optionally
       49       10        provide for supplying the terminal ID in the error
       50       11        log entry.
       51       12
       52       13        KHD$ERRLOG takes the parameters passed and forwards
       53       14        the error log entry on to the host through KHA$ERRLOG.
       54       15        The entry at KHD$ERRLOG forwards the FPT_WRSYSLOG unchanged.
       55       16
       56       17        KHD$ERRLOG_SETTERMID_CHN copies FPT_WRSYSLOG to auto
       57       18        and inserts TERMID from the second parameter before
       58       19        forwarding.
       59       20
       60       21        KHD$ERRLOG_SETTERMID_VDI copies FPT_WRSYSLOG
       61       22        to auto and inserts TERMID using current VDI context
       62       23        to access the channel table entry (through KV$VDI.CHN$).
       63       24
       64       25        The form of the call for these services are:
       65       26
       66       27        .fif
       67       28           CALL KHD$ERRLOG (FPT_WRSYSLOG) ALTRET(label)
       68       29
       69       30           CALL KHD$ERRLOG_SETTERMID_CHN (FPT_WRSYSLOG, kh$chn) ALTRET(label);
       70       31
       71       32           CALL KHD$ERRLOG_SETTERMID_VDI (FPT_WRSYSLOG) ALTRET(label);
       72       33        .fin
       73       34
       74       35        where:
       75       36        */
       76       37
PL6.E3A0      #002=KHD$ERRLOG File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:12   
       77       38        /*K* FPT_WRSYSLOG -
       78       39        is the FPT structure used by the M$WRSYSLOG monitor service.
       79       40        The FPT_WRSYSLOG from the LCP_6 INCLUDE should be used
       80       41        to generate this structure.
       81       42
       82       43        Options on the FPT_WRSYSLOG macro are as follows:
       83       44        */
       84       45        /*K* FPT_WRSYSLOG.BUF = VARIABLE.
       85       46        .XEQ GT_LCP6_M M$WRSYSLOG BUF
       86       47        */
       87       48        /*K* FPT_WRSYSLOG.FCG, MID, SEV, and ERR -
       88       49        .XEQ GT_LCP6_M M$WRSYSLOG FCG
       89       50
       90       51        The SEVerity specified must
       91       52        equal or exceed the ERRSND control parameter value set for this
       92       53        handler or the error will not be logged.
       93       54        */
       94       55        /*K* FPT_WRSYSLOG.TERMINAL_ID.
       95       56        .XEQ GT_LCP6_M M$WRSYSLOG TERMINAL_ID
       96       57        */
       97       58        /*K* FPT_WRSYSLOG.VALUES = ARRAY(0:3) UBIN.
       98       59        .XEQ GT_LCP6_M M$WRSYSLOG VALUES
       99       60        */
      100       61
      101       62        /*K* kn$chn -
      102       63        is the channel table entry for the errored channel.
      103       64        */
      104       65
      105       66        %EJECT;
PL6.E3A0      #002=KHD$ERRLOG File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:13   
      106       67        KHD$ERRLOG: PROC (PRM_WRSYSLOG, PRM_CHN) ALTRET;  /* PRM_CHN not used */
      107       68        %INCLUDE LCP_6;
      108     4347        %FPT_WRSYSLOG (FPTN = PRM_WRSYSLOG, STCLASS = PARAM);
      109     4442        %FPT_WRSYSLOG (FPTN = Y@WRSYSLOG, STCLASS = AUTO);
      110     4537        %FPT_WRSYSLOG (FPTN = Y$WRSYSLOG, STCLASS = BASED);
      111     4632
      112     4633        %INCLUDE KV_GLBCNS_E;
      113     4974
      114     4975        %INCLUDE KV$GLB;
      115     5394        %INCLUDE KV$GLBCTX;
      116     5839        %KV$PTR;
      117     5882        %KV$VDI;
      118     5953
      119     5954        %INCLUDE KH$CHN;
      120     6076        %KH$CHN;
      121     6200        %KH$CHN (NAME = PRM_CHN, STCLASS = PARAM);
      122     6324
      123     6325    1   DCL KHA$ERRLOG ENTRY (2) ALTRET;
      124     6326
      125     6327    1   DCL Y@WRSYSLOG$ PTR AUTO;
      126     6328
      127     6329    1    Y@WRSYSLOG$ = ADDR(PRM_WRSYSLOG);
      128     6330    1    GOTO Y$DO_WRSYSLOG;
      129     6331
      130     6332    1   KHD$ERRLOG_SETTERMID_VDI: ENTRY (PRM_WRSYSLOG, PRM_CHN) ALTRET;
              6332            /* PRM_CHN not used */
      131     6333
      132     6334    1    Y@WRSYSLOG$ = ADDR(Y@WRSYSLOG);
      133     6335    1    Y@WRSYSLOG = PRM_WRSYSLOG;
      134     6336    1    IF KV$PTR$ ~= ADDR(NIL)
      135     6337    1    AND KV$PTR.VDI$ ~= ADDR(NIL)
      136     6338    1    AND KV$PTR.VDI$->KV$VDI.CHN$ ~= ADDR(NIL) THEN
      137     6339        /*
      138     6340        We have a useable set of pointers to the KH$CHN.
      139     6341        */
      140     6342    1    Y@WRSYSLOG.V.TERMID = KV$PTR$->KV$PTR.VDI$->KV$VDI.CHN$->KH$CHN.TERMID;
      141     6343    1    GOTO Y$FIXV;
PL6.E3A0      #002=KHD$ERRLOG File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:14   
      142     6344
      143     6345    1   KHD$ERRLOG_SETTERMID_CHN: ENTRY (PRM_WRSYSLOG, PRM_CHN) ALTRET;
      144     6346
      145     6347    1    Y@WRSYSLOG$ = ADDR(Y@WRSYSLOG);
      146     6348    1    Y@WRSYSLOG = PRM_WRSYSLOG;
      147     6349    1    Y@WRSYSLOG.V.TERMID = PRM_CHN.TERMID;
      148     6350
      149     6351    1   Y$FIXV:
      150     6352    1    Y@WRSYSLOG.V_ = VECTOR(Y@WRSYSLOG.V);
      151     6353
      152     6354    1   Y$DO_WRSYSLOG:
      153     6355    1    CALL KHA$ERRLOG (Y@WRSYSLOG$->Y$WRSYSLOG)
      154     6356    2    WHENALTRETURN DO; ALTRETURN; END;
      155     6357
      156     6358    1   END KHD$ERRLOG;
      157     6359        %EOD;

PL6.E3A0      #002=KHD$ERRLOG File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:15   
--  Include file information  --

   KH$CHN.:E05TOU  is referenced.
   KV$GLBCTX.:E05TOU  is referenced.
   KV$GLB.:E05TOU  is referenced.
   KV_GLBCNS_E.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  is referenced.
   GT_LCP6_M.:E05TOU  is referenced.
   KI_CP6.:E05TOU  is referenced.
   GF_LCP6_M.:E05TOU  is referenced.
   GM_LCP6_M.:E05TOU  is referenced.
   GU_LCP6_M.:E05TOU  is referenced.
   GJ_LCP6_M.:E05TOU  is referenced.
   GH_LCP6_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure KHD$ERRLOG.

   Procedure KHD$ERRLOG requires 104 words for executable code.
   Procedure KHD$ERRLOG requires 35 words of local(AUTO) storage.

PL6.E3A0      #002=KHD$ERRLOG File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:16   

 Object Unit name= KHD$ERRLOG                                 File name= KHD$DBG.:E05TOU
 UTS= JUL 30 '97 00:28:22.52 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0   Proc  even  none   104     68  KHD$ERRLOG

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     0      0   yes    yes     yes      Std        2  KHD$ERRLOG
     0      B          yes     yes      Std        2  KHD$ERRLOG_SETTERMID_VDI
     0     33          yes     yes      Std        2  KHD$ERRLOG_SETTERMID_CHN

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       2 KHA$ERRLOG
                       nStd      0 X6A_AUTO_2
                       nStd      0 X6A_AALT
                       nStd      0 X6A_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     KV$PTR$                          r    G$ROS$
PL6.E3A0      #002=KHD$ERRLOG File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:17   


       40        1        /*T***********************************************************/
       41        2        /*T*                                                         */
       42        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       43        4        /*T*                                                         */
       44        5        /*T***********************************************************/
       45        6        /*F* NAME: KHD$ERRLOG - Write Error Log Entry for Terminal
       46        7
       47        8        The KHD$ERRLOG routines provide an interface to
       48        9        the KHA$ERRLOG routine.  These routines optionally
       49       10        provide for supplying the terminal ID in the error
       50       11        log entry.
       51       12
       52       13        KHD$ERRLOG takes the parameters passed and forwards
       53       14        the error log entry on to the host through KHA$ERRLOG.
       54       15        The entry at KHD$ERRLOG forwards the FPT_WRSYSLOG unchanged.
       55       16
       56       17        KHD$ERRLOG_SETTERMID_CHN copies FPT_WRSYSLOG to auto
       57       18        and inserts TERMID from the second parameter before
       58       19        forwarding.
       59       20
       60       21        KHD$ERRLOG_SETTERMID_VDI copies FPT_WRSYSLOG
       61       22        to auto and inserts TERMID using current VDI context
       62       23        to access the channel table entry (through KV$VDI.CHN$).
       63       24
       64       25        The form of the call for these services are:
       65       26
       66       27        .fif
       67       28           CALL KHD$ERRLOG (FPT_WRSYSLOG) ALTRET(label)
       68       29
       69       30           CALL KHD$ERRLOG_SETTERMID_CHN (FPT_WRSYSLOG, kh$chn) ALTRET(label);
       70       31
       71       32           CALL KHD$ERRLOG_SETTERMID_VDI (FPT_WRSYSLOG) ALTRET(label);
       72       33        .fin
       73       34
       74       35        where:
       75       36        */
PL6.E3A0      #002=KHD$ERRLOG File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:18   
       76       37
       77       38        /*K* FPT_WRSYSLOG -
       78       39        is the FPT structure used by the M$WRSYSLOG monitor service.
       79       40        The FPT_WRSYSLOG from the LCP_6 INCLUDE should be used
       80       41        to generate this structure.
       81       42
       82       43        Options on the FPT_WRSYSLOG macro are as follows:
       83       44        */
       84       45        /*K* FPT_WRSYSLOG.BUF = VARIABLE.
       85       46        .XEQ GT_LCP6_M M$WRSYSLOG BUF
       86       47        */
       87       48        /*K* FPT_WRSYSLOG.FCG, MID, SEV, and ERR -
       88       49        .XEQ GT_LCP6_M M$WRSYSLOG FCG
       89       50
       90       51        The SEVerity specified must
       91       52        equal or exceed the ERRSND control parameter value set for this
       92       53        handler or the error will not be logged.
       93       54        */
       94       55        /*K* FPT_WRSYSLOG.TERMINAL_ID.
       95       56        .XEQ GT_LCP6_M M$WRSYSLOG TERMINAL_ID
       96       57        */
       97       58        /*K* FPT_WRSYSLOG.VALUES = ARRAY(0:3) UBIN.
       98       59        .XEQ GT_LCP6_M M$WRSYSLOG VALUES
       99       60        */
      100       61
      101       62        /*K* kn$chn -
      102       63        is the channel table entry for the errored channel.
      103       64        */
      104       65
      105       66        %EJECT;
PL6.E3A0      #002=KHD$ERRLOG File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:19   
      106       67        KHD$ERRLOG: PROC (PRM_WRSYSLOG, PRM_CHN) ALTRET;  /* PRM_CHN not used */

     67   0 000000  D380 0000 0000  xent KHD$ERRLOG      LNJ,B5   X6A_AUTO_2
          0 000003       0023 0002                       DC       35,2

      107       68        %INCLUDE LCP_6;
      108     4347        %FPT_WRSYSLOG (FPTN = PRM_WRSYSLOG, STCLASS = PARAM);
      109     4442        %FPT_WRSYSLOG (FPTN = Y@WRSYSLOG, STCLASS = AUTO);
      110     4537        %FPT_WRSYSLOG (FPTN = Y$WRSYSLOG, STCLASS = BASED);
      111     4632
      112     4633        %INCLUDE KV_GLBCNS_E;
      113     4974
      114     4975        %INCLUDE KV$GLB;
      115     5394        %INCLUDE KV$GLBCTX;
      116     5839        %KV$PTR;
      117     5882        %KV$VDI;
      118     5953
      119     5954        %INCLUDE KH$CHN;
      120     6076        %KH$CHN;
      121     6200        %KH$CHN (NAME = PRM_CHN, STCLASS = PARAM);
      122     6324
      123     6325    1   DCL KHA$ERRLOG ENTRY (2) ALTRET;
      124     6326
      125     6327    1   DCL Y@WRSYSLOG$ PTR AUTO;
      126     6328
      127     6329    1    Y@WRSYSLOG$ = ADDR(PRM_WRSYSLOG);

   6329   0 000005  ECC7 0004                            LDB,B6   @PRM_WRSYSLOG,AUTO
          0 000007  EFC7 001D                            STB,B6   Y@WRSYSLOG$,AUTO

      128     6330    1    GOTO Y$DO_WRSYSLOG;

   6330   0 000009  0F81 004E                            B        s:6355,PREL

      129     6331
      130     6332    1   KHD$ERRLOG_SETTERMID_VDI: ENTRY (PRM_WRSYSLOG, PRM_CHN) ALTRET;
              6332            /* PRM_CHN not used */
PL6.E3A0      #002=KHD$ERRLOG File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:20   

   6332   0 00000B  D380 0000 0000  xent KHD$ERRLOG_SETT*LNJ,B5   X6A_AUTO_2
          0 00000E       0023 0002                       DC       35,2

      131     6333
      132     6334    1    Y@WRSYSLOG$ = ADDR(Y@WRSYSLOG);

   6334   0 000010  EBC7 0008                            LAB,B6   Y@WRSYSLOG,AUTO
          0 000012  EFC7 001D                            STB,B6   Y@WRSYSLOG$,AUTO

      133     6335    1    Y@WRSYSLOG = PRM_WRSYSLOG;

   6335   0 000014  ACC7 0004                            LDB,B2   @PRM_WRSYSLOG,AUTO
          0 000016  2C00                                 LDV,R2   0
          0 000017  6C2A                                 LDV,R6   42
          0 000018  BB87                                 LAB,B3   ,AUTO
          0 000019  3C10                                 LDV,R3   16
          0 00001A  0008                                 MMM

      134     6336    1    IF KV$PTR$ ~= ADDR(NIL)

   6336   0 00001B  8D80 0000 0000  xsym                 CMN      KV$PTR$
          0 00001E  0901 0012                            BE       s:6343,PREL
          0 000020  EC80 0000 0000  xsym                 LDB,B6   KV$PTR$
          0 000023  8D86                                 CMN      ,B6
          0 000024  0901 000C                            BE       s:6343,PREL
          0 000026  DC86                                 LDB,B5   ,B6
          0 000027  8D85                                 CMN      ,B5
          0 000028  0901 0008                            BE       s:6343,PREL

      135     6337    1    AND KV$PTR.VDI$ ~= ADDR(NIL)
      136     6338    1    AND KV$PTR.VDI$->KV$VDI.CHN$ ~= ADDR(NIL) THEN
      137     6339        /*
      138     6340        We have a useable set of pointers to the KH$CHN.
      139     6341        */
      140     6342    1    Y@WRSYSLOG.V.TERMID = KV$PTR$->KV$PTR.VDI$->KV$VDI.CHN$->KH$CHN.TERMID;

PL6.E3A0      #002=KHD$ERRLOG File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:21   
   6342   0 00002A  CC85                                 LDB,B4   ,B5
          0 00002B  AB84                                 LAB,B2   ,B4
          0 00002C  2C24                                 LDV,R2   36
          0 00002D  6C10                                 LDV,R6   16
          0 00002E  BB87                                 LAB,B3   ,AUTO
          0 00002F  3C20                                 LDV,R3   32
          0 000030  0008                                 MMM

      141     6343    1    GOTO Y$FIXV;

   6343   0 000031  0F81 0018                            B        s:6352,PREL

      142     6344
      143     6345    1   KHD$ERRLOG_SETTERMID_CHN: ENTRY (PRM_WRSYSLOG, PRM_CHN) ALTRET;

   6345   0 000033  D380 0000 0000  xent KHD$ERRLOG_SETT*LNJ,B5   X6A_AUTO_2
          0 000036       0023 0002                       DC       35,2

      144     6346
      145     6347    1    Y@WRSYSLOG$ = ADDR(Y@WRSYSLOG);

   6347   0 000038  EBC7 0008                            LAB,B6   Y@WRSYSLOG,AUTO
          0 00003A  EFC7 001D                            STB,B6   Y@WRSYSLOG$,AUTO

      146     6348    1    Y@WRSYSLOG = PRM_WRSYSLOG;

   6348   0 00003C  ACC7 0004                            LDB,B2   @PRM_WRSYSLOG,AUTO
          0 00003E  2C00                                 LDV,R2   0
          0 00003F  6C2A                                 LDV,R6   42
          0 000040  BB87                                 LAB,B3   ,AUTO
          0 000041  3C10                                 LDV,R3   16
          0 000042  0008                                 MMM

      147     6349    1    Y@WRSYSLOG.V.TERMID = PRM_CHN.TERMID;

   6349   0 000043  ACC7 0006                            LDB,B2   @PRM_CHN,AUTO
          0 000045  2C24                                 LDV,R2   36
PL6.E3A0      #002=KHD$ERRLOG File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:22   
          0 000046  6C10                                 LDV,R6   16
          0 000047  BB87                                 LAB,B3   ,AUTO
          0 000048  3C20                                 LDV,R3   32
          0 000049  0008                                 MMM

      148     6350
      149     6351    1   Y$FIXV:
      150     6352    1    Y@WRSYSLOG.V_ = VECTOR(Y@WRSYSLOG.V);

   6352   0 00004A  EBC7 000E            Y$FIXV          LAB,B6   Y@WRSYSLOG+6,AUTO
          0 00004C  EFC7 0021                            STB,B6   Y@WRSYSLOG$+4,AUTO
          0 00004E  6C1D                                 LDV,R6   29
          0 00004F  EF47 0020                            STR,R6   Y@WRSYSLOG$+3,AUTO
          0 000051  ABC7 0020                            LAB,B2   Y@WRSYSLOG$+3,AUTO
          0 000053  2C00                                 LDV,R2   0
          0 000054  6C06                                 LDV,R6   6
          0 000055  BB87                                 LAB,B3   ,AUTO
          0 000056  3C10                                 LDV,R3   16
          0 000057  0008                                 MMM

      151     6353
      152     6354    1   Y$DO_WRSYSLOG:
      153     6355    1    CALL KHA$ERRLOG (Y@WRSYSLOG$->Y$WRSYSLOG)

   6355   0 000058  BBC7 001D            Y$DO_WRSYSLOG   LAB,B3   Y@WRSYSLOG$,AUTO
          0 00005A  CBF0 0100                            LAB,B4   256,IMO
          0 00005C  E380 0000 0000  xent                 LNJ,B6   KHA$ERRLOG
          0 00005F       0003                            DC       s:6356,PREL
          0 000060  0F81 0004                            B        s:6358,PREL

      154     6356    2    WHENALTRETURN DO; ALTRETURN; END;

   6356   0 000062  C380 0000 0000  xent                 LNJ,B4   X6A_AALT

      155     6357
      156     6358    1   END KHD$ERRLOG;

PL6.E3A0      #002=KHD$ERRLOG File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:23   
   6358   0 000065  C380 0000 0000  xent                 LNJ,B4   X6A_ARET
      157     6359        %EOD;

PL6.E3A0      #002=KHD$ERRLOG File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:24   
--  Include file information  --

   KH$CHN.:E05TOU  is referenced.
   KV$GLBCTX.:E05TOU  is referenced.
   KV$GLB.:E05TOU  is referenced.
   KV_GLBCNS_E.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  is referenced.
   GT_LCP6_M.:E05TOU  is referenced.
   KI_CP6.:E05TOU  is referenced.
   GF_LCP6_M.:E05TOU  is referenced.
   GM_LCP6_M.:E05TOU  is referenced.
   GU_LCP6_M.:E05TOU  is referenced.
   GJ_LCP6_M.:E05TOU  is referenced.
   GH_LCP6_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure KHD$ERRLOG.
PL6.E3A0      #002=KHD$ERRLOG File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:25   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     6-0-0/w PTR         r     1 @PRM_CHN                   4-0-0/w PTR         r     1 @PRM_WRSYSLOG
    *0-0-0/w STRC(512)   r     1 PRM_CHN                   *0-0-0/w STRC(336)   r     1 PRM_WRSYSLOG
     8-0-0/w STRC(336)   r     1 Y@WRSYSLOG                1D-0-0/w PTR         r     1 Y@WRSYSLOG$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 KV$PTR$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(512)   r     1 KH$CHN                     0-0-0/w STRC(480)   r     1 KV$PTR
     0-0-0/w STRC(512)   r     1 KV$VDI                     0-0-0/w STRC(336)   r     1 Y$WRSYSLOG


   Procedure KHD$ERRLOG requires 104 words for executable code.
   Procedure KHD$ERRLOG requires 35 words of local(AUTO) storage.
PL6.E3A0      #002=KHD$ERRLOG File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:26   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=KHD$ERRLOG File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:27   
          MINI XREF LISTING

KH$CHN.TERMID
      6185**DCL      6342>>ASSIGN
KH$CHN.TERMID.TERM
      6187**DCL      6196--REDEF
KHA$ERRLOG
      6325**DCL-ENT  6355--CALL
KV$PTR.INPCNDPND
      5866**DCL      5875--REDEF    5879--REDEF
KV$PTR.LINLST$
      5862**DCL      5863--REDEF
KV$PTR.VDI$
      5860**DCL      6336>>IF       6336>>IF       6342>>ASSIGN
KV$PTR$
      5854**DCL      5860--IMP-PTR  6336>>IF       6336>>IF       6336>>IF       6342>>ASSIGN
KV$VDI.CHN$
      5903**DCL      6336>>IF       6342>>ASSIGN
PRM_CHN
      6215**DCL        67--PROC     6332--ENTRY    6345--ENTRY
PRM_CHN.TERMID
      6309**DCL      6349>>ASSIGN
PRM_CHN.TERMID.TERM
      6311**DCL      6320--REDEF
PRM_WRSYSLOG
      4360**DCL        67--PROC     6329--ASSIGN   6332--ENTRY    6335>>ASSIGN   6345--ENTRY    6348>>ASSIGN
PRM_WRSYSLOG.V.TERMID.TERM
      4429**DCL      4438--REDEF
Y$DO_WRSYSLOG
      6355**LABEL    6330--GOTO
Y$FIXV
      6352**LABEL    6343--GOTO
Y$WRSYSLOG
      4550**DCL      6355<>CALL
PL6.E3A0      #002=KHD$ERRLOG File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:28   
Y$WRSYSLOG.V.TERMID.TERM
      4619**DCL      4628--REDEF
Y@WRSYSLOG
      4455**DCL      6334--ASSIGN   6335<<ASSIGN   6347--ASSIGN   6348<<ASSIGN
Y@WRSYSLOG.V
      4459**DCL      6352--ASSIGN
Y@WRSYSLOG.V.TERMID
      4522**DCL      6342<<ASSIGN   6349<<ASSIGN
Y@WRSYSLOG.V.TERMID.TERM
      4524**DCL      4533--REDEF
Y@WRSYSLOG.V_
      4457**DCL      6352<<ASSIGN
Y@WRSYSLOG$
      6327**DCL      6329<<ASSIGN   6334<<ASSIGN   6347<<ASSIGN   6355>>CALL

PL6.E3A0      #003=KHD$ERR_IO File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:29   
      158        1        /*T***********************************************************/
      159        2        /*T*                                                         */
      160        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      161        4        /*T*                                                         */
      162        5        /*T***********************************************************/
      163        6        KHD$ERR_IO: PROC (PRM_CHN, PRM_X) ALTRET;
      164        7        /*
      165        8        This routine is called from KHI$IO (an assembly language routine)
      166        9        to do error logging.
      167       10        */
      168       11        %INCLUDE KH_ERRORS_C;
      169       22
      170       23        %INCLUDE KV$GLB;
      171      442
      172      443        %INCLUDE LCP_6;
      173     4722        %FPT_WRSYSLOG (FPTN = FPT_WRSYSLOG_ERR_IO, STCLASS = CONSTANT, FCG = KH, MID = I,
              4722            MON = '1'B, ERR = %E$ERR_IO, SEV = 3);
      174     4817        %FPT_WRSYSLOG (FPTN = FPT@WRSYSLOG, STCLASS = AUTO);
      175     4912
      176     4913        %INCLUDE GH_IOFNC_E;
      177     4982
      178     4983        %INCLUDE KH$CHN;
      179     5105        %KH$CHN (NAME = PRM_CHN, STCLASS = PARAM);
      180     5229
      181     5230        %INCLUDE KH$IO;
      182     5477        %KH$IO (FPTN = KH$IO, STCLASS = BASED);
      183     5591        %KH$IOLD (FPTN = KH$IOLD, STCLASS = BASED);
      184     5642
      185     5643    1   DCL PRM_X UBIN PARAM;
      186     5644
      187     5645    1   DCL KHD$ERRLOG_SETTERMID_CHN ENTRY (2) ALTRET;
      188     5646
      189     5647        /*E* ERROR:         KHI-E$ERR_IO-0
      190     5648        *    MESSAGE:       Irrecoverable IONAK on IO instruction (other than IOLD)
      191     5649        *    DESCRIPTION:   KHI$IO... received repeatedly IONAKs on an IO instruction.
      192     5650        *                   The data in the error log entry is the KH$IO
      193     5651        *                   passed to KH$IO_...
PL6.E3A0      #003=KHD$ERR_IO File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:30   
      194     5652        */
      195     5653    1    FPT@WRSYSLOG = FPT_WRSYSLOG_ERR_IO;
      196     5654    1    FPT@WRSYSLOG.BUF_ = VECTOR(ADDR(PRM_X)->KH$IO);
      197     5655    1    GOTO Y$CALERRLOG;
      198     5656
      199     5657    1   KHD$ERR_IOLD_OTPCCBCTR: ENTRY (PRM_CHN, PRM_X) ALTRET;
      200     5658
      201     5659        /*E* ERROR:         KHI-E$ERR_IOLD_OTPCCBCTR-0
      202     5660        *    MESSAGE:       Irrecoverable IONAK on IO (output CCB control) instruction
      203     5661        *    DESCRIPTION:   KHI$IO... received repeatedly IONAKs on an IO (output CCB contro
              5661        l) instruction.
      204     5662        *                   The data in the error log entry is the KH$IOLD
      205     5663        *                   structure passed to KH$IOLD.
      206     5664        */
      207     5665    1    FPT@WRSYSLOG = FPT_WRSYSLOG_ERR_IO;
      208     5666    1    FPT@WRSYSLOG.BUF_ = VECTOR(ADDR(PRM_X)->KH$IOLD);
      209     5667    1    FPT@WRSYSLOG.V.ERRCODE.ERR# = %E$ERR_IOLD_OTPCCBCTR;
      210     5668    1    GOTO Y$CALERRLOG;
      211     5669
      212     5670    1   KHD$ERR_IOLD: ENTRY (PRM_CHN, PRM_X) ALTRET;
      213     5671
      214     5672        /*E* ERROR:         KHI-E$ERR_IOLD-0
      215     5673        *    MESSAGE:       Irrecoverable IONAK on IOLD instruction
      216     5674        *    DESCRIPTION:   KHI$IOLD... received repeatedly IONAKs on an IOLD
      217     5675        *                   or IOLD (ram data transfer).
      218     5676        *                   The data in the error log entry is the KH$IOLD
      219     5677        *                   passed to KH$IOLD_...
      220     5678        */
      221     5679    1    FPT@WRSYSLOG = FPT_WRSYSLOG_ERR_IO;
      222     5680    1    FPT@WRSYSLOG.BUF_ = VECTOR(ADDR(PRM_X)->KH$IOLD);
      223     5681    1    FPT@WRSYSLOG.V.ERRCODE.ERR# = %E$ERR_IOLD;
      224     5682
      225     5683    1   Y$CALERRLOG: IF PRM_CHN.DED THEN ALTRETURN;
      226     5684    1    CALL KHD$ERRLOG_SETTERMID_CHN (FPT@WRSYSLOG, PRM_CHN);
      227     5685    1    PRM_CHN.DED = '1'B;
      228     5686        /*
      229     5687        The following ALTRETURN is really returning us back to the
PL6.E3A0      #003=KHD$ERR_IO File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:31   
      230     5688        PL-6 program that called the assembly language program (KH$IO...).
      231     5689        */
      232     5690    1    ALTRETURN;
      233     5691
      234     5692    1   END KHD$ERR_IO;
      235     5693        %EOD;

PL6.E3A0      #003=KHD$ERR_IO File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:32   
--  Include file information  --

   KH$IO.:E05TOU  is referenced.
   KH$CHN.:E05TOU  is referenced.
   GH_IOFNC_E.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  is referenced.
   GT_LCP6_M.:E05TOU  is referenced.
   KI_CP6.:E05TOU  is referenced.
   GF_LCP6_M.:E05TOU  is referenced.
   GM_LCP6_M.:E05TOU  is referenced.
   GU_LCP6_M.:E05TOU  is referenced.
   GJ_LCP6_M.:E05TOU  is referenced.
   GH_LCP6_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
   KV$GLB.:E05TOU  is referenced.
   KH_ERRORS_C.:E05TOU  is referenced.
      No diagnostics issued in procedure KHD$ERR_IO.

   Procedure KHD$ERR_IO requires 127 words for executable code.
   Procedure KHD$ERR_IO requires 34 words of local(AUTO) storage.

PL6.E3A0      #003=KHD$ERR_IO File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:33   

 Object Unit name= KHD$ERR_IO                                 File name= KHD$DBG.:E05TOU
 UTS= JUL 30 '97 00:28:47.72 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0  RoData even  UTS     21     15  KHD$ERR_IO
    1   Proc  even  none   127     7F  KHD$ERR_IO

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     1      0   yes    yes     yes      Std        2  KHD$ERR_IO
     1     1D          yes     yes      Std        2  KHD$ERR_IOLD_OTPCCBCTR
     1     3F          yes     yes      Std        2  KHD$ERR_IOLD

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       2 KHD$ERRLOG_SETTERMID_CHN
                       nStd      0 X6A_AUTO_2
                       nStd      0 X6A_AALT

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    G$ROS$
PL6.E3A0      #003=KHD$ERR_IO File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:34   


      158        1        /*T***********************************************************/
      159        2        /*T*                                                         */
      160        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      161        4        /*T*                                                         */
      162        5        /*T***********************************************************/
      163        6        KHD$ERR_IO: PROC (PRM_CHN, PRM_X) ALTRET;

      6   1 000000  D380 0000 0000  xent KHD$ERR_IO      LNJ,B5   X6A_AUTO_2
          1 000003       0022 0002                       DC       34,2

      164        7        /*
      165        8        This routine is called from KHI$IO (an assembly language routine)
      166        9        to do error logging.
      167       10        */
      168       11        %INCLUDE KH_ERRORS_C;
      169       22
      170       23        %INCLUDE KV$GLB;
      171      442
      172      443        %INCLUDE LCP_6;
      173     4722        %FPT_WRSYSLOG (FPTN = FPT_WRSYSLOG_ERR_IO, STCLASS = CONSTANT, FCG = KH, MID = I,
              4722            MON = '1'B, ERR = %E$ERR_IO, SEV = 3);
      174     4817        %FPT_WRSYSLOG (FPTN = FPT@WRSYSLOG, STCLASS = AUTO);
      175     4912
      176     4913        %INCLUDE GH_IOFNC_E;
      177     4982
      178     4983        %INCLUDE KH$CHN;
      179     5105        %KH$CHN (NAME = PRM_CHN, STCLASS = PARAM);
      180     5229
      181     5230        %INCLUDE KH$IO;
      182     5477        %KH$IO (FPTN = KH$IO, STCLASS = BASED);
      183     5591        %KH$IOLD (FPTN = KH$IOLD, STCLASS = BASED);
      184     5642
      185     5643    1   DCL PRM_X UBIN PARAM;
      186     5644
      187     5645    1   DCL KHD$ERRLOG_SETTERMID_CHN ENTRY (2) ALTRET;
      188     5646
PL6.E3A0      #003=KHD$ERR_IO File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:35   
      189     5647        /*E* ERROR:         KHI-E$ERR_IO-0
      190     5648        *    MESSAGE:       Irrecoverable IONAK on IO instruction (other than IOLD)
      191     5649        *    DESCRIPTION:   KHI$IO... received repeatedly IONAKs on an IO instruction.
      192     5650        *                   The data in the error log entry is the KH$IO
      193     5651        *                   passed to KH$IO_...
      194     5652        */
      195     5653    1    FPT@WRSYSLOG = FPT_WRSYSLOG_ERR_IO;

   5653   1 000005  AB80 0000 0000  00                   LAB,B2   FPT_WRSYSLOG_ERR_IO
          1 000008  2C00                                 LDV,R2   0
          1 000009  6C2A                                 LDV,R6   42
          1 00000A  BB87                                 LAB,B3   ,AUTO
          1 00000B  3C10                                 LDV,R3   16
          1 00000C  0008                                 MMM

      196     5654    1    FPT@WRSYSLOG.BUF_ = VECTOR(ADDR(PRM_X)->KH$IO);

   5654   1 00000D  ECC7 0006                            LDB,B6   @PRM_X,AUTO
          1 00000F  EFC7 001F                            STB,B6   FPT@WRSYSLOG+23,AUTO
          1 000011  6C03                                 LDV,R6   3
          1 000012  EF47 001E                            STR,R6   FPT@WRSYSLOG+22,AUTO
          1 000014  ABC7 001E                            LAB,B2   FPT@WRSYSLOG+22,AUTO
          1 000016  2C00                                 LDV,R2   0
          1 000017  6C06                                 LDV,R6   6
          1 000018  BB87                                 LAB,B3   ,AUTO
          1 000019  3C16                                 LDV,R3   22
          1 00001A  0008                                 MMM

      197     5655    1    GOTO Y$CALERRLOG;

   5655   1 00001B  0F81 0043                            B        s:5683,PREL

      198     5656
      199     5657    1   KHD$ERR_IOLD_OTPCCBCTR: ENTRY (PRM_CHN, PRM_X) ALTRET;

   5657   1 00001D  D380 0000 0000  xent KHD$ERR_IOLD_OT*LNJ,B5   X6A_AUTO_2
          1 000020       0022 0002                       DC       34,2
PL6.E3A0      #003=KHD$ERR_IO File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:36   

      200     5658
      201     5659        /*E* ERROR:         KHI-E$ERR_IOLD_OTPCCBCTR-0
      202     5660        *    MESSAGE:       Irrecoverable IONAK on IO (output CCB control) instruction
      203     5661        *    DESCRIPTION:  KHI$IO... received repeatedly IONAKs on an IO (output CCB contro
              5661        l) instruction.
      204     5662        *                   The data in the error log entry is the KH$IOLD
      205     5663        *                   structure passed to KH$IOLD.
      206     5664        */
      207     5665    1    FPT@WRSYSLOG = FPT_WRSYSLOG_ERR_IO;

   5665   1 000022  AB80 0000 0000  00                   LAB,B2   FPT_WRSYSLOG_ERR_IO
          1 000025  2C00                                 LDV,R2   0
          1 000026  6C2A                                 LDV,R6   42
          1 000027  BB87                                 LAB,B3   ,AUTO
          1 000028  3C10                                 LDV,R3   16
          1 000029  0008                                 MMM

      208     5666    1    FPT@WRSYSLOG.BUF_ = VECTOR(ADDR(PRM_X)->KH$IOLD);

   5666   1 00002A  ECC7 0006                            LDB,B6   @PRM_X,AUTO
          1 00002C  EFC7 001F                            STB,B6   FPT@WRSYSLOG+23,AUTO
          1 00002E  6C09                                 LDV,R6   9
          1 00002F  EF47 001E                            STR,R6   FPT@WRSYSLOG+22,AUTO
          1 000031  ABC7 001E                            LAB,B2   FPT@WRSYSLOG+22,AUTO
          1 000033  2C00                                 LDV,R2   0
          1 000034  6C06                                 LDV,R6   6
          1 000035  BB87                                 LAB,B3   ,AUTO
          1 000036  3C16                                 LDV,R3   22
          1 000037  0008                                 MMM

      209     5667    1    FPT@WRSYSLOG.V.ERRCODE.ERR# = %E$ERR_IOLD_OTPCCBCTR;

   5667   1 000038  E870 3148                            LDR,R6   12616,IMO
          1 00003A  EAC7 000F                            SRM,R6,'FFF8'X    FPT@WRSYSLOG+7,AUTO
          1 00003C       FFF8

PL6.E3A0      #003=KHD$ERR_IO File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:37   
      210     5668    1    GOTO Y$CALERRLOG;

   5668   1 00003D  0F81 0021                            B        s:5683,PREL

      211     5669
      212     5670    1   KHD$ERR_IOLD: ENTRY (PRM_CHN, PRM_X) ALTRET;

   5670   1 00003F  D380 0000 0000  xent KHD$ERR_IOLD    LNJ,B5   X6A_AUTO_2
          1 000042       0022 0002                       DC       34,2

      213     5671
      214     5672        /*E* ERROR:         KHI-E$ERR_IOLD-0
      215     5673        *    MESSAGE:       Irrecoverable IONAK on IOLD instruction
      216     5674        *    DESCRIPTION:   KHI$IOLD... received repeatedly IONAKs on an IOLD
      217     5675        *                   or IOLD (ram data transfer).
      218     5676        *                   The data in the error log entry is the KH$IOLD
      219     5677        *                   passed to KH$IOLD_...
      220     5678        */
      221     5679    1    FPT@WRSYSLOG = FPT_WRSYSLOG_ERR_IO;

   5679   1 000044  AB80 0000 0000  00                   LAB,B2   FPT_WRSYSLOG_ERR_IO
          1 000047  2C00                                 LDV,R2   0
          1 000048  6C2A                                 LDV,R6   42
          1 000049  BB87                                 LAB,B3   ,AUTO
          1 00004A  3C10                                 LDV,R3   16
          1 00004B  0008                                 MMM

      222     5680    1    FPT@WRSYSLOG.BUF_ = VECTOR(ADDR(PRM_X)->KH$IOLD);

   5680   1 00004C  ECC7 0006                            LDB,B6   @PRM_X,AUTO
          1 00004E  EFC7 001F                            STB,B6   FPT@WRSYSLOG+23,AUTO
          1 000050  6C09                                 LDV,R6   9
          1 000051  EF47 001E                            STR,R6   FPT@WRSYSLOG+22,AUTO
          1 000053  ABC7 001E                            LAB,B2   FPT@WRSYSLOG+22,AUTO
          1 000055  2C00                                 LDV,R2   0
          1 000056  6C06                                 LDV,R6   6
          1 000057  BB87                                 LAB,B3   ,AUTO
PL6.E3A0      #003=KHD$ERR_IO File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:38   
          1 000058  3C16                                 LDV,R3   22
          1 000059  0008                                 MMM

      223     5681    1    FPT@WRSYSLOG.V.ERRCODE.ERR# = %E$ERR_IOLD;

   5681   1 00005A  E870 3150                            LDR,R6   12624,IMO
          1 00005C  EAC7 000F                            SRM,R6,'FFF8'X    FPT@WRSYSLOG+7,AUTO
          1 00005E       FFF8

      224     5682
      225     5683    1   Y$CALERRLOG: IF PRM_CHN.DED THEN ALTRETURN;

   5683   1 00005F  DCC7 0004            Y$CALERRLOG     LDB,B5   @PRM_CHN,AUTO
          1 000061  82C5 0009                            LB,'0100'X        9,B5
          1 000063       0100
          1 000064  0581 0004                            BBF      s:5684,PREL

   5683   1 000066  C380 0000 0000  xent                 LNJ,B4   X6A_AALT

      226     5684    1    CALL KHD$ERRLOG_SETTERMID_CHN (FPT@WRSYSLOG, PRM_CHN);

   5684   1 000069  DFC7 0020                            STB,B5   FPT@WRSYSLOG+24,AUTO
          1 00006B  CBC7 0008                            LAB,B4   FPT@WRSYSLOG,AUTO
          1 00006D  CFC7 001E                            STB,B4   FPT@WRSYSLOG+22,AUTO
          1 00006F  BBC7 001E                            LAB,B3   FPT@WRSYSLOG+22,AUTO
          1 000071  CBF0 0200                            LAB,B4   512,IMO
          1 000073  E380 0000 0000  xent                 LNJ,B6   KHD$ERRLOG_SETTERMID_CHN
          1 000076       0001                            DC       s:5685,PREL

      227     5685    1    PRM_CHN.DED = '1'B;

   5685   1 000077  ECC7 0004                            LDB,B6   @PRM_CHN,AUTO
          1 000079  8946 0009                            LBT,'0100'X       9,B6
          1 00007B       0100

      228     5686        /*
      229     5687        The following ALTRETURN is really returning us back to the
PL6.E3A0      #003=KHD$ERR_IO File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:39   
      230     5688        PL-6 program that called the assembly language program (KH$IO...).
      231     5689        */
      232     5690    1    ALTRETURN;

   5690   1 00007C  C380 0000 0000  xent                 LNJ,B4   X6A_AALT
      233     5691
      234     5692    1   END KHD$ERR_IO;
      235     5693        %EOD;

PL6.E3A0      #003=KHD$ERR_IO File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:40   
--  Include file information  --

   KH$IO.:E05TOU  is referenced.
   KH$CHN.:E05TOU  is referenced.
   GH_IOFNC_E.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  is referenced.
   GT_LCP6_M.:E05TOU  is referenced.
   KI_CP6.:E05TOU  is referenced.
   GF_LCP6_M.:E05TOU  is referenced.
   GM_LCP6_M.:E05TOU  is referenced.
   GU_LCP6_M.:E05TOU  is referenced.
   GJ_LCP6_M.:E05TOU  is referenced.
   GH_LCP6_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
   KV$GLB.:E05TOU  is referenced.
   KH_ERRORS_C.:E05TOU  is referenced.
      No diagnostics issued in procedure KHD$ERR_IO.
PL6.E3A0      #003=KHD$ERR_IO File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:41   

 **** Variables and constants ****

  ****  Section 000 RoData KHD$ERR_IO

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(336)   r     1 FPT_WRSYSLOG_ERR_IO

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @PRM_CHN                   6-0-0/w PTR         r     1 @PRM_X
     8-0-0/w STRC(336)   r     1 FPT@WRSYSLOG              *0-0-0/w STRC(512)   r     1 PRM_CHN
    *0-0-0/w UBIN(16)    r     1 PRM_X

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(32)    r     1 KH$IO                      0-0-0/w STRC(80)    r     1 KH$IOLD


   Procedure KHD$ERR_IO requires 127 words for executable code.
   Procedure KHD$ERR_IO requires 34 words of local(AUTO) storage.
PL6.E3A0      #003=KHD$ERR_IO File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:42   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=KHD$ERR_IO File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:43   
          MINI XREF LISTING

FPT@WRSYSLOG
      4830**DCL      5653<<ASSIGN   5665<<ASSIGN   5679<<ASSIGN   5684<>CALL
FPT@WRSYSLOG.BUF_
      4832**DCL      5654<<ASSIGN   5666<<ASSIGN   5680<<ASSIGN
FPT@WRSYSLOG.V.ERRCODE.ERR#
      4878**DCL      5667<<ASSIGN   5681<<ASSIGN
FPT@WRSYSLOG.V.TERMID.TERM
      4899**DCL      4908--REDEF
FPT_WRSYSLOG_ERR_IO
      4735**DCL      5653>>ASSIGN   5665>>ASSIGN   5679>>ASSIGN
FPT_WRSYSLOG_ERR_IO.V
      4739**DCL      4737--DCLINIT
FPT_WRSYSLOG_ERR_IO.V.TERMID.TERM
      4804**DCL      4813--REDEF
KH$IO
      5489**DCL      5654--ASSIGN
KH$IO.ASNSTT
      5498**DCL      5499--REDEF    5505--REDEF    5510--REDEF    5514--REDEF    5518--REDEF    5522--REDEF
      5529--REDEF    5535--REDEF    5541--REDEF    5546--REDEF    5553--REDEF    5556--REDEF    5560--REDEF
      5567--REDEF    5571--REDEF    5575--REDEF    5579--REDEF    5584--REDEF    5588--REDEF
KH$IOLD
      5605**DCL      5666--ASSIGN   5680--ASSIGN
KHD$ERRLOG_SETTERMID_CHN
      5645**DCL-ENT  5684--CALL
PRM_CHN
      5120**DCL         6--PROC     5657--ENTRY    5670--ENTRY    5684<>CALL
PRM_CHN.DED
      5180**DCL      5683>>IF       5685<<ASSIGN
PRM_CHN.TERMID.TERM
      5216**DCL      5225--REDEF
PRM_X
      5643**DCL         6--PROC     5654--ASSIGN   5657--ENTRY    5666--ASSIGN   5670--ENTRY    5680--ASSIGN
PL6.E3A0      #003=KHD$ERR_IO File=KHD$DBG.:E05TSI                               WED 07/30/97 00:28 Page:44   
Y$CALERRLOG
      5683**LABEL    5655--GOTO     5668--GOTO

PL6.E3A0      #004=KHD$TRC File=KHD$DBG.:E05TSI                                  WED 07/30/97 00:29 Page:45   
      236        1        /*T***********************************************************/
      237        2        /*T*                                                         */
      238        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      239        4        /*T*                                                         */
      240        5        /*T***********************************************************/
      241        6        KHD$TRC: PROC(PRM_TRC);
      242        7        %INCLUDE KH$TRC;
      243       36        %INCLUDE KH_TRC;
      244       58        %KH_TRC (STCLASS = SYMREF);
      245       73        %KH$TRC (NAME = PRM_TRC, STCLASS = );
      246       95        /*N* TRC needs a little more code */
      247       96    1           RETURN;
      248       97    1   END;

PL6.E3A0      #004=KHD$TRC File=KHD$DBG.:E05TSI                                  WED 07/30/97 00:29 Page:46   
--  Include file information  --

   KH_TRC.:E05TOU  is referenced.
   KH$TRC.:E05TOU  is referenced.
      No diagnostics issued in procedure KHD$TRC.

   Procedure KHD$TRC requires 8 words for executable code.
   Procedure KHD$TRC requires 6 words of local(AUTO) storage.

    No errors detected in file KHD$DBG.:E05TSI    .

PL6.E3A0      #004=KHD$TRC File=KHD$DBG.:E05TSI                                  WED 07/30/97 00:29 Page:47   

 Object Unit name= KHD$TRC                                    File name= KHD$DBG.:E05TOU
 UTS= JUL 30 '97 00:29:13.48 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0   Proc  even  none     8      8  KHD$TRC

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes      Std        1  KHD$TRC

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X6A_AUTO_1
                       nStd      0 X6A_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    G$ROS$
PL6.E3A0      #004=KHD$TRC File=KHD$DBG.:E05TSI                                  WED 07/30/97 00:29 Page:48   


      236        1        /*T***********************************************************/
      237        2        /*T*                                                         */
      238        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      239        4        /*T*                                                         */
      240        5        /*T***********************************************************/
      241        6        KHD$TRC: PROC(PRM_TRC);

      6   0 000000  D380 0000 0000  xent KHD$TRC         LNJ,B5   X6A_AUTO_1
          0 000003       0006 0001                       DC       6,1

      242        7        %INCLUDE KH$TRC;
      243       36        %INCLUDE KH_TRC;
      244       58        %KH_TRC (STCLASS = SYMREF);
      245       73        %KH$TRC (NAME = PRM_TRC, STCLASS = );
      246       95        /*N* TRC needs a little more code */
      247       96    1           RETURN;

     96   0 000005  C380 0000 0000  xent                 LNJ,B4   X6A_ARET
      248       97    1   END;

PL6.E3A0      #004=KHD$TRC File=KHD$DBG.:E05TSI                                  WED 07/30/97 00:29 Page:49   
--  Include file information  --

   KH_TRC.:E05TOU  is referenced.
   KH$TRC.:E05TOU  is referenced.
      No diagnostics issued in procedure KHD$TRC.
PL6.E3A0      #004=KHD$TRC File=KHD$DBG.:E05TSI                                  WED 07/30/97 00:29 Page:50   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @PRM_TRC                  *0-0-0/w STRC(112)   r     1 PRM_TRC


   Procedure KHD$TRC requires 8 words for executable code.
   Procedure KHD$TRC requires 6 words of local(AUTO) storage.

    No errors detected in file KHD$DBG.:E05TSI    .
PL6.E3A0      #004=KHD$TRC File=KHD$DBG.:E05TSI                                  WED 07/30/97 00:29 Page:51   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #004=KHD$TRC File=KHD$DBG.:E05TSI                                  WED 07/30/97 00:29 Page:52   
          MINI XREF LISTING

PRM_TRC
        87**DCL         6--PROC
