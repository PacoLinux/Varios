VERSION E05

PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:1    
        1        1        /*M* TOU$UPDATE     DEckfile Editor Routine UPDATE Function */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7
        8        8        /*X* PLM=3,DCI=6,SQB=N,PRB=N,DTI=5,ENI=0,AND=Y,ECI=0,CSU=3,DIN=3,
        9        9             CTI=8,CRM=109,CRT=1,NLB=N,NTB=Y,MCL=110 */
       10       10
       11       11        /*P*  NAME:        TOU$UPDATE
       12       12              AUTHOR:      Scott S. Sheppard
       13       13              PURPOSE:     DEckfile Editor Routine UPDATE Function
       14       14              DESCRIPTION: This program will provide the  UPDATE function for
       15       15                           the DEckfile Editor Routine (DEER).   This program
       16       16                           will  only  be  implemented  if a new concept, the
       17       17                           update IFAD tape, is  developed and made available
       18       18                           to CP-6, Multics, and GCOS. At present, IFAD tapes
       19       19                           contain all of the modules used to build deckfiles
       20       20                           and not just the modified ones.
       21       21              REFERENCE:   CP-6 Release C0M0
       22       22              LAST UPDATE: 10/27/83
       23       23        */
       24       24
       25       25        /*F*  NAME:        TOU$UPDATE
       26       26              DESCRIPTION: Procedure Nesting Hierarchy
       27       27
       28       28              TOU$UPDATE: procedure
       29       29                U_INIT_DUP: procedure
       30       30                U_COMMAND_SETUP: procedure ALTRET
       31       31        */
       32       32        %EJECT ;
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:2    
       33       33        TOU$UPDATE: PROC ;
       34       34
       35       35        /* Include Files */
       36       36
       37       37           %INCLUDE TOU_DEER_M ;
       38     1448           %INCLUDE TOU_RQSTS_E ;
       39     1523           %INCLUDE TO_PERR_C ;
       40     2108           %INCLUDE XU_MACRO_C ;
       41     5214
       42     5215        /* Macros */
       43     5216
       44     5217           %DUP (STCLASS = SYMREF) ;
       45     5360        /* %BCD_CARD (STCLASS = SYMREF) ;
       46     5361           %BINARY_CARD (STCLASS = SYMREF) ;
       47     5362           %BCD_KEY (STCLASS = SYMREF) ;
       48     5363           %BINARY_B (STCLASS = "BASED (DUP.BINARY_V.PTR$)") ;
       49     5364           %CATALOG_DATA (STCLASS = SYMREF) ;
       50     5365           %CATALOG_ENTRY_KEY (STCLASS = SYMREF) ;
       51     5366           %CATALOG_KEY (STCLASS = SYMREF) ;
       52     5367           %CATALOG_SEARCH_KEY (STCLASS = SYMREF) ;
       53     5368           %LOG_B (STCLASS = "BASED (DUP.LOG_V.PTR$)") ;
       54     5369           %LAST (STCLASS = SYMREF) ;
       55     5370           %MASTER_DATA (STCLASS = SYMREF) ;
       56     5371           %MASTER_ENTRY_KEY (STCLASS = SYMREF) ;
       57     5372           %OBJECT (STCLASS = SYMREF) ;
       58     5373           %OBJECT_KEY (STCLASS = SYMREF) ;
       59     5374           %OBJECT_REFLIST_KEY (STCLASS = SYMREF) ;
       60     5375           %OBJECT_REFLIST_DATA (STCLASS = SYMREF) ;
       61     5376           %OBJECT_SEARCH_KEY (STCLASS = SYMREF) ;
       62     5377           %BCD_B (STCLASS = "BASED (DUP.BCD_V.PTR$)") ;
       63     5378           %RECORD (STCLASS = SYMREF) ;
       64     5379           %SUBCATALOG_DATA (STCLASS = SYMREF) ;
       65     5380           %SUBCATALOG_KEY (STCLASS = SYMREF) ; */
       66     5381           %EJECT ;
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:3    
       67     5382        /* External Entry Points */
       68     5383
       69     5384    1      DCL TOU$DU_SET_IFAD_FID            ENTRY ALTRET ;
       70     5385    1      DCL TOU$DU_OPEN_IFAD               ENTRY ALTRET ;
       71     5386    1      DCL TOU$DU_CLOSE_IFAD              ENTRY ALTRET ;
       72     5387
       73     5388    1      DCL TOU$DU_SET_DF_FID              ENTRY ALTRET ;
       74     5389    1      DCL TOU$DU_OPEN_DF                 ENTRY ALTRET ;
       75     5390    1      DCL TOU$DU_CLOSE_DF                ENTRY ALTRET ;
       76     5391
       77     5392    1      DCL TOU$DU_USER_WRITE              ENTRY ALTRET ;
       78     5393    1      DCL TOU$DU_PRINTER_WRITE           ENTRY ALTRET ;
       79     5394    1      DCL TOU$DU_UPDATE_LOG              ENTRY ALTRET ;
       80     5395
       81     5396    1      DCL TOU$CHECKSUM                   ENTRY (4) ALTRET ;
       82     5397    1      DCL TOU$CHECK_CHECKSUM             ENTRY (4) ALTRET ;
       83     5398
       84     5399    1      DCL TOU$CLEAR_IFAD                 ENTRY ALTRET ;
       85     5400    1      DCL TOU$REPLACE                    ENTRY (2) ;
       86     5401
       87     5402    1      DCL TOU$B_SHOW_DCBS                ENTRY ALTRET ;
       88     5403           %EJECT ;
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:4    
       89     5404        /* External Entry Points */
       90     5405
       91     5406        /* DCL TOU$DFU_DF_RD_MASTER_CONTROL   ENTRY ALTRET ;
       92     5407           DCL TOU$DFU_DF_RD_MASTER_ENTRY     ENTRY ALTRET ;
       93     5408           DCL TOU$DFU_DF_RD_CATALOG_CONTROL  ENTRY ALTRET ;
       94     5409           DCL TOU$DFU_DF_RD_SUBCATALOG       ENTRY ALTRET ;
       95     5410           DCL TOU$DFU_DF_RD_CATALOG_ENTRY    ENTRY ALTRET ;
       96     5411           DCL TOU$DFU_DF_RD_OBJECT           ENTRY ALTRET ;
       97     5412           DCL TOU$DFU_DF_RD_BCD_CARDS        ENTRY ALTRET ;
       98     5413           DCL TOU$DFU_DF_RD_OBJECT_REFLIST   ENTRY ALTRET ;
       99     5414           DCL TOU$DFU_DF_RD_LAST_DECK#       ENTRY ALTRET ;
      100     5415           DCL TOU$DFU_DF_RD_LOG              ENTRY ALTRET ;
      101     5416
      102     5417           DCL TOU$DFU_DF_CHECK_ALREADY_SAVED ENTRY ALTRET ;
      103     5418           DCL TOU$DFU_DF_CHECK_FOR_KEY       ENTRY ALTRET ;
      104     5419
      105     5420           DCL TOU$DFU_DF_WR_MASTER_CONTROL   ENTRY ALTRET ;
      106     5421           DCL TOU$DFU_DF_WR_MASTER_ENTRY     ENTRY ALTRET ;
      107     5422           DCL TOU$DFU_DF_WR_CATALOG_CONTROL  ENTRY ALTRET ;
      108     5423           DCL TOU$DFU_DF_WR_SUBCATALOG       ENTRY ALTRET ;
      109     5424           DCL TOU$DFU_DF_WR_CATALOG_ENTRY    ENTRY ALTRET ;
      110     5425           DCL TOU$DFU_DF_WR_OBJECT           ENTRY ALTRET ;
      111     5426           DCL TOU$DFU_DF_WR_BINARY           ENTRY ALTRET ;
      112     5427           DCL TOU$DFU_DF_WR_BCD_CARDS        ENTRY ALTRET ;
      113     5428           DCL TOU$DFU_DF_WR_OBJECT_REFLIST   ENTRY ALTRET ;
      114     5429           DCL TOU$DFU_DF_WR_LAST_DECK#       ENTRY ALTRET ;
      115     5430           DCL TOU$DFU_DF_WR_LOG              ENTRY ALTRET ; */
      116     5431           %EJECT ;
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:5    
      117     5432        /* External Entry Points */
      118     5433
      119     5434        /* DCL TOU$DFU_OPEN_TEMP              ENTRY ALTRET ;
      120     5435           DCL TOU$DFU_CLOSE_TEMP             ENTRY ALTRET ;
      121     5436
      122     5437           DCL TOU$DFU_TF_RD_MASTER_CONTROL   ENTRY ALTRET ;
      123     5438           DCL TOU$DFU_TF_RD_MASTER_ENTRY     ENTRY ALTRET ;
      124     5439           DCL TOU$DFU_TF_RD_CATALOG_CONTROL  ENTRY ALTRET ;
      125     5440           DCL TOU$DFU_TF_RD_SUBCATALOG       ENTRY ALTRET ;
      126     5441           DCL TOU$DFU_TF_RD_CATALOG_ENTRY    ENTRY ALTRET ;
      127     5442           DCL TOU$DFU_TF_RD_OBJECT           ENTRY ALTRET ;
      128     5443           DCL TOU$DFU_TF_RD_BINARY           ENTRY ALTRET ;
      129     5444           DCL TOU$DFU_TF_RD_BCD_CARDS        ENTRY ALTRET ;
      130     5445           DCL TOU$DFU_TF_RD_LAST_DECK#       ENTRY ALTRET ;
      131     5446
      132     5447           DCL TOU$DFU_TF_WR_MASTER_CONTROL   ENTRY ALTRET ;
      133     5448           DCL TOU$DFU_TF_WR_MASTER_ENTRY     ENTRY ALTRET ;
      134     5449           DCL TOU$DFU_TF_WR_CATALOG_CONTROL  ENTRY ALTRET ;
      135     5450           DCL TOU$DFU_TF_WR_SUBCATALOG       ENTRY ALTRET ;
      136     5451           DCL TOU$DFU_TF_WR_CATALOG_ENTRY    ENTRY ALTRET ;
      137     5452           DCL TOU$DFU_TF_WR_OBJECT           ENTRY ALTRET ;
      138     5453           DCL TOU$DFU_TF_WR_BINARY           ENTRY ALTRET ;
      139     5454           DCL TOU$DFU_TF_WR_BCD_CARDS        ENTRY ALTRET ;
      140     5455           DCL TOU$DFU_TF_WR_LAST_DECK#       ENTRY ALTRET ; */
      141     5456           %EJECT ;
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:6    
      142     5457        /* ********************
      143     5458           ********************
      144     5459           **  Main Program  **
      145     5460           ********************
      146     5461           ******************** */
      147     5462
      148     5463    1      CALL U_INIT_DUP ;
      149     5464    1      CALL U_COMMAND_SETUP ALTRET (ERROR_RETURN) ;
      150     5465    1      CALL TOU$B_SHOW_DCBS ;
      151     5466    1      CALL TOU$DU_OPEN_DF ALTRET (ERROR_RETURN) ;
      152     5467    1      CALL TOU$DU_CLOSE_DF ;
      153     5468
      154     5469        /* NORMAL_RETURN: */
      155     5470    1      DUP.MSG_CODE = %T$U_SUCCESS;
      156     5471    1      CALL TOU$DU_USER_WRITE ;
      157     5472    1      RETURN ;
      158     5473
      159     5474    1   ERROR_RETURN:
      160     5475    1      CALL TOU$DU_CLOSE_DF ;
      161     5476    1      DUP.MSG_CODE = %T$U_FAILURE;
      162     5477    1      CALL TOU$DU_USER_WRITE ;
      163     5478    1      RETURN ;
      164     5479
      165     5480        /* ********************
      166     5481           ********************
      167     5482           **  End Of  Main  **
      168     5483           ********************
      169     5484           ******************** */
      170     5485        %EJECT ;
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:7    
      171     5486        /*I*  NAME:        U_INIT_DUP
      172     5487              AUTHOR:      Scott S. Sheppard
      173     5488              PURPOSE:     Initilization
      174     5489              INTERFACE:   None called.
      175     5490              INPUT:       Set of system equates.
      176     5491              OUTPUT:      DUP - Deckfile Utility Parameter
      177     5492              DESCRIPTION: This procedure initializes variables to
      178     5493                           appropriate starting values.
      179     5494        */
      180     5495
      181     5496    1   U_INIT_DUP: PROC ;
      182     5497
      183     5498        /* Code */
      184     5499
      185     5500    2      DUP.HDR_CODE = %H$UPDATE ;
      186     5501    2      DUP.LINE_VFC = %SKIP_WRITE ;
      187     5502    2      DUP.FORCE_NEW_PAGE = %TRUE ;
      188     5503    2      DUP.IFAD.ME_ALLOWED = %FALSE ;
      189     5504    2      DUP.IFAD.ENTERED = %FALSE ;
      190     5505    2      DUP.DF.ENTERED = %FALSE ;
      191     5506    2      DUP.DF.OPEN_TYPE = %UPDATE_FILE ;
      192     5507    2      DUP.DF.REPORT_ERROR = %TRUE ;
      193     5508    2      DUP.DF.CLOSE_TYPE = %SAVE_FILE ;
      194     5509    2      RETURN ;
      195     5510
      196     5511    2   END U_INIT_DUP ;
      197     5512        %EJECT ;
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:8    
      198     5513        /*I*  NAME:        U_COMMAND_SETUP
      199     5514              AUTHOR:      Scott S. Sheppard
      200     5515              PURPOSE:     Sets up UPDATE Command
      201     5516              INTERFACE:   TOU$DU_SET_IFAD_FID
      202     5517                           TOU$DU_SET_DF_FID
      203     5518              INPUT:       DUP.CMD$ - pointer to the parse control block
      204     5519              OUTPUT:      DUP.DF.HOLD_AREA
      205     5520                           DUP.DF.HOLD_AREA_LGTH
      206     5521              DESCRIPTION: This procedure sets up the UPDATE command from the
      207     5522                           information entered by the user.    DUP.CMD$ is a
      208     5523                           pointer to a   parse control block  that contains
      209     5524                           the tokens entered by the user.
      210     5525                           COMMAND FORMS:
      211     5526              Case 1: U
      212     5527              Case 2: U <ifad fid>
      213     5528              Case 3: U INTO <deckfile fid>
      214     5529              Case 4: U <ifad fid> INTO <deckfile fid>
      215     5530        */
      216     5531
      217     5532    1   U_COMMAND_SETUP: PROC ALTRET ;
      218     5533
      219     5534    2      DCL OUTBLK#                    UBIN WORD ALIGNED ;
      220     5535    2      DCL OUTBLK$                    PTR ALIGNED ;
      221     5536           %PARSE$OUT (STCLASS = BASED) ;
      222     5581           %PARSE$SYM (STCLASS = BASED) ;
      223     5619           %EJECT ;
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:9    
      224     5620        /* Code */
      225     5621
      226     5622    3      DO OUTBLK# = 0 TO DUP.CMD$ -> OUT$BLK.NSUBLKS - 1 ;
      227     5623    3         OUTBLK$ = DUP.CMD$ -> OUT$BLK.SUBLK$(OUTBLK#) ;
      228     5624    4         DO CASE (OUTBLK$ -> OUT$BLK.CODE) ;
      229     5625    4            CASE (%IFAD_FID) ;
      230     5626    4               DUP.IFAD.ENTERED = %TRUE ;
      231     5627    4               DUP.HOLD_AREA = OUTBLK$ -> OUT$SYM.TEXT ;
      232     5628    4               DUP.HOLD_AREA_LGTH = OUTBLK$ -> OUT$SYM.COUNT ;
      233     5629    4               CALL TOU$DU_SET_IFAD_FID ALTRET (ERROR) ;
      234     5630    4            CASE (%DECKFILE_FID) ;
      235     5631    4               DUP.DF.ENTERED = %TRUE ;
      236     5632    4               DUP.HOLD_AREA = OUTBLK$ -> OUT$SYM.TEXT ;
      237     5633    4               DUP.HOLD_AREA_LGTH = OUTBLK$ -> OUT$SYM.COUNT ;
      238     5634    4               CALL TOU$DU_SET_DF_FID ALTRET (ERROR) ;
      239     5635    4         END /* CASE */ ;
      240     5636    3      END /* DO */ ;
      241     5637
      242     5638    2      IF DUP.IFAD.ENTERED
      243     5639    2      THEN /* FID set from DEER command */ ;
      244     5640    2      ELSE CALL TOU$DU_SET_IFAD_FID ALTRET (ERROR) ;
      245     5641    2      IF DUP.DF.ENTERED
      246     5642    2      THEN /* FID set from DEER command */ ;
      247     5643    2      ELSE CALL TOU$DU_SET_DF_FID ALTRET (ERROR) ;
      248     5644    2      RETURN ;
      249     5645
      250     5646    2   ERROR:
      251     5647    2      ALTRETURN ;
      252     5648
      253     5649    2   END U_COMMAND_SETUP ;
      254     5650    1   END TOU$UPDATE ;

PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:10   
--  Include file information  --

   XU_MACRO_C.:E05TOU  is referenced.
   TO_PERR_C.:E05TOU  is referenced.
   TOU_RQSTS_E.:E05TOU  is referenced.
   TOU_DEER_M.:E05TOU  is referenced.
      No diagnostics issued in procedure TOU$UPDATE.

   Procedure TOU$UPDATE requires 119 words for executable code.
   Procedure TOU$UPDATE requires 8 words of local(AUTO) storage.

    No errors detected in file TOU$UPDATE.:E05TSI    .

PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:11   

 Object Unit name= TOU$UPDATE                                 File name= TOU$UPDATE.:E05TOU
 UTS= JUL 30 '97 06:52:05.04 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none   119    167  TOU$UPDATE
    1  RoData even  none     1      1  TOU$UPDATE

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes      Std        0  TOU$UPDATE

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       0 TOU$B_SHOW_DCBS
 yes     yes           Std       0 TOU$DU_CLOSE_DF
 yes     yes           Std       0 TOU$DU_OPEN_DF
 yes     yes           Std       0 TOU$DU_USER_WRITE
 yes     yes           Std       0 TOU$DU_SET_IFAD_FID
 yes     yes           Std       0 TOU$DU_SET_DF_FID
                       nStd      0 X66_AUTO_0
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:12   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     DUP                                   B_VECTNIL
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:13   


        1        1        /*M* TOU$UPDATE     DEckfile Editor Routine UPDATE Function */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7
        8        8        /*X* PLM=3,DCI=6,SQB=N,PRB=N,DTI=5,ENI=0,AND=Y,ECI=0,CSU=3,DIN=3,
        9        9             CTI=8,CRM=109,CRT=1,NLB=N,NTB=Y,MCL=110 */
       10       10
       11       11        /*P*  NAME:        TOU$UPDATE
       12       12              AUTHOR:      Scott S. Sheppard
       13       13              PURPOSE:     DEckfile Editor Routine UPDATE Function
       14       14              DESCRIPTION: This program will provide the  UPDATE function for
       15       15                           the DEckfile Editor Routine (DEER).   This program
       16       16                           will  only  be  implemented  if a new concept, the
       17       17                           update IFAD tape, is  developed and made available
       18       18                           to CP-6, Multics, and GCOS. At present, IFAD tapes
       19       19                           contain all of the modules used to build deckfiles
       20       20                           and not just the modified ones.
       21       21              REFERENCE:   CP-6 Release C0M0
       22       22              LAST UPDATE: 10/27/83
       23       23        */
       24       24
       25       25        /*F*  NAME:        TOU$UPDATE
       26       26              DESCRIPTION: Procedure Nesting Hierarchy
       27       27
       28       28              TOU$UPDATE: procedure
       29       29                U_INIT_DUP: procedure
       30       30                U_COMMAND_SETUP: procedure ALTRET
       31       31        */
       32       32        %EJECT ;
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:14   
       33       33        TOU$UPDATE: PROC ;

     33  0 000000   000000 700200 xent  TOU$UPDATE   TSX0  ! X66_AUTO_0
         0 000001   000010 000000                    ZERO    8,0

       34       34
       35       35        /* Include Files */
       36       36
       37       37           %INCLUDE TOU_DEER_M ;
       38     1448           %INCLUDE TOU_RQSTS_E ;
       39     1523           %INCLUDE TO_PERR_C ;
       40     2108           %INCLUDE XU_MACRO_C ;
       41     5214
       42     5215        /* Macros */
       43     5216
       44     5217           %DUP (STCLASS = SYMREF) ;
       45     5360        /* %BCD_CARD (STCLASS = SYMREF) ;
       46     5361           %BINARY_CARD (STCLASS = SYMREF) ;
       47     5362           %BCD_KEY (STCLASS = SYMREF) ;
       48     5363           %BINARY_B (STCLASS = "BASED (DUP.BINARY_V.PTR$)") ;
       49     5364           %CATALOG_DATA (STCLASS = SYMREF) ;
       50     5365           %CATALOG_ENTRY_KEY (STCLASS = SYMREF) ;
       51     5366           %CATALOG_KEY (STCLASS = SYMREF) ;
       52     5367           %CATALOG_SEARCH_KEY (STCLASS = SYMREF) ;
       53     5368           %LOG_B (STCLASS = "BASED (DUP.LOG_V.PTR$)") ;
       54     5369           %LAST (STCLASS = SYMREF) ;
       55     5370           %MASTER_DATA (STCLASS = SYMREF) ;
       56     5371           %MASTER_ENTRY_KEY (STCLASS = SYMREF) ;
       57     5372           %OBJECT (STCLASS = SYMREF) ;
       58     5373           %OBJECT_KEY (STCLASS = SYMREF) ;
       59     5374           %OBJECT_REFLIST_KEY (STCLASS = SYMREF) ;
       60     5375           %OBJECT_REFLIST_DATA (STCLASS = SYMREF) ;
       61     5376           %OBJECT_SEARCH_KEY (STCLASS = SYMREF) ;
       62     5377           %BCD_B (STCLASS = "BASED (DUP.BCD_V.PTR$)") ;
       63     5378           %RECORD (STCLASS = SYMREF) ;
       64     5379           %SUBCATALOG_DATA (STCLASS = SYMREF) ;
       65     5380           %SUBCATALOG_KEY (STCLASS = SYMREF) ; */
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:15   
       66     5381           %EJECT ;
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:16   
       67     5382        /* External Entry Points */
       68     5383
       69     5384    1      DCL TOU$DU_SET_IFAD_FID            ENTRY ALTRET ;
       70     5385    1      DCL TOU$DU_OPEN_IFAD               ENTRY ALTRET ;
       71     5386    1      DCL TOU$DU_CLOSE_IFAD              ENTRY ALTRET ;
       72     5387
       73     5388    1      DCL TOU$DU_SET_DF_FID              ENTRY ALTRET ;
       74     5389    1      DCL TOU$DU_OPEN_DF                 ENTRY ALTRET ;
       75     5390    1      DCL TOU$DU_CLOSE_DF                ENTRY ALTRET ;
       76     5391
       77     5392    1      DCL TOU$DU_USER_WRITE              ENTRY ALTRET ;
       78     5393    1      DCL TOU$DU_PRINTER_WRITE           ENTRY ALTRET ;
       79     5394    1      DCL TOU$DU_UPDATE_LOG              ENTRY ALTRET ;
       80     5395
       81     5396    1      DCL TOU$CHECKSUM                   ENTRY (4) ALTRET ;
       82     5397    1      DCL TOU$CHECK_CHECKSUM             ENTRY (4) ALTRET ;
       83     5398
       84     5399    1      DCL TOU$CLEAR_IFAD                 ENTRY ALTRET ;
       85     5400    1      DCL TOU$REPLACE                    ENTRY (2) ;
       86     5401
       87     5402    1      DCL TOU$B_SHOW_DCBS                ENTRY ALTRET ;
       88     5403           %EJECT ;
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:17   
       89     5404        /* External Entry Points */
       90     5405
       91     5406        /* DCL TOU$DFU_DF_RD_MASTER_CONTROL   ENTRY ALTRET ;
       92     5407           DCL TOU$DFU_DF_RD_MASTER_ENTRY     ENTRY ALTRET ;
       93     5408           DCL TOU$DFU_DF_RD_CATALOG_CONTROL  ENTRY ALTRET ;
       94     5409           DCL TOU$DFU_DF_RD_SUBCATALOG       ENTRY ALTRET ;
       95     5410           DCL TOU$DFU_DF_RD_CATALOG_ENTRY    ENTRY ALTRET ;
       96     5411           DCL TOU$DFU_DF_RD_OBJECT           ENTRY ALTRET ;
       97     5412           DCL TOU$DFU_DF_RD_BCD_CARDS        ENTRY ALTRET ;
       98     5413           DCL TOU$DFU_DF_RD_OBJECT_REFLIST   ENTRY ALTRET ;
       99     5414           DCL TOU$DFU_DF_RD_LAST_DECK#       ENTRY ALTRET ;
      100     5415           DCL TOU$DFU_DF_RD_LOG              ENTRY ALTRET ;
      101     5416
      102     5417           DCL TOU$DFU_DF_CHECK_ALREADY_SAVED ENTRY ALTRET ;
      103     5418           DCL TOU$DFU_DF_CHECK_FOR_KEY       ENTRY ALTRET ;
      104     5419
      105     5420           DCL TOU$DFU_DF_WR_MASTER_CONTROL   ENTRY ALTRET ;
      106     5421           DCL TOU$DFU_DF_WR_MASTER_ENTRY     ENTRY ALTRET ;
      107     5422           DCL TOU$DFU_DF_WR_CATALOG_CONTROL  ENTRY ALTRET ;
      108     5423           DCL TOU$DFU_DF_WR_SUBCATALOG       ENTRY ALTRET ;
      109     5424           DCL TOU$DFU_DF_WR_CATALOG_ENTRY    ENTRY ALTRET ;
      110     5425           DCL TOU$DFU_DF_WR_OBJECT           ENTRY ALTRET ;
      111     5426           DCL TOU$DFU_DF_WR_BINARY           ENTRY ALTRET ;
      112     5427           DCL TOU$DFU_DF_WR_BCD_CARDS        ENTRY ALTRET ;
      113     5428           DCL TOU$DFU_DF_WR_OBJECT_REFLIST   ENTRY ALTRET ;
      114     5429           DCL TOU$DFU_DF_WR_LAST_DECK#       ENTRY ALTRET ;
      115     5430           DCL TOU$DFU_DF_WR_LOG              ENTRY ALTRET ; */
      116     5431           %EJECT ;
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:18   
      117     5432        /* External Entry Points */
      118     5433
      119     5434        /* DCL TOU$DFU_OPEN_TEMP              ENTRY ALTRET ;
      120     5435           DCL TOU$DFU_CLOSE_TEMP             ENTRY ALTRET ;
      121     5436
      122     5437           DCL TOU$DFU_TF_RD_MASTER_CONTROL   ENTRY ALTRET ;
      123     5438           DCL TOU$DFU_TF_RD_MASTER_ENTRY     ENTRY ALTRET ;
      124     5439           DCL TOU$DFU_TF_RD_CATALOG_CONTROL  ENTRY ALTRET ;
      125     5440           DCL TOU$DFU_TF_RD_SUBCATALOG       ENTRY ALTRET ;
      126     5441           DCL TOU$DFU_TF_RD_CATALOG_ENTRY    ENTRY ALTRET ;
      127     5442           DCL TOU$DFU_TF_RD_OBJECT           ENTRY ALTRET ;
      128     5443           DCL TOU$DFU_TF_RD_BINARY           ENTRY ALTRET ;
      129     5444           DCL TOU$DFU_TF_RD_BCD_CARDS        ENTRY ALTRET ;
      130     5445           DCL TOU$DFU_TF_RD_LAST_DECK#       ENTRY ALTRET ;
      131     5446
      132     5447           DCL TOU$DFU_TF_WR_MASTER_CONTROL   ENTRY ALTRET ;
      133     5448           DCL TOU$DFU_TF_WR_MASTER_ENTRY     ENTRY ALTRET ;
      134     5449           DCL TOU$DFU_TF_WR_CATALOG_CONTROL  ENTRY ALTRET ;
      135     5450           DCL TOU$DFU_TF_WR_SUBCATALOG       ENTRY ALTRET ;
      136     5451           DCL TOU$DFU_TF_WR_CATALOG_ENTRY    ENTRY ALTRET ;
      137     5452           DCL TOU$DFU_TF_WR_OBJECT           ENTRY ALTRET ;
      138     5453           DCL TOU$DFU_TF_WR_BINARY           ENTRY ALTRET ;
      139     5454           DCL TOU$DFU_TF_WR_BCD_CARDS        ENTRY ALTRET ;
      140     5455           DCL TOU$DFU_TF_WR_LAST_DECK#       ENTRY ALTRET ; */
      141     5456           %EJECT ;
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:19   
      142     5457        /* ********************
      143     5458           ********************
      144     5459           **  Main Program  **
      145     5460           ********************
      146     5461           ******************** */
      147     5462
      148     5463    1      CALL U_INIT_DUP ;

   5463  0 000002   000036 701000 0                  TSX1    U_INIT_DUP
         0 000003   000000 011000                    NOP     0

      149     5464    1      CALL U_COMMAND_SETUP ALTRET (ERROR_RETURN) ;

   5464  0 000004   000061 701000 0                  TSX1    U_COMMAND_SETUP
         0 000005   000025 702000 0                  TSX2    ERROR_RETURN

      150     5465    1      CALL TOU$B_SHOW_DCBS ;

   5465  0 000006   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000007   000000 701000 xent               TSX1    TOU$B_SHOW_DCBS
         0 000010   000000 011000                    NOP     0

      151     5466    1      CALL TOU$DU_OPEN_DF ALTRET (ERROR_RETURN) ;

   5466  0 000011   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000012   000000 701000 xent               TSX1    TOU$DU_OPEN_DF
         0 000013   000025 702000 0                  TSX2    ERROR_RETURN

      152     5467    1      CALL TOU$DU_CLOSE_DF ;

   5467  0 000014   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000015   000000 701000 xent               TSX1    TOU$DU_CLOSE_DF
         0 000016   000000 011000                    NOP     0

      153     5468
      154     5469        /* NORMAL_RETURN: */
      155     5470    1      DUP.MSG_CODE = %T$U_SUCCESS;
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:20   

   5470  0 000017   000252 235007                    LDA     170,DL
         0 000020   000020 755000 xsym               STA     DUP+16

      156     5471    1      CALL TOU$DU_USER_WRITE ;

   5471  0 000021   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000022   000000 701000 xent               TSX1    TOU$DU_USER_WRITE
         0 000023   000000 011000                    NOP     0

      157     5472    1      RETURN ;

   5472  0 000024   000000 702200 xent               TSX2  ! X66_ARET

      158     5473
      159     5474    1   ERROR_RETURN:
      160     5475    1      CALL TOU$DU_CLOSE_DF ;

   5475  0 000025   000002 631400 xsym  ERROR_RETURN EPPR1   B_VECTNIL+2
         0 000026   000000 701000 xent               TSX1    TOU$DU_CLOSE_DF
         0 000027   000000 011000                    NOP     0

      161     5476    1      DUP.MSG_CODE = %T$U_FAILURE;

   5476  0 000030   000253 235007                    LDA     171,DL
         0 000031   000020 755000 xsym               STA     DUP+16

      162     5477    1      CALL TOU$DU_USER_WRITE ;

   5477  0 000032   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000033   000000 701000 xent               TSX1    TOU$DU_USER_WRITE
         0 000034   000000 011000                    NOP     0

      163     5478    1      RETURN ;

   5478  0 000035   000000 702200 xent               TSX2  ! X66_ARET

PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:21   
      164     5479
      165     5480        /* ********************
      166     5481           ********************
      167     5482           **  End Of  Main  **
      168     5483           ********************
      169     5484           ******************** */
      170     5485        %EJECT ;
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:22   
      171     5486        /*I*  NAME:        U_INIT_DUP
      172     5487              AUTHOR:      Scott S. Sheppard
      173     5488              PURPOSE:     Initilization
      174     5489              INTERFACE:   None called.
      175     5490              INPUT:       Set of system equates.
      176     5491              OUTPUT:      DUP - Deckfile Utility Parameter
      177     5492              DESCRIPTION: This procedure initializes variables to
      178     5493                           appropriate starting values.
      179     5494        */
      180     5495
      181     5496    1   U_INIT_DUP: PROC ;

   5496  0 000036   200004 741300       U_INIT_DUP   STX1  ! 4,,AUTO

      182     5497
      183     5498        /* Code */
      184     5499
      185     5500    2      DUP.HDR_CODE = %H$UPDATE ;

   5500  0 000037   001476 235007                    LDA     830,DL
         0 000040   000021 755000 xsym               STA     DUP+17

      186     5501    2      DUP.LINE_VFC = %SKIP_WRITE ;

   5501  0 000041   142000 236003                    LDQ     50176,DU
         0 000042   000026 756000 xsym               STQ     DUP+22

      187     5502    2      DUP.FORCE_NEW_PAGE = %TRUE ;

   5502  0 000043   400000 236003                    LDQ     -131072,DU
         0 000044   000056 756000 xsym               STQ     DUP+46

      188     5503    2      DUP.IFAD.ME_ALLOWED = %FALSE ;

   5503  0 000045   000031 236000 xsym               LDQ     B_VECTNIL+25
         0 000046   000057 356000 xsym               ANSQ    DUP+47

PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:23   
      189     5504    2      DUP.IFAD.ENTERED = %FALSE ;

   5504  0 000047   000000 236000 1                  LDQ     0
         0 000050   000057 356000 xsym               ANSQ    DUP+47

      190     5505    2      DUP.DF.ENTERED = %FALSE ;

   5505  0 000051   000031 236000 xsym               LDQ     B_VECTNIL+25
         0 000052   000104 356000 xsym               ANSQ    DUP+68

      191     5506    2      DUP.DF.OPEN_TYPE = %UPDATE_FILE ;

   5506  0 000053   000001 235007                    LDA     1,DL
         0 000054   000105 755000 xsym               STA     DUP+69

      192     5507    2      DUP.DF.REPORT_ERROR = %TRUE ;

   5507  0 000055   400000 236007                    LDQ     -131072,DL
         0 000056   000104 256000 xsym               ORSQ    DUP+68

      193     5508    2      DUP.DF.CLOSE_TYPE = %SAVE_FILE ;

   5508  0 000057   000106 450000 xsym               STZ     DUP+70

      194     5509    2      RETURN ;

   5509  0 000060   000001 702211                    TSX2  ! 1,X1

      195     5510
      196     5511    2   END U_INIT_DUP ;
      197     5512        %EJECT ;
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:24   
      198     5513        /*I*  NAME:        U_COMMAND_SETUP
      199     5514              AUTHOR:      Scott S. Sheppard
      200     5515              PURPOSE:     Sets up UPDATE Command
      201     5516              INTERFACE:   TOU$DU_SET_IFAD_FID
      202     5517                           TOU$DU_SET_DF_FID
      203     5518              INPUT:       DUP.CMD$ - pointer to the parse control block
      204     5519              OUTPUT:      DUP.DF.HOLD_AREA
      205     5520                           DUP.DF.HOLD_AREA_LGTH
      206     5521              DESCRIPTION: This procedure sets up the UPDATE command from the
      207     5522                           information entered by the user.    DUP.CMD$ is a
      208     5523                           pointer to a   parse control block  that contains
      209     5524                           the tokens entered by the user.
      210     5525                           COMMAND FORMS:
      211     5526              Case 1: U
      212     5527              Case 2: U <ifad fid>
      213     5528              Case 3: U INTO <deckfile fid>
      214     5529              Case 4: U <ifad fid> INTO <deckfile fid>
      215     5530        */
      216     5531
      217     5532    1   U_COMMAND_SETUP: PROC ALTRET ;

   5532  0 000061   200004 741300       U_COMMAND_S* STX1  ! 4,,AUTO

      218     5533
      219     5534    2      DCL OUTBLK#                    UBIN WORD ALIGNED ;
      220     5535    2      DCL OUTBLK$                    PTR ALIGNED ;
      221     5536           %PARSE$OUT (STCLASS = BASED) ;
      222     5581           %PARSE$SYM (STCLASS = BASED) ;
      223     5619           %EJECT ;
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:25   
      224     5620        /* Code */
      225     5621
      226     5622    3      DO OUTBLK# = 0 TO DUP.CMD$ -> OUT$BLK.NSUBLKS - 1 ;

   5622  0 000062   200005 450100                    STZ     OUTBLK#,,AUTO
         0 000063   000142 710000 0                  TRA     s:5636+3

      227     5623    3         OUTBLK$ = DUP.CMD$ -> OUT$BLK.SUBLK$(OUTBLK#) ;

   5623  0 000064   000017 470400 xsym               LDP0    DUP+15
         0 000065   200005 720100                    LXL0    OUTBLK#,,AUTO
         0 000066   000003 236110                    LDQ     3,X0,PR0
         0 000067   200006 756100                    STQ     OUTBLK$,,AUTO

      228     5624    4         DO CASE (OUTBLK$ -> OUT$BLK.CODE) ;

   5624  0 000070   200006 471500                    LDP1    OUTBLK$,,AUTO
         0 000071   100000 721100                    LXL1    0,,PR1
         0 000072   000005 101003                    CMPX1   5,DU
         0 000073   000075 602011 0                  TNC     s:5624+5,X1
         0 000074   000137 710000 0                  TRA     s:5636
         0 000075   000137 710000 0                  TRA     s:5636
         0 000076   000102 710000 0                  TRA     s:5626
         0 000077   000137 710000 0                  TRA     s:5636
         0 000100   000137 710000 0                  TRA     s:5636
         0 000101   000121 710000 0                  TRA     s:5631

      229     5625    4            CASE (%IFAD_FID) ;

      230     5626    4               DUP.IFAD.ENTERED = %TRUE ;

   5626  0 000102   000400 236003                    LDQ     256,DU
         0 000103   000057 256000 xsym               ORSQ    DUP+47

      231     5627    4               DUP.HOLD_AREA = OUTBLK$ -> OUT$SYM.TEXT ;

   5627  0 000104   100004 236100                    LDQ     4,,PR1
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:26   
         0 000105   000033 772000                    QRL     27
         0 000106   000000 621006                    EAX1    0,QL
         0 000107   040000 100540                    MLR     fill='040'O
         0 000110   100004 200011                    ADSC9   4,,PR1                   cn=1,n=*X1
         0 000111   000142 000050 xsym               ADSC9   DUP+98                   cn=0,n=40

      232     5628    4               DUP.HOLD_AREA_LGTH = OUTBLK$ -> OUT$SYM.COUNT ;

   5628  0 000112   100004 236100                    LDQ     4,,PR1
         0 000113   000033 772000                    QRL     27
         0 000114   000154 756000 xsym               STQ     DUP+108

      233     5629    4               CALL TOU$DU_SET_IFAD_FID ALTRET (ERROR) ;

   5629  0 000115   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000116   000000 701000 xent               TSX1    TOU$DU_SET_IFAD_FID
         0 000117   000165 702000 0                  TSX2    ERROR
         0 000120   000137 710000 0                  TRA     s:5636

      234     5630    4            CASE (%DECKFILE_FID) ;

      235     5631    4               DUP.DF.ENTERED = %TRUE ;

   5631  0 000121   400000 236003                    LDQ     -131072,DU
         0 000122   000104 256000 xsym               ORSQ    DUP+68

      236     5632    4               DUP.HOLD_AREA = OUTBLK$ -> OUT$SYM.TEXT ;

   5632  0 000123   100004 236100                    LDQ     4,,PR1
         0 000124   000033 772000                    QRL     27
         0 000125   000000 621006                    EAX1    0,QL
         0 000126   040000 100540                    MLR     fill='040'O
         0 000127   100004 200011                    ADSC9   4,,PR1                   cn=1,n=*X1
         0 000130   000142 000050 xsym               ADSC9   DUP+98                   cn=0,n=40

      237     5633    4               DUP.HOLD_AREA_LGTH = OUTBLK$ -> OUT$SYM.COUNT ;

PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:27   
   5633  0 000131   100004 236100                    LDQ     4,,PR1
         0 000132   000033 772000                    QRL     27
         0 000133   000154 756000 xsym               STQ     DUP+108

      238     5634    4               CALL TOU$DU_SET_DF_FID ALTRET (ERROR) ;

   5634  0 000134   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000135   000000 701000 xent               TSX1    TOU$DU_SET_DF_FID
         0 000136   000165 702000 0                  TSX2    ERROR

      239     5635    4         END /* CASE */ ;

      240     5636    3      END /* DO */ ;

   5636  0 000137   200005 235100                    LDA     OUTBLK#,,AUTO
         0 000140   000001 035007                    ADLA    1,DL
         0 000141   200005 755100                    STA     OUTBLK#,,AUTO
         0 000142   000017 470400 xsym               LDP0    DUP+15
         0 000143   000001 236100                    LDQ     1,,PR0
         0 000144   000022 772000                    QRL     18
         0 000145   200005 116100                    CMPQ    OUTBLK#,,AUTO
         0 000146   000150 600000 0                  TZE     s:5638
         0 000147   000064 603000 0                  TRC     s:5623

      241     5637
      242     5638    2      IF DUP.IFAD.ENTERED

   5638  0 000150   000057 236000 xsym               LDQ     DUP+47
         0 000151   000400 316003                    CANQ    256,DU
         0 000152   000156 601000 0                  TNZ     s:5641

      243     5639    2      THEN /* FID set from DEER command */ ;
      244     5640    2      ELSE CALL TOU$DU_SET_IFAD_FID ALTRET (ERROR) ;

   5640  0 000153   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000154   000000 701000 xent               TSX1    TOU$DU_SET_IFAD_FID
         0 000155   000165 702000 0                  TSX2    ERROR
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:28   

      245     5641    2      IF DUP.DF.ENTERED

   5641  0 000156   000104 234000 xsym               SZN     DUP+68
         0 000157   000163 604000 0                  TMI     s:5644

      246     5642    2      THEN /* FID set from DEER command */ ;
      247     5643    2      ELSE CALL TOU$DU_SET_DF_FID ALTRET (ERROR) ;

   5643  0 000160   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000161   000000 701000 xent               TSX1    TOU$DU_SET_DF_FID
         0 000162   000165 702000 0                  TSX2    ERROR

      248     5644    2      RETURN ;

   5644  0 000163   200004 221300                    LDX1  ! 4,,AUTO
         0 000164   000001 702211                    TSX2  ! 1,X1

      249     5645
      250     5646    2   ERROR:
      251     5647    2      ALTRETURN ;

   5647  0 000165   200004 221300       ERROR        LDX1  ! 4,,AUTO
         0 000166   000000 702211                    TSX2  ! 0,X1

(unnamed)
 Sect OctLoc
   1     000   777377 777777                                                    ....
      252     5648
      253     5649    2   END U_COMMAND_SETUP ;
      254     5650    1   END TOU$UPDATE ;

PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:29   
--  Include file information  --

   XU_MACRO_C.:E05TOU  is referenced.
   TO_PERR_C.:E05TOU  is referenced.
   TOU_RQSTS_E.:E05TOU  is referenced.
   TOU_DEER_M.:E05TOU  is referenced.
      No diagnostics issued in procedure TOU$UPDATE.
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:30   

 **** Procedure blocks ****

LB#    Line#s    #stmts #vars Sect# OctLoc  P A C   NP Lvl/name
  0    33-  5650     46    16     0      0  y   y    0   1 TOU$UPDATE
  1  5496-  5511     11     0     0     36  y   y    0     2 U_INIT_DUP
  2  5532-  5649     22     9     0     61  y y y    0     2 U_COMMAND_SETUP
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:31   

    **** Executable statements  ****

  Exec cost Stmt Sec OctLoc Type   LB Label              Exec cost Stmt Sec OctLoc Type   LB Label

              33   0      0 Proc    0                              5463   0      2 Call    0
            5464   0      4 Call    0                              5465   0      6 Call    0
            5466   0     11 Call    0                              5467   0     14 Call    0
            5470   0     17 Assign  0                              5471   0     21 Call    0
            5472   0     24 Return  0                              5475   0     25 Call    0 ERROR_RETURN
            5476   0     30 Assign  0                              5477   0     32 Call    0
            5478   0     35 Return  0                              5496   0     36 Proc    1
            5500   0     37 Assign  1                              5501   0     41 Assign  1
            5502   0     43 Assign  1                              5503   0     45 Assign  1
            5504   0     47 Assign  1                              5505   0     51 Assign  1
            5506   0     53 Assign  1                              5507   0     55 Assign  1
            5508   0     57 Assign  1                              5509   0     60 Return  1
            5532   0     61 Proc    2                              5622   0     62 DoIndx  2
         $  5623   0     64 Assign  2                         $$$  5624   0     70 DoCase  2
            5625   0    102 Case    2                              5626   0    102 Assign  2
         $  5627   0    104 Assign  2                              5628   0    112 Assign  2
            5629   0    115 Call    2                              5630   0    121 Case    2
            5631   0    121 Assign  2                           $  5632   0    123 Assign  2
            5633   0    131 Assign  2                              5634   0    134 Call    2
            5635   0    137 EndCse  2                          $$  5636   0    137 EndInd  2
            5638   0    150 If      2                              5640   0    153 Call    2
            5641   0    156 If      2                              5643   0    160 Call    2
            5644   0    163 Return  2                              5647   0    165 Altret  2 ERROR


  **** Statement type totals  ****

    18 Assign    12 Call       2 If         2 Case       4 Return     1 Altret
     1 DoIndx     1 DoCase     1 EndInd     1 EndCse     3 Proc       2 Labels


 # major stmts=   39 Code/major= 3.05 # stmts=   46 Code/stmt= 2.58  Point total= 98.0
 Cost/major stmt=  2.4 Cost/stmt=  2.0 Total cost=     95.8
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:32   

   0-4  $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
   4-6  $$$$$$
   6-8  $$
  8-10  $$
 10-12
 12-14
 14-16
 16-18
 18-20
 20-22
 22-??
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:33   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     5-0-0/w UBIN        r     1 OUTBLK#                    6-0-0/w PTR         r     1 OUTBLK$

  ****  SYMREF variables  ****

  ****  Structures  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(5220)  r     1 DUP
    17-0-0/w PTR         r         2 CMD$
    20-0-0/w UBIN        r         2 MSG_CODE
    21-0-0/w UBIN        r         2 HDR_CODE
    26-0-0/c CHAR        r         2 LINE_VFC
    56-0-0/c BIT         r         2 FORCE_NEW_PAGE
    57-0-0/w STRC(576)   r         2 IFAD
    57-0-0/c BIT         r          3 ME_ALLOWED
    57-1-0/c BIT         r          3 ENTERED
   104-0-0/w STRC(504)   r         2 DF
   104-0-0/c BIT         r          3 ENTERED
   104-2-0/c BIT         r          3 REPORT_ERROR
   105-0-0/w UBIN        r          3 OPEN_TYPE
   106-0-0/w UBIN        r          3 CLOSE_TYPE
   142-0-0/c CHAR(40)    r         2 HOLD_AREA
   154-0-0/w UBIN        r         2 HOLD_AREA_LGTH


  ****  BASED and DCB variables  ****

  ****  Structures  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name

PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:34   
     0-0-0/w STRC(144)   r     1 OUT$BLK
     0-2-0/h UBIN(18)    r         2 CODE
     1-0-0/h UBIN(18)    r         2 NSUBLKS
     3-0-0/b PTR         r         2 SUBLK$(0:0)

     0-0-0/w ASTR(153)   r     1 OUT$SYM
     4-0-0/c UBIN(9)     r         2 COUNT
     4-1-0/c ACHR        r         2 TEXT



   Procedure TOU$UPDATE requires 119 words for executable code.
   Procedure TOU$UPDATE requires 8 words of local(AUTO) storage.

    No errors detected in file TOU$UPDATE.:E05TSI    .
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:35   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:36   
          MINI XREF LISTING

DUP.CMD$
      5244**DCL      5622>>DOINDEX  5623>>ASSIGN
DUP.DF.CLOSE_TYPE
      5312**DCL      5508<<ASSIGN
DUP.DF.ENTERED
      5304**DCL      5505<<ASSIGN   5631<<ASSIGN   5641>>IF
DUP.DF.OPEN_TYPE
      5310**DCL      5506<<ASSIGN
DUP.DF.REPORT_ERROR
      5308**DCL      5507<<ASSIGN
DUP.FORCE_NEW_PAGE
      5268**DCL      5502<<ASSIGN
DUP.HDR_CODE
      5249**DCL      5500<<ASSIGN
DUP.HOLD_AREA
      5339**DCL      5627<<ASSIGN   5632<<ASSIGN
DUP.HOLD_AREA_LGTH
      5341**DCL      5628<<ASSIGN   5633<<ASSIGN
DUP.IFAD.ENTERED
      5274**DCL      5504<<ASSIGN   5626<<ASSIGN   5638>>IF
DUP.IFAD.ME_ALLOWED
      5272**DCL      5503<<ASSIGN
DUP.LINE_VFC
      5258**DCL      5501<<ASSIGN
DUP.LOG_V
      5326**DCL      5331--REDEF
DUP.MSG_CODE
      5247**DCL      5470<<ASSIGN   5476<<ASSIGN
ERROR IN PROCEDURE U_COMMAND_SETUP
      5647**LABEL    5629--CALLALT  5634--CALLALT  5640--CALLALT  5643--CALLALT
ERROR_RETURN
      5475**LABEL    5464--CALLALT  5466--CALLALT
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:37   
OUT$BLK.CODE IN PROCEDURE U_COMMAND_SETUP
      5550**DCL      5624>>DOCASE
OUT$BLK.NSUBLKS IN PROCEDURE U_COMMAND_SETUP
      5554**DCL      5622>>DOINDEX
OUT$BLK.SUBLK$ IN PROCEDURE U_COMMAND_SETUP
      5575**DCL      5623>>ASSIGN
OUT$SYM.COUNT IN PROCEDURE U_COMMAND_SETUP
      5611**DCL      5614--IMP-SIZ  5627>>ASSIGN   5628>>ASSIGN   5632>>ASSIGN   5633>>ASSIGN
OUT$SYM.TEXT IN PROCEDURE U_COMMAND_SETUP
      5614**DCL      5627>>ASSIGN   5632>>ASSIGN
OUTBLK# IN PROCEDURE U_COMMAND_SETUP
      5534**DCL      5622<<DOINDEX  5623>>ASSIGN
OUTBLK$ IN PROCEDURE U_COMMAND_SETUP
      5535**DCL      5623<<ASSIGN   5624>>DOCASE   5627>>ASSIGN   5627>>ASSIGN   5628>>ASSIGN   5632>>ASSIGN
      5632>>ASSIGN   5633>>ASSIGN
TOU$B_SHOW_DCBS
      5402**DCL-ENT  5465--CALL
TOU$DU_CLOSE_DF
      5390**DCL-ENT  5467--CALL     5475--CALL
TOU$DU_OPEN_DF
      5389**DCL-ENT  5466--CALL
TOU$DU_SET_DF_FID
      5388**DCL-ENT  5634--CALL     5643--CALL
TOU$DU_SET_IFAD_FID
      5384**DCL-ENT  5629--CALL     5640--CALL
TOU$DU_USER_WRITE
      5392**DCL-ENT  5471--CALL     5477--CALL
U_COMMAND_SETUP
      5532**PROC     5464--CALL
U_INIT_DUP
      5496**PROC     5463--CALL
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:38   
              *** CROSS REFERENCE LISTING ***
    **     DENOTES     IDENTIFIER DEFINITION
    <<                 IDENTIFIER'S VALUE SET
    >>                 IDENTIFIER'S VALUE USED
    <>                 IDENTIFIER SET AND/OR USED
    --                 IDENTIFIER REFERENCED
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:39   
              FULL UREF LISTING

DUP
      5226**DCL
DUP.BATCH_MODE
      5228**DCL
DUP.BCD_V
      5297**DCL
DUP.BCD_V.PTR$
      5300**DCL
DUP.BINARY_V
      5292**DCL
DUP.BINARY_V.PTR$
      5295**DCL
DUP.BOTTOM_LINE#
      5264**DCL
DUP.BREAK_DISABLED
      5346**DCL
DUP.BREAK_RETURN
      5348**DCL
DUP.BREAK_TERMINATE
      5344**DCL
DUP.CPU_TYPE
      5357**DCL
DUP.CURRENT_LINE#
      5262**DCL
DUP.CURRENT_PAGE#
      5260**DCL
DUP.DF
      5303**DCL
DUP.DF.FID
      5314**DCL
DUP.DF.FID_LGTH
      5316**DCL
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:40   
DUP.DF.NO_EXIST
      5306**DCL
DUP.DS_V
      5237**DCL
DUP.ERROR_IMAGE
      5266**DCL
DUP.FAULT_ERROR
      5232**DCL
DUP.IFAD
      5271**DCL
DUP.IFAD.CONFIG_TAB
      5280**DCL
DUP.IFAD.DEVICE_INPUT
      5276**DCL
DUP.IFAD.DRIVE_NUMBER
      5286**DCL
DUP.IFAD.FID
      5288**DCL
DUP.IFAD.FID_LGTH
      5290**DCL
DUP.IFAD.IMU_NUMBER
      5284**DCL
DUP.IFAD.IMU_TAB
      5278**DCL
DUP.IFAD.NUM_VOLUMES
      5282**DCL
DUP.LOG
      5319**DCL
DUP.LOG.CATALOG
      5322**DCL
DUP.LOG.DECK
      5324**DCL
DUP.LOG.TYPE
      5320**DCL
DUP.LOG_V.PTR$
      5329**DCL
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:41   
DUP.LOG_V_
      5331**DCL
DUP.MSG_V
      5253**DCL
DUP.MSG_V.PTR$
      5256**DCL
DUP.NUM_LINES
      5251**DCL
DUP.NUM_WORDS
      5235**DCL
DUP.PROCESS_COMPLETE
      5230**DCL
DUP.RESPONSE
      5240**DCL
DUP.RESPONSE_LGTH
      5242**DCL
DUP.SITE_ID
      5355**DCL
DUP.SITE_NAME
      5350**DCL
DUP.SITE_NAME.LGTH
      5351**DCL
DUP.SITE_NAME.TEXT
      5353**DCL
DUP.TEMP
      5333**DCL
DUP.TEMP.CLOSE_TYPE
      5336**DCL
DUP.TEMP.OPEN_TYPE
      5334**DCL
OUT$BLK IN PROCEDURE U_COMMAND_SETUP
      5542**DCL
OUT$BLK.CPOS IN PROCEDURE U_COMMAND_SETUP
      5568**DCL
OUT$BLK.NDTYPE IN PROCEDURE U_COMMAND_SETUP
      5545**DCL
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:42   
OUT$BLK.SCRITCH IN PROCEDURE U_COMMAND_SETUP
      5558**DCL
OUT$BLK.TEMP IN PROCEDURE U_COMMAND_SETUP
      5543**DCL
OUT$SYM IN PROCEDURE U_COMMAND_SETUP
      5588**DCL
OUT$SYM.CODE IN PROCEDURE U_COMMAND_SETUP
      5594**DCL
OUT$SYM.CPOS IN PROCEDURE U_COMMAND_SETUP
      5603**DCL
OUT$SYM.NDTYPE IN PROCEDURE U_COMMAND_SETUP
      5591**DCL
OUT$SYM.NSUBLKS IN PROCEDURE U_COMMAND_SETUP
      5597**DCL
OUT$SYM.SCRITCH IN PROCEDURE U_COMMAND_SETUP
      5600**DCL
OUT$SYM.TEMP IN PROCEDURE U_COMMAND_SETUP
      5589**DCL
OUT$SYM.TEXTC$ IN PROCEDURE U_COMMAND_SETUP
      5606**DCL
TOU$CHECKSUM
      5396**DCL-ENT
TOU$CHECK_CHECKSUM
      5397**DCL-ENT
TOU$CLEAR_IFAD
      5399**DCL-ENT
TOU$DU_CLOSE_IFAD
      5386**DCL-ENT
TOU$DU_OPEN_IFAD
      5385**DCL-ENT
TOU$DU_PRINTER_WRITE
      5393**DCL-ENT
TOU$DU_UPDATE_LOG
      5394**DCL-ENT
TOU$REPLACE
      5400**DCL-ENT
PL6.E3A0      #001=TOU$UPDATE File=TOU$UPDATE.:E05TSI                            WED 07/30/97 06:52 Page:43   
TOU$UPDATE
        33**PROC
