VERSION E05

PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:1    
        1        1        /*M* OTW$PMME OC TEMP/WRITE PMME FOR PRE-BOOT CONSOLE USE. */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*P*     NAME: OTW$PMME
        8        8                 PURPOSE: THROWAWAY PMME'S.     */
        9        9        /*F*     NAME: OTW$PMME
       10       10                 PURPOSE: THROWAWAY PMME'S.
       11       11                 DESCRIPTION:
       12       12                     0.  PMME #0 will write and/or read the operator's
       13       13                          console for you.
       14       14         */
       15       15        /*D*     NAME: OTW$PMME
       16       16                 CALL:  CALL OTW$PMME(FPTCODE);
       17       17                          FPTCODE SBIN;  Code of PMME from CLIMB.
       18       18                 INTERFACE:  PMME-dependent.
       19       19                     0.  NIQ$GET,NIO$QUE,NIQ$REL,HFF$NILERASE,HFF$DSIZ.
       20       20                 ENVIRONMENT: MONITOR (FOR USER) LS.
       21       21         */
       22       22        OTW$PMME: PROC(FPTCODE);
       23       23    1   DCL FPTCODE SBIN;                       /* CLIMB SUBCODE WITHIN GROUP OT CODE */
       24       24        /**/
       25       25    1   DCL NIQ$GET ENTRY(1) ALTRET;            /* GET AN IOQ PACKET                  */
       26       26    1   DCL NIO$QUE ENTRY(1) ALTRET;            /* QUE UP AN IOQ PACKET               */
       27       27    1   DCL NIQ$REL ENTRY(1) ALTRET;            /* RELEASE AN IOQ PACKET              */
       28       28    1   DCL HFF$NILERASE ENTRY(1) ALTRET;       /* ALTRETS IF VECT IS NIL/ERASE       */
       29       29    1   DCL HFF$DSIZ ENTRY(2);                  /* RETURNS BYTE SIZE OF DESCRIPTOR    */
       30       30        /**/
       31       31    1   DCL B$PS0$ PTR SYMREF;                  /* POINTER TO WHERE $PS0 POINTS       */
       32       32    1   DCL B$PS1$ PTR SYMREF;                  /* POINTER TO WHERE $PS1 POINTS       */
       33       33    1   DCL B$PS2$ PTR SYMREF;                  /* POINTER TO WHERE $PS2 POINTS       */
       34       34    1   DCL B$JIT$ PTR SYMREF;
       35       35        %INCLUDE CP_6_SUBS;
       36      575        %INCLUDE F$JIT_C;
       37     1005        %INCLUDE N$REQ;
PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:2    
       38     1079        %N$REQ;
       39     1137        %INCLUDE N_FC_C;
       40     1174        %INCLUDE OC_DATA_R;
       41     1183        %INCLUDE OT$CP6V_C;
       42     1187        %FPT$TEMPWROC_V;
       43     1190        %INCLUDE OCI_DATA_R;
       44     1202        %INCLUDE UD_ERRORS_C;
       45     1244        /**/
       46     1245    1   DCL Q$ PTR;                             /* POINTS TO IOQ PACKET               */
       47     1246    1   DCL BUFFF CHAR(132);                    /* PLACE TO WORD-ALIGN USER BUFFER    */
       48     1247    1   DCL UBUFSZ SBIN;                        /* PLACE TO HOLD USER BUFFER SIZE     */
       49     1248    1   DCL BUFFA CHAR(UBUFSZ) BASED;           /* TEMPLATE FOR USER BUFFER           */
       50     1249    1   DCL BUFSZ SBIN;          /* PLACE TO HOLD USER-TO-IOQ BUFFERSIZE INCREMENT*/
       51     1250    1   DCL NULL3(0:2) CHAR(1) CONSTANT INIT(BINASC(0)*3); /*NULLS FOR PAD*/
       52     1251    1   DCL NULLS REDEF NULL3 CHAR(3);
       53     1252    1   DCL 1 OTW_ERR STATIC,
       54     1253    1         2 FCG BIT(12) UNAL INIT('1712'O), /* 'OT'                               */
       55     1254    1         2 MID BIT(6)  UNAL INIT('27'O),   /* 'W'                                */
       56     1255    1         2 MON BIT(1)  UNAL INIT('1'B),    /* MONITOR */
       57     1256    1         2 CODE UBIN(14) UNAL INIT(0),
       58     1257    1         2 SEV UBIN(3) UNAL INIT(7);
       59     1258        %EJECT;
PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:3    
       60     1259    1           IF ~OCI_BOOT
       61     1260    1           THEN
       62     1261    2           DO;
       63     1262
       64     1263        /*E* ERROR: OTW-E$NOTAUTH-A
       65     1264             MESSAGE: You can't use M$TEMPWROC once the system is really up
       66     1265             DESCRIPTION: The M$TEMPWROC PMME is for use only by system ghosts
       67     1266                  before the KEYIN is running.                            */
       68     1267
       69     1268    2              B$JIT$->B$JIT.ERR = OTW_ERR;
       70     1269    2              B$JIT$->B$JIT.ERR.CODE = %E$NOTAUTH;
       71     1270    2              RETURN;
       72     1271    2              END;                         /* DO IF CSCG ALREADY OPEN            */
       73     1272
       74     1273    2           DO CASE(FPTCODE);
       75     1274    2            CASE(0);                       /*****  M$TEMPWROC  *****/
       76     1275    2              CALL HFF$NILERASE(1)ALTRET(NOWRITE);/*GO IF BUFW=NIL/ERASE*/
       77     1276                                           /*  BUFW NOT NIL OR ERASE; WRITE IT TO OC. */
       78     1277    2              CALL HFF$DSIZ(B$PS1$,UBUFSZ);
       79     1278    2              IF(UBUFSZ>128) THEN UBUFSZ=128; /* TRUNC TO 128*/
       80     1279    2              BUFSZ= MOD(2000000-UBUFSZ,4); /* COMPUTE PAD SIZE*/
       81     1280    2              CALL CONCAT(BUFFF,B$PS1$->BUFFA,NULLS); /* MAKE IOQ BUF*/
       82     1281    2              CALL NIQ$GET(Q$);
       83     1282    2              Q$->N$REQ.BUF$=ADDR(BUFFF);
       84     1283    2              Q$->N$REQ.BUFSIZE=UBUFSZ+BUFSZ;
       85     1284    2              Q$->N$REQ.FC=%N_WRASC;
       86     1285    2              Q$->N$REQ.OPFLG=OP_BPF|OP_WAIT|OP_USER;
       87     1286    2              Q$->N$REQ.DCB$=DCBADDR(1);
       88     1287    2              Q$->N$REQ.RCT=1;
       89     1288    2              Q$->N$REQ.DLA.DCTX=B_SCDCTX; /* DCTX OF OP CONSOLE                 */
       90     1289    2              CALL NIO$QUE(Q$->N$REQ);
       91     1290    2   NOWRITE:
       92     1291    2              CALL HFF$NILERASE(2)ALTRET(NOREAD);/*GO IF BUFR=NIL/ERASE*/
       93     1292    2              CALL HFF$DSIZ(B$PS2$,UBUFSZ);
       94     1293    2              IF(UBUFSZ>128) THEN UBUFSZ=128; /* TRUNC TO 128*/
       95     1294    2              BUFSZ= MOD(2000000-UBUFSZ,4); /* COMPUTE PAD SIZE*/
       96     1295    2              CALL NIQ$GET(Q$);
PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:4    
       97     1296    2              Q$->N$REQ.BUF$=ADDR(BUFFF);
       98     1297    2              Q$->N$REQ.BUFSIZE=UBUFSZ+BUFSZ;
       99     1298    2              Q$->N$REQ.DCB$=DCBADDR(1);
      100     1299    2              Q$->N$REQ.FC=%N_RDASC;
      101     1300    2              Q$->N$REQ.RCT=1;
      102     1301    2              Q$->N$REQ.OPFLG=OP_BPF|OP_WAIT|OP_USER|OP_HOLD;
      103     1302    2              Q$->N$REQ.DLA.DCTX=B_SCDCTX; /* DCTX OF OP CONSOLE                 */
      104     1303    2              CALL NIO$QUE(Q$->N$REQ);
      105     1304    2              BUFSZ= Q$->N$REQ.ARSIZE;     /* GET IOQ'S ARS                      */
      106     1305    2              IF(BUFSZ<=UBUFSZ) THEN UBUFSZ=BUFSZ; /*BUT NOT > USRARS*/
      107     1306    2              B$PS2$->BUFFA= BUFFF;        /* REPORT READ BUFFER TO USER         */
      108     1307    2              B$PS0$->FPT$TEMPWROC_V.ARS=UBUFSZ; /* REPORT ARS TO USER           */
      109     1308    2              B$PS0$->FPT$TEMPWROC_V.TYC=Q$->N$REQ.TYC & ~%TYC_EGV;
      110     1309    2              CALL NIQ$REL(Q$);
      111     1310    2   NOREAD:
      112     1311    2              B$JIT$->B$JIT.ERR='0'B;
      113     1312    2              RETURN;
      114     1313    2            CASE(ELSE);
      115     1314    2              RETURN;
      116     1315    2            END;
      117     1316    1   END;

PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:5    
--  Include file information  --

   UD_ERRORS_C.:E05TOU  is referenced.
   OCI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   OT$CP6V_C.:E05TOU  is referenced.
   OC_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   N_FC_C.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  is referenced.
   F$JIT_C.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
      No diagnostics issued in procedure OTW$PMME.

   Procedure OTW$PMME requires 179 words for executable code.
   Procedure OTW$PMME requires 42 words of local(AUTO) storage.

    No errors detected in file OTW$PMME.:E05TSI    .

PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:6    

 Object Unit name= OTW$PMME                                   File name= OTW$PMME.:E05TOU
 UTS= JUL 30 '97 04:14:58.76 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  RoData even  UTS      1      1  OTW$PMME
    1   Data  even  none     1      1  OTW$PMME
    2   Proc  even  none   179    263  OTW$PMME
    3  RoData even  none     7      7  OTW$PMME

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes            yes      Std        1  OTW$PMME

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       1 HFF$NILERASE
 yes     yes           Std       1 NIO$QUE
 yes     yes           Std       1 NIQ$REL
         yes           Std       2 HFF$DSIZ
 yes     yes           Std       1 NIQ$GET
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AUTO_1
                       nStd      0 X66_ARET
PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:7    

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     B$PS0$                                B$PS1$                                B$PS2$
     B$JIT$                                B_SCDCTX                         r    OCI_ROUTINE
     OCI_BOOT                              B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ROSID                                 ISSID
PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:8    


        1        1        /*M* OTW$PMME OC TEMP/WRITE PMME FOR PRE-BOOT CONSOLE USE. */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*P*     NAME: OTW$PMME
        8        8                 PURPOSE: THROWAWAY PMME'S.     */
        9        9        /*F*     NAME: OTW$PMME
       10       10                 PURPOSE: THROWAWAY PMME'S.
       11       11                 DESCRIPTION:
       12       12                     0.  PMME #0 will write and/or read the operator's
       13       13                          console for you.
       14       14         */
       15       15        /*D*     NAME: OTW$PMME
       16       16                 CALL:  CALL OTW$PMME(FPTCODE);
       17       17                          FPTCODE SBIN;  Code of PMME from CLIMB.
       18       18                 INTERFACE:  PMME-dependent.
       19       19                     0.  NIQ$GET,NIO$QUE,NIQ$REL,HFF$NILERASE,HFF$DSIZ.
       20       20                 ENVIRONMENT: MONITOR (FOR USER) LS.
       21       21         */
       22       22        OTW$PMME: PROC(FPTCODE);

     22  2 000000   000000 700200 xent  OTW$PMME     TSX0  ! X66_AUTO_1
         2 000001   000052 000001                    ZERO    42,1

       23       23    1   DCL FPTCODE SBIN;                       /* CLIMB SUBCODE WITHIN GROUP OT CODE */
       24       24        /**/
       25       25    1   DCL NIQ$GET ENTRY(1) ALTRET;            /* GET AN IOQ PACKET                  */
       26       26    1   DCL NIO$QUE ENTRY(1) ALTRET;            /* QUE UP AN IOQ PACKET               */
       27       27    1   DCL NIQ$REL ENTRY(1) ALTRET;            /* RELEASE AN IOQ PACKET              */
       28       28    1   DCL HFF$NILERASE ENTRY(1) ALTRET;       /* ALTRETS IF VECT IS NIL/ERASE       */
       29       29    1   DCL HFF$DSIZ ENTRY(2);                  /* RETURNS BYTE SIZE OF DESCRIPTOR    */
       30       30        /**/
       31       31    1   DCL B$PS0$ PTR SYMREF;                  /* POINTER TO WHERE $PS0 POINTS       */
       32       32    1   DCL B$PS1$ PTR SYMREF;                  /* POINTER TO WHERE $PS1 POINTS       */
PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:9    
       33       33    1   DCL B$PS2$ PTR SYMREF;                  /* POINTER TO WHERE $PS2 POINTS       */
       34       34    1   DCL B$JIT$ PTR SYMREF;
       35       35        %INCLUDE CP_6_SUBS;
       36      575        %INCLUDE F$JIT_C;
       37     1005        %INCLUDE N$REQ;
       38     1079        %N$REQ;
       39     1137        %INCLUDE N_FC_C;
       40     1174        %INCLUDE OC_DATA_R;
       41     1183        %INCLUDE OT$CP6V_C;
       42     1187        %FPT$TEMPWROC_V;
       43     1190        %INCLUDE OCI_DATA_R;
       44     1202        %INCLUDE UD_ERRORS_C;
       45     1244        /**/
       46     1245    1   DCL Q$ PTR;                             /* POINTS TO IOQ PACKET               */
       47     1246    1   DCL BUFFF CHAR(132);                    /* PLACE TO WORD-ALIGN USER BUFFER    */
       48     1247    1   DCL UBUFSZ SBIN;                        /* PLACE TO HOLD USER BUFFER SIZE     */
       49     1248    1   DCL BUFFA CHAR(UBUFSZ) BASED;           /* TEMPLATE FOR USER BUFFER           */
       50     1249    1   DCL BUFSZ SBIN;          /* PLACE TO HOLD USER-TO-IOQ BUFFERSIZE INCREMENT*/
       51     1250    1   DCL NULL3(0:2) CHAR(1) CONSTANT INIT(BINASC(0)*3); /*NULLS FOR PAD*/
       52     1251    1   DCL NULLS REDEF NULL3 CHAR(3);
       53     1252    1   DCL 1 OTW_ERR STATIC,
       54     1253    1         2 FCG BIT(12) UNAL INIT('1712'O), /* 'OT'                               */
       55     1254    1         2 MID BIT(6)  UNAL INIT('27'O),   /* 'W'                                */
       56     1255    1         2 MON BIT(1)  UNAL INIT('1'B),    /* MONITOR */
       57     1256    1         2 CODE UBIN(14) UNAL INIT(0),
       58     1257    1         2 SEV UBIN(3) UNAL INIT(7);
       59     1258        %EJECT;
PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:10   
       60     1259    1           IF ~OCI_BOOT

   1259  2 000002   000000 236000 xsym               LDQ     OCI_BOOT
         2 000003   400000 376003                    ANQ     -131072,DU
         2 000004   400000 676003                    ERQ     -131072,DU
         2 000005   000015 600000 2                  TZE     s:1273

       61     1260    1           THEN
       62     1261    2           DO;

       63     1262
       64     1263        /*E* ERROR: OTW-E$NOTAUTH-A
       65     1264             MESSAGE: You can't use M$TEMPWROC once the system is really up
       66     1265             DESCRIPTION: The M$TEMPWROC PMME is for use only by system ghosts
       67     1266                  before the KEYIN is running.                            */
       68     1267
       69     1268    2              B$JIT$->B$JIT.ERR = OTW_ERR;

   1268  2 000006   000000 236000 1                  LDQ     OTW_ERR
         2 000007   000000 470400 xsym               LDP0    B$JIT$
         2 000010   000012 756100                    STQ     10,,PR0

       70     1269    2              B$JIT$->B$JIT.ERR.CODE = %E$NOTAUTH;

   1269  2 000011   000000 376000 3                  ANQ     0
         2 000012   006250 276007                    ORQ     3240,DL
         2 000013   000012 756100                    STQ     10,,PR0

       71     1270    2              RETURN;

   1270  2 000014   000000 702200 xent               TSX2  ! X66_ARET

       72     1271    2              END;                         /* DO IF CSCG ALREADY OPEN            */
       73     1272
       74     1273    2           DO CASE(FPTCODE);

   1273  2 000015   200003 470500                    LDP0    @FPTCODE,,AUTO
PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:11   
         2 000016   000000 235100                    LDA     0,,PR0
         2 000017   000001 115007                    CMPA    1,DL
         2 000020   000022 602005 2                  TNC     s:1273+5,AL
         2 000021   000262 710000 2                  TRA     s:1314
         2 000022   000023 710000 2                  TRA     s:1275

       75     1274    2            CASE(0);                       /*****  M$TEMPWROC  *****/

       76     1275    2              CALL HFF$NILERASE(1)ALTRET(NOWRITE);/*GO IF BUFW=NIL/ERASE*/

   1275  2 000023   000001 630400 3                  EPPR0   1
         2 000024   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000025   000000 701000 xent               TSX1    HFF$NILERASE
         2 000026   000132 702000 2                  TSX2    NOWRITE

       77     1276                                           /*  BUFW NOT NIL OR ERASE; WRITE IT TO OC. */
       78     1277    2              CALL HFF$DSIZ(B$PS1$,UBUFSZ);

   1277  2 000027   200046 630500                    EPPR0   UBUFSZ,,AUTO
         2 000030   200051 450500                    STP0    BUFSZ+2,,AUTO
         2 000031   000002 236000 3                  LDQ     2
         2 000032   200050 756100                    STQ     BUFSZ+1,,AUTO
         2 000033   200050 630500                    EPPR0   BUFSZ+1,,AUTO
         2 000034   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000035   000000 701000 xent               TSX1    HFF$DSIZ
         2 000036   000000 011000                    NOP     0

       79     1278    2              IF(UBUFSZ>128) THEN UBUFSZ=128; /* TRUNC TO 128*/

   1278  2 000037   200046 235100                    LDA     UBUFSZ,,AUTO
         2 000040   000200 115007                    CMPA    128,DL
         2 000041   000044 604400 2                  TMOZ    s:1279

   1278  2 000042   000200 236007                    LDQ     128,DL
         2 000043   200046 756100                    STQ     UBUFSZ,,AUTO

       80     1279    2              BUFSZ= MOD(2000000-UBUFSZ,4); /* COMPUTE PAD SIZE*/
PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:12   

   1279  2 000044   000003 236000 3                  LDQ     3
         2 000045   200046 136100                    SBLQ    UBUFSZ,,AUTO
         2 000046   000004 506007                    DIV     4,DL
         2 000047   200047 755100                    STA     BUFSZ,,AUTO

       81     1280    2              CALL CONCAT(BUFFF,B$PS1$->BUFFA,NULLS); /* MAKE IOQ BUF*/

   1280  2 000050   000000 470400 xsym               LDP0    B$PS1$
         2 000051   200046 720100                    LXL0    UBUFSZ,,AUTO
         2 000052   040100 100540                    MLR     fill='040'O
         2 000053   000000 000010                    ADSC9   0,,PR0                   cn=0,n=*X0
         2 000054   200005 000204                    ADSC9   BUFFF,,AUTO              cn=0,n=132
         2 000055   200046 236100                    LDQ     UBUFSZ,,AUTO
         2 000056   000204 116007                    CMPQ    132,DL
         2 000057   000065 605000 2                  TPL     s:1281
         2 000060   777573 621006                    EAX1    -133,QL
         2 000061   777777 661003                    ERX1    -1,DU
         2 000062   040146 100400                    MLR     fill='040'O
         2 000063   000000 000003 0                  ADSC9   NULL3                    cn=0,n=3
         2 000064   200005 000011                    ADSC9   BUFFF,Q,AUTO             cn=0,n=*X1

       82     1281    2              CALL NIQ$GET(Q$);

   1281  2 000065   200004 631500                    EPPR1   Q$,,AUTO
         2 000066   200050 451500                    STP1    BUFSZ+1,,AUTO
         2 000067   200050 630500                    EPPR0   BUFSZ+1,,AUTO
         2 000070   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000071   000000 701000 xent               TSX1    NIQ$GET
         2 000072   000000 011000                    NOP     0

       83     1282    2              Q$->N$REQ.BUF$=ADDR(BUFFF);

   1282  2 000073   200005 630500                    EPPR0   BUFFF,,AUTO
         2 000074   200004 471500                    LDP1    Q$,,AUTO
         2 000075   100005 450500                    STP0    5,,PR1

PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:13   
       84     1283    2              Q$->N$REQ.BUFSIZE=UBUFSZ+BUFSZ;

   1283  2 000076   200046 236100                    LDQ     UBUFSZ,,AUTO
         2 000077   200047 036100                    ADLQ    BUFSZ,,AUTO
         2 000100   000020 736000                    QLS     16
         2 000101   100004 676100                    ERQ     4,,PR1
         2 000102   000034 376000 xsym               ANQ     B_VECTNIL+28
         2 000103   100004 656100                    ERSQ    4,,PR1

       85     1284    2              Q$->N$REQ.FC=%N_WRASC;

   1284  2 000104   200004 470500                    LDP0    Q$,,AUTO
         2 000105   000005 236007                    LDQ     5,DL
         2 000106   000003 552104                    STBQ    3,'04'O,PR0

       86     1285    2              Q$->N$REQ.OPFLG=OP_BPF|OP_WAIT|OP_USER;

   1285  2 000107   200004 470500                    LDP0    Q$,,AUTO
         2 000110   000430 236007                    LDQ     280,DL
         2 000111   000004 552104                    STBQ    4,'04'O,PR0

       87     1286    2              Q$->N$REQ.DCB$=DCBADDR(1);

   1286  2 000112   000004 470400 3                  LDP0    4
         2 000113   000000 471500                    LDP1    0,,PR0
         2 000114   100001 236100                    LDQ     1,,PR1
         2 000115   200004 473500                    LDP3    Q$,,AUTO
         2 000116   300022 756100                    STQ     18,,PR3

       88     1287    2              Q$->N$REQ.RCT=1;

   1287  2 000117   000001 220003                    LDX0    1,DU
         2 000120   300030 440100                    SXL0    24,,PR3

       89     1288    2              Q$->N$REQ.DLA.DCTX=B_SCDCTX; /* DCTX OF OP CONSOLE                 */

   1288  2 000121   000000 236000 xsym               LDQ     B_SCDCTX
PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:14   
         2 000122   000025 736000                    QLS     21
         2 000123   300001 676100                    ERQ     1,,PR3
         2 000124   777770 376003                    ANQ     -8,DU
         2 000125   300001 656100                    ERSQ    1,,PR3

       90     1289    2              CALL NIO$QUE(Q$->N$REQ);

   1289  2 000126   200004 630500                    EPPR0   Q$,,AUTO
         2 000127   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000130   000000 701000 xent               TSX1    NIO$QUE
         2 000131   000000 011000                    NOP     0

       91     1290    2   NOWRITE:
       92     1291    2              CALL HFF$NILERASE(2)ALTRET(NOREAD);/*GO IF BUFR=NIL/ERASE*/

   1291  2 000132   000005 630400 3     NOWRITE      EPPR0   5
         2 000133   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000134   000000 701000 xent               TSX1    HFF$NILERASE
         2 000135   000257 702000 2                  TSX2    NOREAD

       93     1292    2              CALL HFF$DSIZ(B$PS2$,UBUFSZ);

   1292  2 000136   200046 630500                    EPPR0   UBUFSZ,,AUTO
         2 000137   200051 450500                    STP0    BUFSZ+2,,AUTO
         2 000140   000006 236000 3                  LDQ     6
         2 000141   200050 756100                    STQ     BUFSZ+1,,AUTO
         2 000142   200050 630500                    EPPR0   BUFSZ+1,,AUTO
         2 000143   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000144   000000 701000 xent               TSX1    HFF$DSIZ
         2 000145   000000 011000                    NOP     0

       94     1293    2              IF(UBUFSZ>128) THEN UBUFSZ=128; /* TRUNC TO 128*/

   1293  2 000146   200046 235100                    LDA     UBUFSZ,,AUTO
         2 000147   000200 115007                    CMPA    128,DL
         2 000150   000153 604400 2                  TMOZ    s:1294

PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:15   
   1293  2 000151   000200 236007                    LDQ     128,DL
         2 000152   200046 756100                    STQ     UBUFSZ,,AUTO

       95     1294    2              BUFSZ= MOD(2000000-UBUFSZ,4); /* COMPUTE PAD SIZE*/

   1294  2 000153   000003 236000 3                  LDQ     3
         2 000154   200046 136100                    SBLQ    UBUFSZ,,AUTO
         2 000155   000004 506007                    DIV     4,DL
         2 000156   200047 755100                    STA     BUFSZ,,AUTO

       96     1295    2              CALL NIQ$GET(Q$);

   1295  2 000157   200004 630500                    EPPR0   Q$,,AUTO
         2 000160   200050 450500                    STP0    BUFSZ+1,,AUTO
         2 000161   200050 630500                    EPPR0   BUFSZ+1,,AUTO
         2 000162   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000163   000000 701000 xent               TSX1    NIQ$GET
         2 000164   000000 011000                    NOP     0

       97     1296    2              Q$->N$REQ.BUF$=ADDR(BUFFF);

   1296  2 000165   200005 630500                    EPPR0   BUFFF,,AUTO
         2 000166   200004 471500                    LDP1    Q$,,AUTO
         2 000167   100005 450500                    STP0    5,,PR1

       98     1297    2              Q$->N$REQ.BUFSIZE=UBUFSZ+BUFSZ;

   1297  2 000170   200046 236100                    LDQ     UBUFSZ,,AUTO
         2 000171   200047 036100                    ADLQ    BUFSZ,,AUTO
         2 000172   000020 736000                    QLS     16
         2 000173   100004 676100                    ERQ     4,,PR1
         2 000174   000034 376000 xsym               ANQ     B_VECTNIL+28
         2 000175   100004 656100                    ERSQ    4,,PR1

       99     1298    2              Q$->N$REQ.DCB$=DCBADDR(1);

   1298  2 000176   000004 470400 3                  LDP0    4
PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:16   
         2 000177   000000 471500                    LDP1    0,,PR0
         2 000200   100001 236100                    LDQ     1,,PR1
         2 000201   200004 473500                    LDP3    Q$,,AUTO
         2 000202   300022 756100                    STQ     18,,PR3

      100     1299    2              Q$->N$REQ.FC=%N_RDASC;

   1299  2 000203   000004 236007                    LDQ     4,DL
         2 000204   300003 552104                    STBQ    3,'04'O,PR3

      101     1300    2              Q$->N$REQ.RCT=1;

   1300  2 000205   000001 220003                    LDX0    1,DU
         2 000206   200004 473500                    LDP3    Q$,,AUTO
         2 000207   300030 440100                    SXL0    24,,PR3

      102     1301    2              Q$->N$REQ.OPFLG=OP_BPF|OP_WAIT|OP_USER|OP_HOLD;

   1301  2 000210   000434 236007                    LDQ     284,DL
         2 000211   300004 552104                    STBQ    4,'04'O,PR3

      103     1302    2              Q$->N$REQ.DLA.DCTX=B_SCDCTX; /* DCTX OF OP CONSOLE                 */

   1302  2 000212   200004 473500                    LDP3    Q$,,AUTO
         2 000213   000000 236000 xsym               LDQ     B_SCDCTX
         2 000214   000025 736000                    QLS     21
         2 000215   300001 676100                    ERQ     1,,PR3
         2 000216   777770 376003                    ANQ     -8,DU
         2 000217   300001 656100                    ERSQ    1,,PR3

      104     1303    2              CALL NIO$QUE(Q$->N$REQ);

   1303  2 000220   200004 630500                    EPPR0   Q$,,AUTO
         2 000221   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000222   000000 701000 xent               TSX1    NIO$QUE
         2 000223   000000 011000                    NOP     0

PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:17   
      105     1304    2              BUFSZ= Q$->N$REQ.ARSIZE;     /* GET IOQ'S ARS                      */

   1304  2 000224   200004 470500                    LDP0    Q$,,AUTO
         2 000225   000027 236100                    LDQ     23,,PR0
         2 000226   000020 772000                    QRL     16
         2 000227   200047 756100                    STQ     BUFSZ,,AUTO

      106     1305    2              IF(BUFSZ<=UBUFSZ) THEN UBUFSZ=BUFSZ; /*BUT NOT > USRARS*/

   1305  2 000230   200046 116100                    CMPQ    UBUFSZ,,AUTO
         2 000231   000233 605400 2                  TPNZ    s:1306

   1305  2 000232   200046 756100                    STQ     UBUFSZ,,AUTO

      107     1306    2              B$PS2$->BUFFA= BUFFF;        /* REPORT READ BUFFER TO USER         */

   1306  2 000233   000000 471400 xsym               LDP1    B$PS2$
         2 000234   200046 720100                    LXL0    UBUFSZ,,AUTO
         2 000235   040140 100500                    MLR     fill='040'O
         2 000236   200005 000204                    ADSC9   BUFFF,,AUTO              cn=0,n=132
         2 000237   100000 000010                    ADSC9   0,,PR1                   cn=0,n=*X0

      108     1307    2              B$PS0$->FPT$TEMPWROC_V.ARS=UBUFSZ; /* REPORT ARS TO USER           */

   1307  2 000240   000000 470400 xsym               LDP0    B$PS0$
         2 000241   200046 235100                    LDA     UBUFSZ,,AUTO
         2 000242   000000 755100                    STA     0,,PR0

      109     1308    2              B$PS0$->FPT$TEMPWROC_V.TYC=Q$->N$REQ.TYC & ~%TYC_EGV;

   1308  2 000243   000030 236000 xsym               LDQ     B_VECTNIL+24
         2 000244   000027 676000 xsym               ERQ     B_VECTNIL+23
         2 000245   200004 470500                    LDP0    Q$,,AUTO
         2 000246   000021 376100                    ANQ     17,,PR0
         2 000247   000000 471400 xsym               LDP1    B$PS0$
         2 000250   100001 756100                    STQ     1,,PR1

PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:18   
      110     1309    2              CALL NIQ$REL(Q$);

   1309  2 000251   200004 630500                    EPPR0   Q$,,AUTO
         2 000252   200050 450500                    STP0    BUFSZ+1,,AUTO
         2 000253   200050 630500                    EPPR0   BUFSZ+1,,AUTO
         2 000254   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000255   000000 701000 xent               TSX1    NIQ$REL
         2 000256   000000 011000                    NOP     0

      111     1310    2   NOREAD:
      112     1311    2              B$JIT$->B$JIT.ERR='0'B;

   1311  2 000257   000000 470400 xsym  NOREAD       LDP0    B$JIT$
         2 000260   000012 450100                    STZ     10,,PR0

      113     1312    2              RETURN;

   1312  2 000261   000000 702200 xent               TSX2  ! X66_ARET

      114     1313    2            CASE(ELSE);

      115     1314    2              RETURN;

   1314  2 000262   000000 702200 xent               TSX2  ! X66_ARET

NULL3
 Sect OctLoc
   0     000   000000 000***                                                    ....

OTW_ERR
 Sect OctLoc
   1     000   171227 400007                                                    y...

(unnamed)
 Sect OctLoc
   3     000   777777 400007   000003 006000   000000 006000   000007 502200    ................
   3     004   000000 006003   000004 006000   000000 006000                    ............
PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:19   
      116     1315    2            END;
      117     1316    1   END;

PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:20   
--  Include file information  --

   UD_ERRORS_C.:E05TOU  is referenced.
   OCI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   OT$CP6V_C.:E05TOU  is referenced.
   OC_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   N_FC_C.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  is referenced.
   F$JIT_C.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
      No diagnostics issued in procedure OTW$PMME.
PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:21   

 **** Variables and constants ****

  ****  Section 000 RoData OTW$PMME

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR        r     1 NULL3(0:2)                 0-0-0/c CHAR(3)     r     1 NULLS

  ****  Section 001  Data  OTW$PMME

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/b STRC        r     1 OTW_ERR

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @FPTCODE                   5-0-0/c CHAR(132)   r     1 BUFFF
    47-0-0/w SBIN        r     1 BUFSZ                     *0-0-0/w SBIN        r     1 FPTCODE
     4-0-0/w PTR         r     1 Q$                        46-0-0/w SBIN        r     1 UBUFSZ

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$JIT$                     0-0-0/w PTR         r     1 B$PS0$
     0-0-0/w PTR         r     1 B$PS1$                     0-0-0/w PTR         r     1 B$PS2$
     0-0-0/w UBIN        r     1 B_SCDCTX                   0-0-0/w BIT         r     1 OCI_BOOT
     0-0-0/w EPTR        r     1 OCI_ROUTINE(0:8191)

  ****  BASED and DCB variables  ****

PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:22   
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(8856)  r     1 B$JIT                      0-0-0/c ACHR        r     1 BUFFA
     0-0-0/d STRC(72)    r     1 FPT$TEMPWROC_V             0-0-0/d STRC(1080)  r     1 N$REQ


   Procedure OTW$PMME requires 179 words for executable code.
   Procedure OTW$PMME requires 42 words of local(AUTO) storage.

    No errors detected in file OTW$PMME.:E05TSI    .
PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:23   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:24   
          MINI XREF LISTING

B$JIT.ERR
       902**DCL      1268<<ASSIGN   1311<<ASSIGN
B$JIT.ERR.CODE
       903**DCL      1269<<ASSIGN
B$JIT.ERR.MID
       903**DCL       903--REDEF
B$JIT$
        34**DCL       897--IMP-PTR  1268>>ASSIGN   1269>>ASSIGN   1311>>ASSIGN
B$PS0$
        31**DCL      1307>>ASSIGN   1308>>ASSIGN
B$PS1$
        32**DCL      1277<>CALL     1280>>CALLBLT
B$PS2$
        33**DCL      1292<>CALL     1306>>ASSIGN
BUFFA
      1248**DCL      1280>>CALLBLT  1306<<ASSIGN
BUFFF
      1246**DCL      1280<<CALLBLT  1282--ASSIGN   1296--ASSIGN   1306>>ASSIGN
BUFSZ
      1249**DCL      1279<<ASSIGN   1283>>ASSIGN   1294<<ASSIGN   1297>>ASSIGN   1304<<ASSIGN   1305>>IF
      1305>>ASSIGN
B_SCDCTX
      1182**DCL      1288>>ASSIGN   1302>>ASSIGN
FPT$TEMPWROC_V.ARS
      1188**DCL      1307<<ASSIGN
FPT$TEMPWROC_V.TYC
      1188**DCL      1308<<ASSIGN
FPTCODE
        23**DCL        22--PROC     1273>>DOCASE
HFF$DSIZ
        29**DCL-ENT  1277--CALL     1292--CALL
HFF$NILERASE
PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:25   
        28**DCL-ENT  1275--CALL     1291--CALL
N$REQ
      1088**DCL      1289<>CALL     1303<>CALL
N$REQ.ARSIZE
      1121**DCL      1304>>ASSIGN
N$REQ.BUF$
      1097**DCL      1282<<ASSIGN   1296<<ASSIGN
N$REQ.BUFADDR
      1097**DCL      1098--REDEF    1098--REDEF
N$REQ.BUFSIZE
      1091**DCL      1283<<ASSIGN   1297<<ASSIGN
N$REQ.DCB$
      1119**DCL      1286<<ASSIGN   1298<<ASSIGN
N$REQ.DLA.DCTX
      1088**DCL      1288<<ASSIGN   1302<<ASSIGN
N$REQ.DLA.DRELADDR
      1089**DCL      1089--REDEF
N$REQ.DVE.EOMCHAR
      1126**DCL      1127--REDEF
N$REQ.EAINFO
      1120**DCL      1120--REDEF
N$REQ.EAINFOX
      1120**DCL      1121--REDEF
N$REQ.EVNTINFO
      1121**DCL      1121--REDEF
N$REQ.FC
      1091**DCL      1284<<ASSIGN   1299<<ASSIGN
N$REQ.OPFLG
      1094**DCL      1285<<ASSIGN   1301<<ASSIGN
N$REQ.RCT
      1123**DCL      1287<<ASSIGN   1300<<ASSIGN
N$REQ.STATUS
      1102**DCL      1108--REDEF
N$REQ.TYC
      1110**DCL      1308>>ASSIGN
NIO$QUE
PL6.E3A0      #001=OTW$PMME File=OTW$PMME.:E05TSI                                WED 07/30/97 04:14 Page:26   
        26**DCL-ENT  1289--CALL     1303--CALL
NIQ$GET
        25**DCL-ENT  1281--CALL     1295--CALL
NIQ$REL
        27**DCL-ENT  1309--CALL
NOREAD
      1311**LABEL    1291--CALLALT
NOWRITE
      1291**LABEL    1275--CALLALT
NULL3
      1250**DCL      1251--REDEF
NULLS
      1251**DCL      1280>>CALLBLT
OCI_BOOT
      1201**DCL      1259>>IF
OTW_ERR
      1252**DCL      1268>>ASSIGN
Q$
      1245**DCL      1281<>CALL     1282>>ASSIGN   1283>>ASSIGN   1284>>ASSIGN   1285>>ASSIGN   1286>>ASSIGN
      1287>>ASSIGN   1288>>ASSIGN   1289>>CALL     1295<>CALL     1296>>ASSIGN   1297>>ASSIGN   1298>>ASSIGN
      1299>>ASSIGN   1300>>ASSIGN   1301>>ASSIGN   1302>>ASSIGN   1303>>CALL     1304>>ASSIGN   1308>>ASSIGN
      1309<>CALL
UBUFSZ
      1247**DCL      1248--IMP-SIZ  1277<>CALL     1278>>IF       1278<<ASSIGN   1279>>ASSIGN   1280>>CALLBLT
      1283>>ASSIGN   1292<>CALL     1293>>IF       1293<<ASSIGN   1294>>ASSIGN   1297>>ASSIGN   1305>>IF
      1305<<ASSIGN   1306>>ASSIGN   1307>>ASSIGN
