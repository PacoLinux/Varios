VERSION E05

PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:1    
        1        1        /*M* DBD$FMT_G  Formats FEP tables belonging to FCG G        */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* PLM=3,IND=5,ENU=0,ECU=0   */
        8        8
        9        9        /*F*      NAME: DBD$FMT_G
       10       10                  PURPOSE: Contains the following FEP structure formatting routines:
       11       11                                DBD$SFILE
       12       12                                DBD$ACC_RES
       13       13                                DBD$USRT
       14       14                                DBD$INTCON
       15       15                                DBD$PPUT
       16       16                                DBD$FEPMAP
       17       17        */
       18       18
       19       19        /*F*    NAME: DBD$SFILE
       20       20                PURPOSE: To process the SFILE command for FEPs.
       21       21
       22       22        */
       23       23        DBD$SFILE: PROC(TOP);
       24       24
       25       25        /*X* PLM=3,IND=5,ECU=0,ENU=0   */
       26       26
       27       27        %INCLUDE CP_6;
       28     5586        %INCLUDE G$BOBCAT_M;
       29     5606        %INCLUDE G_SFILE_M;
       30     5666        %INCLUDE GJ_MACROS_M;
       31     6139        %INCLUDE DA_FORMAT_C;
       32     6381        %INCLUDE DB_ANLZ_M;
       33     6548        %INCLUDE XU_MACRO_C;
       34     9654
       35     9655        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS=AUTO);
       36     9668        %G$SFILE (FPTN=G$SFILE,STCLASS=AUTO,ARRAYED=NO);
       37     9705        %GJ_SFILE_TBL (FPTN=GJ$SFDATA, TYPE=STRUCTURE, STCLASS=AUTO);
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:2    
       38     9798
       39     9799        %PARSE$OUT (NAME=TOP,STCLASS=PARAM);
       40     9844        %PARSE$OUT (NAME=OUT,STCLASS=BASED);
       41     9889
       42     9890    1   DCL DAA$VALUE ENTRY(3) ALTRET;
       43     9891    1   DCL DAF$WRITE EPTR SYMREF;
       44     9892    1   DCL DAF$INIT ENTRY(1) ALTRET;
       45     9893    1   DCL DBD$FEPMAP_ERR ENTRY(1);
       46     9894    1   DCL DBM$GETMEM ENTRY(10) ALTRET;
       47     9895    1   DCL DBM$GETBOBCAT ENTRY(1) ALTRET;
       48     9896    1   DCL DBM$PACK1 ENTRY(2);
       49     9897    1   DCL DBM$PACK2 ENTRY(2);
       50     9898    1   DCL DBM$PACK4 ENTRY(2);
       51     9899
       52     9900    1   DCL DBD$FEPMAP$ PTR SYMREF;
       53     9901
       54     9902    1   DCL SFD_FMT1 CHAR(0) CONSTANT INIT(
       55     9903    1   'SFILE Entires: current used: %@4.16D   peak used: %@4.16D   max entries: %@4.16D');
       56     9904
       57     9905    1   DCL SFD_FMT2 CHAR(0) CONSTANT INIT(
       58     9906    1   'SFILE Data   : current pgs : %@4.16D   peak pgs : %@4.16D   max data pg: %@4.16D');
       59     9907
       60     9908    1   DCL SFD_FMT3 CHAR(0) CONSTANT INIT(
       61     9909    1   'SFILE Proc   : current pgs : %@4.16D   peak pgs : %@4.16D');
       62     9910
       63     9911    1   DCL SFD_FMT4 CHAR(0) CONSTANT INIT(
       64     9912    1   'Releases for memory: %@5.16D   Releases for entry: %@5.16D   Table full: %@5.16D');
       65     9913
       66     9914        %REPORT (NAME=SFILERPT1,TRUNC=YES,TABDFLT=5,HEADER=YES,TITLE=
              9914            'FEP SFILE - Shared File Table');
       67     9980        %HEADER (LAST=NO,TEXT=
       68     9981        ' #  File Identification              Flags Modtime     Instime     UC  FRQ');
       69    10023        %HEADER (TEXT=
       70    10024        '--- -------------------------------- ----- ----------- ----------- --- ---');
       71    10066    1   DCL 1 SFILE_FMT1 CHAR(0) CONSTANT INIT(
       72    10067    1   '%3D %T%S.%A %37- .%4ZH %11..11.2U %11..11.2U %3D %3D');
       73    10068
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:3    
       74    10069
       75    10070    1   DCL BLANK_LINE CHAR(4) SYMREF;
       76    10071    1   DCL SFILERPT2 CHAR(0) CONSTANT INIT(
       77    10072    1   ' #  PGs ROS DATA  PROC  PP# ROS   SEG1  SEG2  SEG3  SEG4  SEG5  SEG6  SEG7 ');
       78    10073    1   DCL SFILERPT3 CHAR(0) CONSTANT INIT(
       79    10074    1   '---     --- ----- -----     ----- ----- ----- ----- ----- ----- ----- -----');
       80    10075    1   DCL 1 SFILE_FMT2 CHAR(0) CONSTANT INIT(
       81    10076    1   '%3D    .%3ZH .%4ZH .%4ZH     .%4ZH .%4ZH .%4ZH .%4ZH .%4ZH .%4ZH .%4ZH .%4ZH');
       82    10077
       83    10078
       84    10079                                                /* BASED Structures                   */
       85    10080        %LIST;
       86    10081        %B$FEPMAP;
             10082    1   DCL 1 B$FEPMAP(0:0) BASED ALIGNED,
             10083    1         2 TYP UBIN BYTE CALIGNED,
             10084                                                /* 1=HHJIT   2=SFILE      3=USER      */
             10085    1         2 WHAT# UBIN BYTE CALIGNED,
             10086                                                /* INTLEVL   SFILE#       USER#       */
             10087    1         2 INDX# UBIN BYTE CALIGNED,
             10088                                                /* USR#      SFILE.SEG#   ASDT_INDX   */
             10089    1         2 SIZE UBIN BYTE CALIGNED;
             10090                                                /* # of pages #                       */
             10091        %EQU DBD_MAPTYP_HHJIT#=1;
             10092        %EQU DBD_MAPTYP_SFILE#=2;
             10093        %EQU DBD_MAPTYP_USER#=3;
       87    10095        %PLIST;
       88    10096
       89    10097    1   DCL B$SEGS(0:7) UBIN BASED;
       90    10098                                                /* AUTO Storage                       */
       91    10099    1   DCL MAP_ERR UBIN;
       92    10100    1   DCL MAP_PG# UBIN;
       93    10101    1   DCL MAP_SIZE UBIN;
       94    10102    1   DCL THIS_SIZE UBIN;
       95    10103    1   DCL PP_SEG$ PTR;
       96    10104    1   DCL PASS UBIN;                          /*which line to print*/
       97    10105    1   DCL I UBIN;
       98    10106    1   DCL J UBIN;
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:4    
       99    10107    1   DCL X UBIN;
      100    10108    1   DCL RADIX UBIN;
      101    10109    1   DCL SFILE# UBIN;
      102    10110    1   DCL THIS_SFILE# UBIN;
      103    10111    1   DCL SFILE$ UBIN;
      104    10112    1   DCL THIS_SFILE$ UBIN;
      105    10113    1   DCL SFILE_SIZE UBIN;                    /*G$SFILE L6 word size                */
      106    10114
      107    10115        /* G$SFILE data is packed into auto */
      108    10116    1   DCL FLAGS UBIN;
      109    10117    1   DCL MODTIME UBIN;
      110    10118    1   DCL INSTIME UBIN;
      111    10119    1   DCL UC UBIN;
      112    10120    1   DCL FRQ UBIN;
      113    10121    1   DCL ROS# UBIN;
      114    10122    1   DCL DATA# UBIN;
      115    10123    1   DCL PROC# UBIN;
      116    10124    1   DCL ROS_PG UBIN;
      117    10125    1   DCL SEG1_PG UBIN;
      118    10126    1   DCL SEG2_PG UBIN;
      119    10127    1   DCL SEG3_PG UBIN;
      120    10128    1   DCL SEG4_PG UBIN;
      121    10129    1   DCL SEG5_PG UBIN;
      122    10130    1   DCL SEG6_PG UBIN;
      123    10131    1   DCL SEG7_PG UBIN;
      124    10132    1   DCL SEG_1_DATA UBIN;
      125    10133    1   DCL SEG_1_PROC UBIN;
      126    10134    1   DCL SEG_NXT_DATA UBIN;
      127    10135
      128    10136        %EJECT;
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:5    
      129    10137
      130    10138    1      SFILE_SIZE = (SIZEC(G$SFILE)+1) / 2;
      131    10139    1      CALL DBM$GETBOBCAT(G$BOBCAT)
      132    10140    2      WHENALTRETURN DO; RETURN; END;
      133    10141    1      CALL DBM$PACK4(G$BOBCAT.SFILE$,SFILE$);
      134    10142    1      CALL DBM$PACK2(G$BOBCAT.SFILE#,SFILE#);
      135    10143
      136    10144    2      DO PASS=0 TO 1;
      137    10145    2           IF DBD$FEPMAP$ = ADDR(NIL)
      138    10146    3           THEN DO;
      139    10147    3                IF PASS=0
      140    10148    3                THEN CALL DAF$INIT(SFILERPT1);
      141    10149    4                ELSE DO;
      142    10150    4                     CALL DAF$WRITE(VECTOR(BLANK_LINE));
      143    10151    4                     CALL DAF$WRITE(VECTOR(BLANK_LINE));
      144    10152    4                     CALL DAF$WRITE(VECTOR(SFILERPT2));
      145    10153    4                     CALL DAF$WRITE(VECTOR(SFILERPT3));
      146    10154    4                     END;
      147    10155    3                END/*do if not mapping*/;
      148    10156
      149    10157    2           ELSE GOTO SFILE_LOOP;
      150    10158
      151    10159    2           IF TOP.NSUBLKS=0
      152    10160    3           THEN DO;
      153    10161    3   SFILE_LOOP:  ;
      154    10162    4                DO I=1 TO SFILE#;
      155    10163    4                     CALL DISP_SFILE;
      156    10164    4                     END;
      157    10165    3                END;
      158    10166
      159    10167    3           ELSE DO;                        /*display a single sfile entry*/
      160    10168    4                DO X=0 TO TOP.NSUBLKS-1;
      161    10169    4                     CALL DAA$VALUE(TOP.SUBLK$(X)->OUT,I,RADIX);
      162    10170    4                     IF (I > 0) AND (I <= SFILE#)
      163    10171    4                     THEN CALL DISP_SFILE;
      164    10172    4                     END;
      165    10173    3                END;
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:6    
      166    10174
      167    10175    2           END/*do pass=0 to 1*/;
      168    10176    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));
      169    10177    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));
      170    10178    1      RETURN;
      171    10179        %EJECT;
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:7    
      172    10180
      173    10181    1   DISP_SFILE: PROC;
      174    10182    2      THIS_SFILE$ = SFILE$ + (SFILE_SIZE *I);
      175    10183    2      CALL DBM$GETMEM(THIS_SFILE$,G$SFILE,0,SIZEC(G$SFILE),,SIZEC(G$SFILE));
      176    10184
      177    10185    2      CALL DBM$PACK4(G$SFILE.INSTTIME,INSTIME);
      178    10186    2      IF INSTIME = 0 THEN RETURN;
      179    10187
      180    10188    2      IF PASS = 0
      181    10189    3      THEN DO;
      182    10190    3           IF DBD$FEPMAP$ = ADDR(NIL)
      183    10191    4           THEN DO;
      184    10192    4                CALL DBM$PACK2(G$SFILE.RU_FLGS,FLAGS);
      185    10193    4                CALL DBM$PACK4(G$SFILE.MODTIME,MODTIME);
      186    10194    4                CALL DBM$PACK1(G$SFILE.UC,UC);
      187    10195    4                CALL DBM$PACK1(G$SFILE.FRQ,FRQ);
      188    10196    4                CALL DAF$WRITE(VECTOR(SFILE_FMT1),
      189    10197    4                  VECTOR(I),
      190    10198    4                  VECTOR(G$SFILE.NAME),
      191    10199    4                  VECTOR(G$SFILE.ACCT),
      192    10200    4                  VECTOR(FLAGS),
      193    10201    4                  VECTOR(MODTIME),
      194    10202    4                  VECTOR(INSTIME),
      195    10203    4                  VECTOR(UC),
      196    10204    4                  VECTOR(FRQ));
      197    10205    4                END/*do if not MAP*/;
      198    10206    3           END/*pass 0*/;
      199    10207
      200    10208    3      ELSE DO;
      201    10209    3           CALL DBM$PACK1(G$SFILE.PGSZ_ROS,ROS#);
      202    10210    3           CALL DBM$PACK2(G$SFILE.PGSZ_DATA,DATA#);
      203    10211    3           CALL DBM$PACK2(G$SFILE.PGSZ_PROC,PROC#);
      204    10212    3           CALL DBM$PACK2(G$SFILE.PP_ROS,ROS_PG);
      205    10213    3           CALL DBM$PACK2(G$SFILE.PP_SEG1,SEG1_PG);
      206    10214    3           CALL DBM$PACK2(G$SFILE.PP_SEG2,SEG2_PG);
      207    10215    3           CALL DBM$PACK2(G$SFILE.PP_SEG3,SEG3_PG);
      208    10216    3           CALL DBM$PACK2(G$SFILE.PP_SEG4,SEG4_PG);
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:8    
      209    10217    3           CALL DBM$PACK2(G$SFILE.PP_SEG5,SEG5_PG);
      210    10218    3           CALL DBM$PACK2(G$SFILE.PP_SEG6,SEG6_PG);
      211    10219    3           CALL DBM$PACK2(G$SFILE.PP_SEG7,SEG7_PG);
      212    10220    3           CALL DBM$PACK2(G$SFILE.SEG_1ST_DATA,SEG_1_DATA);
      213    10221    3           CALL DBM$PACK2(G$SFILE.SEG_1ST_PROC,SEG_1_PROC);
      214    10222
      215    10223    3           IF DBD$FEPMAP$ = ADDR(NIL)
      216    10224    4           THEN DO;
      217    10225    4                CALL DAF$WRITE(VECTOR(SFILE_FMT2),
      218    10226    4                  VECTOR(I),
      219    10227    4                  VECTOR(ROS#),
      220    10228    4                  VECTOR(DATA#),
      221    10229    4                  VECTOR(PROC#),
      222    10230    4                  VECTOR(ROS_PG),
      223    10231    4                  VECTOR(SEG1_PG),
      224    10232    4                  VECTOR(SEG2_PG),
      225    10233    4                  VECTOR(SEG3_PG),
      226    10234    4                  VECTOR(SEG4_PG),
      227    10235    4                  VECTOR(SEG5_PG),
      228    10236    4                  VECTOR(SEG6_PG),
      229    10237    4                  VECTOR(SEG7_PG));
      230    10238    4                END;
      231    10239
      232    10240    4           ELSE DO;
      233    10241    4                PP_SEG$ = ADDR(ROS_PG);
      234    10242    4                IF ROS# ~= 0
      235    10243    5                THEN DO;
      236    10244    5                     J=7;                  /*index for g_sfile_seg*/
      237    10245    5                     THIS_SIZE = ROS#;
      238    10246    5                     MAP_PG# = ROS_PG;
      239    10247    5                     CALL SET_MAP2;
      240    10248    5                     END/*if ros# ~ 0*/;
      241    10249
      242    10250    4                PP_SEG$ = ADDR(SEG1_PG);
      243    10251    4                IF DATA# ~= 0
      244    10252    5                THEN DO;
      245    10253    5                     IF G$SFILE.RU_FLGS.LIB
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:9    
      246    10254    6                     THEN DO;
      247    10255    6                          THIS_SIZE = DATA#;
      248    10256    6                          SEG_NXT_DATA = SEG_1_DATA;
      249    10257    6                          END;
      250    10258
      251    10259    6                     ELSE DO;
      252    10260    6                          CALL DBM$PACK2(G$SFILE.USR_DATA.PGSZ_DATA1,THIS_SIZE);
      253    10261    6                          J = SEG_1_DATA;
      254    10262    6                          CALL SET_MAP;
      255    10263    6                          THIS_SIZE = DATA# - THIS_SIZE/*whats remaining*/;
      256    10264    6                          SEG_NXT_DATA = SEG_1_DATA+1;
      257    10265    6                          END;
      258    10266
      259    10267    6                     DO J=SEG_NXT_DATA TO SEG_1_PROC-1;
      260    10268    6                          CALL SET_MAP;
      261    10269    6                          END;
      262    10270    5                     END/*if data# ~0*/;
      263    10271
      264    10272    4                IF PROC# ~= 0
      265    10273    5                THEN DO;
      266    10274    5                     THIS_SIZE = PROC#;
      267    10275
      268    10276    6                     DO J=SEG_1_PROC TO 6;
      269    10277    6                          CALL SET_MAP;
      270    10278    6                          END;
      271    10279    5                     END/*if proc# ~0*/;
      272    10280    4                END/*do if map command*/;
      273    10281    3           END;
      274    10282    2   END DISP_SFILE;
      275    10283
      276    10284        %EJECT;
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:10   
      277    10285    1   SET_MAP: PROC;
      278    10286    2      MAP_PG# = PP_SEG$->B$SEGS(J);
      279    10287
      280    10288    2   SET_MAP2: ENTRY;
      281    10289    2      IF THIS_SIZE > 256
      282    10290    2      THEN MAP_SIZE = 256;
      283    10291    2      ELSE MAP_SIZE = THIS_SIZE;
      284    10292
      285    10293    2      IF MAP_SIZE ~= 0
      286    10294    3      THEN DO;
      287    10295    3           MAP_ERR = 0;
      288    10296    3           IF DBD$FEPMAP$->B$FEPMAP(MAP_PG#) ~= '0'B
      289    10297    4           THEN DO;
      290    10298    4                CALL DBD$FEPMAP_ERR(MAP_PG#);
      291    10299    4                MAP_ERR = 1;
      292    10300    4                END;
      293    10301
      294    10302    3           DBD$FEPMAP$->B$FEPMAP.TYP(MAP_PG#) = %DBD_MAPTYP_SFILE#;
      295    10303    3           DBD$FEPMAP$->B$FEPMAP.WHAT#(MAP_PG#) = I;
      296    10304    3           DBD$FEPMAP$->B$FEPMAP.INDX#(MAP_PG#) = J;
      297    10305    3           DBD$FEPMAP$->B$FEPMAP.SIZE(MAP_PG#) = MAP_SIZE;
      298    10306
      299    10307    3           IF MAP_ERR ~= 0
      300    10308    4           THEN DO;
      301    10309    4                CALL DBD$FEPMAP_ERR(MAP_PG#);
      302    10310    4                END;
      303    10311    3           END;
      304    10312
      305    10313    2      THIS_SIZE = THIS_SIZE - MAP_SIZE;
      306    10314
      307    10315    2      RETURN;
      308    10316    2   END SET_MAP;
      309    10317        %EJECT;
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:11   
      310    10318
      311    10319    1   DBD$SFILE_DATA: ENTRY(TOP);
      312    10320
      313    10321    1      CALL DBM$GETBOBCAT(G$BOBCAT)
      314    10322    2      WHENALTRETURN DO; RETURN; END;
      315    10323    1      CALL DBM$PACK4(G$BOBCAT.SFDATA$,SFILE$);
      316    10324
      317    10325    1      CALL DBM$GETMEM(SFILE$,GJ$SFDATA,0,SIZEC(GJ$SFDATA),,SIZEC(GJ$SFDATA));
      318    10326    1      CALL DAF$WRITE(VECTOR(SFD_FMT1),
      319    10327    1        VECTOR(GJ$SFDATA.CURR#),
      320    10328    1        VECTOR(GJ$SFDATA.PEAK#),
      321    10329    1        VECTOR(GJ$SFDATA.MAX#));
      322    10330
      323    10331    1      CALL DAF$WRITE(VECTOR(SFD_FMT2),
      324    10332    1        VECTOR(GJ$SFDATA.CUR_DATA),
      325    10333    1        VECTOR(GJ$SFDATA.PEAK_DATA),
      326    10334    1        VECTOR(GJ$SFDATA.MAX_DATA));
      327    10335
      328    10336    1      CALL DAF$WRITE(VECTOR(SFD_FMT3),
      329    10337    1        VECTOR(GJ$SFDATA.CUR_PROC),
      330    10338    1        VECTOR(GJ$SFDATA.PEAK_PROC));
      331    10339
      332    10340    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));
      333    10341    1      CALL DAF$WRITE(VECTOR(SFD_FMT4),
      334    10342    1        VECTOR(GJ$SFDATA.REL_4MEM),
      335    10343    1        VECTOR(GJ$SFDATA.REL_4SFILE),
      336    10344    1        VECTOR(GJ$SFDATA.TBL_FULL));
      337    10345
      338    10346    1      RETURN;
      339    10347    1   END DBD$SFILE;
      340    10348        %EOD;

PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:12   
--  Include file information  --

   XU_MACRO_C.:E05TOU  is referenced.
   DB_ANLZ_M.:E05TOU  is referenced.
   DA_FORMAT_C.:E05TOU  is referenced.
   GJ_MACROS_M.:E05TOU  is referenced.
   G_SFILE_M.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBD$SFILE.

   Procedure DBD$SFILE requires 816 words for executable code.
   Procedure DBD$SFILE requires 214 words of local(AUTO) storage.

PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:13   

 Object Unit name= DBD$SFILE                                  File name= DBD$FMT_G.:E05TOU
 UTS= JUL 29 '97 13:02:20.76 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1  RoData even  UTS    145    221  DBD$SFILE
    2   Data  even  none    62     76  DBD$SFILE
    3   Proc  even  none   816   1460  DBD$SFILE
    4  RoData even  none    60     74  DBD$SFILE

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes            yes      Std        1  DBD$SFILE
     3   1214                  yes      Std        1  DBD$SFILE_DATA
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:14   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       1 DBM$GETBOBCAT
         yes           Std       2 DBM$PACK4
         yes           Std       2 DBM$PACK2
 yes     yes           Std      10 DBM$GETMEM
 yes     yes           Std       1 DAF$INIT
 yes     yes           Std       3 DAA$VALUE
         yes           Std       2 DBM$PACK1
         yes           Std       1 DBD$FEPMAP_ERR
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  DAF$WRITE                             DBD$FEPMAP$
     BLANK_LINE                            B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:15   


        1        1        /*M* DBD$FMT_G  Formats FEP tables belonging to FCG G        */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* PLM=3,IND=5,ENU=0,ECU=0   */
        8        8
        9        9        /*F*      NAME: DBD$FMT_G
       10       10                  PURPOSE: Contains the following FEP structure formatting routines:
       11       11                                DBD$SFILE
       12       12                                DBD$ACC_RES
       13       13                                DBD$USRT
       14       14                                DBD$INTCON
       15       15                                DBD$PPUT
       16       16                                DBD$FEPMAP
       17       17        */
       18       18
       19       19        /*F*    NAME: DBD$SFILE
       20       20                PURPOSE: To process the SFILE command for FEPs.
       21       21
       22       22        */
       23       23        DBD$SFILE: PROC(TOP);

     23  3 000000   000000 700200 xent  DBD$SFILE    TSX0  ! X66_AUTO_1
         3 000001   000326 000001                    ZERO    214,1

       24       24
       25       25        /*X* PLM=3,IND=5,ECU=0,ENU=0   */
       26       26
       27       27        %INCLUDE CP_6;
       28     5586        %INCLUDE G$BOBCAT_M;
       29     5606        %INCLUDE G_SFILE_M;
       30     5666        %INCLUDE GJ_MACROS_M;
       31     6139        %INCLUDE DA_FORMAT_C;
       32     6381        %INCLUDE DB_ANLZ_M;
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:16   
       33     6548        %INCLUDE XU_MACRO_C;
       34     9654
       35     9655        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS=AUTO);
       36     9668        %G$SFILE (FPTN=G$SFILE,STCLASS=AUTO,ARRAYED=NO);
       37     9705        %GJ_SFILE_TBL (FPTN=GJ$SFDATA, TYPE=STRUCTURE, STCLASS=AUTO);
       38     9798
       39     9799        %PARSE$OUT (NAME=TOP,STCLASS=PARAM);
       40     9844        %PARSE$OUT (NAME=OUT,STCLASS=BASED);
       41     9889
       42     9890    1   DCL DAA$VALUE ENTRY(3) ALTRET;
       43     9891    1   DCL DAF$WRITE EPTR SYMREF;
       44     9892    1   DCL DAF$INIT ENTRY(1) ALTRET;
       45     9893    1   DCL DBD$FEPMAP_ERR ENTRY(1);
       46     9894    1   DCL DBM$GETMEM ENTRY(10) ALTRET;
       47     9895    1   DCL DBM$GETBOBCAT ENTRY(1) ALTRET;
       48     9896    1   DCL DBM$PACK1 ENTRY(2);
       49     9897    1   DCL DBM$PACK2 ENTRY(2);
       50     9898    1   DCL DBM$PACK4 ENTRY(2);
       51     9899
       52     9900    1   DCL DBD$FEPMAP$ PTR SYMREF;
       53     9901
       54     9902    1   DCL SFD_FMT1 CHAR(0) CONSTANT INIT(
       55     9903    1   'SFILE Entires: current used: %@4.16D   peak used: %@4.16D  max entries: %@4.16D');
       56     9904
       57     9905    1   DCL SFD_FMT2 CHAR(0) CONSTANT INIT(
       58     9906    1   'SFILE Data   : current pgs : %@4.16D   peak pgs : %@4.16D  max data pg: %@4.16D');
       59     9907
       60     9908    1   DCL SFD_FMT3 CHAR(0) CONSTANT INIT(
       61     9909    1   'SFILE Proc   : current pgs : %@4.16D   peak pgs : %@4.16D');
       62     9910
       63     9911    1   DCL SFD_FMT4 CHAR(0) CONSTANT INIT(
       64     9912    1   'Releases for memory: %@5.16D   Releases for entry: %@5.16D  Table full: %@5.16D');
       65     9913
       66     9914        %REPORT (NAME=SFILERPT1,TRUNC=YES,TABDFLT=5,HEADER=YES,TITLE=
              9914            'FEP SFILE - Shared File Table');
       67     9980        %HEADER (LAST=NO,TEXT=
       68     9981        ' #  File Identification              Flags Modtime     Instime     UC  FRQ');
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:17   
       69    10023        %HEADER (TEXT=
       70    10024        '--- -------------------------------- ----- ----------- ----------- --- ---');
       71    10066    1   DCL 1 SFILE_FMT1 CHAR(0) CONSTANT INIT(
       72    10067    1   '%3D %T%S.%A %37- .%4ZH %11..11.2U %11..11.2U %3D %3D');
       73    10068
       74    10069
       75    10070    1   DCL BLANK_LINE CHAR(4) SYMREF;
       76    10071    1   DCL SFILERPT2 CHAR(0) CONSTANT INIT(
       77    10072    1   ' #  PGs ROS DATA  PROC  PP# ROS   SEG1  SEG2  SEG3  SEG4  SEG5  SEG6  SEG7 ');
       78    10073    1   DCL SFILERPT3 CHAR(0) CONSTANT INIT(
       79    10074    1   '---     --- ----- -----     ----- ----- ----- ----- ----- ----- ----- -----');
       80    10075    1   DCL 1 SFILE_FMT2 CHAR(0) CONSTANT INIT(
       81    10076    1   '%3D    .%3ZH .%4ZH .%4ZH     .%4ZH .%4ZH .%4ZH .%4ZH .%4ZH .%4ZH .%4ZH .%4ZH');
       82    10077
       83    10078
       84    10079                                                /* BASED Structures                   */
       85    10080        %LIST;
       86    10081        %B$FEPMAP;
             10082    1   DCL 1 B$FEPMAP(0:0) BASED ALIGNED,
             10083    1         2 TYP UBIN BYTE CALIGNED,
             10084                                                /* 1=HHJIT   2=SFILE      3=USER      */
             10085    1         2 WHAT# UBIN BYTE CALIGNED,
             10086                                                /* INTLEVL   SFILE#       USER#       */
             10087    1         2 INDX# UBIN BYTE CALIGNED,
             10088                                                /* USR#      SFILE.SEG#   ASDT_INDX   */
             10089    1         2 SIZE UBIN BYTE CALIGNED;
             10090                                                /* # of pages #                       */
             10091        %EQU DBD_MAPTYP_HHJIT#=1;
             10092        %EQU DBD_MAPTYP_SFILE#=2;
             10093        %EQU DBD_MAPTYP_USER#=3;
       87    10095        %PLIST;
       88    10096
       89    10097    1   DCL B$SEGS(0:7) UBIN BASED;
       90    10098                                                /* AUTO Storage                       */
       91    10099    1   DCL MAP_ERR UBIN;
       92    10100    1   DCL MAP_PG# UBIN;
       93    10101    1   DCL MAP_SIZE UBIN;
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:18   
       94    10102    1   DCL THIS_SIZE UBIN;
       95    10103    1   DCL PP_SEG$ PTR;
       96    10104    1   DCL PASS UBIN;                          /*which line to print*/
       97    10105    1   DCL I UBIN;
       98    10106    1   DCL J UBIN;
       99    10107    1   DCL X UBIN;
      100    10108    1   DCL RADIX UBIN;
      101    10109    1   DCL SFILE# UBIN;
      102    10110    1   DCL THIS_SFILE# UBIN;
      103    10111    1   DCL SFILE$ UBIN;
      104    10112    1   DCL THIS_SFILE$ UBIN;
      105    10113    1   DCL SFILE_SIZE UBIN;                    /*G$SFILE L6 word size                */
      106    10114
      107    10115        /* G$SFILE data is packed into auto */
      108    10116    1   DCL FLAGS UBIN;
      109    10117    1   DCL MODTIME UBIN;
      110    10118    1   DCL INSTIME UBIN;
      111    10119    1   DCL UC UBIN;
      112    10120    1   DCL FRQ UBIN;
      113    10121    1   DCL ROS# UBIN;
      114    10122    1   DCL DATA# UBIN;
      115    10123    1   DCL PROC# UBIN;
      116    10124    1   DCL ROS_PG UBIN;
      117    10125    1   DCL SEG1_PG UBIN;
      118    10126    1   DCL SEG2_PG UBIN;
      119    10127    1   DCL SEG3_PG UBIN;
      120    10128    1   DCL SEG4_PG UBIN;
      121    10129    1   DCL SEG5_PG UBIN;
      122    10130    1   DCL SEG6_PG UBIN;
      123    10131    1   DCL SEG7_PG UBIN;
      124    10132    1   DCL SEG_1_DATA UBIN;
      125    10133    1   DCL SEG_1_PROC UBIN;
      126    10134    1   DCL SEG_NXT_DATA UBIN;
      127    10135
      128    10136        %EJECT;
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:19   
      129    10137
      130    10138    1      SFILE_SIZE = (SIZEC(G$SFILE)+1) / 2;

  10138  3 000002   000060 235007                    LDA     48,DL
         3 000003   200147 755100                    STA     SFILE_SIZE,,AUTO

      131    10139    1      CALL DBM$GETBOBCAT(G$BOBCAT)

  10139  3 000004   200004 630500                    EPPR0   G$BOBCAT,,AUTO
         3 000005   200200 450500                    STP0    SEG_NXT_DATA+6,,AUTO
         3 000006   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000007   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000010   000000 701000 xent               TSX1    DBM$GETBOBCAT
         3 000011   000013 702000 3                  TSX2    s:10140
         3 000012   000014 710000 3                  TRA     s:10141

      132    10140    2      WHENALTRETURN DO; RETURN; END;

  10140  3 000013   000000 702200 xent               TSX2  ! X66_ARET

      133    10141    1      CALL DBM$PACK4(G$BOBCAT.SFILE$,SFILE$);

  10141  3 000014   200145 630500                    EPPR0   SFILE$,,AUTO
         3 000015   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000016   200023 631500                    EPPR1   G$BOBCAT+15,,AUTO
         3 000017   200200 451500                    STP1    SEG_NXT_DATA+6,,AUTO
         3 000020   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000021   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000022   000000 701000 xent               TSX1    DBM$PACK4
         3 000023   000000 011000                    NOP     0

      134    10142    1      CALL DBM$PACK2(G$BOBCAT.SFILE#,SFILE#);

  10142  3 000024   200143 630500                    EPPR0   SFILE#,,AUTO
         3 000025   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000026   200202 452500                    STP2    SEG_NXT_DATA+8,,AUTO
         3 000027   200202 236100                    LDQ     SEG_NXT_DATA+8,,AUTO
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:20   
         3 000030   000000 036000 4                  ADLQ    0
         3 000031   200200 756100                    STQ     SEG_NXT_DATA+6,,AUTO
         3 000032   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000033   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000034   000000 701000 xent               TSX1    DBM$PACK2
         3 000035   000000 011000                    NOP     0

      135    10143
      136    10144    2      DO PASS=0 TO 1;

  10144  3 000036   200136 450100                    STZ     PASS,,AUTO

      137    10145    2           IF DBD$FEPMAP$ = ADDR(NIL)

  10145  3 000037   000000 236000 xsym               LDQ     DBD$FEPMAP$
         3 000040   000001 116000 xsym               CMPQ    B_VECTNIL+1
         3 000041   000101 601000 3                  TNZ     SFILE_LOOP

      138    10146    3           THEN DO;

      139    10147    3                IF PASS=0

  10147  3 000042   200136 235100                    LDA     PASS,,AUTO
         3 000043   000051 601000 3                  TNZ     s:10150

      140    10148    3                THEN CALL DAF$INIT(SFILERPT1);

  10148  3 000044   000001 630400 4                  EPPR0   1
         3 000045   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000046   000000 701000 xent               TSX1    DAF$INIT
         3 000047   000000 011000                    NOP     0
         3 000050   000076 710000 3                  TRA     s:10159

      141    10149    4                ELSE DO;

      142    10150    4                     CALL DAF$WRITE(VECTOR(BLANK_LINE));

PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:21   
  10150  3 000051   000004 630400 4                  EPPR0   4
         3 000052   000000 220000 xsym               LDX0    DAF$WRITE
         3 000053   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000054   000000 701010                    TSX1    0,X0
         3 000055   000000 011000                    NOP     0

      143    10151    4                     CALL DAF$WRITE(VECTOR(BLANK_LINE));

  10151  3 000056   000004 630400 4                  EPPR0   4
         3 000057   000000 220000 xsym               LDX0    DAF$WRITE
         3 000060   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000061   000000 701010                    TSX1    0,X0
         3 000062   000000 011000                    NOP     0

      144    10152    4                     CALL DAF$WRITE(VECTOR(SFILERPT2));

  10152  3 000063   000010 630400 4                  EPPR0   8
         3 000064   000000 220000 xsym               LDX0    DAF$WRITE
         3 000065   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000066   000000 701010                    TSX1    0,X0
         3 000067   000000 011000                    NOP     0

      145    10153    4                     CALL DAF$WRITE(VECTOR(SFILERPT3));

  10153  3 000070   000014 630400 4                  EPPR0   12
         3 000071   000000 220000 xsym               LDX0    DAF$WRITE
         3 000072   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000073   000000 701010                    TSX1    0,X0
         3 000074   000000 011000                    NOP     0

      146    10154    4                     END;

      147    10155    3                END/*do if not mapping*/;

  10155  3 000075   000076 710000 3                  TRA     s:10159

      148    10156
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:22   
      149    10157    2           ELSE GOTO SFILE_LOOP;
      150    10158
      151    10159    2           IF TOP.NSUBLKS=0

  10159  3 000076   200003 470500                    LDP0    @TOP,,AUTO
         3 000077   000001 220100                    LDX0    1,,PR0
         3 000100   000115 601000 3                  TNZ     s:10168

      152    10160    3           THEN DO;

  10157  3 000101                       SFILE_LOOP   null
      153    10161    3   SFILE_LOOP:  ;
      154    10162    4                DO I=1 TO SFILE#;

  10162  3 000101   000001 235007                    LDA     1,DL
         3 000102   200137 755100                    STA     I,,AUTO
         3 000103   000111 710000 3                  TRA     s:10164+3

      155    10163    4                     CALL DISP_SFILE;

  10163  3 000104   000173 701000 3                  TSX1    DISP_SFILE
         3 000105   000000 011000                    NOP     0

      156    10164    4                     END;

  10164  3 000106   200137 235100                    LDA     I,,AUTO
         3 000107   000001 035007                    ADLA    1,DL
         3 000110   200137 755100                    STA     I,,AUTO
         3 000111   200143 236100                    LDQ     SFILE#,,AUTO
         3 000112   200137 116100                    CMPQ    I,,AUTO
         3 000113   000104 603000 3                  TRC     s:10163

      157    10165    3                END;

  10165  3 000114   000153 710000 3                  TRA     s:10175

      158    10166
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:23   
      159    10167    3           ELSE DO;                        /*display a single sfile entry*/

      160    10168    4                DO X=0 TO TOP.NSUBLKS-1;

  10168  3 000115   200141 450100                    STZ     X,,AUTO
         3 000116   000145 710000 3                  TRA     s:10172+3

      161    10169    4                     CALL DAA$VALUE(TOP.SUBLK$(X)->OUT,I,RADIX);

  10169  3 000117   200003 470500                    LDP0    @TOP,,AUTO
         3 000120   200141 720100                    LXL0    X,,AUTO
         3 000121   000003 471510                    LDP1    3,X0,PR0
         3 000122   200142 633500                    EPPR3   RADIX,,AUTO
         3 000123   200202 453500                    STP3    SEG_NXT_DATA+8,,AUTO
         3 000124   200137 634500                    EPPR4   I,,AUTO
         3 000125   200201 454500                    STP4    SEG_NXT_DATA+7,,AUTO
         3 000126   200200 451500                    STP1    SEG_NXT_DATA+6,,AUTO
         3 000127   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000130   000021 631400 xsym               EPPR1   B_VECTNIL+17
         3 000131   000000 701000 xent               TSX1    DAA$VALUE
         3 000132   000000 011000                    NOP     0

      162    10170    4                     IF (I > 0) AND (I <= SFILE#)

  10170  3 000133   200137 235100                    LDA     I,,AUTO
         3 000134   000142 600000 3                  TZE     s:10172
         3 000135   200143 236100                    LDQ     SFILE#,,AUTO
         3 000136   200137 116100                    CMPQ    I,,AUTO
         3 000137   000142 602000 3                  TNC     s:10172

      163    10171    4                     THEN CALL DISP_SFILE;

  10171  3 000140   000173 701000 3                  TSX1    DISP_SFILE
         3 000141   000000 011000                    NOP     0

      164    10172    4                     END;

PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:24   
  10172  3 000142   200141 235100                    LDA     X,,AUTO
         3 000143   000001 035007                    ADLA    1,DL
         3 000144   200141 755100                    STA     X,,AUTO
         3 000145   200003 470500                    LDP0    @TOP,,AUTO
         3 000146   000001 236100                    LDQ     1,,PR0
         3 000147   000022 772000                    QRL     18
         3 000150   200141 116100                    CMPQ    X,,AUTO
         3 000151   000153 600000 3                  TZE     s:10175
         3 000152   000117 603000 3                  TRC     s:10169

      165    10173    3                END;

      166    10174
      167    10175    2           END/*do pass=0 to 1*/;

  10175  3 000153   200136 235100                    LDA     PASS,,AUTO
         3 000154   000001 035007                    ADLA    1,DL
         3 000155   200136 755100                    STA     PASS,,AUTO
         3 000156   000002 115007                    CMPA    2,DL
         3 000157   000037 602000 3                  TNC     s:10145

      168    10176    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));

  10176  3 000160   000004 630400 4                  EPPR0   4
         3 000161   000000 220000 xsym               LDX0    DAF$WRITE
         3 000162   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000163   000000 701010                    TSX1    0,X0
         3 000164   000000 011000                    NOP     0

      169    10177    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));

  10177  3 000165   000004 630400 4                  EPPR0   4
         3 000166   000000 220000 xsym               LDX0    DAF$WRITE
         3 000167   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000170   000000 701010                    TSX1    0,X0
         3 000171   000000 011000                    NOP     0

PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:25   
      170    10178    1      RETURN;

  10178  3 000172   000000 702200 xent               TSX2  ! X66_ARET

      171    10179        %EJECT;
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:26   
      172    10180
      173    10181    1   DISP_SFILE: PROC;

  10181  3 000173   200174 741300       DISP_SFILE   STX1  ! SEG_NXT_DATA+2,,AUTO

      174    10182    2      THIS_SFILE$ = SFILE$ + (SFILE_SIZE *I);

  10182  3 000174   200147 236100                    LDQ     SFILE_SIZE,,AUTO
         3 000175   200137 402100                    MPY     I,,AUTO
         3 000176   200145 036100                    ADLQ    SFILE$,,AUTO
         3 000177   200146 756100                    STQ     THIS_SFILE$,,AUTO

      175    10183    2      CALL DBM$GETMEM(THIS_SFILE$,G$SFILE,0,SIZEC(G$SFILE),,SIZEC(G$SFILE));

  10183  3 000200   000016 236000 4                  LDQ     14
         3 000201   000001 235000 xsym               LDA     B_VECTNIL+1
         3 000202   200204 757100                    STAQ    SEG_NXT_DATA+10,,AUTO
         3 000203   000020 237000 4                  LDAQ    16
         3 000204   200202 757100                    STAQ    SEG_NXT_DATA+8,,AUTO
         3 000205   200071 630500                    EPPR0   G$SFILE,,AUTO
         3 000206   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000207   200146 631500                    EPPR1   THIS_SFILE$,,AUTO
         3 000210   200200 451500                    STP1    SEG_NXT_DATA+6,,AUTO
         3 000211   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000212   000024 631400 xsym               EPPR1   B_VECTNIL+20
         3 000213   000000 701000 xent               TSX1    DBM$GETMEM
         3 000214   000000 011000                    NOP     0

      176    10184
      177    10185    2      CALL DBM$PACK4(G$SFILE.INSTTIME,INSTIME);

  10185  3 000215   200152 630500                    EPPR0   INSTIME,,AUTO
         3 000216   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000217   200111 631500                    EPPR1   G$SFILE+16,,AUTO
         3 000220   200200 451500                    STP1    SEG_NXT_DATA+6,,AUTO
         3 000221   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000222   000020 631400 xsym               EPPR1   B_VECTNIL+16
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:27   
         3 000223   000000 701000 xent               TSX1    DBM$PACK4
         3 000224   000000 011000                    NOP     0

      178    10186    2      IF INSTIME = 0 THEN RETURN;

  10186  3 000225   200152 235100                    LDA     INSTIME,,AUTO
         3 000226   000231 601000 3                  TNZ     s:10188

  10186  3 000227   200174 221300                    LDX1  ! SEG_NXT_DATA+2,,AUTO
         3 000230   000001 702211                    TSX2  ! 1,X1

      179    10187
      180    10188    2      IF PASS = 0

  10188  3 000231   200136 236100                    LDQ     PASS,,AUTO
         3 000232   000426 601000 3                  TNZ     s:10209

      181    10189    3      THEN DO;

      182    10190    3           IF DBD$FEPMAP$ = ADDR(NIL)

  10190  3 000233   000000 236000 xsym               LDQ     DBD$FEPMAP$
         3 000234   000001 116000 xsym               CMPQ    B_VECTNIL+1
         3 000235   001106 601000 3                  TNZ     s:10282

      183    10191    4           THEN DO;

      184    10192    4                CALL DBM$PACK2(G$SFILE.RU_FLGS,FLAGS);

  10192  3 000236   200150 630500                    EPPR0   FLAGS,,AUTO
         3 000237   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000240   200202 452500                    STP2    SEG_NXT_DATA+8,,AUTO
         3 000241   200202 236100                    LDQ     SEG_NXT_DATA+8,,AUTO
         3 000242   000022 036000 4                  ADLQ    18
         3 000243   200200 756100                    STQ     SEG_NXT_DATA+6,,AUTO
         3 000244   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000245   000020 631400 xsym               EPPR1   B_VECTNIL+16
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:28   
         3 000246   000000 701000 xent               TSX1    DBM$PACK2
         3 000247   000000 011000                    NOP     0

      185    10193    4                CALL DBM$PACK4(G$SFILE.MODTIME,MODTIME);

  10193  3 000250   200151 630500                    EPPR0   MODTIME,,AUTO
         3 000251   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000252   200202 452500                    STP2    SEG_NXT_DATA+8,,AUTO
         3 000253   200202 236100                    LDQ     SEG_NXT_DATA+8,,AUTO
         3 000254   000023 036000 4                  ADLQ    19
         3 000255   200200 756100                    STQ     SEG_NXT_DATA+6,,AUTO
         3 000256   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000257   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000260   000000 701000 xent               TSX1    DBM$PACK4
         3 000261   000000 011000                    NOP     0

      186    10194    4                CALL DBM$PACK1(G$SFILE.UC,UC);

  10194  3 000262   200153 630500                    EPPR0   UC,,AUTO
         3 000263   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000264   200202 452500                    STP2    SEG_NXT_DATA+8,,AUTO
         3 000265   200202 236100                    LDQ     SEG_NXT_DATA+8,,AUTO
         3 000266   000024 036000 4                  ADLQ    20
         3 000267   200200 756100                    STQ     SEG_NXT_DATA+6,,AUTO
         3 000270   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000271   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000272   000000 701000 xent               TSX1    DBM$PACK1
         3 000273   000000 011000                    NOP     0

      187    10195    4                CALL DBM$PACK1(G$SFILE.FRQ,FRQ);

  10195  3 000274   200154 630500                    EPPR0   FRQ,,AUTO
         3 000275   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000276   200202 452500                    STP2    SEG_NXT_DATA+8,,AUTO
         3 000277   200202 236100                    LDQ     SEG_NXT_DATA+8,,AUTO
         3 000300   000025 036000 4                  ADLQ    21
         3 000301   200200 756100                    STQ     SEG_NXT_DATA+6,,AUTO
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:29   
         3 000302   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000303   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000304   000000 701000 xent               TSX1    DBM$PACK1
         3 000305   000000 011000                    NOP     0

      188    10196    4                CALL DAF$WRITE(VECTOR(SFILE_FMT1),
      189    10197    4                  VECTOR(I),
      190    10198    4                  VECTOR(G$SFILE.NAME),
      191    10199    4                  VECTOR(G$SFILE.ACCT),
      192    10200    4                  VECTOR(FLAGS),
      193    10201    4                  VECTOR(MODTIME),
      194    10202    4                  VECTOR(INSTIME),
      195    10203    4                  VECTOR(UC),
      196    10204    4                  VECTOR(FRQ));

  10204  3 000306   777640 235007                    LDA     -96,DL
         3 000307   200200 452500                    STP2    SEG_NXT_DATA+6,,AUTO
         3 000310   200200 236100                    LDQ     SEG_NXT_DATA+6,,AUTO
         3 000311   000137 036003                    ADLQ    95,DU
         3 000312   200202 757100                    STAQ    SEG_NXT_DATA+8,,AUTO
         3 000313   000030 235000 4                  LDA     24
         3 000314   200204 452500                    STP2    SEG_NXT_DATA+10,,AUTO
         3 000315   200204 236100                    LDQ     SEG_NXT_DATA+10,,AUTO
         3 000316   000071 036003                    ADLQ    57,DU
         3 000317   200206 757100                    STAQ    SEG_NXT_DATA+12,,AUTO
         3 000320   000031 235000 4                  LDA     25
         3 000321   200210 452500                    STP2    SEG_NXT_DATA+14,,AUTO
         3 000322   200210 236100                    LDQ     SEG_NXT_DATA+14,,AUTO
         3 000323   000101 036003                    ADLQ    65,DU
         3 000324   200212 757100                    STAQ    SEG_NXT_DATA+16,,AUTO
         3 000325   777640 235007                    LDA     -96,DL
         3 000326   200214 452500                    STP2    SEG_NXT_DATA+18,,AUTO
         3 000327   200214 236100                    LDQ     SEG_NXT_DATA+18,,AUTO
         3 000330   000150 036003                    ADLQ    104,DU
         3 000331   200216 757100                    STAQ    SEG_NXT_DATA+20,,AUTO
         3 000332   777640 235007                    LDA     -96,DL
         3 000333   200220 452500                    STP2    SEG_NXT_DATA+22,,AUTO
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:30   
         3 000334   200220 236100                    LDQ     SEG_NXT_DATA+22,,AUTO
         3 000335   000151 036003                    ADLQ    105,DU
         3 000336   200222 757100                    STAQ    SEG_NXT_DATA+24,,AUTO
         3 000337   777640 235007                    LDA     -96,DL
         3 000340   200224 452500                    STP2    SEG_NXT_DATA+26,,AUTO
         3 000341   200224 236100                    LDQ     SEG_NXT_DATA+26,,AUTO
         3 000342   000152 036003                    ADLQ    106,DU
         3 000343   200226 757100                    STAQ    SEG_NXT_DATA+28,,AUTO
         3 000344   777640 235007                    LDA     -96,DL
         3 000345   200230 452500                    STP2    SEG_NXT_DATA+30,,AUTO
         3 000346   200230 236100                    LDQ     SEG_NXT_DATA+30,,AUTO
         3 000347   000153 036003                    ADLQ    107,DU
         3 000350   200232 757100                    STAQ    SEG_NXT_DATA+32,,AUTO
         3 000351   777640 235007                    LDA     -96,DL
         3 000352   200234 452500                    STP2    SEG_NXT_DATA+34,,AUTO
         3 000353   200234 236100                    LDQ     SEG_NXT_DATA+34,,AUTO
         3 000354   000154 036003                    ADLQ    108,DU
         3 000355   200240 757100                    STAQ    SEG_NXT_DATA+38,,AUTO
         3 000356   200202 237100                    LDAQ    SEG_NXT_DATA+8,,AUTO
         3 000357   200236 757100                    STAQ    SEG_NXT_DATA+36,,AUTO
         3 000360   200206 237100                    LDAQ    SEG_NXT_DATA+12,,AUTO
         3 000361   200242 757100                    STAQ    SEG_NXT_DATA+40,,AUTO
         3 000362   200212 237100                    LDAQ    SEG_NXT_DATA+16,,AUTO
         3 000363   200244 757100                    STAQ    SEG_NXT_DATA+42,,AUTO
         3 000364   200216 237100                    LDAQ    SEG_NXT_DATA+20,,AUTO
         3 000365   200246 757100                    STAQ    SEG_NXT_DATA+44,,AUTO
         3 000366   200222 237100                    LDAQ    SEG_NXT_DATA+24,,AUTO
         3 000367   200250 757100                    STAQ    SEG_NXT_DATA+46,,AUTO
         3 000370   200226 237100                    LDAQ    SEG_NXT_DATA+28,,AUTO
         3 000371   200252 757100                    STAQ    SEG_NXT_DATA+48,,AUTO
         3 000372   200232 237100                    LDAQ    SEG_NXT_DATA+32,,AUTO
         3 000373   200254 757100                    STAQ    SEG_NXT_DATA+50,,AUTO
         3 000374   200240 237100                    LDAQ    SEG_NXT_DATA+38,,AUTO
         3 000375   200256 757100                    STAQ    SEG_NXT_DATA+52,,AUTO
         3 000376   200256 630500                    EPPR0   SEG_NXT_DATA+52,,AUTO
         3 000377   200270 450500                    STP0    SEG_NXT_DATA+62,,AUTO
         3 000400   200254 631500                    EPPR1   SEG_NXT_DATA+50,,AUTO
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:31   
         3 000401   200267 451500                    STP1    SEG_NXT_DATA+61,,AUTO
         3 000402   200252 633500                    EPPR3   SEG_NXT_DATA+48,,AUTO
         3 000403   200266 453500                    STP3    SEG_NXT_DATA+60,,AUTO
         3 000404   200250 634500                    EPPR4   SEG_NXT_DATA+46,,AUTO
         3 000405   200265 454500                    STP4    SEG_NXT_DATA+59,,AUTO
         3 000406   200246 635500                    EPPR5   SEG_NXT_DATA+44,,AUTO
         3 000407   200264 455500                    STP5    SEG_NXT_DATA+58,,AUTO
         3 000410   200244 636500                    EPPR6   SEG_NXT_DATA+42,,AUTO
         3 000411   200263 456500                    STP6    SEG_NXT_DATA+57,,AUTO
         3 000412   200242 637500                    EPPR7   SEG_NXT_DATA+40,,AUTO
         3 000413   200262 457500                    STP7    SEG_NXT_DATA+56,,AUTO
         3 000414   200236 630500                    EPPR0   SEG_NXT_DATA+36,,AUTO
         3 000415   200261 450500                    STP0    SEG_NXT_DATA+55,,AUTO
         3 000416   000033 236000 4                  LDQ     27
         3 000417   200260 756100                    STQ     SEG_NXT_DATA+54,,AUTO
         3 000420   200260 630500                    EPPR0   SEG_NXT_DATA+54,,AUTO
         3 000421   000000 220000 xsym               LDX0    DAF$WRITE
         3 000422   000032 631400 4                  EPPR1   26
         3 000423   000000 701010                    TSX1    0,X0
         3 000424   000000 011000                    NOP     0

      197    10205    4                END/*do if not MAP*/;

      198    10206    3           END/*pass 0*/;

  10206  3 000425   001106 710000 3                  TRA     s:10282

      199    10207
      200    10208    3      ELSE DO;

      201    10209    3           CALL DBM$PACK1(G$SFILE.PGSZ_ROS,ROS#);

  10209  3 000426   200155 630500                    EPPR0   ROS#,,AUTO
         3 000427   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000430   200202 452500                    STP2    SEG_NXT_DATA+8,,AUTO
         3 000431   200202 236100                    LDQ     SEG_NXT_DATA+8,,AUTO
         3 000432   000034 036000 4                  ADLQ    28
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:32   
         3 000433   200200 756100                    STQ     SEG_NXT_DATA+6,,AUTO
         3 000434   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000435   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000436   000000 701000 xent               TSX1    DBM$PACK1
         3 000437   000000 011000                    NOP     0

      202    10210    3           CALL DBM$PACK2(G$SFILE.PGSZ_DATA,DATA#);

  10210  3 000440   200156 630500                    EPPR0   DATA#,,AUTO
         3 000441   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000442   200114 631500                    EPPR1   G$SFILE+19,,AUTO
         3 000443   200200 451500                    STP1    SEG_NXT_DATA+6,,AUTO
         3 000444   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000445   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000446   000000 701000 xent               TSX1    DBM$PACK2
         3 000447   000000 011000                    NOP     0

      203    10211    3           CALL DBM$PACK2(G$SFILE.PGSZ_PROC,PROC#);

  10211  3 000450   200157 630500                    EPPR0   PROC#,,AUTO
         3 000451   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000452   200202 452500                    STP2    SEG_NXT_DATA+8,,AUTO
         3 000453   200202 236100                    LDQ     SEG_NXT_DATA+8,,AUTO
         3 000454   000035 036000 4                  ADLQ    29
         3 000455   200200 756100                    STQ     SEG_NXT_DATA+6,,AUTO
         3 000456   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000457   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000460   000000 701000 xent               TSX1    DBM$PACK2
         3 000461   000000 011000                    NOP     0

      204    10212    3           CALL DBM$PACK2(G$SFILE.PP_ROS,ROS_PG);

  10212  3 000462   200160 630500                    EPPR0   ROS_PG,,AUTO
         3 000463   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000464   200115 631500                    EPPR1   G$SFILE+20,,AUTO
         3 000465   200200 451500                    STP1    SEG_NXT_DATA+6,,AUTO
         3 000466   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:33   
         3 000467   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000470   000000 701000 xent               TSX1    DBM$PACK2
         3 000471   000000 011000                    NOP     0

      205    10213    3           CALL DBM$PACK2(G$SFILE.PP_SEG1,SEG1_PG);

  10213  3 000472   200161 630500                    EPPR0   SEG1_PG,,AUTO
         3 000473   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000474   200202 452500                    STP2    SEG_NXT_DATA+8,,AUTO
         3 000475   200202 236100                    LDQ     SEG_NXT_DATA+8,,AUTO
         3 000476   000036 036000 4                  ADLQ    30
         3 000477   200200 756100                    STQ     SEG_NXT_DATA+6,,AUTO
         3 000500   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000501   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000502   000000 701000 xent               TSX1    DBM$PACK2
         3 000503   000000 011000                    NOP     0

      206    10214    3           CALL DBM$PACK2(G$SFILE.PP_SEG2,SEG2_PG);

  10214  3 000504   200162 630500                    EPPR0   SEG2_PG,,AUTO
         3 000505   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000506   200116 631500                    EPPR1   G$SFILE+21,,AUTO
         3 000507   200200 451500                    STP1    SEG_NXT_DATA+6,,AUTO
         3 000510   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000511   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000512   000000 701000 xent               TSX1    DBM$PACK2
         3 000513   000000 011000                    NOP     0

      207    10215    3           CALL DBM$PACK2(G$SFILE.PP_SEG3,SEG3_PG);

  10215  3 000514   200163 630500                    EPPR0   SEG3_PG,,AUTO
         3 000515   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000516   200202 452500                    STP2    SEG_NXT_DATA+8,,AUTO
         3 000517   200202 236100                    LDQ     SEG_NXT_DATA+8,,AUTO
         3 000520   000037 036000 4                  ADLQ    31
         3 000521   200200 756100                    STQ     SEG_NXT_DATA+6,,AUTO
         3 000522   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:34   
         3 000523   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000524   000000 701000 xent               TSX1    DBM$PACK2
         3 000525   000000 011000                    NOP     0

      208    10216    3           CALL DBM$PACK2(G$SFILE.PP_SEG4,SEG4_PG);

  10216  3 000526   200164 630500                    EPPR0   SEG4_PG,,AUTO
         3 000527   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000530   200117 631500                    EPPR1   G$SFILE+22,,AUTO
         3 000531   200200 451500                    STP1    SEG_NXT_DATA+6,,AUTO
         3 000532   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000533   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000534   000000 701000 xent               TSX1    DBM$PACK2
         3 000535   000000 011000                    NOP     0

      209    10217    3           CALL DBM$PACK2(G$SFILE.PP_SEG5,SEG5_PG);

  10217  3 000536   200165 630500                    EPPR0   SEG5_PG,,AUTO
         3 000537   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000540   200202 452500                    STP2    SEG_NXT_DATA+8,,AUTO
         3 000541   200202 236100                    LDQ     SEG_NXT_DATA+8,,AUTO
         3 000542   000040 036000 4                  ADLQ    32
         3 000543   200200 756100                    STQ     SEG_NXT_DATA+6,,AUTO
         3 000544   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000545   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000546   000000 701000 xent               TSX1    DBM$PACK2
         3 000547   000000 011000                    NOP     0

      210    10218    3           CALL DBM$PACK2(G$SFILE.PP_SEG6,SEG6_PG);

  10218  3 000550   200166 630500                    EPPR0   SEG6_PG,,AUTO
         3 000551   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000552   200120 631500                    EPPR1   G$SFILE+23,,AUTO
         3 000553   200200 451500                    STP1    SEG_NXT_DATA+6,,AUTO
         3 000554   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000555   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000556   000000 701000 xent               TSX1    DBM$PACK2
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:35   
         3 000557   000000 011000                    NOP     0

      211    10219    3           CALL DBM$PACK2(G$SFILE.PP_SEG7,SEG7_PG);

  10219  3 000560   200167 630500                    EPPR0   SEG7_PG,,AUTO
         3 000561   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000562   200202 452500                    STP2    SEG_NXT_DATA+8,,AUTO
         3 000563   200202 236100                    LDQ     SEG_NXT_DATA+8,,AUTO
         3 000564   000041 036000 4                  ADLQ    33
         3 000565   200200 756100                    STQ     SEG_NXT_DATA+6,,AUTO
         3 000566   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000567   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000570   000000 701000 xent               TSX1    DBM$PACK2
         3 000571   000000 011000                    NOP     0

      212    10220    3           CALL DBM$PACK2(G$SFILE.SEG_1ST_DATA,SEG_1_DATA);

  10220  3 000572   200170 630500                    EPPR0   SEG_1_DATA,,AUTO
         3 000573   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000574   200112 631500                    EPPR1   G$SFILE+17,,AUTO
         3 000575   200200 451500                    STP1    SEG_NXT_DATA+6,,AUTO
         3 000576   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000577   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000600   000000 701000 xent               TSX1    DBM$PACK2
         3 000601   000000 011000                    NOP     0

      213    10221    3           CALL DBM$PACK2(G$SFILE.SEG_1ST_PROC,SEG_1_PROC);

  10221  3 000602   200171 630500                    EPPR0   SEG_1_PROC,,AUTO
         3 000603   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 000604   200202 452500                    STP2    SEG_NXT_DATA+8,,AUTO
         3 000605   200202 236100                    LDQ     SEG_NXT_DATA+8,,AUTO
         3 000606   000042 036000 4                  ADLQ    34
         3 000607   200200 756100                    STQ     SEG_NXT_DATA+6,,AUTO
         3 000610   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 000611   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000612   000000 701000 xent               TSX1    DBM$PACK2
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:36   
         3 000613   000000 011000                    NOP     0

      214    10222
      215    10223    3           IF DBD$FEPMAP$ = ADDR(NIL)

  10223  3 000614   000000 236000 xsym               LDQ     DBD$FEPMAP$
         3 000615   000001 116000 xsym               CMPQ    B_VECTNIL+1
         3 000616   001003 601000 3                  TNZ     s:10241

      216    10224    4           THEN DO;

      217    10225    4                CALL DAF$WRITE(VECTOR(SFILE_FMT2),
      218    10226    4                  VECTOR(I),
      219    10227    4                  VECTOR(ROS#),
      220    10228    4                  VECTOR(DATA#),
      221    10229    4                  VECTOR(PROC#),
      222    10230    4                  VECTOR(ROS_PG),
      223    10231    4                  VECTOR(SEG1_PG),
      224    10232    4                  VECTOR(SEG2_PG),
      225    10233    4                  VECTOR(SEG3_PG),
      226    10234    4                  VECTOR(SEG4_PG),

  10234  3 000617   777640 235007                    LDA     -96,DL
         3 000620   200200 452500                    STP2    SEG_NXT_DATA+6,,AUTO
         3 000621   200200 236100                    LDQ     SEG_NXT_DATA+6,,AUTO
         3 000622   000137 036003                    ADLQ    95,DU
         3 000623   200202 757100                    STAQ    SEG_NXT_DATA+8,,AUTO
         3 000624   777640 235007                    LDA     -96,DL
         3 000625   200204 452500                    STP2    SEG_NXT_DATA+10,,AUTO
         3 000626   200204 236100                    LDQ     SEG_NXT_DATA+10,,AUTO
         3 000627   000155 036003                    ADLQ    109,DU
         3 000630   200206 757100                    STAQ    SEG_NXT_DATA+12,,AUTO
         3 000631   777640 235007                    LDA     -96,DL
         3 000632   200210 452500                    STP2    SEG_NXT_DATA+14,,AUTO
         3 000633   200210 236100                    LDQ     SEG_NXT_DATA+14,,AUTO
         3 000634   000156 036003                    ADLQ    110,DU
         3 000635   200212 757100                    STAQ    SEG_NXT_DATA+16,,AUTO
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:37   
         3 000636   777640 235007                    LDA     -96,DL
         3 000637   200214 452500                    STP2    SEG_NXT_DATA+18,,AUTO
         3 000640   200214 236100                    LDQ     SEG_NXT_DATA+18,,AUTO
         3 000641   000157 036003                    ADLQ    111,DU
         3 000642   200216 757100                    STAQ    SEG_NXT_DATA+20,,AUTO
         3 000643   777640 235007                    LDA     -96,DL
         3 000644   200220 452500                    STP2    SEG_NXT_DATA+22,,AUTO
         3 000645   200220 236100                    LDQ     SEG_NXT_DATA+22,,AUTO
         3 000646   000160 036003                    ADLQ    112,DU
         3 000647   200222 757100                    STAQ    SEG_NXT_DATA+24,,AUTO
         3 000650   777640 235007                    LDA     -96,DL
         3 000651   200224 452500                    STP2    SEG_NXT_DATA+26,,AUTO
         3 000652   200224 236100                    LDQ     SEG_NXT_DATA+26,,AUTO
         3 000653   000161 036003                    ADLQ    113,DU
         3 000654   200226 757100                    STAQ    SEG_NXT_DATA+28,,AUTO
         3 000655   777640 235007                    LDA     -96,DL
         3 000656   200230 452500                    STP2    SEG_NXT_DATA+30,,AUTO
         3 000657   200230 236100                    LDQ     SEG_NXT_DATA+30,,AUTO
         3 000660   000162 036003                    ADLQ    114,DU
         3 000661   200232 757100                    STAQ    SEG_NXT_DATA+32,,AUTO
         3 000662   777640 235007                    LDA     -96,DL
         3 000663   200234 452500                    STP2    SEG_NXT_DATA+34,,AUTO
         3 000664   200234 236100                    LDQ     SEG_NXT_DATA+34,,AUTO
         3 000665   000163 036003                    ADLQ    115,DU
         3 000666   200236 757100                    STAQ    SEG_NXT_DATA+36,,AUTO
         3 000667   777640 235007                    LDA     -96,DL
         3 000670   200240 452500                    STP2    SEG_NXT_DATA+38,,AUTO
         3 000671   200240 236100                    LDQ     SEG_NXT_DATA+38,,AUTO
         3 000672   000164 036003                    ADLQ    116,DU
         3 000673   200242 757100                    STAQ    SEG_NXT_DATA+40,,AUTO
         3 000674   777640 235007                    LDA     -96,DL
         3 000675   200244 452500                    STP2    SEG_NXT_DATA+42,,AUTO
         3 000676   200244 236100                    LDQ     SEG_NXT_DATA+42,,AUTO
         3 000677   000165 036003                    ADLQ    117,DU
         3 000700   200246 757100                    STAQ    SEG_NXT_DATA+44,,AUTO
         3 000701   777640 235007                    LDA     -96,DL
         3 000702   200250 452500                    STP2    SEG_NXT_DATA+46,,AUTO
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:38   
         3 000703   200250 236100                    LDQ     SEG_NXT_DATA+46,,AUTO
         3 000704   000166 036003                    ADLQ    118,DU
         3 000705   200252 757100                    STAQ    SEG_NXT_DATA+48,,AUTO
         3 000706   777640 235007                    LDA     -96,DL
         3 000707   200254 452500                    STP2    SEG_NXT_DATA+50,,AUTO
         3 000710   200254 236100                    LDQ     SEG_NXT_DATA+50,,AUTO
         3 000711   000167 036003                    ADLQ    119,DU
         3 000712   200260 757100                    STAQ    SEG_NXT_DATA+54,,AUTO
         3 000713   200202 237100                    LDAQ    SEG_NXT_DATA+8,,AUTO
         3 000714   200256 757100                    STAQ    SEG_NXT_DATA+52,,AUTO
         3 000715   200206 237100                    LDAQ    SEG_NXT_DATA+12,,AUTO
         3 000716   200262 757100                    STAQ    SEG_NXT_DATA+56,,AUTO
         3 000717   200212 237100                    LDAQ    SEG_NXT_DATA+16,,AUTO
         3 000720   200264 757100                    STAQ    SEG_NXT_DATA+58,,AUTO
         3 000721   200216 237100                    LDAQ    SEG_NXT_DATA+20,,AUTO
         3 000722   200266 757100                    STAQ    SEG_NXT_DATA+60,,AUTO
         3 000723   200222 237100                    LDAQ    SEG_NXT_DATA+24,,AUTO
         3 000724   200270 757100                    STAQ    SEG_NXT_DATA+62,,AUTO
         3 000725   200226 237100                    LDAQ    SEG_NXT_DATA+28,,AUTO
         3 000726   200272 757100                    STAQ    SEG_NXT_DATA+64,,AUTO
         3 000727   200232 237100                    LDAQ    SEG_NXT_DATA+32,,AUTO
         3 000730   200274 757100                    STAQ    SEG_NXT_DATA+66,,AUTO
         3 000731   200236 237100                    LDAQ    SEG_NXT_DATA+36,,AUTO
         3 000732   200276 757100                    STAQ    SEG_NXT_DATA+68,,AUTO
         3 000733   200242 237100                    LDAQ    SEG_NXT_DATA+40,,AUTO
         3 000734   200300 757100                    STAQ    SEG_NXT_DATA+70,,AUTO
         3 000735   200246 237100                    LDAQ    SEG_NXT_DATA+44,,AUTO
         3 000736   200302 757100                    STAQ    SEG_NXT_DATA+72,,AUTO
         3 000737   200252 237100                    LDAQ    SEG_NXT_DATA+48,,AUTO
         3 000740   200304 757100                    STAQ    SEG_NXT_DATA+74,,AUTO
         3 000741   200260 237100                    LDAQ    SEG_NXT_DATA+54,,AUTO
         3 000742   200306 757100                    STAQ    SEG_NXT_DATA+76,,AUTO
         3 000743   200306 630500                    EPPR0   SEG_NXT_DATA+76,,AUTO
         3 000744   200324 450500                    STP0    SEG_NXT_DATA+90,,AUTO
         3 000745   200304 631500                    EPPR1   SEG_NXT_DATA+74,,AUTO
         3 000746   200323 451500                    STP1    SEG_NXT_DATA+89,,AUTO
         3 000747   200302 633500                    EPPR3   SEG_NXT_DATA+72,,AUTO
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:39   
         3 000750   200322 453500                    STP3    SEG_NXT_DATA+88,,AUTO
         3 000751   200300 634500                    EPPR4   SEG_NXT_DATA+70,,AUTO
         3 000752   200321 454500                    STP4    SEG_NXT_DATA+87,,AUTO
         3 000753   200276 635500                    EPPR5   SEG_NXT_DATA+68,,AUTO
         3 000754   200320 455500                    STP5    SEG_NXT_DATA+86,,AUTO
         3 000755   200274 636500                    EPPR6   SEG_NXT_DATA+66,,AUTO
         3 000756   200317 456500                    STP6    SEG_NXT_DATA+85,,AUTO
         3 000757   200272 637500                    EPPR7   SEG_NXT_DATA+64,,AUTO
         3 000760   200316 457500                    STP7    SEG_NXT_DATA+84,,AUTO
         3 000761   200270 630500                    EPPR0   SEG_NXT_DATA+62,,AUTO
         3 000762   200315 450500                    STP0    SEG_NXT_DATA+83,,AUTO
         3 000763   200266 630500                    EPPR0   SEG_NXT_DATA+60,,AUTO
         3 000764   200314 450500                    STP0    SEG_NXT_DATA+82,,AUTO
         3 000765   200264 630500                    EPPR0   SEG_NXT_DATA+58,,AUTO
         3 000766   200313 450500                    STP0    SEG_NXT_DATA+81,,AUTO
         3 000767   200262 630500                    EPPR0   SEG_NXT_DATA+56,,AUTO
         3 000770   200312 450500                    STP0    SEG_NXT_DATA+80,,AUTO
         3 000771   200256 630500                    EPPR0   SEG_NXT_DATA+52,,AUTO
         3 000772   200311 450500                    STP0    SEG_NXT_DATA+79,,AUTO
         3 000773   000046 236000 4                  LDQ     38
         3 000774   200310 756100                    STQ     SEG_NXT_DATA+78,,AUTO
         3 000775   200310 630500                    EPPR0   SEG_NXT_DATA+78,,AUTO
         3 000776   000000 220000 xsym               LDX0    DAF$WRITE
         3 000777   000043 631400 4                  EPPR1   35
         3 001000   000000 701010                    TSX1    0,X0
         3 001001   000000 011000                    NOP     0

      227    10235    4                  VECTOR(SEG5_PG),
      228    10236    4                  VECTOR(SEG6_PG),
      229    10237    4                  VECTOR(SEG7_PG));
      230    10238    4                END;

  10238  3 001002   001106 710000 3                  TRA     s:10282

      231    10239
      232    10240    4           ELSE DO;

PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:40   
      233    10241    4                PP_SEG$ = ADDR(ROS_PG);

  10241  3 001003   200160 630500                    EPPR0   ROS_PG,,AUTO
         3 001004   200135 450500                    STP0    PP_SEG$,,AUTO

      234    10242    4                IF ROS# ~= 0

  10242  3 001005   200155 235100                    LDA     ROS#,,AUTO
         3 001006   001017 600000 3                  TZE     s:10250

      235    10243    5                THEN DO;

      236    10244    5                     J=7;                  /*index for g_sfile_seg*/

  10244  3 001007   000007 235007                    LDA     7,DL
         3 001010   200140 755100                    STA     J,,AUTO

      237    10245    5                     THIS_SIZE = ROS#;

  10245  3 001011   200155 235100                    LDA     ROS#,,AUTO
         3 001012   200134 755100                    STA     THIS_SIZE,,AUTO

      238    10246    5                     MAP_PG# = ROS_PG;

  10246  3 001013   200160 235100                    LDA     ROS_PG,,AUTO
         3 001014   200132 755100                    STA     MAP_PG#,,AUTO

      239    10247    5                     CALL SET_MAP2;

  10247  3 001015   001116 701000 3                  TSX1    SET_MAP2
         3 001016   000000 011000                    NOP     0

      240    10248    5                     END/*if ros# ~ 0*/;

      241    10249
      242    10250    4                PP_SEG$ = ADDR(SEG1_PG);

PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:41   
  10250  3 001017   200161 630500                    EPPR0   SEG1_PG,,AUTO
         3 001020   200135 450500                    STP0    PP_SEG$,,AUTO

      243    10251    4                IF DATA# ~= 0

  10251  3 001021   200156 235100                    LDA     DATA#,,AUTO
         3 001022   001070 600000 3                  TZE     s:10272

      244    10252    5                THEN DO;

      245    10253    5                     IF G$SFILE.RU_FLGS.LIB

  10253  3 001023   200107 236100                    LDQ     G$SFILE+14,,AUTO
         3 001024   100000 316007                    CANQ    32768,DL
         3 001025   001032 600000 3                  TZE     s:10260

      246    10254    6                     THEN DO;

      247    10255    6                          THIS_SIZE = DATA#;

  10255  3 001026   200134 755100                    STA     THIS_SIZE,,AUTO

      248    10256    6                          SEG_NXT_DATA = SEG_1_DATA;

  10256  3 001027   200170 235100                    LDA     SEG_1_DATA,,AUTO
         3 001030   200172 755100                    STA     SEG_NXT_DATA,,AUTO

      249    10257    6                          END;

  10257  3 001031   001056 710000 3                  TRA     s:10267

      250    10258
      251    10259    6                     ELSE DO;

      252    10260    6                          CALL DBM$PACK2(G$SFILE.USR_DATA.PGSZ_DATA1,THIS_SIZE);

  10260  3 001032   200134 631500                    EPPR1   THIS_SIZE,,AUTO
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:42   
         3 001033   200201 451500                    STP1    SEG_NXT_DATA+7,,AUTO
         3 001034   200202 452500                    STP2    SEG_NXT_DATA+8,,AUTO
         3 001035   200202 236100                    LDQ     SEG_NXT_DATA+8,,AUTO
         3 001036   000047 036000 4                  ADLQ    39
         3 001037   200200 756100                    STQ     SEG_NXT_DATA+6,,AUTO
         3 001040   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 001041   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 001042   000000 701000 xent               TSX1    DBM$PACK2
         3 001043   000000 011000                    NOP     0

      253    10261    6                          J = SEG_1_DATA;

  10261  3 001044   200170 235100                    LDA     SEG_1_DATA,,AUTO
         3 001045   200140 755100                    STA     J,,AUTO

      254    10262    6                          CALL SET_MAP;

  10262  3 001046   001110 701000 3                  TSX1    SET_MAP
         3 001047   000000 011000                    NOP     0

      255    10263    6                          THIS_SIZE = DATA# - THIS_SIZE/*whats remaining*/;

  10263  3 001050   200156 236100                    LDQ     DATA#,,AUTO
         3 001051   200134 136100                    SBLQ    THIS_SIZE,,AUTO
         3 001052   200134 756100                    STQ     THIS_SIZE,,AUTO

      256    10264    6                          SEG_NXT_DATA = SEG_1_DATA+1;

  10264  3 001053   200170 235100                    LDA     SEG_1_DATA,,AUTO
         3 001054   000001 035007                    ADLA    1,DL
         3 001055   200172 755100                    STA     SEG_NXT_DATA,,AUTO

      257    10265    6                          END;

      258    10266
      259    10267    6                     DO J=SEG_NXT_DATA TO SEG_1_PROC-1;

PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:43   
  10267  3 001056   200140 755100                    STA     J,,AUTO
         3 001057   001065 710000 3                  TRA     s:10269+3

      260    10268    6                          CALL SET_MAP;

  10268  3 001060   001110 701000 3                  TSX1    SET_MAP
         3 001061   000000 011000                    NOP     0

      261    10269    6                          END;

  10269  3 001062   200140 235100                    LDA     J,,AUTO
         3 001063   000001 035007                    ADLA    1,DL
         3 001064   200140 755100                    STA     J,,AUTO
         3 001065   200140 236100                    LDQ     J,,AUTO
         3 001066   200171 116100                    CMPQ    SEG_1_PROC,,AUTO
         3 001067   001060 602000 3                  TNC     s:10268

      262    10270    5                     END/*if data# ~0*/;

      263    10271
      264    10272    4                IF PROC# ~= 0

  10272  3 001070   200157 235100                    LDA     PROC#,,AUTO
         3 001071   001106 600000 3                  TZE     s:10282

      265    10273    5                THEN DO;

      266    10274    5                     THIS_SIZE = PROC#;

  10274  3 001072   200134 755100                    STA     THIS_SIZE,,AUTO

      267    10275
      268    10276    6                     DO J=SEG_1_PROC TO 6;

  10276  3 001073   200171 236100                    LDQ     SEG_1_PROC,,AUTO
         3 001074   200140 756100                    STQ     J,,AUTO
         3 001075   001103 710000 3                  TRA     s:10278+3
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:44   

      269    10277    6                          CALL SET_MAP;

  10277  3 001076   001110 701000 3                  TSX1    SET_MAP
         3 001077   000000 011000                    NOP     0

      270    10278    6                          END;

  10278  3 001100   200140 235100                    LDA     J,,AUTO
         3 001101   000001 035007                    ADLA    1,DL
         3 001102   200140 755100                    STA     J,,AUTO
         3 001103   200140 235100                    LDA     J,,AUTO
         3 001104   000007 115007                    CMPA    7,DL
         3 001105   001076 602000 3                  TNC     s:10277

      271    10279    5                     END/*if proc# ~0*/;

      272    10280    4                END/*do if map command*/;

      273    10281    3           END;

      274    10282    2   END DISP_SFILE;

  10282  3 001106   200174 221300                    LDX1  ! SEG_NXT_DATA+2,,AUTO
         3 001107   000001 702211                    TSX2  ! 1,X1

      275    10283
      276    10284        %EJECT;
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:45   
      277    10285    1   SET_MAP: PROC;

  10285  3 001110   200176 741300       SET_MAP      STX1  ! SEG_NXT_DATA+4,,AUTO

      278    10286    2      MAP_PG# = PP_SEG$->B$SEGS(J);

  10286  3 001111   200135 470500                    LDP0    PP_SEG$,,AUTO
         3 001112   200140 720100                    LXL0    J,,AUTO
         3 001113   000000 235110                    LDA     0,X0,PR0
         3 001114   200132 755100                    STA     MAP_PG#,,AUTO
         3 001115   001117 710000 3                  TRA     s:10289

      279    10287
      280    10288    2   SET_MAP2: ENTRY;

  10288  3 001116   200176 741300       SET_MAP2     STX1  ! SEG_NXT_DATA+4,,AUTO

      281    10289    2      IF THIS_SIZE > 256

  10289  3 001117   200134 235100                    LDA     THIS_SIZE,,AUTO
         3 001120   000401 115007                    CMPA    257,DL
         3 001121   001125 602000 3                  TNC     s:10291

      282    10290    2      THEN MAP_SIZE = 256;

  10290  3 001122   000400 236007                    LDQ     256,DL
         3 001123   200133 756100                    STQ     MAP_SIZE,,AUTO
         3 001124   001126 710000 3                  TRA     s:10293

      283    10291    2      ELSE MAP_SIZE = THIS_SIZE;

  10291  3 001125   200133 755100                    STA     MAP_SIZE,,AUTO

      284    10292
      285    10293    2      IF MAP_SIZE ~= 0

  10293  3 001126   200133 236100                    LDQ     MAP_SIZE,,AUTO
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:46   
         3 001127   001207 600000 3                  TZE     s:10313

      286    10294    3      THEN DO;

      287    10295    3           MAP_ERR = 0;

  10295  3 001130   200131 450100                    STZ     MAP_ERR,,AUTO

      288    10296    3           IF DBD$FEPMAP$->B$FEPMAP(MAP_PG#) ~= '0'B

  10296  3 001131   000000 470400 xsym               LDP0    DBD$FEPMAP$
         3 001132   200132 720100                    LXL0    MAP_PG#,,AUTO
         3 001133   000000 235110                    LDA     0,X0,PR0
         3 001134   001145 600000 3                  TZE     s:10302

      289    10297    4           THEN DO;

      290    10298    4                CALL DBD$FEPMAP_ERR(MAP_PG#);

  10298  3 001135   200132 631500                    EPPR1   MAP_PG#,,AUTO
         3 001136   200200 451500                    STP1    SEG_NXT_DATA+6,,AUTO
         3 001137   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 001140   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 001141   000000 701000 xent               TSX1    DBD$FEPMAP_ERR
         3 001142   000000 011000                    NOP     0

      291    10299    4                MAP_ERR = 1;

  10299  3 001143   000001 235007                    LDA     1,DL
         3 001144   200131 755100                    STA     MAP_ERR,,AUTO

      292    10300    4                END;

      293    10301
      294    10302    3           DBD$FEPMAP$->B$FEPMAP.TYP(MAP_PG#) = %DBD_MAPTYP_SFILE#;

  10302  3 001145   000000 470400 xsym               LDP0    DBD$FEPMAP$
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:47   
         3 001146   200132 720100                    LXL0    MAP_PG#,,AUTO
         3 001147   000000 236110                    LDQ     0,X0,PR0
         3 001150   000032 376000 xsym               ANQ     B_VECTNIL+26
         3 001151   002000 276003                    ORQ     1024,DU
         3 001152   000000 756110                    STQ     0,X0,PR0

      295    10303    3           DBD$FEPMAP$->B$FEPMAP.WHAT#(MAP_PG#) = I;

  10303  3 001153   000000 470400 xsym               LDP0    DBD$FEPMAP$
         3 001154   200132 720100                    LXL0    MAP_PG#,,AUTO
         3 001155   200137 236100                    LDQ     I,,AUTO
         3 001156   000022 736000                    QLS     18
         3 001157   000000 676110                    ERQ     0,X0,PR0
         3 001160   000777 376003                    ANQ     511,DU
         3 001161   000000 656110                    ERSQ    0,X0,PR0

      296    10304    3           DBD$FEPMAP$->B$FEPMAP.INDX#(MAP_PG#) = J;

  10304  3 001162   000000 470400 xsym               LDP0    DBD$FEPMAP$
         3 001163   200132 720100                    LXL0    MAP_PG#,,AUTO
         3 001164   200140 236100                    LDQ     J,,AUTO
         3 001165   000011 736000                    QLS     9
         3 001166   000000 676110                    ERQ     0,X0,PR0
         3 001167   777000 376007                    ANQ     -512,DL
         3 001170   000000 656110                    ERSQ    0,X0,PR0

      297    10305    3           DBD$FEPMAP$->B$FEPMAP.SIZE(MAP_PG#) = MAP_SIZE;

  10305  3 001171   000000 470400 xsym               LDP0    DBD$FEPMAP$
         3 001172   200132 720100                    LXL0    MAP_PG#,,AUTO
         3 001173   200133 236100                    LDQ     MAP_SIZE,,AUTO
         3 001174   000000 676110                    ERQ     0,X0,PR0
         3 001175   000777 376007                    ANQ     511,DL
         3 001176   000000 656110                    ERSQ    0,X0,PR0

      298    10306
      299    10307    3           IF MAP_ERR ~= 0
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:48   

  10307  3 001177   200131 235100                    LDA     MAP_ERR,,AUTO
         3 001200   001207 600000 3                  TZE     s:10313

      300    10308    4           THEN DO;

      301    10309    4                CALL DBD$FEPMAP_ERR(MAP_PG#);

  10309  3 001201   200132 630500                    EPPR0   MAP_PG#,,AUTO
         3 001202   200200 450500                    STP0    SEG_NXT_DATA+6,,AUTO
         3 001203   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 001204   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 001205   000000 701000 xent               TSX1    DBD$FEPMAP_ERR
         3 001206   000000 011000                    NOP     0

      302    10310    4                END;

      303    10311    3           END;

      304    10312
      305    10313    2      THIS_SIZE = THIS_SIZE - MAP_SIZE;

  10313  3 001207   200134 236100                    LDQ     THIS_SIZE,,AUTO
         3 001210   200133 136100                    SBLQ    MAP_SIZE,,AUTO
         3 001211   200134 756100                    STQ     THIS_SIZE,,AUTO

      306    10314
      307    10315    2      RETURN;

  10315  3 001212   200176 221300                    LDX1  ! SEG_NXT_DATA+4,,AUTO
         3 001213   000001 702211                    TSX2  ! 1,X1

      308    10316    2   END SET_MAP;
      309    10317        %EJECT;
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:49   
      310    10318
      311    10319    1   DBD$SFILE_DATA: ENTRY(TOP);

  10319  3 001214   000000 700200 xent  DBD$SFILE_D* TSX0  ! X66_AUTO_1
         3 001215   000326 000001                    ZERO    214,1

      312    10320
      313    10321    1      CALL DBM$GETBOBCAT(G$BOBCAT)

  10321  3 001216   200004 630500                    EPPR0   G$BOBCAT,,AUTO
         3 001217   200200 450500                    STP0    SEG_NXT_DATA+6,,AUTO
         3 001220   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 001221   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 001222   000000 701000 xent               TSX1    DBM$GETBOBCAT
         3 001223   001225 702000 3                  TSX2    s:10322
         3 001224   001226 710000 3                  TRA     s:10323

      314    10322    2      WHENALTRETURN DO; RETURN; END;

  10322  3 001225   000000 702200 xent               TSX2  ! X66_ARET

      315    10323    1      CALL DBM$PACK4(G$BOBCAT.SFDATA$,SFILE$);

  10323  3 001226   200145 630500                    EPPR0   SFILE$,,AUTO
         3 001227   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 001230   200012 631500                    EPPR1   G$BOBCAT+6,,AUTO
         3 001231   200200 451500                    STP1    SEG_NXT_DATA+6,,AUTO
         3 001232   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 001233   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 001234   000000 701000 xent               TSX1    DBM$PACK4
         3 001235   000000 011000                    NOP     0

      316    10324
      317    10325    1      CALL DBM$GETMEM(SFILE$,GJ$SFDATA,0,SIZEC(GJ$SFDATA),,SIZEC(GJ$SFDATA));

  10325  3 001236   000051 236000 4                  LDQ     41
         3 001237   000001 235000 xsym               LDA     B_VECTNIL+1
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:50   
         3 001240   200204 757100                    STAQ    SEG_NXT_DATA+10,,AUTO
         3 001241   000052 237000 4                  LDAQ    42
         3 001242   200202 757100                    STAQ    SEG_NXT_DATA+8,,AUTO
         3 001243   200121 630500                    EPPR0   GJ$SFDATA,,AUTO
         3 001244   200201 450500                    STP0    SEG_NXT_DATA+7,,AUTO
         3 001245   200145 631500                    EPPR1   SFILE$,,AUTO
         3 001246   200200 451500                    STP1    SEG_NXT_DATA+6,,AUTO
         3 001247   200200 630500                    EPPR0   SEG_NXT_DATA+6,,AUTO
         3 001250   000024 631400 xsym               EPPR1   B_VECTNIL+20
         3 001251   000000 701000 xent               TSX1    DBM$GETMEM
         3 001252   000000 011000                    NOP     0

      318    10326    1      CALL DAF$WRITE(VECTOR(SFD_FMT1),

  10326  3 001253   377640 235007                    LDA     130976,DL
         3 001254   200200 452500                    STP2    SEG_NXT_DATA+6,,AUTO
         3 001255   200200 236100                    LDQ     SEG_NXT_DATA+6,,AUTO
         3 001256   000122 036003                    ADLQ    82,DU
         3 001257   200202 757100                    STAQ    SEG_NXT_DATA+8,,AUTO
         3 001260   377640 235007                    LDA     130976,DL
         3 001261   200204 452500                    STP2    SEG_NXT_DATA+10,,AUTO
         3 001262   200204 236100                    LDQ     SEG_NXT_DATA+10,,AUTO
         3 001263   000123 036003                    ADLQ    83,DU
         3 001264   200206 757100                    STAQ    SEG_NXT_DATA+12,,AUTO
         3 001265   377640 235007                    LDA     130976,DL
         3 001266   200210 452500                    STP2    SEG_NXT_DATA+14,,AUTO
         3 001267   200210 236100                    LDQ     SEG_NXT_DATA+14,,AUTO
         3 001270   000056 036000 4                  ADLQ    46
         3 001271   200214 757100                    STAQ    SEG_NXT_DATA+18,,AUTO
         3 001272   200202 237100                    LDAQ    SEG_NXT_DATA+8,,AUTO
         3 001273   200212 757100                    STAQ    SEG_NXT_DATA+16,,AUTO
         3 001274   200206 237100                    LDAQ    SEG_NXT_DATA+12,,AUTO
         3 001275   200216 757100                    STAQ    SEG_NXT_DATA+20,,AUTO
         3 001276   200214 237100                    LDAQ    SEG_NXT_DATA+18,,AUTO
         3 001277   200220 757100                    STAQ    SEG_NXT_DATA+22,,AUTO
         3 001300   200220 630500                    EPPR0   SEG_NXT_DATA+22,,AUTO
         3 001301   200225 450500                    STP0    SEG_NXT_DATA+27,,AUTO
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:51   
         3 001302   200216 631500                    EPPR1   SEG_NXT_DATA+20,,AUTO
         3 001303   200224 451500                    STP1    SEG_NXT_DATA+26,,AUTO
         3 001304   200212 633500                    EPPR3   SEG_NXT_DATA+16,,AUTO
         3 001305   200223 453500                    STP3    SEG_NXT_DATA+25,,AUTO
         3 001306   000057 236000 4                  LDQ     47
         3 001307   200222 756100                    STQ     SEG_NXT_DATA+24,,AUTO
         3 001310   200222 630500                    EPPR0   SEG_NXT_DATA+24,,AUTO
         3 001311   000000 220000 xsym               LDX0    DAF$WRITE
         3 001312   000022 631400 xsym               EPPR1   B_VECTNIL+18
         3 001313   000000 701010                    TSX1    0,X0
         3 001314   000000 011000                    NOP     0

      319    10327    1        VECTOR(GJ$SFDATA.CURR#),
      320    10328    1        VECTOR(GJ$SFDATA.PEAK#),
      321    10329    1        VECTOR(GJ$SFDATA.MAX#));
      322    10330
      323    10331    1      CALL DAF$WRITE(VECTOR(SFD_FMT2),

  10331  3 001315   377640 235007                    LDA     130976,DL
         3 001316   200200 452500                    STP2    SEG_NXT_DATA+6,,AUTO
         3 001317   200200 236100                    LDQ     SEG_NXT_DATA+6,,AUTO
         3 001320   000124 036003                    ADLQ    84,DU
         3 001321   200202 757100                    STAQ    SEG_NXT_DATA+8,,AUTO
         3 001322   377640 235007                    LDA     130976,DL
         3 001323   200204 452500                    STP2    SEG_NXT_DATA+10,,AUTO
         3 001324   200204 236100                    LDQ     SEG_NXT_DATA+10,,AUTO
         3 001325   000125 036003                    ADLQ    85,DU
         3 001326   200206 757100                    STAQ    SEG_NXT_DATA+12,,AUTO
         3 001327   377640 235007                    LDA     130976,DL
         3 001330   200210 452500                    STP2    SEG_NXT_DATA+14,,AUTO
         3 001331   200210 236100                    LDQ     SEG_NXT_DATA+14,,AUTO
         3 001332   000062 036000 4                  ADLQ    50
         3 001333   200214 757100                    STAQ    SEG_NXT_DATA+18,,AUTO
         3 001334   200202 237100                    LDAQ    SEG_NXT_DATA+8,,AUTO
         3 001335   200212 757100                    STAQ    SEG_NXT_DATA+16,,AUTO
         3 001336   200206 237100                    LDAQ    SEG_NXT_DATA+12,,AUTO
         3 001337   200216 757100                    STAQ    SEG_NXT_DATA+20,,AUTO
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:52   
         3 001340   200214 237100                    LDAQ    SEG_NXT_DATA+18,,AUTO
         3 001341   200220 757100                    STAQ    SEG_NXT_DATA+22,,AUTO
         3 001342   200220 630500                    EPPR0   SEG_NXT_DATA+22,,AUTO
         3 001343   200225 450500                    STP0    SEG_NXT_DATA+27,,AUTO
         3 001344   200216 631500                    EPPR1   SEG_NXT_DATA+20,,AUTO
         3 001345   200224 451500                    STP1    SEG_NXT_DATA+26,,AUTO
         3 001346   200212 633500                    EPPR3   SEG_NXT_DATA+16,,AUTO
         3 001347   200223 453500                    STP3    SEG_NXT_DATA+25,,AUTO
         3 001350   000063 236000 4                  LDQ     51
         3 001351   200222 756100                    STQ     SEG_NXT_DATA+24,,AUTO
         3 001352   200222 630500                    EPPR0   SEG_NXT_DATA+24,,AUTO
         3 001353   000000 220000 xsym               LDX0    DAF$WRITE
         3 001354   000022 631400 xsym               EPPR1   B_VECTNIL+18
         3 001355   000000 701010                    TSX1    0,X0
         3 001356   000000 011000                    NOP     0

      324    10332    1        VECTOR(GJ$SFDATA.CUR_DATA),
      325    10333    1        VECTOR(GJ$SFDATA.PEAK_DATA),
      326    10334    1        VECTOR(GJ$SFDATA.MAX_DATA));
      327    10335
      328    10336    1      CALL DAF$WRITE(VECTOR(SFD_FMT3),

  10336  3 001357   377640 235007                    LDA     130976,DL
         3 001360   200200 452500                    STP2    SEG_NXT_DATA+6,,AUTO
         3 001361   200200 236100                    LDQ     SEG_NXT_DATA+6,,AUTO
         3 001362   000066 036000 4                  ADLQ    54
         3 001363   200202 757100                    STAQ    SEG_NXT_DATA+8,,AUTO
         3 001364   377640 235007                    LDA     130976,DL
         3 001365   200204 452500                    STP2    SEG_NXT_DATA+10,,AUTO
         3 001366   200204 236100                    LDQ     SEG_NXT_DATA+10,,AUTO
         3 001367   000126 036003                    ADLQ    86,DU
         3 001370   200210 757100                    STAQ    SEG_NXT_DATA+14,,AUTO
         3 001371   200202 237100                    LDAQ    SEG_NXT_DATA+8,,AUTO
         3 001372   200206 757100                    STAQ    SEG_NXT_DATA+12,,AUTO
         3 001373   200210 237100                    LDAQ    SEG_NXT_DATA+14,,AUTO
         3 001374   200212 757100                    STAQ    SEG_NXT_DATA+16,,AUTO
         3 001375   200212 630500                    EPPR0   SEG_NXT_DATA+16,,AUTO
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:53   
         3 001376   200216 450500                    STP0    SEG_NXT_DATA+20,,AUTO
         3 001377   200206 631500                    EPPR1   SEG_NXT_DATA+12,,AUTO
         3 001400   200215 451500                    STP1    SEG_NXT_DATA+19,,AUTO
         3 001401   000067 236000 4                  LDQ     55
         3 001402   200214 756100                    STQ     SEG_NXT_DATA+18,,AUTO
         3 001403   200214 630500                    EPPR0   SEG_NXT_DATA+18,,AUTO
         3 001404   000000 220000 xsym               LDX0    DAF$WRITE
         3 001405   000021 631400 xsym               EPPR1   B_VECTNIL+17
         3 001406   000000 701010                    TSX1    0,X0
         3 001407   000000 011000                    NOP     0

      329    10337    1        VECTOR(GJ$SFDATA.CUR_PROC),
      330    10338    1        VECTOR(GJ$SFDATA.PEAK_PROC));
      331    10339
      332    10340    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));

  10340  3 001410   000004 630400 4                  EPPR0   4
         3 001411   000000 220000 xsym               LDX0    DAF$WRITE
         3 001412   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 001413   000000 701010                    TSX1    0,X0
         3 001414   000000 011000                    NOP     0

      333    10341    1      CALL DAF$WRITE(VECTOR(SFD_FMT4),

  10341  3 001415   377640 235007                    LDA     130976,DL
         3 001416   200200 452500                    STP2    SEG_NXT_DATA+6,,AUTO
         3 001417   200200 236100                    LDQ     SEG_NXT_DATA+6,,AUTO
         3 001420   000072 036000 4                  ADLQ    58
         3 001421   200202 757100                    STAQ    SEG_NXT_DATA+8,,AUTO
         3 001422   377640 235007                    LDA     130976,DL
         3 001423   200204 452500                    STP2    SEG_NXT_DATA+10,,AUTO
         3 001424   200204 236100                    LDQ     SEG_NXT_DATA+10,,AUTO
         3 001425   000130 036003                    ADLQ    88,DU
         3 001426   200206 757100                    STAQ    SEG_NXT_DATA+12,,AUTO
         3 001427   377640 235007                    LDA     130976,DL
         3 001430   200210 452500                    STP2    SEG_NXT_DATA+14,,AUTO
         3 001431   200210 236100                    LDQ     SEG_NXT_DATA+14,,AUTO
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:54   
         3 001432   000127 036003                    ADLQ    87,DU
         3 001433   200214 757100                    STAQ    SEG_NXT_DATA+18,,AUTO
         3 001434   200202 237100                    LDAQ    SEG_NXT_DATA+8,,AUTO
         3 001435   200212 757100                    STAQ    SEG_NXT_DATA+16,,AUTO
         3 001436   200206 237100                    LDAQ    SEG_NXT_DATA+12,,AUTO
         3 001437   200216 757100                    STAQ    SEG_NXT_DATA+20,,AUTO
         3 001440   200214 237100                    LDAQ    SEG_NXT_DATA+18,,AUTO
         3 001441   200220 757100                    STAQ    SEG_NXT_DATA+22,,AUTO
         3 001442   200220 630500                    EPPR0   SEG_NXT_DATA+22,,AUTO
         3 001443   200225 450500                    STP0    SEG_NXT_DATA+27,,AUTO
         3 001444   200216 631500                    EPPR1   SEG_NXT_DATA+20,,AUTO
         3 001445   200224 451500                    STP1    SEG_NXT_DATA+26,,AUTO
         3 001446   200212 633500                    EPPR3   SEG_NXT_DATA+16,,AUTO
         3 001447   200223 453500                    STP3    SEG_NXT_DATA+25,,AUTO
         3 001450   000073 236000 4                  LDQ     59
         3 001451   200222 756100                    STQ     SEG_NXT_DATA+24,,AUTO
         3 001452   200222 630500                    EPPR0   SEG_NXT_DATA+24,,AUTO
         3 001453   000000 220000 xsym               LDX0    DAF$WRITE
         3 001454   000022 631400 xsym               EPPR1   B_VECTNIL+18
         3 001455   000000 701010                    TSX1    0,X0
         3 001456   000000 011000                    NOP     0

      334    10342    1        VECTOR(GJ$SFDATA.REL_4MEM),
      335    10343    1        VECTOR(GJ$SFDATA.REL_4SFILE),
      336    10344    1        VECTOR(GJ$SFDATA.TBL_FULL));
      337    10345
      338    10346    1      RETURN;

  10346  3 001457   000000 702200 xent               TSX2  ! X66_ARET
      339    10347    1   END DBD$SFILE;
      340    10348        %EOD;

PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:55   
--  Include file information  --

   XU_MACRO_C.:E05TOU  is referenced.
   DB_ANLZ_M.:E05TOU  is referenced.
   DA_FORMAT_C.:E05TOU  is referenced.
   GJ_MACROS_M.:E05TOU  is referenced.
   G_SFILE_M.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBD$SFILE.
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:56   

 **** Variables and constants ****

  ****  Section 001 RoData DBD$SFILE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(80)    r     1 SFD_FMT1                  24-0-0/c CHAR(80)    r     1 SFD_FMT2
    50-0-0/c CHAR(57)    r     1 SFD_FMT3                  67-0-0/c CHAR(80)    r     1 SFD_FMT4
   130-0-0/c CHAR(75)    r     1 SFILERPT2                153-0-0/c CHAR(75)    r     1 SFILERPT3
   113-0-0/c CHAR(52)    r     1 SFILE_FMT1               176-0-0/c CHAR(76)    r     1 SFILE_FMT2

  ****  Section 002  Data  DBD$SFILE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(288)   r     1 SFILERPT1                 20-0-0/w STRC(144)   r     1 SFILERPT1HD00
    47-0-0/w STRC(144)   r     1 SFILERPT1HD01             10-0-0/c STRC(270)   r     1 SFILERPT1TX00
    24-0-0/c STRC(675)   r     1 SFILERPT1TX01             53-0-0/c STRC(675)   r     1 SFILERPT1TX02

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @TOP                     156-0-0/w UBIN        r     1 DATA#
   150-0-0/w UBIN        r     1 FLAGS                    154-0-0/w UBIN        r     1 FRQ
     4-0-0/w STRC(1908)  r     1 G$BOBCAT                  71-0-0/w STRC(864)   r     1 G$SFILE
   121-0-0/w STRC(270)   r     1 GJ$SFDATA                137-0-0/w UBIN        r     1 I
   152-0-0/w UBIN        r     1 INSTIME                  140-0-0/w UBIN        r     1 J
   131-0-0/w UBIN        r     1 MAP_ERR                  132-0-0/w UBIN        r     1 MAP_PG#
   133-0-0/w UBIN        r     1 MAP_SIZE                 151-0-0/w UBIN        r     1 MODTIME
   136-0-0/w UBIN        r     1 PASS                     135-0-0/w PTR         r     1 PP_SEG$
   157-0-0/w UBIN        r     1 PROC#                    142-0-0/w UBIN        r     1 RADIX
   155-0-0/w UBIN        r     1 ROS#                     160-0-0/w UBIN        r     1 ROS_PG
   161-0-0/w UBIN        r     1 SEG1_PG                  162-0-0/w UBIN        r     1 SEG2_PG
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:57   
   163-0-0/w UBIN        r     1 SEG3_PG                  164-0-0/w UBIN        r     1 SEG4_PG
   165-0-0/w UBIN        r     1 SEG5_PG                  166-0-0/w UBIN        r     1 SEG6_PG
   167-0-0/w UBIN        r     1 SEG7_PG                  170-0-0/w UBIN        r     1 SEG_1_DATA
   171-0-0/w UBIN        r     1 SEG_1_PROC               172-0-0/w UBIN        r     1 SEG_NXT_DATA
   143-0-0/w UBIN        r     1 SFILE#                   145-0-0/w UBIN        r     1 SFILE$
   147-0-0/w UBIN        r     1 SFILE_SIZE               146-0-0/w UBIN        r     1 THIS_SFILE$
   134-0-0/w UBIN        r     1 THIS_SIZE                 *0-0-0/w STRC(144)   r     1 TOP
   153-0-0/w UBIN        r     1 UC                       141-0-0/w UBIN        r     1 X

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(4)     r     1 BLANK_LINE                 0-0-0/w EPTR        r     1 DAF$WRITE
     0-0-0/w PTR         r     1 DBD$FEPMAP$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC        r     1 B$FEPMAP(0:0)
     0-0-0/w UBIN        r     1 B$SEGS(0:7)                0-0-0/w STRC(144)   r     1 OUT


   Procedure DBD$SFILE requires 816 words for executable code.
   Procedure DBD$SFILE requires 214 words of local(AUTO) storage.
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:58   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:59   
          MINI XREF LISTING

B$FEPMAP
     10082**DCL     10296>>IF
B$FEPMAP.INDX#
     10087**DCL     10304<<ASSIGN
B$FEPMAP.SIZE
     10089**DCL     10305<<ASSIGN
B$FEPMAP.TYP
     10083**DCL     10302<<ASSIGN
B$FEPMAP.WHAT#
     10085**DCL     10303<<ASSIGN
B$SEGS
     10097**DCL     10286>>ASSIGN
BLANK_LINE
     10070**DCL     10150--CALL    10151--CALL    10176--CALL    10177--CALL    10340--CALL
DAA$VALUE
      9890**DCL-ENT 10169--CALL
DAF$INIT
      9892**DCL-ENT 10148--CALL
DAF$WRITE
      9891**DCL     10150>>CALL    10151>>CALL    10152>>CALL    10153>>CALL    10176>>CALL    10177>>CALL
     10204>>CALL    10234>>CALL    10326>>CALL    10331>>CALL    10336>>CALL    10340>>CALL    10341>>CALL
DATA#
     10122**DCL     10210<>CALL    10234--CALL    10251>>IF      10255>>ASSIGN  10263>>ASSIGN
DBD$FEPMAP$
      9900**DCL     10145>>IF      10190>>IF      10223>>IF      10296>>IF      10302>>ASSIGN  10303>>ASSIGN
     10304>>ASSIGN  10305>>ASSIGN
DBD$FEPMAP_ERR
      9893**DCL-ENT 10298--CALL    10309--CALL
DBM$GETBOBCAT
      9895**DCL-ENT 10139--CALL    10321--CALL
DBM$GETMEM
      9894**DCL-ENT 10183--CALL    10325--CALL
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:60   
DBM$PACK1
      9896**DCL-ENT 10194--CALL    10195--CALL    10209--CALL
DBM$PACK2
      9897**DCL-ENT 10142--CALL    10192--CALL    10210--CALL    10211--CALL    10212--CALL    10213--CALL
     10214--CALL    10215--CALL    10216--CALL    10217--CALL    10218--CALL    10219--CALL    10220--CALL
     10221--CALL    10260--CALL
DBM$PACK4
      9898**DCL-ENT 10141--CALL    10185--CALL    10193--CALL    10323--CALL
DISP_SFILE
     10181**PROC    10163--CALL    10171--CALL
FLAGS
     10116**DCL     10192<>CALL    10204--CALL
FRQ
     10120**DCL     10195<>CALL    10204--CALL
G$BOBCAT
      9656**DCL     10139<>CALL    10321<>CALL
G$BOBCAT.SFDATA$
      9657**DCL     10323<>CALL
G$BOBCAT.SFILE#
      9657**DCL     10142<>CALL
G$BOBCAT.SFILE$
      9660**DCL     10141<>CALL
G$SFILE
      9684**DCL     10138--ASSIGN  10183<>CALL    10183--CALL    10183--CALL
G$SFILE.ACCT
      9686**DCL     10204--CALL
G$SFILE.FRQ
      9699**DCL     10195<>CALL
G$SFILE.INSTTIME
      9700**DCL     10185<>CALL
G$SFILE.LIB_WDSZ_DATA
      9700**DCL      9701--REDEF
G$SFILE.MODTIME
      9686**DCL     10193<>CALL
G$SFILE.NAME
      9686**DCL     10204--CALL
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:61   
G$SFILE.PGSZ_DATA
      9701**DCL     10210<>CALL
G$SFILE.PGSZ_PROC
      9701**DCL     10211<>CALL
G$SFILE.PGSZ_ROS
      9699**DCL     10209<>CALL
G$SFILE.PP_ROS
      9702**DCL     10212<>CALL
G$SFILE.PP_SEG1
      9702**DCL     10213<>CALL
G$SFILE.PP_SEG2
      9702**DCL     10214<>CALL
G$SFILE.PP_SEG3
      9702**DCL     10215<>CALL
G$SFILE.PP_SEG4
      9703**DCL     10216<>CALL
G$SFILE.PP_SEG5
      9703**DCL     10217<>CALL
G$SFILE.PP_SEG6
      9703**DCL     10218<>CALL
G$SFILE.PP_SEG7
      9703**DCL     10219<>CALL
G$SFILE.RU_FLGS
      9687**DCL     10192<>CALL
G$SFILE.RU_FLGS.LIB
      9691**DCL     10253>>IF
G$SFILE.SEG_1ST_DATA
      9700**DCL     10220<>CALL
G$SFILE.SEG_1ST_PROC
      9700**DCL     10221<>CALL
G$SFILE.UC
      9699**DCL     10194<>CALL
G$SFILE.USR_DATA.PGSZ_DATA1
      9701**DCL     10260<>CALL
GJ$SFDATA
      9711**DCL     10325<>CALL    10325--CALL    10325--CALL
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:62   
GJ$SFDATA.CURR#
      9727**DCL     10326--CALL
GJ$SFDATA.CUR_DATA
      9747**DCL     10331--CALL
GJ$SFDATA.CUR_PROC
      9762**DCL     10336--CALL
GJ$SFDATA.MAX#
      9732**DCL     10326--CALL
GJ$SFDATA.MAX_DATA
      9752**DCL     10331--CALL
GJ$SFDATA.PEAK#
      9737**DCL     10326--CALL
GJ$SFDATA.PEAK_DATA
      9757**DCL     10331--CALL
GJ$SFDATA.PEAK_PROC
      9768**DCL     10336--CALL
GJ$SFDATA.REL_4MEM
      9785**DCL     10341--CALL
GJ$SFDATA.REL_4SFILE
      9791**DCL     10341--CALL
GJ$SFDATA.TBL_FULL
      9779**DCL     10341--CALL
I
     10105**DCL     10162<<DOINDEX 10169<>CALL    10170>>IF      10170>>IF      10182>>ASSIGN  10204--CALL
     10234--CALL    10303>>ASSIGN
INSTIME
     10118**DCL     10185<>CALL    10186>>IF      10204--CALL
J
     10106**DCL     10244<<ASSIGN  10261<<ASSIGN  10267<<DOINDEX 10276<<DOINDEX 10286>>ASSIGN  10304>>ASSIGN
MAP_ERR
     10099**DCL     10295<<ASSIGN  10299<<ASSIGN  10307>>IF
MAP_PG#
     10100**DCL     10246<<ASSIGN  10286<<ASSIGN  10296>>IF      10298<>CALL    10302>>ASSIGN  10303>>ASSIGN
     10304>>ASSIGN  10305>>ASSIGN  10309<>CALL
MAP_SIZE
     10101**DCL     10290<<ASSIGN  10291<<ASSIGN  10293>>IF      10305>>ASSIGN  10313>>ASSIGN
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:63   
MODTIME
     10117**DCL     10193<>CALL    10204--CALL
OUT
      9850**DCL     10169<>CALL
PASS
     10104**DCL     10144<<DOINDEX 10147>>IF      10188>>IF
PP_SEG$
     10103**DCL     10241<<ASSIGN  10250<<ASSIGN  10286>>ASSIGN
PROC#
     10123**DCL     10211<>CALL    10234--CALL    10272>>IF      10274>>ASSIGN
RADIX
     10108**DCL     10169<>CALL
ROS#
     10121**DCL     10209<>CALL    10234--CALL    10242>>IF      10245>>ASSIGN
ROS_PG
     10124**DCL     10212<>CALL    10234--CALL    10241--ASSIGN  10246>>ASSIGN
SEG1_PG
     10125**DCL     10213<>CALL    10234--CALL    10250--ASSIGN
SEG2_PG
     10126**DCL     10214<>CALL    10234--CALL
SEG3_PG
     10127**DCL     10215<>CALL    10234--CALL
SEG4_PG
     10128**DCL     10216<>CALL    10234--CALL
SEG5_PG
     10129**DCL     10217<>CALL    10234--CALL
SEG6_PG
     10130**DCL     10218<>CALL    10234--CALL
SEG7_PG
     10131**DCL     10219<>CALL    10234--CALL
SEG_1_DATA
     10132**DCL     10220<>CALL    10256>>ASSIGN  10261>>ASSIGN  10264>>ASSIGN
SEG_1_PROC
     10133**DCL     10221<>CALL    10267>>DOINDEX 10276>>DOINDEX
SEG_NXT_DATA
     10134**DCL     10256<<ASSIGN  10264<<ASSIGN  10267>>DOINDEX
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:64   
SET_MAP
     10285**PROC    10262--CALL    10268--CALL    10277--CALL
SET_MAP2 IN PROCEDURE SET_MAP
     10288**ENTRY   10247--CALL
SFD_FMT1
      9902**DCL     10326--CALL
SFD_FMT2
      9905**DCL     10331--CALL
SFD_FMT3
      9908**DCL     10336--CALL
SFD_FMT4
      9911**DCL     10341--CALL
SFILE#
     10109**DCL     10142<>CALL    10162>>DOINDEX 10170>>IF
SFILE$
     10111**DCL     10141<>CALL    10182>>ASSIGN  10323<>CALL    10325<>CALL
SFILERPT1
      9931**DCL     10148<>CALL
SFILERPT1HD00
      9998**DCL      9966--DCLINIT
SFILERPT1HD01
     10041**DCL     10013--DCLINIT
SFILERPT1TX00
      9974**DCL      9961--DCLINIT
SFILERPT1TX01
     10016**DCL     10006--DCLINIT
SFILERPT1TX02
     10059**DCL     10049--DCLINIT
SFILERPT2
     10071**DCL     10152--CALL
SFILERPT3
     10073**DCL     10153--CALL
SFILE_FMT1
     10066**DCL     10204--CALL
SFILE_FMT2
     10075**DCL     10234--CALL
PL6.E3A0      #001=DBD$SFILE File=DBD$FMT_G.:E05TSI                              TUE 07/29/97 13:02 Page:65   
SFILE_LOOP
     10157**LABEL   10157--GOTO
SFILE_SIZE
     10113**DCL     10138<<ASSIGN  10182>>ASSIGN
THIS_SFILE$
     10112**DCL     10182<<ASSIGN  10183<>CALL
THIS_SIZE
     10102**DCL     10245<<ASSIGN  10255<<ASSIGN  10260<>CALL    10263<<ASSIGN  10263>>ASSIGN  10274<<ASSIGN
     10289>>IF      10291>>ASSIGN  10313<<ASSIGN  10313>>ASSIGN
TOP
      9805**DCL        23--PROC    10319--ENTRY
TOP.NSUBLKS
      9817**DCL     10159>>IF      10168>>DOINDEX
TOP.SUBLK$
      9838**DCL     10169>>CALL
UC
     10119**DCL     10194<>CALL    10204--CALL
X
     10107**DCL     10168<<DOINDEX 10169>>CALL

PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:66   
      341        1        /*T***********************************************************/
      342        2        /*T*                                                         */
      343        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      344        4        /*T*                                                         */
      345        5        /*T***********************************************************/
      346        6        /*F*    NAME: DBD$ACC_RES
      347        7                PURPOSE: To process the ACCRES command for FEPs.
      348        8
      349        9        */
      350       10        DBD$ACC_RES: PROC;
      351       11
      352       12        /*X* PLM=3,IND=5,ECU=0,ENU=0   */
      353       13
      354       14        %INCLUDE CP_6;
      355     5573        %INCLUDE G$BOBCAT_M;
      356     5593        %INCLUDE GFR_DATA_M;
      357     5613        %INCLUDE DA_FORMAT_C;
      358     5855        %INCLUDE XU_MACRO_C;
      359     8961
      360     8962        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS=AUTO);
      361     8975        %GFR$ACCT (FPTN=G$ACCT_RES,STCLASS=AUTO,ARRAYED=NO);
      362     8988
      363     8989    1   DCL DAF$WRITE EPTR SYMREF;
      364     8990    1   DCL DAF$INIT ENTRY(1) ALTRET;
      365     8991    1   DCL DBM$GETMEM ENTRY(10) ALTRET;
      366     8992    1   DCL DBM$GETBOBCAT ENTRY(1) ALTRET;
      367     8993    1   DCL DBM$PACK2 ENTRY(2);
      368     8994    1   DCL DBM$PACK4 ENTRY(2);
      369     8995
      370     8996        %REPORT (NAME=ACCT_RES_RPT,TRUNC=YES,TABDFLT=5,HEADER=YES,TITLE=
              8996            'FEP ACCRES - Account Resource Table');
      371     9062        %HEADER (LAST=NO,TEXT=
      372     9063        ' #  Identification                  Max Fprg  Cur Fprg  Max Mem  Cur Mem');
      373     9105        %HEADER (TEXT=
      374     9106        '--- ------------------------------  --------  --------  -------  -------');
      375     9148    1   DCL 1 ACCT_RES_FMT CHAR(0) CONSTANT INIT(
      376     9149    1   '%3D %>A,%>A %36- %8D%10D%9D%9D');
PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:67   
      377     9150
      378     9151    1   DCL BLANK_LINE CHAR(4) SYMREF;
      379     9152
      380     9153        /* AUTO Storage */
      381     9154    1   DCL I UBIN;
      382     9155    1   DCL X UBIN;
      383     9156    1   DCL ACCT_RES# UBIN;
      384     9157    1   DCL ACCT_RES$ UBIN;
      385     9158    1   DCL THIS_ACCT_RES$ UBIN;
      386     9159    1   DCL ACCT_RES_SIZE UBIN;                 /*L6 word size                        */
      387     9160
      388     9161    1   DCL MAX_MEM UBIN;
      389     9162    1   DCL CUR_MEM UBIN;
      390     9163    1   DCL MAX_FPRGS UBIN;
      391     9164    1   DCL CUR_FPRGS UBIN;
      392     9165        %EJECT;
PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:68   
      393     9166
      394     9167    1      ACCT_RES_SIZE = (SIZEC(G$ACCT_RES)+1) / 2;
      395     9168    1      CALL DBM$GETBOBCAT(G$BOBCAT)
      396     9169    2      WHENALTRETURN DO; RETURN; END;
      397     9170    1      CALL DBM$PACK4(G$BOBCAT.ACCT_RES$,ACCT_RES$);
      398     9171    1      CALL DBM$PACK2(G$BOBCAT.ACCT_RES#,ACCT_RES#);
      399     9172
      400     9173    1      CALL DAF$INIT(ACCT_RES_RPT);
      401     9174
      402     9175    2      DO I=1 TO ACCT_RES#;
      403     9176    2           THIS_ACCT_RES$ = ACCT_RES$ + (ACCT_RES_SIZE *I);
      404     9177    2           CALL DBM$GETMEM(THIS_ACCT_RES$,G$ACCT_RES,0,SIZEC(G$ACCT_RES),,SIZEC(
              9177                    G$ACCT_RES));
      405     9178
      406     9179    2           CALL DBM$PACK2(G$ACCT_RES.MAX_MEM,MAX_MEM);
      407     9180    2           CALL DBM$PACK2(G$ACCT_RES.CUR_MEM,CUR_MEM);
      408     9181    2           CALL DBM$PACK2(G$ACCT_RES.MAX_FPRGS,MAX_FPRGS);
      409     9182    2           CALL DBM$PACK2(G$ACCT_RES.CUR_FPRGS,CUR_FPRGS);
      410     9183
      411     9184    2           IF MAX_FPRGS ~= 0
      412     9185    3           THEN DO;
      413     9186    3                CALL DAF$WRITE(VECTOR(ACCT_RES_FMT),
      414     9187    3                  VECTOR(I),
      415     9188    3                  VECTOR(G$ACCT_RES.ACCN),
      416     9189    3                  VECTOR(G$ACCT_RES.UNAME),
      417     9190    3                  VECTOR(MAX_FPRGS),
      418     9191    3                  VECTOR(CUR_FPRGS),
      419     9192    3                  VECTOR(MAX_MEM),
      420     9193    3                  VECTOR(CUR_MEM));
      421     9194    3                END;
      422     9195
      423     9196    2           END/*do I=1 to acc_res#*/;
      424     9197    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));
      425     9198    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));
      426     9199    1      RETURN;
      427     9200
      428     9201    1   END DBD$ACC_RES;
PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:69   
      429     9202        %EOD;

PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:70   
--  Include file information  --

   XU_MACRO_C.:E05TOU  is referenced.
   DA_FORMAT_C.:E05TOU  is referenced.
   GFR_DATA_M.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBD$ACC_RES.

   Procedure DBD$ACC_RES requires 177 words for executable code.
   Procedure DBD$ACC_RES requires 124 words of local(AUTO) storage.

PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:71   

 Object Unit name= DBD$ACC_RES                                File name= DBD$FMT_G.:E05TOU
 UTS= JUL 29 '97 13:03:23.80 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none    63     77  DBD$ACC_RES
    2  RoData even  UTS      8     10  DBD$ACC_RES
    3   Proc  even  none   177    261  DBD$ACC_RES
    4  RoData even  none    17     21  DBD$ACC_RES

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes            yes      Std        0  DBD$ACC_RES

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       1 DBM$GETBOBCAT
         yes           Std       2 DBM$PACK4
         yes           Std       2 DBM$PACK2
 yes     yes           Std      10 DBM$GETMEM
 yes     yes           Std       1 DAF$INIT
                       nStd      0 X66_AUTO_0
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:72   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  DAF$WRITE                             BLANK_LINE
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:73   


      341        1        /*T***********************************************************/
      342        2        /*T*                                                         */
      343        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      344        4        /*T*                                                         */
      345        5        /*T***********************************************************/
      346        6        /*F*    NAME: DBD$ACC_RES
      347        7                PURPOSE: To process the ACCRES command for FEPs.
      348        8
      349        9        */
      350       10        DBD$ACC_RES: PROC;

     10  3 000000   000000 700200 xent  DBD$ACC_RES  TSX0  ! X66_AUTO_0
         3 000001   000174 000000                    ZERO    124,0

      351       11
      352       12        /*X* PLM=3,IND=5,ECU=0,ENU=0   */
      353       13
      354       14        %INCLUDE CP_6;
      355     5573        %INCLUDE G$BOBCAT_M;
      356     5593        %INCLUDE GFR_DATA_M;
      357     5613        %INCLUDE DA_FORMAT_C;
      358     5855        %INCLUDE XU_MACRO_C;
      359     8961
      360     8962        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS=AUTO);
      361     8975        %GFR$ACCT (FPTN=G$ACCT_RES,STCLASS=AUTO,ARRAYED=NO);
      362     8988
      363     8989    1   DCL DAF$WRITE EPTR SYMREF;
      364     8990    1   DCL DAF$INIT ENTRY(1) ALTRET;
      365     8991    1   DCL DBM$GETMEM ENTRY(10) ALTRET;
      366     8992    1   DCL DBM$GETBOBCAT ENTRY(1) ALTRET;
      367     8993    1   DCL DBM$PACK2 ENTRY(2);
      368     8994    1   DCL DBM$PACK4 ENTRY(2);
      369     8995
      370     8996        %REPORT (NAME=ACCT_RES_RPT,TRUNC=YES,TABDFLT=5,HEADER=YES,TITLE=
              8996            'FEP ACCRES - Account Resource Table');
      371     9062        %HEADER (LAST=NO,TEXT=
PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:74   
      372     9063        ' #  Identification                  Max Fprg  Cur Fprg  Max Mem  Cur Mem');
      373     9105        %HEADER (TEXT=
      374     9106        '--- ------------------------------  --------  --------  -------  -------');
      375     9148    1   DCL 1 ACCT_RES_FMT CHAR(0) CONSTANT INIT(
      376     9149    1   '%3D %>A,%>A %36- %8D%10D%9D%9D');
      377     9150
      378     9151    1   DCL BLANK_LINE CHAR(4) SYMREF;
      379     9152
      380     9153        /* AUTO Storage */
      381     9154    1   DCL I UBIN;
      382     9155    1   DCL X UBIN;
      383     9156    1   DCL ACCT_RES# UBIN;
      384     9157    1   DCL ACCT_RES$ UBIN;
      385     9158    1   DCL THIS_ACCT_RES$ UBIN;
      386     9159    1   DCL ACCT_RES_SIZE UBIN;                 /*L6 word size                        */
      387     9160
      388     9161    1   DCL MAX_MEM UBIN;
      389     9162    1   DCL CUR_MEM UBIN;
      390     9163    1   DCL MAX_FPRGS UBIN;
      391     9164    1   DCL CUR_FPRGS UBIN;
      392     9165        %EJECT;
PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:75   
      393     9166
      394     9167    1      ACCT_RES_SIZE = (SIZEC(G$ACCT_RES)+1) / 2;

   9167  3 000002   000016 235007                    LDA     14,DL
         3 000003   200104 755100                    STA     ACCT_RES_SIZE,,AUTO

      395     9168    1      CALL DBM$GETBOBCAT(G$BOBCAT)

   9168  3 000004   200003 630500                    EPPR0   G$BOBCAT,,AUTO
         3 000005   200112 450500                    STP0    CUR_FPRGS+2,,AUTO
         3 000006   200112 630500                    EPPR0   CUR_FPRGS+2,,AUTO
         3 000007   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000010   000000 701000 xent               TSX1    DBM$GETBOBCAT
         3 000011   000013 702000 3                  TSX2    s:9169
         3 000012   000014 710000 3                  TRA     s:9170

      396     9169    2      WHENALTRETURN DO; RETURN; END;

   9169  3 000013   000000 702200 xent               TSX2  ! X66_ARET

      397     9170    1      CALL DBM$PACK4(G$BOBCAT.ACCT_RES$,ACCT_RES$);

   9170  3 000014   200102 630500                    EPPR0   ACCT_RES$,,AUTO
         3 000015   200113 450500                    STP0    CUR_FPRGS+3,,AUTO
         3 000016   200023 631500                    EPPR1   G$BOBCAT+16,,AUTO
         3 000017   200112 451500                    STP1    CUR_FPRGS+2,,AUTO
         3 000020   200112 630500                    EPPR0   CUR_FPRGS+2,,AUTO
         3 000021   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000022   000000 701000 xent               TSX1    DBM$PACK4
         3 000023   000000 011000                    NOP     0

      398     9171    1      CALL DBM$PACK2(G$BOBCAT.ACCT_RES#,ACCT_RES#);

   9171  3 000024   200101 630500                    EPPR0   ACCT_RES#,,AUTO
         3 000025   200113 450500                    STP0    CUR_FPRGS+3,,AUTO
         3 000026   200012 631500                    EPPR1   G$BOBCAT+7,,AUTO
         3 000027   200112 451500                    STP1    CUR_FPRGS+2,,AUTO
PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:76   
         3 000030   200112 630500                    EPPR0   CUR_FPRGS+2,,AUTO
         3 000031   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000032   000000 701000 xent               TSX1    DBM$PACK2
         3 000033   000000 011000                    NOP     0

      399     9172
      400     9173    1      CALL DAF$INIT(ACCT_RES_RPT);

   9173  3 000034   000000 630400 4                  EPPR0   0
         3 000035   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000036   000000 701000 xent               TSX1    DAF$INIT
         3 000037   000000 011000                    NOP     0

      401     9174
      402     9175    2      DO I=1 TO ACCT_RES#;

   9175  3 000040   000001 235007                    LDA     1,DL
         3 000041   200077 755100                    STA     I,,AUTO
         3 000042   000243 710000 3                  TRA     s:9196+3

      403     9176    2           THIS_ACCT_RES$ = ACCT_RES$ + (ACCT_RES_SIZE *I);

   9176  3 000043   200104 236100                    LDQ     ACCT_RES_SIZE,,AUTO
         3 000044   200077 402100                    MPY     I,,AUTO
         3 000045   200102 036100                    ADLQ    ACCT_RES$,,AUTO
         3 000046   200103 756100                    STQ     THIS_ACCT_RES$,,AUTO

      404     9177    2           CALL DBM$GETMEM(THIS_ACCT_RES$,G$ACCT_RES,0,SIZEC(G$ACCT_RES),,SIZEC(
              9177                    G$ACCT_RES));

   9177  3 000047   000002 236000 4                  LDQ     2
         3 000050   000001 235000 xsym               LDA     B_VECTNIL+1
         3 000051   200116 757100                    STAQ    CUR_FPRGS+6,,AUTO
         3 000052   000004 237000 4                  LDAQ    4
         3 000053   200114 757100                    STAQ    CUR_FPRGS+4,,AUTO
         3 000054   200070 630500                    EPPR0   G$ACCT_RES,,AUTO
         3 000055   200113 450500                    STP0    CUR_FPRGS+3,,AUTO
PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:77   
         3 000056   200103 631500                    EPPR1   THIS_ACCT_RES$,,AUTO
         3 000057   200112 451500                    STP1    CUR_FPRGS+2,,AUTO
         3 000060   200112 630500                    EPPR0   CUR_FPRGS+2,,AUTO
         3 000061   000024 631400 xsym               EPPR1   B_VECTNIL+20
         3 000062   000000 701000 xent               TSX1    DBM$GETMEM
         3 000063   000000 011000                    NOP     0

      405     9178
      406     9179    2           CALL DBM$PACK2(G$ACCT_RES.MAX_MEM,MAX_MEM);

   9179  3 000064   200105 630500                    EPPR0   MAX_MEM,,AUTO
         3 000065   200113 450500                    STP0    CUR_FPRGS+3,,AUTO
         3 000066   200075 631500                    EPPR1   G$ACCT_RES+5,,AUTO
         3 000067   200112 451500                    STP1    CUR_FPRGS+2,,AUTO
         3 000070   200112 630500                    EPPR0   CUR_FPRGS+2,,AUTO
         3 000071   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000072   000000 701000 xent               TSX1    DBM$PACK2
         3 000073   000000 011000                    NOP     0

      407     9180    2           CALL DBM$PACK2(G$ACCT_RES.CUR_MEM,CUR_MEM);

   9180  3 000074   200106 630500                    EPPR0   CUR_MEM,,AUTO
         3 000075   200113 450500                    STP0    CUR_FPRGS+3,,AUTO
         3 000076   200114 452500                    STP2    CUR_FPRGS+4,,AUTO
         3 000077   200114 236100                    LDQ     CUR_FPRGS+4,,AUTO
         3 000100   000006 036000 4                  ADLQ    6
         3 000101   200112 756100                    STQ     CUR_FPRGS+2,,AUTO
         3 000102   200112 630500                    EPPR0   CUR_FPRGS+2,,AUTO
         3 000103   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000104   000000 701000 xent               TSX1    DBM$PACK2
         3 000105   000000 011000                    NOP     0

      408     9181    2           CALL DBM$PACK2(G$ACCT_RES.MAX_FPRGS,MAX_FPRGS);

   9181  3 000106   200107 630500                    EPPR0   MAX_FPRGS,,AUTO
         3 000107   200113 450500                    STP0    CUR_FPRGS+3,,AUTO
         3 000110   200076 631500                    EPPR1   G$ACCT_RES+6,,AUTO
PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:78   
         3 000111   200112 451500                    STP1    CUR_FPRGS+2,,AUTO
         3 000112   200112 630500                    EPPR0   CUR_FPRGS+2,,AUTO
         3 000113   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000114   000000 701000 xent               TSX1    DBM$PACK2
         3 000115   000000 011000                    NOP     0

      409     9182    2           CALL DBM$PACK2(G$ACCT_RES.CUR_FPRGS,CUR_FPRGS);

   9182  3 000116   200110 630500                    EPPR0   CUR_FPRGS,,AUTO
         3 000117   200113 450500                    STP0    CUR_FPRGS+3,,AUTO
         3 000120   200114 452500                    STP2    CUR_FPRGS+4,,AUTO
         3 000121   200114 236100                    LDQ     CUR_FPRGS+4,,AUTO
         3 000122   000007 036000 4                  ADLQ    7
         3 000123   200112 756100                    STQ     CUR_FPRGS+2,,AUTO
         3 000124   200112 630500                    EPPR0   CUR_FPRGS+2,,AUTO
         3 000125   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000126   000000 701000 xent               TSX1    DBM$PACK2
         3 000127   000000 011000                    NOP     0

      410     9183
      411     9184    2           IF MAX_FPRGS ~= 0

   9184  3 000130   200107 235100                    LDA     MAX_FPRGS,,AUTO
         3 000131   000240 600000 3                  TZE     s:9196

      412     9185    3           THEN DO;

      413     9186    3                CALL DAF$WRITE(VECTOR(ACCT_RES_FMT),

   9186  3 000132   777640 235007                    LDA     -96,DL
         3 000133   200112 452500                    STP2    CUR_FPRGS+2,,AUTO
         3 000134   200112 236100                    LDQ     CUR_FPRGS+2,,AUTO
         3 000135   000077 036003                    ADLQ    63,DU
         3 000136   200114 757100                    STAQ    CUR_FPRGS+4,,AUTO
         3 000137   000012 235000 4                  LDA     10
         3 000140   200116 452500                    STP2    CUR_FPRGS+6,,AUTO
         3 000141   200116 236100                    LDQ     CUR_FPRGS+6,,AUTO
PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:79   
         3 000142   000073 036003                    ADLQ    59,DU
         3 000143   200120 757100                    STAQ    CUR_FPRGS+8,,AUTO
         3 000144   000013 235000 4                  LDA     11
         3 000145   200122 452500                    STP2    CUR_FPRGS+10,,AUTO
         3 000146   200122 236100                    LDQ     CUR_FPRGS+10,,AUTO
         3 000147   000070 036003                    ADLQ    56,DU
         3 000150   200124 757100                    STAQ    CUR_FPRGS+12,,AUTO
         3 000151   777640 235007                    LDA     -96,DL
         3 000152   200126 452500                    STP2    CUR_FPRGS+14,,AUTO
         3 000153   200126 236100                    LDQ     CUR_FPRGS+14,,AUTO
         3 000154   000107 036003                    ADLQ    71,DU
         3 000155   200130 757100                    STAQ    CUR_FPRGS+16,,AUTO
         3 000156   777640 235007                    LDA     -96,DL
         3 000157   200132 452500                    STP2    CUR_FPRGS+18,,AUTO
         3 000160   200132 236100                    LDQ     CUR_FPRGS+18,,AUTO
         3 000161   000110 036003                    ADLQ    72,DU
         3 000162   200134 757100                    STAQ    CUR_FPRGS+20,,AUTO
         3 000163   777640 235007                    LDA     -96,DL
         3 000164   200136 452500                    STP2    CUR_FPRGS+22,,AUTO
         3 000165   200136 236100                    LDQ     CUR_FPRGS+22,,AUTO
         3 000166   000105 036003                    ADLQ    69,DU
         3 000167   200140 757100                    STAQ    CUR_FPRGS+24,,AUTO
         3 000170   777640 235007                    LDA     -96,DL
         3 000171   200142 452500                    STP2    CUR_FPRGS+26,,AUTO
         3 000172   200142 236100                    LDQ     CUR_FPRGS+26,,AUTO
         3 000173   000106 036003                    ADLQ    70,DU
         3 000174   200146 757100                    STAQ    CUR_FPRGS+30,,AUTO
         3 000175   200114 237100                    LDAQ    CUR_FPRGS+4,,AUTO
         3 000176   200144 757100                    STAQ    CUR_FPRGS+28,,AUTO
         3 000177   200120 237100                    LDAQ    CUR_FPRGS+8,,AUTO
         3 000200   200150 757100                    STAQ    CUR_FPRGS+32,,AUTO
         3 000201   200124 237100                    LDAQ    CUR_FPRGS+12,,AUTO
         3 000202   200152 757100                    STAQ    CUR_FPRGS+34,,AUTO
         3 000203   200130 237100                    LDAQ    CUR_FPRGS+16,,AUTO
         3 000204   200154 757100                    STAQ    CUR_FPRGS+36,,AUTO
         3 000205   200134 237100                    LDAQ    CUR_FPRGS+20,,AUTO
         3 000206   200156 757100                    STAQ    CUR_FPRGS+38,,AUTO
PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:80   
         3 000207   200140 237100                    LDAQ    CUR_FPRGS+24,,AUTO
         3 000210   200160 757100                    STAQ    CUR_FPRGS+40,,AUTO
         3 000211   200146 237100                    LDAQ    CUR_FPRGS+30,,AUTO
         3 000212   200162 757100                    STAQ    CUR_FPRGS+42,,AUTO
         3 000213   200162 630500                    EPPR0   CUR_FPRGS+42,,AUTO
         3 000214   200173 450500                    STP0    CUR_FPRGS+51,,AUTO
         3 000215   200160 631500                    EPPR1   CUR_FPRGS+40,,AUTO
         3 000216   200172 451500                    STP1    CUR_FPRGS+50,,AUTO
         3 000217   200156 633500                    EPPR3   CUR_FPRGS+38,,AUTO
         3 000220   200171 453500                    STP3    CUR_FPRGS+49,,AUTO
         3 000221   200154 634500                    EPPR4   CUR_FPRGS+36,,AUTO
         3 000222   200170 454500                    STP4    CUR_FPRGS+48,,AUTO
         3 000223   200152 635500                    EPPR5   CUR_FPRGS+34,,AUTO
         3 000224   200167 455500                    STP5    CUR_FPRGS+47,,AUTO
         3 000225   200150 636500                    EPPR6   CUR_FPRGS+32,,AUTO
         3 000226   200166 456500                    STP6    CUR_FPRGS+46,,AUTO
         3 000227   200144 637500                    EPPR7   CUR_FPRGS+28,,AUTO
         3 000230   200165 457500                    STP7    CUR_FPRGS+45,,AUTO
         3 000231   000014 236000 4                  LDQ     12
         3 000232   200164 756100                    STQ     CUR_FPRGS+44,,AUTO
         3 000233   200164 630500                    EPPR0   CUR_FPRGS+44,,AUTO
         3 000234   000000 220000 xsym               LDX0    DAF$WRITE
         3 000235   000026 631400 xsym               EPPR1   B_VECTNIL+22
         3 000236   000000 701010                    TSX1    0,X0
         3 000237   000000 011000                    NOP     0

      414     9187    3                  VECTOR(I),
      415     9188    3                  VECTOR(G$ACCT_RES.ACCN),
      416     9189    3                  VECTOR(G$ACCT_RES.UNAME),
      417     9190    3                  VECTOR(MAX_FPRGS),
      418     9191    3                  VECTOR(CUR_FPRGS),
      419     9192    3                  VECTOR(MAX_MEM),
      420     9193    3                  VECTOR(CUR_MEM));
      421     9194    3                END;

      422     9195
      423     9196    2           END/*do I=1 to acc_res#*/;
PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:81   

   9196  3 000240   200077 235100                    LDA     I,,AUTO
         3 000241   000001 035007                    ADLA    1,DL
         3 000242   200077 755100                    STA     I,,AUTO
         3 000243   200101 236100                    LDQ     ACCT_RES#,,AUTO
         3 000244   200077 116100                    CMPQ    I,,AUTO
         3 000245   000043 603000 3                  TRC     s:9176

      424     9197    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));

   9197  3 000246   000020 630400 4                  EPPR0   16
         3 000247   000000 220000 xsym               LDX0    DAF$WRITE
         3 000250   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000251   000000 701010                    TSX1    0,X0
         3 000252   000000 011000                    NOP     0

      425     9198    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));

   9198  3 000253   000020 630400 4                  EPPR0   16
         3 000254   000000 220000 xsym               LDX0    DAF$WRITE
         3 000255   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000256   000000 701010                    TSX1    0,X0
         3 000257   000000 011000                    NOP     0

      426     9199    1      RETURN;

   9199  3 000260   000000 702200 xent               TSX2  ! X66_ARET
      427     9200
      428     9201    1   END DBD$ACC_RES;
      429     9202        %EOD;

PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:82   
--  Include file information  --

   XU_MACRO_C.:E05TOU  is referenced.
   DA_FORMAT_C.:E05TOU  is referenced.
   GFR_DATA_M.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBD$ACC_RES.
PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:83   

 **** Variables and constants ****

  ****  Section 001  Data  DBD$ACC_RES

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(288)   r     1 ACCT_RES_RPT              21-0-0/w STRC(144)   r     1 ACCT_RES_RPTHD00
    50-0-0/w STRC(144)   r     1 ACCT_RES_RPTHD01          10-0-0/c STRC(324)   r     1 ACCT_RES_RPTTX00
    25-0-0/c STRC(657)   r     1 ACCT_RES_RPTTX01          54-0-0/c STRC(657)   r     1 ACCT_RES_RPTTX02

  ****  Section 002 RoData DBD$ACC_RES

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(30)    r     1 ACCT_RES_FMT

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

   101-0-0/w UBIN        r     1 ACCT_RES#                102-0-0/w UBIN        r     1 ACCT_RES$
   104-0-0/w UBIN        r     1 ACCT_RES_SIZE            110-0-0/w UBIN        r     1 CUR_FPRGS
   106-0-0/w UBIN        r     1 CUR_MEM                   70-0-0/w STRC(252)   r     1 G$ACCT_RES
     3-0-0/w STRC(1908)  r     1 G$BOBCAT                  77-0-0/w UBIN        r     1 I
   107-0-0/w UBIN        r     1 MAX_FPRGS                105-0-0/w UBIN        r     1 MAX_MEM
   103-0-0/w UBIN        r     1 THIS_ACCT_RES$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(4)     r     1 BLANK_LINE                 0-0-0/w EPTR        r     1 DAF$WRITE

PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:84   

   Procedure DBD$ACC_RES requires 177 words for executable code.
   Procedure DBD$ACC_RES requires 124 words of local(AUTO) storage.
PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:85   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:86   
          MINI XREF LISTING

ACCT_RES#
      9156**DCL      9171<>CALL     9175>>DOINDEX
ACCT_RES$
      9157**DCL      9170<>CALL     9176>>ASSIGN
ACCT_RES_FMT
      9148**DCL      9186--CALL
ACCT_RES_RPT
      9013**DCL      9173<>CALL
ACCT_RES_RPTHD00
      9080**DCL      9048--DCLINIT
ACCT_RES_RPTHD01
      9123**DCL      9095--DCLINIT
ACCT_RES_RPTTX00
      9056**DCL      9043--DCLINIT
ACCT_RES_RPTTX01
      9098**DCL      9088--DCLINIT
ACCT_RES_RPTTX02
      9141**DCL      9131--DCLINIT
ACCT_RES_SIZE
      9159**DCL      9167<<ASSIGN   9176>>ASSIGN
BLANK_LINE
      9151**DCL      9197--CALL     9198--CALL
CUR_FPRGS
      9164**DCL      9182<>CALL     9186--CALL
CUR_MEM
      9162**DCL      9180<>CALL     9186--CALL
DAF$INIT
      8990**DCL-ENT  9173--CALL
DAF$WRITE
      8989**DCL      9186>>CALL     9197>>CALL     9198>>CALL
DBM$GETBOBCAT
      8992**DCL-ENT  9168--CALL
PL6.E3A0      #002=DBD$ACC_RES File=DBD$FMT_G.:E05TSI                            TUE 07/29/97 13:03 Page:87   
DBM$GETMEM
      8991**DCL-ENT  9177--CALL
DBM$PACK2
      8993**DCL-ENT  9171--CALL     9179--CALL     9180--CALL     9181--CALL     9182--CALL
DBM$PACK4
      8994**DCL-ENT  9170--CALL
G$ACCT_RES
      8983**DCL      9167--ASSIGN   9177<>CALL     9177--CALL     9177--CALL
G$ACCT_RES.ACCN
      8985**DCL      9186--CALL
G$ACCT_RES.CUR_FPRGS
      8985**DCL      9182<>CALL
G$ACCT_RES.CUR_MEM
      8985**DCL      9180<>CALL
G$ACCT_RES.MAX_FPRGS
      8985**DCL      9181<>CALL
G$ACCT_RES.MAX_MEM
      8985**DCL      9179<>CALL
G$ACCT_RES.UNAME
      8985**DCL      9186--CALL
G$BOBCAT
      8963**DCL      9168<>CALL
G$BOBCAT.ACCT_RES#
      8964**DCL      9171<>CALL
G$BOBCAT.ACCT_RES$
      8967**DCL      9170<>CALL
I
      9154**DCL      9175<<DOINDEX  9176>>ASSIGN   9186--CALL
MAX_FPRGS
      9163**DCL      9181<>CALL     9184>>IF       9186--CALL
MAX_MEM
      9161**DCL      9179<>CALL     9186--CALL
THIS_ACCT_RES$
      9158**DCL      9176<<ASSIGN   9177<>CALL

PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:88   
      430        1        /*T***********************************************************/
      431        2        /*T*                                                         */
      432        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      433        4        /*T*                                                         */
      434        5        /*T***********************************************************/
      435        6        /*F*    NAME: DBD$USRT
      436        7                PURPOSE: To process the USRT command for FEPs.
      437        8        */
      438        9        DBD$USRT: PROC(TOP);
      439       10
      440       11        /*X* PLM=3,IND=5,ECU=0,ENU=0   */
      441       12
      442       13        %INCLUDE CP_6;
      443     5572        %INCLUDE G$BOBCAT_M;
      444     5592        %INCLUDE GH_SCHD_M;
      445     5736        %INCLUDE GH_SCHD_E;
      446     5832        %INCLUDE DA_FORMAT_C;
      447     6074        %INCLUDE XU_MACRO_C;
      448     9180
      449     9181        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS=AUTO);
      450     9194        %G$USER (FPTN=G$USER,STCLASS=AUTO);
      451     9205
      452     9206        %PARSE$OUT (NAME=TOP,STCLASS=PARAM);
      453     9251        %PARSE$OUT (NAME=OUT,STCLASS=BASED);
      454     9296
      455     9297    1   DCL DAA$VALUE ENTRY(3) ALTRET;
      456     9298    1   DCL DAF$WRITE EPTR SYMREF;
      457     9299    1   DCL DAF$INIT ENTRY(1) ALTRET;
      458     9300    1   DCL DBA$SELECTION ENTRY(3) ALTRET;
      459     9301    1   DCL DBM$GETMEM ENTRY(10) ALTRET;
      460     9302    1   DCL DBM$GETBOBCAT ENTRY(1) ALTRET;
      461     9303    1   DCL DBM$PACK1 ENTRY(2);
      462     9304    1   DCL DBM$PACK2 ENTRY(2);
      463     9305    1   DCL DBM$PACK4 ENTRY(2);
      464     9306    1   DCL DBM$SYSID2UN ENTRY(1) ALTRET;
      465     9307    1   DCL DB_CUN UBIN SYMREF;
      466     9308
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:89   
      467     9309        %REPORT (NAME=USERRPT1,TRUNC=YES,TABDFLT=5,HEADER=YES,TITLE='FEP USRT - User Table')
              9309            ;
      468     9375        %HEADER (LAST=NO,TEXT=
      469     9376        ' #  FL   BL   Sysid  Mode  State Flags  Async  DL$    UTS/LDCT$  HMI$  ');
      470     9418        %HEADER (TEXT=
      471     9419        '--- ---  ---  -----  ----  ----- -----  -----  ------ ---------  ------');
      472     9461    1   DCL 1 USER_FMT1 CHAR(0) CONSTANT INIT(
      473     9462    1   '.%2ZH .%2ZH  .%2ZH  %5D    %A   %4A  .%4ZH  .%4ZH  .%5ZH .%8ZH  .%5ZH');
      474     9463
      475     9464
      476     9465    1   DCL BLANK_LINE CHAR(4) SYMREF;
      477     9466    1   DCL USERRPT2 CHAR(0) CONSTANT INIT(
      478     9467    1   ' #  Sysid   HJIT  MF  Clock  UTS         Prio   PrioB   USRT$');
      479     9468    1   DCL USERRPT3 CHAR(0) CONSTANT INIT(
      480     9469    1   '--- -----  -----  --- -----  ----------- -----  -----   ------');
      481     9470    1   DCL 1 USER_FMT2 CHAR(0) CONSTANT INIT(
      482     9471    1   '.%2ZH %5D  .%4ZH  %3D .%4ZH  %11..3.2U  %4D   %4D   .%5ZH');
      483     9472
      484     9473        %G_STTTXT;
      485     9490        %G_USRFLG_TEXT (NAME=USERFLG_TEXT, STCLASS=STATIC);
      486     9499        %G_ASYNC_TEXT (NAME=ASYNC_TEXT, STCLASS=STATIC);
      487     9509
      488     9510    1   DCL MODECHAR(0:4) CHAR(1) CONSTANT INIT(' ','U','C','H','G');
      489     9511
      490     9512        /* AUTO Storage */
      491     9513    1   DCL PASS UBIN;                          /*which line to print*/
      492     9514    1   DCL HEADER0 UBIN;
      493     9515    1   DCL HEADER1 UBIN;
      494     9516    1   DCL I SBIN;
      495     9517    1   DCL X UBIN;
      496     9518    1   DCL RADIX UBIN;
      497     9519    1   DCL USER# UBIN;
      498     9520    1   DCL THIS_USER# UBIN;
      499     9521    1   DCL USER$ UBIN;
      500     9522    1   DCL THIS_USER$ UBIN;
      501     9523    1   DCL USER_SIZE UBIN;                     /*G$USER L6 word size                 */
      502     9524    1   DCL 1 FLGS,
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:90   
      503     9525    1         2 F BIT(18) UNAL,
      504     9526    1         2 * BIT(18) UNAL;
      505     9527
      506     9528
      507     9529        /* G$USER data is packed into auto */
      508     9530    1   DCL FLAGS UBIN;
      509     9531    1   DCL ASYNCH UBIN;
      510     9532    1   DCL STATE UBIN;
      511     9533    1   DCL TXT_STATE CHAR(4);
      512     9534    1   DCL FLINK UBIN;
      513     9535    1   DCL BLINK UBIN;
      514     9536    1   DCL MISC$ UBIN;
      515     9537    1   DCL UTS UBIN;
      516     9538    1   DCL CLOCK UBIN;
      517     9539    1   DCL PCOUNT UBIN;
      518     9540    1   DCL MFCOUNT UBIN;
      519     9541    1   DCL MODE UBIN;
      520     9542    1   DCL DL$ UBIN;
      521     9543    1   DCL PRIO UBIN;
      522     9544    1   DCL PRIOB UBIN;
      523     9545    1   DCL UHJITPP UBIN;
      524     9546    1   DCL SYSID UBIN;
      525     9547    1   DCL HMI$ UBIN;
      526     9548
      527     9549        %FPT_TIME (SOURCE=FUTS,DEST=UTS);
      528     9568        %EJECT;
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:91   
      529     9569
      530     9570    1      USER_SIZE = (SIZEC(G$USER)+1) / 2;
      531     9571    1      CALL DBM$GETBOBCAT(G$BOBCAT)
      532     9572    2      WHENALTRETURN DO; RETURN; END;
      533     9573    1      CALL DBM$PACK4(G$BOBCAT.USRT$,USER$);
      534     9574    1      CALL DBM$PACK2(G$BOBCAT.MUIS,USER#);
      535     9575    1      HEADER0 = 0;
      536     9576    1      HEADER1 = 0;
      537     9577
      538     9578    2      DO PASS=0 TO 1;
      539     9579    2           IF TOP.NSUBLKS=0
      540     9580    3           THEN DO;
      541     9581    4                DO I=1 TO USER#;
      542     9582    4                     CALL DISP_USER;
      543     9583    4                     END;
      544     9584    3                END;
      545     9585
      546     9586    3           ELSE DO;                        /*display a single usrt entry*/
      547     9587    4                DO X=0 TO TOP.NSUBLKS-1;
      548     9588    4                     CALL DBA$SELECTION(TOP.SUBLK$(X)->OUT,I);
      549     9589    5                     IF I>0 THEN DO;
      550     9590    5                          CALL DBM$SYSID2UN(I)
      551     9591    6                          WHENRETURN DO; I=DB_CUN; END;
      552     9592    6                          WHENALTRETURN DO; I=0; END;
      553     9593    5                          END;
      554     9594    5                     ELSE DO;
      555     9595    5                          I = -I;
      556     9596    5                          END;
      557     9597    4                     IF (I > 0) AND (I <= USER#)
      558     9598    5                     THEN DO;
      559     9599    5                          CALL DISP_USER
      560     9600    6                          WHENRETURN DO;
      561     9601    6                               IF PASS ~= 0   AND   TOP.NSUBLKS=1
      562     9602    7                               THEN DO;
      563     9603    7                                    CALL DAF$WRITE(VECTOR(BLANK_LINE));
      564     9604    7                                    FLGS.F = G$USER.FLG;
      565     9605    7                                    USERFLG_TEXT.SREST = 'set: ';
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:92   
      566     9606    7                                    CALL DAF$WRITE(VECTOR(USERFLG_TEXT),VECTOR(FLGS.F))
              9606                                             ;
      567     9607    7                                    FLGS.F = ~(FLGS.F);
      568     9608    7                                    USERFLG_TEXT.SREST = 'off: ';
      569     9609    7                                    CALL DAF$WRITE(VECTOR(USERFLG_TEXT),VECTOR(FLGS.F))
              9609                                             ;
      570     9610
      571     9611    7                                    FLGS.F = G$USER.ASYNCH;
      572     9612    7                                    ASYNC_TEXT.SREST = 'set: ';
      573     9613    7                                    CALL DAF$WRITE(VECTOR(ASYNC_TEXT),VECTOR(FLGS.F));
      574     9614    7                                    FLGS.F = ~(FLGS.F);
      575     9615    7                                    ASYNC_TEXT.SREST = 'off: ';
      576     9616    7                                    CALL DAF$WRITE(VECTOR(ASYNC_TEXT),VECTOR(FLGS.F));
      577     9617    7                                    END/*do if disply single user*/;
      578     9618    6                               end/*return from disp_user*/;
      579     9619    5                          END/*do if valid user#*/;
      580     9620    4                     END/*do x=0 to top*/;
      581     9621    3                END/*else do*/;
      582     9622
      583     9623    2           END/*do pass=0 to 1*/;
      584     9624
      585     9625    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));
      586     9626    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));
      587     9627    1      RETURN;
      588     9628        %EJECT;
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:93   
      589     9629
      590     9630    1   DISP_USER: PROC ALTRET;
      591     9631    2      THIS_USER$ = USER$ + (USER_SIZE *I);
      592     9632    2      CALL DBM$GETMEM(THIS_USER$,G$USER,0,SIZEC(G$USER),,SIZEC(G$USER))
      593     9633    3      WHENALTRETURN DO; ALTRETURN; END;
      594     9634
      595     9635    2      CALL DBM$PACK2(G$USER.US,STATE);
      596     9636    2      IF STATE = %GH_NULL THEN RETURN;
      597     9637    2      CALL DBM$PACK2(G$USER.SYSID,SYSID);
      598     9638
      599     9639    2      IF PASS = 0
      600     9640    3      THEN DO;
      601     9641    3           IF HEADER0 = 0
      602     9642    4           THEN DO;
      603     9643    4                CALL DAF$INIT(USERRPT1);
      604     9644    4                HEADER0 = 1;
      605     9645    4                END;
      606     9646
      607     9647    3           IF STATE > %GH_NULL
      608     9648    3           THEN TXT_STATE = 'ILGL';
      609     9649    3           ELSE TXT_STATE = G_STTTXT(STATE);
      610     9650
      611     9651    3           CALL DBM$PACK2(G$USER.FLG,FLAGS);
      612     9652    3           CALL DBM$PACK2(G$USER.ASYNCH,ASYNCH);
      613     9653    3           CALL DBM$PACK2(G$USER.FL,FLINK);
      614     9654    3           CALL DBM$PACK2(G$USER.BL,BLINK);
      615     9655    3           CALL DBM$PACK4(G$USER.MISC$,MISC$);
      616     9656    3           CALL DBM$PACK4(G$USER.DL$,DL$);
      617     9657    3           CALL DBM$PACK4(G$USER.HMI$,HMI$);
      618     9658
      619     9659
      620     9660    3           CALL DAF$WRITE(VECTOR(USER_FMT1),
      621     9661    3             VECTOR(I),
      622     9662    3             VECTOR(FLINK),
      623     9663    3             VECTOR(BLINK),
      624     9664    3             VECTOR(SYSID),
      625     9665    3             VECTOR(MODECHAR(G$USER.MODE)),
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:94   
      626     9666    3             VECTOR(TXT_STATE),
      627     9667    3             VECTOR(FLAGS),
      628     9668    3             VECTOR(ASYNCH),
      629     9669    3             VECTOR(DL$),
      630     9670    3             VECTOR(MISC$),
      631     9671    3             VECTOR(HMI$));
      632     9672    3           END/*pass 0*/;
      633     9673
      634     9674    3      ELSE DO;
      635     9675    3           IF HEADER1 = 0
      636     9676    4           THEN DO;
      637     9677    4                CALL DAF$WRITE(VECTOR(BLANK_LINE));
      638     9678    4                CALL DAF$WRITE(VECTOR(BLANK_LINE));
      639     9679    4                CALL DAF$WRITE(VECTOR(USERRPT2));
      640     9680    4                CALL DAF$WRITE(VECTOR(USERRPT3));
      641     9681    4                HEADER1 = 1;
      642     9682    4                END;
      643     9683
      644     9684    3           CALL DBM$PACK2(G$USER.CLOCK,CLOCK);
      645     9685    3           CALL DBM$PACK2(G$USER.PCT,PCOUNT);
      646     9686    3           CALL DBM$PACK1(G$USER.MF,MFCOUNT);
      647     9687    3           CALL DBM$PACK2(G$USER.PRIO,PRIO);
      648     9688    3           CALL DBM$PACK2(G$USER.PRIOB,PRIOB);
      649     9689    3           CALL DBM$PACK4(G$USER.UHJITPP,UHJITPP);
      650     9690
      651     9691    3           CALL DBM$PACK4(G$USER.UTS,UTS);
      652     9692    3           FPT_TIME.TSTAMP_ = VECTOR(UTS);
      653     9693    4           CALL M$TIME(FPT_TIME) WHENALTRETURN DO; END;
      654     9694
      655     9695
      656     9696    3           CALL DAF$WRITE(VECTOR(USER_FMT2),
      657     9697    3             VECTOR(I),
      658     9698    3             VECTOR(SYSID),
      659     9699    3             VECTOR(UHJITPP),
      660     9700    3             VECTOR(MFCOUNT),
      661     9701    3             VECTOR(CLOCK),
      662     9702    3             VECTOR(UTS),
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:95   
      663     9703    3             VECTOR(PRIO),
      664     9704    3             VECTOR(PRIOB),
      665     9705    3             VECTOR(THIS_USER$));
      666     9706    3           END;
      667     9707    2   END DISP_USER;
      668     9708
      669     9709    1   END DBD$USRT;
      670     9710        %EOD;

PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:96   
--  Include file information  --

   XU_MACRO_C.:E05TOU  is referenced.
   DA_FORMAT_C.:E05TOU  is referenced.
   GH_SCHD_E.:E05TOU  is referenced.
   GH_SCHD_M.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBD$USRT.

   Procedure DBD$USRT requires 630 words for executable code.
   Procedure DBD$USRT requires 178 words of local(AUTO) storage.

PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:97   

 Object Unit name= DBD$USRT                                   File name= DBD$FMT_G.:E05TOU
 UTS= JUL 29 '97 13:03:55.68 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none   132    204  DBD$USRT
    2  RoData even  UTS    104    150  DBD$USRT
    3   Proc  even  none   630   1166  DBD$USRT
    4  RoData even  none    44     54  DBD$USRT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes            yes      Std        1  DBD$USRT

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       1 DBM$GETBOBCAT
         yes           Std       2 DBM$PACK4
         yes           Std       2 DBM$PACK2
 yes     yes           Std       1 DBM$SYSID2UN
 yes     yes           Std       3 DBA$SELECTION
 yes     yes           Std      10 DBM$GETMEM
         yes           Std       2 DBM$PACK1
 yes     yes           Std       1 DAF$INIT
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:98   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  DAF$WRITE                             DB_CUN
     BLANK_LINE                            B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:99   


      430        1        /*T***********************************************************/
      431        2        /*T*                                                         */
      432        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      433        4        /*T*                                                         */
      434        5        /*T***********************************************************/
      435        6        /*F*    NAME: DBD$USRT
      436        7                PURPOSE: To process the USRT command for FEPs.
      437        8        */
      438        9        DBD$USRT: PROC(TOP);

      9  3 000000   000000 700200 xent  DBD$USRT     TSX0  ! X66_AUTO_1
         3 000001   000262 000001                    ZERO    178,1

      439       10
      440       11        /*X* PLM=3,IND=5,ECU=0,ENU=0   */
      441       12
      442       13        %INCLUDE CP_6;
      443     5572        %INCLUDE G$BOBCAT_M;
      444     5592        %INCLUDE GH_SCHD_M;
      445     5736        %INCLUDE GH_SCHD_E;
      446     5832        %INCLUDE DA_FORMAT_C;
      447     6074        %INCLUDE XU_MACRO_C;
      448     9180
      449     9181        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS=AUTO);
      450     9194        %G$USER (FPTN=G$USER,STCLASS=AUTO);
      451     9205
      452     9206        %PARSE$OUT (NAME=TOP,STCLASS=PARAM);
      453     9251        %PARSE$OUT (NAME=OUT,STCLASS=BASED);
      454     9296
      455     9297    1   DCL DAA$VALUE ENTRY(3) ALTRET;
      456     9298    1   DCL DAF$WRITE EPTR SYMREF;
      457     9299    1   DCL DAF$INIT ENTRY(1) ALTRET;
      458     9300    1   DCL DBA$SELECTION ENTRY(3) ALTRET;
      459     9301    1   DCL DBM$GETMEM ENTRY(10) ALTRET;
      460     9302    1   DCL DBM$GETBOBCAT ENTRY(1) ALTRET;
      461     9303    1   DCL DBM$PACK1 ENTRY(2);
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:100  
      462     9304    1   DCL DBM$PACK2 ENTRY(2);
      463     9305    1   DCL DBM$PACK4 ENTRY(2);
      464     9306    1   DCL DBM$SYSID2UN ENTRY(1) ALTRET;
      465     9307    1   DCL DB_CUN UBIN SYMREF;
      466     9308
      467     9309       %REPORT (NAME=USERRPT1,TRUNC=YES,TABDFLT=5,HEADER=YES,TITLE='FEP USRT - User Table')
              9309            ;
      468     9375        %HEADER (LAST=NO,TEXT=
      469     9376        ' #  FL   BL   Sysid  Mode  State Flags  Async  DL$    UTS/LDCT$  HMI$  ');
      470     9418        %HEADER (TEXT=
      471     9419        '--- ---  ---  -----  ----  ----- -----  -----  ------ ---------  ------');
      472     9461    1   DCL 1 USER_FMT1 CHAR(0) CONSTANT INIT(
      473     9462    1   '.%2ZH .%2ZH  .%2ZH  %5D    %A   %4A  .%4ZH  .%4ZH  .%5ZH .%8ZH  .%5ZH');
      474     9463
      475     9464
      476     9465    1   DCL BLANK_LINE CHAR(4) SYMREF;
      477     9466    1   DCL USERRPT2 CHAR(0) CONSTANT INIT(
      478     9467    1   ' #  Sysid   HJIT  MF  Clock  UTS         Prio   PrioB   USRT$');
      479     9468    1   DCL USERRPT3 CHAR(0) CONSTANT INIT(
      480     9469    1   '--- -----  -----  --- -----  ----------- -----  -----   ------');
      481     9470    1   DCL 1 USER_FMT2 CHAR(0) CONSTANT INIT(
      482     9471    1   '.%2ZH %5D  .%4ZH  %3D .%4ZH  %11..3.2U  %4D   %4D   .%5ZH');
      483     9472
      484     9473        %G_STTTXT;
      485     9490        %G_USRFLG_TEXT (NAME=USERFLG_TEXT, STCLASS=STATIC);
      486     9499        %G_ASYNC_TEXT (NAME=ASYNC_TEXT, STCLASS=STATIC);
      487     9509
      488     9510    1   DCL MODECHAR(0:4) CHAR(1) CONSTANT INIT(' ','U','C','H','G');
      489     9511
      490     9512        /* AUTO Storage */
      491     9513    1   DCL PASS UBIN;                          /*which line to print*/
      492     9514    1   DCL HEADER0 UBIN;
      493     9515    1   DCL HEADER1 UBIN;
      494     9516    1   DCL I SBIN;
      495     9517    1   DCL X UBIN;
      496     9518    1   DCL RADIX UBIN;
      497     9519    1   DCL USER# UBIN;
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:101  
      498     9520    1   DCL THIS_USER# UBIN;
      499     9521    1   DCL USER$ UBIN;
      500     9522    1   DCL THIS_USER$ UBIN;
      501     9523    1   DCL USER_SIZE UBIN;                     /*G$USER L6 word size                 */
      502     9524    1   DCL 1 FLGS,
      503     9525    1         2 F BIT(18) UNAL,
      504     9526    1         2 * BIT(18) UNAL;
      505     9527
      506     9528
      507     9529        /* G$USER data is packed into auto */
      508     9530    1   DCL FLAGS UBIN;
      509     9531    1   DCL ASYNCH UBIN;
      510     9532    1   DCL STATE UBIN;
      511     9533    1   DCL TXT_STATE CHAR(4);
      512     9534    1   DCL FLINK UBIN;
      513     9535    1   DCL BLINK UBIN;
      514     9536    1   DCL MISC$ UBIN;
      515     9537    1   DCL UTS UBIN;
      516     9538    1   DCL CLOCK UBIN;
      517     9539    1   DCL PCOUNT UBIN;
      518     9540    1   DCL MFCOUNT UBIN;
      519     9541    1   DCL MODE UBIN;
      520     9542    1   DCL DL$ UBIN;
      521     9543    1   DCL PRIO UBIN;
      522     9544    1   DCL PRIOB UBIN;
      523     9545    1   DCL UHJITPP UBIN;
      524     9546    1   DCL SYSID UBIN;
      525     9547    1   DCL HMI$ UBIN;
      526     9548
      527     9549        %FPT_TIME (SOURCE=FUTS,DEST=UTS);
      528     9568        %EJECT;
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:102  
      529     9569
      530     9570    1      USER_SIZE = (SIZEC(G$USER)+1) / 2;

   9570  3 000002   000030 235007                    LDA     24,DL
         3 000003   200117 755100                    STA     USER_SIZE,,AUTO

      531     9571    1      CALL DBM$GETBOBCAT(G$BOBCAT)

   9571  3 000004   200004 630500                    EPPR0   G$BOBCAT,,AUTO
         3 000005   200146 450500                    STP0    HMI$+4,,AUTO
         3 000006   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000007   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000010   000000 701000 xent               TSX1    DBM$GETBOBCAT
         3 000011   000013 702000 3                  TSX2    s:9572
         3 000012   000014 710000 3                  TRA     s:9573

      532     9572    2      WHENALTRETURN DO; RETURN; END;

   9572  3 000013   000000 702200 xent               TSX2  ! X66_ARET

      533     9573    1      CALL DBM$PACK4(G$BOBCAT.USRT$,USER$);

   9573  3 000014   200115 630500                    EPPR0   USER$,,AUTO
         3 000015   200147 450500                    STP0    HMI$+5,,AUTO
         3 000016   200020 631500                    EPPR1   G$BOBCAT+12,,AUTO
         3 000017   200146 451500                    STP1    HMI$+4,,AUTO
         3 000020   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000021   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000022   000000 701000 xent               TSX1    DBM$PACK4
         3 000023   000000 011000                    NOP     0

      534     9574    1      CALL DBM$PACK2(G$BOBCAT.MUIS,USER#);

   9574  3 000024   200113 630500                    EPPR0   USER#,,AUTO
         3 000025   200147 450500                    STP0    HMI$+5,,AUTO
         3 000026   200011 631500                    EPPR1   G$BOBCAT+5,,AUTO
         3 000027   200146 451500                    STP1    HMI$+4,,AUTO
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:103  
         3 000030   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000031   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000032   000000 701000 xent               TSX1    DBM$PACK2
         3 000033   000000 011000                    NOP     0

      535     9575    1      HEADER0 = 0;

   9575  3 000034   200106 450100                    STZ     HEADER0,,AUTO

      536     9576    1      HEADER1 = 0;

   9576  3 000035   200107 450100                    STZ     HEADER1,,AUTO

      537     9577
      538     9578    2      DO PASS=0 TO 1;

   9578  3 000036   200105 450100                    STZ     PASS,,AUTO

      539     9579    2           IF TOP.NSUBLKS=0

   9579  3 000037   200003 470500                    LDP0    @TOP,,AUTO
         3 000040   000001 220100                    LDX0    1,,PR0
         3 000041   000055 601000 3                  TNZ     s:9587

      540     9580    3           THEN DO;

      541     9581    4                DO I=1 TO USER#;

   9581  3 000042   000001 235007                    LDA     1,DL
         3 000043   200110 755100                    STA     I,,AUTO
         3 000044   000050 710000 3                  TRA     s:9583+1

      542     9582    4                     CALL DISP_USER;

   9582  3 000045   000316 701000 3                  TSX1    DISP_USER
         3 000046   000000 011000                    NOP     0

PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:104  
      543     9583    4                     END;

   9583  3 000047   200110 054100                    AOS     I,,AUTO
         3 000050   200113 236100                    LDQ     USER#,,AUTO
         3 000051   000045 604000 3                  TMI     s:9582
         3 000052   200110 116100                    CMPQ    I,,AUTO
         3 000053   000045 605000 3                  TPL     s:9582

      544     9584    3                END;

   9584  3 000054   000276 710000 3                  TRA     s:9623

      545     9585
      546     9586    3           ELSE DO;                        /*display a single usrt entry*/

      547     9587    4                DO X=0 TO TOP.NSUBLKS-1;

   9587  3 000055   200111 450100                    STZ     X,,AUTO
         3 000056   000270 710000 3                  TRA     s:9620+3

      548     9588    4                     CALL DBA$SELECTION(TOP.SUBLK$(X)->OUT,I);

   9588  3 000057   200003 470500                    LDP0    @TOP,,AUTO
         3 000060   200111 720100                    LXL0    X,,AUTO
         3 000061   000003 471510                    LDP1    3,X0,PR0
         3 000062   200110 633500                    EPPR3   I,,AUTO
         3 000063   200147 453500                    STP3    HMI$+5,,AUTO
         3 000064   200146 451500                    STP1    HMI$+4,,AUTO
         3 000065   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000066   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000067   000000 701000 xent               TSX1    DBA$SELECTION
         3 000070   000000 011000                    NOP     0

      549     9589    5                     IF I>0 THEN DO;

   9589  3 000071   200110 235100                    LDA     I,,AUTO
         3 000072   000106 604400 3                  TMOZ    s:9595
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:105  

      550     9590    5                          CALL DBM$SYSID2UN(I)

   9590  3 000073   200110 630500                    EPPR0   I,,AUTO
         3 000074   200146 450500                    STP0    HMI$+4,,AUTO
         3 000075   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000076   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000077   000000 701000 xent               TSX1    DBM$SYSID2UN
         3 000100   000104 702000 3                  TSX2    s:9592

      551     9591    6                          WHENRETURN DO; I=DB_CUN; END;

   9591  3 000101   000000 235000 xsym               LDA     DB_CUN
         3 000102   200110 755100                    STA     I,,AUTO

   9591  3 000103   000105 710000 3                  TRA     s:9593

      552     9592    6                          WHENALTRETURN DO; I=0; END;

   9592  3 000104   200110 450100                    STZ     I,,AUTO

      553     9593    5                          END;

   9593  3 000105   000110 710000 3                  TRA     s:9597

      554     9594    5                     ELSE DO;

      555     9595    5                          I = -I;

   9595  3 000106   000000 531000                    NEG     0
         3 000107   200110 755100                    STA     I,,AUTO

      556     9596    5                          END;

      557     9597    4                     IF (I > 0) AND (I <= USER#)

   9597  3 000110   200110 235100                    LDA     I,,AUTO
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:106  
         3 000111   000265 604400 3                  TMOZ    s:9620
         3 000112   200113 236100                    LDQ     USER#,,AUTO
         3 000113   000116 604000 3                  TMI     s:9599
         3 000114   200110 116100                    CMPQ    I,,AUTO
         3 000115   000265 604000 3                  TMI     s:9620

      558     9598    5                     THEN DO;

      559     9599    5                          CALL DISP_USER

   9599  3 000116   000316 701000 3                  TSX1    DISP_USER
         3 000117   000265 702000 3                  TSX2    s:9620

      560     9600    6                          WHENRETURN DO;

      561     9601    6                               IF PASS ~= 0   AND   TOP.NSUBLKS=1

   9601  3 000120   200105 235100                    LDA     PASS,,AUTO
         3 000121   000265 600000 3                  TZE     s:9620
         3 000122   200003 470500                    LDP0    @TOP,,AUTO
         3 000123   000001 220100                    LDX0    1,,PR0
         3 000124   000001 100003                    CMPX0   1,DU
         3 000125   000265 601000 3                  TNZ     s:9620

      562     9602    7                               THEN DO;

      563     9603    7                                    CALL DAF$WRITE(VECTOR(BLANK_LINE));

   9603  3 000126   000002 630400 4                  EPPR0   2
         3 000127   000000 220000 xsym               LDX0    DAF$WRITE
         3 000130   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000131   000000 701010                    TSX1    0,X0
         3 000132   000000 011000                    NOP     0

      564     9604    7                                    FLGS.F = G$USER.FLG;

   9604  3 000133   003100 060500                    CSL     bolr='003'O
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:107  
         3 000134   200071 000020                    BDSC    G$USER,,AUTO             by=0,bit=0,n=16
         3 000135   200146 000044                    BDSC    HMI$+4,,AUTO             by=0,bit=0,n=36
         3 000136   200146 220100                    LDX0    HMI$+4,,AUTO
         3 000137   200120 740100                    STX0    FLGS,,AUTO

      565     9605    7                                    USERFLG_TEXT.SREST = 'set: ';

   9605  3 000140   040000 100400                    MLR     fill='040'O
         3 000141   000143 000005 2                  ADSC9   MODECHAR+2               cn=0,n=5
         3 000142   000073 600011 1                  ADSC9   USERFLG_TEXT+1           cn=3,n=9

      566     9606    7                                   CALL DAF$WRITE(VECTOR(USERFLG_TEXT),VECTOR(FLGS.F))
              9606                                             ;

   9606  3 000143   377640 235007                    LDA     130976,DL
         3 000144   200146 452500                    STP2    HMI$+4,,AUTO
         3 000145   200146 236100                    LDQ     HMI$+4,,AUTO
         3 000146   000120 036003                    ADLQ    80,DU
         3 000147   200150 757100                    STAQ    HMI$+6,,AUTO
         3 000150   200150 630500                    EPPR0   HMI$+6,,AUTO
         3 000151   200153 450500                    STP0    HMI$+9,,AUTO
         3 000152   000006 236000 4                  LDQ     6
         3 000153   200152 756100                    STQ     HMI$+8,,AUTO
         3 000154   200152 630500                    EPPR0   HMI$+8,,AUTO
         3 000155   000000 221000 xsym               LDX1    DAF$WRITE
         3 000156   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000157   000000 701011                    TSX1    0,X1
         3 000160   000000 011000                    NOP     0

      567     9607    7                                    FLGS.F = ~(FLGS.F);

   9607  3 000161   200120 236100                    LDQ     FLGS,,AUTO
         3 000162   777777 376003                    ANQ     -1,DU
         3 000163   777777 676003                    ERQ     -1,DU
         3 000164   000022 772000                    QRL     18
         3 000165   000000 620006                    EAX0    0,QL
         3 000166   200120 740100                    STX0    FLGS,,AUTO
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:108  

      568     9608    7                                    USERFLG_TEXT.SREST = 'off: ';

   9608  3 000167   040000 100400                    MLR     fill='040'O
         3 000170   000145 000005 2                  ADSC9   MODECHAR+4               cn=0,n=5
         3 000171   000073 600011 1                  ADSC9   USERFLG_TEXT+1           cn=3,n=9

      569     9609    7                                   CALL DAF$WRITE(VECTOR(USERFLG_TEXT),VECTOR(FLGS.F))
              9609                                             ;

   9609  3 000172   377640 235007                    LDA     130976,DL
         3 000173   200146 452500                    STP2    HMI$+4,,AUTO
         3 000174   200146 236100                    LDQ     HMI$+4,,AUTO
         3 000175   000120 036003                    ADLQ    80,DU
         3 000176   200150 757100                    STAQ    HMI$+6,,AUTO
         3 000177   200150 630500                    EPPR0   HMI$+6,,AUTO
         3 000200   200153 450500                    STP0    HMI$+9,,AUTO
         3 000201   000006 236000 4                  LDQ     6
         3 000202   200152 756100                    STQ     HMI$+8,,AUTO
         3 000203   200152 630500                    EPPR0   HMI$+8,,AUTO
         3 000204   000000 221000 xsym               LDX1    DAF$WRITE
         3 000205   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000206   000000 701011                    TSX1    0,X1
         3 000207   000000 011000                    NOP     0

      570     9610
      571     9611    7                                    FLGS.F = G$USER.ASYNCH;

   9611  3 000210   003100 060500                    CSL     bolr='003'O
         3 000211   200071 400020                    BDSC    G$USER,,AUTO             by=2,bit=0,n=16
         3 000212   200146 000044                    BDSC    HMI$+4,,AUTO             by=0,bit=0,n=36
         3 000213   200146 220100                    LDX0    HMI$+4,,AUTO
         3 000214   200120 740100                    STX0    FLGS,,AUTO

      572     9612    7                                    ASYNC_TEXT.SREST = 'set: ';

   9612  3 000215   040000 100400                    MLR     fill='040'O
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:109  
         3 000216   000143 000005 2                  ADSC9   MODECHAR+2               cn=0,n=5
         3 000217   000126 600011 1                  ADSC9   ASYNC_TEXT+1             cn=3,n=9

      573     9613    7                                    CALL DAF$WRITE(VECTOR(ASYNC_TEXT),VECTOR(FLGS.F));

   9613  3 000220   377640 235007                    LDA     130976,DL
         3 000221   200146 452500                    STP2    HMI$+4,,AUTO
         3 000222   200146 236100                    LDQ     HMI$+4,,AUTO
         3 000223   000120 036003                    ADLQ    80,DU
         3 000224   200150 757100                    STAQ    HMI$+6,,AUTO
         3 000225   200150 630500                    EPPR0   HMI$+6,,AUTO
         3 000226   200153 450500                    STP0    HMI$+9,,AUTO
         3 000227   000012 236000 4                  LDQ     10
         3 000230   200152 756100                    STQ     HMI$+8,,AUTO
         3 000231   200152 630500                    EPPR0   HMI$+8,,AUTO
         3 000232   000000 221000 xsym               LDX1    DAF$WRITE
         3 000233   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000234   000000 701011                    TSX1    0,X1
         3 000235   000000 011000                    NOP     0

      574     9614    7                                    FLGS.F = ~(FLGS.F);

   9614  3 000236   200120 236100                    LDQ     FLGS,,AUTO
         3 000237   777777 376003                    ANQ     -1,DU
         3 000240   777777 676003                    ERQ     -1,DU
         3 000241   000022 772000                    QRL     18
         3 000242   000000 620006                    EAX0    0,QL
         3 000243   200120 740100                    STX0    FLGS,,AUTO

      575     9615    7                                    ASYNC_TEXT.SREST = 'off: ';

   9615  3 000244   040000 100400                    MLR     fill='040'O
         3 000245   000145 000005 2                  ADSC9   MODECHAR+4               cn=0,n=5
         3 000246   000126 600011 1                  ADSC9   ASYNC_TEXT+1             cn=3,n=9

      576     9616    7                                    CALL DAF$WRITE(VECTOR(ASYNC_TEXT),VECTOR(FLGS.F));

PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:110  
   9616  3 000247   377640 235007                    LDA     130976,DL
         3 000250   200146 452500                    STP2    HMI$+4,,AUTO
         3 000251   200146 236100                    LDQ     HMI$+4,,AUTO
         3 000252   000120 036003                    ADLQ    80,DU
         3 000253   200150 757100                    STAQ    HMI$+6,,AUTO
         3 000254   200150 630500                    EPPR0   HMI$+6,,AUTO
         3 000255   200153 450500                    STP0    HMI$+9,,AUTO
         3 000256   000012 236000 4                  LDQ     10
         3 000257   200152 756100                    STQ     HMI$+8,,AUTO
         3 000260   200152 630500                    EPPR0   HMI$+8,,AUTO
         3 000261   000000 221000 xsym               LDX1    DAF$WRITE
         3 000262   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000263   000000 701011                    TSX1    0,X1
         3 000264   000000 011000                    NOP     0

      577     9617    7                                    END/*do if disply single user*/;

      578     9618    6                               end/*return from disp_user*/;

      579     9619    5                          END/*do if valid user#*/;

      580     9620    4                     END/*do x=0 to top*/;

   9620  3 000265   200111 235100                    LDA     X,,AUTO
         3 000266   000001 035007                    ADLA    1,DL
         3 000267   200111 755100                    STA     X,,AUTO
         3 000270   200003 470500                    LDP0    @TOP,,AUTO
         3 000271   000001 236100                    LDQ     1,,PR0
         3 000272   000022 772000                    QRL     18
         3 000273   200111 116100                    CMPQ    X,,AUTO
         3 000274   000276 600000 3                  TZE     s:9623
         3 000275   000057 603000 3                  TRC     s:9588

      581     9621    3                END/*else do*/;

      582     9622
      583     9623    2           END/*do pass=0 to 1*/;
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:111  

   9623  3 000276   200105 235100                    LDA     PASS,,AUTO
         3 000277   000001 035007                    ADLA    1,DL
         3 000300   200105 755100                    STA     PASS,,AUTO
         3 000301   000002 115007                    CMPA    2,DL
         3 000302   000037 602000 3                  TNC     s:9579

      584     9624
      585     9625    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));

   9625  3 000303   000002 630400 4                  EPPR0   2
         3 000304   000000 220000 xsym               LDX0    DAF$WRITE
         3 000305   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000306   000000 701010                    TSX1    0,X0
         3 000307   000000 011000                    NOP     0

      586     9626    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));

   9626  3 000310   000002 630400 4                  EPPR0   2
         3 000311   000000 220000 xsym               LDX0    DAF$WRITE
         3 000312   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000313   000000 701010                    TSX1    0,X0
         3 000314   000000 011000                    NOP     0

      587     9627    1      RETURN;

   9627  3 000315   000000 702200 xent               TSX2  ! X66_ARET

      588     9628        %EJECT;
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:112  
      589     9629
      590     9630    1   DISP_USER: PROC ALTRET;

   9630  3 000316   200144 741300       DISP_USER    STX1  ! HMI$+2,,AUTO

      591     9631    2      THIS_USER$ = USER$ + (USER_SIZE *I);

   9631  3 000317   200117 236100                    LDQ     USER_SIZE,,AUTO
         3 000320   200110 402100                    MPY     I,,AUTO
         3 000321   200115 036100                    ADLQ    USER$,,AUTO
         3 000322   200116 756100                    STQ     THIS_USER$,,AUTO

      592     9632    2      CALL DBM$GETMEM(THIS_USER$,G$USER,0,SIZEC(G$USER),,SIZEC(G$USER))

   9632  3 000323   000014 236000 4                  LDQ     12
         3 000324   000001 235000 xsym               LDA     B_VECTNIL+1
         3 000325   200152 757100                    STAQ    HMI$+8,,AUTO
         3 000326   000016 237000 4                  LDAQ    14
         3 000327   200150 757100                    STAQ    HMI$+6,,AUTO
         3 000330   200071 630500                    EPPR0   G$USER,,AUTO
         3 000331   200147 450500                    STP0    HMI$+5,,AUTO
         3 000332   200116 631500                    EPPR1   THIS_USER$,,AUTO
         3 000333   200146 451500                    STP1    HMI$+4,,AUTO
         3 000334   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000335   000024 631400 xsym               EPPR1   B_VECTNIL+20
         3 000336   000000 701000 xent               TSX1    DBM$GETMEM
         3 000337   000341 702000 3                  TSX2    s:9633
         3 000340   000343 710000 3                  TRA     s:9635

      593     9633    3      WHENALTRETURN DO; ALTRETURN; END;

   9633  3 000341   200144 221300                    LDX1  ! HMI$+2,,AUTO
         3 000342   000000 702211                    TSX2  ! 0,X1

      594     9634
      595     9635    2      CALL DBM$PACK2(G$USER.US,STATE);

PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:113  
   9635  3 000343   200123 630500                    EPPR0   STATE,,AUTO
         3 000344   200147 450500                    STP0    HMI$+5,,AUTO
         3 000345   200072 631500                    EPPR1   G$USER+1,,AUTO
         3 000346   200146 451500                    STP1    HMI$+4,,AUTO
         3 000347   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000350   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000351   000000 701000 xent               TSX1    DBM$PACK2
         3 000352   000000 011000                    NOP     0

      596     9636    2      IF STATE = %GH_NULL THEN RETURN;

   9636  3 000353   200123 235100                    LDA     STATE,,AUTO
         3 000354   000037 115007                    CMPA    31,DL
         3 000355   000360 601000 3                  TNZ     s:9637

   9636  3 000356   200144 221300                    LDX1  ! HMI$+2,,AUTO
         3 000357   000001 702211                    TSX2  ! 1,X1

      597     9637    2      CALL DBM$PACK2(G$USER.SYSID,SYSID);

   9637  3 000360   200141 630500                    EPPR0   SYSID,,AUTO
         3 000361   200147 450500                    STP0    HMI$+5,,AUTO
         3 000362   200150 452500                    STP2    HMI$+6,,AUTO
         3 000363   200150 236100                    LDQ     HMI$+6,,AUTO
         3 000364   000020 036000 4                  ADLQ    16
         3 000365   200146 756100                    STQ     HMI$+4,,AUTO
         3 000366   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000367   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000370   000000 701000 xent               TSX1    DBM$PACK2
         3 000371   000000 011000                    NOP     0

      598     9638
      599     9639    2      IF PASS = 0

   9639  3 000372   200105 235100                    LDA     PASS,,AUTO
         3 000373   000670 601000 3                  TNZ     s:9675

PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:114  
      600     9640    3      THEN DO;

      601     9641    3           IF HEADER0 = 0

   9641  3 000374   200106 236100                    LDQ     HEADER0,,AUTO
         3 000375   000404 601000 3                  TNZ     s:9647

      602     9642    4           THEN DO;

      603     9643    4                CALL DAF$INIT(USERRPT1);

   9643  3 000376   000021 630400 4                  EPPR0   17
         3 000377   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000400   000000 701000 xent               TSX1    DAF$INIT
         3 000401   000000 011000                    NOP     0

      604     9644    4                HEADER0 = 1;

   9644  3 000402   000001 235007                    LDA     1,DL
         3 000403   200106 755100                    STA     HEADER0,,AUTO

      605     9645    4                END;

      606     9646
      607     9647    3           IF STATE > %GH_NULL

   9647  3 000404   200123 235100                    LDA     STATE,,AUTO
         3 000405   000040 115007                    CMPA    32,DL
         3 000406   000412 602000 3                  TNC     s:9649

      608     9648    3           THEN TXT_STATE = 'ILGL';

   9648  3 000407   000147 236000 2                  LDQ     MODECHAR+6
         3 000410   200124 756100                    STQ     TXT_STATE,,AUTO
         3 000411   000414 710000 3                  TRA     s:9651

      609     9649    3           ELSE TXT_STATE = G_STTTXT(STATE);
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:115  

   9649  3 000412   000101 236005 2                  LDQ     G_STTTXT,AL
         3 000413   200124 756100                    STQ     TXT_STATE,,AUTO

      610     9650
      611     9651    3           CALL DBM$PACK2(G$USER.FLG,FLAGS);

   9651  3 000414   200121 630500                    EPPR0   FLAGS,,AUTO
         3 000415   200147 450500                    STP0    HMI$+5,,AUTO
         3 000416   200071 631500                    EPPR1   G$USER,,AUTO
         3 000417   200146 451500                    STP1    HMI$+4,,AUTO
         3 000420   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000421   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000422   000000 701000 xent               TSX1    DBM$PACK2
         3 000423   000000 011000                    NOP     0

      612     9652    3           CALL DBM$PACK2(G$USER.ASYNCH,ASYNCH);

   9652  3 000424   200122 630500                    EPPR0   ASYNCH,,AUTO
         3 000425   200147 450500                    STP0    HMI$+5,,AUTO
         3 000426   200150 452500                    STP2    HMI$+6,,AUTO
         3 000427   200150 236100                    LDQ     HMI$+6,,AUTO
         3 000430   000022 036000 4                  ADLQ    18
         3 000431   200146 756100                    STQ     HMI$+4,,AUTO
         3 000432   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000433   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000434   000000 701000 xent               TSX1    DBM$PACK2
         3 000435   000000 011000                    NOP     0

      613     9653    3           CALL DBM$PACK2(G$USER.FL,FLINK);

   9653  3 000436   200125 630500                    EPPR0   FLINK,,AUTO
         3 000437   200147 450500                    STP0    HMI$+5,,AUTO
         3 000440   200150 452500                    STP2    HMI$+6,,AUTO
         3 000441   200150 236100                    LDQ     HMI$+6,,AUTO
         3 000442   000023 036000 4                  ADLQ    19
         3 000443   200146 756100                    STQ     HMI$+4,,AUTO
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:116  
         3 000444   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000445   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000446   000000 701000 xent               TSX1    DBM$PACK2
         3 000447   000000 011000                    NOP     0

      614     9654    3           CALL DBM$PACK2(G$USER.BL,BLINK);

   9654  3 000450   200126 630500                    EPPR0   BLINK,,AUTO
         3 000451   200147 450500                    STP0    HMI$+5,,AUTO
         3 000452   200073 631500                    EPPR1   G$USER+2,,AUTO
         3 000453   200146 451500                    STP1    HMI$+4,,AUTO
         3 000454   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000455   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000456   000000 701000 xent               TSX1    DBM$PACK2
         3 000457   000000 011000                    NOP     0

      615     9655    3           CALL DBM$PACK4(G$USER.MISC$,MISC$);

   9655  3 000460   200127 630500                    EPPR0   MISC$,,AUTO
         3 000461   200147 450500                    STP0    HMI$+5,,AUTO
         3 000462   200150 452500                    STP2    HMI$+6,,AUTO
         3 000463   200150 236100                    LDQ     HMI$+6,,AUTO
         3 000464   000024 036000 4                  ADLQ    20
         3 000465   200146 756100                    STQ     HMI$+4,,AUTO
         3 000466   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000467   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000470   000000 701000 xent               TSX1    DBM$PACK4
         3 000471   000000 011000                    NOP     0

      616     9656    3           CALL DBM$PACK4(G$USER.DL$,DL$);

   9656  3 000472   200135 630500                    EPPR0   DL$,,AUTO
         3 000473   200147 450500                    STP0    HMI$+5,,AUTO
         3 000474   200150 452500                    STP2    HMI$+6,,AUTO
         3 000475   200150 236100                    LDQ     HMI$+6,,AUTO
         3 000476   000025 036000 4                  ADLQ    21
         3 000477   200146 756100                    STQ     HMI$+4,,AUTO
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:117  
         3 000500   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000501   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000502   000000 701000 xent               TSX1    DBM$PACK4
         3 000503   000000 011000                    NOP     0

      617     9657    3           CALL DBM$PACK4(G$USER.HMI$,HMI$);

   9657  3 000504   200142 630500                    EPPR0   HMI$,,AUTO
         3 000505   200147 450500                    STP0    HMI$+5,,AUTO
         3 000506   200103 631500                    EPPR1   G$USER+10,,AUTO
         3 000507   200146 451500                    STP1    HMI$+4,,AUTO
         3 000510   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000511   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000512   000000 701000 xent               TSX1    DBM$PACK4
         3 000513   000000 011000                    NOP     0

      618     9658
      619     9659
      620     9660    3           CALL DAF$WRITE(VECTOR(USER_FMT1),
      621     9661    3             VECTOR(I),
      622     9662    3             VECTOR(FLINK),
      623     9663    3             VECTOR(BLINK),
      624     9664    3             VECTOR(SYSID),
      625     9665    3             VECTOR(MODECHAR(G$USER.MODE)),
      626     9666    3             VECTOR(TXT_STATE),
      627     9667    3             VECTOR(FLAGS),
      628     9668    3             VECTOR(ASYNCH),

   9668  3 000514   777640 235007                    LDA     -96,DL
         3 000515   200146 452500                    STP2    HMI$+4,,AUTO
         3 000516   200146 236100                    LDQ     HMI$+4,,AUTO
         3 000517   000110 036003                    ADLQ    72,DU
         3 000520   200150 757100                    STAQ    HMI$+6,,AUTO
         3 000521   777640 235007                    LDA     -96,DL
         3 000522   200152 452500                    STP2    HMI$+8,,AUTO
         3 000523   200152 236100                    LDQ     HMI$+8,,AUTO
         3 000524   000125 036003                    ADLQ    85,DU
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:118  
         3 000525   200154 757100                    STAQ    HMI$+10,,AUTO
         3 000526   777640 235007                    LDA     -96,DL
         3 000527   200156 452500                    STP2    HMI$+12,,AUTO
         3 000530   200156 236100                    LDQ     HMI$+12,,AUTO
         3 000531   000126 036003                    ADLQ    86,DU
         3 000532   200160 757100                    STAQ    HMI$+14,,AUTO
         3 000533   777640 235007                    LDA     -96,DL
         3 000534   200162 452500                    STP2    HMI$+16,,AUTO
         3 000535   200162 236100                    LDQ     HMI$+16,,AUTO
         3 000536   000141 036003                    ADLQ    97,DU
         3 000537   200164 757100                    STAQ    HMI$+18,,AUTO
         3 000540   200077 236100                    LDQ     G$USER+6,,AUTO
         3 000541   000033 772000                    QRL     27
         3 000542   177640 235007                    LDA     65440,DL
         3 000543   000020 736000                    QLS     16
         3 000544   000030 036000 4                  ADLQ    24
         3 000545   200166 757100                    STAQ    HMI$+20,,AUTO
         3 000546   777640 235007                    LDA     -96,DL
         3 000547   200170 452500                    STP2    HMI$+22,,AUTO
         3 000550   200170 236100                    LDQ     HMI$+22,,AUTO
         3 000551   000124 036003                    ADLQ    84,DU
         3 000552   200172 757100                    STAQ    HMI$+24,,AUTO
         3 000553   777640 235007                    LDA     -96,DL
         3 000554   200174 452500                    STP2    HMI$+26,,AUTO
         3 000555   200174 236100                    LDQ     HMI$+26,,AUTO
         3 000556   000121 036003                    ADLQ    81,DU
         3 000557   200176 757100                    STAQ    HMI$+28,,AUTO
         3 000560   777640 235007                    LDA     -96,DL
         3 000561   200200 452500                    STP2    HMI$+30,,AUTO
         3 000562   200200 236100                    LDQ     HMI$+30,,AUTO
         3 000563   000122 036003                    ADLQ    82,DU
         3 000564   200202 757100                    STAQ    HMI$+32,,AUTO
         3 000565   777640 235007                    LDA     -96,DL
         3 000566   200204 452500                    STP2    HMI$+34,,AUTO
         3 000567   200204 236100                    LDQ     HMI$+34,,AUTO
         3 000570   000135 036003                    ADLQ    93,DU
         3 000571   200206 757100                    STAQ    HMI$+36,,AUTO
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:119  
         3 000572   777640 235007                    LDA     -96,DL
         3 000573   200210 452500                    STP2    HMI$+38,,AUTO
         3 000574   200210 236100                    LDQ     HMI$+38,,AUTO
         3 000575   000127 036003                    ADLQ    87,DU
         3 000576   200212 757100                    STAQ    HMI$+40,,AUTO
         3 000577   777640 235007                    LDA     -96,DL
         3 000600   200214 452500                    STP2    HMI$+42,,AUTO
         3 000601   200214 236100                    LDQ     HMI$+42,,AUTO
         3 000602   000142 036003                    ADLQ    98,DU
         3 000603   200220 757100                    STAQ    HMI$+46,,AUTO
         3 000604   200150 237100                    LDAQ    HMI$+6,,AUTO
         3 000605   200216 757100                    STAQ    HMI$+44,,AUTO
         3 000606   200154 237100                    LDAQ    HMI$+10,,AUTO
         3 000607   200222 757100                    STAQ    HMI$+48,,AUTO
         3 000610   200160 237100                    LDAQ    HMI$+14,,AUTO
         3 000611   200224 757100                    STAQ    HMI$+50,,AUTO
         3 000612   200164 237100                    LDAQ    HMI$+18,,AUTO
         3 000613   200226 757100                    STAQ    HMI$+52,,AUTO
         3 000614   200166 237100                    LDAQ    HMI$+20,,AUTO
         3 000615   200230 757100                    STAQ    HMI$+54,,AUTO
         3 000616   200172 237100                    LDAQ    HMI$+24,,AUTO
         3 000617   200232 757100                    STAQ    HMI$+56,,AUTO
         3 000620   200176 237100                    LDAQ    HMI$+28,,AUTO
         3 000621   200234 757100                    STAQ    HMI$+58,,AUTO
         3 000622   200202 237100                    LDAQ    HMI$+32,,AUTO
         3 000623   200236 757100                    STAQ    HMI$+60,,AUTO
         3 000624   200206 237100                    LDAQ    HMI$+36,,AUTO
         3 000625   200240 757100                    STAQ    HMI$+62,,AUTO
         3 000626   200212 237100                    LDAQ    HMI$+40,,AUTO
         3 000627   200242 757100                    STAQ    HMI$+64,,AUTO
         3 000630   200220 237100                    LDAQ    HMI$+46,,AUTO
         3 000631   200244 757100                    STAQ    HMI$+66,,AUTO
         3 000632   200244 630500                    EPPR0   HMI$+66,,AUTO
         3 000633   200261 450500                    STP0    HMI$+79,,AUTO
         3 000634   200242 631500                    EPPR1   HMI$+64,,AUTO
         3 000635   200260 451500                    STP1    HMI$+78,,AUTO
         3 000636   200240 633500                    EPPR3   HMI$+62,,AUTO
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:120  
         3 000637   200257 453500                    STP3    HMI$+77,,AUTO
         3 000640   200236 634500                    EPPR4   HMI$+60,,AUTO
         3 000641   200256 454500                    STP4    HMI$+76,,AUTO
         3 000642   200234 635500                    EPPR5   HMI$+58,,AUTO
         3 000643   200255 455500                    STP5    HMI$+75,,AUTO
         3 000644   200232 636500                    EPPR6   HMI$+56,,AUTO
         3 000645   200254 456500                    STP6    HMI$+74,,AUTO
         3 000646   200230 637500                    EPPR7   HMI$+54,,AUTO
         3 000647   200253 457500                    STP7    HMI$+73,,AUTO
         3 000650   200226 630500                    EPPR0   HMI$+52,,AUTO
         3 000651   200252 450500                    STP0    HMI$+72,,AUTO
         3 000652   200224 630500                    EPPR0   HMI$+50,,AUTO
         3 000653   200251 450500                    STP0    HMI$+71,,AUTO
         3 000654   200222 630500                    EPPR0   HMI$+48,,AUTO
         3 000655   200250 450500                    STP0    HMI$+70,,AUTO
         3 000656   200216 630500                    EPPR0   HMI$+44,,AUTO
         3 000657   200247 450500                    STP0    HMI$+69,,AUTO
         3 000660   000032 236000 4                  LDQ     26
         3 000661   200246 756100                    STQ     HMI$+68,,AUTO
         3 000662   200246 630500                    EPPR0   HMI$+68,,AUTO
         3 000663   000000 220000 xsym               LDX0    DAF$WRITE
         3 000664   000031 631400 4                  EPPR1   25
         3 000665   000000 701010                    TSX1    0,X0
         3 000666   000000 011000                    NOP     0

      629     9669    3             VECTOR(DL$),
      630     9670    3             VECTOR(MISC$),
      631     9671    3             VECTOR(HMI$));
      632     9672    3           END/*pass 0*/;

   9672  3 000667   001164 710000 3                  TRA     s:9707

      633     9673
      634     9674    3      ELSE DO;

      635     9675    3           IF HEADER1 = 0

PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:121  
   9675  3 000670   200107 236100                    LDQ     HEADER1,,AUTO
         3 000671   000720 601000 3                  TNZ     s:9684

      636     9676    4           THEN DO;

      637     9677    4                CALL DAF$WRITE(VECTOR(BLANK_LINE));

   9677  3 000672   000002 630400 4                  EPPR0   2
         3 000673   000000 220000 xsym               LDX0    DAF$WRITE
         3 000674   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000675   000000 701010                    TSX1    0,X0
         3 000676   000000 011000                    NOP     0

      638     9678    4                CALL DAF$WRITE(VECTOR(BLANK_LINE));

   9678  3 000677   000002 630400 4                  EPPR0   2
         3 000700   000000 220000 xsym               LDX0    DAF$WRITE
         3 000701   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000702   000000 701010                    TSX1    0,X0
         3 000703   000000 011000                    NOP     0

      639     9679    4                CALL DAF$WRITE(VECTOR(USERRPT2));

   9679  3 000704   000036 630400 4                  EPPR0   30
         3 000705   000000 220000 xsym               LDX0    DAF$WRITE
         3 000706   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000707   000000 701010                    TSX1    0,X0
         3 000710   000000 011000                    NOP     0

      640     9680    4                CALL DAF$WRITE(VECTOR(USERRPT3));

   9680  3 000711   000042 630400 4                  EPPR0   34
         3 000712   000000 220000 xsym               LDX0    DAF$WRITE
         3 000713   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000714   000000 701010                    TSX1    0,X0
         3 000715   000000 011000                    NOP     0

PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:122  
      641     9681    4                HEADER1 = 1;

   9681  3 000716   000001 235007                    LDA     1,DL
         3 000717   200107 755100                    STA     HEADER1,,AUTO

      642     9682    4                END;

      643     9683
      644     9684    3           CALL DBM$PACK2(G$USER.CLOCK,CLOCK);

   9684  3 000720   200131 630500                    EPPR0   CLOCK,,AUTO
         3 000721   200147 450500                    STP0    HMI$+5,,AUTO
         3 000722   200150 452500                    STP2    HMI$+6,,AUTO
         3 000723   200150 236100                    LDQ     HMI$+6,,AUTO
         3 000724   000043 036000 4                  ADLQ    35
         3 000725   200146 756100                    STQ     HMI$+4,,AUTO
         3 000726   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000727   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000730   000000 701000 xent               TSX1    DBM$PACK2
         3 000731   000000 011000                    NOP     0

      645     9685    3           CALL DBM$PACK2(G$USER.PCT,PCOUNT);

   9685  3 000732   200132 630500                    EPPR0   PCOUNT,,AUTO
         3 000733   200147 450500                    STP0    HMI$+5,,AUTO
         3 000734   200076 631500                    EPPR1   G$USER+5,,AUTO
         3 000735   200146 451500                    STP1    HMI$+4,,AUTO
         3 000736   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000737   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000740   000000 701000 xent               TSX1    DBM$PACK2
         3 000741   000000 011000                    NOP     0

      646     9686    3           CALL DBM$PACK1(G$USER.MF,MFCOUNT);

   9686  3 000742   200133 630500                    EPPR0   MFCOUNT,,AUTO
         3 000743   200147 450500                    STP0    HMI$+5,,AUTO
         3 000744   200150 452500                    STP2    HMI$+6,,AUTO
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:123  
         3 000745   200150 236100                    LDQ     HMI$+6,,AUTO
         3 000746   000044 036000 4                  ADLQ    36
         3 000747   200146 756100                    STQ     HMI$+4,,AUTO
         3 000750   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000751   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000752   000000 701000 xent               TSX1    DBM$PACK1
         3 000753   000000 011000                    NOP     0

      647     9687    3           CALL DBM$PACK2(G$USER.PRIO,PRIO);

   9687  3 000754   200136 630500                    EPPR0   PRIO,,AUTO
         3 000755   200147 450500                    STP0    HMI$+5,,AUTO
         3 000756   200150 452500                    STP2    HMI$+6,,AUTO
         3 000757   200150 236100                    LDQ     HMI$+6,,AUTO
         3 000760   000045 036000 4                  ADLQ    37
         3 000761   200146 756100                    STQ     HMI$+4,,AUTO
         3 000762   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000763   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000764   000000 701000 xent               TSX1    DBM$PACK2
         3 000765   000000 011000                    NOP     0

      648     9688    3           CALL DBM$PACK2(G$USER.PRIOB,PRIOB);

   9688  3 000766   200137 630500                    EPPR0   PRIOB,,AUTO
         3 000767   200147 450500                    STP0    HMI$+5,,AUTO
         3 000770   200101 631500                    EPPR1   G$USER+8,,AUTO
         3 000771   200146 451500                    STP1    HMI$+4,,AUTO
         3 000772   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 000773   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000774   000000 701000 xent               TSX1    DBM$PACK2
         3 000775   000000 011000                    NOP     0

      649     9689    3           CALL DBM$PACK4(G$USER.UHJITPP,UHJITPP);

   9689  3 000776   200140 630500                    EPPR0   UHJITPP,,AUTO
         3 000777   200147 450500                    STP0    HMI$+5,,AUTO
         3 001000   200150 452500                    STP2    HMI$+6,,AUTO
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:124  
         3 001001   200150 236100                    LDQ     HMI$+6,,AUTO
         3 001002   000046 036000 4                  ADLQ    38
         3 001003   200146 756100                    STQ     HMI$+4,,AUTO
         3 001004   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 001005   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 001006   000000 701000 xent               TSX1    DBM$PACK4
         3 001007   000000 011000                    NOP     0

      650     9690
      651     9691    3           CALL DBM$PACK4(G$USER.UTS,UTS);

   9691  3 001010   200130 630500                    EPPR0   UTS,,AUTO
         3 001011   200147 450500                    STP0    HMI$+5,,AUTO
         3 001012   200150 452500                    STP2    HMI$+6,,AUTO
         3 001013   200150 236100                    LDQ     HMI$+6,,AUTO
         3 001014   000047 036000 4                  ADLQ    39
         3 001015   200146 756100                    STQ     HMI$+4,,AUTO
         3 001016   200146 630500                    EPPR0   HMI$+4,,AUTO
         3 001017   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 001020   000000 701000 xent               TSX1    DBM$PACK4
         3 001021   000000 011000                    NOP     0

      652     9692    3           FPT_TIME.TSTAMP_ = VECTOR(UTS);

   9692  3 001022   777640 235007                    LDA     -96,DL
         3 001023   200146 452500                    STP2    HMI$+4,,AUTO
         3 001024   200146 236100                    LDQ     HMI$+4,,AUTO
         3 001025   000130 036003                    ADLQ    88,DU
         3 001026   000200 757000 1                  STAQ    FPT_TIME+8

      653     9693    4           CALL M$TIME(FPT_TIME) WHENALTRETURN DO; END;

   9693  3 001027   000170 630400 1                  EPPR0   FPT_TIME
         3 001030   420004 713400                    CLIMB   alt,+8196
         3 001031   402000 401760                    pmme    nvectors=5
         3 001032   001034 702000 3                  TSX2    s:9705
         3 001033   001034 710000 3                  TRA     s:9705
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:125  

      654     9694
      655     9695
      656     9696    3           CALL DAF$WRITE(VECTOR(USER_FMT2),
      657     9697    3             VECTOR(I),
      658     9698    3             VECTOR(SYSID),
      659     9699    3             VECTOR(UHJITPP),
      660     9700    3             VECTOR(MFCOUNT),
      661     9701    3             VECTOR(CLOCK),
      662     9702    3             VECTOR(UTS),
      663     9703    3             VECTOR(PRIO),
      664     9704    3             VECTOR(PRIOB),
      665     9705    3             VECTOR(THIS_USER$));

   9705  3 001034   777640 235007                    LDA     -96,DL
         3 001035   200146 452500                    STP2    HMI$+4,,AUTO
         3 001036   200146 236100                    LDQ     HMI$+4,,AUTO
         3 001037   000110 036003                    ADLQ    72,DU
         3 001040   200150 757100                    STAQ    HMI$+6,,AUTO
         3 001041   777640 235007                    LDA     -96,DL
         3 001042   200152 452500                    STP2    HMI$+8,,AUTO
         3 001043   200152 236100                    LDQ     HMI$+8,,AUTO
         3 001044   000141 036003                    ADLQ    97,DU
         3 001045   200154 757100                    STAQ    HMI$+10,,AUTO
         3 001046   777640 235007                    LDA     -96,DL
         3 001047   200156 452500                    STP2    HMI$+12,,AUTO
         3 001050   200156 236100                    LDQ     HMI$+12,,AUTO
         3 001051   000140 036003                    ADLQ    96,DU
         3 001052   200160 757100                    STAQ    HMI$+14,,AUTO
         3 001053   777640 235007                    LDA     -96,DL
         3 001054   200162 452500                    STP2    HMI$+16,,AUTO
         3 001055   200162 236100                    LDQ     HMI$+16,,AUTO
         3 001056   000133 036003                    ADLQ    91,DU
         3 001057   200164 757100                    STAQ    HMI$+18,,AUTO
         3 001060   777640 235007                    LDA     -96,DL
         3 001061   200166 452500                    STP2    HMI$+20,,AUTO
         3 001062   200166 236100                    LDQ     HMI$+20,,AUTO
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:126  
         3 001063   000131 036003                    ADLQ    89,DU
         3 001064   200170 757100                    STAQ    HMI$+22,,AUTO
         3 001065   777640 235007                    LDA     -96,DL
         3 001066   200172 452500                    STP2    HMI$+24,,AUTO
         3 001067   200172 236100                    LDQ     HMI$+24,,AUTO
         3 001070   000130 036003                    ADLQ    88,DU
         3 001071   200174 757100                    STAQ    HMI$+26,,AUTO
         3 001072   777640 235007                    LDA     -96,DL
         3 001073   200176 452500                    STP2    HMI$+28,,AUTO
         3 001074   200176 236100                    LDQ     HMI$+28,,AUTO
         3 001075   000136 036003                    ADLQ    94,DU
         3 001076   200200 757100                    STAQ    HMI$+30,,AUTO
         3 001077   777640 235007                    LDA     -96,DL
         3 001100   200202 452500                    STP2    HMI$+32,,AUTO
         3 001101   200202 236100                    LDQ     HMI$+32,,AUTO
         3 001102   000137 036003                    ADLQ    95,DU
         3 001103   200204 757100                    STAQ    HMI$+34,,AUTO
         3 001104   777640 235007                    LDA     -96,DL
         3 001105   200206 452500                    STP2    HMI$+36,,AUTO
         3 001106   200206 236100                    LDQ     HMI$+36,,AUTO
         3 001107   000116 036003                    ADLQ    78,DU
         3 001110   200212 757100                    STAQ    HMI$+40,,AUTO
         3 001111   200150 237100                    LDAQ    HMI$+6,,AUTO
         3 001112   200210 757100                    STAQ    HMI$+38,,AUTO
         3 001113   200154 237100                    LDAQ    HMI$+10,,AUTO
         3 001114   200214 757100                    STAQ    HMI$+42,,AUTO
         3 001115   200160 237100                    LDAQ    HMI$+14,,AUTO
         3 001116   200216 757100                    STAQ    HMI$+44,,AUTO
         3 001117   200164 237100                    LDAQ    HMI$+18,,AUTO
         3 001120   200220 757100                    STAQ    HMI$+46,,AUTO
         3 001121   200170 237100                    LDAQ    HMI$+22,,AUTO
         3 001122   200222 757100                    STAQ    HMI$+48,,AUTO
         3 001123   200174 237100                    LDAQ    HMI$+26,,AUTO
         3 001124   200224 757100                    STAQ    HMI$+50,,AUTO
         3 001125   200200 237100                    LDAQ    HMI$+30,,AUTO
         3 001126   200226 757100                    STAQ    HMI$+52,,AUTO
         3 001127   200204 237100                    LDAQ    HMI$+34,,AUTO
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:127  
         3 001130   200230 757100                    STAQ    HMI$+54,,AUTO
         3 001131   200212 237100                    LDAQ    HMI$+40,,AUTO
         3 001132   200232 757100                    STAQ    HMI$+56,,AUTO
         3 001133   200232 630500                    EPPR0   HMI$+56,,AUTO
         3 001134   200245 450500                    STP0    HMI$+67,,AUTO
         3 001135   200230 631500                    EPPR1   HMI$+54,,AUTO
         3 001136   200244 451500                    STP1    HMI$+66,,AUTO
         3 001137   200226 633500                    EPPR3   HMI$+52,,AUTO
         3 001140   200243 453500                    STP3    HMI$+65,,AUTO
         3 001141   200224 634500                    EPPR4   HMI$+50,,AUTO
         3 001142   200242 454500                    STP4    HMI$+64,,AUTO
         3 001143   200222 635500                    EPPR5   HMI$+48,,AUTO
         3 001144   200241 455500                    STP5    HMI$+63,,AUTO
         3 001145   200220 636500                    EPPR6   HMI$+46,,AUTO
         3 001146   200240 456500                    STP6    HMI$+62,,AUTO
         3 001147   200216 637500                    EPPR7   HMI$+44,,AUTO
         3 001150   200237 457500                    STP7    HMI$+61,,AUTO
         3 001151   200214 630500                    EPPR0   HMI$+42,,AUTO
         3 001152   200236 450500                    STP0    HMI$+60,,AUTO
         3 001153   200210 630500                    EPPR0   HMI$+38,,AUTO
         3 001154   200235 450500                    STP0    HMI$+59,,AUTO
         3 001155   000053 236000 4                  LDQ     43
         3 001156   200234 756100                    STQ     HMI$+58,,AUTO
         3 001157   200234 630500                    EPPR0   HMI$+58,,AUTO
         3 001160   000000 220000 xsym               LDX0    DAF$WRITE
         3 001161   000052 631400 4                  EPPR1   42
         3 001162   000000 701010                    TSX1    0,X0
         3 001163   000000 011000                    NOP     0

      666     9706    3           END;

      667     9707    2   END DISP_USER;

   9707  3 001164   200144 221300                    LDX1  ! HMI$+2,,AUTO
         3 001165   000001 702211                    TSX2  ! 1,X1
      668     9708
      669     9709    1   END DBD$USRT;
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:128  
      670     9710        %EOD;

PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:129  
--  Include file information  --

   XU_MACRO_C.:E05TOU  is referenced.
   DA_FORMAT_C.:E05TOU  is referenced.
   GH_SCHD_E.:E05TOU  is referenced.
   GH_SCHD_M.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBD$USRT.
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:130  

 **** Variables and constants ****

  ****  Section 001  Data  DBD$USRT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

   125-0-0/c STRC(1224)  r     1 ASYNC_TEXT               170-0-0/d STRC(432)   r     1 FPT_TIME
    72-0-0/c STRC(972)   r     1 USERFLG_TEXT               0-0-0/w STRC(288)   r     1 USERRPT1
    16-0-0/w STRC(144)   r     1 USERRPT1HD00              44-0-0/w STRC(144)   r     1 USERRPT1HD01
    10-0-0/c STRC(198)   r     1 USERRPT1TX00              22-0-0/c STRC(648)   r     1 USERRPT1TX01
    50-0-0/c STRC(648)   r     1 USERRPT1TX02

  ****  Section 002 RoData DBD$USRT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

   101-0-0/c CHAR(4)     r     1 G_STTTXT(0:31)
   141-0-0/c CHAR        r     1 MODECHAR(0:4)
    22-0-0/c CHAR(61)    r     1 USERRPT2                  42-0-0/c CHAR(62)    r     1 USERRPT3
     0-0-0/c CHAR(69)    r     1 USER_FMT1                 62-0-0/c CHAR(57)    r     1 USER_FMT2

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @TOP                     122-0-0/w UBIN        r     1 ASYNCH
   126-0-0/w UBIN        r     1 BLINK                    131-0-0/w UBIN        r     1 CLOCK
   135-0-0/w UBIN        r     1 DL$                      121-0-0/w UBIN        r     1 FLAGS
   120-0-0/b STRC        r     1 FLGS                     125-0-0/w UBIN        r     1 FLINK
     4-0-0/w STRC(1908)  r     1 G$BOBCAT                  71-0-0/w STRC(432)   r     1 G$USER
   106-0-0/w UBIN        r     1 HEADER0                  107-0-0/w UBIN        r     1 HEADER1
   142-0-0/w UBIN        r     1 HMI$                     110-0-0/w SBIN        r     1 I
   133-0-0/w UBIN        r     1 MFCOUNT                  127-0-0/w UBIN        r     1 MISC$
   105-0-0/w UBIN        r     1 PASS                     132-0-0/w UBIN        r     1 PCOUNT
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:131  
   136-0-0/w UBIN        r     1 PRIO                     137-0-0/w UBIN        r     1 PRIOB
   123-0-0/w UBIN        r     1 STATE                    141-0-0/w UBIN        r     1 SYSID
   116-0-0/w UBIN        r     1 THIS_USER$                *0-0-0/w STRC(144)   r     1 TOP
   124-0-0/c CHAR(4)     r     1 TXT_STATE                140-0-0/w UBIN        r     1 UHJITPP
   113-0-0/w UBIN        r     1 USER#                    115-0-0/w UBIN        r     1 USER$
   117-0-0/w UBIN        r     1 USER_SIZE                130-0-0/w UBIN        r     1 UTS
   111-0-0/w UBIN        r     1 X

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(4)     r     1 BLANK_LINE                 0-0-0/w EPTR        r     1 DAF$WRITE
     0-0-0/w UBIN        r     1 DB_CUN

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(144)   r     1 OUT


   Procedure DBD$USRT requires 630 words for executable code.
   Procedure DBD$USRT requires 178 words of local(AUTO) storage.
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:132  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:133  
          MINI XREF LISTING

ASYNCH
      9531**DCL      9652<>CALL     9668--CALL
ASYNC_TEXT
      9504**DCL      9613--CALL     9616--CALL
ASYNC_TEXT.SREST
      9504**DCL      9612<<ASSIGN   9615<<ASSIGN
BLANK_LINE
      9465**DCL      9603--CALL     9625--CALL     9626--CALL     9677--CALL     9678--CALL
BLINK
      9535**DCL      9654<>CALL     9668--CALL
CLOCK
      9538**DCL      9684<>CALL     9705--CALL
DAF$INIT
      9299**DCL-ENT  9643--CALL
DAF$WRITE
      9298**DCL      9603>>CALL     9606>>CALL     9609>>CALL     9613>>CALL     9616>>CALL     9625>>CALL
      9626>>CALL     9668>>CALL     9677>>CALL     9678>>CALL     9679>>CALL     9680>>CALL     9705>>CALL
DBA$SELECTION
      9300**DCL-ENT  9588--CALL
DBM$GETBOBCAT
      9302**DCL-ENT  9571--CALL
DBM$GETMEM
      9301**DCL-ENT  9632--CALL
DBM$PACK1
      9303**DCL-ENT  9686--CALL
DBM$PACK2
      9304**DCL-ENT  9574--CALL     9635--CALL     9637--CALL     9651--CALL     9652--CALL     9653--CALL
      9654--CALL     9684--CALL     9685--CALL     9687--CALL     9688--CALL
DBM$PACK4
      9305**DCL-ENT  9573--CALL     9655--CALL     9656--CALL     9657--CALL     9689--CALL     9691--CALL
DBM$SYSID2UN
      9306**DCL-ENT  9590--CALL
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:134  
DB_CUN
      9307**DCL      9591>>ASSIGN
DISP_USER
      9630**PROC     9582--CALL     9599--CALL
DL$
      9542**DCL      9656<>CALL     9668--CALL
FLAGS
      9530**DCL      9651<>CALL     9668--CALL
FLGS.F
      9525**DCL      9604<<ASSIGN   9606--CALL     9607<<ASSIGN   9607>>ASSIGN   9609--CALL     9611<<ASSIGN
      9613--CALL     9614<<ASSIGN   9614>>ASSIGN   9616--CALL
FLINK
      9534**DCL      9653<>CALL     9668--CALL
FPT_TIME
      9560**DCL      9693<>CALL
FPT_TIME.TSTAMP_
      9563**DCL      9692<<ASSIGN
FPT_TIME.V
      9564**DCL      9560--DCLINIT
G$BOBCAT
      9182**DCL      9571<>CALL
G$BOBCAT.MUIS
      9183**DCL      9574<>CALL
G$BOBCAT.USRT$
      9185**DCL      9573<>CALL
G$USER
      9199**DCL      9570--ASSIGN   9632<>CALL     9632--CALL     9632--CALL
G$USER.ASYNCH
      9200**DCL      9611>>ASSIGN   9652<>CALL
G$USER.BL
      9200**DCL      9654<>CALL
G$USER.CLOCK
      9201**DCL      9684<>CALL
G$USER.DL$
      9202**DCL      9656<>CALL
G$USER.FL
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:135  
      9200**DCL      9653<>CALL
G$USER.FLG
      9199**DCL      9604>>ASSIGN   9651<>CALL
G$USER.HMI$
      9203**DCL      9657<>CALL
G$USER.MF
      9201**DCL      9686<>CALL
G$USER.MISC
      9200**DCL      9200--REDEF
G$USER.MISC$
      9200**DCL      9655<>CALL
G$USER.MODE
      9202**DCL      9668>>CALL
G$USER.PCT
      9201**DCL      9685<>CALL
G$USER.PRIO
      9202**DCL      9687<>CALL
G$USER.PRIOB
      9202**DCL      9688<>CALL
G$USER.SYSID
      9203**DCL      9637<>CALL
G$USER.UHJITPP
      9202**DCL      9689<>CALL
G$USER.US
      9200**DCL      9635<>CALL
G$USER.UTS
      9201**DCL      9691<>CALL
G_STTTXT
      9486**DCL      9649>>ASSIGN
HEADER0
      9514**DCL      9575<<ASSIGN   9641>>IF       9644<<ASSIGN
HEADER1
      9515**DCL      9576<<ASSIGN   9675>>IF       9681<<ASSIGN
HMI$
      9547**DCL      9657<>CALL     9668--CALL
I
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:136  
      9516**DCL      9581<<DOINDEX  9588<>CALL     9589>>IF       9590<>CALL     9591<<ASSIGN   9592<<ASSIGN
      9595<<ASSIGN   9595>>ASSIGN   9597>>IF       9597>>IF       9631>>ASSIGN   9668--CALL     9705--CALL
M$TIME
      5567**DCL-ENT  9693--CALL
MFCOUNT
      9540**DCL      9686<>CALL     9705--CALL
MISC$
      9536**DCL      9655<>CALL     9668--CALL
MODECHAR
      9510**DCL      9668--CALL
OUT
      9257**DCL      9588<>CALL
PASS
      9513**DCL      9578<<DOINDEX  9601>>IF       9639>>IF
PCOUNT
      9539**DCL      9685<>CALL
PRIO
      9543**DCL      9687<>CALL     9705--CALL
PRIOB
      9544**DCL      9688<>CALL     9705--CALL
STATE
      9532**DCL      9635<>CALL     9636>>IF       9647>>IF       9649>>ASSIGN
SYSID
      9546**DCL      9637<>CALL     9668--CALL     9705--CALL
THIS_USER$
      9522**DCL      9631<<ASSIGN   9632<>CALL     9705--CALL
TOP
      9212**DCL         9--PROC
TOP.NSUBLKS
      9224**DCL      9579>>IF       9587>>DOINDEX  9601>>IF
TOP.SUBLK$
      9245**DCL      9588>>CALL
TXT_STATE
      9533**DCL      9648<<ASSIGN   9649<<ASSIGN   9668--CALL
UHJITPP
      9545**DCL      9689<>CALL     9705--CALL
PL6.E3A0      #003=DBD$USRT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:03 Page:137  
USER#
      9519**DCL      9574<>CALL     9581>>DOINDEX  9597>>IF
USER$
      9521**DCL      9573<>CALL     9631>>ASSIGN
USERFLG_TEXT
      9495**DCL      9606--CALL     9609--CALL
USERFLG_TEXT.SREST
      9495**DCL      9605<<ASSIGN   9608<<ASSIGN
USERRPT1
      9326**DCL      9643<>CALL
USERRPT1HD00
      9393**DCL      9361--DCLINIT
USERRPT1HD01
      9436**DCL      9408--DCLINIT
USERRPT1TX00
      9369**DCL      9356--DCLINIT
USERRPT1TX01
      9411**DCL      9401--DCLINIT
USERRPT1TX02
      9454**DCL      9444--DCLINIT
USERRPT2
      9466**DCL      9679--CALL
USERRPT3
      9468**DCL      9680--CALL
USER_FMT1
      9461**DCL      9668--CALL
USER_FMT2
      9470**DCL      9705--CALL
USER_SIZE
      9523**DCL      9570<<ASSIGN   9631>>ASSIGN
UTS
      9537**DCL      9691<>CALL     9692--ASSIGN   9705--CALL
X
      9517**DCL      9587<<DOINDEX  9588>>CALL

PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:138  
      671        1        /*T***********************************************************/
      672        2        /*T*                                                         */
      673        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      674        4        /*T*                                                         */
      675        5        /*T***********************************************************/
      676        6        /*X* PLM=3,IND=5,ENU=0,ECU=0     */
      677        7
      678        8        /*F*    NAME: DBD$INTCON
      679        9                PURPOSE: To process the INTCON command for FEPs.
      680       10        */
      681       11        DBD$INT_TABLE: PROC(TOP);
      682       12
      683       13
      684       14        %INCLUDE XU_MACRO_C;
      685     3120        %INCLUDE DA_FORMAT_C;
      686     3362        %INCLUDE DBD_FEP_E;
      687     3373        %INCLUDE CP_6;
      688     8932        %INCLUDE G_LCP6_E;
      689     9190        %INCLUDE GM_VIRTUAL_E;
      690     9400        %INCLUDE DB_ANLZ_M;
      691     9567        %INCLUDE GH_SCHD_E;
      692     9663        %INCLUDE G$BOBCAT_M;
      693     9683        %INCLUDE GH_LCP6_M;
      694    10517
      695    10518        %PARSE$OUT (NAME=TOP,STCLASS=PARAM);
      696    10563        %PARSE$OUT (NAME=OUT,STCLASS=BASED);
      697    10608
      698    10609    1   DCL DBM$GETMEM ENTRY(10) ALTRET;
      699    10610    1   DCL DBM$PACK2 ENTRY(2);
      700    10611    1   DCL DBM$PACK4 ENTRY(2);
      701    10612    1   DCL DBM$PACK1 ENTRY(2);
      702    10613    1   DCL DAF$INIT ENTRY(1) ALTRET;
      703    10614    1   DCL DAA$VALUE ENTRY(3) ALTRET;
      704    10615    1   DCL DBD$FEPMAP_ERR ENTRY(1);
      705    10616
      706    10617        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS=AUTO);
      707    10630
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:139  
      708    10631    1   DCL 1 INT_CON(0:48) AUTO CALIGNED,
      709    10632    1         2 ASV UBIN CALIGNED,
      710    10633    1         2 TIMER UBIN(16) CALIGNED,
      711    10634    1         2 TSAP$ UBIN CALIGNED,
      712    10635    1         2 DEV UBIN(16) CALIGNED,
      713    10636    1         2 ISM1 UBIN(16) CALIGNED,
      714    10637    1         2 ISM2 UBIN(16) CALIGNED,
      715    10638    1         2 P$ UBIN CALIGNED,
      716    10639    1         2 S UBIN(16) CALIGNED,
      717    10640    1         2 HHJIT UBIN(16) CALIGNED,
      718    10641    1         2 USER UBIN(9) CALIGNED,
      719    10642    1         2 RUNLEVEL UBIN(9) CALIGNED,
      720    10643    1         2 IENTRY UBIN CALIGNED,
      721    10644    1         2 FLAGS UBIN(16) CALIGNED;
      722    10645
      723    10646        %EJECT;
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:140  
      724    10647    1   DCL I SBIN;
      725    10648    1   DCL J UBIN;
      726    10649    1   DCL K UBIN;
      727    10650    1   DCL INTCON_SIZE UBIN;
      728    10651    1   DCL THIS_INTCON UBIN;
      729    10652
      730    10653    1   DCL TIMER UBIN;
      731    10654    1   DCL TSAP$ UBIN;
      732    10655    1   DCL DEV UBIN;
      733    10656    1   DCL ISM1 UBIN;
      734    10657    1   DCL ISM2 UBIN;
      735    10658    1   DCL P$ UBIN;
      736    10659    1   DCL S UBIN;
      737    10660    1   DCL HHJIT UBIN;
      738    10661    1   DCL UN SBIN;
      739    10662    1   DCL RUNLEVEL UBIN;
      740    10663    1   DCL IENTRY UBIN;
      741    10664    1   DCL FLAGS UBIN;
      742    10665
      743    10666    1   DCL RADIX UBIN;
      744    10667    1   DCL MAP_ERR UBIN;
      745    10668    1   DCL MAP_PG# UBIN;
      746    10669    1   DCL ENTRY_TYPE UBIN;          /* 0 -Table Display   1-Active Levels display   */
      747    10670    1   DCL WHO CHAR(16);
      748    10671    1   DCL LOW_MEM(0:71) BIT(1);
      749    10672
      750    10673    1   DCL INT_LVL$ UBIN CONSTANT INIT(%(GM_LOW_MEM_BASE+G_LOW_MEM_LVL_ACT#));
      751    10674    1   DCL INT_TABLE$ UBIN CONSTANT INIT(%(GM_MHJIT_BASE+G_MHJIT_INTCON#));
      752    10675    1   DCL UHJIT$ UBIN CONSTANT INIT(%GM_UHJIT_BASE);
      753    10676    1   DCL BOBCAT$ UBIN CONSTANT INIT(%GM_BOBCAT_BASE);
      754    10677
      755    10678        /*  INTCON formatting info
      756    10679        */
      757    10680        %REPORT (NAME=INTCON_RPT,TRUNC=YES,HEADER=YES,TITLE='FEP INTCON - Interrupt Tables')
             10680            ;
      758    10746        %HEADER (LAST=NO,TEXT=
      759    10747        ' #  TIMER  TSAP$  P$     IENTRY   DEV  S    HHJIT USR LVL FLAGS ISM1 ISM2');
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:141  
      760    10789        %HEADER (TEXT=
      761    10790        '--- ------ ------ ------ -------- ---- ---- ----- --- --- ----- ---- ----');
      762    10832    1   DCL 1 INTCON_FMT CHAR(0) CONSTANT INIT(
      763    10833    1   '%3D .%4ZH  .%5ZH .%5ZH %8ZH %4ZH %4ZH .%4ZH .%2ZH %3D .%4ZH %4ZH %4ZH');
      764    10834
      765    10835
      766    10836        /*  Active Levels formatting info
      767    10837        */
      768    10838    1   DCL INT_LVLWHO(0:15) CHAR(16) CONSTANT INIT(
      769    10839    1      'PFS',
      770    10840    1      'Watch Dog Timer',
      771    10841    1      'TSA Overflow',
      772    10842    1      'Bigfoot',
      773    10843    1      'Inhibit Lvl',
      774    10844    1      'Inhibit Lvl 2',
      775    10845    1      'Debug Inhibit',
      776    10846    1      'Debug Rcv',
      777    10847    1      'Debug Trn',
      778    10848    1      '???',
      779    10849    1      'Debug Inhibit',
      780    10850    1      '???',
      781    10851        /* levels 12-59 */
      782    10852    1      'Int Cleanup',
      783    10853    1      'RT Clock',
      784    10854    1      'Scheduler',
      785    10855    1      'User level');
      786    10856
      787    10857    1   DCL ACTLVL_MSG0 CHAR(0) CONSTANT INIT(
      788    10858    1   'Active Interrupt Levels:');
      789    10859
      790    10860    1   DCL ACTLVL_MSG1 CHAR(0) CONSTANT INIT(
      791    10861    1   '   %2D - %A');
      792    10862
      793    10863    1   DCL ACTLVL_MSG2 CHAR(0) CONSTANT INIT(
      794    10864    1   '   %2D - User .%2ZH');
      795    10865
      796    10866
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:142  
      797    10867
      798    10868    1   DCL GETMEM_ERR CHAR(0) CONSTANT INIT('ERR GETTING MHJIT.INTCON');
      799    10869    1   DCL BLANK_LINE CHAR(4) SYMREF;
      800    10870                                                /*  SYMREFs                           */
      801    10871    1   DCL DBD$FEPMAP$ PTR SYMREF;
      802    10872    1   DCL DAF$WRITE EPTR SYMREF;
      803    10873    1   DCL DB_MUIS UBIN SYMREF;
      804    10874    1   DCL DB_CUN UBIN SYMREF;
      805    10875
      806    10876                                                /* Based Structures                   */
      807    10877        %LIST;
      808    10878        %B$FEPMAP;
             10879    1   DCL 1 B$FEPMAP(0:0) BASED ALIGNED,
             10880    1         2 TYP UBIN BYTE CALIGNED,
             10881                                                /* 1=HHJIT   2=SFILE      3=USER      */
             10882    1         2 WHAT# UBIN BYTE CALIGNED,
             10883                                                /* INTLEVL   SFILE#       USER#       */
             10884    1         2 INDX# UBIN BYTE CALIGNED,
             10885                                                /* USR#      SFILE.SEG#   ASDT_INDX   */
             10886    1         2 SIZE UBIN BYTE CALIGNED;
             10887                                                /* # of pages #                       */
             10888        %EQU DBD_MAPTYP_HHJIT#=1;
             10889        %EQU DBD_MAPTYP_SFILE#=2;
             10890        %EQU DBD_MAPTYP_USER#=3;
      809    10892        %PLIST;
      810    10893
      811    10894        %EJECT;
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:143  
      812    10895    1   DBD$INTCON_ACTIVE: ENTRY;
      813    10896    1      INTCON_SIZE = (SIZEC(INT_CON(0))+1) / 2;
      814    10897    1      ENTRY_TYPE = 1/*display active levels*/;
      815    10898
      816    10899    1      CALL DBM$GETMEM(INT_LVL$,LOW_MEM,0,SIZEC(LOW_MEM),,SIZEC(LOW_MEM))
      817    10900    2      WHENALTRETURN DO; RETURN; END;
      818    10901
      819    10902    1      CALL DAF$WRITE(VECTOR(ACTLVL_MSG0));
      820    10903
      821    10904    1      J = 1;
      822    10905    2      DO K = 0 TO 63;
      823    10906    2           IF LOW_MEM(K+J) = '1'B
      824    10907    3           THEN DO;
      825    10908    3                IF (K > 11) AND (K < 60)
      826    10909    4                THEN DO;
      827    10910    4                     CALL DISP_INT_CON;
      828    10911    4                     CALL DAF$WRITE(VECTOR(ACTLVL_MSG2),
      829    10912    4                       VECTOR(K), VECTOR(UN));
      830    10913    4                     END;
      831    10914
      832    10915    4                ELSE DO;
      833    10916    4                     IF K >59 THEN I=K-48; ELSE I=K;
      834    10917    4                     WHO = INT_LVLWHO(I);
      835    10918    4                     CALL DAF$WRITE(VECTOR(ACTLVL_MSG1),
      836    10919    4                       VECTOR(K), VECTOR(WHO));
      837    10920    4                     END;
      838    10921    3                END/*do if active*/;
      839    10922
      840    10923    2           IF (K=7) OR (K=15) OR (K=23) OR (K=31)
      841    10924    2             OR (K=39) OR (K=47) OR (K=55) /*there must be a better way*/
      842    10925    2           THEN J = J+1;
      843    10926
      844    10927    2           END/*do 0 to 63*/;
      845    10928
      846    10929    1      RETURN;
      847    10930        %EJECT;
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:144  
      848    10931
      849    10932    1   DBD$INTCON_MAP: ENTRY;
      850    10933    1      INTCON_SIZE = (SIZEC(INT_CON(0))+1) / 2;
      851    10934    1      GOTO INTCON_LOOP;
      852    10935
      853    10936    1   DBD$INTCON: ENTRY(TOP);
      854    10937
      855    10938    1      CALL DAF$INIT(INTCON_RPT);
      856    10939    1      INTCON_SIZE = (SIZEC(INT_CON(0))+1) / 2;
      857    10940
      858    10941    1      IF TOP.NSUBLKS=0
      859    10942    2      THEN DO;
      860    10943    2   INTCON_LOOP: ;
      861    10944    2           ENTRY_TYPE = 0/*Table Display*/;
      862    10945    3           DO K=12 TO 60;
      863    10946    3                CALL DISP_INT_CON;
      864    10947    3                END;
      865    10948    2           IF DBD$FEPMAP$ ~= ADDR(NIL) THEN RETURN/*doing MAP command*/;
      866    10949    2           END;
      867    10950    2      ELSE DO;
      868    10951    3           DO I=0 TO TOP.NSUBLKS-1;
      869    10952    3                CALL DAA$VALUE(TOP.SUBLK$(I)->OUT,K,RADIX);
      870    10953    3                IF (K > 11) AND (K <61)
      871    10954    3                THEN CALL DISP_INT_CON;
      872    10955    3                END;
      873    10956    2           END;
      874    10957
      875    10958    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));
      876    10959    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));
      877    10960    1      RETURN;
      878    10961        %EJECT;
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:145  
      879    10962
      880    10963    1   DISP_INT_CON: PROC;
      881    10964    2      THIS_INTCON = INT_TABLE$+(INTCON_SIZE * (K-12) );
      882    10965    2      CALL DBM$GETMEM(THIS_INTCON,INT_CON,
      883    10966    2        0,SIZEC(INT_CON(0)),,SIZEC(INT_CON(0)))
      884    10967    3      WHENALTRETURN DO;
      885    10968    3           CALL DAF$WRITE(VECTOR(GETMEM_ERR));
      886    10969    3           END;
      887    10970
      888    10971    2      CALL DBM$PACK2(INT_CON.FLAGS(0),FLAGS);
      889    10972    2      CALL DBM$PACK1(INT_CON.USER(0),UN);
      890    10973    2      IF FLAGS=0 AND UN=0 THEN RETURN;
      891    10974    2      IF ENTRY_TYPE = 1 THEN RETURN;
      892    10975
      893    10976    2      CALL DBM$PACK2(INT_CON.TIMER(0),TIMER);
      894    10977    2      CALL DBM$PACK4(INT_CON.TSAP$(0),TSAP$);
      895    10978    2      CALL DBM$PACK2(INT_CON.DEV(0),DEV);
      896    10979    2      CALL DBM$PACK2(INT_CON.ISM1(0),ISM1);
      897    10980    2      CALL DBM$PACK2(INT_CON.ISM2(0),ISM2);
      898    10981    2      CALL DBM$PACK4(INT_CON.P$(0),P$);
      899    10982    2      CALL DBM$PACK2(INT_CON.S(0),S);
      900    10983    2      CALL DBM$PACK2(INT_CON.HHJIT(0),HHJIT);
      901    10984    2      CALL DBM$PACK1(INT_CON.RUNLEVEL(0),RUNLEVEL);
      902    10985    2      CALL DBM$PACK4(INT_CON.IENTRY(0),IENTRY);
      903    10986
      904    10987    2      IF DBD$FEPMAP$ = ADDR(NIL)
      905    10988    3      THEN DO;
      906    10989    3           CALL DAF$WRITE(VECTOR(INTCON_FMT),
      907    10990    3             VECTOR(K),
      908    10991    3             VECTOR(TIMER),
      909    10992    3             VECTOR(TSAP$),
      910    10993    3             VECTOR(P$),
      911    10994    3             VECTOR(IENTRY),
      912    10995    3             VECTOR(DEV),
      913    10996    3             VECTOR(S),
      914    10997    3             VECTOR(HHJIT),
      915    10998    3             VECTOR(UN),
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:146  
      916    10999    3             VECTOR(RUNLEVEL),
      917    11000    3             VECTOR(FLAGS),
      918    11001    3             VECTOR(ISM1),
      919    11002    3             VECTOR(ISM2));
      920    11003    3           END;
      921    11004
      922    11005    3      ELSE DO;
      923    11006    3           MAP_PG# = BITBIN(BINBIT(HHJIT,36) & '000000077777'O);
      924    11007    3           IF MAP_PG# ~= 0
      925    11008    4           THEN DO;
      926    11009    4                MAP_ERR = 0;
      927    11010    4                IF DBD$FEPMAP$->B$FEPMAP(MAP_PG#) ~= '0'B
      928    11011    5                THEN DO;
      929    11012    5                     CALL DBD$FEPMAP_ERR(MAP_PG#);
      930    11013    5                     MAP_ERR = 1;
      931    11014    5                     END;
      932    11015
      933    11016
      934    11017    4                DBD$FEPMAP$->B$FEPMAP.TYP(MAP_PG#) = %DBD_MAPTYP_HHJIT#;
      935    11018    4                DBD$FEPMAP$->B$FEPMAP.WHAT#(MAP_PG#) = K;
      936    11019    4                DBD$FEPMAP$->B$FEPMAP.INDX#(MAP_PG#) = UN;
      937    11020    4                DBD$FEPMAP$->B$FEPMAP.SIZE(MAP_PG#) = 1;
      938    11021
      939    11022    4                IF MAP_ERR ~= 0
      940    11023    5                THEN DO;
      941    11024    5                     CALL DBD$FEPMAP_ERR(MAP_PG#);
      942    11025    5                     END;
      943    11026    4                END/*do if HHJIT ~ 0*/;
      944    11027    3           END/*do if DBD$FEPMAP$ ~ nil */;
      945    11028
      946    11029    2      RETURN;
      947    11030    2   END DISP_INT_CON;
      948    11031    1   END DBD$INT_TABLE;
      949    11032        %EOD;

PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:147  
--  Include file information  --

   GH_LCP6_M.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   GH_SCHD_E.:E05TOU  is referenced.
   DB_ANLZ_M.:E05TOU  is referenced.
   GM_VIRTUAL_E.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   DBD_FEP_E.:E05TOU  is referenced.
   DA_FORMAT_C.:E05TOU  is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
      No diagnostics issued in procedure DBD$INT_TABLE.

   Procedure DBD$INT_TABLE requires 523 words for executable code.
   Procedure DBD$INT_TABLE requires 570 words of local(AUTO) storage.

PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:148  

 Object Unit name= DBD$INT_TABLE                              File name= DBD$FMT_G.:E05TOU
 UTS= JUL 29 '97 13:04:15.12 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1  RoData even  UTS    107    153  DBD$INT_TABLE
    2   Data  even  none    62     76  DBD$INT_TABLE
    3   Proc  even  none   523   1013  DBD$INT_TABLE
    4  RoData even  none    43     53  DBD$INT_TABLE

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes            yes      Std        1  DBD$INT_TABLE
     3      3                  yes      Std        0  DBD$INTCON_ACTIVE
     3    201                  yes      Std        0  DBD$INTCON_MAP
     3    206                  yes      Std        1  DBD$INTCON
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:149  

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std      10 DBM$GETMEM
 yes     yes           Std       1 DAF$INIT
 yes     yes           Std       3 DAA$VALUE
         yes           Std       2 DBM$PACK2
         yes           Std       2 DBM$PACK1
         yes           Std       2 DBM$PACK4
         yes           Std       1 DBD$FEPMAP_ERR
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  BLANK_LINE                            DBD$FEPMAP$
     DAF$WRITE                             B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:150  


      671        1        /*T***********************************************************/
      672        2        /*T*                                                         */
      673        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      674        4        /*T*                                                         */
      675        5        /*T***********************************************************/
      676        6        /*X* PLM=3,IND=5,ENU=0,ECU=0     */
      677        7
      678        8        /*F*    NAME: DBD$INTCON
      679        9                PURPOSE: To process the INTCON command for FEPs.
      680       10        */
      681       11        DBD$INT_TABLE: PROC(TOP);

     11  3 000000   000000 700200 xent  DBD$INT_TAB* TSX0  ! X66_AUTO_1
         3 000001   001072 000001                    ZERO    570,1
         3 000002   000005 710000 3                  TRA     s:10896

      682       12
      683       13
      684       14        %INCLUDE XU_MACRO_C;
      685     3120        %INCLUDE DA_FORMAT_C;
      686     3362        %INCLUDE DBD_FEP_E;
      687     3373        %INCLUDE CP_6;
      688     8932        %INCLUDE G_LCP6_E;
      689     9190        %INCLUDE GM_VIRTUAL_E;
      690     9400        %INCLUDE DB_ANLZ_M;
      691     9567        %INCLUDE GH_SCHD_E;
      692     9663        %INCLUDE G$BOBCAT_M;
      693     9683        %INCLUDE GH_LCP6_M;
      694    10517
      695    10518        %PARSE$OUT (NAME=TOP,STCLASS=PARAM);
      696    10563        %PARSE$OUT (NAME=OUT,STCLASS=BASED);
      697    10608
      698    10609    1   DCL DBM$GETMEM ENTRY(10) ALTRET;
      699    10610    1   DCL DBM$PACK2 ENTRY(2);
      700    10611    1   DCL DBM$PACK4 ENTRY(2);
      701    10612    1   DCL DBM$PACK1 ENTRY(2);
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:151  
      702    10613    1   DCL DAF$INIT ENTRY(1) ALTRET;
      703    10614    1   DCL DAA$VALUE ENTRY(3) ALTRET;
      704    10615    1   DCL DBD$FEPMAP_ERR ENTRY(1);
      705    10616
      706    10617        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS=AUTO);
      707    10630
      708    10631    1   DCL 1 INT_CON(0:48) AUTO CALIGNED,
      709    10632    1         2 ASV UBIN CALIGNED,
      710    10633    1         2 TIMER UBIN(16) CALIGNED,
      711    10634    1         2 TSAP$ UBIN CALIGNED,
      712    10635    1         2 DEV UBIN(16) CALIGNED,
      713    10636    1         2 ISM1 UBIN(16) CALIGNED,
      714    10637    1         2 ISM2 UBIN(16) CALIGNED,
      715    10638    1         2 P$ UBIN CALIGNED,
      716    10639    1         2 S UBIN(16) CALIGNED,
      717    10640    1         2 HHJIT UBIN(16) CALIGNED,
      718    10641    1         2 USER UBIN(9) CALIGNED,
      719    10642    1         2 RUNLEVEL UBIN(9) CALIGNED,
      720    10643    1         2 IENTRY UBIN CALIGNED,
      721    10644    1         2 FLAGS UBIN(16) CALIGNED;
      722    10645
      723    10646        %EJECT;
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:152  
      724    10647    1   DCL I SBIN;
      725    10648    1   DCL J UBIN;
      726    10649    1   DCL K UBIN;
      727    10650    1   DCL INTCON_SIZE UBIN;
      728    10651    1   DCL THIS_INTCON UBIN;
      729    10652
      730    10653    1   DCL TIMER UBIN;
      731    10654    1   DCL TSAP$ UBIN;
      732    10655    1   DCL DEV UBIN;
      733    10656    1   DCL ISM1 UBIN;
      734    10657    1   DCL ISM2 UBIN;
      735    10658    1   DCL P$ UBIN;
      736    10659    1   DCL S UBIN;
      737    10660    1   DCL HHJIT UBIN;
      738    10661    1   DCL UN SBIN;
      739    10662    1   DCL RUNLEVEL UBIN;
      740    10663    1   DCL IENTRY UBIN;
      741    10664    1   DCL FLAGS UBIN;
      742    10665
      743    10666    1   DCL RADIX UBIN;
      744    10667    1   DCL MAP_ERR UBIN;
      745    10668    1   DCL MAP_PG# UBIN;
      746    10669    1   DCL ENTRY_TYPE UBIN;          /* 0 -Table Display   1-Active Levels display   */
      747    10670    1   DCL WHO CHAR(16);
      748    10671    1   DCL LOW_MEM(0:71) BIT(1);
      749    10672
      750    10673    1   DCL INT_LVL$ UBIN CONSTANT INIT(%(GM_LOW_MEM_BASE+G_LOW_MEM_LVL_ACT#));
      751    10674    1   DCL INT_TABLE$ UBIN CONSTANT INIT(%(GM_MHJIT_BASE+G_MHJIT_INTCON#));
      752    10675    1   DCL UHJIT$ UBIN CONSTANT INIT(%GM_UHJIT_BASE);
      753    10676    1   DCL BOBCAT$ UBIN CONSTANT INIT(%GM_BOBCAT_BASE);
      754    10677
      755    10678        /*  INTCON formatting info
      756    10679        */
      757    10680       %REPORT (NAME=INTCON_RPT,TRUNC=YES,HEADER=YES,TITLE='FEP INTCON - Interrupt Tables')
             10680            ;
      758    10746        %HEADER (LAST=NO,TEXT=
      759    10747        ' #  TIMER  TSAP$  P$     IENTRY   DEV  S    HHJIT USR LVL FLAGS ISM1 ISM2');
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:153  
      760    10789        %HEADER (TEXT=
      761    10790        '--- ------ ------ ------ -------- ---- ---- ----- --- --- ----- ---- ----');
      762    10832    1   DCL 1 INTCON_FMT CHAR(0) CONSTANT INIT(
      763    10833    1   '%3D .%4ZH  .%5ZH .%5ZH %8ZH %4ZH %4ZH .%4ZH .%2ZH %3D .%4ZH %4ZH %4ZH');
      764    10834
      765    10835
      766    10836        /*  Active Levels formatting info
      767    10837        */
      768    10838    1   DCL INT_LVLWHO(0:15) CHAR(16) CONSTANT INIT(
      769    10839    1      'PFS',
      770    10840    1      'Watch Dog Timer',
      771    10841    1      'TSA Overflow',
      772    10842    1      'Bigfoot',
      773    10843    1      'Inhibit Lvl',
      774    10844    1      'Inhibit Lvl 2',
      775    10845    1      'Debug Inhibit',
      776    10846    1      'Debug Rcv',
      777    10847    1      'Debug Trn',
      778    10848    1      '???',
      779    10849    1      'Debug Inhibit',
      780    10850    1      '???',
      781    10851        /* levels 12-59 */
      782    10852    1      'Int Cleanup',
      783    10853    1      'RT Clock',
      784    10854    1      'Scheduler',
      785    10855    1      'User level');
      786    10856
      787    10857    1   DCL ACTLVL_MSG0 CHAR(0) CONSTANT INIT(
      788    10858    1   'Active Interrupt Levels:');
      789    10859
      790    10860    1   DCL ACTLVL_MSG1 CHAR(0) CONSTANT INIT(
      791    10861    1   '   %2D - %A');
      792    10862
      793    10863    1   DCL ACTLVL_MSG2 CHAR(0) CONSTANT INIT(
      794    10864    1   '   %2D - User .%2ZH');
      795    10865
      796    10866
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:154  
      797    10867
      798    10868    1   DCL GETMEM_ERR CHAR(0) CONSTANT INIT('ERR GETTING MHJIT.INTCON');
      799    10869    1   DCL BLANK_LINE CHAR(4) SYMREF;
      800    10870                                                /*  SYMREFs                           */
      801    10871    1   DCL DBD$FEPMAP$ PTR SYMREF;
      802    10872    1   DCL DAF$WRITE EPTR SYMREF;
      803    10873    1   DCL DB_MUIS UBIN SYMREF;
      804    10874    1   DCL DB_CUN UBIN SYMREF;
      805    10875
      806    10876                                                /* Based Structures                   */
      807    10877        %LIST;
      808    10878        %B$FEPMAP;
             10879    1   DCL 1 B$FEPMAP(0:0) BASED ALIGNED,
             10880    1         2 TYP UBIN BYTE CALIGNED,
             10881                                                /* 1=HHJIT   2=SFILE      3=USER      */
             10882    1         2 WHAT# UBIN BYTE CALIGNED,
             10883                                                /* INTLEVL   SFILE#       USER#       */
             10884    1         2 INDX# UBIN BYTE CALIGNED,
             10885                                                /* USR#      SFILE.SEG#   ASDT_INDX   */
             10886    1         2 SIZE UBIN BYTE CALIGNED;
             10887                                                /* # of pages #                       */
             10888        %EQU DBD_MAPTYP_HHJIT#=1;
             10889        %EQU DBD_MAPTYP_SFILE#=2;
             10890        %EQU DBD_MAPTYP_USER#=3;
      809    10892        %PLIST;
      810    10893
      811    10894        %EJECT;
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:155  
      812    10895    1   DBD$INTCON_ACTIVE: ENTRY;

  10895  3 000003   000000 700200 xent  DBD$INTCON_* TSX0  ! X66_AUTO_1
         3 000004   001072 000001                    ZERO    570,1

      813    10896    1      INTCON_SIZE = (SIZEC(INT_CON(0))+1) / 2;

  10896  3 000005   000020 235007                    LDA     16,DL
         3 000006   200704 755100                    STA     INTCON_SIZE,,AUTO

      814    10897    1      ENTRY_TYPE = 1/*display active levels*/;

  10897  3 000007   000001 236007                    LDQ     1,DL
         3 000010   200725 756100                    STQ     ENTRY_TYPE,,AUTO

      815    10898
      816    10899    1      CALL DBM$GETMEM(INT_LVL$,LOW_MEM,0,SIZEC(LOW_MEM),,SIZEC(LOW_MEM))

  10899  3 000011   000000 236000 4                  LDQ     0
         3 000012   000001 235000 xsym               LDA     B_VECTNIL+1
         3 000013   200742 757100                    STAQ    LOW_MEM+8,,AUTO
         3 000014   000002 237000 4                  LDAQ    2
         3 000015   200740 757100                    STAQ    LOW_MEM+6,,AUTO
         3 000016   200732 630500                    EPPR0   LOW_MEM,,AUTO
         3 000017   200737 450500                    STP0    LOW_MEM+5,,AUTO
         3 000020   000004 236000 4                  LDQ     4
         3 000021   200736 756100                    STQ     LOW_MEM+4,,AUTO
         3 000022   200736 630500                    EPPR0   LOW_MEM+4,,AUTO
         3 000023   000024 631400 xsym               EPPR1   B_VECTNIL+20
         3 000024   000000 701000 xent               TSX1    DBM$GETMEM
         3 000025   000027 702000 3                  TSX2    s:10900
         3 000026   000030 710000 3                  TRA     s:10902

      817    10900    2      WHENALTRETURN DO; RETURN; END;

  10900  3 000027   000000 702200 xent               TSX2  ! X66_ARET

PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:156  
      818    10901
      819    10902    1      CALL DAF$WRITE(VECTOR(ACTLVL_MSG0));

  10902  3 000030   000010 630400 4                  EPPR0   8
         3 000031   000000 220000 xsym               LDX0    DAF$WRITE
         3 000032   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000033   000000 701010                    TSX1    0,X0
         3 000034   000000 011000                    NOP     0

      820    10903
      821    10904    1      J = 1;

  10904  3 000035   000001 235007                    LDA     1,DL
         3 000036   200702 755100                    STA     J,,AUTO

      822    10905    2      DO K = 0 TO 63;

  10905  3 000037   200703 450100                    STZ     K,,AUTO

      823    10906    2           IF LOW_MEM(K+J) = '1'B

  10906  3 000040   200703 236100                    LDQ     K,,AUTO
         3 000041   200702 036100                    ADLQ    J,,AUTO
         3 000042   000000 066506                    CMPB    filb='0'B
         3 000043   200732 000001                    BDSC    LOW_MEM,Q,AUTO           by=0,bit=0,n=1
         3 000044   000002 000022 xsym               BDSC    B_VECTNIL+2              by=0,bit=0,n=18
         3 000045   000152 600000 3                  TZE     s:10923

      824    10907    3           THEN DO;

      825    10908    3                IF (K > 11) AND (K < 60)

  10908  3 000046   200703 235100                    LDA     K,,AUTO
         3 000047   000014 115007                    CMPA    12,DL
         3 000050   000107 602000 3                  TNC     s:10916
         3 000051   000074 115007                    CMPA    60,DL
         3 000052   000107 603000 3                  TRC     s:10916
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:157  

      826    10909    4                THEN DO;

      827    10910    4                     CALL DISP_INT_CON;

  10910  3 000053   000305 701000 3                  TSX1    DISP_INT_CON
         3 000054   000000 011000                    NOP     0

      828    10911    4                     CALL DAF$WRITE(VECTOR(ACTLVL_MSG2),

  10911  3 000055   777640 235007                    LDA     -96,DL
         3 000056   200736 452500                    STP2    LOW_MEM+4,,AUTO
         3 000057   200736 236100                    LDQ     LOW_MEM+4,,AUTO
         3 000060   000703 036003                    ADLQ    451,DU
         3 000061   200740 757100                    STAQ    LOW_MEM+6,,AUTO
         3 000062   777640 235007                    LDA     -96,DL
         3 000063   200742 452500                    STP2    LOW_MEM+8,,AUTO
         3 000064   200742 236100                    LDQ     LOW_MEM+8,,AUTO
         3 000065   000716 036003                    ADLQ    462,DU
         3 000066   200746 757100                    STAQ    LOW_MEM+12,,AUTO
         3 000067   200740 237100                    LDAQ    LOW_MEM+6,,AUTO
         3 000070   200744 757100                    STAQ    LOW_MEM+10,,AUTO
         3 000071   200746 237100                    LDAQ    LOW_MEM+12,,AUTO
         3 000072   200750 757100                    STAQ    LOW_MEM+14,,AUTO
         3 000073   200750 630500                    EPPR0   LOW_MEM+14,,AUTO
         3 000074   200754 450500                    STP0    LOW_MEM+18,,AUTO
         3 000075   200744 631500                    EPPR1   LOW_MEM+10,,AUTO
         3 000076   200753 451500                    STP1    LOW_MEM+17,,AUTO
         3 000077   000014 236000 4                  LDQ     12
         3 000100   200752 756100                    STQ     LOW_MEM+16,,AUTO
         3 000101   200752 630500                    EPPR0   LOW_MEM+16,,AUTO
         3 000102   000000 220000 xsym               LDX0    DAF$WRITE
         3 000103   000021 631400 xsym               EPPR1   B_VECTNIL+17
         3 000104   000000 701010                    TSX1    0,X0
         3 000105   000000 011000                    NOP     0

      829    10912    4                       VECTOR(K), VECTOR(UN));
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:158  
      830    10913    4                     END;

  10913  3 000106   000152 710000 3                  TRA     s:10923

      831    10914
      832    10915    4                ELSE DO;

      833    10916    4                     IF K >59 THEN I=K-48; ELSE I=K;

  10916  3 000107   000074 115007                    CMPA    60,DL
         3 000110   000114 602000 3                  TNC     s:10916+5

  10916  3 000111   000060 135007                    SBLA    48,DL
         3 000112   200701 755100                    STA     I,,AUTO
         3 000113   000115 710000 3                  TRA     s:10917

  10916  3 000114   200701 755100                    STA     I,,AUTO

      834    10917    4                     WHO = INT_LVLWHO(I);

  10917  3 000115   000004 735000                    ALS     4
         3 000116   040100 100405                    MLR     fill='040'O
         3 000117   000026 000020 1                  ADSC9   INT_LVLWHO,A             cn=0,n=16
         3 000120   200726 000020                    ADSC9   WHO,,AUTO                cn=0,n=16

      835    10918    4                     CALL DAF$WRITE(VECTOR(ACTLVL_MSG1),

  10918  3 000121   777640 235007                    LDA     -96,DL
         3 000122   200736 452500                    STP2    LOW_MEM+4,,AUTO
         3 000123   200736 236100                    LDQ     LOW_MEM+4,,AUTO
         3 000124   000703 036003                    ADLQ    451,DU
         3 000125   200740 757100                    STAQ    LOW_MEM+6,,AUTO
         3 000126   000020 235000 4                  LDA     16
         3 000127   200742 452500                    STP2    LOW_MEM+8,,AUTO
         3 000130   200742 236100                    LDQ     LOW_MEM+8,,AUTO
         3 000131   000726 036003                    ADLQ    470,DU
         3 000132   200746 757100                    STAQ    LOW_MEM+12,,AUTO
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:159  
         3 000133   200740 237100                    LDAQ    LOW_MEM+6,,AUTO
         3 000134   200744 757100                    STAQ    LOW_MEM+10,,AUTO
         3 000135   200746 237100                    LDAQ    LOW_MEM+12,,AUTO
         3 000136   200750 757100                    STAQ    LOW_MEM+14,,AUTO
         3 000137   200750 630500                    EPPR0   LOW_MEM+14,,AUTO
         3 000140   200754 450500                    STP0    LOW_MEM+18,,AUTO
         3 000141   200744 631500                    EPPR1   LOW_MEM+10,,AUTO
         3 000142   200753 451500                    STP1    LOW_MEM+17,,AUTO
         3 000143   000021 236000 4                  LDQ     17
         3 000144   200752 756100                    STQ     LOW_MEM+16,,AUTO
         3 000145   200752 630500                    EPPR0   LOW_MEM+16,,AUTO
         3 000146   000000 220000 xsym               LDX0    DAF$WRITE
         3 000147   000021 631400 xsym               EPPR1   B_VECTNIL+17
         3 000150   000000 701010                    TSX1    0,X0
         3 000151   000000 011000                    NOP     0

      836    10919    4                       VECTOR(K), VECTOR(WHO));
      837    10920    4                     END;

      838    10921    3                END/*do if active*/;

      839    10922
      840    10923    2           IF (K=7) OR (K=15) OR (K=23) OR (K=31)

  10923  3 000152   200703 235100                    LDA     K,,AUTO
         3 000153   000007 115007                    CMPA    7,DL
         3 000154   000171 600000 3                  TZE     s:10925
         3 000155   000017 115007                    CMPA    15,DL
         3 000156   000171 600000 3                  TZE     s:10925
         3 000157   000027 115007                    CMPA    23,DL
         3 000160   000171 600000 3                  TZE     s:10925
         3 000161   000037 115007                    CMPA    31,DL
         3 000162   000171 600000 3                  TZE     s:10925
         3 000163   000047 115007                    CMPA    39,DL
         3 000164   000171 600000 3                  TZE     s:10925
         3 000165   000057 115007                    CMPA    47,DL
         3 000166   000171 600000 3                  TZE     s:10925
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:160  
         3 000167   000067 115007                    CMPA    55,DL
         3 000170   000174 601000 3                  TNZ     s:10927

      841    10924    2             OR (K=39) OR (K=47) OR (K=55) /*there must be a better way*/
      842    10925    2           THEN J = J+1;

  10925  3 000171   200702 236100                    LDQ     J,,AUTO
         3 000172   000001 036007                    ADLQ    1,DL
         3 000173   200702 756100                    STQ     J,,AUTO

      843    10926
      844    10927    2           END/*do 0 to 63*/;

  10927  3 000174   000001 035007                    ADLA    1,DL
         3 000175   200703 755100                    STA     K,,AUTO
         3 000176   000100 115007                    CMPA    64,DL
         3 000177   000040 602000 3                  TNC     s:10906

      845    10928
      846    10929    1      RETURN;

  10929  3 000200   000000 702200 xent               TSX2  ! X66_ARET

      847    10930        %EJECT;
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:161  
      848    10931
      849    10932    1   DBD$INTCON_MAP: ENTRY;

  10932  3 000201   000000 700200 xent  DBD$INTCON_* TSX0  ! X66_AUTO_1
         3 000202   001072 000001                    ZERO    570,1

      850    10933    1      INTCON_SIZE = (SIZEC(INT_CON(0))+1) / 2;

  10933  3 000203   000020 235007                    LDA     16,DL
         3 000204   200704 755100                    STA     INTCON_SIZE,,AUTO

      851    10934    1      GOTO INTCON_LOOP;

  10934  3 000205   000221 710000 3                  TRA     INTCON_LOOP

      852    10935
      853    10936    1   DBD$INTCON: ENTRY(TOP);

  10936  3 000206   000000 700200 xent  DBD$INTCON   TSX0  ! X66_AUTO_1
         3 000207   001072 000001                    ZERO    570,1

      854    10937
      855    10938    1      CALL DAF$INIT(INTCON_RPT);

  10938  3 000210   000022 630400 4                  EPPR0   18
         3 000211   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000212   000000 701000 xent               TSX1    DAF$INIT
         3 000213   000000 011000                    NOP     0

      856    10939    1      INTCON_SIZE = (SIZEC(INT_CON(0))+1) / 2;

  10939  3 000214   000020 235007                    LDA     16,DL
         3 000215   200704 755100                    STA     INTCON_SIZE,,AUTO

      857    10940
      858    10941    1      IF TOP.NSUBLKS=0

PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:162  
  10941  3 000216   200003 470500                    LDP0    @TOP,,AUTO
         3 000217   000001 220100                    LDX0    1,,PR0
         3 000220   000237 601000 3                  TNZ     s:10951

      859    10942    2      THEN DO;

  10939  3 000221                       INTCON_LOOP  null
      860    10943    2   INTCON_LOOP: ;
      861    10944    2           ENTRY_TYPE = 0/*Table Display*/;

  10944  3 000221   200725 450100                    STZ     ENTRY_TYPE,,AUTO

      862    10945    3           DO K=12 TO 60;

  10945  3 000222   000014 236007                    LDQ     12,DL
         3 000223   200703 756100                    STQ     K,,AUTO

      863    10946    3                CALL DISP_INT_CON;

  10946  3 000224   000305 701000 3                  TSX1    DISP_INT_CON
         3 000225   000000 011000                    NOP     0

      864    10947    3                END;

  10947  3 000226   200703 235100                    LDA     K,,AUTO
         3 000227   000001 035007                    ADLA    1,DL
         3 000230   200703 755100                    STA     K,,AUTO
         3 000231   000075 115007                    CMPA    61,DL
         3 000232   000224 602000 3                  TNC     s:10946

      865    10948    2           IF DBD$FEPMAP$ ~= ADDR(NIL) THEN RETURN/*doing MAP command*/;

  10948  3 000233   000000 236000 xsym               LDQ     DBD$FEPMAP$
         3 000234   000001 116000 xsym               CMPQ    B_VECTNIL+1
         3 000235   000272 600000 3                  TZE     s:10958

  10948  3 000236   000000 702200 xent               TSX2  ! X66_ARET
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:163  

      866    10949    2           END;
      867    10950    2      ELSE DO;

      868    10951    3           DO I=0 TO TOP.NSUBLKS-1;

  10951  3 000237   200701 450100                    STZ     I,,AUTO
         3 000240   000265 710000 3                  TRA     s:10955+1

      869    10952    3                CALL DAA$VALUE(TOP.SUBLK$(I)->OUT,K,RADIX);

  10952  3 000241   200003 470500                    LDP0    @TOP,,AUTO
         3 000242   200701 720100                    LXL0    I,,AUTO
         3 000243   000003 471510                    LDP1    3,X0,PR0
         3 000244   200722 633500                    EPPR3   RADIX,,AUTO
         3 000245   200740 453500                    STP3    LOW_MEM+6,,AUTO
         3 000246   200703 634500                    EPPR4   K,,AUTO
         3 000247   200737 454500                    STP4    LOW_MEM+5,,AUTO
         3 000250   200736 451500                    STP1    LOW_MEM+4,,AUTO
         3 000251   200736 630500                    EPPR0   LOW_MEM+4,,AUTO
         3 000252   000021 631400 xsym               EPPR1   B_VECTNIL+17
         3 000253   000000 701000 xent               TSX1    DAA$VALUE
         3 000254   000000 011000                    NOP     0

      870    10953    3                IF (K > 11) AND (K <61)

  10953  3 000255   200703 235100                    LDA     K,,AUTO
         3 000256   000014 115007                    CMPA    12,DL
         3 000257   000264 602000 3                  TNC     s:10955
         3 000260   000075 115007                    CMPA    61,DL
         3 000261   000264 603000 3                  TRC     s:10955

      871    10954    3                THEN CALL DISP_INT_CON;

  10954  3 000262   000305 701000 3                  TSX1    DISP_INT_CON
         3 000263   000000 011000                    NOP     0

PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:164  
      872    10955    3                END;

  10955  3 000264   200701 054100                    AOS     I,,AUTO
         3 000265   200003 470500                    LDP0    @TOP,,AUTO
         3 000266   000001 236100                    LDQ     1,,PR0
         3 000267   000022 772000                    QRL     18
         3 000270   200701 116100                    CMPQ    I,,AUTO
         3 000271   000241 605400 3                  TPNZ    s:10952

      873    10956    2           END;

      874    10957
      875    10958    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));

  10958  3 000272   000026 630400 4                  EPPR0   22
         3 000273   000000 220000 xsym               LDX0    DAF$WRITE
         3 000274   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000275   000000 701010                    TSX1    0,X0
         3 000276   000000 011000                    NOP     0

      876    10959    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));

  10959  3 000277   000026 630400 4                  EPPR0   22
         3 000300   000000 220000 xsym               LDX0    DAF$WRITE
         3 000301   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000302   000000 701010                    TSX1    0,X0
         3 000303   000000 011000                    NOP     0

      877    10960    1      RETURN;

  10960  3 000304   000000 702200 xent               TSX2  ! X66_ARET

      878    10961        %EJECT;
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:165  
      879    10962
      880    10963    1   DISP_INT_CON: PROC;

  10963  3 000305   200734 741300       DISP_INT_CON STX1  ! LOW_MEM+2,,AUTO

      881    10964    2      THIS_INTCON = INT_TABLE$+(INTCON_SIZE * (K-12) );

  10964  3 000306   200703 236100                    LDQ     K,,AUTO
         3 000307   000014 136007                    SBLQ    12,DL
         3 000310   200704 402100                    MPY     INTCON_SIZE,,AUTO
         3 000311   000001 036000 1                  ADLQ    INT_TABLE$
         3 000312   200705 756100                    STQ     THIS_INTCON,,AUTO

      882    10965    2      CALL DBM$GETMEM(THIS_INTCON,INT_CON,

  10965  3 000313   000030 236000 4                  LDQ     24
         3 000314   000001 235000 xsym               LDA     B_VECTNIL+1
         3 000315   200742 757100                    STAQ    LOW_MEM+8,,AUTO
         3 000316   000032 237000 4                  LDAQ    26
         3 000317   200740 757100                    STAQ    LOW_MEM+6,,AUTO
         3 000320   200071 630500                    EPPR0   INT_CON,,AUTO
         3 000321   200737 450500                    STP0    LOW_MEM+5,,AUTO
         3 000322   200705 631500                    EPPR1   THIS_INTCON,,AUTO
         3 000323   200736 451500                    STP1    LOW_MEM+4,,AUTO
         3 000324   200736 630500                    EPPR0   LOW_MEM+4,,AUTO
         3 000325   000024 631400 xsym               EPPR1   B_VECTNIL+20
         3 000326   000000 701000 xent               TSX1    DBM$GETMEM
         3 000327   000331 702000 3                  TSX2    s:10968
         3 000330   000336 710000 3                  TRA     s:10971

      883    10966    2        0,SIZEC(INT_CON(0)),,SIZEC(INT_CON(0)))
      884    10967    3      WHENALTRETURN DO;

      885    10968    3           CALL DAF$WRITE(VECTOR(GETMEM_ERR));

  10968  3 000331   000036 630400 4                  EPPR0   30
         3 000332   000000 220000 xsym               LDX0    DAF$WRITE
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:166  
         3 000333   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000334   000000 701010                    TSX1    0,X0
         3 000335   000000 011000                    NOP     0

      886    10969    3           END;

      887    10970
      888    10971    2      CALL DBM$PACK2(INT_CON.FLAGS(0),FLAGS);

  10971  3 000336   200721 630500                    EPPR0   FLAGS,,AUTO
         3 000337   200737 450500                    STP0    LOW_MEM+5,,AUTO
         3 000340   200740 452500                    STP2    LOW_MEM+6,,AUTO
         3 000341   200740 236100                    LDQ     LOW_MEM+6,,AUTO
         3 000342   000037 036000 4                  ADLQ    31
         3 000343   200736 756100                    STQ     LOW_MEM+4,,AUTO
         3 000344   200736 630500                    EPPR0   LOW_MEM+4,,AUTO
         3 000345   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000346   000000 701000 xent               TSX1    DBM$PACK2
         3 000347   000000 011000                    NOP     0

      889    10972    2      CALL DBM$PACK1(INT_CON.USER(0),UN);

  10972  3 000350   200716 630500                    EPPR0   UN,,AUTO
         3 000351   200737 450500                    STP0    LOW_MEM+5,,AUTO
         3 000352   200077 631500                    EPPR1   INT_CON+6,,AUTO
         3 000353   200736 451500                    STP1    LOW_MEM+4,,AUTO
         3 000354   200736 630500                    EPPR0   LOW_MEM+4,,AUTO
         3 000355   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000356   000000 701000 xent               TSX1    DBM$PACK1
         3 000357   000000 011000                    NOP     0

      890    10973    2      IF FLAGS=0 AND UN=0 THEN RETURN;

  10973  3 000360   200721 235100                    LDA     FLAGS,,AUTO
         3 000361   000366 601000 3                  TNZ     s:10974
         3 000362   200716 236100                    LDQ     UN,,AUTO
         3 000363   000366 601000 3                  TNZ     s:10974
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:167  

  10973  3 000364   200734 221300                    LDX1  ! LOW_MEM+2,,AUTO
         3 000365   000001 702211                    TSX2  ! 1,X1

      891    10974    2      IF ENTRY_TYPE = 1 THEN RETURN;

  10974  3 000366   200725 236100                    LDQ     ENTRY_TYPE,,AUTO
         3 000367   000001 116007                    CMPQ    1,DL
         3 000370   000373 601000 3                  TNZ     s:10976

  10974  3 000371   200734 221300                    LDX1  ! LOW_MEM+2,,AUTO
         3 000372   000001 702211                    TSX2  ! 1,X1

      892    10975
      893    10976    2      CALL DBM$PACK2(INT_CON.TIMER(0),TIMER);

  10976  3 000373   200706 630500                    EPPR0   TIMER,,AUTO
         3 000374   200737 450500                    STP0    LOW_MEM+5,,AUTO
         3 000375   200072 631500                    EPPR1   INT_CON+1,,AUTO
         3 000376   200736 451500                    STP1    LOW_MEM+4,,AUTO
         3 000377   200736 630500                    EPPR0   LOW_MEM+4,,AUTO
         3 000400   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000401   000000 701000 xent               TSX1    DBM$PACK2
         3 000402   000000 011000                    NOP     0

      894    10977    2      CALL DBM$PACK4(INT_CON.TSAP$(0),TSAP$);

  10977  3 000403   200707 630500                    EPPR0   TSAP$,,AUTO
         3 000404   200737 450500                    STP0    LOW_MEM+5,,AUTO
         3 000405   200740 452500                    STP2    LOW_MEM+6,,AUTO
         3 000406   200740 236100                    LDQ     LOW_MEM+6,,AUTO
         3 000407   000040 036000 4                  ADLQ    32
         3 000410   200736 756100                    STQ     LOW_MEM+4,,AUTO
         3 000411   200736 630500                    EPPR0   LOW_MEM+4,,AUTO
         3 000412   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000413   000000 701000 xent               TSX1    DBM$PACK4
         3 000414   000000 011000                    NOP     0
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:168  

      895    10978    2      CALL DBM$PACK2(INT_CON.DEV(0),DEV);

  10978  3 000415   200710 630500                    EPPR0   DEV,,AUTO
         3 000416   200737 450500                    STP0    LOW_MEM+5,,AUTO
         3 000417   200740 452500                    STP2    LOW_MEM+6,,AUTO
         3 000420   200740 236100                    LDQ     LOW_MEM+6,,AUTO
         3 000421   000041 036000 4                  ADLQ    33
         3 000422   200736 756100                    STQ     LOW_MEM+4,,AUTO
         3 000423   200736 630500                    EPPR0   LOW_MEM+4,,AUTO
         3 000424   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000425   000000 701000 xent               TSX1    DBM$PACK2
         3 000426   000000 011000                    NOP     0

      896    10979    2      CALL DBM$PACK2(INT_CON.ISM1(0),ISM1);

  10979  3 000427   200711 630500                    EPPR0   ISM1,,AUTO
         3 000430   200737 450500                    STP0    LOW_MEM+5,,AUTO
         3 000431   200074 631500                    EPPR1   INT_CON+3,,AUTO
         3 000432   200736 451500                    STP1    LOW_MEM+4,,AUTO
         3 000433   200736 630500                    EPPR0   LOW_MEM+4,,AUTO
         3 000434   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000435   000000 701000 xent               TSX1    DBM$PACK2
         3 000436   000000 011000                    NOP     0

      897    10980    2      CALL DBM$PACK2(INT_CON.ISM2(0),ISM2);

  10980  3 000437   200712 630500                    EPPR0   ISM2,,AUTO
         3 000440   200737 450500                    STP0    LOW_MEM+5,,AUTO
         3 000441   200740 452500                    STP2    LOW_MEM+6,,AUTO
         3 000442   200740 236100                    LDQ     LOW_MEM+6,,AUTO
         3 000443   000042 036000 4                  ADLQ    34
         3 000444   200736 756100                    STQ     LOW_MEM+4,,AUTO
         3 000445   200736 630500                    EPPR0   LOW_MEM+4,,AUTO
         3 000446   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000447   000000 701000 xent               TSX1    DBM$PACK2
         3 000450   000000 011000                    NOP     0
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:169  

      898    10981    2      CALL DBM$PACK4(INT_CON.P$(0),P$);

  10981  3 000451   200713 630500                    EPPR0   P$,,AUTO
         3 000452   200737 450500                    STP0    LOW_MEM+5,,AUTO
         3 000453   200075 631500                    EPPR1   INT_CON+4,,AUTO
         3 000454   200736 451500                    STP1    LOW_MEM+4,,AUTO
         3 000455   200736 630500                    EPPR0   LOW_MEM+4,,AUTO
         3 000456   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000457   000000 701000 xent               TSX1    DBM$PACK4
         3 000460   000000 011000                    NOP     0

      899    10982    2      CALL DBM$PACK2(INT_CON.S(0),S);

  10982  3 000461   200714 630500                    EPPR0   S,,AUTO
         3 000462   200737 450500                    STP0    LOW_MEM+5,,AUTO
         3 000463   200076 631500                    EPPR1   INT_CON+5,,AUTO
         3 000464   200736 451500                    STP1    LOW_MEM+4,,AUTO
         3 000465   200736 630500                    EPPR0   LOW_MEM+4,,AUTO
         3 000466   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000467   000000 701000 xent               TSX1    DBM$PACK2
         3 000470   000000 011000                    NOP     0

      900    10983    2      CALL DBM$PACK2(INT_CON.HHJIT(0),HHJIT);

  10983  3 000471   200715 630500                    EPPR0   HHJIT,,AUTO
         3 000472   200737 450500                    STP0    LOW_MEM+5,,AUTO
         3 000473   200740 452500                    STP2    LOW_MEM+6,,AUTO
         3 000474   200740 236100                    LDQ     LOW_MEM+6,,AUTO
         3 000475   000043 036000 4                  ADLQ    35
         3 000476   200736 756100                    STQ     LOW_MEM+4,,AUTO
         3 000477   200736 630500                    EPPR0   LOW_MEM+4,,AUTO
         3 000500   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000501   000000 701000 xent               TSX1    DBM$PACK2
         3 000502   000000 011000                    NOP     0

      901    10984    2      CALL DBM$PACK1(INT_CON.RUNLEVEL(0),RUNLEVEL);
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:170  

  10984  3 000503   200717 630500                    EPPR0   RUNLEVEL,,AUTO
         3 000504   200737 450500                    STP0    LOW_MEM+5,,AUTO
         3 000505   200740 452500                    STP2    LOW_MEM+6,,AUTO
         3 000506   200740 236100                    LDQ     LOW_MEM+6,,AUTO
         3 000507   000044 036000 4                  ADLQ    36
         3 000510   200736 756100                    STQ     LOW_MEM+4,,AUTO
         3 000511   200736 630500                    EPPR0   LOW_MEM+4,,AUTO
         3 000512   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000513   000000 701000 xent               TSX1    DBM$PACK1
         3 000514   000000 011000                    NOP     0

      902    10985    2      CALL DBM$PACK4(INT_CON.IENTRY(0),IENTRY);

  10985  3 000515   200720 630500                    EPPR0   IENTRY,,AUTO
         3 000516   200737 450500                    STP0    LOW_MEM+5,,AUTO
         3 000517   200740 452500                    STP2    LOW_MEM+6,,AUTO
         3 000520   200740 236100                    LDQ     LOW_MEM+6,,AUTO
         3 000521   000045 036000 4                  ADLQ    37
         3 000522   200736 756100                    STQ     LOW_MEM+4,,AUTO
         3 000523   200736 630500                    EPPR0   LOW_MEM+4,,AUTO
         3 000524   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000525   000000 701000 xent               TSX1    DBM$PACK4
         3 000526   000000 011000                    NOP     0

      903    10986
      904    10987    2      IF DBD$FEPMAP$ = ADDR(NIL)

  10987  3 000527   000000 236000 xsym               LDQ     DBD$FEPMAP$
         3 000530   000001 116000 xsym               CMPQ    B_VECTNIL+1
         3 000531   000727 601000 3                  TNZ     s:11006

      905    10988    3      THEN DO;

      906    10989    3           CALL DAF$WRITE(VECTOR(INTCON_FMT),
      907    10990    3             VECTOR(K),
      908    10991    3             VECTOR(TIMER),
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:171  
      909    10992    3             VECTOR(TSAP$),
      910    10993    3             VECTOR(P$),
      911    10994    3             VECTOR(IENTRY),
      912    10995    3             VECTOR(DEV),
      913    10996    3             VECTOR(S),
      914    10997    3             VECTOR(HHJIT),
      915    10998    3             VECTOR(UN),

  10998  3 000532   777640 235007                    LDA     -96,DL
         3 000533   200736 452500                    STP2    LOW_MEM+4,,AUTO
         3 000534   200736 236100                    LDQ     LOW_MEM+4,,AUTO
         3 000535   000703 036003                    ADLQ    451,DU
         3 000536   200740 757100                    STAQ    LOW_MEM+6,,AUTO
         3 000537   777640 235007                    LDA     -96,DL
         3 000540   200742 452500                    STP2    LOW_MEM+8,,AUTO
         3 000541   200742 236100                    LDQ     LOW_MEM+8,,AUTO
         3 000542   000706 036003                    ADLQ    454,DU
         3 000543   200744 757100                    STAQ    LOW_MEM+10,,AUTO
         3 000544   777640 235007                    LDA     -96,DL
         3 000545   200746 452500                    STP2    LOW_MEM+12,,AUTO
         3 000546   200746 236100                    LDQ     LOW_MEM+12,,AUTO
         3 000547   000707 036003                    ADLQ    455,DU
         3 000550   200750 757100                    STAQ    LOW_MEM+14,,AUTO
         3 000551   777640 235007                    LDA     -96,DL
         3 000552   200752 452500                    STP2    LOW_MEM+16,,AUTO
         3 000553   200752 236100                    LDQ     LOW_MEM+16,,AUTO
         3 000554   000713 036003                    ADLQ    459,DU
         3 000555   200754 757100                    STAQ    LOW_MEM+18,,AUTO
         3 000556   777640 235007                    LDA     -96,DL
         3 000557   200756 452500                    STP2    LOW_MEM+20,,AUTO
         3 000560   200756 236100                    LDQ     LOW_MEM+20,,AUTO
         3 000561   000720 036003                    ADLQ    464,DU
         3 000562   200760 757100                    STAQ    LOW_MEM+22,,AUTO
         3 000563   777640 235007                    LDA     -96,DL
         3 000564   200762 452500                    STP2    LOW_MEM+24,,AUTO
         3 000565   200762 236100                    LDQ     LOW_MEM+24,,AUTO
         3 000566   000710 036003                    ADLQ    456,DU
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:172  
         3 000567   200764 757100                    STAQ    LOW_MEM+26,,AUTO
         3 000570   777640 235007                    LDA     -96,DL
         3 000571   200766 452500                    STP2    LOW_MEM+28,,AUTO
         3 000572   200766 236100                    LDQ     LOW_MEM+28,,AUTO
         3 000573   000714 036003                    ADLQ    460,DU
         3 000574   200770 757100                    STAQ    LOW_MEM+30,,AUTO
         3 000575   777640 235007                    LDA     -96,DL
         3 000576   200772 452500                    STP2    LOW_MEM+32,,AUTO
         3 000577   200772 236100                    LDQ     LOW_MEM+32,,AUTO
         3 000600   000715 036003                    ADLQ    461,DU
         3 000601   200774 757100                    STAQ    LOW_MEM+34,,AUTO
         3 000602   777640 235007                    LDA     -96,DL
         3 000603   200776 452500                    STP2    LOW_MEM+36,,AUTO
         3 000604   200776 236100                    LDQ     LOW_MEM+36,,AUTO
         3 000605   000716 036003                    ADLQ    462,DU
         3 000606   201000 757100                    STAQ    LOW_MEM+38,,AUTO
         3 000607   777640 235007                    LDA     -96,DL
         3 000610   201002 452500                    STP2    LOW_MEM+40,,AUTO
         3 000611   201002 236100                    LDQ     LOW_MEM+40,,AUTO
         3 000612   000717 036003                    ADLQ    463,DU
         3 000613   201004 757100                    STAQ    LOW_MEM+42,,AUTO
         3 000614   777640 235007                    LDA     -96,DL
         3 000615   201006 452500                    STP2    LOW_MEM+44,,AUTO
         3 000616   201006 236100                    LDQ     LOW_MEM+44,,AUTO
         3 000617   000721 036003                    ADLQ    465,DU
         3 000620   201010 757100                    STAQ    LOW_MEM+46,,AUTO
         3 000621   777640 235007                    LDA     -96,DL
         3 000622   201012 452500                    STP2    LOW_MEM+48,,AUTO
         3 000623   201012 236100                    LDQ     LOW_MEM+48,,AUTO
         3 000624   000711 036003                    ADLQ    457,DU
         3 000625   201014 757100                    STAQ    LOW_MEM+50,,AUTO
         3 000626   777640 235007                    LDA     -96,DL
         3 000627   201016 452500                    STP2    LOW_MEM+52,,AUTO
         3 000630   201016 236100                    LDQ     LOW_MEM+52,,AUTO
         3 000631   000712 036003                    ADLQ    458,DU
         3 000632   201022 757100                    STAQ    LOW_MEM+56,,AUTO
         3 000633   200740 237100                    LDAQ    LOW_MEM+6,,AUTO
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:173  
         3 000634   201020 757100                    STAQ    LOW_MEM+54,,AUTO
         3 000635   200744 237100                    LDAQ    LOW_MEM+10,,AUTO
         3 000636   201024 757100                    STAQ    LOW_MEM+58,,AUTO
         3 000637   200750 237100                    LDAQ    LOW_MEM+14,,AUTO
         3 000640   201026 757100                    STAQ    LOW_MEM+60,,AUTO
         3 000641   200754 237100                    LDAQ    LOW_MEM+18,,AUTO
         3 000642   201030 757100                    STAQ    LOW_MEM+62,,AUTO
         3 000643   200760 237100                    LDAQ    LOW_MEM+22,,AUTO
         3 000644   201032 757100                    STAQ    LOW_MEM+64,,AUTO
         3 000645   200764 237100                    LDAQ    LOW_MEM+26,,AUTO
         3 000646   201034 757100                    STAQ    LOW_MEM+66,,AUTO
         3 000647   200770 237100                    LDAQ    LOW_MEM+30,,AUTO
         3 000650   201036 757100                    STAQ    LOW_MEM+68,,AUTO
         3 000651   200774 237100                    LDAQ    LOW_MEM+34,,AUTO
         3 000652   201040 757100                    STAQ    LOW_MEM+70,,AUTO
         3 000653   201000 237100                    LDAQ    LOW_MEM+38,,AUTO
         3 000654   201042 757100                    STAQ    LOW_MEM+72,,AUTO
         3 000655   201004 237100                    LDAQ    LOW_MEM+42,,AUTO
         3 000656   201044 757100                    STAQ    LOW_MEM+74,,AUTO
         3 000657   201010 237100                    LDAQ    LOW_MEM+46,,AUTO
         3 000660   201046 757100                    STAQ    LOW_MEM+76,,AUTO
         3 000661   201014 237100                    LDAQ    LOW_MEM+50,,AUTO
         3 000662   201050 757100                    STAQ    LOW_MEM+78,,AUTO
         3 000663   201022 237100                    LDAQ    LOW_MEM+56,,AUTO
         3 000664   201052 757100                    STAQ    LOW_MEM+80,,AUTO
         3 000665   201052 630500                    EPPR0   LOW_MEM+80,,AUTO
         3 000666   201071 450500                    STP0    LOW_MEM+95,,AUTO
         3 000667   201050 631500                    EPPR1   LOW_MEM+78,,AUTO
         3 000670   201070 451500                    STP1    LOW_MEM+94,,AUTO
         3 000671   201046 633500                    EPPR3   LOW_MEM+76,,AUTO
         3 000672   201067 453500                    STP3    LOW_MEM+93,,AUTO
         3 000673   201044 634500                    EPPR4   LOW_MEM+74,,AUTO
         3 000674   201066 454500                    STP4    LOW_MEM+92,,AUTO
         3 000675   201042 635500                    EPPR5   LOW_MEM+72,,AUTO
         3 000676   201065 455500                    STP5    LOW_MEM+91,,AUTO
         3 000677   201040 636500                    EPPR6   LOW_MEM+70,,AUTO
         3 000700   201064 456500                    STP6    LOW_MEM+90,,AUTO
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:174  
         3 000701   201036 637500                    EPPR7   LOW_MEM+68,,AUTO
         3 000702   201063 457500                    STP7    LOW_MEM+89,,AUTO
         3 000703   201034 630500                    EPPR0   LOW_MEM+66,,AUTO
         3 000704   201062 450500                    STP0    LOW_MEM+88,,AUTO
         3 000705   201032 630500                    EPPR0   LOW_MEM+64,,AUTO
         3 000706   201061 450500                    STP0    LOW_MEM+87,,AUTO
         3 000707   201030 630500                    EPPR0   LOW_MEM+62,,AUTO
         3 000710   201060 450500                    STP0    LOW_MEM+86,,AUTO
         3 000711   201026 630500                    EPPR0   LOW_MEM+60,,AUTO
         3 000712   201057 450500                    STP0    LOW_MEM+85,,AUTO
         3 000713   201024 630500                    EPPR0   LOW_MEM+58,,AUTO
         3 000714   201056 450500                    STP0    LOW_MEM+84,,AUTO
         3 000715   201020 630500                    EPPR0   LOW_MEM+54,,AUTO
         3 000716   201055 450500                    STP0    LOW_MEM+83,,AUTO
         3 000717   000051 236000 4                  LDQ     41
         3 000720   201054 756100                    STQ     LOW_MEM+82,,AUTO
         3 000721   201054 630500                    EPPR0   LOW_MEM+82,,AUTO
         3 000722   000000 220000 xsym               LDX0    DAF$WRITE
         3 000723   000050 631400 4                  EPPR1   40
         3 000724   000000 701010                    TSX1    0,X0
         3 000725   000000 011000                    NOP     0

      916    10999    3             VECTOR(RUNLEVEL),
      917    11000    3             VECTOR(FLAGS),
      918    11001    3             VECTOR(ISM1),
      919    11002    3             VECTOR(ISM2));
      920    11003    3           END;

  11003  3 000726   001011 710000 3                  TRA     s:11029

      921    11004
      922    11005    3      ELSE DO;

      923    11006    3           MAP_PG# = BITBIN(BINBIT(HHJIT,36) & '000000077777'O);

  11006  3 000727   200715 236100                    LDQ     HHJIT,,AUTO
         3 000730   000152 376000 1                  ANQ     GETMEM_ERR+6
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:175  
         3 000731   200724 756100                    STQ     MAP_PG#,,AUTO

      924    11007    3           IF MAP_PG# ~= 0

  11007  3 000732   001011 600000 3                  TZE     s:11029

      925    11008    4           THEN DO;

      926    11009    4                MAP_ERR = 0;

  11009  3 000733   200723 450100                    STZ     MAP_ERR,,AUTO

      927    11010    4                IF DBD$FEPMAP$->B$FEPMAP(MAP_PG#) ~= '0'B

  11010  3 000734   000000 470400 xsym               LDP0    DBD$FEPMAP$
         3 000735   000000 235106                    LDA     0,QL,PR0
         3 000736   000747 600000 3                  TZE     s:11017

      928    11011    5                THEN DO;

      929    11012    5                     CALL DBD$FEPMAP_ERR(MAP_PG#);

  11012  3 000737   200724 631500                    EPPR1   MAP_PG#,,AUTO
         3 000740   200736 451500                    STP1    LOW_MEM+4,,AUTO
         3 000741   200736 630500                    EPPR0   LOW_MEM+4,,AUTO
         3 000742   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000743   000000 701000 xent               TSX1    DBD$FEPMAP_ERR
         3 000744   000000 011000                    NOP     0

      930    11013    5                     MAP_ERR = 1;

  11013  3 000745   000001 235007                    LDA     1,DL
         3 000746   200723 755100                    STA     MAP_ERR,,AUTO

      931    11014    5                     END;

      932    11015
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:176  
      933    11016
      934    11017    4                DBD$FEPMAP$->B$FEPMAP.TYP(MAP_PG#) = %DBD_MAPTYP_HHJIT#;

  11017  3 000747   000000 470400 xsym               LDP0    DBD$FEPMAP$
         3 000750   200724 720100                    LXL0    MAP_PG#,,AUTO
         3 000751   000000 236110                    LDQ     0,X0,PR0
         3 000752   000032 376000 xsym               ANQ     B_VECTNIL+26
         3 000753   001000 276003                    ORQ     512,DU
         3 000754   000000 756110                    STQ     0,X0,PR0

      935    11018    4                DBD$FEPMAP$->B$FEPMAP.WHAT#(MAP_PG#) = K;

  11018  3 000755   000000 470400 xsym               LDP0    DBD$FEPMAP$
         3 000756   200724 720100                    LXL0    MAP_PG#,,AUTO
         3 000757   200703 236100                    LDQ     K,,AUTO
         3 000760   000022 736000                    QLS     18
         3 000761   000000 676110                    ERQ     0,X0,PR0
         3 000762   000777 376003                    ANQ     511,DU
         3 000763   000000 656110                    ERSQ    0,X0,PR0

      936    11019    4                DBD$FEPMAP$->B$FEPMAP.INDX#(MAP_PG#) = UN;

  11019  3 000764   000000 470400 xsym               LDP0    DBD$FEPMAP$
         3 000765   200724 720100                    LXL0    MAP_PG#,,AUTO
         3 000766   200716 236100                    LDQ     UN,,AUTO
         3 000767   000011 736000                    QLS     9
         3 000770   000000 676110                    ERQ     0,X0,PR0
         3 000771   777000 376007                    ANQ     -512,DL
         3 000772   000000 656110                    ERSQ    0,X0,PR0

      937    11020    4                DBD$FEPMAP$->B$FEPMAP.SIZE(MAP_PG#) = 1;

  11020  3 000773   000000 470400 xsym               LDP0    DBD$FEPMAP$
         3 000774   200724 720100                    LXL0    MAP_PG#,,AUTO
         3 000775   000000 236110                    LDQ     0,X0,PR0
         3 000776   000052 376000 4                  ANQ     42
         3 000777   000001 276007                    ORQ     1,DL
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:177  
         3 001000   000000 756110                    STQ     0,X0,PR0

      938    11021
      939    11022    4                IF MAP_ERR ~= 0

  11022  3 001001   200723 235100                    LDA     MAP_ERR,,AUTO
         3 001002   001011 600000 3                  TZE     s:11029

      940    11023    5                THEN DO;

      941    11024    5                     CALL DBD$FEPMAP_ERR(MAP_PG#);

  11024  3 001003   200724 630500                    EPPR0   MAP_PG#,,AUTO
         3 001004   200736 450500                    STP0    LOW_MEM+4,,AUTO
         3 001005   200736 630500                    EPPR0   LOW_MEM+4,,AUTO
         3 001006   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 001007   000000 701000 xent               TSX1    DBD$FEPMAP_ERR
         3 001010   000000 011000                    NOP     0

      942    11025    5                     END;

      943    11026    4                END/*do if HHJIT ~ 0*/;

      944    11027    3           END/*do if DBD$FEPMAP$ ~ nil */;

      945    11028
      946    11029    2      RETURN;

  11029  3 001011   200734 221300                    LDX1  ! LOW_MEM+2,,AUTO
         3 001012   000001 702211                    TSX2  ! 1,X1
      947    11030    2   END DISP_INT_CON;
      948    11031    1   END DBD$INT_TABLE;
      949    11032        %EOD;

PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:178  
--  Include file information  --

   GH_LCP6_M.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   GH_SCHD_E.:E05TOU  is referenced.
   DB_ANLZ_M.:E05TOU  is referenced.
   GM_VIRTUAL_E.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   DBD_FEP_E.:E05TOU  is referenced.
   DA_FORMAT_C.:E05TOU  is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
      No diagnostics issued in procedure DBD$INT_TABLE.
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:179  

 **** Variables and constants ****

  ****  Section 001 RoData DBD$INT_TABLE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

   126-0-0/c CHAR(24)    r     1 ACTLVL_MSG0              134-0-0/c CHAR(11)    r     1 ACTLVL_MSG1
   137-0-0/c CHAR(19)    r     1 ACTLVL_MSG2              144-0-0/c CHAR(24)    r     1 GETMEM_ERR
     4-0-0/c CHAR(69)    r     1 INTCON_FMT                 0-0-0/w UBIN        r     1 INT_LVL$
    26-0-0/c CHAR(16)    r     1 INT_LVLWHO(0:15)
     1-0-0/w UBIN        r     1 INT_TABLE$

  ****  Section 002  Data  DBD$INT_TABLE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(288)   r     1 INTCON_RPT                20-0-0/w STRC(144)   r     1 INTCON_RPTHD00
    47-0-0/w STRC(144)   r     1 INTCON_RPTHD01            10-0-0/c STRC(270)   r     1 INTCON_RPTTX00
    24-0-0/c STRC(666)   r     1 INTCON_RPTTX01            53-0-0/c STRC(666)   r     1 INTCON_RPTTX02

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @TOP                     710-0-0/w UBIN        r     1 DEV
   725-0-0/w UBIN        r     1 ENTRY_TYPE               721-0-0/w UBIN        r     1 FLAGS
   715-0-0/w UBIN        r     1 HHJIT                    701-0-0/w SBIN        r     1 I
   720-0-0/w UBIN        r     1 IENTRY                   704-0-0/w UBIN        r     1 INTCON_SIZE
    71-0-0/c STRC(288)   r     1 INT_CON(0:48)            711-0-0/w UBIN        r     1 ISM1
   712-0-0/w UBIN        r     1 ISM2                     702-0-0/w UBIN        r     1 J
   703-0-0/w UBIN        r     1 K                        732-0-0/b BIT         r     1 LOW_MEM(0:71)
   723-0-0/w UBIN        r     1 MAP_ERR                  724-0-0/w UBIN        r     1 MAP_PG#
   713-0-0/w UBIN        r     1 P$                       722-0-0/w UBIN        r     1 RADIX
   717-0-0/w UBIN        r     1 RUNLEVEL                 714-0-0/w UBIN        r     1 S
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:180  
   705-0-0/w UBIN        r     1 THIS_INTCON              706-0-0/w UBIN        r     1 TIMER
    *0-0-0/w STRC(144)   r     1 TOP                      707-0-0/w UBIN        r     1 TSAP$
   716-0-0/w SBIN        r     1 UN                       726-0-0/c CHAR(16)    r     1 WHO

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(4)     r     1 BLANK_LINE                 0-0-0/w EPTR        r     1 DAF$WRITE
     0-0-0/w PTR         r     1 DBD$FEPMAP$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC        r     1 B$FEPMAP(0:0)
     0-0-0/w STRC(144)   r     1 OUT


   Procedure DBD$INT_TABLE requires 523 words for executable code.
   Procedure DBD$INT_TABLE requires 570 words of local(AUTO) storage.
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:181  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:182  
          MINI XREF LISTING

ACTLVL_MSG0
     10857**DCL     10902--CALL
ACTLVL_MSG1
     10860**DCL     10918--CALL
ACTLVL_MSG2
     10863**DCL     10911--CALL
B$FEPMAP
     10879**DCL     11010>>IF
B$FEPMAP.INDX#
     10884**DCL     11019<<ASSIGN
B$FEPMAP.SIZE
     10886**DCL     11020<<ASSIGN
B$FEPMAP.TYP
     10880**DCL     11017<<ASSIGN
B$FEPMAP.WHAT#
     10882**DCL     11018<<ASSIGN
BLANK_LINE
     10869**DCL     10958--CALL    10959--CALL
DAA$VALUE
     10614**DCL-ENT 10952--CALL
DAF$INIT
     10613**DCL-ENT 10938--CALL
DAF$WRITE
     10872**DCL     10902>>CALL    10911>>CALL    10918>>CALL    10958>>CALL    10959>>CALL    10968>>CALL
     10998>>CALL
DBD$FEPMAP$
     10871**DCL     10948>>IF      10987>>IF      11010>>IF      11017>>ASSIGN  11018>>ASSIGN  11019>>ASSIGN
     11020>>ASSIGN
DBD$FEPMAP_ERR
     10615**DCL-ENT 11012--CALL    11024--CALL
DBM$GETMEM
     10609**DCL-ENT 10899--CALL    10965--CALL
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:183  
DBM$PACK1
     10612**DCL-ENT 10972--CALL    10984--CALL
DBM$PACK2
     10610**DCL-ENT 10971--CALL    10976--CALL    10978--CALL    10979--CALL    10980--CALL    10982--CALL
     10983--CALL
DBM$PACK4
     10611**DCL-ENT 10977--CALL    10981--CALL    10985--CALL
DEV
     10655**DCL     10978<>CALL    10998--CALL
DISP_INT_CON
     10963**PROC    10910--CALL    10946--CALL    10954--CALL
ENTRY_TYPE
     10669**DCL     10897<<ASSIGN  10944<<ASSIGN  10974>>IF
FLAGS
     10664**DCL     10971<>CALL    10973>>IF      10998--CALL
GETMEM_ERR
     10868**DCL     10968--CALL
HHJIT
     10660**DCL     10983<>CALL    10998--CALL    11006>>ASSIGN
I
     10647**DCL     10916<<ASSIGN  10916<<ASSIGN  10917>>ASSIGN  10951<<DOINDEX 10952>>CALL
IENTRY
     10663**DCL     10985<>CALL    10998--CALL
INTCON_FMT
     10832**DCL     10998--CALL
INTCON_LOOP
     10939**LABEL   10934--GOTO
INTCON_RPT
     10697**DCL     10938<>CALL
INTCON_RPTHD00
     10764**DCL     10732--DCLINIT
INTCON_RPTHD01
     10807**DCL     10779--DCLINIT
INTCON_RPTTX00
     10740**DCL     10727--DCLINIT
INTCON_RPTTX01
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:184  
     10782**DCL     10772--DCLINIT
INTCON_RPTTX02
     10825**DCL     10815--DCLINIT
INTCON_SIZE
     10650**DCL     10896<<ASSIGN  10933<<ASSIGN  10939<<ASSIGN  10964>>ASSIGN
INT_CON
     10631**DCL     10896--ASSIGN  10933--ASSIGN  10939--ASSIGN  10965<>CALL    10965--CALL    10965--CALL
INT_CON.DEV
     10635**DCL     10978<>CALL
INT_CON.FLAGS
     10644**DCL     10971<>CALL
INT_CON.HHJIT
     10640**DCL     10983<>CALL
INT_CON.IENTRY
     10643**DCL     10985<>CALL
INT_CON.ISM1
     10636**DCL     10979<>CALL
INT_CON.ISM2
     10637**DCL     10980<>CALL
INT_CON.P$
     10638**DCL     10981<>CALL
INT_CON.RUNLEVEL
     10642**DCL     10984<>CALL
INT_CON.S
     10639**DCL     10982<>CALL
INT_CON.TIMER
     10633**DCL     10976<>CALL
INT_CON.TSAP$
     10634**DCL     10977<>CALL
INT_CON.USER
     10641**DCL     10972<>CALL
INT_LVL$
     10673**DCL     10899<>CALL
INT_LVLWHO
     10838**DCL     10917>>ASSIGN
INT_TABLE$
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:185  
     10674**DCL     10964>>ASSIGN
ISM1
     10656**DCL     10979<>CALL    10998--CALL
ISM2
     10657**DCL     10980<>CALL    10998--CALL
J
     10648**DCL     10904<<ASSIGN  10906>>IF      10925<<ASSIGN  10925>>ASSIGN
K
     10649**DCL     10905<<DOINDEX 10906>>IF      10908>>IF      10908>>IF      10911--CALL    10916>>IF
     10916>>ASSIGN  10916>>ASSIGN  10918--CALL    10923>>IF      10923>>IF      10923>>IF      10923>>IF
     10923>>IF      10923>>IF      10923>>IF      10945<<DOINDEX 10952<>CALL    10953>>IF      10953>>IF
     10964>>ASSIGN  10998--CALL    11018>>ASSIGN
LOW_MEM
     10671**DCL     10899<>CALL    10899--CALL    10899--CALL    10906>>IF
MAP_ERR
     10667**DCL     11009<<ASSIGN  11013<<ASSIGN  11022>>IF
MAP_PG#
     10668**DCL     11006<<ASSIGN  11007>>IF      11010>>IF      11012<>CALL    11017>>ASSIGN  11018>>ASSIGN
     11019>>ASSIGN  11020>>ASSIGN  11024<>CALL
OUT
     10569**DCL     10952<>CALL
P$
     10658**DCL     10981<>CALL    10998--CALL
RADIX
     10666**DCL     10952<>CALL
RUNLEVEL
     10662**DCL     10984<>CALL    10998--CALL
S
     10659**DCL     10982<>CALL    10998--CALL
THIS_INTCON
     10651**DCL     10964<<ASSIGN  10965<>CALL
TIMER
     10653**DCL     10976<>CALL    10998--CALL
TOP
     10524**DCL        11--PROC    10936--ENTRY
TOP.NSUBLKS
PL6.E3A0      #004=DBD$INT_TABLE File=DBD$FMT_G.:E05TSI                          TUE 07/29/97 13:04 Page:186  
     10536**DCL     10941>>IF      10951>>DOINDEX
TOP.SUBLK$
     10557**DCL     10952>>CALL
TSAP$
     10654**DCL     10977<>CALL    10998--CALL
UN
     10661**DCL     10911--CALL    10972<>CALL    10973>>IF      10998--CALL    11019>>ASSIGN
WHO
     10670**DCL     10917<<ASSIGN  10918--CALL

PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:187  
      950        1        /*T***********************************************************/
      951        2        /*T*                                                         */
      952        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      953        4        /*T*                                                         */
      954        5        /*T***********************************************************/
      955        6        /*F*    NAME: DBD$PPUT
      956        7                PURPOSE: To process the PPUT command for FEPs.
      957        8
      958        9        */
      959       10        DBD$PPUT: PROC(TOP);
      960       11
      961       12        /*X* PLM=3,IND=5,ECU=0,ENU=0   */
      962       13
      963       14        %INCLUDE CP_6;
      964     5573        %INCLUDE G$BOBCAT_M;
      965     5593        %INCLUDE GM_MACRO_M;
      966     6075        %INCLUDE DB_ANLZ_M;
      967     6242        %INCLUDE DA_FORMAT_C;
      968     6484        %INCLUDE XU_MACRO_C;
      969     9590        %INCLUDE B$TABLES_C;
      970     9698
      971     9699        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS=AUTO);
      972     9712
      973     9713        %PARSE$OUT (NAME=TOP,STCLASS=PARAM);
      974     9758        %PARSE$OUT (NAME=OUT,STCLASS=BASED);
      975     9803
      976     9804        %LIST;
      977     9805        %B$FEPMAP;
              9806    1   DCL 1 B$FEPMAP(0:0) BASED ALIGNED,
              9807    1         2 TYP UBIN BYTE CALIGNED,
              9808                                                /* 1=HHJIT   2=SFILE      3=USER      */
              9809    1         2 WHAT# UBIN BYTE CALIGNED,
              9810                                                /* INTLEVL   SFILE#       USER#       */
              9811    1         2 INDX# UBIN BYTE CALIGNED,
              9812                                                /* USR#      SFILE.SEG#   ASDT_INDX   */
              9813    1         2 SIZE UBIN BYTE CALIGNED;
              9814                                                /* # of pages #                       */
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:188  
              9815        %EQU DBD_MAPTYP_HHJIT#=1;
              9816        %EQU DBD_MAPTYP_SFILE#=2;
              9817        %EQU DBD_MAPTYP_USER#=3;
      978     9819        %PLIST;
      979     9820
      980     9821    1   DCL DAA$VALUE ENTRY(3) ALTRET;
      981     9822    1   DCL DAF$WRITE EPTR SYMREF;
      982     9823    1   DCL DAF$INIT ENTRY(1) ALTRET;
      983     9824    1   DCL DBB$HEXDUMP ENTRY(4);
      984     9825    1   DCL DBD$FEPMAP_ERR ENTRY(1);
      985     9826    1   DCL DBM$GETMEM ENTRY(10) ALTRET;
      986     9827    1   DCL DBM$GETBOBCAT ENTRY(1) ALTRET;
      987     9828    1   DCL DBM$PACK1 ENTRY(2);
      988     9829    1   DCL DBM$PACK2 ENTRY(2);
      989     9830    1   DCL DBM$PACK4 ENTRY(2);
      990     9831
      991     9832
      992     9833    1   DCL DBD$FEPMAP$ PTR SYMREF;
      993     9834        %G_UASDT_NAME (FPTN=DBD_UASDT_NAME, STCLASS=SYMREF);
      994     9879        %G_SFILE_SEG (FPTN=DBD_SFILE_SEG, STCLASS=SYMREF);
      995     9901
      996     9902        %B$XL_ASC_DUMP (NAME=DA_PRINTABLE_TBL);
      997     9906
      998     9907        %REPORT (NAME=FMAP_RPT1,TRUNC=YES,HEADER=NO,TITLE='FEP MAP of Physical Page Usage');
      999     9973
     1000     9974    1   DCL MFEP_FMT_USER CHAR(0) CONSTANT INIT(
     1001     9975        'Pgs %4ZH-%4ZH PPUT: %@4.16ZH %@4.16ZH %@4.16ZH %@4.16ZH
     1002     9976    1       User .%2.9ZH Seg# %2.9D - %8.8A Size .%4.18ZH');
     1003     9977
     1004     9978    1   DCL MFEP_FMT_SFILE CHAR(0) CONSTANT INIT(
     1005     9979        'Pgs %4ZH-%4ZH PPUT: %@4.16ZH %@4.16ZH %@4.16ZH %@4.16ZH
     1006     9980    1       Shared File  .%2.9ZH - %1S%8.8A Size .%4.18ZH');
     1007     9981
     1008     9982    1   DCL MFEP_FMT_HHJIT CHAR(0) CONSTANT INIT(
     1009     9983        'Pgs %4ZH-%4ZH PPUT: %@4.16ZH %@4.16ZH %@4.16ZH %@4.16ZH
     1010     9984    1       Lvl# .%2.9ZH Usr .%2.9ZH%8S - HHJIT    Size .%4.18ZH');
     1011     9985
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:189  
     1012     9986    1   DCL MFEP_FMT_UNALLOC CHAR(0) CONSTANT INIT(
     1013     9987        'Pgs %4ZH-%4ZH PPUT: %@4.16ZH %@4.16ZH %@4.16ZH %@4.16ZH
     1014     9988    1       Unallocated                 %10SSize .%4.18ZH');
     1015     9989
     1016     9990    1   DCL MFEP_FMT_NOWNER CHAR(0) CONSTANT INIT(
     1017     9991        'Pgs %4ZH-%4ZH PPUT: %@4.16ZH %@4.16ZH %@4.16ZH %@4.16ZH
     1018     9992    1       !! Search found No owner !! %10SSize .%4.18ZH');
     1019     9993
     1020     9994    1   DCL MFEP_FMT_UNKNOWN CHAR(0) CONSTANT INIT(
     1021     9995        'Pgs %4ZH-%4ZH PPUT: %@4.16ZH %@4.16ZH %@4.16ZH %@4.16ZH
     1022     9996    1       !! ANLZ err %12ZO !! %10SSize .%4.18ZH');
     1023     9997
     1024     9998        %REPORT (NAME=PPUT_RPT1,TRUNC=YES,HEADER=NO,TITLE='FEP PPUT - Physical Page Table');
     1025    10064    1   DCL PPUT_FMT10 CHAR(0) CONSTANT INIT(
     1026    10065    1   'PPUT$: .%@5.32ZH   #Pgs: .%4ZH   MEM_LO: .%@4.16ZH   MEM_HI: .%@4.16ZH   SHUF_HI: .
             10065        %@4.16ZH %S');
     1027    10066
     1028    10067    1   DCL PPUT_FMT1X CHAR(0) CONSTANT INIT(
     1029    10068    1   'PPUT Checker is %A');
     1030    10069
     1031    10070    1   DCL PPUT_FMT2X CHAR(0) CONSTANT SYMDEF INIT(
     1032    10071    1   'Relocated %@4.16D times - %@4.16D segs total  Relocation time:  %11..0.9U');
     1033    10072
     1034    10073    1   DCL PPUT_FMT11 CHAR(0) CONSTANT INIT(
     1035    10074    1   'PPUT free: .%4ZH   GM_SHUF: .%@4.16ZH   GM_NSHUF: .%@4.16ZH   Shuf+Nshf: .%4ZH   %A
             10074        ');
     1036    10075
     1037    10076    1   DCL PPUT_FMT12 CHAR(0) CONSTANT INIT(
     1038    10077    1   'PPUT in use: .%4ZH   PPUT free+used: .%4ZH   %A');
     1039    10078
     1040    10079
     1041    10080    1   DCL PPUT_FMT20 CHAR(0) CONSTANT INIT(
     1042    10081    1   'PPUT Entry - first page .%4ZH : %@4.16ZH %@4.16ZH  last page .%4ZH : %@4.16ZH %@4.1
             10081        6ZH %S');
     1043    10082
     1044    10083
     1045    10084    1   DCL BLANK_LINE CHAR(4) SYMREF;
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:190  
     1046    10085        /* AUTO Storage */
     1047    10086    1   DCL I UBIN;
     1048    10087    1   DCL X UBIN;
     1049    10088    1   DCL RADIX UBIN;
     1050    10089    1   DCL FIRST_PPUT$ UBIN;
     1051    10090    1   DCL LAST_PPUT$ UBIN;
     1052    10091    1   DCL THIS_SIZE UBIN;
     1053    10092    1   DCL PSIZE UBIN;
     1054    10093    1   DCL LAST_SIZE UBIN;
     1055    10094    1   DCL FREE UBIN;
     1056    10095    1   DCL INUSE UBIN;
     1057    10096    1   DCL USEFLAG BIT(1) ALIGNED;
     1058    10097    1   DCL MMDATA$ UBIN;
     1059    10098    1   DCL PGS# UBIN;
     1060    10099    1   DCL MAP_PG# UBIN;
     1061    10100    1   DCL SHUF_TIME UBIN;
     1062    10101    1   DCL CCCC CHAR(4);
     1063    10102
     1064    10103    1   DCL PPUT$ UBIN;
     1065    10104    1   DCL MEMLOW UBIN;
     1066    10105    1   DCL MEMLAST UBIN;
     1067    10106    1   DCL MEMHI UBIN;
     1068    10107    1   DCL SHUFHI UBIN;
     1069    10108    1   DCL ACTION UBIN;
     1070    10109
     1071    10110    1   DCL PPUT_SIZE UBIN;                     /*PPUT_FIRST L6 word size             */
     1072    10111
     1073    10112    1   DCL 1 PPUT_FIRST,
     1074    10113    1         2 W1,
     1075    10114    1           3 OWNER UBIN BYTE UNAL,
     1076    10115    1           3 * BIT(1) UNAL,
     1077    10116    1           3 FIRSTPG BIT(1) UNAL,
     1078    10117    1           3 LASTPG BIT(1) UNAL,
     1079    10118    1           3 INUSE BIT(1) UNAL,
     1080    10119    1           3 SHARED BIT(1) UNAL,
     1081    10120    1           3 SHUFFABLE BIT(1) UNAL,
     1082    10121    1           3 PP BIT(1) UNAL,
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:191  
     1083    10122    1           3 * BIT(2) UNAL,
     1084    10123    1         2 W2,
     1085    10124    1           3 SIZE UBIN(18) CALIGNED;
     1086    10125
     1087    10126    1   DCL 1 PPUT_LAST,
     1088    10127    1         2 W1,
     1089    10128    1           3 OWNER UBIN BYTE UNAL,
     1090    10129    1           3 * BIT(1) UNAL,
     1091    10130    1           3 FIRSTPG BIT(1) UNAL,
     1092    10131    1           3 LASTPG BIT(1) UNAL,
     1093    10132    1           3 INUSE BIT(1) UNAL,
     1094    10133    1           3 SHARED BIT(1) UNAL,
     1095    10134    1           3 SHUFFABLE BIT(1) UNAL,
     1096    10135    1           3 PP BIT(1) UNAL,
     1097    10136    1           3 * BIT(2) UNAL,
     1098    10137    1         2 W2,
     1099    10138    1           3 SIZE UBIN(18) CALIGNED;
     1100    10139
     1101    10140        %GM_DATA_TBL (FPTN=GM$DATA,TYPE=STRUCTURE,STCLASS=AUTO);
     1102    10257
     1103    10258    1   DCL 1 MAPDAT AUTO,
     1104    10259    1         2 WHAT# UBIN BYTE CALIGNED,
     1105    10260    1         2 INDX# UBIN BYTE CALIGNED,
     1106    10261    1         2 NAME# CHAR(8) CALIGNED,
     1107    10262    1         2 SIZE# UBIN(18) CALIGNED;
     1108    10263
     1109    10264    1   DCL FMTVEC VECTOR;
     1110    10265        %EJECT;
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:192  
     1111    10266
     1112    10267    1   PPUT_START: ;
     1113    10268    1      INUSE = 0;
     1114    10269    1      FREE = 0;
     1115    10270    1      CALL DBM$GETBOBCAT(G$BOBCAT)
     1116    10271    2      WHENALTRETURN DO; RETURN; END;
     1117    10272    1      CALL DBM$PACK4(G$BOBCAT.PPUT$,PPUT$);
     1118    10273
     1119    10274    1      CALL DBM$PACK4(G$BOBCAT.MMDATA$,MMDATA$);
     1120    10275    1      CALL DBM$GETMEM(MMDATA$,GM$DATA,0,SIZEC(GM$DATA),,SIZEC(GM$DATA));
     1121    10276    1      CALL DBM$PACK2(GM$DATA.MEM_LOW,MEMLOW);
     1122    10277    1      CALL DBM$PACK2(GM$DATA.MEM_HI,MEMHI);
     1123    10278    1      CALL DBM$PACK2(GM$DATA.SHUF_HI,SHUFHI);
     1124    10279    1      PGS# = (MEMHI - MEMLOW) +1;
     1125    10280
     1126    10281    1      IF DBD$FEPMAP$ ~= ADDR(NIL)
     1127    10282    2      THEN DO;
     1128    10283    2           CALL DAF$INIT(FMAP_RPT1);
     1129    10284    2           ACTION=1/*display*/;
     1130    10285    2           GOTO DISPLAY_ALL;
     1131    10286    2           END;
     1132    10287
     1133    10288    1      CALL DAF$INIT(PPUT_RPT1);
     1134    10289    1      IF TOP.NSUBLKS=0
     1135    10290    2      THEN DO;
     1136    10291    2           ACTION = 0/*CHECK PPUT*/;
     1137    10292    2   DISPLAY_ALL: ;
     1138    10293
     1139    10294    3           DO WHILE (MEMLOW <= MEMHI);
     1140    10295    3                CALL DISP_PPUT;
     1141    10296    3                END;
     1142    10297
     1143    10298    2           IF DBD$FEPMAP$ ~= ADDR(NIL) THEN RETURN;
     1144    10299
     1145    10300
     1146    10301    2           CALL DAF$WRITE(VECTOR(BLANK_LINE));
     1147    10302
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:193  
     1148    10303
     1149    10304    2           CALL DAF$WRITE(VECTOR(PPUT_FMT10),  VECTOR(G$BOBCAT.PPUT$), VECTOR(PGS#),
     1150    10305    2             VECTOR(G$BOBCAT.MEM_LOW), VECTOR(G$BOBCAT.MEM_HI), VECTOR(GM$DATA.SHUF_HI)
             10305                      );
     1151    10306
     1152    10307    2           CALL DBM$PACK2(GM$DATA.SHUF,I);
     1153    10308    2           CALL DBM$PACK2(GM$DATA.NSHF,X);
     1154    10309    2           I = I+X;
     1155    10310    2           IF I=FREE THEN CCCC='    '; ELSE CCCC='ERR!';
     1156    10311
     1157    10312    2           CALL DAF$WRITE(VECTOR(PPUT_FMT11), VECTOR(FREE),
     1158    10313    2             VECTOR(GM$DATA.SHUF), VECTOR(GM$DATA.NSHF), VECTOR(I), VECTOR(CCCC));
     1159    10314
     1160    10315    2           I = FREE + INUSE;
     1161    10316    2           IF I=PGS# THEN CCCC='    '; ELSE CCCC='ERR!';
     1162    10317
     1163    10318    2           CALL DAF$WRITE(VECTOR(PPUT_FMT12), VECTOR(INUSE),
     1164    10319    2             VECTOR(I), VECTOR(CCCC));
     1165    10320
     1166    10321    2           CALL DBM$PACK2(GM$DATA.CHK_PPUT,I);
     1167    10322    2           IF I = 0 THEN CCCC='off '; ELSE CCCC='on  ';
     1168    10323
     1169    10324    2           CALL DAF$WRITE(VECTOR(PPUT_FMT1X), VECTOR(CCCC));
     1170    10325
     1171    10326    2           CALL DBM$PACK4(GM$DATA.SHUF_TIME,SHUF_TIME);
     1172    10327    2           SHUF_TIME = (SHUF_TIME*5) /6;
     1173    10328    2           CALL DAF$WRITE(VECTOR(PPUT_FMT2X), VECTOR(GM$DATA.SHUF_COUNT),
     1174    10329    2             VECTOR(GM$DATA.SHUF_SEGS#), VECTOR(SHUF_TIME));
     1175    10330
     1176    10331    2           CALL DAF$WRITE(VECTOR(BLANK_LINE));
     1177    10332
     1178    10333    2           END;
     1179    10334
     1180    10335    2      ELSE DO;                             /*display a single pput entry*/
     1181    10336    2           ACTION = 1/*DISPLAY PUT*/;
     1182    10337    3           DO X=0 TO TOP.NSUBLKS-1;
     1183    10338    3                CALL DAA$VALUE(TOP.SUBLK$(X)->OUT,MEMLOW);
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:194  
     1184    10339    3                IF MEMLOW=0
     1185    10340    4                THEN DO;
     1186    10341    4                     ACTION=1;
     1187    10342    4                     CALL DBM$PACK2(G$BOBCAT.MEM_LOW,MEMLOW);
     1188    10343    4                     GOTO DISPLAY_ALL;
     1189    10344    4                     END;
     1190    10345    3                IF (MEMLOW > 0) AND (MEMLOW <= MEMHI)
     1191    10346    3                THEN CALL DISP_PPUT;
     1192    10347    3                END;
     1193    10348    2           END;
     1194    10349
     1195    10350    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));
     1196    10351    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));
     1197    10352    1      RETURN;
     1198    10353
     1199    10354
     1200    10355
     1201    10356
     1202    10357    1   DBD$PPUT_CHECK: ENTRY(TOP);
     1203    10358    1      TOP.NSUBLKS = 0;
     1204    10359    1      GOTO PPUT_START;
     1205    10360        %EJECT;
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:195  
     1206    10361
     1207    10362    1   DISP_PPUT: PROC;
     1208    10363    2      FIRST_PPUT$ = PPUT$ + (MEMLOW *2);
     1209    10364    2      CALL DBM$GETMEM(FIRST_PPUT$,PPUT_FIRST,0,SIZEC(PPUT_FIRST),,SIZEC(PPUT_FIRST));
     1210    10365
     1211    10366    2      CALL DBM$PACK2(PPUT_FIRST.W2.SIZE,PSIZE);
     1212    10367    2      USEFLAG = PPUT_FIRST.W1.INUSE;
     1213    10368
     1214    10369    2      IF PSIZE = 0
     1215    10370    3      THEN DO;
     1216    10371    3           PPUT_LAST = PPUT_FIRST;
     1217    10372    3           PSIZE=1;
     1218    10373    3           GOTO DISPLAY_IT;
     1219    10374    3           END;
     1220    10375    2      MEMLAST = MEMLOW + PSIZE -1;
     1221    10376    2      LAST_PPUT$ = PPUT$ + (MEMLAST *2);
     1222    10377    2      CALL DBM$GETMEM(LAST_PPUT$,PPUT_LAST,0,SIZEC(PPUT_LAST),,SIZEC(PPUT_LAST));
     1223    10378    2      CALL DBM$PACK2(PPUT_LAST.W2.SIZE,LAST_SIZE);
     1224    10379
     1225    10380    2      IF (ACTION=0 /*CHECK PPUT*/)
     1226    10381    3      THEN DO;
     1227    10382    3           IF NOT PPUT_FIRST.W1.FIRSTPG OR NOT PPUT_LAST.W1.LASTPG
     1228    10383    3           THEN GOTO DISPLAY_IT;
     1229    10384
     1230    10385    3           IF PPUT_FIRST.W2.SIZE = 1 AND NOT PPUT_FIRST.W1.LASTPG
     1231    10386    3           THEN GOTO DISPLAY_IT;
     1232    10387
     1233    10388    3           IF PPUT_FIRST.W1.LASTPG AND PPUT_FIRST.W2.SIZE~=1
     1234    10389    3           THEN GOTO DISPLAY_IT;
     1235    10390
     1236    10391    3           IF PSIZE ~= LAST_SIZE
     1237    10392    3           THEN GOTO DISPLAY_IT;
     1238    10393
     1239    10394    3           IF (PPUT_LAST.W1.INUSE AND NOT USEFLAG)
     1240    10395    3             OR (NOT(PPUT_LAST.W1.INUSE) AND USEFLAG)
     1241    10396    3           THEN GOTO DISPLAY_IT;
     1242    10397
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:196  
     1243    10398    3           MEMLOW = MEMLOW + PSIZE;
     1244    10399    3           END;
     1245    10400
     1246    10401    3      ELSE DO/*Display*/;
     1247    10402    3   DISPLAY_IT: ;
     1248    10403    3           IF MEMLOW = SHUFHI+1
     1249    10404    3           THEN CALL DAF$WRITE(VECTOR(BLANK_LINE));
     1250    10405    3           IF DBD$FEPMAP$ = ADDR(NIL)
     1251    10406    4           THEN DO;
     1252    10407    4                CALL DAF$WRITE(VECTOR(PPUT_FMT20),
     1253    10408    4                  VECTOR(MEMLOW), VECTOR(PPUT_FIRST),
     1254    10409    4                  VECTOR(MEMLAST), VECTOR(PPUT_LAST) );
     1255    10410    4                END;
     1256    10411
     1257    10412    4           ELSE DO/*if mapping*/;
     1258    10413    4                MAPDAT.WHAT# = DBD$FEPMAP$->B$FEPMAP.WHAT#(MEMLOW);
     1259    10414    4                MAPDAT.INDX# = DBD$FEPMAP$->B$FEPMAP.INDX#(MEMLOW);
     1260    10415    4                MAPDAT.SIZE# = PSIZE;
     1261    10416    4                IF USEFLAG
     1262    10417    5                THEN DO;
     1263    10418    6                     DO CASE(DBD$FEPMAP$->B$FEPMAP.TYP(MEMLOW));
     1264    10419
     1265    10420    6                      CASE(%DBD_MAPTYP_HHJIT#);
     1266    10421    6                        FMTVEC = VECTOR(MFEP_FMT_HHJIT);
     1267    10422
     1268    10423    6                      CASE(%DBD_MAPTYP_SFILE#);
     1269    10424    6                        FMTVEC = VECTOR(MFEP_FMT_SFILE);
     1270    10425    6                        MAPDAT.NAME# = DBD_SFILE_SEG(MAPDAT.INDX#);
     1271    10426
     1272    10427    6                      CASE(%DBD_MAPTYP_USER#);
     1273    10428    6                        FMTVEC = VECTOR(MFEP_FMT_USER);
     1274    10429    6                        MAPDAT.NAME# = DBD_UASDT_NAME(MAPDAT.INDX#);
     1275    10430
     1276    10431    6                      CASE(ELSE);
     1277    10432    6                        IF DBD$FEPMAP$->B$FEPMAP(MEMLOW) = '0'B
     1278    10433    6                        THEN FMTVEC = VECTOR(MFEP_FMT_NOWNER);
     1279    10434
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:197  
     1280    10435    6                        ELSE FMTVEC = VECTOR(MFEP_FMT_UNKNOWN);
     1281    10436
     1282    10437    6                        END/*do case*/;
     1283    10438
     1284    10439    5                     DBD$FEPMAP$->B$FEPMAP(MEMLOW) = '0'B;
     1285    10440    5                     END/*do if useflag*/;
     1286    10441
     1287    10442
     1288    10443    4                ELSE FMTVEC = VECTOR(MFEP_FMT_UNALLOC);
     1289    10444
     1290    10445    4                CALL DAF$WRITE (FMTVEC,
     1291    10446    4                  VECTOR(MEMLOW), VECTOR(MEMLAST), VECTOR(PPUT_FIRST),
     1292    10447    4                  VECTOR(PPUT_LAST), VECTOR(MAPDAT) );
     1293    10448
     1294    10449
     1295    10450    5                DO MAP_PG# = MEMLOW TO MEMLAST;
     1296    10451    5                     IF DBD$FEPMAP$->B$FEPMAP(MAP_PG#) ~= '0'B
     1297    10452    5                     THEN CALL DBD$FEPMAP_ERR(MAP_PG#);
     1298    10453    5                     END;
     1299    10454
     1300    10455    4                END/*do if mapping*/;
     1301    10456
     1302    10457
     1303    10458    3           IF PSIZE > 256
     1304    10459    3           THEN THIS_SIZE = 256*2;
     1305    10460    3           ELSE THIS_SIZE = PSIZE*2;
     1306    10461
     1307    10462    3           IF PPUT_FIRST.W2.SIZE = PPUT_LAST.W2.SIZE
     1308    10463    3           THEN MEMLOW = MEMLOW + PSIZE;
     1309    10464    3           ELSE MEMLOW = MEMLOW + 1/*try to find next good one*/;
     1310    10465    3           END/*do if display*/;
     1311    10466
     1312    10467    2      IF USEFLAG THEN INUSE = INUSE + PSIZE;
     1313    10468    2      ELSE FREE = FREE + PSIZE;
     1314    10469
     1315    10470    2   END DISP_PPUT;
     1316    10471
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:198  
     1317    10472    1   END DBD$PPUT;
     1318    10473        %EOD;

PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:199  
--  Include file information  --

   B$TABLES_C.:E05TOU  cannot be made into a system file and is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
   DA_FORMAT_C.:E05TOU  is referenced.
   DB_ANLZ_M.:E05TOU  is referenced.
   GM_MACRO_M.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBD$PPUT.

   Procedure DBD$PPUT requires 745 words for executable code.
   Procedure DBD$PPUT requires 134 words of local(AUTO) storage.

PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:200  

 Object Unit name= DBD$PPUT                                   File name= DBD$FMT_G.:E05TOU
 UTS= JUL 29 '97 13:04:34.80 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none    32     40  DBD$PPUT
    2  RoData even  UTS    264    410  DBD$PPUT
    3   Proc  even  none   745   1351  DBD$PPUT
    4  RoData even  none    55     67  DBD$PPUT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes            yes      Std        1  DBD$PPUT
     3    647                  yes      Std        1  DBD$PPUT_CHECK

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    2    271  PPUT_FMT2X
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:201  

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes          ~proc      0 B_POINTER
         yes           Std       2 DBM$PACK2
 yes     yes           Std       1 DBM$GETBOBCAT
         yes           Std       2 DBM$PACK4
 yes     yes           Std      10 DBM$GETMEM
 yes     yes           Std       1 DAF$INIT
 yes     yes           Std       3 DAA$VALUE
         yes           Std       1 DBD$FEPMAP_ERR
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  DAF$WRITE                             DBD$FEPMAP$
     DBD_UASDT_NAME                        DBD_SFILE_SEG                    r    B$XL_ASC_DUMP$
     BLANK_LINE                            B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:202  


      950        1        /*T***********************************************************/
      951        2        /*T*                                                         */
      952        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      953        4        /*T*                                                         */
      954        5        /*T***********************************************************/
      955        6        /*F*    NAME: DBD$PPUT
      956        7                PURPOSE: To process the PPUT command for FEPs.
      957        8
      958        9        */
      959       10        DBD$PPUT: PROC(TOP);

     10  3 000000   000000 700200 xent  DBD$PPUT     TSX0  ! X66_AUTO_1
         3 000001   000206 000001                    ZERO    134,1

      960       11
      961       12        /*X* PLM=3,IND=5,ECU=0,ENU=0   */
      962       13
      963       14        %INCLUDE CP_6;
      964     5573        %INCLUDE G$BOBCAT_M;
      965     5593        %INCLUDE GM_MACRO_M;
      966     6075        %INCLUDE DB_ANLZ_M;
      967     6242        %INCLUDE DA_FORMAT_C;
      968     6484        %INCLUDE XU_MACRO_C;
      969     9590        %INCLUDE B$TABLES_C;
      970     9698
      971     9699        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS=AUTO);
      972     9712
      973     9713        %PARSE$OUT (NAME=TOP,STCLASS=PARAM);
      974     9758        %PARSE$OUT (NAME=OUT,STCLASS=BASED);
      975     9803
      976     9804        %LIST;
      977     9805        %B$FEPMAP;
              9806    1   DCL 1 B$FEPMAP(0:0) BASED ALIGNED,
              9807    1         2 TYP UBIN BYTE CALIGNED,
              9808                                                /* 1=HHJIT   2=SFILE      3=USER      */
              9809    1         2 WHAT# UBIN BYTE CALIGNED,
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:203  
              9810                                                /* INTLEVL   SFILE#       USER#       */
              9811    1         2 INDX# UBIN BYTE CALIGNED,
              9812                                                /* USR#      SFILE.SEG#   ASDT_INDX   */
              9813    1         2 SIZE UBIN BYTE CALIGNED;
              9814                                                /* # of pages #                       */
              9815        %EQU DBD_MAPTYP_HHJIT#=1;
              9816        %EQU DBD_MAPTYP_SFILE#=2;
              9817        %EQU DBD_MAPTYP_USER#=3;
      978     9819        %PLIST;
      979     9820
      980     9821    1   DCL DAA$VALUE ENTRY(3) ALTRET;
      981     9822    1   DCL DAF$WRITE EPTR SYMREF;
      982     9823    1   DCL DAF$INIT ENTRY(1) ALTRET;
      983     9824    1   DCL DBB$HEXDUMP ENTRY(4);
      984     9825    1   DCL DBD$FEPMAP_ERR ENTRY(1);
      985     9826    1   DCL DBM$GETMEM ENTRY(10) ALTRET;
      986     9827    1   DCL DBM$GETBOBCAT ENTRY(1) ALTRET;
      987     9828    1   DCL DBM$PACK1 ENTRY(2);
      988     9829    1   DCL DBM$PACK2 ENTRY(2);
      989     9830    1   DCL DBM$PACK4 ENTRY(2);
      990     9831
      991     9832
      992     9833    1   DCL DBD$FEPMAP$ PTR SYMREF;
      993     9834        %G_UASDT_NAME (FPTN=DBD_UASDT_NAME, STCLASS=SYMREF);
      994     9879        %G_SFILE_SEG (FPTN=DBD_SFILE_SEG, STCLASS=SYMREF);
      995     9901
      996     9902        %B$XL_ASC_DUMP (NAME=DA_PRINTABLE_TBL);
      997     9906
      998     9907       %REPORT (NAME=FMAP_RPT1,TRUNC=YES,HEADER=NO,TITLE='FEP MAP of Physical Page Usage');
      999     9973
     1000     9974    1   DCL MFEP_FMT_USER CHAR(0) CONSTANT INIT(
     1001     9975        'Pgs %4ZH-%4ZH PPUT: %@4.16ZH %@4.16ZH %@4.16ZH %@4.16ZH
     1002     9976    1       User .%2.9ZH Seg# %2.9D - %8.8A Size .%4.18ZH');
     1003     9977
     1004     9978    1   DCL MFEP_FMT_SFILE CHAR(0) CONSTANT INIT(
     1005     9979        'Pgs %4ZH-%4ZH PPUT: %@4.16ZH %@4.16ZH %@4.16ZH %@4.16ZH
     1006     9980    1       Shared File  .%2.9ZH - %1S%8.8A Size .%4.18ZH');
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:204  
     1007     9981
     1008     9982    1   DCL MFEP_FMT_HHJIT CHAR(0) CONSTANT INIT(
     1009     9983        'Pgs %4ZH-%4ZH PPUT: %@4.16ZH %@4.16ZH %@4.16ZH %@4.16ZH
     1010     9984    1       Lvl# .%2.9ZH Usr .%2.9ZH%8S - HHJIT    Size .%4.18ZH');
     1011     9985
     1012     9986    1   DCL MFEP_FMT_UNALLOC CHAR(0) CONSTANT INIT(
     1013     9987        'Pgs %4ZH-%4ZH PPUT: %@4.16ZH %@4.16ZH %@4.16ZH %@4.16ZH
     1014     9988    1       Unallocated                 %10SSize .%4.18ZH');
     1015     9989
     1016     9990    1   DCL MFEP_FMT_NOWNER CHAR(0) CONSTANT INIT(
     1017     9991        'Pgs %4ZH-%4ZH PPUT: %@4.16ZH %@4.16ZH %@4.16ZH %@4.16ZH
     1018     9992    1       !! Search found No owner !! %10SSize .%4.18ZH');
     1019     9993
     1020     9994    1   DCL MFEP_FMT_UNKNOWN CHAR(0) CONSTANT INIT(
     1021     9995        'Pgs %4ZH-%4ZH PPUT: %@4.16ZH %@4.16ZH %@4.16ZH %@4.16ZH
     1022     9996    1       !! ANLZ err %12ZO !! %10SSize .%4.18ZH');
     1023     9997
     1024     9998       %REPORT (NAME=PPUT_RPT1,TRUNC=YES,HEADER=NO,TITLE='FEP PPUT - Physical Page Table');
     1025    10064    1   DCL PPUT_FMT10 CHAR(0) CONSTANT INIT(
     1026    10065    1   'PPUT$: .%@5.32ZH   #Pgs: .%4ZH   MEM_LO: .%@4.16ZH   MEM_HI: .%@4.16ZH  SHUF_HI: .
             10065        %@4.16ZH %S');
     1027    10066
     1028    10067    1   DCL PPUT_FMT1X CHAR(0) CONSTANT INIT(
     1029    10068    1   'PPUT Checker is %A');
     1030    10069
     1031    10070    1   DCL PPUT_FMT2X CHAR(0) CONSTANT SYMDEF INIT(
     1032    10071    1   'Relocated %@4.16D times - %@4.16D segs total  Relocation time:  %11..0.9U');
     1033    10072
     1034    10073    1   DCL PPUT_FMT11 CHAR(0) CONSTANT INIT(
     1035    10074    1   'PPUT free: .%4ZH   GM_SHUF: .%@4.16ZH   GM_NSHUF: .%@4.16ZH   Shuf+Nshf: .%4ZH  %A
             10074        ');
     1036    10075
     1037    10076    1   DCL PPUT_FMT12 CHAR(0) CONSTANT INIT(
     1038    10077    1   'PPUT in use: .%4ZH   PPUT free+used: .%4ZH   %A');
     1039    10078
     1040    10079
     1041    10080    1   DCL PPUT_FMT20 CHAR(0) CONSTANT INIT(
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:205  
     1042    10081    1   'PPUT Entry - first page .%4ZH : %@4.16ZH %@4.16ZH last page .%4ZH : %@4.16ZH %@4.1
             10081        6ZH %S');
     1043    10082
     1044    10083
     1045    10084    1   DCL BLANK_LINE CHAR(4) SYMREF;
     1046    10085        /* AUTO Storage */
     1047    10086    1   DCL I UBIN;
     1048    10087    1   DCL X UBIN;
     1049    10088    1   DCL RADIX UBIN;
     1050    10089    1   DCL FIRST_PPUT$ UBIN;
     1051    10090    1   DCL LAST_PPUT$ UBIN;
     1052    10091    1   DCL THIS_SIZE UBIN;
     1053    10092    1   DCL PSIZE UBIN;
     1054    10093    1   DCL LAST_SIZE UBIN;
     1055    10094    1   DCL FREE UBIN;
     1056    10095    1   DCL INUSE UBIN;
     1057    10096    1   DCL USEFLAG BIT(1) ALIGNED;
     1058    10097    1   DCL MMDATA$ UBIN;
     1059    10098    1   DCL PGS# UBIN;
     1060    10099    1   DCL MAP_PG# UBIN;
     1061    10100    1   DCL SHUF_TIME UBIN;
     1062    10101    1   DCL CCCC CHAR(4);
     1063    10102
     1064    10103    1   DCL PPUT$ UBIN;
     1065    10104    1   DCL MEMLOW UBIN;
     1066    10105    1   DCL MEMLAST UBIN;
     1067    10106    1   DCL MEMHI UBIN;
     1068    10107    1   DCL SHUFHI UBIN;
     1069    10108    1   DCL ACTION UBIN;
     1070    10109
     1071    10110    1   DCL PPUT_SIZE UBIN;                     /*PPUT_FIRST L6 word size             */
     1072    10111
     1073    10112    1   DCL 1 PPUT_FIRST,
     1074    10113    1         2 W1,
     1075    10114    1           3 OWNER UBIN BYTE UNAL,
     1076    10115    1           3 * BIT(1) UNAL,
     1077    10116    1           3 FIRSTPG BIT(1) UNAL,
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:206  
     1078    10117    1           3 LASTPG BIT(1) UNAL,
     1079    10118    1           3 INUSE BIT(1) UNAL,
     1080    10119    1           3 SHARED BIT(1) UNAL,
     1081    10120    1           3 SHUFFABLE BIT(1) UNAL,
     1082    10121    1           3 PP BIT(1) UNAL,
     1083    10122    1           3 * BIT(2) UNAL,
     1084    10123    1         2 W2,
     1085    10124    1           3 SIZE UBIN(18) CALIGNED;
     1086    10125
     1087    10126    1   DCL 1 PPUT_LAST,
     1088    10127    1         2 W1,
     1089    10128    1           3 OWNER UBIN BYTE UNAL,
     1090    10129    1           3 * BIT(1) UNAL,
     1091    10130    1           3 FIRSTPG BIT(1) UNAL,
     1092    10131    1           3 LASTPG BIT(1) UNAL,
     1093    10132    1           3 INUSE BIT(1) UNAL,
     1094    10133    1           3 SHARED BIT(1) UNAL,
     1095    10134    1           3 SHUFFABLE BIT(1) UNAL,
     1096    10135    1           3 PP BIT(1) UNAL,
     1097    10136    1           3 * BIT(2) UNAL,
     1098    10137    1         2 W2,
     1099    10138    1           3 SIZE UBIN(18) CALIGNED;
     1100    10139
     1101    10140        %GM_DATA_TBL (FPTN=GM$DATA,TYPE=STRUCTURE,STCLASS=AUTO);
     1102    10257
     1103    10258    1   DCL 1 MAPDAT AUTO,
     1104    10259    1         2 WHAT# UBIN BYTE CALIGNED,
     1105    10260    1         2 INDX# UBIN BYTE CALIGNED,
     1106    10261    1         2 NAME# CHAR(8) CALIGNED,
     1107    10262    1         2 SIZE# UBIN(18) CALIGNED;
     1108    10263
     1109    10264    1   DCL FMTVEC VECTOR;

  10264  3 000002                       PPUT_START   null
     1110    10265        %EJECT;
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:207  
     1111    10266
     1112    10267    1   PPUT_START: ;
     1113    10268    1      INUSE = 0;

  10268  3 000002   200102 450100                    STZ     INUSE,,AUTO

     1114    10269    1      FREE = 0;

  10269  3 000003   200101 450100                    STZ     FREE,,AUTO

     1115    10270    1      CALL DBM$GETBOBCAT(G$BOBCAT)

  10270  3 000004   200004 630500                    EPPR0   G$BOBCAT,,AUTO
         3 000005   200142 450500                    STP0    FMTVEC+4,,AUTO
         3 000006   200142 630500                    EPPR0   FMTVEC+4,,AUTO
         3 000007   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000010   000000 701000 xent               TSX1    DBM$GETBOBCAT
         3 000011   000013 702000 3                  TSX2    s:10271
         3 000012   000014 710000 3                  TRA     s:10272

     1116    10271    2      WHENALTRETURN DO; RETURN; END;

  10271  3 000013   000000 702200 xent               TSX2  ! X66_ARET

     1117    10272    1      CALL DBM$PACK4(G$BOBCAT.PPUT$,PPUT$);

  10272  3 000014   200111 630500                    EPPR0   PPUT$,,AUTO
         3 000015   200143 450500                    STP0    FMTVEC+5,,AUTO
         3 000016   200022 631500                    EPPR1   G$BOBCAT+14,,AUTO
         3 000017   200142 451500                    STP1    FMTVEC+4,,AUTO
         3 000020   200142 630500                    EPPR0   FMTVEC+4,,AUTO
         3 000021   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000022   000000 701000 xent               TSX1    DBM$PACK4
         3 000023   000000 011000                    NOP     0

     1118    10273
     1119    10274    1      CALL DBM$PACK4(G$BOBCAT.MMDATA$,MMDATA$);
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:208  

  10274  3 000024   200104 630500                    EPPR0   MMDATA$,,AUTO
         3 000025   200143 450500                    STP0    FMTVEC+5,,AUTO
         3 000026   200007 631500                    EPPR1   G$BOBCAT+3,,AUTO
         3 000027   200142 451500                    STP1    FMTVEC+4,,AUTO
         3 000030   200142 630500                    EPPR0   FMTVEC+4,,AUTO
         3 000031   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000032   000000 701000 xent               TSX1    DBM$PACK4
         3 000033   000000 011000                    NOP     0

     1120    10275    1      CALL DBM$GETMEM(MMDATA$,GM$DATA,0,SIZEC(GM$DATA),,SIZEC(GM$DATA));

  10275  3 000034   000001 236000 4                  LDQ     1
         3 000035   000001 235000 xsym               LDA     B_VECTNIL+1
         3 000036   200146 757100                    STAQ    FMTVEC+8,,AUTO
         3 000037   000002 237000 4                  LDAQ    2
         3 000040   200144 757100                    STAQ    FMTVEC+6,,AUTO
         3 000041   200122 630500                    EPPR0   GM$DATA,,AUTO
         3 000042   200143 450500                    STP0    FMTVEC+5,,AUTO
         3 000043   200104 631500                    EPPR1   MMDATA$,,AUTO
         3 000044   200142 451500                    STP1    FMTVEC+4,,AUTO
         3 000045   200142 630500                    EPPR0   FMTVEC+4,,AUTO
         3 000046   000024 631400 xsym               EPPR1   B_VECTNIL+20
         3 000047   000000 701000 xent               TSX1    DBM$GETMEM
         3 000050   000000 011000                    NOP     0

     1121    10276    1      CALL DBM$PACK2(GM$DATA.MEM_LOW,MEMLOW);

  10276  3 000051   200112 630500                    EPPR0   MEMLOW,,AUTO
         3 000052   200143 450500                    STP0    FMTVEC+5,,AUTO
         3 000053   200122 631500                    EPPR1   GM$DATA,,AUTO
         3 000054   200142 451500                    STP1    FMTVEC+4,,AUTO
         3 000055   200142 630500                    EPPR0   FMTVEC+4,,AUTO
         3 000056   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000057   000000 701000 xent               TSX1    DBM$PACK2
         3 000060   000000 011000                    NOP     0

PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:209  
     1122    10277    1      CALL DBM$PACK2(GM$DATA.MEM_HI,MEMHI);

  10277  3 000061   200114 630500                    EPPR0   MEMHI,,AUTO
         3 000062   200143 450500                    STP0    FMTVEC+5,,AUTO
         3 000063   200144 452500                    STP2    FMTVEC+6,,AUTO
         3 000064   200144 236100                    LDQ     FMTVEC+6,,AUTO
         3 000065   000004 036000 4                  ADLQ    4
         3 000066   200142 756100                    STQ     FMTVEC+4,,AUTO
         3 000067   200142 630500                    EPPR0   FMTVEC+4,,AUTO
         3 000070   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000071   000000 701000 xent               TSX1    DBM$PACK2
         3 000072   000000 011000                    NOP     0

     1123    10278    1      CALL DBM$PACK2(GM$DATA.SHUF_HI,SHUFHI);

  10278  3 000073   200115 630500                    EPPR0   SHUFHI,,AUTO
         3 000074   200143 450500                    STP0    FMTVEC+5,,AUTO
         3 000075   200123 631500                    EPPR1   GM$DATA+1,,AUTO
         3 000076   200142 451500                    STP1    FMTVEC+4,,AUTO
         3 000077   200142 630500                    EPPR0   FMTVEC+4,,AUTO
         3 000100   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000101   000000 701000 xent               TSX1    DBM$PACK2
         3 000102   000000 011000                    NOP     0

     1124    10279    1      PGS# = (MEMHI - MEMLOW) +1;

  10279  3 000103   200114 236100                    LDQ     MEMHI,,AUTO
         3 000104   200112 136100                    SBLQ    MEMLOW,,AUTO
         3 000105   000001 036007                    ADLQ    1,DL
         3 000106   200105 756100                    STQ     PGS#,,AUTO

     1125    10280
     1126    10281    1      IF DBD$FEPMAP$ ~= ADDR(NIL)

  10281  3 000107   000000 236000 xsym               LDQ     DBD$FEPMAP$
         3 000110   000001 116000 xsym               CMPQ    B_VECTNIL+1
         3 000111   000121 600000 3                  TZE     s:10288
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:210  

     1127    10282    2      THEN DO;

     1128    10283    2           CALL DAF$INIT(FMAP_RPT1);

  10283  3 000112   000005 630400 4                  EPPR0   5
         3 000113   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000114   000000 701000 xent               TSX1    DAF$INIT
         3 000115   000000 011000                    NOP     0

     1129    10284    2           ACTION=1/*display*/;

  10284  3 000116   000001 235007                    LDA     1,DL
         3 000117   200116 755100                    STA     ACTION,,AUTO

     1130    10285    2           GOTO DISPLAY_ALL;

  10285  3 000120   000131 710000 3                  TRA     DISPLAY_ALL

     1131    10286    2           END;
     1132    10287
     1133    10288    1      CALL DAF$INIT(PPUT_RPT1);

  10288  3 000121   000006 630400 4                  EPPR0   6
         3 000122   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000123   000000 701000 xent               TSX1    DAF$INIT
         3 000124   000000 011000                    NOP     0

     1134    10289    1      IF TOP.NSUBLKS=0

  10289  3 000125   200003 470500                    LDP0    @TOP,,AUTO
         3 000126   000001 220100                    LDX0    1,,PR0
         3 000127   000560 601000 3                  TNZ     s:10336

     1135    10290    2      THEN DO;

     1136    10291    2           ACTION = 0/*CHECK PPUT*/;
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:211  

  10291  3 000130   200116 450100                    STZ     ACTION,,AUTO

  10291  3 000131                       DISPLAY_ALL  null
     1137    10292    2   DISPLAY_ALL: ;
     1138    10293
     1139    10294    3           DO WHILE (MEMLOW <= MEMHI);

  10294  3 000131   200114 236100                    LDQ     MEMHI,,AUTO
         3 000132   200112 116100                    CMPQ    MEMLOW,,AUTO
         3 000133   000141 602000 3                  TNC     s:10298

     1140    10295    3                CALL DISP_PPUT;

  10295  3 000134   000655 701000 3                  TSX1    DISP_PPUT
         3 000135   000000 011000                    NOP     0

     1141    10296    3                END;

  10296  3 000136   200114 236100                    LDQ     MEMHI,,AUTO
         3 000137   200112 116100                    CMPQ    MEMLOW,,AUTO
         3 000140   000134 603000 3                  TRC     s:10295

     1142    10297
     1143    10298    2           IF DBD$FEPMAP$ ~= ADDR(NIL) THEN RETURN;

  10298  3 000141   000000 236000 xsym               LDQ     DBD$FEPMAP$
         3 000142   000001 116000 xsym               CMPQ    B_VECTNIL+1
         3 000143   000145 600000 3                  TZE     s:10301

  10298  3 000144   000000 702200 xent               TSX2  ! X66_ARET

     1144    10299
     1145    10300
     1146    10301    2           CALL DAF$WRITE(VECTOR(BLANK_LINE));

  10301  3 000145   000012 630400 4                  EPPR0   10
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:212  
         3 000146   000000 220000 xsym               LDX0    DAF$WRITE
         3 000147   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000150   000000 701010                    TSX1    0,X0
         3 000151   000000 011000                    NOP     0

     1147    10302
     1148    10303
     1149    10304    2           CALL DAF$WRITE(VECTOR(PPUT_FMT10),  VECTOR(G$BOBCAT.PPUT$), VECTOR(PGS#),

  10304  3 000152   777640 235007                    LDA     -96,DL
         3 000153   200142 452500                    STP2    FMTVEC+4,,AUTO
         3 000154   200142 236100                    LDQ     FMTVEC+4,,AUTO
         3 000155   000022 036003                    ADLQ    18,DU
         3 000156   200144 757100                    STAQ    FMTVEC+6,,AUTO
         3 000157   777640 235007                    LDA     -96,DL
         3 000160   200146 452500                    STP2    FMTVEC+8,,AUTO
         3 000161   200146 236100                    LDQ     FMTVEC+8,,AUTO
         3 000162   000105 036003                    ADLQ    69,DU
         3 000163   200150 757100                    STAQ    FMTVEC+10,,AUTO
         3 000164   377640 235007                    LDA     130976,DL
         3 000165   200152 452500                    STP2    FMTVEC+12,,AUTO
         3 000166   200152 236100                    LDQ     FMTVEC+12,,AUTO
         3 000167   000016 036000 4                  ADLQ    14
         3 000170   200154 757100                    STAQ    FMTVEC+14,,AUTO
         3 000171   377640 235007                    LDA     130976,DL
         3 000172   200156 452500                    STP2    FMTVEC+16,,AUTO
         3 000173   200156 236100                    LDQ     FMTVEC+16,,AUTO
         3 000174   000010 036003                    ADLQ    8,DU
         3 000175   200160 757100                    STAQ    FMTVEC+18,,AUTO
         3 000176   377640 235007                    LDA     130976,DL
         3 000177   200162 452500                    STP2    FMTVEC+20,,AUTO
         3 000200   200162 236100                    LDQ     FMTVEC+20,,AUTO
         3 000201   000123 036003                    ADLQ    83,DU
         3 000202   200166 757100                    STAQ    FMTVEC+24,,AUTO
         3 000203   200144 237100                    LDAQ    FMTVEC+6,,AUTO
         3 000204   200164 757100                    STAQ    FMTVEC+22,,AUTO
         3 000205   200150 237100                    LDAQ    FMTVEC+10,,AUTO
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:213  
         3 000206   200170 757100                    STAQ    FMTVEC+26,,AUTO
         3 000207   200154 237100                    LDAQ    FMTVEC+14,,AUTO
         3 000210   200172 757100                    STAQ    FMTVEC+28,,AUTO
         3 000211   200160 237100                    LDAQ    FMTVEC+18,,AUTO
         3 000212   200174 757100                    STAQ    FMTVEC+30,,AUTO
         3 000213   200166 237100                    LDAQ    FMTVEC+24,,AUTO
         3 000214   200176 757100                    STAQ    FMTVEC+32,,AUTO
         3 000215   200176 630500                    EPPR0   FMTVEC+32,,AUTO
         3 000216   200205 450500                    STP0    FMTVEC+39,,AUTO
         3 000217   200174 631500                    EPPR1   FMTVEC+30,,AUTO
         3 000220   200204 451500                    STP1    FMTVEC+38,,AUTO
         3 000221   200172 633500                    EPPR3   FMTVEC+28,,AUTO
         3 000222   200203 453500                    STP3    FMTVEC+37,,AUTO
         3 000223   200170 634500                    EPPR4   FMTVEC+26,,AUTO
         3 000224   200202 454500                    STP4    FMTVEC+36,,AUTO
         3 000225   200164 635500                    EPPR5   FMTVEC+22,,AUTO
         3 000226   200201 455500                    STP5    FMTVEC+35,,AUTO
         3 000227   000017 236000 4                  LDQ     15
         3 000230   200200 756100                    STQ     FMTVEC+34,,AUTO
         3 000231   200200 630500                    EPPR0   FMTVEC+34,,AUTO
         3 000232   000000 220000 xsym               LDX0    DAF$WRITE
         3 000233   000024 631400 xsym               EPPR1   B_VECTNIL+20
         3 000234   000000 701010                    TSX1    0,X0
         3 000235   000000 011000                    NOP     0

     1150    10305    2            VECTOR(G$BOBCAT.MEM_LOW), VECTOR(G$BOBCAT.MEM_HI), VECTOR(GM$DATA.SHUF_HI)
             10305                      );
     1151    10306
     1152    10307    2           CALL DBM$PACK2(GM$DATA.SHUF,I);

  10307  3 000236   200071 630500                    EPPR0   I,,AUTO
         3 000237   200143 450500                    STP0    FMTVEC+5,,AUTO
         3 000240   200124 631500                    EPPR1   GM$DATA+2,,AUTO
         3 000241   200142 451500                    STP1    FMTVEC+4,,AUTO
         3 000242   200142 630500                    EPPR0   FMTVEC+4,,AUTO
         3 000243   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000244   000000 701000 xent               TSX1    DBM$PACK2
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:214  
         3 000245   000000 011000                    NOP     0

     1153    10308    2           CALL DBM$PACK2(GM$DATA.NSHF,X);

  10308  3 000246   200072 630500                    EPPR0   X,,AUTO
         3 000247   200143 450500                    STP0    FMTVEC+5,,AUTO
         3 000250   200144 452500                    STP2    FMTVEC+6,,AUTO
         3 000251   200144 236100                    LDQ     FMTVEC+6,,AUTO
         3 000252   000020 036000 4                  ADLQ    16
         3 000253   200142 756100                    STQ     FMTVEC+4,,AUTO
         3 000254   200142 630500                    EPPR0   FMTVEC+4,,AUTO
         3 000255   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000256   000000 701000 xent               TSX1    DBM$PACK2
         3 000257   000000 011000                    NOP     0

     1154    10309    2           I = I+X;

  10309  3 000260   200071 236100                    LDQ     I,,AUTO
         3 000261   200072 036100                    ADLQ    X,,AUTO
         3 000262   200071 756100                    STQ     I,,AUTO

     1155    10310    2           IF I=FREE THEN CCCC='    '; ELSE CCCC='ERR!';

  10310  3 000263   200101 116100                    CMPQ    FREE,,AUTO
         3 000264   000270 601000 3                  TNZ     s:10310+5

  10310  3 000265   000404 236000 2                  LDQ     PPUT_FMT20+23
         3 000266   200110 756100                    STQ     CCCC,,AUTO
         3 000267   000272 710000 3                  TRA     s:10312

  10310  3 000270   000405 236000 2                  LDQ     PPUT_FMT20+24
         3 000271   200110 756100                    STQ     CCCC,,AUTO

     1156    10311
     1157    10312    2           CALL DAF$WRITE(VECTOR(PPUT_FMT11), VECTOR(FREE),

  10312  3 000272   777640 235007                    LDA     -96,DL
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:215  
         3 000273   200142 452500                    STP2    FMTVEC+4,,AUTO
         3 000274   200142 236100                    LDQ     FMTVEC+4,,AUTO
         3 000275   000101 036003                    ADLQ    65,DU
         3 000276   200144 757100                    STAQ    FMTVEC+6,,AUTO
         3 000277   377640 235007                    LDA     130976,DL
         3 000300   200146 452500                    STP2    FMTVEC+8,,AUTO
         3 000301   200146 236100                    LDQ     FMTVEC+8,,AUTO
         3 000302   000124 036003                    ADLQ    84,DU
         3 000303   200150 757100                    STAQ    FMTVEC+10,,AUTO
         3 000304   377640 235007                    LDA     130976,DL
         3 000305   200152 452500                    STP2    FMTVEC+12,,AUTO
         3 000306   200152 236100                    LDQ     FMTVEC+12,,AUTO
         3 000307   000020 036000 4                  ADLQ    16
         3 000310   200154 757100                    STAQ    FMTVEC+14,,AUTO
         3 000311   777640 235007                    LDA     -96,DL
         3 000312   200156 452500                    STP2    FMTVEC+16,,AUTO
         3 000313   200156 236100                    LDQ     FMTVEC+16,,AUTO
         3 000314   000071 036003                    ADLQ    57,DU
         3 000315   200160 757100                    STAQ    FMTVEC+18,,AUTO
         3 000316   777640 235007                    LDA     -96,DL
         3 000317   200162 452500                    STP2    FMTVEC+20,,AUTO
         3 000320   200162 236100                    LDQ     FMTVEC+20,,AUTO
         3 000321   000110 036003                    ADLQ    72,DU
         3 000322   200166 757100                    STAQ    FMTVEC+24,,AUTO
         3 000323   200144 237100                    LDAQ    FMTVEC+6,,AUTO
         3 000324   200164 757100                    STAQ    FMTVEC+22,,AUTO
         3 000325   200150 237100                    LDAQ    FMTVEC+10,,AUTO
         3 000326   200170 757100                    STAQ    FMTVEC+26,,AUTO
         3 000327   200154 237100                    LDAQ    FMTVEC+14,,AUTO
         3 000330   200172 757100                    STAQ    FMTVEC+28,,AUTO
         3 000331   200160 237100                    LDAQ    FMTVEC+18,,AUTO
         3 000332   200174 757100                    STAQ    FMTVEC+30,,AUTO
         3 000333   200166 237100                    LDAQ    FMTVEC+24,,AUTO
         3 000334   200176 757100                    STAQ    FMTVEC+32,,AUTO
         3 000335   200176 630500                    EPPR0   FMTVEC+32,,AUTO
         3 000336   200205 450500                    STP0    FMTVEC+39,,AUTO
         3 000337   200174 631500                    EPPR1   FMTVEC+30,,AUTO
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:216  
         3 000340   200204 451500                    STP1    FMTVEC+38,,AUTO
         3 000341   200172 633500                    EPPR3   FMTVEC+28,,AUTO
         3 000342   200203 453500                    STP3    FMTVEC+37,,AUTO
         3 000343   200170 634500                    EPPR4   FMTVEC+26,,AUTO
         3 000344   200202 454500                    STP4    FMTVEC+36,,AUTO
         3 000345   200164 635500                    EPPR5   FMTVEC+22,,AUTO
         3 000346   200201 455500                    STP5    FMTVEC+35,,AUTO
         3 000347   000021 236000 4                  LDQ     17
         3 000350   200200 756100                    STQ     FMTVEC+34,,AUTO
         3 000351   200200 630500                    EPPR0   FMTVEC+34,,AUTO
         3 000352   000000 220000 xsym               LDX0    DAF$WRITE
         3 000353   000024 631400 xsym               EPPR1   B_VECTNIL+20
         3 000354   000000 701010                    TSX1    0,X0
         3 000355   000000 011000                    NOP     0

     1158    10313    2             VECTOR(GM$DATA.SHUF), VECTOR(GM$DATA.NSHF), VECTOR(I), VECTOR(CCCC));
     1159    10314
     1160    10315    2           I = FREE + INUSE;

  10315  3 000356   200101 236100                    LDQ     FREE,,AUTO
         3 000357   200102 036100                    ADLQ    INUSE,,AUTO
         3 000360   200071 756100                    STQ     I,,AUTO

     1161    10316    2           IF I=PGS# THEN CCCC='    '; ELSE CCCC='ERR!';

  10316  3 000361   200105 116100                    CMPQ    PGS#,,AUTO
         3 000362   000366 601000 3                  TNZ     s:10316+5

  10316  3 000363   000404 236000 2                  LDQ     PPUT_FMT20+23
         3 000364   200110 756100                    STQ     CCCC,,AUTO
         3 000365   000370 710000 3                  TRA     s:10318

  10316  3 000366   000405 236000 2                  LDQ     PPUT_FMT20+24
         3 000367   200110 756100                    STQ     CCCC,,AUTO

     1162    10317
     1163    10318    2           CALL DAF$WRITE(VECTOR(PPUT_FMT12), VECTOR(INUSE),
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:217  

  10318  3 000370   777640 235007                    LDA     -96,DL
         3 000371   200142 452500                    STP2    FMTVEC+4,,AUTO
         3 000372   200142 236100                    LDQ     FMTVEC+4,,AUTO
         3 000373   000102 036003                    ADLQ    66,DU
         3 000374   200144 757100                    STAQ    FMTVEC+6,,AUTO
         3 000375   777640 235007                    LDA     -96,DL
         3 000376   200146 452500                    STP2    FMTVEC+8,,AUTO
         3 000377   200146 236100                    LDQ     FMTVEC+8,,AUTO
         3 000400   000071 036003                    ADLQ    57,DU
         3 000401   200150 757100                    STAQ    FMTVEC+10,,AUTO
         3 000402   777640 235007                    LDA     -96,DL
         3 000403   200152 452500                    STP2    FMTVEC+12,,AUTO
         3 000404   200152 236100                    LDQ     FMTVEC+12,,AUTO
         3 000405   000110 036003                    ADLQ    72,DU
         3 000406   200156 757100                    STAQ    FMTVEC+16,,AUTO
         3 000407   200144 237100                    LDAQ    FMTVEC+6,,AUTO
         3 000410   200154 757100                    STAQ    FMTVEC+14,,AUTO
         3 000411   200150 237100                    LDAQ    FMTVEC+10,,AUTO
         3 000412   200160 757100                    STAQ    FMTVEC+18,,AUTO
         3 000413   200156 237100                    LDAQ    FMTVEC+16,,AUTO
         3 000414   200162 757100                    STAQ    FMTVEC+20,,AUTO
         3 000415   200162 630500                    EPPR0   FMTVEC+20,,AUTO
         3 000416   200167 450500                    STP0    FMTVEC+25,,AUTO
         3 000417   200160 631500                    EPPR1   FMTVEC+18,,AUTO
         3 000420   200166 451500                    STP1    FMTVEC+24,,AUTO
         3 000421   200154 633500                    EPPR3   FMTVEC+14,,AUTO
         3 000422   200165 453500                    STP3    FMTVEC+23,,AUTO
         3 000423   000026 236000 4                  LDQ     22
         3 000424   200164 756100                    STQ     FMTVEC+22,,AUTO
         3 000425   200164 630500                    EPPR0   FMTVEC+22,,AUTO
         3 000426   000000 220000 xsym               LDX0    DAF$WRITE
         3 000427   000022 631400 xsym               EPPR1   B_VECTNIL+18
         3 000430   000000 701010                    TSX1    0,X0
         3 000431   000000 011000                    NOP     0

     1164    10319    2             VECTOR(I), VECTOR(CCCC));
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:218  
     1165    10320
     1166    10321    2           CALL DBM$PACK2(GM$DATA.CHK_PPUT,I);

  10321  3 000432   200071 630500                    EPPR0   I,,AUTO
         3 000433   200143 450500                    STP0    FMTVEC+5,,AUTO
         3 000434   200144 452500                    STP2    FMTVEC+6,,AUTO
         3 000435   200144 236100                    LDQ     FMTVEC+6,,AUTO
         3 000436   000027 036000 4                  ADLQ    23
         3 000437   200142 756100                    STQ     FMTVEC+4,,AUTO
         3 000440   200142 630500                    EPPR0   FMTVEC+4,,AUTO
         3 000441   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000442   000000 701000 xent               TSX1    DBM$PACK2
         3 000443   000000 011000                    NOP     0

     1167    10322    2           IF I = 0 THEN CCCC='off '; ELSE CCCC='on  ';

  10322  3 000444   200071 235100                    LDA     I,,AUTO
         3 000445   000451 601000 3                  TNZ     s:10322+5

  10322  3 000446   000406 236000 2                  LDQ     PPUT_FMT20+25
         3 000447   200110 756100                    STQ     CCCC,,AUTO
         3 000450   000453 710000 3                  TRA     s:10324

  10322  3 000451   000407 236000 2                  LDQ     PPUT_FMT20+26
         3 000452   200110 756100                    STQ     CCCC,,AUTO

     1168    10323
     1169    10324    2           CALL DAF$WRITE(VECTOR(PPUT_FMT1X), VECTOR(CCCC));

  10324  3 000453   777640 235007                    LDA     -96,DL
         3 000454   200142 452500                    STP2    FMTVEC+4,,AUTO
         3 000455   200142 236100                    LDQ     FMTVEC+4,,AUTO
         3 000456   000110 036003                    ADLQ    72,DU
         3 000457   200144 757100                    STAQ    FMTVEC+6,,AUTO
         3 000460   200144 630500                    EPPR0   FMTVEC+6,,AUTO
         3 000461   200147 450500                    STP0    FMTVEC+9,,AUTO
         3 000462   000032 236000 4                  LDQ     26
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:219  
         3 000463   200146 756100                    STQ     FMTVEC+8,,AUTO
         3 000464   200146 630500                    EPPR0   FMTVEC+8,,AUTO
         3 000465   000000 220000 xsym               LDX0    DAF$WRITE
         3 000466   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000467   000000 701010                    TSX1    0,X0
         3 000470   000000 011000                    NOP     0

     1170    10325
     1171    10326    2           CALL DBM$PACK4(GM$DATA.SHUF_TIME,SHUF_TIME);

  10326  3 000471   200107 630500                    EPPR0   SHUF_TIME,,AUTO
         3 000472   200143 450500                    STP0    FMTVEC+5,,AUTO
         3 000473   200144 452500                    STP2    FMTVEC+6,,AUTO
         3 000474   200144 236100                    LDQ     FMTVEC+6,,AUTO
         3 000475   000033 036000 4                  ADLQ    27
         3 000476   200142 756100                    STQ     FMTVEC+4,,AUTO
         3 000477   200142 630500                    EPPR0   FMTVEC+4,,AUTO
         3 000500   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000501   000000 701000 xent               TSX1    DBM$PACK4
         3 000502   000000 011000                    NOP     0

     1172    10327    2           SHUF_TIME = (SHUF_TIME*5) /6;

  10327  3 000503   200107 236100                    LDQ     SHUF_TIME,,AUTO
         3 000504   000005 402007                    MPY     5,DL
         3 000505   000001 772000                    QRL     1
         3 000506   000003 506007                    DIV     3,DL
         3 000507   200107 756100                    STQ     SHUF_TIME,,AUTO

     1173    10328    2           CALL DAF$WRITE(VECTOR(PPUT_FMT2X), VECTOR(GM$DATA.SHUF_COUNT),

  10328  3 000510   377640 235007                    LDA     130976,DL
         3 000511   200142 452500                    STP2    FMTVEC+4,,AUTO
         3 000512   200142 236100                    LDQ     FMTVEC+4,,AUTO
         3 000513   000036 036000 4                  ADLQ    30
         3 000514   200144 757100                    STAQ    FMTVEC+6,,AUTO
         3 000515   377640 235007                    LDA     130976,DL
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:220  
         3 000516   200146 452500                    STP2    FMTVEC+8,,AUTO
         3 000517   200146 236100                    LDQ     FMTVEC+8,,AUTO
         3 000520   000126 036003                    ADLQ    86,DU
         3 000521   200150 757100                    STAQ    FMTVEC+10,,AUTO
         3 000522   777640 235007                    LDA     -96,DL
         3 000523   200152 452500                    STP2    FMTVEC+12,,AUTO
         3 000524   200152 236100                    LDQ     FMTVEC+12,,AUTO
         3 000525   000107 036003                    ADLQ    71,DU
         3 000526   200156 757100                    STAQ    FMTVEC+16,,AUTO
         3 000527   200144 237100                    LDAQ    FMTVEC+6,,AUTO
         3 000530   200154 757100                    STAQ    FMTVEC+14,,AUTO
         3 000531   200150 237100                    LDAQ    FMTVEC+10,,AUTO
         3 000532   200160 757100                    STAQ    FMTVEC+18,,AUTO
         3 000533   200156 237100                    LDAQ    FMTVEC+16,,AUTO
         3 000534   200162 757100                    STAQ    FMTVEC+20,,AUTO
         3 000535   200162 630500                    EPPR0   FMTVEC+20,,AUTO
         3 000536   200167 450500                    STP0    FMTVEC+25,,AUTO
         3 000537   200160 631500                    EPPR1   FMTVEC+18,,AUTO
         3 000540   200166 451500                    STP1    FMTVEC+24,,AUTO
         3 000541   200154 633500                    EPPR3   FMTVEC+14,,AUTO
         3 000542   200165 453500                    STP3    FMTVEC+23,,AUTO
         3 000543   000037 236000 4                  LDQ     31
         3 000544   200164 756100                    STQ     FMTVEC+22,,AUTO
         3 000545   200164 630500                    EPPR0   FMTVEC+22,,AUTO
         3 000546   000000 220000 xsym               LDX0    DAF$WRITE
         3 000547   000022 631400 xsym               EPPR1   B_VECTNIL+18
         3 000550   000000 701010                    TSX1    0,X0
         3 000551   000000 011000                    NOP     0

     1174    10329    2             VECTOR(GM$DATA.SHUF_SEGS#), VECTOR(SHUF_TIME));
     1175    10330
     1176    10331    2           CALL DAF$WRITE(VECTOR(BLANK_LINE));

  10331  3 000552   000012 630400 4                  EPPR0   10
         3 000553   000000 220000 xsym               LDX0    DAF$WRITE
         3 000554   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000555   000000 701010                    TSX1    0,X0
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:221  
         3 000556   000000 011000                    NOP     0

     1177    10332
     1178    10333    2           END;

  10333  3 000557   000634 710000 3                  TRA     s:10350

     1179    10334
     1180    10335    2      ELSE DO;                             /*display a single pput entry*/

     1181    10336    2           ACTION = 1/*DISPLAY PUT*/;

  10336  3 000560   000001 235007                    LDA     1,DL
         3 000561   200116 755100                    STA     ACTION,,AUTO

     1182    10337    3           DO X=0 TO TOP.NSUBLKS-1;

  10337  3 000562   200072 450100                    STZ     X,,AUTO
         3 000563   000626 710000 3                  TRA     s:10347+3

     1183    10338    3                CALL DAA$VALUE(TOP.SUBLK$(X)->OUT,MEMLOW);

  10338  3 000564   200003 470500                    LDP0    @TOP,,AUTO
         3 000565   200072 720100                    LXL0    X,,AUTO
         3 000566   000003 471510                    LDP1    3,X0,PR0
         3 000567   200112 633500                    EPPR3   MEMLOW,,AUTO
         3 000570   200143 453500                    STP3    FMTVEC+5,,AUTO
         3 000571   200142 451500                    STP1    FMTVEC+4,,AUTO
         3 000572   200142 630500                    EPPR0   FMTVEC+4,,AUTO
         3 000573   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000574   000000 701000 xent               TSX1    DAA$VALUE
         3 000575   000000 011000                    NOP     0

     1184    10339    3                IF MEMLOW=0

  10339  3 000576   200112 235100                    LDA     MEMLOW,,AUTO
         3 000577   000615 601000 3                  TNZ     s:10345
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:222  

     1185    10340    4                THEN DO;

     1186    10341    4                     ACTION=1;

  10341  3 000600   000001 236007                    LDQ     1,DL
         3 000601   200116 756100                    STQ     ACTION,,AUTO

     1187    10342    4                     CALL DBM$PACK2(G$BOBCAT.MEM_LOW,MEMLOW);

  10342  3 000602   200112 630500                    EPPR0   MEMLOW,,AUTO
         3 000603   200143 450500                    STP0    FMTVEC+5,,AUTO
         3 000604   200144 452500                    STP2    FMTVEC+6,,AUTO
         3 000605   200144 236100                    LDQ     FMTVEC+6,,AUTO
         3 000606   000016 036000 4                  ADLQ    14
         3 000607   200142 756100                    STQ     FMTVEC+4,,AUTO
         3 000610   200142 630500                    EPPR0   FMTVEC+4,,AUTO
         3 000611   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000612   000000 701000 xent               TSX1    DBM$PACK2
         3 000613   000000 011000                    NOP     0

     1188    10343    4                     GOTO DISPLAY_ALL;

  10343  3 000614   000131 710000 3                  TRA     DISPLAY_ALL

     1189    10344    4                     END;
     1190    10345    3                IF (MEMLOW > 0) AND (MEMLOW <= MEMHI)

  10345  3 000615   000623 600000 3                  TZE     s:10347
         3 000616   200114 236100                    LDQ     MEMHI,,AUTO
         3 000617   200112 116100                    CMPQ    MEMLOW,,AUTO
         3 000620   000623 602000 3                  TNC     s:10347

     1191    10346    3                THEN CALL DISP_PPUT;

  10346  3 000621   000655 701000 3                  TSX1    DISP_PPUT
         3 000622   000000 011000                    NOP     0
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:223  

     1192    10347    3                END;

  10347  3 000623   200072 235100                    LDA     X,,AUTO
         3 000624   000001 035007                    ADLA    1,DL
         3 000625   200072 755100                    STA     X,,AUTO
         3 000626   200003 470500                    LDP0    @TOP,,AUTO
         3 000627   000001 236100                    LDQ     1,,PR0
         3 000630   000022 772000                    QRL     18
         3 000631   200072 116100                    CMPQ    X,,AUTO
         3 000632   000634 600000 3                  TZE     s:10350
         3 000633   000564 603000 3                  TRC     s:10338

     1193    10348    2           END;

     1194    10349
     1195    10350    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));

  10350  3 000634   000012 630400 4                  EPPR0   10
         3 000635   000000 220000 xsym               LDX0    DAF$WRITE
         3 000636   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000637   000000 701010                    TSX1    0,X0
         3 000640   000000 011000                    NOP     0

     1196    10351    1      CALL DAF$WRITE(VECTOR(BLANK_LINE));

  10351  3 000641   000012 630400 4                  EPPR0   10
         3 000642   000000 220000 xsym               LDX0    DAF$WRITE
         3 000643   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000644   000000 701010                    TSX1    0,X0
         3 000645   000000 011000                    NOP     0

     1197    10352    1      RETURN;

  10352  3 000646   000000 702200 xent               TSX2  ! X66_ARET

     1198    10353
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:224  
     1199    10354
     1200    10355
     1201    10356
     1202    10357    1   DBD$PPUT_CHECK: ENTRY(TOP);

  10357  3 000647   000000 700200 xent  DBD$PPUT_CH* TSX0  ! X66_AUTO_1
         3 000650   000206 000001                    ZERO    134,1

     1203    10358    1      TOP.NSUBLKS = 0;

  10358  3 000651   000000 220003                    LDX0    0,DU
         3 000652   200003 470500                    LDP0    @TOP,,AUTO
         3 000653   000001 740100                    STX0    1,,PR0

     1204    10359    1      GOTO PPUT_START;

  10359  3 000654   000002 710000 3                  TRA     PPUT_START

     1205    10360        %EJECT;
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:225  
     1206    10361
     1207    10362    1   DISP_PPUT: PROC;

  10362  3 000655   200140 741300       DISP_PPUT    STX1  ! FMTVEC+2,,AUTO

     1208    10363    2      FIRST_PPUT$ = PPUT$ + (MEMLOW *2);

  10363  3 000656   200112 236100                    LDQ     MEMLOW,,AUTO
         3 000657   000001 736000                    QLS     1
         3 000660   200111 036100                    ADLQ    PPUT$,,AUTO
         3 000661   200074 756100                    STQ     FIRST_PPUT$,,AUTO

     1209    10364    2      CALL DBM$GETMEM(FIRST_PPUT$,PPUT_FIRST,0,SIZEC(PPUT_FIRST),,SIZEC(PPUT_FIRST));

  10364  3 000662   000040 236000 4                  LDQ     32
         3 000663   000001 235000 xsym               LDA     B_VECTNIL+1
         3 000664   200146 757100                    STAQ    FMTVEC+8,,AUTO
         3 000665   000042 237000 4                  LDAQ    34
         3 000666   200144 757100                    STAQ    FMTVEC+6,,AUTO
         3 000667   200120 630500                    EPPR0   PPUT_FIRST,,AUTO
         3 000670   200143 450500                    STP0    FMTVEC+5,,AUTO
         3 000671   200074 631500                    EPPR1   FIRST_PPUT$,,AUTO
         3 000672   200142 451500                    STP1    FMTVEC+4,,AUTO
         3 000673   200142 630500                    EPPR0   FMTVEC+4,,AUTO
         3 000674   000024 631400 xsym               EPPR1   B_VECTNIL+20
         3 000675   000000 701000 xent               TSX1    DBM$GETMEM
         3 000676   000000 011000                    NOP     0

     1210    10365
     1211    10366    2      CALL DBM$PACK2(PPUT_FIRST.W2.SIZE,PSIZE);

  10366  3 000677   200077 630500                    EPPR0   PSIZE,,AUTO
         3 000700   200143 450500                    STP0    FMTVEC+5,,AUTO
         3 000701   200144 452500                    STP2    FMTVEC+6,,AUTO
         3 000702   200144 236100                    LDQ     FMTVEC+6,,AUTO
         3 000703   000044 036000 4                  ADLQ    36
         3 000704   200142 756100                    STQ     FMTVEC+4,,AUTO
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:226  
         3 000705   200142 630500                    EPPR0   FMTVEC+4,,AUTO
         3 000706   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000707   000000 701000 xent               TSX1    DBM$PACK2
         3 000710   000000 011000                    NOP     0

     1212    10367    2      USEFLAG = PPUT_FIRST.W1.INUSE;

  10367  3 000711   200120 236100                    LDQ     PPUT_FIRST,,AUTO
         3 000712   000014 736000                    QLS     12
         3 000713   400000 376003                    ANQ     -131072,DU
         3 000714   200103 756100                    STQ     USEFLAG,,AUTO

     1213    10368
     1214    10369    2      IF PSIZE = 0

  10369  3 000715   200077 235100                    LDA     PSIZE,,AUTO
         3 000716   000724 601000 3                  TNZ     s:10375

     1215    10370    3      THEN DO;

     1216    10371    3           PPUT_LAST = PPUT_FIRST;

  10371  3 000717   200120 236100                    LDQ     PPUT_FIRST,,AUTO
         3 000720   200121 756100                    STQ     PPUT_LAST,,AUTO

     1217    10372    3           PSIZE=1;

  10372  3 000721   000001 235007                    LDA     1,DL
         3 000722   200077 755100                    STA     PSIZE,,AUTO

     1218    10373    3           GOTO DISPLAY_IT;

  10373  3 000723   001025 710000 3                  TRA     DISPLAY_IT

     1219    10374    3           END;
     1220    10375    2      MEMLAST = MEMLOW + PSIZE -1;

PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:227  
  10375  3 000724   200112 236100                    LDQ     MEMLOW,,AUTO
         3 000725   200077 036100                    ADLQ    PSIZE,,AUTO
         3 000726   000001 136007                    SBLQ    1,DL
         3 000727   200113 756100                    STQ     MEMLAST,,AUTO

     1221    10376    2      LAST_PPUT$ = PPUT$ + (MEMLAST *2);

  10376  3 000730   000001 736000                    QLS     1
         3 000731   200111 036100                    ADLQ    PPUT$,,AUTO
         3 000732   200075 756100                    STQ     LAST_PPUT$,,AUTO

     1222    10377    2      CALL DBM$GETMEM(LAST_PPUT$,PPUT_LAST,0,SIZEC(PPUT_LAST),,SIZEC(PPUT_LAST));

  10377  3 000733   000040 236000 4                  LDQ     32
         3 000734   000001 235000 xsym               LDA     B_VECTNIL+1
         3 000735   200146 757100                    STAQ    FMTVEC+8,,AUTO
         3 000736   000042 237000 4                  LDAQ    34
         3 000737   200144 757100                    STAQ    FMTVEC+6,,AUTO
         3 000740   200121 630500                    EPPR0   PPUT_LAST,,AUTO
         3 000741   200143 450500                    STP0    FMTVEC+5,,AUTO
         3 000742   200075 631500                    EPPR1   LAST_PPUT$,,AUTO
         3 000743   200142 451500                    STP1    FMTVEC+4,,AUTO
         3 000744   200142 630500                    EPPR0   FMTVEC+4,,AUTO
         3 000745   000024 631400 xsym               EPPR1   B_VECTNIL+20
         3 000746   000000 701000 xent               TSX1    DBM$GETMEM
         3 000747   000000 011000                    NOP     0

     1223    10378    2      CALL DBM$PACK2(PPUT_LAST.W2.SIZE,LAST_SIZE);

  10378  3 000750   200100 630500                    EPPR0   LAST_SIZE,,AUTO
         3 000751   200143 450500                    STP0    FMTVEC+5,,AUTO
         3 000752   200144 452500                    STP2    FMTVEC+6,,AUTO
         3 000753   200144 236100                    LDQ     FMTVEC+6,,AUTO
         3 000754   000045 036000 4                  ADLQ    37
         3 000755   200142 756100                    STQ     FMTVEC+4,,AUTO
         3 000756   200142 630500                    EPPR0   FMTVEC+4,,AUTO
         3 000757   000020 631400 xsym               EPPR1   B_VECTNIL+16
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:228  
         3 000760   000000 701000 xent               TSX1    DBM$PACK2
         3 000761   000000 011000                    NOP     0

     1224    10379
     1225    10380    2      IF (ACTION=0 /*CHECK PPUT*/)

  10380  3 000762   200116 235100                    LDA     ACTION,,AUTO
         3 000763   001025 601000 3                  TNZ     DISPLAY_IT

     1226    10381    3      THEN DO;

     1227    10382    3           IF NOT PPUT_FIRST.W1.FIRSTPG OR NOT PPUT_LAST.W1.LASTPG

  10382  3 000764   200120 236100                    LDQ     PPUT_FIRST,,AUTO
         3 000765   000200 316003                    CANQ    128,DU
         3 000766   001025 600000 3                  TZE     DISPLAY_IT
         3 000767   200121 236100                    LDQ     PPUT_LAST,,AUTO
         3 000770   000100 316003                    CANQ    64,DU
         3 000771   001025 600000 3                  TZE     DISPLAY_IT

     1228    10383    3           THEN GOTO DISPLAY_IT;
     1229    10384
     1230    10385    3           IF PPUT_FIRST.W2.SIZE = 1 AND NOT PPUT_FIRST.W1.LASTPG

  10385  3 000772   200120 720100                    LXL0    PPUT_FIRST,,AUTO
         3 000773   000001 100003                    CMPX0   1,DU
         3 000774   001000 601000 3                  TNZ     s:10388
         3 000775   200120 236100                    LDQ     PPUT_FIRST,,AUTO
         3 000776   000100 316003                    CANQ    64,DU
         3 000777   001025 600000 3                  TZE     DISPLAY_IT

     1231    10386    3           THEN GOTO DISPLAY_IT;
     1232    10387
     1233    10388    3           IF PPUT_FIRST.W1.LASTPG AND PPUT_FIRST.W2.SIZE~=1

  10388  3 001000   200120 236100                    LDQ     PPUT_FIRST,,AUTO
         3 001001   000100 316003                    CANQ    64,DU
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:229  
         3 001002   001005 600000 3                  TZE     s:10391
         3 001003   000001 100003                    CMPX0   1,DU
         3 001004   001025 601000 3                  TNZ     DISPLAY_IT

     1234    10389    3           THEN GOTO DISPLAY_IT;
     1235    10390
     1236    10391    3           IF PSIZE ~= LAST_SIZE

  10391  3 001005   200077 236100                    LDQ     PSIZE,,AUTO
         3 001006   200100 116100                    CMPQ    LAST_SIZE,,AUTO
         3 001007   001025 601000 3                  TNZ     DISPLAY_IT

     1237    10392    3           THEN GOTO DISPLAY_IT;
     1238    10393
     1239    10394    3           IF (PPUT_LAST.W1.INUSE AND NOT USEFLAG)

  10394  3 001010   200121 236100                    LDQ     PPUT_LAST,,AUTO
         3 001011   000040 316003                    CANQ    32,DU
         3 001012   001015 600000 3                  TZE     s:10394+5
         3 001013   200103 234100                    SZN     USEFLAG,,AUTO
         3 001014   001025 605000 3                  TPL     DISPLAY_IT
         3 001015   000040 316003                    CANQ    32,DU
         3 001016   001021 601000 3                  TNZ     s:10398
         3 001017   200103 234100                    SZN     USEFLAG,,AUTO
         3 001020   001025 604000 3                  TMI     DISPLAY_IT

     1240    10395    3             OR (NOT(PPUT_LAST.W1.INUSE) AND USEFLAG)
     1241    10396    3           THEN GOTO DISPLAY_IT;
     1242    10397
     1243    10398    3           MEMLOW = MEMLOW + PSIZE;

  10398  3 001021   200112 236100                    LDQ     MEMLOW,,AUTO
         3 001022   200077 036100                    ADLQ    PSIZE,,AUTO
         3 001023   200112 756100                    STQ     MEMLOW,,AUTO

     1244    10399    3           END;

PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:230  
  10399  3 001024   001336 710000 3                  TRA     s:10467

     1245    10400
     1246    10401    3      ELSE DO/*Display*/;

  10398  3 001025                       DISPLAY_IT   null
     1247    10402    3   DISPLAY_IT: ;
     1248    10403    3           IF MEMLOW = SHUFHI+1

  10403  3 001025   200115 236100                    LDQ     SHUFHI,,AUTO
         3 001026   000001 036007                    ADLQ    1,DL
         3 001027   200112 116100                    CMPQ    MEMLOW,,AUTO
         3 001030   001036 601000 3                  TNZ     s:10405

     1249    10404    3           THEN CALL DAF$WRITE(VECTOR(BLANK_LINE));

  10404  3 001031   000012 630400 4                  EPPR0   10
         3 001032   000000 220000 xsym               LDX0    DAF$WRITE
         3 001033   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 001034   000000 701010                    TSX1    0,X0
         3 001035   000000 011000                    NOP     0

     1250    10405    3           IF DBD$FEPMAP$ = ADDR(NIL)

  10405  3 001036   000000 236000 xsym               LDQ     DBD$FEPMAP$
         3 001037   000001 116000 xsym               CMPQ    B_VECTNIL+1
         3 001040   001115 601000 3                  TNZ     s:10413

     1251    10406    4           THEN DO;

     1252    10407    4                CALL DAF$WRITE(VECTOR(PPUT_FMT20),

  10407  3 001041   777640 235007                    LDA     -96,DL
         3 001042   200142 452500                    STP2    FMTVEC+4,,AUTO
         3 001043   200142 236100                    LDQ     FMTVEC+4,,AUTO
         3 001044   000112 036003                    ADLQ    74,DU
         3 001045   200144 757100                    STAQ    FMTVEC+6,,AUTO
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:231  
         3 001046   777640 235007                    LDA     -96,DL
         3 001047   200146 452500                    STP2    FMTVEC+8,,AUTO
         3 001050   200146 236100                    LDQ     FMTVEC+8,,AUTO
         3 001051   000120 036003                    ADLQ    80,DU
         3 001052   200150 757100                    STAQ    FMTVEC+10,,AUTO
         3 001053   777640 235007                    LDA     -96,DL
         3 001054   200152 452500                    STP2    FMTVEC+12,,AUTO
         3 001055   200152 236100                    LDQ     FMTVEC+12,,AUTO
         3 001056   000113 036003                    ADLQ    75,DU
         3 001057   200154 757100                    STAQ    FMTVEC+14,,AUTO
         3 001060   777640 235007                    LDA     -96,DL
         3 001061   200156 452500                    STP2    FMTVEC+16,,AUTO
         3 001062   200156 236100                    LDQ     FMTVEC+16,,AUTO
         3 001063   000121 036003                    ADLQ    81,DU
         3 001064   200162 757100                    STAQ    FMTVEC+20,,AUTO
         3 001065   200144 237100                    LDAQ    FMTVEC+6,,AUTO
         3 001066   200160 757100                    STAQ    FMTVEC+18,,AUTO
         3 001067   200150 237100                    LDAQ    FMTVEC+10,,AUTO
         3 001070   200164 757100                    STAQ    FMTVEC+22,,AUTO
         3 001071   200154 237100                    LDAQ    FMTVEC+14,,AUTO
         3 001072   200166 757100                    STAQ    FMTVEC+24,,AUTO
         3 001073   200162 237100                    LDAQ    FMTVEC+20,,AUTO
         3 001074   200170 757100                    STAQ    FMTVEC+26,,AUTO
         3 001075   200170 630500                    EPPR0   FMTVEC+26,,AUTO
         3 001076   200176 450500                    STP0    FMTVEC+32,,AUTO
         3 001077   200166 631500                    EPPR1   FMTVEC+24,,AUTO
         3 001100   200175 451500                    STP1    FMTVEC+31,,AUTO
         3 001101   200164 633500                    EPPR3   FMTVEC+22,,AUTO
         3 001102   200174 453500                    STP3    FMTVEC+30,,AUTO
         3 001103   200160 634500                    EPPR4   FMTVEC+18,,AUTO
         3 001104   200173 454500                    STP4    FMTVEC+29,,AUTO
         3 001105   000050 236000 4                  LDQ     40
         3 001106   200172 756100                    STQ     FMTVEC+28,,AUTO
         3 001107   200172 630500                    EPPR0   FMTVEC+28,,AUTO
         3 001110   000000 220000 xsym               LDX0    DAF$WRITE
         3 001111   000023 631400 xsym               EPPR1   B_VECTNIL+19
         3 001112   000000 701010                    TSX1    0,X0
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:232  
         3 001113   000000 011000                    NOP     0

     1253    10408    4                  VECTOR(MEMLOW), VECTOR(PPUT_FIRST),
     1254    10409    4                  VECTOR(MEMLAST), VECTOR(PPUT_LAST) );
     1255    10410    4                END;

  10410  3 001114   001313 710000 3                  TRA     s:10458

     1256    10411
     1257    10412    4           ELSE DO/*if mapping*/;

     1258    10413    4                MAPDAT.WHAT# = DBD$FEPMAP$->B$FEPMAP.WHAT#(MEMLOW);

  10413  3 001115   000000 470400 xsym               LDP0    DBD$FEPMAP$
         3 001116   200112 720100                    LXL0    MEMLOW,,AUTO
         3 001117   000000 236110                    LDQ     0,X0,PR0
         3 001120   000011 736000                    QLS     9
         3 001121   200133 552140                    STBQ    MAPDAT,'40'O,AUTO

     1259    10414    4                MAPDAT.INDX# = DBD$FEPMAP$->B$FEPMAP.INDX#(MEMLOW);

  10414  3 001122   000000 236110                    LDQ     0,X0,PR0
         3 001123   000011 736000                    QLS     9
         3 001124   200133 552120                    STBQ    MAPDAT,'20'O,AUTO

     1260    10415    4                MAPDAT.SIZE# = PSIZE;

  10415  3 001125   200077 721100                    LXL1    PSIZE,,AUTO
         3 001126   200135 441100                    SXL1    MAPDAT+2,,AUTO

     1261    10416    4                IF USEFLAG

  10416  3 001127   200103 234100                    SZN     USEFLAG,,AUTO
         3 001130   001202 605000 3                  TPL     s:10443

     1262    10417    5                THEN DO;

PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:233  
     1263    10418    6                     DO CASE(DBD$FEPMAP$->B$FEPMAP.TYP(MEMLOW));

  10418  3 001131   000000 236110                    LDQ     0,X0,PR0
         3 001132   000033 772000                    QRL     27
         3 001133   000004 116007                    CMPQ    4,DL
         3 001134   001136 602006 3                  TNC     s:10418+5,QL
         3 001135   001171 710000 3                  TRA     s:10432
         3 001136   001171 710000 3                  TRA     s:10432
         3 001137   001142 710000 3                  TRA     s:10421
         3 001140   001145 710000 3                  TRA     s:10424
         3 001141   001157 710000 3                  TRA     s:10428

     1264    10419
     1265    10420    6                      CASE(%DBD_MAPTYP_HHJIT#);

     1266    10421    6                        FMTVEC = VECTOR(MFEP_FMT_HHJIT);

  10421  3 001142   000052 237000 4                  LDAQ    42
         3 001143   200136 757100                    STAQ    FMTVEC,,AUTO
         3 001144   001200 710000 3                  TRA     s:10439

     1267    10422
     1268    10423    6                      CASE(%DBD_MAPTYP_SFILE#);

     1269    10424    6                        FMTVEC = VECTOR(MFEP_FMT_SFILE);

  10424  3 001145   000054 237000 4                  LDAQ    44
         3 001146   200136 757100                    STAQ    FMTVEC,,AUTO

     1270    10425    6                        MAPDAT.NAME# = DBD_SFILE_SEG(MAPDAT.INDX#);

  10425  3 001147   200133 236100                    LDQ     MAPDAT,,AUTO
         3 001150   000021 772000                    QRL     17
         3 001151   001776 376007                    ANQ     1022,DL
         3 001152   000002 736000                    QLS     2
         3 001153   040100 100406                    MLR     fill='040'O
         3 001154   000000 000010 xsym               ADSC9   DBD_SFILE_SEG,Q          cn=0,n=8
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:234  
         3 001155   200133 400010                    ADSC9   MAPDAT,,AUTO             cn=2,n=8
         3 001156   001200 710000 3                  TRA     s:10439

     1271    10426
     1272    10427    6                      CASE(%DBD_MAPTYP_USER#);

     1273    10428    6                        FMTVEC = VECTOR(MFEP_FMT_USER);

  10428  3 001157   000056 237000 4                  LDAQ    46
         3 001160   200136 757100                    STAQ    FMTVEC,,AUTO

     1274    10429    6                        MAPDAT.NAME# = DBD_UASDT_NAME(MAPDAT.INDX#);

  10429  3 001161   200133 236100                    LDQ     MAPDAT,,AUTO
         3 001162   000021 772000                    QRL     17
         3 001163   001776 376007                    ANQ     1022,DL
         3 001164   000002 736000                    QLS     2
         3 001165   040100 100406                    MLR     fill='040'O
         3 001166   000000 000010 xsym               ADSC9   DBD_UASDT_NAME,Q         cn=0,n=8
         3 001167   200133 400010                    ADSC9   MAPDAT,,AUTO             cn=2,n=8
         3 001170   001200 710000 3                  TRA     s:10439

     1275    10430
     1276    10431    6                      CASE(ELSE);

     1277    10432    6                        IF DBD$FEPMAP$->B$FEPMAP(MEMLOW) = '0'B

  10432  3 001171   000000 235110                    LDA     0,X0,PR0
         3 001172   001176 601000 3                  TNZ     s:10435

     1278    10433    6                        THEN FMTVEC = VECTOR(MFEP_FMT_NOWNER);

  10433  3 001173   000060 237000 4                  LDAQ    48
         3 001174   200136 757100                    STAQ    FMTVEC,,AUTO
         3 001175   001200 710000 3                  TRA     s:10439

     1279    10434
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:235  
     1280    10435    6                        ELSE FMTVEC = VECTOR(MFEP_FMT_UNKNOWN);

  10435  3 001176   000062 237000 4                  LDAQ    50
         3 001177   200136 757100                    STAQ    FMTVEC,,AUTO

     1281    10436
     1282    10437    6                        END/*do case*/;

     1283    10438
     1284    10439    5                     DBD$FEPMAP$->B$FEPMAP(MEMLOW) = '0'B;

  10439  3 001200   000000 450110                    STZ     0,X0,PR0

     1285    10440    5                     END/*do if useflag*/;

  10440  3 001201   001204 710000 3                  TRA     s:10445

     1286    10441
     1287    10442
     1288    10443    4                ELSE FMTVEC = VECTOR(MFEP_FMT_UNALLOC);

  10443  3 001202   000064 237000 4                  LDAQ    52
         3 001203   200136 757100                    STAQ    FMTVEC,,AUTO

     1289    10444
     1290    10445    4                CALL DAF$WRITE (FMTVEC,

  10445  3 001204   777640 235007                    LDA     -96,DL
         3 001205   200142 452500                    STP2    FMTVEC+4,,AUTO
         3 001206   200142 236100                    LDQ     FMTVEC+4,,AUTO
         3 001207   000112 036003                    ADLQ    74,DU
         3 001210   200144 757100                    STAQ    FMTVEC+6,,AUTO
         3 001211   777640 235007                    LDA     -96,DL
         3 001212   200146 452500                    STP2    FMTVEC+8,,AUTO
         3 001213   200146 236100                    LDQ     FMTVEC+8,,AUTO
         3 001214   000113 036003                    ADLQ    75,DU
         3 001215   200150 757100                    STAQ    FMTVEC+10,,AUTO
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:236  
         3 001216   777640 235007                    LDA     -96,DL
         3 001217   200152 452500                    STP2    FMTVEC+12,,AUTO
         3 001220   200152 236100                    LDQ     FMTVEC+12,,AUTO
         3 001221   000120 036003                    ADLQ    80,DU
         3 001222   200154 757100                    STAQ    FMTVEC+14,,AUTO
         3 001223   777640 235007                    LDA     -96,DL
         3 001224   200156 452500                    STP2    FMTVEC+16,,AUTO
         3 001225   200156 236100                    LDQ     FMTVEC+16,,AUTO
         3 001226   000121 036003                    ADLQ    81,DU
         3 001227   200160 757100                    STAQ    FMTVEC+18,,AUTO
         3 001230   000066 235000 4                  LDA     54
         3 001231   200162 452500                    STP2    FMTVEC+20,,AUTO
         3 001232   200162 236100                    LDQ     FMTVEC+20,,AUTO
         3 001233   000133 036003                    ADLQ    91,DU
         3 001234   200166 757100                    STAQ    FMTVEC+24,,AUTO
         3 001235   200144 237100                    LDAQ    FMTVEC+6,,AUTO
         3 001236   200164 757100                    STAQ    FMTVEC+22,,AUTO
         3 001237   200150 237100                    LDAQ    FMTVEC+10,,AUTO
         3 001240   200170 757100                    STAQ    FMTVEC+26,,AUTO
         3 001241   200154 237100                    LDAQ    FMTVEC+14,,AUTO
         3 001242   200172 757100                    STAQ    FMTVEC+28,,AUTO
         3 001243   200160 237100                    LDAQ    FMTVEC+18,,AUTO
         3 001244   200174 757100                    STAQ    FMTVEC+30,,AUTO
         3 001245   200166 237100                    LDAQ    FMTVEC+24,,AUTO
         3 001246   200176 757100                    STAQ    FMTVEC+32,,AUTO
         3 001247   200176 630500                    EPPR0   FMTVEC+32,,AUTO
         3 001250   200205 450500                    STP0    FMTVEC+39,,AUTO
         3 001251   200174 631500                    EPPR1   FMTVEC+30,,AUTO
         3 001252   200204 451500                    STP1    FMTVEC+38,,AUTO
         3 001253   200172 633500                    EPPR3   FMTVEC+28,,AUTO
         3 001254   200203 453500                    STP3    FMTVEC+37,,AUTO
         3 001255   200170 634500                    EPPR4   FMTVEC+26,,AUTO
         3 001256   200202 454500                    STP4    FMTVEC+36,,AUTO
         3 001257   200164 635500                    EPPR5   FMTVEC+22,,AUTO
         3 001260   200201 455500                    STP5    FMTVEC+35,,AUTO
         3 001261   200136 636500                    EPPR6   FMTVEC,,AUTO
         3 001262   200200 456500                    STP6    FMTVEC+34,,AUTO
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:237  
         3 001263   200200 630500                    EPPR0   FMTVEC+34,,AUTO
         3 001264   000000 220000 xsym               LDX0    DAF$WRITE
         3 001265   000024 631400 xsym               EPPR1   B_VECTNIL+20
         3 001266   000000 701010                    TSX1    0,X0
         3 001267   000000 011000                    NOP     0

     1291    10446    4                  VECTOR(MEMLOW), VECTOR(MEMLAST), VECTOR(PPUT_FIRST),
     1292    10447    4                  VECTOR(PPUT_LAST), VECTOR(MAPDAT) );
     1293    10448
     1294    10449
     1295    10450    5                DO MAP_PG# = MEMLOW TO MEMLAST;

  10450  3 001270   200112 235100                    LDA     MEMLOW,,AUTO
         3 001271   200106 755100                    STA     MAP_PG#,,AUTO
         3 001272   001310 710000 3                  TRA     s:10453+3

     1296    10451    5                     IF DBD$FEPMAP$->B$FEPMAP(MAP_PG#) ~= '0'B

  10451  3 001273   000000 470400 xsym               LDP0    DBD$FEPMAP$
         3 001274   200106 720100                    LXL0    MAP_PG#,,AUTO
         3 001275   000000 235110                    LDA     0,X0,PR0
         3 001276   001305 600000 3                  TZE     s:10453

     1297    10452    5                     THEN CALL DBD$FEPMAP_ERR(MAP_PG#);

  10452  3 001277   200106 631500                    EPPR1   MAP_PG#,,AUTO
         3 001300   200142 451500                    STP1    FMTVEC+4,,AUTO
         3 001301   200142 630500                    EPPR0   FMTVEC+4,,AUTO
         3 001302   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 001303   000000 701000 xent               TSX1    DBD$FEPMAP_ERR
         3 001304   000000 011000                    NOP     0

     1298    10453    5                     END;

  10453  3 001305   200106 235100                    LDA     MAP_PG#,,AUTO
         3 001306   000001 035007                    ADLA    1,DL
         3 001307   200106 755100                    STA     MAP_PG#,,AUTO
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:238  
         3 001310   200113 236100                    LDQ     MEMLAST,,AUTO
         3 001311   200106 116100                    CMPQ    MAP_PG#,,AUTO
         3 001312   001273 603000 3                  TRC     s:10451

     1299    10454
     1300    10455    4                END/*do if mapping*/;

     1301    10456
     1302    10457
     1303    10458    3           IF PSIZE > 256

  10458  3 001313   200077 235100                    LDA     PSIZE,,AUTO
         3 001314   000401 115007                    CMPA    257,DL
         3 001315   001321 602000 3                  TNC     s:10460

     1304    10459    3           THEN THIS_SIZE = 256*2;

  10459  3 001316   001000 236007                    LDQ     512,DL
         3 001317   200076 756100                    STQ     THIS_SIZE,,AUTO
         3 001320   001323 710000 3                  TRA     s:10462

     1305    10460    3           ELSE THIS_SIZE = PSIZE*2;

  10460  3 001321   000001 735000                    ALS     1
         3 001322   200076 755100                    STA     THIS_SIZE,,AUTO

     1306    10461
     1307    10462    3           IF PPUT_FIRST.W2.SIZE = PPUT_LAST.W2.SIZE

  10462  3 001323   200120 236100                    LDQ     PPUT_FIRST,,AUTO
         3 001324   200121 676100                    ERQ     PPUT_LAST,,AUTO
         3 001325   777777 376007                    ANQ     -1,DL
         3 001326   001333 601000 3                  TNZ     s:10464

     1308    10463    3           THEN MEMLOW = MEMLOW + PSIZE;

  10463  3 001327   200112 236100                    LDQ     MEMLOW,,AUTO
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:239  
         3 001330   200077 036100                    ADLQ    PSIZE,,AUTO
         3 001331   200112 756100                    STQ     MEMLOW,,AUTO
         3 001332   001336 710000 3                  TRA     s:10467

     1309    10464    3           ELSE MEMLOW = MEMLOW + 1/*try to find next good one*/;

  10464  3 001333   200112 235100                    LDA     MEMLOW,,AUTO
         3 001334   000001 035007                    ADLA    1,DL
         3 001335   200112 755100                    STA     MEMLOW,,AUTO

     1310    10465    3           END/*do if display*/;

     1311    10466
     1312    10467    2      IF USEFLAG THEN INUSE = INUSE + PSIZE;

  10467  3 001336   200103 234100                    SZN     USEFLAG,,AUTO
         3 001337   001344 605000 3                  TPL     s:10468

  10467  3 001340   200102 236100                    LDQ     INUSE,,AUTO
         3 001341   200077 036100                    ADLQ    PSIZE,,AUTO
         3 001342   200102 756100                    STQ     INUSE,,AUTO
         3 001343   001347 710000 3                  TRA     s:10470

     1313    10468    2      ELSE FREE = FREE + PSIZE;

  10468  3 001344   200101 236100                    LDQ     FREE,,AUTO
         3 001345   200077 036100                    ADLQ    PSIZE,,AUTO
         3 001346   200101 756100                    STQ     FREE,,AUTO

     1314    10469
     1315    10470    2   END DISP_PPUT;

  10470  3 001347   200140 221300                    LDX1  ! FMTVEC+2,,AUTO
         3 001350   000001 702211                    TSX2  ! 1,X1
     1316    10471
     1317    10472    1   END DBD$PPUT;
     1318    10473        %EOD;
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:240  

PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:241  
--  Include file information  --

   B$TABLES_C.:E05TOU  cannot be made into a system file and is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
   DA_FORMAT_C.:E05TOU  is referenced.
   DB_ANLZ_M.:E05TOU  is referenced.
   GM_MACRO_M.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBD$PPUT.
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:242  

 **** Variables and constants ****

  ****  Section 001  Data  DBD$PPUT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(288)   r     1 FMAP_RPT1                 10-0-0/c STRC(279)   r     1 FMAP_RPT1TX00
    20-0-0/w STRC(288)   r     1 PPUT_RPT1                 30-0-0/c STRC(279)   r     1 PPUT_RPT1TX00

  ****  Section 002 RoData DBD$PPUT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    64-0-0/c CHAR(109)   r     1 MFEP_FMT_HHJIT           152-0-0/c CHAR(102)   r     1 MFEP_FMT_NOWNER
    32-0-0/c CHAR(102)   r     1 MFEP_FMT_SFILE           120-0-0/c CHAR(102)   r     1 MFEP_FMT_UNALLOC
   204-0-0/c CHAR(95)    r     1 MFEP_FMT_UNKNOWN           0-0-0/c CHAR(102)   r     1 MFEP_FMT_USER
   234-0-0/c CHAR(94)    r     1 PPUT_FMT10               314-0-0/c CHAR(83)    r     1 PPUT_FMT11
   341-0-0/c CHAR(47)    r     1 PPUT_FMT12               264-0-0/c CHAR(18)    r     1 PPUT_FMT1X
   355-0-0/c CHAR(89)    r     1 PPUT_FMT20               271-0-0/c CHAR(73)    r     1 PPUT_FMT2X

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @TOP                     116-0-0/w UBIN        r     1 ACTION
   110-0-0/c CHAR(4)     r     1 CCCC                      74-0-0/w UBIN        r     1 FIRST_PPUT$
   136-0-0/d VECT        r     1 FMTVEC                   101-0-0/w UBIN        r     1 FREE
     4-0-0/w STRC(1908)  r     1 G$BOBCAT                 122-0-0/w STRC(306)   r     1 GM$DATA
    71-0-0/w UBIN        r     1 I                        102-0-0/w UBIN        r     1 INUSE
    75-0-0/w UBIN        r     1 LAST_PPUT$               100-0-0/w UBIN        r     1 LAST_SIZE
   133-0-0/c STRC(108)   r     1 MAPDAT                   106-0-0/w UBIN        r     1 MAP_PG#
   114-0-0/w UBIN        r     1 MEMHI                    113-0-0/w UBIN        r     1 MEMLAST
   112-0-0/w UBIN        r     1 MEMLOW                   104-0-0/w UBIN        r     1 MMDATA$
   105-0-0/w UBIN        r     1 PGS#                     111-0-0/w UBIN        r     1 PPUT$
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:243  
   120-0-0/c STRC        r     1 PPUT_FIRST               121-0-0/c STRC        r     1 PPUT_LAST
    77-0-0/w UBIN        r     1 PSIZE                    115-0-0/w UBIN        r     1 SHUFHI
   107-0-0/w UBIN        r     1 SHUF_TIME                 76-0-0/w UBIN        r     1 THIS_SIZE
    *0-0-0/w STRC(144)   r     1 TOP                      103-0-0/w BIT         r     1 USEFLAG
    72-0-0/w UBIN        r     1 X

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$XL_ASC_DUMP$             0-0-0/c CHAR(4)     r     1 BLANK_LINE
     0-0-0/w EPTR        r     1 DAF$WRITE                  0-0-0/w PTR         r     1 DBD$FEPMAP$
     0-0-0/w CHAR(8)     r     1 DBD_SFILE_SEG(0:0)
     0-0-0/w CHAR(8)     r     1 DBD_UASDT_NAME(0:0)

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC        r     1 B$FEPMAP(0:0)
     0-0-0/w STRC(144)   r     1 OUT


   Procedure DBD$PPUT requires 745 words for executable code.
   Procedure DBD$PPUT requires 134 words of local(AUTO) storage.
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:244  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:245  
          MINI XREF LISTING

ACTION
     10108**DCL     10284<<ASSIGN  10291<<ASSIGN  10336<<ASSIGN  10341<<ASSIGN  10380>>IF
B$FEPMAP
      9806**DCL     10432>>IF      10439<<ASSIGN  10451>>IF
B$FEPMAP.INDX#
      9811**DCL     10414>>ASSIGN
B$FEPMAP.TYP
      9807**DCL     10418>>DOCASE
B$FEPMAP.WHAT#
      9809**DCL     10413>>ASSIGN
B$XL_ASC_DUMP$
      9903**DCL      9904--IMP-PTR
BLANK_LINE
     10084**DCL     10301--CALL    10331--CALL    10350--CALL    10351--CALL    10404--CALL
CCCC
     10101**DCL     10310<<ASSIGN  10310<<ASSIGN  10312--CALL    10316<<ASSIGN  10316<<ASSIGN  10318--CALL
     10322<<ASSIGN  10322<<ASSIGN  10324--CALL
DAA$VALUE
      9821**DCL-ENT 10338--CALL
DAF$INIT
      9823**DCL-ENT 10283--CALL    10288--CALL
DAF$WRITE
      9822**DCL     10301>>CALL    10304>>CALL    10312>>CALL    10318>>CALL    10324>>CALL    10328>>CALL
     10331>>CALL    10350>>CALL    10351>>CALL    10404>>CALL    10407>>CALL    10445>>CALL
DBD$FEPMAP$
      9833**DCL     10281>>IF      10298>>IF      10405>>IF      10413>>ASSIGN  10414>>ASSIGN  10418>>DOCASE
     10432>>IF      10439>>ASSIGN  10451>>IF
DBD$FEPMAP_ERR
      9825**DCL-ENT 10452--CALL
DBD_SFILE_SEG
      9898**DCL     10425>>ASSIGN
DBD_UASDT_NAME
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:246  
      9876**DCL     10429>>ASSIGN
DBM$GETBOBCAT
      9827**DCL-ENT 10270--CALL
DBM$GETMEM
      9826**DCL-ENT 10275--CALL    10364--CALL    10377--CALL
DBM$PACK2
      9829**DCL-ENT 10276--CALL    10277--CALL    10278--CALL    10307--CALL    10308--CALL    10321--CALL
     10342--CALL    10366--CALL    10378--CALL
DBM$PACK4
      9830**DCL-ENT 10272--CALL    10274--CALL    10326--CALL
DISPLAY_ALL
     10291**LABEL   10285--GOTO    10343--GOTO
DISPLAY_IT IN PROCEDURE DISP_PPUT
     10398**LABEL   10373--GOTO    10383--GOTO    10386--GOTO    10389--GOTO    10392--GOTO    10396--GOTO
DISP_PPUT
     10362**PROC    10295--CALL    10346--CALL
FIRST_PPUT$
     10089**DCL     10363<<ASSIGN  10364<>CALL
FMAP_RPT1
      9924**DCL     10283<>CALL
FMAP_RPT1TX00
      9967**DCL      9954--DCLINIT
FMTVEC
     10264**DCL     10421<<ASSIGN  10424<<ASSIGN  10428<<ASSIGN  10433<<ASSIGN  10435<<ASSIGN  10443<<ASSIGN
     10445<>CALL
FREE
     10094**DCL     10269<<ASSIGN  10310>>IF      10312--CALL    10315>>ASSIGN  10468<<ASSIGN  10468>>ASSIGN
G$BOBCAT
      9700**DCL     10270<>CALL
G$BOBCAT.MEM_HI
      9700**DCL     10304--CALL
G$BOBCAT.MEM_LOW
      9701**DCL     10304--CALL    10342<>CALL
G$BOBCAT.MMDATA$
      9700**DCL     10274<>CALL
G$BOBCAT.PPUT$
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:247  
      9704**DCL     10272<>CALL    10304--CALL
GM$DATA
     10146**DCL     10275<>CALL    10275--CALL    10275--CALL
GM$DATA.CHK_PPUT
     10219**DCL     10321<>CALL
GM$DATA.MEM_HI
     10160**DCL     10277<>CALL
GM$DATA.MEM_LOW
     10155**DCL     10276<>CALL
GM$DATA.NSHF
     10193**DCL     10308<>CALL    10312--CALL
GM$DATA.SHUF
     10186**DCL     10307<>CALL    10312--CALL
GM$DATA.SHUF_COUNT
     10207**DCL     10328--CALL
GM$DATA.SHUF_HI
     10165**DCL     10278<>CALL    10304--CALL
GM$DATA.SHUF_SEGS#
     10213**DCL     10328--CALL
GM$DATA.SHUF_TIME
     10251**DCL     10326<>CALL
I
     10086**DCL     10307<>CALL    10309<<ASSIGN  10309>>ASSIGN  10310>>IF      10312--CALL    10315<<ASSIGN
     10316>>IF      10318--CALL    10321<>CALL    10322>>IF
INUSE
     10095**DCL     10268<<ASSIGN  10315>>ASSIGN  10318--CALL    10467<<ASSIGN  10467>>ASSIGN
LAST_PPUT$
     10090**DCL     10376<<ASSIGN  10377<>CALL
LAST_SIZE
     10093**DCL     10378<>CALL    10391>>IF
MAPDAT
     10258**DCL     10445--CALL
MAPDAT.INDX#
     10260**DCL     10414<<ASSIGN  10425>>ASSIGN  10429>>ASSIGN
MAPDAT.NAME#
     10261**DCL     10425<<ASSIGN  10429<<ASSIGN
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:248  
MAPDAT.SIZE#
     10262**DCL     10415<<ASSIGN
MAPDAT.WHAT#
     10259**DCL     10413<<ASSIGN
MAP_PG#
     10099**DCL     10450<<DOINDEX 10451>>IF      10452<>CALL
MEMHI
     10106**DCL     10277<>CALL    10279>>ASSIGN  10294>>DOWHILE 10345>>IF
MEMLAST
     10105**DCL     10375<<ASSIGN  10376>>ASSIGN  10407--CALL    10445--CALL    10450>>DOINDEX
MEMLOW
     10104**DCL     10276<>CALL    10279>>ASSIGN  10294>>DOWHILE 10338<>CALL    10339>>IF      10342<>CALL
     10345>>IF      10345>>IF      10363>>ASSIGN  10375>>ASSIGN  10398<<ASSIGN  10398>>ASSIGN  10403>>IF
     10407--CALL    10413>>ASSIGN  10414>>ASSIGN  10418>>DOCASE  10432>>IF      10439>>ASSIGN  10445--CALL
     10450>>DOINDEX 10463<<ASSIGN  10463>>ASSIGN  10464<<ASSIGN  10464>>ASSIGN
MFEP_FMT_HHJIT
      9982**DCL     10421--ASSIGN
MFEP_FMT_NOWNER
      9990**DCL     10433--ASSIGN
MFEP_FMT_SFILE
      9978**DCL     10424--ASSIGN
MFEP_FMT_UNALLOC
      9986**DCL     10443--ASSIGN
MFEP_FMT_UNKNOWN
      9994**DCL     10435--ASSIGN
MFEP_FMT_USER
      9974**DCL     10428--ASSIGN
MMDATA$
     10097**DCL     10274<>CALL    10275<>CALL
OUT
      9764**DCL     10338<>CALL
PGS#
     10098**DCL     10279<<ASSIGN  10304--CALL    10316>>IF
PPUT$
     10103**DCL     10272<>CALL    10363>>ASSIGN  10376>>ASSIGN
PPUT_FIRST
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:249  
     10112**DCL     10364<>CALL    10364--CALL    10364--CALL    10371>>ASSIGN  10407--CALL    10445--CALL
PPUT_FIRST.W1.FIRSTPG
     10116**DCL     10382>>IF
PPUT_FIRST.W1.INUSE
     10118**DCL     10367>>ASSIGN
PPUT_FIRST.W1.LASTPG
     10117**DCL     10385>>IF      10388>>IF
PPUT_FIRST.W2.SIZE
     10124**DCL     10366<>CALL    10385>>IF      10388>>IF      10462>>IF
PPUT_FMT10
     10064**DCL     10304--CALL
PPUT_FMT11
     10073**DCL     10312--CALL
PPUT_FMT12
     10076**DCL     10318--CALL
PPUT_FMT1X
     10067**DCL     10324--CALL
PPUT_FMT20
     10080**DCL     10407--CALL
PPUT_FMT2X
     10070**DCL     10328--CALL
PPUT_LAST
     10126**DCL     10371<<ASSIGN  10377<>CALL    10377--CALL    10377--CALL    10407--CALL    10445--CALL
PPUT_LAST.W1.INUSE
     10132**DCL     10394>>IF      10394>>IF
PPUT_LAST.W1.LASTPG
     10131**DCL     10382>>IF
PPUT_LAST.W2.SIZE
     10138**DCL     10378<>CALL    10462>>IF
PPUT_RPT1
     10015**DCL     10288<>CALL
PPUT_RPT1TX00
     10058**DCL     10045--DCLINIT
PPUT_START
     10264**LABEL   10359--GOTO
PSIZE
PL6.E3A0      #005=DBD$PPUT File=DBD$FMT_G.:E05TSI                               TUE 07/29/97 13:04 Page:250  
     10092**DCL     10366<>CALL    10369>>IF      10372<<ASSIGN  10375>>ASSIGN  10391>>IF      10398>>ASSIGN
     10415>>ASSIGN  10458>>IF      10460>>ASSIGN  10463>>ASSIGN  10467>>ASSIGN  10468>>ASSIGN
SHUFHI
     10107**DCL     10278<>CALL    10403>>IF
SHUF_TIME
     10100**DCL     10326<>CALL    10327<<ASSIGN  10327>>ASSIGN  10328--CALL
THIS_SIZE
     10091**DCL     10459<<ASSIGN  10460<<ASSIGN
TOP
      9719**DCL        10--PROC    10357--ENTRY
TOP.NSUBLKS
      9731**DCL     10289>>IF      10337>>DOINDEX 10358<<ASSIGN
TOP.SUBLK$
      9752**DCL     10338>>CALL
USEFLAG
     10096**DCL     10367<<ASSIGN  10394>>IF      10394>>IF      10416>>IF      10467>>IF
X
     10087**DCL     10308<>CALL    10309>>ASSIGN  10337<<DOINDEX 10338>>CALL

PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:251  
     1319        1        /*T***********************************************************/
     1320        2        /*T*                                                         */
     1321        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1322        4        /*T*                                                         */
     1323        5        /*T***********************************************************/
     1324        6
     1325        7        /*X* PLM=3,IND=5,ENU=0,ECU=0  */
     1326        8
     1327        9        /*F*    NAME: DBD$FEPMAP
     1328       10                PURPOSE: To locate and display all the pages between MEMLO and MEMHI.
     1329       11        */
     1330       12        DBD$FEPMAP: PROC;
     1331       13
     1332       14        /*X* PLM=3,IND=5,ECU=0,ENU=0   */
     1333       15
     1334       16        %INCLUDE CP_6;
     1335     5575        %INCLUDE DA_FORMAT_C;
     1336     5817        %INCLUDE DB_ANLZ_M;
     1337     5984        %INCLUDE XU_MACRO_C;
     1338     9090        %INCLUDE G$BOBCAT_M;
     1339     9110
     1340     9111    1   DCL DAA$VALUE ENTRY(3) ALTRET;
     1341     9112    1   DCL DAF$WRITE EPTR SYMREF;
     1342     9113    1   DCL DBM$GETMEM ENTRY(10) ALTRET;
     1343     9114    1   DCL DBM$GETBOBCAT ENTRY(1) ALTRET;
     1344     9115    1   DCL DBM$PACK1 ENTRY(2);
     1345     9116    1   DCL DBM$PACK2 ENTRY(2);
     1346     9117    1   DCL DBM$PACK4 ENTRY(2);
     1347     9118
     1348     9119    1   DCL DBD$MEMORY ENTRY;
     1349     9120    1   DCL DBD$INTCON_MAP ENTRY;
     1350     9121    1   DCL DBD$SFILE ENTRY(1);
     1351     9122    1   DCL DBD$PPUT ENTRY(1);
     1352     9123
     1353     9124        %EJECT;
PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:252  
     1354     9125    1   DCL DBD$FEPMAP$ PTR SYMREF;
     1355     9126    1   DCL DA_MAPERR BIT(36) SYMREF;
     1356     9127    1   DCL DA_TRTN REMEMBER SYMREF;
     1357     9128
     1358     9129    1   DCL MY_TRTN REMEMBER;
     1359     9130    1   DCL MEM_HI UBIN;
     1360     9131
     1361     9132        %FPT_FDS (COMMON=YES,SEGSIZE=99999);
     1362     9147        %FPT_GDS (RESULTS=VECT_DS2,COMMON=YES);
     1363     9163        %VLP_VECTOR (FPTN=VECT_DS2);
     1364     9178        %B$TCB;
     1365     9181        %B$ALT;
     1366     9189    1   DCL B$TCB$ PTR SYMREF READONLY;
     1367     9190
     1368     9191                                                /* BASED Structures                   */
     1369     9192        %LIST;
     1370     9193        %B$FEPMAP;
              9194    1   DCL 1 B$FEPMAP(0:0) BASED ALIGNED,
              9195    1         2 TYP UBIN BYTE CALIGNED,
              9196                                                /* 1=HHJIT   2=SFILE      3=USER      */
              9197    1         2 WHAT# UBIN BYTE CALIGNED,
              9198                                                /* INTLEVL   SFILE#       USER#       */
              9199    1         2 INDX# UBIN BYTE CALIGNED,
              9200                                                /* USR#      SFILE.SEG#   ASDT_INDX   */
              9201    1         2 SIZE UBIN BYTE CALIGNED;
              9202                                                /* # of pages #                       */
              9203        %EQU DBD_MAPTYP_HHJIT#=1;
              9204        %EQU DBD_MAPTYP_SFILE#=2;
              9205        %EQU DBD_MAPTYP_USER#=3;
     1371     9207        %PLIST;
     1372     9208
     1373     9209
     1374     9210                                                /* AUTO Storage                       */
     1375     9211    1   DCL I UBIN;
     1376     9212
     1377     9213        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS=AUTO);
     1378     9226
PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:253  
     1379     9227        %EJECT;
PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:254  
     1380     9228    1      CALL DBM$GETBOBCAT(G$BOBCAT)
     1381     9229    2      WHENALTRETURN DO; RETURN; END;
     1382     9230
     1383     9231    1      CALL DBM$PACK2(G$BOBCAT.MEM_HI,MEM_HI);
     1384     9232    1      FPT_GDS.V.SEGSIZE# = MEM_HI+1;
     1385     9233
     1386     9234    1      MY_TRTN = DA_TRTN;
     1387     9235    1      REMEMBER FINI IN DA_TRTN;
     1388     9236    1      CALL M$FDS(FPT_FDS) ALTRET(GDS);
     1389     9237    1   GDS: ;
     1390     9238    1      CALL M$GDS(FPT_GDS)
     1391     9239    2      WHENALTRETURN DO;
     1392     9240    2           DA_MAPERR = B$TCB$->B$TCB.ALT$->B$ALT.ERR;
     1393     9241    2           RETURN;
     1394     9242    2           END;
     1395     9243
     1396     9244
     1397     9245    1      DBD$FEPMAP$ = VECT_DS2.PTR$;
     1398     9246    2      DO I=0 TO MEM_HI;
     1399     9247    2           DBD$FEPMAP$->B$FEPMAP(I) = '0'B;
     1400     9248    2           END;
     1401     9249
     1402     9250    1      CALL DBD$INTCON_MAP;
     1403     9251    1      CALL DBD$SFILE;
     1404     9252    1      CALL DBD$MEMORY;
     1405     9253    1      CALL DBD$PPUT;
     1406     9254
     1407     9255    1      CALL M$FDS(FPT_FDS);
     1408     9256    1      DBD$FEPMAP$ = ADDR(NIL);
     1409     9257    1      DA_MAPERR = '0'B;
     1410     9258
     1411     9259    1      RETURN;
     1412     9260
     1413     9261    1   FINI: ;
     1414     9262    1      DA_TRTN = MY_TRTN;
     1415     9263    1      CALL M$FDS(FPT_FDS);
     1416     9264    1      DBD$FEPMAP$ = ADDR(NIL);
PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:255  
     1417     9265    1      DA_MAPERR = '0'B;
     1418     9266    1      UNWIND TO DA_TRTN;
     1419     9267
     1420     9268    1   END DBD$FEPMAP;
     1421     9269        %EOD;

PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:256  
--  Include file information  --

   G$BOBCAT_M.:E05TOU  is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
   DB_ANLZ_M.:E05TOU  is referenced.
   DA_FORMAT_C.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBD$FEPMAP.

   Procedure DBD$FEPMAP requires 83 words for executable code.
   Procedure DBD$FEPMAP requires 64 words of local(AUTO) storage.

PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:257  

 Object Unit name= DBD$FEPMAP                                 File name= DBD$FMT_G.:E05TOU
 UTS= JUL 29 '97 13:04:56.16 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none    14     16  DBD$FEPMAP
    2   Proc  even  none    83    123  DBD$FEPMAP

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes            yes      Std        0  DBD$FEPMAP

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       1 DBM$GETBOBCAT
         yes           Std       2 DBM$PACK2
         yes           Std       1 DBD$PPUT
         yes           Std       0 DBD$INTCON_MAP
         yes           Std       1 DBD$SFILE
         yes           Std       0 DBD$MEMORY
                       nStd      0 X66_AUTO_0
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AUNWIND
PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:258  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  DAF$WRITE                             DBD$FEPMAP$
     DA_MAPERR                             DA_TRTN                          r    B$TCB$
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:259  


     1319        1        /*T***********************************************************/
     1320        2        /*T*                                                         */
     1321        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1322        4        /*T*                                                         */
     1323        5        /*T***********************************************************/
     1324        6
     1325        7        /*X* PLM=3,IND=5,ENU=0,ECU=0  */
     1326        8
     1327        9        /*F*    NAME: DBD$FEPMAP
     1328       10                PURPOSE: To locate and display all the pages between MEMLO and MEMHI.
     1329       11        */
     1330       12        DBD$FEPMAP: PROC;

     12  2 000000   000000 700200 xent  DBD$FEPMAP   TSX0  ! X66_AUTO_0
         2 000001   000100 000000                    ZERO    64,0

     1331       13
     1332       14        /*X* PLM=3,IND=5,ECU=0,ENU=0   */
     1333       15
     1334       16        %INCLUDE CP_6;
     1335     5575        %INCLUDE DA_FORMAT_C;
     1336     5817        %INCLUDE DB_ANLZ_M;
     1337     5984        %INCLUDE XU_MACRO_C;
     1338     9090        %INCLUDE G$BOBCAT_M;
     1339     9110
     1340     9111    1   DCL DAA$VALUE ENTRY(3) ALTRET;
     1341     9112    1   DCL DAF$WRITE EPTR SYMREF;
     1342     9113    1   DCL DBM$GETMEM ENTRY(10) ALTRET;
     1343     9114    1   DCL DBM$GETBOBCAT ENTRY(1) ALTRET;
     1344     9115    1   DCL DBM$PACK1 ENTRY(2);
     1345     9116    1   DCL DBM$PACK2 ENTRY(2);
     1346     9117    1   DCL DBM$PACK4 ENTRY(2);
     1347     9118
     1348     9119    1   DCL DBD$MEMORY ENTRY;
     1349     9120    1   DCL DBD$INTCON_MAP ENTRY;
     1350     9121    1   DCL DBD$SFILE ENTRY(1);
PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:260  
     1351     9122    1   DCL DBD$PPUT ENTRY(1);
     1352     9123
     1353     9124        %EJECT;
PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:261  
     1354     9125    1   DCL DBD$FEPMAP$ PTR SYMREF;
     1355     9126    1   DCL DA_MAPERR BIT(36) SYMREF;
     1356     9127    1   DCL DA_TRTN REMEMBER SYMREF;
     1357     9128
     1358     9129    1   DCL MY_TRTN REMEMBER;
     1359     9130    1   DCL MEM_HI UBIN;
     1360     9131
     1361     9132        %FPT_FDS (COMMON=YES,SEGSIZE=99999);
     1362     9147        %FPT_GDS (RESULTS=VECT_DS2,COMMON=YES);
     1363     9163        %VLP_VECTOR (FPTN=VECT_DS2);
     1364     9178        %B$TCB;
     1365     9181        %B$ALT;
     1366     9189    1   DCL B$TCB$ PTR SYMREF READONLY;
     1367     9190
     1368     9191                                                /* BASED Structures                   */
     1369     9192        %LIST;
     1370     9193        %B$FEPMAP;
              9194    1   DCL 1 B$FEPMAP(0:0) BASED ALIGNED,
              9195    1         2 TYP UBIN BYTE CALIGNED,
              9196                                                /* 1=HHJIT   2=SFILE      3=USER      */
              9197    1         2 WHAT# UBIN BYTE CALIGNED,
              9198                                                /* INTLEVL   SFILE#       USER#       */
              9199    1         2 INDX# UBIN BYTE CALIGNED,
              9200                                                /* USR#      SFILE.SEG#   ASDT_INDX   */
              9201    1         2 SIZE UBIN BYTE CALIGNED;
              9202                                                /* # of pages #                       */
              9203        %EQU DBD_MAPTYP_HHJIT#=1;
              9204        %EQU DBD_MAPTYP_SFILE#=2;
              9205        %EQU DBD_MAPTYP_USER#=3;
     1371     9207        %PLIST;
     1372     9208
     1373     9209
     1374     9210                                                /* AUTO Storage                       */
     1375     9211    1   DCL I UBIN;
     1376     9212
     1377     9213        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS=AUTO);
     1378     9226
PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:262  
     1379     9227        %EJECT;
PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:263  
     1380     9228    1      CALL DBM$GETBOBCAT(G$BOBCAT)

   9228  2 000002   200010 630500                    EPPR0   G$BOBCAT,,AUTO
         2 000003   200076 450500                    STP0    G$BOBCAT+54,,AUTO
         2 000004   200076 630500                    EPPR0   G$BOBCAT+54,,AUTO
         2 000005   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000006   000000 701000 xent               TSX1    DBM$GETBOBCAT
         2 000007   000011 702000 2                  TSX2    s:9229
         2 000010   000012 710000 2                  TRA     s:9231

     1381     9229    2      WHENALTRETURN DO; RETURN; END;

   9229  2 000011   000000 702200 xent               TSX2  ! X66_ARET

     1382     9230
     1383     9231    1      CALL DBM$PACK2(G$BOBCAT.MEM_HI,MEM_HI);

   9231  2 000012   200006 630500                    EPPR0   MEM_HI,,AUTO
         2 000013   200077 450500                    STP0    G$BOBCAT+55,,AUTO
         2 000014   200014 631500                    EPPR1   G$BOBCAT+4,,AUTO
         2 000015   200076 451500                    STP1    G$BOBCAT+54,,AUTO
         2 000016   200076 630500                    EPPR0   G$BOBCAT+54,,AUTO
         2 000017   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000020   000000 701000 xent               TSX1    DBM$PACK2
         2 000021   000000 011000                    NOP     0

     1384     9232    1      FPT_GDS.V.SEGSIZE# = MEM_HI+1;

   9232  2 000022   200006 720100                    LXL0    MEM_HI,,AUTO
         2 000023   000001 621010                    EAX1    1,X0
         2 000024   000012 441000 1                  SXL1    FPT_GDS+4

     1385     9233
     1386     9234    1      MY_TRTN = DA_TRTN;

   9234  2 000025   000000 237000 xsym               LDAQ    DA_TRTN
         2 000026   200004 757100                    STAQ    MY_TRTN,,AUTO
PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:264  

     1387     9235    1      REMEMBER FINI IN DA_TRTN;

   9235  2 000027   000110 635000 2                  EAA     FINI
         2 000030   000000 452400 xsym               STP2    DA_TRTN
         2 000031   000001 755000 xsym               STA     DA_TRTN+1

     1388     9236    1      CALL M$FDS(FPT_FDS) ALTRET(GDS);

   9236  2 000032   000000 630400 1                  EPPR0   FPT_FDS
         2 000033   430002 713400                    CLIMB   alt,fds
         2 000034   400400 401760                    pmme    nvectors=2
         2 000035   000036 702000 2                  TSX2    GDS

   9234  2 000036                       GDS          null
     1389     9237    1   GDS: ;
     1390     9238    1      CALL M$GDS(FPT_GDS)

   9238  2 000036   000006 630400 1                  EPPR0   FPT_GDS
         2 000037   430001 713400                    CLIMB   alt,gds
         2 000040   400400 401760                    pmme    nvectors=2
         2 000041   000043 702000 2                  TSX2    s:9240
         2 000042   000050 710000 2                  TRA     s:9245

     1391     9239    2      WHENALTRETURN DO;

     1392     9240    2           DA_MAPERR = B$TCB$->B$TCB.ALT$->B$ALT.ERR;

   9240  2 000043   000000 470400 xsym               LDP0    B$TCB$
         2 000044   000000 471500                    LDP1    0,,PR0
         2 000045   100102 236100                    LDQ     66,,PR1
         2 000046   000000 756000 xsym               STQ     DA_MAPERR

     1393     9241    2           RETURN;

   9241  2 000047   000000 702200 xent               TSX2  ! X66_ARET

PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:265  
     1394     9242    2           END;
     1395     9243
     1396     9244
     1397     9245    1      DBD$FEPMAP$ = VECT_DS2.PTR$;

   9245  2 000050   000015 236000 1                  LDQ     VECT_DS2+1
         2 000051   000000 756000 xsym               STQ     DBD$FEPMAP$

     1398     9246    2      DO I=0 TO MEM_HI;

   9246  2 000052   200007 450100                    STZ     I,,AUTO
         2 000053   000062 710000 2                  TRA     s:9248+3

     1399     9247    2           DBD$FEPMAP$->B$FEPMAP(I) = '0'B;

   9247  2 000054   000000 470400 xsym               LDP0    DBD$FEPMAP$
         2 000055   200007 720100                    LXL0    I,,AUTO
         2 000056   000000 450110                    STZ     0,X0,PR0

     1400     9248    2           END;

   9248  2 000057   200007 235100                    LDA     I,,AUTO
         2 000060   000001 035007                    ADLA    1,DL
         2 000061   200007 755100                    STA     I,,AUTO
         2 000062   200006 236100                    LDQ     MEM_HI,,AUTO
         2 000063   200007 116100                    CMPQ    I,,AUTO
         2 000064   000054 603000 2                  TRC     s:9247

     1401     9249
     1402     9250    1      CALL DBD$INTCON_MAP;

   9250  2 000065   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000066   000000 701000 xent               TSX1    DBD$INTCON_MAP
         2 000067   000000 011000                    NOP     0

     1403     9251    1      CALL DBD$SFILE;

PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:266  
   9251  2 000070   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000071   000000 701000 xent               TSX1    DBD$SFILE
         2 000072   000000 011000                    NOP     0

     1404     9252    1      CALL DBD$MEMORY;

   9252  2 000073   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000074   000000 701000 xent               TSX1    DBD$MEMORY
         2 000075   000000 011000                    NOP     0

     1405     9253    1      CALL DBD$PPUT;

   9253  2 000076   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000077   000000 701000 xent               TSX1    DBD$PPUT
         2 000100   000000 011000                    NOP     0

     1406     9254
     1407     9255    1      CALL M$FDS(FPT_FDS);

   9255  2 000101   000000 630400 1                  EPPR0   FPT_FDS
         2 000102   030002 713400                    CLIMB   fds
         2 000103   400400 401760                    pmme    nvectors=2

     1408     9256    1      DBD$FEPMAP$ = ADDR(NIL);

   9256  2 000104   000001 236000 xsym               LDQ     B_VECTNIL+1
         2 000105   000000 756000 xsym               STQ     DBD$FEPMAP$

     1409     9257    1      DA_MAPERR = '0'B;

   9257  2 000106   000000 450000 xsym               STZ     DA_MAPERR

     1410     9258
     1411     9259    1      RETURN;

   9259  2 000107   000000 702200 xent               TSX2  ! X66_ARET

PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:267  
   9257  2 000110                       FINI         null
     1412     9260
     1413     9261    1   FINI: ;
     1414     9262    1      DA_TRTN = MY_TRTN;

   9262  2 000110   200004 237100                    LDAQ    MY_TRTN,,AUTO
         2 000111   000000 757000 xsym               STAQ    DA_TRTN

     1415     9263    1      CALL M$FDS(FPT_FDS);

   9263  2 000112   000000 630400 1                  EPPR0   FPT_FDS
         2 000113   030002 713400                    CLIMB   fds
         2 000114   400400 401760                    pmme    nvectors=2

     1416     9264    1      DBD$FEPMAP$ = ADDR(NIL);

   9264  2 000115   000001 236000 xsym               LDQ     B_VECTNIL+1
         2 000116   000000 756000 xsym               STQ     DBD$FEPMAP$

     1417     9265    1      DA_MAPERR = '0'B;

   9265  2 000117   000000 450000 xsym               STZ     DA_MAPERR

     1418     9266    1      UNWIND TO DA_TRTN;

   9266  2 000120   000000 237200 xsym               LDAQ  ! DA_TRTN
         2 000121   000000 700200 xent               TSX0  ! X66_AUNWIND
         2 000122   000000 000200                    ZERO    0,128
     1419     9267
     1420     9268    1   END DBD$FEPMAP;
     1421     9269        %EOD;

PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:268  
--  Include file information  --

   G$BOBCAT_M.:E05TOU  is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
   DB_ANLZ_M.:E05TOU  is referenced.
   DA_FORMAT_C.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBD$FEPMAP.
PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:269  

 **** Variables and constants ****

  ****  Section 001  Data  DBD$FEPMAP

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(216)   r     1 FPT_FDS                    6-0-0/d STRC(216)   r     1 FPT_GDS
    14-0-0/d STRC(72)    r     1 VECT_DS2

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    10-0-0/w STRC(1908)  r     1 G$BOBCAT                   7-0-0/w UBIN        r     1 I
     6-0-0/w UBIN        r     1 MEM_HI                     4-0-0/d REMB        r     1 MY_TRTN

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$TCB$                     0-0-0/w EPTR        r     1 DAF$WRITE
     0-0-0/b BIT         r     1 DA_MAPERR                  0-0-0/d REMB        r     1 DA_TRTN
     0-0-0/w PTR         r     1 DBD$FEPMAP$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$ALT
     0-0-0/w STRC        r     1 B$FEPMAP(0:0)
     0-0-0/w STRC(144)   r     1 B$TCB

PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:270  

   Procedure DBD$FEPMAP requires 83 words for executable code.
   Procedure DBD$FEPMAP requires 64 words of local(AUTO) storage.
PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:271  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:272  
          MINI XREF LISTING

B$ALT.CODE
      9183**DCL      9183--REDEF    9184--REDEF    9184--REDEF
B$ALT.ERR
      9184**DCL      9240>>ASSIGN
B$ALT.ERR.ERR#
      9185**DCL      9185--REDEF
B$ALT.EVID
      9184**DCL      9184--REDEF    9184--REDEF
B$FEPMAP
      9194**DCL      9247<<ASSIGN
B$TCB.ALT$
      9179**DCL      9240>>ASSIGN
B$TCB$
      9189**DCL      9240>>ASSIGN
DA_MAPERR
      9126**DCL      9240<<ASSIGN   9257<<ASSIGN   9265<<ASSIGN
DA_TRTN
      9127**DCL      9234>>ASSIGN   9235<<REMEMBR  9262<<ASSIGN   9266>>UNWIND
DBD$FEPMAP$
      9125**DCL      9245<<ASSIGN   9247>>ASSIGN   9256<<ASSIGN   9264<<ASSIGN
DBD$INTCON_MAP
      9120**DCL-ENT  9250--CALL
DBD$MEMORY
      9119**DCL-ENT  9252--CALL
DBD$PPUT
      9122**DCL-ENT  9253--CALL
DBD$SFILE
      9121**DCL-ENT  9251--CALL
DBM$GETBOBCAT
      9114**DCL-ENT  9228--CALL
DBM$PACK2
      9116**DCL-ENT  9231--CALL
PL6.E3A0      #006=DBD$FEPMAP File=DBD$FMT_G.:E05TSI                             TUE 07/29/97 13:04 Page:273  
FINI
      9257**LABEL    9235--REMEMBR
FPT_FDS
      9143**DCL      9236<>CALL     9255<>CALL     9263<>CALL
FPT_FDS.V
      9143**DCL      9143--DCLINIT
FPT_GDS
      9158**DCL      9238<>CALL
FPT_GDS.V
      9158**DCL      9158--DCLINIT
FPT_GDS.V.SEGSIZE#
      9161**DCL      9232<<ASSIGN
G$BOBCAT
      9214**DCL      9228<>CALL
G$BOBCAT.MEM_HI
      9214**DCL      9231<>CALL
GDS
      9234**LABEL    9236--CALLALT
I
      9211**DCL      9246<<DOINDEX  9247>>ASSIGN
M$FDS
      5538**DCL-ENT  9236--CALL     9255--CALL     9263--CALL
M$GDS
      5538**DCL-ENT  9238--CALL
MEM_HI
      9130**DCL      9231<>CALL     9232>>ASSIGN   9246>>DOINDEX
MY_TRTN
      9129**DCL      9234<<ASSIGN   9262>>ASSIGN
VECT_DS2
      9174**DCL      9158--DCLINIT
VECT_DS2.PTR$
      9176**DCL      9245>>ASSIGN
VECT_DS2.W2
      9175**DCL      9176--REDEF

PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:274  
     1422        1        /*T***********************************************************/
     1423        2        /*T*                                                         */
     1424        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1425        4        /*T*                                                         */
     1426        5        /*T***********************************************************/
     1427        6
     1428        7        /*X* PLM=3,IND=5,ENU=0,ECU=0  */
     1429        8
     1430        9        /*F*    NAME: DBD$FEPMAP_ERR
     1431       10                PURPOSE: To report dual FEP memory allocation errors:
     1432       11        */
     1433       12        DBD$FEPMAP_ERR: PROC(MAP_PG#);
     1434       13
     1435       14        /*X* PLM=3,IND=5,ECU=0,ENU=0   */
     1436       15
     1437       16        %INCLUDE CP_6;
     1438     5575        %INCLUDE DA_FORMAT_C;
     1439     5817        %INCLUDE DB_ANLZ_M;
     1440     5984        %INCLUDE XU_MACRO_C;
     1441     9090
     1442     9091                                                /* Input parameters                   */
     1443     9092    1   DCL MAP_PG# UBIN;
     1444     9093
     1445     9094                                                /* SYMREFed data                      */
     1446     9095    1   DCL DBD$FEPMAP$ PTR SYMREF;
     1447     9096    1   DCL DAF$WRITE EPTR SYMREF;
     1448     9097
     1449     9098                                                /* BASED Structures                   */
     1450     9099        %LIST;
     1451     9100        %B$FEPMAP;
              9101    1   DCL 1 B$FEPMAP(0:0) BASED ALIGNED,
              9102    1         2 TYP UBIN BYTE CALIGNED,
              9103                                                /* 1=HHJIT   2=SFILE      3=USER      */
              9104    1         2 WHAT# UBIN BYTE CALIGNED,
              9105                                                /* INTLEVL   SFILE#       USER#       */
              9106    1         2 INDX# UBIN BYTE CALIGNED,
              9107                                                /* USR#      SFILE.SEG#   ASDT_INDX   */
PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:275  
              9108    1         2 SIZE UBIN BYTE CALIGNED;
              9109                                                /* # of pages #                       */
              9110        %EQU DBD_MAPTYP_HHJIT#=1;
              9111        %EQU DBD_MAPTYP_SFILE#=2;
              9112        %EQU DBD_MAPTYP_USER#=3;
     1452     9114        %PLIST;
     1453     9115
     1454     9116    1   DCL FEPMEM_ER_USER CHAR(0) CONSTANT INIT(
     1455     9117    1   '   Dual allocation error: page .%4ZH User .%2ZH Seg# %2D - %A Size .%4ZH');
     1456     9118
     1457     9119    1   DCL FEPMEM_ER_SFILE CHAR(0) CONSTANT INIT(
     1458     9120    1   '   Dual allocation error: page .%4ZH Sfile .%2ZH %A Size .%4ZH');
     1459     9121
     1460     9122    1   DCL FEPMEM_ER_HHJIT CHAR(0) CONSTANT INIT(
     1461     9123    1   '   Dual allocation error: page .%4ZH HHJIT-Level .%2ZH User # .%2ZH Size .%4ZH');
     1462     9124
     1463     9125    1   DCL FEPMEM_ER_UNKNOWN CHAR(0) CONSTANT INIT(
     1464     9126    1   '   Dual allocation error: page .%4ZH !!ANLZ err .%12ZO !!');
     1465     9127
     1466     9128        %LIST;
     1467     9129        %G_UASDT_NAME (FPTN=DBD_UASDT_NAME, STCLASS=CONSTANT SYMDEF);
              9130         %LSET LISTDIR='0'B;
              9138    1   DCL 1 DBD_UASDT_NAME(0:30) CHAR(8) CONSTANT SYMDEF INIT(
              9139    1     'NULLSEG ',
              9140    1     'ROS     ',
              9141    1     'DB_DS   ',
              9142    1     'LOW_MEM ',
              9143    1     'TSKTU   ',
              9144    1     'UHJIT   ',
              9145    1     'MHJIT1  ',
              9146    1     'MHJIT2  ',
              9147    1     'MON_ENT1',
              9148    1     'MON_ENT2',
              9149    1     'USR_DS1 ',
              9150    1     'USR_DS2 ',
              9151    1     'CP_DS   ',
              9152    1     'USRLAUTO',
PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:276  
              9153    1     'U_LAUTO2',
              9154    1     'U_LAUTO3',
              9155    1     'USR_IS1 ',
              9156    1     'USR_IS2 ',
              9157    1     'USR_IS3 ',
              9158    1     'USR_IS4 ',
              9159    1     'USR_IS5 ',
              9160    1     'USR_IS6 ',
              9161    1     'USR_IS7 ',
              9162    1     'DB_PROC ',
              9163    1     'CP_PROC ',
              9164    1     'USR_AUTO',
              9165    1     'USR_DS3 ',
              9166    1     'USR_DS4 ',
              9167    1     'HAND_CQ ',
              9168    1     'LIB_IS1 ',
              9169    1     'LIB_IS2 ');
     1468     9174
     1469     9175        %G_SFILE_SEG (FPTN=DBD_SFILE_SEG, STCLASS=CONSTANT SYMDEF);
              9176         %LSET LISTDIR='0'B;
              9184    1   DCL 1 DBD_SFILE_SEG(0:7) CHAR(8) CONSTANT SYMDEF INIT(
              9185    1     'SF_SEG1 ',
              9186    1     'SF_SEG2 ',
              9187    1     'SF_SEG3 ',
              9188    1     'SF_SEG4 ',
              9189    1     'SF_SEG5 ',
              9190    1     'SF_SEG6 ',
              9191    1     'SF_SEG7 ',
              9192    1     'ROS     ');
     1470     9197        %PLIST;
     1471     9198
     1472     9199        %EJECT;
PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:277  
     1473     9200    2      DO CASE(DBD$FEPMAP$->B$FEPMAP.TYP(MAP_PG#));
     1474     9201
     1475     9202    2       CASE(%DBD_MAPTYP_HHJIT#);
     1476     9203    2         CALL DAF$WRITE (VECTOR(FEPMEM_ER_HHJIT),
     1477     9204    2           VECTOR(MAP_PG#),
     1478     9205    2           VECTOR(DBD$FEPMAP$->B$FEPMAP.WHAT#(MAP_PG#)),
     1479     9206    2           VECTOR(DBD$FEPMAP$->B$FEPMAP.INDX#(MAP_PG#)),
     1480     9207    2           VECTOR(DBD$FEPMAP$->B$FEPMAP.SIZE(MAP_PG#)) );
     1481     9208
     1482     9209    2       CASE(%DBD_MAPTYP_SFILE#);
     1483     9210    2         CALL DAF$WRITE (VECTOR(FEPMEM_ER_SFILE),
     1484     9211    2           VECTOR(MAP_PG#),
     1485     9212    2           VECTOR(DBD$FEPMAP$->B$FEPMAP.WHAT#(MAP_PG#)),
     1486     9213    2           VECTOR(DBD_SFILE_SEG(DBD$FEPMAP$->B$FEPMAP.INDX#(MAP_PG#))),
     1487     9214    2           VECTOR(DBD$FEPMAP$->B$FEPMAP.SIZE(MAP_PG#)) );
     1488     9215
     1489     9216
     1490     9217    2       CASE(%DBD_MAPTYP_USER#);
     1491     9218    2         CALL DAF$WRITE (VECTOR(FEPMEM_ER_USER),
     1492     9219    2           VECTOR(MAP_PG#),
     1493     9220    2           VECTOR(DBD$FEPMAP$->B$FEPMAP.WHAT#(MAP_PG#)),
     1494     9221    2           VECTOR(DBD$FEPMAP$->B$FEPMAP.INDX#(MAP_PG#)),
     1495     9222    2           VECTOR(DBD_UASDT_NAME(DBD$FEPMAP$->B$FEPMAP.INDX#(MAP_PG#))),
     1496     9223    2           VECTOR(DBD$FEPMAP$->B$FEPMAP.SIZE(MAP_PG#)) );
     1497     9224
     1498     9225    2       CASE(ELSE);
     1499     9226    2         CALL DAF$WRITE (VECTOR(FEPMEM_ER_UNKNOWN),
     1500     9227    2           VECTOR(MAP_PG#),
     1501     9228    2           VECTOR(DBD$FEPMAP$->B$FEPMAP) );
     1502     9229
     1503     9230    2         END/*do case*/;
     1504     9231    1      RETURN;
     1505     9232    1   END DBD$FEPMAP_ERR;
     1506     9233        %EOD;

PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:278  
--  Include file information  --

   XU_MACRO_C.:E05TOU  is referenced.
   DB_ANLZ_M.:E05TOU  is referenced.
   DA_FORMAT_C.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBD$FEPMAP_ERR.

   Procedure DBD$FEPMAP_ERR requires 182 words for executable code.
   Procedure DBD$FEPMAP_ERR requires 30 words of local(AUTO) storage.

PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:279  

 Object Unit name= DBD$FEPMAP_ERR                             File name= DBD$FMT_G.:E05TOU
 UTS= JUL 29 '97 13:05:08.44 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1  RoData even  UTS    147    223  DBD$FEPMAP_ERR
    2   Proc  even  none   182    266  DBD$FEPMAP_ERR
    3  RoData even  none    17     21  DBD$FEPMAP_ERR

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes            yes      Std        1  DBD$FEPMAP_ERR

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    1    105  DBD_UASDT_NAME                     1    203  DBD_SFILE_SEG

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:280  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  DBD$FEPMAP$                           DAF$WRITE
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:281  


     1422        1        /*T***********************************************************/
     1423        2        /*T*                                                         */
     1424        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1425        4        /*T*                                                         */
     1426        5        /*T***********************************************************/
     1427        6
     1428        7        /*X* PLM=3,IND=5,ENU=0,ECU=0  */
     1429        8
     1430        9        /*F*    NAME: DBD$FEPMAP_ERR
     1431       10                PURPOSE: To report dual FEP memory allocation errors:
     1432       11        */
     1433       12        DBD$FEPMAP_ERR: PROC(MAP_PG#);

     12  2 000000   000000 700200 xent  DBD$FEPMAP_* TSX0  ! X66_AUTO_1
         2 000001   000036 000001                    ZERO    30,1

     1434       13
     1435       14        /*X* PLM=3,IND=5,ECU=0,ENU=0   */
     1436       15
     1437       16        %INCLUDE CP_6;
     1438     5575        %INCLUDE DA_FORMAT_C;
     1439     5817        %INCLUDE DB_ANLZ_M;
     1440     5984        %INCLUDE XU_MACRO_C;
     1441     9090
     1442     9091                                                /* Input parameters                   */
     1443     9092    1   DCL MAP_PG# UBIN;
     1444     9093
     1445     9094                                                /* SYMREFed data                      */
     1446     9095    1   DCL DBD$FEPMAP$ PTR SYMREF;
     1447     9096    1   DCL DAF$WRITE EPTR SYMREF;
     1448     9097
     1449     9098                                                /* BASED Structures                   */
     1450     9099        %LIST;
     1451     9100        %B$FEPMAP;
              9101    1   DCL 1 B$FEPMAP(0:0) BASED ALIGNED,
              9102    1         2 TYP UBIN BYTE CALIGNED,
PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:282  
              9103                                                /* 1=HHJIT   2=SFILE      3=USER      */
              9104    1         2 WHAT# UBIN BYTE CALIGNED,
              9105                                                /* INTLEVL   SFILE#       USER#       */
              9106    1         2 INDX# UBIN BYTE CALIGNED,
              9107                                                /* USR#      SFILE.SEG#   ASDT_INDX   */
              9108    1         2 SIZE UBIN BYTE CALIGNED;
              9109                                                /* # of pages #                       */
              9110        %EQU DBD_MAPTYP_HHJIT#=1;
              9111        %EQU DBD_MAPTYP_SFILE#=2;
              9112        %EQU DBD_MAPTYP_USER#=3;
     1452     9114        %PLIST;
     1453     9115
     1454     9116    1   DCL FEPMEM_ER_USER CHAR(0) CONSTANT INIT(
     1455     9117    1   '   Dual allocation error: page .%4ZH User .%2ZH Seg# %2D - %A Size .%4ZH');
     1456     9118
     1457     9119    1   DCL FEPMEM_ER_SFILE CHAR(0) CONSTANT INIT(
     1458     9120    1   '   Dual allocation error: page .%4ZH Sfile .%2ZH %A Size .%4ZH');
     1459     9121
     1460     9122    1   DCL FEPMEM_ER_HHJIT CHAR(0) CONSTANT INIT(
     1461     9123    1   '   Dual allocation error: page .%4ZH HHJIT-Level .%2ZH User # .%2ZH Size .%4ZH');
     1462     9124
     1463     9125    1   DCL FEPMEM_ER_UNKNOWN CHAR(0) CONSTANT INIT(
     1464     9126    1   '   Dual allocation error: page .%4ZH !!ANLZ err .%12ZO !!');
     1465     9127
     1466     9128        %LIST;
     1467     9129        %G_UASDT_NAME (FPTN=DBD_UASDT_NAME, STCLASS=CONSTANT SYMDEF);
              9130         %LSET LISTDIR='0'B;
              9138    1   DCL 1 DBD_UASDT_NAME(0:30) CHAR(8) CONSTANT SYMDEF INIT(
              9139    1     'NULLSEG ',
              9140    1     'ROS     ',
              9141    1     'DB_DS   ',
              9142    1     'LOW_MEM ',
              9143    1     'TSKTU   ',
              9144    1     'UHJIT   ',
              9145    1     'MHJIT1  ',
              9146    1     'MHJIT2  ',
              9147    1     'MON_ENT1',
PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:283  
              9148    1     'MON_ENT2',
              9149    1     'USR_DS1 ',
              9150    1     'USR_DS2 ',
              9151    1     'CP_DS   ',
              9152    1     'USRLAUTO',
              9153    1     'U_LAUTO2',
              9154    1     'U_LAUTO3',
              9155    1     'USR_IS1 ',
              9156    1     'USR_IS2 ',
              9157    1     'USR_IS3 ',
              9158    1     'USR_IS4 ',
              9159    1     'USR_IS5 ',
              9160    1     'USR_IS6 ',
              9161    1     'USR_IS7 ',
              9162    1     'DB_PROC ',
              9163    1     'CP_PROC ',
              9164    1     'USR_AUTO',
              9165    1     'USR_DS3 ',
              9166    1     'USR_DS4 ',
              9167    1     'HAND_CQ ',
              9168    1     'LIB_IS1 ',
              9169    1     'LIB_IS2 ');
     1468     9174
     1469     9175        %G_SFILE_SEG (FPTN=DBD_SFILE_SEG, STCLASS=CONSTANT SYMDEF);
              9176         %LSET LISTDIR='0'B;
              9184    1   DCL 1 DBD_SFILE_SEG(0:7) CHAR(8) CONSTANT SYMDEF INIT(
              9185    1     'SF_SEG1 ',
              9186    1     'SF_SEG2 ',
              9187    1     'SF_SEG3 ',
              9188    1     'SF_SEG4 ',
              9189    1     'SF_SEG5 ',
              9190    1     'SF_SEG6 ',
              9191    1     'SF_SEG7 ',
              9192    1     'ROS     ');
     1470     9197        %PLIST;
     1471     9198
     1472     9199        %EJECT;
PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:284  
     1473     9200    2      DO CASE(DBD$FEPMAP$->B$FEPMAP.TYP(MAP_PG#));

   9200  2 000002   200003 470500                    LDP0    @MAP_PG#,,AUTO
         2 000003   000000 720100                    LXL0    0,,PR0
         2 000004   000000 471400 xsym               LDP1    DBD$FEPMAP$
         2 000005   100000 236110                    LDQ     0,X0,PR1
         2 000006   000033 772000                    QRL     27
         2 000007   000004 116007                    CMPQ    4,DL
         2 000010   000012 602006 2                  TNC     s:9200+8,QL
         2 000011   000240 710000 2                  TRA     s:9226
         2 000012   000240 710000 2                  TRA     s:9226
         2 000013   000016 710000 2                  TRA     s:9203
         2 000014   000072 710000 2                  TRA     s:9214
         2 000015   000150 710000 2                  TRA     s:9223

     1474     9201
     1475     9202    2       CASE(%DBD_MAPTYP_HHJIT#);

     1476     9203    2         CALL DAF$WRITE (VECTOR(FEPMEM_ER_HHJIT),

   9203  2 000016   777640 235007                    LDA     -96,DL
         2 000017   200003 236100                    LDQ     @MAP_PG#,,AUTO
         2 000020   200004 757100                    STAQ    @MAP_PG#+1,,AUTO
         2 000021   177640 235007                    LDA     65440,DL
         2 000022   000000 636010                    EAQ     0,X0
         2 000023   200000 036007                    ADLQ    65536,DL
         2 000024   000000 036000 xsym               ADLQ    DBD$FEPMAP$
         2 000025   000000 720100                    LXL0    0,,PR0
         2 000026   200006 757100                    STAQ    @MAP_PG#+3,,AUTO
         2 000027   177640 235007                    LDA     65440,DL
         2 000030   000000 636010                    EAQ     0,X0
         2 000031   400000 036007                    ADLQ    -131072,DL
         2 000032   000000 036000 xsym               ADLQ    DBD$FEPMAP$
         2 000033   000000 720100                    LXL0    0,,PR0
         2 000034   200010 757100                    STAQ    @MAP_PG#+5,,AUTO
         2 000035   177640 235007                    LDA     65440,DL
         2 000036   000000 636010                    EAQ     0,X0
PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:285  
         2 000037   600000 036007                    ADLQ    -65536,DL
         2 000040   000000 036000 xsym               ADLQ    DBD$FEPMAP$
         2 000041   200014 757100                    STAQ    @MAP_PG#+9,,AUTO
         2 000042   200004 237100                    LDAQ    @MAP_PG#+1,,AUTO
         2 000043   200012 757100                    STAQ    @MAP_PG#+7,,AUTO
         2 000044   200006 237100                    LDAQ    @MAP_PG#+3,,AUTO
         2 000045   200016 757100                    STAQ    @MAP_PG#+11,,AUTO
         2 000046   200010 237100                    LDAQ    @MAP_PG#+5,,AUTO
         2 000047   200020 757100                    STAQ    @MAP_PG#+13,,AUTO
         2 000050   200014 237100                    LDAQ    @MAP_PG#+9,,AUTO
         2 000051   200022 757100                    STAQ    @MAP_PG#+15,,AUTO
         2 000052   200022 633500                    EPPR3   @MAP_PG#+15,,AUTO
         2 000053   200030 453500                    STP3    @MAP_PG#+21,,AUTO
         2 000054   200020 634500                    EPPR4   @MAP_PG#+13,,AUTO
         2 000055   200027 454500                    STP4    @MAP_PG#+20,,AUTO
         2 000056   200016 635500                    EPPR5   @MAP_PG#+11,,AUTO
         2 000057   200026 455500                    STP5    @MAP_PG#+19,,AUTO
         2 000060   200012 636500                    EPPR6   @MAP_PG#+7,,AUTO
         2 000061   200025 456500                    STP6    @MAP_PG#+18,,AUTO
         2 000062   000002 236000 3                  LDQ     2
         2 000063   200024 756100                    STQ     @MAP_PG#+17,,AUTO
         2 000064   200024 630500                    EPPR0   @MAP_PG#+17,,AUTO
         2 000065   000000 220000 xsym               LDX0    DAF$WRITE
         2 000066   000023 631400 xsym               EPPR1   B_VECTNIL+19
         2 000067   000000 701010                    TSX1    0,X0
         2 000070   000000 011000                    NOP     0
         2 000071   000265 710000 2                  TRA     s:9231

     1477     9204    2           VECTOR(MAP_PG#),
     1478     9205    2           VECTOR(DBD$FEPMAP$->B$FEPMAP.WHAT#(MAP_PG#)),
     1479     9206    2           VECTOR(DBD$FEPMAP$->B$FEPMAP.INDX#(MAP_PG#)),
     1480     9207    2           VECTOR(DBD$FEPMAP$->B$FEPMAP.SIZE(MAP_PG#)) );
     1481     9208
     1482     9209    2       CASE(%DBD_MAPTYP_SFILE#);

     1483     9210    2         CALL DAF$WRITE (VECTOR(FEPMEM_ER_SFILE),
     1484     9211    2           VECTOR(MAP_PG#),
PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:286  
     1485     9212    2           VECTOR(DBD$FEPMAP$->B$FEPMAP.WHAT#(MAP_PG#)),
     1486     9213    2           VECTOR(DBD_SFILE_SEG(DBD$FEPMAP$->B$FEPMAP.INDX#(MAP_PG#))),
     1487     9214    2           VECTOR(DBD$FEPMAP$->B$FEPMAP.SIZE(MAP_PG#)) );

   9214  2 000072   777640 235007                    LDA     -96,DL
         2 000073   200003 236100                    LDQ     @MAP_PG#,,AUTO
         2 000074   200004 757100                    STAQ    @MAP_PG#+1,,AUTO
         2 000075   177640 235007                    LDA     65440,DL
         2 000076   000000 636010                    EAQ     0,X0
         2 000077   200000 036007                    ADLQ    65536,DL
         2 000100   000000 036000 xsym               ADLQ    DBD$FEPMAP$
         2 000101   000000 720100                    LXL0    0,,PR0
         2 000102   200006 757100                    STAQ    @MAP_PG#+3,,AUTO
         2 000103   100000 236110                    LDQ     0,X0,PR1
         2 000104   000011 772000                    QRL     9
         2 000105   000777 376007                    ANQ     511,DL
         2 000106   000006 235000 3                  LDA     6
         2 000107   000023 736000                    QLS     19
         2 000110   000007 036000 3                  ADLQ    7
         2 000111   000000 720100                    LXL0    0,,PR0
         2 000112   200010 757100                    STAQ    @MAP_PG#+5,,AUTO
         2 000113   177640 235007                    LDA     65440,DL
         2 000114   000000 636010                    EAQ     0,X0
         2 000115   600000 036007                    ADLQ    -65536,DL
         2 000116   000000 036000 xsym               ADLQ    DBD$FEPMAP$
         2 000117   200014 757100                    STAQ    @MAP_PG#+9,,AUTO
         2 000120   200004 237100                    LDAQ    @MAP_PG#+1,,AUTO
         2 000121   200012 757100                    STAQ    @MAP_PG#+7,,AUTO
         2 000122   200006 237100                    LDAQ    @MAP_PG#+3,,AUTO
         2 000123   200016 757100                    STAQ    @MAP_PG#+11,,AUTO
         2 000124   200010 237100                    LDAQ    @MAP_PG#+5,,AUTO
         2 000125   200020 757100                    STAQ    @MAP_PG#+13,,AUTO
         2 000126   200014 237100                    LDAQ    @MAP_PG#+9,,AUTO
         2 000127   200022 757100                    STAQ    @MAP_PG#+15,,AUTO
         2 000130   200022 633500                    EPPR3   @MAP_PG#+15,,AUTO
         2 000131   200030 453500                    STP3    @MAP_PG#+21,,AUTO
         2 000132   200020 634500                    EPPR4   @MAP_PG#+13,,AUTO
PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:287  
         2 000133   200027 454500                    STP4    @MAP_PG#+20,,AUTO
         2 000134   200016 635500                    EPPR5   @MAP_PG#+11,,AUTO
         2 000135   200026 455500                    STP5    @MAP_PG#+19,,AUTO
         2 000136   200012 636500                    EPPR6   @MAP_PG#+7,,AUTO
         2 000137   200025 456500                    STP6    @MAP_PG#+18,,AUTO
         2 000140   000010 236000 3                  LDQ     8
         2 000141   200024 756100                    STQ     @MAP_PG#+17,,AUTO
         2 000142   200024 630500                    EPPR0   @MAP_PG#+17,,AUTO
         2 000143   000000 220000 xsym               LDX0    DAF$WRITE
         2 000144   000023 631400 xsym               EPPR1   B_VECTNIL+19
         2 000145   000000 701010                    TSX1    0,X0
         2 000146   000000 011000                    NOP     0
         2 000147   000265 710000 2                  TRA     s:9231

     1488     9215
     1489     9216
     1490     9217    2       CASE(%DBD_MAPTYP_USER#);

     1491     9218    2         CALL DAF$WRITE (VECTOR(FEPMEM_ER_USER),
     1492     9219    2           VECTOR(MAP_PG#),
     1493     9220    2           VECTOR(DBD$FEPMAP$->B$FEPMAP.WHAT#(MAP_PG#)),
     1494     9221    2           VECTOR(DBD$FEPMAP$->B$FEPMAP.INDX#(MAP_PG#)),
     1495     9222    2           VECTOR(DBD_UASDT_NAME(DBD$FEPMAP$->B$FEPMAP.INDX#(MAP_PG#))),
     1496     9223    2           VECTOR(DBD$FEPMAP$->B$FEPMAP.SIZE(MAP_PG#)) );

   9223  2 000150   777640 235007                    LDA     -96,DL
         2 000151   200003 236100                    LDQ     @MAP_PG#,,AUTO
         2 000152   200004 757100                    STAQ    @MAP_PG#+1,,AUTO
         2 000153   177640 235007                    LDA     65440,DL
         2 000154   000000 636010                    EAQ     0,X0
         2 000155   200000 036007                    ADLQ    65536,DL
         2 000156   000000 036000 xsym               ADLQ    DBD$FEPMAP$
         2 000157   000000 720100                    LXL0    0,,PR0
         2 000160   200006 757100                    STAQ    @MAP_PG#+3,,AUTO
         2 000161   177640 235007                    LDA     65440,DL
         2 000162   000000 636010                    EAQ     0,X0
         2 000163   400000 036007                    ADLQ    -131072,DL
PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:288  
         2 000164   000000 036000 xsym               ADLQ    DBD$FEPMAP$
         2 000165   000000 720100                    LXL0    0,,PR0
         2 000166   200010 757100                    STAQ    @MAP_PG#+5,,AUTO
         2 000167   100000 236110                    LDQ     0,X0,PR1
         2 000170   000011 772000                    QRL     9
         2 000171   000777 376007                    ANQ     511,DL
         2 000172   000006 235000 3                  LDA     6
         2 000173   000023 736000                    QLS     19
         2 000174   000014 036000 3                  ADLQ    12
         2 000175   000000 720100                    LXL0    0,,PR0
         2 000176   200012 757100                    STAQ    @MAP_PG#+7,,AUTO
         2 000177   177640 235007                    LDA     65440,DL
         2 000200   000000 636010                    EAQ     0,X0
         2 000201   600000 036007                    ADLQ    -65536,DL
         2 000202   000000 036000 xsym               ADLQ    DBD$FEPMAP$
         2 000203   200016 757100                    STAQ    @MAP_PG#+11,,AUTO
         2 000204   200004 237100                    LDAQ    @MAP_PG#+1,,AUTO
         2 000205   200014 757100                    STAQ    @MAP_PG#+9,,AUTO
         2 000206   200006 237100                    LDAQ    @MAP_PG#+3,,AUTO
         2 000207   200020 757100                    STAQ    @MAP_PG#+13,,AUTO
         2 000210   200010 237100                    LDAQ    @MAP_PG#+5,,AUTO
         2 000211   200022 757100                    STAQ    @MAP_PG#+15,,AUTO
         2 000212   200012 237100                    LDAQ    @MAP_PG#+7,,AUTO
         2 000213   200024 757100                    STAQ    @MAP_PG#+17,,AUTO
         2 000214   200016 237100                    LDAQ    @MAP_PG#+11,,AUTO
         2 000215   200026 757100                    STAQ    @MAP_PG#+19,,AUTO
         2 000216   200026 633500                    EPPR3   @MAP_PG#+19,,AUTO
         2 000217   200035 453500                    STP3    @MAP_PG#+26,,AUTO
         2 000220   200024 634500                    EPPR4   @MAP_PG#+17,,AUTO
         2 000221   200034 454500                    STP4    @MAP_PG#+25,,AUTO
         2 000222   200022 635500                    EPPR5   @MAP_PG#+15,,AUTO
         2 000223   200033 455500                    STP5    @MAP_PG#+24,,AUTO
         2 000224   200020 636500                    EPPR6   @MAP_PG#+13,,AUTO
         2 000225   200032 456500                    STP6    @MAP_PG#+23,,AUTO
         2 000226   200014 637500                    EPPR7   @MAP_PG#+9,,AUTO
         2 000227   200031 457500                    STP7    @MAP_PG#+22,,AUTO
         2 000230   000015 236000 3                  LDQ     13
PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:289  
         2 000231   200030 756100                    STQ     @MAP_PG#+21,,AUTO
         2 000232   200030 630500                    EPPR0   @MAP_PG#+21,,AUTO
         2 000233   000000 220000 xsym               LDX0    DAF$WRITE
         2 000234   000024 631400 xsym               EPPR1   B_VECTNIL+20
         2 000235   000000 701010                    TSX1    0,X0
         2 000236   000000 011000                    NOP     0
         2 000237   000265 710000 2                  TRA     s:9231

     1497     9224
     1498     9225    2       CASE(ELSE);

     1499     9226    2         CALL DAF$WRITE (VECTOR(FEPMEM_ER_UNKNOWN),

   9226  2 000240   777640 235007                    LDA     -96,DL
         2 000241   200003 236100                    LDQ     @MAP_PG#,,AUTO
         2 000242   200004 757100                    STAQ    @MAP_PG#+1,,AUTO
         2 000243   777640 235007                    LDA     -96,DL
         2 000244   000000 236000 xsym               LDQ     DBD$FEPMAP$
         2 000245   200010 757100                    STAQ    @MAP_PG#+5,,AUTO
         2 000246   200004 237100                    LDAQ    @MAP_PG#+1,,AUTO
         2 000247   200006 757100                    STAQ    @MAP_PG#+3,,AUTO
         2 000250   200010 237100                    LDAQ    @MAP_PG#+5,,AUTO
         2 000251   200012 757100                    STAQ    @MAP_PG#+7,,AUTO
         2 000252   200012 633500                    EPPR3   @MAP_PG#+7,,AUTO
         2 000253   200016 453500                    STP3    @MAP_PG#+11,,AUTO
         2 000254   200006 634500                    EPPR4   @MAP_PG#+3,,AUTO
         2 000255   200015 454500                    STP4    @MAP_PG#+10,,AUTO
         2 000256   000020 236000 3                  LDQ     16
         2 000257   200014 756100                    STQ     @MAP_PG#+9,,AUTO
         2 000260   200014 630500                    EPPR0   @MAP_PG#+9,,AUTO
         2 000261   000000 220000 xsym               LDX0    DAF$WRITE
         2 000262   000021 631400 xsym               EPPR1   B_VECTNIL+17
         2 000263   000000 701010                    TSX1    0,X0
         2 000264   000000 011000                    NOP     0

     1500     9227    2           VECTOR(MAP_PG#),
     1501     9228    2           VECTOR(DBD$FEPMAP$->B$FEPMAP) );
PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:290  
     1502     9229
     1503     9230    2         END/*do case*/;

     1504     9231    1      RETURN;

   9231  2 000265   000000 702200 xent               TSX2  ! X66_ARET
     1505     9232    1   END DBD$FEPMAP_ERR;
     1506     9233        %EOD;

PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:291  
--  Include file information  --

   XU_MACRO_C.:E05TOU  is referenced.
   DB_ANLZ_M.:E05TOU  is referenced.
   DA_FORMAT_C.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBD$FEPMAP_ERR.
PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:292  

 **** Variables and constants ****

  ****  Section 001 RoData DBD$FEPMAP_ERR

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

   203-0-0/c CHAR(8)     r     1 DBD_SFILE_SEG(0:7)
   105-0-0/c CHAR(8)     r     1 DBD_UASDT_NAME(0:30)
    42-0-0/c CHAR(78)    r     1 FEPMEM_ER_HHJIT           22-0-0/c CHAR(62)    r     1 FEPMEM_ER_SFILE
    66-0-0/c CHAR(57)    r     1 FEPMEM_ER_UNKNOWN          0-0-0/c CHAR(72)    r     1 FEPMEM_ER_USER

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @MAP_PG#                  *0-0-0/w UBIN        r     1 MAP_PG#

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w EPTR        r     1 DAF$WRITE                  0-0-0/w PTR         r     1 DBD$FEPMAP$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC        r     1 B$FEPMAP(0:0)


   Procedure DBD$FEPMAP_ERR requires 182 words for executable code.
   Procedure DBD$FEPMAP_ERR requires 30 words of local(AUTO) storage.
PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:293  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #007=DBD$FEPMAP_ERR File=DBD$FMT_G.:E05TSI                         TUE 07/29/97 13:05 Page:294  
          MINI XREF LISTING

B$FEPMAP
      9101**DCL      9226--CALL
B$FEPMAP.INDX#
      9106**DCL      9203--CALL     9214>>CALL     9223--CALL     9223>>CALL
B$FEPMAP.SIZE
      9108**DCL      9203--CALL     9214--CALL     9223--CALL
B$FEPMAP.TYP
      9102**DCL      9200>>DOCASE
B$FEPMAP.WHAT#
      9104**DCL      9203--CALL     9214--CALL     9223--CALL
DAF$WRITE
      9096**DCL      9203>>CALL     9214>>CALL     9223>>CALL     9226>>CALL
DBD$FEPMAP$
      9095**DCL      9200>>DOCASE   9203>>CALL     9203>>CALL     9203>>CALL     9214>>CALL     9214>>CALL
      9214>>CALL     9223>>CALL     9223>>CALL     9223>>CALL     9223>>CALL     9226>>CALL
DBD_SFILE_SEG
      9184**DCL      9214--CALL
DBD_UASDT_NAME
      9138**DCL      9223--CALL
FEPMEM_ER_HHJIT
      9122**DCL      9203--CALL
FEPMEM_ER_SFILE
      9119**DCL      9214--CALL
FEPMEM_ER_UNKNOWN
      9125**DCL      9226--CALL
FEPMEM_ER_USER
      9116**DCL      9223--CALL
MAP_PG#
      9092**DCL        12--PROC     9200>>DOCASE   9203--CALL     9203>>CALL     9203>>CALL     9203>>CALL
      9214--CALL     9214>>CALL     9214>>CALL     9214>>CALL     9223--CALL     9223>>CALL     9223>>CALL
      9223>>CALL     9223>>CALL     9226--CALL

PL6.E3A0      #008=DBD$EVB File=DBD$FMT_G.:E05TSI                                TUE 07/29/97 13:05 Page:295  
     1507        1        /*T***********************************************************/
     1508        2        /*T*                                                         */
     1509        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1510        4        /*T*                                                         */
     1511        5        /*T***********************************************************/
     1512        6        /*F*    NAME: DBD$EVB
     1513        7                PURPOSE: To process the EVB command for FEPs.
     1514        8
     1515        9        */
     1516       10        DBD$EVB: PROC;
     1517       11
     1518       12        /*X* PLM=3,IND=5,ECU=0,ENU=0   */
     1519       13
     1520       14        %INCLUDE CP_6;
     1521     5573        %INCLUDE G$BOBCAT_M;
     1522     5593        %INCLUDE GH_SCHD_M;
     1523     5737        %INCLUDE GH_SCHD_E;
     1524     5833        %INCLUDE DB_ANLZ_M;
     1525     6000        %INCLUDE DA_FORMAT_C;
     1526     6242        %INCLUDE XU_MACRO_C;
     1527     9348
     1528     9349        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS=AUTO);
     1529     9362
     1530     9363    1   DCL DAF$INIT ENTRY(1) ALTRET;
     1531     9364    1   DCL DAF$WRITE EPTR SYMREF;
     1532     9365    1   DCL DBM$GETMEM ENTRY(10) ALTRET;
     1533     9366    1   DCL DBM$PACK1 ENTRY(2);
     1534     9367    1   DCL DBM$PACK2 ENTRY(2);
     1535     9368    1   DCL DBM$PACK4 ENTRY(2);
     1536     9369    1   DCL DBM$GETBOBCAT ENTRY(1) ALTRET;
     1537     9370
     1538     9371    1   DCL BLANK_LINE CHAR(4) SYMREF;
     1539     9372
     1540     9373        %G_EVBUF (FPTN=G_EVBUF, STCLASS=STATIC);
     1541     9381
     1542     9382        %REPORT (NAME=EVB_RPT1,TRUNC=YES,HEADER=YES,TITLE='FEP Event Buffer');
     1543     9448
PL6.E3A0      #008=DBD$EVB File=DBD$FMT_G.:E05TSI                                TUE 07/29/97 13:05 Page:296  
     1544     9449        %HEADER (LAST=NO,TEXT=
     1545     9450        'User State Event  RFU Time Stamp');
     1546     9492
     1547     9493        %HEADER (TEXT=
     1548     9494        '---- ----- ------ --- ---------');
     1549     9536
     1550     9537    1   DCL 1 EVB_FMT3 CONSTANT ,
     1551     9538    1         2 * CHAR(0) INIT('%9N=%9N.1=%9N.2=%9N.3='), /* load usr,evt,stt,port    */
     1552     9539    1         2 * CHAR(0) INIT('%#[%.1#[ Intrtn to HJIT '),
     1553     9540    1         2 * CHAR(0) INIT('%1? Interrupt from %].%2.2#KZH%2.3#KZH'),
     1554     9541    1         2 * CHAR(0) INIT('%?.%2.#KZH  '),
     1555     9542    1         2 * CHAR(0) INIT(%CONCAT('%1.2#:',BINCHAR(GH_NULL),'?[%4.2#KD')),
     1556     9543    1         2 * CHAR(0) INIT('%?%2.2#P%4.4A%]  '),
     1557     9544    1         2 * CHAR(0) INIT(%CONCAT('%1.1#:',BINCHAR(GH_EVABRTEX),'?[%6.1#KD')),
     1558     9545    1         2 * CHAR(0) INIT('%?%3..1#:6*P%6.6A%]  .%2.3#KZH%] '),
     1559     9546    1         2 * CHAR(0) INIT('%1.1P.%@8.32ZH%1Q');
     1560     9547
     1561     9548        %G_STTTXT;
     1562     9565        %G_EVENT_TXT;
     1563     9583
     1564     9584    1   DCL I UBIN;
     1565     9585    1   DCL EVB$ UBIN;
     1566     9586    1   DCL THIS_EVB$ UBIN;
     1567     9587    1   DCL EVB_SIZE UBIN;
     1568     9588    1   DCL EVBUF# UBIN;
     1569     9589    1   DCL LAST_TIME UBIN;
     1570     9590
     1571     9591        %EJECT;
PL6.E3A0      #008=DBD$EVB File=DBD$FMT_G.:E05TSI                                TUE 07/29/97 13:05 Page:297  
     1572     9592    1      CALL DAF$INIT(EVB_RPT1);
     1573     9593
     1574     9594    1      CALL DBM$GETBOBCAT(G$BOBCAT)
     1575     9595    2      WHENALTRETURN DO; RETURN; END;
     1576     9596
     1577     9597    1      CALL DBM$PACK4(G$BOBCAT.EVBUF$,EVB$);
     1578     9598    1      CALL DBM$PACK2(G$BOBCAT.EVBUF#,EVBUF#);
     1579     9599
     1580     9600    1      EVB_SIZE = (SIZEC(G_EVBUF)+1) / 2;
     1581     9601    1      LAST_TIME = 0;
     1582     9602
     1583     9603    2      DO I=0 TO EVBUF#;
     1584     9604    2           THIS_EVB$ = EVB$ + (EVB_SIZE * I);
     1585     9605    2           CALL DBM$GETMEM(THIS_EVB$,G_EVBUF,0,SIZEC(G_EVBUF),,SIZEC(G_EVBUF))
     1586     9606    3           WHENALTRETURN DO; RETURN; END;
     1587     9607
     1588     9608
     1589     9609    2           IF G_EVBUF.TIME < LAST_TIME
     1590     9610    2           THEN CALL DAF$WRITE(VECTOR(BLANK_LINE));
     1591     9611    2           LAST_TIME = G_EVBUF.TIME;
     1592     9612
     1593     9613    2           CALL DAF$WRITE(VECTOR(EVB_FMT3), VECTOR(G_EVBUF),
     1594     9614    2             VECTOR(G_STTTXT), VECTOR(G_EVENT_TXT));
     1595     9615    2           END/*do I=0 to 99*/;
     1596     9616
     1597     9617    1      RETURN;
     1598     9618    1   END DBD$EVB;

PL6.E3A0      #008=DBD$EVB File=DBD$FMT_G.:E05TSI                                TUE 07/29/97 13:05 Page:298  
--  Include file information  --

   XU_MACRO_C.:E05TOU  is referenced.
   DA_FORMAT_C.:E05TOU  is referenced.
   DB_ANLZ_M.:E05TOU  is referenced.
   GH_SCHD_E.:E05TOU  is referenced.
   GH_SCHD_M.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBD$EVB.

   Procedure DBD$EVB requires 78 words for executable code.
   Procedure DBD$EVB requires 68 words of local(AUTO) storage.

    No errors detected in file DBD$FMT_G.:E05TSI    .

PL6.E3A0      #008=DBD$EVB File=DBD$FMT_G.:E05TSI                                TUE 07/29/97 13:05 Page:299  

 Object Unit name= DBD$EVB                                    File name= DBD$FMT_G.:E05TOU
 UTS= JUL 29 '97 13:05:21.08 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none    40     50  DBD$EVB
    2  RoData even  UTS    142    216  DBD$EVB
    3   Proc  even  none    78    116  DBD$EVB
    4  RoData even  none    22     26  DBD$EVB

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes            yes      Std        0  DBD$EVB

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       1 DAF$INIT
         yes           Std       2 DBM$PACK4
         yes           Std       2 DBM$PACK2
 yes     yes           Std      10 DBM$GETMEM
 yes     yes           Std       1 DBM$GETBOBCAT
                       nStd      0 X66_AUTO_0
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
PL6.E3A0      #008=DBD$EVB File=DBD$FMT_G.:E05TSI                                TUE 07/29/97 13:05 Page:300  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  DAF$WRITE                             BLANK_LINE
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #008=DBD$EVB File=DBD$FMT_G.:E05TSI                                TUE 07/29/97 13:05 Page:301  


     1507        1        /*T***********************************************************/
     1508        2        /*T*                                                         */
     1509        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1510        4        /*T*                                                         */
     1511        5        /*T***********************************************************/
     1512        6        /*F*    NAME: DBD$EVB
     1513        7                PURPOSE: To process the EVB command for FEPs.
     1514        8
     1515        9        */
     1516       10        DBD$EVB: PROC;

     10  3 000000   000000 700200 xent  DBD$EVB      TSX0  ! X66_AUTO_0
         3 000001   000104 000000                    ZERO    68,0

     1517       11
     1518       12        /*X* PLM=3,IND=5,ECU=0,ENU=0   */
     1519       13
     1520       14        %INCLUDE CP_6;
     1521     5573        %INCLUDE G$BOBCAT_M;
     1522     5593        %INCLUDE GH_SCHD_M;
     1523     5737        %INCLUDE GH_SCHD_E;
     1524     5833        %INCLUDE DB_ANLZ_M;
     1525     6000        %INCLUDE DA_FORMAT_C;
     1526     6242        %INCLUDE XU_MACRO_C;
     1527     9348
     1528     9349        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS=AUTO);
     1529     9362
     1530     9363    1   DCL DAF$INIT ENTRY(1) ALTRET;
     1531     9364    1   DCL DAF$WRITE EPTR SYMREF;
     1532     9365    1   DCL DBM$GETMEM ENTRY(10) ALTRET;
     1533     9366    1   DCL DBM$PACK1 ENTRY(2);
     1534     9367    1   DCL DBM$PACK2 ENTRY(2);
     1535     9368    1   DCL DBM$PACK4 ENTRY(2);
     1536     9369    1   DCL DBM$GETBOBCAT ENTRY(1) ALTRET;
     1537     9370
     1538     9371    1   DCL BLANK_LINE CHAR(4) SYMREF;
PL6.E3A0      #008=DBD$EVB File=DBD$FMT_G.:E05TSI                                TUE 07/29/97 13:05 Page:302  
     1539     9372
     1540     9373        %G_EVBUF (FPTN=G_EVBUF, STCLASS=STATIC);
     1541     9381
     1542     9382        %REPORT (NAME=EVB_RPT1,TRUNC=YES,HEADER=YES,TITLE='FEP Event Buffer');
     1543     9448
     1544     9449        %HEADER (LAST=NO,TEXT=
     1545     9450        'User State Event  RFU Time Stamp');
     1546     9492
     1547     9493        %HEADER (TEXT=
     1548     9494        '---- ----- ------ --- ---------');
     1549     9536
     1550     9537    1   DCL 1 EVB_FMT3 CONSTANT ,
     1551     9538    1         2 * CHAR(0) INIT('%9N=%9N.1=%9N.2=%9N.3='), /* load usr,evt,stt,port    */
     1552     9539    1         2 * CHAR(0) INIT('%#[%.1#[ Intrtn to HJIT '),
     1553     9540    1         2 * CHAR(0) INIT('%1? Interrupt from %].%2.2#KZH%2.3#KZH'),
     1554     9541    1         2 * CHAR(0) INIT('%?.%2.#KZH  '),
     1555     9542    1         2 * CHAR(0) INIT(%CONCAT('%1.2#:',BINCHAR(GH_NULL),'?[%4.2#KD')),
     1556     9543    1         2 * CHAR(0) INIT('%?%2.2#P%4.4A%]  '),
     1557     9544    1         2 * CHAR(0) INIT(%CONCAT('%1.1#:',BINCHAR(GH_EVABRTEX),'?[%6.1#KD')),
     1558     9545    1         2 * CHAR(0) INIT('%?%3..1#:6*P%6.6A%]  .%2.3#KZH%] '),
     1559     9546    1         2 * CHAR(0) INIT('%1.1P.%@8.32ZH%1Q');
     1560     9547
     1561     9548        %G_STTTXT;
     1562     9565        %G_EVENT_TXT;
     1563     9583
     1564     9584    1   DCL I UBIN;
     1565     9585    1   DCL EVB$ UBIN;
     1566     9586    1   DCL THIS_EVB$ UBIN;
     1567     9587    1   DCL EVB_SIZE UBIN;
     1568     9588    1   DCL EVBUF# UBIN;
     1569     9589    1   DCL LAST_TIME UBIN;
     1570     9590
     1571     9591        %EJECT;
PL6.E3A0      #008=DBD$EVB File=DBD$FMT_G.:E05TSI                                TUE 07/29/97 13:05 Page:303  
     1572     9592    1      CALL DAF$INIT(EVB_RPT1);

   9592  3 000002   000000 630400 4                  EPPR0   0
         3 000003   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000004   000000 701000 xent               TSX1    DAF$INIT
         3 000005   000000 011000                    NOP     0

     1573     9593
     1574     9594    1      CALL DBM$GETBOBCAT(G$BOBCAT)

   9594  3 000006   200003 630500                    EPPR0   G$BOBCAT,,AUTO
         3 000007   200076 450500                    STP0    LAST_TIME+1,,AUTO
         3 000010   200076 630500                    EPPR0   LAST_TIME+1,,AUTO
         3 000011   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000012   000000 701000 xent               TSX1    DBM$GETBOBCAT
         3 000013   000015 702000 3                  TSX2    s:9595
         3 000014   000016 710000 3                  TRA     s:9597

     1575     9595    2      WHENALTRETURN DO; RETURN; END;

   9595  3 000015   000000 702200 xent               TSX2  ! X66_ARET

     1576     9596
     1577     9597    1      CALL DBM$PACK4(G$BOBCAT.EVBUF$,EVB$);

   9597  3 000016   200071 630500                    EPPR0   EVB$,,AUTO
         3 000017   200077 450500                    STP0    LAST_TIME+2,,AUTO
         3 000020   200050 631500                    EPPR1   G$BOBCAT+37,,AUTO
         3 000021   200076 451500                    STP1    LAST_TIME+1,,AUTO
         3 000022   200076 630500                    EPPR0   LAST_TIME+1,,AUTO
         3 000023   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000024   000000 701000 xent               TSX1    DBM$PACK4
         3 000025   000000 011000                    NOP     0

     1578     9598    1      CALL DBM$PACK2(G$BOBCAT.EVBUF#,EVBUF#);

   9598  3 000026   200074 630500                    EPPR0   EVBUF#,,AUTO
PL6.E3A0      #008=DBD$EVB File=DBD$FMT_G.:E05TSI                                TUE 07/29/97 13:05 Page:304  
         3 000027   200077 450500                    STP0    LAST_TIME+2,,AUTO
         3 000030   200051 631500                    EPPR1   G$BOBCAT+38,,AUTO
         3 000031   200076 451500                    STP1    LAST_TIME+1,,AUTO
         3 000032   200076 630500                    EPPR0   LAST_TIME+1,,AUTO
         3 000033   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000034   000000 701000 xent               TSX1    DBM$PACK2
         3 000035   000000 011000                    NOP     0

     1579     9599
     1580     9600    1      EVB_SIZE = (SIZEC(G_EVBUF)+1) / 2;

   9600  3 000036   000004 235007                    LDA     4,DL
         3 000037   200073 755100                    STA     EVB_SIZE,,AUTO

     1581     9601    1      LAST_TIME = 0;

   9601  3 000040   200075 450100                    STZ     LAST_TIME,,AUTO

     1582     9602
     1583     9603    2      DO I=0 TO EVBUF#;

   9603  3 000041   200070 450100                    STZ     I,,AUTO
         3 000042   000112 710000 3                  TRA     s:9615+3

     1584     9604    2           THIS_EVB$ = EVB$ + (EVB_SIZE * I);

   9604  3 000043   200073 236100                    LDQ     EVB_SIZE,,AUTO
         3 000044   200070 402100                    MPY     I,,AUTO
         3 000045   200071 036100                    ADLQ    EVB$,,AUTO
         3 000046   200072 756100                    STQ     THIS_EVB$,,AUTO

     1585     9605    2           CALL DBM$GETMEM(THIS_EVB$,G_EVBUF,0,SIZEC(G_EVBUF),,SIZEC(G_EVBUF))

   9605  3 000047   000001 236000 4                  LDQ     1
         3 000050   000001 235000 xsym               LDA     B_VECTNIL+1
         3 000051   200102 757100                    STAQ    LAST_TIME+5,,AUTO
         3 000052   000002 237000 4                  LDAQ    2
PL6.E3A0      #008=DBD$EVB File=DBD$FMT_G.:E05TSI                                TUE 07/29/97 13:05 Page:305  
         3 000053   200100 757100                    STAQ    LAST_TIME+3,,AUTO
         3 000054   000004 236000 4                  LDQ     4
         3 000055   200077 756100                    STQ     LAST_TIME+2,,AUTO
         3 000056   200072 630500                    EPPR0   THIS_EVB$,,AUTO
         3 000057   200076 450500                    STP0    LAST_TIME+1,,AUTO
         3 000060   200076 630500                    EPPR0   LAST_TIME+1,,AUTO
         3 000061   000024 631400 xsym               EPPR1   B_VECTNIL+20
         3 000062   000000 701000 xent               TSX1    DBM$GETMEM
         3 000063   000065 702000 3                  TSX2    s:9606
         3 000064   000066 710000 3                  TRA     s:9609

     1586     9606    3           WHENALTRETURN DO; RETURN; END;

   9606  3 000065   000000 702200 xent               TSX2  ! X66_ARET

     1587     9607
     1588     9608
     1589     9609    2           IF G_EVBUF.TIME < LAST_TIME

   9609  3 000066   000001 236000 1                  LDQ     G_EVBUF+1
         3 000067   000004 772000                    QRL     4
         3 000070   200075 116100                    CMPQ    LAST_TIME,,AUTO
         3 000071   000077 603000 3                  TRC     s:9611

     1590     9610    2           THEN CALL DAF$WRITE(VECTOR(BLANK_LINE));

   9610  3 000072   000010 630400 4                  EPPR0   8
         3 000073   000000 220000 xsym               LDX0    DAF$WRITE
         3 000074   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000075   000000 701010                    TSX1    0,X0
         3 000076   000000 011000                    NOP     0

     1591     9611    2           LAST_TIME = G_EVBUF.TIME;

   9611  3 000077   000001 236000 1                  LDQ     G_EVBUF+1
         3 000100   000004 772000                    QRL     4
         3 000101   200075 756100                    STQ     LAST_TIME,,AUTO
PL6.E3A0      #008=DBD$EVB File=DBD$FMT_G.:E05TSI                                TUE 07/29/97 13:05 Page:306  

     1592     9612
     1593     9613    2           CALL DAF$WRITE(VECTOR(EVB_FMT3), VECTOR(G_EVBUF),

   9613  3 000102   000022 630400 4                  EPPR0   18
         3 000103   000000 220000 xsym               LDX0    DAF$WRITE
         3 000104   000022 631400 xsym               EPPR1   B_VECTNIL+18
         3 000105   000000 701010                    TSX1    0,X0
         3 000106   000000 011000                    NOP     0

     1594     9614    2             VECTOR(G_STTTXT), VECTOR(G_EVENT_TXT));
     1595     9615    2           END/*do I=0 to 99*/;

   9615  3 000107   200070 235100                    LDA     I,,AUTO
         3 000110   000001 035007                    ADLA    1,DL
         3 000111   200070 755100                    STA     I,,AUTO
         3 000112   200074 236100                    LDQ     EVBUF#,,AUTO
         3 000113   200070 116100                    CMPQ    I,,AUTO
         3 000114   000043 603000 3                  TRC     s:9604

     1596     9616
     1597     9617    1      RETURN;

   9617  3 000115   000000 702200 xent               TSX2  ! X66_ARET
     1598     9618    1   END DBD$EVB;

PL6.E3A0      #008=DBD$EVB File=DBD$FMT_G.:E05TSI                                TUE 07/29/97 13:05 Page:307  
--  Include file information  --

   XU_MACRO_C.:E05TOU  is referenced.
   DA_FORMAT_C.:E05TOU  is referenced.
   DB_ANLZ_M.:E05TOU  is referenced.
   GH_SCHD_E.:E05TOU  is referenced.
   GH_SCHD_M.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure DBD$EVB.
PL6.E3A0      #008=DBD$EVB File=DBD$FMT_G.:E05TSI                                TUE 07/29/97 13:05 Page:308  

 **** Variables and constants ****

  ****  Section 001  Data  DBD$EVB

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     2-0-0/w STRC(288)   r     1 EVB_RPT1                  17-0-0/w STRC(144)   r     1 EVB_RPT1HD00
    34-0-0/w STRC(144)   r     1 EVB_RPT1HD01              12-0-0/c STRC(153)   r     1 EVB_RPT1TX00
    23-0-0/c STRC(297)   r     1 EVB_RPT1TX01              40-0-0/c STRC(288)   r     1 EVB_RPT1TX02
     0-0-0/c STRC(72)    r     1 G_EVBUF

  ****  Section 002 RoData DBD$EVB

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c STRC(1773)  r     1 EVB_FMT3
   122-0-0/c CHAR(6)     r     1 G_EVENT_TXT(0:39)
    62-0-0/c CHAR(4)     r     1 G_STTTXT(0:31)

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    71-0-0/w UBIN        r     1 EVB$                      74-0-0/w UBIN        r     1 EVBUF#
    73-0-0/w UBIN        r     1 EVB_SIZE                   3-0-0/w STRC(1908)  r     1 G$BOBCAT
    70-0-0/w UBIN        r     1 I                         75-0-0/w UBIN        r     1 LAST_TIME
    72-0-0/w UBIN        r     1 THIS_EVB$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(4)     r     1 BLANK_LINE                 0-0-0/w EPTR        r     1 DAF$WRITE
PL6.E3A0      #008=DBD$EVB File=DBD$FMT_G.:E05TSI                                TUE 07/29/97 13:05 Page:309  


   Procedure DBD$EVB requires 78 words for executable code.
   Procedure DBD$EVB requires 68 words of local(AUTO) storage.

    No errors detected in file DBD$FMT_G.:E05TSI    .
PL6.E3A0      #008=DBD$EVB File=DBD$FMT_G.:E05TSI                                TUE 07/29/97 13:05 Page:310  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #008=DBD$EVB File=DBD$FMT_G.:E05TSI                                TUE 07/29/97 13:05 Page:311  
          MINI XREF LISTING

BLANK_LINE
      9371**DCL      9610--CALL
DAF$INIT
      9363**DCL-ENT  9592--CALL
DAF$WRITE
      9364**DCL      9610>>CALL     9613>>CALL
DBM$GETBOBCAT
      9369**DCL-ENT  9594--CALL
DBM$GETMEM
      9365**DCL-ENT  9605--CALL
DBM$PACK2
      9367**DCL-ENT  9598--CALL
DBM$PACK4
      9368**DCL-ENT  9597--CALL
EVB$
      9585**DCL      9597<>CALL     9604>>ASSIGN
EVBUF#
      9588**DCL      9598<>CALL     9603>>DOINDEX
EVB_FMT3
      9537**DCL      9613--CALL
EVB_RPT1
      9399**DCL      9592<>CALL
EVB_RPT1HD00
      9467**DCL      9434--DCLINIT
EVB_RPT1HD01
      9511**DCL      9482--DCLINIT
EVB_RPT1TX00
      9442**DCL      9429--DCLINIT
EVB_RPT1TX01
      9485**DCL      9475--DCLINIT
EVB_RPT1TX02
      9529**DCL      9519--DCLINIT
PL6.E3A0      #008=DBD$EVB File=DBD$FMT_G.:E05TSI                                TUE 07/29/97 13:05 Page:312  
EVB_SIZE
      9587**DCL      9600<<ASSIGN   9604>>ASSIGN
G$BOBCAT
      9350**DCL      9594<>CALL
G$BOBCAT.EVBUF#
      9359**DCL      9598<>CALL
G$BOBCAT.EVBUF$
      9358**DCL      9597<>CALL
G_EVBUF
      9378**DCL      9600--ASSIGN   9605<>CALL     9605--CALL     9605--CALL     9613--CALL
G_EVBUF.TIME
      9378**DCL      9609>>IF       9611>>ASSIGN
G_EVENT_TXT
      9578**DCL      9613--CALL
G_STTTXT
      9561**DCL      9613--CALL
I
      9584**DCL      9603<<DOINDEX  9604>>ASSIGN
LAST_TIME
      9589**DCL      9601<<ASSIGN   9609>>IF       9611<<ASSIGN
THIS_EVB$
      9586**DCL      9604<<ASSIGN   9605<>CALL
