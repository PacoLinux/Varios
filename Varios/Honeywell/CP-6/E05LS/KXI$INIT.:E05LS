VERSION E05

PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:1    
        1        1        /*M* KXI$INIT - Initialization code for HDLC   */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*   PLM = 4, IND=3, CTI=3, DCI=6, IAD=0, DTI=6, AND=Y, CSI=3, THI=3, STI=3, DMC=Y
                 7         */
        8        8        /*P*  NAME:    KXI$INIT
        9        9              PURPOSE: Initialization code for the X.25 handler.  This
       10       10                       routine establishes the interfaces to KHA and VDH,
       11       11                       initializes the IO buddy pool, sets up the interrupt
       12       12                       levels, and calls VDH o start the scan of the RCQ.
       13       13        */
       14       14
       15       15        KXI$INIT: PROC MAIN;
       16       16        %EJECT;
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:2    
       17       17        /*****************************************************************
       18       18        *                                                                *
       19       19        *                           Include files                        *
       20       20        *                                                                *
       21       21        *****************************************************************/
       22       22
       23       23        %INCLUDE G_JIT_M;
       24      288        %G$JIT_E;
       25      350        %INCLUDE K_ID_E;
       26      400        %K#ENTID_E;
       27      419        %K#LYRID_E;
       28      426        %INCLUDE KL_MACRO_C;
       29     3778        %INCLUDE KL_AFCN_C;
       30     3879        %INCLUDE LCP_6;
       31     8158        %INCLUDE KH_MACRO_C;
       32     8901        %INCLUDE KL_CONTROL_C;
       33     9281        %INCLUDE KV$VDH;
       34     9712        %INCLUDE KV$GLB;
       35    10131        %INCLUDE KV_GLBCNS_E;
       36    10472        %KV#CQ_HNDID_E;
       37    10477
       38    10478        %INCLUDE KX_EQUS_E;
       39    10917        %INCLUDE KX_PERR_C;
       40    11046        %INCLUDE KX_SCODE_C;
       41    11112        %INCLUDE KXX_MACROS_M;
       42    11454        %INCLUDE KX_DATA_C;
       43    11522        %INCLUDE KX_MACROS_M;
       44    12293        %INCLUDE G$BOBCAT_M;
       45    12313        %INCLUDE GM_VIRTUAL_E;
       46    12523        %INCLUDE KA_GLB;
       47    12600        %INCLUDE KV_ASCCHR_E;
       48    12737        %EJECT;
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:3    
       49    12738        /*****************************************************************
       50    12739        *                                                                *
       51    12740        *                           External Routines                    *
       52    12741        *                                                                *
       53    12742        *****************************************************************/
       54    12743
       55    12744        %KH_ENTDEFS;
       56    12751    1   DCL KXA$ADMIN ENTRY (1) ALTRET;
       57    12752    1   DCL KXS$TMR ENTRY(1);
       58    12753    1   DCL KXH$INTHND ENTRY ASYNC;
       59    12754    1   DCL KXX$X29 ENTRY (1);
       60    12755    1   DCL KXF$FRAME ENTRY (1) ALTRET;
       61    12756    1   DCL KVV$VDHINT ENTRY (1) ALTRET;
       62    12757    1   DCL KVM$RCV ENTRY;
       63    12758    1   DCL KVB$INT ENTRY (1) ALTRET;
       64    12759    1   DCL KHD$SCREECH ENTRY (1);
       65    12760    1   DCL KHA$ERRLOG ENTRY (2) ALTRET;
       66    12761    1   DCL KVB$GETSYS ENTRY (2) ALTRET;
       67    12762    1   DCL KXS$EXPAUT ENTRY;
       68    12763        %EJECT;
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:4    
       69    12764        /*****************************************************************
       70    12765        *                                                                *
       71    12766        *                           Static data                          *
       72    12767        *                                                                *
       73    12768        *****************************************************************/
       74    12769
       75    12770    1   DCL PRIVS BIT(32) CONSTANT INIT(
       76    12771    1   %(G_PR_MSYS#|G_PR_INTCON#|G_PR_CQ#|G_PR_SCREECH#|G_PR_SNAP#|G_PR_EXMM#|G_PR_SPCLMM#)
             12771            );
       77    12772        %FPT_SPRIV (AUTH=YES,PRC=YES,PRIV=PRIVS);
       78    12795        %FPT_INTCON ( IENTRY = KXH$INTHND, PRIVILEGED = YES );
       79    12816
       80    12817        /*
       81    12818           BASE is specified to get a known segment. A QUACK test needs to
       82    12819           look at some contexts in X.25 and this makes it easier.
       83    12820        */
       84    12821        %VLP_SEGMENT ( FPTN = SEGMENT );
       85    12842        %FPT_GDS ( RESULTS = SEGMENT, IOBUF = NO );
       86    12866
       87    12867        %VLP_SEGMENT ( FPTN = IO_SEGMENT );
       88    12888        %FPT_GDS ( FPTN = FPT_GDS_IO, RESULTS = IO_SEGMENT, IOBUF = YES );
       89    12912
       90    12913        %KH$CTLTBL ( FPTN = KH_CTLTBL, STCLASS = "STATIC SYMDEF",
       91    12914                     HIPARM = %KL_HDLCX25_HI );
       92    13126        %KX_DATA;
       93    13816    1   DCL KX_SLCCRCVCCBS SBIN STATIC SYMDEF INIT(20);
       94    13817        %INCLUDE KH$STT;
       95    13847        %KX_STATS_X29;
       96    14188        %KV$VDH_VDHINT ( STCLASS =  STATIC );
       97    14207
       98    14208        %VLP_SCODE (FPTN=Y_NO_INIT,STCLASS=CONSTANT,FCG=KX,MID=I,ERR#=%S$KX_NO_INIT#);
       99    14269        %EJECT;
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:5    
      100    14270        /*****************************************************************
      101    14271        *                                                                *
      102    14272        *                           Referenced data                      *
      103    14273        *                                                                *
      104    14274        *****************************************************************/
      105    14275
      106    14276    1   DCL KV_B_POOL# UBIN WORD SYMREF;
      107    14277    1   DCL G$DS4$ PTR SYMREF;
      108    14278    1   DCL G$DS3$ PTR SYMREF;
      109    14279        %KA_MSC;
      110    14301        %KV$STT ( NAME = KV_STT, STCLASS = SYMREF );
      111    14695        %EJECT;
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:6    
      112    14696        /*****************************************************************
      113    14697        *                                                                *
      114    14698        *                           Auto                                 *
      115    14699        *                                                                *
      116    14700        *****************************************************************/
      117    14701
      118    14702        %FPT_X25 ( FPTN = CALL_FPT, STCLASS = );
      119    14746    1   DCL 1 MEMBITS,
      120    14747    1         2 DBG,
      121    14748    1           3 BITMAPBFRS BIT(1),
      122    14749    1           3 BUSYBFRS BIT(1),
      123    14750    1           3 VLDBFR BIT(1),
      124    14751    1           3 VLDAFTGET BIT(1),
      125    14752    1           3 VLDAFTRLS BIT(1),
      126    14753    1         2 * BIT(11);
      127    14754    1   DCL MEMBITS_WORD REDEF MEMBITS UBIN WORD;
      128    14755    1   DCL KVBSIZ UBIN;
      129    14756    1   DCL I UBIN;
      130    14757        %EJECT;
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:7    
      131    14758        /*****************************************************************
      132    14759        *                                                                *
      133    14760        *                           Based                                *
      134    14761        *                                                                *
      135    14762        *****************************************************************/
      136    14763
      137    14764        %KX$PACKET ( STCLASS = BASED );
      138    14830        %G$BOBCAT ( STCLASS = "BASED ( G$DS4$ )" );
      139    14843        %EJECT;
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:8    
      140    14844        /*****************************************************************
      141    14845        *                                                                *
      142    14846        *                           Procedure                            *
      143    14847        *                                                                *
      144    14848        *****************************************************************/
      145    14849
      146    14850    1       CALL KXS$EXPAUT;
      147    14851    1       CALL M$SPRIV (FPT_SPRIV) ALTRET(SCREECH);   /* Turn on privs */
      148    14852
      149    14853
      150    14854        /*
      151    14855                                             Get KHA started
      152    14856        */
      153    14857    1       CALL KHA$INIT ( , , ENTADDR (KXS$TMR) ) ALTRET ( SCREECH );
      154    14858        /*
      155    14859                                             Have KHA initialize all of
      156    14860                                             the control parameters.
      157    14861        */
      158    14862    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_INTLVL ) = ADDR ( KX_INHLVL );
      159    14863    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_INTLVL ) = '1'B;
      160    14864    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_MEM ) = ADDR ( KX_MEM );
      161    14865    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_MEM ) = '1'B;
      162    14866    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_IOMEM ) = ADDR ( KX_IOMEM );
      163    14867    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_IOMEM ) = '1'B;
      164    14868    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_RES ) = ADDR ( KX_RSC );
      165    14869    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_RES ) = '1'B;
      166    14870    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_ATTR ) = ADDR ( KX_ATR );
      167    14871    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_ATTR ) = '1'B;
      168    14872    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_TYPAHDBFRLMT ) = ADDR ( KX_TYPAHDBFRLMT );
      169    14873    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_TYPAHDBFRLMT ) = '0'B;
      170    14874    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_LINERRLOGLMT ) = ADDR ( KX_LINERRLOGLMT );
      171    14875    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_LINERRLOGLMT ) = '0'B;
      172    14876    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_LINERRLOGBFRLMT ) = ADDR (
             14876                KX_LINERRLOGBFRLMT );
      173    14877    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_LINERRLOGBFRLMT ) = '0'B;
      174    14878    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_X29MLTMR ) = ADDR ( KX_X29MLTMR );
      175    14879    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_X29MLTMR ) = '0'B;
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:9    
      176    14880    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_LINERRDSCLMT ) = ADDR ( KX_LINERRDSCLMT );
      177    14881    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_LINERRDSCLMT ) = '0'B;
      178    14882    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_TRC ) = ADDR ( KX_TRC );
      179    14883    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_TRC ) = '0'B;
      180    14884    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_VDHTRC ) = ADDR ( KX_VDHTRC );
      181    14885    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_VDHTRC ) = '0'B;
      182    14886    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_ERRSND ) = ADDR ( KX_WRSYSLOGMSK );
      183    14887    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_ERRSND ) = '0'B;
      184    14888    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_TRCBFR ) = ADDR ( KX_TRCBFR );
      185    14889    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_TRCBFR ) = '0'B;
      186    14890    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_RCVCQBYTSIZ ) = ADDR ( KX_RCVQSIZ );
      187    14891    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_RCVCQBYTSIZ ) = '1'B;
      188    14892    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_SNDCQBYTSIZ ) = ADDR ( KX_SNDQSIZ );
      189    14893    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_SNDCQBYTSIZ ) = '1'B;
      190    14894    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_MMRINTCHC ) = ADDR ( KX_MEMBITS );
      191    14895    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_MMRINTCHC ) = '1'B;
      192    14896    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_IOBUF ) = ADDR ( KX_IOBFRS );
      193    14897    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_IOBUF ) = '1'B;
      194    14898    1       KH_CTLTBL.PARM.PTR$ (%KL_HNDLRPARM_BLOCK ) = ADDR (KA_OTPBLKLMT);
      195    14899    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY (%KL_HNDLRPARM_BLOCK ) = '0'B;
      196    14900    1       KH_CTLTBL.PARM.PTR$ (%KL_HNDLRPARM_UNBLOCK ) = ADDR (KA_OTPUN_BLKLMT);
      197    14901    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY (%KL_HNDLRPARM_UNBLOCK ) = '0'B;
      198    14902
      199    14903    1       CALL KHA$INIT_CONTROL ( KH_CTLTBL ) ALTRET ( SCREECH );
      200    14904        /*
      201    14905                                             Call M$SYS to allow IO
      202    14906        */
      203    14907    1       CALL M$SYS ALTRET ( SCREECH );
      204    14908        /*
      205    14909                                             Set up the buddy pools.
      206    14910                                             Have VDH set up the main pool
      207    14911        */
      208    14912    1       FPT_GDS.V.PAGES = KX_MEM;
      209    14913    1       IF KX_MEM <= 256 AND KX_IOMEM > 512
      210    14914    1          THEN
      211    14915    1             SEGMENT.BASE$ = G$DS3$;
      212    14916    1       CALL M$GDS ( FPT_GDS ) ALTRET ( SCREECH );
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:10   
      213    14917    1       KX_AVL_MEM = KX_MEM * 256;
      214    14918    1       MEMBITS_WORD = KX_MEMBITS;
      215    14919    1       KV$VDH_VDHINT.DBG = MEMBITS.DBG;
      216    14920    1       KV$VDH_VDHINT.BFRBGN$ = SEGMENT.BASE$;
      217    14921    1       KV$VDH_VDHINT.BFREND$ = PINCRW ( SEGMENT.BASE$, SEGMENT.PAGES * 256 );
      218    14922    1       KV$VDH_VDHINT.MINBFR = 16;
      219    14923    1       KV$VDH_VDHINT.MAXPWR2 = 12;
      220    14924    1       KV$VDH_VDHINT.RCVCQ_BYTSIZ = KX_RCVQSIZ;
      221    14925    1       KV$VDH_VDHINT.SNDCQ_BYTSIZ = KX_SNDQSIZ;
      222    14926    1       CALL KVV$VDHINT ( KV$VDH_VDHINT ) ALTRET ( SCREECH );
      223    14927        /*
      224    14928                                             Now the IO buffer pool.
      225    14929        */
      226    14930    1       FPT_GDS_IO.V.PAGES = KX_IOMEM;
      227    14931    1       CALL M$GDS ( FPT_GDS_IO ) ALTRET ( SCREECH );
      228    14932    1       KX_AVL_IOMEM = KX_IOMEM * 512;
      229    14933    1       KV$VDH_VDHINT.BFRBGN$ = IO_SEGMENT.BASE$;
      230    14934    1       KV$VDH_VDHINT.BFREND$ = PINCRW ( IO_SEGMENT.BASE$, IO_SEGMENT.PAGES * 256 );
      231    14935    1       KV$VDH_VDHINT.MINBFR = ( 128 + LENGTHC(KX$PACKET) + 3 ) / 2;
      232    14936    1       KV$VDH_VDHINT.MAXPWR2 = %KX_S_BUF_MAX#;
      233    14937    1       KV_B_POOL# = 1;
      234    14938    1       CALL KVB$INT ( KV$VDH_VDHINT ) ALTRET ( SCREECH );
      235    14939        /*
      236    14940                                             Set up the interrupt levels
      237    14941                                             inp lvl = inh + 1,
      238    14942                                             otp lvl = inh + 2.
      239    14943        */
      240    14944    1       FPT_INTCON.V.RUNLEVEL = KX_INHLVL;
      241    14945    1       FPT_INTCON.V.LEVEL = KX_INHLVL + 1;
      242    14946    1       CALL M$INTCON ( FPT_INTCON ) ALTRET ( SCREECH );
      243    14947    1       FPT_INTCON.V.LEVEL = KX_INHLVL + 2;
      244    14948    1       CALL M$INTCON ( FPT_INTCON ) ALTRET ( SCREECH );
      245    14949        /*
      246    14950            Initialize statistics structure.
      247    14951        */
      248    14952    1       KX_STATS_HDLC.REQSTATS.SLCENT(%KH#ENTID_HDLC) = '1'B;
      249    14953    1       KX_STATS_X25.REQSTATS.SLCENT(%KH#ENTID_HDLC) = '1'B;
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:11   
      250    14954    1       KX_STATS_X29.REQSTATS.SLCENT(%KH#ENTID_HDLC) = '1'B;
      251    14955    1       KV_STT.REQSTATS.SLCENT(%KH#ENTID_HDLC) = '1'B;
      252    14956    1       KV_STT.REQSTATS.SLCENT(%KH#ENTID_X25) = '1'B;
      253    14957    1       KV_STT.REQSTATS.SLCENT(%KH#ENTID_X29) = '1'B;
      254    14958    1       KV_STT.REQSTATS.SLCENT(%KH#ENTID_VDH) = '1'B;
      255    14959        /*N*    KX_STATS_SL.REQSTATS.SLCENT(%KH#ENTID_SL) = '1'B;   */
      256    14960        /*N*    KX_STATS_X28.REQSTATS.SLCENT(%KH#ENTID_X28) = '1'B;   */
      257    14961    1       KX_STATS_HDLC.REQSTATS.DSPENT(%KH#ENTID_HDLC) = '1'B;
      258    14962    1       KX_STATS_X25.REQSTATS.DSPENT(%KH#ENTID_X25) = '1'B;
      259    14963    1       KX_STATS_X29.REQSTATS.DSPENT(%KH#ENTID_X29) = '1'B;
      260    14964    1       KV_STT.REQSTATS.DSPENT(%KH#ENTID_VDH) = '1'B;
      261    14965        /*N*    KX_STATS_SL.REQSTATS.DSPENT(%KH#ENTID_SL) = '1'B;   */
      262    14966        /*N*    KX_STATS_X28.REQSTATS.DSPENT(%KH#ENTID_X28) = '1'B;   */
      263    14967        /*
      264    14968                                             Let X25 do whatever it has to
      265    14969                                             for initialization before any
      266    14970                                             lines are enabled.
      267    14971        */
      268    14972    1       CALL_FPT = '0'B;
      269    14973    1       CALL_FPT.EVN = %KX_F_EV_HNDINT#;
      270    14974    1       CALL KXF$FRAME ( CALL_FPT );
      271    14975        /*
      272    14976                                             Have KHA acquire all of the
      273    14977                                             devices this handler controls.
      274    14978        */
      275    14979    1       CALL KHA$INIT_CHANTBL ( KX_RSC, KX_ATR, ENTADDR ( KXA$ADMIN ))
      276    14980    1          ALTRET ( SCREECH );
      277    14981
      278    14982        /*
      279    14983                                             Let KHA know that the handler
      280    14984                                             is done with set-up.
      281    14985        */
      282    14986    1       CALL KHA$INIT_DONE ALTRET ( SCREECH );
      283    14987        /*
      284    14988                                             Now go off to VDH.  VDH justs
      285    14989                                             scans the receive circular
      286    14990                                             queue forever.  Any return from
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:12   
      287    14991                                             this call is an error.
      288    14992        */
      289    14993    1       CALL KVM$RCV;
      290    14994
      291    14995    1   SCREECH: ;
      292    14996        /*
      293    14997                                             If there were any problems in
      294    14998                                             setting up the handler, just
      295    14999                                             screech.
      296    15000        */
      297    15001        /*S* SCREECH_CODE: KXI-S$KX_NO_INIT#
      298    15002             MESSAGE: Problems in setting up the handler.
      299    15003        */
      300    15004    1       CALL KHD$SCREECH ( Y_NO_INIT );
      301    15005
      302    15006    1   END  KXI$INIT;

PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:13   
--  Include file information  --

   KH$STT.:E05TOU  is referenced.
   KV_ASCCHR_E.:E05TOU  is referenced.
   KA_GLB.:E05TOU  is referenced.
   GM_VIRTUAL_E.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   KX_MACROS_M.:E05TOU  is referenced.
   KX_DATA_C.:E05TOU  is referenced.
   KXX_MACROS_M.:E05TOU  is referenced.
   KX_SCODE_C.:E05TOU  is referenced.
   KX_PERR_C.:E05TOU  is referenced.
   KX_EQUS_E.:E05TOU  is referenced.
   KV_GLBCNS_E.:E05TOU  is referenced.
   KV$GLB.:E05TOU  is referenced.
   KV$VDH.:E05TOU  is referenced.
   KL_CONTROL_C.:E05TOU  is referenced.
   KH_MACRO_C.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  is referenced.
   GT_LCP6_M.:E05TOU  is referenced.
   KI_CP6.:E05TOU  is referenced.
   GF_LCP6_M.:E05TOU  is referenced.
   GM_LCP6_M.:E05TOU  is referenced.
   GU_LCP6_M.:E05TOU  is referenced.
   GJ_LCP6_M.:E05TOU  is referenced.
   GH_LCP6_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
   KL_AFCN_C.:E05TOU  is referenced.
   KL_MACRO_C.:E05TOU  is referenced.
   K_ID_E.:E05TOU  is referenced.
   G_JIT_M.:E05TOU  is referenced.
      No diagnostics issued in procedure KXI$INIT.

   Procedure KXI$INIT requires 561 words for executable code.
   Procedure KXI$INIT requires 32 words of local(AUTO) storage.
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:14   

    No errors detected in file KXI$INIT.:E05TSI    .

PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:15   

 Object Unit name= KXI$INIT                                   File name= KXI$INIT.:E05TOU
 UTS= JUL 30 '97 02:21:43.76 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0  RoData even  UTS      5      5  KXI$INIT
    1   Data  even  none   147     93  KXI$INIT
    2   Proc  even  none   561    231  KXI$INIT
    3  RoData even  none     6      6  KXI$INIT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     2      0   yes            yes      Main       0  KXI$INIT

  ****  Data defs  ****

 Sect HexLoc  Name                           Sect HexLoc  Name
    1     29  KH_CTLTBL                          1     8A  KX_SLCCRCVCCBS
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:16   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes          Async      0 KXH$INTHND
         yes           Std       1 KXS$TMR
 yes     yes           Std       1 KXF$FRAME
 yes     yes           Std       1 KXA$ADMIN
 yes     yes           Std       3 KHA$INIT_DONE
 yes     yes           Std       3 KHA$INIT_CHANTBL
 yes     yes           Std       3 KHA$INIT
 yes     yes           Std       1 KVB$INT
         yes           Std       0 KVM$RCV
         yes           Std       0 KXS$EXPAUT
 yes     yes           Std       1 KVV$VDHINT
 yes     yes           Std       3 KHA$INIT_CONTROL
         yes           Std       1 KHD$SCREECH
                       nStd      0 X6A_MAUTO
                       nStd      0 X6A_MARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     KX_STATS_HDLC                         KX_STATS_X25                          KX_INHLVL
     KX_MEM                                KX_IOMEM                              KX_RSC
     KX_ATR                                KX_TYPAHDBFRLMT                       KX_LINERRLOGLMT
     KX_LINERRLOGBFRLMT                    KX_LINERRDSCLMT                       KX_X29MLTMR
     KX_TRC                                KX_VDHTRC                             KX_WRSYSLOGMSK
     KX_TRCBFR                             KX_RCVQSIZ                            KX_SNDQSIZ
     KX_MEMBITS                            KX_IOBFRS                             KX_AVL_MEM
     KX_AVL_IOMEM                          KX_PM$                                KX_STATS_X29
     KV_B_POOL#                            G$DS4$                                G$DS3$
     KA_OTPUN_BLKLMT                       KA_OTPBLKLMT                          KV_STT
r    G$ROS$
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:17   


        1        1        /*M* KXI$INIT - Initialization code for HDLC   */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*  PLM = 4, IND=3, CTI=3, DCI=6, IAD=0, DTI=6, AND=Y, CSI=3, THI=3, STI=3, DMC=Y
                 7         */
        8        8        /*P*  NAME:    KXI$INIT
        9        9              PURPOSE: Initialization code for the X.25 handler.  This
       10       10                       routine establishes the interfaces to KHA and VDH,
       11       11                       initializes the IO buddy pool, sets up the interrupt
       12       12                       levels, and calls VDH o start the scan of the RCQ.
       13       13        */
       14       14
       15       15        KXI$INIT: PROC MAIN;

     15   2 000000  D380 0000 0000  xent KXI$INIT        LNJ,B5   X6A_MAUTO
          2 000003       0020 0000                       DC       32,0

       16       16        %EJECT;
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:18   
       17       17        /*****************************************************************
       18       18        *                                                                *
       19       19        *                           Include files                        *
       20       20        *                                                                *
       21       21        *****************************************************************/
       22       22
       23       23        %INCLUDE G_JIT_M;
       24      288        %G$JIT_E;
       25      350        %INCLUDE K_ID_E;
       26      400        %K#ENTID_E;
       27      419        %K#LYRID_E;
       28      426        %INCLUDE KL_MACRO_C;
       29     3778        %INCLUDE KL_AFCN_C;
       30     3879        %INCLUDE LCP_6;
       31     8158        %INCLUDE KH_MACRO_C;
       32     8901        %INCLUDE KL_CONTROL_C;
       33     9281        %INCLUDE KV$VDH;
       34     9712        %INCLUDE KV$GLB;
       35    10131        %INCLUDE KV_GLBCNS_E;
       36    10472        %KV#CQ_HNDID_E;
       37    10477
       38    10478        %INCLUDE KX_EQUS_E;
       39    10917        %INCLUDE KX_PERR_C;
       40    11046        %INCLUDE KX_SCODE_C;
       41    11112        %INCLUDE KXX_MACROS_M;
       42    11454        %INCLUDE KX_DATA_C;
       43    11522        %INCLUDE KX_MACROS_M;
       44    12293        %INCLUDE G$BOBCAT_M;
       45    12313        %INCLUDE GM_VIRTUAL_E;
       46    12523        %INCLUDE KA_GLB;
       47    12600        %INCLUDE KV_ASCCHR_E;
       48    12737        %EJECT;
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:19   
       49    12738        /*****************************************************************
       50    12739        *                                                                *
       51    12740        *                           External Routines                    *
       52    12741        *                                                                *
       53    12742        *****************************************************************/
       54    12743
       55    12744        %KH_ENTDEFS;
       56    12751    1   DCL KXA$ADMIN ENTRY (1) ALTRET;
       57    12752    1   DCL KXS$TMR ENTRY(1);
       58    12753    1   DCL KXH$INTHND ENTRY ASYNC;
       59    12754    1   DCL KXX$X29 ENTRY (1);
       60    12755    1   DCL KXF$FRAME ENTRY (1) ALTRET;
       61    12756    1   DCL KVV$VDHINT ENTRY (1) ALTRET;
       62    12757    1   DCL KVM$RCV ENTRY;
       63    12758    1   DCL KVB$INT ENTRY (1) ALTRET;
       64    12759    1   DCL KHD$SCREECH ENTRY (1);
       65    12760    1   DCL KHA$ERRLOG ENTRY (2) ALTRET;
       66    12761    1   DCL KVB$GETSYS ENTRY (2) ALTRET;
       67    12762    1   DCL KXS$EXPAUT ENTRY;
       68    12763        %EJECT;
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:20   
       69    12764        /*****************************************************************
       70    12765        *                                                                *
       71    12766        *                           Static data                          *
       72    12767        *                                                                *
       73    12768        *****************************************************************/
       74    12769
       75    12770    1   DCL PRIVS BIT(32) CONSTANT INIT(
       76    12771    1  %(G_PR_MSYS#|G_PR_INTCON#|G_PR_CQ#|G_PR_SCREECH#|G_PR_SNAP#|G_PR_EXMM#|G_PR_SPCLMM#)
             12771            );
       77    12772        %FPT_SPRIV (AUTH=YES,PRC=YES,PRIV=PRIVS);
       78    12795        %FPT_INTCON ( IENTRY = KXH$INTHND, PRIVILEGED = YES );
       79    12816
       80    12817        /*
       81    12818           BASE is specified to get a known segment. A QUACK test needs to
       82    12819           look at some contexts in X.25 and this makes it easier.
       83    12820        */
       84    12821        %VLP_SEGMENT ( FPTN = SEGMENT );
       85    12842        %FPT_GDS ( RESULTS = SEGMENT, IOBUF = NO );
       86    12866
       87    12867        %VLP_SEGMENT ( FPTN = IO_SEGMENT );
       88    12888        %FPT_GDS ( FPTN = FPT_GDS_IO, RESULTS = IO_SEGMENT, IOBUF = YES );
       89    12912
       90    12913        %KH$CTLTBL ( FPTN = KH_CTLTBL, STCLASS = "STATIC SYMDEF",
       91    12914                     HIPARM = %KL_HDLCX25_HI );
       92    13126        %KX_DATA;
       93    13816    1   DCL KX_SLCCRCVCCBS SBIN STATIC SYMDEF INIT(20);
       94    13817        %INCLUDE KH$STT;
       95    13847        %KX_STATS_X29;
       96    14188        %KV$VDH_VDHINT ( STCLASS =  STATIC );
       97    14207
       98    14208        %VLP_SCODE (FPTN=Y_NO_INIT,STCLASS=CONSTANT,FCG=KX,MID=I,ERR#=%S$KX_NO_INIT#);
       99    14269        %EJECT;
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:21   
      100    14270        /*****************************************************************
      101    14271        *                                                                *
      102    14272        *                           Referenced data                      *
      103    14273        *                                                                *
      104    14274        *****************************************************************/
      105    14275
      106    14276    1   DCL KV_B_POOL# UBIN WORD SYMREF;
      107    14277    1   DCL G$DS4$ PTR SYMREF;
      108    14278    1   DCL G$DS3$ PTR SYMREF;
      109    14279        %KA_MSC;
      110    14301        %KV$STT ( NAME = KV_STT, STCLASS = SYMREF );
      111    14695        %EJECT;
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:22   
      112    14696        /*****************************************************************
      113    14697        *                                                                *
      114    14698        *                           Auto                                 *
      115    14699        *                                                                *
      116    14700        *****************************************************************/
      117    14701
      118    14702        %FPT_X25 ( FPTN = CALL_FPT, STCLASS = );
      119    14746    1   DCL 1 MEMBITS,
      120    14747    1         2 DBG,
      121    14748    1           3 BITMAPBFRS BIT(1),
      122    14749    1           3 BUSYBFRS BIT(1),
      123    14750    1           3 VLDBFR BIT(1),
      124    14751    1           3 VLDAFTGET BIT(1),
      125    14752    1           3 VLDAFTRLS BIT(1),
      126    14753    1         2 * BIT(11);
      127    14754    1   DCL MEMBITS_WORD REDEF MEMBITS UBIN WORD;
      128    14755    1   DCL KVBSIZ UBIN;
      129    14756    1   DCL I UBIN;
      130    14757        %EJECT;
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:23   
      131    14758        /*****************************************************************
      132    14759        *                                                                *
      133    14760        *                           Based                                *
      134    14761        *                                                                *
      135    14762        *****************************************************************/
      136    14763
      137    14764        %KX$PACKET ( STCLASS = BASED );
      138    14830        %G$BOBCAT ( STCLASS = "BASED ( G$DS4$ )" );
      139    14843        %EJECT;
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:24   
      140    14844        /*****************************************************************
      141    14845        *                                                                *
      142    14846        *                           Procedure                            *
      143    14847        *                                                                *
      144    14848        *****************************************************************/
      145    14849
      146    14850    1       CALL KXS$EXPAUT;

  14850   2 000005  CBF0 0000                            LAB,B4   0,IMO
          2 000007  E380 0000 0000  xent                 LNJ,B6   KXS$EXPAUT
          2 00000A       0001                            DC       s:14851,PREL

      147    14851    1       CALL M$SPRIV (FPT_SPRIV) ALTRET(SCREECH);   /* Turn on privs */

  14851   2 00000B  BB80 0000 0000  01                   LAB,B3   FPT_SPRIV
          2 00000E  B870 0CD0                            LDR,R3   3280,IMO
          2 000010  0001                                 MCL
          2 000011       0214                            DC       s:14973,PREL

      148    14852
      149    14853
      150    14854        /*
      151    14855                                             Get KHA started
      152    14856        */
      153    14857    1       CALL KHA$INIT ( , , ENTADDR (KXS$TMR) ) ALTRET ( SCREECH );

  14857   2 000012  EB80 0000 0000  xent                 LAB,B6   KXS$TMR
          2 000015  EFC7 0018                            STB,B6   MEMBITS+4,AUTO
          2 000017  DBC7 0018                            LAB,B5   MEMBITS+4,AUTO
          2 000019  DFC7 001E                            STB,B5   MEMBITS+10,AUTO
          2 00001B  CB80 0000 0000                       LAB,B4   0
          2 00001E  CFC7 001C                            STB,B4   MEMBITS+8,AUTO
          2 000020  BB80 0000 0000                       LAB,B3   0
          2 000023  BFC7 001A                            STB,B3   MEMBITS+6,AUTO
          2 000025  BBC7 001A                            LAB,B3   MEMBITS+6,AUTO
          2 000027  CBF0 0300                            LAB,B4   768,IMO
          2 000029  E380 0000 0000  xent                 LNJ,B6   KHA$INIT
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:25   
          2 00002C       01F9                            DC       s:14973,PREL

      154    14858        /*
      155    14859                                             Have KHA initialize all of
      156    14860                                             the control parameters.
      157    14861        */
      158    14862    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_INTLVL ) = ADDR ( KX_INHLVL );

  14862   2 00002D  EB80 0000 0000  xsym                 LAB,B6   KX_INHLVL
          2 000030  EF80 0000 002B  01                   STB,B6   KH_CTLTBL+2

      159    14863    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_INTLVL ) = '1'B;

  14863   2 000033  8900 0000 002A  01                   LBT,'8000'X       KH_CTLTBL+1
  14863   2 000036       8000

      160    14864    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_MEM ) = ADDR ( KX_MEM );

  14864   2 000037  DB80 0000 0000  xsym                 LAB,B5   KX_MEM
          2 00003A  DF80 0000 002E  01                   STB,B5   KH_CTLTBL+5

      161    14865    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_MEM ) = '1'B;

  14865   2 00003D  8900 0000 002D  01                   LBT,'8000'X       KH_CTLTBL+4
  14865   2 000040       8000

      162    14866    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_IOMEM ) = ADDR ( KX_IOMEM );

  14866   2 000041  CB80 0000 0000  xsym                 LAB,B4   KX_IOMEM
          2 000044  CF80 0000 0031  01                   STB,B4   KH_CTLTBL+8

      163    14867    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_IOMEM ) = '1'B;

  14867   2 000047  8900 0000 0030  01                   LBT,'8000'X       KH_CTLTBL+7
  14867   2 00004A       8000

      164    14868    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_RES ) = ADDR ( KX_RSC );
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:26   

  14868   2 00004B  BB80 0000 0000  xsym                 LAB,B3   KX_RSC
          2 00004E  BF80 0000 0034  01                   STB,B3   KH_CTLTBL+11

      165    14869    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_RES ) = '1'B;

  14869   2 000051  8900 0000 0033  01                   LBT,'8000'X       KH_CTLTBL+10
  14869   2 000054       8000

      166    14870    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_ATTR ) = ADDR ( KX_ATR );

  14870   2 000055  AB80 0000 0000  xsym                 LAB,B2   KX_ATR
          2 000058  AF80 0000 0037  01                   STB,B2   KH_CTLTBL+14

      167    14871    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_ATTR ) = '1'B;

  14871   2 00005B  8900 0000 0036  01                   LBT,'8000'X       KH_CTLTBL+13
  14871   2 00005E       8000

      168    14872    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_TYPAHDBFRLMT ) = ADDR ( KX_TYPAHDBFRLMT );

  14872   2 00005F  9B80 0000 0000  xsym                 LAB,B1   KX_TYPAHDBFRLMT
          2 000062  9F80 0000 003A  01                   STB,B1   KH_CTLTBL+17

      169    14873    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_TYPAHDBFRLMT ) = '0'B;

  14873   2 000065  8800 0000 0039  01                   LBF,'8000'X       KH_CTLTBL+16
  14873   2 000068       8000

      170    14874    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_LINERRLOGLMT ) = ADDR ( KX_LINERRLOGLMT );

  14874   2 000069  EB80 0000 0000  xsym                 LAB,B6   KX_LINERRLOGLMT
          2 00006C  EF80 0000 003D  01                   STB,B6   KH_CTLTBL+20

      171    14875    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_LINERRLOGLMT ) = '0'B;

  14875   2 00006F  8800 0000 003C  01                   LBF,'8000'X       KH_CTLTBL+19
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:27   
  14875   2 000072       8000

      172    14876    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_LINERRLOGBFRLMT ) = ADDR (
             14876                KX_LINERRLOGBFRLMT );

  14876   2 000073  EB80 0000 0000  xsym                 LAB,B6   KX_LINERRLOGBFRLMT
          2 000076  EF80 0000 005B  01                   STB,B6   KH_CTLTBL+50

      173    14877    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_LINERRLOGBFRLMT ) = '0'B;

  14877   2 000079  8800 0000 005A  01                   LBF,'8000'X       KH_CTLTBL+49
  14877   2 00007C       8000

      174    14878    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_X29MLTMR ) = ADDR ( KX_X29MLTMR );

  14878   2 00007D  EB80 0000 0000  xsym                 LAB,B6   KX_X29MLTMR
          2 000080  EF80 0000 005E  01                   STB,B6   KH_CTLTBL+53

      175    14879    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_X29MLTMR ) = '0'B;

  14879   2 000083  8800 0000 005D  01                   LBF,'8000'X       KH_CTLTBL+52
  14879   2 000086       8000

      176    14880    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_LINERRDSCLMT ) = ADDR ( KX_LINERRDSCLMT );

  14880   2 000087  EB80 0000 0000  xsym                 LAB,B6   KX_LINERRDSCLMT
          2 00008A  EF80 0000 0040  01                   STB,B6   KH_CTLTBL+23

      177    14881    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_LINERRDSCLMT ) = '0'B;

  14881   2 00008D  8800 0000 003F  01                   LBF,'8000'X       KH_CTLTBL+22
  14881   2 000090       8000

      178    14882    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_TRC ) = ADDR ( KX_TRC );

  14882   2 000091  EB80 0000 0000  xsym                 LAB,B6   KX_TRC
          2 000094  EF80 0000 0043  01                   STB,B6   KH_CTLTBL+26
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:28   

      179    14883    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_TRC ) = '0'B;

  14883   2 000097  8800 0000 0042  01                   LBF,'8000'X       KH_CTLTBL+25
  14883   2 00009A       8000

      180    14884    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_VDHTRC ) = ADDR ( KX_VDHTRC );

  14884   2 00009B  EB80 0000 0000  xsym                 LAB,B6   KX_VDHTRC
          2 00009E  EF80 0000 0046  01                   STB,B6   KH_CTLTBL+29

      181    14885    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_VDHTRC ) = '0'B;

  14885   2 0000A1  8800 0000 0045  01                   LBF,'8000'X       KH_CTLTBL+28
  14885   2 0000A4       8000

      182    14886    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_ERRSND ) = ADDR ( KX_WRSYSLOGMSK );

  14886   2 0000A5  EB80 0000 0000  xsym                 LAB,B6   KX_WRSYSLOGMSK
          2 0000A8  EF80 0000 0049  01                   STB,B6   KH_CTLTBL+32

      183    14887    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_ERRSND ) = '0'B;

  14887   2 0000AB  8800 0000 0048  01                   LBF,'8000'X       KH_CTLTBL+31
  14887   2 0000AE       8000

      184    14888    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_TRCBFR ) = ADDR ( KX_TRCBFR );

  14888   2 0000AF  EB80 0000 0000  xsym                 LAB,B6   KX_TRCBFR
          2 0000B2  EF80 0000 004C  01                   STB,B6   KH_CTLTBL+35

      185    14889    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_TRCBFR ) = '0'B;

  14889   2 0000B5  8800 0000 004B  01                   LBF,'8000'X       KH_CTLTBL+34
  14889   2 0000B8       8000

      186    14890    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_RCVCQBYTSIZ ) = ADDR ( KX_RCVQSIZ );
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:29   

  14890   2 0000B9  EB80 0000 0000  xsym                 LAB,B6   KX_RCVQSIZ
          2 0000BC  EF80 0000 004F  01                   STB,B6   KH_CTLTBL+38

      187    14891    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_RCVCQBYTSIZ ) = '1'B;

  14891   2 0000BF  8900 0000 004E  01                   LBT,'8000'X       KH_CTLTBL+37
  14891   2 0000C2       8000

      188    14892    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_SNDCQBYTSIZ ) = ADDR ( KX_SNDQSIZ );

  14892   2 0000C3  EB80 0000 0000  xsym                 LAB,B6   KX_SNDQSIZ
          2 0000C6  EF80 0000 0052  01                   STB,B6   KH_CTLTBL+41

      189    14893    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_SNDCQBYTSIZ ) = '1'B;

  14893   2 0000C9  8900 0000 0051  01                   LBT,'8000'X       KH_CTLTBL+40
  14893   2 0000CC       8000

      190    14894    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_MMRINTCHC ) = ADDR ( KX_MEMBITS );

  14894   2 0000CD  EB80 0000 0000  xsym                 LAB,B6   KX_MEMBITS
          2 0000D0  EF80 0000 0055  01                   STB,B6   KH_CTLTBL+44

      191    14895    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_MMRINTCHC ) = '1'B;

  14895   2 0000D3  8900 0000 0054  01                   LBT,'8000'X       KH_CTLTBL+43
  14895   2 0000D6       8000

      192    14896    1       KH_CTLTBL.PARM.PTR$ ( %KL_HNDLRPARM_IOBUF ) = ADDR ( KX_IOBFRS );

  14896   2 0000D7  EB80 0000 0000  xsym                 LAB,B6   KX_IOBFRS
          2 0000DA  EF80 0000 0058  01                   STB,B6   KH_CTLTBL+47

      193    14897    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY ( %KL_HNDLRPARM_IOBUF ) = '1'B;

  14897   2 0000DD  8900 0000 0057  01                   LBT,'8000'X       KH_CTLTBL+46
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:30   
  14897   2 0000E0       8000

      194    14898    1       KH_CTLTBL.PARM.PTR$ (%KL_HNDLRPARM_BLOCK ) = ADDR (KA_OTPBLKLMT);

  14898   2 0000E1  EB80 0000 0000  xsym                 LAB,B6   KA_OTPBLKLMT
          2 0000E4  EF80 0000 0082  01                   STB,B6   KH_CTLTBL+89

      195    14899    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY (%KL_HNDLRPARM_BLOCK ) = '0'B;

  14899   2 0000E7  8800 0000 0081  01                   LBF,'8000'X       KH_CTLTBL+88
  14899   2 0000EA       8000

      196    14900    1       KH_CTLTBL.PARM.PTR$ (%KL_HNDLRPARM_UNBLOCK ) = ADDR (KA_OTPUN_BLKLMT);

  14900   2 0000EB  EB80 0000 0000  xsym                 LAB,B6   KA_OTPUN_BLKLMT
          2 0000EE  EF80 0000 0085  01                   STB,B6   KH_CTLTBL+92

      197    14901    1       KH_CTLTBL.PARM.FLAGS.INIT_ONLY (%KL_HNDLRPARM_UNBLOCK ) = '0'B;

  14901   2 0000F1  8800 0000 0084  01                   LBF,'8000'X       KH_CTLTBL+91
  14901   2 0000F4       8000

      198    14902
      199    14903    1       CALL KHA$INIT_CONTROL ( KH_CTLTBL ) ALTRET ( SCREECH );

  14903   2 0000F5  BB80 0000 0000  03                   LAB,B3   0
          2 0000F8  CBF0 0100                            LAB,B4   256,IMO
          2 0000FA  E380 0000 0000  xent                 LNJ,B6   KHA$INIT_CONTROL
          2 0000FD       0128                            DC       s:14973,PREL

      200    14904        /*
      201    14905                                             Call M$SYS to allow IO
      202    14906        */
      203    14907    1       CALL M$SYS ALTRET ( SCREECH );

  14907   2 0000FE  3C43                                 LDV,R3   67
          2 0000FF  0001                                 MCL
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:31   
          2 000100       0125                            DC       s:14973,PREL

      204    14908        /*
      205    14909                                             Set up the buddy pools.
      206    14910                                             Have VDH set up the main pool
      207    14911        */
      208    14912    1       FPT_GDS.V.PAGES = KX_MEM;

  14912   2 000101  E800 0000 0000  xsym                 LDR,R6   KX_MEM
          2 000104  EF00 0000 001C  01                   STR,R6   FPT_GDS+6

      209    14913    1       IF KX_MEM <= 256 AND KX_IOMEM > 512

  14913   2 000107  E970 0100                            CMR,R6   256,IMO
          2 000109  0301 000E                            BG       s:14916,PREL
          2 00010B  D800 0000 0000  xsym                 LDR,R5   KX_IOMEM
          2 00010E  D970 0200                            CMR,R5   512,IMO
          2 000110  0381 0007                            BLE      s:14916,PREL

      210    14914    1          THEN
      211    14915    1             SEGMENT.BASE$ = G$DS3$;

  14915   2 000112  EC80 0000 0000  xsym                 LDB,B6   G$DS3$
          2 000115  EF80 0000 0013  01                   STB,B6   SEGMENT

      212    14916    1       CALL M$GDS ( FPT_GDS ) ALTRET ( SCREECH );

  14916   2 000118  BB80 0000 0016  01                   LAB,B3   FPT_GDS
          2 00011B  B870 0902                            LDR,R3   2306,IMO
          2 00011D  0001                                 MCL
          2 00011E       0107                            DC       s:14973,PREL

      213    14917    1       KX_AVL_MEM = KX_MEM * 256;

  14917   2 00011F  F800 0000 0000  xsym                 LDR,R7   KX_MEM
          2 000122  6C00                                 LDV,R6   0
          2 000123  7088                                 DOL,R7   8
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:32   
          2 000124  8D00 0000 0000  xsym                 SDI      KX_AVL_MEM

      214    14918    1       MEMBITS_WORD = KX_MEMBITS;

  14918   2 000127  D800 0000 0000  xsym                 LDR,R5   KX_MEMBITS
          2 00012A  DF47 0014                            STR,R5   MEMBITS,AUTO

      215    14919    1       KV$VDH_VDHINT.DBG = MEMBITS.DBG;

  14919   2 00012C  C847 0014                            LDR,R4   MEMBITS,AUTO
          2 00012E  CA80 0000 0090  01                   SRM,R4,'F800'X    KV$VDH_VDHINT+5
          2 000131       F800

      216    14920    1       KV$VDH_VDHINT.BFRBGN$ = SEGMENT.BASE$;

  14920   2 000132  EC80 0000 0013  01                   LDB,B6   SEGMENT
          2 000135  EF80 0000 008B  01                   STB,B6   KV$VDH_VDHINT

      217    14921    1       KV$VDH_VDHINT.BFREND$ = PINCRW ( SEGMENT.BASE$, SEGMENT.PAGES * 256 );

  14921   2 000138  F800 0000 0015  01                   LDR,R7   SEGMENT+2
          2 00013B  6C00                                 LDV,R6   0
          2 00013C  7088                                 DOL,R7   8
          2 00013D  8400 0000 0013  01                   AID      SEGMENT
          2 000140  8D00 0000 008D  01                   SDI      KV$VDH_VDHINT+2

      218    14922    1       KV$VDH_VDHINT.MINBFR = 16;

  14922   2 000143  3C10                                 LDV,R3   16
          2 000144  B780 0000 008F  01                   STH,R3   KV$VDH_VDHINT+4

      219    14923    1       KV$VDH_VDHINT.MAXPWR2 = 12;

  14923   2 000147  2C0C                                 LDV,R2   12
          2 000148  AA80 0000 008F  01                   SRM,R2,'00FF'X    KV$VDH_VDHINT+4
          2 00014B       00FF

PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:33   
      220    14924    1       KV$VDH_VDHINT.RCVCQ_BYTSIZ = KX_RCVQSIZ;

  14924   2 00014C  9800 0000 0000  xsym                 LDR,R1   KX_RCVQSIZ
          2 00014F  9F00 0000 0091  01                   STR,R1   KV$VDH_VDHINT+6

      221    14925    1       KV$VDH_VDHINT.SNDCQ_BYTSIZ = KX_SNDQSIZ;

  14925   2 000152  E800 0000 0000  xsym                 LDR,R6   KX_SNDQSIZ
          2 000155  EF00 0000 0092  01                   STR,R6   KV$VDH_VDHINT+7

      222    14926    1       CALL KVV$VDHINT ( KV$VDH_VDHINT ) ALTRET ( SCREECH );

  14926   2 000158  BB80 0000 0002  03                   LAB,B3   +2
          2 00015B  CBF0 0100                            LAB,B4   256,IMO
          2 00015D  E380 0000 0000  xent                 LNJ,B6   KVV$VDHINT
          2 000160       00C5                            DC       s:14973,PREL

      223    14927        /*
      224    14928                                             Now the IO buffer pool.
      225    14929        */
      226    14930    1       FPT_GDS_IO.V.PAGES = KX_IOMEM;

  14930   2 000161  E800 0000 0000  xsym                 LDR,R6   KX_IOMEM
          2 000164  EF00 0000 0027  01                   STR,R6   FPT_GDS_IO+6

      227    14931    1       CALL M$GDS ( FPT_GDS_IO ) ALTRET ( SCREECH );

  14931   2 000167  BB80 0000 0021  01                   LAB,B3   FPT_GDS_IO
          2 00016A  B870 0902                            LDR,R3   2306,IMO
          2 00016C  0001                                 MCL
          2 00016D       00B8                            DC       s:14973,PREL

      228    14932    1       KX_AVL_IOMEM = KX_IOMEM * 512;

  14932   2 00016E  F800 0000 0000  xsym                 LDR,R7   KX_IOMEM
          2 000171  6C00                                 LDV,R6   0
          2 000172  7089                                 DOL,R7   9
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:34   
          2 000173  8D00 0000 0000  xsym                 SDI      KX_AVL_IOMEM

      229    14933    1       KV$VDH_VDHINT.BFRBGN$ = IO_SEGMENT.BASE$;

  14933   2 000176  EC80 0000 001E  01                   LDB,B6   IO_SEGMENT
          2 000179  EF80 0000 008B  01                   STB,B6   KV$VDH_VDHINT

      230    14934    1       KV$VDH_VDHINT.BFREND$ = PINCRW ( IO_SEGMENT.BASE$, IO_SEGMENT.PAGES * 256 );

  14934   2 00017C  F800 0000 0020  01                   LDR,R7   IO_SEGMENT+2
          2 00017F  6C00                                 LDV,R6   0
          2 000180  7088                                 DOL,R7   8
          2 000181  8400 0000 001E  01                   AID      IO_SEGMENT
          2 000184  8D00 0000 008D  01                   SDI      KV$VDH_VDHINT+2

      231    14935    1       KV$VDH_VDHINT.MINBFR = ( 128 + LENGTHC(KX$PACKET) + 3 ) / 2;

  14935   2 000187  5C4C                                 LDV,R5   76
          2 000188  D780 0000 008F  01                   STH,R5   KV$VDH_VDHINT+4

      232    14936    1       KV$VDH_VDHINT.MAXPWR2 = %KX_S_BUF_MAX#;

  14936   2 00018B  4C05                                 LDV,R4   5
          2 00018C  CA80 0000 008F  01                   SRM,R4,'00FF'X    KV$VDH_VDHINT+4
          2 00018F       00FF

      233    14937    1       KV_B_POOL# = 1;

  14937   2 000190  3C01                                 LDV,R3   1
          2 000191  BF00 0000 0000  xsym                 STR,R3   KV_B_POOL#

      234    14938    1       CALL KVB$INT ( KV$VDH_VDHINT ) ALTRET ( SCREECH );

  14938   2 000194  BB80 0000 0002  03                   LAB,B3   +2
          2 000197  CBF0 0100                            LAB,B4   256,IMO
          2 000199  E380 0000 0000  xent                 LNJ,B6   KVB$INT
          2 00019C       0089                            DC       s:14973,PREL
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:35   

      235    14939        /*
      236    14940                                             Set up the interrupt levels
      237    14941                                             inp lvl = inh + 1,
      238    14942                                             otp lvl = inh + 2.
      239    14943        */
      240    14944    1       FPT_INTCON.V.RUNLEVEL = KX_INHLVL;

  14944   2 00019D  E800 0000 0000  xsym                 LDR,R6   KX_INHLVL
          2 0001A0  EF00 0000 0010  01                   STR,R6   FPT_INTCON+6

      241    14945    1       FPT_INTCON.V.LEVEL = KX_INHLVL + 1;

  14945   2 0001A3  6E01                                 ADV,R6   1
          2 0001A4  EF00 0000 000F  01                   STR,R6   FPT_INTCON+5

      242    14946    1       CALL M$INTCON ( FPT_INTCON ) ALTRET ( SCREECH );

  14946   2 0001A7  BB80 0000 000A  01                   LAB,B3   FPT_INTCON
          2 0001AA  B870 0441                            LDR,R3   1089,IMO
          2 0001AC  0001                                 MCL
          2 0001AD       0078                            DC       s:14973,PREL

      243    14947    1       FPT_INTCON.V.LEVEL = KX_INHLVL + 2;

  14947   2 0001AE  E800 0000 0000  xsym                 LDR,R6   KX_INHLVL
          2 0001B1  6E02                                 ADV,R6   2
          2 0001B2  EF00 0000 000F  01                   STR,R6   FPT_INTCON+5

      244    14948    1       CALL M$INTCON ( FPT_INTCON ) ALTRET ( SCREECH );

  14948   2 0001B5  BB80 0000 000A  01                   LAB,B3   FPT_INTCON
          2 0001B8  B870 0441                            LDR,R3   1089,IMO
          2 0001BA  0001                                 MCL
          2 0001BB       006A                            DC       s:14973,PREL

      245    14949        /*
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:36   
      246    14950            Initialize statistics structure.
      247    14951        */
      248    14952    1       KX_STATS_HDLC.REQSTATS.SLCENT(%KH#ENTID_HDLC) = '1'B;

  14952   2 0001BC  8900 0000 0012  xsym                 LBT,'0800'X       KX_STATS_HDLC+18
  14952   2 0001BF       0800

      249    14953    1       KX_STATS_X25.REQSTATS.SLCENT(%KH#ENTID_HDLC) = '1'B;

  14953   2 0001C0  8900 0000 0012  xsym                 LBT,'0800'X       KX_STATS_X25+18
  14953   2 0001C3       0800

      250    14954    1       KX_STATS_X29.REQSTATS.SLCENT(%KH#ENTID_HDLC) = '1'B;

  14954   2 0001C4  8900 0000 0012  xsym                 LBT,'0800'X       KX_STATS_X29+18
  14954   2 0001C7       0800

      251    14955    1       KV_STT.REQSTATS.SLCENT(%KH#ENTID_HDLC) = '1'B;

  14955   2 0001C8  8900 0000 0012  xsym                 LBT,'0800'X       KV_STT+18
  14955   2 0001CB       0800

      252    14956    1       KV_STT.REQSTATS.SLCENT(%KH#ENTID_X25) = '1'B;

  14956   2 0001CC  8900 0000 0012  xsym                 LBT,'0040'X       KV_STT+18
  14956   2 0001CF       0040

      253    14957    1       KV_STT.REQSTATS.SLCENT(%KH#ENTID_X29) = '1'B;

  14957   2 0001D0  8900 0000 0012  xsym                 LBT,'0002'X       KV_STT+18
  14957   2 0001D3       0002

      254    14958    1       KV_STT.REQSTATS.SLCENT(%KH#ENTID_VDH) = '1'B;

  14958   2 0001D4  8900 0000 0012  xsym                 LBT,'0020'X       KV_STT+18
  14958   2 0001D7       0020

PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:37   
      255    14959        /*N*    KX_STATS_SL.REQSTATS.SLCENT(%KH#ENTID_SL) = '1'B;   */
      256    14960        /*N*    KX_STATS_X28.REQSTATS.SLCENT(%KH#ENTID_X28) = '1'B;   */
      257    14961    1       KX_STATS_HDLC.REQSTATS.DSPENT(%KH#ENTID_HDLC) = '1'B;

  14961   2 0001D8  8900 0000 0010  xsym                 LBT,'0800'X       KX_STATS_HDLC+16
  14961   2 0001DB       0800

      258    14962    1       KX_STATS_X25.REQSTATS.DSPENT(%KH#ENTID_X25) = '1'B;

  14962   2 0001DC  8900 0000 0010  xsym                 LBT,'0040'X       KX_STATS_X25+16
  14962   2 0001DF       0040

      259    14963    1       KX_STATS_X29.REQSTATS.DSPENT(%KH#ENTID_X29) = '1'B;

  14963   2 0001E0  8900 0000 0010  xsym                 LBT,'0002'X       KX_STATS_X29+16
  14963   2 0001E3       0002

      260    14964    1       KV_STT.REQSTATS.DSPENT(%KH#ENTID_VDH) = '1'B;

  14964   2 0001E4  8900 0000 0010  xsym                 LBT,'0020'X       KV_STT+16
  14964   2 0001E7       0020

      261    14965        /*N*    KX_STATS_SL.REQSTATS.DSPENT(%KH#ENTID_SL) = '1'B;   */
      262    14966        /*N*    KX_STATS_X28.REQSTATS.DSPENT(%KH#ENTID_X28) = '1'B;   */
      263    14967        /*
      264    14968                                             Let X25 do whatever it has to
      265    14969                                             for initialization before any
      266    14970                                             lines are enabled.
      267    14971        */
      268    14972    1       CALL_FPT = '0'B;

  14972   2 0001E8  5C20                                 LDV,R5   32
          2 0001E9  0021                                 ALR      ;
          2 0001EA       4178 0000                                ALPHANUM('0000'X,IMO,,1),;
          2 0001EC       4007 0004                                ALPHANUM(CALL_FPT,AUTO,,R5,FILL)

      269    14973    1       CALL_FPT.EVN = %KX_F_EV_HNDINT#;
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:38   

  14973   2 0001EE  6C10                                 LDV,R6   16
          2 0001EF  437F                                 CSYNC    s:14973,SPREL
          2 0001F0  EF47 0004                            STR,R6   CALL_FPT,AUTO

      270    14974    1       CALL KXF$FRAME ( CALL_FPT );

  14974   2 0001F2  EBC7 0004                            LAB,B6   CALL_FPT,AUTO
          2 0001F4  EFC7 0018                            STB,B6   MEMBITS+4,AUTO
          2 0001F6  BBC7 0018                            LAB,B3   MEMBITS+4,AUTO
          2 0001F8  CBF0 0100                            LAB,B4   256,IMO
          2 0001FA  E380 0000 0000  xent                 LNJ,B6   KXF$FRAME
          2 0001FD       0001                            DC       s:14979,PREL

      271    14975        /*
      272    14976                                             Have KHA acquire all of the
      273    14977                                             devices this handler controls.
      274    14978        */
      275    14979    1       CALL KHA$INIT_CHANTBL ( KX_RSC, KX_ATR, ENTADDR ( KXA$ADMIN ))

  14979   2 0001FE  EB80 0000 0000  xent                 LAB,B6   KXA$ADMIN
          2 000201  EFC7 0018                            STB,B6   MEMBITS+4,AUTO
          2 000203  DBC7 0018                            LAB,B5   MEMBITS+4,AUTO
          2 000205  DFC7 001E                            STB,B5   MEMBITS+10,AUTO
          2 000207  CB80 0000 0000  xsym                 LAB,B4   KX_ATR
          2 00020A  CFC7 001C                            STB,B4   MEMBITS+8,AUTO
          2 00020C  BB80 0000 0000  xsym                 LAB,B3   KX_RSC
          2 00020F  BFC7 001A                            STB,B3   MEMBITS+6,AUTO
          2 000211  BBC7 001A                            LAB,B3   MEMBITS+6,AUTO
          2 000213  CBF0 0300                            LAB,B4   768,IMO
          2 000215  E380 0000 0000  xent                 LNJ,B6   KHA$INIT_CHANTBL
          2 000218       000D                            DC       s:14973,PREL

      276    14980    1          ALTRET ( SCREECH );
      277    14981
      278    14982        /*
      279    14983                                             Let KHA know that the handler
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:39   
      280    14984                                             is done with set-up.
      281    14985        */
      282    14986    1       CALL KHA$INIT_DONE ALTRET ( SCREECH );

  14986   2 000219  CBF0 0000                            LAB,B4   0,IMO
          2 00021B  E380 0000 0000  xent                 LNJ,B6   KHA$INIT_DONE
          2 00021E       0007                            DC       s:14973,PREL

      283    14987        /*
      284    14988                                             Now go off to VDH.  VDH justs
      285    14989                                             scans the receive circular
      286    14990                                             queue forever.  Any return from
      287    14991                                             this call is an error.
      288    14992        */
      289    14993    1       CALL KVM$RCV;

  14993   2 00021F  CBF0 0000                            LAB,B4   0,IMO
          2 000221  E380 0000 0000  xent                 LNJ,B6   KVM$RCV
          2 000224       0001                            DC       s:14973,PREL

  14973   2                              SCREECH         null
      290    14994
      291    14995    1   SCREECH: ;
      292    14996        /*
      293    14997                                             If there were any problems in
      294    14998                                             setting up the handler, just
      295    14999                                             screech.
      296    15000        */
      297    15001        /*S* SCREECH_CODE: KXI-S$KX_NO_INIT#
      298    15002             MESSAGE: Problems in setting up the handler.
      299    15003        */
      300    15004    1       CALL KHD$SCREECH ( Y_NO_INIT );

  15004   2 000225  BB80 0000 0004  03   SCREECH         LAB,B3   +4
          2 000228  CBF0 0100                            LAB,B4   256,IMO
          2 00022A  E380 0000 0000  xent                 LNJ,B6   KHD$SCREECH
          2 00022D       0001                            DC       s:15006,PREL
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:40   

      301    15005
      302    15006    1   END  KXI$INIT;

  15006   2 00022E  C380 0000 0000  xent                 LNJ,B4   X6A_MARET

PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:41   
--  Include file information  --

   KH$STT.:E05TOU  is referenced.
   KV_ASCCHR_E.:E05TOU  is referenced.
   KA_GLB.:E05TOU  is referenced.
   GM_VIRTUAL_E.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   KX_MACROS_M.:E05TOU  is referenced.
   KX_DATA_C.:E05TOU  is referenced.
   KXX_MACROS_M.:E05TOU  is referenced.
   KX_SCODE_C.:E05TOU  is referenced.
   KX_PERR_C.:E05TOU  is referenced.
   KX_EQUS_E.:E05TOU  is referenced.
   KV_GLBCNS_E.:E05TOU  is referenced.
   KV$GLB.:E05TOU  is referenced.
   KV$VDH.:E05TOU  is referenced.
   KL_CONTROL_C.:E05TOU  is referenced.
   KH_MACRO_C.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  is referenced.
   GT_LCP6_M.:E05TOU  is referenced.
   KI_CP6.:E05TOU  is referenced.
   GF_LCP6_M.:E05TOU  is referenced.
   GM_LCP6_M.:E05TOU  is referenced.
   GU_LCP6_M.:E05TOU  is referenced.
   GJ_LCP6_M.:E05TOU  is referenced.
   GH_LCP6_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
   KL_AFCN_C.:E05TOU  is referenced.
   KL_MACRO_C.:E05TOU  is referenced.
   K_ID_E.:E05TOU  is referenced.
   G_JIT_M.:E05TOU  is referenced.
      No diagnostics issued in procedure KXI$INIT.
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:42   

 **** Variables and constants ****

  ****  Section 000 RoData KXI$INIT

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/b BIT (32)    r     1 PRIVS                      2-0-0/w STRC(48)    r     1 Y_NO_INIT

  ****  Section 001  Data  KXI$INIT

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

    16-0-0/w STRC(128)   r     1 FPT_GDS                   21-0-0/w STRC(128)   r     1 FPT_GDS_IO
     A-0-0/w STRC(144)   r     1 FPT_INTCON                 0-0-0/w STRC(160)   r     1 FPT_SPRIV
    1E-0-0/w STRC(48)    r     1 IO_SEGMENT                29-0-0/w STRC(1552)  r     1 KH_CTLTBL
    8B-0-0/w STRC(128)   r     1 KV$VDH_VDHINT             13-0-0/w STRC(48)    r     1 SEGMENT

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w STRC(256)   r     1 CALL_FPT                  14-0-0/b STRC(16)    r     1 MEMBITS
    14-0-0/w UBIN(16)    r     1 MEMBITS_WORD

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 G$DS3$                     0-0-0/w PTR         r     1 G$DS4$
     0-0-0/w UBIN(16)    r     1 KA_OTPBLKLMT(0:15)
     0-0-0/w UBIN(16)    r     1 KA_OTPUN_BLKLMT(0:15)
     0-0-0/w UBIN(16)    r     1 KV_B_POOL#                 0-0-0/w STRC(8960)  r     1 KV_STT
     0-0-0/w UBIN(16)    r     1 KX_ATR                     0-0-0/w SBIN(32)    r     1 KX_AVL_IOMEM
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:43   
     0-0-0/w SBIN(32)    r     1 KX_AVL_MEM                 0-0-0/w UBIN(16)    r     1 KX_INHLVL
     0-0-0/w UBIN(16)    r     1 KX_IOBFRS                  0-0-0/w UBIN(16)    r     1 KX_IOMEM
     0-0-0/w UBIN(16)    r     1 KX_LINERRDSCLMT            0-0-0/w UBIN(16)    r     1 KX_LINERRLOGBFRLMT
     0-0-0/w UBIN(16)    r     1 KX_LINERRLOGLMT            0-0-0/w UBIN(16)    r     1 KX_MEM
     0-0-0/w UBIN(16)    r     1 KX_MEMBITS                 0-0-0/b EPTR        r     1 KX_PM$(0:2)
     0-0-0/w UBIN(16)    r     1 KX_RCVQSIZ                 0-0-0/w UBIN(16)    r     1 KX_RSC
     0-0-0/w UBIN(16)    r     1 KX_SNDQSIZ                 0-0-0/w STRC(800)   r     1 KX_STATS_HDLC
     0-0-0/w STRC(1248)  r     1 KX_STATS_X25               0-0-0/w STRC(1248)  r     1 KX_STATS_X29
     0-0-0/w UBIN(16)    r     1 KX_TRC                     0-0-0/w UBIN(16)    r     1 KX_TRCBFR
     0-0-0/w UBIN(16)    r     1 KX_TYPAHDBFRLMT            0-0-0/w UBIN(16)    r     1 KX_VDHTRC
     0-0-0/w UBIN(16)    r     1 KX_WRSYSLOGMSK             0-0-0/w UBIN(16)    r     1 KX_X29MLTMR

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(168)   r     1 KX$PACKET


   Procedure KXI$INIT requires 561 words for executable code.
   Procedure KXI$INIT requires 32 words of local(AUTO) storage.

    No errors detected in file KXI$INIT.:E05TSI    .
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:44   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:45   
          MINI XREF LISTING

CALL_FPT
     14729**DCL     14972<<ASSIGN  14974<>CALL
CALL_FPT.EVN
     14733**DCL     14973<<ASSIGN
CALL_FPT.PRM1$
     14734**DCL     14735--REDEF
CALL_FPT.PRM2$
     14736**DCL     14736--REDEF
FPT_GDS
     12855**DCL     14916<>CALL
FPT_GDS.V
     12858**DCL     12858--DCLINIT
FPT_GDS.V.PAGES
     12862**DCL     14912<<ASSIGN
FPT_GDS_IO
     12901**DCL     14931<>CALL
FPT_GDS_IO.V
     12904**DCL     12904--DCLINIT
FPT_GDS_IO.V.PAGES
     12908**DCL     14930<<ASSIGN
FPT_INTCON
     12808**DCL     14946<>CALL    14948<>CALL
FPT_INTCON.V
     12812**DCL     12810--DCLINIT
FPT_INTCON.V.LEVEL
     12812**DCL     14945<<ASSIGN  14947<<ASSIGN
FPT_INTCON.V.RUNLEVEL
     12812**DCL     14944<<ASSIGN
FPT_SPRIV
     12785**DCL     14851<>CALL
FPT_SPRIV.V
     12787**DCL     12787--DCLINIT
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:46   
G$DS3$
     14278**DCL     14915>>ASSIGN
G$DS4$
     14277**DCL     14831--IMP-PTR
IO_SEGMENT
     12881**DCL     12904--DCLINIT
IO_SEGMENT.BASE
     12885**DCL     12885--REDEF
IO_SEGMENT.BASE$
     12885**DCL     14933>>ASSIGN  14934>>ASSIGN
IO_SEGMENT.PAGES
     12885**DCL     14934>>ASSIGN
KA_OTPBLKLMT
     14294**DCL     14898--ASSIGN
KA_OTPUN_BLKLMT
     14293**DCL     14900--ASSIGN
KHA$INIT
     12746**DCL-ENT 14857--CALL
KHA$INIT_CHANTBL
     12748**DCL-ENT 14979--CALL
KHA$INIT_CONTROL
     12747**DCL-ENT 14903--CALL
KHA$INIT_DONE
     12749**DCL-ENT 14986--CALL
KHD$SCREECH
     12759**DCL-ENT 15004--CALL
KH_CTLTBL
     12931**DCL     14903<>CALL
KH_CTLTBL.PARM.FLAGS.INIT_ONLY
     12981**DCL     14863<<ASSIGN  14865<<ASSIGN  14867<<ASSIGN  14869<<ASSIGN  14871<<ASSIGN  14873<<ASSIGN
     14875<<ASSIGN  14877<<ASSIGN  14879<<ASSIGN  14881<<ASSIGN  14883<<ASSIGN  14885<<ASSIGN  14887<<ASSIGN
     14889<<ASSIGN  14891<<ASSIGN  14893<<ASSIGN  14895<<ASSIGN  14897<<ASSIGN  14899<<ASSIGN  14901<<ASSIGN
KH_CTLTBL.PARM.PTR$
     13057**DCL     14862<<ASSIGN  14864<<ASSIGN  14866<<ASSIGN  14868<<ASSIGN  14870<<ASSIGN  14872<<ASSIGN
     14874<<ASSIGN  14876<<ASSIGN  14878<<ASSIGN  14880<<ASSIGN  14882<<ASSIGN  14884<<ASSIGN  14886<<ASSIGN
     14888<<ASSIGN  14890<<ASSIGN  14892<<ASSIGN  14894<<ASSIGN  14896<<ASSIGN  14898<<ASSIGN  14900<<ASSIGN
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:47   
KV$VDH_VDHINT
     14201**DCL     14926<>CALL    14938<>CALL
KV$VDH_VDHINT.BFRBGN$
     14201**DCL     14920<<ASSIGN  14933<<ASSIGN
KV$VDH_VDHINT.BFREND$
     14201**DCL     14921<<ASSIGN  14934<<ASSIGN
KV$VDH_VDHINT.DBG
     14202**DCL     14919<<ASSIGN
KV$VDH_VDHINT.MAXPWR2
     14202**DCL     14923<<ASSIGN  14936<<ASSIGN
KV$VDH_VDHINT.MINBFR
     14201**DCL     14922<<ASSIGN  14935<<ASSIGN
KV$VDH_VDHINT.RCVCQ_BYTSIZ
     14205**DCL     14924<<ASSIGN
KV$VDH_VDHINT.SNDCQ_BYTSIZ
     14205**DCL     14925<<ASSIGN
KVB$INT
     12758**DCL-ENT 14938--CALL
KVM$RCV
     12757**DCL-ENT 14993--CALL
KVV$VDHINT
     12756**DCL-ENT 14926--CALL
KV_B_POOL#
     14276**DCL     14937<<ASSIGN
KV_STT.REQSTATS.DSPENT
     14580**DCL     14964<<ASSIGN
KV_STT.REQSTATS.DSPMSK
     14574**DCL     14580--REDEF
KV_STT.REQSTATS.SLCENT
     14622**DCL     14955<<ASSIGN  14956<<ASSIGN  14957<<ASSIGN  14958<<ASSIGN
KV_STT.REQSTATS.SLCMSK
     14615**DCL     14622--REDEF
KX$PACKET
     14777**DCL     14935--ASSIGN
KX$PACKET.CTL
     14784**DCL     14784--REDEF
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:48   
KX$PACKET.LCN#
     14813**DCL     14814--REDEF
KX$PACKET.RLS_STAT
     14779**DCL     14780--REDEF
KX$PACKET.TYPE
     14814**DCL     14814--REDEF   14826--REDEF
KX$PACKET.TYPE_BITS.PS
     14818**DCL     14818--REDEF
KXA$ADMIN
     12751**DCL-ENT 14979--CALL
KXF$FRAME
     12755**DCL-ENT 14974--CALL
KXH$INTHND
     12753**DCL-ENT 12812--DCLINIT
KXS$EXPAUT
     12762**DCL-ENT 14850--CALL
KXS$TMR
     12752**DCL-ENT 14857--CALL
KX_ATR
     13806**DCL     14870--ASSIGN  14979<>CALL
KX_AVL_IOMEM
     13811**DCL     14932<<ASSIGN
KX_AVL_MEM
     13811**DCL     14917<<ASSIGN
KX_INHLVL
     13804**DCL     14862--ASSIGN  14944>>ASSIGN  14945>>ASSIGN  14947>>ASSIGN
KX_IOBFRS
     13810**DCL     14896--ASSIGN
KX_IOMEM
     13805**DCL     14866--ASSIGN  14913>>IF      14930>>ASSIGN  14932>>ASSIGN
KX_LINERRDSCLMT
     13807**DCL     14880--ASSIGN
KX_LINERRLOGBFRLMT
     13807**DCL     14876--ASSIGN
KX_LINERRLOGLMT
     13806**DCL     14874--ASSIGN
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:49   
KX_MEM
     13804**DCL     14864--ASSIGN  14912>>ASSIGN  14913>>IF      14917>>ASSIGN
KX_MEMBITS
     13810**DCL     14894--ASSIGN  14918>>ASSIGN
KX_RCVQSIZ
     13809**DCL     14890--ASSIGN  14924>>ASSIGN
KX_RSC
     13805**DCL     14868--ASSIGN  14979<>CALL
KX_SNDQSIZ
     13809**DCL     14892--ASSIGN  14925>>ASSIGN
KX_STATS_HDLC.REQSTATS.DSPENT
     13419**DCL     14961<<ASSIGN
KX_STATS_HDLC.REQSTATS.DSPMSK
     13413**DCL     13419--REDEF
KX_STATS_HDLC.REQSTATS.SLCENT
     13461**DCL     14952<<ASSIGN
KX_STATS_HDLC.REQSTATS.SLCMSK
     13454**DCL     13461--REDEF
KX_STATS_X25.REQSTATS.DSPENT
     13744**DCL     14962<<ASSIGN
KX_STATS_X25.REQSTATS.DSPMSK
     13738**DCL     13744--REDEF
KX_STATS_X25.REQSTATS.SLCENT
     13786**DCL     14953<<ASSIGN
KX_STATS_X25.REQSTATS.SLCMSK
     13779**DCL     13786--REDEF
KX_STATS_X29.REQSTATS.DSPENT
     14114**DCL     14963<<ASSIGN
KX_STATS_X29.REQSTATS.DSPMSK
     14108**DCL     14114--REDEF
KX_STATS_X29.REQSTATS.SLCENT
     14156**DCL     14954<<ASSIGN
KX_STATS_X29.REQSTATS.SLCMSK
     14149**DCL     14156--REDEF
KX_TRC
     13808**DCL     14882--ASSIGN
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:50   
KX_TRCBFR
     13809**DCL     14888--ASSIGN
KX_TYPAHDBFRLMT
     13806**DCL     14872--ASSIGN
KX_VDHTRC
     13808**DCL     14884--ASSIGN
KX_WRSYSLOGMSK
     13808**DCL     14886--ASSIGN
KX_X29MLTMR
     13808**DCL     14878--ASSIGN
M$GDS
      8134**DCL-ENT 14916--CALL    14931--CALL
M$INTCON
      8113**DCL-ENT 14946--CALL    14948--CALL
M$SPRIV
      8128**DCL-ENT 14851--CALL
M$SYS
      8114**DCL-ENT 14907--CALL
MEMBITS
     14746**DCL     14754--REDEF
MEMBITS.DBG
     14747**DCL     14919>>ASSIGN
MEMBITS_WORD
     14754**DCL     14918<<ASSIGN
PRIVS
     12770**DCL     12787--DCLINIT
SCREECH
     14973**LABEL   14851--CALLALT 14857--CALLALT 14903--CALLALT 14907--CALLALT 14916--CALLALT 14926--CALLALT
     14931--CALLALT 14938--CALLALT 14946--CALLALT 14948--CALLALT 14979--CALLALT 14986--CALLALT
SEGMENT
     12835**DCL     12858--DCLINIT
SEGMENT.BASE
     12839**DCL     12839--REDEF
SEGMENT.BASE$
     12839**DCL     14915<<ASSIGN  14920>>ASSIGN  14921>>ASSIGN
SEGMENT.PAGES
PL6.E3A0      #001=KXI$INIT File=KXI$INIT.:E05TSI                                WED 07/30/97 02:21 Page:51   
     12839**DCL     14921>>ASSIGN
Y_NO_INIT
     14235**DCL     15004<>CALL
