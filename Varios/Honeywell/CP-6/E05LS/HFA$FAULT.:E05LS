VERSION E05

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI                                                                  1    BMAP - B00     
                                         1  *M* HFA$FAULT - BMAP portion of monitor fault handler
                                         2  *T***********************************************************
                                         3  *T*                                                         *
                                         4  *T* Copyright (c) Bull HN Information Systems Inc., 1997    *
                                         5  *T*                                                         *
                                         6  *T***********************************************************
                                         7  *
                                         8  *P* NAME:        HFA$FAULT
                                         9  *P*
                                        10  *P* PURPOSE:     HFA$FAULT is the assembly language portion
                                        11  *P*              of the CP-6 fault handler.
                                        12  *P*
                                        13  *P* DESCRIPTION: Entered on all faults when the CP-6 monitor is
                                        14  *P*              in control.  Reads hardware information
                                        15  *P*              relevant to fault processing and determines
                                        16  *P*              the appropriate action to take as a result
                                        17  *P*              of the fault.

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER                                          2    BMAP - B00     
                                        18         TTL     CP6 FAULT HANDLER
                                        19         ENTDEF  HFA$FAULT
                                        20         ENTDEF  HFA$CLEARCPU
                                        21         ENTDEF  HFA$RELIEFCPU
                                        22         ENTDEF  HFA$CSHERR
                                        23         ENTDEF  HFA$FLTREG
                                        24         ENTDEF  HFA$P
                                        25         ENTDEF  HFA$SCRCPU
                                        26         ENTDEF  HFA$STARTCPU
                                        27         ENTDEF  HFA$STOPCPUT
                                        28         ENTDEF  HFA$STOPCPU
                                        29         ENTDEF  HFA$XDELRTN
                                        30  *
                                        31         ENTREF  HFB$CMD
                                        32         ENTREF  HFB$CONNECT
                                        33         ENTREF  HFB$CSHERR
                                        34         ENTREF  HFB$DIAGSNAP
                                        35         ENTREF  HFB$HDWR
                                        36         ENTREF  HFB$MPF
                                        37         ENTREF  HFB$MSF
                                        38         ENTREF  HFB$STR
                                        39         ENTREF  HFB$VISIBLE
                                        40         ENTREF  HFC$DIS
                                        41         ENTREF  HFC$RELIEF
                                        42         ENTREF  HFC$BMAP_CLOCK
                                        43         ENTREF  IRM$DELTAQ
                                        44         ENTREF  IRM$RCVR3
                                        45         ENTREF  JSE$ABORTM
                                        46         ENTREF  JSN$FIXSS
                                        47         ENTREF  MMV$PAGE
                                        48         ENTREF  SSC$MONTIMRWU
                                        49         ENTREF  SSC$SASYNC
                                        50         ENTREF  SSC$SERV
                                        51         ENTREF  SSS$SEXIT
                                        52         ENTREF  SSS$TIME
                                        53         ENTREF  SSU$DELTAGO
                                        54         ENTREF  UDN$MAGIC
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER                                          3    BMAP - B00     
                                        55         ENTREF  UDN$MGRES
                                        56         ENTREF  UDN$MGSAVE
                                        57         ENTREF  X66_AALT
                                        58         ENTREF  X66_ARET
                                        59         ENTREF  X66_AUTO_0
                                        60         ENTREF  X66_AUTO_5
                                        61  *
                                        62         SEGREF  CDTFSID         CHANGE DESCRIPTOR TYPE FIELD
                                        63         SEGREF  ISBSID          BYPASS CACHE
                                        64         SEGREF  LSSID           MONITOR LINKAGE SEGMENT
                                        65         SEGREF  MISCSID         MISC. DESCRIPTOR
                                        66         SEGREF  MTSTACKSID      MONITOR TSTACK
                                        67         SEGREF  RCVENTSID       RECOVERY ENTRY
                                        68         SEGREF  REALSID         REAL MEMORY PAGES 0-3
                                        69         SEGREF  SCRCHENTSID     SCREECH ENTRY
                                        70         SEGREF  SCUSID          BASE SYSTEM CONTROLLER
                                        71         SEGREF  SSRSID          SAFE STORE REGISTER
                                        72         SEGREF  TSTACKSID       USER TSTACK
                                        73         SEGREF  XDLTENTSID      XDELTA ENTRY
                                        74  *
                                        75         SYMREF  B_MPT
                                        76         SYMREF  H_DSMASK
                                        77         SYMREF  H_ENMASK
                                        78         SYMREF  H_CNNCTMLBX
                                        79         SYMREF  H_CPUGATE
                                        80         SYMREF  H_DPS8000_CI_TABLE
                                        81         SYMREF  H_FLTCNT
                                        82         SYMREF  H_FLTREG
                                        83         SYMREF  H_FLTREG_MASK
                                        84         SYMREF  H_HRMODE
                                        85         SYMREF  H_HRMODE_MASK
                                        86         SYMREF  H_LUFREG
                                        87         SYMREF  H_LUFREG_MASK
                                        88         SYMREF  H_MIXED_FLT
                                        89         SYMREF  H_MIXED_TRO
                                        90         SYMREF  H_RELOAD_CACHE
                                        91         SYMREF  H_RELOAD_MODE
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER                                          4    BMAP - B00     
                                        92         SYMREF  H_SAVE_SS
                                        93         SYMREF  H_SNAP
                                        94         SYMREF  H_S1000_FLG
                                        95         SYMREF  H_RPM_FLG
                                        96         SYMREF  H_TIME
                                        97         SYMREF  H_RLF_GATE
                                        98         SYMREF  H_RELIEF
                                        99         SYMREF  H_NURSE
                                       100         SYMREF  H_FAIL_PORT
                                       101         SYMREF  H_FAIL_NUM
                                       102         SYMREF  H_S1000_CONFIG
                                       103         SYMREF  H_XDELTA
                                       104         SYMREF  IRM_SCODE
                                       105         SYMREF  IRM_SNAPSLOT
                                       106         SYMREF  IRM_SSF
                                       107         SYMREF  IT_CP6UP
                                       108         SYMREF  IT_XDELTA
                                       109         SYMREF  IT_SCPUWSPTD
                                       110         SYMREF  B$WSQ0PT$
                                       111         SYMREF  NI$DS
                                       112         SYMREF  SC_HFA6
                                       113         SYMREF  SC_HFA7
                                       114         SYMREF  SC_HFSSF
                                       115         SYMREF  SC_HFTSF
                                       116         SYMREF  SC_QXDELTA
                                       117         SYMREF  SC_SLAVE
                                       118         SYMREF  S_CUN
                                       119         SYMREF  S_INCTIME
                                       120         SYMREF  S_ITIME
                                       121         SYMREF  S_MONSSR
                                       122         SYMREF  S_MPSTATE
                                       123         SYMREF  S_NSCPU
                                       124         SYMREF  S_OPTION_REG
                                       125         SYMREF  S_PDBR
                                       126         SYMREF  S_PNO
                                       127         SYMREF  S_PORTNR
                                       128         SYMREF  S_PTWAM
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER                                          5    BMAP - B00     
                                       129         SYMREF  S_PTYPE
                                       130         SYMREF  S_RETRY
                                       131         SYMREF  S_SSPTYPE
                                       132         SYMREF  S_TRO_SS
                                       133         SYMREF  S_WSR
                                       134         SYMREF  S_RLF_SSR
                                       135         SYMREF  S_XX
                                       136         SYMREF  S_DPR2
                                       137         SYMREF  S_RVA
                                       138         SYMREF  S_STOP
                                       139         SYMREF  S_TIMR

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER                                          6    BMAP - B00     
                                       140         EJECT
                                       141  *      ALIGN macro is used to reserve space up to the desired
                                       142  *      place within a four word block. The containing section
                                       143  *      must have the attribute EIGHT for ALIGN to work properly.
                                       144  *      Invoked as follows:
                                       145  *      ALIGN   {1,2,3,4}
                                       146  *
                                       147  ALIGN  MACRO
                                       148  _1     SET     *-HFA$FAULT
                                       149  _2     SET     _1/4*4
                                       150  _2     SET     _1-_2
                                       151  _2     SET     4+#1-_2
                                       152         IFE     _2,1
                                       153         NOP
                                       154         IFE     _2,2,2
                                       155         TRA     2,IC
                                       156         NOP
                                       157         IFE     _2,3,3
                                       158         TRA     3,IC
                                       159         NOP
                                       160         NOP
                                       161         IFE     _2,5
                                       162         NOP
                                       163         IFE     _2,6,2
                                       164         TRA     2,IC
                                       165         NOP
                                       166         IFE     _2,7,3
                                       167         TRA     3,IC
                                       168         NOP
                                       169         NOP
                                       170         ENDM    ALIGN

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER                                          7    BMAP - B00     
                                       171         EJECT
                                       172  CALL6  MACRO                   CP-6 CALLING SEQUENCE
                                       173         CRSM    SAVE,OFF
                                       174         INE     .PTR_N,0
                                       175         EPPR0   PTR_LIST,,DS    POINTER LIST IF PARAMS PASSED
                                       176         EPPR1   =V18/.PTR_N,18/0 DISCRIPTOR LIST ALWAYS INCLUDED
                                       177         TSX1    #1              TRANSFER TO THE CALLED ROUTINE
                                       178         IFE     '#2',''         ALTRET SPECIFIED?
                                       179         NOP                     NO ALTRET
                                       180         INE     '#2',''         ALTRET SPECIFIED?
                                       181         TRA     #2              ALTRET BRANCH
                                       182  .PTR_N SET     0
                                       183         CRSM    RESTORE
                                       184         ENDM    CALL6
                                       185  *
                                       186  ARG6   MACRO                   CP-6 PARAMETERS
                                       187         CRSM    SAVE,OFF
                                       188         IFE     '#2','STATIC',2 STATIC VARIABLE
                                       189         EPPR    TP,#1
                                       190         STP     TP,PTR_LIST+.PTR_N,,DS
                                       191         IFE     '#2','AUTO',2   AUTO VARIABLE
                                       192         EPPR    TP,#1,,DS
                                       193         STP     TP,PTR_LIST+.PTR_N,,DS
                                       194  .PTR_N SET     .PTR_N+1
                                       195         CRSM    RESTORE
                                       196         ENDM    ARG6
                                       197  *
             000000000000              198  .PTR_N SET     0

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER                                          8    BMAP - B00     
                                       199         EJECT
             0000 00 2 77 00 0 3       200  ZOP    OPD     12/0,6/0,2/2,O6/77,6/0,2/0,2/3
                                       201  *
                                       202  COPYHR MACRO                   COPY HISTORY REGISTERS
                                       203         LXL2    HRLVLS,CPU      LOAD LOOP COUNTER
                                       204         ALIGN   4
                                       205         SCPR    ,#1TAGS,TP      STORE A HISTORY REGISTER
                                       206         AWD     #2,,TP          BUMP PTR BY 2 OR 4 WORDS
                                       207         SBLX2   1,DU            DECREMENT LOOP COUNTER
                                       208         TPNZ    *-3             LOOP UNTIL ALL REGISTERS STORED
                                       209         ENDM    COPYHR
             1564 00 2 0000 03         210  RICHR  OPD O12/1564,6/,O2/2,12/,O4/3   RESTORE HIST REGS ON DPS90
                                       211  *
             1544 00 2 0000 03         212  SICHR  OPD O12/1544,6/,O2/2,12/,O4/3   SAVE HIST REGS ON DPS90
                                       213  *
             6120 00 2 0000 03         214  DIAG   OPD O12/6120,6/,O2/2,12/,O4/3   DIAG INSTR ON DPS90
                                       215  *
                                       216  COPY90 MACRO                   COPY HISTORY REGISTERS
                                       217         LXL2    HRLVLS,CPU      LOAD LOOP COUNTER
                                       218         ALIGN   4
                                       219         SICHR   ,,TP            STORE A HISTORY REGISTER
                                       220         AWD     1,,TP           BUMP PTR BY ONE WORD
                                       221         SBLX2   1,DU            DECREMENT LOOP COUNTER
                                       222         TPNZ    *-3             LOOP UNTIL ALL REGISTERS STORED
                                       223         ENDM    COPY90
                                       224         LODM    B_BMACROS_C
                                       225         PMC     ON
                                       226         MAGIC
             000000000000                   MPT.SS EQU 0             SS$
             000000000001                   MPT.LS EQU MPT.SS+1      LS$
             000000000002                   MPT.AS EQU MPT.LS+1      AS$
             000000000003                   MPT.PS EQU MPT.AS+1      PS$
             000000000004                   MPT.TCB EQU MPT.PS+1      TCB$
             000000000005                   MPT.ECCB EQU MPT.TCB+1     ECCB$
             000000000006                   MPT.SSDESC EQU MPT.ECCB+1    SSDESC$
             000000000007                   MPT.LSDESC EQU MPT.SSDESC+1  LSDESC$
             000000000010                   MPT.ASDESC EQU MPT.LSDESC+1  ASDESC$
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER                                          9    BMAP - B00     
             000000000011                   MPT.PSDESC EQU MPT.ASDESC+1  PSDESC$
             000000000012                   MPT.TCBDESC EQU MPT.PSDESC+1  TCBDESC$
             000000000013                   MPT.ECCBDESC EQU MPT.TCBDESC+1 ECCBDESC$
             000000000006                   MAGIC.ND EQU 6             NUMBER OF MAGIC DESCRIPTORS
                                       227         PMC     OFF
                                       228         DETAIL  OFF
             000000000000              229         MONLS
                                       230         DETAIL  ON

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER                                          10   BMAP - B00     
                                       231         EJECT
                                       232                 *************************************************
                                       233                 *
                                       234                 * ASSEMBLY TIME DATA DECLARATIONS
                                       235                 *
                                       236                 *************************************************
                                       237                 *************************************************
                                       238                 * POINTER REGISTER EQUIVALENCIES
                                       239                 *************************************************
             000000000000              240  TP     EQU     0               SCRATCH DR,AR
             000000000002              241  DS     EQU     2               DR,AR FOR AUTOMATIC DATA SPACE
             000000000006              242  SS     EQU     6               DR,AR FOR SAFE STORE
                                       243                 *************************************************
                                       244                 * INDEX REGISTER EQUIVALENCIES
                                       245                 *************************************************
             000000000005              246  PNO    EQU     5               PROCESSOR NUMBER FROM S_PNO
             000000000006              247  CPU    EQU     6               CPU TYPE (0=L66, 1=DPSE, 2=ELS1)
             000000000007              248  FLT    EQU     7               RIGHT ALIGNED FAULT CODE
                                       249                 *************************************************
                                       250                 * SCPR TAGS
                                       251                 *************************************************
             000000000001              252  FLTAGS EQU     1               SCPR TAG FOR FAULT REGISTER
             000000000003              253  EFLTAGS EQU    3               SCPR TAG FOR ELS1 EXT FLT REG
             000000000006              254  MDTAGS EQU     6               SCPR TAG FOR MODE REGISTER
             000000000020              255  CUTAGS EQU     16              SCPR TAG FOR CUHR
             000000000040              256  OUTAGS EQU     32              SCPR TAG FOR OUHR
             000000000010              257  DUTAGS EQU     8               SCPR TAG FOR DUHR
             000000000000              258  VUTAGS EQU     0               SCPR TAG FOR VUHR
             000000000016              259  PTWTAGS EQU    14              SCPR TAG FOR PTWAM REG FOR ELS
             000000000017              260  PDWTAGS EQU    15              SCPR TAG FOR PTWAM DIR FOR ELS
                                       261                 *************************************************
                                       262                 * LCPR TAGS
                                       263                 *************************************************
             000000000002              264  LUTAGL EQU     2               LCPR TAG FOR LOCKUP REGISTER
             000000000004              265  MDTAGL EQU     4               LCPR TAG FOR MODE REGISTER
             000000000003              266  ZHTAGL EQU     3               LCPR TAG FOR ZERO A HR
                                       267                 *************************************************
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER                                          11   BMAP - B00     
                                       268                 * ACTION CODES
                                       269                 *************************************************
             000000000001              270  CNCACT EQU     1               TO RETURN CLIMB
             000000000002              271  RLIEF     EQU  2               RELIEF ACTION
             000000000003              272  SXTACT EQU     3               TO SEXIT
             000000000004              273  PGEFLT EQU     4               TO MMV$PAGE
             000000000005              274  ABTACT EQU     5               TO ABORTM
             000000000006              275  DGOACT EQU     6               TO DELTAGO
             000000000007              276  SCRACT EQU     7               TO SCREECH
                                       277                 *************************************************
                                       278                 * AUTOMATIC DATA SPACE DEFINITION
                                       279                 *************************************************
             000000000003              280  PTR_LIST EQU   3               SPACE FOR 4 WORD POINTER LIST
             000000000007              281  MAGICS EQU     PTR_LIST+4      MAGIC SEGMENT STORAGE
             000000000023              282  ACTION EQU     MAGICS+MAGIC.ND*2 ACTION CODE
             000000000024              283  TACTON EQU     ACTION+1        TEMP COPY OF ACTION CODE
             000000000025              284  SCODE  EQU     TACTON+1        SCREECH CODE
             000000000026              285  TEMP1  EQU     SCODE/2*2+2     TEMPROARY DOUBLEWORD
             000000000030              286  MODE   EQU     TEMP1+2         MODE REGISTER
             000000000032              287  SSR    EQU     MODE+2          SAFE STORE REGISTER
             000000000034              288  RVA    EQU     SSR+2           RVA FROM FAULT FRAME
             000000000035              289  FINFO  EQU     RVA+1           START OF FAULT INFO STRUCTURE
             000000000035              290  SUBCODE EQU    FINFO           BIT 0-8 -> PORT # (FROM S_PORTNR)
                                       291  *                              BIT 13 -> SET IF DPSE AND HISTORY
                                       292  *                                REGS ARE TRACE TRANSFER MODE
                                       293  *                              BIT 14-17 -> PROCESSOR TYPE (FROM
                                       294  *                                S_PTYPE)
                                       295  *                              BIT 18-35 -> ECC SUBCODE
             000000000036              296  FLTREG EQU     SUBCODE+1       FAULT REGISTER
             000000000037              297  ERROR  EQU     FLTREG+1        ERROR CODE
             000000000040              298  WORDS  EQU     ERROR+1         0 IF NO HISTORY REGS FOLLOW
             000000000042              299  HISTREG EQU    WORDS/2*2+2     START OF HISTORY REGISTERS
             000000000042              300  DSIZE  EQU     HISTREG         SIZE OF AUTO WITHOUT HR'S
                                       301                 *************************************************
                                       302                 * SAFE STORE OFFSETS
                                       303                 *************************************************
             000000000001              304  UNUSE0 EQU     1               UNUSED WORD 1 SSF
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER                                          12   BMAP - B00     
             000000000007              305  UNUSE1 EQU     7               REUSE WORD 7 SSF (RVA)
             000000000001              306  AUTOLOC EQU    1               -(CURRENT OFFSET+1) IN BITS 18-35
             000000000004              307  ICIR   EQU     4               WORD CONTAINING IC & IR
             000000000005              308  FCODE  EQU     5               WORD CONTAINING FAULT CODE
             000000000006              309  CPUTYP EQU     6               IF MULTIWORD INTERRUPT BIT SET,
                                       310  *                                BIT 18 IS SET
                                       311  *                                BIT 19-23 - CPU TYPE
             000000000010              312  ISR    EQU     8               DW CONTAING ISR
             000000000014              313  LSR    EQU     12              DW CONTAINING LSR
             000000000076              314  TSTAMP BOOL    76              52-BIT REAL-TIME CLOCK FROM SCU
                                       315                 *************************************************
                                       316                 * CPU TYPE DEFINITIONS
                                       317                 *************************************************
             000000000000              318  L66    EQU     0
             000000000001              319  DPSE   EQU     1
             000000000002              320  ELS1   EQU     2
             000000000003              321  ADP    EQU     3
             000000000004              322  DPS90  EQU     4
             000000000005              323  DPS90X EQU     5
             000000000006              324  RPM    EQU     6
                                       325                 *************************************************
                                       326                 * SOFTWARE CHECK CODES
                                       327                 *************************************************
             000000001000              328  STARTU   EQU   512
             000000001003              329  EXECUT   EQU   515
                                       330                 *************************************************
                                       331                 * REAL MEMORY ADDRESSES
                                       332                 *************************************************
             000000000034              333  PMMELOC BOOL   34              PMME ENTRY DESCRIPTOR

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - M A I N   F L O W                      13   BMAP - B00     
                                       334         TTLS    CP6 FAULT HANDLER - M A I N   F L O W
                                       335                 *************************************************
                                       336                 *
                                       337                 * HFA$FAULT ROUTINE ENTRY POINT
                                       338                 *
                                       339                 *************************************************
                                       340  *
                                       341  *D* NAME:        HFA$FAULT
                                       342  *D*
                                       343  *D* DESCRIPTION: HFA$FAULT is the entry point in the monitor
                                       344  *D*              for all faults.  The action of the fault
                                       345  *D*              handler is determined by the fault code in the
                                       346  *D*              current safe-store frame.  If the diagnostic
                                       347  *D*              snapshot mode is set, the contents of the page
                                       348  *D*              table associative memory are stored in monitor
                                       349  *D*              static data for certain faults.
                                       350  *D* *
                                       351  *D*              For timer runout faults:  If the monitor was
                                       352  *D*              running (should not occur) we return to the
                                       353  *D*              interrupted instruction.  If the user was
                                       354  *D*              running, we wake up SSC$MONTIMRWU sleepers and
                                       355  *D*              go to the scheduler via SSS$SEXIT.
                                       356  *D* *
                                       357  *D*              For all other faults, we go to XDELTA if XDELTA
                                       358  *D*              has requested control via KEA, KEM, or a
                                       359  *D*              breakpoint in the monitor.  If XDELTA has not
                                       360  *D*              requested control or upon return from XDELTA,
                                       361  *D*              we allocate auto space in MONITOR TSTACK and
                                       362  *D*              read the hardware history registers if locked.
                                       363  *D* *
                                       364  *D*              The following is a partial list of the fault
                                       365  *D*              frame in MONITOR TSTACK:
                                       366  *D* *
                                       367  *D*              WORD#  BIT#  DESCRIPTION
                                       368  *D*              .30    0-71  MODE REGISTER
                                       369  *D*              .32    0-71  SAFE-STORE REGISTER AFTER FAULT
                                       370  *D*              .34    0-8   PORT# OF FAULTING CPU (S_PORTNR)
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - M A I N   F L O W                      14   BMAP - B00     
                                       371  *D*              .34    13    DPSE TRACE TRANSFER MODE
                                       372  *D*              .34    14-17 PROCESSOR TYPE (S_PTYPE)
                                       373  *D*              .34    18-35 ECC SUBCODE
                                       374  *D*              .35    0-35  FAULT REGISTER BITS 0-35
                                       375  *D*              .36    0-35  ERROR CODE
                                       376  *D*              .36    28-32 FAULT CODE
                                       377  *D*              .37    0-35  # OF HISTORY REG. WORDS FOLLOWING
                                       378  *D*              .40          START OF HISTORY REGISTERS
                                       379  *D* *
                                       380  *D*              For most faults we go to a PL6 fault processing
                                       381  *D*              routine in HFB$FPR.  Upon return from HFB$FPR,
                                       382  *D*              we take one of the following actions as set
                                       383  *D*              by HFB$FPR:  SCREECH (LTRAD via SCRCHENTSID),
                                       384  *D*              ABORTM - abort user (block for master CPU and
                                       385  *D*              call JSE$ABORTM), DELTAGO - go to user DELTA
                                       386  *D*              (call SSU$DELTAGO), SEXIT - service exit via
                                       387  *D*              scheduler (call SSS$SEXIT), or CNCFLT - connect
                                       388  *D*              fault action (RETURN CLIMB back to interrupted
                                       389  *D*              instruction).
                                       390  *
                                       391         INHIB   ON
 0 000000                              392         USE     HFA$FAULT,1
                                       393         EIGHT
   000000                              394  HFA$FAULT NULL                 ALL FAULTS COME HERE AFTER PREPRE
   000000                              395  HFA$P  NULL
   000000  X 000000 2352 00            396         LDA     H_SNAP          IS DIAGNOSTIC SNAP MODE SET?
   000001 (0)000003 6056 00            397         TPNZ    *+2             YES -> MIGHT WANT TO DUMP PTWAM
   000002    000002 5326 00            398         CAMP    2               NO -> TURN PTWAM ON
   000003    004010 6342 07            399         LDI     =O4010,DL
   000004  X 000000 7252 00            400         LXL     PNO,S_PNO       PROCESSOR NUMBER
   000005  X 000000 7262 15            401         LXL     CPU,S_PTYPE,PNO CPU TYPE
   000006  X 000000 4766 07            402         LDP     SS,SSRSID,DL    SAFE STORE REGISTER
   000007  X 000000 4766 07            403         LDP     SS,CDTFSID,DL   CHANGE TO TYPE 0
   000010  X 000000 4706 07            404         LDP     TP,SCUSID,DL    BASE SYSTEM CONTROLLER
   000011    6 00001 7553 00           405         STA     UNUSE0,,SS      SAVE DIAGNOSTIC SNAP MODE
   000012  X 000000 7042 00            406         TSX4    HFC$BMAP_CLOCK  READ 52-BIT REAL TIME CLOCK
   000013    6 00076 7573 00           407         STAQ    TSTAMP,,SS      TIME STAMP SAFE STORE FRAME
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - M A I N   F L O W                      15   BMAP - B00     
   000014    6 00005 2363 00           408         LDQ     FCODE,,SS
   000015    000001 7722 00            409         QRL     1
   000016    000000 6272 02            410         EAX     FLT,0,QU        RIGHT ALIGNED FAULT CODE
   000017    000037 3672 03            411         ANX     FLT,=O37,DU     ISOLATE 5 BIT FAULT CODE
   000020    000100 3162 03            412         CANQ    =O100,DU        SAFE STORE FULL FAULT?
   000021 (0)000517 6012 00            413         TNZ     SSFLT           YES -> RETURNS TO FLT100 IF USER
   000022 (0)001710 2232 17            414         LDX3    FLTVEC2,FLT     ACTION CODE FROM FLTVEC2 BIT 0-17
   000023 (0)000040 6042 00            415         TMI     FLT040          B IF ACTION CODE IS NEGATIVE
                                       416                 *************************************************
                                       417                 * POSITIVE ACTION CODE - DONT DUMP PTWAM
                                       418                 *************************************************
   000024    6 00001 2343 00           419         SZN     UNUSE0,,SS      DIAGNOSTIC SNAPSHOT MODE SET?
   000025 (0)000031 6046 13            420         TMOZ    BRTAB1,3        NO -> DISPATCH ON ACTION CODE
   000026    000002 5326 00            421         CAMP    2               TURN ON PTWAM - NO NEED TO DUMP
   000027 (0)000031 7102 13            422         TRA     BRTAB1,3        DISPATCH ON ACTION CODE
                                       423  *
   000030    000000 0112 00            424         ALIGN   1
   000031                              425  BRTAB1 NULL
   000031 (0)000060 7102 00            426         TRA     FLT080          ACTION CODE = 0 - CHECK XDEL
   000032 (0)000063 7102 00            427         TRA     FLT100          ACTION CODE = 1 - DONT CHECK XDEL
   000033 (0)001200 7102 00            428         TRA     TROFLT          ACTION CODE = 2 - TIMER RUNOUT
                                       429  *                              ACTION CODE = 3 - DERAIL FAULT
   000034    6 00010 2353 00           430         LDA     ISR,,SS
   000035    000160 3752 07            431         ANA     =O160,DL        WERE WE IN MONITOR?
   000036 (0)000060 6012 00            432         TNZ     FLT080          NO -> CHECK IF XDEL WANTS CONTROL
   000037 (0)000617 7102 00            433         TRA     GOTODEL         YES -> KEYIN DRL OR BREAKPOINT
                                       434  *
                                       435                 *************************************************
                                       436                 * DUMP PTWAM IF DIAGNOSTIC MODE IS SET
                                       437                 *************************************************
                                       438         ALIGN   4
   000040                              439  FLT040 NULL
   000040    6 00001 2343 00           440         SZN     UNUSE0,,SS      DIAGNOSTIC SNAPSHOT MODE SET?
   000041 (0)000044 6056 16            441         TPNZ    BRTAB2,CPU      YES -> DISPATCH ON CPU TYPE
                                       442  *                              NO -> DONT DUMP PTWAM
   000042                              443  FLT060 NULL
   000042 (0)001710 3232 17            444         LCX3    FLTVEC2,FLT     COMPLEMENT OF ACTION CODE
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - M A I N   F L O W                      16   BMAP - B00     
   000043 (0)000052 7102 13            445         TRA     BRTAB3-1,3      DISPATCH ON ACTION CODE
                                       446  *
   000044                              447  BRTAB2 NULL
   000044 (0)000666 7102 00            448         TRA     PTWAM_L66       L66  - RETURNS TO FLT060
   000045 (0)000666 7102 00            449         TRA     PTWAM_L66       DPSE - RETURNS TO FLT060
   000046 (0)000706 7102 00            450         TRA     PTWAM_ELS1      ELS1 - RETURNS TO FLT060
   000047 (0)000042 7102 00            451         TRA     FLT060          ADP
   000050 (0)000042 7102 00            452         TRA     FLT060          DPS90
   000051 (0)000042 7102 00            453         TRA     FLT060          DPS90X
   000052 (0)000706 7102 00            454         TRA     PTWAM_ELS1      RPM - RETURNS TO FLT060
                                       455  *
   000053                              456  BRTAB3 NULL
   000053 (0)000060 7102 00            457         TRA     FLT080          ACTION CODE = -1 - CHECK XDELTA
   000054 (0)000725 7102 00            458         TRA     LUFLT           ACTION CODE = -2 - LOCKUP FAULT
   000055 (0)000060 7102 00            459         TRA     FLT080          ACTION CODE = -3 - UNUSED
   000056 (0)000747 7102 00            460         TRA     EXFLT           ACTION CODE = -4 - EXECUTE FAULT
                                       461  *
                                       462                 *************************************************
                                       463                 * CHECK IF XDELTA WANTS CONTROL
                                       464                 *************************************************
   000057    000000 0112 00            465         ALIGN   4
   000060                              466  FLT080 NULL
   000060  X 000000 4706 07            467         LDP     TP,ISBSID,DL    BYPASS CACHE
   000061    0 X 00000 2343 00         468         SZN     H_XDELTA,,TP    TEST XDELTA FLAG
   000062 (0)000617 6012 00            469         TNZ     GOTODEL         XDELTA WANTS CONTROL
                                       470                 *************************************************
                                       471                 * STAMP FRAME WITH CPU TYPE IF MIR BIT SET
                                       472                 *************************************************
   000063                              473  FLT100 NULL
   000063    6 00004 2363 00           474         LDQ     ICIR,,SS
   000064    000040 3762 07            475         ANQ     =O40,DL         TEST EIS MULTIWORD INT BIT
   000065    6 00006 5523 10           476         STBQ    CPUTYP,10,SS    ZERO BYTE 2 OF CPUTYP WORD IN SS
   000066 (0)000074 6002 00            477         TZE     FLT110          B IF MIR NOT SET
   000067  X 000000 2762 15            478         ORQ     S_SSPTYPE,PNO   MIR SET - MERGE IN CPU SS TYPE
   000070    000014 7362 00            479         QLS     12              MOVE TO BIT 18-23
   000071    6 00006 2563 00           480         ORSQ    CPUTYP,,SS      MERGE INTO CPUTYP WORD IN SS
   000072  X 000000 0542 16            481         AOS     H_MIXED_FLT,CPU INCREMENT MIR FAULT COUNTER
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - M A I N   F L O W                      17   BMAP - B00     
                                       482                 *************************************************
                                       483                 * CHECK IF DSIZE FRAME WILL FIT IN MON TSTACK
                                       484                 *************************************************
   000073    000000 0112 00            485         ALIGN   4
   000074                              486  FLT110 NULL
   000074  X 000000 4726 07            487         LDP     DS,MTSTACKSID,DL USE MONITOR TSTACK FOR FLT HNDLR
   000075    2 00000 7223 00           488         LXL2    0,,DS           -(CURRENT OFFSET+1)
   000076    2 00001 5276 12           489         SWDX    1,2,DS          CURRENT OFFSET -> AR2
   000077  X 000000 0526 00            490         STD     DS,S_DPR2       STORE TSTACK BOUND
   000100  X 000000 2352 00            491         LDA     S_DPR2          PICK UP THE BOUND
   000101    6 00001 7553 00           492         STA     UNUSE0,,SS      STORE THE BOUND
   000102    6 00001 4423 00           493         SXL2    AUTOLOC,,SS     SAVE -(CURRENT OFFSET+1) IN 18-35
   000103    2 00002 2233 00           494         LDX3    2,,DS           NEXT OFFSET+1
   000104    000040 6232 13            495         EAX3    DSIZE-2,3       LAST ADDR OF NEW TSTACK FRAME
   000105    6 00001 1433 00           496         SSX3    UNUSE0,,SS      -(# AVAIL WRDS IN TSTACK) IN 0-17
   000106 (0)000764 6056 00            497         TPNZ    MONTSTK_FULL      Branch if size DSIZE wont fit in TSTACK
   000107    6 00007 2353 00           498         LDA     UNUSE1,,SS     LOAD THE RVA
   000110  X 000000 7552 00            499         STA     S_RVA           SAVE THE VIRTUAL ADDRESS
                                       500                 *************************************************
                                       501                 * ALLOCATE AND INITIALIZE AUTO STORAGE
                                       502                 *************************************************
   000111    000000 2212 03            503         LDX1    0,DU            0 RETURN ADDRESS IN AUTO FRAME
   000112  X 000000 7002 00            504         TSX0    X66_AUTO_0      ALLOCATE DSIZE FRAME
   000113    000042 000000             505         VFD     18/DSIZE,18/0
   000114    2 00002 4403 00           506         SXL0    2,,DS           ASYNC ENTRY IN AUTO FRAME
   000115    000 0 100 1006 00         507         MLR     ,(1)            CLEAR ENTIRE FRAME
   000116    000000 0 0 0 0000         508         ADSC9
   000117    2 00003 0 0 0 0174        509         ADSC9   PTR_LIST,,4*DSIZE-4*PTR_LIST,DS
   000120    2 00007 6307 00           510         ARG6    MAGICS,AUTO
   000121    2 00003 4507 00
   000122    2 00003 6307 00           511         CALL6   UDN$MGSAVE      SAVE PREVIOUS MAGIC FRAME IN AUTO
   000123 (1)000000 6316 00
   000124  X 000000 7012 00
   000125    000000 0112 00
   000126 (1)000001 6316 00            512         CALL6   UDN$MAGIC       BUILD NEW MAGIC FRAME
   000127  X 000000 7012 00
   000130    000000 0112 00

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - M A I N   F L O W                      18   BMAP - B00     
                                       513         EJECT
                                       514                 *************************************************
                                       515                 *
                                       516                 * GATHER FAULT INFORMATION
                                       517                 *
                                       518                 *************************************************
   000131    2 00032 7537 00           519         STSS    SSR,,DS         SAVE SAFE STORE REGISTER IN AUTO
   000132  X 000000 2352 00            520         LDA     S_RVA           LOAD THE S_RVA
   000133    2 00034 7553 00           521         STA     RVA,,DS         SAVE THE RVA IN AUTO
   000134  X 000000 2342 00            522         SZN     H_S1000_FLG
   000135 (0)000140 6042 00            523         TMI     *+3
   000136    2 00026 4523 01           524         SCPR    TEMP1,FLTAGS,DS STORE THE FAULT REGISTER IN DS
   000137 (0)000141 7102 00            525         TRA     *+2
   000140    2 00026 4523 00           526         SFR     TEMP1,,DS
   000141    2 00026 2363 00           527         LDQ     TEMP1,,DS       COPY FAULT REGISTER TO Q REGISTER
   000142    2 00036 7563 00           528         STQ     FLTREG,,DS      STORE THE FAULT REGISTER IN FI
   000143  X 000000 3162 16            529         CANQ    H_FLTREG_MASK,CPU  ARE ANY STATUS BITS ON?
   000144 (0)000150 6002 00            530         TZE     FLT115          NO
   000145  X 000000 2342 15            531         SZN     H_FLTREG,PNO    YES -> IS H_FLTREG ALREADY SET?
   000146 (0)000150 6012 00            532         TNZ     FLT115          YES -> LOG FIRST ERROR ONLY
   000147  X 000000 7562 15            533         STQ     H_FLTREG,PNO    NO -> LOG THIS ERROR
                                       534                 *************************************************
                                       535                 * STORE PROC TYPE AND PORT NUMBER IN FAULT INFO
                                       536                 *************************************************
   000150                              537  FLT115 NULL
   000150  X 000000 2362 15            538         LDQ     S_PTYPE,PNO     PROCESSOR TYPE
   000151    000033 7362 00            539         QLS     27
   000152  X 000000 2352 15            540         LDA     S_PORTNR,PNO    CPU PORT#
   000153    000033 7372 00            541         LLS     27
   000154    2 00035 5513 60           542         STBA    SUBCODE,60,DS   STORE IN UPPER 18 BITS OF SUBCODE
   000155  X 000000 7526 00            543         STWS    S_WSR           SAVE WORKING SPACE REGISTERS
   000156  X 000001 7526 00            544         STWS    S_WSR+1
   000157  X 000000 1516 00            545         SPDBR   S_PDBR          SAVE PAGE DIRECTORY BASE REG
   000160  X 000000 1526 00            546         STO     S_OPTION_REG    SAVE OPTION REG
                                       547                 *************************************************
                                       548                 * SET UP ERROR CODE IN FAULT INFO
                                       549                 *************************************************
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - M A I N   F L O W                      19   BMAP - B00     
   000161    000000 6352 17            550         EAA     0,FLT           FAULT CODE TO AU
   000162    000017 7712 00            551         ARL     15              FAULT CODE TO BITS 28-32
   000163    007640 0752 07            552         ADA     4000,DL         ADD IN 500
   000164 (0)001622 2752 00            553         ORA     ERCODE          OR IN FCG,MID, AND SEV
   000165    2 00037 7553 00           554         STA     ERROR,,DS       STORE ERROR CODE IN FI
   000166    000007 2752 07            555         ORA     =O7,DL          SET SCREECH CODE FOR HFB
   000167    2 00025 7553 00           556         STA     SCODE,,DS
   000170 (0)001710 7222 17            557         LXL2    FLTVEC2,FLT     ACTION CODE - FLTVEC2 BIT 18-35
   000171 (0)000321 6012 00            558         TNZ     FLT140          B IF NOT OK TO READ MODE REG
   000172  X 000000 2342 00            559         SZN     H_S1000_FLG
   000173 (0)000200 6042 00            560         TMI     FLT116
   000174    2 00030 4523 06           561         SCPR    MODE,MDTAGS,DS  STORE MODE REGISTER IN DS
                                       562                 *************************************************
                                       563                 * HISTORY REGISTERS LOCKED?
                                       564                 *************************************************
   000175    2 00030 2363 00           565         LDQ     MODE,,DS        COPY MODE REGISTER TO Q REGISTER
   000176    000040 3162 07            566         CANQ    =O40,DL         HISTORY REGISTERS LOCKED?
   000177 (0)000321 6012 00            567         TNZ     FLT140          TRANSFER IF HR'S NOT LOCKED
                                       568                 *************************************************
                                       569                 * INCREASE AUTO FRAME SIZE FOR HISTORY REGISTERS
                                       570                 *************************************************
   000200                              571  FLT116 NULL
   000200 (0)001637 7222 16            572         LXL2    HRSIZE,CPU      HISTORY REGISTER SIZE
   000201    6 00001 0423 00           573         ASX2    UNUSE0,,SS      ROOM FOR HIST REGS?
   000202 (0)000321 6056 00            574         TPNZ    FLT140          NO -> SKIP HIST REGS
   000203    2 00002 0423 00           575         ASX2    2,,DS           YES -> UPDATE NEXT OFFSET+1
   000204    2 00040 4423 00           576         SXL2    WORDS,,DS       UPDATE WORDS FOLLOWING
   000205    2 00042 6307 00           577         EPPR    TP,HISTREG,,DS
   000206  X 000000 2342 00            578         SZN     H_S1000_FLG
   000207 (0)000265 6042 00            579         TMI     FLT119
   000210    000100 3162 07            580         CANQ    =O100,DL        HR TRANSFER MODE FOR DPSE ON?
   000211 (0)000214 6002 00            581         TZE     *+3             NO
   000212    000020 2352 03            582         LDA     =O20,DU         YES -> SET SUBCODE BIT 13
   000213    2 00035 2553 00           583         ORSA    SUBCODE,,DS
                                       584                 *************************************************
                                       585                 * STORE AND INITIALIZE HISTORY REGISTERS
                                       586                 *************************************************
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - M A I N   F L O W                      20   BMAP - B00     
   000214  X 000000 2342 00            587         SZN     H_RPM_FLG
   000215 (0)000225 6052 00            588         TPL     FLT118          NOT RPM
   000216 (0)001630 7222 16            589         COPYHR  CU,4            COPY CUHR TO FAULT INFO
   000217    000000 0112 00
   000220    0 00000 4523 20
   000221    0 00004 5077 00
   000222    000001 1222 03
   000223 (0)000220 6056 00
   000224 (0)000274 7102 00            590         TRA     FLT120          YES -> NO MORE HIST REGS
   000225                              591  FLT118 NULL
   000225 (0)001630 7222 16            592         COPYHR  CU,2            COPY CUHR TO FAULT INFO
   000226    000002 7102 04
   000227    000000 0112 00
   000230    0 00000 4523 20
   000231    0 00002 5077 00
   000232    000001 1222 03
   000233 (0)000230 6056 00
   000234    000002 1062 03            593         CMPX    CPU,ELS1,DU     ELS1?
   000235 (0)000274 6002 00            594         TZE     FLT120          YES -> NO MORE HIST REGS
   000236 (0)001630 7222 16            595         COPYHR  OU,2            COPY OUHR TO FAULT INFO
   000237    000000 0112 00
   000240    0 00000 4523 40
   000241    0 00002 5077 00
   000242    000001 1222 03
   000243 (0)000240 6056 00
   000244 (0)001630 7222 16            596         COPYHR  VU,2            COPY VUHR TO FAULT INFO
   000245    000003 7102 04
   000246    000000 0112 00
   000247    000000 0112 00
   000250    0 00000 4523 00
   000251    0 00002 5077 00
   000252    000001 1222 03
   000253 (0)000250 6056 00
   000254 (0)001630 7222 16            597         COPYHR  DU,2            COPY DUHR TO FAULT INFO
   000255    000003 7102 04
   000256    000000 0112 00
   000257    000000 0112 00
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - M A I N   F L O W                      21   BMAP - B00     
   000260    0 00000 4523 10
   000261    0 00002 5077 00
   000262    000001 1222 03
   000263 (0)000260 6056 00
   000264 (0)000274 7102 00            598         TRA     FLT120
   000265                              599  FLT119 NULL
   000265 (0)001630 7222 16            600         COPY90                  COPY HIST REGS FOR DPS90
   000266    000002 7102 04
   000267    000000 0112 00
   000270    0 00000 1547 00
   000271    0 00001 5077 00
   000272    000001 1222 03
   000273 (0)000270 6056 00
   000274                              601  FLT120 NULL
   000274 (0)001161 7002 00            602         TSX0    CLRHR           CLEAR HISTORY REGISTERS
   000275    000000 0112 00            603         NOP
                                       604                 *************************************************
                                       605                 * CHECK FOR PARITY FAULT
                                       606                 *************************************************
   000276    000011 1072 03            607         CMPX    FLT,=9,DU       IS IT PARITY FAULT?
   000277 (0)000321 6012 00            608         TNZ     FLT140          NO
   000300    2 00026 4473 00           609         SXL     FLT,TEMP1,,DS   YES -> SAVE 5-BIT FLT CODE
   000301    2 00035 6307 00           610         ARG6    FINFO,AUTO      CALL HFB$CSHERR
   000302    2 00003 4507 00
   000303    2 00003 6307 00           611         CALL6   HFB$CSHERR
   000304 (1)000000 6316 00
   000305  X 000000 7012 00
   000306    000000 0112 00
   000307  X 000000 4766 00            612         LDP     SS,B_MPT+MPT.SS TYPE 0 SSR DESCRIPTOR
   000310    2 00026 7273 00           613         LXL     FLT,TEMP1,,DS   RESTORE 5-BIT FLT CODE
   000311  X 000000 7252 00            614         LXL     PNO,S_PNO       PROCESSOR NUMBER
   000312  X 000000 7262 15            615         LXL     CPU,S_PTYPE,PNO CPU TYPE
   000313  X 000000 2342 00            616         SZN     H_S1000_FLG
   000314 (0)000326 6042 00            617         TMI     FLT150
   000315 (0)001625 6742 02            618         LCPR    CACHEOFF,LUTAGL CLEAR CACHE
   000316  X 000000 2362 16            619         LDQ     H_LUFREG,CPU
   000317    2 00026 7563 00           620         STQ     TEMP1,,DS
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - M A I N   F L O W                      22   BMAP - B00     
   000320    2 00026 6743 02           621         LCPR    TEMP1,LUTAGL,DS
                                       622                 *************************************************
                                       623                 * ENABLE HISTORY REGISTERS
                                       624                 *************************************************
   000321                              625  FLT140 NULL
   000321  X 000000 2342 00            626         SZN     H_S1000_FLG
   000322 (0)000326 6042 00            627         TMI     FLT150
   000323  X 000000 2352 16            628         LDA     H_HRMODE,CPU
   000324    2 00026 7553 00           629         STA     TEMP1,,DS
   000325    2 00026 6743 04           630         LCPR    TEMP1,MDTAGL,DS ENABLE HISTORY REGISTERS
   000326                              631  FLT150 NULL
   000326    2 00040 2363 00           632         LDQ     WORDS,,DS
   000327    2 00027 7563 00           633         STQ     TEMP1+1,,DS     SAVE HIST REG SIZE FOR DELTA
   000330  X 000000 2342 00            634         SZN     S_RETRY         ZERO RETRY FLAG IF SET
   000331 (0)000333 6046 00            635         TMOZ    *+2
   000332  X 000000 4502 00            636         STZ     S_RETRY
                                       637                 *************************************************
                                       638                 * CHECK FOR DIAGNOSTIC SNAPSHOT MODE
                                       639                 *************************************************
                                       640                 *************************************************
   000333  X 000000 2342 00            641         SZN     H_RPM_FLG       IS THIS AN 8000
   000334 (0)000337 6002 00            642         TZE     *+3
   000335    000010 1072 03            643         CMPX    FLT,=O8,DU
   000336 (0)000343 6002 00            644         TZE     FLT200
   000337    2 00026 4473 00           645         SXL     FLT,TEMP1,,DS   SAVE FAULT CODE
   000340  X 000000 4706 07            646         LDP     TP,ISBSID,DL    BYPASS CACHE
   000341    0 X 00000 2343 00         647         SZN     H_SNAP,,TP      DIAGNOSTIC SNAPSHOT MODE SET?
   000342 (0)000771 6056 00            648         TPNZ    DIAG_SNAP       YES
                                       649                 *************************************************
                                       650                 * CHECK FOR SHUTDOWN AND SAFE STORE FAULTS
                                       651                 *************************************************
   000343                              652  FLT200 NULL
   000343    6 00005 2353 00           653         LDA     FCODE,,SS       LOAD FAULT CODE FROM SAFE STORE
   000344    000076 3152 03            654         CANA    =O76,DU         IS FAULT CODE ZERO?
   000345 (0)000535 6002 00            655         TZE     SSF30           YES -> SHUTDOWN OR SAFE STORE FLT
   000346    000200 3152 03            656         CANA    =O200,DU        SAFE STORE FULL?
   000347 (0)000543 6012 00            657         TNZ     SSF40           YES

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - M A I N   F L O W                      23   BMAP - B00     
                                       658         EJECT
                                       659                 *************************************************
                                       660                 *
                                       661                 * CALL APPROPRIATE HFB$FPR FAULT ROUTINE
                                       662                 *
                                       663                 *************************************************
                                       664                 *************************************************
                                       665                 * BUMP THE APPROPRIATE FAULT COUNT
                                       666                 *************************************************
   000350    000000 1072 03            667         CMPX    FLT,=0,DU
   000351 (0)000353 6002 00            668         TZE     FLT220          BRANCH IF ZERO FAULT CODE
   000352  X 000001 0542 17            669         AOS     H_FLTCNT+1,FLT  BUMP FAULT COUNT
                                       670                 *************************************************
                                       671                 * ANY ROUTINE SPECIFIED?
                                       672                 *************************************************
   000353                              673  FLT220 NULL
   000353 (0)001650 7222 17            674         LXL2    FLTVEC1,FLT     LOAD ACTION CODE FROM FLTVEC1
   000354    000000 6352 12            675         EAA     0,X2            ACTION CODE TO A UPPER
   000355    000022 7312 00            676         ARS     18              RIGHT JUSTIFY IN THE A REGISTER
   000356 (0)001002 6042 00            677         TMI     NO_HFB          BRANCH IF NO ROUTINE SPECIFIED
                                       678                 *************************************************
                                       679                 * IS A CALL NECESSARY?
                                       680                 *************************************************
   000357    2 00023 1153 00           681         CMPA    ACTION,,DS      COMPARE ACTION, FLTVEC1 ACTION
   000360 (0)000400 6042 00            682         TMI     FLT240          BRANCH IF CALL NOT NECESSARY
                                       683                 *************************************************
                                       684                 * CALL APPROPRIATE FAULT PROCESSING ROUTINE
                                       685                 *************************************************
   000361    2 00023 2353 00           686         LDA     ACTION,,DS      CURRENT ACTION CODE
   000362    2 00024 7553 00           687         STA     TACTON,,DS      STORE IT IN TACTON
   000363 (0)001650 2222 17            688         LDX2    FLTVEC1,FLT     ADDR OF FAULT PROCESSING ROUTINE
   000364    2 00035 6307 00           689         ARG6    FINFO,AUTO
   000365    2 00003 4507 00
   000366    2 00024 6307 00           690         ARG6    TACTON,AUTO
   000367    2 00004 4507 00
   000370    2 00025 6307 00           691         ARG6    SCODE,AUTO
   000371    2 00005 4507 00
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - M A I N   F L O W                      24   BMAP - B00     
   000372    2 00007 6307 00           692         ARG6    MAGICS,AUTO
   000373    2 00006 4507 00
   000374    2 00003 6307 00           693         CALL6   (0,X2)
   000375 (1)000002 6316 00
   000376    000000 7012 12
   000377    000000 0112 00
                                       694                 *************************************************
                                       695                 * SET ACTION TO MAX OF ACTION AND TACTON
                                       696                 *************************************************
   000400                              697  FLT240 NULL
   000400    2 00024 2353 00           698         LDA     TACTON,,DS      LOAD TACTON
   000401    2 00023 1153 00           699         CMPA    ACTION,,DS      COMPARE WITH ACTION
   000402 (0)000404 6042 00            700         TMI     FLT260          BRANCH IF TACTON LESS THAN ACTION
   000403    2 00023 7553 00           701         STA     ACTION,,DS      STORE TACTON IN ACTION

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - M A I N   F L O W                      25   BMAP - B00     
                                       702         EJECT
                                       703                 *************************************************
                                       704                 *
                                       705                 * PERFORM THE FUNCTION ENCODED IN ACTION
                                       706                 *
                                       707                 *************************************************
   000404                              708  FLT260 NULL
   000404    2 00007 6307 00           709         ARG6    MAGICS,AUTO
   000405    2 00003 4507 00
   000406    2 00003 6307 00           710         CALL6   UDN$MGRES       RESTORE OLD MAGIC FRAME FROM AUTO
   000407 (1)000000 6316 00
   000410  X 000000 7012 00
   000411    000000 0112 00
   000412                              711  FLT270 NULL
   000412    2 00023 7273 00           712         LXL7    ACTION,,DS      LOAD ACTION CODE
   000413    000006 1072 03            713         CMPX7   DGOACT,DU       COMPARE WITH DELTAGO ACTION CODE
   000414 (0)000432 6052 00            714         TPL     FLT280          BRANCH IF DELTAGO OR SCREECH
                                       715  *
                                       716  *                              CNCFLT, SEXIT, PGEFLT OR ABORTM
   000415  X 000000 4766 07            717         LDP     SS,SSRSID,DL    SAFE STORE REGISTER
   000416  X 000000 4766 07            718         LDP     SS,CDTFSID,DL   CHANGE TO TYPE 0
   000417    2 00034 2353 00           719         LDA     RVA,,DS         LOAD RVA TO RESTORE S_RVA
   000420  X 000000 7552 00            720         STA     S_RVA           RESTORE S_RVA
   000421    6 00001 7223 00           721         LXL2    AUTOLOC,,SS     -(PREVIOUS OFFSET+1) FOR MONTSTK
   000422    2 00001 5276 12           722         SWDX    1,2,DS          PREVIOUS OFFSET -> AR2
   000423    2 00001 4423 12           723         SXL2    1,2,DS          REMOVE FLT FRAME FROM MONTSTACK
   000424    000003 1072 03            724         CMPX7   SXTACT,DU       COMPARE WITH SEXIT ACTION CODE
   000425 (0)000432 6042 00            725         TMI     FLT280          BRANCH IF CONNECT FAULT ACTION
                                       726  *
                                       727  *                              SEXIT, PGEFLT, OR ABORTM
   000426  X 000000 4726 07            728         LDP     DS,TSTACKSID,DL LOAD USER TSTACK DESCRIPTOR
   000427    2 00000 7223 00           729         LXL2    0,,DS           -(CURRENT OFFSET+1) FOR UTSTACK
   000430    6 00001 4423 00           730         SXL2    AUTOLOC,,SS     SAVE IN SAFE STORE
   000431    2 00001 5276 12           731         SWDX    1,2,DS          CURRENT OFFSET -> AR2
                                       732  *
   000432                              733  FLT280 NULL
   000432 (0)000432 7102 17            734         TRA     *,X7            DISPATCH ON ACTION CODE
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - M A I N   F L O W                      26   BMAP - B00     
   000433 (0)000515 7102 00            735         TRA     CNCFLT          ACTION = CNCACT
   000434 (0)000512 7102 00            736         TRA     RELIEF          ACTION = RLIEF
   000435 (0)000506 7102 00            737         TRA     SEXIT           ACTION = SXTACT
   000436 (0)000477 7102 00            738         TRA     MPF             ACTION = PGEFLT
   000437 (0)000470 7102 00            739         TRA     ABORTM          ACTION = ABTACT
   000440 (0)000455 7102 00            740         TRA     DELTAG          ACTION = DGOACT
   000441 (0)000442 7102 00            741         TRA     SCRECH          ACTION = SCRACT
                                       742                 *************************************************
                                       743                 * ACTION = SCREECH
                                       744                 *************************************************
   000442                              745  SCRECH NULL
   000442  X 000000 6202 00            746         EAX0    SC_HFA7         ASSUME FULL SCREECH
   000443    2 00025 2353 00           747         LDA     SCODE,,DS       PICK UP SCREECH CODE
   000444    000007 3752 07            748         ANA     =O7,DL          ISOLATE HFB SCODE SEVERITY
   000445    000007 1152 07            749         CMPA    =O7,DL          IS IT FULL SCREECH
   000446 (0)000450 6002 00            750         TZE     *+2             YES
   000447  X 000000 6202 00            751         EAX0    SC_HFA6         NO-SINGLE USER ABORT
   000450    2 00025 2353 00           752         LDA     SCODE,,DS       PICK UP FIRST WORD
   000451    000000 7552 10            753         STA     0,X0            AND PUT IT AWAY
   000452    000000 7134 00            754         GOTO    SCRCHENTSID     LTRAD TO SCREECH
   000453    0 000 000 23 X 0000
   000454    000000 0002 00            755         ZOP                     IF SCREECH RETURNS FAULT
                                       756                 *************************************************
                                       757                 * ACTION = DELTAGO
                                       758                 *************************************************
   000455                              759  DELTAG NULL                    CALL DELTAGO
   000455    2 00025 6307 00           760         ARG6    SCODE,AUTO
   000456    2 00003 4507 00
   000457    2 00035 6307 00           761         ARG6    FINFO,AUTO
   000460    2 00004 4507 00
   000461    2 00027 6307 00           762         ARG6    TEMP1+1,AUTO    HIST REG SIZE
   000462    2 00005 4507 00
   000463    2 00003 6307 00           763         CALL6   SSU$DELTAGO
   000464 (1)000003 6316 00
   000465  X 000000 7012 00
   000466    000000 0112 00
   000467    000000 0002 00            764         ZOP                     WILL NOT RETURN
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - M A I N   F L O W                      27   BMAP - B00     
                                       765                 *************************************************
                                       766                 * ACTION = ABORTM
                                       767                 *************************************************
   000470                              768  ABORTM NULL
   000470 (1)000001 6316 00            769         CALL6   SSC$SERV        SWITCH TO USER SERVICE ACCOUNTING
   000471  X 000000 7012 00
   000472    000000 0112 00
   000473 (1)000001 6316 00            770         CALL6   JSE$ABORTM      ABORT HIM.
   000474  X 000000 7012 00
   000475    000000 0112 00
   000476    000000 0002 00            771         ZOP                     WILL NOT RETURN
                                       772                 *************************************************
                                       773                 * ACTION = PGEFLT
                                       774                 *************************************************
   000477                              775  MPF    NULL
   000477 (1)000001 6316 00            776         CALL6   SSC$SERV        SWITCH TO USER SERVICE ACCOUNTING
   000500  X 000000 7012 00
   000501    000000 0112 00
   000502 (1)000001 6316 00            777         CALL6   MMV$PAGE        FOR LARGE VIRTUAL SPACE
   000503  X 000000 7012 00
   000504    000000 0112 00
   000505    000000 0002 00            778         ZOP                     WILL NOT RETURN
                                       779                 *************************************************
                                       780                 * ACTION = SEXIT
                                       781                 *************************************************
   000506                              782  SEXIT  NULL
   000506 (1)000001 6316 00            783         CALL6   SSS$SEXIT       CALL SERVICE EXIT
   000507  X 000000 7012 00
   000510    000000 0112 00
   000511    000000 0002 00            784         ZOP                     WILL NOT RETURN
                                       785                   ***************************************************
                                       786                   * ACTION = RLIEF
                                       787                   ***************************************************
   000512                              788  RELIEF NULL
   000512 (1)000001 6316 00            789         CALL6   HFC$RELIEF
   000513  X 000000 7012 00
   000514    000000 0112 00
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - M A I N   F L O W                      28   BMAP - B00     
                                       790                 ************************************************
                                       791                 * ACTION = CNCFLT
                                       792                 ************************************************
   000515                              793  CNCFLT NULL                    RETURN TO INTERRUPTED INSTRUCTION
                                       794  *                              AFTER A CONNECT FAULT
   000515                              795  OCLIMB NULL                    JUST TO HAVE A MORE MEANINGFUL LABEL
                                       796  *
   000515    000000 7134 00            797         EXIT
   000516    0 000 000 01 0000

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - SAFE STORE FULL                        29   BMAP - B00     
                                       798         TTLS    CP6 FAULT HANDLER - SAFE STORE FULL
                                       799                 *************************************************
                                       800                 * SAFE STORE FULL FAULT FROM PREPROCESSING
                                       801                 *************************************************
   000517                              802  SSFLT  NULL
   000517    6 00001 2343 00           803         SZN     UNUSE0,,SS      DIAGNOSTIC SNAP MODE SET?
   000520 (0)000522 6046 00            804         TMOZ    *+2             NO
   000521    000002 5326 00            805         CAMP    2               YES -> TURN ON PTWAM
   000522    2 00026 7537 00           806         STSS    TEMP1,,DS       STORE THE SSR IN TEMP
   000523    2 00026 2353 00           807         LDA     TEMP1,,DS       AND FETCH FIRST WORD
   000524    000160 3752 07            808         ANA     =O160,DL        ISOLATE WSR
   000525    000160 1152 07            809         CMPA    =O160,DL        USERS SAFE STORE STACK?
   000526 (0)000063 6002 00            810         TZE     FLT100          YES -> WE WILL FIX USER LATER
                                       811                 *************************************************
                                       812                 * SAFE STORE FAULT USING MONITOR SAFE STORE STACK
                                       813                 *************************************************
   000527                              814  SSF10  NULL
   000527  X 000000 6202 00            815         EAX0    SC_HFSSF
   000530                              816  SSF15  NULL
   000530  X 000000 7536 00            817         STSS    IRM_SSF         SAVE SS WHERE XDELTA CAN FIND IT
   000531  X 000000 7736 00            818         LDSS    S_MONSSR        SWITCH TO FRESH MONITOR SS
   000532                              819  SSF20  NULL
   000532    000000 7134 00            820         GOTO    SCRCHENTSID     LTRAD TO SCREECH
   000533    0 000 000 23 X 0000
   000534    000000 0002 00            821         ZOP                     IF SCREECH RETURNS-FAULT
                                       822                 *************************************************
                                       823                 * SAFE STORE FULL OR SHUTDOWN FAULT
                                       824                 *************************************************
   000535                              825  SSF30  NULL
   000535    000200 3152 03            826         CANA    =O200,DU        IS SAFE STORE FULL BIT SET?
   000536 (0)001013 6002 00            827         TZE     SHFLT           NO -> MUST BE SHUTDOWN
   000537  X 000006 4706 00            828         LDP     TP,B_MPT+MPT.SSDESC
   000540    0 00000 2273 00           829         LDX7    0,,TP           LOAD BOUND FIELD OF SSR
   000541    000300 1072 03            830         CMPX7   192,DU          AT LEAST 192 WORDS LEFT?
   000542 (0)001013 6052 00            831         TPL     SHFLT           YES -> ASSUME SHUTDOWN FAULT
                                       832                 *************************************************
                                       833                 * SAFE STORE FAULT USING USER SAFE STORE STACK
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - SAFE STORE FULL                        30   BMAP - B00     
                                       834                 *************************************************
   000543                              835  SSF40  NULL
   000543  X 000000 0542 00            836         AOS     H_FLTCNT+SSFOFF BUMP SAFE STORE FAULT COUNT
   000544    6 00010 2353 00           837         LDA     ISR,,SS         GET ISR FROM SAFE STORE
   000545    000160 3752 07            838         ANA     =O160,DL        ISOLATE ISR WSR
   000546    000140 1152 07            839         CMPA    =O140,DL        USER OR ASL ISR?
   000547 (0)000616 6042 00            840         TMI     SSF50           NO
   000550 (1)000001 6316 00            841         CALL6   JSN$FIXSS       YES -> FLUSH USER SAFE STORE
   000551  X 000000 7012 00
   000552    000000 0112 00
   000553 (1)000001 6316 00            842         CALL6   UDN$MAGIC       BUILD NEW MAGIC FRAME
   000554  X 000000 7012 00
   000555    000000 0112 00
                                       843                 *************************************************
                                       844                 * CHECK FOR SSF IN CONJUNCTION WITH OTHER FAULT
                                       845                 *************************************************
   000556    000005 2352 07            846         LDA     ABTACT,DL       SET ACTION TO ABORT
   000557    2 00023 7553 00           847         STA     ACTION,,DS
   000560    2 00026 7273 00           848         LXL     FLT,TEMP1,,DS   LOAD FAULT CODE
   000561 (0)000412 6002 00            849         TZE     FLT270          ZERO FAULT CODE - REAL SSF
   000562    000004 1072 03            850         CMPX    FLT,=4,DU       TIMER RUNOUT?
   000563 (0)000412 6002 00            851         TZE     FLT270          YES
   000564 (0)001650 7222 17            852         LXL2    FLTVEC1,FLT
   000565    000000 6352 12            853         EAA     0,X2            ACTION CODE TO AU
   000566    000022 7312 00            854         ARS     18              RIGHT JUSTIFY
   000567 (0)001002 6042 00            855         TMI     NO_HFB          GO IF START-UP OR EXECUTE
   000570    000006 1022 03            856         CMPX2   DGOACT,DU       IS IT USER VISABLE?
   000571 (0)000412 6002 00            857         TZE     FLT270          YES
                                       858  *
                                       859  *  IF WE GET HERE IT'S A HARDWARE ERROR.
                                       860  *
   000572    2 00024 7553 00           861         STA     TACTON,,DS
   000573 (0)001650 2222 17            862         LDX2    FLTVEC1,FLT     HFB ROUTINE
   000574    2 00035 6307 00           863         ARG6    FINFO,AUTO
   000575    2 00003 4507 00
   000576    2 00024 6307 00           864         ARG6    TACTON,AUTO
   000577    2 00004 4507 00
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - SAFE STORE FULL                        31   BMAP - B00     
   000600    2 00025 6307 00           865         ARG6    SCODE,AUTO
   000601    2 00005 4507 00
   000602    2 00007 6307 00           866         ARG6    MAGICS,AUTO
   000603    2 00006 4507 00
   000604    2 00003 6307 00           867         CALL6   (0,X2)          GO TO HFB
   000605 (1)000002 6316 00
   000606    000000 7012 12
   000607    000000 0112 00
                                       868                 *************************************************
                                       869                 * FORCE SEXIT IF NOT SCREECH
                                       870                 *************************************************
   000610    2 00024 2353 00           871         LDA     TACTON,,DS      GET HFB ACTION CODE
   000611    000007 1152 07            872         CMPA    SCRACT,DL       IS IT SCREECH
   000612 (0)000400 6052 00            873         TPL     FLT240          YES-GO DO IT
                                       874  *
                                       875  *  IF WE GET HERE IT'S A 'T AND D' USER.
                                       876  *
   000613    000003 2352 07            877         LDA     SXTACT,DL       NO- SET ACTION
   000614    2 00023 7553 00           878         STA     ACTION,,DS       TO SEXIT
   000615 (0)000404 7102 00            879         TRA     FLT260
                                       880                 *************************************************
                                       881                 * USING USER SSR - USER NOT IN CONTROL
                                       882                 *************************************************
   000616                              883  SSF50  NULL
                                       884  *
                                       885  *  SAFE STORE FULL WITH ICP OR IDB ISR AND USER SSR
                                       886  *
                                       887  *
                                       888  *
   000616 (0)000527 7102 00            889         TRA     SSF10

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - XDELTA INTERFACE                       32   BMAP - B00     
                                       890         TTLS    CP6 FAULT HANDLER - XDELTA INTERFACE
                                       891                 *************************************************
                                       892                 * XDELTA INTERFACE
                                       893                 *************************************************
   000617                              894  GOTODEL NULL                   PASS THE FAULT TO XDELTA
   000617  X 000000 2342 00            895         SZN     IT_XDELTA       RUNNING WITH XDELTA?
   000620 (0)000063 6012 00            896         TNZ     FLT100          NO
   000621    6 00001 4473 00           897         SXL     FLT,UNUSE0,,SS  YES -> SAVE FAULT CODE
   000622 (0)001450 7012 00            898         TSX1    HFA$STOPCPU
   000623    000000 0112 00            899         NOP
   000624    000000 7134 00            900         GOTO    XDLTENTSID,,0   LTRAD TO XDELTA - X0=0
   000625    0 000 000 63 X 0000
                                       901  *
   000626                              902  HFA$XDELRTN NULL               XDELTA RETURNS HERE
   000626    000000 6342 07            903         LDI     0,DL
   000627    000002 1002 03            904         CMPX0   2,DU            CHECK WHAT XDELTA WANTED TO DO
   000630 (0)000662 6052 00            905         TPL     OPRCVR          QUIT -> OPERATOR RECOVERY
   000631 (0)001544 7012 00            906         TSX1    HFA$STARTCPU
   000632    000000 0112 00            907         NOP
   000633  X 000000 4766 07            908         LDP     SS,SSRSID,DL    SAFE STORE REGISTER
   000634  X 000000 4766 07            909         LDP     SS,CDTFSID,DL   CHANGE TO TYPE 0
   000635  X 000000 7252 00            910         LXL     PNO,S_PNO       PROCESSOR NUMBER
   000636  X 000000 7262 15            911         LXL     CPU,S_PTYPE,PNO CPU TYPE
   000637    6 00001 7273 00           912         LXL     FLT,UNUSE0,,SS  FAULT CODE
   000640    000000 1002 03            913         CMPX0   0,DU            CHECK WHAT XDELTA WANTED TO DO
   000641 (0)000063 6002 00            914         TZE     FLT100          GOTRAP -> CONTINUE FLT PROCESSING
   000642 (0)001161 7002 00            915         TSX0    CLRHR           GO -> CLEAR HIST REGS
   000643 (0)000654 7102 00            916         TRA     EXIT            NO HIST REGS
   000644  X 000000 2342 00            917         SZN     H_S1000_FLG
   000645 (0)000656 6042 00            918         TMI     EDPS90
   000646  X 000000 2352 16            919         LDA     H_HRMODE,CPU
   000647    6 00001 7553 00           920         STA     UNUSE0,,SS
   000650  X 000000 2362 16            921         LDQ     H_LUFREG,CPU
   000651    6 00007 7563 00           922         STQ     UNUSE1,,SS
   000652    6 00007 6743 02           923         LCPR    UNUSE1,LUTAGL,SS TURN ON CACHE - SET LUF REG
   000653    6 00001 6743 04           924         LCPR    UNUSE0,MDTAGL,SS ENABLE HIST REGS
   000654                              925  EXIT   NULL
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - XDELTA INTERFACE                       33   BMAP - B00     
   000654    000000 7134 00            926         EXIT                    RETURN CLIMB THROUGH SS FRAME
   000655    0 000 000 01 0000
   000656                              927  EDPS90 NULL
   000656    000001 2352 07            928         LDA     1,DL            LUF REG VALUE FOR 2 MSEC
   000657    000000 6742 00            929         LLUF                    LOAD LUF FOR SLAVE MODE
   000660    000000 7134 00            930         EXIT                    GO BACK
   000661    0 000 000 01 0000
                                       931  *
   000662                              932  OPRCVR NULL                    QUIT TO XDELTA
   000662  X 000000 6202 00            933         EAX0    SC_QXDELTA
   000663    000000 2372 10            934         LDAQ    0,0             PICK UP SCREECH
   000664  X 000000 7572 00            935         STAQ    IRM_SCODE        AND PUT IT AWAY
   000665  X 000000 7102 00            936         TRA     IRM$DELTAQ

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - DUMP PTWAM SUBROUTINES                 34   BMAP - B00     
                                       937         TTLS    CP6 FAULT HANDLER - DUMP PTWAM SUBROUTINES
                                       938                 *************************************************
                                       939                 * DUMP PTWAM FOR L66 AND DPSE
                                       940                 *************************************************
   000666                              941  PTWAM_L66 NULL                  
   000666  X 000000 6222 00            942         EAX2    S_PTWAM
   000667    000077 0222 03            943         ADLX2   =63,DU
   000670    777700 3622 03            944         ANX2    =O777700,DU     1ST 64 WRD BOUND AFTER S_PTWAM
   000671    000003 7102 04            945         ALIGN   4
   000672    000000 0112 00
   000673    000000 0112 00
   000674    000000 1556 12            946         STPDW   0,2             STORE PTWAM DIRECTORY WORD
                                       947  *                                BITS 0-8 -> WORKING SPACE #
                                       948  *                                BITS 9-26 -> UPPER 18 BITS OF
                                       949  *                                             VIRTUAL ADDR
                                       950  *                                BIT 27 -> ROW FULL
                                       951  *                                BITS 28-29 -> ROUND ROBIN
                                       952  *                                              COUNTER FOR ROW
   000675    000001 0222 03            953         ADLX2   =1,DU
   000676    000077 3022 03            954         CANX2   =O77,DU
   000677 (0)000674 6012 00            955         TNZ     *-3             LOOP 64 TIMES
                                       956         ALIGN   4
   000700    000000 1576 12            957         STPTW   0,2             STORE PTWAM REGISTER
                                       958  *                                BITS 4-17 -> REAL PAGE #
                                       959  *                                BITS 30-35 -> PAGE TABLE FLAGS
   000701    000001 0222 03            960         ADLX2   =1,DU
   000702    000077 3022 03            961         CANX2   =O77,DU
   000703 (0)000700 6012 00            962         TNZ     *-3             LOOP 64 TIMES
   000704    000002 5326 00            963         CAMP    2               TURN ON PTWAM
   000705 (0)000042 7102 00            964         TRA     FLT060

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - DUMP PTWAM SUBROUTINES                 35   BMAP - B00     
                                       965         EJECT
                                       966                 *************************************************
                                       967                 * DUMP PTWAM FOR ELS1
                                       968                 *************************************************
   000706                              969  PTWAM_ELS1 NULL
   000706    000000 6306 00            970         EPPR0   0
   000707    777600 2222 03            971         LDX2    -128,DU
   000710    0 00000 4523 17           972         SCPR    0,PDWTAGS,0     PTWAM DIRECTORY WORD -> A
                                       973  *                                BITS 0-8 -> WORKING SPACE #
                                       974  *                                BITS 9-24 -> UPPER 16 BITS OF
                                       975  *                                             VIRTUAL ADDR
                                       976  *                                BIT 25 -> PARITY FOR BITS 0-24
                                       977  *                                BIT 26 -> COLUMN FULL/EMPTY FLG
                                       978  *                                BIT 27 -> ROUND ROBIN COUNTER
                                       979  *                                BIT 28 -> LEVEL 1 OFF
                                       980  *                                BIT 29 -> LEVEL 2 OFF
                                       981  *                                BIT 30 -> PTWAM ENABLED
   000711  X 000200 7552 12            982         STA     S_PTWAM+128,2
   000712    0 00001 5077 00           983         AWD     1,,0
   000713    000001 0222 03            984         ADLX2   1,DU
   000714 (0)000710 6042 00            985         TMI     *-4             LOOP 128 TIMES
   000715    777600 2222 03            986         LDX2    -128,DU
   000716    0 00000 4523 16           987         SCPR    0,PTWTAGS,0     PTWAM REGISTER -> A
                                       988  *                                BITS 4-17 -> REAL PAGE #
                                       989  *                                BITS 18-30 -> ZERO
                                       990  *                                BITS 31-34 -> PAGE TABLE FLAGS
                                       991  *                                BIT 35 -> PARITY FOR BITS 31-34
   000717  X 000400 7552 12            992         STA     S_PTWAM+256,2
   000720    0 00001 5077 00           993         AWD     1,,0
   000721    000001 0222 03            994         ADLX2   1,DU
   000722 (0)000716 6042 00            995         TMI     *-4             LOOP 128 TIMES
   000723    000002 5326 00            996         CAMP    2               TURN ON PTWAM
   000724 (0)000042 7102 00            997         TRA     FLT060

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - EXCEPTIONAL CONDITIONS                 36   BMAP - B00     
                                       998         TTLS    CP6 FAULT HANDLER - EXCEPTIONAL CONDITIONS
                                       999                 *************************************************
                                      1000                 * LOCKUP FAULT FROM PREPROCESSING
                                      1001                 *************************************************
   000725                             1002  LUFLT  NULL
   000725    6 00010 2353 00          1003         LDA     ISR,,SS         WERE WE IN MONITOR?
   000726    000160 3752 07           1004         ANA     =O160,DL
   000727 (0)000060 6012 00           1005         TNZ     FLT080          NO
   000730    6 00004 2203 00          1006         LDX0    ICIR,,SS        YES -> WERE WE AT PMME ENTRY?
   000731  X 000000 4706 07           1007         LDP     TP,REALSID,DL
   000732    0 00034 1003 00          1008         CMPX0   PMMELOC,,TP     PMME ENTRY DESCRIPTOR
   000733 (0)000060 6012 00           1009         TNZ     FLT080          NO
   000734    777777 6202 10           1010         EAX0    -1,0
   000735    0 00034 1003 00          1011         CMPX0   PMMELOC,,TP     PMME ENTRY DESCRIPTOR
   000736 (0)000060 6012 00           1012         TNZ     FLT080          NO
                                      1013  *                              YES -> LUF DURING PMME CLIMB -
                                      1014  *                                CLEAR HISTORY REGISTERS,
                                      1015  *                                ENABLE HISTORY REGISTERS, AND
                                      1016  *                                RETURN TO PMME PROCESSING
   000737 (0)001161 7002 00           1017         TSX0    CLRHR
   000740 (0)000654 7102 00           1018         TRA     EXIT            NO HIST REGS
   000741  X 000000 2342 00           1019         SZN     H_S1000_FLG
   000742 (0)000654 6042 00           1020         TMI     EXIT
   000743  X 000000 2352 16           1021         LDA     H_HRMODE,CPU
   000744    6 00001 7553 00          1022         STA     UNUSE0,,SS
   000745    6 00001 6743 04          1023         LCPR    UNUSE0,MDTAGL,SS ENABLE HIST REGS
   000746 (0)000654 7102 00           1024         TRA     EXIT
                                      1025                 *************************************************
                                      1026                 * EXECUTE FAULT FROM PREPROCESSING
                                      1027                 *************************************************
   000747                             1028  EXFLT  NULL
   000747    000003 1062 03           1029         CMPX    CPU,ADP,DU      ADP?
   000750 (0)000763 6002 00           1030         TZE     GXD             YES -> SKIP LCPR
   000751  X 000000 2342 00           1031         SZN     H_S1000_FLG
   000752 (0)000763 6042 00           1032         TMI     GXD
   000753  X 000000 2362 16           1033         LDQ     H_LUFREG,CPU    TURN CACHE ON
   000754    6 00007 7563 00          1034         STQ     UNUSE1,,SS
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - EXCEPTIONAL CONDITIONS                 37   BMAP - B00     
   000755    6 00007 6743 02          1035         LCPR    UNUSE1,LUTAGL,SS
   000756  X 000000 2342 00           1036         SZN     H_RPM_FLG
   000757 (0)000763 6002 00           1037         TZE     GXD
   000760  X 000000 2352 16           1038         LDA     H_HRMODE,CPU
   000761    6 00001 7553 00          1039         STA     UNUSE0,,SS
   000762    6 00001 6743 04          1040         LCPR    UNUSE0,MDTAGL,SS
   000763 (0)000617 7102 00           1041  GXD    TRA     GOTODEL            AND GO TO XDELTA
                                      1042                 *************************************************
                                      1043                 * MONITOR TSTACK FULL
                                      1044                 *************************************************
   000764                             1045  MONTSTK_FULL NULL
   000764  X 000000 6202 00           1046         EAX0    SC_HFTSF        ADDR OF RECOVERY CODE
   000765    6 00005 2363 00          1047         LDQ     FCODE,,SS       FAULT CODE FROM SAFE STORE
   000766    000200 3162 03           1048         CANQ    =O200,DU        USER SAFE STORE FAULT AS WELL?
   000767 (0)000530 6012 00           1049         TNZ     SSF15           YES -> RELOAD SS BEFORE SCREECH
   000770 (0)000532 7102 00           1050         TRA     SSF20

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - EXCEPTIONAL CONDITIONS                 38   BMAP - B00     
                                      1051         EJECT
                                      1052                 *************************************************
                                      1053                 * DIAGNOSTIC SNAPSHOT MODE SET
                                      1054                 *************************************************
   000771                             1055  DIAG_SNAP NULL
   000771    2 00035 6307 00          1056         ARG6    FINFO,AUTO
   000772    2 00003 4507 00
   000773    2 00003 6307 00          1057         CALL6   HFB$DIAGSNAP
   000774 (1)000000 6316 00
   000775  X 000000 7012 00
   000776    000000 0112 00
   000777    2 00026 7273 00          1058         LXL     FLT,TEMP1,,DS   LOAD FAULT CODE
   001000  X 000000 4766 00           1059         LDP     SS,B_MPT+MPT.SS TYPE 0 SSR DESCRIPTOR
   001001 (0)000343 7102 00           1060         TRA     FLT200          RETURN TO FAULT PROCESSING

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - EXCEPTIONAL CONDITIONS                 39   BMAP - B00     
                                      1061         EJECT
                                      1062                 *************************************************
                                      1063                 * NEGATIVE ACTION CODE IN FLTVEC1 TABLE BIT 18-35
                                      1064                 *************************************************
                                      1065  *
   001002                             1066  NO_HFB NULL                    DO NOT CALL HFB
   001002    000000 5312 00           1067         NEG                     COMPLEMENT ACTION CODE
   001003    2 00024 7553 00          1068         STA     TACTON,,DS      STORE IN TACTON
   001004    000007 1152 07           1069         CMPA    SCRACT,DL       ACTION CODE = SCREECH ?
   001005 (0)000400 6042 00           1070         TMI     FLT240          NO -> COMPUTE MAX ACTION CODE
   001006 (0)001650 2352 17           1071         LDA     FLTVEC1,FLT     LOAD SCREECH CODE
   001007    000022 7712 00           1072         ARL     18              RIGHT JUSTIFY
   001010 (0)001623 2752 00           1073         ORA     SRCODE          OR IN FCG, MID, SEV
   001011    2 00025 7553 00          1074         STA     SCODE,,DS       STORE IT IN SCODE
   001012 (0)000400 7102 00           1075         TRA     FLT240          COMPUTE MAX ACTION CODE
                                      1076                 *************************************************
                                      1077                 * SHUTDOWN FAULT
                                      1078                 *************************************************
                                      1079  *
                                      1080  *   Shutdown fault processing is depended on the type of
                                      1081  *      machine CP6 is running on.  The breakdown is as follows:
                                      1082  *      1.  L66, ELS, DPS8 - store the current time and call HFC$DIS.
                                      1083  *          Failed CPU halts.
                                      1084  *      2.  DPS90 - invoke relief. Each running CPU gets an indication
                                      1085  *          that a cpu has failed.  Determine what component has failed.
                                      1086  *          If it is an EPU, set up H_FAIL_NUM ( failed EPU logical number)
                                      1087  *          and H_NURSE (RELIEF EPU), load up the PDBR and issue a DIAG
                                      1088  *          command to swap processes.
                                      1089  *      3.  DPS8000 - invoke relief.  Set up H_FAIL_NUM (failed CPU logical
                                      1090  *         number), set H_NURSE to .400000000000, set stop state to stop
                                      1091  *         and send connect to all running CPUS requesting help.
   001013                             1092  SHFLT  NULL
   001013  X 000001 0542 00           1093         AOS     H_FLTCNT+SDFOFF BUMP SHUTDOWN FAULT COUNT
   001014  X 000001 0542 00           1094         AOS     H_FLTCNT+SDFOFF BUMP SHUTDOWN FAULT COUNT
   001015  X 000000 2342 00           1095         SZN     IT_CP6UP        IS CP6UP
   001016 (0)001066 6002 00           1096         TZE     SHFLT2          NOPE, NO WARP/RELIEF
   001017  X 000000 2342 00           1097         SZN     H_S1000_FLG
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - EXCEPTIONAL CONDITIONS                 40   BMAP - B00     
   001020 (0)001033 6052 00           1098         TPL     SHFLT1
   001021  X 000000 2142 00           1099         SZNC    H_RLF_GATE
   001022 (0)000515 6002 00           1100         TZE     OCLIMB          ALREADY GOTTEN - JUST OCLIMB
   001023    000000 6122 07           1101         DIAG    0,=O07          READ CONF REG
   001024  X 000000 6752 00           1102         ERA     H_S1000_CONFIG
   001025 (0)000515 6002 00           1103         TZE     OCLIMB          NOTHING TO DO - JUST OCLIMB
   001026  X 000000 6552 00           1104         ERSA    H_S1000_CONFIG
   001027  X 000000 0542 00           1105         AOS     H_RLF_GATE
   001030 (0)001072 7012 00           1106         TSX1    DO_RELIEF
   001031 (0)000442 7102 00           1107         TRA     SCRECH          ALTRET SCREECH
   001032 (0)000515 7102 00           1108         TRA     OCLIMB          NORMAL RETURN - JUST OCLIMB
   001033  X 000000 2342 00           1109  SHFLT1 SZN     H_RPM_FLG       IS THIS AN 8000
   001034 (0)001066 6052 00           1110         TPL     SHFLT2             NOPE, NO RELIEF IN SITE
   001035  X 000000 2142 00           1111         SZNC    H_RLF_GATE
   001036 (0)000515 6002 00           1112         TZE     OCLIMB
   001037  X 000000 0542 00           1113         AOS     H_RLF_GATE
   001040  X 000000 2342 00           1114         SZN     H_RELIEF
   001041 (0)000442 6042 00           1115         TMI     SCRECH
   001042    400000 2362 03           1116         LDQ     =O400000,DU        SET RELIEF FLAG
   001043  X 000000 7562 00           1117         STQ     H_NURSE            SET NO NURSE FLAG
   001044  X 000000 2362 00           1118         LDQ     S_PNO              GET FAILED CPU
   001045  X 000000 7562 00           1119         STQ     H_FAIL_NUM         STORE THE FAILED LOGICAL NUMBER
   001046    000003 2352 07           1120         LDA     3,DL
   001047  X 000000 7552 06           1121         STA    S_MPSTATE,QL
   001050  X 000000 7536 00           1122         STSS    S_RLF_SSR          SAVE THE ENVIRONMENT
   001051 (0)001444 7012 00           1123         TSX1    HFA$RELIEFCPU      SEND THE CONNECT
   001052    000000 0112 00           1124         NOP     0
   001053  X 000000 2342 00           1125         SZN     S_PNO
   001054    000007 6012 04           1126         TNZ     7,IC
   001055  X 000000 2342 00           1127         SZN     NI$DS
   001056    000004 6012 04           1128         TNZ     4,IC
   001057  X 000000 4716 07           1129         LDP1    SCUSID,DL
   001060  X 000000 2372 00           1130         LDAQ    H_DSMASK
   001061    1 00000 5533 00          1131         SMCM    0,,1
   001062  X 000000 0542 00           1132         AOS     NI$DS
   001063    2 00026 4523 01          1133         SCPR    TEMP1,1,2
   001064    2 00026 4523 03          1134         SCPR    TEMP1,3,2
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - EXCEPTIONAL CONDITIONS                 41   BMAP - B00     
   001065    000075 6162 00           1135         DIS     61                 SIT ON A DIS WAITING FOR RELIEF
   001066    6 00076 2373 00          1136  SHFLT2 LDAQ    TSTAMP,,SS
   001067    000074 6162 00           1137         DIS     60              STOP RIGHT HERE
   001070 (0)001067 7102 00           1138         TRA     *-1
   001071 (0)001067 7102 00           1139         TRA     *-2

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       SETUP RELIEF PROCESSING ON DPS90                           42   BMAP - B00     
                                      1140         TTLS    SETUP RELIEF PROCESSING ON DPS90
   001072  X 000000 2342 00           1141  DO_RELIEF SZN  H_RELIEF
   001073    000002 6052 04           1142         TPL     2,IC
   001074    000000 7022 11           1143         TSX2    0,X1
   001075    400000 2362 03           1144         LDQ     =O400000,DU
   001076  X 000000 7562 00           1145         STQ     H_RELIEF
   001077    000000 6202 05           1146         EAX0    0,AL            "A" HAS CONF. REG.
   001100    000000 2362 07           1147         LDQ     0,DL            "Q" WILL BE ADDED TO GET PORT
   001101    000000 1002 07           1148         CMPX0   0,DL            CHECK WHICH SIDE FAILED UNIT IS IN
   001102    000003 6002 04           1149         TZE     3,IC            IF LOW SIDE, WE DONT WANT TO ADD ONE.
   001103    000001 2362 07           1150         LDQ     1,DL            WE WILL ADD 1 TO GET PORT.
   001104    000002 7102 04           1151         TRA     2,IC
   001105    000000 6202 01           1152         EAX0    0,AU            GET EVERYTHING DOWN IN 18 BITS
   001106    400000 3002 03           1153         CANX0   =O400000,DU     BIT 0...
   001107 (0)001116 6012 00           1154         TNZ     FSCU               MEANS SCU
   001110    300000 3002 03           1155         CANX0   =O300000,DU     BIT 1,2...
   001111 (0)001117 6012 00           1156         TNZ     FEPU               ...
   001112    060000 3002 03           1157         CANX0   =O060000,DU     BIT 3,4...
   001113    000002 6012 04           1158         TNZ     2,IC               ...
   001114    000000 7022 11           1159  FMMU   TSX2    0,X1
   001115    000000 7022 11           1160  FIOP   TSX2    0,X1
   001116    000000 7022 11           1161  FSCU   TSX2    0,X1
   001117    000000 6352 10           1162  FEPU   EAA     0,X0
   001120    000002 7352 00           1163         ALS     2               FIGURE OUT WHICH EPU...
   001121    000042 7312 00           1164         ARS     34              ... HAS FAILED.
   001122    000000 1162 07           1165         CMPQ    0,DL            DO WE NEED TO ADD IN Q
   001123    000002 6002 04           1166         TZE     2,IC
   001124    000001 0752 07           1167         ADA     1,DL           ADD 1 TO A
                                      1168
   001125  X 000000 7552 00           1169         STA     H_FAIL_PORT     STORE FAILING PORT NUMBER
   001126    000000 2362 07           1170         LDQ     0,DL
   001127  X 000000 2352 06           1171  FNDLOG LDA     S_PORTNR,QL     FIND LOGICAL EPU NUMBER
   001130  X 000000 1152 00           1172         CMPA    H_FAIL_PORT
   001131 (0)001137 6002 00           1173         TZE     GOTLOG          THAT'S IT.
   001132  X 000000 1162 00           1174         CMPQ    S_NSCPU
   001133    000002 6012 04           1175         TNZ     2,IC
   001134    000000 7022 11           1176         TSX2    0,X1            RAN OUT OF CPUS TO CHECK ????
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       SETUP RELIEF PROCESSING ON DPS90                           43   BMAP - B00     
   001135    000001 0362 07           1177         ADLQ    1,DL
   001136 (0)001127 7102 00           1178         TRA     FNDLOG          TRY THE NEXT ONE
   001137  X 000000 7562 00           1179  GOTLOG STQ     H_FAIL_NUM      STORE FAILING LOGICAL NUMBER
   001140    000001 2352 07           1180         LDA     1,DL
   001141  X 000000 7552 06           1181         STA     S_STOP,QL       REQUEST TO STOP FAILING EPU
   001142  X 000000 7536 00           1182         STSS    S_RLF_SSR       STORE THE SSR
   001143  X 000000 2352 00           1183         LDA     S_PNO           REMEMBER WHO WE ARE...
   001144  X 000000 7552 00           1184         STA     H_NURSE         ...SO WE CAN GET BACK TO US.
   001145  X 000000 2352 06           1185         LDA     IT_SCPUWSPTD,QL WSPTD ADDR IN A
   001146  X 000000 4706 00           1186         LDP     TP,B$WSQ0PT$    GET POINTER TO WSQ0PT
   001147    0 00000 2353 05          1187         LDA     0,AL,TP         GET PHYS PAGE NUM
   001150    000002 7352 00           1188         ALS     2               JUSTIFY AND MAKE MOD 512
   001151  X 000000 7552 00           1189         STA     S_XX            GET READY TO LOAD
   001152  X 000000 1716 00           1190         LPDBR   S_XX            NOW WE'RE HIM!
   001153  X 000000 2352 00           1191         LDA     H_FAIL_PORT     PREPARE TO SWAP AND START
   001154 (0)001155 7102 05           1192         TRA     *+1,AL          TRA TO THE CORRECT DIAG
   001155    000000 6122 01           1193         DIAG    0,=O01          SWAP AND START TO PORT 0
   001156    000001 6122 01           1194         DIAG    1,=O01          SWAP AND START TO PORT 1
   001157    000002 6122 01           1195         DIAG    2,=O01          SWAP AND START TO PORT 2
   001160    000003 6122 01           1196         DIAG    3,=O01          SWAP AND START TO PORT 3

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - CLEAR HISTORY REGISTERS                44   BMAP - B00     
                                      1197         TTLS    CP6 FAULT HANDLER - CLEAR HISTORY REGISTERS
                                      1198                 *************************************************
                                      1199                 * CLEAR HISTORY REGISTER SUBROUTINE
                                      1200                 *************************************************
                                      1201  *
                                      1202  *      CLEAR HISTORY REGISTERS - ASSUMES CPU TYPE IN INDEX
                                      1203  *      REGISTER CPU.  USES X2.  RETURN ADDRESS IN X0.
                                      1204  *      ALTRETS IF NO HISTORY REGISTERS
                                      1205  *
   001161                             1206  CLRHR  NULL
   001161  X 000000 2342 00           1207         SZN     H_S1000_FLG
   001162 (0)001174 6042 00           1208         TMI     CLRHRS
   001163 (0)001630 7222 16           1209         LXL2    HRLVLS,CPU      NUMBER OF HIST REG LEVELS
   001164    000000 6002 10           1210         TZE     0,0             ALTRET IF NO HIST REGS
   001165 (0)001624 6742 04           1211         LCPR    HROFF,MDTAGL    TURN OFF HISTORY REGISTERS
   001166    000002 7102 04           1212         ALIGN   4
   001167    000000 0112 00
   001170    000000 6742 03           1213         LCPR    ,ZHTAGL         ZERO A HIST REG LEVEL
   001171    000001 1222 03           1214         SBLX2   1,DU
   001172 (0)001170 6056 00           1215         TPNZ    *-2             REPEAT FOR ALL HIST REG LEVELS
   001173    000001 7102 10           1216         TRA     1,0             RETURN
   001174    000000 1566 00           1217  CLRHRS RICHR                   RESTART HISTORY IF ON A 90
   001175    000001 7102 10           1218         TRA     1,0             RETURN

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - TIMER RUNOUT PROCESSING                45   BMAP - B00     
                                      1219         TTLS    CP6 FAULT HANDLER - TIMER RUNOUT PROCESSING
                                      1220                 *************************************************
                                      1221                 *   TIMER RUNOUT FAULT HANDLER
                                      1222                 *************************************************
   001176    000002 7102 04           1223         ALIGN   4
   001177    000000 0112 00
   001200                             1224  TROFLT NULL
   001200    6 00004 2353 00          1225         LDA     ICIR,,SS
   001201    000040 3752 07           1226         ANA     =O40,DL         TEST EIS MULTIWORD INT BIT
   001202    6 00006 5513 10          1227         STBA    CPUTYP,10,SS    ZERO BYTE 2 OF CPUTYP WORD IN SS
   001203 (0)001243 6012 00           1228         TNZ     TRO40           B IF MIR SET
                                      1229  *
   001204                             1230  TRO10  NULL
   001204  X 000005 0542 00           1231         AOS     H_FLTCNT+1+4    COUNT TRO FAULTS
   001205    6 00014 2353 00          1232         LDA     LSR,,SS         CHECK SS FRAME'S LSR.WSR
   001206    000160 3152 07           1233         CANA    =O160,DL
   001207 (0)000654 6002 00           1234         TZE     EXIT            RETURN IF MONITOR RUNNING
   001210  X 000000 2352 00           1235         LDA     S_TIMR
   001211    000002 1152 07           1236         CMPA    2,DL
   001212 (0)000654 6032 00           1237         TRC     EXIT            RETURN IF NOT RUNNING AS USER
   001213  X 000000 4726 07           1238         LDP     DS,MTSTACKSID,DL USE MONITOR TSTACK
   001214    2 00000 7223 00          1239         LXL2    0,,DS           -(CURRENT OFFSET+1)
   001215    2 00001 5276 12          1240         SWDX    1,2,DS          CURRENT OFFSET -> AR2
   001216 (1)000001 6316 00           1241         CALL6   SSC$SASYNC      SET MON EXECUTION
   001217  X 000000 7012 00
   001220    000000 0112 00
   001221 (1)000001 6316 00           1242         CALL6   SSC$MONTIMRWU   WAKE UP SLEEPERS
   001222  X 000000 7012 00
   001223    000000 0112 00
   001224  X 000000 4726 07           1243         LDP     DS,TSTACKSID,DL GET BACK INTO USER STACK
   001225    2 00000 7223 00          1244         LXL2    0,,DS           -(CURRENT OFFSET+1)
   001226    2 00001 5276 12          1245         SWDX    1,2,DS          CURRENT OFFSET -> AR2
   001227  X 000000 4706 07           1246         LDP     TP,ISBSID,DL    BYPASS CACHE
   001230    0 X 00000 2343 00        1247         SZN     IRM_SNAPSLOT,,TP ANY SNAPS TO CONVERT?
   001231 (0)000506 6002 00           1248         TZE     SEXIT           BRANCH IF NO
   001232  X 000000 2342 00           1249         SZN     S_PNO           MASTER CPU?
   001233 (0)000506 6012 00           1250         TNZ     SEXIT           BRANCH IF NO
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - TIMER RUNOUT PROCESSING                46   BMAP - B00     
   001234  X 000000 2362 00           1251         LDQ     S_CUN           MASTER CPU - WHO IS USER?
   001235    000001 1162 07           1252         CMPQ    1,DL            SLUG?
   001236 (0)000506 6002 00           1253         TZE     SEXIT           YES -> DONT DO IT ON SLUG
   001237 (1)000001 6316 00           1254         CALL6   IRM$RCVR3       NO -> FIRE OFF RCVR2 GHOST
   001240  X 000000 7012 00
   001241    000000 0112 00
   001242 (0)000506 7102 00           1255         TRA     SEXIT           RETURN TO USER
                                      1256  *
   001243                             1257  TRO40  NULL                    EIS MULTIWORD INT BIT SET
   001243  X 000000 2342 00           1258         SZN     H_SAVE_SS       IS SAFE STORE SAVE MODE SET?
   001244 (0)001250 6002 00           1259         TZE     TRO50           NO
   001245    000 0 000 1007 00        1260         MLR     (1)             YES -> SAVE INTERRUPTED SS FRAME
   001246    6 00000 0 0 0 0400       1261         ADSC9   0,,256,SS
   001247  X 000000 0 0 0 0400        1262         ADSC9   S_TRO_SS,,256
                                      1263  *
   001250                             1264  TRO50  NULL                    STAMP FRAME WITH CPU TYPE
   001250  X 000000 2752 15           1265         ORA     S_SSPTYPE,PNO   MERGE IN CPU SAFE STORE TYPE
   001251    000014 7352 00           1266         ALS     12              MOVE TO BIT 18-23
   001252    6 00006 2553 00          1267         ORSA    CPUTYP,,SS      MERGE INTO CPUTYP WORD IN SS
   001253  X 000000 0542 16           1268         AOS     H_MIXED_TRO,CPU INCREMENT MIR TRO COUNTER
   001254 (0)001204 7102 00           1269         TRA     TRO10
                                      1270         INHIB   OFF

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - CACHE PARITY ERROR SCAN                47   BMAP - B00     
                                      1271         TTLS    CP6 FAULT HANDLER - CACHE PARITY ERROR SCAN
                                      1272                 *************************************************
                                      1273                 * CACHE PARITY ERROR SCAN SUBROUTINE
                                      1274                 *************************************************
                                      1275  *
                                      1276  *F* NAME:        HFA$CSHERR
                                      1277  *F*
                                      1278  *F* PURPOSE:     BMAP portion of routine that scans cache memory
                                      1279  *F*              after a cache parity fault.
                                      1280  *
                                      1281  *D* NAME:        HFA$CSHERR
                                      1282  *D*
                                      1283  *D* DESCRIPTION: Called from HFB$CSHERR with the cache address
                                      1284  *D*              to be tested for a parity error.  If a parity
                                      1285  *D*              error is found, this routine reads both the
                                      1286  *D*              cache data and the memory data for the failing
                                      1287  *D*              doubleword.
                                      1288  *
                                      1289  *      HFA$CSHERR AUTO ASSIGNMENTS
                                      1290  *
             000000000003             1291  CSH_ADDR EQU   3               CACHE ADDRESS
             000000000004             1292  CSH_INC EQU    4               CACHE INCREMENT TO NEXT LEVEL
             000000000005             1293  CSH_DATA EQU   5               CACHE DATA TO BE RETURNED
             000000000006             1294  MEM_ADDR EQU   6               MEMORY ADDRESS
             000000000007             1295  MEM_DATA EQU   7               MEMORY DATA TO BE RETURNED
             000000000010             1296  TEMPDW EQU     8               TEMP DOUBLEWORD
             000000000012             1297  MISCSAVE EQU   10              DOUBLEWORD TO SAVE MISC DESCR
             000000000014             1298  INDSAV EQU     12              TEMP FOR INDICATOR REGISTER
             000000000015             1299  HAVFLP EQU     13              FLAG TO INDICATE WHEN FLIPPED
                                      1300  *
   001255                             1301  HFA$CSHERR NULL
                                      1302         INHIB   ON
   001255  X 000000 7002 00           1303         TSX0    X66_AUTO_5
   001256    000016 000005            1304         ZERO    14,5
   001257    2 00015 4503 00          1305         STZ     HAVFLP,,DS      ZERO FLIPPED FLAG
   001260  X 000000 4776 07           1306         LDP7    LSSID,DL        MONITOR LINKAGE SEGMENT
   001261    7 00130 2373 00          1307         LDAQ    LS.MISC*2,,7    SAVE MISC DESCRIPTOR
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - CACHE PARITY ERROR SCAN                48   BMAP - B00     
   001262    2 00012 7573 00          1308         STAQ    MISCSAVE,,DS
   001263 (0)001646 2372 00           1309         LDAQ    TYPE2           TYPE 2 DESCR TO LOW REAL
   001264    7 00130 7573 00          1310         STAQ    LS.MISC*2,,7
   001265  X 000000 4706 07           1311         LDP     TP,MISCSID,DL   TP HAS REAL MEMORY DESCR
   001266    2 00003 4757 00          1312         LDP5    CSH_ADDR,,DS    POINTER TO CACHE ADDRESS
   001267    2 00004 4747 00          1313         LDP4    CSH_INC,,DS     POINTER TO CACHE INCREMENT
   001270    2 00006 4737 00          1314         LDP3    MEM_ADDR,,DS    POINTER TO MEMORY ADDRESS
   001271 (0)001626 6742 02           1315         LCPR    CSH_TO_REG,LUTAGL ENABLE CACHE TO REGISTER MODE
   001272    004400 6342 07           1316         LDI     =O4400,DL       SET PARITY MASK
                                      1317  *
   001273                             1318  LOOP1  NULL
   001273    000004 2252 03           1319         LDX5    =4,DU           LOOP COUNT
   001274    5 00000 7223 00          1320         LXL2    0,,5            CACHE ADDRESS
                                      1321  *
   001275    000003 7102 04           1322         ALIGN   4
   001276    000000 0112 00
   001277    000000 0112 00
   001300                             1323  LOOP2  NULL
   001300    0 00000 2373 12          1324         LDAQ    0,2,TP          READ CACHE FOR NEXT LEVEL
   001301    2 00014 7543 00          1325         STI     INDSAV,,DS
   001302    2 00014 7233 00          1326         LXL3    INDSAV,,DS
   001303    001000 3632 03           1327         ANX3    =O1000,DU       PARITY ERROR FOUND?
   001304 (0)001325 6012 00           1328         TNZ     PAR_ERR         YES -> READ MEM DATA AND ALTRET
   001305    4 00000 0223 00          1329         ADLX2   0,,4            NO -> INCREMENT BY CSH_INC
   001306    000001 1252 03           1330         SBLX5   1,DU            DECREMENT LOOP COUNT
   001307 (0)001300 6056 00           1331         TPNZ    LOOP2           EXECUTE LOOP FOUR TIMES
                                      1332  *
   001310    2 00015 2343 00          1333         SZN     HAVFLP,,DS      HAVE WE TRIED OTHER HALF?
   001311 (0)001317 6012 00           1334         TNZ     CANT_FIND       YES-> RETURN TO HFB
   001312    000002 2352 07           1335         LDA     2,DL            NO -> FLIP TO OTHER DW
   001313    2 00015 7553 00          1336         STA     HAVFLP,,DS      SET FLIPPED FLAG
   001314    5 00000 6553 00          1337         ERSA    0,,5            FLIP CACHE ADDRESS TO OTHER DW
   001315    3 00000 6553 00          1338         ERSA    0,,3            FLIP MEMORY ADDRESS TO OTHER DW
   001316 (0)001273 7102 00           1339         TRA     LOOP1
                                      1340  *
   001317                             1341  CANT_FIND NULL
   001317 (0)001627 6742 02           1342         LCPR    CSH_NORMAL,LUTAGL DISABLE CACHE TO REGISTER MODE
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - CACHE PARITY ERROR SCAN                49   BMAP - B00     
   001320    004010 6342 07           1343         LDI     =O4010,DL       RESET INDICATOR
   001321    2 00010 4523 01          1344         SCPR    TEMPDW,FLTAGS,DS CLEAR FAULT REGISTER
   001322    2 00012 2373 00          1345         LDAQ    MISCSAVE,,DS    RESTORE MISC DISCRIPTOR
   001323    7 00130 7573 00          1346         STAQ    LS.MISC*2,,7
   001324  X 000000 7022 00           1347         TSX2    X66_ARET        RETURN TO HFB
                                      1348  *
   001325                             1349  PAR_ERR NULL
   001325 (0)001627 6742 02           1350         LCPR    CSH_NORMAL,LUTAGL DISABLE CACHE TO REGISTER MODE
   001326    004010 6342 07           1351         LDI     =O4010,DL       RESET INDICATOR
   001327    5 00000 4423 00          1352         SXL2    0,,5            SAVE FINAL CACHE ADDRESS
   001330    2 00005 4707 00          1353         LDP     TP,CSH_DATA,,DS
   001331    0 00000 7573 00          1354         STAQ    0,,TP           SAVE CACHE DATA
   001332 (0)001646 2352 00           1355         LDA     TYPE2
   001333    3 00000 2363 00          1356         LDQ     0,,3            MEMORY ADDRESS
   001334    000002 7362 00           1357         QLS     2               MAKE INTO BYTE ADDRESS
   001335    7 00130 7573 00          1358         STAQ    LS.MISC*2,,7
   001336  X 000000 4706 07           1359         LDP     TP,MISCSID,DL   TYPE 2 DESCR TO MEMORY DATA
   001337    0 00000 2373 00          1360         LDAQ    0,,TP
   001340    2 00007 4707 00          1361         LDP     TP,MEM_DATA,,DS
   001341    0 00000 7573 00          1362         STAQ    0,,TP           SAVE MEMORY DATA
   001342    2 00012 2373 00          1363         LDAQ    MISCSAVE,,DS    RESTORE MISC DESCRIPTOR
   001343    7 00130 7573 00          1364         STAQ    LS.MISC*2,,7
   001344    2 00010 4523 01          1365         SCPR    TEMPDW,FLTAGS,DS CLEAR FAULT REGISTER
   001345  X 000000 7022 00           1366         TSX2    X66_AALT        ALTRET BACK TO HFB
                                      1367         INHIB   OFF

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - READ FAULT REG SUBROUTINE              50   BMAP - B00     
                                      1368         TTLS    CP6 FAULT HANDLER - READ FAULT REG SUBROUTINE
                                      1369                 *************************************************
                                      1370                 * READ FAULT REGISTER FOR DPSE AND ELS1
                                      1371                 *************************************************
                                      1372  *
                                      1373  *F* NAME:        HFA$FLTREG
                                      1374  *F*
                                      1375  *F* PURPOSE:     Periodically check status of cache, history
                                      1376  *F*              registers, and extended fault registers.
                                      1377  *
                                      1378  *D* NAME:        HFA$FLTREG
                                      1379  *D*
                                      1380  *D* DESCRIPTION: Called from HFB$FLTREG once per minute on each
                                      1381  *D*              active CPU.  Reads LOCKUP FAULT MODE register
                                      1382  *D*              to insure that the CACHE is enabled.  Reads the
                                      1383  *D*              MODE register to insure that history registers
                                      1384  *D*              are enabled.  On 8K cache and ELS, the extended
                                      1385  *D*              fault register is read and returned in order
                                      1386  *D*              to log hardware recoverable errors.
                                      1387  *
   001346                             1388  HFA$FLTREG NULL
                                      1389         INHIB   ON
   001346  X 000000 2342 00           1390         SZN     H_S1000_FLG
   001347 (0)001411 6012 00           1391         TNZ     FLTREG90
   001350    0 00000 4717 00          1392         LDP1    0,,0            POINTER TO TEMP (DALIGNED)
   001351    0 00001 4737 00          1393         LDP3    1,,0            POINTER TO FLTREG (DALIGNED)
   001352  X 000000 4746 07           1394         LDP4    ISBSID,DL       BYPASS CACHE
   001353  X 000000 7252 00           1395         LXL     PNO,S_PNO       PROCESSOR NUMBER
   001354  X 000000 7262 15           1396         LXL     CPU,S_PTYPE,PNO CPU TYPE
   001355    000000 2352 07           1397         LDA     0,DL
   001356    000000 2362 07           1398         LDQ     0,DL
   001357    1 00000 7573 00          1399         STAQ    0,,1            IN CASE OF PARITY ERROR
                                      1400  *
   001360 (0)001625 6742 02           1401         LCPR    CACHEOFF,LUTAGL DONT RISK PARITY ERROR (TEMP?)
                                      1402  *
   001361    000012 2272 03           1403         LDX7    10,DU
                                      1404  *
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - READ FAULT REG SUBROUTINE              51   BMAP - B00     
                                      1405  *    For now do not check mode register with SCPR because the SCPR
                                      1406  *    causes a parity fault.
                                      1407  *
   001362 (0)001433 7102 00           1408        TRA     FLTREG60
   001363    1 00000 4523 06          1409         SCPR    0,MDTAGS,1      READ CPU MODE REG
                                      1410  *
                                      1411  *    Alway turn on the history and cache since SCPR sometimes
   001364    000001 1672 03           1412         SBX7    1,DU
   001365 (0)001364 6052 00           1413         TPL     *-1             DELAY IN CASE OF PARITY ERROR
   001366    1 00000 2373 00          1414         LDAQ    0,,1
                                      1415  *
   001367 (0)001373 7102 00           1416         TRA     FLTREG20        DONT TEST LUF MODE REG
                                      1417  *
   001370  X 000000 3762 16           1418         ANQ     H_LUFREG_MASK,CPU MASK CACHE AND LUF MODE REG
   001371  X 000000 1162 16           1419         CMPQ    H_LUFREG,CPU    IS DATA CORRECT?
   001372 (0)001426 6012 00           1420         TNZ     FLTREG50        NO -> LOAD WITH CORRECT VALUE
   001373                             1421  FLTREG20 NULL
   001373  X 000000 3752 16           1422         ANA     H_HRMODE_MASK,CPU MASK MODE REGISTER
   001374  X 000000 1152 16           1423         CMPA    H_HRMODE,CPU    IS DATA CORRECT?
   001375 (0)001433 6012 00           1424         TNZ     FLTREG60        NO -> LOAD WITH CORRECT VALUE
   001376                             1425  FLTREG30 NULL
   001376 (0)001625 6742 02           1426         LCPR    CACHEOFF,LUTAGL TURN CACHE OFF
   001377  X 000000 2362 16           1427         LDQ     H_LUFREG,CPU    DATA TO TURN CACHE ON
   001400    1 00001 7563 00          1428         STQ     1,,1            SAVE IN TEMP
   001401 (0)001402 7102 16           1429         TRA     FLTREG40,CPU    DISPATCH ON CPU TYPE
                                      1430  *
   001402                             1431  FLTREG40 NULL
   001402 (0)001413 7102 00           1432         TRA     FLTREG_DPSE     L66 - READ FLT REG (FOR 8K CACHE)
   001403 (0)001413 7102 00           1433         TRA     FLTREG_DPSE     DPSE
   001404 (0)001416 7102 00           1434         TRA     FLTREG_ELS      ELS
   001405    000001 7102 11           1435         TRA     1,X1            ADP
   001406 (0)001411 7102 00           1436         TRA     FLTREG90        DPS90
   001407 (0)001411 7102 00           1437         TRA     FLTREG90        DPS90XA
   001410 (0)001416 7102 00           1438         TRA     FLTREG_ELS      RPM
   001411                             1439  FLTREG90 NULL
   001411    000000 1566 00           1440         RICHR                   Restart hist on DPS90
   001412    000001 7102 11           1441         TRA     1,X1            Return
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - READ FAULT REG SUBROUTINE              52   BMAP - B00     
                                      1442  *
   001413                             1443  FLTREG_DPSE NULL
   001413    3 00000 4523 01          1444         SCPR    0,FLTAGS,3      RETURN FLTREG IN 2ND ARG
   001414    1 00001 6743 02          1445         LCPR    1,LUTAGL,1      TURN CACHE ON
   001415    000001 7102 11           1446         TRA     1,X1            RETURN
                                      1447  *
   001416                             1448  FLTREG_ELS NULL
   001416    1 00000 4523 03          1449         SCPR    0,EFLTAGS,1     READ EXTENDED FAULT REGISTER
   001417    1 00000 2353 00          1450         LDA     0,,1            RETURN EXT FLTREG IN 2ND ARG
   001420    3 00001 7553 00          1451         STA     1,,3              BITS 36-71
   001421    3 00000 4503 00          1452         STZ     0,,3
   001422    1 00000 4523 01          1453         SCPR    0,FLTAGS,1      CLEAR EXTENDED FAULT REGISTER
   001423    1 00001 7563 00          1454         STQ     1,,1
   001424    1 00001 6743 02          1455         LCPR    1,LUTAGL,1      TURN CACHE ON
   001425    000001 7102 11           1456         TRA     1,X1            RETURN
                                      1457  *
   001426                             1458  FLTREG50 NULL                  RELOAD CACHE MODE AND LUF REG
   001426    4 X 00000 0543 00        1459         AOS     H_RELOAD_CACHE,,4  BUMP COUNTER
   001427  X 000000 2362 16           1460         LDQ     H_LUFREG,CPU
   001430    1 00001 7563 00          1461         STQ     1,,1
   001431    1 00001 6743 02          1462         LCPR    1,LUTAGL,1
   001432 (0)001373 7102 00           1463         TRA     FLTREG20
                                      1464  *
   001433                             1465  FLTREG60 NULL                  RELOAD MODE REGISTER
   001433    4 X 00000 0543 00        1466         AOS     H_RELOAD_MODE,,4  BUMP COUNTER
   001434 (0)001161 7002 00           1467         TSX0    CLRHR           CLEAR HISTORY REGS
   001435    000000 0112 00           1468         NOP
   001436  X 000000 2352 16           1469         LDA     H_HRMODE,CPU
   001437    1 00000 7553 00          1470         STA     0,,1
   001440    1 00000 6743 04          1471         LCPR    0,MDTAGL,1      ENABLE HISTORY REGS
   001441 (0)001376 7102 00           1472         TRA     FLTREG30
                                      1473         INHIB   OFF

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - STOP CPUS SUBROUTINE                   53   BMAP - B00     
                                      1474         TTLS    CP6 FAULT HANDLER - STOP CPUS SUBROUTINE
                                      1475                 *************************************************
                                      1476                 * STOP CPU SUBROUTINE
                                      1477                 *************************************************
                                      1478         INHIB   ON
                                      1479  *
                                      1480  *F* NAME:        HFA$CLEARCPU
                                      1481  *F*
                                      1482  *F* PURPOSE:     Direct all other running CPUs to clear their
                                      1483  *F*              cache and associative memory (PTWAM).
                                      1484  *
                                      1485  *D* NAME:        HFA$CLEARCPU
                                      1486  *D*
                                      1487  *D* DESCRIPTION: Sends a connect fault to all other running
                                      1488  *D*              CPU's directing them to goto HFB$CONNECT to
                                      1489  *D*              clear cache and associative memory (PTWAM).
                                      1490  *
   001442                             1491  HFA$CLEARCPU NULL
   001442    000020 6202 00           1492         EAX0    16               CONNECT MAILBOX CODE FOR CLEAR
   001443 (0)001451 7102 00           1493         TRA     HFA$STOPCPU+1
                                      1494  *
                                      1495  *F* NAME:        HFA$RELIEFCPU
                                      1496  *F*
                                      1497  *F* PURPOSE:     Direct all other running CPUs to try to relief
                                      1498  *F*              a failed CPU.
                                      1499  *
                                      1500  *D* NAME:        HFA$RELIEFCPU
                                      1501  *D*
                                      1502  *D* DESCRIPTION: Sends a connect fault to all other running
                                      1503  *D*              CPU's directing them to goto HFB$CONNECT to
                                      1504  *D*              RELIEF a failed CPU.
                                      1505  *
   001444                             1506  HFA$RELIEFCPU NULL
   001444    000040 6202 00           1507         EAX0    32               CONNECT MAILBOX CODE FOR RELIEF
   001445 (0)001451 7102 00           1508         TRA     HFA$STOPCPU+1
                                      1509  *
                                      1510  *F* NAME:        HFA$STOPCPUT
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - STOP CPUS SUBROUTINE                   54   BMAP - B00     
                                      1511  *F*
                                      1512  *F* PURPOSE:     Direct all other running CPUs to pause in
                                      1513  *F*              preparation for updating their time.
                                      1514  *
                                      1515  *D* NAME:        HFA$STOPCPUT
                                      1516  *D*
                                      1517  *D* DESCRIPTION: Sends a connect fault to all other running
                                      1518  *D*              CPU's directing them to goto HFC$DIS to enter
                                      1519  *D*              the paused state and to update their time
                                      1520  *D*              when started by HFA$STARTCPU. Used on the
                                      1521  *D*              master when processing DATE and TIME keyins.
                                      1522  *
   001446                             1523  HFA$STOPCPUT NULL
   001446    000004 6202 00           1524         EAX0    4               TIME CONNECT MAILBOX CODE
   001447 (0)001451 7102 00           1525         TRA     *+2
                                      1526  *
                                      1527  *F* NAME:        HFA$STOPCPU
                                      1528  *F*
                                      1529  *F* PURPOSE:     Pause all other running CPU's.
                                      1530  *
                                      1531  *D* NAME:        HFA$STOPCPU
                                      1532  *D*
                                      1533  *D* DESCRIPTION: Sends a connect fault to all other running
                                      1534  *D*              CPU's directing them to goto HFC$DIS to enter
                                      1535  *D*              the paused state.  Used on the master CPU in
                                      1536  *D*              order to start a new slave CPU and on any CPU
                                      1537  *D*              prior to going to SCREECH or XDELTA.
                                      1538  *
   001450                             1539  HFA$STOPCPU NULL
   001450    000001 6202 00           1540         EAX0    1               PAUSE CONNECT MAILBOX CODE
   001451  X 000000 7232 00           1541         LXL3    S_PNO
   001452 (0)001457 6012 00           1542         TNZ     STPGTE          DONT DISABLE ON SLAVES
   001453  X 000000 4706 07           1543         LDP     TP,SCUSID,DL
   001454  X 000000 2372 00           1544         LDAQ    H_DSMASK
   001455    0 00000 5533 00          1545         SMCM    0,,TP           DISABLE INTERRUPTS
   001456  X 000000 0542 00           1546         AOS     NI$DS           INCREMENT DISABLE COUNT
                                      1547         INHIB   OFF
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - STOP CPUS SUBROUTINE                   55   BMAP - B00     
   001457                             1548  STPGTE NULL
   001457  X 000000 2140 00           1549         SZNC    H_CPUGATE       LOCK CPU GATE
   001460 (0)001531 6000 00           1550         TZE     WAIT            GATE ALREADY LOCKED
   001461  X 000001 7430 00           1551         STX3    H_CPUGATE+1     LOGICAL CPU NUMBER
   001462  X 000001 4410 00           1552         SXL1    H_CPUGATE+1     LOCKORS ADDRESS
   001463    000000 6270 11           1553         EAX7    0,X1            MOVE RETURN ADDR TO X7
   001464  X 000000 7010 00           1554         TSX1    SSS$TIME
   001465    000000 0110 00           1555         NOP
   001466  X 000000 2350 00           1556         LDA     S_INCTIME
   001467  X 000000 7550 00           1557         STA     H_TIME          RECORD STOP TIME
   001470  X 000000 4704 07           1558         LDP     TP,ISBSID,DL    BYPASS CACHE
   001471    000000 2360 07           1559         LDQ     0,DL
   001472                             1560  STOPCPU NULL
   001472  X 000000 1160 00           1561         CMPQ    S_PNO
   001473 (0)001523 6000 00           1562         TZE     NXTCPU          DONT STOP YOUR OWN CPU
   001474    000002 2350 07           1563         LDA     2,DL
   001475    0 X 00000 1151 06        1564         CMPA    S_MPSTATE,QL,TP
   001476 (0)001523 6010 00           1565         TNZ     NXTCPU          DONT STOP NON RUNNING CPU
   001477  X 000000 4400 06           1566         SXL0    H_CNNCTMLBX,QL  SET MAILBOX TO REQ'D FUNCTION
   001500  X 000000 2340 00           1567         SZN     H_RPM_FLG       IS THIS AN RPM
   001501 (0)001505 6000 00           1568         TZE     NON_RPM_CIOC    NO
   001502  X 000000 2350 06           1569         LDA     H_DPS8000_CI_TABLE,QL  GET CONNECT INDEX
   001503    000000 0150 00           1570         CIOC                     SEND THE CONNECT FAULT
   001504 (0)001506 7100 00           1571         TRA     *+2
   001505                             1572  NON_RPM_CIOC NULL
   001505  X 000000 0150 06           1573         CIOC    S_PORTNR,QL
   001506    000001 2350 07           1574         LDA     1,DL
   001507    210560 2230 03           1575         LDX3    70000,DU        DONT WAIT FOREVER
   001510    0 X 00000 1151 06        1576         CMPA    S_MPSTATE,QL,TP HAS CPU PAUSED?
   001511 (0)001523 6000 00           1577         TZE     NXTCPU          YES -> GO ON TO NEXT CPU
   001512    0 X 00000 2341 06        1578         SZN     H_CNNCTMLBX,QL,TP HAS MAILBOX BEEN CLEARED YET?
   001513 (0)001523 6000 00           1579         TZE     NXTCPU          YES -> GO TO NEXT CPU
   001514    000001 1230 03           1580         SBLX3   1,DU            NO -> HAVE WE WAITED LONG ENOUGH?
   001515 (0)001510 6050 00           1581         TPL     *-5             NO -> KEEP ON LOOKING
   001516  X 000000 2350 06           1582         LDA     S_MPSTATE,QL
   001517  X 000000 4500 06           1583         STZ     S_MPSTATE,QL    YES -> SET HER STATE TO STOPPED
   001520  X 000000 7500 00           1584         STC2    H_CPUGATE       UNLOCK CPU GATE
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - STOP CPUS SUBROUTINE                   56   BMAP - B00     
   001521  X 000000 7134 00           1585         ENTER   SCRCHENTSID,,SC_SLAVE CLIMB TO SCREECH
   001522    0 000 000 60 X 0000
   001523                             1586  NXTCPU NULL
   001523    000001 0760 07           1587         ADQ     1,DL            NEXT CPU
   001524  X 000000 1160 00           1588         CMPQ    S_NSCPU
   001525 (0)001472 6044 00           1589         TMOZ    STOPCPU
   001526    000020 1000 03           1590         CMPX0   16,DU           ENTERED AT HFA$CLEARCPU?/HFA$RELIEFCPU
   001527 (0)001602 6050 00           1591         TPL     STAEXIT         YES -> ENABLE AND RESET CPUGATE
   001530    000001 7100 17           1592         TRA     1,7
                                      1593  *
   001531                             1594  WAIT   NULL                    GATE ALREADY LOCKED
   001531  X 000001 2350 00           1595         LDA     H_CPUGATE+1
   001532    000777 3750 03           1596         ANA     =O777,DU
   001533    000022 7710 00           1597         ARL     18
   001534  X 000000 1150 00           1598         CMPA    S_PNO           GATE LOCKED BY THIS CPU?
   001535 (0)001457 6010 00           1599         TNZ     STPGTE          NO -> TEST GATE AGAIN
   001536    000007 2350 07           1600         LDA     =7,DL           YES -> GO DIRECTLY TO RCVR
   001537  X 000000 2550 00           1601         ORSA    IRM_SCODE        CHANGE TO FULL SCREECH
   001540  X 000000 7134 00           1602         ENTER   RCVENTSID,,IRM_SCODE
   001541    0 000 000 60 X 0000

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - START CPUS SUBROUTINE                  57   BMAP - B00     
                                      1603         TTLS    CP6 FAULT HANDLER - START CPUS SUBROUTINE
                                      1604                 *************************************************
                                      1605                 * START CPU SUBROUTINE
                                      1606                 *************************************************
                                      1607  *
                                      1608  *F* NAME:        HFA$SCRCPU
                                      1609  *F*
                                      1610  *F* PURPOSE:     Switch over to running on master CPU on full
                                      1611  *F*              screech after recovery but before disk boot.
                                      1612  *
                                      1613  *D* NAME:        HFA$SCRCPU
                                      1614  *D*
                                      1615  *D* DESCRIPTION: Sends a connect fault to all paused CPU's
                                      1616  *D*              directing that the master CPU goto RVA$REBOOT
                                      1617  *D*              and that all slave CPU's goto SSS$STOP to
                                      1618  *D*              enter the stopped state.
                                      1619  *
   001542                             1620  HFA$SCRCPU NULL                SCREECH ENTRY
   001542    000002 6270 00           1621         EAX7    2
   001543 (0)001545 7100 00           1622         TRA     *+2
                                      1623  *
                                      1624  *F* NAME:        HFA$STARTCPU
                                      1625  *F*
                                      1626  *F* PURPOSE:     Start all CPU's that are currently paused.
                                      1627  *
                                      1628  *D* NAME:        HFA$STARTCPU
                                      1629  *D*
                                      1630  *D* DESCRIPTION: Sends a connect fault to all paused CPU's
                                      1631  *D*              directing them to enter the running state.
                                      1632  *D*              Used to restart other CPU's after starting a
                                      1633  *D*              new slave CPU or after a call to SCREECH or
                                      1634  *D*              XDELTA.
                                      1635  *
   001544                             1636  HFA$STARTCPU NULL
   001544    000000 6270 00           1637         EAX7    0               ORDINARY STARTUP ACTION (NOP)
   001545  X 000000 4704 07           1638         LDP     TP,ISBSID,DL    BYPASS CACHE
   001546    000000 2360 07           1639         LDQ     0,DL
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - START CPUS SUBROUTINE                  58   BMAP - B00     
   001547                             1640  STARTCPU NULL
   001547  X 000000 1160 00           1641         CMPQ    S_PNO
   001550 (0)001576 6000 00           1642         TZE     NXTCPU2         DONT START YOUR OWN CPU
   001551    000001 2350 07           1643         LDA     1,DL
   001552    0 X 00000 1151 06        1644         CMPA    S_MPSTATE,QL,TP
   001553 (0)001576 6010 00           1645         TNZ     NXTCPU2         DONT START IF NOT PAUSED
   001554  X 000000 4470 06           1646         SXL7    H_CNNCTMLBX,QL  SET MAILBOX TO RUN
   001555  X 000000 2340 00           1647         SZN     H_RPM_FLG       IS THIS AN RPM CIOC
   001556 (0)001562 6000 00           1648         TZE     NO_RPM          NO
   001557  X 000000 2350 06           1649         LDA     H_DPS8000_CI_TABLE,QL
   001560    000000 0150 00           1650         CIOC                    SEND CONNECT FAULT
   001561 (0)001563 7100 00           1651         TRA      *+2
   001562                             1652  NO_RPM NULL
   001562  X 000000 0150 06           1653         CIOC    S_PORTNR,QL
   001563    000002 2350 07           1654         LDA     2,DL
   001564    210560 2230 03           1655         LDX3    70000,DU        DONT WAIT FOREVER
   001565    0 X 00000 1151 06        1656         CMPA    S_MPSTATE,QL,TP HAS CPU STARTED RUNNING?
   001566 (0)001576 6000 00           1657         TZE     NXTCPU2         YES -> GO ON TO NEXT CPU
   001567    000001 1230 03           1658         SBLX3   1,DU            NO -> HAVE WE WAITED LONG ENOUGH?
   001570 (0)001565 6050 00           1659         TPL     *-3             NO -> KEEP ON LOOKING
   001571  X 000000 2350 06           1660         LDA     S_MPSTATE,QL
   001572  X 000000 4500 06           1661         STZ     S_MPSTATE,QL    YES -> SET HER STATE TO STOPPED
   001573  X 000000 7500 00           1662         STC2    H_CPUGATE       UNLOCK CPU GATE
   001574  X 000000 7134 00           1663         ENTER   SCRCHENTSID,,SC_SLAVE CLIMB TO SCREECH
   001575    0 000 000 60 X 0000
   001576                             1664  NXTCPU2 NULL
   001576    000001 0760 07           1665         ADQ     1,DL            NEXT CPU
   001577  X 000000 1160 00           1666         CMPQ    S_NSCPU
   001600 (0)001547 6044 00           1667         TMOZ    STARTCPU
                                      1668         INHIB   ON
   001601    000000 6272 11           1669         EAX7    0,1
   001602                             1670  STAEXIT NULL                   ENTRY FROM HFA$CLEARCPU
   001602  X 000000 2342 00           1671         SZN     S_PNO
   001603 (0)001612 6012 00           1672         TNZ     NOTNOW          DONT ENABLE ON SLAVES
   001604    000001 3352 07           1673         LCA     1,DL            DECREMENT DISABLE COUNT
   001605  X 000000 0552 00           1674         ASA     NI$DS
   001606 (0)001612 6012 00           1675         TNZ     NOTNOW          DONT ENABLE IF COUNT NOT ZERO
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - START CPUS SUBROUTINE                  59   BMAP - B00     
   001607  X 000000 4706 07           1676         LDP     TP,SCUSID,DL
   001610  X 000000 2372 00           1677         LDAQ    H_ENMASK
   001611    0 00000 5533 00          1678         SMCM    0,,TP           ENABLE INTERRUPTS
   001612                             1679  NOTNOW NULL
   001612  X 000000 7012 00           1680         TSX1    SSS$TIME
   001613    000000 0112 00           1681         NOP
   001614  X 000000 3352 00           1682         LCA     H_TIME          GET INTERRUPTED INTERVAL TIME
   001615    000044 7332 00           1683         LRS     36
   001616  X 000000 0772 00           1684         ADAQ    S_ITIME         COMPENSATE IN PREVIOUS INTERVAL
   001617  X 000000 7572 00           1685         STAQ    S_ITIME
   001620  X 000000 7502 00           1686         STC2    H_CPUGATE       UNLOCK CPU GATE
   001621    000001 7102 17           1687         TRA     1,7
                                      1688         INHIB   OFF

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - DATA DECLARATIONS                      60   BMAP - B00     
                                      1689         TTLS    CP6 FAULT HANDLER - DATA DECLARATIONS
                                      1690                 *************************************************
                                      1691                 *
                                      1692                 * DATA DECLARATIONS
                                      1693                 *
                                      1694                 *************************************************
                                      1695                 *************************************************
                                      1696                 * CONSTANTS
                                      1697                 *************************************************
   001622    10 06 01 1 00000 6       1698  ERCODE VFD     A6/H,A6/F,A6/A,1/1,14/0,3/6
   001623    10 06 01 00000 7         1699  SRCODE VFD     A6/H,A6/F,A6/A,15/0,3/7
   001624    000000000000             1700  HROFF  OCT     0               TURN OFF HISTORY REGISTERS
   001625    000000000000             1701  CACHEOFF OCT   0               TURN CACHE OFF
   001626    000000010000             1702  CSH_TO_REG OCT 10000           ENABLE CACHE TO REGISTER MODE
   001627    000000000000             1703  CSH_NORMAL OCT 0               DISABLE CACHE TO REGISTER MODE
                                      1704  *
   001630                             1705  HRLVLS NULL                    # OF HIST REG LEVELS BY CPU TYPE
   001630    000000000020             1706         DEC     16              L66
   001631    000000000100             1707         DEC     64              DPSE
   001632    000000000020             1708         DEC     16              ELS1
   001633    000000000000             1709         DEC     0               ADP
   001634    000000000020             1710         DEC     16              DPS90
   001635    000000000020             1711         DEC     16              DPS90X
   001636    000000000100             1712         DEC     64              RPM
                                      1713  *
   001637                             1714  HRSIZE NULL                    SPACE NEEDED IN AUTO FOR HR'S
   001637    000000000200             1715         DEC     128             L66
   001640    000000001000             1716         DEC     512             DPSE
   001641    000000000040             1717         DEC     32              ELS1
   001642    000000000000             1718         DEC     0               ADP
   001643    000000000020             1719         DEC     16              DPS90
   001644    000000000020             1720         DEC     16              DPS90X
   001645    000000000400             1721         DEC     256             RPM
                                      1722  *
                                      1723         EVEN
   001646    017777 3 4 000 02        1724  TYPE2  VFD     18/8*1024-1,2/3,3/4,9/0,4/2 8 PGS, WSQ 0, RD ONLY
   001647    000000000000             1725         OCT     0

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - DATA DECLARATIONS                      61   BMAP - B00     
                                      1726         EJECT
                                      1727                 *************************************************
                                      1728                 * FAULT VECTOR TABLES
                                      1729                 *************************************************
                                      1730  *
                                      1731  *D* NAME:        HFA$FAULT
                                      1732  *D*
                                      1733  *D* DESCRIPTION: FLTVEC1 table contains values used to
                                      1734  *D*    determine fault handler action based on the fault code.
                                      1735  *D* *
                                      1736  *D*    The left half word of FLTVEC1 contains the address of
                                      1737  *D*    the HFB$FPR routine used to process this fault.  The
                                      1738  *D*    right half word of FLTVEC1 contains the base action
                                      1739  *D*    code for this fault.  The HFB$FPR routine may change
                                      1740  *D*    the action code.  If the right half word of FLTVEC1 is
                                      1741  *D*    negative, no call to HFB$FPR is made and the action code
                                      1742  *D*    is the complement of the right half word of FLTVEC1.
                                      1743  *
   001650                             1744  FLTVEC1 NULL
   001650    000000 777775            1745         ZERO    0,-SXTACT           SHUTDOWN FAULT
   001651  X 000000 000007            1746         ZERO    HFB$STR,SCRACT      MEMORY FAULT
   001652  X 000000 000006            1747         ZERO    HFB$VISIBLE,DGOACT  MME FAULT
   001653  X 000000 000006            1748         ZERO    HFB$VISIBLE,DGOACT  FAULT TAG FAULT
   001654    000000 777775            1749         ZERO    0,-SXTACT           TIMER RUNOUT FAULT
   001655  X 000000 000007            1750         ZERO    HFB$CMD,SCRACT      COMMAND FAULT
   001656  X 000000 000006            1751         ZERO    HFB$VISIBLE,DGOACT  DERAIL FAULT
   001657  X 000000 000006            1752         ZERO    HFB$VISIBLE,DGOACT  LOCKUP FAULT
   001660  X 000000 000006            1753         ZERO    HFB$CONNECT,DGOACT  CONNECT FAULT
   001661  X 000000 000010            1754         ZERO    HFB$HDWR,SCRACT+1   PARITY FAULT
   001662  X 000000 000006            1755         ZERO    HFB$VISIBLE,DGOACT  IPR FAULT
   001663  X 000000 000010            1756         ZERO    HFB$HDWR,SCRACT+1   OP NOT COMPLETE FAULT
   001664    010000 777771            1757         ZERO    STARTU*8,-SCRACT    STARTUP FAULT
   001665  X 000000 000006            1758         ZERO    HFB$VISIBLE,DGOACT  OVERFLOW FAULT
   001666  X 000000 000006            1759         ZERO    HFB$VISIBLE,DGOACT  DIVIDE CHECK FAULT
   001667    010030 777771            1760         ZERO    EXECUT*8,-SCRACT    EXECUTE FAULT
   001670  X 000000 000006            1761         ZERO    HFB$VISIBLE,DGOACT  SECURITY 1 FAULT
   001671  X 000000 000007            1762         ZERO    HFB$HDWR,SCRACT     DYNAMIC LINKING FAULT
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - DATA DECLARATIONS                      62   BMAP - B00     
   001672  X 000000 000006            1763         ZERO    HFB$MSF,DGOACT      MISSING SEGMENT FAULT
   001673  X 000000 000007            1764         ZERO    HFB$HDWR,SCRACT    MISSING WORKING SPACE FAULT
   001674  X 000000 000006            1765         ZERO    HFB$MPF,DGOACT      MISSING PAGE FAULT
   001675  X 000000 000006            1766         ZERO    HFB$VISIBLE,DGOACT  SECURITY 2 FAULT
                                      1767         DETAIL  OFF
                                      1768         DUP     1,32+FLTVEC1-*
   001676  X 000000 000007            1769         ZERO    HFB$HDWR,SCRACT     FILL REST OF TABLE
                                      1770         DETAIL  ON
             000000000000             1771  SSFOFF EQU     0               SAFE STORE FLT OFFSET IN H_FLTCNT
             000000000001             1772  SDFOFF EQU     1               SHUTDOWN FLT OFFSET IN H_FLTCNT

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - DATA DECLARATIONS                      63   BMAP - B00     
                                      1773         EJECT
                                      1774  *
                                      1775  *D* NAME:        HFA$FAULT
                                      1776  *D*
                                      1777  *D* DESCRIPTION: FLTVEC2 table contains values used to
                                      1778  *D*    determine fault handler action based on the fault code.
                                      1779  *D* *
                                      1780  *D*    The left half word of FLTVEC2 is used on initial entry
                                      1781  *D*    to fault handler. If negative, dump PTWAM if diagnostic
                                      1782  *D*    snapshot mode is set, perform special processing
                                      1783  *D*    described below, and then check if XDELTA wants control.
                                      1784  *D*    If positive, do not dump PTWAM and perform special
                                      1785  *D*    processing described below:
                                      1786  *D* *
                                      1787  *D*           -4 -> Execute fault - Go to XDELTA
                                      1788  *D* *
                                      1789  *D*           -3 -> Unused
                                      1790  *D* *
                                      1791  *D*           -2 -> Lockup fault - Check for lockup on PMME
                                      1792  *D* *
                                      1793  *D*           -1 -> No special action
                                      1794  *D* *
                                      1795  *D*            0 -> Check if XDELTA wants control
                                      1796  *D* *
                                      1797  *D*            1 -> Do not check if XDELTA wants control
                                      1798  *D* *
                                      1799  *D*            2 -> Process timer runout fault - Do not check if
                                      1800  *D*                 XDELTA wants control
                                      1801  *D* *
                                      1802  *D*            3 -> Derail fault - If monitor ISR, go to XDELTA
                                      1803  *D*                 to check for DRL -1 from KEYIN or breakpoint
                                      1804  *D*                 in monitor. If not monitor ISR, check if
                                      1805  *D*                 XDELTA wants control
                                      1806  *D* *
                                      1807  *D*    The right half word of FLTVEC2 is used to determine
                                      1808  *D*    whether to read the MODE register to see if the HISTORY
                                      1809  *D*    registers have been locked by the fault:
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - DATA DECLARATIONS                      64   BMAP - B00     
                                      1810  *D* *
                                      1811  *D*            0 -> Read MODE register
                                      1812  *D* *
                                      1813  *D*            1 -> Dont read MODE register
                                      1814  *
   001710                             1815  FLTVEC2 NULL
   001710    000001 000001            1816         ZERO    1,1             SHUTDOWN FAULT
   001711    777777 000000            1817         ZERO    -1,0            MEMORY FAULT
   001712    000000 000001            1818         ZERO    0,1             MME FAULT
   001713    000000 000001            1819         ZERO    0,1             FAULT TAG FAULT
   001714    000002 000001            1820         ZERO    2,1             TIMER RUNOUT FAULT
   001715    777777 000000            1821         ZERO    -1,0            COMMAND FAULT
   001716    000003 000001            1822         ZERO    3,1             DERAIL FAULT
   001717    777776 000000            1823         ZERO    -2,0            LOCKUP FAULT
   001720    000001 000001            1824         ZERO    1,1             CONNECT FAULT
   001721    777777 000000            1825         ZERO    -1,0            PARITY FAULT
   001722    777777 000000            1826         ZERO    -1,0            IPR FAULT
   001723    777777 000000            1827         ZERO    -1,0            OP NOT COMPLETE FAULT
   001724    000001 000001            1828         ZERO    1,1             STARTUP FAULT
   001725    777777 000001            1829         ZERO    -1,1            OVERFLOW FAULT
   001726    777777 000001            1830         ZERO    -1,1            DIVIDE CHECK FAULT
   001727    777774 000000            1831         ZERO    -4,0            EXECUTE FAULT
   001730    777777 000000            1832         ZERO    -1,0            SECURITY 1 FAULT
   001731    777777 000000            1833         ZERO    -1,0            DYNAMIC LINKING FAULT
   001732    777777 000000            1834         ZERO    -1,0            MISSING SEGMENT FAULT
   001733    777777 000000            1835         ZERO    -1,0            MISSING WORKING SPACE FAULT
   001734    777777 000000            1836         ZERO    -1,0            MISSING PAGE FAULT
   001735    777777 000000            1837         ZERO    -1,0            SECURITY 2 FAULT
                                      1838         DETAIL  OFF
                                      1839         DUP     1,32+FLTVEC2-*
   001736    777777 000000            1840         ZERO    -1,0            FILL REST OF TABLE
                                      1841         DETAIL  ON
                                      1842         END
 1 000000    000001000000
   000001    000000000000
   000002    000004000000
   000003    000003000000
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       CP6 FAULT HANDLER - DATA DECLARATIONS                      65   BMAP - B00     

  CONTROL SECTION TABLE

   0 CODE   EIGHT 001750 HFA$FAULT
   1 RODATA EVEN  000004 LITERALS

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       SYMBOL TABLE                                               66   BMAP - B00     
 60000000 000000000000 .PTR_N        *198      *510      *511      *512      *610      *611      *689
                                     *690      *691      *692      *693      *709      *710      *760
                                     *761      *762      *763      *769      *770      *776      *777
                                     *783      *789      *841      *842      *863      *864      *865
                                     *866      *867     *1056     *1057     *1241     *1242     *1254
 01101000 000000000470 ABORTM         739      *768
 41000000 000000000005 ABTACT        *274       846
 41000000 000000000023 ACTION        *282       283       681       686       699       701       712
                                      847       878
 41000000 000000000003 ADP           *321      1029
 41000000 000000000001 AUTOLOC       *306       493       721       730
 03301035 000000000000 B$WSQ0PT$     *110      1186
 01101000 000000000031 BRTAB1         420       422      *425
 01101000 000000000044 BRTAB2         441      *447
 01101000 000000000053 BRTAB3         445      *456
 03301000 000000000000 B_MPT          *75       612       828      1059
 01101000 000000001625 CACHEOFF       618      1401      1426     *1701
 01101000 000000001317 CANT_FIND     1334     *1341
 03601000 000000000000 CDTFSID        *62       403       718       909
 01101000 000000001161 CLRHR          602       915      1017     *1206      1467
 01101000 000000001174 CLRHRS        1208     *1217
 40000000 000000000001 CNCACT        *270
 01101000 000000000515 CNCFLT         735      *793
 41000000 000000000006 CPU           *247       401       441       481       529       572       589
                                      592       593       595       596       597       600       615
                                      619       628       911       919       921      1021      1029
                                     1033      1038      1209      1268      1396      1418      1419
                                     1422      1423      1427      1429      1460      1469
 41000000 000000000006 CPUTYP        *309       476       480      1227      1267
 41000000 000000000003 CSH_ADDR     *1291      1312
 41000000 000000000005 CSH_DATA     *1293      1353
 41000000 000000000004 CSH_INC      *1292      1313
 01101000 000000001627 CSH_NORMAL    1342      1350     *1703
 01101000 000000001626 CSH_TO_REG    1315     *1702
 41000000 000000000020 CUTAGS        *255       589       592
 01101000 000000000455 DELTAG         740      *759
 41000000 000000000006 DGOACT        *275       713       856      1747      1748      1751      1752
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       SYMBOL TABLE                                               67   BMAP - B00     
                                     1753      1755      1758      1759      1761      1763      1765
                                     1766
 01101000 000000000771 DIAG_SNAP      648     *1055
 01101000 000000001072 DO_RELIEF     1106     *1141
 40000000 000000000004 DPS90         *322
 40000000 000000000005 DPS90X        *323
 40000000 000000000001 DPSE          *319
 41000000 000000000002 DS            *241       487       488       489       490       494       506
                                      509       510       511       519       521       524       526
                                      527       528       542       554       556       561       565
                                      575       576       577       583       609       610       611
                                      613       620       621       629       630       632       633
                                      645       681       686       687       689       690       691
                                      692       693       698       699       701       709       710
                                      712       719       722       723       728       729       731
                                      747       752       760       761       762       763       806
                                      807       847       848       861       863       864       865
                                      866       867       871       878      1056      1057      1058
                                     1068      1074      1238      1239      1240      1243      1244
                                     1245      1305      1308      1312      1313      1314      1325
                                     1326      1333      1336      1344      1345      1353      1361
                                     1363      1365
 41000000 000000000042 DSIZE         *300       495       505       509
 41000000 000000000010 DUTAGS        *257       597
 01101000 000000000656 EDPS90         918      *927
 41000000 000000000003 EFLTAGS       *253      1449
 41000000 000000000002 ELS1          *320       593
 01101000 000000001622 ERCODE         553     *1698
 41000000 000000000037 ERROR         *297       298       554
 41000000 000000001003 EXECUT        *329      1760
 01101000 000000000747 EXFLT          460     *1028
 01101000 000000000654 EXIT           916      *925      1018      1020      1024      1234      1237
 41000000 000000000005 FCODE         *308       408       653      1047
 01101000 000000001117 FEPU          1156     *1162
 41000000 000000000035 FINFO         *289       290       610       689       761       863      1056
 00101000 000000001115 FIOP         *1160
 41000000 000000000007 FLT           *248       410       411       414       444       550       557
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       SYMBOL TABLE                                               68   BMAP - B00     
                                      607       609       613       643       645       667       669
                                      674       688       848       850       852       862       897
                                      912      1058      1071
 01101000 000000000040 FLT040         415      *439
 01101000 000000000042 FLT060        *443       451       452       453       964       997
 01101000 000000000060 FLT080         426       432       457       459      *466      1005      1009
                                     1012
 01101000 000000000063 FLT100         427      *473       810       896       914
 01101000 000000000074 FLT110         477      *486
 01101000 000000000150 FLT115         530       532      *537
 01101000 000000000200 FLT116         560      *571
 01101000 000000000225 FLT118         588      *591
 01101000 000000000265 FLT119         579      *599
 01101000 000000000274 FLT120         590       594       598      *601
 01101000 000000000321 FLT140         558       567       574       608      *625
 01101000 000000000326 FLT150         617       627      *631
 01101000 000000000343 FLT200         644      *652      1060
 01101000 000000000353 FLT220         668      *673
 01101000 000000000400 FLT240         682      *697       873      1070      1075
 01101000 000000000404 FLT260         700      *708       879
 01101000 000000000412 FLT270        *711       849       851       857
 01101000 000000000432 FLT280         714       725      *733
 41000000 000000000001 FLTAGS        *252       524      1344      1365      1444      1453
 41000000 000000000036 FLTREG        *296       297       528
 01101000 000000001373 FLTREG20      1416     *1421      1463
 01101000 000000001376 FLTREG30     *1425      1472
 01101000 000000001402 FLTREG40      1429     *1431
 01101000 000000001426 FLTREG50      1420     *1458
 01101000 000000001433 FLTREG60      1408      1424     *1465
 01101000 000000001411 FLTREG90      1391      1436      1437     *1439
 01101000 000000001413 FLTREG_DPSE   1432      1433     *1443
 01101000 000000001416 FLTREG_ELS    1434      1438     *1448
 01101000 000000001650 FLTVEC1        674       688       852       862      1071     *1744      1768
 01101000 000000001710 FLTVEC2        414       444       557     *1815      1839
 00101000 000000001114 FMMU         *1159
 01101000 000000001127 FNDLOG       *1171      1178
 01101000 000000001116 FSCU          1154     *1161
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       SYMBOL TABLE                                               69   BMAP - B00     
 01101000 000000001137 GOTLOG        1173     *1179
 01101000 000000000617 GOTODEL        433       469      *894      1041
 01101000 000000000763 GXD           1030      1032      1037     *1041
 41000000 000000000015 HAVFLP       *1299      1305      1333      1336
 12101000 000000001442 HFA$CLEARCPU    20     *1491
 12101000 000000001255 HFA$CSHERR      22     *1301
 13101000 000000000000 HFA$FAULT       19      *394       424       438       465       485       589
                                      592       595       596       597       600       945       956
                                     1212      1223      1322
 12101000 000000001346 HFA$FLTREG      23     *1388
 12101000 000000000000 HFA$P           24      *395
 13101000 000000001444 HFA$RELIEFCPU   21      1123     *1506
 12101000 000000001542 HFA$SCRCPU      25     *1620
 13101000 000000001544 HFA$STARTCPU    26       906     *1636
 13101000 000000001450 HFA$STOPCPU     28       898      1493      1508     *1539
 12101000 000000001446 HFA$STOPCPUT    27     *1523
 12101000 000000000626 HFA$XDELRTN     29      *902
 03201000 000000000000 HFB$CMD        *31      1750
 03201001 000000000000 HFB$CONNECT    *32      1753
 03201002 000000000000 HFB$CSHERR     *33       611
 03201003 000000000000 HFB$DIAGSNAP   *34      1057
 03201004 000000000000 HFB$HDWR       *35      1754      1756      1762      1764      1769
 03201005 000000000000 HFB$MPF        *36      1765
 03201006 000000000000 HFB$MSF        *37      1763
 03201007 000000000000 HFB$STR        *38      1746
 03201008 000000000000 HFB$VISIBLE    *39      1747      1748      1751      1752      1755      1758
                                     1759      1761      1766
 03201011 000000000000 HFC$BMAP_CLOCK           *42       406
 02201009 000000000000 HFC$DIS        *40
 03201010 000000000000 HFC$RELIEF     *41       789
 41000000 000000000042 HISTREG       *299       300       577
 01101000 000000001630 HRLVLS         589       592       595       596       597       600      1209
                                    *1705
 01101000 000000001624 HROFF         1211     *1700
 01101000 000000001637 HRSIZE         572     *1714
 03301003 000000000000 H_CNNCTMLBX    *78      1566      1578      1646
 03301004 000000000000 H_CPUGATE      *79      1549      1551      1552      1584      1595      1662
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       SYMBOL TABLE                                               70   BMAP - B00     
                                     1686
 03301005 000000000000 H_DPS8000_CI_TABLE       *80      1569      1649
 03301001 000000000000 H_DSMASK       *76      1130      1544
 03301002 000000000000 H_ENMASK       *77      1677
 03301026 000000000000 H_FAIL_NUM    *101      1119      1179
 03301025 000000000000 H_FAIL_PORT   *100      1169      1172      1191
 03301006 000000000000 H_FLTCNT       *81       669       836      1093      1094      1231
 03301007 000000000000 H_FLTREG       *82       531       533
 03301008 000000000000 H_FLTREG_MASK  *83       529
 03301009 000000000000 H_HRMODE       *84       628       919      1021      1038      1423      1469
 03301010 000000000000 H_HRMODE_MASK  *85      1422
 03301011 000000000000 H_LUFREG       *86       619       921      1033      1419      1427      1460
 03301012 000000000000 H_LUFREG_MASK  *87      1418
 03301013 000000000000 H_MIXED_FLT    *88       481
 03301014 000000000000 H_MIXED_TRO    *89      1268
 03301024 000000000000 H_NURSE        *99      1117      1184
 03301023 000000000000 H_RELIEF       *98      1114      1141      1145
 03301015 000000000000 H_RELOAD_CACHE           *90      1459
 03301016 000000000000 H_RELOAD_MODE  *91      1466
 03301022 000000000000 H_RLF_GATE     *97      1099      1105      1111      1113
 03301020 000000000000 H_RPM_FLG      *95       587       641      1036      1109      1567      1647
 03301027 000000000000 H_S1000_CONFIG          *102      1102      1104
 03301019 000000000000 H_S1000_FLG    *94       522       559       578       616       626       917
                                     1019      1031      1097      1207      1390
 03301017 000000000000 H_SAVE_SS      *92      1258
 03301018 000000000000 H_SNAP         *93       396       647
 03301021 000000000000 H_TIME         *96      1557      1682
 03301028 000000000000 H_XDELTA      *103       468
 41000000 000000000004 ICIR          *307       474      1006      1225
 41000000 000000000014 INDSAV       *1298      1325      1326
 03201012 000000000000 IRM$DELTAQ     *43       936
 03201013 000000000000 IRM$RCVR3      *44      1254
 03301029 000000000000 IRM_SCODE     *104       935      1601      1602
 03301030 000000000000 IRM_SNAPSLOT  *105      1247
 03301031 000000000000 IRM_SSF       *106       817
 03601001 000000000000 ISBSID         *63       467       646      1246      1394      1558      1638
 41000000 000000000010 ISR           *312       430       837      1003
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       SYMBOL TABLE                                               71   BMAP - B00     
 03301032 000000000000 IT_CP6UP      *107      1095
 03301034 000000000000 IT_SCPUWSPTD  *109      1185
 03301033 000000000000 IT_XDELTA     *108       895
 03201014 000000000000 JSE$ABORTM     *45       770
 03201015 000000000000 JSN$FIXSS      *46       841
 40000000 000000000000 L66           *318
 01101000 000000001273 LOOP1        *1318      1339
 01101000 000000001300 LOOP2        *1323      1331
 41000000 000000000155 LS.AARDV      *229
 41000000 000000000156 LS.AARDV2     *229
 41000000 000000000033 LS.ASLLS      *229
 41000000 000000000053 LS.ASR        *229
 41000000 000000000002 LS.BUF        *229
 41000000 000000000161 LS.BUFCACH    *229
 40000000 000000000004 LS.CFU        *229
 41000000 000000000164 LS.CGCTXT     *229
 41000000 000000000163 LS.CGPT       *229
 41000000 000000000075 LS.CPGT1      *229
 41000000 000000000034 LS.CPLS       *229
 41000000 000000000055 LS.CWSQ1      *229
 41000000 000000000032 LS.DBLS       *229
 41000000 000000000004 LS.DS1        *229
 41000000 000000000005 LS.DS2        *229
 41000000 000000000006 LS.DS3        *229
 41000000 000000000007 LS.DS4        *229
 41000000 000000000010 LS.DS5        *229
 41000000 000000000011 LS.DS6        *229
 41000000 000000000012 LS.DS7        *229
 41000000 000000000013 LS.DS8        *229
 40000000 000000000202 LS.DVT        *229
 41000000 000000000016 LS.ECCB       *229
 41000000 000000000157 LS.FIRM       *229
 40000000 000000000155 LS.FLT        *229
 41000000 000000000045 LS.HJITU      *229
 41000000 000000000162 LS.IMX        *229
 41000000 000000000122 LS.IOEND      *229
 41000000 000000000176 LS.IPHY_MAP   *229
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       SYMBOL TABLE                                               72   BMAP - B00     
 41000000 000000000000 LS.IS         *229
 41000000 000000000050 LS.ISB        *229
 41000000 000000000115 LS.JITPG      *229
 41000000 000000000001 LS.JITU       *229
 40000000 000000000013 LS.LDCT       *229
 41000000 000000000134 LS.LDCTNC     *229
 41000000 000000000121 LS.LOWMEM     *229
 41000000 000000000167 LS.MAGAS      *229
 41000000 000000000172 LS.MAGECCB    *229
 41000000 000000000166 LS.MAGLS      *229
 41000000 000000000170 LS.MAGPS      *229
 41000000 000000000165 LS.MAGSS      *229
 41000000 000000000171 LS.MAGTCB     *229
 41000000 000000000043 LS.MHJIT      *229
 41000000 000000000177 LS.MINIQ_ENT  *229
 41000000 000000000054 LS.MISC       *229      1307      1310      1346      1358      1364
 41000000 000000000130 LS.MISC2      *229
 41000000 000000000042 LS.MJIT       *229
 41000000 000000000035 LS.MLS        *229
 41000000 000000000132 LS.MLS1       *229
 41000000 000000000173 LS.MLSREAD    *229
 40000000 000000000156 LS.MONRL      *229
 41000000 000000000044 LS.MONSSS     *229
 41000000 000000000120 LS.MOUSE      *229
 41000000 000000000037 LS.MPT        *229
 41000000 000000000145 LS.MSTRHJ     *229
 41000000 000000000135 LS.MSTRPT     *229
 41000000 000000000041 LS.MTSTACK    *229
 41000000 000000000014 LS.NULL       *229
 41000000 000000000027 LS.PMME       *229
 41000000 000000000116 LS.PPUT       *229
 41000000 000000000131 LS.RCVENT     *229
 41000000 000000000127 LS.RCVRTN     *229
 41000000 000000000021 LS.REAL       *229
 41000000 000000000030 LS.REG        *229
 41000000 000000000124 LS.RONC       *229
 41000000 000000000003 LS.ROSEG      *229
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       SYMBOL TABLE                                               73   BMAP - B00     
 41000000 000000000125 LS.ROSEG8     *229
 41000000 000000000046 LS.SBUF1      *229
 41000000 000000000047 LS.SBUF2      *229
 41000000 000000000025 LS.SCR        *229
 41000000 000000000051 LS.SCU        *229
 41000000 000000000174 LS.SEGTBL     *229
 41000000 000000000146 LS.SLV1HJ     *229
 41000000 000000000136 LS.SLV1PT     *229
 41000000 000000000147 LS.SLV2HJ     *229
 41000000 000000000137 LS.SLV2PT     *229
 41000000 000000000150 LS.SLV3HJ     *229
 41000000 000000000140 LS.SLV3PT     *229
 41000000 000000000151 LS.SLV4HJ     *229
 41000000 000000000141 LS.SLV4PT     *229
 41000000 000000000152 LS.SLV5HJ     *229
 41000000 000000000142 LS.SLV5PT     *229
 41000000 000000000153 LS.SLV6HJ     *229
 41000000 000000000143 LS.SLV6PT     *229
 41000000 000000000154 LS.SLV7HJ     *229
 41000000 000000000144 LS.SLV7PT     *229
 41000000 000000000017 LS.TCB        *229
 41000000 000000000123 LS.TIGR       *229
 41000000 000000000020 LS.TSTACK     *229
 41000000 000000000031 LS.ULS        *229
 41000000 000000000036 LS.UPT        *229
 41000000 000000000023 LS.USDS0      *229
 41000000 000000000024 LS.USDS1      *229
 41000000 000000000040 LS.USRIS      *229
 41000000 000000000022 LS.USSS       *229
 41000000 000000000117 LS.VPT        *229
 41000000 000000000052 LS.WINDOW     *229
 41000000 000000000133 LS.WS3MLS     *229
 41000000 000000000160 LS.WS3MLSNW   *229
 41000000 000000000175 LS.WSQ0PT     *229
 41000000 000000000026 LS.XD         *229
 41000000 000000000126 LS.XDRTN      *229
 41000000 000000000201 LS.XLALT      *229
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       SYMBOL TABLE                                               74   BMAP - B00     
 41000000 000000000015 LS.XLAT       *229
 41000000 000000000200 LS.XLNORM     *229
 41000000 000000000014 LSR           *313      1232
 03601002 000000000000 LSSID          *64      1306
 01101000 000000000725 LUFLT          458     *1002
 41000000 000000000002 LUTAGL        *264       618       621       923      1035      1315      1342
                                     1350      1401      1426      1445      1455      1462
 41000000 000000000006 MAGIC.ND      *226       282
 41000000 000000000007 MAGICS        *281       282       510       692       709       866
 41000000 000000000004 MDTAGL        *265       630       924      1023      1040      1211      1471
 41000000 000000000006 MDTAGS        *254       561      1409
 41000000 000000000006 MEM_ADDR     *1294      1314
 41000000 000000000007 MEM_DATA     *1295      1361
 41000000 000000000012 MISCSAVE     *1297      1308      1345      1363
 03601003 000000000000 MISCSID        *65      1311      1359
 03201016 000000000000 MMV$PAGE       *47       777
 41000000 000000000030 MODE          *286       287       561       565
 01101000 000000000764 MONTSTK_FULL   497     *1045
 01101000 000000000477 MPF            738      *775
 41000000 000000000002 MPT.AS        *226
 41000000 000000000010 MPT.ASDESC    *226
 41000000 000000000005 MPT.ECCB      *226
 40000000 000000000013 MPT.ECCBDESC  *226
 41000000 000000000001 MPT.LS        *226
 41000000 000000000007 MPT.LSDESC    *226
 41000000 000000000003 MPT.PS        *226
 41000000 000000000011 MPT.PSDESC    *226
 41000000 000000000000 MPT.SS        *226       612      1059
 41000000 000000000006 MPT.SSDESC    *226       828
 41000000 000000000004 MPT.TCB       *226
 41000000 000000000012 MPT.TCBDESC   *226
 03601004 000000000000 MTSTACKSID     *66       487      1238
 03301036 000000000000 NI$DS         *111      1127      1132      1546      1674
 01101000 000000001505 NON_RPM_CIOC  1568     *1572
 01101000 000000001612 NOTNOW        1672      1675     *1679
 01101000 000000001002 NO_HFB         677       855     *1066
 01101000 000000001562 NO_RPM        1648     *1652
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       SYMBOL TABLE                                               75   BMAP - B00     
 01101000 000000001523 NXTCPU        1562      1565      1577      1579     *1586
 01101000 000000001576 NXTCPU2       1642      1645      1657     *1664
 01101000 000000000515 OCLIMB        *795      1100      1103      1108      1112
 01101000 000000000662 OPRCVR         905      *932
 41000000 000000000040 OUTAGS        *256       595
 01101000 000000001325 PAR_ERR       1328     *1349
 41000000 000000000017 PDWTAGS       *260       972
 40000000 000000000004 PGEFLT        *273
 41000000 000000000034 PMMELOC       *333      1008      1011
 41000000 000000000005 PNO           *246       400       401       478       531       533       538
                                      540       614       615       910       911      1265      1395
                                     1396
 41000000 000000000003 PTR_LIST      *280       281       509       510       511       610       611
                                      689       690       691       692       693       709       710
                                      760       761       762       763       863       864       865
                                      866       867      1056      1057
 01101000 000000000706 PTWAM_ELS1     450       454      *969
 01101000 000000000666 PTWAM_L66      448       449      *941
 41000000 000000000016 PTWTAGS       *259       987
 03601005 000000000000 RCVENTSID      *67      1602
 03601006 000000000000 REALSID        *68      1007
 01101000 000000000512 RELIEF         736      *788
 40000000 000000000002 RLIEF         *271
 40000000 000000000006 RPM           *324
 41000000 000000000034 RVA           *288       289       521       719
 41000000 000000000025 SCODE         *284       285       556       691       747       752       760
                                      865      1074
 41000000 000000000007 SCRACT        *276       872      1069      1746      1750      1754      1756
                                     1757      1760      1762      1764      1769
 03601007 000000000000 SCRCHENTSID    *69       754       820      1585      1663
 01101000 000000000442 SCRECH         741      *745      1107      1115
 03601008 000000000000 SCUSID         *70       404      1129      1543      1676
 03301037 000000000000 SC_HFA6       *112       751
 03301038 000000000000 SC_HFA7       *113       746
 03301039 000000000000 SC_HFSSF      *114       815
 03301040 000000000000 SC_HFTSF      *115      1046
 03301041 000000000000 SC_QXDELTA    *116       933
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       SYMBOL TABLE                                               76   BMAP - B00     
 03301042 000000000000 SC_SLAVE      *117      1585      1663
 41000000 000000000001 SDFOFF        1093      1094     *1772
 01101000 000000000506 SEXIT          737      *782      1248      1250      1253      1255
 01101000 000000001013 SHFLT          827       831     *1092
 01101000 000000001033 SHFLT1        1098     *1109
 01101000 000000001066 SHFLT2        1096      1110     *1136
 01101000 000000001623 SRCODE        1073     *1699
 41000000 000000000006 SS            *242       402       403       405       407       408       419
                                      430       440       474       476       480       492       493
                                      496       498       573       612       653       717       718
                                      721       730       803       837       897       908       909
                                      912       920       922       923       924      1003      1006
                                     1022      1023      1034      1035      1039      1040      1047
                                     1059      1136      1225      1227      1232      1261      1267
 03201017 000000000000 SSC$MONTIMRWU  *48      1242
 03201018 000000000000 SSC$SASYNC     *49      1241
 03201019 000000000000 SSC$SERV       *50       769       776
 01101000 000000000527 SSF10         *814       889
 01101000 000000000530 SSF15         *816      1049
 01101000 000000000532 SSF20         *819      1050
 01101000 000000000535 SSF30          655      *825
 01101000 000000000543 SSF40          657      *835
 01101000 000000000616 SSF50          840      *883
 01101000 000000000517 SSFLT          413      *802
 41000000 000000000000 SSFOFF         836     *1771
 41000000 000000000032 SSR           *287       288       519
 03601009 000000000000 SSRSID         *71       402       717       908
 03201020 000000000000 SSS$SEXIT      *51       783
 03201021 000000000000 SSS$TIME       *52      1554      1680
 03201022 000000000000 SSU$DELTAGO    *53       763
 01101000 000000001602 STAEXIT       1591     *1670
 01101000 000000001547 STARTCPU     *1640      1667
 41000000 000000001000 STARTU        *328      1757
 01101000 000000001472 STOPCPU      *1560      1589
 01101000 000000001457 STPGTE        1542     *1548      1599
 41000000 000000000035 SUBCODE       *290       296       542       583
 41000000 000000000003 SXTACT        *272       724       877      1745      1749
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       SYMBOL TABLE                                               77   BMAP - B00     
 03301043 000000000000 S_CUN         *118      1251
 03301061 000000000000 S_DPR2        *136       490       491
 03301044 000000000000 S_INCTIME     *119      1556
 03301045 000000000000 S_ITIME       *120      1684      1685
 03301046 000000000000 S_MONSSR      *121       818
 03301047 000000000000 S_MPSTATE     *122      1121      1564      1576      1582      1583      1644
                                     1656      1660      1661
 03301048 000000000000 S_NSCPU       *123      1174      1588      1666
 03301049 000000000000 S_OPTION_REG  *124       546
 03301050 000000000000 S_PDBR        *125       545
 03301051 000000000000 S_PNO         *126       400       614       910      1118      1125      1183
                                     1249      1395      1541      1561      1598      1641      1671
 03301052 000000000000 S_PORTNR      *127       540      1171      1573      1653
 03301053 000000000000 S_PTWAM       *128       942       982       992
 03301054 000000000000 S_PTYPE       *129       401       538       615       911      1396
 03301055 000000000000 S_RETRY       *130       634       636
 03301059 000000000000 S_RLF_SSR     *134      1122      1182
 03301062 000000000000 S_RVA         *137       499       520       720
 03301056 000000000000 S_SSPTYPE     *131       478      1265
 03301063 000000000000 S_STOP        *138      1181
 03301064 000000000000 S_TIMR        *139      1235
 03301057 000000000000 S_TRO_SS      *132      1262
 03301058 000000000000 S_WSR         *133       543       544
 03301060 000000000000 S_XX          *135      1189      1190
 41000000 000000000024 TACTON        *283       284       687       690       698       861       864
                                      871      1068
 41000000 000000000026 TEMP1         *285       286       524       526       527       609       613
                                      620       621       629       630       633       645       762
                                      806       807       848      1058      1133      1134
 41000000 000000000010 TEMPDW       *1296      1344      1365
 41000000 000000000000 TP            *240       404       467       468       510       577       589
                                      592       595       596       597       600       610       646
                                      647       689       690       691       692       709       760
                                      761       762       828       829       863       864       865
                                      866      1007      1008      1011      1056      1186      1187
                                     1246      1247      1311      1324      1353      1354      1359
                                     1360      1361      1362      1543      1545      1558      1564
 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       SYMBOL TABLE                                               78   BMAP - B00     
                                     1576      1578      1638      1644      1656      1676      1678
 01101000 000000001204 TRO10        *1230      1269
 01101000 000000001243 TRO40         1228     *1257
 01101000 000000001250 TRO50         1259     *1264
 01101000 000000001200 TROFLT         428     *1224
 03601010 000000000000 TSTACKSID      *72       728      1243
 41000000 000000000076 TSTAMP        *314       407      1136
 01101000 000000001646 TYPE2         1309      1355     *1724
 03201023 000000000000 UDN$MAGIC      *54       512       842
 03201024 000000000000 UDN$MGRES      *55       710
 03201025 000000000000 UDN$MGSAVE     *56       511
 41000000 000000000001 UNUSE0        *304       405       419       440       492       496       573
                                      803       897       912       920       924      1022      1023
                                     1039      1040
 41000000 000000000007 UNUSE1        *305       498       922       923      1034      1035
 41000000 000000000000 VUTAGS        *258       596
 01101000 000000001531 WAIT          1550     *1594
 41000000 000000000040 WORDS         *298       299       576       632
 03201026 000000000000 X66_AALT       *57      1366
 03201027 000000000000 X66_ARET       *58      1347
 03201028 000000000000 X66_AUTO_0     *59       504
 03201029 000000000000 X66_AUTO_5     *60      1303
 03601011 000000000000 XDLTENTSID     *73       900
 41000000 000000000003 ZHTAGL        *266      1213
 61000000 000000001275 _1            *424      *438      *465      *485      *589      *592      *595
                                     *596      *597      *600      *945      *956     *1212     *1223
                                    *1322
 61000000 000000000007 _2            *424      *438      *465      *485      *589      *592      *595
                                     *596      *597      *600      *945      *956     *1212     *1223
                                    *1322

     407 SYMBOLS

 22:22 07/29/97  FILE=HFA$FAULT.:E05TSI       MACRO TABLE                                                79   BMAP - B00     
 ALIGN          424       438       465       485       589       592       595       596       597
                600       945       956      1212      1223      1322
 ARG6           510       610       689       690       691       692       709       760       761
                762       863       864       865       866      1056
 CALL6          511       512       611       693       710       763       769       770       776
                777       783       789       841       842       867      1057      1241      1242
               1254
 COPY90         600
 COPYHR         589       592       595       596       597
 MAGIC          226
 MONLS          229

      21 MACROS

    SYMBOL SPACE USED  6149 WORDS
     MACRO SPACE USED  3682 WORDS
   INPUT RECORDS READ  4139
 STATEMENTS PROCESSED  2997
         ELAPSED TIME  1:00.44
             CPU TIME    16.56 SEC.
        ASSEMBLY RATE 10859 STATEMENTS/CPU MIN.

      NO ERRORS

