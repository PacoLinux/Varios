VERSION E05

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:1    
        1        1        /*M*     IGT$TDFILE - BUILD $:CONFIG FILE FOR T&D USE      */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*/
        8        8        IGT$TDFILE: PROC;
        9        9        /**/
       10       10        %INCLUDE KI_MACROS_C;
       11      618        %INCLUDE NI_DATA_R;
       12     1055        %INCLUDE NI_DATA_C;
       13     1168        %INCLUDE B_SEGIDS_C;
       14     1707        %INCLUDE M_INFO_C;
       15     1847        %INCLUDE B$JIT;
       16     2137        %INCLUDE TD$STRUCT;
       17     2238        %INCLUDE CP_6;
       18     2319        %INCLUDE CP_6_SUBS;
       19     2859        %INCLUDE B_ERRORS_C;
       20     3986        %INCLUDE B$MAP;
       21     4085        %INCLUDE FR$RAT;
       22     4138        %INCLUDE N_FC_C;
       23     4175        %INCLUDE IT_SUBS_C;
       24     4442        %SUB YES = '1'B;
       25     4443        %SUB NO = '0'B;
       26     4444        %EQU TRUE = '1'B;
       27     4445        %EQU FALSE = '0'B;
       28     4446        /**/
       29     4447        /*  Based data  */
       30     4448        /**/
       31     4449    1   DCL B$TABLE(0:0) UBIN WORD BASED ALIGNED;
       32     4450    1   DCL B$PTR(0:0) PTR BASED ALIGNED;
       33     4451    1   DCL B$UBIN9(0:0) UBIN(9) BASED UNAL;
       34     4452        /**/
       35     4453        %KI$FEI;
       36     4537        %NI$DCT (STCLASS="BASED(DCT$)");
       37     4585        %NI$SQH (STCLASS="BASED(SQH$)");
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:2    
       38     4598        %NI$DVT (STCLASS="BASED(DVT$)");
       39     4605        %NI$DQH (STCLASS="BASED(DQH$)");
       40     4628        %FR$RAT (STCLASS="BASED(RAT$)");
       41     4668        %NI$CHT (STCLASS="(0:0) BASED(CHT$)");
       42     4671        %NI$IOM;
       43     4676        /**/
       44     4677        %TD$HEAD;
       45     4713        %TD$IOM;
       46     4721        %TD$MPC;
       47     4743        %TD$DEV;
       48     4762        %TD$WSN;
       49     4766        /**/
       50     4767        /**/
       51     4768        /*  Fpts  */
       52     4769        /**/
       53     4770        %FPT_OPEN     (FPTN=OPEN_FPT,
       54     4771                       DCB = M$CONFG,
       55     4772                       NAME = FILENAME,
       56     4773                       ASN = FILE,
       57     4774                       ACS = DIRECT,
       58     4775                       DISP = NAMED,
       59     4776                       SCRUB = YES,
       60     4777                       ORG = KEYED,
       61     4778                       ACCESS = RDONLY,
       62     4779                       ACSVEH = VEHICLE,
       63     4780                       FUN = CREATE,
       64     4781                       EXIST = NEWFILE);
       65     4890        /**/
       66     4891        %FPT_CLOSE (FPTN = CLOSE_FPT,
       67     4892                    DCB = M$CONFG,
       68     4893                    DISP = SAVE);
       69     4935        %FPT_WRITE    (FPTN = WRITE_FPT,
       70     4936                       DCB = M$CONFG);
       71     4967        /**/
       72     4968        %FPT_ERRMSG (FPTN = ERRMSG_FPT,
       73     4969                     CODE = ERRCODE,
       74     4970                     BUF ="ERRBUF.TEXT",
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:3    
       75     4971                     DCB = M$CONFG,
       76     4972                     FIELD1 = SUBBUF_1,
       77     4973                     FIELD2 = SUBBUF_2,
       78     4974                     SUBMESS = YES,
       79     4975                     FLAGLEV = 3);
       80     5002        /**/
       81     5003        %FPT_TEMPWROC (FPTN = WROC_FPT,
       82     5004                       BUFW = ERRBUF);
       83     5020        /**/
       84     5021        %FPT_SYSCON   (FPTN = SYSCON_FPT,
       85     5022                       RESULT = RESULTS);
       86     5039        /**/
       87     5040        %VLR_SYSCON   (FPTN = RESULTS);
       88     5059        /**/
       89     5060        %FPT_IOQ (FPTN=FPT_IOQ,
       90     5061                  DCB=M$MPC,
       91     5062                  BUF=BUF,
       92     5063                  FC=%N_RDBIN);
       93     5081        /**/
       94     5082    1   DCL M$CONFG  DCB;
       95     5083    1   DCL M$MPC DCB;
       96     5084        /**/
       97     5085        /**/
       98     5086        /*  Symrefs  */
       99     5087        /**/
      100     5088    1   DCL KI_FEI$$ PTR SYMREF;
      101     5089    1   DCL KI_MXFE UBIN WORD SYMREF;
      102     5090    1   DCL NK_MXLOCAL UBIN WORD SYMREF;
      103     5091    1   DCL 1 IT_WSN SYMREF,
      104     5092    1         2 NAME(0:3) CHAR(8) UNAL;
      105     5093        /**/
      106     5094        /*  Static data   */
      107     5095        /**/
      108     5096        %VLP_NAME     (FPTN = FILENAME,
      109     5097                       LEN = 7,
      110     5098                       NAME = ':CONFIG');
      111     5125        /**/
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:4    
      112     5126        %VLP_ATTR (FPTN = RDONLY);
      113     5140        %VLP_ACCESS (READ=YES,EXEC=YES,ACCT='ALL',LAST=";");
      114     5157        /**/
      115     5158        %VLP_ATTR (FPTN = VEHICLE);
      116     5172        %VLP_ACSVEH (READ=YES,UPD=YES,VEHICLE='SYSCON',LAST=";");
      117     5189        /**/
      118     5190    1   DCL B$JIT$ PTR SYMREF;
      119     5191    1   DCL IG$DCT$$ PTR STATIC INIT(ADDR(NIL));
      120     5192    1   DCL 1 IG$DCT$PTR REDEF IG$DCT$$,
      121     5193    1         2 OFFSET UBIN(18) UNAL,
      122     5194    1         2 * BIT(6) UNAL,
      123     5195    1         2 SEGID BIT(12) UNAL;
      124     5196    1   DCL IG_FEI$$ PTR STATIC INIT(ADDR(NIL));
      125     5197    1   DCL 1 IG_FEI$PTR REDEF IG_FEI$$,
      126     5198    1         2 OFFSET UBIN(18) UNAL,
      127     5199    1         2 * BIT(6) UNAL,
      128     5200    1         2 SEGID BIT(12) UNAL;
      129     5201    1   DCL IG$DVT$ PTR STATIC INIT(ADDR(NIL));
      130     5202    1   DCL 1 IG$DVTPTR REDEF IG$DVT$,
      131     5203    1         2 OFFSET UBIN(18) UNAL,
      132     5204    1         2 * BIT(6) UNAL,
      133     5205    1         2 SEGID BIT(12) UNAL;
      134     5206    1   DCL DCT$ PTR STATIC INIT(ADDR(NIL));
      135     5207    1   DCL 1 DCTPTR REDEF DCT$,
      136     5208    1         2 OFFSET UBIN(18) UNAL,
      137     5209    1         2 * BIT(6) UNAL,
      138     5210    1         2 SEGID BIT(12) UNAL;
      139     5211    1   DCL DVT$ PTR STATIC INIT(ADDR(NIL));
      140     5212    1   DCL 1 DVTPTR REDEF DVT$,
      141     5213    1         2 OFFSET UBIN(18) UNAL,
      142     5214    1         2 * BIT(6) UNAL,
      143     5215    1         2 SEGID BIT(12) UNAL;
      144     5216    1   DCL RAT$ PTR STATIC INIT(ADDR(NIL));
      145     5217    1   DCL 1 RATPTR REDEF RAT$,
      146     5218    1         2 OFFSET UBIN(18) UNAL,
      147     5219    1         2 * BIT(6) UNAL,
      148     5220    1         2 SEGID BIT(12) UNAL;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:5    
      149     5221    1   DCL SQH$ PTR STATIC INIT(ADDR(NIL));
      150     5222    1   DCL 1 SQHPTR REDEF SQH$,
      151     5223    1         2 OFFSET UBIN(18) UNAL,
      152     5224    1         2 * BIT(6) UNAL,
      153     5225    1         2 SEGID BIT(12) UNAL;
      154     5226    1   DCL DQH$ PTR STATIC INIT(ADDR(NIL));
      155     5227    1   DCL 1 DQHPTR REDEF DQH$,
      156     5228    1         2 OFFSET UBIN(18) UNAL,
      157     5229    1         2 * BIT(6) UNAL,
      158     5230    1         2 SEGID BIT(12) UNAL;
      159     5231    1   DCL TEMP$ PTR STATIC INIT(ADDR(NIL));
      160     5232    1   DCL 1 TEMPPTR REDEF TEMP$,
      161     5233    1         2 OFFSET UBIN(18) UNAL,
      162     5234    1         2 * BIT(6) UNAL,
      163     5235    1         2 SEGID BIT(12) UNAL;
      164     5236    1   DCL CHT$ PTR STATIC INIT(ADDR(NIL));
      165     5237    1   DCL 1 CHTPTR REDEF CHT$,
      166     5238    1         2 OFFSET UBIN(18) UNAL,
      167     5239    1         2 * BIT(6) UNAL,
      168     5240    1         2 SEGID BIT(12) UNAL;
      169     5241        /**/
      170     5242    1   DCL ERRCODE BIT(36) STATIC SYMDEF INIT ('0'B);
      171     5243    1   DCL 1 ERRBUF STATIC SYMDEF,
      172     5244    1         2 CRLF BIT(36) INIT('015015015012'O),
      173     5245    1         2 TEXT CHAR(120) INIT(' ');
      174     5246        /**/
      175     5247    1   DCL 1 SUBBUF_1 STATIC,
      176     5248    1         2 COUNT UBIN(9) UNAL,
      177     5249    1         2 TEXT CHAR(11) UNAL;
      178     5250    1   DCL 1 SUBBUF_2 STATIC,
      179     5251    1         2 COUNT UBIN(9) UNAL,
      180     5252    1         2 TEXT CHAR(11) UNAL;
      181     5253        /**/
      182     5254    1   DCL 1 DEVERR_ERRCODE STATIC,
      183     5255    1         2 FCG BIT(18) UNAL INIT('110724'O),
      184     5256    1         2 ERR# UBIN(15) UNAL INIT(101),
      185     5257    1         2 SEV UBIN(3) UNAL INIT(0);
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:6    
      186     5258    1   DCL 1 CHANERR_ERRCODE STATIC,
      187     5259    1         2 FCG BIT(18) UNAL INIT('110724'O),
      188     5260    1         2 ERR# UBIN(15) UNAL INIT(102),
      189     5261    1         2 SEV UBIN(3) UNAL INIT(0);
      190     5262    1   DCL 1 MPCERR_ERRCODE STATIC,
      191     5263    1         2 FCG BIT(18) UNAL INIT('110724'O),
      192     5264    1         2 ERR# UBIN(15) UNAL INIT(103),
      193     5265    1         2 SEV UBIN(3) UNAL INIT(0);
      194     5266    1   DCL 1 OPENERR_ERRCODE STATIC,
      195     5267    1         2 FCG BIT(18) UNAL INIT('110724'O),
      196     5268    1         2 ERR# UBIN(15) UNAL INIT(104),
      197     5269    1         2 SEV UBIN(3) UNAL INIT(0);
      198     5270    1   DCL CURDCTX UBIN WORD STATIC;
      199     5271    1   DCL DONE_SCS BIT(1);
      200     5272    1   DCL ALL_DONE BIT(1);
      201     5273    1   DCL MPCINDX UBIN WORD;
      202     5274    1   DCL TEMPINDX UBIN WORD;
      203     5275    1   DCL DEVNAME(0:32) CHAR(8);
      204     5276    1   DCL INDX UBIN WORD;
      205     5277    1   DCL DCTX UBIN WORD STATIC;
      206     5278    1   DCL MAXDCTX UBIN WORD STATIC;
      207     5279    1   DCL I SBIN WORD STATIC;
      208     5280    1   DCL J SBIN WORD STATIC;
      209     5281    1   DCL K SBIN WORD STATIC;
      210     5282    1   DCL IOM# CHAR(1);
      211     5283    1   DCL IOM_NAME CHAR(4);
      212     5284    1   DCL NUMMPCS UBIN WORD STATIC INIT(0);
      213     5285    1   DCL NUMDEVS UBIN WORD STATIC INIT(0);
      214     5286    1   DCL LEN UBIN WORD;
      215     5287    1   DCL FEPNAME CHAR(6);
      216     5288    1   DCL FEPNUM CHAR(3);
      217     5289    1   DCL MAX_FEP UBIN WORD STATIC INIT(0);
      218     5290        /**/
      219     5291    1   DCL BUF BIT(36) STATIC INIT('0'B);
      220     5292    1   DCL LETBUF CHAR(26) CONSTANT INIT('ABCDEFGHIJKLMNOPQRSTUVWXYZ');
      221     5293    1   DCL HEXBUF CHAR(16) CONSTANT INIT('0123456789ABCDEF');
      222     5294    1   DCL FWREV_ADDR UBIN WORD;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:7    
      223     5295    1   DCL 1 MTBUF BASED ALIGNED,
      224     5296    1         2 * BIT(24) UNAL,
      225     5297    1         2 LETTER BIT(8) UNAL,
      226     5298    1         2 REV BIT(4) UNAL;
      227     5299    1   DCL 1 DPBUF BASED ALIGNED,
      228     5300    1         2 * BIT(28) UNAL,
      229     5301    1         2 REV BIT(4) UNAL,
      230     5302    1         2 LETTER BIT(4) UNAL;
      231     5303        /**/
      232     5304        /* These SUBs define the addresses in MPC memory where the FW revs live */
      233     5305        %SUB DP_FWREV_ADDR = '002371'O;
      234     5306        %SUB M610_FWREV_ADDR = '000532'O;
      235     5307        %SUB M601_FWREV_ADDR = '001032'O;
      236     5308        %SUB M500_FWREV_ADDR = '000352'O;
      237     5309        /**/
      238     5310    1   DCL OPC$ PTR STATIC INIT( ADDR(NIL) );
      239     5311    1   DCL 1 OPCPTR REDEF OPC$,
      240     5312    1       2 OFFSET UBIN(18) UNAL,
      241     5313    1       2 * BIT(6) UNAL,
      242     5314    1       2 SEGID BIT(12) UNAL;
      243     5315    1   DCL OPCLIST$(0:15) PTR STATIC INIT( ADDR(NIL) );
      244     5316    1   DCL OPC_FOUND BIT(1) STATIC INIT('0'B);
      245     5317    1   DCL OPCNAME CHAR(8);
      246     5318    1   DCL OPCNUM CHAR(2);
      247     5319    1   DCL FP_OPCI$$ PTR SYMREF;
      248     5320    1   DCL FP_MXOPC UBIN SYMREF;
      249     5321        %INCLUDE FP_MACRO_C;
      250     5593        %FP$OPCI (STCLASS=BASED);
      251     5603    1   DCL KI$FEI$(0:0) PTR BASED(KI_FEI$$);
      252     5604        /**/
      253     5605    1   DCL DEV$ PTR STATIC INIT(ADDR(DEVREC));
      254     5606    1   DCL HEAD$ PTR STATIC INIT(ADDR(HEADREC));
      255     5607    1   DCL IOM$(0:3) PTR STATIC INIT(ADDR(IOMREC1),
      256     5608    1                                     ADDR(IOMREC2),
      257     5609    1                                     ADDR(IOMREC3),
      258     5610    1                                     ADDR(IOMREC4));
      259     5611    1   DCL 1 HEADKEY STATIC,
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:8    
      260     5612    1         2 COUNT UBIN(9) UNAL INIT(1),
      261     5613    1         2 KEY UBIN(9) UNAL INIT(0);
      262     5614    1   DCL 1 WSNKEY STATIC,
      263     5615    1         2 COUNT UBIN(9) UNAL INIT(3),
      264     5616    1         2 TEXT CHAR(3) UNAL INIT('WSN');
      265     5617    1   DCL 1 IOMKEY(0:3) STATIC,
      266     5618    1         2 COUNT UBIN(9) UNAL INIT(4*0),
      267     5619    1         2 TEXT CHAR(4) UNAL INIT('IOM0','IOM1','IOM2','IOM3');
      268     5620    1   DCL 1 DEVKEY STATIC,
      269     5621    1         2 COUNT UBIN(9) UNAL INIT(8),
      270     5622    1         2 TEXT CHAR(8) UNAL;
      271     5623        /**/
      272     5624        %TD$IOM (NAME=IOMREC1,STCLASS=STATIC);
      273     5632        %TD$IOM (NAME=IOMREC2,STCLASS=STATIC);
      274     5640        %TD$IOM (NAME=IOMREC3,STCLASS=STATIC);
      275     5648        %TD$IOM (NAME=IOMREC4,STCLASS=STATIC);
      276     5656        /**/
      277     5657    1   DCL UCLIST(0:15) CHAR(8) UNAL INIT(' '*0) STATIC;
      278     5658    1   DCL DCLIST(0:15) CHAR(8) UNAL INIT(' '*0) STATIC;
      279     5659    1   DCL TCLIST(0:15) CHAR(8) UNAL INIT(' '*0) STATIC;
      280     5660    1   DCL LPLIST(0:63) CHAR(8) UNAL INIT(' '*0) STATIC;
      281     5661    1   DCL CRLIST(0:15) CHAR(8) UNAL INIT(' '*0) STATIC;
      282     5662    1   DCL CPLIST(0:15) CHAR(8) UNAL INIT(' '*0) STATIC;
      283     5663    1   DCL DPLIST(0:511) CHAR(8) UNAL INIT(' '*0) STATIC;
      284     5664    1   DCL MTLIST(0:63) CHAR(8) UNAL INIT(' '*0) STATIC;
      285     5665    1   DCL XXLIST(0:31) CHAR(8) UNAL INIT(' '*0) STATIC;
      286     5666    1   DCL SCLIST(0:15) CHAR(8) UNAL INIT(' '*0) STATIC;
      287     5667    1   DCL ACLIST(0:15) CHAR(8) UNAL INIT(' '*0) STATIC;
      288     5668    1   DCL APLIST(0:15) CHAR(8) UNAL INIT(' '*0) STATIC;
      289     5669    1   DCL OCLIST(0:15) CHAR(8) UNAL INIT(' '*0) STATIC;
      290     5670    1   DCL ODLIST(0:63) CHAR(8) UNAL INIT(' '*0) STATIC;
      291     5671        /**/
      292     5672        %TD$HEAD (NAME=HEADREC,STCLASS=STATIC,NUMDEV#=200);
      293     5708        %TD$DEV (NAME=DEVREC,STCLASS=STATIC);
      294     5727        %TD$MPC (NAME=MPCREC,STCLASS=STATIC,NUMDEV#=32);
      295     5749        /**/
      296     5750        %TD$WSN (NAME=WSNREC,STCLASS=STATIC);
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:9    
      297     5754        %EJECT;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:10   
      298     5755        /**/
      299     5756    1           IOMREC1 = NO;
      300     5757    1           IOMREC2 = NO;
      301     5758    1           IOMREC3 = NO;
      302     5759    1           IOMREC4 = NO;
      303     5760    1           DEVREC = NO;
      304     5761    1           HEADREC = NO;
      305     5762    1           WSNREC = NO;
      306     5763        /**/
      307     5764    1           CALL M$OPEN (OPEN_FPT) ALTRET (IGT_ERR);
      308     5765        /**/
      309     5766    1           TEMP$ = ADDR(NI_IOMS);
      310     5767    1           TEMPPTR.SEGID = %SPCL1SID;
      311     5768        /**/
      312     5769    1           HEAD$ -> TD$HEAD.NUMIOMS = TEMP$ -> B$TABLE(0);
      313     5770        /**/
      314     5771    2           DO I = 0 TO HEAD$ -> TD$HEAD.NUMIOMS - 1;
      315     5772    2              TEMP$ = ADDR(NI$IOM$(I));
      316     5773    2              TEMPPTR.SEGID = %SPCL1SID;
      317     5774    2              TEMP$ = TEMP$ -> B$PTR(0);
      318     5775    2              TEMPPTR.SEGID = %SPCL2SID;
      319     5776    2              IOM$(I) -> TD$IOM.PORT# = TEMP$ -> NI$IOM.ADDRESS;
      320     5777    2              END;
      321     5778        /**/
      322     5779    1           TEMP$ = ADDR(N$DCT$$);
      323     5780    1           TEMPPTR.SEGID = %SPCL1SID;
      324     5781    1           IG$DCT$$ = TEMP$ -> B$PTR(0);
      325     5782    1           IG$DCT$PTR.SEGID = %SPCL2SID;
      326     5783        /**/
      327     5784    1           IG$DVT$ = ADDR(NI$DVT$(0));
      328     5785    1           IG$DVTPTR.SEGID = %SPCL1SID;
      329     5786        /**/
      330     5787    1           TEMP$ = ADDR(KI_MXFE);
      331     5788    1           TEMPPTR.SEGID = %SPCL1SID;
      332     5789    1           MAX_FEP = TEMP$ -> B$TABLE(0);
      333     5790    1           TEMP$ = ADDR(NI$CHT$);
      334     5791    1           TEMPPTR.SEGID = %SPCL1SID;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:11   
      335     5792    1           CHT$ = TEMP$->B$PTR(0);
      336     5793    1           CHTPTR.SEGID = %SPCL2SID;
      337     5794        /**/
      338     5795        /**/
      339     5796    1           TEMP$ = ADDR(IT_WSN);
      340     5797    1           TEMPPTR.SEGID = %SPCL1SID;
      341     5798    1           WSNREC = TEMP$ -> TD$WSN;
      342     5799        /**/
      343     5800    1           TEMP$ = ADDR(NK_MXLOCAL);
      344     5801    1           TEMPPTR.SEGID = %SPCL1SID;
      345     5802    1           MAXDCTX = TEMP$ -> B$TABLE(0);
      346     5803        /**/
      347     5804                                                /* First loook for any SCs            */
      348     5805    1        CURDCTX = 0;
      349     5806    1        DONE_SCS = %FALSE;
      350     5807    2        DO UNTIL(DONE_SCS);                /* Look for SCs first                 */
      351     5808    3           DO UNTIL (SUBSTR(NI$DCT.DEVNM,0,2) = 'SC' OR CURDCTX > MAXDCTX);
      352     5809    3              CURDCTX = CURDCTX + 1;
      353     5810    3              DCT$ = IG$DCT$$->N$DCT$(CURDCTX);
      354     5811    3              DCTPTR.SEGID = %SPCL2SID;
      355     5812    3           END;                            /* DO UNTIL                           */
      356     5813    2           IF CURDCTX > MAXDCTX
      357     5814    2              THEN DONE_SCS = %TRUE;
      358     5815    2              ELSE                         /* Build an SC record                 */
      359     5816    3              DO;
      360     5817    3                 DEVKEY.TEXT = NI$DCT.DEVNM;
      361     5818    3                 SCLIST(HEAD$ -> TD$HEAD.NUMCONSOLES) = DEVKEY.TEXT;
      362     5819    3                 HEAD$ -> TD$HEAD.NUMCONSOLES = HEAD$ -> TD$HEAD.NUMCONSOLES + 1;
      363     5820    3                 DEVREC = '0'B;
      364     5821    3                 DEVREC.FLAGS.DOWN = NI$DCT.STATUS.DOWN;
      365     5822    3                 DVT$ = NI$DCT.DVT$;
      366     5823    3                 DVTPTR.SEGID = %SPCL5SID;
      367     5824    3                 DEVREC.MODEL = NI$DVT.MODEL(NI$DCT.MODX);
      368     5825    3                 DEVREC.FEATURE = NI$DVT.FEATURE(NI$DCT.FX);
      369     5826    3                 DQH$ = NI$DCT.DQH$;
      370     5827    3                 DQHPTR.SEGID = %SPCL2SID;
      371     5828    3                 IOM$(NI$DQH.IOCHAN.IOM) -> TD$IOM.DEVNAME(NI$DQH.IOCHAN.CHANNEL) =
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:12   
              5828                          DEVKEY.TEXT;
      372     5829    3                 DEVREC.IOCHAN.IOM = NI$DQH.IOCHAN.IOM;
      373     5830    3                 DEVREC.IOCHAN.CHAN = NI$DQH.IOCHAN.CHANNEL;
      374     5831    3                 WRITE_FPT.KEY_ = VECTOR(DEVKEY);
      375     5832    3                 WRITE_FPT.BUF_ = VECTOR(DEVREC);
      376     5833    3                 CALL M$WRITE(WRITE_FPT) ALTRET(IGT_ERR);
      377     5834    3              END;                         /* IF NOT DONE                        */
      378     5835    2        END;                               /* DO UNTIL done SCs                  */
      379     5836
      380     5837    1        ALL_DONE = %FALSE;
      381     5838    1        CURDCTX = 0;
      382     5839    2        DO UNTIL(ALL_DONE);
      383     5840    3           DO UNTIL((SUBSTR(NI$DCT.DEVNM,0,2) = 'UC' OR
      384     5841    3                    SUBSTR(NI$DCT.DEVNM,0,2) = 'TC' OR
      385     5842    3                    SUBSTR(NI$DCT.DEVNM,0,2) = 'AC' OR
      386     5843    3                    SUBSTR(NI$DCT.DEVNM,0,2) = 'DC') OR CURDCTX > MAXDCTX);
      387     5844    3              CURDCTX = CURDCTX + 1;
      388     5845    3              DCT$ = IG$DCT$$->N$DCT$(CURDCTX);
      389     5846    3              DCTPTR.SEGID = %SPCL2SID;
      390     5847    3           END;                            /* DO UNTIL                           */
      391     5848    2           IF CURDCTX > MAXDCTX
      392     5849    2              THEN ALL_DONE = %TRUE;
      393     5850    2              ELSE                         /* GOT AN MPC                         */
      394     5851    3              DO;
      395     5852    3                 MPCINDX = CURDCTX;
      396     5853    4                 DO CASE(NI$DCT.MPC.TYPE);
      397     5854    4                    CASE(%DV_AP);          /* AC                                 */
      398     5855    4                       ACLIST(HEAD$ -> TD$HEAD.NUMAPMPCS) = NI$DCT.DEVNM;
      399     5856    4                       HEAD$ -> TD$HEAD.NUMAPMPCS = HEAD$ -> TD$HEAD.NUMAPMPCS + 1;
      400     5857    4                    CASE(%DV_LP);          /* UC                                 */
      401     5858    4                       UCLIST(HEAD$ -> TD$HEAD.NUMUNITMPCS) = NI$DCT.DEVNM;
      402     5859    4                       HEAD$ -> TD$HEAD.NUMUNITMPCS = HEAD$ -> TD$HEAD.NUMUNITMPCS + 1;
      403     5860    4                    CASE(%DV_DP);          /* DC                                 */
      404     5861    4                       DCLIST(HEAD$ -> TD$HEAD.NUMDISKMPCS) = NI$DCT.DEVNM;
      405     5862    4                       HEAD$ -> TD$HEAD.NUMDISKMPCS = HEAD$ -> TD$HEAD.NUMDISKMPCS + 1;
      406     5863    4                    CASE(%DV_MT);          /* TC                                 */
      407     5864    4                       TCLIST(HEAD$ -> TD$HEAD.NUMTAPEMPCS) = NI$DCT.DEVNM;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:13   
      408     5865    4                       HEAD$ -> TD$HEAD.NUMTAPEMPCS = HEAD$ -> TD$HEAD.NUMTAPEMPCS + 1;
      409     5866    4                 END;                      /* DO CASE                            */
      410     5867    3                 NUMDEVS = 0;
      411     5868    3                 DEVNAME = '0'B;
      412     5869    3                 TEMP$ = IG$DCT$$->N$DCT$(CURDCTX + 1);
      413     5870    3                 TEMPPTR.SEGID = %SPCL2SID;
      414     5871    3                 IF SUBSTR(DCT$->NI$DCT.DEVNM,0,2) = SUBSTR(TEMP$->NI$DCT.DEVNM,0,2)
      415     5872    3                    THEN                   /* TWO MPCS                           */
      416     5873    4                    DO;
      417     5874    4                       NUMMPCS = 2;
      418     5875    4                       CURDCTX = CURDCTX + 1;
      419     5876    5                       DO CASE(NI$DCT.MPC.TYPE);
      420     5877    5                          CASE(%DV_AP);
      421     5878    5                             ACLIST(HEAD$->TD$HEAD.NUMAPMPCS) = TEMP$->NI$DCT.DEVNM;
      422     5879    5                             HEAD$->TD$HEAD.NUMAPMPCS = HEAD$->TD$HEAD.NUMAPMPCS + 1;
      423     5880    5                          CASE(%DV_DP);
      424     5881    5                             DCLIST(HEAD$->TD$HEAD.NUMDISKMPCS) = TEMP$->NI$DCT.DEVNM;
      425     5882    5                             HEAD$->TD$HEAD.NUMDISKMPCS = HEAD$->TD$HEAD.NUMDISKMPCS +
              5882                                      1;
      426     5883    5                          CASE(%DV_MT);
      427     5884    5                             TCLIST(HEAD$->TD$HEAD.NUMTAPEMPCS) = TEMP$->NI$DCT.DEVNM;
      428     5885    5                             HEAD$->TD$HEAD.NUMTAPEMPCS = HEAD$->TD$HEAD.NUMTAPEMPCS +
              5885                                      1;
      429     5886    5                          CASE(%DV_LP);
      430     5887    5                             UCLIST(HEAD$->TD$HEAD.NUMUNITMPCS) = TEMP$->NI$DCT.DEVNM;
      431     5888    5                             HEAD$->TD$HEAD.NUMUNITMPCS = HEAD$->TD$HEAD.NUMUNITMPCS +
              5888                                      1;
      432     5889    5                          END;  /* DO CASE NI$DCT.MPC.TYPE */
      433     5890    4                    END;                   /* IF                                 */
      434     5891    3                    ELSE NUMMPCS = 1;
      435     5892    3                 CURDCTX = CURDCTX + 1;
      436     5893    3                 DCT$ = IG$DCT$$->N$DCT$(CURDCTX);
      437     5894    3                 DCTPTR.SEGID = %SPCL2SID;
      438     5895    4                 DO WHILE((SUBSTR(NI$DCT.DEVNM,0,2) ~= 'DC' AND
      439     5896    4                          SUBSTR(NI$DCT.DEVNM,0,2) ~= 'AC' AND
      440     5897    4                          SUBSTR(NI$DCT.DEVNM,0,2) ~= 'OD' AND
      441     5898    4                          SUBSTR(NI$DCT.DEVNM,0,2) ~= 'UC' AND
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:14   
      442     5899    4                          SUBSTR(NI$DCT.DEVNM,0,2) ~= 'TC' AND
      443     5900    4                          SUBSTR(NI$DCT.DEVNM,0,2) ~= 'SC') AND CURDCTX <= MAXDCTX);
      444     5901    4                    DEVKEY.TEXT = NI$DCT.DEVNM;
      445     5902    4                    DEVNAME(NUMDEVS) = DEVKEY.TEXT;
      446     5903    4                    NUMDEVS = NUMDEVS + 1;
      447     5904    5                    DO CASE(NI$DCT.TYPE);
      448     5905    5                       CASE(%DV_AP);
      449     5906    5                          APLIST(HEAD$ -> TD$HEAD.NUMAPS) = DEVKEY.TEXT;
      450     5907    5                          HEAD$ -> TD$HEAD.NUMAPS = HEAD$ -> TD$HEAD.NUMAPS + 1;
      451     5908    5                       CASE(%DV_LP);
      452     5909    5                          LPLIST(HEAD$ -> TD$HEAD.NUMLPS) = DEVKEY.TEXT;
      453     5910    5                          HEAD$ -> TD$HEAD.NUMLPS = HEAD$ -> TD$HEAD.NUMLPS + 1;
      454     5911    5                       CASE(%DV_CR);
      455     5912    5                          CRLIST(HEAD$ -> TD$HEAD.NUMCRS) = DEVKEY.TEXT;
      456     5913    5                          HEAD$ -> TD$HEAD.NUMCRS = HEAD$ -> TD$HEAD.NUMCRS + 1;
      457     5914    5                       CASE(%DV_CP);
      458     5915    5                          CPLIST(HEAD$ -> TD$HEAD.NUMCPS) = DEVKEY.TEXT;
      459     5916    5                          HEAD$ -> TD$HEAD.NUMCPS = HEAD$ -> TD$HEAD.NUMCPS + 1;
      460     5917    5                       CASE(%DV_DP);
      461     5918    5                          DPLIST(HEAD$ -> TD$HEAD.NUMDPS) = DEVKEY.TEXT;
      462     5919    5                          HEAD$ -> TD$HEAD.NUMDPS = HEAD$ -> TD$HEAD.NUMDPS + 1;
      463     5920    5                       CASE(%DV_MT);
      464     5921    5                          MTLIST(HEAD$ -> TD$HEAD.NUMMTS) = DEVKEY.TEXT;
      465     5922    5                          HEAD$ -> TD$HEAD.NUMMTS = HEAD$ -> TD$HEAD.NUMMTS + 1;
      466     5923        /*                  CASE(%DV_XX);
      467     5924                               XXLIST(HEAD$ -> TD$HEAD.NUMXXS) = DEVKEY.TEXT;
      468     5925                               HEAD$ -> TD$HEAD.NUMXXS = HEAD$ -> TD$HEAD.NUMXXS + 1;
      469     5926        */
      470     5927    5                    END;                   /* DO CASE NI$DCT.TYPE                */
      471     5928
      472     5929    4                       CALL BUILD_DEVREC  ALTRET(NO_MSG);
      473     5930
      474     5931    4                    CURDCTX = CURDCTX + 1;
      475     5932    4                    DCT$ = IG$DCT$$->N$DCT$(CURDCTX);
      476     5933    4                    DCTPTR.SEGID = %SPCL2SID;
      477     5934    4                 END;                      /* DO WHILE NOT MPC OR SC, OR OD      */
      478     5935    3                 IF CURDCTX > MAXDCTX THEN ALL_DONE = %TRUE;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:15   
      479     5936    4                 DO I = 0 TO NUMMPCS - 1;
      480     5937    4                    MPCREC = '0'B;
      481     5938    4                    DCT$ = IG$DCT$$->N$DCT$(MPCINDX);
      482     5939    4                    DCTPTR.SEGID = %SPCL2SID;
      483     5940    4                    DVT$ = NI$DCT.DVT$;
      484     5941    4                    DVTPTR.SEGID = %SPCL5SID;
      485     5942    4                    DEVKEY.TEXT = NI$DCT.DEVNM;
      486     5943    4                    MPCREC.FLAGS.DOWN = NI$DCT.STATUS.DOWN;
      487     5944    4                    MPCREC.MODEL = NI$DVT.MODEL(NI$DCT.MODX);
      488     5945    4                    MPCREC.NUMDEVS = NUMDEVS;
      489     5946    4                    MPCREC.DEVNAME = DEVNAME;
      490     5947    4                    MPCREC.FWNAME = NI$DCT.MPC.FWNAME;
      491     5948    4                    MPCREC.LPFWNAME = NI$DCT.MPC.LPNAME;
      492     5949    4                    MPCREC.CRPFWNAME = NI$DCT.MPC.CRPNAME;
      493     5950    4                    MPCREC.FWREV.LETTER = ' ';
      494     5951    4                    MPCREC.FWREV.SUBREV = ' ';
      495     5952    4                    IF NI$DCT.MPC.TYPE ~= %DV_AP AND
      496     5953    5                       NI$DCT.MPC.TYPE ~= %DV_LP AND NOT MPCREC.FLAGS.DOWN THEN DO;
      497     5954    5                       IF NI$DCT.MPC.TYPE = %DV_DP
      498     5955    5                          THEN FWREV_ADDR = BITBIN(DP_FWREV_ADDR);
      499     5956    5                          ELSE
      500     5957    5                       IF NI$DCT.MPC.FWNAME = 'M610'
      501     5958    5                          THEN FWREV_ADDR = BITBIN(M610_FWREV_ADDR);
      502     5959    5                          ELSE
      503     5960    5                       IF NI$DCT.MPC.FWNAME = 'M601'
      504     5961    5                          THEN FWREV_ADDR = BITBIN(M601_FWREV_ADDR);
      505     5962    5                          ELSE
      506     5963    5                       IF NI$DCT.MPC.FWNAME = 'M500'
      507     5964    5                          THEN FWREV_ADDR = BITBIN(M500_FWREV_ADDR);
      508     5965    5                          ELSE GOTO NO_FWREV;
      509     5966    5                       FPT_IOQ.V.DLA.DCTX# = MPCINDX;
      510     5967    5                       FPT_IOQ.V.DLA.DRELADDR# = FWREV_ADDR;
      511     5968    5                       CALL M$IOQ(FPT_IOQ) ALTRET(NO_FWREV);
      512     5969    6                       IF NI$DCT.MPC.TYPE = %DV_DP THEN DO;
      513     5970    6                          INDX = BITBIN(FPT_IOQ.BUF_.BUF$->DPBUF.LETTER);
      514     5971    6                          IF INDX > 25 THEN GOTO NO_FWREV;
      515     5972    6                          MPCREC.FWREV.LETTER = SUBSTR(LETBUF,INDX,1);
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:16   
      516     5973    6                          INDX = BITBIN(FPT_IOQ.BUF_.BUF$->DPBUF.REV);
      517     5974    6                          IF INDX > 15 THEN GOTO NO_FWREV;
      518     5975    6                          MPCREC.FWREV.SUBREV = SUBSTR(HEXBUF,INDX,1);
      519     5976    6                          END;  /* IF TYPE = DP */
      520     5977    6                       ELSE DO;
      521     5978    6                          INDX = BITBIN(FPT_IOQ.BUF_.BUF$->MTBUF.LETTER);
      522     5979    6                          IF INDX > 25 THEN GOTO NO_FWREV;
      523     5980    6                          MPCREC.FWREV.LETTER = SUBSTR(LETBUF,INDX,1);
      524     5981    6                          INDX = BITBIN(FPT_IOQ.BUF_.BUF$->MTBUF.REV);
      525     5982    6                          IF INDX > 15 THEN GOTO NO_FWREV;
      526     5983    6                          MPCREC.FWREV.SUBREV = SUBSTR(HEXBUF,INDX,1);
      527     5984    6                          END;  /* ELSE */
      528     5985    5                       END;  /* IF NI$DCT.MPC.TYPE ~= %DV_LP */
      529     5986    4        NO_FWREV:
      530     5987
      531     5988                                      /* FIGURE OUT CHANNEL CONNECTIONS FOR THIS MPC  */
      532     5989    4                    INDX = 0;
      533     5990    4                    J = 0;
      534     5991    5                    DO WHILE(NI$DCT.MPC.IOCHANX(INDX) ~= 0 AND INDX < %N_CHANSPERMPC);
      535     5992    5                       DQH$ = CHT$->NI$CHT.DQH$(NI$DCT.MPC.IOCHANX(INDX));
      536     5993    5                       DQHPTR.SEGID = %SPCL2SID;
      537     5994    5                       MPCREC.IOCHAN.PRESENCE(J) = '1'B;
      538     5995    5                       MPCREC.IOCHAN.IOM(J) = NI$DQH.IOCHAN.IOM;
      539     5996    5                       MPCREC.IOCHAN.LOCHAN(J) = NI$DQH.IOCHAN.CHANNEL;
      540     5997    5                       IF  NI$DCT.MPC.IOCHANX(INDX+1) ~= 0
      541     5998    5                       AND NI$DCT.MPC.TYPE ~= %DV_LP
      542     5999    5                       AND NI$DCT.MPC.TYPE ~= %DV_AP
      543     6000    5                          THEN             /* CHECK FOR LA PAIR                  */
      544     6001    6                          DO;
      545     6002    6                             DQH$ = CHT$->NI$CHT.DQH$(NI$DCT.MPC.IOCHANX(INDX+1));
      546     6003    6                             DQHPTR.SEGID = %SPCL2SID;
      547     6004    6                             IF (MPCREC.IOCHAN.IOM(J) = NI$DQH.IOCHAN.IOM) AND
      548     6005    6                                (MPCREC.IOCHAN.LOCHAN(J) + 1 = NI$DQH.IOCHAN.CHANNEL)
      549     6006    6                                THEN       /* GOT AN LA PAIR                     */
      550     6007    7                                DO;
      551     6008    7                                   MPCREC.IOCHAN.HICHAN(J) = NI$DQH.IOCHAN.CHANNEL;
      552     6009    7                                   INDX = INDX + 1;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:17   
      553     6010    7                                END;       /* IF                                 */
      554     6011    6                                ELSE MPCREC.IOCHAN.HICHAN(J) = MPCREC.IOCHAN.LOCHAN(J);
      555     6012    6                          END;             /* IF IOCHANX ~= 0                    */
      556     6013    5                          ELSE MPCREC.IOCHAN.HICHAN(J) = MPCREC.IOCHAN.LOCHAN(J);
      557     6014    6                       DO K = MPCREC.IOCHAN.LOCHAN(J) TO MPCREC.IOCHAN.HICHAN(J);
      558     6015    6                          IOM$(MPCREC.IOCHAN.IOM(J))->TD$IOM.DEVNAME(K) = DEVKEY.TEXT;
      559     6016    6                       END;                /* DO K                               */
      560     6017    5                       INDX = INDX + 1;
      561     6018    5                       J = J + 1;
      562     6019    5                    END;                   /* DO WHILE                           */
      563     6020    4                    WRITE_FPT.KEY_ = VECTOR(DEVKEY);
      564     6021    4                    WRITE_FPT.BUF_ = VECTOR(MPCREC);
      565     6022    4                    WRITE_FPT.BUF_.BOUND = SIZEC(TD$MPC) + (SIZEC(TD$MPC.DEVNAME(0))*(
              6022                             NUMDEVS-1)) - 1;
      566     6023    4                    CALL M$WRITE(WRITE_FPT) ALTRET(IGT_ERR);
      567     6024    4                    MPCINDX = MPCINDX + 1;
      568     6025    4                 END;                      /* DO I = 0 TO NUMMPCS - 1            */
      569     6026    3                 CURDCTX = CURDCTX - 1;
      570     6027    3              END;                         /* IF GOT AN MPC                      */
      571     6028    2        END;                               /* DO UNTIL ALL_DONE                  */
      572     6029        /**/
      573     6030    1           I = 0;
      574     6031        /**/
      575     6032    1           HEAD$ -> TD$HEAD.IOM_INDX = I;
      576     6033    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMIOMS - 1;
      577     6034    2              CALL BINCHAR(IOM#,J);
      578     6035    2              CALL CONCAT(IOM_NAME,'IOM',IOM#);
      579     6036    2              HEAD$ -> TD$HEAD.DEVNAME(I) = IOM_NAME;
      580     6037    2              I = I + 1;
      581     6038    2              END;  /* DO J */
      582     6039    1           HEAD$ -> TD$HEAD.FEP_INDX = I;
      583     6040    1           TEMP$ = ADDR(KI_FEI$$);
      584     6041    1           TEMPPTR.SEGID = %SPCL1SID;
      585     6042    1           TEMP$ = TEMP$ -> B$PTR(0);  /* Get KI_FEI$$ */
      586     6043    1           TEMPPTR.SEGID = %SPCL2SID;
      587     6044    1           IG_FEI$$ = TEMP$;
      588     6045    2           DO J = 1 TO MAX_FEP;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:18   
      589     6046    2                  TEMP$ = IG_FEI$$ -> B$PTR(J);    /* Get FEI$  */
      590     6047    2                  TEMPPTR.SEGID = %SPCL2SID;
      591     6048
      592     6049    2                  OPC_FOUND = NO;
      593     6050    2                  OPC$ = ADDR( FP_OPCI$$ );
      594     6051    2                  OPCPTR.SEGID = %SPCL1SID;
      595     6052    2                  OPC$ = OPC$->B$PTR(0);
      596     6053    2                  OPCPTR.SEGID = %SPCL2SID;
      597     6054    3                  DO WHILE OPCPTR.OFFSET~=0 /*ADDR(NIL)*/ AND ~OPC_FOUND;
      598     6055    3                     IF OPC$->FP$OPCI.FEI# =  J  THEN OPC_FOUND = YES;
      599     6056    3                     OPC$ = OPC$->FP$OPCI.LNK$;
      600     6057    3                     OPCPTR.SEGID = %SPCL2SID;
      601     6058    3                  END;  /* do while */
      602     6059    2                 CALL BINCHAR(FEPNUM,TEMP$->KI$FEI.FEP#);
      603     6060    2                 K = 0;
      604     6061    3                 DO WHILE(SUBSTR(FEPNUM,K,1) = '0');
      605     6062    3                    K = K + 1;
      606     6063    3                    END;  /* DO WHILE */
      607     6064    2                 LEN = LENGTHC(FEPNUM) - K;
      608     6065    2                 CALL CONCAT(FEPNAME,'FEP',SUBSTR(FEPNUM,K,LEN));
      609     6066    2                 IF ~OPC_FOUND THEN        /* do FEP stuff  */
      610     6067    3                 DO;
      611     6068    3                   HEAD$ -> TD$HEAD.DEVNAME(I) = FEPNAME;
      612     6069    3                   HEAD$->TD$HEAD.NUMFEPS = HEAD$->TD$HEAD.NUMFEPS + 1;
      613     6070    3                   I = I + 1;
      614     6071    3                 END;  /* if ~OPC_FOUND */
      615     6072    2                 IOM$(TEMP$ -> KI$FEI.FECH.IOM) -> TD$IOM.DEVNAME(TEMP$ -> KI$FEI.FECH.
              6072                          DEV)
      616     6073    2                    = FEPNAME;
      617     6074    2              END;
      618     6075        /**/
      619     6076    1           HEAD$ -> TD$HEAD.UNITMPC_INDX = I;
      620     6077    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMUNITMPCS - 1;
      621     6078    2              HEAD$ -> TD$HEAD.DEVNAME(I) = UCLIST(J);
      622     6079    2              I = I+1;
      623     6080    2              END;
      624     6081        /**/
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:19   
      625     6082    1           HEAD$ -> TD$HEAD.TAPEMPC_INDX = I;
      626     6083    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMTAPEMPCS - 1;
      627     6084    2              HEAD$ -> TD$HEAD.DEVNAME(I) = TCLIST(J);
      628     6085    2              I = I+1;
      629     6086    2              END;
      630     6087        /**/
      631     6088    1           HEAD$ -> TD$HEAD.DISKMPC_INDX = I;
      632     6089    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMDISKMPCS - 1;
      633     6090    2              HEAD$ -> TD$HEAD.DEVNAME(I) = DCLIST(J);
      634     6091    2              I = I+1;
      635     6092    2              END;
      636     6093        /**/
      637     6094    1           HEAD$ -> TD$HEAD.APMPC_INDX = I;
      638     6095    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMAPMPCS - 1;
      639     6096    2              HEAD$ -> TD$HEAD.DEVNAME(I) = ACLIST(J);
      640     6097    2              I = I+1;
      641     6098    2              END;
      642     6099        /**/
      643     6100    1             CALL OPC_STUFF  ALTRET(NO_MSG);
      644     6101        /**/
      645     6102    1           HEAD$ -> TD$HEAD.OPC_INDX = I;
      646     6103    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMOPCS - 1;
      647     6104    2              HEAD$ -> TD$HEAD.DEVNAME(I) = OCLIST(J);
      648     6105    2              I = I+1;
      649     6106    2              END;
      650     6107        /**/
      651     6108    1           HEAD$ -> TD$HEAD.CONSOLE_INDX = I;
      652     6109    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMCONSOLES - 1;
      653     6110    2              HEAD$ -> TD$HEAD.DEVNAME(I) = SCLIST(J);
      654     6111    2              I = I+1;
      655     6112    2              END;
      656     6113        /**/
      657     6114    1           HEAD$ -> TD$HEAD.LP_INDX = I;
      658     6115    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMLPS - 1;
      659     6116    2              HEAD$ -> TD$HEAD.DEVNAME(I) = LPLIST(J);
      660     6117    2              I = I+1;
      661     6118    2              END;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:20   
      662     6119        /**/
      663     6120    1           HEAD$ -> TD$HEAD.CR_INDX = I;
      664     6121    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMCRS - 1;
      665     6122    2              HEAD$ -> TD$HEAD.DEVNAME(I) = CRLIST(J);
      666     6123    2              I = I+1;
      667     6124    2              END;
      668     6125        /**/
      669     6126    1           HEAD$ -> TD$HEAD.CP_INDX = I;
      670     6127    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMCPS - 1;
      671     6128    2              HEAD$ -> TD$HEAD.DEVNAME(I) = CPLIST(J);
      672     6129    2              I = I+1;
      673     6130    2              END;
      674     6131        /**/
      675     6132    1           HEAD$ -> TD$HEAD.DP_INDX = I;
      676     6133    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMDPS - 1;
      677     6134    2              HEAD$ -> TD$HEAD.DEVNAME(I) = DPLIST(J);
      678     6135    2              I = I+1;
      679     6136    2              END;
      680     6137        /**/
      681     6138    1           HEAD$ -> TD$HEAD.MT_INDX = I;
      682     6139    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMMTS - 1;
      683     6140    2              HEAD$ -> TD$HEAD.DEVNAME(I) = MTLIST(J);
      684     6141    2              I = I+1;
      685     6142    2              END;
      686     6143        /**/
      687     6144    1           HEAD$ -> TD$HEAD.XX_INDX = I;
      688     6145    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMXXS - 1;
      689     6146    2              HEAD$ -> TD$HEAD.DEVNAME(I) = XXLIST(J);
      690     6147    2              I = I+1;
      691     6148    2              END;
      692     6149        /**/
      693     6150    1           HEAD$ -> TD$HEAD.AP_INDX = I;
      694     6151    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMAPS - 1;
      695     6152    2              HEAD$ -> TD$HEAD.DEVNAME(I) = APLIST(J);
      696     6153    2              I = I+1;
      697     6154    2              END;
      698     6155        /**/
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:21   
      699     6156    1           HEAD$ -> TD$HEAD.OD_INDX = I;
      700     6157    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMODS - 1;
      701     6158    2              HEAD$ -> TD$HEAD.DEVNAME(I) = ODLIST(J);
      702     6159    2              I = I+1;
      703     6160    2              END;
      704     6161        /**/
      705     6162    1           WRITE_FPT.BUF_.BOUND = SIZEC(TD$HEAD)+(SIZEC(TD$HEAD.DEVNAME(0))*I) - 1;
      706     6163    1           WRITE_FPT.BUF_.BUF$ = HEAD$;
      707     6164    1           WRITE_FPT.KEY_ = VECTOR(HEADKEY);
      708     6165    1           CALL M$WRITE (WRITE_FPT) ALTRET (IGT_ERR);
      709     6166        /**/
      710     6167    1           WRITE_FPT.BUF_.BOUND = SIZEC(TD$WSN) - 1;
      711     6168    1           WRITE_FPT.BUF_.BUF$ = ADDR(WSNREC);
      712     6169    1           WRITE_FPT.KEY_ = VECTOR(WSNKEY);
      713     6170    1           CALL M$WRITE(WRITE_FPT) ALTRET(IGT_ERR);
      714     6171        /**/
      715     6172    2           DO I = 0 TO HEAD$ -> TD$HEAD.NUMIOMS - 1;
      716     6173    2              WRITE_FPT.BUF_.BOUND = SIZEC(TD$IOM) -1;
      717     6174    2              WRITE_FPT.BUF_.BUF$ = IOM$(I);
      718     6175    2              WRITE_FPT.KEY_ = VECTOR(IOMKEY(I));
      719     6176    2              CALL M$WRITE(WRITE_FPT) ALTRET (IGT_ERR);
      720     6177    2              END;
      721     6178        /**/
      722     6179    1           CALL M$CLOSE(CLOSE_FPT);
      723     6180    1           RETURN;
      724     6181        /**/
      725     6182    1   IGT_ERR:
      726     6183    1           ERRCODE = B$JIT$ -> B$JIT.ERR;
      727     6184    1           CALL M$ERRMSG(ERRMSG_FPT) ALTRET (NO_MSG);
      728     6185    1           CALL M$TEMPWROC(WROC_FPT);
      729     6186    1   NO_MSG:
      730     6187    1           RETURN;
      731     6188        %EJECT;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:22   
      732     6189    1   BUILD_DEVREC : PROC  ALTRET;
      733     6190        /**/
      734     6191    2                    DEVREC = '0'B;
      735     6192    2                    DEVREC.FLAGS.DOWN = NI$DCT.STATUS.DOWN;
      736     6193    2                    DVT$ = NI$DCT.DVT$;
      737     6194    2                    DVTPTR.SEGID = %SPCL5SID;
      738     6195    2                    IF NI$DCT.TYPE = %DV_OD THEN
      739     6196    3                       DO;
      740     6197    3                       DEVREC.DEVTYPE = %DV_OD;
      741     6198    3                       DEVREC.MPCNAME(0) = OPCNAME;
      742     6199    3                       END;
      743     6200    2                    ELSE
      744     6201    3                       DO;
      745     6202    3                       DEVREC.MODEL = NI$DVT.MODEL(NI$DCT.MODX);
      746     6203    3                       DEVREC.FEATURE = NI$DVT.FEATURE(NI$DCT.FX);
      747     6204    3                       TEMPINDX = MPCINDX;
      748     6205    4                       DO I = 0 TO NUMMPCS - 1;
      749     6206    4                          TEMP$ = IG$DCT$$->N$DCT$(TEMPINDX);
      750     6207    4                          TEMPPTR.SEGID = %SPCL2SID;
      751     6208    4                          DEVREC.MPCNAME(I) = TEMP$ -> NI$DCT.DEVNM;
      752     6209    4                          TEMPINDX = TEMPINDX + 1;
      753     6210    4                       END;                   /* DO I                               */
      754     6211    3                       DEVREC.DEVTYPE = NI$DVT.TYPE;
      755     6212    3                       END;    /* ELSE */
      756     6213    2                    DEVREC.DEVNUM = NI$DCT.DVN;
      757     6214    2                    IF NI$DCT.RAT$ ~= ADDR(NIL)
      758     6215    2                       THEN                /* GET ATTR OUT OF RAT                */
      759     6216    3                       DO;
      760     6217    3                          RAT$ = NI$DCT.RAT$;
      761     6218    3                          RATPTR.SEGID = %SPCL2SID;
      762     6219    3                          DEVREC.ATTR = FR$RAT.M1;
      763     6220    3                       END;                /* IF ~= ADDR(NIL)                    */
      764     6221    2                       ELSE DEVREC.ATTR = NI$DVT.ATTR;
      765     6222    2                    IF (NI$DCT.TYPE = %DV_LP OR
      766     6223    2                        NI$DCT.TYPE = %DV_CR OR
      767     6224    2                        NI$DCT.TYPE = %DV_AP OR
      768     6225    2                        NI$DCT.TYPE = %DV_OD OR
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:23   
      769     6226    2                        NI$DCT.TYPE = %DV_CP)
      770     6227    2                       THEN                /* One Logical Channel per device     */
      771     6228    3                       DO;
      772     6229    3                          DQH$ = NI$DCT.DQH$;
      773     6230    3                          DQHPTR.SEGID = %SPCL2SID;
      774     6231    3                          DEVREC.IOCHAN.IOM = NI$DQH.IOCHAN.IOM;
      775     6232    3                          DEVREC.IOCHAN.CHAN = NI$DQH.IOCHAN.CHANNEL;
      776     6233    3                       END;                          /* IF UNIT RECORD  */
      777     6234    2                    WRITE_FPT.KEY_ = VECTOR(DEVKEY);
      778     6235    2                    WRITE_FPT.BUF_ = VECTOR(DEVREC);
      779     6236    2                    CALL M$WRITE(WRITE_FPT) ALTRET(IGT_BUG);
      780     6237    2        RETURN;
      781     6238        /**/
      782     6239    2   IGT_BUG:
      783     6240    2           ERRCODE = B$JIT$ -> B$JIT.ERR;
      784     6241    2           CALL M$ERRMSG(ERRMSG_FPT) ALTRET (NO_BUG);
      785     6242    2           CALL M$TEMPWROC(WROC_FPT);
      786     6243    2   NO_BUG:
      787     6244    2       ALTRETURN;
      788     6245        /**/
      789     6246    2   END BUILD_DEVREC;
      790     6247        %EJECT;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:24   
      791     6248    1   OPC_STUFF : PROC  ALTRET;
      792     6249        /**/
      793     6250    2   DCL FEX UBIN;
      794     6251
      795     6252    2        OPC$ = ADDR( FP_OPCI$$ );
      796     6253    2        OPCPTR.SEGID = %SPCL1SID;
      797     6254    2        OPC$ = OPC$->B$PTR(0);
      798     6255    2        OPCPTR.SEGID = %SPCL2SID;
      799     6256    3        DO WHILE OPCPTR.OFFSET~=0 /*ADDR(NIL)*/ ;
      800     6257    3           CURDCTX = 0;               /* GOT AN  OPC  */
      801     6258    3           OPCNAME = 'OP000000';
      802     6259    3           FEX = OPC$->FP$OPCI.FEI#;
      803     6260    3                 TEMP$ = IG_FEI$$->B$PTR(FEX);
      804     6261    3                 TEMPPTR.SEGID = %SPCL2SID;
      805     6262    3                 CALL BINCHAR(OPCNUM,MOD(TEMP$->KI$FEI.FEP#,100));
      806     6263    3                 CALL CONCAT(SUBSTR(OPCNAME,0,4),'OP',OPCNUM);
      807     6264    3             OCLIST(HEAD$ -> TD$HEAD.NUMOPCS) = OPCNAME;
      808     6265    3             HEAD$->TD$HEAD.NUMOPCS = HEAD$->TD$HEAD.NUMOPCS + 1;
      809     6266        /**/
      810     6267    4           DO UNTIL (SUBSTR(NI$DCT.DEVNM,0,2) = 'OD'  AND
      811     6268    4                     NI$DQH.FEX = FEX ) OR CURDCTX > MAXDCTX;
      812     6269    4             CURDCTX = CURDCTX + 1;
      813     6270    4             DCT$ = IG$DCT$$->N$DCT$(CURDCTX);
      814     6271    4             DCTPTR.SEGID = %SPCL2SID;
      815     6272    4             DQH$ = NI$DCT.DQH$;
      816     6273    4             DQHPTR.SEGID = %SPCL2SID;
      817     6274    4             END;           /* DO UNTIL   */
      818     6275    3           IF CURDCTX <= MAXDCTX
      819     6276    3           THEN
      820     6277    4             DO;
      821     6278    4             NUMDEVS = 0;
      822     6279    4             DEVNAME = '0'B;
      823     6280    4             NUMMPCS = 1;
      824     6281    4             TEMP$ = NI$DCT.DQH$;
      825     6282    4             TEMPPTR.SEGID = %SPCL2SID;
      826     6283    5             DO WHILE CURDCTX <= MAXDCTX AND SUBSTR(NI$DCT.DEVNM,0,2) = 'OD'  AND
      827     6284    5                     TEMP$->NI$DQH.FEX = FEX;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:25   
      828     6285    5               DEVKEY.TEXT = NI$DCT.DEVNM;
      829     6286    5               DEVNAME(NUMDEVS) = DEVKEY.TEXT;
      830     6287    5               NUMDEVS = NUMDEVS + 1;
      831     6288    5                  ODLIST(HEAD$->TD$HEAD.NUMODS) = DEVKEY.TEXT;
      832     6289    5                  HEAD$->TD$HEAD.NUMODS = HEAD$->TD$HEAD.NUMODS + 1;
      833     6290
      834     6291    5                  CALL BUILD_DEVREC  ALTRET(NO_OPC_BUG);
      835     6292
      836     6293    5               CURDCTX = CURDCTX + 1;
      837     6294    5               DCT$ = IG$DCT$$->N$DCT$(CURDCTX);
      838     6295    5               DCTPTR.SEGID = %SPCL2SID;
      839     6296    5               TEMP$ = NI$DCT.DQH$;
      840     6297    5               TEMPPTR.SEGID = %SPCL2SID;
      841     6298    5             END;  /* do while  */
      842     6299                                           /* build an MPC for the OPC */
      843     6300    4             MPCREC = '0'B;
      844     6301    4             DEVKEY.TEXT = OPCNAME;
      845     6302    4             MPCREC.NUMDEVS = NUMDEVS;
      846     6303    4             MPCREC.DEVNAME = DEVNAME;
      847     6304    4             MPCREC.FLAGS.DOWN = NI$DQH.STATUS.DOWN;
      848     6305    4             MPCREC.FWNAME = 'NONE';
      849     6306    4             MPCREC.IOCHAN.PRESENCE(0) = '1'B;
      850     6307    4             MPCREC.IOCHAN.IOM(0) = NI$DQH.IOCHAN.IOM;
      851     6308    4             MPCREC.IOCHAN.LOCHAN(0) = NI$DQH.IOCHAN.CHANNEL;
      852     6309    4             MPCREC.IOCHAN.HICHAN(0) = NI$DQH.IOCHAN.CHANNEL;
      853     6310    4             WRITE_FPT.KEY_ = VECTOR(DEVKEY);
      854     6311    4             WRITE_FPT.BUF_ = VECTOR(MPCREC);
      855     6312    4             WRITE_FPT.BUF_.BOUND = SIZEC(TD$MPC) + (SIZEC(TD$MPC.DEVNAME(0))*(NUMDEVS-
              6312                      1)) - 1;
      856     6313    4             CALL M$WRITE (WRITE_FPT) ALTRET (IGT_OPC_ERR);
      857     6314    4          END;  /* IF */
      858     6315    3          OPC$ = OPC$->FP$OPCI.LNK$;
      859     6316    3          OPCPTR.SEGID = %SPCL2SID;
      860     6317    3        END;  /* while  */
      861     6318    2     RETURN;
      862     6319        /**/
      863     6320    2   IGT_OPC_ERR:
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:26   
      864     6321    2             ERRCODE = B$JIT$ -> B$JIT.ERR;
      865     6322    2             CALL M$ERRMSG(ERRMSG_FPT) ALTRET (NO_OPC_BUG);
      866     6323    2             CALL M$TEMPWROC(WROC_FPT);
      867     6324    2   NO_OPC_BUG:
      868     6325    2          ALTRETURN;
      869     6326    2   END OPC_STUFF;
      870     6327    1   END  IGT$TDFILE;

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:27   
--  Include file information  --

   FP_MACRO_C.:E05TOU  is referenced.
   IT_SUBS_C.:E05TOU  is referenced.
   N_FC_C.:E05TOU  is referenced.
   FR$RAT.:E05TOU  is referenced.
   B$MAP.:E05TOU  cannot be made into a system file and is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   TD$STRUCT.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   M_INFO_C.:E05TOU  is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   NI_DATA_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   KI_MACROS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IGT$TDFILE.

   Procedure IGT$TDFILE requires 1616 words for executable code.
   Procedure IGT$TDFILE requires 90 words of local(AUTO) storage.

    No errors detected in file IGT$TDFILE.:E05TSI    .

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:28   

 Object Unit name= IGT$TDFILE                                 File name= IGT$TDFILE.:E05TOU
 UTS= JUL 29 '97 22:38:21.32 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none  3596   7014  IGT$TDFILE
    2   DCB   even  none     0      0  M$CONFG
    3   DCB   even  none     0      0  M$MPC
    4  RoData even  UTS     25     31  IGT$TDFILE
    5   Proc  even  none  1616   3120  IGT$TDFILE
    6  RoData even  none    30     36  IGT$TDFILE

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     5      0   yes            yes      Std        0  IGT$TDFILE

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    1    254  ERRCODE                            1    255  ERRBUF

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_0
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:29   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     N$DCT$$                               N$FQ$                                 NI$CHT$
     NI$DVT$                               NI$FQ$                                NI$IBUF$
     NI$IOM$                               NI$RP$                                NI_IOMS
     M$UC                                  M$CONFG                               M$MPC
     KI_FEI$$                              KI_MXFE                               NK_MXLOCAL
     IT_WSN                                B$JIT$                                FP_OPCI$$
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:30   


        1        1        /*M*     IGT$TDFILE - BUILD $:CONFIG FILE FOR T&D USE      */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*/
        8        8        IGT$TDFILE: PROC;

      8  5 000000   000000 700200 xent  IGT$TDFILE   TSX0  ! X66_AUTO_0
         5 000001   000132 000000                    ZERO    90,0

        9        9        /**/
       10       10        %INCLUDE KI_MACROS_C;
       11      618        %INCLUDE NI_DATA_R;
       12     1055        %INCLUDE NI_DATA_C;
       13     1168        %INCLUDE B_SEGIDS_C;
       14     1707        %INCLUDE M_INFO_C;
       15     1847        %INCLUDE B$JIT;
       16     2137        %INCLUDE TD$STRUCT;
       17     2238        %INCLUDE CP_6;
       18     2319        %INCLUDE CP_6_SUBS;
       19     2859        %INCLUDE B_ERRORS_C;
       20     3986        %INCLUDE B$MAP;
       21     4085        %INCLUDE FR$RAT;
       22     4138        %INCLUDE N_FC_C;
       23     4175        %INCLUDE IT_SUBS_C;
       24     4442        %SUB YES = '1'B;
       25     4443        %SUB NO = '0'B;
       26     4444        %EQU TRUE = '1'B;
       27     4445        %EQU FALSE = '0'B;
       28     4446        /**/
       29     4447        /*  Based data  */
       30     4448        /**/
       31     4449    1   DCL B$TABLE(0:0) UBIN WORD BASED ALIGNED;
       32     4450    1   DCL B$PTR(0:0) PTR BASED ALIGNED;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:31   
       33     4451    1   DCL B$UBIN9(0:0) UBIN(9) BASED UNAL;
       34     4452        /**/
       35     4453        %KI$FEI;
       36     4537        %NI$DCT (STCLASS="BASED(DCT$)");
       37     4585        %NI$SQH (STCLASS="BASED(SQH$)");
       38     4598        %NI$DVT (STCLASS="BASED(DVT$)");
       39     4605        %NI$DQH (STCLASS="BASED(DQH$)");
       40     4628        %FR$RAT (STCLASS="BASED(RAT$)");
       41     4668        %NI$CHT (STCLASS="(0:0) BASED(CHT$)");
       42     4671        %NI$IOM;
       43     4676        /**/
       44     4677        %TD$HEAD;
       45     4713        %TD$IOM;
       46     4721        %TD$MPC;
       47     4743        %TD$DEV;
       48     4762        %TD$WSN;
       49     4766        /**/
       50     4767        /**/
       51     4768        /*  Fpts  */
       52     4769        /**/
       53     4770        %FPT_OPEN     (FPTN=OPEN_FPT,
       54     4771                       DCB = M$CONFG,
       55     4772                       NAME = FILENAME,
       56     4773                       ASN = FILE,
       57     4774                       ACS = DIRECT,
       58     4775                       DISP = NAMED,
       59     4776                       SCRUB = YES,
       60     4777                       ORG = KEYED,
       61     4778                       ACCESS = RDONLY,
       62     4779                       ACSVEH = VEHICLE,
       63     4780                       FUN = CREATE,
       64     4781                       EXIST = NEWFILE);
       65     4890        /**/
       66     4891        %FPT_CLOSE (FPTN = CLOSE_FPT,
       67     4892                    DCB = M$CONFG,
       68     4893                    DISP = SAVE);
       69     4935        %FPT_WRITE    (FPTN = WRITE_FPT,
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:32   
       70     4936                       DCB = M$CONFG);
       71     4967        /**/
       72     4968        %FPT_ERRMSG (FPTN = ERRMSG_FPT,
       73     4969                     CODE = ERRCODE,
       74     4970                     BUF ="ERRBUF.TEXT",
       75     4971                     DCB = M$CONFG,
       76     4972                     FIELD1 = SUBBUF_1,
       77     4973                     FIELD2 = SUBBUF_2,
       78     4974                     SUBMESS = YES,
       79     4975                     FLAGLEV = 3);
       80     5002        /**/
       81     5003        %FPT_TEMPWROC (FPTN = WROC_FPT,
       82     5004                       BUFW = ERRBUF);
       83     5020        /**/
       84     5021        %FPT_SYSCON   (FPTN = SYSCON_FPT,
       85     5022                       RESULT = RESULTS);
       86     5039        /**/
       87     5040        %VLR_SYSCON   (FPTN = RESULTS);
       88     5059        /**/
       89     5060        %FPT_IOQ (FPTN=FPT_IOQ,
       90     5061                  DCB=M$MPC,
       91     5062                  BUF=BUF,
       92     5063                  FC=%N_RDBIN);
       93     5081        /**/
       94     5082    1   DCL M$CONFG  DCB;
       95     5083    1   DCL M$MPC DCB;
       96     5084        /**/
       97     5085        /**/
       98     5086        /*  Symrefs  */
       99     5087        /**/
      100     5088    1   DCL KI_FEI$$ PTR SYMREF;
      101     5089    1   DCL KI_MXFE UBIN WORD SYMREF;
      102     5090    1   DCL NK_MXLOCAL UBIN WORD SYMREF;
      103     5091    1   DCL 1 IT_WSN SYMREF,
      104     5092    1         2 NAME(0:3) CHAR(8) UNAL;
      105     5093        /**/
      106     5094        /*  Static data   */
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:33   
      107     5095        /**/
      108     5096        %VLP_NAME     (FPTN = FILENAME,
      109     5097                       LEN = 7,
      110     5098                       NAME = ':CONFIG');
      111     5125        /**/
      112     5126        %VLP_ATTR (FPTN = RDONLY);
      113     5140        %VLP_ACCESS (READ=YES,EXEC=YES,ACCT='ALL',LAST=";");
      114     5157        /**/
      115     5158        %VLP_ATTR (FPTN = VEHICLE);
      116     5172        %VLP_ACSVEH (READ=YES,UPD=YES,VEHICLE='SYSCON',LAST=";");
      117     5189        /**/
      118     5190    1   DCL B$JIT$ PTR SYMREF;
      119     5191    1   DCL IG$DCT$$ PTR STATIC INIT(ADDR(NIL));
      120     5192    1   DCL 1 IG$DCT$PTR REDEF IG$DCT$$,
      121     5193    1         2 OFFSET UBIN(18) UNAL,
      122     5194    1         2 * BIT(6) UNAL,
      123     5195    1         2 SEGID BIT(12) UNAL;
      124     5196    1   DCL IG_FEI$$ PTR STATIC INIT(ADDR(NIL));
      125     5197    1   DCL 1 IG_FEI$PTR REDEF IG_FEI$$,
      126     5198    1         2 OFFSET UBIN(18) UNAL,
      127     5199    1         2 * BIT(6) UNAL,
      128     5200    1         2 SEGID BIT(12) UNAL;
      129     5201    1   DCL IG$DVT$ PTR STATIC INIT(ADDR(NIL));
      130     5202    1   DCL 1 IG$DVTPTR REDEF IG$DVT$,
      131     5203    1         2 OFFSET UBIN(18) UNAL,
      132     5204    1         2 * BIT(6) UNAL,
      133     5205    1         2 SEGID BIT(12) UNAL;
      134     5206    1   DCL DCT$ PTR STATIC INIT(ADDR(NIL));
      135     5207    1   DCL 1 DCTPTR REDEF DCT$,
      136     5208    1         2 OFFSET UBIN(18) UNAL,
      137     5209    1         2 * BIT(6) UNAL,
      138     5210    1         2 SEGID BIT(12) UNAL;
      139     5211    1   DCL DVT$ PTR STATIC INIT(ADDR(NIL));
      140     5212    1   DCL 1 DVTPTR REDEF DVT$,
      141     5213    1         2 OFFSET UBIN(18) UNAL,
      142     5214    1         2 * BIT(6) UNAL,
      143     5215    1         2 SEGID BIT(12) UNAL;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:34   
      144     5216    1   DCL RAT$ PTR STATIC INIT(ADDR(NIL));
      145     5217    1   DCL 1 RATPTR REDEF RAT$,
      146     5218    1         2 OFFSET UBIN(18) UNAL,
      147     5219    1         2 * BIT(6) UNAL,
      148     5220    1         2 SEGID BIT(12) UNAL;
      149     5221    1   DCL SQH$ PTR STATIC INIT(ADDR(NIL));
      150     5222    1   DCL 1 SQHPTR REDEF SQH$,
      151     5223    1         2 OFFSET UBIN(18) UNAL,
      152     5224    1         2 * BIT(6) UNAL,
      153     5225    1         2 SEGID BIT(12) UNAL;
      154     5226    1   DCL DQH$ PTR STATIC INIT(ADDR(NIL));
      155     5227    1   DCL 1 DQHPTR REDEF DQH$,
      156     5228    1         2 OFFSET UBIN(18) UNAL,
      157     5229    1         2 * BIT(6) UNAL,
      158     5230    1         2 SEGID BIT(12) UNAL;
      159     5231    1   DCL TEMP$ PTR STATIC INIT(ADDR(NIL));
      160     5232    1   DCL 1 TEMPPTR REDEF TEMP$,
      161     5233    1         2 OFFSET UBIN(18) UNAL,
      162     5234    1         2 * BIT(6) UNAL,
      163     5235    1         2 SEGID BIT(12) UNAL;
      164     5236    1   DCL CHT$ PTR STATIC INIT(ADDR(NIL));
      165     5237    1   DCL 1 CHTPTR REDEF CHT$,
      166     5238    1         2 OFFSET UBIN(18) UNAL,
      167     5239    1         2 * BIT(6) UNAL,
      168     5240    1         2 SEGID BIT(12) UNAL;
      169     5241        /**/
      170     5242    1   DCL ERRCODE BIT(36) STATIC SYMDEF INIT ('0'B);
      171     5243    1   DCL 1 ERRBUF STATIC SYMDEF,
      172     5244    1         2 CRLF BIT(36) INIT('015015015012'O),
      173     5245    1         2 TEXT CHAR(120) INIT(' ');
      174     5246        /**/
      175     5247    1   DCL 1 SUBBUF_1 STATIC,
      176     5248    1         2 COUNT UBIN(9) UNAL,
      177     5249    1         2 TEXT CHAR(11) UNAL;
      178     5250    1   DCL 1 SUBBUF_2 STATIC,
      179     5251    1         2 COUNT UBIN(9) UNAL,
      180     5252    1         2 TEXT CHAR(11) UNAL;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:35   
      181     5253        /**/
      182     5254    1   DCL 1 DEVERR_ERRCODE STATIC,
      183     5255    1         2 FCG BIT(18) UNAL INIT('110724'O),
      184     5256    1         2 ERR# UBIN(15) UNAL INIT(101),
      185     5257    1         2 SEV UBIN(3) UNAL INIT(0);
      186     5258    1   DCL 1 CHANERR_ERRCODE STATIC,
      187     5259    1         2 FCG BIT(18) UNAL INIT('110724'O),
      188     5260    1         2 ERR# UBIN(15) UNAL INIT(102),
      189     5261    1         2 SEV UBIN(3) UNAL INIT(0);
      190     5262    1   DCL 1 MPCERR_ERRCODE STATIC,
      191     5263    1         2 FCG BIT(18) UNAL INIT('110724'O),
      192     5264    1         2 ERR# UBIN(15) UNAL INIT(103),
      193     5265    1         2 SEV UBIN(3) UNAL INIT(0);
      194     5266    1   DCL 1 OPENERR_ERRCODE STATIC,
      195     5267    1         2 FCG BIT(18) UNAL INIT('110724'O),
      196     5268    1         2 ERR# UBIN(15) UNAL INIT(104),
      197     5269    1         2 SEV UBIN(3) UNAL INIT(0);
      198     5270    1   DCL CURDCTX UBIN WORD STATIC;
      199     5271    1   DCL DONE_SCS BIT(1);
      200     5272    1   DCL ALL_DONE BIT(1);
      201     5273    1   DCL MPCINDX UBIN WORD;
      202     5274    1   DCL TEMPINDX UBIN WORD;
      203     5275    1   DCL DEVNAME(0:32) CHAR(8);
      204     5276    1   DCL INDX UBIN WORD;
      205     5277    1   DCL DCTX UBIN WORD STATIC;
      206     5278    1   DCL MAXDCTX UBIN WORD STATIC;
      207     5279    1   DCL I SBIN WORD STATIC;
      208     5280    1   DCL J SBIN WORD STATIC;
      209     5281    1   DCL K SBIN WORD STATIC;
      210     5282    1   DCL IOM# CHAR(1);
      211     5283    1   DCL IOM_NAME CHAR(4);
      212     5284    1   DCL NUMMPCS UBIN WORD STATIC INIT(0);
      213     5285    1   DCL NUMDEVS UBIN WORD STATIC INIT(0);
      214     5286    1   DCL LEN UBIN WORD;
      215     5287    1   DCL FEPNAME CHAR(6);
      216     5288    1   DCL FEPNUM CHAR(3);
      217     5289    1   DCL MAX_FEP UBIN WORD STATIC INIT(0);
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:36   
      218     5290        /**/
      219     5291    1   DCL BUF BIT(36) STATIC INIT('0'B);
      220     5292    1   DCL LETBUF CHAR(26) CONSTANT INIT('ABCDEFGHIJKLMNOPQRSTUVWXYZ');
      221     5293    1   DCL HEXBUF CHAR(16) CONSTANT INIT('0123456789ABCDEF');
      222     5294    1   DCL FWREV_ADDR UBIN WORD;
      223     5295    1   DCL 1 MTBUF BASED ALIGNED,
      224     5296    1         2 * BIT(24) UNAL,
      225     5297    1         2 LETTER BIT(8) UNAL,
      226     5298    1         2 REV BIT(4) UNAL;
      227     5299    1   DCL 1 DPBUF BASED ALIGNED,
      228     5300    1         2 * BIT(28) UNAL,
      229     5301    1         2 REV BIT(4) UNAL,
      230     5302    1         2 LETTER BIT(4) UNAL;
      231     5303        /**/
      232     5304        /* These SUBs define the addresses in MPC memory where the FW revs live */
      233     5305        %SUB DP_FWREV_ADDR = '002371'O;
      234     5306        %SUB M610_FWREV_ADDR = '000532'O;
      235     5307        %SUB M601_FWREV_ADDR = '001032'O;
      236     5308        %SUB M500_FWREV_ADDR = '000352'O;
      237     5309        /**/
      238     5310    1   DCL OPC$ PTR STATIC INIT( ADDR(NIL) );
      239     5311    1   DCL 1 OPCPTR REDEF OPC$,
      240     5312    1       2 OFFSET UBIN(18) UNAL,
      241     5313    1       2 * BIT(6) UNAL,
      242     5314    1       2 SEGID BIT(12) UNAL;
      243     5315    1   DCL OPCLIST$(0:15) PTR STATIC INIT( ADDR(NIL) );
      244     5316    1   DCL OPC_FOUND BIT(1) STATIC INIT('0'B);
      245     5317    1   DCL OPCNAME CHAR(8);
      246     5318    1   DCL OPCNUM CHAR(2);
      247     5319    1   DCL FP_OPCI$$ PTR SYMREF;
      248     5320    1   DCL FP_MXOPC UBIN SYMREF;
      249     5321        %INCLUDE FP_MACRO_C;
      250     5593        %FP$OPCI (STCLASS=BASED);
      251     5603    1   DCL KI$FEI$(0:0) PTR BASED(KI_FEI$$);
      252     5604        /**/
      253     5605    1   DCL DEV$ PTR STATIC INIT(ADDR(DEVREC));
      254     5606    1   DCL HEAD$ PTR STATIC INIT(ADDR(HEADREC));
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:37   
      255     5607    1   DCL IOM$(0:3) PTR STATIC INIT(ADDR(IOMREC1),
      256     5608    1                                     ADDR(IOMREC2),
      257     5609    1                                     ADDR(IOMREC3),
      258     5610    1                                     ADDR(IOMREC4));
      259     5611    1   DCL 1 HEADKEY STATIC,
      260     5612    1         2 COUNT UBIN(9) UNAL INIT(1),
      261     5613    1         2 KEY UBIN(9) UNAL INIT(0);
      262     5614    1   DCL 1 WSNKEY STATIC,
      263     5615    1         2 COUNT UBIN(9) UNAL INIT(3),
      264     5616    1         2 TEXT CHAR(3) UNAL INIT('WSN');
      265     5617    1   DCL 1 IOMKEY(0:3) STATIC,
      266     5618    1         2 COUNT UBIN(9) UNAL INIT(4*0),
      267     5619    1         2 TEXT CHAR(4) UNAL INIT('IOM0','IOM1','IOM2','IOM3');
      268     5620    1   DCL 1 DEVKEY STATIC,
      269     5621    1         2 COUNT UBIN(9) UNAL INIT(8),
      270     5622    1         2 TEXT CHAR(8) UNAL;
      271     5623        /**/
      272     5624        %TD$IOM (NAME=IOMREC1,STCLASS=STATIC);
      273     5632        %TD$IOM (NAME=IOMREC2,STCLASS=STATIC);
      274     5640        %TD$IOM (NAME=IOMREC3,STCLASS=STATIC);
      275     5648        %TD$IOM (NAME=IOMREC4,STCLASS=STATIC);
      276     5656        /**/
      277     5657    1   DCL UCLIST(0:15) CHAR(8) UNAL INIT(' '*0) STATIC;
      278     5658    1   DCL DCLIST(0:15) CHAR(8) UNAL INIT(' '*0) STATIC;
      279     5659    1   DCL TCLIST(0:15) CHAR(8) UNAL INIT(' '*0) STATIC;
      280     5660    1   DCL LPLIST(0:63) CHAR(8) UNAL INIT(' '*0) STATIC;
      281     5661    1   DCL CRLIST(0:15) CHAR(8) UNAL INIT(' '*0) STATIC;
      282     5662    1   DCL CPLIST(0:15) CHAR(8) UNAL INIT(' '*0) STATIC;
      283     5663    1   DCL DPLIST(0:511) CHAR(8) UNAL INIT(' '*0) STATIC;
      284     5664    1   DCL MTLIST(0:63) CHAR(8) UNAL INIT(' '*0) STATIC;
      285     5665    1   DCL XXLIST(0:31) CHAR(8) UNAL INIT(' '*0) STATIC;
      286     5666    1   DCL SCLIST(0:15) CHAR(8) UNAL INIT(' '*0) STATIC;
      287     5667    1   DCL ACLIST(0:15) CHAR(8) UNAL INIT(' '*0) STATIC;
      288     5668    1   DCL APLIST(0:15) CHAR(8) UNAL INIT(' '*0) STATIC;
      289     5669    1   DCL OCLIST(0:15) CHAR(8) UNAL INIT(' '*0) STATIC;
      290     5670    1   DCL ODLIST(0:63) CHAR(8) UNAL INIT(' '*0) STATIC;
      291     5671        /**/
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:38   
      292     5672        %TD$HEAD (NAME=HEADREC,STCLASS=STATIC,NUMDEV#=200);
      293     5708        %TD$DEV (NAME=DEVREC,STCLASS=STATIC);
      294     5727        %TD$MPC (NAME=MPCREC,STCLASS=STATIC,NUMDEV#=32);
      295     5749        /**/
      296     5750        %TD$WSN (NAME=WSNREC,STCLASS=STATIC);
      297     5754        %EJECT;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:39   
      298     5755        /**/
      299     5756    1           IOMREC1 = NO;

   5756  5 000002   000000 100400                    MLR     fill='000'O
         5 000003   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         5 000004   000402 002044 1                  ADSC9   IOMREC1                  cn=0,n=1060

      300     5757    1           IOMREC2 = NO;

   5757  5 000005   000000 100400                    MLR     fill='000'O
         5 000006   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         5 000007   001013 002044 1                  ADSC9   IOMREC2                  cn=0,n=1060

      301     5758    1           IOMREC3 = NO;

   5758  5 000010   000000 100400                    MLR     fill='000'O
         5 000011   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         5 000012   001424 002044 1                  ADSC9   IOMREC3                  cn=0,n=1060

      302     5759    1           IOMREC4 = NO;

   5759  5 000013   000000 100400                    MLR     fill='000'O
         5 000014   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         5 000015   002035 002044 1                  ADSC9   IOMREC4                  cn=0,n=1060

      303     5760    1           DEVREC = NO;

   5760  5 000016   000000 100400                    MLR     fill='000'O
         5 000017   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         5 000020   006650 000054 1                  ADSC9   DEVREC                   cn=0,n=44

      304     5761    1           HEADREC = NO;

   5761  5 000021   000000 100400                    MLR     fill='000'O
         5 000022   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         5 000023   006006 003210 1                  ADSC9   HEADREC                  cn=0,n=1672

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:40   
      305     5762    1           WSNREC = NO;

   5762  5 000024   000000 100400                    MLR     fill='000'O
         5 000025   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         5 000026   007004 000040 1                  ADSC9   WSNREC                   cn=0,n=32

      306     5763        /**/
      307     5764    1           CALL M$OPEN (OPEN_FPT) ALTRET (IGT_ERR);

   5764  5 000027   000000 630400 1                  EPPR0   OPEN_FPT
         5 000030   450000 713400                    CLIMB   alt,open
         5 000031   410400 401760                    pmme    nvectors=18
         5 000032   002361 702000 5                  TSX2    IGT_ERR

      308     5765        /**/
      309     5766    1           TEMP$ = ADDR(NI_IOMS);

   5766  5 000033   000000 236000 6                  LDQ     0
         5 000034   000252 756000 1                  STQ     TEMP$

      310     5767    1           TEMPPTR.SEGID = %SPCL1SID;

   5767  5 000035   006021 236007                    LDQ     3089,DL
         5 000036   000252 752003 1                  STCQ    TEMP$,'03'O

      311     5768        /**/
      312     5769    1           HEAD$ -> TD$HEAD.NUMIOMS = TEMP$ -> B$TABLE(0);

   5769  5 000037   000252 470400 1                  LDP0    TEMP$
         5 000040   000000 720100                    LXL0    0,,PR0
         5 000041   000363 471400 1                  LDP1    HEAD$
         5 000042   100000 440100                    SXL0    0,,PR1

      313     5770        /**/
      314     5771    2           DO I = 0 TO HEAD$ -> TD$HEAD.NUMIOMS - 1;

   5771  5 000043   000331 450000 1                  STZ     I
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:41   
         5 000044   000065 710000 5                  TRA     s:5777+1

      315     5772    2              TEMP$ = ADDR(NI$IOM$(I));

   5772  5 000045   000331 720000 1                  LXL0    I
         5 000046   000000 630410 xsym               EPPR0   NI$IOM$,X0
         5 000047   000252 450400 1                  STP0    TEMP$

      316     5773    2              TEMPPTR.SEGID = %SPCL1SID;

   5773  5 000050   006021 236007                    LDQ     3089,DL
         5 000051   000252 752003 1                  STCQ    TEMP$,'03'O

      317     5774    2              TEMP$ = TEMP$ -> B$PTR(0);

   5774  5 000052   000252 470400 1                  LDP0    TEMP$
         5 000053   000000 236100                    LDQ     0,,PR0
         5 000054   000252 756000 1                  STQ     TEMP$

      318     5775    2              TEMPPTR.SEGID = %SPCL2SID;

   5775  5 000055   006022 236007                    LDQ     3090,DL
         5 000056   000252 752003 1                  STCQ    TEMP$,'03'O

      319     5776    2              IOM$(I) -> TD$IOM.PORT# = TEMP$ -> NI$IOM.ADDRESS;

   5776  5 000057   000364 470410 1                  LDP0    IOM$,X0
         5 000060   000252 471400 1                  LDP1    TEMP$
         5 000061   100003 236100                    LDQ     3,,PR1
         5 000062   000007 376007                    ANQ     7,DL
         5 000063   000410 756100                    STQ     264,,PR0

      320     5777    2              END;

   5777  5 000064   000331 054000 1                  AOS     I
         5 000065   000363 470400 1                  LDP0    HEAD$
         5 000066   000000 236100                    LDQ     0,,PR0
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:42   
         5 000067   777777 376007                    ANQ     -1,DL
         5 000070   000331 116000 1                  CMPQ    I
         5 000071   000045 605400 5                  TPNZ    s:5772

      321     5778        /**/
      322     5779    1           TEMP$ = ADDR(N$DCT$$);

   5779  5 000072   000001 236000 6                  LDQ     1
         5 000073   000252 756000 1                  STQ     TEMP$

      323     5780    1           TEMPPTR.SEGID = %SPCL1SID;

   5780  5 000074   006021 236007                    LDQ     3089,DL
         5 000075   000252 752003 1                  STCQ    TEMP$,'03'O

      324     5781    1           IG$DCT$$ = TEMP$ -> B$PTR(0);

   5781  5 000076   000252 471400 1                  LDP1    TEMP$
         5 000077   100000 236100                    LDQ     0,,PR1
         5 000100   000242 756000 1                  STQ     IG$DCT$$

      325     5782    1           IG$DCT$PTR.SEGID = %SPCL2SID;

   5782  5 000101   006022 236007                    LDQ     3090,DL
         5 000102   000242 752003 1                  STCQ    IG$DCT$$,'03'O

      326     5783        /**/
      327     5784    1           IG$DVT$ = ADDR(NI$DVT$(0));

   5784  5 000103   000002 236000 6                  LDQ     2
         5 000104   000244 756000 1                  STQ     IG$DVT$

      328     5785    1           IG$DVTPTR.SEGID = %SPCL1SID;

   5785  5 000105   006021 236007                    LDQ     3089,DL
         5 000106   000244 752003 1                  STCQ    IG$DVT$,'03'O

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:43   
      329     5786        /**/
      330     5787    1           TEMP$ = ADDR(KI_MXFE);

   5787  5 000107   000003 236000 6                  LDQ     3
         5 000110   000252 756000 1                  STQ     TEMP$

      331     5788    1           TEMPPTR.SEGID = %SPCL1SID;

   5788  5 000111   006021 236007                    LDQ     3089,DL
         5 000112   000252 752003 1                  STCQ    TEMP$,'03'O

      332     5789    1           MAX_FEP = TEMP$ -> B$TABLE(0);

   5789  5 000113   000252 471400 1                  LDP1    TEMP$
         5 000114   100000 235100                    LDA     0,,PR1
         5 000115   000336 755000 1                  STA     MAX_FEP

      333     5790    1           TEMP$ = ADDR(NI$CHT$);

   5790  5 000116   000004 236000 6                  LDQ     4
         5 000117   000252 756000 1                  STQ     TEMP$

      334     5791    1           TEMPPTR.SEGID = %SPCL1SID;

   5791  5 000120   006021 236007                    LDQ     3089,DL
         5 000121   000252 752003 1                  STCQ    TEMP$,'03'O

      335     5792    1           CHT$ = TEMP$->B$PTR(0);

   5792  5 000122   000252 471400 1                  LDP1    TEMP$
         5 000123   100000 236100                    LDQ     0,,PR1
         5 000124   000253 756000 1                  STQ     CHT$

      336     5793    1           CHTPTR.SEGID = %SPCL2SID;

   5793  5 000125   006022 236007                    LDQ     3090,DL
         5 000126   000253 752003 1                  STCQ    CHT$,'03'O
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:44   

      337     5794        /**/
      338     5795        /**/
      339     5796    1           TEMP$ = ADDR(IT_WSN);

   5796  5 000127   000005 236000 6                  LDQ     5
         5 000130   000252 756000 1                  STQ     TEMP$

      340     5797    1           TEMPPTR.SEGID = %SPCL1SID;

   5797  5 000131   006021 236007                    LDQ     3089,DL
         5 000132   000252 752003 1                  STCQ    TEMP$,'03'O

      341     5798    1           WSNREC = TEMP$ -> TD$WSN;

   5798  5 000133   000252 471400 1                  LDP1    TEMP$
         5 000134   000000 100500                    MLR     fill='000'O
         5 000135   100000 000040                    ADSC9   0,,PR1                   cn=0,n=32
         5 000136   007004 000040 1                  ADSC9   WSNREC                   cn=0,n=32

      342     5799        /**/
      343     5800    1           TEMP$ = ADDR(NK_MXLOCAL);

   5800  5 000137   000006 236000 6                  LDQ     6
         5 000140   000252 756000 1                  STQ     TEMP$

      344     5801    1           TEMPPTR.SEGID = %SPCL1SID;

   5801  5 000141   006021 236007                    LDQ     3089,DL
         5 000142   000252 752003 1                  STCQ    TEMP$,'03'O

      345     5802    1           MAXDCTX = TEMP$ -> B$TABLE(0);

   5802  5 000143   000252 471400 1                  LDP1    TEMP$
         5 000144   100000 235100                    LDA     0,,PR1
         5 000145   000330 755000 1                  STA     MAXDCTX

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:45   
      346     5803        /**/
      347     5804                                                /* First loook for any SCs            */
      348     5805    1        CURDCTX = 0;

   5805  5 000146   000326 450000 1                  STZ     CURDCTX

      349     5806    1        DONE_SCS = %FALSE;

   5806  5 000147   200003 450100                    STZ     DONE_SCS,,AUTO

      350     5807    2        DO UNTIL(DONE_SCS);                /* Look for SCs first                 */

      351     5808    3           DO UNTIL (SUBSTR(NI$DCT.DEVNM,0,2) = 'SC' OR CURDCTX > MAXDCTX);

      352     5809    3              CURDCTX = CURDCTX + 1;

   5809  5 000150   000326 235000 1                  LDA     CURDCTX
         5 000151   000001 035007                    ADLA    1,DL
         5 000152   000326 755000 1                  STA     CURDCTX

      353     5810    3              DCT$ = IG$DCT$$->N$DCT$(CURDCTX);

   5810  5 000153   000242 470400 1                  LDP0    IG$DCT$$
         5 000154   000000 236105                    LDQ     0,AL,PR0
         5 000155   000245 756000 1                  STQ     DCT$

      354     5811    3              DCTPTR.SEGID = %SPCL2SID;

   5811  5 000156   006022 236007                    LDQ     3090,DL
         5 000157   000245 752003 1                  STCQ    DCT$,'03'O

      355     5812    3           END;                            /* DO UNTIL                           */

   5812  5 000160   000245 471400 1                  LDP1    DCT$
         5 000161   100002 220100                    LDX0    2,,PR1
         5 000162   000013 100000 4                  CMPX0   HEXBUF+4
         5 000163   000167 600000 5                  TZE     s:5813
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:46   
         5 000164   000330 236000 1                  LDQ     MAXDCTX
         5 000165   000326 116000 1                  CMPQ    CURDCTX
         5 000166   000150 603000 5                  TRC     s:5809

      356     5813    2           IF CURDCTX > MAXDCTX

   5813  5 000167   000330 236000 1                  LDQ     MAXDCTX
         5 000170   000326 116000 1                  CMPQ    CURDCTX
         5 000171   000175 603000 5                  TRC     s:5817

      357     5814    2              THEN DONE_SCS = %TRUE;

   5814  5 000172   400000 236003                    LDQ     -131072,DU
         5 000173   200003 756100                    STQ     DONE_SCS,,AUTO
         5 000174   000304 710000 5                  TRA     s:5835

      358     5815    2              ELSE                         /* Build an SC record                 */
      359     5816    3              DO;

      360     5817    3                 DEVKEY.TEXT = NI$DCT.DEVNM;

   5817  5 000175   040000 100500                    MLR     fill='040'O
         5 000176   100002 000010                    ADSC9   2,,PR1                   cn=0,n=8
         5 000177   000377 200010 1                  ADSC9   DEVKEY                   cn=1,n=8

      361     5818    3                 SCLIST(HEAD$ -> TD$HEAD.NUMCONSOLES) = DEVKEY.TEXT;

   5818  5 000200   000363 473400 1                  LDP3    HEAD$
         5 000201   300007 720100                    LXL0    7,,PR3
         5 000202   000000 635010                    EAA     0,X0
         5 000203   000021 771000                    ARL     17
         5 000204   000002 735000                    ALS     2
         5 000205   040005 100400                    MLR     fill='040'O
         5 000206   000377 200010 1                  ADSC9   DEVKEY                   cn=1,n=8
         5 000207   005406 000010 1                  ADSC9   SCLIST,A                 cn=0,n=8

      362     5819    3                 HEAD$ -> TD$HEAD.NUMCONSOLES = HEAD$ -> TD$HEAD.NUMCONSOLES + 1;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:47   

   5819  5 000210   000001 621010                    EAX1    1,X0
         5 000211   300007 441100                    SXL1    7,,PR3

      363     5820    3                 DEVREC = '0'B;

   5820  5 000212   000000 100400                    MLR     fill='000'O
         5 000213   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         5 000214   006650 000054 1                  ADSC9   DEVREC                   cn=0,n=44

      364     5821    3                 DEVREC.FLAGS.DOWN = NI$DCT.STATUS.DOWN;

   5821  5 000215   100027 236100                    LDQ     23,,PR1
         5 000216   006661 676000 1                  ERQ     DEVREC+9
         5 000217   400000 376003                    ANQ     -131072,DU
         5 000220   006661 656000 1                  ERSQ    DEVREC+9

      365     5822    3                 DVT$ = NI$DCT.DVT$;

   5822  5 000221   100024 236100                    LDQ     20,,PR1
         5 000222   000246 756000 1                  STQ     DVT$

      366     5823    3                 DVTPTR.SEGID = %SPCL5SID;

   5823  5 000223   006026 236007                    LDQ     3094,DL
         5 000224   000246 752003 1                  STCQ    DVT$,'03'O

      367     5824    3                 DEVREC.MODEL = NI$DVT.MODEL(NI$DCT.MODX);

   5824  5 000225   100007 236100                    LDQ     7,,PR1
         5 000226   000021 772000                    QRL     17
         5 000227   000176 376007                    ANQ     126,DL
         5 000230   000002 736000                    QLS     2
         5 000231   000246 474400 1                  LDP4    DVT$
         5 000232   040000 100506                    MLR     fill='040'O
         5 000233   400003 000010                    ADSC9   3,Q,PR4                  cn=0,n=8
         5 000234   006650 000010 1                  ADSC9   DEVREC                   cn=0,n=8
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:48   

      368     5825    3                 DEVREC.FEATURE = NI$DVT.FEATURE(NI$DCT.FX);

   5825  5 000235   100007 236100                    LDQ     7,,PR1
         5 000236   000013 772000                    QRL     11
         5 000237   000176 376007                    ANQ     126,DL
         5 000240   000002 736000                    QLS     2
         5 000241   040000 100506                    MLR     fill='040'O
         5 000242   400027 000010                    ADSC9   23,Q,PR4                 cn=0,n=8
         5 000243   006652 000010 1                  ADSC9   DEVREC+2                 cn=0,n=8

      369     5826    3                 DQH$ = NI$DCT.DQH$;

   5826  5 000244   100023 236100                    LDQ     19,,PR1
         5 000245   000251 756000 1                  STQ     DQH$

      370     5827    3                 DQHPTR.SEGID = %SPCL2SID;

   5827  5 000246   006022 236007                    LDQ     3090,DL
         5 000247   000251 752003 1                  STCQ    DQH$,'03'O

      371     5828    3                 IOM$(NI$DQH.IOCHAN.IOM) -> TD$IOM.DEVNAME(NI$DQH.IOCHAN.CHANNEL) =
              5828                          DEVKEY.TEXT;

   5828  5 000250   000251 475400 1                  LDP5    DQH$
         5 000251   500001 236100                    LDQ     1,,PR5
         5 000252   000031 772000                    QRL     25
         5 000253   000003 376007                    ANQ     3,DL
         5 000254   000364 476406 1                  LDP6    IOM$,QL
         5 000255   500001 236100                    LDQ     1,,PR5
         5 000256   000021 772000                    QRL     17
         5 000257   000376 376007                    ANQ     254,DL
         5 000260   000002 736000                    QLS     2
         5 000261   040106 100400                    MLR     fill='040'O
         5 000262   000377 200010 1                  ADSC9   DEVKEY                   cn=1,n=8
         5 000263   600000 000010                    ADSC9   0,Q,PR6                  cn=0,n=8

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:49   
      372     5829    3                 DEVREC.IOCHAN.IOM = NI$DQH.IOCHAN.IOM;

   5829  5 000264   500001 236100                    LDQ     1,,PR5
         5 000265   000600 376003                    ANQ     384,DU
         5 000266   000007 772000                    QRL     7
         5 000267   006660 552020 1                  STBQ    DEVREC+8,'20'O

      373     5830    3                 DEVREC.IOCHAN.CHAN = NI$DQH.IOCHAN.CHANNEL;

   5830  5 000270   500001 236100                    LDQ     1,,PR5
         5 000271   000177 376003                    ANQ     127,DU
         5 000272   000011 772000                    QRL     9
         5 000273   006660 552010 1                  STBQ    DEVREC+8,'10'O

      374     5831    3                 WRITE_FPT.KEY_ = VECTOR(DEVKEY);

   5831  5 000274   000010 237000 6                  LDAQ    8
         5 000275   000132 757000 1                  STAQ    WRITE_FPT+2

      375     5832    3                 WRITE_FPT.BUF_ = VECTOR(DEVREC);

   5832  5 000276   000012 237000 6                  LDAQ    10
         5 000277   000134 757000 1                  STAQ    WRITE_FPT+4

      376     5833    3                 CALL M$WRITE(WRITE_FPT) ALTRET(IGT_ERR);

   5833  5 000300   000130 630400 1                  EPPR0   WRITE_FPT
         5 000301   440001 713400                    CLIMB   alt,write
         5 000302   401400 401760                    pmme    nvectors=4
         5 000303   002361 702000 5                  TSX2    IGT_ERR

      377     5834    3              END;                         /* IF NOT DONE                        */

      378     5835    2        END;                               /* DO UNTIL done SCs                  */

   5835  5 000304   200003 234100                    SZN     DONE_SCS,,AUTO
         5 000305   000150 605000 5                  TPL     s:5809
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:50   

      379     5836
      380     5837    1        ALL_DONE = %FALSE;

   5837  5 000306   200004 450100                    STZ     ALL_DONE,,AUTO

      381     5838    1        CURDCTX = 0;

   5838  5 000307   000326 450000 1                  STZ     CURDCTX

      382     5839    2        DO UNTIL(ALL_DONE);

      383     5840    3           DO UNTIL((SUBSTR(NI$DCT.DEVNM,0,2) = 'UC' OR

      384     5841    3                    SUBSTR(NI$DCT.DEVNM,0,2) = 'TC' OR
      385     5842    3                    SUBSTR(NI$DCT.DEVNM,0,2) = 'AC' OR
      386     5843    3                    SUBSTR(NI$DCT.DEVNM,0,2) = 'DC') OR CURDCTX > MAXDCTX);
      387     5844    3              CURDCTX = CURDCTX + 1;

   5844  5 000310   000326 235000 1                  LDA     CURDCTX
         5 000311   000001 035007                    ADLA    1,DL
         5 000312   000326 755000 1                  STA     CURDCTX

      388     5845    3              DCT$ = IG$DCT$$->N$DCT$(CURDCTX);

   5845  5 000313   000242 470400 1                  LDP0    IG$DCT$$
         5 000314   000000 236105                    LDQ     0,AL,PR0
         5 000315   000245 756000 1                  STQ     DCT$

      389     5846    3              DCTPTR.SEGID = %SPCL2SID;

   5846  5 000316   006022 236007                    LDQ     3090,DL
         5 000317   000245 752003 1                  STCQ    DCT$,'03'O

      390     5847    3           END;                            /* DO UNTIL                           */

   5847  5 000320   000245 471400 1                  LDP1    DCT$
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:51   
         5 000321   100002 220100                    LDX0    2,,PR1
         5 000322   000014 100000 4                  CMPX0   HEXBUF+5
         5 000323   000335 600000 5                  TZE     s:5848
         5 000324   000015 100000 4                  CMPX0   HEXBUF+6
         5 000325   000335 600000 5                  TZE     s:5848
         5 000326   000016 100000 4                  CMPX0   HEXBUF+7
         5 000327   000335 600000 5                  TZE     s:5848
         5 000330   000017 100000 4                  CMPX0   HEXBUF+8
         5 000331   000335 600000 5                  TZE     s:5848
         5 000332   000330 236000 1                  LDQ     MAXDCTX
         5 000333   000326 116000 1                  CMPQ    CURDCTX
         5 000334   000310 603000 5                  TRC     s:5844

      391     5848    2           IF CURDCTX > MAXDCTX

   5848  5 000335   000330 236000 1                  LDQ     MAXDCTX
         5 000336   000326 116000 1                  CMPQ    CURDCTX
         5 000337   000343 603000 5                  TRC     s:5852

      392     5849    2              THEN ALL_DONE = %TRUE;

   5849  5 000340   400000 236003                    LDQ     -131072,DU
         5 000341   200004 756100                    STQ     ALL_DONE,,AUTO
         5 000342   001417 710000 5                  TRA     s:6028

      393     5850    2              ELSE                         /* GOT AN MPC                         */
      394     5851    3              DO;

      395     5852    3                 MPCINDX = CURDCTX;

   5852  5 000343   000326 235000 1                  LDA     CURDCTX
         5 000344   200005 755100                    STA     MPCINDX,,AUTO

      396     5853    4                 DO CASE(NI$DCT.MPC.TYPE);

   5853  5 000345   100035 236100                    LDQ     29,,PR1
         5 000346   000033 772000                    QRL     27
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:52   
         5 000347   000011 116007                    CMPQ    9,DL
         5 000350   000352 602006 5                  TNC     s:5853+5,QL
         5 000351   000436 710000 5                  TRA     s:5867
         5 000352   000436 710000 5                  TRA     s:5867
         5 000353   000436 710000 5                  TRA     s:5867
         5 000354   000436 710000 5                  TRA     s:5867
         5 000355   000376 710000 5                  TRA     s:5858
         5 000356   000424 710000 5                  TRA     s:5864
         5 000357   000436 710000 5                  TRA     s:5867
         5 000360   000411 710000 5                  TRA     s:5861
         5 000361   000436 710000 5                  TRA     s:5867
         5 000362   000363 710000 5                  TRA     s:5855

      397     5854    4                    CASE(%DV_AP);          /* AC                                 */

      398     5855    4                       ACLIST(HEAD$ -> TD$HEAD.NUMAPMPCS) = NI$DCT.DEVNM;

   5855  5 000363   000363 473400 1                  LDP3    HEAD$
         5 000364   300004 721100                    LXL1    4,,PR3
         5 000365   000000 635011                    EAA     0,X1
         5 000366   000021 771000                    ARL     17
         5 000367   000002 735000                    ALS     2
         5 000370   040005 100500                    MLR     fill='040'O
         5 000371   100002 000010                    ADSC9   2,,PR1                   cn=0,n=8
         5 000372   005446 000010 1                  ADSC9   ACLIST,A                 cn=0,n=8

      399     5856    4                       HEAD$ -> TD$HEAD.NUMAPMPCS = HEAD$ -> TD$HEAD.NUMAPMPCS + 1;

   5856  5 000373   000001 622011                    EAX2    1,X1
         5 000374   300004 442100                    SXL2    4,,PR3
         5 000375   000436 710000 5                  TRA     s:5867

      400     5857    4                    CASE(%DV_LP);          /* UC                                 */

      401     5858    4                       UCLIST(HEAD$ -> TD$HEAD.NUMUNITMPCS) = NI$DCT.DEVNM;

   5858  5 000376   000363 473400 1                  LDP3    HEAD$
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:53   
         5 000377   300001 721100                    LXL1    1,,PR3
         5 000400   000000 635011                    EAA     0,X1
         5 000401   000021 771000                    ARL     17
         5 000402   000002 735000                    ALS     2
         5 000403   040005 100500                    MLR     fill='040'O
         5 000404   100002 000010                    ADSC9   2,,PR1                   cn=0,n=8
         5 000405   002446 000010 1                  ADSC9   UCLIST,A                 cn=0,n=8

      402     5859    4                      HEAD$ -> TD$HEAD.NUMUNITMPCS = HEAD$ -> TD$HEAD.NUMUNITMPCS + 1;

   5859  5 000406   000001 622011                    EAX2    1,X1
         5 000407   300001 442100                    SXL2    1,,PR3
         5 000410   000436 710000 5                  TRA     s:5867

      403     5860    4                    CASE(%DV_DP);          /* DC                                 */

      404     5861    4                       DCLIST(HEAD$ -> TD$HEAD.NUMDISKMPCS) = NI$DCT.DEVNM;

   5861  5 000411   000363 473400 1                  LDP3    HEAD$
         5 000412   300003 721100                    LXL1    3,,PR3
         5 000413   000000 635011                    EAA     0,X1
         5 000414   000021 771000                    ARL     17
         5 000415   000002 735000                    ALS     2
         5 000416   040005 100500                    MLR     fill='040'O
         5 000417   100002 000010                    ADSC9   2,,PR1                   cn=0,n=8
         5 000420   002506 000010 1                  ADSC9   DCLIST,A                 cn=0,n=8

      405     5862    4                      HEAD$ -> TD$HEAD.NUMDISKMPCS = HEAD$ -> TD$HEAD.NUMDISKMPCS + 1;

   5862  5 000421   000001 622011                    EAX2    1,X1
         5 000422   300003 442100                    SXL2    3,,PR3
         5 000423   000436 710000 5                  TRA     s:5867

      406     5863    4                    CASE(%DV_MT);          /* TC                                 */

      407     5864    4                       TCLIST(HEAD$ -> TD$HEAD.NUMTAPEMPCS) = NI$DCT.DEVNM;

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:54   
   5864  5 000424   000363 473400 1                  LDP3    HEAD$
         5 000425   300002 721100                    LXL1    2,,PR3
         5 000426   000000 635011                    EAA     0,X1
         5 000427   000021 771000                    ARL     17
         5 000430   000002 735000                    ALS     2
         5 000431   040005 100500                    MLR     fill='040'O
         5 000432   100002 000010                    ADSC9   2,,PR1                   cn=0,n=8
         5 000433   002546 000010 1                  ADSC9   TCLIST,A                 cn=0,n=8

      408     5865    4                      HEAD$ -> TD$HEAD.NUMTAPEMPCS = HEAD$ -> TD$HEAD.NUMTAPEMPCS + 1;

   5865  5 000434   000001 622011                    EAX2    1,X1
         5 000435   300002 442100                    SXL2    2,,PR3

      409     5866    4                 END;                      /* DO CASE                            */

      410     5867    3                 NUMDEVS = 0;

   5867  5 000436   000335 450000 1                  STZ     NUMDEVS

      411     5868    3                 DEVNAME = '0'B;

   5868  5 000437   000100 100400                    MLR     fill='000'O
         5 000440   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         5 000441   200007 000410                    ADSC9   DEVNAME,,AUTO            cn=0,n=264

      412     5869    3                 TEMP$ = IG$DCT$$->N$DCT$(CURDCTX + 1);

   5869  5 000442   000326 720000 1                  LXL0    CURDCTX
         5 000443   000001 236110                    LDQ     1,X0,PR0
         5 000444   000252 756000 1                  STQ     TEMP$

      413     5870    3                 TEMPPTR.SEGID = %SPCL2SID;

   5870  5 000445   006022 236007                    LDQ     3090,DL
         5 000446   000252 752003 1                  STCQ    TEMP$,'03'O

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:55   
      414     5871    3                 IF SUBSTR(DCT$->NI$DCT.DEVNM,0,2) = SUBSTR(TEMP$->NI$DCT.DEVNM,0,2)

   5871  5 000447   100002 221100                    LDX1    2,,PR1
         5 000450   000252 473400 1                  LDP3    TEMP$
         5 000451   300002 101100                    CMPX1   2,,PR3
         5 000452   000552 601000 5                  TNZ     s:5891

      415     5872    3                    THEN                   /* TWO MPCS                           */
      416     5873    4                    DO;

      417     5874    4                       NUMMPCS = 2;

   5874  5 000453   000002 235007                    LDA     2,DL
         5 000454   000334 755000 1                  STA     NUMMPCS

      418     5875    4                       CURDCTX = CURDCTX + 1;

   5875  5 000455   000326 235000 1                  LDA     CURDCTX
         5 000456   000001 035007                    ADLA    1,DL
         5 000457   000326 755000 1                  STA     CURDCTX

      419     5876    5                       DO CASE(NI$DCT.MPC.TYPE);

   5876  5 000460   100035 236100                    LDQ     29,,PR1
         5 000461   000033 772000                    QRL     27
         5 000462   000011 116007                    CMPQ    9,DL
         5 000463   000465 602006 5                  TNC     s:5876+5,QL
         5 000464   000554 710000 5                  TRA     s:5892
         5 000465   000551 710000 5                  TRA     s:5890
         5 000466   000551 710000 5                  TRA     s:5890
         5 000467   000551 710000 5                  TRA     s:5890
         5 000470   000537 710000 5                  TRA     s:5887
         5 000471   000524 710000 5                  TRA     s:5884
         5 000472   000551 710000 5                  TRA     s:5890
         5 000473   000511 710000 5                  TRA     s:5881
         5 000474   000551 710000 5                  TRA     s:5890
         5 000475   000476 710000 5                  TRA     s:5878
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:56   

      420     5877    5                          CASE(%DV_AP);

      421     5878    5                             ACLIST(HEAD$->TD$HEAD.NUMAPMPCS) = TEMP$->NI$DCT.DEVNM;

   5878  5 000476   000363 474400 1                  LDP4    HEAD$
         5 000477   400004 720100                    LXL0    4,,PR4
         5 000500   000000 635010                    EAA     0,X0
         5 000501   000021 771000                    ARL     17
         5 000502   000002 735000                    ALS     2
         5 000503   040005 100500                    MLR     fill='040'O
         5 000504   300002 000010                    ADSC9   2,,PR3                   cn=0,n=8
         5 000505   005446 000010 1                  ADSC9   ACLIST,A                 cn=0,n=8

      422     5879    5                             HEAD$->TD$HEAD.NUMAPMPCS = HEAD$->TD$HEAD.NUMAPMPCS + 1;

   5879  5 000506   000001 622010                    EAX2    1,X0
         5 000507   400004 442100                    SXL2    4,,PR4
         5 000510   000554 710000 5                  TRA     s:5892

      423     5880    5                          CASE(%DV_DP);

      424     5881    5                             DCLIST(HEAD$->TD$HEAD.NUMDISKMPCS) = TEMP$->NI$DCT.DEVNM;

   5881  5 000511   000363 474400 1                  LDP4    HEAD$
         5 000512   400003 720100                    LXL0    3,,PR4
         5 000513   000000 635010                    EAA     0,X0
         5 000514   000021 771000                    ARL     17
         5 000515   000002 735000                    ALS     2
         5 000516   040005 100500                    MLR     fill='040'O
         5 000517   300002 000010                    ADSC9   2,,PR3                   cn=0,n=8
         5 000520   002506 000010 1                  ADSC9   DCLIST,A                 cn=0,n=8

      425     5882    5                             HEAD$->TD$HEAD.NUMDISKMPCS = HEAD$->TD$HEAD.NUMDISKMPCS +
              5882                                      1;

   5882  5 000521   000001 622010                    EAX2    1,X0
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:57   
         5 000522   400003 442100                    SXL2    3,,PR4
         5 000523   000554 710000 5                  TRA     s:5892

      426     5883    5                          CASE(%DV_MT);

      427     5884    5                             TCLIST(HEAD$->TD$HEAD.NUMTAPEMPCS) = TEMP$->NI$DCT.DEVNM;

   5884  5 000524   000363 474400 1                  LDP4    HEAD$
         5 000525   400002 720100                    LXL0    2,,PR4
         5 000526   000000 635010                    EAA     0,X0
         5 000527   000021 771000                    ARL     17
         5 000530   000002 735000                    ALS     2
         5 000531   040005 100500                    MLR     fill='040'O
         5 000532   300002 000010                    ADSC9   2,,PR3                   cn=0,n=8
         5 000533   002546 000010 1                  ADSC9   TCLIST,A                 cn=0,n=8

      428     5885    5                             HEAD$->TD$HEAD.NUMTAPEMPCS = HEAD$->TD$HEAD.NUMTAPEMPCS +
              5885                                      1;

   5885  5 000534   000001 622010                    EAX2    1,X0
         5 000535   400002 442100                    SXL2    2,,PR4
         5 000536   000554 710000 5                  TRA     s:5892

      429     5886    5                          CASE(%DV_LP);

      430     5887    5                             UCLIST(HEAD$->TD$HEAD.NUMUNITMPCS) = TEMP$->NI$DCT.DEVNM;

   5887  5 000537   000363 474400 1                  LDP4    HEAD$
         5 000540   400001 720100                    LXL0    1,,PR4
         5 000541   000000 635010                    EAA     0,X0
         5 000542   000021 771000                    ARL     17
         5 000543   000002 735000                    ALS     2
         5 000544   040005 100500                    MLR     fill='040'O
         5 000545   300002 000010                    ADSC9   2,,PR3                   cn=0,n=8
         5 000546   002446 000010 1                  ADSC9   UCLIST,A                 cn=0,n=8

      431     5888    5                             HEAD$->TD$HEAD.NUMUNITMPCS = HEAD$->TD$HEAD.NUMUNITMPCS +
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:58   
              5888                                      1;

   5888  5 000547   000001 622010                    EAX2    1,X0
         5 000550   400001 442100                    SXL2    1,,PR4

      432     5889    5                          END;  /* DO CASE NI$DCT.MPC.TYPE */

      433     5890    4                    END;                   /* IF                                 */

   5890  5 000551   000554 710000 5                  TRA     s:5892

      434     5891    3                    ELSE NUMMPCS = 1;

   5891  5 000552   000001 235007                    LDA     1,DL
         5 000553   000334 755000 1                  STA     NUMMPCS

      435     5892    3                 CURDCTX = CURDCTX + 1;

   5892  5 000554   000326 235000 1                  LDA     CURDCTX
         5 000555   000001 035007                    ADLA    1,DL
         5 000556   000326 755000 1                  STA     CURDCTX

      436     5893    3                 DCT$ = IG$DCT$$->N$DCT$(CURDCTX);

   5893  5 000557   000000 236105                    LDQ     0,AL,PR0
         5 000560   000245 756000 1                  STQ     DCT$

      437     5894    3                 DCTPTR.SEGID = %SPCL2SID;

   5894  5 000561   006022 236007                    LDQ     3090,DL
         5 000562   000245 752003 1                  STCQ    DCT$,'03'O

      438     5895    4                 DO WHILE((SUBSTR(NI$DCT.DEVNM,0,2) ~= 'DC' AND

   5895  5 000563   000733 710000 5                  TRA     s:5934

      439     5896    4                          SUBSTR(NI$DCT.DEVNM,0,2) ~= 'AC' AND
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:59   
      440     5897    4                          SUBSTR(NI$DCT.DEVNM,0,2) ~= 'OD' AND
      441     5898    4                          SUBSTR(NI$DCT.DEVNM,0,2) ~= 'UC' AND
      442     5899    4                          SUBSTR(NI$DCT.DEVNM,0,2) ~= 'TC' AND
      443     5900    4                          SUBSTR(NI$DCT.DEVNM,0,2) ~= 'SC') AND CURDCTX <= MAXDCTX);
      444     5901    4                    DEVKEY.TEXT = NI$DCT.DEVNM;

   5901  5 000564   000245 470400 1                  LDP0    DCT$
         5 000565   040000 100500                    MLR     fill='040'O
         5 000566   000002 000010                    ADSC9   2,,PR0                   cn=0,n=8
         5 000567   000377 200010 1                  ADSC9   DEVKEY                   cn=1,n=8

      445     5902    4                    DEVNAME(NUMDEVS) = DEVKEY.TEXT;

   5902  5 000570   000335 235000 1                  LDA     NUMDEVS
         5 000571   000001 735000                    ALS     1
         5 000572   000002 735000                    ALS     2
         5 000573   040105 100400                    MLR     fill='040'O
         5 000574   000377 200010 1                  ADSC9   DEVKEY                   cn=1,n=8
         5 000575   200007 000010                    ADSC9   DEVNAME,A,AUTO           cn=0,n=8

      446     5903    4                    NUMDEVS = NUMDEVS + 1;

   5903  5 000576   000335 235000 1                  LDA     NUMDEVS
         5 000577   000001 035007                    ADLA    1,DL
         5 000600   000335 755000 1                  STA     NUMDEVS

      447     5904    5                    DO CASE(NI$DCT.TYPE);

   5904  5 000601   000007 236100                    LDQ     7,,PR0
         5 000602   000006 772000                    QRL     6
         5 000603   000077 376007                    ANQ     63,DL
         5 000604   000011 116007                    CMPQ    9,DL
         5 000605   000607 602006 5                  TNC     s:5904+6,QL
         5 000606   000721 710000 5                  TRA     s:5929
         5 000607   000721 710000 5                  TRA     s:5929
         5 000610   000646 710000 5                  TRA     s:5912
         5 000611   000661 710000 5                  TRA     s:5915
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:60   
         5 000612   000633 710000 5                  TRA     s:5909
         5 000613   000707 710000 5                  TRA     s:5921
         5 000614   000721 710000 5                  TRA     s:5929
         5 000615   000674 710000 5                  TRA     s:5918
         5 000616   000721 710000 5                  TRA     s:5929
         5 000617   000620 710000 5                  TRA     s:5906

      448     5905    5                       CASE(%DV_AP);

      449     5906    5                          APLIST(HEAD$ -> TD$HEAD.NUMAPS) = DEVKEY.TEXT;

   5906  5 000620   000363 471400 1                  LDP1    HEAD$
         5 000621   100016 720100                    LXL0    14,,PR1
         5 000622   000000 635010                    EAA     0,X0
         5 000623   000021 771000                    ARL     17
         5 000624   000002 735000                    ALS     2
         5 000625   040005 100400                    MLR     fill='040'O
         5 000626   000377 200010 1                  ADSC9   DEVKEY                   cn=1,n=8
         5 000627   005506 000010 1                  ADSC9   APLIST,A                 cn=0,n=8

      450     5907    5                          HEAD$ -> TD$HEAD.NUMAPS = HEAD$ -> TD$HEAD.NUMAPS + 1;

   5907  5 000630   000001 621010                    EAX1    1,X0
         5 000631   100016 441100                    SXL1    14,,PR1
         5 000632   000721 710000 5                  TRA     s:5929

      451     5908    5                       CASE(%DV_LP);

      452     5909    5                          LPLIST(HEAD$ -> TD$HEAD.NUMLPS) = DEVKEY.TEXT;

   5909  5 000633   000363 471400 1                  LDP1    HEAD$
         5 000634   100010 720100                    LXL0    8,,PR1
         5 000635   000000 635010                    EAA     0,X0
         5 000636   000021 771000                    ARL     17
         5 000637   000002 735000                    ALS     2
         5 000640   040005 100400                    MLR     fill='040'O
         5 000641   000377 200010 1                  ADSC9   DEVKEY                   cn=1,n=8
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:61   
         5 000642   002606 000010 1                  ADSC9   LPLIST,A                 cn=0,n=8

      453     5910    5                          HEAD$ -> TD$HEAD.NUMLPS = HEAD$ -> TD$HEAD.NUMLPS + 1;

   5910  5 000643   000001 621010                    EAX1    1,X0
         5 000644   100010 441100                    SXL1    8,,PR1
         5 000645   000721 710000 5                  TRA     s:5929

      454     5911    5                       CASE(%DV_CR);

      455     5912    5                          CRLIST(HEAD$ -> TD$HEAD.NUMCRS) = DEVKEY.TEXT;

   5912  5 000646   000363 471400 1                  LDP1    HEAD$
         5 000647   100011 720100                    LXL0    9,,PR1
         5 000650   000000 635010                    EAA     0,X0
         5 000651   000021 771000                    ARL     17
         5 000652   000002 735000                    ALS     2
         5 000653   040005 100400                    MLR     fill='040'O
         5 000654   000377 200010 1                  ADSC9   DEVKEY                   cn=1,n=8
         5 000655   003006 000010 1                  ADSC9   CRLIST,A                 cn=0,n=8

      456     5913    5                          HEAD$ -> TD$HEAD.NUMCRS = HEAD$ -> TD$HEAD.NUMCRS + 1;

   5913  5 000656   000001 621010                    EAX1    1,X0
         5 000657   100011 441100                    SXL1    9,,PR1
         5 000660   000721 710000 5                  TRA     s:5929

      457     5914    5                       CASE(%DV_CP);

      458     5915    5                          CPLIST(HEAD$ -> TD$HEAD.NUMCPS) = DEVKEY.TEXT;

   5915  5 000661   000363 471400 1                  LDP1    HEAD$
         5 000662   100012 720100                    LXL0    10,,PR1
         5 000663   000000 635010                    EAA     0,X0
         5 000664   000021 771000                    ARL     17
         5 000665   000002 735000                    ALS     2
         5 000666   040005 100400                    MLR     fill='040'O
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:62   
         5 000667   000377 200010 1                  ADSC9   DEVKEY                   cn=1,n=8
         5 000670   003046 000010 1                  ADSC9   CPLIST,A                 cn=0,n=8

      459     5916    5                          HEAD$ -> TD$HEAD.NUMCPS = HEAD$ -> TD$HEAD.NUMCPS + 1;

   5916  5 000671   000001 621010                    EAX1    1,X0
         5 000672   100012 441100                    SXL1    10,,PR1
         5 000673   000721 710000 5                  TRA     s:5929

      460     5917    5                       CASE(%DV_DP);

      461     5918    5                          DPLIST(HEAD$ -> TD$HEAD.NUMDPS) = DEVKEY.TEXT;

   5918  5 000674   000363 471400 1                  LDP1    HEAD$
         5 000675   100013 720100                    LXL0    11,,PR1
         5 000676   000000 635010                    EAA     0,X0
         5 000677   000021 771000                    ARL     17
         5 000700   000002 735000                    ALS     2
         5 000701   040005 100400                    MLR     fill='040'O
         5 000702   000377 200010 1                  ADSC9   DEVKEY                   cn=1,n=8
         5 000703   003106 000010 1                  ADSC9   DPLIST,A                 cn=0,n=8

      462     5919    5                          HEAD$ -> TD$HEAD.NUMDPS = HEAD$ -> TD$HEAD.NUMDPS + 1;

   5919  5 000704   000001 621010                    EAX1    1,X0
         5 000705   100013 441100                    SXL1    11,,PR1
         5 000706   000721 710000 5                  TRA     s:5929

      463     5920    5                       CASE(%DV_MT);

      464     5921    5                          MTLIST(HEAD$ -> TD$HEAD.NUMMTS) = DEVKEY.TEXT;

   5921  5 000707   000363 471400 1                  LDP1    HEAD$
         5 000710   100014 720100                    LXL0    12,,PR1
         5 000711   000000 635010                    EAA     0,X0
         5 000712   000021 771000                    ARL     17
         5 000713   000002 735000                    ALS     2
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:63   
         5 000714   040005 100400                    MLR     fill='040'O
         5 000715   000377 200010 1                  ADSC9   DEVKEY                   cn=1,n=8
         5 000716   005106 000010 1                  ADSC9   MTLIST,A                 cn=0,n=8

      465     5922    5                          HEAD$ -> TD$HEAD.NUMMTS = HEAD$ -> TD$HEAD.NUMMTS + 1;

   5922  5 000717   000001 621010                    EAX1    1,X0
         5 000720   100014 441100                    SXL1    12,,PR1

      466     5923        /*                  CASE(%DV_XX);
      467     5924                               XXLIST(HEAD$ -> TD$HEAD.NUMXXS) = DEVKEY.TEXT;
      468     5925                               HEAD$ -> TD$HEAD.NUMXXS = HEAD$ -> TD$HEAD.NUMXXS + 1;
      469     5926        */
      470     5927    5                    END;                   /* DO CASE NI$DCT.TYPE                */

      471     5928
      472     5929    4                       CALL BUILD_DEVREC  ALTRET(NO_MSG);

   5929  5 000721   002374 701000 5                  TSX1    BUILD_DEVREC
         5 000722   002373 702000 5                  TSX2    NO_MSG

      473     5930
      474     5931    4                    CURDCTX = CURDCTX + 1;

   5931  5 000723   000326 235000 1                  LDA     CURDCTX
         5 000724   000001 035007                    ADLA    1,DL
         5 000725   000326 755000 1                  STA     CURDCTX

      475     5932    4                    DCT$ = IG$DCT$$->N$DCT$(CURDCTX);

   5932  5 000726   000242 470400 1                  LDP0    IG$DCT$$
         5 000727   000000 236105                    LDQ     0,AL,PR0
         5 000730   000245 756000 1                  STQ     DCT$

      476     5933    4                    DCTPTR.SEGID = %SPCL2SID;

   5933  5 000731   006022 236007                    LDQ     3090,DL
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:64   
         5 000732   000245 752003 1                  STCQ    DCT$,'03'O

      477     5934    4                 END;                      /* DO WHILE NOT MPC OR SC, OR OD      */

   5934  5 000733   000245 471400 1                  LDP1    DCT$
         5 000734   100002 220100                    LDX0    2,,PR1
         5 000735   000017 100000 4                  CMPX0   HEXBUF+8
         5 000736   000754 600000 5                  TZE     s:5935
         5 000737   000016 100000 4                  CMPX0   HEXBUF+7
         5 000740   000754 600000 5                  TZE     s:5935
         5 000741   000020 100000 4                  CMPX0   HEXBUF+9
         5 000742   000754 600000 5                  TZE     s:5935
         5 000743   000014 100000 4                  CMPX0   HEXBUF+5
         5 000744   000754 600000 5                  TZE     s:5935
         5 000745   000015 100000 4                  CMPX0   HEXBUF+6
         5 000746   000754 600000 5                  TZE     s:5935
         5 000747   000013 100000 4                  CMPX0   HEXBUF+4
         5 000750   000754 600000 5                  TZE     s:5935
         5 000751   000330 236000 1                  LDQ     MAXDCTX
         5 000752   000326 116000 1                  CMPQ    CURDCTX
         5 000753   000564 603000 5                  TRC     s:5901

      478     5935    3                 IF CURDCTX > MAXDCTX THEN ALL_DONE = %TRUE;

   5935  5 000754   000330 236000 1                  LDQ     MAXDCTX
         5 000755   000326 116000 1                  CMPQ    CURDCTX
         5 000756   000761 603000 5                  TRC     s:5936

   5935  5 000757   400000 236003                    LDQ     -131072,DU
         5 000760   200004 756100                    STQ     ALL_DONE,,AUTO

      479     5936    4                 DO I = 0 TO NUMMPCS - 1;

   5936  5 000761   000331 450000 1                  STZ     I
         5 000762   001410 710000 5                  TRA     s:6025+1

      480     5937    4                    MPCREC = '0'B;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:65   

   5937  5 000763   000000 100400                    MLR     fill='000'O
         5 000764   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         5 000765   006663 000504 1                  ADSC9   MPCREC                   cn=0,n=324

      481     5938    4                    DCT$ = IG$DCT$$->N$DCT$(MPCINDX);

   5938  5 000766   000242 470400 1                  LDP0    IG$DCT$$
         5 000767   200005 720100                    LXL0    MPCINDX,,AUTO
         5 000770   000000 236110                    LDQ     0,X0,PR0
         5 000771   000245 756000 1                  STQ     DCT$

      482     5939    4                    DCTPTR.SEGID = %SPCL2SID;

   5939  5 000772   006022 236007                    LDQ     3090,DL
         5 000773   000245 752003 1                  STCQ    DCT$,'03'O

      483     5940    4                    DVT$ = NI$DCT.DVT$;

   5940  5 000774   000245 471400 1                  LDP1    DCT$
         5 000775   100024 236100                    LDQ     20,,PR1
         5 000776   000246 756000 1                  STQ     DVT$

      484     5941    4                    DVTPTR.SEGID = %SPCL5SID;

   5941  5 000777   006026 236007                    LDQ     3094,DL
         5 001000   000246 752003 1                  STCQ    DVT$,'03'O

      485     5942    4                    DEVKEY.TEXT = NI$DCT.DEVNM;

   5942  5 001001   040000 100500                    MLR     fill='040'O
         5 001002   100002 000010                    ADSC9   2,,PR1                   cn=0,n=8
         5 001003   000377 200010 1                  ADSC9   DEVKEY                   cn=1,n=8

      486     5943    4                    MPCREC.FLAGS.DOWN = NI$DCT.STATUS.DOWN;

   5943  5 001004   100027 236100                    LDQ     23,,PR1
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:66   
         5 001005   000022 772000                    QRL     18
         5 001006   006675 676000 1                  ERQ     MPCREC+10
         5 001007   400000 376007                    ANQ     -131072,DL
         5 001010   006675 656000 1                  ERSQ    MPCREC+10

      487     5944    4                    MPCREC.MODEL = NI$DVT.MODEL(NI$DCT.MODX);

   5944  5 001011   100007 236100                    LDQ     7,,PR1
         5 001012   000021 772000                    QRL     17
         5 001013   000176 376007                    ANQ     126,DL
         5 001014   000002 736000                    QLS     2
         5 001015   000246 473400 1                  LDP3    DVT$
         5 001016   040000 100506                    MLR     fill='040'O
         5 001017   300003 000010                    ADSC9   3,Q,PR3                  cn=0,n=8
         5 001020   006663 000010 1                  ADSC9   MPCREC                   cn=0,n=8

      488     5945    4                    MPCREC.NUMDEVS = NUMDEVS;

   5945  5 001021   000335 721000 1                  LXL1    NUMDEVS
         5 001022   006675 741000 1                  STX1    MPCREC+10

      489     5946    4                    MPCREC.DEVNAME = DEVNAME;

   5946  5 001023   000000 100500                    MLR     fill='000'O
         5 001024   200007 000410                    ADSC9   DEVNAME,,AUTO            cn=0,n=264
         5 001025   006702 000410 1                  ADSC9   MPCREC+15                cn=0,n=264

      490     5947    4                    MPCREC.FWNAME = NI$DCT.MPC.FWNAME;

   5947  5 001026   100041 236100                    LDQ     33,,PR1
         5 001027   006676 756000 1                  STQ     MPCREC+11

      491     5948    4                    MPCREC.LPFWNAME = NI$DCT.MPC.LPNAME;

   5948  5 001030   100042 236100                    LDQ     34,,PR1
         5 001031   006677 756000 1                  STQ     MPCREC+12

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:67   
      492     5949    4                    MPCREC.CRPFWNAME = NI$DCT.MPC.CRPNAME;

   5949  5 001032   100043 236100                    LDQ     35,,PR1
         5 001033   006700 756000 1                  STQ     MPCREC+13

      493     5950    4                    MPCREC.FWREV.LETTER = ' ';

   5950  5 001034   040000 236003                    LDQ     16384,DU
         5 001035   006701 552040 1                  STBQ    MPCREC+14,'40'O

      494     5951    4                    MPCREC.FWREV.SUBREV = ' ';

   5951  5 001036   000040 236003                    LDQ     32,DU
         5 001037   006701 552020 1                  STBQ    MPCREC+14,'20'O

      495     5952    4                    IF NI$DCT.MPC.TYPE ~= %DV_AP AND

   5952  5 001040   100035 236100                    LDQ     29,,PR1
         5 001041   777000 376003                    ANQ     -512,DU
         5 001042   010000 116003                    CMPQ    4096,DU
         5 001043   001167 600000 5                  TZE     NO_FWREV
         5 001044   003000 116003                    CMPQ    1536,DU
         5 001045   001167 600000 5                  TZE     NO_FWREV
         5 001046   006675 236000 1                  LDQ     MPCREC+10
         5 001047   400000 316007                    CANQ    -131072,DL
         5 001050   001167 601000 5                  TNZ     NO_FWREV

      496     5953    5                       NI$DCT.MPC.TYPE ~= %DV_LP AND NOT MPCREC.FLAGS.DOWN THEN DO;

      497     5954    5                       IF NI$DCT.MPC.TYPE = %DV_DP

   5954  5 001051   100035 236100                    LDQ     29,,PR1
         5 001052   777000 376003                    ANQ     -512,DU
         5 001053   006000 116003                    CMPQ    3072,DU
         5 001054   001060 601000 5                  TNZ     s:5957

      498     5955    5                          THEN FWREV_ADDR = BITBIN(DP_FWREV_ADDR);
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:68   

   5955  5 001055   002371 235007                    LDA     1273,DL
         5 001056   200120 755100                    STA     FWREV_ADDR,,AUTO
         5 001057   001100 710000 5                  TRA     s:5966

      499     5956    5                          ELSE
      500     5957    5                       IF NI$DCT.MPC.FWNAME = 'M610'

   5957  5 001060   100041 236100                    LDQ     33,,PR1
         5 001061   000021 116000 4                  CMPQ    HEXBUF+10
         5 001062   001066 601000 5                  TNZ     s:5960

      501     5958    5                          THEN FWREV_ADDR = BITBIN(M610_FWREV_ADDR);

   5958  5 001063   000532 235007                    LDA     346,DL
         5 001064   200120 755100                    STA     FWREV_ADDR,,AUTO
         5 001065   001100 710000 5                  TRA     s:5966

      502     5959    5                          ELSE
      503     5960    5                       IF NI$DCT.MPC.FWNAME = 'M601'

   5960  5 001066   000022 116000 4                  CMPQ    HEXBUF+11
         5 001067   001073 601000 5                  TNZ     s:5963

      504     5961    5                          THEN FWREV_ADDR = BITBIN(M601_FWREV_ADDR);

   5961  5 001070   001032 235007                    LDA     538,DL
         5 001071   200120 755100                    STA     FWREV_ADDR,,AUTO
         5 001072   001100 710000 5                  TRA     s:5966

      505     5962    5                          ELSE
      506     5963    5                       IF NI$DCT.MPC.FWNAME = 'M500'

   5963  5 001073   000023 116000 4                  CMPQ    HEXBUF+12
         5 001074   001167 601000 5                  TNZ     NO_FWREV

      507     5964    5                          THEN FWREV_ADDR = BITBIN(M500_FWREV_ADDR);
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:69   

   5964  5 001075   000352 235007                    LDA     234,DL
         5 001076   200120 755100                    STA     FWREV_ADDR,,AUTO
         5 001077   001100 710000 5                  TRA     s:5966

      508     5965    5                          ELSE GOTO NO_FWREV;
      509     5966    5                       FPT_IOQ.V.DLA.DCTX# = MPCINDX;

   5966  5 001100   200005 236100                    LDQ     MPCINDX,,AUTO
         5 001101   000025 736000                    QLS     21
         5 001102   000225 676000 1                  ERQ     FPT_IOQ+5
         5 001103   777770 376003                    ANQ     -8,DU
         5 001104   000225 656000 1                  ERSQ    FPT_IOQ+5

      510     5967    5                       FPT_IOQ.V.DLA.DRELADDR# = FWREV_ADDR;

   5967  5 001105   200120 236100                    LDQ     FWREV_ADDR,,AUTO
         5 001106   000225 676000 1                  ERQ     FPT_IOQ+5
         5 001107   000014 376000 6                  ANQ     12
         5 001110   000225 656000 1                  ERSQ    FPT_IOQ+5

      511     5968    5                       CALL M$IOQ(FPT_IOQ) ALTRET(NO_FWREV);

   5968  5 001111   000220 630400 1                  EPPR0   FPT_IOQ
         5 001112   470006 713400                    CLIMB   alt,+28678
         5 001113   400400 401760                    pmme    nvectors=2
         5 001114   001167 702000 5                  TSX2    NO_FWREV

      512     5969    6                       IF NI$DCT.MPC.TYPE = %DV_DP THEN DO;

   5969  5 001115   000245 470400 1                  LDP0    DCT$
         5 001116   000035 236100                    LDQ     29,,PR0
         5 001117   777000 376003                    ANQ     -512,DU
         5 001120   006000 116003                    CMPQ    3072,DU
         5 001121   001145 601000 5                  TNZ     s:5978

      513     5970    6                          INDX = BITBIN(FPT_IOQ.BUF_.BUF$->DPBUF.LETTER);
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:70   

   5970  5 001122   000223 471400 1                  LDP1    FPT_IOQ+3
         5 001123   100000 236100                    LDQ     0,,PR1
         5 001124   000017 376007                    ANQ     15,DL
         5 001125   200111 756100                    STQ     INDX,,AUTO

      514     5971    6                          IF INDX > 25 THEN GOTO NO_FWREV;

   5971  5 001126   000032 116007                    CMPQ    26,DL
         5 001127   001167 603000 5                  TRC     NO_FWREV

      515     5972    6                          MPCREC.FWREV.LETTER = SUBSTR(LETBUF,INDX,1);

   5972  5 001130   040000 100406                    MLR     fill='040'O
         5 001131   000000 000001 4                  ADSC9   LETBUF,Q                 cn=0,n=1
         5 001132   006701 000001 1                  ADSC9   MPCREC+14                cn=0,n=1

      516     5973    6                          INDX = BITBIN(FPT_IOQ.BUF_.BUF$->DPBUF.REV);

   5973  5 001133   100000 236100                    LDQ     0,,PR1
         5 001134   000004 772000                    QRL     4
         5 001135   000017 376007                    ANQ     15,DL
         5 001136   200111 756100                    STQ     INDX,,AUTO

      517     5974    6                          IF INDX > 15 THEN GOTO NO_FWREV;

   5974  5 001137   000020 116007                    CMPQ    16,DL
         5 001140   001167 603000 5                  TRC     NO_FWREV

      518     5975    6                          MPCREC.FWREV.SUBREV = SUBSTR(HEXBUF,INDX,1);

   5975  5 001141   040000 100406                    MLR     fill='040'O
         5 001142   000007 000001 4                  ADSC9   HEXBUF,Q                 cn=0,n=1
         5 001143   006701 200001 1                  ADSC9   MPCREC+14                cn=1,n=1

      519     5976    6                          END;  /* IF TYPE = DP */

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:71   
   5976  5 001144   001167 710000 5                  TRA     NO_FWREV

      520     5977    6                       ELSE DO;

      521     5978    6                          INDX = BITBIN(FPT_IOQ.BUF_.BUF$->MTBUF.LETTER);

   5978  5 001145   000223 471400 1                  LDP1    FPT_IOQ+3
         5 001146   100000 236100                    LDQ     0,,PR1
         5 001147   000004 772000                    QRL     4
         5 001150   000377 376007                    ANQ     255,DL
         5 001151   200111 756100                    STQ     INDX,,AUTO

      522     5979    6                          IF INDX > 25 THEN GOTO NO_FWREV;

   5979  5 001152   000032 116007                    CMPQ    26,DL
         5 001153   001167 603000 5                  TRC     NO_FWREV

      523     5980    6                          MPCREC.FWREV.LETTER = SUBSTR(LETBUF,INDX,1);

   5980  5 001154   040000 100406                    MLR     fill='040'O
         5 001155   000000 000001 4                  ADSC9   LETBUF,Q                 cn=0,n=1
         5 001156   006701 000001 1                  ADSC9   MPCREC+14                cn=0,n=1

      524     5981    6                          INDX = BITBIN(FPT_IOQ.BUF_.BUF$->MTBUF.REV);

   5981  5 001157   100000 236100                    LDQ     0,,PR1
         5 001160   000017 376007                    ANQ     15,DL
         5 001161   200111 756100                    STQ     INDX,,AUTO

      525     5982    6                          IF INDX > 15 THEN GOTO NO_FWREV;

   5982  5 001162   000020 116007                    CMPQ    16,DL
         5 001163   001167 603000 5                  TRC     NO_FWREV

      526     5983    6                          MPCREC.FWREV.SUBREV = SUBSTR(HEXBUF,INDX,1);

   5983  5 001164   040000 100406                    MLR     fill='040'O
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:72   
         5 001165   000007 000001 4                  ADSC9   HEXBUF,Q                 cn=0,n=1
         5 001166   006701 200001 1                  ADSC9   MPCREC+14                cn=1,n=1

      527     5984    6                          END;  /* ELSE */

      528     5985    5                       END;  /* IF NI$DCT.MPC.TYPE ~= %DV_LP */

      529     5986    4        NO_FWREV:
      530     5987
      531     5988                                      /* FIGURE OUT CHANNEL CONNECTIONS FOR THIS MPC  */
      532     5989    4                    INDX = 0;

   5989  5 001167   200111 450100       NO_FWREV     STZ     INDX,,AUTO

      533     5990    4                    J = 0;

   5990  5 001170   000332 450000 1                  STZ     J

      534     5991    5                    DO WHILE(NI$DCT.MPC.IOCHANX(INDX) ~= 0 AND INDX < %N_CHANSPERMPC);

   5991  5 001171   001353 710000 5                  TRA     s:6019

      535     5992    5                       DQH$ = CHT$->NI$CHT.DQH$(NI$DCT.MPC.IOCHANX(INDX));

   5992  5 001172   000245 470400 1                  LDP0    DCT$
         5 001173   200111 235100                    LDA     INDX,,AUTO
         5 001174   000100 101505                    MRL     fill='000'O
         5 001175   000031 000001                    ADSC9   25,A,PR0                 cn=0,n=1
         5 001176   200130 000002                    ADSC9   FEX+3,,AUTO              cn=0,n=2
         5 001177   200130 220100                    LDX0    FEX+3,,AUTO
         5 001200   200130 020100                    ADLX0   FEX+3,,AUTO
         5 001201   000253 471400 1                  LDP1    CHT$
         5 001202   100000 236110                    LDQ     0,X0,PR1
         5 001203   000251 756000 1                  STQ     DQH$

      536     5993    5                       DQHPTR.SEGID = %SPCL2SID;

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:73   
   5993  5 001204   006022 236007                    LDQ     3090,DL
         5 001205   000251 752003 1                  STCQ    DQH$,'03'O

      537     5994    5                       MPCREC.IOCHAN.PRESENCE(J) = '1'B;

   5994  5 001206   000332 720000 1                  LXL0    J
         5 001207   400000 236003                    LDQ     -131072,DU
         5 001210   006665 256010 1                  ORSQ    MPCREC+2,X0

      538     5995    5                       MPCREC.IOCHAN.IOM(J) = NI$DQH.IOCHAN.IOM;

   5995  5 001211   000251 473400 1                  LDP3    DQH$
         5 001212   300001 236100                    LDQ     1,,PR3
         5 001213   000600 376003                    ANQ     384,DU
         5 001214   000007 772000                    QRL     7
         5 001215   006665 676010 1                  ERQ     MPCREC+2,X0
         5 001216   000777 376003                    ANQ     511,DU
         5 001217   006665 656010 1                  ERSQ    MPCREC+2,X0

      539     5996    5                       MPCREC.IOCHAN.LOCHAN(J) = NI$DQH.IOCHAN.CHANNEL;

   5996  5 001220   300001 236100                    LDQ     1,,PR3
         5 001221   000177 376003                    ANQ     127,DU
         5 001222   000011 772000                    QRL     9
         5 001223   006665 676010 1                  ERQ     MPCREC+2,X0
         5 001224   777000 376007                    ANQ     -512,DL
         5 001225   006665 656010 1                  ERSQ    MPCREC+2,X0

      540     5997    5                       IF  NI$DCT.MPC.IOCHANX(INDX+1) ~= 0

   5997  5 001226   000100 101505                    MRL     fill='000'O
         5 001227   000031 200001                    ADSC9   25,A,PR0                 cn=1,n=1
         5 001230   200130 000004                    ADSC9   FEX+3,,AUTO              cn=0,n=4
         5 001231   200130 236100                    LDQ     FEX+3,,AUTO
         5 001232   000000 116003                    CMPQ    0,DU
         5 001233   001316 600000 5                  TZE     s:6013
         5 001234   000035 236100                    LDQ     29,,PR0
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:74   
         5 001235   777000 376003                    ANQ     -512,DU
         5 001236   003000 116003                    CMPQ    1536,DU
         5 001237   001316 600000 5                  TZE     s:6013
         5 001240   010000 116003                    CMPQ    4096,DU
         5 001241   001316 600000 5                  TZE     s:6013

      541     5998    5                       AND NI$DCT.MPC.TYPE ~= %DV_LP
      542     5999    5                       AND NI$DCT.MPC.TYPE ~= %DV_AP
      543     6000    5                          THEN             /* CHECK FOR LA PAIR                  */
      544     6001    6                          DO;

      545     6002    6                             DQH$ = CHT$->NI$CHT.DQH$(NI$DCT.MPC.IOCHANX(INDX+1));

   6002  5 001242   000100 101505                    MRL     fill='000'O
         5 001243   000031 200001                    ADSC9   25,A,PR0                 cn=1,n=1
         5 001244   200130 000002                    ADSC9   FEX+3,,AUTO              cn=0,n=2
         5 001245   200130 221100                    LDX1    FEX+3,,AUTO
         5 001246   200130 021100                    ADLX1   FEX+3,,AUTO
         5 001247   100000 236111                    LDQ     0,X1,PR1
         5 001250   000251 756000 1                  STQ     DQH$

      546     6003    6                             DQHPTR.SEGID = %SPCL2SID;

   6003  5 001251   006022 236007                    LDQ     3090,DL
         5 001252   000251 752003 1                  STCQ    DQH$,'03'O

      547     6004    6                             IF (MPCREC.IOCHAN.IOM(J) = NI$DQH.IOCHAN.IOM) AND

   6004  5 001253   000251 473400 1                  LDP3    DQH$
         5 001254   300001 236100                    LDQ     1,,PR3
         5 001255   000031 772000                    QRL     25
         5 001256   000003 376007                    ANQ     3,DL
         5 001257   200130 756100                    STQ     FEX+3,,AUTO
         5 001260   006665 236010 1                  LDQ     MPCREC+2,X0
         5 001261   000022 772000                    QRL     18
         5 001262   000777 376007                    ANQ     511,DL
         5 001263   200130 116100                    CMPQ    FEX+3,,AUTO
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:75   
         5 001264   001310 601000 5                  TNZ     s:6011
         5 001265   300001 236100                    LDQ     1,,PR3
         5 001266   000022 772000                    QRL     18
         5 001267   000177 376007                    ANQ     127,DL
         5 001270   200131 756100                    STQ     FEX+4,,AUTO
         5 001271   006665 236010 1                  LDQ     MPCREC+2,X0
         5 001272   000011 772000                    QRL     9
         5 001273   000777 376007                    ANQ     511,DL
         5 001274   000001 036007                    ADLQ    1,DL
         5 001275   200131 116100                    CMPQ    FEX+4,,AUTO
         5 001276   001310 601000 5                  TNZ     s:6011

      548     6005    6                                (MPCREC.IOCHAN.LOCHAN(J) + 1 = NI$DQH.IOCHAN.CHANNEL)
      549     6006    6                                THEN       /* GOT AN LA PAIR                     */
      550     6007    7                                DO;

      551     6008    7                                   MPCREC.IOCHAN.HICHAN(J) = NI$DQH.IOCHAN.CHANNEL;

   6008  5 001277   300001 236100                    LDQ     1,,PR3
         5 001300   000177 376003                    ANQ     127,DU
         5 001301   000022 772000                    QRL     18
         5 001302   006665 676010 1                  ERQ     MPCREC+2,X0
         5 001303   000777 376007                    ANQ     511,DL
         5 001304   006665 656010 1                  ERSQ    MPCREC+2,X0

      552     6009    7                                   INDX = INDX + 1;

   6009  5 001305   000001 035007                    ADLA    1,DL
         5 001306   200111 755100                    STA     INDX,,AUTO

      553     6010    7                                END;       /* IF                                 */

   6010  5 001307   001323 710000 5                  TRA     s:6014

      554     6011    6                               ELSE MPCREC.IOCHAN.HICHAN(J) = MPCREC.IOCHAN.LOCHAN(J);

   6011  5 001310   006665 236010 1                  LDQ     MPCREC+2,X0
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:76   
         5 001311   000011 772000                    QRL     9
         5 001312   006665 676010 1                  ERQ     MPCREC+2,X0
         5 001313   000777 376007                    ANQ     511,DL
         5 001314   006665 656010 1                  ERSQ    MPCREC+2,X0

      555     6012    6                          END;             /* IF IOCHANX ~= 0                    */

   6012  5 001315   001323 710000 5                  TRA     s:6014

      556     6013    5                          ELSE MPCREC.IOCHAN.HICHAN(J) = MPCREC.IOCHAN.LOCHAN(J);

   6013  5 001316   006665 236010 1                  LDQ     MPCREC+2,X0
         5 001317   000011 772000                    QRL     9
         5 001320   006665 676010 1                  ERQ     MPCREC+2,X0
         5 001321   000777 376007                    ANQ     511,DL
         5 001322   006665 656010 1                  ERSQ    MPCREC+2,X0

      557     6014    6                       DO K = MPCREC.IOCHAN.LOCHAN(J) TO MPCREC.IOCHAN.HICHAN(J);

   6014  5 001323   006665 236010 1                  LDQ     MPCREC+2,X0
         5 001324   000011 772000                    QRL     9
         5 001325   000777 376007                    ANQ     511,DL
         5 001326   000333 756000 1                  STQ     K
         5 001327   001343 710000 5                  TRA     s:6016+1

      558     6015    6                          IOM$(MPCREC.IOCHAN.IOM(J))->TD$IOM.DEVNAME(K) = DEVKEY.TEXT;

   6015  5 001330   000332 720000 1                  LXL0    J
         5 001331   006665 221010 1                  LDX1    MPCREC+2,X0
         5 001332   000777 361003                    ANX1    511,DU
         5 001333   000364 470411 1                  LDP0    IOM$,X1
         5 001334   000333 235000 1                  LDA     K
         5 001335   000001 735000                    ALS     1
         5 001336   000002 735000                    ALS     2
         5 001337   040105 100400                    MLR     fill='040'O
         5 001340   000377 200010 1                  ADSC9   DEVKEY                   cn=1,n=8
         5 001341   000000 000010                    ADSC9   0,A,PR0                  cn=0,n=8
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:77   

      559     6016    6                       END;                /* DO K                               */

   6016  5 001342   000333 054000 1                  AOS     K
         5 001343   006665 236010 1                  LDQ     MPCREC+2,X0
         5 001344   000777 376007                    ANQ     511,DL
         5 001345   000333 116000 1                  CMPQ    K
         5 001346   001330 605000 5                  TPL     s:6015

      560     6017    5                       INDX = INDX + 1;

   6017  5 001347   200111 235100                    LDA     INDX,,AUTO
         5 001350   000001 035007                    ADLA    1,DL
         5 001351   200111 755100                    STA     INDX,,AUTO

      561     6018    5                       J = J + 1;

   6018  5 001352   000332 054000 1                  AOS     J

      562     6019    5                    END;                   /* DO WHILE                           */

   6019  5 001353   000245 470400 1                  LDP0    DCT$
         5 001354   200111 235100                    LDA     INDX,,AUTO
         5 001355   000100 101505                    MRL     fill='000'O
         5 001356   000031 000001                    ADSC9   25,A,PR0                 cn=0,n=1
         5 001357   200130 000004                    ADSC9   FEX+3,,AUTO              cn=0,n=4
         5 001360   200130 236100                    LDQ     FEX+3,,AUTO
         5 001361   000000 116003                    CMPQ    0,DU
         5 001362   001365 600000 5                  TZE     s:6020
         5 001363   000020 115007                    CMPA    16,DL
         5 001364   001172 602000 5                  TNC     s:5992

      563     6020    4                    WRITE_FPT.KEY_ = VECTOR(DEVKEY);

   6020  5 001365   000010 237000 6                  LDAQ    8
         5 001366   000132 757000 1                  STAQ    WRITE_FPT+2

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:78   
      564     6021    4                    WRITE_FPT.BUF_ = VECTOR(MPCREC);

   6021  5 001367   000016 237000 6                  LDAQ    14
         5 001370   000134 757000 1                  STAQ    WRITE_FPT+4

      565     6022    4                    WRITE_FPT.BUF_.BOUND = SIZEC(TD$MPC) + (SIZEC(TD$MPC.DEVNAME(0))*(
              6022                             NUMDEVS-1)) - 1;

   6022  5 001371   000335 236000 1                  LDQ     NUMDEVS
         5 001372   000003 736000                    QLS     3
         5 001373   000073 036007                    ADLQ    59,DL
         5 001374   000020 736000                    QLS     16
         5 001375   000134 676000 1                  ERQ     WRITE_FPT+4
         5 001376   000034 376000 xsym               ANQ     B_VECTNIL+28
         5 001377   000134 656000 1                  ERSQ    WRITE_FPT+4

      566     6023    4                    CALL M$WRITE(WRITE_FPT) ALTRET(IGT_ERR);

   6023  5 001400   000130 630400 1                  EPPR0   WRITE_FPT
         5 001401   440001 713400                    CLIMB   alt,write
         5 001402   401400 401760                    pmme    nvectors=4
         5 001403   002361 702000 5                  TSX2    IGT_ERR

      567     6024    4                    MPCINDX = MPCINDX + 1;

   6024  5 001404   200005 235100                    LDA     MPCINDX,,AUTO
         5 001405   000001 035007                    ADLA    1,DL
         5 001406   200005 755100                    STA     MPCINDX,,AUTO

      568     6025    4                 END;                      /* DO I = 0 TO NUMMPCS - 1            */

   6025  5 001407   000331 054000 1                  AOS     I
         5 001410   000331 236000 1                  LDQ     I
         5 001411   000763 604000 5                  TMI     s:5937
         5 001412   000334 116000 1                  CMPQ    NUMMPCS
         5 001413   000763 602000 5                  TNC     s:5937

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:79   
      569     6026    3                 CURDCTX = CURDCTX - 1;

   6026  5 001414   000326 235000 1                  LDA     CURDCTX
         5 001415   000001 135007                    SBLA    1,DL
         5 001416   000326 755000 1                  STA     CURDCTX

      570     6027    3              END;                         /* IF GOT AN MPC                      */

      571     6028    2        END;                               /* DO UNTIL ALL_DONE                  */

   6028  5 001417   200004 234100                    SZN     ALL_DONE,,AUTO
         5 001420   000310 605000 5                  TPL     s:5844

      572     6029        /**/
      573     6030    1           I = 0;

   6030  5 001421   000331 450000 1                  STZ     I

      574     6031        /**/
      575     6032    1           HEAD$ -> TD$HEAD.IOM_INDX = I;

   6032  5 001422   000331 720000 1                  LXL0    I
         5 001423   000363 470400 1                  LDP0    HEAD$
         5 001424   000000 740100                    STX0    0,,PR0

      576     6033    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMIOMS - 1;

   6033  5 001425   000332 450000 1                  STZ     J
         5 001426   001452 710000 5                  TRA     s:6038+1

      577     6034    2              CALL BINCHAR(IOM#,J);

   6034  5 001427   000100 301400                    BTD
         5 001430   000332 000004 1                  NDSC9   J                        cn=0,s=lsgnf,sf=0,n=4
         5 001431   200112 030001                    NDSC9   IOM#,,AUTO               cn=0,s=nosgn,sf=0,n=1

      578     6035    2              CALL CONCAT(IOM_NAME,'IOM',IOM#);
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:80   

   6035  5 001432   000024 236000 4                  LDQ     HEXBUF+13
         5 001433   000015 376000 6                  ANQ     13
         5 001434   000040 276007                    ORQ     32,DL
         5 001435   200113 756100                    STQ     IOM_NAME,,AUTO
         5 001436   200112 236100                    LDQ     IOM#,,AUTO
         5 001437   000033 772000                    QRL     27
         5 001440   200113 552104                    STBQ    IOM_NAME,'04'O,AUTO

      579     6036    2              HEAD$ -> TD$HEAD.DEVNAME(I) = IOM_NAME;

   6036  5 001441   000331 235000 1                  LDA     I
         5 001442   000001 735000                    ALS     1
         5 001443   000002 735000                    ALS     2
         5 001444   000363 470400 1                  LDP0    HEAD$
         5 001445   040105 100500                    MLR     fill='040'O
         5 001446   200113 000004                    ADSC9   IOM_NAME,,AUTO           cn=0,n=4
         5 001447   000020 000010                    ADSC9   16,A,PR0                 cn=0,n=8

      580     6037    2              I = I + 1;

   6037  5 001450   000331 054000 1                  AOS     I

      581     6038    2              END;  /* DO J */

   6038  5 001451   000332 054000 1                  AOS     J
         5 001452   000000 236100                    LDQ     0,,PR0
         5 001453   777777 376007                    ANQ     -1,DL
         5 001454   000332 116000 1                  CMPQ    J
         5 001455   001427 605400 5                  TPNZ    s:6034

      582     6039    1           HEAD$ -> TD$HEAD.FEP_INDX = I;

   6039  5 001456   000331 720000 1                  LXL0    I
         5 001457   000006 740100                    STX0    6,,PR0

      583     6040    1           TEMP$ = ADDR(KI_FEI$$);
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:81   

   6040  5 001460   000020 236000 6                  LDQ     16
         5 001461   000252 756000 1                  STQ     TEMP$

      584     6041    1           TEMPPTR.SEGID = %SPCL1SID;

   6041  5 001462   006021 236007                    LDQ     3089,DL
         5 001463   000252 752003 1                  STCQ    TEMP$,'03'O

      585     6042    1           TEMP$ = TEMP$ -> B$PTR(0);  /* Get KI_FEI$$ */

   6042  5 001464   000252 471400 1                  LDP1    TEMP$
         5 001465   100000 236100                    LDQ     0,,PR1
         5 001466   000252 756000 1                  STQ     TEMP$

      586     6043    1           TEMPPTR.SEGID = %SPCL2SID;

   6043  5 001467   006022 236007                    LDQ     3090,DL
         5 001470   000252 752003 1                  STCQ    TEMP$,'03'O

      587     6044    1           IG_FEI$$ = TEMP$;

   6044  5 001471   000252 236000 1                  LDQ     TEMP$
         5 001472   000243 756000 1                  STQ     IG_FEI$$

      588     6045    2           DO J = 1 TO MAX_FEP;

   6045  5 001473   000001 235007                    LDA     1,DL
         5 001474   000332 755000 1                  STA     J
         5 001475   001630 710000 5                  TRA     s:6074+1

      589     6046    2                  TEMP$ = IG_FEI$$ -> B$PTR(J);    /* Get FEI$  */

   6046  5 001476   000243 470400 1                  LDP0    IG_FEI$$
         5 001477   000332 720000 1                  LXL0    J
         5 001500   000000 236110                    LDQ     0,X0,PR0
         5 001501   000252 756000 1                  STQ     TEMP$
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:82   

      590     6047    2                  TEMPPTR.SEGID = %SPCL2SID;

   6047  5 001502   006022 236007                    LDQ     3090,DL
         5 001503   000252 752003 1                  STCQ    TEMP$,'03'O

      591     6048
      592     6049    2                  OPC_FOUND = NO;

   6049  5 001504   000361 450000 1                  STZ     OPC_FOUND

      593     6050    2                  OPC$ = ADDR( FP_OPCI$$ );

   6050  5 001505   000021 236000 6                  LDQ     17
         5 001506   000340 756000 1                  STQ     OPC$

      594     6051    2                  OPCPTR.SEGID = %SPCL1SID;

   6051  5 001507   006021 236007                    LDQ     3089,DL
         5 001510   000340 752003 1                  STCQ    OPC$,'03'O

      595     6052    2                  OPC$ = OPC$->B$PTR(0);

   6052  5 001511   000340 471400 1                  LDP1    OPC$
         5 001512   100000 236100                    LDQ     0,,PR1
         5 001513   000340 756000 1                  STQ     OPC$

      596     6053    2                  OPCPTR.SEGID = %SPCL2SID;

   6053  5 001514   006022 236007                    LDQ     3090,DL
         5 001515   000340 752003 1                  STCQ    OPC$,'03'O

      597     6054    3                  DO WHILE OPCPTR.OFFSET~=0 /*ADDR(NIL)*/ AND ~OPC_FOUND;

   6054  5 001516   001532 710000 5                  TRA     s:6058

      598     6055    3                     IF OPC$->FP$OPCI.FEI# =  J  THEN OPC_FOUND = YES;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:83   

   6055  5 001517   000340 470400 1                  LDP0    OPC$
         5 001520   000001 236100                    LDQ     1,,PR0
         5 001521   001526 604000 5                  TMI     s:6056
         5 001522   000332 116000 1                  CMPQ    J
         5 001523   001526 601000 5                  TNZ     s:6056

   6055  5 001524   400000 236003                    LDQ     -131072,DU
         5 001525   000361 756000 1                  STQ     OPC_FOUND

      599     6056    3                     OPC$ = OPC$->FP$OPCI.LNK$;

   6056  5 001526   000000 236100                    LDQ     0,,PR0
         5 001527   000340 756000 1                  STQ     OPC$

      600     6057    3                     OPCPTR.SEGID = %SPCL2SID;

   6057  5 001530   006022 236007                    LDQ     3090,DL
         5 001531   000340 752003 1                  STCQ    OPC$,'03'O

      601     6058    3                  END;  /* do while */

   6058  5 001532   000340 220000 1                  LDX0    OPC$
         5 001533   001540 600000 5                  TZE     s:6059
         5 001534   000361 236000 1                  LDQ     OPC_FOUND
         5 001535   400000 376003                    ANQ     -131072,DU
         5 001536   400000 676003                    ERQ     -131072,DU
         5 001537   001517 601000 5                  TNZ     s:6055

      602     6059    2                 CALL BINCHAR(FEPNUM,TEMP$->KI$FEI.FEP#);

   6059  5 001540   000252 470400 1                  LDP0    TEMP$
         5 001541   000012 236100                    LDQ     10,,PR0
         5 001542   000011 772000                    QRL     9
         5 001543   000777 376007                    ANQ     511,DL
         5 001544   000000 235003                    LDA     0,DU
         5 001545   200130 757100                    STAQ    FEX+3,,AUTO
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:84   
         5 001546   000100 301500                    BTD
         5 001547   200130 000010                    NDSC9   FEX+3,,AUTO              cn=0,s=lsgnf,sf=0,n=8
         5 001550   200117 030003                    NDSC9   FEPNUM,,AUTO             cn=0,s=nosgn,sf=0,n=3

      603     6060    2                 K = 0;

   6060  5 001551   000333 450000 1                  STZ     K

      604     6061    3                 DO WHILE(SUBSTR(FEPNUM,K,1) = '0');

   6061  5 001552   001554 710000 5                  TRA     s:6063

      605     6062    3                    K = K + 1;

   6062  5 001553   000333 054000 1                  AOS     K

      606     6063    3                    END;  /* DO WHILE */

   6063  5 001554   000333 235000 1                  LDA     K
         5 001555   040000 106505                    CMPC    fill='040'O
         5 001556   200117 000001                    ADSC9   FEPNUM,A,AUTO            cn=0,n=1
         5 001557   000022 000001 6                  ADSC9   18                       cn=0,n=1
         5 001560   001553 600000 5                  TZE     s:6062

      607     6064    2                 LEN = LENGTHC(FEPNUM) - K;

   6064  5 001561   000027 675000 xsym               ERA     B_VECTNIL+23
         5 001562   000004 035007                    ADLA    4,DL
         5 001563   200114 755100                    STA     LEN,,AUTO

      608     6065    2                 CALL CONCAT(FEPNAME,'FEP',SUBSTR(FEPNUM,K,LEN));

   6065  5 001564   000025 236000 4                  LDQ     HEXBUF+14
         5 001565   000015 376000 6                  ANQ     13
         5 001566   000040 276007                    ORQ     32,DL
         5 001567   200115 756100                    STQ     FEPNAME,,AUTO
         5 001570   000000 620005                    EAX0    0,AL
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:85   
         5 001571   000333 235000 1                  LDA     K
         5 001572   040100 100545                    MLR     fill='040'O
         5 001573   200117 000010                    ADSC9   FEPNUM,A,AUTO            cn=0,n=*X0
         5 001574   200115 600003                    ADSC9   FEPNAME,,AUTO            cn=3,n=3

      609     6066    2                 IF ~OPC_FOUND THEN        /* do FEP stuff  */

   6066  5 001575   000361 236000 1                  LDQ     OPC_FOUND
         5 001576   400000 376003                    ANQ     -131072,DU
         5 001577   400000 676003                    ERQ     -131072,DU
         5 001600   001614 600000 5                  TZE     s:6072

      610     6067    3                 DO;

      611     6068    3                   HEAD$ -> TD$HEAD.DEVNAME(I) = FEPNAME;

   6068  5 001601   000331 235000 1                  LDA     I
         5 001602   000001 735000                    ALS     1
         5 001603   000002 735000                    ALS     2
         5 001604   000363 470400 1                  LDP0    HEAD$
         5 001605   040105 100500                    MLR     fill='040'O
         5 001606   200115 000006                    ADSC9   FEPNAME,,AUTO            cn=0,n=6
         5 001607   000020 000010                    ADSC9   16,A,PR0                 cn=0,n=8

      612     6069    3                   HEAD$->TD$HEAD.NUMFEPS = HEAD$->TD$HEAD.NUMFEPS + 1;

   6069  5 001610   000006 720100                    LXL0    6,,PR0
         5 001611   000001 621010                    EAX1    1,X0
         5 001612   000006 441100                    SXL1    6,,PR0

      613     6070    3                   I = I + 1;

   6070  5 001613   000331 054000 1                  AOS     I

      614     6071    3                 END;  /* if ~OPC_FOUND */

      615     6072    2                IOM$(TEMP$ -> KI$FEI.FECH.IOM) -> TD$IOM.DEVNAME(TEMP$ -> KI$FEI.FECH.
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:86   
              6072                          DEV)

   6072  5 001614   000252 470400 1                  LDP0    TEMP$
         5 001615   000002 236100                    LDQ     2,,PR0
         5 001616   000042 772000                    QRL     34
         5 001617   000364 471406 1                  LDP1    IOM$,QL
         5 001620   000002 236100                    LDQ     2,,PR0
         5 001621   000032 772000                    QRL     26
         5 001622   000376 376007                    ANQ     254,DL
         5 001623   000002 736000                    QLS     2
         5 001624   040106 100500                    MLR     fill='040'O
         5 001625   200115 000006                    ADSC9   FEPNAME,,AUTO            cn=0,n=6
         5 001626   100000 000010                    ADSC9   0,Q,PR1                  cn=0,n=8

      616     6073    2                    = FEPNAME;
      617     6074    2              END;

   6074  5 001627   000332 054000 1                  AOS     J
         5 001630   000336 236000 1                  LDQ     MAX_FEP
         5 001631   001476 604000 5                  TMI     s:6046
         5 001632   000332 116000 1                  CMPQ    J
         5 001633   001476 605000 5                  TPL     s:6046

      618     6075        /**/
      619     6076    1           HEAD$ -> TD$HEAD.UNITMPC_INDX = I;

   6076  5 001634   000331 720000 1                  LXL0    I
         5 001635   000363 470400 1                  LDP0    HEAD$
         5 001636   000001 740100                    STX0    1,,PR0

      620     6077    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMUNITMPCS - 1;

   6077  5 001637   000332 450000 1                  STZ     J
         5 001640   001655 710000 5                  TRA     s:6080+1

      621     6078    2              HEAD$ -> TD$HEAD.DEVNAME(I) = UCLIST(J);

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:87   
   6078  5 001641   000331 235000 1                  LDA     I
         5 001642   000001 735000                    ALS     1
         5 001643   000363 470400 1                  LDP0    HEAD$
         5 001644   000000 620005                    EAX0    0,AL
         5 001645   000000 621005                    EAX1    0,AL
         5 001646   000332 236000 1                  LDQ     J
         5 001647   000001 736000                    QLS     1
         5 001650   002446 237006 1                  LDAQ    UCLIST,QL
         5 001651   000020 755110                    STA     16,X0,PR0
         5 001652   000021 756111                    STQ     17,X1,PR0

      622     6079    2              I = I+1;

   6079  5 001653   000331 054000 1                  AOS     I

      623     6080    2              END;

   6080  5 001654   000332 054000 1                  AOS     J
         5 001655   000001 236100                    LDQ     1,,PR0
         5 001656   777777 376007                    ANQ     -1,DL
         5 001657   000332 116000 1                  CMPQ    J
         5 001660   001641 605400 5                  TPNZ    s:6078

      624     6081        /**/
      625     6082    1           HEAD$ -> TD$HEAD.TAPEMPC_INDX = I;

   6082  5 001661   000331 720000 1                  LXL0    I
         5 001662   000002 740100                    STX0    2,,PR0

      626     6083    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMTAPEMPCS - 1;

   6083  5 001663   000332 450000 1                  STZ     J
         5 001664   001701 710000 5                  TRA     s:6086+1

      627     6084    2              HEAD$ -> TD$HEAD.DEVNAME(I) = TCLIST(J);

   6084  5 001665   000331 235000 1                  LDA     I
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:88   
         5 001666   000001 735000                    ALS     1
         5 001667   000363 470400 1                  LDP0    HEAD$
         5 001670   000000 620005                    EAX0    0,AL
         5 001671   000000 621005                    EAX1    0,AL
         5 001672   000332 236000 1                  LDQ     J
         5 001673   000001 736000                    QLS     1
         5 001674   002546 237006 1                  LDAQ    TCLIST,QL
         5 001675   000020 755110                    STA     16,X0,PR0
         5 001676   000021 756111                    STQ     17,X1,PR0

      628     6085    2              I = I+1;

   6085  5 001677   000331 054000 1                  AOS     I

      629     6086    2              END;

   6086  5 001700   000332 054000 1                  AOS     J
         5 001701   000002 236100                    LDQ     2,,PR0
         5 001702   777777 376007                    ANQ     -1,DL
         5 001703   000332 116000 1                  CMPQ    J
         5 001704   001665 605400 5                  TPNZ    s:6084

      630     6087        /**/
      631     6088    1           HEAD$ -> TD$HEAD.DISKMPC_INDX = I;

   6088  5 001705   000331 720000 1                  LXL0    I
         5 001706   000003 740100                    STX0    3,,PR0

      632     6089    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMDISKMPCS - 1;

   6089  5 001707   000332 450000 1                  STZ     J
         5 001710   001725 710000 5                  TRA     s:6092+1

      633     6090    2              HEAD$ -> TD$HEAD.DEVNAME(I) = DCLIST(J);

   6090  5 001711   000331 235000 1                  LDA     I
         5 001712   000001 735000                    ALS     1
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:89   
         5 001713   000363 470400 1                  LDP0    HEAD$
         5 001714   000000 620005                    EAX0    0,AL
         5 001715   000000 621005                    EAX1    0,AL
         5 001716   000332 236000 1                  LDQ     J
         5 001717   000001 736000                    QLS     1
         5 001720   002506 237006 1                  LDAQ    DCLIST,QL
         5 001721   000020 755110                    STA     16,X0,PR0
         5 001722   000021 756111                    STQ     17,X1,PR0

      634     6091    2              I = I+1;

   6091  5 001723   000331 054000 1                  AOS     I

      635     6092    2              END;

   6092  5 001724   000332 054000 1                  AOS     J
         5 001725   000003 236100                    LDQ     3,,PR0
         5 001726   777777 376007                    ANQ     -1,DL
         5 001727   000332 116000 1                  CMPQ    J
         5 001730   001711 605400 5                  TPNZ    s:6090

      636     6093        /**/
      637     6094    1           HEAD$ -> TD$HEAD.APMPC_INDX = I;

   6094  5 001731   000331 720000 1                  LXL0    I
         5 001732   000004 740100                    STX0    4,,PR0

      638     6095    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMAPMPCS - 1;

   6095  5 001733   000332 450000 1                  STZ     J
         5 001734   001751 710000 5                  TRA     s:6098+1

      639     6096    2              HEAD$ -> TD$HEAD.DEVNAME(I) = ACLIST(J);

   6096  5 001735   000331 235000 1                  LDA     I
         5 001736   000001 735000                    ALS     1
         5 001737   000363 470400 1                  LDP0    HEAD$
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:90   
         5 001740   000000 620005                    EAX0    0,AL
         5 001741   000000 621005                    EAX1    0,AL
         5 001742   000332 236000 1                  LDQ     J
         5 001743   000001 736000                    QLS     1
         5 001744   005446 237006 1                  LDAQ    ACLIST,QL
         5 001745   000020 755110                    STA     16,X0,PR0
         5 001746   000021 756111                    STQ     17,X1,PR0

      640     6097    2              I = I+1;

   6097  5 001747   000331 054000 1                  AOS     I

      641     6098    2              END;

   6098  5 001750   000332 054000 1                  AOS     J
         5 001751   000004 236100                    LDQ     4,,PR0
         5 001752   777777 376007                    ANQ     -1,DL
         5 001753   000332 116000 1                  CMPQ    J
         5 001754   001735 605400 5                  TPNZ    s:6096

      642     6099        /**/
      643     6100    1             CALL OPC_STUFF  ALTRET(NO_MSG);

   6100  5 001755   002602 701000 5                  TSX1    OPC_STUFF
         5 001756   002373 702000 5                  TSX2    NO_MSG

      644     6101        /**/
      645     6102    1           HEAD$ -> TD$HEAD.OPC_INDX = I;

   6102  5 001757   000331 720000 1                  LXL0    I
         5 001760   000363 470400 1                  LDP0    HEAD$
         5 001761   000005 740100                    STX0    5,,PR0

      646     6103    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMOPCS - 1;

   6103  5 001762   000332 450000 1                  STZ     J
         5 001763   002000 710000 5                  TRA     s:6106+1
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:91   

      647     6104    2              HEAD$ -> TD$HEAD.DEVNAME(I) = OCLIST(J);

   6104  5 001764   000331 235000 1                  LDA     I
         5 001765   000001 735000                    ALS     1
         5 001766   000363 470400 1                  LDP0    HEAD$
         5 001767   000000 620005                    EAX0    0,AL
         5 001770   000000 621005                    EAX1    0,AL
         5 001771   000332 236000 1                  LDQ     J
         5 001772   000001 736000                    QLS     1
         5 001773   005546 237006 1                  LDAQ    OCLIST,QL
         5 001774   000020 755110                    STA     16,X0,PR0
         5 001775   000021 756111                    STQ     17,X1,PR0

      648     6105    2              I = I+1;

   6105  5 001776   000331 054000 1                  AOS     I

      649     6106    2              END;

   6106  5 001777   000332 054000 1                  AOS     J
         5 002000   000005 236100                    LDQ     5,,PR0
         5 002001   777777 376007                    ANQ     -1,DL
         5 002002   000332 116000 1                  CMPQ    J
         5 002003   001764 605400 5                  TPNZ    s:6104

      650     6107        /**/
      651     6108    1           HEAD$ -> TD$HEAD.CONSOLE_INDX = I;

   6108  5 002004   000331 720000 1                  LXL0    I
         5 002005   000007 740100                    STX0    7,,PR0

      652     6109    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMCONSOLES - 1;

   6109  5 002006   000332 450000 1                  STZ     J
         5 002007   002024 710000 5                  TRA     s:6112+1

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:92   
      653     6110    2              HEAD$ -> TD$HEAD.DEVNAME(I) = SCLIST(J);

   6110  5 002010   000331 235000 1                  LDA     I
         5 002011   000001 735000                    ALS     1
         5 002012   000363 470400 1                  LDP0    HEAD$
         5 002013   000000 620005                    EAX0    0,AL
         5 002014   000000 621005                    EAX1    0,AL
         5 002015   000332 236000 1                  LDQ     J
         5 002016   000001 736000                    QLS     1
         5 002017   005406 237006 1                  LDAQ    SCLIST,QL
         5 002020   000020 755110                    STA     16,X0,PR0
         5 002021   000021 756111                    STQ     17,X1,PR0

      654     6111    2              I = I+1;

   6111  5 002022   000331 054000 1                  AOS     I

      655     6112    2              END;

   6112  5 002023   000332 054000 1                  AOS     J
         5 002024   000007 236100                    LDQ     7,,PR0
         5 002025   777777 376007                    ANQ     -1,DL
         5 002026   000332 116000 1                  CMPQ    J
         5 002027   002010 605400 5                  TPNZ    s:6110

      656     6113        /**/
      657     6114    1           HEAD$ -> TD$HEAD.LP_INDX = I;

   6114  5 002030   000331 720000 1                  LXL0    I
         5 002031   000010 740100                    STX0    8,,PR0

      658     6115    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMLPS - 1;

   6115  5 002032   000332 450000 1                  STZ     J
         5 002033   002050 710000 5                  TRA     s:6118+1

      659     6116    2              HEAD$ -> TD$HEAD.DEVNAME(I) = LPLIST(J);
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:93   

   6116  5 002034   000331 235000 1                  LDA     I
         5 002035   000001 735000                    ALS     1
         5 002036   000363 470400 1                  LDP0    HEAD$
         5 002037   000000 620005                    EAX0    0,AL
         5 002040   000000 621005                    EAX1    0,AL
         5 002041   000332 236000 1                  LDQ     J
         5 002042   000001 736000                    QLS     1
         5 002043   002606 237006 1                  LDAQ    LPLIST,QL
         5 002044   000020 755110                    STA     16,X0,PR0
         5 002045   000021 756111                    STQ     17,X1,PR0

      660     6117    2              I = I+1;

   6117  5 002046   000331 054000 1                  AOS     I

      661     6118    2              END;

   6118  5 002047   000332 054000 1                  AOS     J
         5 002050   000010 236100                    LDQ     8,,PR0
         5 002051   777777 376007                    ANQ     -1,DL
         5 002052   000332 116000 1                  CMPQ    J
         5 002053   002034 605400 5                  TPNZ    s:6116

      662     6119        /**/
      663     6120    1           HEAD$ -> TD$HEAD.CR_INDX = I;

   6120  5 002054   000331 720000 1                  LXL0    I
         5 002055   000011 740100                    STX0    9,,PR0

      664     6121    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMCRS - 1;

   6121  5 002056   000332 450000 1                  STZ     J
         5 002057   002074 710000 5                  TRA     s:6124+1

      665     6122    2              HEAD$ -> TD$HEAD.DEVNAME(I) = CRLIST(J);

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:94   
   6122  5 002060   000331 235000 1                  LDA     I
         5 002061   000001 735000                    ALS     1
         5 002062   000363 470400 1                  LDP0    HEAD$
         5 002063   000000 620005                    EAX0    0,AL
         5 002064   000000 621005                    EAX1    0,AL
         5 002065   000332 236000 1                  LDQ     J
         5 002066   000001 736000                    QLS     1
         5 002067   003006 237006 1                  LDAQ    CRLIST,QL
         5 002070   000020 755110                    STA     16,X0,PR0
         5 002071   000021 756111                    STQ     17,X1,PR0

      666     6123    2              I = I+1;

   6123  5 002072   000331 054000 1                  AOS     I

      667     6124    2              END;

   6124  5 002073   000332 054000 1                  AOS     J
         5 002074   000011 236100                    LDQ     9,,PR0
         5 002075   777777 376007                    ANQ     -1,DL
         5 002076   000332 116000 1                  CMPQ    J
         5 002077   002060 605400 5                  TPNZ    s:6122

      668     6125        /**/
      669     6126    1           HEAD$ -> TD$HEAD.CP_INDX = I;

   6126  5 002100   000331 720000 1                  LXL0    I
         5 002101   000012 740100                    STX0    10,,PR0

      670     6127    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMCPS - 1;

   6127  5 002102   000332 450000 1                  STZ     J
         5 002103   002120 710000 5                  TRA     s:6130+1

      671     6128    2              HEAD$ -> TD$HEAD.DEVNAME(I) = CPLIST(J);

   6128  5 002104   000331 235000 1                  LDA     I
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:95   
         5 002105   000001 735000                    ALS     1
         5 002106   000363 470400 1                  LDP0    HEAD$
         5 002107   000000 620005                    EAX0    0,AL
         5 002110   000000 621005                    EAX1    0,AL
         5 002111   000332 236000 1                  LDQ     J
         5 002112   000001 736000                    QLS     1
         5 002113   003046 237006 1                  LDAQ    CPLIST,QL
         5 002114   000020 755110                    STA     16,X0,PR0
         5 002115   000021 756111                    STQ     17,X1,PR0

      672     6129    2              I = I+1;

   6129  5 002116   000331 054000 1                  AOS     I

      673     6130    2              END;

   6130  5 002117   000332 054000 1                  AOS     J
         5 002120   000012 236100                    LDQ     10,,PR0
         5 002121   777777 376007                    ANQ     -1,DL
         5 002122   000332 116000 1                  CMPQ    J
         5 002123   002104 605400 5                  TPNZ    s:6128

      674     6131        /**/
      675     6132    1           HEAD$ -> TD$HEAD.DP_INDX = I;

   6132  5 002124   000331 720000 1                  LXL0    I
         5 002125   000013 740100                    STX0    11,,PR0

      676     6133    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMDPS - 1;

   6133  5 002126   000332 450000 1                  STZ     J
         5 002127   002144 710000 5                  TRA     s:6136+1

      677     6134    2              HEAD$ -> TD$HEAD.DEVNAME(I) = DPLIST(J);

   6134  5 002130   000331 235000 1                  LDA     I
         5 002131   000001 735000                    ALS     1
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:96   
         5 002132   000363 470400 1                  LDP0    HEAD$
         5 002133   000000 620005                    EAX0    0,AL
         5 002134   000000 621005                    EAX1    0,AL
         5 002135   000332 236000 1                  LDQ     J
         5 002136   000001 736000                    QLS     1
         5 002137   003106 237006 1                  LDAQ    DPLIST,QL
         5 002140   000020 755110                    STA     16,X0,PR0
         5 002141   000021 756111                    STQ     17,X1,PR0

      678     6135    2              I = I+1;

   6135  5 002142   000331 054000 1                  AOS     I

      679     6136    2              END;

   6136  5 002143   000332 054000 1                  AOS     J
         5 002144   000013 236100                    LDQ     11,,PR0
         5 002145   777777 376007                    ANQ     -1,DL
         5 002146   000332 116000 1                  CMPQ    J
         5 002147   002130 605400 5                  TPNZ    s:6134

      680     6137        /**/
      681     6138    1           HEAD$ -> TD$HEAD.MT_INDX = I;

   6138  5 002150   000331 720000 1                  LXL0    I
         5 002151   000014 740100                    STX0    12,,PR0

      682     6139    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMMTS - 1;

   6139  5 002152   000332 450000 1                  STZ     J
         5 002153   002170 710000 5                  TRA     s:6142+1

      683     6140    2              HEAD$ -> TD$HEAD.DEVNAME(I) = MTLIST(J);

   6140  5 002154   000331 235000 1                  LDA     I
         5 002155   000001 735000                    ALS     1
         5 002156   000363 470400 1                  LDP0    HEAD$
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:97   
         5 002157   000000 620005                    EAX0    0,AL
         5 002160   000000 621005                    EAX1    0,AL
         5 002161   000332 236000 1                  LDQ     J
         5 002162   000001 736000                    QLS     1
         5 002163   005106 237006 1                  LDAQ    MTLIST,QL
         5 002164   000020 755110                    STA     16,X0,PR0
         5 002165   000021 756111                    STQ     17,X1,PR0

      684     6141    2              I = I+1;

   6141  5 002166   000331 054000 1                  AOS     I

      685     6142    2              END;

   6142  5 002167   000332 054000 1                  AOS     J
         5 002170   000014 236100                    LDQ     12,,PR0
         5 002171   777777 376007                    ANQ     -1,DL
         5 002172   000332 116000 1                  CMPQ    J
         5 002173   002154 605400 5                  TPNZ    s:6140

      686     6143        /**/
      687     6144    1           HEAD$ -> TD$HEAD.XX_INDX = I;

   6144  5 002174   000331 720000 1                  LXL0    I
         5 002175   000015 740100                    STX0    13,,PR0

      688     6145    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMXXS - 1;

   6145  5 002176   000332 450000 1                  STZ     J
         5 002177   002214 710000 5                  TRA     s:6148+1

      689     6146    2              HEAD$ -> TD$HEAD.DEVNAME(I) = XXLIST(J);

   6146  5 002200   000331 235000 1                  LDA     I
         5 002201   000001 735000                    ALS     1
         5 002202   000363 470400 1                  LDP0    HEAD$
         5 002203   000000 620005                    EAX0    0,AL
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:98   
         5 002204   000000 621005                    EAX1    0,AL
         5 002205   000332 236000 1                  LDQ     J
         5 002206   000001 736000                    QLS     1
         5 002207   005306 237006 1                  LDAQ    XXLIST,QL
         5 002210   000020 755110                    STA     16,X0,PR0
         5 002211   000021 756111                    STQ     17,X1,PR0

      690     6147    2              I = I+1;

   6147  5 002212   000331 054000 1                  AOS     I

      691     6148    2              END;

   6148  5 002213   000332 054000 1                  AOS     J
         5 002214   000015 236100                    LDQ     13,,PR0
         5 002215   777777 376007                    ANQ     -1,DL
         5 002216   000332 116000 1                  CMPQ    J
         5 002217   002200 605400 5                  TPNZ    s:6146

      692     6149        /**/
      693     6150    1           HEAD$ -> TD$HEAD.AP_INDX = I;

   6150  5 002220   000331 720000 1                  LXL0    I
         5 002221   000016 740100                    STX0    14,,PR0

      694     6151    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMAPS - 1;

   6151  5 002222   000332 450000 1                  STZ     J
         5 002223   002240 710000 5                  TRA     s:6154+1

      695     6152    2              HEAD$ -> TD$HEAD.DEVNAME(I) = APLIST(J);

   6152  5 002224   000331 235000 1                  LDA     I
         5 002225   000001 735000                    ALS     1
         5 002226   000363 470400 1                  LDP0    HEAD$
         5 002227   000000 620005                    EAX0    0,AL
         5 002230   000000 621005                    EAX1    0,AL
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:99   
         5 002231   000332 236000 1                  LDQ     J
         5 002232   000001 736000                    QLS     1
         5 002233   005506 237006 1                  LDAQ    APLIST,QL
         5 002234   000020 755110                    STA     16,X0,PR0
         5 002235   000021 756111                    STQ     17,X1,PR0

      696     6153    2              I = I+1;

   6153  5 002236   000331 054000 1                  AOS     I

      697     6154    2              END;

   6154  5 002237   000332 054000 1                  AOS     J
         5 002240   000016 236100                    LDQ     14,,PR0
         5 002241   777777 376007                    ANQ     -1,DL
         5 002242   000332 116000 1                  CMPQ    J
         5 002243   002224 605400 5                  TPNZ    s:6152

      698     6155        /**/
      699     6156    1           HEAD$ -> TD$HEAD.OD_INDX = I;

   6156  5 002244   000331 720000 1                  LXL0    I
         5 002245   000017 740100                    STX0    15,,PR0

      700     6157    2           DO J = 0 TO HEAD$ -> TD$HEAD.NUMODS - 1;

   6157  5 002246   000332 450000 1                  STZ     J
         5 002247   002264 710000 5                  TRA     s:6160+1

      701     6158    2              HEAD$ -> TD$HEAD.DEVNAME(I) = ODLIST(J);

   6158  5 002250   000331 235000 1                  LDA     I
         5 002251   000001 735000                    ALS     1
         5 002252   000363 470400 1                  LDP0    HEAD$
         5 002253   000000 620005                    EAX0    0,AL
         5 002254   000000 621005                    EAX1    0,AL
         5 002255   000332 236000 1                  LDQ     J
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:100  
         5 002256   000001 736000                    QLS     1
         5 002257   005606 237006 1                  LDAQ    ODLIST,QL
         5 002260   000020 755110                    STA     16,X0,PR0
         5 002261   000021 756111                    STQ     17,X1,PR0

      702     6159    2              I = I+1;

   6159  5 002262   000331 054000 1                  AOS     I

      703     6160    2              END;

   6160  5 002263   000332 054000 1                  AOS     J
         5 002264   000017 236100                    LDQ     15,,PR0
         5 002265   777777 376007                    ANQ     -1,DL
         5 002266   000332 116000 1                  CMPQ    J
         5 002267   002250 605400 5                  TPNZ    s:6158

      704     6161        /**/
      705     6162    1           WRITE_FPT.BUF_.BOUND = SIZEC(TD$HEAD)+(SIZEC(TD$HEAD.DEVNAME(0))*I) - 1;

   6162  5 002270   000331 236000 1                  LDQ     I
         5 002271   000003 736000                    QLS     3
         5 002272   000107 036007                    ADLQ    71,DL
         5 002273   000020 736000                    QLS     16
         5 002274   000134 676000 1                  ERQ     WRITE_FPT+4
         5 002275   000034 376000 xsym               ANQ     B_VECTNIL+28
         5 002276   000134 656000 1                  ERSQ    WRITE_FPT+4

      706     6163    1           WRITE_FPT.BUF_.BUF$ = HEAD$;

   6163  5 002277   000363 236000 1                  LDQ     HEAD$
         5 002300   000135 756000 1                  STQ     WRITE_FPT+5

      707     6164    1           WRITE_FPT.KEY_ = VECTOR(HEADKEY);

   6164  5 002301   000024 237000 6                  LDAQ    20
         5 002302   000132 757000 1                  STAQ    WRITE_FPT+2
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:101  

      708     6165    1           CALL M$WRITE (WRITE_FPT) ALTRET (IGT_ERR);

   6165  5 002303   000130 630400 1                  EPPR0   WRITE_FPT
         5 002304   440001 713400                    CLIMB   alt,write
         5 002305   401400 401760                    pmme    nvectors=4
         5 002306   002361 702000 5                  TSX2    IGT_ERR

      709     6166        /**/
      710     6167    1           WRITE_FPT.BUF_.BOUND = SIZEC(TD$WSN) - 1;

   6167  5 002307   000134 236000 1                  LDQ     WRITE_FPT+4
         5 002310   177777 376007                    ANQ     65535,DL
         5 002311   000023 276000 6                  ORQ     19
         5 002312   000134 756000 1                  STQ     WRITE_FPT+4

      711     6168    1           WRITE_FPT.BUF_.BUF$ = ADDR(WSNREC);

   6168  5 002313   000026 236000 6                  LDQ     22
         5 002314   000135 756000 1                  STQ     WRITE_FPT+5

      712     6169    1           WRITE_FPT.KEY_ = VECTOR(WSNKEY);

   6169  5 002315   000030 237000 6                  LDAQ    24
         5 002316   000132 757000 1                  STAQ    WRITE_FPT+2

      713     6170    1           CALL M$WRITE(WRITE_FPT) ALTRET(IGT_ERR);

   6170  5 002317   000130 630400 1                  EPPR0   WRITE_FPT
         5 002320   440001 713400                    CLIMB   alt,write
         5 002321   401400 401760                    pmme    nvectors=4
         5 002322   002361 702000 5                  TSX2    IGT_ERR

      714     6171        /**/
      715     6172    2           DO I = 0 TO HEAD$ -> TD$HEAD.NUMIOMS - 1;

   6172  5 002323   000331 450000 1                  STZ     I
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:102  
         5 002324   002350 710000 5                  TRA     s:6177+1

      716     6173    2              WRITE_FPT.BUF_.BOUND = SIZEC(TD$IOM) -1;

   6173  5 002325   000134 236000 1                  LDQ     WRITE_FPT+4
         5 002326   177777 376007                    ANQ     65535,DL
         5 002327   000032 276000 6                  ORQ     26
         5 002330   000134 756000 1                  STQ     WRITE_FPT+4

      717     6174    2              WRITE_FPT.BUF_.BUF$ = IOM$(I);

   6174  5 002331   000331 720000 1                  LXL0    I
         5 002332   000364 236010 1                  LDQ     IOM$,X0
         5 002333   000135 756000 1                  STQ     WRITE_FPT+5

      718     6175    2              WRITE_FPT.KEY_ = VECTOR(IOMKEY(I));

   6175  5 002334   000033 235000 6                  LDA     27
         5 002335   000331 236000 1                  LDQ     I
         5 002336   200130 755100                    STA     FEX+3,,AUTO
         5 002337   000035 402000 6                  MPY     29
         5 002340   000034 036000 6                  ADLQ    28
         5 002341   200130 235100                    LDA     FEX+3,,AUTO
         5 002342   000132 757000 1                  STAQ    WRITE_FPT+2

      719     6176    2              CALL M$WRITE(WRITE_FPT) ALTRET (IGT_ERR);

   6176  5 002343   000130 630400 1                  EPPR0   WRITE_FPT
         5 002344   440001 713400                    CLIMB   alt,write
         5 002345   401400 401760                    pmme    nvectors=4
         5 002346   002361 702000 5                  TSX2    IGT_ERR

      720     6177    2              END;

   6177  5 002347   000331 054000 1                  AOS     I
         5 002350   000363 470400 1                  LDP0    HEAD$
         5 002351   000000 236100                    LDQ     0,,PR0
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:103  
         5 002352   777777 376007                    ANQ     -1,DL
         5 002353   000331 116000 1                  CMPQ    I
         5 002354   002325 605400 5                  TPNZ    s:6173

      721     6178        /**/
      722     6179    1           CALL M$CLOSE(CLOSE_FPT);

   6179  5 002355   000072 630400 1                  EPPR0   CLOSE_FPT
         5 002356   050001 713400                    CLIMB   close
         5 002357   406000 401760                    pmme    nvectors=13

      723     6180    1           RETURN;

   6180  5 002360   000000 702200 xent               TSX2  ! X66_ARET

      724     6181        /**/
      725     6182    1   IGT_ERR:
      726     6183    1           ERRCODE = B$JIT$ -> B$JIT.ERR;

   6183  5 002361   000000 470400 xsym  IGT_ERR      LDP0    B$JIT$
         5 002362   000012 236100                    LDQ     10,,PR0
         5 002363   000254 756000 1                  STQ     ERRCODE

      727     6184    1           CALL M$ERRMSG(ERRMSG_FPT) ALTRET (NO_MSG);

   6184  5 002364   000144 630400 1                  EPPR0   ERRMSG_FPT
         5 002365   420000 713400                    CLIMB   alt,+8192
         5 002366   405000 401760                    pmme    nvectors=11
         5 002367   002373 702000 5                  TSX2    NO_MSG

      728     6185    1           CALL M$TEMPWROC(WROC_FPT);

   6185  5 002370   000176 630400 1                  EPPR0   WROC_FPT
         5 002371   110000 713400                    CLIMB   36864
         5 002372   401000 401760                    pmme    nvectors=3

      729     6186    1   NO_MSG:
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:104  
      730     6187    1           RETURN;

   6187  5 002373   000000 702200 xent  NO_MSG       TSX2  ! X66_ARET

      731     6188        %EJECT;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:105  
      732     6189    1   BUILD_DEVREC : PROC  ALTRET;

   6189  5 002374   200126 741300       BUILD_DEVREC STX1  ! FEX+1,,AUTO

      733     6190        /**/
      734     6191    2                    DEVREC = '0'B;

   6191  5 002375   000000 100400                    MLR     fill='000'O
         5 002376   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         5 002377   006650 000054 1                  ADSC9   DEVREC                   cn=0,n=44

      735     6192    2                    DEVREC.FLAGS.DOWN = NI$DCT.STATUS.DOWN;

   6192  5 002400   000245 470400 1                  LDP0    DCT$
         5 002401   000027 236100                    LDQ     23,,PR0
         5 002402   006661 676000 1                  ERQ     DEVREC+9
         5 002403   400000 376003                    ANQ     -131072,DU
         5 002404   006661 656000 1                  ERSQ    DEVREC+9

      736     6193    2                    DVT$ = NI$DCT.DVT$;

   6193  5 002405   000024 236100                    LDQ     20,,PR0
         5 002406   000246 756000 1                  STQ     DVT$

      737     6194    2                    DVTPTR.SEGID = %SPCL5SID;

   6194  5 002407   006026 236007                    LDQ     3094,DL
         5 002410   000246 752003 1                  STCQ    DVT$,'03'O

      738     6195    2                    IF NI$DCT.TYPE = %DV_OD THEN

   6195  5 002411   000007 236100                    LDQ     7,,PR0
         5 002412   007700 376007                    ANQ     4032,DL
         5 002413   001300 116007                    CMPQ    704,DL
         5 002414   002423 601000 5                  TNZ     s:6202

      739     6196    3                       DO;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:106  

      740     6197    3                       DEVREC.DEVTYPE = %DV_OD;

   6197  5 002415   000013 220003                    LDX0    11,DU
         5 002416   006662 740000 1                  STX0    DEVREC+10

      741     6198    3                       DEVREC.MPCNAME(0) = OPCNAME;

   6198  5 002417   040000 100500                    MLR     fill='040'O
         5 002420   200121 000010                    ADSC9   OPCNAME,,AUTO            cn=0,n=8
         5 002421   006654 000010 1                  ADSC9   DEVREC+4                 cn=0,n=8

      742     6199    3                       END;

   6199  5 002422   002500 710000 5                  TRA     s:6213

      743     6200    2                    ELSE
      744     6201    3                       DO;

      745     6202    3                       DEVREC.MODEL = NI$DVT.MODEL(NI$DCT.MODX);

   6202  5 002423   000007 236100                    LDQ     7,,PR0
         5 002424   000021 772000                    QRL     17
         5 002425   000176 376007                    ANQ     126,DL
         5 002426   000002 736000                    QLS     2
         5 002427   000246 471400 1                  LDP1    DVT$
         5 002430   040000 100506                    MLR     fill='040'O
         5 002431   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         5 002432   006650 000010 1                  ADSC9   DEVREC                   cn=0,n=8

      746     6203    3                       DEVREC.FEATURE = NI$DVT.FEATURE(NI$DCT.FX);

   6203  5 002433   000007 236100                    LDQ     7,,PR0
         5 002434   000013 772000                    QRL     11
         5 002435   000176 376007                    ANQ     126,DL
         5 002436   000002 736000                    QLS     2
         5 002437   040000 100506                    MLR     fill='040'O
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:107  
         5 002440   100027 000010                    ADSC9   23,Q,PR1                 cn=0,n=8
         5 002441   006652 000010 1                  ADSC9   DEVREC+2                 cn=0,n=8

      747     6204    3                       TEMPINDX = MPCINDX;

   6204  5 002442   200005 235100                    LDA     MPCINDX,,AUTO
         5 002443   200006 755100                    STA     TEMPINDX,,AUTO

      748     6205    4                       DO I = 0 TO NUMMPCS - 1;

   6205  5 002444   000331 450000 1                  STZ     I
         5 002445   002467 710000 5                  TRA     s:6210+1

      749     6206    4                          TEMP$ = IG$DCT$$->N$DCT$(TEMPINDX);

   6206  5 002446   000242 470400 1                  LDP0    IG$DCT$$
         5 002447   200006 720100                    LXL0    TEMPINDX,,AUTO
         5 002450   000000 236110                    LDQ     0,X0,PR0
         5 002451   000252 756000 1                  STQ     TEMP$

      750     6207    4                          TEMPPTR.SEGID = %SPCL2SID;

   6207  5 002452   006022 236007                    LDQ     3090,DL
         5 002453   000252 752003 1                  STCQ    TEMP$,'03'O

      751     6208    4                          DEVREC.MPCNAME(I) = TEMP$ -> NI$DCT.DEVNM;

   6208  5 002454   000331 235000 1                  LDA     I
         5 002455   000001 735000                    ALS     1
         5 002456   000002 735000                    ALS     2
         5 002457   000252 471400 1                  LDP1    TEMP$
         5 002460   040005 100500                    MLR     fill='040'O
         5 002461   100002 000010                    ADSC9   2,,PR1                   cn=0,n=8
         5 002462   006654 000010 1                  ADSC9   DEVREC+4,A               cn=0,n=8

      752     6209    4                          TEMPINDX = TEMPINDX + 1;

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:108  
   6209  5 002463   200006 235100                    LDA     TEMPINDX,,AUTO
         5 002464   000001 035007                    ADLA    1,DL
         5 002465   200006 755100                    STA     TEMPINDX,,AUTO

      753     6210    4                       END;                   /* DO I                               */

   6210  5 002466   000331 054000 1                  AOS     I
         5 002467   000331 236000 1                  LDQ     I
         5 002470   002446 604000 5                  TMI     s:6206
         5 002471   000334 116000 1                  CMPQ    NUMMPCS
         5 002472   002446 602000 5                  TNC     s:6206

      754     6211    3                       DEVREC.DEVTYPE = NI$DVT.TYPE;

   6211  5 002473   000246 470400 1                  LDP0    DVT$
         5 002474   000053 236100                    LDQ     43,,PR0
         5 002475   000033 772000                    QRL     27
         5 002476   000000 620006                    EAX0    0,QL
         5 002477   006662 740000 1                  STX0    DEVREC+10

      755     6212    3                       END;    /* ELSE */

      756     6213    2                    DEVREC.DEVNUM = NI$DCT.DVN;

   6213  5 002500   000245 470400 1                  LDP0    DCT$
         5 002501   000007 236100                    LDQ     7,,PR0
         5 002502   000030 772000                    QRL     24
         5 002503   000077 376007                    ANQ     63,DL
         5 002504   000000 621006                    EAX1    0,QL
         5 002505   006662 441000 1                  SXL1    DEVREC+10

      757     6214    2                    IF NI$DCT.RAT$ ~= ADDR(NIL)

   6214  5 002506   000005 236100                    LDQ     5,,PR0
         5 002507   000001 116000 xsym               CMPQ    B_VECTNIL+1
         5 002510   002520 600000 5                  TZE     s:6221

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:109  
      758     6215    2                       THEN                /* GET ATTR OUT OF RAT                */
      759     6216    3                       DO;

      760     6217    3                          RAT$ = NI$DCT.RAT$;

   6217  5 002511   000247 756000 1                  STQ     RAT$

      761     6218    3                          RATPTR.SEGID = %SPCL2SID;

   6218  5 002512   006022 236007                    LDQ     3090,DL
         5 002513   000247 752003 1                  STCQ    RAT$,'03'O

      762     6219    3                          DEVREC.ATTR = FR$RAT.M1;

   6219  5 002514   000247 471400 1                  LDP1    RAT$
         5 002515   100006 222100                    LDX2    6,,PR1
         5 002516   006661 442000 1                  SXL2    DEVREC+9

      763     6220    3                       END;                /* IF ~= ADDR(NIL)                    */

   6220  5 002517   002523 710000 5                  TRA     s:6222

      764     6221    2                       ELSE DEVREC.ATTR = NI$DVT.ATTR;

   6221  5 002520   000246 471400 1                  LDP1    DVT$
         5 002521   100056 722100                    LXL2    46,,PR1
         5 002522   006661 442000 1                  SXL2    DEVREC+9

      765     6222    2                    IF (NI$DCT.TYPE = %DV_LP OR

   6222  5 002523   000007 236100                    LDQ     7,,PR0
         5 002524   007700 376007                    ANQ     4032,DL
         5 002525   000300 116007                    CMPQ    192,DL
         5 002526   002537 600000 5                  TZE     s:6229
         5 002527   000100 116007                    CMPQ    64,DL
         5 002530   002537 600000 5                  TZE     s:6229
         5 002531   001000 116007                    CMPQ    512,DL
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:110  
         5 002532   002537 600000 5                  TZE     s:6229
         5 002533   001300 116007                    CMPQ    704,DL
         5 002534   002537 600000 5                  TZE     s:6229
         5 002535   000200 116007                    CMPQ    128,DL
         5 002536   002554 601000 5                  TNZ     s:6234

      766     6223    2                        NI$DCT.TYPE = %DV_CR OR
      767     6224    2                        NI$DCT.TYPE = %DV_AP OR
      768     6225    2                        NI$DCT.TYPE = %DV_OD OR
      769     6226    2                        NI$DCT.TYPE = %DV_CP)
      770     6227    2                       THEN                /* One Logical Channel per device     */
      771     6228    3                       DO;

      772     6229    3                          DQH$ = NI$DCT.DQH$;

   6229  5 002537   000023 236100                    LDQ     19,,PR0
         5 002540   000251 756000 1                  STQ     DQH$

      773     6230    3                          DQHPTR.SEGID = %SPCL2SID;

   6230  5 002541   006022 236007                    LDQ     3090,DL
         5 002542   000251 752003 1                  STCQ    DQH$,'03'O

      774     6231    3                          DEVREC.IOCHAN.IOM = NI$DQH.IOCHAN.IOM;

   6231  5 002543   000251 471400 1                  LDP1    DQH$
         5 002544   100001 236100                    LDQ     1,,PR1
         5 002545   000600 376003                    ANQ     384,DU
         5 002546   000007 772000                    QRL     7
         5 002547   006660 552020 1                  STBQ    DEVREC+8,'20'O

      775     6232    3                          DEVREC.IOCHAN.CHAN = NI$DQH.IOCHAN.CHANNEL;

   6232  5 002550   100001 236100                    LDQ     1,,PR1
         5 002551   000177 376003                    ANQ     127,DU
         5 002552   000011 772000                    QRL     9
         5 002553   006660 552010 1                  STBQ    DEVREC+8,'10'O
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:111  

      776     6233    3                       END;                          /* IF UNIT RECORD  */

      777     6234    2                    WRITE_FPT.KEY_ = VECTOR(DEVKEY);

   6234  5 002554   000010 237000 6                  LDAQ    8
         5 002555   000132 757000 1                  STAQ    WRITE_FPT+2

      778     6235    2                    WRITE_FPT.BUF_ = VECTOR(DEVREC);

   6235  5 002556   000012 237000 6                  LDAQ    10
         5 002557   000134 757000 1                  STAQ    WRITE_FPT+4

      779     6236    2                    CALL M$WRITE(WRITE_FPT) ALTRET(IGT_BUG);

   6236  5 002560   000130 630400 1                  EPPR0   WRITE_FPT
         5 002561   440001 713400                    CLIMB   alt,write
         5 002562   401400 401760                    pmme    nvectors=4
         5 002563   002566 702000 5                  TSX2    IGT_BUG

      780     6237    2        RETURN;

   6237  5 002564   200126 221300                    LDX1  ! FEX+1,,AUTO
         5 002565   000001 702211                    TSX2  ! 1,X1

      781     6238        /**/
      782     6239    2   IGT_BUG:
      783     6240    2           ERRCODE = B$JIT$ -> B$JIT.ERR;

   6240  5 002566   000000 470400 xsym  IGT_BUG      LDP0    B$JIT$
         5 002567   000012 236100                    LDQ     10,,PR0
         5 002570   000254 756000 1                  STQ     ERRCODE

      784     6241    2           CALL M$ERRMSG(ERRMSG_FPT) ALTRET (NO_BUG);

   6241  5 002571   000144 630400 1                  EPPR0   ERRMSG_FPT
         5 002572   420000 713400                    CLIMB   alt,+8192
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:112  
         5 002573   405000 401760                    pmme    nvectors=11
         5 002574   002600 702000 5                  TSX2    NO_BUG

      785     6242    2           CALL M$TEMPWROC(WROC_FPT);

   6242  5 002575   000176 630400 1                  EPPR0   WROC_FPT
         5 002576   110000 713400                    CLIMB   36864
         5 002577   401000 401760                    pmme    nvectors=3

      786     6243    2   NO_BUG:
      787     6244    2       ALTRETURN;

   6244  5 002600   200126 221300       NO_BUG       LDX1  ! FEX+1,,AUTO
         5 002601   000000 702211                    TSX2  ! 0,X1

      788     6245        /**/
      789     6246    2   END BUILD_DEVREC;
      790     6247        %EJECT;
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:113  
      791     6248    1   OPC_STUFF : PROC  ALTRET;

   6248  5 002602   200124 741300       OPC_STUFF    STX1  ! OPCNUM+1,,AUTO

      792     6249        /**/
      793     6250    2   DCL FEX UBIN;
      794     6251
      795     6252    2        OPC$ = ADDR( FP_OPCI$$ );

   6252  5 002603   000021 236000 6                  LDQ     17
         5 002604   000340 756000 1                  STQ     OPC$

      796     6253    2        OPCPTR.SEGID = %SPCL1SID;

   6253  5 002605   006021 236007                    LDQ     3089,DL
         5 002606   000340 752003 1                  STCQ    OPC$,'03'O

      797     6254    2        OPC$ = OPC$->B$PTR(0);

   6254  5 002607   000340 470400 1                  LDP0    OPC$
         5 002610   000000 236100                    LDQ     0,,PR0
         5 002611   000340 756000 1                  STQ     OPC$

      798     6255    2        OPCPTR.SEGID = %SPCL2SID;

   6255  5 002612   006022 236007                    LDQ     3090,DL
         5 002613   000340 752003 1                  STCQ    OPC$,'03'O

      799     6256    3        DO WHILE OPCPTR.OFFSET~=0 /*ADDR(NIL)*/ ;

   6256  5 002614   000340 220000 1                  LDX0    OPC$
         5 002615   003102 600000 5                  TZE     s:6318

      800     6257    3           CURDCTX = 0;               /* GOT AN  OPC  */

   6257  5 002616   000326 450000 1                  STZ     CURDCTX

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:114  
      801     6258    3           OPCNAME = 'OP000000';

   6258  5 002617   000026 237000 4                  LDAQ    HEXBUF+15
         5 002620   200121 755100                    STA     OPCNAME,,AUTO
         5 002621   200122 756100                    STQ     OPCNAME+1,,AUTO

      802     6259    3           FEX = OPC$->FP$OPCI.FEI#;

   6259  5 002622   000340 470400 1                  LDP0    OPC$
         5 002623   000001 235100                    LDA     1,,PR0
         5 002624   200125 755100                    STA     FEX,,AUTO

      803     6260    3                 TEMP$ = IG_FEI$$->B$PTR(FEX);

   6260  5 002625   000243 471400 1                  LDP1    IG_FEI$$
         5 002626   100000 236105                    LDQ     0,AL,PR1
         5 002627   000252 756000 1                  STQ     TEMP$

      804     6261    3                 TEMPPTR.SEGID = %SPCL2SID;

   6261  5 002630   006022 236007                    LDQ     3090,DL
         5 002631   000252 752003 1                  STCQ    TEMP$,'03'O

      805     6262    3                 CALL BINCHAR(OPCNUM,MOD(TEMP$->KI$FEI.FEP#,100));

   6262  5 002632   000252 473400 1                  LDP3    TEMP$
         5 002633   300012 236100                    LDQ     10,,PR3
         5 002634   000011 772000                    QRL     9
         5 002635   000777 376007                    ANQ     511,DL
         5 002636   000144 506007                    DIV     100,DL
         5 002637   000044 773000                    LRL     36
         5 002640   200130 757100                    STAQ    FEX+3,,AUTO
         5 002641   000100 301500                    BTD
         5 002642   200130 000010                    NDSC9   FEX+3,,AUTO              cn=0,s=lsgnf,sf=0,n=8
         5 002643   200123 030002                    NDSC9   OPCNUM,,AUTO             cn=0,s=nosgn,sf=0,n=2

      806     6263    3                 CALL CONCAT(SUBSTR(OPCNAME,0,4),'OP',OPCNUM);
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:115  

   6263  5 002644   000026 220000 4                  LDX0    HEXBUF+15
         5 002645   200121 740100                    STX0    OPCNAME,,AUTO
         5 002646   200123 221100                    LDX1    OPCNUM,,AUTO
         5 002647   200121 441100                    SXL1    OPCNAME,,AUTO

      807     6264    3             OCLIST(HEAD$ -> TD$HEAD.NUMOPCS) = OPCNAME;

   6264  5 002650   000363 470400 1                  LDP0    HEAD$
         5 002651   000005 720100                    LXL0    5,,PR0
         5 002652   000000 635010                    EAA     0,X0
         5 002653   000021 771000                    ARL     17
         5 002654   000002 735000                    ALS     2
         5 002655   040005 100500                    MLR     fill='040'O
         5 002656   200121 000010                    ADSC9   OPCNAME,,AUTO            cn=0,n=8
         5 002657   005546 000010 1                  ADSC9   OCLIST,A                 cn=0,n=8

      808     6265    3             HEAD$->TD$HEAD.NUMOPCS = HEAD$->TD$HEAD.NUMOPCS + 1;

   6265  5 002660   000001 621010                    EAX1    1,X0
         5 002661   000005 441100                    SXL1    5,,PR0

      809     6266        /**/
      810     6267    4           DO UNTIL (SUBSTR(NI$DCT.DEVNM,0,2) = 'OD'  AND

      811     6268    4                     NI$DQH.FEX = FEX ) OR CURDCTX > MAXDCTX;
      812     6269    4             CURDCTX = CURDCTX + 1;

   6269  5 002662   000326 235000 1                  LDA     CURDCTX
         5 002663   000001 035007                    ADLA    1,DL
         5 002664   000326 755000 1                  STA     CURDCTX

      813     6270    4             DCT$ = IG$DCT$$->N$DCT$(CURDCTX);

   6270  5 002665   000242 470400 1                  LDP0    IG$DCT$$
         5 002666   000000 236105                    LDQ     0,AL,PR0
         5 002667   000245 756000 1                  STQ     DCT$
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:116  

      814     6271    4             DCTPTR.SEGID = %SPCL2SID;

   6271  5 002670   006022 236007                    LDQ     3090,DL
         5 002671   000245 752003 1                  STCQ    DCT$,'03'O

      815     6272    4             DQH$ = NI$DCT.DQH$;

   6272  5 002672   000245 471400 1                  LDP1    DCT$
         5 002673   100023 236100                    LDQ     19,,PR1
         5 002674   000251 756000 1                  STQ     DQH$

      816     6273    4             DQHPTR.SEGID = %SPCL2SID;

   6273  5 002675   006022 236007                    LDQ     3090,DL
         5 002676   000251 752003 1                  STCQ    DQH$,'03'O

      817     6274    4             END;           /* DO UNTIL   */

   6274  5 002677   100002 220100                    LDX0    2,,PR1
         5 002700   000020 100000 4                  CMPX0   HEXBUF+9
         5 002701   002710 601000 5                  TNZ     s:6274+9
         5 002702   000251 473400 1                  LDP3    DQH$
         5 002703   300001 236100                    LDQ     1,,PR3
         5 002704   000006 772000                    QRL     6
         5 002705   000077 376007                    ANQ     63,DL
         5 002706   200125 116100                    CMPQ    FEX,,AUTO
         5 002707   002713 600000 5                  TZE     s:6275
         5 002710   000330 236000 1                  LDQ     MAXDCTX
         5 002711   000326 116000 1                  CMPQ    CURDCTX
         5 002712   002662 603000 5                  TRC     s:6269

      818     6275    3           IF CURDCTX <= MAXDCTX

   6275  5 002713   000330 236000 1                  LDQ     MAXDCTX
         5 002714   000326 116000 1                  CMPQ    CURDCTX
         5 002715   003073 602000 5                  TNC     s:6315
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:117  

      819     6276    3           THEN
      820     6277    4             DO;

      821     6278    4             NUMDEVS = 0;

   6278  5 002716   000335 450000 1                  STZ     NUMDEVS

      822     6279    4             DEVNAME = '0'B;

   6279  5 002717   000100 100400                    MLR     fill='000'O
         5 002720   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         5 002721   200007 000410                    ADSC9   DEVNAME,,AUTO            cn=0,n=264

      823     6280    4             NUMMPCS = 1;

   6280  5 002722   000001 235007                    LDA     1,DL
         5 002723   000334 755000 1                  STA     NUMMPCS

      824     6281    4             TEMP$ = NI$DCT.DQH$;

   6281  5 002724   100023 236100                    LDQ     19,,PR1
         5 002725   000252 756000 1                  STQ     TEMP$

      825     6282    4             TEMPPTR.SEGID = %SPCL2SID;

   6282  5 002726   006022 236007                    LDQ     3090,DL
         5 002727   000252 752003 1                  STCQ    TEMP$,'03'O

      826     6283    5             DO WHILE CURDCTX <= MAXDCTX AND SUBSTR(NI$DCT.DEVNM,0,2) = 'OD'  AND

   6283  5 002730   002777 710000 5                  TRA     s:6298

      827     6284    5                     TEMP$->NI$DQH.FEX = FEX;
      828     6285    5               DEVKEY.TEXT = NI$DCT.DEVNM;

   6285  5 002731   000245 470400 1                  LDP0    DCT$
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:118  
         5 002732   040000 100500                    MLR     fill='040'O
         5 002733   000002 000010                    ADSC9   2,,PR0                   cn=0,n=8
         5 002734   000377 200010 1                  ADSC9   DEVKEY                   cn=1,n=8

      829     6286    5               DEVNAME(NUMDEVS) = DEVKEY.TEXT;

   6286  5 002735   000335 235000 1                  LDA     NUMDEVS
         5 002736   000001 735000                    ALS     1
         5 002737   000002 735000                    ALS     2
         5 002740   040105 100400                    MLR     fill='040'O
         5 002741   000377 200010 1                  ADSC9   DEVKEY                   cn=1,n=8
         5 002742   200007 000010                    ADSC9   DEVNAME,A,AUTO           cn=0,n=8

      830     6287    5               NUMDEVS = NUMDEVS + 1;

   6287  5 002743   000335 235000 1                  LDA     NUMDEVS
         5 002744   000001 035007                    ADLA    1,DL
         5 002745   000335 755000 1                  STA     NUMDEVS

      831     6288    5                  ODLIST(HEAD$->TD$HEAD.NUMODS) = DEVKEY.TEXT;

   6288  5 002746   000363 471400 1                  LDP1    HEAD$
         5 002747   100017 720100                    LXL0    15,,PR1
         5 002750   000000 636010                    EAQ     0,X0
         5 002751   000021 772000                    QRL     17
         5 002752   000002 736000                    QLS     2
         5 002753   040006 100400                    MLR     fill='040'O
         5 002754   000377 200010 1                  ADSC9   DEVKEY                   cn=1,n=8
         5 002755   005606 000010 1                  ADSC9   ODLIST,Q                 cn=0,n=8

      832     6289    5                  HEAD$->TD$HEAD.NUMODS = HEAD$->TD$HEAD.NUMODS + 1;

   6289  5 002756   000001 621010                    EAX1    1,X0
         5 002757   100017 441100                    SXL1    15,,PR1

      833     6290
      834     6291    5                  CALL BUILD_DEVREC  ALTRET(NO_OPC_BUG);
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:119  

   6291  5 002760   002374 701000 5                  TSX1    BUILD_DEVREC
         5 002761   003116 702000 5                  TSX2    NO_OPC_BUG

      835     6292
      836     6293    5               CURDCTX = CURDCTX + 1;

   6293  5 002762   000326 235000 1                  LDA     CURDCTX
         5 002763   000001 035007                    ADLA    1,DL
         5 002764   000326 755000 1                  STA     CURDCTX

      837     6294    5               DCT$ = IG$DCT$$->N$DCT$(CURDCTX);

   6294  5 002765   000242 470400 1                  LDP0    IG$DCT$$
         5 002766   000000 236105                    LDQ     0,AL,PR0
         5 002767   000245 756000 1                  STQ     DCT$

      838     6295    5               DCTPTR.SEGID = %SPCL2SID;

   6295  5 002770   006022 236007                    LDQ     3090,DL
         5 002771   000245 752003 1                  STCQ    DCT$,'03'O

      839     6296    5               TEMP$ = NI$DCT.DQH$;

   6296  5 002772   000245 471400 1                  LDP1    DCT$
         5 002773   100023 236100                    LDQ     19,,PR1
         5 002774   000252 756000 1                  STQ     TEMP$

      840     6297    5               TEMPPTR.SEGID = %SPCL2SID;

   6297  5 002775   006022 236007                    LDQ     3090,DL
         5 002776   000252 752003 1                  STCQ    TEMP$,'03'O

      841     6298    5             END;  /* do while  */

   6298  5 002777   000330 236000 1                  LDQ     MAXDCTX
         5 003000   000326 116000 1                  CMPQ    CURDCTX
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:120  
         5 003001   003013 602000 5                  TNC     s:6300
         5 003002   100002 220100                    LDX0    2,,PR1
         5 003003   000020 100000 4                  CMPX0   HEXBUF+9
         5 003004   003013 601000 5                  TNZ     s:6300
         5 003005   000252 473400 1                  LDP3    TEMP$
         5 003006   300001 236100                    LDQ     1,,PR3
         5 003007   000006 772000                    QRL     6
         5 003010   000077 376007                    ANQ     63,DL
         5 003011   200125 116100                    CMPQ    FEX,,AUTO
         5 003012   002731 600000 5                  TZE     s:6285

      842     6299                                           /* build an MPC for the OPC */
      843     6300    4             MPCREC = '0'B;

   6300  5 003013   000000 100400                    MLR     fill='000'O
         5 003014   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         5 003015   006663 000504 1                  ADSC9   MPCREC                   cn=0,n=324

      844     6301    4             DEVKEY.TEXT = OPCNAME;

   6301  5 003016   040000 100500                    MLR     fill='040'O
         5 003017   200121 000010                    ADSC9   OPCNAME,,AUTO            cn=0,n=8
         5 003020   000377 200010 1                  ADSC9   DEVKEY                   cn=1,n=8

      845     6302    4             MPCREC.NUMDEVS = NUMDEVS;

   6302  5 003021   000335 720000 1                  LXL0    NUMDEVS
         5 003022   006675 740000 1                  STX0    MPCREC+10

      846     6303    4             MPCREC.DEVNAME = DEVNAME;

   6303  5 003023   000000 100500                    MLR     fill='000'O
         5 003024   200007 000410                    ADSC9   DEVNAME,,AUTO            cn=0,n=264
         5 003025   006702 000410 1                  ADSC9   MPCREC+15                cn=0,n=264

      847     6304    4             MPCREC.FLAGS.DOWN = NI$DQH.STATUS.DOWN;

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:121  
   6304  5 003026   000251 473400 1                  LDP3    DQH$
         5 003027   300001 236100                    LDQ     1,,PR3
         5 003030   000021 772000                    QRL     17
         5 003031   006675 676000 1                  ERQ     MPCREC+10
         5 003032   400000 376007                    ANQ     -131072,DL
         5 003033   006675 656000 1                  ERSQ    MPCREC+10

      848     6305    4             MPCREC.FWNAME = 'NONE';

   6305  5 003034   000030 236000 4                  LDQ     HEXBUF+17
         5 003035   006676 756000 1                  STQ     MPCREC+11

      849     6306    4             MPCREC.IOCHAN.PRESENCE(0) = '1'B;

   6306  5 003036   400000 236003                    LDQ     -131072,DU
         5 003037   006665 256000 1                  ORSQ    MPCREC+2

      850     6307    4             MPCREC.IOCHAN.IOM(0) = NI$DQH.IOCHAN.IOM;

   6307  5 003040   300001 236100                    LDQ     1,,PR3
         5 003041   000600 376003                    ANQ     384,DU
         5 003042   000007 772000                    QRL     7
         5 003043   006665 552020 1                  STBQ    MPCREC+2,'20'O

      851     6308    4             MPCREC.IOCHAN.LOCHAN(0) = NI$DQH.IOCHAN.CHANNEL;

   6308  5 003044   300001 236100                    LDQ     1,,PR3
         5 003045   000177 376003                    ANQ     127,DU
         5 003046   000011 772000                    QRL     9
         5 003047   006665 552010 1                  STBQ    MPCREC+2,'10'O

      852     6309    4             MPCREC.IOCHAN.HICHAN(0) = NI$DQH.IOCHAN.CHANNEL;

   6309  5 003050   300001 236100                    LDQ     1,,PR3
         5 003051   000177 376003                    ANQ     127,DU
         5 003052   000022 772000                    QRL     18
         5 003053   006665 552004 1                  STBQ    MPCREC+2,'04'O
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:122  

      853     6310    4             WRITE_FPT.KEY_ = VECTOR(DEVKEY);

   6310  5 003054   000010 237000 6                  LDAQ    8
         5 003055   000132 757000 1                  STAQ    WRITE_FPT+2

      854     6311    4             WRITE_FPT.BUF_ = VECTOR(MPCREC);

   6311  5 003056   000016 237000 6                  LDAQ    14
         5 003057   000134 757000 1                  STAQ    WRITE_FPT+4

      855     6312    4            WRITE_FPT.BUF_.BOUND = SIZEC(TD$MPC) + (SIZEC(TD$MPC.DEVNAME(0))*(NUMDEVS-
              6312                      1)) - 1;

   6312  5 003060   000335 236000 1                  LDQ     NUMDEVS
         5 003061   000003 736000                    QLS     3
         5 003062   000073 036007                    ADLQ    59,DL
         5 003063   000020 736000                    QLS     16
         5 003064   000134 676000 1                  ERQ     WRITE_FPT+4
         5 003065   000034 376000 xsym               ANQ     B_VECTNIL+28
         5 003066   000134 656000 1                  ERSQ    WRITE_FPT+4

      856     6313    4             CALL M$WRITE (WRITE_FPT) ALTRET (IGT_OPC_ERR);

   6313  5 003067   000130 630400 1                  EPPR0   WRITE_FPT
         5 003070   440001 713400                    CLIMB   alt,write
         5 003071   401400 401760                    pmme    nvectors=4
         5 003072   003104 702000 5                  TSX2    IGT_OPC_ERR

      857     6314    4          END;  /* IF */

      858     6315    3          OPC$ = OPC$->FP$OPCI.LNK$;

   6315  5 003073   000340 470400 1                  LDP0    OPC$
         5 003074   000000 236100                    LDQ     0,,PR0
         5 003075   000340 756000 1                  STQ     OPC$

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:123  
      859     6316    3          OPCPTR.SEGID = %SPCL2SID;

   6316  5 003076   006022 236007                    LDQ     3090,DL
         5 003077   000340 752003 1                  STCQ    OPC$,'03'O

      860     6317    3        END;  /* while  */

   6317  5 003100   000340 220000 1                  LDX0    OPC$
         5 003101   002616 601000 5                  TNZ     s:6257

      861     6318    2     RETURN;

   6318  5 003102   200124 221300                    LDX1  ! OPCNUM+1,,AUTO
         5 003103   000001 702211                    TSX2  ! 1,X1

      862     6319        /**/
      863     6320    2   IGT_OPC_ERR:
      864     6321    2             ERRCODE = B$JIT$ -> B$JIT.ERR;

   6321  5 003104   000000 470400 xsym  IGT_OPC_ERR  LDP0    B$JIT$
         5 003105   000012 236100                    LDQ     10,,PR0
         5 003106   000254 756000 1                  STQ     ERRCODE

      865     6322    2             CALL M$ERRMSG(ERRMSG_FPT) ALTRET (NO_OPC_BUG);

   6322  5 003107   000144 630400 1                  EPPR0   ERRMSG_FPT
         5 003110   420000 713400                    CLIMB   alt,+8192
         5 003111   405000 401760                    pmme    nvectors=11
         5 003112   003116 702000 5                  TSX2    NO_OPC_BUG

      866     6323    2             CALL M$TEMPWROC(WROC_FPT);

   6323  5 003113   000176 630400 1                  EPPR0   WROC_FPT
         5 003114   110000 713400                    CLIMB   36864
         5 003115   401000 401760                    pmme    nvectors=3

      867     6324    2   NO_OPC_BUG:
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:124  
      868     6325    2          ALTRETURN;

   6325  5 003116   200124 221300       NO_OPC_BUG   LDX1  ! OPCNUM+1,,AUTO
         5 003117   000000 702211                    TSX2  ! 0,X1
      869     6326    2   END OPC_STUFF;
      870     6327    1   END  IGT$TDFILE;

PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:125  
--  Include file information  --

   FP_MACRO_C.:E05TOU  is referenced.
   IT_SUBS_C.:E05TOU  is referenced.
   N_FC_C.:E05TOU  is referenced.
   FR$RAT.:E05TOU  is referenced.
   B$MAP.:E05TOU  cannot be made into a system file and is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   TD$STRUCT.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   M_INFO_C.:E05TOU  is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   NI_DATA_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   KI_MACROS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IGT$TDFILE.
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:126  

 **** Variables and constants ****

  ****  Section 001  Data  IGT$TDFILE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

  5446-0-0/c CHAR(8)     r     1 ACLIST(0:15)            5506-0-0/c CHAR(8)     r     1 APLIST(0:15)
   337-0-0/b BIT         r     1 BUF                      253-0-0/w PTR         r     1 CHT$
   253-0-0/w STRC        r     1 CHTPTR                    72-0-0/d STRC(1080)  r     1 CLOSE_FPT
  3046-0-0/c CHAR(8)     r     1 CPLIST(0:15)            3006-0-0/c CHAR(8)     r     1 CRLIST(0:15)
   326-0-0/w UBIN        r     1 CURDCTX                 2506-0-0/c CHAR(8)     r     1 DCLIST(0:15)
   245-0-0/w PTR         r     1 DCT$                     245-0-0/w STRC        r     1 DCTPTR
   377-0-0/c STRC(81)    r     1 DEVKEY                  6650-0-0/w STRC(396)   r     1 DEVREC
  3106-0-0/c CHAR(8)     r     1 DPLIST(0:511)            251-0-0/w PTR         r     1 DQH$
   251-0-0/w STRC        r     1 DQHPTR                   246-0-0/w PTR         r     1 DVT$
   246-0-0/w STRC        r     1 DVTPTR                   255-0-0/c STRC(1116)  r     1 ERRBUF
   254-0-0/b BIT         r     1 ERRCODE                  144-0-0/d STRC(936)   r     1 ERRMSG_FPT
   230-0-0/c STRC(72)    r     1 FILENAME                 220-0-0/d STRC(288)   r     1 FPT_IOQ
   363-0-0/w PTR         r     1 HEAD$                    370-0-0/b STRC(18)    r     1 HEADKEY
  6006-0-0/w STRC(15048) r     1 HEADREC                  331-0-0/w SBIN        r     1 I
   242-0-0/w PTR         r     1 IG$DCT$$                 242-0-0/w STRC        r     1 IG$DCT$PTR
   244-0-0/w PTR         r     1 IG$DVT$                  244-0-0/w STRC        r     1 IG$DVTPTR
   243-0-0/w PTR         r     1 IG_FEI$$                 364-0-0/w PTR         r     1 IOM$(0:3)
   372-0-0/c STRC(45)    r     1 IOMKEY(0:3)              402-0-0/w STRC(9540)  r     1 IOMREC1
  1013-0-0/w STRC(9540)  r     1 IOMREC2                 1424-0-0/w STRC(9540)  r     1 IOMREC3
  2035-0-0/w STRC(9540)  r     1 IOMREC4                  332-0-0/w SBIN        r     1 J
   333-0-0/w SBIN        r     1 K                       2606-0-0/c CHAR(8)     r     1 LPLIST(0:63)
   330-0-0/w UBIN        r     1 MAXDCTX                  336-0-0/w UBIN        r     1 MAX_FEP
  6663-0-0/w STRC(2916)  r     1 MPCREC                  5106-0-0/c CHAR(8)     r     1 MTLIST(0:63)
   335-0-0/w UBIN        r     1 NUMDEVS                  334-0-0/w UBIN        r     1 NUMMPCS
  5546-0-0/c CHAR(8)     r     1 OCLIST(0:15)            5606-0-0/c CHAR(8)     r     1 ODLIST(0:63)
   340-0-0/w PTR         r     1 OPC$                     340-0-0/w STRC        r     1 OPCPTR
   361-0-0/b BIT         r     1 OPC_FOUND                  0-0-0/d STRC(2088)  r     1 OPEN_FPT
   247-0-0/w PTR         r     1 RAT$                     247-0-0/w STRC        r     1 RATPTR
   232-0-0/w STRC(126)   r     1 RDONLY                   216-0-0/d STRC(72)    r     1 RESULTS
  5406-0-0/c CHAR(8)     r     1 SCLIST(0:15)             250-0-0/w PTR         r     1 SQH$
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:127  
   314-0-0/c STRC(108)   r     1 SUBBUF_1                 317-0-0/c STRC(108)   r     1 SUBBUF_2
   206-0-0/d STRC(288)   r     1 SYSCON_FPT              2546-0-0/c CHAR(8)     r     1 TCLIST(0:15)
   252-0-0/w PTR         r     1 TEMP$                    252-0-0/w STRC        r     1 TEMPPTR
  2446-0-0/c CHAR(8)     r     1 UCLIST(0:15)             236-0-0/w STRC(117)   r     1 VEHICLE
   130-0-0/d STRC(432)   r     1 WRITE_FPT                176-0-0/d STRC(288)   r     1 WROC_FPT
   371-0-0/c STRC        r     1 WSNKEY                  7004-0-0/w STRC(288)   r     1 WSNREC
  5306-0-0/c CHAR(8)     r     1 XXLIST(0:31)

  ****  Section 004 RoData IGT$TDFILE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     7-0-0/c CHAR(16)    r     1 HEXBUF                     0-0-0/c CHAR(26)    r     1 LETBUF

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/b BIT         r     1 ALL_DONE                   7-0-0/c CHAR(8)     r     1 DEVNAME(0:32)
     3-0-0/b BIT         r     1 DONE_SCS                 115-0-0/c CHAR(6)     r     1 FEPNAME
   117-0-0/c CHAR(3)     r     1 FEPNUM                   125-0-0/w UBIN        r     1 FEX
   120-0-0/w UBIN        r     1 FWREV_ADDR               111-0-0/w UBIN        r     1 INDX
   112-0-0/c CHAR        r     1 IOM#                     113-0-0/c CHAR(4)     r     1 IOM_NAME
   114-0-0/w UBIN        r     1 LEN                        5-0-0/w UBIN        r     1 MPCINDX
   121-0-0/c CHAR(8)     r     1 OPCNAME                  123-0-0/c CHAR(2)     r     1 OPCNUM
     6-0-0/w UBIN        r     1 TEMPINDX

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$JIT$                     0-0-0/w PTR         r     1 FP_OPCI$$
     0-0-0/c STRC(288)   r     1 IT_WSN                     0-0-0/w PTR         r     1 KI_FEI$$
     0-0-0/w UBIN        r     1 KI_MXFE                    0-0-0/w PTR         r     1 N$DCT$$
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:128  
     0-0-0/w PTR         r     1 N$FQ$                      0-0-0/w PTR         r     1 NI$CHT$
     0-0-0/w PTR         r     1 NI$DVT$(0:49)              0-0-0/w PTR         r     1 NI$FQ$
     0-0-0/w PTR         r     1 NI$IBUF$
     0-0-0/w PTR         r     1 NI$IOM$(0:3)
     0-0-0/w PTR         r     1 NI$RP$                     0-0-0/w SBIN        r     1 NI_IOMS
     0-0-0/w UBIN        r     1 NK_MXLOCAL

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(8856)  r     1 B$JIT                      0-0-0/w PTR         r     1 B$PTR(0:0)
     0-0-0/w UBIN        r     1 B$TABLE(0:0)
     0-0-0/w STRC        r     1 DPBUF                      0-0-0/w STRC(108)   r     1 FP$OPCI
     0-0-0/w STRC(324)   r     1 FR$RAT                     0-0-0/w STRC(612)   r     1 KI$FEI
     0-0-0N  NULL        r     1 M$CONFG                    0-0-0N  NULL        r     1 M$MPC
     0-0-0/w STRC        r     1 MTBUF                      0-0-0/w PTR         r     1 N$DCT$(0:0)
     0-0-0/w STRC(72)    r     1 NI$CHT(0:0)                0-0-0/w STRC(1332)  r     1 NI$DCT
     0-0-0/w STRC(648)   r     1 NI$DQH                     0-0-0/w STRC(2844)  r     1 NI$DVT
     0-0-0/w STRC(252)   r     1 NI$IOM                     0-0-0/w STRC(648)   r     1 TD$HEAD
     0-0-0/w STRC(9540)  r     1 TD$IOM                     0-0-0/w STRC(612)   r     1 TD$MPC
     0-0-0/w STRC(288)   r     1 TD$WSN


   Procedure IGT$TDFILE requires 1616 words for executable code.
   Procedure IGT$TDFILE requires 90 words of local(AUTO) storage.

    No errors detected in file IGT$TDFILE.:E05TSI    .
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:129  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:130  
          MINI XREF LISTING

ACLIST
      5667**DCL      5855<<ASSIGN   5878<<ASSIGN   6096>>ASSIGN
ALL_DONE
      5272**DCL      5837<<ASSIGN   5839>>DOUNTIL  5849<<ASSIGN   5935<<ASSIGN
APLIST
      5668**DCL      5906<<ASSIGN   6152>>ASSIGN
B$JIT.CPFLAGS1.SLEAZE
      1955**DCL      1955--REDEF
B$JIT.ERR
      1861**DCL      6183>>ASSIGN   6240>>ASSIGN   6321>>ASSIGN
B$JIT.ERR.MID
      1862**DCL      1862--REDEF
B$JIT.JRESPEAK
      2023**DCL      2024--REDEF
B$JIT.ORIGINATOR_PORT.FROM_CR
      2132**DCL      2132--REDEF    2133--REDEF
B$JIT.PNR
      2036**DCL      2036--REDEF
B$JIT.TSLINE
      2130**DCL      2131--REDEF
B$JIT$
      5190**DCL      1856--IMP-PTR  6183>>ASSIGN   6240>>ASSIGN   6321>>ASSIGN
B$MAP.SCTRL
      4029**DCL      4030--REDEF
B$PTR
      4450**DCL      5774>>ASSIGN   5781>>ASSIGN   5792>>ASSIGN   6042>>ASSIGN   6046>>ASSIGN   6052>>ASSIGN
      6254>>ASSIGN   6260>>ASSIGN
B$TABLE
      4449**DCL      5769>>ASSIGN   5789>>ASSIGN   5802>>ASSIGN
BUF
      5291**DCL      5074--DCLINIT  5075--DCLINIT
BUILD_DEVREC
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:131  
      6189**PROC     5929--CALL     6291--CALL
CHT$
      5236**DCL      4669--IMP-PTR  5237--REDEF    5792<<ASSIGN   5992>>ASSIGN   6002>>ASSIGN
CHTPTR.SEGID
      5240**DCL      5793<<ASSIGN
CLOSE_FPT
      4916**DCL      6179<>CALL
CLOSE_FPT.SN_
      4916**DCL      4916--REDEF
CLOSE_FPT.UTL_
      4917**DCL      4917--REDEF
CLOSE_FPT.V
      4921**DCL      4916--DCLINIT
CLOSE_FPT.V.EXPIRE#
      4931**DCL      4931--REDEF
CLOSE_FPT.V.TYPE#
      4929**DCL      4929--REDEF
CLOSE_FPT.V.XTNSIZE#
      4926**DCL      4926--REDEF    4928--REDEF
CPLIST
      5662**DCL      5915<<ASSIGN   6128>>ASSIGN
CRLIST
      5661**DCL      5912<<ASSIGN   6122>>ASSIGN
CURDCTX
      5270**DCL      5805<<ASSIGN   5808>>DOUNTIL  5809<<ASSIGN   5809>>ASSIGN   5810>>ASSIGN   5813>>IF
      5838<<ASSIGN   5840>>DOUNTIL  5844<<ASSIGN   5844>>ASSIGN   5845>>ASSIGN   5848>>IF       5852>>ASSIGN
      5869>>ASSIGN   5875<<ASSIGN   5875>>ASSIGN   5892<<ASSIGN   5892>>ASSIGN   5893>>ASSIGN   5895>>DOWHILE
      5931<<ASSIGN   5931>>ASSIGN   5932>>ASSIGN   5935>>IF       6026<<ASSIGN   6026>>ASSIGN   6257<<ASSIGN
      6267>>DOUNTIL  6269<<ASSIGN   6269>>ASSIGN   6270>>ASSIGN   6275>>IF       6283>>DOWHILE  6293<<ASSIGN
      6293>>ASSIGN   6294>>ASSIGN
DCLIST
      5658**DCL      5861<<ASSIGN   5881<<ASSIGN   6090>>ASSIGN
DCT$
      5206**DCL      4546--IMP-PTR  5207--REDEF    5808>>DOUNTIL  5810<<ASSIGN   5817>>ASSIGN   5821>>ASSIGN
      5822>>ASSIGN   5824>>ASSIGN   5825>>ASSIGN   5826>>ASSIGN   5840>>DOUNTIL  5840>>DOUNTIL  5840>>DOUNTIL
      5840>>DOUNTIL  5845<<ASSIGN   5853>>DOCASE   5855>>ASSIGN   5858>>ASSIGN   5861>>ASSIGN   5864>>ASSIGN
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:132  
      5871>>IF       5876>>DOCASE   5893<<ASSIGN   5895>>DOWHILE  5895>>DOWHILE  5895>>DOWHILE  5895>>DOWHILE
      5895>>DOWHILE  5895>>DOWHILE  5901>>ASSIGN   5904>>DOCASE   5932<<ASSIGN   5938<<ASSIGN   5940>>ASSIGN
      5942>>ASSIGN   5943>>ASSIGN   5944>>ASSIGN   5947>>ASSIGN   5948>>ASSIGN   5949>>ASSIGN   5952>>IF
      5952>>IF       5954>>IF       5957>>IF       5960>>IF       5963>>IF       5969>>IF       5991>>DOWHILE
      5992>>ASSIGN   5997>>IF       5997>>IF       5997>>IF       6002>>ASSIGN   6192>>ASSIGN   6193>>ASSIGN
      6195>>IF       6202>>ASSIGN   6203>>ASSIGN   6213>>ASSIGN   6214>>IF       6217>>ASSIGN   6222>>IF
      6222>>IF       6222>>IF       6222>>IF       6222>>IF       6229>>ASSIGN   6267>>DOUNTIL  6270<<ASSIGN
      6272>>ASSIGN   6281>>ASSIGN   6283>>DOWHILE  6285>>ASSIGN   6294<<ASSIGN   6296>>ASSIGN
DCTPTR.SEGID
      5210**DCL      5811<<ASSIGN   5846<<ASSIGN   5894<<ASSIGN   5933<<ASSIGN   5939<<ASSIGN   6271<<ASSIGN
      6295<<ASSIGN
DEVKEY
      5620**DCL      5831--ASSIGN   6020--ASSIGN   6234--ASSIGN   6310--ASSIGN
DEVKEY.TEXT
      5622**DCL      5817<<ASSIGN   5818>>ASSIGN   5828>>ASSIGN   5901<<ASSIGN   5902>>ASSIGN   5906>>ASSIGN
      5909>>ASSIGN   5912>>ASSIGN   5915>>ASSIGN   5918>>ASSIGN   5921>>ASSIGN   5942<<ASSIGN   6015>>ASSIGN
      6285<<ASSIGN   6286>>ASSIGN   6288>>ASSIGN   6301<<ASSIGN
DEVNAME
      5275**DCL      5868<<ASSIGN   5902<<ASSIGN   5946>>ASSIGN   6279<<ASSIGN   6286<<ASSIGN   6303>>ASSIGN
DEVREC
      5709**DCL      5605--DCLINIT  5760<<ASSIGN   5820<<ASSIGN   5832--ASSIGN   6191<<ASSIGN   6235--ASSIGN
DEVREC.ATTR
      5723**DCL      6219<<ASSIGN   6221<<ASSIGN
DEVREC.DEVNUM
      5725**DCL      6213<<ASSIGN
DEVREC.DEVTYPE
      5724**DCL      6197<<ASSIGN   6211<<ASSIGN
DEVREC.FEATURE
      5711**DCL      5825<<ASSIGN   6203<<ASSIGN
DEVREC.FLAGS.DOWN
      5719**DCL      5821<<ASSIGN   6192<<ASSIGN
DEVREC.IOCHAN.CHAN
      5716**DCL      5830<<ASSIGN   6232<<ASSIGN
DEVREC.IOCHAN.IOM
      5715**DCL      5829<<ASSIGN   6231<<ASSIGN
DEVREC.MODEL
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:133  
      5710**DCL      5824<<ASSIGN   6202<<ASSIGN
DEVREC.MPCNAME
      5712**DCL      6198<<ASSIGN   6208<<ASSIGN
DONE_SCS
      5271**DCL      5806<<ASSIGN   5807>>DOUNTIL  5814<<ASSIGN
DPBUF.LETTER
      5302**DCL      5970>>ASSIGN
DPBUF.REV
      5301**DCL      5973>>ASSIGN
DPLIST
      5663**DCL      5918<<ASSIGN   6134>>ASSIGN
DQH$
      5226**DCL      4614--IMP-PTR  5227--REDEF    5826<<ASSIGN   5828>>ASSIGN   5828>>ASSIGN   5829>>ASSIGN
      5830>>ASSIGN   5992<<ASSIGN   5995>>ASSIGN   5996>>ASSIGN   6002<<ASSIGN   6004>>IF       6004>>IF
      6008>>ASSIGN   6229<<ASSIGN   6231>>ASSIGN   6232>>ASSIGN   6267>>DOUNTIL  6272<<ASSIGN   6304>>ASSIGN
      6307>>ASSIGN   6308>>ASSIGN   6309>>ASSIGN
DQHPTR.SEGID
      5230**DCL      5827<<ASSIGN   5993<<ASSIGN   6003<<ASSIGN   6230<<ASSIGN   6273<<ASSIGN
DVT$
      5211**DCL      4599--IMP-PTR  5212--REDEF    5822<<ASSIGN   5824>>ASSIGN   5825>>ASSIGN   5940<<ASSIGN
      5944>>ASSIGN   6193<<ASSIGN   6202>>ASSIGN   6203>>ASSIGN   6211>>ASSIGN   6221>>ASSIGN
DVTPTR.SEGID
      5215**DCL      5823<<ASSIGN   5941<<ASSIGN   6194<<ASSIGN
ERRBUF
      5243**DCL      5015--DCLINIT  5016--DCLINIT
ERRBUF.TEXT
      5245**DCL      4987--DCLINIT
ERRCODE
      5242**DCL      4986--DCLINIT  6183<<ASSIGN   6240<<ASSIGN   6321<<ASSIGN
ERRMSG_FPT
      4986**DCL      6184<>CALL     6241<>CALL     6322<>CALL
ERRMSG_FPT.V
      4990**DCL      4986--DCLINIT
FEPNAME
      5287**DCL      6065<<CALLBLT  6068>>ASSIGN   6072>>ASSIGN
FEPNUM
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:134  
      5288**DCL      6059<<CALLBLT  6061>>DOWHILE  6064--ASSIGN   6065>>CALLBLT
FEX IN PROCEDURE OPC_STUFF
      6250**DCL      6259<<ASSIGN   6260>>ASSIGN   6267>>DOUNTIL  6283>>DOWHILE
FILENAME
      5123**DCL      4847--DCLINIT
FP$OPCI.FEI#
      5600**DCL      6055>>IF       6259>>ASSIGN
FP$OPCI.LNK$
      5599**DCL      6056>>ASSIGN   6315>>ASSIGN
FPT_IOQ
      5074**DCL      5968<>CALL
FPT_IOQ.BUF_.BUF$
      5075**DCL      5970>>ASSIGN   5973>>ASSIGN   5978>>ASSIGN   5981>>ASSIGN
FPT_IOQ.V
      5076**DCL      5074--DCLINIT
FPT_IOQ.V.DLA.DCTX#
      5078**DCL      5966<<ASSIGN
FPT_IOQ.V.DLA.DRELADDR#
      5078**DCL      5967<<ASSIGN
FP_OPCI$$
      5319**DCL      6050--ASSIGN   6252--ASSIGN
FR$RAT.M1
      4652**DCL      6219>>ASSIGN
FWREV_ADDR
      5294**DCL      5955<<ASSIGN   5958<<ASSIGN   5961<<ASSIGN   5964<<ASSIGN   5967>>ASSIGN
HEAD$
      5606**DCL      5769>>ASSIGN   5771>>DOINDEX  5818>>ASSIGN   5819>>ASSIGN   5819>>ASSIGN   5855>>ASSIGN
      5856>>ASSIGN   5856>>ASSIGN   5858>>ASSIGN   5859>>ASSIGN   5859>>ASSIGN   5861>>ASSIGN   5862>>ASSIGN
      5862>>ASSIGN   5864>>ASSIGN   5865>>ASSIGN   5865>>ASSIGN   5878>>ASSIGN   5879>>ASSIGN   5879>>ASSIGN
      5881>>ASSIGN   5882>>ASSIGN   5882>>ASSIGN   5884>>ASSIGN   5885>>ASSIGN   5885>>ASSIGN   5887>>ASSIGN
      5888>>ASSIGN   5888>>ASSIGN   5906>>ASSIGN   5907>>ASSIGN   5907>>ASSIGN   5909>>ASSIGN   5910>>ASSIGN
      5910>>ASSIGN   5912>>ASSIGN   5913>>ASSIGN   5913>>ASSIGN   5915>>ASSIGN   5916>>ASSIGN   5916>>ASSIGN
      5918>>ASSIGN   5919>>ASSIGN   5919>>ASSIGN   5921>>ASSIGN   5922>>ASSIGN   5922>>ASSIGN   6032>>ASSIGN
      6033>>DOINDEX  6036>>ASSIGN   6039>>ASSIGN   6068>>ASSIGN   6069>>ASSIGN   6069>>ASSIGN   6076>>ASSIGN
      6077>>DOINDEX  6078>>ASSIGN   6082>>ASSIGN   6083>>DOINDEX  6084>>ASSIGN   6088>>ASSIGN   6089>>DOINDEX
      6090>>ASSIGN   6094>>ASSIGN   6095>>DOINDEX  6096>>ASSIGN   6102>>ASSIGN   6103>>DOINDEX  6104>>ASSIGN
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:135  
      6108>>ASSIGN   6109>>DOINDEX  6110>>ASSIGN   6114>>ASSIGN   6115>>DOINDEX  6116>>ASSIGN   6120>>ASSIGN
      6121>>DOINDEX  6122>>ASSIGN   6126>>ASSIGN   6127>>DOINDEX  6128>>ASSIGN   6132>>ASSIGN   6133>>DOINDEX
      6134>>ASSIGN   6138>>ASSIGN   6139>>DOINDEX  6140>>ASSIGN   6144>>ASSIGN   6145>>DOINDEX  6146>>ASSIGN
      6150>>ASSIGN   6151>>DOINDEX  6152>>ASSIGN   6156>>ASSIGN   6157>>DOINDEX  6158>>ASSIGN   6163>>ASSIGN
      6172>>DOINDEX  6264>>ASSIGN   6265>>ASSIGN   6265>>ASSIGN   6288>>ASSIGN   6289>>ASSIGN   6289>>ASSIGN
HEADKEY
      5611**DCL      6164--ASSIGN
HEADREC
      5673**DCL      5606--DCLINIT  5761<<ASSIGN
HEXBUF
      5293**DCL      5975>>ASSIGN   5983>>ASSIGN
I
      5279**DCL      5771<<DOINDEX  5772>>ASSIGN   5776>>ASSIGN   5936<<DOINDEX  6030<<ASSIGN   6032>>ASSIGN
      6036>>ASSIGN   6037<<ASSIGN   6037>>ASSIGN   6039>>ASSIGN   6068>>ASSIGN   6070<<ASSIGN   6070>>ASSIGN
      6076>>ASSIGN   6078>>ASSIGN   6079<<ASSIGN   6079>>ASSIGN   6082>>ASSIGN   6084>>ASSIGN   6085<<ASSIGN
      6085>>ASSIGN   6088>>ASSIGN   6090>>ASSIGN   6091<<ASSIGN   6091>>ASSIGN   6094>>ASSIGN   6096>>ASSIGN
      6097<<ASSIGN   6097>>ASSIGN   6102>>ASSIGN   6104>>ASSIGN   6105<<ASSIGN   6105>>ASSIGN   6108>>ASSIGN
      6110>>ASSIGN   6111<<ASSIGN   6111>>ASSIGN   6114>>ASSIGN   6116>>ASSIGN   6117<<ASSIGN   6117>>ASSIGN
      6120>>ASSIGN   6122>>ASSIGN   6123<<ASSIGN   6123>>ASSIGN   6126>>ASSIGN   6128>>ASSIGN   6129<<ASSIGN
      6129>>ASSIGN   6132>>ASSIGN   6134>>ASSIGN   6135<<ASSIGN   6135>>ASSIGN   6138>>ASSIGN   6140>>ASSIGN
      6141<<ASSIGN   6141>>ASSIGN   6144>>ASSIGN   6146>>ASSIGN   6147<<ASSIGN   6147>>ASSIGN   6150>>ASSIGN
      6152>>ASSIGN   6153<<ASSIGN   6153>>ASSIGN   6156>>ASSIGN   6158>>ASSIGN   6159<<ASSIGN   6159>>ASSIGN
      6162>>ASSIGN   6172<<DOINDEX  6174>>ASSIGN   6175>>ASSIGN   6205<<DOINDEX  6208>>ASSIGN
IG$DCT$$
      5191**DCL      5192--REDEF    5781<<ASSIGN   5810>>ASSIGN   5845>>ASSIGN   5869>>ASSIGN   5893>>ASSIGN
      5932>>ASSIGN   5938>>ASSIGN   6206>>ASSIGN   6270>>ASSIGN   6294>>ASSIGN
IG$DCT$PTR.SEGID
      5195**DCL      5782<<ASSIGN
IG$DVT$
      5201**DCL      5202--REDEF    5784<<ASSIGN
IG$DVTPTR.SEGID
      5205**DCL      5785<<ASSIGN
IGT_BUG IN PROCEDURE BUILD_DEVREC
      6240**LABEL    6236--CALLALT
IGT_ERR
      6183**LABEL    5764--CALLALT  5833--CALLALT  6023--CALLALT  6165--CALLALT  6170--CALLALT  6176--CALLALT
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:136  
IGT_OPC_ERR IN PROCEDURE OPC_STUFF
      6321**LABEL    6313--CALLALT
IG_FEI$$
      5196**DCL      5197--REDEF    6044<<ASSIGN   6046>>ASSIGN   6260>>ASSIGN
INDX
      5276**DCL      5970<<ASSIGN   5971>>IF       5972>>ASSIGN   5973<<ASSIGN   5974>>IF       5975>>ASSIGN
      5978<<ASSIGN   5979>>IF       5980>>ASSIGN   5981<<ASSIGN   5982>>IF       5983>>ASSIGN   5989<<ASSIGN
      5991>>DOWHILE  5991>>DOWHILE  5992>>ASSIGN   5997>>IF       6002>>ASSIGN   6009<<ASSIGN   6009>>ASSIGN
      6017<<ASSIGN   6017>>ASSIGN
IOM#
      5282**DCL      6034<<CALLBLT  6035>>CALLBLT
IOM$
      5607**DCL      5776>>ASSIGN   5828>>ASSIGN   6015>>ASSIGN   6072>>ASSIGN   6174>>ASSIGN
IOMKEY
      5617**DCL      6175--ASSIGN
IOMREC1
      5625**DCL      5607--DCLINIT  5756<<ASSIGN
IOMREC2
      5633**DCL      5608--DCLINIT  5757<<ASSIGN
IOMREC3
      5641**DCL      5609--DCLINIT  5758<<ASSIGN
IOMREC4
      5649**DCL      5610--DCLINIT  5759<<ASSIGN
IOM_NAME
      5283**DCL      6035<<CALLBLT  6036>>ASSIGN
IT_WSN
      5091**DCL      5796--ASSIGN
J
      5280**DCL      5990<<ASSIGN   5994>>ASSIGN   5995>>ASSIGN   5996>>ASSIGN   6004>>IF       6004>>IF
      6008>>ASSIGN   6011>>ASSIGN   6011>>ASSIGN   6013>>ASSIGN   6013>>ASSIGN   6014>>DOINDEX  6014>>DOINDEX
      6015>>ASSIGN   6018<<ASSIGN   6018>>ASSIGN   6033<<DOINDEX  6034>>CALLBLT  6045<<DOINDEX  6046>>ASSIGN
      6055>>IF       6077<<DOINDEX  6078>>ASSIGN   6083<<DOINDEX  6084>>ASSIGN   6089<<DOINDEX  6090>>ASSIGN
      6095<<DOINDEX  6096>>ASSIGN   6103<<DOINDEX  6104>>ASSIGN   6109<<DOINDEX  6110>>ASSIGN   6115<<DOINDEX
      6116>>ASSIGN   6121<<DOINDEX  6122>>ASSIGN   6127<<DOINDEX  6128>>ASSIGN   6133<<DOINDEX  6134>>ASSIGN
      6139<<DOINDEX  6140>>ASSIGN   6145<<DOINDEX  6146>>ASSIGN   6151<<DOINDEX  6152>>ASSIGN   6157<<DOINDEX
      6158>>ASSIGN
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:137  
K
      5281**DCL      6014<<DOINDEX  6015>>ASSIGN   6060<<ASSIGN   6061>>DOWHILE  6062<<ASSIGN   6062>>ASSIGN
      6064>>ASSIGN   6065>>CALLBLT
KI$FEI.BD$
      4501**DCL      4502--REDEF
KI$FEI.BDAD.WADDR
      4503**DCL      4504--REDEF
KI$FEI.FECH.DEV
      4470**DCL      6072>>ASSIGN
KI$FEI.FECH.IOM
      4469**DCL      6072>>ASSIGN
KI$FEI.FEP#
      4511**DCL      6059>>CALLBLT  6262>>CALLBLT
KI$FEI.RCVPB
      4517**DCL      4518--REDEF
KI_FEI$$
      5088**DCL      5603--IMP-PTR  6040--ASSIGN
KI_MXFE
      5089**DCL      5787--ASSIGN
LEN
      5286**DCL      6064<<ASSIGN   6065>>CALLBLT
LETBUF
      5292**DCL      5972>>ASSIGN   5980>>ASSIGN
LPLIST
      5660**DCL      5909<<ASSIGN   6116>>ASSIGN
M$CLOSE
      2247**DCL-ENT  6179--CALL
M$ERRMSG
      2310**DCL-ENT  6184--CALL     6241--CALL     6322--CALL
M$IOQ
      2298**DCL-ENT  5968--CALL
M$OPEN
      2247**DCL-ENT  5764--CALL
M$TEMPWROC
      2291**DCL-ENT  6185--CALL     6242--CALL     6323--CALL
M$WRITE
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:138  
      2248**DCL-ENT  5833--CALL     6023--CALL     6165--CALL     6170--CALL     6176--CALL     6236--CALL
      6313--CALL
MAXDCTX
      5278**DCL      5802<<ASSIGN   5808>>DOUNTIL  5813>>IF       5840>>DOUNTIL  5848>>IF       5895>>DOWHILE
      5935>>IF       6267>>DOUNTIL  6275>>IF       6283>>DOWHILE
MAX_FEP
      5289**DCL      5789<<ASSIGN   6045>>DOINDEX
MPCINDX
      5273**DCL      5852<<ASSIGN   5938>>ASSIGN   5966>>ASSIGN   6024<<ASSIGN   6024>>ASSIGN   6204>>ASSIGN
MPCREC
      5728**DCL      5937<<ASSIGN   6021--ASSIGN   6300<<ASSIGN   6311--ASSIGN
MPCREC.CRPFWNAME
      5743**DCL      5949<<ASSIGN
MPCREC.DEVNAME
      5747**DCL      5946<<ASSIGN   6303<<ASSIGN
MPCREC.FLAGS.DOWN
      5738**DCL      5943<<ASSIGN   5952>>IF       6304<<ASSIGN
MPCREC.FWNAME
      5741**DCL      5947<<ASSIGN   6305<<ASSIGN
MPCREC.FWREV.LETTER
      5745**DCL      5950<<ASSIGN   5972<<ASSIGN   5980<<ASSIGN
MPCREC.FWREV.SUBREV
      5746**DCL      5951<<ASSIGN   5975<<ASSIGN   5983<<ASSIGN
MPCREC.IOCHAN.HICHAN
      5735**DCL      6008<<ASSIGN   6011<<ASSIGN   6013<<ASSIGN   6014>>DOINDEX  6309<<ASSIGN
MPCREC.IOCHAN.IOM
      5733**DCL      5995<<ASSIGN   6004>>IF       6015>>ASSIGN   6307<<ASSIGN
MPCREC.IOCHAN.LOCHAN
      5734**DCL      5996<<ASSIGN   6004>>IF       6011>>ASSIGN   6013>>ASSIGN   6014>>DOINDEX  6308<<ASSIGN
MPCREC.IOCHAN.PRESENCE
      5731**DCL      5994<<ASSIGN   6306<<ASSIGN
MPCREC.LPFWNAME
      5742**DCL      5948<<ASSIGN
MPCREC.MODEL
      5729**DCL      5944<<ASSIGN
MPCREC.NUMDEVS
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:139  
      5736**DCL      5945<<ASSIGN   6302<<ASSIGN
MTBUF.LETTER
      5297**DCL      5978>>ASSIGN
MTBUF.REV
      5298**DCL      5981>>ASSIGN
MTLIST
      5664**DCL      5921<<ASSIGN   6140>>ASSIGN
N$DCT$
      1050**DCL      5810>>ASSIGN   5845>>ASSIGN   5869>>ASSIGN   5893>>ASSIGN   5932>>ASSIGN   5938>>ASSIGN
      6206>>ASSIGN   6270>>ASSIGN   6294>>ASSIGN
N$DCT$$
       916**DCL      1050--IMP-PTR  5779--ASSIGN
N$FQ$
       916**DCL      1051--IMP-PTR
N$REQ_INIT.BUFADDR
       935**DCL       936--REDEF     936--REDEF
N$REQ_INIT.DLA.DRELADDR
       927**DCL       927--REDEF
N$REQ_INIT.DVE.EOMCHAR
       964**DCL       965--REDEF
N$REQ_INIT.EAINFO
       958**DCL       958--REDEF
N$REQ_INIT.EAINFOX
       958**DCL       959--REDEF
N$REQ_INIT.EVNTINFO
       959**DCL       959--REDEF
N$REQ_INIT.STATUS
       940**DCL       946--REDEF
NI$CHT.DQH$
      4669**DCL      5992>>ASSIGN   6002>>ASSIGN
NI$CHT$
       975**DCL      5790--ASSIGN
NI$DCT.DEVNM
      4546**DCL      5808>>DOUNTIL  5817>>ASSIGN   5840>>DOUNTIL  5840>>DOUNTIL  5840>>DOUNTIL  5840>>DOUNTIL
      5855>>ASSIGN   5858>>ASSIGN   5861>>ASSIGN   5864>>ASSIGN   5871>>IF       5871>>IF       5878>>ASSIGN
      5881>>ASSIGN   5884>>ASSIGN   5887>>ASSIGN   5895>>DOWHILE  5895>>DOWHILE  5895>>DOWHILE  5895>>DOWHILE
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:140  
      5895>>DOWHILE  5895>>DOWHILE  5901>>ASSIGN   5942>>ASSIGN   6208>>ASSIGN   6267>>DOUNTIL  6283>>DOWHILE
      6285>>ASSIGN
NI$DCT.DP
      4566**DCL      4573--REDEF    4576--REDEF    4577--REDEF    4579--REDEF    4579--REDEF    4580--REDEF
      4581--REDEF    4581--REDEF
NI$DCT.DQH$
      4562**DCL      5826>>ASSIGN   6229>>ASSIGN   6272>>ASSIGN   6281>>ASSIGN   6296>>ASSIGN
NI$DCT.DVN
      4555**DCL      6213>>ASSIGN
NI$DCT.DVT$
      4562**DCL      5822>>ASSIGN   5940>>ASSIGN   6193>>ASSIGN
NI$DCT.FX
      4555**DCL      5825>>ASSIGN   6203>>ASSIGN
NI$DCT.MODX
      4555**DCL      5824>>ASSIGN   5944>>ASSIGN   6202>>ASSIGN
NI$DCT.MPC.CRPNAME
      4576**DCL      5949>>ASSIGN
NI$DCT.MPC.FWNAME
      4576**DCL      5947>>ASSIGN   5957>>IF       5960>>IF       5963>>IF
NI$DCT.MPC.IOCHANX
      4574**DCL      4574--REDEF    5991>>DOWHILE  5992>>ASSIGN   5997>>IF       6002>>ASSIGN
NI$DCT.MPC.LPNAME
      4576**DCL      5948>>ASSIGN
NI$DCT.MPC.TYPE
      4574**DCL      5853>>DOCASE   5876>>DOCASE   5952>>IF       5952>>IF       5954>>IF       5969>>IF
      5997>>IF       5997>>IF
NI$DCT.RAT$
      4547**DCL      6214>>IF       6217>>ASSIGN
NI$DCT.STATUS.DOWN
      4563**DCL      5821>>ASSIGN   5943>>ASSIGN   6192>>ASSIGN
NI$DCT.TYPE
      4556**DCL      5904>>DOCASE   6195>>IF       6222>>IF       6222>>IF       6222>>IF       6222>>IF
      6222>>IF
NI$DQH.FEX
      4617**DCL      6267>>DOUNTIL  6283>>DOWHILE
NI$DQH.IOCHAN.CHANNEL
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:141  
      4617**DCL      5828>>ASSIGN   5830>>ASSIGN   5996>>ASSIGN   6004>>IF       6008>>ASSIGN   6232>>ASSIGN
      6308>>ASSIGN   6309>>ASSIGN
NI$DQH.IOCHAN.IOM
      4617**DCL      5828>>ASSIGN   5829>>ASSIGN   5995>>ASSIGN   6004>>IF       6231>>ASSIGN   6307>>ASSIGN
NI$DQH.IOCHANX
      4616**DCL      4617--REDEF
NI$DQH.MBX$
      4625**DCL      4626--REDEF
NI$DQH.STATUS.DOWN
      4614**DCL      6304>>ASSIGN
NI$DVT.ATTR
      4601**DCL      6221>>ASSIGN
NI$DVT.FEATURE
      4599**DCL      5825>>ASSIGN   6203>>ASSIGN
NI$DVT.MODEL
      4599**DCL      5824>>ASSIGN   5944>>ASSIGN   6202>>ASSIGN
NI$DVT.MPC
      4601**DCL      4602--REDEF
NI$DVT.TYPE
      4599**DCL      6211>>ASSIGN
NI$DVT$
       975**DCL      5784--ASSIGN
NI$FQ$
       976**DCL      1052--IMP-PTR
NI$IBUF$
       976**DCL      1052--IMP-PTR
NI$IMXMBX_INIT.PAGED_BASE
       986**DCL       987--REDEF     987--REDEF
NI$IMXMBX_INIT.SIZE
       988**DCL       988--REDEF
NI$IOM.ADDRESS
      4673**DCL      5776>>ASSIGN
NI$IOM$
       998**DCL      5772--ASSIGN
NI$REQ_INIT.DCW
      1010**DCL      1013--REDEF
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:142  
NI$REQ_INIT.DCW.TALLY
      1011**DCL      1011--REDEF
NI$REQ_INIT.IDCW.EXTA
      1013**DCL      1013--REDEF
NI$REQ_INIT.PCW
      1015**DCL      1019--REDEF
NI$REQ_INIT.SEEK
      1020**DCL      1021--REDEF    1022--REDEF
NI$RP$
      1024**DCL      1054--IMP-PTR
NI$SQH.DOOR
      4594**DCL      4594--REDEF
NI_IOMS
      1028**DCL      5766--ASSIGN
NI_MBX_INIT.DCW.CONTROL.AE
      1046**DCL      1046--REDEF
NI_MBX_INIT.LPW.CONTROL.AE
      1042**DCL      1042--REDEF
NK_MXLOCAL
      5090**DCL      5800--ASSIGN
NO_BUG IN PROCEDURE BUILD_DEVREC
      6244**LABEL    6241--CALLALT
NO_FWREV
      5989**LABEL    5965--GOTO     5968--CALLALT  5971--GOTO     5974--GOTO     5979--GOTO     5982--GOTO
NO_MSG
      6187**LABEL    5929--CALLALT  6100--CALLALT  6184--CALLALT
NO_OPC_BUG IN PROCEDURE OPC_STUFF
      6325**LABEL    6291--CALLALT  6322--CALLALT
NUMDEVS
      5285**DCL      5867<<ASSIGN   5902>>ASSIGN   5903<<ASSIGN   5903>>ASSIGN   5945>>ASSIGN   6022>>ASSIGN
      6278<<ASSIGN   6286>>ASSIGN   6287<<ASSIGN   6287>>ASSIGN   6302>>ASSIGN   6312>>ASSIGN
NUMMPCS
      5284**DCL      5874<<ASSIGN   5891<<ASSIGN   5936>>DOINDEX  6205>>DOINDEX  6280<<ASSIGN
OCLIST
      5669**DCL      6104>>ASSIGN   6264<<ASSIGN
ODLIST
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:143  
      5670**DCL      6158>>ASSIGN   6288<<ASSIGN
OPC$
      5310**DCL      5311--REDEF    6050<<ASSIGN   6052<<ASSIGN   6052>>ASSIGN   6055>>IF       6056<<ASSIGN
      6056>>ASSIGN   6252<<ASSIGN   6254<<ASSIGN   6254>>ASSIGN   6259>>ASSIGN   6315<<ASSIGN   6315>>ASSIGN
OPCNAME
      5317**DCL      6198>>ASSIGN   6258<<ASSIGN   6263<<CALLBLT  6264>>ASSIGN   6301>>ASSIGN
OPCNUM
      5318**DCL      6262<<CALLBLT  6263>>CALLBLT
OPCPTR.OFFSET
      5312**DCL      6054>>DOWHILE  6256>>DOWHILE
OPCPTR.SEGID
      5314**DCL      6051<<ASSIGN   6053<<ASSIGN   6057<<ASSIGN   6253<<ASSIGN   6255<<ASSIGN   6316<<ASSIGN
OPC_FOUND
      5316**DCL      6049<<ASSIGN   6054>>DOWHILE  6055<<ASSIGN   6066>>IF
OPC_STUFF
      6248**PROC     6100--CALL
OPEN_FPT
      4846**DCL      5764<>CALL
OPEN_FPT.ACSVEH_
      4848**DCL      4849--REDEF
OPEN_FPT.ALTKEYS_
      4854**DCL      4855--REDEF    4855--REDEF
OPEN_FPT.HDR_
      4853**DCL      4854--REDEF
OPEN_FPT.TAB_
      4852**DCL      4853--REDEF
OPEN_FPT.UHL_
      4846**DCL      4847--REDEF    4847--REDEF
OPEN_FPT.V
      4855**DCL      4846--DCLINIT
OPEN_FPT.V.FSN#
      4886**DCL      4886--REDEF    4886--REDEF
OPEN_FPT.WSN_
      4852**DCL      4852--REDEF
RAT$
      5216**DCL      4630--IMP-PTR  5217--REDEF    6217<<ASSIGN   6219>>ASSIGN
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:144  
RATPTR.SEGID
      5220**DCL      6218<<ASSIGN
RDONLY
      5137**DCL      4848--DCLINIT
RDONLY.Q
      5138**DCL      5137--DCLINIT
RESULTS
      5051**DCL      5033--DCLINIT
SCLIST
      5666**DCL      5818<<ASSIGN   6110>>ASSIGN
SQH$
      5221**DCL      4594--IMP-PTR  5222--REDEF
SUBBUF_1
      5247**DCL      4988--DCLINIT
SUBBUF_2
      5250**DCL      4989--DCLINIT
SYSCON_FPT.V
      5033**DCL      5033--DCLINIT
SYSCON_FPT.V.IOM#
      5034**DCL      5035--REDEF    5035--REDEF
TCLIST
      5659**DCL      5864<<ASSIGN   5884<<ASSIGN   6084>>ASSIGN
TD$HEAD
      4678**DCL      6162--ASSIGN
TD$HEAD.APMPC_INDX
      4687**DCL      6094<<ASSIGN
TD$HEAD.AP_INDX
      4707**DCL      6150<<ASSIGN
TD$HEAD.CONSOLE_INDX
      4693**DCL      6108<<ASSIGN
TD$HEAD.CP_INDX
      4699**DCL      6126<<ASSIGN
TD$HEAD.CR_INDX
      4697**DCL      6120<<ASSIGN
TD$HEAD.DEVNAME
      4711**DCL      6036<<ASSIGN   6068<<ASSIGN   6078<<ASSIGN   6084<<ASSIGN   6090<<ASSIGN   6096<<ASSIGN
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:145  
      6104<<ASSIGN   6110<<ASSIGN   6116<<ASSIGN   6122<<ASSIGN   6128<<ASSIGN   6134<<ASSIGN   6140<<ASSIGN
      6146<<ASSIGN   6152<<ASSIGN   6158<<ASSIGN   6162--ASSIGN
TD$HEAD.DISKMPC_INDX
      4685**DCL      6088<<ASSIGN
TD$HEAD.DP_INDX
      4701**DCL      6132<<ASSIGN
TD$HEAD.FEP_INDX
      4691**DCL      6039<<ASSIGN
TD$HEAD.IOM_INDX
      4679**DCL      6032<<ASSIGN
TD$HEAD.LP_INDX
      4695**DCL      6114<<ASSIGN
TD$HEAD.MT_INDX
      4703**DCL      6138<<ASSIGN
TD$HEAD.NUMAPMPCS
      4688**DCL      5855>>ASSIGN   5856<<ASSIGN   5856>>ASSIGN   5878>>ASSIGN   5879<<ASSIGN   5879>>ASSIGN
      6095>>DOINDEX
TD$HEAD.NUMAPS
      4708**DCL      5906>>ASSIGN   5907<<ASSIGN   5907>>ASSIGN   6151>>DOINDEX
TD$HEAD.NUMCONSOLES
      4694**DCL      5818>>ASSIGN   5819<<ASSIGN   5819>>ASSIGN   6109>>DOINDEX
TD$HEAD.NUMCPS
      4700**DCL      5915>>ASSIGN   5916<<ASSIGN   5916>>ASSIGN   6127>>DOINDEX
TD$HEAD.NUMCRS
      4698**DCL      5912>>ASSIGN   5913<<ASSIGN   5913>>ASSIGN   6121>>DOINDEX
TD$HEAD.NUMDISKMPCS
      4686**DCL      5861>>ASSIGN   5862<<ASSIGN   5862>>ASSIGN   5881>>ASSIGN   5882<<ASSIGN   5882>>ASSIGN
      6089>>DOINDEX
TD$HEAD.NUMDPS
      4702**DCL      5918>>ASSIGN   5919<<ASSIGN   5919>>ASSIGN   6133>>DOINDEX
TD$HEAD.NUMFEPS
      4692**DCL      6069<<ASSIGN   6069>>ASSIGN
TD$HEAD.NUMIOMS
      4680**DCL      5769<<ASSIGN   5771>>DOINDEX  6033>>DOINDEX  6172>>DOINDEX
TD$HEAD.NUMLPS
      4696**DCL      5909>>ASSIGN   5910<<ASSIGN   5910>>ASSIGN   6115>>DOINDEX
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:146  
TD$HEAD.NUMMTS
      4704**DCL      5921>>ASSIGN   5922<<ASSIGN   5922>>ASSIGN   6139>>DOINDEX
TD$HEAD.NUMODS
      4710**DCL      6157>>DOINDEX  6288>>ASSIGN   6289<<ASSIGN   6289>>ASSIGN
TD$HEAD.NUMOPCS
      4690**DCL      6103>>DOINDEX  6264>>ASSIGN   6265<<ASSIGN   6265>>ASSIGN
TD$HEAD.NUMTAPEMPCS
      4684**DCL      5864>>ASSIGN   5865<<ASSIGN   5865>>ASSIGN   5884>>ASSIGN   5885<<ASSIGN   5885>>ASSIGN
      6083>>DOINDEX
TD$HEAD.NUMUNITMPCS
      4682**DCL      5858>>ASSIGN   5859<<ASSIGN   5859>>ASSIGN   5887>>ASSIGN   5888<<ASSIGN   5888>>ASSIGN
      6077>>DOINDEX
TD$HEAD.NUMXXS
      4706**DCL      6145>>DOINDEX
TD$HEAD.OD_INDX
      4709**DCL      6156<<ASSIGN
TD$HEAD.OPC_INDX
      4689**DCL      6102<<ASSIGN
TD$HEAD.TAPEMPC_INDX
      4683**DCL      6082<<ASSIGN
TD$HEAD.UNITMPC_INDX
      4681**DCL      6076<<ASSIGN
TD$HEAD.XX_INDX
      4705**DCL      6144<<ASSIGN
TD$IOM
      4714**DCL      6173--ASSIGN
TD$IOM.DEVNAME
      4715**DCL      5828<<ASSIGN   6015<<ASSIGN   6072<<ASSIGN
TD$IOM.PORT#
      4719**DCL      5776<<ASSIGN
TD$MPC
      4722**DCL      6022--ASSIGN   6312--ASSIGN
TD$MPC.DEVNAME
      4741**DCL      6022--ASSIGN   6312--ASSIGN
TD$WSN
      4763**DCL      5798>>ASSIGN   6167--ASSIGN
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:147  
TEMP$
      5231**DCL      5232--REDEF    5766<<ASSIGN   5769>>ASSIGN   5772<<ASSIGN   5774<<ASSIGN   5774>>ASSIGN
      5776>>ASSIGN   5779<<ASSIGN   5781>>ASSIGN   5787<<ASSIGN   5789>>ASSIGN   5790<<ASSIGN   5792>>ASSIGN
      5796<<ASSIGN   5798>>ASSIGN   5800<<ASSIGN   5802>>ASSIGN   5869<<ASSIGN   5871>>IF       5878>>ASSIGN
      5881>>ASSIGN   5884>>ASSIGN   5887>>ASSIGN   6040<<ASSIGN   6042<<ASSIGN   6042>>ASSIGN   6044>>ASSIGN
      6046<<ASSIGN   6059>>CALLBLT  6072>>ASSIGN   6072>>ASSIGN   6206<<ASSIGN   6208>>ASSIGN   6260<<ASSIGN
      6262>>CALLBLT  6281<<ASSIGN   6283>>DOWHILE  6296<<ASSIGN
TEMPINDX
      5274**DCL      6204<<ASSIGN   6206>>ASSIGN   6209<<ASSIGN   6209>>ASSIGN
TEMPPTR.SEGID
      5235**DCL      5767<<ASSIGN   5773<<ASSIGN   5775<<ASSIGN   5780<<ASSIGN   5788<<ASSIGN   5791<<ASSIGN
      5797<<ASSIGN   5801<<ASSIGN   5870<<ASSIGN   6041<<ASSIGN   6043<<ASSIGN   6047<<ASSIGN   6207<<ASSIGN
      6261<<ASSIGN   6282<<ASSIGN   6297<<ASSIGN
UCLIST
      5657**DCL      5858<<ASSIGN   5887<<ASSIGN   6078>>ASSIGN
VEHICLE
      5169**DCL      4849--DCLINIT
VEHICLE.Q
      5170**DCL      5169--DCLINIT
WRITE_FPT
      4953**DCL      5833<>CALL     6023<>CALL     6165<>CALL     6170<>CALL     6176<>CALL     6236<>CALL
      6313<>CALL
WRITE_FPT.BUF_
      4953**DCL      5832<<ASSIGN   6021<<ASSIGN   6235<<ASSIGN   6311<<ASSIGN
WRITE_FPT.BUF_.BOUND
      4953**DCL      6022<<ASSIGN   6162<<ASSIGN   6167<<ASSIGN   6173<<ASSIGN   6312<<ASSIGN
WRITE_FPT.BUF_.BUF$
      4955**DCL      6163<<ASSIGN   6168<<ASSIGN   6174<<ASSIGN
WRITE_FPT.KEY_
      4953**DCL      5831<<ASSIGN   6020<<ASSIGN   6164<<ASSIGN   6169<<ASSIGN   6175<<ASSIGN   6234<<ASSIGN
      6310<<ASSIGN
WRITE_FPT.STATION_
      4955**DCL      4955--REDEF
WRITE_FPT.V
      4956**DCL      4953--DCLINIT
WRITE_FPT.V.DVBYTE.VFC#
PL6.E3A0      #001=IGT$TDFILE File=IGT$TDFILE.:E05TSI                            TUE 07/29/97 22:38 Page:148  
      4962**DCL      4962--REDEF
WROC_FPT
      5015**DCL      6185<>CALL     6242<>CALL     6323<>CALL
WROC_FPT.V
      5018**DCL      5015--DCLINIT
WSNKEY
      5614**DCL      6169--ASSIGN
WSNREC
      5751**DCL      5762<<ASSIGN   5798<<ASSIGN   6168--ASSIGN
XXLIST
      5665**DCL      6146>>ASSIGN
