VERSION E05

PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:1    
        1        1        /*M* ASYNC HANDLER ADMINISTRATIVE SERVICE ROUTINES                            */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*     NSO,PLM=3,SQB=Y,AND=Y,ENI=0,SDI=3,MCL=10,CSI=0,ECI=0,IAD=3,IND=0 */
        8        8        KAA$ADM: PROC(ADMIN_FPT) ALTRET;
        9        9
       10       10        /* parameters */
       11       11
       12       12        %INCLUDE KH_MACRO_C;
       13      755        %INCLUDE KL_AFCN_C;
       14      856        %INCLUDE KL_MACRO_C;
       15     4208        %INCLUDE K_ID_E;
       16     4258        %INCLUDE LCP_6;
       17     4449        %K#ENTID_E;
       18     4468        %KL_REQSTATS;
       19     4762        %KH$ADMIN_FPT (FPTN = ADMIN_FPT, STCLASS = PARAM);
       20     4973        %INCLUDE KL_CONTROL_C;
       21     5353        %KH$CTLTBL (FPTN=KH_CTLTBL, STCLASS=SYMREF READONLY);
       22     5565    1   DCL MMRINTCHC BIT(16) BASED ALIGNED;
       23     5566
       24     5567        /* */
       25     5568
       26     5569 S      %INCLUDE KV_GLBCNS_E;
       27     5570        %KV_DSCRSN_E;                           /* disconnect reasons                 */
       28     5579        %KV_SCHRSN_E;                           /* schedule reasons                   */
       29     5586        %KV_VDH_EVT_ID_E;
       30     5592        %INCLUDE KV_ASCCHR_E;
       31     5729 S      %INCLUDE KV$GLB;
       32     5730 S      %INCLUDE KV$GLBCTX;
       33     5731 S      %INCLUDE KV$VDH;
       34     5732        %INCLUDE KV_GLB_M;                      /*  VDH-user PROCs                    */
       35     5854 S      %INCLUDE KV$INT;
       36     5855        %INCLUDE KV$BPC;
       37     5884        %KV$BPC;
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:2    
       38     5906        %KV$BPC (NAME=KV$BPCSTT, STATS=YES);
       39     5928    1   DCL KV_B_POOL$ PTR SYMREF;
       40     5929        %KV$PTR;                                /*  VDH Pointers, status              */
       41     5972        %KV$SSN;                                /*  VDH Session                       */
       42     6051        %KV$VDI;                                /*  VDI (VDH < ->VDH user interface)  */
       43     6122        %KV$SHRBFR;                             /*  ASYNC MISC. BUFFER TEMPLATE       */
       44     6154        %KV$REDBFR;                             /*  ASYNC INPUT BUFFER TEMPLATE       */
       45     6157        %KV$STT (NAME = KV_STT, STCLASS = SYMREF);
       46     6551        %KV$STT;
       47     6945        %SET KV_STT = CHARTEXT('KV_STT');
       48     6946        %INCLUDE KA_GLB_E;
       49     7024        %INCLUDE KH$STT;                        /* For KA_STT                         */
       50     7054        %INCLUDE KH_TRC;
       51     7076        %INCLUDE KH$TRC;
       52     7105        %INCLUDE KV_INT_M;
       53     7248        %INCLUDE KH_TRC_M;
       54     7296        %KA_TRC_E;
       55     7313        %KH_TRC;
       56     7328        %KA_HLTOTP_E;
       57     7337        %INCLUDE KA_GLB;
       58     7414        %INCLUDE KA$GLB;
       59     7555        %KA$INPBFR;                             /*                                    */
       60     7580        %KA$CTX (STCLASS="BASED(BCTX$)");       /*  ASYNC CONTEXT BLOCK               */
       61     7704        %KA_MSC;
       62     7726        %INCLUDE KW_ALCT_E;                     /*  ASYNC LCT ITEMS                   */
       63     7916        %INCLUDE KA_LCT_E;                      /*  ASYNC LCT ITEMS                   */
       64     8040        %KA_STT;                                /*  STATISTICS                        */
       65     8403        %INCLUDE KHA_FNC_E;                /* enable, disable, kill, reqstats, etc.   */
       66     8503        %INCLUDE KH$CHN;
       67     8625        %INCLUDE KH_CHN;
       68     8665        %KH_CHNDAT;                             /*  CHANNEL TABLE FIXED ITEMS         */
       69     8683        %KH$CHN(STCLASS = "BASED(BCHN$)");      /*  CHANNEL TABLE ENTRY ITEMS         */
       70     8807        %KV$VDH_DSC (NAME=KV_VDH_DSC, STCLASS=CONSTANT SYMDEF, ALLSSN=YES);
       71     8843        %INCLUDE GH_IOFNC_E;                    /*  IO FUNCTION CODES                 */
       72     8912        %INCLUDE KH$IO;
       73     9159        %KH$IO(FPTN=KH_IO_OTPLCTBYT,FNC=%GH#IO_OTPLCTBYT,STCLASS=CONSTANT);
       74     9273        %KH$IO(FPTN=KH_IO_OTPCHNCTR,FNC=%GH#IO_OTPCHNCTR,STCLASS=CONSTANT);
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:3    
       75     9387
       76     9388        %KH$DWNLODCCP(NAME=Y_DWNLODCCP,STCLASS=CONSTANT); /* parm to call KHI$DWNLODCCP */
       77     9411        %KH$DWNLODLCT(NAME=Y_DWNLODLCT,STCLASS=CONSTANT); /* parm to call KHI$DWNLODLCT */
       78     9435        %KH$CCPLCT;
       79     9461
       80     9462        /* symref */
       81     9463
       82     9464    1   DCL KAC$MLCP UBIN SYMREF;               /* we only need the address           */
       83     9465    1   DCL KA_INT_LEV UBIN SYMREF;             /* async run level                    */
       84     9466                       /* input level is 1 plus that, output level is 2 plus that     */
       85     9467
       86     9468        /* entry DCL's */
       87     9469
       88     9470    1   DCL KAO$DLTOTP ENTRY(1);
       89     9471    1   DCL KAO$OTPINT ENTRY;
       90     9472    1   DCL KAS$DSCNO_VDI ENTRY(1);
       91     9473    1   DCL KHA$SNDSTT ENTRY(2) ALTRET;
       92     9474    1   DCL KHI$IO_OTP ENTRY(2) ALTRET;
       93     9475    1   DCL KHI$IO_OTPLCTBYT ENTRY(2) ALTRET;
       94     9476    1   DCL KHI$DWNLODLCT ENTRY(1) ALTRET;
       95     9477    1   DCL KHI$DWNLODCCP ENTRY(1) ALTRET;
       96     9478    1   DCL KHI$DISABLE ENTRY(1);
       97     9479    1   DCL KHI$ENABLE ENTRY;
       98     9480    1   DCL KHC$XEQ2 ENTRY(1) ALTRET;
       99     9481    1   DCL KVV$VDI ENTRY(1) ALTRET;
      100     9482    1   DCL KHD$TRC ENTRY(1);
      101     9483    1   DCL KHA$TSTCNC ENTRY(2) ALTRET;
      102     9484
      103     9485        /* local variables   */
      104     9486
      105     9487    1   DCL BCHN$ PTR;
      106     9488    1   DCL BCTX$ PTR;
      107     9489    1   DCL CODE UBIN;
      108     9490    1   DCL Y@LCT_INTCNF_BYT UBIN BYTE UNAL;
      109     9491    1   DCL 1 Y@LCT_INTCNF REDEF Y@LCT_INTCNF_BYT UNAL,
      110     9492    1          2 BRKRQ BIT(1) UNAL,
      111     9493    1          2 AUTBAD BIT(1) UNAL,
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:4    
      112     9494    1          2 ENB BIT(1) UNAL,
      113     9495    1          2 DC1DC3FLWCTR BIT(1) UNAL,
      114     9496    1          2 LINSPD UBIN(4) UNAL;
      115     9497    1   DCL Y@LCT_MSCSTT_BYT UBIN BYTE UNAL;
      116     9498    1   DCL 1 Y@LCT_MSCSTT REDEF Y@LCT_MSCSTT_BYT UNAL,
      117     9499    1          2 * BIT(5) UNAL,                 /* unused bits                        */
      118     9500    1          2 MLC16 BIT(1) UNAL,             /* MLC-16 (NMLC, rather than MLCP)    */
      119     9501    1          2 * BIT(2) UNAL;                 /* defined, not-used-here bits        */
      120     9502    1   DCL I SBIN;
      121     9503        %KV@USRENT;
      122     9523    1   DCL LVL UBIN;
      123     9524        /*
      124     9525        Current execution time (for all async activity).
      125     9526        */
      126     9527    1   DCL Y@CRTEXCTIM UBIN(32) AUTO;
      127     9528
      128     9529        /* %KH$TRC(NAME=KH@TRC,STCLASS=AUTO); */
      129     9530        %KV$VDH_DSC(NAME=KV@VDH_DSC,STCLASS=AUTO);
      130     9566        %KH$IO(FPTN=KH@IO_OTPLCTBYT,FNC=%GH#IO_OTPLCTBYT,STCLASS=AUTO);
      131     9680        %KH$IO(FPTN=KH@IO_OTPCHNCTR,FNC=%GH#IO_OTPCHNCTR,STCLASS=AUTO);
      132     9794        %KH$DWNLODCCP(NAME=KH@DWNLODCCP,STCLASS=AUTO); /* parm to call KHI$DWNLODCCP  */
      133     9817        %KH$DWNLODLCT(NAME=KH@DWNLODLCT,STCLASS=AUTO); /* parm to call KHI$DWNLODLCT  */
      134     9841
      135     9842
      136     9843        /* ADMINISTRATIVE ROUTINES                                                    */
      137     9844
      138     9845
      139     9846
      140     9847        /**************************************************************************   */
      141     9848        /***** DON'T DO 'RETURN'S IN THIS CODE - THE LEVEL CHANGE CODE AT *****       */
      142     9849        /***** THE END MUST BE EXECUTED *****                                         */
      143     9850        /**************************************************************************   */
      144     9851    1      CODE = ADMIN_FPT.FNC;
      145     9852    1      BCHN$ = ADMIN_FPT.CHN$;
      146     9853
      147     9854    1      IF (CODE = %KHA_FNC_REQSTATS) THEN
      148     9855
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:5    
      149     9856        /* THIS OPERATOR DOESN'T HAVE AN ASSOCIATED CHANNEL TABLE ENTRY.              */
      150     9857        /* DON'T TRY TO LOOK AT THE DEBUG BIT IN THE CHANNEL TABLE ENTRY.             */
      151     9858
      152     9859           %KH$CALTRC (CND = GLB, COD = %KA#TRC_ADM);
      153     9894    1      ELSE
      154     9895
      155     9896        /* THIS OPERATOR HAS AN ASSOCIATED CHANNEL TABLE ENTRY. CHECK                 */
      156     9897        /* THE DEBUG BIT IN IT.                                                       */
      157     9898
      158     9899           %KH$CALTRC (CND = DFL, COD = %KA#TRC_ADM);
      159     9934
      160     9935    1      LVL = KA_INT_LEV;
      161     9936
      162     9937        /* IF THE CURRENT LEVEL IS BELOW THE ASYNC INHIBIT LEVEL,                     */
      163     9938        /* GO TO THE ASYNC INHIBIT LEVEL.                                             */
      164     9939
      165     9940    1      CALL KHI$DISABLE(LVL);
      166     9941    1      GOTO COMMON;
      167     9942    1   KAA$INIT: ENTRY ALTRET;
      168     9943    1      CODE = %KHA_FNC_CNTRLCHG;
      169     9944    1      LVL = 0;
      170     9945
      171     9946    1   COMMON:;
      172     9947    2      DO CASE( CODE );
      173     9948
      174     9949    2      CASE %KHA_FNC_CNTRLCHG;
      175     9950        /*
      176     9951        A control parameter is being changed.  Fix up any interrelationships.
      177     9952        */
      178     9953    2         CALL Y$LOG2 (KA_OTPBFRBYTSIZ_BIG, KA_OTPBFRBYTSIZ_BIGLOG2);
      179     9954
      180     9955    2         CALL Y$LOG2 (KA_OTPBFRBYTSIZ_SML, KA_OTPBFRBYTSIZ_SMLLOG2);
      181     9956
      182     9957    2         IF ADDR(ADMIN_FPT)=ADDR(NIL) THEN EXIT;
      183     9958    2         IF ADMIN_FPT.CONTROL#~=%KL_HNDLRPARM_MMRINTCHC THEN EXIT;
      184     9959    2         IF KV_B_POOL$->KV$BPC.DBG.BITMAP
      185     9960    2         THEN KV_B_POOL$->KV$BPC.DBG =
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:6    
      186     9961    2           KH_CTLTBL.PARM.PTR$(%KL_HNDLRPARM_MMRINTCHC)->MMRINTCHC;
      187     9962    3         ELSE DO;
      188     9963    3            KV_B_POOL$->KV$BPC.DBG =
      189     9964    3              KH_CTLTBL.PARM.PTR$(%KL_HNDLRPARM_MMRINTCHC)->MMRINTCHC;
      190     9965    3            KV_B_POOL$->KV$BPC.DBG.BITMAP = '0'B;
      191     9966    3            KH_CTLTBL.PARM.PTR$(%KL_HNDLRPARM_MMRINTCHC)->MMRINTCHC =
      192     9967    3              KV_B_POOL$->KV$BPC.DBG;
      193     9968    3         END;
      194     9969    2      CASE %KHA_FNC_DISABLE, %KHA_FNC_ENABLE, %KHA_FNC_CNFG;
      195     9970
      196     9971        /* THIS IS A REQUEST TO ENABLE OR DISABLE A LINE.                             */
      197     9972
      198     9973    2         CALL Y$DWNLOD;
      199     9974
      200     9975
      201     9976    2      CASE %KHA_FNC_INTCTR;
      202     9977
      203     9978        /* WE ARE TO INITIALIZE A CONTROLLER                                          */
      204     9979        /* THIS IS THE FIRST LINE IN THIS DEVICE CLASS ON                             */
      205     9980        /* THE CLC*                                                                   */
      206     9981
      207     9982    2         KH@DWNLODCCP = Y_DWNLODCCP;
      208     9983    2         KH@DWNLODCCP.CCPLCT$ = ADDR(KAC$MLCP);
      209     9984    2         KH@DWNLODCCP.CHN$ = BCHN$;
      210     9985    2         KH@DWNLODCCP.CCPLODBIS = 0;
      211     9986    3         CALL KHI$DWNLODCCP(KH@DWNLODCCP) WHENALTRETURN DO; RETURN; END;
      212     9987
      213     9988
      214     9989    2      CASE %KHA_FNC_KILL, %KHA_FNC_DISCONNECT_RQS;
      215     9990
      216     9991        /* KILL THE LINE.                                                             */
      217     9992
      218     9993    2         CALL Y$DWNLOD;
      219     9994    2         BCTX$ = KH$CHN.CTX$;
      220     9995    3         IF (BCTX$ ~= ADDR(NIL)) THEN DO;
      221     9996
      222     9997        /* THERE IS AN ASYNC CONTEXT BLOCK ASSOCIATED WITH THIS CHANNEL.              */
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:7    
      223     9998        /* REPORT A FROG-REQUESTED DISCONNECT.                                        */
      224     9999
      225    10000    4            IF CODE=%KHA_FNC_KILL THEN DO;
      226    10001    4               KA$CTX.VDI$->KV$VDI.PHSDSC = '1'B; /* Can't talk anymore          */
      227    10002    4               IF KH$CHN.OTPCCBCNT=0 THEN EXIT;
      228    10003
      229    10004        /* Fix up the output buffer chain, since we just nailed the MLCP. */
      230    10005
      231    10006    4               KH$CHN.OTPCCBCNT = 0;
      232    10007    4               KA$CTX.OTPBFRNXTLOD$ = KA$CTX.OTPBFRHED$;
      233    10008    4            END;
      234    10009                 %KV$USRENT (VDI$=KA$CTX.VDI$, DFR$=Y@DFR,
      235    10010                 STT=KV_STT, SCHRSN=%KV_SCHRSN_DFR3);
             10023    3           KV_STT.USRENTCNT = KV_STT.USRENTCNT + 1;
             10024    4           IF NOT KA$CTX.VDI$->KV$VDI.BSY THEN DO;
             10025    4              KA$CTX.VDI$->KV$VDI.BSY = '1'B;
             10026    4              KV@USRENT.SVDPTR$ = KV$PTR$;
             10027    4              KV$PTR$ = KA$CTX.VDI$->KV$VDI.ASNINPPTR$;
             10028    4              END;                         /* ELSE IF ~BSY                       */
             10029    4           ELSE DO;
             10030    4              KA$CTX.VDI$->KV$VDI.DFR.USR(3) = '1'B;
             10031    4           KV_STT.USRENTDFRCNT = KV_STT.USRENTDFRCNT + 1;
             10032    4              GOTO Y@DFR;
             10033    4              END;                         /* END IF                             */
      236    10036    3            IF KA$CTX.OTPBFRBYTCNT~=0 AND CODE=%KHA_FNC_KILL
      237    10037    3            THEN CALL KAO$DLTOTP (KV@VDH_DSC);
      238    10038    3            %KV_VDI.INTPHSDSC = '1'B;
      239    10039    3            KV@VDH_DSC = KV_VDH_DSC;
      240    10040    3            KV@VDH_DSC.RSN = %KV_DSCRSN_FRG;
      241    10041    3            CALL KVV$VDI(KV@VDH_DSC) ;
      242    10042    3            IF %KV_VDI.VDHEVTENB(%KV_VDH_EVT_ID_RLSVDI)
      243    10043    3            THEN CALL KAO$OTPINT;
      244    10044                 %KV$USREXT;
             10050    3           KV$PTR.VDI$->KV$VDI.BSY = '0'B;
             10052    3           KV$PTR$ = KV@USRENT.SVDPTR$;
      245    10054    3   Y@DFR:   ;
      246    10055    4            IF CODE=%KHA_FNC_KILL THEN DO;
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:8    
      247    10056        /*
      248    10057        Make kill work all the time.
      249    10058        */
      250    10059    4               IF KA$CTX.VDI$->KV$VDI.BSY AND KV$PTR$~=ADDR(NIL)
      251    10060    4               THEN IF KA$CTX.VDI$=KV$PTR.VDI$ THEN EXIT; /* except one case     */
      252    10061    4               KA$CTX.VDI$->KV$VDI.USRCTX$ = ADDR(NIL); /* Unhook from VDH       */
      253    10062    4               I = KA$CTX.VDI$->KV$VDI.LINSPD;
      254    10063    4               KA_STT.LINSPDDST(I) = KA_STT.LINSPDDST(I)-1;
      255    10064    4               CALL KAS$DSCNO_VDI(KH$CHN); /* And from the channel.              */
      256    10065    4            END;
      257    10066    3         END /* IF */;
      258    10067    2      CASE %KHA_FNC_REQSTATS;
      259    10068         /*
      260    10069         Request for sending statistics buffers to the host.
      261    10070         */
      262    10071    2         IF ADMIN_FPT.CTX$->KL_REQSTATS.SLCENT(%KH#ENTID_ASYNC)
      263    10072    3           OR ADMIN_FPT.CTX$->KL_REQSTATS.SLCENT(%KH#ENTID_VDH) THEN DO;
      264    10073         /*
      265    10074         The async handler and VDH are selected to send statistics.
      266    10075         */
      267    10076    4            IF ADMIN_FPT.CTX$->KL_REQSTATS.DSPENT(%KH#ENTID_ASYNC) THEN DO;
      268    10077         /*
      269    10078         We're to send the async statistics buffer (KA$STT).
      270    10079
      271    10080         Move in the buffer pool statistics data.
      272    10081         */
      273    10082    4               KA_STT.BPSTT = KV_B_POOL$->KV$BPCSTT;
      274    10083    4               KA_STT.BPSTT.MINSIZ = KV_B_POOL$->KV$BPC.MINSIZ;
      275    10084    5               DO I=SIZEW(KV$BPC.COUNT)*2-1 DOWNTO 0;
      276    10085    5                  KA_STT.BPSTT.COUNT(I) =
      277    10086    5                    ADDR(KA_STT.BPSTT)->KV$BPC.COUNT(I);
      278    10087    5               END;
      279    10088    4               CALL KHA$SNDSTT(ADMIN_FPT.CTX$->KL_REQSTATS, VECTOR(KA_STT));
      280    10089    4            END;  /* END IF ADMIN_FPT.CTX$->KL_REQSTATS.DSPENT(%KH#ENTID_ASYNC)  */
      281    10090    4            IF ADMIN_FPT.CTX$->KL_REQSTATS.DSPENT(%KH#ENTID_VDH) THEN DO;
      282    10091         /*
      283    10092         We're to send the VDH statistics buffer.
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:9    
      284    10093         */
      285    10094    4               CALL KHC$XEQ2(Y@CRTEXCTIM);
      286    10095    4               %KV_STT.SCHEXCTIM = Y@CRTEXCTIM - KA_STT.KHSTT.INPINTISATIM - KA_STT.
             10095                        KHSTT.OTPINTISATIM;
      287    10096    4               CALL KHA$SNDSTT(ADMIN_FPT.CTX$->KL_REQSTATS, VECTOR(KV_STT));
      288    10097    4            END;                           /* END IF .DSPENT(%KH#ENTID_VDH)      */
      289    10098    3         END;               /* END IF .SLCENT(%KH#ENTID_ASYNC)&(%KH#ENTID_VDH)   */
      290    10099    2      END /* CASE */;
      291    10100    2      IF (LVL > KA_INT_LEV) THEN DO;
      292    10101
      293    10102        /* WE WERE CALLED FROM BELOW THE ASYNC INHIBIT LEVEL, SO WE                   */
      294    10103        /* SHOULD DO AN ENABLE TO GO BACK TO THE LEVEL WE WERE                        */
      295    10104        /* CALLED AT.                                                                 */
      296    10105
      297    10106    2         CALL KHI$ENABLE;
      298    10107    2      END /* IF */;
      299    10108    1      RETURN;
      300    10109        %EJECT;
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:10   
      301    10110
      302    10111        /* DOWNLOAD THE CONFIGURATION INFORMATION OR THE LCTS TO                      */
      303    10112        /* THE MLCP.                                                                  */
      304    10113
      305    10114    1   Y$DWNLOD: PROC;
      306    10115
      307    10116    2   DCL Y_STT2ENB BIT(32) CONSTANT INIT('4580C000'X);
      308    10117    2   DCL Y_STT_2_ENB(0:31) REDEF Y_STT2ENB BIT(1) UNAL;
      309    10118
      310    10119    2      Y@LCT_INTCNF_BYT = 0;
      311    10120    2      Y@LCT_INTCNF.LINSPD = KH$CHN.LINSPD;
      312    10121    2      Y@LCT_INTCNF.BRKRQ = KH$CHN.BRKRQ;
      313    10122    2      Y@LCT_INTCNF.AUTBAD = KH$CHN.AUTBAD;
      314    10123    2      Y@LCT_INTCNF.DC1DC3FLWCTR = KH$CHN.DC1DC3NTWOTPFLWCTR;
      315    10124    2      IF Y_STT_2_ENB(KH$CHN.STT) AND (CODE~=%KHA_FNC_CNFG OR KH$CHN.ENB)
      316    10125    2      THEN Y@LCT_INTCNF.ENB = '1'B;
      317    10126    2      KH@IO_OTPLCTBYT = KH_IO_OTPLCTBYT;
      318    10127    2      KH@IO_OTPLCTBYT.LCTBYT.DAT = Y@LCT_INTCNF_BYT;
      319    10128    2      KH@IO_OTPLCTBYT.LCTBYT.ADR = %KA_LCT_INTCNF;
      320    10129    2      IF NOT KH$CHN.DWNLOD
      321    10130
      322    10131        /* We're to down-load the LCTs if not already down-loaded, and                */
      323    10132        /* they're not.                                                               */
      324    10133
      325    10134    2        OR CODE=%KHA_FNC_KILL
      326    10135
      327    10136        /* This is a KILL request, just blow anything away. */
      328    10137
      329    10138    3        OR KH$CHN.CTX$=ADDR(NIL) THEN DO;
      330    10139
      331    10140        /* The LCTs are already down-loaded, and there is no user                     */
      332    10141        /* associated with this line (at least none that has gotten                   */
      333    10142        /* far enough to get L6 context allocated).                                   */
      334    10143        /* Down-load the LCTs again, and re-initialize the line to                    */
      335    10144        /* force the input CCP to notice the configuration info change.               */
      336    10145
      337    10146
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:11   
      338    10147        /* INITIALIZE THE CHANNEL PAIR, AND DOWNLOAD THE LCT'S.                       */
      339    10148
      340    10149    3         KH@DWNLODLCT = Y_DWNLODLCT;
      341    10150    3         KH@DWNLODLCT.CCPLCT$ = ADDR(KAC$MLCP);
      342    10151    3         KH@DWNLODLCT.CHN$ = BCHN$;
      343    10152    3         KH@DWNLODLCT.RCVINTLVL = KA_INT_LEV + 1;
      344    10153    3         KH@DWNLODLCT.TRNINTLVL = KA_INT_LEV + 2;
      345    10154    3         CALL KHI$DWNLODLCT(KH@DWNLODLCT)
      346    10155    4         WHENRETURN DO;
      347    10156
      348    10157        /* now we stuff the INTCNF into the LCT */
      349    10158
      350    10159    4            CALL KHI$IO_OTPLCTBYT(KH$CHN,KH@IO_OTPLCTBYT);
      351    10160
      352    10161        /* now we stuff the MSCSTT (.MLC16 - MLC-16 vs MLCP) into the LCT */
      353    10162
      354    10163    4            Y@LCT_MSCSTT_BYT=0;
      355    10164    4            Y@LCT_MSCSTT.MLC16 = (KH$CHN.DVCID = '2978'X);
      356    10165    4            KH@IO_OTPLCTBYT.LCTBYT.DAT = Y@LCT_MSCSTT_BYT;
      357    10166    4            KH@IO_OTPLCTBYT.LCTBYT.ADR = %KA_LCT_MSCSTT;
      358    10167    4            CALL KHI$IO_OTPLCTBYT(KH$CHN,KH@IO_OTPLCTBYT);
      359    10168
      360    10169        /* THIS LINE ISN'T FLAGGED AS BEING DEAD, SO ISSUE A START IO                 */
      361    10170        /* TO THE INPUT CHANNEL.                                                      */
      362    10171
      363    10172    4            KH@IO_OTPCHNCTR = KH_IO_OTPCHNCTR;
      364    10173    4            KH@IO_OTPCHNCTR.CHNCTR.STRIO = '1'B;
      365    10174    4            CALL KHI$IO_OTP(KH$CHN,KH@IO_OTPCHNCTR);
      366    10175    4         END /* DO WHENRETURN */;
      367    10176    3      END; ELSE DO;
      368    10177
      369    10178        /* We aren't to initialize the line. Just update the                          */
      370    10179        /* LCT containing the initial configuration information.                      */
      371    10180
      372    10181    3         CALL KHI$IO_OTPLCTBYT(KH$CHN,KH@IO_OTPLCTBYT);
      373    10182    3      END /* IF */;
      374    10183
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:12   
      375    10184    2   END Y$DWNLOD;
      376    10185        %EJECT;
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:13   
      377    10186        /*
      378    10187        Return (as PARAM 2) the LOG2 of PARAM 1.
      379    10188        */
      380    10189    1   Y$LOG2: PROC (Y_PRM1, Y_PRM2);
      381    10190
      382    10191    2   DCL Y_PRM1 UBIN WORD PARAM;
      383    10192    2   DCL Y_PRM2 UBIN WORD PARAM;
      384    10193    2   DCL Y@TMP1 UBIN WORD AUTO;
      385    10194    2   DCL Y@TMP2 UBIN WORD AUTO;
      386    10195
      387    10196    2      Y@TMP1 = 32;
      388    10197
      389    10198    3      DO Y@TMP2 = 5 TO 15;
      390    10199    4         IF Y_PRM1 <= Y@TMP1 THEN DO;
      391    10200    4            Y_PRM1 = Y@TMP1;               /* Use the whole buffer, at least.*/
      392    10201    4            Y_PRM2 = Y@TMP2;
      393    10202    4            RETURN;
      394    10203    4         END;                              /* END IF Y_PRM1 <= Y@TMP1            */
      395    10204    3         Y@TMP1 = Y@TMP1 * 2;
      396    10205    3      END; /* END DO FOR Y@TMP2 = 5 TO 15 */
      397    10206    2   END Y$LOG2;
      398    10207    1   END KAA$ADM;

PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:14   
--  Include file information  --

   KH$IO.:E05TOU  is referenced.
   GH_IOFNC_E.:E05TOU  is referenced.
   KH_CHN.:E05TOU  is referenced.
   KH$CHN.:E05TOU  is referenced.
   KHA_FNC_E.:E05TOU  is referenced.
   KA_LCT_E.:E05TOU  is referenced.
   KW_ALCT_E.:E05TOU  is referenced.
   KA$GLB.:E05TOU  is referenced.
   KA_GLB.:E05TOU  is referenced.
   KH_TRC_M.:E05TOU  is referenced.
   KV_INT_M.:E05TOU  is referenced.
   KH$TRC.:E05TOU  is referenced.
   KH_TRC.:E05TOU  is referenced.
   KH$STT.:E05TOU  is referenced.
   KA_GLB_E.:E05TOU  is referenced.
   KV$BPC.:E05TOU  is referenced.
   KV_GLB_M.:E05TOU  is referenced.
   KV_ASCCHR_E.:E05TOU  is referenced.
   KL_CONTROL_C.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
   K_ID_E.:E05TOU  is referenced.
   KL_MACRO_C.:E05TOU  is referenced.
   KL_AFCN_C.:E05TOU  is referenced.
   KH_MACRO_C.:E05TOU  is referenced.
   KV_PRMID_E.:E05TOU  was found in the system file and is never referenced.
   KV_GLBCNS_E.:E05TOU  was found in the system file and is referenced.
   KV$VDO.:E05TOU  was found in the system file and is never referenced.
   KV$VDH.:E05TOU  was found in the system file and is referenced.
   KV$USR.:E05TOU  was found in the system file and is never referenced.
   KV$SND.:E05TOU  was found in the system file and is never referenced.
   KV$INT.:E05TOU  was found in the system file and is referenced.
   KV$GLBCTX.:E05TOU  was found in the system file and is referenced.
   KV$GLB.:E05TOU  was found in the system file and is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is referenced.
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:15   
   KI_CP6.:E05TOU  was found in the system file and is referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure KAA$ADM.

   Procedure KAA$ADM requires 801 words for executable code.
   Procedure KAA$ADM requires 50 words of local(AUTO) storage.

    No errors detected in file KAA$SRV.:E05TSI    .

PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:16   

 Object Unit name= KAA$ADM                                    File name= KAA$SRV.:E05TOU
 UTS= JUL 29 '97 23:54:59.04 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0  RoData even  UTS     20     14  KAA$ADM
    1   Proc  even  none   801    321  KAA$ADM
    2  RoData even  none     6      6  KAA$ADM

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     1      0   yes    yes     yes      Std        1  KAA$ADM
     1     26          yes     yes      Std        0  KAA$INIT

  ****  Data defs  ****

 Sect HexLoc  Name                           Sect HexLoc  Name
    0      0  KV_VDH_DSC
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:17   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       1 KHI$DISABLE
         yes           Std       1 KAO$DLTOTP
 yes     yes           Std       2 KHA$SNDSTT
         yes           Std       0 KHI$ENABLE
 yes     yes           Std       1 KHI$DWNLODCCP
 yes     yes           Std       1 KHC$XEQ2
 yes     yes           Std       1 KVV$VDI
         yes           Std       0 KAO$OTPINT
         yes           Std       1 KAS$DSCNO_VDI
 yes     yes           Std       1 KHI$DWNLODLCT
 yes     yes           Std       2 KHI$IO_OTP
 yes     yes           Std       2 KHI$IO_OTPLCTBYT
                       nStd      0 X6A_AUTO_1
                       nStd      0 X6A_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    KH_CTLTBL                             KV_B_POOL$                            KV$PTR$
     KV_STT                                KA_OTPBFRBYTSIZ_BIG                   KA_OTPBFRBYTSIZ_BIGLOG2
     KA_OTPBFRBYTSIZ_SML                   KA_OTPBFRBYTSIZ_SMLLOG2               KA_STT
r    KH_CHNHI                         r    KH_CHNLOW                             KAC$MLCP
     KA_INT_LEV                       r    G$ROS$
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:18   


        1        1        /*M* ASYNC HANDLER ADMINISTRATIVE SERVICE ROUTINES                            */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*     NSO,PLM=3,SQB=Y,AND=Y,ENI=0,SDI=3,MCL=10,CSI=0,ECI=0,IAD=3,IND=0 */
        8        8        KAA$ADM: PROC(ADMIN_FPT) ALTRET;

      8   1 000000  D380 0000 0000  xent KAA$ADM         LNJ,B5   X6A_AUTO_1
          1 000003       0032 0001                       DC       50,1

        9        9
       10       10        /* parameters */
       11       11
       12       12        %INCLUDE KH_MACRO_C;
       13      755        %INCLUDE KL_AFCN_C;
       14      856        %INCLUDE KL_MACRO_C;
       15     4208        %INCLUDE K_ID_E;
       16     4258        %INCLUDE LCP_6;
       17     4449        %K#ENTID_E;
       18     4468        %KL_REQSTATS;
       19     4762        %KH$ADMIN_FPT (FPTN = ADMIN_FPT, STCLASS = PARAM);
       20     4973        %INCLUDE KL_CONTROL_C;
       21     5353        %KH$CTLTBL (FPTN=KH_CTLTBL, STCLASS=SYMREF READONLY);
       22     5565    1   DCL MMRINTCHC BIT(16) BASED ALIGNED;
       23     5566
       24     5567        /* */
       25     5568
       26     5569 S      %INCLUDE KV_GLBCNS_E;
       27     5570        %KV_DSCRSN_E;                           /* disconnect reasons                 */
       28     5579        %KV_SCHRSN_E;                           /* schedule reasons                   */
       29     5586        %KV_VDH_EVT_ID_E;
       30     5592        %INCLUDE KV_ASCCHR_E;
       31     5729 S      %INCLUDE KV$GLB;
       32     5730 S      %INCLUDE KV$GLBCTX;
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:19   
       33     5731 S      %INCLUDE KV$VDH;
       34     5732        %INCLUDE KV_GLB_M;                      /*  VDH-user PROCs                    */
       35     5854 S      %INCLUDE KV$INT;
       36     5855        %INCLUDE KV$BPC;
       37     5884        %KV$BPC;
       38     5906        %KV$BPC (NAME=KV$BPCSTT, STATS=YES);
       39     5928    1   DCL KV_B_POOL$ PTR SYMREF;
       40     5929        %KV$PTR;                                /*  VDH Pointers, status              */
       41     5972        %KV$SSN;                                /*  VDH Session                       */
       42     6051        %KV$VDI;                                /*  VDI (VDH < ->VDH user interface)  */
       43     6122        %KV$SHRBFR;                             /*  ASYNC MISC. BUFFER TEMPLATE       */
       44     6154        %KV$REDBFR;                             /*  ASYNC INPUT BUFFER TEMPLATE       */
       45     6157        %KV$STT (NAME = KV_STT, STCLASS = SYMREF);
       46     6551        %KV$STT;
       47     6945        %SET KV_STT = CHARTEXT('KV_STT');
       48     6946        %INCLUDE KA_GLB_E;
       49     7024        %INCLUDE KH$STT;                        /* For KA_STT                         */
       50     7054        %INCLUDE KH_TRC;
       51     7076        %INCLUDE KH$TRC;
       52     7105        %INCLUDE KV_INT_M;
       53     7248        %INCLUDE KH_TRC_M;
       54     7296        %KA_TRC_E;
       55     7313        %KH_TRC;
       56     7328        %KA_HLTOTP_E;
       57     7337        %INCLUDE KA_GLB;
       58     7414        %INCLUDE KA$GLB;
       59     7555        %KA$INPBFR;                             /*                                    */
       60     7580        %KA$CTX (STCLASS="BASED(BCTX$)");       /*  ASYNC CONTEXT BLOCK               */
       61     7704        %KA_MSC;
       62     7726        %INCLUDE KW_ALCT_E;                     /*  ASYNC LCT ITEMS                   */
       63     7916        %INCLUDE KA_LCT_E;                      /*  ASYNC LCT ITEMS                   */
       64     8040        %KA_STT;                                /*  STATISTICS                        */
       65     8403        %INCLUDE KHA_FNC_E;                /* enable, disable, kill, reqstats, etc.   */
       66     8503        %INCLUDE KH$CHN;
       67     8625        %INCLUDE KH_CHN;
       68     8665        %KH_CHNDAT;                             /*  CHANNEL TABLE FIXED ITEMS         */
       69     8683        %KH$CHN(STCLASS = "BASED(BCHN$)");      /*  CHANNEL TABLE ENTRY ITEMS         */
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:20   
       70     8807        %KV$VDH_DSC (NAME=KV_VDH_DSC, STCLASS=CONSTANT SYMDEF, ALLSSN=YES);
       71     8843        %INCLUDE GH_IOFNC_E;                    /*  IO FUNCTION CODES                 */
       72     8912        %INCLUDE KH$IO;
       73     9159        %KH$IO(FPTN=KH_IO_OTPLCTBYT,FNC=%GH#IO_OTPLCTBYT,STCLASS=CONSTANT);
       74     9273        %KH$IO(FPTN=KH_IO_OTPCHNCTR,FNC=%GH#IO_OTPCHNCTR,STCLASS=CONSTANT);
       75     9387
       76     9388        %KH$DWNLODCCP(NAME=Y_DWNLODCCP,STCLASS=CONSTANT); /* parm to call KHI$DWNLODCCP */
       77     9411        %KH$DWNLODLCT(NAME=Y_DWNLODLCT,STCLASS=CONSTANT); /* parm to call KHI$DWNLODLCT */
       78     9435        %KH$CCPLCT;
       79     9461
       80     9462        /* symref */
       81     9463
       82     9464    1   DCL KAC$MLCP UBIN SYMREF;               /* we only need the address           */
       83     9465    1   DCL KA_INT_LEV UBIN SYMREF;             /* async run level                    */
       84     9466                       /* input level is 1 plus that, output level is 2 plus that     */
       85     9467
       86     9468        /* entry DCL's */
       87     9469
       88     9470    1   DCL KAO$DLTOTP ENTRY(1);
       89     9471    1   DCL KAO$OTPINT ENTRY;
       90     9472    1   DCL KAS$DSCNO_VDI ENTRY(1);
       91     9473    1   DCL KHA$SNDSTT ENTRY(2) ALTRET;
       92     9474    1   DCL KHI$IO_OTP ENTRY(2) ALTRET;
       93     9475    1   DCL KHI$IO_OTPLCTBYT ENTRY(2) ALTRET;
       94     9476    1   DCL KHI$DWNLODLCT ENTRY(1) ALTRET;
       95     9477    1   DCL KHI$DWNLODCCP ENTRY(1) ALTRET;
       96     9478    1   DCL KHI$DISABLE ENTRY(1);
       97     9479    1   DCL KHI$ENABLE ENTRY;
       98     9480    1   DCL KHC$XEQ2 ENTRY(1) ALTRET;
       99     9481    1   DCL KVV$VDI ENTRY(1) ALTRET;
      100     9482    1   DCL KHD$TRC ENTRY(1);
      101     9483    1   DCL KHA$TSTCNC ENTRY(2) ALTRET;
      102     9484
      103     9485        /* local variables   */
      104     9486
      105     9487    1   DCL BCHN$ PTR;
      106     9488    1   DCL BCTX$ PTR;
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:21   
      107     9489    1   DCL CODE UBIN;
      108     9490    1   DCL Y@LCT_INTCNF_BYT UBIN BYTE UNAL;
      109     9491    1   DCL 1 Y@LCT_INTCNF REDEF Y@LCT_INTCNF_BYT UNAL,
      110     9492    1          2 BRKRQ BIT(1) UNAL,
      111     9493    1          2 AUTBAD BIT(1) UNAL,
      112     9494    1          2 ENB BIT(1) UNAL,
      113     9495    1          2 DC1DC3FLWCTR BIT(1) UNAL,
      114     9496    1          2 LINSPD UBIN(4) UNAL;
      115     9497    1   DCL Y@LCT_MSCSTT_BYT UBIN BYTE UNAL;
      116     9498    1   DCL 1 Y@LCT_MSCSTT REDEF Y@LCT_MSCSTT_BYT UNAL,
      117     9499    1          2 * BIT(5) UNAL,                 /* unused bits                        */
      118     9500    1          2 MLC16 BIT(1) UNAL,             /* MLC-16 (NMLC, rather than MLCP)    */
      119     9501    1          2 * BIT(2) UNAL;                 /* defined, not-used-here bits        */
      120     9502    1   DCL I SBIN;
      121     9503        %KV@USRENT;
      122     9523    1   DCL LVL UBIN;
      123     9524        /*
      124     9525        Current execution time (for all async activity).
      125     9526        */
      126     9527    1   DCL Y@CRTEXCTIM UBIN(32) AUTO;
      127     9528
      128     9529        /* %KH$TRC(NAME=KH@TRC,STCLASS=AUTO); */
      129     9530        %KV$VDH_DSC(NAME=KV@VDH_DSC,STCLASS=AUTO);
      130     9566        %KH$IO(FPTN=KH@IO_OTPLCTBYT,FNC=%GH#IO_OTPLCTBYT,STCLASS=AUTO);
      131     9680        %KH$IO(FPTN=KH@IO_OTPCHNCTR,FNC=%GH#IO_OTPCHNCTR,STCLASS=AUTO);
      132     9794        %KH$DWNLODCCP(NAME=KH@DWNLODCCP,STCLASS=AUTO); /* parm to call KHI$DWNLODCCP  */
      133     9817        %KH$DWNLODLCT(NAME=KH@DWNLODLCT,STCLASS=AUTO); /* parm to call KHI$DWNLODLCT  */
      134     9841
      135     9842
      136     9843        /* ADMINISTRATIVE ROUTINES                                                    */
      137     9844
      138     9845
      139     9846
      140     9847        /**************************************************************************   */
      141     9848        /***** DON'T DO 'RETURN'S IN THIS CODE - THE LEVEL CHANGE CODE AT *****       */
      142     9849        /***** THE END MUST BE EXECUTED *****                                         */
      143     9850        /**************************************************************************   */
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:22   
      144     9851    1      CODE = ADMIN_FPT.FNC;

   9851   1 000005  ECC7 0004                            LDB,B6   @ADMIN_FPT,AUTO
          1 000007  E806                                 LDR,R6   ,B6
          1 000008  EF47 000A                            STR,R6   CODE,AUTO

      145     9852    1      BCHN$ = ADMIN_FPT.CHN$;

   9852   1 00000A  DCC6 000B                            LDB,B5   11,B6
          1 00000C  DFC7 0006                            STB,B5   BCHN$,AUTO

      146     9853
      147     9854    1      IF (CODE = %KHA_FNC_REQSTATS) THEN

   9854   1 00000E  6D04                                 CMV,R6   4
          1 00000F  0981 0003                            BNE      s:9935,PREL

      148     9855
      149     9856        /* THIS OPERATOR DOESN'T HAVE AN ASSOCIATED CHANNEL TABLE ENTRY.              */
      150     9857        /* DON'T TRY TO LOOK AT THE DEBUG BIT IN THE CHANNEL TABLE ENTRY.             */
      151     9858
      152     9859           %KH$CALTRC (CND = GLB, COD = %KA#TRC_ADM);

   9892   1 000011  0F81 0001                            B        s:9935,PREL

      153     9894    1      ELSE
      154     9895
      155     9896        /* THIS OPERATOR HAS AN ASSOCIATED CHANNEL TABLE ENTRY. CHECK                 */
      156     9897        /* THE DEBUG BIT IN IT.                                                       */
      157     9898
      158     9899           %KH$CALTRC (CND = DFL, COD = %KA#TRC_ADM);

      159     9934
      160     9935    1      LVL = KA_INT_LEV;

   9935   1 000013  D800 0000 0000  xsym                 LDR,R5   KA_INT_LEV
          1 000016  DF47 0010                            STR,R5   LVL,AUTO
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:23   

      161     9936
      162     9937        /* IF THE CURRENT LEVEL IS BELOW THE ASYNC INHIBIT LEVEL,                     */
      163     9938        /* GO TO THE ASYNC INHIBIT LEVEL.                                             */
      164     9939
      165     9940    1      CALL KHI$DISABLE(LVL);

   9940   1 000018  CBC7 0010                            LAB,B4   LVL,AUTO
          1 00001A  CFC7 002E                            STB,B4   Y@TMP2+1,AUTO
          1 00001C  BBC7 002E                            LAB,B3   Y@TMP2+1,AUTO
          1 00001E  CBF0 0100                            LAB,B4   256,IMO
          1 000020  E380 0000 0000  xent                 LNJ,B6   KHI$DISABLE
          1 000023       0001                            DC       s:9941,PREL

      166     9941    1      GOTO COMMON;

   9941   1 000024  0F81 000B                            B        s:9944,PREL

      167     9942    1   KAA$INIT: ENTRY ALTRET;

   9942   1 000026  D380 0000 0000  xent KAA$INIT        LNJ,B5   X6A_AUTO_1
          1 000029       0032 0001                       DC       50,1

      168     9943    1      CODE = %KHA_FNC_CNTRLCHG;

   9943   1 00002B  6C1E                                 LDV,R6   30
          1 00002C  EF47 000A                            STR,R6   CODE,AUTO

      169     9944    1      LVL = 0;

   9944   1 00002E  8747 0010                            CL       LVL,AUTO

   9944   1                              COMMON          null
      170     9945
      171     9946    1   COMMON:;
      172     9947    2      DO CASE( CODE );

PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:24   
   9947   1 000030  B847 000A            COMMON          LDR,R3   CODE,AUTO
          1 000032  3D1F                                 CMV,R3   31
          1 000033  0281 01DA                            BGE      s:10100,PREL
          1 000035  A830 0000 003B  01                   LDR,R2   COMMON+11,R3
          1 000038  83A0 0000 005A  01                   JMP      s:9953,R2
          1 00003B       01B4                            DC       s:10100,PREL
          1 00003C       0041                            DC       s:9973,PREL
          1 00003D       0041                            DC       s:9973,PREL
          1 00003E       006C                            DC       s:9993,PREL
          1 00003F       0134                            DC       s:10071,PREL
          1 000040       01B4                            DC       s:10100,PREL
          1 000041       01B4                            DC       s:10100,PREL
          1 000042       01B4                            DC       s:10100,PREL
          1 000043       01B4                            DC       s:10100,PREL
          1 000044       01B4                            DC       s:10100,PREL
          1 000045       01B4                            DC       s:10100,PREL
          1 000046       01B4                            DC       s:10100,PREL
          1 000047       01B4                            DC       s:10100,PREL
          1 000048       006C                            DC       s:9993,PREL
          1 000049       01B4                            DC       s:10100,PREL
          1 00004A       0046                            DC       s:9982,PREL
          1 00004B       01B4                            DC       s:10100,PREL
          1 00004C       0041                            DC       s:9973,PREL
          1 00004D       01B4                            DC       s:10100,PREL
          1 00004E       01B4                            DC       s:10100,PREL
          1 00004F       01B4                            DC       s:10100,PREL
          1 000050       01B4                            DC       s:10100,PREL
          1 000051       01B4                            DC       s:10100,PREL
          1 000052       01B4                            DC       s:10100,PREL
          1 000053       01B4                            DC       s:10100,PREL
          1 000054       01B4                            DC       s:10100,PREL
          1 000055       01B4                            DC       s:10100,PREL
          1 000056       01B4                            DC       s:10100,PREL
          1 000057       01B4                            DC       s:10100,PREL
          1 000058       01B4                            DC       s:10100,PREL
          1 000059       0000                            DC       s:9953,PREL

PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:25   
      173     9948
      174     9949    2      CASE %KHA_FNC_CNTRLCHG;

      175     9950        /*
      176     9951        A control parameter is being changed.  Fix up any interrelationships.
      177     9952        */
      178     9953    2         CALL Y$LOG2 (KA_OTPBFRBYTSIZ_BIG, KA_OTPBFRBYTSIZ_BIGLOG2);

   9953   1 00005A  EB80 0000 0000  xsym                 LAB,B6   KA_OTPBFRBYTSIZ_BIGLOG2
          1 00005D  EFC7 002A                            STB,B6   @Y_PRM1+2,AUTO
          1 00005F  DB80 0000 0000  xsym                 LAB,B5   KA_OTPBFRBYTSIZ_BIG
          1 000062  DFC7 0028                            STB,B5   KH@DWNLODLCT+10,AUTO
          1 000064  E3C0 0292                            LNJ,B6   s:0,PREL
          1 000066       0001                            DC       s:9955,PREL

      179     9954
      180     9955    2         CALL Y$LOG2 (KA_OTPBFRBYTSIZ_SML, KA_OTPBFRBYTSIZ_SMLLOG2);

   9955   1 000067  EB80 0000 0000  xsym                 LAB,B6   KA_OTPBFRBYTSIZ_SMLLOG2
          1 00006A  EFC7 002A                            STB,B6   @Y_PRM1+2,AUTO
          1 00006C  DB80 0000 0000  xsym                 LAB,B5   KA_OTPBFRBYTSIZ_SML
          1 00006F  DFC7 0028                            STB,B5   KH@DWNLODLCT+10,AUTO
          1 000071  E3C0 0285                            LNJ,B6   s:0,PREL
          1 000073       0001                            DC       s:9957,PREL

      181     9956
      182     9957    2         IF ADDR(ADMIN_FPT)=ADDR(NIL) THEN EXIT;

   9957   1 000074  ECC7 0004                            LDB,B6   @ADMIN_FPT,AUTO
          1 000076  8DD6                                 CMN      B6
          1 000077  0901 0196                            BE       s:10100,PREL

      183     9958    2         IF ADMIN_FPT.CONTROL#~=%KL_HNDLRPARM_MMRINTCHC THEN EXIT;

   9958   1 000079  E846 0011                            LDR,R6   17,B6
          1 00007B  6D0E                                 CMV,R6   14
          1 00007C  0981 0191                            BNE      s:10100,PREL
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:26   

      184     9959    2         IF KV_B_POOL$->KV$BPC.DBG.BITMAP

   9959   1 00007E  DC80 0000 0000  xsym                 LDB,B5   KV_B_POOL$
          1 000081  89C5 0071                            CMZ      113,B5
          1 000083  0881 0009                            BAGE     s:9963,PREL

      185     9960    2         THEN KV_B_POOL$->KV$BPC.DBG =

   9960   1 000085  CC80 0000 002C  xsym                 LDB,B4   KH_CTLTBL+44
          1 000088  D804                                 LDR,R5   ,B4
          1 000089  DF45 0071                            STR,R5   113,B5
          1 00008B  0F81 0182                            B        s:10100,PREL

      186     9961    2           KH_CTLTBL.PARM.PTR$(%KL_HNDLRPARM_MMRINTCHC)->MMRINTCHC;
      187     9962    3         ELSE DO;

      188     9963    3            KV_B_POOL$->KV$BPC.DBG =

   9963   1 00008D  CC80 0000 002C  xsym                 LDB,B4   KH_CTLTBL+44
          1 000090  D804                                 LDR,R5   ,B4
          1 000091  DF45 0071                            STR,R5   113,B5

      189     9964    3              KH_CTLTBL.PARM.PTR$(%KL_HNDLRPARM_MMRINTCHC)->MMRINTCHC;
      190     9965    3            KV_B_POOL$->KV$BPC.DBG.BITMAP = '0'B;

   9965   1 000093  8845 0071                            LBF,'8000'X       113,B5
   9965   1 000095       8000

      191     9966    3            KH_CTLTBL.PARM.PTR$(%KL_HNDLRPARM_MMRINTCHC)->MMRINTCHC =

   9966   1 000096  E845 0071                            LDR,R6   113,B5
          1 000098  EF04                                 STR,R6   ,B4

      192     9967    3              KV_B_POOL$->KV$BPC.DBG;
      193     9968    3         END;

PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:27   
   9968   1 000099  0F81 0174                            B        s:10100,PREL

      194     9969    2      CASE %KHA_FNC_DISABLE, %KHA_FNC_ENABLE, %KHA_FNC_CNFG;

      195     9970
      196     9971        /* THIS IS A REQUEST TO ENABLE OR DISABLE A LINE.                             */
      197     9972
      198     9973    2         CALL Y$DWNLOD;

   9973   1 00009B  E3C0 0182                            LNJ,B6   s:0,PREL
          1 00009D       0001                            DC       s:9973+3,PREL
          1 00009E  0F81 016F                            B        s:10100,PREL

      199     9974
      200     9975
      201     9976    2      CASE %KHA_FNC_INTCTR;

      202     9977
      203     9978        /* WE ARE TO INITIALIZE A CONTROLLER                                          */
      204     9979        /* THIS IS THE FIRST LINE IN THIS DEVICE CLASS ON                             */
      205     9980        /* THE CLC*                                                                   */
      206     9981
      207     9982    2         KH@DWNLODCCP = Y_DWNLODCCP;

   9982   1 0000A0  AB80 0000 0000  00                   LAB,B2   KV_VDH_DSC
          1 0000A3  2C0C                                 LDV,R2   12
          1 0000A4  6C0A                                 LDV,R6   10
          1 0000A5  BB87                                 LAB,B3   ,AUTO
          1 0000A6  3C32                                 LDV,R3   50
          1 0000A7  0008                                 MMM

      208     9983    2         KH@DWNLODCCP.CCPLCT$ = ADDR(KAC$MLCP);

   9983   1 0000A8  EB80 0000 0000  xsym                 LAB,B6   KAC$MLCP
          1 0000AB  EFC7 001B                            STB,B6   KH@DWNLODCCP+2,AUTO

      209     9984    2         KH@DWNLODCCP.CHN$ = BCHN$;
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:28   

   9984   1 0000AD  DCC7 0006                            LDB,B5   BCHN$,AUTO
          1 0000AF  DFC7 0019                            STB,B5   KH@DWNLODCCP,AUTO

      210     9985    2         KH@DWNLODCCP.CCPLODBIS = 0;

   9985   1 0000B1  8747 001D                            CL       KH@DWNLODCCP+4,AUTO

      211     9986    3         CALL KHI$DWNLODCCP(KH@DWNLODCCP) WHENALTRETURN DO; RETURN; END;

   9986   1 0000B3  CBC7 0019                            LAB,B4   KH@DWNLODCCP,AUTO
          1 0000B5  CFC7 002E                            STB,B4   Y@TMP2+1,AUTO
          1 0000B7  BBC7 002E                            LAB,B3   Y@TMP2+1,AUTO
          1 0000B9  CBF0 0100                            LAB,B4   256,IMO
          1 0000BB  E380 0000 0000  xent                 LNJ,B6   KHI$DWNLODCCP
          1 0000BE       0003                            DC       s:9986+14,PREL
          1 0000BF  0F81 0004                            B        s:9986+17,PREL

   9986   1 0000C1  C380 0000 0000  xent                 LNJ,B4   X6A_ARET
          1 0000C4  0F81 0149                            B        s:10100,PREL

      212     9987
      213     9988
      214     9989    2      CASE %KHA_FNC_KILL, %KHA_FNC_DISCONNECT_RQS;

      215     9990
      216     9991        /* KILL THE LINE.                                                             */
      217     9992
      218     9993    2         CALL Y$DWNLOD;

   9993   1 0000C6  E3C0 0157                            LNJ,B6   s:0,PREL
          1 0000C8       0001                            DC       s:9994,PREL

      219     9994    2         BCTX$ = KH$CHN.CTX$;

   9994   1 0000C9  ECC7 0006                            LDB,B6   BCHN$,AUTO
          1 0000CB  DCC6 000C                            LDB,B5   12,B6
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:29   
          1 0000CD  DFC7 0008                            STB,B5   BCTX$,AUTO

      220     9995    3         IF (BCTX$ ~= ADDR(NIL)) THEN DO;

   9995   1 0000CF  8DC7 0008                            CMN      BCTX$,AUTO
          1 0000D1  0901 013C                            BE       s:10100,PREL

      221     9996
      222     9997        /* THERE IS AN ASYNC CONTEXT BLOCK ASSOCIATED WITH THIS CHANNEL.              */
      223     9998        /* REPORT A FROG-REQUESTED DISCONNECT.                                        */
      224     9999
      225    10000    4            IF CODE=%KHA_FNC_KILL THEN DO;

  10000   1 0000D3  E847 000A                            LDR,R6   CODE,AUTO
          1 0000D5  6D03                                 CMV,R6   3
          1 0000D6  0981 0011                            BNE      s:10023,PREL

      226    10001    4               KA$CTX.VDI$->KV$VDI.PHSDSC = '1'B; /* Can't talk anymore          */

  10001   1 0000D8  CC85                                 LDB,B4   ,B5
          1 0000D9  8944 0019                            LBT,'0040'X       25,B4
          1 0000DB       0040

      227    10002    4               IF KH$CHN.OTPCCBCNT=0 THEN EXIT;

  10002   1 0000DC  82C6 0007                            LB,'000F'X        7,B6
  10002   1 0000DE       000F
          1 0000DF  0581 0008                            BBF      s:10023,PREL

      228    10003
      229    10004        /* Fix up the output buffer chain, since we just nailed the MLCP. */
      230    10005
      231    10006    4               KH$CHN.OTPCCBCNT = 0;

  10006   1 0000E1  8846 0007                            LBF,'000F'X       7,B6
  10006   1 0000E3       000F

PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:30   
      232    10007    4               KA$CTX.OTPBFRNXTLOD$ = KA$CTX.OTPBFRHED$;

  10007   1 0000E4  CCC5 0002                            LDB,B4   2,B5
          1 0000E6  CFC5 0004                            STB,B4   4,B5

      233    10008    4            END;

      234    10009                 %KV$USRENT (VDI$=KA$CTX.VDI$, DFR$=Y@DFR,
      235    10010                 STT=KV_STT, SCHRSN=%KV_SCHRSN_DFR3);
             10023    3           KV_STT.USRENTCNT = KV_STT.USRENTCNT + 1;

  10023   1 0000E8  8A80 0000 0039  xsym                 INC      KV_STT+57
          1 0000EB  8E80 0000 0038  xsym                 CAD      KV_STT+56

             10024    4           IF NOT KA$CTX.VDI$->KV$VDI.BSY THEN DO;

  10024   1 0000EE  CC85                                 LDB,B4   ,B5
          1 0000EF  82C4 0019                            LB,'0080'X        25,B4
          1 0000F1       0080
          1 0000F2  0501 0011                            BBT      s:10030,PREL

             10025    4              KA$CTX.VDI$->KV$VDI.BSY = '1'B;

  10025   1 0000F4  8944 0019                            LBT,'0080'X       25,B4
  10025   1 0000F6       0080

             10026    4              KV@USRENT.SVDPTR$ = KV$PTR$;

  10026   1 0000F7  CC80 0000 0000  xsym                 LDB,B4   KV$PTR$
          1 0000FA  CFC7 000E                            STB,B4   KV@USRENT,AUTO

             10027    4              KV$PTR$ = KA$CTX.VDI$->KV$VDI.ASNINPPTR$;

  10027   1 0000FC  BC85                                 LDB,B3   ,B5
          1 0000FD  ACC3 0006                            LDB,B2   6,B3
          1 0000FF  AF80 0000 0000  xsym                 STB,B2   KV$PTR$

PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:31   
             10028    4              END;                         /* ELSE IF ~BSY                       */

  10028   1 000102  0F81 000C                            B        s:10036,PREL

             10029    4           ELSE DO;

             10030    4              KA$CTX.VDI$->KV$VDI.DFR.USR(3) = '1'B;

  10030   1 000104  8944 0018                            LBT,'1000'X       24,B4
  10030   1 000106       1000

             10031    4           KV_STT.USRENTDFRCNT = KV_STT.USRENTDFRCNT + 1;

  10031   1 000107  8A80 0000 003B  xsym                 INC      KV_STT+59
          1 00010A  8E80 0000 003A  xsym                 CAD      KV_STT+58

             10032    4              GOTO Y@DFR;

  10032   1 00010D  0F81 004A                            B        s:10052,PREL

             10033    4              END;                         /* END IF                             */
      236    10036    3            IF KA$CTX.OTPBFRBYTCNT~=0 AND CODE=%KHA_FNC_KILL

  10036   1 00010F  D845 000B                            LDR,R5   11,B5
          1 000111  5901 000F                            BEZ,R5   s:10038,PREL
          1 000113  0981 000D                            BNE      s:10038,PREL

      237    10037    3            THEN CALL KAO$DLTOTP (KV@VDH_DSC);

  10037   1 000115  BBC7 0013                            LAB,B3   KV@VDH_DSC,AUTO
          1 000117  BFC7 002E                            STB,B3   Y@TMP2+1,AUTO
          1 000119  BBC7 002E                            LAB,B3   Y@TMP2+1,AUTO
          1 00011B  CBF0 0100                            LAB,B4   256,IMO
          1 00011D  E380 0000 0000  xent                 LNJ,B6   KAO$DLTOTP
          1 000120       0001                            DC       s:10038,PREL

      238    10038    3            %KV_VDI.INTPHSDSC = '1'B;
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:32   

  10038   1 000121  EC80 0000 0000  xsym                 LDB,B6   KV$PTR$
          1 000124  DC86                                 LDB,B5   ,B6
          1 000125  8945 001D                            LBT,'0800'X       29,B5
          1 000127       0800

      239    10039    3            KV@VDH_DSC = KV_VDH_DSC;

  10039   1 000128  8C80 0000 0000  00                   LDI      KV_VDH_DSC
          1 00012B  8D47 0013                            SDI      KV@VDH_DSC,AUTO

      240    10040    3            KV@VDH_DSC.RSN = %KV_DSCRSN_FRG;

  10040   1 00012D  5C03                                 LDV,R5   3
          1 00012E  DAC7 0013                            SRM,R5,'00FF'X    KV@VDH_DSC,AUTO
          1 000130       00FF

      241    10041    3            CALL KVV$VDI(KV@VDH_DSC) ;

  10041   1 000131  DBC7 0013                            LAB,B5   KV@VDH_DSC,AUTO
          1 000133  DFC7 002E                            STB,B5   Y@TMP2+1,AUTO
          1 000135  BBC7 002E                            LAB,B3   Y@TMP2+1,AUTO
          1 000137  CBF0 0100                            LAB,B4   256,IMO
          1 000139  E380 0000 0000  xent                 LNJ,B6   KVV$VDI
          1 00013C       0001                            DC       s:10042,PREL

      242    10042    3            IF %KV_VDI.VDHEVTENB(%KV_VDH_EVT_ID_RLSVDI)

  10042   1 00013D  EC80 0000 0000  xsym                 LDB,B6   KV$PTR$
          1 000140  DC86                                 LDB,B5   ,B6
          1 000141  82C5 001F                            LB,'0002'X        31,B5
          1 000143       0002
          1 000144  0581 0007                            BBF      s:10050,PREL

      243    10043    3            THEN CALL KAO$OTPINT;

  10043   1 000146  CBF0 0000                            LAB,B4   0,IMO
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:33   
          1 000148  E380 0000 0000  xent                 LNJ,B6   KAO$OTPINT
          1 00014B       0001                            DC       s:10050,PREL

      244    10044                 %KV$USREXT;
             10050    3           KV$PTR.VDI$->KV$VDI.BSY = '0'B;

  10050   1 00014C  EC80 0000 0000  xsym                 LDB,B6   KV$PTR$
          1 00014F  DC86                                 LDB,B5   ,B6
          1 000150  8845 0019                            LBF,'0080'X       25,B5
          1 000152       0080

             10052    3           KV$PTR$ = KV@USRENT.SVDPTR$;

  10052   1 000153  DCC7 000E                            LDB,B5   KV@USRENT,AUTO
          1 000155  DF80 0000 0000  xsym                 STB,B5   KV$PTR$

  10052   1                              Y@DFR           null
      245    10054    3   Y@DFR:   ;
      246    10055    4            IF CODE=%KHA_FNC_KILL THEN DO;

  10055   1 000158  E847 000A            Y@DFR           LDR,R6   CODE,AUTO
          1 00015A  6D03                                 CMV,R6   3
          1 00015B  0981 00B2                            BNE      s:10100,PREL

      247    10056        /*
      248    10057        Make kill work all the time.
      249    10058        */
      250    10059    4               IF KA$CTX.VDI$->KV$VDI.BSY AND KV$PTR$~=ADDR(NIL)

  10059   1 00015D  ECC7 0008                            LDB,B6   BCTX$,AUTO
          1 00015F  DC86                                 LDB,B5   ,B6
          1 000160  82C5 0019                            LB,'0080'X        25,B5
          1 000162       0080
          1 000163  0581 000C                            BBF      s:10061,PREL
          1 000165  8D80 0000 0000  xsym                 CMN      KV$PTR$
          1 000168  0901 0007                            BE       s:10061,PREL

PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:34   
      251    10060    4               THEN IF KA$CTX.VDI$=KV$PTR.VDI$ THEN EXIT; /* except one case     */

  10060   1 00016A  CC80 0000 0000  xsym                 LDB,B4   KV$PTR$
          1 00016D  DD84                                 CMB,B5   ,B4
          1 00016E  0901 001D                            BE       s:10066,PREL

      252    10061    4               KA$CTX.VDI$->KV$VDI.USRCTX$ = ADDR(NIL); /* Unhook from VDH       */

  10061   1 000170  CB80 0000 0000                       LAB,B4   0
          1 000173  CFC5 0002                            STB,B4   2,B5

      253    10062    4               I = KA$CTX.VDI$->KV$VDI.LINSPD;

  10062   1 000175  DC86                                 LDB,B5   ,B6
          1 000176  D2C5 001E                            LLH,R5   30,B5
          1 000178  DF47 000D                            STR,R5   I,AUTO

      254    10063    4               KA_STT.LINSPDDST(I) = KA_STT.LINSPDDST(I)-1;

  10063   1 00017A  B855                                 LDR,R3   R5
          1 00017B  8CB0 0000 0024  xsym                 LDI      KA_STT+36,R3
          1 00017E  8470 FFFF FFFF                       AID      -1,IMO
          1 000181  8D30 0000 0024  xsym                 SDI      KA_STT+36,R3

      255    10064    4               CALL KAS$DSCNO_VDI(KH$CHN); /* And from the channel.              */

  10064   1 000184  BBC7 0006                            LAB,B3   BCHN$,AUTO
          1 000186  CBF0 0100                            LAB,B4   256,IMO
          1 000188  E380 0000 0000  xent                 LNJ,B6   KAS$DSCNO_VDI
          1 00018B       0001                            DC       s:10066,PREL

      256    10065    4            END;

      257    10066    3         END /* IF */;

  10066   1 00018C  0F81 0081                            B        s:10100,PREL

PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:35   
      258    10067    2      CASE %KHA_FNC_REQSTATS;

      259    10068         /*
      260    10069         Request for sending statistics buffers to the host.
      261    10070         */
      262    10071    2         IF ADMIN_FPT.CTX$->KL_REQSTATS.SLCENT(%KH#ENTID_ASYNC)

  10071   1 00018E  ECC7 0004                            LDB,B6   @ADMIN_FPT,AUTO
          1 000190  DCC6 0009                            LDB,B5   9,B6
          1 000192  82C5 0012                            LB,'4000'X        18,B5
          1 000194       4000
          1 000195  0501 0006                            BBT      s:10076,PREL
          1 000197  82C5 0012                            LB,'0020'X        18,B5
          1 000199       0020
          1 00019A  0581 0073                            BBF      s:10100,PREL

      263    10072    3           OR ADMIN_FPT.CTX$->KL_REQSTATS.SLCENT(%KH#ENTID_VDH) THEN DO;

      264    10073         /*
      265    10074         The async handler and VDH are selected to send statistics.
      266    10075         */
      267    10076    4            IF ADMIN_FPT.CTX$->KL_REQSTATS.DSPENT(%KH#ENTID_ASYNC) THEN DO;

  10076   1 00019C  82C5 0010                            LB,'4000'X        16,B5
  10076   1 00019E       4000
          1 00019F  0581 003B                            BBF      s:10090,PREL

      268    10077         /*
      269    10078         We're to send the async statistics buffer (KA$STT).
      270    10079
      271    10080         Move in the buffer pool statistics data.
      272    10081         */
      273    10082    4               KA_STT.BPSTT = KV_B_POOL$->KV$BPCSTT;

  10082   1 0001A1  AC80 0000 0000  xsym                 LDB,B2   KV_B_POOL$
          1 0001A4  2C00                                 LDV,R2   0
          1 0001A5  E870 00A4                            LDR,R6   164,IMO
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:36   
          1 0001A7  BB80 0000 004C  xsym                 LAB,B3   KA_STT+76
          1 0001AA  3C00                                 LDV,R3   0
          1 0001AB  0008                                 MMM

      274    10083    4               KA_STT.BPSTT.MINSIZ = KV_B_POOL$->KV$BPC.MINSIZ;

  10083   1 0001AC  DC80 0000 0000  xsym                 LDB,B5   KV_B_POOL$
          1 0001AF  F845 006A                            LDR,R7   106,B5
          1 0001B1  6C00                                 LDV,R6   0
          1 0001B2  8D00 0000 009C  xsym                 SDI      KA_STT+156

      275    10084    5               DO I=SIZEW(KV$BPC.COUNT)*2-1 DOWNTO 0;

  10084   1 0001B5  5C19                                 LDV,R5   25
          1 0001B6  DF47 000D                            STR,R5   I,AUTO
          1 0001B8  0F81 000C                            B        s:10087+2,PREL

      276    10085    5                  KA_STT.BPSTT.COUNT(I) =

  10085   1 0001BA  B847 000D                            LDR,R3   I,AUTO
          1 0001BC  F830 0000 0068  xsym                 LDR,R7   KA_STT+104,R3
          1 0001BF  6C00                                 LDV,R6   0
          1 0001C0  8D30 0000 0068  xsym                 SDI      KA_STT+104,R3

      277    10086    5                    ADDR(KA_STT.BPSTT)->KV$BPC.COUNT(I);
      278    10087    5               END;

  10087   1 0001C3  88C7 000D                            DEC      I,AUTO
          1 0001C5  E847 000D                            LDR,R6   I,AUTO
          1 0001C7  68F3                                 BGEZ,R6  s:10085,SPREL

      279    10088    4               CALL KHA$SNDSTT(ADMIN_FPT.CTX$->KL_REQSTATS, VECTOR(KA_STT));

  10088   1 0001C8  ECC7 0004                            LDB,B6   @ADMIN_FPT,AUTO
          1 0001CA  DCC6 0009                            LDB,B5   9,B6
          1 0001CC  CB80 0000 0000  02                   LAB,B4   0
          1 0001CF  CFC7 0030                            STB,B4   Y@TMP2+3,AUTO
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:37   
          1 0001D1  DFC7 002E                            STB,B5   Y@TMP2+1,AUTO
          1 0001D3  BBC7 002E                            LAB,B3   Y@TMP2+1,AUTO
          1 0001D5  CBF0 0200                            LAB,B4   512,IMO
          1 0001D7  E380 0000 0000  xent                 LNJ,B6   KHA$SNDSTT
          1 0001DA       0001                            DC       s:10090,PREL

      280    10089    4            END;  /* END IF ADMIN_FPT.CTX$->KL_REQSTATS.DSPENT(%KH#ENTID_ASYNC)  */

      281    10090    4            IF ADMIN_FPT.CTX$->KL_REQSTATS.DSPENT(%KH#ENTID_VDH) THEN DO;

  10090   1 0001DB  ECC7 0004                            LDB,B6   @ADMIN_FPT,AUTO
          1 0001DD  DCC6 0009                            LDB,B5   9,B6
          1 0001DF  82C5 0010                            LB,'0020'X        16,B5
          1 0001E1       0020
          1 0001E2  0581 002B                            BBF      s:10100,PREL

      282    10091         /*
      283    10092         We're to send the VDH statistics buffer.
      284    10093         */
      285    10094    4               CALL KHC$XEQ2(Y@CRTEXCTIM);

  10094   1 0001E4  CBC7 0011                            LAB,B4   Y@CRTEXCTIM,AUTO
          1 0001E6  CFC7 002E                            STB,B4   Y@TMP2+1,AUTO
          1 0001E8  BBC7 002E                            LAB,B3   Y@TMP2+1,AUTO
          1 0001EA  CBF0 0100                            LAB,B4   256,IMO
          1 0001EC  E380 0000 0000  xent                 LNJ,B6   KHC$XEQ2
          1 0001EF       0001                            DC       s:10095,PREL

      286    10095    4               %KV_STT.SCHEXCTIM = Y@CRTEXCTIM - KA_STT.KHSTT.INPINTISATIM - KA_STT.
             10095                        KHSTT.OTPINTISATIM;

  10095   1 0001F0  8CC7 0011                            LDI      Y@CRTEXCTIM,AUTO
          1 0001F2  8480 0000 0018  xsym                 SID      KA_STT+24
          1 0001F5  8480 0000 001A  xsym                 SID      KA_STT+26
          1 0001F8  8D00 0000 003C  xsym                 SDI      KV_STT+60

      287    10096    4               CALL KHA$SNDSTT(ADMIN_FPT.CTX$->KL_REQSTATS, VECTOR(KV_STT));
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:38   

  10096   1 0001FB  ECC7 0004                            LDB,B6   @ADMIN_FPT,AUTO
          1 0001FD  DCC6 0009                            LDB,B5   9,B6
          1 0001FF  CB80 0000 0003  02                   LAB,B4   +3
          1 000202  CFC7 0030                            STB,B4   Y@TMP2+3,AUTO
          1 000204  DFC7 002E                            STB,B5   Y@TMP2+1,AUTO
          1 000206  BBC7 002E                            LAB,B3   Y@TMP2+1,AUTO
          1 000208  CBF0 0200                            LAB,B4   512,IMO
          1 00020A  E380 0000 0000  xent                 LNJ,B6   KHA$SNDSTT
          1 00020D       0001                            DC       s:10100,PREL

      288    10097    4            END;                           /* END IF .DSPENT(%KH#ENTID_VDH)      */

      289    10098    3         END;               /* END IF .SLCENT(%KH#ENTID_ASYNC)&(%KH#ENTID_VDH)   */

      290    10099    2      END /* CASE */;

      291    10100    2      IF (LVL > KA_INT_LEV) THEN DO;

  10100   1 00020E  E847 0010                            LDR,R6   LVL,AUTO
          1 000210  E900 0000 0000  xsym                 CMR,R6   KA_INT_LEV
          1 000213  0381 0007                            BLE      s:10108,PREL

      292    10101
      293    10102        /* WE WERE CALLED FROM BELOW THE ASYNC INHIBIT LEVEL, SO WE                   */
      294    10103        /* SHOULD DO AN ENABLE TO GO BACK TO THE LEVEL WE WERE                        */
      295    10104        /* CALLED AT.                                                                 */
      296    10105
      297    10106    2         CALL KHI$ENABLE;

  10106   1 000215  CBF0 0000                            LAB,B4   0,IMO
          1 000217  E380 0000 0000  xent                 LNJ,B6   KHI$ENABLE
          1 00021A       0001                            DC       s:10108,PREL

      298    10107    2      END /* IF */;

      299    10108    1      RETURN;
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:39   

  10108   1 00021B  C380 0000 0000  xent                 LNJ,B4   X6A_ARET

      300    10109        %EJECT;
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:40   
      301    10110
      302    10111        /* DOWNLOAD THE CONFIGURATION INFORMATION OR THE LCTS TO                      */
      303    10112        /* THE MLCP.                                                                  */
      304    10113
      305    10114    1   Y$DWNLOD: PROC;

  10114   1 00021E  EFC7 0026            Y$DWNLOD        STB,B6   KH@DWNLODLCT+8,AUTO

      306    10115
      307    10116    2   DCL Y_STT2ENB BIT(32) CONSTANT INIT('4580C000'X);
      308    10117    2   DCL Y_STT_2_ENB(0:31) REDEF Y_STT2ENB BIT(1) UNAL;
      309    10118
      310    10119    2      Y@LCT_INTCNF_BYT = 0;

  10119   1 000220  87C7 000B                            CLH      Y@LCT_INTCNF_BYT,AUTO

      311    10120    2      Y@LCT_INTCNF.LINSPD = KH$CHN.LINSPD;

  10120   1 000222  DCC7 0006                            LDB,B5   BCHN$,AUTO
          1 000224  E845 0008                            LDR,R6   8,B5
          1 000226  6008                                 SOL,R6   8
          1 000227  EAC7 000B                            SRM,R6,'0F00'X    Y@LCT_INTCNF_BYT,AUTO
          1 000229       0F00

      312    10121    2      Y@LCT_INTCNF.BRKRQ = KH$CHN.BRKRQ;

  10121   1 00022A  E845 0001                            LDR,R6   1,B5
          1 00022C  6008                                 SOL,R6   8
          1 00022D  EAC7 000B                            SRM,R6,'8000'X    Y@LCT_INTCNF_BYT,AUTO
          1 00022F       8000

      313    10122    2      Y@LCT_INTCNF.AUTBAD = KH$CHN.AUTBAD;

  10122   1 000230  E845 0008                            LDR,R6   8,B5
          1 000232  600A                                 SOL,R6   10
          1 000233  EAC7 000B                            SRM,R6,'4000'X    Y@LCT_INTCNF_BYT,AUTO
          1 000235       4000
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:41   

      314    10123    2      Y@LCT_INTCNF.DC1DC3FLWCTR = KH$CHN.DC1DC3NTWOTPFLWCTR;

  10123   1 000236  E845 0009                            LDR,R6   9,B5
          1 000238  6042                                 SOR,R6   2
          1 000239  EAC7 000B                            SRM,R6,'1000'X    Y@LCT_INTCNF_BYT,AUTO
          1 00023B       1000

      315    10124    2      IF Y_STT_2_ENB(KH$CHN.STT) AND (CODE~=%KHA_FNC_CNFG OR KH$CHN.ENB)

  10124   1 00023C  B2C5 0001                            LLH,R3   1,B5
          1 00023E  82B0 0000 0012  00                   LB       Y_STT2ENB,R3
          1 000241  0581 000E                            BBF      s:10126,PREL
          1 000243  E847 000A                            LDR,R6   CODE,AUTO
          1 000245  6D11                                 CMV,R6   17
          1 000246  0981 0006                            BNE      s:10125,PREL
          1 000248  82C5 0007                            LB,'0040'X        7,B5
          1 00024A       0040
          1 00024B  0581 0004                            BBF      s:10126,PREL

      316    10125    2      THEN Y@LCT_INTCNF.ENB = '1'B;

  10125   1 00024D  8947 000B                            LBT,'2000'X       Y@LCT_INTCNF_BYT,AUTO
  10125   1 00024F       2000

      317    10126    2      KH@IO_OTPLCTBYT = KH_IO_OTPLCTBYT;

  10126   1 000250  8C80 0000 0002  00                   LDI      KH_IO_OTPLCTBYT
          1 000253  8D47 0015                            SDI      KH@IO_OTPLCTBYT,AUTO

      318    10127    2      KH@IO_OTPLCTBYT.LCTBYT.DAT = Y@LCT_INTCNF_BYT;

  10127   1 000255  D2C7 000B                            LLH,R5   Y@LCT_INTCNF_BYT,AUTO
          1 000257  D7C7 0016                            STH,R5   KH@IO_OTPLCTBYT+1,AUTO

      319    10128    2      KH@IO_OTPLCTBYT.LCTBYT.ADR = %KA_LCT_INTCNF;

PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:42   
  10128   1 000259  4C38                                 LDV,R4   56
          1 00025A  CAC7 0016                            SRM,R4,'00FF'X    KH@IO_OTPLCTBYT+1,AUTO
          1 00025C       00FF

      320    10129    2      IF NOT KH$CHN.DWNLOD

  10129   1 00025D  82C5 0007                            LB,'1000'X        7,B5
  10129   1 00025F       1000
          1 000260  0581 000A                            BBF      s:10149,PREL
          1 000262  B847 000A                            LDR,R3   CODE,AUTO
          1 000264  3D03                                 CMV,R3   3
          1 000265  0901 0005                            BE       s:10149,PREL
          1 000267  8DC5 000C                            CMN      12,B5
          1 000269  0981 007B                            BNE      s:10181,PREL

      321    10130
      322    10131        /* We're to down-load the LCTs if not already down-loaded, and                */
      323    10132        /* they're not.                                                               */
      324    10133
      325    10134    2        OR CODE=%KHA_FNC_KILL
      326    10135
      327    10136        /* This is a KILL request, just blow anything away. */
      328    10137
      329    10138    3        OR KH$CHN.CTX$=ADDR(NIL) THEN DO;

      330    10139
      331    10140        /* The LCTs are already down-loaded, and there is no user                     */
      332    10141        /* associated with this line (at least none that has gotten                   */
      333    10142        /* far enough to get L6 context allocated).                                   */
      334    10143        /* Down-load the LCTs again, and re-initialize the line to                    */
      335    10144        /* force the input CCP to notice the configuration info change.               */
      336    10145
      337    10146
      338    10147        /* INITIALIZE THE CHANNEL PAIR, AND DOWNLOAD THE LCT'S.                       */
      339    10148
      340    10149    3         KH@DWNLODLCT = Y_DWNLODLCT;

PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:43   
  10149   1 00026B  AB80 0000 0000  00                   LAB,B2   KV_VDH_DSC
          1 00026E  2C16                                 LDV,R2   22
          1 00026F  6C0E                                 LDV,R6   14
          1 000270  BB87                                 LAB,B3   ,AUTO
          1 000271  3C3C                                 LDV,R3   60
          1 000272  0008                                 MMM

      341    10150    3         KH@DWNLODLCT.CCPLCT$ = ADDR(KAC$MLCP);

  10150   1 000273  EB80 0000 0000  xsym                 LAB,B6   KAC$MLCP
          1 000276  EFC7 0020                            STB,B6   KH@DWNLODLCT+2,AUTO

      342    10151    3         KH@DWNLODLCT.CHN$ = BCHN$;

  10151   1 000278  DCC7 0006                            LDB,B5   BCHN$,AUTO
          1 00027A  DFC7 001E                            STB,B5   KH@DWNLODLCT,AUTO

      343    10152    3         KH@DWNLODLCT.RCVINTLVL = KA_INT_LEV + 1;

  10152   1 00027C  E800 0000 0000  xsym                 LDR,R6   KA_INT_LEV
          1 00027F  6E01                                 ADV,R6   1
          1 000280  EF47 0023                            STR,R6   KH@DWNLODLCT+5,AUTO

      344    10153    3         KH@DWNLODLCT.TRNINTLVL = KA_INT_LEV + 2;

  10153   1 000282  D800 0000 0000  xsym                 LDR,R5   KA_INT_LEV
          1 000285  5E02                                 ADV,R5   2
          1 000286  DF47 0024                            STR,R5   KH@DWNLODLCT+6,AUTO

      345    10154    3         CALL KHI$DWNLODLCT(KH@DWNLODLCT)

  10154   1 000288  CBC7 001E                            LAB,B4   KH@DWNLODLCT,AUTO
          1 00028A  CFC7 002E                            STB,B4   Y@TMP2+1,AUTO
          1 00028C  BBC7 002E                            LAB,B3   Y@TMP2+1,AUTO
          1 00028E  CBF0 0100                            LAB,B4   256,IMO
          1 000290  E380 0000 0000  xent                 LNJ,B6   KHI$DWNLODLCT
          1 000293       0050                            DC       s:10176,PREL
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:44   

      346    10155    4         WHENRETURN DO;

      347    10156
      348    10157        /* now we stuff the INTCNF into the LCT */
      349    10158
      350    10159    4            CALL KHI$IO_OTPLCTBYT(KH$CHN,KH@IO_OTPLCTBYT);

  10159   1 000294  EBC7 0015                            LAB,B6   KH@IO_OTPLCTBYT,AUTO
          1 000296  EFC7 0030                            STB,B6   Y@TMP2+3,AUTO
          1 000298  DCC7 0006                            LDB,B5   BCHN$,AUTO
          1 00029A  DFC7 002E                            STB,B5   Y@TMP2+1,AUTO
          1 00029C  BBC7 002E                            LAB,B3   Y@TMP2+1,AUTO
          1 00029E  CBF0 0200                            LAB,B4   512,IMO
          1 0002A0  E380 0000 0000  xent                 LNJ,B6   KHI$IO_OTPLCTBYT
          1 0002A3       0001                            DC       s:10163,PREL

      351    10160
      352    10161        /* now we stuff the MSCSTT (.MLC16 - MLC-16 vs MLCP) into the LCT */
      353    10162
      354    10163    4            Y@LCT_MSCSTT_BYT=0;

  10163   1 0002A4  87C7 000C                            CLH      Y@LCT_MSCSTT_BYT,AUTO

      355    10164    4            Y@LCT_MSCSTT.MLC16 = (KH$CHN.DVCID = '2978'X);

  10164   1 0002A6  D870 8000                            LDR,R5   -32768,IMO
          1 0002A8  ECC7 0006                            LDB,B6   BCHN$,AUTO
          1 0002AA  E846 0002                            LDR,R6   2,B6
          1 0002AC  E970 2978                            CMR,R6   10616,IMO
          1 0002AE  0901 0002                            BE       s:10164+11,PREL
          1 0002B0  5C00                                 LDV,R5   0
          1 0002B1  5045                                 SOR,R5   5
          1 0002B2  DAC7 000C                            SRM,R5,'0400'X    Y@LCT_MSCSTT_BYT,AUTO
          1 0002B4       0400

      356    10165    4            KH@IO_OTPLCTBYT.LCTBYT.DAT = Y@LCT_MSCSTT_BYT;
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:45   

  10165   1 0002B5  D2C7 000C                            LLH,R5   Y@LCT_MSCSTT_BYT,AUTO
          1 0002B7  D7C7 0016                            STH,R5   KH@IO_OTPLCTBYT+1,AUTO

      357    10166    4            KH@IO_OTPLCTBYT.LCTBYT.ADR = %KA_LCT_MSCSTT;

  10166   1 0002B9  6C3E                                 LDV,R6   62
          1 0002BA  EAC7 0016                            SRM,R6,'00FF'X    KH@IO_OTPLCTBYT+1,AUTO
          1 0002BC       00FF

      358    10167    4            CALL KHI$IO_OTPLCTBYT(KH$CHN,KH@IO_OTPLCTBYT);

  10167   1 0002BD  DBC7 0015                            LAB,B5   KH@IO_OTPLCTBYT,AUTO
          1 0002BF  DFC7 0030                            STB,B5   Y@TMP2+3,AUTO
          1 0002C1  EFC7 002E                            STB,B6   Y@TMP2+1,AUTO
          1 0002C3  BBC7 002E                            LAB,B3   Y@TMP2+1,AUTO
          1 0002C5  CBF0 0200                            LAB,B4   512,IMO
          1 0002C7  E380 0000 0000  xent                 LNJ,B6   KHI$IO_OTPLCTBYT
          1 0002CA       0001                            DC       s:10172,PREL

      359    10168
      360    10169        /* THIS LINE ISN'T FLAGGED AS BEING DEAD, SO ISSUE A START IO                 */
      361    10170        /* TO THE INPUT CHANNEL.                                                      */
      362    10171
      363    10172    4            KH@IO_OTPCHNCTR = KH_IO_OTPCHNCTR;

  10172   1 0002CB  8C80 0000 0004  00                   LDI      KH_IO_OTPCHNCTR
          1 0002CE  8D47 0017                            SDI      KH@IO_OTPCHNCTR,AUTO

      364    10173    4            KH@IO_OTPCHNCTR.CHNCTR.STRIO = '1'B;

  10173   1 0002D0  8947 0018                            LBT,'4000'X       KH@IO_OTPCHNCTR+1,AUTO
  10173   1 0002D2       4000

      365    10174    4            CALL KHI$IO_OTP(KH$CHN,KH@IO_OTPCHNCTR);

  10174   1 0002D3  EBC7 0017                            LAB,B6   KH@IO_OTPCHNCTR,AUTO
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:46   
          1 0002D5  EFC7 0030                            STB,B6   Y@TMP2+3,AUTO
          1 0002D7  DCC7 0006                            LDB,B5   BCHN$,AUTO
          1 0002D9  DFC7 002E                            STB,B5   Y@TMP2+1,AUTO
          1 0002DB  BBC7 002E                            LAB,B3   Y@TMP2+1,AUTO
          1 0002DD  CBF0 0200                            LAB,B4   512,IMO
          1 0002DF  E380 0000 0000  xent                 LNJ,B6   KHI$IO_OTP
          1 0002E2       0001                            DC       s:10176,PREL

      366    10175    4         END /* DO WHENRETURN */;

      367    10176    3      END; ELSE DO;

  10176   1 0002E3  0F81 000F                            B        s:10184,PREL

      368    10177
      369    10178        /* We aren't to initialize the line. Just update the                          */
      370    10179        /* LCT containing the initial configuration information.                      */
      371    10180
      372    10181    3         CALL KHI$IO_OTPLCTBYT(KH$CHN,KH@IO_OTPLCTBYT);

  10181   1 0002E5  CBC7 0015                            LAB,B4   KH@IO_OTPLCTBYT,AUTO
          1 0002E7  CFC7 0030                            STB,B4   Y@TMP2+3,AUTO
          1 0002E9  DFC7 002E                            STB,B5   Y@TMP2+1,AUTO
          1 0002EB  BBC7 002E                            LAB,B3   Y@TMP2+1,AUTO
          1 0002ED  CBF0 0200                            LAB,B4   512,IMO
          1 0002EF  E380 0000 0000  xent                 LNJ,B6   KHI$IO_OTPLCTBYT
          1 0002F2       0001                            DC       s:10184,PREL

      373    10182    3      END /* IF */;

      374    10183
      375    10184    2   END Y$DWNLOD;

  10184   1 0002F3  ECC7 0026                            LDB,B6   KH@DWNLODLCT+8,AUTO
          1 0002F5  C3C6 0001                            LNJ,B4   1,B6

      376    10185        %EJECT;
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:47   
      377    10186        /*
      378    10187        Return (as PARAM 2) the LOG2 of PARAM 1.
      379    10188        */
      380    10189    1   Y$LOG2: PROC (Y_PRM1, Y_PRM2);

  10189   1 0002F7  EFC7 0026            Y$LOG2          STB,B6   KH@DWNLODLCT+8,AUTO

      381    10190
      382    10191    2   DCL Y_PRM1 UBIN WORD PARAM;
      383    10192    2   DCL Y_PRM2 UBIN WORD PARAM;
      384    10193    2   DCL Y@TMP1 UBIN WORD AUTO;
      385    10194    2   DCL Y@TMP2 UBIN WORD AUTO;
      386    10195
      387    10196    2      Y@TMP1 = 32;

  10196   1 0002F9  6C20                                 LDV,R6   32
          1 0002FA  EF47 002C                            STR,R6   Y@TMP1,AUTO

      388    10197
      389    10198    3      DO Y@TMP2 = 5 TO 15;

  10198   1 0002FC  5C05                                 LDV,R5   5
          1 0002FD  DF47 002D                            STR,R5   Y@TMP2,AUTO

      390    10199    4         IF Y_PRM1 <= Y@TMP1 THEN DO;

  10199   1 0002FF  ECC7 0028                            LDB,B6   @Y_PRM1,AUTO
          1 000301  E806                                 LDR,R6   ,B6
          1 000302  E947 002C                            CMR,R6   Y@TMP1,AUTO
          1 000304  0301 000D                            BG       s:10204,PREL

      391    10200    4            Y_PRM1 = Y@TMP1;               /* Use the whole buffer, at least.*/

  10200   1 000306  E847 002C                            LDR,R6   Y@TMP1,AUTO
          1 000308  EF06                                 STR,R6   ,B6

      392    10201    4            Y_PRM2 = Y@TMP2;
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:48   

  10201   1 000309  DCC7 002A                            LDB,B5   @Y_PRM2,AUTO
          1 00030B  D847 002D                            LDR,R5   Y@TMP2,AUTO
          1 00030D  DF05                                 STR,R5   ,B5

      393    10202    4            RETURN;

  10202   1 00030E  ECC7 0026                            LDB,B6   KH@DWNLODLCT+8,AUTO
          1 000310  C3C6 0001                            LNJ,B4   1,B6

      394    10203    4         END;                              /* END IF Y_PRM1 <= Y@TMP1            */
      395    10204    3         Y@TMP1 = Y@TMP1 * 2;

  10204   1 000312  D847 002C                            LDR,R5   Y@TMP1,AUTO
          1 000314  5001                                 SOL,R5   1
          1 000315  DF47 002C                            STR,R5   Y@TMP1,AUTO

      396    10205    3      END; /* END DO FOR Y@TMP2 = 5 TO 15 */

  10205   1 000317  8AC7 002D                            INC      Y@TMP2,AUTO
          1 000319  C847 002D                            LDR,R4   Y@TMP2,AUTO
          1 00031B  4D0F                                 CMV,R4   15
          1 00031C  03E3                                 BLE      s:10199,SPREL

      397    10206    2   END Y$LOG2;

  10206   1 00031D  ECC7 0026                            LDB,B6   KH@DWNLODLCT+8,AUTO
          1 00031F  C3C6 0001                            LNJ,B4   1,B6
      398    10207    1   END KAA$ADM;

PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:49   
--  Include file information  --

   KH$IO.:E05TOU  is referenced.
   GH_IOFNC_E.:E05TOU  is referenced.
   KH_CHN.:E05TOU  is referenced.
   KH$CHN.:E05TOU  is referenced.
   KHA_FNC_E.:E05TOU  is referenced.
   KA_LCT_E.:E05TOU  is referenced.
   KW_ALCT_E.:E05TOU  is referenced.
   KA$GLB.:E05TOU  is referenced.
   KA_GLB.:E05TOU  is referenced.
   KH_TRC_M.:E05TOU  is referenced.
   KV_INT_M.:E05TOU  is referenced.
   KH$TRC.:E05TOU  is referenced.
   KH_TRC.:E05TOU  is referenced.
   KH$STT.:E05TOU  is referenced.
   KA_GLB_E.:E05TOU  is referenced.
   KV$BPC.:E05TOU  is referenced.
   KV_GLB_M.:E05TOU  is referenced.
   KV_ASCCHR_E.:E05TOU  is referenced.
   KL_CONTROL_C.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
   K_ID_E.:E05TOU  is referenced.
   KL_MACRO_C.:E05TOU  is referenced.
   KL_AFCN_C.:E05TOU  is referenced.
   KH_MACRO_C.:E05TOU  is referenced.
   KV_PRMID_E.:E05TOU  was found in the system file and is never referenced.
   KV_GLBCNS_E.:E05TOU  was found in the system file and is referenced.
   KV$VDO.:E05TOU  was found in the system file and is never referenced.
   KV$VDH.:E05TOU  was found in the system file and is referenced.
   KV$USR.:E05TOU  was found in the system file and is never referenced.
   KV$SND.:E05TOU  was found in the system file and is never referenced.
   KV$INT.:E05TOU  was found in the system file and is referenced.
   KV$GLBCTX.:E05TOU  was found in the system file and is referenced.
   KV$GLB.:E05TOU  was found in the system file and is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is referenced.
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:50   
   KI_CP6.:E05TOU  was found in the system file and is referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure KAA$ADM.
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:51   

 **** Variables and constants ****

  ****  Section 000 RoData KAA$ADM

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w STRC(32)    r     1 KH_IO_OTPCHNCTR            2-0-0/w STRC(32)    r     1 KH_IO_OTPLCTBYT
     0-0-0/w STRC(32)    r     1 KV_VDH_DSC                 6-0-0/w STRC(80)    r     1 Y_DWNLODCCP
     B-0-0/w STRC(112)   r     1 Y_DWNLODLCT               12-0-0/b BIT (32)    r     1 Y_STT2ENB
    12-0-0/b BIT         r     1 Y_STT_2_ENB(0:31)

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @ADMIN_FPT                28-0-0/w PTR         r     1 @Y_PRM1
    2A-0-0/w PTR         r     1 @Y_PRM2                   *0-0-0/w STRC(288)   r     1 ADMIN_FPT
     6-0-0/w PTR         r     1 BCHN$                      8-0-0/w PTR         r     1 BCTX$
     A-0-0/w UBIN(16)    r     1 CODE                       D-0-0/w SBIN(16)    r     1 I
    19-0-0/w STRC(80)    r     1 KH@DWNLODCCP              1E-0-0/w STRC(112)   r     1 KH@DWNLODLCT
    17-0-0/w STRC(32)    r     1 KH@IO_OTPCHNCTR           15-0-0/w STRC(32)    r     1 KH@IO_OTPLCTBYT
     E-0-0/w STRC(32)    r     1 KV@USRENT                 13-0-0/w STRC(32)    r     1 KV@VDH_DSC
    10-0-0/w UBIN(16)    r     1 LVL                       11-0-0/w UBIN(32)    r     1 Y@CRTEXCTIM
     B-0-0/b STRC(8)     r     1 Y@LCT_INTCNF               B-0-0/b UBIN(8)     r     1 Y@LCT_INTCNF_BYT
     C-0-0/b STRC(8)     r     1 Y@LCT_MSCSTT               C-0-0/b UBIN(8)     r     1 Y@LCT_MSCSTT_BYT
    2C-0-0/w UBIN(16)    r     1 Y@TMP1                    2D-0-0/w UBIN(16)    r     1 Y@TMP2
    *0-0-0/w UBIN(16)    r     1 Y_PRM1                    *0-0-0/w UBIN(16)    r     1 Y_PRM2

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN(16)    r     1 KAC$MLCP                   0-0-0/w UBIN(16)    r     1 KA_INT_LEV
     0-0-0/w UBIN(16)    r     1 KA_OTPBFRBYTSIZ_BIG
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:52   
     0-0-0/w UBIN(16)    r     1 KA_OTPBFRBYTSIZ_BIGLOG2
     0-0-0/w UBIN(16)    r     1 KA_OTPBFRBYTSIZ_SML
     0-0-0/w UBIN(16)    r     1 KA_OTPBFRBYTSIZ_SMLLOG2
     0-0-0/w STRC(2528)  r     1 KA_STT                     0-0-0/w STRC(64)    r     1 KH_CTLTBL
     0-0-0/w PTR         r     1 KV$PTR$                    0-0-0/w PTR         r     1 KV_B_POOL$
     0-0-0/w STRC(8960)  r     1 KV_STT

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(512)   r     1 KA$CTX                     0-0-0/w STRC(512)   r     1 KH$CHN
     0-0-0/w STRC(320)   r     1 KL_REQSTATS                0-0-0/w ASTR(1824)  r     1 KV$BPC
     0-0-0/w STRC(1312)  r     1 KV$BPCSTT                  0-0-0/w STRC(480)   r     1 KV$PTR
     0-0-0/w STRC(512)   r     1 KV$VDI                     0-0-0/w BIT (16)    r     1 MMRINTCHC


   Procedure KAA$ADM requires 801 words for executable code.
   Procedure KAA$ADM requires 50 words of local(AUTO) storage.

    No errors detected in file KAA$SRV.:E05TSI    .
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:53   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:54   
          MINI XREF LISTING

ADMIN_FPT
      4777**DCL         8--PROC     9957--IF
ADMIN_FPT.CHN$
      4904**DCL      9852>>ASSIGN
ADMIN_FPT.CONTROL#
      4963**DCL      9958>>IF
ADMIN_FPT.CTX$
      4833**DCL     10071>>IF      10071>>IF      10076>>IF      10088>>CALL    10090>>IF      10096>>CALL
ADMIN_FPT.FNC
      4778**DCL      9851>>ASSIGN
ADMIN_FPT.TERMID.TERM
      4801**DCL      4810--REDEF
BCHN$
      9487**DCL      8698--IMP-PTR  9852<<ASSIGN   9984>>ASSIGN   9994>>ASSIGN  10002>>IF      10006>>ASSIGN
     10064>>CALL    10120>>ASSIGN  10121>>ASSIGN  10122>>ASSIGN  10123>>ASSIGN  10124>>IF      10124>>IF
     10129>>IF      10129>>IF      10151>>ASSIGN  10159>>CALL    10164>>ASSIGN  10167>>CALL    10174>>CALL
     10181>>CALL
BCTX$
      9488**DCL      7599--IMP-PTR  9994<<ASSIGN   9995>>IF      10001>>ASSIGN  10007>>ASSIGN  10007>>ASSIGN
     10024>>IF      10025>>ASSIGN  10027>>ASSIGN  10030>>ASSIGN  10036>>IF      10059>>IF      10060>>IF
     10061>>ASSIGN  10062>>ASSIGN
CODE
      9489**DCL      9851<<ASSIGN   9854>>IF       9943<<ASSIGN   9947>>DOCASE  10000>>IF      10036>>IF
     10055>>IF      10124>>IF      10129>>IF
COMMON
      9944**LABEL    9941--GOTO
I
      9502**DCL     10062<<ASSIGN  10063>>ASSIGN  10063>>ASSIGN  10084<<DOINDEX 10085>>ASSIGN  10085>>ASSIGN
KA$CTX.HLTOTP
      7694**DCL      7696--REDEF
KA$CTX.HLTOTPNXTBFR
      7698**DCL      7699--REDEF
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:55   
KA$CTX.OTPBFRBYTCNT
      7609**DCL     10036>>IF
KA$CTX.OTPBFRHED$
      7606**DCL     10007>>ASSIGN
KA$CTX.OTPBFRNXTLOD$
      7606**DCL     10007<<ASSIGN
KA$CTX.VDI$
      7606**DCL     10001>>ASSIGN  10024>>IF      10025>>ASSIGN  10027>>ASSIGN  10030>>ASSIGN  10059>>IF
     10060>>IF      10061>>ASSIGN  10062>>ASSIGN
KAC$MLCP
      9464**DCL      9983--ASSIGN  10150--ASSIGN
KAO$DLTOTP
      9470**DCL-ENT 10037--CALL
KAO$OTPINT
      9471**DCL-ENT 10043--CALL
KAS$DSCNO_VDI
      9472**DCL-ENT 10064--CALL
KA_INT_LEV
      9465**DCL      9935>>ASSIGN  10100>>IF      10152>>ASSIGN  10153>>ASSIGN
KA_OTPBFRBYTSIZ_BIG
      7717**DCL      9953<>CALL
KA_OTPBFRBYTSIZ_BIGLOG2
      7717**DCL      9953<>CALL
KA_OTPBFRBYTSIZ_SML
      7717**DCL      9955<>CALL
KA_OTPBFRBYTSIZ_SMLLOG2
      7718**DCL      9955<>CALL
KA_STT
      8055**DCL     10088--CALL
KA_STT.BPSTT
      8382**DCL     10082<<ASSIGN  10085--ASSIGN
KA_STT.BPSTT.COUNT
      8392**DCL     10085<<ASSIGN
KA_STT.BPSTT.MINSIZ
      8392**DCL     10083<<ASSIGN
KA_STT.KHSTT.INPINTISATIM
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:56   
      8372**DCL     10095>>ASSIGN
KA_STT.KHSTT.OTPINTISATIM
      8372**DCL     10095>>ASSIGN
KA_STT.LINSPDDST
      8376**DCL     10063<<ASSIGN  10063>>ASSIGN
KA_STT.REQSTATS.DSPMSK
      8301**DCL      8307--REDEF
KA_STT.REQSTATS.SLCMSK
      8342**DCL      8349--REDEF
KH$CCPLCT.CCPRLCTBLWRDX
      9455**DCL      9455--REDEF
KH$CCPLCT.LCTBYT
      9456**DCL      9456--REDEF    9456--REDEF
KH$CCPLCT.LCTRLCTBL_BYT
      9458**DCL      9459--REDEF
KH$CHN
      8698**DCL     10064<>CALL    10159<>CALL    10167<>CALL    10174<>CALL    10181<>CALL
KH$CHN.AUTBAD
      8752**DCL     10122>>ASSIGN
KH$CHN.BRKRQ
      8719**DCL     10121>>ASSIGN
KH$CHN.CTX$
      8768**DCL      9994>>ASSIGN  10129>>IF
KH$CHN.DC1DC3NTWOTPFLWCTR
      8756**DCL     10123>>ASSIGN
KH$CHN.DVCID
      8724**DCL     10164>>ASSIGN
KH$CHN.DWNLOD
      8736**DCL     10129>>IF
KH$CHN.ENB
      8741**DCL     10124>>IF
KH$CHN.LINSPD
      8752**DCL     10120>>ASSIGN
KH$CHN.OTPCCBCNT
      8742**DCL     10002>>IF      10006<<ASSIGN
KH$CHN.STT
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:57   
      8714**DCL     10124>>IF
KH$CHN.TERMID.TERM
      8794**DCL      8803--REDEF
KH@DWNLODCCP
      9808**DCL      9982<<ASSIGN   9986<>CALL
KH@DWNLODCCP.CCPLCT$
      9814**DCL      9983<<ASSIGN
KH@DWNLODCCP.CCPLODBIS
      9814**DCL      9985<<ASSIGN
KH@DWNLODCCP.CHN$
      9814**DCL      9984<<ASSIGN
KH@DWNLODLCT
      9831**DCL     10149<<ASSIGN  10154<>CALL
KH@DWNLODLCT.CCPLCT$
      9837**DCL     10150<<ASSIGN
KH@DWNLODLCT.CHN$
      9837**DCL     10151<<ASSIGN
KH@DWNLODLCT.RCVINTLVL
      9838**DCL     10152<<ASSIGN
KH@DWNLODLCT.TRNINTLVL
      9838**DCL     10153<<ASSIGN
KH@IO_OTPCHNCTR
      9692**DCL     10172<<ASSIGN  10174<>CALL
KH@IO_OTPCHNCTR.ASNSTT
      9701**DCL      9702--REDEF    9708--REDEF    9713--REDEF    9717--REDEF    9721--REDEF    9725--REDEF
      9732--REDEF    9738--REDEF    9744--REDEF    9749--REDEF    9756--REDEF    9759--REDEF    9763--REDEF
      9770--REDEF    9774--REDEF    9778--REDEF    9782--REDEF    9787--REDEF    9791--REDEF
KH@IO_OTPCHNCTR.CHNCTR.STRIO
      9725**DCL     10173<<ASSIGN
KH@IO_OTPLCTBYT
      9578**DCL     10126<<ASSIGN  10159<>CALL    10167<>CALL    10181<>CALL
KH@IO_OTPLCTBYT.ASNSTT
      9587**DCL      9588--REDEF    9594--REDEF    9599--REDEF    9603--REDEF    9607--REDEF    9611--REDEF
      9618--REDEF    9624--REDEF    9630--REDEF    9635--REDEF    9642--REDEF    9645--REDEF    9649--REDEF
      9656--REDEF    9660--REDEF    9664--REDEF    9668--REDEF    9673--REDEF    9677--REDEF
KH@IO_OTPLCTBYT.LCTBYT.ADR
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:58   
      9594**DCL     10128<<ASSIGN  10166<<ASSIGN
KH@IO_OTPLCTBYT.LCTBYT.DAT
      9594**DCL     10127<<ASSIGN  10165<<ASSIGN
KHA$SNDSTT
      9473**DCL-ENT 10088--CALL    10096--CALL
KHC$XEQ2
      9480**DCL-ENT 10094--CALL
KHI$DISABLE
      9478**DCL-ENT  9940--CALL
KHI$DWNLODCCP
      9477**DCL-ENT  9986--CALL
KHI$DWNLODLCT
      9476**DCL-ENT 10154--CALL
KHI$ENABLE
      9479**DCL-ENT 10106--CALL
KHI$IO_OTP
      9474**DCL-ENT 10174--CALL
KHI$IO_OTPLCTBYT
      9475**DCL-ENT 10159--CALL    10167--CALL    10181--CALL
KH_CHNHI
      8678**DCL      8679--REDEF
KH_CHNLOW
      8679**DCL      8680--REDEF
KH_CTLTBL.PARM.PTR$
      5496**DCL      9960>>ASSIGN   9963>>ASSIGN   9966>>ASSIGN
KH_IO_OTPCHNCTR
      9285**DCL     10172>>ASSIGN
KH_IO_OTPLCTBYT
      9171**DCL     10126>>ASSIGN
KL_REQSTATS
      4620**DCL     10088<>CALL    10096<>CALL
KL_REQSTATS.DSPENT
      4716**DCL     10076>>IF      10090>>IF
KL_REQSTATS.DSPMSK
      4710**DCL      4716--REDEF
KL_REQSTATS.SLCENT
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:59   
      4758**DCL     10071>>IF      10071>>IF
KL_REQSTATS.SLCMSK
      4751**DCL      4758--REDEF
KV$BPC.BITMAPSIZ
      5900**DCL      5903--IMP-SIZ
KV$BPC.COUNT
      5899**DCL     10084--DOINDEX 10085>>ASSIGN
KV$BPC.DBG
      5900**DCL      9960<<ASSIGN   9963<<ASSIGN   9966>>ASSIGN
KV$BPC.DBG.BITMAP
      5900**DCL      9959>>IF       9965<<ASSIGN
KV$BPC.MINSIZ
      5899**DCL     10083>>ASSIGN
KV$BPCSTT
      5911**DCL     10082>>ASSIGN
KV$PTR.INPCNDPND
      5956**DCL      5965--REDEF    5969--REDEF
KV$PTR.LINLST$
      5952**DCL      5953--REDEF
KV$PTR.VDI$
      5950**DCL     10038>>ASSIGN  10042>>IF      10050>>ASSIGN  10060>>IF
KV$PTR$
      5944**DCL      5950--IMP-PTR 10026>>ASSIGN  10027<<ASSIGN  10038>>ASSIGN  10042>>IF      10050>>ASSIGN
     10052<<ASSIGN  10059>>IF      10060>>IF
KV$SSN.REDRSPCNT
      6001**DCL      6002--REDEF
KV$STT.REQSTATS.DSPMSK
      6824**DCL      6830--REDEF
KV$STT.REQSTATS.SLCMSK
      6865**DCL      6872--REDEF
KV$VDI.ASNINPPTR$
      6073**DCL     10027>>ASSIGN
KV$VDI.BSY
      6107**DCL     10024>>IF      10025<<ASSIGN  10050<<ASSIGN  10059>>IF
KV$VDI.DFR.USR
      6104**DCL     10030<<ASSIGN
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:60   
KV$VDI.INTPHSDSC
      6111**DCL     10038<<ASSIGN
KV$VDI.LINSPD
      6114**DCL     10062>>ASSIGN
KV$VDI.PHSDSC
      6107**DCL     10001<<ASSIGN
KV$VDI.USRCTX$
      6072**DCL     10061<<ASSIGN
KV$VDI.VDHEVTENB
      6120**DCL     10042>>IF
KV@USRENT.SVDPTR$
      9521**DCL     10026<<ASSIGN  10052>>ASSIGN
KV@VDH_DSC
      9557**DCL     10037<>CALL    10039<<ASSIGN  10041<>CALL
KV@VDH_DSC.RSN
      9563**DCL     10040<<ASSIGN
KVV$VDI
      9481**DCL-ENT 10041--CALL
KV_B_POOL$
      5928**DCL      9959>>IF       9960>>ASSIGN   9963>>ASSIGN   9965>>ASSIGN   9966>>ASSIGN  10082>>ASSIGN
     10083>>ASSIGN
KV_STT
      6184**DCL     10096--CALL
KV_STT.REQSTATS.DSPMSK
      6430**DCL      6436--REDEF
KV_STT.REQSTATS.SLCMSK
      6471**DCL      6478--REDEF
KV_STT.SCHEXCTIM
      6541**DCL     10095<<ASSIGN
KV_STT.USRENTCNT
      6540**DCL     10023<<ASSIGN  10023>>ASSIGN
KV_STT.USRENTDFRCNT
      6541**DCL     10031<<ASSIGN  10031>>ASSIGN
KV_VDH_DSC
      8834**DCL     10039>>ASSIGN
LVL
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:61   
      9523**DCL      9935<<ASSIGN   9940<>CALL     9944<<ASSIGN  10100>>IF
MMRINTCHC
      5565**DCL      9960>>ASSIGN   9963>>ASSIGN   9966<<ASSIGN
Y$DWNLOD
     10114**PROC     9973--CALL     9993--CALL
Y$LOG2
     10189**PROC     9953--CALL     9955--CALL
Y@CRTEXCTIM
      9527**DCL     10094<>CALL    10095>>ASSIGN
Y@DFR
     10052**LABEL   10032--GOTO
Y@LCT_INTCNF.AUTBAD
      9493**DCL     10122<<ASSIGN
Y@LCT_INTCNF.BRKRQ
      9492**DCL     10121<<ASSIGN
Y@LCT_INTCNF.DC1DC3FLWCTR
      9495**DCL     10123<<ASSIGN
Y@LCT_INTCNF.ENB
      9494**DCL     10125<<ASSIGN
Y@LCT_INTCNF.LINSPD
      9496**DCL     10120<<ASSIGN
Y@LCT_INTCNF_BYT
      9490**DCL      9491--REDEF   10119<<ASSIGN  10127>>ASSIGN
Y@LCT_MSCSTT.MLC16
      9500**DCL     10164<<ASSIGN
Y@LCT_MSCSTT_BYT
      9497**DCL      9498--REDEF   10163<<ASSIGN  10165>>ASSIGN
Y@TMP1 IN PROCEDURE Y$LOG2
     10193**DCL     10196<<ASSIGN  10199>>IF      10200>>ASSIGN  10204<<ASSIGN  10204>>ASSIGN
Y@TMP2 IN PROCEDURE Y$LOG2
     10194**DCL     10198<<DOINDEX 10201>>ASSIGN
Y_DWNLODCCP
      9402**DCL      9982>>ASSIGN
Y_DWNLODLCT
      9425**DCL     10149>>ASSIGN
Y_PRM1 IN PROCEDURE Y$LOG2
PL6.E3A0      #001=KAA$ADM File=KAA$SRV.:E05TSI                                  TUE 07/29/97 23:54 Page:62   
     10191**DCL     10189--PROC    10199>>IF      10200<<ASSIGN
Y_PRM2 IN PROCEDURE Y$LOG2
     10192**DCL     10189--PROC    10201<<ASSIGN
Y_STT2ENB IN PROCEDURE Y$DWNLOD
     10116**DCL     10117--REDEF
Y_STT_2_ENB IN PROCEDURE Y$DWNLOD
     10117**DCL     10124>>IF
