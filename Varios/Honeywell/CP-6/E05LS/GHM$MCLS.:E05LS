VERSION E05

PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:1    
        1        1        /*M* GHM$MCLS - MCL handlers for M$INTCON/RET/REL.              */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* CLM=0,PLM=3,CSU=3,ECU=3,IAD=3,IND=0 */
        8        8        GHM$MCLS: PROC(FPT) ALTRET;
        9        9        /*F*     NAME: GHM$INTCON - do the M$INTCON service.
       10       10        *        DESCRIPTION: Items from the FPT are moved to the INTCON structure
       11       11        *        in MHJIT.
       12       12        */
       13       13 S      %INCLUDE GH_LCP6_M;
       14       14 S      %INCLUDE GU_LCP6_M;
       15       15 S      %INCLUDE G_LCP6_E;
       16       16        %INCLUDE G_HJIT_M;
       17      161        %INCLUDE G_JIT_M;
       18      426        %INCLUDE GH_SCHD_E;
       19      522        %INCLUDE GU_MACROS_M;
       20      681        %INCLUDE HF_ERRORS_C;
       21      766        %INCLUDE FR_ERRORS_C;
       22      797        %INCLUDE M_ERRORS_C;
       23      861        %GUD_HAND_PARAMS(FPTN=FPT);
       24      937        %FPT_INTCON(FPTN=INTCON,VECTORS=NO,STCLASS="BASED(FPT.PTRS.PAR1$)");
       25      958        %FPT_INTRET(FPTN=INTRET,VECTORS=NO,STCLASS="BASED(FPT.PTRS.PAR1$)");
       26      978        %FPT_INTREL(FPTN=INTREL,VECTORS=NO,STCLASS="BASED(FPT.PTRS.PAR1$)");
       27      997        %G$INTCON(STCLASS="BASED(INTCON$)");
       28     1132        %G$HHJIT(STCLASS="BASED(G$WINDOW1$)");
       29     3276        %G$MHJIT(STCLASS="BASED(G$MHJIT$)");
       30    10150        %G$UHJIT(STCLASS="BASED(G$UHJIT$)");
       31    13124        %G$JIT(STCLASS="BASED(G$JIT$)");
       32    13538    1   DCL G$MHJIT$ PTR SYMREF/* USE SYMREF WHEN LINKER FIXED UP */;
       33    13539    1   DCL G$UHJIT$ PTR SYMREF/* USE SYMREF WHEN LINKER FIXED UP */;
       34    13540    1   DCL G$JIT$ PTR SYMREF;
       35    13541    1   DCL G$WINDOW1$ PTR SYMREF;
       36    13542    1   DCL GHI$CIH_CLNUP ENTRY;
       37    13543    1   DCL GHS$RUE ENTRY(4) ALTRET;
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:2    
       38    13544    1   DCL GHS$EVENT ENTRY(7);
       39    13545    1   DCL GMA$GETPS ENTRY(2) ALTRET;
       40    13546    1   DCL GMA$PS2USR ENTRY(2) ALTRET;
       41    13547    1   DCL GMA$RELPS ENTRY(2) ALTRET;
       42    13548    1   DCL GMA$MAP ENTRY(2) ALTRET;
       43    13549    1   DCL GUE$MCL ENTRY(1);
       44    13550        %GU_MCL_E;
       45    13576    1   DCL KNH$SCAN ENTRY(2) ALTRET;
       46    13577    1   DCL SCREECH ENTRY(1);
       47    13578    1   DCL HJITPAGE UBIN;
       48    13579    1   DCL INTCON$ PTR;
       49    13580    1   DCL HJITSEG REDEF INTCON$ BIT(32);
       50    13581    1   DCL LEVEL SBIN;
       51    13582    1   DCL ERR BIT(32);
       52    13583        %EQU E=G_SEV_ERR#;
       53    13584        %VLP_ERRCODE (FCG=GH, MID=M, MON='1'B, SEV=%E, STCLASS=CONSTANT,
       54    13585                      FPTN=GHM$E$BADLEVEL, ERR#=%E$BADLEVEL);
       55    13631        %VLP_ERRCODE (FCG=GH, MID=M, MON='1'B, SEV=%E, STCLASS=CONSTANT,
       56    13632                      FPTN=GHM$E$USEDLEVEL, ERR#=%E$USEDLEVEL);
       57    13678        %VLP_ERRCODE (FCG=GH, MID=M, MON='1'B, SEV=%E, STCLASS=CONSTANT,
       58    13679                      FPTN=GHM$E$BADRUNLEVEL, ERR#=%E$BADRUNLEVEL);
       59    13725        %VLP_ERRCODE (FCG=GH, MID=M, MON='1'B, SEV=%E, STCLASS=CONSTANT,
       60    13726                      FPTN=GHM$E$MONPP, ERR#=%E$MONPP);
       61    13772        %VLP_ERRCODE (FCG=GH, MID=M, MON='1'B, SEV=%E, STCLASS=CONSTANT,
       62    13773                      FPTN=GHM$E$NO_MSYS, ERR#=%E$NO_MSYS);
       63    13819        %VLP_ERRCODE (FCG=GH, MID=M, MON='1'B, SEV=%E, STCLASS=CONSTANT,
       64    13820                      FPTN=GHM$E$NO_INTCON, ERR#=%E$NO_INTCON);
       65    13866        %VLP_ERRCODE (FCG=GH, MID=M, MON='1'B, SEV=%E, STCLASS=CONSTANT,
       66    13867                      FPTN=GHM$E$NORES, ERR#=%E$NORES);
       67    13913        %VLP_ERRCODE (FCG=GH, MID=M, MON='1'B, SEV=%E, STCLASS=CONSTANT,
       68    13914                      FPTN=GHM$E$NOTUR, ERR#=%E$NOTUR);
       69    13960        %EJECT;
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:3    
       70    13961    1   GHM$INTCON: ENTRY(FPT) ALTRET;
       71    13962    1      HJITPAGE=0;
       72    13963    2      IF NOT G$JIT.PRIV.ACTIVE.INTCON THEN DO;
       73    13964    2         FPT.ERR=GHM$E$NO_INTCON;
       74    13965              /*E* ERROR: GHM-E$NO_INTCON-E
       75    13966                   MESSAGE:M$INTCON requires INTCON privilege to be active.
       76    13967              */
       77    13968    2         ALTRETURN;
       78    13969    2         END;
       79    13970    1      INTCON$=ADDR(G$MHJIT.INTCON(-%G_IL_HNDMIN#));
       80    13971    2      IF INTCON.V.LEVEL=0 THEN DO;
       81    13972    2         LEVEL=INTCON.V.RUNLEVEL;
       82    13973    2         CALL ALLOCATE_LEVEL ALTRET(RETALT);
       83    13974    2         RETURN;
       84    13975    2         END;
       85    13976    1      IF INTCON.V.PRIVILEGED AND NOT G$JIT.PRIV.AUTH.MSYS
       86    13977    2        AND NOT G$JIT.PRIV.PRC.MSYS THEN DO;
       87    13978    2         FPT.ERR=GHM$E$NO_MSYS;
       88    13979              /*E* ERROR: GHM-E$NO_MSYS-E
       89    13980                   MESSAGE:M$SYS or M$INTCON-PRIVILEGED needs MSYS privilege.
       90    13981              */
       91    13982    2         ALTRETURN;
       92    13983    2         END;
       93    13984    2      CALL GMA$GETPS(HJITPAGE,1) WHENALTRETURN DO;
       94    13985    2         FPT.ERR=GHM$E$MONPP;
       95    13986              /*E* ERROR: GHM-E$MONPP-E
       96    13987                   MESSAGE:M$INTCON couldn't allocate a page for the HHJIT.
       97    13988              */
       98    13989    2   RETALT: IF HJITPAGE~=0 THEN CALL GMA$RELPS(HJITPAGE,1);
       99    13990    2         ALTRETURN;
      100    13991    2         END;
      101    13992    1      G$JIT.PSEUDOPGS = G$JIT.PSEUDOPGS+1;
      102    13993    1      LEVEL=INTCON.V.LEVEL;
      103    13994    1      CALL ALLOCATE_LEVEL ALTRET(RETALT);
      104    13995    1      CALL GMA$PS2USR(HJITPAGE,G$MHJIT.CUN);
             13995               /* !!! THIS MUST CHANGE TO UNSHUFFLABLE !!! */
      105    13996    1      CALL GMA$MAP(HJITPAGE,1);
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:4    
      106    13997    1      G$HHJIT=G$UHJIT$->G$HHJIT;
      107    13998    1      G$HHJIT.ISA_HND.ISM2.NATSAP_SEL=%G_NATSAP_HND#;
      108    13999    1      G$HHJIT.ISA_HND.TSAP$=ADDR(NIL);
      109    14000    1      G$HHJIT.TSA_HND.TSAL$=ADDR(G$MHJIT.TSA_HND);
      110    14001    1      G$HHJIT.ASDT_USR.UHJIT.BASE=HJITPAGE;
      111    14002    1      G$HHJIT.ASDT_USR.UHJIT.SIZE=0;
      112    14003    1      G$HHJIT.ASDT_MCL.UHJIT=G$HHJIT.ASDT_USR.UHJIT;
      113    14004    1      RETURN;
      114    14005        %EJECT;
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:5    
      115    14006    1   ALLOCATE_LEVEL: PROC ALTRET;
      116    14007    2   DCL ICON$ PTR;
      117    14008        %G$INTCON(ARRAYED=NO,FPTN=ICON,STCLASS="BASED(ICON$)");
      118    14143    3      IF LEVEL<%G_IL_HNDMIN# OR LEVEL>%G_IL_HNDMAX# THEN DO;
      119    14144    3         FPT.ERR=GHM$E$BADLEVEL;
      120    14145              /*E* ERROR: GHM-E$BADLEVEL-E
      121    14146                   MESSAGE:M$INTCON LEVEL must be between 12 and 60.
      122    14147              */
      123    14148    3         ALTRETURN;
      124    14149    3         END;
      125    14150    3      IF INTCON.V.RUNLEVEL~=0 THEN DO;
      126    14151    3         IF INTCON.V.RUNLEVEL<%G_IL_HNDMIN#
      127    14152    3           OR INTCON.V.RUNLEVEL>%G_IL_HNDMAX#
      128    14153    4           OR INTCON.V.RUNLEVEL>LEVEL THEN DO;
      129    14154    4            FPT.ERR=GHM$E$BADRUNLEVEL;
      130    14155              /*E* ERROR: GHM-E$BADRUNLEVEL-E
      131    14156                   MESSAGE:M$INTCON RUNLEVEL must be between 12 and 60 and <=LEVEL.
      132    14157              */
      133    14158    4            ALTRETURN;
      134    14159    4            END;
      135    14160    3         ICON$=ADDR(G$INTCON(INTCON.V.RUNLEVEL));
      136    14161    3         IF ICON.ALLOCATED AND
      137    14162    3           (NOT ICON.RUNONLY OR ICON.USER~=G$MHJIT.CUN) THEN GOTO BUSYRUN;
      138    14163    4         IF INTCON.V.RUNLEVEL~=INTCON.V.LEVEL AND NOT ICON.ALLOCATED THEN DO;
      139    14164    5            CALL GET_LEVEL WHENALTRETURN DO;
      140    14165    5               ALTRETURN;
      141    14166    5               END;
      142    14167    4            ICON.RUNONLY='1'B;
      143    14168    4            G$UHJIT.CNCTD_LVLS(INTCON.V.RUNLEVEL)='1'B;
      144    14169    4            ICON.HHJIT=0;
      145    14170    4            END;
      146    14171    3         IF INTCON.V.LEVEL=0 THEN RETURN;
      147    14172    3         END;
      148    14173    2      ICON$=ADDR(G$INTCON(LEVEL));
      149    14174    3      IF ICON.ALLOCATED THEN DO;
      150    14175    3   BUSYRUN: ;
      151    14176    3         FPT.ERR=GHM$E$USEDLEVEL;
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:6    
      152    14177              /*E* ERROR: GHM-E$USEDLEVEL-E
      153    14178                   MESSAGE:M$INTCON can provide service to only one process per level.
      154    14179              */
      155    14180    3         ALTRETURN;
      156    14181    3         END;
      157    14182    3      CALL GET_LEVEL WHENALTRETURN DO;
      158    14183    3         ALTRETURN;
      159    14184    3         END;
      160    14185    2      ICON.IENTRY=INTCON.V.IENTRY$;
      161    14186    2      IF INTCON.V.RUNLEVEL=0 THEN ICON.RUNLEVEL=LEVEL;
      162    14187    2      ELSE ICON.RUNLEVEL=INTCON.V.RUNLEVEL;
      163    14188    2      ICON.PRIVILEGED=INTCON.V.PRIVILEGED;
      164    14189    2      ICON.DOMYIO=INTCON.V.DOMYIO;
      165    14190    2      ICON.HHJIT=HJITPAGE+BITBIN('8000'X);
      166    14191    2      ICON.RUNONLY='0'B;
      167    14192    2      G$UHJIT.CNCTD_LVLS(LEVEL)='1'B;
      168    14193    2      RETURN;
      169    14194
      170    14195    2   GET_LEVEL: PROC ALTRET;
      171    14196
      172    14197    4      IF G$JIT.CURRLVLS=G$JIT.MAXLVLS THEN DO;
      173    14198    4         FPT.ERR=GHM$E$NORES;
      174    14199              /*E* ERROR: GHM-E$NORES-E
      175    14200                   MESSAGE:Your limit of interrupt levels has been reached.
      176    14201              */
      177    14202    4         ALTRETURN;
      178    14203    4         END;
      179    14204    3      G$JIT.CURRLVLS=G$JIT.CURRLVLS+1;
      180    14205    3      IF G$JIT.CURRLVLS>G$JIT.PEAK_LVLS
      181    14206    3      THEN G$JIT.PEAK_LVLS=G$JIT.CURRLVLS;
      182    14207    3      ICON.ALLOCATED='1'B;
      183    14208    3      ICON.USER=G$MHJIT.CUN;
      184    14209    3      RETURN;
      185    14210    3   END GET_LEVEL;
      186    14211    2   END ALLOCATE_LEVEL;
      187    14212        %EJECT;
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:7    
      188    14213    1   GHM$INTRET: ENTRY(FPT) ALTRET;
      189    14214    2      IF G$UHJIT.DMN.ID~=%G_DMN_INT_SVC# THEN DO;
      190    14215        /* Turn it into a M$TRTN if we're not interrupting. */
      191    14216    2         FPT.PTRS.PAR1$ = ADDR(NIL); /* NO FPT                                   */
      192    14217    2         FPT.MCL.CODE = %G_MCL_TRTN#;
      193    14218    2         CALL GUE$MCL (FPT);
      194    14219    2         RETURN;
      195    14220    2         END;
      196    14221    2      IF FPT.PTRS.PAR1$~=ADDR(NIL) THEN DO;
      197    14222    2         CALL KNH$SCAN(,ERR);
      198    14223    2         LEVEL = G$JIT.USR#;
      199    14224    2         IF INTRET.V.EVENT~=0
      200    14225    2         THEN CALL GHS$EVENT(LEVEL,%GH_USRDMN#,/*ECCSUBC*/0,INTRET.V.EVENT);
      201    14226    2         ELSE IF INTRET.V.WAKEME THEN CALL GHS$RUE(%GH_EVWU,LEVEL);
      202    14227    3         IF INTRET.V.CHECKME THEN DO;
      203    14228        /*N* PUT IN THE CODE */
      204    14229    3            END;
      205    14230    2         END;
      206    14231    1      CALL GHI$CIH_CLNUP; /* DOESN'T RETURN                                      */
      207    14232        %EJECT;
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:8    
      208    14233    1   GHM$INTREL: ENTRY(FPT) ALTRET;
      209    14234    1      LEVEL=INTREL.V.LEVEL;
      210    14235    1      IF LEVEL=0 THEN GOTO RELALL;
      211    14236    2      IF LEVEL<%G_IL_HNDMIN# OR LEVEL>%G_IL_HNDMAX# THEN DO;
      212    14237    2         FPT.ERR=GHM$E$BADLEVEL;
      213    14238    2         ALTRETURN;
      214    14239    2         END;
      215    14240    2      IF NOT G$UHJIT.CNCTD_LVLS(LEVEL) THEN DO;
      216    14241    2         FPT.ERR=GHM$E$NOTUR;
      217    14242              /*E* ERROR: GHM-E$NOTUR-E
      218    14243                   MESSAGE:M$INTREL called for LEVEL not M$INTCONned.
      219    14244              */
      220    14245    2         ALTRETURN;
      221    14246    2         END;
      222    14247    1      CALL RELEASE_LEVEL;
      223    14248    1      RETURN;
      224    14249
      225    14250    1   GHM$INTRELALL: ENTRY ALTRET;
      226    14251    1   RELALL:;
      227    14252    2      DO LEVEL=%G_IL_HNDMIN# TO %G_IL_HNDMAX#;
      228    14253    2         IF G$UHJIT.CNCTD_LVLS(LEVEL) THEN CALL RELEASE_LEVEL;
      229    14254    2         END;
      230    14255    1      RETURN;
      231    14256        %EJECT;
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:9    
      232    14257    1   RELEASE_LEVEL: PROC;
      233    14258    2   DCL ICON$ PTR;
      234    14259        %G$INTCON (ARRAYED=NO, FPTN=ICON, STCLASS="BASED(ICON$)");
      235    14394
      236    14395    2      ICON$=ADDR(G$MHJIT.INTCON(LEVEL-%G_IL_HNDMIN#));
      237    14396    2      IF NOT ICON.ALLOCATED OR ICON.USER~=G$MHJIT.CUN
      238    14397    2      THEN CALL SCREECH (GHM$E$NOTUR);
      239    14398    2      G$JIT.CURRLVLS=G$JIT.CURRLVLS-1;
      240    14399    2      ICON.ALLOCATED='0'B;
      241    14400    2      G$UHJIT.CNCTD_LVLS(LEVEL)='0'B;
      242    14401    3      IF ICON.HHJIT~=0 THEN DO;
      243    14402    3         HJITPAGE=MOD(ICON.HHJIT,BITBIN('8000'X));
      244    14403    3         ICON.HHJIT=0;
      245    14404    3         CALL GMA$RELPS(HJITPAGE,1);
      246    14405    3         G$JIT.PSEUDOPGS = G$JIT.PSEUDOPGS-1;
      247    14406    3         END;
      248    14407    2      RETURN;
      249    14408    2   END RELEASE_LEVEL;
      250    14409        %EJECT;
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:10   
      251    14410    1   GHM$SYS: ENTRY(FPT) ALTRET;
      252    14411    2      IF NOT G$JIT.PRIV.PRC.MSYS AND NOT G$JIT.PRIV.AUTH.MSYS THEN DO;
      253    14412    2         FPT.ERR=GHM$E$NO_MSYS;
      254    14413    2         ALTRETURN;
      255    14414    2         END;
      256    14415    1      G$UHJIT.TSA_USR.S.RING=%G_R_MON#;
      257    14416    1      RETURN;
      258    14417    1   END GHM$MCLS;

PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:11   
--  Include file information  --

   M_ERRORS_C.:E05TOU  is referenced.
   FR_ERRORS_C.:E05TOU  is referenced.
   HF_ERRORS_C.:E05TOU  is referenced.
   GU_MACROS_M.:E05TOU  is referenced.
   GH_SCHD_E.:E05TOU  is referenced.
   G_JIT_M.:E05TOU  is referenced.
   G_HJIT_M.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   KI_CP6.:E05TOU  was found in the system file and is never referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure GHM$MCLS.

   Procedure GHM$MCLS requires 842 words for executable code.
   Procedure GHM$MCLS requires 26 words of local(AUTO) storage.

    No errors detected in file GHM$MCLS.:E05TSI    .

PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:12   

 Object Unit name= GHM$MCLS                                   File name= GHM$MCLS.:E05TOU
 UTS= JUL 29 '97 21:34:57.08 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0  RoData even  UTS     16     10  GHM$MCLS
    1   Proc  even  none   842    34A  GHM$MCLS
    2  RoData even  none     2      2  GHM$MCLS

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     1      0   yes    yes     yes      Std        1  GHM$MCLS
     1      7          yes     yes      Std        1  GHM$INTCON
     1    1EE          yes     yes      Std        1  GHM$INTRET
     1    278          yes     yes      Std        1  GHM$INTREL
     1    2AB          yes     yes      Std        0  GHM$INTRELALL
     1    323          yes     yes      Std        1  GHM$SYS
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:13   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       2 GMA$GETPS
 yes     yes           Std       2 GMA$PS2USR
         yes           Std       0 GHI$CIH_CLNUP
 yes     yes           Std       2 KNH$SCAN
 yes     yes           Std       2 GMA$RELPS
 yes     yes           Std       2 GMA$MAP
         yes           Std       1 GUE$MCL
         yes           Std       7 GHS$EVENT
 yes     yes           Std       4 GHS$RUE
         yes           Std       1 SCREECH
                       nStd      0 X6A_AUTO_1
                       nStd      0 X6A_AALT
                       nStd      0 X6A_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     G$MHJIT$                              G$UHJIT$                              G$JIT$
     G$WINDOW1$                       r    G$ROS$
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:14   


        1        1        /*M* GHM$MCLS - MCL handlers for M$INTCON/RET/REL.              */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* CLM=0,PLM=3,CSU=3,ECU=3,IAD=3,IND=0 */
        8        8        GHM$MCLS: PROC(FPT) ALTRET;

      8   1 000000  D380 0000 0000  xent GHM$MCLS        LNJ,B5   X6A_AUTO_1
          1 000003       001A 0001                       DC       26,1
          1 000005  0F81 0006                            B        s:13962,PREL

        9        9        /*F*     NAME: GHM$INTCON - do the M$INTCON service.
       10       10        *        DESCRIPTION: Items from the FPT are moved to the INTCON structure
       11       11        *        in MHJIT.
       12       12        */
       13       13 S      %INCLUDE GH_LCP6_M;
       14       14 S      %INCLUDE GU_LCP6_M;
       15       15 S      %INCLUDE G_LCP6_E;
       16       16        %INCLUDE G_HJIT_M;
       17      161        %INCLUDE G_JIT_M;
       18      426        %INCLUDE GH_SCHD_E;
       19      522        %INCLUDE GU_MACROS_M;
       20      681        %INCLUDE HF_ERRORS_C;
       21      766        %INCLUDE FR_ERRORS_C;
       22      797        %INCLUDE M_ERRORS_C;
       23      861        %GUD_HAND_PARAMS(FPTN=FPT);
       24      937        %FPT_INTCON(FPTN=INTCON,VECTORS=NO,STCLASS="BASED(FPT.PTRS.PAR1$)");
       25      958        %FPT_INTRET(FPTN=INTRET,VECTORS=NO,STCLASS="BASED(FPT.PTRS.PAR1$)");
       26      978        %FPT_INTREL(FPTN=INTREL,VECTORS=NO,STCLASS="BASED(FPT.PTRS.PAR1$)");
       27      997        %G$INTCON(STCLASS="BASED(INTCON$)");
       28     1132        %G$HHJIT(STCLASS="BASED(G$WINDOW1$)");
       29     3276        %G$MHJIT(STCLASS="BASED(G$MHJIT$)");
       30    10150        %G$UHJIT(STCLASS="BASED(G$UHJIT$)");
       31    13124        %G$JIT(STCLASS="BASED(G$JIT$)");
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:15   
       32    13538    1   DCL G$MHJIT$ PTR SYMREF/* USE SYMREF WHEN LINKER FIXED UP */;
       33    13539    1   DCL G$UHJIT$ PTR SYMREF/* USE SYMREF WHEN LINKER FIXED UP */;
       34    13540    1   DCL G$JIT$ PTR SYMREF;
       35    13541    1   DCL G$WINDOW1$ PTR SYMREF;
       36    13542    1   DCL GHI$CIH_CLNUP ENTRY;
       37    13543    1   DCL GHS$RUE ENTRY(4) ALTRET;
       38    13544    1   DCL GHS$EVENT ENTRY(7);
       39    13545    1   DCL GMA$GETPS ENTRY(2) ALTRET;
       40    13546    1   DCL GMA$PS2USR ENTRY(2) ALTRET;
       41    13547    1   DCL GMA$RELPS ENTRY(2) ALTRET;
       42    13548    1   DCL GMA$MAP ENTRY(2) ALTRET;
       43    13549    1   DCL GUE$MCL ENTRY(1);
       44    13550        %GU_MCL_E;
       45    13576    1   DCL KNH$SCAN ENTRY(2) ALTRET;
       46    13577    1   DCL SCREECH ENTRY(1);
       47    13578    1   DCL HJITPAGE UBIN;
       48    13579    1   DCL INTCON$ PTR;
       49    13580    1   DCL HJITSEG REDEF INTCON$ BIT(32);
       50    13581    1   DCL LEVEL SBIN;
       51    13582    1   DCL ERR BIT(32);
       52    13583        %EQU E=G_SEV_ERR#;
       53    13584        %VLP_ERRCODE (FCG=GH, MID=M, MON='1'B, SEV=%E, STCLASS=CONSTANT,
       54    13585                      FPTN=GHM$E$BADLEVEL, ERR#=%E$BADLEVEL);
       55    13631        %VLP_ERRCODE (FCG=GH, MID=M, MON='1'B, SEV=%E, STCLASS=CONSTANT,
       56    13632                      FPTN=GHM$E$USEDLEVEL, ERR#=%E$USEDLEVEL);
       57    13678        %VLP_ERRCODE (FCG=GH, MID=M, MON='1'B, SEV=%E, STCLASS=CONSTANT,
       58    13679                      FPTN=GHM$E$BADRUNLEVEL, ERR#=%E$BADRUNLEVEL);
       59    13725        %VLP_ERRCODE (FCG=GH, MID=M, MON='1'B, SEV=%E, STCLASS=CONSTANT,
       60    13726                      FPTN=GHM$E$MONPP, ERR#=%E$MONPP);
       61    13772        %VLP_ERRCODE (FCG=GH, MID=M, MON='1'B, SEV=%E, STCLASS=CONSTANT,
       62    13773                      FPTN=GHM$E$NO_MSYS, ERR#=%E$NO_MSYS);
       63    13819        %VLP_ERRCODE (FCG=GH, MID=M, MON='1'B, SEV=%E, STCLASS=CONSTANT,
       64    13820                      FPTN=GHM$E$NO_INTCON, ERR#=%E$NO_INTCON);
       65    13866        %VLP_ERRCODE (FCG=GH, MID=M, MON='1'B, SEV=%E, STCLASS=CONSTANT,
       66    13867                      FPTN=GHM$E$NORES, ERR#=%E$NORES);
       67    13913        %VLP_ERRCODE (FCG=GH, MID=M, MON='1'B, SEV=%E, STCLASS=CONSTANT,
       68    13914                      FPTN=GHM$E$NOTUR, ERR#=%E$NOTUR);
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:16   
       69    13960        %EJECT;
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:17   
       70    13961    1   GHM$INTCON: ENTRY(FPT) ALTRET;

  13961   1 000007  D380 0000 0000  xent GHM$INTCON      LNJ,B5   X6A_AUTO_1
          1 00000A       001A 0001                       DC       26,1

       71    13962    1      HJITPAGE=0;

  13962   1 00000C  8747 0006                            CL       HJITPAGE,AUTO

       72    13963    2      IF NOT G$JIT.PRIV.ACTIVE.INTCON THEN DO;

  13963   1 00000E  EC80 0000 0000  xsym                 LDB,B6   G$JIT$
          1 000011  82C6 008F                            LB,'0400'X        143,B6
          1 000013       0400
          1 000014  0501 000B                            BBT      s:13970,PREL

       73    13964    2         FPT.ERR=GHM$E$NO_INTCON;

  13964   1 000016  8C80 0000 000A  00                   LDI      GHM$E$NO_INTCON
          1 000019  DCC7 0004                            LDB,B5   @FPT,AUTO
          1 00001B  8D45 0003                            SDI      3,B5

       74    13965              /*E* ERROR: GHM-E$NO_INTCON-E
       75    13966                   MESSAGE:M$INTCON requires INTCON privilege to be active.
       76    13967              */
       77    13968    2         ALTRETURN;

  13968   1 00001D  C380 0000 0000  xent                 LNJ,B4   X6A_AALT

       78    13969    2         END;
       79    13970    1      INTCON$=ADDR(G$MHJIT.INTCON(-%G_IL_HNDMIN#));

  13970   1 000020  DC80 0000 0000  xsym                 LDB,B5   G$MHJIT$
          1 000023  CBC5 029C                            LAB,B4   668,B5
          1 000025  CFC7 0007                            STB,B4   INTCON$,AUTO

       80    13971    2      IF INTCON.V.LEVEL=0 THEN DO;
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:18   

  13971   1 000027  BCC7 0004                            LDB,B3   @FPT,AUTO
          1 000029  ACC3 0006                            LDB,B2   6,B3
          1 00002B  E842 0002                            LDR,R6   2,B2
          1 00002D  6981 000B                            BNEZ,R6  s:13976,PREL

       81    13972    2         LEVEL=INTCON.V.RUNLEVEL;

  13972   1 00002F  D842 0003                            LDR,R5   3,B2
          1 000031  DF47 0009                            STR,R5   LEVEL,AUTO

       82    13973    2         CALL ALLOCATE_LEVEL ALTRET(RETALT);

  13973   1 000033  E3C0 00AC                            LNJ,B6   s:0,PREL
          1 000035       0033                            DC       s:13989,PREL

       83    13974    2         RETURN;

  13974   1 000036  C380 0000 0000  xent                 LNJ,B4   X6A_ARET

       84    13975    2         END;
       85    13976    1      IF INTCON.V.PRIVILEGED AND NOT G$JIT.PRIV.AUTH.MSYS

  13976   1 000039  89C2 0004                            CMZ      4,B2
          1 00003B  0881 0013                            BAGE     s:13984,PREL
          1 00003D  82C6 0091                            LB,'0008'X        145,B6
          1 00003F       0008
          1 000040  0501 000E                            BBT      s:13984,PREL
          1 000042  82C6 0093                            LB,'0008'X        147,B6
          1 000044       0008
          1 000045  0501 0009                            BBT      s:13984,PREL

       86    13977    2        AND NOT G$JIT.PRIV.PRC.MSYS THEN DO;

       87    13978    2         FPT.ERR=GHM$E$NO_MSYS;

  13978   1 000047  8C80 0000 0008  00                   LDI      GHM$E$NO_MSYS
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:19   
          1 00004A  8D43 0003                            SDI      3,B3

       88    13979              /*E* ERROR: GHM-E$NO_MSYS-E
       89    13980                   MESSAGE:M$SYS or M$INTCON-PRIVILEGED needs MSYS privilege.
       90    13981              */
       91    13982    2         ALTRETURN;

  13982   1 00004C  C380 0000 0000  xent                 LNJ,B4   X6A_AALT

       92    13983    2         END;
       93    13984    2      CALL GMA$GETPS(HJITPAGE,1) WHENALTRETURN DO;

  13984   1 00004F  9BF0 0001                            LAB,B1   1,IMO
          1 000051  9FC7 0014                            STB,B1   ICON$+6,AUTO
          1 000053  ABC7 0006                            LAB,B2   HJITPAGE,AUTO
          1 000055  AFC7 0012                            STB,B2   ICON$+4,AUTO
          1 000057  BBC7 0012                            LAB,B3   ICON$+4,AUTO
          1 000059  CBF0 0200                            LAB,B4   512,IMO
          1 00005B  E380 0000 0000  xent                 LNJ,B6   GMA$GETPS
          1 00005E       0003                            DC       s:13985,PREL
          1 00005F  0F81 001F                            B        s:13992,PREL

       94    13985    2         FPT.ERR=GHM$E$MONPP;

  13985   1 000061  8C80 0000 0006  00                   LDI      GHM$E$MONPP
          1 000064  ECC7 0004                            LDB,B6   @FPT,AUTO
          1 000066  8D46 0003                            SDI      3,B6

       95    13986              /*E* ERROR: GHM-E$MONPP-E
       96    13987                   MESSAGE:M$INTCON couldn't allocate a page for the HHJIT.
       97    13988              */
       98    13989    2   RETALT: IF HJITPAGE~=0 THEN CALL GMA$RELPS(HJITPAGE,1);

  13989   1 000068  E847 0006            RETALT          LDR,R6   HJITPAGE,AUTO
          1 00006A  6901 0011                            BEZ,R6   s:13990,PREL

  13989   1 00006C  EBF0 0001                            LAB,B6   1,IMO
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:20   
          1 00006E  EFC7 0014                            STB,B6   ICON$+6,AUTO
          1 000070  DBC7 0006                            LAB,B5   HJITPAGE,AUTO
          1 000072  DFC7 0012                            STB,B5   ICON$+4,AUTO
          1 000074  BBC7 0012                            LAB,B3   ICON$+4,AUTO
          1 000076  CBF0 0200                            LAB,B4   512,IMO
          1 000078  E380 0000 0000  xent                 LNJ,B6   GMA$RELPS
          1 00007B       0001                            DC       s:13990,PREL

       99    13990    2         ALTRETURN;

  13990   1 00007C  C380 0000 0000  xent                 LNJ,B4   X6A_AALT

      100    13991    2         END;
      101    13992    1      G$JIT.PSEUDOPGS = G$JIT.PSEUDOPGS+1;

  13992   1 00007F  EC80 0000 0000  xsym                 LDB,B6   G$JIT$
          1 000082  8AC6 008A                            INC      138,B6

      102    13993    1      LEVEL=INTCON.V.LEVEL;

  13993   1 000084  DCC7 0004                            LDB,B5   @FPT,AUTO
          1 000086  CCC5 0006                            LDB,B4   6,B5
          1 000088  E844 0002                            LDR,R6   2,B4
          1 00008A  EF47 0009                            STR,R6   LEVEL,AUTO

      103    13994    1      CALL ALLOCATE_LEVEL ALTRET(RETALT);

  13994   1 00008C  E3C0 0053                            LNJ,B6   s:0,PREL
          1 00008E       FFDA                            DC       s:13989,PREL

      104    13995    1      CALL GMA$PS2USR(HJITPAGE,G$MHJIT.CUN);
             13995               /* !!! THIS MUST CHANGE TO UNSHUFFLABLE !!! */

  13995   1 00008F  EC80 0000 0000  xsym                 LDB,B6   G$MHJIT$
          1 000092  DBC6 0351                            LAB,B5   849,B6
          1 000094  DFC7 0014                            STB,B5   ICON$+6,AUTO
          1 000096  CBC7 0006                            LAB,B4   HJITPAGE,AUTO
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:21   
          1 000098  CFC7 0012                            STB,B4   ICON$+4,AUTO
          1 00009A  BBC7 0012                            LAB,B3   ICON$+4,AUTO
          1 00009C  CBF0 0200                            LAB,B4   512,IMO
          1 00009E  E380 0000 0000  xent                 LNJ,B6   GMA$PS2USR
          1 0000A1       0001                            DC       s:13996,PREL

      105    13996    1      CALL GMA$MAP(HJITPAGE,1);

  13996   1 0000A2  EBF0 0001                            LAB,B6   1,IMO
          1 0000A4  EFC7 0014                            STB,B6   ICON$+6,AUTO
          1 0000A6  DBC7 0006                            LAB,B5   HJITPAGE,AUTO
          1 0000A8  DFC7 0012                            STB,B5   ICON$+4,AUTO
          1 0000AA  BBC7 0012                            LAB,B3   ICON$+4,AUTO
          1 0000AC  CBF0 0200                            LAB,B4   512,IMO
          1 0000AE  E380 0000 0000  xent                 LNJ,B6   GMA$MAP
          1 0000B1       0001                            DC       s:13997,PREL

      106    13997    1      G$HHJIT=G$UHJIT$->G$HHJIT;

  13997   1 0000B2  AC80 0000 0000  xsym                 LDB,B2   G$UHJIT$
          1 0000B5  2C00                                 LDV,R2   0
          1 0000B6  E870 0200                            LDR,R6   512,IMO
          1 0000B8  BC80 0000 0000  xsym                 LDB,B3   G$WINDOW1$
          1 0000BB  3C00                                 LDV,R3   0
          1 0000BC  0008                                 MMM

      107    13998    1      G$HHJIT.ISA_HND.ISM2.NATSAP_SEL=%G_NATSAP_HND#;

  13998   1 0000BD  E870 2000                            LDR,R6   8192,IMO
          1 0000BF  EC80 0000 0000  xsym                 LDB,B6   G$WINDOW1$
          1 0000C2  EAC6 0083                            SRM,R6,'7000'X    131,B6
          1 0000C4       7000

      108    13999    1      G$HHJIT.ISA_HND.TSAP$=ADDR(NIL);

  13999   1 0000C5  DB80 0000 0000                       LAB,B5   0
          1 0000C8  DFC6 007F                            STB,B5   127,B6
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:22   

      109    14000    1      G$HHJIT.TSA_HND.TSAL$=ADDR(G$MHJIT.TSA_HND);

  14000   1 0000CA  CC80 0000 0000  xsym                 LDB,B4   G$MHJIT$
          1 0000CD  BBC4 066C                            LAB,B3   1644,B4
          1 0000CF  BFC6 00B6                            STB,B3   182,B6

      110    14001    1      G$HHJIT.ASDT_USR.UHJIT.BASE=HJITPAGE;

  14001   1 0000D1  D847 0006                            LDR,R5   HJITPAGE,AUTO
          1 0000D3  DAC6 000A                            SRM,R5,'7FFF'X    10,B6
          1 0000D5       7FFF

      111    14002    1      G$HHJIT.ASDT_USR.UHJIT.SIZE=0;

  14002   1 0000D6  8846 000B                            LBF,'01FF'X       11,B6
  14002   1 0000D8       01FF

      112    14003    1      G$HHJIT.ASDT_MCL.UHJIT=G$HHJIT.ASDT_USR.UHJIT;

  14003   1 0000D9  8CC6 000A                            LDI      10,B6
          1 0000DB  8D46 0048                            SDI      72,B6

      113    14004    1      RETURN;

  14004   1 0000DD  C380 0000 0000  xent                 LNJ,B4   X6A_ARET

      114    14005        %EJECT;
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:23   
      115    14006    1   ALLOCATE_LEVEL: PROC ALTRET;

  14006   1 0000E0  EFC7 000C            ALLOCATE_LEVEL  STB,B6   ERR+2,AUTO

      116    14007    2   DCL ICON$ PTR;
      117    14008        %G$INTCON(ARRAYED=NO,FPTN=ICON,STCLASS="BASED(ICON$)");
      118    14143    3      IF LEVEL<%G_IL_HNDMIN# OR LEVEL>%G_IL_HNDMAX# THEN DO;

  14143   1 0000E2  E847 0009                            LDR,R6   LEVEL,AUTO
          1 0000E4  6D0C                                 CMV,R6   12
          1 0000E5  0801 0004                            BAL      s:14144,PREL
          1 0000E7  6D3B                                 CMV,R6   59
          1 0000E8  0A81 000C                            BALE     s:14150,PREL

      119    14144    3         FPT.ERR=GHM$E$BADLEVEL;

  14144   1 0000EA  8C80 0000 0000  00                   LDI      GHM$E$BADLEVEL
          1 0000ED  DCC7 0004                            LDB,B5   @FPT,AUTO
          1 0000EF  8D45 0003                            SDI      3,B5

      120    14145              /*E* ERROR: GHM-E$BADLEVEL-E
      121    14146                   MESSAGE:M$INTCON LEVEL must be between 12 and 60.
      122    14147              */
      123    14148    3         ALTRETURN;

  14148   1 0000F1  ECC7 000C                            LDB,B6   ERR+2,AUTO
          1 0000F3  B806                                 LDR,R3   ,B6
          1 0000F4  C3B6                                 LNJ,B4   ,B6,R3

      124    14149    3         END;
      125    14150    3      IF INTCON.V.RUNLEVEL~=0 THEN DO;

  14150   1 0000F5  DCC7 0004                            LDB,B5   @FPT,AUTO
          1 0000F7  CCC5 0006                            LDB,B4   6,B5
          1 0000F9  D844 0003                            LDR,R5   3,B4
          1 0000FB  5901 005C                            BEZ,R5   s:14173,PREL

PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:24   
      126    14151    3         IF INTCON.V.RUNLEVEL<%G_IL_HNDMIN#

  14151   1 0000FD  5D0C                                 CMV,R5   12
          1 0000FE  0201 0009                            BL       s:14154,PREL
          1 000100  5D3B                                 CMV,R5   59
          1 000101  0301 0006                            BG       s:14154,PREL
          1 000103  5801 0004                            BLZ,R5   s:14154,PREL
          1 000105  D956                                 CMR,R5   R6
          1 000106  0A81 000A                            BALE     s:14160,PREL

      127    14152    3           OR INTCON.V.RUNLEVEL>%G_IL_HNDMAX#
      128    14153    4           OR INTCON.V.RUNLEVEL>LEVEL THEN DO;

      129    14154    4            FPT.ERR=GHM$E$BADRUNLEVEL;

  14154   1 000108  8C80 0000 0004  00                   LDI      GHM$E$BADRUNLEVEL
          1 00010B  8D45 0003                            SDI      3,B5

      130    14155              /*E* ERROR: GHM-E$BADRUNLEVEL-E
      131    14156                   MESSAGE:M$INTCON RUNLEVEL must be between 12 and 60 and <=LEVEL.
      132    14157              */
      133    14158    4            ALTRETURN;

  14158   1 00010D  ECC7 000C                            LDB,B6   ERR+2,AUTO
          1 00010F  B806                                 LDR,R3   ,B6
          1 000110  C3B6                                 LNJ,B4   ,B6,R3

      134    14159    4            END;
      135    14160    3         ICON$=ADDR(G$INTCON(INTCON.V.RUNLEVEL));

  14160   1 000111  B855                                 LDR,R3   R5
          1 000112  BCC7 0007                            LDB,B3   INTCON$,AUTO
          1 000114  3004                                 SOL,R3   4
          1 000115  ABB3                                 LAB,B2   ,B3,R3
          1 000116  AFC7 000E                            STB,B2   ICON$,AUTO

      136    14161    3         IF ICON.ALLOCATED AND
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:25   

  14161   1 000118  89C2 000F                            CMZ      15,B2
          1 00011A  0881 000F                            BAGE     s:14163,PREL
          1 00011C  82C2 000F                            LB,'0400'X        15,B2
          1 00011E       0400
          1 00011F  0581 0044                            BBF      s:14171,PREL
          1 000121  9C80 0000 0000  xsym                 LDB,B1   G$MHJIT$
          1 000124  C2C2 000C                            LLH,R4   12,B2
          1 000126  C941 0351                            CMR,R4   849,B1
          1 000128  0981 003B                            BNE      s:14171,PREL

      137    14162    3           (NOT ICON.RUNONLY OR ICON.USER~=G$MHJIT.CUN) THEN GOTO BUSYRUN;
      138    14163    4         IF INTCON.V.RUNLEVEL~=INTCON.V.LEVEL AND NOT ICON.ALLOCATED THEN DO;

  14163   1 00012A  D944 0002                            CMR,R5   2,B4
          1 00012C  0901 0021                            BE       s:14171,PREL
          1 00012E  89C2 000F                            CMZ      15,B2
          1 000130  0801 001D                            BAL      s:14171,PREL

      139    14164    5            CALL GET_LEVEL WHENALTRETURN DO;

  14164   1 000132  E3C0 0081                            LNJ,B6   s:0,PREL
          1 000134       0003                            DC       s:14165,PREL
          1 000135  0F81 0005                            B        s:14167,PREL

      140    14165    5               ALTRETURN;

  14165   1 000137  ECC7 000C                            LDB,B6   ERR+2,AUTO
          1 000139  B806                                 LDR,R3   ,B6
          1 00013A  C3B6                                 LNJ,B4   ,B6,R3

      141    14166    5               END;
      142    14167    4            ICON.RUNONLY='1'B;

  14167   1 00013B  ECC7 000E                            LDB,B6   ICON$,AUTO
          1 00013D  8946 000F                            LBT,'0400'X       15,B6
          1 00013F       0400
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:26   

      143    14168    4            G$UHJIT.CNCTD_LVLS(INTCON.V.RUNLEVEL)='1'B;

  14168   1 000140  DCC7 0004                            LDB,B5   @FPT,AUTO
          1 000142  CCC5 0006                            LDB,B4   6,B5
          1 000144  B844 0003                            LDR,R3   3,B4
          1 000146  BC80 0000 0000  xsym                 LDB,B3   G$UHJIT$
          1 000149  ABC3 017F                            LAB,B2   383,B3
          1 00014B  8932                                 LBT      ,B2,R3

      144    14169    4            ICON.HHJIT=0;

  14169   1 00014C  8746 000B                            CL       11,B6

      145    14170    4            END;

      146    14171    3         IF INTCON.V.LEVEL=0 THEN RETURN;

  14171   1 00014E  ECC5 0006                            LDB,B6   6,B5
          1 000150  E846 0002                            LDR,R6   2,B6
          1 000152  6981 0005                            BNEZ,R6  s:14173,PREL

  14171   1 000154  ECC7 000C                            LDB,B6   ERR+2,AUTO
          1 000156  C3C6 0001                            LNJ,B4   1,B6

      147    14172    3         END;
      148    14173    2      ICON$=ADDR(G$INTCON(LEVEL));

  14173   1 000158  ECC7 0007                            LDB,B6   INTCON$,AUTO
          1 00015A  B847 0009                            LDR,R3   LEVEL,AUTO
          1 00015C  3004                                 SOL,R3   4
          1 00015D  CBB6                                 LAB,B4   ,B6,R3
          1 00015E  CFC7 000E                            STB,B4   ICON$,AUTO

      149    14174    3      IF ICON.ALLOCATED THEN DO;

  14174   1 000160  89C4 000F                            CMZ      15,B4
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:27   
          1 000162  0881 000A                            BAGE     s:14182,PREL

  14171   1                              BUSYRUN         null
      150    14175    3   BUSYRUN: ;
      151    14176    3         FPT.ERR=GHM$E$USEDLEVEL;

  14176   1 000164  8C80 0000 0002  00   BUSYRUN         LDI      GHM$E$USEDLEVEL
          1 000167  8D45 0003                            SDI      3,B5

      152    14177              /*E* ERROR: GHM-E$USEDLEVEL-E
      153    14178                   MESSAGE:M$INTCON can provide service to only one process per level.
      154    14179              */
      155    14180    3         ALTRETURN;

  14180   1 000169  ECC7 000C                            LDB,B6   ERR+2,AUTO
          1 00016B  B806                                 LDR,R3   ,B6
          1 00016C  C3B6                                 LNJ,B4   ,B6,R3

      156    14181    3         END;
      157    14182    3      CALL GET_LEVEL WHENALTRETURN DO;

  14182   1 00016D  E3C0 0046                            LNJ,B6   s:0,PREL
          1 00016F       0003                            DC       s:14183,PREL
          1 000170  0F81 0005                            B        s:14185,PREL

      158    14183    3         ALTRETURN;

  14183   1 000172  ECC7 000C                            LDB,B6   ERR+2,AUTO
          1 000174  B806                                 LDR,R3   ,B6
          1 000175  C3B6                                 LNJ,B4   ,B6,R3

      159    14184    3         END;
      160    14185    2      ICON.IENTRY=INTCON.V.IENTRY$;

  14185   1 000176  ECC7 0004                            LDB,B6   @FPT,AUTO
          1 000178  DCC6 0006                            LDB,B5   6,B6
          1 00017A  CC85                                 LDB,B4   ,B5
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:28   
          1 00017B  BCC7 000E                            LDB,B3   ICON$,AUTO
          1 00017D  CFC3 000D                            STB,B4   13,B3

      161    14186    2      IF INTCON.V.RUNLEVEL=0 THEN ICON.RUNLEVEL=LEVEL;

  14186   1 00017F  DCC6 0006                            LDB,B5   6,B6
          1 000181  E845 0003                            LDR,R6   3,B5
          1 000183  6981 0008                            BNEZ,R6  s:14187,PREL

  14186   1 000185  D847 0009                            LDR,R5   LEVEL,AUTO
          1 000187  DAC3 000C                            SRM,R5,'00FF'X    12,B3
          1 000189       00FF
          1 00018A  0F81 0004                            B        s:14188,PREL

      162    14187    2      ELSE ICON.RUNLEVEL=INTCON.V.RUNLEVEL;

  14187   1 00018C  EAC3 000C                            SRM,R6,'00FF'X    12,B3
  14187   1 00018E       00FF

      163    14188    2      ICON.PRIVILEGED=INTCON.V.PRIVILEGED;

  14188   1 00018F  DCC6 0006                            LDB,B5   6,B6
          1 000191  E845 0004                            LDR,R6   4,B5
          1 000193  6041                                 SOR,R6   1
          1 000194  EAC3 000F                            SRM,R6,'4000'X    15,B3
          1 000196       4000

      164    14189    2      ICON.DOMYIO=INTCON.V.DOMYIO;

  14189   1 000197  DCC6 0006                            LDB,B5   6,B6
          1 000199  E845 0004                            LDR,R6   4,B5
          1 00019B  6041                                 SOR,R6   1
          1 00019C  EAC3 000F                            SRM,R6,'2000'X    15,B3
          1 00019E       2000

      165    14190    2      ICON.HHJIT=HJITPAGE+BITBIN('8000'X);

PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:29   
  14190   1 00019F  E847 0006                            LDR,R6   HJITPAGE,AUTO
          1 0001A1  EA70 8000                            ADD,R6   -32768,IMO
          1 0001A3  EF43 000B                            STR,R6   11,B3

      166    14191    2      ICON.RUNONLY='0'B;

  14191   1 0001A5  8843 000F                            LBF,'0400'X       15,B3
  14191   1 0001A7       0400

      167    14192    2      G$UHJIT.CNCTD_LVLS(LEVEL)='1'B;

  14192   1 0001A8  DC80 0000 0000  xsym                 LDB,B5   G$UHJIT$
          1 0001AB  ABC5 017F                            LAB,B2   383,B5
          1 0001AD  B847 0009                            LDR,R3   LEVEL,AUTO
          1 0001AF  8932                                 LBT      ,B2,R3

      168    14193    2      RETURN;

  14193   1 0001B0  ECC7 000C                            LDB,B6   ERR+2,AUTO
          1 0001B2  C3C6 0001                            LNJ,B4   1,B6

      169    14194
      170    14195    2   GET_LEVEL: PROC ALTRET;

  14195   1 0001B4  EFC7 0010            GET_LEVEL       STB,B6   ICON$+2,AUTO

      171    14196
      172    14197    4      IF G$JIT.CURRLVLS=G$JIT.MAXLVLS THEN DO;

  14197   1 0001B6  DC80 0000 0000  xsym                 LDB,B5   G$JIT$
          1 0001B9  E845 009E                            LDR,R6   158,B5
          1 0001BB  E570 00FF                            AND,R6   255,IMO
          1 0001BD  D2C5 009E                            LLH,R5   158,B5
          1 0001BF  E955                                 CMR,R6   R5
          1 0001C0  0981 000C                            BNE      s:14204,PREL

      173    14198    4         FPT.ERR=GHM$E$NORES;
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:30   

  14198   1 0001C2  8C80 0000 000C  00                   LDI      GHM$E$NORES
          1 0001C5  CCC7 0004                            LDB,B4   @FPT,AUTO
          1 0001C7  8D44 0003                            SDI      3,B4

      174    14199              /*E* ERROR: GHM-E$NORES-E
      175    14200                   MESSAGE:Your limit of interrupt levels has been reached.
      176    14201              */
      177    14202    4         ALTRETURN;

  14202   1 0001C9  ECC7 0010                            LDB,B6   ICON$+2,AUTO
          1 0001CB  B806                                 LDR,R3   ,B6
          1 0001CC  C3B6                                 LNJ,B4   ,B6,R3

      178    14203    4         END;
      179    14204    3      G$JIT.CURRLVLS=G$JIT.CURRLVLS+1;

  14204   1 0001CD  C845 009E                            LDR,R4   158,B5
          1 0001CF  CA70 0001                            ADD,R4   1,IMO
          1 0001D1  CAC5 009E                            SRM,R4,'00FF'X    158,B5
          1 0001D3       00FF

      180    14205    3      IF G$JIT.CURRLVLS>G$JIT.PEAK_LVLS

  14205   1 0001D4  E845 009E                            LDR,R6   158,B5
          1 0001D6  E570 00FF                            AND,R6   255,IMO
          1 0001D8  E945 0035                            CMR,R6   53,B5
          1 0001DA  0381 0003                            BLE      s:14207,PREL

      181    14206    3      THEN G$JIT.PEAK_LVLS=G$JIT.CURRLVLS;

  14206   1 0001DC  EF45 0035                            STR,R6   53,B5

      182    14207    3      ICON.ALLOCATED='1'B;

  14207   1 0001DE  CCC7 000E                            LDB,B4   ICON$,AUTO
          1 0001E0  8944 000F                            LBT,'8000'X       15,B4
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:31   
          1 0001E2       8000

      183    14208    3      ICON.USER=G$MHJIT.CUN;

  14208   1 0001E3  EC80 0000 0000  xsym                 LDB,B6   G$MHJIT$
          1 0001E6  E846 0351                            LDR,R6   849,B6
          1 0001E8  E7C4 000C                            STH,R6   12,B4

      184    14209    3      RETURN;

  14209   1 0001EA  ECC7 0010                            LDB,B6   ICON$+2,AUTO
          1 0001EC  C3C6 0001                            LNJ,B4   1,B6

      185    14210    3   END GET_LEVEL;
      186    14211    2   END ALLOCATE_LEVEL;
      187    14212        %EJECT;
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:32   
      188    14213    1   GHM$INTRET: ENTRY(FPT) ALTRET;

  14213   1 0001EE  D380 0000 0000  xent GHM$INTRET      LNJ,B5   X6A_AUTO_1
          1 0001F1       001A 0001                       DC       26,1

      189    14214    2      IF G$UHJIT.DMN.ID~=%G_DMN_INT_SVC# THEN DO;

  14214   1 0001F3  EC80 0000 0000  xsym                 LDB,B6   G$UHJIT$
          1 0001F6  E846 007E                            LDR,R6   126,B6
          1 0001F8  6D02                                 CMV,R6   2
          1 0001F9  0901 0017                            BE       s:14221,PREL

      190    14215        /* Turn it into a M$TRTN if we're not interrupting. */
      191    14216    2         FPT.PTRS.PAR1$ = ADDR(NIL); /* NO FPT                                   */

  14216   1 0001FB  DB80 0000 0000                       LAB,B5   0
          1 0001FE  CCC7 0004                            LDB,B4   @FPT,AUTO
          1 000200  DFC4 0006                            STB,B5   6,B4

      192    14217    2         FPT.MCL.CODE = %G_MCL_TRTN#;

  14217   1 000202  E870 00CC                            LDR,R6   204,IMO
          1 000204  EA84                                 SRM,R6,'03FF'X    ,B4
          1 000205       03FF

      193    14218    2         CALL GUE$MCL (FPT);

  14218   1 000206  BBC7 0004                            LAB,B3   @FPT,AUTO
          1 000208  CBF0 0100                            LAB,B4   256,IMO
          1 00020A  E380 0000 0000  xent                 LNJ,B6   GUE$MCL
          1 00020D       0001                            DC       s:14219,PREL

      194    14219    2         RETURN;

  14219   1 00020E  C380 0000 0000  xent                 LNJ,B4   X6A_ARET

      195    14220    2         END;
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:33   
      196    14221    2      IF FPT.PTRS.PAR1$~=ADDR(NIL) THEN DO;

  14221   1 000211  DCC7 0004                            LDB,B5   @FPT,AUTO
          1 000213  8DC5 0006                            CMN      6,B5
          1 000215  0901 005A                            BE       s:14231,PREL

      197    14222    2         CALL KNH$SCAN(,ERR);

  14222   1 000217  CBC7 000A                            LAB,B4   ERR,AUTO
          1 000219  CFC7 0014                            STB,B4   ICON$+6,AUTO
          1 00021B  BB80 0000 0000                       LAB,B3   0
          1 00021E  BFC7 0012                            STB,B3   ICON$+4,AUTO
          1 000220  BBC7 0012                            LAB,B3   ICON$+4,AUTO
          1 000222  CBF0 0200                            LAB,B4   512,IMO
          1 000224  E380 0000 0000  xent                 LNJ,B6   KNH$SCAN
          1 000227       0001                            DC       s:14223,PREL

      198    14223    2         LEVEL = G$JIT.USR#;

  14223   1 000228  EC80 0000 0000  xsym                 LDB,B6   G$JIT$
          1 00022B  E846 0004                            LDR,R6   4,B6
          1 00022D  E570 00FF                            AND,R6   255,IMO
          1 00022F  EF47 0009                            STR,R6   LEVEL,AUTO

      199    14224    2         IF INTRET.V.EVENT~=0

  14224   1 000231  DCC7 0004                            LDB,B5   @FPT,AUTO
          1 000233  CCC5 0006                            LDB,B4   6,B5
          1 000235  D844 0001                            LDR,R5   1,B4
          1 000237  5901 001B                            BEZ,R5   s:14226,PREL

      200    14225    2         THEN CALL GHS$EVENT(LEVEL,%GH_USRDMN#,/*ECCSUBC*/0,INTRET.V.EVENT);

  14225   1 000239  BBF0 0000                            LAB,B3   0,IMO
          1 00023B  ABF0 0000                            LAB,B2   0,IMO
          1 00023D  9BC4 0001                            LAB,B1   1,B4
          1 00023F  9FC7 0018                            STB,B1   ICON$+10,AUTO
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:34   
          1 000241  AFC7 0016                            STB,B2   ICON$+8,AUTO
          1 000243  BFC7 0014                            STB,B3   ICON$+6,AUTO
          1 000245  CBC7 0009                            LAB,B4   LEVEL,AUTO
          1 000247  CFC7 0012                            STB,B4   ICON$+4,AUTO
          1 000249  BBC7 0012                            LAB,B3   ICON$+4,AUTO
          1 00024B  CBF0 0400                            LAB,B4   1024,IMO
          1 00024D  E380 0000 0000  xent                 LNJ,B6   GHS$EVENT
          1 000250       0001                            DC       s:14225+24,PREL
          1 000251  0F81 0015                            B        s:14227,PREL

      201    14226    2         ELSE IF INTRET.V.WAKEME THEN CALL GHS$RUE(%GH_EVWU,LEVEL);

  14226   1 000253  89C4 0002                            CMZ      2,B4
          1 000255  0881 0011                            BAGE     s:14227,PREL

  14226   1 000257  BBF0 0002                            LAB,B3   2,IMO
          1 000259  ABC7 0009                            LAB,B2   LEVEL,AUTO
          1 00025B  AFC7 0014                            STB,B2   ICON$+6,AUTO
          1 00025D  BFC7 0012                            STB,B3   ICON$+4,AUTO
          1 00025F  BBC7 0012                            LAB,B3   ICON$+4,AUTO
          1 000261  CBF0 0200                            LAB,B4   512,IMO
          1 000263  E380 0000 0000  xent                 LNJ,B6   GHS$RUE
          1 000266       0001                            DC       s:14227,PREL

      202    14227    3         IF INTRET.V.CHECKME THEN DO;

  14227   1 000267  ECC7 0004                            LDB,B6   @FPT,AUTO
          1 000269  DCC6 0006                            LDB,B5   6,B6
          1 00026B  82C5 0002                            LB,'4000'X        2,B5
          1 00026D       4000
          1 00026E  0581 0001                            BBF      s:14231,PREL

      203    14228        /*N* PUT IN THE CODE */
      204    14229    3            END;

      205    14230    2         END;

PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:35   
      206    14231    1      CALL GHI$CIH_CLNUP; /* DOESN'T RETURN                                      */

  14231   1 000270  CBF0 0000                            LAB,B4   0,IMO
          1 000272  E380 0000 0000  xent                 LNJ,B6   GHI$CIH_CLNUP
          1 000275       0001                            DC       s:14231+6,PREL
          1 000276  0F81 0006                            B        s:14234,PREL

      207    14232        %EJECT;
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:36   
      208    14233    1   GHM$INTREL: ENTRY(FPT) ALTRET;

  14233   1 000278  D380 0000 0000  xent GHM$INTREL      LNJ,B5   X6A_AUTO_1
          1 00027B       001A 0001                       DC       26,1

      209    14234    1      LEVEL=INTREL.V.LEVEL;

  14234   1 00027D  ECC7 0004                            LDB,B6   @FPT,AUTO
          1 00027F  DCC6 0006                            LDB,B5   6,B6
          1 000281  E805                                 LDR,R6   ,B5
          1 000282  EF47 0009                            STR,R6   LEVEL,AUTO

      210    14235    1      IF LEVEL=0 THEN GOTO RELALL;

  14235   1 000284  6901 002B                            BEZ,R6   s:14240,PREL

      211    14236    2      IF LEVEL<%G_IL_HNDMIN# OR LEVEL>%G_IL_HNDMAX# THEN DO;

  14236   1 000286  6D0C                                 CMV,R6   12
          1 000287  0801 0004                            BAL      s:14237,PREL
          1 000289  6D3B                                 CMV,R6   59
          1 00028A  0A81 0009                            BALE     s:14240,PREL

      212    14237    2         FPT.ERR=GHM$E$BADLEVEL;

  14237   1 00028C  8C80 0000 0000  00                   LDI      GHM$E$BADLEVEL
          1 00028F  8D46 0003                            SDI      3,B6

      213    14238    2         ALTRETURN;

  14238   1 000291  C380 0000 0000  xent                 LNJ,B4   X6A_AALT

      214    14239    2         END;
      215    14240    2      IF NOT G$UHJIT.CNCTD_LVLS(LEVEL) THEN DO;

  14240   1 000294  DC80 0000 0000  xsym                 LDB,B5   G$UHJIT$
          1 000297  CBC5 017F                            LAB,B4   383,B5
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:37   
          1 000299  B856                                 LDR,R3   R6
          1 00029A  82B4                                 LB       ,B4,R3
          1 00029B  0501 0009                            BBT      s:14247,PREL

      216    14241    2         FPT.ERR=GHM$E$NOTUR;

  14241   1 00029D  8C80 0000 000E  00                   LDI      GHM$E$NOTUR
          1 0002A0  8D46 0003                            SDI      3,B6

      217    14242              /*E* ERROR: GHM-E$NOTUR-E
      218    14243                   MESSAGE:M$INTREL called for LEVEL not M$INTCONned.
      219    14244              */
      220    14245    2         ALTRETURN;

  14245   1 0002A2  C380 0000 0000  xent                 LNJ,B4   X6A_AALT

      221    14246    2         END;
      222    14247    1      CALL RELEASE_LEVEL;

  14247   1 0002A5  E3C0 0023                            LNJ,B6   s:0,PREL
          1 0002A7       0001                            DC       s:14248,PREL

      223    14248    1      RETURN;

  14248   1 0002A8  C380 0000 0000  xent                 LNJ,B4   X6A_ARET

      224    14249
      225    14250    1   GHM$INTRELALL: ENTRY ALTRET;

  14250   1 0002AB  D380 0000 0000  xent GHM$INTRELALL   LNJ,B5   X6A_AUTO_1
          1 0002AE       001A 0001                       DC       26,1

  14240   1                              RELALL          null
      226    14251    1   RELALL:;
      227    14252    2      DO LEVEL=%G_IL_HNDMIN# TO %G_IL_HNDMAX#;

  14252   1 0002B0  6C0C                 RELALL          LDV,R6   12
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:38   
          1 0002B1  EF47 0009                            STR,R6   LEVEL,AUTO

      228    14253    2         IF G$UHJIT.CNCTD_LVLS(LEVEL) THEN CALL RELEASE_LEVEL;

  14253   1 0002B3  EC80 0000 0000  xsym                 LDB,B6   G$UHJIT$
          1 0002B6  DBC6 017F                            LAB,B5   383,B6
          1 0002B8  B847 0009                            LDR,R3   LEVEL,AUTO
          1 0002BA  82B5                                 LB       ,B5,R3
          1 0002BB  0581 0004                            BBF      s:14254,PREL

  14253   1 0002BD  E3C0 000B                            LNJ,B6   s:0,PREL
          1 0002BF       0001                            DC       s:14254,PREL

      229    14254    2         END;

  14254   1 0002C0  8AC7 0009                            INC      LEVEL,AUTO
          1 0002C2  E847 0009                            LDR,R6   LEVEL,AUTO
          1 0002C4  6D3B                                 CMV,R6   59
          1 0002C5  0AEE                                 BALE     s:14253,SPREL

      230    14255    1      RETURN;

  14255   1 0002C6  C380 0000 0000  xent                 LNJ,B4   X6A_ARET

      231    14256        %EJECT;
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:39   
      232    14257    1   RELEASE_LEVEL: PROC;

  14257   1 0002C9  EFC7 000C            RELEASE_LEVEL   STB,B6   ERR+2,AUTO

      233    14258    2   DCL ICON$ PTR;
      234    14259        %G$INTCON (ARRAYED=NO, FPTN=ICON, STCLASS="BASED(ICON$)");
      235    14394
      236    14395    2      ICON$=ADDR(G$MHJIT.INTCON(LEVEL-%G_IL_HNDMIN#));

  14395   1 0002CB  DC80 0000 0000  xsym                 LDB,B5   G$MHJIT$
          1 0002CE  B847 0009                            LDR,R3   LEVEL,AUTO
          1 0002D0  3004                                 SOL,R3   4
          1 0002D1  BA70 029C                            ADD,R3   668,IMO
          1 0002D3  CBB5                                 LAB,B4   ,B5,R3
          1 0002D4  CFC7 000E                            STB,B4   ICON$,AUTO

      237    14396    2      IF NOT ICON.ALLOCATED OR ICON.USER~=G$MHJIT.CUN

  14396   1 0002D6  89C4 000F                            CMZ      15,B4
          1 0002D8  0881 0007                            BAGE     s:14397,PREL
          1 0002DA  E2C4 000C                            LLH,R6   12,B4
          1 0002DC  E945 0351                            CMR,R6   849,B5
          1 0002DE  0901 000A                            BE       s:14398,PREL

      238    14397    2      THEN CALL SCREECH (GHM$E$NOTUR);

  14397   1 0002E0  BB80 0000 0000  02                   LAB,B3   0
          1 0002E3  CBF0 0100                            LAB,B4   256,IMO
          1 0002E5  E380 0000 0000  xent                 LNJ,B6   SCREECH
          1 0002E8       0001                            DC       s:14398,PREL

      239    14398    2      G$JIT.CURRLVLS=G$JIT.CURRLVLS-1;

  14398   1 0002E9  EC80 0000 0000  xsym                 LDB,B6   G$JIT$
          1 0002EC  E846 009E                            LDR,R6   158,B6
          1 0002EE  EA70 00FF                            ADD,R6   255,IMO
          1 0002F0  EAC6 009E                            SRM,R6,'00FF'X    158,B6
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:40   
          1 0002F2       00FF

      240    14399    2      ICON.ALLOCATED='0'B;

  14399   1 0002F3  DCC7 000E                            LDB,B5   ICON$,AUTO
          1 0002F5  8845 000F                            LBF,'8000'X       15,B5
          1 0002F7       8000

      241    14400    2      G$UHJIT.CNCTD_LVLS(LEVEL)='0'B;

  14400   1 0002F8  CC80 0000 0000  xsym                 LDB,B4   G$UHJIT$
          1 0002FB  BBC4 017F                            LAB,B3   383,B4
          1 0002FD  B847 0009                            LDR,R3   LEVEL,AUTO
          1 0002FF  8833                                 LBF      ,B3,R3

      242    14401    3      IF ICON.HHJIT~=0 THEN DO;

  14401   1 000300  E845 000B                            LDR,R6   11,B5
          1 000302  6901 001C                            BEZ,R6   s:14407,PREL

      243    14402    3         HJITPAGE=MOD(ICON.HHJIT,BITBIN('8000'X));

  14402   1 000304  E570 7FFF                            AND,R6   32767,IMO
          1 000306  EF47 0006                            STR,R6   HJITPAGE,AUTO

      244    14403    3         ICON.HHJIT=0;

  14403   1 000308  8745 000B                            CL       11,B5

      245    14404    3         CALL GMA$RELPS(HJITPAGE,1);

  14404   1 00030A  EBF0 0001                            LAB,B6   1,IMO
          1 00030C  EFC7 0014                            STB,B6   ICON$+6,AUTO
          1 00030E  CBC7 0006                            LAB,B4   HJITPAGE,AUTO
          1 000310  CFC7 0012                            STB,B4   ICON$+4,AUTO
          1 000312  BBC7 0012                            LAB,B3   ICON$+4,AUTO
          1 000314  CBF0 0200                            LAB,B4   512,IMO
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:41   
          1 000316  E380 0000 0000  xent                 LNJ,B6   GMA$RELPS
          1 000319       0001                            DC       s:14405,PREL

      246    14405    3         G$JIT.PSEUDOPGS = G$JIT.PSEUDOPGS-1;

  14405   1 00031A  EC80 0000 0000  xsym                 LDB,B6   G$JIT$
          1 00031D  88C6 008A                            DEC      138,B6

      247    14406    3         END;

      248    14407    2      RETURN;

  14407   1 00031F  ECC7 000C                            LDB,B6   ERR+2,AUTO
          1 000321  C3C6 0001                            LNJ,B4   1,B6

      249    14408    2   END RELEASE_LEVEL;
      250    14409        %EJECT;
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:42   
      251    14410    1   GHM$SYS: ENTRY(FPT) ALTRET;

  14410   1 000323  D380 0000 0000  xent GHM$SYS         LNJ,B5   X6A_AUTO_1
          1 000326       001A 0001                       DC       26,1

      252    14411    2      IF NOT G$JIT.PRIV.PRC.MSYS AND NOT G$JIT.PRIV.AUTH.MSYS THEN DO;

  14411   1 000328  EC80 0000 0000  xsym                 LDB,B6   G$JIT$
          1 00032B  82C6 0093                            LB,'0008'X        147,B6
          1 00032D       0008
          1 00032E  0501 0010                            BBT      s:14415,PREL
          1 000330  82C6 0091                            LB,'0008'X        145,B6
          1 000332       0008
          1 000333  0501 000B                            BBT      s:14415,PREL

      253    14412    2         FPT.ERR=GHM$E$NO_MSYS;

  14412   1 000335  8C80 0000 0008  00                   LDI      GHM$E$NO_MSYS
          1 000338  DCC7 0004                            LDB,B5   @FPT,AUTO
          1 00033A  8D45 0003                            SDI      3,B5

      254    14413    2         ALTRETURN;

  14413   1 00033C  C380 0000 0000  xent                 LNJ,B4   X6A_AALT

      255    14414    2         END;
      256    14415    1      G$UHJIT.TSA_USR.S.RING=%G_R_MON#;

  14415   1 00033F  E870 4000                            LDR,R6   16384,IMO
          1 000341  DC80 0000 0000  xsym                 LDB,B5   G$UHJIT$
          1 000344  EAC5 00C2                            SRM,R6,'6000'X    194,B5
          1 000346       6000

      257    14416    1      RETURN;

  14416   1 000347  C380 0000 0000  xent                 LNJ,B4   X6A_ARET
      258    14417    1   END GHM$MCLS;
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:43   

PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:44   
--  Include file information  --

   M_ERRORS_C.:E05TOU  is referenced.
   FR_ERRORS_C.:E05TOU  is referenced.
   HF_ERRORS_C.:E05TOU  is referenced.
   GU_MACROS_M.:E05TOU  is referenced.
   GH_SCHD_E.:E05TOU  is referenced.
   G_JIT_M.:E05TOU  is referenced.
   G_HJIT_M.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   KI_CP6.:E05TOU  was found in the system file and is never referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure GHM$MCLS.
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:45   

 **** Variables and constants ****

  ****  Section 000 RoData GHM$MCLS

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(32)    r     1 GHM$E$BADLEVEL             4-0-0/w STRC(32)    r     1 GHM$E$BADRUNLEVEL
     6-0-0/w STRC(32)    r     1 GHM$E$MONPP                C-0-0/w STRC(32)    r     1 GHM$E$NORES
     E-0-0/w STRC(32)    r     1 GHM$E$NOTUR                A-0-0/w STRC(32)    r     1 GHM$E$NO_INTCON
     8-0-0/w STRC(32)    r     1 GHM$E$NO_MSYS              2-0-0/w STRC(32)    r     1 GHM$E$USEDLEVEL

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @FPT                       A-0-0/b BIT (32)    r     1 ERR
    *0-0-0/w STRC(1280)  r     1 FPT                        6-0-0/w UBIN(16)    r     1 HJITPAGE
     E-0-0/w PTR         r     1 ICON$                      E-0-0/w PTR         r     1 ICON$
     7-0-0/w PTR         r     1 INTCON$                    9-0-0/w SBIN(16)    r     1 LEVEL

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 G$JIT$                     0-0-0/w PTR         r     1 G$MHJIT$
     0-0-0/w PTR         r     1 G$UHJIT$                   0-0-0/w PTR         r     1 G$WINDOW1$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(4096)  r     1 G$HHJIT
     0-0-0/w STRC(256)   r     1 G$INTCON(0:48)
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:46   
     0-0-0/w STRC(5616)  r     1 G$JIT                      0-0-0/w STRC(27232) r     1 G$MHJIT
     0-0-0/w STRC(6480)  r     1 G$UHJIT                    0-0-0/w STRC(256)   r     1 ICON
     0-0-0/w STRC(256)   r     1 ICON                       0-0-0/w STRC(96)    r     1 INTCON
     0-0-0/w STRC(16)    r     1 INTREL                     0-0-0/w STRC(64)    r     1 INTRET


   Procedure GHM$MCLS requires 842 words for executable code.
   Procedure GHM$MCLS requires 26 words of local(AUTO) storage.

    No errors detected in file GHM$MCLS.:E05TSI    .
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:47   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:48   
          MINI XREF LISTING

ALLOCATE_LEVEL
     14006**PROC    13973--CALL    13994--CALL
BUSYRUN IN PROCEDURE ALLOCATE_LEVEL
     14171**LABEL   14162--GOTO
ERR
     13582**DCL     14222<>CALL
FPT
       862**DCL         8--PROC    13961--ENTRY   14213--ENTRY   14218<>CALL    14233--ENTRY   14410--ENTRY
FPT.BND
       922**DCL       923--REDEF
FPT.DESC
       924**DCL       925--REDEF
FPT.ERR
       888**DCL     13964<<ASSIGN  13978<<ASSIGN  13985<<ASSIGN  14144<<ASSIGN  14154<<ASSIGN  14176<<ASSIGN
     14198<<ASSIGN  14237<<ASSIGN  14241<<ASSIGN  14412<<ASSIGN
FPT.MCL.CODE
       869**DCL       869--REDEF   14217<<ASSIGN
FPT.PTRS
       918**DCL       919--REDEF     921--REDEF     921--REDEF     921--REDEF
FPT.PTRS.PAR1$
       918**DCL       950--IMP-PTR   971--IMP-PTR   991--IMP-PTR 13971>>IF      13972>>ASSIGN  13976>>IF
     13993>>ASSIGN  14150>>IF      14151>>IF      14151>>IF      14151>>IF      14160>>ASSIGN  14163>>IF
     14163>>IF      14168>>ASSIGN  14171>>IF      14185>>ASSIGN  14186>>IF      14187>>ASSIGN  14188>>ASSIGN
     14189>>ASSIGN  14216<<ASSIGN  14221>>IF      14224>>IF      14225>>CALL    14226>>IF      14227>>IF
     14234>>ASSIGN
G$HHJIT
      1146**DCL     13997<<ASSIGN  13997>>ASSIGN
G$HHJIT.ASDT_MCL.UHJIT
      1983**DCL     14003<<ASSIGN
G$HHJIT.ASDT_USR.UHJIT
      1289**DCL     14003>>ASSIGN
G$HHJIT.ASDT_USR.UHJIT.BASE
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:49   
      1291**DCL     14001<<ASSIGN
G$HHJIT.ASDT_USR.UHJIT.SIZE
      1293**DCL     14002<<ASSIGN
G$HHJIT.ISA_HND
      2569**DCL      2864--REDEF
G$HHJIT.ISA_HND.ISM2.NATSAP_SEL
      2638**DCL     13998<<ASSIGN
G$HHJIT.ISA_HND.P$$
      2644**DCL      2644--REDEF
G$HHJIT.ISA_HND.TSAP$
      2571**DCL     13999<<ASSIGN
G$HHJIT.TSA_HND.ISA.P$$
      3053**DCL      3053--REDEF
G$HHJIT.TSA_HND.P$$
      2924**DCL      2924--REDEF    2925--REDEF
G$HHJIT.TSA_HND.TSAL$
      2897**DCL     14000<<ASSIGN
G$INTCON
      1045**DCL     14160--ASSIGN  14173--ASSIGN
G$INTCON.HHJIT
      1126**DCL      1126--REDEF
G$INTCON.P$$
      1099**DCL      1099--REDEF
G$JIT.CURRLVLS
     13472**DCL     14197>>IF      14204<<ASSIGN  14204>>ASSIGN  14205>>IF      14206>>ASSIGN  14398<<ASSIGN
     14398>>ASSIGN
G$JIT.ERRLOG
     13468**DCL     13471--REDEF
G$JIT.JSUNIT
     13207**DCL     13208--REDEF
G$JIT.MAXLVLS
     13472**DCL     14197>>IF
G$JIT.MCLS
     13206**DCL     13206--REDEF
G$JIT.PEAK_LVLS
     13205**DCL     14205>>IF      14206<<ASSIGN
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:50   
G$JIT.PRIV.ACTIVE.INTCON
     13345**DCL     13963>>IF
G$JIT.PRIV.AUTH.MSYS
     13380**DCL     13976>>IF      14411>>IF
G$JIT.PRIV.PRC.MSYS
     13413**DCL     13976>>IF      14411>>IF
G$JIT.PSEUDOPGS
     13317**DCL     13992<<ASSIGN  13992>>ASSIGN  14405<<ASSIGN  14405>>ASSIGN
G$JIT.TMRZ
     13475**DCL     13476--REDEF
G$JIT.USER_EXTIME
     13199**DCL     13200--REDEF
G$JIT.USER_MEMTIME
     13202**DCL     13202--REDEF
G$JIT.USER_SVTIME
     13201**DCL     13201--REDEF
G$JIT.USR#
     13196**DCL     14223>>ASSIGN
G$JIT$
     13540**DCL     13138--IMP-PTR 13963>>IF      13976>>IF      13976>>IF      13992>>ASSIGN  13992>>ASSIGN
     14197>>IF      14197>>IF      14204>>ASSIGN  14204>>ASSIGN  14205>>IF      14205>>IF      14206>>ASSIGN
     14206>>ASSIGN  14223>>ASSIGN  14398>>ASSIGN  14398>>ASSIGN  14405>>ASSIGN  14405>>ASSIGN  14411>>IF
     14411>>IF
G$MHJIT.CUN
      9621**DCL     13995<>CALL    14161>>IF      14208>>ASSIGN  14396>>IF
G$MHJIT.INTCON
      9676**DCL     13970--ASSIGN  14395--ASSIGN
G$MHJIT.INTCON.HHJIT
      9755**DCL      9755--REDEF
G$MHJIT.INTCON.P$$
      9728**DCL      9728--REDEF
G$MHJIT.ISA_BIGFOOT.P$$
      6673**DCL      6673--REDEF
G$MHJIT.ISA_DBINH.P$$
      7887**DCL      7887--REDEF
G$MHJIT.ISA_IDLE.P$$
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:51   
      4768**DCL      4768--REDEF
G$MHJIT.ISA_LVL10.P$$
      8190**DCL      8190--REDEF
G$MHJIT.ISA_LVL11.P$$
      8493**DCL      8493--REDEF
G$MHJIT.ISA_LVL12.P$$
      8796**DCL      8796--REDEF
G$MHJIT.ISA_LVL5.P$$
      6976**DCL      6976--REDEF
G$MHJIT.ISA_OV.P$$
      6370**DCL      6370--REDEF
G$MHJIT.ISA_PFS.P$$
      6041**DCL      6041--REDEF
G$MHJIT.ISA_RT_CLOCK.P$$
      9403**DCL      9403--REDEF
G$MHJIT.ISA_SATYR_RCV.P$$
      7280**DCL      7280--REDEF
G$MHJIT.ISA_SATYR_TRN.P$$
      7584**DCL      7584--REDEF
G$MHJIT.ISA_SCHD.P$$
      9099**DCL      9099--REDEF
G$MHJIT.ISA_WDOG.P$$
      6149**DCL      6149--REDEF
G$MHJIT.TSA_DB.ISA.P$$
      5371**DCL      5371--REDEF
G$MHJIT.TSA_DB.P$$
      5242**DCL      5242--REDEF    5243--REDEF
G$MHJIT.TSA_HND
      9790**DCL     14000--ASSIGN
G$MHJIT.TSA_HND.ISA.P$$
      9949**DCL      9949--REDEF
G$MHJIT.TSA_HND.P$$
      9820**DCL      9820--REDEF    9821--REDEF
G$MHJIT.TSA_MON.ISA.P$$
      4983**DCL      4983--REDEF
G$MHJIT.TSA_MON.P$$
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:52   
      4854**DCL      4854--REDEF    4855--REDEF
G$MHJIT.TSA_OV.ISA.P$$
      5759**DCL      5759--REDEF
G$MHJIT.TSA_OV.P$$
      5630**DCL      5630--REDEF    5631--REDEF
G$MHJIT$
     13538**DCL      3293--IMP-PTR 13970>>ASSIGN  13995>>CALL    14000>>ASSIGN  14161>>IF      14208>>ASSIGN
     14395>>ASSIGN  14396>>IF
G$UHJIT.CNCTD_LVLS
     13121**DCL     14168<<ASSIGN  14192<<ASSIGN  14240>>IF      14253>>IF      14400<<ASSIGN
G$UHJIT.DMN.ID
     11885**DCL     14214>>IF
G$UHJIT.ISA_USR
     11590**DCL     11885--REDEF
G$UHJIT.ISA_USR.P$$
     11665**DCL     11665--REDEF
G$UHJIT.TSA_CP.ISA.P$$
     12872**DCL     12872--REDEF
G$UHJIT.TSA_CP.P$$
     12743**DCL     12743--REDEF   12744--REDEF
G$UHJIT.TSA_DB.ISA.P$$
     12484**DCL     12484--REDEF
G$UHJIT.TSA_DB.P$$
     12355**DCL     12355--REDEF   12356--REDEF
G$UHJIT.TSA_RTT.P$$
     13118**DCL     13118--REDEF   13119--REDEF
G$UHJIT.TSA_USR.ISA.P$$
     12074**DCL     12074--REDEF
G$UHJIT.TSA_USR.P$$
     11945**DCL     11945--REDEF   11946--REDEF
G$UHJIT.TSA_USR.S.RING
     11967**DCL     14415<<ASSIGN
G$UHJIT$
     13539**DCL     10167--IMP-PTR 13997>>ASSIGN  14168>>ASSIGN  14192>>ASSIGN  14214>>IF      14240>>IF
     14253>>IF      14400>>ASSIGN  14415>>ASSIGN
G$WINDOW1$
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:53   
     13541**DCL      1146--IMP-PTR 13997>>ASSIGN  13998>>ASSIGN  13999>>ASSIGN  14000>>ASSIGN  14001>>ASSIGN
     14002>>ASSIGN  14003>>ASSIGN  14003>>ASSIGN
GET_LEVEL IN PROCEDURE ALLOCATE_LEVEL
     14195**PROC    14164--CALL    14182--CALL
GHI$CIH_CLNUP
     13542**DCL-ENT 14231--CALL
GHM$E$BADLEVEL
     13599**DCL     14144>>ASSIGN  14237>>ASSIGN
GHM$E$BADRUNLEVEL
     13693**DCL     14154>>ASSIGN
GHM$E$MONPP
     13740**DCL     13985>>ASSIGN
GHM$E$NORES
     13881**DCL     14198>>ASSIGN
GHM$E$NOTUR
     13928**DCL     14241>>ASSIGN  14397<>CALL
GHM$E$NO_INTCON
     13834**DCL     13964>>ASSIGN
GHM$E$NO_MSYS
     13787**DCL     13978>>ASSIGN  14412>>ASSIGN
GHM$E$USEDLEVEL
     13646**DCL     14176>>ASSIGN
GHS$EVENT
     13544**DCL-ENT 14225--CALL
GHS$RUE
     13543**DCL-ENT 14226--CALL
GMA$GETPS
     13545**DCL-ENT 13984--CALL
GMA$MAP
     13548**DCL-ENT 13996--CALL
GMA$PS2USR
     13546**DCL-ENT 13995--CALL
GMA$RELPS
     13547**DCL-ENT 13989--CALL    14404--CALL
GUE$MCL
     13549**DCL-ENT 14218--CALL
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:54   
HJITPAGE
     13578**DCL     13962<<ASSIGN  13984<>CALL    13989>>IF      13989<>CALL    13995<>CALL    13996<>CALL
     14001>>ASSIGN  14190>>ASSIGN  14402<<ASSIGN  14404<>CALL
ICON.ALLOCATED IN PROCEDURE ALLOCATE_LEVEL
     14139**DCL     14161>>IF      14163>>IF      14174>>IF      14207<<ASSIGN
ICON.DOMYIO IN PROCEDURE ALLOCATE_LEVEL
     14139**DCL     14189<<ASSIGN
ICON.HHJIT IN PROCEDURE ALLOCATE_LEVEL
     14137**DCL     14137--REDEF   14169<<ASSIGN  14190<<ASSIGN
ICON.IENTRY IN PROCEDURE ALLOCATE_LEVEL
     14138**DCL     14185<<ASSIGN
ICON.P$$ IN PROCEDURE ALLOCATE_LEVEL
     14110**DCL     14110--REDEF
ICON.PRIVILEGED IN PROCEDURE ALLOCATE_LEVEL
     14139**DCL     14188<<ASSIGN
ICON.RUNLEVEL IN PROCEDURE ALLOCATE_LEVEL
     14138**DCL     14186<<ASSIGN  14187<<ASSIGN
ICON.RUNONLY IN PROCEDURE ALLOCATE_LEVEL
     14140**DCL     14161>>IF      14167<<ASSIGN  14191<<ASSIGN
ICON.USER IN PROCEDURE ALLOCATE_LEVEL
     14138**DCL     14161>>IF      14208<<ASSIGN
ICON.ALLOCATED IN PROCEDURE RELEASE_LEVEL
     14390**DCL     14396>>IF      14399<<ASSIGN
ICON.HHJIT IN PROCEDURE RELEASE_LEVEL
     14388**DCL     14388--REDEF   14401>>IF      14402>>ASSIGN  14403<<ASSIGN
ICON.P$$ IN PROCEDURE RELEASE_LEVEL
     14361**DCL     14361--REDEF
ICON.USER IN PROCEDURE RELEASE_LEVEL
     14389**DCL     14396>>IF
ICON$ IN PROCEDURE ALLOCATE_LEVEL
     14007**DCL     14056--IMP-PTR 14160<<ASSIGN  14161>>IF      14161>>IF      14161>>IF      14163>>IF
     14167>>ASSIGN  14169>>ASSIGN  14173<<ASSIGN  14174>>IF      14185>>ASSIGN  14186>>ASSIGN  14187>>ASSIGN
     14188>>ASSIGN  14189>>ASSIGN  14190>>ASSIGN  14191>>ASSIGN  14207>>ASSIGN  14208>>ASSIGN
ICON$ IN PROCEDURE RELEASE_LEVEL
     14258**DCL     14307--IMP-PTR 14395<<ASSIGN  14396>>IF      14396>>IF      14399>>ASSIGN  14401>>IF
     14402>>ASSIGN  14403>>ASSIGN
PL6.E3A0      #001=GHM$MCLS File=GHM$MCLS.:E05TSI                                TUE 07/29/97 21:34 Page:55   
INTCON.V.DOMYIO
       955**DCL     14189>>ASSIGN
INTCON.V.IENTRY$
       954**DCL     14185>>ASSIGN
INTCON.V.LEVEL
       954**DCL     13971>>IF      13993>>ASSIGN  14163>>IF      14171>>IF
INTCON.V.PRIVILEGED
       955**DCL     13976>>IF      14188>>ASSIGN
INTCON.V.RUNLEVEL
       954**DCL     13972>>ASSIGN  14150>>IF      14151>>IF      14151>>IF      14151>>IF      14160>>ASSIGN
     14163>>IF      14168>>ASSIGN  14186>>IF      14187>>ASSIGN
INTCON$
     13579**DCL      1045--IMP-PTR 13580--REDEF   13970<<ASSIGN  14160>>ASSIGN  14173>>ASSIGN
INTREL.V.LEVEL
       995**DCL     14234>>ASSIGN
INTRET.V.CHECKME
       975**DCL     14227>>IF
INTRET.V.EVENT
       975**DCL     14224>>IF      14225<>CALL
INTRET.V.WAKEME
       975**DCL     14226>>IF
KNH$SCAN
     13576**DCL-ENT 14222--CALL
LEVEL
     13581**DCL     13972<<ASSIGN  13993<<ASSIGN  14143>>IF      14143>>IF      14151>>IF      14173>>ASSIGN
     14186>>ASSIGN  14192>>ASSIGN  14223<<ASSIGN  14225<>CALL    14226<>CALL    14234<<ASSIGN  14235>>IF
     14236>>IF      14236>>IF      14240>>IF      14252<<DOINDEX 14253>>IF      14395>>ASSIGN  14400>>ASSIGN
RELALL
     14240**LABEL   14235--GOTO
RELEASE_LEVEL
     14257**PROC    14247--CALL    14253--CALL
RETALT
     13989**LABEL   13973--CALLALT 13994--CALLALT
SCREECH
     13577**DCL-ENT 14397--CALL
