VERSION E05

PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:1    
        1        1        /*M*     SSV$EVENT:  PROCESS EVENT EXCEPTIONAL CONDITIONS             */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*  AND,DTI=3   */
        8        8        /*                                                                    */
        9        9        SSV$EVENT: PROC(USR,DMAIN,ECCSC,EVID,ERRC,ECCI$,EPTR$);
       10       10        /*                                                                    */
       11       11    1   DCL   USR UBIN BYTE CALIGNED;           /* USER NUMBER                        */
       12       12    1   DCL   DMAIN UBIN(36);                   /* WSR# FROM EVENT RECEIVERS ISR      */
       13       13    1   DCL   ECCSC UBIN(36);                   /* ECC SUBCODE                        */
       14       14    1   DCL   EVID UBIN(36);                    /* EVENT IDENTIFIER SUPPLIED BY USER*/
       15       15    1   DCL   ERRC BIT(36) ALIGNED;             /* ERROR CODE - JIT.ERROR             */
       16       16    1   DCL   ECCI$ PTR;                        /* CONDITION SPECIFIC INFORMATION*/
       17       17    1   DCL   EPTR$ EPTR;                       /* POINTER TO CALLER'S EVENT COMP-*/
       18       18                                                /* LETION PROCEDURE                   */
       19       19        /*                                                                    */
       20       20        /*    SSV$EVENT IS CALLED TO OBTAIN A DO LIST ENTRY, FILL IT WITH     */
       21       21        /*    THE DATA SUPPLIED THROUGH THE PARAMETERS.  LATER, THE           */
       22       22        /*    SCHEDULER WILL CALL THE SPECIFIED EVENT COMPLETION PROCEDURE    */
       23       23        /*     AND THEN MOVE THE INFORMATION FROM THE DO LIST ENTRY TO THE    */
       24       24        /*    USER ECC ENVIRONMENT IN PREPARATION FOR RETURNING TO THE USER   */
       25       25        /*    EVENT HANDLER.  AN ALTRET FROM THE EVENT COMPLETION PROCEDURE   */
       26       26        /*    TELLS THE SCHEDULER TO NOT INVOKE THE EVENT HANDLER AND TO      */
       27       27        /*    DISCARD THE DO LIST ENTRY.                                      */
       28       28        %INCLUDE B$USER;
       29      244        %B$USERREFS;
       30      248        %INCLUDE HF_LOCK_C;
       31      262        %INCLUDE SS_SCHED_C;
       32      495        %INCLUDE P_PMDAT_R;
       33      803    1   DCL   S_DL$_BYP$ PTR SYMREF READONLY;   /* EMPTY DO LIST HEAD                 */
       34      804    1   DCL   S_DL$ PTR BASED (S_DL$_BYP$);     /* EMPTY DO LIST HEAD                 */
       35      805    1   DCL   S_UDLGATE SBIN SYMREF;
       36      806    1   DCL   S_DOGATE SBIN SYMREF;
       37      807    1   DCL   SIZE SBIN;                        /* TEMP ECC INFO SIZE                 */
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:2    
       38      808    1   DCL   USER$ PTR;
       39      809    1   DCL   A UBIN(36) BASED;                 /* TEMP                               */
       40      810    1   DCL   B CHAR(K) BASED;                  /* TEMP                               */
       41      811    1   DCL SFLAG BIT(1);
       42      812    1   DCL   LIM SBIN(36);                     /* TEMP DOLIST ECC INFO SIZE          */
       43      813    1   DCL   D$ PTR;                           /* TEMP DO LIST ENTRY PTR             */
       44      814    1   DCL   DO$ PTR;                          /* TEMP                               */
       45      815    1   DCL   DI$ PTR;
       46      816    1   DCL   E$ PTR;                           /* TEMP ECC INFO PTR                  */
       47      817    1   DCL   K UBIN(36);                       /* TEMP                               */
       48      818    1   DCL   ZERO UBIN(36) CONSTANT INIT(0);   /* CONSTANT 0000                      */
       49      819    1   DCL   SC_DOLIST ENTRY CONV(2,0);
       50      820    1   DCL   SSR$RUE ENTRY(4);
       51      821        /*                                                                    */
       52      822    1           SFLAG='0'B;
       53      823    1   EV0:    ;
       54      824    1           USER$ = ADDR(B$USRT$ -> B$USER(USR));
       55      825    1           IF USER$ -> B$U.US = %SS_SNULL THEN RETURN;
       56      826    1           CALL GDOBLK(DI$);               /* GET DO LIST ENTRY                  */
       57      827    1           DO$ = DI$;
       58      828    1           DO$->B$DO.WSR=DMAIN;            /* AND INITIALIZE IT.                 */
       59      829    1           DO$->B$DO.ECCSC=ECCSC;
       60      830    1           DO$->B$DO.EVID=EVID;
       61      831    1           DO$->B$DO.SAVE=SFLAG;
       62      832    1           IF ADDR(EPTR$) = ADDR(NIL) THEN
       63      833    1              DO$->B$DO.ENTER=ENTADDR(NIL);
       64      834    1           ELSE
       65      835    1              DO$->B$DO.ENTER=EPTR$;
       66      836    1           DO$->B$DO.ERRC=ERRC;
       67      837    1           IF ADDR(ECCI$)=ADDR(NIL) OR ECCI$=ADDR(NIL) THEN
       68      838    1              E$=ADDR(ZERO);               /* NO EVENT INFO                      */
       69      839    1           ELSE
       70      840    1              E$=ECCI$;
       71      841    1           SIZE=(E$->A+1)*4;               /* BYTES TO MOVE, INCLUDING SIZE      */
       72      842    1           LIM=SIZEC(B$DO.ECCINFO)+SIZEC(B$DO.ECCSZ);
       73      843    1           D$=ADDR(DO$->B$DO.ECCSZ);
       74      844    1   EV1:    DO$->B$DO.CONT='0'B;
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:3    
       75      845    1           DO$->B$DO.BUSY='0'B;
       76      846    1           DO$->B$DO.SCHDDO='0'B;
       77      847    1           IF SIZE >LIM THEN K=LIM; ELSE K=SIZE;
       78      848    1           D$->B=E$->B;
       79      849    1           SIZE=SIZE-K;
       80      850    1           LIM=SIZEC(B$DOCONT.ECCINFO);
       81      851    1           IF SIZE > 0 THEN
       82      852    2              DO;
       83      853    2                 CALL GDOBLK(D$);
       84      854    2                 DO$->B$DO.LNK$=D$;        /* AND LINK IT ON                     */
       85      855    2                 E$=PINCRC(E$,K);
       86      856    2                 DO$->B$DO.CONT='1'B;
       87      857    2                 DO$=D$;
       88      858    2                 D$=ADDR(DO$->B$DOCONT.ECCINFO);
       89      859    2                 GOTO EV1;
       90      860    2              END;
       91      861                %LOCK (G#=S_UDLGATE);
       92      864    1           DO$->B$DO.LNK$=ADDR(NIL);
       93      865    1           D$=ADDR(USER$ -> B$U.DL$);
       94      866    2           DO WHILE (D$->B$DO.LNK$ ~= ADDR(NIL));
       95      867    2              D$=D$->B$DO.LNK$;
       96      868    2           END;
       97      869    1           D$->B$DO.LNK$=DI$;
       98      870                %UNLOCK (G#=S_UDLGATE);
       99      873    2           DO INHIBIT;
      100      874    2              IF USER$ -> B$U.US = %SS_SW THEN
      101      875    2                 CALL SSR$RUE(%SS_WU,USR); /* WAKE UP SLEEPING USER              */
      102      876    2           END;
      103      877    1           RETURN;
      104      878        /*                                                                    */
      105      879        /*         THIS ENTRY POINT SETS THE SAVE FLAG IN THE DOLIST ENTRY
      106      880                CAUSING IT TO BE RETAINED, IF THE RECEIVER DOES NOT HAVE
      107      881                AN EVENT HANDLER, INSTEAD OF ABORTING THE RECEIVER WITH
      108      882                ERROR CODE SSC-495.                                           */
      109      883        /*                                                                    */
      110      884    1   SSV$EVENTG: ENTRY(USR,DMAIN,ECCSC,EVID,ERRC,ECCI$,EPTR$);
      111      885        /*                                                                    */
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:4    
      112      886    1           SFLAG='1'B;
      113      887    1           GOTO EV0;
      114      888        %EJECT;
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:5    
      115      889    1   GDOBLK: PROC(DD$);
      116      890    2   DCL  DD$ PTR;
      117      891        /*                                                                    */
      118      892              %LOCK (G#=S_DOGATE);
      119      895    2           DD$=S_DL$;
      120      896    2           IF DD$ = ADDR(NIL) THEN
      121      897    2              CALL SC_DOLIST;
      122      898        /*S*    SCREECH_CODE: SSV-S$DOLIST
      123      899                TYPE: SCREECH
      124      900                MESSAGE: No free do list blocks or do list management error  */
      125      901    2           ELSE
      126      902    2              S_DL$=S_DL$->B$DO.LNK$;
      127      903                %INC_COUNTER (ITEM=DOLISTS);
      128      909                %UNLOCK (G#=S_DOGATE);
      129      912    2           RETURN;
      130      913    2   END;
      131      914    1   END;
      132      915        %EOD;

PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:6    
--  Include file information  --

   P_PMDAT_C.:E05TOU  is referenced.
   P_PMDAT_R.:E05TOU  cannot be made into a system file and is referenced.
   SS_SCHED_C.:E05TOU  is referenced.
   HF_LOCK_C.:E05TOU  cannot be made into a system file and is referenced.
   B$USER.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure SSV$EVENT.

   Procedure SSV$EVENT requires 190 words for executable code.
   Procedure SSV$EVENT requires 24 words of local(AUTO) storage.

PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:7    

 Object Unit name= SSV$EVENT                                  File name= SSV$EVENT.:E05TOU
 UTS= JUL 30 '97 06:00:54.92 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  RoData even  UTS      1      1  SSV$EVENT
    1   Proc  even  none   190    276  SSV$EVENT
    2  RoData even  none     7      7  SSV$EVENT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes            yes      Std        7  SSV$EVENT
     1    232                  yes      Std        7  SSV$EVENTG

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       1 HFC$UNLOCK
         yes           Std       1 HFC$LOCK
         yes           Std       4 SSR$RUE
                       nStd      0 X66_AUTO_N
                       nStd      0 X66_ARET
                       Std       0 B_CONSPOOL_D
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:8    

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     SC_DOLIST                             B$USRT$                               P_RESOURCE$
     P_UPTIME                              P_NSCPU                          r    S_DL$_BYP$
     S_UDLGATE                             S_DOGATE                              B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ASLENTSID                             ISSID
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:9    


        1        1        /*M*     SSV$EVENT:  PROCESS EVENT EXCEPTIONAL CONDITIONS             */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*  AND,DTI=3   */
        8        8        /*                                                                    */
        9        9        SSV$EVENT: PROC(USR,DMAIN,ECCSC,EVID,ERRC,ECCI$,EPTR$);

      9  1 000000   000000 700200 xent  SSV$EVENT    TSX0  ! X66_AUTO_N
         1 000001   000030 000007                    ZERO    24,7

       10       10        /*                                                                    */
       11       11    1   DCL   USR UBIN BYTE CALIGNED;           /* USER NUMBER                        */
       12       12    1   DCL   DMAIN UBIN(36);                   /* WSR# FROM EVENT RECEIVERS ISR      */
       13       13    1   DCL   ECCSC UBIN(36);                   /* ECC SUBCODE                        */
       14       14    1   DCL   EVID UBIN(36);                    /* EVENT IDENTIFIER SUPPLIED BY USER*/
       15       15    1   DCL   ERRC BIT(36) ALIGNED;             /* ERROR CODE - JIT.ERROR             */
       16       16    1   DCL   ECCI$ PTR;                        /* CONDITION SPECIFIC INFORMATION*/
       17       17    1   DCL   EPTR$ EPTR;                       /* POINTER TO CALLER'S EVENT COMP-*/
       18       18                                                /* LETION PROCEDURE                   */
       19       19        /*                                                                    */
       20       20        /*    SSV$EVENT IS CALLED TO OBTAIN A DO LIST ENTRY, FILL IT WITH     */
       21       21        /*    THE DATA SUPPLIED THROUGH THE PARAMETERS.  LATER, THE           */
       22       22        /*    SCHEDULER WILL CALL THE SPECIFIED EVENT COMPLETION PROCEDURE    */
       23       23        /*     AND THEN MOVE THE INFORMATION FROM THE DO LIST ENTRY TO THE    */
       24       24        /*    USER ECC ENVIRONMENT IN PREPARATION FOR RETURNING TO THE USER   */
       25       25        /*    EVENT HANDLER.  AN ALTRET FROM THE EVENT COMPLETION PROCEDURE   */
       26       26        /*    TELLS THE SCHEDULER TO NOT INVOKE THE EVENT HANDLER AND TO      */
       27       27        /*    DISCARD THE DO LIST ENTRY.                                      */
       28       28        %INCLUDE B$USER;
       29      244        %B$USERREFS;
       30      248        %INCLUDE HF_LOCK_C;
       31      262        %INCLUDE SS_SCHED_C;
       32      495        %INCLUDE P_PMDAT_R;
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:10   
       33      803    1   DCL   S_DL$_BYP$ PTR SYMREF READONLY;   /* EMPTY DO LIST HEAD                 */
       34      804    1   DCL   S_DL$ PTR BASED (S_DL$_BYP$);     /* EMPTY DO LIST HEAD                 */
       35      805    1   DCL   S_UDLGATE SBIN SYMREF;
       36      806    1   DCL   S_DOGATE SBIN SYMREF;
       37      807    1   DCL   SIZE SBIN;                        /* TEMP ECC INFO SIZE                 */
       38      808    1   DCL   USER$ PTR;
       39      809    1   DCL   A UBIN(36) BASED;                 /* TEMP                               */
       40      810    1   DCL   B CHAR(K) BASED;                  /* TEMP                               */
       41      811    1   DCL SFLAG BIT(1);
       42      812    1   DCL   LIM SBIN(36);                     /* TEMP DOLIST ECC INFO SIZE          */
       43      813    1   DCL   D$ PTR;                           /* TEMP DO LIST ENTRY PTR             */
       44      814    1   DCL   DO$ PTR;                          /* TEMP                               */
       45      815    1   DCL   DI$ PTR;
       46      816    1   DCL   E$ PTR;                           /* TEMP ECC INFO PTR                  */
       47      817    1   DCL   K UBIN(36);                       /* TEMP                               */
       48      818    1   DCL   ZERO UBIN(36) CONSTANT INIT(0);   /* CONSTANT 0000                      */
       49      819    1   DCL   SC_DOLIST ENTRY CONV(2,0);
       50      820    1   DCL   SSR$RUE ENTRY(4);
       51      821        /*                                                                    */
       52      822    1           SFLAG='0'B;

    822  1 000002   200014 450100                    STZ     SFLAG,,AUTO

    822  1 000003                       EV0          null
       53      823    1   EV0:    ;
       54      824    1           USER$ = ADDR(B$USRT$ -> B$USER(USR));

    824  1 000003   200003 470500                    LDP0    @USR,,AUTO
         1 000004   000100 101500                    MRL     fill='000'O
         1 000005   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         1 000006   200026 000004                    ADSC9   @DD$+1,,AUTO             cn=0,n=4
         1 000007   200026 236100                    LDQ     @DD$+1,,AUTO
         1 000010   000004 736000                    QLS     4
         1 000011   000022 736000                    QLS     18
         1 000012   000000 036000 xsym               ADLQ    B$USRT$
         1 000013   200013 756100                    STQ     USER$,,AUTO

PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:11   
       55      825    1           IF USER$ -> B$U.US = %SS_SNULL THEN RETURN;

    825  1 000014   200013 471500                    LDP1    USER$,,AUTO
         1 000015   100011 236100                    LDQ     9,,PR1
         1 000016   770000 376003                    ANQ     -4096,DU
         1 000017   300000 116003                    CMPQ    98304,DU
         1 000020   000022 601000 1                  TNZ     s:826

    825  1 000021   000000 702200 xent               TSX2  ! X66_ARET

       56      826    1           CALL GDOBLK(DI$);               /* GET DO LIST ENTRY                  */

    826  1 000022   200020 633500                    EPPR3   DI$,,AUTO
         1 000023   200025 453500                    STP3    K+3,,AUTO
         1 000024   000237 701000 1                  TSX1    GDOBLK
         1 000025   000000 011000                    NOP     0

       57      827    1           DO$ = DI$;

    827  1 000026   200020 236100                    LDQ     DI$,,AUTO
         1 000027   200017 756100                    STQ     DO$,,AUTO

       58      828    1           DO$->B$DO.WSR=DMAIN;            /* AND INITIALIZE IT.                 */

    828  1 000030   200004 470500                    LDP0    @DMAIN,,AUTO
         1 000031   200017 471500                    LDP1    DO$,,AUTO
         1 000032   000000 236100                    LDQ     0,,PR0
         1 000033   000022 736000                    QLS     18
         1 000034   100002 552120                    STBQ    2,'20'O,PR1

       59      829    1           DO$->B$DO.ECCSC=ECCSC;

    829  1 000035   200005 473500                    LDP3    @ECCSC,,AUTO
         1 000036   300000 720100                    LXL0    0,,PR3
         1 000037   100002 440100                    SXL0    2,,PR1

       60      830    1           DO$->B$DO.EVID=EVID;
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:12   

    830  1 000040   200006 474500                    LDP4    @EVID,,AUTO
         1 000041   400000 235100                    LDA     0,,PR4
         1 000042   100003 755100                    STA     3,,PR1

       61      831    1           DO$->B$DO.SAVE=SFLAG;

    831  1 000043   200014 236100                    LDQ     SFLAG,,AUTO
         1 000044   000003 772000                    QRL     3
         1 000045   100002 676100                    ERQ     2,,PR1
         1 000046   040000 376003                    ANQ     16384,DU
         1 000047   100002 656100                    ERSQ    2,,PR1

       62      832    1           IF ADDR(EPTR$) = ADDR(NIL) THEN

    832  1 000050   200011 236100                    LDQ     @EPTR$,,AUTO
         1 000051   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000052   000056 601000 1                  TNZ     s:835

       63      833    1              DO$->B$DO.ENTER=ENTADDR(NIL);

    833  1 000053   000002 236000 xsym               LDQ     B_VECTNIL+2
         1 000054   100001 756100                    STQ     1,,PR1
         1 000055   000061 710000 1                  TRA     s:836

       64      834    1           ELSE
       65      835    1              DO$->B$DO.ENTER=EPTR$;

    835  1 000056   200011 475500                    LDP5    @EPTR$,,AUTO
         1 000057   500000 236100                    LDQ     0,,PR5
         1 000060   100001 756100                    STQ     1,,PR1

       66      836    1           DO$->B$DO.ERRC=ERRC;

    836  1 000061   200007 475500                    LDP5    @ERRC,,AUTO
         1 000062   500000 236100                    LDQ     0,,PR5
         1 000063   100004 756100                    STQ     4,,PR1
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:13   

       67      837    1           IF ADDR(ECCI$)=ADDR(NIL) OR ECCI$=ADDR(NIL) THEN

    837  1 000064   200010 236100                    LDQ     @ECCI$,,AUTO
         1 000065   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000066   000073 600000 1                  TZE     s:838
         1 000067   200010 476500                    LDP6    @ECCI$,,AUTO
         1 000070   600000 236100                    LDQ     0,,PR6
         1 000071   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000072   000076 601000 1                  TNZ     s:840

       68      838    1              E$=ADDR(ZERO);               /* NO EVENT INFO                      */

    838  1 000073   000000 236000 2                  LDQ     0
         1 000074   200021 756100                    STQ     E$,,AUTO
         1 000075   000077 710000 1                  TRA     s:841

       69      839    1           ELSE
       70      840    1              E$=ECCI$;

    840  1 000076   200021 756100                    STQ     E$,,AUTO

       71      841    1           SIZE=(E$->A+1)*4;               /* BYTES TO MOVE, INCLUDING SIZE      */

    841  1 000077   200021 476500                    LDP6    E$,,AUTO
         1 000100   600000 235100                    LDA     0,,PR6
         1 000101   000002 735000                    ALS     2
         1 000102   000004 035007                    ADLA    4,DL
         1 000103   200012 755100                    STA     SIZE,,AUTO

       72      842    1           LIM=SIZEC(B$DO.ECCINFO)+SIZEC(B$DO.ECCSZ);

    842  1 000104   000030 235007                    LDA     24,DL
         1 000105   200015 755100                    STA     LIM,,AUTO

       73      843    1           D$=ADDR(DO$->B$DO.ECCSZ);

PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:14   
    843  1 000106   200017 236100                    LDQ     DO$,,AUTO
         1 000107   000005 036003                    ADLQ    5,DU
         1 000110   200016 756100                    STQ     D$,,AUTO

       74      844    1   EV1:    DO$->B$DO.CONT='0'B;

    844  1 000111   200017 470500       EV1          LDP0    DO$,,AUTO
         1 000112   000001 236000 2                  LDQ     1
         1 000113   000002 356100                    ANSQ    2,,PR0

       75      845    1           DO$->B$DO.BUSY='0'B;

    845  1 000114   000031 236000 xsym               LDQ     B_VECTNIL+25
         1 000115   000002 356100                    ANSQ    2,,PR0

       76      846    1           DO$->B$DO.SCHDDO='0'B;

    846  1 000116   000002 236000 2                  LDQ     2
         1 000117   000002 356100                    ANSQ    2,,PR0

       77      847    1           IF SIZE >LIM THEN K=LIM; ELSE K=SIZE;

    847  1 000120   200012 236100                    LDQ     SIZE,,AUTO
         1 000121   200015 116100                    CMPQ    LIM,,AUTO
         1 000122   000126 604400 1                  TMOZ    s:847+6

    847  1 000123   200015 235100                    LDA     LIM,,AUTO
         1 000124   200022 755100                    STA     K,,AUTO
         1 000125   000127 710000 1                  TRA     s:848

    847  1 000126   200022 756100                    STQ     K,,AUTO

       78      848    1           D$->B=E$->B;

    848  1 000127   200021 471500                    LDP1    E$,,AUTO
         1 000130   200022 720100                    LXL0    K,,AUTO
         1 000131   200016 473500                    LDP3    D$,,AUTO
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:15   
         1 000132   040140 100540                    MLR     fill='040'O
         1 000133   100000 000010                    ADSC9   0,,PR1                   cn=0,n=*X0
         1 000134   300000 000010                    ADSC9   0,,PR3                   cn=0,n=*X0

       79      849    1           SIZE=SIZE-K;

    849  1 000135   200022 136100                    SBLQ    K,,AUTO
         1 000136   200012 756100                    STQ     SIZE,,AUTO

       80      850    1           LIM=SIZEC(B$DOCONT.ECCINFO);

    850  1 000137   000044 235007                    LDA     36,DL
         1 000140   200015 755100                    STA     LIM,,AUTO

       81      851    1           IF SIZE > 0 THEN

    851  1 000141   000000 116003                    CMPQ    0,DU
         1 000142   000165 604400 1                  TMOZ    s:862

       82      852    2              DO;

       83      853    2                 CALL GDOBLK(D$);

    853  1 000143   200016 633500                    EPPR3   D$,,AUTO
         1 000144   200025 453500                    STP3    K+3,,AUTO
         1 000145   000237 701000 1                  TSX1    GDOBLK
         1 000146   000000 011000                    NOP     0

       84      854    2                 DO$->B$DO.LNK$=D$;        /* AND LINK IT ON                     */

    854  1 000147   200016 236100                    LDQ     D$,,AUTO
         1 000150   200017 470500                    LDP0    DO$,,AUTO
         1 000151   000000 756100                    STQ     0,,PR0

       85      855    2                 E$=PINCRC(E$,K);

    855  1 000152   200022 236100                    LDQ     K,,AUTO
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:16   
         1 000153   000020 736000                    QLS     16
         1 000154   200021 036100                    ADLQ    E$,,AUTO
         1 000155   200021 756100                    STQ     E$,,AUTO

       86      856    2                 DO$->B$DO.CONT='1'B;

    856  1 000156   200000 236003                    LDQ     65536,DU
         1 000157   000002 256100                    ORSQ    2,,PR0

       87      857    2                 DO$=D$;

    857  1 000160   200016 236100                    LDQ     D$,,AUTO
         1 000161   200017 756100                    STQ     DO$,,AUTO

       88      858    2                 D$=ADDR(DO$->B$DOCONT.ECCINFO);

    858  1 000162   000003 036003                    ADLQ    3,DU
         1 000163   200016 756100                    STQ     D$,,AUTO

       89      859    2                 GOTO EV1;

    859  1 000164   000111 710000 1                  TRA     EV1

       90      860    2              END;
       91      861                %LOCK (G#=S_UDLGATE);

    862  1 000165   000003 630400 2                  EPPR0   3
         1 000166   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000167   000000 701000 xent               TSX1    HFC$LOCK
         1 000170   000000 011000                    NOP     0

       92      864    1           DO$->B$DO.LNK$=ADDR(NIL);

    864  1 000171   000001 236000 xsym               LDQ     B_VECTNIL+1
         1 000172   200017 470500                    LDP0    DO$,,AUTO
         1 000173   000000 756100                    STQ     0,,PR0

PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:17   
       93      865    1           D$=ADDR(USER$ -> B$U.DL$);

    865  1 000174   200013 236100                    LDQ     USER$,,AUTO
         1 000175   000015 036003                    ADLQ    13,DU
         1 000176   200016 756100                    STQ     D$,,AUTO

       94      866    2           DO WHILE (D$->B$DO.LNK$ ~= ADDR(NIL));

    866  1 000177   000203 710000 1                  TRA     s:868

       95      867    2              D$=D$->B$DO.LNK$;

    867  1 000200   200016 470500                    LDP0    D$,,AUTO
         1 000201   000000 236100                    LDQ     0,,PR0
         1 000202   200016 756100                    STQ     D$,,AUTO

       96      868    2           END;

    868  1 000203   200016 470500                    LDP0    D$,,AUTO
         1 000204   000000 236100                    LDQ     0,,PR0
         1 000205   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000206   000200 601000 1                  TNZ     s:867

       97      869    1           D$->B$DO.LNK$=DI$;

    869  1 000207   200020 236100                    LDQ     DI$,,AUTO
         1 000210   000000 756100                    STQ     0,,PR0

       98      870                %UNLOCK (G#=S_UDLGATE);

    871  1 000211   000003 630400 2                  EPPR0   3
         1 000212   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000213   000000 701000 xent               TSX1    HFC$UNLOCK
         1 000214   000000 011000                    NOP     0

       99      873    2           DO INHIBIT;

PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:18   
      100      874    2              IF USER$ -> B$U.US = %SS_SW THEN

    874  1 000215   200013 470700                    LDP0  ! USER$,,AUTO
         1 000216   000011 236300                    LDQ   ! 9,,PR0
         1 000217   770000 376203                    ANQ   ! -4096,DU
         1 000220   210000 116203                    CMPQ  ! 69632,DU
         1 000221   000231 601200 1                  TNZ   ! s:877

      101      875    2                 CALL SSR$RUE(%SS_WU,USR); /* WAKE UP SLEEPING USER              */

    875  1 000222   200003 236300                    LDQ   ! @USR,,AUTO
         1 000223   000005 235200 2                  LDA   ! 5
         1 000224   200026 757300                    STAQ  ! @DD$+1,,AUTO
         1 000225   200026 630700                    EPPR0 ! @DD$+1,,AUTO
         1 000226   000020 631600 xsym               EPPR1 ! B_VECTNIL+16
         1 000227   000000 701200 xent               TSX1  ! SSR$RUE
         1 000230   000000 011200                    NOP   ! 0

      102      876    2           END;

      103      877    1           RETURN;

    877  1 000231   000000 702200 xent               TSX2  ! X66_ARET

      104      878        /*                                                                    */
      105      879        /*         THIS ENTRY POINT SETS THE SAVE FLAG IN THE DOLIST ENTRY
      106      880                CAUSING IT TO BE RETAINED, IF THE RECEIVER DOES NOT HAVE
      107      881                AN EVENT HANDLER, INSTEAD OF ABORTING THE RECEIVER WITH
      108      882                ERROR CODE SSC-495.                                           */
      109      883        /*                                                                    */
      110      884    1   SSV$EVENTG: ENTRY(USR,DMAIN,ECCSC,EVID,ERRC,ECCI$,EPTR$);

    884  1 000232   000000 700200 xent  SSV$EVENTG   TSX0  ! X66_AUTO_N
         1 000233   000030 000007                    ZERO    24,7

      111      885        /*                                                                    */
      112      886    1           SFLAG='1'B;
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:19   

    886  1 000234   400000 236003                    LDQ     -131072,DU
         1 000235   200014 756100                    STQ     SFLAG,,AUTO

      113      887    1           GOTO EV0;

    887  1 000236   000003 710000 1                  TRA     EV0

      114      888        %EJECT;
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:20   
      115      889    1   GDOBLK: PROC(DD$);

    889  1 000237   200024 741300       GDOBLK       STX1  ! K+2,,AUTO

      116      890    2   DCL  DD$ PTR;
      117      891        /*                                                                    */
      118      892              %LOCK (G#=S_DOGATE);

    893  1 000240   000006 630400 2                  EPPR0   6
         1 000241   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000242   000000 701000 xent               TSX1    HFC$LOCK
         1 000243   000000 011000                    NOP     0

      119      895    2           DD$=S_DL$;

    895  1 000244   000000 470400 xsym               LDP0    S_DL$_BYP$
         1 000245   000000 236100                    LDQ     0,,PR0
         1 000246   200025 471500                    LDP1    @DD$,,AUTO
         1 000247   100000 756100                    STQ     0,,PR1

      120      896    2           IF DD$ = ADDR(NIL) THEN

    896  1 000250   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000251   000255 601000 1                  TNZ     s:902

      121      897    2              CALL SC_DOLIST;

    897  1 000252   000000 713400 xsym               CLIMB   SC_DOLIST
         1 000253   000000 600000 xsid               climb   nvectors=         0
         1 000254   000260 710000 1                  TRA     s:904

      122      898        /*S*    SCREECH_CODE: SSV-S$DOLIST
      123      899                TYPE: SCREECH
      124      900                MESSAGE: No free do list blocks or do list management error  */
      125      901    2           ELSE
      126      902    2              S_DL$=S_DL$->B$DO.LNK$;

PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:21   
    902  1 000255   000000 473500                    LDP3    0,,PR0
         1 000256   300000 236100                    LDQ     0,,PR3
         1 000257   000000 756100                    STQ     0,,PR0

      127      903                %INC_COUNTER (ITEM=DOLISTS);

    904  1 000260   000000 470400 xsym               LDP0    P_RESOURCE$
         1 000261   000071 235100                    LDA     57,,PR0
         1 000262   000001 035007                    ADLA    1,DL
         1 000263   000071 755100                    STA     57,,PR0

    905  1 000264   000072 236100                    LDQ     58,,PR0
         1 000265   000071 116100                    CMPQ    57,,PR0
         1 000266   000270 603000 1                  TRC     s:910

    907  1 000267   000072 755100                    STA     58,,PR0

      128      909                %UNLOCK (G#=S_DOGATE);

    910  1 000270   000006 630400 2                  EPPR0   6
         1 000271   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000272   000000 701000 xent               TSX1    HFC$UNLOCK
         1 000273   000000 011000                    NOP     0

      129      912    2           RETURN;

    912  1 000274   200024 221300                    LDX1  ! K+2,,AUTO
         1 000275   000001 702211                    TSX2  ! 1,X1

ZERO
 Sect OctLoc
   0     000   000000 000000                                                    ....

(unnamed)
 Sect OctLoc
   2     000   000000 006000   577777 777777   677777 777777   000000 006000    ................
   2     004   000000 000027   000004 006000   000000 006000                    ............
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:22   
      130      913    2   END;
      131      914    1   END;
      132      915        %EOD;

PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:23   
--  Include file information  --

   P_PMDAT_C.:E05TOU  is referenced.
   P_PMDAT_R.:E05TOU  cannot be made into a system file and is referenced.
   SS_SCHED_C.:E05TOU  is referenced.
   HF_LOCK_C.:E05TOU  cannot be made into a system file and is referenced.
   B$USER.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure SSV$EVENT.
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:24   

 **** Variables and constants ****

  ****  Section 000 RoData SSV$EVENT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN        r     1 ZERO

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    25-0-0/w PTR         r     1 @DD$                       4-0-0/w PTR         r     1 @DMAIN
    10-0-0/w PTR         r     1 @ECCI$                     5-0-0/w PTR         r     1 @ECCSC
    11-0-0/w PTR         r     1 @EPTR$                     7-0-0/w PTR         r     1 @ERRC
     6-0-0/w PTR         r     1 @EVID                      3-0-0/w PTR         r     1 @USR
    16-0-0/w PTR         r     1 D$                        *0-0-0/w PTR         r     1 DD$
    20-0-0/w PTR         r     1 DI$                       *0-0-0/w UBIN        r     1 DMAIN
    17-0-0/w PTR         r     1 DO$                       21-0-0/w PTR         r     1 E$
    *0-0-0/w PTR         r     1 ECCI$                     *0-0-0/w UBIN        r     1 ECCSC
    *0-0-0/w EPTR        r     1 EPTR$                     *0-0-0/w BIT         r     1 ERRC
    *0-0-0/w UBIN        r     1 EVID                      22-0-0/w UBIN        r     1 K
    15-0-0/w SBIN        r     1 LIM                       14-0-0/b BIT         r     1 SFLAG
    12-0-0/w SBIN        r     1 SIZE                      13-0-0/w PTR         r     1 USER$
    *0-0-0/c UBIN(9)     r     1 USR

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$USRT$                    0-0-0/w PTR         r     1 P_RESOURCE$
     0-0-0/w PTR         r     1 S_DL$_BYP$                 0-0-0/w SBIN        r     1 S_DOGATE
     0-0-0/w SBIN        r     1 S_UDLGATE

PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:25   
  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN        r     1 A                          0-0-0/c ACHR        r     1 B
     0-0-0/d STRC(396)   r     1 B$DO                       0-0-0/d STRC(432)   r     1 B$DOCONT
     0-0-0/d STRC(576)   r     1 B$U                        0-0-0/w STRC(576)   r     1 B$USER(0:0)
     0-0-0/w STRC(2268)  r     1 P_RESOURCE                 0-0-0/w PTR         r     1 S_DL$


   Procedure SSV$EVENT requires 190 words for executable code.
   Procedure SSV$EVENT requires 24 words of local(AUTO) storage.
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:26   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:27   
          MINI XREF LISTING

A
       809**DCL       841>>ASSIGN
B
       810**DCL       848<<ASSIGN    848>>ASSIGN
B$DO.BUSY
       166**DCL       845<<ASSIGN
B$DO.CONT
       167**DCL       844<<ASSIGN    856<<ASSIGN
B$DO.ECCINFO
       179**DCL       180--REDEF     842--ASSIGN
B$DO.ECCSC
       172**DCL       829<<ASSIGN
B$DO.ECCSZ
       178**DCL       842--ASSIGN    843--ASSIGN
B$DO.ENTER
       165**DCL       833<<ASSIGN    835<<ASSIGN
B$DO.ERRC
       174**DCL       836<<ASSIGN
B$DO.EVID
       173**DCL       830<<ASSIGN
B$DO.LNK$
       164**DCL       854<<ASSIGN    864<<ASSIGN    866>>DOWHILE   867>>ASSIGN    869<<ASSIGN    902>>ASSIGN
B$DO.SAVE
       169**DCL       831<<ASSIGN
B$DO.SCHDDO
       168**DCL       846<<ASSIGN
B$DO.WSR
       171**DCL       828<<ASSIGN
B$DOCONT.ECCINFO
       196**DCL       850--ASSIGN    858--ASSIGN
B$U.DL$
       154**DCL       865--ASSIGN
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:28   
B$U.MISC
       158**DCL       159--REDEF
B$U.US
       145**DCL       825>>IF        874>>IF
B$USER
       203**DCL       824--ASSIGN
B$USER.MISC
       234**DCL       235--REDEF
B$USRT$
       246**DCL       824>>ASSIGN
D$
       813**DCL       843<<ASSIGN    848>>ASSIGN    853<>CALL      854>>ASSIGN    857>>ASSIGN    858<<ASSIGN
       865<<ASSIGN    866>>DOWHILE   867<<ASSIGN    867>>ASSIGN    869>>ASSIGN
DD$ IN PROCEDURE GDOBLK
       890**DCL       889--PROC      895<<ASSIGN    896>>IF
DI$
       815**DCL       826<>CALL      827>>ASSIGN    869>>ASSIGN
DMAIN
        12**DCL         9--PROC      828>>ASSIGN    884--ENTRY
DO$
       814**DCL       827<<ASSIGN    828>>ASSIGN    829>>ASSIGN    830>>ASSIGN    831>>ASSIGN    833>>ASSIGN
       835>>ASSIGN    836>>ASSIGN    843>>ASSIGN    844>>ASSIGN    845>>ASSIGN    846>>ASSIGN    854>>ASSIGN
       856>>ASSIGN    857<<ASSIGN    858>>ASSIGN    864>>ASSIGN
E$
       816**DCL       838<<ASSIGN    840<<ASSIGN    841>>ASSIGN    848>>ASSIGN    855<<ASSIGN    855>>ASSIGN
ECCI$
        16**DCL         9--PROC      837--IF        837>>IF        840>>ASSIGN    884--ENTRY
ECCSC
        13**DCL         9--PROC      829>>ASSIGN    884--ENTRY
EPTR$
        17**DCL         9--PROC      832--IF        835>>ASSIGN    884--ENTRY
ERRC
        15**DCL         9--PROC      836>>ASSIGN    884--ENTRY
EV0
       822**LABEL     887--GOTO
EV1
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:29   
       844**LABEL     859--GOTO
EVID
        14**DCL         9--PROC      830>>ASSIGN    884--ENTRY
GDOBLK
       889**PROC      826--CALL      853--CALL
HFC$LOCK
       261**DCL-ENT   862--CALL      893--CALL
HFC$UNLOCK
       261**DCL-ENT   871--CALL      910--CALL
K
       817**DCL       810--IMP-SIZ   847<<ASSIGN    847<<ASSIGN    848>>ASSIGN    848>>ASSIGN    849>>ASSIGN
       855>>ASSIGN
LIM
       812**DCL       842<<ASSIGN    847>>IF        847>>ASSIGN    850<<ASSIGN
P_NSCPU
       783**DCL       784--REDEF
P_RESOURCE.RES
       656**DCL       723--REDEF
P_RESOURCE.RES.DOLISTS.CURRENT
       711**DCL       904<<ASSIGN    904>>ASSIGN    905>>IF        907>>ASSIGN
P_RESOURCE.RES.DOLISTS.PEAK
       712**DCL       905>>IF        907<<ASSIGN
P_RESOURCE$
       736**DCL       624--IMP-PTR   904>>ASSIGN    904>>ASSIGN    905>>IF        905>>IF        907>>ASSIGN
       907>>ASSIGN
P_UPTIME
       772**DCL       773--REDEF
SC_DOLIST
       819**DCL-ENT   897--CALL
SFLAG
       811**DCL       822<<ASSIGN    831>>ASSIGN    886<<ASSIGN
SIZE
       807**DCL       841<<ASSIGN    847>>IF        847>>ASSIGN    849<<ASSIGN    849>>ASSIGN    851>>IF
SSR$RUE
       820**DCL-ENT   875--CALL
S_DL$
PL6.E3A0      #001=SSV$EVENT File=SSV$EVENT.:E05TSI                              WED 07/30/97 06:00 Page:30   
       804**DCL       895>>ASSIGN    902<<ASSIGN    902>>ASSIGN
S_DL$_BYP$
       803**DCL       804--IMP-PTR   895>>ASSIGN    902>>ASSIGN    902>>ASSIGN
S_DOGATE
       806**DCL       893<>CALL      910<>CALL
S_UDLGATE
       805**DCL       862<>CALL      871<>CALL
USER$
       808**DCL       824<<ASSIGN    825>>IF        865>>ASSIGN    874>>IF
USR
        11**DCL         9--PROC      824>>ASSIGN    875<>CALL      884--ENTRY
ZERO
       818**DCL       838--ASSIGN

PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:31   
      133        1        /*T***********************************************************/
      134        2        /*T*                                                         */
      135        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      136        4        /*T*                                                         */
      137        5        /*T***********************************************************/
      138        6        SSV$INITDO: PROC(DO$,DMAIN,ECCSC,EVID,EPTR$,ECCSZ);
      139        7        /*                                                                    */
      140        8    1   DCL   DO$ PTR;                          /* POINTER TO DO LIST ENTRY           */
      141        9    1   DCL   DMAIN UBIN(36);                   /* WSR# FROM EVENT RECEIVERS ISR      */
      142       10    1   DCL   ECCSC UBIN(36);                   /* ECC SUBCODE TO BE REPORTED IN      */
      143       11                                                /* THE EVENT EXCEP. COND.ENVIRON.     */
      144       12    1   DCL   EVID UBIN(36);                    /* EVENT IDENTIFIER SUPPLIED BY USER*/
      145       13    1   DCL   EPTR$ EPTR;                       /* CALLER'S EVENT COMPLETE PROCEDURE*/
      146       14    1   DCL   ECCSZ UBIN(36);                   /* SIZE OF CONDITION SPECIFIC INFO    */
      147       15                                                /* REQUIRED IN DOLIST ENTRY           */
      148       16        /*                                                                    */
      149       17        /*    SSV$INITDO IS CALLED TO ALLOCATE AND INITIALIZE A DO LIST ENTRY */
      150       18        /*    FOR THE CURRENT USER.  A POINTER TO THE ENTRY IS RETURNED IN    */
      151       19        /*    DO$.  IF AN ENTRY CANNOT BE OBTAINED , THE USER IS PUT TO SLEEP */
      152       20        /*    FOR ONE SECOND AND, UPON AWAKENING, THE ALLOCATION RETRIED.     */
      153       21        /*                                                                    */
      154       22        /*    WHEN AN ENTRY IS OBTAINED, IT IS MARKED BUSY SO THAT IT WILL    */
      155       23        /*    NOT BE PROCESSED BY THE SCHEDULER IN THE PROCESS OF RETURNING   */
      156       24        /*    TO THE USER.  THE ENTRY WILL BE MARKED NOT BUSY BY A CALL TO    */
      157       25        /*    SSV$SCHDDO WHEN ITS ASSOCIATED EVENT IS TO BE REPORTED TO THE   */
      158       26        /*    USER.                                                           */
      159       27        /*                                                                    */
      160       28        /*    ECCSZ must be <= 5.  */
      161       29        /*                                                                    */
      162       30        /*    THE INPUT PARAMETERS TO SSV$INITDO ARE PLACED IN THE DO LIST    */
      163       31        /*    ENTRY.                                                          */
      164       32        /*                                                                    */
      165       33        /*    DMAIN IS THE WSR NUMBER OBTAINED FROM THE PMME ENVIRONMENT     */
      166       34        /*    AND IS USED TO GET THE EVENT REPORTED TO THE RIGHT DOMAIN, (ASL,*/
      167       35        /*    ICP, DB OR USER).  THE EVENT IDENTIFIER, ECC SUBCODE AND ECCSIZE */
      168       36        /*    ARE AS DESCRIBED UNDER EXCEPTIONAL CONDITION ENVIRONMENT IN THE */
      169       37        /*    EXCEPTIONAL CONDITION DESIGN SPEC. AND ARE JUST PASSED TO THE   */
PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:32   
      170       38        /*    EVENT THROUGH THE DO LIST ENTRY.  THE CONDITION SPECIFIC        */
      171       39        /*    INFORMATION AND ERROR CODE IS TO BE FILLED IN BY THE PROCESS    */
      172       40        /*    WHICH GETS THE DO LIST ENTRY VIA SSV$INITDO.   THE EVENT        */
      173       41        /*    COMPLETION PROCEDURE EPTR IS USED TO CALL THE INDICATED PROC    */
      174       42        /*    EDURE IN THE EVENT EXCEPTIONAL CONDITION PROCESSING PORTION OF  */
      175       43        /*    THE SCHEDULER, JUST BEFORE RETURNING TO THE USERS EVENT         */
      176       44        /*    HANDLER. AN ALTRET FROM THIS PROCEDURE INDICATES THAT THE USER  */
      177       45        /*    ECC EVENT HANDLER IS NOT TO BE ENTERED AND THE DO LIST ENTRY IS */
      178       46        /*    DISCARDED BY THE SCHEDULER.                                     */
      179       47        /*                                                                     */
      180       48        %INCLUDE B$USER;
      181      264        %B$USERREFS;
      182      268        %INCLUDE HF_LOCK_C;
      183      282        %INCLUDE SS_SCHED_C;
      184      515        %INCLUDE P_PMDAT_R;
      185      823        /*                                                                    */
      186      824    1   DCL   D$ PTR;                           /* "                                  */
      187      825    1   DCL   U# UBIN(9) UNAL;
      188      826    1   DCL   SSR$REG ENTRY(3) ALTRET;
      189      827    1   DCL   SSR$RUE ENTRY(4);
      190      828    1   DCL   S_DL$_BYP$ PTR SYMREF READONLY;   /* EMPTY DO LIST HEAD                 */
      191      829    1   DCL   S_DL$ PTR BASED (S_DL$_BYP$);     /* EMPTY DO LIST HEAD                 */
      192      830    1   DCL   S_UDLGATE SBIN SYMREF;
      193      831    1   DCL   S_DOGATE SBIN SYMREF;
      194      832        /*                                                                    */
      195      833    1           CALL GDOBLK(DO$);
      196      834    1           D$ = DO$;
      197      835    1           D$->B$DO='0'B;
      198      836    1           D$->B$DO.WSR=DMAIN;
      199      837    1           D$->B$DO.ECCSC=ECCSC;
      200      838    1           D$->B$DO.EVID=EVID;
      201      839    1           D$->B$DO.ENTER=EPTR$;
      202      840    1           D$->B$DO.ECCSZ=MINIMUM(ECCSZ,SIZEW(B$DO.ECCINFO));
      203      841        /*                                                                    */
      204      842    1           D$->B$DO.BUSY='1'B;
      205      843    1           D$->B$DO.SCHDDO='1'B;
      206      844    1           D$->B$DO.LNK$=ADDR(NIL);
PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:33   
      207      845                %LOCK (G#=S_UDLGATE);
      208      848    1           D$=ADDR(S$CU$->B$U.DL$);
      209      849    2           DO WHILE (D$->B$DO.LNK$ ~= ADDR(NIL));
      210      850    2              D$=D$->B$DO.LNK$;
      211      851    2           END;
      212      852    1           D$->B$DO.LNK$=DO$;
      213      853                %UNLOCK (G#=S_UDLGATE);
      214      856    1           RETURN;
      215      857        %EJECT;
PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:34   
      216      858    1   GDOBLK: PROC(DDD$);
      217      859    2   DCL   DDD$ PTR;
      218      860    2   EV4:    ;
      219      861                %LOCK (G#=S_DOGATE);
      220      864    2           DDD$=S_DL$;
      221      865    2           IF DDD$ = ADDR(NIL) THEN
      222      866    3              DO;
      223      867                      %UNLOCK (G#=S_DOGATE);
      224      870    3                 CALL SSR$REG(%SS_SL,ADDR(NIL),1); /* SLEEP A SECOND             */
      225      871    3                 GOTO EV4;                 /* THEN TRY AGAIN                     */
      226      872    3              END;
      227      873    2           ELSE
      228      874    2              S_DL$=S_DL$->B$DO.LNK$;
      229      875                %INC_COUNTER (ITEM=DOLISTS);
      230      881                %UNLOCK (G#=S_DOGATE);
      231      884    2           RETURN;
      232      885    2   END;
      233      886        %EJECT;
PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:35   
      234      887        /*                                                                    */
      235      888    1   SSV$SCHDDO: ENTRY(DO$,DMAIN);
      236      889        /*                                                                    */
      237      890        /*    SSV$SCHDDO IS CALLED TO INDICATE COMPLETION OF PREPARATION OF   */
      238      891        /*    THE SPECIFIED DO LIST ENTRY.  THE ENTRY IS MARKED NOT BUSY AND  */
      239      892    1           DO$->B$DO.BUSY='0'B;
      240      893    1           IF B$USRT$->B$USER.US(DMAIN) = %SS_SW THEN
      241      894    2              DO;
      242      895    2                 U#=DMAIN;
      243      896    2                 CALL SSR$RUE(%SS_WU,U#);
      244      897    2              END;
      245      898    1           RETURN;
      246      899    1   END;
      247      900        %EOD;

PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:36   
--  Include file information  --

   P_PMDAT_C.:E05TOU  is referenced.
   P_PMDAT_R.:E05TOU  cannot be made into a system file and is referenced.
   SS_SCHED_C.:E05TOU  is referenced.
   HF_LOCK_C.:E05TOU  cannot be made into a system file and is referenced.
   B$USER.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure SSV$INITDO.

   Procedure SSV$INITDO requires 133 words for executable code.
   Procedure SSV$INITDO requires 18 words of local(AUTO) storage.

PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:37   

 Object Unit name= SSV$INITDO                                 File name= SSV$EVENT.:E05TOU
 UTS= JUL 30 '97 06:01:07.24 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none   133    205  SSV$INITDO
    1  RoData even  none     7      7  SSV$INITDO

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes      Std        6  SSV$INITDO
     0    153                  yes      Std        2  SSV$SCHDDO

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       1 HFC$UNLOCK
         yes           Std       1 HFC$LOCK
         yes           Std       4 SSR$RUE
 yes     yes           Std       3 SSR$REG
                       nStd      0 X66_AUTO_N
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:38   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     S$CU$                                 B$USRT$                               P_RESOURCE$
     P_UPTIME                              P_NSCPU                          r    S_DL$_BYP$
     S_UDLGATE                             S_DOGATE                              B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:39   


      133        1        /*T***********************************************************/
      134        2        /*T*                                                         */
      135        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      136        4        /*T*                                                         */
      137        5        /*T***********************************************************/
      138        6        SSV$INITDO: PROC(DO$,DMAIN,ECCSC,EVID,EPTR$,ECCSZ);

      6  0 000000   000000 700200 xent  SSV$INITDO   TSX0  ! X66_AUTO_N
         0 000001   000022 000006                    ZERO    18,6

      139        7        /*                                                                    */
      140        8    1   DCL   DO$ PTR;                          /* POINTER TO DO LIST ENTRY           */
      141        9    1   DCL   DMAIN UBIN(36);                   /* WSR# FROM EVENT RECEIVERS ISR      */
      142       10    1   DCL   ECCSC UBIN(36);                   /* ECC SUBCODE TO BE REPORTED IN      */
      143       11                                                /* THE EVENT EXCEP. COND.ENVIRON.     */
      144       12    1   DCL   EVID UBIN(36);                    /* EVENT IDENTIFIER SUPPLIED BY USER*/
      145       13    1   DCL   EPTR$ EPTR;                       /* CALLER'S EVENT COMPLETE PROCEDURE*/
      146       14    1   DCL   ECCSZ UBIN(36);                   /* SIZE OF CONDITION SPECIFIC INFO    */
      147       15                                                /* REQUIRED IN DOLIST ENTRY           */
      148       16        /*                                                                    */
      149       17        /*    SSV$INITDO IS CALLED TO ALLOCATE AND INITIALIZE A DO LIST ENTRY */
      150       18        /*    FOR THE CURRENT USER.  A POINTER TO THE ENTRY IS RETURNED IN    */
      151       19        /*    DO$.  IF AN ENTRY CANNOT BE OBTAINED , THE USER IS PUT TO SLEEP */
      152       20        /*    FOR ONE SECOND AND, UPON AWAKENING, THE ALLOCATION RETRIED.     */
      153       21        /*                                                                    */
      154       22        /*    WHEN AN ENTRY IS OBTAINED, IT IS MARKED BUSY SO THAT IT WILL    */
      155       23        /*    NOT BE PROCESSED BY THE SCHEDULER IN THE PROCESS OF RETURNING   */
      156       24        /*    TO THE USER.  THE ENTRY WILL BE MARKED NOT BUSY BY A CALL TO    */
      157       25        /*    SSV$SCHDDO WHEN ITS ASSOCIATED EVENT IS TO BE REPORTED TO THE   */
      158       26        /*    USER.                                                           */
      159       27        /*                                                                    */
      160       28        /*    ECCSZ must be <= 5.  */
      161       29        /*                                                                    */
      162       30        /*    THE INPUT PARAMETERS TO SSV$INITDO ARE PLACED IN THE DO LIST    */
      163       31        /*    ENTRY.                                                          */
      164       32        /*                                                                    */
PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:40   
      165       33        /*    DMAIN IS THE WSR NUMBER OBTAINED FROM THE PMME ENVIRONMENT     */
      166       34        /*    AND IS USED TO GET THE EVENT REPORTED TO THE RIGHT DOMAIN, (ASL,*/
      167       35        /*    ICP, DB OR USER).  THE EVENT IDENTIFIER, ECC SUBCODE AND ECCSIZE */
      168       36        /*    ARE AS DESCRIBED UNDER EXCEPTIONAL CONDITION ENVIRONMENT IN THE */
      169       37        /*    EXCEPTIONAL CONDITION DESIGN SPEC. AND ARE JUST PASSED TO THE   */
      170       38        /*    EVENT THROUGH THE DO LIST ENTRY.  THE CONDITION SPECIFIC        */
      171       39        /*    INFORMATION AND ERROR CODE IS TO BE FILLED IN BY THE PROCESS    */
      172       40        /*    WHICH GETS THE DO LIST ENTRY VIA SSV$INITDO.   THE EVENT        */
      173       41        /*    COMPLETION PROCEDURE EPTR IS USED TO CALL THE INDICATED PROC    */
      174       42        /*    EDURE IN THE EVENT EXCEPTIONAL CONDITION PROCESSING PORTION OF  */
      175       43        /*    THE SCHEDULER, JUST BEFORE RETURNING TO THE USERS EVENT         */
      176       44        /*    HANDLER. AN ALTRET FROM THIS PROCEDURE INDICATES THAT THE USER  */
      177       45        /*    ECC EVENT HANDLER IS NOT TO BE ENTERED AND THE DO LIST ENTRY IS */
      178       46        /*    DISCARDED BY THE SCHEDULER.                                     */
      179       47        /*                                                                     */
      180       48        %INCLUDE B$USER;
      181      264        %B$USERREFS;
      182      268        %INCLUDE HF_LOCK_C;
      183      282        %INCLUDE SS_SCHED_C;
      184      515        %INCLUDE P_PMDAT_R;
      185      823        /*                                                                    */
      186      824    1   DCL   D$ PTR;                           /* "                                  */
      187      825    1   DCL   U# UBIN(9) UNAL;
      188      826    1   DCL   SSR$REG ENTRY(3) ALTRET;
      189      827    1   DCL   SSR$RUE ENTRY(4);
      190      828    1   DCL   S_DL$_BYP$ PTR SYMREF READONLY;   /* EMPTY DO LIST HEAD                 */
      191      829    1   DCL   S_DL$ PTR BASED (S_DL$_BYP$);     /* EMPTY DO LIST HEAD                 */
      192      830    1   DCL   S_UDLGATE SBIN SYMREF;
      193      831    1   DCL   S_DOGATE SBIN SYMREF;
      194      832        /*                                                                    */
      195      833    1           CALL GDOBLK(DO$);

    833  0 000002   200003 236100                    LDQ     @DO$,,AUTO
         0 000003   200015 756100                    STQ     U#+3,,AUTO
         0 000004   000076 701000 0                  TSX1    GDOBLK
         0 000005   000000 011000                    NOP     0

PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:41   
      196      834    1           D$ = DO$;

    834  0 000006   200003 470500                    LDP0    @DO$,,AUTO
         0 000007   000000 236100                    LDQ     0,,PR0
         0 000010   200011 756100                    STQ     D$,,AUTO

      197      835    1           D$->B$DO='0'B;

    835  0 000011   200011 471500                    LDP1    D$,,AUTO
         0 000012   000100 100400                    MLR     fill='000'O
         0 000013   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         0 000014   100000 000054                    ADSC9   0,,PR1                   cn=0,n=44

      198      836    1           D$->B$DO.WSR=DMAIN;

    836  0 000015   200004 473500                    LDP3    @DMAIN,,AUTO
         0 000016   300000 236100                    LDQ     0,,PR3
         0 000017   000022 736000                    QLS     18
         0 000020   100002 552120                    STBQ    2,'20'O,PR1

      199      837    1           D$->B$DO.ECCSC=ECCSC;

    837  0 000021   200005 474500                    LDP4    @ECCSC,,AUTO
         0 000022   400000 720100                    LXL0    0,,PR4
         0 000023   100002 440100                    SXL0    2,,PR1

      200      838    1           D$->B$DO.EVID=EVID;

    838  0 000024   200006 475500                    LDP5    @EVID,,AUTO
         0 000025   500000 235100                    LDA     0,,PR5
         0 000026   100003 755100                    STA     3,,PR1

      201      839    1           D$->B$DO.ENTER=EPTR$;

    839  0 000027   200007 476500                    LDP6    @EPTR$,,AUTO
         0 000030   600000 236100                    LDQ     0,,PR6
         0 000031   100001 756100                    STQ     1,,PR1
PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:42   

      202      840    1           D$->B$DO.ECCSZ=MINIMUM(ECCSZ,SIZEW(B$DO.ECCINFO));

    840  0 000032   000005 236007                    LDQ     5,DL
         0 000033   200010 477500                    LDP7    @ECCSZ,,AUTO
         0 000034   700000 116100                    CMPQ    0,,PR7
         0 000035   000040 602000 0                  TNC     s:840+6
         0 000036   000040 600000 0                  TZE     s:840+6
         0 000037   700000 236100                    LDQ     0,,PR7
         0 000040   100005 756100                    STQ     5,,PR1

      203      841        /*                                                                    */
      204      842    1           D$->B$DO.BUSY='1'B;

    842  0 000041   400000 236003                    LDQ     -131072,DU
         0 000042   100002 256100                    ORSQ    2,,PR1

      205      843    1           D$->B$DO.SCHDDO='1'B;

    843  0 000043   100000 236003                    LDQ     32768,DU
         0 000044   100002 256100                    ORSQ    2,,PR1

      206      844    1           D$->B$DO.LNK$=ADDR(NIL);

    844  0 000045   000001 236000 xsym               LDQ     B_VECTNIL+1
         0 000046   100000 756100                    STQ     0,,PR1

      207      845                %LOCK (G#=S_UDLGATE);

    846  0 000047   000000 630400 1                  EPPR0   0
         0 000050   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000051   000000 701000 xent               TSX1    HFC$LOCK
         0 000052   000000 011000                    NOP     0

      208      848    1           D$=ADDR(S$CU$->B$U.DL$);

    848  0 000053   000000 236000 xsym               LDQ     S$CU$
PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:43   
         0 000054   000015 036003                    ADLQ    13,DU
         0 000055   200011 756100                    STQ     D$,,AUTO

      209      849    2           DO WHILE (D$->B$DO.LNK$ ~= ADDR(NIL));

    849  0 000056   000062 710000 0                  TRA     s:851

      210      850    2              D$=D$->B$DO.LNK$;

    850  0 000057   200011 470500                    LDP0    D$,,AUTO
         0 000060   000000 236100                    LDQ     0,,PR0
         0 000061   200011 756100                    STQ     D$,,AUTO

      211      851    2           END;

    851  0 000062   200011 470500                    LDP0    D$,,AUTO
         0 000063   000000 236100                    LDQ     0,,PR0
         0 000064   000001 116000 xsym               CMPQ    B_VECTNIL+1
         0 000065   000057 601000 0                  TNZ     s:850

      212      852    1           D$->B$DO.LNK$=DO$;

    852  0 000066   200003 471500                    LDP1    @DO$,,AUTO
         0 000067   100000 236100                    LDQ     0,,PR1
         0 000070   000000 756100                    STQ     0,,PR0

      213      853                %UNLOCK (G#=S_UDLGATE);

    854  0 000071   000000 630400 1                  EPPR0   0
         0 000072   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000073   000000 701000 xent               TSX1    HFC$UNLOCK
         0 000074   000000 011000                    NOP     0

      214      856    1           RETURN;

    856  0 000075   000000 702200 xent               TSX2  ! X66_ARET

PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:44   
      215      857        %EJECT;
PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:45   
      216      858    1   GDOBLK: PROC(DDD$);

    858  0 000076   200014 741300       GDOBLK       STX1  ! U#+2,,AUTO

    858  0 000077                       EV4          null
      217      859    2   DCL   DDD$ PTR;
      218      860    2   EV4:    ;
      219      861                %LOCK (G#=S_DOGATE);

    862  0 000077   000001 630400 1                  EPPR0   1
         0 000100   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000101   000000 701000 xent               TSX1    HFC$LOCK
         0 000102   000000 011000                    NOP     0

      220      864    2           DDD$=S_DL$;

    864  0 000103   000000 470400 xsym               LDP0    S_DL$_BYP$
         0 000104   000000 236100                    LDQ     0,,PR0
         0 000105   200015 471500                    LDP1    @DDD$,,AUTO
         0 000106   100000 756100                    STQ     0,,PR1

      221      865    2           IF DDD$ = ADDR(NIL) THEN

    865  0 000107   000001 116000 xsym               CMPQ    B_VECTNIL+1
         0 000110   000132 601000 0                  TNZ     s:874

      222      866    3              DO;

      223      867                      %UNLOCK (G#=S_DOGATE);

    868  0 000111   000001 630400 1                  EPPR0   1
         0 000112   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000113   000000 701000 xent               TSX1    HFC$UNLOCK
         0 000114   000000 011000                    NOP     0

      224      870    3                 CALL SSR$REG(%SS_SL,ADDR(NIL),1); /* SLEEP A SECOND             */

PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:46   
    870  0 000115   000001 236000 xsym               LDQ     B_VECTNIL+1
         0 000116   200016 756100                    STQ     @DDD$+1,,AUTO
         0 000117   000003 236000 1                  LDQ     3
         0 000120   200021 756100                    STQ     @DDD$+4,,AUTO
         0 000121   200016 630500                    EPPR0   @DDD$+1,,AUTO
         0 000122   200020 450500                    STP0    @DDD$+3,,AUTO
         0 000123   000004 236000 1                  LDQ     4
         0 000124   200017 756100                    STQ     @DDD$+2,,AUTO
         0 000125   200017 630500                    EPPR0   @DDD$+2,,AUTO
         0 000126   000021 631400 xsym               EPPR1   B_VECTNIL+17
         0 000127   000000 701000 xent               TSX1    SSR$REG
         0 000130   000000 011000                    NOP     0

      225      871    3                 GOTO EV4;                 /* THEN TRY AGAIN                     */

    871  0 000131   000077 710000 0                  TRA     EV4

      226      872    3              END;
      227      873    2           ELSE
      228      874    2              S_DL$=S_DL$->B$DO.LNK$;

    874  0 000132   000000 473500                    LDP3    0,,PR0
         0 000133   300000 236100                    LDQ     0,,PR3
         0 000134   000000 756100                    STQ     0,,PR0

      229      875                %INC_COUNTER (ITEM=DOLISTS);

    876  0 000135   000000 473400 xsym               LDP3    P_RESOURCE$
         0 000136   300071 235100                    LDA     57,,PR3
         0 000137   000001 035007                    ADLA    1,DL
         0 000140   300071 755100                    STA     57,,PR3

    877  0 000141   300072 236100                    LDQ     58,,PR3
         0 000142   300071 116100                    CMPQ    57,,PR3
         0 000143   000145 603000 0                  TRC     s:882

    879  0 000144   300072 755100                    STA     58,,PR3
PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:47   

      230      881                %UNLOCK (G#=S_DOGATE);

    882  0 000145   000001 630400 1                  EPPR0   1
         0 000146   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000147   000000 701000 xent               TSX1    HFC$UNLOCK
         0 000150   000000 011000                    NOP     0

      231      884    2           RETURN;

    884  0 000151   200014 221300                    LDX1  ! U#+2,,AUTO
         0 000152   000001 702211                    TSX2  ! 1,X1

      232      885    2   END;
      233      886        %EJECT;
PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:48   
      234      887        /*                                                                    */
      235      888    1   SSV$SCHDDO: ENTRY(DO$,DMAIN);

    888  0 000153   000000 700200 xent  SSV$SCHDDO   TSX0  ! X66_AUTO_N
         0 000154   000022 000006                    ZERO    18,6

      236      889        /*                                                                    */
      237      890        /*    SSV$SCHDDO IS CALLED TO INDICATE COMPLETION OF PREPARATION OF   */
      238      891        /*    THE SPECIFIED DO LIST ENTRY.  THE ENTRY IS MARKED NOT BUSY AND  */
      239      892    1           DO$->B$DO.BUSY='0'B;

    892  0 000155   200003 470500                    LDP0    @DO$,,AUTO
         0 000156   000000 471500                    LDP1    0,,PR0
         0 000157   000031 236000 xsym               LDQ     B_VECTNIL+25
         0 000160   100002 356100                    ANSQ    2,,PR1

      240      893    1           IF B$USRT$->B$USER.US(DMAIN) = %SS_SW THEN

    893  0 000161   200004 471500                    LDP1    @DMAIN,,AUTO
         0 000162   100000 235100                    LDA     0,,PR1
         0 000163   000004 735000                    ALS     4
         0 000164   000000 473400 xsym               LDP3    B$USRT$
         0 000165   300011 236105                    LDQ     9,AL,PR3
         0 000166   770000 376003                    ANQ     -4096,DU
         0 000167   210000 116003                    CMPQ    69632,DU
         0 000170   000204 601000 0                  TNZ     s:898

      241      894    2              DO;

      242      895    2                 U#=DMAIN;

    895  0 000171   100000 235100                    LDA     0,,PR1
         0 000172   000033 735000                    ALS     27
         0 000173   200012 755100                    STA     U#,,AUTO

      243      896    2                 CALL SSR$RUE(%SS_WU,U#);

PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:49   
    896  0 000174   200012 634500                    EPPR4   U#,,AUTO
         0 000175   200017 454500                    STP4    @DDD$+2,,AUTO
         0 000176   000006 236000 1                  LDQ     6
         0 000177   200016 756100                    STQ     @DDD$+1,,AUTO
         0 000200   200016 630500                    EPPR0   @DDD$+1,,AUTO
         0 000201   000020 631400 xsym               EPPR1   B_VECTNIL+16
         0 000202   000000 701000 xent               TSX1    SSR$RUE
         0 000203   000000 011000                    NOP     0

      244      897    2              END;

      245      898    1           RETURN;

    898  0 000204   000000 702200 xent               TSX2  ! X66_ARET

(unnamed)
 Sect OctLoc
   1     000   000000 006000   000000 006000   000000 000031   000003 006000    ................
   1     004   000002 006000   000000 000027   000005 006000                    ............
      246      899    1   END;
      247      900        %EOD;

PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:50   
--  Include file information  --

   P_PMDAT_C.:E05TOU  is referenced.
   P_PMDAT_R.:E05TOU  cannot be made into a system file and is referenced.
   SS_SCHED_C.:E05TOU  is referenced.
   HF_LOCK_C.:E05TOU  cannot be made into a system file and is referenced.
   B$USER.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure SSV$INITDO.
PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:51   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    15-0-0/w PTR         r     1 @DDD$                      4-0-0/w PTR         r     1 @DMAIN
     3-0-0/w PTR         r     1 @DO$                       5-0-0/w PTR         r     1 @ECCSC
    10-0-0/w PTR         r     1 @ECCSZ                     7-0-0/w PTR         r     1 @EPTR$
     6-0-0/w PTR         r     1 @EVID                     11-0-0/w PTR         r     1 D$
    *0-0-0/w PTR         r     1 DDD$                      *0-0-0/w UBIN        r     1 DMAIN
    *0-0-0/w PTR         r     1 DO$                       *0-0-0/w UBIN        r     1 ECCSC
    *0-0-0/w UBIN        r     1 ECCSZ                     *0-0-0/w EPTR        r     1 EPTR$
    *0-0-0/w UBIN        r     1 EVID                      12-0-0/b UBIN(9)     r     1 U#

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$USRT$                    0-0-0/w PTR         r     1 P_RESOURCE$
     0-0-0/w PTR         r     1 S$CU$                      0-0-0/w PTR         r     1 S_DL$_BYP$
     0-0-0/w SBIN        r     1 S_DOGATE                   0-0-0/w SBIN        r     1 S_UDLGATE

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(396)   r     1 B$DO                       0-0-0/d STRC(576)   r     1 B$U
     0-0-0/w STRC(576)   r     1 B$USER(0:0)                0-0-0/w STRC(2268)  r     1 P_RESOURCE
     0-0-0/w PTR         r     1 S_DL$


   Procedure SSV$INITDO requires 133 words for executable code.
PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:52   
   Procedure SSV$INITDO requires 18 words of local(AUTO) storage.
PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:53   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:54   
          MINI XREF LISTING

B$DO
       183**DCL       835<<ASSIGN
B$DO.BUSY
       186**DCL       842<<ASSIGN    892<<ASSIGN
B$DO.ECCINFO
       199**DCL       200--REDEF     840--ASSIGN
B$DO.ECCSC
       192**DCL       837<<ASSIGN
B$DO.ECCSZ
       198**DCL       840<<ASSIGN
B$DO.ENTER
       185**DCL       839<<ASSIGN
B$DO.EVID
       193**DCL       838<<ASSIGN
B$DO.LNK$
       184**DCL       844<<ASSIGN    849>>DOWHILE   850>>ASSIGN    852<<ASSIGN    874>>ASSIGN
B$DO.SCHDDO
       188**DCL       843<<ASSIGN
B$DO.WSR
       191**DCL       836<<ASSIGN
B$U.DL$
       174**DCL       848--ASSIGN
B$U.MISC
       178**DCL       179--REDEF
B$USER.MISC
       254**DCL       255--REDEF
B$USER.US
       241**DCL       893>>IF
B$USRT$
       266**DCL       893>>IF
D$
       824**DCL       834<<ASSIGN    835>>ASSIGN    836>>ASSIGN    837>>ASSIGN    838>>ASSIGN    839>>ASSIGN
PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:55   
       840>>ASSIGN    842>>ASSIGN    843>>ASSIGN    844>>ASSIGN    848<<ASSIGN    849>>DOWHILE   850<<ASSIGN
       850>>ASSIGN    852>>ASSIGN
DDD$ IN PROCEDURE GDOBLK
       859**DCL       858--PROC      864<<ASSIGN    865>>IF
DMAIN
         9**DCL         6--PROC      836>>ASSIGN    888--ENTRY     893>>IF        895>>ASSIGN
DO$
         8**DCL         6--PROC      833<>CALL      834>>ASSIGN    852>>ASSIGN    888--ENTRY     892>>ASSIGN
ECCSC
        10**DCL         6--PROC      837>>ASSIGN
ECCSZ
        14**DCL         6--PROC      840>>ASSIGN
EPTR$
        13**DCL         6--PROC      839>>ASSIGN
EV4 IN PROCEDURE GDOBLK
       858**LABEL     871--GOTO
EVID
        12**DCL         6--PROC      838>>ASSIGN
GDOBLK
       858**PROC      833--CALL
HFC$LOCK
       281**DCL-ENT   846--CALL      862--CALL
HFC$UNLOCK
       281**DCL-ENT   854--CALL      868--CALL      882--CALL
P_NSCPU
       803**DCL       804--REDEF
P_RESOURCE.RES
       676**DCL       743--REDEF
P_RESOURCE.RES.DOLISTS.CURRENT
       731**DCL       876<<ASSIGN    876>>ASSIGN    877>>IF        879>>ASSIGN
P_RESOURCE.RES.DOLISTS.PEAK
       732**DCL       877>>IF        879<<ASSIGN
P_RESOURCE$
       756**DCL       644--IMP-PTR   876>>ASSIGN    876>>ASSIGN    877>>IF        877>>IF        879>>ASSIGN
       879>>ASSIGN
P_UPTIME
PL6.E3A0      #002=SSV$INITDO File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:56   
       792**DCL       793--REDEF
S$CU$
       265**DCL       848>>ASSIGN
SSR$REG
       826**DCL-ENT   870--CALL
SSR$RUE
       827**DCL-ENT   896--CALL
S_DL$
       829**DCL       864>>ASSIGN    874<<ASSIGN    874>>ASSIGN
S_DL$_BYP$
       828**DCL       829--IMP-PTR   864>>ASSIGN    874>>ASSIGN    874>>ASSIGN
S_DOGATE
       831**DCL       862<>CALL      868<>CALL      882<>CALL
S_UDLGATE
       830**DCL       846<>CALL      854<>CALL
U#
       825**DCL       895<<ASSIGN    896<>CALL

PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:57   
      248        1        /*T***********************************************************/
      249        2        /*T*                                                         */
      250        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      251        4        /*T*                                                         */
      252        5        /*T***********************************************************/
      253        6        %EJECT;
PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:58   
      254        7        /*                                                                    */
      255        8        SSV$XXDO: PROC(USR,ECCSC,EVID) ALTRET;
      256        9        /*                                                                    */
      257       10    1   DCL   USR UBIN BYTE CALIGNED;           /* USER NUMBER                        */
      258       11    1   DCL   ECCSC UBIN(36);                   /* EVENT SUBCODE                      */
      259       12    1   DCL   DOPTR$ REDEF ECCSC PTR;           /* DO LIST ENTRY POINTER              */
      260       13    1   DCL   EVID UBIN(36);                    /* EVENT IDENTIFIER                   */
      261       14        /*                                                                    */
      262       15        /*         THIS PROCEDURE DELETES AN ENTRY FROM A USER'S DO LIST.     */
      263       16        /*         IF EVID IS NOT SPECIFIED, THEN DOPTR$ IS A POINTER TO AN   */
      264       17        /*         ENTRY TO BE DELETED FROM THE CURRENT USERS DO LIST. IN THIS*/
      265       18        /*         CASE USR IS NOT USED.  IF EVID IS SPECIFIED, AN ENTRY      */
      266       19        /*         ON THE DO LIST OF THE USER SPECIFIED BY USR, CONTAINING    */
      267       20        /*         ECCSC AND EVID, IS DELETED.                                */
      268       21        /*                                                                    */
      269       22    1   DCL   D$ PTR;                           /* DO LIST POINTER                    */
      270       23    1   DCL   D1$ PTR;                          /* DO LIST POINTER (PREV ENTRY)       */
      271       24    1   DCL   D2$ PTR;
      272       25    1   DCL   S_DL$_BYP$ PTR SYMREF READONLY;   /* EMPTY DO LIST HEAD                 */
      273       26    1   DCL   S_DL$ PTR BASED (S_DL$_BYP$);     /* EMPTY DO LIST HEAD                 */
      274       27    1   DCL   S_UDLGATE SBIN SYMREF;
      275       28    1   DCL   S_DOGATE SBIN SYMREF;
      276       29    1   DCL   S_CUN UBIN SYMREF;
      277       30    1   DCL SC_DOLIST ENTRY CONV(2,0);
      278       31        /*                                                                    */
      279       32        %INCLUDE B$USER;
      280      248        %B$USERREFS;
      281      252        %INCLUDE HF_LOCK_C;
      282      266        %INCLUDE P_PMDAT_R;
      283      574        /*                                                                    */
      284      575              %LOCK (G#=S_UDLGATE);
      285      578              %LOCK (G#=S_DOGATE);
      286      581    1           IF ADDR(EVID) ~= ADDR(NIL) THEN
      287      582    2              DO;
      288      583    2                 D$=ADDR(B$USRT$->B$USER.DL$(USR));
      289      584    2   DO1B:         IF D$ -> B$DO.LNK$ ~= ADDR(NIL)
      290      585    3                 THEN DO;
PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:59   
      291      586    3                       IF (D$ -> B$DO.LNK$ -> B$DO.ECCSC = ECCSC)
      292      587    3                         AND (D$ -> B$DO.LNK$ -> B$DO.EVID = EVID)
      293      588    3                       THEN
      294      589    3                          GOTO DO1A;
      295      590    3                       ELSE
      296      591    3                          D$ = D$ -> B$DO.LNK$;
      297      592    3                       GOTO DO1B;
      298      593    3                    END;
      299      594    2              END;
      300      595    1           ELSE
      301      596    2              DO;
      302      597    2                 D$=ADDR(B$USRT$->B$USER.DL$(S_CUN));
      303      598    2   DO1C:         IF D$ -> B$DO.LNK$ ~= ADDR(NIL)
      304      599    3                 THEN DO;
      305      600    3                       IF D$ -> B$DO.LNK$ = DOPTR$
      306      601    3                       THEN
      307      602    3                          GOTO DO1A;
      308      603    3                       ELSE
      309      604    3                          D$ = D$ -> B$DO.LNK$;
      310      605    3                       GOTO DO1C;
      311      606    3                    END;
      312      607    2              END;
      313      608                %UNLOCK (G# = S_DOGATE);
      314      611                %UNLOCK (G# = S_UDLGATE);
      315      614    1           ALTRETURN;
      316      615
      317      616    1   DO1A:
      318      617    1           D1$=D$->B$DO.LNK$;
      319      618    1           D2$=D1$;
      320      619    1   DO1D:   IF D1$->B$DO.CONT
      321      620    2           THEN DO;
      322      621                      %DEC_COUNTER (ITEM=DOLISTS);
      323      627    2                 D1$=D1$->B$DO.LNK$;
      324      628    2                 GOTO DO1D;
      325      629    2              END;
      326      630    1           D$->B$DO.LNK$=D1$->B$DO.LNK$;
      327      631    1           D1$->B$DO.LNK$=S_DL$;
PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:60   
      328      632    1           IF D2$=ADDR(NIL) THEN CALL SC_DOLIST; /* Screech to get info          */
      329      633    1           S_DL$=D2$;
      330      634                %DEC_COUNTER (ITEM=DOLISTS);
      331      640                %UNLOCK (G#=S_DOGATE);
      332      643                %UNLOCK (G#=S_UDLGATE);
      333      646    1           RETURN;
      334      647    1   END SSV$XXDO;
      335      648        %EOD;

PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:61   
--  Include file information  --

   P_PMDAT_C.:E05TOU  is referenced.
   P_PMDAT_R.:E05TOU  cannot be made into a system file and is referenced.
   HF_LOCK_C.:E05TOU  cannot be made into a system file and is referenced.
   B$USER.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure SSV$XXDO.

   Procedure SSV$XXDO requires 112 words for executable code.
   Procedure SSV$XXDO requires 12 words of local(AUTO) storage.

PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:62   

 Object Unit name= SSV$XXDO                                   File name= SSV$EVENT.:E05TOU
 UTS= JUL 30 '97 06:01:14.48 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none   112    160  SSV$XXDO
    1  RoData even  none     2      2  SSV$XXDO

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes    yes     yes      Std        3  SSV$XXDO

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       1 HFC$LOCK
         yes           Std       1 HFC$UNLOCK
                       nStd      0 X66_AUTO_3
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET
PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:63   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     SC_DOLIST                        r    S_DL$_BYP$                            S_UDLGATE
     S_DOGATE                              S_CUN                                 B$USRT$
     P_RESOURCE$                           P_UPTIME                              P_NSCPU
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ASLENTSID                             ISSID
PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:64   


      248        1        /*T***********************************************************/
      249        2        /*T*                                                         */
      250        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      251        4        /*T*                                                         */
      252        5        /*T***********************************************************/
      253        6        %EJECT;
PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:65   
      254        7        /*                                                                    */
      255        8        SSV$XXDO: PROC(USR,ECCSC,EVID) ALTRET;

      8  0 000000   000000 700200 xent  SSV$XXDO     TSX0  ! X66_AUTO_3
         0 000001   000014 000003                    ZERO    12,3

      256        9        /*                                                                    */
      257       10    1   DCL   USR UBIN BYTE CALIGNED;           /* USER NUMBER                        */
      258       11    1   DCL   ECCSC UBIN(36);                   /* EVENT SUBCODE                      */
      259       12    1   DCL   DOPTR$ REDEF ECCSC PTR;           /* DO LIST ENTRY POINTER              */
      260       13    1   DCL   EVID UBIN(36);                    /* EVENT IDENTIFIER                   */
      261       14        /*                                                                    */
      262       15        /*         THIS PROCEDURE DELETES AN ENTRY FROM A USER'S DO LIST.     */
      263       16        /*         IF EVID IS NOT SPECIFIED, THEN DOPTR$ IS A POINTER TO AN   */
      264       17        /*         ENTRY TO BE DELETED FROM THE CURRENT USERS DO LIST. IN THIS*/
      265       18        /*         CASE USR IS NOT USED.  IF EVID IS SPECIFIED, AN ENTRY      */
      266       19        /*         ON THE DO LIST OF THE USER SPECIFIED BY USR, CONTAINING    */
      267       20        /*         ECCSC AND EVID, IS DELETED.                                */
      268       21        /*                                                                    */
      269       22    1   DCL   D$ PTR;                           /* DO LIST POINTER                    */
      270       23    1   DCL   D1$ PTR;                          /* DO LIST POINTER (PREV ENTRY)       */
      271       24    1   DCL   D2$ PTR;
      272       25    1   DCL   S_DL$_BYP$ PTR SYMREF READONLY;   /* EMPTY DO LIST HEAD                 */
      273       26    1   DCL   S_DL$ PTR BASED (S_DL$_BYP$);     /* EMPTY DO LIST HEAD                 */
      274       27    1   DCL   S_UDLGATE SBIN SYMREF;
      275       28    1   DCL   S_DOGATE SBIN SYMREF;
      276       29    1   DCL   S_CUN UBIN SYMREF;
      277       30    1   DCL SC_DOLIST ENTRY CONV(2,0);
      278       31        /*                                                                    */
      279       32        %INCLUDE B$USER;
      280      248        %B$USERREFS;
      281      252        %INCLUDE HF_LOCK_C;
      282      266        %INCLUDE P_PMDAT_R;
      283      574        /*                                                                    */
      284      575              %LOCK (G#=S_UDLGATE);

    576  0 000002   000000 630400 1                  EPPR0   0
PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:66   
         0 000003   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000004   000000 701000 xent               TSX1    HFC$LOCK
         0 000005   000000 011000                    NOP     0

      285      578              %LOCK (G#=S_DOGATE);

    579  0 000006   000001 630400 1                  EPPR0   1
         0 000007   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000010   000000 701000 xent               TSX1    HFC$LOCK
         0 000011   000000 011000                    NOP     0

      286      581    1           IF ADDR(EVID) ~= ADDR(NIL) THEN

    581  0 000012   200005 236100                    LDQ     @EVID,,AUTO
         0 000013   000001 116000 xsym               CMPQ    B_VECTNIL+1
         0 000014   000050 600000 0                  TZE     s:597

      287      582    2              DO;

      288      583    2                 D$=ADDR(B$USRT$->B$USER.DL$(USR));

    583  0 000015   200003 470500                    LDP0    @USR,,AUTO
         0 000016   000100 101500                    MRL     fill='000'O
         0 000017   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         0 000020   200012 000004                    ADSC9   D2$+2,,AUTO              cn=0,n=4
         0 000021   200012 236100                    LDQ     D2$+2,,AUTO
         0 000022   000004 736000                    QLS     4
         0 000023   000022 736000                    QLS     18
         0 000024   000015 036003                    ADLQ    13,DU
         0 000025   000000 036000 xsym               ADLQ    B$USRT$
         0 000026   200006 756100                    STQ     D$,,AUTO

      289      584    2   DO1B:         IF D$ -> B$DO.LNK$ ~= ADDR(NIL)

    584  0 000027   200006 470500       DO1B         LDP0    D$,,AUTO
         0 000030   000000 236100                    LDQ     0,,PR0
         0 000031   000001 116000 xsym               CMPQ    B_VECTNIL+1
PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:67   
         0 000032   000066 600000 0                  TZE     s:609

      290      585    3                 THEN DO;

      291      586    3                       IF (D$ -> B$DO.LNK$ -> B$DO.ECCSC = ECCSC)

    586  0 000033   000000 471500                    LDP1    0,,PR0
         0 000034   200004 473500                    LDP3    @ECCSC,,AUTO
         0 000035   100002 236100                    LDQ     2,,PR1
         0 000036   777777 376007                    ANQ     -1,DL
         0 000037   300000 116100                    CMPQ    0,,PR3
         0 000040   000045 601000 0                  TNZ     s:591
         0 000041   200005 474500                    LDP4    @EVID,,AUTO
         0 000042   100003 236100                    LDQ     3,,PR1
         0 000043   400000 116100                    CMPQ    0,,PR4
         0 000044   000077 600000 0                  TZE     DO1A

      292      587    3                         AND (D$ -> B$DO.LNK$ -> B$DO.EVID = EVID)
      293      588    3                       THEN
      294      589    3                          GOTO DO1A;
      295      590    3                       ELSE
      296      591    3                          D$ = D$ -> B$DO.LNK$;

    591  0 000045   000000 236100                    LDQ     0,,PR0
         0 000046   200006 756100                    STQ     D$,,AUTO

      297      592    3                       GOTO DO1B;

    592  0 000047   000027 710000 0                  TRA     DO1B

      298      593    3                    END;
      299      594    2              END;
      300      595    1           ELSE
      301      596    2              DO;

      302      597    2                 D$=ADDR(B$USRT$->B$USER.DL$(S_CUN));

PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:68   
    597  0 000050   000000 236000 xsym               LDQ     S_CUN
         0 000051   000026 736000                    QLS     22
         0 000052   000015 036003                    ADLQ    13,DU
         0 000053   000000 036000 xsym               ADLQ    B$USRT$
         0 000054   200006 756100                    STQ     D$,,AUTO

      303      598    2   DO1C:         IF D$ -> B$DO.LNK$ ~= ADDR(NIL)

    598  0 000055   200006 470500       DO1C         LDP0    D$,,AUTO
         0 000056   000000 236100                    LDQ     0,,PR0
         0 000057   000001 116000 xsym               CMPQ    B_VECTNIL+1
         0 000060   000066 600000 0                  TZE     s:609

      304      599    3                 THEN DO;

      305      600    3                       IF D$ -> B$DO.LNK$ = DOPTR$

    600  0 000061   200004 471500                    LDP1    @ECCSC,,AUTO
         0 000062   100000 116100                    CMPQ    0,,PR1
         0 000063   000077 600000 0                  TZE     DO1A

      306      601    3                       THEN
      307      602    3                          GOTO DO1A;
      308      603    3                       ELSE
      309      604    3                          D$ = D$ -> B$DO.LNK$;

    604  0 000064   200006 756100                    STQ     D$,,AUTO

      310      605    3                       GOTO DO1C;

    605  0 000065   000055 710000 0                  TRA     DO1C

      311      606    3                    END;
      312      607    2              END;
      313      608                %UNLOCK (G# = S_DOGATE);

    609  0 000066   000001 630400 1                  EPPR0   1
PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:69   
         0 000067   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000070   000000 701000 xent               TSX1    HFC$UNLOCK
         0 000071   000000 011000                    NOP     0

      314      611                %UNLOCK (G# = S_UDLGATE);

    612  0 000072   000000 630400 1                  EPPR0   0
         0 000073   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000074   000000 701000 xent               TSX1    HFC$UNLOCK
         0 000075   000000 011000                    NOP     0

      315      614    1           ALTRETURN;

    614  0 000076   000000 702200 xent               TSX2  ! X66_AALT

      316      615
      317      616    1   DO1A:
      318      617    1           D1$=D$->B$DO.LNK$;

    617  0 000077   000000 236100       DO1A         LDQ     0,,PR0
         0 000100   200007 756100                    STQ     D1$,,AUTO

      319      618    1           D2$=D1$;

    618  0 000101   200010 756100                    STQ     D2$,,AUTO

      320      619    1   DO1D:   IF D1$->B$DO.CONT

    619  0 000102   200007 470500       DO1D         LDP0    D1$,,AUTO
         0 000103   000002 236100                    LDQ     2,,PR0
         0 000104   200000 316003                    CANQ    65536,DU
         0 000105   000121 600000 0                  TZE     s:630

      321      620    2           THEN DO;

      322      621                      %DEC_COUNTER (ITEM=DOLISTS);

PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:70   
    622  0 000106   000000 471400 xsym               LDP1    P_RESOURCE$
         0 000107   100071 235100                    LDA     57,,PR1
         0 000110   000001 135007                    SBLA    1,DL
         0 000111   100071 755100                    STA     57,,PR1

    623  0 000112   100071 236100                    LDQ     57,,PR1
         0 000113   100073 116100                    CMPQ    59,,PR1
         0 000114   000116 603000 0                  TRC     s:627

    625  0 000115   100073 756100                    STQ     59,,PR1

      323      627    2                 D1$=D1$->B$DO.LNK$;

    627  0 000116   000000 236100                    LDQ     0,,PR0
         0 000117   200007 756100                    STQ     D1$,,AUTO

      324      628    2                 GOTO DO1D;

    628  0 000120   000102 710000 0                  TRA     DO1D

      325      629    2              END;
      326      630    1           D$->B$DO.LNK$=D1$->B$DO.LNK$;

    630  0 000121   000000 236100                    LDQ     0,,PR0
         0 000122   200006 471500                    LDP1    D$,,AUTO
         0 000123   100000 756100                    STQ     0,,PR1

      327      631    1           D1$->B$DO.LNK$=S_DL$;

    631  0 000124   000000 473400 xsym               LDP3    S_DL$_BYP$
         0 000125   300000 236100                    LDQ     0,,PR3
         0 000126   000000 756100                    STQ     0,,PR0

      328      632    1           IF D2$=ADDR(NIL) THEN CALL SC_DOLIST; /* Screech to get info          */

    632  0 000127   200010 236100                    LDQ     D2$,,AUTO
         0 000130   000001 116000 xsym               CMPQ    B_VECTNIL+1
PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:71   
         0 000131   000134 601000 0                  TNZ     s:633

    632  0 000132   000000 713400 xsym               CLIMB   SC_DOLIST
         0 000133   000000 600000 xsid               climb   nvectors=         0

      329      633    1           S_DL$=D2$;

    633  0 000134   200010 236100                    LDQ     D2$,,AUTO
         0 000135   000000 470400 xsym               LDP0    S_DL$_BYP$
         0 000136   000000 756100                    STQ     0,,PR0

      330      634                %DEC_COUNTER (ITEM=DOLISTS);

    635  0 000137   000000 471400 xsym               LDP1    P_RESOURCE$
         0 000140   100071 235100                    LDA     57,,PR1
         0 000141   000001 135007                    SBLA    1,DL
         0 000142   100071 755100                    STA     57,,PR1

    636  0 000143   100071 236100                    LDQ     57,,PR1
         0 000144   100073 116100                    CMPQ    59,,PR1
         0 000145   000147 603000 0                  TRC     s:641

    638  0 000146   100073 756100                    STQ     59,,PR1

      331      640                %UNLOCK (G#=S_DOGATE);

    641  0 000147   000001 630400 1                  EPPR0   1
         0 000150   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000151   000000 701000 xent               TSX1    HFC$UNLOCK
         0 000152   000000 011000                    NOP     0

      332      643                %UNLOCK (G#=S_UDLGATE);

    644  0 000153   000000 630400 1                  EPPR0   0
         0 000154   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000155   000000 701000 xent               TSX1    HFC$UNLOCK
         0 000156   000000 011000                    NOP     0
PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:72   

      333      646    1           RETURN;

    646  0 000157   000000 702200 xent               TSX2  ! X66_ARET

(unnamed)
 Sect OctLoc
   1     000   000000 006000   000000 006000                                    ........
      334      647    1   END SSV$XXDO;
      335      648        %EOD;

PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:73   
--  Include file information  --

   P_PMDAT_C.:E05TOU  is referenced.
   P_PMDAT_R.:E05TOU  cannot be made into a system file and is referenced.
   HF_LOCK_C.:E05TOU  cannot be made into a system file and is referenced.
   B$USER.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure SSV$XXDO.
PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:74   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @ECCSC                     5-0-0/w PTR         r     1 @EVID
     3-0-0/w PTR         r     1 @USR                       6-0-0/w PTR         r     1 D$
     7-0-0/w PTR         r     1 D1$                       10-0-0/w PTR         r     1 D2$
    *0-0-0/w PTR         r     1 DOPTR$                    *0-0-0/w UBIN        r     1 ECCSC
    *0-0-0/w UBIN        r     1 EVID                      *0-0-0/c UBIN(9)     r     1 USR

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$USRT$                    0-0-0/w PTR         r     1 P_RESOURCE$
     0-0-0/w UBIN        r     1 S_CUN                      0-0-0/w PTR         r     1 S_DL$_BYP$
     0-0-0/w SBIN        r     1 S_DOGATE                   0-0-0/w SBIN        r     1 S_UDLGATE

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(396)   r     1 B$DO                       0-0-0/w STRC(576)   r     1 B$USER(0:0)
     0-0-0/w STRC(2268)  r     1 P_RESOURCE                 0-0-0/w PTR         r     1 S_DL$


   Procedure SSV$XXDO requires 112 words for executable code.
   Procedure SSV$XXDO requires 12 words of local(AUTO) storage.
PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:75   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:76   
          MINI XREF LISTING

B$DO.CONT
       171**DCL       619>>IF
B$DO.ECCINFO
       183**DCL       184--REDEF
B$DO.ECCSC
       176**DCL       586>>IF
B$DO.EVID
       177**DCL       586>>IF
B$DO.LNK$
       168**DCL       584>>IF        586>>IF        586>>IF        591>>ASSIGN    598>>IF        600>>IF
       604>>ASSIGN    617>>ASSIGN    627>>ASSIGN    630<<ASSIGN    630>>ASSIGN    631<<ASSIGN
B$U.MISC
       162**DCL       163--REDEF
B$USER.DL$
       234**DCL       583--ASSIGN    597--ASSIGN
B$USER.MISC
       238**DCL       239--REDEF
B$USRT$
       250**DCL       583>>ASSIGN    597>>ASSIGN
D$
        22**DCL       583<<ASSIGN    584>>IF        586>>IF        586>>IF        591<<ASSIGN    591>>ASSIGN
       597<<ASSIGN    598>>IF        600>>IF        604<<ASSIGN    604>>ASSIGN    617>>ASSIGN    630>>ASSIGN
D1$
        23**DCL       617<<ASSIGN    618>>ASSIGN    619>>IF        627<<ASSIGN    627>>ASSIGN    630>>ASSIGN
       631>>ASSIGN
D2$
        24**DCL       618<<ASSIGN    632>>IF        633>>ASSIGN
DO1A
       617**LABEL     589--GOTO      602--GOTO
DO1B
       584**LABEL     592--GOTO
DO1C
PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:77   
       598**LABEL     605--GOTO
DO1D
       619**LABEL     628--GOTO
DOPTR$
        12**DCL       600>>IF
ECCSC
        11**DCL         8--PROC       12--REDEF     586>>IF
EVID
        13**DCL         8--PROC      581--IF        586>>IF
HFC$LOCK
       265**DCL-ENT   576--CALL      579--CALL
HFC$UNLOCK
       265**DCL-ENT   609--CALL      612--CALL      641--CALL      644--CALL
P_NSCPU
       554**DCL       555--REDEF
P_RESOURCE.RES
       427**DCL       494--REDEF
P_RESOURCE.RES.DOLISTS.CURRENT
       482**DCL       622<<ASSIGN    622>>ASSIGN    623>>IF        625>>ASSIGN    635<<ASSIGN    635>>ASSIGN
       636>>IF        638>>ASSIGN
P_RESOURCE.RES.DOLISTS.MIN
       484**DCL       623>>IF        625<<ASSIGN    636>>IF        638<<ASSIGN
P_RESOURCE$
       507**DCL       395--IMP-PTR   622>>ASSIGN    622>>ASSIGN    623>>IF        623>>IF        625>>ASSIGN
       625>>ASSIGN    635>>ASSIGN    635>>ASSIGN    636>>IF        636>>IF        638>>ASSIGN    638>>ASSIGN
P_UPTIME
       543**DCL       544--REDEF
SC_DOLIST
        30**DCL-ENT   632--CALL
S_CUN
        29**DCL       597>>ASSIGN
S_DL$
        26**DCL       631>>ASSIGN    633<<ASSIGN
S_DL$_BYP$
        25**DCL        26--IMP-PTR   631>>ASSIGN    633>>ASSIGN
S_DOGATE
PL6.E3A0      #003=SSV$XXDO File=SSV$EVENT.:E05TSI                               WED 07/30/97 06:01 Page:78   
        28**DCL       579<>CALL      609<>CALL      641<>CALL
S_UDLGATE
        27**DCL       576<>CALL      612<>CALL      644<>CALL
USR
        10**DCL         8--PROC      583>>ASSIGN

PL6.E3A0      #004=SSV$DORUND File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:79   
      336        1        /*T***********************************************************/
      337        2        /*T*                                                         */
      338        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      339        4        /*T*                                                         */
      340        5        /*T***********************************************************/
      341        6        SSV$DORUND: PROC(WSR);
      342        7        /*                                                                    */
      343        8        /*                                                                    */
      344        9        /*         DELETE ALL DO LIST ENTRIES FOR THE CURRENT USER            */
      345       10        /*         CALLED BY STEP WHEN RUNNING DOWN USER.                     */
      346       11        /*                                                                    */
      347       12    1   DCL WSR UBIN(36);                       /* DOMAIN #                           */
      348       13        /*                                                                    */
      349       14    1   DCL D$ PTR;
      350       15    1   DCL DD$ PTR;
      351       16    1   DCL   SSV$XXDO ENTRY(3) ALTRET;
      352       17        /*                                                                    */
      353       18        %INCLUDE B$USER;
      354      234        %B$USERREFS;
      355      238        /*                                                                    */
      356      239    1           D$=S$CU$->B$U.DL$;
      357      240    1   DORNDN: IF D$ = ADDR(NIL) THEN RETURN;
      358      241    1           DD$=D$;
      359      242    1   DORN1:  IF DD$->B$DO.CONT THEN
      360      243    2              DO;
      361      244    2                 DD$=DD$->B$DO.LNK$;
      362      245    2                 GOTO DORN1;
      363      246    2              END;
      364      247    1           DD$=DD$->B$DO.LNK$;
      365      248    1           IF D$->B$DO.WSR = WSR THEN
      366      249    2              DO;
      367      250    2                 IF D$->B$DO.ENTER ~= ENTADDR(NIL) THEN
      368      251    2                    CALL D$->B$DO.ENTER(D$);
      369      252    2                 CALL SSV$XXDO(0,D$);
      370      253    2              END;
      371      254    1           D$=DD$;
      372      255    1           GOTO DORNDN;
PL6.E3A0      #004=SSV$DORUND File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:80   
      373      256    1   END;

PL6.E3A0      #004=SSV$DORUND File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:81   
--  Include file information  --

   B$USER.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure SSV$DORUND.

   Procedure SSV$DORUND requires 47 words for executable code.
   Procedure SSV$DORUND requires 8 words of local(AUTO) storage.

    No errors detected in file SSV$EVENT.:E05TSI    .

PL6.E3A0      #004=SSV$DORUND File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:82   

 Object Unit name= SSV$DORUND                                 File name= SSV$EVENT.:E05TOU
 UTS= JUL 30 '97 06:01:24.24 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none    47     57  SSV$DORUND
    1  RoData even  none     1      1  SSV$DORUND

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes      Std        1  SSV$DORUND

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       3 SSV$XXDO
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     S$CU$                                 B_VECTNIL
PL6.E3A0      #004=SSV$DORUND File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:83   

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #004=SSV$DORUND File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:84   


      336        1        /*T***********************************************************/
      337        2        /*T*                                                         */
      338        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      339        4        /*T*                                                         */
      340        5        /*T***********************************************************/
      341        6        SSV$DORUND: PROC(WSR);

      6  0 000000   000000 700200 xent  SSV$DORUND   TSX0  ! X66_AUTO_1
         0 000001   000010 000001                    ZERO    8,1

      342        7        /*                                                                    */
      343        8        /*                                                                    */
      344        9        /*         DELETE ALL DO LIST ENTRIES FOR THE CURRENT USER            */
      345       10        /*         CALLED BY STEP WHEN RUNNING DOWN USER.                     */
      346       11        /*                                                                    */
      347       12    1   DCL WSR UBIN(36);                       /* DOMAIN #                           */
      348       13        /*                                                                    */
      349       14    1   DCL D$ PTR;
      350       15    1   DCL DD$ PTR;
      351       16    1   DCL   SSV$XXDO ENTRY(3) ALTRET;
      352       17        /*                                                                    */
      353       18        %INCLUDE B$USER;
      354      234        %B$USERREFS;
      355      238        /*                                                                    */
      356      239    1           D$=S$CU$->B$U.DL$;

    239  0 000002   000000 470400 xsym               LDP0    S$CU$
         0 000003   000015 236100                    LDQ     13,,PR0
         0 000004   200004 756100                    STQ     D$,,AUTO

      357      240    1   DORNDN: IF D$ = ADDR(NIL) THEN RETURN;

    240  0 000005   200004 236100       DORNDN       LDQ     D$,,AUTO
         0 000006   000001 116000 xsym               CMPQ    B_VECTNIL+1
         0 000007   000011 601000 0                  TNZ     s:241

PL6.E3A0      #004=SSV$DORUND File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:85   
    240  0 000010   000000 702200 xent               TSX2  ! X66_ARET

      358      241    1           DD$=D$;

    241  0 000011   200005 756100                    STQ     DD$,,AUTO

      359      242    1   DORN1:  IF DD$->B$DO.CONT THEN

    242  0 000012   200005 470500       DORN1        LDP0    DD$,,AUTO
         0 000013   000002 236100                    LDQ     2,,PR0
         0 000014   200000 316003                    CANQ    65536,DU
         0 000015   000021 600000 0                  TZE     s:247

      360      243    2              DO;

      361      244    2                 DD$=DD$->B$DO.LNK$;

    244  0 000016   000000 236100                    LDQ     0,,PR0
         0 000017   200005 756100                    STQ     DD$,,AUTO

      362      245    2                 GOTO DORN1;

    245  0 000020   000012 710000 0                  TRA     DORN1

      363      246    2              END;
      364      247    1           DD$=DD$->B$DO.LNK$;

    247  0 000021   000000 236100                    LDQ     0,,PR0
         0 000022   200005 756100                    STQ     DD$,,AUTO

      365      248    1           IF D$->B$DO.WSR = WSR THEN

    248  0 000023   200003 470500                    LDP0    @WSR,,AUTO
         0 000024   200004 471500                    LDP1    D$,,AUTO
         0 000025   100002 236100                    LDQ     2,,PR1
         0 000026   000022 772000                    QRL     18
         0 000027   000777 376007                    ANQ     511,DL
PL6.E3A0      #004=SSV$DORUND File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:86   
         0 000030   000000 116100                    CMPQ    0,,PR0
         0 000031   000054 601000 0                  TNZ     s:254

      366      249    2              DO;

      367      250    2                 IF D$->B$DO.ENTER ~= ENTADDR(NIL) THEN

    250  0 000032   100001 236100                    LDQ     1,,PR1
         0 000033   000002 116000 xsym               CMPQ    B_VECTNIL+2
         0 000034   000044 600000 0                  TZE     s:252

      368      251    2                    CALL D$->B$DO.ENTER(D$);

    251  0 000035   200004 633500                    EPPR3   D$,,AUTO
         0 000036   200006 453500                    STP3    DD$+1,,AUTO
         0 000037   200006 630500                    EPPR0   DD$+1,,AUTO
         0 000040   100001 220100                    LDX0    1,,PR1
         0 000041   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000042   000000 701010                    TSX1    0,X0
         0 000043   000000 011000                    NOP     0

      369      252    2                 CALL SSV$XXDO(0,D$);

    252  0 000044   200004 630500                    EPPR0   D$,,AUTO
         0 000045   200007 450500                    STP0    DD$+2,,AUTO
         0 000046   000000 236000 1                  LDQ     0
         0 000047   200006 756100                    STQ     DD$+1,,AUTO
         0 000050   200006 630500                    EPPR0   DD$+1,,AUTO
         0 000051   000020 631400 xsym               EPPR1   B_VECTNIL+16
         0 000052   000000 701000 xent               TSX1    SSV$XXDO
         0 000053   000000 011000                    NOP     0

      370      253    2              END;

      371      254    1           D$=DD$;

    254  0 000054   200005 236100                    LDQ     DD$,,AUTO
PL6.E3A0      #004=SSV$DORUND File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:87   
         0 000055   200004 756100                    STQ     D$,,AUTO

      372      255    1           GOTO DORNDN;

    255  0 000056   000005 710000 0                  TRA     DORNDN

(unnamed)
 Sect OctLoc
   1     000   000002 006000                                                    ....
      373      256    1   END;

PL6.E3A0      #004=SSV$DORUND File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:88   
--  Include file information  --

   B$USER.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure SSV$DORUND.
PL6.E3A0      #004=SSV$DORUND File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:89   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @WSR                       4-0-0/w PTR         r     1 D$
     5-0-0/w PTR         r     1 DD$                       *0-0-0/w UBIN        r     1 WSR

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 S$CU$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(396)   r     1 B$DO                       0-0-0/d STRC(576)   r     1 B$U


   Procedure SSV$DORUND requires 47 words for executable code.
   Procedure SSV$DORUND requires 8 words of local(AUTO) storage.

    No errors detected in file SSV$EVENT.:E05TSI    .
PL6.E3A0      #004=SSV$DORUND File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:90   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #004=SSV$DORUND File=SSV$EVENT.:E05TSI                             WED 07/30/97 06:01 Page:91   
          MINI XREF LISTING

B$DO.CONT
       157**DCL       242>>IF
B$DO.ECCINFO
       169**DCL       170--REDEF
B$DO.ENTER
       155**DCL       250>>IF        251>>CALL
B$DO.LNK$
       154**DCL       244>>ASSIGN    247>>ASSIGN
B$DO.WSR
       161**DCL       248>>IF
B$U.DL$
       144**DCL       239>>ASSIGN
B$U.MISC
       148**DCL       149--REDEF
B$USER.MISC
       224**DCL       225--REDEF
D$
        14**DCL       239<<ASSIGN    240>>IF        241>>ASSIGN    248>>IF        250>>IF        251>>CALL
       251<>CALL      252<>CALL      254<<ASSIGN
DD$
        15**DCL       241<<ASSIGN    242>>IF        244<<ASSIGN    244>>ASSIGN    247<<ASSIGN    247>>ASSIGN
       254>>ASSIGN
DORN1
       242**LABEL     245--GOTO
DORNDN
       240**LABEL     255--GOTO
S$CU$
       235**DCL       239>>ASSIGN
SSV$XXDO
        16**DCL-ENT   252--CALL
WSR
        12**DCL         6--PROC      248>>IF
