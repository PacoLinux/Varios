VERSION E05

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:1    
        1        1        /*M*   IRG$RCVR2   RCVR2--CONVERT SYSTEM AREA DUMP TO FILE MANANGED KEY FILE*/
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* PLM=3,IND=5,ENU=0,ECU=0    */
        8        8        RCVR2: PROC MAIN;
        9        9
       10       10        %INCLUDE B_ERRORS_C;
       11     1137        %INCLUDE B_STRINGS_C;
       12     1266        %INCLUDE CP_6;
       13     1347        %INCLUDE CP_6_SUBS;
       14     1887        %INCLUDE FM$GRAN;
       15     1956        %INCLUDE F$DCB;
       16     2005        %INCLUDE I$DISK;
       17     2257        %INCLUDE KQM_MAC_C;
       18     2630        %INCLUDE KQ_SUBS_C;
       19     2930        %INCLUDE M_INFO_C;
       20     3070        %INCLUDE IR_DATA_M;
       21     3234        %INCLUDE NI$TABLES;
       22     3450        %INCLUDE U$JIT_C;
       23     3636    1   DCL B$JIT$ PTR SYMREF;
       24     3637
       25     3638    1   DCL IGL$HLP ENTRY;
       26     3639                                                /* EXTERNAL DATA                      */
       27     3640    1   DCL COPYRIGHT CHAR(64) SYMREF;
       28     3641
       29     3642        %FPT_OPEN (FPTN=OPN_DP,
       30     3643                   DCB=M$DP,
       31     3644                   RES='DP',
       32     3645                   ASN=DEVICE,
       33     3646                   SN=SYSPACK,
       34     3647                   FUN=UPDATE);
       35     3756
       36     3757        %FPT_WAIT (FPTN = WAIT10,
       37     3758                   UNITS = 10,
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:2    
       38     3759                   STCLASS = CONSTANT);
       39     3773
       40     3774        %FPT_READ (FPTN=RD_DP,
       41     3775                   DCB=M$DP,
       42     3776                   BUF=RV_USRDIR,
       43     3777                   KEYS=YES,
       44     3778                   KEY=DP_GRAN);
       45     3817
       46     3818        %FPT_READ (FPTN=RAPAGE,
       47     3819                   DCB=M$DP,
       48     3820                   BUF=APAGE,
       49     3821                   KEYS=YES,
       50     3822                   KEY=DP_GRAN);
       51     3861
       52     3862        %FPT_WRITE (FPTN=WT_DP,
       53     3863                   DCB=M$DP,
       54     3864                   BUF=APAGE,
       55     3865                   KEY=DDIR_GRAN);
       56     3896
       57     3897        %FPT_CLOSE (FPTN=CLS_DP,
       58     3898                   DCB=M$DP,
       59     3899                   DISP=RELEASE);
       60     3941
       61     3942        %FPT_OPEN (FPTN=OPN_EO,
       62     3943                   DCB=M$EO,
       63     3944                   ASN=FILE,
       64     3945                   CTG=YES,
       65     3946                   EXIST=OLDFILE,
       66     3947                   SHARE=NONE,
       67     3948                   FUN=CREATE,
       68     3949                   NAME=DF_NAME,
       69     3950                   ORG=KEYED,
       70     3951                   ACS=DIRECT,
       71     3952                   ACCT=SYSTAC,
       72     3953                   IXTNSIZE=20,
       73     3954                    XTNSIZE=20,
       74     3955                  DISP=NAMED);
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:3    
       75     4064
       76     4065        %FPT_WRITE (FPTN=WTEO,
       77     4066                   KEY=DF_KEY,
       78     4067                   DCB=M$EO);
       79     4098
       80     4099        %FPT_WRITE (FPTN=WAPAGE,
       81     4100                    DCB=M$EO,
       82     4101                    KEY=DF_KEY,
       83     4102                    BUF=APAGE);
       84     4133
       85     4134        %FPT_CLOSE (FPTN=CLS_EO,
       86     4135                   DCB=M$EO,
       87     4136                   ACSVEH=DF_CODE, CHGATT=YES, RELG=YES,
       88     4137                   DISP=SAVE);
       89     4179
       90     4180        %FPT_READ (FPTN=READ_NDIR,
       91     4181                   DCB=M$EO,
       92     4182                   KEY=DF_KEY,
       93     4183                   BUF=NODEDIR,
       94     4184                   KEYS=YES);
       95     4223
       96     4224        /* New declarations for renaming dumpfiles.  FPT DUMP_TEST is used
       97     4225           to obtain the date and time for the filename extension used to
       98     4226           make the name unique.  NEWDFN is the new dumpfile name, in the
       99     4227           TEXTC format required.  VDFN is aliased with DF_NAME (via %SUB)
      100     4228           to reference the DumpFile NAME as a TEXTC string.  RNM_EO is used
      101     4229           to close and rename the existing dumpfile.  %SUB M$EO$ provides
      102     4230           convenient reference to the contents of the M$EO DCB.  */
      103     4231
      104     4232        %FPT_TIME (FPTN=DUMP_TIME,DEST=ANS,SOURCE=CLOCK,DATE=DUMP_DT,TIME=DUMP_TM);
      105     4251        %VLP_NAME (FPTN=NEWDFN,LEN=31);
      106     4278        %VLP_NAMEV (FPTN=VDFN);
      107     4285        %FPT_CLOSE (FPTN=RNM_EO,DCB=M$EO,CHGATT=YES,NAME=NEWDFN,DISP=SAVE);
      108     4327
      109     4328    1   DCL DUMP_DT CHAR(6) STATIC;             /* date in YYMMDD format              */
      110     4329    1   DCL DUMP_TM CHAR(8) STATIC;             /* time in HHMMSSss format            */
      111     4330
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:4    
      112     4331        %SUB VDF_NAME = "ADDR(DF_NAME)->VDFN";
      113     4332        %SUB M$EO$ = "DCBADDR(DCBNUM(M$EO))";
      114     4333
      115     4334
      116     4335    1   DCL M$DP DCB;
      117     4336    1   DCL M$EO DCB;
      118     4337
      119     4338        %VLP_SN (FPTN=SYSPACK,SN='CP-6''S');
      120     4351        %VLP_ATTR(FPTN=DF_CODE);
      121     4365        %VLP_ACSVEH(FPTN=V,VEHICLE='FMM-M12345-7    ',LAST=";");
      122     4382    1   DCL FCGTBL CONSTANT CHAR(64) INIT(
      123     4383    1         ' ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmno0123456789:;<=>?');
      124     4384    1   DCL MTBL CONSTANT CHAR(2) INIT(' M');
      125     4385
      126     4386    1   DCL SYSTAC CONSTANT CHAR(8) DALIGNED INIT(':SYSTAC');
      127     4387
      128     4388    1   DCL DP_GRAN UBIN(36) STATIC SYMDEF INIT(0);
      129     4389    1   DCL LAST_GRAN UBIN(36) STATIC SYMDEF INIT(0);
      130     4390
      131     4391    1   DCL APAGE(0:1023) UBIN(36) STATIC SYMDEF;
      132     4392        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:5    
      133     4393
      134     4394        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:6    
      135     4395        %FM$VID;
      136     4401        %RV_BUFF;
      137     4437        %RV_BUFF (NAME=RV$BUFF,
      138     4438                  STCLASS=BASED);
      139     4474        %RV_USRDIR;
      140     4478        %RV_WSQD;
      141     4482        %RV_WSQD (NAME=B$WSQD,
      142     4483                  STCLASS=BASED);
      143     4487    1   DCL 1 B$CWSQD BASED ALIGNED,
      144     4488    1         2 *(0:255) UBIN(36) UNAL;
      145     4489
      146     4490    1   DCL B$BIT72 BIT(72) BASED ALIGNED;
      147     4491
      148     4492    1   DCL MAX_CG_PAGE UBIN WORD STATIC;
      149     4493    1   DCL FIRST_PAGE SBIN STATIC;
      150     4494    1   DCL LAST_PAGE SBIN STATIC;
      151     4495        %RV_DFNAME;
      152     4499        %RV_DFKEY;
      153     4517        %RV_DFSUBS;
      154     4544        %RV_NODEDIR (FPTN=NODEDIR,
      155     4545                     STCLASS=STATIC,
      156     4546                     N=10);
      157     4563
      158     4564    1   DCL 1 RCVR2D(0:3) STATIC ALIGNED,
      159     4565    1         2 DA UBIN WORD;
      160     4566
      161     4567    1   DCL DINDEX SBIN STATIC SYMDEF INIT(0);
      162     4568
      163     4569    1   DCL DDIR_GRAN UBIN(36) STATIC SYMDEF INIT(0);
      164     4570
      165     4571    1   DCL 1 B$CCBUF BASED,
      166     4572    1         2 NAME CHAR(8) UNAL,
      167     4573    1         2 SUA CHAR(4) UNAL,
      168     4574    1         2 INDX UBIN(9) UNAL;
      169     4575
      170     4576    1   DCL B$OCBUF CHAR(64) BASED;
      171     4577
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:7    
      172     4578    1   DCL B$CHAR(0:2) CHAR(1) BASED UNAL;
      173     4579    1   DCL B$OCT(0:2) UBIN(3) BASED UNAL;
      174     4580    1   DCL RCVR2_MODE SBIN STATIC INIT(0);
      175     4581
      176     4582        %SUB PRESLUG#=1/*PRESLUG#*/;
      177     4583        %SUB RCVRSCREECH#=2/*RCVRSCREECH#*/;
      178     4584        %SUB RCVRSUA#=3/*RCVRSUA#*/;
      179     4585        %SUB ONLINE#=4/*ONLINE#*/;
      180     4586
      181     4587
      182     4588    1   DCL RCVR2_LOWDA SBIN STATIC INIT(0);    /* LOW DA OF SYS RCVR AREA            */
      183     4589    1   DCL RCVR2_HIGHDA SBIN STATIC INIT(0);   /* HIGH DA OF SYS RCVR AREA           */
      184     4590
      185     4591    1   DCL RDUMP_LOWDA SBIN STATIC INIT(0);    /* LOW DA OF A RECOVERY DUMP          */
      186     4592    1   DCL RDUMP_HIGHDA SBIN STATIC INIT(0);   /* HIGH DA OF A RECOVERY DUMP         */
      187     4593
      188     4594        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:8    
      189     4595                                                /*  USED FOR ERROR MESSAGE REPORTING  */
      190     4596        %B$TCB;
      191     4599        %B$ALT;
      192     4607        %B$EXCFR;
      193     4625    1   DCL B$TCB$ PTR SYMREF;
      194     4626        %SUB B$ALT=B$TCB$->B$TCB.ALT$->B$ALT;
      195     4627        %SUB B$EXCFR=B$TCB$->B$TCB.STK$->B$EXCFR;
      196     4628
      197     4629        %FPT_WRITE (FPTN=REPORT_UC,
      198     4630                    DCB=M$UC,
      199     4631                    BUF=ERRM);
      200     4662
      201     4663        %FPT_KEYIN (FPTN=REPORT_OC,
      202     4664                    OCTYPE=SYSTEM,
      203     4665                    MESS=ERRM);
      204     4684
      205     4685        %FPT_TEMPWROC (FPTN=REPORT_OCT,
      206     4686                       BUFW=ERRM);
      207     4702
      208     4703        %FPT_TEMPWROC (FPTN=CRLF,
      209     4704                       BUFW=B_CRLF);
      210     4720
      211     4721        %FPT_ERRMSG (FPTN=FPT_ERRMSG,
      212     4722                     CODE=PERRC,
      213     4723                     BUF="ERRM.M",
      214     4724                     RESULTS=VLR_ERRMSG,
      215     4725                     SUBMESS=YES);
      216     4752
      217     4753        %VLR_ERRMSG;
      218     4775
      219     4776        %FPT_CLRSTK;
      220     4790
      221     4791    1   DCL B_CRLF CONSTANT BIT(36) INIT('015012040040'O);
      222     4792
      223     4793    1   DCL 1 ERRM STATIC,
      224     4794    1         2 CR BIT(18) UNAL INIT('015012'O),
      225     4795    1         2 M CHAR(120) UNAL INIT(' ');
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:9    
      226     4796
      227     4797    1   DCL B$MSG(0:126) CHAR(1) BASED;
      228     4798
      229     4799    1   DCL 1 DFMSG STATIC,
      230     4800    1         2 * CHAR(5) UNAL INIT('SLOT '),
      231     4801    1         2 SLOTN CHAR(1) UNAL INIT(' '),
      232     4802    1         2 * CHAR(1) UNAL INIT(' '),
      233     4803    1         2 M CHAR(30) UNAL INIT(' '),
      234     4804    1         2 * CHAR(1) UNAL INIT(' '),
      235     4805    1         2 SDF CHAR(3) UNAL INIT(' '),
      236     4806    1         2 MONID,
      237     4807    1           3 VER CHAR(3) UNAL INIT(' '),
      238     4808    1           3 BOOT CHAR(1) UNAL INIT(' '),
      239     4809    1         2 DUMPC CHAR(3) UNAL INIT(' ');
      240     4810
      241     4811    1   DCL 1 OCMSG STATIC,
      242     4812    1         2 DF CHAR(3) INIT(':DF'),
      243     4813    1         2 MONID,
      244     4814    1           3 VER CHAR(3) UNAL,
      245     4815    1           3 BOOT CHAR(1) UNAL,
      246     4816    1         2 DUMPC CHAR(3),
      247     4817    1         2 * CHAR(1) INIT(' '),
      248     4818    1         2 DF_CODE CHAR(12),
      249     4819    1         2 * CHAR(5) INIT(' at .'),
      250     4820    1         2 IC CHAR(6),
      251     4821    1         2 * CHAR(1) INIT(' '),
      252     4822    1         2 * CHAR(1) INIT('.'),
      253     4823    1         2 USR#(0:2) CHAR(1),
      254     4824    1         2 USR REDEF USR# CHAR(3) UNAL,
      255     4825    1         2 * CHAR(1) INIT(' '),
      256     4826    1         2 ACCN CHAR(8),
      257     4827    1         2 C CHAR(1) INIT(','),
      258     4828    1         2 UNAME CHAR(12),
      259     4829    1         2 * CHAR(1) INIT(' '),
      260     4830    1         2 SYSID CHAR(5),
      261     4831    1         2 * CHAR(1) INIT(' '),
      262     4832    1         2 CCBUF CHAR(52);
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:10   
      263     4833    1   DCL 1 OCMSG_C REDEF OCMSG CHAR(120);
      264     4834
      265     4835    1   DCL B$DFMSG CHAR(48) BASED;
      266     4836
      267     4837    1   DCL MSGINDX SBIN STATIC INIT(0);
      268     4838
      269     4839
      270     4840    1   DCL PERRC BIT(36) STATIC;
      271     4841    1   DCL PRINT_MSG1 SBIN STATIC INIT(0);
      272     4842
      273     4843
      274     4844    1   DCL IRG_DEBUG SBIN CONSTANT SYMDEF INIT(0);
      275     4845
      276     4846    1   DCL KWSQERR SBIN STATIC INIT(0);
      277     4847
      278     4848        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:11   
      279     4849
      280     4850                                                /*  USED FOR TRAP CONTROL             */
      281     4851        %FPT_TRAP (FPTN=TRAPFPT,STCLASS=CONSTANT,
      282     4852                   ERRORS=IRG$TRAP,
      283     4853                   ARITHMETIC=IRG$TRAP,
      284     4854                   PROGRAMMED=IRG$TRAP,
      285     4855                   OVERFLOW=TRAP,
      286     4856                   MME=TRAP,
      287     4857                   FAULT_TAG=TRAP,
      288     4858                   MEMORY=TRAP,
      289     4859                   COMMAND=TRAP,
      290     4860                   LOCKUP=TRAP,
      291     4861                   IPR=TRAP,
      292     4862                   MISSING_SEG=TRAP,
      293     4863                   MISSING_PAGE=TRAP,
      294     4864                   SECURITY_2=TRAP,
      295     4865                   SECURITY_1=TRAP,
      296     4866                   HARDWARE=TRAP,
      297     4867                   DIVIDE_CHECK=TRAP,
      298     4868                   PMME=IRG$TRAP);
      299     4891
      300     4892    1   DCL IRG$TRAP ENTRY ASYNC;
      301     4893    1   DCL TRAP_UNWIND REMEMBER STATIC SYMDEF DALIGNED;
      302     4894
      303     4895        %FPT_XCON (FPTN=SET_XCON,
      304     4896                   UENTRY=IRG$TRAP,
      305     4897                   STCLASS=CONSTANT);
      306     4911
      307     4912        %FPT_XCON (FPTN=RESET_XCON,
      308     4913                   STCLASS=CONSTANT);
      309     4927
      310     4928    1   DCL CLSDP_UNWIND REMEMBER STATIC SYMDEF DALIGNED;
      311     4929        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:12   
      312     4930
      313     4931                                                /* USED FOR TIMING REPORTING          */
      314     4932
      315     4933    1   DCL TSTAMP1 UBIN(36) STATIC ALIGNED INIT(0);
      316     4934    1   DCL TSTAMP2 UBIN(36) STATIC ALIGNED INIT(0);
      317     4935    1   DCL TSTAMP3 UBIN(36) STATIC ALIGNED INIT(0);
      318     4936
      319     4937        %FPT_TIME (FPTN=R2BTIME,
      320     4938                   TSTAMP=TSTAMP1);
      321     4957
      322     4958        %FPT_TIME (FPTN=R2ETIME,
      323     4959                   TSTAMP=TSTAMP2);
      324     4978
      325     4979        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:13   
      326     4980    1   DCL T$ PTR;
      327     4981    1   DCL JITSZ UBIN(36);
      328     4982    1   DCL JITSPG UBIN(36);
      329     4983    1   DCL INSTID UBIN;
      330     4984    1   DCL NODEIDX UBIN;
      331     4985    1   DCL Z SBIN;
      332     4986    1   DCL I UBIN(36) STATIC SYMDEF;
      333     4987    1   DCL J UBIN(36) STATIC SYMDEF;
      334     4988    1   DCL AJIT$ PTR STATIC SYMDEF;
      335     4989
      336     4990
      337     4991    1   DCL KQ_DSBSZ SBIN;            /* Size of Comgroup descriptor segment block    */
      338     4992    1   DCL KQ_PGSZ SBIN;             /* # of pages framed by each desc. in KQ_DSB    */
      339     4993
      340     4994        %KQ_DSB (FPTN=KQ$DSB,STCLASS=BASED);
      341     5037
      342     5038    1   DCL 1 RG_CGPT STATIC DALIGNED,
      343     5039    1         2 PG(0:10239),
      344     5040    1           3 RPN UBIN(18) UNAL,            /* REAL PAGE NUMBER                   */
      345     5041    1           3 SFLG BIT(10) UNAL,            /* SOFTWARE CONTROL FLAGS             */
      346     5042    1           3 VLINK REDEF SFLG UBIN(10) UNAL, /* ALTERNATE DEFINITION             */
      347     5043    1           3 Z2 BIT(2) UNAL,               /* MUST BE ZERO                       */
      348     5044    1           3 HFLG BIT(6) UNAL;             /* HARDWARE CONTROL BITS              */
      349     5045
      350     5046    1   DCL B$CGPT$ PTR STATIC INIT(ADDR(RG_CGPT));
      351     5047    1   DCL VP# UBIN WORD STATIC;
      352     5048
      353     5049        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:14   
      354     5050         /*F*     NAME:   IRG$RCVR2
      355     5051
      356     5052                  PURPOSE:  To convert Recovery dumps on the
      357     5053                            System pack dump area to file
      358     5054                            managed keyed files.
      359     5055
      360     5056                  DESCRIPTION:
      361     5057
      362     5058                 The RCVR2 Ghost may be initiated in several ways:
      363     5059
      364     5060                 1) Entered via a M$LDTRC from GHOST1 when all the
      365     5061                    dump slots in the recovery dump area of the
      366     5062                    System pack are busy.  Each recovery dump will
      367     5063                    be converted to a keyed file and RCVR2 will
      368     5064                    exit to SLUG (M$LDTRC) to allow initiation of
      369     5065                    the System Ghosts and logging on of other users.
      370     5066
      371     5067                 2) Started as a ghost job by SLUG after a full screech
      372     5068                    when 1 or more dump files exist in the recovery
      373     5069                    dump area on the system pack.  For each dump slot
      374     5070                    that is busy, the data will be converted to a
      375     5071                    keyed file.
      376     5072
      377     5073                 3) Initiated by the CP-6 Operating System as a ghost
      378     5074                    job following a Single User Abort or Snapshot Dump.
      379     5075                    The contents of JIT.CCBUF indicates which dump slot
      380     5076                    of the recovery dump area on the system pack is
      381     5077                    to be converted to a keyed file.
      382     5078
      383     5079                 4) Started on-line.  This mode is used primarily for
      384     5080                    debugging RCVR2.  For each dump slot in the recovery
      385     5081                    dump area that is busy, the data will be converted to
      386     5082                    a keyed file.
      387     5083
      388     5084         */
      389     5085
      390     5086        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:15   
      391     5087    1      IF B$JIT$->B$JIT.SYSID  = 1
      392     5088    1      THEN RCVR2_MODE = PRESLUG#;
      393     5089    2      ELSE DO;
      394     5090    2           IF B$JIT$->B$JIT.MODE = %M_INT#
      395     5091    2           THEN RCVR2_MODE = ONLINE#;
      396     5092    3           ELSE DO;
      397     5093    3                AJIT$=ADDR(B$JIT$->B$JIT.CCBUF);
      398     5094    3                IF AJIT$->B$CCBUF.SUA ~= 'SUA '
      399     5095    3                THEN RCVR2_MODE = RCVRSCREECH#;
      400     5096    4                ELSE DO;
      401     5097    4                     RCVR2_MODE = RCVRSUA#;
      402     5098    4                     DINDEX = AJIT$->B$CCBUF.INDX;
      403     5099    4                     IF DINDEX > %RV_SYSDDUMP#-1
      404     5100    5                     THEN DO;
      405     5101    5                          ERRM.M = 'DUMP SLOT INDEX BAD';
      406     5102    5                          PRINT_MSG1 = 1;
      407     5103    5                          CALL REPORT_DEBUG_MSG;
      408     5104    5                          CALL M$ERR;
      409     5105    5                          END;
      410     5106    4                     END;
      411     5107    3                END;
      412     5108    2           END;
      413     5109
      414     5110    1      REMEMBER TRAP_HAND IN TRAP_UNWIND;
      415     5111    1      CALL M$XCON(SET_XCON) ALTRET(NO_XCON);
      416     5112    1   NO_XCON: ;
      417     5113    1      CALL M$TRAP(TRAPFPT) ALTRET(NO_TRAP);
      418     5114    1   NO_TRAP: ;
      419     5115    1      CALL M$OPEN(OPN_DP) ALTRET(ODP_ERR);
      420     5116                                                /*  Open the system pack              */
      421     5117    1      CALL M$READ(RD_DP) ALTRET(R_VID_ERR);
      422     5118                                                /* Read the VID                       */
      423     5119    1      T$=ADDR(RV_USRDIR);
      424     5120    1      INSTID=BITBIN(T$->FM$VID.INSTID);
      425     5121    1      DP_GRAN=T$->FM$VID.SYSDIRDA;
      426     5122    1      CALL M$READ(RD_DP) ALTRET(R_SAD_ERR);
      427     5123                                                /* Read the System Area Directory     */
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:16   
      428     5124    1      DF_NAME.L=10;                        /* Build the dump file name           */
      429     5125    1      DF_NAME.N1=':DF';
      430     5126    1      DF_NAME.MONID = T$->I$DISKDIR.MONID.M;
      431     5127    1      DF_NAME.DUMPC='  ';
      432     5128                                                /*                                    */
      433     5129    1      DF_KEY='0'B;
      434     5130    1      DF_KEY.L=7;
      435     5131           /*N* NEED TO DO LOTS OF WORK ON NODE INDEX */
      436     5132                                                /*                                    */
      437     5133    1      RCVR2D = T$->I$DISKDIR.RCVR2;
      438     5134    1      RCVR2_LOWDA = T$->I$DISKDIR.DUMP.DA;
      439     5135    1      RCVR2_HIGHDA = RCVR2_LOWDA + T$->I$DISKDIR.DUMP.SIZE -1;
      440     5136
      441     5137    1      IF RCVR2_MODE = RCVRSUA#
      442     5138    2      THEN DO;
      443     5139    2           DDIR_GRAN = RCVR2D.DA(DINDEX);
      444     5140    2           CALL CONVERT_DUMP ALTRET(CLS_DP_XIT);
      445     5141    2           REMEMBER RESET_XCON1 IN CLSDP_UNWIND;
      446     5142    2           CALL M$CLOSE(CLS_DP) ALTRET(CLS_DP_ERR);
      447     5143    2   RESET_XCON1: ;
      448     5144    2           CALL M$XCON(RESET_XCON) ALTRET(XCON_ALTRET);
      449     5145    2   XCON_ALTRET: ;
      450     5146    2           CALL M$EXIT;
      451     5147
      452     5148    2           END;
      453     5149
      454     5150        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:17   
      455     5151
      456     5152    1      DINDEX = %RV_SYSDDUMP#-1;
      457     5153    2      DO WHILE (DINDEX >= 0);
      458     5154    2           DDIR_GRAN = RCVR2D.DA(DINDEX);
      459     5155    2           CALL CONVERT_DUMP ALTRET(NEXT_DUMP);
      460     5156    2   NEXT_DUMP: ;
      461     5157    2           DINDEX=DINDEX-1;
      462     5158    2           END;
      463     5159
      464     5160    1   CLS_DP_XIT: ;
      465     5161    1      REMEMBER FIND_XIT IN CLSDP_UNWIND;
      466     5162    1      CALL M$CLOSE(CLS_DP) ALTRET(CLS_DP_ERR);
      467     5163    1   FIND_XIT: ;
      468     5164    1      CALL M$XCON(RESET_XCON) ALTRET(RXCON2);
      469     5165    1   RXCON2: ;
      470     5166    1      IF RCVR2_MODE = PRESLUG#
      471     5167    2      THEN DO;
      472     5168    2           ERRM.M = 'CALLING SLUG';
      473     5169    2           CALL REPORT_DEBUG_MSG;
      474     5170    2           CALL IGL$HLP;
      475     5171    2           END;
      476     5172
      477     5173    1      CALL M$EXIT;
      478     5174
      479     5175        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:18   
      480     5176        /*************************************************************
      481     5177         *                                                           *
      482     5178         *     Error Routines for the System Disk                    *
      483     5179         *                                                           *
      484     5180         *************************************************************/
      485     5181    1   ODP_ERR: ;                              /*ERROR OPENING M$DP                  */
      486     5182    1      IF B$ALT.ERR.ERR# = %E$XCLSET
      487     5183    2      THEN DO;
      488     5184    2           CALL M$WAIT (WAIT10);
      489     5185    2           GOTO NO_TRAP;
      490     5186    2           END;
      491     5187    1      ERRM.M = 'OPEN SYS DISK ERROR';
      492     5188    1      PRINT_MSG1 = 1;
      493     5189    1      CALL REPORT_ALT_ERR;
      494     5190    1      GOTO FIND_XIT;
      495     5191
      496     5192    1   R_VID_ERR: ;                            /* ERROR READING VID                  */
      497     5193    1      ERRM.M = 'ERROR READING VID';
      498     5194    1   ERR_DP: ;
      499     5195    1      PRINT_MSG1 = 1;
      500     5196    1      CALL REPORT_ALT_ERR;
      501     5197    1      GOTO CLS_DP_XIT;
      502     5198
      503     5199    1   R_SAD_ERR: ;                            /*ERROR READING SYSTEM AREA DIRECTORY*/
      504     5200    1      ERRM.M = 'ERROR READING SAD';
      505     5201    1      GOTO ERR_DP;
      506     5202
      507     5203
      508     5204    1   CLS_DP_ERR: ;                           /*ERROR CLOSING SYSTEM PACK           */
      509     5205    1      ERRM.M = 'CLOSE SYS DISK ERROR';
      510     5206    1      PRINT_MSG1 = 1;
      511     5207    1      CALL REPORT_ALT_ERR;
      512     5208    1      UNWIND TO CLSDP_UNWIND;
      513     5209
      514     5210
      515     5211                                                /* M$TRAP & M$XCON ROUTINE            */
      516     5212    1   TRAP_HAND: ;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:19   
      517     5213    1      ERRM.M = 'TRAP/XCON ENTRY';
      518     5214    1   REPORT_ASYNC: ;
      519     5215    1      CALL REPORT_STK_ERR;
      520     5216    1      GOTO FIND_XIT;
      521     5217        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:20   
      522     5218
      523     5219        /*************************************************************
      524     5220         *                                                           *
      525     5221         *               CONVERT DUMP                                *
      526     5222         *                                                           *
      527     5223         *************************************************************/
      528     5224
      529     5225    1   CONVERT_DUMP: PROC ALTRET;
      530     5226                                 /* Iniitialize the Dump File debug/error message     */
      531     5227    2      CALL BINCHAR(DFMSG.SLOTN,DINDEX);
      532     5228
      533     5229    2      IF DDIR_GRAN = 0
      534     5230    3      THEN DO;
      535     5231    3           DFMSG.M = 'DUMP SLOT EMPTY';
      536     5232    3           CALL REPORT_DF_SLOT;
      537     5233    3           ALTRETURN;
      538     5234    3           END;
      539     5235
      540     5236    2      CALL M$TIME(R2BTIME) ALTRET(SK1);
      541     5237    2   SK1: ;
      542     5238    2      DP_GRAN=DDIR_GRAN;
      543     5239    2      RD_DP.BUF_ = VECTOR(APAGE);
      544     5240    2      CALL M$READ(RD_DP) ALTRET(R_RB_ERR);
      545     5241    2      T$=ADDR(APAGE);
      546     5242    2      RV_BUFF=T$->RV$BUFF;
      547     5243
      548     5244        /*   If the dump was taken because of a ZAP, there is no reason to
      549     5245             convert it.  The recovery buffer is marked not busy to free the
      550     5246             slot for re_use.
      551     5247        */
      552     5248    2      IF RV_BUFF.SCODE.SEV = %SEV_ZAP#
      553     5249    3      THEN DO;
      554     5250    3           T$->RV$BUFF.BUSY = 0;
      555     5251    3           CALL M$WRITE(WT_DP) ALTRET(NEVER_MORE);
      556     5252    3   NEVER_MORE: ;
      557     5253    3           RETURN;
      558     5254    3           END;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:21   
      559     5255
      560     5256    2      RDUMP_LOWDA=DDIR_GRAN;
      561     5257    2      RDUMP_HIGHDA = (RDUMP_LOWDA+RV_BUFF.SIZE) -1;
      562     5258
      563     5259    2      IF (RDUMP_LOWDA < RCVR2_LOWDA)
      564     5260    2        OR (RDUMP_HIGHDA > RCVR2_HIGHDA)
      565     5261    3      THEN DO;
      566     5262    3           DFMSG.M='RCVR DUMP DISK ADDRESS BAD';
      567     5263    3           PRINT_MSG1=1;
      568     5264    3           CALL REPORT_DF_NAME;
      569     5265    3           ALTRETURN;
      570     5266    3           END;
      571     5267
      572     5268    2      IF RV_BUFF.BUSY = 0
      573     5269    3      THEN DO;
      574     5270    3           DFMSG.M = 'SLOT BUSY-FILE NOT';
      575     5271    3           CALL REPORT_DF_NAME;
      576     5272    3           ALTRETURN;
      577     5273    3           END;
      578     5274
      579     5275    2      CALL BINCHAR(DF_NAME.DUMPC,RV_BUFF.IDCOUNT);
      580     5276    2      CALL INSERT(DF_CODE.Q.V.VEHICLE#,0,5,
      581     5277    2        SUBSTR(FCGTBL,BITBIN(RV_BUFF.SCODE.ID)/4096,1),
      582     5278    2        SUBSTR(FCGTBL,BITBIN(RV_BUFF.SCODE.ID&'0077'O)/64,1),
      583     5279    2        SUBSTR(FCGTBL,BITBIN(RV_BUFF.SCODE.ID&'000077'O),1),
      584     5280    2        '-',SUBSTR(MTBL,BITBIN(RV_BUFF.SCODE.MON),1));
      585     5281    2      CALL BINCHAR(SUBSTR(DF_CODE.Q.V.VEHICLE#,5,5),RV_BUFF.SCODE.CODE);
      586     5282    2      CALL INSERT(DF_CODE.Q.V.VEHICLE#,11,1,BINASC(RV_BUFF.SCODE.SEV+48));
      587     5283    3      DO UNTIL (M$EO$->F$DCB.ARS = 0);     /* Find empty dumpfile                */
      588     5284    4           CALL M$OPEN(OPN_EO) WHENALTRETURN DO;
      589     5285    4                IF B$ALT.ERR.CODE~=%E$FILEBUSY THEN GOTO OEO_ERR;
      590     5286                                           /* File busy, wait a while and try again   */
      591     5287    4                CALL M$SENV;
      592     5288    4                CALL M$WAIT(WAIT10);
      593     5289    4                CALL M$RETRYS;
      594     5290    4                END;
      595     5291    3           IF (M$EO$->F$DCB.ARS > 0)       /* Rename if non-empty                */
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:22   
      596     5292    3           THEN CALL RENAME_DUMPFILE ALTRET (RNM_ERR);
      597     5293    3           END;                            /* do until                           */
      598     5294                                                /* Open the keyed Dump File           */
      599     5295    2      DFMSG.M = 'CONVERTING DUMP FILE';
      600     5296    2      CALL REPORT_DF_NAME;
      601     5297
      602     5298    2      OCMSG.USR=' ';
      603     5299    2      OCMSG.SYSID=' ';
      604     5300    2      OCMSG.ACCN=' ';
      605     5301    2      OCMSG.UNAME=' ';
      606     5302    2      OCMSG.CCBUF=' ';
      607     5303    2      OCMSG.DF = ':DF';
      608     5304    2      OCMSG.MONID = RV_BUFF.DMONID;
      609     5305    2      CALL BINCHAR(OCMSG.DUMPC,RV_BUFF.IDCOUNT);
      610     5306    2      OCMSG.DF_CODE = DF_CODE.Q.V.VEHICLE#;
      611     5307    3      DO Z = 0 TO 5;
      612     5308    3           ADDR(OCMSG.IC)->B$CHAR(Z) =
      613     5309    3             BINASC(ADDR(RV_BUFF.SSFRAME.IC)->B$OCT(Z) +48);
      614     5310    3           END;
      615     5311
      616     5312    2      DF_KEY.K = '0'B;
      617     5313    3      CALL M$READ(READ_NDIR) WHENRETURN DO;
      618     5314    4           IF RV_BUFF.SCODE.SEV = %SEV_FESNAP# THEN DO;
      619     5315    4                NODEDIR.N = NODEDIR.N + 1;
      620     5316    4                NODEIDX = NODEDIR.N;
      621     5317    4                END;
      622     5318    4           ELSE DO;
      623     5319    4                NODEIDX = 1;
      624     5320    4                END;
      625     5321    3           END;
      626     5322    3      WHENALTRETURN DO;
      627     5323    3           NODEIDX = 1;
      628     5324    3           NODEDIR.N = 1;
      629     5325    3           END;
      630     5326    2      NODEDIR.NODE.NODENAME(NODEIDX)='HOST';
      631     5327    2      NODEDIR.NODE.TYPE(NODEIDX)=%R_HOSTNODE#;
      632     5328    2      WTEO.BUF_=VECTOR(NODEDIR);
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:23   
      633     5329    2      CALL M$WRITE(WTEO) ALTRET(EO_ERR);
      634     5330                                                /* Write the Node Directory           */
      635     5331
      636     5332    2      WTEO.BUF_ = VECTOR(COPYRIGHT);
      637     5333    2      DF_KEY.K.TYP = %R_COPYRIGHT#;
      638     5334    2      CALL M$WRITE(WTEO) ALTRET(EO_ERR);
      639     5335                                                /* Write the Copyright record         */
      640     5336
      641     5337    2      RV_BUFF.INSTID = INSTID;
      642     5338    2      DF_KEY.K=BINBIT(NODEIDX,9);
      643     5339    2      WTEO.BUF_ = VECTOR(RV_BUFF);
      644     5340    2      CALL M$WRITE(WTEO) ALTRET(EO_ERR);
      645     5341                                                /* Write the Recovery Buffer          */
      646     5342        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:24   
      647     5343                                                /* READ--WRITE  THE ACCOUNTING JITS   */
      648     5344    2      IF RV_BUFF.JITS.SZ ~= 0
      649     5345    3      THEN DO;
      650     5346    3           JITSZ=LENGTHW(B$JIT);
      651     5347    3           JITSPG=1024/JITSZ;
      652     5348    3           DP_GRAN = RV_BUFF.JITS.DA;
      653     5349    3           DF_KEY.K.STYP = %R_AJITS#;
      654     5350
      655     5351    3   MORE_JITS: ;
      656     5352    3           AJIT$=ADDR(APAGE);
      657     5353    3           CALL M$READ(RAPAGE) ALTRET(R_DP_ERR);
      658     5354
      659     5355    4           DO I=0 TO JITSPG-1;
      660     5356    4                IF AJIT$->B$JIT.USER=0 THEN GOTO JITS_DONE;
      661     5357                                 /*THIS SHOULD BE A CALL TO UPDATE ACCOUNTING LOG     */
      662     5358    4                DF_KEY.K.USR# = AJIT$->B$JIT.USER;
      663     5359    4                WTEO.BUF_ = VECTOR(AJIT$->B$JIT);
      664     5360    4                CALL M$WRITE(WTEO) ALTRET(EO_ERR);
      665     5361
      666     5362    4                AJIT$ = PINCRW(AJIT$,JITSZ);
      667     5363    4                END;                       /*DO I=0 TO 5*/
      668     5364
      669     5365    3           DP_GRAN=DP_GRAN+1;
      670     5366    3           IF DP_GRAN < RV_BUFF.JITS.DA + RV_BUFF.JITS.SZ
      671     5367    3           THEN GOTO MORE_JITS;
      672     5368    3           END;                            /*DO IF JITS.SZ ~=0*/
      673     5369
      674     5370    2   JITS_DONE: ;
      675     5371        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:25   
      676     5372
      677     5373                                                /*READ--WRITE  THE ERR LOG BUFFERS    */
      678     5374    2      DF_KEY.K=BINBIT(NODEIDX,9);
      679     5375
      680     5376    2      IF RV_BUFF.ERRLOG.SZ ~= 0
      681     5377    3      THEN DO;
      682     5378    3           DP_GRAN = RV_BUFF.ERRLOG.DA;
      683     5379    3           DF_KEY.K.STYP = %R_ERRLOG#;
      684     5380
      685     5381    4           DO I=0 TO RV_BUFF.ERRLOG.SZ-1;
      686     5382    4                CALL M$READ(RAPAGE) ALTRET(R_DP_ERR);
      687     5383    4                CALL M$WRITE(WAPAGE) ALTRET(EO_ERR);
      688     5384    4                DP_GRAN = DP_GRAN+1;
      689     5385    4                DF_KEY.K.VP# = DF_KEY.K.VP#+1;
      690     5386    4                END;                       /*DO I=0 TO ERRLOG.SZ                 */
      691     5387    3           END;                            /*DO IF ERRLOG.SZ ~=0                 */
      692     5388
      693     5389        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:26   
      694     5390
      695     5391                                                /* READ-WRITE LOW REAL MEMORY         */
      696     5392    2      DF_KEY.K=BINBIT(NODEIDX,9);
      697     5393
      698     5394    2      IF RV_BUFF.LRMEM.SZ  ~= 0
      699     5395    3      THEN DO;
      700     5396    3           DP_GRAN = RV_BUFF.LRMEM.DA;
      701     5397    3           DF_KEY.K.TYP  = %R_LRMEM#;
      702     5398
      703     5399    4           DO I=0 TO 8-1;
      704     5400    4                CALL M$READ(RAPAGE) ALTRET(R_DP_ERR);
      705     5401    4                CALL M$WRITE(WAPAGE) ALTRET(EO_ERR);
      706     5402    4                DP_GRAN = DP_GRAN+1;
      707     5403    4                DF_KEY.K.VP# = DF_KEY.K.VP#+1;
      708     5404    4                END;                       /*DO I=0 TO LRMEM.SZ                  */
      709     5405    3           END;                            /*DO IF LRMEM.SZ  ~=0                 */
      710     5406
      711     5407    2      DP_GRAN = DP_GRAN + RV_BUFF.PPUT.FP - 8;
      712     5408    3      DO I = RV_BUFF.PPUT.FP TO RV_BUFF.PPUT.LP;
      713     5409    3           DF_KEY.K.VP# = I;
      714     5410    3           CALL M$READ (RAPAGE) ALTRET (R_DP_ERR);
      715     5411    3           CALL M$WRITE (WAPAGE) ALTRET (EO_ERR);
      716     5412    3           DP_GRAN = DP_GRAN + 1;
      717     5413    3           END;
      718     5414        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:27   
      719     5415
      720     5416                                                /*READ-WRITE THE MONITOR WSQ          */
      721     5417    2      DF_KEY.K=BINBIT(NODEIDX,9);
      722     5418
      723     5419    2      IF RV_BUFF.MONWSQD.SZ ~= 0
      724     5420    3      THEN DO;
      725     5421    3           RD_DP.BUF_ = VECTOR(APAGE);
      726     5422    3           DP_GRAN=RV_BUFF.MONWSQD.DA;
      727     5423    3           LAST_GRAN = RV_BUFF.MONWSQD.DA
      728     5424    3             +RV_BUFF.MONWSQD.SZ
      729     5425    3             -1;
      730     5426    3           CALL M$READ(RD_DP) ALTRET(R_DP_ERR);
      731     5427    3           T$=ADDR(APAGE);
      732     5428    3           RV_WSQD = T$->B$WSQD;
      733     5429
      734     5430    3           DF_KEY.K.TYP=%R_MWSQ#;
      735     5431    3           DF_KEY.K.USR# = RV_BUFF.S_PNO;
      736     5432
      737     5433    3           FIRST_PAGE=0;
      738     5434    3           LAST_PAGE=1023;
      739     5435    3           CALL KEY_WSQ ALTRET(WSQ_ERR);
      740     5436
      741     5437    3           END;                            /*DO IF %MONWSQ.SZ~0*/
      742     5438
      743     5439
      744     5440
      745     5441
      746     5442    2      IF RV_BUFF.MONPROC.SZ ~= 0
      747     5443    3      THEN DO;
      748     5444    3           RD_DP.BUF_ = VECTOR(APAGE);
      749     5445    3           DP_GRAN=RV_BUFF.MONWSQD.DA;
      750     5446    3           CALL M$READ(RD_DP) ALTRET(R_DP_ERR);
      751     5447    3           T$=ADDR(APAGE);
      752     5448    3           RV_WSQD = T$->B$WSQD;
      753     5449    3           DP_GRAN=RV_BUFF.MONPROC.DA;
      754     5450    3           IF RV_BUFF.MONPROC.SZ = 1
      755     5451    3           THEN J=(RV_BUFF.SSFRAME.IC / 1024) + %ISEGLO;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:28   
      756     5452    3           ELSE J=RV_BUFF.MONPLL;
      757     5453    3           I = RV_BUFF.MONPROC.SZ;
      758     5454    4           DO WHILE (I>0);
      759     5455    4                CALL M$READ(RAPAGE) ALTRET(R_DP_ERR);
      760     5456    4                DF_KEY.K.VP#=J;
      761     5457    4                CALL M$WRITE(WAPAGE) ALTRET(EO_ERR);
      762     5458    4                RV_WSQD.PG.SFLG(J) = (RV_WSQD.PG.SFLG(J) | %SCRCVR);
      763     5459    4                DP_GRAN=DP_GRAN+1;
      764     5460    4                J=J+1;
      765     5461    4                I=I-1;
      766     5462    4                END;                       /*DO 0 TO MONPROC.SZ                  */
      767     5463    3           DP_GRAN = RV_BUFF.MONWSQD.DA;
      768     5464    3           CALL M$READ(RAPAGE) ALTRET(R_DP_ERR);
      769     5465    3           T$=ADDR(APAGE);
      770     5466    3           T$->B$WSQD=RV_WSQD;
      771     5467    3           DF_KEY.K=BINBIT(NODEIDX,9);
      772     5468    3           DF_KEY.K.TYP=%R_MWSQ#;
      773     5469    3           DF_KEY.K.USR# = RV_BUFF.S_PNO;
      774     5470    3           CALL M$WRITE(WAPAGE) ALTRET(EO_ERR);
      775     5471    3           END;                            /*DO IF MONPROC.SZ ~0                 */
      776     5472
      777     5473        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:29   
      778     5474                                                /* READ-WRITE CWSQ PAGES              */
      779     5475
      780     5476
      781     5477    2      DF_KEY.K=BINBIT(NODEIDX,9);
      782     5478    2      DF_KEY.K.TYP=%R_CWSQPGS#;
      783     5479
      784     5480    3      DO J=0 TO 31;
      785     5481    3           IF RV_BUFF.CWSQ.SZ(J) ~= 0
      786     5482    4           THEN DO;
      787     5483    4                RD_DP.BUF_ = VECTOR(APAGE);
      788     5484    4                DP_GRAN=RV_BUFF.CWSQ.DA(J);
      789     5485    4                LAST_GRAN = RV_BUFF.CWSQ.DA(J)
      790     5486    4                  +RV_BUFF.CWSQ.SZ(J)
      791     5487    4                  -1;
      792     5488    4                CALL M$READ(RD_DP) ALTRET(R_DP_ERR);
      793     5489
      794     5490    4                T$=ADDR(APAGE);
      795     5491    4                RV_WSQD=T$->B$WSQD;
      796     5492
      797     5493    4                DF_KEY.K.USR#=0;           /*MEANS DIRECTORY*/
      798     5494    4                DF_KEY.K.STYP=J+%B_CWSQ1;
      799     5495    4                DF_KEY.K.VP#=0;
      800     5496    4                WTEO.BUF_ = VECTOR(T$->B$WSQD);
      801     5497    4                CALL M$WRITE(WTEO) ALTRET(EO_ERR);
      802     5498
      803     5499    4                DF_KEY.K.USR#=1;           /*MEANS CONTENTS OF THE PAGES         */
      804     5500    4                DP_GRAN=DP_GRAN+1;
      805     5501    4                FIRST_PAGE=0;
      806     5502    4                LAST_PAGE=1023;
      807     5503    4                CALL KEY_WSQ ALTRET(WSQ_ERR);
      808     5504
      809     5505    4                END;                       /* DO IF CWSQ.SZ(J) ~=0               */
      810     5506    3           END;                            /* DO J=0 TO 31                       */
      811     5507
      812     5508
      813     5509        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:30   
      814     5510                                                /* READ-WRITE %CGWSQ PAGES            */
      815     5511
      816     5512    2      FIRST_PAGE=0;
      817     5513    2      LAST_PAGE=1023;
      818     5514    2      B$CGPT$ = ADDR(RG_CGPT);
      819     5515    2      MAX_CG_PAGE = RV_BUFF.MM_CGQCXT_END;
      820     5516
      821     5517    3      DO J=0 TO 9;
      822     5518    3           IF RV_BUFF.CGRWSQ.SZ(J) ~= 0
      823     5519    4           THEN DO;
      824     5520    4                RD_DP.BUF_ = VECTOR(APAGE);
      825     5521    4                DP_GRAN=RV_BUFF.CGRWSQ.DA(J);
      826     5522    4                LAST_GRAN = RV_BUFF.CGRWSQ.DA(J)
      827     5523    4                  +RV_BUFF.CGRWSQ.SZ(J)
      828     5524    4                  -1;
      829     5525    4                CALL M$READ(RD_DP) ALTRET(R_DP_ERR);
      830     5526    4                DP_GRAN=DP_GRAN+1;
      831     5527
      832     5528    4                T$=ADDR(APAGE);
      833     5529    4                RV_WSQD=T$->B$WSQD;
      834     5530    4                B$CGPT$->B$WSQD = T$->B$WSQD;
      835     5531    4                WTEO.BUF_ = VECTOR(RV_WSQD);
      836     5532    4                T$ = ADDR(RV_WSQD);
      837     5533                                           /* WRITE DIRECTORY WITH KEY AS MONITOR VP# */
      838     5534    4                DF_KEY.K=BINBIT(NODEIDX,9);
      839     5535    4                DF_KEY.K.TYP=%R_MWSQ#;
      840     5536    4                DF_KEY.K.STYP=%R_MCPU#;
      841     5537    4                DF_KEY.K.USR#=RV_BUFF.S_PNO;
      842     5538    4                DF_KEY.K.VP# = J+%CGPGTBLLO;
      843     5539    4                CALL M$WRITE(WTEO) ALTRET(EO_ERR);
      844     5540                                      /* WRITE DIRECTORY WITH KEY AS %CGWSQ DIRECTORY */
      845     5541
      846     5542    4                DF_KEY.K=BINBIT(NODEIDX,9);
      847     5543    4                DF_KEY.K.TYP=%R_CGPGS#;
      848     5544    4                DF_KEY.K.USR#=0;           /*MEANS DIRECTORY*/
      849     5545    4                DF_KEY.K.STYP=%CGWSQ;
      850     5546    4                DF_KEY.K.VP#=J;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:31   
      851     5547    4                CALL M$WRITE(WTEO) ALTRET(EO_ERR);
      852     5548
      853     5549                                           /* ZAP WORDS 0-1 OF FIRST PAGE TABLE PAGE  */
      854     5550    4                IF J=0
      855     5551    4                THEN T$->B$BIT72='0'B;
      856     5552                                                /* COMPUTE LAST PAGE TABLE WORD       */
      857     5553    4                IF MAX_CG_PAGE > ( (J+1)*1024 )
      858     5554    4                THEN LAST_PAGE = 1023;
      859     5555    4                ELSE LAST_PAGE = MAX_CG_PAGE - (J*1024);
      860     5556
      861     5557
      862     5558    4                IF LAST_PAGE > 0
      863     5559    5                THEN DO;
      864     5560    5                     DF_KEY.K.USR#=1;      /*MEANS CONTENTS OF THE PAGES         */
      865     5561    5                     CALL KEY_WSQ ALTRET(WSQ_ERR);
      866     5562    5                     END;
      867     5563    4                FIRST_PAGE = FIRST_PAGE+1024;
      868     5564    4                END;                       /* DO IF CGRWSQ.SZ(J) ~=0             */
      869     5565    4           ELSE DO;
      870     5566    4                B$CGPT$->B$WSQD = '0'B;
      871     5567    4                END;
      872     5568    3           B$CGPT$ = PINCRW(B$CGPT$,1024);
      873     5569    3           END;                            /* DO J=0 TO 9                        */
      874     5570
      875     5571
      876     5572        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:32   
      877     5573                                                /* READ-WRITE THE CURRENT COMGROUP    */
      878     5574    2      DF_KEY.K=BINBIT(NODEIDX,9);
      879     5575
      880     5576    2      IF RV_BUFF.CURCG.SZ  ~= 0
      881     5577    3      THEN DO;
      882     5578    3           DP_GRAN = RV_BUFF.CURCG.DA;
      883     5579    3           LAST_GRAN = RV_BUFF.CURCG.DA + RV_BUFF.CURCG.SZ -1;
      884     5580                                      /* READ-WRITE THE SEGMENT DESCRIPTOR GRANULE    */
      885     5581    3           DF_KEY.K.TYP  = %R_CGPGS#;
      886     5582    3           DF_KEY.K.STYP = %CGWSQ;
      887     5583    3           DF_KEY.K.USR# = %R_CGDSB#;
      888     5584    3           DF_KEY.K.VP# = 0;
      889     5585
      890     5586    3           CALL M$READ(RAPAGE) ALTRET(R_DP_ERR);
      891     5587    3           CALL M$WRITE(WAPAGE) ALTRET(EO_ERR);
      892     5588
      893     5589    3           DP_GRAN = DP_GRAN+1;
      894     5590    3           DF_KEY.K.USR#=%R_DATA#;
      895     5591                                                /* SWITCH KEY BACK TO DATA VP#        */
      896     5592    3           T$=ADDR(APAGE);
      897     5593    3           RV_WSQD=T$->B$WSQD;
      898     5594    3           T$=ADDR(RV_WSQD);
      899     5595
      900     5596                                           /* READ-WRITE THE CURRENT COMGROUP DATA    */
      901     5597    3           KQ_DSBSZ=(T$->KQ$DSB.ASR.BOUND+1)/8;
      902     5598                                                /* # of ASR Descriptors               */
      903     5599    4           DO I=0 TO KQ_DSBSZ-1;
      904     5600    4                IF (T$->KQ$DSB.DESC.FLG(I) & %DSPRESNT)
      905     5601    5                THEN DO;
      906     5602    5                     DF_KEY.K.VP# = T$->KQ$DSB.DESC.BASE(I)/4096;
      907     5603    5                     KQ_PGSZ = (T$->KQ$DSB.DESC.BOUND(I)+1)/4096;
      908     5604                                                /* Size of this segment               */
      909     5605    6                     DO J=0 TO KQ_PGSZ-1;
      910     5606    6                          IF (RG_CGPT.PG.HFLG(DF_KEY.K.VP#) & %PGINMEM)
      911     5607    7                          THEN DO;
      912     5608    7                               CALL M$READ(RAPAGE) ALTRET(R_DP_ERR);
      913     5609    7                               CALL M$WRITE(WAPAGE) ALTRET(EO_ERR);
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:33   
      914     5610    7                               DP_GRAN = DP_GRAN+1;
      915     5611    7                               IF DP_GRAN > LAST_GRAN THEN GOTO CURCG_DONE;
      916     5612    7                               END;        /* DO IF %PGINMEM                     */
      917     5613    6                          DF_KEY.K.VP# = DF_KEY.K.VP#+1;
      918     5614    6                          END;
      919     5615    5                     END;                  /* DO IF NOT NULL                     */
      920     5616    4                END;
      921     5617    3   CURCG_DONE: ;
      922     5618    3           END;                            /*DO IF CURCG.SZ  ~=0                 */
      923     5619
      924     5620        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:34   
      925     5621
      926     5622                                                /*READ-WRITE THE SLAVE JITS           */
      927     5623    2      DF_KEY.K=BINBIT(NODEIDX,9);
      928     5624
      929     5625    2      DF_KEY.K.TYP = %R_MWSQ#;
      930     5626    2      DF_KEY.K.STYP= %R_SCPU#;
      931     5627
      932     5628    3      DO J=0 TO 7;
      933     5629    3           IF RV_BUFF.MONJITS.SZ(J) ~= 0
      934     5630    4           THEN DO;
      935     5631    4                DP_GRAN = RV_BUFF.MONJITS.DA(J);
      936     5632    4                DF_KEY.K.USR# = J;
      937     5633
      938     5634    5                DO I=0 TO RV_BUFF.MONJITS.SZ(J)-1;
      939     5635    5                     CALL M$READ(RAPAGE) ALTRET(R_DP_ERR);
      940     5636    5                     IF I=5 THEN DF_KEY.K.VP# = %ISEGLO;
      941     5637    5                     ELSE IF I=0
      942     5638    5                          THEN DF_KEY.K.VP# = I;
      943     5639    5                          ELSE DF_KEY.K.VP# = %JITPG-1+I;
      944     5640    5                     CALL M$WRITE(WAPAGE) ALTRET(EO_ERR);
      945     5641    5                     DP_GRAN = DP_GRAN+1;
      946     5642    5                     END;                  /*DO 0 TO SZ                          */
      947     5643    4                END;                       /*DO IF SZ(J) ~=0                     */
      948     5644    3           END;                            /*DO J=0 TO 3                         */
      949     5645
      950     5646        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:35   
      951     5647
      952     5648                                                /*READ-WRITE THE USERS                */
      953     5649    2      DF_KEY.K=BINBIT(NODEIDX,9);
      954     5650
      955     5651    2      IF RV_BUFF.USRDR.SZ ~= 0
      956     5652    3      THEN DO;
      957     5653    3           RD_DP.BUF_ = VECTOR(RV_USRDIR);
      958     5654    3           DP_GRAN = RV_BUFF.USRDR.DA;
      959     5655    3           CALL M$READ(RD_DP) ALTRET(R_DP_ERR);
      960     5656    3           DF_KEY.K.STYP=1;
      961     5657    3           WTEO.BUF_ = VECTOR(RV_USRDIR);
      962     5658    3           CALL M$WRITE(WTEO) ALTRET(EO_ERR);
      963     5659    3           DF_KEY.K=BINBIT(NODEIDX,9);
      964     5660
      965     5661    4           DO J=0 TO 511;
      966     5662    4                IF RV_USRDIR.USER.SZ(J) ~= 0
      967     5663    5                THEN DO;
      968     5664    5                     RD_DP.BUF_ = VECTOR(APAGE);
      969     5665    5                     DP_GRAN = RV_USRDIR.USER.DA(J);
      970     5666    5                     LAST_GRAN = RV_USRDIR.USER.DA(J) + RV_USRDIR.USER.SZ(J) -1;
      971     5667    5                     CALL M$READ(RD_DP) ALTRET(R_DP_ERR);
      972     5668    5                     T$=ADDR(APAGE);
      973     5669    5                     RV_WSQD = T$->B$WSQD;
      974     5670
      975     5671    5                     DF_KEY.K.TYP = %R_UWSQ#;
      976     5672    5                     DF_KEY.K.STYP = RV_USRDIR.USER.TYP(J);
      977     5673
      978     5674    5                     DF_KEY.K.USR#=J;
      979     5675    5                     FIRST_PAGE=0;
      980     5676    5                     LAST_PAGE=1023;
      981     5677    5                     CALL KEY_WSQ ALTRET(WSQ_ERR);
      982     5678    5                     END;                  /*DO IF USER.SZ(J) ~0                 */
      983     5679    4                END;                       /*DO J=0 TO 511*/
      984     5680    3           END;                            /*DO IF USRDR.SZ ~=0*/
      985     5681
      986     5682        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:36   
      987     5683    2      CALL M$TIME(R2ETIME) ALTRET(SKIP_TIMES);
      988     5684    2      RV_BUFF.UTS3 = TSTAMP1;
      989     5685    2      RV_BUFF.UTS4 = TSTAMP2;
      990     5686    2      RV_BUFF.OCMSG = OCMSG_C;
      991     5687    2      DF_KEY.K=BINBIT(NODEIDX,9);
      992     5688    2      WTEO.BUF_ = VECTOR(RV_BUFF);
      993     5689    2      CALL M$WRITE(WTEO) ALTRET(SKIP_TIMES);
      994     5690
      995     5691    2   SKIP_TIMES: ;
      996     5692
      997     5693
      998     5694    2      RV_BUFF.BUSY=0;
      999     5695    2      APAGE='0'B;
     1000     5696    2      T$=ADDR(APAGE);
     1001     5697    2      T$->RV$BUFF=RV_BUFF;
     1002     5698    2      CALL M$WRITE(WT_DP) ALTRET(W_RB_ERR);
     1003     5699    2      CALL M$CLOSE(CLS_EO) ALTRET(CLS_EO_ERR);
     1004     5700    2      ERRM.M = OCMSG_C;
     1005     5701    2      CALL PRINT_ERRM;
     1006     5702
     1007     5703    2      RETURN;
     1008     5704        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:37   
     1009     5705        /*************************************************************
     1010     5706         *                                                           *
     1011     5707         *     Errors reading System Disk or Writing keyed file      *
     1012     5708         *                                                           *
     1013     5709         *************************************************************/
     1014     5710    2   R_RB_ERR: ;                             /*ERROR READING RECOVERY BUFFER*/
     1015     5711    2      DFMSG.M = 'ERROR READING RCVR BUFFER';
     1016     5712    2      PRINT_MSG1 = 1;
     1017     5713    2      CALL REPORT_DF_SLOT;
     1018     5714    2      CALL REPORT_ERRMSG;
     1019     5715    2   DO_ALTRTN: ;
     1020     5716    2      ALTRETURN;
     1021     5717
     1022     5718    2   W_RB_ERR: ;                             /* ERROR WRITING THE RECOVERY BUFFER  */
     1023     5719    2      DFMSG.M = 'ERROR WRITING RCVR BUFFER';
     1024     5720    2      GOTO CALL_DFERR;
     1025     5721
     1026     5722    2   R_DP_ERR: ;                             /* ERROR READING THE DUMP FILE        */
     1027     5723    2      DFMSG.M = 'ERR READING SYS AREA FOR DUMP';
     1028     5724    2   CALL_DFERR: ;
     1029     5725    2      PRINT_MSG1 = 1;
     1030     5726    2      CALL REPORT_DF_NAME;
     1031     5727    2      CALL REPORT_ERRMSG;
     1032     5728    2   EXIT_EO: ;
     1033     5729    2      CALL M$CLOSE(CLS_EO) ALTRET(CLS_EO_ERR);
     1034     5730    2      ALTRETURN;
     1035     5731
     1036     5732    2   RNM_ERR: ;
     1037     5733    2      DFMSG.M = 'ERROR RENAMING DUMP FILE';
     1038     5734    2      GOTO CALL_DFERR;
     1039     5735
     1040     5736    2   OEO_ERR: ;                              /*ERROR ON OPEN OF OUTPUT DUMP FILE*/
     1041     5737    2      ERRM.M = 'OPEN KEYED DUMP FILE';
     1042     5738    2   XXX_EO: ;
     1043     5739    2      PRINT_MSG1 = 1;
     1044     5740    2      CALL REPORT_ALT_ERR;
     1045     5741    2      ALTRETURN;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:38   
     1046     5742
     1047     5743    2   EO_ERR: ;                               /*ERROR WRITING THE DUMP FILE*/
     1048     5744    2      ERRM.M = 'WRITE KEYED DUMP FILE';
     1049     5745    2      PRINT_MSG1 = 1;
     1050     5746    2      CALL REPORT_ALT_ERR;
     1051     5747    2      GOTO EXIT_EO;
     1052     5748
     1053     5749    2   WSQ_ERR: ;
     1054     5750    2      IF KWSQERR=1 THEN GOTO R_DP_ERR;
     1055     5751    2      ELSE GOTO EO_ERR;
     1056     5752
     1057     5753    2   CLS_EO_ERR: ;                           /*ERROR CLOSING KEYED FILE*/
     1058     5754    2      ERRM.M = 'CLOSE KEYED DUMP FILE';
     1059     5755    2      GOTO XXX_EO;
     1060     5756
     1061     5757    2   END CONVERT_DUMP;
     1062     5758        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:39   
     1063     5759
     1064     5760    1   RENAME_DUMPFILE: PROC ALTRET;
     1065     5761
     1066     5762        /* Rename dumpfile due to name clash.  The existing dumpfile
     1067     5763           is renamed to xxx_YYMMDD_HHMM, and is closed to allow a new
     1068     5764           dumpfile xxx to be created (in CONVERT_DUMP).  Note that symbol
     1069     5765           VDF_NAME is a %SUB alias for structure DF_NAME in TEXTC format.  */
     1070     5766
     1071     5767    2      CALL M$TIME (DUMP_TIME);             /* get YYMMDD and HHMM strs           */
     1072     5768    2      NEWDFN.L# = VDF_NAME.L# + 12;        /* compute new name length            */
     1073     5769    2      IF (NEWDFN.L# > 31) THEN ALTRETURN;  /* check for name too long            */
     1074     5770    2      CALL CONCAT (NEWDFN.NAME#,           /* build new name                     */
     1075     5771    2        SUBSTR (VDF_NAME.NAME#, 0, VDF_NAME.L#), '_', DUMP_DT, '_',
     1076     5772    2        SUBSTR (DUMP_TM, 0, 4));
     1077     5773    2      CALL M$CLOSE (RNM_EO)                /* close and rename file              */
     1078     5774    3      WHENALTRETURN DO;                    /* propagate error                    */
     1079     5775    3           ALTRETURN;
     1080     5776    3           END;
     1081     5777
     1082     5778    2   END RENAME_DUMPFILE;
     1083     5779        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:40   
     1084     5780        /*************************************************************
     1085     5781         *                                                           *
     1086     5782         *               KEY WSQ                                     *
     1087     5783         *                                                           *
     1088     5784         *************************************************************/
     1089     5785
     1090     5786    1   KEY_WSQ: PROC ALTRET;
     1091     5787
     1092     5788    3      DO I=0 TO LAST_PAGE;
     1093     5789    3           IF (RV_WSQD.PG.SFLG(I) & %SCRCVR)
     1094     5790    4           THEN DO;
     1095     5791    4                CALL M$READ(RAPAGE) ALTRET(READ_ERR);
     1096     5792    4                DF_KEY.K.VP# = I + FIRST_PAGE;
     1097     5793    4                CALL M$WRITE(WAPAGE) ALTRET(WRITE_ERR);
     1098     5794
     1099     5795    4                IF (J = RV_BUFF.CUN) AND (I = %JITPG)
     1100     5796    5                THEN DO;                   /* put current usr info in ocmsg      */
     1101     5797    5                     AJIT$ = ADDR(APAGE);
     1102     5798    6                     DO Z = 0 TO 2;
     1103     5799    6                          ADDR(OCMSG.USR#)->B$CHAR(Z) =
     1104     5800    6                            BINASC(ADDR(AJIT$->B$JIT.USER)->B$OCT(Z) +48);
     1105     5801    6                          END;
     1106     5802    5                     OCMSG.ACCN = AJIT$->B$JIT.ACCN;
     1107     5803    5                     OCMSG.C = ',';
     1108     5804    5                     OCMSG.UNAME = AJIT$->B$JIT.UNAME;
     1109     5805    5                     CALL BINCHAR(OCMSG.SYSID,AJIT$->B$JIT.SYSID);
     1110     5806    5                     AJIT$ = ADDR(AJIT$->B$JIT.CCBUF);
     1111     5807    5                     OCMSG.CCBUF = AJIT$->B$OCBUF;
     1112     5808    5                     END;
     1113     5809
     1114     5810    4                DP_GRAN=DP_GRAN+1;
     1115     5811    4                IF DP_GRAN > LAST_GRAN THEN RETURN;
     1116     5812    4                END;                       /*DO IF %SCRCVR                       */
     1117     5813    3           END;                            /*DO 0 TO 511                         */
     1118     5814    2      RETURN;
     1119     5815    2   READ_ERR: ;
     1120     5816    2      KWSQERR=1;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:41   
     1121     5817    2      ALTRETURN;
     1122     5818
     1123     5819    2   WRITE_ERR: ;
     1124     5820    2      KWSQERR=2;
     1125     5821    2      ALTRETURN;
     1126     5822
     1127     5823
     1128     5824    2   END KEY_WSQ;
     1129     5825        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:42   
     1130     5826        /*************************************************************
     1131     5827         *                                                           *
     1132     5828         *               REPORT ERR                                  *
     1133     5829         *                                                           *
     1134     5830         *************************************************************/
     1135     5831
     1136     5832    1   REPORT_ERR: PROC;
     1137     5833
     1138     5834                                                /* This entry to report ALTRET errors */
     1139     5835    2   REPORT_ALT_ERR: ENTRY;
     1140     5836    2      PERRC=B$ALT.ERR & '777777777770'O;
     1141     5837    2      FPT_ERRMSG.V.DCB# = B$ALT.DCB#;
     1142     5838    2      RV_BUFF.RCVR2TRAP=B$ALT;
     1143     5839    2      GOTO CHECK_MSG1;
     1144     5840
     1145     5841                                           /* This entry to report TCB Stack errors   */
     1146     5842    2   REPORT_STK_ERR: ENTRY;
     1147     5843    2      PERRC=B$EXCFR.ERR;
     1148     5844    2      FPT_ERRMSG.V.DCB# = 0;
     1149     5845    2      RV_BUFF.RCVR2TRAP=B$EXCFR;
     1150     5846    2      CALL M$CLRSTK(FPT_CLRSTK) ALTRET(CHECK_MSG1);
     1151     5847
     1152     5848    2   CHECK_MSG1: ;
     1153     5849    2      RV_BUFF.RCVR2TR='1'B;
     1154     5850    2      IF IRG_DEBUG + PRINT_MSG1 ~= 0
     1155     5851    3      THEN DO;
     1156     5852             /*  1st message is output only if PRINT_MSG1 or IRG_DEBUG is non-zero    */
     1157     5853    3           CALL PRINT_ERRM;
     1158     5854    3           END;
     1159     5855
     1160     5856                                                /* This entry after REPORT_DFERR      */
     1161     5857    2   REPORT_ERRMSG: ENTRY;
     1162     5858    2      CALL M$ERRMSG(FPT_ERRMSG) ALTRET(GET_ERRM);
     1163     5859    2      GOTO GET_ERRM;
     1164     5860
     1165     5861                                                /* This entry if no call to M$ERRMSG  */
     1166     5862             /*  The message is output only if PRINT_MSG1 or IRG_DEBUG is non-zero    */
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:43   
     1167     5863    2   REPORT_DEBUG_MSG: ENTRY;
     1168     5864    2      IF IRG_DEBUG + PRINT_MSG1 = 0 THEN RETURN;
     1169     5865    2   GET_ERRM: ;
     1170     5866    2      CALL PRINT_ERRM;
     1171     5867    2      PRINT_MSG1=0;
     1172     5868    2      RETURN;
     1173     5869    2   END REPORT_ERR;
     1174     5870
     1175     5871        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:44   
     1176     5872
     1177     5873    1   PRINT_ERRM: PROC;
     1178     5874    2      T$=ADDR(ERRM);
     1179     5875    2      MSGINDX = SIZEC(ERRM) -1;
     1180     5876    3      DO WHILE (T$->B$MSG(MSGINDX) = ' ');
     1181     5877    3           MSGINDX = MSGINDX-1;
     1182     5878    3           END;
     1183     5879    2      IF RCVR2_MODE = PRESLUG#
     1184     5880    3      THEN DO;
     1185     5881    3           CALL M$TEMPWROC(CRLF) ALTRET(CR_ERR);
     1186     5882    3   CR_ERR: ;
     1187     5883    3           REPORT_OCT.BUFW_ = VECTOR(ERRM);
     1188     5884    3           REPORT_OCT.BUFW_.BOUND = MSGINDX;
     1189     5885    3           CALL M$TEMPWROC(REPORT_OCT) ALTRET(ERRM_ERR);
     1190     5886    3           END;
     1191     5887    2      ELSE IF RCVR2_MODE = ONLINE#
     1192     5888    3           THEN DO;
     1193     5889    3                REPORT_UC.BUF_ = VECTOR(ERRM);
     1194     5890    3                REPORT_UC.BUF_.BOUND = MSGINDX;
     1195     5891    3                CALL M$WRITE(REPORT_UC) ALTRET(ERRM_ERR);
     1196     5892    3                END;
     1197     5893    3           ELSE DO;
     1198     5894    3                REPORT_OC.MESS_ = VECTOR(ERRM);
     1199     5895    3                REPORT_OC.MESS_.BOUND = MSGINDX;
     1200     5896    3                CALL M$KEYIN(REPORT_OC) ALTRET(ERRM_ERR);
     1201     5897    3                END;
     1202     5898    2   ERRM_ERR: ;
     1203     5899    2      RETURN;
     1204     5900    2   END PRINT_ERRM;
     1205     5901        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:45   
     1206     5902    1   REPORT_DFERR: PROC;
     1207     5903
     1208     5904                                      /* This entry to print Slot # and the :DF name  */
     1209     5905    2   REPORT_DF_NAME: ENTRY;
     1210     5906    2      DFMSG.SDF = ':DF';
     1211     5907    2      DFMSG.MONID = RV_BUFF.DMONID;
     1212     5908    2      CALL BINCHAR(DFMSG.DUMPC,RV_BUFF.IDCOUNT);
     1213     5909
     1214     5910                                           /* This entry to print only the Slot #     */
     1215     5911    2   REPORT_DF_SLOT: ENTRY;
     1216     5912
     1217     5913    2      PERRC=B$ALT.ERR & '777777777770'O;
     1218     5914    2      FPT_ERRMSG.V.DCB# = B$ALT.DCB#;
     1219     5915                                           /* Save for later call to REPORT_ERRMSG    */
     1220     5916    2      T$=ADDR(DFMSG);
     1221     5917    2      ERRM.M = T$->B$DFMSG;
     1222     5918    2      CALL REPORT_DEBUG_MSG;
     1223     5919
     1224     5920    2      DFMSG.SDF=' ';
     1225     5921    2      DFMSG.MONID.VER=' ';
     1226     5922    2      DFMSG.MONID.BOOT=' ';
     1227     5923    2      DFMSG.DUMPC=' ';
     1228     5924    2      RETURN;
     1229     5925    2   END REPORT_DFERR;
     1230     5926    1   END RCVR2;
     1231     5927        %EOD;

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:46   
--  Include file information  --

   U$JIT_C.:E05TOU  cannot be made into a system file and is referenced.
   NI$TABLES.:E05TOU  is referenced.
   IR_DATA_M.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   KQ_SUBS_C.:E05TOU  is referenced.
   HF_DATA_R.:E05TOU  is referenced.
   KQM_MAC_C.:E05TOU  is referenced.
   I$DISK.:E05TOU  cannot be made into a system file and is referenced.
   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   FM$GRAN.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure RCVR2.

   Procedure RCVR2 requires 1635 words for executable code.
   Procedure RCVR2 requires 24 words of local(AUTO) storage.

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:47   

 Object Unit name= RCVR2                                      File name= IRG$RCVR2.:E05TOU
 UTS= JUL 29 '97 22:44:57.84 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none 14904  35070  RCVR2
    2  RoData even  UTS    153    231  RCVR2
    3   DCB   even  none     0      0  M$DP
    4   DCB   even  none     0      0  M$EO
    5   Proc  even  none  1635   3143  RCVR2
    6  RoData even  none    25     31  RCVR2

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     5      0   yes            yes      Main       0  RCVR2

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    1    476  DP_GRAN                            1    477  LAST_GRAN
    1    500  APAGE                              1  10560  DINDEX
    1  10561  DDIR_GRAN                          2     33  IRG_DEBUG
    1  11022  TRAP_UNWIND                        1  11024  CLSDP_UNWIND
    1  11062  I                                  1  11063  J
    1  11064  AJIT$
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:48   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes          Async      0 IRG$TRAP
         yes           Std       0 IGL$HLP
                       nStd      0 X66_MAUTO
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_MAUNWIND

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  B$JIT$                                COPYRIGHT
     M$DP                                  M$EO                                  B$TCB$
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:49   


        1        1        /*M*   IRG$RCVR2   RCVR2--CONVERT SYSTEM AREA DUMP TO FILE MANANGED KEY FILE*/
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* PLM=3,IND=5,ENU=0,ECU=0    */
        8        8        RCVR2: PROC MAIN;

      8  5 000000   000000 700200 xent  RCVR2        TSX0  ! X66_MAUTO
         5 000001   000030 000000                    ZERO    24,0

        9        9
       10       10        %INCLUDE B_ERRORS_C;
       11     1137        %INCLUDE B_STRINGS_C;
       12     1266        %INCLUDE CP_6;
       13     1347        %INCLUDE CP_6_SUBS;
       14     1887        %INCLUDE FM$GRAN;
       15     1956        %INCLUDE F$DCB;
       16     2005        %INCLUDE I$DISK;
       17     2257        %INCLUDE KQM_MAC_C;
       18     2630        %INCLUDE KQ_SUBS_C;
       19     2930        %INCLUDE M_INFO_C;
       20     3070        %INCLUDE IR_DATA_M;
       21     3234        %INCLUDE NI$TABLES;
       22     3450        %INCLUDE U$JIT_C;
       23     3636    1   DCL B$JIT$ PTR SYMREF;
       24     3637
       25     3638    1   DCL IGL$HLP ENTRY;
       26     3639                                                /* EXTERNAL DATA                      */
       27     3640    1   DCL COPYRIGHT CHAR(64) SYMREF;
       28     3641
       29     3642        %FPT_OPEN (FPTN=OPN_DP,
       30     3643                   DCB=M$DP,
       31     3644                   RES='DP',
       32     3645                   ASN=DEVICE,
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:50   
       33     3646                   SN=SYSPACK,
       34     3647                   FUN=UPDATE);
       35     3756
       36     3757        %FPT_WAIT (FPTN = WAIT10,
       37     3758                   UNITS = 10,
       38     3759                   STCLASS = CONSTANT);
       39     3773
       40     3774        %FPT_READ (FPTN=RD_DP,
       41     3775                   DCB=M$DP,
       42     3776                   BUF=RV_USRDIR,
       43     3777                   KEYS=YES,
       44     3778                   KEY=DP_GRAN);
       45     3817
       46     3818        %FPT_READ (FPTN=RAPAGE,
       47     3819                   DCB=M$DP,
       48     3820                   BUF=APAGE,
       49     3821                   KEYS=YES,
       50     3822                   KEY=DP_GRAN);
       51     3861
       52     3862        %FPT_WRITE (FPTN=WT_DP,
       53     3863                   DCB=M$DP,
       54     3864                   BUF=APAGE,
       55     3865                   KEY=DDIR_GRAN);
       56     3896
       57     3897        %FPT_CLOSE (FPTN=CLS_DP,
       58     3898                   DCB=M$DP,
       59     3899                   DISP=RELEASE);
       60     3941
       61     3942        %FPT_OPEN (FPTN=OPN_EO,
       62     3943                   DCB=M$EO,
       63     3944                   ASN=FILE,
       64     3945                   CTG=YES,
       65     3946                   EXIST=OLDFILE,
       66     3947                   SHARE=NONE,
       67     3948                   FUN=CREATE,
       68     3949                   NAME=DF_NAME,
       69     3950                   ORG=KEYED,
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:51   
       70     3951                   ACS=DIRECT,
       71     3952                   ACCT=SYSTAC,
       72     3953                   IXTNSIZE=20,
       73     3954                    XTNSIZE=20,
       74     3955                  DISP=NAMED);
       75     4064
       76     4065        %FPT_WRITE (FPTN=WTEO,
       77     4066                   KEY=DF_KEY,
       78     4067                   DCB=M$EO);
       79     4098
       80     4099        %FPT_WRITE (FPTN=WAPAGE,
       81     4100                    DCB=M$EO,
       82     4101                    KEY=DF_KEY,
       83     4102                    BUF=APAGE);
       84     4133
       85     4134        %FPT_CLOSE (FPTN=CLS_EO,
       86     4135                   DCB=M$EO,
       87     4136                   ACSVEH=DF_CODE, CHGATT=YES, RELG=YES,
       88     4137                   DISP=SAVE);
       89     4179
       90     4180        %FPT_READ (FPTN=READ_NDIR,
       91     4181                   DCB=M$EO,
       92     4182                   KEY=DF_KEY,
       93     4183                   BUF=NODEDIR,
       94     4184                   KEYS=YES);
       95     4223
       96     4224        /* New declarations for renaming dumpfiles.  FPT DUMP_TEST is used
       97     4225           to obtain the date and time for the filename extension used to
       98     4226           make the name unique.  NEWDFN is the new dumpfile name, in the
       99     4227           TEXTC format required.  VDFN is aliased with DF_NAME (via %SUB)
      100     4228           to reference the DumpFile NAME as a TEXTC string.  RNM_EO is used
      101     4229           to close and rename the existing dumpfile.  %SUB M$EO$ provides
      102     4230           convenient reference to the contents of the M$EO DCB.  */
      103     4231
      104     4232        %FPT_TIME (FPTN=DUMP_TIME,DEST=ANS,SOURCE=CLOCK,DATE=DUMP_DT,TIME=DUMP_TM);
      105     4251        %VLP_NAME (FPTN=NEWDFN,LEN=31);
      106     4278        %VLP_NAMEV (FPTN=VDFN);
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:52   
      107     4285        %FPT_CLOSE (FPTN=RNM_EO,DCB=M$EO,CHGATT=YES,NAME=NEWDFN,DISP=SAVE);
      108     4327
      109     4328    1   DCL DUMP_DT CHAR(6) STATIC;             /* date in YYMMDD format              */
      110     4329    1   DCL DUMP_TM CHAR(8) STATIC;             /* time in HHMMSSss format            */
      111     4330
      112     4331        %SUB VDF_NAME = "ADDR(DF_NAME)->VDFN";
      113     4332        %SUB M$EO$ = "DCBADDR(DCBNUM(M$EO))";
      114     4333
      115     4334
      116     4335    1   DCL M$DP DCB;
      117     4336    1   DCL M$EO DCB;
      118     4337
      119     4338        %VLP_SN (FPTN=SYSPACK,SN='CP-6''S');
      120     4351        %VLP_ATTR(FPTN=DF_CODE);
      121     4365        %VLP_ACSVEH(FPTN=V,VEHICLE='FMM-M12345-7    ',LAST=";");
      122     4382    1   DCL FCGTBL CONSTANT CHAR(64) INIT(
      123     4383    1         ' ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmno0123456789:;<=>?');
      124     4384    1   DCL MTBL CONSTANT CHAR(2) INIT(' M');
      125     4385
      126     4386    1   DCL SYSTAC CONSTANT CHAR(8) DALIGNED INIT(':SYSTAC');
      127     4387
      128     4388    1   DCL DP_GRAN UBIN(36) STATIC SYMDEF INIT(0);
      129     4389    1   DCL LAST_GRAN UBIN(36) STATIC SYMDEF INIT(0);
      130     4390
      131     4391    1   DCL APAGE(0:1023) UBIN(36) STATIC SYMDEF;
      132     4392        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:53   
      133     4393
      134     4394        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:54   
      135     4395        %FM$VID;
      136     4401        %RV_BUFF;
      137     4437        %RV_BUFF (NAME=RV$BUFF,
      138     4438                  STCLASS=BASED);
      139     4474        %RV_USRDIR;
      140     4478        %RV_WSQD;
      141     4482        %RV_WSQD (NAME=B$WSQD,
      142     4483                  STCLASS=BASED);
      143     4487    1   DCL 1 B$CWSQD BASED ALIGNED,
      144     4488    1         2 *(0:255) UBIN(36) UNAL;
      145     4489
      146     4490    1   DCL B$BIT72 BIT(72) BASED ALIGNED;
      147     4491
      148     4492    1   DCL MAX_CG_PAGE UBIN WORD STATIC;
      149     4493    1   DCL FIRST_PAGE SBIN STATIC;
      150     4494    1   DCL LAST_PAGE SBIN STATIC;
      151     4495        %RV_DFNAME;
      152     4499        %RV_DFKEY;
      153     4517        %RV_DFSUBS;
      154     4544        %RV_NODEDIR (FPTN=NODEDIR,
      155     4545                     STCLASS=STATIC,
      156     4546                     N=10);
      157     4563
      158     4564    1   DCL 1 RCVR2D(0:3) STATIC ALIGNED,
      159     4565    1         2 DA UBIN WORD;
      160     4566
      161     4567    1   DCL DINDEX SBIN STATIC SYMDEF INIT(0);
      162     4568
      163     4569    1   DCL DDIR_GRAN UBIN(36) STATIC SYMDEF INIT(0);
      164     4570
      165     4571    1   DCL 1 B$CCBUF BASED,
      166     4572    1         2 NAME CHAR(8) UNAL,
      167     4573    1         2 SUA CHAR(4) UNAL,
      168     4574    1         2 INDX UBIN(9) UNAL;
      169     4575
      170     4576    1   DCL B$OCBUF CHAR(64) BASED;
      171     4577
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:55   
      172     4578    1   DCL B$CHAR(0:2) CHAR(1) BASED UNAL;
      173     4579    1   DCL B$OCT(0:2) UBIN(3) BASED UNAL;
      174     4580    1   DCL RCVR2_MODE SBIN STATIC INIT(0);
      175     4581
      176     4582        %SUB PRESLUG#=1/*PRESLUG#*/;
      177     4583        %SUB RCVRSCREECH#=2/*RCVRSCREECH#*/;
      178     4584        %SUB RCVRSUA#=3/*RCVRSUA#*/;
      179     4585        %SUB ONLINE#=4/*ONLINE#*/;
      180     4586
      181     4587
      182     4588    1   DCL RCVR2_LOWDA SBIN STATIC INIT(0);    /* LOW DA OF SYS RCVR AREA            */
      183     4589    1   DCL RCVR2_HIGHDA SBIN STATIC INIT(0);   /* HIGH DA OF SYS RCVR AREA           */
      184     4590
      185     4591    1   DCL RDUMP_LOWDA SBIN STATIC INIT(0);    /* LOW DA OF A RECOVERY DUMP          */
      186     4592    1   DCL RDUMP_HIGHDA SBIN STATIC INIT(0);   /* HIGH DA OF A RECOVERY DUMP         */
      187     4593
      188     4594        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:56   
      189     4595                                                /*  USED FOR ERROR MESSAGE REPORTING  */
      190     4596        %B$TCB;
      191     4599        %B$ALT;
      192     4607        %B$EXCFR;
      193     4625    1   DCL B$TCB$ PTR SYMREF;
      194     4626        %SUB B$ALT=B$TCB$->B$TCB.ALT$->B$ALT;
      195     4627        %SUB B$EXCFR=B$TCB$->B$TCB.STK$->B$EXCFR;
      196     4628
      197     4629        %FPT_WRITE (FPTN=REPORT_UC,
      198     4630                    DCB=M$UC,
      199     4631                    BUF=ERRM);
      200     4662
      201     4663        %FPT_KEYIN (FPTN=REPORT_OC,
      202     4664                    OCTYPE=SYSTEM,
      203     4665                    MESS=ERRM);
      204     4684
      205     4685        %FPT_TEMPWROC (FPTN=REPORT_OCT,
      206     4686                       BUFW=ERRM);
      207     4702
      208     4703        %FPT_TEMPWROC (FPTN=CRLF,
      209     4704                       BUFW=B_CRLF);
      210     4720
      211     4721        %FPT_ERRMSG (FPTN=FPT_ERRMSG,
      212     4722                     CODE=PERRC,
      213     4723                     BUF="ERRM.M",
      214     4724                     RESULTS=VLR_ERRMSG,
      215     4725                     SUBMESS=YES);
      216     4752
      217     4753        %VLR_ERRMSG;
      218     4775
      219     4776        %FPT_CLRSTK;
      220     4790
      221     4791    1   DCL B_CRLF CONSTANT BIT(36) INIT('015012040040'O);
      222     4792
      223     4793    1   DCL 1 ERRM STATIC,
      224     4794    1         2 CR BIT(18) UNAL INIT('015012'O),
      225     4795    1         2 M CHAR(120) UNAL INIT(' ');
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:57   
      226     4796
      227     4797    1   DCL B$MSG(0:126) CHAR(1) BASED;
      228     4798
      229     4799    1   DCL 1 DFMSG STATIC,
      230     4800    1         2 * CHAR(5) UNAL INIT('SLOT '),
      231     4801    1         2 SLOTN CHAR(1) UNAL INIT(' '),
      232     4802    1         2 * CHAR(1) UNAL INIT(' '),
      233     4803    1         2 M CHAR(30) UNAL INIT(' '),
      234     4804    1         2 * CHAR(1) UNAL INIT(' '),
      235     4805    1         2 SDF CHAR(3) UNAL INIT(' '),
      236     4806    1         2 MONID,
      237     4807    1           3 VER CHAR(3) UNAL INIT(' '),
      238     4808    1           3 BOOT CHAR(1) UNAL INIT(' '),
      239     4809    1         2 DUMPC CHAR(3) UNAL INIT(' ');
      240     4810
      241     4811    1   DCL 1 OCMSG STATIC,
      242     4812    1         2 DF CHAR(3) INIT(':DF'),
      243     4813    1         2 MONID,
      244     4814    1           3 VER CHAR(3) UNAL,
      245     4815    1           3 BOOT CHAR(1) UNAL,
      246     4816    1         2 DUMPC CHAR(3),
      247     4817    1         2 * CHAR(1) INIT(' '),
      248     4818    1         2 DF_CODE CHAR(12),
      249     4819    1         2 * CHAR(5) INIT(' at .'),
      250     4820    1         2 IC CHAR(6),
      251     4821    1         2 * CHAR(1) INIT(' '),
      252     4822    1         2 * CHAR(1) INIT('.'),
      253     4823    1         2 USR#(0:2) CHAR(1),
      254     4824    1         2 USR REDEF USR# CHAR(3) UNAL,
      255     4825    1         2 * CHAR(1) INIT(' '),
      256     4826    1         2 ACCN CHAR(8),
      257     4827    1         2 C CHAR(1) INIT(','),
      258     4828    1         2 UNAME CHAR(12),
      259     4829    1         2 * CHAR(1) INIT(' '),
      260     4830    1         2 SYSID CHAR(5),
      261     4831    1         2 * CHAR(1) INIT(' '),
      262     4832    1         2 CCBUF CHAR(52);
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:58   
      263     4833    1   DCL 1 OCMSG_C REDEF OCMSG CHAR(120);
      264     4834
      265     4835    1   DCL B$DFMSG CHAR(48) BASED;
      266     4836
      267     4837    1   DCL MSGINDX SBIN STATIC INIT(0);
      268     4838
      269     4839
      270     4840    1   DCL PERRC BIT(36) STATIC;
      271     4841    1   DCL PRINT_MSG1 SBIN STATIC INIT(0);
      272     4842
      273     4843
      274     4844    1   DCL IRG_DEBUG SBIN CONSTANT SYMDEF INIT(0);
      275     4845
      276     4846    1   DCL KWSQERR SBIN STATIC INIT(0);
      277     4847
      278     4848        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:59   
      279     4849
      280     4850                                                /*  USED FOR TRAP CONTROL             */
      281     4851        %FPT_TRAP (FPTN=TRAPFPT,STCLASS=CONSTANT,
      282     4852                   ERRORS=IRG$TRAP,
      283     4853                   ARITHMETIC=IRG$TRAP,
      284     4854                   PROGRAMMED=IRG$TRAP,
      285     4855                   OVERFLOW=TRAP,
      286     4856                   MME=TRAP,
      287     4857                   FAULT_TAG=TRAP,
      288     4858                   MEMORY=TRAP,
      289     4859                   COMMAND=TRAP,
      290     4860                   LOCKUP=TRAP,
      291     4861                   IPR=TRAP,
      292     4862                   MISSING_SEG=TRAP,
      293     4863                   MISSING_PAGE=TRAP,
      294     4864                   SECURITY_2=TRAP,
      295     4865                   SECURITY_1=TRAP,
      296     4866                   HARDWARE=TRAP,
      297     4867                   DIVIDE_CHECK=TRAP,
      298     4868                   PMME=IRG$TRAP);
      299     4891
      300     4892    1   DCL IRG$TRAP ENTRY ASYNC;
      301     4893    1   DCL TRAP_UNWIND REMEMBER STATIC SYMDEF DALIGNED;
      302     4894
      303     4895        %FPT_XCON (FPTN=SET_XCON,
      304     4896                   UENTRY=IRG$TRAP,
      305     4897                   STCLASS=CONSTANT);
      306     4911
      307     4912        %FPT_XCON (FPTN=RESET_XCON,
      308     4913                   STCLASS=CONSTANT);
      309     4927
      310     4928    1   DCL CLSDP_UNWIND REMEMBER STATIC SYMDEF DALIGNED;
      311     4929        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:60   
      312     4930
      313     4931                                                /* USED FOR TIMING REPORTING          */
      314     4932
      315     4933    1   DCL TSTAMP1 UBIN(36) STATIC ALIGNED INIT(0);
      316     4934    1   DCL TSTAMP2 UBIN(36) STATIC ALIGNED INIT(0);
      317     4935    1   DCL TSTAMP3 UBIN(36) STATIC ALIGNED INIT(0);
      318     4936
      319     4937        %FPT_TIME (FPTN=R2BTIME,
      320     4938                   TSTAMP=TSTAMP1);
      321     4957
      322     4958        %FPT_TIME (FPTN=R2ETIME,
      323     4959                   TSTAMP=TSTAMP2);
      324     4978
      325     4979        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:61   
      326     4980    1   DCL T$ PTR;
      327     4981    1   DCL JITSZ UBIN(36);
      328     4982    1   DCL JITSPG UBIN(36);
      329     4983    1   DCL INSTID UBIN;
      330     4984    1   DCL NODEIDX UBIN;
      331     4985    1   DCL Z SBIN;
      332     4986    1   DCL I UBIN(36) STATIC SYMDEF;
      333     4987    1   DCL J UBIN(36) STATIC SYMDEF;
      334     4988    1   DCL AJIT$ PTR STATIC SYMDEF;
      335     4989
      336     4990
      337     4991    1   DCL KQ_DSBSZ SBIN;            /* Size of Comgroup descriptor segment block    */
      338     4992    1   DCL KQ_PGSZ SBIN;             /* # of pages framed by each desc. in KQ_DSB    */
      339     4993
      340     4994        %KQ_DSB (FPTN=KQ$DSB,STCLASS=BASED);
      341     5037
      342     5038    1   DCL 1 RG_CGPT STATIC DALIGNED,
      343     5039    1         2 PG(0:10239),
      344     5040    1           3 RPN UBIN(18) UNAL,            /* REAL PAGE NUMBER                   */
      345     5041    1           3 SFLG BIT(10) UNAL,            /* SOFTWARE CONTROL FLAGS             */
      346     5042    1           3 VLINK REDEF SFLG UBIN(10) UNAL, /* ALTERNATE DEFINITION             */
      347     5043    1           3 Z2 BIT(2) UNAL,               /* MUST BE ZERO                       */
      348     5044    1           3 HFLG BIT(6) UNAL;             /* HARDWARE CONTROL BITS              */
      349     5045
      350     5046    1   DCL B$CGPT$ PTR STATIC INIT(ADDR(RG_CGPT));
      351     5047    1   DCL VP# UBIN WORD STATIC;
      352     5048
      353     5049        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:62   
      354     5050         /*F*     NAME:   IRG$RCVR2
      355     5051
      356     5052                  PURPOSE:  To convert Recovery dumps on the
      357     5053                            System pack dump area to file
      358     5054                            managed keyed files.
      359     5055
      360     5056                  DESCRIPTION:
      361     5057
      362     5058                 The RCVR2 Ghost may be initiated in several ways:
      363     5059
      364     5060                 1) Entered via a M$LDTRC from GHOST1 when all the
      365     5061                    dump slots in the recovery dump area of the
      366     5062                    System pack are busy.  Each recovery dump will
      367     5063                    be converted to a keyed file and RCVR2 will
      368     5064                    exit to SLUG (M$LDTRC) to allow initiation of
      369     5065                    the System Ghosts and logging on of other users.
      370     5066
      371     5067                 2) Started as a ghost job by SLUG after a full screech
      372     5068                    when 1 or more dump files exist in the recovery
      373     5069                    dump area on the system pack.  For each dump slot
      374     5070                    that is busy, the data will be converted to a
      375     5071                    keyed file.
      376     5072
      377     5073                 3) Initiated by the CP-6 Operating System as a ghost
      378     5074                    job following a Single User Abort or Snapshot Dump.
      379     5075                    The contents of JIT.CCBUF indicates which dump slot
      380     5076                    of the recovery dump area on the system pack is
      381     5077                    to be converted to a keyed file.
      382     5078
      383     5079                 4) Started on-line.  This mode is used primarily for
      384     5080                    debugging RCVR2.  For each dump slot in the recovery
      385     5081                    dump area that is busy, the data will be converted to
      386     5082                    a keyed file.
      387     5083
      388     5084         */
      389     5085
      390     5086        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:63   
      391     5087    1      IF B$JIT$->B$JIT.SYSID  = 1

   5087  5 000002   000000 470400 xsym               LDP0    B$JIT$
         5 000003   000000 720100                    LXL0    0,,PR0
         5 000004   000001 100003                    CMPX0   1,DU
         5 000005   000011 601000 5                  TNZ     s:5090

      392     5088    1      THEN RCVR2_MODE = PRESLUG#;

   5088  5 000006   000001 235007                    LDA     1,DL
         5 000007   010562 755000 1                  STA     RCVR2_MODE
         5 000010   000054 710000 5                  TRA     s:5110

      393     5089    2      ELSE DO;

      394     5090    2           IF B$JIT$->B$JIT.MODE = %M_INT#

   5090  5 000011   000000 236100                    LDQ     0,,PR0
         5 000012   740000 376003                    ANQ     -16384,DU
         5 000013   140000 116003                    CMPQ    49152,DU
         5 000014   000020 601000 5                  TNZ     s:5093

      395     5091    2           THEN RCVR2_MODE = ONLINE#;

   5091  5 000015   000004 235007                    LDA     4,DL
         5 000016   010562 755000 1                  STA     RCVR2_MODE
         5 000017   000054 710000 5                  TRA     s:5110

      396     5092    3           ELSE DO;

      397     5093    3                AJIT$=ADDR(B$JIT$->B$JIT.CCBUF);

   5093  5 000020   000000 236000 xsym               LDQ     B$JIT$
         5 000021   000033 036003                    ADLQ    27,DU
         5 000022   011064 756000 1                  STQ     AJIT$

      398     5094    3                IF AJIT$->B$CCBUF.SUA ~= 'SUA '
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:64   

   5094  5 000023   011064 471400 1                  LDP1    AJIT$
         5 000024   040000 106500                    CMPC    fill='040'O
         5 000025   100002 000004                    ADSC9   2,,PR1                   cn=0,n=4
         5 000026   000062 000004 2                  ADSC9   RESET_XCON+6             cn=0,n=4
         5 000027   000033 600000 5                  TZE     s:5097

      399     5095    3                THEN RCVR2_MODE = RCVRSCREECH#;

   5095  5 000030   000002 235007                    LDA     2,DL
         5 000031   010562 755000 1                  STA     RCVR2_MODE
         5 000032   000054 710000 5                  TRA     s:5110

      400     5096    4                ELSE DO;

      401     5097    4                     RCVR2_MODE = RCVRSUA#;

   5097  5 000033   000003 235007                    LDA     3,DL
         5 000034   010562 755000 1                  STA     RCVR2_MODE

      402     5098    4                     DINDEX = AJIT$->B$CCBUF.INDX;

   5098  5 000035   000000 101500                    MRL     fill='000'O
         5 000036   100003 000001                    ADSC9   3,,PR1                   cn=0,n=1
         5 000037   010560 000004 1                  ADSC9   DINDEX                   cn=0,n=4

      403     5099    4                     IF DINDEX > %RV_SYSDDUMP#-1

   5099  5 000040   010560 235000 1                  LDA     DINDEX
         5 000041   000003 115007                    CMPA    3,DL
         5 000042   000054 604400 5                  TMOZ    s:5110

      404     5100    5                     THEN DO;

      405     5101    5                          ERRM.M = 'DUMP SLOT INDEX BAD';

   5101  5 000043   040000 100400                    MLR     fill='040'O
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:65   
         5 000044   000063 000023 2                  ADSC9   RESET_XCON+7             cn=0,n=19
         5 000045   010704 400170 1                  ADSC9   ERRM                     cn=2,n=120

      406     5102    5                          PRINT_MSG1 = 1;

   5102  5 000046   000001 235007                    LDA     1,DL
         5 000047   011017 755000 1                  STA     PRINT_MSG1

      407     5103    5                          CALL REPORT_DEBUG_MSG;

   5103  5 000050   002755 701000 5                  TSX1    REPORT_DEBUG_MSG
         5 000051   000000 011000                    NOP     0

      408     5104    5                          CALL M$ERR;

   5104  5 000052   000002 713400                    CLIMB   err
         5 000053   000000 401760                    pmme    nvectors=0

      409     5105    5                          END;

      410     5106    4                     END;

      411     5107    3                END;

      412     5108    2           END;

      413     5109
      414     5110    1      REMEMBER TRAP_HAND IN TRAP_UNWIND;

   5110  5 000054   000304 635000 5                  EAA     TRAP_HAND
         5 000055   011022 452400 1                  STP2    TRAP_UNWIND
         5 000056   011023 755000 1                  STA     TRAP_UNWIND+1

      415     5111    1      CALL M$XCON(SET_XCON) ALTRET(NO_XCON);

   5111  5 000057   000046 630400 2                  EPPR0   SET_XCON
         5 000060   410003 713400                    CLIMB   alt,+4099
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:66   
         5 000061   400400 401760                    pmme    nvectors=2
         5 000062   000063 702000 5                  TSX2    NO_XCON

   5111  5 000063                       NO_XCON      null
      416     5112    1   NO_XCON: ;
      417     5113    1      CALL M$TRAP(TRAPFPT) ALTRET(NO_TRAP);

   5113  5 000063   000034 630400 2                  EPPR0   TRAPFPT
         5 000064   410004 713400                    CLIMB   alt,+4100
         5 000065   400400 401760                    pmme    nvectors=2
         5 000066   000067 702000 5                  TSX2    NO_TRAP

   5111  5 000067                       NO_TRAP      null
      418     5114    1   NO_TRAP: ;
      419     5115    1      CALL M$OPEN(OPN_DP) ALTRET(ODP_ERR);

   5115  5 000067   000000 630400 1                  EPPR0   OPN_DP
         5 000070   450000 713400                    CLIMB   alt,open
         5 000071   410400 401760                    pmme    nvectors=18
         5 000072   000234 702000 5                  TSX2    ODP_ERR

      420     5116                                                /*  Open the system pack              */
      421     5117    1      CALL M$READ(RD_DP) ALTRET(R_VID_ERR);

   5117  5 000073   000072 630400 1                  EPPR0   RD_DP
         5 000074   440000 713400                    CLIMB   alt,read
         5 000075   401400 401760                    pmme    nvectors=4
         5 000076   000256 702000 5                  TSX2    R_VID_ERR

      422     5118                                                /* Read the VID                       */
      423     5119    1      T$=ADDR(RV_USRDIR);

   5119  5 000077   000000 236000 6                  LDQ     0
         5 000100   200003 756100                    STQ     T$,,AUTO

      424     5120    1      INSTID=BITBIN(T$->FM$VID.INSTID);

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:67   
   5120  5 000101   200003 470500                    LDP0    T$,,AUTO
         5 000102   000001 235100                    LDA     1,,PR0
         5 000103   200006 755100                    STA     INSTID,,AUTO

      425     5121    1      DP_GRAN=T$->FM$VID.SYSDIRDA;

   5121  5 000104   000006 235100                    LDA     6,,PR0
         5 000105   000476 755000 1                  STA     DP_GRAN

      426     5122    1      CALL M$READ(RD_DP) ALTRET(R_SAD_ERR);

   5122  5 000106   000072 630400 1                  EPPR0   RD_DP
         5 000107   440000 713400                    CLIMB   alt,read
         5 000110   401400 401760                    pmme    nvectors=4
         5 000111   000266 702000 5                  TSX2    R_SAD_ERR

      427     5123                                                /* Read the System Area Directory     */
      428     5124    1      DF_NAME.L=10;                        /* Build the dump file name           */

   5124  5 000112   012000 236003                    LDQ     5120,DU
         5 000113   010504 552040 1                  STBQ    DF_NAME,'40'O

      429     5125    1      DF_NAME.N1=':DF';

   5125  5 000114   000070 236000 2                  LDQ     RESET_XCON+12
         5 000115   000011 772000                    QRL     9
         5 000116   010504 552034 1                  STBQ    DF_NAME,'34'O

      430     5126    1      DF_NAME.MONID = T$->I$DISKDIR.MONID.M;

   5126  5 000117   200003 470500                    LDP0    T$,,AUTO
         5 000120   000211 236100                    LDQ     137,,PR0
         5 000121   010505 756000 1                  STQ     DF_NAME+1

      431     5127    1      DF_NAME.DUMPC='  ';

   5127  5 000122   000071 236000 2                  LDQ     RESET_XCON+13
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:68   
         5 000123   777777 376003                    ANQ     -1,DU
         5 000124   040040 276007                    ORQ     16416,DL
         5 000125   010506 552070 1                  STBQ    DF_NAME+2,'70'O

      432     5128                                                /*                                    */
      433     5129    1      DF_KEY='0'B;

   5129  5 000126   000000 235003                    LDA     0,DU
         5 000127   000000 236003                    LDQ     0,DU
         5 000130   010510 757000 1                  STAQ    DF_KEY

      434     5130    1      DF_KEY.L=7;

   5130  5 000131   007000 236003                    LDQ     3584,DU
         5 000132   010510 552040 1                  STBQ    DF_KEY,'40'O

      435     5131           /*N* NEED TO DO LOTS OF WORK ON NODE INDEX */
      436     5132                                                /*                                    */
      437     5133    1      RCVR2D = T$->I$DISKDIR.RCVR2;

   5133  5 000133   000000 100500                    MLR     fill='000'O
         5 000134   000204 000020                    ADSC9   132,,PR0                 cn=0,n=16
         5 000135   010554 000020 1                  ADSC9   RCVR2D                   cn=0,n=16

      438     5134    1      RCVR2_LOWDA = T$->I$DISKDIR.DUMP.DA;

   5134  5 000136   000201 235100                    LDA     129,,PR0
         5 000137   010563 755000 1                  STA     RCVR2_LOWDA

      439     5135    1      RCVR2_HIGHDA = RCVR2_LOWDA + T$->I$DISKDIR.DUMP.SIZE -1;

   5135  5 000140   010563 236000 1                  LDQ     RCVR2_LOWDA
         5 000141   000202 036100                    ADLQ    130,,PR0
         5 000142   000001 136007                    SBLQ    1,DL
         5 000143   010564 756000 1                  STQ     RCVR2_HIGHDA

      440     5136
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:69   
      441     5137    1      IF RCVR2_MODE = RCVRSUA#

   5137  5 000144   010562 235000 1                  LDA     RCVR2_MODE
         5 000145   000003 115007                    CMPA    3,DL
         5 000146   000171 601000 5                  TNZ     s:5152

      442     5138    2      THEN DO;

      443     5139    2           DDIR_GRAN = RCVR2D.DA(DINDEX);

   5139  5 000147   010560 720000 1                  LXL0    DINDEX
         5 000150   010554 235010 1                  LDA     RCVR2D,X0
         5 000151   010561 755000 1                  STA     DDIR_GRAN

      444     5140    2           CALL CONVERT_DUMP ALTRET(CLS_DP_XIT);

   5140  5 000152   000312 701000 5                  TSX1    CONVERT_DUMP
         5 000153   000204 702000 5                  TSX2    CLS_DP_XIT

      445     5141    2           REMEMBER RESET_XCON1 IN CLSDP_UNWIND;

   5141  5 000154   000163 635000 5                  EAA     RESET_XCON1
         5 000155   011024 452400 1                  STP2    CLSDP_UNWIND
         5 000156   011025 755000 1                  STA     CLSDP_UNWIND+1

      446     5142    2           CALL M$CLOSE(CLS_DP) ALTRET(CLS_DP_ERR);

   5142  5 000157   000142 630400 1                  EPPR0   CLS_DP
         5 000160   450001 713400                    CLIMB   alt,close
         5 000161   406000 401760                    pmme    nvectors=13
         5 000162   000272 702000 5                  TSX2    CLS_DP_ERR

   5139  5 000163                       RESET_XCON1  null
      447     5143    2   RESET_XCON1: ;
      448     5144    2           CALL M$XCON(RESET_XCON) ALTRET(XCON_ALTRET);

   5144  5 000163   000054 630400 2                  EPPR0   RESET_XCON
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:70   
         5 000164   410003 713400                    CLIMB   alt,+4099
         5 000165   400400 401760                    pmme    nvectors=2
         5 000166   000167 702000 5                  TSX2    XCON_ALTRET

   5139  5 000167                       XCON_ALTRET  null
      449     5145    2   XCON_ALTRET: ;
      450     5146    2           CALL M$EXIT;

   5146  5 000167   000001 713400                    CLIMB   exit
         5 000170   000000 401760                    pmme    nvectors=0

      451     5147
      452     5148    2           END;

      453     5149
      454     5150        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:71   
      455     5151
      456     5152    1      DINDEX = %RV_SYSDDUMP#-1;

   5152  5 000171   000003 235007                    LDA     3,DL
         5 000172   010560 755000 1                  STA     DINDEX

      457     5153    2      DO WHILE (DINDEX >= 0);

   5153  5 000173   000204 604000 5                  TMI     CLS_DP_XIT

      458     5154    2           DDIR_GRAN = RCVR2D.DA(DINDEX);

   5154  5 000174   010560 720000 1                  LXL0    DINDEX
         5 000175   010554 235010 1                  LDA     RCVR2D,X0
         5 000176   010561 755000 1                  STA     DDIR_GRAN

      459     5155    2           CALL CONVERT_DUMP ALTRET(NEXT_DUMP);

   5155  5 000177   000312 701000 5                  TSX1    CONVERT_DUMP
         5 000200   000201 702000 5                  TSX2    NEXT_DUMP

   5154  5 000201                       NEXT_DUMP    null
      460     5156    2   NEXT_DUMP: ;
      461     5157    2           DINDEX=DINDEX-1;

   5157  5 000201   000001 336007                    LCQ     1,DL
         5 000202   010560 056000 1                  ASQ     DINDEX

      462     5158    2           END;

   5158  5 000203   000174 605000 5                  TPL     s:5154

   5154  5 000204                       CLS_DP_XIT   null
      463     5159
      464     5160    1   CLS_DP_XIT: ;
      465     5161    1      REMEMBER FIND_XIT IN CLSDP_UNWIND;

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:72   
   5161  5 000204   000213 635000 5                  EAA     FIND_XIT
         5 000205   011024 452400 1                  STP2    CLSDP_UNWIND
         5 000206   011025 755000 1                  STA     CLSDP_UNWIND+1

      466     5162    1      CALL M$CLOSE(CLS_DP) ALTRET(CLS_DP_ERR);

   5162  5 000207   000142 630400 1                  EPPR0   CLS_DP
         5 000210   450001 713400                    CLIMB   alt,close
         5 000211   406000 401760                    pmme    nvectors=13
         5 000212   000272 702000 5                  TSX2    CLS_DP_ERR

   5154  5 000213                       FIND_XIT     null
      467     5163    1   FIND_XIT: ;
      468     5164    1      CALL M$XCON(RESET_XCON) ALTRET(RXCON2);

   5164  5 000213   000054 630400 2                  EPPR0   RESET_XCON
         5 000214   410003 713400                    CLIMB   alt,+4099
         5 000215   400400 401760                    pmme    nvectors=2
         5 000216   000217 702000 5                  TSX2    RXCON2

   5164  5 000217                       RXCON2       null
      469     5165    1   RXCON2: ;
      470     5166    1      IF RCVR2_MODE = PRESLUG#

   5166  5 000217   010562 235000 1                  LDA     RCVR2_MODE
         5 000220   000001 115007                    CMPA    1,DL
         5 000221   000232 601000 5                  TNZ     s:5173

      471     5167    2      THEN DO;

      472     5168    2           ERRM.M = 'CALLING SLUG';

   5168  5 000222   040000 100400                    MLR     fill='040'O
         5 000223   000072 000014 2                  ADSC9   RESET_XCON+14            cn=0,n=12
         5 000224   010704 400170 1                  ADSC9   ERRM                     cn=2,n=120

      473     5169    2           CALL REPORT_DEBUG_MSG;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:73   

   5169  5 000225   002755 701000 5                  TSX1    REPORT_DEBUG_MSG
         5 000226   000000 011000                    NOP     0

      474     5170    2           CALL IGL$HLP;

   5170  5 000227   000002 631400 xsym               EPPR1   B_VECTNIL+2
         5 000230   000000 701000 xent               TSX1    IGL$HLP
         5 000231   000000 011000                    NOP     0

      475     5171    2           END;

      476     5172
      477     5173    1      CALL M$EXIT;

   5173  5 000232   000001 713400                    CLIMB   exit
         5 000233   000000 401760                    pmme    nvectors=0

   5166  5 000234                       ODP_ERR      null
      478     5174
      479     5175        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:74   
      480     5176        /*************************************************************
      481     5177         *                                                           *
      482     5178         *     Error Routines for the System Disk                    *
      483     5179         *                                                           *
      484     5180         *************************************************************/
      485     5181    1   ODP_ERR: ;                              /*ERROR OPENING M$DP                  */
      486     5182    1      IF B$ALT.ERR.ERR# = %E$XCLSET

   5182  5 000234   000000 470400 xsym               LDP0    B$TCB$
         5 000235   000000 471500                    LDP1    0,,PR0
         5 000236   100102 236100                    LDQ     66,,PR1
         5 000237   377770 376007                    ANQ     131064,DL
         5 000240   002170 116007                    CMPQ    1144,DL
         5 000241   000246 601000 5                  TNZ     s:5187

      487     5183    2      THEN DO;

      488     5184    2           CALL M$WAIT (WAIT10);

   5184  5 000242   000000 630400 2                  EPPR0   WAIT10
         5 000243   020006 713400                    CLIMB   8198
         5 000244   400400 401760                    pmme    nvectors=2

      489     5185    2           GOTO NO_TRAP;

   5185  5 000245   000067 710000 5                  TRA     NO_TRAP

      490     5186    2           END;
      491     5187    1      ERRM.M = 'OPEN SYS DISK ERROR';

   5187  5 000246   040000 100400                    MLR     fill='040'O
         5 000247   000075 000023 2                  ADSC9   RESET_XCON+17            cn=0,n=19
         5 000250   010704 400170 1                  ADSC9   ERRM                     cn=2,n=120

      492     5188    1      PRINT_MSG1 = 1;

   5188  5 000251   000001 235007                    LDA     1,DL
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:75   
         5 000252   011017 755000 1                  STA     PRINT_MSG1

      493     5189    1      CALL REPORT_ALT_ERR;

   5189  5 000253   002702 701000 5                  TSX1    REPORT_ALT_ERR
         5 000254   000000 011000                    NOP     0

      494     5190    1      GOTO FIND_XIT;

   5190  5 000255   000213 710000 5                  TRA     FIND_XIT

   5188  5 000256                       R_VID_ERR    null
      495     5191
      496     5192    1   R_VID_ERR: ;                            /* ERROR READING VID                  */
      497     5193    1      ERRM.M = 'ERROR READING VID';

   5193  5 000256   040000 100400                    MLR     fill='040'O
         5 000257   000102 000021 2                  ADSC9   RESET_XCON+22            cn=0,n=17
         5 000260   010704 400170 1                  ADSC9   ERRM                     cn=2,n=120

   5193  5 000261                       ERR_DP       null
      498     5194    1   ERR_DP: ;
      499     5195    1      PRINT_MSG1 = 1;

   5195  5 000261   000001 235007                    LDA     1,DL
         5 000262   011017 755000 1                  STA     PRINT_MSG1

      500     5196    1      CALL REPORT_ALT_ERR;

   5196  5 000263   002702 701000 5                  TSX1    REPORT_ALT_ERR
         5 000264   000000 011000                    NOP     0

      501     5197    1      GOTO CLS_DP_XIT;

   5197  5 000265   000204 710000 5                  TRA     CLS_DP_XIT

   5195  5 000266                       R_SAD_ERR    null
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:76   
      502     5198
      503     5199    1   R_SAD_ERR: ;                            /*ERROR READING SYSTEM AREA DIRECTORY*/
      504     5200    1      ERRM.M = 'ERROR READING SAD';

   5200  5 000266   040000 100400                    MLR     fill='040'O
         5 000267   000107 000021 2                  ADSC9   RESET_XCON+27            cn=0,n=17
         5 000270   010704 400170 1                  ADSC9   ERRM                     cn=2,n=120

      505     5201    1      GOTO ERR_DP;

   5201  5 000271   000261 710000 5                  TRA     ERR_DP

   5200  5 000272                       CLS_DP_ERR   null
      506     5202
      507     5203
      508     5204    1   CLS_DP_ERR: ;                           /*ERROR CLOSING SYSTEM PACK           */
      509     5205    1      ERRM.M = 'CLOSE SYS DISK ERROR';

   5205  5 000272   040000 100400                    MLR     fill='040'O
         5 000273   000114 000024 2                  ADSC9   RESET_XCON+32            cn=0,n=20
         5 000274   010704 400170 1                  ADSC9   ERRM                     cn=2,n=120

      510     5206    1      PRINT_MSG1 = 1;

   5206  5 000275   000001 235007                    LDA     1,DL
         5 000276   011017 755000 1                  STA     PRINT_MSG1

      511     5207    1      CALL REPORT_ALT_ERR;

   5207  5 000277   002702 701000 5                  TSX1    REPORT_ALT_ERR
         5 000300   000000 011000                    NOP     0

      512     5208    1      UNWIND TO CLSDP_UNWIND;

   5208  5 000301   011024 237200 1                  LDAQ  ! CLSDP_UNWIND
         5 000302   000000 700200 xent               TSX0  ! X66_MAUNWIND
         5 000303   000000 000200                    ZERO    0,128
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:77   

   5208  5 000304                       TRAP_HAND    null
      513     5209
      514     5210
      515     5211                                                /* M$TRAP & M$XCON ROUTINE            */
      516     5212    1   TRAP_HAND: ;
      517     5213    1      ERRM.M = 'TRAP/XCON ENTRY';

   5213  5 000304   040000 100400                    MLR     fill='040'O
         5 000305   000121 000017 2                  ADSC9   RESET_XCON+37            cn=0,n=15
         5 000306   010704 400170 1                  ADSC9   ERRM                     cn=2,n=120

   5213  5 000307                       REPORT_ASYNC null
      518     5214    1   REPORT_ASYNC: ;
      519     5215    1      CALL REPORT_STK_ERR;

   5215  5 000307   002720 701000 5                  TSX1    REPORT_STK_ERR
         5 000310   000000 011000                    NOP     0

      520     5216    1      GOTO FIND_XIT;

   5216  5 000311   000213 710000 5                  TRA     FIND_XIT

      521     5217        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:78   
      522     5218
      523     5219        /*************************************************************
      524     5220         *                                                           *
      525     5221         *               CONVERT DUMP                                *
      526     5222         *                                                           *
      527     5223         *************************************************************/
      528     5224
      529     5225    1   CONVERT_DUMP: PROC ALTRET;

   5225  5 000312   200014 741300       CONVERT_DUMP STX1  ! KQ_PGSZ+2,,AUTO

      530     5226                                 /* Iniitialize the Dump File debug/error message     */
      531     5227    2      CALL BINCHAR(DFMSG.SLOTN,DINDEX);

   5227  5 000313   000000 301400                    BTD
         5 000314   010560 000004 1                  NDSC9   DINDEX                   cn=0,s=lsgnf,sf=0,n=4
         5 000315   010744 230001 1                  NDSC9   DFMSG+1                  cn=1,s=nosgn,sf=0,n=1

      532     5228
      533     5229    2      IF DDIR_GRAN = 0

   5229  5 000316   010561 235000 1                  LDA     DDIR_GRAN
         5 000317   000327 601000 5                  TNZ     s:5236

      534     5230    3      THEN DO;

      535     5231    3           DFMSG.M = 'DUMP SLOT EMPTY';

   5231  5 000320   040000 100400                    MLR     fill='040'O
         5 000321   000125 000017 2                  ADSC9   RESET_XCON+41            cn=0,n=15
         5 000322   010744 600036 1                  ADSC9   DFMSG+1                  cn=3,n=30

      536     5232    3           CALL REPORT_DF_SLOT;

   5232  5 000323   003107 701000 5                  TSX1    REPORT_DF_SLOT
         5 000324   000000 011000                    NOP     0

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:79   
      537     5233    3           ALTRETURN;

   5233  5 000325   200014 221300                    LDX1  ! KQ_PGSZ+2,,AUTO
         5 000326   000000 702211                    TSX2  ! 0,X1

      538     5234    3           END;
      539     5235
      540     5236    2      CALL M$TIME(R2BTIME) ALTRET(SK1);

   5236  5 000327   011032 630400 1                  EPPR0   R2BTIME
         5 000330   420004 713400                    CLIMB   alt,+8196
         5 000331   402000 401760                    pmme    nvectors=5
         5 000332   000333 702000 5                  TSX2    SK1

   5229  5 000333                       SK1          null
      541     5237    2   SK1: ;
      542     5238    2      DP_GRAN=DDIR_GRAN;

   5238  5 000333   010561 235000 1                  LDA     DDIR_GRAN
         5 000334   000476 755000 1                  STA     DP_GRAN

      543     5239    2      RD_DP.BUF_ = VECTOR(APAGE);

   5239  5 000335   000002 237000 6                  LDAQ    2
         5 000336   000076 757000 1                  STAQ    RD_DP+4

      544     5240    2      CALL M$READ(RD_DP) ALTRET(R_RB_ERR);

   5240  5 000337   000072 630400 1                  EPPR0   RD_DP
         5 000340   440000 713400                    CLIMB   alt,read
         5 000341   401400 401760                    pmme    nvectors=4
         5 000342   002350 702000 5                  TSX2    R_RB_ERR

      545     5241    2      T$=ADDR(APAGE);

   5241  5 000343   000003 236000 6                  LDQ     3
         5 000344   200003 756100                    STQ     T$,,AUTO
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:80   

      546     5242    2      RV_BUFF=T$->RV$BUFF;

   5242  5 000345   200003 470500                    LDP0    T$,,AUTO
         5 000346   010000 220003                    LDX0    4096,DU
         5 000347   000040 100540                    MLR     fill='000'O
         5 000350   000000 000010                    ADSC9   0,,PR0                   cn=0,n=*X0
         5 000351   002500 000010 1                  ADSC9   RV_BUFF                  cn=0,n=*X0

      547     5243
      548     5244        /*   If the dump was taken because of a ZAP, there is no reason to
      549     5245             convert it.  The recovery buffer is marked not busy to free the
      550     5246             slot for re_use.
      551     5247        */
      552     5248    2      IF RV_BUFF.SCODE.SEV = %SEV_ZAP#

   5248  5 000352   002510 236000 1                  LDQ     RV_BUFF+8
         5 000353   000007 376007                    ANQ     7,DL
         5 000354   000004 116007                    CMPQ    4,DL
         5 000355   000365 601000 5                  TNZ     s:5256

      553     5249    3      THEN DO;

      554     5250    3           T$->RV$BUFF.BUSY = 0;

   5250  5 000356   000000 450100                    STZ     0,,PR0

      555     5251    3           CALL M$WRITE(WT_DP) ALTRET(NEVER_MORE);

   5251  5 000357   000126 630400 1                  EPPR0   WT_DP
         5 000360   440001 713400                    CLIMB   alt,write
         5 000361   401400 401760                    pmme    nvectors=4
         5 000362   000363 702000 5                  TSX2    NEVER_MORE

   5250  5 000363                       NEVER_MORE   null
      556     5252    3   NEVER_MORE: ;
      557     5253    3           RETURN;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:81   

   5253  5 000363   200014 221300                    LDX1  ! KQ_PGSZ+2,,AUTO
         5 000364   000001 702211                    TSX2  ! 1,X1

      558     5254    3           END;
      559     5255
      560     5256    2      RDUMP_LOWDA=DDIR_GRAN;

   5256  5 000365   010561 235000 1                  LDA     DDIR_GRAN
         5 000366   010565 755000 1                  STA     RDUMP_LOWDA

      561     5257    2      RDUMP_HIGHDA = (RDUMP_LOWDA+RV_BUFF.SIZE) -1;

   5257  5 000367   010565 236000 1                  LDQ     RDUMP_LOWDA
         5 000370   002502 036000 1                  ADLQ    RV_BUFF+2
         5 000371   000001 136007                    SBLQ    1,DL
         5 000372   010566 756000 1                  STQ     RDUMP_HIGHDA

      562     5258
      563     5259    2      IF (RDUMP_LOWDA < RCVR2_LOWDA)

   5259  5 000373   010565 236000 1                  LDQ     RDUMP_LOWDA
         5 000374   010563 116000 1                  CMPQ    RCVR2_LOWDA
         5 000375   000401 604000 5                  TMI     s:5262
         5 000376   010566 236000 1                  LDQ     RDUMP_HIGHDA
         5 000377   010564 116000 1                  CMPQ    RCVR2_HIGHDA
         5 000400   000412 604400 5                  TMOZ    s:5268

      564     5260    2        OR (RDUMP_HIGHDA > RCVR2_HIGHDA)
      565     5261    3      THEN DO;

      566     5262    3           DFMSG.M='RCVR DUMP DISK ADDRESS BAD';

   5262  5 000401   040000 100400                    MLR     fill='040'O
         5 000402   000131 000032 2                  ADSC9   RESET_XCON+45            cn=0,n=26
         5 000403   010744 600036 1                  ADSC9   DFMSG+1                  cn=3,n=30

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:82   
      567     5263    3           PRINT_MSG1=1;

   5263  5 000404   000001 236007                    LDQ     1,DL
         5 000405   011017 756000 1                  STQ     PRINT_MSG1

      568     5264    3           CALL REPORT_DF_NAME;

   5264  5 000406   003071 701000 5                  TSX1    REPORT_DF_NAME
         5 000407   000000 011000                    NOP     0

      569     5265    3           ALTRETURN;

   5265  5 000410   200014 221300                    LDX1  ! KQ_PGSZ+2,,AUTO
         5 000411   000000 702211                    TSX2  ! 0,X1

      570     5266    3           END;
      571     5267
      572     5268    2      IF RV_BUFF.BUSY = 0

   5268  5 000412   002500 235000 1                  LDA     RV_BUFF
         5 000413   000423 601000 5                  TNZ     s:5275

      573     5269    3      THEN DO;

      574     5270    3           DFMSG.M = 'SLOT BUSY-FILE NOT';

   5270  5 000414   040000 100400                    MLR     fill='040'O
         5 000415   000140 000022 2                  ADSC9   RESET_XCON+52            cn=0,n=18
         5 000416   010744 600036 1                  ADSC9   DFMSG+1                  cn=3,n=30

      575     5271    3           CALL REPORT_DF_NAME;

   5271  5 000417   003071 701000 5                  TSX1    REPORT_DF_NAME
         5 000420   000000 011000                    NOP     0

      576     5272    3           ALTRETURN;

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:83   
   5272  5 000421   200014 221300                    LDX1  ! KQ_PGSZ+2,,AUTO
         5 000422   000000 702211                    TSX2  ! 0,X1

      577     5273    3           END;
      578     5274
      579     5275    2      CALL BINCHAR(DF_NAME.DUMPC,RV_BUFF.IDCOUNT);

   5275  5 000423   002773 235000 1                  LDA     RV_BUFF+187
         5 000424   000044 773000                    LRL     36
         5 000425   200024 757100                    STAQ    KQ_PGSZ+10,,AUTO
         5 000426   000000 301500                    BTD
         5 000427   200024 000010                    NDSC9   KQ_PGSZ+10,,AUTO         cn=0,s=lsgnf,sf=0,n=8
         5 000430   010506 030003 1                  NDSC9   DF_NAME+2                cn=0,s=nosgn,sf=0,n=3

      580     5276    2      CALL INSERT(DF_CODE.Q.V.VEHICLE#,0,5,

   5276  5 000431   002510 236000 1                  LDQ     RV_BUFF+8
         5 000432   000022 772000                    QRL     18
         5 000433   000014 772000                    QRL     12
         5 000434   002510 221000 1                  LDX1    RV_BUFF+8
         5 000435   007700 361003                    ANX1    4032,DU
         5 000436   200024 756100                    STQ     KQ_PGSZ+10,,AUTO
         5 000437   000000 636011                    EAQ     0,X1
         5 000440   000022 772000                    QRL     18
         5 000441   000006 772000                    QRL     6
         5 000442   002510 221000 1                  LDX1    RV_BUFF+8
         5 000443   000077 361003                    ANX1    63,DU
         5 000444   200025 756100                    STQ     KQ_PGSZ+11,,AUTO
         5 000445   000000 636011                    EAQ     0,X1
         5 000446   000022 772000                    QRL     18
         5 000447   200026 756100                    STQ     KQ_PGSZ+12,,AUTO
         5 000450   002510 236000 1                  LDQ     RV_BUFF+8
         5 000451   000021 772000                    QRL     17
         5 000452   000001 376007                    ANQ     1,DL
         5 000453   200024 235100                    LDA     KQ_PGSZ+10,,AUTO
         5 000454   040000 100405                    MLR     fill='040'O
         5 000455   000006 000001 2                  ADSC9   FCGTBL,A                 cn=0,n=1
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:84   
         5 000456   000471 600001 1                  ADSC9   DF_CODE+1                cn=3,n=1
         5 000457   200025 235100                    LDA     KQ_PGSZ+11,,AUTO
         5 000460   040000 100405                    MLR     fill='040'O
         5 000461   000006 000001 2                  ADSC9   FCGTBL,A                 cn=0,n=1
         5 000462   000472 000001 1                  ADSC9   DF_CODE+2                cn=0,n=1
         5 000463   200026 235100                    LDA     KQ_PGSZ+12,,AUTO
         5 000464   040000 100405                    MLR     fill='040'O
         5 000465   000006 000001 2                  ADSC9   FCGTBL,A                 cn=0,n=1
         5 000466   000472 200001 1                  ADSC9   DF_CODE+2                cn=1,n=1
         5 000467   200027 756100                    STQ     KQ_PGSZ+13,,AUTO
         5 000470   055000 236007                    LDQ     23040,DL
         5 000471   000472 552010 1                  STBQ    DF_CODE+2,'10'O
         5 000472   200027 235100                    LDA     KQ_PGSZ+13,,AUTO
         5 000473   040000 100405                    MLR     fill='040'O
         5 000474   000026 000001 2                  ADSC9   MTBL,A                   cn=0,n=1
         5 000475   000472 600001 1                  ADSC9   DF_CODE+2                cn=3,n=1

      581     5277    2        SUBSTR(FCGTBL,BITBIN(RV_BUFF.SCODE.ID)/4096,1),
      582     5278    2        SUBSTR(FCGTBL,BITBIN(RV_BUFF.SCODE.ID&'0077'O)/64,1),
      583     5279    2        SUBSTR(FCGTBL,BITBIN(RV_BUFF.SCODE.ID&'000077'O),1),
      584     5280    2        '-',SUBSTR(MTBL,BITBIN(RV_BUFF.SCODE.MON),1));
      585     5281    2      CALL BINCHAR(SUBSTR(DF_CODE.Q.V.VEHICLE#,5,5),RV_BUFF.SCODE.CODE);

   5281  5 000476   002510 236000 1                  LDQ     RV_BUFF+8
         5 000477   000003 772000                    QRL     3
         5 000500   037777 376007                    ANQ     16383,DL
         5 000501   000000 235003                    LDA     0,DU
         5 000502   200024 757100                    STAQ    KQ_PGSZ+10,,AUTO
         5 000503   000000 301500                    BTD
         5 000504   200024 000010                    NDSC9   KQ_PGSZ+10,,AUTO         cn=0,s=lsgnf,sf=0,n=8
         5 000505   000473 030005 1                  NDSC9   DF_CODE+3                cn=0,s=nosgn,sf=0,n=5

      586     5282    2      CALL INSERT(DF_CODE.Q.V.VEHICLE#,11,1,BINASC(RV_BUFF.SCODE.SEV+48));

   5282  5 000506   002510 236000 1                  LDQ     RV_BUFF+8
         5 000507   000007 376007                    ANQ     7,DL
         5 000510   000060 036007                    ADLQ    48,DL
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:85   
         5 000511   000033 736000                    QLS     27
         5 000512   000004 276000 6                  ORQ     4
         5 000513   000022 772000                    QRL     18
         5 000514   000474 552010 1                  STBQ    DF_CODE+4,'10'O

      587     5283    3      DO UNTIL (M$EO$->F$DCB.ARS = 0);     /* Find empty dumpfile                */

      588     5284    4           CALL M$OPEN(OPN_EO) WHENALTRETURN DO;

   5284  5 000515   000200 630400 1                  EPPR0   OPN_EO
         5 000516   450000 713400                    CLIMB   alt,open
         5 000517   410400 401760                    pmme    nvectors=18
         5 000520   000522 702000 5                  TSX2    s:5285
         5 000521   000537 710000 5                  TRA     s:5291

      589     5285    4                IF B$ALT.ERR.CODE~=%E$FILEBUSY THEN GOTO OEO_ERR;

   5285  5 000522   000000 470400 xsym               LDP0    B$TCB$
         5 000523   000000 471500                    LDP1    0,,PR0
         5 000524   100102 236100                    LDQ     66,,PR1
         5 000525   377770 376007                    ANQ     131064,DL
         5 000526   001550 116007                    CMPQ    872,DL
         5 000527   002412 601000 5                  TNZ     OEO_ERR

      590     5286                                           /* File busy, wait a while and try again   */
      591     5287    4                CALL M$SENV;

   5287  5 000530   010011 713400                    CLIMB   4105
         5 000531   000000 401760                    pmme    nvectors=0

      592     5288    4                CALL M$WAIT(WAIT10);

   5288  5 000532   000000 630400 2                  EPPR0   WAIT10
         5 000533   020006 713400                    CLIMB   8198
         5 000534   400400 401760                    pmme    nvectors=2

      593     5289    4                CALL M$RETRYS;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:86   

   5289  5 000535   010015 713400                    CLIMB   4109
         5 000536   000000 401760                    pmme    nvectors=0

      594     5290    4                END;

      595     5291    3           IF (M$EO$->F$DCB.ARS > 0)       /* Rename if non-empty                */

   5291  5 000537   000000 236007 xsym               LDQ     M$EO,DL
         5 000540   000005 470400 6                  LDP0    5
         5 000541   000000 471500                    LDP1    0,,PR0
         5 000542   100000 473506                    LDP3    0,QL,PR1
         5 000543   300000 235100                    LDA     0,,PR3
         5 000544   000547 604400 5                  TMOZ    s:5293

      596     5292    3           THEN CALL RENAME_DUMPFILE ALTRET (RNM_ERR);

   5292  5 000545   002443 701000 5                  TSX1    RENAME_DUMPFILE
         5 000546   002406 702000 5                  TSX2    RNM_ERR

      597     5293    3           END;                            /* do until                           */

   5293  5 000547   000000 236007 xsym               LDQ     M$EO,DL
         5 000550   000005 470400 6                  LDP0    5
         5 000551   000000 471500                    LDP1    0,,PR0
         5 000552   100000 473506                    LDP3    0,QL,PR1
         5 000553   300000 235100                    LDA     0,,PR3
         5 000554   000515 601000 5                  TNZ     s:5284

      598     5294                                                /* Open the keyed Dump File           */
      599     5295    2      DFMSG.M = 'CONVERTING DUMP FILE';

   5295  5 000555   040000 100400                    MLR     fill='040'O
         5 000556   000145 000024 2                  ADSC9   RESET_XCON+57            cn=0,n=20
         5 000557   010744 600036 1                  ADSC9   DFMSG+1                  cn=3,n=30

      600     5296    2      CALL REPORT_DF_NAME;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:87   

   5296  5 000560   003071 701000 5                  TSX1    REPORT_DF_NAME
         5 000561   000000 011000                    NOP     0

      601     5297
      602     5298    2      OCMSG.USR=' ';

   5298  5 000562   000006 236000 6                  LDQ     6
         5 000563   010770 552070 1                  STBQ    OCMSG+9,'70'O

      603     5299    2      OCMSG.SYSID=' ';

   5299  5 000564   040000 100400                    MLR     fill='040'O
         5 000565   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
         5 000566   010776 400005 1                  ADSC9   OCMSG+15                 cn=2,n=5

      604     5300    2      OCMSG.ACCN=' ';

   5300  5 000567   000035 235000 xsym               LDA     B_VECTNIL+29
         5 000570   000035 236000 xsym               LDQ     B_VECTNIL+29
         5 000571   010771 755000 1                  STA     OCMSG+10
         5 000572   010772 756000 1                  STQ     OCMSG+11

      605     5301    2      OCMSG.UNAME=' ';

   5301  5 000573   040000 100400                    MLR     fill='040'O
         5 000574   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
         5 000575   010773 200014 1                  ADSC9   OCMSG+12                 cn=1,n=12

      606     5302    2      OCMSG.CCBUF=' ';

   5302  5 000576   040000 100400                    MLR     fill='040'O
         5 000577   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
         5 000600   011000 000064 1                  ADSC9   OCMSG+17                 cn=0,n=52

      607     5303    2      OCMSG.DF = ':DF';

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:88   
   5303  5 000601   000070 236000 2                  LDQ     RESET_XCON+12
         5 000602   010757 552070 1                  STBQ    OCMSG,'70'O

      608     5304    2      OCMSG.MONID = RV_BUFF.DMONID;

   5304  5 000603   000000 100400                    MLR     fill='000'O
         5 000604   002771 000004 1                  ADSC9   RV_BUFF+185              cn=0,n=4
         5 000605   010757 600004 1                  ADSC9   OCMSG                    cn=3,n=4

      609     5305    2      CALL BINCHAR(OCMSG.DUMPC,RV_BUFF.IDCOUNT);

   5305  5 000606   002773 235000 1                  LDA     RV_BUFF+187
         5 000607   000044 773000                    LRL     36
         5 000610   200024 757100                    STAQ    KQ_PGSZ+10,,AUTO
         5 000611   000000 301500                    BTD
         5 000612   200024 000010                    NDSC9   KQ_PGSZ+10,,AUTO         cn=0,s=lsgnf,sf=0,n=8
         5 000613   010760 630003 1                  NDSC9   OCMSG+1                  cn=3,s=nosgn,sf=0,n=3

      610     5306    2      OCMSG.DF_CODE = DF_CODE.Q.V.VEHICLE#;

   5306  5 000614   040000 100400                    MLR     fill='040'O
         5 000615   000471 600014 1                  ADSC9   DF_CODE+1                cn=3,n=12
         5 000616   010761 600014 1                  ADSC9   OCMSG+2                  cn=3,n=12

      611     5307    3      DO Z = 0 TO 5;

   5307  5 000617   200010 450100                    STZ     Z,,AUTO

      612     5308    3           ADDR(OCMSG.IC)->B$CHAR(Z) =

   5308  5 000620   200010 236100                    LDQ     Z,,AUTO
         5 000621   000003 402007                    MPY     3,DL
         5 000622   000000 116003                    CMPQ    0,DU
         5 000623   000625 605000 5                  TPL     s:5308+5
         5 000624   000044 036003                    ADLQ    36,DU
         5 000625   003100 061406                    CSR     bolr='003'O
         5 000626   002544 000003 1                  BDSC    RV_BUFF+36,Q             by=0,bit=0,n=3
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:89   
         5 000627   200024 000044                    BDSC    KQ_PGSZ+10,,AUTO         by=0,bit=0,n=36
         5 000630   200024 236100                    LDQ     KQ_PGSZ+10,,AUTO
         5 000631   000060 036007                    ADLQ    48,DL
         5 000632   000033 736000                    QLS     27
         5 000633   000004 276000 6                  ORQ     4
         5 000634   200025 756100                    STQ     KQ_PGSZ+11,,AUTO
         5 000635   200010 235100                    LDA     Z,,AUTO
         5 000636   040005 100500                    MLR     fill='040'O
         5 000637   200025 000004                    ADSC9   KQ_PGSZ+11,,AUTO         cn=0,n=4
         5 000640   010766 000001 1                  ADSC9   OCMSG+7,A                cn=0,n=1

      613     5309    3             BINASC(ADDR(RV_BUFF.SSFRAME.IC)->B$OCT(Z) +48);
      614     5310    3           END;

   5310  5 000641   200010 054100                    AOS     Z,,AUTO
         5 000642   200010 235100                    LDA     Z,,AUTO
         5 000643   000005 115007                    CMPA    5,DL
         5 000644   000620 604400 5                  TMOZ    s:5308

      615     5311
      616     5312    2      DF_KEY.K = '0'B;

   5312  5 000645   000000 100400                    MLR     fill='000'O
         5 000646   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         5 000647   010510 200007 1                  ADSC9   DF_KEY                   cn=1,n=7

      617     5313    3      CALL M$READ(READ_NDIR) WHENRETURN DO;

   5313  5 000650   000360 630400 1                  EPPR0   READ_NDIR
         5 000651   440000 713400                    CLIMB   alt,read
         5 000652   401400 401760                    pmme    nvectors=4
         5 000653   000670 702000 5                  TSX2    s:5323

      618     5314    4           IF RV_BUFF.SCODE.SEV = %SEV_FESNAP# THEN DO;

   5314  5 000654   002510 236000 1                  LDQ     RV_BUFF+8
         5 000655   000007 376007                    ANQ     7,DL
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:90   
         5 000656   000003 116007                    CMPQ    3,DL
         5 000657   000665 601000 5                  TNZ     s:5319

      619     5315    4                NODEDIR.N = NODEDIR.N + 1;

   5315  5 000660   010512 235000 1                  LDA     NODEDIR
         5 000661   000001 035007                    ADLA    1,DL
         5 000662   010512 755000 1                  STA     NODEDIR

      620     5316    4                NODEIDX = NODEDIR.N;

   5316  5 000663   200007 755100                    STA     NODEIDX,,AUTO

      621     5317    4                END;

   5317  5 000664   000667 710000 5                  TRA     s:5321

      622     5318    4           ELSE DO;

      623     5319    4                NODEIDX = 1;

   5319  5 000665   000001 235007                    LDA     1,DL
         5 000666   200007 755100                    STA     NODEIDX,,AUTO

      624     5320    4                END;

      625     5321    3           END;

   5321  5 000667   000673 710000 5                  TRA     s:5326

      626     5322    3      WHENALTRETURN DO;

      627     5323    3           NODEIDX = 1;

   5323  5 000670   000001 235007                    LDA     1,DL
         5 000671   200007 755100                    STA     NODEIDX,,AUTO

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:91   
      628     5324    3           NODEDIR.N = 1;

   5324  5 000672   010512 755000 1                  STA     NODEDIR

      629     5325    3           END;

      630     5326    2      NODEDIR.NODE.NODENAME(NODEIDX)='HOST';

   5326  5 000673   200007 236100                    LDQ     NODEIDX,,AUTO
         5 000674   000003 402007                    MPY     3,DL
         5 000675   000002 736000                    QLS     2
         5 000676   040006 100400                    MLR     fill='040'O
         5 000677   000152 000004 2                  ADSC9   RESET_XCON+62            cn=0,n=4
         5 000700   010513 000010 1                  ADSC9   NODEDIR+1,Q              cn=0,n=8

      631     5327    2      NODEDIR.NODE.TYPE(NODEIDX)=%R_HOSTNODE#;

   5327  5 000701   200007 236100                    LDQ     NODEIDX,,AUTO
         5 000702   000003 402007                    MPY     3,DL
         5 000703   000000 620006                    EAX0    0,QL
         5 000704   010515 236006 1                  LDQ     NODEDIR+3,QL
         5 000705   000032 376000 xsym               ANQ     B_VECTNIL+26
         5 000706   001000 276003                    ORQ     512,DU
         5 000707   010515 756010 1                  STQ     NODEDIR+3,X0

      632     5328    2      WTEO.BUF_=VECTOR(NODEDIR);

   5328  5 000710   000010 237000 6                  LDAQ    8
         5 000711   000276 757000 1                  STAQ    WTEO+4

      633     5329    2      CALL M$WRITE(WTEO) ALTRET(EO_ERR);

   5329  5 000712   000272 630400 1                  EPPR0   WTEO
         5 000713   440001 713400                    CLIMB   alt,write
         5 000714   401400 401760                    pmme    nvectors=4
         5 000715   002423 702000 5                  TSX2    EO_ERR

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:92   
      634     5330                                                /* Write the Node Directory           */
      635     5331
      636     5332    2      WTEO.BUF_ = VECTOR(COPYRIGHT);

   5332  5 000716   000012 237000 6                  LDAQ    10
         5 000717   000276 757000 1                  STAQ    WTEO+4

      637     5333    2      DF_KEY.K.TYP = %R_COPYRIGHT#;

   5333  5 000720   001000 236007                    LDQ     512,DL
         5 000721   010510 552010 1                  STBQ    DF_KEY,'10'O

      638     5334    2      CALL M$WRITE(WTEO) ALTRET(EO_ERR);

   5334  5 000722   000272 630400 1                  EPPR0   WTEO
         5 000723   440001 713400                    CLIMB   alt,write
         5 000724   401400 401760                    pmme    nvectors=4
         5 000725   002423 702000 5                  TSX2    EO_ERR

      639     5335                                                /* Write the Copyright record         */
      640     5336
      641     5337    2      RV_BUFF.INSTID = INSTID;

   5337  5 000726   200006 235100                    LDA     INSTID,,AUTO
         5 000727   002772 755000 1                  STA     RV_BUFF+186

      642     5338    2      DF_KEY.K=BINBIT(NODEIDX,9);

   5338  5 000730   200007 236100                    LDQ     NODEIDX,,AUTO
         5 000731   000033 736000                    QLS     27
         5 000732   200024 756100                    STQ     KQ_PGSZ+10,,AUTO
         5 000733   000000 100500                    MLR     fill='000'O
         5 000734   200024 000004                    ADSC9   KQ_PGSZ+10,,AUTO         cn=0,n=4
         5 000735   010510 200007 1                  ADSC9   DF_KEY                   cn=1,n=7

      643     5339    2      WTEO.BUF_ = VECTOR(RV_BUFF);

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:93   
   5339  5 000736   000014 237000 6                  LDAQ    12
         5 000737   000276 757000 1                  STAQ    WTEO+4

      644     5340    2      CALL M$WRITE(WTEO) ALTRET(EO_ERR);

   5340  5 000740   000272 630400 1                  EPPR0   WTEO
         5 000741   440001 713400                    CLIMB   alt,write
         5 000742   401400 401760                    pmme    nvectors=4
         5 000743   002423 702000 5                  TSX2    EO_ERR

      645     5341                                                /* Write the Recovery Buffer          */
      646     5342        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:94   
      647     5343                                                /* READ--WRITE  THE ACCOUNTING JITS   */
      648     5344    2      IF RV_BUFF.JITS.SZ ~= 0

   5344  5 000744   003013 720000 1                  LXL0    RV_BUFF+203
         5 000745   001033 600000 5                  TZE     JITS_DONE

      649     5345    3      THEN DO;

      650     5346    3           JITSZ=LENGTHW(B$JIT);

   5346  5 000746   000366 235007                    LDA     246,DL
         5 000747   200004 755100                    STA     JITSZ,,AUTO

      651     5347    3           JITSPG=1024/JITSZ;

   5347  5 000750   002000 236007                    LDQ     1024,DL
         5 000751   000000 115003                    CMPA    0,DU
         5 000752   000755 605000 5                  TPL     s:5347+5
         5 000753   000000 236003                    LDQ     0,DU
         5 000754   000756 710000 5                  TRA     s:5347+6
         5 000755   200004 506100                    DIV     JITSZ,,AUTO
         5 000756   200005 756100                    STQ     JITSPG,,AUTO

      652     5348    3           DP_GRAN = RV_BUFF.JITS.DA;

   5348  5 000757   003012 235000 1                  LDA     RV_BUFF+202
         5 000760   000476 755000 1                  STA     DP_GRAN

      653     5349    3           DF_KEY.K.STYP = %R_AJITS#;

   5349  5 000761   000002 236007                    LDQ     2,DL
         5 000762   010510 552004 1                  STBQ    DF_KEY,'04'O

   5349  5 000763                       MORE_JITS    null
      654     5350
      655     5351    3   MORE_JITS: ;
      656     5352    3           AJIT$=ADDR(APAGE);
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:95   

   5352  5 000763   000003 236000 6                  LDQ     3
         5 000764   011064 756000 1                  STQ     AJIT$

      657     5353    3           CALL M$READ(RAPAGE) ALTRET(R_DP_ERR);

   5353  5 000765   000110 630400 1                  EPPR0   RAPAGE
         5 000766   440000 713400                    CLIMB   alt,read
         5 000767   401400 401760                    pmme    nvectors=4
         5 000770   002367 702000 5                  TSX2    R_DP_ERR

      658     5354
      659     5355    4           DO I=0 TO JITSPG-1;

   5355  5 000771   011062 450000 1                  STZ     I
         5 000772   001017 710000 5                  TRA     s:5363+3

      660     5356    4                IF AJIT$->B$JIT.USER=0 THEN GOTO JITS_DONE;

   5356  5 000773   011064 470400 1                  LDP0    AJIT$
         5 000774   000000 236100                    LDQ     0,,PR0
         5 000775   000777 316003                    CANQ    511,DU
         5 000776   001033 600000 5                  TZE     JITS_DONE

      661     5357                                 /*THIS SHOULD BE A CALL TO UPDATE ACCOUNTING LOG     */
      662     5358    4                DF_KEY.K.USR# = AJIT$->B$JIT.USER;

   5358  5 000777   000011 736000                    QLS     9
         5 001000   010511 552040 1                  STBQ    DF_KEY+1,'40'O

      663     5359    4                WTEO.BUF_ = VECTOR(AJIT$->B$JIT);

   5359  5 001001   000007 235000 6                  LDA     7
         5 001002   011064 236000 1                  LDQ     AJIT$
         5 001003   000276 757000 1                  STAQ    WTEO+4

      664     5360    4                CALL M$WRITE(WTEO) ALTRET(EO_ERR);
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:96   

   5360  5 001004   000272 630400 1                  EPPR0   WTEO
         5 001005   440001 713400                    CLIMB   alt,write
         5 001006   401400 401760                    pmme    nvectors=4
         5 001007   002423 702000 5                  TSX2    EO_ERR

      665     5361
      666     5362    4                AJIT$ = PINCRW(AJIT$,JITSZ);

   5362  5 001010   200004 236100                    LDQ     JITSZ,,AUTO
         5 001011   000022 736000                    QLS     18
         5 001012   011064 036000 1                  ADLQ    AJIT$
         5 001013   011064 756000 1                  STQ     AJIT$

      667     5363    4                END;                       /*DO I=0 TO 5*/

   5363  5 001014   011062 235000 1                  LDA     I
         5 001015   000001 035007                    ADLA    1,DL
         5 001016   011062 755000 1                  STA     I
         5 001017   011062 236000 1                  LDQ     I
         5 001020   200005 116100                    CMPQ    JITSPG,,AUTO
         5 001021   000773 602000 5                  TNC     s:5356

      668     5364
      669     5365    3           DP_GRAN=DP_GRAN+1;

   5365  5 001022   000476 235000 1                  LDA     DP_GRAN
         5 001023   000001 035007                    ADLA    1,DL
         5 001024   000476 755000 1                  STA     DP_GRAN

      670     5366    3           IF DP_GRAN < RV_BUFF.JITS.DA + RV_BUFF.JITS.SZ

   5366  5 001025   003013 236000 1                  LDQ     RV_BUFF+203
         5 001026   777777 376007                    ANQ     -1,DL
         5 001027   003012 036000 1                  ADLQ    RV_BUFF+202
         5 001030   000476 116000 1                  CMPQ    DP_GRAN
         5 001031   001033 600000 5                  TZE     JITS_DONE
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:97   
         5 001032   000763 603000 5                  TRC     MORE_JITS

      671     5367    3           THEN GOTO MORE_JITS;
      672     5368    3           END;                            /*DO IF JITS.SZ ~=0*/

   5359  5 001033                       JITS_DONE    null
      673     5369
      674     5370    2   JITS_DONE: ;
      675     5371        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:98   
      676     5372
      677     5373                                                /*READ--WRITE  THE ERR LOG BUFFERS    */
      678     5374    2      DF_KEY.K=BINBIT(NODEIDX,9);

   5374  5 001033   200007 236100                    LDQ     NODEIDX,,AUTO
         5 001034   000033 736000                    QLS     27
         5 001035   200024 756100                    STQ     KQ_PGSZ+10,,AUTO
         5 001036   000000 100500                    MLR     fill='000'O
         5 001037   200024 000004                    ADSC9   KQ_PGSZ+10,,AUTO         cn=0,n=4
         5 001040   010510 200007 1                  ADSC9   DF_KEY                   cn=1,n=7

      679     5375
      680     5376    2      IF RV_BUFF.ERRLOG.SZ ~= 0

   5376  5 001041   003015 720000 1                  LXL0    RV_BUFF+205
         5 001042   001077 600000 5                  TZE     s:5392

      681     5377    3      THEN DO;

      682     5378    3           DP_GRAN = RV_BUFF.ERRLOG.DA;

   5378  5 001043   003014 235000 1                  LDA     RV_BUFF+204
         5 001044   000476 755000 1                  STA     DP_GRAN

      683     5379    3           DF_KEY.K.STYP = %R_ERRLOG#;

   5379  5 001045   000003 236007                    LDQ     3,DL
         5 001046   010510 552004 1                  STBQ    DF_KEY,'04'O

      684     5380
      685     5381    4           DO I=0 TO RV_BUFF.ERRLOG.SZ-1;

   5381  5 001047   011062 450000 1                  STZ     I
         5 001050   001072 710000 5                  TRA     s:5386+3

      686     5382    4                CALL M$READ(RAPAGE) ALTRET(R_DP_ERR);

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:99   
   5382  5 001051   000110 630400 1                  EPPR0   RAPAGE
         5 001052   440000 713400                    CLIMB   alt,read
         5 001053   401400 401760                    pmme    nvectors=4
         5 001054   002367 702000 5                  TSX2    R_DP_ERR

      687     5383    4                CALL M$WRITE(WAPAGE) ALTRET(EO_ERR);

   5383  5 001055   000306 630400 1                  EPPR0   WAPAGE
         5 001056   440001 713400                    CLIMB   alt,write
         5 001057   401400 401760                    pmme    nvectors=4
         5 001060   002423 702000 5                  TSX2    EO_ERR

      688     5384    4                DP_GRAN = DP_GRAN+1;

   5384  5 001061   000476 235000 1                  LDA     DP_GRAN
         5 001062   000001 035007                    ADLA    1,DL
         5 001063   000476 755000 1                  STA     DP_GRAN

      689     5385    4                DF_KEY.K.VP# = DF_KEY.K.VP#+1;

   5385  5 001064   010511 236000 1                  LDQ     DF_KEY+1
         5 001065   000001 036007                    ADLQ    1,DL
         5 001066   010511 552034 1                  STBQ    DF_KEY+1,'34'O

      690     5386    4                END;                       /*DO I=0 TO ERRLOG.SZ                 */

   5386  5 001067   011062 236000 1                  LDQ     I
         5 001070   000001 036007                    ADLQ    1,DL
         5 001071   011062 756000 1                  STQ     I
         5 001072   003015 236000 1                  LDQ     RV_BUFF+205
         5 001073   777777 376007                    ANQ     -1,DL
         5 001074   011062 116000 1                  CMPQ    I
         5 001075   001077 600000 5                  TZE     s:5392
         5 001076   001051 603000 5                  TRC     s:5382

      691     5387    3           END;                            /*DO IF ERRLOG.SZ ~=0                 */

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:100  
      692     5388
      693     5389        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:101  
      694     5390
      695     5391                                                /* READ-WRITE LOW REAL MEMORY         */
      696     5392    2      DF_KEY.K=BINBIT(NODEIDX,9);

   5392  5 001077   200007 236100                    LDQ     NODEIDX,,AUTO
         5 001100   000033 736000                    QLS     27
         5 001101   200024 756100                    STQ     KQ_PGSZ+10,,AUTO
         5 001102   000000 100500                    MLR     fill='000'O
         5 001103   200024 000004                    ADSC9   KQ_PGSZ+10,,AUTO         cn=0,n=4
         5 001104   010510 200007 1                  ADSC9   DF_KEY                   cn=1,n=7

      697     5393
      698     5394    2      IF RV_BUFF.LRMEM.SZ  ~= 0

   5394  5 001105   003021 720000 1                  LXL0    RV_BUFF+209
         5 001106   001141 600000 5                  TZE     s:5407

      699     5395    3      THEN DO;

      700     5396    3           DP_GRAN = RV_BUFF.LRMEM.DA;

   5396  5 001107   003020 235000 1                  LDA     RV_BUFF+208
         5 001110   000476 755000 1                  STA     DP_GRAN

      701     5397    3           DF_KEY.K.TYP  = %R_LRMEM#;

   5397  5 001111   001000 236007                    LDQ     512,DL
         5 001112   010510 552010 1                  STBQ    DF_KEY,'10'O

      702     5398
      703     5399    4           DO I=0 TO 8-1;

   5399  5 001113   011062 450000 1                  STZ     I
         5 001114   001136 710000 5                  TRA     s:5404+3

      704     5400    4                CALL M$READ(RAPAGE) ALTRET(R_DP_ERR);

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:102  
   5400  5 001115   000110 630400 1                  EPPR0   RAPAGE
         5 001116   440000 713400                    CLIMB   alt,read
         5 001117   401400 401760                    pmme    nvectors=4
         5 001120   002367 702000 5                  TSX2    R_DP_ERR

      705     5401    4                CALL M$WRITE(WAPAGE) ALTRET(EO_ERR);

   5401  5 001121   000306 630400 1                  EPPR0   WAPAGE
         5 001122   440001 713400                    CLIMB   alt,write
         5 001123   401400 401760                    pmme    nvectors=4
         5 001124   002423 702000 5                  TSX2    EO_ERR

      706     5402    4                DP_GRAN = DP_GRAN+1;

   5402  5 001125   000476 235000 1                  LDA     DP_GRAN
         5 001126   000001 035007                    ADLA    1,DL
         5 001127   000476 755000 1                  STA     DP_GRAN

      707     5403    4                DF_KEY.K.VP# = DF_KEY.K.VP#+1;

   5403  5 001130   010511 236000 1                  LDQ     DF_KEY+1
         5 001131   000001 036007                    ADLQ    1,DL
         5 001132   010511 552034 1                  STBQ    DF_KEY+1,'34'O

      708     5404    4                END;                       /*DO I=0 TO LRMEM.SZ                  */

   5404  5 001133   011062 236000 1                  LDQ     I
         5 001134   000001 036007                    ADLQ    1,DL
         5 001135   011062 756000 1                  STQ     I
         5 001136   011062 236000 1                  LDQ     I
         5 001137   000010 116007                    CMPQ    8,DL
         5 001140   001115 602000 5                  TNC     s:5400

      709     5405    3           END;                            /*DO IF LRMEM.SZ  ~=0                 */

      710     5406
      711     5407    2      DP_GRAN = DP_GRAN + RV_BUFF.PPUT.FP - 8;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:103  

   5407  5 001141   003007 236000 1                  LDQ     RV_BUFF+199
         5 001142   000022 772000                    QRL     18
         5 001143   000476 036000 1                  ADLQ    DP_GRAN
         5 001144   000010 136007                    SBLQ    8,DL
         5 001145   000476 756000 1                  STQ     DP_GRAN

      712     5408    3      DO I = RV_BUFF.PPUT.FP TO RV_BUFF.PPUT.LP;

   5408  5 001146   003007 235000 1                  LDA     RV_BUFF+199
         5 001147   000022 771000                    ARL     18
         5 001150   011062 755000 1                  STA     I
         5 001151   001172 710000 5                  TRA     s:5413+3

      713     5409    3           DF_KEY.K.VP# = I;

   5409  5 001152   011062 236000 1                  LDQ     I
         5 001153   010511 552034 1                  STBQ    DF_KEY+1,'34'O

      714     5410    3           CALL M$READ (RAPAGE) ALTRET (R_DP_ERR);

   5410  5 001154   000110 630400 1                  EPPR0   RAPAGE
         5 001155   440000 713400                    CLIMB   alt,read
         5 001156   401400 401760                    pmme    nvectors=4
         5 001157   002367 702000 5                  TSX2    R_DP_ERR

      715     5411    3           CALL M$WRITE (WAPAGE) ALTRET (EO_ERR);

   5411  5 001160   000306 630400 1                  EPPR0   WAPAGE
         5 001161   440001 713400                    CLIMB   alt,write
         5 001162   401400 401760                    pmme    nvectors=4
         5 001163   002423 702000 5                  TSX2    EO_ERR

      716     5412    3           DP_GRAN = DP_GRAN + 1;

   5412  5 001164   000476 235000 1                  LDA     DP_GRAN
         5 001165   000001 035007                    ADLA    1,DL
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:104  
         5 001166   000476 755000 1                  STA     DP_GRAN

      717     5413    3           END;

   5413  5 001167   011062 236000 1                  LDQ     I
         5 001170   000001 036007                    ADLQ    1,DL
         5 001171   011062 756000 1                  STQ     I
         5 001172   003007 236000 1                  LDQ     RV_BUFF+199
         5 001173   777777 376007                    ANQ     -1,DL
         5 001174   011062 116000 1                  CMPQ    I
         5 001175   001152 603000 5                  TRC     s:5409

      718     5414        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:105  
      719     5415
      720     5416                                                /*READ-WRITE THE MONITOR WSQ          */
      721     5417    2      DF_KEY.K=BINBIT(NODEIDX,9);

   5417  5 001176   200007 236100                    LDQ     NODEIDX,,AUTO
         5 001177   000033 736000                    QLS     27
         5 001200   200024 756100                    STQ     KQ_PGSZ+10,,AUTO
         5 001201   000000 100500                    MLR     fill='000'O
         5 001202   200024 000004                    ADSC9   KQ_PGSZ+10,,AUTO         cn=0,n=4
         5 001203   010510 200007 1                  ADSC9   DF_KEY                   cn=1,n=7

      722     5418
      723     5419    2      IF RV_BUFF.MONWSQD.SZ ~= 0

   5419  5 001204   003017 720000 1                  LXL0    RV_BUFF+207
         5 001205   001244 600000 5                  TZE     s:5442

      724     5420    3      THEN DO;

      725     5421    3           RD_DP.BUF_ = VECTOR(APAGE);

   5421  5 001206   000002 237000 6                  LDAQ    2
         5 001207   000076 757000 1                  STAQ    RD_DP+4

      726     5422    3           DP_GRAN=RV_BUFF.MONWSQD.DA;

   5422  5 001210   003016 235000 1                  LDA     RV_BUFF+206
         5 001211   000476 755000 1                  STA     DP_GRAN

      727     5423    3           LAST_GRAN = RV_BUFF.MONWSQD.DA

   5423  5 001212   003017 236000 1                  LDQ     RV_BUFF+207
         5 001213   777777 376007                    ANQ     -1,DL
         5 001214   003016 036000 1                  ADLQ    RV_BUFF+206
         5 001215   000001 136007                    SBLQ    1,DL
         5 001216   000477 756000 1                  STQ     LAST_GRAN

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:106  
      728     5424    3             +RV_BUFF.MONWSQD.SZ
      729     5425    3             -1;
      730     5426    3           CALL M$READ(RD_DP) ALTRET(R_DP_ERR);

   5426  5 001217   000072 630400 1                  EPPR0   RD_DP
         5 001220   440000 713400                    CLIMB   alt,read
         5 001221   401400 401760                    pmme    nvectors=4
         5 001222   002367 702000 5                  TSX2    R_DP_ERR

      731     5427    3           T$=ADDR(APAGE);

   5427  5 001223   000003 236000 6                  LDQ     3
         5 001224   200003 756100                    STQ     T$,,AUTO

      732     5428    3           RV_WSQD = T$->B$WSQD;

   5428  5 001225   200003 470500                    LDP0    T$,,AUTO
         5 001226   010000 220003                    LDX0    4096,DU
         5 001227   000040 100540                    MLR     fill='000'O
         5 001230   000000 000010                    ADSC9   0,,PR0                   cn=0,n=*X0
         5 001231   006500 000010 1                  ADSC9   RV_WSQD                  cn=0,n=*X0

      733     5429
      734     5430    3           DF_KEY.K.TYP=%R_MWSQ#;

   5430  5 001232   002000 236007                    LDQ     1024,DL
         5 001233   010510 552010 1                  STBQ    DF_KEY,'10'O

      735     5431    3           DF_KEY.K.USR# = RV_BUFF.S_PNO;

   5431  5 001234   002642 236000 1                  LDQ     RV_BUFF+98
         5 001235   000033 736000                    QLS     27
         5 001236   010511 552040 1                  STBQ    DF_KEY+1,'40'O

      736     5432
      737     5433    3           FIRST_PAGE=0;

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:107  
   5433  5 001237   010501 450000 1                  STZ     FIRST_PAGE

      738     5434    3           LAST_PAGE=1023;

   5434  5 001240   001777 235007                    LDA     1023,DL
         5 001241   010502 755000 1                  STA     LAST_PAGE

      739     5435    3           CALL KEY_WSQ ALTRET(WSQ_ERR);

   5435  5 001242   002535 701000 5                  TSX1    KEY_WSQ
         5 001243   002433 702000 5                  TSX2    WSQ_ERR

      740     5436
      741     5437    3           END;                            /*DO IF %MONWSQ.SZ~0*/

      742     5438
      743     5439
      744     5440
      745     5441
      746     5442    2      IF RV_BUFF.MONPROC.SZ ~= 0

   5442  5 001244   003043 720000 1                  LXL0    RV_BUFF+227
         5 001245   001377 600000 5                  TZE     s:5477

      747     5443    3      THEN DO;

      748     5444    3           RD_DP.BUF_ = VECTOR(APAGE);

   5444  5 001246   000002 237000 6                  LDAQ    2
         5 001247   000076 757000 1                  STAQ    RD_DP+4

      749     5445    3           DP_GRAN=RV_BUFF.MONWSQD.DA;

   5445  5 001250   003016 235000 1                  LDA     RV_BUFF+206
         5 001251   000476 755000 1                  STA     DP_GRAN

      750     5446    3           CALL M$READ(RD_DP) ALTRET(R_DP_ERR);
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:108  

   5446  5 001252   000072 630400 1                  EPPR0   RD_DP
         5 001253   440000 713400                    CLIMB   alt,read
         5 001254   401400 401760                    pmme    nvectors=4
         5 001255   002367 702000 5                  TSX2    R_DP_ERR

      751     5447    3           T$=ADDR(APAGE);

   5447  5 001256   000003 236000 6                  LDQ     3
         5 001257   200003 756100                    STQ     T$,,AUTO

      752     5448    3           RV_WSQD = T$->B$WSQD;

   5448  5 001260   200003 470500                    LDP0    T$,,AUTO
         5 001261   010000 220003                    LDX0    4096,DU
         5 001262   000040 100540                    MLR     fill='000'O
         5 001263   000000 000010                    ADSC9   0,,PR0                   cn=0,n=*X0
         5 001264   006500 000010 1                  ADSC9   RV_WSQD                  cn=0,n=*X0

      753     5449    3           DP_GRAN=RV_BUFF.MONPROC.DA;

   5449  5 001265   003042 235000 1                  LDA     RV_BUFF+226
         5 001266   000476 755000 1                  STA     DP_GRAN

      754     5450    3           IF RV_BUFF.MONPROC.SZ = 1

   5450  5 001267   003043 721000 1                  LXL1    RV_BUFF+227
         5 001270   000001 101003                    CMPX1   1,DU
         5 001271   001300 601000 5                  TNZ     s:5452

      755     5451    3           THEN J=(RV_BUFF.SSFRAME.IC / 1024) + %ISEGLO;

   5451  5 001272   002544 236000 1                  LDQ     RV_BUFF+36
         5 001273   000022 772000                    QRL     18
         5 001274   000012 772000                    QRL     10
         5 001275   000100 036007                    ADLQ    64,DL
         5 001276   011063 756000 1                  STQ     J
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:109  
         5 001277   001302 710000 5                  TRA     s:5453

      756     5452    3           ELSE J=RV_BUFF.MONPLL;

   5452  5 001300   002774 235000 1                  LDA     RV_BUFF+188
         5 001301   011063 755000 1                  STA     J

      757     5453    3           I = RV_BUFF.MONPROC.SZ;

   5453  5 001302   003043 236000 1                  LDQ     RV_BUFF+227
         5 001303   777777 376007                    ANQ     -1,DL
         5 001304   011062 756000 1                  STQ     I

      758     5454    4           DO WHILE (I>0);

   5454  5 001305   001343 600000 5                  TZE     s:5463

      759     5455    4                CALL M$READ(RAPAGE) ALTRET(R_DP_ERR);

   5455  5 001306   000110 630400 1                  EPPR0   RAPAGE
         5 001307   440000 713400                    CLIMB   alt,read
         5 001310   401400 401760                    pmme    nvectors=4
         5 001311   002367 702000 5                  TSX2    R_DP_ERR

      760     5456    4                DF_KEY.K.VP#=J;

   5456  5 001312   011063 236000 1                  LDQ     J
         5 001313   010511 552034 1                  STBQ    DF_KEY+1,'34'O

      761     5457    4                CALL M$WRITE(WAPAGE) ALTRET(EO_ERR);

   5457  5 001314   000306 630400 1                  EPPR0   WAPAGE
         5 001315   440001 713400                    CLIMB   alt,write
         5 001316   401400 401760                    pmme    nvectors=4
         5 001317   002423 702000 5                  TSX2    EO_ERR

      762     5458    4                RV_WSQD.PG.SFLG(J) = (RV_WSQD.PG.SFLG(J) | %SCRCVR);
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:110  

   5458  5 001320   011063 720000 1                  LXL0    J
         5 001321   006500 236010 1                  LDQ     RV_WSQD,X0
         5 001322   000022 736000                    QLS     18
         5 001323   777400 376003                    ANQ     -256,DU
         5 001324   200000 276003                    ORQ     65536,DU
         5 001325   000022 772000                    QRL     18
         5 001326   006500 676010 1                  ERQ     RV_WSQD,X0
         5 001327   777400 376007                    ANQ     -256,DL
         5 001330   006500 656010 1                  ERSQ    RV_WSQD,X0

      763     5459    4                DP_GRAN=DP_GRAN+1;

   5459  5 001331   000476 235000 1                  LDA     DP_GRAN
         5 001332   000001 035007                    ADLA    1,DL
         5 001333   000476 755000 1                  STA     DP_GRAN

      764     5460    4                J=J+1;

   5460  5 001334   011063 236000 1                  LDQ     J
         5 001335   000001 036007                    ADLQ    1,DL
         5 001336   011063 756000 1                  STQ     J

      765     5461    4                I=I-1;

   5461  5 001337   011062 235000 1                  LDA     I
         5 001340   000001 135007                    SBLA    1,DL
         5 001341   011062 755000 1                  STA     I

      766     5462    4                END;                       /*DO 0 TO MONPROC.SZ                  */

   5462  5 001342   001306 601000 5                  TNZ     s:5455

      767     5463    3           DP_GRAN = RV_BUFF.MONWSQD.DA;

   5463  5 001343   003016 235000 1                  LDA     RV_BUFF+206
         5 001344   000476 755000 1                  STA     DP_GRAN
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:111  

      768     5464    3           CALL M$READ(RAPAGE) ALTRET(R_DP_ERR);

   5464  5 001345   000110 630400 1                  EPPR0   RAPAGE
         5 001346   440000 713400                    CLIMB   alt,read
         5 001347   401400 401760                    pmme    nvectors=4
         5 001350   002367 702000 5                  TSX2    R_DP_ERR

      769     5465    3           T$=ADDR(APAGE);

   5465  5 001351   000003 236000 6                  LDQ     3
         5 001352   200003 756100                    STQ     T$,,AUTO

      770     5466    3           T$->B$WSQD=RV_WSQD;

   5466  5 001353   010000 220003                    LDX0    4096,DU
         5 001354   200003 470500                    LDP0    T$,,AUTO
         5 001355   000140 100440                    MLR     fill='000'O
         5 001356   006500 000010 1                  ADSC9   RV_WSQD                  cn=0,n=*X0
         5 001357   000000 000010                    ADSC9   0,,PR0                   cn=0,n=*X0

      771     5467    3           DF_KEY.K=BINBIT(NODEIDX,9);

   5467  5 001360   200007 236100                    LDQ     NODEIDX,,AUTO
         5 001361   000033 736000                    QLS     27
         5 001362   200024 756100                    STQ     KQ_PGSZ+10,,AUTO
         5 001363   000000 100500                    MLR     fill='000'O
         5 001364   200024 000004                    ADSC9   KQ_PGSZ+10,,AUTO         cn=0,n=4
         5 001365   010510 200007 1                  ADSC9   DF_KEY                   cn=1,n=7

      772     5468    3           DF_KEY.K.TYP=%R_MWSQ#;

   5468  5 001366   002000 236007                    LDQ     1024,DL
         5 001367   010510 552010 1                  STBQ    DF_KEY,'10'O

      773     5469    3           DF_KEY.K.USR# = RV_BUFF.S_PNO;

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:112  
   5469  5 001370   002642 236000 1                  LDQ     RV_BUFF+98
         5 001371   000033 736000                    QLS     27
         5 001372   010511 552040 1                  STBQ    DF_KEY+1,'40'O

      774     5470    3           CALL M$WRITE(WAPAGE) ALTRET(EO_ERR);

   5470  5 001373   000306 630400 1                  EPPR0   WAPAGE
         5 001374   440001 713400                    CLIMB   alt,write
         5 001375   401400 401760                    pmme    nvectors=4
         5 001376   002423 702000 5                  TSX2    EO_ERR

      775     5471    3           END;                            /*DO IF MONPROC.SZ ~0                 */

      776     5472
      777     5473        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:113  
      778     5474                                                /* READ-WRITE CWSQ PAGES              */
      779     5475
      780     5476
      781     5477    2      DF_KEY.K=BINBIT(NODEIDX,9);

   5477  5 001377   200007 236100                    LDQ     NODEIDX,,AUTO
         5 001400   000033 736000                    QLS     27
         5 001401   200024 756100                    STQ     KQ_PGSZ+10,,AUTO
         5 001402   000000 100500                    MLR     fill='000'O
         5 001403   200024 000004                    ADSC9   KQ_PGSZ+10,,AUTO         cn=0,n=4
         5 001404   010510 200007 1                  ADSC9   DF_KEY                   cn=1,n=7

      782     5478    2      DF_KEY.K.TYP=%R_CWSQPGS#;

   5478  5 001405   003000 236007                    LDQ     1536,DL
         5 001406   010510 552010 1                  STBQ    DF_KEY,'10'O

      783     5479
      784     5480    3      DO J=0 TO 31;

   5480  5 001407   011063 450000 1                  STZ     J

      785     5481    3           IF RV_BUFF.CWSQ.SZ(J) ~= 0

   5481  5 001410   011063 235000 1                  LDA     J
         5 001411   000001 735000                    ALS     1
         5 001412   003045 720005 1                  LXL0    RV_BUFF+229,AL
         5 001413   001474 600000 5                  TZE     s:5506

      786     5482    4           THEN DO;

      787     5483    4                RD_DP.BUF_ = VECTOR(APAGE);

   5483  5 001414   000002 237000 6                  LDAQ    2
         5 001415   000076 757000 1                  STAQ    RD_DP+4

      788     5484    4                DP_GRAN=RV_BUFF.CWSQ.DA(J);
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:114  

   5484  5 001416   011063 235000 1                  LDA     J
         5 001417   000001 735000                    ALS     1
         5 001420   003044 235005 1                  LDA     RV_BUFF+228,AL
         5 001421   000476 755000 1                  STA     DP_GRAN

      789     5485    4                LAST_GRAN = RV_BUFF.CWSQ.DA(J)

   5485  5 001422   011063 235000 1                  LDA     J
         5 001423   000001 735000                    ALS     1
         5 001424   003045 236005 1                  LDQ     RV_BUFF+229,AL
         5 001425   777777 376007                    ANQ     -1,DL
         5 001426   003044 036005 1                  ADLQ    RV_BUFF+228,AL
         5 001427   000001 136007                    SBLQ    1,DL
         5 001430   000477 756000 1                  STQ     LAST_GRAN

      790     5486    4                  +RV_BUFF.CWSQ.SZ(J)
      791     5487    4                  -1;
      792     5488    4                CALL M$READ(RD_DP) ALTRET(R_DP_ERR);

   5488  5 001431   000072 630400 1                  EPPR0   RD_DP
         5 001432   440000 713400                    CLIMB   alt,read
         5 001433   401400 401760                    pmme    nvectors=4
         5 001434   002367 702000 5                  TSX2    R_DP_ERR

      793     5489
      794     5490    4                T$=ADDR(APAGE);

   5490  5 001435   000003 236000 6                  LDQ     3
         5 001436   200003 756100                    STQ     T$,,AUTO

      795     5491    4                RV_WSQD=T$->B$WSQD;

   5491  5 001437   200003 470500                    LDP0    T$,,AUTO
         5 001440   010000 220003                    LDX0    4096,DU
         5 001441   000040 100540                    MLR     fill='000'O
         5 001442   000000 000010                    ADSC9   0,,PR0                   cn=0,n=*X0
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:115  
         5 001443   006500 000010 1                  ADSC9   RV_WSQD                  cn=0,n=*X0

      796     5492
      797     5493    4                DF_KEY.K.USR#=0;           /*MEANS DIRECTORY*/

   5493  5 001444   000000 236003                    LDQ     0,DU
         5 001445   010511 552040 1                  STBQ    DF_KEY+1,'40'O

      798     5494    4                DF_KEY.K.STYP=J+%B_CWSQ1;

   5494  5 001446   011063 236000 1                  LDQ     J
         5 001447   000015 036007                    ADLQ    13,DL
         5 001450   010510 552004 1                  STBQ    DF_KEY,'04'O

      799     5495    4                DF_KEY.K.VP#=0;

   5495  5 001451   000000 236003                    LDQ     0,DU
         5 001452   010511 552034 1                  STBQ    DF_KEY+1,'34'O

      800     5496    4                WTEO.BUF_ = VECTOR(T$->B$WSQD);

   5496  5 001453   000002 235000 6                  LDA     2
         5 001454   200003 236100                    LDQ     T$,,AUTO
         5 001455   000276 757000 1                  STAQ    WTEO+4

      801     5497    4                CALL M$WRITE(WTEO) ALTRET(EO_ERR);

   5497  5 001456   000272 630400 1                  EPPR0   WTEO
         5 001457   440001 713400                    CLIMB   alt,write
         5 001460   401400 401760                    pmme    nvectors=4
         5 001461   002423 702000 5                  TSX2    EO_ERR

      802     5498
      803     5499    4                DF_KEY.K.USR#=1;           /*MEANS CONTENTS OF THE PAGES         */

   5499  5 001462   001000 236003                    LDQ     512,DU
         5 001463   010511 552040 1                  STBQ    DF_KEY+1,'40'O
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:116  

      804     5500    4                DP_GRAN=DP_GRAN+1;

   5500  5 001464   000476 235000 1                  LDA     DP_GRAN
         5 001465   000001 035007                    ADLA    1,DL
         5 001466   000476 755000 1                  STA     DP_GRAN

      805     5501    4                FIRST_PAGE=0;

   5501  5 001467   010501 450000 1                  STZ     FIRST_PAGE

      806     5502    4                LAST_PAGE=1023;

   5502  5 001470   001777 235007                    LDA     1023,DL
         5 001471   010502 755000 1                  STA     LAST_PAGE

      807     5503    4                CALL KEY_WSQ ALTRET(WSQ_ERR);

   5503  5 001472   002535 701000 5                  TSX1    KEY_WSQ
         5 001473   002433 702000 5                  TSX2    WSQ_ERR

      808     5504
      809     5505    4                END;                       /* DO IF CWSQ.SZ(J) ~=0               */

      810     5506    3           END;                            /* DO J=0 TO 31                       */

   5506  5 001474   011063 235000 1                  LDA     J
         5 001475   000001 035007                    ADLA    1,DL
         5 001476   011063 755000 1                  STA     J
         5 001477   000040 115007                    CMPA    32,DL
         5 001500   001410 602000 5                  TNC     s:5481

      811     5507
      812     5508
      813     5509        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:117  
      814     5510                                                /* READ-WRITE %CGWSQ PAGES            */
      815     5511
      816     5512    2      FIRST_PAGE=0;

   5512  5 001501   010501 450000 1                  STZ     FIRST_PAGE

      817     5513    2      LAST_PAGE=1023;

   5513  5 001502   001777 236007                    LDQ     1023,DL
         5 001503   010502 756000 1                  STQ     LAST_PAGE

      818     5514    2      B$CGPT$ = ADDR(RG_CGPT);

   5514  5 001504   000016 236000 6                  LDQ     14
         5 001505   035066 756000 1                  STQ     B$CGPT$

      819     5515    2      MAX_CG_PAGE = RV_BUFF.MM_CGQCXT_END;

   5515  5 001506   002643 235000 1                  LDA     RV_BUFF+99
         5 001507   010500 755000 1                  STA     MAX_CG_PAGE

      820     5516
      821     5517    3      DO J=0 TO 9;

   5517  5 001510   011063 450000 1                  STZ     J

      822     5518    3           IF RV_BUFF.CGRWSQ.SZ(J) ~= 0

   5518  5 001511   011063 235000 1                  LDA     J
         5 001512   000001 735000                    ALS     1
         5 001513   003145 720005 1                  LXL0    RV_BUFF+293,AL
         5 001514   001661 600000 5                  TZE     s:5566

      823     5519    4           THEN DO;

      824     5520    4                RD_DP.BUF_ = VECTOR(APAGE);

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:118  
   5520  5 001515   000002 237000 6                  LDAQ    2
         5 001516   000076 757000 1                  STAQ    RD_DP+4

      825     5521    4                DP_GRAN=RV_BUFF.CGRWSQ.DA(J);

   5521  5 001517   011063 235000 1                  LDA     J
         5 001520   000001 735000                    ALS     1
         5 001521   003144 235005 1                  LDA     RV_BUFF+292,AL
         5 001522   000476 755000 1                  STA     DP_GRAN

      826     5522    4                LAST_GRAN = RV_BUFF.CGRWSQ.DA(J)

   5522  5 001523   011063 235000 1                  LDA     J
         5 001524   000001 735000                    ALS     1
         5 001525   003145 236005 1                  LDQ     RV_BUFF+293,AL
         5 001526   777777 376007                    ANQ     -1,DL
         5 001527   003144 036005 1                  ADLQ    RV_BUFF+292,AL
         5 001530   000001 136007                    SBLQ    1,DL
         5 001531   000477 756000 1                  STQ     LAST_GRAN

      827     5523    4                  +RV_BUFF.CGRWSQ.SZ(J)
      828     5524    4                  -1;
      829     5525    4                CALL M$READ(RD_DP) ALTRET(R_DP_ERR);

   5525  5 001532   000072 630400 1                  EPPR0   RD_DP
         5 001533   440000 713400                    CLIMB   alt,read
         5 001534   401400 401760                    pmme    nvectors=4
         5 001535   002367 702000 5                  TSX2    R_DP_ERR

      830     5526    4                DP_GRAN=DP_GRAN+1;

   5526  5 001536   000476 235000 1                  LDA     DP_GRAN
         5 001537   000001 035007                    ADLA    1,DL
         5 001540   000476 755000 1                  STA     DP_GRAN

      831     5527
      832     5528    4                T$=ADDR(APAGE);
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:119  

   5528  5 001541   000003 236000 6                  LDQ     3
         5 001542   200003 756100                    STQ     T$,,AUTO

      833     5529    4                RV_WSQD=T$->B$WSQD;

   5529  5 001543   200003 470500                    LDP0    T$,,AUTO
         5 001544   010000 220003                    LDX0    4096,DU
         5 001545   000040 100540                    MLR     fill='000'O
         5 001546   000000 000010                    ADSC9   0,,PR0                   cn=0,n=*X0
         5 001547   006500 000010 1                  ADSC9   RV_WSQD                  cn=0,n=*X0

      834     5530    4                B$CGPT$->B$WSQD = T$->B$WSQD;

   5530  5 001550   035066 471400 1                  LDP1    B$CGPT$
         5 001551   000140 100540                    MLR     fill='000'O
         5 001552   000000 000010                    ADSC9   0,,PR0                   cn=0,n=*X0
         5 001553   100000 000010                    ADSC9   0,,PR1                   cn=0,n=*X0

      835     5531    4                WTEO.BUF_ = VECTOR(RV_WSQD);

   5531  5 001554   000020 237000 6                  LDAQ    16
         5 001555   000276 757000 1                  STAQ    WTEO+4

      836     5532    4                T$ = ADDR(RV_WSQD);

   5532  5 001556   000021 236000 6                  LDQ     17
         5 001557   200003 756100                    STQ     T$,,AUTO

      837     5533                                           /* WRITE DIRECTORY WITH KEY AS MONITOR VP# */
      838     5534    4                DF_KEY.K=BINBIT(NODEIDX,9);

   5534  5 001560   200007 236100                    LDQ     NODEIDX,,AUTO
         5 001561   000033 736000                    QLS     27
         5 001562   200024 756100                    STQ     KQ_PGSZ+10,,AUTO
         5 001563   000000 100500                    MLR     fill='000'O
         5 001564   200024 000004                    ADSC9   KQ_PGSZ+10,,AUTO         cn=0,n=4
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:120  
         5 001565   010510 200007 1                  ADSC9   DF_KEY                   cn=1,n=7

      839     5535    4                DF_KEY.K.TYP=%R_MWSQ#;

   5535  5 001566   002000 236007                    LDQ     1024,DL
         5 001567   010510 552010 1                  STBQ    DF_KEY,'10'O

      840     5536    4                DF_KEY.K.STYP=%R_MCPU#;

   5536  5 001570   000000 236003                    LDQ     0,DU
         5 001571   010510 552004 1                  STBQ    DF_KEY,'04'O

      841     5537    4                DF_KEY.K.USR#=RV_BUFF.S_PNO;

   5537  5 001572   002642 236000 1                  LDQ     RV_BUFF+98
         5 001573   000033 736000                    QLS     27
         5 001574   010511 552040 1                  STBQ    DF_KEY+1,'40'O

      842     5538    4                DF_KEY.K.VP# = J+%CGPGTBLLO;

   5538  5 001575   011063 236000 1                  LDQ     J
         5 001576   000001 036007                    ADLQ    1,DL
         5 001577   010511 552034 1                  STBQ    DF_KEY+1,'34'O

      843     5539    4                CALL M$WRITE(WTEO) ALTRET(EO_ERR);

   5539  5 001600   000272 630400 1                  EPPR0   WTEO
         5 001601   440001 713400                    CLIMB   alt,write
         5 001602   401400 401760                    pmme    nvectors=4
         5 001603   002423 702000 5                  TSX2    EO_ERR

      844     5540                                      /* WRITE DIRECTORY WITH KEY AS %CGWSQ DIRECTORY */
      845     5541
      846     5542    4                DF_KEY.K=BINBIT(NODEIDX,9);

   5542  5 001604   200007 236100                    LDQ     NODEIDX,,AUTO
         5 001605   000033 736000                    QLS     27
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:121  
         5 001606   200024 756100                    STQ     KQ_PGSZ+10,,AUTO
         5 001607   000000 100500                    MLR     fill='000'O
         5 001610   200024 000004                    ADSC9   KQ_PGSZ+10,,AUTO         cn=0,n=4
         5 001611   010510 200007 1                  ADSC9   DF_KEY                   cn=1,n=7

      847     5543    4                DF_KEY.K.TYP=%R_CGPGS#;

   5543  5 001612   005000 236007                    LDQ     2560,DL
         5 001613   010510 552010 1                  STBQ    DF_KEY,'10'O

      848     5544    4                DF_KEY.K.USR#=0;           /*MEANS DIRECTORY*/

   5544  5 001614   000000 236003                    LDQ     0,DU
         5 001615   010511 552040 1                  STBQ    DF_KEY+1,'40'O

      849     5545    4                DF_KEY.K.STYP=%CGWSQ;

   5545  5 001616   000014 236007                    LDQ     12,DL
         5 001617   010510 552004 1                  STBQ    DF_KEY,'04'O

      850     5546    4                DF_KEY.K.VP#=J;

   5546  5 001620   011063 236000 1                  LDQ     J
         5 001621   010511 552034 1                  STBQ    DF_KEY+1,'34'O

      851     5547    4                CALL M$WRITE(WTEO) ALTRET(EO_ERR);

   5547  5 001622   000272 630400 1                  EPPR0   WTEO
         5 001623   440001 713400                    CLIMB   alt,write
         5 001624   401400 401760                    pmme    nvectors=4
         5 001625   002423 702000 5                  TSX2    EO_ERR

      852     5548
      853     5549                                           /* ZAP WORDS 0-1 OF FIRST PAGE TABLE PAGE  */
      854     5550    4                IF J=0

   5550  5 001626   011063 235000 1                  LDA     J
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:122  
         5 001627   001633 601000 5                  TNZ     s:5553

      855     5551    4                THEN T$->B$BIT72='0'B;

   5551  5 001630   200003 470500                    LDP0    T$,,AUTO
         5 001631   000000 450100                    STZ     0,,PR0
         5 001632   000001 450100                    STZ     1,,PR0

      856     5552                                                /* COMPUTE LAST PAGE TABLE WORD       */
      857     5553    4                IF MAX_CG_PAGE > ( (J+1)*1024 )

   5553  5 001633   011063 236000 1                  LDQ     J
         5 001634   000012 736000                    QLS     10
         5 001635   002000 036007                    ADLQ    1024,DL
         5 001636   010500 116000 1                  CMPQ    MAX_CG_PAGE
         5 001637   001643 603000 5                  TRC     s:5555

      858     5554    4                THEN LAST_PAGE = 1023;

   5554  5 001640   001777 235007                    LDA     1023,DL
         5 001641   010502 755000 1                  STA     LAST_PAGE
         5 001642   001650 710000 5                  TRA     s:5558

      859     5555    4                ELSE LAST_PAGE = MAX_CG_PAGE - (J*1024);

   5555  5 001643   000000 236003                    LDQ     0,DU
         5 001644   011063 136000 1                  SBLQ    J
         5 001645   000012 736000                    QLS     10
         5 001646   010500 036000 1                  ADLQ    MAX_CG_PAGE
         5 001647   010502 756000 1                  STQ     LAST_PAGE

      860     5556
      861     5557
      862     5558    4                IF LAST_PAGE > 0

   5558  5 001650   010502 235000 1                  LDA     LAST_PAGE
         5 001651   001656 604400 5                  TMOZ    s:5563
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:123  

      863     5559    5                THEN DO;

      864     5560    5                     DF_KEY.K.USR#=1;      /*MEANS CONTENTS OF THE PAGES         */

   5560  5 001652   001000 236003                    LDQ     512,DU
         5 001653   010511 552040 1                  STBQ    DF_KEY+1,'40'O

      865     5561    5                     CALL KEY_WSQ ALTRET(WSQ_ERR);

   5561  5 001654   002535 701000 5                  TSX1    KEY_WSQ
         5 001655   002433 702000 5                  TSX2    WSQ_ERR

      866     5562    5                     END;

      867     5563    4                FIRST_PAGE = FIRST_PAGE+1024;

   5563  5 001656   002000 236007                    LDQ     1024,DL
         5 001657   010501 056000 1                  ASQ     FIRST_PAGE

      868     5564    4                END;                       /* DO IF CGRWSQ.SZ(J) ~=0             */

   5564  5 001660   001666 710000 5                  TRA     s:5568

      869     5565    4           ELSE DO;

      870     5566    4                B$CGPT$->B$WSQD = '0'B;

   5566  5 001661   035066 470400 1                  LDP0    B$CGPT$
         5 001662   010000 221003                    LDX1    4096,DU
         5 001663   000140 100400                    MLR     fill='000'O
         5 001664   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         5 001665   000000 000011                    ADSC9   0,,PR0                   cn=0,n=*X1

      871     5567    4                END;

      872     5568    3           B$CGPT$ = PINCRW(B$CGPT$,1024);
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:124  

   5568  5 001666   035066 236000 1                  LDQ     B$CGPT$
         5 001667   002000 036003                    ADLQ    1024,DU
         5 001670   035066 756000 1                  STQ     B$CGPT$

      873     5569    3           END;                            /* DO J=0 TO 9                        */

   5569  5 001671   011063 235000 1                  LDA     J
         5 001672   000001 035007                    ADLA    1,DL
         5 001673   011063 755000 1                  STA     J
         5 001674   000012 115007                    CMPA    10,DL
         5 001675   001511 602000 5                  TNC     s:5518

      874     5570
      875     5571
      876     5572        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:125  
      877     5573                                                /* READ-WRITE THE CURRENT COMGROUP    */
      878     5574    2      DF_KEY.K=BINBIT(NODEIDX,9);

   5574  5 001676   200007 236100                    LDQ     NODEIDX,,AUTO
         5 001677   000033 736000                    QLS     27
         5 001700   200024 756100                    STQ     KQ_PGSZ+10,,AUTO
         5 001701   000000 100500                    MLR     fill='000'O
         5 001702   200024 000004                    ADSC9   KQ_PGSZ+10,,AUTO         cn=0,n=4
         5 001703   010510 200007 1                  ADSC9   DF_KEY                   cn=1,n=7

      879     5575
      880     5576    2      IF RV_BUFF.CURCG.SZ  ~= 0

   5576  5 001704   003171 720000 1                  LXL0    RV_BUFF+313
         5 001705   002052 600000 5                  TZE     CURCG_DONE

      881     5577    3      THEN DO;

      882     5578    3           DP_GRAN = RV_BUFF.CURCG.DA;

   5578  5 001706   003170 236000 1                  LDQ     RV_BUFF+312
         5 001707   000476 756000 1                  STQ     DP_GRAN

      883     5579    3           LAST_GRAN = RV_BUFF.CURCG.DA + RV_BUFF.CURCG.SZ -1;

   5579  5 001710   003171 236000 1                  LDQ     RV_BUFF+313
         5 001711   777777 376007                    ANQ     -1,DL
         5 001712   003170 036000 1                  ADLQ    RV_BUFF+312
         5 001713   000001 136007                    SBLQ    1,DL
         5 001714   000477 756000 1                  STQ     LAST_GRAN

      884     5580                                      /* READ-WRITE THE SEGMENT DESCRIPTOR GRANULE    */
      885     5581    3           DF_KEY.K.TYP  = %R_CGPGS#;

   5581  5 001715   005000 236007                    LDQ     2560,DL
         5 001716   010510 552010 1                  STBQ    DF_KEY,'10'O

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:126  
      886     5582    3           DF_KEY.K.STYP = %CGWSQ;

   5582  5 001717   000014 236007                    LDQ     12,DL
         5 001720   010510 552004 1                  STBQ    DF_KEY,'04'O

      887     5583    3           DF_KEY.K.USR# = %R_CGDSB#;

   5583  5 001721   002000 236003                    LDQ     1024,DU
         5 001722   010511 552040 1                  STBQ    DF_KEY+1,'40'O

      888     5584    3           DF_KEY.K.VP# = 0;

   5584  5 001723   000000 236003                    LDQ     0,DU
         5 001724   010511 552034 1                  STBQ    DF_KEY+1,'34'O

      889     5585
      890     5586    3           CALL M$READ(RAPAGE) ALTRET(R_DP_ERR);

   5586  5 001725   000110 630400 1                  EPPR0   RAPAGE
         5 001726   440000 713400                    CLIMB   alt,read
         5 001727   401400 401760                    pmme    nvectors=4
         5 001730   002367 702000 5                  TSX2    R_DP_ERR

      891     5587    3           CALL M$WRITE(WAPAGE) ALTRET(EO_ERR);

   5587  5 001731   000306 630400 1                  EPPR0   WAPAGE
         5 001732   440001 713400                    CLIMB   alt,write
         5 001733   401400 401760                    pmme    nvectors=4
         5 001734   002423 702000 5                  TSX2    EO_ERR

      892     5588
      893     5589    3           DP_GRAN = DP_GRAN+1;

   5589  5 001735   000476 235000 1                  LDA     DP_GRAN
         5 001736   000001 035007                    ADLA    1,DL
         5 001737   000476 755000 1                  STA     DP_GRAN

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:127  
      894     5590    3           DF_KEY.K.USR#=%R_DATA#;

   5590  5 001740   001000 236003                    LDQ     512,DU
         5 001741   010511 552040 1                  STBQ    DF_KEY+1,'40'O

      895     5591                                                /* SWITCH KEY BACK TO DATA VP#        */
      896     5592    3           T$=ADDR(APAGE);

   5592  5 001742   000003 236000 6                  LDQ     3
         5 001743   200003 756100                    STQ     T$,,AUTO

      897     5593    3           RV_WSQD=T$->B$WSQD;

   5593  5 001744   200003 470500                    LDP0    T$,,AUTO
         5 001745   010000 220003                    LDX0    4096,DU
         5 001746   000040 100540                    MLR     fill='000'O
         5 001747   000000 000010                    ADSC9   0,,PR0                   cn=0,n=*X0
         5 001750   006500 000010 1                  ADSC9   RV_WSQD                  cn=0,n=*X0

      898     5594    3           T$=ADDR(RV_WSQD);

   5594  5 001751   000021 236000 6                  LDQ     17
         5 001752   200003 756100                    STQ     T$,,AUTO

      899     5595
      900     5596                                           /* READ-WRITE THE CURRENT COMGROUP DATA    */
      901     5597    3           KQ_DSBSZ=(T$->KQ$DSB.ASR.BOUND+1)/8;

   5597  5 001753   200003 470500                    LDP0    T$,,AUTO
         5 001754   000000 236100                    LDQ     0,,PR0
         5 001755   000020 772000                    QRL     16
         5 001756   000001 036007                    ADLQ    1,DL
         5 001757   000003 772000                    QRL     3
         5 001760   200011 756100                    STQ     KQ_DSBSZ,,AUTO

      902     5598                                                /* # of ASR Descriptors               */
      903     5599    4           DO I=0 TO KQ_DSBSZ-1;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:128  

   5599  5 001761   011062 450000 1                  STZ     I
         5 001762   002046 710000 5                  TRA     s:5616+3

      904     5600    4                IF (T$->KQ$DSB.DESC.FLG(I) & %DSPRESNT)

   5600  5 001763   011062 235000 1                  LDA     I
         5 001764   000001 735000                    ALS     1
         5 001765   200003 470500                    LDP0    T$,,AUTO
         5 001766   000002 236105                    LDQ     2,AL,PR0
         5 001767   000024 736000                    QLS     20
         5 001770   777000 376003                    ANQ     -512,DU
         5 001771   001000 376003                    ANQ     512,DU
         5 001772   002043 600000 5                  TZE     s:5616

      905     5601    5                THEN DO;

      906     5602    5                     DF_KEY.K.VP# = T$->KQ$DSB.DESC.BASE(I)/4096;

   5602  5 001773   000003 236105                    LDQ     3,AL,PR0
         5 001774   000014 772000                    QRL     12
         5 001775   010511 552034 1                  STBQ    DF_KEY+1,'34'O

      907     5603    5                     KQ_PGSZ = (T$->KQ$DSB.DESC.BOUND(I)+1)/4096;

   5603  5 001776   000002 236105                    LDQ     2,AL,PR0
         5 001777   000020 772000                    QRL     16
         5 002000   000001 036007                    ADLQ    1,DL
         5 002001   000014 772000                    QRL     12
         5 002002   200012 756100                    STQ     KQ_PGSZ,,AUTO

      908     5604                                                /* Size of this segment               */
      909     5605    6                     DO J=0 TO KQ_PGSZ-1;

   5605  5 002003   011063 450000 1                  STZ     J
         5 002004   002037 710000 5                  TRA     s:5614+3

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:129  
      910     5606    6                          IF (RG_CGPT.PG.HFLG(DF_KEY.K.VP#) & %PGINMEM)

   5606  5 002005   010511 720000 1                  LXL0    DF_KEY+1
         5 002006   777777 360003                    ANX0    -1,DU
         5 002007   011066 236010 1                  LDQ     RG_CGPT,X0
         5 002010   000036 736000                    QLS     30
         5 002011   400000 376003                    ANQ     -131072,DU
         5 002012   002031 600000 5                  TZE     s:5613

      911     5607    7                          THEN DO;

      912     5608    7                               CALL M$READ(RAPAGE) ALTRET(R_DP_ERR);

   5608  5 002013   000110 630400 1                  EPPR0   RAPAGE
         5 002014   440000 713400                    CLIMB   alt,read
         5 002015   401400 401760                    pmme    nvectors=4
         5 002016   002367 702000 5                  TSX2    R_DP_ERR

      913     5609    7                               CALL M$WRITE(WAPAGE) ALTRET(EO_ERR);

   5609  5 002017   000306 630400 1                  EPPR0   WAPAGE
         5 002020   440001 713400                    CLIMB   alt,write
         5 002021   401400 401760                    pmme    nvectors=4
         5 002022   002423 702000 5                  TSX2    EO_ERR

      914     5610    7                               DP_GRAN = DP_GRAN+1;

   5610  5 002023   000476 235000 1                  LDA     DP_GRAN
         5 002024   000001 035007                    ADLA    1,DL
         5 002025   000476 755000 1                  STA     DP_GRAN

      915     5611    7                               IF DP_GRAN > LAST_GRAN THEN GOTO CURCG_DONE;

   5611  5 002026   000477 236000 1                  LDQ     LAST_GRAN
         5 002027   000476 116000 1                  CMPQ    DP_GRAN
         5 002030   002052 602000 5                  TNC     CURCG_DONE

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:130  
      916     5612    7                               END;        /* DO IF %PGINMEM                     */

      917     5613    6                          DF_KEY.K.VP# = DF_KEY.K.VP#+1;

   5613  5 002031   010511 236000 1                  LDQ     DF_KEY+1
         5 002032   000001 036007                    ADLQ    1,DL
         5 002033   010511 552034 1                  STBQ    DF_KEY+1,'34'O

      918     5614    6                          END;

   5614  5 002034   011063 235000 1                  LDA     J
         5 002035   000001 035007                    ADLA    1,DL
         5 002036   011063 755000 1                  STA     J
         5 002037   011063 236000 1                  LDQ     J
         5 002040   002043 604000 5                  TMI     s:5616
         5 002041   200012 116100                    CMPQ    KQ_PGSZ,,AUTO
         5 002042   002005 604000 5                  TMI     s:5606

      919     5615    5                     END;                  /* DO IF NOT NULL                     */

      920     5616    4                END;

   5616  5 002043   011062 235000 1                  LDA     I
         5 002044   000001 035007                    ADLA    1,DL
         5 002045   011062 755000 1                  STA     I
         5 002046   011062 236000 1                  LDQ     I
         5 002047   002052 604000 5                  TMI     CURCG_DONE
         5 002050   200011 116100                    CMPQ    KQ_DSBSZ,,AUTO
         5 002051   001763 604000 5                  TMI     s:5600

   5609  5 002052                       CURCG_DONE   null
      921     5617    3   CURCG_DONE: ;
      922     5618    3           END;                            /*DO IF CURCG.SZ  ~=0                 */

      923     5619
      924     5620        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:131  
      925     5621
      926     5622                                                /*READ-WRITE THE SLAVE JITS           */
      927     5623    2      DF_KEY.K=BINBIT(NODEIDX,9);

   5623  5 002052   200007 236100                    LDQ     NODEIDX,,AUTO
         5 002053   000033 736000                    QLS     27
         5 002054   200024 756100                    STQ     KQ_PGSZ+10,,AUTO
         5 002055   000000 100500                    MLR     fill='000'O
         5 002056   200024 000004                    ADSC9   KQ_PGSZ+10,,AUTO         cn=0,n=4
         5 002057   010510 200007 1                  ADSC9   DF_KEY                   cn=1,n=7

      928     5624
      929     5625    2      DF_KEY.K.TYP = %R_MWSQ#;

   5625  5 002060   002000 236007                    LDQ     1024,DL
         5 002061   010510 552010 1                  STBQ    DF_KEY,'10'O

      930     5626    2      DF_KEY.K.STYP= %R_SCPU#;

   5626  5 002062   000001 236007                    LDQ     1,DL
         5 002063   010510 552004 1                  STBQ    DF_KEY,'04'O

      931     5627
      932     5628    3      DO J=0 TO 7;

   5628  5 002064   011063 450000 1                  STZ     J

      933     5629    3           IF RV_BUFF.MONJITS.SZ(J) ~= 0

   5629  5 002065   011063 235000 1                  LDA     J
         5 002066   000001 735000                    ALS     1
         5 002067   003023 720005 1                  LXL0    RV_BUFF+211,AL
         5 002070   002143 600000 5                  TZE     s:5644

      934     5630    4           THEN DO;

      935     5631    4                DP_GRAN = RV_BUFF.MONJITS.DA(J);
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:132  

   5631  5 002071   003022 235005 1                  LDA     RV_BUFF+210,AL
         5 002072   000476 755000 1                  STA     DP_GRAN

      936     5632    4                DF_KEY.K.USR# = J;

   5632  5 002073   011063 236000 1                  LDQ     J
         5 002074   000033 736000                    QLS     27
         5 002075   010511 552040 1                  STBQ    DF_KEY+1,'40'O

      937     5633
      938     5634    5                DO I=0 TO RV_BUFF.MONJITS.SZ(J)-1;

   5634  5 002076   011062 450000 1                  STZ     I
         5 002077   002134 710000 5                  TRA     s:5642+3

      939     5635    5                     CALL M$READ(RAPAGE) ALTRET(R_DP_ERR);

   5635  5 002100   000110 630400 1                  EPPR0   RAPAGE
         5 002101   440000 713400                    CLIMB   alt,read
         5 002102   401400 401760                    pmme    nvectors=4
         5 002103   002367 702000 5                  TSX2    R_DP_ERR

      940     5636    5                     IF I=5 THEN DF_KEY.K.VP# = %ISEGLO;

   5636  5 002104   011062 235000 1                  LDA     I
         5 002105   000005 115007                    CMPA    5,DL
         5 002106   002112 601000 5                  TNZ     s:5637

   5636  5 002107   000100 236007                    LDQ     64,DL
         5 002110   010511 552034 1                  STBQ    DF_KEY+1,'34'O
         5 002111   002122 710000 5                  TRA     s:5640

      941     5637    5                     ELSE IF I=0

   5637  5 002112   000000 115003                    CMPA    0,DU
         5 002113   002117 601000 5                  TNZ     s:5639
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:133  

      942     5638    5                          THEN DF_KEY.K.VP# = I;

   5638  5 002114   011062 236000 1                  LDQ     I
         5 002115   010511 552034 1                  STBQ    DF_KEY+1,'34'O
         5 002116   002122 710000 5                  TRA     s:5640

      943     5639    5                          ELSE DF_KEY.K.VP# = %JITPG-1+I;

   5639  5 002117   011062 236000 1                  LDQ     I
         5 002120   000012 036007                    ADLQ    10,DL
         5 002121   010511 552034 1                  STBQ    DF_KEY+1,'34'O

      944     5640    5                     CALL M$WRITE(WAPAGE) ALTRET(EO_ERR);

   5640  5 002122   000306 630400 1                  EPPR0   WAPAGE
         5 002123   440001 713400                    CLIMB   alt,write
         5 002124   401400 401760                    pmme    nvectors=4
         5 002125   002423 702000 5                  TSX2    EO_ERR

      945     5641    5                     DP_GRAN = DP_GRAN+1;

   5641  5 002126   000476 235000 1                  LDA     DP_GRAN
         5 002127   000001 035007                    ADLA    1,DL
         5 002130   000476 755000 1                  STA     DP_GRAN

      946     5642    5                     END;                  /*DO 0 TO SZ                          */

   5642  5 002131   011062 236000 1                  LDQ     I
         5 002132   000001 036007                    ADLQ    1,DL
         5 002133   011062 756000 1                  STQ     I
         5 002134   011063 236000 1                  LDQ     J
         5 002135   000001 736000                    QLS     1
         5 002136   003023 236006 1                  LDQ     RV_BUFF+211,QL
         5 002137   777777 376007                    ANQ     -1,DL
         5 002140   011062 116000 1                  CMPQ    I
         5 002141   002143 600000 5                  TZE     s:5644
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:134  
         5 002142   002100 603000 5                  TRC     s:5635

      947     5643    4                END;                       /*DO IF SZ(J) ~=0                     */

      948     5644    3           END;                            /*DO J=0 TO 3                         */

   5644  5 002143   011063 235000 1                  LDA     J
         5 002144   000001 035007                    ADLA    1,DL
         5 002145   011063 755000 1                  STA     J
         5 002146   000010 115007                    CMPA    8,DL
         5 002147   002065 602000 5                  TNC     s:5629

      949     5645
      950     5646        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:135  
      951     5647
      952     5648                                                /*READ-WRITE THE USERS                */
      953     5649    2      DF_KEY.K=BINBIT(NODEIDX,9);

   5649  5 002150   200007 236100                    LDQ     NODEIDX,,AUTO
         5 002151   000033 736000                    QLS     27
         5 002152   200024 756100                    STQ     KQ_PGSZ+10,,AUTO
         5 002153   000000 100500                    MLR     fill='000'O
         5 002154   200024 000004                    ADSC9   KQ_PGSZ+10,,AUTO         cn=0,n=4
         5 002155   010510 200007 1                  ADSC9   DF_KEY                   cn=1,n=7

      954     5650
      955     5651    2      IF RV_BUFF.USRDR.SZ ~= 0

   5651  5 002156   003011 720000 1                  LXL0    RV_BUFF+201
         5 002157   002267 600000 5                  TZE     s:5683

      956     5652    3      THEN DO;

      957     5653    3           RD_DP.BUF_ = VECTOR(RV_USRDIR);

   5653  5 002160   000022 237000 6                  LDAQ    18
         5 002161   000076 757000 1                  STAQ    RD_DP+4

      958     5654    3           DP_GRAN = RV_BUFF.USRDR.DA;

   5654  5 002162   003010 235000 1                  LDA     RV_BUFF+200
         5 002163   000476 755000 1                  STA     DP_GRAN

      959     5655    3           CALL M$READ(RD_DP) ALTRET(R_DP_ERR);

   5655  5 002164   000072 630400 1                  EPPR0   RD_DP
         5 002165   440000 713400                    CLIMB   alt,read
         5 002166   401400 401760                    pmme    nvectors=4
         5 002167   002367 702000 5                  TSX2    R_DP_ERR

      960     5656    3           DF_KEY.K.STYP=1;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:136  

   5656  5 002170   000001 236007                    LDQ     1,DL
         5 002171   010510 552004 1                  STBQ    DF_KEY,'04'O

      961     5657    3           WTEO.BUF_ = VECTOR(RV_USRDIR);

   5657  5 002172   000022 237000 6                  LDAQ    18
         5 002173   000276 757000 1                  STAQ    WTEO+4

      962     5658    3           CALL M$WRITE(WTEO) ALTRET(EO_ERR);

   5658  5 002174   000272 630400 1                  EPPR0   WTEO
         5 002175   440001 713400                    CLIMB   alt,write
         5 002176   401400 401760                    pmme    nvectors=4
         5 002177   002423 702000 5                  TSX2    EO_ERR

      963     5659    3           DF_KEY.K=BINBIT(NODEIDX,9);

   5659  5 002200   200007 236100                    LDQ     NODEIDX,,AUTO
         5 002201   000033 736000                    QLS     27
         5 002202   200024 756100                    STQ     KQ_PGSZ+10,,AUTO
         5 002203   000000 100500                    MLR     fill='000'O
         5 002204   200024 000004                    ADSC9   KQ_PGSZ+10,,AUTO         cn=0,n=4
         5 002205   010510 200007 1                  ADSC9   DF_KEY                   cn=1,n=7

      964     5660
      965     5661    4           DO J=0 TO 511;

   5661  5 002206   011063 450000 1                  STZ     J

      966     5662    4                IF RV_USRDIR.USER.SZ(J) ~= 0

   5662  5 002207   011063 235000 1                  LDA     J
         5 002210   000001 735000                    ALS     1
         5 002211   004501 720005 1                  LXL0    RV_USRDIR+1,AL
         5 002212   002262 600000 5                  TZE     s:5679

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:137  
      967     5663    5                THEN DO;

      968     5664    5                     RD_DP.BUF_ = VECTOR(APAGE);

   5664  5 002213   000002 237000 6                  LDAQ    2
         5 002214   000076 757000 1                  STAQ    RD_DP+4

      969     5665    5                     DP_GRAN = RV_USRDIR.USER.DA(J);

   5665  5 002215   011063 235000 1                  LDA     J
         5 002216   000001 735000                    ALS     1
         5 002217   004500 235005 1                  LDA     RV_USRDIR,AL
         5 002220   000476 755000 1                  STA     DP_GRAN

      970     5666    5                     LAST_GRAN = RV_USRDIR.USER.DA(J) + RV_USRDIR.USER.SZ(J) -1;

   5666  5 002221   011063 235000 1                  LDA     J
         5 002222   000001 735000                    ALS     1
         5 002223   004501 236005 1                  LDQ     RV_USRDIR+1,AL
         5 002224   777777 376007                    ANQ     -1,DL
         5 002225   004500 036005 1                  ADLQ    RV_USRDIR,AL
         5 002226   000001 136007                    SBLQ    1,DL
         5 002227   000477 756000 1                  STQ     LAST_GRAN

      971     5667    5                     CALL M$READ(RD_DP) ALTRET(R_DP_ERR);

   5667  5 002230   000072 630400 1                  EPPR0   RD_DP
         5 002231   440000 713400                    CLIMB   alt,read
         5 002232   401400 401760                    pmme    nvectors=4
         5 002233   002367 702000 5                  TSX2    R_DP_ERR

      972     5668    5                     T$=ADDR(APAGE);

   5668  5 002234   000003 236000 6                  LDQ     3
         5 002235   200003 756100                    STQ     T$,,AUTO

      973     5669    5                     RV_WSQD = T$->B$WSQD;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:138  

   5669  5 002236   200003 470500                    LDP0    T$,,AUTO
         5 002237   010000 220003                    LDX0    4096,DU
         5 002240   000040 100540                    MLR     fill='000'O
         5 002241   000000 000010                    ADSC9   0,,PR0                   cn=0,n=*X0
         5 002242   006500 000010 1                  ADSC9   RV_WSQD                  cn=0,n=*X0

      974     5670
      975     5671    5                     DF_KEY.K.TYP = %R_UWSQ#;

   5671  5 002243   004000 236007                    LDQ     2048,DL
         5 002244   010510 552010 1                  STBQ    DF_KEY,'10'O

      976     5672    5                     DF_KEY.K.STYP = RV_USRDIR.USER.TYP(J);

   5672  5 002245   011063 235000 1                  LDA     J
         5 002246   000001 735000                    ALS     1
         5 002247   004501 236005 1                  LDQ     RV_USRDIR+1,AL
         5 002250   000022 772000                    QRL     18
         5 002251   010510 552004 1                  STBQ    DF_KEY,'04'O

      977     5673
      978     5674    5                     DF_KEY.K.USR#=J;

   5674  5 002252   011063 236000 1                  LDQ     J
         5 002253   000033 736000                    QLS     27
         5 002254   010511 552040 1                  STBQ    DF_KEY+1,'40'O

      979     5675    5                     FIRST_PAGE=0;

   5675  5 002255   010501 450000 1                  STZ     FIRST_PAGE

      980     5676    5                     LAST_PAGE=1023;

   5676  5 002256   001777 236007                    LDQ     1023,DL
         5 002257   010502 756000 1                  STQ     LAST_PAGE

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:139  
      981     5677    5                     CALL KEY_WSQ ALTRET(WSQ_ERR);

   5677  5 002260   002535 701000 5                  TSX1    KEY_WSQ
         5 002261   002433 702000 5                  TSX2    WSQ_ERR

      982     5678    5                     END;                  /*DO IF USER.SZ(J) ~0                 */

      983     5679    4                END;                       /*DO J=0 TO 511*/

   5679  5 002262   011063 235000 1                  LDA     J
         5 002263   000001 035007                    ADLA    1,DL
         5 002264   011063 755000 1                  STA     J
         5 002265   001000 115007                    CMPA    512,DL
         5 002266   002207 602000 5                  TNC     s:5662

      984     5680    3           END;                            /*DO IF USRDR.SZ ~=0*/

      985     5681
      986     5682        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:140  
      987     5683    2      CALL M$TIME(R2ETIME) ALTRET(SKIP_TIMES);

   5683  5 002267   011046 630400 1                  EPPR0   R2ETIME
         5 002270   420004 713400                    CLIMB   alt,+8196
         5 002271   402000 401760                    pmme    nvectors=5
         5 002272   002316 702000 5                  TSX2    SKIP_TIMES

      988     5684    2      RV_BUFF.UTS3 = TSTAMP1;

   5684  5 002273   011026 235000 1                  LDA     TSTAMP1
         5 002274   002506 755000 1                  STA     RV_BUFF+6

      989     5685    2      RV_BUFF.UTS4 = TSTAMP2;

   5685  5 002275   011027 236000 1                  LDQ     TSTAMP2
         5 002276   002507 756000 1                  STQ     RV_BUFF+7

      990     5686    2      RV_BUFF.OCMSG = OCMSG_C;

   5686  5 002277   040000 100400                    MLR     fill='040'O
         5 002300   010757 000170 1                  ADSC9   OCMSG                    cn=0,n=120
         5 002301   003255 000170 1                  ADSC9   RV_BUFF+365              cn=0,n=120

      991     5687    2      DF_KEY.K=BINBIT(NODEIDX,9);

   5687  5 002302   200007 236100                    LDQ     NODEIDX,,AUTO
         5 002303   000033 736000                    QLS     27
         5 002304   200024 756100                    STQ     KQ_PGSZ+10,,AUTO
         5 002305   000000 100500                    MLR     fill='000'O
         5 002306   200024 000004                    ADSC9   KQ_PGSZ+10,,AUTO         cn=0,n=4
         5 002307   010510 200007 1                  ADSC9   DF_KEY                   cn=1,n=7

      992     5688    2      WTEO.BUF_ = VECTOR(RV_BUFF);

   5688  5 002310   000014 237000 6                  LDAQ    12
         5 002311   000276 757000 1                  STAQ    WTEO+4

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:141  
      993     5689    2      CALL M$WRITE(WTEO) ALTRET(SKIP_TIMES);

   5689  5 002312   000272 630400 1                  EPPR0   WTEO
         5 002313   440001 713400                    CLIMB   alt,write
         5 002314   401400 401760                    pmme    nvectors=4
         5 002315   002316 702000 5                  TSX2    SKIP_TIMES

   5688  5 002316                       SKIP_TIMES   null
      994     5690
      995     5691    2   SKIP_TIMES: ;
      996     5692
      997     5693
      998     5694    2      RV_BUFF.BUSY=0;

   5694  5 002316   002500 450000 1                  STZ     RV_BUFF

      999     5695    2      APAGE='0'B;

   5695  5 002317   010000 220003                    LDX0    4096,DU
         5 002320   000040 100400                    MLR     fill='000'O
         5 002321   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         5 002322   000500 000010 1                  ADSC9   APAGE                    cn=0,n=*X0

     1000     5696    2      T$=ADDR(APAGE);

   5696  5 002323   000003 236000 6                  LDQ     3
         5 002324   200003 756100                    STQ     T$,,AUTO

     1001     5697    2      T$->RV$BUFF=RV_BUFF;

   5697  5 002325   200003 470500                    LDP0    T$,,AUTO
         5 002326   000140 100440                    MLR     fill='000'O
         5 002327   002500 000010 1                  ADSC9   RV_BUFF                  cn=0,n=*X0
         5 002330   000000 000010                    ADSC9   0,,PR0                   cn=0,n=*X0

     1002     5698    2      CALL M$WRITE(WT_DP) ALTRET(W_RB_ERR);

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:142  
   5698  5 002331   000126 630400 1                  EPPR0   WT_DP
         5 002332   440001 713400                    CLIMB   alt,write
         5 002333   401400 401760                    pmme    nvectors=4
         5 002334   002363 702000 5                  TSX2    W_RB_ERR

     1003     5699    2      CALL M$CLOSE(CLS_EO) ALTRET(CLS_EO_ERR);

   5699  5 002335   000322 630400 1                  EPPR0   CLS_EO
         5 002336   450001 713400                    CLIMB   alt,close
         5 002337   406000 401760                    pmme    nvectors=13
         5 002340   002437 702000 5                  TSX2    CLS_EO_ERR

     1004     5700    2      ERRM.M = OCMSG_C;

   5700  5 002341   040000 100400                    MLR     fill='040'O
         5 002342   010757 000170 1                  ADSC9   OCMSG                    cn=0,n=120
         5 002343   010704 400170 1                  ADSC9   ERRM                     cn=2,n=120

     1005     5701    2      CALL PRINT_ERRM;

   5701  5 002344   002767 701000 5                  TSX1    PRINT_ERRM
         5 002345   000000 011000                    NOP     0

     1006     5702
     1007     5703    2      RETURN;

   5703  5 002346   200014 221300                    LDX1  ! KQ_PGSZ+2,,AUTO
         5 002347   000001 702211                    TSX2  ! 1,X1

   5700  5 002350                       R_RB_ERR     null
     1008     5704        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:143  
     1009     5705        /*************************************************************
     1010     5706         *                                                           *
     1011     5707         *     Errors reading System Disk or Writing keyed file      *
     1012     5708         *                                                           *
     1013     5709         *************************************************************/
     1014     5710    2   R_RB_ERR: ;                             /*ERROR READING RECOVERY BUFFER*/
     1015     5711    2      DFMSG.M = 'ERROR READING RCVR BUFFER';

   5711  5 002350   040000 100400                    MLR     fill='040'O
         5 002351   000153 000031 2                  ADSC9   RESET_XCON+63            cn=0,n=25
         5 002352   010744 600036 1                  ADSC9   DFMSG+1                  cn=3,n=30

     1016     5712    2      PRINT_MSG1 = 1;

   5712  5 002353   000001 235007                    LDA     1,DL
         5 002354   011017 755000 1                  STA     PRINT_MSG1

     1017     5713    2      CALL REPORT_DF_SLOT;

   5713  5 002355   003107 701000 5                  TSX1    REPORT_DF_SLOT
         5 002356   000000 011000                    NOP     0

     1018     5714    2      CALL REPORT_ERRMSG;

   5714  5 002357   002747 701000 5                  TSX1    REPORT_ERRMSG
         5 002360   000000 011000                    NOP     0

   5712  5 002361                       DO_ALTRTN    null
     1019     5715    2   DO_ALTRTN: ;
     1020     5716    2      ALTRETURN;

   5716  5 002361   200014 221300                    LDX1  ! KQ_PGSZ+2,,AUTO
         5 002362   000000 702211                    TSX2  ! 0,X1

   5712  5 002363                       W_RB_ERR     null
     1021     5717
     1022     5718    2   W_RB_ERR: ;                             /* ERROR WRITING THE RECOVERY BUFFER  */
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:144  
     1023     5719    2      DFMSG.M = 'ERROR WRITING RCVR BUFFER';

   5719  5 002363   040000 100400                    MLR     fill='040'O
         5 002364   000162 000031 2                  ADSC9   RESET_XCON+70            cn=0,n=25
         5 002365   010744 600036 1                  ADSC9   DFMSG+1                  cn=3,n=30

     1024     5720    2      GOTO CALL_DFERR;

   5720  5 002366   002372 710000 5                  TRA     CALL_DFERR

   5719  5 002367                       R_DP_ERR     null
     1025     5721
     1026     5722    2   R_DP_ERR: ;                             /* ERROR READING THE DUMP FILE        */
     1027     5723    2      DFMSG.M = 'ERR READING SYS AREA FOR DUMP';

   5723  5 002367   040000 100400                    MLR     fill='040'O
         5 002370   000171 000035 2                  ADSC9   RESET_XCON+77            cn=0,n=29
         5 002371   010744 600036 1                  ADSC9   DFMSG+1                  cn=3,n=30

   5723  5 002372                       CALL_DFERR   null
     1028     5724    2   CALL_DFERR: ;
     1029     5725    2      PRINT_MSG1 = 1;

   5725  5 002372   000001 235007                    LDA     1,DL
         5 002373   011017 755000 1                  STA     PRINT_MSG1

     1030     5726    2      CALL REPORT_DF_NAME;

   5726  5 002374   003071 701000 5                  TSX1    REPORT_DF_NAME
         5 002375   000000 011000                    NOP     0

     1031     5727    2      CALL REPORT_ERRMSG;

   5727  5 002376   002747 701000 5                  TSX1    REPORT_ERRMSG
         5 002377   000000 011000                    NOP     0

   5725  5 002400                       EXIT_EO      null
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:145  
     1032     5728    2   EXIT_EO: ;
     1033     5729    2      CALL M$CLOSE(CLS_EO) ALTRET(CLS_EO_ERR);

   5729  5 002400   000322 630400 1                  EPPR0   CLS_EO
         5 002401   450001 713400                    CLIMB   alt,close
         5 002402   406000 401760                    pmme    nvectors=13
         5 002403   002437 702000 5                  TSX2    CLS_EO_ERR

     1034     5730    2      ALTRETURN;

   5730  5 002404   200014 221300                    LDX1  ! KQ_PGSZ+2,,AUTO
         5 002405   000000 702211                    TSX2  ! 0,X1

   5725  5 002406                       RNM_ERR      null
     1035     5731
     1036     5732    2   RNM_ERR: ;
     1037     5733    2      DFMSG.M = 'ERROR RENAMING DUMP FILE';

   5733  5 002406   040000 100400                    MLR     fill='040'O
         5 002407   000201 000030 2                  ADSC9   RESET_XCON+85            cn=0,n=24
         5 002410   010744 600036 1                  ADSC9   DFMSG+1                  cn=3,n=30

     1038     5734    2      GOTO CALL_DFERR;

   5734  5 002411   002372 710000 5                  TRA     CALL_DFERR

   5733  5 002412                       OEO_ERR      null
     1039     5735
     1040     5736    2   OEO_ERR: ;                              /*ERROR ON OPEN OF OUTPUT DUMP FILE*/
     1041     5737    2      ERRM.M = 'OPEN KEYED DUMP FILE';

   5737  5 002412   040000 100400                    MLR     fill='040'O
         5 002413   000207 000024 2                  ADSC9   RESET_XCON+91            cn=0,n=20
         5 002414   010704 400170 1                  ADSC9   ERRM                     cn=2,n=120

   5737  5 002415                       XXX_EO       null
     1042     5738    2   XXX_EO: ;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:146  
     1043     5739    2      PRINT_MSG1 = 1;

   5739  5 002415   000001 235007                    LDA     1,DL
         5 002416   011017 755000 1                  STA     PRINT_MSG1

     1044     5740    2      CALL REPORT_ALT_ERR;

   5740  5 002417   002702 701000 5                  TSX1    REPORT_ALT_ERR
         5 002420   000000 011000                    NOP     0

     1045     5741    2      ALTRETURN;

   5741  5 002421   200014 221300                    LDX1  ! KQ_PGSZ+2,,AUTO
         5 002422   000000 702211                    TSX2  ! 0,X1

   5739  5 002423                       EO_ERR       null
     1046     5742
     1047     5743    2   EO_ERR: ;                               /*ERROR WRITING THE DUMP FILE*/
     1048     5744    2      ERRM.M = 'WRITE KEYED DUMP FILE';

   5744  5 002423   040000 100400                    MLR     fill='040'O
         5 002424   000214 000025 2                  ADSC9   RESET_XCON+96            cn=0,n=21
         5 002425   010704 400170 1                  ADSC9   ERRM                     cn=2,n=120

     1049     5745    2      PRINT_MSG1 = 1;

   5745  5 002426   000001 235007                    LDA     1,DL
         5 002427   011017 755000 1                  STA     PRINT_MSG1

     1050     5746    2      CALL REPORT_ALT_ERR;

   5746  5 002430   002702 701000 5                  TSX1    REPORT_ALT_ERR
         5 002431   000000 011000                    NOP     0

     1051     5747    2      GOTO EXIT_EO;

   5747  5 002432   002400 710000 5                  TRA     EXIT_EO
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:147  

   5745  5 002433                       WSQ_ERR      null
     1052     5748
     1053     5749    2   WSQ_ERR: ;
     1054     5750    2      IF KWSQERR=1 THEN GOTO R_DP_ERR;

   5750  5 002433   011020 235000 1                  LDA     KWSQERR
         5 002434   000001 115007                    CMPA    1,DL
         5 002435   002367 600000 5                  TZE     R_DP_ERR

     1055     5751    2      ELSE GOTO EO_ERR;

   5751  5 002436   002423 710000 5                  TRA     EO_ERR

   5750  5 002437                       CLS_EO_ERR   null
     1056     5752
     1057     5753    2   CLS_EO_ERR: ;                           /*ERROR CLOSING KEYED FILE*/
     1058     5754    2      ERRM.M = 'CLOSE KEYED DUMP FILE';

   5754  5 002437   040000 100400                    MLR     fill='040'O
         5 002440   000222 000025 2                  ADSC9   RESET_XCON+102           cn=0,n=21
         5 002441   010704 400170 1                  ADSC9   ERRM                     cn=2,n=120

     1059     5755    2      GOTO XXX_EO;

   5755  5 002442   002415 710000 5                  TRA     XXX_EO

     1060     5756
     1061     5757    2   END CONVERT_DUMP;
     1062     5758        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:148  
     1063     5759
     1064     5760    1   RENAME_DUMPFILE: PROC ALTRET;

   5760  5 002443   200016 741300       RENAME_DUMP* STX1  ! KQ_PGSZ+4,,AUTO

     1065     5761
     1066     5762        /* Rename dumpfile due to name clash.  The existing dumpfile
     1067     5763           is renamed to xxx_YYMMDD_HHMM, and is closed to allow a new
     1068     5764           dumpfile xxx to be created (in CONVERT_DUMP).  Note that symbol
     1069     5765           VDF_NAME is a %SUB alias for structure DF_NAME in TEXTC format.  */
     1070     5766
     1071     5767    2      CALL M$TIME (DUMP_TIME);             /* get YYMMDD and HHMM strs           */

   5767  5 002444   000376 630400 1                  EPPR0   DUMP_TIME
         5 002445   020004 713400                    CLIMB   8196
         5 002446   402000 401760                    pmme    nvectors=5

     1072     5768    2      NEWDFN.L# = VDF_NAME.L# + 12;        /* compute new name length            */

   5768  5 002447   010504 236000 1                  LDQ     DF_NAME
         5 002450   000033 772000                    QRL     27
         5 002451   000014 036007                    ADLQ    12,DL
         5 002452   000033 736000                    QLS     27
         5 002453   000412 552040 1                  STBQ    NEWDFN,'40'O

     1073     5769    2      IF (NEWDFN.L# > 31) THEN ALTRETURN;  /* check for name too long            */

   5769  5 002454   000412 236000 1                  LDQ     NEWDFN
         5 002455   777000 376003                    ANQ     -512,DU
         5 002456   040000 116003                    CMPQ    16384,DU
         5 002457   002462 602000 5                  TNC     s:5770

   5769  5 002460   200016 221300                    LDX1  ! KQ_PGSZ+4,,AUTO
         5 002461   000000 702211                    TSX2  ! 0,X1

     1074     5770    2      CALL CONCAT (NEWDFN.NAME#,           /* build new name                     */

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:149  
   5770  5 002462   010504 236000 1                  LDQ     DF_NAME
         5 002463   000033 772000                    QRL     27
         5 002464   000000 620006                    EAX0    0,QL
         5 002465   040000 100440                    MLR     fill='040'O
         5 002466   010504 200010 1                  ADSC9   DF_NAME                  cn=1,n=*X0
         5 002467   000412 200037 1                  ADSC9   NEWDFN                   cn=1,n=31
         5 002470   000037 116007                    CMPQ    31,DL
         5 002471   002524 603000 5                  TRC     s:5773
         5 002472   777740 620006                    EAX0    -32,QL
         5 002473   777777 660003                    ERX0    -1,DU
         5 002474   040046 100400                    MLR     fill='040'O
         5 002475   000024 000001 6                  ADSC9   20                       cn=0,n=1
         5 002476   000412 200010 1                  ADSC9   NEWDFN,Q                 cn=1,n=*X0
         5 002477   000036 116007                    CMPQ    30,DL
         5 002500   002524 603000 5                  TRC     s:5773
         5 002501   777741 620006                    EAX0    -31,QL
         5 002502   777777 660003                    ERX0    -1,DU
         5 002503   040046 100400                    MLR     fill='040'O
         5 002504   000460 000006 1                  ADSC9   DUMP_DT                  cn=0,n=6
         5 002505   000412 400010 1                  ADSC9   NEWDFN,Q                 cn=2,n=*X0
         5 002506   000030 116007                    CMPQ    24,DL
         5 002507   002524 603000 5                  TRC     s:5773
         5 002510   777747 620006                    EAX0    -25,QL
         5 002511   777777 660003                    ERX0    -1,DU
         5 002512   040046 100400                    MLR     fill='040'O
         5 002513   000024 000001 6                  ADSC9   20                       cn=0,n=1
         5 002514   000414 000010 1                  ADSC9   NEWDFN+2,Q               cn=0,n=*X0
         5 002515   000027 116007                    CMPQ    23,DL
         5 002516   002524 603000 5                  TRC     s:5773
         5 002517   777750 620006                    EAX0    -24,QL
         5 002520   777777 660003                    ERX0    -1,DU
         5 002521   040046 100400                    MLR     fill='040'O
         5 002522   000462 000004 1                  ADSC9   DUMP_TM                  cn=0,n=4
         5 002523   000414 200010 1                  ADSC9   NEWDFN+2,Q               cn=1,n=*X0

     1075     5771    2        SUBSTR (VDF_NAME.NAME#, 0, VDF_NAME.L#), '_', DUMP_DT, '_',
     1076     5772    2        SUBSTR (DUMP_TM, 0, 4));
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:150  
     1077     5773    2      CALL M$CLOSE (RNM_EO)                /* close and rename file              */

   5773  5 002524   000422 630400 1                  EPPR0   RNM_EO
         5 002525   450001 713400                    CLIMB   alt,close
         5 002526   406000 401760                    pmme    nvectors=13
         5 002527   002531 702000 5                  TSX2    s:5775
         5 002530   002533 710000 5                  TRA     s:5778

     1078     5774    3      WHENALTRETURN DO;                    /* propagate error                    */

     1079     5775    3           ALTRETURN;

   5775  5 002531   200016 221300                    LDX1  ! KQ_PGSZ+4,,AUTO
         5 002532   000000 702211                    TSX2  ! 0,X1

     1080     5776    3           END;
     1081     5777
     1082     5778    2   END RENAME_DUMPFILE;

   5778  5 002533   200016 221300                    LDX1  ! KQ_PGSZ+4,,AUTO
         5 002534   000001 702211                    TSX2  ! 1,X1

     1083     5779        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:151  
     1084     5780        /*************************************************************
     1085     5781         *                                                           *
     1086     5782         *               KEY WSQ                                     *
     1087     5783         *                                                           *
     1088     5784         *************************************************************/
     1089     5785
     1090     5786    1   KEY_WSQ: PROC ALTRET;

   5786  5 002535   200016 741300       KEY_WSQ      STX1  ! KQ_PGSZ+4,,AUTO

     1091     5787
     1092     5788    3      DO I=0 TO LAST_PAGE;

   5788  5 002536   011062 450000 1                  STZ     I
         5 002537   002662 710000 5                  TRA     s:5813+3

     1093     5789    3           IF (RV_WSQD.PG.SFLG(I) & %SCRCVR)

   5789  5 002540   011062 720000 1                  LXL0    I
         5 002541   006500 236010 1                  LDQ     RV_WSQD,X0
         5 002542   000022 736000                    QLS     18
         5 002543   777400 376003                    ANQ     -256,DU
         5 002544   200000 376003                    ANQ     65536,DU
         5 002545   002657 600000 5                  TZE     s:5813

     1094     5790    4           THEN DO;

     1095     5791    4                CALL M$READ(RAPAGE) ALTRET(READ_ERR);

   5791  5 002546   000110 630400 1                  EPPR0   RAPAGE
         5 002547   440000 713400                    CLIMB   alt,read
         5 002550   401400 401760                    pmme    nvectors=4
         5 002551   002670 702000 5                  TSX2    READ_ERR

     1096     5792    4                DF_KEY.K.VP# = I + FIRST_PAGE;

   5792  5 002552   011062 236000 1                  LDQ     I
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:152  
         5 002553   010501 036000 1                  ADLQ    FIRST_PAGE
         5 002554   010511 552034 1                  STBQ    DF_KEY+1,'34'O

     1097     5793    4                CALL M$WRITE(WAPAGE) ALTRET(WRITE_ERR);

   5793  5 002555   000306 630400 1                  EPPR0   WAPAGE
         5 002556   440001 713400                    CLIMB   alt,write
         5 002557   401400 401760                    pmme    nvectors=4
         5 002560   002674 702000 5                  TSX2    WRITE_ERR

     1098     5794
     1099     5795    4                IF (J = RV_BUFF.CUN) AND (I = %JITPG)

   5795  5 002561   011063 236000 1                  LDQ     J
         5 002562   002640 116000 1                  CMPQ    RV_BUFF+96
         5 002563   002647 601000 5                  TNZ     s:5810
         5 002564   011062 235000 1                  LDA     I
         5 002565   000013 115007                    CMPA    11,DL
         5 002566   002647 601000 5                  TNZ     s:5810

     1100     5796    5                THEN DO;                   /* put current usr info in ocmsg      */

     1101     5797    5                     AJIT$ = ADDR(APAGE);

   5797  5 002567   000003 236000 6                  LDQ     3
         5 002570   011064 756000 1                  STQ     AJIT$

     1102     5798    6                     DO Z = 0 TO 2;

   5798  5 002571   200010 450100                    STZ     Z,,AUTO

     1103     5799    6                          ADDR(OCMSG.USR#)->B$CHAR(Z) =

   5799  5 002572   200010 236100                    LDQ     Z,,AUTO
         5 002573   000003 402007                    MPY     3,DL
         5 002574   000000 116003                    CMPQ    0,DU
         5 002575   002577 605000 5                  TPL     s:5799+5
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:153  
         5 002576   000044 036003                    ADLQ    36,DU
         5 002577   011064 470400 1                  LDP0    AJIT$
         5 002600   003100 061506                    CSR     bolr='003'O
         5 002601   000000 200003                    BDSC    0,Q,PR0                  by=1,bit=0,n=3
         5 002602   200024 000044                    BDSC    KQ_PGSZ+10,,AUTO         by=0,bit=0,n=36
         5 002603   200024 236100                    LDQ     KQ_PGSZ+10,,AUTO
         5 002604   000060 036007                    ADLQ    48,DL
         5 002605   000033 736000                    QLS     27
         5 002606   000004 276000 6                  ORQ     4
         5 002607   200025 756100                    STQ     KQ_PGSZ+11,,AUTO
         5 002610   200010 235100                    LDA     Z,,AUTO
         5 002611   040005 100500                    MLR     fill='040'O
         5 002612   200025 000004                    ADSC9   KQ_PGSZ+11,,AUTO         cn=0,n=4
         5 002613   010770 000001 1                  ADSC9   OCMSG+9,A                cn=0,n=1

     1104     5800    6                            BINASC(ADDR(AJIT$->B$JIT.USER)->B$OCT(Z) +48);
     1105     5801    6                          END;

   5801  5 002614   200010 054100                    AOS     Z,,AUTO
         5 002615   200010 235100                    LDA     Z,,AUTO
         5 002616   000002 115007                    CMPA    2,DL
         5 002617   002572 604400 5                  TMOZ    s:5799

     1106     5802    5                     OCMSG.ACCN = AJIT$->B$JIT.ACCN;

   5802  5 002620   011064 470400 1                  LDP0    AJIT$
         5 002621   040000 100500                    MLR     fill='040'O
         5 002622   000001 000010                    ADSC9   1,,PR0                   cn=0,n=8
         5 002623   010771 000010 1                  ADSC9   OCMSG+10                 cn=0,n=8

     1107     5803    5                     OCMSG.C = ',';

   5803  5 002624   054000 236003                    LDQ     22528,DU
         5 002625   010773 552040 1                  STBQ    OCMSG+12,'40'O

     1108     5804    5                     OCMSG.UNAME = AJIT$->B$JIT.UNAME;

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:154  
   5804  5 002626   040000 100500                    MLR     fill='040'O
         5 002627   000003 000014                    ADSC9   3,,PR0                   cn=0,n=12
         5 002630   010773 200014 1                  ADSC9   OCMSG+12                 cn=1,n=12

     1109     5805    5                     CALL BINCHAR(OCMSG.SYSID,AJIT$->B$JIT.SYSID);

   5805  5 002631   000000 236100                    LDQ     0,,PR0
         5 002632   777777 376007                    ANQ     -1,DL
         5 002633   000000 235003                    LDA     0,DU
         5 002634   200024 757100                    STAQ    KQ_PGSZ+10,,AUTO
         5 002635   000000 301500                    BTD
         5 002636   200024 000010                    NDSC9   KQ_PGSZ+10,,AUTO         cn=0,s=lsgnf,sf=0,n=8
         5 002637   010776 430005 1                  NDSC9   OCMSG+15                 cn=2,s=nosgn,sf=0,n=5

     1110     5806    5                     AJIT$ = ADDR(AJIT$->B$JIT.CCBUF);

   5806  5 002640   011064 236000 1                  LDQ     AJIT$
         5 002641   000033 036003                    ADLQ    27,DU
         5 002642   011064 756000 1                  STQ     AJIT$

     1111     5807    5                     OCMSG.CCBUF = AJIT$->B$OCBUF;

   5807  5 002643   011064 470400 1                  LDP0    AJIT$
         5 002644   040000 100500                    MLR     fill='040'O
         5 002645   000000 000064                    ADSC9   0,,PR0                   cn=0,n=52
         5 002646   011000 000064 1                  ADSC9   OCMSG+17                 cn=0,n=52

     1112     5808    5                     END;

     1113     5809
     1114     5810    4                DP_GRAN=DP_GRAN+1;

   5810  5 002647   000476 235000 1                  LDA     DP_GRAN
         5 002650   000001 035007                    ADLA    1,DL
         5 002651   000476 755000 1                  STA     DP_GRAN

     1115     5811    4                IF DP_GRAN > LAST_GRAN THEN RETURN;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:155  

   5811  5 002652   000477 236000 1                  LDQ     LAST_GRAN
         5 002653   000476 116000 1                  CMPQ    DP_GRAN
         5 002654   002657 603000 5                  TRC     s:5813

   5811  5 002655   200016 221300                    LDX1  ! KQ_PGSZ+4,,AUTO
         5 002656   000001 702211                    TSX2  ! 1,X1

     1116     5812    4                END;                       /*DO IF %SCRCVR                       */
     1117     5813    3           END;                            /*DO 0 TO 511                         */

   5813  5 002657   011062 235000 1                  LDA     I
         5 002660   000001 035007                    ADLA    1,DL
         5 002661   011062 755000 1                  STA     I
         5 002662   011062 236000 1                  LDQ     I
         5 002663   002666 604000 5                  TMI     s:5814
         5 002664   010502 116000 1                  CMPQ    LAST_PAGE
         5 002665   002540 604400 5                  TMOZ    s:5789

     1118     5814    2      RETURN;

   5814  5 002666   200016 221300                    LDX1  ! KQ_PGSZ+4,,AUTO
         5 002667   000001 702211                    TSX2  ! 1,X1

   5806  5 002670                       READ_ERR     null
     1119     5815    2   READ_ERR: ;
     1120     5816    2      KWSQERR=1;

   5816  5 002670   000001 235007                    LDA     1,DL
         5 002671   011020 755000 1                  STA     KWSQERR

     1121     5817    2      ALTRETURN;

   5817  5 002672   200016 221300                    LDX1  ! KQ_PGSZ+4,,AUTO
         5 002673   000000 702211                    TSX2  ! 0,X1

   5816  5 002674                       WRITE_ERR    null
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:156  
     1122     5818
     1123     5819    2   WRITE_ERR: ;
     1124     5820    2      KWSQERR=2;

   5820  5 002674   000002 235007                    LDA     2,DL
         5 002675   011020 755000 1                  STA     KWSQERR

     1125     5821    2      ALTRETURN;

   5821  5 002676   200016 221300                    LDX1  ! KQ_PGSZ+4,,AUTO
         5 002677   000000 702211                    TSX2  ! 0,X1

     1126     5822
     1127     5823
     1128     5824    2   END KEY_WSQ;
     1129     5825        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:157  
     1130     5826        /*************************************************************
     1131     5827         *                                                           *
     1132     5828         *               REPORT ERR                                  *
     1133     5829         *                                                           *
     1134     5830         *************************************************************/
     1135     5831
     1136     5832    1   REPORT_ERR: PROC;

   5832  5 002700   200020 741300       REPORT_ERR   STX1  ! KQ_PGSZ+6,,AUTO
         5 002701   002703 710000 5                  TRA     s:5836

     1137     5833
     1138     5834                                                /* This entry to report ALTRET errors */
     1139     5835    2   REPORT_ALT_ERR: ENTRY;

   5835  5 002702   200020 741300       REPORT_ALT_* STX1  ! KQ_PGSZ+6,,AUTO

     1140     5836    2      PERRC=B$ALT.ERR & '777777777770'O;

   5836  5 002703   000000 470400 xsym               LDP0    B$TCB$
         5 002704   000000 471500                    LDP1    0,,PR0
         5 002705   100102 236100                    LDQ     66,,PR1
         5 002706   000230 376000 2                  ANQ     RESET_XCON+108
         5 002707   011016 756000 1                  STQ     PERRC

     1141     5837    2      FPT_ERRMSG.V.DCB# = B$ALT.DCB#;

   5837  5 002710   000000 471500                    LDP1    0,,PR0
         5 002711   100101 720100                    LXL0    65,,PR1
         5 002712   010670 740000 1                  STX0    FPT_ERRMSG+22

     1142     5838    2      RV_BUFF.RCVR2TRAP=B$ALT;

   5838  5 002713   000000 471500                    LDP1    0,,PR0
         5 002714   000000 100500                    MLR     fill='000'O
         5 002715   100000 000420                    ADSC9   0,,PR1                   cn=0,n=272
         5 002716   004170 000420 1                  ADSC9   RV_BUFF+824              cn=0,n=272
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:158  

     1143     5839    2      GOTO CHECK_MSG1;

   5839  5 002717   002737 710000 5                  TRA     CHECK_MSG1

     1144     5840
     1145     5841                                           /* This entry to report TCB Stack errors   */
     1146     5842    2   REPORT_STK_ERR: ENTRY;

   5842  5 002720   200020 741300       REPORT_STK_* STX1  ! KQ_PGSZ+6,,AUTO

     1147     5843    2      PERRC=B$EXCFR.ERR;

   5843  5 002721   000000 470400 xsym               LDP0    B$TCB$
         5 002722   000001 471500                    LDP1    1,,PR0
         5 002723   100102 236100                    LDQ     66,,PR1
         5 002724   011016 756000 1                  STQ     PERRC

     1148     5844    2      FPT_ERRMSG.V.DCB# = 0;

   5844  5 002725   000000 220003                    LDX0    0,DU
         5 002726   010670 740000 1                  STX0    FPT_ERRMSG+22

     1149     5845    2      RV_BUFF.RCVR2TRAP=B$EXCFR;

   5845  5 002727   000001 471500                    LDP1    1,,PR0
         5 002730   000000 100500                    MLR     fill='000'O
         5 002731   100000 000420                    ADSC9   0,,PR1                   cn=0,n=272
         5 002732   004170 000420 1                  ADSC9   RV_BUFF+824              cn=0,n=272

     1150     5846    2      CALL M$CLRSTK(FPT_CLRSTK) ALTRET(CHECK_MSG1);

   5846  5 002733   010700 630400 1                  EPPR0   FPT_CLRSTK
         5 002734   410013 713400                    CLIMB   alt,+4107
         5 002735   400000 401760                    pmme    nvectors=1
         5 002736   002737 702000 5                  TSX2    CHECK_MSG1

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:159  
   5845  5 002737                       CHECK_MSG1   null
     1151     5847
     1152     5848    2   CHECK_MSG1: ;
     1153     5849    2      RV_BUFF.RCVR2TR='1'B;

   5849  5 002737   001000 236007                    LDQ     512,DL
         5 002740   002503 256000 1                  ORSQ    RV_BUFF+3

     1154     5850    2      IF IRG_DEBUG + PRINT_MSG1 ~= 0

   5850  5 002741   000033 236000 2                  LDQ     IRG_DEBUG
         5 002742   011017 036000 1                  ADLQ    PRINT_MSG1
         5 002743   002746 600000 5                  TZE     s:5854

     1155     5851    3      THEN DO;

     1156     5852             /*  1st message is output only if PRINT_MSG1 or IRG_DEBUG is non-zero    */
     1157     5853    3           CALL PRINT_ERRM;

   5853  5 002744   002767 701000 5                  TSX1    PRINT_ERRM
         5 002745   000000 011000                    NOP     0

     1158     5854    3           END;

   5854  5 002746   002750 710000 5                  TRA     s:5858

     1159     5855
     1160     5856                                                /* This entry after REPORT_DFERR      */
     1161     5857    2   REPORT_ERRMSG: ENTRY;

   5857  5 002747   200020 741300       REPORT_ERRM* STX1  ! KQ_PGSZ+6,,AUTO

     1162     5858    2      CALL M$ERRMSG(FPT_ERRMSG) ALTRET(GET_ERRM);

   5858  5 002750   010642 630400 1                  EPPR0   FPT_ERRMSG
         5 002751   420000 713400                    CLIMB   alt,+8192
         5 002752   405000 401760                    pmme    nvectors=11
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:160  
         5 002753   002762 702000 5                  TSX2    GET_ERRM

     1163     5859    2      GOTO GET_ERRM;

   5859  5 002754   002762 710000 5                  TRA     GET_ERRM

     1164     5860
     1165     5861                                                /* This entry if no call to M$ERRMSG  */
     1166     5862             /*  The message is output only if PRINT_MSG1 or IRG_DEBUG is non-zero    */
     1167     5863    2   REPORT_DEBUG_MSG: ENTRY;

   5863  5 002755   200020 741300       REPORT_DEBU* STX1  ! KQ_PGSZ+6,,AUTO

     1168     5864    2      IF IRG_DEBUG + PRINT_MSG1 = 0 THEN RETURN;

   5864  5 002756   000033 236000 2                  LDQ     IRG_DEBUG
         5 002757   011017 036000 1                  ADLQ    PRINT_MSG1
         5 002760   002762 601000 5                  TNZ     GET_ERRM

   5864  5 002761   000001 702211                    TSX2  ! 1,X1

   5864  5 002762                       GET_ERRM     null
     1169     5865    2   GET_ERRM: ;
     1170     5866    2      CALL PRINT_ERRM;

   5866  5 002762   002767 701000 5                  TSX1    PRINT_ERRM
         5 002763   000000 011000                    NOP     0

     1171     5867    2      PRINT_MSG1=0;

   5867  5 002764   011017 450000 1                  STZ     PRINT_MSG1

     1172     5868    2      RETURN;

   5868  5 002765   200020 221300                    LDX1  ! KQ_PGSZ+6,,AUTO
         5 002766   000001 702211                    TSX2  ! 1,X1

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:161  
     1173     5869    2   END REPORT_ERR;
     1174     5870
     1175     5871        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:162  
     1176     5872
     1177     5873    1   PRINT_ERRM: PROC;

   5873  5 002767   200022 741300       PRINT_ERRM   STX1  ! KQ_PGSZ+8,,AUTO

     1178     5874    2      T$=ADDR(ERRM);

   5874  5 002770   000025 236000 6                  LDQ     21
         5 002771   200003 756100                    STQ     T$,,AUTO

     1179     5875    2      MSGINDX = SIZEC(ERRM) -1;

   5875  5 002772   000171 235007                    LDA     121,DL
         5 002773   011015 755000 1                  STA     MSGINDX

     1180     5876    3      DO WHILE (T$->B$MSG(MSGINDX) = ' ');

   5876  5 002774   200003 470500                    LDP0    T$,,AUTO
         5 002775   040000 106505                    CMPC    fill='040'O
         5 002776   000000 000001                    ADSC9   0,A,PR0                  cn=0,n=1
         5 002777   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
         5 003000   003011 601000 5                  TNZ     s:5879

     1181     5877    3           MSGINDX = MSGINDX-1;

   5877  5 003001   000001 336007                    LCQ     1,DL
         5 003002   011015 056000 1                  ASQ     MSGINDX

     1182     5878    3           END;

   5878  5 003003   200003 470500                    LDP0    T$,,AUTO
         5 003004   011015 235000 1                  LDA     MSGINDX
         5 003005   040000 106505                    CMPC    fill='040'O
         5 003006   000000 000001                    ADSC9   0,A,PR0                  cn=0,n=1
         5 003007   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
         5 003010   003001 600000 5                  TZE     s:5877

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:163  
     1183     5879    2      IF RCVR2_MODE = PRESLUG#

   5879  5 003011   010562 236000 1                  LDQ     RCVR2_MODE
         5 003012   000001 116007                    CMPQ    1,DL
         5 003013   003034 601000 5                  TNZ     s:5887

     1184     5880    3      THEN DO;

     1185     5881    3           CALL M$TEMPWROC(CRLF) ALTRET(CR_ERR);

   5881  5 003014   010632 630400 1                  EPPR0   CRLF
         5 003015   510000 713400                    CLIMB   alt,+36864
         5 003016   401000 401760                    pmme    nvectors=3
         5 003017   003020 702000 5                  TSX2    CR_ERR

   5881  5 003020                       CR_ERR       null
     1186     5882    3   CR_ERR: ;
     1187     5883    3           REPORT_OCT.BUFW_ = VECTOR(ERRM);

   5883  5 003020   000026 237000 6                  LDAQ    22
         5 003021   010624 757000 1                  STAQ    REPORT_OCT+2

     1188     5884    3           REPORT_OCT.BUFW_.BOUND = MSGINDX;

   5884  5 003022   011015 236000 1                  LDQ     MSGINDX
         5 003023   000020 736000                    QLS     16
         5 003024   010624 676000 1                  ERQ     REPORT_OCT+2
         5 003025   000034 376000 xsym               ANQ     B_VECTNIL+28
         5 003026   010624 656000 1                  ERSQ    REPORT_OCT+2

     1189     5885    3           CALL M$TEMPWROC(REPORT_OCT) ALTRET(ERRM_ERR);

   5885  5 003027   010622 630400 1                  EPPR0   REPORT_OCT
         5 003030   510000 713400                    CLIMB   alt,+36864
         5 003031   401000 401760                    pmme    nvectors=3
         5 003032   003065 702000 5                  TSX2    ERRM_ERR

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:164  
     1190     5886    3           END;

   5886  5 003033   003065 710000 5                  TRA     ERRM_ERR

     1191     5887    2      ELSE IF RCVR2_MODE = ONLINE#

   5887  5 003034   000004 116007                    CMPQ    4,DL
         5 003035   003052 601000 5                  TNZ     s:5894

     1192     5888    3           THEN DO;

     1193     5889    3                REPORT_UC.BUF_ = VECTOR(ERRM);

   5889  5 003036   000026 237000 6                  LDAQ    22
         5 003037   010574 757000 1                  STAQ    REPORT_UC+4

     1194     5890    3                REPORT_UC.BUF_.BOUND = MSGINDX;

   5890  5 003040   011015 236000 1                  LDQ     MSGINDX
         5 003041   000020 736000                    QLS     16
         5 003042   010574 676000 1                  ERQ     REPORT_UC+4
         5 003043   000034 376000 xsym               ANQ     B_VECTNIL+28
         5 003044   010574 656000 1                  ERSQ    REPORT_UC+4

     1195     5891    3                CALL M$WRITE(REPORT_UC) ALTRET(ERRM_ERR);

   5891  5 003045   010570 630400 1                  EPPR0   REPORT_UC
         5 003046   440001 713400                    CLIMB   alt,write
         5 003047   401400 401760                    pmme    nvectors=4
         5 003050   003065 702000 5                  TSX2    ERRM_ERR

     1196     5892    3                END;

   5892  5 003051   003065 710000 5                  TRA     ERRM_ERR

     1197     5893    3           ELSE DO;

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:165  
     1198     5894    3                REPORT_OC.MESS_ = VECTOR(ERRM);

   5894  5 003052   000026 237000 6                  LDAQ    22
         5 003053   010606 757000 1                  STAQ    REPORT_OC+2

     1199     5895    3                REPORT_OC.MESS_.BOUND = MSGINDX;

   5895  5 003054   011015 236000 1                  LDQ     MSGINDX
         5 003055   000020 736000                    QLS     16
         5 003056   010606 676000 1                  ERQ     REPORT_OC+2
         5 003057   000034 376000 xsym               ANQ     B_VECTNIL+28
         5 003060   010606 656000 1                  ERSQ    REPORT_OC+2

     1200     5896    3                CALL M$KEYIN(REPORT_OC) ALTRET(ERRM_ERR);

   5896  5 003061   010604 630400 1                  EPPR0   REPORT_OC
         5 003062   520000 713400                    CLIMB   alt,+40960
         5 003063   401400 401760                    pmme    nvectors=4
         5 003064   003065 702000 5                  TSX2    ERRM_ERR

     1201     5897    3                END;

   5895  5 003065                       ERRM_ERR     null
     1202     5898    2   ERRM_ERR: ;
     1203     5899    2      RETURN;

   5899  5 003065   200022 221300                    LDX1  ! KQ_PGSZ+8,,AUTO
         5 003066   000001 702211                    TSX2  ! 1,X1

     1204     5900    2   END PRINT_ERRM;
     1205     5901        %EJECT;
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:166  
     1206     5902    1   REPORT_DFERR: PROC;

   5902  5 003067   200016 741300       REPORT_DFERR STX1  ! KQ_PGSZ+4,,AUTO
         5 003070   003072 710000 5                  TRA     s:5906

     1207     5903
     1208     5904                                      /* This entry to print Slot # and the :DF name  */
     1209     5905    2   REPORT_DF_NAME: ENTRY;

   5905  5 003071   200016 741300       REPORT_DF_N* STX1  ! KQ_PGSZ+4,,AUTO

     1210     5906    2      DFMSG.SDF = ':DF';

   5906  5 003072   040000 100400                    MLR     fill='040'O
         5 003073   000070 000003 2                  ADSC9   RESET_XCON+12            cn=0,n=3
         5 003074   010754 400003 1                  ADSC9   DFMSG+9                  cn=2,n=3

     1211     5907    2      DFMSG.MONID = RV_BUFF.DMONID;

   5907  5 003075   000000 100400                    MLR     fill='000'O
         5 003076   002771 000004 1                  ADSC9   RV_BUFF+185              cn=0,n=4
         5 003077   010755 200004 1                  ADSC9   DFMSG+10                 cn=1,n=4

     1212     5908    2      CALL BINCHAR(DFMSG.DUMPC,RV_BUFF.IDCOUNT);

   5908  5 003100   002773 235000 1                  LDA     RV_BUFF+187
         5 003101   000044 773000                    LRL     36
         5 003102   200024 757100                    STAQ    KQ_PGSZ+10,,AUTO
         5 003103   000000 301500                    BTD
         5 003104   200024 000010                    NDSC9   KQ_PGSZ+10,,AUTO         cn=0,s=lsgnf,sf=0,n=8
         5 003105   010756 230003 1                  NDSC9   DFMSG+11                 cn=1,s=nosgn,sf=0,n=3
         5 003106   003110 710000 5                  TRA     s:5913

     1213     5909
     1214     5910                                           /* This entry to print only the Slot #     */
     1215     5911    2   REPORT_DF_SLOT: ENTRY;

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:167  
   5911  5 003107   200016 741300       REPORT_DF_S* STX1  ! KQ_PGSZ+4,,AUTO

     1216     5912
     1217     5913    2      PERRC=B$ALT.ERR & '777777777770'O;

   5913  5 003110   000000 470400 xsym               LDP0    B$TCB$
         5 003111   000000 471500                    LDP1    0,,PR0
         5 003112   100102 236100                    LDQ     66,,PR1
         5 003113   000230 376000 2                  ANQ     RESET_XCON+108
         5 003114   011016 756000 1                  STQ     PERRC

     1218     5914    2      FPT_ERRMSG.V.DCB# = B$ALT.DCB#;

   5914  5 003115   000000 471500                    LDP1    0,,PR0
         5 003116   100101 720100                    LXL0    65,,PR1
         5 003117   010670 740000 1                  STX0    FPT_ERRMSG+22

     1219     5915                                           /* Save for later call to REPORT_ERRMSG    */
     1220     5916    2      T$=ADDR(DFMSG);

   5916  5 003120   000030 236000 6                  LDQ     24
         5 003121   200003 756100                    STQ     T$,,AUTO

     1221     5917    2      ERRM.M = T$->B$DFMSG;

   5917  5 003122   200003 471500                    LDP1    T$,,AUTO
         5 003123   040000 100500                    MLR     fill='040'O
         5 003124   100000 000060                    ADSC9   0,,PR1                   cn=0,n=48
         5 003125   010704 400170 1                  ADSC9   ERRM                     cn=2,n=120

     1222     5918    2      CALL REPORT_DEBUG_MSG;

   5918  5 003126   002755 701000 5                  TSX1    REPORT_DEBUG_MSG
         5 003127   000000 011000                    NOP     0

     1223     5919
     1224     5920    2      DFMSG.SDF=' ';
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:168  

   5920  5 003130   040000 100400                    MLR     fill='040'O
         5 003131   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
         5 003132   010754 400003 1                  ADSC9   DFMSG+9                  cn=2,n=3

     1225     5921    2      DFMSG.MONID.VER=' ';

   5921  5 003133   000004 236000 6                  LDQ     4
         5 003134   010755 552034 1                  STBQ    DFMSG+10,'34'O

     1226     5922    2      DFMSG.MONID.BOOT=' ';

   5922  5 003135   040000 236003                    LDQ     16384,DU
         5 003136   010756 552040 1                  STBQ    DFMSG+11,'40'O

     1227     5923    2      DFMSG.DUMPC=' ';

   5923  5 003137   000004 236000 6                  LDQ     4
         5 003140   010756 552034 1                  STBQ    DFMSG+11,'34'O

     1228     5924    2      RETURN;

   5924  5 003141   200016 221300                    LDX1  ! KQ_PGSZ+4,,AUTO
         5 003142   000001 702211                    TSX2  ! 1,X1
     1229     5925    2   END REPORT_DFERR;
     1230     5926    1   END RCVR2;
     1231     5927        %EOD;

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:169  
--  Include file information  --

   U$JIT_C.:E05TOU  cannot be made into a system file and is referenced.
   NI$TABLES.:E05TOU  is referenced.
   IR_DATA_M.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   KQ_SUBS_C.:E05TOU  is referenced.
   HF_DATA_R.:E05TOU  is referenced.
   KQM_MAC_C.:E05TOU  is referenced.
   I$DISK.:E05TOU  cannot be made into a system file and is referenced.
   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   FM$GRAN.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure RCVR2.
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:170  

 **** Variables and constants ****

  ****  Section 001  Data  RCVR2

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

 11064-0-0/w PTR         r     1 AJIT$                    500-0-0/w UBIN        r     1 APAGE(0:1023)
 35066-0-0/w PTR         r     1 B$CGPT$                11024-0-0/d REMB        r     1 CLSDP_UNWIND
   142-0-0/d STRC(1080)  r     1 CLS_DP                   322-0-0/d STRC(1080)  r     1 CLS_EO
 10632-0-0/d STRC(288)   r     1 CRLF                   10561-0-0/w UBIN        r     1 DDIR_GRAN
 10743-0-0/c STRC(432)   r     1 DFMSG                    470-0-0/w STRC(207)   r     1 DF_CODE
 10510-0-0/d STRC(72)    r     1 DF_KEY                 10504-0-0/d STRC(99)    r     1 DF_NAME
 10560-0-0/w SBIN        r     1 DINDEX                   476-0-0/w UBIN        r     1 DP_GRAN
   460-0-0/c CHAR(6)     r     1 DUMP_DT                  376-0-0/d STRC(432)   r     1 DUMP_TIME
   462-0-0/c CHAR(8)     r     1 DUMP_TM                10704-0-0/c STRC(1098)  r     1 ERRM
 10501-0-0/w SBIN        r     1 FIRST_PAGE             10700-0-0/d STRC(144)   r     1 FPT_CLRSTK
 10642-0-0/d STRC(936)   r     1 FPT_ERRMSG             11062-0-0/w UBIN        r     1 I
 11063-0-0/w UBIN        r     1 J                      11020-0-0/w SBIN        r     1 KWSQERR
   477-0-0/w UBIN        r     1 LAST_GRAN              10502-0-0/w SBIN        r     1 LAST_PAGE
 10500-0-0/w UBIN        r     1 MAX_CG_PAGE            11015-0-0/w SBIN        r     1 MSGINDX
   412-0-0/c STRC(288)   r     1 NEWDFN                 10512-0-0/w STRC(1224)  r     1 NODEDIR
 10757-0-0/c STRC(1080)  r     1 OCMSG                  10757-0-0/c CHAR(120)   r     1 OCMSG_C
     0-0-0/d STRC(2088)  r     1 OPN_DP                   200-0-0/d STRC(2088)  r     1 OPN_EO
 11016-0-0/b BIT         r     1 PERRC                  11017-0-0/w SBIN        r     1 PRINT_MSG1
 11032-0-0/d STRC(432)   r     1 R2BTIME                11046-0-0/d STRC(432)   r     1 R2ETIME
   110-0-0/d STRC(504)   r     1 RAPAGE                 10554-0-0/w STRC        r     1 RCVR2D(0:3)
 10564-0-0/w SBIN        r     1 RCVR2_HIGHDA           10563-0-0/w SBIN        r     1 RCVR2_LOWDA
 10562-0-0/w SBIN        r     1 RCVR2_MODE             10566-0-0/w SBIN        r     1 RDUMP_HIGHDA
 10565-0-0/w SBIN        r     1 RDUMP_LOWDA               72-0-0/d STRC(504)   r     1 RD_DP
   360-0-0/d STRC(504)   r     1 READ_NDIR              10604-0-0/d STRC(504)   r     1 REPORT_OC
 10622-0-0/d STRC(288)   r     1 REPORT_OCT             10570-0-0/d STRC(432)   r     1 REPORT_UC
 11066-0-0/d STRC)       r     1 RG_CGPT                  422-0-0/d STRC(1080)  r     1 RNM_EO
  2500-0-0/d STRC(36864) r     1 RV_BUFF                 4500-0-0/d STRC(36864) r     1 RV_USRDIR
  6500-0-0/d STRC(36864) r     1 RV_WSQD                  464-0-0/d STRC(90)    r     1 SYSPACK
 11022-0-0/d REMB        r     1 TRAP_UNWIND            11026-0-0/w UBIN        r     1 TSTAMP1
 11027-0-0/w UBIN        r     1 TSTAMP2                10674-0-0/d STRC(144)   r     1 VLR_ERRMSG
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:171  
   306-0-0/d STRC(432)   r     1 WAPAGE                   272-0-0/d STRC(432)   r     1 WTEO
   126-0-0/d STRC(432)   r     1 WT_DP

  ****  Section 002 RoData RCVR2

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    32-0-0/b BIT         r     1 B_CRLF                     6-0-0/c CHAR(64)    r     1 FCGTBL
    33-0-0/w SBIN        r     1 IRG_DEBUG                 26-0-0/c CHAR(2)     r     1 MTBL
    54-0-0/d STRC(216)   r     1 RESET_XCON                46-0-0/d STRC(216)   r     1 SET_XCON
    30-0-0/d CHAR(8)     r     1 SYSTAC                    34-0-0/d STRC(360)   r     1 TRAPFPT
     0-0-0/d STRC(216)   r     1 WAIT10

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     6-0-0/w UBIN        r     1 INSTID                     5-0-0/w UBIN        r     1 JITSPG
     4-0-0/w UBIN        r     1 JITSZ                     11-0-0/w SBIN        r     1 KQ_DSBSZ
    12-0-0/w SBIN        r     1 KQ_PGSZ                    7-0-0/w UBIN        r     1 NODEIDX
     3-0-0/w PTR         r     1 T$                        10-0-0/w SBIN        r     1 Z

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$JIT$                     0-0-0/w PTR         r     1 B$TCB$
     0-0-0/c CHAR(64)    r     1 COPYRIGHT

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:172  
     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/w BIT (72)    r     1 B$BIT72
     0-0-0/c STRC(117)   r     1 B$CCBUF                    0-0-0/c CHAR        r     1 B$CHAR(0:2)
     0-0-0/c CHAR(48)    r     1 B$DFMSG                    0-0-0/w STRC(2448)  r     1 B$EXCFR
     0-0-0/d STRC(8856)  r     1 B$JIT                      0-0-0/c CHAR        r     1 B$MSG(0:126)
     0-0-0/c CHAR(64)    r     1 B$OCBUF                    0-0-0/b UBIN(3)     r     1 B$OCT(0:2)
     0-0-0/w STRC(144)   r     1 B$TCB                      0-0-0/d STRC(36864) r     1 B$WSQD
     0-0-0/d ASTR(3528)  r     1 F$DCB                      0-0-0/w STRC(36864) r     1 FM$VID
     0-0-0/w STRC(8640)  r     1 I$DISKDIR                  0-0-0/d STRC(1944)  r     1 KQ$DSB
     0-0-0N  NULL        r     1 M$DP                       0-0-0N  NULL        r     1 M$EO
     0-0-0N  NULL        r     1 M$UC                       0-0-0/d STRC(36864) r     1 RV$BUFF
     0-0-0/c ASTR(9)     r     1 VDFN


   Procedure RCVR2 requires 1635 words for executable code.
   Procedure RCVR2 requires 24 words of local(AUTO) storage.
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:173  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:174  
          MINI XREF LISTING

AJIT$
      4988**DCL      5093<<ASSIGN   5094>>IF       5098>>ASSIGN   5352<<ASSIGN   5356>>IF       5358>>ASSIGN
      5359>>ASSIGN   5362<<ASSIGN   5362>>ASSIGN   5797<<ASSIGN   5799>>ASSIGN   5802>>ASSIGN   5804>>ASSIGN
      5805>>CALLBLT  5806<<ASSIGN   5806>>ASSIGN   5807>>ASSIGN
APAGE
      4391**DCL      3841--DCLINIT  3842--DCLINIT  3883--DCLINIT  3884--DCLINIT  4120--DCLINIT  4121--DCLINIT
      5239--ASSIGN   5241--ASSIGN   5352--ASSIGN   5421--ASSIGN   5427--ASSIGN   5444--ASSIGN   5447--ASSIGN
      5465--ASSIGN   5483--ASSIGN   5490--ASSIGN   5520--ASSIGN   5528--ASSIGN   5592--ASSIGN   5664--ASSIGN
      5668--ASSIGN   5695<<ASSIGN   5696--ASSIGN   5797--ASSIGN
B$ALT
      4601**DCL      5838>>ASSIGN
B$ALT.CODE
      4601**DCL      4601--REDEF    4602--REDEF    4602--REDEF
B$ALT.DCB#
      4602**DCL      5837>>ASSIGN   5914>>ASSIGN
B$ALT.ERR
      4602**DCL      5836>>ASSIGN   5913>>ASSIGN
B$ALT.ERR.CODE
      4603**DCL      5285>>IF
B$ALT.ERR.ERR#
      4603**DCL      4603--REDEF    5182>>IF
B$ALT.EVID
      4602**DCL      4602--REDEF    4602--REDEF
B$BIT72
      4490**DCL      5551<<ASSIGN
B$CCBUF.INDX
      4574**DCL      5098>>ASSIGN
B$CCBUF.SUA
      4573**DCL      5094>>IF
B$CGPT$
      5046**DCL      5514<<ASSIGN   5530>>ASSIGN   5566>>ASSIGN   5568<<ASSIGN   5568>>ASSIGN
B$CHAR
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:175  
      4578**DCL      5308<<ASSIGN   5799<<ASSIGN
B$DFMSG
      4835**DCL      5917>>ASSIGN
B$EXCFR
      4608**DCL      5845>>ASSIGN
B$EXCFR.ASL
      4608**DCL      4608--REDEF
B$EXCFR.ERR
      4622**DCL      5843>>ASSIGN
B$EXCFR.ERR.ERR#
      4622**DCL      4622--REDEF
B$EXCFR.EVID
      4621**DCL      4621--REDEF    4622--REDEF
B$EXCFR.IR
      4609**DCL      4609--REDEF
B$EXCFR.PREVSZ
      4608**DCL      4608--REDEF
B$EXCFR.SUBC
      4620**DCL      4620--REDEF    4621--REDEF    4621--REDEF
B$JIT
      3459**DCL      5346--ASSIGN   5359--ASSIGN
B$JIT.ACCN
      3464**DCL      5802>>ASSIGN
B$JIT.CCBUF
      3552**DCL      5093--ASSIGN   5806--ASSIGN
B$JIT.CPFLAGS1.SLEAZE
      3558**DCL      3558--REDEF
B$JIT.ERR.MID
      3465**DCL      3465--REDEF
B$JIT.MODE
      3459**DCL      5090>>IF
B$JIT.SYSID
      3464**DCL      5087>>IF       5805>>CALLBLT
B$JIT.UNAME
      3464**DCL      5804>>ASSIGN
B$JIT.USER
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:176  
      3464**DCL      5356>>IF       5358>>ASSIGN   5799--ASSIGN
B$JIT$
      3636**DCL      3459--IMP-PTR  5087>>IF       5090>>IF       5093>>ASSIGN
B$MSG
      4797**DCL      5876>>DOWHILE
B$OCBUF
      4576**DCL      5807>>ASSIGN
B$OCT
      4579**DCL      5308>>ASSIGN   5799>>ASSIGN
B$TCB.ALT$
      4597**DCL      5182>>IF       5285>>IF       5836>>ASSIGN   5837>>ASSIGN   5838>>ASSIGN   5913>>ASSIGN
      5914>>ASSIGN
B$TCB.STK$
      4597**DCL      5843>>ASSIGN   5845>>ASSIGN
B$TCB$
      4625**DCL      5182>>IF       5285>>IF       5836>>ASSIGN   5837>>ASSIGN   5838>>ASSIGN   5843>>ASSIGN
      5845>>ASSIGN   5913>>ASSIGN   5914>>ASSIGN
B$WSQD
      4484**DCL      5428>>ASSIGN   5448>>ASSIGN   5466<<ASSIGN   5491>>ASSIGN   5496--ASSIGN   5529>>ASSIGN
      5530<<ASSIGN   5530>>ASSIGN   5566<<ASSIGN   5593>>ASSIGN   5669>>ASSIGN
B$WSQD.PG.SFLG
      4484**DCL      4484--REDEF
B_CRLF
      4791**DCL      4715--DCLINIT  4716--DCLINIT
CALL_DFERR IN PROCEDURE CONVERT_DUMP
      5723**LABEL    5720--GOTO     5734--GOTO
CHECK_MSG1 IN PROCEDURE REPORT_ERR
      5845**LABEL    5839--GOTO     5846--CALLALT
CLSDP_UNWIND
      4928**DCL      5141<<REMEMBR  5161<<REMEMBR  5208>>UNWIND
CLS_DP
      3922**DCL      5142<>CALL     5162<>CALL
CLS_DP.SN_
      3922**DCL      3922--REDEF
CLS_DP.UTL_
      3923**DCL      3923--REDEF
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:177  
CLS_DP.V
      3927**DCL      3922--DCLINIT
CLS_DP.V.EXPIRE#
      3937**DCL      3937--REDEF
CLS_DP.V.TYPE#
      3935**DCL      3935--REDEF
CLS_DP.V.XTNSIZE#
      3932**DCL      3932--REDEF    3934--REDEF
CLS_DP_ERR
      5200**LABEL    5142--CALLALT  5162--CALLALT
CLS_DP_XIT
      5154**LABEL    5140--CALLALT  5197--GOTO
CLS_EO
      4160**DCL      5699<>CALL     5729<>CALL
CLS_EO.SN_
      4160**DCL      4160--REDEF
CLS_EO.UTL_
      4161**DCL      4161--REDEF
CLS_EO.V
      4165**DCL      4160--DCLINIT
CLS_EO.V.EXPIRE#
      4175**DCL      4175--REDEF
CLS_EO.V.TYPE#
      4173**DCL      4173--REDEF
CLS_EO.V.XTNSIZE#
      4170**DCL      4170--REDEF    4172--REDEF
CLS_EO_ERR IN PROCEDURE CONVERT_DUMP
      5750**LABEL    5699--CALLALT  5729--CALLALT
CONVERT_DUMP
      5225**PROC     5140--CALL     5155--CALL
COPYRIGHT
      3640**DCL      5332--ASSIGN
CRLF
      4715**DCL      5881<>CALL
CRLF.V
      4718**DCL      4715--DCLINIT
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:178  
CR_ERR IN PROCEDURE PRINT_ERRM
      5881**LABEL    5881--CALLALT
CURCG_DONE IN PROCEDURE CONVERT_DUMP
      5609**LABEL    5611--GOTO
DDIR_GRAN
      4569**DCL      3882--DCLINIT  5139<<ASSIGN   5154<<ASSIGN   5229>>IF       5238>>ASSIGN   5256>>ASSIGN
DFMSG
      4799**DCL      5916--ASSIGN
DFMSG.DUMPC
      4809**DCL      5908<<CALLBLT  5923<<ASSIGN
DFMSG.M
      4803**DCL      5231<<ASSIGN   5262<<ASSIGN   5270<<ASSIGN   5295<<ASSIGN   5711<<ASSIGN   5719<<ASSIGN
      5723<<ASSIGN   5733<<ASSIGN
DFMSG.MONID
      4806**DCL      5907<<ASSIGN
DFMSG.MONID.BOOT
      4808**DCL      5922<<ASSIGN
DFMSG.MONID.VER
      4807**DCL      5921<<ASSIGN
DFMSG.SDF
      4805**DCL      5906<<ASSIGN   5920<<ASSIGN
DFMSG.SLOTN
      4801**DCL      5227<<CALLBLT
DF_CODE
      4362**DCL      4163--DCLINIT
DF_CODE.Q
      4363**DCL      4362--DCLINIT
DF_CODE.Q.V.VEHICLE#
      4380**DCL      5276<<CALLBLT  5281<<CALLBLT  5282<<CALLBLT  5306>>ASSIGN
DF_KEY
      4510**DCL      4084--DCLINIT  4119--DCLINIT  4201--DCLINIT  4202--DCLINIT  5129<<ASSIGN
DF_KEY.K
      4514**DCL      5312<<ASSIGN   5338<<ASSIGN   5374<<ASSIGN   5392<<ASSIGN   5417<<ASSIGN   5467<<ASSIGN
      5477<<ASSIGN   5534<<ASSIGN   5542<<ASSIGN   5574<<ASSIGN   5623<<ASSIGN   5649<<ASSIGN   5659<<ASSIGN
      5687<<ASSIGN
DF_KEY.K.STYP
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:179  
      4514**DCL      5349<<ASSIGN   5379<<ASSIGN   5494<<ASSIGN   5536<<ASSIGN   5545<<ASSIGN   5582<<ASSIGN
      5626<<ASSIGN   5656<<ASSIGN   5672<<ASSIGN
DF_KEY.K.TYP
      4514**DCL      5333<<ASSIGN   5397<<ASSIGN   5430<<ASSIGN   5468<<ASSIGN   5478<<ASSIGN   5535<<ASSIGN
      5543<<ASSIGN   5581<<ASSIGN   5625<<ASSIGN   5671<<ASSIGN
DF_KEY.K.USR#
      4514**DCL      5358<<ASSIGN   5431<<ASSIGN   5469<<ASSIGN   5493<<ASSIGN   5499<<ASSIGN   5537<<ASSIGN
      5544<<ASSIGN   5560<<ASSIGN   5583<<ASSIGN   5590<<ASSIGN   5632<<ASSIGN   5674<<ASSIGN
DF_KEY.K.VP#
      4515**DCL      5385<<ASSIGN   5385>>ASSIGN   5403<<ASSIGN   5403>>ASSIGN   5409<<ASSIGN   5456<<ASSIGN
      5495<<ASSIGN   5538<<ASSIGN   5546<<ASSIGN   5584<<ASSIGN   5602<<ASSIGN   5606>>IF       5613<<ASSIGN
      5613>>ASSIGN   5636<<ASSIGN   5638<<ASSIGN   5639<<ASSIGN   5792<<ASSIGN
DF_KEY.L
      4514**DCL      5130<<ASSIGN
DF_NAME
      4496**DCL      4021--DCLINIT  5768--ASSIGN   5770--CALLBLT  5770--CALLBLT  5770--CALLBLT
DF_NAME.DUMPC
      4496**DCL      5127<<ASSIGN   5275<<CALLBLT
DF_NAME.L
      4496**DCL      5124<<ASSIGN
DF_NAME.MONID
      4496**DCL      4496--REDEF    5126<<ASSIGN
DF_NAME.N1
      4496**DCL      5125<<ASSIGN
DINDEX
      4567**DCL      5098<<ASSIGN   5099>>IF       5139>>ASSIGN   5152<<ASSIGN   5153>>DOWHILE  5154>>ASSIGN
      5157<<ASSIGN   5157>>ASSIGN   5227>>CALLBLT
DP_GRAN
      4388**DCL      3795--DCLINIT  3796--DCLINIT  3839--DCLINIT  3840--DCLINIT  5121<<ASSIGN   5238<<ASSIGN
      5348<<ASSIGN   5365<<ASSIGN   5365>>ASSIGN   5366>>IF       5378<<ASSIGN   5384<<ASSIGN   5384>>ASSIGN
      5396<<ASSIGN   5402<<ASSIGN   5402>>ASSIGN   5407<<ASSIGN   5407>>ASSIGN   5412<<ASSIGN   5412>>ASSIGN
      5422<<ASSIGN   5445<<ASSIGN   5449<<ASSIGN   5459<<ASSIGN   5459>>ASSIGN   5463<<ASSIGN   5484<<ASSIGN
      5500<<ASSIGN   5500>>ASSIGN   5521<<ASSIGN   5526<<ASSIGN   5526>>ASSIGN   5578<<ASSIGN   5589<<ASSIGN
      5589>>ASSIGN   5610<<ASSIGN   5610>>ASSIGN   5611>>IF       5631<<ASSIGN   5641<<ASSIGN   5641>>ASSIGN
      5654<<ASSIGN   5665<<ASSIGN   5810<<ASSIGN   5810>>ASSIGN   5811>>IF
DUMP_DT
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:180  
      4328**DCL      4243--DCLINIT  4244--DCLINIT  5770>>CALLBLT
DUMP_TIME
      4243**DCL      5767<>CALL
DUMP_TIME.V
      4247**DCL      4243--DCLINIT
DUMP_TM
      4329**DCL      4245--DCLINIT  4246--DCLINIT  5770>>CALLBLT
EO_ERR IN PROCEDURE CONVERT_DUMP
      5739**LABEL    5329--CALLALT  5334--CALLALT  5340--CALLALT  5360--CALLALT  5383--CALLALT  5401--CALLALT
      5411--CALLALT  5457--CALLALT  5470--CALLALT  5497--CALLALT  5539--CALLALT  5547--CALLALT  5587--CALLALT
      5609--CALLALT  5640--CALLALT  5658--CALLALT  5751--GOTO
ERRM
      4793**DCL      4649--DCLINIT  4650--DCLINIT  4676--DCLINIT  4677--DCLINIT  4697--DCLINIT  4698--DCLINIT
      5874--ASSIGN   5875--ASSIGN   5883--ASSIGN   5889--ASSIGN   5894--ASSIGN
ERRM.M
      4795**DCL      4737--DCLINIT  5101<<ASSIGN   5168<<ASSIGN   5187<<ASSIGN   5193<<ASSIGN   5200<<ASSIGN
      5205<<ASSIGN   5213<<ASSIGN   5700<<ASSIGN   5737<<ASSIGN   5744<<ASSIGN   5754<<ASSIGN   5917<<ASSIGN
ERRM_ERR IN PROCEDURE PRINT_ERRM
      5895**LABEL    5885--CALLALT  5891--CALLALT  5896--CALLALT
ERR_DP
      5193**LABEL    5201--GOTO
EXIT_EO IN PROCEDURE CONVERT_DUMP
      5725**LABEL    5747--GOTO
F$DCB.ACTPOS
      1982**DCL      1982--REDEF
F$DCB.ARS
      1957**DCL      1957--REDEF    5283>>DOUNTIL  5291>>IF
F$DCB.ATTR
      1975**DCL      1976--REDEF
F$DCB.BORROW
      1990**DCL      1990--REDEF    1990--REDEF    1990--REDEF
F$DCB.DCBNAME.L
      2004**DCL      2004--IMP-SIZ
F$DCB.EOMCHAR
      1961**DCL      1961--REDEF
F$DCB.FLDID
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:181  
      1985**DCL      1985--REDEF
F$DCB.FORM$
      1979**DCL      1979--REDEF
F$DCB.FSECT
      1995**DCL      1995--REDEF
F$DCB.FSN
      1972**DCL      1972--REDEF    1972--REDEF    1973--REDEF
F$DCB.HEADER$
      1978**DCL      1978--REDEF
F$DCB.IXTNSIZE
      1976**DCL      1976--REDEF
F$DCB.LASTSTA$
      1966**DCL      1966--REDEF
F$DCB.LVL
      1991**DCL      1991--REDEF
F$DCB.NAME.C
      1966**DCL      1966--REDEF
F$DCB.NOEOF
      1987**DCL      1987--REDEF
F$DCB.NRECS
      1977**DCL      1977--REDEF
F$DCB.NRECX
      1996**DCL      1996--REDEF
F$DCB.OHDR
      1988**DCL      1988--REDEF
F$DCB.ORG
      1971**DCL      1971--REDEF
F$DCB.PRECNO
      1994**DCL      1994--REDEF
F$DCB.RCSZ
      1999**DCL      1999--REDEF
F$DCB.RES
      1967**DCL      1967--REDEF
F$DCB.SETX
      1979**DCL      1979--REDEF
F$DCB.TAB$
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:182  
      1978**DCL      1979--REDEF
F$DCB.TDA
      1993**DCL      1993--REDEF
F$DCB.WSN
      1968**DCL      1968--REDEF
FCGTBL
      4382**DCL      5276>>CALLBLT  5276>>CALLBLT  5276>>CALLBLT
FIND_XIT
      5154**LABEL    5161--REMEMBR  5190--GOTO     5216--GOTO
FIRST_PAGE
      4493**DCL      5433<<ASSIGN   5501<<ASSIGN   5512<<ASSIGN   5563<<ASSIGN   5563>>ASSIGN   5675<<ASSIGN
      5792>>ASSIGN
FM$VID.DTT
      4398**DCL      4398--REDEF
FM$VID.INSTID
      4396**DCL      5120>>ASSIGN
FM$VID.SYSDIRDA
      4396**DCL      5121>>ASSIGN
FPT_CLRSTK
      4787**DCL      5846<>CALL
FPT_CLRSTK.V
      4787**DCL      4787--DCLINIT
FPT_ERRMSG
      4736**DCL      5858<>CALL
FPT_ERRMSG.V
      4740**DCL      4736--DCLINIT
FPT_ERRMSG.V.DCB#
      4740**DCL      5837<<ASSIGN   5844<<ASSIGN   5914<<ASSIGN
GET_ERRM IN PROCEDURE REPORT_ERR
      5864**LABEL    5858--CALLALT  5859--GOTO
I
      4986**DCL      5355<<DOINDEX  5381<<DOINDEX  5399<<DOINDEX  5408<<DOINDEX  5409>>ASSIGN   5453<<ASSIGN
      5454>>DOWHILE  5461<<ASSIGN   5461>>ASSIGN   5599<<DOINDEX  5600>>IF       5602>>ASSIGN   5603>>ASSIGN
      5634<<DOINDEX  5636>>IF       5637>>IF       5638>>ASSIGN   5639>>ASSIGN   5788<<DOINDEX  5789>>IF
      5792>>ASSIGN   5795>>IF
I$DISKDIR.DUMP.DA
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:183  
      2206**DCL      5134>>ASSIGN
I$DISKDIR.DUMP.SIZE
      2207**DCL      5135>>ASSIGN
I$DISKDIR.FW.NAME
      2255**DCL      2256--REDEF
I$DISKDIR.MONID.M
      2215**DCL      2218--REDEF    5126>>ASSIGN
I$DISKDIR.RCVR2
      2209**DCL      5133>>ASSIGN
IGL$HLP
      3638**DCL-ENT  5170--CALL
INSTID
      4983**DCL      5120<<ASSIGN   5337>>ASSIGN
IRG$TRAP
      4892**DCL-ENT  4880--DCLINIT  4880--DCLINIT  4881--DCLINIT  4881--DCLINIT  4909--DCLINIT
IRG_DEBUG
      4844**DCL      5850>>IF       5864>>IF
J
      4987**DCL      5451<<ASSIGN   5452<<ASSIGN   5456>>ASSIGN   5458>>ASSIGN   5458>>ASSIGN   5460<<ASSIGN
      5460>>ASSIGN   5480<<DOINDEX  5481>>IF       5484>>ASSIGN   5485>>ASSIGN   5485>>ASSIGN   5494>>ASSIGN
      5517<<DOINDEX  5518>>IF       5521>>ASSIGN   5522>>ASSIGN   5522>>ASSIGN   5538>>ASSIGN   5546>>ASSIGN
      5550>>IF       5553>>IF       5555>>ASSIGN   5605<<DOINDEX  5628<<DOINDEX  5629>>IF       5631>>ASSIGN
      5632>>ASSIGN   5634>>DOINDEX  5661<<DOINDEX  5662>>IF       5665>>ASSIGN   5666>>ASSIGN   5666>>ASSIGN
      5672>>ASSIGN   5674>>ASSIGN   5795>>IF
JITSPG
      4982**DCL      5347<<ASSIGN   5355>>DOINDEX
JITSZ
      4981**DCL      5346<<ASSIGN   5347>>ASSIGN   5362>>ASSIGN
JITS_DONE IN PROCEDURE CONVERT_DUMP
      5359**LABEL    5356--GOTO
KEY_WSQ
      5786**PROC     5435--CALL     5503--CALL     5561--CALL     5677--CALL
KQ$DSB.ASR
      5009**DCL      5018--REDEF
KQ$DSB.ASR.BOUND
      5013**DCL      5597>>ASSIGN
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:184  
KQ$DSB.DESC.BASE
      5035**DCL      5602>>ASSIGN
KQ$DSB.DESC.BOUND
      5028**DCL      5603>>ASSIGN
KQ$DSB.DESC.FLG
      5029**DCL      5030--REDEF    5600>>IF
KQ_DSBSZ
      4991**DCL      5597<<ASSIGN   5599>>DOINDEX
KQ_PGSZ
      4992**DCL      5603<<ASSIGN   5605>>DOINDEX
KWSQERR
      4846**DCL      5750>>IF       5816<<ASSIGN   5820<<ASSIGN
LAST_GRAN
      4389**DCL      5423<<ASSIGN   5485<<ASSIGN   5522<<ASSIGN   5579<<ASSIGN   5611>>IF       5666<<ASSIGN
      5811>>IF
LAST_PAGE
      4494**DCL      5434<<ASSIGN   5502<<ASSIGN   5513<<ASSIGN   5554<<ASSIGN   5555<<ASSIGN   5558>>IF
      5676<<ASSIGN   5788>>DOINDEX
M$CLOSE
      1275**DCL-ENT  5142--CALL     5162--CALL     5699--CALL     5729--CALL     5773--CALL
M$CLRSTK
      1333**DCL-ENT  5846--CALL
M$EO
      4336**DCL      5283--DOUNTIL  5291--IF
M$ERR
      1287**DCL-ENT  5104--CALL
M$ERRMSG
      1338**DCL-ENT  5858--CALL
M$EXIT
      1287**DCL-ENT  5146--CALL     5173--CALL
M$KEYIN
      1280**DCL-ENT  5896--CALL
M$OPEN
      1275**DCL-ENT  5115--CALL     5284--CALL
M$READ
      1276**DCL-ENT  5117--CALL     5122--CALL     5240--CALL     5313--CALL     5353--CALL     5382--CALL
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:185  
      5400--CALL     5410--CALL     5426--CALL     5446--CALL     5455--CALL     5464--CALL     5488--CALL
      5525--CALL     5586--CALL     5608--CALL     5635--CALL     5655--CALL     5667--CALL     5791--CALL
M$RETRYS
      1332**DCL-ENT  5289--CALL
M$SENV
      1331**DCL-ENT  5287--CALL
M$TEMPWROC
      1319**DCL-ENT  5881--CALL     5885--CALL
M$TIME
      1342**DCL-ENT  5236--CALL     5683--CALL     5767--CALL
M$TRAP
      1329**DCL-ENT  5113--CALL
M$WAIT
      1333**DCL-ENT  5184--CALL     5288--CALL
M$WRITE
      1276**DCL-ENT  5251--CALL     5329--CALL     5334--CALL     5340--CALL     5360--CALL     5383--CALL
      5401--CALL     5411--CALL     5457--CALL     5470--CALL     5497--CALL     5539--CALL     5547--CALL
      5587--CALL     5609--CALL     5640--CALL     5658--CALL     5689--CALL     5698--CALL     5793--CALL
      5891--CALL
M$XCON
      1330**DCL-ENT  5111--CALL     5144--CALL     5164--CALL
MAX_CG_PAGE
      4492**DCL      5515<<ASSIGN   5553>>IF       5555>>ASSIGN
MORE_JITS IN PROCEDURE CONVERT_DUMP
      5349**LABEL    5367--GOTO
MSGINDX
      4837**DCL      5875<<ASSIGN   5876>>DOWHILE  5877<<ASSIGN   5877>>ASSIGN   5884>>ASSIGN   5890>>ASSIGN
      5895>>ASSIGN
MTBL
      4384**DCL      5276>>CALLBLT
NEVER_MORE IN PROCEDURE CONVERT_DUMP
      5250**LABEL    5251--CALLALT
NEWDFN
      4276**DCL      4310--DCLINIT
NEWDFN.L#
      4276**DCL      5768<<ASSIGN   5769>>IF
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:186  
NEWDFN.NAME#
      4276**DCL      5770<<CALLBLT
NEXT_DUMP
      5154**LABEL    5155--CALLALT
NODEDIR
      4559**DCL      4203--DCLINIT  4204--DCLINIT  5328--ASSIGN
NODEDIR.N
      4559**DCL      5315<<ASSIGN   5315>>ASSIGN   5316>>ASSIGN   5324<<ASSIGN
NODEDIR.NODE.NODENAME
      4559**DCL      5326<<ASSIGN
NODEDIR.NODE.TYPE
      4560**DCL      5327<<ASSIGN
NODEIDX
      4984**DCL      5316<<ASSIGN   5319<<ASSIGN   5323<<ASSIGN   5326>>ASSIGN   5327>>ASSIGN   5338>>ASSIGN
      5374>>ASSIGN   5392>>ASSIGN   5417>>ASSIGN   5467>>ASSIGN   5477>>ASSIGN   5534>>ASSIGN   5542>>ASSIGN
      5574>>ASSIGN   5623>>ASSIGN   5649>>ASSIGN   5659>>ASSIGN   5687>>ASSIGN
NO_TRAP
      5111**LABEL    5113--CALLALT  5185--GOTO
NO_XCON
      5111**LABEL    5111--CALLALT
OCMSG
      4811**DCL      4833--REDEF
OCMSG.ACCN
      4826**DCL      5300<<ASSIGN   5802<<ASSIGN
OCMSG.C
      4827**DCL      5803<<ASSIGN
OCMSG.CCBUF
      4832**DCL      5302<<ASSIGN   5807<<ASSIGN
OCMSG.DF
      4812**DCL      5303<<ASSIGN
OCMSG.DF_CODE
      4818**DCL      5306<<ASSIGN
OCMSG.DUMPC
      4816**DCL      5305<<CALLBLT
OCMSG.IC
      4820**DCL      5308--ASSIGN
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:187  
OCMSG.MONID
      4813**DCL      5304<<ASSIGN
OCMSG.SYSID
      4830**DCL      5299<<ASSIGN   5805<<CALLBLT
OCMSG.UNAME
      4828**DCL      5301<<ASSIGN   5804<<ASSIGN
OCMSG.USR
      4824**DCL      5298<<ASSIGN
OCMSG.USR#
      4823**DCL      4824--REDEF    5799--ASSIGN
OCMSG_C
      4833**DCL      5686>>ASSIGN   5700>>ASSIGN
ODP_ERR
      5166**LABEL    5115--CALLALT
OEO_ERR IN PROCEDURE CONVERT_DUMP
      5733**LABEL    5285--GOTO
OPN_DP
      3712**DCL      5115<>CALL
OPN_DP.ACSVEH_
      3714**DCL      3715--REDEF
OPN_DP.ALTKEYS_
      3720**DCL      3721--REDEF    3721--REDEF
OPN_DP.HDR_
      3719**DCL      3720--REDEF
OPN_DP.TAB_
      3718**DCL      3719--REDEF
OPN_DP.UHL_
      3712**DCL      3713--REDEF    3713--REDEF
OPN_DP.V
      3721**DCL      3712--DCLINIT
OPN_DP.V.FSN#
      3752**DCL      3752--REDEF    3752--REDEF
OPN_DP.WSN_
      3718**DCL      3718--REDEF
OPN_EO
      4020**DCL      5284<>CALL
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:188  
OPN_EO.ACSVEH_
      4022**DCL      4023--REDEF
OPN_EO.ALTKEYS_
      4028**DCL      4029--REDEF    4029--REDEF
OPN_EO.HDR_
      4027**DCL      4028--REDEF
OPN_EO.TAB_
      4026**DCL      4027--REDEF
OPN_EO.UHL_
      4020**DCL      4021--REDEF    4021--REDEF
OPN_EO.V
      4029**DCL      4020--DCLINIT
OPN_EO.V.FSN#
      4060**DCL      4060--REDEF    4060--REDEF
OPN_EO.WSN_
      4026**DCL      4026--REDEF
PERRC
      4840**DCL      4736--DCLINIT  5836<<ASSIGN   5843<<ASSIGN   5913<<ASSIGN
PRINT_ERRM
      5873**PROC     5701--CALL     5853--CALL     5866--CALL
PRINT_MSG1
      4841**DCL      5102<<ASSIGN   5188<<ASSIGN   5195<<ASSIGN   5206<<ASSIGN   5263<<ASSIGN   5712<<ASSIGN
      5725<<ASSIGN   5739<<ASSIGN   5745<<ASSIGN   5850>>IF       5864>>IF       5867<<ASSIGN
R2BTIME
      4949**DCL      5236<>CALL
R2BTIME.V
      4953**DCL      4949--DCLINIT
R2ETIME
      4970**DCL      5683<>CALL
R2ETIME.V
      4974**DCL      4970--DCLINIT
RAPAGE
      3839**DCL      5353<>CALL     5382<>CALL     5400<>CALL     5410<>CALL     5455<>CALL     5464<>CALL
      5586<>CALL     5608<>CALL     5635<>CALL     5791<>CALL
RAPAGE.STATION_
      3842**DCL      3843--REDEF
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:189  
RAPAGE.V
      3843**DCL      3839--DCLINIT
RAPAGE.V.DVBYTE.REREAD#
      3854**DCL      3854--REDEF
RAPAGE.V.INDX#
      3852**DCL      3852--REDEF
RCVR2D
      4564**DCL      5133<<ASSIGN
RCVR2D.DA
      4565**DCL      5139>>ASSIGN   5154>>ASSIGN
RCVR2_HIGHDA
      4589**DCL      5135<<ASSIGN   5259>>IF
RCVR2_LOWDA
      4588**DCL      5134<<ASSIGN   5135>>ASSIGN   5259>>IF
RCVR2_MODE
      4580**DCL      5088<<ASSIGN   5091<<ASSIGN   5095<<ASSIGN   5097<<ASSIGN   5137>>IF       5166>>IF
      5879>>IF       5887>>IF
RDUMP_HIGHDA
      4592**DCL      5257<<ASSIGN   5259>>IF
RDUMP_LOWDA
      4591**DCL      5256<<ASSIGN   5257>>ASSIGN   5259>>IF
RD_DP
      3795**DCL      5117<>CALL     5122<>CALL     5240<>CALL     5426<>CALL     5446<>CALL     5488<>CALL
      5525<>CALL     5655<>CALL     5667<>CALL
RD_DP.BUF_
      3797**DCL      5239<<ASSIGN   5421<<ASSIGN   5444<<ASSIGN   5483<<ASSIGN   5520<<ASSIGN   5653<<ASSIGN
      5664<<ASSIGN
RD_DP.STATION_
      3798**DCL      3799--REDEF
RD_DP.V
      3799**DCL      3795--DCLINIT
RD_DP.V.DVBYTE.REREAD#
      3810**DCL      3810--REDEF
RD_DP.V.INDX#
      3808**DCL      3808--REDEF
READ_ERR IN PROCEDURE KEY_WSQ
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:190  
      5806**LABEL    5791--CALLALT
READ_NDIR
      4201**DCL      5313<>CALL
READ_NDIR.STATION_
      4204**DCL      4205--REDEF
READ_NDIR.V
      4205**DCL      4201--DCLINIT
READ_NDIR.V.DVBYTE.REREAD#
      4216**DCL      4216--REDEF
READ_NDIR.V.INDX#
      4214**DCL      4214--REDEF
RENAME_DUMPFILE
      5760**PROC     5292--CALL
REPORT_ALT_ERR IN PROCEDURE REPORT_ERR
      5835**ENTRY    5189--CALL     5196--CALL     5207--CALL     5740--CALL     5746--CALL
REPORT_DEBUG_MSG IN PROCEDURE REPORT_ERR
      5863**ENTRY    5103--CALL     5169--CALL     5918--CALL
REPORT_DF_NAME IN PROCEDURE REPORT_DFERR
      5905**ENTRY    5264--CALL     5271--CALL     5296--CALL     5726--CALL
REPORT_DF_SLOT IN PROCEDURE REPORT_DFERR
      5911**ENTRY    5232--CALL     5713--CALL
REPORT_ERRMSG IN PROCEDURE REPORT_ERR
      5857**ENTRY    5714--CALL     5727--CALL
REPORT_OC
      4676**DCL      5896<>CALL
REPORT_OC.MESS_
      4676**DCL      5894<<ASSIGN
REPORT_OC.MESS_.BOUND
      4676**DCL      5895<<ASSIGN
REPORT_OC.V
      4679**DCL      4676--DCLINIT
REPORT_OCT
      4697**DCL      5885<>CALL
REPORT_OCT.BUFW_
      4697**DCL      5883<<ASSIGN
REPORT_OCT.BUFW_.BOUND
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:191  
      4697**DCL      5884<<ASSIGN
REPORT_OCT.V
      4700**DCL      4697--DCLINIT
REPORT_STK_ERR IN PROCEDURE REPORT_ERR
      5842**ENTRY    5215--CALL
REPORT_UC
      4648**DCL      5891<>CALL
REPORT_UC.BUF_
      4648**DCL      5889<<ASSIGN
REPORT_UC.BUF_.BOUND
      4648**DCL      5890<<ASSIGN
REPORT_UC.STATION_
      4650**DCL      4650--REDEF
REPORT_UC.V
      4651**DCL      4648--DCLINIT
REPORT_UC.V.DVBYTE.VFC#
      4657**DCL      4657--REDEF
RESET_XCON
      4924**DCL      5144<>CALL     5164<>CALL
RESET_XCON.V
      4925**DCL      4924--DCLINIT
RESET_XCON1
      5139**LABEL    5141--REMEMBR
RG_CGPT
      5038**DCL      5046--DCLINIT  5514--ASSIGN
RG_CGPT.PG.HFLG
      5044**DCL      5606>>IF
RG_CGPT.PG.SFLG
      5041**DCL      5042--REDEF
RNM_EO
      4308**DCL      5773<>CALL
RNM_EO.SN_
      4308**DCL      4308--REDEF
RNM_EO.UTL_
      4309**DCL      4309--REDEF
RNM_EO.V
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:192  
      4313**DCL      4308--DCLINIT
RNM_EO.V.EXPIRE#
      4323**DCL      4323--REDEF
RNM_EO.V.TYPE#
      4321**DCL      4321--REDEF
RNM_EO.V.XTNSIZE#
      4318**DCL      4318--REDEF    4320--REDEF
RNM_ERR IN PROCEDURE CONVERT_DUMP
      5725**LABEL    5292--CALLALT
RV$BUFF
      4439**DCL      5242>>ASSIGN   5697<<ASSIGN
RV$BUFF.BUSY
      4439**DCL      5250<<ASSIGN
RV_BUFF
      4402**DCL      5242<<ASSIGN   5339--ASSIGN   5688--ASSIGN   5697>>ASSIGN
RV_BUFF.BUSY
      4402**DCL      5268>>IF       5694<<ASSIGN
RV_BUFF.CGRWSQ.DA
      4424**DCL      5521>>ASSIGN   5522>>ASSIGN
RV_BUFF.CGRWSQ.SZ
      4424**DCL      5518>>IF       5522>>ASSIGN
RV_BUFF.CUN
      4412**DCL      5795>>IF
RV_BUFF.CURCG.DA
      4424**DCL      5578>>ASSIGN   5579>>ASSIGN
RV_BUFF.CURCG.SZ
      4425**DCL      5576>>IF       5579>>ASSIGN
RV_BUFF.CWSQ.DA
      4423**DCL      5484>>ASSIGN   5485>>ASSIGN
RV_BUFF.CWSQ.SZ
      4424**DCL      5481>>IF       5485>>ASSIGN
RV_BUFF.DMONID
      4417**DCL      5304>>ASSIGN   5907>>ASSIGN
RV_BUFF.ERRLOG.DA
      4420**DCL      5378>>ASSIGN
RV_BUFF.ERRLOG.SZ
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:193  
      4421**DCL      5376>>IF       5381>>DOINDEX
RV_BUFF.IDCOUNT
      4418**DCL      5275>>CALLBLT  5305>>CALLBLT  5908>>CALLBLT
RV_BUFF.INSTID
      4418**DCL      5337<<ASSIGN
RV_BUFF.JITS.DA
      4420**DCL      5348>>ASSIGN   5366>>IF
RV_BUFF.JITS.SZ
      4420**DCL      5344>>IF       5366>>IF
RV_BUFF.LRMEM.DA
      4421**DCL      5396>>ASSIGN
RV_BUFF.LRMEM.SZ
      4422**DCL      5394>>IF
RV_BUFF.MM_CGQCXT_END
      4413**DCL      5515>>ASSIGN
RV_BUFF.MONJITS.DA
      4422**DCL      5631>>ASSIGN
RV_BUFF.MONJITS.SZ
      4423**DCL      5629>>IF       5634>>DOINDEX
RV_BUFF.MONPLL
      4418**DCL      5452>>ASSIGN
RV_BUFF.MONPROC.DA
      4423**DCL      5449>>ASSIGN
RV_BUFF.MONPROC.SZ
      4423**DCL      5442>>IF       5450>>IF       5453>>ASSIGN
RV_BUFF.MONWSQD.DA
      4421**DCL      5422>>ASSIGN   5423>>ASSIGN   5445>>ASSIGN   5463>>ASSIGN
RV_BUFF.MONWSQD.SZ
      4421**DCL      5419>>IF       5423>>ASSIGN
RV_BUFF.OCMSG
      4434**DCL      5686<<ASSIGN
RV_BUFF.PPUT.FP
      4419**DCL      5407>>ASSIGN   5408>>DOINDEX
RV_BUFF.PPUT.LP
      4419**DCL      5408>>DOINDEX
RV_BUFF.RCVR2TR
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:194  
      4402**DCL      5849<<ASSIGN
RV_BUFF.RCVR2TRAP
      4434**DCL      5838<<ASSIGN   5845<<ASSIGN
RV_BUFF.SCODE.CODE
      4405**DCL      5281>>CALLBLT
RV_BUFF.SCODE.ID
      4404**DCL      5276>>CALLBLT  5276>>CALLBLT  5276>>CALLBLT
RV_BUFF.SCODE.MON
      4404**DCL      5276>>CALLBLT
RV_BUFF.SCODE.SEV
      4405**DCL      5248>>IF       5282>>CALLBLT  5314>>IF
RV_BUFF.SIZE
      4402**DCL      5257>>ASSIGN
RV_BUFF.SSFRAME.IC
      4412**DCL      5308--ASSIGN   5451>>ASSIGN
RV_BUFF.S_PNO
      4413**DCL      5431>>ASSIGN   5469>>ASSIGN   5537>>ASSIGN
RV_BUFF.USRDR.DA
      4419**DCL      5654>>ASSIGN
RV_BUFF.USRDR.SZ
      4420**DCL      5651>>IF
RV_BUFF.UTS3
      4404**DCL      5684<<ASSIGN
RV_BUFF.UTS4
      4404**DCL      5685<<ASSIGN
RV_USRDIR
      4475**DCL      3797--DCLINIT  3798--DCLINIT  5119--ASSIGN   5653--ASSIGN   5657--ASSIGN
RV_USRDIR.USER.DA
      4475**DCL      5665>>ASSIGN   5666>>ASSIGN
RV_USRDIR.USER.SZ
      4476**DCL      5662>>IF       5666>>ASSIGN
RV_USRDIR.USER.TYP
      4476**DCL      5672>>ASSIGN
RV_WSQD
      4479**DCL      5428<<ASSIGN   5448<<ASSIGN   5466>>ASSIGN   5491<<ASSIGN   5529<<ASSIGN   5531--ASSIGN
      5532--ASSIGN   5593<<ASSIGN   5594--ASSIGN   5669<<ASSIGN
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:195  
RV_WSQD.PG.SFLG
      4479**DCL      4479--REDEF    5458<<ASSIGN   5458>>ASSIGN   5789>>IF
RXCON2
      5164**LABEL    5164--CALLALT
R_DP_ERR IN PROCEDURE CONVERT_DUMP
      5719**LABEL    5353--CALLALT  5382--CALLALT  5400--CALLALT  5410--CALLALT  5426--CALLALT  5446--CALLALT
      5455--CALLALT  5464--CALLALT  5488--CALLALT  5525--CALLALT  5586--CALLALT  5608--CALLALT  5635--CALLALT
      5655--CALLALT  5667--CALLALT  5750--GOTO
R_RB_ERR IN PROCEDURE CONVERT_DUMP
      5700**LABEL    5240--CALLALT
R_SAD_ERR
      5195**LABEL    5122--CALLALT
R_VID_ERR
      5188**LABEL    5117--CALLALT
SET_XCON
      4908**DCL      5111<>CALL
SET_XCON.V
      4909**DCL      4908--DCLINIT
SK1 IN PROCEDURE CONVERT_DUMP
      5229**LABEL    5236--CALLALT
SKIP_TIMES IN PROCEDURE CONVERT_DUMP
      5688**LABEL    5683--CALLALT  5689--CALLALT
SYSPACK
      4349**DCL      3712--DCLINIT
SYSTAC
      4386**DCL      4025--DCLINIT
T$
      4980**DCL      5119<<ASSIGN   5120>>ASSIGN   5121>>ASSIGN   5126>>ASSIGN   5133>>ASSIGN   5134>>ASSIGN
      5135>>ASSIGN   5241<<ASSIGN   5242>>ASSIGN   5250>>ASSIGN   5427<<ASSIGN   5428>>ASSIGN   5447<<ASSIGN
      5448>>ASSIGN   5465<<ASSIGN   5466>>ASSIGN   5490<<ASSIGN   5491>>ASSIGN   5496>>ASSIGN   5528<<ASSIGN
      5529>>ASSIGN   5530>>ASSIGN   5532<<ASSIGN   5551>>ASSIGN   5592<<ASSIGN   5593>>ASSIGN   5594<<ASSIGN
      5597>>ASSIGN   5600>>IF       5602>>ASSIGN   5603>>ASSIGN   5668<<ASSIGN   5669>>ASSIGN   5696<<ASSIGN
      5697>>ASSIGN   5874<<ASSIGN   5876>>DOWHILE  5916<<ASSIGN   5917>>ASSIGN
TRAPFPT
      4879**DCL      5113<>CALL
TRAPFPT.V
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:196  
      4879**DCL      4879--DCLINIT
TRAP_HAND
      5208**LABEL    5110--REMEMBR
TRAP_UNWIND
      4893**DCL      5110<<REMEMBR
TSTAMP1
      4933**DCL      4953--DCLINIT  5684>>ASSIGN
TSTAMP2
      4934**DCL      4974--DCLINIT  5685>>ASSIGN
VDFN.L#
      4283**DCL      4283--IMP-SIZ  5768>>ASSIGN   5770>>CALLBLT  5770>>CALLBLT
VDFN.NAME#
      4283**DCL      5770>>CALLBLT
VLR_ERRMSG
      4764**DCL      4740--DCLINIT
WAIT10
      3770**DCL      5184<>CALL     5288<>CALL
WAIT10.V
      3771**DCL      3770--DCLINIT
WAPAGE
      4119**DCL      5383<>CALL     5401<>CALL     5411<>CALL     5457<>CALL     5470<>CALL     5587<>CALL
      5609<>CALL     5640<>CALL     5793<>CALL
WAPAGE.STATION_
      4121**DCL      4121--REDEF
WAPAGE.V
      4122**DCL      4119--DCLINIT
WAPAGE.V.DVBYTE.VFC#
      4128**DCL      4128--REDEF
WRITE_ERR IN PROCEDURE KEY_WSQ
      5816**LABEL    5793--CALLALT
WSQ_ERR IN PROCEDURE CONVERT_DUMP
      5745**LABEL    5435--CALLALT  5503--CALLALT  5561--CALLALT  5677--CALLALT
WTEO
      4084**DCL      5329<>CALL     5334<>CALL     5340<>CALL     5360<>CALL     5497<>CALL     5539<>CALL
      5547<>CALL     5658<>CALL     5689<>CALL
WTEO.BUF_
PL6.E3A0      #001=RCVR2 File=IRG$RCVR2.:E05TSI                                  TUE 07/29/97 22:44 Page:197  
      4084**DCL      5328<<ASSIGN   5332<<ASSIGN   5339<<ASSIGN   5359<<ASSIGN   5496<<ASSIGN   5531<<ASSIGN
      5657<<ASSIGN   5688<<ASSIGN
WTEO.STATION_
      4086**DCL      4086--REDEF
WTEO.V
      4087**DCL      4084--DCLINIT
WTEO.V.DVBYTE.VFC#
      4093**DCL      4093--REDEF
WT_DP
      3882**DCL      5251<>CALL     5698<>CALL
WT_DP.STATION_
      3884**DCL      3884--REDEF
WT_DP.V
      3885**DCL      3882--DCLINIT
WT_DP.V.DVBYTE.VFC#
      3891**DCL      3891--REDEF
W_RB_ERR IN PROCEDURE CONVERT_DUMP
      5712**LABEL    5698--CALLALT
XCON_ALTRET
      5139**LABEL    5144--CALLALT
XXX_EO IN PROCEDURE CONVERT_DUMP
      5737**LABEL    5755--GOTO
Z
      4985**DCL      5307<<DOINDEX  5308>>ASSIGN   5308>>ASSIGN   5798<<DOINDEX  5799>>ASSIGN   5799>>ASSIGN

PL6.E3A0      #002=IRG$TRAP File=IRG$RCVR2.:E05TSI                               TUE 07/29/97 22:45 Page:198  
     1232        1        /*T***********************************************************/
     1233        2        /*T*                                                         */
     1234        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1235        4        /*T*                                                         */
     1236        5        /*T***********************************************************/
     1237        6        IRG$TRAP: PROC ASYNC;
     1238        7    1   DCL TRAP_UNWIND REMEMBER DALIGNED SYMREF;
     1239        8
     1240        9    1      UNWIND TO TRAP_UNWIND;
     1241       10    1   END IRG$TRAP;

PL6.E3A0      #002=IRG$TRAP File=IRG$RCVR2.:E05TSI                               TUE 07/29/97 22:45 Page:199  
--  Include file information  --

   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure IRG$TRAP.

   Procedure IRG$TRAP requires 5 words for executable code.
   Procedure IRG$TRAP requires 4 words of local(AUTO) storage.

    No errors detected in file IRG$RCVR2.:E05TSI    .

PL6.E3A0      #002=IRG$TRAP File=IRG$RCVR2.:E05TSI                               TUE 07/29/97 22:45 Page:200  

 Object Unit name= IRG$TRAP                                   File name= IRG$RCVR2.:E05TOU
 UTS= JUL 29 '97 22:45:46.56 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none     5      5  IRG$TRAP

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes     Async       0  IRG$TRAP

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AAUTO
                       nStd      0 X66_AAUNWIND

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     TRAP_UNWIND
PL6.E3A0      #002=IRG$TRAP File=IRG$RCVR2.:E05TSI                               TUE 07/29/97 22:45 Page:201  


     1232        1        /*T***********************************************************/
     1233        2        /*T*                                                         */
     1234        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1235        4        /*T*                                                         */
     1236        5        /*T***********************************************************/
     1237        6        IRG$TRAP: PROC ASYNC;

      6  0 000000   000000 700200 xent  IRG$TRAP     TSX0  ! X66_AAUTO
         0 000001   000004 000000                    ZERO    4,0

     1238        7    1   DCL TRAP_UNWIND REMEMBER DALIGNED SYMREF;
     1239        8
     1240        9    1      UNWIND TO TRAP_UNWIND;

      9  0 000002   000000 237200 xsym               LDAQ  ! TRAP_UNWIND
         0 000003   000000 700200 xent               TSX0  ! X66_AAUNWIND
         0 000004   000000 000200                    ZERO    0,128
     1241       10    1   END IRG$TRAP;

PL6.E3A0      #002=IRG$TRAP File=IRG$RCVR2.:E05TSI                               TUE 07/29/97 22:45 Page:202  
--  Include file information  --

   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure IRG$TRAP.
PL6.E3A0      #002=IRG$TRAP File=IRG$RCVR2.:E05TSI                               TUE 07/29/97 22:45 Page:203  

 **** Variables and constants ****

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d REMB        r     1 TRAP_UNWIND


   Procedure IRG$TRAP requires 5 words for executable code.
   Procedure IRG$TRAP requires 4 words of local(AUTO) storage.

    No errors detected in file IRG$RCVR2.:E05TSI    .
PL6.E3A0      #002=IRG$TRAP File=IRG$RCVR2.:E05TSI                               TUE 07/29/97 22:45 Page:204  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=IRG$TRAP File=IRG$RCVR2.:E05TSI                               TUE 07/29/97 22:45 Page:205  
          MINI XREF LISTING

TRAP_UNWIND
         7**DCL         9>>UNWIND
