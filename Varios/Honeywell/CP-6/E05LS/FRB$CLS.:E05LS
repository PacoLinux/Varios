VERSION E05

PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:1    
        1        1        /*M* FRB$CLS Perform resource management functions at DCB close*/
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*DMC,PLM=6,IND=2,ENU=2,DCI=4,CSU=2,ECU=2,THI=2,DTI=0*/
        8        8        /**/
        9        9        /**/
       10       10        FRB$CLS: PROC;
       11       11        /**/
       12       12        /**/
       13       13        %PLIST;
       14       14        %INCLUDE FR$RAT;
       15       67        %FR$RAT (NAME=RAT, STCLASS="BASED(RAT$)");
       16      107        %INCLUDE F$DCB;
       17      156        %INCLUDE B$JIT;
       18      759        %INCLUDE NK$LDCT;
       19      861        %INCLUDE NK_LDCT_R;
       20      870        %INCLUDE NK_SUBS;
       21      895        %INCLUDE CP_6_SUBS;
       22     1435        %INCLUDE FR_SUBS;
       23     1503        %INCLUDE HF_LOCK_C;
       24     1517        /**/
       25     1518        %NK$LDCT (STCLASS="BASED(LDCT$)");
       26     1564        /**/
       27     1565        /**/
       28     1566    1   DCL LDCT$ PTR;
       29     1567    1   DCL RAT$ PTR;
       30     1568    1   DCL MODE UBIN WORD;
       31     1569    1   DCL X$ REDEF MODE PTR;
       32     1570    1   DCL DCB$ PTR;
       33     1571        %FR$RAT (NAME=AUTORAT, STCLASS=AUTO);
       34     1611
       35     1612    1   DCL FRF$DISC ENTRY(1) ALTRET;
       36     1613    1   DCL FRS$OPSTRS ENTRY;
       37     1614    1   DCL FRS$RESSUB ENTRY(1);
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:2    
       38     1615    1   DCL FRS$CLSTRS ENTRY;
       39     1616    1   DCL FRZ$DSMT ENTRY(1);
       40     1617    1   DCL FRZ$RRES ENTRY(2);
       41     1618    1   DCL FRZ$RRESNA ENTRY(2);
       42     1619    1   DCL SSS$BLOCK ENTRY;
       43     1620        /**/
       44     1621    1   DCL B$JIT$ PTR SYMREF;
       45     1622        /**/
       46     1623    1   DCL SC_BCLRES ENTRY CONV(2,0);          /* CALLED ON NON-RESOURCE             */
       47     1624    1   DCL SC_RSOWNR ENTRY CONV(2,0);          /* CLOSER OF RESOURCE IS NOT OWNER    */
       48     1625    1   DCL SC_RSNOPN ENTRY CONV(2,0);          /* CLOSE OF UN-OPEN RESOURCE          */
       49     1626        /**/
       50     1627        /**/
       51     1628    1         CALL CLSIT ALTRET (RTN);
       52     1629    1         RETURN;
       53     1630    1   FRB$CREM: ENTRY;
       54     1631    1         CALL CLSIT ALTRET (RTN);
       55     1632    1         IF RAT.RES.RFLG.OLT THEN GOTO CREL1;
       56     1633    1         GOTO DSMT;
       57     1634    1   FRB$CREL: ENTRY;
       58     1635    1         CALL CLSIT ALTRET (RTN);
       59     1636    1   CREL1: ;
       60     1637    1         MODE=B$JIT.MODE;
       61     1638    1         IF RAT.FLG.MTNN='0'B THEN DCB$->F$DCB.RESNT.NUM=' ';
       62     1639    1         CALL FRZ$RRES(RAT,MODE);
       63     1640    1         RETURN;
       64     1641    1   FRB$CCLS: ENTRY;
       65     1642    1         CALL CLSIT ALTRET (RTN);
       66     1643    1   DSMT: ;
       67     1644    1         IF RAT.FLG.MTNN='0'B THEN DCB$->F$DCB.RESNT.NUM=' ';
       68     1645    1         CALL FRZ$DSMT (RAT);
       69     1646    1   RTN:  ;
       70     1647    1         RETURN;
       71     1648        /**/
       72     1649        /**/
       73     1650    1   CLSIT: PROC ALTRET;
       74     1651        /**/
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:3    
       75     1652    2         DCB$=B$JIT.DCB$;
       76     1653    2         IF DCB$->F$DCB.SETX=0 THEN ALTRETURN;
       77     1654    2         LDCT$=NK$LDCT$(DCB$->F$DCB.SETX);
       78     1655    2         RAT$=LDCT$->NK$LDCT.RAT$;
       79     1656    2         IF RAT$=ADDR(NIL) THEN CALL SC_BCLRES;
       80     1657        /*S*  SCREECH_CODE:  FRB-S$BCLRES
       81     1658              TYPE:          SUA
       82     1659              MESSAGE:       Resource close called for non-resource device
       83     1660              REMARKS:   FRB$CLS was called with a DCB whose SETX
       84     1661                             indexed a DCT entry with a NIL RAT$                     */
       85     1662        /*S*  SCREECH_CODE:  FRB-S$RSOWNR
       86     1663              TYPE:          Screech
       87     1664              MESSAGE:       Attempt to close a resource not owned by user
       88     1665              REMARKS:       FRB$CLS was called to close a resource which exists
       89     1666                             but is not owned by the closing user                    */
       90     1667    2         IF RAT.FLG.OPN='0'B THEN CALL SC_RSNOPN;
       91     1668        /*S*  SCREECH_CODE:  FRB-S$RSNOPN
       92     1669              TYPE:          SUA
       93     1670              MESSAGE:       Attempt to close an un-open resource
       94     1671              REMARKS:       FRB$CLS was called to close a resource which was
       95     1672                             not marked open.  The problem may well be with the
       96     1673                             caller, who may well be closing a closed DCB            */
       97     1674    3         IF RAT.TYP~='CL' THEN DO;
       98     1675    3           RAT.FLG.OPN='0'B;
       99     1676    3           IF RAT.RES.SISID~=B$JIT.SYSID
      100     1677    3             THEN CALL SC_RSOWNR;
      101     1678    3         END; ELSE DO;
      102     1679    3           AUTORAT=RAT;
      103     1680    3           AUTORAT.RES.ACTX=DCB$->F$DCB.CRECX;
      104     1681    3           CALL FRS$OPSTRS;
      105     1682    3           CALL FRS$RESSUB (AUTORAT);
      106     1683    3           CALL FRS$CLSTRS;
      107     1684    3           IF DCB$->F$DCB.RESNT.NUM>'01' THEN B$JIT.CLRES(1)='1'B;
      108     1685    3             ELSE IF DCB$->F$DCB.RESNT.NUM='01' THEN B$JIT.CLRES(0)='1'B;
      109     1686    3           CALL SSS$BLOCK;
      110     1687    4           IF RAT.DCTX~=NK$LDCT.LDCTX THEN DO INHIBIT;
      111     1688        /* Remove from chain of attached devices */
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:4    
      112     1689    4             X$=LDCT$;
      113     1690    5             DO UNTIL X$->NK$LDCT.CLLNK$=LDCT$;
      114     1691    5               X$=X$->NK$LDCT.CLLNK$;
      115     1692    5             END;
      116     1693    4             X$->NK$LDCT.CLLNK$=NK$LDCT.CLLNK$;
      117     1694    4             IF X$->NK$LDCT.CLLNK$~=X$ OR RAT.RES.SISID~=0 THEN EXIT;
      118     1695    4             RAT.FLG.OPN='0'B;
      119     1696    4             IF X$->NK$LDCT.DFLG.PRLS
      120     1697    4               THEN CALL FRF$DISC (X$->NK$LDCT); /* Finish if disconnecting */
      121     1698    4           END; ELSE DO INHIBIT;
      122     1699    4             IF RAT.RES.SISID~=B$JIT.SYSID THEN EXIT;
      123     1700    5             IF DCB$->F$DCB.FCD AND NOT RAT.CLFLG.MULT THEN DO;
      124     1701        /* Don't disconnect for test open or control devices */
      125     1702    5               RAT.DCTX=0; /* FRZ will fix RCOD. */
      126     1703    5             END;
      127     1704    4             IF NK$LDCT.CLLNK$=LDCT$ THEN RAT.FLG.OPN='0'B;
      128     1705    4             IF RAT.CLFLG.MULT THEN IF RAT.FLG&%(RUPBIT|OPNBIT)
      129     1706    4                 THEN NK$LDCT.USER=0;
      130     1707    4                 ELSE RAT.DCTX=0;
      131     1708    4             IF RAT.DCTX=0 THEN NK$LDCT.RAT$=ADDR(NIL);
      132     1709    4             MODE=B$JIT.MODE;
      133     1710    4             CALL FRZ$RRESNA (RAT, MODE);
      134     1711    4           END;
      135     1712    3         END;
      136     1713    2         DCB$->F$DCB.SETX=0;
      137     1714    2         RETURN;
      138     1715    2   END;
      139     1716        /**/
      140     1717    1   END;
      141     1718        /**/
      142     1719        /**/

PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:5    
--  Include file information  --

   HF_LOCK_C.:E05TOU  cannot be made into a system file and is referenced.
   FR_SUBS.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   NK_SUBS.:E05TOU  is referenced.
   NK_LDCT_R.:E05TOU  cannot be made into a system file and is referenced.
   NK$LDCT.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   FR$RAT.:E05TOU  is referenced.
      No diagnostics issued in procedure FRB$CLS.

   Procedure FRB$CLS requires 215 words for executable code.
   Procedure FRB$CLS requires 20 words of local(AUTO) storage.

    No errors detected in file FRB$CLS.:E05TSI    .

PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:6    

 Object Unit name= FRB$CLS                                    File name= FRB$CLS.:E05TOU
 UTS= JUL 29 '97 17:21:21.60 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  RoData even  UTS      2      2  FRB$CLS
    1   Proc  even  none   215    327  FRB$CLS
    2  RoData even  none     1      1  FRB$CLS

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes            yes      Std        0  FRB$CLS
     1      5                  yes      Std        0  FRB$CREM
     1     16                  yes      Std        0  FRB$CREL
     1     46                  yes      Std        0  FRB$CCLS
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:7    

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       2 FRZ$RRES
         yes           Std       1 FRZ$DSMT
 yes     yes           Std       1 FRF$DISC
         yes           Std       0 FRS$OPSTRS
         yes           Std       1 FRS$RESSUB
         yes           Std       0 FRS$CLSTRS
         yes           Std       0 SSS$BLOCK
         yes           Std       2 FRZ$RRESNA
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
                       Std       0 B_CONSPOOL_D

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     SC_BCLRES                             SC_RSNOPN                             SC_RSOWNR
     N$DCT$$                               B$JIT$                                B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ASLENTSID
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:8    


        1        1        /*M* FRB$CLS Perform resource management functions at DCB close*/
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*DMC,PLM=6,IND=2,ENU=2,DCI=4,CSU=2,ECU=2,THI=2,DTI=0*/
        8        8        /**/
        9        9        /**/
       10       10        FRB$CLS: PROC;

     10  1 000000   000000 700200 xent  FRB$CLS      TSX0  ! X66_AUTO_0
         1 000001   000024 000000                    ZERO    20,0

       11       11        /**/
       12       12        /**/
       13       13        %PLIST;
       14       14        %INCLUDE FR$RAT;
       15       67        %FR$RAT (NAME=RAT, STCLASS="BASED(RAT$)");
       16      107        %INCLUDE F$DCB;
       17      156        %INCLUDE B$JIT;
       18      759        %INCLUDE NK$LDCT;
       19      861        %INCLUDE NK_LDCT_R;
       20      870        %INCLUDE NK_SUBS;
       21      895        %INCLUDE CP_6_SUBS;
       22     1435        %INCLUDE FR_SUBS;
       23     1503        %INCLUDE HF_LOCK_C;
       24     1517        /**/
       25     1518        %NK$LDCT (STCLASS="BASED(LDCT$)");
       26     1564        /**/
       27     1565        /**/
       28     1566    1   DCL LDCT$ PTR;
       29     1567    1   DCL RAT$ PTR;
       30     1568    1   DCL MODE UBIN WORD;
       31     1569    1   DCL X$ REDEF MODE PTR;
       32     1570    1   DCL DCB$ PTR;
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:9    
       33     1571        %FR$RAT (NAME=AUTORAT, STCLASS=AUTO);
       34     1611
       35     1612    1   DCL FRF$DISC ENTRY(1) ALTRET;
       36     1613    1   DCL FRS$OPSTRS ENTRY;
       37     1614    1   DCL FRS$RESSUB ENTRY(1);
       38     1615    1   DCL FRS$CLSTRS ENTRY;
       39     1616    1   DCL FRZ$DSMT ENTRY(1);
       40     1617    1   DCL FRZ$RRES ENTRY(2);
       41     1618    1   DCL FRZ$RRESNA ENTRY(2);
       42     1619    1   DCL SSS$BLOCK ENTRY;
       43     1620        /**/
       44     1621    1   DCL B$JIT$ PTR SYMREF;
       45     1622        /**/
       46     1623    1   DCL SC_BCLRES ENTRY CONV(2,0);          /* CALLED ON NON-RESOURCE             */
       47     1624    1   DCL SC_RSOWNR ENTRY CONV(2,0);          /* CLOSER OF RESOURCE IS NOT OWNER    */
       48     1625    1   DCL SC_RSNOPN ENTRY CONV(2,0);          /* CLOSE OF UN-OPEN RESOURCE          */
       49     1626        /**/
       50     1627        /**/
       51     1628    1         CALL CLSIT ALTRET (RTN);

   1628  1 000002   000066 701000 1                  TSX1    CLSIT
         1 000003   000065 702000 1                  TSX2    RTN

       52     1629    1         RETURN;

   1629  1 000004   000000 702200 xent               TSX2  ! X66_ARET

       53     1630    1   FRB$CREM: ENTRY;

   1630  1 000005   000000 700200 xent  FRB$CREM     TSX0  ! X66_AUTO_0
         1 000006   000024 000000                    ZERO    20,0

       54     1631    1         CALL CLSIT ALTRET (RTN);

   1631  1 000007   000066 701000 1                  TSX1    CLSIT
         1 000010   000065 702000 1                  TSX2    RTN

PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:10   
       55     1632    1         IF RAT.RES.RFLG.OLT THEN GOTO CREL1;

   1632  1 000011   200004 470500                    LDP0    RAT$,,AUTO
         1 000012   000003 236100                    LDQ     3,,PR0
         1 000013   020000 316003                    CANQ    8192,DU
         1 000014   000022 601000 1                  TNZ     CREL1

       56     1633    1         GOTO DSMT;

   1633  1 000015   000052 710000 1                  TRA     DSMT

       57     1634    1   FRB$CREL: ENTRY;

   1634  1 000016   000000 700200 xent  FRB$CREL     TSX0  ! X66_AUTO_0
         1 000017   000024 000000                    ZERO    20,0

       58     1635    1         CALL CLSIT ALTRET (RTN);

   1635  1 000020   000066 701000 1                  TSX1    CLSIT
         1 000021   000065 702000 1                  TSX2    RTN

   1632  1 000022                       CREL1        null
       59     1636    1   CREL1: ;
       60     1637    1         MODE=B$JIT.MODE;

   1637  1 000022   000000 470400 xsym               LDP0    B$JIT$
         1 000023   000000 236100                    LDQ     0,,PR0
         1 000024   000040 772000                    QRL     32
         1 000025   200005 756100                    STQ     MODE,,AUTO

       61     1638    1         IF RAT.FLG.MTNN='0'B THEN DCB$->F$DCB.RESNT.NUM=' ';

   1638  1 000026   200004 471500                    LDP1    RAT$,,AUTO
         1 000027   100010 236100                    LDQ     8,,PR1
         1 000030   000040 316007                    CANQ    32,DL
         1 000031   000035 601000 1                  TNZ     s:1639

PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:11   
   1638  1 000032   040040 220003                    LDX0    16416,DU
         1 000033   200006 473500                    LDP3    DCB$,,AUTO
         1 000034   300026 440100                    SXL0    22,,PR3

       62     1639    1         CALL FRZ$RRES(RAT,MODE);

   1639  1 000035   200005 633500                    EPPR3   MODE,,AUTO
         1 000036   200023 453500                    STP3    AUTORAT+12,,AUTO
         1 000037   200004 236100                    LDQ     RAT$,,AUTO
         1 000040   200022 756100                    STQ     AUTORAT+11,,AUTO
         1 000041   200022 630500                    EPPR0   AUTORAT+11,,AUTO
         1 000042   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000043   000000 701000 xent               TSX1    FRZ$RRES
         1 000044   000000 011000                    NOP     0

       63     1640    1         RETURN;

   1640  1 000045   000000 702200 xent               TSX2  ! X66_ARET

       64     1641    1   FRB$CCLS: ENTRY;

   1641  1 000046   000000 700200 xent  FRB$CCLS     TSX0  ! X66_AUTO_0
         1 000047   000024 000000                    ZERO    20,0

       65     1642    1         CALL CLSIT ALTRET (RTN);

   1642  1 000050   000066 701000 1                  TSX1    CLSIT
         1 000051   000065 702000 1                  TSX2    RTN

   1638  1 000052                       DSMT         null
       66     1643    1   DSMT: ;
       67     1644    1         IF RAT.FLG.MTNN='0'B THEN DCB$->F$DCB.RESNT.NUM=' ';

   1644  1 000052   200004 470500                    LDP0    RAT$,,AUTO
         1 000053   000010 236100                    LDQ     8,,PR0
         1 000054   000040 316007                    CANQ    32,DL
         1 000055   000061 601000 1                  TNZ     s:1645
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:12   

   1644  1 000056   040040 220003                    LDX0    16416,DU
         1 000057   200006 471500                    LDP1    DCB$,,AUTO
         1 000060   100026 440100                    SXL0    22,,PR1

       68     1645    1         CALL FRZ$DSMT (RAT);

   1645  1 000061   200004 630500                    EPPR0   RAT$,,AUTO
         1 000062   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000063   000000 701000 xent               TSX1    FRZ$DSMT
         1 000064   000000 011000                    NOP     0

   1644  1 000065                       RTN          null
       69     1646    1   RTN:  ;
       70     1647    1         RETURN;

   1647  1 000065   000000 702200 xent               TSX2  ! X66_ARET

       71     1648        /**/
       72     1649        /**/
       73     1650    1   CLSIT: PROC ALTRET;

   1650  1 000066   200020 741300       CLSIT        STX1  ! AUTORAT+9,,AUTO

       74     1651        /**/
       75     1652    2         DCB$=B$JIT.DCB$;

   1652  1 000067   000000 470400 xsym               LDP0    B$JIT$
         1 000070   000232 236100                    LDQ     154,,PR0
         1 000071   200006 756100                    STQ     DCB$,,AUTO

       76     1653    2         IF DCB$->F$DCB.SETX=0 THEN ALTRETURN;

   1653  1 000072   200006 471500                    LDP1    DCB$,,AUTO
         1 000073   100051 720100                    LXL0    41,,PR1
         1 000074   000076 601000 1                  TNZ     s:1654

PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:13   
   1653  1 000075   000000 702211                    TSX2  ! 0,X1

       77     1654    2         LDCT$=NK$LDCT$(DCB$->F$DCB.SETX);

   1654  1 000076   000000 473400 xsym               LDP3    N$DCT$$
         1 000077   300000 236110                    LDQ     0,X0,PR3
         1 000100   200003 756100                    STQ     LDCT$,,AUTO

       78     1655    2         RAT$=LDCT$->NK$LDCT.RAT$;

   1655  1 000101   200003 474500                    LDP4    LDCT$,,AUTO
         1 000102   400005 236100                    LDQ     5,,PR4
         1 000103   200004 756100                    STQ     RAT$,,AUTO

       79     1656    2         IF RAT$=ADDR(NIL) THEN CALL SC_BCLRES;

   1656  1 000104   000001 116000 xsym               CMPQ    B_VECTNIL+1
         1 000105   000110 601000 1                  TNZ     s:1667

   1656  1 000106   000000 713400 xsym               CLIMB   SC_BCLRES
         1 000107   000000 600000 xsid               climb   nvectors=         0

       80     1657        /*S*  SCREECH_CODE:  FRB-S$BCLRES
       81     1658              TYPE:          SUA
       82     1659              MESSAGE:       Resource close called for non-resource device
       83     1660              REMARKS:   FRB$CLS was called with a DCB whose SETX
       84     1661                             indexed a DCT entry with a NIL RAT$                     */
       85     1662        /*S*  SCREECH_CODE:  FRB-S$RSOWNR
       86     1663              TYPE:          Screech
       87     1664              MESSAGE:       Attempt to close a resource not owned by user
       88     1665              REMARKS:       FRB$CLS was called to close a resource which exists
       89     1666                             but is not owned by the closing user                    */
       90     1667    2         IF RAT.FLG.OPN='0'B THEN CALL SC_RSNOPN;

   1667  1 000110   200004 470500                    LDP0    RAT$,,AUTO
         1 000111   000010 236100                    LDQ     8,,PR0
         1 000112   000020 316007                    CANQ    16,DL
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:14   
         1 000113   000116 601000 1                  TNZ     s:1674

   1667  1 000114   000000 713400 xsym               CLIMB   SC_RSNOPN
         1 000115   000000 600000 xsid               climb   nvectors=         0

       91     1668        /*S*  SCREECH_CODE:  FRB-S$RSNOPN
       92     1669              TYPE:          SUA
       93     1670              MESSAGE:       Attempt to close an un-open resource
       94     1671              REMARKS:       FRB$CLS was called to close a resource which was
       95     1672                             not marked open.  The problem may well be with the
       96     1673                             caller, who may well be closing a closed DCB            */
       97     1674    3         IF RAT.TYP~='CL' THEN DO;

   1674  1 000116   200004 470500                    LDP0    RAT$,,AUTO
         1 000117   000010 220100                    LDX0    8,,PR0
         1 000120   000000 100000 0                  CMPX0   0
         1 000121   000137 600000 1                  TZE     s:1679

       98     1675    3           RAT.FLG.OPN='0'B;

   1675  1 000122   000000 236000 2                  LDQ     0
         1 000123   000010 356100                    ANSQ    8,,PR0

       99     1676    3           IF RAT.RES.SISID~=B$JIT.SYSID

   1676  1 000124   000000 471400 xsym               LDP1    B$JIT$
         1 000125   100000 236100                    LDQ     0,,PR1
         1 000126   777777 376007                    ANQ     -1,DL
         1 000127   200022 756100                    STQ     AUTORAT+11,,AUTO
         1 000130   000001 236100                    LDQ     1,,PR0
         1 000131   000022 732000                    QRS     18
         1 000132   200022 116100                    CMPQ    AUTORAT+11,,AUTO
         1 000133   000322 600000 1                  TZE     s:1713

      100     1677    3             THEN CALL SC_RSOWNR;

   1677  1 000134   000000 713400 xsym               CLIMB   SC_RSOWNR
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:15   
         1 000135   000000 600000 xsid               climb   nvectors=         0

      101     1678    3         END; ELSE DO;

   1678  1 000136   000322 710000 1                  TRA     s:1713

      102     1679    3           AUTORAT=RAT;

   1679  1 000137   000100 100500                    MLR     fill='000'O
         1 000140   000000 000044                    ADSC9   0,,PR0                   cn=0,n=36
         1 000141   200007 000044                    ADSC9   AUTORAT,,AUTO            cn=0,n=36

      103     1680    3           AUTORAT.RES.ACTX=DCB$->F$DCB.CRECX;

   1680  1 000142   200006 471500                    LDP1    DCB$,,AUTO
         1 000143   100067 720100                    LXL0    55,,PR1
         1 000144   200011 440100                    SXL0    AUTORAT+2,,AUTO

      104     1681    3           CALL FRS$OPSTRS;

   1681  1 000145   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 000146   000000 701000 xent               TSX1    FRS$OPSTRS
         1 000147   000000 011000                    NOP     0

      105     1682    3           CALL FRS$RESSUB (AUTORAT);

   1682  1 000150   200007 630500                    EPPR0   AUTORAT,,AUTO
         1 000151   200022 450500                    STP0    AUTORAT+11,,AUTO
         1 000152   200022 630500                    EPPR0   AUTORAT+11,,AUTO
         1 000153   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000154   000000 701000 xent               TSX1    FRS$RESSUB
         1 000155   000000 011000                    NOP     0

      106     1683    3           CALL FRS$CLSTRS;

   1683  1 000156   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 000157   000000 701000 xent               TSX1    FRS$CLSTRS
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:16   
         1 000160   000000 011000                    NOP     0

      107     1684    3           IF DCB$->F$DCB.RESNT.NUM>'01' THEN B$JIT.CLRES(1)='1'B;

   1684  1 000161   200006 470500                    LDP0    DCB$,,AUTO
         1 000162   000026 720100                    LXL0    22,,PR0
         1 000163   000001 100000 0                  CMPX0   1
         1 000164   000172 602000 1                  TNC     s:1685
         1 000165   000172 600000 1                  TZE     s:1685

   1684  1 000166   000000 471400 xsym               LDP1    B$JIT$
         1 000167   200000 236003                    LDQ     65536,DU
         1 000170   100325 256100                    ORSQ    213,,PR1
         1 000171   000176 710000 1                  TRA     s:1686

      108     1685    3             ELSE IF DCB$->F$DCB.RESNT.NUM='01' THEN B$JIT.CLRES(0)='1'B;

   1685  1 000172   000176 601000 1                  TNZ     s:1686

   1685  1 000173   000000 471400 xsym               LDP1    B$JIT$
         1 000174   400000 236003                    LDQ     -131072,DU
         1 000175   100325 256100                    ORSQ    213,,PR1

      109     1686    3           CALL SSS$BLOCK;

   1686  1 000176   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 000177   000000 701000 xent               TSX1    SSS$BLOCK
         1 000200   000000 011000                    NOP     0

      110     1687    4           IF RAT.DCTX~=NK$LDCT.LDCTX THEN DO INHIBIT;

   1687  1 000201   200004 470500                    LDP0    RAT$,,AUTO
         1 000202   000003 720100                    LXL0    3,,PR0
         1 000203   200003 471500                    LDP1    LDCT$,,AUTO
         1 000204   100006 100100                    CMPX0   6,,PR1
         1 000205   000241 600000 1                  TZE     s:1699

PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:17   
      111     1688        /* Remove from chain of attached devices */
      112     1689    4             X$=LDCT$;

   1689  1 000206   200003 236300                    LDQ   ! LDCT$,,AUTO
         1 000207   200005 756300                    STQ   ! MODE,,AUTO

      113     1690    5             DO UNTIL X$->NK$LDCT.CLLNK$=LDCT$;

      114     1691    5               X$=X$->NK$LDCT.CLLNK$;

   1691  1 000210   200005 470700                    LDP0  ! MODE,,AUTO
         1 000211   000012 236300                    LDQ   ! 10,,PR0
         1 000212   200005 756300                    STQ   ! MODE,,AUTO

      115     1692    5             END;

   1692  1 000213   200005 470700                    LDP0  ! MODE,,AUTO
         1 000214   000012 236300                    LDQ   ! 10,,PR0
         1 000215   200003 116300                    CMPQ  ! LDCT$,,AUTO
         1 000216   000210 601200 1                  TNZ   ! s:1691

      116     1693    4             X$->NK$LDCT.CLLNK$=NK$LDCT.CLLNK$;

   1693  1 000217   200003 471700                    LDP1  ! LDCT$,,AUTO
         1 000220   100012 236300                    LDQ   ! 10,,PR1
         1 000221   000012 756300                    STQ   ! 10,,PR0

      117     1694    4             IF X$->NK$LDCT.CLLNK$~=X$ OR RAT.RES.SISID~=0 THEN EXIT;

   1694  1 000222   200005 116300                    CMPQ  ! MODE,,AUTO
         1 000223   000240 601200 1                  TNZ   ! s:1698
         1 000224   200004 473700                    LDP3  ! RAT$,,AUTO
         1 000225   300001 220300                    LDX0  ! 1,,PR3
         1 000226   000240 601200 1                  TNZ   ! s:1698

      118     1695    4             RAT.FLG.OPN='0'B;

PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:18   
   1695  1 000227   000000 236200 2                  LDQ   ! 0
         1 000230   300010 356300                    ANSQ  ! 8,,PR3

      119     1696    4             IF X$->NK$LDCT.DFLG.PRLS

   1696  1 000231   000006 236300                    LDQ   ! 6,,PR0
         1 000232   000200 316207                    CANQ  ! 128,DL
         1 000233   000240 600200 1                  TZE   ! s:1698

      120     1697    4               THEN CALL FRF$DISC (X$->NK$LDCT); /* Finish if disconnecting */

   1697  1 000234   200005 630700                    EPPR0 ! MODE,,AUTO
         1 000235   000017 631600 xsym               EPPR1 ! B_VECTNIL+15
         1 000236   000000 701200 xent               TSX1  ! FRF$DISC
         1 000237   000000 011200                    NOP   ! 0

      121     1698    4           END; ELSE DO INHIBIT;

   1698  1 000240   000322 710000 1                  TRA     s:1713

      122     1699    4             IF RAT.RES.SISID~=B$JIT.SYSID THEN EXIT;

   1699  1 000241   000000 473600 xsym               LDP3  ! B$JIT$
         1 000242   300000 236300                    LDQ   ! 0,,PR3
         1 000243   777777 376207                    ANQ   ! -1,DL
         1 000244   200022 756300                    STQ   ! AUTORAT+11,,AUTO
         1 000245   000001 236300                    LDQ   ! 1,,PR0
         1 000246   000022 732200                    QRS   ! 18
         1 000247   200022 116300                    CMPQ  ! AUTORAT+11,,AUTO
         1 000250   000322 601200 1                  TNZ   ! s:1713

      123     1700    5             IF DCB$->F$DCB.FCD AND NOT RAT.CLFLG.MULT THEN DO;

   1700  1 000251   200006 474700                    LDP4  ! DCB$,,AUTO
         1 000252   400031 236300                    LDQ   ! 25,,PR4
         1 000253   020000 316207                    CANQ  ! 8192,DL
         1 000254   000262 600200 1                  TZE   ! s:1704
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:19   
         1 000255   000003 236300                    LDQ   ! 3,,PR0
         1 000256   000010 316203                    CANQ  ! 8,DU
         1 000257   000262 601200 1                  TNZ   ! s:1704

      124     1701        /* Don't disconnect for test open or control devices */
      125     1702    5               RAT.DCTX=0; /* FRZ will fix RCOD. */

   1702  1 000260   000000 220203                    LDX0  ! 0,DU
         1 000261   000003 440300                    SXL0  ! 3,,PR0

      126     1703    5             END;

      127     1704    4             IF NK$LDCT.CLLNK$=LDCT$ THEN RAT.FLG.OPN='0'B;

   1704  1 000262   100012 236300                    LDQ   ! 10,,PR1
         1 000263   200003 116300                    CMPQ  ! LDCT$,,AUTO
         1 000264   000267 601200 1                  TNZ   ! s:1705

   1704  1 000265   000000 236200 2                  LDQ   ! 0
         1 000266   000010 356300                    ANSQ  ! 8,,PR0

      128     1705    4             IF RAT.CLFLG.MULT THEN IF RAT.FLG&%(RUPBIT|OPNBIT)

   1705  1 000267   000003 236300                    LDQ   ! 3,,PR0
         1 000270   000010 316203                    CANQ  ! 8,DU
         1 000271   000303 600200 1                  TZE   ! s:1708

   1705  1 000272   000010 236300                    LDQ   ! 8,,PR0
         1 000273   000033 736200                    QLS   ! 27
         1 000274   024000 376203                    ANQ   ! 10240,DU
         1 000275   000301 600200 1                  TZE   ! s:1707

      129     1706    4                 THEN NK$LDCT.USER=0;

   1706  1 000276   000000 236203                    LDQ   ! 0,DU
         1 000277   100007 552320                    STBQ  ! 7,'20'O,PR1
         1 000300   000303 710200 1                  TRA   ! s:1708
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:20   

      130     1707    4                 ELSE RAT.DCTX=0;

   1707  1 000301   000000 220203                    LDX0  ! 0,DU
         1 000302   000003 440300                    SXL0  ! 3,,PR0

      131     1708    4             IF RAT.DCTX=0 THEN NK$LDCT.RAT$=ADDR(NIL);

   1708  1 000303   000003 720300                    LXL0  ! 3,,PR0
         1 000304   000307 601200 1                  TNZ   ! s:1709

   1708  1 000305   000001 236200 xsym               LDQ   ! B_VECTNIL+1
         1 000306   100005 756300                    STQ   ! 5,,PR1

      132     1709    4             MODE=B$JIT.MODE;

   1709  1 000307   300000 236300                    LDQ   ! 0,,PR3
         1 000310   000040 772200                    QRL   ! 32
         1 000311   200005 756300                    STQ   ! MODE,,AUTO

      133     1710    4             CALL FRZ$RRESNA (RAT, MODE);

   1710  1 000312   200005 635700                    EPPR5 ! MODE,,AUTO
         1 000313   200023 455700                    STP5  ! AUTORAT+12,,AUTO
         1 000314   200004 236300                    LDQ   ! RAT$,,AUTO
         1 000315   200022 756300                    STQ   ! AUTORAT+11,,AUTO
         1 000316   200022 630700                    EPPR0 ! AUTORAT+11,,AUTO
         1 000317   000020 631600 xsym               EPPR1 ! B_VECTNIL+16
         1 000320   000000 701200 xent               TSX1  ! FRZ$RRESNA
         1 000321   000000 011200                    NOP   ! 0

      134     1711    4           END;

      135     1712    3         END;

      136     1713    2         DCB$->F$DCB.SETX=0;

PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:21   
   1713  1 000322   000000 220003                    LDX0    0,DU
         1 000323   200006 470500                    LDP0    DCB$,,AUTO
         1 000324   000051 440100                    SXL0    41,,PR0

      137     1714    2         RETURN;

   1714  1 000325   200020 221300                    LDX1  ! AUTORAT+9,,AUTO
         1 000326   000001 702211                    TSX2  ! 1,X1

(unnamed)
 Sect OctLoc
   0     000   103114 040040   060061 040040                                    CL  01

(unnamed)
 Sect OctLoc
   2     000   777777 777757                                                    ....
      138     1715    2   END;
      139     1716        /**/
      140     1717    1   END;
      141     1718        /**/
      142     1719        /**/

PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:22   
--  Include file information  --

   HF_LOCK_C.:E05TOU  cannot be made into a system file and is referenced.
   FR_SUBS.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   NK_SUBS.:E05TOU  is referenced.
   NK_LDCT_R.:E05TOU  cannot be made into a system file and is referenced.
   NK$LDCT.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   FR$RAT.:E05TOU  is referenced.
      No diagnostics issued in procedure FRB$CLS.
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:23   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     7-0-0/w STRC(324)   r     1 AUTORAT                    6-0-0/w PTR         r     1 DCB$
     3-0-0/w PTR         r     1 LDCT$                      5-0-0/w UBIN        r     1 MODE
     4-0-0/w PTR         r     1 RAT$                       5-0-0/w PTR         r     1 X$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$JIT$                     0-0-0/w PTR         r     1 N$DCT$$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(8856)  r     1 B$JIT                      0-0-0/d ASTR(3528)  r     1 F$DCB
     0-0-0/d STRC(864)   r     1 NK$LDCT
     0-0-0/w PTR         r     1 NK$LDCT$(0:0)
     0-0-0/w STRC(324)   r     1 RAT


   Procedure FRB$CLS requires 215 words for executable code.
   Procedure FRB$CLS requires 20 words of local(AUTO) storage.

    No errors detected in file FRB$CLS.:E05TSI    .
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:24   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:25   
          MINI XREF LISTING

AUTORAT
      1573**DCL      1679<<ASSIGN   1682<>CALL
AUTORAT.RES.ACTX
      1579**DCL      1680<<ASSIGN
B$JIT.CLRES
       750**DCL      1684<<ASSIGN   1685<<ASSIGN
B$JIT.CPFLAGS1.SLEAZE
       577**DCL       577--REDEF
B$JIT.DCB$
       651**DCL      1652>>ASSIGN
B$JIT.ERR.MID
       484**DCL       484--REDEF
B$JIT.JRESPEAK
       645**DCL       646--REDEF
B$JIT.MODE
       478**DCL      1637>>ASSIGN   1709>>ASSIGN
B$JIT.ORIGINATOR_PORT.FROM_CR
       754**DCL       754--REDEF     755--REDEF
B$JIT.PNR
       658**DCL       658--REDEF
B$JIT.SYSID
       483**DCL      1676>>IF       1699>>IF
B$JIT.TSLINE
       752**DCL       753--REDEF
B$JIT$
      1621**DCL       478--IMP-PTR  1637>>ASSIGN   1652>>ASSIGN   1676>>IF       1684>>ASSIGN   1685>>ASSIGN
      1699>>IF       1709>>ASSIGN
CLSIT
      1650**PROC     1628--CALL     1631--CALL     1635--CALL     1642--CALL
CREL1
      1632**LABEL    1632--GOTO
DCB$
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:26   
      1570**DCL      1638>>ASSIGN   1644>>ASSIGN   1652<<ASSIGN   1653>>IF       1654>>ASSIGN   1680>>ASSIGN
      1684>>IF       1685>>IF       1700>>IF       1713>>ASSIGN
DSMT
      1638**LABEL    1633--GOTO
F$DCB.ACTPOS
       133**DCL       133--REDEF
F$DCB.ARS
       108**DCL       108--REDEF
F$DCB.ATTR
       126**DCL       127--REDEF
F$DCB.BORROW
       141**DCL       141--REDEF     141--REDEF     141--REDEF
F$DCB.CRECX
       144**DCL      1680>>ASSIGN
F$DCB.DCBNAME.L
       155**DCL       155--IMP-SIZ
F$DCB.EOMCHAR
       112**DCL       112--REDEF
F$DCB.FCD
       121**DCL      1700>>IF
F$DCB.FLDID
       136**DCL       136--REDEF
F$DCB.FORM$
       130**DCL       130--REDEF
F$DCB.FSECT
       146**DCL       146--REDEF
F$DCB.FSN
       123**DCL       123--REDEF     123--REDEF     124--REDEF
F$DCB.HEADER$
       129**DCL       129--REDEF
F$DCB.IXTNSIZE
       127**DCL       127--REDEF
F$DCB.LASTSTA$
       117**DCL       117--REDEF
F$DCB.LVL
       142**DCL       142--REDEF
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:27   
F$DCB.NAME.C
       117**DCL       117--REDEF
F$DCB.NOEOF
       138**DCL       138--REDEF
F$DCB.NRECS
       128**DCL       128--REDEF
F$DCB.NRECX
       147**DCL       147--REDEF
F$DCB.OHDR
       139**DCL       139--REDEF
F$DCB.ORG
       122**DCL       122--REDEF
F$DCB.PRECNO
       145**DCL       145--REDEF
F$DCB.RCSZ
       150**DCL       150--REDEF
F$DCB.RES
       118**DCL       118--REDEF
F$DCB.RESNT.NUM
       119**DCL      1638<<ASSIGN   1644<<ASSIGN   1684>>IF       1685>>IF
F$DCB.SETX
       130**DCL       130--REDEF    1653>>IF       1654>>ASSIGN   1713<<ASSIGN
F$DCB.TAB$
       129**DCL       130--REDEF
F$DCB.TDA
       144**DCL       144--REDEF
F$DCB.WSN
       119**DCL       119--REDEF
FRF$DISC
      1612**DCL-ENT  1697--CALL
FRS$CLSTRS
      1615**DCL-ENT  1683--CALL
FRS$OPSTRS
      1613**DCL-ENT  1681--CALL
FRS$RESSUB
      1614**DCL-ENT  1682--CALL
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:28   
FRZ$DSMT
      1616**DCL-ENT  1645--CALL
FRZ$RRES
      1617**DCL-ENT  1639--CALL
FRZ$RRESNA
      1618**DCL-ENT  1710--CALL
LDCT$
      1566**DCL      1531--IMP-PTR  1654<<ASSIGN   1655>>ASSIGN   1687>>IF       1689>>ASSIGN   1690>>DOUNTIL
      1693>>ASSIGN   1704>>IF       1704>>IF       1706>>ASSIGN   1708>>ASSIGN
MODE
      1568**DCL      1569--REDEF    1637<<ASSIGN   1639<>CALL     1709<<ASSIGN   1710<>CALL
N$DCT$$
       868**DCL       868--IMP-PTR  1654>>ASSIGN
NK$LDCT
      1531**DCL      1697<>CALL
NK$LDCT.CLLNK$
      1553**DCL      1690>>DOUNTIL  1691>>ASSIGN   1693<<ASSIGN   1693>>ASSIGN   1694>>IF       1704>>IF
NK$LDCT.DDT$
      1533**DCL      1533--REDEF
NK$LDCT.DFLG.PRLS
      1538**DCL      1696>>IF
NK$LDCT.IOQ$
      1532**DCL      1533--REDEF
NK$LDCT.LDCTX
      1534**DCL      1534--REDEF    1687>>IF
NK$LDCT.LKFLG.ABORTED
      1546**DCL      1547--REDEF
NK$LDCT.RAT$
      1534**DCL      1655>>ASSIGN   1708<<ASSIGN
NK$LDCT.RLCID.LDCTX
      1556**DCL      1556--REDEF
NK$LDCT.STA$
      1552**DCL      1553--REDEF
NK$LDCT.SYMB$
      1531**DCL      1531--REDEF    1531--REDEF    1532--REDEF
NK$LDCT.USER
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:29   
      1541**DCL      1706<<ASSIGN
NK$LDCT$
       868**DCL      1654>>ASSIGN
RAT
        69**DCL      1639<>CALL     1645<>CALL     1679>>ASSIGN   1710<>CALL
RAT.CLFLG.MULT
        85**DCL      1700>>IF       1705>>IF
RAT.DCTX
        87**DCL      1687>>IF       1702<<ASSIGN   1707<<ASSIGN   1708>>IF
RAT.FLG
        95**DCL      1705>>IF
RAT.FLG.MTNN
       100**DCL      1638>>IF       1644>>IF
RAT.FLG.OPN
       101**DCL      1667>>IF       1675<<ASSIGN   1695<<ASSIGN   1704<<ASSIGN
RAT.RES.RFLG.OLT
        78**DCL      1632>>IF
RAT.RES.SISID
        72**DCL      1676>>IF       1694>>IF       1699>>IF
RAT.TYP
        93**DCL      1674>>IF
RAT$
      1567**DCL        69--IMP-PTR  1632>>IF       1638>>IF       1639>>CALL     1644>>IF       1645>>CALL
      1655<<ASSIGN   1656>>IF       1667>>IF       1674>>IF       1675>>ASSIGN   1676>>IF       1679>>ASSIGN
      1687>>IF       1694>>IF       1695>>ASSIGN   1699>>IF       1700>>IF       1702>>ASSIGN   1704>>ASSIGN
      1705>>IF       1705>>IF       1707>>ASSIGN   1708>>IF       1710>>CALL
RTN
      1644**LABEL    1628--CALLALT  1631--CALLALT  1635--CALLALT  1642--CALLALT
SC_BCLRES
      1623**DCL-ENT  1656--CALL
SC_RSNOPN
      1625**DCL-ENT  1667--CALL
SC_RSOWNR
      1624**DCL-ENT  1677--CALL
SSS$BLOCK
      1619**DCL-ENT  1686--CALL
PL6.E3A0      #001=FRB$CLS File=FRB$CLS.:E05TSI                                  TUE 07/29/97 17:21 Page:30   
X$
      1569**DCL      1689<<ASSIGN   1690>>DOUNTIL  1691<<ASSIGN   1691>>ASSIGN   1693>>ASSIGN   1694>>IF
      1694>>IF       1696>>IF       1697>>CALL
