VERSION E05

PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:1    
        1        1        /*M* PL6 ROUTINES FOR AARDVARK                       */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* PLM=8,IND=2,THI=2,ENU=2,CSU=2,DTI=4,DCI=4,ECU=4,AND */
        8        8        WRVID:  PROC ALTRET;
        9        9        /* This program reads or writes a VID
       10       10            and reads configuration data .    */
       11       11        %INCLUDE IS$MACROS;
       12     1286        %DEVINFO(STCLASS="SYMREF");
       13     1355        %DOIO_COMZONE(NAME=R_CNF_Z);
       14     1388    1   DCL R_CONF BIT(36) STATIC INIT('240000700000'O); /* Read conf IDCW            */
       15     1389    1   DCL POBUF BIT(1) SYMREF;
       16     1390    1   DCL GRAN$ PTR STATIC INIT(ADDR(POBUF));
       17     1391        %DCW_STRUCT(NAME=GRANDCW,STCLASS="REDEF GRAN$");
       18     1409    1   DCL SYS_DPX UBIN WORD SYMREF;
       19     1410    1   DCL   RPM_FLG BIT(1) SYMREF;
       20     1411    1   DCL   HIGHEST_CHAN UBIN WORD;
       21     1412    1   DCL MINIQC_PL6 ENTRY(5) ALTRET;
       22     1413    1   DCL TYPEC ENTRY(1);
       23     1414    1   DCL DOIOX ENTRY(4);
       24     1415        %TEXTC(N#=VIDERM,M#="' Error writing VID . '");
       25     1420        %TEXTC(N#=VIDERM1,M#="' Error reading VID . '");
       26     1425    1   DCL CNF$ PTR STATIC INIT(ADDR(CNF));
       27     1426        %DCW_STRUCT(NAME=CNFDCW,STCLASS="REDEF CNF$");
       28     1444    1   DCL 1 CNF_FIPS(0:135) STATIC,
       29     1445    1         2 DEVICE_STATUS BIT(9) INIT('0'B*0),
       30     1446    1         2 DEVICE_TYPE UBIN(9) UNAL INIT(0*0),
       31     1447    1         2 DEVICE_FORMAT BIT(9) INIT('0'B*0),
       32     1448    1         2 RFU BIT(9) INIT('0'B*0);
       33     1449    1   DCL 1 CNF(0:271) REDEF CNF_FIPS,
       34     1450    1         2 TYPE BIT(9) ,
       35     1451    1         2 DEV# UBIN(9) UNAL ;
       36     1452    1   DCL DPCNF BIT(9) CALIGNED STATIC SYMDEF INIT('0'B); /* System disk device type */
       37     1453    1   DCL I UBIN WORD;
PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:2    
       38     1454    1   DCL CODE UBIN WORD;
       39     1455    1   DCL SAVDEV UBIN(6);
       40     1456        /**/
       41     1457    1           CODE=%FCNWDB;                   /* Write disk binary                  */
       42     1458    1           GOTO COMM;
       43     1459    1   RDVID:  ENTRY ALTRET;
       44     1460    1           CODE=%FCNRDB;                   /* Read disk binary                   */
       45     1461    1   COMM:
       46     1462    1           GRANDCW.TALLY=1024;
       47     1463    1           CALL MINIQC_PL6(SYS_DPX,ADDR(GRANDCW),,CODE,%G_VID) ALTRET(VIDERR);
       48     1464    1   READ_CONF:ENTRY ALTRET;
       49     1465    1           HIGHEST_CHAN = %HIGH_CHAN;
       50     1466    1           IF RPM_FLG THEN
       51     1467    1             HIGHEST_CHAN = %HIGH_RPM_CHAN;
       52     1468    1           CNFDCW.TALLY=HIGHEST_CHAN/2 + 1; /* Init read config DCW              */
       53     1469    1           R_CNF_Z.IDCW$=ADDR(R_CONF);
       54     1470    1           R_CNF_Z.DCW$=ADDR(CNFDCW);
       55     1471    1           R_CNF_Z.BDCW.H2='0'B;
       56     1472    1           R_CNF_Z.TDCW.TYPE='10'B;
       57     1473    1           SAVDEV=DEVINFO.DEV#(SYS_DPX);
       58     1474    1           DEVINFO.DEV#(SYS_DPX)=0;
       59     1475    1           CALL DOIOX(SYS_DPX,ADDR(R_CNF_Z));
       60     1476    1           DEVINFO.DEV#(SYS_DPX)=SAVDEV;
       61     1477    1           IF CNF_FIPS.DEVICE_TYPE(DEVINFO.DEV#(SYS_DPX)) = %FIPS_3380D OR
       62     1478    1             CNF_FIPS.DEVICE_TYPE(DEVINFO.DEV#(SYS_DPX)) = %FIPS_3380E  OR
       63     1479    1             CNF_FIPS.DEVICE_TYPE(DEVINFO.DEV#(SYS_DPX)) = %FIPS_3390J  OR
       64     1480    1             CNF_FIPS.DEVICE_TYPE(DEVINFO.DEV#(SYS_DPX)) = %FIPS_3391K
       65     1481    2             THEN DO ;
       66     1482    2                 DPCNF = BINBIT(CNF_FIPS.DEVICE_TYPE(DEVINFO.DEV#(SYS_DPX))*16,9);
       67     1483    2                 RETURN;
       68     1484    2               END;
       69     1485    2             ELSE DO ;
       70     1486    2                 I = DEVINFO.DEV#(SYS_DPX) + ( (DEVINFO.DEV#(SYS_DPX)/8)*9) + 1;
       71     1487    2                 IF  CNF_FIPS.DEVICE_TYPE(I) = %MDS_1
       72     1488    2                   OR CNF_FIPS.DEVICE_TYPE(I) = %MDS_2
       73     1489    3                   THEN DO ;
       74     1490    3                       DPCNF = BINBIT(CNF_FIPS.DEVICE_TYPE(I)*16, 9 ) ;
PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:3    
       75     1491    3                       RETURN ;
       76     1492    3                     END ;
       77     1493    2               END ;
       78     1494    2           DO I=0 TO %HIGH_CHAN;
       79     1495    2             IF DEVINFO.DEV#(SYS_DPX)=CNF.DEV#(I) THEN GOTO DPTYPE;
       80     1496    2               ELSE;
       81     1497    2           END;                            /*DO I=                               */
       82     1498    1           RETURN;                         /* No device-> no type                */
       83     1499    1   DPTYPE:
       84     1500    1           DPCNF=CNF.TYPE(I);
       85     1501    1           RETURN;
       86     1502    1   VIDERR:
       87     1503    2           IF CODE=%FCNWDB THEN DO;
       88     1504    2                 CALL TYPEC(VIDERM);
       89     1505    2                 ALTRETURN;
       90     1506    2               END;                        /*THEN                                */
       91     1507    1             ELSE;
       92     1508    1           CALL TYPEC(VIDERM1);
       93     1509    1           ALTRETURN;
       94     1510    1   END WRVID;
       95     1511        %EOD;

PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:4    
--  Include file information  --

   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure WRVID.

   Procedure WRVID requires 184 words for executable code.
   Procedure WRVID requires 14 words of local(AUTO) storage.

PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:5    

 Object Unit name= WRVID                                      File name= ISI$FIXSYST.:E05TOU
 UTS= JUL 29 '97 22:49:17.12 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none   156    234  WRVID
    1   Proc  even  none   184    270  WRVID
    2  RoData even  none    10     12  WRVID

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes    yes     yes      Std        0  WRVID
     1      5          yes     yes      Std        0  RDVID
     1     33          yes     yes      Std        0  READ_CONF

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      0  R_CNF_Z                            0      4  VIDERM
    0     13  VIDERM1                            0    233  DPCNF
PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:6    

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       5 MINIQC_PL6
         yes           Std       4 DOIOX
         yes           Std       1 TYPEC
                       nStd      0 X66_AUTO_0
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     DEVINFO                               POBUF                                 SYS_DPX
     RPM_FLG                               B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:7    


        1        1        /*M* PL6 ROUTINES FOR AARDVARK                       */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* PLM=8,IND=2,THI=2,ENU=2,CSU=2,DTI=4,DCI=4,ECU=4,AND */
        8        8        WRVID:  PROC ALTRET;

      8  1 000000   000000 700200 xent  WRVID        TSX0  ! X66_AUTO_0
         1 000001   000016 000000                    ZERO    14,0

        9        9        /* This program reads or writes a VID
       10       10            and reads configuration data .    */
       11       11        %INCLUDE IS$MACROS;
       12     1286        %DEVINFO(STCLASS="SYMREF");
       13     1355        %DOIO_COMZONE(NAME=R_CNF_Z);
       14     1388    1   DCL R_CONF BIT(36) STATIC INIT('240000700000'O); /* Read conf IDCW            */
       15     1389    1   DCL POBUF BIT(1) SYMREF;
       16     1390    1   DCL GRAN$ PTR STATIC INIT(ADDR(POBUF));
       17     1391        %DCW_STRUCT(NAME=GRANDCW,STCLASS="REDEF GRAN$");
       18     1409    1   DCL SYS_DPX UBIN WORD SYMREF;
       19     1410    1   DCL   RPM_FLG BIT(1) SYMREF;
       20     1411    1   DCL   HIGHEST_CHAN UBIN WORD;
       21     1412    1   DCL MINIQC_PL6 ENTRY(5) ALTRET;
       22     1413    1   DCL TYPEC ENTRY(1);
       23     1414    1   DCL DOIOX ENTRY(4);
       24     1415        %TEXTC(N#=VIDERM,M#="' Error writing VID . '");
       25     1420        %TEXTC(N#=VIDERM1,M#="' Error reading VID . '");
       26     1425    1   DCL CNF$ PTR STATIC INIT(ADDR(CNF));
       27     1426        %DCW_STRUCT(NAME=CNFDCW,STCLASS="REDEF CNF$");
       28     1444    1   DCL 1 CNF_FIPS(0:135) STATIC,
       29     1445    1         2 DEVICE_STATUS BIT(9) INIT('0'B*0),
       30     1446    1         2 DEVICE_TYPE UBIN(9) UNAL INIT(0*0),
       31     1447    1         2 DEVICE_FORMAT BIT(9) INIT('0'B*0),
       32     1448    1         2 RFU BIT(9) INIT('0'B*0);
PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:8    
       33     1449    1   DCL 1 CNF(0:271) REDEF CNF_FIPS,
       34     1450    1         2 TYPE BIT(9) ,
       35     1451    1         2 DEV# UBIN(9) UNAL ;
       36     1452    1   DCL DPCNF BIT(9) CALIGNED STATIC SYMDEF INIT('0'B); /* System disk device type */
       37     1453    1   DCL I UBIN WORD;
       38     1454    1   DCL CODE UBIN WORD;
       39     1455    1   DCL SAVDEV UBIN(6);
       40     1456        /**/
       41     1457    1           CODE=%FCNWDB;                   /* Write disk binary                  */

   1457  1 000002   000001 235007                    LDA     1,DL
         1 000003   200005 755100                    STA     CODE,,AUTO

       42     1458    1           GOTO COMM;

   1458  1 000004   000010 710000 1                  TRA     COMM

       43     1459    1   RDVID:  ENTRY ALTRET;

   1459  1 000005   000000 700200 xent  RDVID        TSX0  ! X66_AUTO_0
         1 000006   000016 000000                    ZERO    14,0

       44     1460    1           CODE=%FCNRDB;                   /* Read disk binary                   */

   1460  1 000007   200005 450100                    STZ     CODE,,AUTO

       45     1461    1   COMM:
       46     1462    1           GRANDCW.TALLY=1024;

   1462  1 000010   002000 236007       COMM         LDQ     1024,DL
         1 000011   000003 752003 0                  STCQ    GRAN$,'03'O

       47     1463    1           CALL MINIQC_PL6(SYS_DPX,ADDR(GRANDCW),,CODE,%G_VID) ALTRET(VIDERR);

   1463  1 000012   000000 236000 2                  LDQ     0
         1 000013   200010 756100                    STQ     SAVDEV+2,,AUTO
         1 000014   000001 236000 2                  LDQ     1
PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:9    
         1 000015   200015 756100                    STQ     SAVDEV+7,,AUTO
         1 000016   200005 630500                    EPPR0   CODE,,AUTO
         1 000017   200014 450500                    STP0    SAVDEV+6,,AUTO
         1 000020   000001 236000 xsym               LDQ     B_VECTNIL+1
         1 000021   200013 756100                    STQ     SAVDEV+5,,AUTO
         1 000022   200010 631500                    EPPR1   SAVDEV+2,,AUTO
         1 000023   200012 451500                    STP1    SAVDEV+4,,AUTO
         1 000024   000002 236000 2                  LDQ     2
         1 000025   200011 756100                    STQ     SAVDEV+3,,AUTO
         1 000026   200011 630500                    EPPR0   SAVDEV+3,,AUTO
         1 000027   000023 631400 xsym               EPPR1   B_VECTNIL+19
         1 000030   000000 701000 xent               TSX1    MINIQC_PL6
         1 000031   000253 702000 1                  TSX2    VIDERR
         1 000032   000035 710000 1                  TRA     s:1465

       48     1464    1   READ_CONF:ENTRY ALTRET;

   1464  1 000033   000000 700200 xent  READ_CONF    TSX0  ! X66_AUTO_0
         1 000034   000016 000000                    ZERO    14,0

       49     1465    1           HIGHEST_CHAN = %HIGH_CHAN;

   1465  1 000035   000077 235007                    LDA     63,DL
         1 000036   200003 755100                    STA     HIGHEST_CHAN,,AUTO

       50     1466    1           IF RPM_FLG THEN

   1466  1 000037   000000 234000 xsym               SZN     RPM_FLG
         1 000040   000043 605000 1                  TPL     s:1468

       51     1467    1             HIGHEST_CHAN = %HIGH_RPM_CHAN;

   1467  1 000041   000177 236007                    LDQ     127,DL
         1 000042   200003 756100                    STQ     HIGHEST_CHAN,,AUTO

       52     1468    1           CNFDCW.TALLY=HIGHEST_CHAN/2 + 1; /* Init read config DCW              */

PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:10   
   1468  1 000043   200003 236100                    LDQ     HIGHEST_CHAN,,AUTO
         1 000044   000001 772000                    QRL     1
         1 000045   000001 036007                    ADLQ    1,DL
         1 000046   000022 752003 0                  STCQ    CNF$,'03'O

       53     1469    1           R_CNF_Z.IDCW$=ADDR(R_CONF);

   1469  1 000047   000003 236000 2                  LDQ     3
         1 000050   000000 756000 0                  STQ     R_CNF_Z

       54     1470    1           R_CNF_Z.DCW$=ADDR(CNFDCW);

   1470  1 000051   000004 236000 2                  LDQ     4
         1 000052   000001 756000 0                  STQ     R_CNF_Z+1

       55     1471    1           R_CNF_Z.BDCW.H2='0'B;

   1471  1 000053   000000 220003                    LDX0    0,DU
         1 000054   000001 440000 0                  SXL0    R_CNF_Z+1

       56     1472    1           R_CNF_Z.TDCW.TYPE='10'B;

   1472  1 000055   000001 236000 0                  LDQ     R_CNF_Z+1
         1 000056   000005 376000 2                  ANQ     5
         1 000057   020000 276007                    ORQ     8192,DL
         1 000060   000001 756000 0                  STQ     R_CNF_Z+1

       57     1473    1           SAVDEV=DEVINFO.DEV#(SYS_DPX);

   1473  1 000061   000000 236000 xsym               LDQ     SYS_DPX
         1 000062   000014 402007                    MPY     12,DL
         1 000063   000000 236006 xsym               LDQ     DEVINFO,QL
         1 000064   000025 772000                    QRL     21
         1 000065   000077 376007                    ANQ     63,DL
         1 000066   000036 736000                    QLS     30
         1 000067   200006 756100                    STQ     SAVDEV,,AUTO

PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:11   
       58     1474    1           DEVINFO.DEV#(SYS_DPX)=0;

   1474  1 000070   000000 236000 xsym               LDQ     SYS_DPX
         1 000071   000014 402007                    MPY     12,DL
         1 000072   000000 621006                    EAX1    0,QL
         1 000073   000006 236000 2                  LDQ     6
         1 000074   000000 356011 xsym               ANSQ    DEVINFO,X1

       59     1475    1           CALL DOIOX(SYS_DPX,ADDR(R_CNF_Z));

   1475  1 000075   000007 236000 2                  LDQ     7
         1 000076   200010 756100                    STQ     SAVDEV+2,,AUTO
         1 000077   200010 630500                    EPPR0   SAVDEV+2,,AUTO
         1 000100   200013 450500                    STP0    SAVDEV+5,,AUTO
         1 000101   000002 236000 2                  LDQ     2
         1 000102   200012 756100                    STQ     SAVDEV+4,,AUTO
         1 000103   200012 630500                    EPPR0   SAVDEV+4,,AUTO
         1 000104   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000105   000000 701000 xent               TSX1    DOIOX
         1 000106   000000 011000                    NOP     0

       60     1476    1           DEVINFO.DEV#(SYS_DPX)=SAVDEV;

   1476  1 000107   000000 236000 xsym               LDQ     SYS_DPX
         1 000110   000014 402007                    MPY     12,DL
         1 000111   000000 620006                    EAX0    0,QL
         1 000112   200006 236100                    LDQ     SAVDEV,,AUTO
         1 000113   000011 772000                    QRL     9
         1 000114   000000 676010 xsym               ERQ     DEVINFO,X0
         1 000115   000770 376003                    ANQ     504,DU
         1 000116   000000 656010 xsym               ERSQ    DEVINFO,X0

       61     1477    1           IF CNF_FIPS.DEVICE_TYPE(DEVINFO.DEV#(SYS_DPX)) = %FIPS_3380D OR

   1477  1 000117   000000 236010 xsym               LDQ     DEVINFO,X0
         1 000120   000025 772000                    QRL     21
         1 000121   000077 376007                    ANQ     63,DL
PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:12   
         1 000122   000023 236006 0                  LDQ     CNF_FIPS,QL
         1 000123   000777 376003                    ANQ     511,DU
         1 000124   000003 116003                    CMPQ    3,DU
         1 000125   000153 600000 1                  TZE     s:1482
         1 000126   000000 236010 xsym               LDQ     DEVINFO,X0
         1 000127   000025 772000                    QRL     21
         1 000130   000077 376007                    ANQ     63,DL
         1 000131   000023 236006 0                  LDQ     CNF_FIPS,QL
         1 000132   000777 376003                    ANQ     511,DU
         1 000133   000004 116003                    CMPQ    4,DU
         1 000134   000153 600000 1                  TZE     s:1482
         1 000135   000000 236010 xsym               LDQ     DEVINFO,X0
         1 000136   000025 772000                    QRL     21
         1 000137   000077 376007                    ANQ     63,DL
         1 000140   000023 236006 0                  LDQ     CNF_FIPS,QL
         1 000141   000777 376003                    ANQ     511,DU
         1 000142   000026 116003                    CMPQ    22,DU
         1 000143   000153 600000 1                  TZE     s:1482
         1 000144   000000 236010 xsym               LDQ     DEVINFO,X0
         1 000145   000025 772000                    QRL     21
         1 000146   000077 376007                    ANQ     63,DL
         1 000147   000023 236006 0                  LDQ     CNF_FIPS,QL
         1 000150   000777 376003                    ANQ     511,DU
         1 000151   000025 116003                    CMPQ    21,DU
         1 000152   000164 601000 1                  TNZ     s:1486

       62     1478    1             CNF_FIPS.DEVICE_TYPE(DEVINFO.DEV#(SYS_DPX)) = %FIPS_3380E  OR
       63     1479    1             CNF_FIPS.DEVICE_TYPE(DEVINFO.DEV#(SYS_DPX)) = %FIPS_3390J  OR
       64     1480    1             CNF_FIPS.DEVICE_TYPE(DEVINFO.DEV#(SYS_DPX)) = %FIPS_3391K
       65     1481    2             THEN DO ;

       66     1482    2                 DPCNF = BINBIT(CNF_FIPS.DEVICE_TYPE(DEVINFO.DEV#(SYS_DPX))*16,9);

   1482  1 000153   000000 236010 xsym               LDQ     DEVINFO,X0
         1 000154   000025 772000                    QRL     21
         1 000155   000077 376007                    ANQ     63,DL
         1 000156   000023 236006 0                  LDQ     CNF_FIPS,QL
PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:13   
         1 000157   000016 772000                    QRL     14
         1 000160   017760 376007                    ANQ     8176,DL
         1 000161   000033 736000                    QLS     27
         1 000162   000233 756000 0                  STQ     DPCNF

       67     1483    2                 RETURN;

   1483  1 000163   000000 702200 xent               TSX2  ! X66_ARET

       68     1484    2               END;
       69     1485    2             ELSE DO ;

       70     1486    2                 I = DEVINFO.DEV#(SYS_DPX) + ( (DEVINFO.DEV#(SYS_DPX)/8)*9) + 1;

   1486  1 000164   000000 236010 xsym               LDQ     DEVINFO,X0
         1 000165   000025 772000                    QRL     21
         1 000166   000077 376007                    ANQ     63,DL
         1 000167   000003 772000                    QRL     3
         1 000170   200010 756100                    STQ     SAVDEV+2,,AUTO
         1 000171   000000 236010 xsym               LDQ     DEVINFO,X0
         1 000172   000025 772000                    QRL     21
         1 000173   000077 376007                    ANQ     63,DL
         1 000174   200011 756100                    STQ     SAVDEV+3,,AUTO
         1 000175   200010 236100                    LDQ     SAVDEV+2,,AUTO
         1 000176   000011 402007                    MPY     9,DL
         1 000177   200011 036100                    ADLQ    SAVDEV+3,,AUTO
         1 000200   000001 036007                    ADLQ    1,DL
         1 000201   200004 756100                    STQ     I,,AUTO

       71     1487    2                 IF  CNF_FIPS.DEVICE_TYPE(I) = %MDS_1

   1487  1 000202   000023 236006 0                  LDQ     CNF_FIPS,QL
         1 000203   000777 376003                    ANQ     511,DU
         1 000204   000005 116003                    CMPQ    5,DU
         1 000205   000213 600000 1                  TZE     s:1490
         1 000206   200004 721100                    LXL1    I,,AUTO
         1 000207   000023 236011 0                  LDQ     CNF_FIPS,X1
PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:14   
         1 000210   000777 376003                    ANQ     511,DU
         1 000211   000007 116003                    CMPQ    7,DU
         1 000212   000222 601000 1                  TNZ     s:1494

       72     1488    2                   OR CNF_FIPS.DEVICE_TYPE(I) = %MDS_2
       73     1489    3                   THEN DO ;

       74     1490    3                       DPCNF = BINBIT(CNF_FIPS.DEVICE_TYPE(I)*16, 9 ) ;

   1490  1 000213   200004 721100                    LXL1    I,,AUTO
         1 000214   000023 236011 0                  LDQ     CNF_FIPS,X1
         1 000215   000016 772000                    QRL     14
         1 000216   017760 376007                    ANQ     8176,DL
         1 000217   000033 736000                    QLS     27
         1 000220   000233 756000 0                  STQ     DPCNF

       75     1491    3                       RETURN ;

   1491  1 000221   000000 702200 xent               TSX2  ! X66_ARET

       76     1492    3                     END ;
       77     1493    2               END ;
       78     1494    2           DO I=0 TO %HIGH_CHAN;

   1494  1 000222   200004 450100                    STZ     I,,AUTO

       79     1495    2             IF DEVINFO.DEV#(SYS_DPX)=CNF.DEV#(I) THEN GOTO DPTYPE;

   1495  1 000223   200004 235100                    LDA     I,,AUTO
         1 000224   000001 735000                    ALS     1
         1 000225   000100 101405                    MRL     fill='000'O
         1 000226   000023 200001 0                  ADSC9   CNF_FIPS,A               cn=1,n=1
         1 000227   200010 000004                    ADSC9   SAVDEV+2,,AUTO           cn=0,n=4
         1 000230   000000 236000 xsym               LDQ     SYS_DPX
         1 000231   000014 402007                    MPY     12,DL
         1 000232   000000 236006 xsym               LDQ     DEVINFO,QL
         1 000233   000025 772000                    QRL     21
PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:15   
         1 000234   000077 376007                    ANQ     63,DL
         1 000235   200010 116100                    CMPQ    SAVDEV+2,,AUTO
         1 000236   000245 600000 1                  TZE     DPTYPE

       80     1496    2               ELSE;
       81     1497    2           END;                            /*DO I=                               */

   1497  1 000237   200004 235100                    LDA     I,,AUTO
         1 000240   000001 035007                    ADLA    1,DL
         1 000241   200004 755100                    STA     I,,AUTO
         1 000242   000100 115007                    CMPA    64,DL
         1 000243   000223 602000 1                  TNC     s:1495

       82     1498    1           RETURN;                         /* No device-> no type                */

   1498  1 000244   000000 702200 xent               TSX2  ! X66_ARET

       83     1499    1   DPTYPE:
       84     1500    1           DPCNF=CNF.TYPE(I);

   1500  1 000245   200004 235100       DPTYPE       LDA     I,,AUTO
         1 000246   000001 735000                    ALS     1
         1 000247   000000 100405                    MLR     fill='000'O
         1 000250   000023 000001 0                  ADSC9   CNF_FIPS,A               cn=0,n=1
         1 000251   000233 000001 0                  ADSC9   DPCNF                    cn=0,n=1

       85     1501    1           RETURN;

   1501  1 000252   000000 702200 xent               TSX2  ! X66_ARET

       86     1502    1   VIDERR:
       87     1503    2           IF CODE=%FCNWDB THEN DO;

   1503  1 000253   200005 235100       VIDERR       LDA     CODE,,AUTO
         1 000254   000001 115007                    CMPA    1,DL
         1 000255   000263 601000 1                  TNZ     s:1508

PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:16   
       88     1504    2                 CALL TYPEC(VIDERM);

   1504  1 000256   000010 630400 2                  EPPR0   8
         1 000257   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000260   000000 701000 xent               TSX1    TYPEC
         1 000261   000000 011000                    NOP     0

       89     1505    2                 ALTRETURN;

   1505  1 000262   000000 702200 xent               TSX2  ! X66_AALT

       90     1506    2               END;                        /*THEN                                */
       91     1507    1             ELSE;
       92     1508    1           CALL TYPEC(VIDERM1);

   1508  1 000263   000011 630400 2                  EPPR0   9
         1 000264   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000265   000000 701000 xent               TSX1    TYPEC
         1 000266   000000 011000                    NOP     0

       93     1509    1           ALTRETURN;

   1509  1 000267   000000 702200 xent               TSX2  ! X66_AALT
       94     1510    1   END WRVID;
       95     1511        %EOD;

PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:17   
--  Include file information  --

   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure WRVID.
PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:18   

 **** Variables and constants ****

  ****  Section 000  Data  WRVID

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    23-0-0/b STRC(18)    r     1 CNF(0:271)                22-0-0/w PTR         r     1 CNF$
    22-0-0/w STRC        r     1 CNFDCW                    23-0-0/b STRC        r     1 CNF_FIPS(0:135)
   233-0-0/c BIT (9)     r     1 DPCNF                      3-0-0/w PTR         r     1 GRAN$
     3-0-0/w STRC        r     1 GRANDCW                    0-0-0/w STRC(72)    r     1 R_CNF_Z
     2-0-0/b BIT         r     1 R_CONF                     4-0-0/w STRC(225)   r     1 VIDERM
    13-0-0/w STRC(225)   r     1 VIDERM1

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     5-0-0/w UBIN        r     1 CODE                       3-0-0/w UBIN        r     1 HIGHEST_CHAN
     4-0-0/w UBIN        r     1 I                          6-0-0/w UBIN(6)     r     1 SAVDEV

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(396)   r     1 DEVINFO(0:21)              0-0-0/b BIT         r     1 POBUF
     0-0-0/b BIT         r     1 RPM_FLG                    0-0-0/w UBIN        r     1 SYS_DPX


   Procedure WRVID requires 184 words for executable code.
   Procedure WRVID requires 14 words of local(AUTO) storage.
PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:19   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:20   
          MINI XREF LISTING

CNF
      1449**DCL      1425--DCLINIT
CNF.DEV#
      1451**DCL      1495>>IF
CNF.TYPE
      1450**DCL      1500>>ASSIGN
CNF$
      1425**DCL      1436--REDEF
CNFDCW
      1436**DCL      1470--ASSIGN
CNFDCW.TALLY
      1441**DCL      1468<<ASSIGN
CNF_FIPS
      1444**DCL      1449--REDEF
CNF_FIPS.DEVICE_TYPE
      1446**DCL      1477>>IF       1477>>IF       1477>>IF       1477>>IF       1482>>ASSIGN   1487>>IF
      1487>>IF       1490>>ASSIGN
CODE
      1454**DCL      1457<<ASSIGN   1460<<ASSIGN   1463<>CALL     1503>>IF
COMM
      1462**LABEL    1458--GOTO
DEVINFO.DEV#
      1299**DCL      1473>>ASSIGN   1474<<ASSIGN   1476<<ASSIGN   1477>>IF       1477>>IF       1477>>IF
      1477>>IF       1482>>ASSIGN   1486>>ASSIGN   1486>>ASSIGN   1495>>IF
DEVINFO.PCWS
      1302**DCL      1313--REDEF
DEVINFO.RPM_PTRS.EF_DCWS$
      1315**DCL      1316--REDEF
DEVINFO.STATUS
      1319**DCL      1338--REDEF
DOIOX
      1414**DCL-ENT  1475--CALL
PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:21   
DPCNF
      1452**DCL      1482<<ASSIGN   1490<<ASSIGN   1500<<ASSIGN
DPTYPE
      1500**LABEL    1495--GOTO
GRAN$
      1390**DCL      1401--REDEF
GRANDCW
      1401**DCL      1463--CALL
GRANDCW.TALLY
      1406**DCL      1462<<ASSIGN
HIGHEST_CHAN
      1411**DCL      1465<<ASSIGN   1467<<ASSIGN   1468>>ASSIGN
I
      1453**DCL      1486<<ASSIGN   1487>>IF       1487>>IF       1490>>ASSIGN   1494<<DOINDEX  1495>>IF
      1500>>ASSIGN
MINIQC_PL6
      1412**DCL-ENT  1463--CALL
POBUF
      1389**DCL      1390--DCLINIT
RPM_FLG
      1410**DCL      1466>>IF
R_CNF_Z
      1366**DCL      1475--CALL
R_CNF_Z.BDCW.H2
      1379**DCL      1471<<ASSIGN
R_CNF_Z.DCW
      1373**DCL      1377--REDEF    1380--REDEF    1381--REDEF
R_CNF_Z.DCW$
      1380**DCL      1470<<ASSIGN
R_CNF_Z.IDCW$
      1372**DCL      1469<<ASSIGN
R_CNF_Z.TDCW.TYPE
      1384**DCL      1472<<ASSIGN
R_CNF_Z.W1
      1367**DCL      1372--REDEF
R_CONF
PL6.E3A0      #001=WRVID File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:49 Page:22   
      1388**DCL      1469--ASSIGN
SAVDEV
      1455**DCL      1473<<ASSIGN   1476>>ASSIGN
SYS_DPX
      1409**DCL      1463<>CALL     1473>>ASSIGN   1474>>ASSIGN   1475<>CALL     1476>>ASSIGN   1477>>IF
      1477>>IF       1477>>IF       1477>>IF       1482>>ASSIGN   1486>>ASSIGN   1486>>ASSIGN   1495>>IF
TYPEC
      1413**DCL-ENT  1504--CALL     1508--CALL
VIDERM
      1416**DCL      1504<>CALL
VIDERM1
      1421**DCL      1508<>CALL
VIDERR
      1503**LABEL    1463--CALLALT

PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:23   
       96        1        /*T***********************************************************/
       97        2        /*T*                                                         */
       98        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       99        4        /*T*                                                         */
      100        5        /*T***********************************************************/
      101        6        CHKVID: PROC ALTRET;
      102        7        /* This program checks Volume ID for system disk pack */
      103        8        /* ALTRETURN if: not a CP6 pack or
      104        9                         System area=0 or
      105       10                         not a primary pack set .
      106       11           RETURN if all OK .                     */
      107       12        %INCLUDE IS$MACROS;
      108     1287        %FM$VID(STCLASS="BASED(VID$)");
      109     1333    1   DCL VID$ PTR STATIC INIT(ADDR(POBUF));
      110     1334    1   DCL POBUF BIT(1) SYMREF;
      111     1335        /* Simplified VID */
      112     1336    1   DCL 1 S_VID STATIC ALIGNED,
      113     1337    1         2 ID CHAR(4) INIT('CP6 '),
      114     1338    1         2 INSTID BIT(36) INIT('0'B),
      115     1339    1         2 VSN UBIN WORD INIT(4095),
      116     1340    1         2 PSN CHAR(6) INIT('CP-6''S'),
      117     1341    1         2 VOLCNT UBIN(18) UNAL INIT(0),
      118     1342    1         2 SYSSIZE UBIN WORD INIT(0),
      119     1343    1         2 SYSDIRDA UBIN WORD INIT(4),
      120     1344    1         2 INITTIME UBIN WORD INIT(0),
      121     1345    1         2 SECTSTRT(0:1) UBIN WORD INIT(0*0);
      122     1346    1   DCL NF_FLG BIT(3) SYMREF;               /* New Files flag                     */
      123     1347        %TEXTC(N#=VIDNCPM,M#="' NOT a CP-6 pack - OK to proceed (Y/N) ? '");
      124     1352        %TEXTC(N#=VIDSYSAM,M#="' System area size incorrect - OK to correct (Y/N) ? '");
      125     1357        %TEXTC(N#=VIDSNM,M#="' Serial number = '");
      126     1362        %TEXTC(N#=VIDSAZM,M#="' 00000 #SSSSSS No system area - OK to proceed (Y/N) ? '");
      127     1367        %TEXTC(N#=VIDNSYSM,M#=
              1367            "' 00000 #SSSSSS is NOT a system volume - OK  to proceed (Y/N) ? '");
      128     1372    1   DCL MESSAGE$ PTR;
      129     1373    1   DCL 1 TEXTM BASED(MESSAGE$),
      130     1374    1         2 CNT UBIN WORD,
      131     1375    1         2 TXT CHAR(TEXTM.CNT);
PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:24   
      132     1376    1   DCL 1 ANSBUF SYMREF,
      133     1377    1         2 CNT UBIN WORD,
      134     1378    1         2 TXT CHAR(16);
      135     1379    1   DCL FIELD$ PTR SYMREF;
      136     1380    1   DCL FIELD_LEN UBIN WORD SYMREF;
      137     1381    1   DCL ALPHA_FLG BIT(1) SYMREF;
      138     1382    1   DCL ANS CHAR(16) BASED(FIELD$);
      139     1383    1   DCL TOPDA UBIN WORD SYMREF;
      140     1384    1   DCL NUMBER UBIN WORD;
      141     1385        /**/
      142     1386    1   DCL WRVID ENTRY ALTRET;
      143     1387    1   DCL KEYIN ENTRY(2) ALTRET;
      144     1388    1   DCL UPPER_CASE ENTRY(2);
      145     1389    1   DCL GETFD ENTRY(2) ALTRET;
      146     1390        /**/
      147     1391    1           IF FM$VID.ID=S_VID.ID THEN GOTO VIDCP6; /* It's a CP6 pack            */
      148     1392    1             ELSE;
      149     1393        /* Ask if OK */
      150     1394    1   ASK1:
      151     1395    1           CALL KEYIN(VIDNCPM,ANSBUF);
      152     1396    1           CALL UPPER_CASE(ANSBUF.TXT,1);
      153     1397    2           DO SELECT(SUBSTR(ANSBUF.TXT,0,1));
      154     1398    2             SELECT('N');
      155     1399    2   VIDALT:
      156     1400    2             ALTRETURN;
      157     1401    2             SELECT('Y');
      158     1402    2   ASK2:                                   /* Ask for serial number              */
      159     1403    2             CALL KEYIN(VIDSNM,ANSBUF);
      160     1404    2             CALL GETFD(ANSBUF.TXT,16) ALTRET(ASK2);
      161     1405    2             IF ALPHA_FLG='1'B THEN GOTO ASK2;
      162     1406    2               ELSE;
      163     1407    2             CALL CHARBIN(NUMBER,SUBSTR(ANS,0,FIELD_LEN));
      164     1408    2             IF NUMBER=0 THEN GOTO ASK2;   /* Don't allow 0                      */
      165     1409    2               ELSE;
      166     1410        /* Write a VID with an empty system area */
      167     1411    2             FM$VID=S_VID;
      168     1412    2             FM$VID.VSN=NUMBER;
PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:25   
      169     1413    2             FM$VID.SNLIST.VSN.N(0)=FM$VID.VSN;
      170     1414    2   VIDWR:
      171     1415    2             FM$VID.PSN=S_VID.PSN;
      172     1416    2             CALL WRVID ALTRET(VIDALT);
      173     1417    2   VIDRET:
      174     1418    2             IF FM$VID.SYSDIRDA>100 THEN GOTO BAD;
      175     1419    2               ELSE;
      176     1420    2             IF FM$VID.SYSDIRDA<S_VID.SYSDIRDA THEN GOTO BAD;
      177     1421    2               ELSE;
      178     1422    2             TOPDA=FM$VID.SYSDIRDA;
      179     1423    2             RETURN;
      180     1424    2   BAD:
      181     1425    2             TOPDA=S_VID.SYSDIRDA;
      182     1426    2             RETURN;
      183     1427    2             SELECT(ELSE);
      184     1428    2           GOTO ASK1;
      185     1429    2           END;                            /* DO SELECT                          */
      186     1430    1   VIDCP6:
      187     1431    1           IF FM$VID.VOLCNT=0 THEN GOTO VIDWR; /* Vol count=0->scratch,take it   */
      188     1432    1             ELSE;
      189     1433    1           IF FM$VID.PSN~=S_VID.PSN THEN GOTO VIDNSYS;
      190     1434    1             ELSE;
      191     1435    1   VIDSYS:
      192     1436    1           IF FM$VID.SYSSIZE <= FM$VID.SYSDIRDA THEN GOTO VIDASK;
      193     1437    1           IF FM$VID.SYSSIZE = FM$VID.SECTSTRT(1) AND
      194     1438    1             FM$VID.SYSSIZE = FM$VID.SNLIST.SIZE(0) THEN GOTO VIDWR;
      195     1439    1   ASK21:
      196     1440    1           CALL KEYIN(VIDSYSAM,ANSBUF);
      197     1441    1           CALL UPPER_CASE(ANSBUF.TXT,1);
      198     1442    2           DO SELECT(SUBSTR(ANSBUF.TXT,0,1));
      199     1443    2             SELECT('N');
      200     1444    2             ALTRETURN;
      201     1445    2             SELECT('Y');
      202     1446    2             FM$VID.SYSSIZE = FM$VID.SECTSTRT(1);
      203     1447    2             FM$VID.SNLIST.SIZE(0)  = FM$VID.SECTSTRT(1);
      204     1448    2             GOTO VIDWR;
      205     1449    2             SELECT (ELSE);
PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:26   
      206     1450    2           GOTO ASK21;
      207     1451    2           END;
      208     1452    1   VIDASK:
      209     1453        /* System area size=0. Ask . */
      210     1454    1           MESSAGE$=ADDR(VIDSAZM);
      211     1455    1           SUBSTR(TEXTM.TXT,8,6)=FM$VID.PSN;
      212     1456    1           CALL BINCHAR(SUBSTR(TEXTM.TXT,1,5),FM$VID.VSN);
      213     1457    1   ASK3:
      214     1458    1           CALL KEYIN(VIDSAZM,ANSBUF);
      215     1459    1   ASK4:
      216     1460    1           CALL UPPER_CASE(ANSBUF.TXT,1);
      217     1461    2           DO SELECT(SUBSTR(ANSBUF.TXT,0,1));
      218     1462    2             SELECT('Y');
      219     1463    2             GOTO VIDWR;
      220     1464    2             SELECT('N');
      221     1465    2             GOTO VIDALT;
      222     1466    2             SELECT(ELSE);
      223     1467    2           GOTO ASK3;
      224     1468    2           END;                            /* DO SELECT                          */
      225     1469    1   VIDNSYS:
      226     1470    1           IF SUBSTR(FM$VID.PSN,0,4)='SYS ' AND NF_FLG='0'B THEN GOTO VIDSYS;
      227     1471    1             ELSE;
      228     1472    1           MESSAGE$=ADDR(VIDNSYSM);
      229     1473    1           SUBSTR(TEXTM.TXT,8,6)=FM$VID.PSN;
      230     1474    1           CALL BINCHAR(SUBSTR(TEXTM.TXT,1,5),FM$VID.VSN);
      231     1475    1           CALL KEYIN(VIDNSYSM,ANSBUF);
      232     1476    1           GOTO ASK4;
      233     1477    1   END CHKVID;
      234     1478        %EOD;

PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:27   
--  Include file information  --

   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure CHKVID.

   Procedure CHKVID requires 179 words for executable code.
   Procedure CHKVID requires 8 words of local(AUTO) storage.

PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:28   

 Object Unit name= CHKVID                                     File name= ISI$FIXSYST.:E05TOU
 UTS= JUL 29 '97 22:49:22.92 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none    75    113  CHKVID
    1  RoData even  UTS      1      1  CHKVID
    2   Proc  even  none   179    263  CHKVID
    3  RoData even  none    17     21  CHKVID

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes    yes     yes      Std        0  CHKVID

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0     13  VIDNCPM                            0     27  VIDSYSAM
    0     45  VIDSNM                             0     53  VIDSAZM
    0     72  VIDNSYSM
PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:29   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       2 KEYIN
 yes     yes           Std       2 GETFD
         yes           Std       2 UPPER_CASE
 yes     yes           Std       0 WRVID
                       nStd      0 X66_AUTO_0
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     POBUF                                 NF_FLG                                ANSBUF
     FIELD$                                FIELD_LEN                             ALPHA_FLG
     TOPDA                                 B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:30   


       96        1        /*T***********************************************************/
       97        2        /*T*                                                         */
       98        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       99        4        /*T*                                                         */
      100        5        /*T***********************************************************/
      101        6        CHKVID: PROC ALTRET;

      6  2 000000   000000 700200 xent  CHKVID       TSX0  ! X66_AUTO_0
         2 000001   000010 000000                    ZERO    8,0

      102        7        /* This program checks Volume ID for system disk pack */
      103        8        /* ALTRETURN if: not a CP6 pack or
      104        9                         System area=0 or
      105       10                         not a primary pack set .
      106       11           RETURN if all OK .                     */
      107       12        %INCLUDE IS$MACROS;
      108     1287        %FM$VID(STCLASS="BASED(VID$)");
      109     1333    1   DCL VID$ PTR STATIC INIT(ADDR(POBUF));
      110     1334    1   DCL POBUF BIT(1) SYMREF;
      111     1335        /* Simplified VID */
      112     1336    1   DCL 1 S_VID STATIC ALIGNED,
      113     1337    1         2 ID CHAR(4) INIT('CP6 '),
      114     1338    1         2 INSTID BIT(36) INIT('0'B),
      115     1339    1         2 VSN UBIN WORD INIT(4095),
      116     1340    1         2 PSN CHAR(6) INIT('CP-6''S'),
      117     1341    1         2 VOLCNT UBIN(18) UNAL INIT(0),
      118     1342    1         2 SYSSIZE UBIN WORD INIT(0),
      119     1343    1         2 SYSDIRDA UBIN WORD INIT(4),
      120     1344    1         2 INITTIME UBIN WORD INIT(0),
      121     1345    1         2 SECTSTRT(0:1) UBIN WORD INIT(0*0);
      122     1346    1   DCL NF_FLG BIT(3) SYMREF;               /* New Files flag                     */
      123     1347        %TEXTC(N#=VIDNCPM,M#="' NOT a CP-6 pack - OK to proceed (Y/N) ? '");
      124     1352        %TEXTC(N#=VIDSYSAM,M#="' System area size incorrect - OK to correct (Y/N) ? '");
      125     1357        %TEXTC(N#=VIDSNM,M#="' Serial number = '");
      126     1362        %TEXTC(N#=VIDSAZM,M#="' 00000 #SSSSSS No system area - OK to proceed (Y/N) ? '");
      127     1367        %TEXTC(N#=VIDNSYSM,M#=
PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:31   
              1367            "' 00000 #SSSSSS is NOT a system volume - OK  to proceed (Y/N) ? '");
      128     1372    1   DCL MESSAGE$ PTR;
      129     1373    1   DCL 1 TEXTM BASED(MESSAGE$),
      130     1374    1         2 CNT UBIN WORD,
      131     1375    1         2 TXT CHAR(TEXTM.CNT);
      132     1376    1   DCL 1 ANSBUF SYMREF,
      133     1377    1         2 CNT UBIN WORD,
      134     1378    1         2 TXT CHAR(16);
      135     1379    1   DCL FIELD$ PTR SYMREF;
      136     1380    1   DCL FIELD_LEN UBIN WORD SYMREF;
      137     1381    1   DCL ALPHA_FLG BIT(1) SYMREF;
      138     1382    1   DCL ANS CHAR(16) BASED(FIELD$);
      139     1383    1   DCL TOPDA UBIN WORD SYMREF;
      140     1384    1   DCL NUMBER UBIN WORD;
      141     1385        /**/
      142     1386    1   DCL WRVID ENTRY ALTRET;
      143     1387    1   DCL KEYIN ENTRY(2) ALTRET;
      144     1388    1   DCL UPPER_CASE ENTRY(2);
      145     1389    1   DCL GETFD ENTRY(2) ALTRET;
      146     1390        /**/
      147     1391    1           IF FM$VID.ID=S_VID.ID THEN GOTO VIDCP6; /* It's a CP6 pack            */

   1391  2 000002   000000 470400 0                  LDP0    VID$
         2 000003   000000 236100                    LDQ     0,,PR0
         2 000004   000001 116000 0                  CMPQ    S_VID
         2 000005   000112 600000 2                  TZE     VIDCP6

      148     1392    1             ELSE;
      149     1393        /* Ask if OK */
      150     1394    1   ASK1:
      151     1395    1           CALL KEYIN(VIDNCPM,ANSBUF);

   1395  2 000006   000000 630400 3     ASK1         EPPR0   0
         2 000007   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000010   000000 701000 xent               TSX1    KEYIN
         2 000011   000000 011000                    NOP     0

PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:32   
      152     1396    1           CALL UPPER_CASE(ANSBUF.TXT,1);

   1396  2 000012   000002 630400 3                  EPPR0   2
         2 000013   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000014   000000 701000 xent               TSX1    UPPER_CASE
         2 000015   000000 011000                    NOP     0

      153     1397    2           DO SELECT(SUBSTR(ANSBUF.TXT,0,1));

   1397  2 000016   000001 236000 xsym               LDQ     ANSBUF+1
         2 000017   777000 376003                    ANQ     -512,DU
         2 000020   116000 116003                    CMPQ    39936,DU
         2 000021   000111 602000 2                  TNC     s:1428
         2 000022   000001 236000 xsym               LDQ     ANSBUF+1
         2 000023   777000 376003                    ANQ     -512,DU
         2 000024   116000 116003                    CMPQ    39936,DU
         2 000025   000033 600000 2                  TZE     VIDALT
         2 000026   000001 236000 xsym               LDQ     ANSBUF+1
         2 000027   777000 376003                    ANQ     -512,DU
         2 000030   131000 116003                    CMPQ    45568,DU
         2 000031   000111 601000 2                  TNZ     s:1428
         2 000032   000034 710000 2                  TRA     ASK2

      154     1398    2             SELECT('N');

      155     1399    2   VIDALT:
      156     1400    2             ALTRETURN;

   1400  2 000033   000000 702200 xent  VIDALT       TSX2  ! X66_AALT

      157     1401    2             SELECT('Y');

      158     1402    2   ASK2:                                   /* Ask for serial number              */
      159     1403    2             CALL KEYIN(VIDSNM,ANSBUF);

   1403  2 000034   000004 630400 3     ASK2         EPPR0   4
         2 000035   000020 631400 xsym               EPPR1   B_VECTNIL+16
PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:33   
         2 000036   000000 701000 xent               TSX1    KEYIN
         2 000037   000000 011000                    NOP     0

      160     1404    2             CALL GETFD(ANSBUF.TXT,16) ALTRET(ASK2);

   1404  2 000040   000007 630400 3                  EPPR0   7
         2 000041   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000042   000000 701000 xent               TSX1    GETFD
         2 000043   000034 702000 2                  TSX2    ASK2

      161     1405    2             IF ALPHA_FLG='1'B THEN GOTO ASK2;

   1405  2 000044   000000 234000 xsym               SZN     ALPHA_FLG
         2 000045   000034 604000 2                  TMI     ASK2

      162     1406    2               ELSE;
      163     1407    2             CALL CHARBIN(NUMBER,SUBSTR(ANS,0,FIELD_LEN));

   1407  2 000046   000000 470400 xsym               LDP0    FIELD$
         2 000047   000000 720000 xsym               LXL0    FIELD_LEN
         2 000050   000100 305540                    DTB
         2 000051   000000 030010                    NDSC9   0,,PR0                   cn=0,s=nosgn,sf=0,n=*X0
         2 000052   200006 000010                    NDSC9   NUMBER+2,,AUTO           cn=0,s=lsgnf,sf=0,n=8
         2 000053   200007 235100                    LDA     NUMBER+3,,AUTO
         2 000054   200004 755100                    STA     NUMBER,,AUTO

      164     1408    2             IF NUMBER=0 THEN GOTO ASK2;   /* Don't allow 0                      */

   1408  2 000055   000034 600000 2                  TZE     ASK2

      165     1409    2               ELSE;
      166     1410        /* Write a VID with an empty system area */
      167     1411    2             FM$VID=S_VID;

   1411  2 000056   000000 471400 0                  LDP1    VID$
         2 000057   010000 221003                    LDX1    4096,DU
         2 000060   000140 100400                    MLR     fill='000'O
PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:34   
         2 000061   000001 000050 0                  ADSC9   S_VID                    cn=0,n=40
         2 000062   100000 000011                    ADSC9   0,,PR1                   cn=0,n=*X1

      168     1412    2             FM$VID.VSN=NUMBER;

   1412  2 000063   100002 755100                    STA     2,,PR1

      169     1413    2             FM$VID.SNLIST.VSN.N(0)=FM$VID.VSN;

   1413  2 000064   100002 236100                    LDQ     2,,PR1
         2 000065   100500 552134                    STBQ    320,'34'O,PR1

      170     1414    2   VIDWR:
      171     1415    2             FM$VID.PSN=S_VID.PSN;

   1415  2 000066   000000 470400 0     VIDWR        LDP0    VID$
         2 000067   040100 100400                    MLR     fill='040'O
         2 000070   000004 000006 0                  ADSC9   S_VID+3                  cn=0,n=6
         2 000071   000003 000006                    ADSC9   3,,PR0                   cn=0,n=6

      172     1416    2             CALL WRVID ALTRET(VIDALT);

   1416  2 000072   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000073   000000 701000 xent               TSX1    WRVID
         2 000074   000033 702000 2                  TSX2    VIDALT

      173     1417    2   VIDRET:
      174     1418    2             IF FM$VID.SYSDIRDA>100 THEN GOTO BAD;

   1418  2 000075   000000 470400 0     VIDRET       LDP0    VID$
         2 000076   000006 235100                    LDA     6,,PR0
         2 000077   000145 115007                    CMPA    101,DL
         2 000100   000106 603000 2                  TRC     BAD

      175     1419    2               ELSE;
      176     1420    2             IF FM$VID.SYSDIRDA<S_VID.SYSDIRDA THEN GOTO BAD;

PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:35   
   1420  2 000101   000006 236100                    LDQ     6,,PR0
         2 000102   000007 116000 0                  CMPQ    S_VID+6
         2 000103   000106 602000 2                  TNC     BAD

      177     1421    2               ELSE;
      178     1422    2             TOPDA=FM$VID.SYSDIRDA;

   1422  2 000104   000000 756000 xsym               STQ     TOPDA

      179     1423    2             RETURN;

   1423  2 000105   000000 702200 xent               TSX2  ! X66_ARET

      180     1424    2   BAD:
      181     1425    2             TOPDA=S_VID.SYSDIRDA;

   1425  2 000106   000007 236000 0     BAD          LDQ     S_VID+6
         2 000107   000000 756000 xsym               STQ     TOPDA

      182     1426    2             RETURN;

   1426  2 000110   000000 702200 xent               TSX2  ! X66_ARET

      183     1427    2             SELECT(ELSE);

      184     1428    2           GOTO ASK1;

   1428  2 000111   000006 710000 2                  TRA     ASK1

      185     1429    2           END;                            /* DO SELECT                          */

      186     1430    1   VIDCP6:
      187     1431    1           IF FM$VID.VOLCNT=0 THEN GOTO VIDWR; /* Vol count=0->scratch,take it   */

   1431  2 000112   000004 720100       VIDCP6       LXL0    4,,PR0
         2 000113   000066 600000 2                  TZE     VIDWR

PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:36   
      188     1432    1             ELSE;
      189     1433    1           IF FM$VID.PSN~=S_VID.PSN THEN GOTO VIDNSYS;

   1433  2 000114   040000 106500                    CMPC    fill='040'O
         2 000115   000003 000006                    ADSC9   3,,PR0                   cn=0,n=6
         2 000116   000004 000006 0                  ADSC9   S_VID+3                  cn=0,n=6
         2 000117   000233 601000 2                  TNZ     VIDNSYS

      190     1434    1             ELSE;
      191     1435    1   VIDSYS:
      192     1436    1           IF FM$VID.SYSSIZE <= FM$VID.SYSDIRDA THEN GOTO VIDASK;

   1436  2 000120   000000 470400 0     VIDSYS       LDP0    VID$
         2 000121   000006 236100                    LDQ     6,,PR0
         2 000122   000005 116100                    CMPQ    5,,PR0
         2 000123   000165 603000 2                  TRC     VIDASK

      193     1437    1           IF FM$VID.SYSSIZE = FM$VID.SECTSTRT(1) AND

   1437  2 000124   000005 236100                    LDQ     5,,PR0
         2 000125   000011 116100                    CMPQ    9,,PR0
         2 000126   000131 601000 2                  TNZ     ASK21
         2 000127   000501 116100                    CMPQ    321,,PR0
         2 000130   000066 600000 2                  TZE     VIDWR

      194     1438    1             FM$VID.SYSSIZE = FM$VID.SNLIST.SIZE(0) THEN GOTO VIDWR;
      195     1439    1   ASK21:
      196     1440    1           CALL KEYIN(VIDSYSAM,ANSBUF);

   1440  2 000131   000011 630400 3     ASK21        EPPR0   9
         2 000132   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000133   000000 701000 xent               TSX1    KEYIN
         2 000134   000000 011000                    NOP     0

      197     1441    1           CALL UPPER_CASE(ANSBUF.TXT,1);

   1441  2 000135   000002 630400 3                  EPPR0   2
PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:37   
         2 000136   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000137   000000 701000 xent               TSX1    UPPER_CASE
         2 000140   000000 011000                    NOP     0

      198     1442    2           DO SELECT(SUBSTR(ANSBUF.TXT,0,1));

   1442  2 000141   000001 236000 xsym               LDQ     ANSBUF+1
         2 000142   777000 376003                    ANQ     -512,DU
         2 000143   116000 116003                    CMPQ    39936,DU
         2 000144   000164 602000 2                  TNC     s:1450
         2 000145   000001 236000 xsym               LDQ     ANSBUF+1
         2 000146   777000 376003                    ANQ     -512,DU
         2 000147   116000 116003                    CMPQ    39936,DU
         2 000150   000156 600000 2                  TZE     s:1444
         2 000151   000001 236000 xsym               LDQ     ANSBUF+1
         2 000152   777000 376003                    ANQ     -512,DU
         2 000153   131000 116003                    CMPQ    45568,DU
         2 000154   000164 601000 2                  TNZ     s:1450
         2 000155   000157 710000 2                  TRA     s:1446

      199     1443    2             SELECT('N');

      200     1444    2             ALTRETURN;

   1444  2 000156   000000 702200 xent               TSX2  ! X66_AALT

      201     1445    2             SELECT('Y');

      202     1446    2             FM$VID.SYSSIZE = FM$VID.SECTSTRT(1);

   1446  2 000157   000000 470400 0                  LDP0    VID$
         2 000160   000011 235100                    LDA     9,,PR0
         2 000161   000005 755100                    STA     5,,PR0

      203     1447    2             FM$VID.SNLIST.SIZE(0)  = FM$VID.SECTSTRT(1);

   1447  2 000162   000501 755100                    STA     321,,PR0
PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:38   

      204     1448    2             GOTO VIDWR;

   1448  2 000163   000066 710000 2                  TRA     VIDWR

      205     1449    2             SELECT (ELSE);

      206     1450    2           GOTO ASK21;

   1450  2 000164   000131 710000 2                  TRA     ASK21

      207     1451    2           END;

      208     1452    1   VIDASK:
      209     1453        /* System area size=0. Ask . */
      210     1454    1           MESSAGE$=ADDR(VIDSAZM);

   1454  2 000165   000013 236000 3     VIDASK       LDQ     11
         2 000166   200003 756100                    STQ     MESSAGE$,,AUTO

      211     1455    1           SUBSTR(TEXTM.TXT,8,6)=FM$VID.PSN;

   1455  2 000167   200003 471500                    LDP1    MESSAGE$,,AUTO
         2 000170   100000 720100                    LXL0    0,,PR1
         2 000171   040100 100500                    MLR     fill='040'O
         2 000172   000003 000006                    ADSC9   3,,PR0                   cn=0,n=6
         2 000173   100003 000006                    ADSC9   3,,PR1                   cn=0,n=6

      212     1456    1           CALL BINCHAR(SUBSTR(TEXTM.TXT,1,5),FM$VID.VSN);

   1456  2 000174   000002 235100                    LDA     2,,PR0
         2 000175   000044 773000                    LRL     36
         2 000176   200006 757100                    STAQ    NUMBER+2,,AUTO
         2 000177   000100 301500                    BTD
         2 000200   200006 000010                    NDSC9   NUMBER+2,,AUTO           cn=0,s=lsgnf,sf=0,n=8
         2 000201   100001 230005                    NDSC9   1,,PR1                   cn=1,s=nosgn,sf=0,n=5

PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:39   
      213     1457    1   ASK3:
      214     1458    1           CALL KEYIN(VIDSAZM,ANSBUF);

   1458  2 000202   000014 630400 3     ASK3         EPPR0   12
         2 000203   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000204   000000 701000 xent               TSX1    KEYIN
         2 000205   000000 011000                    NOP     0

      215     1459    1   ASK4:
      216     1460    1           CALL UPPER_CASE(ANSBUF.TXT,1);

   1460  2 000206   000002 630400 3     ASK4         EPPR0   2
         2 000207   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000210   000000 701000 xent               TSX1    UPPER_CASE
         2 000211   000000 011000                    NOP     0

      217     1461    2           DO SELECT(SUBSTR(ANSBUF.TXT,0,1));

   1461  2 000212   000001 236000 xsym               LDQ     ANSBUF+1
         2 000213   777000 376003                    ANQ     -512,DU
         2 000214   131000 116003                    CMPQ    45568,DU
         2 000215   000223 602000 2                  TNC     s:1461+9
         2 000216   000001 236000 xsym               LDQ     ANSBUF+1
         2 000217   777000 376003                    ANQ     -512,DU
         2 000220   131000 116003                    CMPQ    45568,DU
         2 000221   000230 600000 2                  TZE     s:1463
         2 000222   000232 710000 2                  TRA     s:1467
         2 000223   000001 236000 xsym               LDQ     ANSBUF+1
         2 000224   777000 376003                    ANQ     -512,DU
         2 000225   116000 116003                    CMPQ    39936,DU
         2 000226   000232 601000 2                  TNZ     s:1467
         2 000227   000231 710000 2                  TRA     s:1465

      218     1462    2             SELECT('Y');

      219     1463    2             GOTO VIDWR;

PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:40   
   1463  2 000230   000066 710000 2                  TRA     VIDWR

      220     1464    2             SELECT('N');

      221     1465    2             GOTO VIDALT;

   1465  2 000231   000033 710000 2                  TRA     VIDALT

      222     1466    2             SELECT(ELSE);

      223     1467    2           GOTO ASK3;

   1467  2 000232   000202 710000 2                  TRA     ASK3

      224     1468    2           END;                            /* DO SELECT                          */

      225     1469    1   VIDNSYS:
      226     1470    1           IF SUBSTR(FM$VID.PSN,0,4)='SYS ' AND NF_FLG='0'B THEN GOTO VIDSYS;

   1470  2 000233   000003 236100       VIDNSYS      LDQ     3,,PR0
         2 000234   000000 116000 1                  CMPQ    0
         2 000235   000241 601000 2                  TNZ     s:1472
         2 000236   000000 236000 xsym               LDQ     NF_FLG
         2 000237   700000 316003                    CANQ    -32768,DU
         2 000240   000120 600000 2                  TZE     VIDSYS

      227     1471    1             ELSE;
      228     1472    1           MESSAGE$=ADDR(VIDNSYSM);

   1472  2 000241   000016 236000 3                  LDQ     14
         2 000242   200003 756100                    STQ     MESSAGE$,,AUTO

      229     1473    1           SUBSTR(TEXTM.TXT,8,6)=FM$VID.PSN;

   1473  2 000243   200003 471500                    LDP1    MESSAGE$,,AUTO
         2 000244   100000 721100                    LXL1    0,,PR1
         2 000245   040100 100500                    MLR     fill='040'O
PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:41   
         2 000246   000003 000006                    ADSC9   3,,PR0                   cn=0,n=6
         2 000247   100003 000006                    ADSC9   3,,PR1                   cn=0,n=6

      230     1474    1           CALL BINCHAR(SUBSTR(TEXTM.TXT,1,5),FM$VID.VSN);

   1474  2 000250   000002 235100                    LDA     2,,PR0
         2 000251   000044 773000                    LRL     36
         2 000252   200006 757100                    STAQ    NUMBER+2,,AUTO
         2 000253   000100 301500                    BTD
         2 000254   200006 000010                    NDSC9   NUMBER+2,,AUTO           cn=0,s=lsgnf,sf=0,n=8
         2 000255   100001 230005                    NDSC9   1,,PR1                   cn=1,s=nosgn,sf=0,n=5

      231     1475    1           CALL KEYIN(VIDNSYSM,ANSBUF);

   1475  2 000256   000017 630400 3                  EPPR0   15
         2 000257   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000260   000000 701000 xent               TSX1    KEYIN
         2 000261   000000 011000                    NOP     0

      232     1476    1           GOTO ASK4;

   1476  2 000262   000206 710000 2                  TRA     ASK4
      233     1477    1   END CHKVID;
      234     1478        %EOD;

PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:42   
--  Include file information  --

   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure CHKVID.
PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:43   

 **** Variables and constants ****

  ****  Section 000  Data  CHKVID

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     1-0-0/w STRC(360)   r     1 S_VID                      0-0-0/w PTR         r     1 VID$
    13-0-0/w STRC(405)   r     1 VIDNCPM                   72-0-0/w STRC(603)   r     1 VIDNSYSM
    53-0-0/w STRC(522)   r     1 VIDSAZM                   45-0-0/w STRC(189)   r     1 VIDSNM
    27-0-0/w STRC(504)   r     1 VIDSYSAM

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 MESSAGE$                   4-0-0/w UBIN        r     1 NUMBER

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/b BIT         r     1 ALPHA_FLG                  0-0-0/w STRC(180)   r     1 ANSBUF
     0-0-0/w PTR         r     1 FIELD$                     0-0-0/w UBIN        r     1 FIELD_LEN
     0-0-0/b BIT (3)     r     1 NF_FLG                     0-0-0/b BIT         r     1 POBUF
     0-0-0/w UBIN        r     1 TOPDA

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(16)    r     1 ANS                        0-0-0/w STRC(36864) r     1 FM$VID
     0-0-0/w ASTR        r     1 TEXTM

PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:44   

   Procedure CHKVID requires 179 words for executable code.
   Procedure CHKVID requires 8 words of local(AUTO) storage.
PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:45   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:46   
          MINI XREF LISTING

ALPHA_FLG
      1381**DCL      1405>>IF
ANS
      1382**DCL      1407>>CALLBLT
ANSBUF
      1376**DCL      1395<>CALL     1403<>CALL     1440<>CALL     1458<>CALL     1475<>CALL
ANSBUF.TXT
      1378**DCL      1396<>CALL     1397>>DOSELCT  1404<>CALL     1441<>CALL     1442>>DOSELCT  1460<>CALL
      1461>>DOSELCT
ASK1
      1395**LABEL    1428--GOTO
ASK2
      1403**LABEL    1404--CALLALT  1405--GOTO     1408--GOTO
ASK21
      1440**LABEL    1450--GOTO
ASK3
      1458**LABEL    1467--GOTO
ASK4
      1460**LABEL    1476--GOTO
BAD
      1425**LABEL    1418--GOTO     1420--GOTO
FIELD$
      1379**DCL      1382--IMP-PTR  1407>>CALLBLT
FIELD_LEN
      1380**DCL      1407>>CALLBLT
FM$VID
      1288**DCL      1411<<ASSIGN
FM$VID.DTT
      1315**DCL      1318--REDEF
FM$VID.ID
      1292**DCL      1391>>IF
FM$VID.PSN
PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:47   
      1298**DCL      1415<<ASSIGN   1433>>IF       1455>>ASSIGN   1470>>IF       1473>>ASSIGN
FM$VID.SECTSTRT
      1308**DCL      1437>>IF       1446>>ASSIGN   1447>>ASSIGN
FM$VID.SNLIST.SIZE
      1328**DCL      1437>>IF       1447<<ASSIGN
FM$VID.SNLIST.VSN.N
      1326**DCL      1413<<ASSIGN
FM$VID.SYSDIRDA
      1304**DCL      1418>>IF       1420>>IF       1422>>ASSIGN   1436>>IF
FM$VID.SYSSIZE
      1302**DCL      1436>>IF       1437>>IF       1437>>IF       1446<<ASSIGN
FM$VID.VOLCNT
      1300**DCL      1431>>IF
FM$VID.VSN
      1296**DCL      1412<<ASSIGN   1413>>ASSIGN   1456>>CALLBLT  1474>>CALLBLT
GETFD
      1389**DCL-ENT  1404--CALL
KEYIN
      1387**DCL-ENT  1395--CALL     1403--CALL     1440--CALL     1458--CALL     1475--CALL
MESSAGE$
      1372**DCL      1373--IMP-PTR  1454<<ASSIGN   1455>>ASSIGN   1455>>ASSIGN   1456>>CALLBLT  1456>>CALLBLT
      1472<<ASSIGN   1473>>ASSIGN   1473>>ASSIGN   1474>>CALLBLT  1474>>CALLBLT
NF_FLG
      1346**DCL      1470>>IF
NUMBER
      1384**DCL      1407<<CALLBLT  1408>>IF       1412>>ASSIGN
POBUF
      1334**DCL      1333--DCLINIT
S_VID
      1336**DCL      1411>>ASSIGN
S_VID.ID
      1337**DCL      1391>>IF
S_VID.PSN
      1340**DCL      1415>>ASSIGN   1433>>IF
S_VID.SYSDIRDA
      1343**DCL      1420>>IF       1425>>ASSIGN
PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:48   
TEXTM.CNT
      1374**DCL      1375--IMP-SIZ  1455>>ASSIGN   1456>>CALLBLT  1473>>ASSIGN   1474>>CALLBLT
TEXTM.TXT
      1375**DCL      1455<<ASSIGN   1456<<CALLBLT  1473<<ASSIGN   1474<<CALLBLT
TOPDA
      1383**DCL      1422<<ASSIGN   1425<<ASSIGN
UPPER_CASE
      1388**DCL-ENT  1396--CALL     1441--CALL     1460--CALL
VID$
      1333**DCL      1288--IMP-PTR  1391>>IF       1411>>ASSIGN   1412>>ASSIGN   1413>>ASSIGN   1413>>ASSIGN
      1415>>ASSIGN   1418>>IF       1420>>IF       1422>>ASSIGN   1431>>IF       1433>>IF       1436>>IF
      1436>>IF       1437>>IF       1437>>IF       1437>>IF       1437>>IF       1446>>ASSIGN   1446>>ASSIGN
      1447>>ASSIGN   1447>>ASSIGN   1455>>ASSIGN   1456>>CALLBLT  1470>>IF       1473>>ASSIGN   1474>>CALLBLT
VIDALT
      1400**LABEL    1416--CALLALT  1465--GOTO
VIDASK
      1454**LABEL    1436--GOTO
VIDCP6
      1431**LABEL    1391--GOTO
VIDNCPM
      1348**DCL      1395<>CALL
VIDNSYS
      1470**LABEL    1433--GOTO
VIDNSYSM
      1368**DCL      1472--ASSIGN   1475<>CALL
VIDSAZM
      1363**DCL      1454--ASSIGN   1458<>CALL
VIDSNM
      1358**DCL      1403<>CALL
VIDSYS
      1436**LABEL    1470--GOTO
VIDSYSAM
      1353**DCL      1440<>CALL
VIDWR
      1415**LABEL    1431--GOTO     1438--GOTO     1448--GOTO     1463--GOTO
WRVID
PL6.E3A0      #002=CHKVID File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:49 Page:49   
      1386**DCL-ENT  1416--CALL

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:50   
      235        1        /*T***********************************************************/
      236        2        /*T*                                                         */
      237        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      238        4        /*T*                                                         */
      239        5        /*T***********************************************************/
      240        6        GOPO_PL6: PROC ALTRET;
      241        7        /**/
      242        8        %INCLUDE IS$MACROS;
      243     1283        %INCLUDE MM_DATA_R;
      244     1803        %INCLUDE B$SS;
      245     1982        %INCLUDE B$ROSEG;
      246     2045        %INCLUDE B_LSDATA_C;
      247     5251        %INCLUDE I_SUBS_C;
      248     5275        %INCLUDE B_UHJMAC_C;
      249     5604                % B_UHJIT(FPTN=G1HJIT,STCLASS="BASED(G1HJIT$)"); /* Ghost1 HJIT       */
      250     6575    1   DCL G1HJIT$ PTR;
      251     6576        %PTR_STRUCT(NAME=G1HJIT_PTR,STCLASS="REDEF G1HJIT$");
      252     6594        %AALS(STCLASS="BASED(AALS$)");          /* AARDVARK LS                        */
      253     8921    1   DCL H_DPS8000_CONFIG_NAME CHAR(12) SYMREF;
      254     8922    1   DCL H_DPS8000_SCU_INFO UBIN SYMREF;
      255     8923    1   DCL IS_CSP_SIDE1 BIT(1) SYMREF;
      256     8924    1   DCL IS_MEM_SIDE1 BIT(1) SYMREF;
      257     8925    1   DCL 1 LOWER_SCU SYMREF,
      258     8926    1         2 LB UBIN WORD UNAL,
      259     8927    1         2 UB UBIN WORD UNAL;
      260     8928    1   DCL 1 UPPER_SCU SYMREF,
      261     8929    1         2 LB UBIN WORD UNAL,
      262     8930    1         2 UB UBIN WORD UNAL;
      263     8931    1   DCL IS_CFG_TYPE UBIN SYMREF;
      264     8932    1   DCL IS_CFG_NAME CHAR(12) SYMREF;
      265     8933    1   DCL IS_PPUT_SIZE UBIN WORD SYMREF;
      266     8934    1   DCL BOOTTAPE UBIN WORD SYMREF;
      267     8935    1   DCL BSNLS BIT(1) SYMREF;                /* Effective AARD LS                  */
      268     8936    1   DCL AALS$ PTR STATIC SYMDEF INIT(ADDR(BSNLS));
      269     8937        %DEVINFO(STCLASS="SYMREF");
      270     9006    1   DCL 1 DISK_BOOTINFO STATIC SYMDEF ALIGNED, /* Boot info as booting from disk  */
      271     9007    1         2 BCHN# UBIN(9) UNAL,
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:51   
      272     9008    1         2 * BIT(24) INIT('0'B),
      273     9009    1         2 BPORT# UBIN(3) UNAL,
      274     9010    1         2 BIOMAD UBIN(18) UNAL,
      275     9011    1         2 BIMWAD UBIN(13) UNAL,
      276     9012    1         2 * BIT(3) INIT('0'B),
      277     9013    1         2 BIOM# UBIN(2) UNAL;
      278     9014    1   DCL 1 RPM_DISK_BOOTINFO STATIC SYMDEF,  /* REG A Immage on RPM                */
      279     9015    1         2 CC BIT(9) INIT('700'O),
      280     9016    1         2 * BIT(9) INIT('0'B),
      281     9017    1         2 BCHN# UBIN HALF UNAL INIT(0);
      282     9018        %DISKDIR(NAME=ADIR);
      283     9274        %DIRHDR(NAME=HDRAAR);                   /* AARDVARK                           */
      284     9285        %DIRHDR(NAME=HDRXLS);                   /* Header for type 0 -> XDELTA LS/SSS */
      285     9296        %DIRHDR(NAME=HDRXIS);                   /* Header for type 1 -> XDELTA ISR    */
      286     9307        %DIRHDR(NAME=HDRMH);                    /* Header for type 2 -> MON HJIT      */
      287     9318        %DIRHDR(NAME=HDRMD);                    /* Header for type 3 -> MON DATA      */
      288     9329        %DIRHDR(NAME=HDRMP0);              /* Header for type 4 -> MON PROC(ROOT)     */
      289     9340        %DIRHDR(NAME=HDRME);                    /* Header for type 5 -> ENTDEFS       */
      290     9351        %DIRHDR(NAME=HDRMS);                    /* Header for type 6 -> SYMDEFS       */
      291     9362        %DIRHDR(NAME=HDRMN);                    /* Header for type 7 -> DEFNAMES      */
      292     9373        %DIRHDR(NAME=HDRDBS);                   /* Header for type 8 -> DEBUG SCHEMA  */
      293     9384        %DIRHDR(NAME=HDRGR);                    /* Header for type 9 -> GHOST1 ROSEG  */
      294     9395        %DIRHDR(NAME=HDRGD);                    /* Header for type 10 -> GHOST1 DATA  */
      295     9406        %DIRHDR(NAME=HDRGP);                    /* Header for type 11 -> GHOST1 PROC  */
      296     9417        %DIRHDR(NAME=HDR1E);          /* Header for type 12 -> ALT SCHEMA ENTDEFS     */
      297     9428        %DIRHDR(NAME=HDR1S);          /* Header for type 13 -> ALT SCHEMA SYMDEFS     */
      298     9439        %DIRHDR(NAME=HDR1N);          /* Header for type 14 -> ALT SCHEMA DEFNAMES    */
      299     9450        %DIRHDR(NAME=HDRAS);                    /* Header for type 15 -> ALT SCHEMA   */
      300     9461        %DIRHDR(NAME=HDRTM);          /* Header for type 16 -> TIGR MISCELLANEOUS     */
      301     9472        %DIRHDR(NAME=HDRDDIR);             /* Header for type 17 -> MON NODE INFO     */
      302     9483        %DIRHDR(NAME=HDRPAT);                   /* Header for type 18 -> PATCHES      */
      303     9494        %DIRHDR(NAME=HDRMP1);                   /* Header for MON PROC (OV SEG 1)     */
      304     9505        %DIRHDR(NAME=HDRMP2);                   /* Header for MON PROC (OV SEG 2)     */
      305     9516        %DIRHDR(NAME=HDRMP3);                   /* Header for MON PROC (OV SEG 3)     */
      306     9527        %DIRHDR(NAME=HDRMP4);                   /* Header for MON PROC (OV SEG 4)     */
      307     9538        %DIRHDR(NAME=HDRMP5);                   /* Header for MON PROC (OV SEG 5)     */
      308     9549        %DIRHDR(NAME=HDRMP6);                   /* Header for MON PROC (OV SEG 6)     */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:52   
      309     9560        %DIRHDR(NAME=HDRMP7);                   /* Header for MON PROC (OV SEG 7)     */
      310     9571        %DIRHDR(NAME=HDRMP8);                   /* Header for MON PROC (OV SEG 8)     */
      311     9582        %DIRHDR(NAME=HDRMP9);                   /* Header for MON PROC (OV SEG 9)     */
      312     9593        %DIRHDR(NAME=HDRMP10);                  /* Header for MON PROC (OV SEG 10)    */
      313     9604        %DIRHDR(NAME=HDRMP11);                  /* Header for MON PROC (OV SEG 11)    */
      314     9615        %DIRHDR(NAME=HDRMP12);                  /* Header for MON PROC (OV SEG 12)    */
      315     9626        %DIRHDR(NAME=HDRMP13);                  /* Header for MON PROC (OV SEG 13)    */
      316     9637        %DIRHDR(NAME=HDRMP14);                  /* Header for MON PROC (OV SEG 14)    */
      317     9648        %DIRHDR(NAME=HDRBUF);                   /* Buffer for reading headers         */
      318     9659        /**/
      319     9660        %DIRHDR(NAME=BAS_HDR,STCLASS="BASED(HDR$)");
      320     9671    1   DCL HDR$ PTR STATIC;
      321     9672        %PTR_STRUCT(NAME=HDR_PTR,STCLASS="REDEF HDR$");
      322     9690        %DISKDIR(NAME=RDIR,STCLASS="BASED(BUF$)"); /* Image of directory on disk      */
      323     9946        /**/
      324     9947    1   DCL POBUF(0:4095) BIT(9) SYMREF;
      325     9948    1   DCL BUF$ PTR STATIC INIT(ADDR(POBUF));
      326     9949        %FM$VID(STCLASS="BASED(BUF$)");         /* Image of VID                       */
      327     9995        %IOM_TAB(NAME=IOMTAB,STCLASS="SYMREF");
      328    10012    1   DCL TOPDA UBIN WORD SYMREF;
      329    10013    1   DCL NAVDA UBIN WORD SYMREF;
      330    10014    1   DCL NAVDW UBIN WORD SYMREF;
      331    10015    1   DCL NAV8W UBIN WORD SYMREF;
      332    10016    1   DCL NAVPG UBIN WORD SYMREF;
      333    10017        %PTR_STRUCT(NAME=FWSTART_PTR,STCLASS="SYMREF");
      334    10035    1   DCL IMWBASE UBIN WORD SYMREF;
      335    10036    1   DCL FW$ PTR SYMREF;           /* Pointer to top of the world as now known     */
      336    10037        %PTR_STRUCT(NAME=FW_PTR,STCLASS="REDEF FW$");
      337    10055    1   DCL VOFLG BIT(1) SYMREF;                /* Vol init                           */
      338    10056    1   DCL TQFLAG BIT(36) SYMREF;              /* In MINI                            */
      339    10057    1   DCL XDFLAG UBIN WORD SYMREF;
      340    10058    1   DCL 1 NF_FLG SYMREF,
      341    10059    1         2 RECON BIT(1),
      342    10060    1         2 NONEW BIT(1),
      343    10061    1         2 S BIT(1);
      344    10062    1   DCL UNF_FLG REDEF NF_FLG UBIN(3) UNAL;
      345    10063    1   DCL 1 RCV_FLG SYMREF,
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:53   
      346    10064    1         2 RC BIT(1),                      /* Recovery                           */
      347    10065    1         2 DB BIT(1),                      /* Disk boot                          */
      348    10066    1         2 RBD BIT(1),                     /* Rebooted from disk                 */
      349    10067    1         2 RBO BIT(1);                     /* Rebooted for recovery              */
      350    10068    1   DCL URCV_FLG REDEF RCV_FLG UBIN(4) UNAL;
      351    10069    1   DCL 1 ADPXF SYMREF,
      352    10070    1         2 A BIT(1),
      353    10071    1         2 D BIT(1),
      354    10072    1         2 P BIT(1),
      355    10073    1         2 X BIT(1),
      356    10074    1         2 F BIT(1);
      357    10075    1   DCL PO_INDX UBIN WORD SYMREF;           /* PO tape index in DEVINFO           */
      358    10076    1   DCL IPO_INDX UBIN WORD SYMREF;          /* PO tape index in DEVINFO           */
      359    10077
      360    10078    1   DCL TEMP_DEN CHAR(80);
      361    10079
      362    10080    1   DCL PO_DEVN CHAR(2) SYMREF;
      363    10081    1   DCL HIPAGE UBIN WORD SYMREF;            /* Nr of last page                    */
      364    10082    1   DCL HIAVPG UBIN WORD SYMREF;            /* Nr of last page on an S1000        */
      365    10083    1   DCL GAP_SZ UBIN WORD SYMREF;  /* Gap size on RPM, 0 on all other machines     */
      366    10084    1   DCL SYS_DPX UBIN WORD SYMREF;           /* System disk index in DEVINFO       */
      367    10085    1   DCL BEGAA BIT(1) SYMREF;
      368    10086    1   DCL POEM BIT(1) SYMREF;                 /* Text, PO boot aborted              */
      369    10087    1   DCL AARD$ PTR STATIC INIT(ADDR(BEGAA));
      370    10088        %PTR_STRUCT(NAME=AARD_PTR,STCLASS="REDEF AARD$");
      371    10106    1   DCL BOOTS ENTRY;
      372    10107    1   DCL BOOTS$ EPTR STATIC INIT(ENTADDR(BOOTS));
      373    10108        %PTR_STRUCT(NAME=BOOTS_PTR,STCLASS="REDEF BOOTS$");
      374    10126    1   DCL SAD$ PTR STATIC INIT(ADDR(ADIR));
      375    10127        %DCW_STRUCT(NAME=SADDCW,STCLASS="REDEF SAD$");
      376    10145    1   DCL SADX$ PTR STATIC INIT(ADDR(POBUF));
      377    10146        %DCW_STRUCT(NAME=SADDCWX,STCLASS="REDEF SADX$");
      378    10164    1   DCL POB$ PTR STATIC INIT(ADDR(POBUF));
      379    10165        %DCW_STRUCT(NAME=PODCW,STCLASS="REDEF POB$");
      380    10183    1   DCL ERAS_BUF BIT(ERAS_LGTH) BASED ALIGNED;
      381    10184    1   DCL ERAS_F$ PTR;
      382    10185        %PTR_STRUCT(NAME=ERAS_F_PTR,STCLASS="REDEF ERAS_F$");
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:54   
      383    10203    1   DCL ERAS_L$ PTR;
      384    10204        %PTR_STRUCT(NAME=ERAS_L_PTR,STCLASS="REDEF ERAS_L$");
      385    10222    1   DCL ERAS_LGTH UBIN WORD;
      386    10223    1   DCL 1 IDBUF STATIC SYMDEF,              /* Buffer for tape ID                 */
      387    10224    1         2 CNT UBIN INIT(28),
      388    10225    1         2 TXT CHAR(28);
      389    10226    1   DCL 1 TIDBUF STATIC,
      390    10227    1         2 CNT UBIN INIT(32),
      391    10228    1         2 TXT CHAR(32);
      392    10229    1   DCL BASEJ UBIN WORD STATIC SYMDEF INIT(0); /* Word address of Mon JIT         */
      393    10230    1   DCL BASEJ1 UBIN WORD STATIC SYMDEF INIT(0); /* Word address of Ghost1 JIT     */
      394    10231    1   DCL BASEH1 UBIN WORD STATIC SYMDEF INIT(0); /* Word address of Ghost1 HJIT    */
      395    10232    1   DCL BASEMPT UBIN WORD STATIC SYMDEF INIT(0); /* Word address of Mon PT        */
      396    10233    1   DCL BASEGPT UBIN WORD STATIC SYMDEF INIT(0); /* Word address of Ghost1 PT     */
      397    10234    1   DCL WSQ3PG UBIN WORD STATIC SYMDEF INIT(0); /* Word address of WSQ3 PT        */
      398    10235    1   DCL IPHYPG UBIN WORD STATIC SYMDEF INIT(0); /* Word address of Physical->Real MAP */
      399    10236    1   DCL PHYMEM_SZ UBIN WORD STATIC SYMDEF INIT(0);
             10236            /* Size of Physical memory on S1000 */
      400    10237    1   DCL UFLG UBIN WORD STATIC SYMDEF INIT(0); /* Users allowed                    */
      401    10238    1   DCL 1 WS0PT(0:0) ALIGNED BASED(WS0PT$), /* WS0 PT                             */
      402    10239        %PTW(LVL=2);
      403    10267    1   DCL WS0PT$ PTR STATIC SYMDEF;
      404    10268        %PTR_STRUCT(NAME=WS0PT_PTR,STCLASS="REDEF WS0PT$");
      405    10286    1   DCL HDRTYP UBIN HALF STATIC INIT(0);
      406    10287    1   DCL HDRDA UBIN WORD STATIC SYMDEF INIT(0);
      407    10288    1   DCL EDCIASK REMEMBER STATIC SYMDEF;
      408    10289    1   DCL ESADERR REMEMBER STATIC SYMDEF;
      409    10290    1   DCL READBTR REMEMBER SYMREF;
      410    10291    1   DCL LWSRDR REMEMBER SYMREF;
      411    10292        /* Decl for moving records */
      412    10293    1   DCL CP6_BUF CHAR(CP6_BUF_LGTH) BASED (CP6_BUF$); /* CP6 area                  */
      413    10294    1   DCL CP6_BUF$ PTR STATIC;
      414    10295        %PTR_STRUCT(NAME=CP6_BUF_PTR,STCLASS="REDEF CP6_BUF$");
      415    10313    1   DCL CP6_BUF_LGTH UBIN WORD;
      416    10314    1   DCL AARD_BUF CHAR(4096) BASED (AARD_BUF$); /* AARD area                       */
      417    10315    1   DCL AARD_BUF$ PTR STATIC;
      418    10316        %PTR_STRUCT(NAME=AARD_BUF_PTR,STCLASS="REDEF AARD_BUF$");
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:55   
      419    10334    1   DCL TODESCR$ PTR STATIC;
      420    10335        %PTR_STRUCT(NAME=TODESCR_PTR,STCLASS="REDEF TODESCR$");
      421    10353    1   DCL FROMDESCR$ PTR STATIC INIT(ADDR(POBUF));
      422    10354        %PTR_STRUCT(NAME=FROMDESCR_PTR,STCLASS="REDEF FROMDESCR$");
      423    10372        %DESCR(NAME=BAS_DESCR,STCLASS="BASED(DESCR$)",LVL=1,LAST=";");
      424    10394    1   DCL DESCR$ PTR;
      425    10395    1   DCL TEMPO UBIN WORD STATIC;
      426    10396    1   DCL TEMPO1 UBIN WORD STATIC;
      427    10397    1   DCL ITEMPO UBIN WORD STATIC;
      428    10398    1   DCL ITEMPO1 UBIN WORD STATIC;
      429    10399    1   DCL OUHDR# UBIN WORD;
      430    10400        /**/
      431    10401        /* Table parallel with PO tape headers ,
      432    10402           containing pointers to the appropriate SAD areas */
      433    10403    1   DCL 1 SADTAB STATIC,
      434    10404    1         2 XL$ PTR INIT(ADDR(ADIR.XDLS)),
      435    10405    1         2 XI$ PTR INIT(ADDR(ADIR.XDPROC)),
      436    10406    1         2 HJ$ PTR INIT(ADDR(ADIR.MONHJIT)),
      437    10407    1         2 MD$ PTR INIT(ADDR(ADIR.MONDATA)),
      438    10408    1         2 MP0$ PTR INIT(ADDR(ADIR.MONPROC)),
      439    10409    1         2 ENT$ PTR INIT(ADDR(ADIR.ENTDEFS)),
      440    10410    1         2 SYM$ PTR INIT(ADDR(ADIR.SYMDEFS)),
      441    10411    1         2 DEF$ PTR INIT(ADDR(ADIR.DEFNAMES)),
      442    10412    1         2 SCH$ PTR INIT(ADDR(ADIR.SCHEMA)),
      443    10413    1         2 GRO$ PTR INIT(ADDR(ADIR.G1RO)),
      444    10414    1         2 GD$ PTR INIT(ADDR(ADIR.G1DATA)),
      445    10415    1         2 GP$ PTR INIT(ADDR(ADIR.G1PROC)),
      446    10416    1         2 ENT1$ PTR INIT(ADDR(ADIR.AENTDEFS)),
      447    10417    1         2 SYM1$ PTR INIT(ADDR(ADIR.ASYMDEFS)),
      448    10418    1         2 DEF1$ PTR INIT(ADDR(ADIR.ADEFNAMES)),
      449    10419    1         2 SCH1$ PTR INIT(ADDR(ADIR.ASCHEMA)),
      450    10420    1         2 TIGR$ PTR INIT(ADDR(ADIR.SITEINFO)),
      451    10421    1         2 DDIR$ PTR INIT(ADDR(ADIR.DEFDIR)),
      452    10422    1         2 PAT$ PTR INIT(ADDR(ADIR.PATCH)),
      453    10423    1         2 MP1$ PTR INIT(ADDR(ADIR.MONPROC1)),
      454    10424    1         2 MP2$ PTR INIT(ADDR(ADIR.MONPROC2)),
      455    10425    1         2 MP3$ PTR INIT(ADDR(ADIR.MONPROC3)),
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:56   
      456    10426    1         2 MP4$ PTR INIT(ADDR(ADIR.MONPROC4)),
      457    10427    1         2 MP5$ PTR INIT(ADDR(ADIR.MONPROC5)),
      458    10428    1         2 MP6$ PTR INIT(ADDR(ADIR.MONPROC6)),
      459    10429    1         2 MP7$ PTR INIT(ADDR(ADIR.MONPROC7)),
      460    10430    1         2 MP8$ PTR INIT(ADDR(ADIR.MONPROC8)),
      461    10431    1         2 MP9$ PTR INIT(ADDR(ADIR.MONPROC9)),
      462    10432    1         2 MP10$ PTR INIT(ADDR(ADIR.MONPROC10)),
      463    10433    1         2 MP11$ PTR INIT(ADDR(ADIR.MONPROC11)),
      464    10434    1         2 MP12$ PTR INIT(ADDR(ADIR.MONPROC12)),
      465    10435    1         2 MP13$ PTR INIT(ADDR(ADIR.MONPROC13)),
      466    10436    1         2 MP14$ PTR INIT(ADDR(ADIR.MONPROC14));
      467    10437    1   DCL ASADTAB$(0:%(NUMTC+14-1)) REDEF SADTAB PTR;
      468    10438        /**/
      469    10439    1   DCL SADTAB$ PTR;
      470    10440        %PTR_STRUCT(NAME=SADTAB_PTR,STCLASS="REDEF SADTAB$");
      471    10458    1   DCL SADTAB_ENTRY$ PTR BASED(SADTAB$);
      472    10459        /**/
      473    10460    1   DCL I SBIN WORD;
      474    10461    1   DCL J SBIN WORD;
      475    10462    1   DCL POIDC UBIN WORD;
      476    10463    1   DCL CODE UBIN WORD;
      477    10464    1   DCL BOOTCODE UBIN WORD;
      478    10465    1   DCL PREVBASE UBIN WORD;
      479    10466    1   DCL FREE_PG_COUNT UBIN WORD;            /* Nr of free pages                   */
      480    10467    1   DCL 1 FM_INFO,                          /* Info for ITX$INITS                 */
      481    10468    1         2 PORT UBIN(9) UNAL,
      482    10469    1         2 CHN UBIN(9) UNAL,
      483    10470    1         2 DVN UBIN(9) UNAL,
      484    10471    1         2 * UBIN(9) UNAL;
      485    10472    1   DCL MONSSR$ PTR;                        /* Pointer to MON SSR frame           */
      486    10473        %PTR_STRUCT(NAME=MONSSR_PTR,STCLASS="REDEF MONSSR$");
      487    10491    1   DCL WMON$ PTR;      /* Pointer used to access different locations in MON ISR  */
      488    10492        %PTR_STRUCT(NAME=WMON_PTR,STCLASS="REDEF WMON$");
      489    10510    1   DCL SAV$ PTR;
      490    10511        %PTR_STRUCT(NAME=SAV_PTR,STCLASS="REDEF SAV$");
      491    10529    1   DCL DCB$ PTR;
      492    10530        %PTR_STRUCT(NAME=DCB_PTR,STCLASS="REDEF DCB$");
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:57   
      493    10548    1   DCL LGTH SBIN WORD;
      494    10549    1   DCL BAS_FLAG BIT(1) BASED UNAL;
      495    10550    1   DCL 1 H_SCU_INFO(0:1) BASED UNAL,
      496    10551    1         2 LBND UBIN HALF UNAL,
      497    10552    1         2 UBND UBIN HALF UNAL,
      498    10553    1         2 PAGES UBIN HALF UNAL,
      499    10554    1         2 STATUS,
      500    10555    1           3 NCONF BIT(1) UNAL,
      501    10556    1           3 RBIT BIT(1) UNAL,
      502    10557    1           3 RLIP BIT(1) UNAL,
      503    10558    1           3 RTIP BIT(1) UNAL,
      504    10559    1           3 LMEM BIT(1) UNAL,
      505    10560    1           3 * BIT(13) UNAL;
      506    10561    1   DCL BASED$CHAR CHAR(12) BASED;
      507    10562    1   DCL BAS_UBIN UBIN WORD BASED;
      508    10563    1   DCL 1 HBAS_UBIN REDEF BAS_UBIN,
      509    10564    1         2 H1 UBIN HALF UNAL,
      510    10565    1         2 H2 UBIN HALF UNAL;
      511    10566    1   DCL BAS$ PTR BASED;
      512    10567        %PTR_STRUCT(NAME=BAS_PTR,STCLASS="REDEF BAS$");
      513    10585    1   DCL BASED_PAGE(0:1023) BIT(36) BASED ALIGNED;
      514    10586        /**/
      515    10587        %TEXTC(N#=GTPOXM,M#="' PO tape = X-XXX-'");
      516    10592        %TEXTC(N#=POHDRM,M#="' Error reading PO tape header type=NN+1 .'");
      517    10597        %TEXTC(N#=POLRM,M#="' Error reading system record type=NN .'");
      518    10602        %TEXTC(N#=VID2BIG,M#="' System area too small and not a New Files boot .'");
      519    10607        %TEXTC(N#=POIDM,M#="' Error reading tape ID record .'");
      520    10612        %TEXTC(N#=SADEM,M#="' Error reading/writing system area directory.'");
      521    10617        %TEXTC(N#=AM1,M#="' Keyin required to continue ...'");
      522    10622        %TEXTC(N#=FCGQUES,M#="'Functional code groups='");
      523    10627        %TEXTC(N#=GTASXM,M#="' AS tape = X-XXX-'");
      524    10632        %TEXTC(N#=SCDPA,M#="' Second patch tape (Y/N) ? '");
      525    10637        %TEXTC(N#=PATAM,M#="' Second patch tape = X-XXX-'");
      526    10642        %TEXTC(N#=QTPQ,M#="' Tape patches (Y/N)/(MXTRPB)/(? for help) ? '");
      527    10647        %TEXTC(N#=QTPQ1,M#="' Tape1 patches (Y/N)/(MXTRPB)/(? for help) ? '");
      528    10652        %TEXTC(N#=QTPQ2,M#="' Tape2 patches (Y/N)/(MXTRPB)/(? for help) ? '");
      529    10657        %TEXTC(N#=QCRQ,M#="' Card patches (Y/N)/(MXTRPB)/(? for help) ? '");
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:58   
      530    10662        %TEXTC(N#=QOCQ,M#="' Console patches (Y/N)/(MXTRPB)/(? for help) ? '");
      531    10667        %TEXTC(N#=NOPTIONS,M#=
             10667            "'The recommended response to patches on a No to new files boot is: MXT'");
      532    10672        %TEXTC(N#=PATCH_ERR,M#="'Problems encountered reading second patch tape'");
      533    10677    1   DCL MESSAGE$ PTR;
      534    10678    1   DCL 1 TEXTM BASED(MESSAGE$),
      535    10679    1         2 CNT UBIN WORD,
      536    10680    1         2 TXT CHAR(TEXTM.CNT);
      537    10681    1   DCL 1 ANSBUF SYMREF,
      538    10682    1         2 CNT UBIN WORD,
      539    10683    1         2 TXT CHAR(16);
      540    10684    1   DCL FIELD$ PTR SYMREF;
      541    10685    1   DCL FIELD_LEN UBIN WORD SYMREF;
      542    10686    1   DCL DECIM_FLG BIT(1) SYMREF;
      543    10687    1   DCL SSDMON BIT(72) SYMREF;
      544    10688    1   DCL SSDMONX BIT(72) SYMREF;
      545    10689    1   DCL TGRDESC BIT(72) SYMREF;
      546    10690    1   DCL XDSSR BIT(72) SYMREF;
      547    10691    1   DCL POANS CHAR(2) BASED(FIELD$);
      548    10692        /**/
      549    10693    1   DCL RDVID ENTRY ALTRET;
      550    10694    1   DCL READ_CONF ENTRY ALTRET;
      551    10695    1   DCL WRVID ENTRY ALTRET;
      552    10696    1   DCL CHKVID ENTRY ALTRET;
      553    10697    1   DCL GT_SYSPACKAD ENTRY(1);
      554    10698    1   DCL DCINIT ENTRY ALTRET;
      555    10699    1   DCL INIT_DISK ENTRY;
      556    10700    1   DCL MINIQC_PL6 ENTRY(5) ALTRET;
      557    10701    1   DCL MINIQ_PL6 ENTRY(5) ALTRET;
      558    10702    1   DCL TYPEC ENTRY(1);
      559    10703    1   DCL GETFD ENTRY(2) ALTRET;
      560    10704    1   DCL KEYIN ENTRY(2) ALTRET;
      561    10705    1   DCL HANG ENTRY;
      562    10706    1   DCL UPPER_CASE ENTRY(2);
      563    10707    1   DCL AOC ENTRY(1) ALTRET;
      564    10708    1   DCL KEYINXX ENTRY(2);
      565    10709    1   DCL MDELTCALL ENTRY;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:59   
      566    10710    1   DCL WRITE_PATCH ENTRY(2);
      567    10711    1   DCL WRTFW ENTRY ALTRET;
      568    10712    1   DCL WRTDP ENTRY ALTRET;
      569    10713    1   DCL BUILDFW_DCWS ENTRY(2);
      570    10714    1   DCL INITM ENTRY;
      571    10715    1   DCL LOADPDBR ENTRY;
      572    10716    1   DCL INIT1 ENTRY;
      573    10717    1   DCL INITP ENTRY;
      574    10718    1   DCL INITX ENTRY;
      575    10719    1   DCL LOAD_SSR  ENTRY(1);
      576    10720    1   DCL FREEXD ENTRY(1);
      577    10721    1   DCL FREEFW ENTRY(1);
      578    10722    1   DCL FREETABLES ENTRY(1);
      579    10723    1   DCL ITIG ENTRY;
      580    10724    1   DCL   CLEAR_RIW ENTRY;
      581    10725        /**/
      582    10726        /* Declarations used in processing debug schema */
      583    10727        %DB_HDR(NAME=AAR_DBHDR);      /* Buffer for reading 11 word debug headers     */
      584    10755        %DB_HDR(NAME=CP6_DBHDR,STCLASS="BASED(INFO$)"); /* CP6 11 word debug headers  */
      585    10783    1   DCL AA_DBHDR$ PTR STATIC INIT(ADDR(AAR_DBHDR));
      586    10784        %DCW_STRUCT(NAME=OUHDCW,STCLASS="REDEF AA_DBHDR$");
             10784            /* DCW used to read 11 word headers */
      587    10802    1   DCL 1 FCGBUF STATIC,
      588    10803    1         2 CNT UBIN WORD INIT(80),
      589    10804    1         2 TXT CHAR(80) INIT(' '), /* Buffer for operator's answer to FCG question */
      590    10805    1         2 IMP CHAR(2) INIT('B_');         /* We allways want 'B_'               */
      591    10806    1   DCL WANTFCG(0:40) CHAR(2) BASED(FCG$);
      592    10807    1   DCL FCG$ PTR STATIC INIT(ADDR(FCGBUF.TXT));
      593    10808    1   DCL ALLFCG BIT(1) STATIC INIT('0'B);    /* All FCG's flag                     */
      594    10809    1   DCL STAPFLG BIT(1) STATIC INIT('0'B);   /* Other schema tape flag             */
      595    10810    1   DCL DBHDR$ PTR STATIC INIT(ADDR(HDRDBS)); /* It will be changed to point HDRAS */
      596    10811    1   DCL OUHDESC$ PTR STATIC; /* It will be initialized to point AALS.OUHDESC and changed
             10811         to point AALS.DESCASCH */
      597    10812    1   DCL ISOUH BIT(12) STATIC INIT(%ALS_OUH); /* It will be changed to %ALS_ASCH   */
      598    10813    1   DCL IXLSCH0 BIT(12) STATIC INIT(%XDLS_SCH0); /* It will be changed to %XDLS_ASCH0 */
      599    10814    1   DCL UIXLSCH0 REDEF IXLSCH0 UBIN(12) UNAL;
      600    10815    1   DCL SCDESC$ PTR STATIC; /* It will be initialized to ADDR(AALS.DESCSCH0) and changed
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:60   
             10815         to ADDR(AALS.DESCASCH0) */
      601    10816    1   DCL 1 INITAOUH STATIC,
      602    10817    1         2 * BIT(36) INIT('777777740640'O),
      603    10818    1         2 * BIT(36) INIT('0'B);
      604    10819    1   DCL 1 HDRFCG STATIC,                    /* Buffer for FCG headers             */
      605    10820    1         2 FCG CHAR(2),
      606    10821    1         2 BFCG REDEF FCG BIT(18),
      607    10822    1         2 * UBIN(18) UNAL,
      608    10823    1         2 NPR UBIN WORD,                  /* Nr of physical records in this FCG */
      609    10824    1         2 NOU UBIN WORD;                  /* Nr of OUs in this FCG              */
      610    10825    1   DCL CHECK_256K UBIN WORD;          /* To check when record crosses 256k bound */
      611    10826    1   DCL 1 HCHECK_256K REDEF CHECK_256K,
      612    10827    1         2 H1 UBIN HALF UNAL,
      613    10828    1         2 H2 UBIN HALF UNAL;
      614    10829    1   DCL PO$ PTR;
      615    10830        %PTR_STRUCT(NAME=PO_PTR,STCLASS="REDEF PO$");
      616    10848    1   DCL MEM$ PTR;
      617    10849        %PTR_STRUCT(NAME=MEM_PTR,STCLASS="REDEF MEM$");
      618    10867    1   DCL INFO$ PTR;
      619    10868        %PTR_STRUCT(NAME=INFO_PTR,STCLASS="REDEF INFO$");
      620    10886    1   DCL INFOX$ PTR;
      621    10887        %PTR_STRUCT(NAME=INFOX_PTR,STCLASS="REDEF INFOX$");
      622    10905    1   DCL INFOS$ PTR;
      623    10906        %PTR_STRUCT(NAME=INFOS_PTR,STCLASS="REDEF INFOS$");
      624    10924    1   DCL DUMMY$ PTR;     /* This is loaded with ADDR(INFO$) and ADDR(CP6_BUF$)     */
      625    10925        /* so that the PL6 compiler will generate a LDP with the correct value whenever the
             10925        pointer is used */
      626    10926        /**/
      627    10927        /* Declarations used for patches */
      628    10928    1   DCL MTWISH BIT(6) STATIC SYMDEF INIT('77'O);
      629    10929    1   DCL SMTWISH REDEF MTWISH SBIN(6) UNAL;
      630    10930    1   DCL MT2WISH BIT(6) STATIC SYMDEF INIT('0'B);
      631    10931    1   DCL PAT2_INDX UBIN WORD STATIC SYMDEF INIT(0); /* Second patch tape index     */
      632    10932    1   DCL CRWISH BIT(6) STATIC SYMDEF INIT('0'B);
      633    10933    1   DCL OCWISH BIT(6) STATIC SYMDEF INIT('0'B);
      634    10934    1   DCL CP6UL(0:1023) CHAR(4) SYMREF;
      635    10935    1   DCL 1 PTCHBF REDEF CP6UL,               /* Patch buffer                       */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:61   
      636    10936    1         2 NXTWA UBIN WORD,                /* Rel word address of the next patch */
      637    10937    1         2 PTCHS(0:1022) BIT(36);
      638    10938    1   DCL SMINI CHAR(8) STATIC INIT('!MINI');
      639    10939    1   DCL PDEV UBIN WORD SYMREF;
      640    10940    1   DCL RPM_FLG BIT(1) SYMREF;
      641    10941    1   DCL S1000_FLG BIT(1) SYMREF;
      642    10942    1   DCL XA_MODE BIT(1) SYMREF;
      643    10943    1   DCL DCCSOD1 BIT(1) SYMREF;
      644    10944    1   DCL DCMMOD1 BIT(1) SYMREF;
      645    10945    1   DCL FWHDR$ PTR SYMREF;
      646    10946    1   DCL DCFWHDR$ PTR SYMREF;
      647    10947        %PTR_STRUCT(NAME=DCFWSTART_PTR,STCLASS="SYMREF");
      648    10965    1   DCL DCFWSTART$ REDEF DCFWSTART_PTR PTR;
      649    10966    1   DCL FORMDFW$ PTR;
      650    10967        %PTR_STRUCT(NAME=FORMDFW_PTR,STCLASS="REDEF FORMDFW$");
      651    10985    1   DCL FWBUF CHAR(LGTH) BASED;
      652    10986        %FWHDR(NAME=DKHDR,STCLASS="BASED(DCFWHDR$)");
      653    10995        /**/
      654    10996        /* Declarations used to modif the boot record */
      655    10997    1   DCL MC1 UBIN SYMREF;
      656    10998    1   DCL MC1SKAD UBIN SYMREF;
      657    10999    1   DCL MC1LPW UBIN SYMREF;
      658    11000    1   DCL MC1SK UBIN SYMREF;
      659    11001    1   DCL MC1LIM UBIN SYMREF;
      660    11002    1   DCL MC1PCW UBIN SYMREF;
      661    11003    1   DCL MC1ICW UBIN SYMREF;
      662    11004    1   DCL MC1B UBIN SYMREF;
      663    11005    1   DCL XC1 UBIN SYMREF;
      664    11006    1   DCL XC1SKAD UBIN SYMREF;
      665    11007    1   DCL XC1SK UBIN SYMREF;
      666    11008    1   DCL XC1LIM UBIN SYMREF;
      667    11009    1   DCL XC1B UBIN SYMREF;
      668    11010    1   DCL XC1ICW UBIN SYMREF;
      669    11011    1   DCL RC1 UBIN SYMREF;
      670    11012    1   DCL RC1SKAD UBIN SYMREF;
      671    11013    1   DCL RC1SK UBIN SYMREF;
      672    11014    1   DCL RC1LIM UBIN SYMREF;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:62   
      673    11015    1   DCL RC1ICW UBIN SYMREF;
      674    11016    1   DCL CP6UL$ PTR;
      675    11017        %PTR_STRUCT(NAME=CP6UL_PTR,STCLASS="REDEF CP6UL$");
      676    11035        %DESCR(NAME=TGMISCDESC,STCLASS="SYMREF",LVL=1,LAST=";");
      677    11057    1   DCL 1 BDEV STATIC ALIGNED,              /* Used to init a PCW or an IDCW      */
      678    11058    1         2 ORD BIT(6) INIT('0'B),
      679    11059    1         2 DEV# UBIN(6) UNAL INIT(0),
      680    11060    1         2 * BIT(24) INIT('0'B);
      681    11061    1   DCL BOOT CHAR(256) BASED(BOOT$);
      682    11062    1   DCL BOOT$ PTR;
      683    11063    1   DCL BOOTRC$ PTR STATIC INIT(ADDR(BOOTRC));
      684    11064    1   DCL BOOTRC CHAR(256) STATIC SYMDEF ALIGNED;
      685    11065    1   DCL UBOOTRC(0:63) REDEF BOOTRC UBIN WORD;
      686    11066    1   DCL HUBOOTRC(0:127) REDEF BOOTRC UBIN HALF UNAL;
      687    11067    1   DCL BBOOTRC(0:63) REDEF BOOTRC BIT(36);
      688    11068        /* Monitor's symbols */
      689    11069    1   DCL HW_TYPE  UBIN WORD SYMREF;
      690    11070    1   DCL IT_BOOTFLAG BIT(1) SYMREF;
      691    11071    1   DCL IT_AAFAULT BIT(1) SYMREF;
      692    11072    1   DCL IT_XDELTA BIT(1) SYMREF;
      693    11073    1   DCL IT_UFLG BIT(1) SYMREF;
      694    11074    1   DCL FM_POTAPE BIT(1) SYMREF;
      695    11075    1   DCL FM_SYSDP BIT(1) SYMREF;
      696    11076        /**/
      697    11077        /**/
      698    11078    1           DUMMY$=ADDR(INFO$);             /* Dummy instr ; see DCL DUMMY$       */
      699    11079    1           DUMMY$=ADDR(CP6_BUF$);          /* Dummy instr ; see DCL DUMMY$       */
      700    11080    1           WS0PT_PTR='0'B;                 /* Init WS0 Pointer                   */
      701    11081    1           WS0PT_PTR.S_D_FIELD=%ALS_WS0;
      702    11082    2           IF VOFLG='1'B THEN DO;          /* If Volinit                         */
      703    11083    2                 CALL READ_CONF;
      704    11084    2                 GOTO GOPO0;
      705    11085    2               END;                        /* THEN                               */
      706    11086    1             ELSE;
      707    11087        /* Initialize cells for simulating disk boot */
      708    11088    1   TRY:
      709    11089    1           IF RPM_FLG THEN RPM_DISK_BOOTINFO.BCHN#=DEVINFO.IOM#(SYS_DPX)*128+DEVINFO.
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:63   
             11089                    CHN#(SYS_DPX)+8;
      710    11090    2             ELSE DO;
      711    11091    2                 DISK_BOOTINFO.BCHN#=DEVINFO.CHN#(SYS_DPX);
      712    11092    2                 DISK_BOOTINFO.BPORT#=IOMTAB.PORT#(DEVINFO.IOM#(SYS_DPX));
      713    11093    2                 DISK_BOOTINFO.BIOMAD=IOMTAB.MAILBAD(DEVINFO.IOM#(SYS_DPX));
      714    11094    2                 DISK_BOOTINFO.BIMWAD=IMWBASE/32;
      715    11095    2                 DISK_BOOTINFO.BIOM#=DEVINFO.IOM#(SYS_DPX);
      716    11096    2               END;
      717    11097        /**/
      718    11098    2           DO I=0 TO 4095;
      719    11099    2             POBUF(I)='77'O;               /* Fill the buffer with blanks        */
      720    11100    2           END;                            /* DO I=                              */
      721    11101    1           CALL RDVID ALTRET(DCIASK);
      722    11102    2           CALL CHKVID WHENALTRETURN DO;
      723    11103    2   DCIASK:
      724    11104    2                 CALL GT_SYSPACKAD(%FRSTDP);
      725    11105    2                 CALL INIT_DISK;
      726    11106    2                 GOTO TRY;
      727    11107    2               END;                        /* WHENALTRETURN                      */
      728    11108        /* VID ok -> ok to proceed */
      729    11109    1           ADIR.DUMP.DA=FM$VID.SECTSTRT(1); /* Max DA in system area             */
      730    11110        /* Allocate disk space for AARDVARK and low physical pages */
      731    11111    2           IF TQFLAG='0'B THEN DO;
      732    11112        /* This code add the device number, starting disk address and ending
      733    11113        disk address into the disc boot code for tape initiated disk boots and
      734    11114        tape initiated operator recoveries.  TOPAD+11 the disk address of
      735    11115        AARDVARK and FWSTART_PTR.WOFFS is the ending address for AARDVARK. */
      736    11116    3                 IF RCV_FLG.RC = '1'B OR RCV_FLG.DB = '1'B THEN DO;
      737    11117    3                       CP6UL$=ADDR(CP6UL);
      738    11118    3                       CP6UL_PTR.WOFFS=(CP6UL_PTR.WOFFS+2048)/1024*1024+%NIFWHDR;
      739    11119        /*      Make room for system disk firmware */
      740    11120    3                       CP6UL_PTR.WOFFS=(CP6UL_PTR.WOFFS+%(MAXDCFW-NIFWHDR+1023))/1024*
             11120                                1024;
      741    11121    3                       BOOT$=ADDR(RC1);
      742    11122    3                       BOOTRC=BOOT;        /* Init the disc boot code            */
      743    11123    3                       HUBOOTRC(2*(POFFW(ADDR(RC1LIM),ADDR(RC1))))=CP6UL_PTR.WOFFS;
      744    11124    3                       UBOOTRC(POFFW(ADDR(RC1SKAD),ADDR(RC1)))=(TOPDA + 11)*16;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:64   
      745    11125        /* Init seek and read IDCW  */
      746    11126    3                       BDEV = '0'B;
      747    11127    3                       BDEV.DEV#=DEVINFO.DEV#(SYS_DPX);
      748    11128    3                       BBOOTRC(POFFW(ADDR(RC1SK),ADDR(RC1)))=(BBOOTRC(POFFW(ADDR(RC1SK)
             11128                                ,ADDR(RC1)))|BDEV);
      749    11129    3                       BDEV.ORD='25'O;
      750    11130    3                       BBOOTRC(POFFW(ADDR(RC1ICW),ADDR(RC1)))=(BBOOTRC(POFFW(ADDR(
             11130                                RC1ICW),ADDR(RC1)))|BDEV);
      751    11131    3                       BOOT = BOOTRC;
      752    11132    3                       IF RCV_FLG.RC='1'B THEN UNWIND TO READBTR;
             11132                                /* If not 'TBOOT' from XDELTA or MINI */
      753    11133    3                         ELSE UNWIND TO LWSRDR; /* and OR or DB don't reallocate */
      754    11134    3                     END ;
      755    11135    2               END;                        /* THEN                               */
      756    11136    1             ELSE;
      757    11137    1           ADIR.AARDVARK.DA=TOPDA+1;
             11137                    /* Allocate AARD at one granule above top of system disk */
      758    11138    1           ADIR.SCHEMADIR.DA=ADIR.AARDVARK.DA+1; /* Allow one gran               */
      759    11139    1           ADIR.LOWREAL.DA=ADIR.SCHEMADIR.DA+1;
             11139                    /* Allow one gran for schema directory */
      760    11140        /* Build AARD header */
      761    11141    1           HDRAAR.BASE=AARD_PTR.WOFFS;
      762    11142    1           HDRAAR.START=BOOTS_PTR.WOFFS;
      763    11143    1           HDRAAR.DA=ADIR.LOWREAL.DA+8; /* Allow 8 grans for low physical pages  */
      764    11144    1           HDRAAR.SIZE=FWSTART_PTR.WOFFS;
      765    11145    1           NAVDA=HDRAAR.DA+HDRAAR.SIZE/1024;
      766    11146        /**/
      767    11147    1           ADIR.AARDVARK.SIZE=IDBUF.CNT;
      768    11148    1           ADIR.LOWREAL.SIZE=1024*8;
      769    11149    1           ADIR.SCHEMADIR.SIZE=1024;
      770    11150        /**/
      771    11151    1           IF NF_FLG='0'B THEN GOTO GOPO0; /* New files                          */
      772    11152    1             ELSE;     /* Boot under files , read old SAD and save old MONID     */
      773    11153    1           SADDCWX.TALLY=LENGTHW(ADIR)+4;
      774    11154    1           CALL MINIQC_PL6(SYS_DPX,ADDR(SADDCWX),,%FCNRDB,TOPDA) ALTRET(SADERR);
      775    11155    1   GOPO0A:
      776    11156    1           ADIR.MONID=RDIR.MONID;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:65   
      777    11157    1   GOPO0:
      778    11158    1           REMEMBER DCIASK IN EDCIASK;
      779    11159    1           REMEMBER SADERR IN ESADERR;
      780    11160    1           CALL POBOOT ALTRET(POERR);
      781    11161        /* See about patches */
      782    11162    1           PTCHBF='0'B;
      783    11163    2           IF RCV_FLG='0'B THEN DO;
      784    11164    2                 CRWISH='0'B;
      785    11165    2                 OCWISH='0'B;
      786    11166    2                 MT2WISH='0'B;
      787    11167    2                 PAT2_INDX=0;
      788    11168    2                 SMTWISH=-1;
      789    11169    3                 IF ADPXF.P='1'B THEN DO;  /* Change default patch option        */
      790    11170    3                       IF NF_FLG.NONEW='1'B THEN
      791    11171    3                         CALL TYPEC(NOPTIONS);
      792    11172        /* See if he wants a second patch tape */
      793    11173    3   ASKT2:
      794    11174    3                       CALL KEYIN(SCDPA,ANSBUF);
      795    11175    3                       CALL GETFD(ANSBUF.TXT,16) ALTRET(PAT2_DONE);
             11175                                /* The default is No */
      796    11176    4                       DO SELECT(SUBSTR(ANSBUF.TXT,0,1));
      797    11177    4                         SELECT('Y','y');
      798    11178    4                         MESSAGE$=ADDR(PATAM);
      799    11179    4                         SUBSTR(TEXTM.TXT,21,6)=SUBSTR(DEVINFO.DEVNAME(%FRSTMT),0,6);
      800    11180    4   ASKADT2:
      801    11181    4                         CALL KEYIN(PATAM,ANSBUF);
      802    11182    4                         CALL GETFD(ANSBUF.TXT,16) ALTRET(ASKADT2);
      803    11183    4                         IF FIELD_LEN>2 OR DECIM_FLG='0'B THEN GOTO ASKADT2;
      804    11184    5                         IF FIELD_LEN=1 THEN DO; /* Make it a 2 digit field      */
      805    11185    5                               SUBSTR(POANS,1,1)=SUBSTR(POANS,0,1);
      806    11186    5                               SUBSTR(POANS,0,1)='0';
      807    11187    5                             END;          /* THEN                               */
      808    11188    5                         DO I=%FRSTMT TO %(FRSTDP-1);
      809    11189    5                           IF SUBSTR(DEVINFO.DEVNAME(I),6,2)=POANS THEN GOTO DOPAT2;
      810    11190    5                         END;              /* DO I=                              */
      811    11191    4                         GOTO ASKADT2;
      812    11192    4   DOPAT2:
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:66   
      813    11193    4                         IF I=PO_INDX THEN; /* Not another tape                  */
      814    11194    4                           ELSE PAT2_INDX=I;
      815    11195    4                         SELECT('N','n');
      816    11196    4                         SELECT(ELSE);
      817    11197    4                       GOTO ASKT2;
      818    11198    4                       END;                /* Do Select                          */
      819    11199    3   PAT2_DONE:
      820    11200    4                 IF PAT2_INDX=0 THEN DO;
      821    11201    4   TPQ0:
      822    11202    4                       CALL KEYINXX(QTPQ,ANSBUF);
      823    11203    4                       CALL AOC(MTWISH) ALTRET(TPQ0);
      824    11204    4                     END;                  /* THEN                               */
      825    11205    4                   ELSE DO;
      826    11206    4   TPQ1:
      827    11207    4                       CALL KEYINXX(QTPQ1,ANSBUF);
      828    11208    4                       CALL AOC(MTWISH) ALTRET(TPQ1);
      829    11209    4   TPQ2:
      830    11210    4                       CALL KEYINXX(QTPQ2,ANSBUF);
      831    11211    4                       CALL AOC(MT2WISH) ALTRET(TPQ2);
      832    11212    5                       IF MT2WISH~='0'B THEN DO; /* Rewind and set density       */
      833    11213    6                             CALL SET_PAT2_DEN WHENALTRETURN DO;
      834    11214    6                                   CALL TYPEC(PATCH_ERR);
      835    11215    6                                   GOTO POERR;
      836    11216    6                                 END;
      837    11217    5                           END;
      838    11218    4                     END;                  /* ELSE                               */
      839    11219    3   CRQ0:
      840    11220    3                 CALL KEYINXX(QCRQ,ANSBUF);
      841    11221    3                 CALL AOC(CRWISH) ALTRET(CRQ0);
      842    11222    3   OCQ0:
      843    11223    3                 CALL KEYINXX(QOCQ,ANSBUF);
      844    11224    3                 CALL AOC(OCWISH) ALTRET(OCQ0);
      845    11225    3                     END;                  /* THEN                               */
      846    11226    2                   ELSE;
      847    11227    2   GOPO01:
      848    11228    3                 IF VOFLG='0'B THEN DO;    /* If VOLINIT skip disk stuff         */
      849    11229    4                       IF TQFLAG~='0'B THEN DO; /* TBOOT from XDELTA or MINI     */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:67   
      850    11230    4                             TQFLAG='0'B;
      851    11231    4                             CALL WRITE_PATCH(ADDR(SMINI),8);
      852    11232    4                             PDEV=1;
      853    11233    4                             CALL MDELTCALL; /* Let MINI read patches            */
      854    11234    4                             PDEV=0;
      855    11235    4                             NAVDA=ADIR.PATCH.DA;
             11235                              /* Start patches after FW and don't rewrite or move disk FW */
      856    11236    4                           END;            /* THEN                               */
      857    11237    4                         ELSE DO;
      858    11238    4                             CALL WRTFW;   /* Write FW on disk                   */
      859    11239    5                             IF S1000_FLG='0'B THEN DO;
      860    11240        /* Move system disk FW to reserved buffer,
      861    11241           and modify AARDVARK disk FW load DCW's */
      862    11242    5                                   LGTH=(DKHDR.CSOSIZE+DKHDR.MMOSIZE)*4;
      863    11243    5                                   FORMDFW_PTR='0'B;
             11243                                            /* Initialize pointer to actual disk FW */
      864    11244    5                                   FORMDFW_PTR.S_D_FIELD=%ALS_AIS;
      865    11245    5                                   FORMDFW_PTR.WOFFS=DKHDR.BUFAD;
      866    11246    5                                   DCFWSTART$->FWBUF=FORMDFW$->FWBUF; /* and move FW*/
      867    11247    5                                   DKHDR.BUFAD=DCFWSTART_PTR.WOFFS; /* update header */
      868    11248    5                                   FWHDR$=DCFWHDR$;
      869    11249    5                                   CALL BUILDFW_DCWS(DCCSOD1,DCMMOD1);
      870    11250    5                                 END;      /* THEN                               */
      871    11251    4                               ELSE;
      872    11252    4                             CALL WRITE_PATCH(ADDR(SMINI),8);
      873    11253    4                             PDEV=1;
      874    11254    4                             CALL MDELTCALL; /* Let MINI read patches            */
      875    11255    4                             PDEV=0;
      876    11256    4                           END;            /* ELSE                               */
      877    11257    3   GOPO01A:
      878    11258        /* Set up system area directory */
      879    11259    3                       HDRPAT.DA=NAVDA;    /* Disk address for patches           */
      880    11260    3                       ADIR.TIGRDATA.DA=HDRPAT.DA+%PATCH_GRS;
             11260                                /* Allow space for patches */
      881    11261    3                       NAVDA=NAVDA+%PATCH_GRS;
      882    11262    3   GOPO02:
      883    11263        /* Move headers into directory */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:68   
      884    11264    3                       HDR$=ADDR(HDRXLS);
      885    11265    4                       DO I=0 TO %(NUMTC+14-1);
      886    11266    4                         ASADTAB$(I)->BAS_HDR=BAS_HDR;
      887    11267    4                         HDR$=PINCRW(HDR$,4);
      888    11268    4                       END;                /* DO I=                              */
      889    11269        /* Read VID and rewrite with system area non zero */
      890    11270    3                       CALL RDVID ALTRET(DCIASK);
      891    11271    4                       IF(FM$VID.SYSSIZE=0 OR NF_FLG='0'B) THEN DO;
      892    11272    4                             FM$VID.SYSSIZE=NAVDA*4;
      893    11273    4                             FM$VID.SYSDIRDA=TOPDA;
      894    11274    4                             ADIR.DUMP.DA=NAVDA*4;
      895    11275    4                           END;            /* THEN                               */
      896    11276    3                         ELSE;
      897    11277    3   GOPO02A:
      898    11278        /* Set up disk bootstrap program */
      899    11279    4                       IF RPM_FLG THEN DO;
      900    11280    4                             BOOT$=ADDR(RC1); /* Fix reboot code                 */
      901    11281    4                             BOOTRC=BOOT;
      902    11282    4                             HUBOOTRC(2*(POFFW(ADDR(RC1LIM),ADDR(RC1))))=HDRAAR.SIZE;
      903    11283    4                             UBOOTRC(POFFW(ADDR(RC1SKAD),ADDR(RC1)))=HDRAAR.DA*16;
      904    11284        /* Init seek and read IDCW  */
      905    11285    4                             BDEV.DEV#=DEVINFO.DEV#(SYS_DPX);
      906    11286    4                             BBOOTRC(POFFW(ADDR(RC1SK),ADDR(RC1)))=(BBOOTRC(POFFW(ADDR(
             11286                                      RC1SK),ADDR(RC1)))|BDEV);
      907    11287    4                             BDEV.ORD='25'O;
      908    11288    4                             BBOOTRC(POFFW(ADDR(RC1ICW),ADDR(RC1)))=(BBOOTRC(POFFW(ADDR
             11288                                      (RC1ICW),ADDR(RC1)))|BDEV);
      909    11289    4                             BOOT=BOOTRC;  /* Put it back in RPM_BOOTRC          */
      910    11290    4                             BOOT$=ADDR(XC1);
      911    11291    4                             BOOTRC=BOOT;  /* Init the disc boot code            */
      912    11292    4                             HUBOOTRC(2*(POFFW(ADDR(XC1LIM),ADDR(XC1))))=HDRAAR.SIZE;
      913    11293    4                             UBOOTRC(POFFW(ADDR(XC1SKAD),ADDR(XC1)))=HDRAAR.DA*16;
      914    11294        /* Init seek and read IDCW  */
      915    11295    4                             BDEV = '0'B;
      916    11296    4                             BDEV.DEV#=DEVINFO.DEV#(SYS_DPX);
      917    11297    4                             BBOOTRC(POFFW(ADDR(XC1SK),ADDR(XC1)))=(BBOOTRC(POFFW(ADDR(
             11297                                      XC1SK),ADDR(XC1)))|BDEV);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:69   
      918    11298    4                             BDEV.ORD='25'O;
      919    11299    4                             BBOOTRC(POFFW(ADDR(XC1ICW),ADDR(XC1)))=(BBOOTRC(POFFW(ADDR
             11299                                      (XC1ICW),ADDR(XC1)))|BDEV);
      920    11300    4                           END;
      921    11301    4                         ELSE DO;
      922    11302    4                             BOOT$=ADDR(MC1);
      923    11303    4                             BOOTRC=BOOT;  /* Init the disc boot code            */
      924    11304    4                             HUBOOTRC(2*(POFFW(ADDR(MC1LIM),ADDR(MC1))))=HDRAAR.SIZE;
      925    11305    4                             UBOOTRC(POFFW(ADDR(MC1SKAD),ADDR(MC1)))=HDRAAR.DA*16;
      926    11306        /* Init seek IDCW and PCW */
      927    11307    4                             BDEV.DEV#=DEVINFO.DEV#(SYS_DPX);
      928    11308    4                             BBOOTRC(POFFW(ADDR(MC1SK),ADDR(MC1)))=(BBOOTRC(POFFW(ADDR(
             11308                                      MC1SK),ADDR(MC1)))|BDEV);
      929    11309    4                             BBOOTRC(POFFW(ADDR(MC1PCW),ADDR(MC1)))=(BBOOTRC(POFFW(ADDR
             11309                                      (MC1PCW),ADDR(MC1)))|BDEV);
      930    11310    4                             BDEV.ORD='25'O;
      931    11311    4                             BBOOTRC(POFFW(ADDR(MC1ICW),ADDR(MC1)))=(BBOOTRC(POFFW(ADDR
             11311                                      (MC1ICW),ADDR(MC1)))|BDEV);
      932    11312    4                           END;
      933    11313    3                       BDEV.ORD='0'B;
      934    11314        /* Move at sector 2 for 451 and at sect 1 for 501 */
      935    11315    3                       BOOT$=PINCRW(ADDR(POBUF),128);
      936    11316    3                       BOOT=BOOTRC;
      937    11317    3                       BOOT$=PINCRW(ADDR(POBUF),512);
      938    11318    3                       BOOT=BOOTRC;
      939    11319        /**/
      940    11320    3                       CALL WRVID ALTRET(DCIASK);
      941    11321        /* Write system area directory */
      942    11322    4                       IF RCV_FLG='0'B THEN DO;
      943    11323    4                             IF SUBSTR(IDBUF.TXT,5,3)=ADIR.MONID.A.VER THEN
             11323                                      /* Version# */
      944    11324    4                               ADIR.MONID.A.BOOTC=ADIR.MONID.A.BOOTC+1;
      945    11325    4                               ELSE
      946    11326        /* Use version from tape */
      947    11327    4                               ADIR.MONID.A.VER=SUBSTR(IDBUF.TXT,5,3);
      948    11328    4                           END;            /* THEN                               */
      949    11329    3                         ELSE;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:70   
      950    11330    3   GOPO02B:
      951    11331    3                       CALL MINIQC_PL6(SYS_DPX,ADDR(SADDCW),,%FCNWDB,TOPDA) ALTRET(
             11331                                SADERR);
      952    11332        /* Write tape ID */
      953    11333    3                       CALL MINIQ_PL6(SYS_DPX,ADDR(IDBUF.TXT),IDBUF.CNT,%FCNWDB,ADIR.
             11333                                AARDVARK.DA) ALTRET(SADERR);
      954    11334        /* Set up and write schema directory */
      955    11335    3                       FROMDESCR$=ADDR(AALS.DESCSCH);
      956    11336    3                       TODESCR$=ADDR(POBUF);
      957    11337    3                       TODESCR$->BAS_DESCR=FROMDESCR$->BAS_DESCR;
      958    11338    3                       FROMDESCR$=ADDR(AALS.DESCSCH0);
      959    11339    3                       TODESCR$=PINCRW(TODESCR$,2);
      960    11340    4                       DO I=0 TO 11;
      961    11341    4                         TODESCR$->BAS_DESCR=FROMDESCR$->BAS_DESCR;
      962    11342    4                         FROMDESCR$=PINCRW(FROMDESCR$,2);
      963    11343    4                         TODESCR$=PINCRW(TODESCR$,2);
      964    11344    4                       END;                /* DO I=                              */
      965    11345    3                       CALL MINIQC_PL6(SYS_DPX,ADDR(PODCW),,%FCNWDB,ADIR.SCHEMADIR.DA)
             11345                                ALTRET(SADERR);
      966    11346    3                     END;
      967    11347    2               END;
      968    11348    2             ELSE DO;
      969    11349    2                 CALL WRITE_PATCH(ADDR(SMINI),8);
      970    11350    2                 PDEV=1;
      971    11351    2                 CALL MDELTCALL;           /* Let MINI read patches              */
      972    11352    2               END;
      973    11353        /* Build MON page table */
      974    11354    1           CALL INITM;
      975    11355    1           CALL LOADPDBR;
      976    11356        /* Init GHOST1 PT */
      977    11357    1           CALL INIT1;
      978    11358    1           CALL INITP;                     /* Init PPUT                          */
      979    11359    1           CALL INITX;
      980    11360    1           MONSSR_PTR='0'B;
      981    11361    1           MONSSR_PTR.S_D_FIELD=%ALS_MONSSR; /* Frame MON SSR                    */
      982    11362    1           INFOX_PTR='0'B;
      983    11363    1           INFOX_PTR.S_D_FIELD=%ALS_MONIS; /* Frame MON ISR                      */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:71   
      984    11364        /* Establish CPU type and mode */
      985    11365    1           WMON$=ADDR(HW_TYPE);
      986    11366        /* RPM           - HW_TYPE is 6                 */
      987    11367        /* DP90 with XA  - HW_TYPE is 5                 */
      988    11368        /* DPS90 basic   - HW_TYPE is 4                 */
      989    11369        /* all others    - HW_TYPE is 0                 */
      990    11370    2           IF S1000_FLG THEN DO;
      991    11371    2                 IF XA_MODE THEN PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN = 5;
      992    11372    2                   ELSE
      993    11373    2                   PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN = 4;
      994    11374    2               END;
      995    11375    1             ELSE
      996    11376    1             IF RPM_FLG THEN
      997    11377    1               PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN = 6;
      998    11378    1               ELSE PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN = 0;
      999    11379    1           WMON$=ADDR(IT_UFLG);
     1000    11380    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=UFLG;
             11380                    /* Set users allowed flag for TIGR */
     1001    11381    1           WMON$=ADDR(IT_AAFAULT);
     1002    11382    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_DESCR=TGRDESC;
             11382                    /* Set entry descriptor for TIGR */
     1003    11383    1           WMON$=ADDR(IT_XDELTA);
     1004    11384    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=0; /* Assume keeping XDELTA   */
     1005    11385        /* Size of XDELTA */
     1006    11386    1           WMON$=ADDR(MM_XDEL);
     1007    11387    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=(HDRMH.BASE-HDRXLS.BASE+1023)/1024+(
             11387                    HDRGR.BASE-HDRME.BASE+1023)/1024;
     1008    11388    1           WMON$=ADDR(MM_FPPH);            /* Head of free page chain            */
     1009    11389    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=NAVPG/1024;
     1010    11390    2           IF RPM_FLG THEN DO;
     1011    11391    2                 WMON$=ADDR(H_DPS8000_CONFIG_NAME); /* 8000 CONFIG NAME          */
     1012    11392    2                 PINCRW(INFOX$,WMON_PTR.WOFFS)->BASED$CHAR = IS_CFG_NAME;
     1013    11393    2                 WMON$=ADDR(H_DPS8000_SCU_INFO); /* 8000 SCU information         */
     1014    11394    2                 PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO = '0'B;
     1015    11395    3                 IF ((IS_CFG_TYPE = %IS_CFG_MULT_CAB_REL#) AND IS_CSP_SIDE1) OR
             11395                          IS_MEM_SIDE1 THEN DO;
     1016    11396    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.LBND(1)= LOWER_SCU.LB;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:72   
     1017    11397    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.UBND(1)= LOWER_SCU.UB;
     1018    11398    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.PAGES(1) = LOWER_SCU.
             11398                                UB - LOWER_SCU.LB + 1;
     1019    11399    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.LBND(0)= UPPER_SCU.LB;
     1020    11400    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.UBND(0)= UPPER_SCU.UB;
     1021    11401    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.PAGES(0) = UPPER_SCU.
             11401                                UB - UPPER_SCU.LB + 1;
     1022    11402    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.STATUS.LMEM(1) = '1'B;
     1023    11403    3                     END;
     1024    11404    3                   ELSE DO;
     1025    11405    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.LBND(0)= LOWER_SCU.LB;
     1026    11406    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.UBND(0)= LOWER_SCU.UB;
     1027    11407    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.PAGES(0) = LOWER_SCU.
             11407                                UB - LOWER_SCU.LB + 1;
     1028    11408    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.LBND(1)= UPPER_SCU.LB;
     1029    11409    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.UBND(1)= UPPER_SCU.UB;
     1030    11410    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.PAGES(1) = UPPER_SCU.
             11410                                UB - UPPER_SCU.LB + 1;
     1031    11411    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.STATUS.LMEM(0) = '1'B;
     1032    11412    3                     END;
     1033    11413    3                 DO CASE (IS_CFG_TYPE);
     1034    11414    3                   CASE(%IS_CFG_SINGLE_CAB#);
     1035    11415    4                     IF IS_CSP_SIDE1 THEN DO;
     1036    11416    4                           PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.STATUS.NCONF(0) =
             11416                                    '1'B;
     1037    11417    4                           PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.PAGES(0) = 0;
     1038    11418    4                         END;
     1039    11419    4                       ELSE DO;
     1040    11420    4                           PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.STATUS.NCONF(1) =
             11420                                    '1'B;
     1041    11421    4                           PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.PAGES(1) = 0;
     1042    11422    4                         END;
     1043    11423    3                   CASE(%IS_CFG_MULT_CAB_REL#);
     1044    11424    3                     IF IS_CSP_SIDE1 THEN
     1045    11425    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.STATUS.RBIT(0) = '1'B;
     1046    11426    3                       ELSE
     1047    11427    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.STATUS.RBIT(1) = '1'B;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:73   
     1048    11428    3                 END;
     1049    11429    2               END;
     1050    11430    1           WMON$=ADDR(MM_FPPT);            /* Tail of free page chain            */
     1051    11431    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=HIAVPG;
     1052    11432    1           WMON$=ADDR(MM_PCORE);           /* Total real memory                  */
     1053    11433    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=HIPAGE;
     1054    11434    1           WMON$=ADDR(MM_GAPSZ);
     1055    11435    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=GAP_SZ;
     1056    11436    1           IF IS_CFG_TYPE = %IS_CFG_MULT_CAB_REL# THEN
     1057    11437    1             FREE_PG_COUNT = HIAVPG-NAVPG/1024 + 1;
     1058    11438    1             ELSE
     1059    11439    1             FREE_PG_COUNT=HIAVPG-NAVPG/1024-GAP_SZ+1;
     1060    11440        /* Free XDELTA and FW pages */
     1061    11441    2           IF RCV_FLG='0'B THEN DO;
     1062    11442    2                 IF ADPXF.X='0'B THEN CALL FREEXD(FREE_PG_COUNT);
     1063    11443    2                   ELSE;
     1064    11444    2               END;                        /* THEN                               */
     1065    11445    2             ELSE DO;
     1066    11446    2                 IF XDFLAG=0 THEN CALL FREEXD(FREE_PG_COUNT);
     1067    11447    2                   ELSE;
     1068    11448    2               END;                        /* ELSE                               */
     1069    11449    1           IF S1000_FLG='0'B THEN CALL FREEFW(FREE_PG_COUNT); /* Free firmware pages */
     1070    11450    1           CALL FREETABLES(FREE_PG_COUNT); /* Free PPUT and reverse map pages    */
     1071    11451    1           WMON$=ADDR(MM_FPPC);            /* Free pages chain count             */
     1072    11452    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=FREE_PG_COUNT;
     1073    11453    1           WMON$=ADDR(MM_AARD);            /* Nr of pages for AARDVARK           */
     1074    11454    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=HDRAAR.SIZE/1024;
     1075    11455    1           AALS.MONLSR=MONSSR$->B$SS.LSR;  /* Mon LS descriptor                  */
     1076    11456    1           G1HJIT_PTR='0'B;
     1077    11457    1           G1HJIT_PTR.S_D_FIELD=%ALS_HJIT1; /* Frame Ghost1 HJIT                 */
     1078    11458    1           G1HJIT.SSS.FRAME2.IC=HDRGP.START; /* Start address of Ghost1->SSR frame */
     1079    11459    1           MONSSR$->B$SS.IC=HDRMP0.START;  /* Mon start address-> SSR frame      */
     1080    11460        /* Build PO tape and System disk information */
     1081    11461    1           FM_INFO.PORT=IOMTAB.PORT#(DEVINFO.IOM#(PO_INDX));
     1082    11462    1           FM_INFO.DVN=DEVINFO.DEV#(PO_INDX);
     1083    11463    1           FM_INFO.CHN=DEVINFO.CHN#(PO_INDX);
     1084    11464    1           WMON$=ADDR(FM_POTAPE);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:74   
     1085    11465    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->HBAS_UBIN=FM_INFO;
     1086    11466    1           FM_INFO.PORT=IOMTAB.PORT#(DEVINFO.IOM#(SYS_DPX));
     1087    11467    1           FM_INFO.DVN=DEVINFO.DEV#(SYS_DPX);
     1088    11468    1           FM_INFO.CHN=DEVINFO.CHN#(SYS_DPX);
     1089    11469    1           WMON$=ADDR(FM_SYSDP);
     1090    11470    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->HBAS_UBIN=FM_INFO;
     1091    11471    1           IF RPM_FLG THEN
     1092    11472    1             CALL CLEAR_RIW;
     1093    11473    1           CALL ITIG;
     1094    11474    1           WMON$=ADDR(IT_BOOTFLAG);
     1095    11475    1           IF VOFLG='1'B THEN BOOTCODE=%I_VOLONLY; /* Volinit                    */
     1096    11476    2             ELSE DO;
     1097    11477    3                 IF RCV_FLG='0'B THEN DO CASE(UNF_FLG); /* TB                    */
     1098    11478    3                       CASE(0);            /* New files                          */
     1099    11479    3                         BOOTCODE=%I_NEWFILES;
     1100    11480    3                       CASE(1);            /* Sysfiles,Norecon                   */
     1101    11481    3                         BOOTCODE=%I_SYSFILES;
     1102    11482    3                       CASE(2);            /* Nofiles,Norecon                    */
     1103    11483    3                         BOOTCODE=%I_NOFILES;
     1104    11484    3                       CASE(5);            /* Sysfiles,Recon                     */
     1105    11485    3                         BOOTCODE=%I_SYSFILES_RECON;
     1106    11486    3                       CASE(6);            /* Nofiles,Recon                      */
     1107    11487    3                         BOOTCODE=%I_NOFILES_RECON;
     1108    11488    3                     END;                  /* THEN DO CASE                       */
     1109    11489    3                   ELSE DO CASE(URCV_FLG); /* DB,OR                              */
     1110    11490    3                       CASE(8);            /* OR at tape boot                    */
     1111    11491    3                         BOOTCODE=%I_OPRECOVRY;
     1112    11492    3                       CASE(1);            /* Recovery                           */
     1113    11493    3                         BOOTCODE=%I_RECOVERY;
     1114    11494    3                       CASE(ELSE);
     1115    11495    3                         IF NF_FLG.RECON='1'B THEN BOOTCODE=%I_DISKBOOT_RECON;
     1116    11496    3                           ELSE BOOTCODE=%I_DISKBOOT;
     1117    11497    3                     END;                  /* ELSE  DO CASE                      */
     1118    11498    2               END;                        /* ELSE                               */
     1119    11499    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=BOOTCODE;
     1120    11500    1           PINCRW(MONSSR$,64)->B$SS=MONSSR$->B$SS;
             11500                    /* Move initial frame to 2'nd copy for multiprocessing */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:75   
     1121    11501    2           IF HDRXIS.BASE~=0 THEN DO;
     1122    11502    2                 IF RCV_FLG='0'B THEN;     /* Go to XDELTA using initial SSR     */
     1123    11503    3                   ELSE DO;
     1124    11504    3                       IF XDFLAG=0 THEN GOTO CALL_MON;
     1125    11505    4                         ELSE DO;
     1126    11506    4                             XDFLAG=0;
     1127    11507    4                             CALL LOAD_SSR(XDSSR); /* Use XDELTA's saved SSR     */
     1128    11508    4                           END;            /* ELSE                               */
     1129    11509    3                     END;                  /* ELSE                               */
     1130    11510    2               END;                        /* THEN                               */
     1131    11511    2             ELSE DO;
     1132    11512    2   CALL_MON:
     1133    11513    2                 WMON$=ADDR(IT_XDELTA);
     1134    11514    2                 PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=1; /* Not keeping XDELTA */
     1135    11515    2                 CALL LOAD_SSR(SSDMONX);   /* Go to TIGR                         */
     1136    11516    2               END;                        /* ELSE                               */
     1137    11517    1           RETURN;                         /* Go in BMAP for EXIT                */
     1138    11518        /**/
     1139    11519    1   XDELT_RET:ENTRY ALTRET;
     1140    11520        /* Return after XDELTA */
     1141    11521    1           IF VOFLG='1'B THEN;             /* On VOLINIT don't write             */
     1142    11522    1             ELSE CALL WRTDP;              /* Write PO stuff on disk             */
     1143    11523    2           IF ADPXF.X='0'B THEN DO;        /* Don't keep XDELTA                  */
     1144    11524    2                 INFOX_PTR='0'B;
     1145    11525    2                 INFOX_PTR.S_D_FIELD=%ALS_MONIS; /* Frame MON ISR                */
     1146    11526    2                 GOTO CALL_MON;
     1147    11527    2               END;                        /* THEN                               */
     1148    11528    1             ELSE ALTRETURN;
     1149    11529        /**/
     1150    11530    1   SADERR:
     1151    11531    1           CALL TYPEC(SADEM);
     1152    11532    1           GOTO DCIASK;
     1153    11533    1   POERR:
     1154    11534    1           CALL TYPEC(POEM);
     1155    11535    1   LOOP_PL6:ENTRY ALTRET;
     1156    11536    1           CALL TYPEC(AM1);
     1157    11537    1           CALL HANG;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:76   
     1158    11538    1   GOPO00: ;
     1159    11539    1           RETURN;
     1160    11540    1   SET_PAT2_DEN: PROC ALTRET;
     1161    11541    2           CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNREW);
     1162    11542    2           CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNSDT8) ALTRET(CHECK_DPT16);
     1163    11543    3           CALL MINIQ_PL6(PAT2_INDX,ADDR(POBUF),80,%FCNRTB) WHENRETURN DO;
     1164    11544    3                 CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNREW);
     1165    11545    3                 RETURN;
     1166    11546    3               END;
     1167    11547    3             WHENALTRETURN DO;
     1168    11548    3                 IF (DEVINFO.BSTAT.W1(PAT2_INDX) & '777700'O) ~= '5210'O THEN
     1169    11549    3                   GOTO PAT2_ERR;
     1170    11550    3               END;
     1171    11551    2   CHECK_DPT16:
     1172    11552    2           CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNREW);
     1173    11553    2           CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNSDT16) ALTRET(CHECK_DPT62);
     1174    11554    3           CALL MINIQ_PL6(PAT2_INDX,ADDR(POBUF),80,%FCNRTB) WHENRETURN DO;
     1175    11555    3                 CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNREW);
     1176    11556    3                 RETURN;
     1177    11557    3               END;
     1178    11558    3             WHENALTRETURN DO;
     1179    11559    3                 IF (DEVINFO.BSTAT.W1(PAT2_INDX) & '777700'O) ~= '5210'O THEN
     1180    11560    3                   GOTO PAT2_ERR;
     1181    11561    3               END;
     1182    11562    2   CHECK_DPT62:
     1183    11563    2           CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNREW);
     1184    11564    2           CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNSDT62) ALTRET(PAT2_ERR);
     1185    11565    3           CALL MINIQ_PL6(PAT2_INDX,ADDR(POBUF),80,%FCNRTB) WHENRETURN DO;
     1186    11566    3                 CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNREW);
     1187    11567    3                 RETURN;
     1188    11568    3               END;
     1189    11569    2   PAT2_ERR:
     1190    11570    2           ALTRETURN;
     1191    11571    2   END SET_PAT2_DEN;
     1192    11572    1   POBOOT: ENTRY ALTRET;
     1193    11573        /* Make sure that headers and descriptors are zeroed */
     1194    11574    1           ERAS_F$=ADDR(HDRXLS);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:77   
     1195    11575    1           ERAS_L$=ADDR(HDRBUF);
     1196    11576    1           ERAS_LGTH=(ERAS_L_PTR.WOFFS-ERAS_F_PTR.WOFFS)*36;
     1197    11577    1           ERAS_F$->ERAS_BUF='0'B;
     1198    11578    1           ERAS_F$=ADDR(AALS.DESCXL);
     1199    11579    1           ERAS_L$=ADDR(AALS.DESCGI);
     1200    11580    1           ERAS_LGTH=(ERAS_L_PTR.WOFFS-ERAS_F_PTR.WOFFS)*36;
     1201    11581    1           ERAS_F$->ERAS_BUF='0'B;
     1202    11582    1           AALS.MONLSR='0'B;
     1203    11583        /**/
     1204    11584    1           OUHDESC$=ADDR(AALS.OUHDESC);    /* For debug schema processing        */
     1205    11585    1           SCDESC$=ADDR(AALS.DESCSCH0);    /* For debug schema processing        */
     1206    11586    1           IF RCV_FLG~='0'B THEN GOTO POPSAD; /* Recovery or disk boot           */
     1207    11587    1             ELSE;
     1208    11588        /* Get PO index in DEVINFO */
     1209    11589    2           IF ADPXF.D='0'B THEN DO;
     1210    11590    2                 PO_INDX=BOOTTAPE;
     1211    11591    2                 IPO_INDX=BOOTTAPE;
     1212    11592    2                 PO_DEVN=SUBSTR(DEVINFO.DEVNAME(BOOTTAPE),6,2);
     1213    11593    2               END;                        /* THEN                               */
     1214    11594    2             ELSE DO;
     1215    11595    2                 MESSAGE$=ADDR(GTPOXM);
     1216    11596    2                 SUBSTR(TEXTM.TXT,11,6)=SUBSTR(DEVINFO.DEVNAME(%FRSTMT),0,6);
     1217    11597    2   ASKPO:
     1218    11598    2                 CALL KEYIN(GTPOXM,ANSBUF);
     1219    11599    2                 CALL GETFD(ANSBUF.TXT,16) ALTRET(ASKPO);
     1220    11600    2                 IF DECIM_FLG='0'B OR FIELD_LEN>2 THEN GOTO ASKPO;
     1221    11601    2                   ELSE;
     1222    11602    3                 IF FIELD_LEN=1 THEN DO;
     1223    11603    3                       SUBSTR(POANS,1,1)=SUBSTR(POANS,0,1);
             11603                                /* Make it a 2 digit answer */
     1224    11604    3                       SUBSTR(POANS,0,1)='0';
     1225    11605    3                     END;                  /* THEN                               */
     1226    11606    2                   ELSE;
     1227    11607    3                 DO I=%FRSTMT TO %(FRSTDP-1);
     1228    11608    3                   IF SUBSTR(DEVINFO.DEVNAME(I),6,2)=POANS THEN GOTO POF;
     1229    11609    3                     ELSE;
     1230    11610    3                 END;                      /* DO I=                              */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:78   
     1231    11611    2                 GOTO ASKPO;               /* Ask again                          */
     1232    11612    2   POF:
     1233    11613    2                 PO_INDX=I;
     1234    11614    2                 IPO_INDX=I;
     1235    11615    2                 BOOTTAPE = I;
     1236    11616    2                 PO_DEVN=POANS;
     1237    11617    2               END;                        /* ELSE                               */
     1238    11618    1           POIDC=0;                        /* Zero -> error count                */
     1239    11619    1   POBT1:
     1240    11620    1           CALL MINIQ_PL6(PO_INDX,0,0,%FCNREW); /* Rewind                        */
     1241    11621    1           CALL MINIQ_PL6(PO_INDX,0,0,%FCNSDT8) ALTRET(CHECK_D16);/* Set density */
     1242    11622    2           CALL MINIQ_PL6(PO_INDX,ADDR(POBUF),128,%FCNRTB) WHENRETURN DO;
             11622                    /* Boot strap record is binary */
     1243    11623    2                 GOTO POSKIP;
     1244    11624    2               END;
     1245    11625    2             WHENALTRETURN DO;
     1246    11626    2                 IF (DEVINFO.BSTAT.W1(PO_INDX) & '777700'O) ~= '5210'O THEN
     1247    11627    2                   GOTO POLRX;
     1248    11628    2               END;
     1249    11629    1   CHECK_D16:
     1250    11630    1           CALL MINIQ_PL6(PO_INDX,0,0,%FCNREW);
     1251    11631    1           CALL MINIQ_PL6(PO_INDX,0,0,%FCNSDT16);
     1252    11632        /* Read boot strap record */
     1253    11633    1           CALL MINIQ_PL6(PO_INDX,ADDR(POBUF),128,%FCNRTB) ALTRET(POLRX);
             11633                    /* Boot strap record is binary */
     1254    11634        /* Skip over bison and read tape ID */
     1255    11635    1   POSKIP:
     1256    11636    1           CALL MINIQ_PL6(PO_INDX,ADDR(IDBUF.TXT),IDBUF.CNT,%FCNRT9) ALTRET(POIDX);
             11636                    /* Tape ID record is in ASCII */
     1257    11637    1           IF SUBSTR(IDBUF.TXT,0,4)~='CP-6' THEN GOTO POSKIP; /* Keep on looking */
     1258    11638    1             ELSE;
     1259    11639        /* Type tape ID */
     1260    11640    1           TIDBUF.TXT=IDBUF.TXT;
     1261    11641    1           CALL TYPEC(TIDBUF);
     1262    11642    1   POBT2:
     1263    11643    1           AALS.DESCPPUT.BASE=((FW_PTR.WOFFS+1023)/1024)*1024*4;
             11643                    /* Assign PPUT at next page address after top of the world */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:79   
     1264    11644    1           AALS.DESCPPUT.BOUND=IS_PPUT_SIZE*4+3;
     1265    11645        /* Allocate space for PPUT */
     1266    11646    1           IPHYPG=AALS.DESCPPUT.BASE/4;    /* Word address                       */
     1267    11647    1           IF S1000_FLG THEN I=%S1000_MAXMEMPG;
     1268    11648    1             ELSE
     1269    11649    1             IF RPM_FLG THEN I = %RPM_MAXMEMPG;
     1270    11650    1               ELSE I=%MAXMEMPG;
     1271    11651    2           DO WHILE I>0;
     1272    11652    2             I=I-1024;
     1273    11653    2             IPHYPG=IPHYPG+1024;
     1274    11654    2           END;                            /* DO WHILE                           */
     1275    11655    1           BASEMPT=IPHYPG;                 /* Base of Mon PT                     */
     1276    11656        /* On S1000 allocate space for Physical->Real MAP */
     1277    11657    2           IF S1000_FLG THEN DO;
     1278    11658        /* Compute physical memory size */
     1279    11659    2                 PHYMEM_SZ=WS0PT.RPN(0);
     1280    11660    3                 DO I=1 TO HIPAGE;
     1281    11661    3                   PHYMEM_SZ=MAXIMUM(PHYMEM_SZ,WS0PT.RPN(I));
     1282    11662    3                 END;                      /* DO I=                              */
     1283    11663    2                 PHYMEM_SZ=((PHYMEM_SZ+4095)/4096)*4096-1;
             11663                          /* Rounded to 4M, Nr of last page */
     1284    11664        /* Allocate space for MAP */
     1285    11665    2                 I=%S1000_MAXMEMPG;
     1286    11666    3                 DO WHILE I>0;
     1287    11667    3                   I=I-1024;
     1288    11668    3                   BASEMPT=BASEMPT+512;    /* The map is on halfwords            */
     1289    11669    3                 END;                      /* DO WHILE                           */
     1290    11670    2                 BASEMPT=((BASEMPT+1023)/1024)*1024;
     1291    11671    2               END;                        /* THEN                               */
     1292    11672    1             ELSE;
     1293    11673    1           AALS.DESCMPT.BASE=BASEMPT*4;    /* Convert to bytes, base of Mon PT   */
     1294    11674    1           BASEJ=BASEMPT+%JITPG*1024;      /* JIT addr                           */
     1295    11675    1           AALS.DESCJ.BASE=BASEJ*4;        /* Base of Monitor JIT                */
     1296    11676    1           AALS.DESCTM.BASE=AALS.DESCJ.BASE+%JIT_SIZEC; /* Base of Monitor TSTACK */
     1297    11677    1           WSQ3PG=AALS.DESCJ.BASE/4+2*1024;
     1298    11678    1           NAVDW=WSQ3PG+2048;              /* Assign two pages for WSQ3 PT       */
     1299    11679    1           NAV8W=NAVDW;               /* And initialize next available addresses */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:80   
     1300    11680    1           NAVPG=NAVDW;
     1301    11681    1   POHDR:  ;
     1302    11682    1   GETHDR:
     1303    11683    2           IF RCV_FLG='0'B THEN DO;
     1304    11684    2                 CALL MINIQ_PL6(IPO_INDX,ADDR(HDRBUF),LENGTHC(HDRBUF),%FCNRTB) ALTRET(
             11684                          POHDRX);
     1305    11685    2               END;                        /* THEN                               */
     1306    11686    2             ELSE DO;
     1307    11687        /* Simulate PO read */
     1308    11688    2   GT_DISKHDR:
     1309    11689    3                 IF(HDRTYP=%MPROCTC AND HDRMP0.DA~=0) THEN DO;
             11689                          /* It is Mon Proc overlay and we have done the root allready */
     1310    11690    3                       SADTAB$=ADDR(SADTAB.MP1$);
     1311    11691    3                       HDR$=ADDR(HDRMP1);
     1312    11692    4                       DO WHILE BAS_HDR.DA~=0; /* Look for a free header         */
     1313    11693    4                         HDR_PTR.WOFFS=HDR_PTR.WOFFS+4;
     1314    11694    4                         SADTAB_PTR.WOFFS=SADTAB_PTR.WOFFS+1;
     1315    11695    4                       END;                /*DO WHILE                            */
     1316    11696    3                     END;                  /* THEN                               */
     1317    11697    3                   ELSE DO;
     1318    11698    3                       SADTAB$=ADDR(SADTAB);
     1319    11699    3                       SADTAB_PTR.WOFFS=SADTAB_PTR.WOFFS+HDRTYP;
     1320    11700    3                     END;                  /* ELSE                               */
     1321    11701    2                 HDR$=SADTAB_ENTRY$;
     1322    11702    3                 IF BAS_HDR.DA=0 THEN DO;  /* This logical record doesn't exist  */
     1323    11703    3                       HDRTYP=HDRTYP+1;    /* Try next logical record            */
     1324    11704    3                       GOTO GT_DISKHDR;
     1325    11705    3                     END;                  /* THEN                               */
     1326    11706    2                   ELSE;
     1327    11707        /* Save this logical record */
     1328    11708    2                 HDRDA=BAS_HDR.DA;
     1329    11709    2                 HDRBUF=BAS_HDR;
     1330    11710    2                 HDRBUF.TINF.TYPE=HDRTYP;
     1331    11711    2                 IF HDRBUF.BASE>=0 THEN HDRBUF.BASE=0; /* Use 0                  */
     1332    11712    2                   ELSE;
     1333    11713    2                 IF HDRTYP=%MPROCTC THEN;
     1334    11714    2                   ELSE HDRTYP=HDRTYP+1;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:81   
     1335    11715    2               END;                        /* ELSE                               */
     1336    11716        /* Process the header in HDRBUF */
     1337    11717    1           IF HDRBUF.TINF.TYPE<0 OR HDRBUF.TINF.TYPE>%PATCHTC THEN GOTO POHDRX;
     1338    11718        /* Stuff into error messages */
     1339    11719    1           MESSAGE$=ADDR(POHDRM);
     1340    11720    1           CALL BINCHAR(SUBSTR(TEXTM.TXT,35,2),HDRBUF.TINF.TYPE);
     1341    11721    1           MESSAGE$=ADDR(POLRM);
     1342    11722    1           CALL BINCHAR(SUBSTR(TEXTM.TXT,34,2),HDRBUF.TINF.TYPE);
     1343    11723        /**/
     1344    11724    2           DO SELECT(HDRBUF.BASE);
     1345    11725    2             SELECT(0);
     1346    11726        /* Use next available page */
     1347    11727    2             HDRBUF.BASE=NAVPG;
     1348    11728    2             SELECT(-2);
     1349    11729        /* Use next available 8 words */
     1350    11730    2             HDRBUF.BASE=NAV8W;
     1351    11731    2             SELECT(ELSE);
     1352    11732    2           IF HDRBUF.BASE>0 THEN;          /* Use as it is                       */
     1353    11733    2             ELSE HDRBUF.BASE=NAVDW;       /* Use next available double word     */
     1354    11734    2           END;                            /* DO SELECT                          */
     1355    11735    1           HDR$=ADDR(HDRXLS);
     1356    11736    1           HDR_PTR.WOFFS=HDR_PTR.WOFFS+HDRBUF.TINF.TYPE*4;
             11736                    /* Point to appropriate header */
     1357    11737    2           IF BAS_HDR.BASE=0 THEN DO;      /* Not a duplicate                    */
     1358    11738    2                 BAS_HDR=HDRBUF;           /* Move header                        */
     1359    11739    2                 BAS_HDR.DA=NAVDA;         /* And fill in disk address           */
     1360    11740    2                 IF HDRBUF.TINF.TYPE=%PATCHTC THEN GOTO POHDRR;
             11740                          /* Patches->normal return */
     1361    11741    2                 IF HDRBUF.TINF.TYPE=%MSCHEMTC OR
     1362    11742    2                   HDRBUF.TINF.TYPE=%ASCHEMTC THEN GOTO PODBS;
             11742                            /* Debug schema or alternate schema->special processing */
     1363    11743    2                   ELSE;
     1364    11744    2               END;                        /* THEN                               */
     1365    11745    2             ELSE DO;
     1366    11746        /* See if a monitor overlay */
     1367    11747    2                 IF HDRBUF.TINF.TYPE~=%MPROCTC THEN GOTO POHDRX; /* Error        */
     1368    11748    2                   ELSE;                   /* It's a mon overlay                 */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:82   
     1369    11749    2                 HDR$=ADDR(HDRMP1);
     1370    11750    2   FIND_SLOT:
     1371    11751    3                 IF BAS_HDR.BASE=0 THEN DO;
     1372    11752        /* Move header to appropriate place */
     1373    11753    3                       BAS_HDR=HDRBUF;
     1374    11754    3                       BAS_HDR.DA=NAVDA;   /* Fill in disk address               */
     1375    11755    3                     END;                  /* THEN                               */
     1376    11756    3                   ELSE DO;
     1377    11757    3                       HDR_PTR.WOFFS=HDR_PTR.WOFFS+4;
     1378    11758    3                       GOTO FIND_SLOT;
     1379    11759    3                     END;                  /* ELSE                               */
     1380    11760    2               END;                        /* ELSE                               */
     1381    11761    1   POLR1:
     1382    11762        /* Initialize pointer to CP6 buffer */
     1383    11763    1           CP6_BUF_PTR='0'B;
     1384    11764    1           CP6_BUF_PTR.S_D_FIELD=%ALS_PO;
     1385    11765        /* Read logical record into memory as specified in header */
     1386    11766    1           IF HDRBUF.TYPE=0 THEN CODE=%FCNRTB; /* 0->Binary                      */
     1387    11767    1             ELSE CODE=%FCNRT9;            /* Else->ASCII                        */
     1388    11768    1   POLR11:
     1389    11769    1           PODCW.TALLY=1024;
     1390    11770    1           AALS.PODESC.BASE=HDRBUF.BASE*4; /* Place where the record has to go   */
     1391    11771    1           LGTH=HDRBUF.SIZE;
     1392    11772    1   POLR:
     1393    11773    1           IF LGTH<=0 THEN GOTO POLRE;     /* That's all                         */
     1394    11774    1             ELSE;
     1395    11775    1           IF LGTH>1024 THEN;
     1396    11776    1             ELSE PODCW.TALLY=LGTH;
     1397    11777    1           LGTH=LGTH-1024;
     1398    11778    1   GETLREC:
     1399    11779    1           IF RCV_FLG='0'B THEN CALL MINIQC_PL6(IPO_INDX,ADDR(PODCW),0,CODE) ALTRET(
             11779                    POLRX);
     1400    11780    2             ELSE DO;
     1401    11781        /* Read one block from disk */
     1402    11782    2                 CALL MINIQC_PL6(SYS_DPX,ADDR(PODCW),0,%FCNRDB,HDRDA) ALTRET(POLRX);
     1403    11783    2                 HDRDA=HDRDA+1;
     1404    11784    2               END;                        /* ELSE                               */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:83   
     1405    11785                                                /* End GETLREC                        */
     1406    11786    1           IF RCV_FLG~='0'B THEN GOTO POMVLR; /* Coming from disk, don't write disk */
     1407    11787        /* Write it out to disk */
     1408    11788    1   POBUMPDA:
     1409    11789    1           IF NAVDA+1<ADIR.DUMP.DA OR NF_FLG='0'B THEN;
             11789                    /* There is more room or we can extend if new files */
     1410    11790    2             ELSE DO;
     1411    11791    2   TOOBIG:
     1412    11792    2                 CALL TYPEC(VID2BIG);
     1413    11793    2                 UNWIND TO EDCIASK;
     1414    11794    2               END;                        /* ELSE                               */
     1415    11795    1   NOT2BIG:
     1416    11796    1           NAVDA=NAVDA+1;
     1417    11797        /* Move block from AARDV buffer to CP6 */
     1418    11798    1   POMVLR:
     1419    11799    2           IF AALS.PODESC.BASE=0 THEN DO;  /* This is page 0*/
     1420    11800    2                 AALS.PODESC.BASE=64*4;    /* Skip fault vectors etc             */
     1421    11801    2                 CP6_BUF_LGTH=(1024-64)*4; /* Adjust size                        */
     1422    11802    2                 AARD_BUF$=ADDR(POBUF);
     1423    11803    2                 AARD_BUF_PTR.WOFFS=AARD_BUF_PTR.WOFFS+64;
     1424    11804    2               END;                        /* THEN                               */
     1425    11805    2             ELSE DO;
     1426    11806    2                 CP6_BUF_LGTH=PODCW.TALLY*4;
     1427    11807    2                 AARD_BUF$=ADDR(POBUF);
     1428    11808    2               END;                        /* ELSE                               */
     1429    11809    1   POMVLR2:
     1430    11810    1           CP6_BUF=AARD_BUF;
     1431    11811    1           AALS.PODESC.BASE=AALS.PODESC.BASE+CP6_BUF_LGTH; /* Adjust for next block */
     1432    11812    1           GOTO POLR;                      /* Continue reading logical record    */
     1433    11813    1   POLRE:                                  /* End of logical record              */
     1434    11814    1           IF HDRBUF.BASE=0 THEN GOTO POBT2; /* We just restored low physical pages */
     1435    11815    2           IF(HDRBUF.TINF.TYPE=%MPROCTC AND HDRMP1.BASE=0) THEN DO;
     1436    11816    2   POTIGR:                                 /* Setup TIGR data if disk boot       */
     1437    11817    2                 IF RCV_FLG='0'B THEN;     /* On tape boot don't do anything     */
     1438    11818    3                   ELSE DO;
     1439    11819    3                       HDRBUF=ADIR.TIGRDATA;
             11819                                /* Move header from syst area directory to HDRBUF */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:84   
     1440    11820    3                       HDRDA=HDRBUF.DA;    /* Setup DA for TIGR data             */
     1441    11821    3                       NAVDW=(AALS.PODESC.BASE/4+1)/2*2;
     1442    11822    3                       NAV8W=(AALS.PODESC.BASE/4+7)/8*8;
     1443    11823    3                       NAVPG=(AALS.PODESC.BASE/4+1023)/1024*1024;
     1444    11824    3                       HDRBUF.BASE=NAVPG;
     1445    11825    3                       ADIR.TIGRDATA.BASE=NAVPG;
     1446    11826    3                       GOTO POLR1;
     1447    11827    3                     END;                  /* ELSE                               */
     1448    11828    2               END;                        /* THEN                               */
     1449    11829    1             ELSE;
     1450    11830    1           NAVDW=((AALS.PODESC.BASE/4+1)/2)*2;
     1451    11831    1           NAV8W=((AALS.PODESC.BASE/4+7)/8)*8;
     1452    11832    1           NAVPG=((AALS.PODESC.BASE/4+1023)/1024)*1024;
     1453    11833    1           GOTO POHDR;
     1454    11834    1   POHDRR: ;
     1455    11835    1   BLDSC:                                  /* Build MINIDELTA descriptors        */
     1456    11836    2           IF HDRGR.BASE~=0 THEN DO;       /* Base of Ghost1 ROSEG               */
     1457    11837    2                 BASEH1=HDRGR.BASE;        /* Save it                            */
     1458    11838    2                 AALS.DESCH1.BASE=BASEH1*4; /* Convert to bytes                  */
     1459    11839    2                 HDRGR.BASE=HDRGR.BASE+1024; /* Adjust base without HJIT         */
     1460    11840    2                 HDRGR.SIZE=HDRGR.SIZE-1024; /* Adjust bound                     */
     1461    11841    2                 BASEGPT=NAVPG;            /* Assign Ghost1 PT                   */
     1462    11842    2                 AALS.DESCGPT.BASE=BASEGPT*4;
     1463    11843    2                 BASEJ1=BASEGPT+1024;      /* Assign Ghost1 JIT                  */
     1464    11844    2                 AALS.DESCJ1.BASE=BASEJ1*4;
     1465    11845    2                 AALS.DESCT1.BASE=AALS.DESCJ1.BASE+%JIT_SIZEC;
             11845                          /* Ghost1 TSTACK descriptor */
     1466    11846    2                 NAVPG=NAVPG+3*1024;
     1467    11847    2                 NAVDW=NAVPG;
     1468    11848    2                 NAV8W=NAVPG;
     1469    11849    2               END;                        /* THEN                               */
     1470    11850    1             ELSE;
     1471    11851    1   BLDSC0:
     1472    11852    1           HDR$=ADDR(HDRXLS);
     1473    11853    1           DESCR$=ADDR(AALS.DESCXL);
     1474    11854    2           DO I=%XDLTLSTC TO %MROSEGTC;    /* All PO headers and descriptors     */
     1475    11855    2             IF BAS_HDR.SIZE=0 THEN;       /* 0-> Not present on PO tape         */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:85   
     1476    11856    3               ELSE DO;
     1477    11857    3                   BAS_DESCR.BOUND=(BAS_HDR.SIZE-1)*4;
     1478    11858    3                   BAS_DESCR.BASE=BAS_HDR.BASE*4; /* Convert to bytes            */
     1479    11859    3                   BAS_DESCR=BAS_DESCR|AALS.DESCD;
             11859                            /* Fill in fields from dummy descriptor */
     1480    11860    3                 END;                      /* ELSE                               */
     1481    11861    2             HDR$=PINCRW(HDR$,4);          /* Go to next header                  */
     1482    11862    2             DESCR$=PINCRW(DESCR$,2);      /* and next descriptor                */
     1483    11863    2           END;                            /* DO I=                              */
     1484    11864        /* Fix monitor overlay descriptors */
     1485    11865    1           HDR$=ADDR(HDRMP1);
     1486    11866    1           DESCR$=ADDR(AALS.DESCMP1);
     1487    11867    2           DO I=0 TO 13;                   /* 14 Mon overlay headers             */
     1488    11868    2             IF BAS_HDR.SIZE=0 THEN;       /* 0-> Not present on PO tape         */
     1489    11869    3               ELSE DO;
     1490    11870    3                   BAS_DESCR.BOUND=(BAS_HDR.SIZE-1)*4;
     1491    11871    3                   BAS_DESCR.BASE=BAS_HDR.BASE*4; /* Convert to bytes            */
     1492    11872    3                   BAS_DESCR=BAS_DESCR|AALS.DESCD;
             11872                            /* Fill in fields from dummy descriptor */
     1493    11873    3                 END;                      /* ELSE                               */
     1494    11874    2             HDR$=PINCRW(HDR$,4);          /* Go to next header                  */
     1495    11875    2             DESCR$=PINCRW(DESCR$,2);      /* and next descriptor                */
     1496    11876    2           END;                            /* DO I=                              */
     1497    11877        /* Fix DESCSCH descriptor to frame OU headers only */
     1498    11878    1           AALS.DESCSCH.BOUND=(TEMPO1-1)*4+3;
     1499    11879    1           INFO_PTR='0'B;
     1500    11880    1           INFO_PTR.S_D_FIELD=%ALS_SCH;
     1501    11881    1           INFO$->HBAS_UBIN.H1=HDR1E.START;
     1502    11882        /* Store base for DESCSCH0 to DESCSCH11 */
     1503    11883    1           DESCR$=ADDR(AALS.DESCSCH0);
     1504    11884    1           PREVBASE=(HDRDBS.BASE+TEMPO1+1023)/1024*1024*4;
             11884                    /* Base of header segment +size of header segment;page boundary */
     1505    11885    2           DO I=0 TO 11;
     1506    11886    2             BAS_DESCR.BASE=PREVBASE;
     1507    11887    2             DESCR$=PINCRW(DESCR$,2);      /* Bump pointer                       */
     1508    11888    2             PREVBASE=PREVBASE+256*1024*4; /* And bump base with 256K            */
     1509    11889    2           END;                            /* DO I=                              */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:86   
     1510    11890        /* Fix DESCASCH to frame OU headers only */
     1511    11891    1           AALS.DESCASCH.BOUND=(ITEMPO1-1)*4+3;
     1512    11892        /* Store base for DESCASCH0 to DESCASCH11 */
     1513    11893    1           DESCR$=ADDR(AALS.DESCASCH0);
     1514    11894    1           PREVBASE=(HDRAS.BASE+ITEMPO1+1023)/1024*1024*4;
     1515    11895    2           DO I=0 TO 11;
     1516    11896    2             BAS_DESCR.BASE=PREVBASE;
     1517    11897    2             DESCR$=PINCRW(DESCR$,2);      /* Bump pointer                       */
     1518    11898    2             PREVBASE=PREVBASE+256*1024*4; /* And bump base with 256K            */
     1519    11899    2           END;                            /* DO I=                              */
     1520    11900    1           AALS.DESCSM.BASE=AALS.DESCH.BASE+%(MLS_SIZEC+SDS_SIZEC); /* Mon SSSTACK */
     1521    11901    1           AALS.DESCAM.BASE=AALS.DESCSM.BASE+%SSS_SIZEC+1024*4;
             11901                    /* Mon ASTACK; Mon SSSTACK is one page bigger */
     1522    11902    2           IF AALS.DESCH1.BASE~=0 THEN DO;
     1523    11903    2                 AALS.DESCS1.BASE=AALS.DESCH1.BASE+%(MLS_SIZEC+SDS_SIZEC);
             11903                          /* Ghost1 SSSTACK */
     1524    11904    2                 AALS.DESCA1.BASE=AALS.DESCS1.BASE+%SSS_SIZEC; /* Ghost1 ASTACK  */
     1525    11905    2               END;                        /*THEN                                */
     1526    11906    1             ELSE;
     1527    11907        /* Fix Monitor and Ghost1 ISR descriptors */
     1528    11908    1           AALS.DESCMI.BOUND=(HDRMP0.SIZE+HDRMP0.BASE-HDRMD.BASE-1)*4+3;
             11908                    /* Procedure size+procedure base-data base */
     1529    11909    1           AALS.DESCMI.BASE=HDRMD.BASE*4;
     1530    11910    1           AALS.DESCMI=AALS.DESCMI|AALS.DESCD;
     1531    11911    1           AALS.DESCGI.BOUND=(HDRGP.SIZE+HDRGP.BASE-HDRGD.BASE-1)*4+3;
             11911                    /* Procedure size+procedure base-data base */
     1532    11912    1           AALS.DESCGI.BASE=HDRGD.BASE*4;
     1533    11913    1           AALS.DESCGI=AALS.DESCGI|AALS.DESCD;
     1534    11914    1           AALS.DESCTGM = TGMISCDESC;
     1535    11915        /* Fix Ghost1 ROSEG */
     1536    11916    2           IF RCV_FLG='0'B THEN DO;
     1537    11917    2                 INFO_PTR='0'B;
     1538    11918    2                 INFO_PTR.S_D_FIELD=%ALS_G1RO; /* INFO$ frames Ghost1 ROSEG      */
     1539    11919    2                 SAV$=INFO$->B$ROSEG.DCBPTR$;
     1540    11920    2                 SAV_PTR.WOFFS=SAV_PTR.WOFFS-1024;
     1541    11921    2                 SAV_PTR.S_D_FIELD=%GLS_ROS;
     1542    11922    2                 INFO$->B$ROSEG.DCBPTR$=SAV$;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:87   
     1543    11923        /* Fix DCB pointers */
     1544    11924    3                 DO I=1 TO INFO$->B$ROSEG.NUMDCBS;
     1545    11925    3                   DCB$=PINCRW(INFO$,SAV_PTR.WOFFS)->B$RODCB$(I);
     1546    11926    3                   IF DCB_PTR.WOFFS=0 THEN; /* 0-> OK as it is                   */
     1547    11927    4                     ELSE DO;
     1548    11928    4                         DCB_PTR.WOFFS=DCB_PTR.WOFFS-1024;
     1549    11929    4                         DCB_PTR.S_D_FIELD=%GLS_ROS;
     1550    11930    4                         PINCRW(INFO$,SAV_PTR.WOFFS)->B$RODCB$(I)=DCB$;
     1551    11931    4                       END;                /* ELSE*/
     1552    11932    3                 END;                      /* DO I=                              */
     1553    11933    2                 G1HJIT_PTR='0'B;
     1554    11934    2                 G1HJIT_PTR.S_D_FIELD=%ALS_HJIT1; /* G1HJIT$ points to Ghost1 HJIT */
     1555    11935    2                 SAV$=INFO$->B$ROSEG.TREE$;
     1556    11936    2                 SAV_PTR.WOFFS=SAV_PTR.WOFFS-1024;
     1557    11937    2                 G1HJIT.DBLNK.TCB.BASE=SAV_PTR.WOFFS*4; /* Use it as base        */
     1558    11938    2                 G1HJIT.DBLNK.TCB.BOUND=(1023-MOD(SAV_PTR.WOFFS,1024))*4+3;
             11938                          /* bound is remainder of a page */
     1559    11939    2                 SAV_PTR='0'B;
     1560    11940    2                 SAV_PTR.S_D_FIELD=%GLS_NULL; /* Make TREE$ a null pointer       */
     1561    11941    2                 INFO$->B$ROSEG.TREE$=SAV$;
     1562    11942    2               END;                        /* THEN                               */
     1563    11943    1             ELSE;
     1564    11944        /* Readjust Ghost1 ROSEG header base and bound for system area directory */
     1565    11945    1           HDRGR.BASE=BASEH1;
     1566    11946    1           HDRGR.SIZE=HDRGR.SIZE+1024;
     1567    11947        /* Put segids into DEFDIR for XDELTA */
     1568    11948    1           INFO_PTR='0'B;
     1569    11949    1           INFO_PTR.S_D_FIELD=%ALS_DEFDIR;
     1570    11950    1           J=10;                           /* Root node ENTDEF ptr               */
     1571    11951    2           DO I=INFO$->HBAS_UBIN.H2 DOWNTO 0;
     1572    11952    2             PINCRW(INFO$,J)->BAS_PTR.S_D_FIELD=%XDLS_ENT;
     1573    11953    2             PINCRW(INFO$,J+1)->BAS_PTR.S_D_FIELD=%XDLS_SYM;
     1574    11954    2             PINCRW(INFO$,J+2)->BAS_PTR.S_D_FIELD=%XDLS_DEF;
     1575    11955    2             J=J+11;
     1576    11956    2           END;                            /* DO I=                              */
     1577    11957        /**/
     1578    11958    1           HDRPAT='0'B;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:88   
     1579    11959    1           RETURN;
     1580    11960    1   POIDX:
     1581    11961    1           POIDC=POIDC+1;                  /* Error reading tape ID              */
     1582    11962    1           IF POIDC<5 THEN GOTO POBT1;     /* Rewind and try again               */
     1583    11963    1             ELSE;
     1584    11964    1           CALL TYPEC(POIDM);
     1585    11965    1           ALTRETURN;
     1586    11966    1   POHDRX:
     1587    11967    1           CALL TYPEC(POHDRM);             /* Error reading header               */
     1588    11968    1           ALTRETURN;
     1589    11969    1   POLRX:
     1590    11970    1           CALL TYPEC(POLRM);              /* Error reading logical record       */
     1591    11971    1           ALTRETURN;
     1592    11972    1   POPSAD:
     1593    11973    1           SADDCW.TALLY=LENGTHW(ADIR)+4;
     1594    11974    2           CALL MINIQC_PL6(SYS_DPX,ADDR(SADDCW),0,%FCNRDB,TOPDA) WHENALTRETURN DO;
             11974                    /* Read Sys Dir from disk */
     1595    11975    2   UNWESAD:
     1596    11976    2                 UNWIND TO ESADERR;
     1597    11977    2               END;                        /* WHENALTRETURN                      */
     1598    11978    1           HDRTYP=0;                       /* Start at zero                      */
     1599    11979        /* Read Schema Directory into POBUF and restore descriptors */
     1600    11980    1           PODCW.TALLY=1024;
     1601    11981    1           CALL MINIQC_PL6(SYS_DPX,ADDR(PODCW),0,%FCNRDB,ADIR.SCHEMADIR.DA) ALTRET(
             11981                    UNWESAD);
     1602    11982        /* Move descriptors into DESCSCH0 to DESCSCH11 */
     1603    11983    1           FROMDESCR$=ADDR(POBUF);
     1604    11984    1           TODESCR$=ADDR(AALS.DESCSCH0);
     1605    11985    1           FROMDESCR_PTR.WOFFS=FROMDESCR_PTR.WOFFS+2; /* Start after 2 words     */
     1606    11986    2           DO I=0 TO 11;
     1607    11987    2             TODESCR$->BAS_DESCR=FROMDESCR$->BAS_DESCR;
     1608    11988    2             TODESCR_PTR.WOFFS=TODESCR_PTR.WOFFS+2;
     1609    11989    2             FROMDESCR_PTR.WOFFS=FROMDESCR_PTR.WOFFS+2;
     1610    11990    2           END;                            /* DO I=                              */
     1611    11991        /* Read tape ID from disk */
     1612    11992    1           CALL MINIQ_PL6(SYS_DPX,ADDR(IDBUF.TXT),IDBUF.CNT,%FCNRDB,ADIR.AARDVARK.DA)
             11992                    ALTRET(POBT11);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:89   
     1613    11993        /* See what we found */
     1614    11994    1           IF SUBSTR(IDBUF.TXT,0,4)~='CP-6' THEN GOTO POBT11;
     1615    11995    1             ELSE;                         /* Type it                            */
     1616    11996    1           TIDBUF.TXT=IDBUF.TXT;
     1617    11997    1           CALL TYPEC(TIDBUF);
     1618    11998    1   POBT11:
     1619    11999        /* Restore phy pages 0-(3 or 7) as written by TIGR */
     1620    12000    1           HDRBUF=ADIR.LOWREAL;
     1621    12001    1           HDRDA=HDRBUF.DA;
     1622    12002    1           CODE=%FCNRDB;
     1623    12003    1           GOTO POLR11;
     1624    12004        /**/
     1625    12005    1   PODBS:
     1626    12006        /* Process debug schema info */
     1627    12007    1           IF RCV_FLG~='0'B THEN GOTO POLR1; /* Not tape boot-> no handling      */
     1628    12008    1             ELSE;
     1629    12009    1           OUHDCW.TALLY=11;                /* Init DCW for 11 word headers       */
     1630    12010    2           IF HDRBUF.TINF.TYPE=%MSCHEMTC THEN DO; /* Not alt schema              */
     1631    12011    2                 CALL KEYIN(FCGQUES,FCGBUF);
             12011                          /* Ask about wanted functional code groups */
     1632    12012    2                 ALLFCG='1'B;              /* Presume all FCGs                   */
     1633    12013    3                 DO SELECT(SUBSTR(FCGBUF.TXT,0,2));
     1634    12014    3                   SELECT('++');
     1635    12015    3                   STAPFLG='1'B;           /* Other schema tape                  */
     1636    12016    4                   DO SELECT(SUBSTR(FCGBUF.TXT,2,2));
     1637    12017    4                     SELECT('**');
     1638    12018    4                     GOTO PODBS0A;
     1639    12019    4                     SELECT(ELSE);
     1640    12020    4                   END;                    /* DO SELECT                          */
     1641    12021    3                 SELECT('**');
     1642    12022    3                 GOTO PODBS0A;
     1643    12023    3                 SELECT(ELSE);
     1644    12024    3                 END;                      /* DO SELECT                          */
     1645    12025        /* Read only requested FCGs */
     1646    12026    2           ALLFCG='0'B;
     1647    12027    2           CALL UPPER_CASE(FCGBUF.TXT,80);
     1648    12028    2               END;                        /* THEN                               */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:90   
     1649    12029    1             ELSE;
     1650    12030    1   PODBS0A:
     1651    12031        /* Set up initial values to read debug schema */
     1652    12032    1           HDR$=DBHDR$;               /* Pointer to schema or alt schema header  */
     1653    12033    1           DESCR$=OUHDESC$;      /* Pointer to schema or alt schema descriptor   */
     1654    12034    1           BAS_DESCR.BASE=BAS_HDR.BASE*4;
     1655    12035    1           AALS.PODESC.BASE=BAS_DESCR.BASE+1024*4; /* Allow one page for headers */
     1656    12036    1           ITEMPO=AALS.PODESC.BASE;        /* For test                           */
     1657    12037    1           BAS_HDR.SIZE=1024;
             12037                    /* Initial segment size=1 page(the page reserved for 11 word headers) */
     1658    12038    1           INFO_PTR='0'B;
     1659    12039    1           INFO_PTR.S_D_FIELD=ISOUH;
     1660    12040    1           INFO_PTR.WOFFS=1;          /* INFO points to OU header page+1 word    */
     1661    12041    1           INFOS_PTR='0'B;
     1662    12042    1           INFOS_PTR.S_D_FIELD=ISOUH;      /* INFOS points to OU header page     */
     1663    12043    1           INFOS$->BAS_UBIN=0;             /* Object unit count=0                */
     1664    12044    1   PODBS1:
     1665    12045    1           CALL MINIQ_PL6(IPO_INDX,ADDR(HDRFCG),12,%FCNRTB) ALTRET(POLRX);
             12045                    /* Read FCG header */
     1666    12046    2           IF HDRFCG.BFCG~='0'B THEN DO;   /* Not 0-> not end of debug schema    */
     1667    12047    2   PODBS1D:
     1668    12048    3                 IF ALLFCG='0'B THEN DO;
             12048                          /* We don't want all FCGs; see if we want this one */
     1669    12049    4                       DO I=0 TO 40;
     1670    12050    4                         IF WANTFCG(I)=HDRFCG.FCG THEN GOTO PODBS5;
             12050                                  /* We want this FCG */
     1671    12051    4                           ELSE;
     1672    12052    4                       END;                /* DO I=                              */
     1673    12053        /* Skip this FCG */
     1674    12054    4                       DO I=0 TO HDRFCG.NPR-1;
     1675    12055    4                         CALL MINIQ_PL6(IPO_INDX,ADDR(HDRFCG),12,%FCNSKR);
             12055                                  /* Skip physical record */
     1676    12056        /* In the previous instr the buffer addr and size are given
     1677    12057             only for compatibility with calls to MINIQ */
     1678    12058    4                       END;                /* DO I=                              */
     1679    12059    3                       GOTO PODBS1;        /* Read next FCG header               */
     1680    12060    3                     END;                  /* THEN                               */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:91   
     1681    12061    2                   ELSE;
     1682    12062    2   PODBS5:                                 /* Process this FCG                   */
     1683    12063        /* Read 11 word object unit header record */
     1684    12064    2                 INFOS$->BAS_UBIN=INFOS$->BAS_UBIN+HDRFCG.NOU;
             12064                          /* Update object unit count */
     1685    12065    3                 DO J=0 TO HDRFCG.NOU-1;
     1686    12066    3   PODBS6:
     1687    12067    3                   IF (INFO_PTR.WOFFS+11)*4+BAS_DESCR.BASE<= ITEMPO THEN;
             12067                            /* There is room for this header */
     1688    12068    4                     ELSE DO;              /* No room, shift OUs down 1 page     */
     1689    12069        /* Use MEMDESC to frame area where the page is shifted */
     1690    12070    4                         AALS.MEMDESC.BASE=(AALS.PODESC.BASE+1024*4)/4096*4096;
     1691    12071    4                         MEM_PTR='0'B;
     1692    12072    4                         MEM_PTR.S_D_FIELD=%ALS_MEM;
     1693    12073    4   PODBS6A:
     1694    12074    4                         PINCRW(MEM$,1024)->BASED_PAGE=MEM$->BASED_PAGE;
     1695    12075    5                         IF(AALS.MEMDESC.BASE-1024*4)>=ITEMPO THEN DO;
     1696    12076    5                               AALS.MEMDESC.BASE=AALS.MEMDESC.BASE-1024*4;
     1697    12077    5                               GOTO PODBS6A;
     1698    12078    5                             END;          /* THEN                               */
     1699    12079    4                           ELSE;
     1700    12080        /* Zap last page moved */
     1701    12081    4                         MEM$->BASED_PAGE='0'B;
     1702    12082        /* Adjust PODESC and debug record base */
     1703    12083    4                         ITEMPO=ITEMPO+1024*4;
     1704    12084    4                         AALS.PODESC.BASE=AALS.PODESC.BASE+1024*4;
     1705    12085    4                       END;                /* ELSE                               */
     1706    12086    3   PODBS6B:
     1707    12087    3                   CALL MINIQC_PL6(IPO_INDX,ADDR(OUHDCW),,%FCNRTB) ALTRET(POLRX);
             12087                            /* Read 11 word header */
     1708    12088        /* Move OU header from AARDVARK buffer to CP6 */
     1709    12089    3                   CP6_DBHDR=AAR_DBHDR;
     1710    12090        /* Process 11 word OU header record */
     1711    12091    4                   DO I=0 TO 4;            /* 5 records*/
     1712    12092    4                     CP6_DBHDR.RECS.BASE(I)=(AALS.PODESC.BASE-ITEMPO)/4;
             12092                              /* Real byte address-base of debug record segment */
     1713    12093        /* Make sure record doesn't cross segment boundary */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:92   
     1714    12094    4                     CHECK_256K=CP6_DBHDR.RECS.BASE(I)+CP6_DBHDR.RECS.SIZE(I);
     1715    12095    4                     IF HCHECK_256K.H1=CP6_DBHDR.RECS.HBASE.H1(I) THEN;
             12095                              /* Record doesn't cross 256K boundary */
     1716    12096    5                       ELSE DO;            /* Force record in the next page      */
     1717    12097    5                           BAS_HDR.SIZE=BAS_HDR.SIZE+HCHECK_256K.H1*262144-CP6_DBHDR.
             12097                                    RECS.BASE(I); /* Adjust segment size */
     1718    12098    5                           CP6_DBHDR.RECS.BASE(I)=HCHECK_256K.H1*262144;
     1719    12099    5                           AALS.PODESC.BASE=ITEMPO+HCHECK_256K.H1*262144*4;
     1720    12100    5                         END;              /* ELSE                               */
     1721    12101    4   PODBS7A:
     1722    12102    4                     IF I=4 THEN CODE=%FCNRT9; /* The 5'th record is ASCII       */
     1723    12103    4                       ELSE CODE=%FCNRTB;  /* The first 4 records are binary     */
     1724    12104    4                     PODCW.TALLY=1024;
     1725    12105    4                     LGTH=CP6_DBHDR.RECS.SIZE(I);
     1726    12106    4                     BAS_HDR.SIZE=BAS_HDR.SIZE+LGTH;
     1727    12107    4   PODBS8:
     1728    12108    4                     IF LGTH<=0 THEN GOTO PODBS9; /* That's all                  */
     1729    12109    4                       ELSE;
     1730    12110    4                     IF LGTH>1024 THEN;
     1731    12111    4                       ELSE PODCW.TALLY=LGTH;
     1732    12112    4                     LGTH=LGTH-1024;
     1733    12113    4                     CALL MINIQC_PL6(IPO_INDX,ADDR(PODCW),,CODE) ALTRET(POLRX);
     1734    12114        /* Move block from AARDVARK buffer to CP6 */
     1735    12115    4                     CP6_BUF_LGTH=PODCW.TALLY*4;
     1736    12116    4                     CP6_BUF=AARD_BUF;     /* Pointers are OK                    */
     1737    12117    4                     AALS.PODESC.BASE=AALS.PODESC.BASE+CP6_BUF_LGTH;
     1738    12118    4                     GOTO PODBS8;
     1739    12119    4   PODBS9:
     1740    12120    4                   END;                    /* DO I=                              */
     1741    12121    3                   INFO$=PINCRW(INFO$,11);
     1742    12122    3                 END;                      /* DO J=                              */
     1743    12123    2                 GOTO PODBS1;              /* Read next FCG                      */
     1744    12124    2               END;                        /*THEN                                */
     1745    12125    1             ELSE;                    /* Come here at the end of debug schema    */
     1746    12126    2           IF NF_FLG='0'B THEN DO;         /* New files                          */
     1747    12127    2                 IF(BAS_HDR.SIZE+1023)/1024>1500 THEN NAVDA=NAVDA+(BAS_HDR.SIZE+1023)/
             12127                          1024;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:93   
     1748    12128    2                   ELSE NAVDA=NAVDA+1500;
     1749    12129    2               END;                        /* THEN                               */
     1750    12130    2             ELSE DO;
     1751    12131    2                 IF NAVDA+(BAS_HDR.SIZE+1023)/1024<ADIR.DUMP.DA THEN
     1752    12132    2                   NAVDA=NAVDA+(BAS_HDR.SIZE+1023)/1024; /* We still have space  */
     1753    12133    2                   ELSE GOTO TOOBIG;
     1754    12134    2               END;                        /* ELSE                               */
     1755    12135        /* Build pointers from debug record displacements */
     1756    12136    1           ITEMPO1=INFO_PTR.WOFFS; /* Displacement after the last 11 word header */
     1757    12137    1           OUHDR#=(ITEMPO1-1)/11;          /* Nr of 11 word headers              */
     1758    12138    1           INFO_PTR.WOFFS=1;/* At the beginning INFO$ points to the first header */
     1759    12139    2           DO J=0 TO OUHDR#-1;
     1760    12140    3             DO I=0 TO 4;             /* Process the 5 records in this header    */
     1761    12141    3               CHECK_256K=CP6_DBHDR.RECS.BASE(I);
     1762    12142    3               CP6_DBHDR.RECS.HBASE.H1(I)=CP6_DBHDR.RECS.HBASE.H2(I); /* Under 256 K */
     1763    12143    3               CP6_DBHDR.RECS.HBASE.H2(I)=UIXLSCH0+HCHECK_256K.H1;
             12143                        /* Build a pointer */
     1764    12144    3               PINCRW(SCDESC$,HCHECK_256K.H1*2)->BAS_DESCR.BOUND=
     1765    12145    3                 (HCHECK_256K.H2-1+CP6_DBHDR.RECS.SIZE(I))*4+3;
             12145                          /* Fix bound of appropriate descriptor */
     1766    12146    3             END;                          /* DO I=                              */
     1767    12147    2             INFO$=PINCRW(INFO$,11);       /* Go to next descriptor              */
     1768    12148    2           END;                            /* DO J=                              */
     1769    12149    1           IF ISOUH=%ALS_ASCH THEN GOTO PODBS1C; /* End of alt schema            */
     1770    12150    1             ELSE;
     1771    12151    1           TEMPO=ITEMPO;
     1772    12152    1           TEMPO1=ITEMPO1;
     1773    12153        /* Get alternate schema */
     1774    12154    1   POASDR:
     1775    12155    1           IF STAPFLG='0'B THEN GOTO POLRE;
     1776    12156    1             ELSE;
     1777    12157    1   GTASX:                                  /* Get AS tape index in DEVINFO       */
     1778    12158    1           MESSAGE$=ADDR(GTASXM);
     1779    12159    1           SUBSTR(TEXTM.TXT,11,6)=SUBSTR(DEVINFO.DEVNAME(%FRSTMT),0,6);
     1780    12160    1   ASKAS:
     1781    12161    1           CALL KEYIN(GTASXM,ANSBUF);
     1782    12162    1           CALL GETFD(ANSBUF.TXT,16) ALTRET(POLRE);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:94   
     1783    12163    1           IF FIELD_LEN>2 OR DECIM_FLG='0'B THEN GOTO ASKAS; /* Ask again        */
     1784    12164    1             ELSE;
     1785    12165    2           IF FIELD_LEN=1 THEN DO;         /* Make it a 2 digit field            */
     1786    12166    2                 SUBSTR(POANS,1,1)=SUBSTR(POANS,0,1);
     1787    12167    2                 SUBSTR(POANS,0,1)='0';
     1788    12168    2               END;                        /* THEN                               */
     1789    12169    1             ELSE;
     1790    12170    2           DO I=%FRSTMT TO %(FRSTDP-1);
     1791    12171    2             IF SUBSTR(DEVINFO.DEVNAME(I),6,2)=POANS THEN GOTO DOAS;
     1792    12172    2               ELSE;
     1793    12173    2           END;                            /* ELSE DO I=                         */
     1794    12174    1           GOTO ASKAS;
     1795    12175    1   DOAS:
     1796    12176    1           IPO_INDX=I;
     1797    12177    1           ISOUH=%ALS_ASCH;
     1798    12178    1           DBHDR$=ADDR(HDRAS);
     1799    12179    1           OUHDESC$=ADDR(AALS.DESCASCH);
     1800    12180    1           AALS.DESCASCH=INITAOUH;
     1801    12181    1           SCDESC$=ADDR(AALS.DESCASCH0);
     1802    12182    1           IXLSCH0=%XDLS_ASCH0;
     1803    12183    1           ALLFCG='1'B;
     1804    12184    1   ASBT1:
     1805    12185        /* Rewind and set density for AS tape */
     1806    12186    1           CALL MINIQ_PL6(IPO_INDX,0,0,%FCNREW) ALTRET(POASDR);
     1807    12187    1           CALL MINIQ_PL6(IPO_INDX,0,0,%FCNSDT8) ALTRET(CHECK16) ;
     1808    12188
     1809    12189    1           CALL MINIQ_PL6(IPO_INDX,ADDR(HDRBUF),LENGTHC(HDRBUF),%FCNRTB)
     1810    12190    2             WHENRETURN DO;
     1811    12191    2                 CALL MINIQ_PL6(IPO_INDX,0,0,%FCNREW);
     1812    12192    2                 GOTO POLRE;
     1813    12193    2               END;
     1814    12194    2             WHENALTRETURN DO;
     1815    12195    2                 IF (DEVINFO.BSTAT.W1(IPO_INDX) & '777700'O) ~= '5210'O THEN
     1816    12196    2                   GOTO POASDR;
     1817    12197    2               END;
     1818    12198    1   CHECK16:
     1819    12199    1           CALL MINIQ_PL6(IPO_INDX,0,0,%FCNREW);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:95   
     1820    12200    1           CALL MINIQ_PL6(IPO_INDX,0,0,%FCNSDT16) ALTRET(POASDR);
     1821    12201    1           GOTO POLRE;
     1822    12202    1   PODBS1C:
     1823    12203    1           CALL MINIQ_PL6(IPO_INDX,0,0,%FCNUNL); /* Unload alt schema tape       */
     1824    12204    1           IPO_INDX=PO_INDX;
     1825    12205    1           GOTO POLRE;
     1826    12206    1   END GOPO_PL6;
     1827    12207        %EOD;

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:96   
--  Include file information  --

   B_UHJMAC_C.:E05TOU  is referenced.
   I_SUBS_C.:E05TOU  is referenced.
   B_MLSMAC_C.:E05TOU  is referenced.
   B_ULSMAC_C.:E05TOU  is referenced.
   B_LSDATA_C.:E05TOU  cannot be made into a system file and is referenced.
   B$ROSEG.:E05TOU  cannot be made into a system file and is referenced.
   B$SS.:E05TOU  cannot be made into a system file and is referenced.
   MM_MACRO_M.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   MM$SYSGEN.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   MM_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure GOPO_PL6.

   Procedure GOPO_PL6 requires 2962 words for executable code.
   Procedure GOPO_PL6 requires 64 words of local(AUTO) storage.

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:97   

 Object Unit name= GOPO_PL6                                   File name= ISI$FIXSYST.:E05TOU
 UTS= JUL 29 '97 22:49:28.60 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none   783   1417  GOPO_PL6
    1  RoData even  UTS      3      3  GOPO_PL6
    2   Proc  even  none  2962   5622  GOPO_PL6
    3  RoData even  none   185    271  GOPO_PL6

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes    yes     yes      Std        0  GOPO_PL6
     2   2443          yes     yes      Std        0  XDELT_RET
     2   2474          yes     yes      Std        0  LOOP_PL6
     2   2643          yes     yes      Std        0  POBOOT
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:98   

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      0  AALS$                              0      1  DISK_BOOTINFO
    0      3  RPM_DISK_BOOTINFO                  0      4  ADIR
    0    364  HDRAAR                             0    370  HDRXLS
    0    374  HDRXIS                             0    400  HDRMH
    0    404  HDRMD                              0    410  HDRMP0
    0    414  HDRME                              0    420  HDRMS
    0    424  HDRMN                              0    430  HDRDBS
    0    434  HDRGR                              0    440  HDRGD
    0    444  HDRGP                              0    450  HDR1E
    0    454  HDR1S                              0    460  HDR1N
    0    464  HDRAS                              0    470  HDRTM
    0    474  HDRDDIR                            0    500  HDRPAT
    0    504  HDRMP1                             0    510  HDRMP2
    0    514  HDRMP3                             0    520  HDRMP4
    0    524  HDRMP5                             0    530  HDRMP6
    0    534  HDRMP7                             0    540  HDRMP8
    0    544  HDRMP9                             0    550  HDRMP10
    0    554  HDRMP11                            0    560  HDRMP12
    0    564  HDRMP13                            0    570  HDRMP14
    0    574  HDRBUF                             0    607  IDBUF
    0    630  BASEJ                              0    631  BASEJ1
    0    632  BASEH1                             0    633  BASEMPT
    0    634  BASEGPT                            0    635  WSQ3PG
    0    636  IPHYPG                             0    637  PHYMEM_SZ
    0    640  UFLG                               0    641  WS0PT$
    0    643  HDRDA                              0    644  EDCIASK
    0    646  ESADERR                            0    721  GTPOXM
    0    727  POHDRM                             0    743  POLRM
    0    756  VID2BIG                            0    774  POIDM
    0   1005  SADEM                              0   1022  AM1
    0   1033  FCGQUES                            0   1042  GTASXM
    0   1050  SCDPA                              0   1060  PATAM
    0   1070  QTPQ                               0   1104  QTPQ1
    0   1121  QTPQ2                              0   1136  QCRQ
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:99   
    0   1152  QOCQ                               0   1167  NOPTIONS
    0   1212  PATCH_ERR                          0   1306  MTWISH
    0   1307  MT2WISH                            0   1310  PAT2_INDX
    0   1311  CRWISH                             0   1312  OCWISH
    0   1317  BOOTRC

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       0 BOOTS
         yes           Std       1 GT_SYSPACKAD
         yes           Std       1 TYPEC
         yes           Std       1 FREEXD
 yes     yes           Std       0 READ_CONF
 yes     yes           Std       0 RDVID
 yes     yes           Std       0 CHKVID
         yes           Std       0 INIT_DISK
 yes     yes           Std       2 KEYIN
 yes     yes           Std       2 GETFD
 yes     yes           Std       1 AOC
         yes           Std       0 MDELTCALL
         yes           Std       0 INITX
 yes     yes           Std       0 WRTDP
 yes     yes           Std       5 MINIQC_PL6
         yes           Std       2 WRITE_PATCH
         yes           Std       0 INITM
         yes           Std       1 FREETABLES
         yes           Std       0 ITIG
         yes           Std       0 CLEAR_RIW
         yes           Std       0 LOADPDBR
 yes     yes           Std       0 WRVID
         yes           Std       2 UPPER_CASE
         yes           Std       2 KEYINXX
         yes           Std       2 BUILDFW_DCWS
         yes           Std       1 FREEFW
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:100  
 yes     yes           Std       0 WRTFW
         yes           Std       0 INIT1
         yes           Std       1 LOAD_SSR
 yes     yes           Std       5 MINIQ_PL6
         yes           Std       0 INITP
         yes           Std       0 HANG
                       nStd      0 X66_AUTO_0
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AUNWIND
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     MM_FPPH                               MM_FPPT                               MM_FPPC
r    MM_BYP$                               MM_PCORE                              MM_GAPSZ
     MM_AARD                               MM_XDEL                               H_DPS8000_CONFIG_NAME
     H_DPS8000_SCU_INFO                    IS_CSP_SIDE1                          IS_MEM_SIDE1
     LOWER_SCU                             UPPER_SCU                             IS_CFG_TYPE
     IS_CFG_NAME                           IS_PPUT_SIZE                          BOOTTAPE
     BSNLS                                 DEVINFO                               POBUF
     IOMTAB                                TOPDA                                 NAVDA
     NAVDW                                 NAV8W                                 NAVPG
     FWSTART_PTR                           IMWBASE                               FW$
     VOFLG                                 TQFLAG                                XDFLAG
     NF_FLG                                RCV_FLG                               ADPXF
     PO_INDX                               IPO_INDX                              PO_DEVN
     HIPAGE                                HIAVPG                                GAP_SZ
     SYS_DPX                               BEGAA                                 POEM
     READBTR                               LWSRDR                                ANSBUF
     FIELD$                                FIELD_LEN                             DECIM_FLG
     SSDMONX                               TGRDESC                               XDSSR
     CP6UL                                 PDEV                                  RPM_FLG
     S1000_FLG                             XA_MODE                               DCCSOD1
     DCMMOD1                               FWHDR$                                DCFWHDR$
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:101  
     DCFWSTART_PTR                         MC1                                   MC1SKAD
     MC1SK                                 MC1LIM                                MC1PCW
     MC1ICW                                XC1                                   XC1SKAD
     XC1SK                                 XC1LIM                                XC1ICW
     RC1                                   RC1SKAD                               RC1SK
     RC1LIM                                RC1ICW                                TGMISCDESC
     HW_TYPE                               IT_BOOTFLAG                           IT_AAFAULT
     IT_XDELTA                             IT_UFLG                               FM_POTAPE
     FM_SYSDP                              B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:102  


      235        1        /*T***********************************************************/
      236        2        /*T*                                                         */
      237        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      238        4        /*T*                                                         */
      239        5        /*T***********************************************************/
      240        6        GOPO_PL6: PROC ALTRET;

      6  2 000000   000000 700200 xent  GOPO_PL6     TSX0  ! X66_AUTO_0
         2 000001   000100 000000                    ZERO    64,0

      241        7        /**/
      242        8        %INCLUDE IS$MACROS;
      243     1283        %INCLUDE MM_DATA_R;
      244     1803        %INCLUDE B$SS;
      245     1982        %INCLUDE B$ROSEG;
      246     2045        %INCLUDE B_LSDATA_C;
      247     5251        %INCLUDE I_SUBS_C;
      248     5275        %INCLUDE B_UHJMAC_C;
      249     5604                % B_UHJIT(FPTN=G1HJIT,STCLASS="BASED(G1HJIT$)"); /* Ghost1 HJIT       */
      250     6575    1   DCL G1HJIT$ PTR;
      251     6576        %PTR_STRUCT(NAME=G1HJIT_PTR,STCLASS="REDEF G1HJIT$");
      252     6594        %AALS(STCLASS="BASED(AALS$)");          /* AARDVARK LS                        */
      253     8921    1   DCL H_DPS8000_CONFIG_NAME CHAR(12) SYMREF;
      254     8922    1   DCL H_DPS8000_SCU_INFO UBIN SYMREF;
      255     8923    1   DCL IS_CSP_SIDE1 BIT(1) SYMREF;
      256     8924    1   DCL IS_MEM_SIDE1 BIT(1) SYMREF;
      257     8925    1   DCL 1 LOWER_SCU SYMREF,
      258     8926    1         2 LB UBIN WORD UNAL,
      259     8927    1         2 UB UBIN WORD UNAL;
      260     8928    1   DCL 1 UPPER_SCU SYMREF,
      261     8929    1         2 LB UBIN WORD UNAL,
      262     8930    1         2 UB UBIN WORD UNAL;
      263     8931    1   DCL IS_CFG_TYPE UBIN SYMREF;
      264     8932    1   DCL IS_CFG_NAME CHAR(12) SYMREF;
      265     8933    1   DCL IS_PPUT_SIZE UBIN WORD SYMREF;
      266     8934    1   DCL BOOTTAPE UBIN WORD SYMREF;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:103  
      267     8935    1   DCL BSNLS BIT(1) SYMREF;                /* Effective AARD LS                  */
      268     8936    1   DCL AALS$ PTR STATIC SYMDEF INIT(ADDR(BSNLS));
      269     8937        %DEVINFO(STCLASS="SYMREF");
      270     9006    1   DCL 1 DISK_BOOTINFO STATIC SYMDEF ALIGNED, /* Boot info as booting from disk  */
      271     9007    1         2 BCHN# UBIN(9) UNAL,
      272     9008    1         2 * BIT(24) INIT('0'B),
      273     9009    1         2 BPORT# UBIN(3) UNAL,
      274     9010    1         2 BIOMAD UBIN(18) UNAL,
      275     9011    1         2 BIMWAD UBIN(13) UNAL,
      276     9012    1         2 * BIT(3) INIT('0'B),
      277     9013    1         2 BIOM# UBIN(2) UNAL;
      278     9014    1   DCL 1 RPM_DISK_BOOTINFO STATIC SYMDEF,  /* REG A Immage on RPM                */
      279     9015    1         2 CC BIT(9) INIT('700'O),
      280     9016    1         2 * BIT(9) INIT('0'B),
      281     9017    1         2 BCHN# UBIN HALF UNAL INIT(0);
      282     9018        %DISKDIR(NAME=ADIR);
      283     9274        %DIRHDR(NAME=HDRAAR);                   /* AARDVARK                           */
      284     9285        %DIRHDR(NAME=HDRXLS);                   /* Header for type 0 -> XDELTA LS/SSS */
      285     9296        %DIRHDR(NAME=HDRXIS);                   /* Header for type 1 -> XDELTA ISR    */
      286     9307        %DIRHDR(NAME=HDRMH);                    /* Header for type 2 -> MON HJIT      */
      287     9318        %DIRHDR(NAME=HDRMD);                    /* Header for type 3 -> MON DATA      */
      288     9329        %DIRHDR(NAME=HDRMP0);              /* Header for type 4 -> MON PROC(ROOT)     */
      289     9340        %DIRHDR(NAME=HDRME);                    /* Header for type 5 -> ENTDEFS       */
      290     9351        %DIRHDR(NAME=HDRMS);                    /* Header for type 6 -> SYMDEFS       */
      291     9362        %DIRHDR(NAME=HDRMN);                    /* Header for type 7 -> DEFNAMES      */
      292     9373        %DIRHDR(NAME=HDRDBS);                   /* Header for type 8 -> DEBUG SCHEMA  */
      293     9384        %DIRHDR(NAME=HDRGR);                    /* Header for type 9 -> GHOST1 ROSEG  */
      294     9395        %DIRHDR(NAME=HDRGD);                    /* Header for type 10 -> GHOST1 DATA  */
      295     9406        %DIRHDR(NAME=HDRGP);                    /* Header for type 11 -> GHOST1 PROC  */
      296     9417        %DIRHDR(NAME=HDR1E);          /* Header for type 12 -> ALT SCHEMA ENTDEFS     */
      297     9428        %DIRHDR(NAME=HDR1S);          /* Header for type 13 -> ALT SCHEMA SYMDEFS     */
      298     9439        %DIRHDR(NAME=HDR1N);          /* Header for type 14 -> ALT SCHEMA DEFNAMES    */
      299     9450        %DIRHDR(NAME=HDRAS);                    /* Header for type 15 -> ALT SCHEMA   */
      300     9461        %DIRHDR(NAME=HDRTM);          /* Header for type 16 -> TIGR MISCELLANEOUS     */
      301     9472        %DIRHDR(NAME=HDRDDIR);             /* Header for type 17 -> MON NODE INFO     */
      302     9483        %DIRHDR(NAME=HDRPAT);                   /* Header for type 18 -> PATCHES      */
      303     9494        %DIRHDR(NAME=HDRMP1);                   /* Header for MON PROC (OV SEG 1)     */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:104  
      304     9505        %DIRHDR(NAME=HDRMP2);                   /* Header for MON PROC (OV SEG 2)     */
      305     9516        %DIRHDR(NAME=HDRMP3);                   /* Header for MON PROC (OV SEG 3)     */
      306     9527        %DIRHDR(NAME=HDRMP4);                   /* Header for MON PROC (OV SEG 4)     */
      307     9538        %DIRHDR(NAME=HDRMP5);                   /* Header for MON PROC (OV SEG 5)     */
      308     9549        %DIRHDR(NAME=HDRMP6);                   /* Header for MON PROC (OV SEG 6)     */
      309     9560        %DIRHDR(NAME=HDRMP7);                   /* Header for MON PROC (OV SEG 7)     */
      310     9571        %DIRHDR(NAME=HDRMP8);                   /* Header for MON PROC (OV SEG 8)     */
      311     9582        %DIRHDR(NAME=HDRMP9);                   /* Header for MON PROC (OV SEG 9)     */
      312     9593        %DIRHDR(NAME=HDRMP10);                  /* Header for MON PROC (OV SEG 10)    */
      313     9604        %DIRHDR(NAME=HDRMP11);                  /* Header for MON PROC (OV SEG 11)    */
      314     9615        %DIRHDR(NAME=HDRMP12);                  /* Header for MON PROC (OV SEG 12)    */
      315     9626        %DIRHDR(NAME=HDRMP13);                  /* Header for MON PROC (OV SEG 13)    */
      316     9637        %DIRHDR(NAME=HDRMP14);                  /* Header for MON PROC (OV SEG 14)    */
      317     9648        %DIRHDR(NAME=HDRBUF);                   /* Buffer for reading headers         */
      318     9659        /**/
      319     9660        %DIRHDR(NAME=BAS_HDR,STCLASS="BASED(HDR$)");
      320     9671    1   DCL HDR$ PTR STATIC;
      321     9672        %PTR_STRUCT(NAME=HDR_PTR,STCLASS="REDEF HDR$");
      322     9690        %DISKDIR(NAME=RDIR,STCLASS="BASED(BUF$)"); /* Image of directory on disk      */
      323     9946        /**/
      324     9947    1   DCL POBUF(0:4095) BIT(9) SYMREF;
      325     9948    1   DCL BUF$ PTR STATIC INIT(ADDR(POBUF));
      326     9949        %FM$VID(STCLASS="BASED(BUF$)");         /* Image of VID                       */
      327     9995        %IOM_TAB(NAME=IOMTAB,STCLASS="SYMREF");
      328    10012    1   DCL TOPDA UBIN WORD SYMREF;
      329    10013    1   DCL NAVDA UBIN WORD SYMREF;
      330    10014    1   DCL NAVDW UBIN WORD SYMREF;
      331    10015    1   DCL NAV8W UBIN WORD SYMREF;
      332    10016    1   DCL NAVPG UBIN WORD SYMREF;
      333    10017        %PTR_STRUCT(NAME=FWSTART_PTR,STCLASS="SYMREF");
      334    10035    1   DCL IMWBASE UBIN WORD SYMREF;
      335    10036    1   DCL FW$ PTR SYMREF;           /* Pointer to top of the world as now known     */
      336    10037        %PTR_STRUCT(NAME=FW_PTR,STCLASS="REDEF FW$");
      337    10055    1   DCL VOFLG BIT(1) SYMREF;                /* Vol init                           */
      338    10056    1   DCL TQFLAG BIT(36) SYMREF;              /* In MINI                            */
      339    10057    1   DCL XDFLAG UBIN WORD SYMREF;
      340    10058    1   DCL 1 NF_FLG SYMREF,
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:105  
      341    10059    1         2 RECON BIT(1),
      342    10060    1         2 NONEW BIT(1),
      343    10061    1         2 S BIT(1);
      344    10062    1   DCL UNF_FLG REDEF NF_FLG UBIN(3) UNAL;
      345    10063    1   DCL 1 RCV_FLG SYMREF,
      346    10064    1         2 RC BIT(1),                      /* Recovery                           */
      347    10065    1         2 DB BIT(1),                      /* Disk boot                          */
      348    10066    1         2 RBD BIT(1),                     /* Rebooted from disk                 */
      349    10067    1         2 RBO BIT(1);                     /* Rebooted for recovery              */
      350    10068    1   DCL URCV_FLG REDEF RCV_FLG UBIN(4) UNAL;
      351    10069    1   DCL 1 ADPXF SYMREF,
      352    10070    1         2 A BIT(1),
      353    10071    1         2 D BIT(1),
      354    10072    1         2 P BIT(1),
      355    10073    1         2 X BIT(1),
      356    10074    1         2 F BIT(1);
      357    10075    1   DCL PO_INDX UBIN WORD SYMREF;           /* PO tape index in DEVINFO           */
      358    10076    1   DCL IPO_INDX UBIN WORD SYMREF;          /* PO tape index in DEVINFO           */
      359    10077
      360    10078    1   DCL TEMP_DEN CHAR(80);
      361    10079
      362    10080    1   DCL PO_DEVN CHAR(2) SYMREF;
      363    10081    1   DCL HIPAGE UBIN WORD SYMREF;            /* Nr of last page                    */
      364    10082    1   DCL HIAVPG UBIN WORD SYMREF;            /* Nr of last page on an S1000        */
      365    10083    1   DCL GAP_SZ UBIN WORD SYMREF;  /* Gap size on RPM, 0 on all other machines     */
      366    10084    1   DCL SYS_DPX UBIN WORD SYMREF;           /* System disk index in DEVINFO       */
      367    10085    1   DCL BEGAA BIT(1) SYMREF;
      368    10086    1   DCL POEM BIT(1) SYMREF;                 /* Text, PO boot aborted              */
      369    10087    1   DCL AARD$ PTR STATIC INIT(ADDR(BEGAA));
      370    10088        %PTR_STRUCT(NAME=AARD_PTR,STCLASS="REDEF AARD$");
      371    10106    1   DCL BOOTS ENTRY;
      372    10107    1   DCL BOOTS$ EPTR STATIC INIT(ENTADDR(BOOTS));
      373    10108        %PTR_STRUCT(NAME=BOOTS_PTR,STCLASS="REDEF BOOTS$");
      374    10126    1   DCL SAD$ PTR STATIC INIT(ADDR(ADIR));
      375    10127        %DCW_STRUCT(NAME=SADDCW,STCLASS="REDEF SAD$");
      376    10145    1   DCL SADX$ PTR STATIC INIT(ADDR(POBUF));
      377    10146        %DCW_STRUCT(NAME=SADDCWX,STCLASS="REDEF SADX$");
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:106  
      378    10164    1   DCL POB$ PTR STATIC INIT(ADDR(POBUF));
      379    10165        %DCW_STRUCT(NAME=PODCW,STCLASS="REDEF POB$");
      380    10183    1   DCL ERAS_BUF BIT(ERAS_LGTH) BASED ALIGNED;
      381    10184    1   DCL ERAS_F$ PTR;
      382    10185        %PTR_STRUCT(NAME=ERAS_F_PTR,STCLASS="REDEF ERAS_F$");
      383    10203    1   DCL ERAS_L$ PTR;
      384    10204        %PTR_STRUCT(NAME=ERAS_L_PTR,STCLASS="REDEF ERAS_L$");
      385    10222    1   DCL ERAS_LGTH UBIN WORD;
      386    10223    1   DCL 1 IDBUF STATIC SYMDEF,              /* Buffer for tape ID                 */
      387    10224    1         2 CNT UBIN INIT(28),
      388    10225    1         2 TXT CHAR(28);
      389    10226    1   DCL 1 TIDBUF STATIC,
      390    10227    1         2 CNT UBIN INIT(32),
      391    10228    1         2 TXT CHAR(32);
      392    10229    1   DCL BASEJ UBIN WORD STATIC SYMDEF INIT(0); /* Word address of Mon JIT         */
      393    10230    1   DCL BASEJ1 UBIN WORD STATIC SYMDEF INIT(0); /* Word address of Ghost1 JIT     */
      394    10231    1   DCL BASEH1 UBIN WORD STATIC SYMDEF INIT(0); /* Word address of Ghost1 HJIT    */
      395    10232    1   DCL BASEMPT UBIN WORD STATIC SYMDEF INIT(0); /* Word address of Mon PT        */
      396    10233    1   DCL BASEGPT UBIN WORD STATIC SYMDEF INIT(0); /* Word address of Ghost1 PT     */
      397    10234    1   DCL WSQ3PG UBIN WORD STATIC SYMDEF INIT(0); /* Word address of WSQ3 PT        */
      398    10235    1  DCL IPHYPG UBIN WORD STATIC SYMDEF INIT(0); /* Word address of Physical->Real MAP */
      399    10236    1   DCL PHYMEM_SZ UBIN WORD STATIC SYMDEF INIT(0);
             10236            /* Size of Physical memory on S1000 */
      400    10237    1   DCL UFLG UBIN WORD STATIC SYMDEF INIT(0); /* Users allowed                    */
      401    10238    1   DCL 1 WS0PT(0:0) ALIGNED BASED(WS0PT$), /* WS0 PT                             */
      402    10239        %PTW(LVL=2);
      403    10267    1   DCL WS0PT$ PTR STATIC SYMDEF;
      404    10268        %PTR_STRUCT(NAME=WS0PT_PTR,STCLASS="REDEF WS0PT$");
      405    10286    1   DCL HDRTYP UBIN HALF STATIC INIT(0);
      406    10287    1   DCL HDRDA UBIN WORD STATIC SYMDEF INIT(0);
      407    10288    1   DCL EDCIASK REMEMBER STATIC SYMDEF;
      408    10289    1   DCL ESADERR REMEMBER STATIC SYMDEF;
      409    10290    1   DCL READBTR REMEMBER SYMREF;
      410    10291    1   DCL LWSRDR REMEMBER SYMREF;
      411    10292        /* Decl for moving records */
      412    10293    1   DCL CP6_BUF CHAR(CP6_BUF_LGTH) BASED (CP6_BUF$); /* CP6 area                  */
      413    10294    1   DCL CP6_BUF$ PTR STATIC;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:107  
      414    10295        %PTR_STRUCT(NAME=CP6_BUF_PTR,STCLASS="REDEF CP6_BUF$");
      415    10313    1   DCL CP6_BUF_LGTH UBIN WORD;
      416    10314    1   DCL AARD_BUF CHAR(4096) BASED (AARD_BUF$); /* AARD area                       */
      417    10315    1   DCL AARD_BUF$ PTR STATIC;
      418    10316        %PTR_STRUCT(NAME=AARD_BUF_PTR,STCLASS="REDEF AARD_BUF$");
      419    10334    1   DCL TODESCR$ PTR STATIC;
      420    10335        %PTR_STRUCT(NAME=TODESCR_PTR,STCLASS="REDEF TODESCR$");
      421    10353    1   DCL FROMDESCR$ PTR STATIC INIT(ADDR(POBUF));
      422    10354        %PTR_STRUCT(NAME=FROMDESCR_PTR,STCLASS="REDEF FROMDESCR$");
      423    10372        %DESCR(NAME=BAS_DESCR,STCLASS="BASED(DESCR$)",LVL=1,LAST=";");
      424    10394    1   DCL DESCR$ PTR;
      425    10395    1   DCL TEMPO UBIN WORD STATIC;
      426    10396    1   DCL TEMPO1 UBIN WORD STATIC;
      427    10397    1   DCL ITEMPO UBIN WORD STATIC;
      428    10398    1   DCL ITEMPO1 UBIN WORD STATIC;
      429    10399    1   DCL OUHDR# UBIN WORD;
      430    10400        /**/
      431    10401        /* Table parallel with PO tape headers ,
      432    10402           containing pointers to the appropriate SAD areas */
      433    10403    1   DCL 1 SADTAB STATIC,
      434    10404    1         2 XL$ PTR INIT(ADDR(ADIR.XDLS)),
      435    10405    1         2 XI$ PTR INIT(ADDR(ADIR.XDPROC)),
      436    10406    1         2 HJ$ PTR INIT(ADDR(ADIR.MONHJIT)),
      437    10407    1         2 MD$ PTR INIT(ADDR(ADIR.MONDATA)),
      438    10408    1         2 MP0$ PTR INIT(ADDR(ADIR.MONPROC)),
      439    10409    1         2 ENT$ PTR INIT(ADDR(ADIR.ENTDEFS)),
      440    10410    1         2 SYM$ PTR INIT(ADDR(ADIR.SYMDEFS)),
      441    10411    1         2 DEF$ PTR INIT(ADDR(ADIR.DEFNAMES)),
      442    10412    1         2 SCH$ PTR INIT(ADDR(ADIR.SCHEMA)),
      443    10413    1         2 GRO$ PTR INIT(ADDR(ADIR.G1RO)),
      444    10414    1         2 GD$ PTR INIT(ADDR(ADIR.G1DATA)),
      445    10415    1         2 GP$ PTR INIT(ADDR(ADIR.G1PROC)),
      446    10416    1         2 ENT1$ PTR INIT(ADDR(ADIR.AENTDEFS)),
      447    10417    1         2 SYM1$ PTR INIT(ADDR(ADIR.ASYMDEFS)),
      448    10418    1         2 DEF1$ PTR INIT(ADDR(ADIR.ADEFNAMES)),
      449    10419    1         2 SCH1$ PTR INIT(ADDR(ADIR.ASCHEMA)),
      450    10420    1         2 TIGR$ PTR INIT(ADDR(ADIR.SITEINFO)),
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:108  
      451    10421    1         2 DDIR$ PTR INIT(ADDR(ADIR.DEFDIR)),
      452    10422    1         2 PAT$ PTR INIT(ADDR(ADIR.PATCH)),
      453    10423    1         2 MP1$ PTR INIT(ADDR(ADIR.MONPROC1)),
      454    10424    1         2 MP2$ PTR INIT(ADDR(ADIR.MONPROC2)),
      455    10425    1         2 MP3$ PTR INIT(ADDR(ADIR.MONPROC3)),
      456    10426    1         2 MP4$ PTR INIT(ADDR(ADIR.MONPROC4)),
      457    10427    1         2 MP5$ PTR INIT(ADDR(ADIR.MONPROC5)),
      458    10428    1         2 MP6$ PTR INIT(ADDR(ADIR.MONPROC6)),
      459    10429    1         2 MP7$ PTR INIT(ADDR(ADIR.MONPROC7)),
      460    10430    1         2 MP8$ PTR INIT(ADDR(ADIR.MONPROC8)),
      461    10431    1         2 MP9$ PTR INIT(ADDR(ADIR.MONPROC9)),
      462    10432    1         2 MP10$ PTR INIT(ADDR(ADIR.MONPROC10)),
      463    10433    1         2 MP11$ PTR INIT(ADDR(ADIR.MONPROC11)),
      464    10434    1         2 MP12$ PTR INIT(ADDR(ADIR.MONPROC12)),
      465    10435    1         2 MP13$ PTR INIT(ADDR(ADIR.MONPROC13)),
      466    10436    1         2 MP14$ PTR INIT(ADDR(ADIR.MONPROC14));
      467    10437    1   DCL ASADTAB$(0:%(NUMTC+14-1)) REDEF SADTAB PTR;
      468    10438        /**/
      469    10439    1   DCL SADTAB$ PTR;
      470    10440        %PTR_STRUCT(NAME=SADTAB_PTR,STCLASS="REDEF SADTAB$");
      471    10458    1   DCL SADTAB_ENTRY$ PTR BASED(SADTAB$);
      472    10459        /**/
      473    10460    1   DCL I SBIN WORD;
      474    10461    1   DCL J SBIN WORD;
      475    10462    1   DCL POIDC UBIN WORD;
      476    10463    1   DCL CODE UBIN WORD;
      477    10464    1   DCL BOOTCODE UBIN WORD;
      478    10465    1   DCL PREVBASE UBIN WORD;
      479    10466    1   DCL FREE_PG_COUNT UBIN WORD;            /* Nr of free pages                   */
      480    10467    1   DCL 1 FM_INFO,                          /* Info for ITX$INITS                 */
      481    10468    1         2 PORT UBIN(9) UNAL,
      482    10469    1         2 CHN UBIN(9) UNAL,
      483    10470    1         2 DVN UBIN(9) UNAL,
      484    10471    1         2 * UBIN(9) UNAL;
      485    10472    1   DCL MONSSR$ PTR;                        /* Pointer to MON SSR frame           */
      486    10473        %PTR_STRUCT(NAME=MONSSR_PTR,STCLASS="REDEF MONSSR$");
      487    10491    1   DCL WMON$ PTR;      /* Pointer used to access different locations in MON ISR  */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:109  
      488    10492        %PTR_STRUCT(NAME=WMON_PTR,STCLASS="REDEF WMON$");
      489    10510    1   DCL SAV$ PTR;
      490    10511        %PTR_STRUCT(NAME=SAV_PTR,STCLASS="REDEF SAV$");
      491    10529    1   DCL DCB$ PTR;
      492    10530        %PTR_STRUCT(NAME=DCB_PTR,STCLASS="REDEF DCB$");
      493    10548    1   DCL LGTH SBIN WORD;
      494    10549    1   DCL BAS_FLAG BIT(1) BASED UNAL;
      495    10550    1   DCL 1 H_SCU_INFO(0:1) BASED UNAL,
      496    10551    1         2 LBND UBIN HALF UNAL,
      497    10552    1         2 UBND UBIN HALF UNAL,
      498    10553    1         2 PAGES UBIN HALF UNAL,
      499    10554    1         2 STATUS,
      500    10555    1           3 NCONF BIT(1) UNAL,
      501    10556    1           3 RBIT BIT(1) UNAL,
      502    10557    1           3 RLIP BIT(1) UNAL,
      503    10558    1           3 RTIP BIT(1) UNAL,
      504    10559    1           3 LMEM BIT(1) UNAL,
      505    10560    1           3 * BIT(13) UNAL;
      506    10561    1   DCL BASED$CHAR CHAR(12) BASED;
      507    10562    1   DCL BAS_UBIN UBIN WORD BASED;
      508    10563    1   DCL 1 HBAS_UBIN REDEF BAS_UBIN,
      509    10564    1         2 H1 UBIN HALF UNAL,
      510    10565    1         2 H2 UBIN HALF UNAL;
      511    10566    1   DCL BAS$ PTR BASED;
      512    10567        %PTR_STRUCT(NAME=BAS_PTR,STCLASS="REDEF BAS$");
      513    10585    1   DCL BASED_PAGE(0:1023) BIT(36) BASED ALIGNED;
      514    10586        /**/
      515    10587        %TEXTC(N#=GTPOXM,M#="' PO tape = X-XXX-'");
      516    10592        %TEXTC(N#=POHDRM,M#="' Error reading PO tape header type=NN+1 .'");
      517    10597        %TEXTC(N#=POLRM,M#="' Error reading system record type=NN .'");
      518    10602        %TEXTC(N#=VID2BIG,M#="' System area too small and not a New Files boot .'");
      519    10607        %TEXTC(N#=POIDM,M#="' Error reading tape ID record .'");
      520    10612        %TEXTC(N#=SADEM,M#="' Error reading/writing system area directory.'");
      521    10617        %TEXTC(N#=AM1,M#="' Keyin required to continue ...'");
      522    10622        %TEXTC(N#=FCGQUES,M#="'Functional code groups='");
      523    10627        %TEXTC(N#=GTASXM,M#="' AS tape = X-XXX-'");
      524    10632        %TEXTC(N#=SCDPA,M#="' Second patch tape (Y/N) ? '");
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:110  
      525    10637        %TEXTC(N#=PATAM,M#="' Second patch tape = X-XXX-'");
      526    10642        %TEXTC(N#=QTPQ,M#="' Tape patches (Y/N)/(MXTRPB)/(? for help) ? '");
      527    10647        %TEXTC(N#=QTPQ1,M#="' Tape1 patches (Y/N)/(MXTRPB)/(? for help) ? '");
      528    10652        %TEXTC(N#=QTPQ2,M#="' Tape2 patches (Y/N)/(MXTRPB)/(? for help) ? '");
      529    10657        %TEXTC(N#=QCRQ,M#="' Card patches (Y/N)/(MXTRPB)/(? for help) ? '");
      530    10662        %TEXTC(N#=QOCQ,M#="' Console patches (Y/N)/(MXTRPB)/(? for help) ? '");
      531    10667        %TEXTC(N#=NOPTIONS,M#=
             10667            "'The recommended response to patches on a No to new files boot is: MXT'");
      532    10672        %TEXTC(N#=PATCH_ERR,M#="'Problems encountered reading second patch tape'");
      533    10677    1   DCL MESSAGE$ PTR;
      534    10678    1   DCL 1 TEXTM BASED(MESSAGE$),
      535    10679    1         2 CNT UBIN WORD,
      536    10680    1         2 TXT CHAR(TEXTM.CNT);
      537    10681    1   DCL 1 ANSBUF SYMREF,
      538    10682    1         2 CNT UBIN WORD,
      539    10683    1         2 TXT CHAR(16);
      540    10684    1   DCL FIELD$ PTR SYMREF;
      541    10685    1   DCL FIELD_LEN UBIN WORD SYMREF;
      542    10686    1   DCL DECIM_FLG BIT(1) SYMREF;
      543    10687    1   DCL SSDMON BIT(72) SYMREF;
      544    10688    1   DCL SSDMONX BIT(72) SYMREF;
      545    10689    1   DCL TGRDESC BIT(72) SYMREF;
      546    10690    1   DCL XDSSR BIT(72) SYMREF;
      547    10691    1   DCL POANS CHAR(2) BASED(FIELD$);
      548    10692        /**/
      549    10693    1   DCL RDVID ENTRY ALTRET;
      550    10694    1   DCL READ_CONF ENTRY ALTRET;
      551    10695    1   DCL WRVID ENTRY ALTRET;
      552    10696    1   DCL CHKVID ENTRY ALTRET;
      553    10697    1   DCL GT_SYSPACKAD ENTRY(1);
      554    10698    1   DCL DCINIT ENTRY ALTRET;
      555    10699    1   DCL INIT_DISK ENTRY;
      556    10700    1   DCL MINIQC_PL6 ENTRY(5) ALTRET;
      557    10701    1   DCL MINIQ_PL6 ENTRY(5) ALTRET;
      558    10702    1   DCL TYPEC ENTRY(1);
      559    10703    1   DCL GETFD ENTRY(2) ALTRET;
      560    10704    1   DCL KEYIN ENTRY(2) ALTRET;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:111  
      561    10705    1   DCL HANG ENTRY;
      562    10706    1   DCL UPPER_CASE ENTRY(2);
      563    10707    1   DCL AOC ENTRY(1) ALTRET;
      564    10708    1   DCL KEYINXX ENTRY(2);
      565    10709    1   DCL MDELTCALL ENTRY;
      566    10710    1   DCL WRITE_PATCH ENTRY(2);
      567    10711    1   DCL WRTFW ENTRY ALTRET;
      568    10712    1   DCL WRTDP ENTRY ALTRET;
      569    10713    1   DCL BUILDFW_DCWS ENTRY(2);
      570    10714    1   DCL INITM ENTRY;
      571    10715    1   DCL LOADPDBR ENTRY;
      572    10716    1   DCL INIT1 ENTRY;
      573    10717    1   DCL INITP ENTRY;
      574    10718    1   DCL INITX ENTRY;
      575    10719    1   DCL LOAD_SSR  ENTRY(1);
      576    10720    1   DCL FREEXD ENTRY(1);
      577    10721    1   DCL FREEFW ENTRY(1);
      578    10722    1   DCL FREETABLES ENTRY(1);
      579    10723    1   DCL ITIG ENTRY;
      580    10724    1   DCL   CLEAR_RIW ENTRY;
      581    10725        /**/
      582    10726        /* Declarations used in processing debug schema */
      583    10727        %DB_HDR(NAME=AAR_DBHDR);      /* Buffer for reading 11 word debug headers     */
      584    10755        %DB_HDR(NAME=CP6_DBHDR,STCLASS="BASED(INFO$)"); /* CP6 11 word debug headers  */
      585    10783    1   DCL AA_DBHDR$ PTR STATIC INIT(ADDR(AAR_DBHDR));
      586    10784        %DCW_STRUCT(NAME=OUHDCW,STCLASS="REDEF AA_DBHDR$");
             10784            /* DCW used to read 11 word headers */
      587    10802    1   DCL 1 FCGBUF STATIC,
      588    10803    1         2 CNT UBIN WORD INIT(80),
      589    10804    1         2 TXT CHAR(80) INIT(' '), /* Buffer for operator's answer to FCG question */
      590    10805    1         2 IMP CHAR(2) INIT('B_');         /* We allways want 'B_'               */
      591    10806    1   DCL WANTFCG(0:40) CHAR(2) BASED(FCG$);
      592    10807    1   DCL FCG$ PTR STATIC INIT(ADDR(FCGBUF.TXT));
      593    10808    1   DCL ALLFCG BIT(1) STATIC INIT('0'B);    /* All FCG's flag                     */
      594    10809    1   DCL STAPFLG BIT(1) STATIC INIT('0'B);   /* Other schema tape flag             */
      595    10810    1   DCL DBHDR$ PTR STATIC INIT(ADDR(HDRDBS)); /* It will be changed to point HDRAS */
      596    10811    1  DCL OUHDESC$ PTR STATIC; /* It will be initialized to point AALS.OUHDESC and changed
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:112  
             10811         to point AALS.DESCASCH */
      597    10812    1   DCL ISOUH BIT(12) STATIC INIT(%ALS_OUH); /* It will be changed to %ALS_ASCH   */
      598    10813    1  DCL IXLSCH0 BIT(12) STATIC INIT(%XDLS_SCH0); /* It will be changed to %XDLS_ASCH0 */
      599    10814    1   DCL UIXLSCH0 REDEF IXLSCH0 UBIN(12) UNAL;
      600    10815    1  DCL SCDESC$ PTR STATIC; /* It will be initialized to ADDR(AALS.DESCSCH0) and changed
             10815         to ADDR(AALS.DESCASCH0) */
      601    10816    1   DCL 1 INITAOUH STATIC,
      602    10817    1         2 * BIT(36) INIT('777777740640'O),
      603    10818    1         2 * BIT(36) INIT('0'B);
      604    10819    1   DCL 1 HDRFCG STATIC,                    /* Buffer for FCG headers             */
      605    10820    1         2 FCG CHAR(2),
      606    10821    1         2 BFCG REDEF FCG BIT(18),
      607    10822    1         2 * UBIN(18) UNAL,
      608    10823    1         2 NPR UBIN WORD,                  /* Nr of physical records in this FCG */
      609    10824    1         2 NOU UBIN WORD;                  /* Nr of OUs in this FCG              */
      610    10825    1   DCL CHECK_256K UBIN WORD;          /* To check when record crosses 256k bound */
      611    10826    1   DCL 1 HCHECK_256K REDEF CHECK_256K,
      612    10827    1         2 H1 UBIN HALF UNAL,
      613    10828    1         2 H2 UBIN HALF UNAL;
      614    10829    1   DCL PO$ PTR;
      615    10830        %PTR_STRUCT(NAME=PO_PTR,STCLASS="REDEF PO$");
      616    10848    1   DCL MEM$ PTR;
      617    10849        %PTR_STRUCT(NAME=MEM_PTR,STCLASS="REDEF MEM$");
      618    10867    1   DCL INFO$ PTR;
      619    10868        %PTR_STRUCT(NAME=INFO_PTR,STCLASS="REDEF INFO$");
      620    10886    1   DCL INFOX$ PTR;
      621    10887        %PTR_STRUCT(NAME=INFOX_PTR,STCLASS="REDEF INFOX$");
      622    10905    1   DCL INFOS$ PTR;
      623    10906        %PTR_STRUCT(NAME=INFOS_PTR,STCLASS="REDEF INFOS$");
      624    10924    1   DCL DUMMY$ PTR;     /* This is loaded with ADDR(INFO$) and ADDR(CP6_BUF$)     */
      625    10925        /* so that the PL6 compiler will generate a LDP with the correct value whenever the
             10925        pointer is used */
      626    10926        /**/
      627    10927        /* Declarations used for patches */
      628    10928    1   DCL MTWISH BIT(6) STATIC SYMDEF INIT('77'O);
      629    10929    1   DCL SMTWISH REDEF MTWISH SBIN(6) UNAL;
      630    10930    1   DCL MT2WISH BIT(6) STATIC SYMDEF INIT('0'B);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:113  
      631    10931    1   DCL PAT2_INDX UBIN WORD STATIC SYMDEF INIT(0); /* Second patch tape index     */
      632    10932    1   DCL CRWISH BIT(6) STATIC SYMDEF INIT('0'B);
      633    10933    1   DCL OCWISH BIT(6) STATIC SYMDEF INIT('0'B);
      634    10934    1   DCL CP6UL(0:1023) CHAR(4) SYMREF;
      635    10935    1   DCL 1 PTCHBF REDEF CP6UL,               /* Patch buffer                       */
      636    10936    1         2 NXTWA UBIN WORD,                /* Rel word address of the next patch */
      637    10937    1         2 PTCHS(0:1022) BIT(36);
      638    10938    1   DCL SMINI CHAR(8) STATIC INIT('!MINI');
      639    10939    1   DCL PDEV UBIN WORD SYMREF;
      640    10940    1   DCL RPM_FLG BIT(1) SYMREF;
      641    10941    1   DCL S1000_FLG BIT(1) SYMREF;
      642    10942    1   DCL XA_MODE BIT(1) SYMREF;
      643    10943    1   DCL DCCSOD1 BIT(1) SYMREF;
      644    10944    1   DCL DCMMOD1 BIT(1) SYMREF;
      645    10945    1   DCL FWHDR$ PTR SYMREF;
      646    10946    1   DCL DCFWHDR$ PTR SYMREF;
      647    10947        %PTR_STRUCT(NAME=DCFWSTART_PTR,STCLASS="SYMREF");
      648    10965    1   DCL DCFWSTART$ REDEF DCFWSTART_PTR PTR;
      649    10966    1   DCL FORMDFW$ PTR;
      650    10967        %PTR_STRUCT(NAME=FORMDFW_PTR,STCLASS="REDEF FORMDFW$");
      651    10985    1   DCL FWBUF CHAR(LGTH) BASED;
      652    10986        %FWHDR(NAME=DKHDR,STCLASS="BASED(DCFWHDR$)");
      653    10995        /**/
      654    10996        /* Declarations used to modif the boot record */
      655    10997    1   DCL MC1 UBIN SYMREF;
      656    10998    1   DCL MC1SKAD UBIN SYMREF;
      657    10999    1   DCL MC1LPW UBIN SYMREF;
      658    11000    1   DCL MC1SK UBIN SYMREF;
      659    11001    1   DCL MC1LIM UBIN SYMREF;
      660    11002    1   DCL MC1PCW UBIN SYMREF;
      661    11003    1   DCL MC1ICW UBIN SYMREF;
      662    11004    1   DCL MC1B UBIN SYMREF;
      663    11005    1   DCL XC1 UBIN SYMREF;
      664    11006    1   DCL XC1SKAD UBIN SYMREF;
      665    11007    1   DCL XC1SK UBIN SYMREF;
      666    11008    1   DCL XC1LIM UBIN SYMREF;
      667    11009    1   DCL XC1B UBIN SYMREF;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:114  
      668    11010    1   DCL XC1ICW UBIN SYMREF;
      669    11011    1   DCL RC1 UBIN SYMREF;
      670    11012    1   DCL RC1SKAD UBIN SYMREF;
      671    11013    1   DCL RC1SK UBIN SYMREF;
      672    11014    1   DCL RC1LIM UBIN SYMREF;
      673    11015    1   DCL RC1ICW UBIN SYMREF;
      674    11016    1   DCL CP6UL$ PTR;
      675    11017        %PTR_STRUCT(NAME=CP6UL_PTR,STCLASS="REDEF CP6UL$");
      676    11035        %DESCR(NAME=TGMISCDESC,STCLASS="SYMREF",LVL=1,LAST=";");
      677    11057    1   DCL 1 BDEV STATIC ALIGNED,              /* Used to init a PCW or an IDCW      */
      678    11058    1         2 ORD BIT(6) INIT('0'B),
      679    11059    1         2 DEV# UBIN(6) UNAL INIT(0),
      680    11060    1         2 * BIT(24) INIT('0'B);
      681    11061    1   DCL BOOT CHAR(256) BASED(BOOT$);
      682    11062    1   DCL BOOT$ PTR;
      683    11063    1   DCL BOOTRC$ PTR STATIC INIT(ADDR(BOOTRC));
      684    11064    1   DCL BOOTRC CHAR(256) STATIC SYMDEF ALIGNED;
      685    11065    1   DCL UBOOTRC(0:63) REDEF BOOTRC UBIN WORD;
      686    11066    1   DCL HUBOOTRC(0:127) REDEF BOOTRC UBIN HALF UNAL;
      687    11067    1   DCL BBOOTRC(0:63) REDEF BOOTRC BIT(36);
      688    11068        /* Monitor's symbols */
      689    11069    1   DCL HW_TYPE  UBIN WORD SYMREF;
      690    11070    1   DCL IT_BOOTFLAG BIT(1) SYMREF;
      691    11071    1   DCL IT_AAFAULT BIT(1) SYMREF;
      692    11072    1   DCL IT_XDELTA BIT(1) SYMREF;
      693    11073    1   DCL IT_UFLG BIT(1) SYMREF;
      694    11074    1   DCL FM_POTAPE BIT(1) SYMREF;
      695    11075    1   DCL FM_SYSDP BIT(1) SYMREF;
      696    11076        /**/
      697    11077        /**/
      698    11078    1           DUMMY$=ADDR(INFO$);             /* Dummy instr ; see DCL DUMMY$       */

  11078  2 000002   200060 630500                    EPPR0   INFO$,,AUTO
         2 000003   200063 450500                    STP0    DUMMY$,,AUTO

      699    11079    1           DUMMY$=ADDR(CP6_BUF$);          /* Dummy instr ; see DCL DUMMY$       */

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:115  
  11079  2 000004   000000 236000 3                  LDQ     0
         2 000005   200063 756100                    STQ     DUMMY$,,AUTO

      700    11080    1           WS0PT_PTR='0'B;                 /* Init WS0 Pointer                   */

  11080  2 000006   000641 450000 0                  STZ     WS0PT$

      701    11081    1           WS0PT_PTR.S_D_FIELD=%ALS_WS0;

  11081  2 000007   006144 236007                    LDQ     3172,DL
         2 000010   000641 752003 0                  STCQ    WS0PT$,'03'O

      702    11082    2           IF VOFLG='1'B THEN DO;          /* If Volinit                         */

  11082  2 000011   000000 234000 xsym               SZN     VOFLG
         2 000012   000017 605000 2                  TPL     TRY

      703    11083    2                 CALL READ_CONF;

  11083  2 000013   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000014   000000 701000 xent               TSX1    READ_CONF
         2 000015   000000 011000                    NOP     0

      704    11084    2                 GOTO GOPO0;

  11084  2 000016   000357 710000 2                  TRA     GOPO0

      705    11085    2               END;                        /* THEN                               */
      706    11086    1             ELSE;
      707    11087        /* Initialize cells for simulating disk boot */
      708    11088    1   TRY:
      709    11089    1           IF RPM_FLG THEN RPM_DISK_BOOTINFO.BCHN#=DEVINFO.IOM#(SYS_DPX)*128+DEVINFO.
             11089                    CHN#(SYS_DPX)+8;

  11089  2 000017   000000 234000 xsym  TRY          SZN     RPM_FLG
         2 000020   000037 605000 2                  TPL     s:11091

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:116  
  11089  2 000021   000000 236000 xsym               LDQ     SYS_DPX
         2 000022   000014 402007                    MPY     12,DL
         2 000023   000000 236006 xsym               LDQ     DEVINFO,QL
         2 000024   000033 772000                    QRL     27
         2 000025   200072 756100                    STQ     BOOT$+4,,AUTO
         2 000026   000000 236000 xsym               LDQ     SYS_DPX
         2 000027   000014 402007                    MPY     12,DL
         2 000030   000000 236006 xsym               LDQ     DEVINFO,QL
         2 000031   000014 772000                    QRL     12
         2 000032   000600 376007                    ANQ     384,DL
         2 000033   200072 036100                    ADLQ    BOOT$+4,,AUTO
         2 000034   000010 620006                    EAX0    8,QL
         2 000035   000003 440000 0                  SXL0    RPM_DISK_BOOTINFO
         2 000036   000100 710000 2                  TRA     s:11098

      710    11090    2             ELSE DO;

      711    11091    2                 DISK_BOOTINFO.BCHN#=DEVINFO.CHN#(SYS_DPX);

  11091  2 000037   000000 236000 xsym               LDQ     SYS_DPX
         2 000040   000014 402007                    MPY     12,DL
         2 000041   000000 236006 xsym               LDQ     DEVINFO,QL
         2 000042   000001 552040 0                  STBQ    DISK_BOOTINFO,'40'O

      712    11092    2                 DISK_BOOTINFO.BPORT#=IOMTAB.PORT#(DEVINFO.IOM#(SYS_DPX));

  11092  2 000043   000000 236000 xsym               LDQ     SYS_DPX
         2 000044   000014 402007                    MPY     12,DL
         2 000045   000000 236006 xsym               LDQ     DEVINFO,QL
         2 000046   000023 772000                    QRL     19
         2 000047   000003 376007                    ANQ     3,DL
         2 000050   000000 236006 xsym               LDQ     IOMTAB,QL
         2 000051   000001 676000 0                  ERQ     DISK_BOOTINFO
         2 000052   000007 376007                    ANQ     7,DL
         2 000053   000001 656000 0                  ERSQ    DISK_BOOTINFO

      713    11093    2                 DISK_BOOTINFO.BIOMAD=IOMTAB.MAILBAD(DEVINFO.IOM#(SYS_DPX));
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:117  

  11093  2 000054   000000 236000 xsym               LDQ     SYS_DPX
         2 000055   000014 402007                    MPY     12,DL
         2 000056   000000 236006 xsym               LDQ     DEVINFO,QL
         2 000057   000023 772000                    QRL     19
         2 000060   000003 376007                    ANQ     3,DL
         2 000061   000000 220006 xsym               LDX0    IOMTAB,QL
         2 000062   000002 740000 0                  STX0    DISK_BOOTINFO+1

      714    11094    2                 DISK_BOOTINFO.BIMWAD=IMWBASE/32;

  11094  2 000063   000000 236000 xsym               LDQ     IMWBASE
         2 000064   000005 772000                    QRL     5
         2 000065   000005 736000                    QLS     5
         2 000066   000002 676000 0                  ERQ     DISK_BOOTINFO+1
         2 000067   777740 376007                    ANQ     -32,DL
         2 000070   000002 656000 0                  ERSQ    DISK_BOOTINFO+1

      715    11095    2                 DISK_BOOTINFO.BIOM#=DEVINFO.IOM#(SYS_DPX);

  11095  2 000071   000000 236000 xsym               LDQ     SYS_DPX
         2 000072   000014 402007                    MPY     12,DL
         2 000073   000000 236006 xsym               LDQ     DEVINFO,QL
         2 000074   000023 772000                    QRL     19
         2 000075   000002 676000 0                  ERQ     DISK_BOOTINFO+1
         2 000076   000003 376007                    ANQ     3,DL
         2 000077   000002 656000 0                  ERSQ    DISK_BOOTINFO+1

      716    11096    2               END;

      717    11097        /**/
      718    11098    2           DO I=0 TO 4095;

  11098  2 000100   200037 450100                    STZ     I,,AUTO

      719    11099    2             POBUF(I)='77'O;               /* Fill the buffer with blanks        */

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:118  
  11099  2 000101   200037 235100                    LDA     I,,AUTO
         2 000102   000005 100400                    MLR     fill='000'O
         2 000103   000001 000001 3                  ADSC9   1                        cn=0,n=1
         2 000104   000000 000001 xsym               ADSC9   POBUF,A                  cn=0,n=1

      720    11100    2           END;                            /* DO I=                              */

  11100  2 000105   200037 054100                    AOS     I,,AUTO
         2 000106   200037 235100                    LDA     I,,AUTO
         2 000107   007777 115007                    CMPA    4095,DL
         2 000110   000101 604400 2                  TMOZ    s:11099

      721    11101    1           CALL RDVID ALTRET(DCIASK);

  11101  2 000111   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000112   000000 701000 xent               TSX1    RDVID
         2 000113   000120 702000 2                  TSX2    DCIASK

      722    11102    2           CALL CHKVID WHENALTRETURN DO;

  11102  2 000114   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000115   000000 701000 xent               TSX1    CHKVID
         2 000116   000120 702000 2                  TSX2    DCIASK
         2 000117   000130 710000 2                  TRA     s:11109

      723    11103    2   DCIASK:
      724    11104    2                 CALL GT_SYSPACKAD(%FRSTDP);

  11104  2 000120   000003 630400 3     DCIASK       EPPR0   3
         2 000121   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000122   000000 701000 xent               TSX1    GT_SYSPACKAD
         2 000123   000000 011000                    NOP     0

      725    11105    2                 CALL INIT_DISK;

  11105  2 000124   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000125   000000 701000 xent               TSX1    INIT_DISK
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:119  
         2 000126   000000 011000                    NOP     0

      726    11106    2                 GOTO TRY;

  11106  2 000127   000017 710000 2                  TRA     TRY

      727    11107    2               END;                        /* WHENALTRETURN                      */
      728    11108        /* VID ok -> ok to proceed */
      729    11109    1           ADIR.DUMP.DA=FM$VID.SECTSTRT(1); /* Max DA in system area             */

  11109  2 000130   000601 470400 0                  LDP0    BUF$
         2 000131   000011 235100                    LDA     9,,PR0
         2 000132   000205 755000 0                  STA     ADIR+129

      730    11110        /* Allocate disk space for AARDVARK and low physical pages */
      731    11111    2           IF TQFLAG='0'B THEN DO;

  11111  2 000133   000000 236000 xsym               LDQ     TQFLAG
         2 000134   000275 601000 2                  TNZ     s:11137

      732    11112        /* This code add the device number, starting disk address and ending
      733    11113        disk address into the disc boot code for tape initiated disk boots and
      734    11114        tape initiated operator recoveries.  TOPAD+11 the disk address of
      735    11115        AARDVARK and FWSTART_PTR.WOFFS is the ending address for AARDVARK. */
      736    11116    3                 IF RCV_FLG.RC = '1'B OR RCV_FLG.DB = '1'B THEN DO;

  11116  2 000135   000000 234000 xsym               SZN     RCV_FLG
         2 000136   000142 604000 2                  TMI     s:11117
         2 000137   000000 236000 xsym               LDQ     RCV_FLG
         2 000140   200000 316003                    CANQ    65536,DU
         2 000141   000275 600000 2                  TZE     s:11137

      737    11117    3                       CP6UL$=ADDR(CP6UL);

  11117  2 000142   000004 236000 3                  LDQ     4
         2 000143   200065 756100                    STQ     CP6UL$,,AUTO

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:120  
      738    11118    3                       CP6UL_PTR.WOFFS=(CP6UL_PTR.WOFFS+2048)/1024*1024+%NIFWHDR;

  11118  2 000144   200065 236100                    LDQ     CP6UL$,,AUTO
         2 000145   000022 772000                    QRL     18
         2 000146   004000 036007                    ADLQ    2048,DL
         2 000147   000012 772000                    QRL     10
         2 000150   000012 736000                    QLS     10
         2 000151   000013 620006                    EAX0    11,QL
         2 000152   200065 740100                    STX0    CP6UL$,,AUTO

      739    11119        /*      Make room for system disk firmware */
      740    11120    3                       CP6UL_PTR.WOFFS=(CP6UL_PTR.WOFFS+%(MAXDCFW-NIFWHDR+1023))/1024*
             11120                                1024;

  11120  2 000153   200065 236100                    LDQ     CP6UL$,,AUTO
         2 000154   000022 772000                    QRL     18
         2 000155   025764 036007                    ADLQ    11252,DL
         2 000156   000012 772000                    QRL     10
         2 000157   000012 736000                    QLS     10
         2 000160   000000 621006                    EAX1    0,QL
         2 000161   200065 741100                    STX1    CP6UL$,,AUTO

      741    11121    3                       BOOT$=ADDR(RC1);

  11121  2 000162   000005 236000 3                  LDQ     5
         2 000163   200066 756100                    STQ     BOOT$,,AUTO

      742    11122    3                       BOOTRC=BOOT;        /* Init the disc boot code            */

  11122  2 000164   200066 471500                    LDP1    BOOT$,,AUTO
         2 000165   040000 100500                    MLR     fill='040'O
         2 000166   100000 000400                    ADSC9   0,,PR1                   cn=0,n=256
         2 000167   001317 000400 0                  ADSC9   BOOTRC                   cn=0,n=256

      743    11123    3                       HUBOOTRC(2*(POFFW(ADDR(RC1LIM),ADDR(RC1))))=CP6UL_PTR.WOFFS;

  11123  2 000170   000022 772000                    QRL     18
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:121  
         2 000171   200072 756100                    STQ     BOOT$+4,,AUTO
         2 000172   000006 236000 3                  LDQ     6
         2 000173   000022 772000                    QRL     18
         2 000174   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 000175   001317 741006 0                  STX1    BOOTRC,QL

      744    11124    3                       UBOOTRC(POFFW(ADDR(RC1SKAD),ADDR(RC1)))=(TOPDA + 11)*16;

  11124  2 000176   000005 236000 3                  LDQ     5
         2 000177   000022 772000                    QRL     18
         2 000200   200072 756100                    STQ     BOOT$+4,,AUTO
         2 000201   000007 236000 3                  LDQ     7
         2 000202   000022 772000                    QRL     18
         2 000203   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 000204   000000 235000 xsym               LDA     TOPDA
         2 000205   000004 735000                    ALS     4
         2 000206   000260 035007                    ADLA    176,DL
         2 000207   001317 755006 0                  STA     BOOTRC,QL

      745    11125        /* Init seek and read IDCW  */
      746    11126    3                       BDEV = '0'B;

  11126  2 000210   001315 450000 0                  STZ     BDEV

      747    11127    3                       BDEV.DEV#=DEVINFO.DEV#(SYS_DPX);

  11127  2 000211   000000 236000 xsym               LDQ     SYS_DPX
         2 000212   000014 402007                    MPY     12,DL
         2 000213   000000 236006 xsym               LDQ     DEVINFO,QL
         2 000214   000003 736000                    QLS     3
         2 000215   001315 752020 0                  STCQ    BDEV,'20'O

      748    11128    3                      BBOOTRC(POFFW(ADDR(RC1SK),ADDR(RC1)))=(BBOOTRC(POFFW(ADDR(RC1SK)
             11128                                ,ADDR(RC1)))|BDEV);

  11128  2 000216   000005 236000 3                  LDQ     5
         2 000217   000022 772000                    QRL     18
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:122  
         2 000220   200072 756100                    STQ     BOOT$+4,,AUTO
         2 000221   000010 236000 3                  LDQ     8
         2 000222   000022 772000                    QRL     18
         2 000223   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 000224   200073 756100                    STQ     BOOT$+5,,AUTO
         2 000225   000005 236000 3                  LDQ     5
         2 000226   000022 772000                    QRL     18
         2 000227   200074 756100                    STQ     BOOT$+6,,AUTO
         2 000230   000010 236000 3                  LDQ     8
         2 000231   000022 772000                    QRL     18
         2 000232   200074 136100                    SBLQ    BOOT$+6,,AUTO
         2 000233   001317 236006 0                  LDQ     BOOTRC,QL
         2 000234   001315 276000 0                  ORQ     BDEV
         2 000235   200073 720100                    LXL0    BOOT$+5,,AUTO
         2 000236   001317 756010 0                  STQ     BOOTRC,X0

      749    11129    3                       BDEV.ORD='25'O;

  11129  2 000237   250000 236003                    LDQ     86016,DU
         2 000240   001315 752040 0                  STCQ    BDEV,'40'O

      750    11130    3                       BBOOTRC(POFFW(ADDR(RC1ICW),ADDR(RC1)))=(BBOOTRC(POFFW(ADDR(
             11130                                RC1ICW),ADDR(RC1)))|BDEV);

  11130  2 000241   000005 236000 3                  LDQ     5
         2 000242   000022 772000                    QRL     18
         2 000243   200072 756100                    STQ     BOOT$+4,,AUTO
         2 000244   000011 236000 3                  LDQ     9
         2 000245   000022 772000                    QRL     18
         2 000246   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 000247   200073 756100                    STQ     BOOT$+5,,AUTO
         2 000250   000005 236000 3                  LDQ     5
         2 000251   000022 772000                    QRL     18
         2 000252   200074 756100                    STQ     BOOT$+6,,AUTO
         2 000253   000011 236000 3                  LDQ     9
         2 000254   000022 772000                    QRL     18
         2 000255   200074 136100                    SBLQ    BOOT$+6,,AUTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:123  
         2 000256   001317 236006 0                  LDQ     BOOTRC,QL
         2 000257   001315 276000 0                  ORQ     BDEV
         2 000260   200073 720100                    LXL0    BOOT$+5,,AUTO
         2 000261   001317 756010 0                  STQ     BOOTRC,X0

      751    11131    3                       BOOT = BOOTRC;

  11131  2 000262   040100 100400                    MLR     fill='040'O
         2 000263   001317 000400 0                  ADSC9   BOOTRC                   cn=0,n=256
         2 000264   100000 000400                    ADSC9   0,,PR1                   cn=0,n=256

      752    11132    3                       IF RCV_FLG.RC='1'B THEN UNWIND TO READBTR;
             11132                                /* If not 'TBOOT' from XDELTA or MINI */

  11132  2 000265   000000 234000 xsym               SZN     RCV_FLG
         2 000266   000272 605000 2                  TPL     s:11133

  11132  2 000267   000000 237200 xsym               LDAQ  ! READBTR
         2 000270   000000 700200 xent               TSX0  ! X66_AUNWIND
         2 000271   000000 000200                    ZERO    0,128

      753    11133    3                         ELSE UNWIND TO LWSRDR; /* and OR or DB don't reallocate */

  11133  2 000272   000000 237200 xsym               LDAQ  ! LWSRDR
         2 000273   000000 700200 xent               TSX0  ! X66_AUNWIND
         2 000274   000000 000200                    ZERO    0,128

      754    11134    3                     END ;
      755    11135    2               END;                        /* THEN                               */
      756    11136    1             ELSE;
      757    11137    1           ADIR.AARDVARK.DA=TOPDA+1;
             11137                    /* Allocate AARD at one granule above top of system disk */

  11137  2 000275   000000 236000 xsym               LDQ     TOPDA
         2 000276   000001 036007                    ADLQ    1,DL
         2 000277   000005 756000 0                  STQ     ADIR+1

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:124  
      758    11138    1           ADIR.SCHEMADIR.DA=ADIR.AARDVARK.DA+1; /* Allow one gran               */

  11138  2 000300   000001 036007                    ADLQ    1,DL
         2 000301   000151 756000 0                  STQ     ADIR+101

      759    11139    1           ADIR.LOWREAL.DA=ADIR.SCHEMADIR.DA+1;
             11139                    /* Allow one gran for schema directory */

  11139  2 000302   000001 036007                    ADLQ    1,DL
         2 000303   000011 756000 0                  STQ     ADIR+5

      760    11140        /* Build AARD header */
      761    11141    1           HDRAAR.BASE=AARD_PTR.WOFFS;

  11141  2 000304   000602 235000 0                  LDA     AARD$
         2 000305   000022 771000                    ARL     18
         2 000306   000364 755000 0                  STA     HDRAAR

      762    11142    1           HDRAAR.START=BOOTS_PTR.WOFFS;

  11142  2 000307   000603 220000 0                  LDX0    BOOTS$
         2 000310   000367 440000 0                  SXL0    HDRAAR+3

      763    11143    1           HDRAAR.DA=ADIR.LOWREAL.DA+8; /* Allow 8 grans for low physical pages  */

  11143  2 000311   000010 036007                    ADLQ    8,DL
         2 000312   000365 756000 0                  STQ     HDRAAR+1

      764    11144    1           HDRAAR.SIZE=FWSTART_PTR.WOFFS;

  11144  2 000313   000000 235000 xsym               LDA     FWSTART_PTR
         2 000314   000022 771000                    ARL     18
         2 000315   000366 755000 0                  STA     HDRAAR+2

      765    11145    1           NAVDA=HDRAAR.DA+HDRAAR.SIZE/1024;

  11145  2 000316   000366 236000 0                  LDQ     HDRAAR+2
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:125  
         2 000317   000012 772000                    QRL     10
         2 000320   000365 036000 0                  ADLQ    HDRAAR+1
         2 000321   000000 756000 xsym               STQ     NAVDA

      766    11146        /**/
      767    11147    1           ADIR.AARDVARK.SIZE=IDBUF.CNT;

  11147  2 000322   000607 235000 0                  LDA     IDBUF
         2 000323   000006 755000 0                  STA     ADIR+2

      768    11148    1           ADIR.LOWREAL.SIZE=1024*8;

  11148  2 000324   020000 235007                    LDA     8192,DL
         2 000325   000012 755000 0                  STA     ADIR+6

      769    11149    1           ADIR.SCHEMADIR.SIZE=1024;

  11149  2 000326   002000 235007                    LDA     1024,DL
         2 000327   000152 755000 0                  STA     ADIR+102

      770    11150        /**/
      771    11151    1           IF NF_FLG='0'B THEN GOTO GOPO0; /* New files                          */

  11151  2 000330   000000 236000 xsym               LDQ     NF_FLG
         2 000331   700000 316003                    CANQ    -32768,DU
         2 000332   000357 600000 2                  TZE     GOPO0

      772    11152    1             ELSE;     /* Boot under files , read old SAD and save old MONID     */
      773    11153    1           SADDCWX.TALLY=LENGTHW(ADIR)+4;

  11153  2 000333   000364 236007                    LDQ     244,DL
         2 000334   000605 752003 0                  STCQ    SADX$,'03'O

      774    11154    1           CALL MINIQC_PL6(SYS_DPX,ADDR(SADDCWX),,%FCNRDB,TOPDA) ALTRET(SADERR);

  11154  2 000335   000012 236000 3                  LDQ     10
         2 000336   200072 756100                    STQ     BOOT$+4,,AUTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:126  
         2 000337   000014 237000 3                  LDAQ    12
         2 000340   200076 757100                    STAQ    BOOT$+8,,AUTO
         2 000341   000001 236000 xsym               LDQ     B_VECTNIL+1
         2 000342   200075 756100                    STQ     BOOT$+7,,AUTO
         2 000343   200072 631500                    EPPR1   BOOT$+4,,AUTO
         2 000344   200074 451500                    STP1    BOOT$+6,,AUTO
         2 000345   000016 236000 3                  LDQ     14
         2 000346   200073 756100                    STQ     BOOT$+5,,AUTO
         2 000347   200073 630500                    EPPR0   BOOT$+5,,AUTO
         2 000350   000023 631400 xsym               EPPR1   B_VECTNIL+19
         2 000351   000000 701000 xent               TSX1    MINIQC_PL6
         2 000352   002462 702000 2                  TSX2    SADERR

      775    11155    1   GOPO0A:
      776    11156    1           ADIR.MONID=RDIR.MONID;

  11156  2 000353   000601 470400 0     GOPO0A       LDP0    BUF$
         2 000354   000000 100500                    MLR     fill='000'O
         2 000355   000210 000020                    ADSC9   136,,PR0                 cn=0,n=16
         2 000356   000214 000020 0                  ADSC9   ADIR+136                 cn=0,n=16

      777    11157    1   GOPO0:
      778    11158    1           REMEMBER DCIASK IN EDCIASK;

  11158  2 000357   000120 635000 2     GOPO0        EAA     DCIASK
         2 000360   000644 452400 0                  STP2    EDCIASK
         2 000361   000645 755000 0                  STA     EDCIASK+1

      779    11159    1           REMEMBER SADERR IN ESADERR;

  11159  2 000362   002462 635000 2                  EAA     SADERR
         2 000363   000646 452400 0                  STP2    ESADERR
         2 000364   000647 755000 0                  STA     ESADERR+1

      780    11160    1           CALL POBOOT ALTRET(POERR);

  11160  2 000365   000002 631400 xsym               EPPR1   B_VECTNIL+2
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:127  
         2 000366   002643 701000 2                  TSX1    s:11572
         2 000367   002467 702000 2                  TSX2    POERR

      781    11161        /* See about patches */
      782    11162    1           PTCHBF='0'B;

  11162  2 000370   010000 220003                    LDX0    4096,DU
         2 000371   000040 100400                    MLR     fill='000'O
         2 000372   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         2 000373   000000 000010 xsym               ADSC9   CP6UL                    cn=0,n=*X0

      783    11163    2           IF RCV_FLG='0'B THEN DO;

  11163  2 000374   000000 236000 xsym               LDQ     RCV_FLG
         2 000375   740000 316003                    CANQ    -16384,DU
         2 000376   001511 601000 2                  TNZ     s:11349

      784    11164    2                 CRWISH='0'B;

  11164  2 000377   001311 450000 0                  STZ     CRWISH

      785    11165    2                 OCWISH='0'B;

  11165  2 000400   001312 450000 0                  STZ     OCWISH

      786    11166    2                 MT2WISH='0'B;

  11166  2 000401   001307 450000 0                  STZ     MT2WISH

      787    11167    2                 PAT2_INDX=0;

  11167  2 000402   001310 450000 0                  STZ     PAT2_INDX

      788    11168    2                 SMTWISH=-1;

  11168  2 000403   770000 236003                    LDQ     -4096,DU
         2 000404   001306 752040 0                  STCQ    MTWISH,'40'O
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:128  

      789    11169    3                 IF ADPXF.P='1'B THEN DO;  /* Change default patch option        */

  11169  2 000405   000000 236000 xsym               LDQ     ADPXF
         2 000406   100000 316003                    CANQ    32768,DU
         2 000407   000634 600000 2                  TZE     GOPO01

      790    11170    3                       IF NF_FLG.NONEW='1'B THEN

  11170  2 000410   000000 236000 xsym               LDQ     NF_FLG
         2 000411   200000 316003                    CANQ    65536,DU
         2 000412   000417 600000 2                  TZE     ASKT2

      791    11171    3                         CALL TYPEC(NOPTIONS);

  11171  2 000413   000017 630400 3                  EPPR0   15
         2 000414   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000415   000000 701000 xent               TSX1    TYPEC
         2 000416   000000 011000                    NOP     0

      792    11172        /* See if he wants a second patch tape */
      793    11173    3   ASKT2:
      794    11174    3                       CALL KEYIN(SCDPA,ANSBUF);

  11174  2 000417   000020 630400 3     ASKT2        EPPR0   16
         2 000420   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000421   000000 701000 xent               TSX1    KEYIN
         2 000422   000000 011000                    NOP     0

      795    11175    3                       CALL GETFD(ANSBUF.TXT,16) ALTRET(PAT2_DONE);
             11175                                /* The default is No */

  11175  2 000423   000023 630400 3                  EPPR0   19
         2 000424   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000425   000000 701000 xent               TSX1    GETFD
         2 000426   000546 702000 2                  TSX2    PAT2_DONE

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:129  
      796    11176    4                       DO SELECT(SUBSTR(ANSBUF.TXT,0,1));

  11176  2 000427   000001 236000 xsym               LDQ     ANSBUF+1
         2 000430   777000 376003                    ANQ     -512,DU
         2 000431   131000 116003                    CMPQ    45568,DU
         2 000432   000455 602000 2                  TNC     s:11176+22
         2 000433   000001 236000 xsym               LDQ     ANSBUF+1
         2 000434   777000 376003                    ANQ     -512,DU
         2 000435   131000 116003                    CMPQ    45568,DU
         2 000436   000462 600000 2                  TZE     s:11178
         2 000437   000001 236000 xsym               LDQ     ANSBUF+1
         2 000440   777000 376003                    ANQ     -512,DU
         2 000441   171000 116003                    CMPQ    61952,DU
         2 000442   000450 602000 2                  TNC     s:11176+17
         2 000443   000001 236000 xsym               LDQ     ANSBUF+1
         2 000444   777000 376003                    ANQ     -512,DU
         2 000445   171000 116003                    CMPQ    61952,DU
         2 000446   000462 600000 2                  TZE     s:11178
         2 000447   000545 710000 2                  TRA     s:11197
         2 000450   000001 236000 xsym               LDQ     ANSBUF+1
         2 000451   777000 376003                    ANQ     -512,DU
         2 000452   156000 116003                    CMPQ    56320,DU
         2 000453   000545 601000 2                  TNZ     s:11197
         2 000454   000544 710000 2                  TRA     s:11195
         2 000455   000001 236000 xsym               LDQ     ANSBUF+1
         2 000456   777000 376003                    ANQ     -512,DU
         2 000457   116000 116003                    CMPQ    39936,DU
         2 000460   000545 601000 2                  TNZ     s:11197
         2 000461   000544 710000 2                  TRA     s:11195

      797    11177    4                         SELECT('Y','y');

      798    11178    4                         MESSAGE$=ADDR(PATAM);

  11178  2 000462   000025 236000 3                  LDQ     21
         2 000463   200054 756100                    STQ     MESSAGE$,,AUTO

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:130  
      799    11179    4                         SUBSTR(TEXTM.TXT,21,6)=SUBSTR(DEVINFO.DEVNAME(%FRSTMT),0,6);

  11179  2 000464   200054 470500                    LDP0    MESSAGE$,,AUTO
         2 000465   000000 720100                    LXL0    0,,PR0
         2 000466   040100 100400                    MLR     fill='040'O
         2 000467   000052 000006 xsym               ADSC9   DEVINFO+42               cn=0,n=6
         2 000470   000006 200006                    ADSC9   6,,PR0                   cn=1,n=6

      800    11180    4   ASKADT2:
      801    11181    4                         CALL KEYIN(PATAM,ANSBUF);

  11181  2 000471   000026 630400 3     ASKADT2      EPPR0   22
         2 000472   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000473   000000 701000 xent               TSX1    KEYIN
         2 000474   000000 011000                    NOP     0

      802    11182    4                         CALL GETFD(ANSBUF.TXT,16) ALTRET(ASKADT2);

  11182  2 000475   000023 630400 3                  EPPR0   19
         2 000476   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000477   000000 701000 xent               TSX1    GETFD
         2 000500   000471 702000 2                  TSX2    ASKADT2

      803    11183    4                         IF FIELD_LEN>2 OR DECIM_FLG='0'B THEN GOTO ASKADT2;

  11183  2 000501   000000 235000 xsym               LDA     FIELD_LEN
         2 000502   000003 115007                    CMPA    3,DL
         2 000503   000471 603000 2                  TRC     ASKADT2
         2 000504   000000 234000 xsym               SZN     DECIM_FLG
         2 000505   000471 605000 2                  TPL     ASKADT2

      804    11184    5                         IF FIELD_LEN=1 THEN DO; /* Make it a 2 digit field      */

  11184  2 000506   000001 115007                    CMPA    1,DL
         2 000507   000520 601000 2                  TNZ     s:11188

      805    11185    5                               SUBSTR(POANS,1,1)=SUBSTR(POANS,0,1);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:131  

  11185  2 000510   000000 470400 xsym               LDP0    FIELD$
         2 000511   040100 100500                    MLR     fill='040'O
         2 000512   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         2 000513   000000 200001                    ADSC9   0,,PR0                   cn=1,n=1

      806    11186    5                               SUBSTR(POANS,0,1)='0';

  11186  2 000514   000000 470400 xsym               LDP0    FIELD$
         2 000515   040100 100400                    MLR     fill='040'O
         2 000516   000030 000001 3                  ADSC9   24                       cn=0,n=1
         2 000517   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1

      807    11187    5                             END;          /* THEN                               */

      808    11188    5                         DO I=%FRSTMT TO %(FRSTDP-1);

  11188  2 000520   000003 235007                    LDA     3,DL
         2 000521   200037 755100                    STA     I,,AUTO

      809    11189    5                           IF SUBSTR(DEVINFO.DEVNAME(I),6,2)=POANS THEN GOTO DOPAT2;

  11189  2 000522   200037 236100                    LDQ     I,,AUTO
         2 000523   000060 402007                    MPY     48,DL
         2 000524   000000 470400 xsym               LDP0    FIELD$
         2 000525   040100 106406                    CMPC    fill='040'O
         2 000526   000007 400002 xsym               ADSC9   DEVINFO+7,Q              cn=2,n=2
         2 000527   000000 000002                    ADSC9   0,,PR0                   cn=0,n=2
         2 000530   000536 600000 2                  TZE     DOPAT2

      810    11190    5                         END;              /* DO I=                              */

  11190  2 000531   200037 054100                    AOS     I,,AUTO
         2 000532   200037 235100                    LDA     I,,AUTO
         2 000533   000023 115007                    CMPA    19,DL
         2 000534   000522 604400 2                  TMOZ    s:11189

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:132  
      811    11191    4                         GOTO ASKADT2;

  11191  2 000535   000471 710000 2                  TRA     ASKADT2

      812    11192    4   DOPAT2:
      813    11193    4                         IF I=PO_INDX THEN; /* Not another tape                  */

  11193  2 000536   200037 236100       DOPAT2       LDQ     I,,AUTO
         2 000537   000542 604000 2                  TMI     s:11194
         2 000540   000000 116000 xsym               CMPQ    PO_INDX
         2 000541   000546 600000 2                  TZE     PAT2_DONE

      814    11194    4                           ELSE PAT2_INDX=I;

  11194  2 000542   001310 756000 0                  STQ     PAT2_INDX
         2 000543   000546 710000 2                  TRA     PAT2_DONE

      815    11195    4                         SELECT('N','n');

  11195  2 000544   000546 710000 2                  TRA     PAT2_DONE

      816    11196    4                         SELECT(ELSE);

      817    11197    4                       GOTO ASKT2;

  11197  2 000545   000417 710000 2                  TRA     ASKT2

      818    11198    4                       END;                /* Do Select                          */

      819    11199    3   PAT2_DONE:
      820    11200    4                 IF PAT2_INDX=0 THEN DO;

  11200  2 000546   001310 235000 0     PAT2_DONE    LDA     PAT2_INDX
         2 000547   000561 601000 2                  TNZ     TPQ1

      821    11201    4   TPQ0:
      822    11202    4                       CALL KEYINXX(QTPQ,ANSBUF);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:133  

  11202  2 000550   000031 630400 3     TPQ0         EPPR0   25
         2 000551   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000552   000000 701000 xent               TSX1    KEYINXX
         2 000553   000000 011000                    NOP     0

      823    11203    4                       CALL AOC(MTWISH) ALTRET(TPQ0);

  11203  2 000554   000033 630400 3                  EPPR0   27
         2 000555   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000556   000000 701000 xent               TSX1    AOC
         2 000557   000550 702000 2                  TSX2    TPQ0

      824    11204    4                     END;                  /* THEN                               */

  11204  2 000560   000614 710000 2                  TRA     CRQ0

      825    11205    4                   ELSE DO;

      826    11206    4   TPQ1:
      827    11207    4                       CALL KEYINXX(QTPQ1,ANSBUF);

  11207  2 000561   000034 630400 3     TPQ1         EPPR0   28
         2 000562   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000563   000000 701000 xent               TSX1    KEYINXX
         2 000564   000000 011000                    NOP     0

      828    11208    4                       CALL AOC(MTWISH) ALTRET(TPQ1);

  11208  2 000565   000033 630400 3                  EPPR0   27
         2 000566   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000567   000000 701000 xent               TSX1    AOC
         2 000570   000561 702000 2                  TSX2    TPQ1

      829    11209    4   TPQ2:
      830    11210    4                       CALL KEYINXX(QTPQ2,ANSBUF);

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:134  
  11210  2 000571   000036 630400 3     TPQ2         EPPR0   30
         2 000572   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000573   000000 701000 xent               TSX1    KEYINXX
         2 000574   000000 011000                    NOP     0

      831    11211    4                       CALL AOC(MT2WISH) ALTRET(TPQ2);

  11211  2 000575   000040 630400 3                  EPPR0   32
         2 000576   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000577   000000 701000 xent               TSX1    AOC
         2 000600   000571 702000 2                  TSX2    TPQ2

      832    11212    5                       IF MT2WISH~='0'B THEN DO; /* Rewind and set density       */

  11212  2 000601   001307 236000 0                  LDQ     MT2WISH
         2 000602   770000 316003                    CANQ    -4096,DU
         2 000603   000614 600000 2                  TZE     CRQ0

      833    11213    6                             CALL SET_PAT2_DEN WHENALTRETURN DO;

  11213  2 000604   002506 701000 2                  TSX1    SET_PAT2_DEN
         2 000605   000607 702000 2                  TSX2    s:11214
         2 000606   000614 710000 2                  TRA     CRQ0

      834    11214    6                                   CALL TYPEC(PATCH_ERR);

  11214  2 000607   000041 630400 3                  EPPR0   33
         2 000610   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000611   000000 701000 xent               TSX1    TYPEC
         2 000612   000000 011000                    NOP     0

      835    11215    6                                   GOTO POERR;

  11215  2 000613   002467 710000 2                  TRA     POERR

      836    11216    6                                 END;
      837    11217    5                           END;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:135  

      838    11218    4                     END;                  /* ELSE                               */

      839    11219    3   CRQ0:
      840    11220    3                 CALL KEYINXX(QCRQ,ANSBUF);

  11220  2 000614   000042 630400 3     CRQ0         EPPR0   34
         2 000615   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000616   000000 701000 xent               TSX1    KEYINXX
         2 000617   000000 011000                    NOP     0

      841    11221    3                 CALL AOC(CRWISH) ALTRET(CRQ0);

  11221  2 000620   000044 630400 3                  EPPR0   36
         2 000621   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000622   000000 701000 xent               TSX1    AOC
         2 000623   000614 702000 2                  TSX2    CRQ0

      842    11222    3   OCQ0:
      843    11223    3                 CALL KEYINXX(QOCQ,ANSBUF);

  11223  2 000624   000045 630400 3     OCQ0         EPPR0   37
         2 000625   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000626   000000 701000 xent               TSX1    KEYINXX
         2 000627   000000 011000                    NOP     0

      844    11224    3                 CALL AOC(OCWISH) ALTRET(OCQ0);

  11224  2 000630   000047 630400 3                  EPPR0   39
         2 000631   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 000632   000000 701000 xent               TSX1    AOC
         2 000633   000624 702000 2                  TSX2    OCQ0

      845    11225    3                     END;                  /* THEN                               */

      846    11226    2                   ELSE;
      847    11227    2   GOPO01:
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:136  
      848    11228    3                 IF VOFLG='0'B THEN DO;    /* If VOLINIT skip disk stuff         */

  11228  2 000634   000000 234000 xsym  GOPO01       SZN     VOFLG
         2 000635   001530 604000 2                  TMI     s:11354

      849    11229    4                       IF TQFLAG~='0'B THEN DO; /* TBOOT from XDELTA or MINI     */

  11229  2 000636   000000 235000 xsym               LDA     TQFLAG
         2 000637   000664 600000 2                  TZE     s:11238

      850    11230    4                             TQFLAG='0'B;

  11230  2 000640   000000 450000 xsym               STZ     TQFLAG

      851    11231    4                             CALL WRITE_PATCH(ADDR(SMINI),8);

  11231  2 000641   000050 236000 3                  LDQ     40
         2 000642   200072 756100                    STQ     BOOT$+4,,AUTO
         2 000643   000051 236000 3                  LDQ     41
         2 000644   200075 756100                    STQ     BOOT$+7,,AUTO
         2 000645   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 000646   200074 450500                    STP0    BOOT$+6,,AUTO
         2 000647   200074 630500                    EPPR0   BOOT$+6,,AUTO
         2 000650   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000651   000000 701000 xent               TSX1    WRITE_PATCH
         2 000652   000000 011000                    NOP     0

      852    11232    4                             PDEV=1;

  11232  2 000653   000001 235007                    LDA     1,DL
         2 000654   000000 755000 xsym               STA     PDEV

      853    11233    4                             CALL MDELTCALL; /* Let MINI read patches            */

  11233  2 000655   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000656   000000 701000 xent               TSX1    MDELTCALL
         2 000657   000000 011000                    NOP     0
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:137  

      854    11234    4                             PDEV=0;

  11234  2 000660   000000 450000 xsym               STZ     PDEV

      855    11235    4                             NAVDA=ADIR.PATCH.DA;
             11235                             /* Start patches after FW and don't rewrite or move disk FW */

  11235  2 000661   000201 235000 0                  LDA     ADIR+125
         2 000662   000000 755000 xsym               STA     NAVDA

      856    11236    4                           END;            /* THEN                               */

  11236  2 000663   000746 710000 2                  TRA     GOPO01A

      857    11237    4                         ELSE DO;

      858    11238    4                             CALL WRTFW;   /* Write FW on disk                   */

  11238  2 000664   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000665   000000 701000 xent               TSX1    WRTFW
         2 000666   000000 011000                    NOP     0

      859    11239    5                             IF S1000_FLG='0'B THEN DO;

  11239  2 000667   000000 234000 xsym               SZN     S1000_FLG
         2 000670   000726 604000 2                  TMI     s:11252

      860    11240        /* Move system disk FW to reserved buffer,
      861    11241           and modify AARDVARK disk FW load DCW's */
      862    11242    5                                   LGTH=(DKHDR.CSOSIZE+DKHDR.MMOSIZE)*4;

  11242  2 000671   000000 470400 xsym               LDP0    DCFWHDR$
         2 000672   000002 236100                    LDQ     2,,PR0
         2 000673   777777 376007                    ANQ     -1,DL
         2 000674   200072 756100                    STQ     BOOT$+4,,AUTO
         2 000675   000002 236100                    LDQ     2,,PR0
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:138  
         2 000676   000022 772000                    QRL     18
         2 000677   200072 036100                    ADLQ    BOOT$+4,,AUTO
         2 000700   000002 736000                    QLS     2
         2 000701   200053 756100                    STQ     LGTH,,AUTO

      863    11243    5                                   FORMDFW_PTR='0'B;
             11243                                            /* Initialize pointer to actual disk FW */

  11243  2 000702   200064 450100                    STZ     FORMDFW$,,AUTO

      864    11244    5                                   FORMDFW_PTR.S_D_FIELD=%ALS_AIS;

  11244  2 000703   006000 236007                    LDQ     3072,DL
         2 000704   200064 752103                    STCQ    FORMDFW$,'03'O,AUTO

      865    11245    5                                   FORMDFW_PTR.WOFFS=DKHDR.BUFAD;

  11245  2 000705   000000 720100                    LXL0    0,,PR0
         2 000706   200064 740100                    STX0    FORMDFW$,,AUTO

      866    11246    5                                   DCFWSTART$->FWBUF=FORMDFW$->FWBUF; /* and move FW*/

  11246  2 000707   200064 471500                    LDP1    FORMDFW$,,AUTO
         2 000710   200053 721100                    LXL1    LGTH,,AUTO
         2 000711   000000 473400 xsym               LDP3    DCFWSTART_PTR
         2 000712   040140 100540                    MLR     fill='040'O
         2 000713   100000 000011                    ADSC9   0,,PR1                   cn=0,n=*X1
         2 000714   300000 000011                    ADSC9   0,,PR3                   cn=0,n=*X1

      867    11247    5                                  DKHDR.BUFAD=DCFWSTART_PTR.WOFFS; /* update header */

  11247  2 000715   000000 222000 xsym               LDX2    DCFWSTART_PTR
         2 000716   000000 470400 xsym               LDP0    DCFWHDR$
         2 000717   000000 442100                    SXL2    0,,PR0

      868    11248    5                                   FWHDR$=DCFWHDR$;

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:139  
  11248  2 000720   000000 236000 xsym               LDQ     DCFWHDR$
         2 000721   000000 756000 xsym               STQ     FWHDR$

      869    11249    5                                   CALL BUILDFW_DCWS(DCCSOD1,DCMMOD1);

  11249  2 000722   000052 630400 3                  EPPR0   42
         2 000723   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000724   000000 701000 xent               TSX1    BUILDFW_DCWS
         2 000725   000000 011000                    NOP     0

      870    11250    5                                 END;      /* THEN                               */

      871    11251    4                               ELSE;
      872    11252    4                             CALL WRITE_PATCH(ADDR(SMINI),8);

  11252  2 000726   000050 236000 3                  LDQ     40
         2 000727   200072 756100                    STQ     BOOT$+4,,AUTO
         2 000730   000051 236000 3                  LDQ     41
         2 000731   200075 756100                    STQ     BOOT$+7,,AUTO
         2 000732   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 000733   200074 450500                    STP0    BOOT$+6,,AUTO
         2 000734   200074 630500                    EPPR0   BOOT$+6,,AUTO
         2 000735   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000736   000000 701000 xent               TSX1    WRITE_PATCH
         2 000737   000000 011000                    NOP     0

      873    11253    4                             PDEV=1;

  11253  2 000740   000001 235007                    LDA     1,DL
         2 000741   000000 755000 xsym               STA     PDEV

      874    11254    4                             CALL MDELTCALL; /* Let MINI read patches            */

  11254  2 000742   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000743   000000 701000 xent               TSX1    MDELTCALL
         2 000744   000000 011000                    NOP     0

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:140  
      875    11255    4                             PDEV=0;

  11255  2 000745   000000 450000 xsym               STZ     PDEV

      876    11256    4                           END;            /* ELSE                               */

      877    11257    3   GOPO01A:
      878    11258        /* Set up system area directory */
      879    11259    3                       HDRPAT.DA=NAVDA;    /* Disk address for patches           */

  11259  2 000746   000000 235000 xsym  GOPO01A      LDA     NAVDA
         2 000747   000501 755000 0                  STA     HDRPAT+1

      880    11260    3                       ADIR.TIGRDATA.DA=HDRPAT.DA+%PATCH_GRS;
             11260                                /* Allow space for patches */

  11260  2 000750   002260 035007                    ADLA    1200,DL
         2 000751   000121 755000 0                  STA     ADIR+77

      881    11261    3                       NAVDA=NAVDA+%PATCH_GRS;

  11261  2 000752   000000 236000 xsym               LDQ     NAVDA
         2 000753   002260 036007                    ADLQ    1200,DL
         2 000754   000000 756000 xsym               STQ     NAVDA

      882    11262    3   GOPO02:
      883    11263        /* Move headers into directory */
      884    11264    3                       HDR$=ADDR(HDRXLS);

  11264  2 000755   000054 236000 3     GOPO02       LDQ     44
         2 000756   000600 756000 0                  STQ     HDR$

      885    11265    4                       DO I=0 TO %(NUMTC+14-1);

  11265  2 000757   200037 450100                    STZ     I,,AUTO

      886    11266    4                         ASADTAB$(I)->BAS_HDR=BAS_HDR;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:141  

  11266  2 000760   200037 720100                    LXL0    I,,AUTO
         2 000761   000660 470410 0                  LDP0    SADTAB,X0
         2 000762   000600 471400 0                  LDP1    HDR$
         2 000763   000100 100500                    MLR     fill='000'O
         2 000764   100000 000020                    ADSC9   0,,PR1                   cn=0,n=16
         2 000765   000000 000020                    ADSC9   0,,PR0                   cn=0,n=16

      887    11267    4                         HDR$=PINCRW(HDR$,4);

  11267  2 000766   000600 236000 0                  LDQ     HDR$
         2 000767   000004 036003                    ADLQ    4,DU
         2 000770   000600 756000 0                  STQ     HDR$

      888    11268    4                       END;                /* DO I=                              */

  11268  2 000771   200037 054100                    AOS     I,,AUTO
         2 000772   200037 235100                    LDA     I,,AUTO
         2 000773   000040 115007                    CMPA    32,DL
         2 000774   000760 604400 2                  TMOZ    s:11266

      889    11269        /* Read VID and rewrite with system area non zero */
      890    11270    3                       CALL RDVID ALTRET(DCIASK);

  11270  2 000775   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000776   000000 701000 xent               TSX1    RDVID
         2 000777   000120 702000 2                  TSX2    DCIASK

      891    11271    4                       IF(FM$VID.SYSSIZE=0 OR NF_FLG='0'B) THEN DO;

  11271  2 001000   000601 470400 0                  LDP0    BUF$
         2 001001   000005 235100                    LDA     5,,PR0
         2 001002   001006 600000 2                  TZE     s:11272
         2 001003   000000 236000 xsym               LDQ     NF_FLG
         2 001004   700000 316003                    CANQ    -32768,DU
         2 001005   001014 601000 2                  TNZ     GOPO02A

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:142  
      892    11272    4                             FM$VID.SYSSIZE=NAVDA*4;

  11272  2 001006   000000 236000 xsym               LDQ     NAVDA
         2 001007   000002 736000                    QLS     2
         2 001010   000005 756100                    STQ     5,,PR0

      893    11273    4                             FM$VID.SYSDIRDA=TOPDA;

  11273  2 001011   000000 235000 xsym               LDA     TOPDA
         2 001012   000006 755100                    STA     6,,PR0

      894    11274    4                             ADIR.DUMP.DA=NAVDA*4;

  11274  2 001013   000205 756000 0                  STQ     ADIR+129

      895    11275    4                           END;            /* THEN                               */

      896    11276    3                         ELSE;
      897    11277    3   GOPO02A:
      898    11278        /* Set up disk bootstrap program */
      899    11279    4                       IF RPM_FLG THEN DO;

  11279  2 001014   000000 234000 xsym  GOPO02A      SZN     RPM_FLG
         2 001015   001221 605000 2                  TPL     s:11302

      900    11280    4                             BOOT$=ADDR(RC1); /* Fix reboot code                 */

  11280  2 001016   000005 236000 3                  LDQ     5
         2 001017   200066 756100                    STQ     BOOT$,,AUTO

      901    11281    4                             BOOTRC=BOOT;

  11281  2 001020   200066 471500                    LDP1    BOOT$,,AUTO
         2 001021   040000 100500                    MLR     fill='040'O
         2 001022   100000 000400                    ADSC9   0,,PR1                   cn=0,n=256
         2 001023   001317 000400 0                  ADSC9   BOOTRC                   cn=0,n=256

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:143  
      902    11282    4                             HUBOOTRC(2*(POFFW(ADDR(RC1LIM),ADDR(RC1))))=HDRAAR.SIZE;

  11282  2 001024   000022 772000                    QRL     18
         2 001025   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001026   000006 236000 3                  LDQ     6
         2 001027   000022 772000                    QRL     18
         2 001030   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 001031   000366 720000 0                  LXL0    HDRAAR+2
         2 001032   001317 740006 0                  STX0    BOOTRC,QL

      903    11283    4                             UBOOTRC(POFFW(ADDR(RC1SKAD),ADDR(RC1)))=HDRAAR.DA*16;

  11283  2 001033   000005 236000 3                  LDQ     5
         2 001034   000022 772000                    QRL     18
         2 001035   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001036   000007 236000 3                  LDQ     7
         2 001037   000022 772000                    QRL     18
         2 001040   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 001041   000365 235000 0                  LDA     HDRAAR+1
         2 001042   000004 735000                    ALS     4
         2 001043   001317 755006 0                  STA     BOOTRC,QL

      904    11284        /* Init seek and read IDCW  */
      905    11285    4                             BDEV.DEV#=DEVINFO.DEV#(SYS_DPX);

  11285  2 001044   000000 236000 xsym               LDQ     SYS_DPX
         2 001045   000014 402007                    MPY     12,DL
         2 001046   000000 236006 xsym               LDQ     DEVINFO,QL
         2 001047   000003 736000                    QLS     3
         2 001050   001315 752020 0                  STCQ    BDEV,'20'O

      906    11286    4                            BBOOTRC(POFFW(ADDR(RC1SK),ADDR(RC1)))=(BBOOTRC(POFFW(ADDR(
             11286                                      RC1SK),ADDR(RC1)))|BDEV);

  11286  2 001051   000005 236000 3                  LDQ     5
         2 001052   000022 772000                    QRL     18
         2 001053   200072 756100                    STQ     BOOT$+4,,AUTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:144  
         2 001054   000010 236000 3                  LDQ     8
         2 001055   000022 772000                    QRL     18
         2 001056   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 001057   200073 756100                    STQ     BOOT$+5,,AUTO
         2 001060   000005 236000 3                  LDQ     5
         2 001061   000022 772000                    QRL     18
         2 001062   200074 756100                    STQ     BOOT$+6,,AUTO
         2 001063   000010 236000 3                  LDQ     8
         2 001064   000022 772000                    QRL     18
         2 001065   200074 136100                    SBLQ    BOOT$+6,,AUTO
         2 001066   001317 236006 0                  LDQ     BOOTRC,QL
         2 001067   001315 276000 0                  ORQ     BDEV
         2 001070   200073 720100                    LXL0    BOOT$+5,,AUTO
         2 001071   001317 756010 0                  STQ     BOOTRC,X0

      907    11287    4                             BDEV.ORD='25'O;

  11287  2 001072   250000 236003                    LDQ     86016,DU
         2 001073   001315 752040 0                  STCQ    BDEV,'40'O

      908    11288    4                            BBOOTRC(POFFW(ADDR(RC1ICW),ADDR(RC1)))=(BBOOTRC(POFFW(ADDR
             11288                                      (RC1ICW),ADDR(RC1)))|BDEV);

  11288  2 001074   000005 236000 3                  LDQ     5
         2 001075   000022 772000                    QRL     18
         2 001076   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001077   000011 236000 3                  LDQ     9
         2 001100   000022 772000                    QRL     18
         2 001101   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 001102   200073 756100                    STQ     BOOT$+5,,AUTO
         2 001103   000005 236000 3                  LDQ     5
         2 001104   000022 772000                    QRL     18
         2 001105   200074 756100                    STQ     BOOT$+6,,AUTO
         2 001106   000011 236000 3                  LDQ     9
         2 001107   000022 772000                    QRL     18
         2 001110   200074 136100                    SBLQ    BOOT$+6,,AUTO
         2 001111   001317 236006 0                  LDQ     BOOTRC,QL
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:145  
         2 001112   001315 276000 0                  ORQ     BDEV
         2 001113   200073 720100                    LXL0    BOOT$+5,,AUTO
         2 001114   001317 756010 0                  STQ     BOOTRC,X0

      909    11289    4                             BOOT=BOOTRC;  /* Put it back in RPM_BOOTRC          */

  11289  2 001115   040100 100400                    MLR     fill='040'O
         2 001116   001317 000400 0                  ADSC9   BOOTRC                   cn=0,n=256
         2 001117   100000 000400                    ADSC9   0,,PR1                   cn=0,n=256

      910    11290    4                             BOOT$=ADDR(XC1);

  11290  2 001120   000055 236000 3                  LDQ     45
         2 001121   200066 756100                    STQ     BOOT$,,AUTO

      911    11291    4                             BOOTRC=BOOT;  /* Init the disc boot code            */

  11291  2 001122   200066 471500                    LDP1    BOOT$,,AUTO
         2 001123   040000 100500                    MLR     fill='040'O
         2 001124   100000 000400                    ADSC9   0,,PR1                   cn=0,n=256
         2 001125   001317 000400 0                  ADSC9   BOOTRC                   cn=0,n=256

      912    11292    4                             HUBOOTRC(2*(POFFW(ADDR(XC1LIM),ADDR(XC1))))=HDRAAR.SIZE;

  11292  2 001126   000022 772000                    QRL     18
         2 001127   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001130   000056 236000 3                  LDQ     46
         2 001131   000022 772000                    QRL     18
         2 001132   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 001133   000366 720000 0                  LXL0    HDRAAR+2
         2 001134   001317 740006 0                  STX0    BOOTRC,QL

      913    11293    4                             UBOOTRC(POFFW(ADDR(XC1SKAD),ADDR(XC1)))=HDRAAR.DA*16;

  11293  2 001135   000055 236000 3                  LDQ     45
         2 001136   000022 772000                    QRL     18
         2 001137   200072 756100                    STQ     BOOT$+4,,AUTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:146  
         2 001140   000057 236000 3                  LDQ     47
         2 001141   000022 772000                    QRL     18
         2 001142   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 001143   000365 235000 0                  LDA     HDRAAR+1
         2 001144   000004 735000                    ALS     4
         2 001145   001317 755006 0                  STA     BOOTRC,QL

      914    11294        /* Init seek and read IDCW  */
      915    11295    4                             BDEV = '0'B;

  11295  2 001146   001315 450000 0                  STZ     BDEV

      916    11296    4                             BDEV.DEV#=DEVINFO.DEV#(SYS_DPX);

  11296  2 001147   000000 236000 xsym               LDQ     SYS_DPX
         2 001150   000014 402007                    MPY     12,DL
         2 001151   000000 236006 xsym               LDQ     DEVINFO,QL
         2 001152   000003 736000                    QLS     3
         2 001153   001315 752020 0                  STCQ    BDEV,'20'O

      917    11297    4                            BBOOTRC(POFFW(ADDR(XC1SK),ADDR(XC1)))=(BBOOTRC(POFFW(ADDR(
             11297                                      XC1SK),ADDR(XC1)))|BDEV);

  11297  2 001154   000055 236000 3                  LDQ     45
         2 001155   000022 772000                    QRL     18
         2 001156   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001157   000060 236000 3                  LDQ     48
         2 001160   000022 772000                    QRL     18
         2 001161   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 001162   200073 756100                    STQ     BOOT$+5,,AUTO
         2 001163   000055 236000 3                  LDQ     45
         2 001164   000022 772000                    QRL     18
         2 001165   200074 756100                    STQ     BOOT$+6,,AUTO
         2 001166   000060 236000 3                  LDQ     48
         2 001167   000022 772000                    QRL     18
         2 001170   200074 136100                    SBLQ    BOOT$+6,,AUTO
         2 001171   001317 236006 0                  LDQ     BOOTRC,QL
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:147  
         2 001172   001315 276000 0                  ORQ     BDEV
         2 001173   200073 720100                    LXL0    BOOT$+5,,AUTO
         2 001174   001317 756010 0                  STQ     BOOTRC,X0

      918    11298    4                             BDEV.ORD='25'O;

  11298  2 001175   250000 236003                    LDQ     86016,DU
         2 001176   001315 752040 0                  STCQ    BDEV,'40'O

      919    11299    4                            BBOOTRC(POFFW(ADDR(XC1ICW),ADDR(XC1)))=(BBOOTRC(POFFW(ADDR
             11299                                      (XC1ICW),ADDR(XC1)))|BDEV);

  11299  2 001177   000055 236000 3                  LDQ     45
         2 001200   000022 772000                    QRL     18
         2 001201   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001202   000061 236000 3                  LDQ     49
         2 001203   000022 772000                    QRL     18
         2 001204   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 001205   200073 756100                    STQ     BOOT$+5,,AUTO
         2 001206   000055 236000 3                  LDQ     45
         2 001207   000022 772000                    QRL     18
         2 001210   200074 756100                    STQ     BOOT$+6,,AUTO
         2 001211   000061 236000 3                  LDQ     49
         2 001212   000022 772000                    QRL     18
         2 001213   200074 136100                    SBLQ    BOOT$+6,,AUTO
         2 001214   001317 236006 0                  LDQ     BOOTRC,QL
         2 001215   001315 276000 0                  ORQ     BDEV
         2 001216   200073 720100                    LXL0    BOOT$+5,,AUTO
         2 001217   001317 756010 0                  STQ     BOOTRC,X0

      920    11300    4                           END;

  11300  2 001220   001341 710000 2                  TRA     s:11313

      921    11301    4                         ELSE DO;

      922    11302    4                             BOOT$=ADDR(MC1);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:148  

  11302  2 001221   000062 236000 3                  LDQ     50
         2 001222   200066 756100                    STQ     BOOT$,,AUTO

      923    11303    4                             BOOTRC=BOOT;  /* Init the disc boot code            */

  11303  2 001223   200066 471500                    LDP1    BOOT$,,AUTO
         2 001224   040000 100500                    MLR     fill='040'O
         2 001225   100000 000400                    ADSC9   0,,PR1                   cn=0,n=256
         2 001226   001317 000400 0                  ADSC9   BOOTRC                   cn=0,n=256

      924    11304    4                             HUBOOTRC(2*(POFFW(ADDR(MC1LIM),ADDR(MC1))))=HDRAAR.SIZE;

  11304  2 001227   000022 772000                    QRL     18
         2 001230   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001231   000063 236000 3                  LDQ     51
         2 001232   000022 772000                    QRL     18
         2 001233   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 001234   000366 720000 0                  LXL0    HDRAAR+2
         2 001235   001317 740006 0                  STX0    BOOTRC,QL

      925    11305    4                             UBOOTRC(POFFW(ADDR(MC1SKAD),ADDR(MC1)))=HDRAAR.DA*16;

  11305  2 001236   000062 236000 3                  LDQ     50
         2 001237   000022 772000                    QRL     18
         2 001240   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001241   000064 236000 3                  LDQ     52
         2 001242   000022 772000                    QRL     18
         2 001243   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 001244   000365 235000 0                  LDA     HDRAAR+1
         2 001245   000004 735000                    ALS     4
         2 001246   001317 755006 0                  STA     BOOTRC,QL

      926    11306        /* Init seek IDCW and PCW */
      927    11307    4                             BDEV.DEV#=DEVINFO.DEV#(SYS_DPX);

  11307  2 001247   000000 236000 xsym               LDQ     SYS_DPX
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:149  
         2 001250   000014 402007                    MPY     12,DL
         2 001251   000000 236006 xsym               LDQ     DEVINFO,QL
         2 001252   000003 736000                    QLS     3
         2 001253   001315 752020 0                  STCQ    BDEV,'20'O

      928    11308    4                            BBOOTRC(POFFW(ADDR(MC1SK),ADDR(MC1)))=(BBOOTRC(POFFW(ADDR(
             11308                                      MC1SK),ADDR(MC1)))|BDEV);

  11308  2 001254   000062 236000 3                  LDQ     50
         2 001255   000022 772000                    QRL     18
         2 001256   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001257   000065 236000 3                  LDQ     53
         2 001260   000022 772000                    QRL     18
         2 001261   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 001262   200073 756100                    STQ     BOOT$+5,,AUTO
         2 001263   000062 236000 3                  LDQ     50
         2 001264   000022 772000                    QRL     18
         2 001265   200074 756100                    STQ     BOOT$+6,,AUTO
         2 001266   000065 236000 3                  LDQ     53
         2 001267   000022 772000                    QRL     18
         2 001270   200074 136100                    SBLQ    BOOT$+6,,AUTO
         2 001271   001317 236006 0                  LDQ     BOOTRC,QL
         2 001272   001315 276000 0                  ORQ     BDEV
         2 001273   200073 720100                    LXL0    BOOT$+5,,AUTO
         2 001274   001317 756010 0                  STQ     BOOTRC,X0

      929    11309    4                            BBOOTRC(POFFW(ADDR(MC1PCW),ADDR(MC1)))=(BBOOTRC(POFFW(ADDR
             11309                                      (MC1PCW),ADDR(MC1)))|BDEV);

  11309  2 001275   000062 236000 3                  LDQ     50
         2 001276   000022 772000                    QRL     18
         2 001277   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001300   000066 236000 3                  LDQ     54
         2 001301   000022 772000                    QRL     18
         2 001302   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 001303   200073 756100                    STQ     BOOT$+5,,AUTO
         2 001304   000062 236000 3                  LDQ     50
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:150  
         2 001305   000022 772000                    QRL     18
         2 001306   200074 756100                    STQ     BOOT$+6,,AUTO
         2 001307   000066 236000 3                  LDQ     54
         2 001310   000022 772000                    QRL     18
         2 001311   200074 136100                    SBLQ    BOOT$+6,,AUTO
         2 001312   001317 236006 0                  LDQ     BOOTRC,QL
         2 001313   001315 276000 0                  ORQ     BDEV
         2 001314   200073 720100                    LXL0    BOOT$+5,,AUTO
         2 001315   001317 756010 0                  STQ     BOOTRC,X0

      930    11310    4                             BDEV.ORD='25'O;

  11310  2 001316   250000 236003                    LDQ     86016,DU
         2 001317   001315 752040 0                  STCQ    BDEV,'40'O

      931    11311    4                            BBOOTRC(POFFW(ADDR(MC1ICW),ADDR(MC1)))=(BBOOTRC(POFFW(ADDR
             11311                                      (MC1ICW),ADDR(MC1)))|BDEV);

  11311  2 001320   000062 236000 3                  LDQ     50
         2 001321   000022 772000                    QRL     18
         2 001322   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001323   000067 236000 3                  LDQ     55
         2 001324   000022 772000                    QRL     18
         2 001325   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 001326   200073 756100                    STQ     BOOT$+5,,AUTO
         2 001327   000062 236000 3                  LDQ     50
         2 001330   000022 772000                    QRL     18
         2 001331   200074 756100                    STQ     BOOT$+6,,AUTO
         2 001332   000067 236000 3                  LDQ     55
         2 001333   000022 772000                    QRL     18
         2 001334   200074 136100                    SBLQ    BOOT$+6,,AUTO
         2 001335   001317 236006 0                  LDQ     BOOTRC,QL
         2 001336   001315 276000 0                  ORQ     BDEV
         2 001337   200073 720100                    LXL0    BOOT$+5,,AUTO
         2 001340   001317 756010 0                  STQ     BOOTRC,X0

      932    11312    4                           END;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:151  

      933    11313    3                       BDEV.ORD='0'B;

  11313  2 001341   000000 236003                    LDQ     0,DU
         2 001342   001315 752040 0                  STCQ    BDEV,'40'O

      934    11314        /* Move at sector 2 for 451 and at sect 1 for 501 */
      935    11315    3                       BOOT$=PINCRW(ADDR(POBUF),128);

  11315  2 001343   000070 236000 3                  LDQ     56
         2 001344   200066 756100                    STQ     BOOT$,,AUTO

      936    11316    3                       BOOT=BOOTRC;

  11316  2 001345   200066 471500                    LDP1    BOOT$,,AUTO
         2 001346   040100 100400                    MLR     fill='040'O
         2 001347   001317 000400 0                  ADSC9   BOOTRC                   cn=0,n=256
         2 001350   100000 000400                    ADSC9   0,,PR1                   cn=0,n=256

      937    11317    3                       BOOT$=PINCRW(ADDR(POBUF),512);

  11317  2 001351   000071 236000 3                  LDQ     57
         2 001352   200066 756100                    STQ     BOOT$,,AUTO

      938    11318    3                       BOOT=BOOTRC;

  11318  2 001353   200066 471500                    LDP1    BOOT$,,AUTO
         2 001354   040100 100400                    MLR     fill='040'O
         2 001355   001317 000400 0                  ADSC9   BOOTRC                   cn=0,n=256
         2 001356   100000 000400                    ADSC9   0,,PR1                   cn=0,n=256

      939    11319        /**/
      940    11320    3                       CALL WRVID ALTRET(DCIASK);

  11320  2 001357   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 001360   000000 701000 xent               TSX1    WRVID
         2 001361   000120 702000 2                  TSX2    DCIASK
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:152  

      941    11321        /* Write system area directory */
      942    11322    4                       IF RCV_FLG='0'B THEN DO;

  11322  2 001362   000000 236000 xsym               LDQ     RCV_FLG
         2 001363   740000 316003                    CANQ    -16384,DU
         2 001364   001400 601000 2                  TNZ     GOPO02B

      943    11323    4                             IF SUBSTR(IDBUF.TXT,5,3)=ADIR.MONID.A.VER THEN
             11323                                      /* Version# */

  11323  2 001365   040000 106400                    CMPC    fill='040'O
         2 001366   000611 200003 0                  ADSC9   IDBUF+2                  cn=1,n=3
         2 001367   000214 000003 0                  ADSC9   ADIR+136                 cn=0,n=3
         2 001370   001375 601000 2                  TNZ     s:11327

      944    11324    4                               ADIR.MONID.A.BOOTC=ADIR.MONID.A.BOOTC+1;

  11324  2 001371   000214 236000 0                  LDQ     ADIR+136
         2 001372   000001 036007                    ADLQ    1,DL
         2 001373   000214 552004 0                  STBQ    ADIR+136,'04'O
         2 001374   001400 710000 2                  TRA     GOPO02B

      945    11325    4                               ELSE
      946    11326        /* Use version from tape */
      947    11327    4                               ADIR.MONID.A.VER=SUBSTR(IDBUF.TXT,5,3);

  11327  2 001375   000611 236000 0                  LDQ     IDBUF+2
         2 001376   000011 736000                    QLS     9
         2 001377   000214 552070 0                  STBQ    ADIR+136,'70'O

      948    11328    4                           END;            /* THEN                               */

      949    11329    3                         ELSE;
      950    11330    3   GOPO02B:
      951    11331    3                       CALL MINIQC_PL6(SYS_DPX,ADDR(SADDCW),,%FCNWDB,TOPDA) ALTRET(
             11331                                SADERR);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:153  

  11331  2 001400   000072 236000 3     GOPO02B      LDQ     58
         2 001401   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001402   000074 237000 3                  LDAQ    60
         2 001403   200076 757100                    STAQ    BOOT$+8,,AUTO
         2 001404   000001 236000 xsym               LDQ     B_VECTNIL+1
         2 001405   200075 756100                    STQ     BOOT$+7,,AUTO
         2 001406   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 001407   200074 450500                    STP0    BOOT$+6,,AUTO
         2 001410   000016 236000 3                  LDQ     14
         2 001411   200073 756100                    STQ     BOOT$+5,,AUTO
         2 001412   200073 630500                    EPPR0   BOOT$+5,,AUTO
         2 001413   000023 631400 xsym               EPPR1   B_VECTNIL+19
         2 001414   000000 701000 xent               TSX1    MINIQC_PL6
         2 001415   002462 702000 2                  TSX2    SADERR

      952    11332        /* Write tape ID */
      953    11333    3                       CALL MINIQ_PL6(SYS_DPX,ADDR(IDBUF.TXT),IDBUF.CNT,%FCNWDB,ADIR.
             11333                                AARDVARK.DA) ALTRET(SADERR);

  11333  2 001416   000076 236000 3                  LDQ     62
         2 001417   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001420   000100 237000 3                  LDAQ    64
         2 001421   200076 757100                    STAQ    BOOT$+8,,AUTO
         2 001422   000102 236000 3                  LDQ     66
         2 001423   200075 756100                    STQ     BOOT$+7,,AUTO
         2 001424   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 001425   200074 450500                    STP0    BOOT$+6,,AUTO
         2 001426   000016 236000 3                  LDQ     14
         2 001427   200073 756100                    STQ     BOOT$+5,,AUTO
         2 001430   200073 630500                    EPPR0   BOOT$+5,,AUTO
         2 001431   000023 631400 xsym               EPPR1   B_VECTNIL+19
         2 001432   000000 701000 xent               TSX1    MINIQ_PL6
         2 001433   002462 702000 2                  TSX2    SADERR

      954    11334        /* Set up and write schema directory */
      955    11335    3                       FROMDESCR$=ADDR(AALS.DESCSCH);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:154  

  11335  2 001434   000000 236000 0                  LDQ     AALS$
         2 001435   000040 036003                    ADLQ    32,DU
         2 001436   000653 756000 0                  STQ     FROMDESCR$

      956    11336    3                       TODESCR$=ADDR(POBUF);

  11336  2 001437   000103 236000 3                  LDQ     67
         2 001440   000652 756000 0                  STQ     TODESCR$

      957    11337    3                       TODESCR$->BAS_DESCR=FROMDESCR$->BAS_DESCR;

  11337  2 001441   000653 470400 0                  LDP0    FROMDESCR$
         2 001442   000000 237100                    LDAQ    0,,PR0
         2 001443   000652 471400 0                  LDP1    TODESCR$
         2 001444   100000 757100                    STAQ    0,,PR1

      958    11338    3                       FROMDESCR$=ADDR(AALS.DESCSCH0);

  11338  2 001445   000000 236000 0                  LDQ     AALS$
         2 001446   000150 036003                    ADLQ    104,DU
         2 001447   000653 756000 0                  STQ     FROMDESCR$

      959    11339    3                       TODESCR$=PINCRW(TODESCR$,2);

  11339  2 001450   000652 236000 0                  LDQ     TODESCR$
         2 001451   000002 036003                    ADLQ    2,DU
         2 001452   000652 756000 0                  STQ     TODESCR$

      960    11340    4                       DO I=0 TO 11;

  11340  2 001453   200037 450100                    STZ     I,,AUTO

      961    11341    4                         TODESCR$->BAS_DESCR=FROMDESCR$->BAS_DESCR;

  11341  2 001454   000653 470400 0                  LDP0    FROMDESCR$
         2 001455   000000 237100                    LDAQ    0,,PR0
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:155  
         2 001456   000652 471400 0                  LDP1    TODESCR$
         2 001457   100000 757100                    STAQ    0,,PR1

      962    11342    4                         FROMDESCR$=PINCRW(FROMDESCR$,2);

  11342  2 001460   000653 236000 0                  LDQ     FROMDESCR$
         2 001461   000002 036003                    ADLQ    2,DU
         2 001462   000653 756000 0                  STQ     FROMDESCR$

      963    11343    4                         TODESCR$=PINCRW(TODESCR$,2);

  11343  2 001463   000652 236000 0                  LDQ     TODESCR$
         2 001464   000002 036003                    ADLQ    2,DU
         2 001465   000652 756000 0                  STQ     TODESCR$

      964    11344    4                       END;                /* DO I=                              */

  11344  2 001466   200037 054100                    AOS     I,,AUTO
         2 001467   200037 235100                    LDA     I,,AUTO
         2 001470   000013 115007                    CMPA    11,DL
         2 001471   001454 604400 2                  TMOZ    s:11341

      965    11345    3                       CALL MINIQC_PL6(SYS_DPX,ADDR(PODCW),,%FCNWDB,ADIR.SCHEMADIR.DA)
             11345                                ALTRET(SADERR);

  11345  2 001472   000104 236000 3                  LDQ     68
         2 001473   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001474   000106 237000 3                  LDAQ    70
         2 001475   200076 757100                    STAQ    BOOT$+8,,AUTO
         2 001476   000001 236000 xsym               LDQ     B_VECTNIL+1
         2 001477   200075 756100                    STQ     BOOT$+7,,AUTO
         2 001500   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 001501   200074 450500                    STP0    BOOT$+6,,AUTO
         2 001502   000016 236000 3                  LDQ     14
         2 001503   200073 756100                    STQ     BOOT$+5,,AUTO
         2 001504   200073 630500                    EPPR0   BOOT$+5,,AUTO
         2 001505   000023 631400 xsym               EPPR1   B_VECTNIL+19
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:156  
         2 001506   000000 701000 xent               TSX1    MINIQC_PL6
         2 001507   002462 702000 2                  TSX2    SADERR

      966    11346    3                     END;

      967    11347    2               END;

  11347  2 001510   001530 710000 2                  TRA     s:11354

      968    11348    2             ELSE DO;

      969    11349    2                 CALL WRITE_PATCH(ADDR(SMINI),8);

  11349  2 001511   000050 236000 3                  LDQ     40
         2 001512   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001513   000051 236000 3                  LDQ     41
         2 001514   200075 756100                    STQ     BOOT$+7,,AUTO
         2 001515   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 001516   200074 450500                    STP0    BOOT$+6,,AUTO
         2 001517   200074 630500                    EPPR0   BOOT$+6,,AUTO
         2 001520   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 001521   000000 701000 xent               TSX1    WRITE_PATCH
         2 001522   000000 011000                    NOP     0

      970    11350    2                 PDEV=1;

  11350  2 001523   000001 235007                    LDA     1,DL
         2 001524   000000 755000 xsym               STA     PDEV

      971    11351    2                 CALL MDELTCALL;           /* Let MINI read patches              */

  11351  2 001525   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 001526   000000 701000 xent               TSX1    MDELTCALL
         2 001527   000000 011000                    NOP     0

      972    11352    2               END;

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:157  
      973    11353        /* Build MON page table */
      974    11354    1           CALL INITM;

  11354  2 001530   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 001531   000000 701000 xent               TSX1    INITM
         2 001532   000000 011000                    NOP     0

      975    11355    1           CALL LOADPDBR;

  11355  2 001533   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 001534   000000 701000 xent               TSX1    LOADPDBR
         2 001535   000000 011000                    NOP     0

      976    11356        /* Init GHOST1 PT */
      977    11357    1           CALL INIT1;

  11357  2 001536   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 001537   000000 701000 xent               TSX1    INIT1
         2 001540   000000 011000                    NOP     0

      978    11358    1           CALL INITP;                     /* Init PPUT                          */

  11358  2 001541   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 001542   000000 701000 xent               TSX1    INITP
         2 001543   000000 011000                    NOP     0

      979    11359    1           CALL INITX;

  11359  2 001544   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 001545   000000 701000 xent               TSX1    INITX
         2 001546   000000 011000                    NOP     0

      980    11360    1           MONSSR_PTR='0'B;

  11360  2 001547   200047 450100                    STZ     MONSSR$,,AUTO

      981    11361    1           MONSSR_PTR.S_D_FIELD=%ALS_MONSSR; /* Frame MON SSR                    */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:158  

  11361  2 001550   006146 236007                    LDQ     3174,DL
         2 001551   200047 752103                    STCQ    MONSSR$,'03'O,AUTO

      982    11362    1           INFOX_PTR='0'B;

  11362  2 001552   200061 450100                    STZ     INFOX$,,AUTO

      983    11363    1           INFOX_PTR.S_D_FIELD=%ALS_MONIS; /* Frame MON ISR                      */

  11363  2 001553   006050 236007                    LDQ     3112,DL
         2 001554   200061 752103                    STCQ    INFOX$,'03'O,AUTO

      984    11364        /* Establish CPU type and mode */
      985    11365    1           WMON$=ADDR(HW_TYPE);

  11365  2 001555   000110 236000 3                  LDQ     72
         2 001556   200050 756100                    STQ     WMON$,,AUTO

      986    11366        /* RPM           - HW_TYPE is 6                 */
      987    11367        /* DP90 with XA  - HW_TYPE is 5                 */
      988    11368        /* DPS90 basic   - HW_TYPE is 4                 */
      989    11369        /* all others    - HW_TYPE is 0                 */
      990    11370    2           IF S1000_FLG THEN DO;

  11370  2 001557   000000 234000 xsym               SZN     S1000_FLG
         2 001560   001575 605000 2                  TPL     s:11376

      991    11371    2                 IF XA_MODE THEN PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN = 5;

  11371  2 001561   000000 234000 xsym               SZN     XA_MODE
         2 001562   001570 605000 2                  TPL     s:11373

  11371  2 001563   000005 235007                    LDA     5,DL
         2 001564   200061 470500                    LDP0    INFOX$,,AUTO
         2 001565   200050 220100                    LDX0    WMON$,,AUTO
         2 001566   000000 755110                    STA     0,X0,PR0
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:159  
         2 001567   001607 710000 2                  TRA     s:11379

      992    11372    2                   ELSE
      993    11373    2                   PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN = 4;

  11373  2 001570   000004 235007                    LDA     4,DL
         2 001571   200061 470500                    LDP0    INFOX$,,AUTO
         2 001572   200050 220100                    LDX0    WMON$,,AUTO
         2 001573   000000 755110                    STA     0,X0,PR0

      994    11374    2               END;

  11374  2 001574   001607 710000 2                  TRA     s:11379

      995    11375    1             ELSE
      996    11376    1             IF RPM_FLG THEN

  11376  2 001575   000000 234000 xsym               SZN     RPM_FLG
         2 001576   001604 605000 2                  TPL     s:11378

      997    11377    1               PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN = 6;

  11377  2 001577   000006 235007                    LDA     6,DL
         2 001600   200061 470500                    LDP0    INFOX$,,AUTO
         2 001601   200050 220100                    LDX0    WMON$,,AUTO
         2 001602   000000 755110                    STA     0,X0,PR0
         2 001603   001607 710000 2                  TRA     s:11379

      998    11378    1               ELSE PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN = 0;

  11378  2 001604   200061 470500                    LDP0    INFOX$,,AUTO
         2 001605   200050 220100                    LDX0    WMON$,,AUTO
         2 001606   000000 450110                    STZ     0,X0,PR0

      999    11379    1           WMON$=ADDR(IT_UFLG);

  11379  2 001607   000111 236000 3                  LDQ     73
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:160  
         2 001610   200050 756100                    STQ     WMON$,,AUTO

     1000    11380    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=UFLG;
             11380                    /* Set users allowed flag for TIGR */

  11380  2 001611   200050 220100                    LDX0    WMON$,,AUTO
         2 001612   000640 235000 0                  LDA     UFLG
         2 001613   000000 755110                    STA     0,X0,PR0

     1001    11381    1           WMON$=ADDR(IT_AAFAULT);

  11381  2 001614   000112 236000 3                  LDQ     74
         2 001615   200050 756100                    STQ     WMON$,,AUTO

     1002    11382    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_DESCR=TGRDESC;
             11382                    /* Set entry descriptor for TIGR */

  11382  2 001616   200050 235100                    LDA     WMON$,,AUTO
         2 001617   777777 375003                    ANA     -1,DU
         2 001620   000020 771000                    ARL     16
         2 001621   000105 100400                    MLR     fill='000'O
         2 001622   000000 000010 xsym               ADSC9   TGRDESC                  cn=0,n=8
         2 001623   000000 000010                    ADSC9   0,A,PR0                  cn=0,n=8

     1003    11383    1           WMON$=ADDR(IT_XDELTA);

  11383  2 001624   000113 236000 3                  LDQ     75
         2 001625   200050 756100                    STQ     WMON$,,AUTO

     1004    11384    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=0; /* Assume keeping XDELTA   */

  11384  2 001626   200050 220100                    LDX0    WMON$,,AUTO
         2 001627   000000 450110                    STZ     0,X0,PR0

     1005    11385        /* Size of XDELTA */
     1006    11386    1           WMON$=ADDR(MM_XDEL);

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:161  
  11386  2 001630   000114 236000 3                  LDQ     76
         2 001631   200050 756100                    STQ     WMON$,,AUTO

     1007    11387    1          PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=(HDRMH.BASE-HDRXLS.BASE+1023)/1024+(
             11387                    HDRGR.BASE-HDRME.BASE+1023)/1024;

  11387  2 001632   000400 236000 0                  LDQ     HDRMH
         2 001633   000370 136000 0                  SBLQ    HDRXLS
         2 001634   001777 036007                    ADLQ    1023,DL
         2 001635   002000 506007                    DIV     1024,DL
         2 001636   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001637   000434 236000 0                  LDQ     HDRGR
         2 001640   000414 136000 0                  SBLQ    HDRME
         2 001641   001777 036007                    ADLQ    1023,DL
         2 001642   002000 506007                    DIV     1024,DL
         2 001643   200072 036100                    ADLQ    BOOT$+4,,AUTO
         2 001644   200050 220100                    LDX0    WMON$,,AUTO
         2 001645   000000 756110                    STQ     0,X0,PR0

     1008    11388    1           WMON$=ADDR(MM_FPPH);            /* Head of free page chain            */

  11388  2 001646   000115 236000 3                  LDQ     77
         2 001647   200050 756100                    STQ     WMON$,,AUTO

     1009    11389    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=NAVPG/1024;

  11389  2 001650   000000 236000 xsym               LDQ     NAVPG
         2 001651   000012 772000                    QRL     10
         2 001652   200050 220100                    LDX0    WMON$,,AUTO
         2 001653   000000 756110                    STQ     0,X0,PR0

     1010    11390    2           IF RPM_FLG THEN DO;

  11390  2 001654   000000 234000 xsym               SZN     RPM_FLG
         2 001655   002054 605000 2                  TPL     s:11430

     1011    11391    2                 WMON$=ADDR(H_DPS8000_CONFIG_NAME); /* 8000 CONFIG NAME          */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:162  

  11391  2 001656   000116 236000 3                  LDQ     78
         2 001657   200050 756100                    STQ     WMON$,,AUTO

     1012    11392    2                 PINCRW(INFOX$,WMON_PTR.WOFFS)->BASED$CHAR = IS_CFG_NAME;

  11392  2 001660   200050 235100                    LDA     WMON$,,AUTO
         2 001661   777777 375003                    ANA     -1,DU
         2 001662   000020 771000                    ARL     16
         2 001663   040105 100400                    MLR     fill='040'O
         2 001664   000000 000014 xsym               ADSC9   IS_CFG_NAME              cn=0,n=12
         2 001665   000000 000014                    ADSC9   0,A,PR0                  cn=0,n=12

     1013    11393    2                 WMON$=ADDR(H_DPS8000_SCU_INFO); /* 8000 SCU information         */

  11393  2 001666   000117 236000 3                  LDQ     79
         2 001667   200050 756100                    STQ     WMON$,,AUTO

     1014    11394    2                 PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO = '0'B;

  11394  2 001670   200050 236100                    LDQ     WMON$,,AUTO
         2 001671   000022 772000                    QRL     18
         2 001672   000044 402007                    MPY     36,DL
         2 001673   003106 060400                    CSL     bolr='003'O
         2 001674   000002 000011 xsym               BDSC    B_VECTNIL+2              by=0,bit=0,n=9
         2 001675   000000 000220                    BDSC    0,Q,PR0                  by=0,bit=0,n=144

     1015    11395    3                 IF ((IS_CFG_TYPE = %IS_CFG_MULT_CAB_REL#) AND IS_CSP_SIDE1) OR
             11395                          IS_MEM_SIDE1 THEN DO;

  11395  2 001676   000000 235000 xsym               LDA     IS_CFG_TYPE
         2 001677   000002 115007                    CMPA    2,DL
         2 001700   001703 601000 2                  TNZ     s:11395+5
         2 001701   000000 234000 xsym               SZN     IS_CSP_SIDE1
         2 001702   001705 604000 2                  TMI     s:11396
         2 001703   000000 234000 xsym               SZN     IS_MEM_SIDE1
         2 001704   001751 605000 2                  TPL     s:11405
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:163  

     1016    11396    3                      PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.LBND(1)= LOWER_SCU.LB;

  11396  2 001705   003106 061400                    CSR     bolr='003'O
         2 001706   000000 000044 xsym               BDSC    LOWER_SCU                by=0,bit=0,n=36
         2 001707   000002 000022                    BDSC    2,Q,PR0                  by=0,bit=0,n=18

     1017    11397    3                      PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.UBND(1)= LOWER_SCU.UB;

  11397  2 001710   003106 061400                    CSR     bolr='003'O
         2 001711   000001 000044 xsym               BDSC    LOWER_SCU+1              by=0,bit=0,n=36
         2 001712   000002 400022                    BDSC    2,Q,PR0                  by=2,bit=0,n=18

     1018    11398    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.PAGES(1) = LOWER_SCU.
             11398                                UB - LOWER_SCU.LB + 1;

  11398  2 001713   000001 236000 xsym               LDQ     LOWER_SCU+1
         2 001714   000000 136000 xsym               SBLQ    LOWER_SCU
         2 001715   000001 036007                    ADLQ    1,DL
         2 001716   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001717   200050 236100                    LDQ     WMON$,,AUTO
         2 001720   000022 772000                    QRL     18
         2 001721   000044 402007                    MPY     36,DL
         2 001722   003106 061500                    CSR     bolr='003'O
         2 001723   200072 000044                    BDSC    BOOT$+4,,AUTO            by=0,bit=0,n=36
         2 001724   000003 000022                    BDSC    3,Q,PR0                  by=0,bit=0,n=18

     1019    11399    3                      PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.LBND(0)= UPPER_SCU.LB;

  11399  2 001725   003106 061400                    CSR     bolr='003'O
         2 001726   000000 000044 xsym               BDSC    UPPER_SCU                by=0,bit=0,n=36
         2 001727   000000 000022                    BDSC    0,Q,PR0                  by=0,bit=0,n=18

     1020    11400    3                      PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.UBND(0)= UPPER_SCU.UB;

  11400  2 001730   003106 061400                    CSR     bolr='003'O
         2 001731   000001 000044 xsym               BDSC    UPPER_SCU+1              by=0,bit=0,n=36
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:164  
         2 001732   000000 400022                    BDSC    0,Q,PR0                  by=2,bit=0,n=18

     1021    11401    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.PAGES(0) = UPPER_SCU.
             11401                                UB - UPPER_SCU.LB + 1;

  11401  2 001733   000001 236000 xsym               LDQ     UPPER_SCU+1
         2 001734   000000 136000 xsym               SBLQ    UPPER_SCU
         2 001735   000001 036007                    ADLQ    1,DL
         2 001736   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001737   200050 236100                    LDQ     WMON$,,AUTO
         2 001740   000022 772000                    QRL     18
         2 001741   000044 402007                    MPY     36,DL
         2 001742   003106 061500                    CSR     bolr='003'O
         2 001743   200072 000044                    BDSC    BOOT$+4,,AUTO            by=0,bit=0,n=36
         2 001744   000001 000022                    BDSC    1,Q,PR0                  by=0,bit=0,n=18

     1022    11402    3                      PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.STATUS.LMEM(1) = '1'B;

  11402  2 001745   003106 060400                    CSL     bolr='003'O
         2 001746   000030 000001 xsym               BDSC    B_VECTNIL+24             by=0,bit=0,n=1
         2 001747   000003 440001                    BDSC    3,Q,PR0                  by=2,bit=4,n=1

     1023    11403    3                     END;

  11403  2 001750   002014 710000 2                  TRA     s:11413

     1024    11404    3                   ELSE DO;

     1025    11405    3                      PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.LBND(0)= LOWER_SCU.LB;

  11405  2 001751   003106 061400                    CSR     bolr='003'O
         2 001752   000000 000044 xsym               BDSC    LOWER_SCU                by=0,bit=0,n=36
         2 001753   000000 000022                    BDSC    0,Q,PR0                  by=0,bit=0,n=18

     1026    11406    3                      PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.UBND(0)= LOWER_SCU.UB;

  11406  2 001754   003106 061400                    CSR     bolr='003'O
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:165  
         2 001755   000001 000044 xsym               BDSC    LOWER_SCU+1              by=0,bit=0,n=36
         2 001756   000000 400022                    BDSC    0,Q,PR0                  by=2,bit=0,n=18

     1027    11407    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.PAGES(0) = LOWER_SCU.
             11407                                UB - LOWER_SCU.LB + 1;

  11407  2 001757   000001 236000 xsym               LDQ     LOWER_SCU+1
         2 001760   000000 136000 xsym               SBLQ    LOWER_SCU
         2 001761   000001 036007                    ADLQ    1,DL
         2 001762   200072 756100                    STQ     BOOT$+4,,AUTO
         2 001763   200050 236100                    LDQ     WMON$,,AUTO
         2 001764   000022 772000                    QRL     18
         2 001765   000044 402007                    MPY     36,DL
         2 001766   003106 061500                    CSR     bolr='003'O
         2 001767   200072 000044                    BDSC    BOOT$+4,,AUTO            by=0,bit=0,n=36
         2 001770   000001 000022                    BDSC    1,Q,PR0                  by=0,bit=0,n=18

     1028    11408    3                      PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.LBND(1)= UPPER_SCU.LB;

  11408  2 001771   003106 061400                    CSR     bolr='003'O
         2 001772   000000 000044 xsym               BDSC    UPPER_SCU                by=0,bit=0,n=36
         2 001773   000002 000022                    BDSC    2,Q,PR0                  by=0,bit=0,n=18

     1029    11409    3                      PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.UBND(1)= UPPER_SCU.UB;

  11409  2 001774   003106 061400                    CSR     bolr='003'O
         2 001775   000001 000044 xsym               BDSC    UPPER_SCU+1              by=0,bit=0,n=36
         2 001776   000002 400022                    BDSC    2,Q,PR0                  by=2,bit=0,n=18

     1030    11410    3                       PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.PAGES(1) = UPPER_SCU.
             11410                                UB - UPPER_SCU.LB + 1;

  11410  2 001777   000001 236000 xsym               LDQ     UPPER_SCU+1
         2 002000   000000 136000 xsym               SBLQ    UPPER_SCU
         2 002001   000001 036007                    ADLQ    1,DL
         2 002002   200072 756100                    STQ     BOOT$+4,,AUTO
         2 002003   200050 236100                    LDQ     WMON$,,AUTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:166  
         2 002004   000022 772000                    QRL     18
         2 002005   000044 402007                    MPY     36,DL
         2 002006   003106 061500                    CSR     bolr='003'O
         2 002007   200072 000044                    BDSC    BOOT$+4,,AUTO            by=0,bit=0,n=36
         2 002010   000003 000022                    BDSC    3,Q,PR0                  by=0,bit=0,n=18

     1031    11411    3                      PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.STATUS.LMEM(0) = '1'B;

  11411  2 002011   003106 060400                    CSL     bolr='003'O
         2 002012   000030 000001 xsym               BDSC    B_VECTNIL+24             by=0,bit=0,n=1
         2 002013   000001 440001                    BDSC    1,Q,PR0                  by=2,bit=4,n=1

     1032    11412    3                     END;

     1033    11413    3                 DO CASE (IS_CFG_TYPE);

  11413  2 002014   000000 235000 xsym               LDA     IS_CFG_TYPE
         2 002015   000003 115007                    CMPA    3,DL
         2 002016   002020 602005 2                  TNC     s:11413+4,AL
         2 002017   002054 710000 2                  TRA     s:11430
         2 002020   002023 710000 2                  TRA     s:11415
         2 002021   002054 710000 2                  TRA     s:11430
         2 002022   002043 710000 2                  TRA     s:11424

     1034    11414    3                   CASE(%IS_CFG_SINGLE_CAB#);

     1035    11415    4                     IF IS_CSP_SIDE1 THEN DO;

  11415  2 002023   000000 234000 xsym               SZN     IS_CSP_SIDE1
         2 002024   002034 605000 2                  TPL     s:11420

     1036    11416    4                           PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.STATUS.NCONF(0) =
             11416                                    '1'B;

  11416  2 002025   003106 060400                    CSL     bolr='003'O
         2 002026   000030 000001 xsym               BDSC    B_VECTNIL+24             by=0,bit=0,n=1
         2 002027   000001 400001                    BDSC    1,Q,PR0                  by=2,bit=0,n=1
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:167  

     1037    11417    4                           PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.PAGES(0) = 0;

  11417  2 002030   003106 061400                    CSR     bolr='003'O
         2 002031   000002 000044 xsym               BDSC    B_VECTNIL+2              by=0,bit=0,n=36
         2 002032   000001 000022                    BDSC    1,Q,PR0                  by=0,bit=0,n=18

     1038    11418    4                         END;

  11418  2 002033   002054 710000 2                  TRA     s:11430

     1039    11419    4                       ELSE DO;

     1040    11420    4                           PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.STATUS.NCONF(1) =
             11420                                    '1'B;

  11420  2 002034   003106 060400                    CSL     bolr='003'O
         2 002035   000030 000001 xsym               BDSC    B_VECTNIL+24             by=0,bit=0,n=1
         2 002036   000003 400001                    BDSC    3,Q,PR0                  by=2,bit=0,n=1

     1041    11421    4                           PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.PAGES(1) = 0;

  11421  2 002037   003106 061400                    CSR     bolr='003'O
         2 002040   000002 000044 xsym               BDSC    B_VECTNIL+2              by=0,bit=0,n=36
         2 002041   000003 000022                    BDSC    3,Q,PR0                  by=0,bit=0,n=18

     1042    11422    4                         END;

  11422  2 002042   002054 710000 2                  TRA     s:11430

     1043    11423    3                   CASE(%IS_CFG_MULT_CAB_REL#);

     1044    11424    3                     IF IS_CSP_SIDE1 THEN

  11424  2 002043   000000 234000 xsym               SZN     IS_CSP_SIDE1
         2 002044   002051 605000 2                  TPL     s:11427

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:168  
     1045    11425    3                      PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.STATUS.RBIT(0) = '1'B;

  11425  2 002045   003106 060400                    CSL     bolr='003'O
         2 002046   000030 000001 xsym               BDSC    B_VECTNIL+24             by=0,bit=0,n=1
         2 002047   000001 410001                    BDSC    1,Q,PR0                  by=2,bit=1,n=1
         2 002050   002054 710000 2                  TRA     s:11430

     1046    11426    3                       ELSE
     1047    11427    3                      PINCRW(INFOX$,WMON_PTR.WOFFS)->H_SCU_INFO.STATUS.RBIT(1) = '1'B;

  11427  2 002051   003106 060400                    CSL     bolr='003'O
         2 002052   000030 000001 xsym               BDSC    B_VECTNIL+24             by=0,bit=0,n=1
         2 002053   000003 410001                    BDSC    3,Q,PR0                  by=2,bit=1,n=1

     1048    11428    3                 END;

     1049    11429    2               END;

     1050    11430    1           WMON$=ADDR(MM_FPPT);            /* Tail of free page chain            */

  11430  2 002054   000120 236000 3                  LDQ     80
         2 002055   200050 756100                    STQ     WMON$,,AUTO

     1051    11431    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=HIAVPG;

  11431  2 002056   200050 220100                    LDX0    WMON$,,AUTO
         2 002057   000000 235000 xsym               LDA     HIAVPG
         2 002060   000000 755110                    STA     0,X0,PR0

     1052    11432    1           WMON$=ADDR(MM_PCORE);           /* Total real memory                  */

  11432  2 002061   000121 236000 3                  LDQ     81
         2 002062   200050 756100                    STQ     WMON$,,AUTO

     1053    11433    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=HIPAGE;

  11433  2 002063   200050 220100                    LDX0    WMON$,,AUTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:169  
         2 002064   000000 235000 xsym               LDA     HIPAGE
         2 002065   000000 755110                    STA     0,X0,PR0

     1054    11434    1           WMON$=ADDR(MM_GAPSZ);

  11434  2 002066   000122 236000 3                  LDQ     82
         2 002067   200050 756100                    STQ     WMON$,,AUTO

     1055    11435    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=GAP_SZ;

  11435  2 002070   200050 220100                    LDX0    WMON$,,AUTO
         2 002071   000000 235000 xsym               LDA     GAP_SZ
         2 002072   000000 755110                    STA     0,X0,PR0

     1056    11436    1           IF IS_CFG_TYPE = %IS_CFG_MULT_CAB_REL# THEN

  11436  2 002073   000000 235000 xsym               LDA     IS_CFG_TYPE
         2 002074   000002 115007                    CMPA    2,DL
         2 002075   002106 601000 2                  TNZ     s:11439

     1057    11437    1             FREE_PG_COUNT = HIAVPG-NAVPG/1024 + 1;

  11437  2 002076   000000 236000 xsym               LDQ     NAVPG
         2 002077   000012 772000                    QRL     10
         2 002100   200072 756100                    STQ     BOOT$+4,,AUTO
         2 002101   000000 236000 xsym               LDQ     HIAVPG
         2 002102   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 002103   000001 036007                    ADLQ    1,DL
         2 002104   200045 756100                    STQ     FREE_PG_COUNT,,AUTO
         2 002105   002116 710000 2                  TRA     s:11441

     1058    11438    1             ELSE
     1059    11439    1             FREE_PG_COUNT=HIAVPG-NAVPG/1024-GAP_SZ+1;

  11439  2 002106   000000 236000 xsym               LDQ     NAVPG
         2 002107   000012 772000                    QRL     10
         2 002110   200072 756100                    STQ     BOOT$+4,,AUTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:170  
         2 002111   000000 236000 xsym               LDQ     HIAVPG
         2 002112   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 002113   000000 136000 xsym               SBLQ    GAP_SZ
         2 002114   000001 036007                    ADLQ    1,DL
         2 002115   200045 756100                    STQ     FREE_PG_COUNT,,AUTO

     1060    11440        /* Free XDELTA and FW pages */
     1061    11441    2           IF RCV_FLG='0'B THEN DO;

  11441  2 002116   000000 236000 xsym               LDQ     RCV_FLG
         2 002117   740000 316003                    CANQ    -16384,DU
         2 002120   002133 601000 2                  TNZ     s:11446

     1062    11442    2                 IF ADPXF.X='0'B THEN CALL FREEXD(FREE_PG_COUNT);

  11442  2 002121   000000 236000 xsym               LDQ     ADPXF
         2 002122   040000 316003                    CANQ    16384,DU
         2 002123   002143 601000 2                  TNZ     s:11449

  11442  2 002124   200045 631500                    EPPR1   FREE_PG_COUNT,,AUTO
         2 002125   200072 451500                    STP1    BOOT$+4,,AUTO
         2 002126   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 002127   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 002130   000000 701000 xent               TSX1    FREEXD
         2 002131   000000 011000                    NOP     0

     1063    11443    2                   ELSE;
     1064    11444    2               END;                        /* THEN                               */

  11444  2 002132   002143 710000 2                  TRA     s:11449

     1065    11445    2             ELSE DO;

     1066    11446    2                 IF XDFLAG=0 THEN CALL FREEXD(FREE_PG_COUNT);

  11446  2 002133   000000 235000 xsym               LDA     XDFLAG
         2 002134   002143 601000 2                  TNZ     s:11449
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:171  

  11446  2 002135   200045 631500                    EPPR1   FREE_PG_COUNT,,AUTO
         2 002136   200072 451500                    STP1    BOOT$+4,,AUTO
         2 002137   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 002140   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 002141   000000 701000 xent               TSX1    FREEXD
         2 002142   000000 011000                    NOP     0

     1067    11447    2                   ELSE;
     1068    11448    2               END;                        /* ELSE                               */

     1069    11449    1          IF S1000_FLG='0'B THEN CALL FREEFW(FREE_PG_COUNT); /* Free firmware pages */

  11449  2 002143   000000 234000 xsym               SZN     S1000_FLG
         2 002144   002153 604000 2                  TMI     s:11450

  11449  2 002145   200045 630500                    EPPR0   FREE_PG_COUNT,,AUTO
         2 002146   200072 450500                    STP0    BOOT$+4,,AUTO
         2 002147   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 002150   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 002151   000000 701000 xent               TSX1    FREEFW
         2 002152   000000 011000                    NOP     0

     1070    11450    1           CALL FREETABLES(FREE_PG_COUNT); /* Free PPUT and reverse map pages    */

  11450  2 002153   200045 630500                    EPPR0   FREE_PG_COUNT,,AUTO
         2 002154   200072 450500                    STP0    BOOT$+4,,AUTO
         2 002155   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 002156   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 002157   000000 701000 xent               TSX1    FREETABLES
         2 002160   000000 011000                    NOP     0

     1071    11451    1           WMON$=ADDR(MM_FPPC);            /* Free pages chain count             */

  11451  2 002161   000123 236000 3                  LDQ     83
         2 002162   200050 756100                    STQ     WMON$,,AUTO

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:172  
     1072    11452    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=FREE_PG_COUNT;

  11452  2 002163   200061 470500                    LDP0    INFOX$,,AUTO
         2 002164   200050 220100                    LDX0    WMON$,,AUTO
         2 002165   200045 235100                    LDA     FREE_PG_COUNT,,AUTO
         2 002166   000000 755110                    STA     0,X0,PR0

     1073    11453    1           WMON$=ADDR(MM_AARD);            /* Nr of pages for AARDVARK           */

  11453  2 002167   000124 236000 3                  LDQ     84
         2 002170   200050 756100                    STQ     WMON$,,AUTO

     1074    11454    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=HDRAAR.SIZE/1024;

  11454  2 002171   000366 236000 0                  LDQ     HDRAAR+2
         2 002172   000012 772000                    QRL     10
         2 002173   200050 220100                    LDX0    WMON$,,AUTO
         2 002174   000000 756110                    STQ     0,X0,PR0

     1075    11455    1           AALS.MONLSR=MONSSR$->B$SS.LSR;  /* Mon LS descriptor                  */

  11455  2 002175   200047 471500                    LDP1    MONSSR$,,AUTO
         2 002176   100014 237100                    LDAQ    12,,PR1
         2 002177   000000 473400 0                  LDP3    AALS$
         2 002200   300004 757100                    STAQ    4,,PR3

     1076    11456    1           G1HJIT_PTR='0'B;

  11456  2 002201   200003 450100                    STZ     G1HJIT$,,AUTO

     1077    11457    1           G1HJIT_PTR.S_D_FIELD=%ALS_HJIT1; /* Frame Ghost1 HJIT                 */

  11457  2 002202   006054 236007                    LDQ     3116,DL
         2 002203   200003 752103                    STCQ    G1HJIT$,'03'O,AUTO

     1078    11458    1           G1HJIT.SSS.FRAME2.IC=HDRGP.START; /* Start address of Ghost1->SSR frame */

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:173  
  11458  2 002204   000447 721000 0                  LXL1    HDRGP+3
         2 002205   200003 474500                    LDP4    G1HJIT$,,AUTO
         2 002206   400504 741100                    STX1    324,,PR4

     1079    11459    1           MONSSR$->B$SS.IC=HDRMP0.START;  /* Mon start address-> SSR frame      */

  11459  2 002207   000413 722000 0                  LXL2    HDRMP0+3
         2 002210   100004 742100                    STX2    4,,PR1

     1080    11460        /* Build PO tape and System disk information */
     1081    11461    1           FM_INFO.PORT=IOMTAB.PORT#(DEVINFO.IOM#(PO_INDX));

  11461  2 002211   000000 236000 xsym               LDQ     PO_INDX
         2 002212   000014 402007                    MPY     12,DL
         2 002213   000000 236006 xsym               LDQ     DEVINFO,QL
         2 002214   000023 772000                    QRL     19
         2 002215   000003 376007                    ANQ     3,DL
         2 002216   000000 236006 xsym               LDQ     IOMTAB,QL
         2 002217   000007 376007                    ANQ     7,DL
         2 002220   000033 736000                    QLS     27
         2 002221   200046 552140                    STBQ    FM_INFO,'40'O,AUTO

     1082    11462    1           FM_INFO.DVN=DEVINFO.DEV#(PO_INDX);

  11462  2 002222   000000 236000 xsym               LDQ     PO_INDX
         2 002223   000014 402007                    MPY     12,DL
         2 002224   000000 236006 xsym               LDQ     DEVINFO,QL
         2 002225   000770 376003                    ANQ     504,DU
         2 002226   000014 772000                    QRL     12
         2 002227   200046 552110                    STBQ    FM_INFO,'10'O,AUTO

     1083    11463    1           FM_INFO.CHN=DEVINFO.CHN#(PO_INDX);

  11463  2 002230   000000 236000 xsym               LDQ     PO_INDX
         2 002231   000014 402007                    MPY     12,DL
         2 002232   000000 236006 xsym               LDQ     DEVINFO,QL
         2 002233   000011 772000                    QRL     9
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:174  
         2 002234   200046 552120                    STBQ    FM_INFO,'20'O,AUTO

     1084    11464    1           WMON$=ADDR(FM_POTAPE);

  11464  2 002235   000125 236000 3                  LDQ     85
         2 002236   200050 756100                    STQ     WMON$,,AUTO

     1085    11465    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->HBAS_UBIN=FM_INFO;

  11465  2 002237   200046 236100                    LDQ     FM_INFO,,AUTO
         2 002240   200050 220100                    LDX0    WMON$,,AUTO
         2 002241   000000 756110                    STQ     0,X0,PR0

     1086    11466    1           FM_INFO.PORT=IOMTAB.PORT#(DEVINFO.IOM#(SYS_DPX));

  11466  2 002242   000000 236000 xsym               LDQ     SYS_DPX
         2 002243   000014 402007                    MPY     12,DL
         2 002244   000000 236006 xsym               LDQ     DEVINFO,QL
         2 002245   000023 772000                    QRL     19
         2 002246   000003 376007                    ANQ     3,DL
         2 002247   000000 236006 xsym               LDQ     IOMTAB,QL
         2 002250   000007 376007                    ANQ     7,DL
         2 002251   000033 736000                    QLS     27
         2 002252   200046 552140                    STBQ    FM_INFO,'40'O,AUTO

     1087    11467    1           FM_INFO.DVN=DEVINFO.DEV#(SYS_DPX);

  11467  2 002253   000000 236000 xsym               LDQ     SYS_DPX
         2 002254   000014 402007                    MPY     12,DL
         2 002255   000000 236006 xsym               LDQ     DEVINFO,QL
         2 002256   000770 376003                    ANQ     504,DU
         2 002257   000014 772000                    QRL     12
         2 002260   200046 552110                    STBQ    FM_INFO,'10'O,AUTO

     1088    11468    1           FM_INFO.CHN=DEVINFO.CHN#(SYS_DPX);

  11468  2 002261   000000 236000 xsym               LDQ     SYS_DPX
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:175  
         2 002262   000014 402007                    MPY     12,DL
         2 002263   000000 236006 xsym               LDQ     DEVINFO,QL
         2 002264   000011 772000                    QRL     9
         2 002265   200046 552120                    STBQ    FM_INFO,'20'O,AUTO

     1089    11469    1           WMON$=ADDR(FM_SYSDP);

  11469  2 002266   000126 236000 3                  LDQ     86
         2 002267   200050 756100                    STQ     WMON$,,AUTO

     1090    11470    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->HBAS_UBIN=FM_INFO;

  11470  2 002270   200046 236100                    LDQ     FM_INFO,,AUTO
         2 002271   200050 220100                    LDX0    WMON$,,AUTO
         2 002272   000000 756110                    STQ     0,X0,PR0

     1091    11471    1           IF RPM_FLG THEN

  11471  2 002273   000000 234000 xsym               SZN     RPM_FLG
         2 002274   002300 605000 2                  TPL     s:11473

     1092    11472    1             CALL CLEAR_RIW;

  11472  2 002275   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 002276   000000 701000 xent               TSX1    CLEAR_RIW
         2 002277   000000 011000                    NOP     0

     1093    11473    1           CALL ITIG;

  11473  2 002300   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 002301   000000 701000 xent               TSX1    ITIG
         2 002302   000000 011000                    NOP     0

     1094    11474    1           WMON$=ADDR(IT_BOOTFLAG);

  11474  2 002303   000127 236000 3                  LDQ     87
         2 002304   200050 756100                    STQ     WMON$,,AUTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:176  

     1095    11475    1           IF VOFLG='1'B THEN BOOTCODE=%I_VOLONLY; /* Volinit                    */

  11475  2 002305   000000 234000 xsym               SZN     VOFLG
         2 002306   002312 605000 2                  TPL     s:11477

  11475  2 002307   000001 235007                    LDA     1,DL
         2 002310   200043 755100                    STA     BOOTCODE,,AUTO
         2 002311   002403 710000 2                  TRA     s:11499

     1096    11476    2             ELSE DO;

     1097    11477    3                 IF RCV_FLG='0'B THEN DO CASE(UNF_FLG); /* TB                    */

  11477  2 002312   000000 236000 xsym               LDQ     RCV_FLG
         2 002313   740000 316003                    CANQ    -16384,DU
         2 002314   002350 601000 2                  TNZ     s:11489

  11477  2 002315   000000 236000 xsym               LDQ     NF_FLG
         2 002316   000041 772000                    QRL     33
         2 002317   000007 116007                    CMPQ    7,DL
         2 002320   002322 602006 2                  TNC     s:11477+8,QL
         2 002321   002403 710000 2                  TRA     s:11499
         2 002322   002331 710000 2                  TRA     s:11479
         2 002323   002334 710000 2                  TRA     s:11481
         2 002324   002337 710000 2                  TRA     s:11483
         2 002325   002347 710000 2                  TRA     s:11488
         2 002326   002347 710000 2                  TRA     s:11488
         2 002327   002342 710000 2                  TRA     s:11485
         2 002330   002345 710000 2                  TRA     s:11487

     1098    11478    3                       CASE(0);            /* New files                          */

     1099    11479    3                         BOOTCODE=%I_NEWFILES;

  11479  2 002331   000002 235007                    LDA     2,DL
         2 002332   200043 755100                    STA     BOOTCODE,,AUTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:177  
         2 002333   002403 710000 2                  TRA     s:11499

     1100    11480    3                       CASE(1);            /* Sysfiles,Norecon                   */

     1101    11481    3                         BOOTCODE=%I_SYSFILES;

  11481  2 002334   000003 235007                    LDA     3,DL
         2 002335   200043 755100                    STA     BOOTCODE,,AUTO
         2 002336   002403 710000 2                  TRA     s:11499

     1102    11482    3                       CASE(2);            /* Nofiles,Norecon                    */

     1103    11483    3                         BOOTCODE=%I_NOFILES;

  11483  2 002337   000004 235007                    LDA     4,DL
         2 002340   200043 755100                    STA     BOOTCODE,,AUTO
         2 002341   002403 710000 2                  TRA     s:11499

     1104    11484    3                       CASE(5);            /* Sysfiles,Recon                     */

     1105    11485    3                         BOOTCODE=%I_SYSFILES_RECON;

  11485  2 002342   000005 235007                    LDA     5,DL
         2 002343   200043 755100                    STA     BOOTCODE,,AUTO
         2 002344   002403 710000 2                  TRA     s:11499

     1106    11486    3                       CASE(6);            /* Nofiles,Recon                      */

     1107    11487    3                         BOOTCODE=%I_NOFILES_RECON;

  11487  2 002345   000006 235007                    LDA     6,DL
         2 002346   200043 755100                    STA     BOOTCODE,,AUTO

     1108    11488    3                     END;                  /* THEN DO CASE                       */

  11488  2 002347   002403 710000 2                  TRA     s:11499

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:178  
     1109    11489    3                   ELSE DO CASE(URCV_FLG); /* DB,OR                              */

  11489  2 002350   000000 236000 xsym               LDQ     RCV_FLG
         2 002351   000040 772000                    QRL     32
         2 002352   000011 116007                    CMPQ    9,DL
         2 002353   002355 602006 2                  TNC     s:11489+5,QL
         2 002354   002374 710000 2                  TRA     s:11495
         2 002355   002374 710000 2                  TRA     s:11495
         2 002356   002371 710000 2                  TRA     s:11493
         2 002357   002374 710000 2                  TRA     s:11495
         2 002360   002374 710000 2                  TRA     s:11495
         2 002361   002374 710000 2                  TRA     s:11495
         2 002362   002374 710000 2                  TRA     s:11495
         2 002363   002374 710000 2                  TRA     s:11495
         2 002364   002374 710000 2                  TRA     s:11495
         2 002365   002366 710000 2                  TRA     s:11491

     1110    11490    3                       CASE(8);            /* OR at tape boot                    */

     1111    11491    3                         BOOTCODE=%I_OPRECOVRY;

  11491  2 002366   000013 235007                    LDA     11,DL
         2 002367   200043 755100                    STA     BOOTCODE,,AUTO
         2 002370   002403 710000 2                  TRA     s:11499

     1112    11492    3                       CASE(1);            /* Recovery                           */

     1113    11493    3                         BOOTCODE=%I_RECOVERY;

  11493  2 002371   000011 235007                    LDA     9,DL
         2 002372   200043 755100                    STA     BOOTCODE,,AUTO
         2 002373   002403 710000 2                  TRA     s:11499

     1114    11494    3                       CASE(ELSE);

     1115    11495    3                         IF NF_FLG.RECON='1'B THEN BOOTCODE=%I_DISKBOOT_RECON;

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:179  
  11495  2 002374   000000 234000 xsym               SZN     NF_FLG
         2 002375   002401 605000 2                  TPL     s:11496

  11495  2 002376   000010 235007                    LDA     8,DL
         2 002377   200043 755100                    STA     BOOTCODE,,AUTO
         2 002400   002403 710000 2                  TRA     s:11499

     1116    11496    3                           ELSE BOOTCODE=%I_DISKBOOT;

  11496  2 002401   000007 235007                    LDA     7,DL
         2 002402   200043 755100                    STA     BOOTCODE,,AUTO

     1117    11497    3                     END;                  /* ELSE  DO CASE                      */

     1118    11498    2               END;                        /* ELSE                               */

     1119    11499    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=BOOTCODE;

  11499  2 002403   200061 470500                    LDP0    INFOX$,,AUTO
         2 002404   200050 220100                    LDX0    WMON$,,AUTO
         2 002405   200043 235100                    LDA     BOOTCODE,,AUTO
         2 002406   000000 755110                    STA     0,X0,PR0

     1120    11500    1           PINCRW(MONSSR$,64)->B$SS=MONSSR$->B$SS;
             11500                    /* Move initial frame to 2'nd copy for multiprocessing */

  11500  2 002407   200047 471500                    LDP1    MONSSR$,,AUTO
         2 002410   000100 100500                    MLR     fill='000'O
         2 002411   100000 000400                    ADSC9   0,,PR1                   cn=0,n=256
         2 002412   100100 000400                    ADSC9   64,,PR1                  cn=0,n=256

     1121    11501    2           IF HDRXIS.BASE~=0 THEN DO;

  11501  2 002413   000374 236000 0                  LDQ     HDRXIS
         2 002414   002430 600000 2                  TZE     CALL_MON

     1122    11502    2                 IF RCV_FLG='0'B THEN;     /* Go to XDELTA using initial SSR     */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:180  

  11502  2 002415   000000 236000 xsym               LDQ     RCV_FLG
         2 002416   740000 316003                    CANQ    -16384,DU
         2 002417   002442 600000 2                  TZE     s:11517

     1123    11503    3                   ELSE DO;

     1124    11504    3                       IF XDFLAG=0 THEN GOTO CALL_MON;

  11504  2 002420   000000 235000 xsym               LDA     XDFLAG
         2 002421   002430 600000 2                  TZE     CALL_MON

     1125    11505    4                         ELSE DO;

     1126    11506    4                             XDFLAG=0;

  11506  2 002422   000000 450000 xsym               STZ     XDFLAG

     1127    11507    4                             CALL LOAD_SSR(XDSSR); /* Use XDELTA's saved SSR     */

  11507  2 002423   000130 630400 3                  EPPR0   88
         2 002424   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 002425   000000 701000 xent               TSX1    LOAD_SSR
         2 002426   000000 011000                    NOP     0

     1128    11508    4                           END;            /* ELSE                               */

     1129    11509    3                     END;                  /* ELSE                               */

     1130    11510    2               END;                        /* THEN                               */

  11510  2 002427   002442 710000 2                  TRA     s:11517

     1131    11511    2             ELSE DO;

     1132    11512    2   CALL_MON:
     1133    11513    2                 WMON$=ADDR(IT_XDELTA);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:181  

  11513  2 002430   000113 236000 3     CALL_MON     LDQ     75
         2 002431   200050 756100                    STQ     WMON$,,AUTO

     1134    11514    2                 PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=1; /* Not keeping XDELTA */

  11514  2 002432   000001 235007                    LDA     1,DL
         2 002433   200061 470500                    LDP0    INFOX$,,AUTO
         2 002434   200050 220100                    LDX0    WMON$,,AUTO
         2 002435   000000 755110                    STA     0,X0,PR0

     1135    11515    2                 CALL LOAD_SSR(SSDMONX);   /* Go to TIGR                         */

  11515  2 002436   000131 630400 3                  EPPR0   89
         2 002437   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 002440   000000 701000 xent               TSX1    LOAD_SSR
         2 002441   000000 011000                    NOP     0

     1136    11516    2               END;                        /* ELSE                               */

     1137    11517    1           RETURN;                         /* Go in BMAP for EXIT                */

  11517  2 002442   000000 702200 xent               TSX2  ! X66_ARET

     1138    11518        /**/
     1139    11519    1   XDELT_RET:ENTRY ALTRET;

  11519  2 002443   000000 700200 xent  XDELT_RET    TSX0  ! X66_AUTO_0
         2 002444   000100 000000                    ZERO    64,0

     1140    11520        /* Return after XDELTA */
     1141    11521    1           IF VOFLG='1'B THEN;             /* On VOLINIT don't write             */

  11521  2 002445   000000 234000 xsym               SZN     VOFLG
         2 002446   002452 604000 2                  TMI     s:11523

     1142    11522    1             ELSE CALL WRTDP;              /* Write PO stuff on disk             */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:182  

  11522  2 002447   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 002450   000000 701000 xent               TSX1    WRTDP
         2 002451   000000 011000                    NOP     0

     1143    11523    2           IF ADPXF.X='0'B THEN DO;        /* Don't keep XDELTA                  */

  11523  2 002452   000000 236000 xsym               LDQ     ADPXF
         2 002453   040000 316003                    CANQ    16384,DU
         2 002454   002461 601000 2                  TNZ     s:11528

     1144    11524    2                 INFOX_PTR='0'B;

  11524  2 002455   200061 450100                    STZ     INFOX$,,AUTO

     1145    11525    2                 INFOX_PTR.S_D_FIELD=%ALS_MONIS; /* Frame MON ISR                */

  11525  2 002456   006050 236007                    LDQ     3112,DL
         2 002457   200061 752103                    STCQ    INFOX$,'03'O,AUTO

     1146    11526    2                 GOTO CALL_MON;

  11526  2 002460   002430 710000 2                  TRA     CALL_MON

     1147    11527    2               END;                        /* THEN                               */
     1148    11528    1             ELSE ALTRETURN;

  11528  2 002461   000000 702200 xent               TSX2  ! X66_AALT

     1149    11529        /**/
     1150    11530    1   SADERR:
     1151    11531    1           CALL TYPEC(SADEM);

  11531  2 002462   000132 630400 3     SADERR       EPPR0   90
         2 002463   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 002464   000000 701000 xent               TSX1    TYPEC
         2 002465   000000 011000                    NOP     0
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:183  

     1152    11532    1           GOTO DCIASK;

  11532  2 002466   000120 710000 2                  TRA     DCIASK

     1153    11533    1   POERR:
     1154    11534    1           CALL TYPEC(POEM);

  11534  2 002467   000133 630400 3     POERR        EPPR0   91
         2 002470   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 002471   000000 701000 xent               TSX1    TYPEC
         2 002472   000000 011000                    NOP     0
         2 002473   002476 710000 2                  TRA     s:11536

     1155    11535    1   LOOP_PL6:ENTRY ALTRET;

  11535  2 002474   000000 700200 xent  LOOP_PL6     TSX0  ! X66_AUTO_0
         2 002475   000100 000000                    ZERO    64,0

     1156    11536    1           CALL TYPEC(AM1);

  11536  2 002476   000134 630400 3                  EPPR0   92
         2 002477   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 002500   000000 701000 xent               TSX1    TYPEC
         2 002501   000000 011000                    NOP     0

     1157    11537    1           CALL HANG;

  11537  2 002502   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 002503   000000 701000 xent               TSX1    HANG
         2 002504   000000 011000                    NOP     0

  11536  2 002505                       GOPO00       null
     1158    11538    1   GOPO00: ;
     1159    11539    1           RETURN;

  11539  2 002505   000000 702200 xent               TSX2  ! X66_ARET
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:184  

     1160    11540    1   SET_PAT2_DEN: PROC ALTRET;

  11540  2 002506   200070 741300       SET_PAT2_DEN STX1  ! BOOT$+2,,AUTO

     1161    11541    2           CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNREW);

  11541  2 002507   000135 630400 3                  EPPR0   93
         2 002510   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 002511   000000 701000 xent               TSX1    MINIQ_PL6
         2 002512   000000 011000                    NOP     0

     1162    11542    2           CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNSDT8) ALTRET(CHECK_DPT16);

  11542  2 002513   000141 630400 3                  EPPR0   97
         2 002514   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 002515   000000 701000 xent               TSX1    MINIQ_PL6
         2 002516   002547 702000 2                  TSX2    CHECK_DPT16

     1163    11543    3           CALL MINIQ_PL6(PAT2_INDX,ADDR(POBUF),80,%FCNRTB) WHENRETURN DO;

  11543  2 002517   000103 236000 3                  LDQ     67
         2 002520   200072 756100                    STQ     BOOT$+4,,AUTO
         2 002521   000146 237000 3                  LDAQ    102
         2 002522   200076 757100                    STAQ    BOOT$+8,,AUTO
         2 002523   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 002524   200075 450500                    STP0    BOOT$+7,,AUTO
         2 002525   000135 236000 3                  LDQ     93
         2 002526   200074 756100                    STQ     BOOT$+6,,AUTO
         2 002527   200074 630500                    EPPR0   BOOT$+6,,AUTO
         2 002530   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 002531   000000 701000 xent               TSX1    MINIQ_PL6
         2 002532   002541 702000 2                  TSX2    s:11548

     1164    11544    3                 CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNREW);

  11544  2 002533   000135 630400 3                  EPPR0   93
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:185  
         2 002534   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 002535   000000 701000 xent               TSX1    MINIQ_PL6
         2 002536   000000 011000                    NOP     0

     1165    11545    3                 RETURN;

  11545  2 002537   200070 221300                    LDX1  ! BOOT$+2,,AUTO
         2 002540   000001 702211                    TSX2  ! 1,X1

     1166    11546    3               END;
     1167    11547    3             WHENALTRETURN DO;

     1168    11548    3                 IF (DEVINFO.BSTAT.W1(PAT2_INDX) & '777700'O) ~= '5210'O THEN

  11548  2 002541   001310 236000 0                  LDQ     PAT2_INDX
         2 002542   000014 402007                    MPY     12,DL
         2 002543   000004 236006 xsym               LDQ     DEVINFO+4,QL
         2 002544   777700 376003                    ANQ     -64,DU
         2 002545   521000 116003                    CMPQ    -89600,DU
         2 002546   002641 601000 2                  TNZ     PAT2_ERR

     1169    11549    3                   GOTO PAT2_ERR;
     1170    11550    3               END;

     1171    11551    2   CHECK_DPT16:
     1172    11552    2           CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNREW);

  11552  2 002547   000135 630400 3     CHECK_DPT16  EPPR0   93
         2 002550   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 002551   000000 701000 xent               TSX1    MINIQ_PL6
         2 002552   000000 011000                    NOP     0

     1173    11553    2           CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNSDT16) ALTRET(CHECK_DPT62);

  11553  2 002553   000150 630400 3                  EPPR0   104
         2 002554   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 002555   000000 701000 xent               TSX1    MINIQ_PL6
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:186  
         2 002556   002607 702000 2                  TSX2    CHECK_DPT62

     1174    11554    3           CALL MINIQ_PL6(PAT2_INDX,ADDR(POBUF),80,%FCNRTB) WHENRETURN DO;

  11554  2 002557   000103 236000 3                  LDQ     67
         2 002560   200072 756100                    STQ     BOOT$+4,,AUTO
         2 002561   000146 237000 3                  LDAQ    102
         2 002562   200076 757100                    STAQ    BOOT$+8,,AUTO
         2 002563   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 002564   200075 450500                    STP0    BOOT$+7,,AUTO
         2 002565   000135 236000 3                  LDQ     93
         2 002566   200074 756100                    STQ     BOOT$+6,,AUTO
         2 002567   200074 630500                    EPPR0   BOOT$+6,,AUTO
         2 002570   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 002571   000000 701000 xent               TSX1    MINIQ_PL6
         2 002572   002601 702000 2                  TSX2    s:11559

     1175    11555    3                 CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNREW);

  11555  2 002573   000135 630400 3                  EPPR0   93
         2 002574   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 002575   000000 701000 xent               TSX1    MINIQ_PL6
         2 002576   000000 011000                    NOP     0

     1176    11556    3                 RETURN;

  11556  2 002577   200070 221300                    LDX1  ! BOOT$+2,,AUTO
         2 002600   000001 702211                    TSX2  ! 1,X1

     1177    11557    3               END;
     1178    11558    3             WHENALTRETURN DO;

     1179    11559    3                 IF (DEVINFO.BSTAT.W1(PAT2_INDX) & '777700'O) ~= '5210'O THEN

  11559  2 002601   001310 236000 0                  LDQ     PAT2_INDX
         2 002602   000014 402007                    MPY     12,DL
         2 002603   000004 236006 xsym               LDQ     DEVINFO+4,QL
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:187  
         2 002604   777700 376003                    ANQ     -64,DU
         2 002605   521000 116003                    CMPQ    -89600,DU
         2 002606   002641 601000 2                  TNZ     PAT2_ERR

     1180    11560    3                   GOTO PAT2_ERR;
     1181    11561    3               END;

     1182    11562    2   CHECK_DPT62:
     1183    11563    2           CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNREW);

  11563  2 002607   000135 630400 3     CHECK_DPT62  EPPR0   93
         2 002610   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 002611   000000 701000 xent               TSX1    MINIQ_PL6
         2 002612   000000 011000                    NOP     0

     1184    11564    2           CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNSDT62) ALTRET(PAT2_ERR);

  11564  2 002613   000155 630400 3                  EPPR0   109
         2 002614   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 002615   000000 701000 xent               TSX1    MINIQ_PL6
         2 002616   002641 702000 2                  TSX2    PAT2_ERR

     1185    11565    3           CALL MINIQ_PL6(PAT2_INDX,ADDR(POBUF),80,%FCNRTB) WHENRETURN DO;

  11565  2 002617   000103 236000 3                  LDQ     67
         2 002620   200072 756100                    STQ     BOOT$+4,,AUTO
         2 002621   000146 237000 3                  LDAQ    102
         2 002622   200076 757100                    STAQ    BOOT$+8,,AUTO
         2 002623   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 002624   200075 450500                    STP0    BOOT$+7,,AUTO
         2 002625   000135 236000 3                  LDQ     93
         2 002626   200074 756100                    STQ     BOOT$+6,,AUTO
         2 002627   200074 630500                    EPPR0   BOOT$+6,,AUTO
         2 002630   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 002631   000000 701000 xent               TSX1    MINIQ_PL6
         2 002632   002641 702000 2                  TSX2    PAT2_ERR

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:188  
     1186    11566    3                 CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNREW);

  11566  2 002633   000135 630400 3                  EPPR0   93
         2 002634   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 002635   000000 701000 xent               TSX1    MINIQ_PL6
         2 002636   000000 011000                    NOP     0

     1187    11567    3                 RETURN;

  11567  2 002637   200070 221300                    LDX1  ! BOOT$+2,,AUTO
         2 002640   000001 702211                    TSX2  ! 1,X1

     1188    11568    3               END;
     1189    11569    2   PAT2_ERR:
     1190    11570    2           ALTRETURN;

  11570  2 002641   200070 221300       PAT2_ERR     LDX1  ! BOOT$+2,,AUTO
         2 002642   000000 702211                    TSX2  ! 0,X1

     1191    11571    2   END SET_PAT2_DEN;
     1192    11572    1   POBOOT: ENTRY ALTRET;

  11572  2 002643   000000 700200 xent  POBOOT       TSX0  ! X66_AUTO_0
         2 002644   000100 000000                    ZERO    64,0

     1193    11573        /* Make sure that headers and descriptors are zeroed */
     1194    11574    1           ERAS_F$=ADDR(HDRXLS);

  11574  2 002645   000054 236000 3                  LDQ     44
         2 002646   200030 756100                    STQ     ERAS_F$,,AUTO

     1195    11575    1           ERAS_L$=ADDR(HDRBUF);

  11575  2 002647   000161 236000 3                  LDQ     113
         2 002650   200031 756100                    STQ     ERAS_L$,,AUTO

     1196    11576    1           ERAS_LGTH=(ERAS_L_PTR.WOFFS-ERAS_F_PTR.WOFFS)*36;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:189  

  11576  2 002651   200030 235100                    LDA     ERAS_F$,,AUTO
         2 002652   000022 771000                    ARL     18
         2 002653   200072 755100                    STA     BOOT$+4,,AUTO
         2 002654   200031 236100                    LDQ     ERAS_L$,,AUTO
         2 002655   000022 772000                    QRL     18
         2 002656   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 002657   000044 402007                    MPY     36,DL
         2 002660   200032 756100                    STQ     ERAS_LGTH,,AUTO

     1197    11577    1           ERAS_F$->ERAS_BUF='0'B;

  11577  2 002661   200030 470500                    LDP0    ERAS_F$,,AUTO
         2 002662   000000 620006                    EAX0    0,QL
         2 002663   003140 060400                    CSL     bolr='003'O
         2 002664   000002 000001 xsym               BDSC    B_VECTNIL+2              by=0,bit=0,n=1
         2 002665   000000 000010                    BDSC    0,,PR0                   by=0,bit=0,n=*X0

     1198    11578    1           ERAS_F$=ADDR(AALS.DESCXL);

  11578  2 002666   000000 236000 0                  LDQ     AALS$
         2 002667   000020 036003                    ADLQ    16,DU
         2 002670   200030 756100                    STQ     ERAS_F$,,AUTO

     1199    11579    1           ERAS_L$=ADDR(AALS.DESCGI);

  11579  2 002671   000000 236000 0                  LDQ     AALS$
         2 002672   000122 036003                    ADLQ    82,DU
         2 002673   200031 756100                    STQ     ERAS_L$,,AUTO

     1200    11580    1           ERAS_LGTH=(ERAS_L_PTR.WOFFS-ERAS_F_PTR.WOFFS)*36;

  11580  2 002674   200030 235100                    LDA     ERAS_F$,,AUTO
         2 002675   000022 771000                    ARL     18
         2 002676   200072 755100                    STA     BOOT$+4,,AUTO
         2 002677   200031 236100                    LDQ     ERAS_L$,,AUTO
         2 002700   000022 772000                    QRL     18
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:190  
         2 002701   200072 136100                    SBLQ    BOOT$+4,,AUTO
         2 002702   000044 402007                    MPY     36,DL
         2 002703   200032 756100                    STQ     ERAS_LGTH,,AUTO

     1201    11581    1           ERAS_F$->ERAS_BUF='0'B;

  11581  2 002704   200030 470500                    LDP0    ERAS_F$,,AUTO
         2 002705   000000 620006                    EAX0    0,QL
         2 002706   003140 060400                    CSL     bolr='003'O
         2 002707   000002 000001 xsym               BDSC    B_VECTNIL+2              by=0,bit=0,n=1
         2 002710   000000 000010                    BDSC    0,,PR0                   by=0,bit=0,n=*X0

     1202    11582    1           AALS.MONLSR='0'B;

  11582  2 002711   000000 235003                    LDA     0,DU
         2 002712   000000 236003                    LDQ     0,DU
         2 002713   000000 471400 0                  LDP1    AALS$
         2 002714   100004 757100                    STAQ    4,,PR1

     1203    11583        /**/
     1204    11584    1           OUHDESC$=ADDR(AALS.OUHDESC);    /* For debug schema processing        */

  11584  2 002715   000000 236000 0                  LDQ     AALS$
         2 002716   000016 036003                    ADLQ    14,DU
         2 002717   001275 756000 0                  STQ     OUHDESC$

     1205    11585    1           SCDESC$=ADDR(AALS.DESCSCH0);    /* For debug schema processing        */

  11585  2 002720   000000 236000 0                  LDQ     AALS$
         2 002721   000150 036003                    ADLQ    104,DU
         2 002722   001300 756000 0                  STQ     SCDESC$

     1206    11586    1           IF RCV_FLG~='0'B THEN GOTO POPSAD; /* Recovery or disk boot           */

  11586  2 002723   000000 236000 xsym               LDQ     RCV_FLG
         2 002724   740000 316003                    CANQ    -16384,DU
         2 002725   004523 601000 2                  TNZ     POPSAD
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:191  

     1207    11587    1             ELSE;
     1208    11588        /* Get PO index in DEVINFO */
     1209    11589    2           IF ADPXF.D='0'B THEN DO;

  11589  2 002726   000000 236000 xsym               LDQ     ADPXF
         2 002727   200000 316003                    CANQ    65536,DU
         2 002730   002741 601000 2                  TNZ     s:11595

     1210    11590    2                 PO_INDX=BOOTTAPE;

  11590  2 002731   000000 235000 xsym               LDA     BOOTTAPE
         2 002732   000000 755000 xsym               STA     PO_INDX

     1211    11591    2                 IPO_INDX=BOOTTAPE;

  11591  2 002733   000000 755000 xsym               STA     IPO_INDX

     1212    11592    2                 PO_DEVN=SUBSTR(DEVINFO.DEVNAME(BOOTTAPE),6,2);

  11592  2 002734   000000 236000 xsym               LDQ     BOOTTAPE
         2 002735   000014 402007                    MPY     12,DL
         2 002736   000007 720006 xsym               LXL0    DEVINFO+7,QL
         2 002737   000000 740000 xsym               STX0    PO_DEVN

     1213    11593    2               END;                        /* THEN                               */

  11593  2 002740   003024 710000 2                  TRA     s:11618

     1214    11594    2             ELSE DO;

     1215    11595    2                 MESSAGE$=ADDR(GTPOXM);

  11595  2 002741   000162 236000 3                  LDQ     114
         2 002742   200054 756100                    STQ     MESSAGE$,,AUTO

     1216    11596    2                 SUBSTR(TEXTM.TXT,11,6)=SUBSTR(DEVINFO.DEVNAME(%FRSTMT),0,6);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:192  

  11596  2 002743   200054 473500                    LDP3    MESSAGE$,,AUTO
         2 002744   300000 720100                    LXL0    0,,PR3
         2 002745   040100 100400                    MLR     fill='040'O
         2 002746   000052 000006 xsym               ADSC9   DEVINFO+42               cn=0,n=6
         2 002747   300003 600006                    ADSC9   3,,PR3                   cn=3,n=6

     1217    11597    2   ASKPO:
     1218    11598    2                 CALL KEYIN(GTPOXM,ANSBUF);

  11598  2 002750   000163 630400 3     ASKPO        EPPR0   115
         2 002751   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 002752   000000 701000 xent               TSX1    KEYIN
         2 002753   000000 011000                    NOP     0

     1219    11599    2                 CALL GETFD(ANSBUF.TXT,16) ALTRET(ASKPO);

  11599  2 002754   000023 630400 3                  EPPR0   19
         2 002755   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 002756   000000 701000 xent               TSX1    GETFD
         2 002757   002750 702000 2                  TSX2    ASKPO

     1220    11600    2                 IF DECIM_FLG='0'B OR FIELD_LEN>2 THEN GOTO ASKPO;

  11600  2 002760   000000 234000 xsym               SZN     DECIM_FLG
         2 002761   002750 605000 2                  TPL     ASKPO
         2 002762   000000 235000 xsym               LDA     FIELD_LEN
         2 002763   000003 115007                    CMPA    3,DL
         2 002764   002750 603000 2                  TRC     ASKPO

     1221    11601    2                   ELSE;
     1222    11602    3                 IF FIELD_LEN=1 THEN DO;

  11602  2 002765   000001 115007                    CMPA    1,DL
         2 002766   002777 601000 2                  TNZ     s:11607

     1223    11603    3                       SUBSTR(POANS,1,1)=SUBSTR(POANS,0,1);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:193  
             11603                                /* Make it a 2 digit answer */

  11603  2 002767   000000 470400 xsym               LDP0    FIELD$
         2 002770   040100 100500                    MLR     fill='040'O
         2 002771   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         2 002772   000000 200001                    ADSC9   0,,PR0                   cn=1,n=1

     1224    11604    3                       SUBSTR(POANS,0,1)='0';

  11604  2 002773   000000 470400 xsym               LDP0    FIELD$
         2 002774   040100 100400                    MLR     fill='040'O
         2 002775   000030 000001 3                  ADSC9   24                       cn=0,n=1
         2 002776   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1

     1225    11605    3                     END;                  /* THEN                               */

     1226    11606    2                   ELSE;
     1227    11607    3                 DO I=%FRSTMT TO %(FRSTDP-1);

  11607  2 002777   000003 235007                    LDA     3,DL
         2 003000   200037 755100                    STA     I,,AUTO

     1228    11608    3                   IF SUBSTR(DEVINFO.DEVNAME(I),6,2)=POANS THEN GOTO POF;

  11608  2 003001   200037 236100                    LDQ     I,,AUTO
         2 003002   000060 402007                    MPY     48,DL
         2 003003   000000 470400 xsym               LDP0    FIELD$
         2 003004   040100 106406                    CMPC    fill='040'O
         2 003005   000007 400002 xsym               ADSC9   DEVINFO+7,Q              cn=2,n=2
         2 003006   000000 000002                    ADSC9   0,,PR0                   cn=0,n=2
         2 003007   003015 600000 2                  TZE     POF

     1229    11609    3                     ELSE;
     1230    11610    3                 END;                      /* DO I=                              */

  11610  2 003010   200037 054100                    AOS     I,,AUTO
         2 003011   200037 235100                    LDA     I,,AUTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:194  
         2 003012   000023 115007                    CMPA    19,DL
         2 003013   003001 604400 2                  TMOZ    s:11608

     1231    11611    2                 GOTO ASKPO;               /* Ask again                          */

  11611  2 003014   002750 710000 2                  TRA     ASKPO

     1232    11612    2   POF:
     1233    11613    2                 PO_INDX=I;

  11613  2 003015   200037 235100       POF          LDA     I,,AUTO
         2 003016   000000 755000 xsym               STA     PO_INDX

     1234    11614    2                 IPO_INDX=I;

  11614  2 003017   000000 755000 xsym               STA     IPO_INDX

     1235    11615    2                 BOOTTAPE = I;

  11615  2 003020   000000 755000 xsym               STA     BOOTTAPE

     1236    11616    2                 PO_DEVN=POANS;

  11616  2 003021   040000 100500                    MLR     fill='040'O
         2 003022   000000 000002                    ADSC9   0,,PR0                   cn=0,n=2
         2 003023   000000 000002 xsym               ADSC9   PO_DEVN                  cn=0,n=2

     1237    11617    2               END;                        /* ELSE                               */

     1238    11618    1           POIDC=0;                        /* Zero -> error count                */

  11618  2 003024   200041 450100                    STZ     POIDC,,AUTO

     1239    11619    1   POBT1:
     1240    11620    1           CALL MINIQ_PL6(PO_INDX,0,0,%FCNREW); /* Rewind                        */

  11620  2 003025   000165 630400 3     POBT1        EPPR0   117
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:195  
         2 003026   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 003027   000000 701000 xent               TSX1    MINIQ_PL6
         2 003030   000000 011000                    NOP     0

     1241    11621    1           CALL MINIQ_PL6(PO_INDX,0,0,%FCNSDT8) ALTRET(CHECK_D16);/* Set density */

  11621  2 003031   000171 630400 3                  EPPR0   121
         2 003032   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 003033   000000 701000 xent               TSX1    MINIQ_PL6
         2 003034   003060 702000 2                  TSX2    CHECK_D16

     1242    11622    2           CALL MINIQ_PL6(PO_INDX,ADDR(POBUF),128,%FCNRTB) WHENRETURN DO;
             11622                    /* Boot strap record is binary */

  11622  2 003035   000103 236000 3                  LDQ     67
         2 003036   200072 756100                    STQ     BOOT$+4,,AUTO
         2 003037   000176 237000 3                  LDAQ    126
         2 003040   200076 757100                    STAQ    BOOT$+8,,AUTO
         2 003041   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 003042   200075 450500                    STP0    BOOT$+7,,AUTO
         2 003043   000165 236000 3                  LDQ     117
         2 003044   200074 756100                    STQ     BOOT$+6,,AUTO
         2 003045   200074 630500                    EPPR0   BOOT$+6,,AUTO
         2 003046   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 003047   000000 701000 xent               TSX1    MINIQ_PL6
         2 003050   003052 702000 2                  TSX2    s:11626

     1243    11623    2                 GOTO POSKIP;

  11623  2 003051   003104 710000 2                  TRA     POSKIP

     1244    11624    2               END;
     1245    11625    2             WHENALTRETURN DO;

     1246    11626    2                 IF (DEVINFO.BSTAT.W1(PO_INDX) & '777700'O) ~= '5210'O THEN

  11626  2 003052   000000 236000 xsym               LDQ     PO_INDX
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:196  
         2 003053   000014 402007                    MPY     12,DL
         2 003054   000004 236006 xsym               LDQ     DEVINFO+4,QL
         2 003055   777700 376003                    ANQ     -64,DU
         2 003056   521000 116003                    CMPQ    -89600,DU
         2 003057   004516 601000 2                  TNZ     POLRX

     1247    11627    2                   GOTO POLRX;
     1248    11628    2               END;

     1249    11629    1   CHECK_D16:
     1250    11630    1           CALL MINIQ_PL6(PO_INDX,0,0,%FCNREW);

  11630  2 003060   000165 630400 3     CHECK_D16    EPPR0   117
         2 003061   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 003062   000000 701000 xent               TSX1    MINIQ_PL6
         2 003063   000000 011000                    NOP     0

     1251    11631    1           CALL MINIQ_PL6(PO_INDX,0,0,%FCNSDT16);

  11631  2 003064   000200 630400 3                  EPPR0   128
         2 003065   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 003066   000000 701000 xent               TSX1    MINIQ_PL6
         2 003067   000000 011000                    NOP     0

     1252    11632        /* Read boot strap record */
     1253    11633    1           CALL MINIQ_PL6(PO_INDX,ADDR(POBUF),128,%FCNRTB) ALTRET(POLRX);
             11633                    /* Boot strap record is binary */

  11633  2 003070   000103 236000 3                  LDQ     67
         2 003071   200072 756100                    STQ     BOOT$+4,,AUTO
         2 003072   000176 237000 3                  LDAQ    126
         2 003073   200076 757100                    STAQ    BOOT$+8,,AUTO
         2 003074   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 003075   200075 450500                    STP0    BOOT$+7,,AUTO
         2 003076   000165 236000 3                  LDQ     117
         2 003077   200074 756100                    STQ     BOOT$+6,,AUTO
         2 003100   200074 630500                    EPPR0   BOOT$+6,,AUTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:197  
         2 003101   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 003102   000000 701000 xent               TSX1    MINIQ_PL6
         2 003103   004516 702000 2                  TSX2    POLRX

     1254    11634        /* Skip over bison and read tape ID */
     1255    11635    1   POSKIP:
     1256    11636    1           CALL MINIQ_PL6(PO_INDX,ADDR(IDBUF.TXT),IDBUF.CNT,%FCNRT9) ALTRET(POIDX);
             11636                    /* Tape ID record is in ASCII */

  11636  2 003104   000076 236000 3     POSKIP       LDQ     62
         2 003105   200072 756100                    STQ     BOOT$+4,,AUTO
         2 003106   000204 237000 3                  LDAQ    132
         2 003107   200076 757100                    STAQ    BOOT$+8,,AUTO
         2 003110   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 003111   200075 450500                    STP0    BOOT$+7,,AUTO
         2 003112   000165 236000 3                  LDQ     117
         2 003113   200074 756100                    STQ     BOOT$+6,,AUTO
         2 003114   200074 630500                    EPPR0   BOOT$+6,,AUTO
         2 003115   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 003116   000000 701000 xent               TSX1    MINIQ_PL6
         2 003117   004477 702000 2                  TSX2    POIDX

     1257    11637    1           IF SUBSTR(IDBUF.TXT,0,4)~='CP-6' THEN GOTO POSKIP; /* Keep on looking */

  11637  2 003120   000610 236000 0                  LDQ     IDBUF+1
         2 003121   000000 116000 1                  CMPQ    0
         2 003122   003104 601000 2                  TNZ     POSKIP

     1258    11638    1             ELSE;
     1259    11639        /* Type tape ID */
     1260    11640    1           TIDBUF.TXT=IDBUF.TXT;

  11640  2 003123   040000 100400                    MLR     fill='040'O
         2 003124   000610 000034 0                  ADSC9   IDBUF+1                  cn=0,n=28
         2 003125   000620 000040 0                  ADSC9   TIDBUF+1                 cn=0,n=32

     1261    11641    1           CALL TYPEC(TIDBUF);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:198  

  11641  2 003126   000206 630400 3                  EPPR0   134
         2 003127   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 003130   000000 701000 xent               TSX1    TYPEC
         2 003131   000000 011000                    NOP     0

     1262    11642    1   POBT2:
     1263    11643    1           AALS.DESCPPUT.BASE=((FW_PTR.WOFFS+1023)/1024)*1024*4;
             11643                    /* Assign PPUT at next page address after top of the world */

  11643  2 003132   000000 236000 xsym  POBT2        LDQ     FW$
         2 003133   000022 772000                    QRL     18
         2 003134   001777 036007                    ADLQ    1023,DL
         2 003135   000012 772000                    QRL     10
         2 003136   000014 736000                    QLS     12
         2 003137   000000 470400 0                  LDP0    AALS$
         2 003140   000007 756100                    STQ     7,,PR0

     1264    11644    1           AALS.DESCPPUT.BOUND=IS_PPUT_SIZE*4+3;

  11644  2 003141   000000 236000 xsym               LDQ     IS_PPUT_SIZE
         2 003142   000002 736000                    QLS     2
         2 003143   000003 036007                    ADLQ    3,DL
         2 003144   000020 736000                    QLS     16
         2 003145   000006 676100                    ERQ     6,,PR0
         2 003146   000034 376000 xsym               ANQ     B_VECTNIL+28
         2 003147   000006 656100                    ERSQ    6,,PR0

     1265    11645        /* Allocate space for PPUT */
     1266    11646    1           IPHYPG=AALS.DESCPPUT.BASE/4;    /* Word address                       */

  11646  2 003150   000007 236100                    LDQ     7,,PR0
         2 003151   000004 506007                    DIV     4,DL
         2 003152   000636 756000 0                  STQ     IPHYPG

     1267    11647    1           IF S1000_FLG THEN I=%S1000_MAXMEMPG;

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:199  
  11647  2 003153   000000 234000 xsym               SZN     S1000_FLG
         2 003154   003160 605000 2                  TPL     s:11649

  11647  2 003155   177777 235007                    LDA     65535,DL
         2 003156   200037 755100                    STA     I,,AUTO
         2 003157   003167 710000 2                  TRA     s:11651

     1268    11648    1             ELSE
     1269    11649    1             IF RPM_FLG THEN I = %RPM_MAXMEMPG;

  11649  2 003160   000000 234000 xsym               SZN     RPM_FLG
         2 003161   003165 605000 2                  TPL     s:11650

  11649  2 003162   177777 235007                    LDA     65535,DL
         2 003163   200037 755100                    STA     I,,AUTO
         2 003164   003167 710000 2                  TRA     s:11651

     1270    11650    1               ELSE I=%MAXMEMPG;

  11650  2 003165   037777 235007                    LDA     16383,DL
         2 003166   200037 755100                    STA     I,,AUTO

     1271    11651    2           DO WHILE I>0;

  11651  2 003167   003177 604400 2                  TMOZ    s:11655

     1272    11652    2             I=I-1024;

  11652  2 003170   002000 336007                    LCQ     1024,DL
         2 003171   200037 056100                    ASQ     I,,AUTO

     1273    11653    2             IPHYPG=IPHYPG+1024;

  11653  2 003172   000636 235000 0                  LDA     IPHYPG
         2 003173   002000 035007                    ADLA    1024,DL
         2 003174   000636 755000 0                  STA     IPHYPG

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:200  
     1274    11654    2           END;                            /* DO WHILE                           */

  11654  2 003175   200037 235100                    LDA     I,,AUTO
         2 003176   003170 605400 2                  TPNZ    s:11652

     1275    11655    1           BASEMPT=IPHYPG;                 /* Base of Mon PT                     */

  11655  2 003177   000636 236000 0                  LDQ     IPHYPG
         2 003200   000633 756000 0                  STQ     BASEMPT

     1276    11656        /* On S1000 allocate space for Physical->Real MAP */
     1277    11657    2           IF S1000_FLG THEN DO;

  11657  2 003201   000000 234000 xsym               SZN     S1000_FLG
         2 003202   003254 605000 2                  TPL     s:11673

     1278    11658        /* Compute physical memory size */
     1279    11659    2                 PHYMEM_SZ=WS0PT.RPN(0);

  11659  2 003203   000641 470400 0                  LDP0    WS0PT$
         2 003204   000000 236100                    LDQ     0,,PR0
         2 003205   000022 772000                    QRL     18
         2 003206   000637 756000 0                  STQ     PHYMEM_SZ

     1280    11660    3                 DO I=1 TO HIPAGE;

  11660  2 003207   000001 235007                    LDA     1,DL
         2 003210   200037 755100                    STA     I,,AUTO
         2 003211   003223 710000 2                  TRA     s:11662+1

     1281    11661    3                   PHYMEM_SZ=MAXIMUM(PHYMEM_SZ,WS0PT.RPN(I));

  11661  2 003212   000641 470400 0                  LDP0    WS0PT$
         2 003213   200037 720100                    LXL0    I,,AUTO
         2 003214   000000 236110                    LDQ     0,X0,PR0
         2 003215   000022 772000                    QRL     18
         2 003216   000637 116000 0                  CMPQ    PHYMEM_SZ
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:201  
         2 003217   003221 603000 2                  TRC     s:11661+7
         2 003220   000637 236000 0                  LDQ     PHYMEM_SZ
         2 003221   000637 756000 0                  STQ     PHYMEM_SZ

     1282    11662    3                 END;                      /* DO I=                              */

  11662  2 003222   200037 054100                    AOS     I,,AUTO
         2 003223   000000 236000 xsym               LDQ     HIPAGE
         2 003224   003212 604000 2                  TMI     s:11661
         2 003225   200037 116100                    CMPQ    I,,AUTO
         2 003226   003212 605000 2                  TPL     s:11661

     1283    11663    2                 PHYMEM_SZ=((PHYMEM_SZ+4095)/4096)*4096-1;
             11663                          /* Rounded to 4M, Nr of last page */

  11663  2 003227   000637 236000 0                  LDQ     PHYMEM_SZ
         2 003230   007777 036007                    ADLQ    4095,DL
         2 003231   000014 772000                    QRL     12
         2 003232   000014 736000                    QLS     12
         2 003233   000001 136007                    SBLQ    1,DL
         2 003234   000637 756000 0                  STQ     PHYMEM_SZ

     1284    11664        /* Allocate space for MAP */
     1285    11665    2                 I=%S1000_MAXMEMPG;

  11665  2 003235   177777 235007                    LDA     65535,DL
         2 003236   200037 755100                    STA     I,,AUTO

     1286    11666    3                 DO WHILE I>0;

  11666  2 003237   003247 604400 2                  TMOZ    s:11670

     1287    11667    3                   I=I-1024;

  11667  2 003240   002000 336007                    LCQ     1024,DL
         2 003241   200037 056100                    ASQ     I,,AUTO

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:202  
     1288    11668    3                   BASEMPT=BASEMPT+512;    /* The map is on halfwords            */

  11668  2 003242   000633 235000 0                  LDA     BASEMPT
         2 003243   001000 035007                    ADLA    512,DL
         2 003244   000633 755000 0                  STA     BASEMPT

     1289    11669    3                 END;                      /* DO WHILE                           */

  11669  2 003245   200037 235100                    LDA     I,,AUTO
         2 003246   003240 605400 2                  TPNZ    s:11667

     1290    11670    2                 BASEMPT=((BASEMPT+1023)/1024)*1024;

  11670  2 003247   000633 236000 0                  LDQ     BASEMPT
         2 003250   001777 036007                    ADLQ    1023,DL
         2 003251   000012 772000                    QRL     10
         2 003252   000012 736000                    QLS     10
         2 003253   000633 756000 0                  STQ     BASEMPT

     1291    11671    2               END;                        /* THEN                               */

     1292    11672    1             ELSE;
     1293    11673    1           AALS.DESCMPT.BASE=BASEMPT*4;    /* Convert to bytes, base of Mon PT   */

  11673  2 003254   000633 235000 0                  LDA     BASEMPT
         2 003255   000002 735000                    ALS     2
         2 003256   000000 470400 0                  LDP0    AALS$
         2 003257   000231 755100                    STA     153,,PR0

     1294    11674    1           BASEJ=BASEMPT+%JITPG*1024;      /* JIT addr                           */

  11674  2 003260   000633 236000 0                  LDQ     BASEMPT
         2 003261   026000 036007                    ADLQ    11264,DL
         2 003262   000630 756000 0                  STQ     BASEJ

     1295    11675    1           AALS.DESCJ.BASE=BASEJ*4;        /* Base of Monitor JIT                */

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:203  
  11675  2 003263   000630 235000 0                  LDA     BASEJ
         2 003264   000002 735000                    ALS     2
         2 003265   000125 755100                    STA     85,,PR0

     1296    11676    1           AALS.DESCTM.BASE=AALS.DESCJ.BASE+%JIT_SIZEC; /* Base of Monitor TSTACK */

  11676  2 003266   001730 035007                    ADLA    984,DL
         2 003267   000141 755100                    STA     97,,PR0

     1297    11677    1           WSQ3PG=AALS.DESCJ.BASE/4+2*1024;

  11677  2 003270   000125 236100                    LDQ     85,,PR0
         2 003271   000004 506007                    DIV     4,DL
         2 003272   004000 036007                    ADLQ    2048,DL
         2 003273   000635 756000 0                  STQ     WSQ3PG

     1298    11678    1           NAVDW=WSQ3PG+2048;              /* Assign two pages for WSQ3 PT       */

  11678  2 003274   004000 036007                    ADLQ    2048,DL
         2 003275   000000 756000 xsym               STQ     NAVDW

     1299    11679    1           NAV8W=NAVDW;               /* And initialize next available addresses */

  11679  2 003276   000000 756000 xsym               STQ     NAV8W

     1300    11680    1           NAVPG=NAVDW;

  11680  2 003277   000000 756000 xsym               STQ     NAVPG

  11680  2 003300                       POHDR        null
     1301    11681    1   POHDR:  ;
     1302    11682    1   GETHDR:
     1303    11683    2           IF RCV_FLG='0'B THEN DO;

  11683  2 003300   000000 236000 xsym  GETHDR       LDQ     RCV_FLG
         2 003301   740000 316003                    CANQ    -16384,DU
         2 003302   003320 601000 2                  TNZ     GT_DISKHDR
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:204  

     1304    11684    2                 CALL MINIQ_PL6(IPO_INDX,ADDR(HDRBUF),LENGTHC(HDRBUF),%FCNRTB) ALTRET(
             11684                          POHDRX);

  11684  2 003303   000161 236000 3                  LDQ     113
         2 003304   200072 756100                    STQ     BOOT$+4,,AUTO
         2 003305   000210 237000 3                  LDAQ    136
         2 003306   200076 757100                    STAQ    BOOT$+8,,AUTO
         2 003307   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 003310   200075 450500                    STP0    BOOT$+7,,AUTO
         2 003311   000212 236000 3                  LDQ     138
         2 003312   200074 756100                    STQ     BOOT$+6,,AUTO
         2 003313   200074 630500                    EPPR0   BOOT$+6,,AUTO
         2 003314   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 003315   000000 701000 xent               TSX1    MINIQ_PL6
         2 003316   004511 702000 2                  TSX2    POHDRX

     1305    11685    2               END;                        /* THEN                               */

  11685  2 003317   003407 710000 2                  TRA     s:11717

     1306    11686    2             ELSE DO;

     1307    11687        /* Simulate PO read */
     1308    11688    2   GT_DISKHDR:
     1309    11689    3                 IF(HDRTYP=%MPROCTC AND HDRMP0.DA~=0) THEN DO;
             11689                          /* It is Mon Proc overlay and we have done the root allready */

  11689  2 003320   000642 220000 0     GT_DISKHDR   LDX0    HDRTYP
         2 003321   000004 100003                    CMPX0   4,DU
         2 003322   003346 601000 2                  TNZ     s:11698
         2 003323   000411 235000 0                  LDA     HDRMP0+1
         2 003324   003346 600000 2                  TZE     s:11698

     1310    11690    3                       SADTAB$=ADDR(SADTAB.MP1$);

  11690  2 003325   000213 236000 3                  LDQ     139
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:205  
         2 003326   200036 756100                    STQ     SADTAB$,,AUTO

     1311    11691    3                       HDR$=ADDR(HDRMP1);

  11691  2 003327   000214 236000 3                  LDQ     140
         2 003330   000600 756000 0                  STQ     HDR$

     1312    11692    4                       DO WHILE BAS_HDR.DA~=0; /* Look for a free header         */

  11692  2 003331   000600 470400 0                  LDP0    HDR$
         2 003332   000001 235100                    LDA     1,,PR0
         2 003333   003360 600000 2                  TZE     s:11701

     1313    11693    4                         HDR_PTR.WOFFS=HDR_PTR.WOFFS+4;

  11693  2 003334   000600 220000 0                  LDX0    HDR$
         2 003335   000004 621010                    EAX1    4,X0
         2 003336   000600 741000 0                  STX1    HDR$

     1314    11694    4                         SADTAB_PTR.WOFFS=SADTAB_PTR.WOFFS+1;

  11694  2 003337   200036 220100                    LDX0    SADTAB$,,AUTO
         2 003340   000001 622010                    EAX2    1,X0
         2 003341   200036 742100                    STX2    SADTAB$,,AUTO

     1315    11695    4                       END;                /*DO WHILE                            */

  11695  2 003342   000600 470400 0                  LDP0    HDR$
         2 003343   000001 235100                    LDA     1,,PR0
         2 003344   003334 601000 2                  TNZ     s:11693

     1316    11696    3                     END;                  /* THEN                               */

  11696  2 003345   003360 710000 2                  TRA     s:11701

     1317    11697    3                   ELSE DO;

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:206  
     1318    11698    3                       SADTAB$=ADDR(SADTAB);

  11698  2 003346   000215 236000 3                  LDQ     141
         2 003347   200036 756100                    STQ     SADTAB$,,AUTO

     1319    11699    3                       SADTAB_PTR.WOFFS=SADTAB_PTR.WOFFS+HDRTYP;

  11699  2 003350   000642 235000 0                  LDA     HDRTYP
         2 003351   000022 771000                    ARL     18
         2 003352   200072 755100                    STA     BOOT$+4,,AUTO
         2 003353   200036 236100                    LDQ     SADTAB$,,AUTO
         2 003354   000022 772000                    QRL     18
         2 003355   200072 036100                    ADLQ    BOOT$+4,,AUTO
         2 003356   000000 621006                    EAX1    0,QL
         2 003357   200036 741100                    STX1    SADTAB$,,AUTO

     1320    11700    3                     END;                  /* ELSE                               */

     1321    11701    2                 HDR$=SADTAB_ENTRY$;

  11701  2 003360   200036 470500                    LDP0    SADTAB$,,AUTO
         2 003361   000000 236100                    LDQ     0,,PR0
         2 003362   000600 756000 0                  STQ     HDR$

     1322    11702    3                 IF BAS_HDR.DA=0 THEN DO;  /* This logical record doesn't exist  */

  11702  2 003363   000600 471400 0                  LDP1    HDR$
         2 003364   100001 235100                    LDA     1,,PR1
         2 003365   003372 601000 2                  TNZ     s:11708

     1323    11703    3                       HDRTYP=HDRTYP+1;    /* Try next logical record            */

  11703  2 003366   000642 220000 0                  LDX0    HDRTYP
         2 003367   000001 621010                    EAX1    1,X0
         2 003370   000642 741000 0                  STX1    HDRTYP

     1324    11704    3                       GOTO GT_DISKHDR;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:207  

  11704  2 003371   003320 710000 2                  TRA     GT_DISKHDR

     1325    11705    3                     END;                  /* THEN                               */
     1326    11706    2                   ELSE;
     1327    11707        /* Save this logical record */
     1328    11708    2                 HDRDA=BAS_HDR.DA;

  11708  2 003372   000643 755000 0                  STA     HDRDA

     1329    11709    2                 HDRBUF=BAS_HDR;

  11709  2 003373   000000 100500                    MLR     fill='000'O
         2 003374   100000 000020                    ADSC9   0,,PR1                   cn=0,n=16
         2 003375   000574 000020 0                  ADSC9   HDRBUF                   cn=0,n=16

     1330    11710    2                 HDRBUF.TINF.TYPE=HDRTYP;

  11710  2 003376   000642 220000 0                  LDX0    HDRTYP
         2 003377   000575 440000 0                  SXL0    HDRBUF+1

     1331    11711    2                 IF HDRBUF.BASE>=0 THEN HDRBUF.BASE=0; /* Use 0                  */

  11711  2 003400   000574 235000 0                  LDA     HDRBUF
         2 003401   003403 604000 2                  TMI     s:11713

  11711  2 003402   000574 450000 0                  STZ     HDRBUF

     1332    11712    2                   ELSE;
     1333    11713    2                 IF HDRTYP=%MPROCTC THEN;

  11713  2 003403   000004 100003                    CMPX0   4,DU
         2 003404   003407 600000 2                  TZE     s:11717

     1334    11714    2                   ELSE HDRTYP=HDRTYP+1;

  11714  2 003405   000001 621010                    EAX1    1,X0
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:208  
         2 003406   000642 741000 0                  STX1    HDRTYP

     1335    11715    2               END;                        /* ELSE                               */

     1336    11716        /* Process the header in HDRBUF */
     1337    11717    1           IF HDRBUF.TINF.TYPE<0 OR HDRBUF.TINF.TYPE>%PATCHTC THEN GOTO POHDRX;

  11717  2 003407   000575 720000 0                  LXL0    HDRBUF+1
         2 003410   004511 604000 2                  TMI     POHDRX
         2 003411   000022 100003                    CMPX0   18,DU
         2 003412   004511 605400 2                  TPNZ    POHDRX

     1338    11718        /* Stuff into error messages */
     1339    11719    1           MESSAGE$=ADDR(POHDRM);

  11719  2 003413   000216 236000 3                  LDQ     142
         2 003414   200054 756100                    STQ     MESSAGE$,,AUTO

     1340    11720    1           CALL BINCHAR(SUBSTR(TEXTM.TXT,35,2),HDRBUF.TINF.TYPE);

  11720  2 003415   200054 470500                    LDP0    MESSAGE$,,AUTO
         2 003416   000000 721100                    LXL1    0,,PR0
         2 003417   000100 301400                    BTD
         2 003420   000575 400002 0                  NDSC9   HDRBUF+1                 cn=2,s=lsgnf,sf=0,n=2
         2 003421   000011 630002                    NDSC9   9,,PR0                   cn=3,s=nosgn,sf=0,n=2

     1341    11721    1           MESSAGE$=ADDR(POLRM);

  11721  2 003422   000217 236000 3                  LDQ     143
         2 003423   200054 756100                    STQ     MESSAGE$,,AUTO

     1342    11722    1           CALL BINCHAR(SUBSTR(TEXTM.TXT,34,2),HDRBUF.TINF.TYPE);

  11722  2 003424   200054 470500                    LDP0    MESSAGE$,,AUTO
         2 003425   000000 720100                    LXL0    0,,PR0
         2 003426   000100 301400                    BTD
         2 003427   000575 400002 0                  NDSC9   HDRBUF+1                 cn=2,s=lsgnf,sf=0,n=2
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:209  
         2 003430   000011 430002                    NDSC9   9,,PR0                   cn=2,s=nosgn,sf=0,n=2

     1343    11723        /**/
     1344    11724    2           DO SELECT(HDRBUF.BASE);

  11724  2 003431   000574 236000 0                  LDQ     HDRBUF
         2 003432   000000 116003                    CMPQ    0,DU
         2 003433   003436 604000 2                  TMI     s:11724+5
         2 003434   003441 600000 2                  TZE     s:11727
         2 003435   003447 710000 2                  TRA     s:11732
         2 003436   000220 116000 3                  CMPQ    144
         2 003437   003447 601000 2                  TNZ     s:11732
         2 003440   003444 710000 2                  TRA     s:11730

     1345    11725    2             SELECT(0);

     1346    11726        /* Use next available page */
     1347    11727    2             HDRBUF.BASE=NAVPG;

  11727  2 003441   000000 235000 xsym               LDA     NAVPG
         2 003442   000574 755000 0                  STA     HDRBUF
         2 003443   003453 710000 2                  TRA     s:11735

     1348    11728    2             SELECT(-2);

     1349    11729        /* Use next available 8 words */
     1350    11730    2             HDRBUF.BASE=NAV8W;

  11730  2 003444   000000 235000 xsym               LDA     NAV8W
         2 003445   000574 755000 0                  STA     HDRBUF
         2 003446   003453 710000 2                  TRA     s:11735

     1351    11731    2             SELECT(ELSE);

     1352    11732    2           IF HDRBUF.BASE>0 THEN;          /* Use as it is                       */

  11732  2 003447   000000 116003                    CMPQ    0,DU
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:210  
         2 003450   003453 605400 2                  TPNZ    s:11735

     1353    11733    2             ELSE HDRBUF.BASE=NAVDW;       /* Use next available double word     */

  11733  2 003451   000000 235000 xsym               LDA     NAVDW
         2 003452   000574 755000 0                  STA     HDRBUF

     1354    11734    2           END;                            /* DO SELECT                          */

     1355    11735    1           HDR$=ADDR(HDRXLS);

  11735  2 003453   000054 236000 3                  LDQ     44
         2 003454   000600 756000 0                  STQ     HDR$

     1356    11736    1           HDR_PTR.WOFFS=HDR_PTR.WOFFS+HDRBUF.TINF.TYPE*4;
             11736                    /* Point to appropriate header */

  11736  2 003455   000600 235000 0                  LDA     HDR$
         2 003456   000022 771000                    ARL     18
         2 003457   200072 755100                    STA     BOOT$+4,,AUTO
         2 003460   000575 236000 0                  LDQ     HDRBUF+1
         2 003461   000022 736000                    QLS     18
         2 003462   000020 732000                    QRS     16
         2 003463   200072 036100                    ADLQ    BOOT$+4,,AUTO
         2 003464   000000 620006                    EAX0    0,QL
         2 003465   000600 740000 0                  STX0    HDR$

     1357    11737    2           IF BAS_HDR.BASE=0 THEN DO;      /* Not a duplicate                    */

  11737  2 003466   000600 471400 0                  LDP1    HDR$
         2 003467   100000 235100                    LDA     0,,PR1
         2 003470   003506 601000 2                  TNZ     s:11747

     1358    11738    2                 BAS_HDR=HDRBUF;           /* Move header                        */

  11738  2 003471   000100 100400                    MLR     fill='000'O
         2 003472   000574 000020 0                  ADSC9   HDRBUF                   cn=0,n=16
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:211  
         2 003473   100000 000020                    ADSC9   0,,PR1                   cn=0,n=16

     1359    11739    2                 BAS_HDR.DA=NAVDA;         /* And fill in disk address           */

  11739  2 003474   000000 235000 xsym               LDA     NAVDA
         2 003475   100001 755100                    STA     1,,PR1

     1360    11740    2                 IF HDRBUF.TINF.TYPE=%PATCHTC THEN GOTO POHDRR;
             11740                          /* Patches->normal return */

  11740  2 003476   000575 721000 0                  LXL1    HDRBUF+1
         2 003477   000022 101003                    CMPX1   18,DU
         2 003500   004000 600000 2                  TZE     POHDRR

     1361    11741    2                 IF HDRBUF.TINF.TYPE=%MSCHEMTC OR

  11741  2 003501   000010 101003                    CMPX1   8,DU
         2 003502   004657 600000 2                  TZE     PODBS
         2 003503   000017 101003                    CMPX1   15,DU
         2 003504   004657 600000 2                  TZE     PODBS

     1362    11742    2                   HDRBUF.TINF.TYPE=%ASCHEMTC THEN GOTO PODBS;
             11742                            /* Debug schema or alternate schema->special processing */
     1363    11743    2                   ELSE;
     1364    11744    2               END;                        /* THEN                               */

  11744  2 003505   003530 710000 2                  TRA     POLR1

     1365    11745    2             ELSE DO;

     1366    11746        /* See if a monitor overlay */
     1367    11747    2                 IF HDRBUF.TINF.TYPE~=%MPROCTC THEN GOTO POHDRX; /* Error        */

  11747  2 003506   000575 721000 0                  LXL1    HDRBUF+1
         2 003507   000004 101003                    CMPX1   4,DU
         2 003510   004511 601000 2                  TNZ     POHDRX

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:212  
     1368    11748    2                   ELSE;                   /* It's a mon overlay                 */
     1369    11749    2                 HDR$=ADDR(HDRMP1);

  11749  2 003511   000214 236000 3                  LDQ     140
         2 003512   000600 756000 0                  STQ     HDR$

     1370    11750    2   FIND_SLOT:
     1371    11751    3                 IF BAS_HDR.BASE=0 THEN DO;

  11751  2 003513   000600 470400 0     FIND_SLOT    LDP0    HDR$
         2 003514   000000 235100                    LDA     0,,PR0
         2 003515   003524 601000 2                  TNZ     s:11757

     1372    11752        /* Move header to appropriate place */
     1373    11753    3                       BAS_HDR=HDRBUF;

  11753  2 003516   000100 100400                    MLR     fill='000'O
         2 003517   000574 000020 0                  ADSC9   HDRBUF                   cn=0,n=16
         2 003520   000000 000020                    ADSC9   0,,PR0                   cn=0,n=16

     1374    11754    3                       BAS_HDR.DA=NAVDA;   /* Fill in disk address               */

  11754  2 003521   000000 235000 xsym               LDA     NAVDA
         2 003522   000001 755100                    STA     1,,PR0

     1375    11755    3                     END;                  /* THEN                               */

  11755  2 003523   003530 710000 2                  TRA     POLR1

     1376    11756    3                   ELSE DO;

     1377    11757    3                       HDR_PTR.WOFFS=HDR_PTR.WOFFS+4;

  11757  2 003524   000600 220000 0                  LDX0    HDR$
         2 003525   000004 621010                    EAX1    4,X0
         2 003526   000600 741000 0                  STX1    HDR$

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:213  
     1378    11758    3                       GOTO FIND_SLOT;

  11758  2 003527   003513 710000 2                  TRA     FIND_SLOT

     1379    11759    3                     END;                  /* ELSE                               */
     1380    11760    2               END;                        /* ELSE                               */
     1381    11761    1   POLR1:
     1382    11762        /* Initialize pointer to CP6 buffer */
     1383    11763    1           CP6_BUF_PTR='0'B;

  11763  2 003530   000650 450000 0     POLR1        STZ     CP6_BUF$

     1384    11764    1           CP6_BUF_PTR.S_D_FIELD=%ALS_PO;

  11764  2 003531   006006 236007                    LDQ     3078,DL
         2 003532   000650 752003 0                  STCQ    CP6_BUF$,'03'O

     1385    11765        /* Read logical record into memory as specified in header */
     1386    11766    1           IF HDRBUF.TYPE=0 THEN CODE=%FCNRTB; /* 0->Binary                      */

  11766  2 003533   000577 220000 0                  LDX0    HDRBUF+3
         2 003534   003537 601000 2                  TNZ     s:11767

  11766  2 003535   200042 450100                    STZ     CODE,,AUTO
         2 003536   003541 710000 2                  TRA     POLR11

     1387    11767    1             ELSE CODE=%FCNRT9;            /* Else->ASCII                        */

  11767  2 003537   000002 235007                    LDA     2,DL
         2 003540   200042 755100                    STA     CODE,,AUTO

     1388    11768    1   POLR11:
     1389    11769    1           PODCW.TALLY=1024;

  11769  2 003541   002000 236007       POLR11       LDQ     1024,DL
         2 003542   000606 752003 0                  STCQ    POB$,'03'O

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:214  
     1390    11770    1           AALS.PODESC.BASE=HDRBUF.BASE*4; /* Place where the record has to go   */

  11770  2 003543   000000 470400 0                  LDP0    AALS$
         2 003544   000574 235000 0                  LDA     HDRBUF
         2 003545   000002 735000                    ALS     2
         2 003546   000015 755100                    STA     13,,PR0

     1391    11771    1           LGTH=HDRBUF.SIZE;

  11771  2 003547   000576 235000 0                  LDA     HDRBUF+2
         2 003550   200053 755100                    STA     LGTH,,AUTO

     1392    11772    1   POLR:
     1393    11773    1           IF LGTH<=0 THEN GOTO POLRE;     /* That's all                         */

  11773  2 003551   200053 235100       POLR         LDA     LGTH,,AUTO
         2 003552   003707 604400 2                  TMOZ    POLRE

     1394    11774    1             ELSE;
     1395    11775    1           IF LGTH>1024 THEN;

  11775  2 003553   002000 115007                    CMPA    1024,DL
         2 003554   003557 605400 2                  TPNZ    s:11777

     1396    11776    1             ELSE PODCW.TALLY=LGTH;

  11776  2 003555   200053 236100                    LDQ     LGTH,,AUTO
         2 003556   000606 752003 0                  STCQ    POB$,'03'O

     1397    11777    1           LGTH=LGTH-1024;

  11777  2 003557   002000 336007                    LCQ     1024,DL
         2 003560   200053 056100                    ASQ     LGTH,,AUTO

     1398    11778    1   GETLREC:
     1399    11779    1           IF RCV_FLG='0'B THEN CALL MINIQC_PL6(IPO_INDX,ADDR(PODCW),0,CODE) ALTRET(
             11779                    POLRX);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:215  

  11779  2 003561   000000 236000 xsym  GETLREC      LDQ     RCV_FLG
         2 003562   740000 316003                    CANQ    -16384,DU
         2 003563   003603 601000 2                  TNZ     s:11782

  11779  2 003564   000104 236000 3                  LDQ     68
         2 003565   200072 756100                    STQ     BOOT$+4,,AUTO
         2 003566   200042 630500                    EPPR0   CODE,,AUTO
         2 003567   200077 450500                    STP0    BOOT$+9,,AUTO
         2 003570   000014 236000 3                  LDQ     12
         2 003571   200076 756100                    STQ     BOOT$+8,,AUTO
         2 003572   200072 631500                    EPPR1   BOOT$+4,,AUTO
         2 003573   200075 451500                    STP1    BOOT$+7,,AUTO
         2 003574   000212 236000 3                  LDQ     138
         2 003575   200074 756100                    STQ     BOOT$+6,,AUTO
         2 003576   200074 630500                    EPPR0   BOOT$+6,,AUTO
         2 003577   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 003600   000000 701000 xent               TSX1    MINIQC_PL6
         2 003601   004516 702000 2                  TSX2    POLRX
         2 003602   003624 710000 2                  TRA     s:11786

     1400    11780    2             ELSE DO;

     1401    11781        /* Read one block from disk */
     1402    11782    2                 CALL MINIQC_PL6(SYS_DPX,ADDR(PODCW),0,%FCNRDB,HDRDA) ALTRET(POLRX);

  11782  2 003603   000104 236000 3                  LDQ     68
         2 003604   200072 756100                    STQ     BOOT$+4,,AUTO
         2 003605   000222 237000 3                  LDAQ    146
         2 003606   200076 757100                    STAQ    BOOT$+8,,AUTO
         2 003607   000014 236000 3                  LDQ     12
         2 003610   200075 756100                    STQ     BOOT$+7,,AUTO
         2 003611   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 003612   200074 450500                    STP0    BOOT$+6,,AUTO
         2 003613   000016 236000 3                  LDQ     14
         2 003614   200073 756100                    STQ     BOOT$+5,,AUTO
         2 003615   200073 630500                    EPPR0   BOOT$+5,,AUTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:216  
         2 003616   000023 631400 xsym               EPPR1   B_VECTNIL+19
         2 003617   000000 701000 xent               TSX1    MINIQC_PL6
         2 003620   004516 702000 2                  TSX2    POLRX

     1403    11783    2                 HDRDA=HDRDA+1;

  11783  2 003621   000643 235000 0                  LDA     HDRDA
         2 003622   000001 035007                    ADLA    1,DL
         2 003623   000643 755000 0                  STA     HDRDA

     1404    11784    2               END;                        /* ELSE                               */

     1405    11785                                                /* End GETLREC                        */
     1406    11786    1           IF RCV_FLG~='0'B THEN GOTO POMVLR; /* Coming from disk, don't write disk */

  11786  2 003624   000000 236000 xsym               LDQ     RCV_FLG
         2 003625   740000 316003                    CANQ    -16384,DU
         2 003626   003650 601000 2                  TNZ     POMVLR

     1407    11787        /* Write it out to disk */
     1408    11788    1   POBUMPDA:
     1409    11789    1           IF NAVDA+1<ADIR.DUMP.DA OR NF_FLG='0'B THEN;
             11789                    /* There is more room or we can extend if new files */

  11789  2 003627   000000 236000 xsym  POBUMPDA     LDQ     NAVDA
         2 003630   000001 036007                    ADLQ    1,DL
         2 003631   000205 116000 0                  CMPQ    ADIR+129
         2 003632   003645 602000 2                  TNC     NOT2BIG
         2 003633   000000 236000 xsym               LDQ     NF_FLG
         2 003634   700000 316003                    CANQ    -32768,DU
         2 003635   003645 600000 2                  TZE     NOT2BIG

     1410    11790    2             ELSE DO;

     1411    11791    2   TOOBIG:
     1412    11792    2                 CALL TYPEC(VID2BIG);

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:217  
  11792  2 003636   000221 630400 3     TOOBIG       EPPR0   145
         2 003637   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 003640   000000 701000 xent               TSX1    TYPEC
         2 003641   000000 011000                    NOP     0

     1413    11793    2                 UNWIND TO EDCIASK;

  11793  2 003642   000644 237200 0                  LDAQ  ! EDCIASK
         2 003643   000000 700200 xent               TSX0  ! X66_AUNWIND
         2 003644   000000 000200                    ZERO    0,128

     1414    11794    2               END;                        /* ELSE                               */
     1415    11795    1   NOT2BIG:
     1416    11796    1           NAVDA=NAVDA+1;

  11796  2 003645   000000 235000 xsym  NOT2BIG      LDA     NAVDA
         2 003646   000001 035007                    ADLA    1,DL
         2 003647   000000 755000 xsym               STA     NAVDA

     1417    11797        /* Move block from AARDV buffer to CP6 */
     1418    11798    1   POMVLR:
     1419    11799    2           IF AALS.PODESC.BASE=0 THEN DO;  /* This is page 0*/

  11799  2 003650   000000 470400 0     POMVLR       LDP0    AALS$
         2 003651   000015 235100                    LDA     13,,PR0
         2 003652   003665 601000 2                  TNZ     s:11806

     1420    11800    2                 AALS.PODESC.BASE=64*4;    /* Skip fault vectors etc             */

  11800  2 003653   000400 236007                    LDQ     256,DL
         2 003654   000015 756100                    STQ     13,,PR0

     1421    11801    2                 CP6_BUF_LGTH=(1024-64)*4; /* Adjust size                        */

  11801  2 003655   007400 235007                    LDA     3840,DL
         2 003656   200033 755100                    STA     CP6_BUF_LGTH,,AUTO

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:218  
     1422    11802    2                 AARD_BUF$=ADDR(POBUF);

  11802  2 003657   000103 236000 3                  LDQ     67
         2 003660   000651 756000 0                  STQ     AARD_BUF$

     1423    11803    2                 AARD_BUF_PTR.WOFFS=AARD_BUF_PTR.WOFFS+64;

  11803  2 003661   000651 220000 0                  LDX0    AARD_BUF$
         2 003662   000100 621010                    EAX1    64,X0
         2 003663   000651 741000 0                  STX1    AARD_BUF$

     1424    11804    2               END;                        /* THEN                               */

  11804  2 003664   003673 710000 2                  TRA     POMVLR2

     1425    11805    2             ELSE DO;

     1426    11806    2                 CP6_BUF_LGTH=PODCW.TALLY*4;

  11806  2 003665   000606 236000 0                  LDQ     POB$
         2 003666   000002 736000                    QLS     2
         2 003667   037774 376007                    ANQ     16380,DL
         2 003670   200033 756100                    STQ     CP6_BUF_LGTH,,AUTO

     1427    11807    2                 AARD_BUF$=ADDR(POBUF);

  11807  2 003671   000103 236000 3                  LDQ     67
         2 003672   000651 756000 0                  STQ     AARD_BUF$

     1428    11808    2               END;                        /* ELSE                               */

     1429    11809    1   POMVLR2:
     1430    11810    1           CP6_BUF=AARD_BUF;

  11810  2 003673   000651 471400 0     POMVLR2      LDP1    AARD_BUF$
         2 003674   010000 220003                    LDX0    4096,DU
         2 003675   000650 473400 0                  LDP3    CP6_BUF$
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:219  
         2 003676   200033 721100                    LXL1    CP6_BUF_LGTH,,AUTO
         2 003677   040140 100540                    MLR     fill='040'O
         2 003700   100000 000010                    ADSC9   0,,PR1                   cn=0,n=*X0
         2 003701   300000 000011                    ADSC9   0,,PR3                   cn=0,n=*X1

     1431    11811    1           AALS.PODESC.BASE=AALS.PODESC.BASE+CP6_BUF_LGTH; /* Adjust for next block */

  11811  2 003702   000000 470400 0                  LDP0    AALS$
         2 003703   000015 236100                    LDQ     13,,PR0
         2 003704   200033 036100                    ADLQ    CP6_BUF_LGTH,,AUTO
         2 003705   000015 756100                    STQ     13,,PR0

     1432    11812    1           GOTO POLR;                      /* Continue reading logical record    */

  11812  2 003706   003551 710000 2                  TRA     POLR

     1433    11813    1   POLRE:                                  /* End of logical record              */
     1434    11814    1           IF HDRBUF.BASE=0 THEN GOTO POBT2; /* We just restored low physical pages */

  11814  2 003707   000574 235000 0     POLRE        LDA     HDRBUF
         2 003710   003132 600000 2                  TZE     POBT2

     1435    11815    2           IF(HDRBUF.TINF.TYPE=%MPROCTC AND HDRMP1.BASE=0) THEN DO;

  11815  2 003711   000575 720000 0                  LXL0    HDRBUF+1
         2 003712   000004 100003                    CMPX0   4,DU
         2 003713   003754 601000 2                  TNZ     s:11830
         2 003714   000504 236000 0                  LDQ     HDRMP1
         2 003715   003754 601000 2                  TNZ     s:11830

     1436    11816    2   POTIGR:                                 /* Setup TIGR data if disk boot       */
     1437    11817    2                 IF RCV_FLG='0'B THEN;     /* On tape boot don't do anything     */

  11817  2 003716   000000 236000 xsym  POTIGR       LDQ     RCV_FLG
         2 003717   740000 316003                    CANQ    -16384,DU
         2 003720   003754 600000 2                  TZE     s:11830

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:220  
     1438    11818    3                   ELSE DO;

     1439    11819    3                       HDRBUF=ADIR.TIGRDATA;
             11819                                /* Move header from syst area directory to HDRBUF */

  11819  2 003721   000000 100400                    MLR     fill='000'O
         2 003722   000120 000020 0                  ADSC9   ADIR+76                  cn=0,n=16
         2 003723   000574 000020 0                  ADSC9   HDRBUF                   cn=0,n=16

     1440    11820    3                       HDRDA=HDRBUF.DA;    /* Setup DA for TIGR data             */

  11820  2 003724   000575 235000 0                  LDA     HDRBUF+1
         2 003725   000643 755000 0                  STA     HDRDA

     1441    11821    3                       NAVDW=(AALS.PODESC.BASE/4+1)/2*2;

  11821  2 003726   000000 470400 0                  LDP0    AALS$
         2 003727   000015 236100                    LDQ     13,,PR0
         2 003730   000004 506007                    DIV     4,DL
         2 003731   000001 036007                    ADLQ    1,DL
         2 003732   000002 506007                    DIV     2,DL
         2 003733   000001 736000                    QLS     1
         2 003734   000000 756000 xsym               STQ     NAVDW

     1442    11822    3                       NAV8W=(AALS.PODESC.BASE/4+7)/8*8;

  11822  2 003735   000015 236100                    LDQ     13,,PR0
         2 003736   000004 506007                    DIV     4,DL
         2 003737   000007 036007                    ADLQ    7,DL
         2 003740   000010 506007                    DIV     8,DL
         2 003741   000003 736000                    QLS     3
         2 003742   000000 756000 xsym               STQ     NAV8W

     1443    11823    3                       NAVPG=(AALS.PODESC.BASE/4+1023)/1024*1024;

  11823  2 003743   000015 236100                    LDQ     13,,PR0
         2 003744   000004 506007                    DIV     4,DL
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:221  
         2 003745   001777 036007                    ADLQ    1023,DL
         2 003746   002000 506007                    DIV     1024,DL
         2 003747   000012 736000                    QLS     10
         2 003750   000000 756000 xsym               STQ     NAVPG

     1444    11824    3                       HDRBUF.BASE=NAVPG;

  11824  2 003751   000574 756000 0                  STQ     HDRBUF

     1445    11825    3                       ADIR.TIGRDATA.BASE=NAVPG;

  11825  2 003752   000120 756000 0                  STQ     ADIR+76

     1446    11826    3                       GOTO POLR1;

  11826  2 003753   003530 710000 2                  TRA     POLR1

     1447    11827    3                     END;                  /* ELSE                               */
     1448    11828    2               END;                        /* THEN                               */
     1449    11829    1             ELSE;
     1450    11830    1           NAVDW=((AALS.PODESC.BASE/4+1)/2)*2;

  11830  2 003754   000000 470400 0                  LDP0    AALS$
         2 003755   000015 236100                    LDQ     13,,PR0
         2 003756   000004 506007                    DIV     4,DL
         2 003757   000001 036007                    ADLQ    1,DL
         2 003760   000002 506007                    DIV     2,DL
         2 003761   000001 736000                    QLS     1
         2 003762   000000 756000 xsym               STQ     NAVDW

     1451    11831    1           NAV8W=((AALS.PODESC.BASE/4+7)/8)*8;

  11831  2 003763   000015 236100                    LDQ     13,,PR0
         2 003764   000004 506007                    DIV     4,DL
         2 003765   000007 036007                    ADLQ    7,DL
         2 003766   000010 506007                    DIV     8,DL
         2 003767   000003 736000                    QLS     3
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:222  
         2 003770   000000 756000 xsym               STQ     NAV8W

     1452    11832    1           NAVPG=((AALS.PODESC.BASE/4+1023)/1024)*1024;

  11832  2 003771   000015 236100                    LDQ     13,,PR0
         2 003772   000004 506007                    DIV     4,DL
         2 003773   001777 036007                    ADLQ    1023,DL
         2 003774   002000 506007                    DIV     1024,DL
         2 003775   000012 736000                    QLS     10
         2 003776   000000 756000 xsym               STQ     NAVPG

     1453    11833    1           GOTO POHDR;

  11833  2 003777   003300 710000 2                  TRA     POHDR

  11832  2 004000                       POHDRR       null
     1454    11834    1   POHDRR: ;
     1455    11835    1   BLDSC:                                  /* Build MINIDELTA descriptors        */
     1456    11836    2           IF HDRGR.BASE~=0 THEN DO;       /* Base of Ghost1 ROSEG               */

  11836  2 004000   000434 236000 0     BLDSC        LDQ     HDRGR
         2 004001   004034 600000 2                  TZE     BLDSC0

     1457    11837    2                 BASEH1=HDRGR.BASE;        /* Save it                            */

  11837  2 004002   000632 756000 0                  STQ     BASEH1

     1458    11838    2                 AALS.DESCH1.BASE=BASEH1*4; /* Convert to bytes                  */

  11838  2 004003   000632 235000 0                  LDA     BASEH1
         2 004004   000002 735000                    ALS     2
         2 004005   000000 473400 0                  LDP3    AALS$
         2 004006   300131 755100                    STA     89,,PR3

     1459    11839    2                 HDRGR.BASE=HDRGR.BASE+1024; /* Adjust base without HJIT         */

  11839  2 004007   002000 236007                    LDQ     1024,DL
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:223  
         2 004010   000434 056000 0                  ASQ     HDRGR

     1460    11840    2                 HDRGR.SIZE=HDRGR.SIZE-1024; /* Adjust bound                     */

  11840  2 004011   000436 235000 0                  LDA     HDRGR+2
         2 004012   002000 135007                    SBLA    1024,DL
         2 004013   000436 755000 0                  STA     HDRGR+2

     1461    11841    2                 BASEGPT=NAVPG;            /* Assign Ghost1 PT                   */

  11841  2 004014   000000 235000 xsym               LDA     NAVPG
         2 004015   000634 755000 0                  STA     BASEGPT

     1462    11842    2                 AALS.DESCGPT.BASE=BASEGPT*4;

  11842  2 004016   000002 735000                    ALS     2
         2 004017   300233 755100                    STA     155,,PR3

     1463    11843    2                 BASEJ1=BASEGPT+1024;      /* Assign Ghost1 JIT                  */

  11843  2 004020   000634 235000 0                  LDA     BASEGPT
         2 004021   002000 035007                    ADLA    1024,DL
         2 004022   000631 755000 0                  STA     BASEJ1

     1464    11844    2                 AALS.DESCJ1.BASE=BASEJ1*4;

  11844  2 004023   000002 735000                    ALS     2
         2 004024   300127 755100                    STA     87,,PR3

     1465    11845    2                 AALS.DESCT1.BASE=AALS.DESCJ1.BASE+%JIT_SIZEC;
             11845                          /* Ghost1 TSTACK descriptor */

  11845  2 004025   001730 035007                    ADLA    984,DL
         2 004026   300143 755100                    STA     99,,PR3

     1466    11846    2                 NAVPG=NAVPG+3*1024;

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:224  
  11846  2 004027   000000 235000 xsym               LDA     NAVPG
         2 004030   006000 035007                    ADLA    3072,DL
         2 004031   000000 755000 xsym               STA     NAVPG

     1467    11847    2                 NAVDW=NAVPG;

  11847  2 004032   000000 755000 xsym               STA     NAVDW

     1468    11848    2                 NAV8W=NAVPG;

  11848  2 004033   000000 755000 xsym               STA     NAV8W

     1469    11849    2               END;                        /* THEN                               */

     1470    11850    1             ELSE;
     1471    11851    1   BLDSC0:
     1472    11852    1           HDR$=ADDR(HDRXLS);

  11852  2 004034   000054 236000 3     BLDSC0       LDQ     44
         2 004035   000600 756000 0                  STQ     HDR$

     1473    11853    1           DESCR$=ADDR(AALS.DESCXL);

  11853  2 004036   000000 236000 0                  LDQ     AALS$
         2 004037   000020 036003                    ADLQ    16,DU
         2 004040   200034 756100                    STQ     DESCR$,,AUTO

     1474    11854    2           DO I=%XDLTLSTC TO %MROSEGTC;    /* All PO headers and descriptors     */

  11854  2 004041   200037 450100                    STZ     I,,AUTO

     1475    11855    2             IF BAS_HDR.SIZE=0 THEN;       /* 0-> Not present on PO tape         */

  11855  2 004042   000600 470400 0                  LDP0    HDR$
         2 004043   000002 235100                    LDA     2,,PR0
         2 004044   004064 600000 2                  TZE     s:11861

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:225  
     1476    11856    3               ELSE DO;

     1477    11857    3                   BAS_DESCR.BOUND=(BAS_HDR.SIZE-1)*4;

  11857  2 004045   200034 471500                    LDP1    DESCR$,,AUTO
         2 004046   000002 236100                    LDQ     2,,PR0
         2 004047   000002 736000                    QLS     2
         2 004050   000004 136007                    SBLQ    4,DL
         2 004051   000020 736000                    QLS     16
         2 004052   100000 676100                    ERQ     0,,PR1
         2 004053   000034 376000 xsym               ANQ     B_VECTNIL+28
         2 004054   100000 656100                    ERSQ    0,,PR1

     1478    11858    3                   BAS_DESCR.BASE=BAS_HDR.BASE*4; /* Convert to bytes            */

  11858  2 004055   000000 235100                    LDA     0,,PR0
         2 004056   000002 735000                    ALS     2
         2 004057   100001 755100                    STA     1,,PR1

     1479    11859    3                   BAS_DESCR=BAS_DESCR|AALS.DESCD;
             11859                            /* Fill in fields from dummy descriptor */

  11859  2 004060   000000 473400 0                  LDP3    AALS$
         2 004061   100000 237100                    LDAQ    0,,PR1
         2 004062   300320 277100                    ORAQ    208,,PR3
         2 004063   100000 757100                    STAQ    0,,PR1

     1480    11860    3                 END;                      /* ELSE                               */

     1481    11861    2             HDR$=PINCRW(HDR$,4);          /* Go to next header                  */

  11861  2 004064   000600 236000 0                  LDQ     HDR$
         2 004065   000004 036003                    ADLQ    4,DU
         2 004066   000600 756000 0                  STQ     HDR$

     1482    11862    2             DESCR$=PINCRW(DESCR$,2);      /* and next descriptor                */

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:226  
  11862  2 004067   200034 236100                    LDQ     DESCR$,,AUTO
         2 004070   000002 036003                    ADLQ    2,DU
         2 004071   200034 756100                    STQ     DESCR$,,AUTO

     1483    11863    2           END;                            /* DO I=                              */

  11863  2 004072   200037 054100                    AOS     I,,AUTO
         2 004073   200037 235100                    LDA     I,,AUTO
         2 004074   000021 115007                    CMPA    17,DL
         2 004075   004042 604400 2                  TMOZ    s:11855

     1484    11864        /* Fix monitor overlay descriptors */
     1485    11865    1           HDR$=ADDR(HDRMP1);

  11865  2 004076   000214 236000 3                  LDQ     140
         2 004077   000600 756000 0                  STQ     HDR$

     1486    11866    1           DESCR$=ADDR(AALS.DESCMP1);

  11866  2 004100   000000 236000 0                  LDQ     AALS$
         2 004101   000064 036003                    ADLQ    52,DU
         2 004102   200034 756100                    STQ     DESCR$,,AUTO

     1487    11867    2           DO I=0 TO 13;                   /* 14 Mon overlay headers             */

  11867  2 004103   200037 450100                    STZ     I,,AUTO

     1488    11868    2             IF BAS_HDR.SIZE=0 THEN;       /* 0-> Not present on PO tape         */

  11868  2 004104   000600 470400 0                  LDP0    HDR$
         2 004105   000002 235100                    LDA     2,,PR0
         2 004106   004126 600000 2                  TZE     s:11874

     1489    11869    3               ELSE DO;

     1490    11870    3                   BAS_DESCR.BOUND=(BAS_HDR.SIZE-1)*4;

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:227  
  11870  2 004107   200034 471500                    LDP1    DESCR$,,AUTO
         2 004110   000002 236100                    LDQ     2,,PR0
         2 004111   000002 736000                    QLS     2
         2 004112   000004 136007                    SBLQ    4,DL
         2 004113   000020 736000                    QLS     16
         2 004114   100000 676100                    ERQ     0,,PR1
         2 004115   000034 376000 xsym               ANQ     B_VECTNIL+28
         2 004116   100000 656100                    ERSQ    0,,PR1

     1491    11871    3                   BAS_DESCR.BASE=BAS_HDR.BASE*4; /* Convert to bytes            */

  11871  2 004117   000000 235100                    LDA     0,,PR0
         2 004120   000002 735000                    ALS     2
         2 004121   100001 755100                    STA     1,,PR1

     1492    11872    3                   BAS_DESCR=BAS_DESCR|AALS.DESCD;
             11872                            /* Fill in fields from dummy descriptor */

  11872  2 004122   000000 473400 0                  LDP3    AALS$
         2 004123   100000 237100                    LDAQ    0,,PR1
         2 004124   300320 277100                    ORAQ    208,,PR3
         2 004125   100000 757100                    STAQ    0,,PR1

     1493    11873    3                 END;                      /* ELSE                               */

     1494    11874    2             HDR$=PINCRW(HDR$,4);          /* Go to next header                  */

  11874  2 004126   000600 236000 0                  LDQ     HDR$
         2 004127   000004 036003                    ADLQ    4,DU
         2 004130   000600 756000 0                  STQ     HDR$

     1495    11875    2             DESCR$=PINCRW(DESCR$,2);      /* and next descriptor                */

  11875  2 004131   200034 236100                    LDQ     DESCR$,,AUTO
         2 004132   000002 036003                    ADLQ    2,DU
         2 004133   200034 756100                    STQ     DESCR$,,AUTO

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:228  
     1496    11876    2           END;                            /* DO I=                              */

  11876  2 004134   200037 054100                    AOS     I,,AUTO
         2 004135   200037 235100                    LDA     I,,AUTO
         2 004136   000015 115007                    CMPA    13,DL
         2 004137   004104 604400 2                  TMOZ    s:11868

     1497    11877        /* Fix DESCSCH descriptor to frame OU headers only */
     1498    11878    1           AALS.DESCSCH.BOUND=(TEMPO1-1)*4+3;

  11878  2 004140   000000 470400 0                  LDP0    AALS$
         2 004141   000655 236000 0                  LDQ     TEMPO1
         2 004142   000002 736000                    QLS     2
         2 004143   000001 136007                    SBLQ    1,DL
         2 004144   000020 736000                    QLS     16
         2 004145   000040 676100                    ERQ     32,,PR0
         2 004146   000034 376000 xsym               ANQ     B_VECTNIL+28
         2 004147   000040 656100                    ERSQ    32,,PR0

     1499    11879    1           INFO_PTR='0'B;

  11879  2 004150   200060 450100                    STZ     INFO$,,AUTO

     1500    11880    1           INFO_PTR.S_D_FIELD=%ALS_SCH;

  11880  2 004151   006020 236007                    LDQ     3088,DL
         2 004152   200060 752103                    STCQ    INFO$,'03'O,AUTO

     1501    11881    1           INFO$->HBAS_UBIN.H1=HDR1E.START;

  11881  2 004153   000453 720000 0                  LXL0    HDR1E+3
         2 004154   200060 471500                    LDP1    INFO$,,AUTO
         2 004155   100000 740100                    STX0    0,,PR1

     1502    11882        /* Store base for DESCSCH0 to DESCSCH11 */
     1503    11883    1           DESCR$=ADDR(AALS.DESCSCH0);

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:229  
  11883  2 004156   000000 236000 0                  LDQ     AALS$
         2 004157   000150 036003                    ADLQ    104,DU
         2 004160   200034 756100                    STQ     DESCR$,,AUTO

     1504    11884    1           PREVBASE=(HDRDBS.BASE+TEMPO1+1023)/1024*1024*4;
             11884                    /* Base of header segment +size of header segment;page boundary */

  11884  2 004161   000430 236000 0                  LDQ     HDRDBS
         2 004162   000655 036000 0                  ADLQ    TEMPO1
         2 004163   001777 036007                    ADLQ    1023,DL
         2 004164   002000 506007                    DIV     1024,DL
         2 004165   000014 736000                    QLS     12
         2 004166   200044 756100                    STQ     PREVBASE,,AUTO

     1505    11885    2           DO I=0 TO 11;

  11885  2 004167   200037 450100                    STZ     I,,AUTO

     1506    11886    2             BAS_DESCR.BASE=PREVBASE;

  11886  2 004170   200044 235100                    LDA     PREVBASE,,AUTO
         2 004171   200034 470500                    LDP0    DESCR$,,AUTO
         2 004172   000001 755100                    STA     1,,PR0

     1507    11887    2             DESCR$=PINCRW(DESCR$,2);      /* Bump pointer                       */

  11887  2 004173   200034 236100                    LDQ     DESCR$,,AUTO
         2 004174   000002 036003                    ADLQ    2,DU
         2 004175   200034 756100                    STQ     DESCR$,,AUTO

     1508    11888    2             PREVBASE=PREVBASE+256*1024*4; /* And bump base with 256K            */

  11888  2 004176   000004 035003                    ADLA    4,DU
         2 004177   200044 755100                    STA     PREVBASE,,AUTO

     1509    11889    2           END;                            /* DO I=                              */

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:230  
  11889  2 004200   200037 054100                    AOS     I,,AUTO
         2 004201   200037 235100                    LDA     I,,AUTO
         2 004202   000013 115007                    CMPA    11,DL
         2 004203   004170 604400 2                  TMOZ    s:11886

     1510    11890        /* Fix DESCASCH to frame OU headers only */
     1511    11891    1           AALS.DESCASCH.BOUND=(ITEMPO1-1)*4+3;

  11891  2 004204   000000 470400 0                  LDP0    AALS$
         2 004205   000657 236000 0                  LDQ     ITEMPO1
         2 004206   000002 736000                    QLS     2
         2 004207   000001 136007                    SBLQ    1,DL
         2 004210   000020 736000                    QLS     16
         2 004211   000056 676100                    ERQ     46,,PR0
         2 004212   000034 376000 xsym               ANQ     B_VECTNIL+28
         2 004213   000056 656100                    ERSQ    46,,PR0

     1512    11892        /* Store base for DESCASCH0 to DESCASCH11 */
     1513    11893    1           DESCR$=ADDR(AALS.DESCASCH0);

  11893  2 004214   000000 236000 0                  LDQ     AALS$
         2 004215   000200 036003                    ADLQ    128,DU
         2 004216   200034 756100                    STQ     DESCR$,,AUTO

     1514    11894    1           PREVBASE=(HDRAS.BASE+ITEMPO1+1023)/1024*1024*4;

  11894  2 004217   000464 236000 0                  LDQ     HDRAS
         2 004220   000657 036000 0                  ADLQ    ITEMPO1
         2 004221   001777 036007                    ADLQ    1023,DL
         2 004222   002000 506007                    DIV     1024,DL
         2 004223   000014 736000                    QLS     12
         2 004224   200044 756100                    STQ     PREVBASE,,AUTO

     1515    11895    2           DO I=0 TO 11;

  11895  2 004225   200037 450100                    STZ     I,,AUTO

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:231  
     1516    11896    2             BAS_DESCR.BASE=PREVBASE;

  11896  2 004226   200044 235100                    LDA     PREVBASE,,AUTO
         2 004227   200034 470500                    LDP0    DESCR$,,AUTO
         2 004230   000001 755100                    STA     1,,PR0

     1517    11897    2             DESCR$=PINCRW(DESCR$,2);      /* Bump pointer                       */

  11897  2 004231   200034 236100                    LDQ     DESCR$,,AUTO
         2 004232   000002 036003                    ADLQ    2,DU
         2 004233   200034 756100                    STQ     DESCR$,,AUTO

     1518    11898    2             PREVBASE=PREVBASE+256*1024*4; /* And bump base with 256K            */

  11898  2 004234   000004 035003                    ADLA    4,DU
         2 004235   200044 755100                    STA     PREVBASE,,AUTO

     1519    11899    2           END;                            /* DO I=                              */

  11899  2 004236   200037 054100                    AOS     I,,AUTO
         2 004237   200037 235100                    LDA     I,,AUTO
         2 004240   000013 115007                    CMPA    11,DL
         2 004241   004226 604400 2                  TMOZ    s:11896

     1520    11900    1           AALS.DESCSM.BASE=AALS.DESCH.BASE+%(MLS_SIZEC+SDS_SIZEC); /* Mon SSSTACK */

  11900  2 004242   000000 470400 0                  LDP0    AALS$
         2 004243   000025 235100                    LDA     21,,PR0
         2 004244   002300 035007                    ADLA    1216,DL
         2 004245   000135 755100                    STA     93,,PR0

     1521    11901    1           AALS.DESCAM.BASE=AALS.DESCSM.BASE+%SSS_SIZEC+1024*4;
             11901                    /* Mon ASTACK; Mon SSSTACK is one page bigger */

  11901  2 004246   014500 035007                    ADLA    6464,DL
         2 004247   000145 755100                    STA     101,,PR0

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:232  
     1522    11902    2           IF AALS.DESCH1.BASE~=0 THEN DO;

  11902  2 004250   000131 235100                    LDA     89,,PR0
         2 004251   004256 600000 2                  TZE     s:11908

     1523    11903    2                 AALS.DESCS1.BASE=AALS.DESCH1.BASE+%(MLS_SIZEC+SDS_SIZEC);
             11903                          /* Ghost1 SSSTACK */

  11903  2 004252   002300 035007                    ADLA    1216,DL
         2 004253   000137 755100                    STA     95,,PR0

     1524    11904    2                 AALS.DESCA1.BASE=AALS.DESCS1.BASE+%SSS_SIZEC; /* Ghost1 ASTACK  */

  11904  2 004254   004500 035007                    ADLA    2368,DL
         2 004255   000147 755100                    STA     103,,PR0

     1525    11905    2               END;                        /*THEN                                */

     1526    11906    1             ELSE;
     1527    11907        /* Fix Monitor and Ghost1 ISR descriptors */
     1528    11908    1           AALS.DESCMI.BOUND=(HDRMP0.SIZE+HDRMP0.BASE-HDRMD.BASE-1)*4+3;
             11908                    /* Procedure size+procedure base-data base */

  11908  2 004256   000412 236000 0                  LDQ     HDRMP0+2
         2 004257   000410 036000 0                  ADLQ    HDRMP0
         2 004260   000404 136000 0                  SBLQ    HDRMD
         2 004261   000002 736000                    QLS     2
         2 004262   000001 136007                    SBLQ    1,DL
         2 004263   000020 736000                    QLS     16
         2 004264   000120 676100                    ERQ     80,,PR0
         2 004265   000034 376000 xsym               ANQ     B_VECTNIL+28
         2 004266   000120 656100                    ERSQ    80,,PR0

     1529    11909    1           AALS.DESCMI.BASE=HDRMD.BASE*4;

  11909  2 004267   000404 235000 0                  LDA     HDRMD
         2 004270   000002 735000                    ALS     2
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:233  
         2 004271   000121 755100                    STA     81,,PR0

     1530    11910    1           AALS.DESCMI=AALS.DESCMI|AALS.DESCD;

  11910  2 004272   000120 237100                    LDAQ    80,,PR0
         2 004273   000320 277100                    ORAQ    208,,PR0
         2 004274   000120 757100                    STAQ    80,,PR0

     1531    11911    1           AALS.DESCGI.BOUND=(HDRGP.SIZE+HDRGP.BASE-HDRGD.BASE-1)*4+3;
             11911                    /* Procedure size+procedure base-data base */

  11911  2 004275   000446 236000 0                  LDQ     HDRGP+2
         2 004276   000444 036000 0                  ADLQ    HDRGP
         2 004277   000440 136000 0                  SBLQ    HDRGD
         2 004300   000002 736000                    QLS     2
         2 004301   000001 136007                    SBLQ    1,DL
         2 004302   000020 736000                    QLS     16
         2 004303   000122 676100                    ERQ     82,,PR0
         2 004304   000034 376000 xsym               ANQ     B_VECTNIL+28
         2 004305   000122 656100                    ERSQ    82,,PR0

     1532    11912    1           AALS.DESCGI.BASE=HDRGD.BASE*4;

  11912  2 004306   000440 236000 0                  LDQ     HDRGD
         2 004307   000002 736000                    QLS     2
         2 004310   000123 756100                    STQ     83,,PR0

     1533    11913    1           AALS.DESCGI=AALS.DESCGI|AALS.DESCD;

  11913  2 004311   000122 237100                    LDAQ    82,,PR0
         2 004312   000320 277100                    ORAQ    208,,PR0
         2 004313   000122 757100                    STAQ    82,,PR0

     1534    11914    1           AALS.DESCTGM = TGMISCDESC;

  11914  2 004314   000000 237000 xsym               LDAQ    TGMISCDESC
         2 004315   000060 757100                    STAQ    48,,PR0
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:234  

     1535    11915        /* Fix Ghost1 ROSEG */
     1536    11916    2           IF RCV_FLG='0'B THEN DO;

  11916  2 004316   000000 236000 xsym               LDQ     RCV_FLG
         2 004317   740000 316003                    CANQ    -16384,DU
         2 004320   004426 601000 2                  TNZ     s:11945

     1537    11917    2                 INFO_PTR='0'B;

  11917  2 004321   200060 450100                    STZ     INFO$,,AUTO

     1538    11918    2                 INFO_PTR.S_D_FIELD=%ALS_G1RO; /* INFO$ frames Ghost1 ROSEG      */

  11918  2 004322   006021 236007                    LDQ     3089,DL
         2 004323   200060 752103                    STCQ    INFO$,'03'O,AUTO

     1539    11919    2                 SAV$=INFO$->B$ROSEG.DCBPTR$;

  11919  2 004324   200060 471500                    LDP1    INFO$,,AUTO
         2 004325   100000 236100                    LDQ     0,,PR1
         2 004326   200051 756100                    STQ     SAV$,,AUTO

     1540    11920    2                 SAV_PTR.WOFFS=SAV_PTR.WOFFS-1024;

  11920  2 004327   200051 220100                    LDX0    SAV$,,AUTO
         2 004330   776000 621010                    EAX1    -1024,X0
         2 004331   200051 741100                    STX1    SAV$,,AUTO

     1541    11921    2                 SAV_PTR.S_D_FIELD=%GLS_ROS;

  11921  2 004332   006003 236007                    LDQ     3075,DL
         2 004333   200051 752103                    STCQ    SAV$,'03'O,AUTO

     1542    11922    2                 INFO$->B$ROSEG.DCBPTR$=SAV$;

  11922  2 004334   200051 236100                    LDQ     SAV$,,AUTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:235  
         2 004335   100000 756100                    STQ     0,,PR1

     1543    11923        /* Fix DCB pointers */
     1544    11924    3                 DO I=1 TO INFO$->B$ROSEG.NUMDCBS;

  11924  2 004336   000001 235007                    LDA     1,DL
         2 004337   200037 755100                    STA     I,,AUTO
         2 004340   004365 710000 2                  TRA     s:11932+1

     1545    11925    3                   DCB$=PINCRW(INFO$,SAV_PTR.WOFFS)->B$RODCB$(I);

  11925  2 004341   200051 236100                    LDQ     SAV$,,AUTO
         2 004342   000022 772000                    QRL     18
         2 004343   200037 036100                    ADLQ    I,,AUTO
         2 004344   200060 470500                    LDP0    INFO$,,AUTO
         2 004345   000000 236106                    LDQ     0,QL,PR0
         2 004346   200052 756100                    STQ     DCB$,,AUTO

     1546    11926    3                   IF DCB_PTR.WOFFS=0 THEN; /* 0-> OK as it is                   */

  11926  2 004347   200052 220100                    LDX0    DCB$,,AUTO
         2 004350   004364 600000 2                  TZE     s:11932

     1547    11927    4                     ELSE DO;

     1548    11928    4                         DCB_PTR.WOFFS=DCB_PTR.WOFFS-1024;

  11928  2 004351   776000 621010                    EAX1    -1024,X0
         2 004352   200052 741100                    STX1    DCB$,,AUTO

     1549    11929    4                         DCB_PTR.S_D_FIELD=%GLS_ROS;

  11929  2 004353   006003 236007                    LDQ     3075,DL
         2 004354   200052 752103                    STCQ    DCB$,'03'O,AUTO

     1550    11930    4                         PINCRW(INFO$,SAV_PTR.WOFFS)->B$RODCB$(I)=DCB$;

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:236  
  11930  2 004355   200051 236100                    LDQ     SAV$,,AUTO
         2 004356   000022 772000                    QRL     18
         2 004357   200037 036100                    ADLQ    I,,AUTO
         2 004360   200072 756100                    STQ     BOOT$+4,,AUTO
         2 004361   200052 236100                    LDQ     DCB$,,AUTO
         2 004362   200072 720100                    LXL0    BOOT$+4,,AUTO
         2 004363   000000 756110                    STQ     0,X0,PR0

     1551    11931    4                       END;                /* ELSE*/

     1552    11932    3                 END;                      /* DO I=                              */

  11932  2 004364   200037 054100                    AOS     I,,AUTO
         2 004365   200060 470500                    LDP0    INFO$,,AUTO
         2 004366   000002 236100                    LDQ     2,,PR0
         2 004367   000022 772000                    QRL     18
         2 004370   200037 116100                    CMPQ    I,,AUTO
         2 004371   004341 605000 2                  TPL     s:11925

     1553    11933    2                 G1HJIT_PTR='0'B;

  11933  2 004372   200003 450100                    STZ     G1HJIT$,,AUTO

     1554    11934    2                 G1HJIT_PTR.S_D_FIELD=%ALS_HJIT1; /* G1HJIT$ points to Ghost1 HJIT */

  11934  2 004373   006054 236007                    LDQ     3116,DL
         2 004374   200003 752103                    STCQ    G1HJIT$,'03'O,AUTO

     1555    11935    2                 SAV$=INFO$->B$ROSEG.TREE$;

  11935  2 004375   000001 236100                    LDQ     1,,PR0
         2 004376   200051 756100                    STQ     SAV$,,AUTO

     1556    11936    2                 SAV_PTR.WOFFS=SAV_PTR.WOFFS-1024;

  11936  2 004377   200051 220100                    LDX0    SAV$,,AUTO
         2 004400   776000 621010                    EAX1    -1024,X0
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:237  
         2 004401   200051 741100                    STX1    SAV$,,AUTO

     1557    11937    2                 G1HJIT.DBLNK.TCB.BASE=SAV_PTR.WOFFS*4; /* Use it as base        */

  11937  2 004402   200051 235100                    LDA     SAV$,,AUTO
         2 004403   777777 375003                    ANA     -1,DU
         2 004404   000020 771000                    ARL     16
         2 004405   200003 471500                    LDP1    G1HJIT$,,AUTO
         2 004406   100147 755100                    STA     103,,PR1

     1558    11938    2                 G1HJIT.DBLNK.TCB.BOUND=(1023-MOD(SAV_PTR.WOFFS,1024))*4+3;
             11938                          /* bound is remainder of a page */

  11938  2 004407   200051 236100                    LDQ     SAV$,,AUTO
         2 004410   000022 772000                    QRL     18
         2 004411   001777 376007                    ANQ     1023,DL
         2 004412   000002 736000                    QLS     2
         2 004413   000027 676000 xsym               ERQ     B_VECTNIL+23
         2 004414   010000 036007                    ADLQ    4096,DL
         2 004415   000020 736000                    QLS     16
         2 004416   100146 676100                    ERQ     102,,PR1
         2 004417   000034 376000 xsym               ANQ     B_VECTNIL+28
         2 004420   100146 656100                    ERSQ    102,,PR1

     1559    11939    2                 SAV_PTR='0'B;

  11939  2 004421   200051 450100                    STZ     SAV$,,AUTO

     1560    11940    2                 SAV_PTR.S_D_FIELD=%GLS_NULL; /* Make TREE$ a null pointer       */

  11940  2 004422   006014 236007                    LDQ     3084,DL
         2 004423   200051 752103                    STCQ    SAV$,'03'O,AUTO

     1561    11941    2                 INFO$->B$ROSEG.TREE$=SAV$;

  11941  2 004424   200051 236100                    LDQ     SAV$,,AUTO
         2 004425   000001 756100                    STQ     1,,PR0
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:238  

     1562    11942    2               END;                        /* THEN                               */

     1563    11943    1             ELSE;
     1564    11944        /* Readjust Ghost1 ROSEG header base and bound for system area directory */
     1565    11945    1           HDRGR.BASE=BASEH1;

  11945  2 004426   000632 235000 0                  LDA     BASEH1
         2 004427   000434 755000 0                  STA     HDRGR

     1566    11946    1           HDRGR.SIZE=HDRGR.SIZE+1024;

  11946  2 004430   000436 236000 0                  LDQ     HDRGR+2
         2 004431   002000 036007                    ADLQ    1024,DL
         2 004432   000436 756000 0                  STQ     HDRGR+2

     1567    11947        /* Put segids into DEFDIR for XDELTA */
     1568    11948    1           INFO_PTR='0'B;

  11948  2 004433   200060 450100                    STZ     INFO$,,AUTO

     1569    11949    1           INFO_PTR.S_D_FIELD=%ALS_DEFDIR;

  11949  2 004434   006031 236007                    LDQ     3097,DL
         2 004435   200060 752103                    STCQ    INFO$,'03'O,AUTO

     1570    11950    1           J=10;                           /* Root node ENTDEF ptr               */

  11950  2 004436   000012 235007                    LDA     10,DL
         2 004437   200040 755100                    STA     J,,AUTO

     1571    11951    2           DO I=INFO$->HBAS_UBIN.H2 DOWNTO 0;

  11951  2 004440   200060 470500                    LDP0    INFO$,,AUTO
         2 004441   000000 236100                    LDQ     0,,PR0
         2 004442   777777 376007                    ANQ     -1,DL
         2 004443   200037 756100                    STQ     I,,AUTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:239  
         2 004444   004471 710000 2                  TRA     s:11956+2

     1572    11952    2             PINCRW(INFO$,J)->BAS_PTR.S_D_FIELD=%XDLS_ENT;

  11952  2 004445   200060 470500                    LDP0    INFO$,,AUTO
         2 004446   200040 720100                    LXL0    J,,AUTO
         2 004447   000000 236110                    LDQ     0,X0,PR0
         2 004450   000224 376000 3                  ANQ     148
         2 004451   006004 276007                    ORQ     3076,DL
         2 004452   000000 756110                    STQ     0,X0,PR0

     1573    11953    2             PINCRW(INFO$,J+1)->BAS_PTR.S_D_FIELD=%XDLS_SYM;

  11953  2 004453   200060 470500                    LDP0    INFO$,,AUTO
         2 004454   000001 236110                    LDQ     1,X0,PR0
         2 004455   000224 376000 3                  ANQ     148
         2 004456   006005 276007                    ORQ     3077,DL
         2 004457   000001 756110                    STQ     1,X0,PR0

     1574    11954    2             PINCRW(INFO$,J+2)->BAS_PTR.S_D_FIELD=%XDLS_DEF;

  11954  2 004460   200060 470500                    LDP0    INFO$,,AUTO
         2 004461   000002 236110                    LDQ     2,X0,PR0
         2 004462   000224 376000 3                  ANQ     148
         2 004463   006006 276007                    ORQ     3078,DL
         2 004464   000002 756110                    STQ     2,X0,PR0

     1575    11955    2             J=J+11;

  11955  2 004465   000013 236007                    LDQ     11,DL
         2 004466   200040 056100                    ASQ     J,,AUTO

     1576    11956    2           END;                            /* DO I=                              */

  11956  2 004467   000001 336007                    LCQ     1,DL
         2 004470   200037 056100                    ASQ     I,,AUTO
         2 004471   200037 235100                    LDA     I,,AUTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:240  
         2 004472   004445 605000 2                  TPL     s:11952

     1577    11957        /**/
     1578    11958    1           HDRPAT='0'B;

  11958  2 004473   000000 100400                    MLR     fill='000'O
         2 004474   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         2 004475   000500 000020 0                  ADSC9   HDRPAT                   cn=0,n=16

     1579    11959    1           RETURN;

  11959  2 004476   000000 702200 xent               TSX2  ! X66_ARET

     1580    11960    1   POIDX:
     1581    11961    1           POIDC=POIDC+1;                  /* Error reading tape ID              */

  11961  2 004477   200041 235100       POIDX        LDA     POIDC,,AUTO
         2 004500   000001 035007                    ADLA    1,DL
         2 004501   200041 755100                    STA     POIDC,,AUTO

     1582    11962    1           IF POIDC<5 THEN GOTO POBT1;     /* Rewind and try again               */

  11962  2 004502   000005 115007                    CMPA    5,DL
         2 004503   003025 602000 2                  TNC     POBT1

     1583    11963    1             ELSE;
     1584    11964    1           CALL TYPEC(POIDM);

  11964  2 004504   000225 630400 3                  EPPR0   149
         2 004505   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 004506   000000 701000 xent               TSX1    TYPEC
         2 004507   000000 011000                    NOP     0

     1585    11965    1           ALTRETURN;

  11965  2 004510   000000 702200 xent               TSX2  ! X66_AALT

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:241  
     1586    11966    1   POHDRX:
     1587    11967    1           CALL TYPEC(POHDRM);             /* Error reading header               */

  11967  2 004511   000216 630400 3     POHDRX       EPPR0   142
         2 004512   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 004513   000000 701000 xent               TSX1    TYPEC
         2 004514   000000 011000                    NOP     0

     1588    11968    1           ALTRETURN;

  11968  2 004515   000000 702200 xent               TSX2  ! X66_AALT

     1589    11969    1   POLRX:
     1590    11970    1           CALL TYPEC(POLRM);              /* Error reading logical record       */

  11970  2 004516   000217 630400 3     POLRX        EPPR0   143
         2 004517   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 004520   000000 701000 xent               TSX1    TYPEC
         2 004521   000000 011000                    NOP     0

     1591    11971    1           ALTRETURN;

  11971  2 004522   000000 702200 xent               TSX2  ! X66_AALT

     1592    11972    1   POPSAD:
     1593    11973    1           SADDCW.TALLY=LENGTHW(ADIR)+4;

  11973  2 004523   000364 236007       POPSAD       LDQ     244,DL
         2 004524   000604 752003 0                  STCQ    SAD$,'03'O

     1594    11974    2           CALL MINIQC_PL6(SYS_DPX,ADDR(SADDCW),0,%FCNRDB,TOPDA) WHENALTRETURN DO;
             11974                    /* Read Sys Dir from disk */

  11974  2 004525   000072 236000 3                  LDQ     58
         2 004526   200072 756100                    STQ     BOOT$+4,,AUTO
         2 004527   000014 237000 3                  LDAQ    12
         2 004530   200076 757100                    STAQ    BOOT$+8,,AUTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:242  
         2 004531   000014 236000 3                  LDQ     12
         2 004532   200075 756100                    STQ     BOOT$+7,,AUTO
         2 004533   200072 633500                    EPPR3   BOOT$+4,,AUTO
         2 004534   200074 453500                    STP3    BOOT$+6,,AUTO
         2 004535   000016 236000 3                  LDQ     14
         2 004536   200073 756100                    STQ     BOOT$+5,,AUTO
         2 004537   200073 630500                    EPPR0   BOOT$+5,,AUTO
         2 004540   000023 631400 xsym               EPPR1   B_VECTNIL+19
         2 004541   000000 701000 xent               TSX1    MINIQC_PL6
         2 004542   004544 702000 2                  TSX2    UNWESAD
         2 004543   004547 710000 2                  TRA     s:11978

     1595    11975    2   UNWESAD:
     1596    11976    2                 UNWIND TO ESADERR;

  11976  2 004544   000646 237200 0     UNWESAD      LDAQ  ! ESADERR
         2 004545   000000 700200 xent               TSX0  ! X66_AUNWIND
         2 004546   000000 000200                    ZERO    0,128

     1597    11977    2               END;                        /* WHENALTRETURN                      */
     1598    11978    1           HDRTYP=0;                       /* Start at zero                      */

  11978  2 004547   000000 220003                    LDX0    0,DU
         2 004550   000642 740000 0                  STX0    HDRTYP

     1599    11979        /* Read Schema Directory into POBUF and restore descriptors */
     1600    11980    1           PODCW.TALLY=1024;

  11980  2 004551   002000 236007                    LDQ     1024,DL
         2 004552   000606 752003 0                  STCQ    POB$,'03'O

     1601    11981    1           CALL MINIQC_PL6(SYS_DPX,ADDR(PODCW),0,%FCNRDB,ADIR.SCHEMADIR.DA) ALTRET(
             11981                    UNWESAD);

  11981  2 004553   000104 236000 3                  LDQ     68
         2 004554   200072 756100                    STQ     BOOT$+4,,AUTO
         2 004555   000226 237000 3                  LDAQ    150
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:243  
         2 004556   200076 757100                    STAQ    BOOT$+8,,AUTO
         2 004557   000014 236000 3                  LDQ     12
         2 004560   200075 756100                    STQ     BOOT$+7,,AUTO
         2 004561   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 004562   200074 450500                    STP0    BOOT$+6,,AUTO
         2 004563   000016 236000 3                  LDQ     14
         2 004564   200073 756100                    STQ     BOOT$+5,,AUTO
         2 004565   200073 630500                    EPPR0   BOOT$+5,,AUTO
         2 004566   000023 631400 xsym               EPPR1   B_VECTNIL+19
         2 004567   000000 701000 xent               TSX1    MINIQC_PL6
         2 004570   004544 702000 2                  TSX2    UNWESAD

     1602    11982        /* Move descriptors into DESCSCH0 to DESCSCH11 */
     1603    11983    1           FROMDESCR$=ADDR(POBUF);

  11983  2 004571   000103 236000 3                  LDQ     67
         2 004572   000653 756000 0                  STQ     FROMDESCR$

     1604    11984    1           TODESCR$=ADDR(AALS.DESCSCH0);

  11984  2 004573   000000 236000 0                  LDQ     AALS$
         2 004574   000150 036003                    ADLQ    104,DU
         2 004575   000652 756000 0                  STQ     TODESCR$

     1605    11985    1           FROMDESCR_PTR.WOFFS=FROMDESCR_PTR.WOFFS+2; /* Start after 2 words     */

  11985  2 004576   000653 220000 0                  LDX0    FROMDESCR$
         2 004577   000002 621010                    EAX1    2,X0
         2 004600   000653 741000 0                  STX1    FROMDESCR$

     1606    11986    2           DO I=0 TO 11;

  11986  2 004601   200037 450100                    STZ     I,,AUTO

     1607    11987    2             TODESCR$->BAS_DESCR=FROMDESCR$->BAS_DESCR;

  11987  2 004602   000653 470400 0                  LDP0    FROMDESCR$
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:244  
         2 004603   000000 237100                    LDAQ    0,,PR0
         2 004604   000652 471400 0                  LDP1    TODESCR$
         2 004605   100000 757100                    STAQ    0,,PR1

     1608    11988    2             TODESCR_PTR.WOFFS=TODESCR_PTR.WOFFS+2;

  11988  2 004606   000652 220000 0                  LDX0    TODESCR$
         2 004607   000002 621010                    EAX1    2,X0
         2 004610   000652 741000 0                  STX1    TODESCR$

     1609    11989    2             FROMDESCR_PTR.WOFFS=FROMDESCR_PTR.WOFFS+2;

  11989  2 004611   000653 220000 0                  LDX0    FROMDESCR$
         2 004612   000002 622010                    EAX2    2,X0
         2 004613   000653 742000 0                  STX2    FROMDESCR$

     1610    11990    2           END;                            /* DO I=                              */

  11990  2 004614   200037 054100                    AOS     I,,AUTO
         2 004615   200037 235100                    LDA     I,,AUTO
         2 004616   000013 115007                    CMPA    11,DL
         2 004617   004602 604400 2                  TMOZ    s:11987

     1611    11991        /* Read tape ID from disk */
     1612    11992    1           CALL MINIQ_PL6(SYS_DPX,ADDR(IDBUF.TXT),IDBUF.CNT,%FCNRDB,ADIR.AARDVARK.DA)
             11992                    ALTRET(POBT11);

  11992  2 004620   000076 236000 3                  LDQ     62
         2 004621   200072 756100                    STQ     BOOT$+4,,AUTO
         2 004622   000230 237000 3                  LDAQ    152
         2 004623   200076 757100                    STAQ    BOOT$+8,,AUTO
         2 004624   000102 236000 3                  LDQ     66
         2 004625   200075 756100                    STQ     BOOT$+7,,AUTO
         2 004626   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 004627   200074 450500                    STP0    BOOT$+6,,AUTO
         2 004630   000016 236000 3                  LDQ     14
         2 004631   200073 756100                    STQ     BOOT$+5,,AUTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:245  
         2 004632   200073 630500                    EPPR0   BOOT$+5,,AUTO
         2 004633   000023 631400 xsym               EPPR1   B_VECTNIL+19
         2 004634   000000 701000 xent               TSX1    MINIQ_PL6
         2 004635   004650 702000 2                  TSX2    POBT11

     1613    11993        /* See what we found */
     1614    11994    1           IF SUBSTR(IDBUF.TXT,0,4)~='CP-6' THEN GOTO POBT11;

  11994  2 004636   000610 236000 0                  LDQ     IDBUF+1
         2 004637   000000 116000 1                  CMPQ    0
         2 004640   004650 601000 2                  TNZ     POBT11

     1615    11995    1             ELSE;                         /* Type it                            */
     1616    11996    1           TIDBUF.TXT=IDBUF.TXT;

  11996  2 004641   040000 100400                    MLR     fill='040'O
         2 004642   000610 000034 0                  ADSC9   IDBUF+1                  cn=0,n=28
         2 004643   000620 000040 0                  ADSC9   TIDBUF+1                 cn=0,n=32

     1617    11997    1           CALL TYPEC(TIDBUF);

  11997  2 004644   000206 630400 3                  EPPR0   134
         2 004645   000017 631400 xsym               EPPR1   B_VECTNIL+15
         2 004646   000000 701000 xent               TSX1    TYPEC
         2 004647   000000 011000                    NOP     0

     1618    11998    1   POBT11:
     1619    11999        /* Restore phy pages 0-(3 or 7) as written by TIGR */
     1620    12000    1           HDRBUF=ADIR.LOWREAL;

  12000  2 004650   000000 100400       POBT11       MLR     fill='000'O
         2 004651   000010 000020 0                  ADSC9   ADIR+4                   cn=0,n=16
         2 004652   000574 000020 0                  ADSC9   HDRBUF                   cn=0,n=16

     1621    12001    1           HDRDA=HDRBUF.DA;

  12001  2 004653   000575 235000 0                  LDA     HDRBUF+1
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:246  
         2 004654   000643 755000 0                  STA     HDRDA

     1622    12002    1           CODE=%FCNRDB;

  12002  2 004655   200042 450100                    STZ     CODE,,AUTO

     1623    12003    1           GOTO POLR11;

  12003  2 004656   003541 710000 2                  TRA     POLR11

     1624    12004        /**/
     1625    12005    1   PODBS:
     1626    12006        /* Process debug schema info */
     1627    12007    1           IF RCV_FLG~='0'B THEN GOTO POLR1; /* Not tape boot-> no handling      */

  12007  2 004657   000000 236000 xsym  PODBS        LDQ     RCV_FLG
         2 004660   740000 316003                    CANQ    -16384,DU
         2 004661   003530 601000 2                  TNZ     POLR1

     1628    12008    1             ELSE;
     1629    12009    1           OUHDCW.TALLY=11;                /* Init DCW for 11 word headers       */

  12009  2 004662   000013 236007                    LDQ     11,DL
         2 004663   001242 752003 0                  STCQ    AA_DBHDR$,'03'O

     1630    12010    2           IF HDRBUF.TINF.TYPE=%MSCHEMTC THEN DO; /* Not alt schema              */

  12010  2 004664   000010 101003                    CMPX1   8,DU
         2 004665   004721 601000 2                  TNZ     PODBS0A

     1631    12011    2                 CALL KEYIN(FCGQUES,FCGBUF);
             12011                          /* Ask about wanted functional code groups */

  12011  2 004666   000232 630400 3                  EPPR0   154
         2 004667   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 004670   000000 701000 xent               TSX1    KEYIN
         2 004671   000000 011000                    NOP     0
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:247  

     1632    12012    2                 ALLFCG='1'B;              /* Presume all FCGs                   */

  12012  2 004672   400000 236003                    LDQ     -131072,DU
         2 004673   001272 756000 0                  STQ     ALLFCG

     1633    12013    3                 DO SELECT(SUBSTR(FCGBUF.TXT,0,2));

  12013  2 004674   001244 220000 0                  LDX0    FCGBUF+1
         2 004675   000001 100000 1                  CMPX0   1
         2 004676   004701 602000 2                  TNC     s:12013+5
         2 004677   004704 600000 2                  TZE     s:12015
         2 004700   004714 710000 2                  TRA     s:12026
         2 004701   000002 100000 1                  CMPX0   2
         2 004702   004714 601000 2                  TNZ     s:12026
         2 004703   004713 710000 2                  TRA     s:12022

     1634    12014    3                   SELECT('++');

     1635    12015    3                   STAPFLG='1'B;           /* Other schema tape                  */

  12015  2 004704   001273 756000 0                  STQ     STAPFLG

     1636    12016    4                   DO SELECT(SUBSTR(FCGBUF.TXT,2,2));

  12016  2 004705   001244 721000 0                  LXL1    FCGBUF+1
         2 004706   000002 101000 1                  CMPX1   2
         2 004707   004712 601000 2                  TNZ     s:12020
         2 004710   004711 710000 2                  TRA     s:12018

     1637    12017    4                     SELECT('**');

     1638    12018    4                     GOTO PODBS0A;

  12018  2 004711   004721 710000 2                  TRA     PODBS0A

     1639    12019    4                     SELECT(ELSE);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:248  

     1640    12020    4                   END;                    /* DO SELECT                          */

  12020  2 004712   004714 710000 2                  TRA     s:12026

     1641    12021    3                 SELECT('**');

     1642    12022    3                 GOTO PODBS0A;

  12022  2 004713   004721 710000 2                  TRA     PODBS0A

     1643    12023    3                 SELECT(ELSE);

     1644    12024    3                 END;                      /* DO SELECT                          */

     1645    12025        /* Read only requested FCGs */
     1646    12026    2           ALLFCG='0'B;

  12026  2 004714   001272 450000 0                  STZ     ALLFCG

     1647    12027    2           CALL UPPER_CASE(FCGBUF.TXT,80);

  12027  2 004715   000234 630400 3                  EPPR0   156
         2 004716   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 004717   000000 701000 xent               TSX1    UPPER_CASE
         2 004720   000000 011000                    NOP     0

     1648    12028    2               END;                        /* THEN                               */

     1649    12029    1             ELSE;
     1650    12030    1   PODBS0A:
     1651    12031        /* Set up initial values to read debug schema */
     1652    12032    1           HDR$=DBHDR$;               /* Pointer to schema or alt schema header  */

  12032  2 004721   001274 236000 0     PODBS0A      LDQ     DBHDR$
         2 004722   000600 756000 0                  STQ     HDR$

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:249  
     1653    12033    1           DESCR$=OUHDESC$;      /* Pointer to schema or alt schema descriptor   */

  12033  2 004723   001275 236000 0                  LDQ     OUHDESC$
         2 004724   200034 756100                    STQ     DESCR$,,AUTO

     1654    12034    1           BAS_DESCR.BASE=BAS_HDR.BASE*4;

  12034  2 004725   000600 470400 0                  LDP0    HDR$
         2 004726   200034 471500                    LDP1    DESCR$,,AUTO
         2 004727   000000 235100                    LDA     0,,PR0
         2 004730   000002 735000                    ALS     2
         2 004731   100001 755100                    STA     1,,PR1

     1655    12035    1           AALS.PODESC.BASE=BAS_DESCR.BASE+1024*4; /* Allow one page for headers */

  12035  2 004732   000000 473400 0                  LDP3    AALS$
         2 004733   010000 035007                    ADLA    4096,DL
         2 004734   300015 755100                    STA     13,,PR3

     1656    12036    1           ITEMPO=AALS.PODESC.BASE;        /* For test                           */

  12036  2 004735   000656 755000 0                  STA     ITEMPO

     1657    12037    1           BAS_HDR.SIZE=1024;
             12037                   /* Initial segment size=1 page(the page reserved for 11 word headers) */

  12037  2 004736   002000 235007                    LDA     1024,DL
         2 004737   000002 755100                    STA     2,,PR0

     1658    12038    1           INFO_PTR='0'B;

  12038  2 004740   200060 450100                    STZ     INFO$,,AUTO

     1659    12039    1           INFO_PTR.S_D_FIELD=ISOUH;

  12039  2 004741   001276 236000 0                  LDQ     ISOUH
         2 004742   000030 772000                    QRL     24
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:250  
         2 004743   200060 752103                    STCQ    INFO$,'03'O,AUTO

     1660    12040    1           INFO_PTR.WOFFS=1;          /* INFO points to OU header page+1 word    */

  12040  2 004744   000001 220003                    LDX0    1,DU
         2 004745   200060 740100                    STX0    INFO$,,AUTO

     1661    12041    1           INFOS_PTR='0'B;

  12041  2 004746   200062 450100                    STZ     INFOS$,,AUTO

     1662    12042    1           INFOS_PTR.S_D_FIELD=ISOUH;      /* INFOS points to OU header page     */

  12042  2 004747   001276 236000 0                  LDQ     ISOUH
         2 004750   000030 772000                    QRL     24
         2 004751   200062 752103                    STCQ    INFOS$,'03'O,AUTO

     1663    12043    1           INFOS$->BAS_UBIN=0;             /* Object unit count=0                */

  12043  2 004752   200062 474500                    LDP4    INFOS$,,AUTO
         2 004753   400000 450100                    STZ     0,,PR4

     1664    12044    1   PODBS1:
     1665    12045    1           CALL MINIQ_PL6(IPO_INDX,ADDR(HDRFCG),12,%FCNRTB) ALTRET(POLRX);
             12045                    /* Read FCG header */

  12045  2 004754   000236 236000 3     PODBS1       LDQ     158
         2 004755   200072 756100                    STQ     BOOT$+4,,AUTO
         2 004756   000240 237000 3                  LDAQ    160
         2 004757   200076 757100                    STAQ    BOOT$+8,,AUTO
         2 004760   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 004761   200075 450500                    STP0    BOOT$+7,,AUTO
         2 004762   000212 236000 3                  LDQ     138
         2 004763   200074 756100                    STQ     BOOT$+6,,AUTO
         2 004764   200074 630500                    EPPR0   BOOT$+6,,AUTO
         2 004765   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 004766   000000 701000 xent               TSX1    MINIQ_PL6
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:251  
         2 004767   004516 702000 2                  TSX2    POLRX

     1666    12046    2           IF HDRFCG.BFCG~='0'B THEN DO;   /* Not 0-> not end of debug schema    */

  12046  2 004770   001303 220000 0                  LDX0    HDRFCG
         2 004771   005301 600000 2                  TZE     s:12126

     1667    12047    2   PODBS1D:
     1668    12048    3                 IF ALLFCG='0'B THEN DO;
             12048                          /* We don't want all FCGs; see if we want this one */

  12048  2 004772   001272 234000 0     PODBS1D      SZN     ALLFCG
         2 004773   005034 604000 2                  TMI     PODBS5

     1669    12049    4                       DO I=0 TO 40;

  12049  2 004774   200037 450100                    STZ     I,,AUTO

     1670    12050    4                         IF WANTFCG(I)=HDRFCG.FCG THEN GOTO PODBS5;
             12050                                  /* We want this FCG */

  12050  2 004775   200037 235100                    LDA     I,,AUTO
         2 004776   000001 735000                    ALS     1
         2 004777   001271 470400 0                  LDP0    FCG$
         2 005000   040000 106505                    CMPC    fill='040'O
         2 005001   000000 000002                    ADSC9   0,A,PR0                  cn=0,n=2
         2 005002   001303 000002 0                  ADSC9   HDRFCG                   cn=0,n=2
         2 005003   005034 600000 2                  TZE     PODBS5

     1671    12051    4                           ELSE;
     1672    12052    4                       END;                /* DO I=                              */

  12052  2 005004   200037 054100                    AOS     I,,AUTO
         2 005005   200037 235100                    LDA     I,,AUTO
         2 005006   000050 115007                    CMPA    40,DL
         2 005007   004775 604400 2                  TMOZ    s:12050

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:252  
     1673    12053        /* Skip this FCG */
     1674    12054    4                       DO I=0 TO HDRFCG.NPR-1;

  12054  2 005010   200037 450100                    STZ     I,,AUTO
         2 005011   005027 710000 2                  TRA     s:12058+1

     1675    12055    4                         CALL MINIQ_PL6(IPO_INDX,ADDR(HDRFCG),12,%FCNSKR);
             12055                                  /* Skip physical record */

  12055  2 005012   000236 236000 3                  LDQ     158
         2 005013   200072 756100                    STQ     BOOT$+4,,AUTO
         2 005014   000242 237000 3                  LDAQ    162
         2 005015   200076 757100                    STAQ    BOOT$+8,,AUTO
         2 005016   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 005017   200075 450500                    STP0    BOOT$+7,,AUTO
         2 005020   000212 236000 3                  LDQ     138
         2 005021   200074 756100                    STQ     BOOT$+6,,AUTO
         2 005022   200074 630500                    EPPR0   BOOT$+6,,AUTO
         2 005023   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 005024   000000 701000 xent               TSX1    MINIQ_PL6
         2 005025   000000 011000                    NOP     0

     1676    12056        /* In the previous instr the buffer addr and size are given
     1677    12057             only for compatibility with calls to MINIQ */
     1678    12058    4                       END;                /* DO I=                              */

  12058  2 005026   200037 054100                    AOS     I,,AUTO
         2 005027   200037 236100                    LDQ     I,,AUTO
         2 005030   005012 604000 2                  TMI     s:12055
         2 005031   001304 116000 0                  CMPQ    HDRFCG+1
         2 005032   005012 602000 2                  TNC     s:12055

     1679    12059    3                       GOTO PODBS1;        /* Read next FCG header               */

  12059  2 005033   004754 710000 2                  TRA     PODBS1

     1680    12060    3                     END;                  /* THEN                               */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:253  
     1681    12061    2                   ELSE;
     1682    12062    2   PODBS5:                                 /* Process this FCG                   */
     1683    12063        /* Read 11 word object unit header record */
     1684    12064    2                 INFOS$->BAS_UBIN=INFOS$->BAS_UBIN+HDRFCG.NOU;
             12064                          /* Update object unit count */

  12064  2 005034   200062 470500       PODBS5       LDP0    INFOS$,,AUTO
         2 005035   000000 236100                    LDQ     0,,PR0
         2 005036   001305 036000 0                  ADLQ    HDRFCG+2
         2 005037   000000 756100                    STQ     0,,PR0

     1685    12065    3                 DO J=0 TO HDRFCG.NOU-1;

  12065  2 005040   200040 450100                    STZ     J,,AUTO
         2 005041   005274 710000 2                  TRA     s:12122+1

     1686    12066    3   PODBS6:
     1687    12067    3                   IF (INFO_PTR.WOFFS+11)*4+BAS_DESCR.BASE<= ITEMPO THEN;
             12067                            /* There is room for this header */

  12067  2 005042   200034 470500       PODBS6       LDP0    DESCR$,,AUTO
         2 005043   200060 236100                    LDQ     INFO$,,AUTO
         2 005044   777777 376003                    ANQ     -1,DU
         2 005045   000020 772000                    QRL     16
         2 005046   000001 036100                    ADLQ    1,,PR0
         2 005047   000054 036007                    ADLQ    44,DL
         2 005050   005114 604000 2                  TMI     PODBS6B
         2 005051   000656 116000 0                  CMPQ    ITEMPO
         2 005052   005114 602000 2                  TNC     PODBS6B
         2 005053   005114 600000 2                  TZE     PODBS6B

     1688    12068    4                     ELSE DO;              /* No room, shift OUs down 1 page     */

     1689    12069        /* Use MEMDESC to frame area where the page is shifted */
     1690    12070    4                         AALS.MEMDESC.BASE=(AALS.PODESC.BASE+1024*4)/4096*4096;

  12070  2 005054   000000 471400 0                  LDP1    AALS$
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:254  
         2 005055   100015 236100                    LDQ     13,,PR1
         2 005056   010000 036007                    ADLQ    4096,DL
         2 005057   010000 506007                    DIV     4096,DL
         2 005060   000014 736000                    QLS     12
         2 005061   100013 756100                    STQ     11,,PR1

     1691    12071    4                         MEM_PTR='0'B;

  12071  2 005062   200057 450100                    STZ     MEM$,,AUTO

     1692    12072    4                         MEM_PTR.S_D_FIELD=%ALS_MEM;

  12072  2 005063   006005 236007                    LDQ     3077,DL
         2 005064   200057 752103                    STCQ    MEM$,'03'O,AUTO

     1693    12073    4   PODBS6A:
     1694    12074    4                         PINCRW(MEM$,1024)->BASED_PAGE=MEM$->BASED_PAGE;

  12074  2 005065   200057 470500       PODBS6A      LDP0    MEM$,,AUTO
         2 005066   010000 220003                    LDX0    4096,DU
         2 005067   000140 100540                    MLR     fill='000'O
         2 005070   000000 000010                    ADSC9   0,,PR0                   cn=0,n=*X0
         2 005071   002000 000010                    ADSC9   1024,,PR0                cn=0,n=*X0

     1695    12075    5                         IF(AALS.MEMDESC.BASE-1024*4)>=ITEMPO THEN DO;

  12075  2 005072   000000 471400 0                  LDP1    AALS$
         2 005073   100013 236100                    LDQ     11,,PR1
         2 005074   010000 136007                    SBLQ    4096,DL
         2 005075   005103 604000 2                  TMI     s:12081
         2 005076   000656 116000 0                  CMPQ    ITEMPO
         2 005077   005103 602000 2                  TNC     s:12081

     1696    12076    5                               AALS.MEMDESC.BASE=AALS.MEMDESC.BASE-1024*4;

  12076  2 005100   010000 336007                    LCQ     4096,DL
         2 005101   100013 056100                    ASQ     11,,PR1
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:255  

     1697    12077    5                               GOTO PODBS6A;

  12077  2 005102   005065 710000 2                  TRA     PODBS6A

     1698    12078    5                             END;          /* THEN                               */
     1699    12079    4                           ELSE;
     1700    12080        /* Zap last page moved */
     1701    12081    4                         MEM$->BASED_PAGE='0'B;

  12081  2 005103   000140 100400                    MLR     fill='000'O
         2 005104   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         2 005105   000000 000010                    ADSC9   0,,PR0                   cn=0,n=*X0

     1702    12082        /* Adjust PODESC and debug record base */
     1703    12083    4                         ITEMPO=ITEMPO+1024*4;

  12083  2 005106   000656 235000 0                  LDA     ITEMPO
         2 005107   010000 035007                    ADLA    4096,DL
         2 005110   000656 755000 0                  STA     ITEMPO

     1704    12084    4                         AALS.PODESC.BASE=AALS.PODESC.BASE+1024*4;

  12084  2 005111   000000 471400 0                  LDP1    AALS$
         2 005112   010000 236007                    LDQ     4096,DL
         2 005113   100015 056100                    ASQ     13,,PR1

     1705    12085    4                       END;                /* ELSE                               */

     1706    12086    3   PODBS6B:
     1707    12087    3                   CALL MINIQC_PL6(IPO_INDX,ADDR(OUHDCW),,%FCNRTB) ALTRET(POLRX);
             12087                            /* Read 11 word header */

  12087  2 005114   000244 236000 3     PODBS6B      LDQ     164
         2 005115   200072 756100                    STQ     BOOT$+4,,AUTO
         2 005116   000014 236000 3                  LDQ     12
         2 005117   000001 235000 xsym               LDA     B_VECTNIL+1
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:256  
         2 005120   200076 757100                    STAQ    BOOT$+8,,AUTO
         2 005121   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 005122   200075 450500                    STP0    BOOT$+7,,AUTO
         2 005123   000212 236000 3                  LDQ     138
         2 005124   200074 756100                    STQ     BOOT$+6,,AUTO
         2 005125   200074 630500                    EPPR0   BOOT$+6,,AUTO
         2 005126   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 005127   000000 701000 xent               TSX1    MINIQC_PL6
         2 005130   004516 702000 2                  TSX2    POLRX

     1708    12088        /* Move OU header from AARDVARK buffer to CP6 */
     1709    12089    3                   CP6_DBHDR=AAR_DBHDR;

  12089  2 005131   200060 470500                    LDP0    INFO$,,AUTO
         2 005132   000100 100400                    MLR     fill='000'O
         2 005133   001227 000054 0                  ADSC9   AAR_DBHDR                cn=0,n=44
         2 005134   000000 000054                    ADSC9   0,,PR0                   cn=0,n=44

     1710    12090        /* Process 11 word OU header record */
     1711    12091    4                   DO I=0 TO 4;            /* 5 records*/

  12091  2 005135   200037 450100                    STZ     I,,AUTO

     1712    12092    4                     CP6_DBHDR.RECS.BASE(I)=(AALS.PODESC.BASE-ITEMPO)/4;
             12092                              /* Real byte address-base of debug record segment */

  12092  2 005136   200037 235100                    LDA     I,,AUTO
         2 005137   000001 735000                    ALS     1
         2 005140   000000 470400 0                  LDP0    AALS$
         2 005141   000015 236100                    LDQ     13,,PR0
         2 005142   000656 136000 0                  SBLQ    ITEMPO
         2 005143   000000 620005                    EAX0    0,AL
         2 005144   000004 506007                    DIV     4,DL
         2 005145   200060 471500                    LDP1    INFO$,,AUTO
         2 005146   100001 756110                    STQ     1,X0,PR1

     1713    12093        /* Make sure record doesn't cross segment boundary */
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:257  
     1714    12094    4                     CHECK_256K=CP6_DBHDR.RECS.BASE(I)+CP6_DBHDR.RECS.SIZE(I);

  12094  2 005147   200060 470500                    LDP0    INFO$,,AUTO
         2 005150   000001 236110                    LDQ     1,X0,PR0
         2 005151   000002 036110                    ADLQ    2,X0,PR0
         2 005152   200055 756100                    STQ     CHECK_256K,,AUTO

     1715    12095    4                     IF HCHECK_256K.H1=CP6_DBHDR.RECS.HBASE.H1(I) THEN;
             12095                              /* Record doesn't cross 256K boundary */

  12095  2 005153   200055 221100                    LDX1    CHECK_256K,,AUTO
         2 005154   000001 101110                    CMPX1   1,X0,PR0
         2 005155   005176 600000 2                  TZE     PODBS7A

     1716    12096    5                       ELSE DO;            /* Force record in the next page      */

     1717    12097    5                           BAS_HDR.SIZE=BAS_HDR.SIZE+HCHECK_256K.H1*262144-CP6_DBHDR.
             12097                                    RECS.BASE(I); /* Adjust segment size */

  12097  2 005156   000600 471400 0                  LDP1    HDR$
         2 005157   200055 236100                    LDQ     CHECK_256K,,AUTO
         2 005160   777777 376003                    ANQ     -1,DU
         2 005161   100002 036100                    ADLQ    2,,PR1
         2 005162   000001 136110                    SBLQ    1,X0,PR0
         2 005163   100002 756100                    STQ     2,,PR1

     1718    12098    5                           CP6_DBHDR.RECS.BASE(I)=HCHECK_256K.H1*262144;

  12098  2 005164   200055 235100                    LDA     CHECK_256K,,AUTO
         2 005165   777777 375003                    ANA     -1,DU
         2 005166   200060 470500                    LDP0    INFO$,,AUTO
         2 005167   000001 755110                    STA     1,X0,PR0

     1719    12099    5                           AALS.PODESC.BASE=ITEMPO+HCHECK_256K.H1*262144*4;

  12099  2 005170   200055 236100                    LDQ     CHECK_256K,,AUTO
         2 005171   777777 376003                    ANQ     -1,DU
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:258  
         2 005172   000002 736000                    QLS     2
         2 005173   000656 036000 0                  ADLQ    ITEMPO
         2 005174   000000 470400 0                  LDP0    AALS$
         2 005175   000015 756100                    STQ     13,,PR0

     1720    12100    5                         END;              /* ELSE                               */

     1721    12101    4   PODBS7A:
     1722    12102    4                     IF I=4 THEN CODE=%FCNRT9; /* The 5'th record is ASCII       */

  12102  2 005176   200037 235100       PODBS7A      LDA     I,,AUTO
         2 005177   000004 115007                    CMPA    4,DL
         2 005200   005204 601000 2                  TNZ     s:12103

  12102  2 005201   000002 236007                    LDQ     2,DL
         2 005202   200042 756100                    STQ     CODE,,AUTO
         2 005203   005205 710000 2                  TRA     s:12104

     1723    12103    4                       ELSE CODE=%FCNRTB;  /* The first 4 records are binary     */

  12103  2 005204   200042 450100                    STZ     CODE,,AUTO

     1724    12104    4                     PODCW.TALLY=1024;

  12104  2 005205   002000 236007                    LDQ     1024,DL
         2 005206   000606 752003 0                  STCQ    POB$,'03'O

     1725    12105    4                     LGTH=CP6_DBHDR.RECS.SIZE(I);

  12105  2 005207   200060 470500                    LDP0    INFO$,,AUTO
         2 005210   000002 235110                    LDA     2,X0,PR0
         2 005211   200053 755100                    STA     LGTH,,AUTO

     1726    12106    4                     BAS_HDR.SIZE=BAS_HDR.SIZE+LGTH;

  12106  2 005212   000600 471400 0                  LDP1    HDR$
         2 005213   100002 236100                    LDQ     2,,PR1
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:259  
         2 005214   200053 036100                    ADLQ    LGTH,,AUTO
         2 005215   100002 756100                    STQ     2,,PR1

     1727    12107    4   PODBS8:
     1728    12108    4                     IF LGTH<=0 THEN GOTO PODBS9; /* That's all                  */

  12108  2 005216   200053 235100       PODBS8       LDA     LGTH,,AUTO
         2 005217   005264 604400 2                  TMOZ    PODBS9

     1729    12109    4                       ELSE;
     1730    12110    4                     IF LGTH>1024 THEN;

  12110  2 005220   002000 115007                    CMPA    1024,DL
         2 005221   005224 605400 2                  TPNZ    s:12112

     1731    12111    4                       ELSE PODCW.TALLY=LGTH;

  12111  2 005222   200053 236100                    LDQ     LGTH,,AUTO
         2 005223   000606 752003 0                  STCQ    POB$,'03'O

     1732    12112    4                     LGTH=LGTH-1024;

  12112  2 005224   002000 336007                    LCQ     1024,DL
         2 005225   200053 056100                    ASQ     LGTH,,AUTO

     1733    12113    4                     CALL MINIQC_PL6(IPO_INDX,ADDR(PODCW),,CODE) ALTRET(POLRX);

  12113  2 005226   000104 236000 3                  LDQ     68
         2 005227   200072 756100                    STQ     BOOT$+4,,AUTO
         2 005230   200042 630500                    EPPR0   CODE,,AUTO
         2 005231   200077 450500                    STP0    BOOT$+9,,AUTO
         2 005232   000001 236000 xsym               LDQ     B_VECTNIL+1
         2 005233   200076 756100                    STQ     BOOT$+8,,AUTO
         2 005234   200072 631500                    EPPR1   BOOT$+4,,AUTO
         2 005235   200075 451500                    STP1    BOOT$+7,,AUTO
         2 005236   000212 236000 3                  LDQ     138
         2 005237   200074 756100                    STQ     BOOT$+6,,AUTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:260  
         2 005240   200074 630500                    EPPR0   BOOT$+6,,AUTO
         2 005241   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 005242   000000 701000 xent               TSX1    MINIQC_PL6
         2 005243   004516 702000 2                  TSX2    POLRX

     1734    12114        /* Move block from AARDVARK buffer to CP6 */
     1735    12115    4                     CP6_BUF_LGTH=PODCW.TALLY*4;

  12115  2 005244   000606 236000 0                  LDQ     POB$
         2 005245   000002 736000                    QLS     2
         2 005246   037774 376007                    ANQ     16380,DL
         2 005247   200033 756100                    STQ     CP6_BUF_LGTH,,AUTO

     1736    12116    4                     CP6_BUF=AARD_BUF;     /* Pointers are OK                    */

  12116  2 005250   000651 470400 0                  LDP0    AARD_BUF$
         2 005251   010000 220003                    LDX0    4096,DU
         2 005252   000650 471400 0                  LDP1    CP6_BUF$
         2 005253   000000 621006                    EAX1    0,QL
         2 005254   040140 100540                    MLR     fill='040'O
         2 005255   000000 000010                    ADSC9   0,,PR0                   cn=0,n=*X0
         2 005256   100000 000011                    ADSC9   0,,PR1                   cn=0,n=*X1

     1737    12117    4                     AALS.PODESC.BASE=AALS.PODESC.BASE+CP6_BUF_LGTH;

  12117  2 005257   000000 471400 0                  LDP1    AALS$
         2 005260   100015 236100                    LDQ     13,,PR1
         2 005261   200033 036100                    ADLQ    CP6_BUF_LGTH,,AUTO
         2 005262   100015 756100                    STQ     13,,PR1

     1738    12118    4                     GOTO PODBS8;

  12118  2 005263   005216 710000 2                  TRA     PODBS8

     1739    12119    4   PODBS9:
     1740    12120    4                   END;                    /* DO I=                              */

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:261  
  12120  2 005264   200037 054100       PODBS9       AOS     I,,AUTO
         2 005265   200037 236100                    LDQ     I,,AUTO
         2 005266   000004 116007                    CMPQ    4,DL
         2 005267   005136 604400 2                  TMOZ    s:12092

     1741    12121    3                   INFO$=PINCRW(INFO$,11);

  12121  2 005270   200060 236100                    LDQ     INFO$,,AUTO
         2 005271   000013 036003                    ADLQ    11,DU
         2 005272   200060 756100                    STQ     INFO$,,AUTO

     1742    12122    3                 END;                      /* DO J=                              */

  12122  2 005273   200040 054100                    AOS     J,,AUTO
         2 005274   200040 236100                    LDQ     J,,AUTO
         2 005275   005042 604000 2                  TMI     PODBS6
         2 005276   001305 116000 0                  CMPQ    HDRFCG+2
         2 005277   005042 602000 2                  TNC     PODBS6

     1743    12123    2                 GOTO PODBS1;              /* Read next FCG                      */

  12123  2 005300   004754 710000 2                  TRA     PODBS1

     1744    12124    2               END;                        /*THEN                                */
     1745    12125    1             ELSE;                    /* Come here at the end of debug schema    */
     1746    12126    2           IF NF_FLG='0'B THEN DO;         /* New files                          */

  12126  2 005301   000000 236000 xsym               LDQ     NF_FLG
         2 005302   700000 316003                    CANQ    -32768,DU
         2 005303   005324 601000 2                  TNZ     s:12131

     1747    12127    2                 IF(BAS_HDR.SIZE+1023)/1024>1500 THEN NAVDA=NAVDA+(BAS_HDR.SIZE+1023)/
             12127                          1024;

  12127  2 005304   000600 470400 0                  LDP0    HDR$
         2 005305   000002 236100                    LDQ     2,,PR0
         2 005306   001777 036007                    ADLQ    1023,DL
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:262  
         2 005307   000012 772000                    QRL     10
         2 005310   002735 116007                    CMPQ    1501,DL
         2 005311   005320 602000 2                  TNC     s:12128

  12127  2 005312   000002 236100                    LDQ     2,,PR0
         2 005313   001777 036007                    ADLQ    1023,DL
         2 005314   000012 772000                    QRL     10
         2 005315   000000 036000 xsym               ADLQ    NAVDA
         2 005316   000000 756000 xsym               STQ     NAVDA
         2 005317   005341 710000 2                  TRA     s:12136

     1748    12128    2                   ELSE NAVDA=NAVDA+1500;

  12128  2 005320   000000 235000 xsym               LDA     NAVDA
         2 005321   002734 035007                    ADLA    1500,DL
         2 005322   000000 755000 xsym               STA     NAVDA

     1749    12129    2               END;                        /* THEN                               */

  12129  2 005323   005341 710000 2                  TRA     s:12136

     1750    12130    2             ELSE DO;

     1751    12131    2                 IF NAVDA+(BAS_HDR.SIZE+1023)/1024<ADIR.DUMP.DA THEN

  12131  2 005324   000600 470400 0                  LDP0    HDR$
         2 005325   000002 236100                    LDQ     2,,PR0
         2 005326   001777 036007                    ADLQ    1023,DL
         2 005327   000012 772000                    QRL     10
         2 005330   000000 036000 xsym               ADLQ    NAVDA
         2 005331   000205 116000 0                  CMPQ    ADIR+129
         2 005332   003636 603000 2                  TRC     TOOBIG

     1752    12132    2                   NAVDA=NAVDA+(BAS_HDR.SIZE+1023)/1024; /* We still have space  */

  12132  2 005333   000002 236100                    LDQ     2,,PR0
         2 005334   001777 036007                    ADLQ    1023,DL
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:263  
         2 005335   000012 772000                    QRL     10
         2 005336   000000 036000 xsym               ADLQ    NAVDA
         2 005337   000000 756000 xsym               STQ     NAVDA
         2 005340   005341 710000 2                  TRA     s:12136

     1753    12133    2                   ELSE GOTO TOOBIG;
     1754    12134    2               END;                        /* ELSE                               */
     1755    12135        /* Build pointers from debug record displacements */
     1756    12136    1           ITEMPO1=INFO_PTR.WOFFS; /* Displacement after the last 11 word header */

  12136  2 005341   200060 235100                    LDA     INFO$,,AUTO
         2 005342   000022 771000                    ARL     18
         2 005343   000657 755000 0                  STA     ITEMPO1

     1757    12137    1           OUHDR#=(ITEMPO1-1)/11;          /* Nr of 11 word headers              */

  12137  2 005344   000657 236000 0                  LDQ     ITEMPO1
         2 005345   000001 136007                    SBLQ    1,DL
         2 005346   000013 506007                    DIV     11,DL
         2 005347   200035 756100                    STQ     OUHDR#,,AUTO

     1758    12138    1           INFO_PTR.WOFFS=1;/* At the beginning INFO$ points to the first header */

  12138  2 005350   000001 221003                    LDX1    1,DU
         2 005351   200060 741100                    STX1    INFO$,,AUTO

     1759    12139    2           DO J=0 TO OUHDR#-1;

  12139  2 005352   200040 450100                    STZ     J,,AUTO
         2 005353   005425 710000 2                  TRA     s:12148+1

     1760    12140    3             DO I=0 TO 4;             /* Process the 5 records in this header    */

  12140  2 005354   200037 450100                    STZ     I,,AUTO

     1761    12141    3               CHECK_256K=CP6_DBHDR.RECS.BASE(I);

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:264  
  12141  2 005355   200037 235100                    LDA     I,,AUTO
         2 005356   000001 735000                    ALS     1
         2 005357   200060 470500                    LDP0    INFO$,,AUTO
         2 005360   000001 235105                    LDA     1,AL,PR0
         2 005361   200055 755100                    STA     CHECK_256K,,AUTO

     1762    12142    3              CP6_DBHDR.RECS.HBASE.H1(I)=CP6_DBHDR.RECS.HBASE.H2(I); /* Under 256 K */

  12142  2 005362   200037 236100                    LDQ     I,,AUTO
         2 005363   000001 736000                    QLS     1
         2 005364   000001 720106                    LXL0    1,QL,PR0
         2 005365   000001 740106                    STX0    1,QL,PR0

     1763    12143    3               CP6_DBHDR.RECS.HBASE.H2(I)=UIXLSCH0+HCHECK_256K.H1;
             12143                        /* Build a pointer */

  12143  2 005366   200055 235100                    LDA     CHECK_256K,,AUTO
         2 005367   000022 771000                    ARL     18
         2 005370   200072 755100                    STA     BOOT$+4,,AUTO
         2 005371   000000 620006                    EAX0    0,QL
         2 005372   001277 236000 0                  LDQ     IXLSCH0
         2 005373   000030 772000                    QRL     24
         2 005374   200072 036100                    ADLQ    BOOT$+4,,AUTO
         2 005375   000000 621006                    EAX1    0,QL
         2 005376   200060 470500                    LDP0    INFO$,,AUTO
         2 005377   000001 441110                    SXL1    1,X0,PR0

     1764    12144    3               PINCRW(SCDESC$,HCHECK_256K.H1*2)->BAS_DESCR.BOUND=

  12144  2 005400   200055 221100                    LDX1    CHECK_256K,,AUTO
         2 005401   200055 021100                    ADLX1   CHECK_256K,,AUTO
         2 005402   200060 470500                    LDP0    INFO$,,AUTO
         2 005403   200055 236100                    LDQ     CHECK_256K,,AUTO
         2 005404   777777 376007                    ANQ     -1,DL
         2 005405   000002 036110                    ADLQ    2,X0,PR0
         2 005406   001300 471400 0                  LDP1    SCDESC$
         2 005407   000002 736000                    QLS     2
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:265  
         2 005410   000001 136007                    SBLQ    1,DL
         2 005411   000020 736000                    QLS     16
         2 005412   100000 676111                    ERQ     0,X1,PR1
         2 005413   000034 376000 xsym               ANQ     B_VECTNIL+28
         2 005414   100000 656111                    ERSQ    0,X1,PR1

     1765    12145    3                 (HCHECK_256K.H2-1+CP6_DBHDR.RECS.SIZE(I))*4+3;
             12145                          /* Fix bound of appropriate descriptor */
     1766    12146    3             END;                          /* DO I=                              */

  12146  2 005415   200037 054100                    AOS     I,,AUTO
         2 005416   200037 236100                    LDQ     I,,AUTO
         2 005417   000004 116007                    CMPQ    4,DL
         2 005420   005355 604400 2                  TMOZ    s:12141

     1767    12147    2             INFO$=PINCRW(INFO$,11);       /* Go to next descriptor              */

  12147  2 005421   200060 236100                    LDQ     INFO$,,AUTO
         2 005422   000013 036003                    ADLQ    11,DU
         2 005423   200060 756100                    STQ     INFO$,,AUTO

     1768    12148    2           END;                            /* DO J=                              */

  12148  2 005424   200040 054100                    AOS     J,,AUTO
         2 005425   200040 236100                    LDQ     J,,AUTO
         2 005426   005354 604000 2                  TMI     s:12140
         2 005427   200035 116100                    CMPQ    OUHDR#,,AUTO
         2 005430   005354 602000 2                  TNC     s:12140

     1769    12149    1           IF ISOUH=%ALS_ASCH THEN GOTO PODBS1C; /* End of alt schema            */

  12149  2 005431   001276 236000 0                  LDQ     ISOUH
         2 005432   777700 376003                    ANQ     -64,DU
         2 005433   602700 116003                    CMPQ    -64064,DU
         2 005434   005613 600000 2                  TZE     PODBS1C

     1770    12150    1             ELSE;
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:266  
     1771    12151    1           TEMPO=ITEMPO;

  12151  2 005435   000656 235000 0                  LDA     ITEMPO
         2 005436   000654 755000 0                  STA     TEMPO

     1772    12152    1           TEMPO1=ITEMPO1;

  12152  2 005437   000657 236000 0                  LDQ     ITEMPO1
         2 005440   000655 756000 0                  STQ     TEMPO1

     1773    12153        /* Get alternate schema */
     1774    12154    1   POASDR:
     1775    12155    1           IF STAPFLG='0'B THEN GOTO POLRE;

  12155  2 005441   001273 234000 0     POASDR       SZN     STAPFLG
         2 005442   003707 605000 2                  TPL     POLRE

     1776    12156    1             ELSE;
     1777    12157    1   GTASX:                                  /* Get AS tape index in DEVINFO       */
     1778    12158    1           MESSAGE$=ADDR(GTASXM);

  12158  2 005443   000245 236000 3     GTASX        LDQ     165
         2 005444   200054 756100                    STQ     MESSAGE$,,AUTO

     1779    12159    1           SUBSTR(TEXTM.TXT,11,6)=SUBSTR(DEVINFO.DEVNAME(%FRSTMT),0,6);

  12159  2 005445   200054 470500                    LDP0    MESSAGE$,,AUTO
         2 005446   000000 720100                    LXL0    0,,PR0
         2 005447   040100 100400                    MLR     fill='040'O
         2 005450   000052 000006 xsym               ADSC9   DEVINFO+42               cn=0,n=6
         2 005451   000003 600006                    ADSC9   3,,PR0                   cn=3,n=6

     1780    12160    1   ASKAS:
     1781    12161    1           CALL KEYIN(GTASXM,ANSBUF);

  12161  2 005452   000246 630400 3     ASKAS        EPPR0   166
         2 005453   000020 631400 xsym               EPPR1   B_VECTNIL+16
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:267  
         2 005454   000000 701000 xent               TSX1    KEYIN
         2 005455   000000 011000                    NOP     0

     1782    12162    1           CALL GETFD(ANSBUF.TXT,16) ALTRET(POLRE);

  12162  2 005456   000023 630400 3                  EPPR0   19
         2 005457   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 005460   000000 701000 xent               TSX1    GETFD
         2 005461   003707 702000 2                  TSX2    POLRE

     1783    12163    1           IF FIELD_LEN>2 OR DECIM_FLG='0'B THEN GOTO ASKAS; /* Ask again        */

  12163  2 005462   000000 235000 xsym               LDA     FIELD_LEN
         2 005463   000003 115007                    CMPA    3,DL
         2 005464   005452 603000 2                  TRC     ASKAS
         2 005465   000000 234000 xsym               SZN     DECIM_FLG
         2 005466   005452 605000 2                  TPL     ASKAS

     1784    12164    1             ELSE;
     1785    12165    2           IF FIELD_LEN=1 THEN DO;         /* Make it a 2 digit field            */

  12165  2 005467   000001 115007                    CMPA    1,DL
         2 005470   005501 601000 2                  TNZ     s:12170

     1786    12166    2                 SUBSTR(POANS,1,1)=SUBSTR(POANS,0,1);

  12166  2 005471   000000 470400 xsym               LDP0    FIELD$
         2 005472   040100 100500                    MLR     fill='040'O
         2 005473   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         2 005474   000000 200001                    ADSC9   0,,PR0                   cn=1,n=1

     1787    12167    2                 SUBSTR(POANS,0,1)='0';

  12167  2 005475   000000 470400 xsym               LDP0    FIELD$
         2 005476   040100 100400                    MLR     fill='040'O
         2 005477   000030 000001 3                  ADSC9   24                       cn=0,n=1
         2 005500   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:268  

     1788    12168    2               END;                        /* THEN                               */

     1789    12169    1             ELSE;
     1790    12170    2           DO I=%FRSTMT TO %(FRSTDP-1);

  12170  2 005501   000003 235007                    LDA     3,DL
         2 005502   200037 755100                    STA     I,,AUTO

     1791    12171    2             IF SUBSTR(DEVINFO.DEVNAME(I),6,2)=POANS THEN GOTO DOAS;

  12171  2 005503   200037 236100                    LDQ     I,,AUTO
         2 005504   000060 402007                    MPY     48,DL
         2 005505   000000 470400 xsym               LDP0    FIELD$
         2 005506   040100 106406                    CMPC    fill='040'O
         2 005507   000007 400002 xsym               ADSC9   DEVINFO+7,Q              cn=2,n=2
         2 005510   000000 000002                    ADSC9   0,,PR0                   cn=0,n=2
         2 005511   005517 600000 2                  TZE     DOAS

     1792    12172    2               ELSE;
     1793    12173    2           END;                            /* ELSE DO I=                         */

  12173  2 005512   200037 054100                    AOS     I,,AUTO
         2 005513   200037 235100                    LDA     I,,AUTO
         2 005514   000023 115007                    CMPA    19,DL
         2 005515   005503 604400 2                  TMOZ    s:12171

     1794    12174    1           GOTO ASKAS;

  12174  2 005516   005452 710000 2                  TRA     ASKAS

     1795    12175    1   DOAS:
     1796    12176    1           IPO_INDX=I;

  12176  2 005517   200037 235100       DOAS         LDA     I,,AUTO
         2 005520   000000 755000 xsym               STA     IPO_INDX

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:269  
     1797    12177    1           ISOUH=%ALS_ASCH;

  12177  2 005521   602700 236003                    LDQ     -64064,DU
         2 005522   001276 756000 0                  STQ     ISOUH

     1798    12178    1           DBHDR$=ADDR(HDRAS);

  12178  2 005523   000250 236000 3                  LDQ     168
         2 005524   001274 756000 0                  STQ     DBHDR$

     1799    12179    1           OUHDESC$=ADDR(AALS.DESCASCH);

  12179  2 005525   000000 236000 0                  LDQ     AALS$
         2 005526   000056 036003                    ADLQ    46,DU
         2 005527   001275 756000 0                  STQ     OUHDESC$

     1800    12180    1           AALS.DESCASCH=INITAOUH;

  12180  2 005530   000000 471400 0                  LDP1    AALS$
         2 005531   000100 100400                    MLR     fill='000'O
         2 005532   001301 000010 0                  ADSC9   INITAOUH                 cn=0,n=8
         2 005533   100056 000010                    ADSC9   46,,PR1                  cn=0,n=8

     1801    12181    1           SCDESC$=ADDR(AALS.DESCASCH0);

  12181  2 005534   000000 236000 0                  LDQ     AALS$
         2 005535   000200 036003                    ADLQ    128,DU
         2 005536   001300 756000 0                  STQ     SCDESC$

     1802    12182    1           IXLSCH0=%XDLS_ASCH0;

  12182  2 005537   606600 236003                    LDQ     -62080,DU
         2 005540   001277 752060 0                  STCQ    IXLSCH0,'60'O

     1803    12183    1           ALLFCG='1'B;

  12183  2 005541   400000 236003                    LDQ     -131072,DU
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:270  
         2 005542   001272 756000 0                  STQ     ALLFCG

     1804    12184    1   ASBT1:
     1805    12185        /* Rewind and set density for AS tape */
     1806    12186    1           CALL MINIQ_PL6(IPO_INDX,0,0,%FCNREW) ALTRET(POASDR);

  12186  2 005543   000251 630400 3     ASBT1        EPPR0   169
         2 005544   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 005545   000000 701000 xent               TSX1    MINIQ_PL6
         2 005546   005441 702000 2                  TSX2    POASDR

     1807    12187    1           CALL MINIQ_PL6(IPO_INDX,0,0,%FCNSDT8) ALTRET(CHECK16) ;

  12187  2 005547   000255 630400 3                  EPPR0   173
         2 005550   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 005551   000000 701000 xent               TSX1    MINIQ_PL6
         2 005552   005602 702000 2                  TSX2    CHECK16

     1808    12188
     1809    12189    1           CALL MINIQ_PL6(IPO_INDX,ADDR(HDRBUF),LENGTHC(HDRBUF),%FCNRTB)

  12189  2 005553   000161 236000 3                  LDQ     113
         2 005554   200072 756100                    STQ     BOOT$+4,,AUTO
         2 005555   000210 237000 3                  LDAQ    136
         2 005556   200076 757100                    STAQ    BOOT$+8,,AUTO
         2 005557   200072 630500                    EPPR0   BOOT$+4,,AUTO
         2 005560   200075 450500                    STP0    BOOT$+7,,AUTO
         2 005561   000212 236000 3                  LDQ     138
         2 005562   200074 756100                    STQ     BOOT$+6,,AUTO
         2 005563   200074 630500                    EPPR0   BOOT$+6,,AUTO
         2 005564   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 005565   000000 701000 xent               TSX1    MINIQ_PL6
         2 005566   005574 702000 2                  TSX2    s:12195

     1810    12190    2             WHENRETURN DO;

     1811    12191    2                 CALL MINIQ_PL6(IPO_INDX,0,0,%FCNREW);
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:271  

  12191  2 005567   000251 630400 3                  EPPR0   169
         2 005570   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 005571   000000 701000 xent               TSX1    MINIQ_PL6
         2 005572   000000 011000                    NOP     0

     1812    12192    2                 GOTO POLRE;

  12192  2 005573   003707 710000 2                  TRA     POLRE

     1813    12193    2               END;
     1814    12194    2             WHENALTRETURN DO;

     1815    12195    2                 IF (DEVINFO.BSTAT.W1(IPO_INDX) & '777700'O) ~= '5210'O THEN

  12195  2 005574   000000 236000 xsym               LDQ     IPO_INDX
         2 005575   000014 402007                    MPY     12,DL
         2 005576   000004 236006 xsym               LDQ     DEVINFO+4,QL
         2 005577   777700 376003                    ANQ     -64,DU
         2 005600   521000 116003                    CMPQ    -89600,DU
         2 005601   005441 601000 2                  TNZ     POASDR

     1816    12196    2                   GOTO POASDR;
     1817    12197    2               END;

     1818    12198    1   CHECK16:
     1819    12199    1           CALL MINIQ_PL6(IPO_INDX,0,0,%FCNREW);

  12199  2 005602   000251 630400 3     CHECK16      EPPR0   169
         2 005603   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 005604   000000 701000 xent               TSX1    MINIQ_PL6
         2 005605   000000 011000                    NOP     0

     1820    12200    1           CALL MINIQ_PL6(IPO_INDX,0,0,%FCNSDT16) ALTRET(POASDR);

  12200  2 005606   000261 630400 3                  EPPR0   177
         2 005607   000022 631400 xsym               EPPR1   B_VECTNIL+18
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:272  
         2 005610   000000 701000 xent               TSX1    MINIQ_PL6
         2 005611   005441 702000 2                  TSX2    POASDR

     1821    12201    1           GOTO POLRE;

  12201  2 005612   003707 710000 2                  TRA     POLRE

     1822    12202    1   PODBS1C:
     1823    12203    1           CALL MINIQ_PL6(IPO_INDX,0,0,%FCNUNL); /* Unload alt schema tape       */

  12203  2 005613   000265 630400 3     PODBS1C      EPPR0   181
         2 005614   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 005615   000000 701000 xent               TSX1    MINIQ_PL6
         2 005616   000000 011000                    NOP     0

     1824    12204    1           IPO_INDX=PO_INDX;

  12204  2 005617   000000 235000 xsym               LDA     PO_INDX
         2 005620   000000 755000 xsym               STA     IPO_INDX

     1825    12205    1           GOTO POLRE;

  12205  2 005621   003707 710000 2                  TRA     POLRE
     1826    12206    1   END GOPO_PL6;
     1827    12207        %EOD;

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:273  
--  Include file information  --

   B_UHJMAC_C.:E05TOU  is referenced.
   I_SUBS_C.:E05TOU  is referenced.
   B_MLSMAC_C.:E05TOU  is referenced.
   B_ULSMAC_C.:E05TOU  is referenced.
   B_LSDATA_C.:E05TOU  cannot be made into a system file and is referenced.
   B$ROSEG.:E05TOU  cannot be made into a system file and is referenced.
   B$SS.:E05TOU  cannot be made into a system file and is referenced.
   MM_MACRO_M.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   MM$SYSGEN.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   MM_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure GOPO_PL6.
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:274  

 **** Variables and constants ****

  ****  Section 000  Data  GOPO_PL6

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 AALS$                    602-0-0/w PTR         r     1 AARD$
   651-0-0/w PTR         r     1 AARD_BUF$                651-0-0/w STRC        r     1 AARD_BUF_PTR
   602-0-0/w STRC        r     1 AARD_PTR                1227-0-0/w STRC(396)   r     1 AAR_DBHDR
  1242-0-0/w PTR         r     1 AA_DBHDR$                  4-0-0/w STRC(8640)  r     1 ADIR
  1272-0-0/b BIT         r     1 ALLFCG                  1022-0-0/w STRC(315)   r     1 AM1
   660-0-0/w PTR         r     1 ASADTAB$(0:32)
   634-0-0/w UBIN        r     1 BASEGPT                  632-0-0/w UBIN        r     1 BASEH1
   630-0-0/w UBIN        r     1 BASEJ                    631-0-0/w UBIN        r     1 BASEJ1
   633-0-0/w UBIN        r     1 BASEMPT                 1317-0-0/w BIT         r     1 BBOOTRC(0:63)
  1315-0-0/w STRC        r     1 BDEV                    1317-0-0/w CHAR(256)   r     1 BOOTRC
   603-0-0/w EPTR        r     1 BOOTS$                   603-0-0/w STRC        r     1 BOOTS_PTR
   601-0-0/w PTR         r     1 BUF$                     650-0-0/w PTR         r     1 CP6_BUF$
   650-0-0/w STRC        r     1 CP6_BUF_PTR             1311-0-0/b BIT (6)     r     1 CRWISH
  1274-0-0/w PTR         r     1 DBHDR$                     1-0-0/w STRC(72)    r     1 DISK_BOOTINFO
   644-0-0/d REMB        r     1 EDCIASK                  646-0-0/d REMB        r     1 ESADERR
  1271-0-0/w PTR         r     1 FCG$                    1243-0-0/w STRC(774)   r     1 FCGBUF
  1033-0-0/w STRC(243)   r     1 FCGQUES                  653-0-0/w PTR         r     1 FROMDESCR$
   653-0-0/w STRC        r     1 FROMDESCR_PTR           1042-0-0/w STRC(189)   r     1 GTASXM
   721-0-0/w STRC(189)   r     1 GTPOXM                   600-0-0/w PTR         r     1 HDR$
   450-0-0/w STRC(144)   r     1 HDR1E                    364-0-0/w STRC(144)   r     1 HDRAAR
   464-0-0/w STRC(144)   r     1 HDRAS                    574-0-0/w STRC(144)   r     1 HDRBUF
   643-0-0/w UBIN        r     1 HDRDA                    430-0-0/w STRC(144)   r     1 HDRDBS
  1303-0-0/w STRC(108)   r     1 HDRFCG                   440-0-0/w STRC(144)   r     1 HDRGD
   444-0-0/w STRC(144)   r     1 HDRGP                    434-0-0/w STRC(144)   r     1 HDRGR
   404-0-0/w STRC(144)   r     1 HDRMD                    414-0-0/w STRC(144)   r     1 HDRME
   400-0-0/w STRC(144)   r     1 HDRMH                    410-0-0/w STRC(144)   r     1 HDRMP0
   504-0-0/w STRC(144)   r     1 HDRMP1                   500-0-0/w STRC(144)   r     1 HDRPAT
   642-0-0/w UBIN(18)    r     1 HDRTYP                   374-0-0/w STRC(144)   r     1 HDRXIS
   370-0-0/w STRC(144)   r     1 HDRXLS                   600-0-0/w STRC        r     1 HDR_PTR
  1317-0-0/w UBIN(18)    r     1 HUBOOTRC(0:127)          607-0-0/w STRC(288)   r     1 IDBUF
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:275  
  1301-0-0/b STRC(72)    r     1 INITAOUH                 636-0-0/w UBIN        r     1 IPHYPG
  1276-0-0/b BIT (12)    r     1 ISOUH                    656-0-0/w UBIN        r     1 ITEMPO
   657-0-0/w UBIN        r     1 ITEMPO1                 1277-0-0/b BIT (12)    r     1 IXLSCH0
  1307-0-0/b BIT (6)     r     1 MT2WISH                 1306-0-0/b BIT (6)     r     1 MTWISH
  1167-0-0/w STRC(657)   r     1 NOPTIONS                1312-0-0/b BIT (6)     r     1 OCWISH
  1242-0-0/w STRC        r     1 OUHDCW                  1275-0-0/w PTR         r     1 OUHDESC$
  1310-0-0/w UBIN        r     1 PAT2_INDX               1060-0-0/w STRC(279)   r     1 PATAM
  1212-0-0/w STRC(450)   r     1 PATCH_ERR                637-0-0/w UBIN        r     1 PHYMEM_SZ
   606-0-0/w PTR         r     1 POB$                     606-0-0/w STRC        r     1 PODCW
   727-0-0/w STRC(405)   r     1 POHDRM                   774-0-0/w STRC(315)   r     1 POIDM
   743-0-0/w STRC(378)   r     1 POLRM                   1136-0-0/w STRC(432)   r     1 QCRQ
  1152-0-0/w STRC(459)   r     1 QOCQ                    1070-0-0/w STRC(432)   r     1 QTPQ
  1104-0-0/w STRC(441)   r     1 QTPQ1                   1121-0-0/w STRC(441)   r     1 QTPQ2
     3-0-0/b STRC        r     1 RPM_DISK_BOOTINFO        604-0-0/w PTR         r     1 SAD$
   604-0-0/w STRC        r     1 SADDCW                   605-0-0/w STRC        r     1 SADDCWX
  1005-0-0/w STRC(441)   r     1 SADEM                    660-0-0/w STRC(1188)  r     1 SADTAB
   605-0-0/w PTR         r     1 SADX$                   1300-0-0/w PTR         r     1 SCDESC$
  1050-0-0/w STRC(279)   r     1 SCDPA                   1313-0-0/c CHAR(8)     r     1 SMINI
  1306-0-0/b SBIN(6)     r     1 SMTWISH                 1273-0-0/b BIT         r     1 STAPFLG
   654-0-0/w UBIN        r     1 TEMPO                    655-0-0/w UBIN        r     1 TEMPO1
   617-0-0/w STRC(324)   r     1 TIDBUF                   652-0-0/w PTR         r     1 TODESCR$
   652-0-0/w STRC        r     1 TODESCR_PTR             1317-0-0/w UBIN        r     1 UBOOTRC(0:63)
   640-0-0/w UBIN        r     1 UFLG                    1277-0-0/b UBIN(12)    r     1 UIXLSCH0
   756-0-0/w STRC(477)   r     1 VID2BIG                  641-0-0/w PTR         r     1 WS0PT$
   641-0-0/w STRC        r     1 WS0PT_PTR                635-0-0/w UBIN        r     1 WSQ3PG

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    66-0-0/w PTR         r     1 BOOT$                     43-0-0/w UBIN        r     1 BOOTCODE
    55-0-0/w UBIN        r     1 CHECK_256K                42-0-0/w UBIN        r     1 CODE
    65-0-0/w PTR         r     1 CP6UL$                    65-0-0/w STRC        r     1 CP6UL_PTR
    33-0-0/w UBIN        r     1 CP6_BUF_LGTH              52-0-0/w PTR         r     1 DCB$
    52-0-0/w STRC        r     1 DCB_PTR                   34-0-0/w PTR         r     1 DESCR$
    63-0-0/w PTR         r     1 DUMMY$                    30-0-0/w PTR         r     1 ERAS_F$
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:276  
    30-0-0/w STRC        r     1 ERAS_F_PTR                31-0-0/w PTR         r     1 ERAS_L$
    32-0-0/w UBIN        r     1 ERAS_LGTH                 31-0-0/w STRC        r     1 ERAS_L_PTR
    46-0-0/b STRC        r     1 FM_INFO                   64-0-0/w PTR         r     1 FORMDFW$
    64-0-0/w STRC        r     1 FORMDFW_PTR               45-0-0/w UBIN        r     1 FREE_PG_COUNT
     3-0-0/w PTR         r     1 G1HJIT$                    3-0-0/w STRC        r     1 G1HJIT_PTR
    55-0-0/w STRC        r     1 HCHECK_256K               37-0-0/w SBIN        r     1 I
    60-0-0/w PTR         r     1 INFO$                     62-0-0/w PTR         r     1 INFOS$
    62-0-0/w STRC        r     1 INFOS_PTR                 61-0-0/w PTR         r     1 INFOX$
    61-0-0/w STRC        r     1 INFOX_PTR                 60-0-0/w STRC        r     1 INFO_PTR
    40-0-0/w SBIN        r     1 J                         53-0-0/w SBIN        r     1 LGTH
    57-0-0/w PTR         r     1 MEM$                      57-0-0/w STRC        r     1 MEM_PTR
    54-0-0/w PTR         r     1 MESSAGE$                  47-0-0/w PTR         r     1 MONSSR$
    47-0-0/w STRC        r     1 MONSSR_PTR                35-0-0/w UBIN        r     1 OUHDR#
    41-0-0/w UBIN        r     1 POIDC                     44-0-0/w UBIN        r     1 PREVBASE
    36-0-0/w PTR         r     1 SADTAB$                   36-0-0/w STRC        r     1 SADTAB_PTR
    51-0-0/w PTR         r     1 SAV$                      51-0-0/w STRC        r     1 SAV_PTR
    50-0-0/w PTR         r     1 WMON$                     50-0-0/w STRC        r     1 WMON_PTR

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/b STRC(5)     r     1 ADPXF                      0-0-0/w STRC(180)   r     1 ANSBUF
     0-0-0/b BIT         r     1 BEGAA                      0-0-0/w UBIN        r     1 BOOTTAPE
     0-0-0/b BIT         r     1 BSNLS                      0-0-0/w CHAR(4)     r     1 CP6UL(0:1023)
     0-0-0/b BIT         r     1 DCCSOD1                    0-0-0/w PTR         r     1 DCFWHDR$
     0-0-0/w PTR         r     1 DCFWSTART$                 0-0-0/w STRC        r     1 DCFWSTART_PTR
     0-0-0/b BIT         r     1 DCMMOD1                    0-0-0/b BIT         r     1 DECIM_FLG
     0-0-0/d STRC(396)   r     1 DEVINFO(0:21)              0-0-0/w PTR         r     1 FIELD$
     0-0-0/w UBIN        r     1 FIELD_LEN                  0-0-0/b BIT         r     1 FM_POTAPE
     0-0-0/b BIT         r     1 FM_SYSDP                   0-0-0/w PTR         r     1 FW$
     0-0-0/w PTR         r     1 FWHDR$                     0-0-0/w STRC        r     1 FWSTART_PTR
     0-0-0/w STRC        r     1 FW_PTR                     0-0-0/w UBIN        r     1 GAP_SZ
     0-0-0/w UBIN        r     1 HIAVPG                     0-0-0/w UBIN        r     1 HIPAGE
     0-0-0/w UBIN        r     1 HW_TYPE
     0-0-0/c CHAR(12)    r     1 H_DPS8000_CONFIG_NAME
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:277  
     0-0-0/w UBIN        r     1 H_DPS8000_SCU_INFO         0-0-0/w UBIN        r     1 IMWBASE
     0-0-0/w STRC        r     1 IOMTAB(0:3)                0-0-0/w UBIN        r     1 IPO_INDX
     0-0-0/c CHAR(12)    r     1 IS_CFG_NAME                0-0-0/w UBIN        r     1 IS_CFG_TYPE
     0-0-0/b BIT         r     1 IS_CSP_SIDE1               0-0-0/b BIT         r     1 IS_MEM_SIDE1
     0-0-0/w UBIN        r     1 IS_PPUT_SIZE               0-0-0/b BIT         r     1 IT_AAFAULT
     0-0-0/b BIT         r     1 IT_BOOTFLAG                0-0-0/b BIT         r     1 IT_UFLG
     0-0-0/b BIT         r     1 IT_XDELTA                  0-0-0/b STRC(72)    r     1 LOWER_SCU
     0-0-0/d REMB        r     1 LWSRDR                     0-0-0/w UBIN        r     1 MC1
     0-0-0/w UBIN        r     1 MC1ICW                     0-0-0/w UBIN        r     1 MC1LIM
     0-0-0/w UBIN        r     1 MC1PCW                     0-0-0/w UBIN        r     1 MC1SK
     0-0-0/w UBIN        r     1 MC1SKAD                    0-0-0/w UBIN        r     1 MM_AARD
     0-0-0/w PTR         r     1 MM_BYP$                    0-0-0/w SBIN        r     1 MM_FPPC
     0-0-0/w SBIN        r     1 MM_FPPH                    0-0-0/w SBIN        r     1 MM_FPPT
     0-0-0/w SBIN        r     1 MM_GAPSZ                   0-0-0/w SBIN        r     1 MM_PCORE
     0-0-0/w UBIN        r     1 MM_XDEL                    0-0-0/w UBIN        r     1 NAV8W
     0-0-0/w UBIN        r     1 NAVDA                      0-0-0/w UBIN        r     1 NAVDW
     0-0-0/w UBIN        r     1 NAVPG                      0-0-0/b STRC(3)     r     1 NF_FLG
     0-0-0/w UBIN        r     1 PDEV                       0-0-0/b BIT (9)     r     1 POBUF(0:4095)
     0-0-0/b BIT         r     1 POEM                       0-0-0/c CHAR(2)     r     1 PO_DEVN
     0-0-0/w UBIN        r     1 PO_INDX                    0-0-0/w STRC(36864) r     1 PTCHBF
     0-0-0/w UBIN        r     1 RC1                        0-0-0/w UBIN        r     1 RC1ICW
     0-0-0/w UBIN        r     1 RC1LIM                     0-0-0/w UBIN        r     1 RC1SK
     0-0-0/w UBIN        r     1 RC1SKAD                    0-0-0/b STRC(4)     r     1 RCV_FLG
     0-0-0/d REMB        r     1 READBTR                    0-0-0/b BIT         r     1 RPM_FLG
     0-0-0/b BIT         r     1 S1000_FLG                  0-0-0/b BIT (72)    r     1 SSDMONX
     0-0-0/w UBIN        r     1 SYS_DPX                    0-0-0/d STRC(72)    r     1 TGMISCDESC
     0-0-0/b BIT (72)    r     1 TGRDESC                    0-0-0/w UBIN        r     1 TOPDA
     0-0-0/b BIT         r     1 TQFLAG                     0-0-0/b UBIN(3)     r     1 UNF_FLG
     0-0-0/b STRC(72)    r     1 UPPER_SCU                  0-0-0/b UBIN(4)     r     1 URCV_FLG
     0-0-0/b BIT         r     1 VOFLG                      0-0-0/b BIT         r     1 XA_MODE
     0-0-0/w UBIN        r     1 XC1                        0-0-0/w UBIN        r     1 XC1ICW
     0-0-0/w UBIN        r     1 XC1LIM                     0-0-0/w UBIN        r     1 XC1SK
     0-0-0/w UBIN        r     1 XC1SKAD                    0-0-0/w UBIN        r     1 XDFLAG
     0-0-0/b BIT (72)    r     1 XDSSR

  ****  BASED and DCB variables  ****

PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:278  
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(7560)  r     1 AALS                       0-0-0/c CHAR(4096)  r     1 AARD_BUF
     0-0-0/w PTR         r     1 B$RODCB$(0:0)
     0-0-0/d STRC(3024)  r     1 B$ROSEG                    0-0-0/d STRC(2304)  r     1 B$SS
     0-0-0/w PTR         r     1 BAS$                       0-0-0/c CHAR(12)    r     1 BASED$CHAR
     0-0-0/w BIT         r     1 BASED_PAGE(0:1023)
     0-0-0/d STRC(72)    r     1 BAS_DESCR                  0-0-0/w STRC(144)   r     1 BAS_HDR
     0-0-0/w STRC        r     1 BAS_PTR                    0-0-0/w UBIN        r     1 BAS_UBIN
     0-0-0/c CHAR(256)   r     1 BOOT                       0-0-0/c ACHR        r     1 CP6_BUF
     0-0-0/w STRC(396)   r     1 CP6_DBHDR                  0-0-0/w STRC(144)   r     1 DKHDR
     0-0-0/w ABIT        r     1 ERAS_BUF                   0-0-0/w STRC(36864) r     1 FM$VID
     0-0-0/c ACHR        r     1 FWBUF                      0-0-0/d STRC(36864) r     1 G1HJIT
     0-0-0/w STRC        r     1 HBAS_UBIN
     0-0-0/b STRC(72)    r     1 H_SCU_INFO(0:1)
     0-0-0/c CHAR(2)     r     1 POANS                      0-0-0/w STRC(8640)  r     1 RDIR
     0-0-0/w PTR         r     1 SADTAB_ENTRY$              0-0-0/w ASTR        r     1 TEXTM
     0-0-0/c CHAR(2)     r     1 WANTFCG(0:40)              0-0-0/w STRC        r     1 WS0PT(0:0)


   Procedure GOPO_PL6 requires 2962 words for executable code.
   Procedure GOPO_PL6 requires 64 words of local(AUTO) storage.
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:279  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:280  
          MINI XREF LISTING

AALS.DESCA1.BASE
      7747**DCL     11904<<ASSIGN
AALS.DESCAM.BASE
      7725**DCL     11901<<ASSIGN
AALS.DESCASCH
      7125**DCL     12179--ASSIGN  12180<<ASSIGN
AALS.DESCASCH.BOUND
      7127**DCL     11891<<ASSIGN
AALS.DESCASCH0
      8029**DCL     11893--ASSIGN  12181--ASSIGN
AALS.DESCD
      8910**DCL     11859>>ASSIGN  11872>>ASSIGN  11910>>ASSIGN  11913>>ASSIGN
AALS.DESCGI
      7521**DCL     11579--ASSIGN  11913<<ASSIGN  11913>>ASSIGN
AALS.DESCGI.BASE
      7527**DCL     11912<<ASSIGN
AALS.DESCGI.BOUND
      7523**DCL     11911<<ASSIGN
AALS.DESCGPT.BASE
      8321**DCL     11842<<ASSIGN
AALS.DESCH.BASE
      6845**DCL     11900>>ASSIGN
AALS.DESCH1.BASE
      7593**DCL     11838<<ASSIGN  11902>>IF      11903>>ASSIGN
AALS.DESCJ.BASE
      7549**DCL     11675<<ASSIGN  11676>>ASSIGN  11677>>ASSIGN
AALS.DESCJ1.BASE
      7571**DCL     11844<<ASSIGN  11845>>ASSIGN
AALS.DESCMI
      7499**DCL     11910<<ASSIGN  11910>>ASSIGN
AALS.DESCMI.BASE
      7505**DCL     11909<<ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:281  
AALS.DESCMI.BOUND
      7501**DCL     11908<<ASSIGN
AALS.DESCMP1
      7191**DCL     11866--ASSIGN
AALS.DESCMPT.BASE
      8299**DCL     11673<<ASSIGN
AALS.DESCPPUT.BASE
      6691**DCL     11643<<ASSIGN  11646>>ASSIGN
AALS.DESCPPUT.BOUND
      6687**DCL     11644<<ASSIGN
AALS.DESCS1.BASE
      7659**DCL     11903<<ASSIGN  11904>>ASSIGN
AALS.DESCSCH
      6971**DCL     11335--ASSIGN
AALS.DESCSCH.BOUND
      6973**DCL     11878<<ASSIGN
AALS.DESCSCH0
      7764**DCL     11338--ASSIGN  11585--ASSIGN  11883--ASSIGN  11984--ASSIGN
AALS.DESCSM.BASE
      7637**DCL     11900<<ASSIGN  11901>>ASSIGN
AALS.DESCT1.BASE
      7703**DCL     11845<<ASSIGN
AALS.DESCTGM
      7147**DCL     11914<<ASSIGN
AALS.DESCTM.BASE
      7681**DCL     11676<<ASSIGN
AALS.DESCXL
      6795**DCL     11578--ASSIGN  11853--ASSIGN
AALS.MEMDESC.BASE
      6735**DCL     12070<<ASSIGN  12075>>IF      12076<<ASSIGN  12076>>ASSIGN
AALS.MONLSR
      6663**DCL     11455<<ASSIGN  11582<<ASSIGN
AALS.OUHDESC
      6773**DCL     11584--ASSIGN
AALS.PODESC.BASE
      6757**DCL     11770<<ASSIGN  11799>>IF      11800<<ASSIGN  11811<<ASSIGN  11811>>ASSIGN  11821>>ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:282  
     11822>>ASSIGN  11823>>ASSIGN  11830>>ASSIGN  11831>>ASSIGN  11832>>ASSIGN  12035<<ASSIGN  12036>>ASSIGN
     12070>>ASSIGN  12084<<ASSIGN  12084>>ASSIGN  12092>>ASSIGN  12099<<ASSIGN  12117<<ASSIGN  12117>>ASSIGN
AALS$
      8936**DCL      6605--IMP-PTR 11335>>ASSIGN  11338>>ASSIGN  11455>>ASSIGN  11578>>ASSIGN  11579>>ASSIGN
     11582>>ASSIGN  11584>>ASSIGN  11585>>ASSIGN  11643>>ASSIGN  11644>>ASSIGN  11646>>ASSIGN  11673>>ASSIGN
     11675>>ASSIGN  11676>>ASSIGN  11676>>ASSIGN  11677>>ASSIGN  11770>>ASSIGN  11799>>IF      11800>>ASSIGN
     11811>>ASSIGN  11811>>ASSIGN  11821>>ASSIGN  11822>>ASSIGN  11823>>ASSIGN  11830>>ASSIGN  11831>>ASSIGN
     11832>>ASSIGN  11838>>ASSIGN  11842>>ASSIGN  11844>>ASSIGN  11845>>ASSIGN  11845>>ASSIGN  11853>>ASSIGN
     11859>>ASSIGN  11866>>ASSIGN  11872>>ASSIGN  11878>>ASSIGN  11883>>ASSIGN  11891>>ASSIGN  11893>>ASSIGN
     11900>>ASSIGN  11900>>ASSIGN  11901>>ASSIGN  11901>>ASSIGN  11902>>IF      11903>>ASSIGN  11903>>ASSIGN
     11904>>ASSIGN  11904>>ASSIGN  11908>>ASSIGN  11909>>ASSIGN  11910>>ASSIGN  11910>>ASSIGN  11910>>ASSIGN
     11911>>ASSIGN  11912>>ASSIGN  11913>>ASSIGN  11913>>ASSIGN  11913>>ASSIGN  11914>>ASSIGN  11984>>ASSIGN
     12035>>ASSIGN  12036>>ASSIGN  12070>>ASSIGN  12070>>ASSIGN  12075>>IF      12076>>ASSIGN  12076>>ASSIGN
     12084>>ASSIGN  12084>>ASSIGN  12092>>ASSIGN  12099>>ASSIGN  12117>>ASSIGN  12117>>ASSIGN  12179>>ASSIGN
     12180>>ASSIGN  12181>>ASSIGN
AARD$
     10087**DCL     10099--REDEF
AARD_BUF
     10314**DCL     11810>>ASSIGN  12116>>ASSIGN
AARD_BUF$
     10315**DCL     10314--IMP-PTR 10327--REDEF   11802<<ASSIGN  11807<<ASSIGN  11810>>ASSIGN  12116>>ASSIGN
AARD_BUF_PTR.WOFFS
     10328**DCL     11803<<ASSIGN  11803>>ASSIGN
AARD_PTR.WOFFS
     10100**DCL     11141>>ASSIGN
AAR_DBHDR
     10738**DCL     10783--DCLINIT 12089>>ASSIGN
AAR_DBHDR.RECS.BASE
     10741**DCL     10742--REDEF   10746--REDEF
AAR_DBHDR.RECS.SIZE
     10749**DCL     10750--REDEF
AA_DBHDR$
     10783**DCL     10794--REDEF
ADIR
      9029**DCL     10126--DCLINIT 11153--ASSIGN  11973--ASSIGN
ADIR.AARDVARK.DA
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:283  
      9032**DCL     11137<<ASSIGN  11138>>ASSIGN  11333<>CALL    11992<>CALL
ADIR.AARDVARK.SIZE
      9033**DCL     11147<<ASSIGN
ADIR.ADEFNAMES
      9248**DCL     10418--DCLINIT
ADIR.AENTDEFS
      9236**DCL     10416--DCLINIT
ADIR.ASCHEMA
      9254**DCL     10419--DCLINIT
ADIR.ASYMDEFS
      9242**DCL     10417--DCLINIT
ADIR.DEFDIR
      9203**DCL     10421--DCLINIT
ADIR.DEFNAMES
      9197**DCL     10411--DCLINIT
ADIR.DUMP.DA
      9222**DCL     11109<<ASSIGN  11274<<ASSIGN  11789>>IF      12131>>IF
ADIR.ENTDEFS
      9185**DCL     10409--DCLINIT
ADIR.FW.ADIR
      9271**DCL      9272--REDEF
ADIR.G1DATA
      9156**DCL     10414--DCLINIT
ADIR.G1PROC
      9162**DCL     10415--DCLINIT
ADIR.G1RO
      9150**DCL     10413--DCLINIT
ADIR.LOWREAL
      9036**DCL     12000>>ASSIGN
ADIR.LOWREAL.DA
      9038**DCL     11139<<ASSIGN  11143>>ASSIGN
ADIR.LOWREAL.SIZE
      9039**DCL     11148<<ASSIGN
ADIR.MONDATA
      9048**DCL     10407--DCLINIT
ADIR.MONHJIT
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:284  
      9042**DCL     10406--DCLINIT
ADIR.MONID
      9227**DCL     11156<<ASSIGN
ADIR.MONID.A.BOOTC
      9230**DCL     11324<<ASSIGN  11324>>ASSIGN
ADIR.MONID.A.VER
      9229**DCL     11323>>IF      11327<<ASSIGN
ADIR.MONID.M
      9231**DCL      9234--REDEF
ADIR.MONPROC
      9054**DCL     10408--DCLINIT
ADIR.MONPROC1
      9060**DCL     10423--DCLINIT
ADIR.MONPROC10
      9114**DCL     10432--DCLINIT
ADIR.MONPROC11
      9120**DCL     10433--DCLINIT
ADIR.MONPROC12
      9126**DCL     10434--DCLINIT
ADIR.MONPROC13
      9132**DCL     10435--DCLINIT
ADIR.MONPROC14
      9138**DCL     10436--DCLINIT
ADIR.MONPROC2
      9066**DCL     10424--DCLINIT
ADIR.MONPROC3
      9072**DCL     10425--DCLINIT
ADIR.MONPROC4
      9078**DCL     10426--DCLINIT
ADIR.MONPROC5
      9084**DCL     10427--DCLINIT
ADIR.MONPROC6
      9090**DCL     10428--DCLINIT
ADIR.MONPROC7
      9096**DCL     10429--DCLINIT
ADIR.MONPROC8
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:285  
      9102**DCL     10430--DCLINIT
ADIR.MONPROC9
      9108**DCL     10431--DCLINIT
ADIR.PATCH
      9215**DCL     10422--DCLINIT
ADIR.PATCH.DA
      9217**DCL     11235>>ASSIGN
ADIR.SCHEMA
      9209**DCL     10412--DCLINIT
ADIR.SCHEMADIR.DA
      9182**DCL     11138<<ASSIGN  11139>>ASSIGN  11345<>CALL    11981<>CALL
ADIR.SCHEMADIR.SIZE
      9183**DCL     11149<<ASSIGN
ADIR.SITEINFO
      9260**DCL     10420--DCLINIT
ADIR.SYMDEFS
      9191**DCL     10410--DCLINIT
ADIR.TIGRDATA
      9144**DCL     11819>>ASSIGN
ADIR.TIGRDATA.BASE
      9145**DCL     11825<<ASSIGN
ADIR.TIGRDATA.DA
      9146**DCL     11260<<ASSIGN
ADIR.XDLS
      9168**DCL     10404--DCLINIT
ADIR.XDPROC
      9174**DCL     10405--DCLINIT
ADPXF.D
     10071**DCL     11589>>IF
ADPXF.P
     10072**DCL     11169>>IF
ADPXF.X
     10073**DCL     11442>>IF      11523>>IF
ALLFCG
     10808**DCL     12012<<ASSIGN  12026<<ASSIGN  12048>>IF      12183<<ASSIGN
AM1
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:286  
     10618**DCL     11536<>CALL
ANSBUF
     10681**DCL     11174<>CALL    11181<>CALL    11202<>CALL    11207<>CALL    11210<>CALL    11220<>CALL
     11223<>CALL    11598<>CALL    12161<>CALL
ANSBUF.TXT
     10683**DCL     11175<>CALL    11176>>DOSELCT 11182<>CALL    11599<>CALL    12162<>CALL
AOC
     10707**DCL-ENT 11203--CALL    11208--CALL    11211--CALL    11221--CALL    11224--CALL
ASADTAB$
     10437**DCL     11266>>ASSIGN
ASKADT2
     11181**LABEL   11182--CALLALT 11183--GOTO    11191--GOTO
ASKAS
     12161**LABEL   12163--GOTO    12174--GOTO
ASKPO
     11598**LABEL   11599--CALLALT 11600--GOTO    11611--GOTO
ASKT2
     11174**LABEL   11197--GOTO
B$RODCB$
      2029**DCL     11925>>ASSIGN  11930<<ASSIGN
B$ROSEG.DCBPTR$
      1993**DCL     11919>>ASSIGN  11922<<ASSIGN
B$ROSEG.NUMDCBS
      1995**DCL     11924>>DOINDEX
B$ROSEG.TREE$
      1994**DCL     11935>>ASSIGN  11941<<ASSIGN
B$SS
      1811**DCL     11500<<ASSIGN  11500>>ASSIGN
B$SS.IC
      1822**DCL     11459<<ASSIGN
B$SS.LSR
      1869**DCL     11455>>ASSIGN
B$SS.RVA
      1855**DCL      1856--REDEF
BAS$
     10566**DCL     10578--REDEF
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:287  
BASED$CHAR
     10561**DCL     11392<<ASSIGN
BASED_PAGE
     10585**DCL     12074<<ASSIGN  12074>>ASSIGN  12081<<ASSIGN
BASEGPT
     10233**DCL     11841<<ASSIGN  11842>>ASSIGN  11843>>ASSIGN
BASEH1
     10231**DCL     11837<<ASSIGN  11838>>ASSIGN  11945>>ASSIGN
BASEJ
     10229**DCL     11674<<ASSIGN  11675>>ASSIGN
BASEJ1
     10230**DCL     11843<<ASSIGN  11844>>ASSIGN
BASEMPT
     10232**DCL     11655<<ASSIGN  11668<<ASSIGN  11668>>ASSIGN  11670<<ASSIGN  11670>>ASSIGN  11673>>ASSIGN
     11674>>ASSIGN
BAS_DESCR
     10383**DCL     11337<<ASSIGN  11337>>ASSIGN  11341<<ASSIGN  11341>>ASSIGN  11382<<ASSIGN  11859<<ASSIGN
     11859>>ASSIGN  11872<<ASSIGN  11872>>ASSIGN  11987<<ASSIGN  11987>>ASSIGN
BAS_DESCR.BASE
     10391**DCL     11858<<ASSIGN  11871<<ASSIGN  11886<<ASSIGN  11896<<ASSIGN  12034<<ASSIGN  12035>>ASSIGN
     12067>>IF
BAS_DESCR.BOUND
     10387**DCL     11857<<ASSIGN  11870<<ASSIGN  12144<<ASSIGN
BAS_HDR
      9661**DCL     11266<<ASSIGN  11266>>ASSIGN  11709>>ASSIGN  11738<<ASSIGN  11753<<ASSIGN
BAS_HDR.BASE
      9662**DCL     11737>>IF      11751>>IF      11858>>ASSIGN  11871>>ASSIGN  12034>>ASSIGN
BAS_HDR.DA
      9663**DCL      9664--REDEF   11692>>DOWHILE 11702>>IF      11708>>ASSIGN  11739<<ASSIGN  11754<<ASSIGN
BAS_HDR.SIZE
      9667**DCL     11855>>IF      11857>>ASSIGN  11868>>IF      11870>>ASSIGN  12037<<ASSIGN  12097<<ASSIGN
     12097>>ASSIGN  12106<<ASSIGN  12106>>ASSIGN  12127>>IF      12127>>ASSIGN  12131>>IF      12132>>ASSIGN
BAS_PTR.S_D_FIELD
     10582**DCL     11952<<ASSIGN  11953<<ASSIGN  11954<<ASSIGN
BAS_UBIN
     10562**DCL     10563--REDEF   11371<<ASSIGN  11373<<ASSIGN  11377<<ASSIGN  11378<<ASSIGN  11380<<ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:288  
     11384<<ASSIGN  11387<<ASSIGN  11389<<ASSIGN  11431<<ASSIGN  11433<<ASSIGN  11435<<ASSIGN  11452<<ASSIGN
     11454<<ASSIGN  11499<<ASSIGN  11514<<ASSIGN  12043<<ASSIGN  12064<<ASSIGN  12064>>ASSIGN
BBOOTRC
     11067**DCL     11128<<ASSIGN  11128>>ASSIGN  11130<<ASSIGN  11130>>ASSIGN  11286<<ASSIGN  11286>>ASSIGN
     11288<<ASSIGN  11288>>ASSIGN  11297<<ASSIGN  11297>>ASSIGN  11299<<ASSIGN  11299>>ASSIGN  11308<<ASSIGN
     11308>>ASSIGN  11309<<ASSIGN  11309>>ASSIGN  11311<<ASSIGN  11311>>ASSIGN
BDEV
     11057**DCL     11126<<ASSIGN  11128>>ASSIGN  11130>>ASSIGN  11286>>ASSIGN  11288>>ASSIGN  11295<<ASSIGN
     11297>>ASSIGN  11299>>ASSIGN  11308>>ASSIGN  11309>>ASSIGN  11311>>ASSIGN
BDEV.DEV#
     11059**DCL     11127<<ASSIGN  11285<<ASSIGN  11296<<ASSIGN  11307<<ASSIGN
BDEV.ORD
     11058**DCL     11129<<ASSIGN  11287<<ASSIGN  11298<<ASSIGN  11310<<ASSIGN  11313<<ASSIGN
BEGAA
     10085**DCL     10087--DCLINIT
BOOT
     11061**DCL     11122>>ASSIGN  11131<<ASSIGN  11281>>ASSIGN  11289<<ASSIGN  11291>>ASSIGN  11303>>ASSIGN
     11316<<ASSIGN  11318<<ASSIGN
BOOT$
     11062**DCL     11061--IMP-PTR 11121<<ASSIGN  11122>>ASSIGN  11131>>ASSIGN  11280<<ASSIGN  11281>>ASSIGN
     11289>>ASSIGN  11290<<ASSIGN  11291>>ASSIGN  11302<<ASSIGN  11303>>ASSIGN  11315<<ASSIGN  11316>>ASSIGN
     11317<<ASSIGN  11318>>ASSIGN
BOOTCODE
     10464**DCL     11475<<ASSIGN  11479<<ASSIGN  11481<<ASSIGN  11483<<ASSIGN  11485<<ASSIGN  11487<<ASSIGN
     11491<<ASSIGN  11493<<ASSIGN  11495<<ASSIGN  11496<<ASSIGN  11499>>ASSIGN
BOOTRC
     11064**DCL     11063--DCLINIT 11065--REDEF   11066--REDEF   11067--REDEF   11122<<ASSIGN  11131>>ASSIGN
     11281<<ASSIGN  11289>>ASSIGN  11291<<ASSIGN  11303<<ASSIGN  11316>>ASSIGN  11318>>ASSIGN
BOOTS
     10106**DCL-ENT 10107--DCLINIT
BOOTS$
     10107**DCL     10119--REDEF
BOOTS_PTR.WOFFS
     10120**DCL     11142>>ASSIGN
BOOTTAPE
      8934**DCL     11590>>ASSIGN  11591>>ASSIGN  11592>>ASSIGN  11615<<ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:289  
BSNLS
      8935**DCL      8936--DCLINIT
BUF$
      9948**DCL      9701--IMP-PTR  9950--IMP-PTR 11109>>ASSIGN  11156>>ASSIGN  11271>>IF      11272>>ASSIGN
     11273>>ASSIGN
BUILDFW_DCWS
     10713**DCL-ENT 11249--CALL
CALL_MON
     11513**LABEL   11504--GOTO    11526--GOTO
CHECK16
     12199**LABEL   12187--CALLALT
CHECK_256K
     10825**DCL     10826--REDEF   12094<<ASSIGN  12141<<ASSIGN
CHECK_D16
     11630**LABEL   11621--CALLALT
CHECK_DPT16 IN PROCEDURE SET_PAT2_DEN
     11552**LABEL   11542--CALLALT
CHECK_DPT62 IN PROCEDURE SET_PAT2_DEN
     11563**LABEL   11553--CALLALT
CHKVID
     10696**DCL-ENT 11102--CALL
CLEAR_RIW
     10724**DCL-ENT 11472--CALL
CODE
     10463**DCL     11766<<ASSIGN  11767<<ASSIGN  11779<>CALL    12002<<ASSIGN  12102<<ASSIGN  12103<<ASSIGN
     12113<>CALL
CP6UL
     10934**DCL     10935--REDEF   11117--ASSIGN
CP6UL$
     11016**DCL     11028--REDEF   11117<<ASSIGN
CP6UL_PTR.WOFFS
     11029**DCL     11118<<ASSIGN  11118>>ASSIGN  11120<<ASSIGN  11120>>ASSIGN  11123>>ASSIGN
CP6_BUF
     10293**DCL     11810<<ASSIGN  12116<<ASSIGN
CP6_BUF$
     10294**DCL     10293--IMP-PTR 10306--REDEF   11079--ASSIGN  11810>>ASSIGN  12116>>ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:290  
CP6_BUF_LGTH
     10313**DCL     10293--IMP-SIZ 11801<<ASSIGN  11806<<ASSIGN  11810>>ASSIGN  11811>>ASSIGN  12115<<ASSIGN
     12116>>ASSIGN  12117>>ASSIGN
CP6_BUF_PTR
     10306**DCL     11763<<ASSIGN
CP6_BUF_PTR.S_D_FIELD
     10310**DCL     11764<<ASSIGN
CP6_DBHDR
     10766**DCL     12089<<ASSIGN
CP6_DBHDR.RECS.BASE
     10769**DCL     10770--REDEF   10774--REDEF   12092<<ASSIGN  12094>>ASSIGN  12097>>ASSIGN  12098<<ASSIGN
     12141>>ASSIGN
CP6_DBHDR.RECS.HBASE.H1
     10775**DCL     12095>>IF      12142<<ASSIGN
CP6_DBHDR.RECS.HBASE.H2
     10776**DCL     12142>>ASSIGN  12143<<ASSIGN
CP6_DBHDR.RECS.SIZE
     10777**DCL     10778--REDEF   12094>>ASSIGN  12105>>ASSIGN  12144>>ASSIGN
CRQ0
     11220**LABEL   11221--CALLALT
CRWISH
     10932**DCL     11164<<ASSIGN  11221<>CALL
DBHDR$
     10810**DCL     12032>>ASSIGN  12178<<ASSIGN
DCB$
     10529**DCL     10541--REDEF   11925<<ASSIGN  11930>>ASSIGN
DCB_PTR.S_D_FIELD
     10545**DCL     11929<<ASSIGN
DCB_PTR.WOFFS
     10542**DCL     11926>>IF      11928<<ASSIGN  11928>>ASSIGN
DCCSOD1
     10943**DCL     11249<>CALL
DCFWHDR$
     10946**DCL     10987--IMP-PTR 11242>>ASSIGN  11242>>ASSIGN  11245>>ASSIGN  11247>>ASSIGN  11248>>ASSIGN
DCFWSTART$
     10965**DCL     11246>>ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:291  
DCFWSTART_PTR
     10958**DCL     10965--REDEF
DCFWSTART_PTR.WOFFS
     10959**DCL     11247>>ASSIGN
DCIASK
     11104**LABEL   11101--CALLALT 11158--REMEMBR 11270--CALLALT 11320--CALLALT 11532--GOTO
DCMMOD1
     10944**DCL     11249<>CALL
DECIM_FLG
     10686**DCL     11183>>IF      11600>>IF      12163>>IF
DESCR$
     10394**DCL     10383--IMP-PTR 11853<<ASSIGN  11857>>ASSIGN  11858>>ASSIGN  11859>>ASSIGN  11859>>ASSIGN
     11862<<ASSIGN  11862>>ASSIGN  11866<<ASSIGN  11870>>ASSIGN  11871>>ASSIGN  11872>>ASSIGN  11872>>ASSIGN
     11875<<ASSIGN  11875>>ASSIGN  11883<<ASSIGN  11886>>ASSIGN  11887<<ASSIGN  11887>>ASSIGN  11893<<ASSIGN
     11896>>ASSIGN  11897<<ASSIGN  11897>>ASSIGN  12033<<ASSIGN  12034>>ASSIGN  12035>>ASSIGN  12067>>IF
DEVINFO.BSTAT.W1
      8990**DCL     11548>>IF      11559>>IF      11626>>IF      12195>>IF
DEVINFO.CHN#
      8949**DCL     11089>>ASSIGN  11091>>ASSIGN  11463>>ASSIGN  11468>>ASSIGN
DEVINFO.DEV#
      8950**DCL     11127>>ASSIGN  11285>>ASSIGN  11296>>ASSIGN  11307>>ASSIGN  11462>>ASSIGN  11467>>ASSIGN
DEVINFO.DEVNAME
      8996**DCL     11179>>ASSIGN  11189>>IF      11592>>ASSIGN  11596>>ASSIGN  11608>>IF      12159>>ASSIGN
     12171>>IF
DEVINFO.IOM#
      8951**DCL     11089>>ASSIGN  11092>>ASSIGN  11093>>ASSIGN  11095>>ASSIGN  11461>>ASSIGN  11466>>ASSIGN
DEVINFO.PCWS
      8953**DCL      8964--REDEF
DEVINFO.RPM_PTRS.EF_DCWS$
      8966**DCL      8967--REDEF
DEVINFO.STATUS
      8970**DCL      8989--REDEF
DISK_BOOTINFO.BCHN#
      9007**DCL     11091<<ASSIGN
DISK_BOOTINFO.BIMWAD
      9011**DCL     11094<<ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:292  
DISK_BOOTINFO.BIOM#
      9013**DCL     11095<<ASSIGN
DISK_BOOTINFO.BIOMAD
      9010**DCL     11093<<ASSIGN
DISK_BOOTINFO.BPORT#
      9009**DCL     11092<<ASSIGN
DKHDR.BUFAD
     10989**DCL     11245>>ASSIGN  11247<<ASSIGN
DKHDR.CSOSIZE
     10991**DCL     11242>>ASSIGN
DKHDR.MMOSIZE
     10992**DCL     11242>>ASSIGN
DOAS
     12176**LABEL   12171--GOTO
DOPAT2
     11193**LABEL   11189--GOTO
DUMMY$
     10924**DCL     11078<<ASSIGN  11079<<ASSIGN
EDCIASK
     10288**DCL     11158<<REMEMBR 11793>>UNWIND
ERAS_BUF
     10183**DCL     11577<<ASSIGN  11581<<ASSIGN
ERAS_F$
     10184**DCL     10196--REDEF   11574<<ASSIGN  11577>>ASSIGN  11578<<ASSIGN  11581>>ASSIGN
ERAS_F_PTR.WOFFS
     10197**DCL     11576>>ASSIGN  11580>>ASSIGN
ERAS_L$
     10203**DCL     10215--REDEF   11575<<ASSIGN  11579<<ASSIGN
ERAS_LGTH
     10222**DCL     10183--IMP-SIZ 11576<<ASSIGN  11577>>ASSIGN  11580<<ASSIGN  11581>>ASSIGN
ERAS_L_PTR.WOFFS
     10216**DCL     11576>>ASSIGN  11580>>ASSIGN
ESADERR
     10289**DCL     11159<<REMEMBR 11976>>UNWIND
FCG$
     10807**DCL     10806--IMP-PTR 12050>>IF
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:293  
FCGBUF
     10802**DCL     12011<>CALL
FCGBUF.TXT
     10804**DCL     10807--DCLINIT 12013>>DOSELCT 12016>>DOSELCT 12027<>CALL
FCGQUES
     10623**DCL     12011<>CALL
FIELD$
     10684**DCL     10691--IMP-PTR 11185>>ASSIGN  11185>>ASSIGN  11186>>ASSIGN  11189>>IF      11603>>ASSIGN
     11603>>ASSIGN  11604>>ASSIGN  11608>>IF      11616>>ASSIGN  12166>>ASSIGN  12166>>ASSIGN  12167>>ASSIGN
     12171>>IF
FIELD_LEN
     10685**DCL     11183>>IF      11184>>IF      11600>>IF      11602>>IF      12163>>IF      12165>>IF
FIND_SLOT
     11751**LABEL   11758--GOTO
FM$VID.DTT
      9977**DCL      9980--REDEF
FM$VID.SECTSTRT
      9970**DCL     11109>>ASSIGN
FM$VID.SYSDIRDA
      9966**DCL     11273<<ASSIGN
FM$VID.SYSSIZE
      9964**DCL     11271>>IF      11272<<ASSIGN
FM_INFO
     10467**DCL     11465>>ASSIGN  11470>>ASSIGN
FM_INFO.CHN
     10469**DCL     11463<<ASSIGN  11468<<ASSIGN
FM_INFO.DVN
     10470**DCL     11462<<ASSIGN  11467<<ASSIGN
FM_INFO.PORT
     10468**DCL     11461<<ASSIGN  11466<<ASSIGN
FM_POTAPE
     11074**DCL     11464--ASSIGN
FM_SYSDP
     11075**DCL     11469--ASSIGN
FORMDFW$
     10966**DCL     10978--REDEF   11246>>ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:294  
FORMDFW_PTR
     10978**DCL     11243<<ASSIGN
FORMDFW_PTR.S_D_FIELD
     10982**DCL     11244<<ASSIGN
FORMDFW_PTR.WOFFS
     10979**DCL     11245<<ASSIGN
FREEFW
     10721**DCL-ENT 11449--CALL
FREETABLES
     10722**DCL-ENT 11450--CALL
FREEXD
     10720**DCL-ENT 11442--CALL    11446--CALL
FREE_PG_COUNT
     10466**DCL     11437<<ASSIGN  11439<<ASSIGN  11442<>CALL    11446<>CALL    11449<>CALL    11450<>CALL
     11452>>ASSIGN
FROMDESCR$
     10353**DCL     10365--REDEF   11335<<ASSIGN  11337>>ASSIGN  11338<<ASSIGN  11341>>ASSIGN  11342<<ASSIGN
     11342>>ASSIGN  11983<<ASSIGN  11987>>ASSIGN
FROMDESCR_PTR.WOFFS
     10366**DCL     11985<<ASSIGN  11985>>ASSIGN  11989<<ASSIGN  11989>>ASSIGN
FW$
     10036**DCL     10048--REDEF
FWBUF
     10985**DCL     11246<<ASSIGN  11246>>ASSIGN
FWHDR$
     10945**DCL     11248<<ASSIGN
FWSTART_PTR.WOFFS
     10029**DCL     11144>>ASSIGN
FW_PTR.WOFFS
     10049**DCL     11643>>ASSIGN
G1HJIT.DBLNK.TCB.BASE
      5930**DCL     11937<<ASSIGN
G1HJIT.DBLNK.TCB.BOUND
      5926**DCL     11938<<ASSIGN
G1HJIT.SSS.FRAME2.IC
      6461**DCL     11458<<ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:295  
G1HJIT$
      6575**DCL      5617--IMP-PTR  6587--REDEF   11458>>ASSIGN  11937>>ASSIGN  11938>>ASSIGN
G1HJIT_PTR
      6587**DCL     11456<<ASSIGN  11933<<ASSIGN
G1HJIT_PTR.S_D_FIELD
      6591**DCL     11457<<ASSIGN  11934<<ASSIGN
GAP_SZ
     10083**DCL     11435>>ASSIGN  11439>>ASSIGN
GETFD
     10703**DCL-ENT 11175--CALL    11182--CALL    11599--CALL    12162--CALL
GOPO0
     11158**LABEL   11084--GOTO    11151--GOTO
GTASXM
     10628**DCL     12158--ASSIGN  12161<>CALL
GTPOXM
     10588**DCL     11595--ASSIGN  11598<>CALL
GT_DISKHDR
     11689**LABEL   11704--GOTO
GT_SYSPACKAD
     10697**DCL-ENT 11104--CALL
HANG
     10705**DCL-ENT 11537--CALL
HBAS_UBIN
     10563**DCL     11465<<ASSIGN  11470<<ASSIGN
HBAS_UBIN.H1
     10564**DCL     11881<<ASSIGN
HBAS_UBIN.H2
     10565**DCL     11951>>DOINDEX
HCHECK_256K.H1
     10827**DCL     12095>>IF      12097>>ASSIGN  12098>>ASSIGN  12099>>ASSIGN  12143>>ASSIGN  12144>>ASSIGN
HCHECK_256K.H2
     10828**DCL     12144>>ASSIGN
HDR$
      9671**DCL      9661--IMP-PTR  9683--REDEF   11264<<ASSIGN  11266>>ASSIGN  11267<<ASSIGN  11267>>ASSIGN
     11691<<ASSIGN  11692>>DOWHILE 11701<<ASSIGN  11702>>IF      11708>>ASSIGN  11709>>ASSIGN  11735<<ASSIGN
     11737>>IF      11738>>ASSIGN  11739>>ASSIGN  11749<<ASSIGN  11751>>IF      11753>>ASSIGN  11754>>ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:296  
     11852<<ASSIGN  11855>>IF      11857>>ASSIGN  11858>>ASSIGN  11861<<ASSIGN  11861>>ASSIGN  11865<<ASSIGN
     11868>>IF      11870>>ASSIGN  11871>>ASSIGN  11874<<ASSIGN  11874>>ASSIGN  12032<<ASSIGN  12034>>ASSIGN
     12037>>ASSIGN  12097>>ASSIGN  12097>>ASSIGN  12106>>ASSIGN  12106>>ASSIGN  12127>>IF      12127>>ASSIGN
     12131>>IF      12132>>ASSIGN
HDR1E.DA
      9420**DCL      9421--REDEF
HDR1E.START
      9426**DCL     11881>>ASSIGN
HDR1N.DA
      9442**DCL      9443--REDEF
HDR1S.DA
      9431**DCL      9432--REDEF
HDRAAR.BASE
      9276**DCL     11141<<ASSIGN
HDRAAR.DA
      9277**DCL      9278--REDEF   11143<<ASSIGN  11145>>ASSIGN  11283>>ASSIGN  11293>>ASSIGN  11305>>ASSIGN
HDRAAR.SIZE
      9281**DCL     11144<<ASSIGN  11145>>ASSIGN  11282>>ASSIGN  11292>>ASSIGN  11304>>ASSIGN  11454>>ASSIGN
HDRAAR.START
      9283**DCL     11142<<ASSIGN
HDRAS
      9451**DCL     12178--ASSIGN
HDRAS.BASE
      9452**DCL     11894>>ASSIGN
HDRAS.DA
      9453**DCL      9454--REDEF
HDRBUF
      9649**DCL     11575--ASSIGN  11684--CALL    11684--CALL    11709<<ASSIGN  11738>>ASSIGN  11753>>ASSIGN
     11819<<ASSIGN  12000<<ASSIGN  12189--CALL    12189--CALL
HDRBUF.BASE
      9650**DCL     11711>>IF      11711<<ASSIGN  11724>>DOSELCT 11727<<ASSIGN  11730<<ASSIGN  11732>>IF
     11733<<ASSIGN  11770>>ASSIGN  11814>>IF      11824<<ASSIGN
HDRBUF.DA
      9651**DCL      9652--REDEF   11820>>ASSIGN  12001>>ASSIGN
HDRBUF.SIZE
      9655**DCL     11771>>ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:297  
HDRBUF.TINF.TYPE
      9654**DCL     11710<<ASSIGN  11717>>IF      11717>>IF      11720>>CALLBLT 11722>>CALLBLT 11736>>ASSIGN
     11740>>IF      11741>>IF      11741>>IF      11747>>IF      11815>>IF      12010>>IF
HDRBUF.TYPE
      9656**DCL     11766>>IF
HDRDA
     10287**DCL     11708<<ASSIGN  11782<>CALL    11783<<ASSIGN  11783>>ASSIGN  11820<<ASSIGN  12001<<ASSIGN
HDRDBS
      9374**DCL     10810--DCLINIT
HDRDBS.BASE
      9375**DCL     11884>>ASSIGN
HDRDBS.DA
      9376**DCL      9377--REDEF
HDRDDIR.DA
      9475**DCL      9476--REDEF
HDRFCG
     10819**DCL     12045--CALL    12055--CALL
HDRFCG.BFCG
     10821**DCL     12046>>IF
HDRFCG.FCG
     10820**DCL     10821--REDEF   12050>>IF
HDRFCG.NOU
     10824**DCL     12064>>ASSIGN  12065>>DOINDEX
HDRFCG.NPR
     10823**DCL     12054>>DOINDEX
HDRGD.BASE
      9397**DCL     11911>>ASSIGN  11912>>ASSIGN
HDRGD.DA
      9398**DCL      9399--REDEF
HDRGP.BASE
      9408**DCL     11911>>ASSIGN
HDRGP.DA
      9409**DCL      9410--REDEF
HDRGP.SIZE
      9413**DCL     11911>>ASSIGN
HDRGP.START
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:298  
      9415**DCL     11458>>ASSIGN
HDRGR.BASE
      9386**DCL     11387>>ASSIGN  11836>>IF      11837>>ASSIGN  11839<<ASSIGN  11839>>ASSIGN  11945<<ASSIGN
HDRGR.DA
      9387**DCL      9388--REDEF
HDRGR.SIZE
      9391**DCL     11840<<ASSIGN  11840>>ASSIGN  11946<<ASSIGN  11946>>ASSIGN
HDRMD.BASE
      9320**DCL     11908>>ASSIGN  11909>>ASSIGN
HDRMD.DA
      9321**DCL      9322--REDEF
HDRME.BASE
      9342**DCL     11387>>ASSIGN
HDRME.DA
      9343**DCL      9344--REDEF
HDRMH.BASE
      9309**DCL     11387>>ASSIGN
HDRMH.DA
      9310**DCL      9311--REDEF
HDRMN.DA
      9365**DCL      9366--REDEF
HDRMP0.BASE
      9331**DCL     11908>>ASSIGN
HDRMP0.DA
      9332**DCL      9333--REDEF   11689>>IF
HDRMP0.SIZE
      9336**DCL     11908>>ASSIGN
HDRMP0.START
      9338**DCL     11459>>ASSIGN
HDRMP1
      9495**DCL     11691--ASSIGN  11749--ASSIGN  11865--ASSIGN
HDRMP1.BASE
      9496**DCL     11815>>IF
HDRMP1.DA
      9497**DCL      9498--REDEF
HDRMP10.DA
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:299  
      9596**DCL      9597--REDEF
HDRMP11.DA
      9607**DCL      9608--REDEF
HDRMP12.DA
      9618**DCL      9619--REDEF
HDRMP13.DA
      9629**DCL      9630--REDEF
HDRMP14.DA
      9640**DCL      9641--REDEF
HDRMP2.DA
      9508**DCL      9509--REDEF
HDRMP3.DA
      9519**DCL      9520--REDEF
HDRMP4.DA
      9530**DCL      9531--REDEF
HDRMP5.DA
      9541**DCL      9542--REDEF
HDRMP6.DA
      9552**DCL      9553--REDEF
HDRMP7.DA
      9563**DCL      9564--REDEF
HDRMP8.DA
      9574**DCL      9575--REDEF
HDRMP9.DA
      9585**DCL      9586--REDEF
HDRMS.DA
      9354**DCL      9355--REDEF
HDRPAT
      9484**DCL     11958<<ASSIGN
HDRPAT.DA
      9486**DCL      9487--REDEF   11259<<ASSIGN  11260>>ASSIGN
HDRTM.DA
      9464**DCL      9465--REDEF
HDRTYP
     10286**DCL     11689>>IF      11699>>ASSIGN  11703<<ASSIGN  11703>>ASSIGN  11710>>ASSIGN  11713>>IF
     11714<<ASSIGN  11714>>ASSIGN  11978<<ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:300  
HDRXIS.BASE
      9298**DCL     11501>>IF
HDRXIS.DA
      9299**DCL      9300--REDEF
HDRXLS
      9286**DCL     11264--ASSIGN  11574--ASSIGN  11735--ASSIGN  11852--ASSIGN
HDRXLS.BASE
      9287**DCL     11387>>ASSIGN
HDRXLS.DA
      9288**DCL      9289--REDEF
HDR_PTR.WOFFS
      9684**DCL     11693<<ASSIGN  11693>>ASSIGN  11736<<ASSIGN  11736>>ASSIGN  11757<<ASSIGN  11757>>ASSIGN
HIAVPG
     10082**DCL     11431>>ASSIGN  11437>>ASSIGN  11439>>ASSIGN
HIPAGE
     10081**DCL     11433>>ASSIGN  11660>>DOINDEX
HUBOOTRC
     11066**DCL     11123<<ASSIGN  11282<<ASSIGN  11292<<ASSIGN  11304<<ASSIGN
HW_TYPE
     11069**DCL     11365--ASSIGN
H_DPS8000_CONFIG_NAME
      8921**DCL     11391--ASSIGN
H_DPS8000_SCU_INFO
      8922**DCL     11393--ASSIGN
H_SCU_INFO
     10550**DCL     11394<<ASSIGN
H_SCU_INFO.LBND
     10551**DCL     11396<<ASSIGN  11399<<ASSIGN  11405<<ASSIGN  11408<<ASSIGN
H_SCU_INFO.PAGES
     10553**DCL     11398<<ASSIGN  11401<<ASSIGN  11407<<ASSIGN  11410<<ASSIGN  11417<<ASSIGN  11421<<ASSIGN
H_SCU_INFO.STATUS.LMEM
     10559**DCL     11402<<ASSIGN  11411<<ASSIGN
H_SCU_INFO.STATUS.NCONF
     10555**DCL     11416<<ASSIGN  11420<<ASSIGN
H_SCU_INFO.STATUS.RBIT
     10556**DCL     11425<<ASSIGN  11427<<ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:301  
H_SCU_INFO.UBND
     10552**DCL     11397<<ASSIGN  11400<<ASSIGN  11406<<ASSIGN  11409<<ASSIGN
I
     10460**DCL     11098<<DOINDEX 11099>>ASSIGN  11188<<DOINDEX 11189>>IF      11193>>IF      11194>>ASSIGN
     11265<<DOINDEX 11266>>ASSIGN  11340<<DOINDEX 11607<<DOINDEX 11608>>IF      11613>>ASSIGN  11614>>ASSIGN
     11615>>ASSIGN  11647<<ASSIGN  11649<<ASSIGN  11650<<ASSIGN  11651>>DOWHILE 11652<<ASSIGN  11652>>ASSIGN
     11660<<DOINDEX 11661>>ASSIGN  11665<<ASSIGN  11666>>DOWHILE 11667<<ASSIGN  11667>>ASSIGN  11854<<DOINDEX
     11867<<DOINDEX 11885<<DOINDEX 11895<<DOINDEX 11924<<DOINDEX 11925>>ASSIGN  11930>>ASSIGN  11951<<DOINDEX
     11986<<DOINDEX 12049<<DOINDEX 12050>>IF      12054<<DOINDEX 12091<<DOINDEX 12092>>ASSIGN  12094>>ASSIGN
     12094>>ASSIGN  12095>>IF      12097>>ASSIGN  12098>>ASSIGN  12102>>IF      12105>>ASSIGN  12140<<DOINDEX
     12141>>ASSIGN  12142>>ASSIGN  12142>>ASSIGN  12143>>ASSIGN  12144>>ASSIGN  12170<<DOINDEX 12171>>IF
     12176>>ASSIGN
IDBUF.CNT
     10224**DCL     11147>>ASSIGN  11333<>CALL    11636<>CALL    11992<>CALL
IDBUF.TXT
     10225**DCL     11323>>IF      11327>>ASSIGN  11333--CALL    11636--CALL    11637>>IF      11640>>ASSIGN
     11992--CALL    11994>>IF      11996>>ASSIGN
IMWBASE
     10035**DCL     11094>>ASSIGN
INFO$
     10867**DCL     10766--IMP-PTR 10879--REDEF   11078--ASSIGN  11881>>ASSIGN  11919>>ASSIGN  11922>>ASSIGN
     11924>>DOINDEX 11925>>ASSIGN  11930>>ASSIGN  11935>>ASSIGN  11941>>ASSIGN  11951>>DOINDEX 11952>>ASSIGN
     11953>>ASSIGN  11954>>ASSIGN  12089>>ASSIGN  12092>>ASSIGN  12094>>ASSIGN  12094>>ASSIGN  12095>>IF
     12097>>ASSIGN  12098>>ASSIGN  12105>>ASSIGN  12121<<ASSIGN  12121>>ASSIGN  12141>>ASSIGN  12142>>ASSIGN
     12142>>ASSIGN  12143>>ASSIGN  12144>>ASSIGN  12147<<ASSIGN  12147>>ASSIGN
INFOS$
     10905**DCL     10917--REDEF   12043>>ASSIGN  12064>>ASSIGN  12064>>ASSIGN
INFOS_PTR
     10917**DCL     12041<<ASSIGN
INFOS_PTR.S_D_FIELD
     10921**DCL     12042<<ASSIGN
INFOX$
     10886**DCL     10898--REDEF   11371>>ASSIGN  11373>>ASSIGN  11377>>ASSIGN  11378>>ASSIGN  11380>>ASSIGN
     11382>>ASSIGN  11384>>ASSIGN  11387>>ASSIGN  11389>>ASSIGN  11392>>ASSIGN  11394>>ASSIGN  11396>>ASSIGN
     11397>>ASSIGN  11398>>ASSIGN  11399>>ASSIGN  11400>>ASSIGN  11401>>ASSIGN  11402>>ASSIGN  11405>>ASSIGN
     11406>>ASSIGN  11407>>ASSIGN  11408>>ASSIGN  11409>>ASSIGN  11410>>ASSIGN  11411>>ASSIGN  11416>>ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:302  
     11417>>ASSIGN  11420>>ASSIGN  11421>>ASSIGN  11425>>ASSIGN  11427>>ASSIGN  11431>>ASSIGN  11433>>ASSIGN
     11435>>ASSIGN  11452>>ASSIGN  11454>>ASSIGN  11465>>ASSIGN  11470>>ASSIGN  11499>>ASSIGN  11514>>ASSIGN
INFOX_PTR
     10898**DCL     11362<<ASSIGN  11524<<ASSIGN
INFOX_PTR.S_D_FIELD
     10902**DCL     11363<<ASSIGN  11525<<ASSIGN
INFO_PTR
     10879**DCL     11879<<ASSIGN  11917<<ASSIGN  11948<<ASSIGN  12038<<ASSIGN
INFO_PTR.S_D_FIELD
     10883**DCL     11880<<ASSIGN  11918<<ASSIGN  11949<<ASSIGN  12039<<ASSIGN
INFO_PTR.WOFFS
     10880**DCL     12040<<ASSIGN  12067>>IF      12136>>ASSIGN  12138<<ASSIGN
INIT1
     10716**DCL-ENT 11357--CALL
INITAOUH
     10816**DCL     12180>>ASSIGN
INITM
     10714**DCL-ENT 11354--CALL
INITP
     10717**DCL-ENT 11358--CALL
INITX
     10718**DCL-ENT 11359--CALL
INIT_DISK
     10699**DCL-ENT 11105--CALL
IOMTAB.MAILBAD
     10007**DCL     11093>>ASSIGN
IOMTAB.PORT#
     10009**DCL     11092>>ASSIGN  11461>>ASSIGN  11466>>ASSIGN
IPHYPG
     10235**DCL     11646<<ASSIGN  11653<<ASSIGN  11653>>ASSIGN  11655>>ASSIGN
IPO_INDX
     10076**DCL     11591<<ASSIGN  11614<<ASSIGN  11684<>CALL    11779<>CALL    12045<>CALL    12055<>CALL
     12087<>CALL    12113<>CALL    12176<<ASSIGN  12186<>CALL    12187<>CALL    12189<>CALL    12191<>CALL
     12195>>IF      12199<>CALL    12200<>CALL    12203<>CALL    12204<<ASSIGN
ISOUH
     10812**DCL     12039>>ASSIGN  12042>>ASSIGN  12149>>IF      12177<<ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:303  
IS_CFG_NAME
      8932**DCL     11392>>ASSIGN
IS_CFG_TYPE
      8931**DCL     11395>>IF      11413>>DOCASE  11436>>IF
IS_CSP_SIDE1
      8923**DCL     11395>>IF      11415>>IF      11424>>IF
IS_MEM_SIDE1
      8924**DCL     11395>>IF
IS_PPUT_SIZE
      8933**DCL     11644>>ASSIGN
ITEMPO
     10397**DCL     12036<<ASSIGN  12067>>IF      12075>>IF      12083<<ASSIGN  12083>>ASSIGN  12092>>ASSIGN
     12099>>ASSIGN  12151>>ASSIGN
ITEMPO1
     10398**DCL     11891>>ASSIGN  11894>>ASSIGN  12136<<ASSIGN  12137>>ASSIGN  12152>>ASSIGN
ITIG
     10723**DCL-ENT 11473--CALL
IT_AAFAULT
     11071**DCL     11381--ASSIGN
IT_BOOTFLAG
     11070**DCL     11474--ASSIGN
IT_UFLG
     11073**DCL     11379--ASSIGN
IT_XDELTA
     11072**DCL     11383--ASSIGN  11513--ASSIGN
IXLSCH0
     10813**DCL     10814--REDEF   12182<<ASSIGN
J
     10461**DCL     11950<<ASSIGN  11952>>ASSIGN  11953>>ASSIGN  11954>>ASSIGN  11955<<ASSIGN  11955>>ASSIGN
     12065<<DOINDEX 12139<<DOINDEX
KEYIN
     10704**DCL-ENT 11174--CALL    11181--CALL    11598--CALL    12011--CALL    12161--CALL
KEYINXX
     10708**DCL-ENT 11202--CALL    11207--CALL    11210--CALL    11220--CALL    11223--CALL
LGTH
     10548**DCL     10985--IMP-SIZ 11242<<ASSIGN  11246>>ASSIGN  11246>>ASSIGN  11771<<ASSIGN  11773>>IF
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:304  
     11775>>IF      11776>>ASSIGN  11777<<ASSIGN  11777>>ASSIGN  12105<<ASSIGN  12106>>ASSIGN  12108>>IF
     12110>>IF      12111>>ASSIGN  12112<<ASSIGN  12112>>ASSIGN
LOADPDBR
     10715**DCL-ENT 11355--CALL
LOAD_SSR
     10719**DCL-ENT 11507--CALL    11515--CALL
LOWER_SCU.LB
      8926**DCL     11396>>ASSIGN  11398>>ASSIGN  11405>>ASSIGN  11407>>ASSIGN
LOWER_SCU.UB
      8927**DCL     11397>>ASSIGN  11398>>ASSIGN  11406>>ASSIGN  11407>>ASSIGN
LWSRDR
     10291**DCL     11133>>UNWIND
MC1
     10997**DCL     11302--ASSIGN  11304--ASSIGN  11305--ASSIGN  11308--ASSIGN  11308--ASSIGN  11309--ASSIGN
     11309--ASSIGN  11311--ASSIGN  11311--ASSIGN
MC1ICW
     11003**DCL     11311--ASSIGN  11311--ASSIGN
MC1LIM
     11001**DCL     11304--ASSIGN
MC1PCW
     11002**DCL     11309--ASSIGN  11309--ASSIGN
MC1SK
     11000**DCL     11308--ASSIGN  11308--ASSIGN
MC1SKAD
     10998**DCL     11305--ASSIGN
MDELTCALL
     10709**DCL-ENT 11233--CALL    11254--CALL    11351--CALL
MEM$
     10848**DCL     10860--REDEF   12074>>ASSIGN  12074>>ASSIGN  12081>>ASSIGN
MEM_PTR
     10860**DCL     12071<<ASSIGN
MEM_PTR.S_D_FIELD
     10864**DCL     12072<<ASSIGN
MESSAGE$
     10677**DCL     10678--IMP-PTR 11178<<ASSIGN  11179>>ASSIGN  11179>>ASSIGN  11595<<ASSIGN  11596>>ASSIGN
     11596>>ASSIGN  11719<<ASSIGN  11720>>CALLBLT 11720>>CALLBLT 11721<<ASSIGN  11722>>CALLBLT 11722>>CALLBLT
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:305  
     12158<<ASSIGN  12159>>ASSIGN  12159>>ASSIGN
MINIQC_PL6
     10700**DCL-ENT 11154--CALL    11331--CALL    11345--CALL    11779--CALL    11782--CALL    11974--CALL
     11981--CALL    12087--CALL    12113--CALL
MINIQ_PL6
     10701**DCL-ENT 11333--CALL    11541--CALL    11542--CALL    11543--CALL    11544--CALL    11552--CALL
     11553--CALL    11554--CALL    11555--CALL    11563--CALL    11564--CALL    11565--CALL    11566--CALL
     11620--CALL    11621--CALL    11622--CALL    11630--CALL    11631--CALL    11633--CALL    11636--CALL
     11684--CALL    11992--CALL    12045--CALL    12055--CALL    12186--CALL    12187--CALL    12189--CALL
     12191--CALL    12199--CALL    12200--CALL    12203--CALL
MM$DESC.BOUND
      1754**DCL      1755--REDEF
MM$DESC.FLGS
      1755**DCL      1755--REDEF
MM$PPUT.USER#
      1743**DCL      1743--REDEF
MM_AARD
      1678**DCL     11453--ASSIGN
MM_BYP$
      1674**DCL      1674--IMP-PTR
MM_FPPC
      1671**DCL     11451--ASSIGN
MM_FPPH
      1671**DCL     11388--ASSIGN
MM_FPPT
      1671**DCL     11430--ASSIGN
MM_GAPSZ
      1676**DCL     11434--ASSIGN
MM_PCORE
      1676**DCL     11432--ASSIGN
MM_XDEL
      1678**DCL     11386--ASSIGN
MONSSR$
     10472**DCL     10484--REDEF   11455>>ASSIGN  11459>>ASSIGN  11500>>ASSIGN  11500>>ASSIGN
MONSSR_PTR
     10484**DCL     11360<<ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:306  
MONSSR_PTR.S_D_FIELD
     10488**DCL     11361<<ASSIGN
MT2WISH
     10930**DCL     11166<<ASSIGN  11211<>CALL    11212>>IF
MTWISH
     10928**DCL     10929--REDEF   11203<>CALL    11208<>CALL
NAV8W
     10015**DCL     11679<<ASSIGN  11730>>ASSIGN  11822<<ASSIGN  11831<<ASSIGN  11848<<ASSIGN
NAVDA
     10013**DCL     11145<<ASSIGN  11235<<ASSIGN  11259>>ASSIGN  11261<<ASSIGN  11261>>ASSIGN  11272>>ASSIGN
     11274>>ASSIGN  11739>>ASSIGN  11754>>ASSIGN  11789>>IF      11796<<ASSIGN  11796>>ASSIGN  12127<<ASSIGN
     12127>>ASSIGN  12128<<ASSIGN  12128>>ASSIGN  12131>>IF      12132<<ASSIGN  12132>>ASSIGN
NAVDW
     10014**DCL     11678<<ASSIGN  11679>>ASSIGN  11680>>ASSIGN  11733>>ASSIGN  11821<<ASSIGN  11830<<ASSIGN
     11847<<ASSIGN
NAVPG
     10016**DCL     11389>>ASSIGN  11437>>ASSIGN  11439>>ASSIGN  11680<<ASSIGN  11727>>ASSIGN  11823<<ASSIGN
     11824>>ASSIGN  11825>>ASSIGN  11832<<ASSIGN  11841>>ASSIGN  11846<<ASSIGN  11846>>ASSIGN  11847>>ASSIGN
     11848>>ASSIGN
NF_FLG
     10058**DCL     10062--REDEF   11151>>IF      11271>>IF      11789>>IF      12126>>IF
NF_FLG.NONEW
     10060**DCL     11170>>IF
NF_FLG.RECON
     10059**DCL     11495>>IF
NOPTIONS
     10668**DCL     11171<>CALL
OCQ0
     11223**LABEL   11224--CALLALT
OCWISH
     10933**DCL     11165<<ASSIGN  11224<>CALL
OUHDCW
     10794**DCL     12087--CALL
OUHDCW.TALLY
     10799**DCL     12009<<ASSIGN
OUHDESC$
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:307  
     10811**DCL     11584<<ASSIGN  12033>>ASSIGN  12179<<ASSIGN
OUHDR#
     10399**DCL     12137<<ASSIGN  12139>>DOINDEX
PAT2_DONE
     11200**LABEL   11175--CALLALT
PAT2_ERR IN PROCEDURE SET_PAT2_DEN
     11570**LABEL   11549--GOTO    11560--GOTO    11564--CALLALT
PAT2_INDX
     10931**DCL     11167<<ASSIGN  11194<<ASSIGN  11200>>IF      11541<>CALL    11542<>CALL    11543<>CALL
     11544<>CALL    11548>>IF      11552<>CALL    11553<>CALL    11554<>CALL    11555<>CALL    11559>>IF
     11563<>CALL    11564<>CALL    11565<>CALL    11566<>CALL
PATAM
     10638**DCL     11178--ASSIGN  11181<>CALL
PATCH_ERR
     10673**DCL     11214<>CALL
PDEV
     10939**DCL     11232<<ASSIGN  11234<<ASSIGN  11253<<ASSIGN  11255<<ASSIGN  11350<<ASSIGN
PHYMEM_SZ
     10236**DCL     11659<<ASSIGN  11661<<ASSIGN  11661>>ASSIGN  11663<<ASSIGN  11663>>ASSIGN
PO$
     10829**DCL     10841--REDEF
POANS
     10691**DCL     11185<<ASSIGN  11185>>ASSIGN  11186<<ASSIGN  11189>>IF      11603<<ASSIGN  11603>>ASSIGN
     11604<<ASSIGN  11608>>IF      11616>>ASSIGN  12166<<ASSIGN  12166>>ASSIGN  12167<<ASSIGN  12171>>IF
POASDR
     12155**LABEL   12186--CALLALT 12196--GOTO    12200--CALLALT
POB$
     10164**DCL     10175--REDEF
POBOOT
     11572**ENTRY   11160--CALL
POBT1
     11620**LABEL   11962--GOTO
POBT11
     12000**LABEL   11992--CALLALT 11994--GOTO
POBT2
     11643**LABEL   11814--GOTO
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:308  
POBUF
      9947**DCL      9948--DCLINIT 10145--DCLINIT 10164--DCLINIT 10353--DCLINIT 11099<<ASSIGN  11315--ASSIGN
     11317--ASSIGN  11336--ASSIGN  11543--CALL    11554--CALL    11565--CALL    11622--CALL    11633--CALL
     11802--ASSIGN  11807--ASSIGN  11983--ASSIGN
PODBS
     12007**LABEL   11742--GOTO
PODBS0A
     12032**LABEL   12018--GOTO    12022--GOTO
PODBS1
     12045**LABEL   12059--GOTO    12123--GOTO
PODBS1C
     12203**LABEL   12149--GOTO
PODBS5
     12064**LABEL   12050--GOTO
PODBS6A
     12074**LABEL   12077--GOTO
PODBS8
     12108**LABEL   12118--GOTO
PODBS9
     12120**LABEL   12108--GOTO
PODCW
     10175**DCL     11345--CALL    11779--CALL    11782--CALL    11981--CALL    12113--CALL
PODCW.TALLY
     10180**DCL     11769<<ASSIGN  11776<<ASSIGN  11806>>ASSIGN  11980<<ASSIGN  12104<<ASSIGN  12111<<ASSIGN
     12115>>ASSIGN
POEM
     10086**DCL     11534<>CALL
POERR
     11534**LABEL   11160--CALLALT 11215--GOTO
POF
     11613**LABEL   11608--GOTO
POHDR
     11680**LABEL   11833--GOTO
POHDRM
     10593**DCL     11719--ASSIGN  11967<>CALL
POHDRR
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:309  
     11832**LABEL   11740--GOTO
POHDRX
     11967**LABEL   11684--CALLALT 11717--GOTO    11747--GOTO
POIDC
     10462**DCL     11618<<ASSIGN  11961<<ASSIGN  11961>>ASSIGN  11962>>IF
POIDM
     10608**DCL     11964<>CALL
POIDX
     11961**LABEL   11636--CALLALT
POLR
     11773**LABEL   11812--GOTO
POLR1
     11763**LABEL   11826--GOTO    12007--GOTO
POLR11
     11769**LABEL   12003--GOTO
POLRE
     11814**LABEL   11773--GOTO    12155--GOTO    12162--CALLALT 12192--GOTO    12201--GOTO    12205--GOTO
POLRM
     10598**DCL     11721--ASSIGN  11970<>CALL
POLRX
     11970**LABEL   11627--GOTO    11633--CALLALT 11779--CALLALT 11782--CALLALT 12045--CALLALT 12087--CALLALT
     12113--CALLALT
POMVLR
     11799**LABEL   11786--GOTO
POPSAD
     11973**LABEL   11586--GOTO
POSKIP
     11636**LABEL   11623--GOTO    11637--GOTO
PO_DEVN
     10080**DCL     11592<<ASSIGN  11616<<ASSIGN
PO_INDX
     10075**DCL     11193>>IF      11461>>ASSIGN  11462>>ASSIGN  11463>>ASSIGN  11590<<ASSIGN  11613<<ASSIGN
     11620<>CALL    11621<>CALL    11622<>CALL    11626>>IF      11630<>CALL    11631<>CALL    11633<>CALL
     11636<>CALL    12204>>ASSIGN
PREVBASE
     10465**DCL     11884<<ASSIGN  11886>>ASSIGN  11888<<ASSIGN  11888>>ASSIGN  11894<<ASSIGN  11896>>ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:310  
     11898<<ASSIGN  11898>>ASSIGN
PTCHBF
     10935**DCL     11162<<ASSIGN
QCRQ
     10658**DCL     11220<>CALL
QOCQ
     10663**DCL     11223<>CALL
QTPQ
     10643**DCL     11202<>CALL
QTPQ1
     10648**DCL     11207<>CALL
QTPQ2
     10653**DCL     11210<>CALL
RC1
     11011**DCL     11121--ASSIGN  11123--ASSIGN  11124--ASSIGN  11128--ASSIGN  11128--ASSIGN  11130--ASSIGN
     11130--ASSIGN  11280--ASSIGN  11282--ASSIGN  11283--ASSIGN  11286--ASSIGN  11286--ASSIGN  11288--ASSIGN
     11288--ASSIGN
RC1ICW
     11015**DCL     11130--ASSIGN  11130--ASSIGN  11288--ASSIGN  11288--ASSIGN
RC1LIM
     11014**DCL     11123--ASSIGN  11282--ASSIGN
RC1SK
     11013**DCL     11128--ASSIGN  11128--ASSIGN  11286--ASSIGN  11286--ASSIGN
RC1SKAD
     11012**DCL     11124--ASSIGN  11283--ASSIGN
RCV_FLG
     10063**DCL     10068--REDEF   11163>>IF      11322>>IF      11441>>IF      11477>>IF      11502>>IF
     11586>>IF      11683>>IF      11779>>IF      11786>>IF      11817>>IF      11916>>IF      12007>>IF
RCV_FLG.DB
     10065**DCL     11116>>IF
RCV_FLG.RC
     10064**DCL     11116>>IF      11132>>IF
RDIR.FW.RDIR
      9943**DCL      9944--REDEF
RDIR.MONID
      9899**DCL     11156>>ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:311  
RDIR.MONID.M
      9903**DCL      9906--REDEF
RDVID
     10693**DCL-ENT 11101--CALL    11270--CALL
READBTR
     10290**DCL     11132>>UNWIND
READ_CONF
     10694**DCL-ENT 11083--CALL
RPM_DISK_BOOTINFO.BCHN#
      9017**DCL     11089<<ASSIGN
RPM_FLG
     10940**DCL     11089>>IF      11279>>IF      11376>>IF      11390>>IF      11471>>IF      11649>>IF
S1000_FLG
     10941**DCL     11239>>IF      11370>>IF      11449>>IF      11647>>IF      11657>>IF
SAD$
     10126**DCL     10137--REDEF
SADDCW
     10137**DCL     11331--CALL    11974--CALL
SADDCW.TALLY
     10142**DCL     11973<<ASSIGN
SADDCWX
     10156**DCL     11154--CALL
SADDCWX.TALLY
     10161**DCL     11153<<ASSIGN
SADEM
     10613**DCL     11531<>CALL
SADERR
     11531**LABEL   11154--CALLALT 11159--REMEMBR 11331--CALLALT 11333--CALLALT 11345--CALLALT
SADTAB
     10403**DCL     10437--REDEF   11698--ASSIGN
SADTAB.MP1$
     10423**DCL     11690--ASSIGN
SADTAB$
     10439**DCL     10451--REDEF   10458--IMP-PTR 11690<<ASSIGN  11698<<ASSIGN  11701>>ASSIGN
SADTAB_ENTRY$
     10458**DCL     11701>>ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:312  
SADTAB_PTR.WOFFS
     10452**DCL     11694<<ASSIGN  11694>>ASSIGN  11699<<ASSIGN  11699>>ASSIGN
SADX$
     10145**DCL     10156--REDEF
SAV$
     10510**DCL     10522--REDEF   11919<<ASSIGN  11922>>ASSIGN  11935<<ASSIGN  11941>>ASSIGN
SAV_PTR
     10522**DCL     11939<<ASSIGN
SAV_PTR.S_D_FIELD
     10526**DCL     11921<<ASSIGN  11940<<ASSIGN
SAV_PTR.WOFFS
     10523**DCL     11920<<ASSIGN  11920>>ASSIGN  11925>>ASSIGN  11930>>ASSIGN  11936<<ASSIGN  11936>>ASSIGN
     11937>>ASSIGN  11938>>ASSIGN
SCDESC$
     10815**DCL     11585<<ASSIGN  12144>>ASSIGN  12181<<ASSIGN
SCDPA
     10633**DCL     11174<>CALL
SET_PAT2_DEN
     11540**PROC    11213--CALL
SMINI
     10938**DCL     11231--CALL    11252--CALL    11349--CALL
SMTWISH
     10929**DCL     11168<<ASSIGN
SSDMONX
     10688**DCL     11515<>CALL
STAPFLG
     10809**DCL     12015<<ASSIGN  12155>>IF
SYS_DPX
     10084**DCL     11089>>ASSIGN  11089>>ASSIGN  11091>>ASSIGN  11092>>ASSIGN  11093>>ASSIGN  11095>>ASSIGN
     11127>>ASSIGN  11154<>CALL    11285>>ASSIGN  11296>>ASSIGN  11307>>ASSIGN  11331<>CALL    11333<>CALL
     11345<>CALL    11466>>ASSIGN  11467>>ASSIGN  11468>>ASSIGN  11782<>CALL    11974<>CALL    11981<>CALL
     11992<>CALL
TEMPO
     10395**DCL     12151<<ASSIGN
TEMPO1
     10396**DCL     11878>>ASSIGN  11884>>ASSIGN  12152<<ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:313  
TEXTM.CNT
     10679**DCL     10680--IMP-SIZ 11179>>ASSIGN  11596>>ASSIGN  11720>>CALLBLT 11722>>CALLBLT 12159>>ASSIGN
TEXTM.TXT
     10680**DCL     11179<<ASSIGN  11596<<ASSIGN  11720<<CALLBLT 11722<<CALLBLT 12159<<ASSIGN
TGMISCDESC
     11046**DCL     11914>>ASSIGN
TGRDESC
     10689**DCL     11382>>ASSIGN
TIDBUF
     10226**DCL     11641<>CALL    11997<>CALL
TIDBUF.TXT
     10228**DCL     11640<<ASSIGN  11996<<ASSIGN
TODESCR$
     10334**DCL     10346--REDEF   11336<<ASSIGN  11337>>ASSIGN  11339<<ASSIGN  11339>>ASSIGN  11341>>ASSIGN
     11343<<ASSIGN  11343>>ASSIGN  11984<<ASSIGN  11987>>ASSIGN
TODESCR_PTR.WOFFS
     10347**DCL     11988<<ASSIGN  11988>>ASSIGN
TOOBIG
     11792**LABEL   12133--GOTO
TOPDA
     10012**DCL     11124>>ASSIGN  11137>>ASSIGN  11154<>CALL    11273>>ASSIGN  11331<>CALL    11974<>CALL
TPQ0
     11202**LABEL   11203--CALLALT
TPQ1
     11207**LABEL   11208--CALLALT
TPQ2
     11210**LABEL   11211--CALLALT
TQFLAG
     10056**DCL     11111>>IF      11229>>IF      11230<<ASSIGN
TRY
     11089**LABEL   11106--GOTO
TYPEC
     10702**DCL-ENT 11171--CALL    11214--CALL    11531--CALL    11534--CALL    11536--CALL    11641--CALL
     11792--CALL    11964--CALL    11967--CALL    11970--CALL    11997--CALL
UBOOTRC
     11065**DCL     11124<<ASSIGN  11283<<ASSIGN  11293<<ASSIGN  11305<<ASSIGN
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:314  
UFLG
     10237**DCL     11380>>ASSIGN
UIXLSCH0
     10814**DCL     12143>>ASSIGN
UNF_FLG
     10062**DCL     11477>>DOCASE
UNWESAD
     11976**LABEL   11981--CALLALT
UPPER_CASE
     10706**DCL-ENT 12027--CALL
UPPER_SCU.LB
      8929**DCL     11399>>ASSIGN  11401>>ASSIGN  11408>>ASSIGN  11410>>ASSIGN
UPPER_SCU.UB
      8930**DCL     11400>>ASSIGN  11401>>ASSIGN  11409>>ASSIGN  11410>>ASSIGN
URCV_FLG
     10068**DCL     11489>>DOCASE
VID2BIG
     10603**DCL     11792<>CALL
VOFLG
     10055**DCL     11082>>IF      11228>>IF      11475>>IF      11521>>IF
WANTFCG
     10806**DCL     12050>>IF
WMON$
     10491**DCL     10503--REDEF   11365<<ASSIGN  11379<<ASSIGN  11381<<ASSIGN  11383<<ASSIGN  11386<<ASSIGN
     11388<<ASSIGN  11391<<ASSIGN  11393<<ASSIGN  11430<<ASSIGN  11432<<ASSIGN  11434<<ASSIGN  11451<<ASSIGN
     11453<<ASSIGN  11464<<ASSIGN  11469<<ASSIGN  11474<<ASSIGN  11513<<ASSIGN
WMON_PTR.WOFFS
     10504**DCL     11371>>ASSIGN  11373>>ASSIGN  11377>>ASSIGN  11378>>ASSIGN  11380>>ASSIGN  11382>>ASSIGN
     11384>>ASSIGN  11387>>ASSIGN  11389>>ASSIGN  11392>>ASSIGN  11394>>ASSIGN  11396>>ASSIGN  11397>>ASSIGN
     11398>>ASSIGN  11399>>ASSIGN  11400>>ASSIGN  11401>>ASSIGN  11402>>ASSIGN  11405>>ASSIGN  11406>>ASSIGN
     11407>>ASSIGN  11408>>ASSIGN  11409>>ASSIGN  11410>>ASSIGN  11411>>ASSIGN  11416>>ASSIGN  11417>>ASSIGN
     11420>>ASSIGN  11421>>ASSIGN  11425>>ASSIGN  11427>>ASSIGN  11431>>ASSIGN  11433>>ASSIGN  11435>>ASSIGN
     11452>>ASSIGN  11454>>ASSIGN  11465>>ASSIGN  11470>>ASSIGN  11499>>ASSIGN  11514>>ASSIGN
WRITE_PATCH
     10710**DCL-ENT 11231--CALL    11252--CALL    11349--CALL
WRTDP
PL6.E3A0      #003=GOPO_PL6 File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:49 Page:315  
     10712**DCL-ENT 11522--CALL
WRTFW
     10711**DCL-ENT 11238--CALL
WRVID
     10695**DCL-ENT 11320--CALL
WS0PT.RPN
     10258**DCL     10259--REDEF   11659>>ASSIGN  11661>>ASSIGN
WS0PT.SCTRL
     10260**DCL     10261--REDEF
WS0PT$
     10267**DCL     10238--IMP-PTR 10279--REDEF   11659>>ASSIGN  11661>>ASSIGN
WS0PT_PTR
     10279**DCL     11080<<ASSIGN
WS0PT_PTR.S_D_FIELD
     10283**DCL     11081<<ASSIGN
WSQ3PG
     10234**DCL     11677<<ASSIGN  11678>>ASSIGN
XA_MODE
     10942**DCL     11371>>IF
XC1
     11005**DCL     11290--ASSIGN  11292--ASSIGN  11293--ASSIGN  11297--ASSIGN  11297--ASSIGN  11299--ASSIGN
     11299--ASSIGN
XC1ICW
     11010**DCL     11299--ASSIGN  11299--ASSIGN
XC1LIM
     11008**DCL     11292--ASSIGN
XC1SK
     11007**DCL     11297--ASSIGN  11297--ASSIGN
XC1SKAD
     11006**DCL     11293--ASSIGN
XDFLAG
     10057**DCL     11446>>IF      11504>>IF      11506<<ASSIGN
XDSSR
     10690**DCL     11507<>CALL

PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:316  
     1828        1        /*T***********************************************************/
     1829        2        /*T*                                                         */
     1830        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1831        4        /*T*                                                         */
     1832        5        /*T***********************************************************/
     1833        6        AOC:    PROC(WISH) ALTRET;
     1834        7        /* Processes the Patches answer */
     1835        8        %INCLUDE IS$MACROS;
     1836     1283    1   DCL 1 WISH UNAL,
     1837     1284    1         2 B BIT(1),
     1838     1285    1         2 P BIT(1),
     1839     1286    1         2 R BIT(1),
     1840     1287    1         2 T BIT(1),
     1841     1288    1         2 X BIT(1),
     1842     1289    1         2 M BIT(1);
     1843     1290    1   DCL UWISH REDEF WISH UBIN(6) UNAL;
     1844     1291    1   DCL SWISH REDEF WISH SBIN(6) UNAL;
     1845     1292    1   DCL 1 ANSBUF SYMREF,
     1846     1293    1         2 CNT UBIN WORD,
     1847     1294    1         2 TXT CHAR(16);
     1848     1295        %TEXTC(N#=HLP1,M#="' M - Read MINI Patches . '");
     1849     1300        %TEXTC(N#=HLP2,M#="' X - Read XDELTA Patches . '");
     1850     1305        %TEXTC(N#=HLP3,M#="' T - Read TIGR Commands . '");
     1851     1310        %TEXTC(N#=HLP4,M#="' R - Read RUMs . '");
     1852     1315        %TEXTC(N#=HLP5,M#="' P - Read PLOVER commands . '");
     1853     1320        %TEXTC(N#=HLP8,M#="' B - Read BOOTIME commands . '");
     1854     1325        %TEXTC(N#=HLP7,M#="' N - None of the above options . '");
     1855     1330        %TEXTC(N#=HLP6,M#="' Y - All of the above options . '");
     1856     1335    1   DCL TYPEC ENTRY(1);
     1857     1336    1   DCL I UBIN WORD;
     1858     1337        /**/
     1859     1338    1           WISH='0'B;
     1860     1339    2           DO SELECT(SUBSTR(ANSBUF.TXT,0,1));
     1861     1340    2             SELECT('?');
     1862     1341    2             CALL TYPEC(HLP1);
     1863     1342    2             CALL TYPEC(HLP2);
     1864     1343    2             CALL TYPEC(HLP3);
PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:317  
     1865     1344    2             CALL TYPEC(HLP4);
     1866     1345    2             CALL TYPEC(HLP5);
     1867     1346    2             CALL TYPEC(HLP8);
     1868     1347    2             CALL TYPEC(HLP6);
     1869     1348    2             CALL TYPEC(HLP7);
     1870     1349    2             ALTRETURN;
     1871     1350    2             SELECT('Y','y');
     1872     1351    2             SWISH=-1;
     1873     1352    2             SELECT('N','n');
     1874     1353    2             WISH='0'B;
     1875     1354    2             SELECT(ELSE);
     1876     1355    3           DO I=0 TO 15;
     1877     1356    4             DO SELECT(SUBSTR(ANSBUF.TXT,I,1));
     1878     1357    4               SELECT(' ');
     1879     1358    4               SELECT('M','m');
     1880     1359    4               WISH.M='1'B;
     1881     1360    4               SELECT('X','x');
     1882     1361    4               WISH.X='1'B;
     1883     1362    4               SELECT('T','t');
     1884     1363    4               WISH.T='1'B;
     1885     1364    4               SELECT('R','r');
     1886     1365    4               WISH.R='1'B;
     1887     1366    4               SELECT('P','p');
     1888     1367    4               WISH.P='1'B;
     1889     1368    4               SELECT('B','b');
     1890     1369    4               WISH.B='1'B;
     1891     1370    4               SELECT(ELSE);
     1892     1371    4             ALTRETURN;
     1893     1372    4             END;                          /* DO SELECT                          */
     1894     1373    3           END;                            /* DO I=                              */
     1895     1374    2           END;                            /* DO SELECT                          */
     1896     1375    1           RETURN;
     1897     1376    1   END AOC;
     1898     1377        %EOD;

PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:318  
--  Include file information  --

   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure AOC.

   Procedure AOC requires 187 words for executable code.
   Procedure AOC requires 6 words of local(AUTO) storage.

PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:319  

 Object Unit name= AOC                                        File name= ISI$FIXSYST.:E05TOU
 UTS= JUL 29 '97 22:50:50.36 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none    66    102  AOC
    1   Proc  even  none   187    273  AOC
    2  RoData even  none    20     24  AOC

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes    yes     yes      Std        1  AOC

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      0  HLP1                               0     10  HLP2
    0     20  HLP3                               0     30  HLP4
    0     36  HLP5                               0     46  HLP8
    0     57  HLP7                               0     71  HLP6

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       1 TYPEC
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET
PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:320  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ANSBUF                                B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:321  


     1828        1        /*T***********************************************************/
     1829        2        /*T*                                                         */
     1830        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1831        4        /*T*                                                         */
     1832        5        /*T***********************************************************/
     1833        6        AOC:    PROC(WISH) ALTRET;

      6  1 000000   000000 700200 xent  AOC          TSX0  ! X66_AUTO_1
         1 000001   000006 000001                    ZERO    6,1

     1834        7        /* Processes the Patches answer */
     1835        8        %INCLUDE IS$MACROS;
     1836     1283    1   DCL 1 WISH UNAL,
     1837     1284    1         2 B BIT(1),
     1838     1285    1         2 P BIT(1),
     1839     1286    1         2 R BIT(1),
     1840     1287    1         2 T BIT(1),
     1841     1288    1         2 X BIT(1),
     1842     1289    1         2 M BIT(1);
     1843     1290    1   DCL UWISH REDEF WISH UBIN(6) UNAL;
     1844     1291    1   DCL SWISH REDEF WISH SBIN(6) UNAL;
     1845     1292    1   DCL 1 ANSBUF SYMREF,
     1846     1293    1         2 CNT UBIN WORD,
     1847     1294    1         2 TXT CHAR(16);
     1848     1295        %TEXTC(N#=HLP1,M#="' M - Read MINI Patches . '");
     1849     1300        %TEXTC(N#=HLP2,M#="' X - Read XDELTA Patches . '");
     1850     1305        %TEXTC(N#=HLP3,M#="' T - Read TIGR Commands . '");
     1851     1310        %TEXTC(N#=HLP4,M#="' R - Read RUMs . '");
     1852     1315        %TEXTC(N#=HLP5,M#="' P - Read PLOVER commands . '");
     1853     1320        %TEXTC(N#=HLP8,M#="' B - Read BOOTIME commands . '");
     1854     1325        %TEXTC(N#=HLP7,M#="' N - None of the above options . '");
     1855     1330        %TEXTC(N#=HLP6,M#="' Y - All of the above options . '");
     1856     1335    1   DCL TYPEC ENTRY(1);
     1857     1336    1   DCL I UBIN WORD;
     1858     1337        /**/
     1859     1338    1           WISH='0'B;
PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:322  

   1338  1 000002   200003 470500                    LDP0    @WISH,,AUTO
         1 000003   003100 060400                    CSL     bolr='003'O
         1 000004   000002 000001 xsym               BDSC    B_VECTNIL+2              by=0,bit=0,n=1
         1 000005   000000 000006                    BDSC    0,,PR0                   by=0,bit=0,n=6

     1860     1339    2           DO SELECT(SUBSTR(ANSBUF.TXT,0,1));

   1339  1 000006   000001 236000 xsym               LDQ     ANSBUF+1
         1 000007   777000 376003                    ANQ     -512,DU
         1 000010   131000 116003                    CMPQ    45568,DU
         1 000011   000034 602000 1                  TNC     s:1339+22
         1 000012   000001 236000 xsym               LDQ     ANSBUF+1
         1 000013   777000 376003                    ANQ     -512,DU
         1 000014   131000 116003                    CMPQ    45568,DU
         1 000015   000112 600000 1                  TZE     s:1351
         1 000016   000001 236000 xsym               LDQ     ANSBUF+1
         1 000017   777000 376003                    ANQ     -512,DU
         1 000020   171000 116003                    CMPQ    61952,DU
         1 000021   000027 602000 1                  TNC     s:1339+17
         1 000022   000001 236000 xsym               LDQ     ANSBUF+1
         1 000023   777000 376003                    ANQ     -512,DU
         1 000024   171000 116003                    CMPQ    61952,DU
         1 000025   000112 600000 1                  TZE     s:1351
         1 000026   000122 710000 1                  TRA     s:1355
         1 000027   000001 236000 xsym               LDQ     ANSBUF+1
         1 000030   777000 376003                    ANQ     -512,DU
         1 000031   156000 116003                    CMPQ    56320,DU
         1 000032   000122 601000 1                  TNZ     s:1355
         1 000033   000116 710000 1                  TRA     s:1353
         1 000034   000001 236000 xsym               LDQ     ANSBUF+1
         1 000035   777000 376003                    ANQ     -512,DU
         1 000036   077000 116003                    CMPQ    32256,DU
         1 000037   000122 602000 1                  TNC     s:1355
         1 000040   000001 236000 xsym               LDQ     ANSBUF+1
         1 000041   777000 376003                    ANQ     -512,DU
         1 000042   077000 116003                    CMPQ    32256,DU
PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:323  
         1 000043   000051 600000 1                  TZE     s:1341
         1 000044   000001 236000 xsym               LDQ     ANSBUF+1
         1 000045   777000 376003                    ANQ     -512,DU
         1 000046   116000 116003                    CMPQ    39936,DU
         1 000047   000122 601000 1                  TNZ     s:1355
         1 000050   000116 710000 1                  TRA     s:1353

     1861     1340    2             SELECT('?');

     1862     1341    2             CALL TYPEC(HLP1);

   1341  1 000051   000000 630400 2                  EPPR0   0
         1 000052   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000053   000000 701000 xent               TSX1    TYPEC
         1 000054   000000 011000                    NOP     0

     1863     1342    2             CALL TYPEC(HLP2);

   1342  1 000055   000001 630400 2                  EPPR0   1
         1 000056   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000057   000000 701000 xent               TSX1    TYPEC
         1 000060   000000 011000                    NOP     0

     1864     1343    2             CALL TYPEC(HLP3);

   1343  1 000061   000002 630400 2                  EPPR0   2
         1 000062   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000063   000000 701000 xent               TSX1    TYPEC
         1 000064   000000 011000                    NOP     0

     1865     1344    2             CALL TYPEC(HLP4);

   1344  1 000065   000003 630400 2                  EPPR0   3
         1 000066   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000067   000000 701000 xent               TSX1    TYPEC
         1 000070   000000 011000                    NOP     0

PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:324  
     1866     1345    2             CALL TYPEC(HLP5);

   1345  1 000071   000004 630400 2                  EPPR0   4
         1 000072   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000073   000000 701000 xent               TSX1    TYPEC
         1 000074   000000 011000                    NOP     0

     1867     1346    2             CALL TYPEC(HLP8);

   1346  1 000075   000005 630400 2                  EPPR0   5
         1 000076   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000077   000000 701000 xent               TSX1    TYPEC
         1 000100   000000 011000                    NOP     0

     1868     1347    2             CALL TYPEC(HLP6);

   1347  1 000101   000006 630400 2                  EPPR0   6
         1 000102   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000103   000000 701000 xent               TSX1    TYPEC
         1 000104   000000 011000                    NOP     0

     1869     1348    2             CALL TYPEC(HLP7);

   1348  1 000105   000007 630400 2                  EPPR0   7
         1 000106   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000107   000000 701000 xent               TSX1    TYPEC
         1 000110   000000 011000                    NOP     0

     1870     1349    2             ALTRETURN;

   1349  1 000111   000000 702200 xent               TSX2  ! X66_AALT

     1871     1350    2             SELECT('Y','y');

     1872     1351    2             SWISH=-1;

   1351  1 000112   003100 061400                    CSR     bolr='003'O
PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:325  
         1 000113   000027 000044 xsym               BDSC    B_VECTNIL+23             by=0,bit=0,n=36
         1 000114   000000 000006                    BDSC    0,,PR0                   by=0,bit=0,n=6
         1 000115   000272 710000 1                  TRA     s:1375

     1873     1352    2             SELECT('N','n');

     1874     1353    2             WISH='0'B;

   1353  1 000116   003100 060400                    CSL     bolr='003'O
         1 000117   000002 000001 xsym               BDSC    B_VECTNIL+2              by=0,bit=0,n=1
         1 000120   000000 000006                    BDSC    0,,PR0                   by=0,bit=0,n=6
         1 000121   000272 710000 1                  TRA     s:1375

     1875     1354    2             SELECT(ELSE);

     1876     1355    3           DO I=0 TO 15;

   1355  1 000122   200004 450100                    STZ     I,,AUTO

     1877     1356    4             DO SELECT(SUBSTR(ANSBUF.TXT,I,1));

   1356  1 000123   200004 235100                    LDA     I,,AUTO
         1 000124   040000 106405                    CMPC    fill='040'O
         1 000125   000001 000001 xsym               ADSC9   ANSBUF+1,A               cn=0,n=1
         1 000126   000010 000001 2                  ADSC9   8                        cn=0,n=1
         1 000127   000170 602000 1                  TNC     s:1356+37
         1 000130   000234 600000 1                  TZE     s:1361
         1 000131   040000 106405                    CMPC    fill='040'O
         1 000132   000001 000001 xsym               ADSC9   ANSBUF+1,A               cn=0,n=1
         1 000133   000011 000001 2                  ADSC9   9                        cn=0,n=1
         1 000134   000155 602000 1                  TNC     s:1356+26
         1 000135   000253 600000 1                  TZE     s:1367
         1 000136   040000 106405                    CMPC    fill='040'O
         1 000137   000001 000001 xsym               ADSC9   ANSBUF+1,A               cn=0,n=1
         1 000140   000012 000001 2                  ADSC9   10                       cn=0,n=1
         1 000141   000150 602000 1                  TNC     s:1356+21
         1 000142   000241 600000 1                  TZE     s:1363
PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:326  
         1 000143   040000 106405                    CMPC    fill='040'O
         1 000144   000001 000001 xsym               ADSC9   ANSBUF+1,A               cn=0,n=1
         1 000145   000013 000001 2                  ADSC9   11                       cn=0,n=1
         1 000146   000265 601000 1                  TNZ     s:1371
         1 000147   000234 710000 1                  TRA     s:1361
         1 000150   040000 106405                    CMPC    fill='040'O
         1 000151   000001 000001 xsym               ADSC9   ANSBUF+1,A               cn=0,n=1
         1 000152   000014 000001 2                  ADSC9   12                       cn=0,n=1
         1 000153   000265 601000 1                  TNZ     s:1371
         1 000154   000246 710000 1                  TRA     s:1365
         1 000155   040000 106405                    CMPC    fill='040'O
         1 000156   000001 000001 xsym               ADSC9   ANSBUF+1,A               cn=0,n=1
         1 000157   000015 000001 2                  ADSC9   13                       cn=0,n=1
         1 000160   000163 602000 1                  TNC     s:1356+32
         1 000161   000227 600000 1                  TZE     s:1359
         1 000162   000265 710000 1                  TRA     s:1371
         1 000163   040000 106405                    CMPC    fill='040'O
         1 000164   000001 000001 xsym               ADSC9   ANSBUF+1,A               cn=0,n=1
         1 000165   000016 000001 2                  ADSC9   14                       cn=0,n=1
         1 000166   000265 601000 1                  TNZ     s:1371
         1 000167   000260 710000 1                  TRA     s:1369
         1 000170   040000 106405                    CMPC    fill='040'O
         1 000171   000001 000001 xsym               ADSC9   ANSBUF+1,A               cn=0,n=1
         1 000172   000017 000001 2                  ADSC9   15                       cn=0,n=1
         1 000173   000214 602000 1                  TNC     s:1356+57
         1 000174   000227 600000 1                  TZE     s:1359
         1 000175   040000 106405                    CMPC    fill='040'O
         1 000176   000001 000001 xsym               ADSC9   ANSBUF+1,A               cn=0,n=1
         1 000177   000020 000001 2                  ADSC9   16                       cn=0,n=1
         1 000200   000207 602000 1                  TNC     s:1356+52
         1 000201   000246 600000 1                  TZE     s:1365
         1 000202   040000 106405                    CMPC    fill='040'O
         1 000203   000001 000001 xsym               ADSC9   ANSBUF+1,A               cn=0,n=1
         1 000204   000021 000001 2                  ADSC9   17                       cn=0,n=1
         1 000205   000265 601000 1                  TNZ     s:1371
         1 000206   000241 710000 1                  TRA     s:1363
         1 000207   040000 106405                    CMPC    fill='040'O
PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:327  
         1 000210   000001 000001 xsym               ADSC9   ANSBUF+1,A               cn=0,n=1
         1 000211   000022 000001 2                  ADSC9   18                       cn=0,n=1
         1 000212   000265 601000 1                  TNZ     s:1371
         1 000213   000253 710000 1                  TRA     s:1367
         1 000214   040000 106405                    CMPC    fill='040'O
         1 000215   000001 000001 xsym               ADSC9   ANSBUF+1,A               cn=0,n=1
         1 000216   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
         1 000217   000265 602000 1                  TNC     s:1371
         1 000220   000226 600000 1                  TZE     s:1357
         1 000221   040000 106405                    CMPC    fill='040'O
         1 000222   000001 000001 xsym               ADSC9   ANSBUF+1,A               cn=0,n=1
         1 000223   000023 000001 2                  ADSC9   19                       cn=0,n=1
         1 000224   000265 601000 1                  TNZ     s:1371
         1 000225   000260 710000 1                  TRA     s:1369

     1878     1357    4               SELECT(' ');

   1357  1 000226   000266 710000 1                  TRA     s:1373

     1879     1358    4               SELECT('M','m');

     1880     1359    4               WISH.M='1'B;

   1359  1 000227   200003 470500                    LDP0    @WISH,,AUTO
         1 000230   003100 060400                    CSL     bolr='003'O
         1 000231   000030 000001 xsym               BDSC    B_VECTNIL+24             by=0,bit=0,n=1
         1 000232   000000 050001                    BDSC    0,,PR0                   by=0,bit=5,n=1
         1 000233   000266 710000 1                  TRA     s:1373

     1881     1360    4               SELECT('X','x');

     1882     1361    4               WISH.X='1'B;

   1361  1 000234   200003 470500                    LDP0    @WISH,,AUTO
         1 000235   003100 060400                    CSL     bolr='003'O
         1 000236   000030 000001 xsym               BDSC    B_VECTNIL+24             by=0,bit=0,n=1
         1 000237   000000 040001                    BDSC    0,,PR0                   by=0,bit=4,n=1
PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:328  
         1 000240   000266 710000 1                  TRA     s:1373

     1883     1362    4               SELECT('T','t');

     1884     1363    4               WISH.T='1'B;

   1363  1 000241   200003 470500                    LDP0    @WISH,,AUTO
         1 000242   003100 060400                    CSL     bolr='003'O
         1 000243   000030 000001 xsym               BDSC    B_VECTNIL+24             by=0,bit=0,n=1
         1 000244   000000 030001                    BDSC    0,,PR0                   by=0,bit=3,n=1
         1 000245   000266 710000 1                  TRA     s:1373

     1885     1364    4               SELECT('R','r');

     1886     1365    4               WISH.R='1'B;

   1365  1 000246   200003 470500                    LDP0    @WISH,,AUTO
         1 000247   003100 060400                    CSL     bolr='003'O
         1 000250   000030 000001 xsym               BDSC    B_VECTNIL+24             by=0,bit=0,n=1
         1 000251   000000 020001                    BDSC    0,,PR0                   by=0,bit=2,n=1
         1 000252   000266 710000 1                  TRA     s:1373

     1887     1366    4               SELECT('P','p');

     1888     1367    4               WISH.P='1'B;

   1367  1 000253   200003 470500                    LDP0    @WISH,,AUTO
         1 000254   003100 060400                    CSL     bolr='003'O
         1 000255   000030 000001 xsym               BDSC    B_VECTNIL+24             by=0,bit=0,n=1
         1 000256   000000 010001                    BDSC    0,,PR0                   by=0,bit=1,n=1
         1 000257   000266 710000 1                  TRA     s:1373

     1889     1368    4               SELECT('B','b');

     1890     1369    4               WISH.B='1'B;

   1369  1 000260   200003 470500                    LDP0    @WISH,,AUTO
PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:329  
         1 000261   003100 060400                    CSL     bolr='003'O
         1 000262   000030 000001 xsym               BDSC    B_VECTNIL+24             by=0,bit=0,n=1
         1 000263   000000 000001                    BDSC    0,,PR0                   by=0,bit=0,n=1
         1 000264   000266 710000 1                  TRA     s:1373

     1891     1370    4               SELECT(ELSE);

     1892     1371    4             ALTRETURN;

   1371  1 000265   000000 702200 xent               TSX2  ! X66_AALT

     1893     1372    4             END;                          /* DO SELECT                          */

     1894     1373    3           END;                            /* DO I=                              */

   1373  1 000266   000001 035007                    ADLA    1,DL
         1 000267   200004 755100                    STA     I,,AUTO
         1 000270   000020 115007                    CMPA    16,DL
         1 000271   000123 602000 1                  TNC     s:1356

     1895     1374    2           END;                            /* DO SELECT                          */

     1896     1375    1           RETURN;

   1375  1 000272   000000 702200 xent               TSX2  ! X66_ARET
     1897     1376    1   END AOC;
     1898     1377        %EOD;

PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:330  
--  Include file information  --

   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure AOC.
PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:331  

 **** Variables and constants ****

  ****  Section 000  Data  AOC

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(261)   r     1 HLP1                      10-0-0/w STRC(279)   r     1 HLP2
    20-0-0/w STRC(270)   r     1 HLP3                      30-0-0/w STRC(189)   r     1 HLP4
    36-0-0/w STRC(288)   r     1 HLP5                      71-0-0/w STRC(324)   r     1 HLP6
    57-0-0/w STRC(333)   r     1 HLP7                      46-0-0/w STRC(297)   r     1 HLP8

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @WISH                      4-0-0/w UBIN        r     1 I
    *0-0-0/b SBIN(6)     r     1 SWISH                     *0-0-0/b STRC(6)     r     1 WISH

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(180)   r     1 ANSBUF


   Procedure AOC requires 187 words for executable code.
   Procedure AOC requires 6 words of local(AUTO) storage.
PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:332  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:333  
          MINI XREF LISTING

ANSBUF.TXT
      1294**DCL      1339>>DOSELCT  1356>>DOSELCT
HLP1
      1296**DCL      1341<>CALL
HLP2
      1301**DCL      1342<>CALL
HLP3
      1306**DCL      1343<>CALL
HLP4
      1311**DCL      1344<>CALL
HLP5
      1316**DCL      1345<>CALL
HLP6
      1331**DCL      1347<>CALL
HLP7
      1326**DCL      1348<>CALL
HLP8
      1321**DCL      1346<>CALL
I
      1336**DCL      1355<<DOINDEX  1356>>DOSELCT
SWISH
      1291**DCL      1351<<ASSIGN
TYPEC
      1335**DCL-ENT  1341--CALL     1342--CALL     1343--CALL     1344--CALL     1345--CALL     1346--CALL
      1347--CALL     1348--CALL
WISH
      1283**DCL         6--PROC     1290--REDEF    1291--REDEF    1338<<ASSIGN   1353<<ASSIGN
WISH.B
      1284**DCL      1369<<ASSIGN
WISH.M
      1289**DCL      1359<<ASSIGN
WISH.P
PL6.E3A0      #004=AOC File=ISI$FIXSYST.:E05TSI                                  TUE 07/29/97 22:50 Page:334  
      1285**DCL      1367<<ASSIGN
WISH.R
      1286**DCL      1365<<ASSIGN
WISH.T
      1287**DCL      1363<<ASSIGN
WISH.X
      1288**DCL      1361<<ASSIGN

PL6.E3A0      #005=IBANGI File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:50 Page:335  
     1899        1        /*T***********************************************************/
     1900        2        /*T*                                                         */
     1901        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1902        4        /*T*                                                         */
     1903        5        /*T***********************************************************/
     1904        6        IBANGI: PROC(BUF,OWN) ALTRET;
     1905        7        /* This program looks for a recognized ! card in BUF */
     1906        8        /* If found -> OWN= appropriate owner configuration */
     1907        9        /* If not found -> ALTRETURN   */
     1908       10        %INCLUDE IS$MACROS;
     1909     1285    1   DCL BUF CHAR(8);
     1910     1286    1   DCL OWN BIT(6) UNAL;
     1911     1287    1   DCL PIDTB(0:6) CHAR(8) STATIC INIT('!MINI','!XDEL','!TIGR',
     1912     1288    1                                 '!RUM','!PLOVER','!BOOTIME','!FIN');
     1913     1289    1   DCL LENS(0:6) SBIN STATIC INIT(4,4,4,3,6,7,3);
     1914     1290    1   DCL BOWN(0:6) BIT(6) STATIC INIT(%WHOMINI,%WHOXDEL,%WHOTIGR,%WHORUM,
     1915     1291    1                                       %WHOPLV,%WHOBTM,%WHOFIN);
     1916     1292    1   DCL I UBIN WORD;
     1917     1293    1   DCL UPPER_CASE ENTRY(2);
     1918     1294        /**/
     1919     1295    1           IF SUBSTR(BUF,1) = '!' THEN
     1920     1296    1             CALL UPPER_CASE(SUBSTR(BUF,1),7);
     1921     1297    2           DO I=0 TO 6;
     1922     1298    2             IF SUBSTR(BUF,0,LENS(I)+2)=PIDTB(I) THEN GOTO BANGFOUND;
     1923     1299                                      /* +2 is for ! before keyword and space after.  */
     1924     1300    2           END;                            /* DO I=                              */
     1925     1301    1           ALTRETURN;
     1926     1302    1   BANGFOUND:
     1927     1303    1           OWN=BOWN(I);
     1928     1304    1           RETURN;
     1929     1305    1   END IBANGI;
     1930     1306        %EOD;

PL6.E3A0      #005=IBANGI File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:50 Page:336  
--  Include file information  --

   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure IBANGI.

   Procedure IBANGI requires 40 words for executable code.
   Procedure IBANGI requires 8 words of local(AUTO) storage.

PL6.E3A0      #005=IBANGI File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:50 Page:337  

 Object Unit name= IBANGI                                     File name= ISI$FIXSYST.:E05TOU
 UTS= JUL 29 '97 22:50:54.64 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none    23     27  IBANGI
    1   Proc  even  none    40     50  IBANGI
    2  RoData even  none     2      2  IBANGI

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes    yes     yes      Std        2  IBANGI

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       2 UPPER_CASE
                       nStd      0 X66_AUTO_2
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     B_VECTNIL
PL6.E3A0      #005=IBANGI File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:50 Page:338  

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #005=IBANGI File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:50 Page:339  


     1899        1        /*T***********************************************************/
     1900        2        /*T*                                                         */
     1901        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1902        4        /*T*                                                         */
     1903        5        /*T***********************************************************/
     1904        6        IBANGI: PROC(BUF,OWN) ALTRET;

      6  1 000000   000000 700200 xent  IBANGI       TSX0  ! X66_AUTO_2
         1 000001   000010 000002                    ZERO    8,2

     1905        7        /* This program looks for a recognized ! card in BUF */
     1906        8        /* If found -> OWN= appropriate owner configuration */
     1907        9        /* If not found -> ALTRETURN   */
     1908       10        %INCLUDE IS$MACROS;
     1909     1285    1   DCL BUF CHAR(8);
     1910     1286    1   DCL OWN BIT(6) UNAL;
     1911     1287    1   DCL PIDTB(0:6) CHAR(8) STATIC INIT('!MINI','!XDEL','!TIGR',
     1912     1288    1                                 '!RUM','!PLOVER','!BOOTIME','!FIN');
     1913     1289    1   DCL LENS(0:6) SBIN STATIC INIT(4,4,4,3,6,7,3);
     1914     1290    1   DCL BOWN(0:6) BIT(6) STATIC INIT(%WHOMINI,%WHOXDEL,%WHOTIGR,%WHORUM,
     1915     1291    1                                       %WHOPLV,%WHOBTM,%WHOFIN);
     1916     1292    1   DCL I UBIN WORD;
     1917     1293    1   DCL UPPER_CASE ENTRY(2);
     1918     1294        /**/
     1919     1295    1           IF SUBSTR(BUF,1) = '!' THEN

   1295  1 000002   200003 470500                    LDP0    @BUF,,AUTO
         1 000003   040000 106500                    CMPC    fill='040'O
         1 000004   000000 200007                    ADSC9   0,,PR0                   cn=1,n=7
         1 000005   000000 000001 2                  ADSC9   0                        cn=0,n=1
         1 000006   000020 601000 1                  TNZ     s:1297

     1920     1296    1             CALL UPPER_CASE(SUBSTR(BUF,1),7);

   1296  1 000007   000001 236000 2                  LDQ     1
         1 000010   200007 756100                    STQ     I+2,,AUTO
PL6.E3A0      #005=IBANGI File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:50 Page:340  
         1 000011   200003 236100                    LDQ     @BUF,,AUTO
         1 000012   200000 036007                    ADLQ    65536,DL
         1 000013   200006 756100                    STQ     I+1,,AUTO
         1 000014   200006 630500                    EPPR0   I+1,,AUTO
         1 000015   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000016   000000 701000 xent               TSX1    UPPER_CASE
         1 000017   000000 011000                    NOP     0

     1921     1297    2           DO I=0 TO 6;

   1297  1 000020   200005 450100                    STZ     I,,AUTO

     1922     1298    2             IF SUBSTR(BUF,0,LENS(I)+2)=PIDTB(I) THEN GOTO BANGFOUND;

   1298  1 000021   200005 720100                    LXL0    I,,AUTO
         1 000022   000016 721010 0                  LXL1    LENS,X0
         1 000023   000002 622011                    EAX2    2,X1
         1 000024   200005 235100                    LDA     I,,AUTO
         1 000025   000003 735000                    ALS     3
         1 000026   200003 470500                    LDP0    @BUF,,AUTO
         1 000027   040005 106540                    CMPC    fill='040'O
         1 000030   000000 000012                    ADSC9   0,,PR0                   cn=0,n=*X2
         1 000031   000000 000010 0                  ADSC9   PIDTB,A                  cn=0,n=8
         1 000032   000041 600000 1                  TZE     BANGFOUND

     1923     1299                                      /* +2 is for ! before keyword and space after.  */
     1924     1300    2           END;                            /* DO I=                              */

   1300  1 000033   200005 236100                    LDQ     I,,AUTO
         1 000034   000001 036007                    ADLQ    1,DL
         1 000035   200005 756100                    STQ     I,,AUTO
         1 000036   000007 116007                    CMPQ    7,DL
         1 000037   000021 602000 1                  TNC     s:1298

     1925     1301    1           ALTRETURN;

   1301  1 000040   000000 702200 xent               TSX2  ! X66_AALT
PL6.E3A0      #005=IBANGI File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:50 Page:341  

     1926     1302    1   BANGFOUND:
     1927     1303    1           OWN=BOWN(I);

   1303  1 000041   200005 236100       BANGFOUND    LDQ     I,,AUTO
         1 000042   000006 402007                    MPY     6,DL
         1 000043   200004 471500                    LDP1    @OWN,,AUTO
         1 000044   003100 060406                    CSL     bolr='003'O
         1 000045   000025 000006 0                  BDSC    BOWN,Q                   by=0,bit=0,n=6
         1 000046   100000 000006                    BDSC    0,,PR1                   by=0,bit=0,n=6

     1928     1304    1           RETURN;

   1304  1 000047   000000 702200 xent               TSX2  ! X66_ARET
     1929     1305    1   END IBANGI;
     1930     1306        %EOD;

PL6.E3A0      #005=IBANGI File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:50 Page:342  
--  Include file information  --

   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure IBANGI.
PL6.E3A0      #005=IBANGI File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:50 Page:343  

 **** Variables and constants ****

  ****  Section 000  Data  IBANGI

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    25-0-0/b BIT (6)     r     1 BOWN(0:6)                 16-0-0/w SBIN        r     1 LENS(0:6)
     0-0-0/c CHAR(8)     r     1 PIDTB(0:6)

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @BUF                       4-0-0/w PTR         r     1 @OWN
    *0-0-0/c CHAR(8)     r     1 BUF                        5-0-0/w UBIN        r     1 I
    *0-0-0/b BIT (6)     r     1 OWN


   Procedure IBANGI requires 40 words for executable code.
   Procedure IBANGI requires 8 words of local(AUTO) storage.
PL6.E3A0      #005=IBANGI File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:50 Page:344  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #005=IBANGI File=ISI$FIXSYST.:E05TSI                               TUE 07/29/97 22:50 Page:345  
          MINI XREF LISTING

BANGFOUND
      1303**LABEL    1298--GOTO
BOWN
      1290**DCL      1303>>ASSIGN
BUF
      1285**DCL         6--PROC     1295>>IF       1296<>CALL     1298>>IF
I
      1292**DCL      1297<<DOINDEX  1298>>IF       1298>>IF       1303>>ASSIGN
LENS
      1289**DCL      1298>>IF
OWN
      1286**DCL         6--PROC     1303<<ASSIGN
PIDTB
      1287**DCL      1298>>IF
UPPER_CASE
      1293**DCL-ENT  1296--CALL

PL6.E3A0      #006=WRITE_PATCH File=ISI$FIXSYST.:E05TSI                          TUE 07/29/97 22:50 Page:346  
     1931        1        /*T***********************************************************/
     1932        2        /*T*                                                         */
     1933        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1934        4        /*T*                                                         */
     1935        5        /*T***********************************************************/
     1936        6        WRITE_PATCH:PROC(US_PTCH$,US_PTCH_LGTH);
     1937        7        /* Writes a patch in the patch file */
     1938        8        %INCLUDE IS$MACROS;
     1939     1283        %DISKDIR(NAME=ADIR,STCLASS="SYMREF");   /* System directory                   */
     1940     1539    1   DCL SYS_DPX UBIN WORD SYMREF;
     1941     1540    1   DCL US_PTCH$ PTR;                       /* Pointer to the user's patch        */
     1942     1541    1   DCL US_PTCH_LGTH UBIN WORD;             /* User's patch length (in bytes)     */
     1943     1542    1   DCL US_PTCH CHAR(US_PTCH_LGTH) BASED(US_PTCH$);
     1944     1543    1   DCL CP6UL(0:1023) CHAR(4) SYMREF;
     1945     1544    1   DCL 1 PTCHBF REDEF CP6UL,               /* Patch buffer                       */
     1946     1545    1         2 NXTWA UBIN WORD,                /* Rel word address of the next patch */
     1947     1546    1         2 PTCHS(0:1022) BIT(36);
     1948     1547    1   DCL RPB_FLAG BIT(1) SYMREF;
     1949     1548    1   DCL WPATSZ UBIN WORD;
     1950     1549    1   DCL BUFPTCH$ PTR;
     1951     1550    1   DCL BUFPATCH CHAR(WPATSZ) BASED(BUFPTCH$);
     1952     1551    1   DCL WPTCH$ PTR STATIC INIT(ADDR(CP6UL));
     1953     1552        %DCW_STRUCT(NAME=PTCHDCW,STCLASS="REDEF WPTCH$");
     1954     1570        %TEXTC(N#=PATERM,M#="' Can''t write patch file...Reboot required. '");
     1955     1575        %TEXTC(N#=NOSPACE,M#="' Not enough disk patch space. '");
     1956     1580    1   DCL TYPEC ENTRY(1);
     1957     1581    1   DCL GIVEUP ENTRY;
     1958     1582    1   DCL MINIQC_PL6 ENTRY(5) ALTRET;
     1959     1583        /**/
     1960     1584    1           IF ADIR.PATCH.SIZE>%PATCH_GRS THEN RETURN; /* Disk patch space exceeded */
     1961     1585    1           IF PTCHBF.NXTWA=0 THEN PTCHBF.NXTWA=1; /* Start a new buffer          */
     1962     1586    1             ELSE;
     1963     1587    1           IF RPB_FLAG THEN WPATSZ=%SHORTPATCH;
     1964     1588    1             ELSE WPATSZ=%LONGPATCH;
     1965     1589    1           BUFPTCH$=PINCRW(ADDR(CP6UL),PTCHBF.NXTWA);
     1966     1590    1           BUFPATCH=US_PTCH;               /* Move patch in buffer               */
     1967     1591    1           PTCHBF.NXTWA=PTCHBF.NXTWA+WPATSZ/4;
PL6.E3A0      #006=WRITE_PATCH File=ISI$FIXSYST.:E05TSI                          TUE 07/29/97 22:50 Page:347  
     1968     1592        /* See if we have room for another patch */
     1969     1593    1           IF PTCHBF.NXTWA+WPATSZ/4<=1024 THEN RETURN; /* Yes                    */
     1970     1594    1             ELSE;                         /* No, write then clear buffer        */
     1971     1595    2           IF ADIR.PATCH.DA~=0 THEN DO;
     1972     1596        /* Starting addr#0, can write */
     1973     1597    2                 PTCHDCW.TALLY=1024;
     1974     1598    2                 CALL MINIQC_PL6(SYS_DPX,ADDR(PTCHDCW),,%FCNWDB,ADIR.PATCH.DA+ADIR.
              1598                          PATCH.SIZE) ALTRET(ER_WPATCH1);
     1975     1599    2                 ADIR.PATCH.SIZE=ADIR.PATCH.SIZE+1; /* Bump size                 */
     1976     1600    2                 IF ADIR.PATCH.SIZE>%PATCH_GRS THEN
     1977     1601    2                   CALL TYPEC(NOSPACE);
     1978     1602    2               END;                        /* THEN                               */
     1979     1603    1             ELSE;
     1980     1604    1           PTCHBF='0'B;                    /* Clear buffer                       */
     1981     1605    1           RETURN;
     1982     1606    1   ER_WPATCH:ENTRY;
     1983     1607    1   ER_WPATCH1:
     1984     1608    1           CALL TYPEC(PATERM);
     1985     1609    1           CALL GIVEUP;
     1986     1610    1   END WRITE_PATCH;
     1987     1611        %EOD;

PL6.E3A0      #006=WRITE_PATCH File=ISI$FIXSYST.:E05TSI                          TUE 07/29/97 22:50 Page:348  
--  Include file information  --

   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure WRITE_PATCH.

   Procedure WRITE_PATCH requires 87 words for executable code.
   Procedure WRITE_PATCH requires 16 words of local(AUTO) storage.

PL6.E3A0      #006=WRITE_PATCH File=ISI$FIXSYST.:E05TSI                          TUE 07/29/97 22:50 Page:349  

 Object Unit name= WRITE_PATCH                                File name= ISI$FIXSYST.:E05TOU
 UTS= JUL 29 '97 22:50:57.44 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none    22     26  WRITE_PATCH
    1   Proc  even  none    87    127  WRITE_PATCH
    2  RoData even  none     5      5  WRITE_PATCH

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes            yes      Std        2  WRITE_PATCH
     1    115                  yes      Std        0  ER_WPATCH

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      1  PATERM                             0     15  NOSPACE

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       5 MINIQC_PL6
         yes           Std       1 TYPEC
         yes           Std       0 GIVEUP
                       nStd      0 X66_AUTO_2
                       nStd      0 X66_ARET
                       Std       0 B_CONSPOOL_D
PL6.E3A0      #006=WRITE_PATCH File=ISI$FIXSYST.:E05TSI                          TUE 07/29/97 22:50 Page:350  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ADIR                                  SYS_DPX                               CP6UL
     RPB_FLAG                              B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #006=WRITE_PATCH File=ISI$FIXSYST.:E05TSI                          TUE 07/29/97 22:50 Page:351  


     1931        1        /*T***********************************************************/
     1932        2        /*T*                                                         */
     1933        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1934        4        /*T*                                                         */
     1935        5        /*T***********************************************************/
     1936        6        WRITE_PATCH:PROC(US_PTCH$,US_PTCH_LGTH);

      6  1 000000   000000 700200 xent  WRITE_PATCH  TSX0  ! X66_AUTO_2
         1 000001   000020 000002                    ZERO    16,2

     1937        7        /* Writes a patch in the patch file */
     1938        8        %INCLUDE IS$MACROS;
     1939     1283        %DISKDIR(NAME=ADIR,STCLASS="SYMREF");   /* System directory                   */
     1940     1539    1   DCL SYS_DPX UBIN WORD SYMREF;
     1941     1540    1   DCL US_PTCH$ PTR;                       /* Pointer to the user's patch        */
     1942     1541    1   DCL US_PTCH_LGTH UBIN WORD;             /* User's patch length (in bytes)     */
     1943     1542    1   DCL US_PTCH CHAR(US_PTCH_LGTH) BASED(US_PTCH$);
     1944     1543    1   DCL CP6UL(0:1023) CHAR(4) SYMREF;
     1945     1544    1   DCL 1 PTCHBF REDEF CP6UL,               /* Patch buffer                       */
     1946     1545    1         2 NXTWA UBIN WORD,                /* Rel word address of the next patch */
     1947     1546    1         2 PTCHS(0:1022) BIT(36);
     1948     1547    1   DCL RPB_FLAG BIT(1) SYMREF;
     1949     1548    1   DCL WPATSZ UBIN WORD;
     1950     1549    1   DCL BUFPTCH$ PTR;
     1951     1550    1   DCL BUFPATCH CHAR(WPATSZ) BASED(BUFPTCH$);
     1952     1551    1   DCL WPTCH$ PTR STATIC INIT(ADDR(CP6UL));
     1953     1552        %DCW_STRUCT(NAME=PTCHDCW,STCLASS="REDEF WPTCH$");
     1954     1570        %TEXTC(N#=PATERM,M#="' Can''t write patch file...Reboot required. '");
     1955     1575        %TEXTC(N#=NOSPACE,M#="' Not enough disk patch space. '");
     1956     1580    1   DCL TYPEC ENTRY(1);
     1957     1581    1   DCL GIVEUP ENTRY;
     1958     1582    1   DCL MINIQC_PL6 ENTRY(5) ALTRET;
     1959     1583        /**/
     1960     1584    1           IF ADIR.PATCH.SIZE>%PATCH_GRS THEN RETURN; /* Disk patch space exceeded */

   1584  1 000002   000176 235000 xsym               LDA     ADIR+126
PL6.E3A0      #006=WRITE_PATCH File=ISI$FIXSYST.:E05TSI                          TUE 07/29/97 22:50 Page:352  
         1 000003   002261 115007                    CMPA    1201,DL
         1 000004   000006 602000 1                  TNC     s:1585

   1584  1 000005   000000 702200 xent               TSX2  ! X66_ARET

     1961     1585    1           IF PTCHBF.NXTWA=0 THEN PTCHBF.NXTWA=1; /* Start a new buffer          */

   1585  1 000006   000000 236000 xsym               LDQ     CP6UL
         1 000007   000012 601000 1                  TNZ     s:1587

   1585  1 000010   000001 235007                    LDA     1,DL
         1 000011   000000 755000 xsym               STA     CP6UL

     1962     1586    1             ELSE;
     1963     1587    1           IF RPB_FLAG THEN WPATSZ=%SHORTPATCH;

   1587  1 000012   000000 234000 xsym               SZN     RPB_FLAG
         1 000013   000017 605000 1                  TPL     s:1588

   1587  1 000014   000120 235007                    LDA     80,DL
         1 000015   200005 755100                    STA     WPATSZ,,AUTO
         1 000016   000021 710000 1                  TRA     s:1589

     1964     1588    1             ELSE WPATSZ=%LONGPATCH;

   1588  1 000017   000310 235007                    LDA     200,DL
         1 000020   200005 755100                    STA     WPATSZ,,AUTO

     1965     1589    1           BUFPTCH$=PINCRW(ADDR(CP6UL),PTCHBF.NXTWA);

   1589  1 000021   000000 720000 xsym               LXL0    CP6UL
         1 000022   000000 630410 xsym               EPPR0   CP6UL,X0
         1 000023   200006 450500                    STP0    BUFPTCH$,,AUTO

     1966     1590    1           BUFPATCH=US_PTCH;               /* Move patch in buffer               */

   1590  1 000024   200003 471500                    LDP1    @US_PTCH$,,AUTO
PL6.E3A0      #006=WRITE_PATCH File=ISI$FIXSYST.:E05TSI                          TUE 07/29/97 22:50 Page:353  
         1 000025   100000 473500                    LDP3    0,,PR1
         1 000026   200004 474500                    LDP4    @US_PTCH_LGTH,,AUTO
         1 000027   400000 721100                    LXL1    0,,PR4
         1 000030   000000 622005                    EAX2    0,AL
         1 000031   040140 100540                    MLR     fill='040'O
         1 000032   300000 000011                    ADSC9   0,,PR3                   cn=0,n=*X1
         1 000033   000000 000012                    ADSC9   0,,PR0                   cn=0,n=*X2

     1967     1591    1           PTCHBF.NXTWA=PTCHBF.NXTWA+WPATSZ/4;

   1591  1 000034   200005 236100                    LDQ     WPATSZ,,AUTO
         1 000035   000002 772000                    QRL     2
         1 000036   000000 036000 xsym               ADLQ    CP6UL
         1 000037   000000 756000 xsym               STQ     CP6UL

     1968     1592        /* See if we have room for another patch */
     1969     1593    1           IF PTCHBF.NXTWA+WPATSZ/4<=1024 THEN RETURN; /* Yes                    */

   1593  1 000040   200005 236100                    LDQ     WPATSZ,,AUTO
         1 000041   000002 772000                    QRL     2
         1 000042   000000 036000 xsym               ADLQ    CP6UL
         1 000043   002001 116007                    CMPQ    1025,DL
         1 000044   000046 603000 1                  TRC     s:1595

   1593  1 000045   000000 702200 xent               TSX2  ! X66_ARET

     1970     1594    1             ELSE;                         /* No, write then clear buffer        */
     1971     1595    2           IF ADIR.PATCH.DA~=0 THEN DO;

   1595  1 000046   000175 235000 xsym               LDA     ADIR+125
         1 000047   000110 600000 1                  TZE     s:1604

     1972     1596        /* Starting addr#0, can write */
     1973     1597    2                 PTCHDCW.TALLY=1024;

   1597  1 000050   002000 236007                    LDQ     1024,DL
         1 000051   000000 752003 0                  STCQ    WPTCH$,'03'O
PL6.E3A0      #006=WRITE_PATCH File=ISI$FIXSYST.:E05TSI                          TUE 07/29/97 22:50 Page:354  

     1974     1598    2                 CALL MINIQC_PL6(SYS_DPX,ADDR(PTCHDCW),,%FCNWDB,ADIR.PATCH.DA+ADIR.
              1598                          PATCH.SIZE) ALTRET(ER_WPATCH1);

   1598  1 000052   000175 236000 xsym               LDQ     ADIR+125
         1 000053   000176 036000 xsym               ADLQ    ADIR+126
         1 000054   200011 756100                    STQ     BUFPTCH$+3,,AUTO
         1 000055   000000 236000 2                  LDQ     0
         1 000056   200010 756100                    STQ     BUFPTCH$+2,,AUTO
         1 000057   200011 235100                    LDA     BUFPTCH$+3,,AUTO
         1 000060   200012 755100                    STA     BUFPTCH$+4,,AUTO
         1 000061   200012 633500                    EPPR3   BUFPTCH$+4,,AUTO
         1 000062   200017 453500                    STP3    BUFPTCH$+9,,AUTO
         1 000063   000001 236000 2                  LDQ     1
         1 000064   200016 756100                    STQ     BUFPTCH$+8,,AUTO
         1 000065   000001 236000 xsym               LDQ     B_VECTNIL+1
         1 000066   200015 756100                    STQ     BUFPTCH$+7,,AUTO
         1 000067   200010 635500                    EPPR5   BUFPTCH$+2,,AUTO
         1 000070   200014 455500                    STP5    BUFPTCH$+6,,AUTO
         1 000071   000002 236000 2                  LDQ     2
         1 000072   200013 756100                    STQ     BUFPTCH$+5,,AUTO
         1 000073   200013 630500                    EPPR0   BUFPTCH$+5,,AUTO
         1 000074   000023 631400 xsym               EPPR1   B_VECTNIL+19
         1 000075   000000 701000 xent               TSX1    MINIQC_PL6
         1 000076   000117 702000 1                  TSX2    ER_WPATCH1

     1975     1599    2                 ADIR.PATCH.SIZE=ADIR.PATCH.SIZE+1; /* Bump size                 */

   1599  1 000077   000176 235000 xsym               LDA     ADIR+126
         1 000100   000001 035007                    ADLA    1,DL
         1 000101   000176 755000 xsym               STA     ADIR+126

     1976     1600    2                 IF ADIR.PATCH.SIZE>%PATCH_GRS THEN

   1600  1 000102   002261 115007                    CMPA    1201,DL
         1 000103   000110 602000 1                  TNC     s:1604

PL6.E3A0      #006=WRITE_PATCH File=ISI$FIXSYST.:E05TSI                          TUE 07/29/97 22:50 Page:355  
     1977     1601    2                   CALL TYPEC(NOSPACE);

   1601  1 000104   000003 630400 2                  EPPR0   3
         1 000105   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000106   000000 701000 xent               TSX1    TYPEC
         1 000107   000000 011000                    NOP     0

     1978     1602    2               END;                        /* THEN                               */

     1979     1603    1             ELSE;
     1980     1604    1           PTCHBF='0'B;                    /* Clear buffer                       */

   1604  1 000110   010000 220003                    LDX0    4096,DU
         1 000111   000040 100400                    MLR     fill='000'O
         1 000112   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         1 000113   000000 000010 xsym               ADSC9   CP6UL                    cn=0,n=*X0

     1981     1605    1           RETURN;

   1605  1 000114   000000 702200 xent               TSX2  ! X66_ARET

     1982     1606    1   ER_WPATCH:ENTRY;

   1606  1 000115   000000 700200 xent  ER_WPATCH    TSX0  ! X66_AUTO_2
         1 000116   000020 000002                    ZERO    16,2

     1983     1607    1   ER_WPATCH1:
     1984     1608    1           CALL TYPEC(PATERM);

   1608  1 000117   000004 630400 2     ER_WPATCH1   EPPR0   4
         1 000120   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000121   000000 701000 xent               TSX1    TYPEC
         1 000122   000000 011000                    NOP     0

     1985     1609    1           CALL GIVEUP;

   1609  1 000123   000002 631400 xsym               EPPR1   B_VECTNIL+2
PL6.E3A0      #006=WRITE_PATCH File=ISI$FIXSYST.:E05TSI                          TUE 07/29/97 22:50 Page:356  
         1 000124   000000 701000 xent               TSX1    GIVEUP
         1 000125   000000 011000                    NOP     0

     1986     1610    1   END WRITE_PATCH;

   1610  1 000126   000000 702200 xent               TSX2  ! X66_ARET
     1987     1611        %EOD;

PL6.E3A0      #006=WRITE_PATCH File=ISI$FIXSYST.:E05TSI                          TUE 07/29/97 22:50 Page:357  
--  Include file information  --

   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure WRITE_PATCH.
PL6.E3A0      #006=WRITE_PATCH File=ISI$FIXSYST.:E05TSI                          TUE 07/29/97 22:50 Page:358  

 **** Variables and constants ****

  ****  Section 000  Data  WRITE_PATCH

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    15-0-0/w STRC(306)   r     1 NOSPACE                    1-0-0/w STRC(423)   r     1 PATERM
     0-0-0/w STRC        r     1 PTCHDCW                    0-0-0/w PTR         r     1 WPTCH$

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @US_PTCH$                  4-0-0/w PTR         r     1 @US_PTCH_LGTH
     6-0-0/w PTR         r     1 BUFPTCH$                  *0-0-0/w PTR         r     1 US_PTCH$
    *0-0-0/w UBIN        r     1 US_PTCH_LGTH               5-0-0/w UBIN        r     1 WPATSZ

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(8640)  r     1 ADIR                       0-0-0/w CHAR(4)     r     1 CP6UL(0:1023)
     0-0-0/w STRC(36864) r     1 PTCHBF                     0-0-0/b BIT         r     1 RPB_FLAG
     0-0-0/w UBIN        r     1 SYS_DPX

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c ACHR        r     1 BUFPATCH                   0-0-0/c ACHR        r     1 US_PTCH

PL6.E3A0      #006=WRITE_PATCH File=ISI$FIXSYST.:E05TSI                          TUE 07/29/97 22:50 Page:359  

   Procedure WRITE_PATCH requires 87 words for executable code.
   Procedure WRITE_PATCH requires 16 words of local(AUTO) storage.
PL6.E3A0      #006=WRITE_PATCH File=ISI$FIXSYST.:E05TSI                          TUE 07/29/97 22:50 Page:360  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #006=WRITE_PATCH File=ISI$FIXSYST.:E05TSI                          TUE 07/29/97 22:50 Page:361  
          MINI XREF LISTING

ADIR.FW.ADIR
      1536**DCL      1537--REDEF
ADIR.MONID.M
      1496**DCL      1499--REDEF
ADIR.PATCH.DA
      1482**DCL      1595>>IF       1598>>CALL
ADIR.PATCH.SIZE
      1483**DCL      1584>>IF       1598>>CALL     1599<<ASSIGN   1599>>ASSIGN   1600>>IF
BUFPATCH
      1550**DCL      1590<<ASSIGN
BUFPTCH$
      1549**DCL      1550--IMP-PTR  1589<<ASSIGN   1590>>ASSIGN
CP6UL
      1543**DCL      1544--REDEF    1551--DCLINIT  1589--ASSIGN
ER_WPATCH1
      1608**LABEL    1598--CALLALT
GIVEUP
      1581**DCL-ENT  1609--CALL
MINIQC_PL6
      1582**DCL-ENT  1598--CALL
NOSPACE
      1576**DCL      1601<>CALL
PATERM
      1571**DCL      1608<>CALL
PTCHBF
      1544**DCL      1604<<ASSIGN
PTCHBF.NXTWA
      1545**DCL      1585>>IF       1585<<ASSIGN   1589>>ASSIGN   1591<<ASSIGN   1591>>ASSIGN   1593>>IF
PTCHDCW
      1562**DCL      1598--CALL
PTCHDCW.TALLY
      1567**DCL      1597<<ASSIGN
PL6.E3A0      #006=WRITE_PATCH File=ISI$FIXSYST.:E05TSI                          TUE 07/29/97 22:50 Page:362  
RPB_FLAG
      1547**DCL      1587>>IF
SYS_DPX
      1539**DCL      1598<>CALL
TYPEC
      1580**DCL-ENT  1601--CALL     1608--CALL
US_PTCH
      1542**DCL      1590>>ASSIGN
US_PTCH$
      1540**DCL         6--PROC     1542--IMP-PTR  1590>>ASSIGN
US_PTCH_LGTH
      1541**DCL         6--PROC     1542--IMP-SIZ  1590>>ASSIGN
WPATSZ
      1548**DCL      1550--IMP-SIZ  1587<<ASSIGN   1588<<ASSIGN   1590>>ASSIGN   1591>>ASSIGN   1593>>IF
WPTCH$
      1551**DCL      1562--REDEF

PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:363  
     1988        1        /*T***********************************************************/
     1989        2        /*T*                                                         */
     1990        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1991        4        /*T*                                                         */
     1992        5        /*T***********************************************************/
     1993        6        READ_PATCH:PROC(WHO,PTCH$,PTCH_LGTH) ALTRET;
     1994        7        /* This program reads patches from a patch device */
     1995        8        %INCLUDE IS$MACROS;
     1996     1283    1   DCL WHO BIT(6) UNAL;                    /* identifies the caller              */
     1997     1284    1   DCL UWHO REDEF WHO UBIN(6) UNAL;
     1998     1285    1   DCL MTWISH BIT(6) SYMREF;
     1999     1286    1   DCL MTOWN BIT(6) STATIC INIT('0'B);
     2000     1287    1   DCL UMTOWN REDEF MTOWN UBIN(6) UNAL;    /* Owner of tape patches              */
     2001     1288    1   DCL MT2WISH BIT(6) SYMREF;
     2002     1289    1   DCL MT2OWN BIT(6) STATIC INIT('0'B);
     2003     1290    1   DCL UMT2OWN REDEF MT2OWN UBIN(6) UNAL;
     2004     1291    1   DCL CRWISH BIT(6) SYMREF;
     2005     1292    1   DCL CROWN BIT(6) STATIC INIT('0'B);
     2006     1293    1   DCL UCROWN REDEF CROWN UBIN(6) UNAL;    /* Owner of card patches              */
     2007     1294    1   DCL OCWISH BIT(6) SYMREF;
     2008     1295    1   DCL OCOWN BIT(6) STATIC INIT('0'B);
     2009     1296    1   DCL UOCOWN REDEF OCOWN UBIN(6) UNAL;    /* Owner of cons patches              */
     2010     1297    1   DCL PO_INDX UBIN WORD SYMREF;
     2011     1298    1   DCL PAT2_INDX UBIN WORD SYMREF;
     2012     1299    1   DCL PTCH$ PTR;
     2013     1300    1   DCL PTCH_LGTH UBIN WORD;
     2014     1301    1   DCL PTCH CHAR(80) BASED(PTCH$);
     2015     1302    1   DCL POBUF CHAR(80) SYMREF;
     2016     1303        /**/
     2017     1304    1   DCL IBANGI ENTRY(2) ALTRET;
     2018     1305    1   DCL MINIQ_PL6 ENTRY(5) ALTRET;
     2019     1306    1   DCL DORPB ENTRY ALTRET;
     2020     1307    1   DCL ESADERR REMEMBER SYMREF;
     2021     1308        /**/
     2022     1309    1   RPD:
     2023     1310        /* Try tape patches */
     2024     1311    2           IF(WHO&MTWISH)~='0'B THEN DO;   /* The caller wants tape patches      */
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:364  
     2025     1312    3                 IF WHO=MTOWN THEN DO; /* and he is the owner of tape patches    */
     2026     1313    3   RPDT:                                   /* Read tape patch                    */
     2027     1314    3                       CALL MINIQ_PL6(PO_INDX,PTCH$,PTCH_LGTH,%FCNRT9) ALTRET(ER_RPATCH
              1314                                );
     2028     1315    4                       CALL IBANGI(PTCH,MTOWN) WHENRETURN DO;
     2029     1316    4                             GOTO RPD;
     2030     1317    4                           END;            /* WHENRETURN                         */
     2031     1318    3                       RETURN;
     2032     1319    3                     END;                  /* THEN                               */
     2033     1320    2                   ELSE;
     2034     1321    2                 IF UWHO<UMTOWN THEN;
              1321                          /* Tape patch owner is a later one, try card patches */
     2035     1322    3                   ELSE DO;                /* Skip tape                          */
     2036     1323    3                       CALL MINIQ_PL6(PO_INDX,ADDR(POBUF),80,%FCNRT9);
     2037     1324    4                       CALL IBANGI(POBUF,MTOWN) WHENRETURN DO;
     2038     1325    4                             POBUF='R ME';
     2039     1326    4                           END;            /* WHENRETURN                         */
     2040     1327    3                       GOTO RPD;
     2041     1328    3                     END;                  /* ELSE*/
     2042     1329    2               END;                        /* THEN                               */
     2043     1330    1             ELSE;
     2044     1331    1   RPD0:
     2045     1332        /* Try tape2 patches */
     2046     1333    2           IF(WHO&MT2WISH)~='0'B THEN DO;  /* The caller wants tape2 patches     */
     2047     1334    3                 IF WHO=MT2OWN THEN DO; /* and he is the owner of tape2 patches  */
     2048     1335    3   RPDT2:                                  /* Read tape2 patch                   */
     2049     1336    3                       CALL MINIQ_PL6(PAT2_INDX,PTCH$,PTCH_LGTH,%FCNRT9) ALTRET(
              1336                                ER_RPATCH);
     2050     1337    4                       CALL IBANGI(PTCH,MT2OWN) WHENRETURN DO;
     2051     1338    4                             GOTO RPD0;
     2052     1339    4                           END;            /* WHENRETURN                         */
     2053     1340    3                       RETURN;
     2054     1341    3                     END;                  /* THEN                               */
     2055     1342    2                   ELSE;
     2056     1343    2                 IF UWHO<UMT2OWN THEN;
              1343                          /* Tape2 patch owner is a later one, try card patches */
     2057     1344    3                   ELSE DO;                /* Skip tape                          */
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:365  
     2058     1345    3                       CALL MINIQ_PL6(PAT2_INDX,ADDR(POBUF),80,%FCNRT9);
     2059     1346    4                       CALL IBANGI(POBUF,MT2OWN) WHENRETURN DO;
     2060     1347    4                             POBUF='R ME';
     2061     1348    4                           END;            /* WHENRETURN                         */
     2062     1349    3                       GOTO RPD0;
     2063     1350    3                     END;                  /* ELSE*/
     2064     1351    2               END;                        /* THEN                               */
     2065     1352    1             ELSE;
     2066     1353    1   RPD1:
     2067     1354        /* Try card patches */
     2068     1355    2           IF(WHO&CRWISH)~='0'B THEN DO;   /* The caller wants card patches      */
     2069     1356    3                 IF WHO=CROWN THEN DO; /* and he is the owner of card patches    */
     2070     1357    3   RPDC:                                   /* Read card patch                    */
     2071     1358    3                       CALL MINIQ_PL6(%FRSTCR,PTCH$,PTCH_LGTH,%FCNRCRA) ALTRET(
              1358                                ER_RPATCH);
     2072     1359    4                       CALL IBANGI(PTCH,CROWN) WHENRETURN DO;
     2073     1360    4                             GOTO RPD;
     2074     1361    4                           END;            /* WHENRETURN                         */
     2075     1362    3                       RETURN;
     2076     1363    3                     END;                  /* THEN                               */
     2077     1364    2                   ELSE;
     2078     1365    2                 IF UWHO<UCROWN THEN;
              1365                          /* Card patch owner is a later one, try cons patches */
     2079     1366    3                   ELSE DO;                /* Skip card                          */
     2080     1367    3                       CALL MINIQ_PL6(%FRSTCR,ADDR(POBUF),80,%FCNRCRA);
     2081     1368    4                       CALL IBANGI(POBUF,CROWN) WHENRETURN DO;
     2082     1369    4                             POBUF='R ME';
     2083     1370    4                           END;            /* WHENRETURN                         */
     2084     1371    3                       GOTO RPD1;
     2085     1372    3                     END;                  /* ELSE*/
     2086     1373    2               END;                        /* THEN                               */
     2087     1374    1             ELSE;
     2088     1375    1   RPD2:
     2089     1376        /* Try console patches */
     2090     1377    2           IF(WHO&OCWISH)~='0'B THEN DO;   /* The caller wants cons patches      */
     2091     1378    3                 IF WHO=OCOWN THEN DO; /* and he is the owner of cons patches    */
     2092     1379    3   RPDO:                                   /* Read console patch                 */
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:366  
     2093     1380    3                       CALL MINIQ_PL6(0,PTCH$,PTCH_LGTH,%FCNRCA) ALTRET(ER_RPATCH);
     2094     1381    4                       CALL IBANGI(PTCH,OCOWN) WHENRETURN DO;
     2095     1382    4                             GOTO RPD;
     2096     1383    4                           END;            /* WHENRETURN                         */
     2097     1384    3                       RETURN;
     2098     1385    3                     END;                  /* THEN                               */
     2099     1386    2                   ELSE;
     2100     1387    2                 IF UWHO>UOCOWN THEN GOTO RPDO;
     2101     1388    2                   ELSE;
     2102     1389    2               END;                        /* THEN                               */
     2103     1390    1             ELSE;
     2104     1391    1   RPD3:
     2105     1392    2           IF WHO=%WHOTIGR THEN CALL DORPB WHENALTRETURN DO;
     2106     1393    2                   UNWIND TO ESADERR;
     2107     1394    2                 END;                      /* WHENALTRET                         */
     2108     1395    1             ELSE;
     2109     1396        /* Give him an !EOD */
     2110     1397    1           PTCH='!EOD';
     2111     1398    1           RETURN;
     2112     1399    1   ER_RPATCH:
     2113     1400    1           ALTRETURN;
     2114     1401    1   END READ_PATCH;
     2115     1402        %EOD;

PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:367  
--  Include file information  --

   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure READ_PATCH.

   Procedure READ_PATCH requires 253 words for executable code.
   Procedure READ_PATCH requires 12 words of local(AUTO) storage.

PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:368  

 Object Unit name= READ_PATCH                                 File name= ISI$FIXSYST.:E05TOU
 UTS= JUL 29 '97 22:51:03.32 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none     4      4  READ_PATCH
    1  RoData even  UTS      2      2  READ_PATCH
    2   Proc  even  none   253    375  READ_PATCH
    3  RoData even  none    22     26  READ_PATCH

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes    yes     yes      Std        3  READ_PATCH

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       5 MINIQ_PL6
 yes     yes           Std       2 IBANGI
 yes     yes           Std       0 DORPB
                       nStd      0 X66_AUTO_3
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AUNWIND
                       nStd      0 X66_AALT
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:369  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     MTWISH                                MT2WISH                               CRWISH
     OCWISH                                PO_INDX                               PAT2_INDX
     POBUF                                 ESADERR                               B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:370  


     1988        1        /*T***********************************************************/
     1989        2        /*T*                                                         */
     1990        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1991        4        /*T*                                                         */
     1992        5        /*T***********************************************************/
     1993        6        READ_PATCH:PROC(WHO,PTCH$,PTCH_LGTH) ALTRET;

      6  2 000000   000000 700200 xent  READ_PATCH   TSX0  ! X66_AUTO_3
         2 000001   000014 000003                    ZERO    12,3

     1994        7        /* This program reads patches from a patch device */
     1995        8        %INCLUDE IS$MACROS;
     1996     1283    1   DCL WHO BIT(6) UNAL;                    /* identifies the caller              */
     1997     1284    1   DCL UWHO REDEF WHO UBIN(6) UNAL;
     1998     1285    1   DCL MTWISH BIT(6) SYMREF;
     1999     1286    1   DCL MTOWN BIT(6) STATIC INIT('0'B);
     2000     1287    1   DCL UMTOWN REDEF MTOWN UBIN(6) UNAL;    /* Owner of tape patches              */
     2001     1288    1   DCL MT2WISH BIT(6) SYMREF;
     2002     1289    1   DCL MT2OWN BIT(6) STATIC INIT('0'B);
     2003     1290    1   DCL UMT2OWN REDEF MT2OWN UBIN(6) UNAL;
     2004     1291    1   DCL CRWISH BIT(6) SYMREF;
     2005     1292    1   DCL CROWN BIT(6) STATIC INIT('0'B);
     2006     1293    1   DCL UCROWN REDEF CROWN UBIN(6) UNAL;    /* Owner of card patches              */
     2007     1294    1   DCL OCWISH BIT(6) SYMREF;
     2008     1295    1   DCL OCOWN BIT(6) STATIC INIT('0'B);
     2009     1296    1   DCL UOCOWN REDEF OCOWN UBIN(6) UNAL;    /* Owner of cons patches              */
     2010     1297    1   DCL PO_INDX UBIN WORD SYMREF;
     2011     1298    1   DCL PAT2_INDX UBIN WORD SYMREF;
     2012     1299    1   DCL PTCH$ PTR;
     2013     1300    1   DCL PTCH_LGTH UBIN WORD;
     2014     1301    1   DCL PTCH CHAR(80) BASED(PTCH$);
     2015     1302    1   DCL POBUF CHAR(80) SYMREF;
     2016     1303        /**/
     2017     1304    1   DCL IBANGI ENTRY(2) ALTRET;
     2018     1305    1   DCL MINIQ_PL6 ENTRY(5) ALTRET;
     2019     1306    1   DCL DORPB ENTRY ALTRET;
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:371  
     2020     1307    1   DCL ESADERR REMEMBER SYMREF;
     2021     1308        /**/
     2022     1309    1   RPD:
     2023     1310        /* Try tape patches */
     2024     1311    2           IF(WHO&MTWISH)~='0'B THEN DO;   /* The caller wants tape patches      */

   1311  2 000002   000000 236000 xsym  RPD          LDQ     MTWISH
         2 000003   770000 376003                    ANQ     -4096,DU
         2 000004   200006 756100                    STQ     @PTCH_LGTH+1,,AUTO
         2 000005   200003 470500                    LDP0    @WHO,,AUTO
         2 000006   003100 060500                    CSL     bolr='003'O
         2 000007   000000 000006                    BDSC    0,,PR0                   by=0,bit=0,n=6
         2 000010   200007 000044                    BDSC    @PTCH_LGTH+2,,AUTO       by=0,bit=0,n=36
         2 000011   200007 236100                    LDQ     @PTCH_LGTH+2,,AUTO
         2 000012   200006 376100                    ANQ     @PTCH_LGTH+1,,AUTO
         2 000013   000102 600000 2                  TZE     RPD0

     2025     1312    3                 IF WHO=MTOWN THEN DO; /* and he is the owner of tape patches    */

   1312  2 000014   000000 066500                    CMPB    filb='0'B
         2 000015   000000 000006                    BDSC    0,,PR0                   by=0,bit=0,n=6
         2 000016   000000 000006 0                  BDSC    MTOWN                    by=0,bit=0,n=6
         2 000017   000045 601000 2                  TNZ     s:1321

     2026     1313    3   RPDT:                                   /* Read tape patch                    */
     2027     1314    3                      CALL MINIQ_PL6(PO_INDX,PTCH$,PTCH_LGTH,%FCNRT9) ALTRET(ER_RPATCH
              1314                                );

   1314  2 000020   000000 236000 3     RPDT         LDQ     0
         2 000021   200005 235100                    LDA     @PTCH_LGTH,,AUTO
         2 000022   200010 757100                    STAQ    @PTCH_LGTH+3,,AUTO
         2 000023   200004 236100                    LDQ     @PTCH$,,AUTO
         2 000024   000001 235000 3                  LDA     1
         2 000025   200006 757100                    STAQ    @PTCH_LGTH+1,,AUTO
         2 000026   200006 630500                    EPPR0   @PTCH_LGTH+1,,AUTO
         2 000027   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 000030   000000 701000 xent               TSX1    MINIQ_PL6
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:372  
         2 000031   000374 702000 2                  TSX2    ER_RPATCH

     2028     1315    4                       CALL IBANGI(PTCH,MTOWN) WHENRETURN DO;

   1315  2 000032   200004 470500                    LDP0    @PTCH$,,AUTO
         2 000033   000000 471500                    LDP1    0,,PR0
         2 000034   000002 236000 3                  LDQ     2
         2 000035   200007 756100                    STQ     @PTCH_LGTH+2,,AUTO
         2 000036   200006 451500                    STP1    @PTCH_LGTH+1,,AUTO
         2 000037   200006 630500                    EPPR0   @PTCH_LGTH+1,,AUTO
         2 000040   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000041   000000 701000 xent               TSX1    IBANGI
         2 000042   000044 702000 2                  TSX2    s:1318

     2029     1316    4                             GOTO RPD;

   1316  2 000043   000002 710000 2                  TRA     RPD

     2030     1317    4                           END;            /* WHENRETURN                         */
     2031     1318    3                       RETURN;

   1318  2 000044   000000 702200 xent               TSX2  ! X66_ARET

     2032     1319    3                     END;                  /* THEN                               */
     2033     1320    2                   ELSE;
     2034     1321    2                 IF UWHO<UMTOWN THEN;
              1321                          /* Tape patch owner is a later one, try card patches */

   1321  2 000045   000000 236000 0                  LDQ     MTOWN
         2 000046   000036 772000                    QRL     30
         2 000047   200006 756100                    STQ     @PTCH_LGTH+1,,AUTO
         2 000050   003100 061500                    CSR     bolr='003'O
         2 000051   000000 000006                    BDSC    0,,PR0                   by=0,bit=0,n=6
         2 000052   200007 000044                    BDSC    @PTCH_LGTH+2,,AUTO       by=0,bit=0,n=36
         2 000053   200007 236100                    LDQ     @PTCH_LGTH+2,,AUTO
         2 000054   200006 116100                    CMPQ    @PTCH_LGTH+1,,AUTO
         2 000055   000102 604000 2                  TMI     RPD0
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:373  

     2035     1322    3                   ELSE DO;                /* Skip tape                          */

     2036     1323    3                       CALL MINIQ_PL6(PO_INDX,ADDR(POBUF),80,%FCNRT9);

   1323  2 000056   000003 236000 3                  LDQ     3
         2 000057   200006 756100                    STQ     @PTCH_LGTH+1,,AUTO
         2 000060   000006 237000 3                  LDAQ    6
         2 000061   200012 757100                    STAQ    @PTCH_LGTH+5,,AUTO
         2 000062   200006 631500                    EPPR1   @PTCH_LGTH+1,,AUTO
         2 000063   200011 451500                    STP1    @PTCH_LGTH+4,,AUTO
         2 000064   000001 236000 3                  LDQ     1
         2 000065   200010 756100                    STQ     @PTCH_LGTH+3,,AUTO
         2 000066   200010 630500                    EPPR0   @PTCH_LGTH+3,,AUTO
         2 000067   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 000070   000000 701000 xent               TSX1    MINIQ_PL6
         2 000071   000000 011000                    NOP     0

     2037     1324    4                       CALL IBANGI(POBUF,MTOWN) WHENRETURN DO;

   1324  2 000072   000010 630400 3                  EPPR0   8
         2 000073   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000074   000000 701000 xent               TSX1    IBANGI
         2 000075   000101 702000 2                  TSX2    s:1327

     2038     1325    4                             POBUF='R ME';

   1325  2 000076   040000 100400                    MLR     fill='040'O
         2 000077   000000 000004 1                  ADSC9   0                        cn=0,n=4
         2 000100   000000 000120 xsym               ADSC9   POBUF                    cn=0,n=80

     2039     1326    4                           END;            /* WHENRETURN                         */

     2040     1327    3                       GOTO RPD;

   1327  2 000101   000002 710000 2                  TRA     RPD

PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:374  
     2041     1328    3                     END;                  /* ELSE*/
     2042     1329    2               END;                        /* THEN                               */
     2043     1330    1             ELSE;
     2044     1331    1   RPD0:
     2045     1332        /* Try tape2 patches */
     2046     1333    2           IF(WHO&MT2WISH)~='0'B THEN DO;  /* The caller wants tape2 patches     */

   1333  2 000102   000000 236000 xsym  RPD0         LDQ     MT2WISH
         2 000103   770000 376003                    ANQ     -4096,DU
         2 000104   200006 756100                    STQ     @PTCH_LGTH+1,,AUTO
         2 000105   200003 470500                    LDP0    @WHO,,AUTO
         2 000106   003100 060500                    CSL     bolr='003'O
         2 000107   000000 000006                    BDSC    0,,PR0                   by=0,bit=0,n=6
         2 000110   200007 000044                    BDSC    @PTCH_LGTH+2,,AUTO       by=0,bit=0,n=36
         2 000111   200007 236100                    LDQ     @PTCH_LGTH+2,,AUTO
         2 000112   200006 376100                    ANQ     @PTCH_LGTH+1,,AUTO
         2 000113   000202 600000 2                  TZE     RPD1

     2047     1334    3                 IF WHO=MT2OWN THEN DO; /* and he is the owner of tape2 patches  */

   1334  2 000114   000000 066500                    CMPB    filb='0'B
         2 000115   000000 000006                    BDSC    0,,PR0                   by=0,bit=0,n=6
         2 000116   000001 000006 0                  BDSC    MT2OWN                   by=0,bit=0,n=6
         2 000117   000145 601000 2                  TNZ     s:1343

     2048     1335    3   RPDT2:                                  /* Read tape2 patch                   */
     2049     1336    3                       CALL MINIQ_PL6(PAT2_INDX,PTCH$,PTCH_LGTH,%FCNRT9) ALTRET(
              1336                                ER_RPATCH);

   1336  2 000120   000000 236000 3     RPDT2        LDQ     0
         2 000121   200005 235100                    LDA     @PTCH_LGTH,,AUTO
         2 000122   200010 757100                    STAQ    @PTCH_LGTH+3,,AUTO
         2 000123   200004 236100                    LDQ     @PTCH$,,AUTO
         2 000124   000005 235000 3                  LDA     5
         2 000125   200006 757100                    STAQ    @PTCH_LGTH+1,,AUTO
         2 000126   200006 630500                    EPPR0   @PTCH_LGTH+1,,AUTO
         2 000127   000022 631400 xsym               EPPR1   B_VECTNIL+18
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:375  
         2 000130   000000 701000 xent               TSX1    MINIQ_PL6
         2 000131   000374 702000 2                  TSX2    ER_RPATCH

     2050     1337    4                       CALL IBANGI(PTCH,MT2OWN) WHENRETURN DO;

   1337  2 000132   200004 470500                    LDP0    @PTCH$,,AUTO
         2 000133   000000 471500                    LDP1    0,,PR0
         2 000134   000012 236000 3                  LDQ     10
         2 000135   200007 756100                    STQ     @PTCH_LGTH+2,,AUTO
         2 000136   200006 451500                    STP1    @PTCH_LGTH+1,,AUTO
         2 000137   200006 630500                    EPPR0   @PTCH_LGTH+1,,AUTO
         2 000140   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000141   000000 701000 xent               TSX1    IBANGI
         2 000142   000144 702000 2                  TSX2    s:1340

     2051     1338    4                             GOTO RPD0;

   1338  2 000143   000102 710000 2                  TRA     RPD0

     2052     1339    4                           END;            /* WHENRETURN                         */
     2053     1340    3                       RETURN;

   1340  2 000144   000000 702200 xent               TSX2  ! X66_ARET

     2054     1341    3                     END;                  /* THEN                               */
     2055     1342    2                   ELSE;
     2056     1343    2                 IF UWHO<UMT2OWN THEN;
              1343                          /* Tape2 patch owner is a later one, try card patches */

   1343  2 000145   000001 236000 0                  LDQ     MT2OWN
         2 000146   000036 772000                    QRL     30
         2 000147   200006 756100                    STQ     @PTCH_LGTH+1,,AUTO
         2 000150   003100 061500                    CSR     bolr='003'O
         2 000151   000000 000006                    BDSC    0,,PR0                   by=0,bit=0,n=6
         2 000152   200007 000044                    BDSC    @PTCH_LGTH+2,,AUTO       by=0,bit=0,n=36
         2 000153   200007 236100                    LDQ     @PTCH_LGTH+2,,AUTO
         2 000154   200006 116100                    CMPQ    @PTCH_LGTH+1,,AUTO
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:376  
         2 000155   000202 604000 2                  TMI     RPD1

     2057     1344    3                   ELSE DO;                /* Skip tape                          */

     2058     1345    3                       CALL MINIQ_PL6(PAT2_INDX,ADDR(POBUF),80,%FCNRT9);

   1345  2 000156   000003 236000 3                  LDQ     3
         2 000157   200006 756100                    STQ     @PTCH_LGTH+1,,AUTO
         2 000160   000006 237000 3                  LDAQ    6
         2 000161   200012 757100                    STAQ    @PTCH_LGTH+5,,AUTO
         2 000162   200006 631500                    EPPR1   @PTCH_LGTH+1,,AUTO
         2 000163   200011 451500                    STP1    @PTCH_LGTH+4,,AUTO
         2 000164   000005 236000 3                  LDQ     5
         2 000165   200010 756100                    STQ     @PTCH_LGTH+3,,AUTO
         2 000166   200010 630500                    EPPR0   @PTCH_LGTH+3,,AUTO
         2 000167   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 000170   000000 701000 xent               TSX1    MINIQ_PL6
         2 000171   000000 011000                    NOP     0

     2059     1346    4                       CALL IBANGI(POBUF,MT2OWN) WHENRETURN DO;

   1346  2 000172   000013 630400 3                  EPPR0   11
         2 000173   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000174   000000 701000 xent               TSX1    IBANGI
         2 000175   000201 702000 2                  TSX2    s:1349

     2060     1347    4                             POBUF='R ME';

   1347  2 000176   040000 100400                    MLR     fill='040'O
         2 000177   000000 000004 1                  ADSC9   0                        cn=0,n=4
         2 000200   000000 000120 xsym               ADSC9   POBUF                    cn=0,n=80

     2061     1348    4                           END;            /* WHENRETURN                         */

     2062     1349    3                       GOTO RPD0;

   1349  2 000201   000102 710000 2                  TRA     RPD0
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:377  

     2063     1350    3                     END;                  /* ELSE*/
     2064     1351    2               END;                        /* THEN                               */
     2065     1352    1             ELSE;
     2066     1353    1   RPD1:
     2067     1354        /* Try card patches */
     2068     1355    2           IF(WHO&CRWISH)~='0'B THEN DO;   /* The caller wants card patches      */

   1355  2 000202   000000 236000 xsym  RPD1         LDQ     CRWISH
         2 000203   770000 376003                    ANQ     -4096,DU
         2 000204   200006 756100                    STQ     @PTCH_LGTH+1,,AUTO
         2 000205   200003 470500                    LDP0    @WHO,,AUTO
         2 000206   003100 060500                    CSL     bolr='003'O
         2 000207   000000 000006                    BDSC    0,,PR0                   by=0,bit=0,n=6
         2 000210   200007 000044                    BDSC    @PTCH_LGTH+2,,AUTO       by=0,bit=0,n=36
         2 000211   200007 236100                    LDQ     @PTCH_LGTH+2,,AUTO
         2 000212   200006 376100                    ANQ     @PTCH_LGTH+1,,AUTO
         2 000213   000302 600000 2                  TZE     RPD2

     2069     1356    3                 IF WHO=CROWN THEN DO; /* and he is the owner of card patches    */

   1356  2 000214   000000 066500                    CMPB    filb='0'B
         2 000215   000000 000006                    BDSC    0,,PR0                   by=0,bit=0,n=6
         2 000216   000002 000006 0                  BDSC    CROWN                    by=0,bit=0,n=6
         2 000217   000245 601000 2                  TNZ     s:1365

     2070     1357    3   RPDC:                                   /* Read card patch                    */
     2071     1358    3                       CALL MINIQ_PL6(%FRSTCR,PTCH$,PTCH_LGTH,%FCNRCRA) ALTRET(
              1358                                ER_RPATCH);

   1358  2 000220   000015 236000 3     RPDC         LDQ     13
         2 000221   200005 235100                    LDA     @PTCH_LGTH,,AUTO
         2 000222   200010 757100                    STAQ    @PTCH_LGTH+3,,AUTO
         2 000223   200004 236100                    LDQ     @PTCH$,,AUTO
         2 000224   000000 235000 3                  LDA     0
         2 000225   200006 757100                    STAQ    @PTCH_LGTH+1,,AUTO
         2 000226   200006 630500                    EPPR0   @PTCH_LGTH+1,,AUTO
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:378  
         2 000227   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 000230   000000 701000 xent               TSX1    MINIQ_PL6
         2 000231   000374 702000 2                  TSX2    ER_RPATCH

     2072     1359    4                       CALL IBANGI(PTCH,CROWN) WHENRETURN DO;

   1359  2 000232   200004 470500                    LDP0    @PTCH$,,AUTO
         2 000233   000000 471500                    LDP1    0,,PR0
         2 000234   000016 236000 3                  LDQ     14
         2 000235   200007 756100                    STQ     @PTCH_LGTH+2,,AUTO
         2 000236   200006 451500                    STP1    @PTCH_LGTH+1,,AUTO
         2 000237   200006 630500                    EPPR0   @PTCH_LGTH+1,,AUTO
         2 000240   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000241   000000 701000 xent               TSX1    IBANGI
         2 000242   000244 702000 2                  TSX2    s:1362

     2073     1360    4                             GOTO RPD;

   1360  2 000243   000002 710000 2                  TRA     RPD

     2074     1361    4                           END;            /* WHENRETURN                         */
     2075     1362    3                       RETURN;

   1362  2 000244   000000 702200 xent               TSX2  ! X66_ARET

     2076     1363    3                     END;                  /* THEN                               */
     2077     1364    2                   ELSE;
     2078     1365    2                 IF UWHO<UCROWN THEN;
              1365                          /* Card patch owner is a later one, try cons patches */

   1365  2 000245   000002 236000 0                  LDQ     CROWN
         2 000246   000036 772000                    QRL     30
         2 000247   200006 756100                    STQ     @PTCH_LGTH+1,,AUTO
         2 000250   003100 061500                    CSR     bolr='003'O
         2 000251   000000 000006                    BDSC    0,,PR0                   by=0,bit=0,n=6
         2 000252   200007 000044                    BDSC    @PTCH_LGTH+2,,AUTO       by=0,bit=0,n=36
         2 000253   200007 236100                    LDQ     @PTCH_LGTH+2,,AUTO
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:379  
         2 000254   200006 116100                    CMPQ    @PTCH_LGTH+1,,AUTO
         2 000255   000302 604000 2                  TMI     RPD2

     2079     1366    3                   ELSE DO;                /* Skip card                          */

     2080     1367    3                       CALL MINIQ_PL6(%FRSTCR,ADDR(POBUF),80,%FCNRCRA);

   1367  2 000256   000003 236000 3                  LDQ     3
         2 000257   200006 756100                    STQ     @PTCH_LGTH+1,,AUTO
         2 000260   000020 237000 3                  LDAQ    16
         2 000261   200012 757100                    STAQ    @PTCH_LGTH+5,,AUTO
         2 000262   200006 631500                    EPPR1   @PTCH_LGTH+1,,AUTO
         2 000263   200011 451500                    STP1    @PTCH_LGTH+4,,AUTO
         2 000264   000000 236000 3                  LDQ     0
         2 000265   200010 756100                    STQ     @PTCH_LGTH+3,,AUTO
         2 000266   200010 630500                    EPPR0   @PTCH_LGTH+3,,AUTO
         2 000267   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 000270   000000 701000 xent               TSX1    MINIQ_PL6
         2 000271   000000 011000                    NOP     0

     2081     1368    4                       CALL IBANGI(POBUF,CROWN) WHENRETURN DO;

   1368  2 000272   000022 630400 3                  EPPR0   18
         2 000273   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000274   000000 701000 xent               TSX1    IBANGI
         2 000275   000301 702000 2                  TSX2    s:1371

     2082     1369    4                             POBUF='R ME';

   1369  2 000276   040000 100400                    MLR     fill='040'O
         2 000277   000000 000004 1                  ADSC9   0                        cn=0,n=4
         2 000300   000000 000120 xsym               ADSC9   POBUF                    cn=0,n=80

     2083     1370    4                           END;            /* WHENRETURN                         */

     2084     1371    3                       GOTO RPD1;

PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:380  
   1371  2 000301   000202 710000 2                  TRA     RPD1

     2085     1372    3                     END;                  /* ELSE*/
     2086     1373    2               END;                        /* THEN                               */
     2087     1374    1             ELSE;
     2088     1375    1   RPD2:
     2089     1376        /* Try console patches */
     2090     1377    2           IF(WHO&OCWISH)~='0'B THEN DO;   /* The caller wants cons patches      */

   1377  2 000302   000000 236000 xsym  RPD2         LDQ     OCWISH
         2 000303   770000 376003                    ANQ     -4096,DU
         2 000304   200006 756100                    STQ     @PTCH_LGTH+1,,AUTO
         2 000305   003100 060500                    CSL     bolr='003'O
         2 000306   000000 000006                    BDSC    0,,PR0                   by=0,bit=0,n=6
         2 000307   200007 000044                    BDSC    @PTCH_LGTH+2,,AUTO       by=0,bit=0,n=36
         2 000310   200007 236100                    LDQ     @PTCH_LGTH+2,,AUTO
         2 000311   200006 376100                    ANQ     @PTCH_LGTH+1,,AUTO
         2 000312   000353 600000 2                  TZE     RPD3

     2091     1378    3                 IF WHO=OCOWN THEN DO; /* and he is the owner of cons patches    */

   1378  2 000313   000000 066500                    CMPB    filb='0'B
         2 000314   000000 000006                    BDSC    0,,PR0                   by=0,bit=0,n=6
         2 000315   000003 000006 0                  BDSC    OCOWN                    by=0,bit=0,n=6
         2 000316   000344 601000 2                  TNZ     s:1387

     2092     1379    3   RPDO:                                   /* Read console patch                 */
     2093     1380    3                       CALL MINIQ_PL6(0,PTCH$,PTCH_LGTH,%FCNRCA) ALTRET(ER_RPATCH);

   1380  2 000317   000015 236000 3     RPDO         LDQ     13
         2 000320   200005 235100                    LDA     @PTCH_LGTH,,AUTO
         2 000321   200010 757100                    STAQ    @PTCH_LGTH+3,,AUTO
         2 000322   200004 236100                    LDQ     @PTCH$,,AUTO
         2 000323   000015 235000 3                  LDA     13
         2 000324   200006 757100                    STAQ    @PTCH_LGTH+1,,AUTO
         2 000325   200006 630500                    EPPR0   @PTCH_LGTH+1,,AUTO
         2 000326   000022 631400 xsym               EPPR1   B_VECTNIL+18
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:381  
         2 000327   000000 701000 xent               TSX1    MINIQ_PL6
         2 000330   000374 702000 2                  TSX2    ER_RPATCH

     2094     1381    4                       CALL IBANGI(PTCH,OCOWN) WHENRETURN DO;

   1381  2 000331   200004 470500                    LDP0    @PTCH$,,AUTO
         2 000332   000000 471500                    LDP1    0,,PR0
         2 000333   000024 236000 3                  LDQ     20
         2 000334   200007 756100                    STQ     @PTCH_LGTH+2,,AUTO
         2 000335   200006 451500                    STP1    @PTCH_LGTH+1,,AUTO
         2 000336   200006 630500                    EPPR0   @PTCH_LGTH+1,,AUTO
         2 000337   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000340   000000 701000 xent               TSX1    IBANGI
         2 000341   000343 702000 2                  TSX2    s:1384

     2095     1382    4                             GOTO RPD;

   1382  2 000342   000002 710000 2                  TRA     RPD

     2096     1383    4                           END;            /* WHENRETURN                         */
     2097     1384    3                       RETURN;

   1384  2 000343   000000 702200 xent               TSX2  ! X66_ARET

     2098     1385    3                     END;                  /* THEN                               */
     2099     1386    2                   ELSE;
     2100     1387    2                 IF UWHO>UOCOWN THEN GOTO RPDO;

   1387  2 000344   003100 061500                    CSR     bolr='003'O
         2 000345   000000 000006                    BDSC    0,,PR0                   by=0,bit=0,n=6
         2 000346   200006 000044                    BDSC    @PTCH_LGTH+1,,AUTO       by=0,bit=0,n=36
         2 000347   000003 236000 0                  LDQ     OCOWN
         2 000350   000036 772000                    QRL     30
         2 000351   200006 116100                    CMPQ    @PTCH_LGTH+1,,AUTO
         2 000352   000317 604000 2                  TMI     RPDO

     2101     1388    2                   ELSE;
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:382  
     2102     1389    2               END;                        /* THEN                               */

     2103     1390    1             ELSE;
     2104     1391    1   RPD3:
     2105     1392    2           IF WHO=%WHOTIGR THEN CALL DORPB WHENALTRETURN DO;

   1392  2 000353   000000 066500       RPD3         CMPB    filb='0'B
         2 000354   000000 000006                    BDSC    0,,PR0                   by=0,bit=0,n=6
         2 000355   000025 000022 3                  BDSC    21                       by=0,bit=0,n=18
         2 000356   000366 601000 2                  TNZ     s:1397

   1392  2 000357   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000360   000000 701000 xent               TSX1    DORPB
         2 000361   000363 702000 2                  TSX2    s:1393
         2 000362   000366 710000 2                  TRA     s:1397

     2106     1393    2                   UNWIND TO ESADERR;

   1393  2 000363   000000 237200 xsym               LDAQ  ! ESADERR
         2 000364   000000 700200 xent               TSX0  ! X66_AUNWIND
         2 000365   000000 000200                    ZERO    0,128

     2107     1394    2                 END;                      /* WHENALTRET                         */
     2108     1395    1             ELSE;
     2109     1396        /* Give him an !EOD */
     2110     1397    1           PTCH='!EOD';

   1397  2 000366   200004 470500                    LDP0    @PTCH$,,AUTO
         2 000367   000000 471500                    LDP1    0,,PR0
         2 000370   040100 100400                    MLR     fill='040'O
         2 000371   000001 000004 1                  ADSC9   1                        cn=0,n=4
         2 000372   100000 000120                    ADSC9   0,,PR1                   cn=0,n=80

     2111     1398    1           RETURN;

   1398  2 000373   000000 702200 xent               TSX2  ! X66_ARET

PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:383  
     2112     1399    1   ER_RPATCH:
     2113     1400    1           ALTRETURN;

   1400  2 000374   000000 702200 xent  ER_RPATCH    TSX2  ! X66_AALT
     2114     1401    1   END READ_PATCH;
     2115     1402        %EOD;

PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:384  
--  Include file information  --

   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure READ_PATCH.
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:385  

 **** Variables and constants ****

  ****  Section 000  Data  READ_PATCH

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     2-0-0/b BIT (6)     r     1 CROWN                      1-0-0/b BIT (6)     r     1 MT2OWN
     0-0-0/b BIT (6)     r     1 MTOWN                      3-0-0/b BIT (6)     r     1 OCOWN
     2-0-0/b UBIN(6)     r     1 UCROWN                     1-0-0/b UBIN(6)     r     1 UMT2OWN
     0-0-0/b UBIN(6)     r     1 UMTOWN                     3-0-0/b UBIN(6)     r     1 UOCOWN

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @PTCH$                     5-0-0/w PTR         r     1 @PTCH_LGTH
     3-0-0/w PTR         r     1 @WHO                      *0-0-0/w PTR         r     1 PTCH$
    *0-0-0/w UBIN        r     1 PTCH_LGTH                 *0-0-0/b UBIN(6)     r     1 UWHO
    *0-0-0/b BIT (6)     r     1 WHO

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/b BIT (6)     r     1 CRWISH                     0-0-0/d REMB        r     1 ESADERR
     0-0-0/b BIT (6)     r     1 MT2WISH                    0-0-0/b BIT (6)     r     1 MTWISH
     0-0-0/b BIT (6)     r     1 OCWISH                     0-0-0/w UBIN        r     1 PAT2_INDX
     0-0-0/c CHAR(80)    r     1 POBUF                      0-0-0/w UBIN        r     1 PO_INDX

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:386  
     0-0-0/c CHAR(80)    r     1 PTCH


   Procedure READ_PATCH requires 253 words for executable code.
   Procedure READ_PATCH requires 12 words of local(AUTO) storage.
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:387  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:388  
          MINI XREF LISTING

CROWN
      1292**DCL      1293--REDEF    1356>>IF       1359<>CALL     1368<>CALL
CRWISH
      1291**DCL      1355>>IF
DORPB
      1306**DCL-ENT  1392--CALL
ER_RPATCH
      1400**LABEL    1314--CALLALT  1336--CALLALT  1358--CALLALT  1380--CALLALT
ESADERR
      1307**DCL      1393>>UNWIND
IBANGI
      1304**DCL-ENT  1315--CALL     1324--CALL     1337--CALL     1346--CALL     1359--CALL     1368--CALL
      1381--CALL
MINIQ_PL6
      1305**DCL-ENT  1314--CALL     1323--CALL     1336--CALL     1345--CALL     1358--CALL     1367--CALL
      1380--CALL
MT2OWN
      1289**DCL      1290--REDEF    1334>>IF       1337<>CALL     1346<>CALL
MT2WISH
      1288**DCL      1333>>IF
MTOWN
      1286**DCL      1287--REDEF    1312>>IF       1315<>CALL     1324<>CALL
MTWISH
      1285**DCL      1311>>IF
OCOWN
      1295**DCL      1296--REDEF    1378>>IF       1381<>CALL
OCWISH
      1294**DCL      1377>>IF
PAT2_INDX
      1298**DCL      1336<>CALL     1345<>CALL
POBUF
      1302**DCL      1323--CALL     1324<>CALL     1325<<ASSIGN   1345--CALL     1346<>CALL     1347<<ASSIGN
PL6.E3A0      #007=READ_PATCH File=ISI$FIXSYST.:E05TSI                           TUE 07/29/97 22:51 Page:389  
      1367--CALL     1368<>CALL     1369<<ASSIGN
PO_INDX
      1297**DCL      1314<>CALL     1323<>CALL
PTCH
      1301**DCL      1315<>CALL     1337<>CALL     1359<>CALL     1381<>CALL     1397<<ASSIGN
PTCH$
      1299**DCL         6--PROC     1301--IMP-PTR  1314<>CALL     1315>>CALL     1336<>CALL     1337>>CALL
      1358<>CALL     1359>>CALL     1380<>CALL     1381>>CALL     1397>>ASSIGN
PTCH_LGTH
      1300**DCL         6--PROC     1314<>CALL     1336<>CALL     1358<>CALL     1380<>CALL
RPD
      1311**LABEL    1316--GOTO     1327--GOTO     1360--GOTO     1382--GOTO
RPD0
      1333**LABEL    1338--GOTO     1349--GOTO
RPD1
      1355**LABEL    1371--GOTO
RPDO
      1380**LABEL    1387--GOTO
UCROWN
      1293**DCL      1365>>IF
UMT2OWN
      1290**DCL      1343>>IF
UMTOWN
      1287**DCL      1321>>IF
UOCOWN
      1296**DCL      1387>>IF
UWHO
      1284**DCL      1321>>IF       1343>>IF       1365>>IF       1387>>IF
WHO
      1283**DCL         6--PROC     1284--REDEF    1311>>IF       1312>>IF       1333>>IF       1334>>IF
      1355>>IF       1356>>IF       1377>>IF       1378>>IF       1392>>IF

PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:390  
     2116        1        /*T***********************************************************/
     2117        2        /*T*                                                         */
     2118        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     2119        4        /*T*                                                         */
     2120        5        /*T***********************************************************/
     2121        6        DORPB:  PROC ALTRET;
     2122        7        /* Copies RUM, PLOVER and BOOTIME commands from patch
     2123        8                   device to patch file                     */
     2124        9        %INCLUDE IS$MACROS;
     2125     1284        %DISKDIR(NAME=ADIR,STCLASS="SYMREF");
     2126     1540        %DISKDIR(NAME=RDIR,STCLASS="BASED(PO$)");
     2127     1796    1   DCL 1 ADPXF SYMREF,
     2128     1797    1         2 A BIT(1),
     2129     1798    1         2 D BIT(1),
     2130     1799    1         2 P BIT(1),
     2131     1800    1         2 X BIT(1),
     2132     1801    1         2 F BIT(1);
     2133     1802    1   DCL 1 NF_FLG SYMREF,
     2134     1803    1         2 RECON BIT(1),
     2135     1804    1         2 NONEW BIT(1),
     2136     1805    1         2 S BIT(1);
     2137     1806    1   DCL VOFLG BIT(1)SYMREF;
     2138     1807    1   DCL TOPDA UBIN WORD SYMREF;
     2139     1808    1   DCL SYS_DPX UBIN WORD SYMREF;
     2140     1809    1   DCL SADX$ PTR STATIC INIT(ADDR(POBUF));
     2141     1810        %DCW_STRUCT(NAME=SADDCWX,STCLASS="REDEF SADX$");
     2142     1828    1   DCL MTWISH BIT(6) SYMREF;
     2143     1829    1   DCL MT2WISH BIT(6) SYMREF;
     2144     1830    1   DCL PAT2_INDX UBIN WORD SYMREF;         /* Patch tape 2 index                 */
     2145     1831    1   DCL CRWISH BIT(6) SYMREF;
     2146     1832    1   DCL RUMPA BIT(1) SYMREF;
     2147     1833    1   DCL PLVPA BIT(1) SYMREF;
     2148     1834    1   DCL BTMPA BIT(1) SYMREF;
     2149     1835    1   DCL RPB_FLAG BIT(1) SYMREF;
     2150     1836    1   DCL POBUF CHAR(80) SYMREF;
     2151     1837    1   DCL PO$ PTR STATIC INIT(ADDR(POBUF));
     2152     1838    1   DCL CP6UL(0:1023) CHAR(4) SYMREF;
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:391  
     2153     1839    1   DCL 1 PTCHBF REDEF CP6UL,
     2154     1840    1         2 NXTWA UBIN WORD,
     2155     1841    1         2 PTCHS(0:1022) BIT(36);
     2156     1842    1   DCL WPTCH$ PTR STATIC INIT(ADDR(CP6UL));
     2157     1843        %DCW_STRUCT(NAME=PTCHDCW,STCLASS="REDEF WPTCH$");
     2158     1861        /**/
     2159     1862    1   DCL WRITE_PATCH ENTRY(2);
     2160     1863    1   DCL READ_PATCH ENTRY(3) ALTRET;
     2161     1864    1   DCL MINIQC_PL6 ENTRY(5) ALTRET;
     2162     1865    1   DCL ER_WPATCH ENTRY;
     2163     1866    1   DCL MINIQ_PL6 ENTRY(5) ALTRET;
     2164     1867        /**/
     2165     1868    1   DCL SRUM CHAR(8) STATIC INIT('!RUM');
     2166     1869    1   DCL SPLV CHAR(8) STATIC INIT('!PLOVER');
     2167     1870    1   DCL SBTM CHAR(8) STATIC INIT('!BOOTIME');
     2168     1871        /**/
     2169     1872    2           IF (ADPXF.P='1'B OR NF_FLG='0'B OR NF_FLG.S='1'B) THEN DO;
              1872                    /* Patch option,or New Files ,or System files */
     2170     1873    2   DORPB0:
     2171     1874    3                 IF((%WHORUM&MTWISH)~='0'B OR(%WHORUM&MT2WISH)~='0'B OR (%WHORUM&CRWISH
              1874                          )~='0'B) THEN DO; /* Do RUM */
     2172     1875    3   DORUM:
     2173     1876    4                       IF RUMPA='0'B THEN DO; /* Write !RUM                      */
     2174     1877    4                             RUMPA='1'B;
     2175     1878    4                             CALL WRITE_PATCH(ADDR(SRUM),8);
     2176     1879    4                           END;            /* THEN                               */
     2177     1880    3                         ELSE;
     2178     1881    3                       RPB_FLAG='1'B;
     2179     1882    3   DORUM1:
     2180     1883    3                       CALL READ_PATCH(%WHORUM,ADDR(POBUF),80);
     2181     1884    4                       IF POBUF~='!EOD' THEN DO;
     2182     1885    4                             CALL WRITE_PATCH(ADDR(POBUF),80);
     2183     1886    4                             GOTO DORUM1;
     2184     1887    4                           END;            /* THEN                               */
     2185     1888    3                         ELSE;
     2186     1889    3                     END;                  /* THEN                               */
     2187     1890    2   DORPB1:
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:392  
     2188     1891    3                 IF((%WHOPLV&MTWISH)~='0'B OR (%WHOPLV&MT2WISH)~='0'B OR (%WHOPLV&
              1891                          CRWISH)~='0'B) THEN DO; /* Do PLOVER */
     2189     1892    3                       RPB_FLAG='1'B;
     2190     1893    3   DOPLV:
     2191     1894    4                       IF PLVPA='0'B THEN DO; /* Write !PLOVER                   */
     2192     1895    4                             PLVPA='1'B;
     2193     1896    4                             CALL WRITE_PATCH(ADDR(SPLV),8);
     2194     1897    4                           END;            /* THEN                               */
     2195     1898    3                         ELSE;
     2196     1899    3   DOPLV1:
     2197     1900    3                       CALL READ_PATCH(%WHOPLV,ADDR(POBUF),80);
     2198     1901    4                       IF POBUF~='!EOD' THEN DO;
     2199     1902    4                             CALL WRITE_PATCH(ADDR(POBUF),80);
     2200     1903    4                             GOTO DOPLV1;
     2201     1904    4                           END;            /* THEN                               */
     2202     1905    3                         ELSE;
     2203     1906    3                     END;                  /* THEN                               */
     2204     1907    2   DORPB2:
     2205     1908    3                 IF((%WHOBTM&MTWISH)~='0'B OR (%WHOBTM&MT2WISH)~='0'B OR (%WHOBTM&
              1908                          CRWISH)~='0'B) THEN DO; /* Do BOOTIME */
     2206     1909    3                       RPB_FLAG='1'B;
     2207     1910    3   DOBTM:
     2208     1911    4                       IF BTMPA='0'B THEN DO; /* Write !BOOTIME                  */
     2209     1912    4                             BTMPA='1'B;
     2210     1913    4                             CALL WRITE_PATCH(ADDR(SBTM),8);
     2211     1914    4                           END;            /* THEN                               */
     2212     1915    3                         ELSE;
     2213     1916    3   DOBTM1:
     2214     1917    3                       CALL READ_PATCH(%WHOBTM,ADDR(POBUF),80);
     2215     1918    4                       IF POBUF~='!EOD' THEN DO;
     2216     1919    4                             CALL WRITE_PATCH(ADDR(POBUF),80);
     2217     1920    4                             GOTO DOBTM1;
     2218     1921    4                           END;            /* THEN                               */
     2219     1922    3                         ELSE;
     2220     1923    3                     END;                  /* THEN                               */
     2221     1924    2               END;                        /* THEN                               */
     2222     1925    1             ELSE;
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:393  
     2223     1926    1   DORPB3:
     2224     1927    1           IF VOFLG='1'B THEN RETURN;
     2225     1928    1             ELSE;
     2226     1929    2           IF PTCHBF.NXTWA~=0 THEN DO;     /* Write out last buffer              */
     2227     1930    2                 PTCHDCW.TALLY=1024;
     2228     1931    2                 CALL MINIQC_PL6(SYS_DPX,ADDR(PTCHDCW),,%FCNWDB,ADIR.PATCH.DA+ADIR.
              1931                          PATCH.SIZE) ALTRET(ER_WBUF);
     2229     1932    2                 ADIR.PATCH.SIZE=ADIR.PATCH.SIZE+1; /* Update patch size         */
     2230     1933    2               END;                        /* THEN                               */
     2231     1934    1   DORPBCPB:
     2232     1935    1           PTCHBF='0'B;
     2233     1936        /* Read SAD, update SAD.PATCH, rewrite SAD */
     2234     1937    1           SADDCWX.TALLY=LENGTHW(ADIR)+4;
     2235     1938    1           CALL MINIQC_PL6(SYS_DPX,ADDR(SADDCWX),,%FCNRDB,TOPDA) ALTRET(SADER);
     2236     1939    1           RDIR.PATCH=ADIR.PATCH;
     2237     1940    1           CALL MINIQC_PL6(SYS_DPX,ADDR(SADDCWX),,%FCNWDB,TOPDA) ALTRET(SADER);
     2238     1941    1           IF MT2WISH~='0'B THEN CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNUNL);
     2239     1942    1           RETURN;
     2240     1943    1   SADER:
     2241     1944    1           ALTRETURN;
     2242     1945    1   ER_WBUF:
     2243     1946    1           CALL ER_WPATCH;                 /* Err on writing patches; give up    */
     2244     1947    1   END DORPB;
     2245     1948        %EOD;

PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:394  
--  Include file information  --

   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure DORPB.

   Procedure DORPB requires 255 words for executable code.
   Procedure DORPB requires 12 words of local(AUTO) storage.

PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:395  

 Object Unit name= DORPB                                      File name= ISI$FIXSYST.:E05TOU
 UTS= JUL 29 '97 22:51:10.60 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none     9     11  DORPB
    1  RoData even  UTS      1      1  DORPB
    2   Proc  even  none   255    377  DORPB
    3  RoData even  none    24     30  DORPB

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes    yes     yes      Std        0  DORPB

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       2 WRITE_PATCH
 yes     yes           Std       3 READ_PATCH
         yes           Std       0 ER_WPATCH
 yes     yes           Std       5 MINIQC_PL6
 yes     yes           Std       5 MINIQ_PL6
                       nStd      0 X66_AUTO_0
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:396  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ADIR                                  ADPXF                                 NF_FLG
     VOFLG                                 TOPDA                                 SYS_DPX
     MTWISH                                MT2WISH                               PAT2_INDX
     CRWISH                                RUMPA                                 PLVPA
     BTMPA                                 RPB_FLAG                              POBUF
     CP6UL                                 B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:397  


     2116        1        /*T***********************************************************/
     2117        2        /*T*                                                         */
     2118        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     2119        4        /*T*                                                         */
     2120        5        /*T***********************************************************/
     2121        6        DORPB:  PROC ALTRET;

      6  2 000000   000000 700200 xent  DORPB        TSX0  ! X66_AUTO_0
         2 000001   000014 000000                    ZERO    12,0

     2122        7        /* Copies RUM, PLOVER and BOOTIME commands from patch
     2123        8                   device to patch file                     */
     2124        9        %INCLUDE IS$MACROS;
     2125     1284        %DISKDIR(NAME=ADIR,STCLASS="SYMREF");
     2126     1540        %DISKDIR(NAME=RDIR,STCLASS="BASED(PO$)");
     2127     1796    1   DCL 1 ADPXF SYMREF,
     2128     1797    1         2 A BIT(1),
     2129     1798    1         2 D BIT(1),
     2130     1799    1         2 P BIT(1),
     2131     1800    1         2 X BIT(1),
     2132     1801    1         2 F BIT(1);
     2133     1802    1   DCL 1 NF_FLG SYMREF,
     2134     1803    1         2 RECON BIT(1),
     2135     1804    1         2 NONEW BIT(1),
     2136     1805    1         2 S BIT(1);
     2137     1806    1   DCL VOFLG BIT(1)SYMREF;
     2138     1807    1   DCL TOPDA UBIN WORD SYMREF;
     2139     1808    1   DCL SYS_DPX UBIN WORD SYMREF;
     2140     1809    1   DCL SADX$ PTR STATIC INIT(ADDR(POBUF));
     2141     1810        %DCW_STRUCT(NAME=SADDCWX,STCLASS="REDEF SADX$");
     2142     1828    1   DCL MTWISH BIT(6) SYMREF;
     2143     1829    1   DCL MT2WISH BIT(6) SYMREF;
     2144     1830    1   DCL PAT2_INDX UBIN WORD SYMREF;         /* Patch tape 2 index                 */
     2145     1831    1   DCL CRWISH BIT(6) SYMREF;
     2146     1832    1   DCL RUMPA BIT(1) SYMREF;
     2147     1833    1   DCL PLVPA BIT(1) SYMREF;
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:398  
     2148     1834    1   DCL BTMPA BIT(1) SYMREF;
     2149     1835    1   DCL RPB_FLAG BIT(1) SYMREF;
     2150     1836    1   DCL POBUF CHAR(80) SYMREF;
     2151     1837    1   DCL PO$ PTR STATIC INIT(ADDR(POBUF));
     2152     1838    1   DCL CP6UL(0:1023) CHAR(4) SYMREF;
     2153     1839    1   DCL 1 PTCHBF REDEF CP6UL,
     2154     1840    1         2 NXTWA UBIN WORD,
     2155     1841    1         2 PTCHS(0:1022) BIT(36);
     2156     1842    1   DCL WPTCH$ PTR STATIC INIT(ADDR(CP6UL));
     2157     1843        %DCW_STRUCT(NAME=PTCHDCW,STCLASS="REDEF WPTCH$");
     2158     1861        /**/
     2159     1862    1   DCL WRITE_PATCH ENTRY(2);
     2160     1863    1   DCL READ_PATCH ENTRY(3) ALTRET;
     2161     1864    1   DCL MINIQC_PL6 ENTRY(5) ALTRET;
     2162     1865    1   DCL ER_WPATCH ENTRY;
     2163     1866    1   DCL MINIQ_PL6 ENTRY(5) ALTRET;
     2164     1867        /**/
     2165     1868    1   DCL SRUM CHAR(8) STATIC INIT('!RUM');
     2166     1869    1   DCL SPLV CHAR(8) STATIC INIT('!PLOVER');
     2167     1870    1   DCL SBTM CHAR(8) STATIC INIT('!BOOTIME');
     2168     1871        /**/
     2169     1872    2           IF (ADPXF.P='1'B OR NF_FLG='0'B OR NF_FLG.S='1'B) THEN DO;
              1872                    /* Patch option,or New Files ,or System files */

   1872  2 000002   000000 236000 xsym               LDQ     ADPXF
         2 000003   100000 316003                    CANQ    32768,DU
         2 000004   000012 601000 2                  TNZ     DORPB0
         2 000005   000000 236000 xsym               LDQ     NF_FLG
         2 000006   700000 316003                    CANQ    -32768,DU
         2 000007   000012 600000 2                  TZE     DORPB0
         2 000010   100000 316003                    CANQ    32768,DU
         2 000011   000255 600000 2                  TZE     DORPB3

     2170     1873    2   DORPB0:
     2171     1874    3                IF((%WHORUM&MTWISH)~='0'B OR(%WHORUM&MT2WISH)~='0'B OR (%WHORUM&CRWISH
              1874                          )~='0'B) THEN DO; /* Do RUM */

PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:399  
   1874  2 000012   000000 236000 xsym  DORPB0       LDQ     MTWISH
         2 000013   770000 376003                    ANQ     -4096,DU
         2 000014   100000 376003                    ANQ     32768,DU
         2 000015   000026 601000 2                  TNZ     DORUM
         2 000016   000000 236000 xsym               LDQ     MT2WISH
         2 000017   770000 376003                    ANQ     -4096,DU
         2 000020   100000 376003                    ANQ     32768,DU
         2 000021   000026 601000 2                  TNZ     DORUM
         2 000022   000000 236000 xsym               LDQ     CRWISH
         2 000023   770000 376003                    ANQ     -4096,DU
         2 000024   100000 376003                    ANQ     32768,DU
         2 000025   000101 600000 2                  TZE     DORPB1

     2172     1875    3   DORUM:
     2173     1876    4                       IF RUMPA='0'B THEN DO; /* Write !RUM                      */

   1876  2 000026   000000 234000 xsym  DORUM        SZN     RUMPA
         2 000027   000044 604000 2                  TMI     s:1881

     2174     1877    4                             RUMPA='1'B;

   1877  2 000030   400000 236003                    LDQ     -131072,DU
         2 000031   000000 756000 xsym               STQ     RUMPA

     2175     1878    4                             CALL WRITE_PATCH(ADDR(SRUM),8);

   1878  2 000032   000000 236000 3                  LDQ     0
         2 000033   200004 756100                    STQ     4,,AUTO
         2 000034   000001 236000 3                  LDQ     1
         2 000035   200007 756100                    STQ     7,,AUTO
         2 000036   200004 630500                    EPPR0   4,,AUTO
         2 000037   200006 450500                    STP0    6,,AUTO
         2 000040   200006 630500                    EPPR0   6,,AUTO
         2 000041   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000042   000000 701000 xent               TSX1    WRITE_PATCH
         2 000043   000000 011000                    NOP     0

PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:400  
     2176     1879    4                           END;            /* THEN                               */

     2177     1880    3                         ELSE;
     2178     1881    3                       RPB_FLAG='1'B;

   1881  2 000044   400000 236003                    LDQ     -131072,DU
         2 000045   000000 756000 xsym               STQ     RPB_FLAG

     2179     1882    3   DORUM1:
     2180     1883    3                       CALL READ_PATCH(%WHORUM,ADDR(POBUF),80);

   1883  2 000046   000003 236000 3     DORUM1       LDQ     3
         2 000047   200004 756100                    STQ     4,,AUTO
         2 000050   000005 236000 3                  LDQ     5
         2 000051   200007 756100                    STQ     7,,AUTO
         2 000052   200004 630500                    EPPR0   4,,AUTO
         2 000053   200006 450500                    STP0    6,,AUTO
         2 000054   000006 236000 3                  LDQ     6
         2 000055   200005 756100                    STQ     5,,AUTO
         2 000056   200005 630500                    EPPR0   5,,AUTO
         2 000057   000021 631400 xsym               EPPR1   B_VECTNIL+17
         2 000060   000000 701000 xent               TSX1    READ_PATCH
         2 000061   000000 011000                    NOP     0

     2181     1884    4                       IF POBUF~='!EOD' THEN DO;

   1884  2 000062   040000 106400                    CMPC    fill='040'O
         2 000063   000000 000120 xsym               ADSC9   POBUF                    cn=0,n=80
         2 000064   000000 000004 1                  ADSC9   0                        cn=0,n=4
         2 000065   000101 600000 2                  TZE     DORPB1

     2182     1885    4                             CALL WRITE_PATCH(ADDR(POBUF),80);

   1885  2 000066   000003 236000 3                  LDQ     3
         2 000067   200004 756100                    STQ     4,,AUTO
         2 000070   000005 236000 3                  LDQ     5
         2 000071   200007 756100                    STQ     7,,AUTO
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:401  
         2 000072   200004 630500                    EPPR0   4,,AUTO
         2 000073   200006 450500                    STP0    6,,AUTO
         2 000074   200006 630500                    EPPR0   6,,AUTO
         2 000075   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000076   000000 701000 xent               TSX1    WRITE_PATCH
         2 000077   000000 011000                    NOP     0

     2183     1886    4                             GOTO DORUM1;

   1886  2 000100   000046 710000 2                  TRA     DORUM1

     2184     1887    4                           END;            /* THEN                               */
     2185     1888    3                         ELSE;
     2186     1889    3                     END;                  /* THEN                               */
     2187     1890    2   DORPB1:
     2188     1891    3                 IF((%WHOPLV&MTWISH)~='0'B OR (%WHOPLV&MT2WISH)~='0'B OR (%WHOPLV&
              1891                          CRWISH)~='0'B) THEN DO; /* Do PLOVER */

   1891  2 000101   000000 236000 xsym  DORPB1       LDQ     MTWISH
         2 000102   770000 376003                    ANQ     -4096,DU
         2 000103   200000 376003                    ANQ     65536,DU
         2 000104   000115 601000 2                  TNZ     s:1892
         2 000105   000000 236000 xsym               LDQ     MT2WISH
         2 000106   770000 376003                    ANQ     -4096,DU
         2 000107   200000 376003                    ANQ     65536,DU
         2 000110   000115 601000 2                  TNZ     s:1892
         2 000111   000000 236000 xsym               LDQ     CRWISH
         2 000112   770000 376003                    ANQ     -4096,DU
         2 000113   200000 376003                    ANQ     65536,DU
         2 000114   000167 600000 2                  TZE     DORPB2

     2189     1892    3                       RPB_FLAG='1'B;

   1892  2 000115   400000 236003                    LDQ     -131072,DU
         2 000116   000000 756000 xsym               STQ     RPB_FLAG

     2190     1893    3   DOPLV:
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:402  
     2191     1894    4                       IF PLVPA='0'B THEN DO; /* Write !PLOVER                   */

   1894  2 000117   000000 234000 xsym  DOPLV        SZN     PLVPA
         2 000120   000134 604000 2                  TMI     DOPLV1

     2192     1895    4                             PLVPA='1'B;

   1895  2 000121   000000 756000 xsym               STQ     PLVPA

     2193     1896    4                             CALL WRITE_PATCH(ADDR(SPLV),8);

   1896  2 000122   000007 236000 3                  LDQ     7
         2 000123   200004 756100                    STQ     4,,AUTO
         2 000124   000001 236000 3                  LDQ     1
         2 000125   200007 756100                    STQ     7,,AUTO
         2 000126   200004 630500                    EPPR0   4,,AUTO
         2 000127   200006 450500                    STP0    6,,AUTO
         2 000130   200006 630500                    EPPR0   6,,AUTO
         2 000131   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000132   000000 701000 xent               TSX1    WRITE_PATCH
         2 000133   000000 011000                    NOP     0

     2194     1897    4                           END;            /* THEN                               */

     2195     1898    3                         ELSE;
     2196     1899    3   DOPLV1:
     2197     1900    3                       CALL READ_PATCH(%WHOPLV,ADDR(POBUF),80);

   1900  2 000134   000003 236000 3     DOPLV1       LDQ     3
         2 000135   200004 756100                    STQ     4,,AUTO
         2 000136   000005 236000 3                  LDQ     5
         2 000137   200007 756100                    STQ     7,,AUTO
         2 000140   200004 630500                    EPPR0   4,,AUTO
         2 000141   200006 450500                    STP0    6,,AUTO
         2 000142   000011 236000 3                  LDQ     9
         2 000143   200005 756100                    STQ     5,,AUTO
         2 000144   200005 630500                    EPPR0   5,,AUTO
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:403  
         2 000145   000021 631400 xsym               EPPR1   B_VECTNIL+17
         2 000146   000000 701000 xent               TSX1    READ_PATCH
         2 000147   000000 011000                    NOP     0

     2198     1901    4                       IF POBUF~='!EOD' THEN DO;

   1901  2 000150   040000 106400                    CMPC    fill='040'O
         2 000151   000000 000120 xsym               ADSC9   POBUF                    cn=0,n=80
         2 000152   000000 000004 1                  ADSC9   0                        cn=0,n=4
         2 000153   000167 600000 2                  TZE     DORPB2

     2199     1902    4                             CALL WRITE_PATCH(ADDR(POBUF),80);

   1902  2 000154   000003 236000 3                  LDQ     3
         2 000155   200004 756100                    STQ     4,,AUTO
         2 000156   000005 236000 3                  LDQ     5
         2 000157   200007 756100                    STQ     7,,AUTO
         2 000160   200004 630500                    EPPR0   4,,AUTO
         2 000161   200006 450500                    STP0    6,,AUTO
         2 000162   200006 630500                    EPPR0   6,,AUTO
         2 000163   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000164   000000 701000 xent               TSX1    WRITE_PATCH
         2 000165   000000 011000                    NOP     0

     2200     1903    4                             GOTO DOPLV1;

   1903  2 000166   000134 710000 2                  TRA     DOPLV1

     2201     1904    4                           END;            /* THEN                               */
     2202     1905    3                         ELSE;
     2203     1906    3                     END;                  /* THEN                               */
     2204     1907    2   DORPB2:
     2205     1908    3                 IF((%WHOBTM&MTWISH)~='0'B OR (%WHOBTM&MT2WISH)~='0'B OR (%WHOBTM&
              1908                          CRWISH)~='0'B) THEN DO; /* Do BOOTIME */

   1908  2 000167   000000 236000 xsym  DORPB2       LDQ     MTWISH
         2 000170   770000 376003                    ANQ     -4096,DU
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:404  
         2 000171   400000 376003                    ANQ     -131072,DU
         2 000172   000203 601000 2                  TNZ     s:1909
         2 000173   000000 236000 xsym               LDQ     MT2WISH
         2 000174   770000 376003                    ANQ     -4096,DU
         2 000175   400000 376003                    ANQ     -131072,DU
         2 000176   000203 601000 2                  TNZ     s:1909
         2 000177   000000 236000 xsym               LDQ     CRWISH
         2 000200   770000 376003                    ANQ     -4096,DU
         2 000201   400000 376003                    ANQ     -131072,DU
         2 000202   000255 600000 2                  TZE     DORPB3

     2206     1909    3                       RPB_FLAG='1'B;

   1909  2 000203   400000 236003                    LDQ     -131072,DU
         2 000204   000000 756000 xsym               STQ     RPB_FLAG

     2207     1910    3   DOBTM:
     2208     1911    4                       IF BTMPA='0'B THEN DO; /* Write !BOOTIME                  */

   1911  2 000205   000000 234000 xsym  DOBTM        SZN     BTMPA
         2 000206   000222 604000 2                  TMI     DOBTM1

     2209     1912    4                             BTMPA='1'B;

   1912  2 000207   000000 756000 xsym               STQ     BTMPA

     2210     1913    4                             CALL WRITE_PATCH(ADDR(SBTM),8);

   1913  2 000210   000012 236000 3                  LDQ     10
         2 000211   200004 756100                    STQ     4,,AUTO
         2 000212   000001 236000 3                  LDQ     1
         2 000213   200007 756100                    STQ     7,,AUTO
         2 000214   200004 630500                    EPPR0   4,,AUTO
         2 000215   200006 450500                    STP0    6,,AUTO
         2 000216   200006 630500                    EPPR0   6,,AUTO
         2 000217   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000220   000000 701000 xent               TSX1    WRITE_PATCH
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:405  
         2 000221   000000 011000                    NOP     0

     2211     1914    4                           END;            /* THEN                               */

     2212     1915    3                         ELSE;
     2213     1916    3   DOBTM1:
     2214     1917    3                       CALL READ_PATCH(%WHOBTM,ADDR(POBUF),80);

   1917  2 000222   000003 236000 3     DOBTM1       LDQ     3
         2 000223   200004 756100                    STQ     4,,AUTO
         2 000224   000005 236000 3                  LDQ     5
         2 000225   200007 756100                    STQ     7,,AUTO
         2 000226   200004 630500                    EPPR0   4,,AUTO
         2 000227   200006 450500                    STP0    6,,AUTO
         2 000230   000013 236000 3                  LDQ     11
         2 000231   200005 756100                    STQ     5,,AUTO
         2 000232   200005 630500                    EPPR0   5,,AUTO
         2 000233   000021 631400 xsym               EPPR1   B_VECTNIL+17
         2 000234   000000 701000 xent               TSX1    READ_PATCH
         2 000235   000000 011000                    NOP     0

     2215     1918    4                       IF POBUF~='!EOD' THEN DO;

   1918  2 000236   040000 106400                    CMPC    fill='040'O
         2 000237   000000 000120 xsym               ADSC9   POBUF                    cn=0,n=80
         2 000240   000000 000004 1                  ADSC9   0                        cn=0,n=4
         2 000241   000255 600000 2                  TZE     DORPB3

     2216     1919    4                             CALL WRITE_PATCH(ADDR(POBUF),80);

   1919  2 000242   000003 236000 3                  LDQ     3
         2 000243   200004 756100                    STQ     4,,AUTO
         2 000244   000005 236000 3                  LDQ     5
         2 000245   200007 756100                    STQ     7,,AUTO
         2 000246   200004 630500                    EPPR0   4,,AUTO
         2 000247   200006 450500                    STP0    6,,AUTO
         2 000250   200006 630500                    EPPR0   6,,AUTO
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:406  
         2 000251   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000252   000000 701000 xent               TSX1    WRITE_PATCH
         2 000253   000000 011000                    NOP     0

     2217     1920    4                             GOTO DOBTM1;

   1920  2 000254   000222 710000 2                  TRA     DOBTM1

     2218     1921    4                           END;            /* THEN                               */
     2219     1922    3                         ELSE;
     2220     1923    3                     END;                  /* THEN                               */
     2221     1924    2               END;                        /* THEN                               */
     2222     1925    1             ELSE;
     2223     1926    1   DORPB3:
     2224     1927    1           IF VOFLG='1'B THEN RETURN;

   1927  2 000255   000000 234000 xsym  DORPB3       SZN     VOFLG
         2 000256   000260 605000 2                  TPL     s:1929

   1927  2 000257   000000 702200 xent               TSX2  ! X66_ARET

     2225     1928    1             ELSE;
     2226     1929    2           IF PTCHBF.NXTWA~=0 THEN DO;     /* Write out last buffer              */

   1929  2 000260   000000 235000 xsym               LDA     CP6UL
         2 000261   000314 600000 2                  TZE     DORPBCPB

     2227     1930    2                 PTCHDCW.TALLY=1024;

   1930  2 000262   002000 236007                    LDQ     1024,DL
         2 000263   000002 752003 0                  STCQ    WPTCH$,'03'O

     2228     1931    2                 CALL MINIQC_PL6(SYS_DPX,ADDR(PTCHDCW),,%FCNWDB,ADIR.PATCH.DA+ADIR.
              1931                          PATCH.SIZE) ALTRET(ER_WBUF);

   1931  2 000264   000175 236000 xsym               LDQ     ADIR+125
         2 000265   000176 036000 xsym               ADLQ    ADIR+126
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:407  
         2 000266   200005 756100                    STQ     5,,AUTO
         2 000267   000014 236000 3                  LDQ     12
         2 000270   200004 756100                    STQ     4,,AUTO
         2 000271   200005 235100                    LDA     5,,AUTO
         2 000272   200006 755100                    STA     6,,AUTO
         2 000273   200006 630500                    EPPR0   6,,AUTO
         2 000274   200013 450500                    STP0    11,,AUTO
         2 000275   000015 236000 3                  LDQ     13
         2 000276   200012 756100                    STQ     10,,AUTO
         2 000277   000001 236000 xsym               LDQ     B_VECTNIL+1
         2 000300   200011 756100                    STQ     9,,AUTO
         2 000301   200004 631500                    EPPR1   4,,AUTO
         2 000302   200010 451500                    STP1    8,,AUTO
         2 000303   000016 236000 3                  LDQ     14
         2 000304   200007 756100                    STQ     7,,AUTO
         2 000305   200007 630500                    EPPR0   7,,AUTO
         2 000306   000023 631400 xsym               EPPR1   B_VECTNIL+19
         2 000307   000000 701000 xent               TSX1    MINIQC_PL6
         2 000310   000373 702000 2                  TSX2    ER_WBUF

     2229     1932    2                 ADIR.PATCH.SIZE=ADIR.PATCH.SIZE+1; /* Update patch size         */

   1932  2 000311   000176 235000 xsym               LDA     ADIR+126
         2 000312   000001 035007                    ADLA    1,DL
         2 000313   000176 755000 xsym               STA     ADIR+126

     2230     1933    2               END;                        /* THEN                               */

     2231     1934    1   DORPBCPB:
     2232     1935    1           PTCHBF='0'B;

   1935  2 000314   010000 220003       DORPBCPB     LDX0    4096,DU
         2 000315   000040 100400                    MLR     fill='000'O
         2 000316   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         2 000317   000000 000010 xsym               ADSC9   CP6UL                    cn=0,n=*X0

     2233     1936        /* Read SAD, update SAD.PATCH, rewrite SAD */
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:408  
     2234     1937    1           SADDCWX.TALLY=LENGTHW(ADIR)+4;

   1937  2 000320   000364 236007                    LDQ     244,DL
         2 000321   000000 752003 0                  STCQ    SADX$,'03'O

     2235     1938    1           CALL MINIQC_PL6(SYS_DPX,ADDR(SADDCWX),,%FCNRDB,TOPDA) ALTRET(SADER);

   1938  2 000322   000017 236000 3                  LDQ     15
         2 000323   200004 756100                    STQ     4,,AUTO
         2 000324   000020 237000 3                  LDAQ    16
         2 000325   200010 757100                    STAQ    8,,AUTO
         2 000326   000001 236000 xsym               LDQ     B_VECTNIL+1
         2 000327   200007 756100                    STQ     7,,AUTO
         2 000330   200004 630500                    EPPR0   4,,AUTO
         2 000331   200006 450500                    STP0    6,,AUTO
         2 000332   000016 236000 3                  LDQ     14
         2 000333   200005 756100                    STQ     5,,AUTO
         2 000334   200005 630500                    EPPR0   5,,AUTO
         2 000335   000023 631400 xsym               EPPR1   B_VECTNIL+19
         2 000336   000000 701000 xent               TSX1    MINIQC_PL6
         2 000337   000372 702000 2                  TSX2    SADER

     2236     1939    1           RDIR.PATCH=ADIR.PATCH;

   1939  2 000340   000001 470400 0                  LDP0    PO$
         2 000341   000100 100400                    MLR     fill='000'O
         2 000342   000174 000020 xsym               ADSC9   ADIR+124                 cn=0,n=16
         2 000343   000174 000020                    ADSC9   124,,PR0                 cn=0,n=16

     2237     1940    1           CALL MINIQC_PL6(SYS_DPX,ADDR(SADDCWX),,%FCNWDB,TOPDA) ALTRET(SADER);

   1940  2 000344   000017 236000 3                  LDQ     15
         2 000345   200004 756100                    STQ     4,,AUTO
         2 000346   000022 237000 3                  LDAQ    18
         2 000347   200010 757100                    STAQ    8,,AUTO
         2 000350   000001 236000 xsym               LDQ     B_VECTNIL+1
         2 000351   200007 756100                    STQ     7,,AUTO
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:409  
         2 000352   200004 631500                    EPPR1   4,,AUTO
         2 000353   200006 451500                    STP1    6,,AUTO
         2 000354   000016 236000 3                  LDQ     14
         2 000355   200005 756100                    STQ     5,,AUTO
         2 000356   200005 630500                    EPPR0   5,,AUTO
         2 000357   000023 631400 xsym               EPPR1   B_VECTNIL+19
         2 000360   000000 701000 xent               TSX1    MINIQC_PL6
         2 000361   000372 702000 2                  TSX2    SADER

     2238     1941    1           IF MT2WISH~='0'B THEN CALL MINIQ_PL6(PAT2_INDX,0,0,%FCNUNL);

   1941  2 000362   000000 236000 xsym               LDQ     MT2WISH
         2 000363   770000 316003                    CANQ    -4096,DU
         2 000364   000371 600000 2                  TZE     s:1942

   1941  2 000365   000024 630400 3                  EPPR0   20
         2 000366   000022 631400 xsym               EPPR1   B_VECTNIL+18
         2 000367   000000 701000 xent               TSX1    MINIQ_PL6
         2 000370   000000 011000                    NOP     0

     2239     1942    1           RETURN;

   1942  2 000371   000000 702200 xent               TSX2  ! X66_ARET

     2240     1943    1   SADER:
     2241     1944    1           ALTRETURN;

   1944  2 000372   000000 702200 xent  SADER        TSX2  ! X66_AALT

     2242     1945    1   ER_WBUF:
     2243     1946    1           CALL ER_WPATCH;                 /* Err on writing patches; give up    */

   1946  2 000373   000002 631400 xsym  ER_WBUF      EPPR1   B_VECTNIL+2
         2 000374   000000 701000 xent               TSX1    ER_WPATCH
         2 000375   000000 011000                    NOP     0

     2244     1947    1   END DORPB;
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:410  

   1947  2 000376   000000 702200 xent               TSX2  ! X66_ARET
     2245     1948        %EOD;

PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:411  
--  Include file information  --

   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure DORPB.
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:412  

 **** Variables and constants ****

  ****  Section 000  Data  DORPB

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     1-0-0/w PTR         r     1 PO$                        2-0-0/w STRC        r     1 PTCHDCW
     0-0-0/w STRC        r     1 SADDCWX                    0-0-0/w PTR         r     1 SADX$
     7-0-0/c CHAR(8)     r     1 SBTM                       5-0-0/c CHAR(8)     r     1 SPLV
     3-0-0/c CHAR(8)     r     1 SRUM                       2-0-0/w PTR         r     1 WPTCH$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(8640)  r     1 ADIR                       0-0-0/b STRC(5)     r     1 ADPXF
     0-0-0/b BIT         r     1 BTMPA                      0-0-0/w CHAR(4)     r     1 CP6UL(0:1023)
     0-0-0/b BIT (6)     r     1 CRWISH                     0-0-0/b BIT (6)     r     1 MT2WISH
     0-0-0/b BIT (6)     r     1 MTWISH                     0-0-0/b STRC(3)     r     1 NF_FLG
     0-0-0/w UBIN        r     1 PAT2_INDX                  0-0-0/b BIT         r     1 PLVPA
     0-0-0/c CHAR(80)    r     1 POBUF                      0-0-0/w STRC(36864) r     1 PTCHBF
     0-0-0/b BIT         r     1 RPB_FLAG                   0-0-0/b BIT         r     1 RUMPA
     0-0-0/w UBIN        r     1 SYS_DPX                    0-0-0/w UBIN        r     1 TOPDA
     0-0-0/b BIT         r     1 VOFLG

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(8640)  r     1 RDIR


   Procedure DORPB requires 255 words for executable code.
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:413  
   Procedure DORPB requires 12 words of local(AUTO) storage.
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:414  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:415  
          MINI XREF LISTING

ADIR
      1295**DCL      1937--ASSIGN
ADIR.FW.ADIR
      1537**DCL      1538--REDEF
ADIR.MONID.M
      1497**DCL      1500--REDEF
ADIR.PATCH
      1481**DCL      1939>>ASSIGN
ADIR.PATCH.DA
      1483**DCL      1931>>CALL
ADIR.PATCH.SIZE
      1484**DCL      1931>>CALL     1932<<ASSIGN   1932>>ASSIGN
ADPXF.P
      1799**DCL      1872>>IF
BTMPA
      1834**DCL      1911>>IF       1912<<ASSIGN
CP6UL
      1838**DCL      1839--REDEF    1842--DCLINIT
CRWISH
      1831**DCL      1874>>IF       1891>>IF       1908>>IF
DOBTM1
      1917**LABEL    1920--GOTO
DOPLV1
      1900**LABEL    1903--GOTO
DORUM1
      1883**LABEL    1886--GOTO
ER_WBUF
      1946**LABEL    1931--CALLALT
ER_WPATCH
      1865**DCL-ENT  1946--CALL
MINIQC_PL6
      1864**DCL-ENT  1931--CALL     1938--CALL     1940--CALL
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:416  
MINIQ_PL6
      1866**DCL-ENT  1941--CALL
MT2WISH
      1829**DCL      1874>>IF       1891>>IF       1908>>IF       1941>>IF
MTWISH
      1828**DCL      1874>>IF       1891>>IF       1908>>IF
NF_FLG
      1802**DCL      1872>>IF
NF_FLG.S
      1805**DCL      1872>>IF
PAT2_INDX
      1830**DCL      1941<>CALL
PLVPA
      1833**DCL      1894>>IF       1895<<ASSIGN
PO$
      1837**DCL      1551--IMP-PTR  1939>>ASSIGN
POBUF
      1836**DCL      1809--DCLINIT  1837--DCLINIT  1883--CALL     1884>>IF       1885--CALL     1900--CALL
      1901>>IF       1902--CALL     1917--CALL     1918>>IF       1919--CALL
PTCHBF
      1839**DCL      1935<<ASSIGN
PTCHBF.NXTWA
      1840**DCL      1929>>IF
PTCHDCW
      1853**DCL      1931--CALL
PTCHDCW.TALLY
      1858**DCL      1930<<ASSIGN
RDIR.FW.RDIR
      1793**DCL      1794--REDEF
RDIR.MONID.M
      1753**DCL      1756--REDEF
RDIR.PATCH
      1737**DCL      1939<<ASSIGN
READ_PATCH
      1863**DCL-ENT  1883--CALL     1900--CALL     1917--CALL
RPB_FLAG
PL6.E3A0      #008=DORPB File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:417  
      1835**DCL      1881<<ASSIGN   1892<<ASSIGN   1909<<ASSIGN
RUMPA
      1832**DCL      1876>>IF       1877<<ASSIGN
SADDCWX
      1820**DCL      1938--CALL     1940--CALL
SADDCWX.TALLY
      1825**DCL      1937<<ASSIGN
SADER
      1944**LABEL    1938--CALLALT  1940--CALLALT
SADX$
      1809**DCL      1820--REDEF
SBTM
      1870**DCL      1913--CALL
SPLV
      1869**DCL      1896--CALL
SRUM
      1868**DCL      1878--CALL
SYS_DPX
      1808**DCL      1931<>CALL     1938<>CALL     1940<>CALL
TOPDA
      1807**DCL      1938<>CALL     1940<>CALL
VOFLG
      1806**DCL      1927>>IF
WPTCH$
      1842**DCL      1853--REDEF
WRITE_PATCH
      1862**DCL-ENT  1878--CALL     1885--CALL     1896--CALL     1902--CALL     1913--CALL     1919--CALL

PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:418  
     2246        1        /*T***********************************************************/
     2247        2        /*T*                                                         */
     2248        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     2249        4        /*T*                                                         */
     2250        5        /*T***********************************************************/
     2251        6        WRTFW:  PROC ALTRET;
     2252        7        /* This program writes FW on disk */
     2253        8        /* or through entry WRTDP writes PO info on disk */
     2254        9        %INCLUDE IS$MACROS;
     2255     1284        %DISKDIR(NAME=ADIR,STCLASS="SYMREF");
     2256     1540    1   DCL POBUF CHAR(4096) SYMREF;
     2257     1541    1   DCL PO$ PTR STATIC INIT(ADDR(POBUF));
     2258     1542        %DCW_STRUCT(NAME=PODCW,STCLASS="REDEF PO$");
     2259     1560    1   DCL S1000_FLG BIT(1) SYMREF;
     2260     1561        %AALS(STCLASS="BASED(AALS$)");          /* AARD LS                            */
     2261     3888    1   DCL AALS$ PTR SYMREF;
     2262     3889    1   DCL INFO$ PTR;
     2263     3890        %PTR_STRUCT(NAME=INFO_PTR,STCLASS="REDEF INFO$");
     2264     3908    1   DCL DUMMY$ PTR;
     2265     3909    1   DCL BUF CHAR(4096) BASED(INFO$);
     2266     3910    1   DCL LGTH SBIN WORD;
     2267     3911    1   DCL DCFWHDR$ PTR SYMREF;
     2268     3912    1   DCL SYS_DPX UBIN WORD SYMREF;
     2269     3913    1   DCL EDCIASK REMEMBER SYMREF;
     2270     3914    1   DCL HDRAAR BIT(1) SYMREF;
     2271     3915    1   DCL HDRMP14 BIT(1) SYMREF;
     2272     3916    1   DCL HDR$ PTR;
     2273     3917    1   DCL I UBIN WORD;
     2274     3918    1   DCL HDRDA UBIN WORD SYMREF;
     2275     3919    1   DCL NAVDA UBIN WORD SYMREF;
     2276     3920    1   DCL RT_CNT UBIN WORD ;
     2277     3921        %DIRHDR(NAME=BAS_HDR,STCLASS="BASED(HDR$)");
     2278     3932        /**/
     2279     3933    1   DCL TYPEC ENTRY(1);
     2280     3934    1   DCL HANG  ENTRY;
     2281     3935    1   DCL MINIQC_PL6 ENTRY(5) ALTRET;
     2282     3936        /**/
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:419  
     2283     3937        %TEXTC(N#=DPERRM,M#="' Error writing system disk .'");
     2284     3942        /**/
     2285     3943    2           IF S1000_FLG='1'B THEN DO;
     2286     3944    2                 ADIR.FW='0'B;
     2287     3945    2                 RETURN;
     2288     3946    2               END;                        /* THEN                               */
     2289     3947    1             ELSE;
     2290     3948    1           DUMMY$=ADDR(INFO$);             /* To be sure INFO$ is reloaded       */
     2291     3949    1           INFO_PTR='0'B;
     2292     3950    1           INFO_PTR.S_D_FIELD=%ALS_PO;
     2293     3951    2           DO I=0 TO %(FWHDR#-1);          /* Max FW headers                     */
     2294     3952    2             PODCW.TALLY=1024;
     2295     3953    2             AALS.PODESC.BASE=ADIR.FW.BASE(I)*4;
     2296     3954    2             ADIR.FW.DA(I)=NAVDA;
     2297     3955    2             LGTH=ADIR.FW.CS0SIZE(I)+ADIR.FW.MM0SIZE(I);
     2298     3956    2             IF DCFWHDR$=ADDR(ADIR.FW(I)) THEN ADIR.FW.INMEM(I)='0'B; /* Disk FW */
     2299     3957    2               ELSE ADIR.FW.INMEM(I)='1'B;
     2300     3958    2             HDRDA=ADIR.FW.DA(I);
     2301     3959    2   WRTFW1:
     2302     3960    2             IF LGTH<=0 THEN GOTO WRTFW2;
     2303     3961    2               ELSE;
     2304     3962    2             IF LGTH>1024 THEN;
     2305     3963    2               ELSE PODCW.TALLY=LGTH;
     2306     3964    2             LGTH=LGTH-1024;
     2307     3965    2             SUBSTR(POBUF,0,PODCW.TALLY*4)=BUF;
     2308     3966    2             CALL MINIQC_PL6(SYS_DPX,ADDR(PODCW),,%FCNWDB,HDRDA) ALTRET(WRTE);
     2309     3967    2             AALS.PODESC.BASE=AALS.PODESC.BASE+PODCW.TALLY*4;
     2310     3968    2             HDRDA=HDRDA+1;
     2311     3969    2             GOTO WRTFW1;
     2312     3970    2   WRTFW2:
     2313     3971    2             NAVDA=HDRDA;
     2314     3972    2           END;                            /* DO I=                              */
     2315     3973    1           RETURN;
     2316     3974    1   WRTE:
     2317     3975    1           CALL TYPEC(DPERRM);
     2318     3976    1           UNWIND TO EDCIASK;
     2319     3977    1   WRTDP:  ENTRY ALTRET;
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:420  
     2320     3978        /* Write PO info on disk */
     2321     3979    1           INFO_PTR='0'B;
     2322     3980    1           INFO_PTR.S_D_FIELD=%ALS_PO;
     2323     3981    1           HDR$=ADDR(HDRAAR);
     2324     3982    1   WRTDP0:
     2325     3983    1           AALS.PODESC.BASE=BAS_HDR.BASE*4;
     2326     3984    1           LGTH=BAS_HDR.SIZE;
     2327     3985    1           HDRDA=BAS_HDR.DA;
     2328     3986    1           PODCW.TALLY=1024;
     2329     3987    1   WRTDP1:
     2330     3988    1           IF LGTH<=0 THEN GOTO WRTDP2;
     2331     3989    1             ELSE;
     2332     3990    1           IF LGTH>1024 THEN;
     2333     3991    1             ELSE PODCW.TALLY=LGTH;
     2334     3992    1           LGTH=LGTH-1024;
     2335     3993    1           SUBSTR(POBUF,0,PODCW.TALLY*4)=BUF;
     2336     3994    1           CALL MINIQC_PL6(SYS_DPX,ADDR(PODCW),,%FCNWDB,HDRDA) ALTRET(WRTE);
     2337     3995    1           AALS.PODESC.BASE=AALS.PODESC.BASE+PODCW.TALLY*4;
     2338     3996    1           HDRDA=HDRDA+1;
     2339     3997    1           GOTO WRTDP1;
     2340     3998    1   WRTDP2:
     2341     3999    1           NAVDA=HDRDA;
     2342     4000    1           IF HDR$=ADDR(HDRMP14) THEN RETURN;
     2343     4001    1             ELSE;
     2344     4002    1           HDR$=PINCRW(HDR$,4);
     2345     4003    1           GOTO WRTDP0;
     2346     4004        /* Rewrite AARDVARK on disk */
     2347     4005    1   RWAARD: ENTRY ALTRET;
     2348     4006    1           INFO_PTR='0'B;
     2349     4007    1           INFO_PTR.S_D_FIELD=%ALS_PO;
     2350     4008    1           HDR$=ADDR(HDRAAR);
     2351     4009    1   WRTDPA0:
     2352     4010    1           AALS.PODESC.BASE=BAS_HDR.BASE*4;
     2353     4011    1           LGTH=BAS_HDR.SIZE;
     2354     4012    1           HDRDA=BAS_HDR.DA;
     2355     4013    1           PODCW.TALLY=1024;
     2356     4014    1   WRTDPA1:
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:421  
     2357     4015    1           IF LGTH<=0 THEN GOTO WRTDPA2;
     2358     4016    1             ELSE;
     2359     4017    1           IF LGTH>1024 THEN;
     2360     4018    1             ELSE PODCW.TALLY=LGTH;
     2361     4019    1           RT_CNT = 0;
     2362     4020    1           LGTH=LGTH-1024;
     2363     4021    1           SUBSTR(POBUF,0,PODCW.TALLY*4)=BUF;
     2364     4022    1   RETRY_IO:
     2365     4023    1           CALL MINIQC_PL6(SYS_DPX,ADDR(PODCW),,%FCNWDB,HDRDA)
     2366     4024    2             WHENALTRETURN DO;
     2367     4025    2                 RT_CNT = RT_CNT + 1;
     2368     4026    2                 IF RT_CNT > 4 THEN
     2369     4027    2                   ALTRETURN;
     2370     4028    2                   ELSE
     2371     4029    2                   GOTO RETRY_IO;
     2372     4030    2               END;
     2373     4031    1           AALS.PODESC.BASE=AALS.PODESC.BASE+PODCW.TALLY*4;
     2374     4032    1           HDRDA=HDRDA+1;
     2375     4033    1           GOTO WRTDPA1;
     2376     4034    1   WRTDPA2:
     2377     4035    1           RETURN;
     2378     4036    1   END WRTFW;
     2379     4037        %EOD;

PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:422  
--  Include file information  --

   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure WRTFW.

   Procedure WRTFW requires 236 words for executable code.
   Procedure WRTFW requires 16 words of local(AUTO) storage.

PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:423  

 Object Unit name= WRTFW                                      File name= ISI$FIXSYST.:E05TOU
 UTS= JUL 29 '97 22:51:21.44 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none     9     11  WRTFW
    1   Proc  even  none   236    354  WRTFW
    2  RoData even  none     8     10  WRTFW

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes    yes     yes      Std        0  WRTFW
     1    143          yes     yes      Std        0  WRTDP
     1    250          yes     yes      Std        0  RWAARD

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      1  DPERRM
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:424  

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       5 MINIQC_PL6
         yes           Std       1 TYPEC
                       nStd      0 X66_AUTO_0
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AUNWIND
                       nStd      0 X66_AALT

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ADIR                                  POBUF                                 S1000_FLG
     AALS$                                 DCFWHDR$                              SYS_DPX
     EDCIASK                               HDRAAR                                HDRMP14
     HDRDA                                 NAVDA                                 B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:425  


     2246        1        /*T***********************************************************/
     2247        2        /*T*                                                         */
     2248        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     2249        4        /*T*                                                         */
     2250        5        /*T***********************************************************/
     2251        6        WRTFW:  PROC ALTRET;

      6  1 000000   000000 700200 xent  WRTFW        TSX0  ! X66_AUTO_0
         1 000001   000020 000000                    ZERO    16,0

     2252        7        /* This program writes FW on disk */
     2253        8        /* or through entry WRTDP writes PO info on disk */
     2254        9        %INCLUDE IS$MACROS;
     2255     1284        %DISKDIR(NAME=ADIR,STCLASS="SYMREF");
     2256     1540    1   DCL POBUF CHAR(4096) SYMREF;
     2257     1541    1   DCL PO$ PTR STATIC INIT(ADDR(POBUF));
     2258     1542        %DCW_STRUCT(NAME=PODCW,STCLASS="REDEF PO$");
     2259     1560    1   DCL S1000_FLG BIT(1) SYMREF;
     2260     1561        %AALS(STCLASS="BASED(AALS$)");          /* AARD LS                            */
     2261     3888    1   DCL AALS$ PTR SYMREF;
     2262     3889    1   DCL INFO$ PTR;
     2263     3890        %PTR_STRUCT(NAME=INFO_PTR,STCLASS="REDEF INFO$");
     2264     3908    1   DCL DUMMY$ PTR;
     2265     3909    1   DCL BUF CHAR(4096) BASED(INFO$);
     2266     3910    1   DCL LGTH SBIN WORD;
     2267     3911    1   DCL DCFWHDR$ PTR SYMREF;
     2268     3912    1   DCL SYS_DPX UBIN WORD SYMREF;
     2269     3913    1   DCL EDCIASK REMEMBER SYMREF;
     2270     3914    1   DCL HDRAAR BIT(1) SYMREF;
     2271     3915    1   DCL HDRMP14 BIT(1) SYMREF;
     2272     3916    1   DCL HDR$ PTR;
     2273     3917    1   DCL I UBIN WORD;
     2274     3918    1   DCL HDRDA UBIN WORD SYMREF;
     2275     3919    1   DCL NAVDA UBIN WORD SYMREF;
     2276     3920    1   DCL RT_CNT UBIN WORD ;
     2277     3921        %DIRHDR(NAME=BAS_HDR,STCLASS="BASED(HDR$)");
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:426  
     2278     3932        /**/
     2279     3933    1   DCL TYPEC ENTRY(1);
     2280     3934    1   DCL HANG  ENTRY;
     2281     3935    1   DCL MINIQC_PL6 ENTRY(5) ALTRET;
     2282     3936        /**/
     2283     3937        %TEXTC(N#=DPERRM,M#="' Error writing system disk .'");
     2284     3942        /**/
     2285     3943    2           IF S1000_FLG='1'B THEN DO;

   3943  1 000002   000000 234000 xsym               SZN     S1000_FLG
         1 000003   000010 605000 1                  TPL     s:3948

     2286     3944    2                 ADIR.FW='0'B;

   3944  1 000004   000000 100400                    MLR     fill='000'O
         1 000005   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         1 000006   000240 000500 xsym               ADSC9   ADIR+160                 cn=0,n=320

     2287     3945    2                 RETURN;

   3945  1 000007   000000 702200 xent               TSX2  ! X66_ARET

     2288     3946    2               END;                        /* THEN                               */
     2289     3947    1             ELSE;
     2290     3948    1           DUMMY$=ADDR(INFO$);             /* To be sure INFO$ is reloaded       */

   3948  1 000010   200003 630500                    EPPR0   INFO$,,AUTO
         1 000011   200004 450500                    STP0    DUMMY$,,AUTO

     2291     3949    1           INFO_PTR='0'B;

   3949  1 000012   200003 450100                    STZ     INFO$,,AUTO

     2292     3950    1           INFO_PTR.S_D_FIELD=%ALS_PO;

   3950  1 000013   006006 236007                    LDQ     3078,DL
         1 000014   200003 752103                    STCQ    INFO$,'03'O,AUTO
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:427  

     2293     3951    2           DO I=0 TO %(FWHDR#-1);          /* Max FW headers                     */

   3951  1 000015   200007 450100                    STZ     I,,AUTO

     2294     3952    2             PODCW.TALLY=1024;

   3952  1 000016   002000 236007                    LDQ     1024,DL
         1 000017   000000 752003 0                  STCQ    PO$,'03'O

     2295     3953    2             AALS.PODESC.BASE=ADIR.FW.BASE(I)*4;

   3953  1 000020   200007 235100                    LDA     I,,AUTO
         1 000021   000002 735000                    ALS     2
         1 000022   000240 236005 xsym               LDQ     ADIR+160,AL
         1 000023   000002 736000                    QLS     2
         1 000024   000000 470400 xsym               LDP0    AALS$
         1 000025   000015 756100                    STQ     13,,PR0

     2296     3954    2             ADIR.FW.DA(I)=NAVDA;

   3954  1 000026   000000 236000 xsym               LDQ     NAVDA
         1 000027   000241 756005 xsym               STQ     ADIR+161,AL

     2297     3955    2             LGTH=ADIR.FW.CS0SIZE(I)+ADIR.FW.MM0SIZE(I);

   3955  1 000030   000242 236005 xsym               LDQ     ADIR+162,AL
         1 000031   777777 376007                    ANQ     -1,DL
         1 000032   200012 756100                    STQ     RT_CNT+2,,AUTO
         1 000033   000242 236005 xsym               LDQ     ADIR+162,AL
         1 000034   000022 772000                    QRL     18
         1 000035   200012 036100                    ADLQ    RT_CNT+2,,AUTO
         1 000036   200005 756100                    STQ     LGTH,,AUTO

     2298     3956    2             IF DCFWHDR$=ADDR(ADIR.FW(I)) THEN ADIR.FW.INMEM(I)='0'B; /* Disk FW */

   3956  1 000037   200007 236100                    LDQ     I,,AUTO
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:428  
         1 000040   000024 736000                    QLS     20
         1 000041   000000 036000 2                  ADLQ    0
         1 000042   000000 116000 xsym               CMPQ    DCFWHDR$
         1 000043   000047 601000 1                  TNZ     s:3957

   3956  1 000044   000031 236000 xsym               LDQ     B_VECTNIL+25
         1 000045   000240 356005 xsym               ANSQ    ADIR+160,AL
         1 000046   000051 710000 1                  TRA     s:3958

     2299     3957    2               ELSE ADIR.FW.INMEM(I)='1'B;

   3957  1 000047   400000 236003                    LDQ     -131072,DU
         1 000050   000240 256005 xsym               ORSQ    ADIR+160,AL

     2300     3958    2             HDRDA=ADIR.FW.DA(I);

   3958  1 000051   000241 235005 xsym               LDA     ADIR+161,AL
         1 000052   000000 755000 xsym               STA     HDRDA

     2301     3959    2   WRTFW1:
     2302     3960    2             IF LGTH<=0 THEN GOTO WRTFW2;

   3960  1 000053   200005 235100       WRTFW1       LDA     LGTH,,AUTO
         1 000054   000124 604400 1                  TMOZ    WRTFW2

     2303     3961    2               ELSE;
     2304     3962    2             IF LGTH>1024 THEN;

   3962  1 000055   002000 115007                    CMPA    1024,DL
         1 000056   000061 605400 1                  TPNZ    s:3964

     2305     3963    2               ELSE PODCW.TALLY=LGTH;

   3963  1 000057   200005 236100                    LDQ     LGTH,,AUTO
         1 000060   000000 752003 0                  STCQ    PO$,'03'O

     2306     3964    2             LGTH=LGTH-1024;
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:429  

   3964  1 000061   002000 336007                    LCQ     1024,DL
         1 000062   200005 056100                    ASQ     LGTH,,AUTO

     2307     3965    2             SUBSTR(POBUF,0,PODCW.TALLY*4)=BUF;

   3965  1 000063   000000 236000 0                  LDQ     PO$
         1 000064   000002 736000                    QLS     2
         1 000065   037774 376007                    ANQ     16380,DL
         1 000066   200003 470500                    LDP0    INFO$,,AUTO
         1 000067   010000 220003                    LDX0    4096,DU
         1 000070   000000 621006                    EAX1    0,QL
         1 000071   040040 100540                    MLR     fill='040'O
         1 000072   000000 000010                    ADSC9   0,,PR0                   cn=0,n=*X0
         1 000073   000000 000011 xsym               ADSC9   POBUF                    cn=0,n=*X1

     2308     3966    2             CALL MINIQC_PL6(SYS_DPX,ADDR(PODCW),,%FCNWDB,HDRDA) ALTRET(WRTE);

   3966  1 000074   000001 236000 2                  LDQ     1
         1 000075   200012 756100                    STQ     RT_CNT+2,,AUTO
         1 000076   000002 237000 2                  LDAQ    2
         1 000077   200016 757100                    STAQ    RT_CNT+6,,AUTO
         1 000100   000001 236000 xsym               LDQ     B_VECTNIL+1
         1 000101   200015 756100                    STQ     RT_CNT+5,,AUTO
         1 000102   200012 631500                    EPPR1   RT_CNT+2,,AUTO
         1 000103   200014 451500                    STP1    RT_CNT+4,,AUTO
         1 000104   000004 236000 2                  LDQ     4
         1 000105   200013 756100                    STQ     RT_CNT+3,,AUTO
         1 000106   200013 630500                    EPPR0   RT_CNT+3,,AUTO
         1 000107   000023 631400 xsym               EPPR1   B_VECTNIL+19
         1 000110   000000 701000 xent               TSX1    MINIQC_PL6
         1 000111   000134 702000 1                  TSX2    WRTE

     2309     3967    2             AALS.PODESC.BASE=AALS.PODESC.BASE+PODCW.TALLY*4;

   3967  1 000112   000000 470400 xsym               LDP0    AALS$
         1 000113   000000 236000 0                  LDQ     PO$
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:430  
         1 000114   000002 736000                    QLS     2
         1 000115   037774 376007                    ANQ     16380,DL
         1 000116   000015 036100                    ADLQ    13,,PR0
         1 000117   000015 756100                    STQ     13,,PR0

     2310     3968    2             HDRDA=HDRDA+1;

   3968  1 000120   000000 235000 xsym               LDA     HDRDA
         1 000121   000001 035007                    ADLA    1,DL
         1 000122   000000 755000 xsym               STA     HDRDA

     2311     3969    2             GOTO WRTFW1;

   3969  1 000123   000053 710000 1                  TRA     WRTFW1

     2312     3970    2   WRTFW2:
     2313     3971    2             NAVDA=HDRDA;

   3971  1 000124   000000 236000 xsym  WRTFW2       LDQ     HDRDA
         1 000125   000000 756000 xsym               STQ     NAVDA

     2314     3972    2           END;                            /* DO I=                              */

   3972  1 000126   200007 235100                    LDA     I,,AUTO
         1 000127   000001 035007                    ADLA    1,DL
         1 000130   200007 755100                    STA     I,,AUTO
         1 000131   000024 115007                    CMPA    20,DL
         1 000132   000016 602000 1                  TNC     s:3952

     2315     3973    1           RETURN;

   3973  1 000133   000000 702200 xent               TSX2  ! X66_ARET

     2316     3974    1   WRTE:
     2317     3975    1           CALL TYPEC(DPERRM);

   3975  1 000134   000005 630400 2     WRTE         EPPR0   5
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:431  
         1 000135   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000136   000000 701000 xent               TSX1    TYPEC
         1 000137   000000 011000                    NOP     0

     2318     3976    1           UNWIND TO EDCIASK;

   3976  1 000140   000000 237200 xsym               LDAQ  ! EDCIASK
         1 000141   000000 700200 xent               TSX0  ! X66_AUNWIND
         1 000142   000000 000200                    ZERO    0,128

     2319     3977    1   WRTDP:  ENTRY ALTRET;

   3977  1 000143   000000 700200 xent  WRTDP        TSX0  ! X66_AUTO_0
         1 000144   000020 000000                    ZERO    16,0

     2320     3978        /* Write PO info on disk */
     2321     3979    1           INFO_PTR='0'B;

   3979  1 000145   200003 450100                    STZ     INFO$,,AUTO

     2322     3980    1           INFO_PTR.S_D_FIELD=%ALS_PO;

   3980  1 000146   006006 236007                    LDQ     3078,DL
         1 000147   200003 752103                    STCQ    INFO$,'03'O,AUTO

     2323     3981    1           HDR$=ADDR(HDRAAR);

   3981  1 000150   000006 236000 2                  LDQ     6
         1 000151   200006 756100                    STQ     HDR$,,AUTO

     2324     3982    1   WRTDP0:
     2325     3983    1           AALS.PODESC.BASE=BAS_HDR.BASE*4;

   3983  1 000152   200006 470500       WRTDP0       LDP0    HDR$,,AUTO
         1 000153   000000 471400 xsym               LDP1    AALS$
         1 000154   000000 235100                    LDA     0,,PR0
         1 000155   000002 735000                    ALS     2
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:432  
         1 000156   100015 755100                    STA     13,,PR1

     2326     3984    1           LGTH=BAS_HDR.SIZE;

   3984  1 000157   000002 235100                    LDA     2,,PR0
         1 000160   200005 755100                    STA     LGTH,,AUTO

     2327     3985    1           HDRDA=BAS_HDR.DA;

   3985  1 000161   000001 235100                    LDA     1,,PR0
         1 000162   000000 755000 xsym               STA     HDRDA

     2328     3986    1           PODCW.TALLY=1024;

   3986  1 000163   002000 236007                    LDQ     1024,DL
         1 000164   000000 752003 0                  STCQ    PO$,'03'O

     2329     3987    1   WRTDP1:
     2330     3988    1           IF LGTH<=0 THEN GOTO WRTDP2;

   3988  1 000165   200005 235100       WRTDP1       LDA     LGTH,,AUTO
         1 000166   000236 604400 1                  TMOZ    WRTDP2

     2331     3989    1             ELSE;
     2332     3990    1           IF LGTH>1024 THEN;

   3990  1 000167   002000 115007                    CMPA    1024,DL
         1 000170   000173 605400 1                  TPNZ    s:3992

     2333     3991    1             ELSE PODCW.TALLY=LGTH;

   3991  1 000171   200005 236100                    LDQ     LGTH,,AUTO
         1 000172   000000 752003 0                  STCQ    PO$,'03'O

     2334     3992    1           LGTH=LGTH-1024;

   3992  1 000173   002000 336007                    LCQ     1024,DL
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:433  
         1 000174   200005 056100                    ASQ     LGTH,,AUTO

     2335     3993    1           SUBSTR(POBUF,0,PODCW.TALLY*4)=BUF;

   3993  1 000175   000000 236000 0                  LDQ     PO$
         1 000176   000002 736000                    QLS     2
         1 000177   037774 376007                    ANQ     16380,DL
         1 000200   200003 470500                    LDP0    INFO$,,AUTO
         1 000201   010000 220003                    LDX0    4096,DU
         1 000202   000000 621006                    EAX1    0,QL
         1 000203   040040 100540                    MLR     fill='040'O
         1 000204   000000 000010                    ADSC9   0,,PR0                   cn=0,n=*X0
         1 000205   000000 000011 xsym               ADSC9   POBUF                    cn=0,n=*X1

     2336     3994    1           CALL MINIQC_PL6(SYS_DPX,ADDR(PODCW),,%FCNWDB,HDRDA) ALTRET(WRTE);

   3994  1 000206   000001 236000 2                  LDQ     1
         1 000207   200012 756100                    STQ     RT_CNT+2,,AUTO
         1 000210   000002 237000 2                  LDAQ    2
         1 000211   200016 757100                    STAQ    RT_CNT+6,,AUTO
         1 000212   000001 236000 xsym               LDQ     B_VECTNIL+1
         1 000213   200015 756100                    STQ     RT_CNT+5,,AUTO
         1 000214   200012 631500                    EPPR1   RT_CNT+2,,AUTO
         1 000215   200014 451500                    STP1    RT_CNT+4,,AUTO
         1 000216   000004 236000 2                  LDQ     4
         1 000217   200013 756100                    STQ     RT_CNT+3,,AUTO
         1 000220   200013 630500                    EPPR0   RT_CNT+3,,AUTO
         1 000221   000023 631400 xsym               EPPR1   B_VECTNIL+19
         1 000222   000000 701000 xent               TSX1    MINIQC_PL6
         1 000223   000134 702000 1                  TSX2    WRTE

     2337     3995    1           AALS.PODESC.BASE=AALS.PODESC.BASE+PODCW.TALLY*4;

   3995  1 000224   000000 470400 xsym               LDP0    AALS$
         1 000225   000000 236000 0                  LDQ     PO$
         1 000226   000002 736000                    QLS     2
         1 000227   037774 376007                    ANQ     16380,DL
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:434  
         1 000230   000015 036100                    ADLQ    13,,PR0
         1 000231   000015 756100                    STQ     13,,PR0

     2338     3996    1           HDRDA=HDRDA+1;

   3996  1 000232   000000 235000 xsym               LDA     HDRDA
         1 000233   000001 035007                    ADLA    1,DL
         1 000234   000000 755000 xsym               STA     HDRDA

     2339     3997    1           GOTO WRTDP1;

   3997  1 000235   000165 710000 1                  TRA     WRTDP1

     2340     3998    1   WRTDP2:
     2341     3999    1           NAVDA=HDRDA;

   3999  1 000236   000000 236000 xsym  WRTDP2       LDQ     HDRDA
         1 000237   000000 756000 xsym               STQ     NAVDA

     2342     4000    1           IF HDR$=ADDR(HDRMP14) THEN RETURN;

   4000  1 000240   000007 236000 2                  LDQ     7
         1 000241   200006 116100                    CMPQ    HDR$,,AUTO
         1 000242   000244 601000 1                  TNZ     s:4002

   4000  1 000243   000000 702200 xent               TSX2  ! X66_ARET

     2343     4001    1             ELSE;
     2344     4002    1           HDR$=PINCRW(HDR$,4);

   4002  1 000244   200006 236100                    LDQ     HDR$,,AUTO
         1 000245   000004 036003                    ADLQ    4,DU
         1 000246   200006 756100                    STQ     HDR$,,AUTO

     2345     4003    1           GOTO WRTDP0;

   4003  1 000247   000152 710000 1                  TRA     WRTDP0
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:435  

     2346     4004        /* Rewrite AARDVARK on disk */
     2347     4005    1   RWAARD: ENTRY ALTRET;

   4005  1 000250   000000 700200 xent  RWAARD       TSX0  ! X66_AUTO_0
         1 000251   000020 000000                    ZERO    16,0

     2348     4006    1           INFO_PTR='0'B;

   4006  1 000252   200003 450100                    STZ     INFO$,,AUTO

     2349     4007    1           INFO_PTR.S_D_FIELD=%ALS_PO;

   4007  1 000253   006006 236007                    LDQ     3078,DL
         1 000254   200003 752103                    STCQ    INFO$,'03'O,AUTO

     2350     4008    1           HDR$=ADDR(HDRAAR);

   4008  1 000255   000006 236000 2                  LDQ     6
         1 000256   200006 756100                    STQ     HDR$,,AUTO

     2351     4009    1   WRTDPA0:
     2352     4010    1           AALS.PODESC.BASE=BAS_HDR.BASE*4;

   4010  1 000257   200006 470500       WRTDPA0      LDP0    HDR$,,AUTO
         1 000260   000000 471400 xsym               LDP1    AALS$
         1 000261   000000 235100                    LDA     0,,PR0
         1 000262   000002 735000                    ALS     2
         1 000263   100015 755100                    STA     13,,PR1

     2353     4011    1           LGTH=BAS_HDR.SIZE;

   4011  1 000264   000002 235100                    LDA     2,,PR0
         1 000265   200005 755100                    STA     LGTH,,AUTO

     2354     4012    1           HDRDA=BAS_HDR.DA;

PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:436  
   4012  1 000266   000001 235100                    LDA     1,,PR0
         1 000267   000000 755000 xsym               STA     HDRDA

     2355     4013    1           PODCW.TALLY=1024;

   4013  1 000270   002000 236007                    LDQ     1024,DL
         1 000271   000000 752003 0                  STCQ    PO$,'03'O

     2356     4014    1   WRTDPA1:
     2357     4015    1           IF LGTH<=0 THEN GOTO WRTDPA2;

   4015  1 000272   200005 235100       WRTDPA1      LDA     LGTH,,AUTO
         1 000273   000353 604400 1                  TMOZ    WRTDPA2

     2358     4016    1             ELSE;
     2359     4017    1           IF LGTH>1024 THEN;

   4017  1 000274   002000 115007                    CMPA    1024,DL
         1 000275   000300 605400 1                  TPNZ    s:4019

     2360     4018    1             ELSE PODCW.TALLY=LGTH;

   4018  1 000276   200005 236100                    LDQ     LGTH,,AUTO
         1 000277   000000 752003 0                  STCQ    PO$,'03'O

     2361     4019    1           RT_CNT = 0;

   4019  1 000300   200010 450100                    STZ     RT_CNT,,AUTO

     2362     4020    1           LGTH=LGTH-1024;

   4020  1 000301   002000 336007                    LCQ     1024,DL
         1 000302   200005 056100                    ASQ     LGTH,,AUTO

     2363     4021    1           SUBSTR(POBUF,0,PODCW.TALLY*4)=BUF;

   4021  1 000303   000000 236000 0                  LDQ     PO$
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:437  
         1 000304   000002 736000                    QLS     2
         1 000305   037774 376007                    ANQ     16380,DL
         1 000306   200003 470500                    LDP0    INFO$,,AUTO
         1 000307   010000 220003                    LDX0    4096,DU
         1 000310   000000 621006                    EAX1    0,QL
         1 000311   040040 100540                    MLR     fill='040'O
         1 000312   000000 000010                    ADSC9   0,,PR0                   cn=0,n=*X0
         1 000313   000000 000011 xsym               ADSC9   POBUF                    cn=0,n=*X1

     2364     4022    1   RETRY_IO:
     2365     4023    1           CALL MINIQC_PL6(SYS_DPX,ADDR(PODCW),,%FCNWDB,HDRDA)

   4023  1 000314   000001 236000 2     RETRY_IO     LDQ     1
         1 000315   200012 756100                    STQ     RT_CNT+2,,AUTO
         1 000316   000002 237000 2                  LDAQ    2
         1 000317   200016 757100                    STAQ    RT_CNT+6,,AUTO
         1 000320   000001 236000 xsym               LDQ     B_VECTNIL+1
         1 000321   200015 756100                    STQ     RT_CNT+5,,AUTO
         1 000322   200012 630500                    EPPR0   RT_CNT+2,,AUTO
         1 000323   200014 450500                    STP0    RT_CNT+4,,AUTO
         1 000324   000004 236000 2                  LDQ     4
         1 000325   200013 756100                    STQ     RT_CNT+3,,AUTO
         1 000326   200013 630500                    EPPR0   RT_CNT+3,,AUTO
         1 000327   000023 631400 xsym               EPPR1   B_VECTNIL+19
         1 000330   000000 701000 xent               TSX1    MINIQC_PL6
         1 000331   000333 702000 1                  TSX2    s:4025
         1 000332   000341 710000 1                  TRA     s:4031

     2366     4024    2             WHENALTRETURN DO;

     2367     4025    2                 RT_CNT = RT_CNT + 1;

   4025  1 000333   200010 235100                    LDA     RT_CNT,,AUTO
         1 000334   000001 035007                    ADLA    1,DL
         1 000335   200010 755100                    STA     RT_CNT,,AUTO

     2368     4026    2                 IF RT_CNT > 4 THEN
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:438  

   4026  1 000336   000005 115007                    CMPA    5,DL
         1 000337   000314 602000 1                  TNC     RETRY_IO

     2369     4027    2                   ALTRETURN;

   4027  1 000340   000000 702200 xent               TSX2  ! X66_AALT

     2370     4028    2                   ELSE
     2371     4029    2                   GOTO RETRY_IO;
     2372     4030    2               END;
     2373     4031    1           AALS.PODESC.BASE=AALS.PODESC.BASE+PODCW.TALLY*4;

   4031  1 000341   000000 470400 xsym               LDP0    AALS$
         1 000342   000000 236000 0                  LDQ     PO$
         1 000343   000002 736000                    QLS     2
         1 000344   037774 376007                    ANQ     16380,DL
         1 000345   000015 036100                    ADLQ    13,,PR0
         1 000346   000015 756100                    STQ     13,,PR0

     2374     4032    1           HDRDA=HDRDA+1;

   4032  1 000347   000000 235000 xsym               LDA     HDRDA
         1 000350   000001 035007                    ADLA    1,DL
         1 000351   000000 755000 xsym               STA     HDRDA

     2375     4033    1           GOTO WRTDPA1;

   4033  1 000352   000272 710000 1                  TRA     WRTDPA1

     2376     4034    1   WRTDPA2:
     2377     4035    1           RETURN;

   4035  1 000353   000000 702200 xent  WRTDPA2      TSX2  ! X66_ARET
     2378     4036    1   END WRTFW;
     2379     4037        %EOD;

PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:439  
--  Include file information  --

   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure WRTFW.
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:440  

 **** Variables and constants ****

  ****  Section 000  Data  WRTFW

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     1-0-0/w STRC(288)   r     1 DPERRM                     0-0-0/w PTR         r     1 PO$
     0-0-0/w STRC        r     1 PODCW

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 DUMMY$                     6-0-0/w PTR         r     1 HDR$
     7-0-0/w UBIN        r     1 I                          3-0-0/w PTR         r     1 INFO$
     3-0-0/w STRC        r     1 INFO_PTR                   5-0-0/w SBIN        r     1 LGTH
    10-0-0/w UBIN        r     1 RT_CNT

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 AALS$                      0-0-0/w STRC(8640)  r     1 ADIR
     0-0-0/w PTR         r     1 DCFWHDR$                   0-0-0/d REMB        r     1 EDCIASK
     0-0-0/b BIT         r     1 HDRAAR                     0-0-0/w UBIN        r     1 HDRDA
     0-0-0/b BIT         r     1 HDRMP14                    0-0-0/w UBIN        r     1 NAVDA
     0-0-0/c CHAR(4096)  r     1 POBUF                      0-0-0/b BIT         r     1 S1000_FLG
     0-0-0/w UBIN        r     1 SYS_DPX

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:441  
     0-0-0/d STRC(7560)  r     1 AALS                       0-0-0/w STRC(144)   r     1 BAS_HDR
     0-0-0/c CHAR(4096)  r     1 BUF


   Procedure WRTFW requires 236 words for executable code.
   Procedure WRTFW requires 16 words of local(AUTO) storage.
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:442  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:443  
          MINI XREF LISTING

AALS.PODESC.BASE
      1724**DCL      3953<<ASSIGN   3967<<ASSIGN   3967>>ASSIGN   3983<<ASSIGN   3995<<ASSIGN   3995>>ASSIGN
      4010<<ASSIGN   4031<<ASSIGN   4031>>ASSIGN
AALS$
      3888**DCL      1572--IMP-PTR  3953>>ASSIGN   3967>>ASSIGN   3967>>ASSIGN   3983>>ASSIGN   3995>>ASSIGN
      3995>>ASSIGN   4010>>ASSIGN   4031>>ASSIGN   4031>>ASSIGN
ADIR.FW
      1531**DCL      3944<<ASSIGN   3956--IF
ADIR.FW.ADIR
      1537**DCL      1538--REDEF
ADIR.FW.BASE
      1533**DCL      3953>>ASSIGN
ADIR.FW.CS0SIZE
      1535**DCL      3955>>ASSIGN
ADIR.FW.DA
      1534**DCL      3954<<ASSIGN   3958>>ASSIGN
ADIR.FW.INMEM
      1532**DCL      3956<<ASSIGN   3957<<ASSIGN
ADIR.FW.MM0SIZE
      1536**DCL      3955>>ASSIGN
ADIR.MONID.M
      1497**DCL      1500--REDEF
BAS_HDR.BASE
      3923**DCL      3983>>ASSIGN   4010>>ASSIGN
BAS_HDR.DA
      3924**DCL      3925--REDEF    3985>>ASSIGN   4012>>ASSIGN
BAS_HDR.SIZE
      3928**DCL      3984>>ASSIGN   4011>>ASSIGN
BUF
      3909**DCL      3965>>ASSIGN   3993>>ASSIGN   4021>>ASSIGN
DCFWHDR$
      3911**DCL      3956>>IF
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:444  
DPERRM
      3938**DCL      3975<>CALL
DUMMY$
      3908**DCL      3948<<ASSIGN
EDCIASK
      3913**DCL      3976>>UNWIND
HDR$
      3916**DCL      3922--IMP-PTR  3981<<ASSIGN   3983>>ASSIGN   3984>>ASSIGN   3985>>ASSIGN   4000>>IF
      4002<<ASSIGN   4002>>ASSIGN   4008<<ASSIGN   4010>>ASSIGN   4011>>ASSIGN   4012>>ASSIGN
HDRAAR
      3914**DCL      3981--ASSIGN   4008--ASSIGN
HDRDA
      3918**DCL      3958<<ASSIGN   3966<>CALL     3968<<ASSIGN   3968>>ASSIGN   3971>>ASSIGN   3985<<ASSIGN
      3994<>CALL     3996<<ASSIGN   3996>>ASSIGN   3999>>ASSIGN   4012<<ASSIGN   4023<>CALL     4032<<ASSIGN
      4032>>ASSIGN
HDRMP14
      3915**DCL      4000--IF
I
      3917**DCL      3951<<DOINDEX  3953>>ASSIGN   3954>>ASSIGN   3955>>ASSIGN   3955>>ASSIGN   3956>>IF
      3956>>ASSIGN   3957>>ASSIGN   3958>>ASSIGN
INFO$
      3889**DCL      3901--REDEF    3909--IMP-PTR  3948--ASSIGN   3965>>ASSIGN   3993>>ASSIGN   4021>>ASSIGN
INFO_PTR
      3901**DCL      3949<<ASSIGN   3979<<ASSIGN   4006<<ASSIGN
INFO_PTR.S_D_FIELD
      3905**DCL      3950<<ASSIGN   3980<<ASSIGN   4007<<ASSIGN
LGTH
      3910**DCL      3955<<ASSIGN   3960>>IF       3962>>IF       3963>>ASSIGN   3964<<ASSIGN   3964>>ASSIGN
      3984<<ASSIGN   3988>>IF       3990>>IF       3991>>ASSIGN   3992<<ASSIGN   3992>>ASSIGN   4011<<ASSIGN
      4015>>IF       4017>>IF       4018>>ASSIGN   4020<<ASSIGN   4020>>ASSIGN
MINIQC_PL6
      3935**DCL-ENT  3966--CALL     3994--CALL     4023--CALL
NAVDA
      3919**DCL      3954>>ASSIGN   3971<<ASSIGN   3999<<ASSIGN
PO$
      1541**DCL      1552--REDEF
PL6.E3A0      #009=WRTFW File=ISI$FIXSYST.:E05TSI                                TUE 07/29/97 22:51 Page:445  
POBUF
      1540**DCL      1541--DCLINIT  3965<<ASSIGN   3993<<ASSIGN   4021<<ASSIGN
PODCW
      1552**DCL      3966--CALL     3994--CALL     4023--CALL
PODCW.TALLY
      1557**DCL      3952<<ASSIGN   3963<<ASSIGN   3965>>ASSIGN   3967>>ASSIGN   3986<<ASSIGN   3991<<ASSIGN
      3993>>ASSIGN   3995>>ASSIGN   4013<<ASSIGN   4018<<ASSIGN   4021>>ASSIGN   4031>>ASSIGN
RETRY_IO
      4023**LABEL    4029--GOTO
RT_CNT
      3920**DCL      4019<<ASSIGN   4025<<ASSIGN   4025>>ASSIGN   4026>>IF
S1000_FLG
      1560**DCL      3943>>IF
SYS_DPX
      3912**DCL      3966<>CALL     3994<>CALL     4023<>CALL
TYPEC
      3933**DCL-ENT  3975--CALL
WRTDP0
      3983**LABEL    4003--GOTO
WRTDP1
      3988**LABEL    3997--GOTO
WRTDP2
      3999**LABEL    3988--GOTO
WRTDPA1
      4015**LABEL    4033--GOTO
WRTDPA2
      4035**LABEL    4015--GOTO
WRTE
      3975**LABEL    3966--CALLALT  3994--CALLALT
WRTFW1
      3960**LABEL    3969--GOTO
WRTFW2
      3971**LABEL    3960--GOTO

PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:446  
     2380        1        /*T***********************************************************/
     2381        2        /*T*                                                         */
     2382        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     2383        4        /*T*                                                         */
     2384        5        /*T***********************************************************/
     2385        6        SET_MODE:PROC;
     2386        7        /* This program establishes the boot mode,
     2387        8             and the path to be taken from now on */
     2388        9        %INCLUDE IS$MACROS;
     2389     1284    1   DCL UFLG UBIN WORD SYMREF;
     2390     1285    1   DCL VIRGIN SBIN WORD SYMREF;
     2391     1286    1   DCL TQFLAG UBIN WORD SYMREF;
     2392     1287    1   DCL 1 NF_FLG SYMREF,
     2393     1288    1         2 RECON BIT(1),
     2394     1289    1         2 NONEW BIT(1),
     2395     1290    1         2 S BIT(1);
     2396     1291    1   DCL 1 RCV_FLG SYMREF,
     2397     1292    1         2 RC BIT(1),
     2398     1293    1         2 DB BIT(1),
     2399     1294    1         2 RBD BIT(1),
     2400     1295    1         2 RBO BIT(1);
     2401     1296    1   DCL VOFLG BIT(1) SYMREF;
     2402     1297    1   DCL TIGRPA BIT(1) SYMREF;
     2403     1298    1   DCL MONPA BIT(1) SYMREF;
     2404     1299    1   DCL RUMPA BIT(1) SYMREF;
     2405     1300    1   DCL PLVPA BIT(1) SYMREF;
     2406     1301        %TEXTC(N#=UQ,M#="'Do you want users (Y/N) ? '");
     2407     1306        %TEXTC(N#=NFQ,M#="'New file system (Y/N/S) ? '");
     2408     1311        %TEXTC(N#=RECONQ,M#="'Reconstruct (Y/N) ? '");
     2409     1316    1   DCL 1 ANSBUF SYMREF,
     2410     1317    1         2 CNT UBIN WORD,
     2411     1318    1         2 TXT CHAR(16);
     2412     1319    1   DCL KEYIN ENTRY(2) ALTRET;
     2413     1320    1   DCL TYPEC ENTRY(1);
     2414     1321    1   DCL PREPRESBR REMEMBER SYMREF;
     2415     1322        /**/
     2416     1323    1           UFLG=0;                         /* Assume users allowed               */
PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:447  
     2417     1324    1           NF_FLG='0'B;
     2418     1325    2           IF RCV_FLG='0'B THEN DO;        /* Not 0-> recovery or DB             */
     2419     1326    2                 IF VIRGIN>0 THEN UNWIND TO PREPRESBR; /* Make it operator recovery */
     2420     1327    2               END;                        /* THEN                               */
     2421     1328    2             ELSE DO;
     2422     1329    2                 IF TQFLAG~=0 THEN;        /* TBOOT in MINI                      */
     2423     1330    3                   ELSE DO;
     2424     1331    3                       IF(RCV_FLG.DB='1'B OR RCV_FLG.RBD='1'B) THEN GOTO ASKRECON;
     2425     1332    3                         ELSE RETURN;
     2426     1333    3                     END;                  /* ELSE                               */
     2427     1334    2               END;                        /* ELSE                               */
     2428     1335    1   BOOTSX:
     2429     1336    1           VIRGIN=VIRGIN+1;                /* Show we have been here             */
     2430     1337    1           RCV_FLG='0'B;
     2431     1338    1           TIGRPA='0'B;
     2432     1339    1           MONPA='0'B;
     2433     1340    1           RUMPA='0'B;
     2434     1341    1           PLVPA='0'B;
     2435     1342    1           IF VOFLG='1'B THEN RETURN;
     2436     1343    1             ELSE;
     2437     1344        /* Ask about users */
     2438     1345    1   UKI:
     2439     1346    1           CALL KEYIN(UQ,ANSBUF);
     2440     1347    2           DO SELECT(SUBSTR(ANSBUF.TXT,0,1));
     2441     1348    2             SELECT('Y','y');
     2442     1349    2             SELECT('N','n');
     2443     1350    2             UFLG=1;
     2444     1351    2             SELECT(ELSE);
     2445     1352    2           GOTO UKI;
     2446     1353    2           END;                            /* DO SELECT                          */
     2447     1354        /* Ask about new files */
     2448     1355    1   NFKI:
     2449     1356    1           NF_FLG='0'B;
     2450     1357    1           CALL KEYIN(NFQ,ANSBUF);
     2451     1358    2           DO SELECT(SUBSTR(ANSBUF.TXT,0,1));
     2452     1359    2             SELECT('S','s');
     2453     1360    2             NF_FLG.S='1'B;
PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:448  
     2454     1361    2             SELECT('N','n');
     2455     1362    2             NF_FLG.NONEW='1'B;
     2456     1363    2             SELECT('Y','y');
     2457     1364    2             RETURN;
     2458     1365    2             SELECT(ELSE);
     2459     1366    2           GOTO NFKI;
     2460     1367    2           END;                            /* DO SELECT                          */
     2461     1368        /* Ask about reconstruct */
     2462     1369    1   ASKRECON:
     2463     1370    1           CALL KEYIN(RECONQ,ANSBUF);
     2464     1371    2           DO SELECT(SUBSTR(ANSBUF.TXT,0,1));
     2465     1372    2             SELECT('Y','y');
     2466     1373    2             NF_FLG.RECON='1'B;
     2467     1374    2             SELECT('N','n');
     2468     1375    2             SELECT(ELSE);
     2469     1376    2           GOTO ASKRECON;
     2470     1377    2           END;                            /* DO SELECT                          */
     2471     1378    1           RETURN;
     2472     1379    1   END SET_MODE;

PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:449  
--  Include file information  --

   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure SET_MODE.

   Procedure SET_MODE requires 153 words for executable code.
   Procedure SET_MODE requires 4 words of local(AUTO) storage.

    No errors detected in file ISI$FIXSYST.:E05TSI    .

PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:450  

 Object Unit name= SET_MODE                                   File name= ISI$FIXSYST.:E05TOU
 UTS= JUL 29 '97 22:51:38.76 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none    22     26  SET_MODE
    1   Proc  even  none   153    231  SET_MODE
    2  RoData even  none     6      6  SET_MODE

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes            yes      Std        0  SET_MODE

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      0  UQ                                 0     10  NFQ
    0     20  RECONQ

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       2 KEYIN
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_AUNWIND
                       nStd      0 X66_ARET
                       Std       0 B_CONSPOOL_D
PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:451  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     UFLG                                  VIRGIN                                TQFLAG
     NF_FLG                                RCV_FLG                               VOFLG
     TIGRPA                                MONPA                                 RUMPA
     PLVPA                                 ANSBUF                                PREPRESBR
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:452  


     2380        1        /*T***********************************************************/
     2381        2        /*T*                                                         */
     2382        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     2383        4        /*T*                                                         */
     2384        5        /*T***********************************************************/
     2385        6        SET_MODE:PROC;

      6  1 000000   000000 700200 xent  SET_MODE     TSX0  ! X66_AUTO_0
         1 000001   000004 000000                    ZERO    4,0

     2386        7        /* This program establishes the boot mode,
     2387        8             and the path to be taken from now on */
     2388        9        %INCLUDE IS$MACROS;
     2389     1284    1   DCL UFLG UBIN WORD SYMREF;
     2390     1285    1   DCL VIRGIN SBIN WORD SYMREF;
     2391     1286    1   DCL TQFLAG UBIN WORD SYMREF;
     2392     1287    1   DCL 1 NF_FLG SYMREF,
     2393     1288    1         2 RECON BIT(1),
     2394     1289    1         2 NONEW BIT(1),
     2395     1290    1         2 S BIT(1);
     2396     1291    1   DCL 1 RCV_FLG SYMREF,
     2397     1292    1         2 RC BIT(1),
     2398     1293    1         2 DB BIT(1),
     2399     1294    1         2 RBD BIT(1),
     2400     1295    1         2 RBO BIT(1);
     2401     1296    1   DCL VOFLG BIT(1) SYMREF;
     2402     1297    1   DCL TIGRPA BIT(1) SYMREF;
     2403     1298    1   DCL MONPA BIT(1) SYMREF;
     2404     1299    1   DCL RUMPA BIT(1) SYMREF;
     2405     1300    1   DCL PLVPA BIT(1) SYMREF;
     2406     1301        %TEXTC(N#=UQ,M#="'Do you want users (Y/N) ? '");
     2407     1306        %TEXTC(N#=NFQ,M#="'New file system (Y/N/S) ? '");
     2408     1311        %TEXTC(N#=RECONQ,M#="'Reconstruct (Y/N) ? '");
     2409     1316    1   DCL 1 ANSBUF SYMREF,
     2410     1317    1         2 CNT UBIN WORD,
     2411     1318    1         2 TXT CHAR(16);
PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:453  
     2412     1319    1   DCL KEYIN ENTRY(2) ALTRET;
     2413     1320    1   DCL TYPEC ENTRY(1);
     2414     1321    1   DCL PREPRESBR REMEMBER SYMREF;
     2415     1322        /**/
     2416     1323    1           UFLG=0;                         /* Assume users allowed               */

   1323  1 000002   000000 450000 xsym               STZ     UFLG

     2417     1324    1           NF_FLG='0'B;

   1324  1 000003   000000 450000 xsym               STZ     NF_FLG

     2418     1325    2           IF RCV_FLG='0'B THEN DO;        /* Not 0-> recovery or DB             */

   1325  1 000004   000000 236000 xsym               LDQ     RCV_FLG
         1 000005   740000 316003                    CANQ    -16384,DU
         1 000006   000014 601000 1                  TNZ     s:1329

     2419     1326    2                 IF VIRGIN>0 THEN UNWIND TO PREPRESBR; /* Make it operator recovery */

   1326  1 000007   000000 235000 xsym               LDA     VIRGIN
         1 000010   000023 604400 1                  TMOZ    BOOTSX

   1326  1 000011   000000 237200 xsym               LDAQ  ! PREPRESBR
         1 000012   000000 700200 xent               TSX0  ! X66_AUNWIND
         1 000013   000000 000200                    ZERO    0,128

     2420     1327    2               END;                        /* THEN                               */
     2421     1328    2             ELSE DO;

     2422     1329    2                 IF TQFLAG~=0 THEN;        /* TBOOT in MINI                      */

   1329  1 000014   000000 235000 xsym               LDA     TQFLAG
         1 000015   000023 601000 1                  TNZ     BOOTSX

     2423     1330    3                   ELSE DO;

PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:454  
     2424     1331    3                       IF(RCV_FLG.DB='1'B OR RCV_FLG.RBD='1'B) THEN GOTO ASKRECON;

   1331  1 000016   200000 316003                    CANQ    65536,DU
         1 000017   000164 601000 1                  TNZ     ASKRECON
         1 000020   100000 316003                    CANQ    32768,DU
         1 000021   000164 601000 1                  TNZ     ASKRECON

     2425     1332    3                         ELSE RETURN;

   1332  1 000022   000000 702200 xent               TSX2  ! X66_ARET

     2426     1333    3                     END;                  /* ELSE                               */
     2427     1334    2               END;                        /* ELSE                               */
     2428     1335    1   BOOTSX:
     2429     1336    1           VIRGIN=VIRGIN+1;                /* Show we have been here             */

   1336  1 000023   000000 054000 xsym  BOOTSX       AOS     VIRGIN

     2430     1337    1           RCV_FLG='0'B;

   1337  1 000024   000000 450000 xsym               STZ     RCV_FLG

     2431     1338    1           TIGRPA='0'B;

   1338  1 000025   000000 450000 xsym               STZ     TIGRPA

     2432     1339    1           MONPA='0'B;

   1339  1 000026   000000 450000 xsym               STZ     MONPA

     2433     1340    1           RUMPA='0'B;

   1340  1 000027   000000 450000 xsym               STZ     RUMPA

     2434     1341    1           PLVPA='0'B;

   1341  1 000030   000000 450000 xsym               STZ     PLVPA
PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:455  

     2435     1342    1           IF VOFLG='1'B THEN RETURN;

   1342  1 000031   000000 234000 xsym               SZN     VOFLG
         1 000032   000034 605000 1                  TPL     UKI

   1342  1 000033   000000 702200 xent               TSX2  ! X66_ARET

     2436     1343    1             ELSE;
     2437     1344        /* Ask about users */
     2438     1345    1   UKI:
     2439     1346    1           CALL KEYIN(UQ,ANSBUF);

   1346  1 000034   000000 630400 2     UKI          EPPR0   0
         1 000035   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000036   000000 701000 xent               TSX1    KEYIN
         1 000037   000000 011000                    NOP     0

     2440     1347    2           DO SELECT(SUBSTR(ANSBUF.TXT,0,1));

   1347  1 000040   000001 236000 xsym               LDQ     ANSBUF+1
         1 000041   777000 376003                    ANQ     -512,DU
         1 000042   131000 116003                    CMPQ    45568,DU
         1 000043   000066 602000 1                  TNC     s:1347+22
         1 000044   000001 236000 xsym               LDQ     ANSBUF+1
         1 000045   777000 376003                    ANQ     -512,DU
         1 000046   131000 116003                    CMPQ    45568,DU
         1 000047   000073 600000 1                  TZE     s:1348
         1 000050   000001 236000 xsym               LDQ     ANSBUF+1
         1 000051   777000 376003                    ANQ     -512,DU
         1 000052   171000 116003                    CMPQ    61952,DU
         1 000053   000061 602000 1                  TNC     s:1347+17
         1 000054   000001 236000 xsym               LDQ     ANSBUF+1
         1 000055   777000 376003                    ANQ     -512,DU
         1 000056   171000 116003                    CMPQ    61952,DU
         1 000057   000073 600000 1                  TZE     s:1348
         1 000060   000077 710000 1                  TRA     s:1352
PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:456  
         1 000061   000001 236000 xsym               LDQ     ANSBUF+1
         1 000062   777000 376003                    ANQ     -512,DU
         1 000063   156000 116003                    CMPQ    56320,DU
         1 000064   000077 601000 1                  TNZ     s:1352
         1 000065   000074 710000 1                  TRA     s:1350
         1 000066   000001 236000 xsym               LDQ     ANSBUF+1
         1 000067   777000 376003                    ANQ     -512,DU
         1 000070   116000 116003                    CMPQ    39936,DU
         1 000071   000077 601000 1                  TNZ     s:1352
         1 000072   000074 710000 1                  TRA     s:1350

     2441     1348    2             SELECT('Y','y');

   1348  1 000073   000100 710000 1                  TRA     NFKI

     2442     1349    2             SELECT('N','n');

     2443     1350    2             UFLG=1;

   1350  1 000074   000001 235007                    LDA     1,DL
         1 000075   000000 755000 xsym               STA     UFLG
         1 000076   000100 710000 1                  TRA     NFKI

     2444     1351    2             SELECT(ELSE);

     2445     1352    2           GOTO UKI;

   1352  1 000077   000034 710000 1                  TRA     UKI

     2446     1353    2           END;                            /* DO SELECT                          */

     2447     1354        /* Ask about new files */
     2448     1355    1   NFKI:
     2449     1356    1           NF_FLG='0'B;

   1356  1 000100   000000 450000 xsym  NFKI         STZ     NF_FLG

PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:457  
     2450     1357    1           CALL KEYIN(NFQ,ANSBUF);

   1357  1 000101   000002 630400 2                  EPPR0   2
         1 000102   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000103   000000 701000 xent               TSX1    KEYIN
         1 000104   000000 011000                    NOP     0

     2451     1358    2           DO SELECT(SUBSTR(ANSBUF.TXT,0,1));

   1358  1 000105   000001 236000 xsym               LDQ     ANSBUF+1
         1 000106   777000 376003                    ANQ     -512,DU
         1 000107   156000 116003                    CMPQ    56320,DU
         1 000110   000132 602000 1                  TNC     s:1358+21
         1 000111   000001 236000 xsym               LDQ     ANSBUF+1
         1 000112   777000 376003                    ANQ     -512,DU
         1 000113   156000 116003                    CMPQ    56320,DU
         1 000114   000157 600000 1                  TZE     s:1362
         1 000115   000001 236000 xsym               LDQ     ANSBUF+1
         1 000116   777000 376003                    ANQ     -512,DU
         1 000117   163000 116003                    CMPQ    58880,DU
         1 000120   000163 602000 1                  TNC     s:1366
         1 000121   000001 236000 xsym               LDQ     ANSBUF+1
         1 000122   777000 376003                    ANQ     -512,DU
         1 000123   163000 116003                    CMPQ    58880,DU
         1 000124   000154 600000 1                  TZE     s:1360
         1 000125   000001 236000 xsym               LDQ     ANSBUF+1
         1 000126   777000 376003                    ANQ     -512,DU
         1 000127   171000 116003                    CMPQ    61952,DU
         1 000130   000163 601000 1                  TNZ     s:1366
         1 000131   000162 710000 1                  TRA     s:1364
         1 000132   000001 236000 xsym               LDQ     ANSBUF+1
         1 000133   777000 376003                    ANQ     -512,DU
         1 000134   123000 116003                    CMPQ    42496,DU
         1 000135   000147 602000 1                  TNC     s:1358+34
         1 000136   000001 236000 xsym               LDQ     ANSBUF+1
         1 000137   777000 376003                    ANQ     -512,DU
         1 000140   123000 116003                    CMPQ    42496,DU
PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:458  
         1 000141   000154 600000 1                  TZE     s:1360
         1 000142   000001 236000 xsym               LDQ     ANSBUF+1
         1 000143   777000 376003                    ANQ     -512,DU
         1 000144   131000 116003                    CMPQ    45568,DU
         1 000145   000163 601000 1                  TNZ     s:1366
         1 000146   000162 710000 1                  TRA     s:1364
         1 000147   000001 236000 xsym               LDQ     ANSBUF+1
         1 000150   777000 376003                    ANQ     -512,DU
         1 000151   116000 116003                    CMPQ    39936,DU
         1 000152   000163 601000 1                  TNZ     s:1366
         1 000153   000157 710000 1                  TRA     s:1362

     2452     1359    2             SELECT('S','s');

     2453     1360    2             NF_FLG.S='1'B;

   1360  1 000154   100000 236003                    LDQ     32768,DU
         1 000155   000000 256000 xsym               ORSQ    NF_FLG
         1 000156   000164 710000 1                  TRA     ASKRECON

     2454     1361    2             SELECT('N','n');

     2455     1362    2             NF_FLG.NONEW='1'B;

   1362  1 000157   200000 236003                    LDQ     65536,DU
         1 000160   000000 256000 xsym               ORSQ    NF_FLG
         1 000161   000164 710000 1                  TRA     ASKRECON

     2456     1363    2             SELECT('Y','y');

     2457     1364    2             RETURN;

   1364  1 000162   000000 702200 xent               TSX2  ! X66_ARET

     2458     1365    2             SELECT(ELSE);

     2459     1366    2           GOTO NFKI;
PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:459  

   1366  1 000163   000100 710000 1                  TRA     NFKI

     2460     1367    2           END;                            /* DO SELECT                          */

     2461     1368        /* Ask about reconstruct */
     2462     1369    1   ASKRECON:
     2463     1370    1           CALL KEYIN(RECONQ,ANSBUF);

   1370  1 000164   000004 630400 2     ASKRECON     EPPR0   4
         1 000165   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000166   000000 701000 xent               TSX1    KEYIN
         1 000167   000000 011000                    NOP     0

     2464     1371    2           DO SELECT(SUBSTR(ANSBUF.TXT,0,1));

   1371  1 000170   000001 236000 xsym               LDQ     ANSBUF+1
         1 000171   777000 376003                    ANQ     -512,DU
         1 000172   131000 116003                    CMPQ    45568,DU
         1 000173   000216 602000 1                  TNC     s:1371+22
         1 000174   000001 236000 xsym               LDQ     ANSBUF+1
         1 000175   777000 376003                    ANQ     -512,DU
         1 000176   131000 116003                    CMPQ    45568,DU
         1 000177   000223 600000 1                  TZE     s:1373
         1 000200   000001 236000 xsym               LDQ     ANSBUF+1
         1 000201   777000 376003                    ANQ     -512,DU
         1 000202   171000 116003                    CMPQ    61952,DU
         1 000203   000211 602000 1                  TNC     s:1371+17
         1 000204   000001 236000 xsym               LDQ     ANSBUF+1
         1 000205   777000 376003                    ANQ     -512,DU
         1 000206   171000 116003                    CMPQ    61952,DU
         1 000207   000223 600000 1                  TZE     s:1373
         1 000210   000227 710000 1                  TRA     s:1376
         1 000211   000001 236000 xsym               LDQ     ANSBUF+1
         1 000212   777000 376003                    ANQ     -512,DU
         1 000213   156000 116003                    CMPQ    56320,DU
         1 000214   000227 601000 1                  TNZ     s:1376
PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:460  
         1 000215   000226 710000 1                  TRA     s:1374
         1 000216   000001 236000 xsym               LDQ     ANSBUF+1
         1 000217   777000 376003                    ANQ     -512,DU
         1 000220   116000 116003                    CMPQ    39936,DU
         1 000221   000227 601000 1                  TNZ     s:1376
         1 000222   000226 710000 1                  TRA     s:1374

     2465     1372    2             SELECT('Y','y');

     2466     1373    2             NF_FLG.RECON='1'B;

   1373  1 000223   400000 236003                    LDQ     -131072,DU
         1 000224   000000 256000 xsym               ORSQ    NF_FLG
         1 000225   000230 710000 1                  TRA     s:1378

     2467     1374    2             SELECT('N','n');

   1374  1 000226   000230 710000 1                  TRA     s:1378

     2468     1375    2             SELECT(ELSE);

     2469     1376    2           GOTO ASKRECON;

   1376  1 000227   000164 710000 1                  TRA     ASKRECON

     2470     1377    2           END;                            /* DO SELECT                          */

     2471     1378    1           RETURN;

   1378  1 000230   000000 702200 xent               TSX2  ! X66_ARET
     2472     1379    1   END SET_MODE;

PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:461  
--  Include file information  --

   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure SET_MODE.
PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:462  

 **** Variables and constants ****

  ****  Section 000  Data  SET_MODE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    10-0-0/w STRC(270)   r     1 NFQ                       20-0-0/w STRC(216)   r     1 RECONQ
     0-0-0/w STRC(270)   r     1 UQ

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(180)   r     1 ANSBUF                     0-0-0/b BIT         r     1 MONPA
     0-0-0/b STRC(3)     r     1 NF_FLG                     0-0-0/b BIT         r     1 PLVPA
     0-0-0/d REMB        r     1 PREPRESBR                  0-0-0/b STRC(4)     r     1 RCV_FLG
     0-0-0/b BIT         r     1 RUMPA                      0-0-0/b BIT         r     1 TIGRPA
     0-0-0/w UBIN        r     1 TQFLAG                     0-0-0/w UBIN        r     1 UFLG
     0-0-0/w SBIN        r     1 VIRGIN                     0-0-0/b BIT         r     1 VOFLG


   Procedure SET_MODE requires 153 words for executable code.
   Procedure SET_MODE requires 4 words of local(AUTO) storage.

    No errors detected in file ISI$FIXSYST.:E05TSI    .
PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:463  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:464  
          MINI XREF LISTING

ANSBUF
      1316**DCL      1346<>CALL     1357<>CALL     1370<>CALL
ANSBUF.TXT
      1318**DCL      1347>>DOSELCT  1358>>DOSELCT  1371>>DOSELCT
ASKRECON
      1370**LABEL    1331--GOTO     1376--GOTO
KEYIN
      1319**DCL-ENT  1346--CALL     1357--CALL     1370--CALL
MONPA
      1298**DCL      1339<<ASSIGN
NFKI
      1356**LABEL    1366--GOTO
NFQ
      1307**DCL      1357<>CALL
NF_FLG
      1287**DCL      1324<<ASSIGN   1356<<ASSIGN
NF_FLG.NONEW
      1289**DCL      1362<<ASSIGN
NF_FLG.RECON
      1288**DCL      1373<<ASSIGN
NF_FLG.S
      1290**DCL      1360<<ASSIGN
PLVPA
      1300**DCL      1341<<ASSIGN
PREPRESBR
      1321**DCL      1326>>UNWIND
RCV_FLG
      1291**DCL      1325>>IF       1337<<ASSIGN
RCV_FLG.DB
      1293**DCL      1331>>IF
RCV_FLG.RBD
      1294**DCL      1331>>IF
PL6.E3A0      #010=SET_MODE File=ISI$FIXSYST.:E05TSI                             TUE 07/29/97 22:51 Page:465  
RECONQ
      1312**DCL      1370<>CALL
RUMPA
      1299**DCL      1340<<ASSIGN
TIGRPA
      1297**DCL      1338<<ASSIGN
TQFLAG
      1286**DCL      1329>>IF
UFLG
      1284**DCL      1323<<ASSIGN   1350<<ASSIGN
UKI
      1346**LABEL    1352--GOTO
UQ
      1302**DCL      1346<>CALL
VIRGIN
      1285**DCL      1326>>IF       1336<<ASSIGN   1336>>ASSIGN
VOFLG
      1296**DCL      1342>>IF
