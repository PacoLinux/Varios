

15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         1    
    1      *M* MACROS TO HANDLE GENERALIZED FIELD STRUCTURES
    2      *T***********************************************************
    3      *T*                                                         *
    4      *T* Copyright (c) Bull HN Information Systems Inc., 1997    *
    5      *T*                                                         *
    6      *T***********************************************************
    7      *
    8             CRSM    OFF
    9      @AUTO  EQU     2                   AUTO STACK PTR REG
   10      @TEMP  SET     4                   WORK SPACE IN AUTO FRAME (2 WORDS)
   11      @TEMPX SET     7                       WORK INDEX REGISTER
   12      *
   13      * DEFINE REGISTERS
   14      *
   15      REGS   MACRO
   16             DEFREGS X,(0,1,2,3,4,5,6)
   17             DEFREGS P,(0,1,3,4,5,6,7)       ALL BUT AUTO PTR
   18             ENDM    REGS
   19      *
   20      DEFREGS MACRO  REGNAME,REGNUMS
   21             IDRP    #2
   22      #1#2   EQU     #2
   23             IDRP
   24             ENDM
   25      *
   26      * DECLARE A FIELD
   27      *
   28      IDEF   MACRO   NAME,FIRSTBIT,BITSIZE,WORD
   29      @W     SET     #4
   30      @B     SET     #2
   31             IFG     @B,35,2
   32      @W     SET     @W+@B/36
   33      @B     SET     @B-@B/36*36
   34      @N     SET     #3
   35      @S     SET     0
   36             IFL     @N,0,2
   37      @N     SET     -@N
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         2    
   38      @S     SETB    777777400000
   39      #1     EQU     @W
   40      #1@F   EQU     @S+@B*=O1000+@N
   41             ENDM    IDEF
   42      *
   43      * RESERVE A FIELD
   44      *
   45      *      @WORD = CURRENT WORD LOCATION
   46      *      @BIT  = CURRENT BIT LOCATION
   47      *
   48      IRES   MACRO   NAME,BITSIZE,ALIGN
   49      @N     SET     #2
   50      @S     SET     0
   51             IFL     @N,0,2
   52      @N     SET     -@N
   53      @S     SETB    777777400000
   54      @I     SET     0
   55             IFE     '#3','HALIGN'
   56      @I     SET     18                      HALIGN = ALIGN ON HALF-WORD BOUNDARY
   57             IFE     '#3','ALIGN'
   58      @I     SET     36                      ALIGN = ALIGN ON WORD BOUNDARY
   59             IFE     '#3','DALIGN',%ALIGN
   60      @O     SETB    @WORD*1                 DALIGN = ALIGN ON DOUBLE-WORD BOUNDARY
   61      @WORD  SET     @WORD-@O
   62      @BIT   SET     @BIT+36*@O
   63      @I     SET     72
   64      ALIGN  IFE     @I,0
   65      @I     SET     #3
   66             INE     @I,0,%UNAL
   67             INE     @BIT,@BIT/@I*@I,%UNAL
   68      @BIT   SET     @BIT+@I-1
   69      @BIT   SET     @BIT/@I*@I
   70             IFG     @BIT+@I,36,%UNAL
   71      @BIT   SET     0
   72      @I     SET     @I+35
   73      @WORD  SET     @WORD+@I/36
   74      UNAL   MARK
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         3    
   75      #1     EQU     @WORD
   76      #1@F   EQU     @S+@BIT*=O1000+@N
   77      @BIT   SET     @BIT+@N
   78      @WORD  SET     @WORD+@BIT/36
   79      @BIT   SET     @BIT-@BIT/36*36
   80             ENDM    IRES
   81      *
   82      * SET UP INTERNAL VARIABLES
   83      *
   84      @SETUPA MACRO  ITEM,OFFSET
   85      @W     SET     #2
   86      @W     SET     #1+@W
   87      @B     SETB    #1@F*377000
   88      @B     SET     @B/=O1000
   89      @N     SETB    #1@F*777
   90             ENDM    @SETUPA
   91      *
   92      * RESTRICT FIELD TO RIGHTMOST SIZE BITS
   93      *
   94      @SETUPB MACRO  SIZE
   95      @B     SET     @B+@N-#1
   96      @N     SET     #1
   97      @W     SET     @W+@B/36
   98      @O     SETB    @W*1
   99      @O     SET     @O*#1/72
  100      @W     SET     @W-@O
  101      @B     SET     @B-@B/36*36+36*@O
  102             ENDM    @SETUPB
  103      *
  104      * SET UP @C, @B, AND @A
  105      *
  106      @SETUPC MACRO  AR
  107      @C     SET     @B/9
  108      @B     SET     @B-@C*9
  109      @A     SET     0
  110             INE     '#1',''
  111      @A     SETB    100
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         4    
  112             ENDM    SETUPC
  113      *
  114      * ALIGN A FIELD IN MEMORY
  115      *
  116      @ALIGN MACRO   SIZE,ITEM,OFFSET,AR,FIRSTBYTE
  117             @SETUPA #2,#3
  118             @SETUPC #4
  119             IFL     #2@F,0,%UNSIGNED
  120             IFL     @N,#1,%UNSIGNED
  121             IFE     @C+@B,0,2
  122             SZN     @W,,#4
  123             TPL     5,IC
  124             INE     @C+@B,0,4
  125             CMPB    @A,,0
  126             BDSC    @W,1,@C,@B,#4
  127             BDSC    ,0
  128             TZE     5,IC
  129             CSR     @A,=O100,3,1
  130             BDSC    @W,@N,@C,@B,#4
  131             BDSC    @TEMP,#1,#5,,@AUTO
  132             TRA     4,IC
  133      UNSIGNED MARK
  134             CSR     @A,=O100,3,0
  135             BDSC    @W,@N,@C,@B,#4
  136             BDSC    @TEMP,#1,#5,,@AUTO
  137             ENDM    @ALIGN
  138      *
  139      * STORE ALIGNED QUANTITY INTO A FIELD
  140      *
  141      @STORE MACRO   SIZE,ITEM,OFFSET,AR
  142             IFL     #2@F,0,%UNSIGNED
  143             IFG     @N,#1,%UNSIGNED
  144             SZN     @TEMP,,@AUTO
  145             TPL     5,IC
  146             CSR     =O100,@A,3,1
  147             BDSC    @TEMP,#1,,,@AUTO
  148             BDSC    @W,@N,@C,@B,#4
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         5    
  149             TRA     4,IC
  150      UNSIGNED MARK
  151             CSR     =O100,@A,3,0
  152             BDSC    @TEMP,#1,,,@AUTO
  153             BDSC    @W,@N,@C,@B,#4
  154             ENDM    @STORE
  155      *
  156      * MEMORY-TO-ACCUMULATOR INSTRUCTIONS
  157      *
  158      @INST  MACRO   OP,SIZE,ITEM,OFFSET,AR
  159             @SETUPA #3,#4
  160             IFG     @N,#2
  161             @SETUPB #2
  162             IFE     @B,0,%UNAL
  163             IFE     @N,#2,%UNAL
  164             #1      @W,,#5
  165             INE     0,0,%ENDM
  166      UNAL   MARK
  167             @ALIGN  #2,#3,#4,#5
  168             #1      @TEMP,,@AUTO
  169      ENDM   MARK
  170             ENDM    @INST
  171      *
  172      * LOAD ACCUMULATOR
  173      *
  174      @LDACC MACRO   OP,REG,TEST,SIZE,ITEM,OFFSET,AR
  175             @SETUPA #5,#6
  176             IFG     @N,#4
  177             @SETUPB #4
  178             #3      @B+@N,#4,%ALIGNED
  179             @ALIGN  #4,#5,#6,#7
  180             #1      @TEMP,,@AUTO
  181             INE     0,0,%ENDM
  182      ALIGNED MARK
  183             #1      @W,,#7
  184             INE     @B,0
  185             #2LS    @B
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         6    
  186             INE     @N,#4,%ENDM
  187             IFG     #5@F,-1
  188             #2RL    #4-@N
  189             IFL     #5@F,0
  190             #2RS    #4-@N
  191      ENDM   MARK
  192             ENDM    @LDACC
  193      *
  194      * MEMORY-TO-INDEX INSTRUCTIONS
  195      *
  196      @INSTX MACRO   OP,OPL,SIZE,REG,ITEM,OFFSET,AR
  197             @SETUPA #5,#6
  198             IFG     @N,#3
  199             @SETUPB #3
  200             IFE     @N,#3,%UNAL
  201      @F     SET     0
  202             IFE     @B,0,2
  203             #1      #4,@W,,#7
  204      @F     SET     1
  205             INE     '#2','',3
  206             IFE     @B,18,2
  207             #2      #4,@W,,#7
  208      @F     SET     1
  209             IFE     @F,0,%ENDM
  210      UNAL   MARK
  211             @ALIGN  #3,#5,#6,#7
  212             #1      #4,@TEMP,,@AUTO
  213      ENDM   MARK
  214             ENDM    @INSTX
  215      *
  216      * RIGHT HALF OF MEMORY WORD TO INTERNAL REGISTER INSTRUCTIONS
  217      *
  218      @INSTR MACRO   OP,ITEM,OFFSET,AR
  219             @SETUPA #2,#3
  220             IFG     @N,18
  221             @SETUPB 18
  222             IFE     @B,18,%UNAL
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         7    
  223             IFE     @N,18,%UNAL
  224             #1      @W,,#4
  225             INE     0,0,%ENDM
  226      UNAL   MARK
  227             @ALIGN  18,#2,#3,#4,2
  228             #1      @TEMP,,@AUTO
  229      ENDM   MARK
  230             ENDM    @INSTR
  231      *
  232      * ACCUMULATOR-TO-MEMORY INSTRUCTIONS
  233      *
  234      @INSTS MACRO   OP,ITEM,OFFSET,AR
  235             @SETUPA #2,#3
  236             IFE     @B,0,%UNAL
  237             IFE     @N,36,%UNAL
  238             #1      @W,,#4
  239             INE     0,0,%ENDM
  240      UNAL   MARK
  241             @ALIGN  36,#2,#3,#4
  242             #1      @TEMP,,@AUTO
  243             @STORE  36,#2,#3,#4
  244      ENDM   MARK
  245             ENDM    @INSTS
  246      *
  247      * INDEX-TO-MEMORY INSTRUCTIONS
  248      *
  249      @INSTSX MACRO  OP,SIZE,REG,ITEM,OFFSET,AR
  250             @SETUPA #4,#5
  251             IFE     @B,0,%UNAL
  252             IFE     @N,#2,%UNAL
  253             #1      #3,@W,,#6
  254             INE     0,0,%ENDM
  255      UNAL   MARK
  256             @ALIGN  #2,#4,#5,#6
  257             #1      #3,@TEMP,,@AUTO
  258             @STORE  #2,#4,#5,#6
  259      ENDM   MARK
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         8    
  260             ENDM    @INSTSX
  261      *
  262      * STORE INSTRUCTIONS
  263      *
  264      @STINST MACRO  OP,SIZE,ITEM,OFFSET,AR
  265             @SETUPA #3,#4
  266             IFE     @B,0,%UNAL
  267             IFE     @N,#2,%UNAL
  268             #1      @W,,#5
  269             INE     0,0,%ENDM
  270      UNAL   MARK
  271             #1      @TEMP,,@AUTO
  272             @SETUPC #5
  273             @STORE  #2,#3,#4,#5
  274      ENDM   MARK
  275             ENDM    @STINST
  276      *
  277      * TEST FOR PARTIAL-WORD STORE
  278      *
  279      @TPWST MACRO   OP,REG,#BITS,INC,MASK,#FIELDS,AR
  280             IFE     @N,#3,%ENDM
  281      @IM    SETB    #5
  282      @IB    SET     0
  283             DUP     4,#6
  284             IFE     @B,@IB
  285      @M     SET     @IM
  286      @IM    SET     @IM/2
  287      @IB    SET     @IB+#4
  288             INE     @M,0,%ENDM
  289             INE     @B,36-#3
  290             #2LR    36-#3-@B
  291             #1#2    @W,@M,#7
  292             INE     @B,36-#3
  293             #2LR    #3+@B
  294      ENDM   MARK
  295             ENDM    @TPWST
  296      *
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         9    
  297      * STORE A OR Q
  298      *
  299      @STACC MACRO   REG,ITEM,OFFSET,AR
  300             @SETUPA #2,#3
  301             IFE     @N,36,%@M
  302             IFE     @B,0,%UNAL
  303             ST#1    @W,,#4
  304             INE     0,0,%ENDM
  305      @M     SET     0
  306             @TPWST  STB,#1,18,9,60,3,#4
  307             IFE     @M,0,%ENDM
  308             @TPWST  STB,#1,9,9,40,4,#4
  309             IFE     @M,0,%ENDM
  310             @TPWST  STC,#1,6,6,40,6,#4
  311             IFE     @M,0,%ENDM
  312             @TPWST  STC,#1,12,6,60,5,#4
  313             IFE     @M,0,%ENDM
  314             @TPWST  STC,#1,18,6,70,3,#4
  315             IFE     @M,0,%ENDM
  316             @TPWST  STC,#1,24,6,74,3,#4
  317             IFE     @M,0,%ENDM
  318             @TPWST  STB,#1,27,9,70,2,#4
  319             IFE     @M,0,%ENDM
  320             @TPWST  STC,#1,30,6,76,2,#4
  321             IFE     @M,0,%ENDM
  322      UNAL   MARK
  323             ST#1    @TEMP,,@AUTO
  324             @SETUPC #4
  325             @STORE  36,#2,#3,#4
  326      ENDM   MARK
  327             ENDM    @STACC
  328      *
  329      * STORE INDEX INSTRUCTIONS
  330      *
  331      @STINSTX MACRO OP,OPL,SIZE,REG,ITEM,OFFSET,AR
  332             @SETUPA #5,#6
  333             IFE     @N,#3,%UNAL
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         10   
  334      @F     SET     0
  335             IFE     @B,0,2
  336             #1      #4,@W,,#7
  337      @F     SET     1
  338             INE     '#2','',3
  339             IFE     @B,18,2
  340             #2      #4,@W,,#7
  341      @F     SET     1
  342             IFE     @F,0,%ENDM
  343      UNAL   MARK
  344             #1      #4,@TEMP,,@AUTO
  345             @SETUPC #7
  346             @STORE  #3,#5,#6,#7
  347      ENDM   MARK
  348             ENDM    @STINSTX
  349      *
  350      * ALIGN A FIELD LEFT IN MEMORY
  351      *
  352      @FALIGN MACRO  SIZE,ITEM,OFFSET,AR
  353             @SETUPC #4
  354             CSL     @A,=O100,3,0
  355             BDSC    @W,@N,@C,@B,#4
  356             BDSC    @TEMP,#1,,,@AUTO
  357             ENDM    @FALIGN
  358      *
  359      * STORE LEFT-ALIGNED QUANTITY INTO A FIELD
  360      *
  361      @FSTORE MACRO  SIZE,ITEM,OFFSET,AR
  362             @SETUPC #4
  363             CSL     =O100,@A,3,0
  364             BDSC    @TEMP,#1,,,@AUTO
  365             BDSC    @W,@N,@C,@B,#4
  366             ENDM    @FSTORE
  367      *
  368      * F.P. MEMORY-TO-ACCUMULATOR INSTRUCTIONS
  369      *
  370      @FINST MACRO   OP,SIZE,ITEM,OFFSET,AR
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         11   
  371             @SETUPA #3,#4
  372             IFE     @B,0,%UNAL
  373             IFG     @N,#2-1,%UNAL
  374             #1      @W,,#5
  375             INE     0,0,%ENDM
  376      UNAL   MARK
  377             @FALIGN #2,#3,#4,#5
  378             #1      @TEMP,,@AUTO
  379      ENDM   MARK
  380             ENDM    @FINST
  381      *
  382      * F.P. STORE INSTRUCTIONS
  383      *
  384      @FSTINST MACRO OP,SIZE,ITEM,OFFSET,AR
  385             @SETUPA #3,#4
  386             IFE     @B,0,%UNAL
  387             IFG     @N,#2-1,%UNAL
  388             #1      @W,,#5
  389             INE     0,0,%ENDM
  390      UNAL   MARK
  391             #1      @TEMP,,@AUTO
  392             @FSTORE #2,#3,#4,#5
  393      ENDM   MARK
  394             ENDM    @FSTINST
  395      *
  396      * SELECT SINGLE- OR DOUBLE-PRECISION F.P. INSTRUCTION
  397      *
  398      @DFINST MACRO  OP,TYPE,ITEM,OFFSET,AR
  399             @SETUPA #3,#4
  400             IFL     @N,37
  401             @F#2INST  #1,36,#3,#4,#5
  402             IFG     @N,36
  403             @F#2INST  D#1,72,#3,#4,#5
  404             ENDM    @DFINST
  405      *
  406      * SET UP PARAMETERS FOR MOVE
  407      *
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         12   
  408      @PARAM MACRO   NUMBER,ITEM,OFFSET,AR
  409      @W#1   SET     #3
  410      @W#1   SET     #2+@W#1
  411      @B#1   SET     #2@F/=O1000
  412      @B#1   SETB    @B#1*377
  413      @N#1   SETB    #2@F*777
  414      @C#1   SET     @B#1/9
  415      @B#1   SET     @B#1-@C#1*9
  416      @A#1   SET     0
  417             INE     '#4',''
  418      @A#1   SETB    100
  419             ENDM    @PARAM
  420      *
  421      * MOVE FIELD TO FIELD, LEFT-JUSTIFIED
  422      *
  423      FMOVE  MACRO   (FROMITEM,OFFSET,AR),(TOITEM,OFFSET,AR)
  424             @PARAM  1,#1
  425             @PARAM  2,#2
  426      @I     SET     0
  427             IDRP    #1
  428      @I     SET     @I+1
  429             IDRP
  430             IFE     @I,1
  431             @FMOVE  #1,,,#2
  432             IFE     @I,2
  433             @FMOVE  #1,,#2
  434             IFE     @I,3
  435             @FMOVE  #1,#2
  436             ENDM
  437      @FMOVE MACRO   FROMITEM,OFFSET,AR,TOITEM,OFFSET,AR
  438             CSL     @A1,@A2,3,0
  439             BDSC    @W1,@N1,@C1,@B1,#3
  440             BDSC    @W2,@N2,@C2,@B2,#6
  441             ENDM    @FMOVE
  442      *
  443      * MOVE FIELD TO FIELD, RIGHT-JUSTIFIED
  444      *
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         13   
  445      MOVE   MACRO   (FROMITEM,OFFSET,AR),(TOITEM,OFFSET,AR)
  446             @PARAM  1,#1
  447             @PARAM  2,#2
  448      @I     SET     0
  449             IDRP    #1
  450      @I     SET     @I+1
  451             IDRP
  452             IFE     @I,1
  453             @MOVE   #1,,,#2
  454             IFE     @I,2
  455             @MOVE   #1,,#2
  456             IFE     @I,3
  457             @MOVE   #1,#2
  458             ENDM
  459      @MOVE  MACRO   FROMITEM,OFFSET,AR,TOITEM,OFFSET,AR
  460             IFL     #1@F,0,%UNSIGNED
  461             IFL     @N1,@N2,%UNSIGNED
  462             IFE     @B1,0,2
  463             SZN     @W1,,#3
  464             TPL     5,IC
  465             INE     @B1,0,4
  466             CMPB    @A1,0,0
  467             BDSC    @W1,1,@C1,@B1,#3
  468             BDSC    ,0
  469             TZE     5,IC
  470             CSR     @A1,@A2,3,1
  471             BDSC    @W1,@N1,@C1,@B1,#3
  472             BDSC    @W2,@N2,@C2,@B2,#6
  473             TRA     4,IC
  474      UNSIGNED MARK
  475             CSR     @A1,@A2,3,0
  476             BDSC    @W1,@N1,@C1,@B1,#3
  477             BDSC    @W2,@N2,@C2,@B2,#6
  478             ENDM    @MOVE
  479      *
  480      * INSTRUCTIONS
  481      *
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         14   
  482      ADAR   MACRO   REG,ITEM,OFFSET,AR
  483             @INSTX  AAR,,23,#1,#2,#3,#4
  484             ENDM    ADAR
  485      ADDA   MACRO   ITEM,OFFSET,AR
  486             @INST   ADA,36,#1,#2,#3
  487             ENDM    ADDA
  488      ADDAQ  MACRO   ITEM,OFFSET,AR
  489             IFL     #1@N,36
  490             @INST   ADL,36,#1,#2,#3
  491             IFE     #1@N,36,%DOUBLE
  492             IFE     #1@S,1,%DOUBLE
  493             @INST   ADL,36,#1,#2,#3
  494             INE     0,0,%ENDM
  495      DOUBLE MARK
  496             @INST   ADAQ,72,#1,#2,#3
  497      ENDM   MARK
  498             ENDM    ADDAQ
  499      ADDE   MACRO   ITEM,OFFSET,AR
  500             @INST   ADE,8,#1,#2,#3
  501             ENDM    ADDE
  502      ADDL   MACRO   ITEM,OFFSET,AR
  503             @INST   ADL,36,#1,#2,#3
  504             ENDM    ADDL
  505      ADDLA  MACRO   ITEM,OFFSET,AR
  506             @INST   ADLA,36,#1,#2,#3
  507             ENDM    ADDLA
  508      ADDLAQ MACRO   ITEM,OFFSET,AR
  509             @INST   ADLAQ,72,#1,#2,#3
  510             ENDM    ADDLAQ
  511      ADDLQ  MACRO   ITEM,OFFSET,AR
  512             @INST   ADLQ,36,#1,#2,#3
  513             ENDM    ADDLQ
  514      ADDLX  MACRO   REG,ITEM,OFFSET,AR
  515             @INSTX  ADLX,,18,#1,#2,#3,#4
  516             ENDM    ADDLX
  517      ADDOS  MACRO   ITEM,OFFSET,AR          (MAY USE @TEMPX)
  518             @SETUPA #1,#2
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         15   
  519             IFE     @B,0,%NOTL
  520             IFE     @N,36,%NOTW
  521             AOS     @W,,#3
  522             INE     0,0,%ENDM
  523      NOTW   MARK
  524             IFE     @N,18,%UNAL
  525             LDX     @TEMPX,@W,,#3
  526             ADLX    @TEMPX,1,DU
  527             STX     @TEMPX,@W,,#3
  528             INE     0,0,%ENDM
  529      NOTL   MARK
  530             IFE      @B,18,%UNAL
  531             IFE     @N,18,%UNAL
  532             LXL     @TEMPX,@W,,#3
  533             ADLX    @TEMPX,1,DU
  534             SXL     @TEMPX,@W,,#3
  535             INE     0,0,%ENDM
  536      UNAL   MARK
  537             IFL     @N,37,%DBLW
  538             @ALIGN  36,#1,#2,#3
  539             AOS     @TEMP,,@AUTO
  540             @STORE  36,#1,#2,#3
  541             INE     0,,%ENDM
  542      DBLW   MARK
  543             @ALIGN  72,#1,#2,#3
  544             AOS     @TEMP+1,,@AUTO
  545             TNC     2,IC
  546             AOS     @TEMP,,@AUTO
  547             @STORE  72,#1,#2,#3
  548      ENDM   MARK
  549             ENDM    ADDOS
  550      ADDQ   MACRO   ITEM,OFFSET,AR
  551             @INST   ADQ,36,#1,#2,#3
  552             ENDM    ADDQ
  553      ADDSA  MACRO   ITEM,OFFSET,AR
  554             @INSTS  ASA,#1,#2,#3
  555             ENDM    ADDSA
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         16   
  556      ADDSQ  MACRO   ITEM,OFFSET,AR
  557             @INSTS  ASQ,#1,#2,#3
  558             ENDM    ADDSQ
  559      ADDSX  MACRO   REG,ITEM,OFFSET,AR
  560             @INSTSX ASX,18,#1,#2,#3,#4
  561             ENDM    ADDSX
  562      ADDWCA MACRO   ITEM,OFFSET,AR
  563             @INST   AWCA,36,#1,#2,#3
  564             ENDM    ADDWCA
  565      ADDWCQ MACRO   ITEM,OFFSET,AR
  566             @INST   AWCQ,36,#1,#2,#3
  567             ENDM    ADDWCQ
  568      ADDX   MACRO   REG,ITEM,OFFSET,AR
  569             @INSTX  ADX,,18,#1,#2,#3,#4
  570             ENDM    ADDX
  571      ANDA   MACRO   ITEM,OFFSET,AR
  572             @INST   ANA,36,#1,#2,#3
  573             ENDM    ANDA
  574      ANDAQ  MACRO   ITEM,OFFSET,AR
  575             @INST   ANAQ,72,#1,#2,#3
  576             ENDM    ANDAQ
  577      ANDQ   MACRO   ITEM,OFFSET,AR
  578             @INST   ANQ,36,#1,#2,#3
  579             ENDM    ANDQ
  580      ANDSA  MACRO   ITEM,OFFSET,AR
  581             @INSTS  ANSA,#1,#2,#3
  582             ENDM    ANDSA
  583      ANDSQ  MACRO   ITEM,OFFSET,AR
  584             @INSTS  ANSQ,#1,#2,#3
  585             ENDM    ANDSQ
  586      ANDSX  MACRO   REG,ITEM,OFFSET,AR
  587             @INSTSX ANSX,18,#1,#2,#3,#4
  588             ENDM    ANDSX
  589      ANDX   MACRO   REG,ITEM,OFFSET,AR
  590             @INSTX  ANX,,18,#1,#2,#3,#4
  591             ENDM    ANDX
  592      ARAD   MACRO   REG,ITEM,OFFSET,AR
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         17   
  593             @INSTSX ARA,23,#1,#2,#3,#4
  594             ENDM    ARAD
  595      ARND   MACRO   REG,ITEM,OFFSET,AR
  596             @INSTSX ARN,22,#1,#2,#3,#4
  597             ENDM    ARND
  598      CANDA  MACRO   ITEM,OFFSET,AR
  599             @INST   CANA,36,#1,#2,#3
  600             ENDM    CANDA
  601      CANDAQ MACRO   ITEM,OFFSET,AR
  602             @INST   CANAQ,72,#1,#2,#3
  603             ENDM    CANDAQ
  604      CANDQ  MACRO   ITEM,OFFSET,AR
  605             @INST   CANQ,36,#1,#2,#3
  606             ENDM    CANDQ
  607      CANDX  MACRO   REG,ITEM,OFFSET,AR
  608             @INSTX  CANX,,18,#1,#2,#3,#4
  609             ENDM    CANDX
  610      CMAG   MACRO   ITEM,OFFSET,AR
  611             @INST   CMG,36,#1,#2,#3
  612             ENDM    CMAG
  613      CMSK   MACRO   ITEM,OFFSET,AR
  614             @INST   CMK,36,#1,#2,#3
  615             ENDM    CMSK
  616      COMPA  MACRO   ITEM,OFFSET,AR
  617             @INST   CMPA,36,#1,#2,#3
  618             ENDM    COMPA
  619      COMPAQ MACRO   ITEM,OFFSET,AR
  620             @INST   CMPAQ,72,#1,#2,#3
  621             ENDM    COMPAQ
  622      COMPQ  MACRO   ITEM,OFFSET,AR
  623             @INST   CMPQ,36,#1,#2,#3
  624             ENDM    COMPQ
  625      COMPX  MACRO   REG,ITEM,OFFSET,AR
  626             @INSTX  CMPX,,18,#1,#2,#3,#4
  627             ENDM    COMPX
  628      CNOTA  MACRO   ITEM,OFFSET,AR
  629             @INST   CNAA,36,#1,#2,#3
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         18   
  630             ENDM    CNOTA
  631      CNOTAQ MACRO   ITEM,OFFSET,AR
  632             @INST   CNAAQ,72,#1,#2,#3
  633             ENDM    CNOTAQ
  634      CNOTQ  MACRO   ITEM,OFFSET,AR
  635             @INST   CNAQ,36,#1,#2,#3
  636             ENDM    CNOTQ
  637      CNOTX  MACRO   REG,ITEM,OFFSET,AR
  638             @INSTX  CNAX,,18,#1,#2,#3,#4
  639             ENDM    CNOTX
  640      COMPWL MACRO   ITEM,OFFSET,AR
  641             @INST   CWL,36,#1,#2,#3
  642             ENDM    COMPWL
  643      DIVI   MACRO   ITEM,OFFSET,AR
  644             @INST   DIV,36,#1,#2,#3
  645             ENDM    DIVI
  646      DIVF   MACRO   ITEM,OFFSET,AR
  647             @FINST  DVF,36,#1,#2,#3
  648             ENDM    DIVF
  649      EORA   MACRO   ITEM,OFFSET,AR
  650             @INST   ERA,36,#1,#2,#3
  651             ENDM    EORA
  652      EORAQ  MACRO   ITEM,OFFSET,AR
  653             @INST   ERAQ,72,#1,#2,#3
  654             ENDM    EORAQ
  655      EORQ   MACRO   ITEM,OFFSET,AR
  656             @INST   ERQ,36,#1,#2,#3
  657             ENDM    EORQ
  658      EORSA  MACRO   ITEM,OFFSET,AR
  659             @INSTS  ERSA,#1,#2,#3
  660             ENDM    EORSA
  661      EORSQ  MACRO   ITEM,OFFSET,AR
  662             @INSTS  ERSQ,#1,#2,#3
  663             ENDM    EORSQ
  664      EORSX  MACRO   REG,ITEM,OFFSET,AR
  665             @INSTSX ERSX,18,#1,#2,#3,#4
  666             ENDM    EORSX
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         19   
  667      EORX   MACRO   REG,ITEM,OFFSET,AR
  668             @INSTX  ERX,,18,#1,#2,#3,#4
  669             ENDM    EORX
  670      FADD   MACRO   ITEM,OFFSET,AR
  671             @DFINST FAD,,#1,#2,#3
  672             ENDM    FADD
  673      FCMAG  MACRO   ITEM,OFFSET,AR
  674             @DFINST FCMG,,#1,#2,#3
  675             ENDM    FCMAG
  676      FCOMP  MACRO   ITEM,OFFSET,AR
  677             @DFINST FCMP,,#1,#2,#3
  678             ENDM    FCOMP
  679      FDIV   MACRO   ITEM,OFFSET,AR
  680             @DFINST FDV,,#1,#2,#3
  681             ENDM    FDIV
  682      FIDIV  MACRO   ITEM,OFFSET,AR
  683             @DFINST FDI,,#1,#2,#3
  684             ENDM    FIDIV
  685      FLOAD  MACRO   ITEM,OFFSET,AR
  686             @DFINST FLD,,#1,#2,#3
  687             ENDM    FLOAD
  688      FMUL   MACRO   ITEM,OFFSET,AR
  689             @DFINST FMP,,#1,#2,#3
  690             ENDM    FMUL
  691      FSETZN MACRO   ITEM,OFFSET,AR
  692             @FINST  FSZN,36,#1,#2,#3
  693             ENDM    FSETZN
  694      FSTORE MACRO   ITEM,OFFSET,AR
  695             @DFINST FST,ST,#1,#2,#3
  696             ENDM    FSTORE
  697      FSTRND MACRO   ITEM,OFFSET,AR
  698             @DFINST FSTR,ST,#1,#2,#3
  699             ENDM    FSTRND
  700      FSUB   MACRO   ITEM,OFFSET,AR
  701             @DFINST FSB,,#1,#2,#3
  702             ENDM    FSUB
  703      IORA   MACRO   ITEM,OFFSET,AR
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         20   
  704             @INST   ORA,36,#1,#2,#3
  705             ENDM    IORA
  706      IORAQ  MACRO   ITEM,OFFSET,AR
  707             @INST   ORAQ,72,#1,#2,#3
  708             ENDM    IORAQ
  709      IORQ   MACRO   ITEM,OFFSET,AR
  710             @INST   ORQ,36,#1,#2,#3
  711             ENDM    IORQ
  712      IORSA  MACRO   ITEM,OFFSET,AR
  713             @INSTS  ORSA,#1,#2,#3
  714             ENDM    IORSA
  715      IORSQ  MACRO   ITEM,OFFSET,AR
  716             @INSTS  ORSQ,#1,#2,#3
  717             ENDM    IORSQ
  718      IORSX  MACRO   REG,ITEM,OFFSET,AR
  719             @INSTSX ORSX,18,#1,#2,#3,#4
  720             ENDM    IORSX
  721      IORX   MACRO   REG,ITEM,OFFSET,AR
  722             @INSTX  ORX,,18,#1,#2,#3,#4
  723             ENDM    IORX
  724      LNEGA  MACRO   ITEM,OFFSET,AR
  725             @LDACC  LCA,A,INE,36,#1,#2,#3
  726             ENDM    LNEGA
  727      LNEGAQ MACRO   ITEM,OFFSET,AR
  728             @LDACC  LCAQ,L,INE,72,#1,#2,#3
  729             ENDM    LNEGAQ
  730      LNEGQ  MACRO   ITEM,OFFSET,AR
  731             @LDACC  LCQ,Q,INE,36,#1,#2,#3
  732             ENDM    LNEGQ
  733      LNEGX  MACRO   REG,ITEM,OFFSET,AR
  734             @INSTX  LCX,,18,#1,#2,#3,#4
  735             ENDM    LNEGX
  736      LOADA  MACRO   ITEM,OFFSET,AR
  737             @LDACC  LDA,A,IFG,36,#1,#2,#3
  738             ENDM    LOADA
  739      LOADAQ MACRO   ITEM,OFFSET,AR
  740             @LDACC  LDAQ,L,IFG,72,#1,#2,#3
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         21   
  741             ENDM    LOADAQ
  742      LOADAR MACRO   REG,ITEM,OFFSET,AR
  743             @INSTX  LAR,,24,#1,#2,#3,#4
  744             ENDM    LOADAR
  745      LOADAS MACRO   ITEM,OFFSET,AR
  746             @INST   LDAS,72,#1,#2,#3
  747             ENDM    LOADAS
  748      LOADD  MACRO   REG,ITEM,OFFSET,AR COPY OR NORMAL SHRINK VECTOR ONLY
  749             @INSTX  LDD,,72,#1,#2,#3,#4
  750             ENDM    LOADD
  751      LOADDSA MACRO  ITEM,OFFSET,AR
  752             @INST   LDDSA,16,#1,#2,#3
  753             ENDM    LOADDSA
  754      LOADDSD MACRO  ITEM,OFFSET,AR
  755             @INST   LDDSD,72,#1,#2,#3
  756             ENDM    LOADDSD
  757      LOADE  MACRO   ITEM,OFFSET,AR
  758             @INST   LDE,8,#1,#2,#3
  759             ENDM    LOADE
  760      LOADI  MACRO   ITEM,OFFSET,AR
  761             @INSTR  LDI,#1,#2,#3
  762             ENDM    LOADI
  763      LOADO  MACRO   ITEM,OFFSET,AR
  764             @INSTR  LDO,#1,#2,#3
  765             ENDM    LOADO
  766      LOADP  MACRO   REG,ITEM,OFFSET,AR
  767             @INSTX  LDP,,36,#1,#2,#3,#4
  768             ENDM    LOADP
  769      LOADPS MACRO   ITEM,OFFSET,AR
  770             @INST   LDPS,72,#1,#2,#3
  771             ENDM    LOADPS
  772      LOADPDBR MACRO ITEM,OFFSET,AR
  773             @INST   LPDBR,15,#1,#2,#3
  774             ENDM    LOADPDBR
  775      LOADQ  MACRO   ITEM,OFFSET,AR
  776             @LDACC  LDQ,Q,IFG,36,#1,#2,#3
  777             ENDM    LOADQ
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         22   
  778      LOADSS MACRO   ITEM,OFFSET,AR
  779             @INST   LDSS,72,#1,#2,#3
  780             ENDM    LOADSS
  781      LOADT  MACRO   ITEM,OFFSET,AR
  782             @INST   LDT,27,#1,#2,#3
  783             ENDM    LOADT
  784      LOADX  MACRO   REG,ITEM,OFFSET,AR
  785             @INSTX  LDX,LXL,18,#1,#2,#3,#4
  786             ENDM    LOADX
  787      MULI   MACRO   ITEM,OFFSET,AR
  788             @INST   MPY,36,#1,#2,#3
  789             ENDM    MULI
  790      MULF   MACRO   ITEM,OFFSET,AR
  791             @FINST  MPF,36,#1,#2,#3
  792             ENDM    MULF
  793      NDAR   MACRO   REG,ITEM,OFFSET,AR
  794             @INSTX  NAR,,22,#1,#2,#3,#4
  795             ENDM    NDAR
  796      SETZ   MACRO   ITEM,OFFSET,AR          (MAY USE @TEMPX)
  797             @SETUPA #1,#2
  798             IFE     @B,0,%NOTL
  799             IFE     @N,36,%NOTW
  800             SZN     @W,,#3
  801             INE     0,0,%ENDM
  802      NOTW   MARK
  803             IFE     @N,18,%UNAL
  804             LDX     @TEMPX,@W,,#3
  805             INE     0,0,%ENDM
  806      NOTL   MARK
  807             IFE      @B,18,%UNAL
  808             IFE     @N,18,%UNAL
  809             LXL     @TEMPX,@W,,#3
  810             INE     0,0,%ENDM
  811      UNAL   MARK
  812             @SETUPC #3
  813             CMPB    @A,,0
  814             BDSC    @W,@N,@C,@B,#3
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         23   
  815             BDSC    ,0
  816      ENDM   MARK
  817             ENDM    SETZ
  818      SETZN  MACRO   ITEM,OFFSET,AR          (MAY USE @TEMPX)
  819             @SETUPA #1,#2
  820             IFE     @B,0,%NOTL
  821             IFE     @N,36,%NOTW
  822             SZN     @W,,#3
  823             INE     0,0,%ENDM
  824      NOTW   MARK
  825             IFE     @N,18,%UNAL
  826             LDX     @TEMPX,@W,,#3
  827             INE     0,0,%ENDM
  828      NOTL   MARK
  829             IFE      @B,18,%UNAL
  830             IFE     @N,18,%UNAL
  831             LXL     @TEMPX,@W,,#3
  832             INE     0,0,%ENDM
  833      UNAL   MARK
  834             @ALIGN  72,#1,#2,#3
  835             IFL     @N,37
  836             SZN     @TEMP+1,,@AUTO
  837             IFG     @N,36,%ENDM
  838             SZN     @TEMP,,@AUTO
  839             STI     @TEMP,,@AUTO
  840             SZN     @TEMP+1,,@AUTO
  841             TZE     3,IC
  842             LDX     @TEMPX,=O377777,DU
  843             ANSX    @TEMPX,@TEMP,,@AUTO
  844             LDI     @TEMP,,@AUTO
  845      ENDM   MARK
  846             ENDM    SETZN
  847      STORA  MACRO   ITEM,OFFSET,AR
  848             @STACC  A,#1,#2,#3
  849             ENDM    STORA
  850      STORAQ MACRO   ITEM,OFFSET,AR
  851             IFL     #1@N,37
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         24   
  852             @STACC  Q,#1,#2,#3
  853             IFG     #1@N,36
  854             @STINST STAQ,72,#1,#2,#3
  855             ENDM    STORAQ
  856      STORAR MACRO   REG,ITEM,OFFSET,AR
  857             @STINSTX  SAR,,24,#1,#2,#3,#4
  858             ENDM    STORAR
  859      STORAS MACRO   ITEM,OFFSET,AR
  860             @STINST STAS,72,#1,#2,#3
  861             ENDM    STORAS
  862      STORDSA MACRO  ITEM,OFFSET,AR
  863             @STINST STDSA,36,#1,#2,#3
  864             ENDM    STORDSA
  865      STORDSD MACRO  ITEM,OFFSET,AR
  866             @STINST STDSD,72,#1,#2,#3
  867             ENDM    STORDSD
  868      STORE  MACRO   ITEM,OFFSET,AR
  869             @SETUPA #1,#2
  870             STE     @TEMP,,@AUTO
  871             @SETUPC #3
  872             @STORE  8,#1,#2,#3
  873             ENDM    STORE
  874      STORNZ MACRO   ITEM,OFFSET,AR
  875             @SETUPA #1,#2
  876             IFE     @B,0,%UNAL
  877             IFG     @N,17,%UNAL
  878             STC2    @W,,#3
  879             INE     0,0,%ENDM
  880      UNAL   MARK
  881             @SETUPC #3
  882             CSR     ,@A,3,1
  883             BDSC    ,0
  884             BDSC    @W,@N,@C,@B,#3
  885      ENDM   MARK
  886             ENDM    STORNZ
  887      STORO  MACRO   ITEM,OFFSET,AR
  888             @STINST STO,36,#1,#2,#3
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         25   
  889             ENDM    STORO
  890      STORP  MACRO   REG,ITEM,OFFSET,AR
  891             @STINSTX  STP,,36,#1,#2,#3,#4
  892             ENDM    STORP
  893      STORPDBR MACRO ITEM,OFFSET,AR
  894             @STINST SPDBR,72,#1,#2,#3
  895             ENDM    STORPDBR
  896      STORPS MACRO   ITEM,OFFSET,AR
  897             @STINST STPS,72,#1,#2,#3
  898             ENDM    STORPS
  899      STORQ  MACRO   ITEM,OFFSET,AR
  900             @STACC  Q,#1,#2,#3
  901             ENDM    STORQ
  902      STORSS MACRO   ITEM,OFFSET,AR
  903             @STINST STSS,72,#1,#2,#3
  904             ENDM    STORSS
  905      STORT  MACRO   ITEM,OFFSET,AR
  906             STT     @TEMP,,@AUTO
  907             @SETUPC #3
  908             @STORE  27,#1,#2,#3
  909             ENDM    STORT
  910      STORTA MACRO   ITEM,OFFSET,AR
  911             @STINST STTA,72,#1,#2,#3
  912             ENDM    STORTA
  913      STORTD MACRO   ITEM,OFFSET,AR
  914             @STINST STTD,72,#1,#2,#3
  915             ENDM    STORTD
  916      STORX  MACRO   REG,ITEM,OFFSET,AR
  917             @STINSTX  STX,SXL,18,#1,#2,#3,#4
  918             ENDM    STORX
  919      STORZ  MACRO   ITEM,OFFSET,AR
  920             @SETUPA #1,#2
  921             IFE     @B,0,%UNAL
  922             IFE     @N,36,2
  923             STZ     @W,,#3
  924             INE     0,0,%ENDM
  925             IFE     @N,72,3
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         26   
  926             STZ     @W,,#3
  927             STZ     @W+1,,#3
  928             INE     0,0,%ENDM
  929      UNAL   MARK
  930             @SETUPC #3
  931             CSR     ,@A,3,0
  932             BDSC    ,0
  933             BDSC    @W,@N,@C,@B,#3
  934      ENDM   MARK
  935             ENDM    STORZ
  936      SUBA   MACRO   ITEM,OFFSET,AR
  937             @INST   SBA,36,#1,#2,#3
  938             ENDM    SUBA
  939      SUBAQ  MACRO   ITEM,OFFSET,AR
  940             @INST   SBAQ,72,#1,#2,#3
  941             ENDM    SUBAQ
  942      SUBLA  MACRO   ITEM,OFFSET,AR
  943             @INST   SBLA,36,#1,#2,#3
  944             ENDM    SUBLA
  945      SUBLAQ MACRO   ITEM,OFFSET,AR
  946             @INST   SBLAQ,72,#1,#2,#3
  947             ENDM    SUBLAQ
  948      SUBLQ  MACRO   ITEM,OFFSET,AR
  949             @INST   SBLQ,36,#1,#2,#3
  950             ENDM    SUBLQ
  951      SUBLX  MACRO   REG,ITEM,OFFSET,AR
  952             @INSTX  SBLX,,18,#1,#2,#3,#4
  953             ENDM    SUBLX
  954      SUBQ   MACRO   ITEM,OFFSET,AR
  955             @INST   SBQ,36,#1,#2,#3
  956             ENDM    SUBQ
  957      SUBSA  MACRO   ITEM,OFFSET,AR
  958             @INSTS  SSA,#1,#2,#3
  959             ENDM    SUBSA
  960      SUBSQ  MACRO   ITEM,OFFSET,AR
  961             @INSTS  SSQ,#1,#2,#3
  962             ENDM    SUBSQ
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         27   
  963      SUBSX  MACRO   REG,ITEM,OFFSET,AR
  964             @INSTSX SSX,18,#1,#2,#3,#4
  965             ENDM    SUBSX
  966      SUBWCA MACRO   ITEM,OFFSET,AR
  967             @INST   SWCA,36,#1,#2,#3
  968             ENDM    SUBWCA
  969      SUBWCQ MACRO   ITEM,OFFSET,AR
  970             @INST   SWCQ,36,#1,#2,#3
  971             ENDM    SUBWCQ
  972      SUBX   MACRO   REG,ITEM,OFFSET,AR
  973             @INSTX  SBX,,18,#1,#2,#3,#4
  974             ENDM    SUBX
  975      UFADD  MACRO   ITEM,OFFSET,AR
  976             @DFINST UFA,,#1,#2,#3
  977             ENDM    UFADD
  978      UFMUL  MACRO   ITEM,OFFSET,AR
  979             @DFINST UFM,,#1,#2,#3
  980             ENDM    UFMUL
  981      UFSUB  MACRO   ITEM,OFFSET,AR
  982             @DFINST UFS,,#1,#2,#3
  983             ENDM    UFSUB
  984      *
  985      * PL6 CALLING SEQUENCE
  986      *
  987      CALL6  MACRO   SUBROUTINE,NARGS,ALTRET  CP-6 CALLING SEQUENCE
  988             TSX1    #1
  989             IFE     '#3',''
  990             NOP
  991             INE     '#3',''
  992             TRA     #3
  993             INE     #2,0
  994             TRA     #2+1,IC
  995             ENDM    CALL6
  996      *
  997      ARG6   MACRO   (ITEM,OFFSET),DTYPE,SA,IND,SZ  ARGUMENT DESCRIPTOR
  998      @D     SET     0
  999             IFE     '#2','SBIN'
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         28   
 1000      @D     SET     1
 1001             IFE     '#2','PTR'
 1002      @D     SET     13
 1003             IFE     '#2','ENTRY'
 1004      @D     SET     16
 1005             IFE     '#2','STR'
 1006      @D     SET     17
 1007             IFE     '#2','BIT'
 1008      @D     SET     19
 1009             IFE     '#2','CHAR'
 1010      @D     SET     21
 1011             IFE     '#2','UBIN'
 1012      @D     SET     24
 1013             IFE     '#2','SBINHALF'
 1014      @D     SET     25
 1015             IFE     '#2','EPTR'
 1016      @D     SET     28
 1017             IFE     @D,0
 1018      @D     SET     #2
 1019      @S     SET     1
 1020             IFE     '#3','STATIC'
 1021      @S     SET     0
 1022      @I     SET     0
 1023             IFE     '#4','*'
 1024      @I     SET     1
 1025             IFE     '#4','ARG'
 1026      @I     SET     2
 1027             IFE     '#4','*SZ'
 1028      @I     SET     3
 1029             IFE     '#5',''
 1030             @ARG    @D,@S,@I,0,#1
 1031             INE     '#5','',2
 1032             @ARG    @D,@S,@I,1,#1
 1033             @SZARG  #5
 1034             ENDM    ARG6
 1035      *
 1036      @ARG   MACRO   DTYPE,SA,IND,SZ,ITEM,OFFSET
15:06 JUL 28 '97 NI_FIELD_C.:E05SI                                         29   
 1037             IFE     '#6',''
 1038             VFD     18/#5,6/0,6/#1,1/0,2/#3,1/#2,1/#4,1/1
 1039             INE     '#6','',3
 1040             @SETUPA #5,#6
 1041             @SETUPC
 1042             VFD     18/@W,2/@C,4/@B,6/#1,1/0,2/#3,1/#2,1/#4,1/1
 1043             ENDM    @ARG
 1044      @SZARG MACRO   SIZE|ADDR,IND,SA,WORDS
 1045      @S     SET     0
 1046             IFE     '#3,','STATIC'
 1047      @S     SET     1
 1048             INE     '#2','*'
 1049             VFD     24/#1,12/0
 1050             IFE     '#2','*'
 1051             VFD     18/#1,6/0,6/#4,3/1,1/@S,2/0
 1052             ENDM    @SZARG
 1053      *
 1054      * LOCK A GATE
 1055      *
 1056      LOCK   MACRO   GATE
 1057             SZNC    #1
 1058             TZE     -1,IC
 1059             ENDM    LOCK
 1060      *
 1061      * END FIELD MACROS

