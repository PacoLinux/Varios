VERSION E05

PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:1    
        1        1        /*M*       SSU$DELTAGO: MOVE SS FRAME TO DELTA TCB AND ENTER DELTA    */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*                                                                    */
        8        8        /*X* PLM=3,IND=5,ENU=0,ECU=0   */
        9        9
       10       10        SSU$DELTAGO: PROC(ECC,ECINFO,HR_SIZE);
       11       11        /*                                                                    */
       12       12    1   DCL   ECC UBIN(36);                     /* EXCEPTION CONDITION CODE           */
       13       13    1   DCL   ECINFO(0:1) UBIN(36);             /* EXCEPTION COND INFO ARRAY          */
       14       14    1   DCL   HR_SIZE UBIN;                     /* HIST REG SIZE (FROM HFA$FAULT)     */
       15       15        /*                                                                    */
       16       16    1   DCL I SBIN;
       17       17    1   DCL TEMP1 SBIN;
       18       18    1   DCL STK$ PTR;
       19       19                                                /**/
       20       20    1   DCL UDN$MAGIC ENTRY;
       21       21    1   DCL UDN$MAGICLS ENTRY;
       22       22    1   DCL UDN$BLDASR ENTRY;
       23       23    1   DCL UDN$JAMSS ENTRY;
       24       24    1   DCL   JSN$FIXSSM ENTRY;
       25       25    1   DCL   JSS$BACKSS ENTRY;
       26       26    1   DCL JSE$ABORTM ENTRY;
       27       27    1   DCL JSE$ABORTX ENTRY;
       28       28    1   DCL   JSS$FIXLASR ENTRY;
       29       29    1   DCL   JSN$DELTRAS ENTRY(3);
       30       30    1   DCL   SSC$SERV ENTRY;
       31       31    1   DCL   SSS$DELTRD ENTRY(3);
       32       32    1   DCL   SST$SSFTCB ENTRY(6) ALTRET;
       33       33    1   DCL   SSV$XXDO ENTRY(3) ALTRET;
       34       34    1   DCL SC_SSUTCB ENTRY CONV(2,0);
       35       35    1   DCL SC_SSUASF ENTRY CONV(2,0);
       36       36    1   DCL HFC$ASSOCCLR ENTRY (3);
       37       37        /*                                                                    */
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:2    
       38       38        /**/
       39       39    1   DCL B$$PTR PTR BASED ALIGNED;
       40       40    1   DCL 1 B$$PTRR REDEF B$$PTR ALIGNED,
       41       41    1         2 OFFSET UBIN HALF UNAL,
       42       42    1         2 * UBIN(6) UNAL,
       43       43    1         2 SEGID UBIN(12) UNAL;
       44       44        /**/
       45       45    1   DCL B$SDS1$ PTR SYMREF READONLY;
       46       46    1   DCL B$UPT$ PTR SYMREF READONLY;
       47       47    1   DCL B$JIT$ PTR SYMREF READONLY;
       48       48    1   DCL B$LS$ PTR SYMREF READONLY;
       49       49
       50       50    1   DCL J_DBMXAS_D UBIN(36) SYMREF READONLY;
       51       51    1   DCL J_DBMXSS_D UBIN(36) SYMREF READONLY;
       52       52
       53       53        %INCLUDE B$MAP;
       54      152        %INCLUDE S_WSPTD_R;
       55      168        %INCLUDE MM_DATA_R;
       56      688        %INCLUDE B_MAGIC_C;
       57      806        %B_MPT (FPTN=B_MPT,STCLASS=SYMREF);
       58      899        %INCLUDE B_MACROS_C;
       59     1010        %T01DESCR (NAME=B$$DESCR);
       60     1018        %INCLUDE B_ULSMAC_C;
       61     2127        %B_USRULS (FPTN=B$ULS,STCLASS=BASED);
       62     2326        %INCLUDE B_MLSMAC_C;
       63     3268        %B_MLS (FPTN=B$MLNK,STCLASS=BASED);
       64     4083        %INCLUDE B_UHJMAC_C;
       65     4412        %B_USDS (FPTN=B$SDS,STCLASS=BASED);
       66     4464        %INCLUDE B$SS;
       67     4643        %INCLUDE B$USER;
       68     4859        %B$USERREFS;
       69     4863        %INCLUDE B$JIT_C;
       70     5177        %B$JIT0;
       71     5266        %U$JIT1X;
       72     5269        %M$JIT2;
       73     5279        %F$JIT3X;
       74     5282        %S$JIT4X;
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:3    
       75     5285        %J$JIT5;
       76     5373        %A$JIT6X;
       77     5376
       78     5377        %SUB B$MAP=B$UPT$->B$MAP;
       79     5378        %SUB B$JIT=B$JIT$->B$JIT;
       80     5379        %SUB B$SS=B_MPT.SS$->B$SS;
       81     5380        /* TO SET JIT.ERR */
       82     5381        %MACRO ERRCODE(NAME=ERRWD,SEV#=SEV_ERR#,COD#=0);
       83     5382        DCL 1 NAME CONSTANT,
       84     5383              2 F BIT(12) UNAL INIT(FCG#),
       85     5384              2 M BIT(6) UNAL INIT(MID#),
       86     5385              2 * BIT(1) UNAL INIT('1'B),
       87     5386              2 C UBIN(14) UNAL INIT(COD#),
       88     5387              2 S UBIN(3) UNAL INIT(SEV#);
       89     5388        %MEND;
       90     5389        %SUB FCG#='2323'O;
       91     5390        %SUB MID#='25'O;
       92     5391                                                /*                                    */
       93     5392        %INCLUDE HF_ERRORS_C;
       94     5477        %INCLUDE UD_SEV_C;
       95     5491
       96     5492        %ERRCODE (NAME=EASF,COD#=%E$ASF);
       97     5500        %ERRCODE (NAME=ESSF,COD#=%E$SSF);
       98     5508        %INCLUDE UE_CP6;
       99     6199        %SUB_ECCDELTA;
      100     6236        %B$ALIB;
      101     6240        %B$TCB (NAME=B$TCB,ALIGNED=DALIGNED);
      102     6243        %B$EXCFR (NAME=B$EXCFR,STCLASS=BASED);
      103     6261    1   DCL 1 MAP_DBRK CONSTANT,
      104     6262    1         2 * UBIN HALF UNAL INIT(0),
      105     6263    1         2 * BIT(10) INIT(%SCDBRK),
      106     6264    1         2 * BIT(8) INIT('0'B);
      107     6265    1   DCL 1 MAP_PGWRITE CONSTANT,
      108     6266    1         2 * UBIN HALF UNAL INIT(0),
      109     6267    1         2 * BIT(12) INIT('0'B),
      110     6268    1         2 * BIT(6) INIT(%PGWRITE);
      111     6269        %EJECT;
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:4    
      112     6270
      113     6271        /*
      114     6272             Prior to entering DELTA, we must verify that we are not
      115     6273             approaching the limit on the Argument Stack or the
      116     6274             Safe-Store Stack.
      117     6275        */
      118     6276    1      CALL UDN$MAGIC;
      119     6277        /*   Initialize ASR in case it was used by comgroups.
      120     6278             Then do Magic again to get it right in magic descriptors.        */
      121     6279    1      CALL UDN$BLDASR;
      122     6280    1      CALL UDN$MAGIC;
      123     6281    1      IF B_MPT.ASDESC$->B$$DESCR.BASE > J_DBMXAS_D
      124     6282    2      THEN DO;
      125     6283    2           IF B_MPT.SSDESC$->B$$DESCR.WSR ~= 7 THEN CALL SC_SSUASF;
      126     6284
      127     6285        /*S*  SCREECH_CODE:  SSU-S$MAGIC
      128     6286              MESSAGE: The user's Argument Stack is full on entry to DELTA.
      129     6287              TYPE:    SUA
      130     6288              REMARKS: The user has pushed too much on the Argument Stack.
      131     6289                       This can only happen if the top Safe-Store frame
      132     6290                       is not the user's.
      133     6291        */
      134     6292
      135     6293    2           CALL JSS$FIXLASR;
      136     6294    2           IF B$JIT.ERR.CODE=0 THEN B$JIT.ERR=EASF;
      137     6295
      138     6296        /*E*  ERROR:  SSU-E$ASF-E
      139     6297              MESSAGE: Argument/Parameter Stack is full on entry to your Debugger.
      140     6298        */
      141     6299    2           CALL SSC$SERV;
      142     6300    2           CALL JSE$ABORTM;
      143     6301    2           END;
      144     6302
      145     6303    1      IF B_MPT.SSDESC$->B$$DESCR.BASE > J_DBMXSS_D
      146     6304    2      THEN DO;
      147     6305    2           CALL JSN$FIXSSM;                /*Will SUA if top frame not user*/
      148     6306    2           B$JIT.ERR=ESSF;
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:5    
      149     6307
      150     6308        /*E*  ERROR: SSU-E$SSF-E
      151     6309              MESSAGE: Your Safe-Store Stack is full on entry to your Debugger.
      152     6310        */
      153     6311    2           CALL SSC$SERV;
      154     6312    2           CALL JSE$ABORTX;
      155     6313    2           END;
      156     6314        %EJECT;
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:6    
      157     6315        /*         BUILD DESCRIPTORS FOR DELTA LSEG AND TCB                   */
      158     6316    1      B_MPT.LSDESC$->B$$DESCR=B$LS$->B$MLNK.DBLS;
      159     6317    1      CALL UDN$MAGICLS;
      160     6318        /*                                                                    */
      161     6319        /*                                                   */
      162     6320    1      IF ECC=%ECC_SAVLDT# THEN GOTO SS_MOVED;
      163     6321        /*         MOVE SS FRAME TO DELTA'S TCB                               */
      164     6322    1      TEMP1=0;
      165     6323    1      IF ECC ~= %ECC_ALIB#
      166     6324    1      THEN
      167     6325    2      DO WHILE (B$SS.ISR.WSR ~= 7);
      168     6326    2           TEMP1 = 1;
      169     6327    2           CALL JSS$BACKSS;
      170     6328    2           END;
      171     6329    1      CALL SST$SSFTCB (-1,ECC,ECINFO,B_MPT.SS$,B_MPT.TCB$,HR_SIZE) ALTRET(DGX);
      172     6330    1      IF ECC = 1 THEN
      173     6331    1           CALL SSV$XXDO(0,PINCRW(ADDR(ECINFO),-POFFW(ADDR(STK$->B$DO.BUSY),ADDR(STK$->
              6331                    B$DO))));
      174     6332    1      STK$=PINCRW(B_MPT.TCB$,ADDR(B_MPT.TCB$->B$TCB.STK$)->B$$PTRR.OFFSET);
      175     6333    1      STK$->B$EXCFR.ASL=BINBIT(TEMP1,36);
      176     6334        /*                                                                    */
      177     6335    1   SS_MOVED: ;
      178     6336        /*         BUILD SPECIAL DESCRIPTORS FOR DELTA TO ACCESS USER         */
      179     6337    1      B_MPT.LS$->B$ULS.SPCL1=B_MPT.SSDESC$->B$$DESCR;
      180     6338    1      B_MPT.LS$->B$ULS.SPCL1.TYP=1;
      181     6339    1      B_MPT.LS$->B$ULS.SPCL2=B$SS.LSR;
      182     6340    1      B_MPT.LS$->B$ULS.SPCL3=B$SS.ASR;
      183     6341    1      B_MPT.LS$->B$ULS.SPCL4=B$SS.PSR;
      184     6342    1      B_MPT.LS$->B$ULS.SPCL5=B$SS.ISR;
      185     6343        /*                                                                    */
      186     6344        /*         SET DELTA IN CONTROL FLAG                                  */
      187     6345    1      S$CU$->B$U.FLG=S$CU$->B$U.FLG | %U_DIC;
      188     6346        /*
      189     6347             If JJ2_DBRK is set in B$JIT.JUNK2, the user has data break points
      190     6348             set and DELTA must be given write access to the data pages.  This
      191     6349             flag is then reset; it will be set again by DELTA via M$DRTN.
      192     6350        */
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:7    
      193     6351    1      IF (B$JIT.JUNK2 & %JJ2_DBRK#)
      194     6352    2      THEN DO;
      195     6353    2           TEMP1 = B$JIT.DUL;
      196     6354    3           DO I = B$JIT.DLL TO TEMP1;
      197     6355    3                IF B$MAP(I) & MAP_DBRK
      198     6356    3                THEN
      199     6357    3                     B$MAP(I) = B$MAP(I) | MAP_PGWRITE;
      200     6358    3                IF I ~= TEMP1 AND B$MAP.RPN(I+1) ~= MM_FPMC.RPN THEN
      201     6359    3                     B$MAP(I+1) = B$MAP(I+1) | MAP_PGWRITE;
      202     6360    3                END;
      203     6361
      204     6362    2           TEMP1 = B$JIT.DDUL;
      205     6363    3           DO I = B$JIT.DDLL TO TEMP1;
      206     6364    3                IF B$MAP(I) & MAP_DBRK
      207     6365    3                THEN
      208     6366    3                     B$MAP(I) = B$MAP(I) | MAP_PGWRITE;
      209     6367    3                IF I ~= TEMP1 AND B$MAP.RPN(I+1) ~= MM_FPMC.RPN THEN
      210     6368    3                     B$MAP(I+1) = B$MAP(I+1) | MAP_PGWRITE;
      211     6369    3                END;
      212     6370
      213     6371    2           TEMP1 = B$JIT.PTSIZ;
      214     6372    3           DO I = %UDSEGLO TO TEMP1;
      215     6373    3                IF B$MAP(I) & MAP_DBRK
      216     6374    3                THEN
      217     6375    3                     B$MAP(I) = B$MAP(I) | MAP_PGWRITE;
      218     6376    3                IF I ~= TEMP1 AND B$MAP.RPN(I+1) ~= MM_FPMC.RPN THEN
      219     6377    3                     B$MAP(I+1) = B$MAP(I+1) | MAP_PGWRITE;
      220     6378    3                END;
      221     6379
      222     6380    2           B$JIT.JUNK2 = (B$JIT.JUNK2 \ %JJ2_DBRK#);
      223     6381    2           END;
      224     6382
      225     6383        /*
      226     6384             If this is a normal user (i.e. not a shared processor, auto-shared
      227     6385             run unit, or an M$ALIB from an ASL) DELTA is given write access to
      228     6386             the user's procedure pages.   JJ2_PACCESS is set in B$JIT.JUNK2 to
      229     6387             signal UEP$PMME to reset write access on procedure when DELTA
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:8    
      230     6388             returns via M$DRTN.
      231     6389        */
      232     6390    1      STK$=ADDR(ECINFO);
      233     6391    1      IF NOT( ECC=%ECC_ALIB# AND STK$->B$ALIB.WHO ~= %SC_AUSR#)
      234     6392    1        AND S$CU$->B$U.APR=0
      235     6393    2      THEN DO;
      236     6394    2           TEMP1 = B$JIT.PLL + B$JIT.PCP - 1;
      237     6395    3           DO I = B$JIT.PLL TO TEMP1;
      238     6396    3                B$MAP(I) = B$MAP(I) | MAP_PGWRITE;
      239     6397    3                END;
      240     6398
      241     6399        /* If B$JIT.PCL is non zero there is an unshared version of the
      242     6400           library associated that must be unprotected.
      243     6401              */
      244     6402    2           IF B$JIT.PCL ~= 0
      245     6403    3           THEN DO;
      246     6404    3                TEMP1 = B$JIT.LLL + B$JIT.PCL - 1;
      247     6405    4                DO I = B$JIT.LLL TO TEMP1;
      248     6406    4                     B$MAP(I) = B$MAP(I) | MAP_PGWRITE;
      249     6407    4                     END;
      250     6408    3                END;
      251     6409
      252     6410    2           B$JIT.JUNK2 = (B$JIT.JUNK2 | %JJ2_PACCESS#);
      253     6411    2           END;
      254     6412    1      CALL HFC$ASSOCCLR (%USERWSQ,0,16384); /*MAX Dense PT*/
      255     6413
      256     6414        /* Restore the current SSR to the Magic Descriptors so the ASR will
      257     6415           be built correctly for entry to DELTA.
      258     6416        */
      259     6417    1      CALL UDN$JAMSS;
      260     6418    1      IF ECC = %ECC_ALIB#
      261     6419    1      THEN CALL JSN$DELTRAS(B$SDS1$->B$SDS.DBENT,B_MPT.SS$,B_MPT.LS$->B$ULS.SPCL1);
      262     6420    1      ELSE CALL SSS$DELTRD(B$SDS1$->B$SDS.DBENT,B_MPT.SS$,B_MPT.LS$->B$ULS.SPCL1);
      263     6421
      264     6422        %EJECT;
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:9    
      265     6423
      266     6424                                                /*ALTRET FROM SST$SSFTCB              */
      267     6425
      268     6426    1   DGX: CALL SC_SSUTCB;
      269     6427        /*S*   SCREECH_CODE:   SSU-S$DTCB
      270     6428               TYPE:  SUA
      271     6429               MESSAGE: DELTA'S TCB is full (SSU$DELTAGO)
      272     6430        */
      273     6431    1   END;

PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:10   
--  Include file information  --

   UE_CP6.:E05TOU  is referenced.
   UD_SEV_C.:E05TOU  is referenced.
   HF_ERRORS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  is referenced.
   B$USER.:E05TOU  cannot be made into a system file and is referenced.
   B$SS.:E05TOU  cannot be made into a system file and is referenced.
   B_UHJMAC_C.:E05TOU  is referenced.
   B_MLSMAC_C.:E05TOU  is referenced.
   B_ULSMAC_C.:E05TOU  is referenced.
   B_MACROS_C.:E05TOU  is referenced.
   B_MAGIC_C.:E05TOU  is referenced.
   MM_MACRO_M.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   MM$SYSGEN.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   MM_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   S_WSPTD_R.:E05TOU  cannot be made into a system file and is referenced.
   B$MAP.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure SSU$DELTAGO.

   Procedure SSU$DELTAGO requires 347 words for executable code.
   Procedure SSU$DELTAGO requires 16 words of local(AUTO) storage.

    No errors detected in file SSU$DELTAGO.:E05TSI    .

PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:11   

 Object Unit name= SSU$DELTAGO                                File name= SSU$DELTAGO.:E05TOU
 UTS= JUL 30 '97 05:59:54.16 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  RoData even  UTS      5      5  SSU$DELTAGO
    1   Proc  even  none   347    533  SSU$DELTAGO
    2  RoData even  none     9     11  SSU$DELTAGO

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes            yes      Std        3  SSU$DELTAGO
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:12   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       0 UDN$MAGIC
         yes           Std       0 UDN$BLDASR
         yes           Std       0 SSC$SERV
         yes           Std       0 UDN$MAGICLS
         yes           Std       0 JSS$BACKSS
         yes           Std       3 HFC$ASSOCCLR
         yes           Std       3 SSS$DELTRD
 yes     yes           Std       3 SSV$XXDO
         yes           Std       0 JSS$FIXLASR
         yes           Std       0 JSE$ABORTM
         yes           Std       0 UDN$JAMSS
         yes           Std       3 JSN$DELTRAS
         yes           Std       0 JSN$FIXSSM
         yes           Std       0 JSE$ABORTX
 yes     yes           Std       6 SST$SSFTCB
                       nStd      0 X66_AUTO_3
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     SC_SSUASF                             SC_SSUTCB                        r    B$SDS1$
r    B$UPT$                           r    B$JIT$                           r    B$LS$
r    J_DBMXAS_D                       r    J_DBMXSS_D                       r    MM_BYP$
     MM_FPMC                               B_MPT                                 S$CU$
     B_VECTNIL
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:13   

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ASLENTSID                             ISSID
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:14   


        1        1        /*M*       SSU$DELTAGO: MOVE SS FRAME TO DELTA TCB AND ENTER DELTA    */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*                                                                    */
        8        8        /*X* PLM=3,IND=5,ENU=0,ECU=0   */
        9        9
       10       10        SSU$DELTAGO: PROC(ECC,ECINFO,HR_SIZE);

     10  1 000000   000000 700200 xent  SSU$DELTAGO  TSX0  ! X66_AUTO_3
         1 000001   000020 000003                    ZERO    16,3

       11       11        /*                                                                    */
       12       12    1   DCL   ECC UBIN(36);                     /* EXCEPTION CONDITION CODE           */
       13       13    1   DCL   ECINFO(0:1) UBIN(36);             /* EXCEPTION COND INFO ARRAY          */
       14       14    1   DCL   HR_SIZE UBIN;                     /* HIST REG SIZE (FROM HFA$FAULT)     */
       15       15        /*                                                                    */
       16       16    1   DCL I SBIN;
       17       17    1   DCL TEMP1 SBIN;
       18       18    1   DCL STK$ PTR;
       19       19                                                /**/
       20       20    1   DCL UDN$MAGIC ENTRY;
       21       21    1   DCL UDN$MAGICLS ENTRY;
       22       22    1   DCL UDN$BLDASR ENTRY;
       23       23    1   DCL UDN$JAMSS ENTRY;
       24       24    1   DCL   JSN$FIXSSM ENTRY;
       25       25    1   DCL   JSS$BACKSS ENTRY;
       26       26    1   DCL JSE$ABORTM ENTRY;
       27       27    1   DCL JSE$ABORTX ENTRY;
       28       28    1   DCL   JSS$FIXLASR ENTRY;
       29       29    1   DCL   JSN$DELTRAS ENTRY(3);
       30       30    1   DCL   SSC$SERV ENTRY;
       31       31    1   DCL   SSS$DELTRD ENTRY(3);
       32       32    1   DCL   SST$SSFTCB ENTRY(6) ALTRET;
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:15   
       33       33    1   DCL   SSV$XXDO ENTRY(3) ALTRET;
       34       34    1   DCL SC_SSUTCB ENTRY CONV(2,0);
       35       35    1   DCL SC_SSUASF ENTRY CONV(2,0);
       36       36    1   DCL HFC$ASSOCCLR ENTRY (3);
       37       37        /*                                                                    */
       38       38        /**/
       39       39    1   DCL B$$PTR PTR BASED ALIGNED;
       40       40    1   DCL 1 B$$PTRR REDEF B$$PTR ALIGNED,
       41       41    1         2 OFFSET UBIN HALF UNAL,
       42       42    1         2 * UBIN(6) UNAL,
       43       43    1         2 SEGID UBIN(12) UNAL;
       44       44        /**/
       45       45    1   DCL B$SDS1$ PTR SYMREF READONLY;
       46       46    1   DCL B$UPT$ PTR SYMREF READONLY;
       47       47    1   DCL B$JIT$ PTR SYMREF READONLY;
       48       48    1   DCL B$LS$ PTR SYMREF READONLY;
       49       49
       50       50    1   DCL J_DBMXAS_D UBIN(36) SYMREF READONLY;
       51       51    1   DCL J_DBMXSS_D UBIN(36) SYMREF READONLY;
       52       52
       53       53        %INCLUDE B$MAP;
       54      152        %INCLUDE S_WSPTD_R;
       55      168        %INCLUDE MM_DATA_R;
       56      688        %INCLUDE B_MAGIC_C;
       57      806        %B_MPT (FPTN=B_MPT,STCLASS=SYMREF);
       58      899        %INCLUDE B_MACROS_C;
       59     1010        %T01DESCR (NAME=B$$DESCR);
       60     1018        %INCLUDE B_ULSMAC_C;
       61     2127        %B_USRULS (FPTN=B$ULS,STCLASS=BASED);
       62     2326        %INCLUDE B_MLSMAC_C;
       63     3268        %B_MLS (FPTN=B$MLNK,STCLASS=BASED);
       64     4083        %INCLUDE B_UHJMAC_C;
       65     4412        %B_USDS (FPTN=B$SDS,STCLASS=BASED);
       66     4464        %INCLUDE B$SS;
       67     4643        %INCLUDE B$USER;
       68     4859        %B$USERREFS;
       69     4863        %INCLUDE B$JIT_C;
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:16   
       70     5177        %B$JIT0;
       71     5266        %U$JIT1X;
       72     5269        %M$JIT2;
       73     5279        %F$JIT3X;
       74     5282        %S$JIT4X;
       75     5285        %J$JIT5;
       76     5373        %A$JIT6X;
       77     5376
       78     5377        %SUB B$MAP=B$UPT$->B$MAP;
       79     5378        %SUB B$JIT=B$JIT$->B$JIT;
       80     5379        %SUB B$SS=B_MPT.SS$->B$SS;
       81     5380        /* TO SET JIT.ERR */
       82     5381        %MACRO ERRCODE(NAME=ERRWD,SEV#=SEV_ERR#,COD#=0);
       83     5382        DCL 1 NAME CONSTANT,
       84     5383              2 F BIT(12) UNAL INIT(FCG#),
       85     5384              2 M BIT(6) UNAL INIT(MID#),
       86     5385              2 * BIT(1) UNAL INIT('1'B),
       87     5386              2 C UBIN(14) UNAL INIT(COD#),
       88     5387              2 S UBIN(3) UNAL INIT(SEV#);
       89     5388        %MEND;
       90     5389        %SUB FCG#='2323'O;
       91     5390        %SUB MID#='25'O;
       92     5391                                                /*                                    */
       93     5392        %INCLUDE HF_ERRORS_C;
       94     5477        %INCLUDE UD_SEV_C;
       95     5491
       96     5492        %ERRCODE (NAME=EASF,COD#=%E$ASF);
       97     5500        %ERRCODE (NAME=ESSF,COD#=%E$SSF);
       98     5508        %INCLUDE UE_CP6;
       99     6199        %SUB_ECCDELTA;
      100     6236        %B$ALIB;
      101     6240        %B$TCB (NAME=B$TCB,ALIGNED=DALIGNED);
      102     6243        %B$EXCFR (NAME=B$EXCFR,STCLASS=BASED);
      103     6261    1   DCL 1 MAP_DBRK CONSTANT,
      104     6262    1         2 * UBIN HALF UNAL INIT(0),
      105     6263    1         2 * BIT(10) INIT(%SCDBRK),
      106     6264    1         2 * BIT(8) INIT('0'B);
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:17   
      107     6265    1   DCL 1 MAP_PGWRITE CONSTANT,
      108     6266    1         2 * UBIN HALF UNAL INIT(0),
      109     6267    1         2 * BIT(12) INIT('0'B),
      110     6268    1         2 * BIT(6) INIT(%PGWRITE);
      111     6269        %EJECT;
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:18   
      112     6270
      113     6271        /*
      114     6272             Prior to entering DELTA, we must verify that we are not
      115     6273             approaching the limit on the Argument Stack or the
      116     6274             Safe-Store Stack.
      117     6275        */
      118     6276    1      CALL UDN$MAGIC;

   6276  1 000002   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 000003   000000 701000 xent               TSX1    UDN$MAGIC
         1 000004   000000 011000                    NOP     0

      119     6277        /*   Initialize ASR in case it was used by comgroups.
      120     6278             Then do Magic again to get it right in magic descriptors.        */
      121     6279    1      CALL UDN$BLDASR;

   6279  1 000005   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 000006   000000 701000 xent               TSX1    UDN$BLDASR
         1 000007   000000 011000                    NOP     0

      122     6280    1      CALL UDN$MAGIC;

   6280  1 000010   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 000011   000000 701000 xent               TSX1    UDN$MAGIC
         1 000012   000000 011000                    NOP     0

      123     6281    1      IF B_MPT.ASDESC$->B$$DESCR.BASE > J_DBMXAS_D

   6281  1 000013   000010 470400 xsym               LDP0    B_MPT+8
         1 000014   000000 236000 xsym               LDQ     J_DBMXAS_D
         1 000015   000046 604000 1                  TMI     s:6303
         1 000016   000001 116100                    CMPQ    1,,PR0
         1 000017   000046 605000 1                  TPL     s:6303

      124     6282    2      THEN DO;

      125     6283    2           IF B_MPT.SSDESC$->B$$DESCR.WSR ~= 7 THEN CALL SC_SSUASF;
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:19   

   6283  1 000020   000006 471400 xsym               LDP1    B_MPT+6
         1 000021   100000 236100                    LDQ     0,,PR1
         1 000022   000160 376007                    ANQ     112,DL
         1 000023   000160 116007                    CMPQ    112,DL
         1 000024   000027 600000 1                  TZE     s:6293

   6283  1 000025   000000 713400 xsym               CLIMB   SC_SSUASF
         1 000026   000000 600000 xsid               climb   nvectors=         0

      126     6284
      127     6285        /*S*  SCREECH_CODE:  SSU-S$MAGIC
      128     6286              MESSAGE: The user's Argument Stack is full on entry to DELTA.
      129     6287              TYPE:    SUA
      130     6288              REMARKS: The user has pushed too much on the Argument Stack.
      131     6289                       This can only happen if the top Safe-Store frame
      132     6290                       is not the user's.
      133     6291        */
      134     6292
      135     6293    2           CALL JSS$FIXLASR;

   6293  1 000027   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 000030   000000 701000 xent               TSX1    JSS$FIXLASR
         1 000031   000000 011000                    NOP     0

      136     6294    2           IF B$JIT.ERR.CODE=0 THEN B$JIT.ERR=EASF;

   6294  1 000032   000000 470400 xsym               LDP0    B$JIT$
         1 000033   000012 236100                    LDQ     10,,PR0
         1 000034   377770 316007                    CANQ    131064,DL
         1 000035   000040 601000 1                  TNZ     s:6299

   6294  1 000036   000000 236000 0                  LDQ     EASF
         1 000037   000012 756100                    STQ     10,,PR0

      137     6295
      138     6296        /*E*  ERROR:  SSU-E$ASF-E
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:20   
      139     6297              MESSAGE: Argument/Parameter Stack is full on entry to your Debugger.
      140     6298        */
      141     6299    2           CALL SSC$SERV;

   6299  1 000040   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 000041   000000 701000 xent               TSX1    SSC$SERV
         1 000042   000000 011000                    NOP     0

      142     6300    2           CALL JSE$ABORTM;

   6300  1 000043   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 000044   000000 701000 xent               TSX1    JSE$ABORTM
         1 000045   000000 011000                    NOP     0

      143     6301    2           END;

      144     6302
      145     6303    1      IF B_MPT.SSDESC$->B$$DESCR.BASE > J_DBMXSS_D

   6303  1 000046   000006 470400 xsym               LDP0    B_MPT+6
         1 000047   000000 236000 xsym               LDQ     J_DBMXSS_D
         1 000050   000067 604000 1                  TMI     s:6316
         1 000051   000001 116100                    CMPQ    1,,PR0
         1 000052   000067 605000 1                  TPL     s:6316

      146     6304    2      THEN DO;

      147     6305    2           CALL JSN$FIXSSM;                /*Will SUA if top frame not user*/

   6305  1 000053   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 000054   000000 701000 xent               TSX1    JSN$FIXSSM
         1 000055   000000 011000                    NOP     0

      148     6306    2           B$JIT.ERR=ESSF;

   6306  1 000056   000001 236000 0                  LDQ     ESSF
         1 000057   000000 470400 xsym               LDP0    B$JIT$
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:21   
         1 000060   000012 756100                    STQ     10,,PR0

      149     6307
      150     6308        /*E*  ERROR: SSU-E$SSF-E
      151     6309              MESSAGE: Your Safe-Store Stack is full on entry to your Debugger.
      152     6310        */
      153     6311    2           CALL SSC$SERV;

   6311  1 000061   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 000062   000000 701000 xent               TSX1    SSC$SERV
         1 000063   000000 011000                    NOP     0

      154     6312    2           CALL JSE$ABORTX;

   6312  1 000064   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 000065   000000 701000 xent               TSX1    JSE$ABORTX
         1 000066   000000 011000                    NOP     0

      155     6313    2           END;

      156     6314        %EJECT;
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:22   
      157     6315        /*         BUILD DESCRIPTORS FOR DELTA LSEG AND TCB                   */
      158     6316    1      B_MPT.LSDESC$->B$$DESCR=B$LS$->B$MLNK.DBLS;

   6316  1 000067   000007 470400 xsym               LDP0    B_MPT+7
         1 000070   000000 471400 xsym               LDP1    B$LS$
         1 000071   100064 237100                    LDAQ    52,,PR1
         1 000072   000000 755100                    STA     0,,PR0
         1 000073   000001 756100                    STQ     1,,PR0

      159     6317    1      CALL UDN$MAGICLS;

   6317  1 000074   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 000075   000000 701000 xent               TSX1    UDN$MAGICLS
         1 000076   000000 011000                    NOP     0

      160     6318        /*                                                                    */
      161     6319        /*                                                   */
      162     6320    1      IF ECC=%ECC_SAVLDT# THEN GOTO SS_MOVED;

   6320  1 000077   200003 470500                    LDP0    @ECC,,AUTO
         1 000100   000000 235100                    LDA     0,,PR0
         1 000101   000136 115007                    CMPA    94,DL
         1 000102   000202 600000 1                  TZE     SS_MOVED

      163     6321        /*         MOVE SS FRAME TO DELTA'S TCB                               */
      164     6322    1      TEMP1=0;

   6322  1 000103   200007 450100                    STZ     TEMP1,,AUTO

      165     6323    1      IF ECC ~= %ECC_ALIB#

   6323  1 000104   000137 115007                    CMPA    95,DL
         1 000105   000125 600000 1                  TZE     s:6329

      166     6324    1      THEN
      167     6325    2      DO WHILE (B$SS.ISR.WSR ~= 7);

PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:23   
   6325  1 000106   000000 471400 xsym               LDP1    B_MPT
         1 000107   100010 236100                    LDQ     8,,PR1
         1 000110   000160 376007                    ANQ     112,DL
         1 000111   000160 116007                    CMPQ    112,DL
         1 000112   000125 600000 1                  TZE     s:6329

      168     6326    2           TEMP1 = 1;

   6326  1 000113   000001 235007                    LDA     1,DL
         1 000114   200007 755100                    STA     TEMP1,,AUTO

      169     6327    2           CALL JSS$BACKSS;

   6327  1 000115   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 000116   000000 701000 xent               TSX1    JSS$BACKSS
         1 000117   000000 011000                    NOP     0

      170     6328    2           END;

   6328  1 000120   000000 470400 xsym               LDP0    B_MPT
         1 000121   000010 236100                    LDQ     8,,PR0
         1 000122   000160 376007                    ANQ     112,DL
         1 000123   000160 116007                    CMPQ    112,DL
         1 000124   000113 601000 1                  TNZ     s:6326

      171     6329    1      CALL SST$SSFTCB (-1,ECC,ECINFO,B_MPT.SS$,B_MPT.TCB$,HR_SIZE) ALTRET(DGX);

   6329  1 000125   200005 236100                    LDQ     @HR_SIZE,,AUTO
         1 000126   000000 235000 2                  LDA     0
         1 000127   200016 757100                    STAQ    STK$+6,,AUTO
         1 000130   000001 236000 2                  LDQ     1
         1 000131   200004 235100                    LDA     @ECINFO,,AUTO
         1 000132   200014 757100                    STAQ    STK$+4,,AUTO
         1 000133   200003 236100                    LDQ     @ECC,,AUTO
         1 000134   000002 235000 2                  LDA     2
         1 000135   200012 757100                    STAQ    STK$+2,,AUTO
         1 000136   200012 630500                    EPPR0   STK$+2,,AUTO
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:24   
         1 000137   000024 631400 xsym               EPPR1   B_VECTNIL+20
         1 000140   000000 701000 xent               TSX1    SST$SSFTCB
         1 000141   000530 702000 1                  TSX2    DGX

      172     6330    1      IF ECC = 1 THEN

   6330  1 000142   200003 470500                    LDP0    @ECC,,AUTO
         1 000143   000000 235100                    LDA     0,,PR0
         1 000144   000001 115007                    CMPA    1,DL
         1 000145   000172 601000 1                  TNZ     s:6332

      173     6331    1          CALL SSV$XXDO(0,PINCRW(ADDR(ECINFO),-POFFW(ADDR(STK$->B$DO.BUSY),ADDR(STK$->
              6331                    B$DO))));

   6331  1 000146   200010 236100                    LDQ     STK$,,AUTO
         1 000147   000022 772000                    QRL     18
         1 000150   200012 756100                    STQ     STK$+2,,AUTO
         1 000151   200010 236100                    LDQ     STK$,,AUTO
         1 000152   000002 036003                    ADLQ    2,DU
         1 000153   000022 772000                    QRL     18
         1 000154   200012 136100                    SBLQ    STK$+2,,AUTO
         1 000155   000022 736000                    QLS     18
         1 000156   000027 676000 xsym               ERQ     B_VECTNIL+23
         1 000157   000001 036007                    ADLQ    1,DL
         1 000160   200004 036100                    ADLQ    @ECINFO,,AUTO
         1 000161   200013 756100                    STQ     STK$+3,,AUTO
         1 000162   200013 631500                    EPPR1   STK$+3,,AUTO
         1 000163   200015 451500                    STP1    STK$+5,,AUTO
         1 000164   000003 236000 2                  LDQ     3
         1 000165   200014 756100                    STQ     STK$+4,,AUTO
         1 000166   200014 630500                    EPPR0   STK$+4,,AUTO
         1 000167   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000170   000000 701000 xent               TSX1    SSV$XXDO
         1 000171   000000 011000                    NOP     0

      174     6332    1      STK$=PINCRW(B_MPT.TCB$,ADDR(B_MPT.TCB$->B$TCB.STK$)->B$$PTRR.OFFSET);

PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:25   
   6332  1 000172   000004 470400 xsym               LDP0    B_MPT+4
         1 000173   000001 220100                    LDX0    1,,PR0
         1 000174   000000 636010                    EAQ     0,X0
         1 000175   000004 036000 xsym               ADLQ    B_MPT+4
         1 000176   200010 756100                    STQ     STK$,,AUTO

      175     6333    1      STK$->B$EXCFR.ASL=BINBIT(TEMP1,36);

   6333  1 000177   200007 236100                    LDQ     TEMP1,,AUTO
         1 000200   200010 471500                    LDP1    STK$,,AUTO
         1 000201   100001 756100                    STQ     1,,PR1

   6333  1 000202                       SS_MOVED     null
      176     6334        /*                                                                    */
      177     6335    1   SS_MOVED: ;
      178     6336        /*         BUILD SPECIAL DESCRIPTORS FOR DELTA TO ACCESS USER         */
      179     6337    1      B_MPT.LS$->B$ULS.SPCL1=B_MPT.SSDESC$->B$$DESCR;

   6337  1 000202   000006 470400 xsym               LDP0    B_MPT+6
         1 000203   000001 471400 xsym               LDP1    B_MPT+1
         1 000204   000100 100500                    MLR     fill='000'O
         1 000205   000000 000010                    ADSC9   0,,PR0                   cn=0,n=8
         1 000206   100042 000010                    ADSC9   34,,PR1                  cn=0,n=8

      180     6338    1      B_MPT.LS$->B$ULS.SPCL1.TYP=1;

   6338  1 000207   100042 236100                    LDQ     34,,PR1
         1 000210   000004 376000 2                  ANQ     4
         1 000211   000001 276007                    ORQ     1,DL
         1 000212   100042 756100                    STQ     34,,PR1

      181     6339    1      B_MPT.LS$->B$ULS.SPCL2=B$SS.LSR;

   6339  1 000213   000000 473400 xsym               LDP3    B_MPT
         1 000214   300014 237100                    LDAQ    12,,PR3
         1 000215   100044 757100                    STAQ    36,,PR1

PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:26   
      182     6340    1      B_MPT.LS$->B$ULS.SPCL3=B$SS.ASR;

   6340  1 000216   300012 237100                    LDAQ    10,,PR3
         1 000217   100046 757100                    STAQ    38,,PR1

      183     6341    1      B_MPT.LS$->B$ULS.SPCL4=B$SS.PSR;

   6341  1 000220   300016 237100                    LDAQ    14,,PR3
         1 000221   100050 757100                    STAQ    40,,PR1

      184     6342    1      B_MPT.LS$->B$ULS.SPCL5=B$SS.ISR;

   6342  1 000222   300010 237100                    LDAQ    8,,PR3
         1 000223   100054 757100                    STAQ    44,,PR1

      185     6343        /*                                                                    */
      186     6344        /*         SET DELTA IN CONTROL FLAG                                  */
      187     6345    1      S$CU$->B$U.FLG=S$CU$->B$U.FLG | %U_DIC;

   6345  1 000224   000000 474400 xsym               LDP4    S$CU$
         1 000225   400000 236100                    LDQ     0,,PR4
         1 000226   000004 276000 0                  ORQ     MAP_PGWRITE+1
         1 000227   400000 756100                    STQ     0,,PR4

      188     6346        /*
      189     6347             If JJ2_DBRK is set in B$JIT.JUNK2, the user has data break points
      190     6348             set and DELTA must be given write access to the data pages.  This
      191     6349             flag is then reset; it will be set again by DELTA via M$DRTN.
      192     6350        */
      193     6351    1      IF (B$JIT.JUNK2 & %JJ2_DBRK#)

   6351  1 000230   000000 470400 xsym               LDP0    B$JIT$
         1 000231   000321 220100                    LDX0    209,,PR0
         1 000232   000001 360003                    ANX0    1,DU
         1 000233   000365 600000 1                  TZE     s:6390

      194     6352    2      THEN DO;
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:27   

      195     6353    2           TEMP1 = B$JIT.DUL;

   6353  1 000234   000177 236100                    LDQ     127,,PR0
         1 000235   777777 376007                    ANQ     -1,DL
         1 000236   200007 756100                    STQ     TEMP1,,AUTO

      196     6354    3           DO I = B$JIT.DLL TO TEMP1;

   6354  1 000237   000177 236100                    LDQ     127,,PR0
         1 000240   000022 772000                    QRL     18
         1 000241   200006 756100                    STQ     I,,AUTO
         1 000242   000265 710000 1                  TRA     s:6360+1

      197     6355    3                IF B$MAP(I) & MAP_DBRK

   6355  1 000243   000000 470400 xsym               LDP0    B$UPT$
         1 000244   200006 720100                    LXL0    I,,AUTO
         1 000245   000000 236110                    LDQ     0,X0,PR0
         1 000246   000002 376000 0                  ANQ     MAP_DBRK
         1 000247   000253 600000 1                  TZE     s:6358

      198     6356    3                THEN
      199     6357    3                     B$MAP(I) = B$MAP(I) | MAP_PGWRITE;

   6357  1 000250   000000 236110                    LDQ     0,X0,PR0
         1 000251   000003 276000 0                  ORQ     MAP_PGWRITE
         1 000252   000000 756110                    STQ     0,X0,PR0

      200     6358    3                IF I ~= TEMP1 AND B$MAP.RPN(I+1) ~= MM_FPMC.RPN THEN

   6358  1 000253   200006 236100                    LDQ     I,,AUTO
         1 000254   200007 116100                    CMPQ    TEMP1,,AUTO
         1 000255   000264 600000 1                  TZE     s:6360
         1 000256   000001 221110                    LDX1    1,X0,PR0
         1 000257   000000 101000 xsym               CMPX1   MM_FPMC
         1 000260   000264 600000 1                  TZE     s:6360
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:28   

      201     6359    3                     B$MAP(I+1) = B$MAP(I+1) | MAP_PGWRITE;

   6359  1 000261   000001 236110                    LDQ     1,X0,PR0
         1 000262   000003 276000 0                  ORQ     MAP_PGWRITE
         1 000263   000001 756110                    STQ     1,X0,PR0

      202     6360    3                END;

   6360  1 000264   200006 054100                    AOS     I,,AUTO
         1 000265   200006 236100                    LDQ     I,,AUTO
         1 000266   200007 116100                    CMPQ    TEMP1,,AUTO
         1 000267   000243 604400 1                  TMOZ    s:6355

      203     6361
      204     6362    2           TEMP1 = B$JIT.DDUL;

   6362  1 000270   000000 470400 xsym               LDP0    B$JIT$
         1 000271   000200 236100                    LDQ     128,,PR0
         1 000272   777777 376007                    ANQ     -1,DL
         1 000273   200007 756100                    STQ     TEMP1,,AUTO

      205     6363    3           DO I = B$JIT.DDLL TO TEMP1;

   6363  1 000274   000200 236100                    LDQ     128,,PR0
         1 000275   000022 772000                    QRL     18
         1 000276   200006 756100                    STQ     I,,AUTO
         1 000277   000322 710000 1                  TRA     s:6369+1

      206     6364    3                IF B$MAP(I) & MAP_DBRK

   6364  1 000300   000000 470400 xsym               LDP0    B$UPT$
         1 000301   200006 720100                    LXL0    I,,AUTO
         1 000302   000000 236110                    LDQ     0,X0,PR0
         1 000303   000002 376000 0                  ANQ     MAP_DBRK
         1 000304   000310 600000 1                  TZE     s:6367

PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:29   
      207     6365    3                THEN
      208     6366    3                     B$MAP(I) = B$MAP(I) | MAP_PGWRITE;

   6366  1 000305   000000 236110                    LDQ     0,X0,PR0
         1 000306   000003 276000 0                  ORQ     MAP_PGWRITE
         1 000307   000000 756110                    STQ     0,X0,PR0

      209     6367    3                IF I ~= TEMP1 AND B$MAP.RPN(I+1) ~= MM_FPMC.RPN THEN

   6367  1 000310   200006 236100                    LDQ     I,,AUTO
         1 000311   200007 116100                    CMPQ    TEMP1,,AUTO
         1 000312   000321 600000 1                  TZE     s:6369
         1 000313   000001 221110                    LDX1    1,X0,PR0
         1 000314   000000 101000 xsym               CMPX1   MM_FPMC
         1 000315   000321 600000 1                  TZE     s:6369

      210     6368    3                     B$MAP(I+1) = B$MAP(I+1) | MAP_PGWRITE;

   6368  1 000316   000001 236110                    LDQ     1,X0,PR0
         1 000317   000003 276000 0                  ORQ     MAP_PGWRITE
         1 000320   000001 756110                    STQ     1,X0,PR0

      211     6369    3                END;

   6369  1 000321   200006 054100                    AOS     I,,AUTO
         1 000322   200006 236100                    LDQ     I,,AUTO
         1 000323   200007 116100                    CMPQ    TEMP1,,AUTO
         1 000324   000300 604400 1                  TMOZ    s:6364

      212     6370
      213     6371    2           TEMP1 = B$JIT.PTSIZ;

   6371  1 000325   000000 470400 xsym               LDP0    B$JIT$
         1 000326   000216 236100                    LDQ     142,,PR0
         1 000327   777777 376007                    ANQ     -1,DL
         1 000330   200007 756100                    STQ     TEMP1,,AUTO

PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:30   
      214     6372    3           DO I = %UDSEGLO TO TEMP1;

   6372  1 000331   001130 235007                    LDA     600,DL
         1 000332   200006 755100                    STA     I,,AUTO
         1 000333   000356 710000 1                  TRA     s:6378+1

      215     6373    3                IF B$MAP(I) & MAP_DBRK

   6373  1 000334   000000 470400 xsym               LDP0    B$UPT$
         1 000335   200006 720100                    LXL0    I,,AUTO
         1 000336   000000 236110                    LDQ     0,X0,PR0
         1 000337   000002 376000 0                  ANQ     MAP_DBRK
         1 000340   000344 600000 1                  TZE     s:6376

      216     6374    3                THEN
      217     6375    3                     B$MAP(I) = B$MAP(I) | MAP_PGWRITE;

   6375  1 000341   000000 236110                    LDQ     0,X0,PR0
         1 000342   000003 276000 0                  ORQ     MAP_PGWRITE
         1 000343   000000 756110                    STQ     0,X0,PR0

      218     6376    3                IF I ~= TEMP1 AND B$MAP.RPN(I+1) ~= MM_FPMC.RPN THEN

   6376  1 000344   200006 236100                    LDQ     I,,AUTO
         1 000345   200007 116100                    CMPQ    TEMP1,,AUTO
         1 000346   000355 600000 1                  TZE     s:6378
         1 000347   000001 221110                    LDX1    1,X0,PR0
         1 000350   000000 101000 xsym               CMPX1   MM_FPMC
         1 000351   000355 600000 1                  TZE     s:6378

      219     6377    3                     B$MAP(I+1) = B$MAP(I+1) | MAP_PGWRITE;

   6377  1 000352   000001 236110                    LDQ     1,X0,PR0
         1 000353   000003 276000 0                  ORQ     MAP_PGWRITE
         1 000354   000001 756110                    STQ     1,X0,PR0

      220     6378    3                END;
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:31   

   6378  1 000355   200006 054100                    AOS     I,,AUTO
         1 000356   200006 236100                    LDQ     I,,AUTO
         1 000357   200007 116100                    CMPQ    TEMP1,,AUTO
         1 000360   000334 604400 1                  TMOZ    s:6373

      221     6379
      222     6380    2           B$JIT.JUNK2 = (B$JIT.JUNK2 \ %JJ2_DBRK#);

   6380  1 000361   000000 470400 xsym               LDP0    B$JIT$
         1 000362   000321 220100                    LDX0    209,,PR0
         1 000363   000001 660003                    ERX0    1,DU
         1 000364   000321 740100                    STX0    209,,PR0

      223     6381    2           END;

      224     6382
      225     6383        /*
      226     6384             If this is a normal user (i.e. not a shared processor, auto-shared
      227     6385             run unit, or an M$ALIB from an ASL) DELTA is given write access to
      228     6386             the user's procedure pages.   JJ2_PACCESS is set in B$JIT.JUNK2 to
      229     6387             signal UEP$PMME to reset write access on procedure when DELTA
      230     6388             returns via M$DRTN.
      231     6389        */
      232     6390    1      STK$=ADDR(ECINFO);

   6390  1 000365   200004 236100                    LDQ     @ECINFO,,AUTO
         1 000366   200010 756100                    STQ     STK$,,AUTO

      233     6391    1      IF NOT( ECC=%ECC_ALIB# AND STK$->B$ALIB.WHO ~= %SC_AUSR#)

   6391  1 000367   200003 471500                    LDP1    @ECC,,AUTO
         1 000370   100000 235100                    LDA     0,,PR1
         1 000371   000137 115007                    CMPA    95,DL
         1 000372   000377 601000 1                  TNZ     s:6391+8
         1 000373   200010 473500                    LDP3    STK$,,AUTO
         1 000374   300000 236100                    LDQ     0,,PR3
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:32   
         1 000375   777000 316003                    CANQ    -512,DU
         1 000376   000464 601000 1                  TNZ     s:6412
         1 000377   000000 473400 xsym               LDP3    S$CU$
         1 000400   300007 236100                    LDQ     7,,PR3
         1 000401   777700 316003                    CANQ    -64,DU
         1 000402   000464 601000 1                  TNZ     s:6412

      234     6392    1        AND S$CU$->B$U.APR=0
      235     6393    2      THEN DO;

      236     6394    2           TEMP1 = B$JIT.PLL + B$JIT.PCP - 1;

   6394  1 000403   000201 236100                    LDQ     129,,PR0
         1 000404   000022 772000                    QRL     18
         1 000405   200012 756100                    STQ     STK$+2,,AUTO
         1 000406   000176 236100                    LDQ     126,,PR0
         1 000407   000022 772000                    QRL     18
         1 000410   200012 036100                    ADLQ    STK$+2,,AUTO
         1 000411   000001 136007                    SBLQ    1,DL
         1 000412   200007 756100                    STQ     TEMP1,,AUTO

      237     6395    3           DO I = B$JIT.PLL TO TEMP1;

   6395  1 000413   000176 236100                    LDQ     126,,PR0
         1 000414   000022 772000                    QRL     18
         1 000415   200006 756100                    STQ     I,,AUTO
         1 000416   000425 710000 1                  TRA     s:6397+1

      238     6396    3                B$MAP(I) = B$MAP(I) | MAP_PGWRITE;

   6396  1 000417   000000 470400 xsym               LDP0    B$UPT$
         1 000420   200006 720100                    LXL0    I,,AUTO
         1 000421   000000 236110                    LDQ     0,X0,PR0
         1 000422   000003 276000 0                  ORQ     MAP_PGWRITE
         1 000423   000000 756110                    STQ     0,X0,PR0

      239     6397    3                END;
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:33   

   6397  1 000424   200006 054100                    AOS     I,,AUTO
         1 000425   200006 236100                    LDQ     I,,AUTO
         1 000426   200007 116100                    CMPQ    TEMP1,,AUTO
         1 000427   000417 604400 1                  TMOZ    s:6396

      240     6398
      241     6399        /* If B$JIT.PCL is non zero there is an unshared version of the
      242     6400           library associated that must be unprotected.
      243     6401              */
      244     6402    2           IF B$JIT.PCL ~= 0

   6402  1 000430   000000 470400 xsym               LDP0    B$JIT$
         1 000431   000215 720100                    LXL0    141,,PR0
         1 000432   000460 600000 1                  TZE     s:6410

      245     6403    3           THEN DO;

      246     6404    3                TEMP1 = B$JIT.LLL + B$JIT.PCL - 1;

   6404  1 000433   000215 236100                    LDQ     141,,PR0
         1 000434   777777 376007                    ANQ     -1,DL
         1 000435   200012 756100                    STQ     STK$+2,,AUTO
         1 000436   000214 236100                    LDQ     140,,PR0
         1 000437   777777 376007                    ANQ     -1,DL
         1 000440   200012 036100                    ADLQ    STK$+2,,AUTO
         1 000441   000001 136007                    SBLQ    1,DL
         1 000442   200007 756100                    STQ     TEMP1,,AUTO

      247     6405    4                DO I = B$JIT.LLL TO TEMP1;

   6405  1 000443   000214 236100                    LDQ     140,,PR0
         1 000444   777777 376007                    ANQ     -1,DL
         1 000445   200006 756100                    STQ     I,,AUTO
         1 000446   000455 710000 1                  TRA     s:6407+1

      248     6406    4                     B$MAP(I) = B$MAP(I) | MAP_PGWRITE;
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:34   

   6406  1 000447   000000 470400 xsym               LDP0    B$UPT$
         1 000450   200006 720100                    LXL0    I,,AUTO
         1 000451   000000 236110                    LDQ     0,X0,PR0
         1 000452   000003 276000 0                  ORQ     MAP_PGWRITE
         1 000453   000000 756110                    STQ     0,X0,PR0

      249     6407    4                     END;

   6407  1 000454   200006 054100                    AOS     I,,AUTO
         1 000455   200006 236100                    LDQ     I,,AUTO
         1 000456   200007 116100                    CMPQ    TEMP1,,AUTO
         1 000457   000447 604400 1                  TMOZ    s:6406

      250     6408    3                END;

      251     6409
      252     6410    2           B$JIT.JUNK2 = (B$JIT.JUNK2 | %JJ2_PACCESS#);

   6410  1 000460   000000 470400 xsym               LDP0    B$JIT$
         1 000461   000321 220100                    LDX0    209,,PR0
         1 000462   000002 260003                    ORX0    2,DU
         1 000463   000321 740100                    STX0    209,,PR0

      253     6411    2           END;

      254     6412    1      CALL HFC$ASSOCCLR (%USERWSQ,0,16384); /*MAX Dense PT*/

   6412  1 000464   000006 630400 2                  EPPR0   6
         1 000465   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 000466   000000 701000 xent               TSX1    HFC$ASSOCCLR
         1 000467   000000 011000                    NOP     0

      255     6413
      256     6414        /* Restore the current SSR to the Magic Descriptors so the ASR will
      257     6415           be built correctly for entry to DELTA.
      258     6416        */
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:35   
      259     6417    1      CALL UDN$JAMSS;

   6417  1 000470   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 000471   000000 701000 xent               TSX1    UDN$JAMSS
         1 000472   000000 011000                    NOP     0

      260     6418    1      IF ECC = %ECC_ALIB#

   6418  1 000473   200003 470500                    LDP0    @ECC,,AUTO
         1 000474   000000 235100                    LDA     0,,PR0
         1 000475   000137 115007                    CMPA    95,DL
         1 000476   000514 601000 1                  TNZ     s:6420

      261     6419    1      THEN CALL JSN$DELTRAS(B$SDS1$->B$SDS.DBENT,B_MPT.SS$,B_MPT.LS$->B$ULS.SPCL1);

   6419  1 000477   000001 236000 xsym               LDQ     B_MPT+1
         1 000500   000042 036003                    ADLQ    34,DU
         1 000501   200014 756100                    STQ     STK$+4,,AUTO
         1 000502   000001 236000 2                  LDQ     1
         1 000503   200013 756100                    STQ     STK$+3,,AUTO
         1 000504   000000 236000 xsym               LDQ     B$SDS1$
         1 000505   000004 036003                    ADLQ    4,DU
         1 000506   200012 756100                    STQ     STK$+2,,AUTO
         1 000507   200012 630500                    EPPR0   STK$+2,,AUTO
         1 000510   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 000511   000000 701000 xent               TSX1    JSN$DELTRAS
         1 000512   000000 011000                    NOP     0
         1 000513   000530 710000 1                  TRA     DGX

      262     6420    1      ELSE CALL SSS$DELTRD(B$SDS1$->B$SDS.DBENT,B_MPT.SS$,B_MPT.LS$->B$ULS.SPCL1);

   6420  1 000514   000001 236000 xsym               LDQ     B_MPT+1
         1 000515   000042 036003                    ADLQ    34,DU
         1 000516   200014 756100                    STQ     STK$+4,,AUTO
         1 000517   000001 236000 2                  LDQ     1
         1 000520   200013 756100                    STQ     STK$+3,,AUTO
         1 000521   000000 236000 xsym               LDQ     B$SDS1$
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:36   
         1 000522   000004 036003                    ADLQ    4,DU
         1 000523   200012 756100                    STQ     STK$+2,,AUTO
         1 000524   200012 630500                    EPPR0   STK$+2,,AUTO
         1 000525   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 000526   000000 701000 xent               TSX1    SSS$DELTRD
         1 000527   000000 011000                    NOP     0

      263     6421
      264     6422        %EJECT;
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:37   
      265     6423
      266     6424                                                /*ALTRET FROM SST$SSFTCB              */
      267     6425
      268     6426    1   DGX: CALL SC_SSUTCB;

   6426  1 000530   000000 713400 xsym  DGX          CLIMB   SC_SSUTCB
         1 000531   000000 600000 xsid               climb   nvectors=         0

      269     6427        /*S*   SCREECH_CODE:   SSU-S$DTCB
      270     6428               TYPE:  SUA
      271     6429               MESSAGE: DELTA'S TCB is full (SSU$DELTAGO)
      272     6430        */
      273     6431    1   END;

   6431  1 000532   000000 702200 xent               TSX2  ! X66_ARET

EASF
 Sect OctLoc
   0     000   232325 410124                                                    ...T

ESSF
 Sect OctLoc
   0     001   232325 410134                                                    ...\

MAP_DBRK
 Sect OctLoc
   0     002   000000 400000                                                    ....

MAP_PGWRITE
 Sect OctLoc
   0     003   000000 000020                                                    ....

(unnamed)
 Sect OctLoc
   0     004   100000 000000                                                    @...

(unnamed)
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:38   
 Sect OctLoc
   2     000   000004 006000   000000 006000   000027 006000   000002 006000    ................
   2     004   777777 777760   000000 040000   000012 006000   000002 006000    ...... .........
   2     010   000005 006000                                                    ....

PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:39   
--  Include file information  --

   UE_CP6.:E05TOU  is referenced.
   UD_SEV_C.:E05TOU  is referenced.
   HF_ERRORS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  is referenced.
   B$USER.:E05TOU  cannot be made into a system file and is referenced.
   B$SS.:E05TOU  cannot be made into a system file and is referenced.
   B_UHJMAC_C.:E05TOU  is referenced.
   B_MLSMAC_C.:E05TOU  is referenced.
   B_ULSMAC_C.:E05TOU  is referenced.
   B_MACROS_C.:E05TOU  is referenced.
   B_MAGIC_C.:E05TOU  is referenced.
   MM_MACRO_M.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   MM$SYSGEN.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   MM_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   S_WSPTD_R.:E05TOU  cannot be made into a system file and is referenced.
   B$MAP.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure SSU$DELTAGO.
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:40   

 **** Variables and constants ****

  ****  Section 000 RoData SSU$DELTAGO

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/b STRC        r     1 EASF                       1-0-0/b STRC        r     1 ESSF
     2-0-0/b STRC        r     1 MAP_DBRK                   3-0-0/b STRC        r     1 MAP_PGWRITE

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @ECC                       4-0-0/w PTR         r     1 @ECINFO
     5-0-0/w PTR         r     1 @HR_SIZE                  *0-0-0/w UBIN        r     1 ECC
    *0-0-0/w UBIN        r     1 ECINFO(0:1)               *0-0-0/w UBIN        r     1 HR_SIZE
     6-0-0/w SBIN        r     1 I                         10-0-0/w PTR         r     1 STK$
     7-0-0/w SBIN        r     1 TEMP1

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$JIT$                     0-0-0/w PTR         r     1 B$LS$
     0-0-0/w PTR         r     1 B$SDS1$                    0-0-0/w PTR         r     1 B$UPT$
     0-0-0/d STRC(432)   r     1 B_MPT                      0-0-0/w UBIN        r     1 J_DBMXAS_D
     0-0-0/w UBIN        r     1 J_DBMXSS_D                 0-0-0/w PTR         r     1 MM_BYP$
     0-0-0/b STRC        r     1 MM_FPMC                    0-0-0/w PTR         r     1 S$CU$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:41   
     0-0-0/w STRC(72)    r     1 B$$DESCR                   0-0-0/w PTR         r     1 B$$PTR
     0-0-0/w STRC        r     1 B$$PTRR                    0-0-0/w STRC(144)   r     1 B$ALIB
     0-0-0/d STRC(396)   r     1 B$DO                       0-0-0/w STRC(2448)  r     1 B$EXCFR
     0-0-0/d STRC(8856)  r     1 B$JIT                      0-0-0/w STRC        r     1 B$MAP(0:1023)
     0-0-0/d STRC(10368) r     1 B$MLNK                     0-0-0/d STRC(576)   r     1 B$SDS
     0-0-0/d STRC(2304)  r     1 B$SS                       0-0-0/d STRC(144)   r     1 B$TCB
     0-0-0/d STRC(576)   r     1 B$U                        0-0-0/d STRC(2592)  r     1 B$ULS


   Procedure SSU$DELTAGO requires 347 words for executable code.
   Procedure SSU$DELTAGO requires 16 words of local(AUTO) storage.

    No errors detected in file SSU$DELTAGO.:E05TSI    .
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:42   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:43   
          MINI XREF LISTING

B$$DESCR
      1011**DCL      6316<<ASSIGN   6337>>ASSIGN
B$$DESCR.BASE
      1016**DCL      6281>>IF       6303>>IF
B$$DESCR.WSR
      1014**DCL      6283>>IF
B$$PTR
        39**DCL        40--REDEF
B$$PTRR.OFFSET
        41**DCL      6332>>ASSIGN
B$ALIB.WHO
      6237**DCL      6391>>IF
B$DO
      4778**DCL      6331--CALL
B$DO.BUSY
      4781**DCL      6331--CALL
B$DO.ECCINFO
      4794**DCL      4795--REDEF
B$EXCFR.ASL
      6244**DCL      6244--REDEF    6333<<ASSIGN
B$EXCFR.ERR.ERR#
      6258**DCL      6258--REDEF
B$EXCFR.EVID
      6257**DCL      6257--REDEF    6258--REDEF
B$EXCFR.IR
      6245**DCL      6245--REDEF
B$EXCFR.PREVSZ
      6244**DCL      6244--REDEF
B$EXCFR.SUBC
      6256**DCL      6256--REDEF    6257--REDEF    6257--REDEF
B$JIT.DDLL
      5270**DCL      6363>>DOINDEX
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:44   
B$JIT.DDUL
      5270**DCL      6362>>ASSIGN
B$JIT.DLL
      5270**DCL      6354>>DOINDEX
B$JIT.DUL
      5270**DCL      6353>>ASSIGN
B$JIT.ERR
      5183**DCL      6294<<ASSIGN   6306<<ASSIGN
B$JIT.ERR.CODE
      5184**DCL      6294>>IF
B$JIT.ERR.MID
      5184**DCL      5184--REDEF
B$JIT.JRESPEAK
      5274**DCL      5275--REDEF
B$JIT.JUNK2
      5361**DCL      6351>>IF       6380<<ASSIGN   6380>>ASSIGN   6410<<ASSIGN   6410>>ASSIGN
B$JIT.LLL
      5276**DCL      6404>>ASSIGN   6405>>DOINDEX
B$JIT.PCL
      5276**DCL      6402>>IF       6404>>ASSIGN
B$JIT.PCP
      5271**DCL      6394>>ASSIGN
B$JIT.PLL
      5270**DCL      6394>>ASSIGN   6395>>DOINDEX
B$JIT.PTSIZ
      5276**DCL      6371>>ASSIGN
B$JIT$
        47**DCL      5178--IMP-PTR  6294>>IF       6294>>ASSIGN   6306>>ASSIGN   6351>>IF       6353>>ASSIGN
      6354>>DOINDEX  6362>>ASSIGN   6363>>DOINDEX  6371>>ASSIGN   6380>>ASSIGN   6380>>ASSIGN   6394>>ASSIGN
      6394>>ASSIGN   6395>>DOINDEX  6402>>IF       6404>>ASSIGN   6404>>ASSIGN   6405>>DOINDEX  6410>>ASSIGN
      6410>>ASSIGN
B$LS$
        48**DCL      6316>>ASSIGN
B$MAP
        94**DCL      6355>>IF       6357<<ASSIGN   6357>>ASSIGN   6359<<ASSIGN   6359>>ASSIGN   6364>>IF
      6366<<ASSIGN   6366>>ASSIGN   6368<<ASSIGN   6368>>ASSIGN   6373>>IF       6375<<ASSIGN   6375>>ASSIGN
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:45   
      6377<<ASSIGN   6377>>ASSIGN   6396<<ASSIGN   6396>>ASSIGN   6406<<ASSIGN   6406>>ASSIGN
B$MAP.RPN
        95**DCL      6358>>IF       6367>>IF       6376>>IF
B$MAP.SCTRL
        96**DCL        97--REDEF
B$MLNK.DBLS
      3472**DCL      6316>>ASSIGN
B$SDS.DBENT
      4446**DCL      6419<>CALL     6420<>CALL
B$SDS1$
        45**DCL      6419>>CALL     6420>>CALL
B$SS.ASR
      4524**DCL      6340>>ASSIGN
B$SS.ISR
      4518**DCL      6342>>ASSIGN
B$SS.ISR.WSR
      4521**DCL      6325>>DOWHILE
B$SS.LSR
      4530**DCL      6339>>ASSIGN
B$SS.PSR
      4536**DCL      6341>>ASSIGN
B$SS.RVA
      4516**DCL      4517--REDEF
B$TCB.STK$
      6241**DCL      6332--ASSIGN
B$U.APR
      4753**DCL      6391>>IF
B$U.FLG
      4660**DCL      6345<<ASSIGN   6345>>ASSIGN
B$U.MISC
      4773**DCL      4774--REDEF
B$ULS.SPCL1
      2247**DCL      6337<<ASSIGN   6419<>CALL     6420<>CALL
B$ULS.SPCL1.TYP
      2251**DCL      6338<<ASSIGN
B$ULS.SPCL2
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:46   
      2253**DCL      6339<<ASSIGN
B$ULS.SPCL3
      2259**DCL      6340<<ASSIGN
B$ULS.SPCL4
      2265**DCL      6341<<ASSIGN
B$ULS.SPCL5
      2279**DCL      6342<<ASSIGN
B$UPT$
        46**DCL      6355>>IF       6357>>ASSIGN   6357>>ASSIGN   6358>>IF       6359>>ASSIGN   6359>>ASSIGN
      6364>>IF       6366>>ASSIGN   6366>>ASSIGN   6367>>IF       6368>>ASSIGN   6368>>ASSIGN   6373>>IF
      6375>>ASSIGN   6375>>ASSIGN   6376>>IF       6377>>ASSIGN   6377>>ASSIGN   6396>>ASSIGN   6396>>ASSIGN
      6406>>ASSIGN   6406>>ASSIGN
B$USER.MISC
      4849**DCL      4850--REDEF
B_MPT.AS
       842**DCL       845--REDEF
B_MPT.ASDESC
       874**DCL       878--REDEF
B_MPT.ASDESC$
       878**DCL      6281>>IF
B_MPT.ECCB
       857**DCL       860--REDEF
B_MPT.ECCBDESC
       892**DCL       896--REDEF
B_MPT.LS
       837**DCL       840--REDEF
B_MPT.LS$
       840**DCL      6337>>ASSIGN   6338>>ASSIGN   6339>>ASSIGN   6340>>ASSIGN   6341>>ASSIGN   6342>>ASSIGN
      6419>>CALL     6420>>CALL
B_MPT.LSDESC
       868**DCL       872--REDEF
B_MPT.LSDESC$
       872**DCL      6316>>ASSIGN
B_MPT.PS
       847**DCL       850--REDEF
B_MPT.PSDESC
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:47   
       880**DCL       884--REDEF
B_MPT.SS
       832**DCL       835--REDEF
B_MPT.SS$
       835**DCL      6325>>DOWHILE  6329<>CALL     6339>>ASSIGN   6340>>ASSIGN   6341>>ASSIGN   6342>>ASSIGN
      6419<>CALL     6420<>CALL
B_MPT.SSDESC
       862**DCL       866--REDEF
B_MPT.SSDESC$
       866**DCL      6283>>IF       6303>>IF       6337>>ASSIGN
B_MPT.TCB
       852**DCL       855--REDEF
B_MPT.TCB$
       855**DCL      6329<>CALL     6332>>ASSIGN   6332>>ASSIGN
B_MPT.TCBDESC
       886**DCL       890--REDEF
DGX
      6426**LABEL    6329--CALLALT
EASF
      5493**DCL      6294>>ASSIGN
ECC
        12**DCL        10--PROC     6320>>IF       6323>>IF       6329<>CALL     6330>>IF       6391>>IF
      6418>>IF
ECINFO
        13**DCL        10--PROC     6329<>CALL     6331--CALL     6390--ASSIGN
ESSF
      5501**DCL      6306>>ASSIGN
HFC$ASSOCCLR
        36**DCL-ENT  6412--CALL
HR_SIZE
        14**DCL        10--PROC     6329<>CALL
I
        16**DCL      6354<<DOINDEX  6355>>IF       6357>>ASSIGN   6357>>ASSIGN   6358>>IF       6358>>IF
      6359>>ASSIGN   6359>>ASSIGN   6363<<DOINDEX  6364>>IF       6366>>ASSIGN   6366>>ASSIGN   6367>>IF
      6367>>IF       6368>>ASSIGN   6368>>ASSIGN   6372<<DOINDEX  6373>>IF       6375>>ASSIGN   6375>>ASSIGN
      6376>>IF       6376>>IF       6377>>ASSIGN   6377>>ASSIGN   6395<<DOINDEX  6396>>ASSIGN   6396>>ASSIGN
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:48   
      6405<<DOINDEX  6406>>ASSIGN   6406>>ASSIGN
JSE$ABORTM
        26**DCL-ENT  6300--CALL
JSE$ABORTX
        27**DCL-ENT  6312--CALL
JSN$DELTRAS
        29**DCL-ENT  6419--CALL
JSN$FIXSSM
        24**DCL-ENT  6305--CALL
JSS$BACKSS
        25**DCL-ENT  6327--CALL
JSS$FIXLASR
        28**DCL-ENT  6293--CALL
J_DBMXAS_D
        50**DCL      6281>>IF
J_DBMXSS_D
        51**DCL      6303>>IF
MAP_DBRK
      6261**DCL      6355>>IF       6364>>IF       6373>>IF
MAP_PGWRITE
      6265**DCL      6357>>ASSIGN   6359>>ASSIGN   6366>>ASSIGN   6368>>ASSIGN   6375>>ASSIGN   6377>>ASSIGN
      6396>>ASSIGN   6406>>ASSIGN
MM$DESC.BOUND
       639**DCL       640--REDEF
MM$DESC.FLGS
       640**DCL       640--REDEF
MM$PPUT.USER#
       628**DCL       628--REDEF
MM_BYP$
       559**DCL       559--IMP-PTR
MM_FPMC.RPN
       565**DCL      6358>>IF       6367>>IF       6376>>IF
S$CU$
      4860**DCL      6345>>ASSIGN   6345>>ASSIGN   6391>>IF
SC_SSUASF
        35**DCL-ENT  6283--CALL
PL6.E3A0      #001=SSU$DELTAGO File=SSU$DELTAGO.:E05TSI                          WED 07/30/97 05:59 Page:49   
SC_SSUTCB
        34**DCL-ENT  6426--CALL
SSC$SERV
        30**DCL-ENT  6299--CALL     6311--CALL
SSS$DELTRD
        31**DCL-ENT  6420--CALL
SST$SSFTCB
        32**DCL-ENT  6329--CALL
SSV$XXDO
        33**DCL-ENT  6331--CALL
SS_MOVED
      6333**LABEL    6320--GOTO
STK$
        18**DCL      6331>>CALL     6331>>CALL     6332<<ASSIGN   6333>>ASSIGN   6390<<ASSIGN   6391>>IF
TEMP1
        17**DCL      6322<<ASSIGN   6326<<ASSIGN   6333>>ASSIGN   6353<<ASSIGN   6354>>DOINDEX  6358>>IF
      6362<<ASSIGN   6363>>DOINDEX  6367>>IF       6371<<ASSIGN   6372>>DOINDEX  6376>>IF       6394<<ASSIGN
      6395>>DOINDEX  6404<<ASSIGN   6405>>DOINDEX
UDN$BLDASR
        22**DCL-ENT  6279--CALL
UDN$JAMSS
        23**DCL-ENT  6417--CALL
UDN$MAGIC
        20**DCL-ENT  6276--CALL     6280--CALL
UDN$MAGICLS
        21**DCL-ENT  6317--CALL
