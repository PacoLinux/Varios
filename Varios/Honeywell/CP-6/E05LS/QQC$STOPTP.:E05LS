VERSION E05

PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:1    
        1        1        /*M* QQC$STOPTP - Prepare an instance for termination */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* IND=2, DCI=4, CSU=2, ECU=4, DTI=2, CTI=4, AND */
        8        8        QQC$STOPTP:
        9        9                PROC(P_NOW_FLAG);
       10       10
       11       11        %INCLUDE Q_PAGE_C;
       12       43        %SET LISTEXP = '1'B;
       13       44        %PAGE(ARG="Includes");

                61        /***************************************************************************
                62         *                                                                         *
                63         *                                  Includes                               *
                64         *                                                                         *
                65         ***************************************************************************/

       14       69        %INCLUDE CP_6;
       15      150        %INCLUDE CP_6_SUBS;
       16      690        %INCLUDE B$JIT;
       17      980        %INCLUDE QQ_MACROS_C;
       18     1405        %INCLUDE QQ_DATA_R;
       19     1651        %INCLUDE B_ERRORS_C;
       20     2778        %INCLUDE SS_SCHED_C;
       21     3011        %PAGE(ARG="Externally defined routines");

              3028    1   /***************************************************************************
              3029    1    *                                                                         *
              3030    1    *                        Externally defined routines                      *
              3031    1    *                                                                         *
              3032    1    ***************************************************************************/

       22     3036    1   DCL QQC$SCREECH ENTRY;
       23     3037    1   DCL QQC$BLDMSG ENTRY(1);
PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:2    
       24     3038    1   DCL QQC$BLDMSG_ERRBLK ENTRY(1);
       25     3039    1   DCL QQC$TERMINATE ENTRY;
       26     3040        %PAGE(ARG="Parameters");

              3057    1   /***************************************************************************
              3058    1    *                                                                         *
              3059    1    *                                 Parameters                              *
              3060    1    *                                                                         *
              3061    1    ***************************************************************************/

       27     3065    1   DCL P_NOW_FLAG BIT(1) ALIGNED;
       28     3066        %PAGE(ARG="Symrefs");

              3083    1   /***************************************************************************
              3084    1    *                                                                         *
              3085    1    *                                  Symrefs                                *
              3086    1    *                                                                         *
              3087    1    ***************************************************************************/

       29     3091    1   DCL B$JIT$ PTR SYMREF;
       30     3092    1   DCL B$TCB$ PTR SYMREF;
       31     3093        %PAGE(ARG="DCBs");

              3110    1   /***************************************************************************
              3111    1    *                                                                         *
              3112    1    *                                    DCBs                                 *
              3113    1    *                                                                         *
              3114    1    ***************************************************************************/

       32     3118    1   DCL M$CG DCB;
       33     3119        %PAGE(ARG="Based");

              3136    1   /***************************************************************************
              3137    1    *                                                                         *
              3138    1    *                                   Based                                 *
              3139    1    *                                                                         *
              3140    1    ***************************************************************************/
PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:3    

       34     3144        %B$TCB;
       35     3147        %B$ALT;
       36     3155        %TP$STATION;
       37     3228        %TPU$INFO;
       38     3257        %PAGE(ARG="Static");

              3274    1   /***************************************************************************
              3275    1    *                                                                         *
              3276    1    *                                   Static                                *
              3277    1    *                                                                         *
              3278    1    ***************************************************************************/

       39     3282    1   DCL STATION CHAR(8) STATIC;
       40     3283        %PAGE(ARG="Auto");

              3300    1   /***************************************************************************
              3301    1    *                                                                         *
              3302    1    *                                    Auto                                 *
              3303    1    *                                                                         *
              3304    1    ***************************************************************************/

       41     3308    1   DCL I SBIN WORD;
       42     3309
       43     3310    1   DCL NEXT$ PTR;
       44     3311
       45     3312        %MSGBLK;
       46     3402        %PAGE(ARG="FPTs", PAGE=YES);

PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:4    
              3419    1   /***************************************************************************
              3420    1    *                                                                         *
              3421    1    *                                    FPTs                                 *
              3422    1    *                                                                         *
              3423    1    ***************************************************************************/

       47     3427        %FPT_ACTIVATE(FPTN=FPT_DEACTIVATE, DCB=M$CG, STATION=STATION, DISCONNECT=YES,
       48     3428        ABTET=YES, ABTREAD=%TYC_EOF);
       49     3451
       50     3452        %FPT_RUE(EVENT=%SS_ABRT);
       51     3466        %PAGE(ARG="QQC$STOPTP", PAGE=YES);

PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:5    
              3483    1   /***************************************************************************
              3484    1    *                                                                         *
              3485    1    *                                 QQC$STOPTP                              *
              3486    1    *                                                                         *
              3487    1    ***************************************************************************/

       52     3491    1           QQ_GLOBAL.TERMINATE = '1'B;
       53     3492    1           QQ_GLOBAL.STRANGERMAX = 0;
       54     3493    1           QQ_GLOBAL.STATIONMAX = 0;
       55     3494    1           QQ_GLOBAL.TPUMAX = 0;
       56     3495    1           QQ_GLOBAL.SCHEDINT = 999999999;
       57     3496
       58     3497    1           IF QQ_GLOBAL.ERR ~= '0'B THEN
       59     3498    2             DO;
       60     3499    2               CALL QQC$BLDMSG_ERRBLK(MSGBLK);
       61     3500    2               MSGBLK.ERRINFO.ERR(0) = QQ_GLOBAL.ERR;
       62     3501    2               CALL QQC$BLDMSG(MSGBLK);
       63     3502    2               QQ_GLOBAL.ERR = '0'B;
       64     3503    2             END;
       65     3504
       66     3505    1           IF NOT QQ_GLOBAL.INSTANCE_UP THEN
       67     3506    2             DO;
       68     3507    2               CALL QQC$TERMINATE;
       69     3508    2             END;
       70     3509
       71     3510    2           DO I = 1 TO QQ_GLOBAL.STATION_CNT;
       72     3511    2             S$ = PINCRW(QQ_GLOBAL.STATION$, (I - 1) * SIZEW(TP$STATION));
       73     3512
       74     3513    2             STATION = TP$STATION.ID;
       75     3514    2             CALL M$DEACTIVATE(FPT_DEACTIVATE) ALTRET(DEACTIVATE_ERR);
       76     3515    2             TP$STATION.FLAGS.DISCONNECT = '1'B;
       77     3516
       78     3517    3             DO WHILE('0'B);
       79     3518
       80     3519    3   DEACTIVATE_ERR:
       81     3520    3               IF B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR.CODE ~= 1154 /* E$CGAFNS */ THEN
       82     3521    4                 DO;
PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:6    
       83     3522    4                   GOTO MON_ERR;
       84     3523    4                 END;
       85     3524    3             END /* NEVER */;
       86     3525
       87     3526    2           END /* DO */;
       88     3527
       89     3528    1           NEXT$ = QQ_GLOBAL.TPU$;
       90     3529
       91     3530    2           DO WHILE('1'B);
       92     3531    2             NEXT$ = NEXT$ -> TPU$INFO.FLINK$;
       93     3532    2             IF NEXT$ -> TPU$INFO.FLINK$ = ADDR(NIL) THEN
       94     3533    3               DO;
       95     3534    3                 GOTO RET;
       96     3535    3               END;
       97     3536
       98     3537    2             IF P_NOW_FLAG THEN
       99     3538    3               DO;
      100     3539    3                 FPT_RUE.V.USER# = NEXT$ -> TPU$INFO.SYSID;
      101     3540    3                 CALL M$RUE(FPT_RUE) ALTRET(MON_ERR);
      102     3541    3                 NEXT$ -> TPU$INFO.FLAGS.DISCONNECT = '1'B;
      103     3542    3               END;
      104     3543    2             ELSE
      105     3544    3               DO;
      106     3545    3                 STATION = NEXT$ -> TPU$INFO.STATION;
      107     3546    3                 CALL M$ACTIVATE(FPT_DEACTIVATE) ALTRET(ACTIVATE_ERR);
      108     3547    3                 NEXT$ -> TPU$INFO.FLAGS.DISCONNECT = '1'B;
      109     3548
      110     3549    4                 DO WHILE('0'B);
      111     3550
      112     3551    4   ACTIVATE_ERR:
      113     3552    4                   IF B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR.CODE ~= 1154 /* E$CGAFNS */
              3552                            THEN
      114     3553    5                     DO;
      115     3554    5                       GOTO MON_ERR;
      116     3555    5                     END;
      117     3556    4                 END /* NEVER */;
      118     3557    3               END;
PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:7    
      119     3558
      120     3559    2           END /* WHILE */;
      121     3560
      122     3561    1   RET:
      123     3562    1           RETURN;
      124     3563
      125     3564    1   MON_ERR:
      126     3565    1           QQ_GLOBAL.ERR = B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR;
      127     3566    1           CALL QQC$SCREECH;
      128     3567
      129     3568    1   END QQC$STOPTP;

PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:8    
--  Include file information  --

   SS_SCHED_C.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   QQ_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   QQ_MACROS_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   Q_PAGE_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure QQC$STOPTP.

   Procedure QQC$STOPTP requires 114 words for executable code.
   Procedure QQC$STOPTP requires 32 words of local(AUTO) storage.

    No errors detected in file QQC$STOPTP.:E05TSI    .

PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:9    

 Object Unit name= QQC$STOPTP                                 File name= QQC$STOPTP.:E05TOU
 UTS= JUL 30 '97 05:42:32.76 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   DCB   even  none     0      0  M$CG
    2   Data  even  none    22     26  QQC$STOPTP
    3   Proc  even  none   114    162  QQC$STOPTP
    4  RoData even  none     1      1  QQC$STOPTP

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes            yes      Std        1  QQC$STOPTP

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       1 QQC$BLDMSG_ERRBLK
         yes           Std       1 QQC$BLDMSG
         yes           Std       0 QQC$TERMINATE
         yes           Std       0 QQC$SCREECH
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:10   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  QQ_GLOBAL                             B$JIT$
     B$TCB$                                M$CG                                  B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:11   


        1        1        /*M* QQC$STOPTP - Prepare an instance for termination */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* IND=2, DCI=4, CSU=2, ECU=4, DTI=2, CTI=4, AND */
        8        8        QQC$STOPTP:
        9        9                PROC(P_NOW_FLAG);

      9  3 000000   000000 700200 xent  QQC$STOPTP   TSX0  ! X66_AUTO_1
         3 000001   000040 000001                    ZERO    32,1

       10       10
       11       11        %INCLUDE Q_PAGE_C;
       12       43        %SET LISTEXP = '1'B;
       13       44        %PAGE(ARG="Includes");

                61        /***************************************************************************
                62         *                                                                         *
                63         *                                  Includes                               *
                64         *                                                                         *
                65         ***************************************************************************/

       14       69        %INCLUDE CP_6;
       15      150        %INCLUDE CP_6_SUBS;
       16      690        %INCLUDE B$JIT;
       17      980        %INCLUDE QQ_MACROS_C;
       18     1405        %INCLUDE QQ_DATA_R;
       19     1651        %INCLUDE B_ERRORS_C;
       20     2778        %INCLUDE SS_SCHED_C;
       21     3011        %PAGE(ARG="Externally defined routines");

              3028    1   /***************************************************************************
              3029    1    *                                                                         *
              3030    1    *                        Externally defined routines                      *
PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:12   
              3031    1    *                                                                         *
              3032    1    ***************************************************************************/

       22     3036    1   DCL QQC$SCREECH ENTRY;
       23     3037    1   DCL QQC$BLDMSG ENTRY(1);
       24     3038    1   DCL QQC$BLDMSG_ERRBLK ENTRY(1);
       25     3039    1   DCL QQC$TERMINATE ENTRY;
       26     3040        %PAGE(ARG="Parameters");

              3057    1   /***************************************************************************
              3058    1    *                                                                         *
              3059    1    *                                 Parameters                              *
              3060    1    *                                                                         *
              3061    1    ***************************************************************************/

       27     3065    1   DCL P_NOW_FLAG BIT(1) ALIGNED;
       28     3066        %PAGE(ARG="Symrefs");

              3083    1   /***************************************************************************
              3084    1    *                                                                         *
              3085    1    *                                  Symrefs                                *
              3086    1    *                                                                         *
              3087    1    ***************************************************************************/

       29     3091    1   DCL B$JIT$ PTR SYMREF;
       30     3092    1   DCL B$TCB$ PTR SYMREF;
       31     3093        %PAGE(ARG="DCBs");

              3110    1   /***************************************************************************
              3111    1    *                                                                         *
              3112    1    *                                    DCBs                                 *
              3113    1    *                                                                         *
              3114    1    ***************************************************************************/

       32     3118    1   DCL M$CG DCB;
       33     3119        %PAGE(ARG="Based");

PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:13   
              3136    1   /***************************************************************************
              3137    1    *                                                                         *
              3138    1    *                                   Based                                 *
              3139    1    *                                                                         *
              3140    1    ***************************************************************************/

       34     3144        %B$TCB;
       35     3147        %B$ALT;
       36     3155        %TP$STATION;
       37     3228        %TPU$INFO;
       38     3257        %PAGE(ARG="Static");

              3274    1   /***************************************************************************
              3275    1    *                                                                         *
              3276    1    *                                   Static                                *
              3277    1    *                                                                         *
              3278    1    ***************************************************************************/

       39     3282    1   DCL STATION CHAR(8) STATIC;
       40     3283        %PAGE(ARG="Auto");

              3300    1   /***************************************************************************
              3301    1    *                                                                         *
              3302    1    *                                    Auto                                 *
              3303    1    *                                                                         *
              3304    1    ***************************************************************************/

       41     3308    1   DCL I SBIN WORD;
       42     3309
       43     3310    1   DCL NEXT$ PTR;
       44     3311
       45     3312        %MSGBLK;
       46     3402        %PAGE(ARG="FPTs", PAGE=YES);

PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:14   
              3419    1   /***************************************************************************
              3420    1    *                                                                         *
              3421    1    *                                    FPTs                                 *
              3422    1    *                                                                         *
              3423    1    ***************************************************************************/

       47     3427        %FPT_ACTIVATE(FPTN=FPT_DEACTIVATE, DCB=M$CG, STATION=STATION, DISCONNECT=YES,
       48     3428        ABTET=YES, ABTREAD=%TYC_EOF);
       49     3451
       50     3452        %FPT_RUE(EVENT=%SS_ABRT);
       51     3466        %PAGE(ARG="QQC$STOPTP", PAGE=YES);

PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:15   
              3483    1   /***************************************************************************
              3484    1    *                                                                         *
              3485    1    *                                 QQC$STOPTP                              *
              3486    1    *                                                                         *
              3487    1    ***************************************************************************/

       52     3491    1           QQ_GLOBAL.TERMINATE = '1'B;

   3491  3 000002   400000 236003                    LDQ     -131072,DU
         3 000003   000015 756000 xsym               STQ     QQ_GLOBAL+13

       53     3492    1           QQ_GLOBAL.STRANGERMAX = 0;

   3492  3 000004   000030 450000 xsym               STZ     QQ_GLOBAL+24

       54     3493    1           QQ_GLOBAL.STATIONMAX = 0;

   3493  3 000005   000027 450000 xsym               STZ     QQ_GLOBAL+23

       55     3494    1           QQ_GLOBAL.TPUMAX = 0;

   3494  3 000006   000026 450000 xsym               STZ     QQ_GLOBAL+22

       56     3495    1           QQ_GLOBAL.SCHEDINT = 999999999;

   3495  3 000007   000000 235000 4                  LDA     0
         3 000010   000031 755000 xsym               STA     QQ_GLOBAL+25

       57     3496
       58     3497    1           IF QQ_GLOBAL.ERR ~= '0'B THEN

   3497  3 000011   000000 235000 xsym               LDA     QQ_GLOBAL
         3 000012   000032 600000 3                  TZE     s:3505

       59     3498    2             DO;

       60     3499    2               CALL QQC$BLDMSG_ERRBLK(MSGBLK);
PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:16   

   3499  3 000013   200010 630500                    EPPR0   MSGBLK,,AUTO
         3 000014   200036 450500                    STP0    MSGBLK+22,,AUTO
         3 000015   200036 630500                    EPPR0   MSGBLK+22,,AUTO
         3 000016   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000017   000000 701000 xent               TSX1    QQC$BLDMSG_ERRBLK
         3 000020   000000 011000                    NOP     0

       61     3500    2               MSGBLK.ERRINFO.ERR(0) = QQ_GLOBAL.ERR;

   3500  3 000021   000000 236000 xsym               LDQ     QQ_GLOBAL
         3 000022   200016 756100                    STQ     MSGBLK+6,,AUTO

       62     3501    2               CALL QQC$BLDMSG(MSGBLK);

   3501  3 000023   200010 630500                    EPPR0   MSGBLK,,AUTO
         3 000024   200036 450500                    STP0    MSGBLK+22,,AUTO
         3 000025   200036 630500                    EPPR0   MSGBLK+22,,AUTO
         3 000026   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000027   000000 701000 xent               TSX1    QQC$BLDMSG
         3 000030   000000 011000                    NOP     0

       63     3502    2               QQ_GLOBAL.ERR = '0'B;

   3502  3 000031   000000 450000 xsym               STZ     QQ_GLOBAL

       64     3503    2             END;

       65     3504
       66     3505    1           IF NOT QQ_GLOBAL.INSTANCE_UP THEN

   3505  3 000032   000013 234000 xsym               SZN     QQ_GLOBAL+11
         3 000033   000037 604000 3                  TMI     s:3510

       67     3506    2             DO;

       68     3507    2               CALL QQC$TERMINATE;
PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:17   

   3507  3 000034   000002 631400 xsym               EPPR1   B_VECTNIL+2
         3 000035   000000 701000 xent               TSX1    QQC$TERMINATE
         3 000036   000000 011000                    NOP     0

       69     3508    2             END;

       70     3509
       71     3510    2           DO I = 1 TO QQ_GLOBAL.STATION_CNT;

   3510  3 000037   000001 235007                    LDA     1,DL
         3 000040   200006 755100                    STA     I,,AUTO
         3 000041   000073 710000 3                  TRA     s:3526+1

       72     3511    2             S$ = PINCRW(QQ_GLOBAL.STATION$, (I - 1) * SIZEW(TP$STATION));

   3511  3 000042   200006 236100                    LDQ     I,,AUTO
         3 000043   000032 402003                    MPY     26,DU
         3 000044   000032 136003                    SBLQ    26,DU
         3 000045   000151 036000 xsym               ADLQ    QQ_GLOBAL+105
         3 000046   200004 756100                    STQ     S$,,AUTO

       73     3512
       74     3513    2             STATION = TP$STATION.ID;

   3513  3 000047   200004 470500                    LDP0    S$,,AUTO
         3 000050   040000 100500                    MLR     fill='040'O
         3 000051   000000 000010                    ADSC9   0,,PR0                   cn=0,n=8
         3 000052   000000 000010 2                  ADSC9   STATION                  cn=0,n=8

       75     3514    2             CALL M$DEACTIVATE(FPT_DEACTIVATE) ALTRET(DEACTIVATE_ERR);

   3514  3 000053   000002 630400 2                  EPPR0   FPT_DEACTIVATE
         3 000054   500001 713400                    CLIMB   alt,+32769
         3 000055   401400 401760                    pmme    nvectors=4
         3 000056   000063 702000 3                  TSX2    DEACTIVATE_ERR

PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:18   
       76     3515    2             TP$STATION.FLAGS.DISCONNECT = '1'B;

   3515  3 000057   200004 470500                    LDP0    S$,,AUTO
         3 000060   020000 236003                    LDQ     8192,DU
         3 000061   000022 256100                    ORSQ    18,,PR0

       77     3516
       78     3517    3             DO WHILE('0'B);

   3517  3 000062   000072 710000 3                  TRA     s:3526

       79     3518
       80     3519    3   DEACTIVATE_ERR:
       81     3520    3               IF B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR.CODE ~= 1154 /* E$CGAFNS */ THEN

   3520  3 000063   000000 470400 xsym  DEACTIVATE_* LDP0    B$TCB$
         3 000064   000000 471500                    LDP1    0,,PR0
         3 000065   100102 236100                    LDQ     66,,PR1
         3 000066   377770 376007                    ANQ     131064,DL
         3 000067   022020 116007                    CMPQ    9232,DL
         3 000070   000072 600000 3                  TZE     s:3526

       82     3521    4                 DO;

       83     3522    4                   GOTO MON_ERR;

   3522  3 000071   000152 710000 3                  TRA     MON_ERR

       84     3523    4                 END;
       85     3524    3             END /* NEVER */;

       86     3525
       87     3526    2           END /* DO */;

   3526  3 000072   200006 054100                    AOS     I,,AUTO
         3 000073   000032 236000 xsym               LDQ     QQ_GLOBAL+26
         3 000074   000042 604000 3                  TMI     s:3511
PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:19   
         3 000075   200006 116100                    CMPQ    I,,AUTO
         3 000076   000042 605000 3                  TPL     s:3511

       88     3527
       89     3528    1           NEXT$ = QQ_GLOBAL.TPU$;

   3528  3 000077   000155 236000 xsym               LDQ     QQ_GLOBAL+109
         3 000100   200007 756100                    STQ     NEXT$,,AUTO

       90     3529
       91     3530    2           DO WHILE('1'B);

       92     3531    2             NEXT$ = NEXT$ -> TPU$INFO.FLINK$;

   3531  3 000101   200007 470500                    LDP0    NEXT$,,AUTO
         3 000102   000001 236100                    LDQ     1,,PR0
         3 000103   200007 756100                    STQ     NEXT$,,AUTO

       93     3532    2             IF NEXT$ -> TPU$INFO.FLINK$ = ADDR(NIL) THEN

   3532  3 000104   200007 470500                    LDP0    NEXT$,,AUTO
         3 000105   000001 236100                    LDQ     1,,PR0
         3 000106   000001 116000 xsym               CMPQ    B_VECTNIL+1
         3 000107   000111 601000 3                  TNZ     s:3537

       94     3533    3               DO;

       95     3534    3                 GOTO RET;

   3534  3 000110   000151 710000 3                  TRA     RET

       96     3535    3               END;
       97     3536
       98     3537    2             IF P_NOW_FLAG THEN

   3537  3 000111   200003 471500                    LDP1    @P_NOW_FLAG,,AUTO
         3 000112   100000 234100                    SZN     0,,PR1
PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:20   
         3 000113   000126 605000 3                  TPL     s:3545

       99     3538    3               DO;

      100     3539    3                 FPT_RUE.V.USER# = NEXT$ -> TPU$INFO.SYSID;

   3539  3 000114   000002 720100                    LXL0    2,,PR0
         3 000115   000024 740000 2                  STX0    FPT_RUE+2

      101     3540    3                 CALL M$RUE(FPT_RUE) ALTRET(MON_ERR);

   3540  3 000116   000022 630400 2                  EPPR0   FPT_RUE
         3 000117   420020 713400                    CLIMB   alt,+8208
         3 000120   400000 401760                    pmme    nvectors=1
         3 000121   000152 702000 3                  TSX2    MON_ERR

      102     3541    3                 NEXT$ -> TPU$INFO.FLAGS.DISCONNECT = '1'B;

   3541  3 000122   200007 470500                    LDP0    NEXT$,,AUTO
         3 000123   200000 236003                    LDQ     65536,DU
         3 000124   000011 256100                    ORSQ    9,,PR0

      103     3542    3               END;

   3542  3 000125   000101 710000 3                  TRA     s:3531

      104     3543    2             ELSE
      105     3544    3               DO;

      106     3545    3                 STATION = NEXT$ -> TPU$INFO.STATION;

   3545  3 000126   040000 100500                    MLR     fill='040'O
         3 000127   000004 000010                    ADSC9   4,,PR0                   cn=0,n=8
         3 000130   000000 000010 2                  ADSC9   STATION                  cn=0,n=8

      107     3546    3                 CALL M$ACTIVATE(FPT_DEACTIVATE) ALTRET(ACTIVATE_ERR);

PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:21   
   3546  3 000131   000002 630400 2                  EPPR0   FPT_DEACTIVATE
         3 000132   500000 713400                    CLIMB   alt,+32768
         3 000133   401400 401760                    pmme    nvectors=4
         3 000134   000141 702000 3                  TSX2    ACTIVATE_ERR

      108     3547    3                 NEXT$ -> TPU$INFO.FLAGS.DISCONNECT = '1'B;

   3547  3 000135   200007 470500                    LDP0    NEXT$,,AUTO
         3 000136   200000 236003                    LDQ     65536,DU
         3 000137   000011 256100                    ORSQ    9,,PR0

      109     3548
      110     3549    4                 DO WHILE('0'B);

   3549  3 000140   000101 710000 3                  TRA     s:3531

      111     3550
      112     3551    4   ACTIVATE_ERR:
      113     3552    4                   IF B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR.CODE ~= 1154 /* E$CGAFNS */
              3552                            THEN

   3552  3 000141   000000 470400 xsym  ACTIVATE_ERR LDP0    B$TCB$
         3 000142   000000 471500                    LDP1    0,,PR0
         3 000143   100102 236100                    LDQ     66,,PR1
         3 000144   377770 376007                    ANQ     131064,DL
         3 000145   022020 116007                    CMPQ    9232,DL
         3 000146   000150 600000 3                  TZE     s:3559

      114     3553    5                     DO;

      115     3554    5                       GOTO MON_ERR;

   3554  3 000147   000152 710000 3                  TRA     MON_ERR

      116     3555    5                     END;
      117     3556    4                 END /* NEVER */;

PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:22   
      118     3557    3               END;

      119     3558
      120     3559    2           END /* WHILE */;

   3559  3 000150   000101 710000 3                  TRA     s:3531

      121     3560
      122     3561    1   RET:
      123     3562    1           RETURN;

   3562  3 000151   000000 702200 xent  RET          TSX2  ! X66_ARET

      124     3563
      125     3564    1   MON_ERR:
      126     3565    1           QQ_GLOBAL.ERR = B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR;

   3565  3 000152   000000 470400 xsym  MON_ERR      LDP0    B$TCB$
         3 000153   000000 471500                    LDP1    0,,PR0
         3 000154   100102 236100                    LDQ     66,,PR1
         3 000155   000000 756000 xsym               STQ     QQ_GLOBAL

      127     3566    1           CALL QQC$SCREECH;

   3566  3 000156   000002 631400 xsym               EPPR1   B_VECTNIL+2
         3 000157   000000 701000 xent               TSX1    QQC$SCREECH
         3 000160   000000 011000                    NOP     0

      128     3567
      129     3568    1   END QQC$STOPTP;

   3568  3 000161   000000 702200 xent               TSX2  ! X66_ARET

PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:23   
--  Include file information  --

   SS_SCHED_C.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   QQ_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   QQ_MACROS_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   Q_PAGE_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure QQC$STOPTP.
PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:24   

 **** Variables and constants ****

  ****  Section 002  Data  QQC$STOPTP

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     2-0-0/d STRC(576)   r     1 FPT_DEACTIVATE            22-0-0/d STRC(144)   r     1 FPT_RUE
     0-0-0/c CHAR(8)     r     1 STATION

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @P_NOW_FLAG                6-0-0/w SBIN        r     1 I
    10-0-0/w STRC(738)   r     1 MSGBLK                     7-0-0/w PTR         r     1 NEXT$
    *0-0-0/w BIT         r     1 P_NOW_FLAG                 4-0-0/w PTR         r     1 S$
     5-0-0/w PTR         r     1 T$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$JIT$                     0-0-0/w PTR         r     1 B$TCB$
     0-0-0/d STRC(9090)  r     1 QQ_GLOBAL

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/w STRC(144)   r     1 B$TCB
     0-0-0N  NULL        r     1 M$CG                       0-0-0/w STRC(909)   r     1 TP$STATION
     0-0-0/w STRC(361)   r     1 TPU$INFO

PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:25   

   Procedure QQC$STOPTP requires 114 words for executable code.
   Procedure QQC$STOPTP requires 32 words of local(AUTO) storage.

    No errors detected in file QQC$STOPTP.:E05TSI    .
PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:26   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:27   
          MINI XREF LISTING

ACTIVATE_ERR
      3552**LABEL    3546--CALLALT
B$ALT.CODE
      3149**DCL      3149--REDEF    3150--REDEF    3150--REDEF
B$ALT.ERR
      3150**DCL      3565>>ASSIGN
B$ALT.ERR.CODE
      3151**DCL      3520>>IF       3552>>IF
B$ALT.ERR.ERR#
      3151**DCL      3151--REDEF
B$ALT.EVID
      3150**DCL      3150--REDEF    3150--REDEF
B$JIT.CPFLAGS1.SLEAZE
       798**DCL       798--REDEF
B$JIT.ERR.MID
       705**DCL       705--REDEF
B$JIT.JRESPEAK
       866**DCL       867--REDEF
B$JIT.ORIGINATOR_PORT.FROM_CR
       975**DCL       975--REDEF     976--REDEF
B$JIT.PNR
       879**DCL       879--REDEF
B$JIT.TSLINE
       973**DCL       974--REDEF
B$JIT$
      3091**DCL       699--IMP-PTR
B$TCB.ALT$
      3145**DCL      3520>>IF       3552>>IF       3565>>ASSIGN
B$TCB$
      3092**DCL      3520>>IF       3552>>IF       3565>>ASSIGN
DEACTIVATE_ERR
      3520**LABEL    3514--CALLALT
PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:28   
FPT_DEACTIVATE
      3439**DCL      3514<>CALL     3546<>CALL
FPT_DEACTIVATE.V
      3440**DCL      3439--DCLINIT
FPT_DEACTIVATE.V.DVBYTE.REREAD#
      3442**DCL      3442--REDEF
FPT_RUE
      3463**DCL      3540<>CALL
FPT_RUE.V
      3463**DCL      3463--DCLINIT
FPT_RUE.V.USER#
      3463**DCL      3539<<ASSIGN
I
      3308**DCL      3510<<DOINDEX  3511>>ASSIGN
M$ACTIVATE
        98**DCL-ENT  3546--CALL
M$DEACTIVATE
        98**DCL-ENT  3514--CALL
M$RUE
       144**DCL-ENT  3540--CALL
MON_ERR
      3565**LABEL    3522--GOTO     3540--CALLALT  3554--GOTO
MSGBLK
      3313**DCL      3499<>CALL     3501<>CALL
MSGBLK.ERRINFO.ERR
      3391**DCL      3500<<ASSIGN
NEXT$
      3310**DCL      3528<<ASSIGN   3531<<ASSIGN   3531>>ASSIGN   3532>>IF       3539>>ASSIGN   3541>>ASSIGN
      3545>>ASSIGN   3547>>ASSIGN
P_NOW_FLAG
      3065**DCL         8--PROC     3537>>IF
QQC$BLDMSG
      3037**DCL-ENT  3501--CALL
QQC$BLDMSG_ERRBLK
      3038**DCL-ENT  3499--CALL
QQC$SCREECH
PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:29   
      3036**DCL-ENT  3566--CALL
QQC$TERMINATE
      3039**DCL-ENT  3507--CALL
QQ_GLOBAL.DS1$_BITS
      1425**DCL      1425--REDEF
QQ_GLOBAL.DS2$_BITS
      1425**DCL      1426--REDEF
QQ_GLOBAL.DS3$_BITS
      1426**DCL      1426--REDEF
QQ_GLOBAL.DS4$_BITS
      1426**DCL      1427--REDEF
QQ_GLOBAL.ERR
      1415**DCL      3497>>IF       3500>>ASSIGN   3502<<ASSIGN   3565<<ASSIGN
QQ_GLOBAL.INSTANCE_UP
      1417**DCL      3505>>IF
QQ_GLOBAL.SCHEDINT
      1420**DCL      3495<<ASSIGN
QQ_GLOBAL.STATION$
      1426**DCL      3511>>ASSIGN
QQ_GLOBAL.STATIONMAX
      1419**DCL      3493<<ASSIGN
QQ_GLOBAL.STATION_CNT
      1420**DCL      3510>>DOINDEX
QQ_GLOBAL.STRANGERMAX
      1419**DCL      3492<<ASSIGN
QQ_GLOBAL.TERMINATE
      1418**DCL      3491<<ASSIGN
QQ_GLOBAL.TPU$
      1427**DCL      3528>>ASSIGN
QQ_GLOBAL.TPUMAX
      1419**DCL      3494<<ASSIGN
RET
      3562**LABEL    3534--GOTO
S$
      3167**DCL      3169--IMP-PTR  3511<<ASSIGN   3513>>ASSIGN   3515>>ASSIGN
STATION
PL6.E3A0      #001=QQC$STOPTP File=QQC$STOPTP.:E05TSI                            WED 07/30/97 05:42 Page:30   
      3282**DCL      3439--DCLINIT  3513<<ASSIGN   3545<<ASSIGN
T$
      3229**DCL      3230--IMP-PTR
TP$STATION
      3169**DCL      3511--ASSIGN
TP$STATION.FLAGS.DISCONNECT
      3205**DCL      3515<<ASSIGN
TP$STATION.ID
      3170**DCL      3513>>ASSIGN
TPU$INFO.FLAGS.DISCONNECT
      3249**DCL      3541<<ASSIGN   3547<<ASSIGN
TPU$INFO.FLINK$
      3233**DCL      3531>>ASSIGN   3532>>IF
TPU$INFO.STATION
      3239**DCL      3545>>ASSIGN
TPU$INFO.SYSID
      3235**DCL      3539>>ASSIGN
