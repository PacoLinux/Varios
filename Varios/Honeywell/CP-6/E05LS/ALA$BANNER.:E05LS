VERSION E05

PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:1    
        1        1        /*M* ALA$BANNER - Move banner from user record to *S record */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*P*
        8        8             NAME: ALA$BANNER2_STAR_S
        9        9             PURPOSE:
       10       10                  To move the banner and registered name information into the *S file
       11       11                  when a user logs on or when ibex is told the LET BANNERRTEXT RESET
       12       12                  command.
       13       13             DESCRIPTION:
       14       14                  This routine will create the users registered name and store it in
       15       15                  the bannertext 0 position.  Currently the registered name is account
       16       16                  and uname, but in the future it will be the actual users name.  The
       17       17                  bannertext 1-9 fields are moved from the USERs record into the record
       18       18                  written to the *s file.  This record in *S is considered the
       19       19                  'session' bannertext while the text in the USERs record is the 'PERM'
       20       20                  bannertext.
       21       21        */
       22       22        ALA$BANNER2_STAR_S: PROC (USERS_REC$, DCB#, ERR_CODE) ALTRET;
       23       23        %INCLUDE AS_SUPER_C;
       24      458        %INCLUDE AS_SUBS_C;
       25     1872        %INCLUDE FS_BANNER_C;
       26     1913        %INCLUDE CP_6_SUBS;
       27     2453        %INCLUDE CP_6;
       28     8012        %B$TCB;
       29     8015        %B$ALT;
       30     8023
       31     8024    1   DCL B$TCB$ PTR SYMREF READONLY;
       32     8025
       33     8026    1   DCL ALA$READ_USERS ENTRY (2) ALTRET;
       34     8027    1   DCL ALA$WRITE_STAR ENTRY (5) ALTRET;
       35     8028    1   DCL ALA$BANNER0_ITEM ENTRY (2);
       36     8029
       37     8030    1   DCL DCB# UBIN;
PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:2    
       38     8031    1   DCL USERS_REC$ PTR;
       39     8032        %AS_USERS (STR_NAME=AS_USER, STCLASS="BASED (USERS_REC$)");
       40     8210
       41     8211    1   DCL 1 ERR_CODE ALIGNED,
       42     8212    1         2 FCG_MID UBIN(18) UNAL ,
       43     8213    1         2 CODE UBIN(15) UNAL ,
       44     8214    1         2 SEV UBIN(3) UNAL ;
       45     8215
       46     8216        %FS$BANNER (NAME=BANNER, STCLASS="BASED (PTR2REC$)");
       47     8238    1   DCL 1 BANNER_KEY,
       48     8239    1         2 CNT UBIN (9) UNAL,
       49     8240    1         2 TEXT CHAR (20) UNAL;
       50     8241
       51     8242    1   DCL RECORD CHAR (%BAN_REC_SZ) CALIGNED;
       52     8243
       53     8244    1   DCL PTR2REC$ PTR;
       54     8245    1   DCL TXT$ PTR;
       55     8246    1   DCL REC$ PTR;
       56     8247
       57     8248    1   DCL BANNERS BIT (1) ALIGNED;
       58     8249    1   DCL I UBIN;
       59     8250    1   DCL J UBIN;
       60     8251    1   DCL FIRST_OFF UBIN;
       61     8252    1   DCL LENTH UBIN;
       62     8253    1   DCL SIZE UBIN;
       63     8254
       64     8255    1         PTR2REC$ = ADDR (RECORD);
       65     8256    1         REC$ = PTR2REC$;
       66     8257    1         RECORD = ' ';
       67     8258
       68     8259    1         BANNER.PERM_BLOCK = AS_USER.PERM_BLOCK;
       69     8260
       70     8261           /*N* The 0 entry (I=0) in the BANNERTEXT record is supposed
       71     8262              to be the 'registered name' of this user from the mail
       72     8263              alias file.  When we have some sort of name server working
       73     8264              this feature should be implemented.
       74     8265           */
PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:3    
       75     8266    2         DO I=1 TO 9;
       76     8267    2             IF AS_USER.BANNER (I) ~= -1 THEN EXIT;
       77     8268    2             END;
       78     8269    1         BANNER.TEXT_OFF (0) = LENGTHC (BANNER);
       79     8270    1         REC$ = PINCRC (PTR2REC$, BANNER.TEXT_OFF (0));
       80     8271    1         CALL ALA$BANNER0_ITEM (REC$,LENTH);
       81     8272    1        BANNER.PERM (0) = '1'B; /* SET FIELD W/ REG NAME AS UNALTERABLE*/
       82     8273
       83     8274    1         IF I=10
       84     8275    2            THEN DO;
       85     8276    2              BANNERS = '0'B;   /* NO BANNERS EXIST */
       86     8277    2              FIRST_OFF = 0;
       87     8278    2              END;
       88     8279    2            ELSE DO;
       89     8280    2              BANNERS = '1'B;   /* SOME BANNERS EXIST */
       90     8281    2              FIRST_OFF = AS_USER.BANNER (I); /* OFFSET TO FIRST BANNER*/
       91     8282    2              END;
       92     8283
       93     8284    2         DO I = 1 TO 9;
       94     8285    2             IF AS_USER.BANNER (I) = -1
       95     8286    3             THEN DO;
       96     8287    3                 BANNER.TEXT_OFF (I) = -1;
       97     8288    3                 END;
       98     8289    3             ELSE DO;
       99     8290    3                 BANNER.TEXT_OFF (I) = AS_USER.BANNER(I) - FIRST_OFF + LENGTHC (BANNER)
              8290                          + LENTH;
      100     8291    3                 END;
      101     8292    2             END;
      102     8293
      103     8294    1         LENTH = LENTH + LENGTHC (BANNER); /* LENTH IS INDEX INTO RECORD */
      104     8295
      105     8296    1         IF BANNERS
      106     8297    2           THEN DO;
      107     8298    2              SIZE = AS_USER.SETUP_CHRA.SIZE - FIRST_OFF;
      108     8299    2              SUBSTR (RECORD,LENTH,SIZE) = SUBSTR (AS_USER.SETUP_CHRA.TXT,
      109     8300    2                      FIRST_OFF,SIZE);
      110     8301    2              LENTH = LENTH + SIZE;
PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:4    
      111     8302    2              END;
      112     8303
      113     8304    1         BANNER_KEY.CNT = 10;
      114     8305    1         BANNER_KEY.TEXT = 'BANNERTEXT';
      115     8306          /* LENTH is being used here to tell the ARS of this record. */
      116     8307    1         CALL ALA$WRITE_STAR (PTR2REC$, LENTH, BANNER_KEY, DCB#, ERR_CODE) ALTRET (
              8307                  A_ERR);
      117     8308
      118     8309    1         RETURN;
      119     8310    1   USER_READ_ERR: ;
      120     8311    1   A_ERR: ;
      121     8312    1         ERR_CODE = B$TCB$->B$TCB.ALT$->B$ALT.ERR ;
      122     8313    1         ALTRETURN;
      123     8314    1   END ALA$BANNER2_STAR_S;
      124     8315        %EOD;

PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:5    
--  Include file information  --

   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   FS_BANNER_C.:E05TOU  is referenced.
   AS_SUBS_C.:E05TOU  is referenced.
   AS_SUPER_C.:E05TOU  is referenced.
      No diagnostics issued in procedure ALA$BANNER2_STAR_S.

   Procedure ALA$BANNER2_STAR_S requires 160 words for executable code.
   Procedure ALA$BANNER2_STAR_S requires 286 words of local(AUTO) storage.

PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:6    

 Object Unit name= ALA$BANNER2_STAR_S                         File name= ALA$BANNER.:E05TOU
 UTS= JUL 29 '97 08:25:56.80 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1  RoData even  UTS      3      3  ALA$BANNER2_STAR_S
    2   Proc  even  none   160    240  ALA$BANNER2_STAR_S
    3  RoData even  none     1      1  ALA$BANNER2_STAR_S

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes    yes     yes      Std        3  ALA$BANNER2_STAR_S

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       2 ALA$BANNER0_ITEM
 yes     yes           Std       5 ALA$WRITE_STAR
                       nStd      0 X66_AUTO_3
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:7    

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                             r    B$TCB$                                B_VECTNIL
PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:8    


        1        1        /*M* ALA$BANNER - Move banner from user record to *S record */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*P*
        8        8             NAME: ALA$BANNER2_STAR_S
        9        9             PURPOSE:
       10       10                  To move the banner and registered name information into the *S file
       11       11                  when a user logs on or when ibex is told the LET BANNERRTEXT RESET
       12       12                  command.
       13       13             DESCRIPTION:
       14       14                  This routine will create the users registered name and store it in
       15       15                  the bannertext 0 position.  Currently the registered name is account
       16       16                  and uname, but in the future it will be the actual users name.  The
       17       17                  bannertext 1-9 fields are moved from the USERs record into the record
       18       18                  written to the *s file.  This record in *S is considered the
       19       19                  'session' bannertext while the text in the USERs record is the 'PERM'
       20       20                  bannertext.
       21       21        */
       22       22        ALA$BANNER2_STAR_S: PROC (USERS_REC$, DCB#, ERR_CODE) ALTRET;

     22  2 000000   000000 700200 xent  ALA$BANNER2* TSX0  ! X66_AUTO_3
         2 000001   000436 000003                    ZERO    286,3

       23       23        %INCLUDE AS_SUPER_C;
       24      458        %INCLUDE AS_SUBS_C;
       25     1872        %INCLUDE FS_BANNER_C;
       26     1913        %INCLUDE CP_6_SUBS;
       27     2453        %INCLUDE CP_6;
       28     8012        %B$TCB;
       29     8015        %B$ALT;
       30     8023
       31     8024    1   DCL B$TCB$ PTR SYMREF READONLY;
       32     8025
PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:9    
       33     8026    1   DCL ALA$READ_USERS ENTRY (2) ALTRET;
       34     8027    1   DCL ALA$WRITE_STAR ENTRY (5) ALTRET;
       35     8028    1   DCL ALA$BANNER0_ITEM ENTRY (2);
       36     8029
       37     8030    1   DCL DCB# UBIN;
       38     8031    1   DCL USERS_REC$ PTR;
       39     8032        %AS_USERS (STR_NAME=AS_USER, STCLASS="BASED (USERS_REC$)");
       40     8210
       41     8211    1   DCL 1 ERR_CODE ALIGNED,
       42     8212    1         2 FCG_MID UBIN(18) UNAL ,
       43     8213    1         2 CODE UBIN(15) UNAL ,
       44     8214    1         2 SEV UBIN(3) UNAL ;
       45     8215
       46     8216        %FS$BANNER (NAME=BANNER, STCLASS="BASED (PTR2REC$)");
       47     8238    1   DCL 1 BANNER_KEY,
       48     8239    1         2 CNT UBIN (9) UNAL,
       49     8240    1         2 TEXT CHAR (20) UNAL;
       50     8241
       51     8242    1   DCL RECORD CHAR (%BAN_REC_SZ) CALIGNED;
       52     8243
       53     8244    1   DCL PTR2REC$ PTR;
       54     8245    1   DCL TXT$ PTR;
       55     8246    1   DCL REC$ PTR;
       56     8247
       57     8248    1   DCL BANNERS BIT (1) ALIGNED;
       58     8249    1   DCL I UBIN;
       59     8250    1   DCL J UBIN;
       60     8251    1   DCL FIRST_OFF UBIN;
       61     8252    1   DCL LENTH UBIN;
       62     8253    1   DCL SIZE UBIN;
       63     8254
       64     8255    1         PTR2REC$ = ADDR (RECORD);

   8255  2 000002   200014 630500                    EPPR0   RECORD,,AUTO
         2 000003   200417 450500                    STP0    PTR2REC$,,AUTO

       65     8256    1         REC$ = PTR2REC$;
PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:10   

   8256  2 000004   200417 236100                    LDQ     PTR2REC$,,AUTO
         2 000005   200421 756100                    STQ     REC$,,AUTO

       66     8257    1         RECORD = ' ';

   8257  2 000006   040100 100400                    MLR     fill='040'O
         2 000007   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
         2 000010   200014 002014                    ADSC9   RECORD,,AUTO             cn=0,n=1036

       67     8258
       68     8259    1         BANNER.PERM_BLOCK = AS_USER.PERM_BLOCK;

   8259  2 000011   200003 471500                    LDP1    @USERS_REC$,,AUTO
         2 000012   100000 473500                    LDP3    0,,PR1
         2 000013   003100 060500                    CSL     bolr='003'O
         2 000014   300351 440012                    BDSC    233,,PR3                 by=2,bit=4,n=10
         2 000015   000000 000012                    BDSC    0,,PR0                   by=0,bit=0,n=10

       69     8260
       70     8261           /*N* The 0 entry (I=0) in the BANNERTEXT record is supposed
       71     8262              to be the 'registered name' of this user from the mail
       72     8263              alias file.  When we have some sort of name server working
       73     8264              this feature should be implemented.
       74     8265           */
       75     8266    2         DO I=1 TO 9;

   8266  2 000016   000001 235007                    LDA     1,DL
         2 000017   200423 755100                    STA     I,,AUTO

       76     8267    2             IF AS_USER.BANNER (I) ~= -1 THEN EXIT;

   8267  2 000020   200003 470500                    LDP0    @USERS_REC$,,AUTO
         2 000021   000000 471500                    LDP1    0,,PR0
         2 000022   200423 235100                    LDA     I,,AUTO
         2 000023   000001 735000                    ALS     1
         2 000024   000100 100505                    MLR     fill='000'O
PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:11   
         2 000025   100354 000002                    ADSC9   236,A,PR1                cn=0,n=2
         2 000026   200430 000004                    ADSC9   SIZE+1,,AUTO             cn=0,n=4
         2 000027   200430 236100                    LDQ     SIZE+1,,AUTO
         2 000030   000022 732000                    QRS     18
         2 000031   000027 116000 xsym               CMPQ    B_VECTNIL+23
         2 000032   000040 601000 2                  TNZ     s:8269

       77     8268    2             END;

   8268  2 000033   200423 236100                    LDQ     I,,AUTO
         2 000034   000001 036007                    ADLQ    1,DL
         2 000035   200423 756100                    STQ     I,,AUTO
         2 000036   000012 116007                    CMPQ    10,DL
         2 000037   000020 602000 2                  TNC     s:8267

       78     8269    1         BANNER.TEXT_OFF (0) = LENGTHC (BANNER);

   8269  2 000040   200417 471500                    LDP1    PTR2REC$,,AUTO
         2 000041   003100 061400                    CSR     bolr='003'O
         2 000042   000000 000044 3                  BDSC    0                        by=0,bit=0,n=36
         2 000043   100000 400022                    BDSC    0,,PR1                   by=2,bit=0,n=18

       79     8270    1         REC$ = PINCRC (PTR2REC$, BANNER.TEXT_OFF (0));

   8270  2 000044   200417 471500                    LDP1    PTR2REC$,,AUTO
         2 000045   003100 060500                    CSL     bolr='003'O
         2 000046   100000 400022                    BDSC    0,,PR1                   by=2,bit=0,n=18
         2 000047   200430 000044                    BDSC    SIZE+1,,AUTO             by=0,bit=0,n=36
         2 000050   200430 236100                    LDQ     SIZE+1,,AUTO
         2 000051   000022 732000                    QRS     18
         2 000052   000020 736000                    QLS     16
         2 000053   200417 036100                    ADLQ    PTR2REC$,,AUTO
         2 000054   200421 756100                    STQ     REC$,,AUTO

       80     8271    1         CALL ALA$BANNER0_ITEM (REC$,LENTH);

   8271  2 000055   200426 633500                    EPPR3   LENTH,,AUTO
PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:12   
         2 000056   200431 453500                    STP3    SIZE+2,,AUTO
         2 000057   200421 634500                    EPPR4   REC$,,AUTO
         2 000060   200430 454500                    STP4    SIZE+1,,AUTO
         2 000061   200430 630500                    EPPR0   SIZE+1,,AUTO
         2 000062   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000063   000000 701000 xent               TSX1    ALA$BANNER0_ITEM
         2 000064   000000 011000                    NOP     0

       81     8272    1        BANNER.PERM (0) = '1'B; /* SET FIELD W/ REG NAME AS UNALTERABLE*/

   8272  2 000065   200417 470500                    LDP0    PTR2REC$,,AUTO
         2 000066   003100 060400                    CSL     bolr='003'O
         2 000067   000030 000001 xsym               BDSC    B_VECTNIL+24             by=0,bit=0,n=1
         2 000070   000000 000001                    BDSC    0,,PR0                   by=0,bit=0,n=1

       82     8273
       83     8274    1         IF I=10

   8274  2 000071   200423 235100                    LDA     I,,AUTO
         2 000072   000012 115007                    CMPA    10,DL
         2 000073   000077 601000 2                  TNZ     s:8280

       84     8275    2            THEN DO;

       85     8276    2              BANNERS = '0'B;   /* NO BANNERS EXIST */

   8276  2 000074   200422 450100                    STZ     BANNERS,,AUTO

       86     8277    2              FIRST_OFF = 0;

   8277  2 000075   200425 450100                    STZ     FIRST_OFF,,AUTO

       87     8278    2              END;

   8278  2 000076   000112 710000 2                  TRA     s:8284

       88     8279    2            ELSE DO;
PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:13   

       89     8280    2              BANNERS = '1'B;   /* SOME BANNERS EXIST */

   8280  2 000077   400000 236003                    LDQ     -131072,DU
         2 000100   200422 756100                    STQ     BANNERS,,AUTO

       90     8281    2              FIRST_OFF = AS_USER.BANNER (I); /* OFFSET TO FIRST BANNER*/

   8281  2 000101   200003 470500                    LDP0    @USERS_REC$,,AUTO
         2 000102   000000 471500                    LDP1    0,,PR0
         2 000103   000001 735000                    ALS     1
         2 000104   000100 100505                    MLR     fill='000'O
         2 000105   100354 000002                    ADSC9   236,A,PR1                cn=0,n=2
         2 000106   200430 000004                    ADSC9   SIZE+1,,AUTO             cn=0,n=4
         2 000107   200430 236100                    LDQ     SIZE+1,,AUTO
         2 000110   000022 732000                    QRS     18
         2 000111   200425 756100                    STQ     FIRST_OFF,,AUTO

       91     8282    2              END;

       92     8283
       93     8284    2         DO I = 1 TO 9;

   8284  2 000112   000001 235007                    LDA     1,DL
         2 000113   200423 755100                    STA     I,,AUTO

       94     8285    2             IF AS_USER.BANNER (I) = -1

   8285  2 000114   200003 470500                    LDP0    @USERS_REC$,,AUTO
         2 000115   000000 471500                    LDP1    0,,PR0
         2 000116   200423 235100                    LDA     I,,AUTO
         2 000117   000001 735000                    ALS     1
         2 000120   000100 100505                    MLR     fill='000'O
         2 000121   100354 000002                    ADSC9   236,A,PR1                cn=0,n=2
         2 000122   200430 000004                    ADSC9   SIZE+1,,AUTO             cn=0,n=4
         2 000123   200430 236100                    LDQ     SIZE+1,,AUTO
         2 000124   000022 732000                    QRS     18
PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:14   
         2 000125   000027 116000 xsym               CMPQ    B_VECTNIL+23
         2 000126   000136 601000 2                  TNZ     s:8290

       95     8286    3             THEN DO;

       96     8287    3                 BANNER.TEXT_OFF (I) = -1;

   8287  2 000127   200423 236100                    LDQ     I,,AUTO
         2 000130   000022 402007                    MPY     18,DL
         2 000131   200417 471500                    LDP1    PTR2REC$,,AUTO
         2 000132   003106 061400                    CSR     bolr='003'O
         2 000133   000027 000044 xsym               BDSC    B_VECTNIL+23             by=0,bit=0,n=36
         2 000134   100000 400022                    BDSC    0,Q,PR1                  by=2,bit=0,n=18

       97     8288    3                 END;

   8288  2 000135   000156 710000 2                  TRA     s:8292

       98     8289    3             ELSE DO;

       99     8290    3                BANNER.TEXT_OFF (I) = AS_USER.BANNER(I) - FIRST_OFF + LENGTHC (BANNER)
              8290                          + LENTH;

   8290  2 000136   000000 471500                    LDP1    0,,PR0
         2 000137   000100 100505                    MLR     fill='000'O
         2 000140   100354 000002                    ADSC9   236,A,PR1                cn=0,n=2
         2 000141   200430 000004                    ADSC9   SIZE+1,,AUTO             cn=0,n=4
         2 000142   200430 236100                    LDQ     SIZE+1,,AUTO
         2 000143   000022 732000                    QRS     18
         2 000144   200425 136100                    SBLQ    FIRST_OFF,,AUTO
         2 000145   200426 036100                    ADLQ    LENTH,,AUTO
         2 000146   000026 036007                    ADLQ    22,DL
         2 000147   200431 756100                    STQ     SIZE+2,,AUTO
         2 000150   200423 236100                    LDQ     I,,AUTO
         2 000151   000022 402007                    MPY     18,DL
         2 000152   200417 471500                    LDP1    PTR2REC$,,AUTO
         2 000153   003106 061500                    CSR     bolr='003'O
PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:15   
         2 000154   200431 000044                    BDSC    SIZE+2,,AUTO             by=0,bit=0,n=36
         2 000155   100000 400022                    BDSC    0,Q,PR1                  by=2,bit=0,n=18

      100     8291    3                 END;

      101     8292    2             END;

   8292  2 000156   200423 235100                    LDA     I,,AUTO
         2 000157   000001 035007                    ADLA    1,DL
         2 000160   200423 755100                    STA     I,,AUTO
         2 000161   000012 115007                    CMPA    10,DL
         2 000162   000114 602000 2                  TNC     s:8285

      102     8293
      103     8294    1         LENTH = LENTH + LENGTHC (BANNER); /* LENTH IS INDEX INTO RECORD */

   8294  2 000163   200426 236100                    LDQ     LENTH,,AUTO
         2 000164   000026 036007                    ADLQ    22,DL
         2 000165   200426 756100                    STQ     LENTH,,AUTO

      104     8295
      105     8296    1         IF BANNERS

   8296  2 000166   200422 234100                    SZN     BANNERS,,AUTO
         2 000167   000206 605000 2                  TPL     s:8304

      106     8297    2           THEN DO;

      107     8298    2              SIZE = AS_USER.SETUP_CHRA.SIZE - FIRST_OFF;

   8298  2 000170   000000 471500                    LDP1    0,,PR0
         2 000171   100361 236100                    LDQ     241,,PR1
         2 000172   200425 136100                    SBLQ    FIRST_OFF,,AUTO
         2 000173   200427 756100                    STQ     SIZE,,AUTO

      108     8299    2              SUBSTR (RECORD,LENTH,SIZE) = SUBSTR (AS_USER.SETUP_CHRA.TXT,

PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:16   
   8299  2 000174   000000 620006                    EAX0    0,QL
         2 000175   200425 236100                    LDQ     FIRST_OFF,,AUTO
         2 000176   200427 721100                    LXL1    SIZE,,AUTO
         2 000177   200426 235100                    LDA     LENTH,,AUTO
         2 000200   040145 100546                    MLR     fill='040'O
         2 000201   100362 000010                    ADSC9   242,Q,PR1                cn=0,n=*X0
         2 000202   200014 000011                    ADSC9   RECORD,A,AUTO            cn=0,n=*X1

      109     8300    2                      FIRST_OFF,SIZE);
      110     8301    2              LENTH = LENTH + SIZE;

   8301  2 000203   200426 236100                    LDQ     LENTH,,AUTO
         2 000204   200427 036100                    ADLQ    SIZE,,AUTO
         2 000205   200426 756100                    STQ     LENTH,,AUTO

      111     8302    2              END;

      112     8303
      113     8304    1         BANNER_KEY.CNT = 10;

   8304  2 000206   012000 236003                    LDQ     5120,DU
         2 000207   200006 552140                    STBQ    BANNER_KEY,'40'O,AUTO

      114     8305    1         BANNER_KEY.TEXT = 'BANNERTEXT';

   8305  2 000210   040100 100400                    MLR     fill='040'O
         2 000211   000000 000012 1                  ADSC9   0                        cn=0,n=10
         2 000212   200006 200024                    ADSC9   BANNER_KEY,,AUTO         cn=1,n=20

      115     8306          /* LENTH is being used here to tell the ARS of this record. */
      116     8307    1         CALL ALA$WRITE_STAR (PTR2REC$, LENTH, BANNER_KEY, DCB#, ERR_CODE) ALTRET (
              8307                  A_ERR);

   8307  2 000213   200005 236100                    LDQ     @ERR_CODE,,AUTO
         2 000214   200434 756100                    STQ     SIZE+5,,AUTO
         2 000215   200004 236100                    LDQ     @DCB#,,AUTO
         2 000216   200433 756100                    STQ     SIZE+4,,AUTO
PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:17   
         2 000217   200006 631500                    EPPR1   BANNER_KEY,,AUTO
         2 000220   200432 451500                    STP1    SIZE+3,,AUTO
         2 000221   200426 633500                    EPPR3   LENTH,,AUTO
         2 000222   200431 453500                    STP3    SIZE+2,,AUTO
         2 000223   200417 634500                    EPPR4   PTR2REC$,,AUTO
         2 000224   200430 454500                    STP4    SIZE+1,,AUTO
         2 000225   200430 630500                    EPPR0   SIZE+1,,AUTO
         2 000226   000023 631400 xsym               EPPR1   B_VECTNIL+19
         2 000227   000000 701000 xent               TSX1    ALA$WRITE_STAR
         2 000230   000232 702000 2                  TSX2    USER_READ_ERR

      117     8308
      118     8309    1         RETURN;

   8309  2 000231   000000 702200 xent               TSX2  ! X66_ARET

   8305  2 000232                       USER_READ_E* null
   8305  2 000232                       A_ERR        null
      119     8310    1   USER_READ_ERR: ;
      120     8311    1   A_ERR: ;
      121     8312    1         ERR_CODE = B$TCB$->B$TCB.ALT$->B$ALT.ERR ;

   8312  2 000232   000000 470400 xsym               LDP0    B$TCB$
         2 000233   000000 471500                    LDP1    0,,PR0
         2 000234   100102 236100                    LDQ     66,,PR1
         2 000235   200005 473500                    LDP3    @ERR_CODE,,AUTO
         2 000236   300000 756100                    STQ     0,,PR3

      122     8313    1         ALTRETURN;

   8313  2 000237   000000 702200 xent               TSX2  ! X66_AALT
      123     8314    1   END ALA$BANNER2_STAR_S;
      124     8315        %EOD;

PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:18   
--  Include file information  --

   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   FS_BANNER_C.:E05TOU  is referenced.
   AS_SUBS_C.:E05TOU  is referenced.
   AS_SUPER_C.:E05TOU  is referenced.
      No diagnostics issued in procedure ALA$BANNER2_STAR_S.
PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:19   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @DCB#                      5-0-0/w PTR         r     1 @ERR_CODE
     3-0-0/w PTR         r     1 @USERS_REC$              422-0-0/w BIT         r     1 BANNERS
     6-0-0/c STRC(189)   r     1 BANNER_KEY                *0-0-0/w UBIN        r     1 DCB#
    *0-0-0/w STRC        r     1 ERR_CODE                 425-0-0/w UBIN        r     1 FIRST_OFF
   423-0-0/w UBIN        r     1 I                        426-0-0/w UBIN        r     1 LENTH
   417-0-0/w PTR         r     1 PTR2REC$                 421-0-0/w PTR         r     1 REC$
    14-0-0/c CHAR(1036)  r     1 RECORD                   427-0-0/w UBIN        r     1 SIZE
    *0-0-0/w PTR         r     1 USERS_REC$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$TCB$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(18576) r     1 AS_USER                    0-0-0/w STRC(2448)  r     1 B$ALT
     0-0-0/w STRC(144)   r     1 B$TCB                      0-0-0/b STRC(198)   r     1 BANNER
     0-0-0/c ASTR(9)     r     1 TEXT


   Procedure ALA$BANNER2_STAR_S requires 160 words for executable code.
   Procedure ALA$BANNER2_STAR_S requires 286 words of local(AUTO) storage.
PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:20   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:21   
          MINI XREF LISTING

ALA$BANNER0_ITEM
      8028**DCL-ENT  8271--CALL
ALA$WRITE_STAR
      8027**DCL-ENT  8307--CALL
AS_USER.BANNER
      8173**DCL      8267>>IF       8281>>ASSIGN   8285>>IF       8290>>ASSIGN
AS_USER.BANNER_PERM
      8160**DCL      8161--REDEF
AS_USER.BUDGET.MACCT
      8065**DCL      8069--REDEF
AS_USER.BUDGET.MAX_PROJECTS
      8078**DCL      8081--REDEF
AS_USER.BUDGET.PACCUM
      8061**DCL      8063--REDEF
AS_USER.BUDGET.PMAXC
      8056**DCL      8058--REDEF
AS_USER.PERM_BLOCK
      8161**DCL      8259>>ASSIGN
AS_USER.SETUP_CHRA.SIZE
      8175**DCL      8298>>ASSIGN
AS_USER.SETUP_CHRA.TXT
      8176**DCL      8177--REDEF    8178--REDEF    8299>>ASSIGN
A_ERR
      8305**LABEL    8307--CALLALT
B$ALT.CODE
      8017**DCL      8017--REDEF    8018--REDEF    8018--REDEF
B$ALT.ERR
      8018**DCL      8312>>ASSIGN
B$ALT.ERR.ERR#
      8019**DCL      8019--REDEF
B$ALT.EVID
      8018**DCL      8018--REDEF    8018--REDEF
PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:22   
B$TCB.ALT$
      8013**DCL      8312>>ASSIGN
B$TCB$
      8024**DCL      8312>>ASSIGN
BANNER
      8227**DCL      8269--ASSIGN   8290--ASSIGN   8294--ASSIGN
BANNER.PERM
      8228**DCL      8229--REDEF    8272<<ASSIGN
BANNER.PERM_BLOCK
      8229**DCL      8259<<ASSIGN
BANNER.TEXT_OFF
      8231**DCL      8269<<ASSIGN   8270>>ASSIGN   8287<<ASSIGN   8290<<ASSIGN
BANNERS
      8248**DCL      8276<<ASSIGN   8280<<ASSIGN   8296>>IF
BANNER_KEY
      8238**DCL      8307<>CALL
BANNER_KEY.CNT
      8239**DCL      8304<<ASSIGN
BANNER_KEY.TEXT
      8240**DCL      8305<<ASSIGN
DCB#
      8030**DCL        22--PROC     8307<>CALL
ERR_CODE
      8211**DCL        22--PROC     8307<>CALL     8312<<ASSIGN
FIRST_OFF
      8251**DCL      8277<<ASSIGN   8281<<ASSIGN   8290>>ASSIGN   8298>>ASSIGN   8299>>ASSIGN
I
      8249**DCL      8266<<DOINDEX  8267>>IF       8274>>IF       8281>>ASSIGN   8284<<DOINDEX  8285>>IF
      8287>>ASSIGN   8290>>ASSIGN   8290>>ASSIGN
LENTH
      8252**DCL      8271<>CALL     8290>>ASSIGN   8294<<ASSIGN   8294>>ASSIGN   8299>>ASSIGN   8301<<ASSIGN
      8301>>ASSIGN   8307<>CALL
PTR2REC$
      8244**DCL      8227--IMP-PTR  8255<<ASSIGN   8256>>ASSIGN   8259>>ASSIGN   8269>>ASSIGN   8270>>ASSIGN
      8270>>ASSIGN   8272>>ASSIGN   8287>>ASSIGN   8290>>ASSIGN   8307<>CALL
REC$
PL6.E3A0      #001=ALA$BANNER2_STAR_S File=ALA$BANNER.:E05TSI                    TUE 07/29/97 08:25 Page:23   
      8246**DCL      8256<<ASSIGN   8270<<ASSIGN   8271<>CALL
RECORD
      8242**DCL      8255--ASSIGN   8257<<ASSIGN   8299<<ASSIGN
SIZE
      8253**DCL      8298<<ASSIGN   8299>>ASSIGN   8299>>ASSIGN   8301>>ASSIGN
TEXT.LENGTH_
      8235**DCL      8236--IMP-SIZ
USERS_REC$
      8031**DCL        22--PROC     8045--IMP-PTR  8259>>ASSIGN   8267>>IF       8281>>ASSIGN   8285>>IF
      8290>>ASSIGN   8298>>ASSIGN   8299>>ASSIGN

PL6.E3A0      #002=ALA$BANNER0_ITEM File=ALA$BANNER.:E05TSI                      TUE 07/29/97 08:26 Page:24   
      125        1        /*T***********************************************************/
      126        2        /*T*                                                         */
      127        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      128        4        /*T*                                                         */
      129        5        /*T***********************************************************/
      130        6        ALA$BANNER0_ITEM: PROC (PTR2TXT$,LENTH);
      131        7    1   DCL PTR2TXT$ PTR;
      132        8    1   DCL 1 TEXT BASED (PTR2TXT$) UNAL,
      133        9    1         2 LEN_ UBIN BYTE UNAL,
      134       10    1         2 VAL CHAR (TEXT.LEN_) UNAL;
      135       11        %INCLUDE B$JIT_C;
      136      325        %B$JIT0;
      137      414        %U$JIT1;
      138      488        %A$JIT6X;
      139      491
      140      492    1   DCL LENTH UBIN;
      141      493    1   DCL B$JIT$ PTR SYMREF READONLY;
      142      494
      143      495    1         TEXT.LEN_ = LENGTHC (B$JIT.ACCN);
      144      496    1         CALL INSERT (TEXT.VAL,0,TEXT.LEN_, B$JIT$->B$JIT.ACCN);
      145      497    1         CALL INSERT (TEXT.VAL,TEXT.LEN_,1, ',');
      146      498    1         TEXT.LEN_ = TEXT.LEN_ + 1;
      147      499    1         LENTH = LENGTHC (B$JIT.UNAME);
      148      500    1         CALL INSERT (TEXT.VAL, TEXT.LEN_, LENTH, B$JIT$->B$JIT.UNAME);
      149      501    1         TEXT.LEN_ = TEXT.LEN_ + LENTH;
      150      502    1         LENTH = TEXT.LEN_ + 1;
      151      503
      152      504    1         RETURN;
      153      505    1   END ALA$BANNER0_ITEM;
      154      506        %EOD ;

PL6.E3A0      #002=ALA$BANNER0_ITEM File=ALA$BANNER.:E05TSI                      TUE 07/29/97 08:26 Page:25   
--  Include file information  --

   B$JIT_C.:E05TOU  is referenced.
      No diagnostics issued in procedure ALA$BANNER0_ITEM.

   Procedure ALA$BANNER0_ITEM requires 79 words for executable code.
   Procedure ALA$BANNER0_ITEM requires 8 words of local(AUTO) storage.

PL6.E3A0      #002=ALA$BANNER0_ITEM File=ALA$BANNER.:E05TSI                      TUE 07/29/97 08:26 Page:26   

 Object Unit name= ALA$BANNER0_ITEM                           File name= ALA$BANNER.:E05TOU
 UTS= JUL 29 '97 08:26:47.44 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none    79    117  ALA$BANNER0_ITEM
    1  RoData even  none     1      1  ALA$BANNER0_ITEM

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes      Std        2  ALA$BANNER0_ITEM

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_2
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    B$JIT$                                B_VECTNIL
PL6.E3A0      #002=ALA$BANNER0_ITEM File=ALA$BANNER.:E05TSI                      TUE 07/29/97 08:26 Page:27   


      125        1        /*T***********************************************************/
      126        2        /*T*                                                         */
      127        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      128        4        /*T*                                                         */
      129        5        /*T***********************************************************/
      130        6        ALA$BANNER0_ITEM: PROC (PTR2TXT$,LENTH);

      6  0 000000   000000 700200 xent  ALA$BANNER0* TSX0  ! X66_AUTO_2
         0 000001   000010 000002                    ZERO    8,2

      131        7    1   DCL PTR2TXT$ PTR;
      132        8    1   DCL 1 TEXT BASED (PTR2TXT$) UNAL,
      133        9    1         2 LEN_ UBIN BYTE UNAL,
      134       10    1         2 VAL CHAR (TEXT.LEN_) UNAL;
      135       11        %INCLUDE B$JIT_C;
      136      325        %B$JIT0;
      137      414        %U$JIT1;
      138      488        %A$JIT6X;
      139      491
      140      492    1   DCL LENTH UBIN;
      141      493    1   DCL B$JIT$ PTR SYMREF READONLY;
      142      494
      143      495    1         TEXT.LEN_ = LENGTHC (B$JIT.ACCN);

    495  0 000002   200003 470500                    LDP0    @PTR2TXT$,,AUTO
         0 000003   000000 471500                    LDP1    0,,PR0
         0 000004   000100 101400                    MRL     fill='000'O
         0 000005   000012 000004 xsym               ADSC9   B_VECTNIL+10             cn=0,n=4
         0 000006   100000 000001                    ADSC9   0,,PR1                   cn=0,n=1

      144      496    1         CALL INSERT (TEXT.VAL,0,TEXT.LEN_, B$JIT$->B$JIT.ACCN);

    496  0 000007   000000 471500                    LDP1    0,,PR0
         0 000010   000100 101500                    MRL     fill='000'O
         0 000011   100000 000001                    ADSC9   0,,PR1                   cn=0,n=1
         0 000012   200006 000002                    ADSC9   @LENTH+2,,AUTO           cn=0,n=2
PL6.E3A0      #002=ALA$BANNER0_ITEM File=ALA$BANNER.:E05TSI                      TUE 07/29/97 08:26 Page:28   
         0 000013   200006 220100                    LDX0    @LENTH+2,,AUTO
         0 000014   000000 473500                    LDP3    0,,PR0
         0 000015   000100 101500                    MRL     fill='000'O
         0 000016   300000 000001                    ADSC9   0,,PR3                   cn=0,n=1
         0 000017   200007 000002                    ADSC9   @LENTH+3,,AUTO           cn=0,n=2
         0 000020   200007 221100                    LDX1    @LENTH+3,,AUTO
         0 000021   000000 473400 xsym               LDP3    B$JIT$
         0 000022   040140 100500                    MLR     fill='040'O
         0 000023   300001 000010                    ADSC9   1,,PR3                   cn=0,n=8
         0 000024   100000 200011                    ADSC9   0,,PR1                   cn=1,n=*X1

      145      497    1         CALL INSERT (TEXT.VAL,TEXT.LEN_,1, ',');

    497  0 000025   000000 471500                    LDP1    0,,PR0
         0 000026   000100 101500                    MRL     fill='000'O
         0 000027   100000 000001                    ADSC9   0,,PR1                   cn=0,n=1
         0 000030   200006 000002                    ADSC9   @LENTH+2,,AUTO           cn=0,n=2
         0 000031   200006 220100                    LDX0    @LENTH+2,,AUTO
         0 000032   000000 474500                    LDP4    0,,PR0
         0 000033   000100 101500                    MRL     fill='000'O
         0 000034   400000 000001                    ADSC9   0,,PR4                   cn=0,n=1
         0 000035   200007 000004                    ADSC9   @LENTH+3,,AUTO           cn=0,n=4
         0 000036   200007 236100                    LDQ     @LENTH+3,,AUTO
         0 000037   040106 100400                    MLR     fill='040'O
         0 000040   000000 000001 1                  ADSC9   0                        cn=0,n=1
         0 000041   100000 200001                    ADSC9   0,Q,PR1                  cn=1,n=1

      146      498    1         TEXT.LEN_ = TEXT.LEN_ + 1;

    498  0 000042   000000 471500                    LDP1    0,,PR0
         0 000043   000100 101500                    MRL     fill='000'O
         0 000044   100000 000001                    ADSC9   0,,PR1                   cn=0,n=1
         0 000045   200007 000004                    ADSC9   @LENTH+3,,AUTO           cn=0,n=4
         0 000046   200007 236100                    LDQ     @LENTH+3,,AUTO
         0 000047   000001 036007                    ADLQ    1,DL
         0 000050   200006 756100                    STQ     @LENTH+2,,AUTO
         0 000051   000100 101500                    MRL     fill='000'O
PL6.E3A0      #002=ALA$BANNER0_ITEM File=ALA$BANNER.:E05TSI                      TUE 07/29/97 08:26 Page:29   
         0 000052   200006 000004                    ADSC9   @LENTH+2,,AUTO           cn=0,n=4
         0 000053   100000 000001                    ADSC9   0,,PR1                   cn=0,n=1

      147      499    1         LENTH = LENGTHC (B$JIT.UNAME);

    499  0 000054   000014 235007                    LDA     12,DL
         0 000055   200004 471500                    LDP1    @LENTH,,AUTO
         0 000056   100000 755100                    STA     0,,PR1

      148      500    1         CALL INSERT (TEXT.VAL, TEXT.LEN_, LENTH, B$JIT$->B$JIT.UNAME);

    500  0 000057   000000 474500                    LDP4    0,,PR0
         0 000060   000100 101500                    MRL     fill='000'O
         0 000061   400000 000001                    ADSC9   0,,PR4                   cn=0,n=1
         0 000062   200006 000002                    ADSC9   @LENTH+2,,AUTO           cn=0,n=2
         0 000063   200006 220100                    LDX0    @LENTH+2,,AUTO
         0 000064   000000 475500                    LDP5    0,,PR0
         0 000065   000100 101500                    MRL     fill='000'O
         0 000066   500000 000001                    ADSC9   0,,PR5                   cn=0,n=1
         0 000067   200007 000004                    ADSC9   @LENTH+3,,AUTO           cn=0,n=4
         0 000070   200007 236100                    LDQ     @LENTH+3,,AUTO
         0 000071   100000 721100                    LXL1    0,,PR1
         0 000072   040146 100500                    MLR     fill='040'O
         0 000073   300003 000014                    ADSC9   3,,PR3                   cn=0,n=12
         0 000074   400000 200011                    ADSC9   0,Q,PR4                  cn=1,n=*X1

      149      501    1         TEXT.LEN_ = TEXT.LEN_ + LENTH;

    501  0 000075   000000 474500                    LDP4    0,,PR0
         0 000076   000100 101500                    MRL     fill='000'O
         0 000077   400000 000001                    ADSC9   0,,PR4                   cn=0,n=1
         0 000100   200006 000004                    ADSC9   @LENTH+2,,AUTO           cn=0,n=4
         0 000101   200006 236100                    LDQ     @LENTH+2,,AUTO
         0 000102   100000 036100                    ADLQ    0,,PR1
         0 000103   200007 756100                    STQ     @LENTH+3,,AUTO
         0 000104   000100 101500                    MRL     fill='000'O
         0 000105   200007 000004                    ADSC9   @LENTH+3,,AUTO           cn=0,n=4
PL6.E3A0      #002=ALA$BANNER0_ITEM File=ALA$BANNER.:E05TSI                      TUE 07/29/97 08:26 Page:30   
         0 000106   400000 000001                    ADSC9   0,,PR4                   cn=0,n=1

      150      502    1         LENTH = TEXT.LEN_ + 1;

    502  0 000107   000000 474500                    LDP4    0,,PR0
         0 000110   000100 101500                    MRL     fill='000'O
         0 000111   400000 000001                    ADSC9   0,,PR4                   cn=0,n=1
         0 000112   200006 000004                    ADSC9   @LENTH+2,,AUTO           cn=0,n=4
         0 000113   200006 236100                    LDQ     @LENTH+2,,AUTO
         0 000114   000001 036007                    ADLQ    1,DL
         0 000115   100000 756100                    STQ     0,,PR1

      151      503
      152      504    1         RETURN;

    504  0 000116   000000 702200 xent               TSX2  ! X66_ARET
      153      505    1   END ALA$BANNER0_ITEM;
      154      506        %EOD ;

PL6.E3A0      #002=ALA$BANNER0_ITEM File=ALA$BANNER.:E05TSI                      TUE 07/29/97 08:26 Page:31   
--  Include file information  --

   B$JIT_C.:E05TOU  is referenced.
      No diagnostics issued in procedure ALA$BANNER0_ITEM.
PL6.E3A0      #002=ALA$BANNER0_ITEM File=ALA$BANNER.:E05TSI                      TUE 07/29/97 08:26 Page:32   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @LENTH                     3-0-0/w PTR         r     1 @PTR2TXT$
    *0-0-0/w UBIN        r     1 LENTH                     *0-0-0/w PTR         r     1 PTR2TXT$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$JIT$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(5760)  r     1 B$JIT                      0-0-0/c ASTR(9)     r     1 TEXT


   Procedure ALA$BANNER0_ITEM requires 79 words for executable code.
   Procedure ALA$BANNER0_ITEM requires 8 words of local(AUTO) storage.
PL6.E3A0      #002=ALA$BANNER0_ITEM File=ALA$BANNER.:E05TSI                      TUE 07/29/97 08:26 Page:33   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=ALA$BANNER0_ITEM File=ALA$BANNER.:E05TSI                      TUE 07/29/97 08:26 Page:34   
          MINI XREF LISTING

B$JIT.ACCN
       331**DCL       495--ASSIGN    496>>CALLBLT
B$JIT.CPFLAGS1.SLEAZE
       425**DCL       425--REDEF
B$JIT.ERR.MID
       332**DCL       332--REDEF
B$JIT.UNAME
       331**DCL       499--ASSIGN    500>>CALLBLT
B$JIT$
       493**DCL       326--IMP-PTR   496>>CALLBLT   500>>CALLBLT
LENTH
       492**DCL         6--PROC      499<<ASSIGN    500>>CALLBLT   501>>ASSIGN    502<<ASSIGN
PTR2TXT$
         7**DCL         6--PROC        8--IMP-PTR   495>>ASSIGN    496>>CALLBLT   496>>CALLBLT   496>>CALLBLT
       497>>CALLBLT   497>>CALLBLT   497>>CALLBLT   498>>ASSIGN    498>>ASSIGN    500>>CALLBLT   500>>CALLBLT
       500>>CALLBLT   501>>ASSIGN    501>>ASSIGN    502>>ASSIGN
TEXT.LEN_
         9**DCL        10--IMP-SIZ   495<<ASSIGN    496>>CALLBLT   496>>CALLBLT   497>>CALLBLT   497>>CALLBLT
       498<<ASSIGN    498>>ASSIGN    500>>CALLBLT   500>>CALLBLT   501<<ASSIGN    501>>ASSIGN    502>>ASSIGN
TEXT.VAL
        10**DCL       496<<CALLBLT   497<<CALLBLT   500<<CALLBLT

PL6.E3A0      #003=ALA$WRITE_STAR File=ALA$BANNER.:E05TSI                        TUE 07/29/97 08:26 Page:35   
      155        1        /*T***********************************************************/
      156        2        /*T*                                                         */
      157        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      158        4        /*T*                                                         */
      159        5        /*T***********************************************************/
      160        6        ALA$WRITE_STAR: PROC( BUF$, ARS, KEY, DCB#, ERR_CODE ) ALTRET ;
      161        7
      162        8    1   DCL DCB# UBIN;
      163        9    1   DCL BUF$ PTR ;
      164       10    1   DCL ARS UBIN WORD ;
      165       11    1   DCL 1 KEY ,
      166       12    1         2 CNT UBIN BYTE UNAL ,
      167       13    1         2 TXT CHAR(20) UNAL ;
      168       14    1   DCL 1 ERR_CODE ALIGNED ,
      169       15    1         2 FCG_MID UBIN(18) UNAL ,
      170       16    1         2 CODE UBIN(15) UNAL ,
      171       17    1         2 SEV UBIN(3) UNAL ;
      172       18
      173       19        %INCLUDE CP_6 ;
      174     5578        %INCLUDE CP_6_SUBS ;
      175     6118        %B$TCB;
      176     6121        %B$ALT;
      177     6129    1   DCL B$TCB$ PTR SYMREF;
      178     6130
      179     6131        %FPT_WRITE( FPTN = WRITE_FPT ,
      180     6132                    STCLASS = CONSTANT ,
      181     6133                    ONEWKEY = YES ) ;
      182     6164        %FPT_WRITE( FPTN = WRITE$FPT ,
      183     6165                    STCLASS="") ;
      184     6196
      185     6197
      186     6198    1   WRITE$FPT = WRITE_FPT ;
      187     6199    1   WRITE$FPT.BUF_.BUF$ = BUF$ ;
      188     6200    1   WRITE$FPT.BUF_.BOUND = ARS - 1  ;
      189     6201    1   WRITE$FPT.V.DCB# = DCB# ;
      190     6202    1   WRITE$FPT.KEY_ = VECTOR( KEY ) ;
      191     6203    1   WRITE$FPT.V_ = VECTOR( WRITE$FPT.V ) ;
PL6.E3A0      #003=ALA$WRITE_STAR File=ALA$BANNER.:E05TSI                        TUE 07/29/97 08:26 Page:36   
      192     6204    1   CALL M$WRITE( WRITE$FPT ) ALTRET( WRITE_ERR ) ;
      193     6205    1   RETURN ;
      194     6206
      195     6207    1   WRITE_ERR: ;
      196     6208    1         ERR_CODE = B$TCB$->B$TCB.ALT$->B$ALT.ERR;
      197     6209    1         ALTRETURN ;
      198     6210
      199     6211    1   END   ALA$WRITE_STAR ;
      200     6212

PL6.E3A0      #003=ALA$WRITE_STAR File=ALA$BANNER.:E05TSI                        TUE 07/29/97 08:26 Page:37   
--  Include file information  --

   CP_6_SUBS.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure ALA$WRITE_STAR.

   Procedure ALA$WRITE_STAR requires 37 words for executable code.
   Procedure ALA$WRITE_STAR requires 22 words of local(AUTO) storage.

    No errors detected in file ALA$BANNER.:E05TSI    .

PL6.E3A0      #003=ALA$WRITE_STAR File=ALA$BANNER.:E05TSI                        TUE 07/29/97 08:26 Page:38   

 Object Unit name= ALA$WRITE_STAR                             File name= ALA$BANNER.:E05TOU
 UTS= JUL 29 '97 08:26:56.04 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1  RoData even  UTS     12     14  ALA$WRITE_STAR
    2   Proc  even  none    37     45  ALA$WRITE_STAR
    3  RoData even  none     2      2  ALA$WRITE_STAR

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes    yes     yes      Std        5  ALA$WRITE_STAR

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_5
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  B$TCB$                                B_VECTNIL
PL6.E3A0      #003=ALA$WRITE_STAR File=ALA$BANNER.:E05TSI                        TUE 07/29/97 08:26 Page:39   

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #003=ALA$WRITE_STAR File=ALA$BANNER.:E05TSI                        TUE 07/29/97 08:26 Page:40   


      155        1        /*T***********************************************************/
      156        2        /*T*                                                         */
      157        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      158        4        /*T*                                                         */
      159        5        /*T***********************************************************/
      160        6        ALA$WRITE_STAR: PROC( BUF$, ARS, KEY, DCB#, ERR_CODE ) ALTRET ;

      6  2 000000   000000 700200 xent  ALA$WRITE_S* TSX0  ! X66_AUTO_5
         2 000001   000026 000005                    ZERO    22,5

      161        7
      162        8    1   DCL DCB# UBIN;
      163        9    1   DCL BUF$ PTR ;
      164       10    1   DCL ARS UBIN WORD ;
      165       11    1   DCL 1 KEY ,
      166       12    1         2 CNT UBIN BYTE UNAL ,
      167       13    1         2 TXT CHAR(20) UNAL ;
      168       14    1   DCL 1 ERR_CODE ALIGNED ,
      169       15    1         2 FCG_MID UBIN(18) UNAL ,
      170       16    1         2 CODE UBIN(15) UNAL ,
      171       17    1         2 SEV UBIN(3) UNAL ;
      172       18
      173       19        %INCLUDE CP_6 ;
      174     5578        %INCLUDE CP_6_SUBS ;
      175     6118        %B$TCB;
      176     6121        %B$ALT;
      177     6129    1   DCL B$TCB$ PTR SYMREF;
      178     6130
      179     6131        %FPT_WRITE( FPTN = WRITE_FPT ,
      180     6132                    STCLASS = CONSTANT ,
      181     6133                    ONEWKEY = YES ) ;
      182     6164        %FPT_WRITE( FPTN = WRITE$FPT ,
      183     6165                    STCLASS="") ;
      184     6196
      185     6197
      186     6198    1   WRITE$FPT = WRITE_FPT ;
PL6.E3A0      #003=ALA$WRITE_STAR File=ALA$BANNER.:E05TSI                        TUE 07/29/97 08:26 Page:41   

   6198  2 000002   000100 100400                    MLR     fill='000'O
         2 000003   000000 000060 1                  ADSC9   WRITE_FPT                cn=0,n=48
         2 000004   200010 000060                    ADSC9   WRITE$FPT,,AUTO          cn=0,n=48

      187     6199    1   WRITE$FPT.BUF_.BUF$ = BUF$ ;

   6199  2 000005   200003 470500                    LDP0    @BUF$,,AUTO
         2 000006   000000 236100                    LDQ     0,,PR0
         2 000007   200015 756100                    STQ     WRITE$FPT+5,,AUTO

      188     6200    1   WRITE$FPT.BUF_.BOUND = ARS - 1  ;

   6200  2 000010   200004 471500                    LDP1    @ARS,,AUTO
         2 000011   100000 236100                    LDQ     0,,PR1
         2 000012   000001 136007                    SBLQ    1,DL
         2 000013   000020 736000                    QLS     16
         2 000014   200014 676100                    ERQ     WRITE$FPT+4,,AUTO
         2 000015   000034 376000 xsym               ANQ     B_VECTNIL+28
         2 000016   200014 656100                    ERSQ    WRITE$FPT+4,,AUTO

      189     6201    1   WRITE$FPT.V.DCB# = DCB# ;

   6201  2 000017   200006 473500                    LDP3    @DCB#,,AUTO
         2 000020   300000 720100                    LXL0    0,,PR3
         2 000021   200020 740100                    STX0    WRITE$FPT+8,,AUTO

      190     6202    1   WRITE$FPT.KEY_ = VECTOR( KEY ) ;

   6202  2 000022   000000 235000 3                  LDA     0
         2 000023   200005 236100                    LDQ     @KEY,,AUTO
         2 000024   200012 757100                    STAQ    WRITE$FPT+2,,AUTO

      191     6203    1   WRITE$FPT.V_ = VECTOR( WRITE$FPT.V ) ;

   6203  2 000025   000001 235000 3                  LDA     1
         2 000026   200024 452500                    STP2    WRITE$FPT+12,,AUTO
PL6.E3A0      #003=ALA$WRITE_STAR File=ALA$BANNER.:E05TSI                        TUE 07/29/97 08:26 Page:42   
         2 000027   200024 236100                    LDQ     WRITE$FPT+12,,AUTO
         2 000030   000020 036003                    ADLQ    16,DU
         2 000031   200010 757100                    STAQ    WRITE$FPT,,AUTO

      192     6204    1   CALL M$WRITE( WRITE$FPT ) ALTRET( WRITE_ERR ) ;

   6204  2 000032   200010 630500                    EPPR0   WRITE$FPT,,AUTO
         2 000033   440001 713400                    CLIMB   alt,write
         2 000034   401400 401760                    pmme    nvectors=4
         2 000035   000037 702000 2                  TSX2    WRITE_ERR

      193     6205    1   RETURN ;

   6205  2 000036   000000 702200 xent               TSX2  ! X66_ARET

   6203  2 000037                       WRITE_ERR    null
      194     6206
      195     6207    1   WRITE_ERR: ;
      196     6208    1         ERR_CODE = B$TCB$->B$TCB.ALT$->B$ALT.ERR;

   6208  2 000037   000000 470400 xsym               LDP0    B$TCB$
         2 000040   000000 471500                    LDP1    0,,PR0
         2 000041   100102 236100                    LDQ     66,,PR1
         2 000042   200007 473500                    LDP3    @ERR_CODE,,AUTO
         2 000043   300000 756100                    STQ     0,,PR3

      197     6209    1         ALTRETURN ;

   6209  2 000044   000000 702200 xent               TSX2  ! X66_AALT
      198     6210
      199     6211    1   END   ALA$WRITE_STAR ;
      200     6212

PL6.E3A0      #003=ALA$WRITE_STAR File=ALA$BANNER.:E05TSI                        TUE 07/29/97 08:26 Page:43   
--  Include file information  --

   CP_6_SUBS.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure ALA$WRITE_STAR.
PL6.E3A0      #003=ALA$WRITE_STAR File=ALA$BANNER.:E05TSI                        TUE 07/29/97 08:26 Page:44   

 **** Variables and constants ****

  ****  Section 001 RoData ALA$WRITE_STAR

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(432)   r     1 WRITE_FPT

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @ARS                       3-0-0/w PTR         r     1 @BUF$
     6-0-0/w PTR         r     1 @DCB#                      7-0-0/w PTR         r     1 @ERR_CODE
     5-0-0/w PTR         r     1 @KEY                      *0-0-0/w UBIN        r     1 ARS
    *0-0-0/w PTR         r     1 BUF$                      *0-0-0/w UBIN        r     1 DCB#
    *0-0-0/w STRC        r     1 ERR_CODE                  *0-0-0/c STRC(189)   r     1 KEY
    10-0-0/d STRC(432)   r     1 WRITE$FPT

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$TCB$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/w STRC(144)   r     1 B$TCB

PL6.E3A0      #003=ALA$WRITE_STAR File=ALA$BANNER.:E05TSI                        TUE 07/29/97 08:26 Page:45   

   Procedure ALA$WRITE_STAR requires 37 words for executable code.
   Procedure ALA$WRITE_STAR requires 22 words of local(AUTO) storage.

    No errors detected in file ALA$BANNER.:E05TSI    .
PL6.E3A0      #003=ALA$WRITE_STAR File=ALA$BANNER.:E05TSI                        TUE 07/29/97 08:26 Page:46   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=ALA$WRITE_STAR File=ALA$BANNER.:E05TSI                        TUE 07/29/97 08:26 Page:47   
          MINI XREF LISTING

ARS
        10**DCL         6--PROC     6200>>ASSIGN
B$ALT.CODE
      6123**DCL      6123--REDEF    6124--REDEF    6124--REDEF
B$ALT.ERR
      6124**DCL      6208>>ASSIGN
B$ALT.ERR.ERR#
      6125**DCL      6125--REDEF
B$ALT.EVID
      6124**DCL      6124--REDEF    6124--REDEF
B$TCB.ALT$
      6119**DCL      6208>>ASSIGN
B$TCB$
      6129**DCL      6208>>ASSIGN
BUF$
         9**DCL         6--PROC     6199>>ASSIGN
DCB#
         8**DCL         6--PROC     6201>>ASSIGN
ERR_CODE
        14**DCL         6--PROC     6208<<ASSIGN
KEY
        11**DCL         6--PROC     6202--ASSIGN
M$WRITE
      5507**DCL-ENT  6204--CALL
WRITE$FPT
      6182**DCL      6198<<ASSIGN   6204<>CALL
WRITE$FPT.BUF_.BOUND
      6182**DCL      6200<<ASSIGN
WRITE$FPT.BUF_.BUF$
      6184**DCL      6199<<ASSIGN
WRITE$FPT.KEY_
      6182**DCL      6202<<ASSIGN
PL6.E3A0      #003=ALA$WRITE_STAR File=ALA$BANNER.:E05TSI                        TUE 07/29/97 08:26 Page:48   
WRITE$FPT.STATION_
      6184**DCL      6184--REDEF
WRITE$FPT.V
      6185**DCL      6203--ASSIGN
WRITE$FPT.V.DCB#
      6185**DCL      6201<<ASSIGN
WRITE$FPT.V.DVBYTE.VFC#
      6191**DCL      6191--REDEF
WRITE$FPT.V_
      6182**DCL      6203<<ASSIGN
WRITE_ERR
      6203**LABEL    6204--CALLALT
WRITE_FPT
      6150**DCL      6198>>ASSIGN
WRITE_FPT.STATION_
      6152**DCL      6152--REDEF
WRITE_FPT.V
      6153**DCL      6150--DCLINIT
WRITE_FPT.V.DVBYTE.VFC#
      6159**DCL      6159--REDEF
